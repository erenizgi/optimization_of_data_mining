{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 828882665",
    "sha": "addd4b66ac01905fb7f6987743b2cfec50d9e72d",
    "files": [
        {
            "sha": "1c3503a8101654eea75685c96431f34712c6425f",
            "filename": "tensorflow/core/common_runtime/step_stats_collector.h",
            "status": "modified",
            "additions": 17,
            "deletions": 14,
            "changes": 31,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Fstep_stats_collector.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Fstep_stats_collector.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fstep_stats_collector.h?ref=addd4b66ac01905fb7f6987743b2cfec50d9e72d",
            "patch": "@@ -51,7 +51,7 @@ class NodeExecStatsInterface {\n   // Called when the statistics collection for the node has finished. Once this\n   // method is called, the caller should not make assumptions about the validity\n   // of this object.\n-  virtual void Done(const string& device) = 0;\n+  virtual void Done(const std::string& device) = 0;\n \n   // Called immediately after this node starts being processed by the executor.\n   virtual void RecordExecutorStarted() = 0;\n@@ -101,7 +101,7 @@ class NodeExecStatsWrapper : public NodeExecStatsInterface {\n   // Destructor calls Finalize() to release the TrackingAllocators.\n   ~NodeExecStatsWrapper() override { Finalize(); }\n \n-  void Done(const string& device) override;\n+  void Done(const std::string& device) override;\n   void RecordExecutorStarted() override;\n   void RecordComputeStarted() override;\n   void RecordComputeEnded() override;\n@@ -148,7 +148,8 @@ class StepStatsCollectorInterface {\n   // `err` message needs to contain device name and allocator name, e.g.:\n   // \"ResourceExhaustedError: OOM when allocating tensor ...\n   // on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\"\n-  virtual string ReportAllocsOnResourceExhausted(absl::string_view err) = 0;\n+  virtual std::string ReportAllocsOnResourceExhausted(\n+      absl::string_view err) = 0;\n };\n \n // StepStatsCollector manages the collection of a StepStats object.\n@@ -164,19 +165,19 @@ class StepStatsCollector : public StepStatsCollectorInterface {\n   // device_map.\n   void BuildCostModel(\n       CostModelManager* cost_model_manager,\n-      const std::unordered_map<string, const Graph*>& device_map);\n+      const std::unordered_map<std::string, const Graph*>& device_map);\n \n   // Saves node statistics to the DeviceStats object associated with device.\n   // Should be called before Finalize.\n-  void Save(const string& device, NodeExecStats* node_stats_pb);\n-  void Save(const string& device, NodeExecStatsWrapper* node_stats);\n+  void Save(const std::string& device, NodeExecStats* node_stats_pb);\n+  void Save(const std::string& device, NodeExecStatsWrapper* node_stats);\n \n   // Saves thread name.\n-  void SaveThreadName(const string& device, const uint32 thread_id,\n-                      const string& thread_name);\n+  void SaveThreadName(const std::string& device, const uint32_t thread_id,\n+                      const std::string& thread_name);\n \n   NodeExecStatsInterface* CreateNodeExecStats(const NodeDef* node) override;\n-  string ReportAllocsOnResourceExhausted(absl::string_view err) override;\n+  std::string ReportAllocsOnResourceExhausted(absl::string_view err) override;\n \n   // The following 2 Finalize methods populate the StepStats passed\n   // from the constructor. Calling it more than once won't have any effect.\n@@ -188,19 +189,21 @@ class StepStatsCollector : public StepStatsCollectorInterface {\n  private:\n   // TODO(suharshs): Make this configurable if its not possible to find a value\n   // that works for all cases.\n-  static constexpr uint64 kMaxCollectedNodes = 1 << 20;\n+  static constexpr uint64_t kMaxCollectedNodes = 1 << 20;\n \n   typedef std::vector<std::unique_ptr<NodeExecStatsWrapper>> NodeStatsVector;\n-  typedef std::unordered_map<uint32, string> ThreadNamesMap;\n+  typedef std::unordered_map<uint32_t, std::string> ThreadNamesMap;\n \n   void FinalizeInternal() TF_EXCLUSIVE_LOCKS_REQUIRED(mu_);\n \n   mutex mu_;\n   bool finalized_ TF_GUARDED_BY(mu_);\n-  std::unordered_map<string, NodeStatsVector> dev_stats_ TF_GUARDED_BY(mu_);\n-  std::unordered_map<string, ThreadNamesMap> thread_names_ TF_GUARDED_BY(mu_);\n+  std::unordered_map<std::string, NodeStatsVector> dev_stats_\n+      TF_GUARDED_BY(mu_);\n+  std::unordered_map<std::string, ThreadNamesMap> thread_names_\n+      TF_GUARDED_BY(mu_);\n   StepStats* step_stats_ TF_GUARDED_BY(mu_);\n-  uint64 collected_nodes_ TF_GUARDED_BY(mu_) = 0;\n+  uint64_t collected_nodes_ TF_GUARDED_BY(mu_) = 0;\n };\n \n }  // namespace tensorflow"
        },
        {
            "sha": "d36ad0a20dc0a065a1a978ec3b2d95a55d8162d7",
            "filename": "tensorflow/core/common_runtime/testlib_ops.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Ftestlib_ops.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Ftestlib_ops.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Ftestlib_ops.cc?ref=addd4b66ac01905fb7f6987743b2cfec50d9e72d",
            "patch": "@@ -46,7 +46,7 @@ class ErrorOp : public OpKernel {\n   }\n \n  private:\n-  string errmsg_;\n+  std::string errmsg_;\n   bool log_error_ = false;\n };\n REGISTER_KERNEL_BUILDER(Name(\"Error\").Device(DEVICE_CPU), ErrorOp);"
        },
        {
            "sha": "8ada1107f7f0448d0dedb8f503d276c028826ace",
            "filename": "tensorflow/core/common_runtime/threadpool_device.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device.cc?ref=addd4b66ac01905fb7f6987743b2cfec50d9e72d",
            "patch": "@@ -54,7 +54,7 @@ info. It does not have any negative impact on performance. */\n namespace tensorflow {\n \n ThreadPoolDevice::ThreadPoolDevice(const SessionOptions& options,\n-                                   const string& name, Bytes memory_limit,\n+                                   const std::string& name, Bytes memory_limit,\n                                    const DeviceLocality& locality,\n                                    Allocator* allocator)\n     : LocalDevice(options, Device::BuildDeviceAttributes("
        },
        {
            "sha": "4e6c0b879350828bf8ce87840ecba07f1dcb75e1",
            "filename": "tensorflow/core/common_runtime/threadpool_device.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device.h?ref=addd4b66ac01905fb7f6987743b2cfec50d9e72d",
            "patch": "@@ -25,7 +25,7 @@ namespace tensorflow {\n // CPU device implementation.\n class ThreadPoolDevice : public LocalDevice {\n  public:\n-  ThreadPoolDevice(const SessionOptions& options, const string& name,\n+  ThreadPoolDevice(const SessionOptions& options, const std::string& name,\n                    Bytes memory_limit, const DeviceLocality& locality,\n                    Allocator* allocator);\n   ~ThreadPoolDevice() override;"
        },
        {
            "sha": "a6756935e63e277a0bc8ea5a894aad3d8a724284",
            "filename": "tensorflow/core/common_runtime/threadpool_device_factory.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device_factory.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device_factory.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device_factory.cc?ref=addd4b66ac01905fb7f6987743b2cfec50d9e72d",
            "patch": "@@ -29,14 +29,14 @@ namespace tensorflow {\n // TODO(zhifengc/tucker): Figure out the bytes of available RAM.\n class ThreadPoolDeviceFactory : public DeviceFactory {\n  public:\n-  absl::Status ListPhysicalDevices(std::vector<string>* devices) override {\n+  absl::Status ListPhysicalDevices(std::vector<std::string>* devices) override {\n     devices->push_back(\"/physical_device:CPU:0\");\n \n     return absl::OkStatus();\n   }\n \n   absl::Status CreateDevices(\n-      const SessionOptions& options, const string& name_prefix,\n+      const SessionOptions& options, const std::string& name_prefix,\n       std::vector<std::unique_ptr<Device>>* devices) override {\n     int num_numa_nodes = port::NUMANumNodes();\n     int n = 1;\n@@ -45,7 +45,7 @@ class ThreadPoolDeviceFactory : public DeviceFactory {\n       n = iter->second;\n     }\n     for (int i = 0; i < n; i++) {\n-      string name = strings::StrCat(name_prefix, \"/device:CPU:\", i);\n+      std::string name = absl::StrCat(name_prefix, \"/device:CPU:\", i);\n       std::unique_ptr<ThreadPoolDevice> tpd;\n       if (options.config.experimental().use_numa_affinity()) {\n         int numa_node = i % num_numa_nodes;"
        },
        {
            "sha": "0434c287f31a5e0bb4e7209638c395c92db5a911",
            "filename": "tensorflow/core/common_runtime/type_inference.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Ftype_inference.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/addd4b66ac01905fb7f6987743b2cfec50d9e72d/tensorflow%2Fcore%2Fcommon_runtime%2Ftype_inference.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Ftype_inference.cc?ref=addd4b66ac01905fb7f6987743b2cfec50d9e72d",
            "patch": "@@ -125,7 +125,7 @@ absl::Status update_inferred_type(Node* target, const FullTypeDef& t,\n   return absl::OkStatus();\n }\n \n-absl::StatusOr<FullTypeDef> run_inference(const string& fn_name,\n+absl::StatusOr<FullTypeDef> run_inference(const std::string& fn_name,\n                                           const TypeRefVector& in_types) {\n   // TODO(b/224776031): Things remaining to implement:\n   //  * look up function by name"
        }
    ],
    "stats": {
        "total": 45,
        "additions": 24,
        "deletions": 21
    }
}