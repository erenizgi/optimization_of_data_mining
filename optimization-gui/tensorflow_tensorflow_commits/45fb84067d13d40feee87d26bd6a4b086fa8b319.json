{
    "author": "fengwuyao",
    "message": "Update to use half data type in test_util\n\nPiperOrigin-RevId: 842870236",
    "sha": "45fb84067d13d40feee87d26bd6a4b086fa8b319",
    "files": [
        {
            "sha": "db2435b081d36bb4c770a1024eeb29735d5dd4ba",
            "filename": "tensorflow/lite/kernels/BUILD",
            "status": "modified",
            "additions": 23,
            "deletions": 7,
            "changes": 30,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2FBUILD?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -167,7 +167,7 @@ cc_library(\n         \"//tensorflow/lite/tools/optimize:quantization_utils\",\n         \"//tensorflow/lite/tools/serialization:writer_lib\",\n         \"//tensorflow/lite/tools/versioning\",\n-        \"@FP16\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/base:core_headers\",\n@@ -574,6 +574,7 @@ cc_test(\n         \"//tensorflow/lite:array\",\n         \"//tensorflow/lite:util\",\n         \"//tensorflow/lite/core/c:common\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest_main\",\n     ],\n )\n@@ -1118,6 +1119,7 @@ cc_test(\n         \"//tensorflow/lite/core:framework_stable\",\n         \"//tensorflow/lite/core/api\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_googletest//:gtest\",\n         \"@flatbuffers\",\n@@ -1499,6 +1501,7 @@ cc_test(\n         \"//tensorflow/lite/core/c:c_api_types\",\n         \"//tensorflow/lite/kernels/internal:tensor_utils_no_eigen\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_absl//absl/random\",\n         \"@com_google_absl//absl/types:span\",\n         \"@com_google_googletest//:gtest\",\n@@ -1515,8 +1518,8 @@ cc_test(\n         \":test_main\",\n         \":test_util\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n-        \"@eigen_archive//:eigen3\",\n         \"@flatbuffers\",\n     ],\n )\n@@ -1709,6 +1712,7 @@ cc_test(\n         \":test_main\",\n         \":test_util\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n     ],\n )\n@@ -1739,6 +1743,7 @@ cc_test(\n         \":test_main\",\n         \":test_util\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n         \"@eigen_archive//:eigen3\",\n     ],\n@@ -1853,6 +1858,7 @@ cc_test(\n         \":test_main\",\n         \":test_util\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n         \"@eigen_archive//:eigen3\",\n     ],\n@@ -1913,8 +1919,8 @@ cc_test(\n         \":test_util\",\n         \"//tensorflow/lite/core/c:common\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n-        \"@flatbuffers\",\n     ],\n )\n \n@@ -1972,6 +1978,7 @@ cc_test(\n         \"//tensorflow/lite:framework_stable\",\n         \"//tensorflow/lite/core:framework_stable\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n         \"@flatbuffers\",\n     ],\n@@ -2082,12 +2089,12 @@ cc_test(\n     deps = [\n         \":test_main\",\n         \":test_util\",\n-        \"//tensorflow/lite:string\",\n         \"//tensorflow/lite/core/c:common\",\n         \"//tensorflow/lite/kernels/internal:tensor_utils\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n-        \"@flatbuffers\",\n+        \"@eigen_archive//:eigen3\",\n     ],\n )\n \n@@ -2101,7 +2108,9 @@ cc_test(\n         \"//tensorflow/lite:string\",\n         \"//tensorflow/lite/core/c:common\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n+        \"@eigen_archive//:eigen3\",\n         \"@flatbuffers\",\n     ],\n )\n@@ -2485,7 +2494,9 @@ cc_test(\n         \":test_main\",\n         \":test_util\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n+        \"@eigen_archive//:eigen3\",\n     ],\n )\n \n@@ -2530,6 +2541,7 @@ cc_test(\n         \":test_util\",\n         \"//tensorflow/lite:string\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n         \"@flatbuffers\",\n     ],\n@@ -2544,6 +2556,7 @@ cc_test(\n         \":test_main\",\n         \":test_util\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n         \"@flatbuffers\",\n     ],\n@@ -2581,8 +2594,8 @@ cc_test(\n         \"//tensorflow/lite/kernels/internal:tensor_ctypes\",\n         \"//tensorflow/lite/kernels/internal:tensor_utils_no_eigen\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n-        \"@eigen_archive//:eigen3\",\n     ],\n )\n \n@@ -2881,6 +2894,7 @@ cc_test(\n         \":test_util\",\n         \"//tensorflow/lite:string\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n         \"@eigen_archive//:eigen3\",\n     ],\n@@ -2905,6 +2919,7 @@ cc_test(\n         \":test_main\",\n         \":test_util\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n     ],\n )\n@@ -3173,12 +3188,13 @@ cc_test(\n     size = \"small\",\n     srcs = [\"dynamic_update_slice_test.cc\"],\n     deps = [\n+        \":subgraph_test_util\",\n         \":test_main\",\n         \":test_util\",\n         \"//tensorflow/lite:framework_stable\",\n         \"//tensorflow/lite/core:framework_stable\",\n-        \"//tensorflow/lite/kernels:subgraph_test_util\",\n         \"//tensorflow/lite/schema:schema_fbs\",\n+        \"//tensorflow/lite/types:half\",\n         \"@com_google_googletest//:gtest\",\n         \"@eigen_archive//:eigen3\",\n         \"@flatbuffers\","
        },
        {
            "sha": "96bb22ed76c4318cb410fff418a8eeafab3e8dc8",
            "filename": "tensorflow/lite/kernels/activations_test.cc",
            "status": "modified",
            "additions": 21,
            "deletions": 22,
            "changes": 43,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Factivations_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Factivations_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Factivations_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -35,6 +35,7 @@ limitations under the License.\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n #include \"tensorflow/lite/string_type.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n \n@@ -574,18 +575,17 @@ TEST_P(TanhOpTest, Tanh) {\n }\n \n TEST_P(TanhOpTest, TanhFloat16) {\n-  FloatActivationsOpModel<Eigen::half> m(\n-      GetRegistration(), BuiltinOperator_TANH,\n-      /*input=*/{TensorType_FLOAT16, {1, 2, 4, 1}});\n+  FloatActivationsOpModel<half> m(GetRegistration(), BuiltinOperator_TANH,\n+                                  /*input=*/{TensorType_FLOAT16, {1, 2, 4, 1}});\n   m.SetInput({\n-      Eigen::half(0),\n-      Eigen::half(-6),\n-      Eigen::half(2),\n-      Eigen::half(4),\n-      Eigen::half(3),\n-      Eigen::half(-2),\n-      Eigen::half(10),\n-      Eigen::half(1),\n+      half(0),\n+      half(-6),\n+      half(2),\n+      half(4),\n+      half(3),\n+      half(-2),\n+      half(10),\n+      half(1),\n   });\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(m.GetOutput(), ElementsAreArray(ArrayFloatNear(\n@@ -1210,18 +1210,17 @@ TEST_P(LogisticOpTest, SigmoidFloat32) {\n }\n \n TEST_P(LogisticOpTest, SigmoidFloat16) {\n-  FloatActivationsOpModel<Eigen::half> m(\n-      GetRegistration(), BuiltinOperator_LOGISTIC,\n-      /*input=*/{TensorType_FLOAT16, {1, 2, 4, 1}});\n+  FloatActivationsOpModel<half> m(GetRegistration(), BuiltinOperator_LOGISTIC,\n+                                  /*input=*/{TensorType_FLOAT16, {1, 2, 4, 1}});\n   m.SetInput({\n-      Eigen::half{-1.2f},\n-      Eigen::half{-6.0f},\n-      Eigen::half{2.0f},\n-      Eigen::half{4.0f},\n-      Eigen::half{3.0f},\n-      Eigen::half{-2.0f},\n-      Eigen::half{10.0f},\n-      Eigen::half{1.0f},\n+      half{-1.2f},\n+      half{-6.0f},\n+      half{2.0f},\n+      half{4.0f},\n+      half{3.0f},\n+      half{-2.0f},\n+      half{10.0f},\n+      half{1.0f},\n   });\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(m.GetOutput(), ElementsAreArray(ArrayFloatNear("
        },
        {
            "sha": "0c3839361570a6f8bd2fb72d2b0f668a9a64b143",
            "filename": "tensorflow/lite/kernels/atan2_test.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 13,
            "changes": 29,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fatan2_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fatan2_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fatan2_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -17,6 +17,7 @@\n #include <gtest/gtest.h>\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -34,7 +35,7 @@ tflite::TensorType GetTTEnum<double>() {\n }\n \n template <>\n-tflite::TensorType GetTTEnum<Eigen::half>() {\n+tflite::TensorType GetTTEnum<half>() {\n   return tflite::TensorType_FLOAT16;\n }\n \n@@ -74,7 +75,7 @@ class Atan2Test : public ::testing::Test {\n   using FloatType = Float;\n };\n \n-using TestTypes = ::testing::Types<float, double, Eigen::half, Eigen::bfloat16>;\n+using TestTypes = ::testing::Types<float, double, half, Eigen::bfloat16>;\n \n TYPED_TEST_SUITE(Atan2Test, TestTypes);\n \n@@ -85,15 +86,15 @@ TYPED_TEST(Atan2Test, TestScalar) {\n   tflite::TensorData output = {GetTTEnum<Float>(), {}};\n   Atan2Model m(y, x, output);\n \n-  auto got = m.GetOutput<Float>({Float(0.0)}, {Float(0.0)});\n+  auto got = m.GetOutput<Float>({Float(0.0f)}, {Float(0.0f)});\n   ASSERT_EQ(got.size(), 1);\n   EXPECT_FLOAT_EQ(got[0], 0.0);\n-  ASSERT_FLOAT_EQ(m.GetOutput<Float>({Float(1.0)}, {Float(0.0)})[0],\n-                  Float(M_PI / 2));\n-  ASSERT_FLOAT_EQ(m.GetOutput<Float>({Float(0.0)}, {Float(1.0)})[0],\n-                  Float(0.0));\n-  ASSERT_FLOAT_EQ(m.GetOutput<Float>({Float(-1.0)}, {Float(0.0)})[0],\n-                  Float(-M_PI / 2));\n+  ASSERT_FLOAT_EQ(m.GetOutput<Float>({Float(1.0f)}, {Float(0.0f)})[0],\n+                  Float(static_cast<float>(M_PI / 2)));\n+  ASSERT_FLOAT_EQ(m.GetOutput<Float>({Float(0.0f)}, {Float(1.0f)})[0],\n+                  Float(0.0f));\n+  ASSERT_FLOAT_EQ(m.GetOutput<Float>({Float(-1.0f)}, {Float(0.0f)})[0],\n+                  Float(-static_cast<float>(M_PI / 2)));\n }\n \n TYPED_TEST(Atan2Test, TestBatch) {\n@@ -102,10 +103,12 @@ TYPED_TEST(Atan2Test, TestBatch) {\n   tflite::TensorData x = {GetTTEnum<Float>(), {4, 2, 1}};\n   tflite::TensorData output = {GetTTEnum<Float>(), {4, 2, 1}};\n   Atan2Model m(y, x, output);\n-  std::vector<Float> y_data = {Float(0.1), Float(0.2), Float(0.3), Float(0.4),\n-                               Float(0.5), Float(0.6), Float(0.7), Float(0.8)};\n-  std::vector<Float> x_data = {Float(0.8), Float(0.7), Float(0.6), Float(0.5),\n-                               Float(0.4), Float(0.3), Float(0.2), Float(0.1)};\n+  std::vector<Float> y_data = {Float(0.1f), Float(0.2f), Float(0.3f),\n+                               Float(0.4f), Float(0.5f), Float(0.6f),\n+                               Float(0.7f), Float(0.8f)};\n+  std::vector<Float> x_data = {Float(0.8f), Float(0.7f), Float(0.6f),\n+                               Float(0.5f), Float(0.4f), Float(0.3f),\n+                               Float(0.2f), Float(0.1f)};\n   auto got = m.GetOutput<Float>(y_data, x_data);\n   ASSERT_EQ(got.size(), 8);\n   for (int i = 0; i < 8; ++i) {"
        },
        {
            "sha": "bcc9b4bc0580037cbca49d0abdf09e0af7e9698d",
            "filename": "tensorflow/lite/kernels/cast_test.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 10,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fcast_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fcast_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fcast_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -31,6 +31,7 @@ limitations under the License.\n #include \"tensorflow/lite/kernels/kernel_util.h\"\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -413,11 +414,10 @@ TEST(CastOpModel, CastFloatToFloat16) {\n   m.PopulateTensor<float>(m.input(), {100.f, 1.0f, 0.f, 0.4f, 1.999f, 1.1f});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(\n-      m.ExtractVector<Eigen::half>(m.output()),\n-      ElementsAreArray(\n-          {static_cast<Eigen::half>(100.f), static_cast<Eigen::half>(1.0f),\n-           static_cast<Eigen::half>(0.f), static_cast<Eigen::half>(0.4f),\n-           static_cast<Eigen::half>(1.999f), static_cast<Eigen::half>(1.1)}));\n+      m.ExtractVector<half>(m.output()),\n+      ElementsAreArray({static_cast<half>(100.f), static_cast<half>(1.0f),\n+                        static_cast<half>(0.f), static_cast<half>(0.4f),\n+                        static_cast<half>(1.999f), static_cast<half>(1.1f)}));\n }\n \n TEST(CastOpModel, CastFloatToBFloat16) {\n@@ -435,11 +435,10 @@ TEST(CastOpModel, CastFloatToBFloat16) {\n \n TEST(CastOpModel, CastFloat16ToFloat) {\n   CastOpModel m({TensorType_FLOAT16, {3, 2}}, {TensorType_FLOAT32, {3, 2}});\n-  m.PopulateTensor<Eigen::half>(\n-      m.input(),\n-      {static_cast<Eigen::half>(100.f), static_cast<Eigen::half>(1.0f),\n-       static_cast<Eigen::half>(0.f), static_cast<Eigen::half>(0.4f),\n-       static_cast<Eigen::half>(1.999f), static_cast<Eigen::half>(1.1f)});\n+  m.PopulateTensor<half>(m.input(),\n+                         {static_cast<half>(100.f), static_cast<half>(1.0f),\n+                          static_cast<half>(0.f), static_cast<half>(0.4f),\n+                          static_cast<half>(1.999f), static_cast<half>(1.1f)});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(m.ExtractVector<float>(m.output()),\n               ElementsAreArray(ArrayFloatNear("
        },
        {
            "sha": "bc2091aa823832230556ee47d16bef1bb03eee43",
            "filename": "tensorflow/lite/kernels/comparisons_test.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fcomparisons_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fcomparisons_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fcomparisons_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -25,6 +25,7 @@ limitations under the License.\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n #include \"tensorflow/lite/string_type.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -396,12 +397,10 @@ TEST(ComparisonsTest, LessFloat) {\n TEST(ComparisonsTest, LessFloat16) {\n   ComparisonOpModel model({1, 1, 1, 4}, {1, 1, 1, 4}, TensorType_FLOAT16,\n                           BuiltinOperator_LESS);\n-  model.PopulateTensor<Eigen::half>(\n-      model.input1(),\n-      {Eigen::half(0.1), Eigen::half(0.9), Eigen::half(0.7), Eigen::half(0.3)});\n-  model.PopulateTensor<Eigen::half>(\n-      model.input2(),\n-      {Eigen::half(0.1), Eigen::half(0.2), Eigen::half(0.6), Eigen::half(0.5)});\n+  model.PopulateTensor<half>(model.input1(),\n+                             {half(0.1f), half(0.9f), half(0.7f), half(0.3f)});\n+  model.PopulateTensor<half>(model.input2(),\n+                             {half(0.1f), half(0.2f), half(0.6f), half(0.5f)});\n   ASSERT_EQ(model.Invoke(), kTfLiteOk);\n \n   EXPECT_THAT(model.GetOutput(), ElementsAre(false, false, false, true));"
        },
        {
            "sha": "f9c765375cc20f4f42478a644f140a7d97eb0949",
            "filename": "tensorflow/lite/kernels/concatenation_test.cc",
            "status": "modified",
            "additions": 21,
            "deletions": 23,
            "changes": 44,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fconcatenation_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fconcatenation_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fconcatenation_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -24,6 +24,7 @@ limitations under the License.\n #include \"flatbuffers/flatbuffers.h\"  // from @flatbuffers\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -121,12 +122,11 @@ TEST(ConcatenationOpTest, ThreeDimensionalOneInputBFloat16) {\n }\n \n TEST(ConcatenationOpTest, ThreeDimensionalOneInputFloat16) {\n-  ConcatenationOpModel<Eigen::half> m({TensorType_FLOAT16, {2, 1, 2}},\n-                                      /*axis=*/1,\n-                                      /*num_inputs=*/1);\n-  m.SetInput(0,\n-             {static_cast<Eigen::half>(1.0f), static_cast<Eigen::half>(3.0f),\n-              static_cast<Eigen::half>(4.0f), static_cast<Eigen::half>(7.0f)});\n+  ConcatenationOpModel<half> m({TensorType_FLOAT16, {2, 1, 2}},\n+                               /*axis=*/1,\n+                               /*num_inputs=*/1);\n+  m.SetInput(0, {static_cast<half>(1.0f), static_cast<half>(3.0f),\n+                 static_cast<half>(4.0f), static_cast<half>(7.0f)});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(m.GetOutput(), ElementsAreArray({1, 3, 4, 7}));\n }\n@@ -206,23 +206,21 @@ TEST(ConcatenationOpTest, FiveDimensionalTwoInputBFloat16) {\n }\n \n TEST(ConcatenationOpTest, FiveDimensionalTwoInputFloat16) {\n-  ConcatenationOpModel<Eigen::half> m({TensorType_FLOAT16, {2, 1, 2, 1, 3}},\n-                                      /*axis=*/0,\n-                                      /*num_inputs=*/2);\n-  m.SetInput(\n-      0, {static_cast<Eigen::half>(1.0f), static_cast<Eigen::half>(2.0f),\n-          static_cast<Eigen::half>(3.0f), static_cast<Eigen::half>(4.0f),\n-          static_cast<Eigen::half>(5.0f), static_cast<Eigen::half>(6.0f),\n-          static_cast<Eigen::half>(7.0f), Eigen::half{8.0f},\n-          static_cast<Eigen::half>(9.0f), static_cast<Eigen::half>(10.0f),\n-          static_cast<Eigen::half>(11.0f), static_cast<Eigen::half>(12.0f)});\n-  m.SetInput(\n-      1, {static_cast<Eigen::half>(13.0f), static_cast<Eigen::half>(14.0f),\n-          Eigen::half{15.0f}, static_cast<Eigen::half>(16.0f),\n-          Eigen::half{17.0f}, static_cast<Eigen::half>(18.0f),\n-          static_cast<Eigen::half>(19.0f), static_cast<Eigen::half>(20.0f),\n-          static_cast<Eigen::half>(21.0f), static_cast<Eigen::half>(22.0f),\n-          static_cast<Eigen::half>(23.0f), static_cast<Eigen::half>(24.0f)});\n+  ConcatenationOpModel<half> m({TensorType_FLOAT16, {2, 1, 2, 1, 3}},\n+                               /*axis=*/0,\n+                               /*num_inputs=*/2);\n+  m.SetInput(0, {static_cast<half>(1.0f), static_cast<half>(2.0f),\n+                 static_cast<half>(3.0f), static_cast<half>(4.0f),\n+                 static_cast<half>(5.0f), static_cast<half>(6.0f),\n+                 static_cast<half>(7.0f), half{8.0f}, static_cast<half>(9.0f),\n+                 static_cast<half>(10.0f), static_cast<half>(11.0f),\n+                 static_cast<half>(12.0f)});\n+  m.SetInput(1,\n+             {static_cast<half>(13.0f), static_cast<half>(14.0f), half{15.0f},\n+              static_cast<half>(16.0f), half{17.0f}, static_cast<half>(18.0f),\n+              static_cast<half>(19.0f), static_cast<half>(20.0f),\n+              static_cast<half>(21.0f), static_cast<half>(22.0f),\n+              static_cast<half>(23.0f), static_cast<half>(24.0f)});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(\n       m.GetOutput(),"
        },
        {
            "sha": "99aa637a068d23316c53f3a33e13c978a70a85f7",
            "filename": "tensorflow/lite/kernels/dynamic_update_slice_test.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 9,
            "changes": 17,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fdynamic_update_slice_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fdynamic_update_slice_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fdynamic_update_slice_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -28,6 +28,7 @@ limitations under the License.\n #include \"tensorflow/lite/kernels/subgraph_test_util.h\"\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -112,22 +113,20 @@ TEST(DynamicUpdateSliceOpTest, SimpleTestF16InPlaceInput) {\n   DynamicUpdateSliceOpModel m({TensorType_FLOAT16, {3, 3}},\n                               {TensorType_FLOAT16, {2, 1}},\n                               {TensorType_INT32, {2}});\n-  m.SetInput<Eigen::half>({Eigen::half(1), Eigen::half(2), Eigen::half(3),\n-                           Eigen::half(4), Eigen::half(5), Eigen::half(6),\n-                           Eigen::half(7), Eigen::half(8), Eigen::half(9)});\n-  m.SetUpdate<Eigen::half>({Eigen::half(-1), Eigen::half(-2)});\n+  m.SetInput<half>({half(1), half(2), half(3), half(4), half(5), half(6),\n+                    half(7), half(8), half(9)});\n+  m.SetUpdate<half>({half(-1), half(-2)});\n   m.SetStartIndices<int32_t>({1, 1});\n   const int kInplaceInputTensorIdx = 0;\n   const int kInplaceOutputTensorIdx = 0;\n   const TfLiteTensor* input_tensor = m.GetInputTensor(kInplaceInputTensorIdx);\n   TfLiteTensor* output_tensor = m.GetOutputTensor(kInplaceOutputTensorIdx);\n   output_tensor->data.data = input_tensor->data.data;\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(m.GetOutput<Eigen::half>(),\n-              ElementsAreArray(ArrayFloatNear(\n-                  {Eigen::half(1), Eigen::half(2), Eigen::half(3),\n-                   Eigen::half(4), Eigen::half(-1), Eigen::half(6),\n-                   Eigen::half(7), Eigen::half(-2), Eigen::half(9)})));\n+  EXPECT_THAT(m.GetOutput<half>(),\n+              ElementsAreArray(\n+                  ArrayFloatNear({half(1), half(2), half(3), half(4), half(-1),\n+                                  half(6), half(7), half(-2), half(9)})));\n   EXPECT_EQ(output_tensor->data.data, input_tensor->data.data);\n }\n "
        },
        {
            "sha": "a8e9815f30bc617c736090cfb90cdf3c857662a7",
            "filename": "tensorflow/lite/kernels/fill_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Ffill_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Ffill_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Ffill_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -24,6 +24,7 @@ limitations under the License.\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n #include \"tensorflow/lite/string_type.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -139,8 +140,8 @@ TEST_P(FillOpTest, FillFloat) {\n }\n \n TEST_P(FillOpTest, FillFloat16) {\n-  FillOpModel<int64_t, Eigen::half> m(TensorType_INT64, {3}, {2, 2, 2},\n-                                      Eigen::half(4.0f), GetParam());\n+  FillOpModel<int64_t, half> m(TensorType_INT64, {3}, {2, 2, 2}, half(4.0f),\n+                               GetParam());\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(\n       m.GetOutput(),"
        },
        {
            "sha": "13154175e334ccf9889634a92e27665dcbabbc91",
            "filename": "tensorflow/lite/kernels/floor_test.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 15,
            "changes": 31,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Ffloor_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Ffloor_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Ffloor_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <gtest/gtest.h>\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -79,28 +80,28 @@ TEST(FloorOpTest, MultiDims) {\n \n TEST(FloorOpTest, SingleDimFloat16) {\n   FloorOpModel model({2}, TensorType_FLOAT16);\n-  model.PopulateTensor<>(model.input(), {Eigen::half(8.5), Eigen::half(0.0)});\n+  model.PopulateTensor<>(model.input(), {half(8.5f), half(0.0f)});\n   ASSERT_EQ(model.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(model.GetOutput<Eigen::half>(), ElementsAreArray({8, 0}));\n+  EXPECT_THAT(model.GetOutput<half>(), ElementsAreArray({8, 0}));\n   EXPECT_THAT(model.GetOutputShape(), ElementsAreArray({2}));\n }\n \n TEST(FloorOpTest, MultiDimsFloat16) {\n   FloorOpModel model({2, 1, 1, 5}, TensorType_FLOAT16);\n-  model.PopulateTensor<Eigen::half>(model.input(), {\n-                                                       Eigen::half(0.75),\n-                                                       Eigen::half(8.25),\n-                                                       Eigen::half(0.49),\n-                                                       Eigen::half(9.99),\n-                                                       Eigen::half(0.5),\n-                                                       Eigen::half(-0.25),\n-                                                       Eigen::half(-8.75),\n-                                                       Eigen::half(-0.99),\n-                                                       Eigen::half(-9.49),\n-                                                       Eigen::half(-0.5),\n-                                                   });\n+  model.PopulateTensor<half>(model.input(), {\n+                                                half(0.75f),\n+                                                half(8.25f),\n+                                                half(0.49f),\n+                                                half(9.99f),\n+                                                half(0.5f),\n+                                                half(-0.25f),\n+                                                half(-8.75f),\n+                                                half(-0.99f),\n+                                                half(-9.49f),\n+                                                half(-0.5f),\n+                                            });\n   ASSERT_EQ(model.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(model.GetOutput<Eigen::half>(),\n+  EXPECT_THAT(model.GetOutput<half>(),\n               ElementsAreArray({0, 8, 0, 9, 0, -1, -9, -1, -10, -1}));\n   EXPECT_THAT(model.GetOutputShape(), ElementsAreArray({2, 1, 1, 5}));\n }"
        },
        {
            "sha": "f4b9f65711fbdcca07a85379be559379f0ed16eb",
            "filename": "tensorflow/lite/kernels/gather_nd_test.cc",
            "status": "modified",
            "additions": 29,
            "deletions": 33,
            "changes": 62,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fgather_nd_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fgather_nd_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fgather_nd_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -20,10 +20,12 @@ limitations under the License.\n \n #include <gmock/gmock.h>\n #include <gtest/gtest.h>\n+#include \"Eigen/Core\"  // from @eigen_archive\n #include \"flatbuffers/flatbuffers.h\"  // from @flatbuffers\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n #include \"tensorflow/lite/string_type.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -244,21 +246,19 @@ TEST(GatherNdOpTest, BFloat16Int32) {\n TEST(GatherNdOpTest, Float16Int32) {\n   GatherNdOpModel m({TensorType_FLOAT16, {3, 2, 3}},\n                     {TensorType_INT32, {2, 2}});\n-  m.SetInput<Eigen::half>(\n-      {Eigen::half(1.1), Eigen::half(-1.2), Eigen::half(1.3), Eigen::half(-2.1),\n-       Eigen::half(2.2), Eigen::half(2.3),  //\n-       Eigen::half(3.1), Eigen::half(3.2), Eigen::half(-3.3), Eigen::half(-4.1),\n-       Eigen::half(-4.2), Eigen::half(4.3),  //\n-       Eigen::half(5.1), Eigen::half(-5.2), Eigen::half(5.3), Eigen::half(6.1),\n-       Eigen::half(-6.2), Eigen::half(6.3)});\n+  m.SetInput<half>({half(1.1f), half(-1.2f), half(1.3f), half(-2.1f),\n+                    half(2.2f), half(2.3f),  //\n+                    half(3.1f), half(3.2f), half(-3.3f), half(-4.1f),\n+                    half(-4.2f), half(4.3f),  //\n+                    half(5.1f), half(-5.2f), half(5.3f), half(6.1f),\n+                    half(-6.2f), half(6.3f)});\n   m.SetPositions<int32_t>({0, 1, 1, 0});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n \n   EXPECT_THAT(\n-      m.GetOutput<Eigen::half>(),\n-      Pointwise(FloatingPointEq(),\n-                {Eigen::half(-2.1), Eigen::half(2.2), Eigen::half(2.3),\n-                 Eigen::half(3.1), Eigen::half(3.2), Eigen::half(-3.3)}));\n+      m.GetOutput<half>(),\n+      Pointwise(FloatingPointEq(), {half(-2.1f), half(2.2f), half(2.3f),\n+                                    half(3.1f), half(3.2f), half(-3.3f)}));\n }\n \n TEST(GatherNdOpTest, Float32Int32) {\n@@ -297,21 +297,19 @@ TEST(GatherNdOpTest, BFloat16Int64) {\n TEST(GatherNdOpTest, Float16Int64) {\n   GatherNdOpModel m({TensorType_FLOAT16, {3, 2, 3}},\n                     {TensorType_INT64, {2, 2}});\n-  m.SetInput<Eigen::half>(\n-      {Eigen::half(1.1), Eigen::half(-1.2), Eigen::half(1.3), Eigen::half(-2.1),\n-       Eigen::half(2.2), Eigen::half(2.3),  //\n-       Eigen::half(3.1), Eigen::half(3.2), Eigen::half(-3.3), Eigen::half(-4.1),\n-       Eigen::half(-4.2), Eigen::half(4.3),  //\n-       Eigen::half(5.1), Eigen::half(-5.2), Eigen::half(5.3), Eigen::half(6.1),\n-       Eigen::half(-6.2), Eigen::half(6.3)});\n+  m.SetInput<half>({half(1.1f), half(-1.2f), half(1.3f), half(-2.1f),\n+                    half(2.2f), half(2.3f),  //\n+                    half(3.1f), half(3.2f), half(-3.3f), half(-4.1f),\n+                    half(-4.2f), half(4.3f),  //\n+                    half(5.1f), half(-5.2f), half(5.3f), half(6.1f),\n+                    half(-6.2f), half(6.3f)});\n   m.SetPositions<int64_t>({0LL, 1LL, 1LL, 0LL});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n \n   EXPECT_THAT(\n-      m.GetOutput<Eigen::half>(),\n-      Pointwise(FloatingPointEq(),\n-                {Eigen::half(-2.1), Eigen::half(2.2), Eigen::half(2.3),\n-                 Eigen::half(3.1), Eigen::half(3.2), Eigen::half(-3.3)}));\n+      m.GetOutput<half>(),\n+      Pointwise(FloatingPointEq(), {half(-2.1f), half(2.2f), half(2.3f),\n+                                    half(3.1f), half(3.2f), half(-3.3f)}));\n }\n \n TEST(GatherNdOpTest, Float32Int64) {\n@@ -462,21 +460,19 @@ TEST(GatherNdOpTest, BFloat16Int16) {\n TEST(GatherNdOpTest, Float16Int16) {\n   GatherNdOpModel m({TensorType_FLOAT16, {3, 2, 3}},\n                     {TensorType_INT16, {2, 2}});\n-  m.SetInput<Eigen::half>(\n-      {Eigen::half(1.1), Eigen::half(-1.2), Eigen::half(1.3), Eigen::half(-2.1),\n-       Eigen::half(2.2), Eigen::half(2.3),  //\n-       Eigen::half(3.1), Eigen::half(3.2), Eigen::half(-3.3), Eigen::half(-4.1),\n-       Eigen::half(-4.2), Eigen::half(4.3),  //\n-       Eigen::half(5.1), Eigen::half(-5.2), Eigen::half(5.3), Eigen::half(6.1),\n-       Eigen::half(-6.2), Eigen::half(6.3)});\n+  m.SetInput<half>({half(1.1f), half(-1.2f), half(1.3f), half(-2.1f),\n+                    half(2.2f), half(2.3f),  //\n+                    half(3.1f), half(3.2f), half(-3.3f), half(-4.1f),\n+                    half(-4.2f), half(4.3f),  //\n+                    half(5.1f), half(-5.2f), half(5.3f), half(6.1f),\n+                    half(-6.2f), half(6.3f)});\n   m.SetPositions<int16_t>({0, 1, 1, 0});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n \n   EXPECT_THAT(\n-      m.GetOutput<Eigen::half>(),\n-      Pointwise(FloatingPointEq(),\n-                {Eigen::half(-2.1), Eigen::half(2.2), Eigen::half(2.3),\n-                 Eigen::half(3.1), Eigen::half(3.2), Eigen::half(-3.3)}));\n+      m.GetOutput<half>(),\n+      Pointwise(FloatingPointEq(), {half(-2.1f), half(2.2f), half(2.3f),\n+                                    half(3.1f), half(3.2f), half(-3.3f)}));\n }\n \n TEST(GatherNdOpTest, Float32Int16) {"
        },
        {
            "sha": "61ca1b654f6160d680cefaf145534ddb0806583b",
            "filename": "tensorflow/lite/kernels/gather_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fgather_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fgather_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fgather_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -20,9 +20,11 @@ limitations under the License.\n #include <vector>\n \n #include <gtest/gtest.h>\n+#include \"Eigen/Core\"  // from @eigen_archive\n #include \"tensorflow/lite/kernels/internal/portable_tensor_utils.h\"\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -252,7 +254,7 @@ TEST_P(GatherOpTest, LastAxis0DIndex) {\n }\n \n using TestTypes = testing::Types<int8_t, uint8_t, int16_t, int32_t, int64_t,\n-                                 float, Eigen::half, Eigen::bfloat16>;\n+                                 float, half, Eigen::bfloat16>;\n \n template <typename T>\n struct TypedGatherOpTest : public testing::Test {};"
        },
        {
            "sha": "00e25ee9b865007eee16480d34748ee346a7ce6f",
            "filename": "tensorflow/lite/kernels/maximum_minimum_test.cc",
            "status": "modified",
            "additions": 45,
            "deletions": 51,
            "changes": 96,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fmaximum_minimum_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fmaximum_minimum_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fmaximum_minimum_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -23,6 +23,7 @@ limitations under the License.\n #include <gtest/gtest.h>\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -247,24 +248,20 @@ TEST(MaximumOpTest, Int32WithBroadcastTest5D) {\n }\n \n TEST(MaximumOpTest, Float16Test) {\n-  std::initializer_list<Eigen::half> data1 = {\n-      Eigen::half(1.0),  Eigen::half(0.0),  Eigen::half(-1.0),\n-      Eigen::half(11.0), Eigen::half(-2.0), Eigen::half(-1.44)};\n-  std::initializer_list<Eigen::half> data2 = {\n-      Eigen::half(-1.0), Eigen::half(0.0),  Eigen::half(1.0),\n-      Eigen::half(12.0), Eigen::half(-3.0), Eigen::half(-1.43)};\n-  TestModel<Eigen::half>(\n-      BuiltinOperator_MAXIMUM, {TensorType_FLOAT16, {3, 1, 2}},\n-      {TensorType_FLOAT16, {3, 1, 2}}, {TensorType_FLOAT16, {3, 1, 2}}, data1,\n-      data2,\n-      {Eigen::half(1.0), Eigen::half(0.0), Eigen::half(1.0), Eigen::half(12.0),\n-       Eigen::half(-2.0), Eigen::half(-1.43)});\n-  TestModel<Eigen::half>(\n-      BuiltinOperator_MINIMUM, {TensorType_FLOAT16, {3, 1, 2}},\n-      {TensorType_FLOAT16, {3, 1, 2}}, {TensorType_FLOAT16, {3, 1, 2}}, data1,\n-      data2,\n-      {Eigen::half(-1.0), Eigen::half(0.0), Eigen::half(-1.0),\n-       Eigen::half(11.0), Eigen::half(-3.0), Eigen::half(-1.44)});\n+  std::initializer_list<half> data1 = {half(1.0f),  half(0.0f),  half(-1.0f),\n+                                       half(11.0f), half(-2.0f), half(-1.44f)};\n+  std::initializer_list<half> data2 = {half(-1.0f), half(0.0f),  half(1.0f),\n+                                       half(12.0f), half(-3.0f), half(-1.43f)};\n+  TestModel<half>(BuiltinOperator_MAXIMUM, {TensorType_FLOAT16, {3, 1, 2}},\n+                  {TensorType_FLOAT16, {3, 1, 2}},\n+                  {TensorType_FLOAT16, {3, 1, 2}}, data1, data2,\n+                  {half(1.0f), half(0.0f), half(1.0f), half(12.0f), half(-2.0f),\n+                   half(-1.43f)});\n+  TestModel<half>(BuiltinOperator_MINIMUM, {TensorType_FLOAT16, {3, 1, 2}},\n+                  {TensorType_FLOAT16, {3, 1, 2}},\n+                  {TensorType_FLOAT16, {3, 1, 2}}, data1, data2,\n+                  {half(-1.0f), half(0.0f), half(-1.0f), half(11.0f),\n+                   half(-3.0f), half(-1.44f)});\n }\n \n TEST(MaximumOpTest, BFloat16Test) {\n@@ -308,42 +305,39 @@ TEST(MaximumOpTest, BFloat16WithBroadcastTest5DScalarY) {\n }\n \n TEST(MaximumOpTest, Float16WithBroadcastTest5DScalarY) {\n-  std::initializer_list<Eigen::half> data1 = {\n-      Eigen::half(1.0),  Eigen::half(0.0), Eigen::half(-1.0),\n-      Eigen::half(-2.0), Eigen::half(3.0), Eigen::half(11.0)};\n-  std::initializer_list<Eigen::half> data2 = {Eigen::half(2.0)};\n-  TestModel<Eigen::half>(\n-      BuiltinOperator_MAXIMUM, {TensorType_FLOAT16, {3, 1, 2, 1, 1}},\n-      {TensorType_FLOAT16, {1}}, {TensorType_FLOAT16, {3, 1, 2, 1, 1}}, data1,\n-      data2,\n-      {Eigen::half(2.0), Eigen::half(2.0), Eigen::half(2.0), Eigen::half(2.0),\n-       Eigen::half(3.0), Eigen::half(11.0)});\n-  TestModel<Eigen::half>(\n-      BuiltinOperator_MINIMUM, {TensorType_FLOAT16, {3, 1, 2, 1, 1}},\n-      {TensorType_FLOAT16, {1}}, {TensorType_FLOAT16, {3, 1, 2, 1, 1}}, data1,\n-      data2,\n-      {Eigen::half(1.0), Eigen::half(0.0), Eigen::half(-1.0), Eigen::half(-2.0),\n-       Eigen::half(2.0), Eigen::half(2.0)});\n+  std::initializer_list<half> data1 = {half(1.0f),  half(0.0f), half(-1.0f),\n+                                       half(-2.0f), half(3.0f), half(11.0f)};\n+  std::initializer_list<half> data2 = {half(2.0f)};\n+  TestModel<half>(BuiltinOperator_MAXIMUM,\n+                  {TensorType_FLOAT16, {3, 1, 2, 1, 1}},\n+                  {TensorType_FLOAT16, {1}},\n+                  {TensorType_FLOAT16, {3, 1, 2, 1, 1}}, data1, data2,\n+                  {half(2.0f), half(2.0f), half(2.0f), half(2.0f), half(3.0f),\n+                   half(11.0f)});\n+  TestModel<half>(BuiltinOperator_MINIMUM,\n+                  {TensorType_FLOAT16, {3, 1, 2, 1, 1}},\n+                  {TensorType_FLOAT16, {1}},\n+                  {TensorType_FLOAT16, {3, 1, 2, 1, 1}}, data1, data2,\n+                  {half(1.0f), half(0.0f), half(-1.0f), half(-2.0f), half(2.0f),\n+                   half(2.0f)});\n }\n \n TEST(MaximumOpTest, Float16WithBroadcastTest5D) {\n-  std::initializer_list<Eigen::half> data1 = {\n-      Eigen::half(1.0),  Eigen::half(0.0),   Eigen::half(-1.0),\n-      Eigen::half(-2.0), Eigen::half(-1.44), Eigen::half(11.0)};\n-  std::initializer_list<Eigen::half> data2 = {Eigen::half(0.5),\n-                                              Eigen::half(2.0)};\n-  TestModel<Eigen::half>(\n-      BuiltinOperator_MAXIMUM, {TensorType_FLOAT16, {3, 1, 1, 1, 2}},\n-      {TensorType_FLOAT16, {2}}, {TensorType_FLOAT16, {3, 1, 1, 1, 2}}, data1,\n-      data2,\n-      {Eigen::half(1.0), Eigen::half(2.0), Eigen::half(0.5), Eigen::half(2.0),\n-       Eigen::half(0.5), Eigen::half(11.0)});\n-  TestModel<Eigen::half>(\n-      BuiltinOperator_MINIMUM, {TensorType_FLOAT16, {3, 1, 1, 1, 2}},\n-      {TensorType_FLOAT16, {2}}, {TensorType_FLOAT16, {3, 1, 1, 1, 2}}, data1,\n-      data2,\n-      {Eigen::half(0.5), Eigen::half(0.0), Eigen::half(-1.0), Eigen::half(-2.0),\n-       Eigen::half(-1.44), Eigen::half(2.0)});\n+  std::initializer_list<half> data1 = {half(1.0f),  half(0.0f),   half(-1.0f),\n+                                       half(-2.0f), half(-1.44f), half(11.0f)};\n+  std::initializer_list<half> data2 = {half(0.5f), half(2.0f)};\n+  TestModel<half>(BuiltinOperator_MAXIMUM,\n+                  {TensorType_FLOAT16, {3, 1, 1, 1, 2}},\n+                  {TensorType_FLOAT16, {2}},\n+                  {TensorType_FLOAT16, {3, 1, 1, 1, 2}}, data1, data2,\n+                  {half(1.0f), half(2.0f), half(0.5f), half(2.0f), half(0.5f),\n+                   half(11.0f)});\n+  TestModel<half>(BuiltinOperator_MINIMUM,\n+                  {TensorType_FLOAT16, {3, 1, 1, 1, 2}},\n+                  {TensorType_FLOAT16, {2}},\n+                  {TensorType_FLOAT16, {3, 1, 1, 1, 2}}, data1, data2,\n+                  {half(0.5f), half(0.0f), half(-1.0f), half(-2.0f),\n+                   half(-1.44f), half(2.0f)});\n }\n \n TEST(MaximumOpTest, BFloat16WithBroadcastTest5D) {"
        },
        {
            "sha": "883f9182758412d41455634297af9d29212268cf",
            "filename": "tensorflow/lite/kernels/neg_test.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fneg_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fneg_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fneg_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -22,6 +22,7 @@ limitations under the License.\n #include \"flatbuffers/flatbuffers.h\"  // from @flatbuffers\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -67,14 +68,12 @@ TEST(NegOpModel, NegFloat32) {\n \n TEST(NegOpModel, NegFloat16) {\n   NegOpModel m({TensorType_FLOAT16, {6}}, {TensorType_FLOAT16, {6}});\n-  m.SetInput<Eigen::half>({Eigen::half(-2.0f), Eigen::half(-1.0f),\n-                           Eigen::half(0.f), Eigen::half(1.0f),\n-                           Eigen::half(2.0f), Eigen::half(3.0f)});\n+  m.SetInput<half>({half(-2.0f), half(-1.0f), half(0.f), half(1.0f), half(2.0f),\n+                    half(3.0f)});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(m.GetOutput<Eigen::half>(),\n-              ElementsAreArray({Eigen::half(2.0f), Eigen::half(1.0f),\n-                                Eigen::half(0.f), Eigen::half(-1.0f),\n-                                Eigen::half(-2.0f), Eigen::half(-3.0f)}));\n+  EXPECT_THAT(m.GetOutput<half>(),\n+              ElementsAreArray({half(2.0f), half(1.0f), half(0.f), half(-1.0f),\n+                                half(-2.0f), half(-3.0f)}));\n }\n \n TEST(NegOpModel, NegBfloat16) {"
        },
        {
            "sha": "b985abccddcee759b914d0b1463cef92428b1a4a",
            "filename": "tensorflow/lite/kernels/pad_test.cc",
            "status": "modified",
            "additions": 25,
            "deletions": 21,
            "changes": 46,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fpad_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fpad_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fpad_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -22,6 +22,7 @@ limitations under the License.\n #include \"tensorflow/lite/core/interpreter.h\"\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -927,19 +928,16 @@ TEST_F(PadV2OpTest, Int16PaddingSimpleConstFloat32ValuedTestInt8) {\n \n template <typename padding_integer_type>\n void SimpleConstFloat16ValuedTest() {\n-  PadV2OpConstModel<Eigen::half, padding_integer_type> m(\n+  PadV2OpConstModel<half, padding_integer_type> m(\n       {TensorType_FLOAT16, {1, 2, 2, 1}}, {4, 2}, {0, 0, 1, 1, 1, 1, 0, 0},\n-      Eigen::half{4.0f}, {TensorType_FLOAT16});\n-  m.SetInput({Eigen::half{1.5f}, Eigen::half{2.5f}, Eigen::half{3.5f},\n-              Eigen::half{4.5}});\n+      half{4.0f}, {TensorType_FLOAT16});\n+  m.SetInput({half{1.5f}, half{2.5f}, half{3.5f}, half{4.5f}});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(\n-      m.GetOutput(),\n-      ElementsAreArray(ArrayFloatNear(\n-          {Eigen::half{4}, Eigen::half{4}, Eigen::half{4}, Eigen::half{4},\n-           Eigen::half{4}, Eigen::half{1.5}, Eigen::half{2.5}, Eigen::half{4},\n-           Eigen::half{4}, Eigen::half{3.5}, Eigen::half{4.5}, Eigen::half{4},\n-           Eigen::half{4}, Eigen::half{4}, Eigen::half{4}, Eigen::half{4}})));\n+  EXPECT_THAT(m.GetOutput(),\n+              ElementsAreArray(ArrayFloatNear(\n+                  {half{4}, half{4}, half{4}, half{4}, half{4}, half{1.5f},\n+                   half{2.5f}, half{4}, half{4}, half{3.5f}, half{4.5f},\n+                   half{4}, half{4}, half{4}, half{4}, half{4}})));\n   EXPECT_THAT(m.GetOutputShape(), ElementsAreArray({1, 4, 4, 1}));\n }\n \n@@ -1050,12 +1048,15 @@ TEST_F(PadV2OpTest, Int16PaddingSimple4DConstFloat32ValuedTest) {\n \n template <typename padding_integer_type>\n void Simple4DConstFloat16ValuedTest() {\n-  PadV2OpConstModel<Eigen::half, padding_integer_type> m(\n+  PadV2OpConstModel<half, padding_integer_type> m(\n       {TensorType_FLOAT16, {1, 1, 2, 1}}, {4, 2}, {0, 1, 0, 0, 0, 0, 0, 1},\n-      Eigen::half{7.0}, {TensorType_FLOAT16});\n-  m.SetInput({Eigen::half{3.0f}, Eigen::half{6.0f}});\n+      half{7.0f}, {TensorType_FLOAT16});\n+  m.SetInput({half{3.0f}, half{6.0f}});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(m.GetOutput(), ElementsAreArray({3, 7, 6, 7, 7, 7, 7, 7}));\n+  EXPECT_THAT(m.GetOutput(),\n+              ElementsAreArray(ArrayFloatNear(\n+                  {half{3.0f}, half{7.0f}, half{6.0f}, half{7.0f}, half{7.0f},\n+                   half{7.0f}, half{7.0f}, half{7.0f}})));\n   EXPECT_THAT(m.GetOutputShape(), ElementsAreArray({2, 1, 2, 2}));\n }\n \n@@ -1167,15 +1168,18 @@ TEST_F(PadV2OpTest, Int16PaddingSimpleDynamicTest) {\n \n template <typename padding_integer_type>\n void SimpleDynamicTestV2Float16() {\n-  PadV2OpDynamicModel<Eigen::half, padding_integer_type> m(\n-      {TensorType_FLOAT16, {1, 2, 2, 1}}, {4, 2}, Eigen::half{0.0},\n+  PadV2OpDynamicModel<half, padding_integer_type> m(\n+      {TensorType_FLOAT16, {1, 2, 2, 1}}, {4, 2}, half{0.0f},\n       {TensorType_FLOAT16});\n-  m.SetInput({Eigen::half{1.0f}, Eigen::half{2.0f}, Eigen::half{3.0f},\n-              Eigen::half{4.0f}});\n+  m.SetInput({half{1.0f}, half{2.0f}, half{3.0f}, half{4.0f}});\n   m.SetPaddings({0, 0, 1, 1, 1, 1, 0, 0});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(m.GetOutput(), ElementsAreArray({0, 0, 0, 0, 0, 1, 2, 0, 0, 3, 4,\n-                                               0, 0, 0, 0, 0}));\n+  EXPECT_THAT(m.GetOutput(),\n+              ElementsAreArray(ArrayFloatNear(\n+                  {half{0.0f}, half{0.0f}, half{0.0f}, half{0.0f}, half{0.0f},\n+                   half{1.0f}, half{2.0f}, half{0.0f}, half{0.0f}, half{3.0f},\n+                   half{4.0f}, half{0.0f}, half{0.0f}, half{0.0f}, half{0.0f},\n+                   half{0.0f}})));\n   EXPECT_THAT(m.GetOutputShape(), ElementsAreArray({1, 4, 4, 1}));\n }\n "
        },
        {
            "sha": "7e2d3df543ba28602bfe5b6c3428fd0b0f0ed22c",
            "filename": "tensorflow/lite/kernels/reverse_test.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 24,
            "changes": 42,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Freverse_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Freverse_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Freverse_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <gtest/gtest.h>\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -354,45 +355,38 @@ TEST(ReverseOpTest, Int16MultiDimensions) {\n \n // float16 tests.\n TEST(ReverseOpTest, Float16OneDimension) {\n-  ReverseOpModel<Eigen::half> model({TensorType_FLOAT16, {4}},\n-                                    {TensorType_INT32, {1}});\n-  model.PopulateTensor<Eigen::half>(\n-      model.input(),\n-      {Eigen::half(1), Eigen::half(2), Eigen::half(3), Eigen::half(4)});\n+  ReverseOpModel<half> model({TensorType_FLOAT16, {4}},\n+                             {TensorType_INT32, {1}});\n+  model.PopulateTensor<half>(model.input(),\n+                             {half(1), half(2), half(3), half(4)});\n   model.PopulateTensor<int32_t>(model.axis(), {0});\n   ASSERT_EQ(model.Invoke(), kTfLiteOk);\n \n   EXPECT_THAT(model.GetOutputShape(), ElementsAre(4));\n   EXPECT_THAT(model.GetOutput(),\n-              ElementsAreArray({Eigen::half(4), Eigen::half(3), Eigen::half(2),\n-                                Eigen::half(1)}));\n+              ElementsAreArray({half(4), half(3), half(2), half(1)}));\n }\n \n TEST(ReverseOpTest, Float16MultiDimensions) {\n-  ReverseOpModel<Eigen::half> model({TensorType_FLOAT16, {4, 3, 2}},\n-                                    {TensorType_INT32, {1}});\n-  model.PopulateTensor<Eigen::half>(\n+  ReverseOpModel<half> model({TensorType_FLOAT16, {4, 3, 2}},\n+                             {TensorType_INT32, {1}});\n+  model.PopulateTensor<half>(\n       model.input(),\n-      {Eigen::half(1),  Eigen::half(2),  Eigen::half(3),  Eigen::half(4),\n-       Eigen::half(5),  Eigen::half(6),  Eigen::half(7),  Eigen::half(8),\n-       Eigen::half(9),  Eigen::half(10), Eigen::half(11), Eigen::half(12),\n-       Eigen::half(13), Eigen::half(14), Eigen::half(15), Eigen::half(16),\n-       Eigen::half(17), Eigen::half(18), Eigen::half(19), Eigen::half(20),\n-       Eigen::half(21), Eigen::half(22), Eigen::half(23), Eigen::half(24)});\n+      {half(1),  half(2),  half(3),  half(4),  half(5),  half(6),\n+       half(7),  half(8),  half(9),  half(10), half(11), half(12),\n+       half(13), half(14), half(15), half(16), half(17), half(18),\n+       half(19), half(20), half(21), half(22), half(23), half(24)});\n   model.PopulateTensor<int32_t>(model.axis(), {1});\n   ASSERT_EQ(model.Invoke(), kTfLiteOk);\n \n   EXPECT_THAT(model.GetOutputShape(), ElementsAre(4, 3, 2));\n   EXPECT_THAT(\n       model.GetOutput(),\n-      ElementsAreArray({Eigen::half(5),  Eigen::half(6),  Eigen::half(3),\n-                        Eigen::half(4),  Eigen::half(1),  Eigen::half(2),\n-                        Eigen::half(11), Eigen::half(12), Eigen::half(9),\n-                        Eigen::half(10), Eigen::half(7),  Eigen::half(8),\n-                        Eigen::half(17), Eigen::half(18), Eigen::half(15),\n-                        Eigen::half(16), Eigen::half(13), Eigen::half(14),\n-                        Eigen::half(23), Eigen::half(24), Eigen::half(21),\n-                        Eigen::half(22), Eigen::half(19), Eigen::half(20)}));\n+      ElementsAreArray({half(5),  half(6),  half(3),  half(4),  half(1),\n+                        half(2),  half(11), half(12), half(9),  half(10),\n+                        half(7),  half(8),  half(17), half(18), half(15),\n+                        half(16), half(13), half(14), half(23), half(24),\n+                        half(21), half(22), half(19), half(20)}));\n }\n \n // bfloat16 tests."
        },
        {
            "sha": "e3fccf888c981578458c236f1828e5a7d1ea2011",
            "filename": "tensorflow/lite/kernels/round_test.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 20,
            "changes": 37,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fround_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fround_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fround_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <gtest/gtest.h>\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -68,33 +69,29 @@ TEST(RoundOpTest, MultiDims) {\n }\n \n TEST(RoundOpTest, Float16SingleDim) {\n-  RoundOpModel<Eigen::half> model({6});\n-  model.PopulateTensor<Eigen::half>(\n-      model.input(), {Eigen::half(8.5), Eigen::half(0.0), Eigen::half(3.5),\n-                      Eigen::half(4.2), Eigen::half(-3.5), Eigen::half(-4.5)});\n+  RoundOpModel<half> model({6});\n+  model.PopulateTensor<half>(model.input(),\n+                             {half(8.5f), half(0.0f), half(3.5f), half(4.2f),\n+                              half(-3.5f), half(-4.5f)});\n   ASSERT_EQ(model.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(\n-      model.GetOutput(),\n-      ElementsAreArray({Eigen::half(8), Eigen::half(0), Eigen::half(4),\n-                        Eigen::half(4), Eigen::half(-4), Eigen::half(-4)}));\n+  EXPECT_THAT(model.GetOutput(),\n+              ElementsAreArray(\n+                  {half(8), half(0), half(4), half(4), half(-4), half(-4)}));\n   EXPECT_THAT(model.GetOutputShape(), ElementsAreArray({6}));\n }\n \n TEST(RoundOpTest, Float16MultiDims) {\n-  RoundOpModel<Eigen::half> model({2, 1, 1, 6});\n-  model.PopulateTensor<Eigen::half>(\n+  RoundOpModel<half> model({2, 1, 1, 6});\n+  model.PopulateTensor<half>(\n       model.input(),\n-      {Eigen::half(0.0001), Eigen::half(8.0001), Eigen::half(0.9999),\n-       Eigen::half(9.9999), Eigen::half(0.5), Eigen::half(-0.0001),\n-       Eigen::half(-8.0001), Eigen::half(-0.9999), Eigen::half(-9.9999),\n-       Eigen::half(-0.5), Eigen::half(-2.5), Eigen::half(1.5)});\n+      {half(0.0001f), half(8.0001f), half(0.9999f), half(9.9999f), half(0.5f),\n+       half(-0.0001f), half(-8.0001f), half(-0.9999f), half(-9.9999f),\n+       half(-0.5f), half(-2.5f), half(1.5f)});\n   ASSERT_EQ(model.Invoke(), kTfLiteOk);\n-  EXPECT_THAT(\n-      model.GetOutput(),\n-      ElementsAreArray({Eigen::half(0), Eigen::half(8), Eigen::half(1),\n-                        Eigen::half(10), Eigen::half(0), Eigen::half(0),\n-                        Eigen::half(-8), Eigen::half(-1), Eigen::half(-10),\n-                        Eigen::half(-0), Eigen::half(-2), Eigen::half(2)}));\n+  EXPECT_THAT(model.GetOutput(),\n+              ElementsAreArray({half(0), half(8), half(1), half(10), half(0),\n+                                half(0), half(-8), half(-1), half(-10),\n+                                half(-0), half(-2), half(2)}));\n   EXPECT_THAT(model.GetOutputShape(), ElementsAreArray({2, 1, 1, 6}));\n }\n "
        },
        {
            "sha": "2f3430770f7b6802d7d970a67f173297ba319925",
            "filename": "tensorflow/lite/kernels/slice_test.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 23,
            "changes": 39,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fslice_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fslice_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fslice_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -19,7 +19,6 @@ limitations under the License.\n #include <type_traits>\n #include <vector>\n \n-#include \"Eigen/Core\"\n #include <gmock/gmock.h>\n #include <gtest/gtest.h>\n #include \"tensorflow/lite/core/c/common.h\"\n@@ -29,6 +28,7 @@ limitations under the License.\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n #include \"tensorflow/lite/string_type.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -338,20 +338,16 @@ TEST_P(SliceOpTest, SliceBool) {\n }\n \n TEST_P(SliceOpTest, SliceFloat16) {\n-  SliceOpModel<Eigen::half, int32_t> m({3, 2, 3, 1}, {4}, {1, 0, 0, 0}, {4},\n-                                       {2, 1, -1, 1}, TensorType_INT32,\n-                                       TensorType_FLOAT16, GetParam());\n-  m.SetInput({Eigen::half(1), Eigen::half(1), Eigen::half(1), Eigen::half(2),\n-              Eigen::half(2), Eigen::half(2), Eigen::half(3), Eigen::half(3),\n-              Eigen::half(3), Eigen::half(4), Eigen::half(4), Eigen::half(4),\n-              Eigen::half(5), Eigen::half(5), Eigen::half(5), Eigen::half(6),\n-              Eigen::half(6), Eigen::half(6)});\n+  SliceOpModel<half, int32_t> m({3, 2, 3, 1}, {4}, {1, 0, 0, 0}, {4},\n+                                {2, 1, -1, 1}, TensorType_INT32,\n+                                TensorType_FLOAT16, GetParam());\n+  m.SetInput({half(1), half(1), half(1), half(2), half(2), half(2), half(3),\n+              half(3), half(3), half(4), half(4), half(4), half(5), half(5),\n+              half(5), half(6), half(6), half(6)});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(m.GetOutputShape(), ElementsAreArray({2, 1, 3, 1}));\n-  EXPECT_THAT(\n-      m.GetOutput(),\n-      ElementsAreArray({Eigen::half(3), Eigen::half(3), Eigen::half(3),\n-                        Eigen::half(5), Eigen::half(5), Eigen::half(5)}));\n+  EXPECT_THAT(m.GetOutput(), ElementsAreArray({half(3), half(3), half(3),\n+                                               half(5), half(5), half(5)}));\n }\n \n TEST_P(SliceOpTest, SliceBFloat16) {\n@@ -373,19 +369,16 @@ TEST_P(SliceOpTest, SliceBFloat16) {\n }\n \n TEST_P(SliceOpTest, BeginNonZeroSizeMinus1Axis1Float16) {\n-  SliceOpModel<Eigen::half, int32_t> m({3, 3, 2, 1}, {4}, {1, 1, 0, 0}, {4},\n-                                       {2, -1, 1, 1}, TensorType_INT32,\n-                                       TensorType_FLOAT16, GetParam());\n-  m.SetInput({Eigen::half(1), Eigen::half(1), Eigen::half(2), Eigen::half(2),\n-              Eigen::half(3), Eigen::half(3), Eigen::half(4), Eigen::half(4),\n-              Eigen::half(5), Eigen::half(5), Eigen::half(6), Eigen::half(6),\n-              Eigen::half(7), Eigen::half(7), Eigen::half(8), Eigen::half(8),\n-              Eigen::half(9), Eigen::half(9)});\n+  SliceOpModel<half, int32_t> m({3, 3, 2, 1}, {4}, {1, 1, 0, 0}, {4},\n+                                {2, -1, 1, 1}, TensorType_INT32,\n+                                TensorType_FLOAT16, GetParam());\n+  m.SetInput({half(1), half(1), half(2), half(2), half(3), half(3), half(4),\n+              half(4), half(5), half(5), half(6), half(6), half(7), half(7),\n+              half(8), half(8), half(9), half(9)});\n   ASSERT_EQ(m.Invoke(), kTfLiteOk);\n   EXPECT_THAT(m.GetOutputShape(), ElementsAreArray({2, 2, 1, 1}));\n   EXPECT_THAT(m.GetOutput(),\n-              ElementsAreArray({Eigen::half(5), Eigen::half(6), Eigen::half(8),\n-                                Eigen::half(9)}));\n+              ElementsAreArray({half(5), half(6), half(8), half(9)}));\n }\n \n TEST_P(SliceOpTest, BeginNonZeroSizeMinus1Axis1BFloat16) {"
        },
        {
            "sha": "f7c79680576fe1e1b076fc8944acf876ca3f7851",
            "filename": "tensorflow/lite/kernels/strided_slice_test.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fstrided_slice_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Fstrided_slice_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Fstrided_slice_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -22,8 +22,10 @@ limitations under the License.\n \n #include <gmock/gmock.h>\n #include <gtest/gtest.h>\n+#include \"Eigen/Core\"  // from @eigen_archive  // IWYU pragma: keep\n #include \"tensorflow/lite/kernels/test_util.h\"\n #include \"tensorflow/lite/schema/schema_generated.h\"\n+#include \"tensorflow/lite/types/half.h\"\n \n namespace tflite {\n namespace {\n@@ -152,7 +154,7 @@ class StridedSliceOpModel : public SingleOpModel {\n template <typename T>\n class StridedSliceOpTest : public ::testing::Test {};\n \n-using DataTypes = ::testing::Types<float, Eigen::half, Eigen::bfloat16, uint8_t,\n+using DataTypes = ::testing::Types<float, half, Eigen::bfloat16, uint8_t,\n                                    uint32_t, int8_t, int16_t, int32_t>;\n TYPED_TEST_SUITE(StridedSliceOpTest, DataTypes);\n \n@@ -347,7 +349,9 @@ TYPED_TEST(StridedSliceOpTest, In1D_Int32End) {\n       continue;\n     }\n     std::vector<TypeParam> values(32768);\n-    std::iota(values.begin(), values.end(), TypeParam(0));\n+    for (int i = 0; i < 32768; ++i) {\n+      values[i] = static_cast<TypeParam>(i);\n+    }\n \n     StridedSliceOpModel<TypeParam> m({32768}, {1}, {1}, {1}, values, {0},\n                                      {32768}, {1}, 0, 0, 0, 0, 0,"
        },
        {
            "sha": "1bd870d2c56c92305b08b8dfc38d42b698ee624a",
            "filename": "tensorflow/lite/kernels/test_util.h",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Ftest_util.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Ftest_util.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Ftest_util.h?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -38,7 +38,6 @@ limitations under the License.\n \n #include <gmock/gmock.h>\n #include <gtest/gtest.h>\n-#include \"fp16/fp16.h\"  // from @FP16\n #include \"absl/algorithm/container.h\"\n #include \"absl/log/absl_check.h\"\n #include \"absl/log/absl_log.h\"\n@@ -57,6 +56,7 @@ limitations under the License.\n #include \"tensorflow/lite/string_util.h\"\n #include \"tensorflow/lite/testing/util.h\"  // IWYU pragma: keep\n #include \"tensorflow/lite/tools/optimize/quantization_utils.h\"\n+#include \"tensorflow/lite/types/half.h\"\n #include \"tensorflow/lite/util.h\"\n #include \"tsl/platform/logging.h\"\n \n@@ -134,7 +134,7 @@ inline std::vector<float> Dequantize(const std::vector<T>& data, float scale,\n }\n \n template <>\n-constexpr TfLiteType typeToTfLiteType<Eigen::half>() {\n+constexpr TfLiteType typeToTfLiteType<half>() {\n   return kTfLiteFloat16;\n }\n \n@@ -1362,7 +1362,7 @@ TFLITE_TENSOR_TYPE_ASSOC(uint16_t, TensorType_UINT16);\n TFLITE_TENSOR_TYPE_ASSOC(uint32_t, TensorType_UINT32);\n TFLITE_TENSOR_TYPE_ASSOC(uint64_t, TensorType_UINT64);\n TFLITE_TENSOR_TYPE_ASSOC(TfLiteFloat16, TensorType_FLOAT16);\n-TFLITE_TENSOR_TYPE_ASSOC(Eigen::half, TensorType_FLOAT16);\n+TFLITE_TENSOR_TYPE_ASSOC(half, TensorType_FLOAT16);\n TFLITE_TENSOR_TYPE_ASSOC(TfLiteBFloat16, TensorType_BFLOAT16);\n TFLITE_TENSOR_TYPE_ASSOC(Eigen::bfloat16, TensorType_BFLOAT16);\n TFLITE_TENSOR_TYPE_ASSOC(float, TensorType_FLOAT32);\n@@ -1461,13 +1461,13 @@ struct TypeUnion<uint8_t> {\n };\n \n template <>\n-struct TypeUnion<Eigen::half> {\n+struct TypeUnion<half> {\n  public:\n   // NOLINTNEXTLINE\n   static constexpr TensorType tensor_type = TensorType::TensorType_FLOAT16;\n   // NOLINTNEXTLINE\n   static constexpr TfLiteType tflite_type = TfLiteType::kTfLiteFloat16;\n-  typedef Eigen::half ScalarType;\n+  typedef half ScalarType;\n };\n \n template <>"
        },
        {
            "sha": "01f514692b061604da38c6255ef12ef09dcfc6c6",
            "filename": "tensorflow/lite/kernels/test_util_test.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Ftest_util_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/45fb84067d13d40feee87d26bd6a4b086fa8b319/tensorflow%2Flite%2Fkernels%2Ftest_util_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Ftest_util_test.cc?ref=45fb84067d13d40feee87d26bd6a4b086fa8b319",
            "patch": "@@ -27,6 +27,7 @@ limitations under the License.\n #include \"tensorflow/lite/array.h\"\n #include \"tensorflow/lite/core/c/common.h\"\n #include \"tensorflow/lite/kernels/test_delegate_providers.h\"\n+#include \"tensorflow/lite/types/half.h\"\n #include \"tensorflow/lite/util.h\"\n \n namespace tflite {\n@@ -197,6 +198,14 @@ TEST(TestUtilTest, QuantizeVectorScalingUp) {\n   EXPECT_THAT(q_data, ElementsAreArray(expected));\n }\n \n+TEST(TestUtilTest, DequantizeVectorFp16) {\n+  std::vector<half> data = {half(-1.0f), half(-0.5f), half(0.0f), half(0.5f),\n+                            half(1.0f)};\n+  auto f_data = Dequantize<half>(data, /*scale=*/0.1f, /*zero_point=*/0);\n+  std::vector<float> expected = {-0.1f, -0.05f, 0.0f, 0.05f, 0.1f};\n+  EXPECT_THAT(f_data, ElementsAreArray(tflite::ArrayFloatNear(expected, 1e-7)));\n+}\n+\n TEST(DimsAreMatcherTestTensor, ValidOneD) {\n   TensorUniquePtr t = BuildTfLiteTensor(kTfLiteInt32, {2}, kTfLiteDynamic);\n   EXPECT_THAT(t.get(), DimsAre({2}));"
        }
    ],
    "stats": {
        "total": 595,
        "additions": 301,
        "deletions": 294
    }
}