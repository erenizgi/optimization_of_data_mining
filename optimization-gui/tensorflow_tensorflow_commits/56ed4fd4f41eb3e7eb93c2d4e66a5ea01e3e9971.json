{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 832648718",
    "sha": "56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
    "files": [
        {
            "sha": "be4f0ae71615a4db35b17a9acbfbdce7e78068fd",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/cell_reader-inl.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcell_reader-inl.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcell_reader-inl.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcell_reader-inl.cc?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -70,7 +70,7 @@ absl::StatusOr<std::vector<Point>> GetPoints(\n     return errors::NotFound(\"Metric descriptor is not found for metric \",\n                             metric_name, \".\");\n   }\n-  const std::vector<string>& label_names =\n+  const std::vector<std::string>& label_names =\n       metric_descriptor->second->label_names;\n   if (label_names.size() != labels.size()) {\n     return errors::InvalidArgument("
        },
        {
            "sha": "434fb7c057f8570445f6917f62e14edf85fe0902",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/collected_metrics.h",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollected_metrics.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollected_metrics.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollected_metrics.h?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -58,14 +58,14 @@ namespace monitoring {\n // monitorable entity is exporting it.\n struct MetricDescriptor {\n   // Metric names are path-like.  E.g., \"/mycomponent/mymetric\".\n-  string name;\n+  std::string name;\n \n   // A human-readable description of what this metric measures.\n-  string description;\n+  std::string description;\n \n   // Label names for the metric.\n   // See the example in the top level comment for MetricDescriptor.\n-  std::vector<string> label_names;\n+  std::vector<std::string> label_names;\n \n   MetricKind metric_kind;\n \n@@ -80,15 +80,15 @@ struct Point {\n   struct Label {\n     // The |name| field must match the |label_name| field in the\n     // MetricDescriptor for this Point.\n-    string name;\n-    string value;\n+    std::string name;\n+    std::string value;\n   };\n   std::vector<Label> labels;\n \n   // The actual metric value, dependent on the value_type enum.\n   ValueType value_type;\n   int64_t int64_value;\n-  string string_value;\n+  std::string string_value;\n   bool bool_value;\n   double double_value;\n   HistogramProto histogram_value;\n@@ -131,14 +131,14 @@ struct Point {\n   // made.\n   //\n   // start_timestamp must not be younger than end_timestamp.\n-  uint64 start_timestamp_millis;\n-  uint64 end_timestamp_millis;\n+  uint64_t start_timestamp_millis;\n+  uint64_t end_timestamp_millis;\n };\n \n // A set of points belonging to a metric.\n struct PointSet {\n   // This must match a name defined by a MetricDescriptor message.\n-  string metric_name;\n+  std::string metric_name;\n \n   // No two Points in the same PointSet should have the same set of labels.\n   std::vector<std::unique_ptr<Point>> points;\n@@ -147,8 +147,9 @@ struct PointSet {\n // Standard format in which the metrics are collected, before being exported.\n struct CollectedMetrics {\n   // The keys are the metric-names.\n-  std::map<string, std::unique_ptr<MetricDescriptor>> metric_descriptor_map;\n-  std::map<string, std::unique_ptr<PointSet>> point_set_map;\n+  std::map<std::string, std::unique_ptr<MetricDescriptor>>\n+      metric_descriptor_map;\n+  std::map<std::string, std::unique_ptr<PointSet>> point_set_map;\n };\n \n }  // namespace monitoring"
        },
        {
            "sha": "1feb39c9f363476f05fe28bf6889db4f7e5f32a2",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/collection_registry.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.cc?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -49,12 +49,12 @@ void Collector::CollectMetricDescriptor(\n     absl::MutexLock l(mu_);\n     return collected_metrics_->metric_descriptor_map\n         .insert(std::make_pair(\n-            string(metric_def->name()),\n+            std::string(metric_def->name()),\n             std::unique_ptr<MetricDescriptor>(new MetricDescriptor())))\n         .first->second.get();\n   }();\n-  metric_descriptor->name = string(metric_def->name());\n-  metric_descriptor->description = string(metric_def->description());\n+  metric_descriptor->name = std::string(metric_def->name());\n+  metric_descriptor->description = std::string(metric_def->description());\n \n   for (const absl::string_view label_name : metric_def->label_descriptions()) {\n     metric_descriptor->label_names.emplace_back(label_name);"
        },
        {
            "sha": "871a66f99b0976101589c1a3b350293dd26b1664",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/collection_registry.h",
            "status": "modified",
            "additions": 15,
            "deletions": 15,
            "changes": 30,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.h?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -152,7 +152,7 @@ class MetricCollector {\n \n   MetricCollector(\n       const MetricDef<metric_kind, Value, NumLabels>* const metric_def,\n-      const uint64 registration_time_millis,\n+      const uint64_t registration_time_millis,\n       internal::Collector* const collector, PointSet* const point_set)\n       : metric_def_(metric_def),\n         registration_time_millis_(registration_time_millis),\n@@ -162,7 +162,7 @@ class MetricCollector {\n   }\n \n   const MetricDef<metric_kind, Value, NumLabels>* const metric_def_;\n-  const uint64 registration_time_millis_;\n+  const uint64_t registration_time_millis_;\n   internal::Collector* const collector_;\n   PointSet* const point_set_;\n \n@@ -191,14 +191,14 @@ class MetricCollectorGetter {\n \n   MetricCollectorGetter(internal::Collector* const collector,\n                         const AbstractMetricDef* const allowed_metric_def,\n-                        const uint64 registration_time_millis)\n+                        const uint64_t registration_time_millis)\n       : collector_(collector),\n         allowed_metric_def_(allowed_metric_def),\n         registration_time_millis_(registration_time_millis) {}\n \n   internal::Collector* const collector_;\n   const AbstractMetricDef* const allowed_metric_def_;\n-  const uint64 registration_time_millis_;\n+  const uint64_t registration_time_millis_;\n };\n \n // A collection registry for metrics.\n@@ -270,7 +270,7 @@ class CollectionRegistry {\n   struct CollectionInfo {\n     const AbstractMetricDef* const metric_def;\n     CollectionFunction collection_function;\n-    uint64 registration_time_millis;\n+    uint64_t registration_time_millis;\n   };\n   std::map<absl::string_view, CollectionInfo> registry_ TF_GUARDED_BY(mu_);\n \n@@ -375,14 +375,14 @@ inline void CollectValue(std::function<double()> value_fn, Point* const point) {\n // This class is thread-safe.\n class Collector {\n  public:\n-  explicit Collector(const uint64 collection_time_millis)\n+  explicit Collector(const uint64_t collection_time_millis)\n       : collected_metrics_(new CollectedMetrics()),\n         collection_time_millis_(collection_time_millis) {}\n \n   template <MetricKind metric_kind, typename Value, int NumLabels>\n   MetricCollector<metric_kind, Value, NumLabels> GetMetricCollector(\n       const MetricDef<metric_kind, Value, NumLabels>* const metric_def,\n-      const uint64 registration_time_millis,\n+      const uint64_t registration_time_millis,\n       internal::Collector* const collector) TF_LOCKS_EXCLUDED(mu_) {\n     auto* const point_set = [&]() {\n       absl::MutexLock l(mu_);\n@@ -395,7 +395,7 @@ class Collector {\n         metric_def, registration_time_millis, collector, point_set);\n   }\n \n-  uint64 collection_time_millis() const { return collection_time_millis_; }\n+  uint64_t collection_time_millis() const { return collection_time_millis_; }\n \n   void CollectMetricDescriptor(const AbstractMetricDef* const metric_def)\n       TF_LOCKS_EXCLUDED(mu_);\n@@ -409,7 +409,7 @@ class Collector {\n  private:\n   mutable absl::Mutex mu_;\n   std::unique_ptr<CollectedMetrics> collected_metrics_ TF_GUARDED_BY(mu_);\n-  const uint64 collection_time_millis_;\n+  const uint64_t collection_time_millis_;\n \n   Collector(const Collector&) = delete;\n   void operator=(const Collector&) = delete;\n@@ -423,21 +423,21 @@ class Collector {\n // collection function was registered, while the end timestamp will be set to\n // the collection time.\n template <MetricKind kind>\n-void WriteTimestamps(const uint64 registration_time_millis,\n-                     const uint64 collection_time_millis, Point* const point);\n+void WriteTimestamps(const uint64_t registration_time_millis,\n+                     const uint64_t collection_time_millis, Point* const point);\n \n template <>\n inline void WriteTimestamps<MetricKind::kGauge>(\n-    const uint64 registration_time_millis, const uint64 collection_time_millis,\n-    Point* const point) {\n+    const uint64_t registration_time_millis,\n+    const uint64_t collection_time_millis, Point* const point) {\n   point->start_timestamp_millis = collection_time_millis;\n   point->end_timestamp_millis = collection_time_millis;\n }\n \n template <>\n inline void WriteTimestamps<MetricKind::kCumulative>(\n-    const uint64 registration_time_millis, const uint64 collection_time_millis,\n-    Point* const point) {\n+    const uint64_t registration_time_millis,\n+    const uint64_t collection_time_millis, Point* const point) {\n   point->start_timestamp_millis = registration_time_millis;\n   // There's a chance that the clock goes backwards on the same machine, so we\n   // protect ourselves against that."
        },
        {
            "sha": "38dec95cc3fa04579b0d4e9b5b4e7a39343f4119",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/counter.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcounter.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcounter.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcounter.h?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -187,7 +187,7 @@ class Counter {\n \n   absl::Status status_;\n \n-  using LabelArray = std::array<string, NumLabels>;\n+  using LabelArray = std::array<std::string, NumLabels>;\n   std::map<LabelArray, CounterCell> cells_ TF_GUARDED_BY(mu_);\n \n   // The metric definition. This will be used to identify the metric when we"
        },
        {
            "sha": "966f7da14c22b642f58d93b0cb283cf2850dd4ce",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/gauge.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fgauge.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fgauge.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fgauge.h?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -253,7 +253,7 @@ class Gauge {\n \n   absl::Status status_;\n \n-  using LabelArray = std::array<string, NumLabels>;\n+  using LabelArray = std::array<std::string, NumLabels>;\n   std::map<LabelArray, GaugeCell<ValueType> > cells_ TF_GUARDED_BY(mu_);\n \n   // The metric definition. This will be used to identify the metric when we"
        },
        {
            "sha": "4a5301b6baf6979abd45b63236e24e326d6b00f3",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/metric_def.h",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fmetric_def.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fmetric_def.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fmetric_def.h?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -127,7 +127,7 @@ class AbstractMetricDef {\n \n   absl::string_view description() const { return description_; }\n \n-  const std::vector<string>& label_descriptions() const {\n+  const std::vector<std::string>& label_descriptions() const {\n     return label_descriptions_;\n   }\n \n@@ -138,19 +138,19 @@ class AbstractMetricDef {\n   AbstractMetricDef(const MetricKind kind, const ValueType value_type,\n                     const absl::string_view name,\n                     const absl::string_view description,\n-                    const std::vector<string>& label_descriptions)\n+                    const std::vector<std::string>& label_descriptions)\n       : kind_(kind),\n         value_type_(value_type),\n         name_(name),\n         description_(description),\n-        label_descriptions_(std::vector<string>(label_descriptions.begin(),\n-                                                label_descriptions.end())) {}\n+        label_descriptions_(std::vector<std::string>(\n+            label_descriptions.begin(), label_descriptions.end())) {}\n \n   const MetricKind kind_;\n   const ValueType value_type_;\n-  const string name_;\n-  const string description_;\n-  const std::vector<string> label_descriptions_;\n+  const std::string name_;\n+  const std::string description_;\n+  const std::vector<std::string> label_descriptions_;\n };\n \n // Metric definition."
        },
        {
            "sha": "87d94d3fe47d5b914dc9c44aacea094dd17d2e56",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/percentile_sampler.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.cc?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -35,7 +35,7 @@ namespace tsl {\n namespace monitoring {\n \n void PercentileSamplerCell::Add(double sample) {\n-  uint64 nstime = EnvTime::NowNanos();\n+  uint64_t nstime = EnvTime::NowNanos();\n   absl::MutexLock l(mu_);\n   samples_[next_position_] = {nstime, sample};\n   ++next_position_;"
        },
        {
            "sha": "be24fc564e9f6345a4dc9547c0deb56a0dc2f076",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/percentile_sampler.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.h?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -121,7 +121,7 @@ class PercentileSamplerCell {\n   struct Sample {\n     bool operator<(const Sample& rhs) const { return value < rhs.value; }\n \n-    uint64 nstime = 0;\n+    uint64_t nstime = 0;\n     double value = NAN;\n   };\n \n@@ -227,7 +227,7 @@ class PercentileSampler {\n \n   absl::Status status_;\n \n-  using LabelArray = std::array<string, NumLabels>;\n+  using LabelArray = std::array<std::string, NumLabels>;\n   // we need a container here that guarantees pointer stability of the value,\n   // namely, the pointer of the value should remain valid even after more cells\n   // are inserted."
        },
        {
            "sha": "1a3b25fc1f01d3a619a222f1901d0e6169adab74",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/sampler.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fsampler.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fsampler.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fsampler.h?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -264,7 +264,7 @@ class Sampler {\n \n   absl::Status status_;\n \n-  using LabelArray = std::array<string, NumLabels>;\n+  using LabelArray = std::array<std::string, NumLabels>;\n   // we need a container here that guarantees pointer stability of the value,\n   // namely, the pointer of the value should remain valid even after more cells\n   // are inserted."
        },
        {
            "sha": "ff86579b185f31d4e39c87e118ede2e30594ca1a",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/types.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Ftypes.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Ftypes.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Ftypes.h?ref=56ed4fd4f41eb3e7eb93c2d4e66a5ea01e3e9971",
            "patch": "@@ -38,8 +38,8 @@ struct PercentilePoint {\n \n struct Percentiles {\n   UnitOfMeasure unit_of_measure = UnitOfMeasure::kNumber;\n-  uint64 start_nstime = 0;\n-  uint64 end_nstime = 0;\n+  uint64_t start_nstime = 0;\n+  uint64_t end_nstime = 0;\n   double min_value = NAN;\n   double max_value = NAN;\n   double mean = NAN;"
        }
    ],
    "stats": {
        "total": 91,
        "additions": 46,
        "deletions": 45
    }
}