{
    "author": "ICGog",
    "message": "Add platform name to xla::ifrt::Device\n\nPiperOrigin-RevId: 845901966",
    "sha": "4350883de62491e22d27f4cb496e9a944377d2fc",
    "files": [
        {
            "sha": "709f9f0f914f34962a366244b5fd5619b7eba70b",
            "filename": "third_party/xla/xla/backends/cpu/nanort/ifrt_client.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fnanort%2Fifrt_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fnanort%2Fifrt_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fnanort%2Fifrt_client.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -1261,6 +1261,8 @@ class NanoDevice final : public llvm::RTTIExtends<NanoDevice, ifrt::Device> {\n     return *attributes;\n   }\n \n+  absl::string_view PlatformName() const override { return \"cpu\"; }\n+\n   absl::string_view Kind() const override { return \"cpu\"; }\n \n   absl::string_view ToString() const override { return \"NanoRT CPU\"; }"
        },
        {
            "sha": "621547a757b9623c8107001e7bf013d682c943a1",
            "filename": "third_party/xla/xla/python/compile_only_ifrt/client.h",
            "status": "modified",
            "additions": 8,
            "deletions": 3,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fcompile_only_ifrt%2Fclient.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fcompile_only_ifrt%2Fclient.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fcompile_only_ifrt%2Fclient.h?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -101,8 +101,10 @@ class CompileOnlyMemory\n class CompileOnlyDevice\n     : public llvm::RTTIExtends<CompileOnlyDevice, ifrt::Device> {\n  public:\n-  explicit CompileOnlyDevice(const PjRtDeviceDescription* description)\n+  explicit CompileOnlyDevice(const PjRtDeviceDescription* description,\n+                             absl::string_view platform_name)\n       : description_(std::move(description)),\n+        platform_name_(platform_name),\n         attributes_(ifrt::FromPjRtAttributeMap(description_->Attributes())) {}\n \n   const PjRtDeviceDescription& description() const { return *description_; }\n@@ -115,6 +117,8 @@ class CompileOnlyDevice\n \n   int ProcessIndex() const override { return description_->process_index(); }\n \n+  absl::string_view PlatformName() const override { return platform_name_; }\n+\n   absl::string_view Kind() const override {\n     return description_->device_kind();\n   }\n@@ -150,6 +154,7 @@ class CompileOnlyDevice\n \n  private:\n   const PjRtDeviceDescription* description_;\n+  const std::string platform_name_;\n   ifrt::AttributeMap attributes_;\n   ifrt::Memory* default_memory_ = nullptr;\n   std::vector<ifrt::Memory*> unowned_memories_;\n@@ -193,8 +198,8 @@ class CompileOnlyIfRtClient final\n         attributes_(ifrt::AttributeMap::Map()) {\n     int offset = 0;\n     for (auto& description : descriptions_) {\n-      owned_devices_.push_back(\n-          std::make_unique<CompileOnlyDevice>(description.get()));\n+      owned_devices_.push_back(std::make_unique<CompileOnlyDevice>(\n+          description.get(), topology_->platform_name()));\n       auto* device = owned_devices_.back().get();\n       devices_.push_back(device);\n       if (description->process_index() == process_index()) {"
        },
        {
            "sha": "0298701f54ba2f951b96de5e8cc5e385f6b2e3cd",
            "filename": "third_party/xla/xla/python/ifrt/device.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fdevice.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fdevice.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fdevice.h?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -57,6 +57,9 @@ class Device : public llvm::RTTIExtends<Device, llvm::RTTIRoot> {\n   // reference will remain valid for the lifetime of the Device.\n   virtual const AttributeMap& Attributes() const = 0;\n \n+  // A string that uniquely identifies the platform, e.g., \"tpu\", \"cuda\", \"cpu\".\n+  virtual absl::string_view PlatformName() const = 0;\n+\n   // A vendor-dependent string that uniquely identifies the kind of device,\n   // e.g., \"Tesla V100-SXM2-16GB\". May be used to determine whether two GPUs are\n   // compatible compilation."
        },
        {
            "sha": "e1d96bff98046bed3442ab2765455bc7484c00f6",
            "filename": "third_party/xla/xla/python/ifrt/ir/compiled_ifrt_ir_program.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 8,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fir%2Fcompiled_ifrt_ir_program.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fir%2Fcompiled_ifrt_ir_program.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fir%2Fcompiled_ifrt_ir_program.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -386,14 +386,8 @@ absl::StatusOr<CompiledIfrtIrProgram> CompiledIfrtIrProgram::Create(\n     compile_pipeline_options.propagate_shardings =\n         compile_options->propagate_shardings;\n     for (const auto device : devices) {\n-      auto platform_name =\n-          device->Attributes().Get<std::string>(\"platform_name\");\n-      if (platform_name.ok()) {\n-        compile_pipeline_options.platform_names.push_back(*platform_name);\n-      } else {\n-        compile_pipeline_options.platform_names.push_back(\n-            std::string(client->platform_name()));\n-      }\n+      compile_pipeline_options.platform_names.push_back(\n+          std::string(device->PlatformName()));\n     }\n     TF_RETURN_IF_ERROR(xla::ifrt::createOutlinedAtomProgramsToCompiledPipeline(\n         pm, std::move(atom_program_compiler), compile_pipeline_options,"
        },
        {
            "sha": "3ecaef013dd39c69a1d52256abd379581bc78457",
            "filename": "third_party/xla/xla/python/ifrt/mock.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -261,6 +261,9 @@ MockDevice::MockDevice(Device* delegated) : delegated_(delegated) {\n   ON_CALL(*this, ProcessIndex).WillByDefault([this]() {\n     return delegated_->ProcessIndex();\n   });\n+  ON_CALL(*this, PlatformName).WillByDefault([this]() {\n+    return delegated_->PlatformName();\n+  });\n   ON_CALL(*this, Kind).WillByDefault([this]() { return delegated_->Kind(); });\n   ON_CALL(*this, Attributes).WillByDefault([this]() -> const AttributeMap& {\n     return delegated_->Attributes();"
        },
        {
            "sha": "ae686297484915aa1d577eee891e863f7f3da859",
            "filename": "third_party/xla/xla/python/ifrt/mock.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.h?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -237,6 +237,7 @@ class MockDevice : public Device {\n   MOCK_METHOD(bool, IsAddressable, (), (const, final));\n   MOCK_METHOD(int, ProcessIndex, (), (const, final));\n   MOCK_METHOD(DeviceId, Id, (), (const, final));\n+  MOCK_METHOD(absl::string_view, PlatformName, (), (const, final));\n   MOCK_METHOD(absl::string_view, Kind, (), (const, final));\n   MOCK_METHOD((const AttributeMap&), Attributes, (), (const, final));\n   MOCK_METHOD(absl::StatusOr<Memory*>, DefaultMemory, (), (const, final));"
        },
        {
            "sha": "e902620da7dd7c3527421161635c154660a330df",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/client.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -139,9 +139,9 @@ absl::StatusOr<std::unique_ptr<Client>> Client::Create(\n     bool is_addressable = addressable_device_ids.contains(d.id());\n     bool is_primary = primary_device_ids.contains(d.id());\n \n-    auto device =\n-        std::make_unique<Device>(std::move(desc), d.local_device_id(),\n-                                 d.local_hardware_id(), is_addressable);\n+    auto device = std::make_unique<Device>(\n+        std::move(desc), d.platform_name(), d.local_device_id(),\n+        d.local_hardware_id(), is_addressable);\n     all_device_ptrs.push_back(device.get());\n     if (is_primary) {\n       primary_device_ptrs.push_back(device.get());"
        },
        {
            "sha": "cb1019ae548705c7290fdaa367434eabfb120d04",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/device.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fdevice.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fdevice.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fdevice.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -14,6 +14,7 @@\n \n #include \"xla/python/ifrt_proxy/client/device.h\"\n \n+#include <string>\n #include <utility>\n \n #include \"absl/status/status.h\"\n@@ -28,9 +29,10 @@ namespace xla {\n namespace ifrt {\n namespace proxy {\n \n-Device::Device(DeviceDescription description, int local_device_id,\n-               int local_hardware_id, bool is_addressable)\n+Device::Device(DeviceDescription description, std::string platform_name,\n+               int local_device_id, int local_hardware_id, bool is_addressable)\n     : description_(std::move(description)),\n+      platform_name_(std::move(platform_name)),\n       attributes_(FromPjRtAttributeMap(description_.Attributes())),\n       local_device_id_(local_device_id),\n       local_hardware_id_(local_hardware_id),\n@@ -42,6 +44,7 @@ DeviceId Device::Id() const { return DeviceId(description_.id()); }\n \n bool Device::IsAddressable() const { return is_addressable_; }\n \n+absl::string_view Device::PlatformName() const { return platform_name_; }\n absl::string_view Device::Kind() const { return description_.device_kind(); }\n absl::string_view Device::ToString() const { return description_.ToString(); }\n "
        },
        {
            "sha": "c81b0359b7ba9dd49950a511c181bb0d0f37ab6a",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/device.h",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fdevice.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fdevice.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fdevice.h?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -76,13 +76,14 @@ class DeviceDescription final : public xla::PjRtDeviceDescription {\n \n class Device final : public llvm::RTTIExtends<Device, xla::ifrt::Device> {\n  public:\n-  Device(DeviceDescription description, int local_device_id,\n-         int local_hardware_id, bool is_addressable);\n+  Device(DeviceDescription description, std::string platform_name,\n+         int local_device_id, int local_hardware_id, bool is_addressable);\n \n   ifrt::Client* client() const override;\n   bool IsAddressable() const override;\n \n   DeviceId Id() const override;\n+  absl::string_view PlatformName() const override;\n   absl::string_view Kind() const override;\n   absl::string_view ToString() const override;\n   absl::string_view DebugString() const override;\n@@ -100,6 +101,7 @@ class Device final : public llvm::RTTIExtends<Device, xla::ifrt::Device> {\n \n   ifrt::Client* client_;\n   const DeviceDescription description_;\n+  const std::string platform_name_;\n \n   const AttributeMap attributes_;\n "
        },
        {
            "sha": "59147e46daf02598f0a6ca1aeaecfb6d2a318b3f",
            "filename": "third_party/xla/xla/python/ifrt_proxy/common/VERSION.md",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2FVERSION.md",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2FVERSION.md",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2FVERSION.md?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -131,3 +131,9 @@\n *   Changes:\n     *   Added a new op `LoadedExecutableFetchExecuteResult` for reading\n         execution results.\n+\n+## Version kkDevicePlatformName\n+\n+*   Added date: 2025-12-13\n+*   Changes:\n+    *   Added `Device::PlatformName()` for getting the platform of a device."
        },
        {
            "sha": "6b20e3bad369ccd2aa73cffa0e6501b4f9bb53d0",
            "filename": "third_party/xla/xla/python/ifrt_proxy/common/ifrt_service.proto",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2Fifrt_service.proto",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2Fifrt_service.proto",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2Fifrt_service.proto?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -248,6 +248,7 @@ message InitResponse {\n     int32 id = 1;\n     int32 local_device_id = 9;\n     int32 local_hardware_id = 2;\n+    string platform_name = 11;\n     string device_kind = 3;\n     optional int32 default_memory_id = 7;\n     repeated int32 memory_ids = 8;"
        },
        {
            "sha": "2b04ea6a778bf43f6ac4044a9e638d1e6daaf3d3",
            "filename": "third_party/xla/xla/python/ifrt_proxy/common/versions.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2Fversions.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2Fversions.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fcommon%2Fversions.h?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -70,6 +70,9 @@ enum {\n   // results to return extra information such as device time measurement.\n   kExecuteResult = 21,\n \n+  // kDevicePlatformName adds a PlatformName() method to Device.\n+  kDevicePlatformName = 22,\n+\n   // kSentiel is used to derive kCurrent below. Keep this as the last value of\n   // the enum.\n   kSentiel,"
        },
        {
            "sha": "b4408a2bcf8dbf86f6c9b6b8b97203d2a273b38b",
            "filename": "third_party/xla/xla/python/ifrt_proxy/server/ifrt_backend.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -763,6 +763,7 @@ absl::StatusOr<BackendInterface::Response> IfrtBackend::HandleInit(\n   for (auto* device : all_devices) {\n     InitResponse::Device* d = init_resp->add_all_devices();\n     d->set_id(device->Id().value());\n+    d->set_platform_name(AsProtoStringData(device->PlatformName()));\n     d->set_device_kind(AsProtoStringData(device->Kind()));\n     if (auto default_memory = device->DefaultMemory(); default_memory.ok()) {\n       d->set_default_memory_id((*default_memory)->Id().value());"
        },
        {
            "sha": "9e8b511d18bc72af2ce0d5aab984e60ce99a3deb",
            "filename": "third_party/xla/xla/python/ifrt_proxy/server/ifrt_backend_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend_test.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -471,6 +471,7 @@ TEST_P(IfrtBackendHandlerTest, Init) {\n \n     MockDevice& mock_device = *mock_devices_[i];\n     // TODO(b/314368788): Clean up PJRT device ID APIs.\n+    EXPECT_CALL(mock_device, PlatformName()).WillRepeatedly(Return(\"mock\"));\n     EXPECT_CALL(mock_device, Kind()).WillRepeatedly(Return(\"mock\"));\n     EXPECT_CALL(mock_device, Memories())\n         .WillRepeatedly(Return(device_memories[i]));\n@@ -500,6 +501,7 @@ TEST_P(IfrtBackendHandlerTest, Init) {\n   EXPECT_EQ(init_response.all_devices().size(), 2);\n   for (auto device : init_response.all_devices()) {\n     int device_canonical_num = device.id();\n+    EXPECT_EQ(device.platform_name(), \"mock\");\n     EXPECT_EQ(device.device_kind(), \"mock\");\n     EXPECT_EQ(device.default_memory_id(), device_canonical_num);\n     EXPECT_EQ(device.memory_ids().size(), 1);"
        },
        {
            "sha": "e2cdde0b602b88fed80c8b7f699ae74c4d5bd972",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/pjrt_client.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -498,6 +498,7 @@ MakePjRtDevicesFromGlobalTopology(PjRtClient* client,\n       }\n     }\n \n+    std::string platform_name(pjrt_client->platform_name());\n     const bool node_is_me = process_index == global_topology.my_process_index;\n     for (const DeviceProto& device_proto : node.devices()) {\n       absl::flat_hash_map<std::string, PjRtDeviceAttribute> attributes;\n@@ -536,7 +537,7 @@ MakePjRtDevicesFromGlobalTopology(PjRtClient* client,\n         }\n       }\n       auto ifrt_device = std::make_unique<PjRtDevice>(\n-          client, ifrt_device_id, device_proto.device_kind(),\n+          client, ifrt_device_id, platform_name, device_proto.device_kind(),\n           std::move(to_string), std::move(debug_string), process_index,\n           std::move(attributes), pjrt_device);\n       devices.push_back(std::move(ifrt_device));"
        },
        {
            "sha": "fa8db5f6b9f2bcb2901f9dd86c44959d200900d8",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/pjrt_device.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_device.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_device.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_device.cc?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -39,13 +39,15 @@ char PjRtCompatibleDevice::ID = 0;\n char PjRtDevice::ID = 0;\n \n PjRtDevice::PjRtDevice(\n-    PjRtClient* client, DeviceId id, std::string kind, std::string to_string,\n-    std::string debug_string, int process_index,\n+    PjRtClient* client, DeviceId id, std::string platform_name,\n+    std::string kind, std::string to_string, std::string debug_string,\n+    int process_index,\n     absl::flat_hash_map<std::string, PjRtDeviceAttribute> attributes,\n     xla::PjRtDevice* pjrt_device)\n     : client_(client),\n       id_(id),\n       attributes_(FromPjRtAttributeMap(std::move(attributes))),\n+      platform_name_(std::move(platform_name)),\n       kind_(std::move(kind)),\n       to_string_(std::move(to_string)),\n       debug_string_(std::move(debug_string)),\n@@ -56,6 +58,8 @@ DeviceId PjRtDevice::Id() const { return id_; }\n \n const AttributeMap& PjRtDevice::Attributes() const { return attributes_; }\n \n+absl::string_view PjRtDevice::PlatformName() const { return platform_name_; }\n+\n absl::string_view PjRtDevice::Kind() const { return kind_; }\n \n absl::string_view PjRtDevice::ToString() const { return to_string_; }"
        },
        {
            "sha": "6a832174feaaa076278aafafe5dd55531e965d3d",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/pjrt_device.h",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_device.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_device.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_device.h?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -43,8 +43,9 @@ class PjRtCompatibleDevice : public llvm::RTTIExtends<PjRtDevice, Device> {\n class PjRtDevice final\n     : public llvm::RTTIExtends<PjRtDevice, PjRtCompatibleDevice> {\n  public:\n-  PjRtDevice(PjRtClient* client, DeviceId id, std::string kind,\n-             std::string to_string, std::string debug_string, int process_index,\n+  PjRtDevice(PjRtClient* client, DeviceId id, std::string platform_name,\n+             std::string kind, std::string to_string, std::string debug_string,\n+             int process_index,\n              absl::flat_hash_map<std::string, PjRtDeviceAttribute> attributes,\n              xla::PjRtDevice* pjrt_device);\n \n@@ -57,6 +58,7 @@ class PjRtDevice final\n \n   DeviceId Id() const final;\n   const AttributeMap& Attributes() const final;\n+  absl::string_view PlatformName() const final;\n   absl::string_view Kind() const final;\n   absl::string_view ToString() const final;\n   absl::string_view DebugString() const final;\n@@ -74,6 +76,7 @@ class PjRtDevice final\n \n   DeviceId id_;\n   AttributeMap attributes_;\n+  std::string platform_name_;\n   std::string kind_;\n   std::string to_string_;\n   std::string debug_string_;"
        },
        {
            "sha": "6460623314ce638cc18d33a683e618d10991f829",
            "filename": "third_party/xla/xla/python/version.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fversion.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4350883de62491e22d27f4cb496e9a944377d2fc/third_party%2Fxla%2Fxla%2Fpython%2Fversion.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fversion.h?ref=4350883de62491e22d27f4cb496e9a944377d2fc",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n \n // An increasing version number to protect jax code against breaking changes.\n // In JAX, reference this via jax._src.lib.ifrt_version.\n-#define JAX_IFRT_VERSION_NUMBER 43  // Transpose API update\n+#define JAX_IFRT_VERSION_NUMBER \\\n+  44  // xla::ifrt::Device has a new PlatformName() API.\n \n #endif  // XLA_PYTHON_VERSION_H_"
        }
    ],
    "stats": {
        "total": 83,
        "additions": 59,
        "deletions": 24
    }
}