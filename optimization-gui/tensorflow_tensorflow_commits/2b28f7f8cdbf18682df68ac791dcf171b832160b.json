{
    "author": "ezhulenev",
    "message": "[xla:cpu] Move BuiltinDefinitionGenerator to backends/cpu/codegen\n\nRename RuntimeSymbolGenerator to BuiltinDefinitionGenerator to better reflect what it is doing in our compilation pipeline.\n\nPiperOrigin-RevId: 828301078",
    "sha": "2b28f7f8cdbf18682df68ac791dcf171b832160b",
    "files": [
        {
            "sha": "736887111624d452ae3ba03d22d83659b9346171",
            "filename": "third_party/xla/xla/backends/cpu/codegen/BUILD",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -23,6 +23,25 @@ package_group(\n     ],\n )\n \n+cc_library(\n+    name = \"builtin_definition_generator\",\n+    srcs = [\"builtin_definition_generator.cc\"],\n+    hdrs = [\"builtin_definition_generator.h\"],\n+    deps = [\n+        \":builtin_fp16\",\n+        \":builtin_pow\",\n+        \"@com_google_absl//absl/base:no_destructor\",\n+        \"@com_google_absl//absl/container:flat_hash_map\",\n+        \"@com_google_absl//absl/functional:any_invocable\",\n+        \"@com_google_absl//absl/strings:string_view\",\n+        \"@llvm-project//llvm:Core\",\n+        \"@llvm-project//llvm:OrcJIT\",\n+        \"@llvm-project//llvm:OrcShared\",\n+        \"@llvm-project//llvm:Support\",\n+        \"@llvm-project//mlir:mlir_c_runner_utils\",\n+    ],\n+)\n+\n cc_library(\n     name = \"builtin_fp16\",\n     srcs = [\"builtin_fp16.cc\"],"
        },
        {
            "sha": "e91212e97e8fb254f887947f3fdbc6a645eda4fb",
            "filename": "third_party/xla/xla/backends/cpu/codegen/builtin_definition_generator.cc",
            "status": "renamed",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fbuiltin_definition_generator.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fbuiltin_definition_generator.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fbuiltin_definition_generator.cc?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -13,7 +13,7 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n-#include \"xla/service/cpu/runtime_symbol_generator.h\"\n+#include \"xla/backends/cpu/codegen/builtin_definition_generator.h\"\n \n #ifdef _MSC_VER\n #include <math.h>\n@@ -247,13 +247,14 @@ static Registry CreateRegistry() {\n }\n \n //===----------------------------------------------------------------------===//\n-// RuntimeSymbolGenerator\n+// BuiltinDefinitionGenerator\n //===----------------------------------------------------------------------===//\n \n-RuntimeSymbolGenerator::RuntimeSymbolGenerator(llvm::DataLayout data_layout)\n+BuiltinDefinitionGenerator::BuiltinDefinitionGenerator(\n+    llvm::DataLayout data_layout)\n     : data_layout_(std::move(data_layout)) {}\n \n-llvm::Error RuntimeSymbolGenerator::tryToGenerate(\n+llvm::Error BuiltinDefinitionGenerator::tryToGenerate(\n     llvm::orc::LookupState&, llvm::orc::LookupKind kind,\n     llvm::orc::JITDylib& jit_dylib, llvm::orc::JITDylibLookupFlags,\n     const llvm::orc::SymbolLookupSet& names) {",
            "previous_filename": "third_party/xla/xla/service/cpu/runtime_symbol_generator.cc"
        },
        {
            "sha": "7689e7b13e425c539616c2825454ef4094ee89b2",
            "filename": "third_party/xla/xla/backends/cpu/codegen/builtin_definition_generator.h",
            "status": "renamed",
            "additions": 16,
            "deletions": 7,
            "changes": 23,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fbuiltin_definition_generator.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fbuiltin_definition_generator.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fbuiltin_definition_generator.h?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -13,20 +13,29 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n-#ifndef XLA_SERVICE_CPU_RUNTIME_SYMBOL_GENERATOR_H_\n-#define XLA_SERVICE_CPU_RUNTIME_SYMBOL_GENERATOR_H_\n+#ifndef XLA_BACKENDS_CPU_CODEGEN_BUILTIN_DEFINITION_GENERATOR_H_\n+#define XLA_BACKENDS_CPU_CODEGEN_BUILTIN_DEFINITION_GENERATOR_H_\n \n #include \"llvm/ExecutionEngine/Orc/Core.h\"\n #include \"llvm/IR/DataLayout.h\"\n #include \"llvm/Support/Error.h\"\n \n namespace xla::cpu {\n \n-// Generates symbol definitions for XLA runtime symbols, which are linked into\n-// the compiled XLA kernels.\n-class RuntimeSymbolGenerator : public llvm::orc::DefinitionGenerator {\n+// Generates symbol definitions for builtin XLA runtime symbols, which are\n+// looked up at run time in the parent process:\n+//\n+//   - libc symbols (e.g. memcpy, memmove, memset)\n+//   - libm symbols (e.g. sin, cos, etc.)\n+//   - compiler-rt symbols (e.g. __msan_unpoison)\n+//   - custom XLA symbols (e.g. __truncsfbf2)\n+//\n+// We keep the list of definitions short, and prefer to compile math functions\n+// into generated XLA:CPU executables via intrinsics, as it allows the LLVM\n+// optimizer to inline them and optimize across function call boundaries.\n+class BuiltinDefinitionGenerator : public llvm::orc::DefinitionGenerator {\n  public:\n-  explicit RuntimeSymbolGenerator(llvm::DataLayout data_layout);\n+  explicit BuiltinDefinitionGenerator(llvm::DataLayout data_layout);\n \n   llvm::Error tryToGenerate(llvm::orc::LookupState&, llvm::orc::LookupKind,\n                             llvm::orc::JITDylib& jit_dylib,\n@@ -39,4 +48,4 @@ class RuntimeSymbolGenerator : public llvm::orc::DefinitionGenerator {\n \n }  // namespace xla::cpu\n \n-#endif  // XLA_SERVICE_CPU_RUNTIME_SYMBOL_GENERATOR_H_\n+#endif  // XLA_BACKENDS_CPU_CODEGEN_BUILTIN_DEFINITION_GENERATOR_H_",
            "previous_filename": "third_party/xla/xla/service/cpu/runtime_symbol_generator.h"
        },
        {
            "sha": "2594c12a4d52e208f068e93b322f5424e0b92ff0",
            "filename": "third_party/xla/xla/backends/cpu/testlib/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftestlib%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftestlib%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftestlib%2FBUILD?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -24,6 +24,7 @@ cc_library(\n     hdrs = [\"kernel_runner.h\"],\n     deps = [\n         \"//xla:xla_proto_cc\",\n+        \"//xla/backends/cpu/codegen:builtin_definition_generator\",\n         \"//xla/backends/cpu/codegen:cpu_features\",\n         \"//xla/backends/cpu/codegen:execution_engine\",\n         \"//xla/backends/cpu/codegen:fusion_compiler\",\n@@ -41,7 +42,6 @@ cc_library(\n         \"//xla/runtime:work_group\",\n         \"//xla/service:hlo_module_config\",\n         \"//xla/service/cpu:cpu_options\",\n-        \"//xla/service/cpu:runtime_symbol_generator\",\n         \"//xla/service/llvm_ir:llvm_util\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:statusor\","
        },
        {
            "sha": "96c60411fe6f41a025857844f275bd9043807f8d",
            "filename": "third_party/xla/xla/backends/cpu/testlib/kernel_runner.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftestlib%2Fkernel_runner.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftestlib%2Fkernel_runner.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftestlib%2Fkernel_runner.cc?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -26,6 +26,7 @@ limitations under the License.\n #include \"llvm/IR/DataLayout.h\"\n #include \"llvm/IR/Module.h\"\n #include \"llvm/Target/TargetOptions.h\"\n+#include \"xla/backends/cpu/codegen/builtin_definition_generator.h\"\n #include \"xla/backends/cpu/codegen/cpu_features.h\"\n #include \"xla/backends/cpu/codegen/execution_engine.h\"\n #include \"xla/backends/cpu/codegen/fusion_compiler.h\"\n@@ -41,7 +42,6 @@ limitations under the License.\n #include \"xla/codegen/mlir_kernel_source.h\"\n #include \"xla/runtime/work_group.h\"\n #include \"xla/service/cpu/cpu_options.h\"\n-#include \"xla/service/cpu/runtime_symbol_generator.h\"\n #include \"xla/service/hlo_module_config.h\"\n #include \"xla/service/llvm_ir/llvm_util.h\"\n #include \"xla/tsl/platform/errors.h\"\n@@ -116,7 +116,7 @@ absl::StatusOr<JitCompiler> KernelRunner::CreateJitCompiler(\n   // Needed to resolve symbols such as built in intrinsics (sin, cos etc).\n   ExecutionEngine::DefinitionGenerator definition_generator =\n       [](const llvm::DataLayout& data_layout) {\n-        return std::make_unique<RuntimeSymbolGenerator>(data_layout);\n+        return std::make_unique<BuiltinDefinitionGenerator>(data_layout);\n       };\n \n   JitCompiler::Options jit_compiler_options{"
        },
        {
            "sha": "093f33cd23f1563578503a7bb9598a9cc0a2ca41",
            "filename": "third_party/xla/xla/service/cpu/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 23,
            "changes": 26,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2FBUILD?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -189,7 +189,6 @@ cc_library(\n         \":ir_emitter2\",\n         \":metrics\",\n         \":parallel_task_assignment\",\n-        \":runtime_symbol_generator\",\n         \":small_while_loop_hoisting_pass\",\n         \":thunk_emitter\",\n         \"//xla:debug_options_flags\",\n@@ -206,6 +205,7 @@ cc_library(\n         \"//xla/backends/cpu:alignment\",\n         \"//xla/backends/cpu:constant_allocation\",\n         \"//xla/backends/cpu:xnn_support\",\n+        \"//xla/backends/cpu/codegen:builtin_definition_generator\",\n         \"//xla/backends/cpu/codegen:compiled_function_library\",\n         \"//xla/backends/cpu/codegen:cpu_features\",\n         \"//xla/backends/cpu/codegen:execution_engine\",\n@@ -561,26 +561,6 @@ tf_proto_library(\n     ],\n )\n \n-cc_library(\n-    name = \"runtime_symbol_generator\",\n-    srcs = [\"runtime_symbol_generator.cc\"],\n-    hdrs = [\"runtime_symbol_generator.h\"],\n-    copts = tsl_copts(),\n-    deps = [\n-        \"//xla/backends/cpu/codegen:builtin_fp16\",\n-        \"//xla/backends/cpu/codegen:builtin_pow\",\n-        \"@com_google_absl//absl/base:no_destructor\",\n-        \"@com_google_absl//absl/container:flat_hash_map\",\n-        \"@com_google_absl//absl/functional:any_invocable\",\n-        \"@com_google_absl//absl/strings:string_view\",\n-        \"@llvm-project//llvm:Core\",\n-        \"@llvm-project//llvm:OrcJIT\",\n-        \"@llvm-project//llvm:OrcShared\",\n-        \"@llvm-project//llvm:Support\",\n-        \"@llvm-project//mlir:mlir_c_runner_utils\",\n-    ],\n-)\n-\n cc_library(\n     name = \"runtime_lightweight_check\",\n     hdrs = [\"runtime_lightweight_check.h\"],\n@@ -715,10 +695,10 @@ xla_cc_test(\n         \":cpu_options\",\n         \":ir_emitter\",\n         \":ir_function\",\n-        \":runtime_symbol_generator\",\n         \":target_machine_features_stub\",\n         \"//xla:shape_util\",\n         \"//xla/backends/cpu:alignment\",\n+        \"//xla/backends/cpu/codegen:builtin_definition_generator\",\n         \"//xla/backends/cpu/codegen:cpu_features\",\n         \"//xla/backends/cpu/codegen:execution_engine\",\n         \"//xla/backends/cpu/codegen:ir_compiler\",\n@@ -2112,8 +2092,8 @@ cc_library(\n     deps = [\n         \":cpu_aot_compilation_result\",\n         \":executable_proto_cc\",\n-        \":runtime_symbol_generator\",\n         \"//xla:util\",\n+        \"//xla/backends/cpu/codegen:builtin_definition_generator\",\n         \"//xla/backends/cpu/codegen:cpu_features\",\n         \"//xla/backends/cpu/codegen:execution_engine\",\n         \"//xla/backends/cpu/codegen:ir_compiler\","
        },
        {
            "sha": "ea5a336513c9645e7e4faa8965e87face496823b",
            "filename": "third_party/xla/xla/service/cpu/cpu_aot_loader.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_aot_loader.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_aot_loader.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_aot_loader.cc?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -32,6 +32,7 @@ limitations under the License.\n #include \"llvm/Target/TargetMachine.h\"\n #include \"llvm/Target/TargetOptions.h\"\n #include \"llvm/TargetParser/Host.h\"\n+#include \"xla/backends/cpu/codegen/builtin_definition_generator.h\"\n #include \"xla/backends/cpu/codegen/cpu_features.h\"\n #include \"xla/backends/cpu/codegen/execution_engine.h\"\n #include \"xla/backends/cpu/codegen/ir_compiler.h\"\n@@ -40,7 +41,6 @@ limitations under the License.\n #include \"xla/service/compiler.h\"\n #include \"xla/service/cpu/cpu_aot_compilation_result.h\"\n #include \"xla/service/cpu/executable.pb.h\"\n-#include \"xla/service/cpu/runtime_symbol_generator.h\"\n #include \"xla/service/executable.h\"\n #include \"xla/service/hlo_module_config.h\"\n #include \"xla/service/llvm_ir/llvm_command_line_options.h\"\n@@ -107,7 +107,7 @@ absl::StatusOr<std::unique_ptr<FunctionLibrary>> LoadFunctionLibrary(\n   // Definition generator to link with XLA:CPU host runtime symbols.\n   ExecutionEngine::DefinitionGenerator definition_generator =\n       [](const llvm::DataLayout& data_layout) {\n-        return std::make_unique<RuntimeSymbolGenerator>(data_layout);\n+        return std::make_unique<BuiltinDefinitionGenerator>(data_layout);\n       };\n \n   ObjectLoader object_loader(/*num_dylibs=*/1,\n@@ -116,7 +116,7 @@ absl::StatusOr<std::unique_ptr<FunctionLibrary>> LoadFunctionLibrary(\n \n   for (size_t i = 0; i < object_loader.num_dylibs(); ++i) {\n     object_loader.dylib(i).value()->addGenerator(\n-        std::make_unique<RuntimeSymbolGenerator>(\n+        std::make_unique<BuiltinDefinitionGenerator>(\n             target_machine->createDataLayout()));\n   }\n "
        },
        {
            "sha": "3ed65594d583d6695fd8c9c75c21943077ab95ac",
            "filename": "third_party/xla/xla/service/cpu/cpu_compiler.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_compiler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_compiler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_compiler.cc?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -87,6 +87,7 @@ limitations under the License.\n #include \"mlir/Target/LLVMIR/Export.h\"\n #include \"mlir/Transforms/DialectConversion.h\"\n #include \"xla/backends/cpu/alignment.h\"\n+#include \"xla/backends/cpu/codegen/builtin_definition_generator.h\"\n #include \"xla/backends/cpu/codegen/cpu_features.h\"\n #include \"xla/backends/cpu/codegen/emitters/cpu_fusion_emitter_config.h\"\n #include \"xla/backends/cpu/codegen/execution_engine.h\"\n@@ -186,7 +187,6 @@ limitations under the License.\n #include \"xla/service/cpu/ir_emitter2.h\"\n #include \"xla/service/cpu/metrics.h\"\n #include \"xla/service/cpu/parallel_task_assignment.h\"\n-#include \"xla/service/cpu/runtime_symbol_generator.h\"\n #include \"xla/service/cpu/small_while_loop_hoisting_pass.h\"\n #include \"xla/service/cpu/thunk_emitter.h\"\n #include \"xla/service/cpu_gpu_shape_verifier.h\"\n@@ -1677,7 +1677,7 @@ CpuCompiler::CompileCpuExecutable(\n   // Definition generator to link with XLA:CPU host runtime symbols.\n   ExecutionEngine::DefinitionGenerator definition_generator =\n       [](const llvm::DataLayout& data_layout) {\n-        return std::make_unique<RuntimeSymbolGenerator>(data_layout);\n+        return std::make_unique<BuiltinDefinitionGenerator>(data_layout);\n       };\n \n   std::unique_ptr<LlvmMultipleModuleCompiler> llvm_module_compiler;"
        },
        {
            "sha": "ba3e73471fe458fea4e7b30958b20b08f8c89b3a",
            "filename": "third_party/xla/xla/service/cpu/ir_emitter_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fir_emitter_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b28f7f8cdbf18682df68ac791dcf171b832160b/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fir_emitter_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fir_emitter_test.cc?ref=2b28f7f8cdbf18682df68ac791dcf171b832160b",
            "patch": "@@ -40,6 +40,7 @@ limitations under the License.\n #include \"llvm/Target/TargetOptions.h\"\n #include \"mlir/IR/MLIRContext.h\"\n #include \"xla/backends/cpu/alignment.h\"\n+#include \"xla/backends/cpu/codegen/builtin_definition_generator.h\"\n #include \"xla/backends/cpu/codegen/cpu_features.h\"\n #include \"xla/backends/cpu/codegen/execution_engine.h\"\n #include \"xla/backends/cpu/codegen/ir_compiler.h\"\n@@ -59,7 +60,6 @@ limitations under the License.\n #include \"xla/service/cpu/cpu_executable.h\"\n #include \"xla/service/cpu/cpu_options.h\"\n #include \"xla/service/cpu/ir_function.h\"\n-#include \"xla/service/cpu/runtime_symbol_generator.h\"\n #include \"xla/service/cpu/target_machine_features_stub.h\"\n #include \"xla/service/hlo_module_config.h\"\n #include \"xla/service/llvm_ir/llvm_util.h\"\n@@ -242,7 +242,7 @@ CreateIrEmitterForConstantEmissionTests(HloModule& module,\n   // Definition generator to link with XLA:CPU host runtime symbols.\n   ExecutionEngine::DefinitionGenerator definition_generator =\n       [](const llvm::DataLayout& data_layout) {\n-        return std::make_unique<RuntimeSymbolGenerator>(data_layout);\n+        return std::make_unique<BuiltinDefinitionGenerator>(data_layout);\n       };\n \n   // Options for orchestrating the JIT compilation process."
        }
    ],
    "stats": {
        "total": 97,
        "additions": 53,
        "deletions": 44
    }
}