{
    "author": "xiaoxlu",
    "message": "Skip async variable loading when XLA compilation is disabled.\n\nPiperOrigin-RevId: 842467625",
    "sha": "ebc07e02b443fb1c4e5650ebbf4e38d47779ed16",
    "files": [
        {
            "sha": "2976f38f71e352c9b92b6c030ffd462bdbc9e6fb",
            "filename": "tensorflow/core/tfrt/ifrt/ifrt_serving_executable.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ebc07e02b443fb1c4e5650ebbf4e38d47779ed16/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ebc07e02b443fb1c4e5650ebbf4e38d47779ed16/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.cc?ref=ebc07e02b443fb1c4e5650ebbf4e38d47779ed16",
            "patch": "@@ -694,7 +694,7 @@ absl::StatusOr<std::vector<tensorflow::Tensor>> IfrtServingExecutable::Execute(\n   {\n     tsl::profiler::TraceMe traceme(\"AsyncRestoreVariables\");\n     absl::ReaderMutexLock lock(mutex_);\n-    if (!is_frozen_) {\n+    if (!is_frozen_ && !tf_to_hlo_compiler_->IsXlaCompilationDisabled()) {\n       // Asynchronously load the restored variable tensors to Ifrt array.\n       TF_RETURN_IF_ERROR(AsyncLoadIfrtArray(inputs, variable_arg_indices,\n                                             *executable_bundle, device_list));"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}