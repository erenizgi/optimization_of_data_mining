{
    "author": "ermilovmaxim",
    "message": "fix heap overflow for dynamic dimension buffers\n\nPiperOrigin-RevId: 837023744",
    "sha": "f3cd043a52590efff0e9525208f44b3f4a70729e",
    "files": [
        {
            "sha": "65e7a6ace81d0bad9523e2adb21e793ee08edd51",
            "filename": "third_party/xla/xla/pjrt/gpu/tfrt/tfrt_gpu_buffer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f3cd043a52590efff0e9525208f44b3f4a70729e/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2Ftfrt_gpu_buffer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f3cd043a52590efff0e9525208f44b3f4a70729e/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2Ftfrt_gpu_buffer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2Ftfrt_gpu_buffer.cc?ref=f3cd043a52590efff0e9525208f44b3f4a70729e",
            "patch": "@@ -528,7 +528,7 @@ Future<> TfrtGpuBuffer::ToLiteralHelper(Future<MutableLiteralBase*> literal) {\n           }\n           if (on_device_shape.IsArray() && !should_unpack &&\n               transpose == nullptr) {\n-            std::memcpy(literal->untyped_data(), buffer, byte_size);\n+            std::memcpy(literal->untyped_data(), buffer, literal->size_bytes());\n           }\n           promise.Set(absl::OkStatus());\n         });"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}