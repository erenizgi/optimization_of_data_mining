{
    "author": "grantjensen",
    "message": "Fix cmakes build of tflite when TFLITE_WITH_XNNPACK=OFF and tflite is a dependency\n\nPiperOrigin-RevId: 845504524",
    "sha": "4f5e199a87e11ef4bb44992a3ccb22ea7e9fe983",
    "files": [
        {
            "sha": "7e877cd92f1cd1bc5342b4d1dada7f8988c0378c",
            "filename": "tensorflow/lite/CMakeLists.txt",
            "status": "modified",
            "additions": 11,
            "deletions": 7,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4f5e199a87e11ef4bb44992a3ccb22ea7e9fe983/tensorflow%2Flite%2FCMakeLists.txt",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4f5e199a87e11ef4bb44992a3ccb22ea7e9fe983/tensorflow%2Flite%2FCMakeLists.txt",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2FCMakeLists.txt?ref=4f5e199a87e11ef4bb44992a3ccb22ea7e9fe983",
            "patch": "@@ -749,9 +749,11 @@ add_library(tensorflow-lite\n set(_ALL_TFLITE_HDRS ${_ALL_TFLITE_SRCS})\n list(FILTER _ALL_TFLITE_HDRS INCLUDE REGEX \".*\\\\.h$\")\n target_include_directories(tensorflow-lite\n-  PUBLIC $<BUILD_INTERFACE:${TENSORFLOW_SOURCE_DIR}> $<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>\n-  PUBLIC ${CMAKE_CURRENT_BINARY_DIR}\n-  PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/..\n+  PUBLIC\n+    $<BUILD_INTERFACE:${TENSORFLOW_SOURCE_DIR}>\n+    $<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>\n+    $<BUILD_INTERFACE:${CMAKE_CURRENT_BINARY_DIR}>\n+    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/..>\n )\n target_link_libraries(tensorflow-lite\n   PUBLIC\n@@ -879,7 +881,9 @@ target_compile_options(_pywrap_tensorflow_interpreter_wrapper\n   PRIVATE ${TFLITE_TARGET_PRIVATE_OPTIONS}\n )\n \n-target_compile_options(xnnpack-delegate\n-  PUBLIC ${TFLITE_TARGET_PUBLIC_OPTIONS}\n-  PRIVATE ${TFLITE_TARGET_PRIVATE_OPTIONS}\n-)\n\\ No newline at end of file\n+if(TFLITE_ENABLE_XNNPACK)\n+  target_compile_options(xnnpack-delegate\n+    PUBLIC ${TFLITE_TARGET_PUBLIC_OPTIONS}\n+    PRIVATE ${TFLITE_TARGET_PRIVATE_OPTIONS}\n+  )\n+endif()\n\\ No newline at end of file"
        },
        {
            "sha": "8be897f54d728f9d59361562c32eaaefeec83b2d",
            "filename": "tensorflow/lite/tools/cmake/modules/ml_dtypes/CMakeLists.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4f5e199a87e11ef4bb44992a3ccb22ea7e9fe983/tensorflow%2Flite%2Ftools%2Fcmake%2Fmodules%2Fml_dtypes%2FCMakeLists.txt",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4f5e199a87e11ef4bb44992a3ccb22ea7e9fe983/tensorflow%2Flite%2Ftools%2Fcmake%2Fmodules%2Fml_dtypes%2FCMakeLists.txt",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Ftools%2Fcmake%2Fmodules%2Fml_dtypes%2FCMakeLists.txt?ref=4f5e199a87e11ef4bb44992a3ccb22ea7e9fe983",
            "patch": "@@ -24,8 +24,9 @@ endif()\n \n add_library(ml_dtypes INTERFACE)\n target_include_directories(ml_dtypes INTERFACE\n-  \"${ML_DTYPES_SOURCE_DIR}\"\n-  \"${ML_DTYPES_SOURCE_DIR}/ml_dtypes\")\n+  \"$<BUILD_INTERFACE:${ML_DTYPES_SOURCE_DIR}>\"\n+  \"$<BUILD_INTERFACE:${ML_DTYPES_SOURCE_DIR}/ml_dtypes>\"\n+  \"$<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>\")\n file(GLOB ML_DTYPES_PUBLIC_HEADERS\n   ${ML_DTYPES_SOURCE_DIR}/ml_dtypes/include/*.h)\n set_target_properties(ml_dtypes PROPERTIES"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 14,
        "deletions": 9
    }
}