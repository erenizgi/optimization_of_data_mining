{
    "author": "majnemer",
    "message": "Replace custom alpha/alphanum checks with Abseil functions and use standard integer types.\n\nThis change replaces `IsAlpha` and `IsAlphaNum` with `absl::ascii_isalpha` and `absl::ascii_isalnum`, respectively. It also updates `tensorflow::int*` and `tensorflow::uint*` types to their standard `*_t` equivalents (e.g., `int8_t`, `uint32_t`). Additionally, `absl::StrAppend` is used for string building within a loop.\n\nPiperOrigin-RevId: 828118936",
    "sha": "551559ffb7ef59debe379e24cc66adfc45ee2504",
    "files": [
        {
            "sha": "7fdeccb63b34242f027b6b9d53516bb6b0119a88",
            "filename": "tensorflow/compiler/aot/codegen.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 17,
            "changes": 29,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/551559ffb7ef59debe379e24cc66adfc45ee2504/tensorflow%2Fcompiler%2Faot%2Fcodegen.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/551559ffb7ef59debe379e24cc66adfc45ee2504/tensorflow%2Fcompiler%2Faot%2Fcodegen.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Faot%2Fcodegen.cc?ref=551559ffb7ef59debe379e24cc66adfc45ee2504",
            "patch": "@@ -29,6 +29,7 @@ limitations under the License.\n #include \"absl/algorithm/container.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_format.h\"\n #include \"absl/strings/str_join.h\"\n@@ -68,41 +69,35 @@ namespace {\n \n using xla::cpu::BufferAllocationInfo;\n \n-bool IsAlpha(char c) {\n-  return (c >= 'A' && c <= 'Z') || (c >= 'a' && c <= 'z');\n-}\n-\n-bool IsAlphaNum(char c) { return IsAlpha(c) || (c >= '0' && c <= '9'); }\n-\n // Convert an XLA type into a C++ type.\n absl::Status XLATypeToCpp(xla::PrimitiveType type, string* str) {\n   switch (type) {\n     case xla::PRED:\n       *str = \"bool\";\n       break;\n     case xla::S8:\n-      *str = \"tensorflow::int8\";\n+      *str = \"int8_t\";\n       break;\n     case xla::S16:\n-      *str = \"tensorflow::int16\";\n+      *str = \"int16_t\";\n       break;\n     case xla::S32:\n-      *str = \"tensorflow::int32\";\n+      *str = \"int32_t\";\n       break;\n     case xla::S64:\n       *str = \"int64_t\";\n       break;\n     case xla::U8:\n-      *str = \"tensorflow::uint8\";\n+      *str = \"uint8_t\";\n       break;\n     case xla::U16:\n-      *str = \"tensorflow::uint16\";\n+      *str = \"uint16_t\";\n       break;\n     case xla::U32:\n-      *str = \"tensorflow::uint32\";\n+      *str = \"uint32_t\";\n       break;\n     case xla::U64:\n-      *str = \"tensorflow::uint64\";\n+      *str = \"uint64_t\";\n       break;\n     case xla::F32:\n       *str = \"float\";\n@@ -169,8 +164,8 @@ absl::Status AddRewritesForShape(\n   } else {\n     for (int dim = 0; dim < shape.dimensions().size(); ++dim) {\n       dim_vars.push_back(absl::StrCat(\"size_t dim\", dim));\n-      dim_sizes += absl::StrCat(\"[\", shape.dimensions(dim), \"]\");\n-      indices += absl::StrCat(\"[dim\", dim, \"]\");\n+      absl::StrAppend(&dim_sizes, \"[\", shape.dimensions(dim), \"]\");\n+      absl::StrAppend(&indices, \"[dim\", dim, \"]\");\n       count *= shape.dimensions(dim);\n     }\n   }\n@@ -1344,11 +1339,11 @@ absl::Status ValidateCppIdent(absl::string_view ident, absl::string_view msg) {\n   // implementation-defined characters`.  We disallow those here to give\n   // better error messages, at the expensive of being more restrictive than\n   // the standard.\n-  if (ident[0] != '_' && !IsAlpha(ident[0])) {\n+  if (ident[0] != '_' && !absl::ascii_isalpha(ident[0])) {\n     return errors::InvalidArgument(\"illegal leading char: \", msg);\n   }\n   for (size_t pos = 1; pos < ident.size(); ++pos) {\n-    if (ident[pos] != '_' && !IsAlphaNum(ident[pos])) {\n+    if (ident[pos] != '_' && !absl::ascii_isalnum(ident[pos])) {\n       return errors::InvalidArgument(\"illegal char: \", msg);\n     }\n   }"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 12,
        "deletions": 17
    }
}