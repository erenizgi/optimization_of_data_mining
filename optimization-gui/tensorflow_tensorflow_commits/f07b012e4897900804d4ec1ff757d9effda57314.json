{
    "author": "apivovarov",
    "message": "Add Clang/CUDA intrinsics compatibility header for RAFT.\n\nThis change introduces `clang_cuda_intrinsics.h` to provide definitions for `__ldcg`, `__ldcv`, `__ldcs`, and `__stwt` intrinsics using inline PTX assembly. This is necessary for compatibility when compiling RAFT with Clang for CUDA, specifically for Clang versions prior to 21. The `select_warpsort.cuh` file is updated to include this new compatibility header.\n\nRelated PR: https://github.com/llvm/llvm-project/pull/144851\n\nPiperOrigin-RevId: 807519327",
    "sha": "f07b012e4897900804d4ec1ff757d9effda57314",
    "files": [
        {
            "sha": "9a73c9b8da98a17411f365b1f38067c5baba8a60",
            "filename": "third_party/xla/third_party/raft/clang_cuda_intrinsics.h.patch",
            "status": "added",
            "additions": 308,
            "deletions": 0,
            "changes": 308,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f07b012e4897900804d4ec1ff757d9effda57314/third_party%2Fxla%2Fthird_party%2Fraft%2Fclang_cuda_intrinsics.h.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f07b012e4897900804d4ec1ff757d9effda57314/third_party%2Fxla%2Fthird_party%2Fraft%2Fclang_cuda_intrinsics.h.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fraft%2Fclang_cuda_intrinsics.h.patch?ref=f07b012e4897900804d4ec1ff757d9effda57314",
            "patch": "@@ -0,0 +1,308 @@\n+diff --git a/cpp/include/raft/compat/clang_cuda_intrinsics.h b/cpp/include/raft/compat/clang_cuda_intrinsics.h\n+--- /dev/null\n++++ b/cpp/include/raft/compat/clang_cuda_intrinsics.h\n+@@ -0,0 +1,293 @@\n++#pragma once\n++\n++#if defined(__clang__) && defined(__CUDA__) && !defined(__NVCC__) && (__clang_major__ < 21)\n++\n++#if defined(__cplusplus) && (__cplusplus >= 201103L)\n++\n++#pragma push_macro(\"__INTRINSIC_LOAD\")\n++#define __INTRINSIC_LOAD(__FnName, __AsmOp, __DeclType, __TmpType, __AsmType,  \\\n++                         __Clobber)                                            \\\n++  inline __device__ __DeclType __FnName(const __DeclType *__ptr) {             \\\n++    __TmpType __ret;                                                           \\\n++    asm(__AsmOp \" %0, [%1];\" : __AsmType(__ret) : \"l\"(__ptr)__Clobber);        \\\n++    return (__DeclType)__ret;                                                  \\\n++  }\n++\n++#pragma push_macro(\"__INTRINSIC_LOAD2\")\n++#define __INTRINSIC_LOAD2(__FnName, __AsmOp, __DeclType, __TmpType, __AsmType, \\\n++                          __Clobber)                                           \\\n++  inline __device__ __DeclType __FnName(const __DeclType *__ptr) {             \\\n++    __DeclType __ret;                                                          \\\n++    __TmpType __tmp;                                                           \\\n++    asm(__AsmOp \" {%0,%1}, [%2];\"                                              \\\n++        : __AsmType(__tmp.x), __AsmType(__tmp.y)                               \\\n++        : \"l\"(__ptr)__Clobber);                                                \\\n++    using __ElementType = decltype(__ret.x);                                   \\\n++    __ret.x = (__ElementType)(__tmp.x);                                        \\\n++    __ret.y = (__ElementType)__tmp.y;                                          \\\n++    return __ret;                                                              \\\n++  }\n++\n++#pragma push_macro(\"__INTRINSIC_LOAD4\")\n++#define __INTRINSIC_LOAD4(__FnName, __AsmOp, __DeclType, __TmpType, __AsmType, \\\n++                          __Clobber)                                           \\\n++  inline __device__ __DeclType __FnName(const __DeclType *__ptr) {             \\\n++    __DeclType __ret;                                                          \\\n++    __TmpType __tmp;                                                           \\\n++    asm(__AsmOp \" {%0,%1,%2,%3}, [%4];\"                                        \\\n++        : __AsmType(__tmp.x), __AsmType(__tmp.y), __AsmType(__tmp.z),          \\\n++          __AsmType(__tmp.w)                                                   \\\n++        : \"l\"(__ptr)__Clobber);                                                \\\n++    using __ElementType = decltype(__ret.x);                                   \\\n++    __ret.x = (__ElementType)__tmp.x;                                          \\\n++    __ret.y = (__ElementType)__tmp.y;                                          \\\n++    __ret.z = (__ElementType)__tmp.z;                                          \\\n++    __ret.w = (__ElementType)__tmp.w;                                          \\\n++    return __ret;                                                              \\\n++  }\n++\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.s8\", char, unsigned int, \"=r\", );\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.s8\", signed char, unsigned int, \"=r\", );\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.s16\", short, unsigned short, \"=h\", );\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.s32\", int, unsigned int, \"=r\", );\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.s64\", long long, unsigned long long,\n++                 \"=l\", );\n++\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.s8\", char2, int2, \"=r\", );\n++__INTRINSIC_LOAD4(__ldcg, \"ld.global.cg.v4.s8\", char4, int4, \"=r\", );\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.s16\", short2, short2, \"=h\", );\n++__INTRINSIC_LOAD4(__ldcg, \"ld.global.cg.v4.s16\", short4, short4, \"=h\", );\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.s32\", int2, int2, \"=r\", );\n++__INTRINSIC_LOAD4(__ldcg, \"ld.global.cg.v4.s32\", int4, int4, \"=r\", );\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.s64 \", longlong2, longlong2, \"=l\", );\n++\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.u8\", unsigned char, unsigned int,\n++                 \"=r\", );\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.u16\", unsigned short, unsigned short,\n++                 \"=h\", );\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.u32\", unsigned int, unsigned int,\n++                 \"=r\", );\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.u64\", unsigned long long,\n++                 unsigned long long, \"=l\", );\n++\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.u8\", uchar2, int2, \"=r\", );\n++__INTRINSIC_LOAD4(__ldcg, \"ld.global.cg.v4.u8\", uchar4, int4, \"=r\", );\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.u16\", ushort2, ushort2, \"=h\", );\n++__INTRINSIC_LOAD4(__ldcg, \"ld.global.cg.v4.u16\", ushort4, ushort4, \"=h\", );\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.u32\", uint2, uint2, \"=r\", );\n++__INTRINSIC_LOAD4(__ldcg, \"ld.global.cg.v4.u32\", uint4, uint4, \"=r\", );\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.u64\", ulonglong2, ulonglong2,\n++                  \"=l\", );\n++\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.f32\", float, float, \"=f\", );\n++__INTRINSIC_LOAD(__ldcg, \"ld.global.cg.f64\", double, double, \"=d\", );\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.f32\", float2, float2, \"=f\", );\n++__INTRINSIC_LOAD4(__ldcg, \"ld.global.cg.v4.f32\", float4, float4, \"=f\", );\n++__INTRINSIC_LOAD2(__ldcg, \"ld.global.cg.v2.f64\", double2, double2, \"=d\", );\n++\n++inline __device__ long __ldcg(const long *__ptr) {\n++  unsigned long __ret;\n++  if (sizeof(long) == 8) {\n++    asm(\"ld.global.cg.s64 %0, [%1];\" : \"=l\"(__ret) : \"l\"(__ptr));\n++  } else {\n++    asm(\"ld.global.cg.s32 %0, [%1];\" : \"=r\"(__ret) : \"l\"(__ptr));\n++  }\n++  return (long)__ret;\n++}\n++\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.u8\", unsigned char, unsigned int,\n++                 \"=r\", : \"memory\");\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.u16\", unsigned short, unsigned short,\n++                 \"=h\", : \"memory\");\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.u32\", unsigned int, unsigned int,\n++                 \"=r\", : \"memory\");\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.u64\", unsigned long long,\n++                 unsigned long long, \"=l\", : \"memory\");\n++\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.s8\", char, unsigned int,\n++                 \"=r\", : \"memory\");\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.s8\", signed char, unsigned int,\n++                 \"=r\", : \"memory\");\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.s16\", short, unsigned short,\n++                 \"=h\", : \"memory\");\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.s32\", int, unsigned int,\n++                 \"=r\", : \"memory\");\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.s64\", long long, unsigned long long,\n++                 \"=l\", : \"memory\");\n++\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.u8\", uchar2, uint2,\n++                  \"=r\", : \"memory\");\n++__INTRINSIC_LOAD4(__ldcv, \"ld.global.cv.v4.u8\", uchar4, uint4,\n++                  \"=r\", : \"memory\");\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.u16\", ushort2, ushort2,\n++                  \"=h\", : \"memory\");\n++__INTRINSIC_LOAD4(__ldcv, \"ld.global.cv.v4.u16\", ushort4, ushort4,\n++                  \"=h\", : \"memory\");\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.u32\", uint2, uint2,\n++                  \"=r\", : \"memory\");\n++__INTRINSIC_LOAD4(__ldcv, \"ld.global.cv.v4.u32\", uint4, uint4,\n++                  \"=r\", : \"memory\");\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.u64\", ulonglong2, ulonglong2,\n++                  \"=l\", : \"memory\");\n++\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.s8\", char2, int2, \"=r\", : \"memory\");\n++__INTRINSIC_LOAD4(__ldcv, \"ld.global.cv.v4.s8\", char4, int4, \"=r\", : \"memory\");\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.s16\", short2, short2,\n++                  \"=h\", : \"memory\");\n++__INTRINSIC_LOAD4(__ldcv, \"ld.global.cv.v4.s16\", short4, short4,\n++                  \"=h\", : \"memory\");\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.s32\", int2, int2, \"=r\", : \"memory\");\n++__INTRINSIC_LOAD4(__ldcv, \"ld.global.cv.v4.s32\", int4, int4, \"=r\", : \"memory\");\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.s64\", longlong2, longlong2,\n++                  \"=l\", : \"memory\");\n++\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.f32\", float, float, \"=f\", : \"memory\");\n++__INTRINSIC_LOAD(__ldcv, \"ld.global.cv.f64\", double, double, \"=d\", : \"memory\");\n++\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.f32\", float2, float2,\n++                  \"=f\", : \"memory\");\n++__INTRINSIC_LOAD4(__ldcv, \"ld.global.cv.v4.f32\", float4, float4,\n++                  \"=f\", : \"memory\");\n++__INTRINSIC_LOAD2(__ldcv, \"ld.global.cv.v2.f64\", double2, double2,\n++                  \"=d\", : \"memory\");\n++\n++inline __device__ long __ldcv(const long *__ptr) {\n++  unsigned long __ret;\n++  if (sizeof(long) == 8) {\n++    asm(\"ld.global.cv.s64 %0, [%1];\" : \"=l\"(__ret) : \"l\"(__ptr));\n++  } else {\n++    asm(\"ld.global.cv.s32 %0, [%1];\" : \"=r\"(__ret) : \"l\"(__ptr));\n++  }\n++  return (long)__ret;\n++}\n++\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.s8\", char, unsigned int, \"=r\", );\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.s8\", signed char, signed int, \"=r\", );\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.s16\", short, unsigned short, \"=h\", );\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.s32\", int, unsigned int, \"=r\", );\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.s64\", long long, unsigned long long,\n++                 \"=l\", );\n++\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.s8\", char2, int2, \"=r\", );\n++__INTRINSIC_LOAD4(__ldcs, \"ld.global.cs.v4.s8\", char4, int4, \"=r\", );\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.s16\", short2, short2, \"=h\", );\n++__INTRINSIC_LOAD4(__ldcs, \"ld.global.cs.v4.s16\", short4, short4, \"=h\", );\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.s32\", int2, int2, \"=r\", );\n++__INTRINSIC_LOAD4(__ldcs, \"ld.global.cs.v4.s32\", int4, int4, \"=r\", );\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.s64\", longlong2, longlong2, \"=l\", );\n++\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.u8\", unsigned char, unsigned int,\n++                 \"=r\", );\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.u16\", unsigned short, unsigned short,\n++                 \"=h\", );\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.u32\", unsigned int, unsigned int,\n++                 \"=r\", );\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.u64\", unsigned long long,\n++                 unsigned long long, \"=l\", );\n++\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.u8\", uchar2, uint2, \"=r\", );\n++__INTRINSIC_LOAD4(__ldcs, \"ld.global.cs.v4.u8\", uchar4, uint4, \"=r\", );\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.u16\", ushort2, ushort2, \"=h\", );\n++__INTRINSIC_LOAD4(__ldcs, \"ld.global.cs.v4.u16\", ushort4, ushort4, \"=h\", );\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.u32\", uint2, uint2, \"=r\", );\n++__INTRINSIC_LOAD4(__ldcs, \"ld.global.cs.v4.u32\", uint4, uint4, \"=r\", );\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.u64\", ulonglong2, ulonglong2,\n++                  \"=l\", );\n++\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.f32\", float, float, \"=f\", );\n++__INTRINSIC_LOAD(__ldcs, \"ld.global.cs.f64\", double, double, \"=d\", );\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.f32\", float2, float2, \"=f\", );\n++__INTRINSIC_LOAD4(__ldcs, \"ld.global.cs.v4.f32\", float4, float4, \"=f\", );\n++__INTRINSIC_LOAD2(__ldcs, \"ld.global.cs.v2.f64\", double2, double2, \"=d\", );\n++\n++#pragma pop_macro(\"__INTRINSIC_LOAD\")\n++#pragma pop_macro(\"__INTRINSIC_LOAD2\")\n++#pragma pop_macro(\"__INTRINSIC_LOAD4\")\n++\n++inline __device__ long __ldcs(const long *__ptr) {\n++  unsigned long __ret;\n++  if (sizeof(long) == 8) {\n++    asm(\"ld.global.cs.s64 %0, [%1];\" : \"=l\"(__ret) : \"l\"(__ptr));\n++  } else {\n++    asm(\"ld.global.cs.s32 %0, [%1];\" : \"=r\"(__ret) : \"l\"(__ptr));\n++  }\n++  return (long)__ret;\n++}\n++\n++#pragma push_macro(\"__INTRINSIC_STORE\")\n++#define __INTRINSIC_STORE(__FnName, __AsmOp, __DeclType, __TmpType, __AsmType) \\\n++  inline __device__ void __FnName(__DeclType *__ptr, __DeclType __value) {     \\\n++    __TmpType __tmp = (__TmpType)__value;                                      \\\n++    asm(__AsmOp \" [%0], %1;\" ::\"l\"(__ptr), __AsmType(__tmp) : \"memory\");       \\\n++  }\n++\n++#pragma push_macro(\"__INTRINSIC_STORE2\")\n++#define __INTRINSIC_STORE2(__FnName, __AsmOp, __DeclType, __TmpType,           \\\n++                           __AsmType)                                          \\\n++  inline __device__ void __FnName(__DeclType *__ptr, __DeclType __value) {     \\\n++    __TmpType __tmp;                                                           \\\n++    using __ElementType = decltype(__tmp.x);                                   \\\n++    __tmp.x = (__ElementType)(__value.x);                                      \\\n++    __tmp.y = (__ElementType)(__value.y);                                      \\\n++    asm(__AsmOp \" [%0], {%1,%2};\" ::\"l\"(__ptr), __AsmType(__tmp.x),            \\\n++        __AsmType(__tmp.y)                                                     \\\n++        : \"memory\");                                                           \\\n++  }\n++\n++#pragma push_macro(\"__INTRINSIC_STORE4\")\n++#define __INTRINSIC_STORE4(__FnName, __AsmOp, __DeclType, __TmpType,           \\\n++                           __AsmType)                                          \\\n++  inline __device__ void __FnName(__DeclType *__ptr, __DeclType __value) {     \\\n++    __TmpType __tmp;                                                           \\\n++    using __ElementType = decltype(__tmp.x);                                   \\\n++    __tmp.x = (__ElementType)(__value.x);                                      \\\n++    __tmp.y = (__ElementType)(__value.y);                                      \\\n++    __tmp.z = (__ElementType)(__value.z);                                      \\\n++    __tmp.w = (__ElementType)(__value.w);                                      \\\n++    asm(__AsmOp \" [%0], {%1,%2,%3,%4};\" ::\"l\"(__ptr), __AsmType(__tmp.x),      \\\n++        __AsmType(__tmp.y), __AsmType(__tmp.z), __AsmType(__tmp.w)             \\\n++        : \"memory\");                                                           \\\n++  }\n++\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.s8\", char, int, \"r\");\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.s8\", signed char, int, \"r\");\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.s16\", short, short, \"h\");\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.s32\", int, int, \"r\");\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.s64\", long long, long long, \"l\");\n++\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.s8\", char2, int2, \"r\");\n++__INTRINSIC_STORE4(__stwt, \"st.global.wt.v4.s8\", char4, int4, \"r\");\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.s16\", short2, short2, \"h\");\n++__INTRINSIC_STORE4(__stwt, \"st.global.wt.v4.s16\", short4, short4, \"h\");\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.s32\", int2, int2, \"r\");\n++__INTRINSIC_STORE4(__stwt, \"st.global.wt.v4.s32\", int4, int4, \"r\");\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.s64\", longlong2, longlong2, \"l\");\n++\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.u8\", unsigned char, int, \"r\");\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.u16\", unsigned short, unsigned short,\n++                  \"h\");\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.u32\", unsigned int, unsigned int, \"r\");\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.u64\", unsigned long long,\n++                  unsigned long long, \"l\");\n++\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.u8\", uchar2, uchar2, \"r\");\n++__INTRINSIC_STORE4(__stwt, \"st.global.wt.v4.u8\", uchar4, uint4, \"r\");\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.u16\", ushort2, ushort2, \"h\");\n++__INTRINSIC_STORE4(__stwt, \"st.global.wt.v4.u16\", ushort4, ushort4, \"h\");\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.u32\", uint2, uint2, \"r\");\n++__INTRINSIC_STORE4(__stwt, \"st.global.wt.v4.u32\", uint4, uint4, \"r\");\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.u64\", ulonglong2, ulonglong2, \"l\");\n++\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.f32\", float, float, \"f\");\n++__INTRINSIC_STORE(__stwt, \"st.global.wt.f64\", double, double, \"d\");\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.f32\", float2, float2, \"f\");\n++__INTRINSIC_STORE4(__stwt, \"st.global.wt.v4.f32\", float4, float4, \"f\");\n++__INTRINSIC_STORE2(__stwt, \"st.global.wt.v2.f64\", double2, double2, \"d\");\n++\n++#pragma pop_macro(\"__INTRINSIC_STORE\")\n++#pragma pop_macro(\"__INTRINSIC_STORE2\")\n++#pragma pop_macro(\"__INTRINSIC_STORE4\")\n++\n++#endif // defined(__cplusplus) && (__cplusplus >= 201103L)\n++\n++#endif  // clang < 21\n+diff --git a/cpp/include/raft/matrix/detail/select_warpsort.cuh b/cpp/include/raft/matrix/detail/select_warpsort.cuh\n+--- a/cpp/include/raft/matrix/detail/select_warpsort.cuh\n++++ b/cpp/include/raft/matrix/detail/select_warpsort.cuh\n+@@ -16,6 +16,7 @@\n+ \n+ #pragma once\n+ \n++#include <raft/compat/clang_cuda_intrinsics.h>\n+ #include <raft/core/detail/macros.hpp>\n+ #include <raft/core/logger.hpp>\n+ #include <raft/core/resource/cuda_stream.hpp>"
        },
        {
            "sha": "b901d0595e86391b34201d607245f8580890f90a",
            "filename": "third_party/xla/third_party/raft/raft.BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f07b012e4897900804d4ec1ff757d9effda57314/third_party%2Fxla%2Fthird_party%2Fraft%2Fraft.BUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f07b012e4897900804d4ec1ff757d9effda57314/third_party%2Fxla%2Fthird_party%2Fraft%2Fraft.BUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fraft%2Fraft.BUILD?ref=f07b012e4897900804d4ec1ff757d9effda57314",
            "patch": "@@ -28,6 +28,7 @@ cuda_library(\n         \"cpp/include/**/*.hpp\",\n         \"cpp/internal/**/*.cuh\",\n     ]) + [\n+        \"cpp/include/raft/compat/clang_cuda_intrinsics.h\",\n         \"cpp/include/raft/thirdparty/mdspan/include/experimental/mdarray\",\n         \"cpp/include/raft/thirdparty/mdspan/include/experimental/mdspan\",\n     ],"
        },
        {
            "sha": "da7f8dd67af4753f55c6d95c71d7e697e01055fb",
            "filename": "third_party/xla/third_party/raft/workspace.bzl",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f07b012e4897900804d4ec1ff757d9effda57314/third_party%2Fxla%2Fthird_party%2Fraft%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f07b012e4897900804d4ec1ff757d9effda57314/third_party%2Fxla%2Fthird_party%2Fraft%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fraft%2Fworkspace.bzl?ref=f07b012e4897900804d4ec1ff757d9effda57314",
            "patch": "@@ -17,6 +17,7 @@ def repo():\n         patch_file = [\n             \"//third_party/raft:cudart_utils.hpp.patch\",\n             \"//third_party/raft:vectorized.cuh.patch\",\n+            \"//third_party/raft:clang_cuda_intrinsics.h.patch\",\n             \"//third_party/raft:logger_macros.hpp.patch\",\n             \"//third_party/raft:select_k_runner.hpp.patch\",\n             \"//third_party/raft:select_k_runner.cu.cc.patch\","
        }
    ],
    "stats": {
        "total": 310,
        "additions": 310,
        "deletions": 0
    }
}