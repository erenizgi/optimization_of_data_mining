{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 809685313",
    "sha": "d95e8258d742782b6bebbe321968bae2fd5245a2",
    "files": [
        {
            "sha": "8232f9e43134b44fdc7f0b849b178cc02990b354",
            "filename": "tensorflow/core/tfrt/ifrt/ifrt_executable_registry.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_executable_registry.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_executable_registry.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_executable_registry.cc?ref=d95e8258d742782b6bebbe321968bae2fd5245a2",
            "patch": "@@ -53,7 +53,7 @@ absl::Status ServingExecutableRegistry::Handle::Freeze() {\n     return absl::FailedPreconditionError(\"Program is not registered\");\n   }\n \n-  absl::MutexLock l(&ServingExecutableRegistry::mu_);\n+  absl::MutexLock l(ServingExecutableRegistry::mu_);\n \n   const auto it = ServingExecutableRegistry::executables_->find(*program_id_);\n   if (it == ServingExecutableRegistry::executables_->end()) {\n@@ -74,7 +74,7 @@ void ServingExecutableRegistry::Handle::Release() {\n     return;\n   }\n \n-  absl::MutexLock l(&ServingExecutableRegistry::mu_);\n+  absl::MutexLock l(ServingExecutableRegistry::mu_);\n \n   const auto it = ServingExecutableRegistry::executables_->find(*program_id_);\n   if (it == ServingExecutableRegistry::executables_->end()) {\n@@ -96,7 +96,7 @@ ServingExecutableRegistry::Handle::Handle(int64_t program_id)\n absl::StatusOr<ServingExecutableRegistry::Handle>\n ServingExecutableRegistry::Register(\n     int64_t program_id, std::unique_ptr<IfrtServingExecutable> executable) {\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   VLOG(1) << \"Registering program \" << program_id << \" from signature '\"\n           << executable->signature_name() << \"' of model '\"\n           << executable->model_name() << \"'\"\n@@ -109,7 +109,7 @@ ServingExecutableRegistry::Register(\n }\n \n IfrtServingExecutable* ServingExecutableRegistry::Lookup(int64_t program_id) {\n-  absl::ReaderMutexLock l(&mu_);\n+  absl::ReaderMutexLock l(mu_);\n   VLOG(1) << \"Looking up program \" << program_id;\n   const auto it = executables_->find(program_id);\n   return it != executables_->end() ? it->second.get() : nullptr;"
        },
        {
            "sha": "559ef04e227e5de90c0245399138eb210d656008",
            "filename": "tensorflow/core/tfrt/ifrt/ifrt_loaded_variable_registry.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_loaded_variable_registry.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_loaded_variable_registry.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_loaded_variable_registry.cc?ref=d95e8258d742782b6bebbe321968bae2fd5245a2",
            "patch": "@@ -30,7 +30,7 @@ namespace ifrt_serving {\n \n absl::Status IfrtLoadedVariableRegistry::TryRegisterLoadedVariable(\n     const Key& key, LoadedVariableConstructor&& loaded_variable_constructor) {\n-  absl::MutexLock lock(&mutex_);\n+  absl::MutexLock lock(mutex_);\n   auto& variable = loaded_variable_map_[key];\n   if (variable.array.IsValid()) {\n     // Already registered. This is rare.\n@@ -43,7 +43,7 @@ absl::Status IfrtLoadedVariableRegistry::TryRegisterLoadedVariable(\n \n absl::StatusOr<IfrtLoadedVariableRegistry::LoadedVariable>\n IfrtLoadedVariableRegistry::GetLoadedVariable(const Key& key) const {\n-  absl::MutexLock lock(&mutex_);\n+  absl::MutexLock lock(mutex_);\n   auto it = loaded_variable_map_.find(key);\n   if (it == loaded_variable_map_.end()) {\n     return absl::NotFoundError("
        },
        {
            "sha": "ffe4509b2ede08f855cef58331d409c546b11288",
            "filename": "tensorflow/core/tfrt/ifrt/ifrt_restore_tensor_registry.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_restore_tensor_registry.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_restore_tensor_registry.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_restore_tensor_registry.cc?ref=d95e8258d742782b6bebbe321968bae2fd5245a2",
            "patch": "@@ -33,7 +33,7 @@ namespace ifrt_serving {\n \n absl::Status IfrtRestoreTensorRegistry::TryRegister(\n     absl::string_view name, RestoredTensorInfo restored_tensor_info) {\n-  absl::MutexLock lock(&mutex_);\n+  absl::MutexLock lock(mutex_);\n   auto& info = restored_tensors_[name];\n   if (info.tensor_future.IsValid()) {\n     return absl::AlreadyExistsError(\n@@ -45,7 +45,7 @@ absl::Status IfrtRestoreTensorRegistry::TryRegister(\n \n xla::ifrt::Future<tensorflow::Tensor>\n IfrtRestoreTensorRegistry::GetRestoredTensor(absl::string_view name) const {\n-  absl::MutexLock lock(&mutex_);\n+  absl::MutexLock lock(mutex_);\n   auto it = restored_tensors_.find(name);\n   if (it == restored_tensors_.end()) {\n     return xla::ifrt::Future<tensorflow::Tensor>(\n@@ -56,7 +56,7 @@ IfrtRestoreTensorRegistry::GetRestoredTensor(absl::string_view name) const {\n }\n \n absl::Status IfrtRestoreTensorRegistry::SetUsedByHost(absl::string_view name) {\n-  absl::MutexLock lock(&mutex_);\n+  absl::MutexLock lock(mutex_);\n   auto it = restored_tensors_.find(name);\n   if (it == restored_tensors_.end()) {\n     return absl::NotFoundError(\n@@ -68,7 +68,7 @@ absl::Status IfrtRestoreTensorRegistry::SetUsedByHost(absl::string_view name) {\n }\n \n void IfrtRestoreTensorRegistry::Freeze() {\n-  absl::MutexLock lock(&mutex_);\n+  absl::MutexLock lock(mutex_);\n   xla::ifrt::Future<tensorflow::Tensor> release_tensor_future(\n       absl::UnavailableError(\"Tensor is already release.\"));\n   for (auto& [name, info] : restored_tensors_) {\n@@ -82,7 +82,7 @@ void IfrtRestoreTensorRegistry::Freeze() {\n \n absl::StatusOr<DtypeAndShape> IfrtRestoreTensorRegistry::GetDtypeAndShape(\n     absl::string_view name) const {\n-  absl::MutexLock lock(&mutex_);\n+  absl::MutexLock lock(mutex_);\n   auto it = restored_tensors_.find(name);\n   if (it == restored_tensors_.end()) {\n     return absl::NotFoundError("
        },
        {
            "sha": "c106b0c1ff6688d999467f7cef60eb837a4476f9",
            "filename": "tensorflow/core/tfrt/ifrt/ifrt_serving_core_selector.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_core_selector.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_core_selector.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_core_selector.cc?ref=d95e8258d742782b6bebbe321968bae2fd5245a2",
            "patch": "@@ -30,7 +30,7 @@ IfrtServingCoreSelector::IfrtServingCoreSelector(\n \n tsl::DeviceReservation IfrtServingCoreSelector::ReserveDevice(\n     int64_t program_id) {\n-  absl::MutexLock lock(&mu_);\n+  absl::MutexLock lock(mu_);\n   int64_t run_count = run_counter_[program_id]++;\n   if (run_count < num_cores_) {\n     // If run_count is less than the number of TPU cores, we use run_count"
        },
        {
            "sha": "d580a353025a8cb044e5bd51579eac455ca69aa8",
            "filename": "tensorflow/core/tfrt/ifrt/ifrt_serving_executable.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.cc?ref=d95e8258d742782b6bebbe321968bae2fd5245a2",
            "patch": "@@ -583,7 +583,7 @@ IfrtServingExecutable::LookUpOrCreateExecutable(\n   xla::ifrt::Future<SharedCachedExecutableBundle> future;\n   mlir::OwningOpRef<mlir::ModuleOp> module_copy;\n   {\n-    absl::MutexLock lock(&mutex_);\n+    absl::MutexLock lock(mutex_);\n \n     const auto it = executable_bundles_.find(key);\n     if (it != executable_bundles_.end()) {\n@@ -618,7 +618,7 @@ IfrtServingExecutable::LookUpOrCreateExecutable(\n \n void IfrtServingExecutable::Freeze() {\n   LOG(INFO) << \"Freezing executable. Program id: \" << program_id_;\n-  absl::MutexLock lock(&mutex_);\n+  absl::MutexLock lock(mutex_);\n   is_frozen_ = true;\n   module_ = nullptr;\n }\n@@ -703,7 +703,7 @@ absl::StatusOr<std::vector<tensorflow::Tensor>> IfrtServingExecutable::Execute(\n \n   {\n     tsl::profiler::TraceMe traceme(\"AsyncRestoreVariables\");\n-    absl::ReaderMutexLock lock(&mutex_);\n+    absl::ReaderMutexLock lock(mutex_);\n     if (!is_frozen_) {\n       // Asynchronously load the restored variable tensors to Ifrt array.\n       TF_RETURN_IF_ERROR(AsyncLoadIfrtArray(inputs, variable_arg_indices,"
        },
        {
            "sha": "2645cf9153beb529ab483e04c1e56d4e1c42e506",
            "filename": "tensorflow/core/tfrt/ifrt/ifrt_serving_executable.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d95e8258d742782b6bebbe321968bae2fd5245a2/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_serving_executable.h?ref=d95e8258d742782b6bebbe321968bae2fd5245a2",
            "patch": "@@ -103,7 +103,7 @@ class IfrtServingExecutable {\n   void Freeze();\n \n   int num_executables() const {\n-    absl::MutexLock lock(&mutex_);\n+    absl::MutexLock lock(mutex_);\n     return executable_bundles_.size();\n   }\n "
        }
    ],
    "stats": {
        "total": 32,
        "additions": 16,
        "deletions": 16
    }
}