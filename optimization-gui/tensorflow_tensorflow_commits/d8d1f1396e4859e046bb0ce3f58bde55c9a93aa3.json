{
    "author": "jparkerh",
    "message": "remove third_party/tensorflow/core/distributed_runtime dep from TPU plugin\n\nPathways has a build rule that disallows dependencies from this path. There is a replacement rule available in TSL. Swap the deps.\n\nPiperOrigin-RevId: 809169031",
    "sha": "d8d1f1396e4859e046bb0ce3f58bde55c9a93aa3",
    "files": [
        {
            "sha": "394e1065dbfdc82f2129be84fca913cec492b67e",
            "filename": "tensorflow/core/tpu/kernels/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d8d1f1396e4859e046bb0ce3f58bde55c9a93aa3/tensorflow%2Fcore%2Ftpu%2Fkernels%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d8d1f1396e4859e046bb0ce3f58bde55c9a93aa3/tensorflow%2Fcore%2Ftpu%2Fkernels%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftpu%2Fkernels%2FBUILD?ref=d8d1f1396e4859e046bb0ce3f58bde55c9a93aa3",
            "patch": "@@ -819,10 +819,10 @@ cc_library(\n         \":tpu_compilation_cache_grpc\",\n         \":tpu_compilation_cache_interface\",\n         \":tpu_compilation_cache_rpc_support_hdrs\",\n-        \"//tensorflow/core/distributed_runtime/rpc:grpc_util\",\n         \"//tensorflow/core/lib/core:threadpool\",\n         \"//tensorflow/core/platform:coding\",\n         \"@local_xla//xla/tsl/distributed_runtime/rpc:grpc_call\",\n+        \"@local_xla//xla/tsl/distributed_runtime/rpc:grpc_util\",\n     ] + tf_grpc_cc_dependencies(),\n )\n "
        },
        {
            "sha": "9354f4a3e82d48d65e2b4a7aa3b7dd3ae1cfa785",
            "filename": "tensorflow/core/tpu/kernels/tpu_compilation_cache_service.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d8d1f1396e4859e046bb0ce3f58bde55c9a93aa3/tensorflow%2Fcore%2Ftpu%2Fkernels%2Ftpu_compilation_cache_service.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d8d1f1396e4859e046bb0ce3f58bde55c9a93aa3/tensorflow%2Fcore%2Ftpu%2Fkernels%2Ftpu_compilation_cache_service.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftpu%2Fkernels%2Ftpu_compilation_cache_service.cc?ref=d8d1f1396e4859e046bb0ce3f58bde55c9a93aa3",
            "patch": "@@ -19,7 +19,7 @@ limitations under the License.\n #include <vector>\n \n #include \"grpcpp/support/byte_buffer.h\"\n-#include \"tensorflow/core/distributed_runtime/rpc/grpc_util.h\"\n+#include \"xla/tsl/distributed_runtime/rpc/grpc_util.h\"\n #include \"tensorflow/core/platform/coding.h\"\n #include \"tensorflow/core/tpu/kernels/tpu_compilation_cache_rpc_support.h\"\n \n@@ -109,7 +109,7 @@ void TpuCompilationCacheService::GetTpuProgram(GetTpuProgramCall* call) {\n       break;\n   }\n   if (!s.ok()) {\n-    return call->SendResponse(ToGrpcStatus(s));\n+    return call->SendResponse(tsl::ToGrpcStatus(s));\n   }\n \n   s = entry->ToSubEntryRef(call->request.fetch_target());\n@@ -134,7 +134,7 @@ void TpuCompilationCacheService::GetTpuProgram(GetTpuProgramCall* call) {\n       tpu::SerializeCacheEntryToBufferSlices(cache_entry);\n \n   if (!buffer_slices.ok()) {\n-    return call->SendResponse(ToGrpcStatus(buffer_slices.status()));\n+    return call->SendResponse(tsl::ToGrpcStatus(buffer_slices.status()));\n   }\n \n   call->response ="
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}