{
    "author": "ezhulenev",
    "message": "[xla] Migrate to PjRtFuture<>::MakePromise() API\n\nPiperOrigin-RevId: 805973205",
    "sha": "523aa08e6786131b746ddd78bb94d25f6da7fe9b",
    "files": [
        {
            "sha": "db7e5b547d6b2d0f40ff0b1d80a449b426fcedd5",
            "filename": "tensorflow/core/tfrt/ifrt/ifrt_restore_tensor_registry_test.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 12,
            "changes": 20,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/523aa08e6786131b746ddd78bb94d25f6da7fe9b/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_restore_tensor_registry_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/523aa08e6786131b746ddd78bb94d25f6da7fe9b/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_restore_tensor_registry_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Fifrt%2Fifrt_restore_tensor_registry_test.cc?ref=523aa08e6786131b746ddd78bb94d25f6da7fe9b",
            "patch": "@@ -56,8 +56,7 @@ TEST(IfrtRestoreTensorRegistryTest, SetNonExistedTensorAsUsedByHostFails) {\n TEST(IfrtRestoreTensorRegistryTest, RegisteredExistedTensorFails) {\n   auto input_tensor =\n       test::AsTensor<int32_t>({1, 2, 3, 4}, tensorflow::TensorShape({2, 2}));\n-  auto promise = xla::ifrt::Future<tensorflow::Tensor>::CreatePromise();\n-  auto future = xla::ifrt::Future<tensorflow::Tensor>(promise);\n+  auto [promise, future] = xla::ifrt::Future<tensorflow::Tensor>::MakePromise();\n \n   IfrtRestoreTensorRegistry::RestoredTensorInfo restored_tensor_info = {\n       .used_by_host = false,\n@@ -76,8 +75,7 @@ TEST(IfrtRestoreTensorRegistryTest, RegisteredExistedTensorFails) {\n }\n \n TEST(IfrtRestoreTensorRegistryTest, SetTensorAsUsedByHost) {\n-  auto promise = xla::ifrt::Future<tensorflow::Tensor>::CreatePromise();\n-  auto future = xla::ifrt::Future<tensorflow::Tensor>(promise);\n+  auto [promise, future] = xla::ifrt::Future<tensorflow::Tensor>::MakePromise();\n   IfrtRestoreTensorRegistry::RestoredTensorInfo restored_tensor_info = {\n       .used_by_host = false,\n       .dtype_and_shape =\n@@ -95,8 +93,7 @@ TEST(IfrtRestoreTensorRegistryTest, SetTensorAsUsedByHost) {\n TEST(IfrtRestoreTensorRegistryTest, RegisteredTensorCanBeRetrieved) {\n   auto input_tensor =\n       test::AsTensor<int32_t>({1, 2, 3, 4}, tensorflow::TensorShape({2, 2}));\n-  auto promise = xla::ifrt::Future<tensorflow::Tensor>::CreatePromise();\n-  auto future = xla::ifrt::Future<tensorflow::Tensor>(promise);\n+  auto [promise, future] = xla::ifrt::Future<tensorflow::Tensor>::MakePromise();\n \n   IfrtRestoreTensorRegistry::RestoredTensorInfo restored_tensor_info = {\n       .used_by_host = false,\n@@ -124,8 +121,7 @@ TEST(IfrtRestoreTensorRegistryTest,\n      RegisteredTensorDTypeAndShapeCanBeRetrieved) {\n   auto input_tensor =\n       test::AsTensor<int32_t>({1, 2, 3, 4}, tensorflow::TensorShape({2, 2}));\n-  auto promise = xla::ifrt::Future<tensorflow::Tensor>::CreatePromise();\n-  auto future = xla::ifrt::Future<tensorflow::Tensor>(promise);\n+  auto [promise, future] = xla::ifrt::Future<tensorflow::Tensor>::MakePromise();\n \n   IfrtRestoreTensorRegistry::RestoredTensorInfo restored_tensor_info = {\n       .used_by_host = false,\n@@ -148,10 +144,10 @@ TEST(IfrtRestoreTensorRegistryTest,\n TEST(IfrtRestoreTensorRegistryTest, FeezeTensorRegistry) {\n   auto input_tensor =\n       test::AsTensor<int32_t>({1, 2, 3, 4}, tensorflow::TensorShape({2, 2}));\n-  auto promise1 = xla::ifrt::Future<tensorflow::Tensor>::CreatePromise();\n-  auto future1 = xla::ifrt::Future<tensorflow::Tensor>(promise1);\n-  auto promise2 = xla::ifrt::Future<tensorflow::Tensor>::CreatePromise();\n-  auto future2 = xla::ifrt::Future<tensorflow::Tensor>(promise2);\n+  auto [promise1, future1] =\n+      xla::ifrt::Future<tensorflow::Tensor>::MakePromise();\n+  auto [promise2, future2] =\n+      xla::ifrt::Future<tensorflow::Tensor>::MakePromise();\n \n   IfrtRestoreTensorRegistry::RestoredTensorInfo restored_tensor_info1 = {\n       .used_by_host = false,"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 8,
        "deletions": 12
    }
}