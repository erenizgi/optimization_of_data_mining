{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 845650533",
    "sha": "e9333c03e800c9ff451f01e1743b8fa0aa29c9bc",
    "files": [
        {
            "sha": "43ce77e155b57f70d65ee2b0e2dba61dd2c5106b",
            "filename": "third_party/xla/xla/stream_executor/tpu/c_api_conversions.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e9333c03e800c9ff451f01e1743b8fa0aa29c9bc/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e9333c03e800c9ff451f01e1743b8fa0aa29c9bc/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.cc?ref=e9333c03e800c9ff451f01e1743b8fa0aa29c9bc",
            "patch": "@@ -183,9 +183,10 @@ xla::MaybeOwningDeviceAddress FromC(\n     SE_MaybeOwningDeviceAddress* se_mem,\n     stream_executor::DeviceAddressAllocator* allocator) {\n   if (se_mem->owned) {\n-    return xla::MaybeOwningDeviceAddress(stream_executor::OwningDeviceAddress(\n-        ApiConverter::FromC(se_mem->memory), se_mem->device_ordinal,\n-        allocator));\n+    return xla::MaybeOwningDeviceAddress(\n+        stream_executor::ScopedDeviceAddress<uint8_t>(\n+            ApiConverter::FromC(se_mem->memory), se_mem->device_ordinal,\n+            allocator));\n   } else {\n     return xla::MaybeOwningDeviceAddress(ApiConverter::FromC(se_mem->memory));\n   }\n@@ -243,7 +244,8 @@ stream_executor::DeviceAddressAllocator* FromC(\n       c_allocator.ctx);\n }\n \n-SE_MaybeOwningDeviceAddress ToC(stream_executor::OwningDeviceAddress* mem) {\n+SE_MaybeOwningDeviceAddress ToC(\n+    stream_executor::ScopedDeviceAddress<uint8_t>* mem) {\n   SE_MaybeOwningDeviceAddress se_mem;\n   se_mem.device_ordinal = mem->device_ordinal();\n   se_mem.memory = ApiConverter::ToC(mem->Release());"
        },
        {
            "sha": "1ce5c3121f4cca26e7c6b3c62192b91e22c1bd4d",
            "filename": "third_party/xla/xla/stream_executor/tpu/c_api_conversions.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e9333c03e800c9ff451f01e1743b8fa0aa29c9bc/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e9333c03e800c9ff451f01e1743b8fa0aa29c9bc/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.h?ref=e9333c03e800c9ff451f01e1743b8fa0aa29c9bc",
            "patch": "@@ -128,7 +128,8 @@ stream_executor::DeviceAddressAllocator* FromC(\n     const SE_DeviceAddressAllocator& c_allocator);\n \n // OwningDeviceAddress\n-SE_MaybeOwningDeviceAddress ToC(stream_executor::OwningDeviceAddress* mem);\n+SE_MaybeOwningDeviceAddress ToC(\n+    stream_executor::ScopedDeviceAddress<uint8_t>* mem);\n // mem.HasOwnership() may be true if the buffer is aliased and shouldn't be\n // released. 'aliased' should be true in this case. 'aliased' has no effect if\n // 'mem' is unowned."
        },
        {
            "sha": "4ae63ada43c19cec7b644e8d73c66fa1e334abff",
            "filename": "third_party/xla/xla/stream_executor/tpu/noncopyable_buffer.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e9333c03e800c9ff451f01e1743b8fa0aa29c9bc/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fnoncopyable_buffer.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e9333c03e800c9ff451f01e1743b8fa0aa29c9bc/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fnoncopyable_buffer.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fnoncopyable_buffer.h?ref=e9333c03e800c9ff451f01e1743b8fa0aa29c9bc",
            "patch": "@@ -141,9 +141,9 @@ class NoncopyableBuffer {\n   }\n \n   static OwnedDataPtr AlignedAlloc(size_t size, size_t alignment) {\n-    return OwnedDataPtr(\n-        static_cast<uint8_t*>(tsl::port::AlignedMalloc(size, alignment)),\n-        tsl::port::AlignedFree);\n+    return OwnedDataPtr(static_cast<uint8_t*>(tsl::port::AlignedMalloc(\n+                            size, static_cast<std::align_val_t>(alignment))),\n+                        tsl::port::AlignedFree);\n   }\n \n  private:"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 11,
        "deletions": 8
    }
}