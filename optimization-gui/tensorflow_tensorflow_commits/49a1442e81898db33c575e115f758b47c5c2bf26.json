{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 845619279",
    "sha": "49a1442e81898db33c575e115f758b47c5c2bf26",
    "files": [
        {
            "sha": "c25cd3f1bea3dc2cbe4b0611a6f7398b746aee70",
            "filename": "third_party/xla/xla/tsl/lib/random/philox_random_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fphilox_random_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fphilox_random_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fphilox_random_test.cc?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -50,15 +50,15 @@ TEST(PhiloxRandomTest, SkipMatchTest) {\n   constexpr int count = 1024;\n   constexpr int skip_count = 2048;\n \n-  uint64 test_seed = GetTestSeed();\n-  std::vector<uint32> v1(count);\n+  uint64_t test_seed = GetTestSeed();\n+  std::vector<uint32_t> v1(count);\n   {\n     PhiloxRandom gen(test_seed);\n     gen.Skip(skip_count / 4);\n     FillRandoms<TrivialPhiloxDistribution>(gen, &v1[0], v1.size());\n   }\n \n-  std::vector<uint32> v2(count + skip_count);\n+  std::vector<uint32_t> v2(count + skip_count);\n   {\n     PhiloxRandom gen(test_seed);\n     FillRandoms<TrivialPhiloxDistribution>(gen, &v2[0], v2.size());"
        },
        {
            "sha": "dce28404322b955a08805253fe7c28c332c5f90b",
            "filename": "third_party/xla/xla/tsl/lib/random/philox_random_test_utils.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fphilox_random_test_utils.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fphilox_random_test_utils.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fphilox_random_test_utils.h?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -26,7 +26,7 @@ namespace tsl {\n namespace random {\n \n // Return a random seed.\n-inline uint64 GetTestSeed() { return New64(); }\n+inline uint64_t GetTestSeed() { return New64(); }\n \n // A utility function to fill the given array with samples from the given\n // distribution."
        },
        {
            "sha": "46763c7c63196c59b4f869d64af5b72adb8ccecd",
            "filename": "third_party/xla/xla/tsl/lib/random/random_distributions.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions.cc?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -19,7 +19,7 @@ limitations under the License.\n namespace tsl {\n namespace random {\n template <>\n-void SingleSampleAdapter<PhiloxRandom>::SkipFromGenerator(uint64 num_skips) {\n+void SingleSampleAdapter<PhiloxRandom>::SkipFromGenerator(uint64_t num_skips) {\n   // Use the O(1) PhiloxRandom::Skip instead of the default O(N) impl.\n   generator_->Skip(num_skips);\n }"
        },
        {
            "sha": "7c77797688276f322a679727afc5be249b21bf93",
            "filename": "third_party/xla/xla/tsl/lib/random/random_distributions.h",
            "status": "modified",
            "additions": 46,
            "deletions": 42,
            "changes": 88,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions.h?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -29,9 +29,9 @@ namespace tsl {\n namespace random {\n \n // Helper function to convert a 16-bit integer to a half between [0..1).\n-PHILOX_DEVICE_INLINE Eigen::half Uint16ToHalf(uint16 x);\n+PHILOX_DEVICE_INLINE Eigen::half Uint16ToHalf(uint16_t x);\n // Helper function to convert a 16-bit integer to a bfloat16 between [0..1).\n-PHILOX_DEVICE_INLINE bfloat16 Uint16ToGfloat16(uint16 x);\n+PHILOX_DEVICE_INLINE bfloat16 Uint16ToGfloat16(uint16_t x);\n \n // Computes a + b. Requires that the result is representable in the destination\n // type and that b is not maximal (i.e. b + 1 is not 0). Notably, the addend b\n@@ -158,7 +158,7 @@ class UniformDistribution<Generator, double> {\n };\n \n template <class Generator>\n-class UniformDistribution<Generator, int32> {\n+class UniformDistribution<Generator, int32_t> {\n  public:\n   // The number of elements that will be returned.\n   static constexpr int kResultElementCount = Generator::kResultElementCount;\n@@ -167,12 +167,13 @@ class UniformDistribution<Generator, int32> {\n   // Indicate that this distribution may take variable number of samples\n   // during the runtime.\n   static constexpr bool kVariableSamplesPerOutput = false;\n-  typedef Array<int32, kResultElementCount> ResultType;\n-  typedef int32 ResultElementType;\n+  typedef Array<int32_t, kResultElementCount> ResultType;\n+  typedef int32_t ResultElementType;\n \n   // Must have lo < hi\n   UniformDistribution(int32_t lo, int32_t hi)\n-      : lo_(lo), range_(static_cast<uint32>(hi) - static_cast<uint32>(lo)) {}\n+      : lo_(lo),\n+        range_(static_cast<uint32_t>(hi) - static_cast<uint32_t>(lo)) {}\n \n   PHILOX_DEVICE_INLINE\n   ResultType operator()(Generator* gen) {\n@@ -188,8 +189,8 @@ class UniformDistribution<Generator, int32> {\n   // Note that lo_ is intentionally signed while range_ is intentionally\n   // unsigned.  This is because hi - lo can overflow signed integers if\n   // lo < 0 < hi, but always fits in unsigned.\n-  int32 lo_;\n-  uint32 range_;\n+  int32_t lo_;\n+  uint32_t range_;\n };\n \n template <class Generator>\n@@ -207,14 +208,16 @@ class UniformDistribution<Generator, int64_t> {\n \n   // Must have lo < hi\n   UniformDistribution(int64_t lo, int64_t hi)\n-      : lo_(lo), range_(static_cast<uint64>(hi) - static_cast<uint64>(lo)) {}\n+      : lo_(lo),\n+        range_(static_cast<uint64_t>(hi) - static_cast<uint64_t>(lo)) {}\n \n   PHILOX_DEVICE_INLINE\n   ResultType operator()(Generator* gen) {\n     typename Generator::ResultType sample = (*gen)();\n     ResultType result;\n     for (int i = 0; i < kResultElementCount; ++i) {\n-      auto bits = sample[2 * i] | static_cast<uint64>(sample[2 * i + 1]) << 32;\n+      auto bits = sample[2 * i] | static_cast<uint64_t>(sample[2 * i + 1])\n+                                      << 32;\n       result[i] = SignedAdd(lo_, bits % range_);\n     }\n     return result;\n@@ -225,7 +228,7 @@ class UniformDistribution<Generator, int64_t> {\n   // unsigned.  This is because hi - lo can overflow signed integers if\n   // lo < 0 < hi, but always fits in unsigned.\n   int64_t lo_;\n-  uint64 range_;\n+  uint64_t range_;\n };\n \n // Similar to `UniformDistribution`, except that instead of generating numbers\n@@ -276,24 +279,25 @@ class UniformFullIntDistribution64 {\n     typename Generator::ResultType sample = (*gen)();\n     ResultType result;\n     for (int i = 0; i < kResultElementCount; ++i) {\n-      result[i] = sample[2 * i] | static_cast<uint64>(sample[2 * i + 1]) << 32;\n+      result[i] = sample[2 * i] | static_cast<uint64_t>(sample[2 * i + 1])\n+                                      << 32;\n     }\n     return result;\n   }\n };\n \n template <typename Generator>\n-class UniformFullIntDistribution<Generator, int32>\n-    : public UniformFullIntDistribution32<Generator, int32> {};\n+class UniformFullIntDistribution<Generator, int32_t>\n+    : public UniformFullIntDistribution32<Generator, int32_t> {};\n template <typename Generator>\n-class UniformFullIntDistribution<Generator, uint32>\n-    : public UniformFullIntDistribution32<Generator, uint32> {};\n+class UniformFullIntDistribution<Generator, uint32_t>\n+    : public UniformFullIntDistribution32<Generator, uint32_t> {};\n template <typename Generator>\n class UniformFullIntDistribution<Generator, int64_t>\n     : public UniformFullIntDistribution64<Generator, int64_t> {};\n template <typename Generator>\n-class UniformFullIntDistribution<Generator, uint64>\n-    : public UniformFullIntDistribution64<Generator, uint64> {};\n+class UniformFullIntDistribution<Generator, uint64_t>\n+    : public UniformFullIntDistribution64<Generator, uint64_t> {};\n \n // A class that adapts the underlying native multiple samples to return a single\n // sample at a time.\n@@ -322,7 +326,7 @@ class SingleSampleAdapter {\n   }\n \n   PHILOX_DEVICE_INLINE\n-  void Skip(uint64 num_skips) {\n+  void Skip(uint64_t num_skips) {\n     if (!num_skips) {\n       return;\n     }\n@@ -346,7 +350,7 @@ class SingleSampleAdapter {\n   // from `generator_`. There is an O(1) implementation for PhiloxRandom\n   // in random_distributions.cc.\n   PHILOX_DEVICE_INLINE\n-  void SkipFromGenerator(uint64 num_skips) {\n+  void SkipFromGenerator(uint64_t num_skips) {\n     while (num_skips--) {\n       (*generator_)();\n     }\n@@ -372,8 +376,8 @@ template <class Generator, typename RealType>\n class NormalDistribution;\n \n PHILOX_DEVICE_INLINE\n-void BoxMullerDouble(uint32 x0, uint32 x1, uint32 x2, uint32 x3, double* d0,\n-                     double* d1);\n+void BoxMullerDouble(uint32_t x0, uint32_t x1, uint32_t x2, uint32_t x3,\n+                     double* d0, double* d1);\n \n // Exactly like the float version, except that we convert to half afterwards;\n // since we don't have half-precision sin/cos even on GPUs, there's nothing to\n@@ -527,8 +531,8 @@ class TruncatedNormalDistribution<SingleSampleGenerator, Eigen::half> {\n       // Repeatedly take samples from the normal distribution, until we have\n       // the desired number of elements that fall within the pre-defined cutoff\n       // threshold.\n-      const uint32 x0 = (*gen)();\n-      const uint32 x1 = (*gen)();\n+      const uint32_t x0 = (*gen)();\n+      const uint32_t x1 = (*gen)();\n       float f[2];\n       BoxMullerFloat(x0, x1, &f[0], &f[1]);\n \n@@ -573,8 +577,8 @@ class TruncatedNormalDistribution<SingleSampleGenerator, bfloat16> {\n       // Repeatedly take samples from the normal distribution, until we have\n       // the desired number of elements that fall within the pre-defined cutoff\n       // threshold.\n-      const uint32 x0 = (*gen)();\n-      const uint32 x1 = (*gen)();\n+      const uint32_t x0 = (*gen)();\n+      const uint32_t x1 = (*gen)();\n       float f[2];\n       BoxMullerFloat(x0, x1, &f[0], &f[1]);\n \n@@ -620,8 +624,8 @@ class TruncatedNormalDistribution<SingleSampleGenerator, float> {\n       // Repeatedly take samples from the normal distribution, until we have\n       // the desired number of elements that fall within the pre-defined cutoff\n       // threshold.\n-      const uint32 x0 = (*gen)();\n-      const uint32 x1 = (*gen)();\n+      const uint32_t x0 = (*gen)();\n+      const uint32_t x1 = (*gen)();\n       float f[2];\n       BoxMullerFloat(x0, x1, &f[0], &f[1]);\n \n@@ -664,10 +668,10 @@ class TruncatedNormalDistribution<SingleSampleGenerator, double> {\n     ResultType results;\n     int index = 0;\n     while (true) {\n-      const uint32 x0 = (*gen)();\n-      const uint32 x1 = (*gen)();\n-      const uint32 x2 = (*gen)();\n-      const uint32 x3 = (*gen)();\n+      const uint32_t x0 = (*gen)();\n+      const uint32_t x1 = (*gen)();\n+      const uint32_t x2 = (*gen)();\n+      const uint32_t x3 = (*gen)();\n       double d[2];\n       BoxMullerDouble(x0, x1, x2, x3, &d[0], &d[1]);\n \n@@ -690,8 +694,8 @@ class TruncatedNormalDistribution<SingleSampleGenerator, double> {\n // Helper function to convert four 32-bit uniform integers to two doubles\n // under the unit normal distribution.\n PHILOX_DEVICE_INLINE\n-void BoxMullerDouble(uint32 x0, uint32 x1, uint32 x2, uint32 x3, double* d0,\n-                     double* d1) {\n+void BoxMullerDouble(uint32_t x0, uint32_t x1, uint32_t x2, uint32_t x3,\n+                     double* d0, double* d1) {\n   // This function implements the Box-Muller transform:\n   // http://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform#Basic_form\n   // Do not send a really small number to log().\n@@ -714,33 +718,33 @@ void BoxMullerDouble(uint32 x0, uint32 x1, uint32 x2, uint32 x3, double* d0,\n }\n \n // Helper function to convert an 16-bit integer to a half between [0..1).\n-PHILOX_DEVICE_INLINE Eigen::half Uint16ToHalf(uint16 x) {\n+PHILOX_DEVICE_INLINE Eigen::half Uint16ToHalf(uint16_t x) {\n   // IEEE754 halfs are formatted as follows (MSB first):\n   //    sign(1) exponent(5) mantissa(10)\n   // Conceptually construct the following:\n   //    sign == 0\n   //    exponent == 15  -- an excess 15 representation of a zero exponent\n   //    mantissa == 10 random bits\n-  const uint16 man = x & 0x3ffu;  // 10 bit mantissa\n-  const uint16 exp = static_cast<uint16>(15);\n-  const uint16 val = (exp << 10) | man;\n+  const uint16_t man = x & 0x3ffu;  // 10 bit mantissa\n+  const uint16_t exp = static_cast<uint16_t>(15);\n+  const uint16_t val = (exp << 10) | man;\n \n   Eigen::half result = Eigen::numext::bit_cast<Eigen::half>(val);\n   return result - Eigen::half(1.0);\n }\n \n // Helper function to convert an 16-bit integer to a bfloat16 between [0..1).\n // This can create a uniform distribution of values between [0..1).\n-PHILOX_DEVICE_INLINE bfloat16 Uint16ToGfloat16(uint16 x) {\n+PHILOX_DEVICE_INLINE bfloat16 Uint16ToGfloat16(uint16_t x) {\n   // bfloat are formatted as follows (MSB first):\n   //    sign(1) exponent(8) mantissa(7)\n   // Conceptually construct the following:\n   //    sign == 0\n   //    exponent == 127  -- an excess 127 representation of a zero exponent\n   //    mantissa == 7 random bits\n-  const uint16 man = x & 0x7fu;  // 7 bit mantissa\n-  const uint16 exp = static_cast<uint16>(127);\n-  const uint16 val = (exp << 7) | man;\n+  const uint16_t man = x & 0x7fu;  // 7 bit mantissa\n+  const uint16_t exp = static_cast<uint16_t>(127);\n+  const uint16_t val = (exp << 7) | man;\n \n   bfloat16 result;\n   memcpy(&result, &val, sizeof(val));"
        },
        {
            "sha": "4b69232418e05b29ba26bdfb142c5a443ac0e305",
            "filename": "third_party/xla/xla/tsl/lib/random/random_distributions_test.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions_test.cc?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -151,7 +151,7 @@ void UniformMomentsTest(int count, int max_moments,\n   auto uniform_moments = [](int n) -> double { return 1. / (n + 1); };\n \n   std::vector<T> v1(count);\n-  uint64 seed = GetTestSeed();\n+  uint64_t seed = GetTestSeed();\n   PhiloxRandom gen(seed);\n   FillRandoms<UniformDistribution<PhiloxRandom, T> >(gen, &v1[0], v1.size());\n   for (int stride : strides) {\n@@ -181,7 +181,7 @@ void NormalMomentsTest(int count, int max_moments,\n   };\n \n   std::vector<T> v1(count);\n-  uint64 seed = GetTestSeed();\n+  uint64_t seed = GetTestSeed();\n   PhiloxRandom gen(seed);\n   FillRandoms<NormalDistribution<PhiloxRandom, T> >(gen, &v1[0], v1.size());\n \n@@ -241,7 +241,7 @@ template <typename T>\n void RandomParametersMomentsTest(int count, int max_moments,\n                                  const std::vector<int>& strides, T z_limit) {\n   std::vector<T> v1(count);\n-  uint64 seed = GetTestSeed();\n+  uint64_t seed = GetTestSeed();\n   PhiloxRandom gen(seed);\n   FillRandomsWithSingles<\n       TruncatedNormalDistribution<SingleSampleAdapter<PhiloxRandom>, T> >(\n@@ -302,9 +302,9 @@ TEST(PhiloxRandomTest, RandomParametersDoubleMomentsTest) {\n \n class MockGenerator {\n  public:\n-  explicit MockGenerator(uint64 seed) : counter_(seed) {}\n-  using ResultType = std::vector<uint32>;\n-  using ResultElementType = uint32;\n+  explicit MockGenerator(uint64_t seed) : counter_(seed) {}\n+  using ResultType = std::vector<uint32_t>;\n+  using ResultElementType = uint32_t;\n   static constexpr int kResultElementCount = 1;\n   ResultType operator()() {\n     ResultType result;\n@@ -313,20 +313,20 @@ class MockGenerator {\n   }\n \n  private:\n-  uint32 counter_;\n+  uint32_t counter_;\n };\n \n template <typename T>\n void SingleSampleAdapterSkipTest() {\n-  std::vector<uint64> skips(10);\n-  std::vector<uint64> skip_afters(10);\n+  std::vector<uint64_t> skips(10);\n+  std::vector<uint64_t> skip_afters(10);\n   absl::c_iota(skips, 0);\n   absl::c_iota(skip_afters, 0);\n-  uint64 total_samples = 100;\n-  uint64 seed = GetTestSeed();\n+  uint64_t total_samples = 100;\n+  uint64_t seed = GetTestSeed();\n \n-  for (uint64 skip : skips) {\n-    for (uint64 skip_after : skip_afters) {\n+  for (uint64_t skip : skips) {\n+    for (uint64_t skip_after : skip_afters) {\n       // Baseline rngs.\n       T parent_gen(seed);\n       SingleSampleAdapter<T> gen(&parent_gen);"
        },
        {
            "sha": "81c553a7d0fcef004517ea19b1c61f4c6c395310",
            "filename": "third_party/xla/xla/tsl/lib/random/simple_philox.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox.cc?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -21,18 +21,19 @@ limitations under the License.\n namespace tsl {\n namespace random {\n \n-uint32 SimplePhilox::Uniform(uint32 n) {\n-  return ExactUniformInt<uint32>(n, [this]() { return Rand32(); });\n+uint32_t SimplePhilox::Uniform(uint32_t n) {\n+  return ExactUniformInt<uint32_t>(n, [this]() { return Rand32(); });\n }\n \n-uint64 SimplePhilox::Uniform64(uint64 n) {\n-  return ExactUniformInt<uint64>(n, [this]() { return Rand64(); });\n+uint64_t SimplePhilox::Uniform64(uint64_t n) {\n+  return ExactUniformInt<uint64_t>(n, [this]() { return Rand64(); });\n }\n \n-uint32 SimplePhilox::Skewed(int max_log) {\n+uint32_t SimplePhilox::Skewed(int max_log) {\n   CHECK(0 <= max_log && max_log <= 32);\n   const int shift = Rand32() % (max_log + 1);\n-  const uint32 mask = shift == 32 ? ~static_cast<uint32>(0) : (1 << shift) - 1;\n+  const uint32_t mask =\n+      shift == 32 ? ~static_cast<uint32_t>(0) : (1 << shift) - 1;\n   return Rand32() & mask;\n }\n "
        },
        {
            "sha": "c8b7005968b0b8c3670c01d4c84cea82cc3fc291",
            "filename": "third_party/xla/xla/tsl/lib/random/simple_philox.h",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox.h?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -34,38 +34,38 @@ class SimplePhilox {\n   explicit SimplePhilox(PhiloxRandom* gen) : single_(gen) {}\n \n   // 32 random bits\n-  PHILOX_DEVICE_INLINE uint32 Rand32() { return single_(); }\n+  PHILOX_DEVICE_INLINE uint32_t Rand32() { return single_(); }\n \n   // 64 random bits\n-  PHILOX_DEVICE_INLINE uint64 Rand64() {\n-    const uint32 lo = single_(), hi = single_();\n-    return lo | static_cast<uint64>(hi) << 32;\n+  PHILOX_DEVICE_INLINE uint64_t Rand64() {\n+    const uint32_t lo = single_(), hi = single_();\n+    return lo | static_cast<uint64_t>(hi) << 32;\n   }\n \n   // Uniform float in [0, 1)\n   PHILOX_DEVICE_INLINE float RandFloat() { return Uint32ToFloat(single_()); }\n \n   // Uniform double in [0, 1)\n   PHILOX_DEVICE_INLINE double RandDouble() {\n-    const uint32 x0 = single_(), x1 = single_();\n+    const uint32_t x0 = single_(), x1 = single_();\n     return Uint64ToDouble(x0, x1);\n   }\n \n   // Uniform integer in [0, n).\n   // Uses rejection sampling, so may need more than one 32-bit sample.\n-  uint32 Uniform(uint32 n);\n+  uint32_t Uniform(uint32_t n);\n \n   // Approximately uniform integer in [0, n).\n   // Uses rejection sampling, so may need more than one 64-bit sample.\n-  uint64 Uniform64(uint64 n);\n+  uint64_t Uniform64(uint64_t n);\n \n   // True with probability 1/n.\n-  bool OneIn(uint32 n) { return Uniform(n) == 0; }\n+  bool OneIn(uint32_t n) { return Uniform(n) == 0; }\n \n   // Skewed: pick \"base\" uniformly from range [0,max_log] and then\n   // return \"base\" random bits.  The effect is to pick a number in the\n   // range [0,2^max_log-1] with bias towards smaller numbers.\n-  uint32 Skewed(int max_log);\n+  uint32_t Skewed(int max_log);\n \n  private:\n   SingleSampleAdapter<PhiloxRandom> single_;"
        },
        {
            "sha": "4433351c295d6ff8886e5fb2872a1a1804246472",
            "filename": "third_party/xla/xla/tsl/lib/random/simple_philox_test.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fsimple_philox_test.cc?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -76,10 +76,10 @@ TEST(SimplePhiloxTest, Regression_CloseSeedsAreDifferent) {\n   PhiloxRandom philox1(0, 1), philox2(1, 1);\n   SimplePhilox gen1(&philox1), gen2(&philox2);\n \n-  std::set<uint32> first;\n-  std::set<uint32> all;\n+  std::set<uint32_t> first;\n+  std::set<uint32_t> all;\n   for (int i = 0; i < kCount; ++i) {\n-    uint32 v = gen1.Rand32();\n+    uint32_t v = gen1.Rand32();\n     first.insert(v);\n     all.insert(v);\n     all.insert(gen2.Rand32());\n@@ -96,13 +96,13 @@ TEST(SimplePhiloxTest, TestUniform) {\n   PhiloxRandom philox(17, 17);\n   SimplePhilox gen(&philox);\n \n-  uint32 range = 3 * (1L << 29);\n-  uint32 threshold = 1L << 30;\n+  uint32_t range = 3 * (1L << 29);\n+  uint32_t threshold = 1L << 30;\n \n   size_t count = 0;\n   static const int kTrials = 100000;\n   for (int i = 0; i < kTrials; ++i) {\n-    uint32 rnd = gen.Uniform(range);\n+    uint32_t rnd = gen.Uniform(range);\n     if (rnd < threshold) {\n       ++count;\n     }\n@@ -115,13 +115,13 @@ TEST(SimplePhiloxTest, TestUniform64) {\n   PhiloxRandom philox(17, 17);\n   SimplePhilox gen(&philox);\n \n-  uint64 range = 3 * (1LL << 59);\n-  uint64 threshold = 1LL << 60;\n+  uint64_t range = 3 * (1LL << 59);\n+  uint64_t threshold = 1LL << 60;\n \n   size_t count = 0;\n   static const int kTrials = 100000;\n   for (int i = 0; i < kTrials; ++i) {\n-    uint64 rnd = gen.Uniform64(range);\n+    uint64_t rnd = gen.Uniform64(range);\n     if (rnd < threshold) {\n       ++count;\n     }"
        },
        {
            "sha": "8dc3edd659c97b6a81147bf7665fcc7d0c58a680",
            "filename": "third_party/xla/xla/tsl/lib/random/weighted_picker.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker.cc?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -35,9 +35,9 @@ WeightedPicker::WeightedPicker(int N) {\n   }\n \n   // Initialize the levels\n-  level_ = new int32*[num_levels_];\n+  level_ = new int32_t*[num_levels_];\n   for (int l = 0; l < num_levels_; l++) {\n-    level_[l] = new int32[LevelSize(l)];\n+    level_[l] = new int32_t[LevelSize(l)];\n   }\n \n   SetAllWeights(1);\n@@ -50,9 +50,9 @@ WeightedPicker::~WeightedPicker() {\n   delete[] level_;\n }\n \n-static int32 UnbiasedUniform(SimplePhilox* r, int32_t n) {\n+static int32_t UnbiasedUniform(SimplePhilox* r, int32_t n) {\n   CHECK_LE(0, n);\n-  const uint32 range = ~static_cast<uint32>(0);\n+  const uint32_t range = ~static_cast<uint32_t>(0);\n   if (n == 0) {\n     return r->Rand32() * n;\n   } else if (0 == (n & (n - 1))) {\n@@ -64,8 +64,8 @@ static int32 UnbiasedUniform(SimplePhilox* r, int32_t n) {\n     // Rand32's output is uniform in the half-open interval [0, 2^{32}).\n     // For any interval [m,n), the number of elements in it is n-m.\n \n-    uint32 rem = (range % n) + 1;\n-    uint32 rnd;\n+    uint32_t rem = (range % n) + 1;\n+    uint32_t rnd;\n \n     // rem = ((2^{32}-1) \\bmod n) + 1\n     // 1 <= rem <= n\n@@ -145,19 +145,19 @@ void WeightedPicker::set_weight(int index, int32_t weight) {\n \n void WeightedPicker::SetAllWeights(int32_t weight) {\n   // Initialize leaves\n-  int32* leaves = level_[num_levels_ - 1];\n+  int32_t* leaves = level_[num_levels_ - 1];\n   for (int i = 0; i < N_; i++) leaves[i] = weight;\n   for (int i = N_; i < LevelSize(num_levels_ - 1); i++) leaves[i] = 0;\n \n   // Now sum up towards the root\n   RebuildTreeWeights();\n }\n \n-void WeightedPicker::SetWeightsFromArray(int N, const int32* weights) {\n+void WeightedPicker::SetWeightsFromArray(int N, const int32_t* weights) {\n   Resize(N);\n \n   // Initialize leaves\n-  int32* leaves = level_[num_levels_ - 1];\n+  int32_t* leaves = level_[num_levels_ - 1];\n   for (int i = 0; i < N_; i++) leaves[i] = weights[i];\n   for (int i = N_; i < LevelSize(num_levels_ - 1); i++) leaves[i] = 0;\n \n@@ -167,8 +167,8 @@ void WeightedPicker::SetWeightsFromArray(int N, const int32* weights) {\n \n void WeightedPicker::RebuildTreeWeights() {\n   for (int l = num_levels_ - 2; l >= 0; l--) {\n-    int32* level = level_[l];\n-    int32* children = level_[l + 1];\n+    int32_t* level = level_[l];\n+    int32_t* children = level_[l + 1];\n     for (int i = 0; i < LevelSize(l); i++) {\n       level[i] = children[2 * i] + children[2 * i + 1];\n     }\n@@ -202,8 +202,8 @@ void WeightedPicker::Resize(int new_size) {\n   // O(N) regardless.\n   assert(new_size > N_);\n   WeightedPicker new_picker(new_size);\n-  int32* dst = new_picker.level_[new_picker.num_levels_ - 1];\n-  int32* src = this->level_[this->num_levels_ - 1];\n+  int32_t* dst = new_picker.level_[new_picker.num_levels_ - 1];\n+  int32_t* src = this->level_[this->num_levels_ - 1];\n   memcpy(dst, src, sizeof(dst[0]) * N_);\n   memset(dst + N_, 0, sizeof(dst[0]) * (new_size - N_));\n   new_picker.RebuildTreeWeights();"
        },
        {
            "sha": "e2060f35b43eac9fe928450369c3b43c01f9474d",
            "filename": "third_party/xla/xla/tsl/lib/random/weighted_picker.h",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker.h?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -58,15 +58,15 @@ class WeightedPicker {\n \n   // Get the weight associated with an element\n   // REQUIRES 0 <= index < N\n-  int32 get_weight(int index) const;\n+  int32_t get_weight(int index) const;\n \n   // Set the weight associated with an element\n   // REQUIRES weight >= 0.0f\n   // REQUIRES 0 <= index < N\n   void set_weight(int index, int32_t weight);\n \n   // Get the total combined weight of all elements\n-  int32 total_weight() const;\n+  int32_t total_weight() const;\n \n   // Get the number of elements in the picker\n   int num_elements() const;\n@@ -78,7 +78,7 @@ class WeightedPicker {\n   // sets the weight of each element i to weight[i].\n   // The sum of the weights should not exceed 2^31 - 2\n   // Complexity O(N).\n-  void SetWeightsFromArray(int N, const int32* weights);\n+  void SetWeightsFromArray(int N, const int32_t* weights);\n \n   // REQUIRES   N >= 0\n   //\n@@ -106,7 +106,7 @@ class WeightedPicker {\n   // the sum of the weights of its children.\n   int N_;           // Number of elements\n   int num_levels_;  // Number of levels in tree (level-0 is root)\n-  int32** level_;   // Array that holds nodes per level\n+  int32_t** level_;  // Array that holds nodes per level\n \n   // Size of each level\n   static int LevelSize(int level) { return 1 << level; }\n@@ -118,13 +118,13 @@ class WeightedPicker {\n   void operator=(const WeightedPicker&) = delete;\n };\n \n-inline int32 WeightedPicker::get_weight(int index) const {\n+inline int32_t WeightedPicker::get_weight(int index) const {\n   DCHECK_GE(index, 0);\n   DCHECK_LT(index, N_);\n   return level_[num_levels_ - 1][index];\n }\n \n-inline int32 WeightedPicker::total_weight() const { return level_[0][0]; }\n+inline int32_t WeightedPicker::total_weight() const { return level_[0][0]; }\n \n inline int WeightedPicker::num_elements() const { return N_; }\n "
        },
        {
            "sha": "34b004ece20ec6403779bb887d8f33157fab4099",
            "filename": "third_party/xla/xla/tsl/lib/random/weighted_picker_test.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/49a1442e81898db33c575e115f758b47c5c2bf26/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Fweighted_picker_test.cc?ref=49a1442e81898db33c575e115f758b47c5c2bf26",
            "patch": "@@ -32,7 +32,7 @@ namespace random {\n static void TestPicker(SimplePhilox* rnd, int size);\n static void CheckUniform(SimplePhilox* rnd, WeightedPicker* picker, int trials);\n static void CheckSkewed(SimplePhilox* rnd, WeightedPicker* picker, int trials);\n-static void TestPickAt(int items, const int32* weights);\n+static void TestPickAt(int items, const int32_t* weights);\n \n TEST(WeightedPicker, Simple) {\n   PhiloxRandom philox(testing::RandomSeed(), 17);\n@@ -101,7 +101,7 @@ TEST(WeightedPicker, BigWeights) {\n \n TEST(WeightedPicker, Deterministic) {\n   VLOG(0) << \"======= Testing deterministic pick\";\n-  static const int32 weights[] = {1, 0, 200, 5, 42};\n+  static const int32_t weights[] = {1, 0, 200, 5, 42};\n   TestPickAt(TF_ARRAYSIZE(weights), weights);\n }\n \n@@ -130,7 +130,7 @@ static void TestPicker(SimplePhilox* rnd, int size) {\n   }\n \n   // Create zero weights array\n-  std::vector<int32> weights(size);\n+  std::vector<int32_t> weights(size);\n   for (int elem = 0; elem < size; elem++) {\n     weights[elem] = 0;\n   }\n@@ -221,7 +221,7 @@ static void CheckSkewed(SimplePhilox* rnd, WeightedPicker* picker, int trials) {\n   delete[] count;\n }\n \n-static void TestPickAt(int items, const int32* weights) {\n+static void TestPickAt(int items, const int32_t* weights) {\n   WeightedPicker picker(items);\n   picker.SetWeightsFromArray(items, weights);\n   int weight_index = 0;\n@@ -245,7 +245,7 @@ BENCHMARK(BM_Create)->Range(1, 1024);\n \n static void BM_CreateAndSetWeights(::testing::benchmark::State& state) {\n   int arg = state.range(0);\n-  std::vector<int32> weights(arg);\n+  std::vector<int32_t> weights(arg);\n   for (int i = 0; i < arg; i++) {\n     weights[i] = i * 10;\n   }"
        }
    ],
    "stats": {
        "total": 221,
        "additions": 113,
        "deletions": 108
    }
}