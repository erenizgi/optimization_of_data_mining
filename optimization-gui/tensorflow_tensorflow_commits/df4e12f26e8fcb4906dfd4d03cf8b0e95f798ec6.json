{
    "author": "alekstheod",
    "message": "PR #32272: Introduce rocm specific bazelrc\n\nImported from GitHub PR https://github.com/openxla/xla/pull/32272\n\nüìù Summary of Changes\nIntroduces rocm specific bazelrc which will be used by rocm ci job\nüéØ Justification\nPerparation for rbe, goal is to run all the tests with rocm config during the CI check.\n\nüöÄ Kind of Contribution\nüß™ Tests\n\nüìä Benchmark (for Performance Improvements)\nNo relevant\n\nüß™ Unit Tests:\nNot relevant\n\nüß™ Execution Tests:\nNot relevant\n\nCopybara import of the project:\n\n--\ne3136cd766e800843378a91dc6740347603dbc34 by Alexandros Theodoridis <atheodor@amd.com>:\n\nIntroduce rocm specific bazelrc\n\n--\n8b85aabc4662ef40da29281e968079741567634d by Alexandros Theodoridis <atheodor@amd.com>:\n\nAdd missing build file with platform definition\n\n--\nb342d40dc4553753a5162b51794de775b008c01e by Alexandros Theodoridis <atheodor@amd.com>:\n\nAddress review comments\n\n--\nd8adb38c0e2e86c82071da6dfb82b48b54db99c9 by Alexandros Theodoridis <atheodor@amd.com>:\n\nAdd missing licenses\n\n--\n2494208d98e96329d253f23f6bf71c6e564c4de4 by Alexandros Theodoridis <atheodor@amd.com>:\n\nRemove sandboxing\n\n--\nb6cd9a22b0ce173b5219673d005fb2268adba83f by Alexandros Theodoridis <atheodor@amd.com>:\n\nAddress review comments\n\nMerging this change closes #32272\n\nPiperOrigin-RevId: 816570607",
    "sha": "df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6",
    "files": [
        {
            "sha": "7e0085bdbc4461b9edb9b9ed0e81f5c9e28fa7fb",
            "filename": "third_party/xla/build_tools/rocm/BUILD",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6/third_party%2Fxla%2Fbuild_tools%2Frocm%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6/third_party%2Fxla%2Fbuild_tools%2Frocm%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Frocm%2FBUILD?ref=df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6",
            "patch": "@@ -0,0 +1,19 @@\n+# Copyright 2025 The OpenXLA Authors.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+# ============================================================================\n+\n+package(\n+    default_applicable_licenses = [\"//tensorflow:license\"],\n+    default_visibility = [\"//visibility:public\"],\n+)"
        },
        {
            "sha": "7e0085bdbc4461b9edb9b9ed0e81f5c9e28fa7fb",
            "filename": "third_party/xla/build_tools/rocm/platform/BUILD",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6/third_party%2Fxla%2Fbuild_tools%2Frocm%2Fplatform%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6/third_party%2Fxla%2Fbuild_tools%2Frocm%2Fplatform%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Frocm%2Fplatform%2FBUILD?ref=df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6",
            "patch": "@@ -0,0 +1,19 @@\n+# Copyright 2025 The OpenXLA Authors.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+# ============================================================================\n+\n+package(\n+    default_applicable_licenses = [\"//tensorflow:license\"],\n+    default_visibility = [\"//visibility:public\"],\n+)"
        },
        {
            "sha": "f293a81eedf438c01c9e89afde4671026fd0b535",
            "filename": "third_party/xla/build_tools/rocm/platform/linux_x64/BUILD",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6/third_party%2Fxla%2Fbuild_tools%2Frocm%2Fplatform%2Flinux_x64%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6/third_party%2Fxla%2Fbuild_tools%2Frocm%2Fplatform%2Flinux_x64%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Frocm%2Fplatform%2Flinux_x64%2FBUILD?ref=df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6",
            "patch": "@@ -0,0 +1,32 @@\n+# Copyright 2025 The OpenXLA Authors.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+# ============================================================================\n+\n+package(\n+    default_applicable_licenses = [\"//tensorflow:license\"],\n+    default_visibility = [\"//visibility:public\"],\n+)\n+\n+platform(\n+    name = \"linux_x64\",\n+    constraint_values = [\n+        \"@platforms//os:linux\",\n+        \"@platforms//cpu:x86_64\",\n+        \"@bazel_tools//tools/cpp:clang\",\n+    ],\n+    exec_properties = {\n+        \"container-image\": \"docker://rocm/tensorflow-build:latest-jammy-python3.10-rocm6.4.0@sha256:9c2fbc861570735fc86dbf39dd3cefef6a13fcf6ae08358271af52f1aebd4248\",\n+        \"OSFamily\": \"Linux\",\n+    },\n+)"
        },
        {
            "sha": "79bb6559919541179bfdcab4fc3967032acb5fb9",
            "filename": "third_party/xla/build_tools/rocm/rocm_xla.bazelrc",
            "status": "added",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6/third_party%2Fxla%2Fbuild_tools%2Frocm%2Frocm_xla.bazelrc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6/third_party%2Fxla%2Fbuild_tools%2Frocm%2Frocm_xla.bazelrc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Frocm%2Frocm_xla.bazelrc?ref=df4e12f26e8fcb4906dfd4d03cf8b0e95f798ec6",
            "patch": "@@ -0,0 +1,27 @@\n+# Test-related settings.\n+\n+build:rocm_dev --remote_upload_local_results=false\n+build:rocm_dev --remote_cache=\"https://wardite.cluster.engflow.com\"\n+\n+build:rocm_rbe --bes_backend=\"grpcs://wardite.cluster.engflow.com\"\n+build:rocm_rbe --bes_results_url=\"https://wardite.cluster.engflow.com/invocation/\"\n+build:rocm_rbe --host_platform=\"//build_tools/rocm/platform/linux_x64\"\n+build:rocm_rbe --extra_execution_platforms=\"//build_tools/rocm/platform/linux_x64\"\n+build:rocm_rbe --platforms=\"//build_tools/rocm/platform/linux_x64\"\n+build:rocm_rbe --bes_timeout=600s\n+build:rocm_rbe --tls_client_certificate=\"/tf/certificates/ci-cert.crt\"\n+build:rocm_rbe --tls_client_key=\"/tf/certificates/ci-cert.key\"\n+build:rocm_rbe --spawn_strategy=remote,local\n+\n+test:rocm_rbe --jobs=200\n+test:rocm_rbe --remote_executor=grpcs://wardite.cluster.engflow.com\n+test:rocm_rbe --remote_timeout=3600\n+test:rocm_rbe --strategy=TestRunner=remote\n+\n+build:tsan --strip=never\n+build:tsan --copt -fsanitize=thread\n+build:tsan --copt -g\n+build:tsan --copt -fno-omit-frame-pointer\n+build:tsan --linkopt -fsanitize=thread\n+build:tsan --linkopt -g\n+build:tsan --//build_tools/rocm:sanitizer=tsan"
        }
    ],
    "stats": {
        "total": 97,
        "additions": 97,
        "deletions": 0
    }
}