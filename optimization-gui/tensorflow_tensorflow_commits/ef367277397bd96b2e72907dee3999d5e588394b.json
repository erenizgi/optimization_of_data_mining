{
    "author": "mraunak",
    "message": "PR #33388: [XLA:GPU][oneAPI] Enable RBE for the ONEAPI presubmit\n\nImported from GitHub PR https://github.com/openxla/xla/pull/33388\n\nEnable RBE for the ONEAPI presubmit to leverage remote caching/parallelism.\nCopybara import of the project:\n\n--\nb31cc598ff56b211d1d52aacac1e85905b392486 by mraunak <mayank.kumar.raunak@intel.com>:\n\nAdd rbe_linux_cpu config for oneAPI\n--\ncda82d72fe8344e65f354c35a41d438092698ec1 by mraunak <mayank.kumar.raunak@intel.com>:\n\nAdd rbe_linux_cpu config for oneAPI\n--\ndac5490b96ba7621b166205c51dc0c2bd31dbd75 by mraunak <mayank.kumar.raunak@intel.com>:\n\nFix CI failures\n--\na66be104dc3767e5e18cedb9967d2f34b876f141 by mraunak <mayank.kumar.raunak@intel.com>:\n\nfix oneapi ci failure\n--\n62e9916b627235209e106053c890c13d7dcf42a7 by mraunak <mayank.kumar.raunak@intel.com>:\n\nTemp changes to test the fix\n--\n3a6345954558926b3c73c71f6aa7d9a483e086b8 by mraunak <mayank.kumar.raunak@intel.com>:\n\nTemp fix for test rbe build\n\n--\ne95457339157c940ebc466053ecfdbe5c75571d3 by mraunak <mayank.kumar.raunak@intel.com>:\n\nRevert to main\n\nMerging this change closes #33388\n\nPiperOrigin-RevId: 829734210",
    "sha": "ef367277397bd96b2e72907dee3999d5e588394b",
    "files": [
        {
            "sha": "b32c1983de5fce69a95998aa418794356ae7db23",
            "filename": "third_party/xla/build_tools/ci/build.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ef367277397bd96b2e72907dee3999d5e588394b/third_party%2Fxla%2Fbuild_tools%2Fci%2Fbuild.py",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ef367277397bd96b2e72907dee3999d5e588394b/third_party%2Fxla%2Fbuild_tools%2Fci%2Fbuild.py",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Fci%2Fbuild.py?ref=ef367277397bd96b2e72907dee3999d5e588394b",
            "patch": "@@ -377,7 +377,13 @@ def nvidia_gpu_build_with_compute_capability(\n Build(\n     type_=BuildType.XLA_LINUX_X86_GPU_ONEAPI_GITHUB_ACTIONS,\n     repo=\"openxla/xla\",\n-    configs=(\"sycl\", \"sycl_hermetic\", \"icpx_clang\"),\n+    configs=(\n+        \"nonccl\",\n+        \"rbe_linux_cpu\",\n+        \"sycl\",\n+        \"sycl_hermetic\",\n+        \"icpx_clang\",\n+    ),\n     target_patterns=_XLA_ONEAPI_TARGET_PATTERNS,\n     build_tag_filters=oneapi_build_tag_filter,\n     test_tag_filters=oneapi_test_tag_filter,"
        },
        {
            "sha": "53a7ff54de6a03040bf214527cb0a3558c6be4e8",
            "filename": "third_party/xla/build_tools/ci/golden_commands.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ef367277397bd96b2e72907dee3999d5e588394b/third_party%2Fxla%2Fbuild_tools%2Fci%2Fgolden_commands.txt",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ef367277397bd96b2e72907dee3999d5e588394b/third_party%2Fxla%2Fbuild_tools%2Fci%2Fgolden_commands.txt",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Fci%2Fgolden_commands.txt?ref=ef367277397bd96b2e72907dee3999d5e588394b",
            "patch": "@@ -92,8 +92,8 @@ bazel test --build_tag_filters=-no_oss,requires-gpu-nvidia,gpu,-rocm-only,-oneap\n bazel analyze-profile profile.json.gz\n # END BuildType.XLA_LINUX_X86_GPU_L4_GITHUB_ACTIONS\n # BEGIN BuildType.XLA_LINUX_X86_GPU_ONEAPI_GITHUB_ACTIONS\n-parallel --ungroup --retries 3 --delay 15 --nonall -- bazel build --build_tag_filters=oneapi-only,requires-gpu-intel,-requires-gpu-amd,-requires-gpu-nvidia,-no_oss,-cuda-only,-rocm-only,-no-oneapi --test_tag_filters=oneapi-only,-requires-gpu-intel,-requires-gpu-amd,-requires-gpu-nvidia,-no_oss,-cuda-only,-rocm-only,-no-oneapi --config=sycl --config=sycl_hermetic --config=icpx_clang --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --//xla/tsl:ci_build --nobuild -- //xla/stream_executor/sycl/... //xla/service/gpu/...\n-bazel build --build_tag_filters=oneapi-only,requires-gpu-intel,-requires-gpu-amd,-requires-gpu-nvidia,-no_oss,-cuda-only,-rocm-only,-no-oneapi --test_tag_filters=oneapi-only,-requires-gpu-intel,-requires-gpu-amd,-requires-gpu-nvidia,-no_oss,-cuda-only,-rocm-only,-no-oneapi --config=sycl --config=sycl_hermetic --config=icpx_clang --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --//xla/tsl:ci_build -- //xla/stream_executor/sycl/... //xla/service/gpu/...\n+parallel --ungroup --retries 3 --delay 15 --nonall -- bazel build --build_tag_filters=oneapi-only,requires-gpu-intel,-requires-gpu-amd,-requires-gpu-nvidia,-no_oss,-cuda-only,-rocm-only,-no-oneapi --test_tag_filters=oneapi-only,-requires-gpu-intel,-requires-gpu-amd,-requires-gpu-nvidia,-no_oss,-cuda-only,-rocm-only,-no-oneapi --config=nonccl --config=rbe_linux_cpu --config=sycl --config=sycl_hermetic --config=icpx_clang --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --//xla/tsl:ci_build --nobuild -- //xla/stream_executor/sycl/... //xla/service/gpu/...\n+bazel build --build_tag_filters=oneapi-only,requires-gpu-intel,-requires-gpu-amd,-requires-gpu-nvidia,-no_oss,-cuda-only,-rocm-only,-no-oneapi --test_tag_filters=oneapi-only,-requires-gpu-intel,-requires-gpu-amd,-requires-gpu-nvidia,-no_oss,-cuda-only,-rocm-only,-no-oneapi --config=nonccl --config=rbe_linux_cpu --config=sycl --config=sycl_hermetic --config=icpx_clang --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --//xla/tsl:ci_build -- //xla/stream_executor/sycl/... //xla/service/gpu/...\n bazel analyze-profile profile.json.gz\n # END BuildType.XLA_LINUX_X86_GPU_ONEAPI_GITHUB_ACTIONS\n # BEGIN BuildType.XLA_MACOS_ARM64_CPU_KOKORO"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 9,
        "deletions": 3
    }
}