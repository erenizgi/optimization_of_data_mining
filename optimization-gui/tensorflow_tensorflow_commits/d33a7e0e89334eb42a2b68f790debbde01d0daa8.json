{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 828843776",
    "sha": "d33a7e0e89334eb42a2b68f790debbde01d0daa8",
    "files": [
        {
            "sha": "0e577e3dc18217dbe2321a4045f7753e7b9ad171",
            "filename": "third_party/xla/xla/tsl/profiler/convert/post_process_single_host_xplane.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d33a7e0e89334eb42a2b68f790debbde01d0daa8/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fpost_process_single_host_xplane.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d33a7e0e89334eb42a2b68f790debbde01d0daa8/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fpost_process_single_host_xplane.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fpost_process_single_host_xplane.cc?ref=d33a7e0e89334eb42a2b68f790debbde01d0daa8",
            "patch": "@@ -94,7 +94,8 @@ void MergeHostPlanesAndSortLines(tensorflow::profiler::XSpace* space) {\n }  // namespace\n \n void PostProcessSingleHostXSpace(tensorflow::profiler::XSpace* space,\n-                                 uint64 start_time_ns, uint64 stop_time_ns) {\n+                                 uint64_t start_time_ns,\n+                                 uint64_t stop_time_ns) {\n   VLOG(3) << \"Post processing local profiler XSpace.\";\n   // Post processing the collected XSpace without hold profiler lock.\n   // 1. Merge all host planes and sorts lines by name."
        },
        {
            "sha": "1b90ed9928a930e4c95f1a13d10e0cc85a957a7d",
            "filename": "third_party/xla/xla/tsl/profiler/convert/post_process_single_host_xplane.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d33a7e0e89334eb42a2b68f790debbde01d0daa8/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fpost_process_single_host_xplane.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d33a7e0e89334eb42a2b68f790debbde01d0daa8/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fpost_process_single_host_xplane.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fpost_process_single_host_xplane.h?ref=d33a7e0e89334eb42a2b68f790debbde01d0daa8",
            "patch": "@@ -23,7 +23,7 @@ namespace profiler {\n \n // Post process XSpaces collected locally from multiple profilers.\n void PostProcessSingleHostXSpace(tensorflow::profiler::XSpace* space,\n-                                 uint64 start_time_ns, uint64 stop_time_ns);\n+                                 uint64_t start_time_ns, uint64_t stop_time_ns);\n \n }  // namespace profiler\n }  // namespace tsl"
        },
        {
            "sha": "ee31a60d03cef3fc9d99db7f5cc328b3002d9596",
            "filename": "third_party/xla/xla/tsl/profiler/convert/trace_events_to_json.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d33a7e0e89334eb42a2b68f790debbde01d0daa8/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Ftrace_events_to_json.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d33a7e0e89334eb42a2b68f790debbde01d0daa8/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Ftrace_events_to_json.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Ftrace_events_to_json.cc?ref=d33a7e0e89334eb42a2b68f790debbde01d0daa8",
            "patch": "@@ -34,7 +34,7 @@ namespace {\n \n // Converts the given time from picoseconds to microseconds and then to a string\n // using maximum precision.\n-inline std::string PicosToMicrosString(uint64 ps) {\n+inline std::string PicosToMicrosString(uint64_t ps) {\n   return MaxPrecision(PicoToMicro(ps));\n }\n \n@@ -58,7 +58,7 @@ std::vector<const typename Map::value_type*> SortByKey(const Map& m) {\n   return pairs;\n }\n \n-inline void AddDeviceMetadata(uint32 device_id, const Device& device,\n+inline void AddDeviceMetadata(uint32_t device_id, const Device& device,\n                               std::string* json) {\n   if (!device.name().empty()) {\n     absl::StrAppend(json, R\"({\"ph\":\"M\",\"pid\":)\", device_id,\n@@ -70,21 +70,21 @@ inline void AddDeviceMetadata(uint32 device_id, const Device& device,\n                   device_id, \"}},\");\n }\n \n-inline void AddResourceMetadata(uint32 device_id, uint32 resource_id,\n+inline void AddResourceMetadata(uint32_t device_id, uint32_t resource_id,\n                                 const Resource& resource, std::string* json) {\n   if (!resource.name().empty()) {\n     absl::StrAppend(json, R\"({\"ph\":\"M\",\"pid\":)\", device_id, R\"(,\"tid\":)\",\n                     resource_id, R\"(,\"name\":\"thread_name\",\"args\":{\"name\":)\",\n                     JsonString(resource.name()), \"}},\");\n   }\n-  uint32 sort_index =\n+  uint32_t sort_index =\n       resource.sort_index() ? resource.sort_index() : resource_id;\n   absl::StrAppend(json, R\"({\"ph\":\"M\",\"pid\":)\", device_id, R\"(,\"tid\":)\",\n                   resource_id, R\"(,\"name\":\"thread_sort_index\")\",\n                   R\"(,\"args\":{\"sort_index\":)\", sort_index, \"}},\");\n }\n \n-inline void AddTraceEvent(const TraceEvent& event, string* json) {\n+inline void AddTraceEvent(const TraceEvent& event, std::string* json) {\n   auto duration_ps = std::max(event.duration_ps(), protobuf_uint64{1});\n   absl::StrAppend(json, R\"({\"ph\":\"X\",\"pid\":)\", event.device_id(), R\"(,\"tid\":)\",\n                   event.resource_id(), R\"(,\"ts\":)\",\n@@ -110,11 +110,11 @@ std::string TraceContainerToJson(const TraceContainer& container) {\n       R\"({\"displayTimeUnit\":\"ns\",\"metadata\":{\"highres-ticks\":true},)\"\n       R\"(\"traceEvents\":[)\";\n   for (const auto* id_and_device : SortByKey(container.trace().devices())) {\n-    uint32 device_id = id_and_device->first;\n+    uint32_t device_id = id_and_device->first;\n     const Device& device = id_and_device->second;\n     AddDeviceMetadata(device_id, device, &json);\n     for (const auto* id_and_resource : SortByKey(device.resources())) {\n-      uint32 resource_id = id_and_resource->first;\n+      uint32_t resource_id = id_and_resource->first;\n       const Resource& resource = id_and_resource->second;\n       AddResourceMetadata(device_id, resource_id, resource, &json);\n     }"
        },
        {
            "sha": "9bbe94314e37e421ea83bf69e681d15c0164a0f0",
            "filename": "third_party/xla/xla/tsl/profiler/convert/xplane_to_trace_events.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d33a7e0e89334eb42a2b68f790debbde01d0daa8/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fxplane_to_trace_events.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d33a7e0e89334eb42a2b68f790debbde01d0daa8/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fxplane_to_trace_events.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2Fxplane_to_trace_events.cc?ref=d33a7e0e89334eb42a2b68f790debbde01d0daa8",
            "patch": "@@ -39,15 +39,15 @@ namespace {\n \n using tensorflow::profiler::XSpace;\n \n-void BuildDeviceAndResources(uint32 device_id, const XPlaneVisitor& plane,\n+void BuildDeviceAndResources(uint32_t device_id, const XPlaneVisitor& plane,\n                              Device* device) {\n   device->set_name(std::string(plane.Name()));\n   device->set_device_id(device_id);\n \n   bool sort_by_ordinal = (device_id == kHostThreadsDeviceId);\n   int ordinal = 0;\n   plane.ForEachLine([&](const XLineVisitor& line) {\n-    uint32 resource_id = line.DisplayId();\n+    uint32_t resource_id = line.DisplayId();\n     Resource& resource = (*device->mutable_resources())[resource_id];\n     resource.set_resource_id(resource_id);\n     resource.set_name(std::string(line.DisplayName()));\n@@ -59,15 +59,15 @@ void BuildDeviceAndResources(uint32 device_id, const XPlaneVisitor& plane,\n   });\n }\n \n-void ConvertXPlaneToTraceEvents(uint32 device_id, const XPlaneVisitor& xplane,\n+void ConvertXPlaneToTraceEvents(uint32_t device_id, const XPlaneVisitor& xplane,\n                                 TraceContainer& container) {\n   // Convert devices and resources.\n   BuildDeviceAndResources(device_id, xplane,\n                           container.MutableDevice(device_id));\n \n   // Convert events.\n   xplane.ForEachLine([device_id, &container](const XLineVisitor& xline) {\n-    uint32 resource_id = xline.DisplayId();\n+    uint32_t resource_id = xline.DisplayId();\n     if (xline.DisplayName() == tsl::profiler::kXlaAsyncOpLineName) {\n       return;\n     }\n@@ -106,8 +106,8 @@ void ConvertXPlaneToTraceEvents(uint32 device_id, const XPlaneVisitor& xplane,\n \n }  // namespace\n \n-uint64 GetTraceViewerMaxEvents() {\n-  constexpr uint64 kMaxEvents = 1000000;\n+uint64_t GetTraceViewerMaxEvents() {\n+  constexpr uint64_t kMaxEvents = 1000000;\n   // Testing only env variable, not recommended for use\n   char* max_events = getenv(\"TF_PROFILER_TRACE_VIEWER_MAX_EVENTS\");\n   if (max_events != nullptr) {\n@@ -136,12 +136,12 @@ TraceContainer ConvertXSpaceToTraceContainer(const XSpace& xspace) {\n   }\n   for (const XPlane* device_plane : device_planes) {\n     XPlaneVisitor xplane = CreateTfXPlaneVisitor(device_plane);\n-    uint32 device_id = kFirstDeviceId + xplane.Id();\n+    uint32_t device_id = kFirstDeviceId + xplane.Id();\n     ConvertXPlaneToTraceEvents(device_id, xplane, container);\n   }\n   // Trace viewer (non-streaming) has scalability issues, we need to drop\n   // events to avoid loading failure for trace viewer.\n-  uint64 viewer_max_events = GetTraceViewerMaxEvents();\n+  uint64_t viewer_max_events = GetTraceViewerMaxEvents();\n   container.CapEvents(viewer_max_events);\n   return container;\n }"
        }
    ],
    "stats": {
        "total": 35,
        "additions": 18,
        "deletions": 17
    }
}