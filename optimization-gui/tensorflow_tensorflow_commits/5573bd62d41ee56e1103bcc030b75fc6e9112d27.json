{
    "author": "EusebioDM",
    "message": "Add missing BUILD dependencies, and remove unused ones\n\nPiperOrigin-RevId: 841623889",
    "sha": "5573bd62d41ee56e1103bcc030b75fc6e9112d27",
    "files": [
        {
            "sha": "f3c2703f70e90246ab77d0e904beb58729a90475",
            "filename": "third_party/xla/xla/tsl/framework/convolution/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fconvolution%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fconvolution%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fconvolution%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -34,6 +34,7 @@ cc_library(\n     defines = [\n         \"EIGEN_ALTIVEC_USE_CUSTOM_PACK=0\",\n     ],\n+    deps = [\"@eigen_archive//:eigen3\"],\n )\n \n # Tensorflow also has an eigen_helpers that is closely related, so maintain the same name.\n@@ -45,7 +46,6 @@ cc_library(\n     compatible_with = get_compatible_with_portable(),\n     defines = [\"EIGEN_NEON_GEBP_NR=4\"],\n     deps = [\n-        \":eigen_convolution_helpers\",\n         \":eigen_spatial_convolutions-inl\",\n         \"//xla/tsl/framework/contraction:eigen_contraction_kernel\",\n         \"@eigen_archive//:eigen3\","
        },
        {
            "sha": "31e08d6c09686e5cefcab19d41c3e84622ac1623",
            "filename": "third_party/xla/xla/tsl/lib/gtl/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fgtl%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fgtl%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fgtl%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -247,7 +247,6 @@ tsl_cc_test(\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/platform:types\",\n         \"@com_google_absl//absl/status\",\n-        \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_googletest//:gtest_main\",\n         \"@local_tsl//tsl/platform:hash\",\n     ],"
        },
        {
            "sha": "eefea1921019f78756e7e85ee33bb2720a0ee3c4",
            "filename": "third_party/xla/xla/tsl/lib/io/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 10,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -288,10 +288,9 @@ tsl_cc_test(\n         \":buffered_file\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # buildcleaner: keep\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/platform:test_benchmark\",\n-        \"@com_google_absl//absl/status\",\n         \"@com_google_googletest//:gtest_main\",\n     ],\n )\n@@ -506,12 +505,10 @@ tsl_cc_test(\n         \":inputbuffer\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n-        \"@com_google_absl//absl/status\",\n         \"@com_google_googletest//:gtest_main\",\n         \"@local_tsl//tsl/platform:coding\",\n         \"@local_tsl//tsl/platform:str_util\",\n@@ -540,9 +537,7 @@ tsl_cc_test(\n         \":random_inputstream\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n-        \"@com_google_absl//absl/status\",\n         \"@com_google_googletest//:gtest_main\",\n     ],\n )\n@@ -556,12 +551,10 @@ tsl_cc_test(\n         \":record_writer\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n-        \"@com_google_absl//absl/status\",\n         \"@com_google_googletest//:gtest_main\",\n         \"@local_tsl//tsl/platform:strcat\",\n         \"@zlib\",\n@@ -579,7 +572,6 @@ tsl_cc_test(\n         \"//xla/tsl/lib/hash:crc32c\",\n         \"//xla/tsl/lib/random:philox\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_absl//absl/status\",\n@@ -623,7 +615,6 @@ tsl_cc_test(\n         \":zlib_outputbuffer\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_absl//absl/strings\","
        },
        {
            "sha": "ca1af2061ca03bba703ab19b97956eda8ce90271",
            "filename": "third_party/xla/xla/tsl/lib/io/snappy/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -61,12 +61,6 @@ cc_library(\n         \"//xla/tsl/platform:macros\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:types\",\n-        \"@com_google_absl//absl/log\",\n-        \"@com_google_absl//absl/log:check\",\n-        \"@com_google_absl//absl/status\",\n-        \"@com_google_absl//absl/strings\",\n-        \"@com_google_absl//absl/strings:cord\",\n-        \"@com_google_absl//absl/strings:string_view\",\n         \"@local_tsl//tsl/platform\",\n         \"@local_tsl//tsl/platform:platform_port\",\n     ],\n@@ -81,7 +75,6 @@ cc_library(\n         \"//xla/tsl/lib/io:inputstream_interface\",\n         \"//xla/tsl/platform:errors\",\n         \"@com_google_absl//absl/log:check\",\n-        \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:cord\","
        },
        {
            "sha": "7a44cff7fbc7b3ee5118136bffdc3d718383e1c0",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -200,7 +200,6 @@ cc_library(\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n-        \"//xla/tsl/platform:types\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n@@ -267,10 +266,7 @@ cc_library(\n     hdrs = [\n         \"timed.h\",\n     ],\n-    deps = [\n-        \"//xla/tsl/platform:env_time\",\n-        \"//xla/tsl/platform:types\",\n-    ],\n+    deps = [\"//xla/tsl/platform:env_time\"],\n )\n \n # Export source files needed for mobile builds, which do not use granular targets."
        },
        {
            "sha": "16110e0432404f8cb3552b15bebf15318caa7e94",
            "filename": "third_party/xla/xla/tsl/platform/BUILD",
            "status": "modified",
            "additions": 13,
            "deletions": 7,
            "changes": 20,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -341,7 +341,10 @@ cc_library(\n     textual_hdrs = [\n         \"subprocess.h\",\n     ],\n-    deps = tf_windows_aware_platform_deps(\"subprocess\"),\n+    deps = tf_windows_aware_platform_deps(\"subprocess\") + [\n+        \":types\",\n+        \"@local_tsl//tsl/platform\",\n+    ],\n )\n \n tsl_cc_test(\n@@ -367,6 +370,9 @@ tsl_cc_test(\n \n cc_library(\n     name = \"env\",\n+    # TODO: b/456605953 - Adding the deps that build_clenaner wants may break some TF builds, so keep\n+    # nofixdeps for now, and try to romove it in a separate CL.\n+    tags = [\"nofixdeps\"],\n     textual_hdrs = [\n         \"env.h\",\n         \"file_system.h\",\n@@ -413,7 +419,6 @@ tsl_cc_test(\n     srcs = [\"env_test.cc\"],\n     deps = [\n         \":env\",\n-        \":test\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n         \"@com_google_googletest//:gtest_main\",\n@@ -424,7 +429,7 @@ cc_library(\n     name = \"env_time\",\n     compatible_with = get_compatible_with_portable(),\n     textual_hdrs = [\"env_time.h\"],\n-    deps = tf_windows_aware_platform_deps(\"env_time\"),\n+    deps = tf_windows_aware_platform_deps(\"env_time\") + [\":types\"],\n )\n \n cc_library(\n@@ -492,7 +497,7 @@ tsl_cc_test(\n     srcs = [\"file_system_helper_test.cc\"],\n     deps = [\n         \":env\",\n-        \":env_impl\",\n+        \":env_impl\",  # buildcleaner: keep\n         \":file_system_helper\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"@com_google_googletest//:gtest_main\",\n@@ -727,7 +732,7 @@ tsl_cc_test(\n     srcs = [\"threadpool_test.cc\"],\n     deps = [\n         \":env\",\n-        \":env_impl\",\n+        \":env_impl\",  # buildcleaner: keep\n         \":test\",\n         \"//xla/tsl/concurrency:executor\",\n         \"@com_google_absl//absl/synchronization\",\n@@ -804,6 +809,7 @@ cc_library(\n cc_library(\n     name = \"grpc_credentials\",\n     compatible_with = get_compatible_with_portable(),\n+    tags = [\"nofixdeps\"],\n     textual_hdrs = [\"grpc_credentials.h\"],\n     deps = tsl_grpc_credentials_deps(),\n )\n@@ -871,7 +877,7 @@ cc_library(\n cc_library(\n     name = \"rocm_rocdl_path\",\n     textual_hdrs = [\"rocm_rocdl_path.h\"],\n-    deps = tf_platform_deps(\"rocm_rocdl_path\"),\n+    deps = tf_platform_deps(\"rocm_rocdl_path\") + [\":types\"],\n )\n \n cc_library(\n@@ -884,7 +890,7 @@ cc_library(\n     name = \"criticality\",\n     compatible_with = get_compatible_with_portable(),\n     textual_hdrs = [\"criticality.h\"],\n-    deps = tf_platform_deps(\"criticality\"),\n+    deps = tf_platform_deps(\"criticality\") + [\"@local_tsl//tsl/platform\"],\n )\n \n tsl_cc_test("
        },
        {
            "sha": "4fbc7b0633da6f76053bdd673085c1510ceb2b9f",
            "filename": "third_party/xla/xla/tsl/platform/cloud/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 15,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -223,7 +223,6 @@ cc_library(\n     copts = tsl_copts(),\n     deps = [\n         \":http_request\",\n-        \"//xla/tsl/lib/gtl:map_util\",\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:macros\",\n@@ -235,10 +234,9 @@ cc_library(\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:string_view\",\n-        \"@curl\",\n+        \"@curl\",  # buildcleaner: keep\n         \"@local_tsl//tsl/platform:protobuf\",\n         \"@local_tsl//tsl/platform:scanner\",\n-        \"@local_tsl//tsl/platform:str_util\",\n         \"@local_tsl//tsl/platform:strcat\",\n         \"@local_tsl//tsl/platform:stringpiece\",\n     ],\n@@ -259,7 +257,6 @@ cc_library(\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/platform:types\",\n-        \"@curl\",\n         \"@local_tsl//tsl/platform:protobuf\",\n         \"@local_tsl//tsl/platform:stringpiece\",\n     ],\n@@ -285,9 +282,7 @@ cc_library(\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@jsoncpp_git//:jsoncpp\",\n-        \"@local_tsl//tsl/platform:base64\",\n         \"@local_tsl//tsl/platform:path\",\n-        \"@local_tsl//tsl/platform:retrying_utils\",\n         \"@local_tsl//tsl/platform:thread_annotations\",\n     ],\n )\n@@ -304,7 +299,6 @@ cc_library(\n     deps = [\n         \":curl_http_request\",\n         \":http_request\",\n-        \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:status\",\n         \"@com_google_absl//absl/strings\",\n         \"@local_tsl//tsl/platform:retrying_utils\",\n@@ -386,7 +380,6 @@ tsl_cc_test(\n         \":expiring_lru_cache\",\n         \":now_seconds_env\",\n         \"//xla/tsl/lib/core:status_test_util\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_googletest//:gtest_main\",\n     ],\n@@ -449,7 +442,6 @@ tsl_cc_test(\n     linkopts = if_windows([\"-DEFAULTLIB:ws2_32.lib\"]),\n     deps = [\n         \":gcs_dns_cache\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_googletest//:gtest_main\",\n@@ -465,7 +457,6 @@ tsl_cc_test(\n     deps = [\n         \":gcs_throttle\",\n         \"//xla/tsl/lib/core:status_test_util\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_googletest//:gtest_main\",\n         \"@local_tsl//tsl/platform:str_util\",\n@@ -505,7 +496,6 @@ tsl_cc_test(\n         \":oauth_client\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n         \"@boringssl//:crypto\",\n         \"@com_google_googletest//:gtest_main\",\n@@ -532,14 +522,14 @@ tsl_cc_test(\n         \":oauth_client\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:test\",\n+        \"@local_tsl//tsl/platform:path\",\n+        \"@local_tsl//tsl/platform:retrying_utils\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest_main\",\n         \"@jsoncpp_git//:jsoncpp\",\n-        \"@local_tsl//tsl/platform:path\",\n-        \"@local_tsl//tsl/platform:retrying_utils\",\n+        # copybara:uncomment \"@jsoncpp_git//:jsoncpp_compat\",\n     ],\n )\n \n@@ -567,7 +557,6 @@ tsl_cc_test(\n     deps = [\n         \":compute_engine_zone_provider\",\n         \":http_request_fake\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_googletest//:gtest_main\",\n     ],"
        },
        {
            "sha": "0d82327fbcdfadf1ab599fe0f1d2130eae448484",
            "filename": "third_party/xla/xla/tsl/platform/default/BUILD",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -48,6 +48,7 @@ cc_library(\n         \"manual\",\n         \"no_oss\",\n         \"nobuilder\",\n+        \"nofixdeps\",\n     ],\n     textual_hdrs = [\"context.h\"],\n     deps = [\n@@ -61,6 +62,7 @@ cc_library(\n     tags = [\n         \"manual\",\n         \"nobuilder\",\n+        \"nofixdeps\",\n     ],\n     textual_hdrs = [\"criticality.h\"],\n     deps = [\n@@ -107,6 +109,7 @@ cc_library(\n     tags = [\n         \"manual\",\n         \"nobuilder\",\n+        \"nofixdeps\",\n     ],\n     deps = [\n         \"//xla/tsl/platform:logging\",\n@@ -151,6 +154,7 @@ cc_library(\n         \"manual\",\n         \"no_oss\",\n         \"nobuilder\",\n+        \"nofixdeps\",\n     ],\n     deps = [\n         \"//xla/tsl/concurrency:executor\",\n@@ -442,6 +446,7 @@ cc_library(\n         \"manual\",\n         \"no_oss\",\n         \"nobuilder\",\n+        \"nofixdeps\",  # build_cleaner doesn't work well with the conditional includes in subprocess.h\n     ],\n     textual_hdrs = [\"subprocess.h\"],\n     deps = [\n@@ -466,17 +471,15 @@ cc_library(\n         \"manual\",\n         \"no_oss\",\n         \"nobuilder\",\n+        \"nofixdeps\",\n     ],\n     textual_hdrs = [\"tracing_impl.h\"],\n     deps = [\n-        \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:macros\",\n         \"//xla/tsl/platform:types\",\n         \"//xla/tsl/profiler/backends/cpu:threadpool_listener_state\",\n         \"@local_tsl//tsl/platform\",\n         \"@local_tsl//tsl/platform:hash\",\n-        \"@local_tsl//tsl/platform:str_util\",\n-        \"@local_tsl//tsl/platform:strcat\",\n         \"@local_tsl//tsl/platform:stringpiece\",\n     ],\n     alwayslink = True,\n@@ -519,6 +522,7 @@ cc_library(\n         \"manual\",\n         \"no_oss\",\n         \"nobuilder\",\n+        \"nofixdeps\",\n     ],\n     textual_hdrs = [\"crash_analysis.h\"],\n     visibility = internal_visibility([\"//tensorflow:__subpackages__\"]),"
        },
        {
            "sha": "75cfea5c40589c06f367bbdaa411eb8eb2a40b9f",
            "filename": "third_party/xla/xla/tsl/platform/windows/BUILD",
            "status": "modified",
            "additions": 20,
            "deletions": 4,
            "changes": 24,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fwindows%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fwindows%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fwindows%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -57,27 +57,37 @@ cc_library(\n         \"//xla/tsl/platform:types\",\n         \"//xla/tsl/protobuf:error_codes_proto_impl_cc\",\n         \"@com_google_absl//absl/algorithm:container\",\n+        \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/base:nullability\",\n         \"@com_google_absl//absl/functional:any_invocable\",\n+        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n+        \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/status:statusor\",\n+        \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/strings:cord\",\n         \"@com_google_absl//absl/strings:str_format\",\n         \"@com_google_absl//absl/strings:string_view\",\n-        \"@com_google_absl//absl/time\",\n+        \"@com_google_absl//absl/synchronization\",\n+        \"@com_google_absl//absl/types:span\",\n+        \"@com_google_protobuf//:protobuf\",\n+        \"@com_google_protobuf//:protobuf_lite\",\n         \"@eigen_archive//:eigen3\",\n         \"@local_tsl//tsl/platform\",\n         \"@local_tsl//tsl/platform:blocking_counter\",\n         \"@local_tsl//tsl/platform:context\",\n         \"@local_tsl//tsl/platform:cord\",\n         \"@local_tsl//tsl/platform:denormal\",\n-        \"@local_tsl//tsl/platform:load_library\",\n-        \"@local_tsl//tsl/platform:mutex\",\n         \"@local_tsl//tsl/platform:path\",\n         \"@local_tsl//tsl/platform:platform_port\",\n         \"@local_tsl//tsl/platform:protobuf\",\n         \"@local_tsl//tsl/platform:regexp\",\n+        \"@local_tsl//tsl/platform:scanner\",\n         \"@local_tsl//tsl/platform:setround\",\n         \"@local_tsl//tsl/platform:str_util\",\n         \"@local_tsl//tsl/platform:strcat\",\n         \"@local_tsl//tsl/platform:stringpiece\",\n+        \"@local_tsl//tsl/platform:thread_annotations\",\n         \"@local_tsl//tsl/platform:tracing\",\n     ],\n )\n@@ -94,6 +104,11 @@ cc_library(\n     ],\n     deps = [\n         \":env\",\n+        \":wide_char\",\n+        \"//xla/tsl/platform:logging\",\n+        \"//xla/tsl/protobuf:error_codes_proto_impl_cc\",\n+        \"@local_tsl//tsl/platform:load_library\",\n+        \"@local_tsl//tsl/platform:mutex\",\n     ],\n )\n \n@@ -148,7 +163,6 @@ cc_library(\n     ],\n     deps = [\n         \":wide_char\",\n-        \"//xla/tsl/platform:errors\",\n         \"@com_google_absl//absl/status\",\n     ],\n )\n@@ -200,6 +214,7 @@ cc_library(\n         \"//xla/tsl/platform:dynamic_annotations\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:types\",\n+        \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@local_tsl//tsl/platform\",\n         \"@snappy\",\n@@ -242,6 +257,7 @@ cc_library(\n         \"manual\",\n         \"no_oss\",\n         \"nobuilder\",\n+        \"nofixdeps\",\n     ],\n     textual_hdrs = [\"subprocess.h\"],\n     deps = ["
        },
        {
            "sha": "5baf86d85e1b0a3c61c23c7e7f270b171fd44155",
            "filename": "third_party/xla/xla/tsl/profiler/backends/cpu/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fbackends%2Fcpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fbackends%2Fcpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fbackends%2Fcpu%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -49,7 +49,6 @@ cc_library(\n         \"//xla/tsl/profiler/utils:lock_free_queue\",\n         \"//xla/tsl/profiler/utils:per_thread\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n-        \"@com_google_absl//absl/container:flat_hash_set\",\n     ],\n     alwayslink = True,\n )\n@@ -58,10 +57,9 @@ tsl_cc_test(\n     name = \"traceme_recorder_test\",\n     srcs = [\"traceme_recorder_test.cc\"],\n     deps = [\n-        \":traceme_recorder\",\n         \":traceme_recorder_impl\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # buildcleaner: keep\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/platform:types\","
        },
        {
            "sha": "987d2b8d1367a81d3809741877c57b6c2ee8e382",
            "filename": "third_party/xla/xla/tsl/profiler/convert/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Fconvert%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -86,7 +86,6 @@ tsl_cc_test(\n     deps = [\n         \":post_process_single_host_xplane\",\n         \"//xla/tsl/platform:test\",\n-        \"//xla/tsl/profiler/utils:trace_utils\",\n         \"//xla/tsl/profiler/utils:xplane_builder\",\n         \"//xla/tsl/profiler/utils:xplane_schema\",\n         \"@com_google_absl//absl/container:flat_hash_set\","
        },
        {
            "sha": "5088f54edeb11c2cd6a0fab611b62aa02409f120",
            "filename": "third_party/xla/xla/tsl/profiler/utils/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Futils%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Futils%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Futils%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -349,7 +349,7 @@ tsl_cc_test(\n         \":xplane_test_utils\",\n         \":xplane_utils\",\n         \":xplane_visitor\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # buildcleaner: keep\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/platform:types\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n@@ -560,7 +560,6 @@ tsl_cc_test(\n     deps = [\n         \":lock_free_queue\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_googletest//:gtest_main\",\n@@ -591,7 +590,6 @@ tsl_cc_test(\n     deps = [\n         \":per_thread\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/strings\","
        },
        {
            "sha": "ea402eb6d25ee59955e7e33149012d36fbe9f60e",
            "filename": "third_party/xla/xla/tsl/python/lib/core/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fpython%2Flib%2Fcore%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5573bd62d41ee56e1103bcc030b75fc6e9112d27/third_party%2Fxla%2Fxla%2Ftsl%2Fpython%2Flib%2Fcore%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fpython%2Flib%2Fcore%2FBUILD?ref=5573bd62d41ee56e1103bcc030b75fc6e9112d27",
            "patch": "@@ -39,7 +39,6 @@ cc_library(\n         \"//third_party/py/numpy:headers\",\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/base:core_headers\",\n-        \"@com_google_absl//absl/synchronization\",\n         \"@pybind11\",\n         \"@rules_python//python/cc:current_py_cc_headers\",  # build_cleaner: keep; DNR: b/35864863\n     ],"
        }
    ],
    "stats": {
        "total": 110,
        "additions": 49,
        "deletions": 61
    }
}