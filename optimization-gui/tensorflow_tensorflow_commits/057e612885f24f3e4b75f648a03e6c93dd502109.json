{
    "author": "alexander-shaposhnikov",
    "message": "Update xnnpack cost models.\n\nPiperOrigin-RevId: 799456731",
    "sha": "057e612885f24f3e4b75f648a03e6c93dd502109",
    "files": [
        {
            "sha": "6750a8495247413f368b9fa63d859085cadcdfb7",
            "filename": "third_party/xla/xla/backends/cpu/xnn_gemm_config.cc",
            "status": "modified",
            "additions": 47,
            "deletions": 47,
            "changes": 94,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/057e612885f24f3e4b75f648a03e6c93dd502109/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fxnn_gemm_config.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/057e612885f24f3e4b75f648a03e6c93dd502109/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fxnn_gemm_config.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fxnn_gemm_config.cc?ref=057e612885f24f3e4b75f648a03e6c93dd502109",
            "patch": "@@ -149,7 +149,7 @@ static constexpr GemmFilter BF16BF16F32GemmFilter{\n };\n \n static constexpr GemmFilter AMDRomeGemmFilter{\n-  /*input_range=*/{16, 2048},\n+  /*input_range=*/{16, 4096},\n   /*lhs_dtype=*/PrimitiveType::F32,\n   /*rhs_dtype=*/PrimitiveType::F32,\n   /*out_dtype=*/PrimitiveType::F32,\n@@ -158,53 +158,53 @@ static constexpr GemmFilter AMDRomeGemmFilter{\n static constexpr Net AMDRomeNet{\n   /*scaler=*/{\n     /*mean=*/\n-    {{ 1018.0043402777778, 1023.5008680555555, 1025.861328125, 6.616354874682953, 6.620083771919308, 6.63456382646144 }},\n+    {{ 2031.4479060265578, 2036.3171603677222, 2062.2170582226763, 7.29227087924762, 7.308301476602625, 7.331674465299577 }},\n     /*scale=*/\n-    {{ 590.632963260763, 593.7150826714844, 588.1463320809286, 0.9965492348670616, 1.0053835765793744, 0.9754062267657724 }}\n+    {{ 1188.2177375470617, 1178.7350461452038, 1179.7790996965598, 1.0416890873676914, 1.0053399234375506, 0.9757991392501179 }},\n   },\n   /*hidden_layer_1=*/{\n     /*weights=*/{{\n-      {{ 1.005891244892035, -0.11072959330426384, -0.968046373485514, -4.921521725424851, -0.13899276332759042, -1.226293159684938 }},\n-      {{ -1.2502714170922153, -1.1765486776310423, 0.4888716998554182, 0.5172335453177302, -0.593110373636639, 0.1209811095977735 }},\n-      {{ -0.18095204827877465, -0.06060134530184746, -0.3750576441489519, 0.8188111073502161, 0.3576805251431741, 1.4968701417615413 }},\n-      {{ -0.05111798751008719, 0.07769076545705815, 0.6207635489778949, 3.6101378942470967, -0.05282332398428117, 1.7854763674893495 }},\n-      {{ 0.747350403236783, 0.04930450878767915, 0.8777099456443157, 1.4990255665580505, 0.08212232867228593, -1.9843375290758656 }},\n-      {{ 0.5541966277545818, -0.33159380874523126, -0.3194666063636952, 1.6816423644238223, 0.1017686813844035, 3.1265875450394813 }},\n-      {{ 0.7345608720339312, 1.5974970323865725, -2.2148504671311953, 0.5363830361034387, 0.3700332861259481, 0.9331234440564571 }},\n-      {{ 1.4423494345704555, 0.289382200477869, 1.5110082992053955, 1.418682530523278, -0.5749656156984766, 2.684031259217246 }},\n+      {{ 0.5255922128957278, -0.8065013670906714, -0.5264014380189966, -1.2772498330118651, 1.3840216299823802, 0.7322759674330881 }},\n+      {{ -0.7597171548555842, -1.2571169773685882, -0.32518437620636936, 1.0212806356673838, 0.9165371224616725, -0.19250317971610814 }},\n+      {{ -2.3497882574965994, 0.23878289300722322, -2.5867259166595944, 0.8432052252434499, -0.7374592701571068, 0.6061228206232958 }},\n+      {{ 0.3412638507438349, 0.009127030753615727, -0.43271581733053577, 0.3058216852138156, 0.4132978840654225, 0.08892908864656021 }},\n+      {{ -0.3843556431761765, -0.5398088470059381, -2.0478454682095735, -1.9041927205327738, -1.0368295384919808, -0.1653666006655781 }},\n+      {{ 0.9415170642828504, -0.4671602009419241, -2.594401365132767, 0.5011818371933664, 2.6743454901058725, 1.090931094328555 }},\n+      {{ -2.030867525769208, 0.9360281369657524, -2.179490537456837, 0.6315631977398317, -0.2797813498393135, 1.1780045163240112 }},\n+      {{ 2.026780502536945, 1.1382782700184098, 0.7076892737809293, -0.5003242829913847, 1.7337823655903326, 0.676979521067241 }},\n     }},\n     /*biases=*/{\n-      { 1.0309774603375907, 0.6465236073322296, 3.553393762532912, -0.8185749009865861, -0.12955426436728715, 0.8031554507587597, -1.5785991424170187, -0.39445212677049063 }\n+      { 2.827760670625431, -0.9347274494671962, 1.7748650815163647, -0.5102747570142624, 1.1443725632238269, 2.0573020231014616, 0.33721201132380757, 2.7437956980307643 },\n     }\n   },\n   /*hidden_layer_2=*/{\n     /*weights=*/{{\n-      {{ 0.5283786603352238, -0.056889406800860146, 0.6606078794503449, 0.48144968239995534, 0.010554846273878095, -0.14799959162846965, 0.20457525406298369, -0.12661568456264205 }},\n-      {{ -0.9534585055098438, -0.10012840023501332, -0.5795955688342004, 1.9348789870642515, 0.21271731229957186, 0.1557077642737526, 1.5288709351139655, -0.7002696129400411 }},\n-      {{ 2.1906088364770784, 0.07703067791952263, 2.1646753484073655, -0.32251840895547773, 0.6850197180505169, 0.30061421444806946, 1.0728025841881765, -0.8100244450669523 }},\n-      {{ 0.8106365294738354, -0.3410735969241413, 0.7910924608271775, -0.07017938451436888, 0.16051916138347214, 0.3004275708609215, 0.7729045870717262, -0.2332237341201925 }},\n-      {{ 0.07246756191918226, -0.05758991153686244, 0.911745169839482, 1.2510377533921035, -1.182537901423303, -1.295182969102456, -1.904956642808503, 0.007010431897136803 }},\n-      {{ -0.8733376736355871, 0.157671979745821, -1.0372041545921873, 3.3000069112365584, 0.25551941086911717, 0.9589328110123956, -0.23856740081287128, -2.0315351809352586 }},\n-      {{ -1.9337567589656532, 1.4676259894002257, 1.4886721579905993, -1.5705845737356183, 0.48937401463732866, 1.083620050144208, -1.0031665521883135, -1.2660789079048749 }},\n-      {{ 2.4310441535271687, 0.49189784223311395, 0.31483156395428413, -0.0865355927145238, 0.7631527157107736, -2.7077958375575055, -0.9228446079924654, -0.7391110100336947 }}\n+      {{ 2.571821311709108, 0.16869445337763503, 0.3541411973512104, 0.31040383433531593, -1.9138308971941267, 1.577267326066108, 1.0358680188904088, -0.48597239908310547 }},\n+      {{ -0.3168524372865204, -0.8109707535168992, -0.6883758912881943, 0.20041683878416458, 0.29562419861502953, 2.9699371941875183, -0.06378706528945598, -1.2627270412739198 }},\n+      {{ 1.2121865841893051, 0.4324679330555888, 0.5756742637802713, -0.3965637421226802, -0.8316876650525071, 1.4267737797853521, 0.6590628275882154, 1.0969896994507335 }},\n+      {{ 0.08152092107879703, 0.987281670566132, 2.711801967605775, 0.03262333498333622, -0.24851434369301018, 0.5857580261361529, -0.14172228489696118, 1.0096244465236095 }},\n+      {{ -1.099617291565094, -0.96182176932886, 1.1198642662894356, 0.09569259551658717, 0.9865508260397995, -1.7073686127591108, 0.8545686868857858, 1.276785903326864 }},\n+      {{ 0.6284115174399925, -0.5692706408214737, -0.3776497427936689, 0.2850473804130665, 0.5611912673866001, 0.7074167980672433, 1.3602397130866593, -2.4641849404042104 }},\n+      {{ -0.2235255127724266, -0.6066818030776572, 2.098453748102861, -0.551860833640914, -0.6607678541967575, -1.0968858307838945, -3.097129404864497, 1.22936241411423 }},\n+      {{ -0.35359032516179434, 0.16659401401800453, 0.7409562527506246, 0.12880569714035928, 1.6235584538175323, 0.35055754805485, -0.5085408039033421, 0.03832167245213557 }},\n     }},\n     /*biases=*/{\n-      { 0.3486705866196229, 2.2776343748673153, 0.10764831721796844, 0.09166185120840216, -1.0034214854612917, -0.927160996221299, 1.5172112381212808, 0.4772212967805247 }\n+      { -0.9650088973529635, 0.18404512445819377, -1.1301082618712814, -0.4114680200097482, -2.16829227705252, -0.792693003568079, 2.0186809343196432, 0.6651750830570318 },\n     }\n   },\n   /*output_layer=*/{\n     /*weights=*/{{\n-      {{ -0.5896335640757622, 2.3283855361577914, -1.9754605319484158, -0.6632271049751296, 1.9086390756642784, 3.7433099466616238, 1.824432545010804, 2.09625742741301 }}\n+      {{ -3.4950798141841886, 3.052869401349734, -1.9332425183341917, -2.4468455334890375, 3.1182134156177734, 2.662143418701658, 3.609609051057281, -1.6114776062537006 }},\n     }},\n     /*biases=*/{\n-      { -0.04977871506692414 }\n+      { -0.8627209596023582 },\n     }\n   },\n   /*threshold=*/0.03,\n };\n \n static constexpr GemmFilter AMDGenoaGemmFilter{\n-  /*input_range=*/{16, 2048},\n+  /*input_range=*/{16, 4096},\n   /*lhs_dtype=*/PrimitiveType::F32,\n   /*rhs_dtype=*/PrimitiveType::F32,\n   /*out_dtype=*/PrimitiveType::F32,\n@@ -213,49 +213,49 @@ static constexpr GemmFilter AMDGenoaGemmFilter{\n static constexpr Net AMDGenoaNet {\n   /*scaler=*/{\n     /*mean=*/\n-    {{ 1002.1257625527921, 1040.082590333177, 1029.2266541529798, 6.598251685888309, 6.6404292804559635, 6.654739928938151 }},\n+    {{ 2048.487742594484, 2032.4805924412667, 2042.0275791624106, 7.311636506981553, 7.331182177414692, 7.324348610024091 }},\n     /*scale=*/\n-    {{ 594.7876923848536, 596.4073362076931, 579.6412706089599, 0.9806421276088567, 1.0047695259963145, 0.9426741875163773 }}\n+    {{ 1191.317145630777, 1166.4230415375375, 1162.7572402044934, 1.0130577584567735, 0.9372130582909888, 0.9819331632142719 }},\n   },\n   /*hidden_layer_1=*/{\n     /*weights=*/{{\n-      {{ -1.8525957121690557, -0.12363449157789586, -0.8386369273170659, -3.3954448946951414, 0.33886983245776847, -0.9317201523227778 }},\n-      {{ 0.5120871227810689, -1.5214338320394882, -0.7274651337778577, 1.3200335397974383, 0.5923648903998096, 1.7241300558638806 }},\n-      {{ -1.8962086199924455, -1.7249686491398133, -0.15047446639707035, 1.1356266853003538, 2.70970817913586, 0.7154911861570797 }},\n-      {{ -0.0020642101422613684, 0.14097136562712495, -0.09163191463561046, -0.02820803725731568, 0.03955304538877561, 0.16661173026752624 }},\n-      {{ -2.001943294276495, 1.4970193262821043, 0.7777143265827485, 2.4639584696544814, -2.5991183905189827, -1.7850169579413313 }},\n-      {{ 1.447549192320386, 1.361173224199936, -0.43481695242532376, 0.8671054211799711, -0.25280176689036743, 2.5275631466098756 }},\n-      {{ -0.1441737229514477, -0.3347815066193075, -0.4611605626954958, 2.181799166007114, 1.6323192872442907, 0.15928222502988382 }},\n-      {{ -2.4693645353916667, 2.0428513209522623, 1.749924045625967, 1.7019213519700969, 1.142024009890298, 0.8079292507334053 }},\n+      {{ -0.3975566315544443, 0.5914998393825349, 0.6099048505253704, -2.2657754130482575, 0.36614796953745665, -0.9019941522654611 }},\n+      {{ -1.634528631004246, -1.0247790097319367, 0.7441596497436759, 1.1627072134985457, 0.05409335988074912, -0.12091065051829138 }},\n+      {{ 0.38395072299848293, 0.6541884828037803, 0.417837898603066, -0.9405446354332785, 2.184810649384631, -0.36876630139170674 }},\n+      {{ 1.4311717327837925, 0.9019482519954495, 0.010222966815173684, 0.3734603575926762, -0.48722286699557477, 0.6097423536728197 }},\n+      {{ -0.7136793187709407, -1.9428210404652928, 0.4274609198312262, 0.7241649472475438, 0.7127139917668667, -0.17169269406677637 }},\n+      {{ 0.7274093691413374, 1.5619764328746881, 0.3132760663502329, 0.1150444561729908, 0.2015964262316955, -1.6488397218364703 }},\n+      {{ -0.2753144111803734, 0.851664634951511, -0.7668837132534746, 0.8536953128922471, 0.5346385907475031, -0.3903852123459044 }},\n+      {{ -0.33049518181245935, -0.1445885038395346, 0.33671360297244707, 0.19923558301288513, 0.47714692266995923, 2.673625950077934 }},\n     }},\n     /*biases=*/{\n-      { 1.5113512311183828, 1.1809617131571573, 0.4478042727248335, -0.7947383308647096, 0.9825820925820611, 2.3808221280278645, -0.4758496641489877, -0.17036794796484162 }\n+      { 1.8781920773242509, 0.6510580145727756, 1.3641835181490685, -1.237083419397511, 0.09563962519162661, 1.0633713668067988, -0.2750294272946441, 0.4082406241441991 },\n     }\n   },\n   /*hidden_layer_2=*/{\n     /*weights=*/{{\n-      {{ 0.35014293742424724, -0.5476873131211425, 2.120121365055135, 0.2526392749218728, -0.9407987661758053, -0.9846910595845514, 0.48052568401528156, 0.3180570478836074 }},\n-      {{ -0.7150926363558526, -0.8982987199655207, 1.5360045616379934, 0.1803870098694977, -3.472436216409119, 1.0044744229912244, 0.4335209413598261, 1.041064125260285 }},\n-      {{ 0.8966091979738551, 2.227321493016081, -1.4494415364024744, 0.0254402271585605, 1.537814361721512, 1.3889169541326774, -0.16388027659485285, 1.7176584253327756 }},\n-      {{ -0.0597193070244571, -2.5061384854500623, 2.124958864280429, 0.020011322193699232, 0.48193219767756923, 1.323504600240459, 1.9316400738347115, 0.9369893381605147 }},\n-      {{ 0.032699385072007786, -0.9107111450265581, 0.5333081096223299, -0.03148698112648736, -0.16377114190322742, -1.6085833510134837, 0.7968443974614786, 2.238778726588351 }},\n-      {{ -1.5463140026380815, 1.5303232342633923, 1.3050928202993113, 0.17310173303944465, -0.9857258240351916, -0.9550401224056498, -0.0071639117187034555, -0.7976265480773017 }},\n-      {{ -2.2035284133385966, -0.9376946654220445, 1.3260159557423135, -0.406540234329094, 0.9533782897195586, 2.4910588396009277, -1.3676852361286786, 0.6322307655713885 }},\n-      {{ 0.32147827378305643, 0.26619936190034904, -1.200452781975383, 0.00920972156405369, 2.8156283745109, -1.229898728424551, 1.3389598114381762, 1.7166384524807266 }},\n+      {{ 1.482788775138106, -0.5911919348052194, -0.35265948412831416, 0.5693173975201452, 0.08299331485534553, -1.0926309595949408, 0.334160671733911, -0.8259113265483281 }},\n+      {{ -0.7244072332431708, 1.7167578358580047, -0.4425799291591407, 0.38193961610444616, -0.3131049026459214, 0.7057668457879581, -0.8977670579096759, -1.1564071580034785 }},\n+      {{ 0.2358887563481682, 0.845047198622242, 0.3965633248481624, -0.9292260319808021, 0.38780851270938177, 0.9073719197977955, 0.8942857890487362, 2.2078844573893486 }},\n+      {{ 0.7588397006376895, 0.39649528525833017, 1.1922103753418032, -0.2623025347145879, -1.8688404509544276, 0.23950836230216038, 0.15018196046213705, 1.1091046070474726 }},\n+      {{ -0.06639877236719088, 0.09408482409872725, 0.08853697547037886, -0.027191640785169502, -0.025050403848262424, -0.14821218627938373, -0.05119778874800481, -0.003846457076482196 }},\n+      {{ -1.3626737341753659, -0.509211567650967, -1.3709529389911908, 0.8181695565961004, -0.9154056938786789, 1.6786394527771, -0.38910973671573107, 0.6109302318778375 }},\n+      {{ -0.9490250745418807, -0.22890259271729135, -0.7669763564967859, -1.2378100390537607, 0.9325554827865082, -0.7707072257516585, -0.6101643395959798, 0.6438447441624673 }},\n+      {{ 1.1581876959277013, 1.4439015663052703, -1.4659507082977212, 1.0425420146162472, -0.20891484120663645, 0.3292514803046433, 0.38947771607697135, 0.06588859566944062 }},\n     }},\n     /*biases=*/{\n-      { 0.9699621387917686, 0.5909615635903002, 1.427690501080743, 0.8892984037070786, -0.8768819880157831, 3.2935191809063777, 1.8570755726618182, -1.0853011858156631 }\n+      { 2.0991435035679293, 0.9220598032166089, 0.001237522670163396, -0.2035381110666839, -0.7214610628375114, -2.275782698263265, 3.2572710355363337, -1.309956720253099 },\n     }\n   },\n   /*output_layer=*/{\n     /*weights=*/{{\n-      {{ 2.253756860038231, 2.6258281376128605, -1.6079113669729557, -4.006565437256236, -2.8600538503590087, 2.808280959332861, 2.8146068804622777, 2.604358926679522 }},\n+      {{ -2.214950317234679, 2.3173207097966624, -2.4148863077632057, 2.440952250974181, 0.016504153668811035, 3.00219780922754, 2.454200734592688, 2.444832006369846 }},\n     }},\n     /*biases=*/{\n-      { 0.26142347527936727 }\n+      { -0.2538826384470055 },\n     }\n   },\n-  /*threshold=*/0.03,\n+  /*threshold=*/0.05,\n };\n \n // clang-format on"
        }
    ],
    "stats": {
        "total": 94,
        "additions": 47,
        "deletions": 47
    }
}