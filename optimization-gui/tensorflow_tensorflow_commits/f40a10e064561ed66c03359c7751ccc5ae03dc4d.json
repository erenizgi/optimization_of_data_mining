{
    "author": "majnemer",
    "message": "Use standard library functions for character case checks and conversions.\n\nReplace manual ASCII character range comparisons and arithmetic-based case conversions with `absl::ascii_*` and `llvm::*` utility functions. This improves code clarity.\n\nPiperOrigin-RevId: 830207299",
    "sha": "f40a10e064561ed66c03359c7751ccc5ae03dc4d",
    "files": [
        {
            "sha": "048378e68f4525741164479057e67d60742dc218",
            "filename": "tensorflow/cc/framework/cc_op_gen_util.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f40a10e064561ed66c03359c7751ccc5ae03dc4d/tensorflow%2Fcc%2Fframework%2Fcc_op_gen_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f40a10e064561ed66c03359c7751ccc5ae03dc4d/tensorflow%2Fcc%2Fframework%2Fcc_op_gen_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcc%2Fframework%2Fcc_op_gen_util.cc?ref=f40a10e064561ed66c03359c7751ccc5ae03dc4d",
            "patch": "@@ -107,10 +107,10 @@ string ToGuard(absl::string_view path) {\n   string guard;\n   guard.reserve(path.size() + 1);  // + 1 -> trailing _\n   for (const char c : path) {\n-    if (c >= 'A' && c <= 'Z') {\n+    if (absl::ascii_isupper(c)) {\n       guard += c;\n-    } else if (c >= 'a' && c <= 'z') {\n-      guard += c + 'A' - 'a';\n+    } else if (absl::ascii_islower(c)) {\n+      guard += absl::ascii_toupper(c);\n     } else {\n       guard += '_';\n     }"
        },
        {
            "sha": "ddff766c789450e6a50e976776e8debb5456c394",
            "filename": "tensorflow/compiler/mlir/tfr/utils/utils.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f40a10e064561ed66c03359c7751ccc5ae03dc4d/tensorflow%2Fcompiler%2Fmlir%2Ftfr%2Futils%2Futils.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f40a10e064561ed66c03359c7751ccc5ae03dc4d/tensorflow%2Fcompiler%2Fmlir%2Ftfr%2Futils%2Futils.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Ftfr%2Futils%2Futils.cc?ref=f40a10e064561ed66c03359c7751ccc5ae03dc4d",
            "patch": "@@ -17,6 +17,7 @@ limitations under the License.\n \n #include <string>\n \n+#include \"llvm/ADT/StringExtras.h\"\n #include \"llvm/ADT/StringRef.h\"\n #include \"llvm/ADT/StringSet.h\"\n #include \"mlir/IR/Block.h\"  // from @llvm-project\n@@ -92,9 +93,9 @@ std::string GetComposeFuncName(StringRef tf_op_name) {\n     }\n     if (tf_op_name[i] == '.') {\n       compose_func_name.push_back('_');\n-    } else if (tf_op_name[i] >= 'A' && tf_op_name[i] <= 'Z') {\n+    } else if (llvm::isUpper(tf_op_name[i])) {\n       compose_func_name.push_back('_');\n-      compose_func_name.push_back(tf_op_name[i] + 'a' - 'A');\n+      compose_func_name.push_back(llvm::toLower(tf_op_name[i]));\n     } else {\n       compose_func_name.push_back(tf_op_name[i]);\n     }\n@@ -106,13 +107,13 @@ std::string GetTFOpName(StringRef compose_func_name) {\n   std::string tf_op_name;\n   bool after_underscore = false;\n   for (int i = 0; i < compose_func_name.size(); ++i) {\n-    if (compose_func_name[i] >= 'A' && compose_func_name[i] <= 'Z') {\n+    if (llvm::isUpper(compose_func_name[i])) {\n       // The field name must not contain uppercase letters.\n       return {};\n     }\n     if (after_underscore) {\n-      if (compose_func_name[i] >= 'a' && compose_func_name[i] <= 'z') {\n-        tf_op_name.push_back(compose_func_name[i] + 'A' - 'a');\n+      if (llvm::isLower(compose_func_name[i])) {\n+        tf_op_name.push_back(llvm::toUpper(compose_func_name[i]));\n         after_underscore = false;\n       } else {\n         // The character after a \"_\" must be a lowercase letter."
        }
    ],
    "stats": {
        "total": 17,
        "additions": 9,
        "deletions": 8
    }
}