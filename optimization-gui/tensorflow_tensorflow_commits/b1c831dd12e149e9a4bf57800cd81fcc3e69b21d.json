{
    "author": "tensorflower-gardener",
    "message": "Replace local wheel file prefix `file://` with `file:` for Windows platforms to fix installation of local wheels.\n\nPiperOrigin-RevId: 811851560",
    "sha": "b1c831dd12e149e9a4bf57800cd81fcc3e69b21d",
    "files": [
        {
            "sha": "2a9615dad7506cf9f68de34479ea1c88d9921896",
            "filename": "third_party/py/python_repo.bzl",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b1c831dd12e149e9a4bf57800cd81fcc3e69b21d/third_party%2Fpy%2Fpython_repo.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b1c831dd12e149e9a4bf57800cd81fcc3e69b21d/third_party%2Fpy%2Fpython_repo.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fpy%2Fpython_repo.bzl?ref=b1c831dd12e149e9a4bf57800cd81fcc3e69b21d",
            "patch": "@@ -180,6 +180,10 @@ def _get_injected_local_wheels(\n         py_version,\n         local_wheel_workspaces,\n         base_requirements):\n+    os_name = ctx.os.name\n+    is_windows = \"windows\" in os_name.lower()\n+    local_file_path_prefix = \"file:\" if is_windows else \"file://\"\n+\n     local_wheel_requirements = []\n     py_ver_marker = \"-cp%s-\" % py_version.replace(\".\", \"\")\n     py_major_ver_marker = \"-py%s-\" % py_version.split(\".\")[0]\n@@ -211,7 +215,8 @@ def _get_injected_local_wheels(\n         else:\n             local_package_name = wheel_name\n         local_wheel_requirements.append(\n-            \"{pypi_package_name} @ file://{wheel_path}\".format(\n+            \"{pypi_package_name} @ {local_file_path_prefix}{wheel_path}\".format(\n+                local_file_path_prefix = local_file_path_prefix,\n                 pypi_package_name = local_package_name,\n                 wheel_path = wheel_path.realpath,\n             ),"
        },
        {
            "sha": "2a9615dad7506cf9f68de34479ea1c88d9921896",
            "filename": "third_party/xla/third_party/py/python_repo.bzl",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b1c831dd12e149e9a4bf57800cd81fcc3e69b21d/third_party%2Fxla%2Fthird_party%2Fpy%2Fpython_repo.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b1c831dd12e149e9a4bf57800cd81fcc3e69b21d/third_party%2Fxla%2Fthird_party%2Fpy%2Fpython_repo.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fpy%2Fpython_repo.bzl?ref=b1c831dd12e149e9a4bf57800cd81fcc3e69b21d",
            "patch": "@@ -180,6 +180,10 @@ def _get_injected_local_wheels(\n         py_version,\n         local_wheel_workspaces,\n         base_requirements):\n+    os_name = ctx.os.name\n+    is_windows = \"windows\" in os_name.lower()\n+    local_file_path_prefix = \"file:\" if is_windows else \"file://\"\n+\n     local_wheel_requirements = []\n     py_ver_marker = \"-cp%s-\" % py_version.replace(\".\", \"\")\n     py_major_ver_marker = \"-py%s-\" % py_version.split(\".\")[0]\n@@ -211,7 +215,8 @@ def _get_injected_local_wheels(\n         else:\n             local_package_name = wheel_name\n         local_wheel_requirements.append(\n-            \"{pypi_package_name} @ file://{wheel_path}\".format(\n+            \"{pypi_package_name} @ {local_file_path_prefix}{wheel_path}\".format(\n+                local_file_path_prefix = local_file_path_prefix,\n                 pypi_package_name = local_package_name,\n                 wheel_path = wheel_path.realpath,\n             ),"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 12,
        "deletions": 2
    }
}