{
    "author": "metaflow",
    "message": "[XLA:GPU] remove is_autotuning_compilation arg from PtxCompileOptionsFromDebugOptions\n\nPiperOrigin-RevId: 837560227",
    "sha": "b73afa349af0145cf4b496d8c4ec58f653b52a5d",
    "files": [
        {
            "sha": "24c2bf8d20043eaafee497ce12749e575beff934",
            "filename": "third_party/xla/xla/service/gpu/nvptx_compiler.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b73afa349af0145cf4b496d8c4ec58f653b52a5d/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fnvptx_compiler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b73afa349af0145cf4b496d8c4ec58f653b52a5d/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fnvptx_compiler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fnvptx_compiler.cc?ref=b73afa349af0145cf4b496d8c4ec58f653b52a5d",
            "patch": "@@ -684,9 +684,7 @@ NVPTXCompiler::CompileTargetBinary(\n                       GetCompilationProvider(module_config.debug_options()));\n \n   se::cuda::CompilationOptions compilation_options =\n-      PtxCompileOptionsFromDebugOptions(\n-          module_config.debug_options(),\n-          /*is_autotuning_compilation=*/options.is_autotuning_compilation);\n+      PtxCompileOptionsFromDebugOptions(module_config.debug_options());\n \n   se::CudaComputeCapability cc =\n       *device_description.gpu_compute_capability().cuda_compute_capability();\n@@ -761,8 +759,7 @@ absl::StatusOr<std::vector<uint8_t>> NVPTXCompiler::LinkModules(\n   }\n \n   se::cuda::CompilationOptions compilation_options =\n-      PtxCompileOptionsFromDebugOptions(debug_options,\n-                                        /*is_autotuning_compilation=*/false);\n+      PtxCompileOptionsFromDebugOptions(debug_options);\n \n   VLOG(1) << \"Linking \" << modules.size()\n           << \" modules with compilation provider \""
        },
        {
            "sha": "4af1f48d684ce0d177e91a29f4123c6e2529c470",
            "filename": "third_party/xla/xla/service/gpu/ptx_compile_options_from_debug_options.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b73afa349af0145cf4b496d8c4ec58f653b52a5d/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b73afa349af0145cf4b496d8c4ec58f653b52a5d/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options.cc?ref=b73afa349af0145cf4b496d8c4ec58f653b52a5d",
            "patch": "@@ -21,7 +21,7 @@ limitations under the License.\n namespace xla::gpu {\n \n stream_executor::cuda::CompilationOptions PtxCompileOptionsFromDebugOptions(\n-    const DebugOptions& debug_options, bool is_autotuning_compilation) {\n+    const DebugOptions& debug_options) {\n   stream_executor::cuda::CompilationOptions compilation_options;\n   compilation_options.cancel_if_reg_spill =\n       debug_options.xla_gpu_fail_ptx_compilation_on_register_spilling();"
        },
        {
            "sha": "7036e36d7531b2603a4255e30f2702e4c734fa56",
            "filename": "third_party/xla/xla/service/gpu/ptx_compile_options_from_debug_options.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b73afa349af0145cf4b496d8c4ec58f653b52a5d/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b73afa349af0145cf4b496d8c4ec58f653b52a5d/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options.h?ref=b73afa349af0145cf4b496d8c4ec58f653b52a5d",
            "patch": "@@ -23,7 +23,7 @@ namespace xla::gpu {\n \n // Infers the compilation options from the given debug options.\n stream_executor::cuda::CompilationOptions PtxCompileOptionsFromDebugOptions(\n-    const DebugOptions& debug_options, bool is_autotuning_compilation);\n+    const DebugOptions& debug_options);\n \n }  // namespace xla::gpu\n "
        },
        {
            "sha": "e4ef92cb34fa660e637a072684c0234c35d65b29",
            "filename": "third_party/xla/xla/service/gpu/ptx_compile_options_from_debug_options_test.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 35,
            "changes": 43,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b73afa349af0145cf4b496d8c4ec58f653b52a5d/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b73afa349af0145cf4b496d8c4ec58f653b52a5d/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fptx_compile_options_from_debug_options_test.cc?ref=b73afa349af0145cf4b496d8c4ec58f653b52a5d",
            "patch": "@@ -29,63 +29,36 @@ using ::testing::Field;\n TEST(PtxCompileOptionsFromDebugOptionsTest,\n      DefaultDebugOptionsResultsInDefaultCompilationOptions) {\n   DebugOptions debug_options;\n-  EXPECT_EQ(PtxCompileOptionsFromDebugOptions(\n-                debug_options, /*is_autotuning_compilation=*/false),\n-            CompilationOptions{});\n-  EXPECT_EQ(PtxCompileOptionsFromDebugOptions(\n-                debug_options, /*is_autotuning_compilation=*/true),\n+  EXPECT_EQ(PtxCompileOptionsFromDebugOptions(debug_options),\n             CompilationOptions{});\n }\n \n TEST(PtxCompileOptionsFromDebugOptionsTest, OptimizationsCanBeDisabled) {\n   DebugOptions debug_options;\n   debug_options.set_xla_gpu_disable_gpuasm_optimizations(true);\n-  EXPECT_THAT(\n-      PtxCompileOptionsFromDebugOptions(debug_options,\n-                                        /*is_autotuning_compilation=*/false),\n-      Field(&CompilationOptions::disable_optimizations, true));\n-  EXPECT_THAT(\n-      PtxCompileOptionsFromDebugOptions(debug_options,\n-                                        /*is_autotuning_compilation=*/true),\n-      Field(&CompilationOptions::disable_optimizations, true));\n+  EXPECT_THAT(PtxCompileOptionsFromDebugOptions(debug_options),\n+              Field(&CompilationOptions::disable_optimizations, true));\n }\n \n TEST(PtxCompileOptionsFromDebugOptionsTest, LineInfoCanBeEnabled) {\n   DebugOptions debug_options;\n   debug_options.set_xla_gpu_generate_line_info(true);\n-  EXPECT_THAT(\n-      PtxCompileOptionsFromDebugOptions(debug_options,\n-                                        /*is_autotuning_compilation=*/false),\n-      Field(&CompilationOptions::generate_line_info, true));\n-  EXPECT_THAT(\n-      PtxCompileOptionsFromDebugOptions(debug_options,\n-                                        /*is_autotuning_compilation=*/true),\n-      Field(&CompilationOptions::generate_line_info, true));\n+  EXPECT_THAT(PtxCompileOptionsFromDebugOptions(debug_options),\n+              Field(&CompilationOptions::generate_line_info, true));\n }\n \n TEST(PtxCompileOptionsFromDebugOptionsTest, DebugInfoCanBeEnabled) {\n   DebugOptions debug_options;\n   debug_options.set_xla_gpu_generate_debug_info(true);\n-  EXPECT_THAT(\n-      PtxCompileOptionsFromDebugOptions(debug_options,\n-                                        /*is_autotuning_compilation=*/false),\n-      Field(&CompilationOptions::generate_debug_info, true));\n-  EXPECT_THAT(\n-      PtxCompileOptionsFromDebugOptions(debug_options,\n-                                        /*is_autotuning_compilation=*/true),\n-      Field(&CompilationOptions::generate_debug_info, true));\n+  EXPECT_THAT(PtxCompileOptionsFromDebugOptions(debug_options),\n+              Field(&CompilationOptions::generate_debug_info, true));\n }\n \n TEST(PtxCompileOptionsFromDebugOptionsTest,\n      RegSpillAsErrorCanBeEnabledForAllKernels) {\n   DebugOptions debug_options;\n   debug_options.set_xla_gpu_fail_ptx_compilation_on_register_spilling(true);\n-  EXPECT_THAT(\n-      PtxCompileOptionsFromDebugOptions(debug_options,\n-                                        /*is_autotuning_compilation=*/false),\n-      Field(&CompilationOptions::cancel_if_reg_spill, true));\n-  EXPECT_THAT(PtxCompileOptionsFromDebugOptions(\n-                  debug_options, /*is_autotuning_compilation=*/true),\n+  EXPECT_THAT(PtxCompileOptionsFromDebugOptions(debug_options),\n               Field(&CompilationOptions::cancel_if_reg_spill, true));\n }\n "
        }
    ],
    "stats": {
        "total": 54,
        "additions": 12,
        "deletions": 42
    }
}