{
    "author": "WillFroom",
    "message": "[XLA:CPU][XTile] Use shlo optimization passes.\n\nPiperOrigin-RevId: 836555555",
    "sha": "2ffe1ca33e784a45ebf08cef9759532ab760bfdf",
    "files": [
        {
            "sha": "4101093fc58d16ab2f4b27cede2e734783824b38",
            "filename": "third_party/xla/xla/backends/cpu/codegen/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2ffe1ca33e784a45ebf08cef9759532ab760bfdf/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2ffe1ca33e784a45ebf08cef9759532ab760bfdf/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD?ref=2ffe1ca33e784a45ebf08cef9759532ab760bfdf",
            "patch": "@@ -257,6 +257,7 @@ cc_library(\n         \"@stablehlo//:linalg_passes\",\n         \"@stablehlo//:stablehlo_ops\",\n         \"@stablehlo//:stablehlo_passes\",\n+        \"@stablehlo//:stablehlo_passes_optimization\",\n     ],\n )\n "
        },
        {
            "sha": "d2a11332eebb69d78b05de6e1e2e25a168a09f75",
            "filename": "third_party/xla/xla/backends/cpu/codegen/fusion_compiler.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2ffe1ca33e784a45ebf08cef9759532ab760bfdf/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Ffusion_compiler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2ffe1ca33e784a45ebf08cef9759532ab760bfdf/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Ffusion_compiler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Ffusion_compiler.cc?ref=2ffe1ca33e784a45ebf08cef9759532ab760bfdf",
            "patch": "@@ -97,6 +97,7 @@ limitations under the License.\n #include \"stablehlo/conversions/linalg/transforms/Passes.h\"\n #include \"stablehlo/dialect/StablehloOps.h\"\n #include \"stablehlo/transforms/Passes.h\"\n+#include \"stablehlo/transforms/optimization/Passes.h\"\n #include \"xla/backends/cpu/codegen/emitters/ir/xla_cpu_dialect.h\"\n #include \"xla/backends/cpu/codegen/emitters/transforms/passes.h\"\n #include \"xla/backends/cpu/codegen/kernel_api_ir_builder.h\"\n@@ -311,9 +312,13 @@ static void AddBufferizationPasses(mlir::OpPassManager& pm) {\n static void AddTiledOptimizationPasses(mlir::OpPassManager& pm) {\n   emitters::RegisterOptimizationPasses(pm);\n \n+  pm.addPass(CreateLowerXTileEntryPass());\n+\n+  pm.addNestedPass<mlir::func::FuncOp>(\n+      mlir::stablehlo::createStablehloTargetIndependentOptimizationPass());\n+\n   pm.addPass(CreateShloToVectorPass());\n   pm.addPass(mlir::createCanonicalizerPass());\n-  pm.addPass(CreateLowerXTileEntryPass());\n   pm.addNestedPass<mlir::func::FuncOp>(\n       mlir::vector::createLowerVectorMultiReductionPass(\n           mlir::vector::VectorMultiReductionLowering::InnerParallel));"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 7,
        "deletions": 1
    }
}