{
    "author": "tensorflower-gardener",
    "message": "Update tflite schema to allow external buffer\n\nPiperOrigin-RevId: 826640205",
    "sha": "a3f8740bc70ee7d756e057de2b8038eae18372bc",
    "files": [
        {
            "sha": "6cd1c51fb0cf9e824103b44e956406d1282b1f18",
            "filename": "tensorflow/compiler/mlir/lite/schema/schema.fbs",
            "status": "modified",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a3f8740bc70ee7d756e057de2b8038eae18372bc/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema.fbs",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a3f8740bc70ee7d756e057de2b8038eae18372bc/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema.fbs",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema.fbs?ref=a3f8740bc70ee7d756e057de2b8038eae18372bc",
            "patch": "@@ -24,6 +24,8 @@\n // Version 3c: Move constant tensor buffers & custom op buffers outside from\n //             Flatbuffers. Has backward compatibility with version 3, 3a and\n //             3b.\n+// Version 3d: Add ExternalBuffer tables and tensor.external_buffer field for\n+//             referencing immutable data stored in external files.\n \n namespace tflite;\n \n@@ -263,6 +265,11 @@ table Tensor {\n   // Currently only 1 subtype is supported. The field is defined as an array for\n   // flexibility of supporting multiple subtypes in the future.\n   variant_tensors:[VariantSubType];\n+\n+  // Optional reference to an ExternalBuffer entry that stores constant tensor\n+  // data outside of the FlatBuffer. A value of 0 indicates that the tensor uses\n+  // the traditional embedded buffer field instead.\n+  external_buffer:uint;\n }\n \n // A list of builtin operators. Builtin operators are slightly faster than custom\n@@ -1613,6 +1620,22 @@ table Buffer {\n   size: ulong;\n }\n \n+// Groups external buffers by file/URI.\n+table ExternalBufferGroup {\n+  name:string;\n+}\n+\n+// Describes an immutable data slice stored in an external file.\n+table ExternalBuffer {\n+  // Unique identifier for this external buffer.\n+  id:uint;\n+  // Index into the external_buffer_groups array.\n+  group:uint;\n+  offset:ulong;\n+  length:ulong;\n+  packing:string;\n+}\n+\n table Metadata {\n   // A human readable string to uniquely identify a Metadata.\n   name:string;\n@@ -1680,6 +1703,12 @@ table Model {\n \n   // Optional SignatureDefs for the model.\n   signature_defs:[SignatureDef];\n+\n+  // Optional groups for external weight buffers.\n+  external_buffer_groups:[ExternalBufferGroup];\n+\n+  // Optional list of external weight buffers referenced by tensors.\n+  external_buffers:[ExternalBuffer];\n }\n \n root_type Model;"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 29,
        "deletions": 0
    }
}