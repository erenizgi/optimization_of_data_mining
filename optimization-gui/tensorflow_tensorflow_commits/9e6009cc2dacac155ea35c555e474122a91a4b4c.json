{
    "author": "IllogicalMoose",
    "message": "Update command_buffer_thunk_test to use both driver_version and runtime_version to determine features to test.\n\nWhen using a newer driver, tests can be enabled for features that the linked sdk does not support. Make sure both sdk and driver are at the minimum version level.\n\nPiperOrigin-RevId: 799252692",
    "sha": "9e6009cc2dacac155ea35c555e474122a91a4b4c",
    "files": [
        {
            "sha": "101755fd9abbc3bdf6c0e6be90e0396cb3feb62e",
            "filename": "third_party/xla/xla/backends/gpu/runtime/command_buffer_thunk_test.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e6009cc2dacac155ea35c555e474122a91a4b4c/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_thunk_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e6009cc2dacac155ea35c555e474122a91a4b4c/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_thunk_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_thunk_test.cc?ref=9e6009cc2dacac155ea35c555e474122a91a4b4c",
            "patch": "@@ -121,7 +121,9 @@ bool IsAtLeastCuda12300(const se::StreamExecutor* stream_executor) {\n       &device_description.gpu_compute_capability());\n   if (cuda_cc != nullptr) {\n     if (device_description.driver_version() >=\n-        stream_executor::SemanticVersion(12, 3, 0)) {\n+            stream_executor::SemanticVersion(12, 3, 0) &&\n+        device_description.runtime_version() >=\n+            stream_executor::SemanticVersion(12, 3, 0)) {\n       return true;\n     }\n   }\n@@ -135,7 +137,9 @@ bool IsAtLeastCuda12900(const se::StreamExecutor* stream_executor) {\n       &device_description.gpu_compute_capability());\n   if (cuda_cc != nullptr) {\n     if (device_description.driver_version() >=\n-        stream_executor::SemanticVersion(12, 9, 0)) {\n+            stream_executor::SemanticVersion(12, 9, 0) &&\n+        device_description.runtime_version() >=\n+            stream_executor::SemanticVersion(12, 9, 0)) {\n       return true;\n     }\n   }"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    }
}