{
    "author": "tensorflower-gardener",
    "message": "Remove unused headers in hlo_op_profile\n\nPiperOrigin-RevId: 802710980",
    "sha": "bf88b42d3b810009b69b9062083f13abcc5cf6e9",
    "files": [
        {
            "sha": "bb3df3390e2bdf4a99e8b3d641f71a982bce8d6f",
            "filename": "third_party/xla/xla/service/gpu/model/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf88b42d3b810009b69b9062083f13abcc5cf6e9/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf88b42d3b810009b69b9062083f13abcc5cf6e9/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD?ref=bf88b42d3b810009b69b9062083f13abcc5cf6e9",
            "patch": "@@ -976,10 +976,11 @@ cc_library(\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service:hlo_proto_cc\",\n         \"//xla/stream_executor:device_description\",\n+        \"//xla/stream_executor/cuda:cuda_compute_capability\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/strings\",\n-        \"@local_tsl//tsl/platform:logging\",\n         \"@local_tsl//tsl/platform:protobuf\",\n     ],\n )\n@@ -1020,6 +1021,8 @@ cc_library(\n         \"//xla/service:interpreter_plugin\",\n         \"//xla/stream_executor:device_description\",\n         \"//xla/tests:test_utils\",\n+        \"//xla/tsl/platform:errors\",\n+        \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\","
        },
        {
            "sha": "b9e3bcd81e80a13ce228eecbc5e84348b186320c",
            "filename": "third_party/xla/xla/service/gpu/model/hlo_op_profiler.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf88b42d3b810009b69b9062083f13abcc5cf6e9/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf88b42d3b810009b69b9062083f13abcc5cf6e9/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiler.cc?ref=bf88b42d3b810009b69b9062083f13abcc5cf6e9",
            "patch": "@@ -42,10 +42,10 @@ limitations under the License.\n #include \"xla/shape_util.h\"\n #include \"xla/stream_executor/device_description.h\"\n #include \"xla/tests/test_utils.h\"\n+#include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/errors.h\"\n-#include \"tsl/platform/statusor.h\"\n \n #ifdef GOOGLE_CUDA\n #include \"xla/backends/profiler/gpu/cupti_collector.h\""
        },
        {
            "sha": "e280890141cb620ba4c17562df0efde571c090fd",
            "filename": "third_party/xla/xla/service/gpu/model/hlo_op_profiles.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf88b42d3b810009b69b9062083f13abcc5cf6e9/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiles.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf88b42d3b810009b69b9062083f13abcc5cf6e9/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiles.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiles.cc?ref=bf88b42d3b810009b69b9062083f13abcc5cf6e9",
            "patch": "@@ -20,13 +20,14 @@ limitations under the License.\n #include <utility>\n #include <variant>\n \n+#include \"absl/log/check.h\"\n #include \"absl/memory/memory.h\"\n #include \"absl/strings/str_cat.h\"\n+#include \"absl/strings/string_view.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/service/gpu/model/hlo_op_profile.pb.h\"\n #include \"xla/service/gpu/model/hlo_op_profiles_data.h\"\n #include \"xla/stream_executor/device_description.h\"\n-#include \"tsl/platform/logging.h\"\n #include \"tsl/platform/protobuf.h\"\n \n namespace xla {\n@@ -54,8 +55,8 @@ namespace gpu {\n     absl::string_view default_profile_name) {\n   ProfilesNestedMap profiles_map;\n   DeviceHloInstructionProfiles all_device_profiles;\n-  CHECK(tsl::protobuf::TextFormat::ParseFromString(\n-      std::string(profiles_text_proto), &all_device_profiles));\n+  CHECK(tsl::protobuf::TextFormat::ParseFromString(profiles_text_proto,\n+                                                   &all_device_profiles));\n   for (const auto& device_profile : all_device_profiles.entries()) {\n     for (const auto& entry : device_profile.second.entries()) {\n       auto op_code = StringToHloOpcode(entry.instruction().opcode()).value();"
        },
        {
            "sha": "94a9f1f603168e80f6961362ae2af06cb8b373a0",
            "filename": "third_party/xla/xla/service/gpu/model/hlo_op_profiles.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf88b42d3b810009b69b9062083f13abcc5cf6e9/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiles.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf88b42d3b810009b69b9062083f13abcc5cf6e9/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiles.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fhlo_op_profiles.h?ref=bf88b42d3b810009b69b9062083f13abcc5cf6e9",
            "patch": "@@ -22,11 +22,12 @@ limitations under the License.\n #include <utility>\n \n #include \"absl/container/flat_hash_map.h\"\n+#include \"absl/strings/string_view.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/service/gpu/model/hlo_op_profile.pb.h\"\n #include \"xla/service/hlo.pb.h\"\n #include \"xla/stream_executor/device_description.h\"\n-#include \"xla/types.h\"\n+#include \"xla/types.h\"  // IWYU pragma: export\n #include \"xla/xla_data.pb.h\"\n \n namespace xla {"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 12,
        "deletions": 7
    }
}