{
    "author": "tensorflower-gardener",
    "message": "Update autotuner to filter out \"Cublas_fission\" backends.\n\n- This fixes the xla_gpu_cublas_fallback flag behavior.\n\nPiperOrigin-RevId: 833294523",
    "sha": "8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c",
    "files": [
        {
            "sha": "eb5903a4625a75ea6de7725f3246797c6b8369c8",
            "filename": "third_party/xla/xla/backends/autotuner/autotuner.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner.cc?ref=8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c",
            "patch": "@@ -499,7 +499,7 @@ absl::StatusOr<Autotuner::ConfigResult> Autotuner::PickBestConfig(\n         std::remove_if(results.begin(), results.end(),\n                        [](const ConfigResult& result) {\n                          return result.config.codegen_backend->name() ==\n-                                \"cublas\";\n+                                \"Cublas_fission\";\n                        }),\n         results.end());\n   }"
        },
        {
            "sha": "fa92d3525f9469d6d6ab76583cc28613fef27fe1",
            "filename": "third_party/xla/xla/backends/autotuner/autotuner.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner.h?ref=8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c",
            "patch": "@@ -67,9 +67,9 @@ struct AutotuneConfig {\n   std::string dump_logs_to = \"\";\n   // TODO b/446618161 - Remove this when old triton emitter is\n   // deprecated.\n-  // If true, autotuner will not select cublas configs. We still try cublas\n-  // configs as they can be used to check numerical issues with triton but they\n-  // are not considered for selection, unless there are no other options.\n+  // If true, autotuner will not select cublas configs for fusions. We still try\n+  // the configs as they can be used to check numerical issues with triton but\n+  // they are not considered for selection, unless there are no other options.\n   bool exclude_cublas_config = false;\n   // TODO b/446870267- Remove this option and use default configs rather than\n   // the first config."
        },
        {
            "sha": "422c3714c68f1bf6ae9244e21fa19f9bf59f7df1",
            "filename": "third_party/xla/xla/backends/autotuner/autotuner_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fautotuner%2Fautotuner_test.cc?ref=8a1e75e8b0417447a01a6eb76fd0ae7b7120c80c",
            "patch": "@@ -667,7 +667,7 @@ TEST_F(AutotunerTest, ExcludeCublasConfig) {\n   EXPECT_CALL(*backend, Compile(_, _))\n       .WillOnce(Return(std::unique_ptr<Executable>()))\n       .WillOnce(Return(std::unique_ptr<Executable>()));\n-  EXPECT_CALL(*backend, name()).WillRepeatedly(Return(\"cublas\"));\n+  EXPECT_CALL(*backend, name()).WillRepeatedly(Return(\"Cublas_fission\"));\n   std::vector<std::unique_ptr<CodegenBackend>> backends;\n   backends.push_back(std::move(backend));\n "
        }
    ],
    "stats": {
        "total": 10,
        "additions": 5,
        "deletions": 5
    }
}