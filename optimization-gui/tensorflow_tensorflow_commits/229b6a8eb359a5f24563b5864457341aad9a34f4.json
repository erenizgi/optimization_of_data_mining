{
    "author": "thevilledev",
    "message": "PR #35049: refactor: use Literal::Make() in TextLiteralReader\n\nImported from GitHub PR https://github.com/openxla/xla/pull/35049\n\nüìù Summary of Changes\n\nReplace deprecated `Literal(shape)` constructor with `Literal::Make(shape)` which returns StatusOr and handles allocation failure gracefully.\n\nüéØ Justification\n\nThe `Literal(shape)` constructor is deprecated as seen in `literal.h`:\n\n```cpp\n  ABSL_DEPRECATED(\n      \"This ctor may crash if allocation fails. Use Literal::Make() instead.\")\n  explicit Literal(\n      const Shape& shape, bool allocate_arrays = true,\n      ArrayValueState leaf_array_value_state = ArrayValueState::kKnown);\n```\n\nüöÄ Kind of Contribution\nPlease remove what does not apply: ‚ôªÔ∏è Cleanup\n\nüìä Benchmark (for Performance Improvements)\nNot applicable.\n\nüß™ Unit Tests:\nNot applicable.\n\nüß™ Execution Tests:\nNot applicable.\n\nCopybara import of the project:\n\n--\nd2ea47c670f9e25cc4ac42190cabe60304c31d52 by Ville Vesilehto <ville@vesilehto.fi>:\n\nrefactor: use Literal::Make() in TextLiteralReader\n\nReplace deprecated Literal(shape) constructor with Literal::Make()\nwhich returns StatusOr and handles allocation failure gracefully.\n\nSigned-off-by: Ville Vesilehto <ville@vesilehto.fi>\n\nMerging this change closes #35049\n\nPiperOrigin-RevId: 843140989",
    "sha": "229b6a8eb359a5f24563b5864457341aad9a34f4",
    "files": [
        {
            "sha": "d5fde2a80aa0f3a952f53b631f227c2de0685b73",
            "filename": "third_party/xla/xla/text_literal_reader.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/229b6a8eb359a5f24563b5864457341aad9a34f4/third_party%2Fxla%2Fxla%2Ftext_literal_reader.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/229b6a8eb359a5f24563b5864457341aad9a34f4/third_party%2Fxla%2Fxla%2Ftext_literal_reader.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftext_literal_reader.cc?ref=229b6a8eb359a5f24563b5864457341aad9a34f4",
            "patch": "@@ -90,7 +90,7 @@ absl::StatusOr<Literal> TextLiteralReader::ReadAllLines() {\n         ShapeUtil::HumanString(shape));\n   }\n \n-  Literal result(shape);\n+  TF_ASSIGN_OR_RETURN(Literal result, Literal::Make(shape));\n   const float fill = std::numeric_limits<float>::quiet_NaN();\n   result.PopulateWithValue<float>(fill);\n   std::vector<absl::string_view> pieces;"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}