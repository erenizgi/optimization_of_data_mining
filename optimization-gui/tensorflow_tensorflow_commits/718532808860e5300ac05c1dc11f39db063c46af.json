{
    "author": "vwbaker",
    "message": "Mark BlockLevelEmitterBackend as potentially producing wrong results.\n\nThe `BlockLevelEmitterBackend` uses the Triton emitter, which can sometimes produce incorrect results. Marking it as such makes sure that it's never used as the reference implementation.\n\nPiperOrigin-RevId: 815716432",
    "sha": "718532808860e5300ac05c1dc11f39db063c46af",
    "files": [
        {
            "sha": "3e5b9d00f574337f4d34de1d062167fc67d50214",
            "filename": "third_party/xla/xla/backends/gpu/autotuner/block_level_emitter.h",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/718532808860e5300ac05c1dc11f39db063c46af/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fautotuner%2Fblock_level_emitter.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/718532808860e5300ac05c1dc11f39db063c46af/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fautotuner%2Fblock_level_emitter.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fautotuner%2Fblock_level_emitter.h?ref=718532808860e5300ac05c1dc11f39db063c46af",
            "patch": "@@ -39,7 +39,7 @@ namespace gpu {\n //\n // This backend enables autotuning of Triton-based fusion computations at the\n // block level. It generates tiling configurations, applies them to\n-// instructions,and prepares them for compilation using the Triton emitter.\n+// instructions, and prepares them for compilation using the Triton emitter.\n class BlockLevelEmitterBackend : public GpuCodegenBackend {\n  public:\n   explicit BlockLevelEmitterBackend(\n@@ -69,6 +69,10 @@ class BlockLevelEmitterBackend : public GpuCodegenBackend {\n   // Determines whether the given HLO instruction is supported by this backend.\n   bool IsSupported(const HloInstruction& instr);\n \n+  // We don't want to use the Triton emitter as a reference because it can\n+  // produce wrong results.\n+  bool CanProduceWrongResults() const override { return true; }\n+\n  private:\n   absl::StatusOr<BlockLevelFusionConfig> GetCostModelConfig(\n       const HloInstruction& instr) const;"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}