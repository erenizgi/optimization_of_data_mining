{
    "author": "othakkar",
    "message": "PR #31300: [XLA:CPU][BugFix] Fix ODR Violation by Renaming Duplicate IsSupportedType Definition\n\nImported from GitHub PR https://github.com/openxla/xla/pull/31300\n\nTwo different definitions of `xla::cpu::IsSupportedType(...)` in `onednn_util.h` and `convolution_lib.cc` cause ODR (One Definition Rule) violation. This occurs when modifying the `IsSupportedType(...)` function in `onednn_util.h` (e.g., adding logs), which causes the compiler not to inline the function and results in undefined behavior.\n\nThis PR fixes the issue by renaming the `IsSupportedType(...)` function in `convolution_lib.cc` (as changing the name in `onednn_util.h` will need changes in its multiple invocations).\nCopybara import of the project:\n\n--\nc9b2bcde52ac7f0decfd652d0627467f8b31308f by Om Thakkar <om.thakkar@intel.com>:\n\nrename IsSupportedType in convolution_lib.cc\n\n--\n2e2a5159f92d1a474ffb9d5b64ec91af34b0db0d by Om Thakkar <om.thakkar@intel.com>:\n\nmake the IsConvSupportedType inline\n\nMerging this change closes #31300\n\nPiperOrigin-RevId: 817128202",
    "sha": "4a83ea741595661abf7831614b1496454657eb47",
    "files": [
        {
            "sha": "cda85eb51229f9b3c8f046885ec48f93637cc15c",
            "filename": "third_party/xla/xla/backends/cpu/runtime/convolution_lib.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4a83ea741595661abf7831614b1496454657eb47/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fconvolution_lib.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4a83ea741595661abf7831614b1496454657eb47/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fconvolution_lib.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fconvolution_lib.cc?ref=4a83ea741595661abf7831614b1496454657eb47",
            "patch": "@@ -93,7 +93,7 @@ static absl::Status ValidateConvolutionShapes(\n   return absl::OkStatus();\n }\n \n-bool IsSupportedType(PrimitiveType primitive_type) {\n+inline bool IsConvSupportedType(PrimitiveType primitive_type) {\n   return primitive_type == PrimitiveType::F16 ||\n          primitive_type == PrimitiveType::F32;\n }\n@@ -105,7 +105,7 @@ absl::StatusOr<ConvolutionCanonicalDims> GetConvolutionCanonicalDims(\n       slices.input_shape, slices.kernel_shape, slices.output_shape, dnums));\n \n   auto primitive_type = slices.input_shape.element_type();\n-  if (!IsSupportedType(primitive_type)) {\n+  if (!IsConvSupportedType(primitive_type)) {\n     return InvalidArgument(\"ConvolutionThunk: Unsupported element type (%s)\",\n                            PrimitiveType_Name(primitive_type));\n   }"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}