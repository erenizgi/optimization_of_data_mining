{
    "author": "ermilovmaxim",
    "message": "Only show warning about nvml symbol when relevant\n\nPiperOrigin-RevId: 841846078",
    "sha": "0de1b0f2ad88d1c14bb825102aa0d10f909a319b",
    "files": [
        {
            "sha": "cc487db33451033b47d2e7389443d0988bd6e6c7",
            "filename": "third_party/xla/xla/stream_executor/cuda/cuda_executor.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0de1b0f2ad88d1c14bb825102aa0d10f909a319b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_executor.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0de1b0f2ad88d1c14bb825102aa0d10f909a319b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_executor.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_executor.cc?ref=0de1b0f2ad88d1c14bb825102aa0d10f909a319b",
            "patch": "@@ -1837,8 +1837,10 @@ CudaExecutor::CreateDeviceDescription(int device_ordinal) {\n       info.cluster_uuid = fabric_info->cluster_uuid;\n       info.clique_id = fabric_info->clique_id;\n     } else {\n-      LOG(WARNING) << \"GPU interconnect information not available: \"\n-                   << fabric_info.status();\n+      if (cc.IsAtLeastHopper() && p2p_link_count.ok() && *p2p_link_count) {\n+        LOG(WARNING) << \"GPU interconnect information not available: \"\n+                     << fabric_info.status();\n+      }\n     }\n     desc.set_device_interconnect_info(info);\n   }"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}