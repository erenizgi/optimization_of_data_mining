{
    "author": "tensorflower-gardener",
    "message": "Use SYCL/OneAPI build configuration from `rules_ml_toolchain`.\n\nPiperOrigin-RevId: 814455453",
    "sha": "648fed6a61492de91bc9967e6a98cd7274b076ea",
    "files": [
        {
            "sha": "0f013afc00c3bf6c772ce48dd88a48da051efea2",
            "filename": "third_party/xla/WORKSPACE",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/648fed6a61492de91bc9967e6a98cd7274b076ea/third_party%2Fxla%2FWORKSPACE",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/648fed6a61492de91bc9967e6a98cd7274b076ea/third_party%2Fxla%2FWORKSPACE",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2FWORKSPACE?ref=648fed6a61492de91bc9967e6a98cd7274b076ea",
            "patch": "@@ -27,6 +27,8 @@ register_toolchains(\"@rules_ml_toolchain//cc:linux_x86_64_linux_x86_64\")\n \n register_toolchains(\"@rules_ml_toolchain//cc:linux_x86_64_linux_x86_64_cuda\")\n \n+register_toolchains(\"@rules_ml_toolchain//cc:linux_x86_64_linux_x86_64_sycl\")\n+\n register_toolchains(\"@rules_ml_toolchain//cc:linux_aarch64_linux_aarch64\")\n \n register_toolchains(\"@rules_ml_toolchain//cc:linux_aarch64_linux_aarch64_cuda\")"
        },
        {
            "sha": "94101d0d49697ed5174eaaffdaf7ebb44a8f9d0d",
            "filename": "third_party/xla/tensorflow.bazelrc",
            "status": "modified",
            "additions": 2,
            "deletions": 9,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/648fed6a61492de91bc9967e6a98cd7274b076ea/third_party%2Fxla%2Ftensorflow.bazelrc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/648fed6a61492de91bc9967e6a98cd7274b076ea/third_party%2Fxla%2Ftensorflow.bazelrc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Ftensorflow.bazelrc?ref=648fed6a61492de91bc9967e6a98cd7274b076ea",
            "patch": "@@ -297,22 +297,15 @@ common:rocm_ci_hermetic --@local_config_rocm//rocm:rocm_path_type=hermetic\n \n # This config option is used for SYCL as GPU backend.\n # SYCL Configuration (non-hermetic)\n-common:sycl --crosstool_top=@local_config_sycl//crosstool:toolchain\n-common:sycl --define=using_sycl=true\n-common:sycl --define=tensorflow_mkldnn_contraction_kernel=0\n+common:sycl --@rules_ml_toolchain//common:enable_sycl=True\n common:sycl --repo_env=TF_NEED_SYCL=1\n+common:sycl --define=tensorflow_mkldnn_contraction_kernel=0\n common:sycl --cxxopt=-std=c++17\n common:sycl --host_cxxopt=-std=c++17\n common:sycl --repo_env=SYCL_BUILD_HERMETIC=0\n-common:sycl --config=clang_local\n \n # Enable Clang for host and icpx for SYCL\n common:icpx_clang --repo_env TF_ICPX_CLANG=1\n-common:icpx_clang --action_env=CLANG_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n-common:icpx_clang --linkopt=\"-fuse-ld=lld\"\n-common:icpx_clang --linkopt=\"-lm\"\n-common:icpx_clang --host_linkopt=\"-lm\"\n-common:icpx_clang --host_linkopt=\"-fuse-ld=lld\"\n common:icpx_clang --copt=-fclang-abi-compat=17\n \n # Hermetic SYCL Configuration"
        },
        {
            "sha": "4b1d5498101bf6a9f214559dc141f9af5ac43fcd",
            "filename": "third_party/xla/workspace2.bzl",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/648fed6a61492de91bc9967e6a98cd7274b076ea/third_party%2Fxla%2Fworkspace2.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/648fed6a61492de91bc9967e6a98cd7274b076ea/third_party%2Fxla%2Fworkspace2.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fworkspace2.bzl?ref=648fed6a61492de91bc9967e6a98cd7274b076ea",
            "patch": "@@ -5,6 +5,8 @@ load(\"@bazel_skylib//lib:versions.bzl\", \"versions\")\n load(\"@bazel_tools//tools/build_defs/repo:java.bzl\", \"java_import_external\")\n load(\"@bazel_tools//tools/build_defs/repo:utils.bzl\", \"maybe\")\n load(\"@io_bazel_rules_closure//closure:defs.bzl\", \"filegroup_external\")\n+load(\"@rules_ml_toolchain//gpu/sycl:sycl_configure.bzl\", \"sycl_configure\")\n+load(\"@rules_ml_toolchain//gpu/sycl:sycl_init_repository.bzl\", \"sycl_init_repository\")\n load(\"//third_party:repo.bzl\", \"tf_http_archive\", \"tf_mirror_urls\")\n load(\"//third_party/absl:workspace.bzl\", absl = \"repo\")\n load(\"//third_party/benchmark:workspace.bzl\", benchmark = \"repo\")\n@@ -22,7 +24,6 @@ load(\"//third_party/gemmlowp:workspace.bzl\", gemmlowp = \"repo\")\n load(\"//third_party/git:git_configure.bzl\", \"git_configure\")\n load(\"//third_party/gloo:workspace.bzl\", gloo = \"repo\")\n load(\"//third_party/gpus:rocm_configure.bzl\", \"rocm_configure\")\n-load(\"//third_party/gpus:sycl_configure.bzl\", \"sycl_configure\")\n load(\"//third_party/highwayhash:workspace.bzl\", highwayhash = \"repo\")\n load(\"//third_party/hwloc:workspace.bzl\", hwloc = \"repo\")\n load(\"//third_party/implib_so:workspace.bzl\", implib_so = \"repo\")\n@@ -115,6 +116,7 @@ def _tf_toolchains():\n     git_configure(name = \"local_config_git\")\n     python_configure(name = \"local_config_python\")\n     rocm_configure(name = \"local_config_rocm\")\n+    sycl_init_repository()\n     sycl_configure(name = \"local_config_sycl\")\n     remote_execution_configure(name = \"local_config_remote_execution\")\n "
        }
    ],
    "stats": {
        "total": 17,
        "additions": 7,
        "deletions": 10
    }
}