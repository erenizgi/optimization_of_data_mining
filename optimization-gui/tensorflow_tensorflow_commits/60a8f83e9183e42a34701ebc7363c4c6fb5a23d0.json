{
    "author": "loislo",
    "message": "[XLA:GPU] Add `kScaledDot` to the mixed precision list of HLO ops and update test.\n\nthe scaled-dot op is mixed precision by design.\n\nPiperOrigin-RevId: 803022105",
    "sha": "60a8f83e9183e42a34701ebc7363c4c6fb5a23d0",
    "files": [
        {
            "sha": "8dd878c9ff7c6bae167a6e45b0c590f5dcc63a9f",
            "filename": "third_party/xla/xla/service/hlo_verifier.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/60a8f83e9183e42a34701ebc7363c4c6fb5a23d0/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_verifier.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/60a8f83e9183e42a34701ebc7363c4c6fb5a23d0/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_verifier.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_verifier.cc?ref=60a8f83e9183e42a34701ebc7363c4c6fb5a23d0",
            "patch": "@@ -1920,6 +1920,7 @@ absl::Status CheckMixedPrecisionOperands(const HloInstruction* instruction) {\n     case HloOpcode::kConvolution:\n     case HloOpcode::kDot:\n     case HloOpcode::kRaggedDot:\n+    case HloOpcode::kScaledDot:\n     case HloOpcode::kAllReduce:\n     case HloOpcode::kAllReduceStart:\n     case HloOpcode::kAllReduceDone:"
        },
        {
            "sha": "9c44bb05811d196d1dbdedae00bd6901c78011f6",
            "filename": "third_party/xla/xla/service/hlo_verifier_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/60a8f83e9183e42a34701ebc7363c4c6fb5a23d0/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_verifier_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/60a8f83e9183e42a34701ebc7363c4c6fb5a23d0/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_verifier_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_verifier_test.cc?ref=60a8f83e9183e42a34701ebc7363c4c6fb5a23d0",
            "patch": "@@ -4807,10 +4807,10 @@ TEST_F(HloVerifierTest, ScaledDotWithBothScalesSucceeds) {\n   static constexpr absl::string_view kScaledDotHloString = R\"(\n     HloModule module\n     ENTRY entry_computation {\n-      a = f32[2,10] parameter(0)\n-      b = f32[10,2] parameter(1)\n-      a_scale = f32[2,2] parameter(2)\n-      b_scale = f32[2,2] parameter(3)\n+      a = f8e5m2[2,10] parameter(0)\n+      b = f8e8m0fnu[10,2] parameter(1)\n+      a_scale = f8e5m2[2,2] parameter(2)\n+      b_scale = f8e8m0fnu[2,2] parameter(3)\n       ROOT dot = f32[2,2] scaled-dot(a, a_scale, b, b_scale),\n         lhs_contracting_dims={1},\n         rhs_contracting_dims={0}"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 5,
        "deletions": 4
    }
}