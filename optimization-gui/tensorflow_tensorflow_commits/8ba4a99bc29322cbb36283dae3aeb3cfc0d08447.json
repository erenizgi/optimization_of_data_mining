{
    "author": "slackito",
    "message": "Integrate LLVM at llvm/llvm-project@d28c07b7550a\n\nUpdates LLVM usage to match\n[d28c07b7550a](https://github.com/llvm/llvm-project/commit/d28c07b7550a)\n\nPiperOrigin-RevId: 813490970",
    "sha": "8ba4a99bc29322cbb36283dae3aeb3cfc0d08447",
    "files": [
        {
            "sha": "509398da979e83350e3eb05534a4a72c6e1f3b19",
            "filename": "third_party/xla/third_party/llvm/generated.patch",
            "status": "modified",
            "additions": 0,
            "deletions": 876,
            "changes": 876,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch?ref=8ba4a99bc29322cbb36283dae3aeb3cfc0d08447",
            "patch": "@@ -1,877 +1 @@\n Auto generated patch. Do not edit or delete it, even if empty.\n-diff -ruN --strip-trailing-cr a/libcxx/include/ext/hash_set b/libcxx/include/ext/hash_set\n---- a/libcxx/include/ext/hash_set\n-+++ b/libcxx/include/ext/hash_set\n-@@ -534,10 +534,7 @@\n- }\n- \n- template <class _Value, class _Hash, class _Pred, class _Alloc>\n--hash_multiset<_Value, _Hash, _Pred, _Alloc>::hash_multiset(const hash_multiset& __u) : __table_(__u.__table_) {\n--  __table_.__rehash_multi(__u.bucket_count());\n--  insert(__u.begin(), __u.end());\n--}\n-+hash_multiset<_Value, _Hash, _Pred, _Alloc>::hash_multiset(const hash_multiset& __u) : __table_(__u.__table_) {}\n- \n- template <class _Value, class _Hash, class _Pred, class _Alloc>\n- template <class _InputIterator>\n-diff -ruN --strip-trailing-cr a/libcxx/test/extensions/gnu/hash_multiset/copy.pass.cpp b/libcxx/test/extensions/gnu/hash_multiset/copy.pass.cpp\n---- a/libcxx/test/extensions/gnu/hash_multiset/copy.pass.cpp\n-+++ b/libcxx/test/extensions/gnu/hash_multiset/copy.pass.cpp\n-@@ -0,0 +1,27 @@\n-+//===----------------------------------------------------------------------===//\n-+//\n-+// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.\n-+// See https://llvm.org/LICENSE.txt for license information.\n-+// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception\n-+//\n-+//===----------------------------------------------------------------------===//\n-+\n-+// ADDITIONAL_COMPILE_FLAGS: -Wno-deprecated\n-+\n-+// hash_multiset::hash_multiset(const hash_multiset&)\n-+\n-+#include <cassert>\n-+#include <ext/hash_set>\n-+\n-+int main(int, char**) {\n-+  __gnu_cxx::hash_multiset<int> set;\n-+\n-+  set.insert(1);\n-+  set.insert(1);\n-+\n-+  auto set2 = set;\n-+\n-+  assert(set2.size() == 2);\n-+\n-+  return 0;\n-+}\n-diff -ruN --strip-trailing-cr a/llvm/lib/CodeGen/AsmPrinter/DwarfExpression.cpp b/llvm/lib/CodeGen/AsmPrinter/DwarfExpression.cpp\n---- a/llvm/lib/CodeGen/AsmPrinter/DwarfExpression.cpp\n-+++ b/llvm/lib/CodeGen/AsmPrinter/DwarfExpression.cpp\n-@@ -154,7 +154,7 @@\n-     unsigned Size = TRI.getSubRegIdxSize(Idx);\n-     unsigned Offset = TRI.getSubRegIdxOffset(Idx);\n-     Reg = TRI.getDwarfRegNum(SR, false);\n--    if (Reg < 0)\n-+    if (Reg < 0 || Offset + Size > RegSize)\n-       continue;\n- \n-     // Used to build the intersection between the bits we already\n-diff -ruN --strip-trailing-cr a/llvm/lib/Transforms/Vectorize/VPlan.h b/llvm/lib/Transforms/Vectorize/VPlan.h\n---- a/llvm/lib/Transforms/Vectorize/VPlan.h\n-+++ b/llvm/lib/Transforms/Vectorize/VPlan.h\n-@@ -705,6 +705,9 @@\n-   VPIRFlags(WrapFlagsTy WrapFlags)\n-       : OpType(OperationType::OverflowingBinOp), WrapFlags(WrapFlags) {}\n- \n-+  VPIRFlags(TruncFlagsTy TruncFlags)\n-+      : OpType(OperationType::Trunc), TruncFlags(TruncFlags) {}\n-+\n-   VPIRFlags(FastMathFlags FMFs) : OpType(OperationType::FPMathOp), FMFs(FMFs) {}\n- \n-   VPIRFlags(DisjointFlagsTy DisjointFlags)\n-@@ -1494,9 +1497,10 @@\n- \n-   VPWidenCastRecipe(Instruction::CastOps Opcode, VPValue *Op, Type *ResultTy,\n-                     const VPIRFlags &Flags = {},\n-+                    const VPIRMetadata &Metadata = {},\n-                     DebugLoc DL = DebugLoc::getUnknown())\n-       : VPRecipeWithIRFlags(VPDef::VPWidenCastSC, Op, Flags, DL),\n--        VPIRMetadata(), Opcode(Opcode), ResultTy(ResultTy) {\n-+        VPIRMetadata(Metadata), Opcode(Opcode), ResultTy(ResultTy) {\n-     assert(flagsValidForOpcode(Opcode) &&\n-            \"Set flags not supported for the provided opcode\");\n-   }\n-@@ -1504,11 +1508,11 @@\n-   ~VPWidenCastRecipe() override = default;\n- \n-   VPWidenCastRecipe *clone() override {\n-+    auto *New = new VPWidenCastRecipe(Opcode, getOperand(0), ResultTy, *this,\n-+                                      *this, getDebugLoc());\n-     if (auto *UV = getUnderlyingValue())\n--      return new VPWidenCastRecipe(Opcode, getOperand(0), ResultTy,\n--                                   *cast<CastInst>(UV));\n--\n--    return new VPWidenCastRecipe(Opcode, getOperand(0), ResultTy);\n-+      New->setUnderlyingValue(UV);\n-+    return New;\n-   }\n- \n-   VP_CLASSOF_IMPL(VPDef::VPWidenCastSC)\n-diff -ruN --strip-trailing-cr a/llvm/lib/Transforms/Vectorize/VPlanRecipes.cpp b/llvm/lib/Transforms/Vectorize/VPlanRecipes.cpp\n---- a/llvm/lib/Transforms/Vectorize/VPlanRecipes.cpp\n-+++ b/llvm/lib/Transforms/Vectorize/VPlanRecipes.cpp\n-@@ -2016,13 +2016,13 @@\n-     return Opcode == Instruction::FAdd || Opcode == Instruction::FMul ||\n-            Opcode == Instruction::FSub || Opcode == Instruction::FNeg ||\n-            Opcode == Instruction::FDiv || Opcode == Instruction::FRem ||\n-+           Opcode == Instruction::FPExt || Opcode == Instruction::FPTrunc ||\n-            Opcode == Instruction::FCmp || Opcode == Instruction::Select ||\n-            Opcode == VPInstruction::WideIVStep ||\n-            Opcode == VPInstruction::ReductionStartVector ||\n-            Opcode == VPInstruction::ComputeReductionResult;\n-   case OperationType::NonNegOp:\n--    return Opcode == Instruction::ZExt;\n--    break;\n-+    return Opcode == Instruction::ZExt || Opcode == Instruction::UIToFP;\n-   case OperationType::Cmp:\n-     return Opcode == Instruction::FCmp || Opcode == Instruction::ICmp;\n-   case OperationType::Other:\n-diff -ruN --strip-trailing-cr a/llvm/lib/Transforms/Vectorize/VPlanTransforms.cpp b/llvm/lib/Transforms/Vectorize/VPlanTransforms.cpp\n---- a/llvm/lib/Transforms/Vectorize/VPlanTransforms.cpp\n-+++ b/llvm/lib/Transforms/Vectorize/VPlanTransforms.cpp\n-@@ -2195,7 +2195,8 @@\n-         auto [ProcessedIter, IterIsEmpty] = ProcessedTruncs.try_emplace(Op);\n-         VPWidenCastRecipe *NewOp =\n-             IterIsEmpty\n--                ? new VPWidenCastRecipe(Instruction::Trunc, Op, NewResTy)\n-+                ? new VPWidenCastRecipe(Instruction::Trunc, Op, NewResTy,\n-+                                        VPIRFlags::TruncFlagsTy(false, false))\n-                 : ProcessedIter->second;\n-         R.setOperand(Idx, NewOp);\n-         if (!IterIsEmpty)\n-@@ -3566,13 +3567,13 @@\n-                                    Mul, Ext0, Ext1, Ext)) {\n-       auto *NewExt0 = new VPWidenCastRecipe(\n-           Ext0->getOpcode(), Ext0->getOperand(0), Ext->getResultType(), *Ext0,\n--          Ext0->getDebugLoc());\n-+          *Ext0, Ext0->getDebugLoc());\n-       NewExt0->insertBefore(Ext0);\n- \n-       VPWidenCastRecipe *NewExt1 = NewExt0;\n-       if (Ext0 != Ext1) {\n-         NewExt1 = new VPWidenCastRecipe(Ext1->getOpcode(), Ext1->getOperand(0),\n--                                        Ext->getResultType(), *Ext1,\n-+                                        Ext->getResultType(), *Ext1, *Ext1,\n-                                         Ext1->getDebugLoc());\n-         NewExt1->insertBefore(Ext1);\n-       }\n-diff -ruN --strip-trailing-cr a/llvm/test/CodeGen/AArch64/debug-info-sve-pair.mir b/llvm/test/CodeGen/AArch64/debug-info-sve-pair.mir\n---- a/llvm/test/CodeGen/AArch64/debug-info-sve-pair.mir\n-+++ b/llvm/test/CodeGen/AArch64/debug-info-sve-pair.mir\n-@@ -0,0 +1,344 @@\n-+# RUN: llc -start-before=aarch64-asm-printer -o - %s | FileCheck %s\n-+\n-+# Check that z30_z31 debug info does not crash.\n-+\n-+# CHECK: .Ldebug_loc0:\n-+# CHECK:        .byte   4                               // DW_LLE_offset_pair\n-+# CHECK:        .uleb128 .Ltmp2-.Lfunc_begin0           //   starting offset\n-+# CHECK:        .uleb128 .Ltmp3-.Lfunc_begin0           //   ending offset\n-+# CHECK:        .byte   2                               // Loc expr size\n-+# CHECK:        .byte   144                             // DW_OP_regx\n-+# CHECK:        .byte   126                             // 126\n-+# CHECK:        .byte   4                               // DW_LLE_offset_pair\n-+# CHECK:        .uleb128 .Ltmp3-.Lfunc_begin0           //   starting offset\n-+# CHECK:        .uleb128 .Lfunc_end0-.Lfunc_begin0      //   ending offset\n-+# CHECK:        .byte   6                               // Loc expr size\n-+# CHECK:        .byte   144                             // sub-register DW_OP_regx\n-+# CHECK:        .byte   94                              // 94\n-+# CHECK:        .byte   147                             // DW_OP_piece\n-+# CHECK:        .byte   16                              // 16\n-+# CHECK:        .byte   147                             // DW_OP_piece\n-+# CHECK:        .byte   31                              // 31\n-+# CHECK:        .byte   0                               // DW_LLE_end_of_list\n-+\n-+\n-+--- |\n-+  target datalayout = \"e-m:e-p270:32:32-p271:32:32-p272:64:64-i8:8:32-i16:16:32-i64:64-i128:128-n32:64-S128-Fn32\"\n-+  target triple = \"aarch64\"\n-+\n-+  define void @_Z10Sort16RowsILi6EEv12SharedTraitsI10TraitsLaneEP22Trans_NS_hwy_float16_tiS4_(i8 %st.coerce, ptr noundef %keys, i32 noundef %0, ptr noundef %1) #2 !dbg !2 {\n-+      unreachable\n-+  }\n-+\n-+  attributes #2 = { mustprogress uwtable vscale_range(1,16) \"frame-pointer\"=\"non-leaf\" \"no-trapping-math\"=\"true\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"neoverse-n1\" \"target-features\"=\"+aes,+crc,+dotprod,+fp-armv8,+fullfp16,+lse,+neon,+perfmon,+ras,+rcpc,+rdm,+sha2,+spe,+ssbs,+sve,+sve-aes,+sve2,+sve2-aes,+v8.1a,+v8.2a,+v8a,-fmv\" \"tune-cpu\"=\"generic\" }\n-+\n-+  !llvm.dbg.cu = !{!3}\n-+  !llvm.module.flags = !{!4, !5, !6, !7, !8, !9}\n-+  !llvm.ident = !{!10}\n-+\n-+  !2 = distinct !DISubprogram(name: \"Sort16Rows<6>\", linkageName: \"_Z10Sort16RowsILi6EEv12SharedTraitsI10TraitsLaneEP22Trans_NS_hwy_float16_tiS4_\", scope: !12, file: !12, line: 369, type: !18, scopeLine: 370, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, templateParams: !19, retainedNodes: !20, keyInstructions: true)\n-+  !3 = distinct !DICompileUnit(language: DW_LANG_C_plus_plus_14, file: !14, producer: \"clang version 22.0.0git (https://github.com/llvm/llvm-project.git)\", isOptimized: true, runtimeVersion: 0, emissionKind: FullDebug, splitDebugInlining: false, nameTableKind: None)\n-+  !4 = !{i32 7, !\"Dwarf Version\", i32 5}\n-+  !5 = !{i32 2, !\"Debug Info Version\", i32 3}\n-+  !6 = !{i32 1, !\"wchar_size\", i32 4}\n-+  !7 = !{i32 7, !\"uwtable\", i32 2}\n-+  !8 = !{i32 7, !\"frame-pointer\", i32 1}\n-+  !9 = !{i32 7, !\"debug-info-assignment-tracking\", i1 true}\n-+  !10 = !{!\"clang version 22.0.0git (https://github.com/llvm/llvm-project.git)\"}\n-+  !12 = !DIFile(filename: \"example.cpp\", directory: \"/app\", checksumkind: CSK_MD5, checksum: \"5fbaafea0ede06ddd1ffc371aeee276e\")\n-+  !14 = !DIFile(filename: \"/app/example.cpp\", directory: \"/app\", checksumkind: CSK_MD5, checksum: \"5fbaafea0ede06ddd1ffc371aeee276e\")\n-+  !17 = !DIBasicType(name: \"__fp16\", size: 16, encoding: DW_ATE_float)\n-+  !18 = !DISubroutineType(types: !21)\n-+  !19 = !{!120}\n-+  !20 = !{!77, !78, !79, !80, !81, !82, !83, !84, !85, !86, !87, !88, !89, !90, !91, !92, !93, !94, !95, !96, !97, !98, !99, !100, !101, !102, !103, !104, !105}\n-+  !21 = !{null, !22, !23, !24, !23}\n-+  !22 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"SharedTraits<TraitsLane>\", file: !12, line: 272, size: 8, flags: DIFlagTypePassByValue, elements: !25, templateParams: !26, identifier: \"_ZTS12SharedTraitsI10TraitsLaneE\")\n-+  !23 = !DIDerivedType(tag: DW_TAG_pointer_type, baseType: !55, size: 64)\n-+  !24 = !DIBasicType(name: \"int\", size: 32, encoding: DW_ATE_signed)\n-+  !25 = !{!27}\n-+  !26 = !{!76}\n-+  !27 = !DIDerivedType(tag: DW_TAG_inheritance, scope: !22, baseType: !28, extraData: i32 0)\n-+  !28 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"TraitsLane\", file: !12, line: 325, size: 8, flags: DIFlagTypePassByValue, elements: !29, identifier: \"_ZTS10TraitsLane\")\n-+  !29 = !{!30, !31, !32, !33}\n-+  !30 = !DIDerivedType(tag: DW_TAG_inheritance, scope: !28, baseType: !34, extraData: i32 0)\n-+  !31 = !DISubprogram(name: \"Sort2\", linkageName: \"_ZN10TraitsLane5Sort2E4SimdI22Trans_NS_hwy_float16_tLi1ELi0EERu13__SVFloat16_tS4_\", scope: !28, file: !12, line: 326, type: !70, scopeLine: 326, flags: DIFlagPrototyped, spFlags: DISPFlagOptimized)\n-+  !32 = !DISubprogram(name: \"SortPairsDistance1\", linkageName: \"_ZN10TraitsLane18SortPairsDistance1E4SimdI22Trans_NS_hwy_float16_tLi1ELi0EEu13__SVFloat16_t\", scope: !28, file: !12, line: 344, type: !74, scopeLine: 344, flags: DIFlagPrototyped, spFlags: DISPFlagOptimized)\n-+  !33 = !DISubprogram(name: \"SortPairsDistance4\", linkageName: \"_ZN10TraitsLane18SortPairsDistance4E4SimdI22Trans_NS_hwy_float16_tLi1ELi0EEu13__SVFloat16_t\", scope: !28, file: !12, line: 352, type: !74, scopeLine: 352, flags: DIFlagPrototyped, spFlags: DISPFlagOptimized)\n-+  !34 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"KeyLane\", file: !12, line: 307, size: 8, flags: DIFlagTypePassByValue, elements: !35, identifier: \"_ZTS7KeyLane\")\n-+  !35 = !{!36, !37, !38}\n-+  !36 = !DISubprogram(name: \"SwapAdjacentPairs\", linkageName: \"_ZN7KeyLane17SwapAdjacentPairsE4SimdI22Trans_NS_hwy_float16_tLi1ELi0EEu13__SVFloat16_t\", scope: !34, file: !12, line: 309, type: !39, scopeLine: 309, flags: DIFlagPrototyped, spFlags: DISPFlagOptimized)\n-+  !37 = !DISubprogram(name: \"SwapAdjacentPairs\", linkageName: \"_ZN7KeyLane17SwapAdjacentPairsEu13__SVFloat32_t\", scope: !34, file: !12, line: 314, type: !58, scopeLine: 314, flags: DIFlagPrototyped, spFlags: DISPFlagOptimized)\n-+  !38 = !DISubprogram(name: \"OddEvenPairs\", linkageName: \"_ZN7KeyLane12OddEvenPairsE4SimdI22Trans_NS_hwy_float16_tLi1ELi0EEu13__SVFloat16_tS3_\", scope: !34, file: !12, line: 318, type: !68, scopeLine: 318, flags: DIFlagPrototyped, spFlags: DISPFlagOptimized)\n-+  !39 = !DISubroutineType(types: !40)\n-+  !40 = !{!41, !42, !43, !41}\n-+  !41 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Vec<Simd<Trans_NS_hwy_float16_t, 1, 0> >\", file: !12, line: 270, baseType: !44)\n-+  !42 = !DIDerivedType(tag: DW_TAG_pointer_type, baseType: !34, size: 64, flags: DIFlagArtificial | DIFlagObjectPointer)\n-+  !43 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"Simd<Trans_NS_hwy_float16_t, 1, 0>\", file: !12, line: 83, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !51, identifier: \"_ZTS4SimdI22Trans_NS_hwy_float16_tLi1ELi0EE\")\n-+  !44 = !DIDerivedType(tag: DW_TAG_typedef, name: \"VFromD<Simd<Trans_NS_hwy_float16_t, 1, 0> >\", file: !12, line: 142, baseType: !45)\n-+  !45 = !DIDerivedType(tag: DW_TAG_typedef, name: \"svfloat16_t\", file: !12, line: 26, baseType: !46)\n-+  !46 = !DIDerivedType(tag: DW_TAG_typedef, name: \"__SVFloat16_t\", file: !12, baseType: !47)\n-+  !47 = !DICompositeType(tag: DW_TAG_array_type, baseType: !17, flags: DIFlagVector, elements: !48)\n-+  !48 = !{!49}\n-+  !49 = !DISubrange(lowerBound: 0, upperBound: !DIExpression(DW_OP_constu, 4, DW_OP_bregx, 46, 0, DW_OP_mul, DW_OP_constu, 1, DW_OP_minus))\n-+  !50 = !{}\n-+  !51 = !{!52, !53, !54}\n-+  !52 = !DITemplateTypeParameter(name: \"Lane\", type: !55)\n-+  !53 = !DITemplateValueParameter(type: !24, value: i32 1)\n-+  !54 = !DITemplateValueParameter(name: \"kPow2\", type: !24, value: i32 0)\n-+  !55 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"Trans_NS_hwy_float16_t\", file: !12, line: 6, size: 16, flags: DIFlagTypePassByValue, elements: !56, identifier: \"_ZTS22Trans_NS_hwy_float16_t\")\n-+  !56 = !{!57}\n-+  !57 = !DIDerivedType(tag: DW_TAG_member, name: \"native\", scope: !55, file: !12, line: 7, baseType: !17, size: 16)\n-+  !58 = !DISubroutineType(types: !59)\n-+  !59 = !{!60, !42, !60}\n-+  !60 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Vec<Simd<float, 0, 0> >\", file: !12, line: 270, baseType: !61)\n-+  !61 = !DIDerivedType(tag: DW_TAG_typedef, name: \"VFromD<Simd<float, 0, 0> >\", file: !12, line: 142, baseType: !62)\n-+  !62 = !DIDerivedType(tag: DW_TAG_typedef, name: \"svfloat32_t\", file: !12, line: 27, baseType: !63)\n-+  !63 = !DIDerivedType(tag: DW_TAG_typedef, name: \"__SVFloat32_t\", file: !12, baseType: !64)\n-+  !64 = !DICompositeType(tag: DW_TAG_array_type, baseType: !65, flags: DIFlagVector, elements: !66)\n-+  !65 = !DIBasicType(name: \"float\", size: 32, encoding: DW_ATE_float)\n-+  !66 = !{!67}\n-+  !67 = !DISubrange(lowerBound: 0, upperBound: !DIExpression(DW_OP_constu, 2, DW_OP_bregx, 46, 0, DW_OP_mul, DW_OP_constu, 1, DW_OP_minus))\n-+  !68 = !DISubroutineType(types: !69)\n-+  !69 = !{!41, !42, !43, !41, !41}\n-+  !70 = !DISubroutineType(types: !71)\n-+  !71 = !{null, !72, !43, !73, !73}\n-+  !72 = !DIDerivedType(tag: DW_TAG_pointer_type, baseType: !28, size: 64, flags: DIFlagArtificial | DIFlagObjectPointer)\n-+  !73 = !DIDerivedType(tag: DW_TAG_reference_type, baseType: !41, size: 64)\n-+  !74 = !DISubroutineType(types: !75)\n-+  !75 = !{!41, !72, !43, !41}\n-+  !76 = !DITemplateTypeParameter(name: \"Base\", type: !28)\n-+  !77 = !DILocalVariable(name: \"st\", arg: 1, scope: !2, file: !12, line: 369, type: !22)\n-+  !78 = !DILocalVariable(name: \"keys\", arg: 2, scope: !2, file: !12, line: 369, type: !23)\n-+  !79 = !DILocalVariable(arg: 3, scope: !2, file: !12, line: 369, type: !24)\n-+  !80 = !DILocalVariable(arg: 4, scope: !2, file: !12, line: 370, type: !23)\n-+  !81 = !DILocalVariable(name: \"d\", scope: !2, file: !12, line: 371, type: !106)\n-+  !82 = !DILocalVariable(name: \"v8\", scope: !2, file: !12, line: 373, type: !112)\n-+  !83 = !DILocalVariable(name: \"v9\", scope: !2, file: !12, line: 373, type: !112)\n-+  !84 = !DILocalVariable(name: \"va\", scope: !2, file: !12, line: 373, type: !112)\n-+  !85 = !DILocalVariable(name: \"vb\", scope: !2, file: !12, line: 373, type: !112)\n-+  !86 = !DILocalVariable(name: \"vc\", scope: !2, file: !12, line: 373, type: !112)\n-+  !87 = !DILocalVariable(name: \"vd\", scope: !2, file: !12, line: 373, type: !112)\n-+  !88 = !DILocalVariable(name: \"ve\", scope: !2, file: !12, line: 373, type: !112)\n-+  !89 = !DILocalVariable(name: \"vf\", scope: !2, file: !12, line: 373, type: !112)\n-+  !90 = !DILocalVariable(name: \"v2\", scope: !2, file: !12, line: 373, type: !112)\n-+  !91 = !DILocalVariable(name: \"v4\", scope: !2, file: !12, line: 373, type: !112)\n-+  !92 = !DILocalVariable(name: \"v7\", scope: !2, file: !12, line: 373, type: !112)\n-+  !93 = !DILocalVariable(name: \"v0\", scope: !2, file: !12, line: 374, type: !112)\n-+  !94 = !DILocalVariable(name: \"v3\", scope: !2, file: !12, line: 375, type: !112)\n-+  !95 = !DILocalVariable(name: \"v5\", scope: !2, file: !12, line: 376, type: !112)\n-+  !96 = !DILocalVariable(name: \"v6\", scope: !2, file: !12, line: 377, type: !112)\n-+  !97 = !DILocalVariable(name: \"kIota\", scope: !2, file: !12, line: 378, type: !112)\n-+  !98 = !DILocalVariable(name: \"m8\", scope: !2, file: !12, line: 379, type: !113)\n-+  !99 = !DILocalVariable(name: \"m9\", scope: !2, file: !12, line: 380, type: !113)\n-+  !100 = !DILocalVariable(name: \"ma\", scope: !2, file: !12, line: 381, type: !113)\n-+  !101 = !DILocalVariable(name: \"mb\", scope: !2, file: !12, line: 382, type: !113)\n-+  !102 = !DILocalVariable(name: \"mc\", scope: !2, file: !12, line: 383, type: !113)\n-+  !103 = !DILocalVariable(name: \"md\", scope: !2, file: !12, line: 384, type: !113)\n-+  !104 = !DILocalVariable(name: \"me\", scope: !2, file: !12, line: 385, type: !113)\n-+  !105 = !DILocalVariable(name: \"mf\", scope: !2, file: !12, line: 386, type: !113)\n-+  !106 = !DIDerivedType(tag: DW_TAG_typedef, name: \"CappedTag<Trans_NS_hwy_float16_t, 6>\", file: !12, line: 97, baseType: !107)\n-+  !107 = !DIDerivedType(tag: DW_TAG_typedef, name: \"type\", scope: !108, file: !12, line: 89, baseType: !43)\n-+  !108 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"ClampNAndPow2<Trans_NS_hwy_float16_t, 1>\", file: !12, line: 88, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !109, identifier: \"_ZTS13ClampNAndPow2I22Trans_NS_hwy_float16_tLi1EE\")\n-+  !109 = !{!110, !111}\n-+  !110 = !DITemplateTypeParameter(name: \"T\", type: !55)\n-+  !111 = !DITemplateValueParameter(name: \"N\", type: !24, value: i32 1)\n-+  !112 = !DIDerivedType(tag: DW_TAG_typedef, name: \"V\", scope: !2, file: !12, line: 372, baseType: !41)\n-+  !113 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Mask<Simd<Trans_NS_hwy_float16_t, 1, 0> >\", file: !12, line: 271, baseType: !114)\n-+  !114 = !DIDerivedType(tag: DW_TAG_typedef, name: \"svbool_t\", file: !12, line: 28, baseType: !115)\n-+  !115 = !DIDerivedType(tag: DW_TAG_typedef, name: \"__SVBool_t\", file: !12, baseType: !116)\n-+  !116 = !DICompositeType(tag: DW_TAG_array_type, baseType: !117, flags: DIFlagVector, elements: !118)\n-+  !117 = !DIBasicType(name: \"unsigned char\", size: 8, encoding: DW_ATE_unsigned_char)\n-+  !118 = !{!119}\n-+  !119 = !DISubrange(lowerBound: 0, upperBound: !DIExpression(DW_OP_constu, 1, DW_OP_bregx, 46, 0, DW_OP_mul, DW_OP_constu, 1, DW_OP_minus))\n-+  !120 = !DITemplateValueParameter(name: \"kKeysPerRow\", type: !24, value: i32 6)\n-+  !121 = !DILocalVariable(name: \"this\", arg: 1, scope: !122, type: !123, flags: DIFlagArtificial | DIFlagObjectPointer)\n-+  !122 = distinct !DISubprogram(name: \"Sort2\", linkageName: \"_ZN10TraitsLane5Sort2E4SimdI22Trans_NS_hwy_float16_tLi1ELi0EERu13__SVFloat16_tS4_\", scope: !28, file: !12, line: 326, type: !70, scopeLine: 328, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, declaration: !31, retainedNodes: !124, keyInstructions: true)\n-+  !123 = !DIDerivedType(tag: DW_TAG_pointer_type, baseType: !28, size: 64)\n-+  !124 = !{!121, !125, !126, !127, !128, !129, !130, !131, !132}\n-+  !125 = !DILocalVariable(name: \"d\", arg: 2, scope: !122, file: !12, line: 326, type: !43)\n-+  !126 = !DILocalVariable(name: \"a\", arg: 3, scope: !122, file: !12, line: 327, type: !73)\n-+  !127 = !DILocalVariable(name: \"b\", arg: 4, scope: !122, file: !12, line: 328, type: !73)\n-+  !128 = !DILocalVariable(name: \"__trans_tmp_52\", scope: !122, file: !12, line: 329, type: !41)\n-+  !129 = !DILocalVariable(name: \"a_copy\", scope: !122, file: !12, line: 329, type: !41)\n-+  !130 = !DILocalVariable(name: \"__trans_tmp_45\", scope: !122, file: !12, line: 330, type: !41)\n-+  !131 = !DILocalVariable(name: \"__trans_tmp_53\", scope: !133, file: !12, line: 334, type: !41)\n-+  !132 = !DILocalVariable(name: \"__trans_tmp_29\", scope: !134, file: !12, line: 336, type: !45)\n-+  !133 = distinct !DILexicalBlock(scope: !122, file: !12, line: 333, column: 5)\n-+  !134 = distinct !DILexicalBlock(scope: !133, file: !12, line: 335, column: 7)\n-+  !137 = distinct !DISubprogram(name: \"SortPairsDistance1\", linkageName: \"_ZN10TraitsLane18SortPairsDistance1E4SimdI22Trans_NS_hwy_float16_tLi1ELi0EEu13__SVFloat16_t\", scope: !28, file: !12, line: 344, type: !74, scopeLine: 345, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, declaration: !32, retainedNodes: !139, keyInstructions: true)\n-+  !139 = !{!140, !141, !142, !143}\n-+  !140 = !DILocalVariable(name: \"this\", arg: 1, scope: !137, type: !123, flags: DIFlagArtificial | DIFlagObjectPointer)\n-+  !141 = !DILocalVariable(name: \"d\", arg: 2, scope: !137, file: !12, line: 344, type: !43)\n-+  !142 = !DILocalVariable(name: \"v\", arg: 3, scope: !137, file: !12, line: 345, type: !41)\n-+  !143 = !DILocalVariable(name: \"__trans_tmp_48\", scope: !137, file: !12, line: 346, type: !41)\n-+  !144 = distinct !DISubprogram(name: \"Merge16x16<6, SharedTraits<TraitsLane>, __SVFloat16_t>\", linkageName: \"_Z10Merge16x16ILi6E12SharedTraitsI10TraitsLaneEu13__SVFloat16_tEvT0_RT1_S6_S6_S6_S6_S6_S6_S6_S6_S6_S6_S6_\", scope: !12, file: !12, line: 286, type: !146, scopeLine: 288, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, templateParams: !147, retainedNodes: !148, keyInstructions: true)\n-+  !145 = distinct !DILocation(line: 388, column: 3, scope: !2)\n-+  !146 = !DISubroutineType(types: !149)\n-+  !147 = !{!164, !165, !166}\n-+  !148 = !{!151, !152, !153, !154, !155, !156, !157, !158, !159, !160, !161, !162, !163}\n-+  !149 = !{null, !22, !150, !150, !150, !150, !150, !150, !150, !150, !150, !150, !150, !150}\n-+  !150 = !DIDerivedType(tag: DW_TAG_reference_type, baseType: !47, size: 64)\n-+  !151 = !DILocalVariable(name: \"st\", arg: 1, scope: !144, file: !12, line: 286, type: !22)\n-+  !152 = !DILocalVariable(name: \"v0\", arg: 2, scope: !144, file: !12, line: 286, type: !150)\n-+  !153 = !DILocalVariable(name: \"v2\", arg: 3, scope: !144, file: !12, line: 286, type: !150)\n-+  !154 = !DILocalVariable(name: \"v5\", arg: 4, scope: !144, file: !12, line: 286, type: !150)\n-+  !155 = !DILocalVariable(name: \"v6\", arg: 5, scope: !144, file: !12, line: 287, type: !150)\n-+  !156 = !DILocalVariable(name: \"v7\", arg: 6, scope: !144, file: !12, line: 287, type: !150)\n-+  !157 = !DILocalVariable(name: \"v9\", arg: 7, scope: !144, file: !12, line: 287, type: !150)\n-+  !158 = !DILocalVariable(name: \"va\", arg: 8, scope: !144, file: !12, line: 287, type: !150)\n-+  !159 = !DILocalVariable(name: \"vb\", arg: 9, scope: !144, file: !12, line: 287, type: !150)\n-+  !160 = !DILocalVariable(name: \"vc\", arg: 10, scope: !144, file: !12, line: 288, type: !150)\n-+  !161 = !DILocalVariable(name: \"vd\", arg: 11, scope: !144, file: !12, line: 288, type: !150)\n-+  !162 = !DILocalVariable(name: \"ve\", arg: 12, scope: !144, file: !12, line: 288, type: !150)\n-+  !163 = !DILocalVariable(name: \"vf\", arg: 13, scope: !144, file: !12, line: 288, type: !150)\n-+  !164 = !DITemplateValueParameter(type: !24, value: i32 6)\n-+  !165 = !DITemplateTypeParameter(name: \"Traits\", type: !22)\n-+  !166 = !DITemplateTypeParameter(name: \"V\", type: !47)\n-+  !184 = !DILocalVariable(name: \"this\", arg: 1, scope: !185, type: !186, flags: DIFlagArtificial | DIFlagObjectPointer)\n-+  !185 = distinct !DISubprogram(name: \"SortPairsDistance2<Simd<Trans_NS_hwy_float16_t, 1, 0> >\", linkageName: \"_ZN12SharedTraitsI10TraitsLaneE18SortPairsDistance2I4SimdI22Trans_NS_hwy_float16_tLi1ELi0EEEEDTcl4ZerocvT__EEES6_S7_\", scope: !22, file: !12, line: 273, type: !187, scopeLine: 273, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, templateParams: !188, declaration: !189, retainedNodes: !190, keyInstructions: true)\n-+  !186 = !DIDerivedType(tag: DW_TAG_pointer_type, baseType: !22, size: 64)\n-+  !187 = !DISubroutineType(types: !191)\n-+  !188 = !{!193}\n-+  !189 = !DISubprogram(name: \"SortPairsDistance2<Simd<Trans_NS_hwy_float16_t, 1, 0> >\", linkageName: \"_ZN12SharedTraitsI10TraitsLaneE18SortPairsDistance2I4SimdI22Trans_NS_hwy_float16_tLi1ELi0EEEEDTcl4ZerocvT__EEES6_S7_\", scope: !22, file: !12, line: 273, type: !187, scopeLine: 273, flags: DIFlagPrototyped, spFlags: DISPFlagOptimized, templateParams: !188)\n-+  !190 = !{!184, !194, !195, !196, !197}\n-+  !191 = !{!41, !192, !43, !41}\n-+  !192 = !DIDerivedType(tag: DW_TAG_pointer_type, baseType: !22, size: 64, flags: DIFlagArtificial | DIFlagObjectPointer)\n-+  !193 = !DITemplateTypeParameter(name: \"D\", type: !43)\n-+  !194 = !DILocalVariable(name: \"d\", arg: 2, scope: !185, file: !12, line: 273, type: !43)\n-+  !195 = !DILocalVariable(name: \"v\", arg: 3, scope: !185, file: !12, line: 273, type: !41)\n-+  !196 = !DILocalVariable(name: \"base\", scope: !185, file: !12, line: 274, type: !28)\n-+  !197 = !DILocalVariable(name: \"swapped\", scope: !185, file: !12, line: 275, type: !41)\n-+  !200 = !DILocation(line: 0, scope: !122, inlinedAt: !201)\n-+  !201 = distinct !DILocation(line: 358, column: 5, scope: !202, inlinedAt: !203)\n-+  !202 = distinct !DISubprogram(name: \"SortPairsDistance4\", linkageName: \"_ZN10TraitsLane18SortPairsDistance4E4SimdI22Trans_NS_hwy_float16_tLi1ELi0EEu13__SVFloat16_t\", scope: !28, file: !12, line: 352, type: !74, scopeLine: 353, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, declaration: !33, retainedNodes: !204, keyInstructions: true)\n-+  !203 = distinct !DILocation(line: 298, column: 11, scope: !144, inlinedAt: !145)\n-+  !204 = !{!205, !206, !207, !208, !209, !210, !211}\n-+  !205 = !DILocalVariable(name: \"this\", arg: 1, scope: !202, type: !123, flags: DIFlagArtificial | DIFlagObjectPointer)\n-+  !206 = !DILocalVariable(name: \"d\", arg: 2, scope: !202, file: !12, line: 352, type: !43)\n-+  !207 = !DILocalVariable(name: \"v\", arg: 3, scope: !202, file: !12, line: 353, type: !41)\n-+  !208 = !DILocalVariable(name: \"__trans_tmp_42\", scope: !202, file: !12, line: 354, type: !41)\n-+  !209 = !DILocalVariable(name: \"__trans_tmp_39\", scope: !202, file: !12, line: 354, type: !41)\n-+  !210 = !DILocalVariable(name: \"dw\", scope: !202, file: !12, line: 355, type: !212)\n-+  !211 = !DILocalVariable(name: \"__trans_tmp_51\", scope: !219, file: !12, line: 360, type: !44)\n-+  !212 = !DIDerivedType(tag: DW_TAG_typedef, name: \"RepartitionToWide<Simd<Trans_NS_hwy_float16_t, 1, 0> >\", file: !12, line: 103, baseType: !213)\n-+  !213 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Repartition<float, Simd<Trans_NS_hwy_float16_t, 1, 0> >\", file: !12, line: 101, baseType: !214)\n-+  !214 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Repartition<float>\", scope: !43, file: !12, line: 86, baseType: !215)\n-+  !215 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"Simd<float, 0, 0>\", file: !12, line: 83, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !216, identifier: \"_ZTS4SimdIfLi0ELi0EE\")\n-+  !216 = !{!217, !218, !54}\n-+  !217 = !DITemplateTypeParameter(name: \"Lane\", type: !65)\n-+  !218 = !DITemplateValueParameter(type: !24, value: i32 0)\n-+  !219 = distinct !DILexicalBlock(scope: !202, file: !12, line: 359, column: 5)\n-+  !220 = !DILocalVariable(name: \"this\", arg: 1, scope: !221, type: !222, flags: DIFlagArtificial | DIFlagObjectPointer)\n-+  !221 = distinct !DISubprogram(name: \"SwapAdjacentPairs\", linkageName: \"_ZN7KeyLane17SwapAdjacentPairsEu13__SVFloat32_t\", scope: !34, file: !12, line: 314, type: !58, scopeLine: 314, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, declaration: !37, retainedNodes: !223, keyInstructions: true)\n-+  !222 = !DIDerivedType(tag: DW_TAG_pointer_type, baseType: !34, size: 64)\n-+  !223 = !{!220, !224}\n-+  !224 = !DILocalVariable(name: \"v\", arg: 2, scope: !221, file: !12, line: 314, type: !60)\n-+  !225 = distinct !DILocation(line: 357, column: 38, scope: !202, inlinedAt: !203)\n-+  !226 = !DILocalVariable(name: \"v\", arg: 1, scope: !227, file: !12, line: 264, type: !64)\n-+  !227 = distinct !DISubprogram(name: \"Shuffle1032<__SVFloat32_t>\", linkageName: \"_Z11Shuffle1032Iu13__SVFloat32_tET_S1_\", scope: !12, file: !12, line: 264, type: !228, scopeLine: 264, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, templateParams: !229, retainedNodes: !230, keyInstructions: true)\n-+  !228 = !DISubroutineType(types: !231)\n-+  !229 = !{!262}\n-+  !230 = !{!226, !232, !233, !234}\n-+  !231 = !{!64, !64}\n-+  !232 = !DILocalVariable(name: \"d\", scope: !227, file: !12, line: 265, type: !235)\n-+  !233 = !DILocalVariable(name: \"d8\", scope: !227, file: !12, line: 266, type: !252)\n-+  !234 = !DILocalVariable(name: \"v8\", scope: !227, file: !12, line: 267, type: !257)\n-+  !235 = !DIDerivedType(tag: DW_TAG_typedef, name: \"DFromV<__SVFloat32_t>\", file: !12, line: 108, baseType: !236)\n-+  !236 = !DIDerivedType(tag: DW_TAG_typedef, name: \"type\", scope: !237, file: !12, line: 116, baseType: !238)\n-+  !237 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"DFromV_t<__SVFloat32_t>\", file: !12, line: 115, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !239, identifier: \"_ZTS8DFromV_tIu13__SVFloat32_tE\")\n-+  !238 = !DIDerivedType(tag: DW_TAG_typedef, name: \"ScalableTag<float>\", file: !12, line: 95, baseType: !241)\n-+  !239 = !{!240}\n-+  !240 = !DITemplateTypeParameter(type: !64)\n-+  !241 = !DIDerivedType(tag: DW_TAG_typedef, name: \"type\", scope: !242, file: !12, line: 92, baseType: !243)\n-+  !242 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"ScalableTagChecker<float>\", file: !12, line: 91, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !244, identifier: \"_ZTS18ScalableTagCheckerIfE\")\n-+  !243 = !DIDerivedType(tag: DW_TAG_typedef, name: \"type\", scope: !246, file: !12, line: 89, baseType: !247)\n-+  !244 = !{!245}\n-+  !245 = !DITemplateTypeParameter(name: \"T\", type: !65)\n-+  !246 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"ClampNAndPow2<float, 64>\", file: !12, line: 88, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !248, identifier: \"_ZTS13ClampNAndPow2IfLi64EE\")\n-+  !247 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"Simd<float, 64, 0>\", file: !12, line: 83, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !250, identifier: \"_ZTS4SimdIfLi64ELi0EE\")\n-+  !248 = !{!245, !249}\n-+  !249 = !DITemplateValueParameter(name: \"N\", type: !24, value: i32 64)\n-+  !250 = !{!217, !251, !54}\n-+  !251 = !DITemplateValueParameter(type: !24, value: i32 64)\n-+  !252 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Repartition<unsigned char, Simd<float, 64, 0> >\", file: !12, line: 101, baseType: !253)\n-+  !253 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Repartition<unsigned char>\", scope: !247, file: !12, line: 86, baseType: !254)\n-+  !254 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"Simd<unsigned char, 0, 0>\", file: !12, line: 83, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !255, identifier: \"_ZTS4SimdIhLi0ELi0EE\")\n-+  !255 = !{!256, !218, !54}\n-+  !256 = !DITemplateTypeParameter(name: \"Lane\", type: !117)\n-+  !257 = !DIDerivedType(tag: DW_TAG_typedef, name: \"svuint8_t\", file: !12, line: 22, baseType: !258)\n-+  !258 = !DIDerivedType(tag: DW_TAG_typedef, name: \"__SVUint8_t\", file: !12, baseType: !259)\n-+  !259 = !DICompositeType(tag: DW_TAG_array_type, baseType: !117, flags: DIFlagVector, elements: !260)\n-+  !260 = !{!261}\n-+  !261 = !DISubrange(lowerBound: 0, upperBound: !DIExpression(DW_OP_constu, 8, DW_OP_bregx, 46, 0, DW_OP_mul, DW_OP_constu, 1, DW_OP_minus))\n-+  !262 = !DITemplateTypeParameter(name: \"V\", type: !64)\n-+  !263 = !DILocalVariable(name: \"hi\", arg: 1, scope: !264, file: !12, line: 248, type: !259)\n-+  !264 = distinct !DISubprogram(name: \"CombineShiftRightBytes<8, __SVUint8_t>\", linkageName: \"_Z22CombineShiftRightBytesILi8Eu11__SVUint8_tET0_S1_S1_\", scope: !12, file: !12, line: 248, type: !265, scopeLine: 248, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, templateParams: !266, retainedNodes: !267, keyInstructions: true)\n-+  !265 = !DISubroutineType(types: !268)\n-+  !266 = !{!283, !284}\n-+  !267 = !{!263, !269, !270, !271, !272, !273, !274, !275, !276}\n-+  !268 = !{!259, !259, !259}\n-+  !269 = !DILocalVariable(name: \"lo\", arg: 2, scope: !264, file: !12, line: 248, type: !259)\n-+  !270 = !DILocalVariable(name: \"__trans_tmp_33\", scope: !264, file: !12, line: 249, type: !257)\n-+  !271 = !DILocalVariable(name: \"__trans_tmp_15\", scope: !264, file: !12, line: 249, type: !257)\n-+  !272 = !DILocalVariable(name: \"__trans_tmp_32\", scope: !264, file: !12, line: 250, type: !257)\n-+  !273 = !DILocalVariable(name: \"d8\", scope: !264, file: !12, line: 251, type: !277)\n-+  !274 = !DILocalVariable(name: \"__trans_tmp_16\", scope: !264, file: !12, line: 252, type: !114)\n-+  !275 = !DILocalVariable(name: \"lo_down\", scope: !264, file: !12, line: 254, type: !257)\n-+  !276 = !DILocalVariable(name: \"__trans_tmp_34\", scope: !264, file: !12, line: 255, type: !114)\n-+  !277 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Repartition<unsigned char, Simd<char, 0, 0> >\", file: !12, line: 101, baseType: !278)\n-+  !278 = !DIDerivedType(tag: DW_TAG_typedef, name: \"Repartition<unsigned char>\", scope: !279, file: !12, line: 86, baseType: !254)\n-+  !279 = distinct !DICompositeType(tag: DW_TAG_structure_type, name: \"Simd<char, 0, 0>\", file: !12, line: 83, size: 8, flags: DIFlagTypePassByValue, elements: !50, templateParams: !280, identifier: \"_ZTS4SimdIcLi0ELi0EE\")\n-+  !280 = !{!281, !218, !54}\n-+  !281 = !DITemplateTypeParameter(name: \"Lane\", type: !282)\n-+  !282 = !DIBasicType(name: \"char\", size: 8, encoding: DW_ATE_unsigned_char)\n-+  !283 = !DITemplateValueParameter(name: \"kBytes\", type: !24, value: i32 8)\n-+  !284 = !DITemplateTypeParameter(name: \"V\", type: !259)\n-+  !285 = !DILocalVariable(name: \"hi\", arg: 1, scope: !286, file: !12, line: 216, type: !257)\n-+  !286 = distinct !DISubprogram(name: \"Ext<8>\", linkageName: \"_Z3ExtILi8EEu11__SVUint8_tS0_S0_\", scope: !12, file: !12, line: 216, type: !287, scopeLine: 216, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, templateParams: !288, retainedNodes: !289, keyInstructions: true)\n-+  !287 = !DISubroutineType(types: !290)\n-+  !288 = !{!292}\n-+  !289 = !{!285, !291}\n-+  !290 = !{!257, !257, !257}\n-+  !291 = !DILocalVariable(name: \"lo\", arg: 2, scope: !286, file: !12, line: 216, type: !257)\n-+  !292 = !DITemplateValueParameter(name: \"kIndex\", type: !24, value: i32 8)\n-+  !293 = !DILocalVariable(name: \"a\", arg: 1, scope: !294, file: !12, line: 180, type: !47)\n-+  !294 = distinct !DISubprogram(name: \"Min<__SVFloat16_t>\", linkageName: \"_Z3MinIu13__SVFloat16_tET_S1_S1_\", scope: !12, file: !12, line: 180, type: !295, scopeLine: 180, flags: DIFlagPrototyped | DIFlagAllCallsDescribed, spFlags: DISPFlagDefinition | DISPFlagOptimized, unit: !3, templateParams: !296, retainedNodes: !297, keyInstructions: true)\n-+  !295 = !DISubroutineType(types: !298)\n-+  !296 = !{!166}\n-+  !297 = !{!293, !299, !300, !301, !302, !303, !304}\n-+  !298 = !{!47, !47, !47}\n-+  !299 = !DILocalVariable(name: \"b\", arg: 2, scope: !294, file: !12, line: 180, type: !47)\n-+  !300 = !DILocalVariable(name: \"__trans_tmp_36\", scope: !294, file: !12, line: 181, type: !45)\n-+  !301 = !DILocalVariable(name: \"__trans_tmp_25\", scope: !294, file: !12, line: 181, type: !45)\n-+  !302 = !DILocalVariable(name: \"__trans_tmp_27\", scope: !294, file: !12, line: 182, type: !114)\n-+  !303 = !DILocalVariable(name: \"__trans_tmp_24\", scope: !294, file: !12, line: 183, type: !114)\n-+  !304 = !DILocalVariable(name: \"__trans_tmp_19\", scope: !294, file: !12, line: 184, type: !114)\n-+  !308 = distinct !DILocation(line: 315, column: 12, scope: !221, inlinedAt: !225)\n-+  !309 = distinct !DILocation(line: 268, column: 21, scope: !227, inlinedAt: !308)\n-+  !311 = distinct !DILocation(line: 254, column: 18, scope: !264, inlinedAt: !309)\n-+  !312 = !DILocation(line: 217, column: 10, scope: !286, inlinedAt: !311, atomGroup: 1, atomRank: 2)\n-+  !313 = !DILocation(line: 257, column: 20, scope: !264, inlinedAt: !309, atomGroup: 5, atomRank: 2)\n-+  !314 = !DILocation(line: 0, scope: !294, inlinedAt: !315)\n-+  !315 = distinct !DILocation(line: 331, column: 22, scope: !122, inlinedAt: !201)\n-+  !316 = !DILocation(line: 185, column: 20, scope: !294, inlinedAt: !315)\n-+  !317 = !DILocation(line: 403, column: 1, scope: !2, atomGroup: 19449, atomRank: 1)\n-+\n-+...\n-+---\n-+name:            _Z10Sort16RowsILi6EEv12SharedTraitsI10TraitsLaneEP22Trans_NS_hwy_float16_tiS4_\n-+body:             |\n-+  bb.0:\n-+    liveins: $x1, $z0, $z1, $p0\n-+\n-+    $z30 = LDR_ZXI $x1, -14\n-+    $z31 = LDR_ZXI $x1, -13\n-+    $z23 = ORR_ZZZ $z30, $z30\n-+    renamable $z2 = EXT_ZZI_B renamable $z30_z31, 8,  debug-location !312\n-+    renamable $z7 = SEL_ZPZZ_B renamable $p0, renamable $z0, killed renamable $z1,  debug-location !313\n-+    DBG_VALUE $z30, $noreg, !129, !DIExpression(),  debug-location !200\n-+    renamable $p3 = nofpexcept FCMGT_PPzZZ_H renamable $p0, renamable $z0, undef renamable $z1,  debug-location !316\n-+    DBG_VALUE $z30_z31, $noreg, !129, !DIExpression(),  debug-location !200\n-+    DBG_VALUE $z30_z31, $noreg, !293, !DIExpression(),  debug-location !314\n-+    RET undef $lr,  debug-location !317\n-+...\n-+\n-diff -ruN --strip-trailing-cr a/llvm/test/Transforms/LoopVectorize/cse-casts.ll b/llvm/test/Transforms/LoopVectorize/cse-casts.ll\n---- a/llvm/test/Transforms/LoopVectorize/cse-casts.ll\n-+++ b/llvm/test/Transforms/LoopVectorize/cse-casts.ll\n-@@ -0,0 +1,351 @@\n-+; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --check-globals none --filter-out-after \"scalar.ph:\" --version 6\n-+; RUN: opt -p loop-vectorize -force-vector-width=4 -force-vector-interleave=2 -S %s | FileCheck %s\n-+\n-+define i8 @preserve_flags_when_cloning_trunc(i8 %start, ptr noalias %src, ptr noalias %dst) {\n-+; CHECK-LABEL: define i8 @preserve_flags_when_cloning_trunc(\n-+; CHECK-SAME: i8 [[START:%.*]], ptr noalias [[SRC:%.*]], ptr noalias [[DST:%.*]]) {\n-+; CHECK-NEXT:  [[ENTRY:.*:]]\n-+; CHECK-NEXT:    br label %[[VECTOR_PH:.*]]\n-+; CHECK:       [[VECTOR_PH]]:\n-+; CHECK-NEXT:    [[TMP0:%.*]] = insertelement <4 x i8> splat (i8 1), i8 [[START]], i32 0\n-+; CHECK-NEXT:    br label %[[VECTOR_BODY:.*]]\n-+; CHECK:       [[VECTOR_BODY]]:\n-+; CHECK-NEXT:    [[INDEX:%.*]] = phi i64 [ 0, %[[VECTOR_PH]] ], [ [[INDEX_NEXT:%.*]], %[[VECTOR_BODY]] ]\n-+; CHECK-NEXT:    [[VEC_PHI:%.*]] = phi <4 x i8> [ [[TMP0]], %[[VECTOR_PH]] ], [ [[TMP6:%.*]], %[[VECTOR_BODY]] ]\n-+; CHECK-NEXT:    [[VEC_PHI1:%.*]] = phi <4 x i8> [ splat (i8 1), %[[VECTOR_PH]] ], [ [[TMP7:%.*]], %[[VECTOR_BODY]] ]\n-+; CHECK-NEXT:    [[TMP1:%.*]] = load i32, ptr [[SRC]], align 4\n-+; CHECK-NEXT:    [[BROADCAST_SPLATINSERT:%.*]] = insertelement <4 x i32> poison, i32 [[TMP1]], i64 0\n-+; CHECK-NEXT:    [[BROADCAST_SPLAT:%.*]] = shufflevector <4 x i32> [[BROADCAST_SPLATINSERT]], <4 x i32> poison, <4 x i32> zeroinitializer\n-+; CHECK-NEXT:    [[TMP2:%.*]] = icmp ne <4 x i32> [[BROADCAST_SPLAT]], zeroinitializer\n-+; CHECK-NEXT:    [[TMP3:%.*]] = zext <4 x i1> [[TMP2]] to <4 x i16>\n-+; CHECK-NEXT:    [[TMP4:%.*]] = getelementptr i16, ptr [[DST]], i64 [[INDEX]]\n-+; CHECK-NEXT:    [[TMP5:%.*]] = getelementptr i16, ptr [[TMP4]], i32 4\n-+; CHECK-NEXT:    store <4 x i16> [[TMP3]], ptr [[TMP4]], align 2\n-+; CHECK-NEXT:    store <4 x i16> [[TMP3]], ptr [[TMP5]], align 2\n-+; CHECK-NEXT:    [[TMP6]] = mul <4 x i8> [[VEC_PHI]], splat (i8 3)\n-+; CHECK-NEXT:    [[TMP7]] = mul <4 x i8> [[VEC_PHI1]], splat (i8 3)\n-+; CHECK-NEXT:    [[INDEX_NEXT]] = add nuw i64 [[INDEX]], 8\n-+; CHECK-NEXT:    [[TMP8:%.*]] = icmp eq i64 [[INDEX_NEXT]], 416\n-+; CHECK-NEXT:    br i1 [[TMP8]], label %[[MIDDLE_BLOCK:.*]], label %[[VECTOR_BODY]], !llvm.loop [[LOOP0:![0-9]+]]\n-+; CHECK:       [[MIDDLE_BLOCK]]:\n-+; CHECK-NEXT:    [[BIN_RDX:%.*]] = mul <4 x i8> [[TMP7]], [[TMP6]]\n-+; CHECK-NEXT:    [[TMP9:%.*]] = call i8 @llvm.vector.reduce.mul.v4i8(<4 x i8> [[BIN_RDX]])\n-+; CHECK-NEXT:    br label %[[SCALAR_PH:.*]]\n-+; CHECK:       [[SCALAR_PH]]:\n-+;\n-+entry:\n-+  br label %loop\n-+\n-+loop:\n-+  %iv = phi i64 [ %iv.next, %loop ], [ 0, %entry ]\n-+  %red = phi i8 [ %red.next, %loop ], [ %start, %entry ]\n-+  %l = load i32, ptr %src, align 4\n-+  %cmp = icmp ne i32 %l, 0\n-+  %cmp.ext = zext i1 %cmp to i64\n-+  %cmp.trunc = trunc i64 %cmp.ext to i16\n-+  %gep.dst = getelementptr i16, ptr %dst, i64 %iv\n-+  store i16 %cmp.trunc, ptr %gep.dst, align 2\n-+  %red.next = mul i8 %red, 3\n-+  %iv.next = add i64 %iv, 1\n-+  %ec = icmp ult i64 %iv, 416\n-+  br i1 %ec, label %loop, label %exit\n-+\n-+exit:\n-+  ret i8 %red.next\n-+}\n-+\n-+\n-+define void @preserve_flags_narrowing_extends_and_truncs(ptr noalias %A, ptr noalias %B, ptr noalias %C) {\n-+; CHECK-LABEL: define void @preserve_flags_narrowing_extends_and_truncs(\n-+; CHECK-SAME: ptr noalias [[A:%.*]], ptr noalias [[B:%.*]], ptr noalias [[C:%.*]]) {\n-+; CHECK-NEXT:  [[ENTRY:.*:]]\n-+; CHECK-NEXT:    br label %[[VECTOR_PH:.*]]\n-+; CHECK:       [[VECTOR_PH]]:\n-+; CHECK-NEXT:    br label %[[VECTOR_BODY:.*]]\n-+; CHECK:       [[VECTOR_BODY]]:\n-+; CHECK-NEXT:    br i1 true, label %[[PRED_LOAD_IF:.*]], label %[[PRED_LOAD_CONTINUE:.*]]\n-+; CHECK:       [[PRED_LOAD_IF]]:\n-+; CHECK-NEXT:    [[TMP0:%.*]] = getelementptr inbounds i8, ptr [[A]], i64 0\n-+; CHECK-NEXT:    [[TMP1:%.*]] = load i8, ptr [[TMP0]], align 1\n-+; CHECK-NEXT:    [[TMP2:%.*]] = insertelement <4 x i8> poison, i8 [[TMP1]], i32 0\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE]]:\n-+; CHECK-NEXT:    [[TMP3:%.*]] = phi <4 x i8> [ poison, %[[VECTOR_BODY]] ], [ [[TMP2]], %[[PRED_LOAD_IF]] ]\n-+; CHECK-NEXT:    br i1 true, label %[[PRED_LOAD_IF1:.*]], label %[[PRED_LOAD_CONTINUE2:.*]]\n-+; CHECK:       [[PRED_LOAD_IF1]]:\n-+; CHECK-NEXT:    [[TMP4:%.*]] = getelementptr inbounds i8, ptr [[A]], i64 1\n-+; CHECK-NEXT:    [[TMP5:%.*]] = load i8, ptr [[TMP4]], align 1\n-+; CHECK-NEXT:    [[TMP6:%.*]] = insertelement <4 x i8> [[TMP3]], i8 [[TMP5]], i32 1\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE2]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE2]]:\n-+; CHECK-NEXT:    [[TMP7:%.*]] = phi <4 x i8> [ [[TMP3]], %[[PRED_LOAD_CONTINUE]] ], [ [[TMP6]], %[[PRED_LOAD_IF1]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF3:.*]], label %[[PRED_LOAD_CONTINUE4:.*]]\n-+; CHECK:       [[PRED_LOAD_IF3]]:\n-+; CHECK-NEXT:    [[TMP8:%.*]] = getelementptr inbounds i8, ptr [[A]], i64 2\n-+; CHECK-NEXT:    [[TMP9:%.*]] = load i8, ptr [[TMP8]], align 1\n-+; CHECK-NEXT:    [[TMP10:%.*]] = insertelement <4 x i8> [[TMP7]], i8 [[TMP9]], i32 2\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE4]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE4]]:\n-+; CHECK-NEXT:    [[TMP11:%.*]] = phi <4 x i8> [ [[TMP7]], %[[PRED_LOAD_CONTINUE2]] ], [ [[TMP10]], %[[PRED_LOAD_IF3]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF5:.*]], label %[[PRED_LOAD_CONTINUE6:.*]]\n-+; CHECK:       [[PRED_LOAD_IF5]]:\n-+; CHECK-NEXT:    [[TMP12:%.*]] = getelementptr inbounds i8, ptr [[A]], i64 3\n-+; CHECK-NEXT:    [[TMP13:%.*]] = load i8, ptr [[TMP12]], align 1\n-+; CHECK-NEXT:    [[TMP14:%.*]] = insertelement <4 x i8> [[TMP11]], i8 [[TMP13]], i32 3\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE6]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE6]]:\n-+; CHECK-NEXT:    [[TMP15:%.*]] = phi <4 x i8> [ [[TMP11]], %[[PRED_LOAD_CONTINUE4]] ], [ [[TMP14]], %[[PRED_LOAD_IF5]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF7:.*]], label %[[PRED_LOAD_CONTINUE8:.*]]\n-+; CHECK:       [[PRED_LOAD_IF7]]:\n-+; CHECK-NEXT:    [[TMP16:%.*]] = getelementptr inbounds i8, ptr [[A]], i64 4\n-+; CHECK-NEXT:    [[TMP17:%.*]] = load i8, ptr [[TMP16]], align 1\n-+; CHECK-NEXT:    [[TMP18:%.*]] = insertelement <4 x i8> poison, i8 [[TMP17]], i32 0\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE8]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE8]]:\n-+; CHECK-NEXT:    [[TMP19:%.*]] = phi <4 x i8> [ poison, %[[PRED_LOAD_CONTINUE6]] ], [ [[TMP18]], %[[PRED_LOAD_IF7]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF9:.*]], label %[[PRED_LOAD_CONTINUE10:.*]]\n-+; CHECK:       [[PRED_LOAD_IF9]]:\n-+; CHECK-NEXT:    [[TMP20:%.*]] = getelementptr inbounds i8, ptr [[A]], i64 5\n-+; CHECK-NEXT:    [[TMP21:%.*]] = load i8, ptr [[TMP20]], align 1\n-+; CHECK-NEXT:    [[TMP22:%.*]] = insertelement <4 x i8> [[TMP19]], i8 [[TMP21]], i32 1\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE10]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE10]]:\n-+; CHECK-NEXT:    [[TMP23:%.*]] = phi <4 x i8> [ [[TMP19]], %[[PRED_LOAD_CONTINUE8]] ], [ [[TMP22]], %[[PRED_LOAD_IF9]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF11:.*]], label %[[PRED_LOAD_CONTINUE12:.*]]\n-+; CHECK:       [[PRED_LOAD_IF11]]:\n-+; CHECK-NEXT:    [[TMP24:%.*]] = getelementptr inbounds i8, ptr [[A]], i64 6\n-+; CHECK-NEXT:    [[TMP25:%.*]] = load i8, ptr [[TMP24]], align 1\n-+; CHECK-NEXT:    [[TMP26:%.*]] = insertelement <4 x i8> [[TMP23]], i8 [[TMP25]], i32 2\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE12]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE12]]:\n-+; CHECK-NEXT:    [[TMP27:%.*]] = phi <4 x i8> [ [[TMP23]], %[[PRED_LOAD_CONTINUE10]] ], [ [[TMP26]], %[[PRED_LOAD_IF11]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF13:.*]], label %[[PRED_LOAD_CONTINUE14:.*]]\n-+; CHECK:       [[PRED_LOAD_IF13]]:\n-+; CHECK-NEXT:    [[TMP28:%.*]] = getelementptr inbounds i8, ptr [[A]], i64 7\n-+; CHECK-NEXT:    [[TMP29:%.*]] = load i8, ptr [[TMP28]], align 1\n-+; CHECK-NEXT:    [[TMP30:%.*]] = insertelement <4 x i8> [[TMP27]], i8 [[TMP29]], i32 3\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE14]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE14]]:\n-+; CHECK-NEXT:    [[TMP31:%.*]] = phi <4 x i8> [ [[TMP27]], %[[PRED_LOAD_CONTINUE12]] ], [ [[TMP30]], %[[PRED_LOAD_IF13]] ]\n-+; CHECK-NEXT:    [[TMP32:%.*]] = zext <4 x i8> [[TMP15]] to <4 x i64>\n-+; CHECK-NEXT:    [[TMP33:%.*]] = zext <4 x i8> [[TMP31]] to <4 x i64>\n-+; CHECK-NEXT:    br i1 true, label %[[PRED_STORE_IF:.*]], label %[[PRED_STORE_CONTINUE:.*]]\n-+; CHECK:       [[PRED_STORE_IF]]:\n-+; CHECK-NEXT:    [[TMP34:%.*]] = getelementptr inbounds i8, ptr [[C]], i64 0\n-+; CHECK-NEXT:    [[TMP35:%.*]] = extractelement <4 x i64> [[TMP32]], i32 0\n-+; CHECK-NEXT:    store i64 [[TMP35]], ptr [[TMP34]], align 4\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE]]\n-+; CHECK:       [[PRED_STORE_CONTINUE]]:\n-+; CHECK-NEXT:    br i1 true, label %[[PRED_STORE_IF15:.*]], label %[[PRED_STORE_CONTINUE16:.*]]\n-+; CHECK:       [[PRED_STORE_IF15]]:\n-+; CHECK-NEXT:    [[TMP36:%.*]] = getelementptr inbounds i8, ptr [[C]], i64 1\n-+; CHECK-NEXT:    [[TMP37:%.*]] = extractelement <4 x i64> [[TMP32]], i32 1\n-+; CHECK-NEXT:    store i64 [[TMP37]], ptr [[TMP36]], align 4\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE16]]\n-+; CHECK:       [[PRED_STORE_CONTINUE16]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF17:.*]], label %[[PRED_STORE_CONTINUE18:.*]]\n-+; CHECK:       [[PRED_STORE_IF17]]:\n-+; CHECK-NEXT:    [[TMP38:%.*]] = getelementptr inbounds i8, ptr [[C]], i64 2\n-+; CHECK-NEXT:    [[TMP39:%.*]] = extractelement <4 x i64> [[TMP32]], i32 2\n-+; CHECK-NEXT:    store i64 [[TMP39]], ptr [[TMP38]], align 4\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE18]]\n-+; CHECK:       [[PRED_STORE_CONTINUE18]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF19:.*]], label %[[PRED_STORE_CONTINUE20:.*]]\n-+; CHECK:       [[PRED_STORE_IF19]]:\n-+; CHECK-NEXT:    [[TMP40:%.*]] = getelementptr inbounds i8, ptr [[C]], i64 3\n-+; CHECK-NEXT:    [[TMP41:%.*]] = extractelement <4 x i64> [[TMP32]], i32 3\n-+; CHECK-NEXT:    store i64 [[TMP41]], ptr [[TMP40]], align 4\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE20]]\n-+; CHECK:       [[PRED_STORE_CONTINUE20]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF21:.*]], label %[[PRED_STORE_CONTINUE22:.*]]\n-+; CHECK:       [[PRED_STORE_IF21]]:\n-+; CHECK-NEXT:    [[TMP42:%.*]] = getelementptr inbounds i8, ptr [[C]], i64 4\n-+; CHECK-NEXT:    [[TMP43:%.*]] = extractelement <4 x i64> [[TMP33]], i32 0\n-+; CHECK-NEXT:    store i64 [[TMP43]], ptr [[TMP42]], align 4\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE22]]\n-+; CHECK:       [[PRED_STORE_CONTINUE22]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF23:.*]], label %[[PRED_STORE_CONTINUE24:.*]]\n-+; CHECK:       [[PRED_STORE_IF23]]:\n-+; CHECK-NEXT:    [[TMP44:%.*]] = getelementptr inbounds i8, ptr [[C]], i64 5\n-+; CHECK-NEXT:    [[TMP45:%.*]] = extractelement <4 x i64> [[TMP33]], i32 1\n-+; CHECK-NEXT:    store i64 [[TMP45]], ptr [[TMP44]], align 4\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE24]]\n-+; CHECK:       [[PRED_STORE_CONTINUE24]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF25:.*]], label %[[PRED_STORE_CONTINUE26:.*]]\n-+; CHECK:       [[PRED_STORE_IF25]]:\n-+; CHECK-NEXT:    [[TMP46:%.*]] = getelementptr inbounds i8, ptr [[C]], i64 6\n-+; CHECK-NEXT:    [[TMP47:%.*]] = extractelement <4 x i64> [[TMP33]], i32 2\n-+; CHECK-NEXT:    store i64 [[TMP47]], ptr [[TMP46]], align 4\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE26]]\n-+; CHECK:       [[PRED_STORE_CONTINUE26]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF27:.*]], label %[[PRED_STORE_CONTINUE28:.*]]\n-+; CHECK:       [[PRED_STORE_IF27]]:\n-+; CHECK-NEXT:    [[TMP48:%.*]] = getelementptr inbounds i8, ptr [[C]], i64 7\n-+; CHECK-NEXT:    [[TMP49:%.*]] = extractelement <4 x i64> [[TMP33]], i32 3\n-+; CHECK-NEXT:    store i64 [[TMP49]], ptr [[TMP48]], align 4\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE28]]\n-+; CHECK:       [[PRED_STORE_CONTINUE28]]:\n-+; CHECK-NEXT:    [[TMP50:%.*]] = getelementptr inbounds i8, ptr [[B]], i64 0\n-+; CHECK-NEXT:    [[TMP51:%.*]] = getelementptr inbounds i8, ptr [[B]], i64 1\n-+; CHECK-NEXT:    [[TMP52:%.*]] = getelementptr inbounds i8, ptr [[B]], i64 2\n-+; CHECK-NEXT:    [[TMP53:%.*]] = getelementptr inbounds i8, ptr [[B]], i64 3\n-+; CHECK-NEXT:    [[TMP54:%.*]] = insertelement <4 x ptr> poison, ptr [[TMP50]], i32 0\n-+; CHECK-NEXT:    [[TMP55:%.*]] = insertelement <4 x ptr> [[TMP54]], ptr [[TMP51]], i32 1\n-+; CHECK-NEXT:    [[TMP56:%.*]] = insertelement <4 x ptr> [[TMP55]], ptr [[TMP52]], i32 2\n-+; CHECK-NEXT:    [[TMP57:%.*]] = insertelement <4 x ptr> [[TMP56]], ptr [[TMP53]], i32 3\n-+; CHECK-NEXT:    [[TMP58:%.*]] = getelementptr inbounds i8, ptr [[B]], i64 4\n-+; CHECK-NEXT:    [[TMP59:%.*]] = getelementptr inbounds i8, ptr [[B]], i64 5\n-+; CHECK-NEXT:    [[TMP60:%.*]] = getelementptr inbounds i8, ptr [[B]], i64 6\n-+; CHECK-NEXT:    [[TMP61:%.*]] = getelementptr inbounds i8, ptr [[B]], i64 7\n-+; CHECK-NEXT:    [[TMP62:%.*]] = insertelement <4 x ptr> poison, ptr [[TMP58]], i32 0\n-+; CHECK-NEXT:    [[TMP63:%.*]] = insertelement <4 x ptr> [[TMP62]], ptr [[TMP59]], i32 1\n-+; CHECK-NEXT:    [[TMP64:%.*]] = insertelement <4 x ptr> [[TMP63]], ptr [[TMP60]], i32 2\n-+; CHECK-NEXT:    [[TMP65:%.*]] = insertelement <4 x ptr> [[TMP64]], ptr [[TMP61]], i32 3\n-+; CHECK-NEXT:    br i1 true, label %[[PRED_LOAD_IF29:.*]], label %[[PRED_LOAD_CONTINUE30:.*]]\n-+; CHECK:       [[PRED_LOAD_IF29]]:\n-+; CHECK-NEXT:    [[TMP66:%.*]] = load i8, ptr [[TMP50]], align 1\n-+; CHECK-NEXT:    [[TMP67:%.*]] = insertelement <4 x i8> poison, i8 [[TMP66]], i32 0\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE30]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE30]]:\n-+; CHECK-NEXT:    [[TMP68:%.*]] = phi <4 x i8> [ poison, %[[PRED_STORE_CONTINUE28]] ], [ [[TMP67]], %[[PRED_LOAD_IF29]] ]\n-+; CHECK-NEXT:    br i1 true, label %[[PRED_LOAD_IF31:.*]], label %[[PRED_LOAD_CONTINUE32:.*]]\n-+; CHECK:       [[PRED_LOAD_IF31]]:\n-+; CHECK-NEXT:    [[TMP69:%.*]] = load i8, ptr [[TMP51]], align 1\n-+; CHECK-NEXT:    [[TMP70:%.*]] = insertelement <4 x i8> [[TMP68]], i8 [[TMP69]], i32 1\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE32]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE32]]:\n-+; CHECK-NEXT:    [[TMP71:%.*]] = phi <4 x i8> [ [[TMP68]], %[[PRED_LOAD_CONTINUE30]] ], [ [[TMP70]], %[[PRED_LOAD_IF31]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF33:.*]], label %[[PRED_LOAD_CONTINUE34:.*]]\n-+; CHECK:       [[PRED_LOAD_IF33]]:\n-+; CHECK-NEXT:    [[TMP72:%.*]] = load i8, ptr [[TMP52]], align 1\n-+; CHECK-NEXT:    [[TMP73:%.*]] = insertelement <4 x i8> [[TMP71]], i8 [[TMP72]], i32 2\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE34]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE34]]:\n-+; CHECK-NEXT:    [[TMP74:%.*]] = phi <4 x i8> [ [[TMP71]], %[[PRED_LOAD_CONTINUE32]] ], [ [[TMP73]], %[[PRED_LOAD_IF33]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF35:.*]], label %[[PRED_LOAD_CONTINUE36:.*]]\n-+; CHECK:       [[PRED_LOAD_IF35]]:\n-+; CHECK-NEXT:    [[TMP75:%.*]] = load i8, ptr [[TMP53]], align 1\n-+; CHECK-NEXT:    [[TMP76:%.*]] = insertelement <4 x i8> [[TMP74]], i8 [[TMP75]], i32 3\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE36]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE36]]:\n-+; CHECK-NEXT:    [[TMP77:%.*]] = phi <4 x i8> [ [[TMP74]], %[[PRED_LOAD_CONTINUE34]] ], [ [[TMP76]], %[[PRED_LOAD_IF35]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF37:.*]], label %[[PRED_LOAD_CONTINUE38:.*]]\n-+; CHECK:       [[PRED_LOAD_IF37]]:\n-+; CHECK-NEXT:    [[TMP78:%.*]] = load i8, ptr [[TMP58]], align 1\n-+; CHECK-NEXT:    [[TMP79:%.*]] = insertelement <4 x i8> poison, i8 [[TMP78]], i32 0\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE38]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE38]]:\n-+; CHECK-NEXT:    [[TMP80:%.*]] = phi <4 x i8> [ poison, %[[PRED_LOAD_CONTINUE36]] ], [ [[TMP79]], %[[PRED_LOAD_IF37]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF39:.*]], label %[[PRED_LOAD_CONTINUE40:.*]]\n-+; CHECK:       [[PRED_LOAD_IF39]]:\n-+; CHECK-NEXT:    [[TMP81:%.*]] = load i8, ptr [[TMP59]], align 1\n-+; CHECK-NEXT:    [[TMP82:%.*]] = insertelement <4 x i8> [[TMP80]], i8 [[TMP81]], i32 1\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE40]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE40]]:\n-+; CHECK-NEXT:    [[TMP83:%.*]] = phi <4 x i8> [ [[TMP80]], %[[PRED_LOAD_CONTINUE38]] ], [ [[TMP82]], %[[PRED_LOAD_IF39]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF41:.*]], label %[[PRED_LOAD_CONTINUE42:.*]]\n-+; CHECK:       [[PRED_LOAD_IF41]]:\n-+; CHECK-NEXT:    [[TMP84:%.*]] = load i8, ptr [[TMP60]], align 1\n-+; CHECK-NEXT:    [[TMP85:%.*]] = insertelement <4 x i8> [[TMP83]], i8 [[TMP84]], i32 2\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE42]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE42]]:\n-+; CHECK-NEXT:    [[TMP86:%.*]] = phi <4 x i8> [ [[TMP83]], %[[PRED_LOAD_CONTINUE40]] ], [ [[TMP85]], %[[PRED_LOAD_IF41]] ]\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_LOAD_IF43:.*]], label %[[PRED_LOAD_CONTINUE44:.*]]\n-+; CHECK:       [[PRED_LOAD_IF43]]:\n-+; CHECK-NEXT:    [[TMP87:%.*]] = load i8, ptr [[TMP61]], align 1\n-+; CHECK-NEXT:    [[TMP88:%.*]] = insertelement <4 x i8> [[TMP86]], i8 [[TMP87]], i32 3\n-+; CHECK-NEXT:    br label %[[PRED_LOAD_CONTINUE44]]\n-+; CHECK:       [[PRED_LOAD_CONTINUE44]]:\n-+; CHECK-NEXT:    [[TMP89:%.*]] = phi <4 x i8> [ [[TMP86]], %[[PRED_LOAD_CONTINUE42]] ], [ [[TMP88]], %[[PRED_LOAD_IF43]] ]\n-+; CHECK-NEXT:    [[TMP90:%.*]] = trunc <4 x i8> [[TMP77]] to <4 x i1>\n-+; CHECK-NEXT:    [[TMP91:%.*]] = trunc <4 x i8> [[TMP89]] to <4 x i1>\n-+; CHECK-NEXT:    [[TMP92:%.*]] = and <4 x i1> [[TMP90]], splat (i1 true)\n-+; CHECK-NEXT:    [[TMP93:%.*]] = and <4 x i1> [[TMP91]], splat (i1 true)\n-+; CHECK-NEXT:    [[TMP94:%.*]] = select <4 x i1> [[TMP90]], <4 x float> splat (float 1.000000e+00), <4 x float> zeroinitializer\n-+; CHECK-NEXT:    [[TMP95:%.*]] = select <4 x i1> [[TMP91]], <4 x float> splat (float 1.000000e+00), <4 x float> zeroinitializer\n-+; CHECK-NEXT:    [[TMP96:%.*]] = select <4 x i1> [[TMP92]], <4 x float> splat (float 3.000000e+00), <4 x float> [[TMP94]]\n-+; CHECK-NEXT:    [[TMP97:%.*]] = select <4 x i1> [[TMP93]], <4 x float> splat (float 3.000000e+00), <4 x float> [[TMP95]]\n-+; CHECK-NEXT:    [[TMP98:%.*]] = bitcast <4 x float> [[TMP96]] to <4 x i32>\n-+; CHECK-NEXT:    [[TMP99:%.*]] = bitcast <4 x float> [[TMP97]] to <4 x i32>\n-+; CHECK-NEXT:    [[TMP100:%.*]] = trunc <4 x i32> [[TMP98]] to <4 x i8>\n-+; CHECK-NEXT:    [[TMP101:%.*]] = trunc <4 x i32> [[TMP99]] to <4 x i8>\n-+; CHECK-NEXT:    br i1 true, label %[[PRED_STORE_IF45:.*]], label %[[PRED_STORE_CONTINUE46:.*]]\n-+; CHECK:       [[PRED_STORE_IF45]]:\n-+; CHECK-NEXT:    [[TMP102:%.*]] = extractelement <4 x i8> [[TMP100]], i32 0\n-+; CHECK-NEXT:    store i8 [[TMP102]], ptr [[TMP50]], align 1\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE46]]\n-+; CHECK:       [[PRED_STORE_CONTINUE46]]:\n-+; CHECK-NEXT:    br i1 true, label %[[PRED_STORE_IF47:.*]], label %[[PRED_STORE_CONTINUE48:.*]]\n-+; CHECK:       [[PRED_STORE_IF47]]:\n-+; CHECK-NEXT:    [[TMP103:%.*]] = extractelement <4 x i8> [[TMP100]], i32 1\n-+; CHECK-NEXT:    store i8 [[TMP103]], ptr [[TMP51]], align 1\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE48]]\n-+; CHECK:       [[PRED_STORE_CONTINUE48]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF49:.*]], label %[[PRED_STORE_CONTINUE50:.*]]\n-+; CHECK:       [[PRED_STORE_IF49]]:\n-+; CHECK-NEXT:    [[TMP104:%.*]] = extractelement <4 x i8> [[TMP100]], i32 2\n-+; CHECK-NEXT:    store i8 [[TMP104]], ptr [[TMP52]], align 1\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE50]]\n-+; CHECK:       [[PRED_STORE_CONTINUE50]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF51:.*]], label %[[PRED_STORE_CONTINUE52:.*]]\n-+; CHECK:       [[PRED_STORE_IF51]]:\n-+; CHECK-NEXT:    [[TMP105:%.*]] = extractelement <4 x i8> [[TMP100]], i32 3\n-+; CHECK-NEXT:    store i8 [[TMP105]], ptr [[TMP53]], align 1\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE52]]\n-+; CHECK:       [[PRED_STORE_CONTINUE52]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF53:.*]], label %[[PRED_STORE_CONTINUE54:.*]]\n-+; CHECK:       [[PRED_STORE_IF53]]:\n-+; CHECK-NEXT:    [[TMP106:%.*]] = extractelement <4 x i8> [[TMP101]], i32 0\n-+; CHECK-NEXT:    store i8 [[TMP106]], ptr [[TMP58]], align 1\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE54]]\n-+; CHECK:       [[PRED_STORE_CONTINUE54]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF55:.*]], label %[[PRED_STORE_CONTINUE56:.*]]\n-+; CHECK:       [[PRED_STORE_IF55]]:\n-+; CHECK-NEXT:    [[TMP107:%.*]] = extractelement <4 x i8> [[TMP101]], i32 1\n-+; CHECK-NEXT:    store i8 [[TMP107]], ptr [[TMP59]], align 1\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE56]]\n-+; CHECK:       [[PRED_STORE_CONTINUE56]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF57:.*]], label %[[PRED_STORE_CONTINUE58:.*]]\n-+; CHECK:       [[PRED_STORE_IF57]]:\n-+; CHECK-NEXT:    [[TMP108:%.*]] = extractelement <4 x i8> [[TMP101]], i32 2\n-+; CHECK-NEXT:    store i8 [[TMP108]], ptr [[TMP60]], align 1\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE58]]\n-+; CHECK:       [[PRED_STORE_CONTINUE58]]:\n-+; CHECK-NEXT:    br i1 false, label %[[PRED_STORE_IF59:.*]], label %[[PRED_STORE_CONTINUE60:.*]]\n-+; CHECK:       [[PRED_STORE_IF59]]:\n-+; CHECK-NEXT:    [[TMP109:%.*]] = extractelement <4 x i8> [[TMP101]], i32 3\n-+; CHECK-NEXT:    store i8 [[TMP109]], ptr [[TMP61]], align 1\n-+; CHECK-NEXT:    br label %[[PRED_STORE_CONTINUE60]]\n-+; CHECK:       [[PRED_STORE_CONTINUE60]]:\n-+; CHECK-NEXT:    br label %[[MIDDLE_BLOCK:.*]]\n-+; CHECK:       [[MIDDLE_BLOCK]]:\n-+; CHECK-NEXT:    br [[EXIT:label %.*]]\n-+; CHECK:       [[SCALAR_PH:.*:]]\n-+;\n-+entry:\n-+  br label %loop\n-+\n-+loop:\n-+  %iv = phi i64 [ 0, %entry ], [ %iv.next, %loop ]\n-+  %gep.A = getelementptr inbounds i8, ptr %A, i64 %iv\n-+  %l = load i8, ptr %gep.A\n-+  %l.ext = zext i8 %l to i64\n-+  %gep.C = getelementptr inbounds i8, ptr %C, i64 %iv\n-+  store i64 %l.ext, ptr %gep.C\n-+  %gep.B = getelementptr inbounds i8, ptr %B, i64 %iv\n-+  %l.1 = load i8, ptr %gep.B, align 1\n-+  %masked = and i8 %l.1, 1\n-+  %l.1.trunc = trunc i8 %l.1 to i1\n-+  %sel.0 = select i1 %l.1.trunc, float 1.000000e+00, float 0.000000e+00\n-+  %masked.trunc = trunc i8 %masked to i1\n-+  %sel.1 = select i1 %masked.trunc, float 3.000000e+00, float %sel.0\n-+  %bc = bitcast float %sel.1 to i32\n-+  %bc.trunc = trunc i32 %bc to i8\n-+  store i8 %bc.trunc, ptr %gep.B, align 1\n-+  %iv.next = add i64 %iv, 1\n-+  %ec = icmp eq i64 %iv, 1\n-+  br i1 %ec, label %exit, label %loop\n-+\n-+exit:\n-+  ret void\n-+}\n-diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/llvm/BUILD.bazel b/utils/bazel/llvm-project-overlay/llvm/BUILD.bazel\n---- a/utils/bazel/llvm-project-overlay/llvm/BUILD.bazel\n-+++ b/utils/bazel/llvm-project-overlay/llvm/BUILD.bazel\n-@@ -4970,6 +4970,22 @@\n- )\n- \n- cc_binary(\n-+    name = \"llvm-remarkutil\",\n-+    srcs = glob([\n-+        \"tools/llvm-remarkutil/**/*.cpp\",\n-+        \"tools/llvm-remarkutil/**/*.h\",\n-+    ]),\n-+    copts = llvm_copts,\n-+    includes = [\"tools/llvm-remarkutil\"],\n-+    stamp = 0,\n-+    deps = [\n-+        \":Demangle\",\n-+        \":Remarks\",\n-+        \":Support\",\n-+    ],\n-+)\n-+\n-+cc_binary(\n-     name = \"llvm-rtdyld\",\n-     srcs = glob([\n-         \"tools/llvm-rtdyld/*.cpp\","
        },
        {
            "sha": "9431f261947f9fa8c5357e5f03eb5ada12260fd7",
            "filename": "third_party/xla/third_party/llvm/workspace.bzl",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl?ref=8ba4a99bc29322cbb36283dae3aeb3cfc0d08447",
            "patch": "@@ -4,8 +4,8 @@ load(\"//third_party:repo.bzl\", \"tf_http_archive\")\n \n def repo(name):\n     \"\"\"Imports LLVM.\"\"\"\n-    LLVM_COMMIT = \"113f01aa82d055410f22a9d03b3468fa68600589\"\n-    LLVM_SHA256 = \"9aee00a35aa76639746589c6d09e8c18249be16b5b6aa6b788a570a4bc6c4543\"\n+    LLVM_COMMIT = \"d28c07b7550af47ff7adc068d6078388cdeed61d\"\n+    LLVM_SHA256 = \"627cba3a53a992a67cddebdb2a6e849385444c3fdb5f71ccf230f28f840caf04\"\n \n     tf_http_archive(\n         name = name,"
        },
        {
            "sha": "5f4d8216ef6da331ed68f91ed4a5e6d97456b2f2",
            "filename": "third_party/xla/third_party/shardy/temporary.patch",
            "status": "modified",
            "additions": 1120,
            "deletions": 546,
            "changes": 1666,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch?ref=8ba4a99bc29322cbb36283dae3aeb3cfc0d08447"
        },
        {
            "sha": "200c58248fbabe311183aa1e5da60069d5336f63",
            "filename": "third_party/xla/third_party/shardy/workspace.bzl",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl?ref=8ba4a99bc29322cbb36283dae3aeb3cfc0d08447",
            "patch": "@@ -3,8 +3,8 @@\n load(\"//third_party:repo.bzl\", \"tf_http_archive\", \"tf_mirror_urls\")\n \n def repo():\n-    SHARDY_COMMIT = \"d944a51f1c470f0fd9cea5e698105073fa55996f\"\n-    SHARDY_SHA256 = \"9a844d9dd2ee512227462bd08d1a399f88e11fc88b27ed892a26d82e27346364\"\n+    SHARDY_COMMIT = \"d7d2f4fcf0fd9ab07e7c43fccacf72a8a53534d4\"\n+    SHARDY_SHA256 = \"a4b77c59993316bd0cf45fc9b50164741ca0121bdc611404d7dc899a2c19549b\"\n \n     tf_http_archive(\n         name = \"shardy\","
        },
        {
            "sha": "2c6ffbd7ec984432757a09297cecbb249fd6328e",
            "filename": "third_party/xla/third_party/triton/llvm_integration/cl812994567.patch",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fcl812994567.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fcl812994567.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fcl812994567.patch?ref=8ba4a99bc29322cbb36283dae3aeb3cfc0d08447",
            "patch": "@@ -0,0 +1,12 @@\n+\n+--- a/third_party/amd/lib/TritonAMDGPUToLLVM/BufferOpsEmitter.cpp\t2025-08-22 04:02:56.000000000 -0700\n++++ b/third_party/amd/lib/TritonAMDGPUToLLVM/BufferOpsEmitter.cpp\t2025-09-29 17:07:00.000000000 -0700\n+@@ -82,7 +82,7 @@\n+ \n+   Value flagsConst = b.int_val(32, flags);\n+   Type rsrcType = LLVM::LLVMPointerType::get(rewriter.getContext(), 8);\n+-  Value numRecordsByte = b.int_val(32, std::numeric_limits<int>::max() - 1);\n++  Value numRecordsByte = b.int_val(64, std::numeric_limits<int>::max() - 1);\n+ \n+   Value resource = rewriter.createOrFold<ROCDL::MakeBufferRsrcOp>(\n+       loc, rsrcType, basePtr, stride, numRecordsByte, flagsConst);"
        },
        {
            "sha": "c0fe45289de36538158046678460a3b9a6491af3",
            "filename": "third_party/xla/third_party/triton/llvm_integration/series.bzl",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fseries.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fseries.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fseries.bzl?ref=8ba4a99bc29322cbb36283dae3aeb3cfc0d08447",
            "patch": "@@ -11,5 +11,6 @@ llvm_patch_list = [\n     \"//third_party/triton:llvm_integration/cl801607173.patch\",\n     \"//third_party/triton:llvm_integration/cl808150672.patch\",\n     \"//third_party/triton:llvm_integration/cl809972027.patch\",\n+    \"//third_party/triton:llvm_integration/cl812994567.patch\",\n     # Add new patches just above this line\n ]"
        },
        {
            "sha": "2e9ea7a8a59254c3ced5750dcb51dc63b41624fd",
            "filename": "third_party/xla/xla/mlir_hlo/transforms/bufferize_pass.cc",
            "status": "modified",
            "additions": 21,
            "deletions": 9,
            "changes": 30,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Ftransforms%2Fbufferize_pass.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ba4a99bc29322cbb36283dae3aeb3cfc0d08447/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Ftransforms%2Fbufferize_pass.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Ftransforms%2Fbufferize_pass.cc?ref=8ba4a99bc29322cbb36283dae3aeb3cfc0d08447",
            "patch": "@@ -33,6 +33,7 @@ limitations under the License.\n #include \"mlir/Dialect/Arith/Transforms/Passes.h\"\n #include \"mlir/Dialect/Bufferization/IR/BufferizableOpInterface.h\"\n #include \"mlir/Dialect/Bufferization/IR/Bufferization.h\"\n+#include \"mlir/Dialect/Bufferization/IR/BufferizationTypeInterfaces.h\"\n #include \"mlir/Dialect/Bufferization/Transforms/Bufferize.h\"\n #include \"mlir/Dialect/Bufferization/Transforms/FuncBufferizableOpInterfaceImpl.h\"\n #include \"mlir/Dialect/Bufferization/Transforms/OneShotAnalysis.h\"\n@@ -271,17 +272,28 @@ struct OneShotBufferizePass\n     opts.allowReturnAllocsFromLoops = true;\n     opts.bufferizeFunctionBoundaries = true;\n     opts.functionArgTypeConverterFn =\n-        [=](TensorType tensorType, Attribute memorySpace,\n+        [=](bufferization::TensorLikeType type, Attribute memorySpace,\n             FunctionOpInterface funcOp,\n             const bufferization::BufferizationOptions& /*options*/) {\n-          // Functions created by fusion outlining should have fully dynamic\n-          // layout. All other functions (for now only \"main\") gets static\n-          // layout.\n-          if (funcOp->hasAttr(kFusionFunctionLabel))\n-            return bufferization::getMemRefTypeWithFullyDynamicLayout(\n-                tensorType, memorySpace);\n-          return bufferization::getMemRefTypeWithStaticIdentityLayout(\n-              tensorType, memorySpace);\n+          if (auto tensorType = mlir::dyn_cast<TensorType>(type)) {\n+            // Functions created by fusion outlining should have fully dynamic\n+            // layout. All other functions (for now only \"main\") gets static\n+            // layout.\n+            if (funcOp->hasAttr(kFusionFunctionLabel)) {\n+              return cast<bufferization::BufferLikeType>(\n+                  bufferization::getMemRefTypeWithFullyDynamicLayout(\n+                      tensorType, memorySpace));\n+            }\n+            return cast<bufferization::BufferLikeType>(\n+                bufferization::getMemRefTypeWithStaticIdentityLayout(\n+                    tensorType, memorySpace));\n+          }\n+          // If not builtin, fallback to TensorLikeType::getBufferType()\n+          auto bufferType =\n+              type.getBufferType(opts, [&]() { return funcOp->emitError(); });\n+          assert(succeeded(bufferType) &&\n+                 \"a valid buffer is always expected at function boundary\");\n+          return *bufferType;\n         };\n     opts.inferFunctionResultLayout = false;\n     opts.bufferAlignment = 64;"
        }
    ],
    "stats": {
        "total": 2593,
        "additions": 1158,
        "deletions": 1435
    }
}