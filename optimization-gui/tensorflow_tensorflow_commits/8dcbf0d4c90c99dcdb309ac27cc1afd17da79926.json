{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 832654956",
    "sha": "8dcbf0d4c90c99dcdb309ac27cc1afd17da79926",
    "files": [
        {
            "sha": "2b1522898d783375e5aa14ef52b0da32d506f057",
            "filename": "third_party/xla/xla/tsl/lib/io/snappy/snappy_inputbuffer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputbuffer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputbuffer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputbuffer.cc?ref=8dcbf0d4c90c99dcdb309ac27cc1afd17da79926",
            "patch": "@@ -86,7 +86,7 @@ size_t SnappyInputBuffer::ReadBytesFromCache(size_t bytes_to_read,\n \n absl::Status SnappyInputBuffer::Inflate() {\n   // Read length of compressed block.\n-  uint32 compressed_block_length;\n+  uint32_t compressed_block_length;\n   TF_RETURN_IF_ERROR(ReadCompressedBlockLength(&compressed_block_length));\n \n   // If the entire block is not in cache do a read from file.\n@@ -130,7 +130,7 @@ absl::Status SnappyInputBuffer::Inflate() {\n   return absl::OkStatus();\n }\n \n-absl::Status SnappyInputBuffer::ReadCompressedBlockLength(uint32* length) {\n+absl::Status SnappyInputBuffer::ReadCompressedBlockLength(uint32_t* length) {\n   *length = 0;\n   size_t bytes_to_read = 4;\n   while (bytes_to_read > 0) {"
        },
        {
            "sha": "8a0c75fa0ad0c2d697ec5c327b4086dd7e5f9d88",
            "filename": "third_party/xla/xla/tsl/lib/io/snappy/snappy_inputbuffer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputbuffer.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputbuffer.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputbuffer.h?ref=8dcbf0d4c90c99dcdb309ac27cc1afd17da79926",
            "patch": "@@ -92,7 +92,7 @@ class SnappyInputBuffer : public InputStreamInterface {\n \n   // Reads the length of the next *compressed* block and stores in `length`.\n   // The length is stored in 4 bytes in little endian notation.\n-  absl::Status ReadCompressedBlockLength(uint32* length);\n+  absl::Status ReadCompressedBlockLength(uint32_t* length);\n \n   RandomAccessFile* file_;         // Not owned\n   int64_t file_pos_ = 0;           // Next position to read from in `file_`"
        },
        {
            "sha": "de892a5ecd6516a6829c9a9a58e625fedd472928",
            "filename": "third_party/xla/xla/tsl/lib/io/snappy/snappy_inputstream.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputstream.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputstream.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_inputstream.cc?ref=8dcbf0d4c90c99dcdb309ac27cc1afd17da79926",
            "patch": "@@ -85,11 +85,11 @@ absl::Status SnappyInputStream::ReadNBytes(int64_t bytes_to_read,\n \n absl::Status SnappyInputStream::Inflate() {\n   tstring compressed_block_length_ts;\n-  uint32 compressed_block_length;\n+  uint32_t compressed_block_length;\n \n   TF_RETURN_IF_ERROR(\n-      input_stream_->ReadNBytes(sizeof(uint32), &compressed_block_length_ts));\n-  for (int i = 0; i < sizeof(uint32); ++i) {\n+      input_stream_->ReadNBytes(sizeof(uint32_t), &compressed_block_length_ts));\n+  for (int i = 0; i < sizeof(uint32_t); ++i) {\n     compressed_block_length =\n         (compressed_block_length << 8) |\n         static_cast<unsigned char>(compressed_block_length_ts.data()[i]);"
        },
        {
            "sha": "4bbca4712b6ef33e29bfc7a783cbff5853f25090",
            "filename": "third_party/xla/xla/tsl/lib/io/snappy/snappy_outputbuffer.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_outputbuffer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_outputbuffer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_outputbuffer.cc?ref=8dcbf0d4c90c99dcdb309ac27cc1afd17da79926",
            "patch": "@@ -80,7 +80,7 @@ absl::Status SnappyOutputBuffer::Write(absl::string_view data) {\n \n   // If there is sufficient free space in input_buffer_ to fit data we\n   // add it there and return.\n-  if (static_cast<int32>(bytes_to_write) <= AvailableInputSpace()) {\n+  if (static_cast<int32_t>(bytes_to_write) <= AvailableInputSpace()) {\n     AddToInputBuffer(data);\n     return absl::OkStatus();\n   }\n@@ -91,7 +91,7 @@ absl::Status SnappyOutputBuffer::Write(absl::string_view data) {\n   TF_RETURN_IF_ERROR(DeflateBuffered());\n \n   // input_buffer_ should be empty at this point.\n-  if (static_cast<int32>(bytes_to_write) <= AvailableInputSpace()) {\n+  if (static_cast<int32_t>(bytes_to_write) <= AvailableInputSpace()) {\n     AddToInputBuffer(data);\n     return absl::OkStatus();\n   }\n@@ -117,7 +117,7 @@ absl::Status SnappyOutputBuffer::Flush() {\n   return absl::OkStatus();\n }\n \n-int32 SnappyOutputBuffer::AvailableInputSpace() const {\n+int32_t SnappyOutputBuffer::AvailableInputSpace() const {\n   return input_buffer_capacity_ - avail_in_;\n }\n \n@@ -148,7 +148,7 @@ void SnappyOutputBuffer::AddToInputBuffer(absl::string_view data) {\n   const int32_t free_tail_bytes =\n       input_buffer_capacity_ - (read_bytes + unread_bytes);\n \n-  if (static_cast<int32>(bytes_to_write) > free_tail_bytes) {\n+  if (static_cast<int32_t>(bytes_to_write) > free_tail_bytes) {\n     memmove(input_buffer_.get(), next_in_, avail_in_);\n     next_in_ = input_buffer_.get();\n   }\n@@ -197,7 +197,7 @@ absl::Status SnappyOutputBuffer::Deflate() {\n   if (avail_in_ == 0) {\n     return absl::OkStatus();\n   }\n-  string output;\n+  std::string output;\n   if (!port::Snappy_Compress(next_in_, avail_in_, &output)) {\n     return errors::DataLoss(\"Snappy_Compress failed\");\n   }"
        },
        {
            "sha": "0abd3e48942c7b5f77b789740b9e54675766d8b6",
            "filename": "third_party/xla/xla/tsl/lib/io/snappy/snappy_outputbuffer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_outputbuffer.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_outputbuffer.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_outputbuffer.h?ref=8dcbf0d4c90c99dcdb309ac27cc1afd17da79926",
            "patch": "@@ -114,7 +114,7 @@ class SnappyOutputBuffer : public WritableFile {\n   absl::Status AddToOutputBuffer(const char* data, size_t length);\n \n   // Returns the total space available in `input_buffer_`.\n-  int32 AvailableInputSpace() const;\n+  int32_t AvailableInputSpace() const;\n \n   // Deflate contents in input_buffer_ and store results in output_buffer_.\n   // The contents of output stream are written to file if more space is needed."
        },
        {
            "sha": "a1b743e45d3a4fbb0842ac285b1631f80baf6678",
            "filename": "third_party/xla/xla/tsl/lib/io/snappy/snappy_test.cc",
            "status": "modified",
            "additions": 26,
            "deletions": 25,
            "changes": 51,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8dcbf0d4c90c99dcdb309ac27cc1afd17da79926/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fio%2Fsnappy%2Fsnappy_test.cc?ref=8dcbf0d4c90c99dcdb309ac27cc1afd17da79926",
            "patch": "@@ -26,16 +26,16 @@ limitations under the License.\n \n namespace tsl {\n \n-static void CheckPrefixSuffix(absl::string_view str, const string& prefix,\n-                              const string& suffix) {\n+static void CheckPrefixSuffix(absl::string_view str, const std::string& prefix,\n+                              const std::string& suffix) {\n   CHECK_GE(str.size(), prefix.size());\n   CHECK_GE(str.size(), suffix.size());\n   CHECK_EQ(str.substr(0, prefix.length()), prefix);\n   CHECK_EQ(str.substr(str.length() - suffix.length()), suffix);\n }\n \n-static string GetRecord() {\n-  static const string lorem_ipsum =\n+static std::string GetRecord() {\n+  static const std::string lorem_ipsum =\n       \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\"\n       \" Fusce vehicula tincidunt libero sit amet ultrices. Vestibulum non \"\n       \"felis augue. Duis vitae augue id lectus lacinia congue et ut purus. \"\n@@ -51,8 +51,8 @@ static string GetRecord() {\n   return lorem_ipsum;\n }\n \n-static string GenTestString(int copies = 1) {\n-  string result = \"\";\n+static std::string GenTestString(int copies = 1) {\n+  std::string result = \"\";\n   for (int i = 0; i < copies; i++) {\n     result += GetRecord();\n   }\n@@ -64,8 +64,8 @@ absl::Status TestMultipleWritesWriteFile(size_t compress_input_buf_size,\n                                          int num_writes, bool with_flush,\n                                          int num_copies,\n                                          bool corrupt_compressed_file,\n-                                         string& fname, string& data,\n-                                         string& expected_result) {\n+                                         std::string& fname, std::string& data,\n+                                         std::string& expected_result) {\n   Env* env = Env::Default();\n \n   fname = testing::TmpDir() + \"/snappy_buffers_test\";\n@@ -88,7 +88,8 @@ absl::Status TestMultipleWritesWriteFile(size_t compress_input_buf_size,\n   TF_RETURN_IF_ERROR(file_writer->Close());\n \n   if (corrupt_compressed_file) {\n-    string corrupt_fname = testing::TmpDir() + \"/snappy_buffers_test_corrupt\";\n+    std::string corrupt_fname =\n+        testing::TmpDir() + \"/snappy_buffers_test_corrupt\";\n     std::unique_ptr<WritableFile> corrupt_file_writer;\n     TF_RETURN_IF_ERROR(\n         env->NewWritableFile(corrupt_fname, &corrupt_file_writer));\n@@ -135,9 +136,9 @@ absl::Status TestMultipleWrites(size_t compress_input_buf_size,\n                                 bool corrupt_compressed_file = false) {\n   Env* env = Env::Default();\n \n-  string expected_result;\n-  string fname;\n-  string data;\n+  std::string expected_result;\n+  std::string fname;\n+  std::string data;\n \n   TF_RETURN_IF_ERROR(TestMultipleWritesWriteFile(\n       compress_input_buf_size, compress_output_buf_size, num_writes, with_flush,\n@@ -150,7 +151,7 @@ absl::Status TestMultipleWrites(size_t compress_input_buf_size,\n \n   // Run the test twice, resetting the stream after the first attempt.\n   for (int attempt = 0; attempt < 2; ++attempt) {\n-    string actual_result;\n+    std::string actual_result;\n     for (int i = 0; i < num_writes; i++) {\n       tstring decompressed_output;\n       TF_RETURN_IF_ERROR(in.ReadNBytes(data.size(), &decompressed_output));\n@@ -173,9 +174,9 @@ absl::Status TestMultipleWritesInputStream(\n     bool corrupt_compressed_file = false) {\n   Env* env = Env::Default();\n \n-  string expected_result;\n-  string fname;\n-  string data;\n+  std::string expected_result;\n+  std::string fname;\n+  std::string data;\n \n   TF_RETURN_IF_ERROR(TestMultipleWritesWriteFile(\n       compress_input_buf_size, compress_output_buf_size, num_writes, with_flush,\n@@ -188,7 +189,7 @@ absl::Status TestMultipleWritesInputStream(\n                                             uncompress_output_buf_size);\n \n   for (int attempt = 0; attempt < 2; ++attempt) {\n-    string actual_result;\n+    std::string actual_result;\n     for (int i = 0; i < num_writes; ++i) {\n       tstring decompressed_output;\n       TF_RETURN_IF_ERROR(\n@@ -208,7 +209,7 @@ void TestTellWriteFile(size_t compress_input_buf_size,\n                        size_t compress_output_buf_size,\n                        size_t uncompress_input_buf_size,\n                        size_t uncompress_output_buf_size, int num_copies,\n-                       string& fname, string& data) {\n+                       std::string& fname, std::string& data) {\n   Env* env = Env::Default();\n   fname = testing::TmpDir() + \"/snappy_buffers_test\";\n   data = GenTestString(num_copies);\n@@ -228,14 +229,14 @@ void TestTell(size_t compress_input_buf_size, size_t compress_output_buf_size,\n               size_t uncompress_input_buf_size,\n               size_t uncompress_output_buf_size, int num_copies = 1) {\n   Env* env = Env::Default();\n-  string data;\n-  string fname;\n+  std::string data;\n+  std::string fname;\n \n   TestTellWriteFile(compress_input_buf_size, compress_output_buf_size,\n                     uncompress_input_buf_size, uncompress_output_buf_size,\n                     num_copies, fname, data);\n \n-  tstring first_half(string(data, 0, data.size() / 2));\n+  tstring first_half(std::string(data, 0, data.size() / 2));\n   tstring bytes_read;\n   std::unique_ptr<RandomAccessFile> file_reader;\n   TF_CHECK_OK(env->NewRandomAccessFile(fname, &file_reader));\n@@ -265,14 +266,14 @@ void TestTellInputStream(size_t compress_input_buf_size,\n                          size_t uncompress_output_buf_size,\n                          int num_copies = 1) {\n   Env* env = Env::Default();\n-  string data;\n-  string fname;\n+  std::string data;\n+  std::string fname;\n \n   TestTellWriteFile(compress_input_buf_size, compress_output_buf_size,\n                     uncompress_input_buf_size, uncompress_output_buf_size,\n                     num_copies, fname, data);\n \n-  tstring first_half(string(data, 0, data.size() / 2));\n+  tstring first_half(std::string(data, 0, data.size() / 2));\n   tstring bytes_read;\n   std::unique_ptr<RandomAccessFile> file_reader;\n   TF_CHECK_OK(env->NewRandomAccessFile(fname, &file_reader));\n@@ -297,7 +298,7 @@ void TestTellInputStream(size_t compress_input_buf_size,\n }\n \n static bool SnappyCompressionSupported() {\n-  string out;\n+  std::string out;\n   absl::string_view in = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\";\n   return port::Snappy_Compress(in.data(), in.size(), &out);\n }"
        }
    ],
    "stats": {
        "total": 75,
        "additions": 38,
        "deletions": 37
    }
}