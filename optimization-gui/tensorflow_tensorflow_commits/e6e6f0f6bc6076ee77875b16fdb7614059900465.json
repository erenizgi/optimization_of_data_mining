{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 845669944",
    "sha": "e6e6f0f6bc6076ee77875b16fdb7614059900465",
    "files": [
        {
            "sha": "e8163ab7eb5616d0947c40d3bbb167df79e9bc1e",
            "filename": "third_party/xla/xla/tsl/platform/numa_hwloc.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fnuma_hwloc.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fnuma_hwloc.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fnuma_hwloc.cc?ref=e6e6f0f6bc6076ee77875b16fdb7614059900465",
            "patch": "@@ -162,7 +162,7 @@ void* NUMAMalloc(int node, size_t size, int minimum_alignment) {\n       LOG(ERROR) << \"Failed to find hwloc NUMA node \" << node;\n     }\n   }\n-  return ::tsl::port::AlignedMalloc(size, minimum_alignment);\n+  return AlignedMalloc(size, static_cast<std::align_val_t>(minimum_alignment));\n }\n \n void NUMAFree(void* ptr, size_t size) {"
        },
        {
            "sha": "2f50ad7504b260eb966e3edb5051a131ccf14f14",
            "filename": "third_party/xla/xla/tsl/platform/numa_noop.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fnuma_noop.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fnuma_noop.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fnuma_noop.cc?ref=e6e6f0f6bc6076ee77875b16fdb7614059900465",
            "patch": "@@ -30,7 +30,7 @@ void NUMASetThreadNodeAffinity(int node) {}\n int NUMAGetThreadNodeAffinity() { return kNUMANoAffinity; }\n \n void* NUMAMalloc(int node, size_t size, int minimum_alignment) {\n-  return ::tsl::port::AlignedMalloc(size, minimum_alignment);\n+  return AlignedMalloc(size, static_cast<std::align_val_t>(minimum_alignment));\n }\n \n void NUMAFree(void* ptr, size_t size) { ::tsl::port::Free(ptr); }"
        },
        {
            "sha": "892d5ed3fd7d6803d26f25936f02769c0b8c20bc",
            "filename": "third_party/xla/xla/tsl/platform/ram_file_system.h",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fram_file_system.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fram_file_system.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fram_file_system.h?ref=e6e6f0f6bc6076ee77875b16fdb7614059900465",
            "patch": "@@ -66,13 +66,13 @@ class RamRandomAccessFile : public RandomAccessFile, public WritableFile {\n     return absl::OkStatus();\n   }\n \n-  absl::Status Read(uint64 offset, size_t n, absl::string_view* result,\n+  absl::Status Read(uint64_t offset, size_t n, absl::string_view* result,\n                     char* scratch) const override {\n     if (offset >= data_->size()) {\n       return absl::OutOfRangeError(\"\");\n     }\n \n-    uint64 left = std::min(static_cast<uint64>(n), data_->size() - offset);\n+    uint64_t left = std::min(static_cast<uint64_t>(n), data_->size() - offset);\n     auto start = data_->begin() + offset;\n     auto end = data_->begin() + offset + left;\n \n@@ -305,7 +305,7 @@ class RamFileSystem : public FileSystem {\n   }\n \n   absl::Status GetFileSize(const std::string& fname_, TransactionToken* token,\n-                           uint64* file_size) override {\n+                           uint64_t* file_size) override {\n     absl::MutexLock m(mu_);\n     auto fname = StripRamFsPrefix(fname_);\n \n@@ -355,14 +355,14 @@ class RamFileSystem : public FileSystem {\n     return absl::StartsWith(s, prefix);\n   }\n \n-  string StripPrefix(std::string s, std::string prefix) {\n+  std::string StripPrefix(std::string s, std::string prefix) {\n     if (absl::StartsWith(s, prefix)) {\n       return s.erase(0, prefix.size());\n     }\n     return s;\n   }\n \n-  string StripRamFsPrefix(std::string name) {\n+  std::string StripRamFsPrefix(std::string name) {\n     std::string s = StripPrefix(name, \"ram://\");\n     if (*(s.rbegin()) == '/') {\n       s.pop_back();"
        },
        {
            "sha": "62764273e1108165a01d092c75b54deaaae10056",
            "filename": "third_party/xla/xla/tsl/platform/rocm_rocdl_path.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Frocm_rocdl_path.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Frocm_rocdl_path.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Frocm_rocdl_path.h?ref=e6e6f0f6bc6076ee77875b16fdb7614059900465",
            "patch": "@@ -22,10 +22,10 @@ namespace tsl {\n \n // Returns the root directory of the ROCM SDK, which contains sub-folders such\n // as bin, lib, and rocdl.\n-string RocmRoot();\n+std::string RocmRoot();\n \n // Returns the directory that contains ROCm-Device-Libs files in the ROCm SDK.\n-string RocdlRoot();\n+std::string RocdlRoot();\n \n }  // namespace tsl\n "
        },
        {
            "sha": "7e469216605715bee53f47c30eeb9e2329926d98",
            "filename": "third_party/xla/xla/tsl/platform/status.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus.cc?ref=e6e6f0f6bc6076ee77875b16fdb7614059900465",
            "patch": "@@ -322,7 +322,7 @@ absl::Status StatusGroup::as_concatenated_status() const {\n   }\n \n   if (!non_derived_.empty()) {\n-    std::vector<string> fmt;\n+    std::vector<std::string> fmt;\n     fmt.emplace_back(\"\\n=====================\");\n     for (const auto& s : non_derived_) {\n       fmt.emplace_back(MakeString(s));"
        },
        {
            "sha": "317b17da239575e14046fa03363c2724ce3380ce",
            "filename": "third_party/xla/xla/tsl/platform/subprocess.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fsubprocess.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fsubprocess.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fsubprocess.h?ref=e6e6f0f6bc6076ee77875b16fdb7614059900465",
            "patch": "@@ -52,7 +52,8 @@ class SubProcess;\n // launched with the given command-line arguments `argv`. The process\n // must be explicitly started by calling the Start() method on the\n // returned object.\n-std::unique_ptr<SubProcess> CreateSubProcess(const std::vector<string>& argv);\n+std::unique_ptr<SubProcess> CreateSubProcess(\n+    const std::vector<std::string>& argv);\n \n }  // namespace tsl\n "
        },
        {
            "sha": "0c5f9e99097a611ad9430f0b4a1f06a1b23ed5cf",
            "filename": "third_party/xla/xla/tsl/platform/subprocess_test.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 14,
            "changes": 27,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fsubprocess_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fsubprocess_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fsubprocess_test.cc?ref=e6e6f0f6bc6076ee77875b16fdb7614059900465",
            "patch": "@@ -36,26 +36,25 @@ limitations under the License.\n namespace tsl {\n namespace {\n \n-\n-string EchoProgram() {\n+std::string EchoProgram() {\n   std::string path = io::JoinPath(testing::XlaSrcRoot(), \"tsl\", \"platform\",\n                                   \"testdata\", \"test_echo\");\n   return tsl::io::AppendDotExeIfWindows(path);\n }\n \n-string EchoArgv1Program() {\n+std::string EchoArgv1Program() {\n   std::string path = io::JoinPath(testing::XlaSrcRoot(), \"tsl\", \"platform\",\n                                   \"testdata\", \"test_echo_argv_1\");\n   return tsl::io::AppendDotExeIfWindows(path);\n }\n \n-string NoopProgram() {\n+std::string NoopProgram() {\n   std::string path = io::JoinPath(testing::XlaSrcRoot(), \"tsl\", \"platform\",\n                                   \"testdata\", \"test_noop\");\n   return tsl::io::AppendDotExeIfWindows(path);\n }\n \n-string StdErrProgram() {\n+std::string StdErrProgram() {\n   std::string path = io::JoinPath(testing::XlaSrcRoot(), \"tsl\", \"platform\",\n                                   \"testdata\", \"test_stderr\");\n   return tsl::io::AppendDotExeIfWindows(path);\n@@ -77,7 +76,7 @@ TEST_F(SubProcessTest, NoOutput) {\n   proc.SetChannelAction(CHAN_STDERR, ACTION_PIPE);\n   EXPECT_TRUE(proc.Start());\n \n-  string out, err;\n+  std::string out, err;\n   int status = proc.Communicate(nullptr, &out, &err);\n   EXPECT_TRUE(WIFEXITED(status));\n   EXPECT_EQ(0, WEXITSTATUS(status));\n@@ -94,7 +93,7 @@ TEST_F(SubProcessTest, Stdout) {\n   proc.SetChannelAction(CHAN_STDERR, ACTION_PIPE);\n   EXPECT_TRUE(proc.Start());\n \n-  string out, err;\n+  std::string out, err;\n   int status = proc.Communicate(nullptr, &out, &err);\n   EXPECT_TRUE(WIFEXITED(status));\n   EXPECT_EQ(0, WEXITSTATUS(status));\n@@ -124,7 +123,7 @@ TEST_F(SubProcessTest, Stderr) {\n   proc.SetChannelAction(CHAN_STDERR, ACTION_PIPE);\n   EXPECT_TRUE(proc.Start());\n \n-  string out, err;\n+  std::string out, err;\n   int status = proc.Communicate(nullptr, &out, &err);\n   EXPECT_TRUE(WIFEXITED(status));\n   EXPECT_NE(0, WEXITSTATUS(status));\n@@ -151,7 +150,7 @@ TEST_F(SubProcessTest, Stdin) {\n   proc.SetChannelAction(CHAN_STDIN, ACTION_PIPE);\n   EXPECT_TRUE(proc.Start());\n \n-  string in = \"foobar\\nbarfoo\\nhaha\\n\";\n+  std::string in = \"foobar\\nbarfoo\\nhaha\\n\";\n   int status = proc.Communicate(&in, nullptr, nullptr);\n   EXPECT_TRUE(WIFEXITED(status));\n   EXPECT_EQ(0, WEXITSTATUS(status));\n@@ -164,8 +163,8 @@ TEST_F(SubProcessTest, StdinStdout) {\n   proc.SetChannelAction(CHAN_STDOUT, ACTION_PIPE);\n   EXPECT_TRUE(proc.Start());\n \n-  string in = \"foobar\\nbarfoo\\nhaha\\n\";\n-  string out;\n+  std::string in = \"foobar\\nbarfoo\\nhaha\\n\";\n+  std::string out;\n   int status = proc.Communicate(&in, &out, nullptr);\n   EXPECT_TRUE(WIFEXITED(status));\n   EXPECT_EQ(0, WEXITSTATUS(status));\n@@ -182,7 +181,7 @@ TEST_F(SubProcessTest, StdinChildExit) {\n \n   // Verify that the parent handles the child exiting immediately as the\n   // parent is trying to write a large string to the child's stdin.\n-  string in;\n+  std::string in;\n   in.reserve(1000000);\n   for (int i = 0; i < 100000; i++) {\n     in += \"hello xyz\\n\";\n@@ -202,13 +201,13 @@ TEST_F(SubProcessTest, StdinStdoutOverlap) {\n \n   // Verify that the parent handles multiplexed reading/writing to the child\n   // process.  The string is large enough to exceed the buffering of the pipes.\n-  string in;\n+  std::string in;\n   in.reserve(1000000);\n   for (int i = 0; i < 100000; i++) {\n     in += \"hello xyz\\n\";\n   }\n \n-  string out;\n+  std::string out;\n   int status = proc.Communicate(&in, &out, nullptr);\n   EXPECT_TRUE(WIFEXITED(status));\n   EXPECT_EQ(0, WEXITSTATUS(status));"
        },
        {
            "sha": "9d05c94a1cb816f4b80fda08b825cb3ba63e8509",
            "filename": "third_party/xla/xla/tsl/platform/threadpool.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fthreadpool.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6e6f0f6bc6076ee77875b16fdb7614059900465/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fthreadpool.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fthreadpool.cc?ref=e6e6f0f6bc6076ee77875b16fdb7614059900465",
            "patch": "@@ -60,13 +60,13 @@ struct EigenEnvironment {\n   struct TaskImpl {\n     std::function<void()> fn;\n     Context context;\n-    uint64 trace_id;\n+    uint64_t trace_id;\n   };\n \n   struct Task {\n     Task() = default;\n \n-    Task(std::function<void()> fn, Context context, uint64 trace_id)\n+    Task(std::function<void()> fn, Context context, uint64_t trace_id)\n         : f(TaskImpl{std::move(fn), std::move(context), trace_id}) {}\n \n     Task(Task&&) = default;\n@@ -97,7 +97,7 @@ struct EigenEnvironment {\n   }\n \n   Task CreateTask(std::function<void()> f) {\n-    uint64 id = 0;\n+    uint64_t id = 0;\n     if (ABSL_PREDICT_FALSE(tracing::EventCollector::IsEnabled())) {\n       id = tracing::GetUniqueArg();\n       tracing::RecordEvent(tracing::EventCategory::kScheduleClosure, id);"
        }
    ],
    "stats": {
        "total": 56,
        "additions": 28,
        "deletions": 28
    }
}