{
    "author": "WillFroom",
    "message": "[XLA:CPU] Allow memref result type in LoadOp.\n\nPiperOrigin-RevId: 810932969",
    "sha": "acb1cb358b8b6757035a346ec0fb9d675405b2b8",
    "files": [
        {
            "sha": "091610cff37c2804c45fff9518472ae20cbc1719",
            "filename": "third_party/xla/xla/backends/cpu/codegen/emitters/ir/tests/ops.mlir",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/acb1cb358b8b6757035a346ec0fb9d675405b2b8/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Femitters%2Fir%2Ftests%2Fops.mlir",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/acb1cb358b8b6757035a346ec0fb9d675405b2b8/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Femitters%2Fir%2Ftests%2Fops.mlir",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Femitters%2Fir%2Ftests%2Fops.mlir?ref=acb1cb358b8b6757035a346ec0fb9d675405b2b8",
            "patch": "@@ -12,3 +12,16 @@ func.func @load(%arg0: !xla_cpu.call_frame) -> tensor<32x32xf32> {\n // CHECK:   return %[[LOAD]] : tensor<32x32xf32>\n // CHECK: }\n \n+// -----\n+\n+func.func @load(%arg0: !xla_cpu.call_frame) -> memref<64x32xf32> {\n+  %0 = xla_cpu.load %arg0, 0 : memref<64x32xf32>\n+  return %0 : memref<64x32xf32>\n+}\n+\n+// CHECK-LABEL: @load(\n+// CHECK:   %[[ARG0:.+]]: !xla_cpu.call_frame\n+// CHECK: ) -> memref<64x32xf32> {\n+// CHECK:   %[[LOAD:.+]] = xla_cpu.load %[[ARG0]], 0 : memref<64x32xf32>\n+// CHECK:   return %[[LOAD]] : memref<64x32xf32>\n+// CHECK: }"
        },
        {
            "sha": "2fc82eab1ff032f535c135168c4693e209b82654",
            "filename": "third_party/xla/xla/backends/cpu/codegen/emitters/ir/xla_cpu_ops.td",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/acb1cb358b8b6757035a346ec0fb9d675405b2b8/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Femitters%2Fir%2Fxla_cpu_ops.td",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/acb1cb358b8b6757035a346ec0fb9d675405b2b8/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Femitters%2Fir%2Fxla_cpu_ops.td",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Femitters%2Fir%2Fxla_cpu_ops.td?ref=acb1cb358b8b6757035a346ec0fb9d675405b2b8",
            "patch": "@@ -24,6 +24,8 @@ class XLACPU_Op<string mnemonic, list<Trait> traits = []> :\n       Op<XlaCpuDialect, mnemonic, traits> {\n }\n \n+def TensorOrMemRef : AnyTypeOf<[AnyMemRef, AnyRankedTensor]>;\n+\n //===----------------------------------------------------------------------===//\n // !xla_cpu.load\n //===----------------------------------------------------------------------===//\n@@ -42,7 +44,7 @@ def XLACPU_LoadOp : XLACPU_Op<\"load\"> {\n   let arguments = (ins XLACPU_CallFrame:$call_frame,\n                        I32Attr:$index);\n \n-  let results = (outs AnyStaticShapeTensor:$result);\n+  let results = (outs TensorOrMemRef:$result);\n \n   let assemblyFormat = [{\n     $call_frame `,` $index attr-dict `:` type($result)"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 16,
        "deletions": 1
    }
}