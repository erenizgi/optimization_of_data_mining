{
    "author": "AspirinSJL",
    "message": "Sort filenames to ensure deterministic test results\n\nPiperOrigin-RevId: 818972925",
    "sha": "e6d8b55686ea82eba4b7adf105668bdccbdea112",
    "files": [
        {
            "sha": "9eccd5d40dc131fa12a7531b3168eb5d3122787e",
            "filename": "tensorflow/core/tfrt/utils/debug/node_io_dump_rewriter_test.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e6d8b55686ea82eba4b7adf105668bdccbdea112/tensorflow%2Fcore%2Ftfrt%2Futils%2Fdebug%2Fnode_io_dump_rewriter_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e6d8b55686ea82eba4b7adf105668bdccbdea112/tensorflow%2Fcore%2Ftfrt%2Futils%2Fdebug%2Fnode_io_dump_rewriter_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftfrt%2Futils%2Fdebug%2Fnode_io_dump_rewriter_test.cc?ref=e6d8b55686ea82eba4b7adf105668bdccbdea112",
            "patch": "@@ -16,6 +16,7 @@ limitations under the License.\n \n #include <dirent.h>\n \n+#include <algorithm>\n #include <cstddef>\n #include <cstdint>\n #include <cstring>\n@@ -117,6 +118,7 @@ absl::StatusOr<std::vector<std::string>> GetFilenames(\n     filenames.push_back(entry->d_name);\n   }\n   closedir(dir);\n+  std::sort(filenames.begin(), filenames.end());\n   return filenames;\n }\n \n@@ -183,9 +185,9 @@ TEST(NodeIoDumpRewriterTest, OnSavedModelV1) {\n   // Check the dump files.\n   ASSERT_OK_AND_ASSIGN(auto filenames, GetFilenames(dump_dir));\n   ASSERT_EQ(filenames.size(), 3);\n-  EXPECT_TRUE(absl::StartsWith(filenames[0], \"Add:out:0_\"));\n-  EXPECT_TRUE(absl::StartsWith(filenames[1], \"Add:in:0_\"));\n-  EXPECT_TRUE(absl::StartsWith(filenames[2], \"Add:in:1_\"));\n+  EXPECT_TRUE(absl::StartsWith(filenames[0], \"Add:in:0_\"));\n+  EXPECT_TRUE(absl::StartsWith(filenames[1], \"Add:in:1_\"));\n+  EXPECT_TRUE(absl::StartsWith(filenames[2], \"Add:out:0_\"));\n }\n \n TEST(NodeIoDumpRewriterTest, OnSavedModelV2) {\n@@ -222,9 +224,9 @@ TEST(NodeIoDumpRewriterTest, OnSavedModelV2) {\n   // Check the dump files.\n   ASSERT_OK_AND_ASSIGN(auto filenames, GetFilenames(dump_dir));\n   ASSERT_EQ(filenames.size(), 3);\n-  EXPECT_TRUE(absl::StartsWith(filenames[0], \"result:out:0_\"));\n+  EXPECT_TRUE(absl::StartsWith(filenames[0], \"result:in:0_\"));\n   EXPECT_TRUE(absl::StartsWith(filenames[1], \"result:in:1_\"));\n-  EXPECT_TRUE(absl::StartsWith(filenames[2], \"result:in:0_\"));\n+  EXPECT_TRUE(absl::StartsWith(filenames[2], \"result:out:0_\"));\n }\n \n }  // namespace"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 7,
        "deletions": 5
    }
}