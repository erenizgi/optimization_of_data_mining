{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 829981479",
    "sha": "059bac7fc990d945f0b6608a0b3ed6d78415eeec",
    "files": [
        {
            "sha": "90bfc1c70b623abc7d6d5fc96c13fa6ab70111eb",
            "filename": "third_party/xla/xla/tsl/framework/allocator_registry.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_registry.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_registry.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_registry.cc?ref=059bac7fc990d945f0b6608a0b3ed6d78415eeec",
            "patch": "@@ -30,7 +30,8 @@ AllocatorFactoryRegistry* AllocatorFactoryRegistry::singleton() {\n }\n \n const AllocatorFactoryRegistry::FactoryEntry*\n-AllocatorFactoryRegistry::FindEntry(const string& name, int priority) const {\n+AllocatorFactoryRegistry::FindEntry(const std::string& name,\n+                                    int priority) const {\n   for (auto& entry : factories_) {\n     if (!name.compare(entry.name) && priority == entry.priority) {\n       return &entry;\n@@ -40,8 +41,8 @@ AllocatorFactoryRegistry::FindEntry(const string& name, int priority) const {\n }\n \n void AllocatorFactoryRegistry::Register(const char* source_file,\n-                                        int source_line, const string& name,\n-                                        int priority,\n+                                        int source_line,\n+                                        const std::string& name, int priority,\n                                         AllocatorFactory* factory) {\n   absl::MutexLock l(mu_);\n   CHECK(!first_alloc_made_) << \"Attempt to register an AllocatorFactory \""
        },
        {
            "sha": "a293ce63254bbbe58406487f07969f3f470e2136",
            "filename": "third_party/xla/xla/tsl/framework/allocator_registry.h",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_registry.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_registry.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_registry.h?ref=059bac7fc990d945f0b6608a0b3ed6d78415eeec",
            "patch": "@@ -71,8 +71,9 @@ class AllocatorFactoryRegistry {\n   AllocatorFactoryRegistry() {}\n   ~AllocatorFactoryRegistry() {}\n \n-  void Register(const char* source_file, int source_line, const string& name,\n-                int priority, AllocatorFactory* factory);\n+  void Register(const char* source_file, int source_line,\n+                const std::string& name, int priority,\n+                AllocatorFactory* factory);\n \n   // Returns 'best fit' Allocator.  Find the factory with the highest priority\n   // and return an allocator constructed by it.  If multiple factories have\n@@ -109,7 +110,7 @@ class AllocatorFactoryRegistry {\n   struct FactoryEntry {\n     const char* source_file;\n     int source_line;\n-    string name;\n+    std::string name;\n     int priority;\n     std::unique_ptr<AllocatorFactory> factory;\n     std::unique_ptr<Allocator> allocator;\n@@ -121,7 +122,7 @@ class AllocatorFactoryRegistry {\n \n   // Returns any FactoryEntry registered under 'name' and 'priority',\n   // or 'nullptr' if none found.\n-  const FactoryEntry* FindEntry(const string& name, int priority) const\n+  const FactoryEntry* FindEntry(const std::string& name, int priority) const\n       ABSL_EXCLUSIVE_LOCKS_REQUIRED(mu_);\n \n   AllocatorFactoryRegistry(const AllocatorFactoryRegistry&) = delete;\n@@ -130,8 +131,9 @@ class AllocatorFactoryRegistry {\n \n class AllocatorFactoryRegistration {\n  public:\n-  AllocatorFactoryRegistration(const char* file, int line, const string& name,\n-                               int priority, AllocatorFactory* factory) {\n+  AllocatorFactoryRegistration(const char* file, int line,\n+                               const std::string& name, int priority,\n+                               AllocatorFactory* factory) {\n     AllocatorFactoryRegistry::singleton()->Register(file, line, name, priority,\n                                                     factory);\n   }"
        },
        {
            "sha": "268a2841b07ff42a843fa8571f3fda86fc4c47b2",
            "filename": "third_party/xla/xla/tsl/framework/allocator_retry.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_retry.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_retry.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fallocator_retry.cc?ref=059bac7fc990d945f0b6608a0b3ed6d78415eeec",
            "patch": "@@ -38,14 +38,14 @@ class ScopedTimeTracker {\n   }\n   ~ScopedTimeTracker() {\n     if (start_us_) {\n-      uint64 end_us = env_->NowMicros();\n+      uint64_t end_us = env_->NowMicros();\n       metrics::UpdateBfcAllocatorDelayTime(end_us - *start_us_);\n     }\n   }\n \n  private:\n   Env* env_;\n-  std::optional<uint64> start_us_;\n+  std::optional<uint64_t> start_us_;\n };\n }  // namespace\n "
        },
        {
            "sha": "adb3834b5b0e47546243973c718547eededbd47a",
            "filename": "third_party/xla/xla/tsl/framework/cpu_allocator_impl.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcpu_allocator_impl.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcpu_allocator_impl.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcpu_allocator_impl.cc?ref=059bac7fc990d945f0b6608a0b3ed6d78415eeec",
            "patch": "@@ -75,7 +75,7 @@ class CPUAllocator : public Allocator {\n \n   ~CPUAllocator() override = default;\n \n-  string Name() override { return \"cpu\"; }\n+  std::string Name() override { return \"cpu\"; }\n \n   void* AllocateRaw(size_t alignment, size_t num_bytes) override {\n     if (num_bytes > static_cast<size_t>(LargeAllocationWarningBytes()) &&\n@@ -147,7 +147,7 @@ class CPUAllocator : public Allocator {\n                              {\"peak_bytes_in_use\", stats_.peak_bytes_in_use},\n                              {\"requested_bytes\", req_bytes},\n                              {\"allocation_bytes\", alloc_bytes},\n-                             {\"addr\", reinterpret_cast<uint64>(chunk_ptr)},\n+                             {\"addr\", reinterpret_cast<uint64_t>(chunk_ptr)},\n                              {\"tf_op\", annotation.pending_op_name},\n                              {\"id\", annotation.pending_step_id},\n                              {\"region_type\", annotation.pending_region_type},"
        },
        {
            "sha": "e1e5f806b923b4c3062f35f4ffb4744de60c4498",
            "filename": "third_party/xla/xla/tsl/framework/device_id_manager.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_manager.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/059bac7fc990d945f0b6608a0b3ed6d78415eeec/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_manager.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_manager.cc?ref=059bac7fc990d945f0b6608a0b3ed6d78415eeec",
            "patch": "@@ -106,7 +106,7 @@ class TfToPlatformDeviceIdMap {\n   }\n \n   // Map from physical device id to platform device id.\n-  using IdMapType = std::unordered_map<int32, int32>;\n+  using IdMapType = std::unordered_map<int32_t, int32_t>;\n   // Map from DeviceType to IdMapType.\n   // We use std::string instead of DeviceType because the key should\n   // be default-initializable."
        }
    ],
    "stats": {
        "total": 31,
        "additions": 17,
        "deletions": 14
    }
}