{
    "author": "ezhulenev",
    "message": "[xla:cpu] Mark collective thunks as `ExecutesOnExternalThreadPool`\n\nWe don't want to resume XLA:CPU execution on the IO thread.\n\nPiperOrigin-RevId: 799280435",
    "sha": "e65442de8c095a0a16bd1fa91772fdacc13d512c",
    "files": [
        {
            "sha": "1818ad9ab1cee0a1061bd8362710a76287e90dee",
            "filename": "third_party/xla/xla/backends/cpu/runtime/collective_thunk.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e65442de8c095a0a16bd1fa91772fdacc13d512c/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fcollective_thunk.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e65442de8c095a0a16bd1fa91772fdacc13d512c/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fcollective_thunk.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fcollective_thunk.h?ref=e65442de8c095a0a16bd1fa91772fdacc13d512c",
            "patch": "@@ -133,6 +133,10 @@ class CollectiveThunk : public Thunk {\n \n   const Shape& destination_shape(int64_t index) const;\n \n+  // Collective operations are typically completed asynchronously on the IO\n+  // thread pool, owned by the underlying collective implementation.\n+  bool ExecutesOnExternalThreadPool() const final { return true; }\n+\n  private:\n   OpParams op_params_;\n   OpBuffers op_buffers_;"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}