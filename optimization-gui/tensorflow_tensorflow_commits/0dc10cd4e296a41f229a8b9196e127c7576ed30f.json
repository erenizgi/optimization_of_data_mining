{
    "author": "serach24",
    "message": "PR #34917: Turn on the scatter determinism expander by default\n\nImported from GitHub PR https://github.com/openxla/xla/pull/34917\n\nüìù Summary of Changes\nEnable xla_gpu_enable_scatter_determinism_expander flag by default (change from false to true).\nüéØ Justification\nThe scatter determinism expander provides significant performance improvements for deterministic scatter operations (up to 9000x speedup for certain input sizes compared to the sequential while-loop approach).\nWith recent fixes for batched scatter support and proper handling of scatter_dims_to_operand_dims, the pass is now robust enough to be enabled by default.\nUsers who experience issues can still disable it with --xla_gpu_enable_scatter_determinism_expander=false.\nüöÄ Kind of Contribution\n‚ö°Ô∏è Performance Improvement\nüß™ Unit Tests\nAll existing scatter tests pass with the flag enabled by default:\n//xla/service:scatter_determinism_expander_test\n//xla/tests:scatter_test\nCopybara import of the project:\n\n--\n0bb296398991b3de5a4d15f45fd4e80f52880852 by Chenhao Jiang <chenhaoj@nvidia.com>:\n\nTurn on the scatter determinism expander by default\n\nMerging this change closes #34917\n\nPiperOrigin-RevId: 841697954",
    "sha": "0dc10cd4e296a41f229a8b9196e127c7576ed30f",
    "files": [
        {
            "sha": "fe8c14f18dbd8ceefe8f6d207a0851d984163a22",
            "filename": "third_party/xla/xla/debug_options_flags.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0dc10cd4e296a41f229a8b9196e127c7576ed30f/third_party%2Fxla%2Fxla%2Fdebug_options_flags.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0dc10cd4e296a41f229a8b9196e127c7576ed30f/third_party%2Fxla%2Fxla%2Fdebug_options_flags.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fdebug_options_flags.cc?ref=0dc10cd4e296a41f229a8b9196e127c7576ed30f",
            "patch": "@@ -441,7 +441,7 @@ DebugOptions DefaultDebugOptionsIgnoringFlags() {\n   opts.set_xla_enable_fast_math(false);\n   opts.set_xla_gpu_experimental_parallel_collective_overlap_limit(1);\n   opts.set_xla_pjrt_allow_auto_layout_in_hlo(false);\n-  opts.set_xla_gpu_enable_scatter_determinism_expander(false);\n+  opts.set_xla_gpu_enable_scatter_determinism_expander(true);\n   opts.set_xla_gpu_unsupported_enable_ragged_all_to_all_decomposer(false);\n   opts.set_xla_gpu_unsupported_use_all_reduce_one_shot_kernel(false);\n   opts.set_xla_gpu_unsupported_use_ragged_all_to_all_one_shot_kernel(true);"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}