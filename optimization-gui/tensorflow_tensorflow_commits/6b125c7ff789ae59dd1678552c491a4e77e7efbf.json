{
    "author": "nvgrw",
    "message": "Remove the Google-internal recordphase feature due to lack of use & utility.\n\nReverts changelist 769271048\n\nPiperOrigin-RevId: 843424305",
    "sha": "6b125c7ff789ae59dd1678552c491a4e77e7efbf",
    "files": [
        {
            "sha": "cc094e447e7d8fbad9651311bbcde89ed602732b",
            "filename": "third_party/xla/xla/tsl/platform/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6b125c7ff789ae59dd1678552c491a4e77e7efbf/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6b125c7ff789ae59dd1678552c491a4e77e7efbf/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD?ref=6b125c7ff789ae59dd1678552c491a4e77e7efbf",
            "patch": "@@ -46,7 +46,6 @@ exports_files(\n         \"env.cc\",\n         \"ram_file_system.h\",\n         \"grpc_credentials.h\",\n-        \"recordphase.h\",\n         \"resource.h\",\n         \"rocm_rocdl_path.h\",\n         \"resource_loader.h\",\n@@ -133,7 +132,6 @@ filegroup(\n         \"file_system_helper.h\",\n         \"prefetch.h\",\n         \"ram_file_system.h\",\n-        \"recordphase.h\",\n         \"resource.h\",\n         \"stack_frame.h\",\n         \"statusor.h\",\n@@ -906,12 +904,6 @@ tsl_cc_test(\n     ],\n )\n \n-cc_library(\n-    name = \"recordphase\",\n-    textual_hdrs = [\"recordphase.h\"],\n-    deps = tf_platform_deps(\"recordphase\") + [\"@com_google_absl//absl/strings:string_view\"],\n-)\n-\n cc_library(\n     name = \"debug_me_context\",\n     hdrs = [\"debug_me_context.h\"],"
        },
        {
            "sha": "699c941b26c651c6706fcc0c6680536d0ad415a4",
            "filename": "third_party/xla/xla/tsl/platform/default/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6b125c7ff789ae59dd1678552c491a4e77e7efbf/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6b125c7ff789ae59dd1678552c491a4e77e7efbf/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD?ref=6b125c7ff789ae59dd1678552c491a4e77e7efbf",
            "patch": "@@ -670,17 +670,3 @@ exports_files(\n         \"//tensorflow/core/platform:__pkg__\",\n     ]),\n )\n-\n-cc_library(\n-    name = \"recordphase\",\n-    srcs = [\"recordphase.cc\"],\n-    hdrs = [\"//xla/tsl/platform:recordphase.h\"],\n-    tags = [\n-        \"manual\",\n-        \"no_oss\",\n-        \"nobuilder\",\n-    ],\n-    deps = [\n-        \"@com_google_absl//absl/strings:string_view\",\n-    ],\n-)"
        },
        {
            "sha": "fb823690d0581f19ef8c908cc439111f4a8931a9",
            "filename": "third_party/xla/xla/tsl/platform/default/recordphase.cc",
            "status": "removed",
            "additions": 0,
            "deletions": 34,
            "changes": 34,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce5fd34ac6c50e52e59e3d6c32301fcadc8c89f6/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Frecordphase.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce5fd34ac6c50e52e59e3d6c32301fcadc8c89f6/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Frecordphase.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Frecordphase.cc?ref=ce5fd34ac6c50e52e59e3d6c32301fcadc8c89f6",
            "patch": "@@ -1,34 +0,0 @@\n-/* Copyright 2025 The OpenXLA Authors.\n-\n-Licensed under the Apache License, Version 2.0 (the \"License\");\n-you may not use this file except in compliance with the License.\n-You may obtain a copy of the License at\n-\n-    http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing, software\n-distributed under the License is distributed on an \"AS IS\" BASIS,\n-WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-See the License for the specific language governing permissions and\n-limitations under the License.\n-==============================================================================*/\n-\n-#include \"xla/tsl/platform/recordphase.h\"\n-\n-#include <string>\n-#include <vector>\n-\n-#include \"absl/strings/string_view.h\"\n-\n-namespace tsl::recordphase {\n-void StartPhase(const absl::string_view phase_name,\n-                const std::vector<absl::string_view>& dependencies) {}\n-\n-std::string StartPhaseUnique(\n-    absl::string_view phase_name,\n-    const std::vector<absl::string_view>& dependencies) {\n-  return std::string(phase_name);\n-}\n-\n-void EndPhase(const absl::string_view phase_name) {}\n-}  // namespace tsl::recordphase"
        },
        {
            "sha": "23bf927136525a88de225aa06756ecaf51e02f73",
            "filename": "third_party/xla/xla/tsl/platform/recordphase.h",
            "status": "removed",
            "additions": 0,
            "deletions": 99,
            "changes": 99,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce5fd34ac6c50e52e59e3d6c32301fcadc8c89f6/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Frecordphase.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce5fd34ac6c50e52e59e3d6c32301fcadc8c89f6/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Frecordphase.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Frecordphase.h?ref=ce5fd34ac6c50e52e59e3d6c32301fcadc8c89f6",
            "patch": "@@ -1,99 +0,0 @@\n-/* Copyright 2025 The TensorFlow Authors. All Rights Reserved.\n-\n-Licensed under the Apache License, Version 2.0 (the \"License\");\n-you may not use this file except in compliance with the License.\n-You may obtain a copy of the License at\n-\n-    http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing, software\n-distributed under the License is distributed on an \"AS IS\" BASIS,\n-WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-See the License for the specific language governing permissions and\n-limitations under the License.\n-==============================================================================*/\n-\n-// Client library for recording action subphase timing metrics.\n-//\n-// This is **different** to the TSL profiler TraceMe functionality.\n-//\n-// Currently the public implementation of this library is a stub that does\n-// nothing. There is an implementation internally at Google.\n-//\n-// This library is used to record the start and end of a subphase in an action.\n-// A subphase is a named section of work that happens within an action.\n-//\n-// Example:\n-//   // Start a phase named \"parse_action\".\n-//   StartPhase(\"parse_action\");\n-//   // Do some work.\n-//   // ...\n-//   // End the phase.\n-//   EndPhase(\"parse_action\");\n-//   // Start another phase named \"link_executable\" which depends on\n-//   // (always starts after) \"parse_action\".\n-//   StartPhase(\"link_executable\", {\"parse_action\"});\n-//   // Do some work.\n-//   // ...\n-//   // End the phase.\n-//   EndPhase(\"link_executable\");\n-//\n-// The StartPhase and EndPhase methods are thread-safe.\n-//\n-// The LoadPhase and LoadAllPhases methods can be used in\n-// unit tests to verify the recorded phase timing information.\n-\n-#ifndef XLA_TSL_PLATFORM_RECORDPHASE_H_\n-#define XLA_TSL_PLATFORM_RECORDPHASE_H_\n-\n-#include <string>\n-#include <utility>\n-#include <vector>\n-\n-#include \"absl/strings/string_view.h\"\n-\n-namespace tsl::recordphase {\n-// Records the start of a phase.\n-// * phase_name: the name of the phase, must be unique within the namespace.\n-// * dependencies: the phases that must complete before this phase can start.\n-// phase_name and dependencies must contain only alphanumeric characters,\n-// dashes and underscores.\n-// If a phase has already started, or a dependency does not exist,\n-// or if there are illegal characters in the phase name or its dependencies,\n-// the method will log an error and fail silently.\n-void StartPhase(absl::string_view phase_name,\n-                const std::vector<absl::string_view>& dependencies = {});\n-\n-// This is like StartPhase, but it generates a unique phase name (which it uses\n-// to invoke StartPhase) and returns it.\n-std::string StartPhaseUnique(\n-    absl::string_view phase_name,\n-    const std::vector<absl::string_view>& dependencies = {});\n-\n-// Records the end of a phase. The phase must have been started before.\n-void EndPhase(absl::string_view phase_name);\n-\n-// Simple RAII wrapper around StartPhase and EndPhase. Does not perform any\n-// additional checking.\n-class RecordScoped {\n- public:\n-  explicit RecordScoped(const absl::string_view phase_name,\n-                        bool use_unique_phase_name = false,\n-                        const std::vector<absl::string_view>& dependencies = {})\n-      : phase_name_(phase_name) {\n-    if (!use_unique_phase_name) {\n-      StartPhase(phase_name_, dependencies);\n-    } else {\n-      phase_name_ = StartPhaseUnique(phase_name, dependencies);\n-    }\n-  }\n-  ~RecordScoped() { EndPhase(phase_name_); }\n-\n-  absl::string_view phase_name() const { return phase_name_; }\n-\n- private:\n-  std::string phase_name_;\n-};\n-}  // namespace tsl::recordphase\n-\n-#endif  // XLA_TSL_PLATFORM_RECORDPHASE_H_"
        }
    ],
    "stats": {
        "total": 155,
        "additions": 0,
        "deletions": 155
    }
}