{
    "author": "junwhanahn",
    "message": "Make `is_sdy_partitioned` warning less verbose\n\n`Operation::emitWarning()` by default attaches the entire op (module in this case) as a note, which is rarely useful for this particular warning.\n\nPiperOrigin-RevId: 845479681",
    "sha": "1b7be6132ce305b8d5bd8c5f5613c2c0a00aa959",
    "files": [
        {
            "sha": "063423317fbbfe7286815025be26630084b08660",
            "filename": "third_party/xla/xla/python/ifrt/ir/transforms/ifrt_lower_atom_program_metadata_to_xla_pass.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1b7be6132ce305b8d5bd8c5f5613c2c0a00aa959/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fir%2Ftransforms%2Fifrt_lower_atom_program_metadata_to_xla_pass.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1b7be6132ce305b8d5bd8c5f5613c2c0a00aa959/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fir%2Ftransforms%2Fifrt_lower_atom_program_metadata_to_xla_pass.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fir%2Ftransforms%2Fifrt_lower_atom_program_metadata_to_xla_pass.cc?ref=1b7be6132ce305b8d5bd8c5f5613c2c0a00aa959",
            "patch": "@@ -22,6 +22,7 @@ limitations under the License.\n #include \"mlir/IR/Builders.h\"\n #include \"mlir/IR/BuiltinAttributes.h\"\n #include \"mlir/IR/BuiltinOps.h\"\n+#include \"mlir/IR/Diagnostics.h\"\n #include \"mlir/IR/Visitors.h\"\n #include \"mlir/Pass/Pass.h\"\n #include \"xla/hlo/ir/hlo_sharding.h\"\n@@ -94,7 +95,7 @@ void IfrtLowerAtomProgramMetadataToXlaPass::runOnOperation() {\n   // after 6 month bwd compatibility window.\n   bool is_sdy = module_op->hasAttr(kIsSdyPartitioned);\n   if (is_sdy) {\n-    module_op.emitWarning()\n+    mlir::emitWarning(module_op->getLoc())\n         << \"`\" << kIsSdyPartitioned\n         << \"` attribute is deprecated and will be removed. See b/433244129.\"\n            \" Please use `compile_options_override` to specify sharding.\";"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}