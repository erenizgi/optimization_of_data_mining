{
    "author": "tensorflower-gardener",
    "message": "Merge pull request #99364 from aravindhbalaji1985:FixForCuda12.9.1Compilation\n\nPiperOrigin-RevId: 806321900",
    "sha": "e50c8eb3795972dbb6b0dc570bd61daeedc1fade",
    "files": [
        {
            "sha": "cb603ba7c6c840ab9f9349f59829b7869671cf17",
            "filename": "tensorflow/core/kernels/dynamic_partition_op_gpu.cu.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e50c8eb3795972dbb6b0dc570bd61daeedc1fade/tensorflow%2Fcore%2Fkernels%2Fdynamic_partition_op_gpu.cu.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e50c8eb3795972dbb6b0dc570bd61daeedc1fade/tensorflow%2Fcore%2Fkernels%2Fdynamic_partition_op_gpu.cu.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdynamic_partition_op_gpu.cu.cc?ref=e50c8eb3795972dbb6b0dc570bd61daeedc1fade",
            "patch": "@@ -410,7 +410,11 @@ class DynamicPartitionOpGPU : public AsyncOpKernel {\n                                             num_partitions_);\n \n #if GOOGLE_CUDA\n+#if THRUST_VERSION >= 200802\n+    thrust::constant_iterator<int32> values_in(1);\n+#else\n     cub::ConstantInputIterator<int32> values_in(1);\n+#endif\n #elif TENSORFLOW_USE_ROCM\n     using ConstantInputIterator =\n         ::rocprim::constant_iterator<int32, ptrdiff_t>;"
        },
        {
            "sha": "cd635812de6fc86e331a3219b9045907cb5e277b",
            "filename": "tensorflow/core/kernels/gpu_prim.h",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e50c8eb3795972dbb6b0dc570bd61daeedc1fade/tensorflow%2Fcore%2Fkernels%2Fgpu_prim.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e50c8eb3795972dbb6b0dc570bd61daeedc1fade/tensorflow%2Fcore%2Fkernels%2Fgpu_prim.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fgpu_prim.h?ref=e50c8eb3795972dbb6b0dc570bd61daeedc1fade",
            "patch": "@@ -37,9 +37,9 @@ namespace gpuprim = ::cub;\n \n // Required for sorting Eigen::half and bfloat16.\n namespace cub {\n-template <>\n-__device__ __forceinline__ void ThreadStoreVolatilePtr<Eigen::half>(\n-    Eigen::half *ptr, Eigen::half val, Int2Type<true> /*is_primitive*/) {\n+\n+__device__ __forceinline__ void ThreadStoreVolatilePtr(\n+    Eigen::half* ptr, Eigen::half val, Int2Type<true> /*is_primitive*/) {\n   *reinterpret_cast<volatile uint16_t *>(ptr) =\n       Eigen::numext::bit_cast<uint16_t>(val);\n }\n@@ -50,9 +50,8 @@ __device__ __forceinline__ Eigen::half ThreadLoadVolatilePointer(\n   return Eigen::numext::bit_cast<Eigen::half>(result);\n }\n \n-template <>\n-__device__ __forceinline__ void ThreadStoreVolatilePtr<Eigen::bfloat16>(\n-    Eigen::bfloat16 *ptr, Eigen::bfloat16 val,\n+__device__ __forceinline__ void ThreadStoreVolatilePtr(\n+    Eigen::bfloat16* ptr, Eigen::bfloat16 val,\n     Int2Type<true> /*is_primitive*/) {\n   *reinterpret_cast<volatile uint16_t *>(ptr) =\n       Eigen::numext::bit_cast<uint16_t>(val);"
        },
        {
            "sha": "949e183b466a26d230f325949266b30abd7c0bc3",
            "filename": "tensorflow/core/kernels/where_op_gpu.cu.h",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e50c8eb3795972dbb6b0dc570bd61daeedc1fade/tensorflow%2Fcore%2Fkernels%2Fwhere_op_gpu.cu.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e50c8eb3795972dbb6b0dc570bd61daeedc1fade/tensorflow%2Fcore%2Fkernels%2Fwhere_op_gpu.cu.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fwhere_op_gpu.cu.h?ref=e50c8eb3795972dbb6b0dc570bd61daeedc1fade",
            "patch": "@@ -233,6 +233,16 @@ class WhereOutputIterator {\n     return *(ptr_ + (valid ? (NDIM * n) : 0));\n   }\n \n+  EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE reference operator*() const {\n+    // Dereference the current pointer\n+    return *ptr_;\n+  }\n+\n+  EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE self_type\n+  operator+(std::ptrdiff_t n) const {\n+    return self_type(ptr_ + NDIM * n, max_row_);\n+  }\n+\n  private:\n   int64* ptr_;\n   const Eigen::DenseIndex max_row_;"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 19,
        "deletions": 6
    }
}