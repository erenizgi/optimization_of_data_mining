{
    "author": "apivovarov",
    "message": "Remove unused deprecated tsl::testing usages in tsl\n\nNew namespace is absl_testing::\n\nPiperOrigin-RevId: 836767062",
    "sha": "6310355b62c0fb0dd2ff71399050591870cb731c",
    "files": [
        {
            "sha": "5417fc80c473bddbe37ed6345943066ebb2a3a1c",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/coordination/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -238,9 +238,6 @@ tsl_cc_test(\n     ]),  # no status matchers in OSS.\n     deps = [\n         \":key_value_store\",\n-        \"//xla/tsl/lib/core:status_test_util\",\n-        \"//xla/tsl/platform:status\",\n-        \"//xla/tsl/platform:status_matchers\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n@@ -302,6 +299,7 @@ tsl_cc_test(\n         \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc_impl\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/status:status_matchers\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:string_view\","
        },
        {
            "sha": "b78a62726800bbefcb1a618ea77bb5427470ddf6",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/coordination/client_server_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fclient_server_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fclient_server_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fclient_server_test.cc?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -13,7 +13,6 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n-#include <algorithm>\n #include <cassert>\n #include <functional>\n #include <memory>\n@@ -23,6 +22,7 @@ limitations under the License.\n \n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/status/status_matchers.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/string_view.h\"\n@@ -60,7 +60,6 @@ using ::testing::ElementsAre;\n using ::testing::HasSubstr;\n using ::testing::IsEmpty;\n using ::testing::UnorderedElementsAre;\n-using ::tsl::testing::StatusIs;\n \n constexpr absl::Duration kBarrierTimeout = absl::Milliseconds(200);\n constexpr absl::Duration kHeartbeatTimeout = absl::Seconds(3);"
        },
        {
            "sha": "2fc36535349818936e59c101006866767b8f1f64",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/coordination/coordination_service_agent_test.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fcoordination_service_agent_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fcoordination_service_agent_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fcoordination_service_agent_test.cc?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -51,8 +51,6 @@ using ::testing::Return;\n using ::testing::SetArgPointee;\n using ::testing::UnorderedPointwise;\n using ::testing::WithArgs;\n-using ::tsl::testing::IsOkAndHolds;\n-using ::tsl::testing::StatusIs;\n \n MATCHER(KvEq, \"simple KeyValueEntry matcher\") {\n   const KeyValueEntry& kv0 = std::get<0>(arg);"
        },
        {
            "sha": "088372415e8e11661a6df195c6ea9b1f29d480c3",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/coordination/key_value_store_test.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fkey_value_store_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fkey_value_store_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fkey_value_store_test.cc?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -24,9 +24,6 @@ limitations under the License.\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/string_view.h\"\n #include \"absl/types/span.h\"\n-#include \"xla/tsl/lib/core/status_test_util.h\"\n-#include \"xla/tsl/platform/status.h\"\n-#include \"xla/tsl/platform/status_matchers.h\"\n #include \"xla/tsl/platform/test.h\"\n \n namespace tsl {"
        },
        {
            "sha": "000fda20a8265d1febdb6d4dc59d0ef785523dac",
            "filename": "third_party/xla/xla/tsl/framework/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -465,10 +465,12 @@ tsl_cc_test(\n     deps = [\n         \":device_id_impl\",\n         \":device_id_utils\",\n+        \":device_type\",\n         \"//xla/tsl/lib/core:status_test_util\",\n-        \"//xla/tsl/platform:status_matchers\",\n-        \"//xla/tsl/protobuf:error_codes_proto_impl_cc\",\n+        \"//xla/tsl/platform:status\",\n+        \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/util:device_name_utils\",\n+        \"@com_google_absl//absl/status:status_matchers\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest_main\",\n     ],"
        },
        {
            "sha": "ce6efc75bbf076d4476c0bf37796a6b23f6990f9",
            "filename": "third_party/xla/xla/tsl/framework/device_id_utils_test.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_utils_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_utils_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_utils_test.cc?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -14,19 +14,26 @@ limitations under the License.\n ==============================================================================*/\n #include \"xla/tsl/framework/device_id_utils.h\"\n \n+#include <cstddef>\n+#include <string>\n #include <vector>\n \n+#include <gmock/gmock.h>\n+#include <gtest/gtest.h>\n+#include \"absl/status/status_matchers.h\"\n #include \"absl/strings/string_view.h\"\n+#include \"xla/tsl/framework/device_id.h\"\n #include \"xla/tsl/framework/device_id_manager.h\"\n+#include \"xla/tsl/framework/device_type.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n-#include \"xla/tsl/platform/status_matchers.h\"\n+#include \"xla/tsl/platform/status.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/util/device_name_utils.h\"\n \n namespace tsl {\n namespace {\n \n using ::testing::HasSubstr;\n-using ::tsl::testing::StatusIs;\n \n constexpr absl::string_view kTestDeviceType = \"CPU\";\n "
        },
        {
            "sha": "c29efb69d966991416096e2446846a3619210de6",
            "filename": "third_party/xla/xla/tsl/platform/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -579,14 +579,15 @@ tsl_cc_test(\n         \":errors\",\n         \":stack_frame\",\n         \":status\",\n-        \":status_matchers\",\n         \":status_to_from_proto\",\n         \":test\",\n         \"//xla/tsl/protobuf:error_codes_proto_impl_cc\",\n         \"//xla/tsl/protobuf:status_proto_cc\",\n         \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/status:status_matchers\",\n         \"@com_google_absl//absl/strings:cord\",\n         \"@com_google_absl//absl/strings:str_format\",\n+        \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest_main\",\n     ],\n )"
        },
        {
            "sha": "ae13105f571006ebded4d16397d09fa1a9897d32",
            "filename": "third_party/xla/xla/tsl/platform/status_matchers.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus_matchers.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus_matchers.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus_matchers.h?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -27,7 +27,7 @@ limitations under the License.\n // This matcher matches a StatusOr<T> value whose status is OK and whose inner\n // value matches matcher m. Example:\n //\n-//   using ::tsl::testing::IsOkAndHolds;\n+//   using absl_testing::IsOkAndHolds;\n //   using ::testing::HasSubstr;\n //   ...\n //   StatusOr<std::string> status_or_message(\"Hello, world\");"
        },
        {
            "sha": "6cfd7bb12ba7903994162604abc6212bc029348b",
            "filename": "third_party/xla/xla/tsl/platform/status_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fstatus_test.cc?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -12,16 +12,18 @@ limitations under the License.\n ==============================================================================*/\n #include \"xla/tsl/platform/status.h\"\n \n+#include <cstddef>\n #include <string>\n #include <unordered_map>\n #include <vector>\n \n #include \"absl/status/status.h\"\n+#include \"absl/status/status_matchers.h\"\n #include \"absl/strings/cord.h\"\n #include \"absl/strings/str_format.h\"\n+#include \"absl/strings/string_view.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/stack_frame.h\"\n-#include \"xla/tsl/platform/status_matchers.h\"\n #include \"xla/tsl/platform/status_to_from_proto.h\"\n #include \"xla/tsl/platform/test.h\"\n #include \"xla/tsl/protobuf/error_codes.pb.h\"\n@@ -33,8 +35,6 @@ namespace {\n using ::testing::ElementsAre;\n using ::testing::IsEmpty;\n using ::testing::Pair;\n-using ::tsl::testing::IsOk;\n-using ::tsl::testing::StatusIs;\n \n TEST(ToStringTest, PayloadsArePrinted) {\n   absl::Status status = errors::Aborted(\"Aborted Error Message\");"
        },
        {
            "sha": "515df03de66ac2a75948314d9691dceb4da3d2bc",
            "filename": "third_party/xla/xla/tsl/testing/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Ftesting%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6310355b62c0fb0dd2ff71399050591870cb731c/third_party%2Fxla%2Fxla%2Ftsl%2Ftesting%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Ftesting%2FBUILD?ref=6310355b62c0fb0dd2ff71399050591870cb731c",
            "patch": "@@ -21,7 +21,6 @@ cc_library(\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n-        \"@com_google_absl//absl/utility\",\n         \"@com_google_googletest//:gtest_for_library\",\n         \"@local_tsl//tsl/platform:path\",\n     ],\n@@ -35,7 +34,6 @@ tsl_cc_test(\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:file_statistics\",\n-        \"//xla/tsl/platform:status_matchers\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:status_matchers\","
        }
    ],
    "stats": {
        "total": 42,
        "additions": 21,
        "deletions": 21
    }
}