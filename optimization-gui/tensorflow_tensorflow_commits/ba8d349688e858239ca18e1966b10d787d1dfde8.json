{
    "author": "chsigg",
    "message": "Remove `nvptx_backend` dependency from `fusion_emitter`.\n\nThis dependency is not needed but in the way for ROCm builds because it requires CUDA headers.\n\nPiperOrigin-RevId: 810561869",
    "sha": "ba8d349688e858239ca18e1966b10d787d1dfde8",
    "files": [
        {
            "sha": "b95659143e58102b7408967c43eebf4385635c10",
            "filename": "third_party/xla/xla/backends/gpu/codegen/triton/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ba8d349688e858239ca18e1966b10d787d1dfde8/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ba8d349688e858239ca18e1966b10d787d1dfde8/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD?ref=ba8d349688e858239ca18e1966b10d787d1dfde8",
            "patch": "@@ -263,7 +263,6 @@ cc_library(\n         \"//xla/service/gpu:ir_emission_utils\",\n         \"//xla/service/gpu:launch_dimensions\",\n         \"//xla/service/gpu/llvm_gpu_backend:amdgpu_backend\",\n-        \"//xla/service/gpu/llvm_gpu_backend:nvptx_backend\",\n         \"//xla/service/gpu/llvm_gpu_backend:nvptx_libdevice_path\",\n         \"//xla/service/gpu:matmul_utils\",\n         \"//xla/service/gpu:triton_fusion_analysis\","
        },
        {
            "sha": "c857d357ef25f53b814b09c8876a5d3c2fb3f77c",
            "filename": "third_party/xla/xla/service/gpu/llvm_gpu_backend/BUILD",
            "status": "modified",
            "additions": 10,
            "deletions": 30,
            "changes": 40,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ba8d349688e858239ca18e1966b10d787d1dfde8/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ba8d349688e858239ca18e1966b10d787d1dfde8/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD?ref=ba8d349688e858239ca18e1966b10d787d1dfde8",
            "patch": "@@ -15,19 +15,13 @@ package(\n \n package_group(\n     name = \"friends\",\n-    includes = [\n-        \"//xla:friends\",\n-    ],\n+    includes = [\"//xla:friends\"],\n )\n \n cc_library(\n     name = \"llvm_gpu_backend\",\n-    srcs = [\n-        \"gpu_backend_lib.cc\",\n-    ],\n-    hdrs = [\n-        \"gpu_backend_lib.h\",\n-    ],\n+    srcs = [\"gpu_backend_lib.cc\"],\n+    hdrs = [\"gpu_backend_lib.h\"],\n     deps = [\n         \":load_ir_module\",\n         \":utils\",\n@@ -68,12 +62,8 @@ cc_library(\n \n cc_library(\n     name = \"ptx_version_util\",\n-    srcs = [\n-        \"ptx_version_util.cc\",\n-    ],\n-    hdrs = [\n-        \"ptx_version_util.h\",\n-    ],\n+    srcs = [\"ptx_version_util.cc\"],\n+    hdrs = [\"ptx_version_util.h\"],\n     deps = [\n         \"//xla/stream_executor:semantic_version\",\n         \"@com_google_absl//absl/status:statusor\",\n@@ -82,12 +72,8 @@ cc_library(\n \n cc_library(\n     name = \"nvptx_backend\",\n-    srcs = [\n-        \"nvptx_backend.cc\",\n-    ],\n-    hdrs = [\n-        \"nvptx_backend.h\",\n-    ],\n+    srcs = [\"nvptx_backend.cc\"],\n+    hdrs = [\"nvptx_backend.h\"],\n     tags = [\n         \"cuda-only\",\n         \"gpu\",\n@@ -136,12 +122,8 @@ cc_library(\n \n cc_library(\n     name = \"amdgpu_backend\",\n-    srcs = [\n-        \"amdgpu_backend.cc\",\n-    ],\n-    hdrs = [\n-        \"amdgpu_backend.h\",\n-    ],\n+    srcs = [\"amdgpu_backend.cc\"],\n+    hdrs = [\"amdgpu_backend.h\"],\n     local_defines = if_oss([\"HAS_SUPPORT_FOR_LLD_AS_A_LIBRARY=1\"]),\n     deps = [\n         \":llvm_gpu_backend\",\n@@ -254,9 +236,7 @@ xla_cc_test(\n     name = \"load_ir_module_test\",\n     size = \"small\",\n     srcs = [\"load_ir_module_test.cc\"],\n-    data = [\n-        \"tests_data/saxpy.ll\",\n-    ],\n+    data = [\"tests_data/saxpy.ll\"],\n     deps = [\n         \":load_ir_module\",\n         \"//xla/tests:xla_internal_test_main\","
        }
    ],
    "stats": {
        "total": 41,
        "additions": 10,
        "deletions": 31
    }
}