{
    "author": "derdrdirk",
    "message": "[Autotuner] Initialize random input values for buffer checks. If values are initialized to 0 buffer checker will fail to detect backends with wrong results.\n\nPiperOrigin-RevId: 847627821",
    "sha": "b1d25385411365db38891bd8bb0fb42fdf02c994",
    "files": [
        {
            "sha": "d053517780f9516e6778874713b491245731cc81",
            "filename": "third_party/xla/xla/service/gpu/autotuning/autotuner_pass.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b1d25385411365db38891bd8bb0fb42fdf02c994/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fautotuning%2Fautotuner_pass.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b1d25385411365db38891bd8bb0fb42fdf02c994/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fautotuning%2Fautotuner_pass.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fautotuning%2Fautotuner_pass.cc?ref=b1d25385411365db38891bd8bb0fb42fdf02c994",
            "patch": "@@ -80,10 +80,12 @@ AutotuneConfig GetAutotuneConfig(const DebugOptions& debug_options,\n   return autotune_config;\n }\n \n-ProfileOptions GetProfileOptions(const DebugOptions& debug_options) {\n+ProfileOptions GetProfileOptions(const DebugOptions& debug_options,\n+                                 const AutotuneConfig& autotune_config) {\n   ProfileOptions profile_options;\n   profile_options.redzone_padding_bytes =\n       debug_options.xla_gpu_redzone_padding_bytes();\n+  profile_options.should_init_buffers = autotune_config.check_buffers;\n   return profile_options;\n }\n \n@@ -103,8 +105,9 @@ absl::StatusOr<std::unique_ptr<AutotunerPass>> AutotunerPass::Create(\n       GetAutotuneConfig(debug_options, is_deviceless, optimize_scratch_bytes);\n \n   if (!is_deviceless) {\n-    profiler = GpuProfiler::Create(stream_executor,\n-                                   GetProfileOptions(debug_options), allocator);\n+    profiler = GpuProfiler::Create(\n+        stream_executor, GetProfileOptions(debug_options, autotune_config),\n+        allocator);\n   }\n \n   std::unique_ptr<AutotunerCacheInterface> cache ="
        }
    ],
    "stats": {
        "total": 9,
        "additions": 6,
        "deletions": 3
    }
}