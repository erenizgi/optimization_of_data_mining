{
    "author": "beckerhe",
    "message": "[XLA:GPU] Exclude Intel targets from internal wildcard build\n\nWe can't easily depend on SYCL, so for now let's disable all SYCL specific targets in the internal build.\n\nPiperOrigin-RevId: 828414906",
    "sha": "cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87",
    "files": [
        {
            "sha": "557bd5f3dd62fab15127864d621bae6db5fe8388",
            "filename": "third_party/xla/xla/service/gpu/BUILD",
            "status": "modified",
            "additions": 18,
            "deletions": 3,
            "changes": 21,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD?ref=cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87",
            "patch": "@@ -3339,7 +3339,12 @@ cc_library(\n     tags = [\n         \"gpu\",\n         \"oneapi-only\",\n-    ],\n+    ] + if_google([\n+        # TODO(b/456585142): Currently we don't support building the SYCL backend.\n+        \"notap\",\n+        \"nobuilder\",\n+        \"manual\",\n+    ]),\n     deps = [\n         \":intel_gpu_compiler_impl\",\n         \"//xla/service:compiler\",\n@@ -3359,7 +3364,12 @@ cc_library(\n     tags = [\n         \"gpu\",\n         \"oneapi-only\",\n-    ],\n+    ] + if_google([\n+        # TODO(b/456585142): Currently we don't support building the SYCL backend.\n+        \"notap\",\n+        \"nobuilder\",\n+        \"manual\",\n+    ]),\n     deps = [\n         \":gpu_compiler\",\n         \":target_constants\",\n@@ -3381,7 +3391,12 @@ xla_test(\n     tags = [\n         \"gpu\",\n         \"oneapi-only\",\n-    ],\n+    ] + if_google([\n+        # TODO(b/456585142): Currently we don't support building the SYCL backend.\n+        \"notap\",\n+        \"nobuilder\",\n+        \"manual\",\n+    ]),\n     deps = [\n         \":intel_gpu_compiler\",\n         \"//xla/tests:hlo_test_base\","
        },
        {
            "sha": "26a04585330adff3eb9d526d4e5391a1c7a1f17d",
            "filename": "third_party/xla/xla/service/gpu/llvm_gpu_backend/BUILD",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD?ref=cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87",
            "patch": "@@ -357,7 +357,12 @@ cc_library(\n     tags = [\n         \"gpu\",\n         \"oneapi-only\",\n-    ],\n+    ] + if_google([\n+        # TODO(b/456585142): Currently we don't support building the SYCL backend.\n+        \"notap\",\n+        \"nobuilder\",\n+        \"manual\",\n+    ]),\n     deps = [\n         \":llvm_gpu_backend\",\n         \"//xla/service/llvm_ir:llvm_command_line_options\","
        },
        {
            "sha": "29bd61e880e1c166872bd99cb6c329f9682cb616",
            "filename": "third_party/xla/xla/stream_executor/sycl/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87/third_party%2Fxla%2Fxla%2Fstream_executor%2Fsycl%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87/third_party%2Fxla%2Fxla%2Fstream_executor%2Fsycl%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fsycl%2FBUILD?ref=cf7fdfeee6a53345e3cf53d138e0a3de84fb7e87",
            "patch": "@@ -12,7 +12,7 @@ load(\n     \"stream_executor_friends\",\n )\n load(\"//xla/tests:build_defs.bzl\", \"xla_test\")\n-load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\", \"tsl_copts\")\n+load(\"//xla/tsl:tsl.bzl\", \"if_oss\", \"internal_visibility\", \"tsl_copts\")\n load(\"//xla/tsl/platform:build_config_root.bzl\", \"if_static\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n@@ -82,7 +82,7 @@ cc_library(\n \n cc_library(\n     name = \"sycl_rpath\",\n-    linkopts = [\"-Wl,-rpath,../local_config_sycl/sycl/sycl/lib\"],\n+    linkopts = if_oss([\"-Wl,-rpath,../local_config_sycl/sycl/sycl/lib\"]),\n )\n \n cc_library(\n@@ -130,11 +130,7 @@ cc_library(\n     name = \"sycl_solver_context\",\n     srcs = [\"sycl_solver_context.cc\"],\n     hdrs = [\"sycl_solver_context.h\"],\n-    tags = [\n-        \"gpu\",\n-        \"manual\",\n-        \"oneapi-only\",\n-    ],\n+    tags = [\"gpu\"],\n     deps = [\n         \":sycl_platform_id\",\n         \"//xla:xla_data_proto_cc\","
        }
    ],
    "stats": {
        "total": 38,
        "additions": 27,
        "deletions": 11
    }
}