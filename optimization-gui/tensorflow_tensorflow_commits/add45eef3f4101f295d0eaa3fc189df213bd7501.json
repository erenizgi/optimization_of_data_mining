{
    "author": "chhe7",
    "message": "  Adds DebugIdentityOp to TensorFlow TD file.\n\nPiperOrigin-RevId: 811885223",
    "sha": "add45eef3f4101f295d0eaa3fc189df213bd7501",
    "files": [
        {
            "sha": "94438dac1e76c6e77dd17ee3723204b1e354575a",
            "filename": "tensorflow/compiler/mlir/tensorflow/ir/tf_generated_ops.td",
            "status": "modified",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/add45eef3f4101f295d0eaa3fc189df213bd7501/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Fir%2Ftf_generated_ops.td",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/add45eef3f4101f295d0eaa3fc189df213bd7501/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Fir%2Ftf_generated_ops.td",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Fir%2Ftf_generated_ops.td?ref=add45eef3f4101f295d0eaa3fc189df213bd7501",
            "patch": "@@ -3477,6 +3477,31 @@ With `src_format` of `NHWC`, `dst_format` of `NCHW`, and input:\n   }];\n }\n \n+def TF_DebugIdentityOp : TF_Op<\"DebugIdentity\", [Pure, TF_SameOperandsAndResultTypeResolveRef]> {\n+  let summary = [{\n+Provides an identity mapping of the non-Ref type input tensor for debugging.\n+  }];\n+\n+  let description = [{\n+Provides an identity mapping of the non-Ref type input tensor for debugging.\n+  }];\n+\n+  let arguments = (ins\n+    Arg<TF_Tensor, [{Input tensor, non-Reference type}]>:$input,\n+\n+    DefaultValuedOptionalAttr<StrAttr, \"\\\"\\\"\">:$device_name,\n+    DefaultValuedOptionalAttr<StrAttr, \"\\\"\\\"\">:$tensor_name,\n+    DefaultValuedOptionalAttr<StrArrayAttr, \"{}\">:$debug_urls,\n+    DefaultValuedOptionalAttr<BoolAttr, \"false\">:$gated_grpc\n+  );\n+\n+  let results = (outs\n+    TF_Tensor:$output\n+  );\n+\n+  TF_DerivedOperandTypeAttr T = TF_DerivedOperandTypeAttr<0>;\n+}\n+\n def TF_DebugIdentityV2Op : TF_Op<\"DebugIdentityV2\", []> {\n   let summary = \"Debug Identity V2 Op.\";\n "
        },
        {
            "sha": "ee65668078ca59faba98fc20a2bad9f1ee04b97c",
            "filename": "tensorflow/compiler/mlir/tensorflow/ir/tf_ops_a_m.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/add45eef3f4101f295d0eaa3fc189df213bd7501/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Fir%2Ftf_ops_a_m.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/add45eef3f4101f295d0eaa3fc189df213bd7501/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Fir%2Ftf_ops_a_m.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Fir%2Ftf_ops_a_m.cc?ref=add45eef3f4101f295d0eaa3fc189df213bd7501",
            "patch": "@@ -118,6 +118,7 @@ INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(CoshOp);\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(CrossOp);\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(DataFormatDimMapOp);\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(DataFormatVecPermuteOp);\n+INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(DebugIdentityOp);\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(DigammaOp);\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(EluOp);\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(EluGradOp);"
        },
        {
            "sha": "765ed1171a8449da7677bd9916adc247cb156b09",
            "filename": "tensorflow/compiler/mlir/tensorflow/tests/tf-ops.mlir",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/add45eef3f4101f295d0eaa3fc189df213bd7501/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftests%2Ftf-ops.mlir",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/add45eef3f4101f295d0eaa3fc189df213bd7501/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftests%2Ftf-ops.mlir",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftests%2Ftf-ops.mlir?ref=add45eef3f4101f295d0eaa3fc189df213bd7501",
            "patch": "@@ -5259,3 +5259,8 @@ func.func @testGeneratorDataset(%arg0: tensor<4xf32>,\n               tensor<2xf32>) -> tensor<!tf_type.variant>\n   return %0 : tensor<!tf_type.variant>\n }\n+\n+func.func @testDebugIdentity(%arg0: tensor<i32>) -> tensor<i32> {\n+  %0 = \"tf.DebugIdentity\"(%arg0) {debug_urls = [\"file:///tmp/foo\"], device_name = \"CPU\", tensor_name = \"test_tensor\"} : (tensor<i32>) -> tensor<i32>\n+  func.return %0 : tensor<i32>\n+}"
        },
        {
            "sha": "7d00bc417169791d78e772fe04dec8cfde1f60b6",
            "filename": "tensorflow/compiler/mlir/tf2xla/transforms/legalization_op_config_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/add45eef3f4101f295d0eaa3fc189df213bd7501/tensorflow%2Fcompiler%2Fmlir%2Ftf2xla%2Ftransforms%2Flegalization_op_config_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/add45eef3f4101f295d0eaa3fc189df213bd7501/tensorflow%2Fcompiler%2Fmlir%2Ftf2xla%2Ftransforms%2Flegalization_op_config_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Ftf2xla%2Ftransforms%2Flegalization_op_config_test.cc?ref=add45eef3f4101f295d0eaa3fc189df213bd7501",
            "patch": "@@ -84,7 +84,7 @@ TEST(LegalizationOpConfigTest, CountLoweringsSet) {\n   // a new op, we should expect these to change too.\n   EXPECT_EQ(mlir_lowering_count, 67);\n   EXPECT_EQ(tf2xla_fallback_count, 333);\n-  EXPECT_EQ(non_categorized_count, 433);\n+  EXPECT_EQ(non_categorized_count, 434);\n }\n \n // Just a counter test to see which ops have duplicate lowerings. This isn't a"
        }
    ],
    "stats": {
        "total": 33,
        "additions": 32,
        "deletions": 1
    }
}