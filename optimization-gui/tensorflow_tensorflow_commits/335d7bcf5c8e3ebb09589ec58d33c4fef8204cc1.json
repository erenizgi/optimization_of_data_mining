{
    "author": "loislo",
    "message": "[XLA:GPU] Fix usages of deprecated tsl::errors::FailedPrecondition in xla\n\nThis change replaces usages of tsl::errors::FailedPrecondition with absl::FailedPreconditionError,\nwrapping arguments in absl::StrCat where necessary. This addresses deprecation\nwarnings and moves towards standard Abseil error handling.\n\nThe deprecated tsl::errors::FailedPrecondition function was identified in third_party/tensorflow/compiler/xla/tsl/platform/errors.h.\n\nChanges:\n- Replaced errors::FailedPrecondition with absl::FailedPreconditionError.\n- Used absl::StrCat to construct error messages where necessary.\nPiperOrigin-RevId: 838085866",
    "sha": "335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
    "files": [
        {
            "sha": "44b25a36caaa9b11074939cced6485b33baf59d6",
            "filename": "third_party/xla/xla/backends/profiler/gpu/device_tracer_cuda.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fdevice_tracer_cuda.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fdevice_tracer_cuda.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fdevice_tracer_cuda.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -165,7 +165,7 @@ absl::Status GpuTracer::CollectData(XSpace* space) {\n       VLOG(1) << \"No trace data collected, session wasn't started\";\n       return absl::OkStatus();\n     case State::kStartedOk:\n-      return tsl::errors::FailedPrecondition(\n+      return absl::FailedPreconditionError(\n           \"Cannot collect trace before stopping\");\n     case State::kStartedError:\n       LOG(ERROR) << \"Cannot collect, profiler failed to start\";"
        },
        {
            "sha": "0f0de2f590b6f9ae9778c92230ae58af598a0c7f",
            "filename": "third_party/xla/xla/backends/profiler/gpu/device_tracer_rocm.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fdevice_tracer_rocm.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fdevice_tracer_rocm.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fdevice_tracer_rocm.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -23,7 +23,6 @@ limitations under the License.\n #include \"xla/backends/profiler/gpu/rocm_tracer.h\"\n #include \"xla/backends/profiler/gpu/rocm_tracer_utils.h\"\n #include \"xla/tsl/platform/env_time.h\"\n-#include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/profiler/backends/cpu/annotation_stack.h\"\n #include \"tsl/profiler/lib/profiler_factory.h\"\n #include \"tsl/profiler/lib/profiler_interface.h\"\n@@ -132,7 +131,7 @@ absl::Status GpuTracer::CollectData(XSpace* space) {\n       VLOG(3) << \"No trace data collected, session wasn't started\";\n       return absl::OkStatus();\n     case State::kStartedOk:\n-      return tsl::errors::FailedPrecondition(\n+      return absl::FailedPreconditionError(\n           \"Cannot collect trace before stopping\");\n     case State::kStartedError:\n       LOG(ERROR) << \"Cannot collect, roctracer failed to start\";"
        },
        {
            "sha": "4984b158bfb8ca5ba9d4b3d1f4e0cd1654b8244f",
            "filename": "third_party/xla/xla/hlo/evaluator/hlo_evaluator.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -1173,20 +1173,20 @@ absl::Status HloEvaluator::EvaluateParameterFromCallerArgument(\n   // If the parent computation has multiple callers, we cannot determine from\n   // which caller the arguments are passed.\n   if (computation_callers.size() != 1) {\n-    return tsl::errors::FailedPrecondition(\n-        \"The computation \", parent_computation->name(), \" is called by \",\n-        computation_callers.size(),\n-        \" callers and thus its argument value \"\n-        \"cannot be determined statically.\");\n+    return absl::FailedPreconditionError(\n+        absl::StrCat(\"The computation \", parent_computation->name(),\n+                     \" is called by \", computation_callers.size(),\n+                     \" callers and thus its argument value \"\n+                     \"cannot be determined statically.\"));\n   }\n   const HloInstruction* computation_caller = computation_callers[0];\n   const HloInstruction* caller_operand = computation_caller->operand(0);\n   if (computation_caller->opcode() != HloOpcode::kWhile &&\n       computation_caller->opcode() != HloOpcode::kCall) {\n-    return tsl::errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(absl::StrCat(\n         \"The computation \", parent_computation->name(), \" is called by \",\n         \"instruction \", computation_caller->name(),\n-        \", which is not yet supported.\");\n+        \", which is not yet supported.\"));\n   }\n   if (computation_caller->opcode() == HloOpcode::kWhile) {\n     if (!analyses.tuple_points_to && !tuple_points_to_analysis_cache_) {\n@@ -1433,7 +1433,7 @@ absl::Status HloEvaluator::HandleSetDimensionSize(\n absl::Status HloEvaluator::HandleParameter(const HloInstruction* parameter) {\n   if (!IsAlreadyEvaluated(parameter, visitor_shape_index_)) {\n     if (!enable_partial_evaluation_) {\n-      return tsl::errors::FailedPrecondition(\n+      return absl::FailedPreconditionError(\n           \"Failed to evaluate instruction since its operands are unknown \"\n           \"or undetermined and partial evaluation is not enabled.\");\n     }\n@@ -1467,7 +1467,7 @@ absl::Status HloEvaluator::HandleParameter(const HloInstruction* parameter) {\n \n absl::Status HloEvaluator::HandleInfeed(const HloInstruction* infeed) {\n   if (!enable_partial_evaluation_) {\n-    return tsl::errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(\n         \"Failed to evaluate instruction since its operands are unknown \"\n         \"or undetermined and partial evaluation is not enabled.\");\n   }"
        },
        {
            "sha": "73b41cbb134557bacd0ae8478fffc297df4e0c03",
            "filename": "third_party/xla/xla/hlo/ir/hlo_module.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -1038,8 +1038,7 @@ absl::StatusOr<HloModuleConfig> HloModule::CreateModuleConfigFromProto(\n     const HloModuleProto& module, const DebugOptions& debug_options,\n     const ExecutionOptions* execution_options) {\n   if (!module.has_host_program_shape()) {\n-    return tsl::errors::FailedPrecondition(\n-        \"No program shape found in the proto\");\n+    return absl::FailedPreconditionError(\"No program shape found in the proto\");\n   }\n   TF_ASSIGN_OR_RETURN(ProgramShape program_shape,\n                       ProgramShape::FromProto(module.host_program_shape()));"
        },
        {
            "sha": "86cfdf24e2e1c711269c94c42f9c31aa6f4fc091",
            "filename": "third_party/xla/xla/service/gpu/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -1335,6 +1335,7 @@ xla_cc_test(\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:status_matchers\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\","
        },
        {
            "sha": "9028a5c57355eb15140627b257ff48e63ddfa23a",
            "filename": "third_party/xla/xla/service/gpu/cudnn_support_utils_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fcudnn_support_utils_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fcudnn_support_utils_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fcudnn_support_utils_test.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -25,6 +25,7 @@ limitations under the License.\n #include <gtest/gtest.h>\n #include \"absl/algorithm/container.h\"\n #include \"absl/log/log.h\"\n+#include \"absl/status/status.h\"\n #include \"absl/status/status_matchers.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/string_view.h\"\n@@ -57,15 +58,15 @@ class CudnnSupportUtilsTest : public HloHardwareIndependentTestBase {\n         if (inst->IsCustomCall(target)) {\n           VLOG(1) << inst->ToString();\n           if (call != nullptr) {\n-            return tsl::errors::FailedPrecondition(\n+            return absl::FailedPreconditionError(\n                 \"Found more than one custom call.\");\n           }\n           call = Cast<HloCustomCallInstruction>(inst);\n         }\n       }\n     }\n     if (call == nullptr) {\n-      return tsl::errors::FailedPrecondition(\n+      return absl::FailedPreconditionError(\n           \"Did not find any matching custom call.\");\n     }\n     return call;"
        },
        {
            "sha": "b0f45dd513d73d84f5322520578e2e88b4762035",
            "filename": "third_party/xla/xla/tsl/platform/cloud/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -400,14 +400,12 @@ tsl_cc_test(\n         \":ram_file_block_cache\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n+        \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n         \"@com_google_googletest//:gtest_main\",\n-        \"@local_tsl//tsl/platform:blocking_counter\",\n-        \"@local_tsl//tsl/platform:notification\",\n     ],\n )\n "
        },
        {
            "sha": "a68494ac1774ad3769da9e00c74863f99ed53654",
            "filename": "third_party/xla/xla/tsl/platform/cloud/curl_http_request.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -531,7 +531,7 @@ absl::Status CurlHttpRequest::Send() {\n     case 307:  // Temporary Redirect\n     case 412:  // Precondition Failed\n     case 413:  // Payload Too Large\n-      result = errors::FailedPrecondition(get_error_message());\n+      result = absl::FailedPreconditionError(get_error_message());\n       break;\n \n     // UNAVAILABLE indicates a problem that can go away if the request\n@@ -664,14 +664,14 @@ absl::Status CurlHttpRequest::CURLcodeToStatus(CURLcode code,\n     if (get_response_result == CURLE_OK && response_code == 416) {\n       return absl::OkStatus();\n     }\n-    return errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(\n         absl::StrCat(error_message, overflow_message));\n   }\n   // Domain resolution errors and certificate problems aren't going to improve\n   // on retry, so we return a FailedPrecondition (as the caller must take action\n   // before this can succeed).\n   if (code == CURLE_COULDNT_RESOLVE_HOST || code == CURLE_SSL_CACERT_BADFILE) {\n-    return errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(\n         absl::StrCat(error_message, error_buffer));\n   }\n   // Return Unavailable to retry by default. There may be other permanent"
        },
        {
            "sha": "3287d0f42bee842470b1904ff7c1d7030b4e1804",
            "filename": "third_party/xla/xla/tsl/platform/cloud/gcs_file_system.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -700,7 +700,7 @@ class GcsWritableFile : public WritableFile {\n \n   absl::Status CheckWritable() const {\n     if (!outfile_.is_open()) {\n-      return errors::FailedPrecondition(\n+      return absl::FailedPreconditionError(\n           \"The internal temporary file is not writable.\");\n     }\n     return absl::OkStatus();\n@@ -1652,7 +1652,7 @@ absl::Status GcsFileSystem::CheckBucketLocationConstraint(\n     return absl::OkStatus();\n   }\n \n-  return errors::FailedPrecondition(strings::Printf(\n+  return absl::FailedPreconditionError(strings::Printf(\n       \"Bucket '%s' is in '%s' location, allowed locations are: (%s).\",\n       bucket.c_str(), location.c_str(),\n       absl::StrJoin(allowed_locations_, \", \").c_str()));"
        },
        {
            "sha": "d9775c7a7d310cb7cbe231fb36669cb511a7e054",
            "filename": "third_party/xla/xla/tsl/platform/cloud/gcs_file_system_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system_test.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -560,7 +560,7 @@ TEST(GcsFileSystemTest,\n \n   std::unique_ptr<RandomAccessFile> file;\n   EXPECT_EQ(\n-      errors::FailedPrecondition(\n+      absl::FailedPreconditionError(\n           \"Bucket 'bucket' is in 'barfoo' location, allowed locations \"\n           \"are: (us-east1).\"),\n       fs.NewRandomAccessFile(\"gs://bucket/random_access.txt\", nullptr, &file));"
        },
        {
            "sha": "ff5a3c6fc4133dea2e7a681038774cbf18626cbf",
            "filename": "third_party/xla/xla/tsl/platform/cloud/google_auth_provider.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -41,9 +41,7 @@ limitations under the License.\n #include \"json/json.h\"\n #include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/errors.h\"\n-#include \"tsl/platform/base64.h\"\n #include \"tsl/platform/path.h\"\n-#include \"tsl/platform/retrying_utils.h\"\n \n namespace tsl {\n \n@@ -98,7 +96,7 @@ bool IsFile(const string& filename) {\n /// Returns the credentials file name from the env variable.\n absl::Status GetEnvironmentVariableFileName(string* filename) {\n   if (!filename) {\n-    return errors::FailedPrecondition(\"'filename' cannot be nullptr.\");\n+    return absl::FailedPreconditionError(\"'filename' cannot be nullptr.\");\n   }\n   const char* result = std::getenv(kGoogleApplicationCredentials);\n   if (!result || !IsFile(result)) {\n@@ -112,7 +110,7 @@ absl::Status GetEnvironmentVariableFileName(string* filename) {\n /// Returns the well known file produced by command 'gcloud auth login'.\n absl::Status GetWellKnownFileName(string* filename) {\n   if (!filename) {\n-    return errors::FailedPrecondition(\"'filename' cannot be nullptr.\");\n+    return absl::FailedPreconditionError(\"'filename' cannot be nullptr.\");\n   }\n   string config_dir;\n   const char* config_dir_override = std::getenv(kCloudSdkConfig);\n@@ -231,7 +229,7 @@ absl::Status GoogleAuthProvider::GetTokenFromFiles() {\n   Json::Reader reader;\n   std::ifstream credentials_fstream(credentials_filename);\n   if (!reader.parse(credentials_fstream, json)) {\n-    return errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(\n         \"Couldn't parse the JSON credentials file.\");\n   }\n   if (json.isMember(\"refresh_token\")) {"
        },
        {
            "sha": "0287bef06744ecceaf9a84c26f160958c3389fbd",
            "filename": "third_party/xla/xla/tsl/platform/cloud/oauth_client.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Foauth_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Foauth_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Foauth_client.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -21,7 +21,6 @@ limitations under the License.\n #else\n #include <sys/types.h>\n #endif\n-#include <fstream>\n \n #include <openssl/bio.h>\n #include <openssl/evp.h>\n@@ -52,11 +51,11 @@ constexpr char kGrantType[] =\n absl::Status ReadJsonValue(const Json::Value& json, const string& name,\n                            Json::Value* value) {\n   if (!value) {\n-    return errors::FailedPrecondition(\"'value' cannot be nullptr.\");\n+    return absl::FailedPreconditionError(\"'value' cannot be nullptr.\");\n   }\n   *value = json.get(name, Json::Value::null);\n   if (*value == Json::Value::null) {\n-    return errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(\n         absl::StrCat(\"Couldn't read a JSON value '\", name, \"'.\"));\n   }\n   return absl::OkStatus();\n@@ -67,7 +66,7 @@ absl::Status ReadJsonString(const Json::Value& json, const string& name,\n   Json::Value json_value;\n   TF_RETURN_IF_ERROR(ReadJsonValue(json, name, &json_value));\n   if (!json_value.isString()) {\n-    return errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(\n         absl::StrCat(\"JSON value '\", name, \"' is not string.\"));\n   }\n   *value = json_value.asString();\n@@ -79,7 +78,7 @@ absl::Status ReadJsonInt(const Json::Value& json, const string& name,\n   Json::Value json_value;\n   TF_RETURN_IF_ERROR(ReadJsonValue(json, name, &json_value));\n   if (!json_value.isIntegral()) {\n-    return errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(\n         absl::StrCat(\"JSON value '\", name, \"' is not integer.\"));\n   }\n   *value = json_value.asInt64();\n@@ -89,7 +88,7 @@ absl::Status ReadJsonInt(const Json::Value& json, const string& name,\n absl::Status CreateSignature(RSA* private_key, absl::string_view to_sign,\n                              string* signature) {\n   if (!private_key || !signature) {\n-    return errors::FailedPrecondition(\n+    return absl::FailedPreconditionError(\n         \"'private_key' and 'signature' cannot be nullptr.\");\n   }\n "
        },
        {
            "sha": "f8e063ae2f3a351da52b9b05dbd401472db19552",
            "filename": "third_party/xla/xla/tsl/platform/cloud/ram_file_block_cache_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fram_file_block_cache_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fram_file_block_cache_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fram_file_block_cache_test.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -17,6 +17,7 @@ limitations under the License.\n \n #include <cstring>\n \n+#include \"absl/status/status.h\"\n #include \"absl/strings/ascii.h\"\n #include \"absl/synchronization/blocking_counter.h\"\n #include \"absl/synchronization/notification.h\"\n@@ -500,7 +501,7 @@ TEST(RamFileBlockCacheTest, ParallelReads) {\n     }\n     if (!notification.WaitForNotificationWithTimeout(absl::Seconds(10))) {\n       // This avoids having the test time out, which is harder to debug.\n-      return errors::FailedPrecondition(\"desired concurrency not reached\");\n+      return absl::FailedPreconditionError(\"desired concurrency not reached\");\n     }\n     memset(buffer, 'x', n);\n     *bytes_transferred = n;"
        },
        {
            "sha": "d2d1f009781c1103d86ade22703d505f1b623ac1",
            "filename": "third_party/xla/xla/tsl/platform/file_system.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Ffile_system.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Ffile_system.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Ffile_system.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -206,7 +206,8 @@ absl::Status FileSystem::RecursivelyCreateDir(const std::string& dirname,\n       } else if (directory_status.code() == absl::StatusCode::kUnimplemented) {\n         return directory_status;\n       } else {\n-        return errors::FailedPrecondition(remaining_dir, \" is not a directory\");\n+        return absl::FailedPreconditionError(\n+            absl::StrCat(remaining_dir, \" is not a directory\"));\n       }\n     }\n     if (exists_status.code() != error::Code::NOT_FOUND) {"
        },
        {
            "sha": "f4ac25118ccf8dba850e5f4caef32ca0e7d2d11b",
            "filename": "third_party/xla/xla/tsl/profiler/rpc/client/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2FBUILD?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -131,7 +131,6 @@ cc_library(\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:status\",\n-        \"//xla/tsl/platform:types\",\n         \"//xla/tsl/protobuf:error_codes_proto_impl_cc\",\n         \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/memory\","
        },
        {
            "sha": "aa4ae56ef26678d0770b5b2a665ac2b27dea24ca",
            "filename": "third_party/xla/xla/tsl/profiler/rpc/client/profiler_client.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2Fprofiler_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2Fprofiler_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2Fprofiler_client.cc?ref=335d7bcf5c8e3ebb09589ec58d33c4fef8204cc1",
            "patch": "@@ -16,6 +16,7 @@ limitations under the License.\n \n #include <limits>\n #include <memory>\n+#include <string>\n \n #include \"absl/memory/memory.h\"\n #include \"absl/status/status.h\"\n@@ -135,7 +136,7 @@ void RemoteProfilerSession::ProfileAsync() {\n std::unique_ptr<ProfileResponse> RemoteProfilerSession::WaitForCompletion(\n     absl::Status& out_status) {\n   if (!response_) {\n-    out_status = errors::FailedPrecondition(\n+    out_status = absl::FailedPreconditionError(\n         \"WaitForCompletion must only be called once.\");\n     return nullptr;\n   }"
        }
    ],
    "stats": {
        "total": 77,
        "additions": 37,
        "deletions": 40
    }
}