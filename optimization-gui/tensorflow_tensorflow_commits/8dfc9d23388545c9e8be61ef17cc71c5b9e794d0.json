{
    "author": "krishnaharidasan",
    "message": "Remove old protocol attribute handling in IFRT proxy\n\nPiperOrigin-RevId: 840487191",
    "sha": "8dfc9d23388545c9e8be61ef17cc71c5b9e794d0",
    "files": [
        {
            "sha": "06c05bec5675e7a7a806a1590487a6e6f4bcf7ad",
            "filename": "third_party/xla/xla/python/ifrt_proxy/server/ifrt_backend.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8dfc9d23388545c9e8be61ef17cc71c5b9e794d0/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8dfc9d23388545c9e8be61ef17cc71c5b9e794d0/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc?ref=8dfc9d23388545c9e8be61ef17cc71c5b9e794d0",
            "patch": "@@ -751,18 +751,8 @@ absl::StatusOr<BackendInterface::Response> IfrtBackend::HandleInit(\n     }\n     d->set_debug_string(AsProtoStringData(device->DebugString()));\n     d->set_to_string(AsProtoStringData(device->ToString()));\n-    if (protocol_version() <= 3) {\n-      for (const auto& [name, attr] : device->Attributes().map()) {\n-        TF_ASSIGN_OR_RETURN(\n-            (*d->mutable_deprecated_attributes())[name],\n-            std::visit(\n-                [&](const auto& attr) { return ToVariantProto(attr.value); },\n-                attr));\n-      }\n-    } else {\n-      device->Attributes().ToProto(*d->mutable_attributes(),\n-                                   ifrt_serdes_version());\n-    }\n+    device->Attributes().ToProto(*d->mutable_attributes(),\n+                                 ifrt_serdes_version());\n \n     if (device->IsAddressable()) {\n       init_resp->add_addressable_device_ids(device->Id().value());"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 2,
        "deletions": 12
    }
}