{
    "author": "ezhulenev",
    "message": "[xla:cpu] Remove support for API_VERSION_STATUS_RETURNING_UNIFIED custom calls\n\nPiperOrigin-RevId: 814701028",
    "sha": "7eeedb0f2fa8cc15f52345a190777ae21a89ece2",
    "files": [
        {
            "sha": "959a87bca46d16809d31d10a6d3c3c197faca9ec",
            "filename": "third_party/xla/xla/backends/cpu/runtime/custom_call_thunk.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7eeedb0f2fa8cc15f52345a190777ae21a89ece2/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fcustom_call_thunk.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7eeedb0f2fa8cc15f52345a190777ae21a89ece2/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fcustom_call_thunk.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fcustom_call_thunk.cc?ref=7eeedb0f2fa8cc15f52345a190777ae21a89ece2",
            "patch": "@@ -222,6 +222,21 @@ static absl::StatusOr<CustomCallThunk::CustomCallTarget> ToCustomCallTarget(\n         fn(out, in, status);\n       };\n     case CustomCallApiVersion::API_VERSION_STATUS_RETURNING_UNIFIED:\n+#ifdef PLATFORM_GOOGLE\n+      return InvalidArgument(\n+          \"Custom call API version `API_VERSION_STATUS_RETURNING_UNIFIED` \"\n+          \"is not supported by XLA:CPU. Prefer \"\n+          \"https://docs.jax.dev/en/latest/ffi.html. It will be fully removed \"\n+          \"in November 2025. Custom call target: %s\",\n+          target_name);\n+#else\n+      LOG(ERROR)\n+          << \"Custom call API version `API_VERSION_STATUS_RETURNING_UNIFIED` \"\n+             \"is not supported by XLA:CPU. Prefer \"\n+             \"https://docs.jax.dev/en/latest/ffi.html. It will be fully \"\n+             \"removed in November 2025. Custom call target: \"\n+          << target_name;\n+#endif\n       using v3_signature =\n           void (*)(void* /*out*/, const void** /*in*/, const char* /*opaque*/,\n                    size_t /*opaque_len*/, XlaCustomCallStatus* /*status*/);"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 15,
        "deletions": 0
    }
}