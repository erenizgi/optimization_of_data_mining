{
    "author": "WillFroom",
    "message": "[XTile] Enable passing fusions without gpu backend config.\n\nThis will enable us to emit cpu fusions.\n\nPiperOrigin-RevId: 836165443",
    "sha": "120b117df7b4d1ebe69b9f934fcbf19b3aefead8",
    "files": [
        {
            "sha": "328667672a520950cc217643063c11437ee033fa",
            "filename": "third_party/xla/xla/backends/gpu/codegen/triton/fusion_emitter.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/120b117df7b4d1ebe69b9f934fcbf19b3aefead8/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Ffusion_emitter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/120b117df7b4d1ebe69b9f934fcbf19b3aefead8/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Ffusion_emitter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Ffusion_emitter.cc?ref=120b117df7b4d1ebe69b9f934fcbf19b3aefead8",
            "patch": "@@ -1952,9 +1952,13 @@ absl::StatusOr<mlir::OwningOpRef<mlir::ModuleOp>> EmitXTileModule(\n       llvm_ir::CreateMlirModuleOp(loc);\n   b.setInsertionPointToEnd(triton_module->getBody());\n \n-  auto backend_config =\n-      fusion->backend_config<GpuBackendConfig>()->fusion_backend_config();\n-  absl::string_view fusion_kind = backend_config.kind();\n+  std::string fusion_kind(kTritonFusionKind);\n+  if (fusion->has_backend_config()) {\n+    auto backend_config = fusion->backend_config<GpuBackendConfig>();\n+    if (backend_config.ok()) {\n+      fusion_kind = backend_config->fusion_backend_config().kind();\n+    }\n+  }\n \n   if (fusion_kind == kTritonGemmFusionKind) {\n     return Internal("
        }
    ],
    "stats": {
        "total": 10,
        "additions": 7,
        "deletions": 3
    }
}