{
    "author": "meteorcloudy",
    "message": "Reformat MODULE.bazel and adjust pip repo usage.\n\nThis change reorders arguments within various override and extension calls for consistency. It also removes the explicit `xla_pypi_311_numpy` from the `use_repo(pip, ...)` call.\n\nPiperOrigin-RevId: 819260347",
    "sha": "26658a5e2e66df8ea4bb8181d1a11b8f12617a63",
    "files": [
        {
            "sha": "73a0b3e0dae1a41f4e5924e44617f04943c5d43c",
            "filename": "third_party/xla/MODULE.bazel",
            "status": "modified",
            "additions": 31,
            "deletions": 33,
            "changes": 64,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/26658a5e2e66df8ea4bb8181d1a11b8f12617a63/third_party%2Fxla%2FMODULE.bazel",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/26658a5e2e66df8ea4bb8181d1a11b8f12617a63/third_party%2Fxla%2FMODULE.bazel",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2FMODULE.bazel?ref=26658a5e2e66df8ea4bb8181d1a11b8f12617a63",
            "patch": "@@ -34,59 +34,61 @@ bazel_dep(name = \"grpc-java\", version = \"1.75.0\", repo_name = \"DO_NOT_USE_grpc_j\n # TODO: publish an official version of rules_ml_toolchain to BCR\n bazel_dep(name = \"rules_ml_toolchain\")\n archive_override(\n-  module_name = \"rules_ml_toolchain\",\n-  integrity = \"sha256-PqEEHetGz0+SfdmU4yrNjENveZexKpVY6F3ualqJ41w=\",\n-  urls = [\"https://github.com/google-ml-infra/rules_ml_toolchain/archive/0fccc2447ef3bec3d75046a60a1895f053424727.tar.gz\"],\n-  strip_prefix = \"rules_ml_toolchain-0fccc2447ef3bec3d75046a60a1895f053424727\",\n+    module_name = \"rules_ml_toolchain\",\n+    integrity = \"sha256-PqEEHetGz0+SfdmU4yrNjENveZexKpVY6F3ualqJ41w=\",\n+    strip_prefix = \"rules_ml_toolchain-0fccc2447ef3bec3d75046a60a1895f053424727\",\n+    urls = [\"https://github.com/google-ml-infra/rules_ml_toolchain/archive/0fccc2447ef3bec3d75046a60a1895f053424727.tar.gz\"],\n )\n \n # TODO: Upstream the patch?\n single_version_override(\n-  module_name = \"grpc\",\n-  patches = [\"//third_party/grpc:grpc.patch\"],\n-  patch_strip = 1,\n+    module_name = \"grpc\",\n+    patch_strip = 1,\n+    patches = [\"//third_party/grpc:grpc.patch\"],\n )\n \n # TODO: Upstream those patch?\n single_version_override(\n-  module_name = \"abseil-cpp\",\n-  patches = [\n-      \"//third_party/absl:btree.patch\",\n-      \"//third_party/absl:build_dll.patch\",\n-      \"//third_party/absl:endian.patch\",\n-      \"//third_party/absl:rules_cc.patch\",\n-      \"//third_party/absl:check_op.patch\",\n-      \"//third_party/absl:check_op_2.patch\",\n-  ],\n-  patch_strip = 1,\n+    module_name = \"abseil-cpp\",\n+    patch_strip = 1,\n+    patches = [\n+        \"//third_party/absl:btree.patch\",\n+        \"//third_party/absl:build_dll.patch\",\n+        \"//third_party/absl:endian.patch\",\n+        \"//third_party/absl:rules_cc.patch\",\n+        \"//third_party/absl:check_op.patch\",\n+        \"//third_party/absl:check_op_2.patch\",\n+    ],\n )\n \n # Use an unreleased version of googletest\n archive_override(\n-  module_name = \"googletest\",\n-  urls = [\"https://github.com/google/googletest/archive/28e9d1f26771c6517c3b4be10254887673c94018.zip\"],\n-  strip_prefix = \"googletest-28e9d1f26771c6517c3b4be10254887673c94018\",\n+    module_name = \"googletest\",\n+    strip_prefix = \"googletest-28e9d1f26771c6517c3b4be10254887673c94018\",\n+    urls = [\"https://github.com/google/googletest/archive/28e9d1f26771c6517c3b4be10254887673c94018.zip\"],\n )\n \n ##############################################################\n # C++ dependencies\n \n # TODO: most of them can be Bazel modules, but we need a release strategy for them\n third_party = use_extension(\"//third_party/extensions:third_party.bzl\", \"third_party_ext\")\n-use_repo(third_party,\n+use_repo(\n+    third_party,\n+    \"FXdiv\",\n+    \"XNNPACK\",\n     \"cpuinfo\",\n     \"cudnn_frontend_archive\",\n     \"ducc\",\n     \"eigen_archive\",\n     \"farmhash_archive\",\n     \"farmhash_gpu_archive\",\n-    \"FXdiv\",\n     \"gloo\",\n     \"highwayhash\",\n     \"hwloc\",\n     \"implib_so\",\n-    \"llvm_openmp\",\n     \"llvm-raw\",\n+    \"llvm_openmp\",\n     \"ml_dtypes_py\",\n     \"mpitrampoline\",\n     \"nanobind\",\n@@ -97,7 +99,6 @@ use_repo(third_party,\n     \"shardy\",\n     \"stablehlo\",\n     \"triton\",\n-    \"XNNPACK\",\n )\n \n ##############################################################\n@@ -109,10 +110,7 @@ python.toolchain(python_version = \"3.11\")\n use_repo(python, \"pythons_hub\")\n \n pip = use_extension(\"@rules_python//python/extensions:pip.bzl\", \"pip\")\n-\n pip.whl_mods(\n-    hub_name = \"pypi_mods\",\n-    whl_name = \"numpy\",\n     additive_build_content = \"\"\"\n load(\"@rules_cc//cc:cc_library.bzl\", \"cc_library\")\n cc_library(\n@@ -130,21 +128,21 @@ cc_library(\n     deps = [\":numpy_headers_2\", \":numpy_headers_1\"],\n )\n \"\"\",\n+    hub_name = \"pypi_mods\",\n+    whl_name = \"numpy\",\n )\n-\n pip.parse(\n+    extra_hub_aliases = {\n+        \"numpy\": [\"numpy_headers\"],\n+    },\n     hub_name = \"xla_pypi\",\n     python_version = \"3.11\",\n     requirements_lock = \"//:requirements_lock_3_11.txt\",\n     whl_modifications = {\n         \"@pypi_mods//:numpy.json\": \"numpy\",\n     },\n-    extra_hub_aliases = {\n-        \"numpy\": [\"numpy_headers\"],\n-    }\n )\n-\n-use_repo(pip, \"pypi_mods\", \"xla_pypi_311_numpy\", pypi = \"xla_pypi\")\n+use_repo(pip, \"pypi_mods\", pypi = \"xla_pypi\")\n \n python_version_ext = use_extension(\"//third_party/extensions:python_version.bzl\", \"python_version_ext\")\n use_repo(python_version_ext, \"python_version_repo\")"
        }
    ],
    "stats": {
        "total": 64,
        "additions": 31,
        "deletions": 33
    }
}