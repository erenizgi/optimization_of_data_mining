{
    "author": "golechwierowicz",
    "message": "[XLA:GPU] Make EmitterSpecificConstraintsBuilder alias return absl::StatusOr.\n\nWe want to capture the construction failure in a case when tiling constraints implementation is hardware specific, and the constructor is invoked with hardware that we don't have the implementation for yet.\n\nPiperOrigin-RevId: 840245140",
    "sha": "2be47e7b5d384655c2ab989e60efd351f78ebf49",
    "files": [
        {
            "sha": "774c32b6fd8ef685495fa1a6a370a1ac666a5d43",
            "filename": "third_party/xla/xla/codegen/tiling/symbolic_tile_analysis.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2be47e7b5d384655c2ab989e60efd351f78ebf49/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsymbolic_tile_analysis.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2be47e7b5d384655c2ab989e60efd351f78ebf49/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsymbolic_tile_analysis.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsymbolic_tile_analysis.cc?ref=2be47e7b5d384655c2ab989e60efd351f78ebf49",
            "patch": "@@ -1289,8 +1289,15 @@ std::vector<OperandIndexingSet> GetOperandIndexingMaps(\n   // Create emitter-specific constraints if a builder was provided.\n   std::unique_ptr<EmitterSpecificConstraints> emitter_specific_constraints;\n   if (emitter_specific_constraints_builder != nullptr) {\n+    absl::StatusOr<std::unique_ptr<EmitterSpecificConstraints>>\n+        emitter_specific_constraints_applied =\n+            emitter_specific_constraints_builder(tiled_hlo_instructions,\n+                                                 fusion);\n+    if (!emitter_specific_constraints_applied.ok()) {\n+      return FusionDecision(emitter_specific_constraints_applied.status());\n+    }\n     emitter_specific_constraints =\n-        emitter_specific_constraints_builder(tiled_hlo_instructions, fusion);\n+        std::move(*emitter_specific_constraints_applied);\n   }\n \n   TilingSpecification tiling_specification = TilingSpecification("
        },
        {
            "sha": "6460e62c0b688204f173a5ff424082f2c2cb48c4",
            "filename": "third_party/xla/xla/codegen/tiling/symbolic_tile_analysis.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2be47e7b5d384655c2ab989e60efd351f78ebf49/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsymbolic_tile_analysis.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2be47e7b5d384655c2ab989e60efd351f78ebf49/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsymbolic_tile_analysis.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsymbolic_tile_analysis.h?ref=2be47e7b5d384655c2ab989e60efd351f78ebf49",
            "patch": "@@ -97,7 +97,7 @@ class EmitterSpecificConstraints {\n // TODO(b/367306544): get rid of the HloFusionAdaptor parameter once the\n // abstraction exists.\n using EmitterSpecificConstraintsBuilder =\n-    std::function<std::unique_ptr<EmitterSpecificConstraints>(\n+    std::function<absl::StatusOr<std::unique_ptr<EmitterSpecificConstraints>>(\n         const std::vector<std::unique_ptr<SymbolicTiledHloInstruction>>&,\n         const HloFusionAdaptor&)>;\n "
        }
    ],
    "stats": {
        "total": 11,
        "additions": 9,
        "deletions": 2
    }
}