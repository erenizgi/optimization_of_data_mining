{
    "author": "whhone",
    "message": "Allow using different license in aar_with_jni.bzl\n\nPiperOrigin-RevId: 807873757",
    "sha": "3669f67dc0607f537d611caf36d7a9b78b272b95",
    "files": [
        {
            "sha": "e44dbf6edbdd502a4bfcab0845cf4b8af685cdfd",
            "filename": "tensorflow/lite/java/aar_with_jni.bzl",
            "status": "modified",
            "additions": 13,
            "deletions": 7,
            "changes": 20,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3669f67dc0607f537d611caf36d7a9b78b272b95/tensorflow%2Flite%2Fjava%2Faar_with_jni.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3669f67dc0607f537d611caf36d7a9b78b272b95/tensorflow%2Flite%2Fjava%2Faar_with_jni.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fjava%2Faar_with_jni.bzl?ref=3669f67dc0607f537d611caf36d7a9b78b272b95",
            "patch": "@@ -8,6 +8,7 @@ def aar_with_jni(\n         headers = None,\n         flatten_headers = False,\n         strip_headers_prefix = \"\",\n+        license_file = \"//:LICENSE\",\n         third_party_notice = None):\n     \"\"\"Generates an Android AAR with repo root license given an Android library target.\n \n@@ -21,6 +22,8 @@ def aar_with_jni(\n           .aars with native libs that can be used directly by native clients.\n       flatten_headers: Whether to flatten the output paths of included headers.\n       strip_headers_prefix: The prefix to strip from the output paths of included headers.\n+      license_file: Optional. The main LICENSE file to include in the AAR.\n+          Defaults to //third_party/tensorflow:LICENSE.\n       third_party_notice: Optional. The third party dependency licenses as THIRD_PARTY_NOTICE.txt.\n     \"\"\"\n \n@@ -60,7 +63,7 @@ EOF\n     srcs = [\n         android_library + \".aar\",\n         name + \"_dummy_app_for_so_unsigned.apk\",\n-        \"//:LICENSE\",\n+        license_file,\n     ]\n \n     cmd = \"\"\"\n@@ -71,9 +74,9 @@ cd $$(mktemp -d)\n unzip $$origdir/$(location :{1}_dummy_app_for_so_unsigned.apk) \"lib/*\"\n cp -r lib jni\n zip -r $$origdir/$(location :{1}.aar) jni/*/*.so\n-cp $$origdir/$(location //:LICENSE) ./\n+cp $$origdir/$(location {2}) ./LICENSE\n zip $$origdir/$(location :{1}.aar) LICENSE\n-\"\"\".format(android_library, name)\n+\"\"\".format(android_library, name, license_file)\n \n     if headers:\n         srcs += headers\n@@ -117,29 +120,32 @@ zip $$origdir/$(location :{1}.aar) LICENSE\n \n def aar_without_jni(\n         name,\n-        android_library):\n+        android_library,\n+        license_file = \"//:LICENSE\"):\n     \"\"\"Generates an Android AAR with repo root license given a pure Java Android library target.\n \n     Args:\n       name: Name of the generated .aar file.\n       android_library: The `android_library` target to package. Note that the\n           AAR will contain *only that library's .jar` sources. It does not\n           package the transitive closure of all Java source dependencies.\n+      license_file: Optional. The main LICENSE file to include in the AAR.\n+          Defaults to //third_party/tensorflow:LICENSE.\n     \"\"\"\n \n     srcs = [\n         android_library + \".aar\",\n-        \"//:LICENSE\",\n+        license_file,\n     ]\n \n     cmd = \"\"\"\n cp $(location {0}.aar) $(location :{1}.aar)\n chmod +w $(location :{1}.aar)\n origdir=$$PWD\n cd $$(mktemp -d)\n-cp $$origdir/$(location //:LICENSE) ./\n+cp $$origdir/$(location {2}) ./LICENSE\n zip $$origdir/$(location :{1}.aar) LICENSE\n-\"\"\".format(android_library, name)\n+\"\"\".format(android_library, name, license_file)\n \n     native.genrule(\n         name = name,"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 13,
        "deletions": 7
    }
}