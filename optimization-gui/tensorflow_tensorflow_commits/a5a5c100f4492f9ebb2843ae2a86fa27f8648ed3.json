{
    "author": "matthiaskramm",
    "message": "Serialize matrix_unit_operand_precision with the rest of xla::CompileOptions.\n\nPiperOrigin-RevId: 835329336",
    "sha": "a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3",
    "files": [
        {
            "sha": "1ed70191869b18bbd4b38ad8061528d9974105a8",
            "filename": "third_party/xla/xla/pjrt/pjrt_executable.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable.cc?ref=a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3",
            "patch": "@@ -83,6 +83,7 @@ absl::StatusOr<CompileOptionsProto> CompileOptions::ToProto() const {\n     }\n   }\n   output.set_allow_in_place_mlir_modification(allow_in_place_mlir_modification);\n+  output.set_matrix_unit_operand_precision(matrix_unit_operand_precision);\n   output.set_parameter_is_tupled_arguments(parameter_is_tupled_arguments);\n   TF_ASSIGN_OR_RETURN(*output.mutable_executable_build_options(),\n                       executable_build_options.ToProto());\n@@ -126,6 +127,7 @@ absl::StatusOr<CompileOptions> CompileOptions::FromProto(\n   }\n   output.allow_in_place_mlir_modification =\n       proto.allow_in_place_mlir_modification();\n+  output.matrix_unit_operand_precision = proto.matrix_unit_operand_precision();\n   output.parameter_is_tupled_arguments = proto.parameter_is_tupled_arguments();\n   TF_ASSIGN_OR_RETURN(\n       ExecutableBuildOptions executable_build_options,"
        },
        {
            "sha": "4d24c3b57bab4c6c3922f92f1a5f8c241b7691f5",
            "filename": "third_party/xla/xla/pjrt/pjrt_executable.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable.h?ref=a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3",
            "patch": "@@ -121,7 +121,6 @@ struct CompileOptions {\n   bool allow_in_place_mlir_modification = false;\n \n   // Used to indicate the precision configuration.\n-  // TODO(b/450278657): Not serialized into the proto. Should it be?\n   PrecisionConfig::Precision matrix_unit_operand_precision =\n       PrecisionConfig::DEFAULT;\n "
        },
        {
            "sha": "7965a599e5b63fbc7ff6c4b67061ec90aea93c04",
            "filename": "third_party/xla/xla/pjrt/pjrt_executable_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_executable_test.cc?ref=a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3",
            "patch": "@@ -41,6 +41,7 @@ TEST(CompileOptionsTest, Serialization) {\n   src.parameter_is_tupled_arguments = true;\n   src.profile_version = 1;\n   src.argument_layouts = {ShapeUtil::MakeShape(S32, {1})};\n+  src.matrix_unit_operand_precision = PrecisionConfig::HIGHEST;\n   src.allow_in_place_mlir_modification = true;\n   ExecutableBuildOptions build_option;\n   build_option.set_device_assignment(DeviceAssignment(1, 1));\n@@ -71,6 +72,7 @@ TEST(CompileOptionsTest, Defaults) {\n   EXPECT_EQ(src.compile_portable_executable, false);\n   EXPECT_EQ(src.parameter_is_tupled_arguments, false);\n   EXPECT_EQ(src.allow_in_place_mlir_modification, false);\n+  EXPECT_EQ(src.matrix_unit_operand_precision, PrecisionConfig::DEFAULT);\n }\n \n TEST(ExecuteOptionsTest, Serialization) {"
        },
        {
            "sha": "699d583abe48e8255506a39e86569430fc5b7280",
            "filename": "third_party/xla/xla/pjrt/proto/compile_options.proto",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3/third_party%2Fxla%2Fxla%2Fpjrt%2Fproto%2Fcompile_options.proto",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3/third_party%2Fxla%2Fxla%2Fpjrt%2Fproto%2Fcompile_options.proto",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fproto%2Fcompile_options.proto?ref=a5a5c100f4492f9ebb2843ae2a86fa27f8648ed3",
            "patch": "@@ -168,6 +168,7 @@ message CompileOptionsProto {\n   map<string, OptionOverrideProto> env_option_overrides = 7;\n   stream_executor.GpuTargetConfigProto target_config = 8;\n   bool allow_in_place_mlir_modification = 9;\n+  PrecisionConfig.Precision matrix_unit_operand_precision = 10;\n }\n \n // Helper for serializing opaque executables alongside CompileOptions."
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}