{
    "author": "mwhittaker",
    "message": "Adds more logging to coordination service.\n\nPiperOrigin-RevId: 819391653",
    "sha": "5750ca22b106378fc1bc9e7ef80deca11147fd64",
    "files": [
        {
            "sha": "4da8f4e586461d0fbd03c0b8d2b26a03d76f48aa",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/coordination/coordination_service.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5750ca22b106378fc1bc9e7ef80deca11147fd64/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fcoordination_service.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5750ca22b106378fc1bc9e7ef80deca11147fd64/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fcoordination_service.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2Fcoordination_service.cc?ref=5750ca22b106378fc1bc9e7ef80deca11147fd64",
            "patch": "@@ -527,6 +527,14 @@ CoordinationService::ConnectAfterBarrierPasses(absl::string_view task_name,\n                                   int64_t unused_counter) mutable {\n     state_mu_.AssertHeld();\n     const std::unique_ptr<TaskState>& task_state = cluster_state_[task];\n+    if (!s.ok()) {\n+      LOG(WARNING) << \"ConnectAfterBarrierPasses: \" << s;\n+    }\n+    if (incarnation != task_state->GetTaskIncarnation()) {\n+      LOG(WARNING) << \"ConnectAfterBarrierPasses: incarnation=\" << incarnation\n+                   << \", task_state->GetTaskIncarnation()=\"\n+                   << task_state->GetTaskIncarnation();\n+    }\n     if (s.ok() && incarnation == task_state->GetTaskIncarnation()) {\n       // Connect task to service.\n       task_state->Connect();"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 8,
        "deletions": 0
    }
}