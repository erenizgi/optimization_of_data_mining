{
    "author": "majnemer",
    "message": "Deprecate `tsl::prefetch` and suggest inlining.\n\nAdds `ABSL_DEPRECATE_AND_INLINE` to the `tsl::prefetch` function templates to encourage direct usage of the underlying `absl::PrefetchToLocalCache` functions.\n\nPiperOrigin-RevId: 807993248",
    "sha": "53890fd84c61d538473906ba3bedd1556d75e7dc",
    "files": [
        {
            "sha": "3a059e33a6c7a86307ec1af39799af0ecb0325cb",
            "filename": "third_party/xla/xla/tsl/platform/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/53890fd84c61d538473906ba3bedd1556d75e7dc/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/53890fd84c61d538473906ba3bedd1556d75e7dc/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD?ref=53890fd84c61d538473906ba3bedd1556d75e7dc",
            "patch": "@@ -800,6 +800,7 @@ cc_library(\n     hdrs = [\"prefetch.h\"],\n     compatible_with = get_compatible_with_portable(),\n     deps = [\n+        \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/base:prefetch\",\n     ],\n )"
        },
        {
            "sha": "cacd68522edcd3773ae1fb48d64b98ddd6cb66e7",
            "filename": "third_party/xla/xla/tsl/platform/prefetch.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/53890fd84c61d538473906ba3bedd1556d75e7dc/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fprefetch.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/53890fd84c61d538473906ba3bedd1556d75e7dc/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fprefetch.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fprefetch.h?ref=53890fd84c61d538473906ba3bedd1556d75e7dc",
            "patch": "@@ -16,6 +16,7 @@ limitations under the License.\n #ifndef XLA_TSL_PLATFORM_PREFETCH_H_\n #define XLA_TSL_PLATFORM_PREFETCH_H_\n \n+#include \"absl/base/macros.h\"\n #include \"absl/base/prefetch.h\"\n \n namespace tsl {\n@@ -30,11 +31,13 @@ enum PrefetchHint {\n };\n \n template <PrefetchHint hint>\n+ABSL_DEPRECATE_AND_INLINE()\n void prefetch(const void* x) {\n   absl::PrefetchToLocalCache(x);\n }\n \n template <>\n+ABSL_DEPRECATE_AND_INLINE()\n inline void prefetch<PREFETCH_HINT_NTA>(const void* x) {\n   absl::PrefetchToLocalCacheNta(x);\n }"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}