{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 797604570",
    "sha": "8b141e52e121a67e60a85df3124449e2f44a9dde",
    "files": [
        {
            "sha": "7b0fc4348775df526af743ac60784b9eca7653af",
            "filename": "tensorflow/core/common_runtime/BUILD",
            "status": "modified",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2FBUILD?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -231,6 +231,7 @@ tf_cuda_library(\n         \"//tensorflow/core:lib_internal\",\n         \"//tensorflow/core:protos_all_cc\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@eigen_archive//:eigen3\",\n     ] + if_static([\n         \":graph_constructor\",\n@@ -683,6 +684,7 @@ cc_library(\n         \"//tensorflow/core/profiler/lib:traceme_encode\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n         \"@com_google_absl//absl/types:optional\",\n         \"@local_xla//xla/tsl/platform:env\",\n@@ -902,6 +904,7 @@ cc_library(\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/types:optional\",\n         \"@com_google_absl//absl/types:variant\",\n     ],\n@@ -1125,6 +1128,7 @@ cc_library(\n         \"//tensorflow/core:lib\",\n         \"//tensorflow/core/profiler/lib:scoped_memory_debug_annotation\",\n         \"//tensorflow/core/profiler/lib:traceme\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n     alwayslink = 1,\n )\n@@ -1757,6 +1761,7 @@ cc_library(\n         \":process_util\",\n         \"//tensorflow/core:framework\",\n         \"//tensorflow/core:lib\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -1778,6 +1783,7 @@ cc_library(\n         \"//tensorflow/core:framework\",\n         \"//tensorflow/core:lib\",\n         \"//tensorflow/core/profiler/lib:traceme\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n     alwayslink = 1,\n )\n@@ -1800,6 +1806,7 @@ cc_library(\n         \"//tensorflow/core:framework\",\n         \"//tensorflow/core:lib\",\n         \"//tensorflow/core/profiler/lib:traceme\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n     alwayslink = 1,\n )\n@@ -2090,6 +2097,7 @@ tf_cuda_library(\n         \":step_stats_collector\",\n         \":threadpool_device\",\n         \":threadpool_device_factory\",\n+        \"@com_google_absl//absl/synchronization\",\n     ] + if_macos(\n         [],\n         [\":replicate_constants_pass\"],  # TODO(b/301469885): Remove.\n@@ -2103,6 +2111,7 @@ tf_cuda_library(\n     deps = [\n         \"//tensorflow/core:core_cpu_base\",\n         \"//tensorflow/core/grappler:grappler_item\",\n+        \"@com_google_absl//absl/synchronization\",\n     ] + if_static([\":core_cpu_impl\"]) + tf_protos_all() + tf_protos_grappler(),\n )\n \n@@ -2113,6 +2122,7 @@ tf_cuda_library(\n     deps = [\n         \":core_cpu_base_no_ops\",\n         \"//tensorflow/core/grappler:grappler_item\",\n+        \"@com_google_absl//absl/synchronization\",\n     ] + tf_protos_all() + tf_protos_grappler(),\n )\n \n@@ -2139,6 +2149,7 @@ tf_cuda_library(\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@eigen_archive//:eigen3\",\n     ] + tf_additional_core_deps() + if_static([\n         \":core_cpu_impl\",\n@@ -2216,6 +2227,7 @@ tf_cuda_library(\n         \"//tensorflow/core/profiler/lib:traceme_encode\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n         \"@com_google_absl//absl/types:optional\",\n     ],\n@@ -2512,6 +2524,7 @@ tf_cc_tests(\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@eigen_archive//:eigen3\",\n     ],\n )\n@@ -2591,6 +2604,7 @@ tf_cc_tests(\n         \"//tensorflow/core/kernels:ops_util\",\n         \"//tensorflow/core/util:protos_test_cc\",\n         \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@eigen_archive//:eigen3\",\n     ],\n )\n@@ -2830,6 +2844,7 @@ tf_cuda_cc_test(\n         \"//tensorflow/core/kernels:cwise_op\",\n         \"//tensorflow/core/kernels:function_ops\",\n         \"//tensorflow/core/kernels:resource_variable_ops\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -2853,6 +2868,7 @@ tf_cc_test(\n         \"//tensorflow/core:lib\",\n         \"//tensorflow/core:test\",\n         \"//tensorflow/core:test_main\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -2949,6 +2965,7 @@ tf_cuda_cc_test(\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:str_format\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_googletest//:gtest\",\n         \"@eigen_archive//:eigen3\",\n         \"@local_xla//xla/tsl/platform:status_matchers\",\n@@ -2970,6 +2987,7 @@ tf_cc_test(\n         \"@com_google_googletest//:gtest\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings:str_format\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@local_xla//xla/tsl/platform:status_matchers\",\n         \"//tensorflow/core:framework\",\n         \"//tensorflow/core:framework_internal\",\n@@ -3134,6 +3152,7 @@ tf_cc_test(\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_googletest//:gtest\",\n         \"@local_xla//xla/tsl/platform:status_matchers\",\n     ],\n@@ -3167,6 +3186,7 @@ tf_cc_test(\n         \"//tensorflow/core/kernels:matmul_op\",\n         \"//tensorflow/core/kernels:random_ops\",\n         \"//tensorflow/core/kernels:shape_ops\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@eigen_archive//:eigen3\",\n     ],\n )"
        },
        {
            "sha": "480d3c07403d02ed94bc5ac291fe0116e866b639",
            "filename": "tensorflow/core/common_runtime/buf_rendezvous_test.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fbuf_rendezvous_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fbuf_rendezvous_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fbuf_rendezvous_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -14,11 +14,11 @@ limitations under the License.\n ==============================================================================*/\n #include \"tensorflow/core/common_runtime/buf_rendezvous.h\"\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/device.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n #include \"tensorflow/core/framework/tensor.h\"\n #include \"tensorflow/core/framework/types.pb.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/status.h\"\n #include \"tensorflow/core/lib/core/status_test_util.h\"\n #include \"tensorflow/core/platform/test.h\"\n@@ -84,7 +84,7 @@ TEST_F(BufRendezvousTest, CorrectUseProducerFirst) {\n   absl::Status cons_status;\n   bool prod_callback_called = false;\n   bool cons_callback_called = false;\n-  Notification note;\n+  absl::Notification note;\n   br_->ProvideBuf(\n       *kDefaultKey, default_device_, fake_device_context_, &a_, aa_,\n       [&note, &prod_status, &prod_callback_called](const absl::Status& s) {\n@@ -119,7 +119,7 @@ TEST_F(BufRendezvousTest, CorrectUseConsumerFirst) {\n   absl::Status cons_status;\n   bool prod_callback_called = false;\n   bool cons_callback_called = false;\n-  Notification note;\n+  absl::Notification note;\n   br_->ConsumeBuf(\n       *kDefaultKey, *kDefaultDeviceName, kDefaultIncarnation,\n       [this, &cons_status, &cons_callback_called](const absl::Status& s,\n@@ -158,7 +158,7 @@ TEST_F(BufRendezvousTest, ErrorDuplicatePut) {\n       },\n       &cm_);\n   absl::Status bad_status;\n-  Notification note;\n+  absl::Notification note;\n   br_->ProvideBuf(\n       *kDefaultKey, default_device_, fake_device_context_, &a_, aa_,\n       [&bad_status, &note](const absl::Status& s) {\n@@ -193,8 +193,8 @@ TEST_F(BufRendezvousTest, ErrorDeleteNonEmpty) {\n TEST_F(BufRendezvousTest, AbortNonEmpty) {\n   absl::Status cons_status;\n   absl::Status prod_status;\n-  Notification prod_note;\n-  Notification cons_note;\n+  absl::Notification prod_note;\n+  absl::Notification cons_note;\n   br_->ConsumeBuf(\n       *kDefaultKey, *kDefaultDeviceName, kDefaultIncarnation,\n       [&cons_note, &cons_status](const absl::Status& s,\n@@ -227,8 +227,8 @@ TEST_F(BufRendezvousTest, UseAfterAbort) {\n   br_->StartAbort(errors::Internal(\"Falling sky detected\"));\n   absl::Status cons_status;\n   absl::Status prod_status;\n-  Notification prod_note;\n-  Notification cons_note;\n+  absl::Notification prod_note;\n+  absl::Notification cons_note;\n   br_->ConsumeBuf(\n       *kDefaultKey, *kDefaultDeviceName, kDefaultIncarnation,\n       [&cons_note, &cons_status](const absl::Status& s,\n@@ -254,7 +254,7 @@ TEST_F(BufRendezvousTest, UseAfterAbort) {\n \n TEST_F(BufRendezvousTest, DeviceIncarnationMismatch) {\n   absl::Status cons_status;\n-  Notification note;\n+  absl::Notification note;\n   br_->ProvideBuf(\n       *kDefaultKey, default_device_, fake_device_context_, &a_, aa_,\n       [](const absl::Status&) {}, /*cancellation_manager=*/nullptr);\n@@ -272,7 +272,7 @@ TEST_F(BufRendezvousTest, DeviceIncarnationMismatch) {\n \n TEST_F(BufRendezvousTest, ProvideThenCancel) {\n   absl::Status status;\n-  Notification note;\n+  absl::Notification note;\n   br_->ProvideBuf(\n       *kDefaultKey, default_device_, fake_device_context_, &a_, aa_,\n       [&status, &note](const absl::Status& s) {\n@@ -291,7 +291,7 @@ TEST_F(BufRendezvousTest, ProvideThenCancel) {\n \n TEST_F(BufRendezvousTest, CancelThenProvide) {\n   absl::Status status;\n-  Notification note;\n+  absl::Notification note;\n   cm_.StartCancel();\n   br_->ProvideBuf(\n       *kDefaultKey, default_device_, fake_device_context_, &a_, aa_,\n@@ -310,7 +310,7 @@ TEST_F(BufRendezvousTest, CancelThenProvide) {\n \n TEST_F(BufRendezvousTest, ConsumeThenCancel) {\n   absl::Status status;\n-  Notification note;\n+  absl::Notification note;\n   br_->ConsumeBuf(\n       *kDefaultKey, *kDefaultDeviceName, kDefaultIncarnation,\n       [&status, &note](const absl::Status& s, BufRendezvous::Hook* h) {\n@@ -329,7 +329,7 @@ TEST_F(BufRendezvousTest, ConsumeThenCancel) {\n \n TEST_F(BufRendezvousTest, CancelThenConsume) {\n   absl::Status status;\n-  Notification note;\n+  absl::Notification note;\n   cm_.StartCancel();\n   br_->ConsumeBuf(\n       *kDefaultKey, *kDefaultDeviceName, kDefaultIncarnation,\n@@ -351,7 +351,7 @@ TEST_F(BufRendezvousTest, ProvideConsumeThenCancel) {\n   absl::Status cons_status;\n   bool prod_callback_called = false;\n   bool cons_callback_called = false;\n-  Notification note;\n+  absl::Notification note;\n   br_->ProvideBuf(\n       *kDefaultKey, default_device_, fake_device_context_, &a_, aa_,\n       [&note, &prod_status, &prod_callback_called](const absl::Status& s) {"
        },
        {
            "sha": "59da0b3aad8a57a2b42f1f098e66145c8edf4d22",
            "filename": "tensorflow/core/common_runtime/collective_executor_mgr_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_executor_mgr_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_executor_mgr_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_executor_mgr_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -14,12 +14,12 @@ limitations under the License.\n ==============================================================================*/\n #include \"tensorflow/core/common_runtime/collective_executor_mgr.h\"\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/collective_param_resolver_local.h\"\n #include \"tensorflow/core/common_runtime/device.h\"\n #include \"tensorflow/core/common_runtime/device_factory.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n #include \"tensorflow/core/common_runtime/device_resolver_local.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/status.h\"\n #include \"tensorflow/core/lib/core/status_test_util.h\"\n #include \"tensorflow/core/nccl/collective_communicator.h\"\n@@ -80,7 +80,7 @@ TEST_F(CollectiveExecutorMgrTest, FindOrCreate) {\n \n TEST_F(CollectiveExecutorMgrTest, StepSequenceRelated) {\n   EXPECT_EQ(CollectiveExecutor::kInvalidId, cme_->NextStepId(123));\n-  Notification ss_note;\n+  absl::Notification ss_note;\n   absl::Status ss_status;\n   cme_->RefreshStepIdSequenceAsync(\n       123, [&ss_status, &ss_note](const absl::Status& s) {\n@@ -91,7 +91,7 @@ TEST_F(CollectiveExecutorMgrTest, StepSequenceRelated) {\n   EXPECT_FALSE(ss_status.ok());\n   EXPECT_EQ(ss_status.message(),\n             \"CollectiveExecutorMgr does not implement RefreshStepIdSequence.\");\n-  Notification gs_note;\n+  absl::Notification gs_note;\n   absl::Status gs_status;\n   GetStepSequenceRequest* req = nullptr;\n   GetStepSequenceResponse* resp = nullptr;"
        },
        {
            "sha": "90247c7a92fdf1cfbdf6f4f0a5859e7e31ca9415",
            "filename": "tensorflow/core/common_runtime/collective_param_resolver_local_test.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_param_resolver_local_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_param_resolver_local_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_param_resolver_local_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -17,6 +17,7 @@ limitations under the License.\n #include <atomic>\n \n #include \"absl/strings/str_join.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/collective_executor_mgr.h\"\n #include \"tensorflow/core/common_runtime/device.h\"\n #include \"tensorflow/core/common_runtime/device_factory.h\"\n@@ -25,7 +26,6 @@ limitations under the License.\n #include \"tensorflow/core/framework/cancellation.h\"\n #include \"tensorflow/core/framework/collective.h\"\n #include \"tensorflow/core/framework/device_attributes.pb.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/status.h\"\n #include \"tensorflow/core/lib/core/status_test_util.h\"\n #include \"tensorflow/core/platform/blocking_counter.h\"\n@@ -163,7 +163,7 @@ TEST_F(CollectiveParamResolverLocalTest, CompleteDefaultRanking) {\n TEST_F(CollectiveParamResolverLocalTest, CompleteParamsReduction1Task) {\n   CollectiveParams* cps[NUM_DEVS];\n   absl::Status statuses[NUM_DEVS];\n-  Notification note[NUM_DEVS];\n+  absl::Notification note[NUM_DEVS];\n   for (int i = 0; i < NUM_DEVS; ++i) {\n     cps[i] = new CollectiveParams();\n     CollectiveParams* cp = cps[i];\n@@ -227,7 +227,7 @@ TEST_F(CollectiveParamResolverLocalTest, CompleteParamsBroadcast1Task) {\n   constexpr int kInstanceKey = 5;\n   CollectiveParams* cps[NUM_DEVS];\n   absl::Status statuses[NUM_DEVS];\n-  Notification note[NUM_DEVS];\n+  absl::Notification note[NUM_DEVS];\n   for (int i = 0; i < NUM_DEVS; ++i) {\n     cps[i] = new CollectiveParams();\n     CollectiveParams* cp = cps[i];\n@@ -269,7 +269,7 @@ TEST_F(CollectiveParamResolverLocalTest, CompleteParamsBroadcastForgotSender) {\n   constexpr int kInstanceKey = 8;\n   CollectiveParams* cps[NUM_DEVS];\n   absl::Status statuses[NUM_DEVS];\n-  Notification note[NUM_DEVS];\n+  absl::Notification note[NUM_DEVS];\n   for (int i = 0; i < NUM_DEVS; ++i) {\n     cps[i] = new CollectiveParams();\n     CollectiveParams* cp = cps[i];\n@@ -423,7 +423,7 @@ TEST_F(CollectiveParamResolverLocalTest, CompleteParamsAfterAbortion) {\n \n   auto complete_params = [this, &cancel_mgr](int group_key, int instance_key) {\n     string device = \"/job:localhost/replica:0/task:0/device:CPU:0\";\n-    Notification done;\n+    absl::Notification done;\n     auto* cp = MakeCollectiveParams(group_key, instance_key,\n                                     /*is_source*/ true);\n     core::ScopedUnref unref(cp);\n@@ -462,7 +462,7 @@ TEST_F(CollectiveParamResolverLocalTest, AbortNormalCompleteParamsAsync) {\n             int key = 100;\n             while (true) {\n               absl::Status status;\n-              Notification n;\n+              absl::Notification n;\n               auto* cp =\n                   MakeCollectiveParams(/* group_key*/ key, /*instance_key*/ key,\n                                        /*is_source*/ i == 0);"
        },
        {
            "sha": "95a10d1cd4b21d114db9e86bc488c22934dc04f5",
            "filename": "tensorflow/core/common_runtime/collective_rma_local_test.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_rma_local_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_rma_local_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_rma_local_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -14,14 +14,14 @@ limitations under the License.\n ==============================================================================*/\n #include \"tensorflow/core/common_runtime/collective_rma_local.h\"\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/buf_rendezvous.h\"\n #include \"tensorflow/core/common_runtime/collective_param_resolver_local.h\"\n #include \"tensorflow/core/common_runtime/device.h\"\n #include \"tensorflow/core/common_runtime/device_factory.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n #include \"tensorflow/core/common_runtime/device_resolver_local.h\"\n #include \"tensorflow/core/common_runtime/dma_helper.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/status.h\"\n #include \"tensorflow/core/lib/core/status_test_util.h\"\n #include \"tensorflow/core/platform/test.h\"\n@@ -72,7 +72,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, PostRecvCPU0) {\n   DeviceLocality dev_locality;\n   TF_ASSERT_OK(device_mgr_->LookupDevice(kTaskName + \"/device:CPU:0\", &cpu0));\n   Tensor sink_tensor(DT_FLOAT, TensorShape({8}));\n-  Notification recv_note;\n+  absl::Notification recv_note;\n   absl::Status recv_status;\n   rma_->RecvFromPeer(kTaskName + \"/device:CPU:0\", kTaskName, true /*is_local*/,\n                      \"key_0\", cpu0 /*to_device*/, nullptr /*to_device_ctx*/,\n@@ -88,7 +88,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, PostRecvCPU0) {\n   }\n   // Tensors have distinct storage.\n   EXPECT_NE(DMAHelper::base(&source_tensor), DMAHelper::base(&sink_tensor));\n-  Notification send_note;\n+  absl::Notification send_note;\n   absl::Status send_status;\n   rma_->PostToPeer(kTaskName + \"/device:CPU:0\", kTaskName, \"key_0\",\n                    cpu0 /*from_device*/, nullptr /*from_device_ctx*/,\n@@ -116,7 +116,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, PostRecvCPU1_2) {\n   DeviceLocality dev_locality;\n   TF_ASSERT_OK(device_mgr_->LookupDevice(kTaskName + \"/device:CPU:2\", &cpu2));\n   Tensor sink_tensor(DT_FLOAT, TensorShape({8}));\n-  Notification recv_note;\n+  absl::Notification recv_note;\n   absl::Status recv_status;\n   rma_->RecvFromPeer(kTaskName + \"/device:CPU:1\", kTaskName, true /*is_local*/,\n                      \"key_0\", cpu2 /*to_device*/, nullptr /*to_device_ctx*/,\n@@ -134,7 +134,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, PostRecvCPU1_2) {\n   EXPECT_NE(DMAHelper::base(&source_tensor), DMAHelper::base(&sink_tensor));\n   Device* cpu1 = nullptr;\n   TF_ASSERT_OK(device_mgr_->LookupDevice(kTaskName + \"/device:CPU:1\", &cpu1));\n-  Notification send_note;\n+  absl::Notification send_note;\n   absl::Status send_status;\n   rma_->PostToPeer(kTaskName + \"/device:CPU:2\", kTaskName, \"key_0\",\n                    cpu1 /*from_device*/, nullptr /*from_device_ctx*/,\n@@ -158,7 +158,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, PostRecvCPU1_2) {\n \n TEST_F(CollectiveRemoteAccessLocalTest, CheckHealth) {\n   absl::Status status;\n-  Notification done;\n+  absl::Notification done;\n   rma_->CheckPeerHealth(kTaskName, /*timeout_in_ms=*/0,\n                         [&status, &done](const absl::Status& s) {\n                           status = s;\n@@ -174,7 +174,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, RecvThenCancel) {\n   DeviceLocality dev_locality;\n   TF_ASSERT_OK(device_mgr_->LookupDevice(kTaskName + \"/device:CPU:0\", &cpu0));\n   Tensor sink_tensor(DT_FLOAT, TensorShape({8}));\n-  Notification recv_note;\n+  absl::Notification recv_note;\n   absl::Status recv_status;\n   rma_->RecvFromPeer(kTaskName + \"/device:CPU:0\", kTaskName, true /*is_local*/,\n                      \"key_0\", cpu0 /*to_device*/, nullptr /*to_device_ctx*/,\n@@ -196,7 +196,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, CancelThenRecv) {\n   DeviceLocality dev_locality;\n   TF_ASSERT_OK(device_mgr_->LookupDevice(kTaskName + \"/device:CPU:0\", &cpu0));\n   Tensor sink_tensor(DT_FLOAT, TensorShape({8}));\n-  Notification recv_note;\n+  absl::Notification recv_note;\n   absl::Status recv_status;\n   cm_->StartCancel();\n   rma_->RecvFromPeer(kTaskName + \"/device:CPU:0\", kTaskName, true /*is_local*/,\n@@ -218,7 +218,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, PostThenCancel) {\n   DeviceLocality dev_locality;\n   TF_ASSERT_OK(device_mgr_->LookupDevice(kTaskName + \"/device:CPU:0\", &cpu0));\n   Tensor source_tensor(DT_FLOAT, TensorShape({8}));\n-  Notification send_note;\n+  absl::Notification send_note;\n   absl::Status send_status;\n   rma_->PostToPeer(kTaskName + \"/device:CPU:0\", kTaskName, \"key_0\",\n                    cpu0 /*from_device*/, nullptr /*from_device_ctx*/,\n@@ -240,7 +240,7 @@ TEST_F(CollectiveRemoteAccessLocalTest, CancelThenPost) {\n   DeviceLocality dev_locality;\n   TF_ASSERT_OK(device_mgr_->LookupDevice(kTaskName + \"/device:CPU:0\", &cpu0));\n   Tensor source_tensor(DT_FLOAT, TensorShape({8}));\n-  Notification send_note;\n+  absl::Notification send_note;\n   absl::Status send_status;\n   cm_->StartCancel();\n   rma_->PostToPeer(kTaskName + \"/device:CPU:0\", kTaskName, \"key_0\","
        },
        {
            "sha": "cb55bc1aa39cd9548ccff4a508c828aa3bb3cfc9",
            "filename": "tensorflow/core/common_runtime/collective_test_util.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_test_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_test_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fcollective_test_util.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -365,7 +365,7 @@ absl::Status RunCollective(CollectiveTestEnv* test_env,\n \n   // Run the collective.\n   absl::Status status;\n-  Notification n;\n+  absl::Notification n;\n   collective_impl->Run([&status, &n](absl::Status s) {\n     status = s;\n     n.Notify();"
        },
        {
            "sha": "9da5ce9831d423639275fbcc546280af86cd1cd9",
            "filename": "tensorflow/core/common_runtime/direct_session.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -22,6 +22,7 @@ limitations under the License.\n \n #include \"absl/container/flat_hash_set.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"absl/time/time.h\"\n #include \"absl/types/optional.h\"\n #include \"xla/tsl/platform/errors.h\"\n@@ -751,7 +752,7 @@ absl::Status DirectSession::RunInternal(\n     args.rendezvous = rendezvous.get();\n \n     // `barrier` will delete itself after the final executor finishes.\n-    Notification executors_done;\n+    absl::Notification executors_done;\n     ExecutorBarrier* barrier = new ExecutorBarrier(\n         num_executors, rendezvous.get(),\n         [&run_state, &executors_done](const absl::Status& ret) {\n@@ -1836,7 +1837,8 @@ bool DirectSession::PartialRunState::PendingDone() const {\n   return true;\n }\n \n-void DirectSession::WaitForNotification(Notification* n, RunState* run_state,\n+void DirectSession::WaitForNotification(absl::Notification* n,\n+                                        RunState* run_state,\n                                         CancellationManager* cm,\n                                         int64_t timeout_in_ms) {\n   const absl::Status status = WaitForNotification(n, timeout_in_ms);\n@@ -1853,8 +1855,8 @@ void DirectSession::WaitForNotification(Notification* n, RunState* run_state,\n   }\n }\n \n-absl::Status DirectSession::WaitForNotification(Notification* notification,\n-                                                int64_t timeout_in_ms) {\n+absl::Status DirectSession::WaitForNotification(\n+    absl::Notification* notification, int64_t timeout_in_ms) {\n   if (timeout_in_ms > 0) {\n     const bool notified = notification->WaitForNotificationWithTimeout(\n         absl::Milliseconds(timeout_in_ms));"
        },
        {
            "sha": "1e0a9bc4514080125aac1c04304b9ece2758d76c",
            "filename": "tensorflow/core/common_runtime/direct_session.h",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session.h?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -23,6 +23,7 @@ limitations under the License.\n #include <unordered_set>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/costmodel_manager.h\"\n #include \"tensorflow/core/common_runtime/debugger_state_interface.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n@@ -212,7 +213,7 @@ class DirectSession : public Session {\n   // are the set of pending feeds and 'pending_outputs' are the set of pending\n   // fetches.\n   struct PartialRunState : public RunState {\n-    Notification executors_done;\n+    absl::Notification executors_done;\n     std::unordered_map<string, bool> pending_inputs;   // true if fed\n     std::unordered_map<string, bool> pending_outputs;  // true if fetched\n     core::RefCountPtr<IntraProcessRendezvous> rendez = nullptr;\n@@ -305,8 +306,9 @@ class DirectSession : public Session {\n   // operation_timeout_in_ms is greater than 0.\n   //\n   // If the timeout expires, the `cm->StartCancel()` will be called.\n-  absl::Status WaitForNotification(Notification* n, int64_t timeout_in_ms);\n-  void WaitForNotification(Notification* n, RunState* run_state,\n+  absl::Status WaitForNotification(absl::Notification* n,\n+                                   int64_t timeout_in_ms);\n+  void WaitForNotification(absl::Notification* n, RunState* run_state,\n                            CancellationManager* cm, int64_t timeout_in_ms);\n \n   absl::Status CheckNotClosed() {"
        },
        {
            "sha": "f4e3a645315573f08d05b570a0869ae00d22abea",
            "filename": "tensorflow/core/common_runtime/direct_session_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fdirect_session_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -29,6 +29,7 @@ limitations under the License.\n #include \"absl/status/status.h\"\n #include \"absl/strings/match.h\"\n #include \"absl/strings/str_format.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n #include \"xla/tsl/platform/status_matchers.h\"\n #include \"tensorflow/core/common_runtime/device_factory.h\"\n@@ -2056,9 +2057,9 @@ class CancellationMgrPollingOp : public OpKernel {\n     }\n     notification.Notify();\n   }\n-  static Notification notification;\n+  static absl::Notification notification;\n };\n-Notification CancellationMgrPollingOp::notification;\n+absl::Notification CancellationMgrPollingOp::notification;\n \n REGISTER_KERNEL_BUILDER(Name(\"CancellationMgrPollingOp\").Device(DEVICE_CPU),\n                         CancellationMgrPollingOp);"
        },
        {
            "sha": "c6284e36fa120d71b9414266ba2fef407b82b2f6",
            "filename": "tensorflow/core/common_runtime/dynamic_device_mgr_test.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fdynamic_device_mgr_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fdynamic_device_mgr_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fdynamic_device_mgr_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -17,6 +17,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/memory/memory.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n #include \"tensorflow/core/framework/device_attributes.pb.h\"\n #include \"tensorflow/core/lib/core/status.h\"\n@@ -30,7 +31,7 @@ namespace {\n \n // Return a fake device with the specified type and name.\n static Device* CreateDevice(const char* type, const char* name,\n-                            Notification* n = nullptr) {\n+                            absl::Notification* n = nullptr) {\n   class FakeDevice : public Device {\n    public:\n     explicit FakeDevice(const DeviceAttributes& attr) : Device(nullptr, attr) {}\n@@ -41,12 +42,12 @@ static Device* CreateDevice(const char* type, const char* name,\n   class FakeDeviceWithDestructorNotification : public FakeDevice {\n    public:\n     FakeDeviceWithDestructorNotification(const DeviceAttributes& attr,\n-                                         Notification* n)\n+                                         absl::Notification* n)\n         : FakeDevice(attr), n_(n) {}\n     ~FakeDeviceWithDestructorNotification() override { n_->Notify(); }\n \n    private:\n-    Notification* n_;\n+    absl::Notification* n_;\n   };\n \n   DeviceAttributes attr;\n@@ -105,7 +106,7 @@ TEST(DynamicDeviceMgrTest, RemoveDeviceFromMgr) {\n \n TEST(DynamicDeviceMgrTest, RemoveDeviceFromMgrBuffer) {\n   // Create a device whose destructor will send a notification.\n-  Notification n;\n+  absl::Notification n;\n   std::unique_ptr<Device> d0(CreateDevice(\"CPU\", \"/device:CPU:0\", &n));\n   Device* d0_ptr = d0.get();\n   std::vector<std::unique_ptr<Device>> added_devices;"
        },
        {
            "sha": "850d48694c19825a9423b9683d7bddbd240dc7d6",
            "filename": "tensorflow/core/common_runtime/executor.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fexecutor.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fexecutor.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fexecutor.h?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n \n #include <optional>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"absl/time/time.h\"\n #include \"absl/types/optional.h\"\n #include \"tensorflow/core/common_runtime/device.h\"\n@@ -138,7 +139,7 @@ class Executor {\n   // Synchronous wrapper for RunAsync().\n   virtual absl::Status Run(const Args& args) {\n     absl::Status ret;\n-    Notification n;\n+    absl::Notification n;\n     RunAsync(args, [&ret, &n](const absl::Status& s) {\n       ret = s;\n       n.Notify();"
        },
        {
            "sha": "08898cc8052396e952affe5962009a0a25701152",
            "filename": "tensorflow/core/common_runtime/function_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Ffunction_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Ffunction_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Ffunction_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -26,6 +26,7 @@ limitations under the License.\n #include \"absl/status/status.h\"\n #include \"absl/strings/numbers.h\"\n #include \"absl/strings/str_split.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/cc/ops/array_ops_internal.h\"\n #include \"tensorflow/cc/ops/function_ops.h\"\n #include \"tensorflow/cc/ops/functional_ops.h\"\n@@ -201,7 +202,7 @@ class FunctionLibraryRuntimeTest : public ::testing::Test {\n           test::function::FunctionTestSchedClosure(fn);\n         };\n     opts.runner = &runner;\n-    Notification done;\n+    absl::Notification done;\n     std::vector<Tensor> out;\n     absl::Status status;\n     flr->Run(opts, handle, args, &out, [&status, &done](const absl::Status& s) {\n@@ -279,7 +280,7 @@ class FunctionLibraryRuntimeTest : public ::testing::Test {\n           test::function::FunctionTestSchedClosure(fn);\n         };\n     opts.runner = &runner;\n-    Notification done;\n+    absl::Notification done;\n     absl::Status status;\n     flr->Run(opts, handle, frame, [&status, &done](const absl::Status& s) {\n       status = s;"
        },
        {
            "sha": "e28eb03fd8787b8f484fece91391c707d9808717",
            "filename": "tensorflow/core/common_runtime/function_threadpool_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Ffunction_threadpool_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Ffunction_threadpool_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Ffunction_threadpool_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -16,6 +16,7 @@ limitations under the License.\n #include <atomic>\n #include <utility>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/cc/ops/array_ops_internal.h\"\n #include \"tensorflow/cc/ops/function_ops.h\"\n #include \"tensorflow/cc/ops/functional_ops.h\"\n@@ -91,7 +92,7 @@ class FunctionLibraryRuntimeTest : public ::testing::Test {\n     } else {\n       opts.runner = nullptr;\n     }\n-    Notification done;\n+    absl::Notification done;\n     std::vector<Tensor> out;\n     absl::Status status;\n     flr->Run(opts, handle, args, &out, [&status, &done](const absl::Status& s) {\n@@ -181,7 +182,7 @@ class FunctionLibraryRuntimeTest : public ::testing::Test {\n     } else {\n       opts.runner = nullptr;\n     }\n-    Notification done;\n+    absl::Notification done;\n     absl::Status status;\n     flr->Run(opts, handle, frame, [&status, &done](const absl::Status& s) {\n       status = s;"
        },
        {
            "sha": "eccea063ad5abf55695f15219cf900459df67a9c",
            "filename": "tensorflow/core/common_runtime/hierarchical_tree_broadcaster.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fhierarchical_tree_broadcaster.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fhierarchical_tree_broadcaster.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fhierarchical_tree_broadcaster.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <string>\n #include <utility>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/collective_rma_local.h\"\n #include \"tensorflow/core/common_runtime/collective_util.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n@@ -320,7 +321,7 @@ void HierarchicalTreeBroadcaster::RunTree() {\n           [&] { return strings::StrCat(\"ReceiveValue:\", si); },\n           tsl::profiler::TraceMeLevel::kInfo);\n       int recv_from_rank = TreeRecvFrom(*col_params_, si);\n-      Notification note;\n+      absl::Notification note;\n       DispatchRecv(si, recv_from_rank, my_rank, col_ctx_->output,\n                    [this, &mu, &note](const absl::Status& s) {\n                      mutex_lock l(mu);"
        },
        {
            "sha": "98af5aedeedee1b6e98044ac19a22d3cc37720fd",
            "filename": "tensorflow/core/common_runtime/process_function_library_runtime.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -27,6 +27,7 @@ limitations under the License.\n #include \"absl/container/flat_hash_map.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/str_cat.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"absl/types/optional.h\"\n #include \"absl/types/variant.h\"\n #include \"xla/tsl/platform/status.h\"\n@@ -797,7 +798,7 @@ absl::Status ProcessFunctionLibraryRuntime::InstantiateMultiDevice(\n     counter.Wait();\n   } else {\n     for (auto& pair : *subgraphs) {\n-      Notification n;\n+      absl::Notification n;\n       absl::Status* status = &instantiate_status[i];\n       ComponentFunctionData* comp_data = &data->glue_[pair.first];\n       comp_data->name = name_generator.GetName();\n@@ -1019,7 +1020,7 @@ absl::Status ProcessFunctionLibraryRuntime::RunMultiDeviceSync(\n       VLOG(4) << \"    with \" << opts_copy.DebugString();\n \n       std::vector<std::unique_ptr<CleanUpItem>> cleanup_items;\n-      Notification n;\n+      absl::Notification n;\n       absl::Status s;\n       std::vector<FunctionRet> comp_rets;\n       RunInternal(opts_copy, comp_handle, comp_args.args, &comp_rets,\n@@ -1160,7 +1161,7 @@ absl::Status ProcessFunctionLibraryRuntime::Instantiate(\n   }\n \n   absl::Status status;\n-  Notification notification;\n+  absl::Notification notification;\n   InstantiateRemote(function_name, attrs, options, handle,\n                     [&status, &notification](const absl::Status& s) {\n                       status = s;\n@@ -1613,7 +1614,7 @@ absl::Status ProcessFunctionLibraryRuntime::RunSync(\n   } else {\n     // TODO(b/207484417): Either handle or avoid/delete this fallback path.\n     metrics::IncrementTestCounter(\"pflr_runsync\", \"async\");\n-    Notification n;\n+    absl::Notification n;\n     absl::Status s;\n     Run(orig_opts, handle, args, rets, [&n, &s](const absl::Status& status) {\n       s.Update(status);\n@@ -1628,7 +1629,7 @@ absl::Status ProcessFunctionLibraryRuntime::RunSync(\n     const FunctionLibraryRuntime::Options& opts,\n     FunctionLibraryRuntime::Handle handle, CallFrameInterface* frame) const {\n   // TODO(b/207485199): Implement this as synchronous code.\n-  Notification n;\n+  absl::Notification n;\n   absl::Status s;\n   Run(opts, handle, frame, [&n, &s](const absl::Status& status) {\n     s.Update(status);"
        },
        {
            "sha": "0305bde12e6cba2bc5056830f33aa627281a8f05",
            "filename": "tensorflow/core/common_runtime/process_function_library_runtime.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime.h?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -22,6 +22,7 @@ limitations under the License.\n #include <unordered_map>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/composite_device.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n #include \"tensorflow/core/common_runtime/device_set.h\"\n@@ -494,7 +495,7 @@ class ProcessFunctionLibraryRuntime {\n     bool is_cross_process_ TF_GUARDED_BY(mu_) = false;\n     bool init_started_ TF_GUARDED_BY(mu_) = false;\n     absl::Status init_result_ TF_GUARDED_BY(mu_);\n-    Notification init_done_;\n+    absl::Notification init_done_;\n   };\n \n   mutable mutex mu_;"
        },
        {
            "sha": "677b84187a31dadd929dc0be34378fb227cad3f6",
            "filename": "tensorflow/core/common_runtime/process_function_library_runtime_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fprocess_function_library_runtime_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n #include <unordered_map>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/composite_device.h\"\n #include \"tensorflow/core/common_runtime/device_factory.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n@@ -232,7 +233,7 @@ class ProcessFunctionLibraryRuntimeTest : public ::testing::Test {\n         [](std::function<void()> fn) {\n           test::function::FunctionTestSchedClosure(fn);\n         };\n-    Notification done;\n+    absl::Notification done;\n     opts.runner = &runner;\n     std::vector<K> out;\n     pflr->Run(opts, handle, args, &out,\n@@ -255,7 +256,7 @@ class ProcessFunctionLibraryRuntimeTest : public ::testing::Test {\n     if (!status.ok()) {\n       return status;\n     }\n-    Notification done2;\n+    absl::Notification done2;\n     pflr->Run(opts, handle, args, &out,\n               [&status, &done2](const absl::Status& s) {\n                 status = s;\n@@ -299,7 +300,7 @@ class ProcessFunctionLibraryRuntimeTest : public ::testing::Test {\n \n     opts.runner = &runner;\n     absl::Status status;\n-    Notification done;\n+    absl::Notification done;\n     std::vector<Tensor> out;\n     proc_flr_->Run(opts, handle, args, &out,\n                    [&status, &done](const absl::Status& s) {"
        },
        {
            "sha": "484746ce416f0b3f8144d91002abde6f6db56918",
            "filename": "tensorflow/core/common_runtime/rendezvous_util_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Frendezvous_util_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Frendezvous_util_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Frendezvous_util_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -14,6 +14,7 @@ limitations under the License.\n ==============================================================================*/\n #include \"tensorflow/core/common_runtime/rendezvous_util.h\"\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/status_test_util.h\"\n #include \"tensorflow/core/platform/test.h\"\n@@ -56,7 +57,7 @@ TEST_F(RendezvousUtilTest, SendBeforeRecv) {\n       rendez_, nullptr, {}, {MakeStringKey(\"hello1\"), MakeStringKey(\"hello2\")},\n       {V(\"hello1\"), V(\"hello2\")}));\n \n-  Notification n;\n+  absl::Notification n;\n   std::vector<Tensor> received_keys;\n   RecvOutputsFromRendezvousAsync(\n       rendez_, nullptr, {}, {MakeStringKey(\"hello1\"), MakeStringKey(\"hello2\")},\n@@ -70,7 +71,7 @@ TEST_F(RendezvousUtilTest, SendBeforeRecv) {\n \n TEST_F(RendezvousUtilTest, RecvBeforeSend) {\n   // Fire off recvs, wait for a notification in the callback.\n-  Notification n;\n+  absl::Notification n;\n   std::vector<Tensor> received_keys;\n   RecvOutputsFromRendezvousAsync(\n       rendez_, nullptr, {}, {MakeStringKey(\"hello1\"), MakeStringKey(\"hello2\")},\n@@ -101,7 +102,7 @@ TEST(RendezvousUtilCallerThreadTest, RecvBeforeSend) {\n   Rendezvous* rendez_ = NewLocalRendezvous();\n \n   // Fire off recvs, wait for a notification in the callback.\n-  Notification n;\n+  absl::Notification n;\n   std::vector<Tensor> received_keys;\n   RecvOutputsFromRendezvousAsync(\n       rendez_, nullptr, {}, {MakeStringKey(\"hello1\"), MakeStringKey(\"hello2\")},"
        },
        {
            "sha": "d2294f830db2c1453604a6b2be51cffee7dc1176",
            "filename": "tensorflow/core/common_runtime/ring_alg.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fring_alg.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fring_alg.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fring_alg.h?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <string>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/base_collective_executor.h\"\n #include \"tensorflow/core/framework/collective.h\"\n \n@@ -110,7 +111,7 @@ class RingAlg : public CollectiveImplementationInterface {\n   int group_size_;\n   int num_subdivs_;\n   Tensor group_size_tensor_;\n-  Notification group_size_tensor_ready_;\n+  absl::Notification group_size_tensor_ready_;\n   std::unique_ptr<CollectiveAdapter> ca_;\n   mutex status_mu_;\n   absl::Status status_ TF_GUARDED_BY(status_mu_);"
        },
        {
            "sha": "bc016b366696d438b88caa096ef596adb0216d01",
            "filename": "tensorflow/core/common_runtime/ring_gatherer.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fring_gatherer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fring_gatherer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fring_gatherer.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <functional>\n #include <utility>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/collective_rma_local.h\"\n #include \"tensorflow/core/common_runtime/collective_util.h\"\n #include \"tensorflow/core/common_runtime/copy_tensor.h\"\n@@ -33,7 +34,6 @@ limitations under the License.\n #include \"tensorflow/core/framework/tensor.h\"\n #include \"tensorflow/core/framework/types.h\"\n #include \"tensorflow/core/lib/core/errors.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/status.h\"\n #include \"tensorflow/core/lib/strings/str_util.h\"\n #include \"tensorflow/core/lib/strings/strcat.h\"\n@@ -102,7 +102,7 @@ void RingGatherer::Run(StatusCallback done) {\n   {\n     tsl::profiler::TraceMe activity(\"MemCpyAsync\",\n                                     tsl::profiler::TraceMeLevel::kInfo);\n-    Notification note;\n+    absl::Notification note;\n     absl::Status status;\n     Tensor alias_chunk(ca_->ChunkAlias(col_params_->subdiv_rank[0]));\n     CollectiveRemoteAccessLocal::MemCpyAsync(\n@@ -148,7 +148,7 @@ bool RingGatherer::RunAsyncParts() {\n     // write) unless we do.\n     tsl::profiler::TraceMe activity(\"WaitForQueuedEvents\",\n                                     tsl::profiler::TraceMeLevel::kInfo);\n-    Notification note;\n+    absl::Notification note;\n     absl::Status s = gpu_info->default_context->ThenExecute(\n         col_ctx_->device, gpu_info->stream, [&note]() { note.Notify(); });\n     if (s.ok()) {"
        },
        {
            "sha": "c448f021f055f0ef89d9eb910e54faaf4771b3fa",
            "filename": "tensorflow/core/common_runtime/ring_reducer.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fring_reducer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fring_reducer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fring_reducer.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <functional>\n #include <utility>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/collective_rma_local.h\"\n #include \"tensorflow/core/common_runtime/collective_util.h\"\n #include \"tensorflow/core/common_runtime/copy_tensor.h\"\n@@ -33,7 +34,6 @@ limitations under the License.\n #include \"tensorflow/core/framework/tensor.h\"\n #include \"tensorflow/core/framework/types.h\"\n #include \"tensorflow/core/lib/core/errors.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/status.h\"\n #include \"tensorflow/core/lib/strings/str_util.h\"\n #include \"tensorflow/core/lib/strings/strcat.h\"\n@@ -92,7 +92,7 @@ void RingReducer::Run(StatusCallback done) {\n       (DMAHelper::base(col_ctx_->input) != DMAHelper::base(col_ctx_->output))) {\n     // We are running in a blockable thread and the callback can't block so\n     // just wait here on the copy.\n-    Notification note;\n+    absl::Notification note;\n     absl::Status status;\n     tsl::profiler::TraceMe activity(\"MemCpyAsync\",\n                                     tsl::profiler::TraceMeLevel::kInfo);\n@@ -198,7 +198,7 @@ bool RingReducer::RunAsyncParts() {\n     // write) unless we do.\n     tsl::profiler::TraceMe activity(\"WaitForQueuedEvents\",\n                                     tsl::profiler::TraceMeLevel::kInfo);\n-    Notification note;\n+    absl::Notification note;\n     absl::Status s = gpu_info->default_context->ThenExecute(\n         col_ctx_->device, gpu_info->stream, [&note]() { note.Notify(); });\n     if (s.ok()) {"
        },
        {
            "sha": "a6a16b9032b98234af54de0800db41e6a4b0fda4",
            "filename": "tensorflow/core/common_runtime/ring_reducer.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fring_reducer.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fring_reducer.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fring_reducer.h?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <string>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/base_collective_executor.h\"\n #include \"tensorflow/core/common_runtime/ring_alg.h\"\n #include \"tensorflow/core/framework/collective.h\"\n@@ -51,7 +52,7 @@ class RingReducer : public RingAlg {\n   bool RunAsyncParts();\n \n   Tensor group_size_tensor_;\n-  Notification group_size_tensor_ready_;\n+  absl::Notification group_size_tensor_ready_;\n \n   friend class RingReducerTest;\n   friend class RingReducerInitParamsTest;"
        },
        {
            "sha": "1d7978f33326559ce8956845fbb10a0f6a084b09",
            "filename": "tensorflow/core/common_runtime/threadpool_device_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8b141e52e121a67e60a85df3124449e2f44a9dde/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fthreadpool_device_test.cc?ref=8b141e52e121a67e60a85df3124449e2f44a9dde",
            "patch": "@@ -15,6 +15,7 @@ limitations under the License.\n \n #include \"tensorflow/core/common_runtime/threadpool_device.h\"\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/lib/core/status_test_util.h\"\n #include \"tensorflow/core/platform/test.h\"\n #include \"tensorflow/core/public/session_options.h\"\n@@ -56,7 +57,7 @@ TEST(ThreadPoolDeviceTest, CopyTensor) {\n   ThreadPoolDevice device(SessionOptions(), \"/device:CPU:0\", Bytes(256),\n                           DeviceLocality(), cpu_allocator());\n   DeviceContext* device_context = new DeviceContext;\n-  Notification note;\n+  absl::Notification note;\n   device.CopyTensorInSameDevice(&input, &output, device_context,\n                                 [&note](const absl::Status& s) {\n                                   TF_ASSERT_OK(s);"
        }
    ],
    "stats": {
        "total": 185,
        "additions": 111,
        "deletions": 74
    }
}