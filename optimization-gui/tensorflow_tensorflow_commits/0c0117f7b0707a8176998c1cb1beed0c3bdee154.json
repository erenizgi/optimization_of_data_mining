{
    "author": "junwhanahn",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 850793477",
    "sha": "0c0117f7b0707a8176998c1cb1beed0c3bdee154",
    "files": [
        {
            "sha": "8927ad725aec2f972e00e89f6309052bf5a6cbc8",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/array.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Farray.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Farray.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Farray.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -451,7 +451,7 @@ tsl::Future<> Array::GetReadyFuture() const {\n   auto req = std::make_unique<CheckValueReadyRequest>();\n   req->add_value_handles(handle_.handle);\n \n-  auto [promise, future] = tsl::Future<>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<>();\n   rpc_helper_->CheckValueReady(std::move(req))\n       .OnReady([promise = std::move(promise)](\n                    absl::StatusOr<std::shared_ptr<CheckValueReadyResponse>>\n@@ -834,7 +834,7 @@ tsl::Future<> Array::CopyToStringHostBuffer(\n \n   const uint64_t host_buffer_handle = rpc_helper_->NextHandle();\n   req->set_host_buffer_handle(host_buffer_handle);\n-  auto [promise, future] = tsl::Future<>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<>();\n   auto on_ready = [promise = std::move(promise),\n                    host_buffer_store = rpc_helper_->host_buffer_store(),\n                    host_buffer_handle,\n@@ -900,7 +900,7 @@ tsl::Future<> Array::CopyToHostBuffer(\n   const uint64_t host_buffer_handle = rpc_helper_->NextHandle();\n   req->set_host_buffer_handle(host_buffer_handle);\n \n-  auto [promise, future] = tsl::Future<>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<>();\n   auto on_ready = [host_buffer_store = rpc_helper_->host_buffer_store(),\n                    promise = std::move(promise), host_buffer_handle,\n                    mem_region = mem_region->mem_region()]("
        },
        {
            "sha": "0edbb3e8a00bd24314338b0ddd0a5355207bf627",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/client.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -438,7 +438,7 @@ tsl::Future<> Client::GetReadyFuture(\n     }\n   }\n \n-  auto [promise, future] = tsl::Future<>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<>();\n   rpc_helper_->CheckValueReady(std::move(req))\n       .OnReady([promise = std::move(promise)](\n                    absl::StatusOr<std::shared_ptr<CheckValueReadyResponse>>"
        },
        {
            "sha": "bae619a79ffd28026f3124a6f11504607a6ed900",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/executable.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fexecutable.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fexecutable.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fexecutable.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -381,8 +381,7 @@ LoadedExecutable::LoadedExecutable(\n   // eagerly schedule this fetch since, in some implementations, it may take a\n   // long time for sharding information to be available.\n \n-  auto [promise, future] =\n-      tsl::Future<std::shared_ptr<Metadata>>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<std::shared_ptr<Metadata>>();\n   metadata_future_ = std::move(future);\n \n   auto req = std::make_unique<LoadedExecutableMetadataRequest>();"
        },
        {
            "sha": "d0ecd85fe2aa1178db5d0073c19c0385ce3747a3",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/grpc_client.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_client.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -67,7 +67,7 @@ absl::StatusOr<std::unique_ptr<Client>> AttemptConnection(\n     const ClientConnectionOptions& options) {\n   std::unique_ptr<RpcHelper> rpc_helper;\n   auto [init_response_promise, init_response_future] =\n-      tsl::Future<std::shared_ptr<InitResponse>>::MakePromise();\n+      tsl::MakePromise<std::shared_ptr<InitResponse>>();\n \n   // TODO(b/266635130): Move gRPC stub creation to be outside of `Client` so\n   // that we can pass mock `ClientSession` to the client."
        },
        {
            "sha": "802a62492b8d144406287233727b645b2e22106f",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/grpc_client_session.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_client_session.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_client_session.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_client_session.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -124,8 +124,7 @@ GrpcClientSession::GrpcClientSession(\n \n tsl::Future<std::shared_ptr<IfrtResponse>> GrpcClientSession::Enqueue(\n     std::unique_ptr<IfrtRequest> request) {\n-  auto [promise, future] =\n-      tsl::Future<std::shared_ptr<IfrtResponse>>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<std::shared_ptr<IfrtResponse>>();\n   auto shared_promise = std::move(promise).ToShared();\n   absl::Status status = Enqueue(\n       std::move(request),"
        },
        {
            "sha": "2fae5b5bf343447d279e3d5504d13f9d964559a3",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/grpc_host_buffer.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_host_buffer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_host_buffer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fgrpc_host_buffer.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -96,7 +96,7 @@ GrpcClientHostBufferStore::~GrpcClientHostBufferStore() {\n \n tsl::Future<> GrpcClientHostBufferStore::StoreToDisk(uint64_t handle,\n                                                      absl::string_view data) {\n-  auto [promise, future] = tsl::Future<>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<>();\n \n   XFlowHelper flow(\"GrpcClientHostBufferStore::StoreToDisk\");\n   flow.InstantActivity<XFlowHelper::kSend>();\n@@ -146,7 +146,7 @@ tsl::Future<> GrpcClientHostBufferStore::Store(uint64_t handle,\n     }\n   }\n \n-  auto [promise, future] = tsl::Future<>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<>();\n \n   XFlowHelper flow(\"GrpcClientHostBufferStore::StoreAsync\");\n   flow.InstantActivity<XFlowHelper::kSend>();\n@@ -247,7 +247,7 @@ tsl::Future<> GrpcClientHostBufferStore::Store(uint64_t handle,\n }\n \n tsl::Future<absl::Cord> GrpcClientHostBufferStore::Lookup(uint64_t handle) {\n-  auto [promise, future] = tsl::Future<absl::Cord>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<absl::Cord>();\n \n   XFlowHelper flow(\"GrpcClientHostBufferStore::Lookup\");\n   flow.InstantActivity<XFlowHelper::kSend>();"
        },
        {
            "sha": "7ca9af95b986b2b0695621e4edef9a111549b487",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/mpmd_executable.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fmpmd_executable.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fmpmd_executable.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fmpmd_executable.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -79,8 +79,7 @@ MpmdLoadedExecutable::MpmdLoadedExecutable(\n \n   tsl::profiler::TraceMe traceme_ifrt_entrypoint(\n       \"IfrtProxyEntrypointMpmdLoadedExecutableCreate\");\n-  auto [promise, future] =\n-      tsl::Future<std::shared_ptr<MpmdMetadata>>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<std::shared_ptr<MpmdMetadata>>();\n   mpmd_metadata_future_ = std::move(future);\n \n   auto req = std::make_unique<LoadedExecutableMpmdMetadataRequest>();"
        },
        {
            "sha": "b29c5e7fc737a5b44dff616e65d9ef67f7f2ce7b",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/rpc_helper.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Frpc_helper.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Frpc_helper.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Frpc_helper.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -358,7 +358,7 @@ tsl::Future<std::shared_ptr<Resp>> DoRpc(RpcHelper::Batcher* batcher,\n         std::move(tracked_user_context));\n   }\n \n-  auto [promise, future] = tsl::Future<std::shared_ptr<Resp>>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<std::shared_ptr<Resp>>();\n   auto on_ready = [promise = std::move(promise),\n                    user_contexts_referenced_by_proxy_server =\n                        std::move(user_contexts_referenced_by_proxy_server),\n@@ -490,7 +490,7 @@ tsl::Future<> RpcHelper::CheckFuture(uint64_t handle) {\n   auto req = std::make_unique<CheckFutureRequest>();\n   req->set_future_handle(handle);\n \n-  auto [promise, future] = tsl::Future<>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<>();\n   CheckFuture(std::move(req))\n       .OnReady([promise = std::move(promise)](\n                    absl::StatusOr<std::shared_ptr<CheckFutureResponse>>"
        },
        {
            "sha": "e9692e23f88fc265007ceeb5ae27121327c2c41f",
            "filename": "third_party/xla/xla/python/ifrt_proxy/server/host_buffer_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fhost_buffer_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fhost_buffer_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fhost_buffer_test.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -54,7 +54,7 @@ TEST(HostBufferStoreTest, WriteAfterReadStarted) {\n   const uint64_t kHandle = 1;\n \n   auto [lookup_promise, lookup_fut] =\n-      tsl::Future<HostBufferStore::MemRegion>::MakePromise();\n+      tsl::MakePromise<HostBufferStore::MemRegion>();\n \n   absl::Notification closure_started;\n   tsl::Env::Default()->SchedClosure(\n@@ -76,7 +76,7 @@ TEST(HostBufferStoreTest, ShutdownAfterReadStarted) {\n   const uint64_t kHandle = 1;\n \n   auto [lookup_promise, lookup_fut] =\n-      tsl::Future<HostBufferStore::MemRegion>::MakePromise();\n+      tsl::MakePromise<HostBufferStore::MemRegion>();\n \n   absl::Notification closure_started;\n   tsl::Env::Default()->SchedClosure([&, promise = std::move("
        },
        {
            "sha": "9773ee71ede921361fda7024f7f0ab8b3e0a0d2c",
            "filename": "third_party/xla/xla/python/ifrt_proxy/server/host_callback.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fhost_callback.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fhost_callback.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fhost_callback.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -165,7 +165,7 @@ absl::Status RemoteLoadedHostCallback::Execute(void** result_ptrs,\n   to_buffer(host_callback().results, result_ptrs, request.results);\n \n   tsl::Future<> status;\n-  std::tie(request.status, status) = tsl::Future<>::MakePromise();\n+  std::tie(request.status, status) = tsl::MakePromise<>();\n \n   // Enqueue the execution request. `IfrtBackend` retrieves this by calling\n   // `PopExecutionRequest` and fulfills the `results` promise."
        },
        {
            "sha": "04fb13f861a6d47e1f594878a4e111276a96c742",
            "filename": "third_party/xla/xla/python/ifrt_proxy/server/ifrt_backend.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -370,7 +370,7 @@ class IfrtBackend::InOrderRequestsProcessor {\n \n   tsl::Future<Response> Push(std::unique_ptr<IfrtRequest> request) {\n     VLOG(3) << \"Enqueuing \" << request->ShortDebugString();\n-    auto [promise, future] = tsl::Future<Response>::MakePromise();\n+    auto [promise, future] = tsl::MakePromise<Response>();\n     absl::MutexLock l(mu_);\n     if (shutdown_msg_.has_value()) {\n       promise.Set(absl::InternalError(absl::StrCat(\n@@ -723,7 +723,7 @@ tsl::Future<BackendInterface::Response> IfrtBackend::AsyncExecute(\n     absl::MutexLock lock(in_flight_count_mutex_);\n     ++in_flight_count_;\n   }\n-  auto [promise, future] = tsl::Future<Response>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<Response>();\n   auto f =\n       WithCurrentUserContext([this, promise = std::move(promise).ToShared(),\n                               handle_fn = std::move(handle_fn)]() mutable {"
        },
        {
            "sha": "14e6518da99b229be213f851ce39c5fba0a672a6",
            "filename": "third_party/xla/xla/python/ifrt_proxy/server/ifrt_backend_user_context_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend_user_context_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0c0117f7b0707a8176998c1cb1beed0c3bdee154/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend_user_context_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fserver%2Fifrt_backend_user_context_test.cc?ref=0c0117f7b0707a8176998c1cb1beed0c3bdee154",
            "patch": "@@ -41,7 +41,7 @@ TEST(IfrtBackendUserContextTest, CreateWithNonZeroId) {\n }\n \n TEST(IfrtBackendUserContextTest, DestroyUserContext) {\n-  auto [promise, future] = tsl::Future<UserContextId>::MakePromise();\n+  auto [promise, future] = tsl::MakePromise<UserContextId>();\n   {\n     UserContextRef user_context = IfrtBackendUserContext::Create(\n         UserContextId(100), [promise = std::move(promise)]("
        }
    ],
    "stats": {
        "total": 41,
        "additions": 19,
        "deletions": 22
    }
}