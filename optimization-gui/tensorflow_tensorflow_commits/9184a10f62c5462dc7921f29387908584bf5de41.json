{
    "author": "alexander-shaposhnikov",
    "message": "Fix the pipeline for YNN reduce fusions.\n\nPiperOrigin-RevId: 828980952",
    "sha": "9184a10f62c5462dc7921f29387908584bf5de41",
    "files": [
        {
            "sha": "4030b1635fadcf304d948ef14e7ea37b097b9bbd",
            "filename": "third_party/xla/xla/service/cpu/cpu_compiler.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9184a10f62c5462dc7921f29387908584bf5de41/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_compiler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9184a10f62c5462dc7921f29387908584bf5de41/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_compiler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_compiler.cc?ref=9184a10f62c5462dc7921f29387908584bf5de41",
            "patch": "@@ -504,6 +504,10 @@ std::unique_ptr<HloPassFix<HloPassPipeline>> CreateSimplificationPipeline(\n       !absl::c_contains(module->config()\n                             .debug_options()\n                             .xla_cpu_experimental_xnn_fusion_type(),\n+                        DebugOptions::LIBRARY_FUSION_TYPE_REDUCE) &&\n+      !absl::c_contains(module->config()\n+                            .debug_options()\n+                            .xla_cpu_experimental_ynn_fusion_type(),\n                         DebugOptions::LIBRARY_FUSION_TYPE_REDUCE)) {\n     // Needs to happen after algebraic simplifier.\n     pipeline->AddPass<TreeReductionRewriter>();"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}