{
    "author": "ermilovmaxim",
    "message": "switch from deprecated TF_CHECK_OK\n\nPiperOrigin-RevId: 837226805",
    "sha": "691416446e6db6d9d3f6f925aa4f311e6efc5784",
    "files": [
        {
            "sha": "d23039f371acb153e6aa0f5b4209fdc11f5a0e9e",
            "filename": "third_party/xla/xla/backends/cpu/transforms/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftransforms%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftransforms%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftransforms%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -144,7 +144,6 @@ cc_library(\n         \"//xla/service:call_graph\",\n         \"//xla/service:instruction_fusion\",\n         \"//xla/service/cpu:backend_config_proto_cc\",\n-        \"//xla/tsl/platform:status\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/strings:string_view\","
        },
        {
            "sha": "b360691f66f6d6a59aed116759cc2b9de140bbac",
            "filename": "third_party/xla/xla/backends/cpu/transforms/xnn_graph_fusion.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftransforms%2Fxnn_graph_fusion.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftransforms%2Fxnn_graph_fusion.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Ftransforms%2Fxnn_graph_fusion.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -18,7 +18,6 @@ limitations under the License.\n #include <algorithm>\n #include <cstdint>\n #include <memory>\n-#include <string>\n #include <vector>\n \n #include \"absl/container/flat_hash_set.h\"\n@@ -34,7 +33,6 @@ limitations under the License.\n #include \"xla/service/call_graph.h\"\n #include \"xla/service/cpu/backend_config.pb.h\"\n #include \"xla/service/instruction_fusion.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/xla.pb.h\"\n \n namespace xla::cpu {\n@@ -91,7 +89,7 @@ HloInstruction* XnnGraphFusion::Fuse(HloInstruction* producer,\n   FusionBackendConfig* fusion_config = backend_config.mutable_fusion_config();\n   fusion_config->set_kind(kXnnFusionKind);\n   CHECK(backend_config.has_fusion_config());\n-  TF_CHECK_OK(fusion->set_backend_config(backend_config));\n+  CHECK_OK(fusion->set_backend_config(backend_config));\n   return fusion;\n }\n "
        },
        {
            "sha": "b96ff3572336804552b9c0f0fe6d3d671ce67b53",
            "filename": "third_party/xla/xla/backends/gpu/codegen/emitters/transforms/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Ftransforms%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Ftransforms%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Ftransforms%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -60,6 +60,7 @@ cc_library(\n         \"//xla/stream_executor:device_description\",\n         \"//xla/stream_executor:device_description_proto_cc\",\n         \"//xla/stream_executor:semantic_version\",\n+        \"//xla/stream_executor/rocm:rocm_compute_capability\",\n         \"//xla/tsl/platform:status\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base:core_headers\","
        },
        {
            "sha": "d8f239b8f6d340a4277aa085b0d873cf3dad7979",
            "filename": "third_party/xla/xla/backends/gpu/codegen/emitters/transforms/convert_float_amd.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Ftransforms%2Fconvert_float_amd.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Ftransforms%2Fconvert_float_amd.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Ftransforms%2Fconvert_float_amd.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -47,7 +47,7 @@ limitations under the License.\n #include \"xla/backends/gpu/codegen/emitters/transforms/passes.h\"\n #include \"xla/stream_executor/device_description.h\"\n #include \"xla/stream_executor/device_description.pb.h\"\n-#include \"xla/tsl/platform/status.h\"\n+#include \"xla/stream_executor/rocm/rocm_compute_capability.h\"\n \n namespace xla {\n namespace gpu {\n@@ -565,7 +565,7 @@ class ConvertFloatAMDPass\n                                                        &device_info));\n       absl::StatusOr<se::DeviceDescription> device_description =\n           se::DeviceDescription::FromProto(device_info);\n-      TF_CHECK_OK(device_description.status());\n+      CHECK_OK(device_description.status());\n       cc_ = device_description->rocm_compute_capability();\n     }\n     mlir::RewritePatternSet patterns(&getContext());"
        },
        {
            "sha": "b483521d22b94287cb7f57842fafd9f7d0a9233c",
            "filename": "third_party/xla/xla/backends/gpu/codegen/triton/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -122,7 +122,6 @@ cc_library(\n         \"//xla/mlir_hlo:map_mhlo_to_scalar_op\",\n         \"//xla/mlir_hlo:transformation_helpers\",\n         \"//xla/service/llvm_ir:llvm_util\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log\","
        },
        {
            "sha": "5b59f8f3ae6a986621e3462355829b6a87754456",
            "filename": "third_party/xla/xla/backends/gpu/codegen/triton/emitter_helpers.h",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Femitter_helpers.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Femitter_helpers.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Femitter_helpers.h?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -42,7 +42,6 @@ limitations under the License.\n #include \"xla/literal.h\"\n #include \"xla/service/llvm_ir/llvm_util.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/xla.pb.h\"\n #include \"xla/xla_data.pb.h\"\n \n@@ -135,7 +134,7 @@ T ScalarConstantValue(const HloInstruction& instr, PrimitiveType dst_type) {\n   CHECK_EQ(instr.opcode(), HloOpcode::kConstant);\n   CHECK(ShapeUtil::IsEffectiveScalar(instr.shape()));\n   absl::StatusOr<Literal> converted = instr.literal().Convert(dst_type);\n-  TF_CHECK_OK(converted.status());\n+  CHECK_OK(converted.status());\n   return converted.value().GetFirstElement<T>();\n }\n "
        },
        {
            "sha": "164c303761655e3cff04513b38b5223850f074c7",
            "filename": "third_party/xla/xla/backends/gpu/runtime/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -167,13 +167,13 @@ xla_test(\n         \"//xla/stream_executor/gpu:gpu_test_kernels_fatbin\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:errors\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/platform:test_benchmark\",\n         \"//xla/tsl/platform:test_main\",\n         \"//xla/tsl/util:safe_reinterpret_cast\",\n         \"@com_google_absl//absl/functional:function_ref\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n@@ -2409,7 +2409,7 @@ xla_test(\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:platform_manager\",\n         \"//xla/stream_executor:stream\",\n-        \"//xla/tsl/platform:status\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/types:span\",\n         \"@com_google_googletest//:gtest_main\",\n@@ -3113,7 +3113,7 @@ xla_test(\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:platform_manager\",\n         \"//xla/stream_executor:stream_executor_h\",\n-        \"//xla/tsl/platform:status\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:status_matchers\",\n         \"@com_google_absl//absl/status:statusor\","
        },
        {
            "sha": "1018c14d3c9e11c83bf9f96ab2431eebfab0524f",
            "filename": "third_party/xla/xla/backends/gpu/runtime/buffer_comparator_test.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fbuffer_comparator_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fbuffer_comparator_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fbuffer_comparator_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -22,6 +22,7 @@ limitations under the License.\n #include <vector>\n \n #include <gtest/gtest.h>\n+#include \"absl/log/check.h\"\n #include \"absl/strings/ascii.h\"\n #include \"absl/types/span.h\"\n #include \"xla/primitive_util.h\"\n@@ -33,7 +34,6 @@ limitations under the License.\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/platform_manager.h\"\n #include \"xla/stream_executor/stream.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/types.h\"\n #include \"xla/xla_data.pb.h\"\n #include \"tsl/platform/ml_dtypes.h\"\n@@ -65,11 +65,11 @@ class BufferComparatorTest : public testing::Test {\n         stream_exec_,\n         stream_exec_->AllocateArray<ElementType>(expected.size()));\n \n-    TF_CHECK_OK(stream->Memcpy(current_buffer.memory_ptr(), current.data(),\n-                               current_buffer.memory().size()));\n-    TF_CHECK_OK(stream->Memcpy(expected_buffer.memory_ptr(), expected.data(),\n-                               expected_buffer.memory().size()));\n-    TF_CHECK_OK(stream->BlockHostUntilDone());\n+    CHECK_OK(stream->Memcpy(current_buffer.memory_ptr(), current.data(),\n+                            current_buffer.memory().size()));\n+    CHECK_OK(stream->Memcpy(expected_buffer.memory_ptr(), expected.data(),\n+                            expected_buffer.memory().size()));\n+    CHECK_OK(stream->BlockHostUntilDone());\n \n     BufferComparator comparator(\n         ShapeUtil::MakeShape(\n@@ -109,11 +109,11 @@ class BufferComparatorTest : public testing::Test {\n     se::DeviceMemoryHandle expected_buffer(\n         stream_exec_, stream_exec_->AllocateScalar<ElementType>());\n \n-    TF_CHECK_OK(stream->Memcpy(current_buffer.memory_ptr(), &current,\n-                               current_buffer.memory().size()));\n-    TF_CHECK_OK(stream->Memcpy(expected_buffer.memory_ptr(), &expected,\n-                               expected_buffer.memory().size()));\n-    TF_CHECK_OK(stream->BlockHostUntilDone());\n+    CHECK_OK(stream->Memcpy(current_buffer.memory_ptr(), &current,\n+                            current_buffer.memory().size()));\n+    CHECK_OK(stream->Memcpy(expected_buffer.memory_ptr(), &expected,\n+                            expected_buffer.memory().size()));\n+    CHECK_OK(stream->BlockHostUntilDone());\n \n     BufferComparator comparator(\n         ShapeUtil::MakeShape("
        },
        {
            "sha": "ff9a89276ee6c5224636d616e0068baa57f267ba",
            "filename": "third_party/xla/xla/backends/gpu/runtime/command_buffer_cmd_test.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_cmd_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_cmd_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_cmd_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -22,6 +22,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/functional/function_ref.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/ascii.h\"\n@@ -45,7 +46,6 @@ limitations under the License.\n #include \"xla/stream_executor/stream_executor_memory_allocator.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n #include \"xla/tsl/platform/errors.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/platform/test.h\"\n #include \"xla/tsl/platform/test_benchmark.h\"\n@@ -880,10 +880,10 @@ static void BM_GetOrTraceCommandBuffer(benchmark::State& state) {\n   absl::FunctionRef<absl::Status(se::Stream*)> trace_ref(trace);\n \n   for (auto s : state) {\n-    TF_CHECK_OK(traced_cmd_buffer\n-                    .GetOrTraceCommandBuffer(&allocations[index++ % 4],\n-                                             executor, stream.get(), trace_ref)\n-                    .status());\n+    CHECK_OK(traced_cmd_buffer\n+                 .GetOrTraceCommandBuffer(&allocations[index++ % 4], executor,\n+                                          stream.get(), trace_ref)\n+                 .status());\n   }\n }\n "
        },
        {
            "sha": "d8854aa70db0114a1593cf75f7ac5c33a6e50f35",
            "filename": "third_party/xla/xla/backends/gpu/runtime/command_buffer_conversion_pass_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_conversion_pass_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_conversion_pass_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcommand_buffer_conversion_pass_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -24,6 +24,7 @@ limitations under the License.\n \n #include <gmock/gmock.h>\n #include <gtest/gtest.h>\n+#include \"absl/log/check.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/status_matchers.h\"\n #include \"absl/status/statusor.h\"\n@@ -56,7 +57,6 @@ limitations under the License.\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/platform_manager.h\"\n #include \"xla/stream_executor/stream_executor.h\"\n-#include \"xla/tsl/platform/status.h\"\n \n namespace xla {\n namespace gpu {\n@@ -199,7 +199,7 @@ std::unique_ptr<CustomCallThunk> CreateCustomCallThunk(\n                               /*operands=*/{},\n                               /*results=*/{},\n                               /*opaque=*/\"\");\n-  TF_CHECK_OK(thunk.status());\n+  CHECK_OK(thunk.status());\n   return std::move(thunk).value();\n }\n "
        },
        {
            "sha": "a44a01fd962da1899f7056d709409e6ea481ad6c",
            "filename": "third_party/xla/xla/backends/interpreter/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Finterpreter%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Finterpreter%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Finterpreter%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -141,10 +141,10 @@ cc_library(\n         \"//xla/stream_executor:platform_manager\",\n         \"//xla/stream_executor:stream_executor_h\",\n         \"//xla/stream_executor/platform:initialize\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings:str_format\",\n-        \"@local_tsl//tsl/platform:status\",\n         \"@local_tsl//tsl/platform:statusor\",\n     ],\n     alwayslink = True,  # Registers itself with the PlatformManager."
        },
        {
            "sha": "0eea1e08ff76b745f124906775383ed77e34dee6",
            "filename": "third_party/xla/xla/backends/interpreter/platform.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Finterpreter%2Fplatform.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fbackends%2Finterpreter%2Fplatform.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Finterpreter%2Fplatform.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <string>\n #include <utility>\n \n+#include \"absl/log/check.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/str_format.h\"\n@@ -27,7 +28,6 @@ limitations under the License.\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/platform/initialize.h\"\n #include \"xla/stream_executor/platform_manager.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace stream_executor {\n namespace interpreter {\n@@ -77,7 +77,7 @@ XlaInterpreterPlatform::GetUncachedExecutor(int ordinal) {\n \n static void InitializeXlaInterpreterPlatform() {\n   std::unique_ptr<Platform> platform(new XlaInterpreterPlatform);\n-  TF_CHECK_OK(PlatformManager::RegisterPlatform(std::move(platform)));\n+  CHECK_OK(PlatformManager::RegisterPlatform(std::move(platform)));\n }\n \n }  // namespace interpreter"
        },
        {
            "sha": "4449f6b88fbe17ebcbdb644de1b24e3468dd77b0",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -88,6 +88,7 @@ cc_library(\n         \"//xla/stream_executor:device_description\",\n         \"//xla/stream_executor:device_description_proto_cc\",\n         \"//xla/stream_executor/cuda:cuda_compute_capability\",\n+        \"//xla/stream_executor/rocm:rocm_compute_capability\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:status\",\n         \"@com_google_absl//absl/algorithm:container\",\n@@ -96,6 +97,7 @@ cc_library(\n         \"@com_google_absl//absl/numeric:bits\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/types:span\",\n+        \"@com_google_protobuf//:protobuf\",\n         \"@llvm-project//llvm:Support\",\n         \"@llvm-project//mlir:AMDGPUUtils\",\n         \"@llvm-project//mlir:AffineToStandard\","
        },
        {
            "sha": "440e518d474053d0dcbc3f535da98d1b9ae987e3",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/lower_tensors.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_tensors.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_tensors.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_tensors.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -62,6 +62,7 @@ limitations under the License.\n #include \"mlir/Support/LLVM.h\"\n #include \"mlir/Support/LogicalResult.h\"\n #include \"mlir/Transforms/GreedyPatternRewriteDriver.h\"\n+#include \"google/protobuf/text_format.h\"\n #include \"xla/backends/gpu/codegen/emitters/ir/xla_gpu_ops.h\"\n #include \"xla/codegen/device_spec.h\"\n #include \"xla/codegen/emitters/ir/xla_ops.h\"\n@@ -70,7 +71,7 @@ limitations under the License.\n #include \"xla/stream_executor/cuda/cuda_compute_capability.h\"\n #include \"xla/stream_executor/device_description.h\"\n #include \"xla/stream_executor/device_description.pb.h\"\n-#include \"xla/tsl/platform/status.h\"\n+#include \"xla/stream_executor/rocm/rocm_compute_capability.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n #include \"tsl/platform/protobuf.h\"  // IWYU pragma: keep\n@@ -1389,7 +1390,7 @@ class LowerTensorsPass : public impl::LowerTensorsPassBase<LowerTensorsPass> {\n                                                        &device_info));\n       absl::StatusOr<se::DeviceDescription> device_description =\n           se::DeviceDescription::FromProto(device_info);\n-      TF_CHECK_OK(device_description.status());\n+      CHECK_OK(device_description.status());\n       *device_spec_.mutable_type() = *device_description;\n     } else if (target_type_ == \"cpu\") {\n       CHECK(gpu_device_info_.empty());"
        },
        {
            "sha": "4fe70076991a27c6b0a3b26e9bef68ca10385d14",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/lower_to_llvm.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -13,6 +13,7 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n+#include <cstdint>\n #include <memory>\n #include <string>\n #include <utility>\n@@ -40,18 +41,20 @@ limitations under the License.\n #include \"mlir/Dialect/Func/IR/FuncOps.h\"\n #include \"mlir/Dialect/LLVMIR/LLVMDialect.h\"  // IWYU pragma: keep\n #include \"mlir/Dialect/LLVMIR/NVVMDialect.h\"  // IWYU pragma: keep\n-#include \"mlir/Dialect/LLVMIR/ROCDLDialect.h\"\n #include \"mlir/Dialect/Math/IR/Math.h\"\n+#include \"mlir/IR/Diagnostics.h\"\n+#include \"mlir/IR/Location.h\"\n #include \"mlir/IR/PatternMatch.h\"\n #include \"mlir/Interfaces/DataLayoutInterfaces.h\"\n #include \"mlir/Pass/Pass.h\"\n+#include \"mlir/Support/LLVM.h\"\n #include \"mlir/Transforms/DialectConversion.h\"\n+#include \"google/protobuf/text_format.h\"\n #include \"xla/codegen/device_spec.h\"\n #include \"xla/codegen/emitters/transforms/passes.h\"\n #include \"xla/stream_executor/device_description.h\"\n #include \"xla/stream_executor/device_description.pb.h\"\n #include \"xla/tsl/platform/logging.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"tsl/platform/protobuf.h\"  // IWYU pragma: keep\n \n namespace xla {\n@@ -78,7 +81,7 @@ class LowerToLLVMPass : public impl::LowerToLLVMPassBase<LowerToLLVMPass> {\n                                                        &device_info));\n       absl::StatusOr<se::DeviceDescription> device_description =\n           se::DeviceDescription::FromProto(device_info);\n-      TF_CHECK_OK(device_description.status());\n+      CHECK_OK(device_description.status());\n       *device_spec_.mutable_type() = *device_description;\n     } else if (target_type_ == \"cpu\") {\n       CHECK(gpu_device_info_.empty());"
        },
        {
            "sha": "dc8dd8eebcf41b9edd8cb32814c7e638b727a6d3",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/vectorize_loads_stores.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fvectorize_loads_stores.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fvectorize_loads_stores.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fvectorize_loads_stores.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -18,7 +18,6 @@ limitations under the License.\n #include <optional>\n #include <string>\n #include <utility>\n-#include <variant>\n \n #include \"absl/log/check.h\"\n #include \"llvm/ADT/APInt.h\"\n@@ -36,20 +35,19 @@ limitations under the License.\n #include \"mlir/IR/Builders.h\"\n #include \"mlir/IR/BuiltinAttributes.h\"\n #include \"mlir/IR/BuiltinTypes.h\"\n-#include \"mlir/IR/ImplicitLocOpBuilder.h\"\n #include \"mlir/IR/PatternMatch.h\"\n #include \"mlir/IR/Value.h\"\n #include \"mlir/IR/ValueRange.h\"\n #include \"mlir/Pass/Pass.h\"\n #include \"mlir/Support/LLVM.h\"\n #include \"mlir/Support/LogicalResult.h\"\n #include \"mlir/Transforms/GreedyPatternRewriteDriver.h\"\n+#include \"google/protobuf/text_format.h\"\n #include \"xla/codegen/device_spec.h\"\n #include \"xla/codegen/emitters/ir/xla_ops.h\"\n #include \"xla/codegen/emitters/transforms/atomic_rmw_utils.h\"\n #include \"xla/codegen/emitters/transforms/passes.h\"\n #include \"xla/stream_executor/device_description.h\"\n-#include \"xla/tsl/platform/status.h\"\n \n namespace xla {\n namespace emitters {\n@@ -564,7 +562,7 @@ class VectorizeLoadsAndStoresPass\n                                                        &device_info));\n       absl::StatusOr<se::DeviceDescription> device_description =\n           se::DeviceDescription::FromProto(device_info);\n-      TF_CHECK_OK(device_description.status());\n+      CHECK_OK(device_description.status());\n       *device_spec_.mutable_type() = *device_description;\n     } else if (target_type_ == \"cpu\") {\n       CHECK(gpu_device_info_.empty());"
        },
        {
            "sha": "9c5d64b61fffb89f6b405779e2fac8d27cab7d1d",
            "filename": "third_party/xla/xla/codegen/intrinsic/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -56,12 +56,12 @@ cc_library(\n     hdrs = [\"fptrunc.h\"],\n     deps = [\n         \":intrinsic\",\n+        \":type\",\n         \"//xla:shape_util\",\n         \"//xla:util\",\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/service/llvm_ir:llvm_util\",\n         \"//xla/tsl/platform:errors\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\","
        },
        {
            "sha": "38b0003d6be14afb4c72350ac138a62ce08b1928",
            "filename": "third_party/xla/xla/codegen/intrinsic/fptrunc.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2Ffptrunc.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2Ffptrunc.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2Ffptrunc.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -35,11 +35,10 @@ limitations under the License.\n #include \"llvm/IR/Module.h\"\n #include \"llvm/IR/Type.h\"\n #include \"llvm/Support/Casting.h\"\n-#include \"xla/codegen/intrinsic/intrinsic.h\"\n+#include \"xla/codegen/intrinsic/type.h\"\n #include \"xla/primitive_util.h\"\n #include \"xla/service/llvm_ir/llvm_util.h\"\n #include \"xla/tsl/platform/errors.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n@@ -378,7 +377,7 @@ absl::StatusOr<llvm::Function*> EmitFxxToF8E(llvm::Module* module,\n       /*dest_exponent_bits=*/primitive_util::ExponentWidth(fx_type),\n       /*dest_mantissa_bits=*/f8_mantissa_bits,\n       /*quiet_nans=*/true, &b);\n-  TF_CHECK_OK(fx_reduced_statusor.status());  // Crash OK\n+  CHECK_OK(fx_reduced_statusor.status());  // Crash OK\n   Value* fx_reduced = b.CreateBitCast(fx_reduced_statusor.value(), ix_type);\n   fx_reduced = b.CreateAnd(fx_reduced, nosign_mask);\n "
        },
        {
            "sha": "c502d6c0d5e8a2610edddbb1d97d2e6d83249e79",
            "filename": "third_party/xla/xla/hlo/analysis/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 10,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -46,10 +46,10 @@ xla_cc_test(\n         \"//xla/hlo/testlib:test\",\n         \"//xla/service:computation_placer_hdr\",\n         \"//xla/service:hlo_module_config\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/platform:test_benchmark\",\n         \"//xla/tsl/platform:test_main\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/strings:string_view\",\n     ],\n )\n@@ -85,10 +85,10 @@ xla_cc_test(\n         \"//xla/service:computation_placer\",\n         \"//xla/service:hlo_module_config\",\n         \"//xla/tsl/platform:test_main\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/random\",\n         \"@com_google_absl//absl/strings:string_view\",\n-        \"@local_tsl//tsl/platform:status\",\n-        \"@local_tsl//tsl/platform:test_benchmark\",\n+        \"@com_google_benchmark//:benchmark\",\n     ],\n )\n \n@@ -101,7 +101,6 @@ cc_library(\n         \":hlo_dataflow_analysis\",\n         \":hlo_reachability\",\n         \"//xla:shape_util\",\n-        \"//xla:status_macros\",\n         \"//xla:types\",\n         \"//xla:util\",\n         \"//xla/hlo/ir:hlo\",\n@@ -114,8 +113,6 @@ cc_library(\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:str_format\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:logging\",\n     ],\n )\n \n@@ -155,14 +152,12 @@ cc_library(\n         \"//xla/hlo/evaluator:hlo_evaluator\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/utils:hlo_query\",\n-        \"//xla/service:call_inliner\",\n         \"//xla/service:collective_ops_utils\",\n         \"//xla/service:constant_value\",\n         \"//xla/service:hlo_module_config\",\n         \"//xla/service:pattern_matcher\",\n         \"//xla/service:value_range\",\n         \"//xla/tools:hlo_extractor\",\n-        \"//xla/tsl/platform:status\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n@@ -236,7 +231,6 @@ cc_library(\n         \"//xla/service:hlo_value\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:logging\",\n-        \"//xla/tsl/platform:status\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n@@ -468,7 +462,6 @@ cc_library(\n         \"//xla/service:hlo_buffer\",\n         \"//xla/service:hlo_value\",\n         \"//xla/tsl/platform:logging\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\","
        },
        {
            "sha": "811addc6d8465198e7dc8f573ee7d6a19ccfab94",
            "filename": "third_party/xla/xla/hlo/analysis/hlo_alias_analysis.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_alias_analysis.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_alias_analysis.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_alias_analysis.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -43,10 +43,10 @@ limitations under the License.\n #include \"xla/service/call_graph.h\"\n #include \"xla/service/hlo_buffer.h\"\n #include \"xla/service/hlo_value.h\"\n+#include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/status_macros.h\"\n #include \"xla/tsl/platform/logging.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n \n@@ -420,7 +420,7 @@ absl::StatusOr<std::unique_ptr<HloAliasAnalysis>> HloAliasAnalysis::Run(\n   }\n \n   CHECK_EQ(alias_analysis->value_to_buffer_.size(), num_values);\n-  TF_DCHECK_OK(alias_analysis->Verify());\n+  DCHECK_OK(alias_analysis->Verify());\n \n   HloInstruction* root = module->entry_computation()->root_instruction();\n   ShapeUtil::ForEachSubshape(root->shape(), [&](const Shape& /*subshape*/,"
        },
        {
            "sha": "ca00349f4c25d51cad1d827ea471a2055eeb8bad",
            "filename": "third_party/xla/xla/hlo/analysis/hlo_dataflow_analysis.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_dataflow_analysis.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_dataflow_analysis.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_dataflow_analysis.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -44,15 +44,14 @@ limitations under the License.\n #include \"xla/hlo/ir/hlo_instructions.h\"\n #include \"xla/hlo/ir/hlo_module.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n-#include \"xla/layout_util.h\"\n #include \"xla/map_util.h\"\n #include \"xla/service/call_graph.h\"\n #include \"xla/service/hlo_value.h\"\n+#include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/status_macros.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n \n@@ -1515,7 +1514,7 @@ absl::Status HloDataflowAnalysis::RunImpl() {\n   }\n   absl::c_sort(values_vector_, HloValue::IdLessThan);\n \n-  TF_DCHECK_OK(Verify());\n+  DCHECK_OK(Verify());\n \n   XLA_VLOG_LINES(1, ToString());\n "
        },
        {
            "sha": "2ed4c519058029f86c0e241efbcd5d044f322a34",
            "filename": "third_party/xla/xla/hlo/analysis/hlo_dfs_reachability_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_dfs_reachability_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_dfs_reachability_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_dfs_reachability_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <memory>\n #include <string>\n \n+#include \"absl/log/check.h\"\n #include \"absl/strings/string_view.h\"\n #include \"xla/hlo/ir/hlo_computation.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n@@ -30,7 +31,6 @@ limitations under the License.\n #include \"xla/service/hlo_module_config.h\"\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/platform/test_benchmark.h\"\n #include \"xla/xla_data.pb.h\"\n@@ -78,7 +78,7 @@ TEST_F(HloDfsReachabilityTest, NonTrivialReachability) {\n   auto computation =\n       module->AddEntryComputation(builder.Build(/*root_instruction=*/mul));\n \n-  TF_CHECK_OK(add->AddControlDependencyTo(exp));\n+  CHECK_OK(add->AddControlDependencyTo(exp));\n   auto reachability = HloDfsReachability::Build(computation);\n \n   EXPECT_TRUE(reachability->IsReachable(constant1, constant1));"
        },
        {
            "sha": "f67b01067b65e5e5deddd15c06fdd12edbfbc433",
            "filename": "third_party/xla/xla/hlo/analysis/hlo_ordering.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_ordering.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_ordering.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_ordering.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -29,15 +29,15 @@ limitations under the License.\n #include \"absl/types/span.h\"\n #include \"xla/hlo/analysis/alias_info.h\"\n #include \"xla/hlo/analysis/hlo_dataflow_analysis.h\"\n+#include \"xla/hlo/analysis/hlo_reachability.h\"\n #include \"xla/hlo/ir/hlo_computation.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n+#include \"xla/hlo/ir/hlo_schedule.h\"\n+#include \"xla/map_util.h\"\n+#include \"xla/service/hlo_value.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/status_macros.h\"\n-#include \"xla/types.h\"\n #include \"xla/util.h\"\n-#include \"tsl/platform/errors.h\"\n-#include \"tsl/platform/logging.h\"\n \n namespace xla {\n \n@@ -559,7 +559,7 @@ SequentialHloOrdering::SequentialHloOrdering(HloSchedule&& schedule)\n \n void SequentialHloOrdering::Initialize() {\n   // Create a map from instruction to its order position.\n-  TF_DCHECK_OK(schedule_.Verify());\n+  DCHECK_OK(schedule_.Verify());\n   for (const auto& computation_sequence : schedule_.sequences()) {\n     const auto& order = computation_sequence.second.instructions();\n     for (int i = 0; i < order.size(); ++i) {"
        },
        {
            "sha": "64dc917a41f836dc33ab074f10436a54086419ec",
            "filename": "third_party/xla/xla/hlo/analysis/hlo_reachability_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_reachability_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_reachability_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fhlo_reachability_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -21,8 +21,10 @@ limitations under the License.\n #include <string>\n #include <vector>\n \n+#include \"absl/log/check.h\"\n #include \"absl/random/random.h\"\n #include \"absl/strings/string_view.h\"\n+#include \"benchmark/benchmark.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/hlo/testlib/hlo_hardware_independent_test_base.h\"\n@@ -34,8 +36,6 @@ limitations under the License.\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/status.h\"\n-#include \"tsl/platform/test_benchmark.h\"\n \n namespace xla {\n \n@@ -134,7 +134,7 @@ TEST_F(HloReachabilityTest, NonTrivialReachability) {\n   auto computation =\n       module->AddEntryComputation(builder.Build(/*root_instruction=*/mul));\n \n-  TF_CHECK_OK(add->AddControlDependencyTo(exp));\n+  CHECK_OK(add->AddControlDependencyTo(exp));\n   auto reachability = HloReachabilityMap::Build(computation);\n \n   EXPECT_TRUE(reachability->IsReachable(constant1, constant1));"
        },
        {
            "sha": "82c47535e7798d34531b88fafddf823eb411a703",
            "filename": "third_party/xla/xla/hlo/analysis/while_loop_analysis.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fwhile_loop_analysis.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fwhile_loop_analysis.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fwhile_loop_analysis.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -51,7 +51,6 @@ limitations under the License.\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/tools/hlo_extractor.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/xla_data.pb.h\"\n \n namespace xla {\n@@ -1074,9 +1073,9 @@ optional<int64_t> ComputeWhileLoopTripCountUpperBound(\n   HloEvaluator evaluator(/*max_loop_iterations=*/0);\n   Literal fake_input = Literal::CreateFromShape(\n       new_computation->parameter_instruction(0)->shape());\n-  TF_CHECK_OK(fake_input.CopyFrom(while_body_indvar->literal(),\n-                                  /*dest_shape_index=*/{0},\n-                                  /*src_shape_index=*/{}));\n+  CHECK_OK(fake_input.CopyFrom(while_body_indvar->literal(),\n+                               /*dest_shape_index=*/{0},\n+                               /*src_shape_index=*/{}));\n   absl::StatusOr<Literal> eval_result =\n       evaluator.Evaluate(*new_computation, {std::move(fake_input)});\n "
        },
        {
            "sha": "0195f30d94cbc68fdd08ee9d5b0d67884474bb77",
            "filename": "third_party/xla/xla/hlo/builder/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -34,10 +34,9 @@ cc_library(\n     deps = [\n         \"//xla:util\",\n         \"//xla/tsl/lib/math:math_util\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:logging\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -98,8 +97,8 @@ cc_library(\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service:hlo_module_config\",\n         \"//xla/service:hlo_proto_cc\",\n-        \"//xla/tsl/lib/gtl:value_or_die\",\n-        \"//xla/tsl/platform:status\",\n+        \"//xla/tsl/platform:errors\",\n+        \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/hash\",\n@@ -108,8 +107,6 @@ cc_library(\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings:str_format\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n "
        },
        {
            "sha": "467dac3d1536248d0a99e3d5fa7ddff9333f49d2",
            "filename": "third_party/xla/xla/hlo/builder/padding.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fpadding.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fpadding.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fpadding.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -21,12 +21,11 @@ limitations under the License.\n #include <utility>\n #include <vector>\n \n+#include \"absl/log/check.h\"\n #include \"absl/status/status.h\"\n #include \"absl/types/span.h\"\n #include \"xla/tsl/lib/math/math_util.h\"\n #include \"xla/util.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n \n@@ -59,8 +58,8 @@ std::vector<std::pair<int64_t, int64_t>> MakePadding(\n     absl::Span<const int64_t> input_dimensions,\n     absl::Span<const int64_t> window_dimensions,\n     absl::Span<const int64_t> window_strides, Padding padding) {\n-  TF_CHECK_OK(ValidatePaddingValues(input_dimensions, window_dimensions,\n-                                    window_strides));\n+  CHECK_OK(ValidatePaddingValues(input_dimensions, window_dimensions,\n+                                 window_strides));\n   std::vector<std::pair<int64_t, int64_t>> low_high_padding;\n   switch (padding) {\n     case Padding::kValid:"
        },
        {
            "sha": "78cb2addf241e8fad499e3fd180a2ad25e30c972",
            "filename": "third_party/xla/xla/hlo/builder/value_inference.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fvalue_inference.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fvalue_inference.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fvalue_inference.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -44,12 +44,10 @@ limitations under the License.\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/status_macros.h\"\n-#include \"xla/tsl/lib/gtl/value_or_die.h\"\n-#include \"xla/tsl/platform/status.h\"\n+#include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/errors.h\"\n-#include \"tsl/platform/statusor.h\"\n \n namespace xla {\n namespace {\n@@ -399,7 +397,7 @@ struct PostorderDFSVisitor {\n   bool IsInstructionOverLimit(const HloInstructionProto* proto,\n                               const InferenceContext& context) {\n     auto shape = Shape::FromProto(proto->shape());\n-    TF_CHECK_OK(shape.status());\n+    CHECK_OK(shape.status());\n     auto subshape = std::make_unique<Shape>(\n         ShapeUtil::GetSubshape(*shape, context.shape_index));\n \n@@ -412,7 +410,7 @@ struct PostorderDFSVisitor {\n       const HloInstructionProto* operand =\n           handle_to_instruction(operand_id).value();\n       auto operand_shape = Shape::FromProto(operand->shape());\n-      TF_CHECK_OK(operand_shape.status());\n+      CHECK_OK(operand_shape.status());\n \n       if (operand_shape->IsArray() &&\n           ShapeUtil::ElementsIn(*operand_shape) > kLargeShapeElementLimit &&"
        },
        {
            "sha": "9f68b32103afed866faa9de36a57d246cdcfe674",
            "filename": "third_party/xla/xla/hlo/evaluator/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -69,22 +69,22 @@ cc_library(\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/hlo/analysis:tuple_points_to_analysis\",\n         \"//xla/hlo/ir:hlo\",\n-        \"//xla/service:compilation_environments\",\n         \"//xla/service:dynamic_dimension_inference\",\n         \"//xla/service:gather_scatter_utils\",\n         \"//xla/service:hlo_module_config\",\n         \"//xla/service:logical_buffer\",\n         \"//xla/service:pattern_matcher\",\n         \"//xla/service:shape_inference\",\n+        \"//xla/tsl/framework/contraction:eigen_contraction_kernel\",\n         \"//xla/tsl/lib/core:bitmap\",\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:logging\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/base:core_headers\",\n+        \"@com_google_absl//absl/base:endian\",\n         \"@com_google_absl//absl/cleanup\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:inlined_vector\","
        },
        {
            "sha": "3f209f9ed8b20abf7d0a0abcdf03dcca5c2575fe",
            "filename": "third_party/xla/xla/hlo/evaluator/hlo_evaluator.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -36,6 +36,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/algorithm/container.h\"\n+#include \"absl/base/internal/endian.h\"\n #include \"absl/cleanup/cleanup.h\"\n #include \"absl/container/flat_hash_map.h\"\n #include \"absl/container/inlined_vector.h\"\n@@ -69,7 +70,6 @@ limitations under the License.\n #include \"xla/literal.h\"\n #include \"xla/literal_util.h\"\n #include \"xla/primitive_util.h\"\n-#include \"xla/service/compilation_environments.h\"\n #include \"xla/service/gather_scatter_utils.h\"\n #include \"xla/service/hlo_module_config.h\"\n #include \"xla/service/logical_buffer.h\"\n@@ -81,7 +81,6 @@ limitations under the License.\n #include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/types.h\"\n #include \"xla/util.h\"\n@@ -2332,7 +2331,7 @@ class FftTransform {\n     }\n \n     // Check input-related values.\n-    TF_CHECK_OK(ShapeUtil::ValidateShape(input_shape));\n+    CHECK_OK(ShapeUtil::ValidateShape(input_shape));\n     if (!input_shape.IsArray()) {\n       return Unimplemented(\"Only array input shapes are supported.\");\n     }\n@@ -2351,7 +2350,7 @@ class FftTransform {\n     }\n \n     // Check output-related values.\n-    TF_CHECK_OK(ShapeUtil::ValidateShape(output_shape));\n+    CHECK_OK(ShapeUtil::ValidateShape(output_shape));\n     if (!output_shape.IsArray()) {\n       return Unimplemented(\"Only array output shapes are supported.\");\n     }\n@@ -4638,7 +4637,7 @@ absl::Status HloEvaluator::HandleReduce(const HloInstruction* hlo) {\n   if (is_tuple) {\n     Literal tuple_result(inferred_return_shape);\n     for (int64_t i = 0; i < num_args; ++i) {\n-      TF_CHECK_OK(tuple_result.MoveFrom(std::move(results[i]), {i}));\n+      CHECK_OK(tuple_result.MoveFrom(std::move(results[i]), {i}));\n     }\n     SetEvaluatedLiteralFor(reduce, std::move(tuple_result));\n   } else {"
        },
        {
            "sha": "b8e95065719d75d5804b2a31ac88568daa1fb1a7",
            "filename": "third_party/xla/xla/hlo/evaluator/hlo_evaluator_typed_visitor.h",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_typed_visitor.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_typed_visitor.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_typed_visitor.h?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -54,7 +54,6 @@ limitations under the License.\n #include \"xla/shape_util.h\"\n #include \"xla/status_macros.h\"\n #include \"xla/tsl/platform/errors.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/types.h\"\n #include \"xla/util.h\"\n@@ -878,8 +877,8 @@ class HloEvaluatorTypedVisitor : public ConstDfsHloVisitorWithDefault {\n     const Shape& lhs_shape = lhs_literal.shape();\n     const Shape& rhs_shape = rhs_literal.shape();\n \n-    TF_CHECK_OK(ShapeUtil::ValidateShape(lhs_shape));\n-    TF_CHECK_OK(ShapeUtil::ValidateShape(rhs_shape));\n+    CHECK_OK(ShapeUtil::ValidateShape(lhs_shape));\n+    CHECK_OK(ShapeUtil::ValidateShape(rhs_shape));\n     CHECK(lhs_shape.IsArray());\n     CHECK(rhs_shape.IsArray());\n     CHECK(ShapeUtil::SameElementType(lhs_shape, rhs_shape));\n@@ -1075,8 +1074,8 @@ class HloEvaluatorTypedVisitor : public ConstDfsHloVisitorWithDefault {\n     Shape lhs_shape = GetShapeWithLayout(lhs->shape());\n     Shape rhs_shape = GetShapeWithLayout(rhs->shape());\n \n-    TF_CHECK_OK(ShapeUtil::ValidateShape(lhs_shape));\n-    TF_CHECK_OK(ShapeUtil::ValidateShape(rhs_shape));\n+    CHECK_OK(ShapeUtil::ValidateShape(lhs_shape));\n+    CHECK_OK(ShapeUtil::ValidateShape(rhs_shape));\n     CHECK(lhs_shape.IsArray());\n     CHECK(rhs_shape.IsArray());\n "
        },
        {
            "sha": "6b56d6c2e98ef2b874a7b5cc38eafa7207234a86",
            "filename": "third_party/xla/xla/hlo/experimental/auto_sharding/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -352,9 +352,13 @@ xla_cc_binary(\n     compatible_with = get_compatible_with_libtpu_portable(),\n     deps = [\n         \":auto_sharding\",\n+        \":auto_sharding_option\",\n         \"//xla/hlo/analysis:alias_info\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/tools:hlo_module_loader\",\n+        \"//xla/tsl/platform:env\",\n+        \"//xla/tsl/platform:errors\",\n+        \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@local_tsl//tsl/platform:platform_port\","
        },
        {
            "sha": "2f4762b3ee6cd7b3c8e5c4c6c8fc1d48d0020311",
            "filename": "third_party/xla/xla/hlo/experimental/auto_sharding/auto_sharding_runner.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2Fauto_sharding_runner.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2Fauto_sharding_runner.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2Fauto_sharding_runner.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -22,8 +22,12 @@ limitations under the License.\n #include \"absl/status/status.h\"\n #include \"xla/hlo/analysis/alias_info.h\"\n #include \"xla/hlo/experimental/auto_sharding/auto_sharding.h\"\n+#include \"xla/hlo/experimental/auto_sharding/auto_sharding_option.h\"\n #include \"xla/hlo/ir/hlo_module.h\"\n #include \"xla/tools/hlo_module_loader.h\"\n+#include \"xla/tsl/platform/env.h\"\n+#include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"tsl/platform/init_main.h\"\n \n namespace xla {\n@@ -58,6 +62,6 @@ absl::Status RunAutoShardingPassFromFile(const std::string& file_name) {\n int main(int argc, char** argv) {\n   tsl::port::InitMain(\"Run AutoSharding Pass\", &argc, &argv);\n   QCHECK(argc == 2) << \"Must specify a single input file\";\n-  TF_CHECK_OK(xla::spmd::RunAutoShardingPassFromFile(argv[1]));\n+  CHECK_OK(xla::spmd::RunAutoShardingPassFromFile(argv[1]));\n   return 0;\n }"
        },
        {
            "sha": "1eb757dc4f0568317ffcb10fb1ec7810c82b6692",
            "filename": "third_party/xla/xla/hlo/experimental/auto_sharding/auto_sharding_util.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2Fauto_sharding_util.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2Fauto_sharding_util.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fexperimental%2Fauto_sharding%2Fauto_sharding_util.h?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n #include <algorithm>\n #include <cstddef>\n #include <cstdint>\n+#include <initializer_list>\n #include <optional>\n #include <string>\n #include <utility>\n@@ -46,7 +47,6 @@ limitations under the License.\n #include \"xla/service/call_graph.h\"\n #include \"xla/shape.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/statusor.h\"\n \n namespace xla {\n namespace spmd {\n@@ -212,7 +212,7 @@ inline void ReplaceOperand(HloInstruction* inst,\n                            HloInstruction* new_operand) {\n   for (int i = 0; i < inst->operand_count(); ++i) {\n     if (inst->operand(i) == old_operand) {\n-      TF_CHECK_OK(inst->ReplaceOperandWith(i, new_operand));\n+      CHECK_OK(inst->ReplaceOperandWith(i, new_operand));\n     }\n   }\n }\n@@ -344,7 +344,7 @@ inline void ForceOperandSharding(HloInstruction* inst, int operand_num,\n   HloInstruction* replace_with = inst->parent()->AddInstruction(\n       HloInstruction::CreateReshape(operand->shape(), operand));\n   replace_with->set_sharding(sharding);\n-  TF_CHECK_OK(inst->ReplaceOperandWith(operand_num, replace_with));\n+  CHECK_OK(inst->ReplaceOperandWith(operand_num, replace_with));\n }\n \n // Return whether the sharding is fully tiled."
        },
        {
            "sha": "071b9a2ab6012b7f8b49c3aa5820d5e95cea11cd",
            "filename": "third_party/xla/xla/hlo/ir/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -269,21 +269,22 @@ xla_cc_test(\n         \"//xla/hlo/utils:hlo_query\",\n         \"//xla/service:buffer_assignment\",\n         \"//xla/service:buffer_value\",\n+        \"//xla/service:compilation_environments\",\n         \"//xla/service:hlo_module_config\",\n         \"//xla/service:hlo_proto_util\",\n         \"//xla/service:logical_buffer\",\n         \"//xla/tsl/lib/core:status_test_util\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/util/proto:proto_matchers\",\n         \"@com_google_absl//absl/container:btree\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/hash\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest_main\",\n-        \"@local_tsl//tsl/platform:protobuf\",\n+        \"@com_google_protobuf//:protobuf\",\n     ],\n )\n "
        },
        {
            "sha": "57989017c4e43a3bcbe4aabb41a2face3ac3a3a0",
            "filename": "third_party/xla/xla/hlo/ir/hlo_computation.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 12,
            "changes": 21,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_computation.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_computation.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_computation.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -44,6 +44,7 @@ limitations under the License.\n #include \"absl/strings/str_join.h\"\n #include \"absl/strings/string_view.h\"\n #include \"absl/types/span.h\"\n+#include \"google/protobuf/repeated_ptr_field.h\"\n #include \"xla/hlo/ir/dfs_hlo_visitor.h\"\n #include \"xla/hlo/ir/hlo_casting_utils.h\"\n #include \"xla/hlo/ir/hlo_clone_context.h\"\n@@ -52,7 +53,6 @@ limitations under the License.\n #include \"xla/hlo/ir/hlo_instructions.h\"\n #include \"xla/hlo/ir/hlo_module.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n-#include \"xla/hlo/ir/hlo_original_value.h\"\n #include \"xla/hlo/ir/hlo_print_options.h\"\n #include \"xla/hlo/ir/ptrvec.h\"\n #include \"xla/literal.h\"\n@@ -70,11 +70,9 @@ limitations under the License.\n #include \"xla/tsl/lib/gtl/iterator_range.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/protobuf.h\"\n \n namespace xla {\n \n@@ -554,10 +552,9 @@ HloInstruction* HloComputation::ReplaceParameter(\n   HloInstruction* new_instruction =\n       AddInstructionInternal(std::move(instruction));\n   HloInstruction* old_instruction = param_instructions_[param_no];\n-  TF_CHECK_OK(\n-      old_instruction->ReplaceAllUsesWithDifferentShape(new_instruction));\n+  CHECK_OK(old_instruction->ReplaceAllUsesWithDifferentShape(new_instruction));\n   param_instructions_[param_no] = new_instruction;\n-  TF_CHECK_OK(ForceRemoveInstruction(old_instruction));\n+  CHECK_OK(ForceRemoveInstruction(old_instruction));\n   return new_instruction;\n }\n \n@@ -1469,18 +1466,18 @@ void HloComputation::AppendInstructionsIntoCalledComputation(\n     absl::Span<HloInstruction* const> instructions_to_append,\n     HloInstruction* caller) {\n   HloInstruction* root = instructions_to_append.front();\n-  TF_CHECK_OK(caller->CopyAllControlDepsFrom(root));\n-  TF_CHECK_OK(root->DropAllControlDeps());\n-  TF_CHECK_OK(root->ReplaceAllUsesWith(caller));\n+  CHECK_OK(caller->CopyAllControlDepsFrom(root));\n+  CHECK_OK(root->DropAllControlDeps());\n+  CHECK_OK(root->ReplaceAllUsesWith(caller));\n   if (root == root_instruction()) {\n     set_root_instruction(caller);\n   }\n-  TF_CHECK_OK(RemoveInstruction(root));\n+  CHECK_OK(RemoveInstruction(root));\n   for (size_t i = 1; i < instructions_to_append.size(); ++i) {\n     HloInstruction* instruction = instructions_to_append[i];\n     caller->AppendInstructionIntoCalledComputation(instruction);\n     if (instruction->IsDead()) {\n-      TF_CHECK_OK(RemoveInstruction(instruction));\n+      CHECK_OK(RemoveInstruction(instruction));\n     }\n   }\n }\n@@ -2184,7 +2181,7 @@ std::unique_ptr<HloComputation> HloComputation::CloneInContext(\n       // successor may not have been remapped, because it might have been\n       // removed by the replacements map.\n       if (replaced_successor != nullptr) {\n-        TF_CHECK_OK(new_instr->AddControlDependencyTo(\n+        CHECK_OK(new_instr->AddControlDependencyTo(\n             context.GetInstruction(replaced_successor)));\n       }\n     }"
        },
        {
            "sha": "3ab16fc702690c7aa903eec3464fc326816ecc84",
            "filename": "third_party/xla/xla/hlo/ir/hlo_instruction.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -60,6 +60,7 @@ limitations under the License.\n #include \"xla/hlo/ir/hlo_op_metadata.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/hlo/ir/hlo_original_value.h\"\n+#include \"xla/hlo/ir/hlo_print_options.h\"\n #include \"xla/hlo/ir/hlo_sharding.h\"\n #include \"xla/hlo/ir/hlo_sharding_metadata.h\"\n #include \"xla/hlo/ir/ptrvec.h\"\n@@ -82,11 +83,9 @@ limitations under the License.\n #include \"xla/tsl/lib/gtl/map_util.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"  // IWYU pragma: keep\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/protobuf.h\"\n \n namespace xla {\n \n@@ -4530,7 +4529,7 @@ HloInstruction::HloInstruction(HloOpcode opcode, const Shape& shape)\n       shape_is_canonicalized_(false),\n       shape_(std::make_shared<Shape>(shape)),\n       name_(HloOpcodeString(opcode)) {\n-  TF_DCHECK_OK(ShapeUtil::ValidateShapeWithOptionalLayout(*shape_));\n+  DCHECK_OK(ShapeUtil::ValidateShapeWithOptionalLayout(*shape_));\n }\n \n template <typename HloInstructionPtr>"
        },
        {
            "sha": "55c3b05fe0d10f145be3f6781ce3f80a3d65f160",
            "filename": "third_party/xla/xla/hlo/ir/hlo_instructions.cc",
            "status": "modified",
            "additions": 20,
            "deletions": 21,
            "changes": 41,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instructions.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instructions.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instructions.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -63,7 +63,6 @@ limitations under the License.\n #include \"xla/tsl/lib/gtl/iterator_range.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"  // IWYU pragma: keep\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/util.h\"\n #include \"xla/window_util.h\"\n #include \"xla/xla_data.pb.h\"\n@@ -2010,11 +2009,11 @@ HloCallableInstruction::CloneAndAppendInstructionIntoCalledComputation(\n         // the clone.\n         HloInstruction* called_computation_parameter =\n             called_computation_parameters[operand_num];\n-        TF_CHECK_OK(called_computation_parameter->ReplaceAllUsesWith(clone));\n+        CHECK_OK(called_computation_parameter->ReplaceAllUsesWith(clone));\n \n         // Remove the corresponding called computation parameter and operand\n         // from their respective vectors.\n-        TF_CHECK_OK(called_computation()->RemoveParameter(operand_num));\n+        CHECK_OK(called_computation()->RemoveParameter(operand_num));\n         RemoveOperandAt(operand_num);\n         break;\n       }\n@@ -2061,7 +2060,7 @@ HloCallableInstruction::CloneAndAppendInstructionIntoCalledComputation(\n       // original value is saved in the corresponding argument.\n       called_computation_parameter = AddCallOperand(operand);\n     }\n-    TF_CHECK_OK(\n+    CHECK_OK(\n         clone->ReplaceOperandWith(operand_num, called_computation_parameter));\n   }\n \n@@ -2082,7 +2081,7 @@ HloCallableInstruction::CloneAndAppendInstructionIntoCalledComputation(\n         if (root->operand(i) == clone) {\n           HloInstruction* new_gte = AddInstruction(\n               HloInstruction::CreateGetTupleElement(clone->shape(), this, i));\n-          TF_CHECK_OK(instruction_to_append->ReplaceAllUsesWith(new_gte));\n+          CHECK_OK(instruction_to_append->ReplaceAllUsesWith(new_gte));\n           return clone;\n         }\n       }\n@@ -2125,15 +2124,15 @@ HloCallableInstruction::CloneAndAppendInstructionIntoCalledComputation(\n     // be valid after we change the shape. So clear the sharding.\n     clear_sharding();\n     if (root->opcode() == HloOpcode::kTuple) {\n-      TF_CHECK_OK(called_computation()->RemoveInstruction(root));\n+      CHECK_OK(called_computation()->RemoveInstruction(root));\n     }\n \n     // If this is a newly created multioutput instruction, we need to update\n     // the use of the original callable instruction.\n     if (newly_created_tuple_instr) {\n       HloInstruction* new_instr = AddInstruction(\n           HloInstruction::CreateGetTupleElement(root->shape(), this, 0));\n-      TF_CHECK_OK(ReplaceAllUsesWithDifferentShape(new_instr));\n+      CHECK_OK(ReplaceAllUsesWithDifferentShape(new_instr));\n     }\n     int64_t index = tuple_elements.size();\n     if (do_not_clone) {\n@@ -2148,17 +2147,17 @@ HloCallableInstruction::CloneAndAppendInstructionIntoCalledComputation(\n         HloInstruction* new_gte =\n             AddInstruction(HloInstruction::CreateGetTupleElement(\n                 old_gte->shape(), this, index + old_tuple_index));\n-        TF_CHECK_OK(old_gte->ReplaceAllUsesWith(new_gte));\n+        CHECK_OK(old_gte->ReplaceAllUsesWith(new_gte));\n         to_be_removed.push_back(old_gte);\n       }\n       for (auto old_gte : to_be_removed) {\n-        TF_CHECK_OK(parent()->RemoveInstruction(old_gte));\n+        CHECK_OK(parent()->RemoveInstruction(old_gte));\n       }\n     } else {\n       HloInstruction* new_gte =\n           AddInstruction(HloInstruction::CreateGetTupleElement(\n               clone->shape(), this, index - 1));\n-      TF_CHECK_OK(instruction_to_append->ReplaceAllUsesWith(new_gte));\n+      CHECK_OK(instruction_to_append->ReplaceAllUsesWith(new_gte));\n     }\n   }\n \n@@ -2339,7 +2338,7 @@ void HloFusionInstruction::MergeFusionInstruction(\n        fused_it != fused_instructions.rend(); ++fused_it) {\n     auto fused_instruction = *fused_it;\n     if (fused_instruction->opcode() == HloOpcode::kParameter) {\n-      TF_CHECK_OK(\n+      CHECK_OK(\n           fused_instruction->ReplaceAllUsesWith(cloned_fusion->mutable_operand(\n               fused_instruction->parameter_number())));\n     } else {\n@@ -2360,7 +2359,7 @@ void HloFusionInstruction::MergeFusionInstruction(\n   CHECK(unfused_root == cloned_fusion->fused_expression_root() ||\n         unfused_instructions.empty());\n   // Replace instruction_to_merge use of 'this' with unfused_root.\n-  TF_CHECK_OK(instruction_to_merge->ReplaceUseWith(this, unfused_root));\n+  CHECK_OK(instruction_to_merge->ReplaceUseWith(this, unfused_root));\n \n   // Build a dummy root for the cloned fusion as we may remove the original\n   // root in the fusion process.\n@@ -2378,11 +2377,11 @@ void HloFusionInstruction::MergeFusionInstruction(\n   // decide if a side-effectful instruction is fusible).\n   for (auto& instruction : unfused_instructions) {\n     auto* fused = FuseInstruction(instruction);\n-    TF_CHECK_OK(instruction->ReplaceAllUsesWith(fused));\n-    TF_CHECK_OK(instruction->parent()->RemoveInstruction(instruction));\n+    CHECK_OK(instruction->ReplaceAllUsesWith(fused));\n+    CHECK_OK(instruction->parent()->RemoveInstruction(instruction));\n   }\n   CHECK_EQ(0, cloned_fusion->user_count());\n-  TF_CHECK_OK(GetModule()->RemoveEmbeddedComputation(\n+  CHECK_OK(GetModule()->RemoveEmbeddedComputation(\n       cloned_fusion->fused_instructions_computation()));\n }\n \n@@ -2456,8 +2455,8 @@ void HloFusionInstruction::MergeFusionInstructionIntoMultiOutput(\n       for (HloInstruction* gte : instruction_to_merge->users()) {\n         if (gte->opcode() == HloOpcode::kGetTupleElement &&\n             gte->tuple_index() == tuple_index) {\n-          TF_CHECK_OK(gte->ReplaceAllUsesWith(new_root));\n-          TF_CHECK_OK(gte->parent()->RemoveInstruction(gte));\n+          CHECK_OK(gte->ReplaceAllUsesWith(new_root));\n+          CHECK_OK(gte->parent()->RemoveInstruction(gte));\n         }\n       }\n     }\n@@ -2473,12 +2472,12 @@ void HloFusionInstruction::MergeFusionInstructionIntoMultiOutput(\n                       ->parameter_number())\n             : unfused_instructions.back();\n     new_roots.insert(unfused_root);\n-    TF_CHECK_OK(instruction_to_merge->ReplaceAllUsesWith(unfused_root));\n+    CHECK_OK(instruction_to_merge->ReplaceAllUsesWith(unfused_root));\n   }\n-  TF_CHECK_OK(\n+  CHECK_OK(\n       instruction_to_merge->parent()->RemoveInstruction(instruction_to_merge));\n   if (GetModule()) {\n-    TF_CHECK_OK(GetModule()->RemoveEmbeddedComputation(computation_to_merge));\n+    CHECK_OK(GetModule()->RemoveEmbeddedComputation(computation_to_merge));\n   }\n   for (int64_t i = unfused_instructions.size() - 1; i >= 0; --i) {\n     HloInstruction* instruction = unfused_instructions[i];\n@@ -2487,7 +2486,7 @@ void HloFusionInstruction::MergeFusionInstructionIntoMultiOutput(\n     } else {\n       FuseInstruction(instruction);\n     }\n-    TF_CHECK_OK(instruction->parent()->RemoveInstruction(instruction));\n+    CHECK_OK(instruction->parent()->RemoveInstruction(instruction));\n   }\n }\n "
        },
        {
            "sha": "7c6753c80071a62de6b47326eec06d982fa198ba",
            "filename": "third_party/xla/xla/hlo/ir/hlo_instructions.h",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instructions.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instructions.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instructions.h?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -18,7 +18,6 @@ limitations under the License.\n #ifndef XLA_HLO_IR_HLO_INSTRUCTIONS_H_\n #define XLA_HLO_IR_HLO_INSTRUCTIONS_H_\n \n-#include <cstddef>\n #include <cstdint>\n #include <memory>\n #include <optional>\n@@ -51,7 +50,6 @@ limitations under the License.\n #include \"xla/shape_util.h\"\n #include \"xla/tsl/lib/gtl/iterator_range.h\"\n #include \"xla/tsl/platform/logging.h\"  // IWYU pragma: keep\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/window_util.h\"\n #include \"xla/xla_data.pb.h\"\n \n@@ -1827,7 +1825,7 @@ class HloInfeedInstruction : public HloInstruction {\n   // as the shape of the infeed instruction which produces a tuple containing\n   // the infeed data shape and a TOKEN.\n   const Shape& infeed_shape() const {\n-    TF_DCHECK_OK(ShapeUtil::ValidateShapeWithOptionalLayout(shape()));\n+    DCHECK_OK(ShapeUtil::ValidateShapeWithOptionalLayout(shape()));\n     return ShapeUtil::GetSubshape(shape(), {0});\n   }\n   // Returns a serialized representation of this instruction."
        },
        {
            "sha": "f79b6ccfa396c782094df82df4197dd8ba687fb3",
            "filename": "third_party/xla/xla/hlo/ir/hlo_module.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -73,7 +73,6 @@ limitations under the License.\n #include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tuple_tree.h\"\n #include \"xla/util.h\"\n@@ -339,7 +338,7 @@ void HloModule::ReplaceComputations(\n     }\n     auto& computation = *iterator;\n     if (replacements.contains(computation.get())) {\n-      TF_CHECK_OK(RemoveEmbeddedComputation(iterator));\n+      CHECK_OK(RemoveEmbeddedComputation(iterator));\n     }\n   }\n \n@@ -1144,7 +1143,7 @@ HloInstruction* HloModule::OutlineExpressionFromComputation(\n             parameter_count, old_operand->shape(), \"p\"));\n         ++parameter_count;\n       }\n-      TF_CHECK_OK(\n+      CHECK_OK(\n           outlined_instruction->ReplaceOperandWith(operand_num, *operand_slot));\n     }\n \n@@ -1185,10 +1184,10 @@ HloInstruction* HloModule::OutlineExpressionFromComputation(\n   VLOG(2) << \"as a call \" << call->ToString();\n   VLOG(2) << \"to \" << nested_computation->ToString();\n \n-  TF_CHECK_OK(output->ReplaceAllUsesWith(call));\n+  CHECK_OK(output->ReplaceAllUsesWith(call));\n   for (auto i = instructions_to_outline.rbegin();\n        i != instructions_to_outline.rend(); ++i) {\n-    TF_CHECK_OK(computation->RemoveInstruction(*i));\n+    CHECK_OK(computation->RemoveInstruction(*i));\n   }\n \n   return call;\n@@ -1455,7 +1454,7 @@ void HloModule::Clone(const std::string& suffix, HloCloneContext* context,\n         }\n       }\n     }\n-    TF_CHECK_OK(module->set_schedule(std::move(clone_schedule)));\n+    CHECK_OK(module->set_schedule(std::move(clone_schedule)));\n   }\n   for (const auto& [parameter, indices, offset] : CrossProgramPrefetches()) {\n     module->AddCrossProgramPrefetch(parameter, indices, offset);"
        },
        {
            "sha": "0ce1ae5dce9507d82781057cf915f621d33224aa",
            "filename": "third_party/xla/xla/hlo/ir/hlo_module_test.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_module_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -29,9 +29,11 @@ limitations under the License.\n #include \"absl/container/btree_map.h\"\n #include \"absl/container/flat_hash_map.h\"\n #include \"absl/hash/hash.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_replace.h\"\n #include \"absl/strings/string_view.h\"\n+#include \"google/protobuf/text_format.h\"\n #include \"xla/hlo/analysis/alias_info.h\"\n #include \"xla/hlo/analysis/hlo_ordering.h\"\n #include \"xla/hlo/ir/hlo_computation.h\"\n@@ -43,20 +45,19 @@ limitations under the License.\n #include \"xla/hlo/utils/hlo_query.h\"\n #include \"xla/service/buffer_assignment.h\"\n #include \"xla/service/buffer_value.h\"\n+#include \"xla/service/compilation_environments.h\"\n #include \"xla/service/hlo_module_config.h\"\n #include \"xla/service/hlo_proto_util.h\"\n #include \"xla/service/logical_buffer.h\"\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/platform/test.h\"\n #include \"xla/tsl/util/proto/proto_matchers.h\"\n #include \"xla/util.h\"\n #include \"xla/xla.pb.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/protobuf.h\"\n \n namespace xla {\n namespace {\n@@ -222,7 +223,7 @@ TEST(HloModuleTest, CloneGeneral) {\n   CreateComputation(m1, \"TestComputation1\", true, schedule);\n   CreateComputation(m1, \"TestComputation3\", false, schedule);\n   CreateComputation(m1, \"TestComputation2\", false, schedule);\n-  TF_CHECK_OK(m1.set_schedule(schedule));\n+  CHECK_OK(m1.set_schedule(schedule));\n   m1.AddCrossProgramPrefetch(7, ShapeIndex({8}), 100);\n \n   std::unique_ptr<HloModule> m2 = m1.Clone(kCloneSuffix);\n@@ -264,7 +265,7 @@ TEST(HloModuleTest, CloneWithContextGeneral) {\n   CreateComputation(m1, \"TestComputation1\", true, schedule);\n   CreateComputation(m1, \"TestComputation3\", false, schedule);\n   CreateComputation(m1, \"TestComputation2\", false, schedule);\n-  TF_CHECK_OK(m1.set_schedule(schedule));\n+  CHECK_OK(m1.set_schedule(schedule));\n   m1.AddCrossProgramPrefetch(7, ShapeIndex({8}), 100);\n \n   auto [m2, clone_context] = m1.CloneWithContext(kCloneSuffix);"
        },
        {
            "sha": "b0b062032284261570e82fed1cdb58a722b978df",
            "filename": "third_party/xla/xla/hlo/parser/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -48,7 +48,6 @@ cc_library(\n         \"//xla/tsl/lib/gtl:map_util\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:logging\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base\",\n@@ -61,8 +60,8 @@ cc_library(\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:str_format\",\n         \"@com_google_absl//absl/types:span\",\n+        \"@com_google_protobuf//:protobuf\",\n         \"@eigen_archive//:eigen3\",\n-        \"@local_tsl//tsl/platform:protobuf\",\n     ],\n )\n "
        },
        {
            "sha": "5af5b556af200d419b4ae9e004857708aea92757",
            "filename": "third_party/xla/xla/hlo/parser/hlo_parser.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 10,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2Fhlo_parser.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2Fhlo_parser.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2Fhlo_parser.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -46,6 +46,7 @@ limitations under the License.\n #include \"absl/strings/strip.h\"\n #include \"absl/types/span.h\"\n #include \"Eigen/Core\"\n+#include \"google/protobuf/descriptor.h\"\n #include \"xla/array.h\"\n #include \"xla/comparison_util.h\"\n #include \"xla/hlo/ir/collective_op_group_mode.h\"\n@@ -79,12 +80,10 @@ limitations under the License.\n #include \"xla/tsl/lib/gtl/map_util.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tuple_tree.h\"\n #include \"xla/types.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/protobuf.h\"\n \n namespace xla {\n \n@@ -1145,7 +1144,7 @@ bool HloParserImpl::ParseHloModule(HloModule* module,\n   module->set_name(name);\n \n   if (is_scheduled.value_or(false)) {\n-    TF_CHECK_OK(module->set_schedule(ScheduleFromInstructionOrder(module)));\n+    CHECK_OK(module->set_schedule(ScheduleFromInstructionOrder(module)));\n   }\n   HloModuleConfig config = module->config();\n   bool default_config = true;\n@@ -1172,14 +1171,14 @@ bool HloParserImpl::ParseHloModule(HloModule* module,\n     for (int64_t p = 0; p < entry_computation->num_parameters(); p++) {\n       const Shape& param_shape =\n           entry_computation->parameter_instruction(p)->shape();\n-      TF_CHECK_OK(module->mutable_entry_computation_layout()\n-                      ->mutable_parameter_layout(p)\n-                      ->CopyLayoutFromShape(param_shape));\n+      CHECK_OK(module->mutable_entry_computation_layout()\n+                   ->mutable_parameter_layout(p)\n+                   ->CopyLayoutFromShape(param_shape));\n     }\n     const Shape& result_shape = entry_computation->root_instruction()->shape();\n-    TF_CHECK_OK(module->mutable_entry_computation_layout()\n-                    ->mutable_result_layout()\n-                    ->CopyLayoutFromShape(result_shape));\n+    CHECK_OK(module->mutable_entry_computation_layout()\n+                 ->mutable_result_layout()\n+                 ->CopyLayoutFromShape(result_shape));\n   }\n   if (frontend_attributes) {\n     module->set_frontend_attributes(frontend_attributes.value());\n@@ -7561,7 +7560,7 @@ bool HloParserImpl::ParseSingleInstruction(HloModule* module) {\n   for (auto& comp : computations_) {\n     module->AddEmbeddedComputation(std::move(comp));\n   }\n-  TF_CHECK_OK(module->set_schedule(ScheduleFromInstructionOrder(module)));\n+  CHECK_OK(module->set_schedule(ScheduleFromInstructionOrder(module)));\n   return true;\n }\n "
        },
        {
            "sha": "3c19e8e25d4004d89887fa3728931ae0b4621eb3",
            "filename": "third_party/xla/xla/hlo/pass/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fpass%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fpass%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fpass%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -89,13 +89,11 @@ cc_library(\n         \"//xla:util\",\n         \"//xla:xla_proto_cc\",\n         \"//xla/hlo/ir:hlo\",\n-        \"//xla/hlo/ir:hlo_module_group\",\n         \"//xla/service:compilation_stats\",\n         \"//xla/service:dump\",\n         \"//xla/service:hlo_graph_dumper\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:logging\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/hash\","
        },
        {
            "sha": "257fa82cc242f1426bf9104a6bd30c6c01c61190",
            "filename": "third_party/xla/xla/hlo/pass/hlo_pass_pipeline.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fpass%2Fhlo_pass_pipeline.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Fpass%2Fhlo_pass_pipeline.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fpass%2Fhlo_pass_pipeline.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -28,13 +28,11 @@ limitations under the License.\n #include \"absl/strings/str_format.h\"\n #include \"absl/strings/str_join.h\"\n #include \"absl/strings/string_view.h\"\n-#include \"xla/hlo/ir/hlo_module_group.h\"\n #include \"xla/hlo/pass/hlo_pass_interface.h\"\n #include \"xla/service/dump.h\"\n #include \"xla/status_macros.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla.pb.h\"\n@@ -49,8 +47,8 @@ void RecordPassStartMetadata(HloModule& module, const std::string& pass_name,\n                              const std::string& pipeline_name) {\n   module.metadata()->RecordPassStart();\n   // An HloPassMetadata was just created so absl::Status should always be OK.\n-  TF_CHECK_OK(module.metadata()->set_current_pass_name(pass_name));\n-  TF_CHECK_OK(module.metadata()->set_current_pass_pipeline_name(pipeline_name));\n+  CHECK_OK(module.metadata()->set_current_pass_name(pass_name));\n+  CHECK_OK(module.metadata()->set_current_pass_pipeline_name(pipeline_name));\n }\n \n absl::Status AttemptRecordPassEndMetadata(HloModule& module,"
        },
        {
            "sha": "87ae4bead709e803890709557ecbd5f01f96edb7",
            "filename": "third_party/xla/xla/hlo/tools/BUILD",
            "status": "modified",
            "additions": 12,
            "deletions": 18,
            "changes": 30,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -29,15 +29,13 @@ xla_cc_binary(\n     deps = [\n         \"//xla/tsl/lib/io:buffered_inputstream\",\n         \"//xla/tsl/lib/io:random_inputstream\",\n+        \"//xla/tsl/platform:env\",\n         \"//xla/tsl/util:command_line_flags\",\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/strings\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:logging\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -46,12 +44,11 @@ xla_cc_binary(\n     srcs = [\"show_literal.cc\"],\n     deps = [\n         \"//xla:literal\",\n-        \"//xla:types\",\n         \"//xla:xla_data_proto_cc\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:logging\",\n+        \"//xla/tsl/platform:env\",\n+        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -60,13 +57,11 @@ xla_cc_binary(\n     srcs = [\"convert_computation.cc\"],\n     deps = [\n         \"//xla/service:hlo_proto_cc\",\n+        \"//xla/tsl/platform:env\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:logging\",\n+        \"@com_google_protobuf//:protobuf\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:protobuf\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -75,14 +70,14 @@ xla_cc_binary(\n     srcs = [\"hlo_module_metadata_processor.cc\"],\n     deps = [\n         \"//xla/service:hlo_proto_cc\",\n+        \"//xla/tsl/platform:env\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n+        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:str_format\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:logging\",\n+        \"@com_google_protobuf//:protobuf\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:protobuf\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -107,12 +102,11 @@ xla_cc_binary(\n     deps = [\n         \"//xla:util\",\n         \"//xla/service:hlo_proto_cc\",\n+        \"//xla/tsl/platform:env\",\n         \"//xla/tsl/util:command_line_flags\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:logging\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n "
        },
        {
            "sha": "c38c0cbf4820d8bac0fac39ce5f84ae6babc93ec",
            "filename": "third_party/xla/xla/hlo/tools/convert_computation.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fconvert_computation.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fconvert_computation.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fconvert_computation.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -16,21 +16,19 @@ limitations under the License.\n // Usage: convert_computation <txt2bin|bin2txt> serialized_computation_proto\n //\n // bin2txt spits out the result to stdout. txt2bin modifies the file in place.\n-#include \"absl/log/check.h\"\n-#include \"absl/log/log.h\"\n-#include \"tsl/platform/status.h\"\n #ifndef _WIN32\n #include <unistd.h>\n #endif\n #include <stdio.h>\n \n #include <string>\n \n+#include \"absl/log/check.h\"\n+#include \"absl/log/log.h\"\n+#include \"google/protobuf/text_format.h\"\n #include \"xla/service/hlo.pb.h\"\n-#include \"tsl/platform/env.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/protobuf.h\"\n \n namespace xla {\n namespace tools {\n@@ -39,10 +37,10 @@ void RealMain(const std::string& mode, const std::string& path) {\n   HloSnapshot module;\n   tsl::Env* env = tsl::Env::Default();\n   if (mode == \"txt2bin\") {\n-    TF_CHECK_OK(tsl::ReadTextProto(env, path, &module));\n-    TF_CHECK_OK(tsl::WriteBinaryProto(env, path, module));\n+    CHECK_OK(tsl::ReadTextProto(env, path, &module));\n+    CHECK_OK(tsl::WriteBinaryProto(env, path, module));\n   } else if (mode == \"bin2txt\") {\n-    TF_CHECK_OK(tsl::ReadBinaryProto(env, path, &module));\n+    CHECK_OK(tsl::ReadBinaryProto(env, path, &module));\n     std::string out;\n     tsl::protobuf::TextFormat::PrintToString(module, &out);\n     fprintf(stdout, \"%s\", out.c_str());"
        },
        {
            "sha": "d2e484aae6fb0880140a488c28e85da4998a943c",
            "filename": "third_party/xla/xla/hlo/tools/hex_floats_to_packed_literal.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhex_floats_to_packed_literal.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhex_floats_to_packed_literal.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhex_floats_to_packed_literal.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -25,12 +25,10 @@ limitations under the License.\n #include \"absl/strings/string_view.h\"\n #include \"xla/tsl/lib/io/buffered_inputstream.h\"\n #include \"xla/tsl/lib/io/random_inputstream.h\"\n+#include \"xla/tsl/platform/env.h\"\n+#include \"xla/tsl/platform/file_system.h\"\n #include \"xla/tsl/util/command_line_flags.h\"\n-#include \"tsl/platform/env.h\"\n-#include \"tsl/platform/file_system.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n \n using std::string;\n \n@@ -57,7 +55,7 @@ int main(int argc, char** argv) {\n   }\n \n   std::unique_ptr<tsl::RandomAccessFile> file;\n-  TF_CHECK_OK(tsl::Env::Default()->NewRandomAccessFile(input_file, &file));\n+  CHECK_OK(tsl::Env::Default()->NewRandomAccessFile(input_file, &file));\n \n   std::vector<float> floats;\n   std::string line;\n@@ -72,7 +70,6 @@ int main(int argc, char** argv) {\n \n   absl::string_view content(absl::bit_cast<const char*>(floats.data()),\n                             floats.size() * sizeof(float));\n-  TF_CHECK_OK(\n-      tsl::WriteStringToFile(tsl::Env::Default(), output_file, content));\n+  CHECK_OK(tsl::WriteStringToFile(tsl::Env::Default(), output_file, content));\n   return 0;\n }"
        },
        {
            "sha": "43dbaf42977ca4c0f7eecb2e0320c88dcf523e0e",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -201,7 +201,6 @@ xla_cc_binary(\n         \"//xla/service:hlo_proto_cc\",\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:errors\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/util:command_line_flags\",\n         \"@com_google_absl//absl/log\","
        },
        {
            "sha": "ccba8a9cd6b391b895b935e56df49a50e5da29ef",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/hlo_diff_main.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_diff_main.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_diff_main.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_diff_main.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -38,7 +38,6 @@ limitations under the License.\n #include \"xla/service/hlo_module_util.h\"\n #include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/errors.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/util/command_line_flags.h\"\n #include \"tsl/platform/init_main.h\"\n@@ -120,8 +119,8 @@ absl::StatusOr<std::unique_ptr<HloModule>> LoadHLOModule(\n     const Options::HloPath& hlo_path) {\n   if (!hlo_path.hlo_snapshot.empty()) {\n     HloSnapshot snapshot;\n-    TF_CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), hlo_path.hlo_snapshot,\n-                                     &snapshot))\n+    CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), hlo_path.hlo_snapshot,\n+                                  &snapshot))\n         << \"Can't open, read, or parse HloSnapshot proto at \"\n         << hlo_path.hlo_snapshot;\n     return BuildHloModule(snapshot.hlo().hlo_module());\n@@ -200,23 +199,23 @@ absl::Status RunGumgraphDiff(HloModule& first_module, HloModule& second_module,\n }\n \n void RealMain(const Options& opts) {\n-  TF_CHECK_OK(CheckGroupFlags(opts.first))\n+  CHECK_OK(CheckGroupFlags(opts.first))\n       << \"Can only specify one and ony one of --first_hlo_snapshot, \"\n          \"--first_hlo_proto, --first_hlo_module_proto, --first_hlo_text\";\n-  TF_CHECK_OK(CheckGroupFlags(opts.second))\n+  CHECK_OK(CheckGroupFlags(opts.second))\n       << \"Can only specify one and ony one of --second_hlo_snapshot, \"\n          \"--second_hlo_proto, --second_hlo_module_proto, --second_hlo_text\";\n \n   LOG(INFO) << \"Loading first module\";\n   absl::StatusOr<std::unique_ptr<HloModule>> first_module =\n       LoadHLOModule(opts.first);\n-  TF_CHECK_OK(first_module.status()) << \"Failed to build first HLO module\";\n+  CHECK_OK(first_module.status()) << \"Failed to build first HLO module\";\n   LOG(INFO) << \"Loaded first module\";\n \n   LOG(INFO) << \"Loading second module\";\n   absl::StatusOr<std::unique_ptr<HloModule>> second_module =\n       LoadHLOModule(opts.second);\n-  TF_CHECK_OK(second_module.status()) << \"Failed to build second HLO module\";\n+  CHECK_OK(second_module.status()) << \"Failed to build second HLO module\";\n   LOG(INFO) << \"Loaded second module\";\n \n   CHECK_OK("
        },
        {
            "sha": "c0280af7522074e9ab9218c95b27a19f65b33438",
            "filename": "third_party/xla/xla/hlo/tools/hlo_module_metadata_processor.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_module_metadata_processor.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_module_metadata_processor.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_module_metadata_processor.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -36,14 +36,14 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/container/flat_hash_map.h\"\n+#include \"absl/log/check.h\"\n+#include \"absl/log/log.h\"\n #include \"absl/strings/str_format.h\"\n #include \"absl/strings/str_join.h\"\n+#include \"google/protobuf/text_format.h\"\n #include \"xla/service/hlo.pb.h\"\n-#include \"tsl/platform/env.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/protobuf.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n namespace tools {\n@@ -99,8 +99,7 @@ int main(int argc, char** argv) {\n \n   QCHECK_EQ(argc, 2) << \"usage: \" << argv[0] << \" <filepath>\";\n   std::string serialized;\n-  TF_CHECK_OK(tsl::ReadFileToString(tsl::Env::Default(), std::string(argv[1]),\n-                                    &serialized));\n+  CHECK_OK(tsl::ReadFileToString(tsl::Env::Default(), argv[1], &serialized));\n   xla::tools::ProcessMetadata(serialized);\n   return 0;\n }"
        },
        {
            "sha": "662831b2bf7c1e979f26aa6d880c08b9c5ef9e64",
            "filename": "third_party/xla/xla/hlo/tools/hlo_proto_to_json.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_proto_to_json.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_proto_to_json.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_proto_to_json.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -28,14 +28,13 @@ limitations under the License.\n #include <string>\n #include <vector>\n \n+#include \"absl/log/check.h\"\n #include \"absl/status/statusor.h\"\n #include \"xla/service/hlo.pb.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/util/command_line_flags.h\"\n #include \"xla/util.h\"\n-#include \"tsl/platform/env.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n \n using std::string;\n \n@@ -58,14 +57,14 @@ absl::StatusOr<std::string> ToJson(const tsl::protobuf::Message& message) {\n \n void RealMain(const std::string& input, const std::string& output) {\n   HloProto hlo_proto;\n-  TF_CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), input, &hlo_proto))\n+  CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), input, &hlo_proto))\n       << \"Can't open, read, or parse input file \" << input;\n \n   auto statusor = ToJson(hlo_proto);\n   QCHECK(statusor.ok()) << \"Error converting \" << input << \" to JSON.\"\n                         << statusor.status();\n \n-  TF_CHECK_OK(\n+  CHECK_OK(\n       tsl::WriteStringToFile(tsl::Env::Default(), output, statusor.value()));\n }\n "
        },
        {
            "sha": "e13b0f72f4d933f953202063c93826792fa5b8ca",
            "filename": "third_party/xla/xla/hlo/tools/show_literal.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fshow_literal.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fshow_literal.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fshow_literal.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -22,13 +22,12 @@ limitations under the License.\n \n #include <string>\n \n+#include \"absl/log/check.h\"\n+#include \"absl/log/log.h\"\n #include \"xla/literal.h\"\n-#include \"xla/types.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/env.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n \n int main(int argc, char **argv) {\n   tsl::port::InitMain(argv[0], &argc, &argv);\n@@ -39,8 +38,7 @@ int main(int argc, char **argv) {\n   }\n \n   xla::LiteralProto literal_proto;\n-  TF_CHECK_OK(\n-      tsl::ReadBinaryProto(tsl::Env::Default(), argv[1], &literal_proto));\n+  CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), argv[1], &literal_proto));\n   xla::Literal literal = xla::Literal::CreateFromProto(literal_proto).value();\n   LOG(INFO) << \"literal: \" << literal_proto.ShortDebugString();\n   fprintf(stderr, \"%s\\n\", literal.ToString().c_str());"
        },
        {
            "sha": "89f779559bcd722f662f56526fa4b5a67084e752",
            "filename": "third_party/xla/xla/hlo/transforms/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -398,6 +398,7 @@ cc_library(\n     hdrs = [\"despecializer.h\"],\n     deps = [\n         \":defuser\",\n+        \"//xla:shape_util\",\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/pass:hlo_pass\",\n@@ -408,6 +409,7 @@ cc_library(\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings:string_view\",\n     ],\n@@ -607,9 +609,9 @@ xla_cc_test(\n         \"//xla/hlo/transforms/simplifiers:tuple_simplifier\",\n         \"//xla/service:call_inliner\",\n         \"//xla/service:pattern_matcher\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_googletest//:gtest\",\n         \"@com_google_googletest//:gtest_main\",  # fixdeps: keep"
        },
        {
            "sha": "04e8f980ade7c10e1a99f274fc3bde35d247d836",
            "filename": "third_party/xla/xla/hlo/transforms/call_splitter_test.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 19,
            "changes": 38,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fcall_splitter_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fcall_splitter_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fcall_splitter_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n \n #include <gmock/gmock.h>\n #include <gtest/gtest.h>\n+#include \"absl/log/check.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/statusor.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n@@ -34,7 +35,6 @@ limitations under the License.\n #include \"xla/hlo/transforms/simplifiers/tuple_simplifier.h\"\n #include \"xla/service/call_inliner.h\"\n #include \"xla/service/pattern_matcher.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n@@ -89,9 +89,9 @@ ENTRY entry {\n   CallParameterCleanup cleanup;\n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(cleanup.Run(module.get()).status());\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(cleanup.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   // Verify we got the two-call structure, with the mul in the second call.\n   HloInstruction* call1;\n@@ -107,8 +107,8 @@ ENTRY entry {\n   // Verify we hooked up all the parameters correctly by simplifying again and\n   // making sure it's equivalent to what we had in the beginning.\n   CallInliner call_inliner;\n-  TF_CHECK_OK(call_inliner.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(call_inliner.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   EXPECT_THAT(module->entry_computation()->root_instruction(),\n               GmockMatch(m::Tuple(m::Multiply(\n@@ -151,9 +151,9 @@ ENTRY entry {\n   CallParameterCleanup cleanup;\n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(cleanup.Run(module.get()).status());\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(cleanup.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   HloInstruction* call1;\n   HloInstruction* call2;\n@@ -208,9 +208,9 @@ ENTRY entry {\n   CallParameterCleanup cleanup;\n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(cleanup.Run(module.get()).status());\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(cleanup.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   HloInstruction* call1;\n   HloInstruction* call1_copy;\n@@ -264,9 +264,9 @@ ENTRY entry {\n   CallParameterCleanup cleanup;\n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(cleanup.Run(module.get()).status());\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(cleanup.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   HloInstruction* call1;\n   HloInstruction* call1_copy;\n@@ -320,9 +320,9 @@ ENTRY entry {\n   CallParameterCleanup cleanup;\n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(cleanup.Run(module.get()).status());\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(cleanup.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   HloInstruction* call0_first;\n   HloInstruction* call1_first;\n@@ -374,7 +374,7 @@ ENTRY entry {\n   EXPECT_FALSE(splitter.Run(module.get()).value());\n \n   AlgebraicSimplifier simplifier(AlgebraicSimplifierOptions{});\n-  TF_CHECK_OK(simplifier.Run(module.get()).status());\n+  CHECK_OK(simplifier.Run(module.get()).status());\n \n   EXPECT_TRUE(splitter.Run(module.get()).value());\n }"
        },
        {
            "sha": "3f97bbe40ce0ca72443e3c1057953a79d97abf9e",
            "filename": "third_party/xla/xla/hlo/transforms/despecializer.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fdespecializer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fdespecializer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fdespecializer.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -22,15 +22,22 @@ limitations under the License.\n \n #include \"absl/algorithm/container.h\"\n #include \"absl/container/flat_hash_set.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/string_view.h\"\n #include \"xla/hlo/ir/hlo_casting_utils.h\"\n+#include \"xla/hlo/ir/hlo_computation.h\"\n+#include \"xla/hlo/ir/hlo_instruction.h\"\n #include \"xla/hlo/ir/hlo_instructions.h\"\n+#include \"xla/hlo/ir/hlo_module.h\"\n+#include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/hlo/transforms/defuser.h\"\n #include \"xla/hlo/transforms/simplifiers/float_normalization.h\"\n #include \"xla/hlo/transforms/simplifiers/hlo_memory_scheduler.h\"\n #include \"xla/hlo/transforms/simplifiers/sub_byte_normalization.h\"\n+#include \"xla/shape.h\"\n+#include \"xla/shape_util.h\"\n #include \"xla/xla_data.pb.h\"\n \n namespace xla {\n@@ -82,7 +89,7 @@ absl::StatusOr<bool> AssumeGatherIndicesInBoundRewriteToCopy::RunImpl(\n     auto copy = computation->AddInstruction(\n         HloInstruction::CreateUnary(gather_indices->shape(), HloOpcode::kCopy,\n                                     gather_indices->mutable_operand(0)));\n-    TF_CHECK_OK(computation->ReplaceInstruction(gather_indices, copy));\n+    CHECK_OK(computation->ReplaceInstruction(gather_indices, copy));\n   }\n   return !candidates.empty();\n }\n@@ -188,8 +195,8 @@ absl::StatusOr<bool> DeconstructReduceWindowToReduceBroadcast::RunImpl(\n     VLOG(2) << \"reduce_window:\" << reduce_window->ToString();\n     VLOG(2) << \"reduce:\" << reduce_instr->ToString();\n     VLOG(2) << \"broadcast:\" << broadcast_instr->ToString();\n-    TF_CHECK_OK(reduce_window->parent()->ReplaceInstruction(reduce_window,\n-                                                            broadcast_instr));\n+    CHECK_OK(reduce_window->parent()->ReplaceInstruction(reduce_window,\n+                                                         broadcast_instr));\n     changed = true;\n   }\n   return changed;"
        },
        {
            "sha": "c8708790c4681ea40378b7888c8be281b61165a8",
            "filename": "third_party/xla/xla/hlo/transforms/expanders/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fexpanders%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fexpanders%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fexpanders%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -516,9 +516,11 @@ cc_library(\n     hdrs = [\"dynamic_index_splitter.h\"],\n     deps = [\n         \"//xla:shape_util\",\n+        \"//xla:status_macros\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/pass:hlo_pass\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/types:span\","
        },
        {
            "sha": "3479d636fe94f9fa037ad537cd641bf08148505d",
            "filename": "third_party/xla/xla/hlo/transforms/expanders/dynamic_index_splitter.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fexpanders%2Fdynamic_index_splitter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fexpanders%2Fdynamic_index_splitter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fexpanders%2Fdynamic_index_splitter.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/container/flat_hash_set.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/string_view.h\"\n #include \"absl/types/span.h\"\n@@ -29,6 +30,7 @@ limitations under the License.\n #include \"xla/hlo/ir/hlo_instructions.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/shape_util.h\"\n+#include \"xla/status_macros.h\"\n \n namespace xla {\n \n@@ -56,11 +58,11 @@ absl::StatusOr<bool> DynamicIndexSplitter::RunImpl(\n         // If the operand rank is 0, directly replace R0 DS/DUS with the\n         // operand (for DS) or update (for DUS).\n         if (is_update) {\n-          TF_CHECK_OK(parent->ReplaceInstruction(\n-              dynamic_op, dynamic_op->mutable_operand(1)));\n+          CHECK_OK(parent->ReplaceInstruction(dynamic_op,\n+                                              dynamic_op->mutable_operand(1)));\n         } else {\n-          TF_CHECK_OK(parent->ReplaceInstruction(\n-              dynamic_op, dynamic_op->mutable_operand(0)));\n+          CHECK_OK(parent->ReplaceInstruction(dynamic_op,\n+                                              dynamic_op->mutable_operand(0)));\n         }\n         changed = true;\n         continue;\n@@ -95,8 +97,8 @@ absl::StatusOr<bool> DynamicIndexSplitter::RunImpl(\n                     dynamic_op->shape(), dynamic_op->mutable_operand(0),\n                     absl::MakeSpan(index_array),\n                     dynamic_op->dynamic_slice_sizes());\n-      TF_CHECK_OK(parent->ReplaceWithNewInstruction(dynamic_op,\n-                                                    std::move(new_dynamic_op)));\n+      CHECK_OK(parent->ReplaceWithNewInstruction(dynamic_op,\n+                                                 std::move(new_dynamic_op)));\n       changed = true;\n     }\n   }"
        },
        {
            "sha": "1382fdbad70b86bba24249c9656e3c0c5b87cda7",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/BUILD",
            "status": "modified",
            "additions": 11,
            "deletions": 22,
            "changes": 33,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -162,14 +162,12 @@ cc_library(\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/pass:hlo_pass\",\n         \"//xla/service:float_support\",\n+        \"//xla/tsl/platform:errors\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings:string_view\",\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:logging\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -419,10 +417,6 @@ cc_library(\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:logging\",\n-        \"@local_tsl//tsl/platform:status\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n \n@@ -536,23 +530,22 @@ cc_library(\n     srcs = [\"convolution_group_converter.cc\"],\n     hdrs = [\"convolution_group_converter.h\"],\n     deps = [\n+        \"//xla:comparison_util\",\n         \"//xla:literal\",\n         \"//xla:literal_util\",\n         \"//xla:shape_util\",\n         \"//xla:status_macros\",\n-        \"//xla:types\",\n         \"//xla:util\",\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/pass:hlo_pass\",\n         \"//xla/service:hlo_creation_utils\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n+        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:logging\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -951,7 +944,6 @@ cc_library(\n     hdrs = [\"hlo_rematerialization_data_structures.h\"],\n     deps = [\n         \"//xla/hlo/ir:hlo\",\n-        \"//xla/tsl/platform:status\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n@@ -1343,10 +1335,9 @@ xla_cc_test(\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/testlib:hlo_hardware_independent_test_base\",\n-        \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_googletest//:gtest\",\n         \"@com_google_googletest//:gtest_main\",\n-        \"@local_tsl//tsl/platform:test\",\n     ],\n )\n \n@@ -1366,16 +1357,15 @@ cc_library(\n         \"//xla/hlo/utils:hlo_query\",\n         \"//xla/service:call_graph\",\n         \"//xla/service:pattern_matcher\",\n+        \"//xla/tsl/platform:errors\",\n+        \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:status\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n \n@@ -1606,7 +1596,6 @@ cc_library(\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings:string_view\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -1617,15 +1606,16 @@ cc_library(\n     deps = [\n         \"//xla:shape_layout\",\n         \"//xla:shape_util\",\n+        \"//xla:util\",\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/pass:hlo_pass\",\n+        \"//xla/tsl/platform:errors\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -1883,11 +1873,10 @@ xla_cc_test(\n         \"//xla/hlo/testlib:hlo_hardware_independent_test_base\",\n         \"//xla/hlo/testlib:pattern_matcher_gmock\",\n         \"//xla/hlo/testlib:test\",\n-        \"//xla/service:call_inliner\",\n         \"//xla/service:pattern_matcher\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_googletest//:gtest\",\n         \"@com_google_googletest//:gtest_main\",  # fixdeps: keep"
        },
        {
            "sha": "fef77cbdc6ec683ab48bf1ea2ee93c802b475c7b",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/algebraic_simplifier.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 10,
            "changes": 15,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Falgebraic_simplifier.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Falgebraic_simplifier.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Falgebraic_simplifier.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -18,7 +18,6 @@ limitations under the License.\n #include <algorithm>\n #include <array>\n #include <cmath>\n-#include <cstddef>\n #include <cstdint>\n #include <iterator>\n #include <limits>\n@@ -75,10 +74,6 @@ limitations under the License.\n #include \"xla/util.h\"\n #include \"xla/window_util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/errors.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n-#include \"tsl/platform/statusor.h\"\n \n namespace xla {\n \n@@ -581,7 +576,7 @@ bool AlgebraicSimplifierVisitor::Run(HloComputation* computation,\n                                      const AlgebraicSimplifierOptions& options,\n                                      AlgebraicSimplifier* simplifier) {\n   ResetState(computation);\n-  TF_CHECK_OK(computation->Accept(this));\n+  CHECK_OK(computation->Accept(this));\n   return changed();\n }\n \n@@ -798,7 +793,7 @@ void AlgebraicSimplifierVisitor::ReplaceWithBitcast(HloInstruction* instruction,\n \n   auto bitcast = instruction->AddInstruction(\n       HloInstruction::CreateBitcast(instruction->shape(), operand));\n-  TF_CHECK_OK(ReplaceInstruction(instruction, bitcast));\n+  CHECK_OK(ReplaceInstruction(instruction, bitcast));\n }\n \n // Replace the old instruction with the new one if they are compatible, i.e.,\n@@ -1587,7 +1582,7 @@ bool AlgebraicSimplifierVisitor::SwapCopyBitcastCopy(\n             bitcast->CloneWithNewOperands(new_shape.value(), {op})));\n     VLOG(2) << \"Replace with \" << repl->operand(0)->ToString() << \"\\n\"\n             << repl->ToString() << \"\\n\";\n-    TF_CHECK_OK(ReplaceWithNewInstruction(root_copy, std::move(repl)));\n+    CHECK_OK(ReplaceWithNewInstruction(root_copy, std::move(repl)));\n     return true;\n   }\n \n@@ -1603,7 +1598,7 @@ bool AlgebraicSimplifierVisitor::SwapCopyBitcastCopy(\n             root_copy->CloneWithNewOperands(new_shape.value(), {op})));\n     VLOG(2) << \"Replace with \" << repl->operand(0)->ToString() << \"\\n\"\n             << repl->ToString() << \"\\n\";\n-    TF_CHECK_OK(ReplaceWithNewInstruction(root_copy, std::move(repl)));\n+    CHECK_OK(ReplaceWithNewInstruction(root_copy, std::move(repl)));\n     return true;\n   }\n   return false;\n@@ -9270,7 +9265,7 @@ absl::Status AlgebraicSimplifierVisitor::HandleTranspose(\n       *new_dot->mutable_shape()->mutable_layout() = transpose->shape().layout();\n \n       dot->SetupDerivedInstruction(new_dot);\n-      TF_CHECK_OK(ReplaceInstruction(transpose, new_dot));\n+      CHECK_OK(ReplaceInstruction(transpose, new_dot));\n       return true;\n     }());\n     if (did_transform) {"
        },
        {
            "sha": "b56ddac8e108c606ad216c2523fd1091b3055982",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/ar_crs_combiner.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Far_crs_combiner.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Far_crs_combiner.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Far_crs_combiner.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -44,10 +44,9 @@ limitations under the License.\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/status_macros.h\"\n+#include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/errors.h\"\n-#include \"tsl/platform/status.h\"\n-#include \"tsl/platform/statusor.h\"\n \n namespace xla {\n namespace {\n@@ -578,8 +577,8 @@ absl::StatusOr<bool> ArCrsCombiner::RewriteGraph() {\n       auto channel_id = all_reduce->channel_id();\n       auto prev = all_reduce->mutable_operand(0);\n       auto next = all_reduce->users()[0];\n-      TF_CHECK_OK(all_reduce->ReplaceUseWith(next, prev));\n-      TF_CHECK_OK(parent_computation->RemoveInstruction(all_reduce));\n+      CHECK_OK(all_reduce->ReplaceUseWith(next, prev));\n+      CHECK_OK(parent_computation->RemoveInstruction(all_reduce));\n       while (!next->IsCrossReplicaAllReduce()) {\n         switch (next->opcode()) {\n           case HloOpcode::kBitcast:\n@@ -598,7 +597,7 @@ absl::StatusOr<bool> ArCrsCombiner::RewriteGraph() {\n             // other_operand is a cross-module AR, which can be eliminated.\n             if (other_operand->IsCrossModuleAllReduce() &&\n                 other_operand->user_count() == 1) {\n-              TF_CHECK_OK(other_operand->ReplaceAllUsesWith(\n+              CHECK_OK(other_operand->ReplaceAllUsesWith(\n                   other_operand->mutable_operand(0)));\n             } else {\n               auto shape = other_operand->shape();\n@@ -609,7 +608,7 @@ absl::StatusOr<bool> ArCrsCombiner::RewriteGraph() {\n               auto division = parent_computation->AddInstruction(\n                   HloInstruction::CreateBinary(shape, HloOpcode::kDivide,\n                                                other_operand, divisor));\n-              TF_CHECK_OK(other_operand->ReplaceUseWith(next, division));\n+              CHECK_OK(other_operand->ReplaceUseWith(next, division));\n             }\n             break;\n           }"
        },
        {
            "sha": "b1a15d5615ea977f3f7c113f7eec28bae004cfcc",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/bfloat16_conversion_folding.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fbfloat16_conversion_folding.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fbfloat16_conversion_folding.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fbfloat16_conversion_folding.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -19,7 +19,9 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/container/flat_hash_set.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/status/statusor.h\"\n #include \"absl/strings/string_view.h\"\n #include \"xla/hlo/analysis/hlo_dataflow_analysis.h\"\n #include \"xla/hlo/ir/dfs_hlo_visitor_with_default.h\"\n@@ -28,11 +30,9 @@ limitations under the License.\n #include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/service/float_support.h\"\n #include \"xla/shape_util.h\"\n+#include \"xla/tsl/platform/errors.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/errors.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n \n@@ -55,7 +55,7 @@ class BFloat16ConversionFoldingVisitor : public DfsHloVisitorWithDefault {\n                   BFloat16ConversionFolding* bfloat16_conversion_folding) {\n     BFloat16ConversionFoldingVisitor visitor(computation, bfloat16_support,\n                                              bfloat16_conversion_folding);\n-    TF_CHECK_OK(computation->Accept(&visitor));\n+    CHECK_OK(computation->Accept(&visitor));\n     return visitor.changed_;\n   }\n "
        },
        {
            "sha": "b3cc640097d3b0d258aeeac07d5c49d50c573aec",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/call_parameter_cleanup_test.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fcall_parameter_cleanup_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fcall_parameter_cleanup_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fcall_parameter_cleanup_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n \n #include <gmock/gmock.h>\n #include <gtest/gtest.h>\n+#include \"absl/log/check.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/statusor.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n@@ -30,7 +31,6 @@ limitations under the License.\n #include \"xla/hlo/transforms/simplifiers/hlo_dce.h\"\n #include \"xla/hlo/transforms/simplifiers/tuple_simplifier.h\"\n #include \"xla/service/pattern_matcher.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n@@ -77,8 +77,8 @@ ENTRY entry {\n \n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   // We expect the parameter at index 1 to be removed.\n   HloInstruction* call;\n@@ -116,8 +116,8 @@ ENTRY entry {\n \n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   // We expect the parameter at index 1 to be passed through directly from the\n   // entry computation parameter, and removed from the call parameters.\n@@ -159,8 +159,8 @@ ENTRY entry {\n \n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   // We expect the parameter at index 2 to be passed through directly from the\n   // entry computation parameter, but not removed from the call parameters.\n@@ -203,8 +203,8 @@ ENTRY entry {\n \n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   HloInstruction* call;\n   EXPECT_THAT(module->entry_computation()->root_instruction(),\n@@ -243,8 +243,8 @@ ENTRY entry {\n \n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   // We expect the parameter at index 1 to be passed through directly from the\n   // entry computation parameter, but not removed from the call parameters.\n@@ -297,8 +297,8 @@ ENTRY entry {\n \n   HloDCE dce;\n   TupleSimplifier tuple_simplifier;\n-  TF_CHECK_OK(dce.Run(module.get()).status());\n-  TF_CHECK_OK(tuple_simplifier.Run(module.get()).status());\n+  CHECK_OK(dce.Run(module.get()).status());\n+  CHECK_OK(tuple_simplifier.Run(module.get()).status());\n \n   // We expect both call sites to use the same computation, for 3 computations\n   // total, rather than 4."
        },
        {
            "sha": "0a5b3a7226ec84362802023b57225979e6ff3afe",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/convolution_group_converter.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fconvolution_group_converter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fconvolution_group_converter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fconvolution_group_converter.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -22,23 +22,24 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/container/flat_hash_set.h\"\n+#include \"absl/log/check.h\"\n+#include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/status/statusor.h\"\n #include \"absl/strings/string_view.h\"\n+#include \"xla/comparison_util.h\"\n #include \"xla/hlo/ir/dfs_hlo_visitor_with_default.h\"\n #include \"xla/hlo/ir/hlo_computation.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/literal.h\"\n #include \"xla/literal_util.h\"\n+#include \"xla/primitive_util.h\"\n #include \"xla/service/hlo_creation_utils.h\"\n+#include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/status_macros.h\"\n-#include \"xla/types.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/errors.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n \n@@ -104,7 +105,7 @@ bool ConvolutionVisitor::Run(\n     bool convert_batch_groups_only, bool filter_expansion) {\n   ConvolutionVisitor visitor(computation, should_expand, is_cost_viable,\n                              convert_batch_groups_only, filter_expansion);\n-  TF_CHECK_OK(computation->Accept(&visitor));\n+  CHECK_OK(computation->Accept(&visitor));\n   return visitor.changed_;\n }\n \n@@ -317,7 +318,7 @@ absl::Status ConvolutionVisitor::HandleBatchGroupCount(\n             /*preferred_element_type=*/convolution->shape().element_type())\n             .value();\n     convolution->SetupDerivedInstruction(new_convolution);\n-    TF_CHECK_OK(computation_->ReplaceInstruction(\n+    CHECK_OK(computation_->ReplaceInstruction(\n         convolution,\n         MakeReshapeHlo(convolution->shape(), new_convolution).value()));\n     changed_ = true;\n@@ -416,7 +417,7 @@ absl::Status ConvolutionVisitor::HandleBatchGroupCount(\n     auto reduce_window_converted =\n         HloInstruction::CreateConvert(convert_back_shape, reduce_window);\n \n-    TF_CHECK_OK(computation_->ReplaceWithNewInstruction(\n+    CHECK_OK(computation_->ReplaceWithNewInstruction(\n         convolution, std::move(reduce_window_converted)));\n     changed_ = true;\n   }"
        },
        {
            "sha": "0e9cba5212a0320df9ec2c846bf017b86398c9f9",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/hlo_rematerialization_data_structures.h",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fhlo_rematerialization_data_structures.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fhlo_rematerialization_data_structures.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fhlo_rematerialization_data_structures.h?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -31,7 +31,6 @@ limitations under the License.\n #include \"absl/types/span.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n #include \"xla/hlo/ir/hlo_schedule.h\"\n-#include \"xla/tsl/platform/status.h\"\n \n namespace xla {\n // Type holding a unique identifier for each Buffer object.\n@@ -116,7 +115,7 @@ using UsesList = absl::InlinedVector<HloRematItemUse, 3>;\n class HloRematInstructionList {\n  public:\n   explicit HloRematInstructionList(const HloInstructionSequence& order) {\n-    TF_CHECK_OK(UpdateFromSequence(order, /*preserve_denylist=*/false));\n+    CHECK_OK(UpdateFromSequence(order, /*preserve_denylist=*/false));\n   }\n \n   absl::Status UpdateFromSequence(const HloInstructionSequence& order,"
        },
        {
            "sha": "2a5aa472ef44f58ac6c7ecd4c6927e30ff9f9471",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/instruction_hoister.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Finstruction_hoister.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Finstruction_hoister.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Finstruction_hoister.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -25,7 +25,6 @@ limitations under the License.\n #include \"xla/hlo/ir/hlo_module.h\"\n #include \"xla/hlo/ir/hlo_opcode.h\"\n #include \"xla/hlo/ir/hlo_schedule.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n namespace {\n@@ -72,7 +71,7 @@ bool HoistParameters(\n     modified = true;\n     HloInstructionSequence new_sequence;\n     for (HloInstruction* parameter : computation->parameter_instructions()) {\n-      TF_CHECK_OK(parameter->DropAllControlDeps());\n+      CHECK_OK(parameter->DropAllControlDeps());\n       new_sequence.push_back(parameter);\n     }\n     for (HloInstruction* instruction : sequence.instructions()) {"
        },
        {
            "sha": "ae4cc622f869e9e4ea8355a06009e21516c02de6",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/optimize_input_output_buffer_alias_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Foptimize_input_output_buffer_alias_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Foptimize_input_output_buffer_alias_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Foptimize_input_output_buffer_alias_test.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -20,13 +20,13 @@ limitations under the License.\n #include <vector>\n \n #include <gtest/gtest.h>\n-#include \"absl/status/status.h\"\n+#include \"absl/log/check.h\"\n #include \"xla/hlo/ir/hlo_input_output_alias_config.h\"\n #include \"xla/hlo/testlib/hlo_hardware_independent_test_base.h\"\n+#include \"xla/layout.h\"\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/test.h\"\n \n namespace xla {\n \n@@ -70,7 +70,7 @@ class OptimizeInputOutputBufferAliasTest\n \n     auto changed = optimize_pass_->Build(input_shapes, output_shape,\n                                          &alias_config_, &buffer_donor_config_);\n-    TF_CHECK_OK(changed.status());\n+    CHECK_OK(changed.status());\n \n     return changed.value();\n   }\n@@ -189,7 +189,7 @@ TEST_F(OptimizeInputOutputBufferAliasTest, BufferDonorOnly) {\n   std::vector<Shape> input = {ShapeUtil::MakeTupleShape({r1f32_, r2f32_})};\n   Shape output = ShapeUtil::MakeTupleShape({r2f32_, r1f32_});\n \n-  TF_CHECK_OK(buffer_donor_config_.AddBufferDonor(0, {0}));\n+  CHECK_OK(buffer_donor_config_.AddBufferDonor(0, {0}));\n   EXPECT_TRUE(buffer_donor_config_.ParameterIsBufferDonor(0, {0}));\n \n   bool changed = BuildAliasConfig(input, output);"
        },
        {
            "sha": "f00a844e69a988049c28d649a6a2973a591403e8",
            "filename": "third_party/xla/xla/hlo/transforms/simplifiers/sub_byte_normalization.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fsub_byte_normalization.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fsub_byte_normalization.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftransforms%2Fsimplifiers%2Fsub_byte_normalization.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n #include <cstdint>\n \n #include \"absl/container/flat_hash_set.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/string_view.h\"\n@@ -27,9 +28,9 @@ limitations under the License.\n #include \"xla/primitive_util.h\"\n #include \"xla/shape.h\"\n #include \"xla/shape_layout.h\"\n+#include \"xla/tsl/platform/errors.h\"\n+#include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/errors.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n \n@@ -82,7 +83,7 @@ bool ProcessInputOrOutputLayout(ShapeLayout* shape_layout,\n   Shape shape = shape_layout->shape();\n   bool changed = UpdateShape(&shape, mode);\n   if (changed) {\n-    TF_CHECK_OK(shape_layout->CopyLayoutFromShape(shape));\n+    CHECK_OK(shape_layout->CopyLayoutFromShape(shape));\n   }\n   return changed;\n }"
        },
        {
            "sha": "5e2b95c359cedd01c88eeaf7655d5b666e8a6d08",
            "filename": "third_party/xla/xla/tools/BUILD",
            "status": "modified",
            "additions": 15,
            "deletions": 22,
            "changes": 37,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -63,16 +63,14 @@ xla_cc_binary(\n     srcs = [\"show_signature.cc\"],\n     deps = [\n         \"//xla:shape_util\",\n-        \"//xla:types\",\n         \"//xla/client\",\n         \"//xla/client:client_library\",\n-        \"//xla/client:local_client\",\n         \"//xla/service:hlo_proto_cc\",\n         \"//xla/service:interpreter_plugin\",\n+        \"//xla/tsl/platform:env\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:logging\",\n         \"@local_tsl//tsl/platform:platform_port\",\n     ],\n )\n@@ -99,14 +97,12 @@ xla_cc_binary(\n         \"//xla/service:hlo_proto_cc\",\n         \"//xla/service:interpreter_plugin\",\n         \"//xla/service:local_service\",\n+        \"//xla/tsl/platform:env\",\n         \"//xla/tsl/util:command_line_flags\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:logging\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -131,16 +127,14 @@ xla_cc_binary(\n         \"//xla/service:hlo_proto_cc\",\n         \"//xla/service:interpreter_plugin\",\n         \"//xla/service:local_service\",\n+        \"//xla/tsl/platform:env\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:str_format\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:logging\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -176,12 +170,12 @@ cc_library(\n         \"//xla/service:compilation_environments\",\n         \"//xla/service:hlo_module_config\",\n         \"//xla/service:hlo_verifier\",\n+        \"//xla/tsl/platform:errors\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -300,7 +294,6 @@ cc_library(\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -336,6 +329,7 @@ xla_cc_binary(\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n@@ -499,26 +493,28 @@ cc_library(\n         \"//xla:error_spec\",\n         \"//xla:literal\",\n         \"//xla:literal_comparison\",\n+        \"//xla:shape_util\",\n         \"//xla:util\",\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service:hlo_module_config\",\n         \"//xla/service:hlo_proto_cc\",\n         \"//xla/service:hlo_runner\",\n+        \"//xla/service:hlo_runner_interface\",\n         \"//xla/service:hlo_verifier\",\n         \"//xla/tests:test_utils\",\n+        \"//xla/tsl/platform:env\",\n+        \"//xla/tsl/platform:errors\",\n+        \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:str_format\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:errors\",\n         \"@local_tsl//tsl/platform:path\",\n         \"@local_tsl//tsl/platform:status\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n \n@@ -943,10 +939,9 @@ xla_cc_binary(\n         \"//xla/service/gpu/model:gpu_hlo_cost_analysis\",\n         \"//xla/tsl/util:command_line_flags\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n-        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/strings\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n \n@@ -969,17 +964,16 @@ xla_cc_binary(\n         \"//xla:debug_options_flags\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service:hlo_proto_cc\",\n+        \"//xla/tsl/platform:env\",\n+        \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/util:command_line_flags\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n-        \"@local_tsl//tsl/platform:env\",\n         \"@local_tsl//tsl/platform:path\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:status\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n \n@@ -1218,9 +1212,8 @@ xla_cc_binary(\n         \"//xla/service/gpu/model:gpu_hlo_cost_analysis\",\n         \"//xla/tsl/util:command_line_flags\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n-        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/strings\",\n         \"@local_tsl//tsl/platform:platform_port\",\n-        \"@local_tsl//tsl/platform:protobuf\",\n     ],\n )"
        },
        {
            "sha": "a4ad6afae7f069793e46020cb05a4be729b9fd83",
            "filename": "third_party/xla/xla/tools/compute_cost.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fcompute_cost.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fcompute_cost.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fcompute_cost.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -23,6 +23,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/container/flat_hash_map.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/string_view.h\"\n #include \"xla/debug_options_flags.h\"\n@@ -34,7 +35,6 @@ limitations under the License.\n #include \"xla/tools/hlo_module_loader.h\"\n #include \"xla/tsl/util/command_line_flags.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace {\n const char* const kUsage = R\"(\n@@ -111,8 +111,7 @@ int main(int argc, char** argv) {\n   std::unique_ptr<xla::HloModule> module =\n       *xla::LoadModuleFromFile(input, format, {});\n \n-  TF_CHECK_OK(\n-      module->entry_computation()->root_instruction()->Accept(&*analysis));\n+  CHECK_OK(module->entry_computation()->root_instruction()->Accept(&*analysis));\n \n   if (all) {\n     print_costs_of_all_instructions(*module, *analysis);"
        },
        {
            "sha": "5ee1b61f86c90b0f74f5a7186159e952a0c4d80f",
            "filename": "third_party/xla/xla/tools/dumped_computation_to_operation_list.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fdumped_computation_to_operation_list.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fdumped_computation_to_operation_list.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fdumped_computation_to_operation_list.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -41,10 +41,8 @@ limitations under the License.\n #include \"xla/service/local_service.h\"\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n-#include \"tsl/platform/env.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n namespace tools {\n@@ -76,7 +74,7 @@ void RealMain(absl::Span<char* const> args) {\n       ClientLibrary::GetXlaService(client->platform());\n   for (char* arg : args) {\n     HloSnapshot snapshot;\n-    TF_CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), arg, &snapshot));\n+    CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), arg, &snapshot));\n     auto computation_status = client->LoadSnapshot(snapshot);\n     if (!computation_status.ok()) {\n       fprintf(stderr, \"could not load snapshot for %s: %s\\n\", arg,\n@@ -104,7 +102,7 @@ void RealMain(absl::Span<char* const> args) {\n \n     OperationDumper dumper(arg);\n     for (auto* computation : module.computations()) {\n-      TF_CHECK_OK(computation->Accept(&dumper));\n+      CHECK_OK(computation->Accept(&dumper));\n     }\n   }\n }"
        },
        {
            "sha": "2b63fc91e6dce8b86ae3609e4fc25b8a5744f511",
            "filename": "third_party/xla/xla/tools/dumped_computation_to_text.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fdumped_computation_to_text.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fdumped_computation_to_text.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fdumped_computation_to_text.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -29,15 +29,14 @@ limitations under the License.\n #include \"xla/hlo/builder/xla_computation.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n #include \"xla/hlo/ir/hlo_module.h\"\n+#include \"xla/hlo/ir/hlo_print_options.h\"\n #include \"xla/service/hlo.pb.h\"\n #include \"xla/service/local_service.h\"\n #include \"xla/shape.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/util/command_line_flags.h\"\n #include \"xla/xla.pb.h\"\n-#include \"tsl/platform/env.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n namespace tools {\n@@ -48,7 +47,7 @@ void RealMain(absl::Span<char* const> args, bool compile) {\n       ClientLibrary::GetXlaService(client->platform());\n   for (char* arg : args) {\n     HloSnapshot snapshot;\n-    TF_CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), arg, &snapshot));\n+    CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), arg, &snapshot));\n     auto computation_status = client->LoadSnapshot(snapshot);\n     if (!computation_status.ok()) {\n       fprintf(stderr, \"could not load snapshot for %s: %s\\n\", arg,"
        },
        {
            "sha": "a28c0a7c670828e21270099e9fd6df5d0676f799",
            "filename": "third_party/xla/xla/tools/extract_collective_operations.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fextract_collective_operations.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fextract_collective_operations.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fextract_collective_operations.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -31,12 +31,11 @@ limitations under the License.\n #include \"xla/service/hlo.pb.h\"\n #include \"xla/tools/hlo_decomposer.h\"\n #include \"xla/tools/hlo_module_loader.h\"\n+#include \"xla/tsl/platform/env.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/util/command_line_flags.h\"\n-#include \"tsl/platform/env.h\"\n #include \"tsl/platform/init_main.h\"\n #include \"tsl/platform/path.h\"\n-#include \"tsl/platform/status.h\"\n-#include \"tsl/platform/statusor.h\"\n \n namespace {\n const char* const kUsage = R\"(\n@@ -163,7 +162,7 @@ int main(int argc, char** argv) {\n     operation_types.insert(xla::HloOpcode::kAllToAll);\n   }\n \n-  TF_CHECK_OK(xla::ExtractCollectiveOperations(input, output, operation_types,\n-                                               return_tuple));\n+  CHECK_OK(xla::ExtractCollectiveOperations(input, output, operation_types,\n+                                            return_tuple));\n   return 0;\n }"
        },
        {
            "sha": "b7943d2cfa580d4c27fc4cba6d1d23c89cd86a18",
            "filename": "third_party/xla/xla/tools/extract_dots_for_benchmark.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fextract_dots_for_benchmark.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fextract_dots_for_benchmark.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fextract_dots_for_benchmark.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -24,6 +24,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/container/flat_hash_set.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_join.h\"\n@@ -40,7 +41,6 @@ limitations under the License.\n #include \"xla/tsl/util/command_line_flags.h\"\n #include \"xla/xla_data.pb.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/protobuf.h\"\n \n namespace {\n const char* const kUsage = R\"(\n@@ -139,8 +139,7 @@ int main(int argc, char** argv) {\n   std::unique_ptr<xla::HloModule> module =\n       *xla::LoadModuleFromFile(input, format, {});\n \n-  TF_CHECK_OK(\n-      module->entry_computation()->root_instruction()->Accept(&*analysis));\n+  CHECK_OK(module->entry_computation()->root_instruction()->Accept(&*analysis));\n \n   xla::PrintDots(*module);\n "
        },
        {
            "sha": "5b44a12601b5abf64a1a5ca16c4285e04a4d0a30",
            "filename": "third_party/xla/xla/tools/hlo_bisect/BUILD",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_bisect%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_bisect%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_bisect%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -80,25 +80,39 @@ cc_library(\n     hdrs = [\"hlo_bisect_utils.h\"],\n     deps = [\n         \":hlo_bisect_state\",\n+        \"//xla:debug_options_flags\",\n         \"//xla:error_spec\",\n         \"//xla:literal\",\n+        \"//xla:shape_util\",\n         \"//xla:util\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/parser:hlo_parser\",\n         \"//xla/service:dump\",\n+        \"//xla/service:hlo_module_config\",\n         \"//xla/service:hlo_module_util\",\n         \"//xla/service:hlo_proto_cc\",\n         \"//xla/service:hlo_proto_util\",\n         \"//xla/service:hlo_runner\",\n         \"//xla/service:hlo_runner_interface\",\n         \"//xla/service:hlo_verifier\",\n         \"//xla/service:platform_util\",\n+        \"//xla/stream_executor:platform\",\n         \"//xla/tests:literal_test_util\",\n         \"//xla/tests:test_utils\",\n         \"//xla/tools:prepare_reference_module\",\n+        \"//xla/tsl/platform:env\",\n+        \"//xla/tsl/platform:errors\",\n+        \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/platform:subprocess\",\n         \"@com_google_absl//absl/cleanup\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n+        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n+        \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/status:statusor\",\n+        \"@com_google_absl//absl/strings:string_view\",\n+        \"@com_google_absl//absl/types:span\",\n+        \"@com_google_googletest//:gtest_for_library\",\n         \"@local_tsl//tsl/platform:path\",\n     ],\n )"
        },
        {
            "sha": "9198c32b01555811b4ab7ef11523af8b46668c53",
            "filename": "third_party/xla/xla/tools/hlo_bisect/hlo_bisect_utils.cc",
            "status": "modified",
            "additions": 23,
            "deletions": 3,
            "changes": 26,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_bisect%2Fhlo_bisect_utils.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_bisect%2Fhlo_bisect_utils.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_bisect%2Fhlo_bisect_utils.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -15,26 +15,47 @@ limitations under the License.\n \n #include \"xla/tools/hlo_bisect/hlo_bisect_utils.h\"\n \n+#include <cstdint>\n #include <memory>\n #include <random>\n #include <string>\n+#include <tuple>\n #include <utility>\n #include <vector>\n \n+#include <gtest/gtest.h>\n #include \"absl/cleanup/cleanup.h\"\n+#include \"absl/container/flat_hash_map.h\"\n+#include \"absl/log/check.h\"\n+#include \"absl/log/log.h\"\n+#include \"absl/status/status.h\"\n+#include \"absl/status/statusor.h\"\n+#include \"absl/strings/string_view.h\"\n+#include \"absl/types/span.h\"\n+#include \"xla/debug_options_flags.h\"\n #include \"xla/error_spec.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n+#include \"xla/hlo/ir/hlo_print_options.h\"\n #include \"xla/hlo/parser/hlo_parser.h\"\n+#include \"xla/layout_util.h\"\n+#include \"xla/literal.h\"\n #include \"xla/service/dump.h\"\n #include \"xla/service/hlo.pb.h\"\n+#include \"xla/service/hlo_module_config.h\"\n #include \"xla/service/hlo_module_util.h\"\n #include \"xla/service/hlo_proto_util.h\"\n #include \"xla/service/hlo_runner.h\"\n+#include \"xla/service/hlo_runner_interface.h\"\n #include \"xla/service/hlo_verifier.h\"\n #include \"xla/service/platform_util.h\"\n+#include \"xla/stream_executor/platform.h\"\n #include \"xla/tests/literal_test_util.h\"\n #include \"xla/tests/test_utils.h\"\n+#include \"xla/tools/hlo_bisect/hlo_bisect_state.h\"\n #include \"xla/tools/prepare_reference_module.h\"\n+#include \"xla/tsl/platform/env.h\"\n+#include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/platform/subprocess.h\"\n #include \"xla/util.h\"\n #include \"tsl/platform/path.h\"\n@@ -51,8 +72,7 @@ Literal ExecuteWithRunnerAndRetrieveResult(std::unique_ptr<HloModule> module,\n                                            bool run_hlo_passes) {\n   auto result_status =\n       runner->Execute(std::move(module), input_data, run_hlo_passes);\n-  TF_CHECK_OK(result_status.status())\n-      << \"Failed to execute on \" << runner->Name();\n+  CHECK_OK(result_status.status()) << \"Failed to execute on \" << runner->Name();\n   return std::move(result_status).value();\n }\n \n@@ -260,7 +280,7 @@ absl::StatusOr<bool> ScriptChecker::Run(const HloModule& module) {\n   }\n \n   absl::Cleanup hlo_cleaner = [&] {\n-    TF_CHECK_OK(tsl::Env::Default()->DeleteFile(hlo_path));\n+    CHECK_OK(tsl::Env::Default()->DeleteFile(hlo_path));\n   };\n \n   std::string hlo_contents ="
        },
        {
            "sha": "e17ba6322be7d7f91a837d59d9e3f8155f680551",
            "filename": "third_party/xla/xla/tools/hlo_extractor.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_extractor.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_extractor.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_extractor.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include \"xla/hlo/transforms/simplifiers/algebraic_simplifier.h\"\n #include \"xla/hlo/transforms/simplifiers/hlo_dce.h\"\n #include \"xla/service/call_inliner.h\"\n+#include \"xla/tsl/platform/errors.h\"\n \n #ifndef _WIN32\n #include <unistd.h>\n@@ -47,7 +48,6 @@ limitations under the License.\n #include \"xla/service/hlo_verifier.h\"\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n namespace {\n@@ -178,7 +178,7 @@ class ExtractionVisitor : public ConstDfsHloVisitorWithDefault {\n   // Replace the `hlo` with Constant of the same shape.\n   absl::Status ReplaceWithConstant(const HloInstruction* hlo) {\n     absl::StatusOr<Literal> literal_status = MakeFakeLiteral(hlo->shape());\n-    TF_CHECK_OK(literal_status.status());\n+    CHECK_OK(literal_status.status());\n     auto new_const =\n         HloInstruction::CreateConstant(std::move(literal_status.value()));\n     clone_context_.MapInstruction(hlo, new_const.get());\n@@ -234,7 +234,7 @@ class ExtractionVisitor : public ConstDfsHloVisitorWithDefault {\n       } else {\n         absl::StatusOr<Literal> literal_status =\n             MakeFakeLiteral(constant_shape);\n-        TF_CHECK_OK(literal_status.status());\n+        CHECK_OK(literal_status.status());\n         constant_instruction = builder->AddInstruction(\n             HloInstruction::CreateConstant(std::move(literal_status.value())));\n       }\n@@ -358,14 +358,14 @@ std::unique_ptr<HloModule> ExtractModule(\n   ExtractionVisitor visitor(instruction, &boundary, extract_selector,\n                             replace_type_selector);\n \n-  TF_CHECK_OK(instruction->Accept(&visitor, /*call_finish_visit=*/true,\n-                                  /*ignore_control_predecessors=*/false,\n-                                  /*cross_computation=*/cross_computation));\n+  CHECK_OK(instruction->Accept(&visitor, /*call_finish_visit=*/true,\n+                               /*ignore_control_predecessors=*/false,\n+                               /*cross_computation=*/cross_computation));\n \n   // Inline called computations and fusions if the flag\n   // `inline_calls_and_fusions` is true.\n   if (inline_calls_and_fusions) {\n-    TF_CHECK_OK(Inline(visitor.module()));\n+    CHECK_OK(Inline(visitor.module()));\n   }\n \n   // The first pass may leave unused parameter instructions in the entry\n@@ -378,15 +378,15 @@ std::unique_ptr<HloModule> ExtractModule(\n       /*extract_selector=*/nullptr,\n       /*replace_type_selector=*/nullptr);\n \n-  TF_CHECK_OK(visitor.module()->entry_computation()->root_instruction()->Accept(\n+  CHECK_OK(visitor.module()->entry_computation()->root_instruction()->Accept(\n       &cleanup_visitor, /*call_finish_visit=*/true,\n       /*ignore_control_predecessors=*/false,\n       /*cross_computation=*/false));\n \n   if (run_verifier) {\n     HloVerifier verifier(/*layout_sensitive=*/false,\n                          /*allow_mixed_precision=*/true);\n-    TF_CHECK_OK(verifier.Run(cleanup_visitor.module()).status());\n+    CHECK_OK(verifier.Run(cleanup_visitor.module()).status());\n   }\n   return cleanup_visitor.ConsumeModule();\n }"
        },
        {
            "sha": "ab78d401b49d62cd53244cc13838893a5ec49cac",
            "filename": "third_party/xla/xla/tools/hlo_slicer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_slicer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_slicer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fhlo_slicer.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -34,7 +34,6 @@ limitations under the License.\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/tools/hlo_extractor.h\"\n-#include \"tsl/platform/status.h\"\n \n namespace xla {\n namespace {\n@@ -144,7 +143,7 @@ void RemoveSharding(HloModule* hlo_module) {\n     // Verify if the module is still valid.\n     HloVerifier verifier(/*layout_sensitive=*/false,\n                          /*allow_mixed_precision=*/true);\n-    TF_CHECK_OK(verifier.Run(hlo_module).status());\n+    CHECK_OK(verifier.Run(hlo_module).status());\n   }\n }\n \n@@ -532,7 +531,7 @@ std::vector<std::unique_ptr<HloModule>> SliceModuleAndExtract(\n     // Verify if the extracted module (after processing) is valid or not.\n     HloVerifier verifier(/*layout_sensitive=*/false,\n                          /*allow_mixed_precision=*/true);\n-    TF_CHECK_OK(verifier.Run(extracted_module.get()).status());\n+    CHECK_OK(verifier.Run(extracted_module.get()).status());\n \n     sliced_modules.emplace_back(std::move(extracted_module));\n   }"
        },
        {
            "sha": "e686be654d6b733f3429d0135ac01ca688232b06",
            "filename": "third_party/xla/xla/tools/interactive_graphviz.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Finteractive_graphviz.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Finteractive_graphviz.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Finteractive_graphviz.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -28,6 +28,7 @@ limitations under the License.\n #include <stdio.h>\n \n #include <cstdint>\n+#include <functional>\n #include <iostream>\n #include <memory>\n #include <optional>\n@@ -38,6 +39,7 @@ limitations under the License.\n \n #include \"absl/algorithm/container.h\"\n #include \"absl/container/flat_hash_set.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n@@ -436,7 +438,7 @@ void DoExtractCommand(const HloModule& module,\n \n   std::string outfile_name =\n       tsl::io::GetTempFilename(absl::StrCat(node_name, \"-extracted.hlo\"));\n-  TF_CHECK_OK(\n+  CHECK_OK(\n       tsl::WriteStringToFile(tsl::Env::Default(), outfile_name, module_str));\n   std::cout << outfile_name << std::endl;\n }\n@@ -754,7 +756,7 @@ void RealMain(const Options& opts) {\n   std::unique_ptr<HloModule> module;\n   if (!opts.hlo_snapshot.empty()) {\n     HloSnapshot snapshot;\n-    TF_CHECK_OK(\n+    CHECK_OK(\n         tsl::ReadBinaryProto(tsl::Env::Default(), opts.hlo_snapshot, &snapshot))\n         << \"Can't open, read, or parse HloSnapshot proto at \"\n         << opts.hlo_snapshot;"
        },
        {
            "sha": "5a6808c377fdc4c7da6854ccbf9f49a75edf3141",
            "filename": "third_party/xla/xla/tools/multihost_hlo_runner/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fmultihost_hlo_runner%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fmultihost_hlo_runner%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fmultihost_hlo_runner%2FBUILD?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -197,7 +197,6 @@ cc_library(\n         \"//xla/tools:hlo_control_flow_flattening\",\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:errors\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/util:fixed_option_set_flag\",\n         \"@com_google_absl//absl/algorithm:container\",\n@@ -212,7 +211,6 @@ cc_library(\n         \"@com_google_absl//absl/time\",\n         \"@com_google_absl//absl/types:span\",\n         \"@llvm-project//mlir:FuncExtensions\",\n-        \"@local_tsl//tsl/platform:protobuf\",\n         \"@local_tsl//tsl/profiler/lib:profiler_factory_impl\",\n         \"@local_tsl//tsl/profiler/lib:profiler_session\",\n         \"@local_tsl//tsl/profiler/lib:profiler_session_impl\","
        },
        {
            "sha": "68b8b5696c40a0c6a7907bf7c4fec6062cec5403",
            "filename": "third_party/xla/xla/tools/multihost_hlo_runner/functional_hlo_runner.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fmultihost_hlo_runner%2Ffunctional_hlo_runner.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fmultihost_hlo_runner%2Ffunctional_hlo_runner.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fmultihost_hlo_runner%2Ffunctional_hlo_runner.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -74,17 +74,16 @@ limitations under the License.\n #include \"xla/status_macros.h\"\n #include \"xla/tests/test_utils.h\"\n #include \"xla/tools/hlo_control_flow_flattening.h\"\n+#include \"xla/tools/multihost_hlo_runner/hlo_input_output_format.h\"\n #include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/file_system.h\"\n #include \"xla/tsl/platform/file_system_helper.h\"\n-#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/util/fixed_option_set_flag.h\"\n #include \"xla/util.h\"\n #include \"xla/xla.pb.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/protobuf.h\"\n #include \"tsl/profiler/lib/profiler_session.h\"\n #include \"tsl/profiler/protobuf/profiler_options.pb.h\"\n #include \"tsl/profiler/protobuf/xplane.pb.h\"\n@@ -989,7 +988,7 @@ ExecutableBuildOptions CreateExecutableBuildOptionsFromExecutionOptions(\n   if (execution_options.has_shape_with_output_layout()) {\n     absl::StatusOr<Shape> shape =\n         Shape::FromProto(execution_options.shape_with_output_layout());\n-    TF_CHECK_OK(shape.status());\n+    CHECK_OK(shape.status());\n     build_options.set_result_layout(*shape);\n   }\n   build_options.set_num_replicas(execution_options.num_replicas());\n@@ -1008,7 +1007,7 @@ ExecutableBuildOptions CreateExecutableBuildOptionsFromExecutionOptions(\n   if (execution_options.has_device_assignment()) {\n     absl::StatusOr<std::unique_ptr<DeviceAssignment>> device_assignment =\n         DeviceAssignment::Deserialize(execution_options.device_assignment());\n-    TF_CHECK_OK(device_assignment.status());\n+    CHECK_OK(device_assignment.status());\n     build_options.set_device_assignment(**device_assignment);\n   }\n   build_options.set_alias_passthrough_params(\n@@ -1567,7 +1566,7 @@ void HLORunnerProfiler::CreateSession() {\n void HLORunnerProfiler::UploadSession() {\n   xspace_ = std::make_unique<tensorflow::profiler::XSpace>();\n   // Stops the ProfilerSession\n-  TF_CHECK_OK(session_->CollectData(xspace_.get()));\n+  CHECK_OK(session_->CollectData(xspace_.get()));\n \n   CHECK(!dump_path_.empty());\n "
        },
        {
            "sha": "6c04c8383b5f0f50b9a13570484d5a61f1aecfac",
            "filename": "third_party/xla/xla/tools/run_hlo_module.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Frun_hlo_module.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Frun_hlo_module.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Frun_hlo_module.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -46,20 +46,22 @@ limitations under the License.\n #include \"xla/literal_comparison.h\"\n #include \"xla/service/hlo.pb.h\"\n #include \"xla/service/hlo_module_config.h\"\n+#include \"xla/service/hlo_runner_interface.h\"\n #include \"xla/service/hlo_verifier.h\"\n+#include \"xla/shape.h\"\n+#include \"xla/shape_util.h\"\n #include \"xla/tests/test_utils.h\"\n #include \"xla/tools/hlo_control_flow_flattening.h\"\n #include \"xla/tools/hlo_decomposer.h\"\n #include \"xla/tools/hlo_module_loader.h\"\n #include \"xla/tools/prepare_reference_module.h\"\n #include \"xla/tools/run_hlo_module.pb.h\"\n+#include \"xla/tsl/platform/env.h\"\n+#include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/env.h\"\n-#include \"tsl/platform/errors.h\"\n #include \"tsl/platform/path.h\"\n-#include \"tsl/platform/status.h\"\n-#include \"tsl/platform/statusor.h\"\n \n namespace xla {\n namespace {\n@@ -115,8 +117,8 @@ void WriteLiteralToTempFile(const LiteralSlice& literal,\n     text_filename = tsl::io::GetTempFilename(absl::StrCat(name, \".txt\"));\n   }\n \n-  TF_CHECK_OK(tsl::WriteBinaryProto(env, binary_filename, literal.ToProto()));\n-  TF_CHECK_OK(tsl::WriteStringToFile(env, text_filename, literal.ToString()));\n+  CHECK_OK(tsl::WriteBinaryProto(env, binary_filename, literal.ToProto()));\n+  CHECK_OK(tsl::WriteStringToFile(env, text_filename, literal.ToString()));\n   LOG(ERROR) << \"wrote Literal to \" << name << \" binary: \" << binary_filename\n              << \" text: \" << text_filename;\n }\n@@ -518,7 +520,7 @@ absl::Status RunAndCompare(\n           true));\n   TF_RETURN_IF_ERROR(verifier.Run(test_module.get()).status());\n   if (compilation_env_modifier_hook) {\n-    TF_CHECK_OK(compilation_env_modifier_hook(options, *test_module))\n+    CHECK_OK(compilation_env_modifier_hook(options, *test_module))\n         << \"Could not adjust the compilation environment for user provided \"\n            \"hlo module.\";\n   }"
        },
        {
            "sha": "a46668142b29666de1e894afdfd9549e8b38fff6",
            "filename": "third_party/xla/xla/tools/show_signature.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fshow_signature.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/691416446e6db6d9d3f6f925aa4f311e6efc5784/third_party%2Fxla%2Fxla%2Ftools%2Fshow_signature.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fshow_signature.cc?ref=691416446e6db6d9d3f6f925aa4f311e6efc5784",
            "patch": "@@ -30,17 +30,16 @@ limitations under the License.\n #include <memory>\n #include <string>\n \n+#include \"absl/log/check.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/types/span.h\"\n #include \"xla/client/client.h\"\n #include \"xla/client/client_library.h\"\n-#include \"xla/client/local_client.h\"\n #include \"xla/service/hlo.pb.h\"\n+#include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/types.h\"\n-#include \"tsl/platform/env.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"tsl/platform/init_main.h\"\n-#include \"tsl/platform/logging.h\"\n \n namespace xla {\n namespace tools {\n@@ -49,7 +48,7 @@ void RealMain(absl::Span<char* const> args) {\n   Client* client = ClientLibrary::LocalClientOrDie();\n   for (char* arg : args) {\n     HloSnapshot module;\n-    TF_CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), arg, &module));\n+    CHECK_OK(tsl::ReadBinaryProto(tsl::Env::Default(), arg, &module));\n     auto computation = client->LoadSnapshot(module).value();\n     std::unique_ptr<ProgramShape> shape =\n         client->GetComputationShape(computation).value();"
        }
    ],
    "stats": {
        "total": 811,
        "additions": 394,
        "deletions": 417
    }
}