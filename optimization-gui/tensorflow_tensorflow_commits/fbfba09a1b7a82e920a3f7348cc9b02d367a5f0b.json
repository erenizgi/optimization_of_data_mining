{
    "author": "beckerhe",
    "message": "Remove unnecessary local_defines and add missing includes in gpu_executor_test.\n\nThe local_defines for CUDA/ROCM are not required for this test. Added explicit includes for headers used in gpu_executor_test.cc.\n\nPiperOrigin-RevId: 846269233",
    "sha": "fbfba09a1b7a82e920a3f7348cc9b02d367a5f0b",
    "files": [
        {
            "sha": "17f895e12c143ac4edde042487bc0e70eccb363a",
            "filename": "third_party/xla/xla/stream_executor/gpu/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fbfba09a1b7a82e920a3f7348cc9b02d367a5f0b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fbfba09a1b7a82e920a3f7348cc9b02d367a5f0b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2FBUILD?ref=fbfba09a1b7a82e920a3f7348cc9b02d367a5f0b",
            "patch": "@@ -651,11 +651,12 @@ xla_test(\n     size = \"small\",\n     srcs = [\"gpu_executor_test.cc\"],\n     backends = [\"gpu\"],\n-    local_defines = if_cuda_is_configured([\"GOOGLE_CUDA=1\"]) + if_rocm_is_configured([\n-        \"TENSORFLOW_USE_ROCM=1\",\n-    ]),\n     deps = [\n         \"//xla/service:platform_util\",\n+        \"//xla/stream_executor:device_address\",\n+        \"//xla/stream_executor:device_description\",\n+        \"//xla/stream_executor:memory_allocation\",\n+        \"//xla/stream_executor:memory_space\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:platform_manager\",\n         \"//xla/stream_executor:stream_executor_h\","
        },
        {
            "sha": "47f59c064bc08804fe11fba3d4250a6a76a0e347",
            "filename": "third_party/xla/xla/stream_executor/gpu/gpu_executor_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fbfba09a1b7a82e920a3f7348cc9b02d367a5f0b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2Fgpu_executor_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fbfba09a1b7a82e920a3f7348cc9b02d367a5f0b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2Fgpu_executor_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2Fgpu_executor_test.cc?ref=fbfba09a1b7a82e920a3f7348cc9b02d367a5f0b",
            "patch": "@@ -20,6 +20,10 @@ limitations under the License.\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/ascii.h\"\n #include \"xla/service/platform_util.h\"\n+#include \"xla/stream_executor/device_address.h\"\n+#include \"xla/stream_executor/device_description.h\"\n+#include \"xla/stream_executor/memory_allocation.h\"\n+#include \"xla/stream_executor/memory_space.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/platform_manager.h\"\n #include \"xla/stream_executor/stream_executor.h\""
        }
    ],
    "stats": {
        "total": 11,
        "additions": 8,
        "deletions": 3
    }
}