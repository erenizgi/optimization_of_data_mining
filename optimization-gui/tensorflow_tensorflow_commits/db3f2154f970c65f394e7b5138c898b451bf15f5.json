{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 812149765",
    "sha": "db3f2154f970c65f394e7b5138c898b451bf15f5",
    "files": [
        {
            "sha": "29563c202f26a24f66ddd588668b6b41681c4245",
            "filename": "third_party/xla/xla/tests/local_client_test_base.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/db3f2154f970c65f394e7b5138c898b451bf15f5/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/db3f2154f970c65f394e7b5138c898b451bf15f5/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.cc?ref=db3f2154f970c65f394e7b5138c898b451bf15f5",
            "patch": "@@ -62,7 +62,7 @@ absl::StatusOr<se::OwningDeviceMemory> TestAllocator::Allocate(\n     int64_t memory_space) {\n   VLOG(2) << \"Allocate(\" << device_ordinal << \", \" << size << \")\";\n   {\n-    absl::MutexLock lock(&count_mutex_);\n+    absl::MutexLock lock(count_mutex_);\n     allocation_count_++;\n     device_allocation_count_[device_ordinal]++;\n   }\n@@ -74,20 +74,20 @@ absl::Status TestAllocator::Deallocate(int device_ordinal,\n                                        se::DeviceMemoryBase mem) {\n   VLOG(2) << \"Deallocate(\" << device_ordinal << \")\";\n   {\n-    absl::MutexLock lock(&count_mutex_);\n+    absl::MutexLock lock(count_mutex_);\n     deallocation_count_++;\n     device_deallocation_count_[device_ordinal]++;\n   }\n   return se::StreamExecutorMemoryAllocator::Deallocate(device_ordinal, mem);\n }\n \n int64_t TestAllocator::allocation_count() const {\n-  absl::MutexLock lock(&count_mutex_);\n+  absl::MutexLock lock(count_mutex_);\n   return allocation_count_;\n }\n \n int64_t TestAllocator::allocation_count(int device_ordinal) const {\n-  absl::MutexLock lock(&count_mutex_);\n+  absl::MutexLock lock(count_mutex_);\n   auto it = device_allocation_count_.find(device_ordinal);\n   if (it == device_allocation_count_.end()) {\n     return 0;\n@@ -97,12 +97,12 @@ int64_t TestAllocator::allocation_count(int device_ordinal) const {\n }\n \n int64_t TestAllocator::deallocation_count() const {\n-  absl::MutexLock lock(&count_mutex_);\n+  absl::MutexLock lock(count_mutex_);\n   return deallocation_count_;\n }\n \n int64_t TestAllocator::deallocation_count(int device_ordinal) const {\n-  absl::MutexLock lock(&count_mutex_);\n+  absl::MutexLock lock(count_mutex_);\n   auto it = device_deallocation_count_.find(device_ordinal);\n   if (it == device_deallocation_count_.end()) {\n     return 0;\n@@ -114,7 +114,7 @@ int64_t TestAllocator::deallocation_count(int device_ordinal) const {\n /* static */ TestAllocator* LocalClientTestBase::GetOrCreateAllocator(\n     se::Platform* platform) {\n   static absl::Mutex mu(absl::kConstInit);\n-  absl::MutexLock lock(&mu);\n+  absl::MutexLock lock(mu);\n \n   if (allocator_ == nullptr) {\n     allocator_ = new TestAllocator("
        },
        {
            "sha": "b637e6bc6f46df399b36691e1d60fc9921528ab1",
            "filename": "third_party/xla/xla/tests/multiple_devices_on_host_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/db3f2154f970c65f394e7b5138c898b451bf15f5/third_party%2Fxla%2Fxla%2Ftests%2Fmultiple_devices_on_host_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/db3f2154f970c65f394e7b5138c898b451bf15f5/third_party%2Fxla%2Fxla%2Ftests%2Fmultiple_devices_on_host_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fmultiple_devices_on_host_test.cc?ref=db3f2154f970c65f394e7b5138c898b451bf15f5",
            "patch": "@@ -49,7 +49,7 @@ void CompileAndExecute(\n   absl::StatusOr<ScopedShapedBuffer> result =\n       executable->Run(absl::Span<const ShapedBuffer* const>(), execute_options);\n   {\n-    absl::MutexLock lock(results_mutex);\n+    absl::MutexLock lock(*results_mutex);\n     results->emplace_back(device_ordinal, std::move(result));\n   }\n }"
        },
        {
            "sha": "bb32dee46d2844ca32033f8f848b173cb9ad86ce",
            "filename": "third_party/xla/xla/tests/multithreaded_compilation_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/db3f2154f970c65f394e7b5138c898b451bf15f5/third_party%2Fxla%2Fxla%2Ftests%2Fmultithreaded_compilation_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/db3f2154f970c65f394e7b5138c898b451bf15f5/third_party%2Fxla%2Fxla%2Ftests%2Fmultithreaded_compilation_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fmultithreaded_compilation_test.cc?ref=db3f2154f970c65f394e7b5138c898b451bf15f5",
            "patch": "@@ -75,7 +75,7 @@ TEST_F(MultithreadedCompilation, EightModuleCompilation) {\n   auto do_compilation = [&](int iteration) {\n     TF_ASSIGN_OR_RETURN(std::unique_ptr<OpaqueExecutable> executable,\n                         CreateExecutable(std::move(modules[iteration]), true));\n-    absl::MutexLock lock(&mu);\n+    absl::MutexLock lock(mu);\n     executables.push_back(std::move(executable));\n     VLOG(2) << \"Adding executable obtained from thread: \" << iteration;\n     return absl::OkStatus();"
        },
        {
            "sha": "6e5cbe5e3a41b8958ef7d166658283be1600bdf5",
            "filename": "third_party/xla/xla/tests/pjrt_client_registry.h",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/db3f2154f970c65f394e7b5138c898b451bf15f5/third_party%2Fxla%2Fxla%2Ftests%2Fpjrt_client_registry.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/db3f2154f970c65f394e7b5138c898b451bf15f5/third_party%2Fxla%2Fxla%2Ftests%2Fpjrt_client_registry.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fpjrt_client_registry.h?ref=db3f2154f970c65f394e7b5138c898b451bf15f5",
            "patch": "@@ -62,7 +62,7 @@ class PjRtClientTestFactoryRegistry {\n       return;\n     }\n \n-    absl::MutexLock lock(&mu_);\n+    absl::MutexLock lock(mu_);\n     factory_ = std::move(factory);\n     registered_device_shape_representation_fn_ =\n         std::move(registered_device_shape_representation_fn);\n@@ -73,7 +73,7 @@ class PjRtClientTestFactoryRegistry {\n   // Return the device shape representation of 'host_shape'.\n   DeviceShapeRepresentationFn GetDeviceShapeRepresentationFn(\n       PjRtClient* pjrt_client) ABSL_LOCKS_EXCLUDED(mu_) {\n-    absl::MutexLock lock(&mu_);\n+    absl::MutexLock lock(mu_);\n     return registered_device_shape_representation_fn_(pjrt_client);\n   }\n \n@@ -82,17 +82,17 @@ class PjRtClientTestFactoryRegistry {\n   // integer representing the size of the shape in bytes as opposed to a Shape.\n   DeviceShapeSizeFn GetDeviceShapeSizeFn(PjRtClient* pjrt_client)\n       ABSL_LOCKS_EXCLUDED(mu_) {\n-    absl::MutexLock lock(&mu_);\n+    absl::MutexLock lock(mu_);\n     return registered_device_shape_size_fn_(pjrt_client);\n   }\n \n   bool HasRegisteredFactory() ABSL_LOCKS_EXCLUDED(mu_) {\n-    absl::MutexLock lock(&mu_);\n+    absl::MutexLock lock(mu_);\n     return factory_ != nullptr;\n   }\n \n   std::function<absl::StatusOr<std::unique_ptr<PjRtClient>>()> Get() const {\n-    absl::MutexLock lock(&mu_);\n+    absl::MutexLock lock(mu_);\n     return factory_;\n   }\n "
        }
    ],
    "stats": {
        "total": 28,
        "additions": 14,
        "deletions": 14
    }
}