{
    "author": "hhb",
    "message": "Add helper functions to check PjRtPlatformId types.\n\nPiperOrigin-RevId: 822333726",
    "sha": "bdb268c5c54e09dee4b02214ae58c54b8cf5b52c",
    "files": [
        {
            "sha": "73f346594c81184964120e985734053d3d6cb52d",
            "filename": "third_party/xla/xla/pjrt/pjrt_compiler.h",
            "status": "modified",
            "additions": 18,
            "deletions": 4,
            "changes": 22,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bdb268c5c54e09dee4b02214ae58c54b8cf5b52c/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_compiler.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bdb268c5c54e09dee4b02214ae58c54b8cf5b52c/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_compiler.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_compiler.h?ref=bdb268c5c54e09dee4b02214ae58c54b8cf5b52c",
            "patch": "@@ -217,20 +217,34 @@ class PjRtTopologyDescription {\n   }\n };\n \n+// Returns true if it's TPU id.\n+inline bool IsTpuId(PjRtPlatformId platform_id) {\n+  return platform_id == xla::TpuId();\n+}\n+\n+// Returns true if it's GPU id.\n+inline bool IsGpuId(PjRtPlatformId platform_id) {\n+  return platform_id == xla::CudaId() || platform_id == xla::RocmId();\n+}\n+\n+// Returns true if it's CPU id.\n+inline bool IsCpuId(PjRtPlatformId platform_id) {\n+  return platform_id == xla::CpuId();\n+}\n+\n // Returns true if it's TPU topology.\n inline bool IsTpuTopology(const PjRtTopologyDescription& topology_description) {\n-  return topology_description.platform_id() == xla::TpuId();\n+  return IsTpuId(topology_description.platform_id());\n }\n \n // Returns true if it's GPU topology.\n inline bool IsGpuTopology(const PjRtTopologyDescription& topology_description) {\n-  return topology_description.platform_id() == xla::CudaId() ||\n-         topology_description.platform_id() == xla::RocmId();\n+  return IsGpuId(topology_description.platform_id());\n }\n \n // Returns true if it's CPU topology.\n inline bool IsCpuTopology(const PjRtTopologyDescription& topology_description) {\n-  return topology_description.platform_id() == xla::CpuId();\n+  return IsCpuId(topology_description.platform_id());\n }\n \n // Abstract interface that all registered compilers must implement."
        }
    ],
    "stats": {
        "total": 22,
        "additions": 18,
        "deletions": 4
    }
}