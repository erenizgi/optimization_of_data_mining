{
    "author": "tensorflower-gardener",
    "message": "Mark RefCountPtr as a nullable type.\n\nThis allows uses of the type to be annotated as absl_nonnull, absl_nullable, or absl_nullability_unknown.\n\nIt's possible that the clang compiler could be altered to automatically consider classes as nullable if they inherit from a nullable class, but that won't happen any time soon.\n\nPiperOrigin-RevId: 797525969",
    "sha": "98b8166f25665d4cca7e92d85a19d2eb33796140",
    "files": [
        {
            "sha": "7055e4631c262e0cbc7665da44040d2ceefe33b7",
            "filename": "third_party/xla/third_party/tsl/tsl/platform/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/98b8166f25665d4cca7e92d85a19d2eb33796140/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/98b8166f25665d4cca7e92d85a19d2eb33796140/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2FBUILD?ref=98b8166f25665d4cca7e92d85a19d2eb33796140",
            "patch": "@@ -1213,6 +1213,7 @@ cc_library(\n     deps = [\n         \":mutex\",\n         \":thread_annotations\",\n+        \"@com_google_absl//absl/base:nullability\",\n         \"@local_xla//xla/tsl/platform:logging\",\n     ],\n )"
        },
        {
            "sha": "f342b9c505c1bb46b6330e7a2277431fe398389e",
            "filename": "third_party/xla/third_party/tsl/tsl/platform/refcount.h",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/98b8166f25665d4cca7e92d85a19d2eb33796140/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Frefcount.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/98b8166f25665d4cca7e92d85a19d2eb33796140/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Frefcount.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Frefcount.h?ref=98b8166f25665d4cca7e92d85a19d2eb33796140",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <map>\n #include <memory>\n \n+#include \"absl/base/nullability.h\"\n #include \"xla/tsl/platform/logging.h\"\n #include \"tsl/platform/mutex.h\"\n #include \"tsl/platform/thread_annotations.h\"\n@@ -98,7 +99,8 @@ ABSL_MUST_USE_RESULT RefCountPtr<T> GetNewRef(T* ptr) {\n \n // A unique_ptr that unrefs the owned object on destruction.\n template <typename T>\n-class RefCountPtr : public std::unique_ptr<T, RefCountDeleter> {\n+class ABSL_NULLABILITY_COMPATIBLE RefCountPtr\n+    : public std::unique_ptr<T, RefCountDeleter> {\n  public:\n   using std::unique_ptr<T, RefCountDeleter>::unique_ptr;\n   ABSL_MUST_USE_RESULT RefCountPtr GetNewRef() const {"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}