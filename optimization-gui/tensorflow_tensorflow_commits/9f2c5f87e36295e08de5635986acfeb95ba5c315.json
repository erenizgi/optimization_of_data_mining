{
    "author": "tensorflower-gardener",
    "message": "Add negative test data for signed int sort.\n\nPiperOrigin-RevId: 806429052",
    "sha": "9f2c5f87e36295e08de5635986acfeb95ba5c315",
    "files": [
        {
            "sha": "f4dd08e12e2bc55f9451602bf8e57ddb137be11b",
            "filename": "third_party/xla/xla/literal_util.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9f2c5f87e36295e08de5635986acfeb95ba5c315/third_party%2Fxla%2Fxla%2Fliteral_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9f2c5f87e36295e08de5635986acfeb95ba5c315/third_party%2Fxla%2Fxla%2Fliteral_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fliteral_util.cc?ref=9f2c5f87e36295e08de5635986acfeb95ba5c315",
            "patch": "@@ -417,8 +417,14 @@ void PopulateWithRandomIntegralDataWithBounds(Literal* literal,\n            primitive_util::NativeToPrimitiveType<IntT>());\n   if (no_duplicates &&\n       ShapeUtil::ElementsIn(literal->shape()) < static_cast<int64_t>(max)) {\n+    int32_t start = 0;\n+    if (primitive_util::IsSignedIntegralType(literal->shape().element_type())) {\n+      // Generate negative numbers also.\n+      auto size = literal->data<IntT>().size();\n+      start = size / 2 - size;\n+    }\n     std::iota(literal->data<IntT>().begin(), literal->data<IntT>().end(),\n-              static_cast<IntT>(0));\n+              static_cast<IntT>(start));\n     std::shuffle(literal->data<IntT>().begin(), literal->data<IntT>().end(),\n                  *engine);\n   } else {"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 7,
        "deletions": 1
    }
}