{
    "author": "tensorflower-gardener",
    "message": "Remove dependency on private `absl/base:endian`.\n\nPiperOrigin-RevId: 825772784",
    "sha": "9511b51e614f6d072bb657e71d8803b65e1c0ef9",
    "files": [
        {
            "sha": "866636da4200a042ed65066ff7257e10cc852d85",
            "filename": "third_party/xla/xla/hlo/evaluator/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9511b51e614f6d072bb657e71d8803b65e1c0ef9/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9511b51e614f6d072bb657e71d8803b65e1c0ef9/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2FBUILD?ref=9511b51e614f6d072bb657e71d8803b65e1c0ef9",
            "patch": "@@ -86,7 +86,6 @@ cc_library(\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/base:core_headers\",\n-        \"@com_google_absl//absl/base:endian\",\n         \"@com_google_absl//absl/cleanup\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:inlined_vector\",\n@@ -167,9 +166,9 @@ xla_cc_test(\n         \"//xla/tsl/platform:test_benchmark\",\n         \"//xla/tsl/platform:test_main\",  # fixdeps: keep\n         \"@com_google_absl//absl/algorithm:container\",\n-        \"@com_google_absl//absl/base:endian\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log:check\",\n+        \"@com_google_absl//absl/numeric:bits\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\","
        },
        {
            "sha": "5529266e4b9daff55a97308bcde9e02b2c4802b1",
            "filename": "third_party/xla/xla/hlo/evaluator/hlo_evaluator.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 5,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9511b51e614f6d072bb657e71d8803b65e1c0ef9/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9511b51e614f6d072bb657e71d8803b65e1c0ef9/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc?ref=9511b51e614f6d072bb657e71d8803b65e1c0ef9",
            "patch": "@@ -35,7 +35,6 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/algorithm/container.h\"\n-#include \"absl/base/internal/endian.h\"\n #include \"absl/cleanup/cleanup.h\"\n #include \"absl/container/flat_hash_map.h\"\n #include \"absl/container/inlined_vector.h\"\n@@ -236,10 +235,15 @@ absl::Status MakeEvalErrorDueToParamOrInfeed(\n       eval_instruction.parent()->name(), \").\"));\n   std::string error_payload;\n   error_payload.resize(sizeof(internal::EvalErrorDetail));\n-  absl::little_endian::Store32(\n-      const_cast<char*>(error_payload.data()),\n-      static_cast<uint32_t>(\n-          internal::EvalErrorDetail::kDynamicValueDependence));\n+\n+  uint32_t error_detail =\n+      static_cast<uint32_t>(internal::EvalErrorDetail::kDynamicValueDependence);\n+  // Ensure that the error detail is also in little endian.\n+  if constexpr (absl::endian::native != absl::endian::little) {\n+    DCHECK(absl::endian::native == absl::endian::big);\n+    error_detail = absl::byteswap(error_detail);\n+  }\n+  (*error_payload.data()) = error_detail;\n   error.SetPayload(internal::kEvalErrorDetailUrl, absl::Cord(error_payload));\n   return error;\n }"
        },
        {
            "sha": "28027515503e52857f2b23c207486a66dce1b79f",
            "filename": "third_party/xla/xla/hlo/evaluator/hlo_evaluator_test.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 5,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9511b51e614f6d072bb657e71d8803b65e1c0ef9/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9511b51e614f6d072bb657e71d8803b65e1c0ef9/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_test.cc?ref=9511b51e614f6d072bb657e71d8803b65e1c0ef9",
            "patch": "@@ -27,9 +27,9 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/algorithm/container.h\"\n-#include \"absl/base/internal/endian.h\"\n #include \"absl/container/flat_hash_set.h\"\n #include \"absl/log/check.h\"\n+#include \"absl/numeric/bits.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/str_format.h\"\n@@ -7662,10 +7662,16 @@ TEST(EvalErrorTest, Payload) {\n   absl::Status s = absl::InternalError(\"hmm\");\n   std::string payload;\n   payload.resize(sizeof(internal::EvalErrorDetail));\n-  absl::little_endian::Store32(\n-      const_cast<char*>(payload.data()),\n-      static_cast<uint32_t>(\n-          internal::EvalErrorDetail::kDynamicValueDependence));\n+\n+  uint32_t error_detail =\n+      static_cast<uint32_t>(internal::EvalErrorDetail::kDynamicValueDependence);\n+  // Ensure that the error detail is also in little endian.\n+  if constexpr (absl::endian::native != absl::endian::little) {\n+    DCHECK(absl::endian::native == absl::endian::big);\n+    error_detail = absl::byteswap(error_detail);\n+  }\n+  (*payload.data()) = error_detail;\n+\n   s.SetPayload(internal::kEvalErrorDetailUrl, absl::Cord(payload));\n \n   EXPECT_EQ(internal::ParseEvalErrorDetail(s),"
        }
    ],
    "stats": {
        "total": 33,
        "additions": 21,
        "deletions": 12
    }
}