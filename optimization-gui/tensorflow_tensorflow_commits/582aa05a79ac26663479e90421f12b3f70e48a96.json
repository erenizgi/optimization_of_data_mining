{
    "author": "tensorflower-gardener",
    "message": "Add TensorTypeGetSize to schema_utils.\n\nPiperOrigin-RevId: 824743105",
    "sha": "582aa05a79ac26663479e90421f12b3f70e48a96",
    "files": [
        {
            "sha": "cb61ce6243f3ad201933ee631694327c21767a2d",
            "filename": "tensorflow/compiler/mlir/lite/schema/schema_utils.cc",
            "status": "modified",
            "additions": 51,
            "deletions": 0,
            "changes": 51,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/582aa05a79ac26663479e90421f12b3f70e48a96/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema_utils.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/582aa05a79ac26663479e90421f12b3f70e48a96/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema_utils.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema_utils.cc?ref=582aa05a79ac26663479e90421f12b3f70e48a96",
            "patch": "@@ -15,8 +15,12 @@ limitations under the License.\n #include \"tensorflow/compiler/mlir/lite/schema/schema_utils.h\"\n \n #include <algorithm>\n+#include <complex>\n+#include <cstddef>\n+#include <cstdint>\n \n #include \"tensorflow/compiler/mlir/lite/kernels/internal/compatibility_macros.h\"\n+#include \"tensorflow/compiler/mlir/lite/schema/schema_generated.h\"\n \n namespace tflite {\n \n@@ -59,4 +63,51 @@ BuiltinOperator GetBuiltinCode(const OperatorCodeT* op_code) {\n                                              op_code->deprecated_builtin_code));\n }\n \n+size_t TensorTypeGetSize(::tflite::TensorType data_type) {\n+  switch (data_type) {\n+    case ::tflite::TensorType_FLOAT32:\n+      static_assert(sizeof(float) == 4, \"\");\n+      return 4;\n+    case ::tflite::TensorType_FLOAT16:\n+      static_assert(sizeof(int16_t) == 2, \"\");\n+      return 2;\n+    case ::tflite::TensorType_INT32:\n+      static_assert(sizeof(int32_t) == 4, \"\");\n+      return 4;\n+    case ::tflite::TensorType_UINT8:\n+      static_assert(sizeof(uint8_t) == 1, \"\");\n+      return 1;\n+    case ::tflite::TensorType_INT64:\n+      static_assert(sizeof(int64_t) == 8, \"\");\n+      return 8;\n+    case ::tflite::TensorType_BOOL:\n+      return sizeof(bool);\n+    case ::tflite::TensorType_INT16:\n+      static_assert(sizeof(int16_t) == 2, \"\");\n+      return 2;\n+    case ::tflite::TensorType_COMPLEX64:\n+      static_assert(sizeof(std::complex<float>) == 8, \"\");\n+      return 8;\n+    case ::tflite::TensorType_INT8:\n+      static_assert(sizeof(int8_t) == 1, \"\");\n+      return 1;\n+    case ::tflite::TensorType_FLOAT64:\n+      static_assert(sizeof(double) == 8, \"\");\n+      return 8;\n+    case ::tflite::TensorType_COMPLEX128:\n+      static_assert(sizeof(std::complex<double>) == 16, \"\");\n+      return 16;\n+    case ::tflite::TensorType_UINT64:\n+      static_assert(sizeof(uint64_t) == 8, \"\");\n+      return 8;\n+    case ::tflite::TensorType_UINT32:\n+      static_assert(sizeof(uint32_t) == 4, \"\");\n+      return 4;\n+    case ::tflite::TensorType_UINT16:\n+      static_assert(sizeof(uint16_t) == 2, \"\");\n+      return 2;\n+    default:\n+      return 0;\n+  }\n+}\n }  // namespace tflite"
        },
        {
            "sha": "9c32680b85117f62a0394470ca987070d2ba60ae",
            "filename": "tensorflow/compiler/mlir/lite/schema/schema_utils.h",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/582aa05a79ac26663479e90421f12b3f70e48a96/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema_utils.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/582aa05a79ac26663479e90421f12b3f70e48a96/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema_utils.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fschema%2Fschema_utils.h?ref=582aa05a79ac26663479e90421f12b3f70e48a96",
            "patch": "@@ -15,6 +15,8 @@ limitations under the License.\n #ifndef TENSORFLOW_COMPILER_MLIR_LITE_SCHEMA_SCHEMA_UTILS_H_\n #define TENSORFLOW_COMPILER_MLIR_LITE_SCHEMA_SCHEMA_UTILS_H_\n \n+#include <cstddef>\n+\n #include \"flatbuffers/flatbuffers.h\"\n #include \"tensorflow/compiler/mlir/lite/schema/schema_generated.h\"\n \n@@ -28,6 +30,11 @@ BuiltinOperator GetBuiltinCode(const OperatorCode *op_code);\n \n BuiltinOperator GetBuiltinCode(const OperatorCodeT *op_code);\n \n+// Returns the size of the given TensorType in bytes, or 0 if the TensorType is\n+// not supported, this function should be aligned with TfLiteTypeGetSize in\n+// lite/kernels/kernel_util.h.\n+size_t TensorTypeGetSize(::tflite::TensorType data_type);\n+\n }  // namespace tflite\n \n #endif  // TENSORFLOW_COMPILER_MLIR_LITE_SCHEMA_SCHEMA_UTILS_H_"
        }
    ],
    "stats": {
        "total": 58,
        "additions": 58,
        "deletions": 0
    }
}