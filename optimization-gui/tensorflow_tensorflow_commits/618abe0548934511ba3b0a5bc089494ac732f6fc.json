{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 847190441",
    "sha": "618abe0548934511ba3b0a5bc089494ac732f6fc",
    "files": [
        {
            "sha": "794f51cd1cb394c29e9917f57bd9ea9bf547ca88",
            "filename": "tensorflow/core/kernels/fuzzing/example_proto_fast_parsing_fuzz.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fexample_proto_fast_parsing_fuzz.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fexample_proto_fast_parsing_fuzz.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fexample_proto_fast_parsing_fuzz.cc?ref=618abe0548934511ba3b0a5bc089494ac732f6fc",
            "patch": "@@ -62,7 +62,7 @@ class FuzzExampleProtoFastParsing : public FuzzSession {\n     // TODO(dga):  Test the batch case also.\n     Tensor input_tensor(tensorflow::DT_STRING, TensorShape({}));\n     input_tensor.scalar<tstring>()() =\n-        string(reinterpret_cast<const char*>(data), size);\n+        std::string(reinterpret_cast<const char*>(data), size);\n     RunInputs({{\"input\", input_tensor}});\n   }\n };"
        },
        {
            "sha": "d178208a1a35e0def8db638f5cefe4a466c7e082",
            "filename": "tensorflow/core/kernels/fuzzing/fuzz_session.h",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Ffuzz_session.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Ffuzz_session.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Ffuzz_session.h?ref=618abe0548934511ba3b0a5bc089494ac732f6fc",
            "patch": "@@ -81,7 +81,7 @@ class FuzzSession {\n   // Initializes the FuzzSession.  Not safe for multithreading.\n   // Separate init function because the call to virtual BuildGraphDef\n   // can't be put into the constructor.\n-  Status InitIfNeeded() {\n+  absl::Status InitIfNeeded() {\n     if (initialized_) {\n       return absl::OkStatus();\n     }\n@@ -96,7 +96,7 @@ class FuzzSession {\n     GraphDef graph_def;\n     TF_CHECK_OK(root.ToGraphDef(&graph_def));\n \n-    Status status = session_->Create(graph_def);\n+    absl::Status status = session_->Create(graph_def);\n     if (!status.ok()) {\n       // This is FATAL, because this code is designed to fuzz an op\n       // within a session.  Failure to create the session means we\n@@ -111,20 +111,20 @@ class FuzzSession {\n   // any returned output.\n   // Note: We are ignoring Status from Run here since fuzzers don't need to\n   // check it (as that will slow them down and printing/logging is useless).\n-  void RunInputs(const std::vector<std::pair<string, Tensor> >& inputs) {\n+  void RunInputs(const std::vector<std::pair<std::string, Tensor> >& inputs) {\n     RunInputsWithStatus(inputs).IgnoreError();\n   }\n \n   // Same as RunInputs but don't ignore status\n-  Status RunInputsWithStatus(\n-      const std::vector<std::pair<string, Tensor> >& inputs) {\n+  absl::Status RunInputsWithStatus(\n+      const std::vector<std::pair<std::string, Tensor> >& inputs) {\n     return session_->Run(inputs, {}, {\"output\"}, nullptr);\n   }\n \n   // Dispatches to FuzzImpl;  small amount of sugar to keep the code\n   // of the per-op fuzzers tiny.\n   int Fuzz(const uint8_t* data, size_t size) {\n-    Status status = InitIfNeeded();\n+    absl::Status status = InitIfNeeded();\n     TF_CHECK_OK(status) << \"Fuzzer graph initialization failed: \"\n                         << status.message();\n     // No return value from fuzzing:  Success is defined as \"did not\n@@ -146,7 +146,7 @@ class FuzzStringInputOp : public FuzzSession {\n   void FuzzImpl(const uint8_t* data, size_t size) final {\n     Tensor input_tensor(tensorflow::DT_STRING, TensorShape({}));\n     input_tensor.scalar<tstring>()() =\n-        string(reinterpret_cast<const char*>(data), size);\n+        std::string(reinterpret_cast<const char*>(data), size);\n     RunInputs({{\"input\", input_tensor}});\n   }\n };"
        },
        {
            "sha": "458329000ca3493974a8587baaedc154c591f882",
            "filename": "tensorflow/core/kernels/fuzzing/one_hot_fuzz.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fone_hot_fuzz.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fone_hot_fuzz.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fone_hot_fuzz.cc?ref=618abe0548934511ba3b0a5bc089494ac732f6fc",
            "patch": "@@ -42,7 +42,7 @@ class FuzzOneHot : public FuzzSession {\n   void FuzzImpl(const uint8_t* data, size_t size) override {\n     int64_t input_size;\n     int32_t depth;\n-    uint8 on, off;\n+    uint8_t on, off;\n     const uint8_t* input_data;\n \n     if (size > 3) {\n@@ -51,7 +51,7 @@ class FuzzOneHot : public FuzzSession {\n       if (size > kMaxSize) {\n         size = kMaxSize;\n       }\n-      depth = static_cast<int32>(data[0]);\n+      depth = static_cast<int32_t>(data[0]);\n       on = data[1];\n       off = data[2];\n       input_size = static_cast<int64_t>(size - 3);\n@@ -69,13 +69,13 @@ class FuzzOneHot : public FuzzSession {\n     Tensor on_tensor(tensorflow::DT_UINT8, TensorShape({}));\n     Tensor off_tensor(tensorflow::DT_UINT8, TensorShape({}));\n \n-    auto flat_tensor = input_tensor.flat<uint8>();\n+    auto flat_tensor = input_tensor.flat<uint8_t>();\n     for (size_t i = 0; i < input_size; i++) {\n       flat_tensor(i) = input_data[i];\n     }\n-    depth_tensor.scalar<int32>()() = depth;\n-    on_tensor.scalar<uint8>()() = on;\n-    off_tensor.scalar<uint8>()() = off;\n+    depth_tensor.scalar<int32_t>()() = depth;\n+    on_tensor.scalar<uint8_t>()() = on;\n+    off_tensor.scalar<uint8_t>()() = off;\n \n     RunInputs({{\"input\", input_tensor},\n                {\"depth\", depth_tensor},"
        },
        {
            "sha": "a8cc47e599ee43bea8dea5fc6bf2a4c436dcd76f",
            "filename": "tensorflow/core/kernels/fuzzing/parse_tensor_op_fuzz.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fparse_tensor_op_fuzz.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fparse_tensor_op_fuzz.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fparse_tensor_op_fuzz.cc?ref=618abe0548934511ba3b0a5bc089494ac732f6fc",
            "patch": "@@ -53,7 +53,8 @@ class FuzzParseTensor : public FuzzSession {\n     // detects another similar OOM.\n     // After adding `-fsanitize=null` to ASAN (cl/317376103), the memory\n     // footprint increased, so we lower the maximum threshold to 2^18.\n-    string as_string = string(reinterpret_cast<const char*>(data), size);\n+    std::string as_string =\n+        std::string(reinterpret_cast<const char*>(data), size);\n     TensorProto proto;\n     if (!ParseProtoUnlimited(&proto, as_string)) {\n       LOG(WARNING) << \"Unable to parse proto of tensor\\n\";"
        },
        {
            "sha": "81f489b2080d80f9ff56ddb9293e7b04a75bbbe6",
            "filename": "tensorflow/core/kernels/fuzzing/scatter_nd_fuzz.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fscatter_nd_fuzz.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/618abe0548934511ba3b0a5bc089494ac732f6fc/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fscatter_nd_fuzz.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Ffuzzing%2Fscatter_nd_fuzz.cc?ref=618abe0548934511ba3b0a5bc089494ac732f6fc",
            "patch": "@@ -67,7 +67,7 @@ class FuzzScatterNd : public FuzzSession {\n \n     // Subsequent elements give the contents of the shape tensor.\n     // To not get out of memory, reduce all dimensions to at most kMaxDim\n-    auto flat_shape = shape_tensor.flat<int32>();\n+    auto flat_shape = shape_tensor.flat<int32_t>();\n     for (i = 0; i < shape_dims; i++) {\n       flat_shape(i) = data[data_ix++] % kMaxDim;\n     }\n@@ -94,7 +94,7 @@ class FuzzScatterNd : public FuzzSession {\n     Tensor indices_tensor(tensorflow::DT_INT32, TensorShape(indices_dims));\n \n     // Rest of the buffer is used to fill in the indices_tensor\n-    auto flat_indices = indices_tensor.flat<int32>();\n+    auto flat_indices = indices_tensor.flat<int32_t>();\n     for (i = 0; i < num_indices && data_ix < size; i++) {\n       flat_indices(i) = data[data_ix++];\n     }\n@@ -118,7 +118,7 @@ class FuzzScatterNd : public FuzzSession {\n     Tensor updates_tensor(tensorflow::DT_INT32, TensorShape(updates_dims));\n \n     // We don't care about the values in the updates_tensor, make them all be 1\n-    auto flat_updates = updates_tensor.flat<int32>();\n+    auto flat_updates = updates_tensor.flat<int32_t>();\n     for (i = 0; i < num_indices; i++) {\n       flat_updates(i) = 1;\n     }"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 19,
        "deletions": 18
    }
}