{
    "author": "beckerhe",
    "message": "Remove unused HostOrDeviceScalar.\n\nThe HostOrDeviceScalar class and its associated build target are no longer used in the codebase and can be safely removed. This also includes cleaning up unused includes and build dependencies in related files.\n\nPiperOrigin-RevId: 834291662",
    "sha": "f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925",
    "files": [
        {
            "sha": "9559e9ed145773902eb5368ddd372d5921c15485",
            "filename": "third_party/xla/xla/stream_executor/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2FBUILD?ref=f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925",
            "patch": "@@ -250,15 +250,6 @@ cc_library(\n     ],\n )\n \n-cc_library(\n-    name = \"host_or_device_scalar\",\n-    hdrs = [\"host_or_device_scalar.h\"],\n-    deps = [\n-        \":device_memory\",\n-        \"@com_google_absl//absl/log:check\",\n-    ],\n-)\n-\n cc_library(\n     name = \"launch_dim\",\n     srcs = [\"launch_dim.cc\"],"
        },
        {
            "sha": "ced3581837bb7e57c4aa5a0cd96203df0b4839ef",
            "filename": "third_party/xla/xla/stream_executor/cuda/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD?ref=f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925",
            "patch": "@@ -282,7 +282,6 @@ cc_library(\n         \"//xla/stream_executor:device_memory\",\n         \"//xla/stream_executor:engine_options\",\n         \"//xla/stream_executor:event_based_timer\",\n-        \"//xla/stream_executor:host_or_device_scalar\",\n         \"//xla/stream_executor:plugin_registry\",\n         \"//xla/stream_executor:scratch_allocator\",\n         \"//xla/stream_executor:stream\","
        },
        {
            "sha": "3ee8ba4639c5bd262facd00aa619108b2a396ede",
            "filename": "third_party/xla/xla/stream_executor/gpu/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2FBUILD?ref=f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925",
            "patch": "@@ -440,7 +440,6 @@ cc_library(\n     local_defines = if_cuda_is_configured([\"GOOGLE_CUDA=1\"]),\n     deps = [\n         \":gpu_blas_lt_proto_cc\",\n-        \"//xla:protobuf_util\",\n         \"//xla:shape_util\",\n         \"//xla:status_macros\",\n         \"//xla:types\",\n@@ -449,7 +448,6 @@ cc_library(\n         \"//xla/service:algorithm_util\",\n         \"//xla/stream_executor:blas\",\n         \"//xla/stream_executor:device_memory\",\n-        \"//xla/stream_executor:host_or_device_scalar\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/stream_executor:stream_executor_h\",\n         \"//xla/tsl/platform:statusor\",\n@@ -464,7 +462,6 @@ cc_library(\n         \"@com_google_absl//absl/strings:str_format\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:errors\",\n         \"@local_tsl//tsl/platform:statusor\",\n     ] + if_cuda_is_configured([\n         \"@local_tsl//tsl/platform:tensor_float_32_hdr_lib\","
        },
        {
            "sha": "b1e4f8f6aaa892de241c6537c6021705a457d086",
            "filename": "third_party/xla/xla/stream_executor/gpu/gpu_blas_lt.h",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2Fgpu_blas_lt.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2Fgpu_blas_lt.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fgpu%2Fgpu_blas_lt.h?ref=f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925",
            "patch": "@@ -30,14 +30,11 @@ limitations under the License.\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/synchronization/mutex.h\"\n-#include \"xla/protobuf_util.h\"\n #include \"xla/stream_executor/blas.h\"\n #include \"xla/stream_executor/device_memory.h\"\n #include \"xla/stream_executor/gpu/gpu_blas_lt.pb.h\"\n-#include \"xla/stream_executor/host_or_device_scalar.h\"\n #include \"xla/types.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/errors.h\"\n \n namespace stream_executor::gpu {\n "
        },
        {
            "sha": "81e07e2d194cee45850f7b080661cd00a03b7eca",
            "filename": "third_party/xla/xla/stream_executor/host_or_device_scalar.h",
            "status": "removed",
            "additions": 0,
            "deletions": 53,
            "changes": 53,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/402aeaf322152c834042189ecd3cd0d3b1688486/third_party%2Fxla%2Fxla%2Fstream_executor%2Fhost_or_device_scalar.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/402aeaf322152c834042189ecd3cd0d3b1688486/third_party%2Fxla%2Fxla%2Fstream_executor%2Fhost_or_device_scalar.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fhost_or_device_scalar.h?ref=402aeaf322152c834042189ecd3cd0d3b1688486",
            "patch": "@@ -1,53 +0,0 @@\n-/* Copyright 2018 The OpenXLA Authors.\n-\n-Licensed under the Apache License, Version 2.0 (the \"License\");\n-you may not use this file except in compliance with the License.\n-You may obtain a copy of the License at\n-\n-    http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing, software\n-distributed under the License is distributed on an \"AS IS\" BASIS,\n-WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-See the License for the specific language governing permissions and\n-limitations under the License.\n-==============================================================================*/\n-\n-#ifndef XLA_STREAM_EXECUTOR_HOST_OR_DEVICE_SCALAR_H_\n-#define XLA_STREAM_EXECUTOR_HOST_OR_DEVICE_SCALAR_H_\n-\n-#include <utility>\n-#include <variant>\n-\n-#include \"absl/log/check.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n-\n-namespace stream_executor {\n-\n-// Allows to represent a value that is either a host scalar or a scalar stored\n-// on the device.\n-template <typename T>\n-class HostOrDeviceScalar {\n- public:\n-  explicit HostOrDeviceScalar(T host_value) : value_(std::move(host_value)) {}\n-  explicit HostOrDeviceScalar(DeviceMemory<T> device_ptr)\n-      : value_(std::move(device_ptr)) {\n-    CHECK_EQ(1, device_ptr.ElementCount());\n-  }\n-\n-  bool on_device() const {\n-    return std::holds_alternative<DeviceMemory<T>>(value_);\n-  }\n-\n-  const void* opaque() const {\n-    return on_device() ? std::get<DeviceMemory<T>>(value_).opaque()\n-                       : &std::get<T>(value_);\n-  }\n-\n- private:\n-  std::variant<T, DeviceMemory<T>> value_;\n-};\n-\n-}  // namespace stream_executor\n-\n-#endif  // XLA_STREAM_EXECUTOR_HOST_OR_DEVICE_SCALAR_H_"
        },
        {
            "sha": "923efa92155ae18c34570f0cfbf59788ee654147",
            "filename": "third_party/xla/xla/stream_executor/rocm/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD?ref=f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925",
            "patch": "@@ -384,7 +384,6 @@ cc_library(\n         \"//xla/stream_executor:device_memory\",\n         \"//xla/stream_executor:engine_options\",\n         \"//xla/stream_executor:event_based_timer\",\n-        \"//xla/stream_executor:host_or_device_scalar\",\n         \"//xla/stream_executor:plugin_registry\",\n         \"//xla/stream_executor:scratch_allocator\",\n         \"//xla/stream_executor:stream_executor_h\",\n@@ -691,7 +690,6 @@ cc_library(\n         \"//xla/stream_executor:blas\",\n         \"//xla/stream_executor:device_memory\",\n         \"//xla/stream_executor:event_based_timer\",\n-        \"//xla/stream_executor:host_or_device_scalar\",\n         \"//xla/stream_executor:scratch_allocator\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/stream_executor/gpu:gpu_blas_lt\",\n@@ -732,7 +730,6 @@ cc_library(\n         \"//xla:types\",\n         \"//xla/stream_executor:blas\",\n         \"//xla/stream_executor:device_memory\",\n-        \"//xla/stream_executor:host_or_device_scalar\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/stream_executor/gpu:gpu_blas_lt\",\n         \"//xla/tsl/platform:env\","
        },
        {
            "sha": "19ce154948d8e76ac6b132c9bc67f7b329226442",
            "filename": "third_party/xla/xla/stream_executor/rocm/hip_blas_lt.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Fhip_blas_lt.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Fhip_blas_lt.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Fhip_blas_lt.h?ref=f71ec3467ea5e6ba8cb4346a41d5db11fe9bc925",
            "patch": "@@ -21,7 +21,6 @@ limitations under the License.\n #include \"xla/stream_executor/blas.h\"\n #include \"xla/stream_executor/device_memory.h\"\n #include \"xla/stream_executor/gpu/gpu_blas_lt.h\"\n-#include \"xla/stream_executor/host_or_device_scalar.h\"\n #include \"xla/stream_executor/stream.h\"\n #include \"xla/types.h\"\n "
        }
    ],
    "stats": {
        "total": 73,
        "additions": 0,
        "deletions": 73
    }
}