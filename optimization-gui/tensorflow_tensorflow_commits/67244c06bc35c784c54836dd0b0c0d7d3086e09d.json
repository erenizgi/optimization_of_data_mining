{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 797515554",
    "sha": "67244c06bc35c784c54836dd0b0c0d7d3086e09d",
    "files": [
        {
            "sha": "6af1a591a90861f9e1f6fac132dc4a72c00b316e",
            "filename": "tensorflow/core/common_runtime/device/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2FBUILD?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -102,6 +102,7 @@ cc_library(\n         \"//tensorflow/core:protos_all_cc\",\n         \"//tensorflow/core/platform:stream_executor\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -110,6 +111,7 @@ cc_library(\n     textual_hdrs = [\n         \"device_event_mgr.h\",\n     ],\n+    deps = [\"@com_google_absl//absl/synchronization\"],\n )\n \n cc_library(\n@@ -168,6 +170,7 @@ tf_cuda_cc_test(\n         \"//tensorflow/core:test_main\",\n         \"//tensorflow/core:testlib\",\n         \"//tensorflow/core/kernels:cwise_op\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@local_xla//xla/tsl/framework:device_id\",\n     ] + if_cuda_or_rocm([\n         \"@local_xla//xla/stream_executor/gpu:gpu_init\","
        },
        {
            "sha": "9d5f77a2b636ba57c5ac6f69b8de0d6534f2eb8e",
            "filename": "tensorflow/core/common_runtime/device/device_event_mgr.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <memory>\n #include <utility>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/platform/stacktrace.h\"\n #include \"tensorflow/core/platform/stream_executor.h\"\n #include \"tensorflow/core/protobuf/config.pb.h\"\n@@ -123,7 +124,7 @@ void EventMgr::StartPollingLoop() {\n     mutex_lock l(mu_);\n     stop_polling_ = false;\n   }\n-  polling_stopped_ = std::make_unique<Notification>();\n+  polling_stopped_ = std::make_unique<absl::Notification>();\n   threadpool_.Schedule([this]() { PollLoop(); });\n }\n "
        },
        {
            "sha": "7fb0dbc822d676738d9ec2a1c0781d1415f432da",
            "filename": "tensorflow/core/common_runtime/device/device_event_mgr.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr.h?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -23,7 +23,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/container/flat_hash_map.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/lib/core/threadpool.h\"\n #include \"tensorflow/core/lib/gtl/inlined_vector.h\"\n #include \"tensorflow/core/platform/mutex.h\"\n@@ -134,7 +134,7 @@ class EventMgr {\n       callbacks_ TF_GUARDED_BY(mu_);\n \n   bool stop_polling_ TF_GUARDED_BY(mu_);\n-  std::unique_ptr<Notification> polling_stopped_;\n+  std::unique_ptr<absl::Notification> polling_stopped_;\n \n   // The main PollLoop for the event manager runs in this threadpool.\n   thread::ThreadPool threadpool_;"
        },
        {
            "sha": "d252b541fcddfb641a52da341e3608cc9c60684e",
            "filename": "tensorflow/core/common_runtime/device/device_event_mgr_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fdevice%2Fdevice_event_mgr_test.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n \n #include <atomic>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"xla/stream_executor/gpu/gpu_init.h\"\n #include \"xla/tsl/framework/device_id.h\"\n #include \"tensorflow/core/common_runtime/dma_helper.h\"\n@@ -128,7 +129,7 @@ TEST(EventMgr, WarnIfInCallback) {\n   th.StartPollingLoop();\n   device_event_mgr::WarnIfInCallback([&hit] { hit = true; });\n   EXPECT_FALSE(hit);\n-  Notification note;\n+  absl::Notification note;\n   em.ThenExecute(stream.get(), [&hit, &note]() {\n     device_event_mgr::WarnIfInCallback([&hit, &note] {\n       hit = true;"
        },
        {
            "sha": "8f4f3633706ef776a08afa2553a9b255c304c394",
            "filename": "tensorflow/core/data/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdata%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdata%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdata%2FBUILD?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -709,6 +709,7 @@ cc_library(\n         \"//tensorflow/core:lib\",\n         \"//tensorflow/core:lib_internal\",\n         \"@com_google_absl//absl/memory\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -736,6 +737,7 @@ tf_cc_test(\n         \"//tensorflow/core:lib_internal\",\n         \"//tensorflow/core:test\",\n         \"//tensorflow/core:test_main\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n "
        },
        {
            "sha": "3ffbbd5c70569fcf022dd181e5f0244e849e221b",
            "filename": "tensorflow/core/data/unbounded_thread_pool.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <utility>\n \n #include \"absl/memory/memory.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/framework/dataset.h\"\n #include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/platform/env.h\"\n@@ -37,7 +38,7 @@ namespace data {\n // same `UnboundedThreadPool`.\n class UnboundedThreadPool::LogicalThreadWrapper : public Thread {\n  public:\n-  explicit LogicalThreadWrapper(std::shared_ptr<Notification> done)\n+  explicit LogicalThreadWrapper(std::shared_ptr<absl::Notification> done)\n       : done_(std::move(done)) {}\n \n   ~LogicalThreadWrapper() override {\n@@ -49,7 +50,7 @@ class UnboundedThreadPool::LogicalThreadWrapper : public Thread {\n   }\n \n  private:\n-  std::shared_ptr<Notification> done_;\n+  std::shared_ptr<absl::Notification> done_;\n };\n \n // A lightweight wrapper for creating logical threads in a `UnboundedThreadPool`\n@@ -60,7 +61,7 @@ class UnboundedThreadPool::LogicalThreadFactory : public ThreadFactory {\n \n   std::unique_ptr<Thread> StartThread(const string& name,\n                                       std::function<void()> fn) override {\n-    auto done = std::make_shared<Notification>();\n+    auto done = std::make_shared<absl::Notification>();\n     pool_->ScheduleOnWorkQueue(std::move(fn), done);\n     return std::make_unique<LogicalThreadWrapper>(std::move(done));\n   }\n@@ -87,7 +88,7 @@ int UnboundedThreadPool::CurrentThreadId() const { return -1; }\n \n namespace {\n void WorkQueueFunc(const std::function<void()>& fn,\n-                   std::shared_ptr<Notification> done) {\n+                   std::shared_ptr<absl::Notification> done) {\n   fn();\n   if (done) {\n     done->Notify();\n@@ -96,7 +97,7 @@ void WorkQueueFunc(const std::function<void()>& fn,\n }  // namespace\n \n void UnboundedThreadPool::ScheduleOnWorkQueue(\n-    std::function<void()> fn, std::shared_ptr<Notification> done) {\n+    std::function<void()> fn, std::shared_ptr<absl::Notification> done) {\n   unbounded_work_queue_.Schedule(\n       std::bind(&WorkQueueFunc, std::move(fn), std::move(done)));\n }"
        },
        {
            "sha": "1b89024a8db86e29bd326cd900fd730db69a37d2",
            "filename": "tensorflow/core/data/unbounded_thread_pool.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool.h?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -20,8 +20,8 @@ limitations under the License.\n #include <memory>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/framework/thread_factory.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/threadpool_interface.h\"\n #include \"tensorflow/core/platform/env.h\"\n #include \"tensorflow/core/platform/unbounded_work_queue.h\"\n@@ -55,7 +55,7 @@ class UnboundedThreadPool : public thread::ThreadPoolInterface {\n   class LogicalThreadWrapper;\n \n   void ScheduleOnWorkQueue(std::function<void()> fn,\n-                           std::shared_ptr<Notification> done);\n+                           std::shared_ptr<absl::Notification> done);\n \n   UnboundedWorkQueue unbounded_work_queue_;\n };"
        },
        {
            "sha": "503d21dbf9e66fa63c4c70f9d155577a2a40abed",
            "filename": "tensorflow/core/data/unbounded_thread_pool_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdata%2Funbounded_thread_pool_test.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <memory>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/lib/random/random.h\"\n #include \"tensorflow/core/platform/blocking_counter.h\"\n #include \"tensorflow/core/platform/test.h\"\n@@ -63,7 +64,7 @@ TEST(UnboundedThreadPool, MultipleBlockingThreads) {\n   std::vector<int> round_sizes = {5, 10, 15, 20};\n \n   for (const int round_size : round_sizes) {\n-    Notification n;\n+    absl::Notification n;\n     BlockingCounter bc(round_size);\n     for (int j = 0; j < round_size; ++j) {\n       threads.push_back(thread_factory->StartThread(\"\", [&bc, &n]() {"
        },
        {
            "sha": "cdd4dbd25b75ee2aa2a91b2e4f958caae58a76ec",
            "filename": "tensorflow/core/distributed_runtime/eager/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2FBUILD?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -152,6 +152,7 @@ tf_cc_test(\n         \"//tensorflow/core/distributed_runtime/rpc:rpc_rendezvous_mgr\",\n         \"//tensorflow/core/protobuf:eager_service_proto_cc\",\n         \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/types:optional\",\n         \"@com_google_absl//absl/types:variant\",\n     ],\n@@ -230,6 +231,7 @@ cc_library(\n         \"//tensorflow/core/common_runtime/eager:eager_executor\",\n         \"//tensorflow/core/common_runtime/eager:eager_operation\",\n         \"//tensorflow/core/common_runtime/eager:tensor_handle\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/types:optional\",\n     ],\n )"
        },
        {
            "sha": "a4b1f6552b4b3332d3880ed437ee304a8c1ad3ec",
            "filename": "tensorflow/core/distributed_runtime/eager/eager_service_impl_test.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2Feager_service_impl_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2Feager_service_impl_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2Feager_service_impl_test.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -25,6 +25,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/status/status.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"absl/types/optional.h\"\n #include \"absl/types/variant.h\"\n #include \"tensorflow/c/tf_tensor.h\"\n@@ -587,7 +588,7 @@ class EagerServiceImplFunctionTest : public EagerServiceImplTest {\n \n     CallOptions call_opts;\n     absl::Status status;\n-    Notification n;\n+    absl::Notification n;\n     Env::Default()->SchedClosure([&] {\n       status = eager_service_impl.Enqueue(&call_opts, &remote_enqueue_request,\n                                           &remote_enqueue_response);\n@@ -679,7 +680,7 @@ class EagerServiceImplFunctionTest : public EagerServiceImplTest {\n         &run_comp_func_request);\n \n     CallOptions call_opts;\n-    Notification n;\n+    absl::Notification n;\n     absl::Status status;\n     eager_service_impl.RunComponentFunction(\n         &call_opts, &run_comp_func_request, &run_comp_func_response,\n@@ -845,7 +846,7 @@ TEST_F(EagerServiceImplFunctionTest, ComponentNestedFunctionWithNameClashTest) {\n         &run_comp_func_request);\n \n     CallOptions call_opts;\n-    Notification n;\n+    absl::Notification n;\n     absl::Status status;\n     eager_service_impl.RunComponentFunction(\n         &call_opts, &run_comp_func_request, &run_comp_func_response,\n@@ -887,7 +888,7 @@ TEST_F(EagerServiceImplFunctionTest, ComponentNestedFunctionWithNameClashTest) {\n         &run_comp_func_request);\n \n     CallOptions call_opts;\n-    Notification n;\n+    absl::Notification n;\n     absl::Status status;\n     eager_service_impl.RunComponentFunction(\n         &call_opts, &run_comp_func_request, &run_comp_func_response,\n@@ -1086,7 +1087,7 @@ TEST_F(FunctionWithRemoteInputsTest, EagerPFLRTest) {\n   FunctionLibraryRuntime::Options opts;\n   const uint64 op_id = 2;\n   opts.op_id = op_id;\n-  Notification done;\n+  absl::Notification done;\n   absl::Status status;\n   RemoteTensorHandle input;\n   input.set_op_id(1);\n@@ -1120,7 +1121,7 @@ TEST_F(FunctionWithRemoteInputsTest,\n   FunctionLibraryRuntime::Handle handle;\n   EXPECT_TRUE(MatMulHasAttrWithDefaultValue(fdef_));\n   absl::Status status;\n-  Notification instantiate_done;\n+  absl::Notification instantiate_done;\n   eager_cluster_flr_->Instantiate(\n       fdef_.signature().name(), func_lib_def_, AttrSlice(&fdef_.attr()),\n       FunctionLibraryRuntime::InstantiateOptions(), &handle,\n@@ -1148,7 +1149,7 @@ TEST_F(FunctionWithRemoteInputsTest,\n   // Send input_tensor to the remote device, execute MatMulFunction on the\n   // remote device, and send the output back.\n   FunctionLibraryRuntime::Options opts;\n-  Notification execute_done;\n+  absl::Notification execute_done;\n   std::vector<Tensor> inputs = {*input_tensor};\n   std::vector<Tensor> outputs;\n   eager_cluster_flr_->Run(opts, handle, inputs, &outputs,\n@@ -1268,7 +1269,7 @@ TEST_F(FunctionWithRemoteInputsTest, KernelAndDeviceFuncAsyncTest) {\n   std::vector<FunctionRet> outputs;\n \n   absl::Status status;\n-  Notification n;\n+  absl::Notification n;\n   kernel->RunAsync(/*step_container=*/nullptr, inputs, &outputs,\n                    /*cancellation_manager=*/nullptr,\n                    /*eager_func_params=*/std::nullopt,"
        },
        {
            "sha": "23e620c92cd8a13a9dcca36df1f62a24dc91a215",
            "filename": "tensorflow/core/distributed_runtime/eager/remote_copy_node.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2Fremote_copy_node.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2Fremote_copy_node.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Feager%2Fremote_copy_node.h?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <memory>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/eager/eager_executor.h\"\n #include \"tensorflow/core/common_runtime/eager/eager_operation.h\"\n #include \"tensorflow/core/common_runtime/eager/tensor_handle.h\"\n@@ -157,7 +158,7 @@ class RemoteCopyNode : public AsyncEagerNode {\n     // send_status_ is safe to read only after send_done_.WaitForNotification()\n     // has returned.\n     absl::Status send_status_;\n-    Notification send_done_;\n+    absl::Notification send_done_;\n     TensorShape src_shape_;\n   };\n "
        },
        {
            "sha": "cb0b2151ba03b146d0bd6bb788ad9a6476a9dd7a",
            "filename": "tensorflow/core/distributed_runtime/rpc/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2FBUILD?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -162,15 +162,16 @@ tf_cc_test(\n     ],\n     # copybara:uncomment extra_copts = [\"-Wthread-safety-analysis\"],\n     deps = [\n+        \":grpc_channel\",\n         \":grpc_worker_cache\",\n         \"//tensorflow/c:tf_status_headers\",\n         \"//tensorflow/core:test\",\n         \"//tensorflow/core:test_main\",\n         \"//tensorflow/core/distributed_runtime:test_utils\",\n-        \"//tensorflow/core/distributed_runtime/rpc:grpc_channel\",\n         \"//tensorflow/core/platform:env\",\n         \"//tensorflow/core/platform:status\",\n         \"//tensorflow/core/platform:strcat\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -296,6 +297,7 @@ cc_library(\n         \"//tensorflow/core/distributed_runtime:worker_cache\",\n         \"//tensorflow/core/distributed_runtime:worker_env\",\n         \"//tensorflow/core/distributed_runtime:worker_interface\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -490,6 +492,7 @@ tf_cuda_cc_tests(\n         \"//tensorflow/core/distributed_runtime:test_utils\",\n         \"//tensorflow/core/platform:blocking_counter\",\n         \"//tensorflow/core/protobuf:master_proto_cc\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n "
        },
        {
            "sha": "229f2f3b530e855ccbb4e6f9bba207250e0347a5",
            "filename": "tensorflow/core/distributed_runtime/rpc/grpc_worker_cache_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Fgrpc_worker_cache_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Fgrpc_worker_cache_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Fgrpc_worker_cache_test.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -15,6 +15,7 @@ limitations under the License.\n \n #include \"tensorflow/core/distributed_runtime/rpc/grpc_worker_cache.h\"\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/c/tf_status.h\"\n #include \"tensorflow/core/distributed_runtime/rpc/grpc_channel.h\"\n #include \"tensorflow/core/distributed_runtime/test_utils.h\"\n@@ -78,7 +79,7 @@ TEST(GrpcWorkerCacheTest, DestructWorkerCacheInThreadPool) {\n   WorkerCacheInterface* worker_cache =\n       NewGrpcWorkerCache(channel_cache, grpc_worker_env.get());\n   thread::ThreadPool* tp = grpc_worker_env->GetThreadPool();\n-  Notification n;\n+  absl::Notification n;\n   tp->Schedule([worker_cache, &n] {\n     delete worker_cache;\n     n.Notify();"
        },
        {
            "sha": "56b6eaade00c2311ff961f67e2fcbb3dbff6767e",
            "filename": "tensorflow/core/distributed_runtime/rpc/rpc_rendezvous_mgr.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Frpc_rendezvous_mgr.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Frpc_rendezvous_mgr.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Frpc_rendezvous_mgr.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -15,6 +15,9 @@ limitations under the License.\n \n #include \"tensorflow/core/distributed_runtime/rpc/rpc_rendezvous_mgr.h\"\n \n+#include <memory>\n+\n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/device.h\"\n #include \"tensorflow/core/common_runtime/device_mgr.h\"\n #include \"tensorflow/core/common_runtime/dma_helper.h\"\n@@ -136,7 +139,7 @@ class RpcRecvTensorCall : public BaseRecvTensorCall {\n   // Start the main RecvTensor call, checking for an async abort.\n   void StartRTCall(std::function<void()> recv_done) {\n     resp_.InitAlloc(dst_device_, alloc_attrs_);\n-    auto abort_checked = std::make_shared<Notification>();\n+    auto abort_checked = std::make_shared<absl::Notification>();\n     auto cb = [this, abort_checked,\n                recv_done = std::move(recv_done)](const absl::Status& s) {\n       // Make sure the Rendezvous abort checking is finished before running the"
        },
        {
            "sha": "8583f67536e68dcf5473fa4389dcac129d690c7b",
            "filename": "tensorflow/core/distributed_runtime/rpc/rpc_rendezvous_mgr_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Frpc_rendezvous_mgr_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Frpc_rendezvous_mgr_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Frpc_rendezvous_mgr_test.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -15,12 +15,12 @@ limitations under the License.\n \n #include \"tensorflow/core/distributed_runtime/rpc/rpc_rendezvous_mgr.h\"\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/process_util.h\"\n #include \"tensorflow/core/distributed_runtime/test_utils.h\"\n #include \"tensorflow/core/framework/cancellation.h\"\n #include \"tensorflow/core/framework/control_flow.h\"\n #include \"tensorflow/core/lib/core/errors.h\"\n-#include \"tensorflow/core/lib/core/notification.h\"\n #include \"tensorflow/core/lib/core/status_test_util.h\"\n #include \"tensorflow/core/platform/blocking_counter.h\"\n #include \"tensorflow/core/platform/env.h\"\n@@ -201,7 +201,7 @@ TEST_F(RpcRendezvousMgrTest, LocalCancel) {\n   auto* cm = new CancellationManager();\n   const int64_t step_id = 123;\n   tsl::core::RefCountPtr<RemoteRendezvous> rendez = rmgr_.Find(step_id);\n-  Notification n;\n+  absl::Notification n;\n   SchedClosure([this, cm, &n]() {\n     env.env->SleepForMicroseconds(100 * 1000);\n     cm->StartCancel();\n@@ -224,7 +224,7 @@ TEST_F(RpcRendezvousMgrTest, CancelAfterReceived) {\n   auto* cm = new CancellationManager();\n   const int64_t step_id = 123;\n   tsl::core::RefCountPtr<RemoteRendezvous> rendez = rmgr_.Find(step_id);\n-  Notification n;\n+  absl::Notification n;\n   SchedClosure([this, rendez = rendez.get(), key, cm, &n]() {\n     env.env->SleepForMicroseconds(100 * 1000);\n     TF_ASSERT_OK(rendez->Send(key, Rendezvous::Args(), V(\"peach\"), false));\n@@ -269,7 +269,7 @@ TEST_F(RpcRendezvousMgrTest, TransferDummyDeviceContext) {\n     TF_ASSERT_OK(rendez->Send(key, args, V(\"peach\"), false));\n   }\n   {\n-    Notification n;\n+    absl::Notification n;\n     rmgr_.RecvLocalAsync(\n         step_id, key,\n         [&n](const absl::Status& s, const Rendezvous::Args send_args,"
        },
        {
            "sha": "ac89801639bbfda8422f3ea015c807433555cc69",
            "filename": "tensorflow/core/kernels/data/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2FBUILD?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -602,6 +602,7 @@ tf_kernel_library(\n         \"//tensorflow/core/platform:env\",\n         \"//tensorflow/core/platform:refcount\",\n         \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n         \"@local_tsl//tsl/profiler/lib:traceme\",\n         \"@local_tsl//tsl/profiler/lib:traceme_encode\",\n@@ -862,6 +863,7 @@ tf_kernel_library(\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings:str_format\",\n+        \"@com_google_absl//absl/synchronization\",\n         \"@local_xla//xla/tsl/platform:logging\",\n     ],\n )\n@@ -911,6 +913,7 @@ tf_kernel_library(\n         \"//tensorflow/core/profiler/lib:traceme\",\n         \"//tensorflow/core/profiler/lib:traceme_encode\",\n         \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n "
        },
        {
            "sha": "8c59ceab746252035bbe44840a8b505fa1758d2d",
            "filename": "tensorflow/core/kernels/data/experimental/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2FBUILD?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -179,6 +179,7 @@ tf_kernel_library(\n         \"//tensorflow/core:framework\",\n         \"//tensorflow/core:lib\",\n         \"//tensorflow/core:lib_internal\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -665,6 +666,7 @@ tf_kernel_library(\n         \"//tensorflow/core/kernels/data:parallel_map_dataset_op\",\n         \"//tensorflow/core/profiler/lib:traceme\",\n         \"//tensorflow/core/profiler/lib:traceme_encode\",\n+        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n "
        },
        {
            "sha": "c5d18c6fead3585d99ed46a9199f331b63e3574f",
            "filename": "tensorflow/core/kernels/data/experimental/choose_fastest_dataset_op.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fchoose_fastest_dataset_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fchoose_fastest_dataset_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fchoose_fastest_dataset_op.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -13,6 +13,7 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/framework/common_shape_fns.h\"\n #include \"tensorflow/core/framework/dataset.h\"\n #include \"tensorflow/core/framework/op.h\"\n@@ -294,7 +295,7 @@ class ChooseFastestDatasetOp : public DatasetOpKernel {\n \n      private:\n       struct InvocationResult {\n-        Notification notification;\n+        absl::Notification notification;\n         absl::Status status;\n         bool end_of_sequence;\n         std::vector<Tensor> out_tensors;"
        },
        {
            "sha": "94666fa4fa5faa208500126ffc74bd17e82d7433",
            "filename": "tensorflow/core/kernels/data/experimental/parse_example_dataset_op.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fparse_example_dataset_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fparse_example_dataset_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fparse_example_dataset_op.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -21,6 +21,7 @@ limitations under the License.\n #include <utility>\n #include <vector>\n \n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/device.h\"\n #include \"tensorflow/core/data/dataset_utils.h\"\n #include \"tensorflow/core/data/name_utils.h\"\n@@ -543,7 +544,7 @@ class ParseExampleDatasetOp : public UnaryDatasetOpKernel {\n         InvocationResult() = default;\n         explicit InvocationResult(int64_t id) : id(id) {}\n \n-        Notification notification;\n+        absl::Notification notification;\n         absl::Status status;\n         std::vector<Tensor> return_values;\n         bool end_of_input = false;"
        },
        {
            "sha": "0d7a6666b396626c55ae1bb5585f505ced6dd837",
            "filename": "tensorflow/core/kernels/data/multi_device_iterator_ops.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fmulti_device_iterator_ops.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fmulti_device_iterator_ops.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fmulti_device_iterator_ops.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <utility>\n \n #include \"absl/strings/str_cat.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"absl/time/time.h\"\n #include \"tensorflow/core/common_runtime/input_colocation_exemption_registry.h\"\n #include \"tensorflow/core/common_runtime/process_function_library_runtime.h\"\n@@ -717,7 +718,7 @@ class MultiDeviceIteratorGetNextFromShardOp : public AsyncOpKernel {\n \n     background_worker_.Schedule(std::bind(\n         [ctx, iterator, shard_num, incarnation_id](DoneCallback done) {\n-          Notification n;\n+          absl::Notification n;\n           absl::Time start_time = iterator->metrics_collector().RecordStart();\n           MultiDeviceIteratorCallback callback = std::bind(\n               [ctx, iterator, start_time, &n](const HostBufferElement& elem) {"
        },
        {
            "sha": "084eb5e132336496c2719b0f424d890a08020094",
            "filename": "tensorflow/core/kernels/data/parallel_filter_dataset_op.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fparallel_filter_dataset_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fparallel_filter_dataset_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fparallel_filter_dataset_op.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n #include <utility>\n \n #include \"absl/status/status.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"tensorflow/core/common_runtime/function.h\"\n #include \"tensorflow/core/common_runtime/input_colocation_exemption_registry.h\"\n #include \"tensorflow/core/data/dataset_utils.h\"\n@@ -296,7 +297,7 @@ class ParallelFilterDatasetOp::Dataset : public DatasetBase {\n     struct InvocationResult {\n       InvocationResult() : uid(tensorflow::EnvTime::NowNanos()) {}\n \n-      Notification notification;\n+      absl::Notification notification;\n       absl::Status status;\n       std::vector<Tensor> return_values;\n       std::vector<Tensor> predicate_values;"
        },
        {
            "sha": "d93fa9ddf6704c65ef09d91451e7dcc504dc4bd5",
            "filename": "tensorflow/core/kernels/data/parallel_map_dataset_op.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fparallel_map_dataset_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/67244c06bc35c784c54836dd0b0c0d7d3086e09d/tensorflow%2Fcore%2Fkernels%2Fdata%2Fparallel_map_dataset_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fparallel_map_dataset_op.cc?ref=67244c06bc35c784c54836dd0b0c0d7d3086e09d",
            "patch": "@@ -28,6 +28,7 @@ limitations under the License.\n #include \"absl/base/call_once.h\"\n #include \"absl/status/status.h\"\n #include \"absl/strings/str_format.h\"\n+#include \"absl/synchronization/notification.h\"\n #include \"xla/tsl/platform/logging.h\"\n #include \"tensorflow/core/common_runtime/function.h\"\n #include \"tensorflow/core/common_runtime/input_colocation_exemption_registry.h\"\n@@ -504,7 +505,7 @@ class ParallelMapDatasetOp::Dataset : public DatasetBase {\n           : uid(tensorflow::EnvTime::NowNanos()),\n             checkpoint(MemoryCheckpoint{ctx->id_registry()}) {}\n \n-      Notification notification;\n+      absl::Notification notification;\n       absl::Status status;\n       std::vector<Tensor> return_values;\n       bool end_of_input = false;"
        }
    ],
    "stats": {
        "total": 96,
        "additions": 63,
        "deletions": 33
    }
}