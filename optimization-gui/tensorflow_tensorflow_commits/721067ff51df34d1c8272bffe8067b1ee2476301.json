{
    "author": "chsigg",
    "message": "Delete temporary patch for `allocate-shared-memory-nv`.\n\nPiperOrigin-RevId: 800376564",
    "sha": "721067ff51df34d1c8272bffe8067b1ee2476301",
    "files": [
        {
            "sha": "157d9621fbd36ac777f8f816aebf40ef57cdf529",
            "filename": "third_party/xla/third_party/triton/temporary/allocate-shared-memory-nv.patch",
            "status": "removed",
            "additions": 0,
            "deletions": 39,
            "changes": 39,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bb561e077835e3c88281ad1b2ceacd562819a579/third_party%2Fxla%2Fthird_party%2Ftriton%2Ftemporary%2Fallocate-shared-memory-nv.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bb561e077835e3c88281ad1b2ceacd562819a579/third_party%2Fxla%2Fthird_party%2Ftriton%2Ftemporary%2Fallocate-shared-memory-nv.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftriton%2Ftemporary%2Fallocate-shared-memory-nv.patch?ref=bb561e077835e3c88281ad1b2ceacd562819a579",
            "patch": "@@ -1,39 +0,0 @@\n-// This patch should be upstreamed. It is exactly what this is already in\n-// upstream for createConvertTritonGPUToLLVMPass, but not for the new\n-// createAllocateSharedMemoryNvPass. Other option is to pass 84 as ptx version\n-// in the pipeline, but we should be consistent with the other passes.\n-\n---- a/third_party/nvidia/include/TritonNVIDIAGPUToLLVM/Passes.h\t2025-07-31 05:01:16.000000000 -0700\n-+++ b/third_party/nvidia/include/TritonNVIDIAGPUToLLVM/Passes.h\t2025-08-04 08:45:47.000000000 -0700\n-@@ -23,6 +23,8 @@\n- std::unique_ptr<OperationPass<ModuleOp>>\n- createConvertTritonGPUToLLVMPass(int32_t computeCapability, int32_t ptxVersion);\n- std::unique_ptr<OperationPass<ModuleOp>>\n-+createAllocateSharedMemoryNvPass(int32_t computeCapability);\n-+std::unique_ptr<OperationPass<ModuleOp>>\n- createAllocateSharedMemoryNvPass(int32_t computeCapability, int32_t ptxVersion);\n- \n- #define GEN_PASS_REGISTRATION\n-\n---- a/third_party/nvidia/lib/TritonNVIDIAGPUToLLVM/Allocation.cpp\t2025-07-31 05:01:16.000000000 -0700\n-+++ b/third_party/nvidia/lib/TritonNVIDIAGPUToLLVM/Allocation.cpp\t2025-08-04 08:58:21.000000000 -0700\n-@@ -26,6 +26,8 @@\n-           AllocateSharedMemoryNv> {\n-   using AllocateSharedMemoryNvBase::AllocateSharedMemoryNvBase;\n- \n-+  AllocateSharedMemoryNv(int32_t computeCapability)\n-+      : AllocateSharedMemoryNvBase({computeCapability}) {}\n-   AllocateSharedMemoryNv(int32_t computeCapability, int32_t ptxVersion)\n-       : AllocateSharedMemoryNvBase({computeCapability, ptxVersion}) {}\n- \n-@@ -77,6 +79,10 @@\n- } // namespace mlir::triton::nvidia_gpu\n- \n- namespace mlir::triton {\n-+std::unique_ptr<OperationPass<ModuleOp>>\n-+createAllocateSharedMemoryNvPass(int32_t computeCapability) {\n-+  return std::make_unique<AllocateSharedMemoryNv>(computeCapability);\n-+}\n- std::unique_ptr<OperationPass<ModuleOp>>\n- createAllocateSharedMemoryNvPass(int32_t computeCapability,\n-                                  int32_t ptxVersion) {"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 0,
        "deletions": 39
    }
}