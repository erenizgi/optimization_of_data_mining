{
    "author": "Moerafaat",
    "message": "[XLA] Add `acos` as a native HLO opcode.\n\nThis change promotes `acos` from a composite operation to a native HLO opcode (`kAcos`). This allows for direct lowering to device-specific intrinsics which should be more performant. Support is added for GPU.\n\nPiperOrigin-RevId: 806887312",
    "sha": "9433707e83d9fda14dbb613b0c144cf82a6d677a",
    "files": [
        {
            "sha": "205cf6322b950ef586251c19ae70cbff268b581d",
            "filename": "tensorflow/compiler/tf2xla/kernels/unary_ops.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/tensorflow%2Fcompiler%2Ftf2xla%2Fkernels%2Funary_ops.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/tensorflow%2Fcompiler%2Ftf2xla%2Fkernels%2Funary_ops.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Ftf2xla%2Fkernels%2Funary_ops.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -53,9 +53,9 @@ XLAJIT_MAKE_UNARY(Conj, xla::Conj(x));\n \n // Return x if x>0, otherwise -x.\n REGISTER_XLA_OP(Name(\"Abs\"), MlirXlaOpKernel);\n-XLAJIT_MAKE_UNARY(Acos, xla::Acos(x));\n+REGISTER_XLA_OP(Name(\"Acos\"), MlirXlaOpKernel);\n REGISTER_XLA_OP(Name(\"Acosh\"), MlirXlaOpKernel);\n-XLAJIT_MAKE_UNARY(Asin, xla::Asin(x))\n+XLAJIT_MAKE_UNARY(Asin, xla::Asin(x));\n XLAJIT_MAKE_UNARY(Asinh, xla::Asinh(x));\n REGISTER_XLA_OP(Name(\"Atan\"), MlirXlaOpKernel);\n XLAJIT_MAKE_UNARY(Atanh, xla::Atanh(x));"
        },
        {
            "sha": "0241c9224dc6540431edca2e7c6149e31d4b6634",
            "filename": "third_party/xla/xla/backends/gpu/codegen/triton/support.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fsupport.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fsupport.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fsupport.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -105,11 +105,12 @@ absl::flat_hash_set<HloOpcode> TritonSupportedUnaryElementwiseOps(\n       element_type == PrimitiveType::F32 ||\n       element_type == PrimitiveType::F64) {\n     absl::flat_hash_set<HloOpcode> additional_opcodes{\n-        HloOpcode::kCos,  HloOpcode::kFloor, HloOpcode::kLog1p,\n-        HloOpcode::kSqrt, HloOpcode::kTanh,  HloOpcode::kAcosh,\n-        HloOpcode::kExp,  HloOpcode::kExpm1, HloOpcode::kCbrt,\n-        HloOpcode::kErf,  HloOpcode::kLog,   HloOpcode::kTan,\n-        HloOpcode::kCeil, HloOpcode::kRsqrt, HloOpcode::kSin};\n+        HloOpcode::kCos,   HloOpcode::kFloor, HloOpcode::kLog1p,\n+        HloOpcode::kSqrt,  HloOpcode::kTanh,  HloOpcode::kAcos,\n+        HloOpcode::kAcosh, HloOpcode::kExp,   HloOpcode::kExpm1,\n+        HloOpcode::kCbrt,  HloOpcode::kErf,   HloOpcode::kLog,\n+        HloOpcode::kTan,   HloOpcode::kCeil,  HloOpcode::kRsqrt,\n+        HloOpcode::kSin};\n     ret.insert(additional_opcodes.begin(), additional_opcodes.end());\n   }\n "
        },
        {
            "sha": "9b0bb413f91bd134a2f1f78be4869b1793b7dec8",
            "filename": "third_party/xla/xla/backends/gpu/codegen/triton/support_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fsupport_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fsupport_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fsupport_test.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -76,8 +76,6 @@ bool DoesOpSupportType(HloOpcode opcode, PrimitiveType type) {\n     case HloOpcode::kXor:\n     case HloOpcode::kNot:\n       return type == PRED || pu::IsIntegralType(type);\n-    case HloOpcode::kAcosh:\n-      return pu::IsFloatingPointType(type);\n     case HloOpcode::kAtan2:\n     case HloOpcode::kCos:\n     case HloOpcode::kExp:\n@@ -95,6 +93,8 @@ bool DoesOpSupportType(HloOpcode opcode, PrimitiveType type) {\n     case HloOpcode::kCholesky:\n     case HloOpcode::kTriangularSolve:\n       return pu::IsFloatingPointType(type) || pu::IsComplexType(type);\n+    case HloOpcode::kAcos:\n+    case HloOpcode::kAcosh:\n     case HloOpcode::kCbrt:\n     case HloOpcode::kErf:\n     case HloOpcode::kFloor:\n@@ -445,6 +445,7 @@ constexpr std::array kTestedOpsUnaryElementwise = {\n     // clang-format off\n     // go/keep-sorted start\n     HloOpcode::kAbs,\n+    HloOpcode::kAcos,\n     HloOpcode::kAcosh,\n     HloOpcode::kCbrt,\n     HloOpcode::kCeil,"
        },
        {
            "sha": "e32910bf3f772aaa1ffb33541f3e7e576aa41428",
            "filename": "third_party/xla/xla/codegen/emitters/elemental_hlo_to_mlir.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Felemental_hlo_to_mlir.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Felemental_hlo_to_mlir.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Felemental_hlo_to_mlir.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -1023,6 +1023,8 @@ absl::StatusOr<SmallVector<Value, 1>> HloToMlir(\n       return {MapHloOp<mhlo::AbsOp>(\n           PrimitiveTypeToMlirType(element_type, builder), arg_types, operands,\n           /*attributes=*/{}, builder)};\n+    case HloOpcode::kAcos:\n+      return MapElementwiseOp<mhlo::AcosOp>(arg_types, operands, builder);\n     case HloOpcode::kAcosh:\n       return MapElementwiseOp<mhlo::AcoshOp>(arg_types, operands, builder);\n     case HloOpcode::kAdd:"
        },
        {
            "sha": "7384cd4cccabda51ca89aa71be335b55ce976d7c",
            "filename": "third_party/xla/xla/codegen/emitters/tests/loop/acos_f32.hlo",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftests%2Floop%2Facos_f32.hlo",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftests%2Floop%2Facos_f32.hlo",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftests%2Floop%2Facos_f32.hlo?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -0,0 +1,10 @@\n+// RUN: gpu_fusion_to_mlir %s | emitters_opt -xla-test-optimize \\\n+// RUN:   -xla-gpu-test-transform-loops -xla-gpu-test-to-llvm \\\n+// RUN: | FileCheck %s\n+\n+fusion {\n+  p0 = f32[256] parameter(0)\n+  ROOT acos = f32[256] acos(p0)\n+}\n+\n+// CHECK: llvm.call @__nv_acosf(\n\\ No newline at end of file"
        },
        {
            "sha": "2d41d16323c64932428daa2a7d77167ab4939343",
            "filename": "third_party/xla/xla/codegen/emitters/tests/loop/acos_f64.hlo",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftests%2Floop%2Facos_f64.hlo",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftests%2Floop%2Facos_f64.hlo",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftests%2Floop%2Facos_f64.hlo?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -0,0 +1,10 @@\n+// RUN: gpu_fusion_to_mlir %s | emitters_opt -xla-test-optimize \\\n+// RUN:   -xla-gpu-test-transform-loops -xla-gpu-test-to-llvm \\\n+// RUN: | FileCheck %s\n+\n+fusion {\n+  p0 = f64[256] parameter(0)\n+  ROOT acos = f64[256] acos(p0)\n+}\n+\n+// CHECK: llvm.call @__nv_acos(\n\\ No newline at end of file"
        },
        {
            "sha": "066ff8b8ded3085bfd89b318772dc5b9a1d7fd6b",
            "filename": "third_party/xla/xla/hlo/evaluator/hlo_evaluator_typed_visitor.h",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_typed_visitor.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_typed_visitor.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator_typed_visitor.h?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -239,6 +239,19 @@ class HloEvaluatorTypedVisitor : public ConstDfsHloVisitorWithDefault {\n     return HandleAbs<ElementwiseT>(abs);\n   }\n \n+  absl::Status HandleAcos(const HloInstruction* acos) override {\n+    if constexpr (!is_complex_v<ReturnT>) {\n+      TF_ASSIGN_OR_RETURN(\n+          Literal literal,\n+          ElementWiseUnaryOp(acos, [](ElementwiseT elem_operand) {\n+            return std::acos(elem_operand);\n+          }));\n+      parent_->SetEvaluatedLiteralFor(acos, std::move(literal));\n+      return absl::OkStatus();\n+    }\n+    return UnsupportedTypeError(acos);\n+  }\n+\n   absl::Status HandleAcosh(const HloInstruction* acosh) override {\n     if constexpr (!is_complex_v<ReturnT>) {\n       TF_ASSIGN_OR_RETURN("
        },
        {
            "sha": "ecc7916228bc215c3f5891029e4fb1fe20465822",
            "filename": "third_party/xla/xla/hlo/ir/dfs_hlo_visitor.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fdfs_hlo_visitor.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fdfs_hlo_visitor.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fdfs_hlo_visitor.h?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -165,6 +165,9 @@ class DfsHloVisitorBase {\n   virtual absl::Status HandleAbs(HloInstructionPtr hlo) {\n     return HandleElementwiseUnary(hlo);\n   }\n+  virtual absl::Status HandleAcos(HloInstructionPtr hlo) {\n+    return HandleElementwiseUnary(hlo);\n+  }\n   virtual absl::Status HandleAcosh(HloInstructionPtr hlo) {\n     return HandleElementwiseUnary(hlo);\n   }"
        },
        {
            "sha": "70f987811ea77897c4057ba9303f2a6d8f2e3526",
            "filename": "third_party/xla/xla/hlo/ir/hlo_instruction.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 7,
            "changes": 22,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -1303,6 +1303,7 @@ absl::StatusOr<std::unique_ptr<HloInstruction>> HloInstruction::CreateFromProto(\n             output_to_operand_aliasing());\n       }\n       break;\n+      case HloOpcode::kAcos:\n       case HloOpcode::kAcosh:\n       case HloOpcode::kCos:\n       case HloOpcode::kErf:\n@@ -1493,6 +1494,7 @@ HloInstruction::CreateRngBitGenerator(const Shape& shape, HloInstruction* state,\n     case HloOpcode::kReal:\n     case HloOpcode::kSign:\n       return CreateNary(shape, opcode, {operand});\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kCos:\n     case HloOpcode::kErf:\n@@ -2716,6 +2718,7 @@ std::unique_ptr<HloInstruction> HloInstruction::CloneWithNewOperands(\n       break;\n     // Unary ops.\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAllGatherDone:\n     case HloOpcode::kAllReduceDone:\n@@ -3181,6 +3184,7 @@ bool HloInstruction::IdenticalSlowPath(\n     // The result of these instructions only depend upon their opcode and\n     // operands.\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAllGatherDone:\n     case HloOpcode::kAllReduceDone:\n@@ -3809,6 +3813,7 @@ bool HloInstruction::IsOpElementwise(HloOpcode opcode) {\n   switch (opcode) {\n     // Unary elementwise operations.\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kRoundNearestAfz:\n     case HloOpcode::kRoundNearestEven:\n@@ -4505,6 +4510,8 @@ absl::Status HloInstruction::Visit(\n   switch (opcode_) {\n     case HloOpcode::kAbs:\n       return visitor->HandleAbs(this);\n+    case HloOpcode::kAcos:\n+      return visitor->HandleAcos(this);\n     case HloOpcode::kAcosh:\n       return visitor->HandleAcosh(this);\n     case HloOpcode::kAtan2:\n@@ -5210,13 +5217,14 @@ bool IsValidResultAccuracy(const ResultAccuracy& accuracy) {\n }\n \n bool IsUnaryOpWithResultAccuracy(HloOpcode opcode) {\n-  return opcode == HloOpcode::kAcosh || opcode == HloOpcode::kExp ||\n-         opcode == HloOpcode::kExpm1 || opcode == HloOpcode::kLog ||\n-         opcode == HloOpcode::kLog1p || opcode == HloOpcode::kRsqrt ||\n-         opcode == HloOpcode::kSqrt || opcode == HloOpcode::kCbrt ||\n-         opcode == HloOpcode::kTanh || opcode == HloOpcode::kCos ||\n-         opcode == HloOpcode::kSin || opcode == HloOpcode::kTan ||\n-         opcode == HloOpcode::kErf || opcode == HloOpcode::kLogistic;\n+  return opcode == HloOpcode::kAcos || opcode == HloOpcode::kAcosh ||\n+         opcode == HloOpcode::kExp || opcode == HloOpcode::kExpm1 ||\n+         opcode == HloOpcode::kLog || opcode == HloOpcode::kLog1p ||\n+         opcode == HloOpcode::kRsqrt || opcode == HloOpcode::kSqrt ||\n+         opcode == HloOpcode::kCbrt || opcode == HloOpcode::kTanh ||\n+         opcode == HloOpcode::kCos || opcode == HloOpcode::kSin ||\n+         opcode == HloOpcode::kTan || opcode == HloOpcode::kErf ||\n+         opcode == HloOpcode::kLogistic;\n }\n \n std::string AlgorithmToString(const PrecisionConfig::Algorithm& algorithm) {"
        },
        {
            "sha": "11eb5c98c8520ba754ac9e272daa6bed15bb552b",
            "filename": "third_party/xla/xla/hlo/ir/hlo_opcode.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_opcode.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_opcode.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_opcode.h?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -48,6 +48,7 @@ namespace xla {\n #define HLO_OPCODE_LIST(V)                                                     \\\n   /* go/keep-sorted start */                                                   \\\n   V(kAbs, \"abs\", 1)                                                            \\\n+  V(kAcos, \"acos\", 1)                                                          \\\n   V(kAcosh, \"acosh\", 1)                                                        \\\n   V(kAdd, \"add\", 2)                                                            \\\n   V(kAddDependency, \"add-dependency\", 2)                                       \\"
        },
        {
            "sha": "1779e9d163740b50f2ca0141e0739d03336586d7",
            "filename": "third_party/xla/xla/hlo/parser/hlo_parser.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2Fhlo_parser.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2Fhlo_parser.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fparser%2Fhlo_parser.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -118,6 +118,7 @@ HloSchedule ScheduleFromInstructionOrder(HloModule* module) {\n bool CanInferShape(HloOpcode code) {\n   switch (code) {\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAdd:\n     case HloOpcode::kAddDependency:\n@@ -1643,6 +1644,7 @@ HloInstruction* HloParserImpl::CreateInstruction(  // NOLINT\n           *shape, operands[0], *k, (largest.has_value() ? *largest : true)));\n     }\n     // Unary ops with result accuracy.\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kExpm1:\n     case HloOpcode::kLog:"
        },
        {
            "sha": "f44ef4a05ab0895576741917a0b672413c121bf5",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/hlo_diff_summary_test.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_diff_summary_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_diff_summary_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_diff_summary_test.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -133,7 +133,7 @@ TEST_F(HloDiffTest, FindMainMatchedComputationWorks) {\n                          Pointee(Property(&HloComputation::name, \"entry\")),\n                          /*max_matched_instruction_count=*/7,\n                          /*split_allegiance_instruction=*/0,\n-                         /*diff_fingerprint=*/800110521100387509U,\n+                         /*diff_fingerprint=*/2321129576661481127U,\n                          /*all_unchanged=*/true)),\n           Pair(Pointee(Property(&HloComputation::name, \"fused_computation.1\")),\n                FieldsAre(/*side=*/DiffSide::kLeft,\n@@ -142,7 +142,7 @@ TEST_F(HloDiffTest, FindMainMatchedComputationWorks) {\n                                           \"fused_computation.1\")),\n                          /*max_matched_instruction_count=*/2,\n                          /*split_allegiance_instruction=*/1,\n-                         /*diff_fingerprint=*/17250132652435258535U,\n+                         /*diff_fingerprint=*/9596571638299067604U,\n                          /*all_unchanged=*/true)),\n           Pair(Pointee(Property(&HloComputation::name, \"fused_computation.2\")),\n                FieldsAre(/*side=*/DiffSide::kLeft,\n@@ -151,7 +151,7 @@ TEST_F(HloDiffTest, FindMainMatchedComputationWorks) {\n                                           \"fused_computation.2\")),\n                          /*max_matched_instruction_count=*/2,\n                          /*split_allegiance_instruction=*/1,\n-                         /*diff_fingerprint=*/17250132652435258535U,\n+                         /*diff_fingerprint=*/9596571638299067604U,\n                          /*all_unchanged=*/true))));\n   EXPECT_THAT(\n       right_computation_summary,\n@@ -162,7 +162,7 @@ TEST_F(HloDiffTest, FindMainMatchedComputationWorks) {\n                          Pointee(Property(&HloComputation::name, \"entry\")),\n                          /*max_matched_instruction_count=*/7,\n                          /*split_allegiance_instruction=*/0,\n-                         /*diff_fingerprint=*/800110521100387509U,\n+                         /*diff_fingerprint=*/2321129576661481127U,\n                          /*all_unchanged=*/true)),\n           Pair(Pointee(Property(&HloComputation::name, \"fused_computation.1\")),\n                FieldsAre(/*side=*/DiffSide::kRight,\n@@ -171,7 +171,7 @@ TEST_F(HloDiffTest, FindMainMatchedComputationWorks) {\n                                           \"fused_computation.1\")),\n                          /*max_matched_instruction_count=*/2,\n                          /*split_allegiance_instruction=*/1,\n-                         /*diff_fingerprint=*/17250132652435258535U,\n+                         /*diff_fingerprint=*/9596571638299067604U,\n                          /*all_unchanged=*/true)),\n           Pair(Pointee(Property(&HloComputation::name, \"fused_computation.2\")),\n                FieldsAre(/*side=*/DiffSide::kRight,\n@@ -180,7 +180,7 @@ TEST_F(HloDiffTest, FindMainMatchedComputationWorks) {\n                                           \"fused_computation.2\")),\n                          /*max_matched_instruction_count=*/2,\n                          /*split_allegiance_instruction=*/1,\n-                         /*diff_fingerprint=*/17250132652435258535U,\n+                         /*diff_fingerprint=*/9596571638299067604U,\n                          /*all_unchanged=*/true))));\n }\n \n@@ -322,7 +322,7 @@ TEST_F(HloDiffTest, ComputationDiffFingerprintWorks) {\n                             Pointee(Property(&HloComputation::name, \"entry\")),\n                             /*max_matched_instruction_count=*/1,\n                             /*split_allegiance_instruction=*/0,\n-                            /*diff_fingerprint=*/8525366337334465042U,\n+                            /*diff_fingerprint=*/12206837117149029267U,\n                             /*all_unchanged=*/false))));\n   EXPECT_THAT(right_computation_summary,\n               UnorderedElementsAre(Pair(\n@@ -332,11 +332,11 @@ TEST_F(HloDiffTest, ComputationDiffFingerprintWorks) {\n                             Pointee(Property(&HloComputation::name, \"entry\")),\n                             /*max_matched_instruction_count=*/1,\n                             /*split_allegiance_instruction=*/0,\n-                            /*diff_fingerprint=*/8525366337334465042U,\n+                            /*diff_fingerprint=*/12206837117149029267U,\n                             /*all_unchanged=*/false))));\n   EXPECT_THAT(diff_summary->computation_diff_patterns,\n               UnorderedElementsAre(FieldsAre(\n-                  /*fingerprint=*/12418933386714070753U,\n+                  /*fingerprint=*/14409095482904936423U,\n                   /*computation_groups=*/\n                   UnorderedElementsAre(FieldsAre(\n                       /*left_computations=*/UnorderedElementsAre(\n@@ -415,7 +415,7 @@ TEST_F(HloDiffTest, FindConnectedComponentsWorks) {\n       diff_summary->computation_diff_patterns,\n       UnorderedElementsAre(\n           FieldsAre(\n-              /*fingerprint=*/12418933386714070753U,\n+              /*fingerprint=*/14409095482904936423U,\n               /*computation_groups=*/\n               UnorderedElementsAre(\n                   FieldsAre(/*left_computations=*/UnorderedElementsAre(\n@@ -434,7 +434,7 @@ TEST_F(HloDiffTest, FindConnectedComponentsWorks) {\n               FieldsAre(/*changed_instruction_count=*/0,\n                         /*left_unmatched_instruction_count=*/2,\n                         /*right_unmatched_instruction_count=*/2)),\n-          FieldsAre(/*fingerprint=*/6231712785098884993U,\n+          FieldsAre(/*fingerprint=*/7552256280133001U,\n                     /*computation_groups=*/\n                     UnorderedElementsAre(FieldsAre(\n                         /*left_computations=*/UnorderedElementsAre(\n@@ -493,7 +493,7 @@ subtract.0 = f32[] subtract(constant.0, constant.1)\n   EXPECT_THAT(diff_summary->computation_diff_patterns,\n               UnorderedElementsAre(\n                   FieldsAre(\n-                      /*fingerprint=*/17089306970213363760U,\n+                      /*fingerprint=*/17080411049812562536U,\n                       /*computation_groups=*/\n                       UnorderedElementsAre(FieldsAre(\n                           /*left_computations=*/UnorderedElementsAre(Pointee(\n@@ -504,7 +504,7 @@ subtract.0 = f32[] subtract(constant.0, constant.1)\n                                 /*left_unmatched_instruction_count=*/3,\n                                 /*right_unmatched_instruction_count=*/0)),\n                   FieldsAre(\n-                      /*fingerprint=*/1401415824248139631U,\n+                      /*fingerprint=*/13714080814289873259U,\n                       /*computation_groups=*/\n                       UnorderedElementsAre(FieldsAre(\n                           /*left_computations=*/IsEmpty(),\n@@ -663,7 +663,7 @@ TEST_F(HloDiffTest, DiffSummaryToProtoWorks) {\n       proto.computation_diff_patterns(),\n       ElementsAre(AllOf(\n           Property(&ComputationDiffPatternProto::fingerprint,\n-                   12418933386714070753U),\n+                   14409095482904936423U),\n           Property(\n               &ComputationDiffPatternProto::computation_group,\n               ElementsAre(AllOf("
        },
        {
            "sha": "fbba41dae52323c7231e620ce878f276ae7509d9",
            "filename": "third_party/xla/xla/hlo/translate/hlo_to_mhlo/hlo_function_importer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_function_importer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_function_importer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_function_importer.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -2152,6 +2152,7 @@ absl::StatusOr<mlir::Operation*> HloFunctionImporter::ImportInstructionImpl(\n         ->create<mlir::mhlo::mlir_op>(loc, result_type, operands, attributes) \\\n         .getOperation();                                                      \\\n   }\n+      NO_ATTRIBUTE_CASE_MHLO(kAcos, AcosOp);\n       NO_ATTRIBUTE_CASE_MHLO(kAcosh, AcoshOp);\n       NO_ATTRIBUTE_CASE_MHLO(kAddDependency, AddDependencyOp);\n       NO_ATTRIBUTE_CASE_MHLO(kCopy, CopyOp);"
        },
        {
            "sha": "e7023827f743484c71e7ce17b2169aed79d05f42",
            "filename": "third_party/xla/xla/hlo/utils/hlo_matchers.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2Fhlo_matchers.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2Fhlo_matchers.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2Fhlo_matchers.h?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -296,6 +296,7 @@ namespace opcode_matchers {\n         ::xla::HloOpcode::k##opcode, {operands...}));                      \\\n   }\n HLO_MATCHER(Abs);\n+HLO_MATCHER(Acos);\n HLO_MATCHER(Acosh);\n HLO_MATCHER(Add);\n HLO_MATCHER(AddDependency);"
        },
        {
            "sha": "5968d064b4ea246c379aaf59deb1f83b31e321df",
            "filename": "third_party/xla/xla/mlir_hlo/mhlo/IR/hlo_ops.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2FIR%2Fhlo_ops.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2FIR%2Fhlo_ops.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2FIR%2Fhlo_ops.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -356,6 +356,7 @@ LogicalResult ReduceScatterOp::verify() {\n   }\n \n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(AddOp)\n+INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(AcosOp)\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(AcoshOp)\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(AndOp)\n INFER_RETURN_TYPE_COMPONENTS_FROM_OPERANDS(Atan2Op)\n@@ -5116,6 +5117,7 @@ UNARY_FOLDER_INT(NotOp, std::bit_not)\n UNARY_FOLDER_FLOAT(RoundNearestEvenOp, RoundNearestEven)\n UNARY_FOLDER_FLOAT(RoundOp, Round)\n \n+UNARY_FOLDER_UPCAST_TO_F64(AcosOp, std::acos, AnyValue)\n UNARY_FOLDER_UPCAST_TO_F64(AcoshOp, std::acosh, AnyValue)\n UNARY_FOLDER_UPCAST_TO_F64(CosineOp, std::cos, AnyValue)\n UNARY_FOLDER_UPCAST_TO_F64(ErfOp, std::erf, AnyValue)"
        },
        {
            "sha": "f671ca16a10b6c52bad1f6272fe5af787c84b28c",
            "filename": "third_party/xla/xla/mlir_hlo/mhlo/IR/hlo_ops.td",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2FIR%2Fhlo_ops.td",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2FIR%2Fhlo_ops.td",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2FIR%2Fhlo_ops.td?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -218,6 +218,22 @@ def MHLO_AbsOp: MHLO_UnaryElementwiseOp<\"abs\",\n   let hasFolder = 1;\n }\n \n+def MHLO_AcosOp : MHLO_UnaryElementwiseOp<\"acos\",\n+    [HLO_CompatibleOperandsAndResultType], HLO_AnyFpOrComplexTensor> {\n+  let summary = \"Acos operation\";\n+\n+  let description = [{\n+     Performs element-wise acos operation on `operand` tensor and produces a\n+    `result` tensor.\n+\n+    Example:\n+    ```mlir\n+    %result = mhlo.acos %operand : tensor<2x2xf32>\n+    ```\n+  }];\n+  let hasFolder = 1;\n+}\n+\n def MHLO_AcoshOp : MHLO_UnaryElementwiseOp<\"acosh\",\n     [HLO_CompatibleOperandsAndResultType], HLO_AnyFpOrComplexTensor> {\n   let summary = \"Acosh operation\";"
        },
        {
            "sha": "73f7ae01db75f6d896ea3e7c0685ebb4a14611a8",
            "filename": "third_party/xla/xla/mlir_hlo/mhlo/transforms/legalize_to_linalg/legalize_to_linalg.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Flegalize_to_linalg%2Flegalize_to_linalg.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Flegalize_to_linalg%2Flegalize_to_linalg.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Flegalize_to_linalg%2Flegalize_to_linalg.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -4524,6 +4524,7 @@ void populateHloToLinalgConversionPattern(MLIRContext* context,\n       IotaToMapConverter<mhlo::DynamicIotaOp>,\n       MapOpToMapConverter,\n       PointwiseToLinalgMapConverter<mhlo::AbsOp>,\n+      PointwiseToLinalgMapConverter<mhlo::AcosOp>,\n       PointwiseToLinalgMapConverter<mhlo::AcoshOp>,\n       PointwiseToLinalgMapConverter<mhlo::AddOp>,\n       PointwiseToLinalgMapConverter<mhlo::AndOp>,\n@@ -4585,6 +4586,7 @@ void populateHloToLinalgConversionPattern(MLIRContext* context,\n       HloDynamicBroadcastInDimConverter,\n       MapOpToGenericConverter,\n       PointwiseToLinalgConverter<mhlo::AbsOp>,\n+      PointwiseToLinalgConverter<mhlo::AcosOp>,\n       PointwiseToLinalgConverter<mhlo::AcoshOp>,\n       PointwiseToLinalgConverter<mhlo::AddOp>,\n       PointwiseToLinalgConverter<mhlo::AndOp>,"
        },
        {
            "sha": "283caaf9f1e3490893fffb6a233e2cf3b06f01db",
            "filename": "third_party/xla/xla/mlir_hlo/mhlo/transforms/map_mhlo_to_scalar_op.h",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Fmap_mhlo_to_scalar_op.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Fmap_mhlo_to_scalar_op.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Fmap_mhlo_to_scalar_op.h?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -47,6 +47,11 @@ struct MhloToScalarOp {\n   using COp = void;\n };\n \n+template <>\n+struct MhloToScalarOp<mhlo::AcosOp> {\n+  using FOp = ::mlir::math::AcosOp;\n+};\n+\n template <>\n struct MhloToScalarOp<mhlo::AcoshOp> {\n   using FOp = ::mlir::math::AcoshOp;"
        },
        {
            "sha": "e40401b1d2ed10eb4065c2ad951fc5d394478ecd",
            "filename": "third_party/xla/xla/service/cpu/elemental_ir_emitter.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Felemental_ir_emitter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Felemental_ir_emitter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Felemental_ir_emitter.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -55,6 +55,11 @@ absl::StatusOr<llvm::Value*> CpuElementalIrEmitter::EmitTanh(\n   return xla::cpu::EmitTanh(module(), *b(), prim_type, value);\n }\n \n+absl::StatusOr<llvm::Value*> CpuElementalIrEmitter::EmitAcos(\n+    PrimitiveType prim_type, llvm::Value* value) {\n+  return Unimplemented(\"acos\");\n+}\n+\n absl::StatusOr<llvm::Value*> CpuElementalIrEmitter::EmitAcosh(\n     PrimitiveType prim_type, llvm::Value* value) {\n   return Unimplemented(\"acosh\");"
        },
        {
            "sha": "8a88e5d33123b70926d46c995daa3f16efc1045b",
            "filename": "third_party/xla/xla/service/cpu/elemental_ir_emitter.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Felemental_ir_emitter.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Felemental_ir_emitter.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Felemental_ir_emitter.h?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -55,6 +55,9 @@ class CpuElementalIrEmitter final : public ElementalIrEmitter {\n   absl::StatusOr<llvm::Value*> EmitTanh(PrimitiveType prim_type,\n                                         llvm::Value* value) override;\n \n+  absl::StatusOr<llvm::Value*> EmitAcos(PrimitiveType prim_type,\n+                                        llvm::Value* value) override;\n+\n   absl::StatusOr<llvm::Value*> EmitAcosh(PrimitiveType prim_type,\n                                          llvm::Value* value) override;\n "
        },
        {
            "sha": "3973d34d4c09cbc9951f3b71fc4a2e98c8578195",
            "filename": "third_party/xla/xla/service/cpu/thunk_emitter.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fthunk_emitter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fthunk_emitter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fthunk_emitter.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -407,6 +407,7 @@ absl::StatusOr<ThunkSequence> ThunkEmitter::EmitHloInstruction(\n     // Simple HLO instructions lowered to elemental host kernels (plain loops\n     // behind the HostKernel API).\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAdd:\n     case HloOpcode::kAnd:"
        },
        {
            "sha": "b702acf73dd13da533dddd0343fa9155ddc81f4b",
            "filename": "third_party/xla/xla/service/elemental_ir_emitter.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Felemental_ir_emitter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Felemental_ir_emitter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Felemental_ir_emitter.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -878,6 +878,8 @@ absl::StatusOr<llvm::Value*> ElementalIrEmitter::EmitIntegerUnaryOp(\n absl::StatusOr<llvm::Value*> ElementalIrEmitter::EmitFloatUnaryOp(\n     const HloInstruction* op, llvm::Value* operand_value) {\n   switch (op->opcode()) {\n+    case HloOpcode::kAcos:\n+      return EmitAcos(op->shape().element_type(), operand_value);\n     case HloOpcode::kAcosh:\n       return EmitAcosh(op->shape().element_type(), operand_value);\n     case HloOpcode::kConvert: {\n@@ -2371,6 +2373,11 @@ absl::StatusOr<llvm::Value*> ElementalIrEmitter::EmitTanh(\n   return Unimplemented(\"tanh\");\n }\n \n+absl::StatusOr<llvm::Value*> ElementalIrEmitter::EmitAcos(\n+    PrimitiveType prim_type, llvm::Value* value) {\n+  return Unimplemented(\"acos\");\n+}\n+\n absl::StatusOr<llvm::Value*> ElementalIrEmitter::EmitAcosh(\n     PrimitiveType prim_type, llvm::Value* value) {\n   return Unimplemented(\"acosh\");\n@@ -3326,6 +3333,7 @@ llvm_ir::ElementGenerator ElementalIrEmitter::MakeElementGenerator(\n     const ElementalIrEmitter::HloToElementGeneratorMap& operand_to_generator) {\n   switch (hlo->opcode()) {\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kRoundNearestAfz:\n     case HloOpcode::kRoundNearestEven:"
        },
        {
            "sha": "7d59c59b14b6f3deb5c613eb91e65e36b2739e4b",
            "filename": "third_party/xla/xla/service/elemental_ir_emitter.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Felemental_ir_emitter.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Felemental_ir_emitter.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Felemental_ir_emitter.h?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -143,6 +143,9 @@ class ElementalIrEmitter : public IrBuilderMixin<ElementalIrEmitter> {\n   llvm::Value* EmitIntegralMin(llvm::Value* lhs_value, llvm::Value* rhs_value,\n                                bool is_signed);\n \n+  virtual absl::StatusOr<llvm::Value*> EmitAcos(PrimitiveType prim_type,\n+                                                llvm::Value* value);\n+\n   virtual absl::StatusOr<llvm::Value*> EmitAcosh(PrimitiveType prim_type,\n                                                  llvm::Value* value);\n "
        },
        {
            "sha": "0bcd7b4420e4b0c9ea52018e153952042b7357f4",
            "filename": "third_party/xla/xla/service/gpu/hlo_fusion_stats.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fhlo_fusion_stats.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fhlo_fusion_stats.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fhlo_fusion_stats.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -45,6 +45,7 @@ class OpcodeCollector : public ConstDfsHloVisitorWithDefault {\n         break;\n       // Unary\n       case HloOpcode::kAbs:\n+      case HloOpcode::kAcos:\n       case HloOpcode::kAcosh:\n       case HloOpcode::kCbrt:\n       case HloOpcode::kCeil:"
        },
        {
            "sha": "b1311829700e290c399c8d433358b5e1ca14b571",
            "filename": "third_party/xla/xla/service/gpu/target_util.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftarget_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftarget_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftarget_util.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -235,12 +235,15 @@ struct TargetDeviceFunction {\n struct TargetDeviceFunction GetDeviceFunctionRoot(\n     TargetDeviceFunctionID func_id) {\n   switch (func_id) {\n-    case TargetDeviceFunctionID::kAtan2: {\n-      return {\"__nv_atan2\", \"__ocml_atan2\", \"_Z17__spirv_ocl_atan2\"};\n+    case TargetDeviceFunctionID::kAcos: {\n+      return {\"__nv_acos\", \"__ocml_acos\", \"_Z16__spirv_ocl_acos\"};\n     }\n     case TargetDeviceFunctionID::kAcosh: {\n       return {\"__nv_acosh\", \"__ocml_acosh\", \"_Z15__spirv_ocl_acosh\"};\n     }\n+    case TargetDeviceFunctionID::kAtan2: {\n+      return {\"__nv_atan2\", \"__ocml_atan2\", \"_Z17__spirv_ocl_atan2\"};\n+    }\n     case TargetDeviceFunctionID::kCos: {\n       return {\"__nv_cos\", \"__ocml_cos\", \"_Z15__spirv_ocl_cos\"};\n     }\n@@ -292,6 +295,8 @@ struct TargetDeviceFunction GetDeviceFunctionRoot(\n \n std::optional<TargetDeviceFunctionID> GetTargetDeviceFunctionID(HloOpcode op) {\n   switch (op) {\n+    case HloOpcode::kAcos:\n+      return TargetDeviceFunctionID::kAcos;\n     case HloOpcode::kAcosh:\n       return TargetDeviceFunctionID::kAcosh;\n     case HloOpcode::kAtan2:"
        },
        {
            "sha": "932ea49aa7f57b07dbd987687c6e54e0fac0e4bb",
            "filename": "third_party/xla/xla/service/gpu/target_util.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftarget_util.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftarget_util.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftarget_util.h?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -69,6 +69,7 @@ enum class TargetDeviceFunctionID {\n   kTanh,\n   kErf,\n   kAcosh,\n+  kAcos,\n };\n \n // HLO opcode -> TargetDeviceFunctionID mapping. Returns std::nullopt if there"
        },
        {
            "sha": "32add23ad3d975429396e385df6f340cb1be2515",
            "filename": "third_party/xla/xla/service/gpu/transforms/fusion_wrapper.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Ffusion_wrapper.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Ffusion_wrapper.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Ffusion_wrapper.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -24,6 +24,7 @@ namespace gpu {\n bool FusionWrapper::MustWrapInstruction(HloOpcode opcode) {\n   switch (opcode) {\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAdd:\n     case HloOpcode::kAnd:"
        },
        {
            "sha": "87e0918078d13bc07ce1b33859388fd96d5fbfb8",
            "filename": "third_party/xla/xla/service/hlo_cost_analysis.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_cost_analysis.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_cost_analysis.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_cost_analysis.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -144,14 +144,15 @@ absl::Status HloCostAnalysis::HandleElementwiseOp(\n   // operation can correspond to several floating point ops.\n   // kLogistic is included in \"trascendental\" as it is implemented using\n   // trascendental ops (tanh or exp).\n-  if (opcode == HloOpcode::kAcosh || opcode == HloOpcode::kErf ||\n-      opcode == HloOpcode::kExp || opcode == HloOpcode::kLog ||\n-      opcode == HloOpcode::kLogistic || opcode == HloOpcode::kPower ||\n-      opcode == HloOpcode::kSqrt || opcode == HloOpcode::kCbrt ||\n-      opcode == HloOpcode::kRsqrt || opcode == HloOpcode::kTanh ||\n-      opcode == HloOpcode::kSin || opcode == HloOpcode::kCos ||\n-      opcode == HloOpcode::kExpm1 || opcode == HloOpcode::kLog1p ||\n-      opcode == HloOpcode::kAtan2 || opcode == HloOpcode::kTan) {\n+  if (opcode == HloOpcode::kAcos || opcode == HloOpcode::kAcosh ||\n+      opcode == HloOpcode::kErf || opcode == HloOpcode::kExp ||\n+      opcode == HloOpcode::kLog || opcode == HloOpcode::kLogistic ||\n+      opcode == HloOpcode::kPower || opcode == HloOpcode::kSqrt ||\n+      opcode == HloOpcode::kCbrt || opcode == HloOpcode::kRsqrt ||\n+      opcode == HloOpcode::kTanh || opcode == HloOpcode::kSin ||\n+      opcode == HloOpcode::kCos || opcode == HloOpcode::kExpm1 ||\n+      opcode == HloOpcode::kLog1p || opcode == HloOpcode::kAtan2 ||\n+      opcode == HloOpcode::kTan) {\n     current_properties_[kTranscendentalsKey] = computation_count;\n   } else {\n     // Note: transcendental operations are considered a separate category from"
        },
        {
            "sha": "b9bfd18069a43d55f708969721c9733018c9775a",
            "filename": "third_party/xla/xla/service/hlo_graph_dumper.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_graph_dumper.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_graph_dumper.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_graph_dumper.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -1140,6 +1140,7 @@ ColorScheme HloDotDumper::GetInstructionColor(const HloInstruction* instr) {\n   // (eg, parameter).\n   switch (instr->opcode()) {\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAdd:\n     case HloOpcode::kAnd:"
        },
        {
            "sha": "796caf7b03dfc4f10259a7ee18a02dc8e111cf6c",
            "filename": "third_party/xla/xla/service/instruction_fusion.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Finstruction_fusion.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Finstruction_fusion.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Finstruction_fusion.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -173,6 +173,7 @@ bool IsAlwaysDuplicable(const HloInstruction& instruction) {\n \n     // Expensive instructions or unusual instructions for which fusion is\n     // nonsensical.\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAddDependency:\n     case HloOpcode::kAfterAll:"
        },
        {
            "sha": "c6905f9a7b4e3e962f99af8af306d619436e1e1e",
            "filename": "third_party/xla/xla/service/layout_assignment.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Flayout_assignment.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Flayout_assignment.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Flayout_assignment.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -2838,6 +2838,7 @@ bool LayoutAssignment::InstructionCanChangeLayout(\n     const HloInstruction* instruction) {\n   switch (instruction->opcode()) {\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAdd:\n     case HloOpcode::kAddDependency:"
        },
        {
            "sha": "f06846d2f0bd2ab5c5dcf299406d723dda013281",
            "filename": "third_party/xla/xla/service/shape_inference.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fshape_inference.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fshape_inference.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fshape_inference.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -347,6 +347,7 @@ absl::StatusOr<DimAndBound> InferMostSpecificDimAndBound(int64_t dim,\n \n   TF_DCHECK_OK(ShapeUtil::ValidateShapeWithOptionalLayout(shape));\n   switch (opcode) {\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kFloor:\n     case HloOpcode::kCbrt:  // Complex cbrt is not implemented in either of the"
        },
        {
            "sha": "89de0c90bb6c42313e11595987266d0b6a50e1ed",
            "filename": "third_party/xla/xla/service/shape_inference_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fshape_inference_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fshape_inference_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fshape_inference_test.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -6014,6 +6014,7 @@ INSTANTIATE_TEST_SUITE_P(\n INSTANTIATE_TEST_SUITE_P(UnboundedDynamism, UnboundedUnaryOpShapeInferenceTest,\n                          ::testing::ValuesIn<UnaryOpTestCase>(\n                              {{\"f32[?]\", \"f32[?]\", HloOpcode::kAbs},\n+                              {\"f32[?]\", \"f32[?]\", HloOpcode::kAcos},\n                               {\"f32[?]\", \"f32[?]\", HloOpcode::kAcosh},\n                               {\"f32[?]\", \"f32[?]\", HloOpcode::kCbrt},\n                               {\"f32[?]\", \"f32[?]\", HloOpcode::kCeil},"
        },
        {
            "sha": "ef6c41f13c1d067d7aaf48b8ad474d57bcfe4908",
            "filename": "third_party/xla/xla/service/sharding_propagation.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fsharding_propagation.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Fservice%2Fsharding_propagation.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fsharding_propagation.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -215,6 +215,7 @@ const HloInstruction* PickRepresentativeOperand(\n       }\n       return nullptr;\n     case HloOpcode::kAbs:\n+    case HloOpcode::kAcos:\n     case HloOpcode::kAcosh:\n     case HloOpcode::kAdd:\n     case HloOpcode::kAnd:"
        },
        {
            "sha": "4f93eac8af41fca0fc67f6e60d24fae831f2acbe",
            "filename": "third_party/xla/xla/tests/int4_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Ftests%2Fint4_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9433707e83d9fda14dbb613b0c144cf82a6d677a/third_party%2Fxla%2Fxla%2Ftests%2Fint4_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fint4_test.cc?ref=9433707e83d9fda14dbb613b0c144cf82a6d677a",
            "patch": "@@ -337,6 +337,7 @@ class ElementwiseTest : public HloTestBase,\n  private:\n   static bool IsFloatingPointOnly(HloOpcode opcode) {\n     switch (opcode) {\n+      case HloOpcode::kAcos:\n       case HloOpcode::kAcosh:\n       case HloOpcode::kAtan2:\n       case HloOpcode::kCbrt:"
        }
    ],
    "stats": {
        "total": 194,
        "additions": 154,
        "deletions": 40
    }
}