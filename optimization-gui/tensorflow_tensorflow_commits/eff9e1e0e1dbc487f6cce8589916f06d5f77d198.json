{
    "author": "tensorflower-gardener",
    "message": "[SymbolicExpr] Introduce SymbolicMap struct\n\nPiperOrigin-RevId: 799090301",
    "sha": "eff9e1e0e1dbc487f6cce8589916f06d5f77d198",
    "files": [
        {
            "sha": "4c2b2b15fe64a441bb0ec38066f7f9cdcb2ccca5",
            "filename": "third_party/xla/xla/service/gpu/model/experimental/BUILD",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/eff9e1e0e1dbc487f6cce8589916f06d5f77d198/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/eff9e1e0e1dbc487f6cce8589916f06d5f77d198/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2FBUILD?ref=eff9e1e0e1dbc487f6cce8589916f06d5f77d198",
            "patch": "@@ -209,6 +209,15 @@ xla_cc_test(\n     ],\n )\n \n+cc_library(\n+    name = \"symbolic_map\",\n+    srcs = [\"symbolic_map.cc\"],\n+    hdrs = [\"symbolic_map.h\"],\n+    deps = [\n+        \":symbolic_expr\",\n+    ],\n+)\n+\n cc_library(\n     name = \"symbolic_expr\",\n     srcs = [\"symbolic_expr.cc\"],"
        },
        {
            "sha": "74bc587c808f365c07b0ba227b70d1b818f5b2b9",
            "filename": "third_party/xla/xla/service/gpu/model/experimental/symbolic_expr.h",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/eff9e1e0e1dbc487f6cce8589916f06d5f77d198/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_expr.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/eff9e1e0e1dbc487f6cce8589916f06d5f77d198/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_expr.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_expr.h?ref=eff9e1e0e1dbc487f6cce8589916f06d5f77d198",
            "patch": "@@ -103,14 +103,6 @@ inline ::llvm::hash_code hash_value(SymbolicExpr expr) {\n   return ::llvm::hash_value(expr.GetImpl());\n }\n \n-// Maps a set of input variables to a set of output SymbolicExpr trees.\n-struct SymbolicMap {\n-  int64_t num_dimensions;\n-  int64_t num_ranges;\n-  int64_t num_symbols;\n-  std::vector<SymbolicExpr> exprs;\n-};\n-\n class SymbolicExprContext {\n  public:\n   SymbolicExprContext();"
        },
        {
            "sha": "3e280e850e24001024f009378ee82333c0762c3e",
            "filename": "third_party/xla/xla/service/gpu/model/experimental/symbolic_map.cc",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/eff9e1e0e1dbc487f6cce8589916f06d5f77d198/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_map.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/eff9e1e0e1dbc487f6cce8589916f06d5f77d198/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_map.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_map.cc?ref=eff9e1e0e1dbc487f6cce8589916f06d5f77d198",
            "patch": "@@ -0,0 +1,34 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#include \"xla/service/gpu/model/experimental/symbolic_map.h\"\n+\n+#include <cstdint>\n+#include <utility>\n+#include <vector>\n+\n+#include \"xla/service/gpu/model/experimental/symbolic_expr.h\"\n+\n+namespace xla {\n+namespace gpu {\n+\n+SymbolicMap::SymbolicMap(int64_t num_dimensions, int64_t num_symbols,\n+                         std::vector<SymbolicExpr> exprs)\n+    : num_dimensions_(num_dimensions),\n+      num_symbols_(num_symbols),\n+      exprs_(std::move(exprs)) {}\n+\n+}  // namespace gpu\n+}  // namespace xla"
        },
        {
            "sha": "96b1ae49e4335f6dd74dfe7828fa20d083fd2516",
            "filename": "third_party/xla/xla/service/gpu/model/experimental/symbolic_map.h",
            "status": "added",
            "additions": 48,
            "deletions": 0,
            "changes": 48,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/eff9e1e0e1dbc487f6cce8589916f06d5f77d198/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_map.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/eff9e1e0e1dbc487f6cce8589916f06d5f77d198/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_map.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fexperimental%2Fsymbolic_map.h?ref=eff9e1e0e1dbc487f6cce8589916f06d5f77d198",
            "patch": "@@ -0,0 +1,48 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#ifndef XLA_SERVICE_GPU_MODEL_EXPERIMENTAL_SYMBOLIC_MAP_H_\n+#define XLA_SERVICE_GPU_MODEL_EXPERIMENTAL_SYMBOLIC_MAP_H_\n+\n+#include <cstdint>\n+#include <vector>\n+\n+#include \"xla/service/gpu/model/experimental/symbolic_expr.h\"\n+\n+namespace xla {\n+namespace gpu {\n+\n+// Maps a set of input variables to a set of output SymbolicExpr trees.\n+class SymbolicMap {\n+ public:\n+  SymbolicMap(int64_t num_dimensions, int64_t num_symbols,\n+              std::vector<SymbolicExpr> exprs);\n+\n+  int64_t GetNumDims() const { return num_dimensions_; }\n+  int64_t GetNumSymbols() const { return num_symbols_; }\n+  int64_t GetNumResults() const { return exprs_.size(); }\n+  const std::vector<SymbolicExpr>& GetResults() const { return exprs_; }\n+  SymbolicExpr GetResult(unsigned idx) const { return exprs_[idx]; }\n+\n+ private:\n+  int64_t num_dimensions_;\n+  int64_t num_symbols_;\n+  std::vector<SymbolicExpr> exprs_;\n+};\n+\n+}  // namespace gpu\n+}  // namespace xla\n+\n+#endif  // XLA_SERVICE_GPU_MODEL_EXPERIMENTAL_SYMBOLIC_MAP_H_"
        }
    ],
    "stats": {
        "total": 99,
        "additions": 91,
        "deletions": 8
    }
}