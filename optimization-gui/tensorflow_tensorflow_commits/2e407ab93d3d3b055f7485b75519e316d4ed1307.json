{
    "author": "WillFroom",
    "message": "[XLA:CPU] Rewrite polynomial approximations of vectorized llvm.exp.\n\nThese are getting through to the optimized llvm when using the tiled emitter.\n\nPiperOrigin-RevId: 832204569",
    "sha": "2e407ab93d3d3b055f7485b75519e316d4ed1307",
    "files": [
        {
            "sha": "232bfe0488ba265281d82a9a739121d79717dbee",
            "filename": "third_party/xla/xla/backends/cpu/codegen/polynomial_approximations.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2e407ab93d3d3b055f7485b75519e316d4ed1307/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fpolynomial_approximations.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2e407ab93d3d3b055f7485b75519e316d4ed1307/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fpolynomial_approximations.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fpolynomial_approximations.cc?ref=2e407ab93d3d3b055f7485b75519e316d4ed1307",
            "patch": "@@ -522,8 +522,11 @@ void RewriteToPolynomialApproximations(llvm::Module* module,\n   rewrite_calls(\"expf\", GenerateVF32Exp, /*vector_width=*/1);\n   rewrite_calls(\"llvm.exp.f32\", GenerateVF32Exp, /*vector_width=*/1);\n   rewrite_calls(kExpV4F32Sym, GenerateVF32Exp, /*vector_width=*/4);\n+  rewrite_calls(\"llvm.exp.v4f32\", GenerateVF32Exp, /*vector_width=*/4);\n   rewrite_calls(kExpV8F32Sym, GenerateVF32Exp, /*vector_width=*/8);\n+  rewrite_calls(\"llvm.exp.v8f32\", GenerateVF32Exp, /*vector_width=*/8);\n   rewrite_calls(kExpV16F32Sym, GenerateVF32Exp, /*vector_width=*/16);\n+  rewrite_calls(\"llvm.exp.v16f32\", GenerateVF32Exp, /*vector_width=*/16);\n \n   rewrite_calls(\"llvm.exp.f16\", UpcastF16ToF32<GenerateVF32Exp>,\n                 /*vector_width=*/1);"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 3,
        "deletions": 0
    }
}