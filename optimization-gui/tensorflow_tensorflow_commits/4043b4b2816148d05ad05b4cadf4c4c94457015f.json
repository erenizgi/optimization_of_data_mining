{
    "author": "tensorflower-gardener",
    "message": "IFRT proxy, nit: Remove `array_is_deleted_hack` flag.\n\nPiperOrigin-RevId: 844951374",
    "sha": "4043b4b2816148d05ad05b4cadf4c4c94457015f",
    "files": [
        {
            "sha": "38ae216b88023742f11025c2e070e082e2399c92",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/array.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4043b4b2816148d05ad05b4cadf4c4c94457015f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Farray.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4043b4b2816148d05ad05b4cadf4c4c94457015f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Farray.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Farray.cc?ref=4043b4b2816148d05ad05b4cadf4c4c94457015f",
            "patch": "@@ -497,9 +497,6 @@ bool Array::IsDeleted() const {\n       return false;\n     }\n   }\n-  if (GetGlobalClientFlags()->array_is_deleted_hack) {\n-    return false;\n-  }\n   auto req = std::make_unique<IsArrayDeletedRequest>();\n   req->set_array_handle(handle_.handle);\n "
        },
        {
            "sha": "505cac0be580b619806a6a4116bd71c6402eba27",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/global_flags.h",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4043b4b2816148d05ad05b4cadf4c4c94457015f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fglobal_flags.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4043b4b2816148d05ad05b4cadf4c4c94457015f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fglobal_flags.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fglobal_flags.h?ref=4043b4b2816148d05ad05b4cadf4c4c94457015f",
            "patch": "@@ -35,9 +35,6 @@ struct GlobalClientFlags {\n   // codepath works well.\n   bool synchronous_host_buffer_store;\n \n-  // TODO(b/393445969): Implement faster is_delete without needing a hack.\n-  bool array_is_deleted_hack;\n-\n   // Zero or negative values are interpreted as no maximum.\n   int grpc_max_ongoing_host_buffer_stores;\n   int grpc_max_ongoing_host_buffer_lookups;\n@@ -51,7 +48,6 @@ inline std::ostream& operator<<(std::ostream& os, GlobalClientFlags flags) {\n   return os << \"xla::ifrt::proxy::GlobalClientFlags{\"\n             << \"synchronous_host_buffer_store=\"\n             << flags.synchronous_host_buffer_store << \",\"\n-            << \"array_is_deleted_hack=\" << flags.array_is_deleted_hack << \",\"\n             << \"grpc_max_ongoing_host_buffer_stores=\"\n             << flags.grpc_max_ongoing_host_buffer_stores << \",\"\n             << \"grpc_max_ongoing_host_buffer_lookups=\""
        },
        {
            "sha": "3387a3f5a78b774e080f56dae0283d52f06c022e",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/global_flags_oss.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4043b4b2816148d05ad05b4cadf4c4c94457015f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fglobal_flags_oss.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4043b4b2816148d05ad05b4cadf4c4c94457015f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fglobal_flags_oss.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fglobal_flags_oss.cc?ref=4043b4b2816148d05ad05b4cadf4c4c94457015f",
            "patch": "@@ -55,8 +55,6 @@ IntType GetIntFromEnv(const char* key, IntType default_value) {\n static GlobalClientFlags DefaultGlobalClientFlags() {\n   GlobalClientFlags result;\n   result.synchronous_host_buffer_store = false;\n-  result.array_is_deleted_hack =\n-      GetBoolFromEnv(\"IFRT_PROXY_ARRAY_IS_DELETED_HACK\", false);\n   result.grpc_max_ongoing_host_buffer_stores =\n       GetIntFromEnv<int>(\"IFRT_PROXY_GRPC_MAX_ONGOING_HOST_BUFFER_STORES\", 0);\n   result.grpc_max_ongoing_host_buffer_lookups ="
        }
    ],
    "stats": {
        "total": 9,
        "additions": 0,
        "deletions": 9
    }
}