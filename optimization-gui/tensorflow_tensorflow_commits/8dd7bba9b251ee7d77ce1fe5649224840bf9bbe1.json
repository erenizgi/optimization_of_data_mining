{
    "author": "ezhulenev",
    "message": "[xla] Construct ready PjRtFuture instead of creating a promise\n\nPiperOrigin-RevId: 805935964",
    "sha": "8dd7bba9b251ee7d77ce1fe5649224840bf9bbe1",
    "files": [
        {
            "sha": "0348d9709415759a57100348709195426d15fd02",
            "filename": "third_party/xla/xla/pjrt/extensions/cross_host_transfers/pjrt_c_api_cross_host_transfers_extension.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8dd7bba9b251ee7d77ce1fe5649224840bf9bbe1/third_party%2Fxla%2Fxla%2Fpjrt%2Fextensions%2Fcross_host_transfers%2Fpjrt_c_api_cross_host_transfers_extension.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8dd7bba9b251ee7d77ce1fe5649224840bf9bbe1/third_party%2Fxla%2Fxla%2Fpjrt%2Fextensions%2Fcross_host_transfers%2Fpjrt_c_api_cross_host_transfers_extension.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fextensions%2Fcross_host_transfers%2Fpjrt_c_api_cross_host_transfers_extension.cc?ref=8dd7bba9b251ee7d77ce1fe5649224840bf9bbe1",
            "patch": "@@ -91,10 +91,9 @@ void PJRT_Transfers_PJRT_Buffer_CopyToRemoteDevice(\n     PJRT_Transfers_PJRT_Buffer_CopyToRemoteDevice_Args* args) {\n   std::string serialized_descriptor = std::string(\n       args->serialized_descriptor, args->serialized_descriptor_size);\n-  xla::PjRtFuture<std::string>::Promise promise =\n-      xla::PjRtFuture<std::string>::CreatePromise();\n-  promise.Set(std::move(serialized_descriptor));\n-  auto descriptor_future = xla::PjRtFuture<std::string>(std::move(promise));\n+  xla::PjRtFuture<std::string> descriptor_future(\n+      std::move(serialized_descriptor));\n+\n   // TODO(emilyaf): Support on_done callback.\n   xla::PjRtBuffer::RemoteSendCallback on_done =\n       [](absl::Status status, bool sends_were_enqueued) { CHECK_OK(status); };"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 3,
        "deletions": 4
    }
}