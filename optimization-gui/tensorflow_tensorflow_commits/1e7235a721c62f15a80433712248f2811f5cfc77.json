{
    "author": "EusebioDM",
    "message": "Clean up `FftThunk` includes and BUILD dependencies\n\nDoing this before touching the files, also adding missing brackets in an if.\n\nPiperOrigin-RevId: 819191695",
    "sha": "1e7235a721c62f15a80433712248f2811f5cfc77",
    "files": [
        {
            "sha": "ba0a518493c4fcb8ba160ad347b9d4a2b23da047",
            "filename": "third_party/xla/xla/backends/gpu/runtime/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e7235a721c62f15a80433712248f2811f5cfc77/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e7235a721c62f15a80433712248f2811f5cfc77/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD?ref=1e7235a721c62f15a80433712248f2811f5cfc77",
            "patch": "@@ -756,17 +756,15 @@ cc_library(\n         \"//xla/stream_executor:fft\",\n         \"//xla/stream_executor:scratch_allocator\",\n         \"//xla/stream_executor:stream_executor_h\",\n+        \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n-        \"@com_google_absl//absl/strings:str_format\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@local_tsl//tsl/platform:logging\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n "
        },
        {
            "sha": "1809a5e246c4400da56592cf5979fc741a1d303c",
            "filename": "third_party/xla/xla/backends/gpu/runtime/fft_thunk.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e7235a721c62f15a80433712248f2811f5cfc77/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Ffft_thunk.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e7235a721c62f15a80433712248f2811f5cfc77/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Ffft_thunk.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Ffft_thunk.cc?ref=1e7235a721c62f15a80433712248f2811f5cfc77",
            "patch": "@@ -23,7 +23,6 @@ limitations under the License.\n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n-#include \"absl/strings/str_format.h\"\n #include \"absl/synchronization/mutex.h\"\n #include \"absl/types/span.h\"\n #include \"xla/backends/gpu/runtime/thunk.h\"\n@@ -37,11 +36,10 @@ limitations under the License.\n #include \"xla/stream_executor/fft.h\"\n #include \"xla/stream_executor/scratch_allocator.h\"\n #include \"xla/stream_executor/stream_executor.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/types.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n-#include \"tsl/platform/logging.h\"\n-#include \"tsl/platform/statusor.h\"\n \n namespace xla {\n namespace gpu {"
        },
        {
            "sha": "25aab41acd58a474ba705cdeda23e680a8cd82a3",
            "filename": "third_party/xla/xla/backends/gpu/runtime/fft_thunk.h",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e7235a721c62f15a80433712248f2811f5cfc77/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Ffft_thunk.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e7235a721c62f15a80433712248f2811f5cfc77/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Ffft_thunk.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Ffft_thunk.h?ref=1e7235a721c62f15a80433712248f2811f5cfc77",
            "patch": "@@ -31,7 +31,6 @@ limitations under the License.\n #include \"xla/stream_executor/device_memory.h\"\n #include \"xla/stream_executor/device_memory_allocator.h\"\n #include \"xla/stream_executor/fft.h\"\n-#include \"xla/stream_executor/stream_executor.h\"\n #include \"xla/xla_data.pb.h\"\n \n namespace xla {\n@@ -47,11 +46,13 @@ struct FftPlan {\n \n class FftPlanCache {\n  public:\n-  // Returnes Fft plan cached for the given device ordinal or creates a new one.\n+  // Returns Fft plan cached for the given device ordinal or creates a new one.\n   FftPlan* GetOrCreate(int device_ordinal) {\n     absl::MutexLock lock(mu_);\n     std::unique_ptr<FftPlan>& plan = fft_plans_[device_ordinal];\n-    if (!plan) plan = std::make_unique<FftPlan>();\n+    if (!plan) {\n+      plan = std::make_unique<FftPlan>();\n+    }\n     return plan.get();\n   }\n "
        }
    ],
    "stats": {
        "total": 15,
        "additions": 6,
        "deletions": 9
    }
}