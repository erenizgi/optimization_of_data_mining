{
    "author": "ezhulenev",
    "message": "[xla] Migrate to se::DeviceMemoryAddress\n\nPiperOrigin-RevId: 842293237",
    "sha": "21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
    "files": [
        {
            "sha": "d6792cd7802d96853c766dc9e2b7c64650456c7c",
            "filename": "tensorflow/compiler/jit/xla_tensor.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/tensorflow%2Fcompiler%2Fjit%2Fxla_tensor.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/tensorflow%2Fcompiler%2Fjit%2Fxla_tensor.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fjit%2Fxla_tensor.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -55,7 +55,7 @@ absl::Status XlaTensor::AllocateShapedBuffer(DataType dtype,\n         xla::ShapeUtil::GetSubshape(on_device_shape, index_to_buffer.first);\n     uint64 size =\n         client->backend().transfer_manager()->GetByteSizeRequirement(subshape);\n-    TF_ASSIGN_OR_RETURN(se::OwningDeviceMemory buffer,\n+    TF_ASSIGN_OR_RETURN(se::ScopedDeviceAddress<uint8_t> buffer,\n                         client->backend().memory_allocator()->Allocate(\n                             device_ordinal, size, /*retry_on_failure=*/false,\n                             subshape.layout().memory_space()));"
        },
        {
            "sha": "77a6ac88f8ff70a18c3af7943ef57f31a69be516",
            "filename": "third_party/xla/xla/backends/gpu/runtime/gpublas_lt_matmul_thunk_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fgpublas_lt_matmul_thunk_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fgpublas_lt_matmul_thunk_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fgpublas_lt_matmul_thunk_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -16,6 +16,7 @@ limitations under the License.\n #include \"xla/backends/gpu/runtime/gpublas_lt_matmul_thunk.h\"\n \n #include <cstddef>\n+#include <cstdint>\n #include <deque>\n #include <memory>\n #include <optional>\n@@ -182,7 +183,7 @@ class GpuBlasLtThunkBuilder {\n   se::StreamExecutorMemoryAllocator allocator_;\n   se::GpuComputeCapability gpu_comp_;\n   std::deque<BufferAllocation> allocs_;\n-  std::vector<se::OwningDeviceMemory> mem_buffers_;\n+  std::vector<se::ScopedDeviceAddress<uint8_t>> mem_buffers_;\n };\n \n void GpuBlasLtMatmulThunkTest::CreateExecuteThunksFromHLO("
        },
        {
            "sha": "fac2d9343ff1d0a6a6088e9c79277b19b9b113dd",
            "filename": "third_party/xla/xla/client/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fclient%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fclient%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fclient%2FBUILD?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -128,7 +128,7 @@ cc_library(\n         \"//xla/service:shaped_buffer\",\n         \"//xla/service:source_map_util\",\n         \"//xla/service:stream_pool\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/stream_executor:stream_executor_h\",\n@@ -181,7 +181,7 @@ cc_library(\n         \"//xla/service:compile_only_service\",\n         \"//xla/service:local_service\",\n         \"//xla/service:platform_util\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:stream_executor_h\",\n         \"//xla/tsl/platform:logging\","
        },
        {
            "sha": "42d0f34202e0929d45204ba59d8db42619bec973",
            "filename": "third_party/xla/xla/client/client_library.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fclient%2Fclient_library.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fclient%2Fclient_library.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fclient%2Fclient_library.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -36,7 +36,7 @@ limitations under the License.\n #include \"xla/client/local_client.h\"\n #include \"xla/service/compile_only_service.h\"\n #include \"xla/service/local_service.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/stream_executor.h\"\n #include \"xla/types.h\""
        },
        {
            "sha": "e1f348a755521d6336aa05073bda494ae6583d3f",
            "filename": "third_party/xla/xla/client/local_client.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fclient%2Flocal_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fclient%2Flocal_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fclient%2Flocal_client.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -45,7 +45,7 @@ limitations under the License.\n #include \"xla/shape.h\"\n #include \"xla/shape_tree.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/stream.h\"\n #include \"xla/tsl/platform/errors.h\"\n@@ -512,7 +512,7 @@ absl::StatusOr<std::unique_ptr<LocalExecutable>> LocalClient::LoadInternal(\n \n absl::StatusOr<ScopedShapedBuffer> LocalClient::LiteralToShapedBuffer(\n     const LiteralSlice& literal, int device_ordinal,\n-    se::DeviceMemoryAllocator* allocator) {\n+    se::DeviceAddressAllocator* allocator) {\n   if (allocator == nullptr) {\n     allocator = backend().memory_allocator();\n   }"
        },
        {
            "sha": "3c237ef37a19735370fef589e2cba707e1e32eb5",
            "filename": "third_party/xla/xla/client/local_client.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fclient%2Flocal_client.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fclient%2Flocal_client.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fclient%2Flocal_client.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -39,7 +39,7 @@ limitations under the License.\n #include \"xla/service/shaped_buffer.h\"\n #include \"xla/service/stream_pool.h\"\n #include \"xla/shape_tree.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/stream_executor.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/statusor.h\"\n@@ -183,7 +183,7 @@ class LocalClient : public Client {\n   // device is used.\n   absl::StatusOr<ScopedShapedBuffer> LiteralToShapedBuffer(\n       const LiteralSlice& literal, int device_ordinal,\n-      se::DeviceMemoryAllocator* allocator = nullptr);\n+      se::DeviceAddressAllocator* allocator = nullptr);\n \n   // Transfer the BorrowingLiteral to the device with the given ordinal.\n   absl::StatusOr<GlobalDataHandle> TransferToLocalServer("
        },
        {
            "sha": "06d3ef7f6c9aedf0a0d43eefcd2b3f5664a0558f",
            "filename": "third_party/xla/xla/core/collectives/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fcore%2Fcollectives%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fcore%2Fcollectives%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcore%2Fcollectives%2FBUILD?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -73,7 +73,7 @@ cc_library(\n         \"//xla:future\",\n         \"//xla:util\",\n         \"//xla:xla_data_proto_cc\",\n-        \"//xla/stream_executor:device_memory\",\n+        \"//xla/stream_executor:device_address\",\n         \"@com_google_absl//absl/container:inlined_vector\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\","
        },
        {
            "sha": "4be35fb52163f7eaf730cc53e7c1d24049fdd89c",
            "filename": "third_party/xla/xla/core/collectives/communicator.h",
            "status": "modified",
            "additions": 20,
            "deletions": 20,
            "changes": 40,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fcore%2Fcollectives%2Fcommunicator.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fcore%2Fcollectives%2Fcommunicator.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcore%2Fcollectives%2Fcommunicator.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -28,7 +28,7 @@ limitations under the License.\n #include \"xla/core/collectives/rank_id.h\"\n #include \"xla/core/collectives/reduction_kind.h\"\n #include \"xla/future.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n+#include \"xla/stream_executor/device_address.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n \n@@ -65,7 +65,7 @@ class Communicator {\n   // Register `buffer_range` once for efficient collective operations (i.e. on\n   // NCCL backend it registers the buffer for zero-copy collective operations).\n   //\n-  virtual absl::Status RegisterBufferOnce(se::DeviceMemoryBase buffer_range,\n+  virtual absl::Status RegisterBufferOnce(se::DeviceAddressBase buffer_range,\n                                           int device_ordinal,\n                                           bool use_symmetric_buffer) {\n     return Unimplemented(\"User-managed buffer registration is not supported\");\n@@ -91,40 +91,40 @@ class Communicator {\n \n   // Reduce buffers of length `count` in `send_buff` using `reduction_kind`\n   // reduction and leaves identical copies of the result on each `recv_buff`.\n-  virtual Future<> AllReduce(stream_executor::DeviceMemoryBase send_buffer,\n-                             stream_executor::DeviceMemoryBase recv_buffer,\n+  virtual Future<> AllReduce(stream_executor::DeviceAddressBase send_buffer,\n+                             stream_executor::DeviceAddressBase recv_buffer,\n                              PrimitiveType dtype, size_t count,\n                              ReductionKind reduction_kind,\n                              const Executor& executor) = 0;\n \n   // Copy data in `send_buff` from the root device to the `recv_buff` on\n   // all other devices.\n-  virtual Future<> Broadcast(se::DeviceMemoryBase send_buffer,\n-                             se::DeviceMemoryBase recv_buffer,\n+  virtual Future<> Broadcast(se::DeviceAddressBase send_buffer,\n+                             se::DeviceAddressBase recv_buffer,\n                              PrimitiveType dtype, size_t count, RankId root,\n                              const Executor& executor) = 0;\n \n   // Reduce data in `send_buff` from all devices using the `reduction_kind`\n   // operation and leave the reduced result scattered over the devices so that\n   // the `recv_buff` on rank `i` will contain the i-th block of the result.\n-  virtual Future<> ReduceScatter(se::DeviceMemoryBase send_buffer,\n-                                 se::DeviceMemoryBase recv_buffer,\n+  virtual Future<> ReduceScatter(se::DeviceAddressBase send_buffer,\n+                                 se::DeviceAddressBase recv_buffer,\n                                  PrimitiveType dtype, size_t count,\n                                  ReductionKind reduction_kind,\n                                  const Executor& executor) = 0;\n \n   // Gather `count` values from all devices into `recv_buffer`, receiving data\n   // from rank `i` at offset `i * sendcount`.\n-  virtual Future<> AllGather(se::DeviceMemoryBase send_buffer,\n-                             se::DeviceMemoryBase recv_buffer,\n+  virtual Future<> AllGather(se::DeviceAddressBase send_buffer,\n+                             se::DeviceAddressBase recv_buffer,\n                              PrimitiveType dtype, size_t count,\n                              const Executor& executor) = 0;\n \n   // Sends data from `send_buffer` to `target_ranks` and receives data from\n   // `source_rank` into `recv_buffer`. If `source_rank` is not specified, the\n   // output is filled with zeros.\n-  virtual Future<> CollectivePermute(se::DeviceMemoryBase send_buffer,\n-                                     se::DeviceMemoryBase recv_buffer,\n+  virtual Future<> CollectivePermute(se::DeviceAddressBase send_buffer,\n+                                     se::DeviceAddressBase recv_buffer,\n                                      PrimitiveType dtype, size_t count,\n                                      std::optional<RankId> source_rank,\n                                      absl::Span<const RankId> target_ranks,\n@@ -133,30 +133,30 @@ class Communicator {\n   // Sends `count` values from `send_buffers` to other ranks and receives data\n   // from other ranks into `recv_buffers`.\n   virtual Future<> AllToAll(\n-      absl::InlinedVector<se::DeviceMemoryBase, 4> send_buffers,\n-      absl::InlinedVector<se::DeviceMemoryBase, 4> recv_buffers,\n+      absl::InlinedVector<se::DeviceAddressBase, 4> send_buffers,\n+      absl::InlinedVector<se::DeviceAddressBase, 4> recv_buffers,\n       PrimitiveType dtype, size_t count, const Executor& executor) = 0;\n \n   // Send data from `send_buff` to rank `peer`.\n-  virtual Future<> Send(se::DeviceMemoryBase send_buffer, PrimitiveType dtype,\n+  virtual Future<> Send(se::DeviceAddressBase send_buffer, PrimitiveType dtype,\n                         size_t count, RankId peer,\n                         const Executor& executor) = 0;\n \n   // Receive data from rank `peer` into `recv_buff`.\n-  virtual Future<> Recv(se::DeviceMemoryBase recv_buffer, PrimitiveType dtype,\n+  virtual Future<> Recv(se::DeviceAddressBase recv_buffer, PrimitiveType dtype,\n                         size_t count, RankId peer,\n                         const Executor& executor) = 0;\n \n   // Send data from `send_buff` to rank `recv_buff` (one-way send).\n-  virtual Future<> Send(se::DeviceMemoryBase recv_buffer,\n-                        se::DeviceMemoryBase send_buffer, PrimitiveType dtype,\n+  virtual Future<> Send(se::DeviceAddressBase recv_buffer,\n+                        se::DeviceAddressBase send_buffer, PrimitiveType dtype,\n                         size_t count, RankId peer, const Executor& executor) {\n     return Unimplemented(\"One-way send is not implemented\");\n   }\n \n   // Receive data from rank `peer` into `recv_buff` (one-way recv).\n-  virtual Future<> Recv(se::DeviceMemoryBase recv_buffer,\n-                        se::DeviceMemoryBase send_buffer, PrimitiveType dtype,\n+  virtual Future<> Recv(se::DeviceAddressBase recv_buffer,\n+                        se::DeviceAddressBase send_buffer, PrimitiveType dtype,\n                         size_t count, RankId peer, const Executor& executor) {\n     return Unimplemented(\"One-way recv is not implemented\");\n   }"
        },
        {
            "sha": "f14764091594bc4b1b2cc8c09da705f56c37424c",
            "filename": "third_party/xla/xla/ffi/BUILD",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2FBUILD?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -37,7 +37,7 @@ cc_library(\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/ffi/api:c_api\",\n         \"//xla/ffi/api:c_api_internal\",\n-        \"//xla/stream_executor:device_memory\",\n+        \"//xla/stream_executor:device_address\",\n         \"//xla/tsl/platform:errors\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base:core_headers\",\n@@ -58,7 +58,7 @@ xla_cc_test(\n         \":call_frame\",\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/ffi/api:c_api\",\n-        \"//xla/stream_executor:device_memory\",\n+        \"//xla/stream_executor:device_address\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/platform:test_benchmark\",\n@@ -149,7 +149,7 @@ cc_library(\n         \"//xla/ffi/api:c_api\",\n         \"//xla/ffi/api:c_api_internal\",\n         \"//xla/hlo/ir:hlo\",\n-        \"//xla/stream_executor:device_memory\",\n+        \"//xla/stream_executor:device_address\",\n         \"//xla/tsl/concurrency:async_value\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base:core_headers\",\n@@ -182,8 +182,8 @@ cc_library(\n         \"//xla/ffi/api:c_api_internal\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service:platform_util\",\n+        \"//xla/stream_executor:device_address\",\n         \"//xla/stream_executor:device_address_allocator\",\n-        \"//xla/stream_executor:device_memory\",\n         \"//xla/tsl/concurrency:async_value\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:statusor\",\n@@ -299,7 +299,7 @@ xla_cc_test(\n         \"//xla/backends/cpu:ffi\",\n         \"//xla/backends/gpu:ffi\",\n         \"//xla/ffi/api:c_api\",\n-        \"//xla/stream_executor:device_memory\",\n+        \"//xla/stream_executor:device_address\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/tsl/concurrency:async_value\",\n         \"//xla/tsl/lib/core:status_test_util\","
        },
        {
            "sha": "dc4551d8e2fecc627befaac0ebdf4dd82c1d128d",
            "filename": "third_party/xla/xla/ffi/api/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2FBUILD?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -91,8 +91,8 @@ xla_cc_test(\n         \"//xla/ffi:execution_state\",\n         \"//xla/ffi:ffi_api\",\n         \"//xla/ffi:type_registry\",\n-        \"//xla/stream_executor:device_memory\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n+        \"//xla/stream_executor:device_address\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/tsl/concurrency:async_value\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\","
        },
        {
            "sha": "d9070080f3a4a663922a5f2f39a87e53ea02e61a",
            "filename": "third_party/xla/xla/ffi/api/c_api_internal.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fc_api_internal.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fc_api_internal.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fc_api_internal.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -93,7 +93,7 @@ typedef XLA_FFI_Error* XLA_FFI_INTERNAL_IntraOpThreadPool_Get(\n typedef XLA_FFI_Error* XLA_FFI_INTERNAL_Stream_Get(\n     XLA_FFI_ExecutionContext* ctx, void** stream);\n \n-// Returns a pointer to device memory allocator (`se::DeviceMemoryAllocator`\n+// Returns a pointer to device memory allocator (`se::DeviceAddressAllocator`\n // pointer) which allows to allocate memory inside a custom call from the same\n // allocator as XLA (i.e. it allows to construct scratch memory allocator).\n typedef XLA_FFI_Error* XLA_FFI_INTERNAL_DeviceMemoryAllocator_Get("
        },
        {
            "sha": "81578f564956fdd6b3a5d176ad47ee7c116fae78",
            "filename": "third_party/xla/xla/ffi/api/ffi_test.cc",
            "status": "modified",
            "additions": 26,
            "deletions": 22,
            "changes": 48,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fffi_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fffi_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fffi_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -45,8 +45,8 @@ limitations under the License.\n #include \"xla/ffi/ffi_api.h\"\n #include \"xla/ffi/type_registry.h\"\n #include \"xla/primitive_util.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/tsl/concurrency/async_value_ref.h\"\n #include \"xla/tsl/concurrency/chain.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n@@ -522,7 +522,7 @@ TEST(FfiTest, DeviceOrdinal) {\n \n TEST(FfiTest, AnyBufferArgument) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -544,7 +544,7 @@ TEST(FfiTest, AnyBufferArgument) {\n \n TEST(FfiTest, BufferArgument) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -562,7 +562,7 @@ TEST(FfiTest, BufferArgument) {\n \n TEST(FfiTest, AnyBufferResult) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/0, /*num_rets=*/1);\n   builder.AddBufferRet(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -594,7 +594,7 @@ TEST(FfiTest, MissingBufferArgument) {\n \n TEST(FfiTest, WrongRankBufferArgument) {\n   std::vector<int32_t> storage(4, 0.0);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(int32_t));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(int32_t));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -611,7 +611,7 @@ TEST(FfiTest, WrongRankBufferArgument) {\n \n TEST(FfiTest, WrongTypeBufferArgument) {\n   std::vector<int32_t> storage(4, 0.0);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(int32_t));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(int32_t));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::S32, /*dims=*/{2, 2});\n@@ -648,7 +648,7 @@ TEST(FfiTest, WrongNumberOfArguments) {\n \n TEST(FfiTest, TokenArgument) {\n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n-  builder.AddBufferArg(se::DeviceMemoryBase(), PrimitiveType::TOKEN,\n+  builder.AddBufferArg(se::DeviceAddressBase(), PrimitiveType::TOKEN,\n                        /*dims=*/{});\n   auto call_frame = builder.Build();\n \n@@ -665,7 +665,7 @@ TEST(FfiTest, TokenArgument) {\n \n TEST(FfiTest, RemainingArgs) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -694,7 +694,7 @@ TEST(FfiTest, RemainingArgs) {\n \n TEST(FfiTest, RemainingRets) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/0, /*num_rets=*/2);\n   builder.AddBufferRet(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -724,7 +724,7 @@ TEST(FfiTest, RemainingRets) {\n \n TEST(FfiTest, OptionalArgs) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -785,7 +785,7 @@ TEST(FfiTest, OptionalArgs) {\n \n TEST(FfiTest, OptionalRets) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/0, /*num_rets=*/1);\n   builder.AddBufferRet(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -854,7 +854,7 @@ TEST(FfiTest, AutoBinding) {\n   });\n \n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder::AttributesBuilder attrs;\n   attrs.Insert(kI32, 42);\n@@ -873,7 +873,8 @@ TEST(FfiTest, AutoBindingResult) {\n       Ffi::BindTo(+[](Result<AnyBuffer> buffer) { return Error::Success(); });\n \n   CallFrameBuilder builder(/*num_args=*/0, /*num_rets=*/1);\n-  builder.AddBufferRet(se::DeviceMemoryBase(), PrimitiveType::F32, /*dims=*/{});\n+  builder.AddBufferRet(se::DeviceAddressBase(), PrimitiveType::F32,\n+                       /*dims=*/{});\n   auto call_frame = builder.Build();\n \n   auto status = Call(*handler, call_frame);\n@@ -1409,19 +1410,22 @@ TEST(FfiTest, ScratchAllocator) {\n   static void* kAddr = reinterpret_cast<void*>(0xDEADBEEF);\n \n   // A test only memory allocator that returns a fixed memory address.\n-  struct TestDeviceMemoryAllocator final : public se::DeviceMemoryAllocator {\n+  struct TestDeviceMemoryAllocator final : public se::DeviceAddressAllocator {\n     size_t count;\n \n     TestDeviceMemoryAllocator()\n-        : se::DeviceMemoryAllocator(nullptr), count(0) {}\n+        : se::DeviceAddressAllocator(nullptr), count(0) {}\n \n-    absl::StatusOr<se::OwningDeviceMemory> Allocate(int, uint64_t size, bool,\n-                                                    int64_t) final {\n+    absl::StatusOr<se::ScopedDeviceAddress<uint8_t>> Allocate(int,\n+                                                              uint64_t size,\n+                                                              bool,\n+                                                              int64_t) final {\n       count++;\n-      return se::OwningDeviceMemory(se::DeviceMemoryBase(kAddr, size), 0, this);\n+      return se::ScopedDeviceAddress<uint8_t>(\n+          se::DeviceAddressBase(kAddr, size), 0, this);\n     }\n \n-    absl::Status Deallocate(int, se::DeviceMemoryBase mem) final {\n+    absl::Status Deallocate(int, se::DeviceAddressBase mem) final {\n       count--;\n       EXPECT_EQ(mem.opaque(), kAddr);\n       return absl::OkStatus();\n@@ -1588,7 +1592,7 @@ XLA_FFI_DEFINE_HANDLER_SYMBOL(BufferR2F32Handler, BufferR2F32Function);\n \n TEST(FfiTest, DefineAutoSymbol) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -1604,7 +1608,7 @@ TEST(FfiTest, DefineAutoSymbol) {\n //===----------------------------------------------------------------------===//\n \n static CallFrameBuilder WithBufferArgs(size_t num_args, size_t rank = 4) {\n-  se::DeviceMemoryBase memory;\n+  se::DeviceAddressBase memory;\n   std::vector<int64_t> dims(4, 1);\n \n   CallFrameBuilder builder(/*num_args=*/num_args, /*num_rets=*/0);"
        },
        {
            "sha": "f0c17215c2dafd9fd43d106f347a41c4d91d5062",
            "filename": "third_party/xla/xla/ffi/call_frame.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -35,7 +35,7 @@ limitations under the License.\n #include \"xla/ffi/api/c_api.h\"\n #include \"xla/ffi/api/c_api_internal.h\"  // IWYU pragma: keep\n #include \"xla/ffi/attribute_map.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n+#include \"xla/stream_executor/device_address.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n@@ -47,7 +47,7 @@ namespace xla::ffi {\n //===----------------------------------------------------------------------===//\n \n struct CallFrameBuilder::Buffer {\n-  se::DeviceMemoryBase memory;\n+  se::DeviceAddressBase memory;\n   PrimitiveType type;\n   absl::InlinedVector<int64_t, 4> dims;\n };\n@@ -84,7 +84,7 @@ CallFrameBuilder::CallFrameBuilder(size_t num_args, size_t num_rets) {\n \n CallFrameBuilder::~CallFrameBuilder() = default;\n \n-void CallFrameBuilder::AddBufferArg(se::DeviceMemoryBase memory,\n+void CallFrameBuilder::AddBufferArg(se::DeviceAddressBase memory,\n                                     PrimitiveType type,\n                                     absl::Span<const int64_t> dims) {\n   DCHECK(args_.capacity() > args_.size())\n@@ -95,10 +95,10 @@ void CallFrameBuilder::AddBufferArg(se::DeviceMemoryBase memory,\n void CallFrameBuilder::AddTokenArg() {\n   DCHECK(args_.capacity() > args_.size())\n       << \"CallFrame builder `num_args` argument was too small\";\n-  args_.push_back(Buffer{se::DeviceMemoryBase(), PrimitiveType::TOKEN, {}});\n+  args_.push_back(Buffer{se::DeviceAddressBase(), PrimitiveType::TOKEN, {}});\n }\n \n-void CallFrameBuilder::AddBufferRet(se::DeviceMemoryBase memory,\n+void CallFrameBuilder::AddBufferRet(se::DeviceAddressBase memory,\n                                     PrimitiveType type,\n                                     absl::Span<const int64_t> dims) {\n   DCHECK(rets_.capacity() > rets_.size())\n@@ -109,7 +109,7 @@ void CallFrameBuilder::AddBufferRet(se::DeviceMemoryBase memory,\n void CallFrameBuilder::AddTokenRet() {\n   DCHECK(rets_.capacity() > rets_.size())\n       << \"CallFrame builder `num_rets` argument was too small\";\n-  rets_.push_back(Buffer{se::DeviceMemoryBase(), PrimitiveType::TOKEN, {}});\n+  rets_.push_back(Buffer{se::DeviceAddressBase(), PrimitiveType::TOKEN, {}});\n }\n \n void CallFrameBuilder::AddAttributes(AttributesMap attrs) {\n@@ -557,8 +557,8 @@ std::unique_ptr<CallFrame::Attributes> CallFrame::FixUpAttrs(\n //===----------------------------------------------------------------------===//\n \n absl::Status CallFrame::UpdateWithBuffers(\n-    absl::Span<const se::DeviceMemoryBase> args,\n-    absl::Span<const se::DeviceMemoryBase> rets) {\n+    absl::Span<const se::DeviceAddressBase> args,\n+    absl::Span<const se::DeviceAddressBase> rets) {\n   if (ABSL_PREDICT_FALSE(args.size() != arguments_->args.size())) {\n     return InvalidArgument(\"Invalid number of updated arguments: %d vs %d\",\n                            args.size(), arguments_->args.size());\n@@ -587,8 +587,8 @@ CallFrame CallFrame::Copy() const {\n }\n \n absl::StatusOr<CallFrame> CallFrame::CopyWithBuffers(\n-    absl::Span<const se::DeviceMemoryBase> args,\n-    absl::Span<const se::DeviceMemoryBase> rets) const {\n+    absl::Span<const se::DeviceAddressBase> args,\n+    absl::Span<const se::DeviceAddressBase> rets) const {\n   CallFrame clone(CopyArgs(*arguments_), CopyRets(*results_), attributes_);\n   TF_RETURN_IF_ERROR(clone.UpdateWithBuffers(args, rets));\n   return clone;"
        },
        {
            "sha": "5433d4be990d4288e030e564220b54b3c1fd3efe",
            "filename": "third_party/xla/xla/ffi/call_frame.h",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -30,7 +30,7 @@ limitations under the License.\n #include \"absl/types/span.h\"\n #include \"xla/ffi/api/c_api.h\"\n #include \"xla/ffi/attribute_map.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n+#include \"xla/stream_executor/device_address.h\"\n #include \"xla/types.h\"  // IWYU pragma: keep\n #include \"xla/xla_data.pb.h\"\n \n@@ -76,12 +76,12 @@ class CallFrameBuilder {\n \n   CallFrame Build();\n \n-  void AddBufferArg(se::DeviceMemoryBase memory, PrimitiveType type,\n+  void AddBufferArg(se::DeviceAddressBase memory, PrimitiveType type,\n                     absl::Span<const int64_t> dims);\n \n   void AddTokenArg();\n \n-  void AddBufferRet(se::DeviceMemoryBase memory, PrimitiveType type,\n+  void AddBufferRet(se::DeviceAddressBase memory, PrimitiveType type,\n                     absl::Span<const int64_t> dims);\n \n   void AddTokenRet();\n@@ -117,16 +117,16 @@ class CallFrame {\n   // array (buffer) arguments and results are known at compile time. Instead of\n   // rebuilding the call frame from scratch on every execution, we can just\n   // update the arguments and results with new pointers to device memory.\n-  absl::Status UpdateWithBuffers(absl::Span<const se::DeviceMemoryBase> args,\n-                                 absl::Span<const se::DeviceMemoryBase> rets);\n+  absl::Status UpdateWithBuffers(absl::Span<const se::DeviceAddressBase> args,\n+                                 absl::Span<const se::DeviceAddressBase> rets);\n \n   // Creates a copy of the call frame.\n   CallFrame Copy() const;\n \n   // Creates a copy of the call frame with updated arguments and results.\n   absl::StatusOr<CallFrame> CopyWithBuffers(\n-      absl::Span<const se::DeviceMemoryBase> args,\n-      absl::Span<const se::DeviceMemoryBase> rets) const;\n+      absl::Span<const se::DeviceAddressBase> args,\n+      absl::Span<const se::DeviceAddressBase> rets) const;\n \n   // Builds an XLA_FFI_CallFrame from owned arguments and attributes.\n   XLA_FFI_CallFrame Build("
        },
        {
            "sha": "b58e2d9a2537b6d4f5f30b3240b35d255649e935",
            "filename": "third_party/xla/xla/ffi/call_frame_test.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fcall_frame_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -25,7 +25,7 @@ limitations under the License.\n #include \"absl/strings/str_cat.h\"\n #include \"xla/ffi/api/c_api.h\"\n #include \"xla/ffi/attribute_map.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n+#include \"xla/stream_executor/device_address.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n #include \"xla/tsl/platform/test.h\"\n #include \"xla/tsl/platform/test_benchmark.h\"\n@@ -34,8 +34,8 @@ limitations under the License.\n namespace xla::ffi {\n \n TEST(CallFrameTest, UpdateCallFrame) {\n-  se::DeviceMemoryBase mem0(reinterpret_cast<void*>(0x12345678), 1024);\n-  se::DeviceMemoryBase mem1(reinterpret_cast<void*>(0x87654321), 1024);\n+  se::DeviceAddressBase mem0(reinterpret_cast<void*>(0x12345678), 1024);\n+  se::DeviceAddressBase mem1(reinterpret_cast<void*>(0x87654321), 1024);\n \n   std::vector<int64_t> dims = {1, 2, 3, 4};\n \n@@ -116,7 +116,7 @@ TEST(CallFrameTest, UpdateCallFrame) {\n void BM_AddBufferArg(benchmark::State& state) {\n   size_t num_args = state.range(0);\n \n-  se::DeviceMemoryBase memory(reinterpret_cast<void*>(0x12345678), 1024);\n+  se::DeviceAddressBase memory(reinterpret_cast<void*>(0x12345678), 1024);\n   std::vector<int64_t> dims = {1, 2, 3, 4};\n \n   for (auto _ : state) {\n@@ -151,17 +151,17 @@ void BM_AddAttributes(benchmark::State& state) {\n void BM_UpdateCallFrame(benchmark::State& state) {\n   size_t num_args = state.range(0);\n \n-  se::DeviceMemoryBase memory(reinterpret_cast<void*>(0x12345678), 1024);\n+  se::DeviceAddressBase memory(reinterpret_cast<void*>(0x12345678), 1024);\n   std::vector<int64_t> dims = {1, 2, 3, 4};\n \n   CallFrameBuilder builder(num_args, /*num_rets=*/0);\n   for (size_t i = 0; i < num_args; ++i) {\n-    builder.AddBufferArg(se::DeviceMemoryBase(nullptr, 1024),\n+    builder.AddBufferArg(se::DeviceAddressBase(nullptr, 1024),\n                          PrimitiveType::F32, dims);\n   }\n   CallFrame call_frame = builder.Build();\n \n-  std::vector<se::DeviceMemoryBase> updated_args(num_args, memory);\n+  std::vector<se::DeviceAddressBase> updated_args(num_args, memory);\n \n   for (auto _ : state) {\n     auto updated_call_frame =\n@@ -173,17 +173,17 @@ void BM_UpdateCallFrame(benchmark::State& state) {\n void BM_UpdateCallFrameInPlace(benchmark::State& state) {\n   size_t num_args = state.range(0);\n \n-  se::DeviceMemoryBase memory(reinterpret_cast<void*>(0x12345678), 1024);\n+  se::DeviceAddressBase memory(reinterpret_cast<void*>(0x12345678), 1024);\n   std::vector<int64_t> dims = {1, 2, 3, 4};\n \n   CallFrameBuilder builder(num_args, /*num_rets=*/0);\n   for (size_t i = 0; i < num_args; ++i) {\n-    builder.AddBufferArg(se::DeviceMemoryBase(nullptr, 1024),\n+    builder.AddBufferArg(se::DeviceAddressBase(nullptr, 1024),\n                          PrimitiveType::F32, dims);\n   }\n   CallFrame call_frame = builder.Build();\n \n-  std::vector<se::DeviceMemoryBase> updated_args(num_args, memory);\n+  std::vector<se::DeviceAddressBase> updated_args(num_args, memory);\n \n   for (auto _ : state) {\n     benchmark::DoNotOptimize("
        },
        {
            "sha": "4e1849a190d327166e11cd98c21c902475761094",
            "filename": "third_party/xla/xla/ffi/ffi.h",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fffi.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fffi.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fffi.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -50,7 +50,7 @@ limitations under the License.\n #include \"xla/ffi/type_registry.h\"\n #include \"xla/hlo/ir/hlo_computation.h\"\n #include \"xla/primitive_util.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n+#include \"xla/stream_executor/device_address.h\"\n #include \"xla/tsl/concurrency/async_value_ref.h\"\n #include \"xla/tsl/concurrency/chain.h\"\n #include \"xla/types.h\"  // IWYU pragma: keep\n@@ -137,8 +137,8 @@ class AnyBuffer {\n     return reinterpret_cast<T*>(buf_->data);\n   }\n \n-  se::DeviceMemoryBase device_memory() const {\n-    return se::DeviceMemoryBase(untyped_data(), size_bytes());\n+  se::DeviceAddressBase device_memory() const {\n+    return se::DeviceAddressBase(untyped_data(), size_bytes());\n   }\n \n  private:\n@@ -182,9 +182,9 @@ class Buffer {\n     return reinterpret_cast<internal::NativeType<dtype>*>(untyped_data());\n   }\n \n-  se::DeviceMemory<internal::NativeType<dtype>> device_memory() const {\n-    return se::DeviceMemory<internal::NativeType<dtype>>(\n-        se::DeviceMemoryBase(untyped_data(), size_bytes()));\n+  se::DeviceAddress<internal::NativeType<dtype>> device_memory() const {\n+    return se::DeviceAddress<internal::NativeType<dtype>>(\n+        se::DeviceAddressBase(untyped_data(), size_bytes()));\n   }\n \n  private:"
        },
        {
            "sha": "3f0de64033061ef7c4f2bf01f45be0652141a0fc",
            "filename": "third_party/xla/xla/ffi/ffi_api.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fffi_api.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fffi_api.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fffi_api.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -47,8 +47,8 @@ limitations under the License.\n #include \"xla/ffi/ffi_structs.h\"\n #include \"xla/ffi/type_registry.h\"\n #include \"xla/service/platform_util.h\"\n+#include \"xla/stream_executor/device_address.h\"\n #include \"xla/stream_executor/device_address_allocator.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n #include \"xla/tsl/concurrency/async_value_ref.h\"\n #include \"xla/tsl/concurrency/chain.h\"\n #include \"xla/tsl/platform/logging.h\"\n@@ -795,7 +795,7 @@ static XLA_FFI_Error* XLA_FFI_DeviceMemory_Free(\n \n   absl::Status status = gpu->allocator->Deallocate(\n       args->ctx->device_ordinal,\n-      stream_executor::DeviceMemoryBase(args->data, args->size));\n+      stream_executor::DeviceAddressBase(args->data, args->size));\n   if (!status.ok()) {\n     return new XLA_FFI_Error{std::move(status)};\n   }"
        },
        {
            "sha": "0369c8cc1946e5b3f2b3552d1d58acf02dfb4500",
            "filename": "third_party/xla/xla/ffi/ffi_test.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fffi_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fffi%2Fffi_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fffi_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -43,7 +43,7 @@ limitations under the License.\n #include \"xla/ffi/execution_state.h\"\n #include \"xla/ffi/ffi_api.h\"\n #include \"xla/ffi/type_registry.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n+#include \"xla/stream_executor/device_address.h\"\n #include \"xla/stream_executor/stream.h\"\n #include \"xla/tsl/concurrency/async_value_ref.h\"\n #include \"xla/tsl/concurrency/chain.h\"\n@@ -179,7 +179,7 @@ TEST(FfiTest, CatchExceptionExplicit) {\n \n TEST(FfiTest, WrongNumArgs) {\n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n-  builder.AddBufferArg(se::DeviceMemoryBase(nullptr), PrimitiveType::F32, {});\n+  builder.AddBufferArg(se::DeviceAddressBase(nullptr), PrimitiveType::F32, {});\n   auto call_frame = builder.Build();\n \n   auto handler = Ffi::Bind().Arg<AnyBuffer>().Arg<AnyBuffer>().To(\n@@ -579,7 +579,7 @@ TEST(FfiTest, DecodingErrors) {\n \n TEST(FfiTest, AnyBufferArgument) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -614,7 +614,7 @@ TEST(FfiTest, AnyBufferArgument) {\n \n TEST(FfiTest, TypedAndRankedBufferArgument) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), storage.size() * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), storage.size() * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -642,8 +642,8 @@ TEST(FfiTest, TypedAndRankedBufferArgument) {\n \n TEST(FfiTest, ComplexBufferArgument) {\n   std::vector<std::complex<float>> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(),\n-                              storage.size() * sizeof(std::complex<float>));\n+  se::DeviceAddressBase memory(storage.data(),\n+                               storage.size() * sizeof(std::complex<float>));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::C64, /*dims=*/{2, 2});\n@@ -662,7 +662,7 @@ TEST(FfiTest, ComplexBufferArgument) {\n \n TEST(FfiTest, TokenArgument) {\n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n-  builder.AddBufferArg(se::DeviceMemoryBase(), PrimitiveType::TOKEN,\n+  builder.AddBufferArg(se::DeviceAddressBase(), PrimitiveType::TOKEN,\n                        /*dims=*/{});\n   auto call_frame = builder.Build();\n \n@@ -679,7 +679,7 @@ TEST(FfiTest, TokenArgument) {\n \n TEST(FfiTest, WrongRankBufferArgument) {\n   std::vector<int32_t> storage(4, 0.0);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(int32_t));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(int32_t));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -697,7 +697,7 @@ TEST(FfiTest, WrongRankBufferArgument) {\n \n TEST(FfiTest, WrongTypeBufferArgument) {\n   std::vector<int32_t> storage(4, 0.0);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(int32_t));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(int32_t));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::S32, /*dims=*/{2, 2});\n@@ -715,7 +715,7 @@ TEST(FfiTest, WrongTypeBufferArgument) {\n \n TEST(FfiTest, RemainingArgs) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -743,7 +743,7 @@ TEST(FfiTest, RemainingArgs) {\n \n TEST(FfiTest, RemainingRets) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/0, /*num_rets=*/2);\n   builder.AddBufferRet(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -772,7 +772,7 @@ TEST(FfiTest, RemainingRets) {\n \n TEST(FfiTest, OptionalArgs) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/1, /*num_rets=*/0);\n   builder.AddBufferArg(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -833,7 +833,7 @@ TEST(FfiTest, OptionalArgs) {\n \n TEST(FfiTest, OptionalRets) {\n   std::vector<float> storage(4, 0.0f);\n-  se::DeviceMemoryBase memory(storage.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory(storage.data(), 4 * sizeof(float));\n \n   CallFrameBuilder builder(/*num_args=*/0, /*num_rets=*/1);\n   builder.AddBufferRet(memory, PrimitiveType::F32, /*dims=*/{2, 2});\n@@ -975,8 +975,8 @@ TEST(FfiTest, UpdateBufferArgumentsAndResults) {\n   std::vector<float> storage0(4, 0.0f);\n   std::vector<float> storage1(4, 0.0f);\n \n-  se::DeviceMemoryBase memory0(storage0.data(), 4 * sizeof(float));\n-  se::DeviceMemoryBase memory1(storage1.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory0(storage0.data(), 4 * sizeof(float));\n+  se::DeviceAddressBase memory1(storage1.data(), 4 * sizeof(float));\n \n   std::vector<int64_t> dims = {2, 2};\n \n@@ -1169,7 +1169,7 @@ TEST(FfiTest, PlatformStream) {\n //===----------------------------------------------------------------------===//\n \n static CallFrameBuilder WithBufferArgs(size_t num_args, size_t rank = 4) {\n-  se::DeviceMemoryBase memory;\n+  se::DeviceAddressBase memory;\n   std::vector<int64_t> dims(4, 1);\n \n   CallFrameBuilder builder(/*num_args=*/num_args, /*num_rets=*/0);"
        },
        {
            "sha": "205fc66b41fcc890a0c5c707db4dc78645a1b39e",
            "filename": "third_party/xla/xla/pjrt/gpu/se_gpu_pjrt_client.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_pjrt_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_pjrt_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_pjrt_client.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -1970,7 +1970,7 @@ StreamExecutorGpuClient::RunAsync(\n         const int64_t buffer_size = allocation.size();\n         if (buffer_size > 0) {\n           TF_ASSIGN_OR_RETURN(\n-              se::OwningDeviceMemory owning_buffer,\n+              se::ScopedDeviceAddress<uint8_t> owning_buffer,\n               memory_allocator->Allocate(device_ordinal, buffer_size,\n                                          /*retry_on_failure=*/true,\n                                          /*memory_space=*/allocation.color()));\n@@ -2035,7 +2035,7 @@ StreamExecutorGpuClient::RunAsync(\n                \"buffer is not donated; allocating a fresh buffer\";\n         int64_t allocation_size = ShapeUtil::ByteSizeOf(\n             ShapeUtil::GetSubshape(gpu_exec->result_shape(), index));\n-        absl::StatusOr<se::OwningDeviceMemory> allocated_buffer =\n+        absl::StatusOr<se::ScopedDeviceAddress<uint8_t>> allocated_buffer =\n             memory_allocator->Allocate(device_ordinal, allocation_size,\n                                        /*retry_on_failure=*/true,\n                                        /*memory_space=*/allocation->color());"
        },
        {
            "sha": "88fce7477ce884ec6ccc5bd1febddf8b2d93641c",
            "filename": "third_party/xla/xla/pjrt/gpu/tfrt/tfrt_gpu_executable.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 9,
            "changes": 23,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2Ftfrt_gpu_executable.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2Ftfrt_gpu_executable.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2Ftfrt_gpu_executable.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -775,16 +775,20 @@ absl::StatusOr<PjRtLoadedExecutable::Result> TfrtGpuExecutable::ExecuteHelper(\n                 tuple_buffer.buffers().mutable_element({});\n             VLOG(3) << \"untuple: output_buffers[\" << i\n                     << \"].emplace: \" << elem->opaque();\n-            output_buffers[i].emplace(stream_executor::OwningDeviceMemory(\n-                *elem, device->local_device_id().value(), client->allocator()));\n+            output_buffers[i].emplace(\n+                stream_executor::ScopedDeviceAddress<uint8_t>(\n+                    *elem, device->local_device_id().value(),\n+                    client->allocator()));\n             *elem = se::DeviceAddressBase();\n           }\n         } else {\n           CHECK_EQ(output_buffers.size(), 1);\n           auto* elem = output.buffers().mutable_element({});\n           VLOG(3) << \"output_buffers[0].emplace: \" << elem->opaque();\n-          output_buffers.front().emplace(stream_executor::OwningDeviceMemory(\n-              *elem, device->local_device_id().value(), client->allocator()));\n+          output_buffers.front().emplace(\n+              stream_executor::ScopedDeviceAddress<uint8_t>(\n+                  *elem, device->local_device_id().value(),\n+                  client->allocator()));\n           *elem = se::DeviceAddressBase();\n         }\n \n@@ -909,10 +913,11 @@ absl::StatusOr<PjRtLoadedExecutable::Result> TfrtGpuExecutable::ExecuteHelper(\n                     << \"]: \" << tracked_buffers[i]->buffer()->buffer().opaque();\n             if (buffer_is_donated[i]) {\n               input.SetUnownedBuffer(\n-                  {i}, MaybeOwningDeviceAddress(se::OwningDeviceMemory(\n-                           tracked_buffers[i]->buffer()->buffer(),\n-                           device->local_hardware_id().value(),\n-                           client->allocator())));\n+                  {i},\n+                  MaybeOwningDeviceAddress(se::ScopedDeviceAddress<uint8_t>(\n+                      tracked_buffers[i]->buffer()->buffer(),\n+                      device->local_hardware_id().value(),\n+                      client->allocator())));\n             } else {\n               input.SetBuffer({i}, MaybeOwningDeviceAddress(\n                                        tracked_buffers[i]->buffer()->buffer()));\n@@ -928,7 +933,7 @@ absl::StatusOr<PjRtLoadedExecutable::Result> TfrtGpuExecutable::ExecuteHelper(\n             ExecutionInput& input = inputs.back();\n             if (buffer_is_donated[i]) {\n               input.SetUnownedBuffer(\n-                  {}, MaybeOwningDeviceAddress(se::OwningDeviceMemory(\n+                  {}, MaybeOwningDeviceAddress(se::ScopedDeviceAddress<uint8_t>(\n                           tracked_buffers[i]->buffer()->buffer(),\n                           device->local_hardware_id().value(),\n                           client->allocator())));"
        },
        {
            "sha": "d11f6e966f5ec2dde5137d51c2e27ec4faf65ee1",
            "filename": "third_party/xla/xla/pjrt/pjrt_stream_executor_client.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -1156,7 +1156,7 @@ MakeTupleHelper(PjRtStreamExecutorClient* client,\n \n   se::Stream* stream = local_device->host_to_device_stream();\n   TF_ASSIGN_OR_RETURN(\n-      se::OwningDeviceMemory owned_root_table_memory,\n+      se::ScopedDeviceAddress<uint8_t> owned_root_table_memory,\n       allocator->Allocate(\n           device_ordinal,\n           transfer_manager->GetByteSizeRequirement(tupled_parameter_shape)));\n@@ -1673,7 +1673,7 @@ PjRtStreamExecutorClient::RunAsync(\n     auto it = tmp.MutableBuffers()->begin();\n     for (auto& v : input) {\n       if (v.second.is_donated) {\n-        it->second = MaybeOwningDeviceAddress(se::OwningDeviceMemory(\n+        it->second = MaybeOwningDeviceAddress(se::ScopedDeviceAddress<uint8_t>(\n             v.second.buf->mem(), device->local_device_id().value(),\n             run_options.allocator()));\n         tmp.SetUnownedIndex(it->first);"
        },
        {
            "sha": "4220db893cb1dcdeb7d0c2c3331b88057b212523",
            "filename": "third_party/xla/xla/pjrt/pjrt_stream_executor_client.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -91,8 +91,8 @@ struct PjRtStreamExecutorExecutionOutput {\n   // Donated inputs which must be freed.\n   std::vector<tsl::AsyncValueRef<RawSEDeviceMemory>> to_be_released;\n   // For PjRtStreamExecutorClient implementations that\n-  // use OwningDeviceMemory for donated inputs.\n-  std::vector<se::OwningDeviceMemory> se_to_be_released;\n+  // use ScopedDeviceAddress for donated inputs.\n+  std::vector<se::ScopedDeviceAddress<uint8_t>> se_to_be_released;\n };\n \n class PjRtStreamExecutorDevice : public PjRtDevice {"
        },
        {
            "sha": "2c1b89083b477dfadb5828b4c518cbc1e6dd0ed7",
            "filename": "third_party/xla/xla/pjrt/tracked_device_buffer_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Ftracked_device_buffer_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fpjrt%2Ftracked_device_buffer_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Ftracked_device_buffer_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -15,6 +15,7 @@ limitations under the License.\n \n #include \"xla/pjrt/tracked_device_buffer.h\"\n \n+#include <cstdint>\n #include <memory>\n #include <utility>\n #include <vector>\n@@ -90,7 +91,7 @@ absl::StatusOr<tsl::AsyncValueRef<RawSEDeviceMemory>> MakeArray(\n       client->backend().transfer_manager()->HostShapeToDeviceShape(shape),\n       [&](const Shape& subshape, const ShapeIndex&) -> absl::Status {\n         TF_ASSIGN_OR_RETURN(\n-            se::OwningDeviceMemory device_memory,\n+            se::ScopedDeviceAddress<uint8_t> device_memory,\n             client->backend().memory_allocator()->Allocate(\n                 /*device_ordinal=*/0,\n                 client->backend().transfer_manager()->GetByteSizeRequirement("
        },
        {
            "sha": "e5e8114809599eacb9b8a8035d74353e9c956b04",
            "filename": "third_party/xla/xla/service/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fservice%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fservice%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2FBUILD?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -4113,6 +4113,8 @@ cc_library(\n     hdrs = [\"maybe_owning_device_memory.h\"],\n     deps = [\n         \":maybe_owning_device_address\",\n+        \"//xla/stream_executor:device_address\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/stream_executor:device_memory\",\n         \"//xla/stream_executor:device_memory_allocator\",\n         \"@com_google_absl//absl/base:core_headers\","
        },
        {
            "sha": "40d05599971dcd56597dbc25a78b4b37b167946d",
            "filename": "third_party/xla/xla/service/maybe_owning_device_memory.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fservice%2Fmaybe_owning_device_memory.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Fservice%2Fmaybe_owning_device_memory.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fmaybe_owning_device_memory.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -18,6 +18,8 @@ limitations under the License.\n \n #include \"absl/base/macros.h\"\n #include \"xla/service/maybe_owning_device_address.h\"\n+#include \"xla/stream_executor/device_address.h\"  // IWYU pragma: keep\n+#include \"xla/stream_executor/device_address_allocator.h\"  // IWYU pragma: keep\n #include \"xla/stream_executor/device_memory.h\"  // IWYU pragma: keep\n #include \"xla/stream_executor/device_memory_allocator.h\"  // IWYU pragma: keep\n "
        },
        {
            "sha": "4466fb094ab53d3430ccd05a491ca04c659f9438",
            "filename": "third_party/xla/xla/tests/BUILD",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2FBUILD?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -184,7 +184,7 @@ cc_library(\n         \"//xla/service:hlo_runner_pjrt\",\n         \"//xla/service:interpreter_plugin\",  # reference backend\n         \"//xla/service:platform_util\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:stream_executor_memory_allocator\",\n         \"//xla/tsl/lib/core:status_test_util\",\n@@ -451,8 +451,8 @@ cc_library(\n         \"//xla/service:shaped_buffer\",\n         \"//xla/service:stream_pool\",\n         \"//xla/service:transfer_manager\",\n-        \"//xla/stream_executor:device_memory\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n+        \"//xla/stream_executor:device_address\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/stream_executor:stream_executor_h\",\n@@ -522,8 +522,8 @@ xla_test(\n         \"//xla/service:hlo_module_config\",\n         \"//xla/service:maybe_owning_device_address\",\n         \"//xla/service:shaped_buffer\",\n-        \"//xla/stream_executor:device_memory\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n+        \"//xla/stream_executor:device_address\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:stream_executor_h\",\n         \"//xla/stream_executor:stream_executor_memory_allocator\",\n@@ -2989,7 +2989,7 @@ xla_test(\n         \"//xla/ffi:ffi_api\",\n         \"//xla/ffi/api:c_api\",\n         \"//xla/service:collective_ops_utils\",\n-        \"//xla/stream_executor:device_memory\",\n+        \"//xla/stream_executor:device_address\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:errors\",\n@@ -3520,7 +3520,7 @@ xla_test(\n         \"//xla/service:platform_util\",\n         \"//xla/service:shaped_buffer\",\n         \"//xla/service:transfer_manager\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/stream_executor:platform_manager\",\n         \"//xla/stream_executor:stream_executor_h\",\n         \"//xla/stream_executor:stream_executor_memory_allocator\",\n@@ -3660,7 +3660,7 @@ xla_test(\n         \"//xla/service:generic_transfer_manager\",\n         \"//xla/service:shaped_buffer\",\n         \"//xla/service:stream_pool\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/tests:xla_test_backend_predicates\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/platform:test_benchmark\","
        },
        {
            "sha": "870a7b659bcb27539ff62c3e976017e4e9cca22e",
            "filename": "third_party/xla/xla/tests/buffer_donation_test.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Fbuffer_donation_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Fbuffer_donation_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fbuffer_donation_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -45,8 +45,8 @@ limitations under the License.\n #include \"xla/shape.h\"\n #include \"xla/shape_tree.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/stream_executor.h\"\n #include \"xla/stream_executor/stream_executor_memory_allocator.h\"\n@@ -113,7 +113,7 @@ class BufferDonationTest : public HloTestBase {\n         run_options, backend_->StreamBorrowerWithPriority());\n \n     std::vector<ExecutionInput> args;\n-    std::vector<ShapeTree<se::DeviceMemoryBase>> inputs_buffers;\n+    std::vector<ShapeTree<se::DeviceAddressBase>> inputs_buffers;\n \n     CHECK_EQ(argument_literals.size(), donate_arguments.size());\n \n@@ -130,15 +130,15 @@ class BufferDonationTest : public HloTestBase {\n       ShapedBuffer shaped_buffer = scoped_shaped_buffer.release();\n       CHECK_OK(backend_->transfer_manager()->TransferLiteralToDevice(\n           stream.get(), argument_literal, shaped_buffer));\n-      ShapeTree<se::DeviceMemoryBase> input_buffers = shaped_buffer.buffers();\n+      ShapeTree<se::DeviceAddressBase> input_buffers = shaped_buffer.buffers();\n       inputs_buffers.push_back(input_buffers);\n       ShapeTree<MaybeOwningDeviceAddress> owned_buffers(\n           argument_literal.shape());\n       owned_buffers.ForEachMutableElement(\n           [&](const ShapeIndex& index,\n               MaybeOwningDeviceAddress* device_memory) {\n             if (donate_argument) {\n-              *device_memory = se::OwningDeviceMemory(\n+              *device_memory = se::ScopedDeviceAddress<uint8_t>(\n                   input_buffers.element(index), executor_->device_ordinal(),\n                   &memory_allocator);\n             } else {\n@@ -162,7 +162,7 @@ class BufferDonationTest : public HloTestBase {\n     }\n     ExecutionOutput output = std::move(output_status).value();\n \n-    se::DeviceMemoryBase result_root_buffer = output.Result().root_buffer();\n+    se::DeviceAddressBase result_root_buffer = output.Result().root_buffer();\n     LOG(INFO) << \"result allocation = \" << result_root_buffer.opaque()\n               << \"             size = \" << result_root_buffer.size();\n "
        },
        {
            "sha": "21d423965efc0ea83075c4941d1538434aaefc66",
            "filename": "third_party/xla/xla/tests/collective_ops_ffi_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Fcollective_ops_ffi_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Fcollective_ops_ffi_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fcollective_ops_ffi_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -33,7 +33,7 @@ limitations under the License.\n #include \"xla/literal.h\"\n #include \"xla/service/collective_ops_utils.h\"\n #include \"xla/status_macros.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n+#include \"xla/stream_executor/device_address.h\"\n #include \"xla/stream_executor/stream.h\"\n #include \"xla/tests/collective_ops_e2e_test_base.h\"\n #include \"xla/tests/literal_test_util.h\""
        },
        {
            "sha": "dce925c25e28d0f772f761dc228e471d1f428f90",
            "filename": "third_party/xla/xla/tests/hlo_test_base.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -39,7 +39,7 @@ limitations under the License.\n #include \"xla/service/hlo_runner_pjrt.h\"\n #include \"xla/service/platform_util.h\"\n #include \"xla/shape.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/stream_executor_memory_allocator.h\"\n #include \"xla/tests/hlo_runner_agnostic_reference_mixin.h\"\n@@ -174,7 +174,7 @@ ::testing::AssertionResult HloTestBase::RunAndCompareNoHloPassesFromFile(\n                                   reference_preprocessor);\n }\n \n-se::DeviceMemoryAllocator* HloTestBase::GetAllocator() {\n+se::DeviceAddressAllocator* HloTestBase::GetAllocator() {\n   if (allocator_ == nullptr) {\n     allocator_ = std::make_unique<se::StreamExecutorMemoryAllocator>(\n         backend().default_stream_executor());"
        },
        {
            "sha": "c378860ec85a4020fbbbcb31081995e51f645ad6",
            "filename": "third_party/xla/xla/tests/hlo_test_base.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -48,7 +48,7 @@ static_assert(false,\n #include \"xla/service/computation_placer.h\"\n #include \"xla/service/hlo_runner.h\"\n #include \"xla/service/hlo_runner_interface.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/tests/hlo_runner_agnostic_reference_mixin.h\"\n #include \"xla/tests/hlo_runner_agnostic_test_base.h\"\n@@ -210,7 +210,7 @@ class ABSL_DEPRECATED(\n   static se::Platform* GetTestPlatform();\n \n   // Creates or retrieves the allocator.\n-  se::DeviceMemoryAllocator* GetAllocator();\n+  se::DeviceAddressAllocator* GetAllocator();\n \n   ErrorSpec error_spec_{0.0001};\n \n@@ -224,7 +224,7 @@ class ABSL_DEPRECATED(\n               bool allow_mixed_precision_in_hlo_verifier,\n               HloPredicate instruction_can_change_layout_func);\n \n-  std::unique_ptr<se::DeviceMemoryAllocator> allocator_;\n+  std::unique_ptr<se::DeviceAddressAllocator> allocator_;\n };\n \n }  // namespace xla"
        },
        {
            "sha": "cb0675c889c0522210cd1fcb4ce03e6a91e590cf",
            "filename": "third_party/xla/xla/tests/local_client_execute_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_execute_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_execute_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_execute_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -31,7 +31,7 @@ limitations under the License.\n #include \"xla/service/shaped_buffer.h\"\n #include \"xla/service/transfer_manager.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/host/host_platform_id.h\"\n #include \"xla/stream_executor/platform_manager.h\"\n #include \"xla/stream_executor/stream_executor.h\""
        },
        {
            "sha": "957b24fc150f8e7de76274fdfb1ee2ea5378a685",
            "filename": "third_party/xla/xla/tests/local_client_test_base.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -43,8 +43,8 @@ limitations under the License.\n #include \"xla/service/transfer_manager.h\"\n #include \"xla/shape.h\"\n #include \"xla/status_macros.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/stream.h\"\n #include \"xla/stream_executor/stream_executor_memory_allocator.h\"\n@@ -57,7 +57,7 @@ namespace xla {\n \n /* static */ TestAllocator* LocalClientTestBase::allocator_;\n \n-absl::StatusOr<se::OwningDeviceMemory> TestAllocator::Allocate(\n+absl::StatusOr<se::ScopedDeviceAddress<uint8_t>> TestAllocator::Allocate(\n     int device_ordinal, uint64_t size, bool retry_on_failure,\n     int64_t memory_space) {\n   VLOG(2) << \"Allocate(\" << device_ordinal << \", \" << size << \")\";\n@@ -71,7 +71,7 @@ absl::StatusOr<se::OwningDeviceMemory> TestAllocator::Allocate(\n }\n \n absl::Status TestAllocator::Deallocate(int device_ordinal,\n-                                       se::DeviceMemoryBase mem) {\n+                                       se::DeviceAddressBase mem) {\n   VLOG(2) << \"Deallocate(\" << device_ordinal << \")\";\n   {\n     absl::MutexLock lock(count_mutex_);"
        },
        {
            "sha": "3afeae8c003d8ce8faf23733832dee06588f5ccd",
            "filename": "third_party/xla/xla/tests/local_client_test_base.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Flocal_client_test_base.h?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -37,8 +37,8 @@ limitations under the License.\n #include \"xla/service/platform_util.h\"\n #include \"xla/service/shaped_buffer.h\"\n #include \"xla/service/transfer_manager.h\"\n-#include \"xla/stream_executor/device_memory.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/stream_executor.h\"\n #include \"xla/stream_executor/stream_executor_memory_allocator.h\"\n@@ -53,11 +53,11 @@ class TestAllocator : public se::StreamExecutorMemoryAllocator {\n       : se::StreamExecutorMemoryAllocator(\n             platform, PlatformUtil::GetStreamExecutors(platform).value()) {}\n \n-  absl::StatusOr<se::OwningDeviceMemory> Allocate(\n+  absl::StatusOr<se::ScopedDeviceAddress<uint8_t>> Allocate(\n       int device_ordinal, uint64_t size, bool retry_on_failure,\n       int64_t memory_space) override;\n   absl::Status Deallocate(int device_ordinal,\n-                          se::DeviceMemoryBase mem) override;\n+                          se::DeviceAddressBase mem) override;\n \n   // Return the number of allocations that have been performed.\n   int64_t allocation_count() const;"
        },
        {
            "sha": "66d84eebb73fb7b4f51bcfea2885bec27e864c3a",
            "filename": "third_party/xla/xla/tests/transfer_manager_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Ftransfer_manager_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftests%2Ftransfer_manager_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Ftransfer_manager_test.cc?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -34,7 +34,7 @@ limitations under the License.\n #include \"xla/service/stream_pool.h\"\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/stream_executor/device_memory_allocator.h\"\n+#include \"xla/stream_executor/device_address_allocator.h\"\n #include \"xla/tests/literal_test_util.h\"\n #include \"xla/tests/local_client_test_base.h\"\n #include \"xla/tsl/platform/statusor.h\""
        },
        {
            "sha": "60993b0f7d19abeda974b8352e0e464581983741",
            "filename": "third_party/xla/xla/tools/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftools%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/21040b5b652e63d81f77509a5ce8ab27a5b1d16c/third_party%2Fxla%2Fxla%2Ftools%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2FBUILD?ref=21040b5b652e63d81f77509a5ce8ab27a5b1d16c",
            "patch": "@@ -1007,8 +1007,8 @@ tsl_gpu_library(\n         \"//xla/service/cpu:cpu_executable\",\n         \"//xla/service/gpu:gpu_symbol_repository\",\n         \"//xla/service/gpu/autotuning:autotuner_util\",\n+        \"//xla/stream_executor:device_address_allocator\",\n         \"//xla/stream_executor:device_description_proto_cc\",\n-        \"//xla/stream_executor:device_memory_allocator\",\n         \"//xla/stream_executor:platform_manager\",\n         \"//xla/stream_executor:stream_executor_h\",\n         \"//xla/stream_executor:stream_executor_memory_allocator\","
        }
    ],
    "stats": {
        "total": 331,
        "additions": 173,
        "deletions": 158
    }
}