{
    "author": "ezhulenev",
    "message": "[xla:cpu] Replace FloorOfRatio with simple division\n\nPiperOrigin-RevId: 801094325",
    "sha": "e4ce44772ff8cc8addfca3f94d2e94bea84ce9db",
    "files": [
        {
            "sha": "8fc02e0fbb75eb9f5b254e7f318e53f83e8c6223",
            "filename": "third_party/xla/xla/backends/cpu/runtime/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4ce44772ff8cc8addfca3f94d2e94bea84ce9db/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4ce44772ff8cc8addfca3f94d2e94bea84ce9db/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2FBUILD?ref=e4ce44772ff8cc8addfca3f94d2e94bea84ce9db",
            "patch": "@@ -1213,7 +1213,6 @@ cc_library(\n     hdrs = [\"work_queue.h\"],\n     deps = [\n         \"//xla/tsl/concurrency:async_value\",\n-        \"//xla/tsl/lib/math:math_util\",\n         \"//xla/tsl/platform:logging\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/container:fixed_array\","
        },
        {
            "sha": "93f6fe557fc5e14aedc4728d6503d55116a57d7f",
            "filename": "third_party/xla/xla/backends/cpu/runtime/work_queue.h",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4ce44772ff8cc8addfca3f94d2e94bea84ce9db/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fwork_queue.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4ce44772ff8cc8addfca3f94d2e94bea84ce9db/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fwork_queue.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fwork_queue.h?ref=e4ce44772ff8cc8addfca3f94d2e94bea84ce9db",
            "patch": "@@ -33,7 +33,6 @@ limitations under the License.\n #include \"Eigen/ThreadPool\"\n #include \"xla/tsl/concurrency/async_value_ref.h\"\n #include \"xla/tsl/concurrency/chain.h\"\n-#include \"xla/tsl/lib/math/math_util.h\"\n #include \"xla/tsl/platform/logging.h\"\n \n #define EIGEN_USE_THREADS\n@@ -130,8 +129,7 @@ inline WorkQueue::WorkQueue(size_t num_tasks, size_t num_partitions)\n     : partitions_(num_partitions),\n       empty_(num_tasks == 0),\n       num_work_stealing_workers_(0) {\n-  size_t partition_size =\n-      tsl::MathUtil::FloorOfRatio(num_tasks, num_partitions);\n+  size_t partition_size = num_tasks / num_partitions;\n   size_t rem_tasks = num_tasks % num_partitions;\n   for (size_t i = 0, begin = 0, end = 0; i < num_partitions; ++i, begin = end) {\n     end = begin + partition_size + ((i < rem_tasks) ? 1 : 0);"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 1,
        "deletions": 4
    }
}