{
    "author": "junwhanahn",
    "message": "Pass `on_device_shape` by const reference in `CommonPjRtBufferImpl` constructor.\n\nPassing by value makes sense only if the value is small and someone is moving into the constructor. I checked all call sites and no one is passing rvalue, and `sizeof(xla::Shape)` is huge. So changing it to const ref.\n\nPiperOrigin-RevId: 803677593",
    "sha": "ef1f93555684c8a113f41498d6884e03234016ce",
    "files": [
        {
            "sha": "2fc09f8f6faa331979ad0b94082f95492b631bdc",
            "filename": "third_party/xla/xla/pjrt/common_pjrt_client.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ef1f93555684c8a113f41498d6884e03234016ce/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ef1f93555684c8a113f41498d6884e03234016ce/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.cc?ref=ef1f93555684c8a113f41498d6884e03234016ce",
            "patch": "@@ -1123,11 +1123,11 @@ bool CommonPjRtBufferImpl::IsOnCpu() const {\n }\n \n CommonPjRtBufferImpl::CommonPjRtBufferImpl(\n-    Shape on_device_shape,\n+    const Shape& on_device_shape,\n     std::unique_ptr<AbstractTrackedDeviceBuffer> tracked_device_buffer,\n     PjRtMemorySpace* memory_space)\n     : CommonPjRtBuffer(std::move(tracked_device_buffer), memory_space),\n-      on_device_shape_(std::move(on_device_shape)) {}\n+      on_device_shape_(on_device_shape) {}\n \n CommonPjRtBufferImpl::~CommonPjRtBufferImpl() { Delete(); }\n "
        },
        {
            "sha": "9131b7a2d1d948afbbea0833ea0433665a8b62ab",
            "filename": "third_party/xla/xla/pjrt/common_pjrt_client.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ef1f93555684c8a113f41498d6884e03234016ce/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ef1f93555684c8a113f41498d6884e03234016ce/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.h?ref=ef1f93555684c8a113f41498d6884e03234016ce",
            "patch": "@@ -201,7 +201,7 @@ class CommonPjRtClient : public PjRtClient {\n class CommonPjRtBufferImpl : public CommonPjRtBuffer {\n  public:\n   CommonPjRtBufferImpl(\n-      Shape on_device_shape,\n+      const Shape& on_device_shape,\n       std::unique_ptr<AbstractTrackedDeviceBuffer> tracked_device_buffer,\n       PjRtMemorySpace* memory_space);\n "
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}