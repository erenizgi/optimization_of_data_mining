{
    "author": "basioli-k",
    "message": "[XLA][host offloading] Add TraceMe to display when host computation is blocking.\n\nPiperOrigin-RevId: 810033545",
    "sha": "eb94f300f41561a95aff8e7ccafff6cf0e81899e",
    "files": [
        {
            "sha": "2f2a4628f4ce15b4576396ae5aec9a3bd057a042",
            "filename": "third_party/xla/xla/backends/gpu/runtime/host_execute_thunk.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/eb94f300f41561a95aff8e7ccafff6cf0e81899e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fhost_execute_thunk.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/eb94f300f41561a95aff8e7ccafff6cf0e81899e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fhost_execute_thunk.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fhost_execute_thunk.cc?ref=eb94f300f41561a95aff8e7ccafff6cf0e81899e",
            "patch": "@@ -452,10 +452,15 @@ absl::Status HostExecuteStartThunk::ExecuteOnStream(\n     auto execute_event = executable_->Execute(\n         call_frame->parameters(), call_frame->result(), execute_options);\n \n-    tsl::BlockUntilReady(execute_event);\n-    if (execute_event.IsError()) {\n-      shared_execute_event.SetError(execute_event.GetError());\n-      return;\n+    {\n+      tsl::profiler::TraceMe block_until_ready_trace(\n+          \"HostExecuteStartThunk::ExecuteOnStream::execute BlockUntilReady\");\n+\n+      tsl::BlockUntilReady(execute_event);\n+      if (execute_event.IsError()) {\n+        shared_execute_event.SetError(execute_event.GetError());\n+        return;\n+      }\n     }\n     auto publish_result_status = std::move(*call_frame).PublishResult();\n     if (!publish_result_status.ok()) {"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 9,
        "deletions": 4
    }
}