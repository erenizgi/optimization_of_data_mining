{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 828882659",
    "sha": "9801893baecc31dc509d365eb0810be5e7b52297",
    "files": [
        {
            "sha": "2a057394476ac70c3157d72f5ee1a6938841ccd1",
            "filename": "tensorflow/core/kernels/gather_op.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9801893baecc31dc509d365eb0810be5e7b52297/tensorflow%2Fcore%2Fkernels%2Fgather_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9801893baecc31dc509d365eb0810be5e7b52297/tensorflow%2Fcore%2Fkernels%2Fgather_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fgather_op.cc?ref=9801893baecc31dc509d365eb0810be5e7b52297",
            "patch": "@@ -74,7 +74,7 @@ class GatherOp : public OpKernel {\n                   absl::InvalidArgumentError(\"axis must be scalar\"));\n \n       if (axis_tensor.dtype() == DT_INT32) {\n-        axis = axis_tensor.scalar<int32>()();\n+        axis = axis_tensor.scalar<int32_t>()();\n       } else if (axis_tensor.dtype() == DT_INT64) {\n         axis = axis_tensor.scalar<int64_t>()();\n       } else {\n@@ -83,7 +83,7 @@ class GatherOp : public OpKernel {\n       }\n     }\n     // special case to avoid checkfail when axis = kint64max.\n-    OP_REQUIRES(c, axis < kint64max,\n+    OP_REQUIRES(c, axis < std::numeric_limits<int64_t>::max(),\n                 absl::InvalidArgumentError(\"axis must be less than kint64max\"));\n \n     int64_t min_params_dim = axis < 0 ? -axis : axis + 1;\n@@ -197,7 +197,7 @@ class GatherOp : public OpKernel {\n  private:\n   // The number of batch dimensions, as passed in the batch_dims attribute.\n   // It must be less than or equal to rank(indices).\n-  int32 batch_dims_ = 0;\n+  int32_t batch_dims_ = 0;\n };\n \n #define REGISTER_GATHER_FULL(dev, type, index_type)                    \\"
        },
        {
            "sha": "ee1e1c16399141460be341758a3f4aaae389a156",
            "filename": "tensorflow/core/kernels/gather_op_test.cc",
            "status": "modified",
            "additions": 20,
            "deletions": 20,
            "changes": 40,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9801893baecc31dc509d365eb0810be5e7b52297/tensorflow%2Fcore%2Fkernels%2Fgather_op_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9801893baecc31dc509d365eb0810be5e7b52297/tensorflow%2Fcore%2Fkernels%2Fgather_op_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fgather_op_test.cc?ref=9801893baecc31dc509d365eb0810be5e7b52297",
            "patch": "@@ -56,8 +56,8 @@ TEST_F(GatherOpTest, ScalarIndices) {\n \n   // Feed and run\n   AddInputFromArray<float>(TensorShape({5}), {0, 1, 2, 3, 4});\n-  AddInputFromArray<int32>(TensorShape({}), {3});\n-  AddInputFromArray<int32>(TensorShape({}), {0});\n+  AddInputFromArray<int32_t>(TensorShape({}), {3});\n+  AddInputFromArray<int32_t>(TensorShape({}), {0});\n   TF_ASSERT_OK(RunOpKernel());\n \n   // Check the output.\n@@ -74,8 +74,8 @@ TEST_F(GatherOpTest, ScalarIndices_Complex) {\n       TensorShape({5}), {std::complex<float>(0, 10), std::complex<float>(1, 11),\n                          std::complex<float>(2, 12), std::complex<float>(3, 13),\n                          std::complex<float>(4, 14)});\n-  AddInputFromArray<int32>(TensorShape({}), {3});\n-  AddInputFromArray<int32>(TensorShape({}), {0});\n+  AddInputFromArray<int32_t>(TensorShape({}), {3});\n+  AddInputFromArray<int32_t>(TensorShape({}), {0});\n   TF_ASSERT_OK(RunOpKernel());\n \n   // Check the output.\n@@ -91,8 +91,8 @@ TEST_F(GatherOpTest, Simple_TwoD32_Axis0) {\n   // Feed and run\n   AddInputFromArray<float>(TensorShape({5, 3}),\n                            {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14});\n-  AddInputFromArray<int32>(TensorShape({4}), {0, 4, 0, 2});\n-  AddInputFromArray<int32>(TensorShape({}), {0});\n+  AddInputFromArray<int32_t>(TensorShape({4}), {0, 4, 0, 2});\n+  AddInputFromArray<int32_t>(TensorShape({}), {0});\n   TF_ASSERT_OK(RunOpKernel());\n \n   // Check the output.\n@@ -106,8 +106,8 @@ TEST_F(GatherOpTest, InvalidInputShape_TwoD32) {\n \n   // Feed invalid input shape and run\n   AddInput<float>(TensorShape({0, 3}), [](int) -> float { return 0.f; });\n-  AddInputFromArray<int32>(TensorShape({4}), {0, 4, 0, 2});\n-  AddInputFromArray<int32>(TensorShape({}), {0});\n+  AddInputFromArray<int32_t>(TensorShape({4}), {0, 4, 0, 2});\n+  AddInputFromArray<int32_t>(TensorShape({}), {0});\n   auto s = RunOpKernel();\n   EXPECT_TRUE(\n       absl::StrContains(s.ToString(), \"indices[0] = 0 is not in [0, 0)\"))\n@@ -120,8 +120,8 @@ TEST_F(GatherOpTest, Simple_TwoD32_Axis1) {\n   // Feed and run\n   AddInputFromArray<float>(TensorShape({5, 3}),\n                            {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14});\n-  AddInputFromArray<int32>(TensorShape({4}), {0, 1, 0, 2});\n-  AddInputFromArray<int32>(TensorShape({}), {1});\n+  AddInputFromArray<int32_t>(TensorShape({4}), {0, 1, 0, 2});\n+  AddInputFromArray<int32_t>(TensorShape({}), {1});\n   TF_ASSERT_OK(RunOpKernel());\n \n   // Check the output.\n@@ -136,8 +136,8 @@ TEST_F(GatherOpTest, ZeroSize_TwoD32) {\n \n   // Feed and run\n   AddInputFromArray<float>(TensorShape({5, 0}), {});\n-  AddInputFromArray<int32>(TensorShape({4}), {0, 4, 0, 2});\n-  AddInputFromArray<int32>(TensorShape({}), {0});\n+  AddInputFromArray<int32_t>(TensorShape({4}), {0, 4, 0, 2});\n+  AddInputFromArray<int32_t>(TensorShape({}), {0});\n   TF_ASSERT_OK(RunOpKernel());\n \n   // Check the output.\n@@ -166,8 +166,8 @@ TEST_F(GatherOpTest, HighRank) {\n \n   // Feed and run\n   AddInputFromArray<float>(TensorShape({4}), {0, 1, 2, 3});\n-  AddInputFromArray<int32>(TensorShape({2, 3}), {1, 2, 0, 2, 3, 0});\n-  AddInputFromArray<int32>(TensorShape({}), {0});\n+  AddInputFromArray<int32_t>(TensorShape({2, 3}), {1, 2, 0, 2, 3, 0});\n+  AddInputFromArray<int32_t>(TensorShape({}), {0});\n   TF_ASSERT_OK(RunOpKernel());\n \n   // Check the output\n@@ -182,8 +182,8 @@ TEST_F(GatherOpTest, Error_IndexOutOfRange) {\n   // Feed and run\n   AddInputFromArray<float>(TensorShape({5, 3}),\n                            {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14});\n-  AddInputFromArray<int32>(TensorShape({4}), {0, 4, 99, 2});\n-  AddInputFromArray<int32>(TensorShape({}), {0});\n+  AddInputFromArray<int32_t>(TensorShape({4}), {0, 4, 99, 2});\n+  AddInputFromArray<int32_t>(TensorShape({}), {0});\n   absl::Status s = RunOpKernel();\n   EXPECT_TRUE(\n       absl::StrContains(s.ToString(), \"indices[2] = 99 is not in [0, 5)\"))\n@@ -196,8 +196,8 @@ TEST_F(GatherOpTest, Error_BatchDimsOutOfRange) {\n   // Feed and run\n   AddInputFromArray<float>(TensorShape({5, 3}),\n                            {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14});\n-  AddInputFromArray<int32>(TensorShape({4}), {0, 4, 99, 2});\n-  AddInputFromArray<int32>(TensorShape({}), {0});\n+  AddInputFromArray<int32_t>(TensorShape({4}), {0, 4, 99, 2});\n+  AddInputFromArray<int32_t>(TensorShape({}), {0});\n   absl::Status s = RunOpKernel();\n   EXPECT_TRUE(absl::StrContains(\n       s.ToString(), \"Expected batch_dims in the range [-1, 1], but got 10\"))\n@@ -256,8 +256,8 @@ static Graph* Gather(int dim) {\n       ->Arg(200)                                                              \\\n       ->Arg(1000)\n \n-BM_GATHER(cpu, int32);\n-BM_GATHER(gpu, int32);\n+BM_GATHER(cpu, int32_t);\n+BM_GATHER(gpu, int32_t);\n BM_GATHER(cpu, int64_t);\n BM_GATHER(gpu, int64_t);\n "
        },
        {
            "sha": "5ab9e2eea4790f8e46ae08c02affbeef97f3d3eb",
            "filename": "tensorflow/core/kernels/generate_vocab_remapping_op.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9801893baecc31dc509d365eb0810be5e7b52297/tensorflow%2Fcore%2Fkernels%2Fgenerate_vocab_remapping_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9801893baecc31dc509d365eb0810be5e7b52297/tensorflow%2Fcore%2Fkernels%2Fgenerate_vocab_remapping_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fgenerate_vocab_remapping_op.cc?ref=9801893baecc31dc509d365eb0810be5e7b52297",
            "patch": "@@ -56,7 +56,7 @@ class GenerateVocabRemappingOp : public OpKernel {\n                     new_vocab_file_tensor->shape().DebugString()));\n \n     // Build a new ID->token lookup table.\n-    const string& new_vocab_filename =\n+    const std::string& new_vocab_filename =\n         new_vocab_file_tensor->scalar<tstring>()();\n     OP_REQUIRES(context, !new_vocab_filename.empty(),\n                 errors::InvalidArgument(\"new vocab filename cannot be empty.\"));\n@@ -88,7 +88,7 @@ class GenerateVocabRemappingOp : public OpKernel {\n                     \"old_vocab_file should be a single string, but got \",\n                     old_vocab_file_tensor->shape().DebugString()));\n     // Build a token->old ID lookup table.\n-    const string& old_vocab_filename =\n+    const std::string& old_vocab_filename =\n         old_vocab_file_tensor->scalar<tstring>()();\n     OP_REQUIRES(context, !old_vocab_filename.empty(),\n                 errors::InvalidArgument(\"new vocab filename cannot be empty.\"));"
        }
    ],
    "stats": {
        "total": 50,
        "additions": 25,
        "deletions": 25
    }
}