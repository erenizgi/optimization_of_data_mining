{
    "author": "pschuh",
    "message": "Rename std::unique_ptr<HloModule> consume_optimized_module() ->\nstd::shared_ptr<HloModule> shared_optimized_module()\n\nPiperOrigin-RevId: 843444886",
    "sha": "d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49",
    "files": [
        {
            "sha": "e69bd65eeea5b94c702c020f78bd61acccc6ae10",
            "filename": "third_party/xla/xla/service/compiler.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49/third_party%2Fxla%2Fxla%2Fservice%2Fcompiler.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49/third_party%2Fxla%2Fxla%2Fservice%2Fcompiler.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcompiler.h?ref=d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49",
            "patch": "@@ -103,7 +103,7 @@ class AotCompilationResult {\n   // Returns the optimized HLO module if one was computed and the implementation\n   // supports it.\n   virtual const HloModule* optimized_module() const = 0;\n-  virtual std::unique_ptr<HloModule> consume_optimized_module() = 0;\n+  virtual std::shared_ptr<HloModule> shared_optimized_module() = 0;\n \n  protected:\n   AotCompilationResult() = default;"
        },
        {
            "sha": "2ca82de23ae14fd9fb723485f98c87edfca4f4c8",
            "filename": "third_party/xla/xla/service/cpu/cpu_aot_compilation_result.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_aot_compilation_result.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_aot_compilation_result.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fcpu_aot_compilation_result.h?ref=d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49",
            "patch": "@@ -123,8 +123,8 @@ class CpuAotCompilationResult : public AotCompilationResult {\n \n   const HloModule* optimized_module() const override { return module_.get(); }\n \n-  std::unique_ptr<HloModule> consume_optimized_module() override {\n-    return std::move(module_);\n+  std::shared_ptr<HloModule> shared_optimized_module() override {\n+    return module_;\n   }\n \n   const CompilationResultProto& proto() const { return proto_; }\n@@ -193,7 +193,7 @@ class CpuAotCompilationResult : public AotCompilationResult {\n         function_library_(std::move(function_library)) {}\n \n   CompilationResultProto proto_;\n-  std::unique_ptr<HloModule> module_;\n+  std::shared_ptr<HloModule> module_;\n   std::optional<size_t> temp_allocation_index_;\n   std::vector<BufferAllocationInfo> buffer_allocation_infos_;\n "
        },
        {
            "sha": "e9da581af3382b41f27e57e9357bb00278809dff",
            "filename": "third_party/xla/xla/service/gpu/gpu_aot_compilation_result.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fgpu_aot_compilation_result.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fgpu_aot_compilation_result.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fgpu_aot_compilation_result.h?ref=d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49",
            "patch": "@@ -78,8 +78,8 @@ class GpuAotCompilationResult : public AotCompilationResult {\n \n   const HloModule* optimized_module() const final { return hlo_module_.get(); };\n \n-  std::unique_ptr<HloModule> consume_optimized_module() final {\n-    return std::move(hlo_module_);\n+  std::shared_ptr<HloModule> shared_optimized_module() final {\n+    return hlo_module_;\n   };\n \n  private:\n@@ -89,7 +89,7 @@ class GpuAotCompilationResult : public AotCompilationResult {\n         hlo_module_(std::move(hlo_module)) {}\n \n   GpuExecutableProto executable_;\n-  std::unique_ptr<HloModule> hlo_module_;\n+  std::shared_ptr<HloModule> hlo_module_;\n };\n \n }  // namespace xla::gpu"
        },
        {
            "sha": "f4c462b782251a80fdba630b076eadae5ce0b392",
            "filename": "third_party/xla/xla/service/gpu/legacy_gpu_aot_compilation_result.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Flegacy_gpu_aot_compilation_result.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Flegacy_gpu_aot_compilation_result.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Flegacy_gpu_aot_compilation_result.h?ref=d7c1cdeb5a563b84c50cdc6c3737eefe45d3ed49",
            "patch": "@@ -67,8 +67,8 @@ class LegacyGpuAotCompilationResult : public AotCompilationResult {\n       LoadExecutable(const se::StreamExecutor* stream_exec) && override;\n \n   const HloModule* optimized_module() const override { return module_.get(); }\n-  std::unique_ptr<HloModule> consume_optimized_module() override {\n-    return std::move(module_);\n+  std::shared_ptr<HloModule> shared_optimized_module() override {\n+    return module_;\n   }\n \n   absl::StatusOr<std::unique_ptr<BufferAssignment>> buffer_assignment()\n@@ -85,7 +85,7 @@ class LegacyGpuAotCompilationResult : public AotCompilationResult {\n         pointer_size_(pointer_size),\n         compiler_(compiler) {}\n \n-  std::unique_ptr<HloModule> module_;\n+  std::shared_ptr<HloModule> module_;\n   GpuExecutableProto proto_;\n   int pointer_size_;\n   Compiler* compiler_;"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 10,
        "deletions": 10
    }
}