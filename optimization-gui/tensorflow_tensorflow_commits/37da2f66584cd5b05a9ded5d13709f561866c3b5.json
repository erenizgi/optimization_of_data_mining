{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 847648279",
    "sha": "37da2f66584cd5b05a9ded5d13709f561866c3b5",
    "files": [
        {
            "sha": "8ee76ec15f4103409b7428bd46743fe0e62ccc05",
            "filename": "third_party/xla/xla/pjrt/stream_executor_executable.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 16,
            "changes": 27,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/37da2f66584cd5b05a9ded5d13709f561866c3b5/third_party%2Fxla%2Fxla%2Fpjrt%2Fstream_executor_executable.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/37da2f66584cd5b05a9ded5d13709f561866c3b5/third_party%2Fxla%2Fxla%2Fpjrt%2Fstream_executor_executable.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fstream_executor_executable.cc?ref=37da2f66584cd5b05a9ded5d13709f561866c3b5",
            "patch": "@@ -43,12 +43,10 @@ namespace xla {\n absl::StatusOr<std::string> StreamExecutorExecutable::SerializeExecutable()\n     const {\n   std::string serialized;\n-  if (std::holds_alternative<\n-          std::vector<std::unique_ptr<xla::AotCompilationResult>>>(\n+  if (std::holds_alternative<std::vector<std::unique_ptr<CompiledModule>>>(\n           executables_)) {\n     const auto& aot_executables =\n-        std::get<std::vector<std::unique_ptr<xla::AotCompilationResult>>>(\n-            executables_);\n+        std::get<std::vector<std::unique_ptr<CompiledModule>>>(executables_);\n     if (aot_executables.empty()) {\n       return absl::InternalError(\"No local executable\");\n     }\n@@ -64,7 +62,7 @@ absl::StatusOr<std::string> StreamExecutorExecutable::SerializeExecutable()\n     Executable* built_executable = local_executables[0]->executable();\n     CHECK(local_client_ != nullptr);\n     TF_ASSIGN_OR_RETURN(\n-        std::unique_ptr<AotCompilationResult> aot_result,\n+        std::unique_ptr<CompiledModule> aot_result,\n         local_client_->backend().compiler()->Export(built_executable));\n \n     TF_ASSIGN_OR_RETURN(serialized, aot_result->SerializeAsString());\n@@ -84,9 +82,9 @@ absl::StatusOr<std::string> StreamExecutorExecutable::SerializeExecutable()\n \n StreamExecutorExecutable::StreamExecutorExecutable(\n     const CompileOptions& compile_options,\n-    std::vector<std::unique_ptr<xla::AotCompilationResult>> executables,\n-    int num_replicas, int num_partitions, absl::string_view name,\n-    absl::string_view fingerprint, absl::string_view default_memory_kind)\n+    std::vector<std::unique_ptr<CompiledModule>> executables, int num_replicas,\n+    int num_partitions, absl::string_view name, absl::string_view fingerprint,\n+    absl::string_view default_memory_kind)\n     : compile_options_(compile_options),\n       executables_(std::move(executables)),\n       num_replicas_(num_replicas),\n@@ -96,8 +94,7 @@ StreamExecutorExecutable::StreamExecutorExecutable(\n       default_memory_kind_(default_memory_kind) {\n   std::vector<std::shared_ptr<HloModule>> hlo_modules;\n   for (const auto& executable :\n-       std::get<std::vector<std::unique_ptr<xla::AotCompilationResult>>>(\n-           executables_)) {\n+       std::get<std::vector<std::unique_ptr<CompiledModule>>>(executables_)) {\n     hlo_modules.push_back(executable->shared_optimized_module());\n   }\n   hlo_modules_ = std::move(hlo_modules);\n@@ -131,7 +128,7 @@ absl::StatusOr<CompiledMemoryStats>\n StreamExecutorExecutable::GetCompiledMemoryStats() const {\n   CompiledMemoryStats memory_stats = CompiledMemoryStats();\n   if (auto* aot_executables =\n-          std::get_if<std::vector<std::unique_ptr<xla::AotCompilationResult>>>(\n+          std::get_if<std::vector<std::unique_ptr<CompiledModule>>>(\n               &executables_)) {\n     if (aot_executables->size() != 1) {\n       return Unimplemented(\n@@ -176,8 +173,7 @@ StreamExecutorExecutable::GetCompiledMemoryStats() const {\n }\n \n int64_t StreamExecutorExecutable::SizeOfGeneratedCodeInBytes() const {\n-  if (std::holds_alternative<\n-          std::vector<std::unique_ptr<xla::AotCompilationResult>>>(\n+  if (std::holds_alternative<std::vector<std::unique_ptr<CompiledModule>>>(\n           executables_)) {\n     return 0;\n   }\n@@ -249,10 +245,9 @@ StreamExecutorExecutable::ConsumeExecutable(\n     return std::get<std::vector<std::unique_ptr<LocalExecutable>>>(\n         std::move(executables_));\n   } else if (std::holds_alternative<\n-                 std::vector<std::unique_ptr<xla::AotCompilationResult>>>(\n-                 executables_)) {\n+                 std::vector<std::unique_ptr<CompiledModule>>>(executables_)) {\n     auto aot_executables =\n-        std::get<std::vector<std::unique_ptr<xla::AotCompilationResult>>>(\n+        std::get<std::vector<std::unique_ptr<CompiledModule>>>(\n             std::move(executables_));\n     std::vector<std::unique_ptr<LocalExecutable>> local_executables;\n     local_executables.reserve(aot_executables.size());"
        },
        {
            "sha": "0e21789076b3a45b80b2e05934785b67a58d181d",
            "filename": "third_party/xla/xla/pjrt/stream_executor_executable.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/37da2f66584cd5b05a9ded5d13709f561866c3b5/third_party%2Fxla%2Fxla%2Fpjrt%2Fstream_executor_executable.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/37da2f66584cd5b05a9ded5d13709f561866c3b5/third_party%2Fxla%2Fxla%2Fpjrt%2Fstream_executor_executable.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fstream_executor_executable.h?ref=37da2f66584cd5b05a9ded5d13709f561866c3b5",
            "patch": "@@ -43,7 +43,7 @@ class StreamExecutorExecutable : public PjRtExecutable {\n  public:\n   StreamExecutorExecutable(\n       const CompileOptions& compile_options,\n-      std::vector<std::unique_ptr<xla::AotCompilationResult>> executables,\n+      std::vector<std::unique_ptr<CompiledModule>> executables,\n       int num_replicas, int num_partitions, absl::string_view name,\n       absl::string_view fingerprint, absl::string_view default_memory_kind);\n \n@@ -101,7 +101,7 @@ class StreamExecutorExecutable : public PjRtExecutable {\n   // The unoptimized HLO module proto is necessary for HLO debug dumping. It is\n   // not available for deserialized executables.\n   std::optional<HloModuleProto> unoptimized_hlo_module_proto_;\n-  std::variant<std::vector<std::unique_ptr<xla::AotCompilationResult>>,\n+  std::variant<std::vector<std::unique_ptr<CompiledModule>>,\n                std::vector<std::unique_ptr<LocalExecutable>>>\n       executables_;\n   LocalClient* local_client_ = nullptr;"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 13,
        "deletions": 18
    }
}