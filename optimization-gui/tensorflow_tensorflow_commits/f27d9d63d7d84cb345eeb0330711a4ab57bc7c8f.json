{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 820551714",
    "sha": "f27d9d63d7d84cb345eeb0330711a4ab57bc7c8f",
    "files": [
        {
            "sha": "77b8fed82ab9392914c40616a736daa7dde45822",
            "filename": "tensorflow/compiler/mlir/lite/tools/versioning/op_signature.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 10,
            "changes": 21,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f27d9d63d7d84cb345eeb0330711a4ab57bc7c8f/tensorflow%2Fcompiler%2Fmlir%2Flite%2Ftools%2Fversioning%2Fop_signature.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f27d9d63d7d84cb345eeb0330711a4ab57bc7c8f/tensorflow%2Fcompiler%2Fmlir%2Flite%2Ftools%2Fversioning%2Fop_signature.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Flite%2Ftools%2Fversioning%2Fop_signature.cc?ref=f27d9d63d7d84cb345eeb0330711a4ab57bc7c8f",
            "patch": "@@ -73,7 +73,7 @@ std::vector<OpSignatureTensorSpec> GetOpSignatureTensorSpecs(\n         // Check if the tensor is a constant tensor.\n         if (buffer_idx != 0 && buffer_idx < model->buffers()->size()) {\n           auto* buffer = model->buffers()->Get(buffer_idx);\n-          if (buffer->data() && buffer->data()->size() != 0) {\n+          if (buffer->data() && !buffer->data()->empty()) {\n             tensor_spec.is_const = true;\n           }\n         }\n@@ -143,16 +143,16 @@ OpSignature GetOpSignature(const OperatorCode* op_code, const Operator* op,\n       const QuantizationParameters* weight_quant =\n           weight_tensor->quantization();\n       if (weight_quant && weight_quant->scale() &&\n-          weight_quant->scale()->size() && weight_tensor->shape() &&\n-          weight_tensor->shape()->size()) {\n+          !weight_quant->scale()->empty() && weight_tensor->shape() &&\n+          !weight_tensor->shape()->empty()) {\n         op_sig.ext_options.fully_connected.is_per_channel_quantized =\n             IsTensorSizeEqual(weight_quant->scale()->size(),\n                               weight_tensor->shape()->Get(0));\n       }\n     } break;\n \n     case BuiltinOperator_MUL: {\n-      if (op->inputs()->size() < 2 || op->outputs()->size() < 1) {\n+      if (op->inputs()->size() < 2 || op->outputs()->empty()) {\n         break;\n       }\n       const Tensor* input1_tensor =\n@@ -167,10 +167,10 @@ OpSignature GetOpSignature(const OperatorCode* op_code, const Operator* op,\n       const QuantizationParameters* output_quant =\n           output_tensor->quantization();\n       if (input1_quant && input1_quant->scale() &&\n-          input1_quant->scale()->size() && input2_qunt &&\n-          input2_qunt->scale() && input2_qunt->scale()->size() &&\n+          !input1_quant->scale()->empty() && input2_qunt &&\n+          input2_qunt->scale() && !input2_qunt->scale()->empty() &&\n           output_quant && output_quant->scale() &&\n-          output_quant->scale()->size()) {\n+          !output_quant->scale()->empty()) {\n         op_sig.ext_options.mul.input1_scale = input1_quant->scale()->Get(0);\n         op_sig.ext_options.mul.input2_scale = input2_qunt->scale()->Get(0);\n         op_sig.ext_options.mul.output_scale = output_quant->scale()->Get(0);\n@@ -192,7 +192,7 @@ OpSignature GetOpSignature(const OperatorCode* op_code, const Operator* op,\n           filter_quant->scale()->size() == static_cast<size_t>(num_filters)) {\n         op_sig.ext_options.conv_2d.is_per_channel_quantized = true;\n       }\n-      if (input_tensor->shape() && input_tensor->shape()->size()) {\n+      if (input_tensor->shape() && !input_tensor->shape()->empty()) {\n         int num_input_channels = input_tensor->shape()->Get(3);\n         int num_filter_input_channels = filter_tensor->shape()->Get(3);\n         op_sig.ext_options.conv_2d.is_grouped_convolution =\n@@ -249,8 +249,9 @@ OpSignature GetOpSignature(const OperatorCode* op_code, const Operator* op,\n       const Tensor* table_tensor =\n           subgraph->tensors()->Get(op->inputs()->Get(1));\n       const QuantizationParameters* table_quant = table_tensor->quantization();\n-      if (table_quant && table_quant->scale() && table_quant->scale()->size() &&\n-          table_tensor->shape() && table_tensor->shape()->size()) {\n+      if (table_quant && table_quant->scale() &&\n+          !table_quant->scale()->empty() && table_tensor->shape() &&\n+          !table_tensor->shape()->empty()) {\n         op_sig.ext_options.embedding_lookup.is_per_channel_quantized =\n             table_quant->scale()->size() > 1 &&\n             IsTensorSizeEqual(table_quant->scale()->size(),"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 11,
        "deletions": 10
    }
}