{
    "author": "vksnk",
    "message": "[XLA:CPU] Enable window dilation support in XLA CPU YNN convolution.\n\nPiperOrigin-RevId: 846895590",
    "sha": "cb2c66e7150d69af0473ff2ceffab7980111e727",
    "files": [
        {
            "sha": "ec55a93dccb03473dcd7fac0eed9cb4070dede40",
            "filename": "third_party/xla/xla/backends/cpu/ynn_emitter.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/cb2c66e7150d69af0473ff2ceffab7980111e727/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fynn_emitter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/cb2c66e7150d69af0473ff2ceffab7980111e727/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fynn_emitter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fynn_emitter.cc?ref=cb2c66e7150d69af0473ff2ceffab7980111e727",
            "patch": "@@ -725,7 +725,7 @@ static absl::StatusOr<YnnSubgraph> EmitYnnConvolutionSubgraph(\n     stencil_axes[i] = conv_dimensions.input_spatial_dimensions(i);\n     stencil_dims[i] = conv_window.dimensions(i).size();\n     stencil_strides[i] = conv_window.dimensions(i).stride();\n-    stencil_dilations[i] = 1;\n+    stencil_dilations[i] = conv_window.dimensions(i).window_dilation();\n     padding_lows[i] = conv_window.dimensions(i).padding_low();\n     padding_highs[i] = conv_window.dimensions(i).padding_high();\n   }"
        },
        {
            "sha": "d3d260371e75aa7b8f49c20341701a9f584b2bf3",
            "filename": "third_party/xla/xla/backends/cpu/ynn_support.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/cb2c66e7150d69af0473ff2ceffab7980111e727/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fynn_support.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/cb2c66e7150d69af0473ff2ceffab7980111e727/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fynn_support.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fynn_support.cc?ref=cb2c66e7150d69af0473ff2ceffab7980111e727",
            "patch": "@@ -348,10 +348,8 @@ bool IsConvolutionOpSupportedByYnn(const HloInstruction* instr) {\n     return false;\n   }\n \n-  // No dilation for now.\n-  if ((window.dimensions(0).window_dilation() != 1) ||\n-      (window.dimensions(1).window_dilation() != 1) ||\n-      (window.dimensions(0).base_dilation() != 1) ||\n+  // No base dilation for now.\n+  if ((window.dimensions(0).base_dilation() != 1) ||\n       (window.dimensions(1).base_dilation() != 1)) {\n     return false;\n   }"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 3,
        "deletions": 5
    }
}