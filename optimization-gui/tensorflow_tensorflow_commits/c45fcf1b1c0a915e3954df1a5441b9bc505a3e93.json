{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 824851950",
    "sha": "c45fcf1b1c0a915e3954df1a5441b9bc505a3e93",
    "files": [
        {
            "sha": "142b156681dafdf8d7a44ee1c1a3845f9fcf980f",
            "filename": "tensorflow/core/profiler/internal/print_model_analysis.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Fprint_model_analysis.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Fprint_model_analysis.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fprofiler%2Finternal%2Fprint_model_analysis.cc?ref=c45fcf1b1c0a915e3954df1a5441b9bc505a3e93",
            "patch": "@@ -85,7 +85,7 @@ string RunProfile(const string& command, const string& options,\n }  // namespace\n \n bool NewProfiler(const string* graph, const string* op_log) {\n-  std::unique_ptr<GraphDef> graph_ptr(new GraphDef());\n+  std::unique_ptr<GraphDef> graph_ptr = std::make_unique<GraphDef>();\n   if (graph && !graph->empty()) {\n     if (!graph_ptr->ParseFromString(*graph)) {\n       if (!protobuf::TextFormat::ParseFromString(*graph, graph_ptr.get())) {\n@@ -126,7 +126,7 @@ double AddStep(int64_t step, const string* graph, const string* run_meta,\n   CHECK(tf_stat);\n \n   if (graph && !graph->empty()) {\n-    std::unique_ptr<GraphDef> graph_ptr(new GraphDef());\n+    std::unique_ptr<GraphDef> graph_ptr = std::make_unique<GraphDef>();\n     if (!graph_ptr->ParseFromString(*graph)) {\n       if (!protobuf::TextFormat::ParseFromString(*graph, graph_ptr.get())) {\n         absl::FPrintF(stderr, \"Failed to parse graph\\n\");\n@@ -137,7 +137,7 @@ double AddStep(int64_t step, const string* graph, const string* run_meta,\n \n   CHECK(run_meta && !run_meta->empty());\n   // TODO(xpan): Better error handling.\n-  std::unique_ptr<RunMetadata> run_meta_ptr(new RunMetadata());\n+  std::unique_ptr<RunMetadata> run_meta_ptr = std::make_unique<RunMetadata>();\n   run_meta_ptr->ParseFromString(*run_meta);\n   tf_stat->AddRunMeta(step, std::move(run_meta_ptr));\n \n@@ -175,7 +175,7 @@ string PrintModelAnalysis(const string* graph, const string* run_meta,\n                           const string* options) {\n   CHECK(command) << \"command mustn't be null\";\n   CHECK(options) << \"options mustn't be null\";\n-  std::unique_ptr<GraphDef> graph_ptr(new GraphDef());\n+  std::unique_ptr<GraphDef> graph_ptr = std::make_unique<GraphDef>();\n   if (graph && !graph->empty()) {\n     graph_ptr->ParseFromString(*graph);\n   }"
        },
        {
            "sha": "a6c88c2e4cda41e1398e88f0f64abcef51385cbc",
            "filename": "tensorflow/core/profiler/internal/tfprof_show_test.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_show_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_show_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_show_test.cc?ref=c45fcf1b1c0a915e3954df1a5441b9bc505a3e93",
            "patch": "@@ -41,19 +41,20 @@ class TFProfShowTest : public ::testing::Test {\n     string graph_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/graph.pbtxt\");\n-    std::unique_ptr<tensorflow::GraphDef> graph_pb(new tensorflow::GraphDef());\n+    std::unique_ptr<tensorflow::GraphDef> graph_pb =\n+        std::make_unique<tensorflow::GraphDef>();\n     TF_CHECK_OK(\n         ReadProtoFile(Env::Default(), graph_path, graph_pb.get(), false));\n \n-    std::unique_ptr<tensorflow::RunMetadata> run_meta_pb(\n-        new tensorflow::RunMetadata());\n+    std::unique_ptr<tensorflow::RunMetadata> run_meta_pb =\n+        std::make_unique<tensorflow::RunMetadata>();\n     string run_meta_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/run_meta\");\n     TF_CHECK_OK(\n         ReadProtoFile(Env::Default(), run_meta_path, run_meta_pb.get(), true));\n \n-    std::unique_ptr<OpLogProto> op_log_pb(new OpLogProto());\n+    std::unique_ptr<OpLogProto> op_log_pb = std::make_unique<OpLogProto>();\n     string op_log_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/tfprof_log\");\n@@ -62,8 +63,8 @@ class TFProfShowTest : public ::testing::Test {\n     string ckpt_path = io::JoinPath(testing::TensorFlowSrcRoot(),\n                                     \"core/profiler/internal/testdata/ckpt\");\n     TF_Status* status = TF_NewStatus();\n-    std::unique_ptr<checkpoint::CheckpointReader> ckpt_reader(\n-        new checkpoint::CheckpointReader(ckpt_path, status));\n+    std::unique_ptr<checkpoint::CheckpointReader> ckpt_reader =\n+        std::make_unique<checkpoint::CheckpointReader>(ckpt_path, status);\n     CHECK(TF_GetCode(status) == TF_OK);\n     TF_DeleteStatus(status);\n "
        },
        {
            "sha": "7491ef4e99229cccbd0e9ce943d42a65587faa13",
            "filename": "tensorflow/core/profiler/internal/tfprof_stats.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_stats.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_stats.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_stats.cc?ref=c45fcf1b1c0a915e3954df1a5441b9bc505a3e93",
            "patch": "@@ -97,8 +97,8 @@ TFStats::TFStats(const string& filename,\n     id_to_string_[entry.first] = entry.second;\n   }\n   for (const auto& node_pb : profile.nodes()) {\n-    std::unique_ptr<TFGraphNode> node(\n-        new TFGraphNode(node_pb.second, profile, &id_to_string_, &nodes_map_));\n+    std::unique_ptr<TFGraphNode> node = std::make_unique<TFGraphNode>(\n+        node_pb.second, profile, &id_to_string_, &nodes_map_);\n     nodes_map_.insert(std::pair<string, std::unique_ptr<TFGraphNode>>(\n         node_pb.second.name(), std::move(node)));\n   }"
        },
        {
            "sha": "37cedfa641ae00a84aa5637df024e600d1b752ec",
            "filename": "tensorflow/core/profiler/internal/tfprof_stats_test.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_stats_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_stats_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_stats_test.cc?ref=c45fcf1b1c0a915e3954df1a5441b9bc505a3e93",
            "patch": "@@ -35,19 +35,20 @@ class TFProfStatsTest : public ::testing::Test {\n     string graph_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/graph.pbtxt\");\n-    std::unique_ptr<tensorflow::GraphDef> graph_pb(new tensorflow::GraphDef());\n+    std::unique_ptr<tensorflow::GraphDef> graph_pb =\n+        std::make_unique<tensorflow::GraphDef>();\n     TF_CHECK_OK(\n         ReadProtoFile(Env::Default(), graph_path, graph_pb.get(), false));\n \n-    std::unique_ptr<tensorflow::RunMetadata> run_meta_pb(\n-        new tensorflow::RunMetadata());\n+    std::unique_ptr<tensorflow::RunMetadata> run_meta_pb =\n+        std::make_unique<tensorflow::RunMetadata>();\n     string run_meta_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/run_meta\");\n     TF_CHECK_OK(\n         ReadProtoFile(Env::Default(), run_meta_path, run_meta_pb.get(), true));\n \n-    std::unique_ptr<OpLogProto> op_log_pb(new OpLogProto());\n+    std::unique_ptr<OpLogProto> op_log_pb = std::make_unique<OpLogProto>();\n     string op_log_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/tfprof_log\");\n@@ -56,8 +57,8 @@ class TFProfStatsTest : public ::testing::Test {\n     string ckpt_path = io::JoinPath(testing::TensorFlowSrcRoot(),\n                                     \"core/profiler/internal/testdata/ckpt\");\n     TF_Status* status = TF_NewStatus();\n-    std::unique_ptr<checkpoint::CheckpointReader> ckpt_reader(\n-        new checkpoint::CheckpointReader(ckpt_path, status));\n+    std::unique_ptr<checkpoint::CheckpointReader> ckpt_reader =\n+        std::make_unique<checkpoint::CheckpointReader>(ckpt_path, status);\n     CHECK(TF_GetCode(status) == TF_OK);\n     TF_DeleteStatus(status);\n "
        },
        {
            "sha": "b7304ebefda97d3522dad0e2608c5c8a2794096c",
            "filename": "tensorflow/core/profiler/internal/tfprof_tensor_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_tensor_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_tensor_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_tensor_test.cc?ref=c45fcf1b1c0a915e3954df1a5441b9bc505a3e93",
            "patch": "@@ -33,7 +33,8 @@ class TFProfTensorTest : public ::testing::Test {\n     string graph_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/graph.pbtxt\");\n-    std::unique_ptr<tensorflow::GraphDef> graph_pb(new tensorflow::GraphDef());\n+    std::unique_ptr<tensorflow::GraphDef> graph_pb =\n+        std::make_unique<tensorflow::GraphDef>();\n     TF_CHECK_OK(\n         ReadProtoFile(Env::Default(), graph_path, graph_pb.get(), false));\n \n@@ -43,8 +44,8 @@ class TFProfTensorTest : public ::testing::Test {\n     string ckpt_path = io::JoinPath(testing::TensorFlowSrcRoot(),\n                                     \"core/profiler/internal/testdata/ckpt\");\n     TF_Status* status = TF_NewStatus();\n-    std::unique_ptr<checkpoint::CheckpointReader> ckpt_reader(\n-        new checkpoint::CheckpointReader(ckpt_path, status));\n+    std::unique_ptr<checkpoint::CheckpointReader> ckpt_reader =\n+        std::make_unique<checkpoint::CheckpointReader>(ckpt_path, status);\n     CHECK(TF_GetCode(status) == TF_OK);\n     TF_DeleteStatus(status);\n "
        },
        {
            "sha": "6cf00f9bac90ca6320dbeb3b4bd50c1f940fe3f9",
            "filename": "tensorflow/core/profiler/internal/tfprof_timeline_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_timeline_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c45fcf1b1c0a915e3954df1a5441b9bc505a3e93/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_timeline_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fprofiler%2Finternal%2Ftfprof_timeline_test.cc?ref=c45fcf1b1c0a915e3954df1a5441b9bc505a3e93",
            "patch": "@@ -35,12 +35,13 @@ class TFProfTimelineTest : public ::testing::Test {\n     string graph_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/graph.pbtxt\");\n-    std::unique_ptr<tensorflow::GraphDef> graph_pb(new tensorflow::GraphDef());\n+    std::unique_ptr<tensorflow::GraphDef> graph_pb =\n+        std::make_unique<tensorflow::GraphDef>();\n     TF_CHECK_OK(\n         ReadProtoFile(Env::Default(), graph_path, graph_pb.get(), false));\n \n-    std::unique_ptr<tensorflow::RunMetadata> run_meta_pb(\n-        new tensorflow::RunMetadata());\n+    std::unique_ptr<tensorflow::RunMetadata> run_meta_pb =\n+        std::make_unique<tensorflow::RunMetadata>();\n     string run_meta_path =\n         io::JoinPath(testing::TensorFlowSrcRoot(),\n                      \"core/profiler/internal/testdata/run_meta\");"
        }
    ],
    "stats": {
        "total": 52,
        "additions": 28,
        "deletions": 24
    }
}