{
    "author": "krishnaharidasan",
    "message": "Remove fallback for `UnimplementedError` in `XlaLoadedExecutable::Serialize()`.\n\nAll affected tests explicitly disable serialization test cases.\n\nPiperOrigin-RevId: 804951643",
    "sha": "d757242f022a96b033bffba1386d2b3c193c17a7",
    "files": [
        {
            "sha": "f121869a723a128b5132d998413597212336a53a",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/xla_executable_impl_test_lib.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 12,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d757242f022a96b033bffba1386d2b3c193c17a7/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fxla_executable_impl_test_lib.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d757242f022a96b033bffba1386d2b3c193c17a7/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fxla_executable_impl_test_lib.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fxla_executable_impl_test_lib.cc?ref=d757242f022a96b033bffba1386d2b3c193c17a7",
            "patch": "@@ -140,20 +140,12 @@ absl::StatusOr<LoadedExecutableRef> CompileOnDevices(\n   if (!serialize) {\n     return loaded_executable;\n   }\n-  auto serialized_executable = loaded_executable->Serialize();\n-  // If serialization is not supported, fall back to using the original\n-  // executable.\n-  if (absl::IsUnimplemented(serialized_executable.status())) {\n-    LOG(INFO) << \"Serialize() returned error: \"\n-              << serialized_executable.status()\n-              << \". Falling back to using the original executable.\";\n-    return loaded_executable;\n-  }\n-  TF_RETURN_IF_ERROR(serialized_executable.status());\n+  TF_ASSIGN_OR_RETURN(auto serialized_executable,\n+                      loaded_executable->Serialize());\n   auto options = std::make_unique<XlaDeserializeExecutableOptions>();\n   options->devices = std::move(device_list);\n-  return compiler->DeserializeLoadedExecutable(\n-      *std::move(serialized_executable), std::move(options));\n+  return compiler->DeserializeLoadedExecutable(std::move(serialized_executable),\n+                                               std::move(options));\n }\n \n class LoadedExecutableImplTest"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 4,
        "deletions": 12
    }
}