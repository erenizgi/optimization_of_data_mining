{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 829434646",
    "sha": "cc4a122a248becc99b503bfa2980446bd92430ee",
    "files": [
        {
            "sha": "3b5f0145ba983c1ac27fce1dc0ef6f79a2fae941",
            "filename": "tensorflow/js/ops/ts_op_gen.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/cc4a122a248becc99b503bfa2980446bd92430ee/tensorflow%2Fjs%2Fops%2Fts_op_gen.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/cc4a122a248becc99b503bfa2980446bd92430ee/tensorflow%2Fjs%2Fops%2Fts_op_gen.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fjs%2Fops%2Fts_op_gen.cc?ref=cc4a122a248becc99b503bfa2980446bd92430ee",
            "patch": "@@ -57,13 +57,13 @@ class GenTypeScriptOp {\n   ~GenTypeScriptOp();\n \n   // Returns the generated code as a string:\n-  string Code();\n+  std::string Code();\n \n  private:\n   void ProcessArgs();\n   void ProcessAttrs();\n-  void AddAttrForArg(const string& attr, int arg_index);\n-  string InputForAttr(const OpDef::AttrDef& op_def_attr);\n+  void AddAttrForArg(const std::string& attr, int arg_index);\n+  std::string InputForAttr(const OpDef::AttrDef& op_def_attr);\n \n   void AddMethodSignature();\n   void AddOpAttrs();\n@@ -73,7 +73,7 @@ class GenTypeScriptOp {\n   const ApiDef& api_def_;\n \n   // Placeholder string for all generated code:\n-  string result_;\n+  std::string result_;\n \n   // Holds in-order vector of Op inputs:\n   std::vector<ArgDefs> input_op_args_;\n@@ -82,7 +82,7 @@ class GenTypeScriptOp {\n   std::vector<OpAttrs> op_attrs_;\n \n   // Stores attributes-to-arguments by name:\n-  typedef std::unordered_map<string, std::vector<int>> AttrArgIdxMap;\n+  typedef std::unordered_map<std::string, std::vector<int>> AttrArgIdxMap;\n   AttrArgIdxMap attr_arg_idx_map_;\n \n   // Holds number of outputs:\n@@ -94,7 +94,7 @@ GenTypeScriptOp::GenTypeScriptOp(const OpDef& op_def, const ApiDef& api_def)\n \n GenTypeScriptOp::~GenTypeScriptOp() = default;\n \n-string GenTypeScriptOp::Code() {\n+std::string GenTypeScriptOp::Code() {\n   ProcessArgs();\n   ProcessAttrs();\n \n@@ -144,7 +144,7 @@ void GenTypeScriptOp::ProcessAttrs() {\n   }\n }\n \n-void GenTypeScriptOp::AddAttrForArg(const string& attr, int arg_index) {\n+void GenTypeScriptOp::AddAttrForArg(const std::string& attr, int arg_index) {\n   // Keep track of attributes-to-arguments by name. These will be used for\n   // construction Op attributes that require information about the inputs.\n   auto iter = attr_arg_idx_map_.find(attr);\n@@ -155,8 +155,8 @@ void GenTypeScriptOp::AddAttrForArg(const string& attr, int arg_index) {\n   }\n }\n \n-string GenTypeScriptOp::InputForAttr(const OpDef::AttrDef& op_def_attr) {\n-  string inputs;\n+std::string GenTypeScriptOp::InputForAttr(const OpDef::AttrDef& op_def_attr) {\n+  std::string inputs;\n   auto arg_list = attr_arg_idx_map_.find(op_def_attr.name());\n   if (arg_list != attr_arg_idx_map_.end()) {\n     for (auto iter = arg_list->second.begin(); iter != arg_list->second.end();\n@@ -235,7 +235,7 @@ void WriteTSOp(const OpDef& op_def, const ApiDef& api_def, WritableFile* ts) {\n }\n \n void StartFile(WritableFile* ts_file) {\n-  const string header =\n+  const std::string header =\n       R\"header(/**\n  * @license\n  * Copyright 2018 Google Inc. All Rights Reserved.\n@@ -266,7 +266,7 @@ import {createTensorsTypeOpAttr, nodeBackend} from './op_utils';\n }  // namespace\n \n void WriteTSOps(const OpList& ops, const ApiDefMap& api_def_map,\n-                const string& ts_filename) {\n+                const std::string& ts_filename) {\n   Env* env = Env::Default();\n \n   std::unique_ptr<WritableFile> ts_file = nullptr;"
        },
        {
            "sha": "fb0c7c34d0d8bc43fec4be316b1b9fc6b7595831",
            "filename": "tensorflow/js/ops/ts_op_gen.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/cc4a122a248becc99b503bfa2980446bd92430ee/tensorflow%2Fjs%2Fops%2Fts_op_gen.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/cc4a122a248becc99b503bfa2980446bd92430ee/tensorflow%2Fjs%2Fops%2Fts_op_gen.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fjs%2Fops%2Fts_op_gen.h?ref=cc4a122a248becc99b503bfa2980446bd92430ee",
            "patch": "@@ -24,7 +24,7 @@ namespace tensorflow {\n \n // Generated code is written to the file ts_filename:\n void WriteTSOps(const OpList& ops, const ApiDefMap& api_def_map,\n-                const string& ts_filename);\n+                const std::string& ts_filename);\n \n }  // namespace tensorflow\n "
        },
        {
            "sha": "f0f65f3d86428bdaceb1c62a831c9da42a3ed0f6",
            "filename": "tensorflow/js/ops/ts_op_gen_test.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 18,
            "changes": 37,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/cc4a122a248becc99b503bfa2980446bd92430ee/tensorflow%2Fjs%2Fops%2Fts_op_gen_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/cc4a122a248becc99b503bfa2980446bd92430ee/tensorflow%2Fjs%2Fops%2Fts_op_gen_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fjs%2Fops%2Fts_op_gen_test.cc?ref=cc4a122a248becc99b503bfa2980446bd92430ee",
            "patch": "@@ -81,8 +81,9 @@ op {\n )\";\n \n // Generate TypeScript code\n-void GenerateTsOpFileText(const string& op_def_str, const string& api_def_str,\n-                          string* ts_file_text) {\n+void GenerateTsOpFileText(const std::string& op_def_str,\n+                          const std::string& api_def_str,\n+                          std::string* ts_file_text) {\n   Env* env = Env::Default();\n   OpList op_defs;\n   protobuf::TextFormat::ParseFromString(\n@@ -93,57 +94,57 @@ void GenerateTsOpFileText(const string& op_def_str, const string& api_def_str,\n     TF_ASSERT_OK(api_def_map.LoadApiDef(api_def_str));\n   }\n \n-  const string& tmpdir = testing::TmpDir();\n+  const std::string& tmpdir = testing::TmpDir();\n   const auto ts_file_path = io::JoinPath(tmpdir, \"test.ts\");\n \n   WriteTSOps(op_defs, api_def_map, ts_file_path);\n   TF_ASSERT_OK(ReadFileToString(env, ts_file_path, ts_file_text));\n }\n \n TEST(TsOpGenTest, TestImports) {\n-  string ts_file_text;\n+  std::string ts_file_text;\n   GenerateTsOpFileText(\"\", \"\", &ts_file_text);\n \n-  const string expected = R\"(\n+  const std::string expected = R\"(\n import * as tfc from '@tensorflow/tfjs-core';\n import {createTensorsTypeOpAttr, nodeBackend} from './op_utils';\n )\";\n   ExpectContainsStr(ts_file_text, expected);\n }\n \n TEST(TsOpGenTest, InputSingleAndList) {\n-  const string api_def = R\"pb(\n+  const std::string api_def = R\"pb(\n     op { graph_op_name: \"Foo\" arg_order: \"dim\" arg_order: \"images\" }\n   )pb\";\n \n-  string ts_file_text;\n+  std::string ts_file_text;\n   GenerateTsOpFileText(\"\", api_def, &ts_file_text);\n \n-  const string expected = R\"(\n+  const std::string expected = R\"(\n export function Foo(dim: tfc.Tensor, images: tfc.Tensor[]): tfc.Tensor {\n )\";\n   ExpectContainsStr(ts_file_text, expected);\n }\n \n TEST(TsOpGenTest, TestVisibility) {\n-  const string api_def = R\"(\n+  const std::string api_def = R\"(\n op {\n   graph_op_name: \"Foo\"\n   visibility: HIDDEN\n }\n )\";\n \n-  string ts_file_text;\n+  std::string ts_file_text;\n   GenerateTsOpFileText(\"\", api_def, &ts_file_text);\n \n-  const string expected = R\"(\n+  const std::string expected = R\"(\n export function Foo(images: tfc.Tensor[], dim: tfc.Tensor): tfc.Tensor {\n )\";\n   ExpectDoesNotContainStr(ts_file_text, expected);\n }\n \n TEST(TsOpGenTest, SkipDeprecated) {\n-  const string op_def = R\"(\n+  const std::string op_def = R\"(\n op {\n   name: \"DeprecatedFoo\"\n   input_arg {\n@@ -172,14 +173,14 @@ op {\n }\n )\";\n \n-  string ts_file_text;\n+  std::string ts_file_text;\n   GenerateTsOpFileText(op_def, \"\", &ts_file_text);\n \n   ExpectDoesNotContainStr(ts_file_text, \"DeprecatedFoo\");\n }\n \n TEST(TsOpGenTest, MultiOutput) {\n-  const string op_def = R\"(\n+  const std::string op_def = R\"(\n op {\n   name: \"MultiOutputFoo\"\n   input_arg {\n@@ -212,20 +213,20 @@ op {\n }\n )\";\n \n-  string ts_file_text;\n+  std::string ts_file_text;\n   GenerateTsOpFileText(op_def, \"\", &ts_file_text);\n \n-  const string expected = R\"(\n+  const std::string expected = R\"(\n export function MultiOutputFoo(input: tfc.Tensor): tfc.Tensor[] {\n )\";\n   ExpectContainsStr(ts_file_text, expected);\n }\n \n TEST(TsOpGenTest, OpAttrs) {\n-  string ts_file_text;\n+  std::string ts_file_text;\n   GenerateTsOpFileText(\"\", \"\", &ts_file_text);\n \n-  const string expectedFooAttrs = R\"(\n+  const std::string expectedFooAttrs = R\"(\n   const opAttrs = [\n     createTensorsTypeOpAttr('T', images),\n     {name: 'N', type: nodeBackend().binding.TF_ATTR_INT, value: images.length}"
        }
    ],
    "stats": {
        "total": 61,
        "additions": 31,
        "deletions": 30
    }
}