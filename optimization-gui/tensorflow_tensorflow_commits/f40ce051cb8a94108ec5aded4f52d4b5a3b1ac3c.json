{
    "author": "lrdxgm",
    "message": "Use `ABSL_ATTRIBUTE_LIFETIME_BOUND` on `GetTensorData` to detect potential dangling pointers.\n\nPiperOrigin-RevId: 816808376",
    "sha": "f40ce051cb8a94108ec5aded4f52d4b5a3b1ac3c",
    "files": [
        {
            "sha": "7b2979998fb40247e59227520c7e16790d3e35de",
            "filename": "tensorflow/lite/kernels/internal/BUILD",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f40ce051cb8a94108ec5aded4f52d4b5a3b1ac3c/tensorflow%2Flite%2Fkernels%2Finternal%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f40ce051cb8a94108ec5aded4f52d4b5a3b1ac3c/tensorflow%2Flite%2Fkernels%2Finternal%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Finternal%2FBUILD?ref=f40ce051cb8a94108ec5aded4f52d4b5a3b1ac3c",
            "patch": "@@ -738,9 +738,10 @@ cc_library(\n     compatible_with = get_compatible_with_portable(),\n     copts = tflite_copts(),\n     deps = [\n-        \":types\",\n+        \":runtime_shape\",\n         \"//tensorflow/lite/core:macros\",\n         \"//tensorflow/lite/core/c:common\",\n+        \"@com_google_absl//absl/base:core_headers\",\n     ],\n )\n \n@@ -773,11 +774,13 @@ cc_library(\n     compatible_with = get_compatible_with_portable(),\n     copts = tflite_copts(),\n     deps = [\n+        \":runtime_shape\",\n         \":tensor_ctypes\",\n         \":types\",\n         \"//tensorflow/lite:macros\",\n         \"//tensorflow/lite:string_util\",\n         \"//tensorflow/lite/core/c:common\",\n+        \"@com_google_absl//absl/base:core_headers\",\n     ],\n )\n \n@@ -795,11 +798,13 @@ cc_library(\n     }),\n     copts = tflite_copts(),\n     deps = [\n+        \":runtime_shape\",\n         \":tensor_ctypes\",\n         \":types\",\n         \"//tensorflow/lite:macros\",\n         \"//tensorflow/lite:string_util\",\n         \"//tensorflow/lite/core/c:common\",\n+        \"@com_google_absl//absl/base:core_headers\",\n     ],\n )\n "
        },
        {
            "sha": "85526ffd69f802bb087db14c9feabdf9f9f8736a",
            "filename": "tensorflow/lite/kernels/internal/tensor_ctypes.h",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f40ce051cb8a94108ec5aded4f52d4b5a3b1ac3c/tensorflow%2Flite%2Fkernels%2Finternal%2Ftensor_ctypes.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f40ce051cb8a94108ec5aded4f52d4b5a3b1ac3c/tensorflow%2Flite%2Fkernels%2Finternal%2Ftensor_ctypes.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fkernels%2Finternal%2Ftensor_ctypes.h?ref=f40ce051cb8a94108ec5aded4f52d4b5a3b1ac3c",
            "patch": "@@ -15,21 +15,24 @@ limitations under the License.\n #ifndef TENSORFLOW_LITE_KERNELS_INTERNAL_TENSOR_CTYPES_H_\n #define TENSORFLOW_LITE_KERNELS_INTERNAL_TENSOR_CTYPES_H_\n \n+#include <cstdint>\n #include <vector>\n \n+#include \"absl/base/attributes.h\"\n #include \"tensorflow/lite/core/c/common.h\"\n #include \"tensorflow/lite/core/macros.h\"\n-#include \"tensorflow/lite/kernels/internal/types.h\"\n+#include \"tensorflow/lite/kernels/internal/runtime_shape.h\"\n \n namespace tflite {\n \n template <typename T>\n-inline T* GetTensorData(TfLiteTensor* tensor) {\n+inline T* GetTensorData(TfLiteTensor* tensor ABSL_ATTRIBUTE_LIFETIME_BOUND) {\n   return tensor != nullptr ? reinterpret_cast<T*>(tensor->data.raw) : nullptr;\n }\n \n template <typename T>\n-inline const T* GetTensorData(const TfLiteTensor* tensor) {\n+inline const T* GetTensorData(\n+    const TfLiteTensor* tensor ABSL_ATTRIBUTE_LIFETIME_BOUND) {\n   return tensor != nullptr ? reinterpret_cast<const T*>(tensor->data.raw)\n                            : nullptr;\n }"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 12,
        "deletions": 4
    }
}