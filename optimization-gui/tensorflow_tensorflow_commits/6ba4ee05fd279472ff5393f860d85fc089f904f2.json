{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 848081454",
    "sha": "6ba4ee05fd279472ff5393f860d85fc089f904f2",
    "files": [
        {
            "sha": "154eb09ee9d5ffd4924f1cedc017989952ba4110",
            "filename": "tensorflow/core/distributed_runtime/rpc/eager/grpc_eager_client.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6ba4ee05fd279472ff5393f860d85fc089f904f2/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6ba4ee05fd279472ff5393f860d85fc089f904f2/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_client.cc?ref=6ba4ee05fd279472ff5393f860d85fc089f904f2",
            "patch": "@@ -127,7 +127,7 @@ class GrpcEagerClientThread : public core::RefCounted {\n class GrpcEagerClient : public EagerClient {\n  public:\n   GrpcEagerClient(const tensorflow::SharedGrpcChannelPtr& channel,\n-                  GrpcEagerClientThread* thread, const string& target)\n+                  GrpcEagerClientThread* thread, const std::string& target)\n       : stub_(channel), thread_(thread), target_(target) {\n     // Hold a reference to make sure the corresponding EagerClientThread\n     // outlives the client.\n@@ -266,13 +266,13 @@ class GrpcEagerClient : public EagerClient {\n  private:\n   ::grpc::GenericStub stub_;\n   const GrpcEagerClientThread* thread_;\n-  const string target_;\n+  const std::string target_;\n \n   ::grpc::CompletionQueue* cq_;\n \n   mutable mutex mu_;\n \n-  std::unordered_map<uint64, StreamingRPCDispatcher<EnqueueResponse>>\n+  std::unordered_map<uint64_t, StreamingRPCDispatcher<EnqueueResponse>>\n       enqueue_dispatchers_ TF_GUARDED_BY(mu_);\n \n   StatusCallback callback_wrapper(StatusCallback done) {\n@@ -313,7 +313,7 @@ class GrpcEagerClientCache : public EagerClientCache {\n \n   ~GrpcEagerClientCache() override { threads_.clear(); }\n \n-  absl::Status GetClient(const string& target,\n+  absl::Status GetClient(const std::string& target,\n                          core::RefCountPtr<EagerClient>* client) override {\n     mutex_lock l(clients_mu_);\n     auto it = clients_.find(target);\n@@ -342,7 +342,7 @@ class GrpcEagerClientCache : public EagerClientCache {\n       TF_GUARDED_BY(assignment_mu_);\n   size_t next_round_robin_assignment_ TF_GUARDED_BY(assignment_mu_);\n \n-  size_t AssignClientToThread(const string& target) {\n+  size_t AssignClientToThread(const std::string& target) {\n     // Round-robin target assignment, but keeps the same target on the same\n     // polling thread always, as this is important for gRPC performance\n     mutex_lock lock(assignment_mu_);\n@@ -358,7 +358,7 @@ class GrpcEagerClientCache : public EagerClientCache {\n \n   std::shared_ptr<tensorflow::GrpcChannelCache> cache_;\n   mutable mutex clients_mu_;\n-  std::unordered_map<string, core::RefCountPtr<EagerClient>> clients_\n+  std::unordered_map<std::string, core::RefCountPtr<EagerClient>> clients_\n       TF_GUARDED_BY(clients_mu_);\n   std::vector<core::RefCountPtr<GrpcEagerClientThread>> threads_;\n };"
        },
        {
            "sha": "3a11ef95274fbcba8b5c189e531f98559f68bb72",
            "filename": "tensorflow/core/distributed_runtime/rpc/eager/grpc_eager_client_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6ba4ee05fd279472ff5393f860d85fc089f904f2/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_client_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6ba4ee05fd279472ff5393f860d85fc089f904f2/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_client_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_client_test.cc?ref=6ba4ee05fd279472ff5393f860d85fc089f904f2",
            "patch": "@@ -48,7 +48,7 @@ TEST(GrpcEagerClientCache, TestGetClientThreadSafety) {\n \n   for (int i = 0; i < num_calls; i++) {\n     Env::Default()->SchedClosure([&client_cache, i, &counter]() {\n-      string target = absl::StrCat(\"/job:worker/replica:0/task:\", i);\n+      std::string target = absl::StrCat(\"/job:worker/replica:0/task:\", i);\n       core::RefCountPtr<EagerClient> eager_client;\n       absl::Status s = client_cache->GetClient(target, &eager_client);\n       // With 6 tasks added to the job, querying client for 0--5 should be OK,"
        },
        {
            "sha": "33d567c56a0a6358fc3ea53f5aa0df38b97ab5b0",
            "filename": "tensorflow/core/distributed_runtime/rpc/eager/grpc_eager_service_impl.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6ba4ee05fd279472ff5393f860d85fc089f904f2/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_service_impl.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6ba4ee05fd279472ff5393f860d85fc089f904f2/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_service_impl.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_service_impl.cc?ref=6ba4ee05fd279472ff5393f860d85fc089f904f2",
            "patch": "@@ -45,7 +45,7 @@ GrpcEagerServiceImpl::GrpcEagerServiceImpl(\n }\n \n absl::Status GrpcEagerServiceImpl::CreateMasterContext(\n-    const tensorflow::uint64 context_id, EagerContext* context) {\n+    const uint64_t context_id, EagerContext* context) {\n   return local_impl_.CreateMasterContext(context_id, context);\n }\n "
        },
        {
            "sha": "62ee6e9f13a9f0403349d845c010d28c02860006",
            "filename": "tensorflow/core/distributed_runtime/rpc/eager/grpc_eager_service_impl.h",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6ba4ee05fd279472ff5393f860d85fc089f904f2/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_service_impl.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6ba4ee05fd279472ff5393f860d85fc089f904f2/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_service_impl.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdistributed_runtime%2Frpc%2Feager%2Fgrpc_eager_service_impl.h?ref=6ba4ee05fd279472ff5393f860d85fc089f904f2",
            "patch": "@@ -50,8 +50,7 @@ class GrpcEagerServiceImpl : public tsl::AsyncServiceInterface {\n   virtual ~GrpcEagerServiceImpl() {}\n \n   // Create a master context in eager service.\n-  absl::Status CreateMasterContext(tensorflow::uint64 context_id,\n-                                   EagerContext* context);\n+  absl::Status CreateMasterContext(uint64_t context_id, EagerContext* context);\n \n   void HandleRPCsLoop() override;\n   void Shutdown() override;\n@@ -136,7 +135,7 @@ class GrpcEagerServiceImpl : public tsl::AsyncServiceInterface {\n       // streaming connection.\n       absl::Status status = local_impl_.Enqueue(\n           /*call_opts=*/nullptr, &call->request(), call->mutable_response(),\n-          reinterpret_cast<uint64>(static_cast<void*>(call)));\n+          reinterpret_cast<uint64_t>(static_cast<void*>(call)));\n \n       if (status.ok()) {\n         VLOG(1) << \"local_impl_.Enqueue completed successfully\";"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 10,
        "deletions": 11
    }
}