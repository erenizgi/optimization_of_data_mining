{
    "author": "tensorflower-gardener",
    "message": "Disable capturing of dot RHS operands\n\nThis is proving to be unreliable.\n\nPiperOrigin-RevId: 826395008",
    "sha": "8734ec41d571dab7cb2b68c4ad1c3b8b1316544f",
    "files": [
        {
            "sha": "c04b948b4a4928c898968bdb4569eb0acef7d4a9",
            "filename": "third_party/xla/xla/service/cpu/thunk_emitter.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8734ec41d571dab7cb2b68c4ad1c3b8b1316544f/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fthunk_emitter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8734ec41d571dab7cb2b68c4ad1c3b8b1316544f/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fthunk_emitter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fthunk_emitter.cc?ref=8734ec41d571dab7cb2b68c4ad1c3b8b1316544f",
            "patch": "@@ -1553,9 +1553,9 @@ absl::StatusOr<ThunkSequence> ThunkEmitter::EmitYnnFusionThunk(\n   absl::Span<const int64_t> captured_arguments_ids;\n   if (instruction->opcode() == HloOpcode::kDot) {\n     const HloDotInstruction* dot = Cast<HloDotInstruction>(instruction);\n-    // TODO(ashaposhnikov): Revisit this if we ever get a reliable way\n-    // to determine that RHS is constant.\n-    bool capture_rhs = HloPredicateIsOp<HloOpcode::kParameter>(dot->operand(1));\n+    // TODO(b/455903737): If we know the RHS is a constant, we should capture it\n+    // here.\n+    bool capture_rhs = false;\n     // Construct YNNPACK subgraph builder from the dot instruction.\n     TF_ASSIGN_OR_RETURN(builder, EmitYnnDotBuilder(dot, capture_rhs));\n     static constexpr int64_t kCapturedIds[1] = {1};"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}