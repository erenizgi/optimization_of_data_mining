{
    "author": "tensorflower-gardener",
    "message": "Merge pull request #81283 from linux-on-ibm-z:TF_fix\n\nPiperOrigin-RevId: 803054541",
    "sha": "3582f8928873adf1290a285932e42a369f404c0f",
    "files": [
        {
            "sha": "c91df85e3da365100c44dc6e5e6701120289f039",
            "filename": "tensorflow/core/framework/tensor.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3582f8928873adf1290a285932e42a369f404c0f/tensorflow%2Fcore%2Fframework%2Ftensor.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3582f8928873adf1290a285932e42a369f404c0f/tensorflow%2Fcore%2Fframework%2Ftensor.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fframework%2Ftensor.cc?ref=3582f8928873adf1290a285932e42a369f404c0f",
            "patch": "@@ -650,6 +650,12 @@ TensorBuffer* Int4OrInt2FromProtoField(Allocator* a, const TensorProto& in,\n   const int64_t in_n = in.int_val().size();\n   auto begin = in.int_val().begin();\n   if (n <= in_n) {\n+// swapping bits of the data pointer for big endian systems\n+#if __BYTE_ORDER__ == __ORDER_BIG_ENDIAN__\n+    for (int64_t i = 0; i < n; ++i) {\n+      data[i] = ((data[i] & 0xF0) >> 4) | ((data[i] & 0x0F) << 4);\n+    }\n+#endif\n     std::copy_n(begin, n, data);\n   } else if (in_n > 0) {\n     std::copy_n(begin, in_n, data);"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 6,
        "deletions": 0
    }
}