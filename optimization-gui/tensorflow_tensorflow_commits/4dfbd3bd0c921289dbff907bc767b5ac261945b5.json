{
    "author": "beckerhe",
    "message": "Add proto serialization for RocmComputeCapability\n\nPiperOrigin-RevId: 825103988",
    "sha": "4dfbd3bd0c921289dbff907bc767b5ac261945b5",
    "files": [
        {
            "sha": "1a6bfb43adc710b275af73ab6fdad4cf8a7044c4",
            "filename": "third_party/xla/xla/stream_executor/rocm/BUILD",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4dfbd3bd0c921289dbff907bc767b5ac261945b5/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4dfbd3bd0c921289dbff907bc767b5ac261945b5/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD?ref=4dfbd3bd0c921289dbff907bc767b5ac261945b5",
            "patch": "@@ -38,6 +38,17 @@ cc_library(\n     ],\n )\n \n+xla_cc_test(\n+    name = \"rocm_compute_capability_test\",\n+    srcs = [\"rocm_compute_capability_test.cc\"],\n+    deps = [\n+        \":rocm_compute_capability\",\n+        \"//xla/tsl/util/proto:proto_matchers\",\n+        \"@com_google_absl//absl/strings:string_view\",\n+        \"@com_google_googletest//:gtest_main\",\n+    ],\n+)\n+\n cc_library(\n     name = \"rocm_context\",\n     srcs = [\"rocm_context.cc\"],"
        },
        {
            "sha": "45efd17b32e7b1790827e9c741a5592379b827a0",
            "filename": "third_party/xla/xla/stream_executor/rocm/rocm_compute_capability.h",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4dfbd3bd0c921289dbff907bc767b5ac261945b5/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_compute_capability.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4dfbd3bd0c921289dbff907bc767b5ac261945b5/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_compute_capability.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_compute_capability.h?ref=4dfbd3bd0c921289dbff907bc767b5ac261945b5",
            "patch": "@@ -61,6 +61,11 @@ class RocmComputeCapability {\n     return proto;\n   }\n \n+  static RocmComputeCapability FromProto(\n+      const RocmComputeCapabilityProto& proto) {\n+    return RocmComputeCapability{proto.gcn_arch_name()};\n+  }\n+\n   bool operator==(const RocmComputeCapability& other) const {\n     return gcn_arch_name_ == other.gcn_arch_name_;\n   }"
        },
        {
            "sha": "ed9eba6c545e170aa87b1eb85c1de756a993a0b5",
            "filename": "third_party/xla/xla/stream_executor/rocm/rocm_compute_capability_test.cc",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4dfbd3bd0c921289dbff907bc767b5ac261945b5/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_compute_capability_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4dfbd3bd0c921289dbff907bc767b5ac261945b5/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_compute_capability_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_compute_capability_test.cc?ref=4dfbd3bd0c921289dbff907bc767b5ac261945b5",
            "patch": "@@ -0,0 +1,44 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#include \"xla/stream_executor/rocm/rocm_compute_capability.h\"\n+\n+#include <string>\n+\n+#include <gmock/gmock.h>\n+#include <gtest/gtest.h>\n+#include \"absl/strings/string_view.h\"\n+#include \"xla/tsl/util/proto/proto_matchers.h\"\n+\n+namespace stream_executor::rocm {\n+namespace {\n+\n+constexpr absl::string_view kExampleGcnArchName = \"gfx1010:xnack-\";\n+\n+TEST(RocmComputeCapabilityTest, FromProto) {\n+  RocmComputeCapabilityProto proto;\n+  proto.set_gcn_arch_name(kExampleGcnArchName);\n+  RocmComputeCapability cc = RocmComputeCapability::FromProto(proto);\n+  EXPECT_EQ(cc, RocmComputeCapability{std::string(kExampleGcnArchName)});\n+}\n+\n+TEST(RocmComputeCapabilityTest, ToProto) {\n+  RocmComputeCapability cc{std::string(kExampleGcnArchName)};\n+  EXPECT_THAT(cc.ToProto(), tsl::proto_testing::EqualsProto(\n+                                R\"pb(gcn_arch_name: \"gfx1010:xnack-\")pb\"));\n+}\n+\n+}  // namespace\n+}  // namespace stream_executor::rocm"
        }
    ],
    "stats": {
        "total": 60,
        "additions": 60,
        "deletions": 0
    }
}