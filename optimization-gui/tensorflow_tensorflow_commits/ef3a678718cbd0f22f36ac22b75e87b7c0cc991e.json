{
    "author": "ezhulenev",
    "message": "[xla:cpu] Fix BufferAllocationInfo::InOutParameter constructor\n\nPiperOrigin-RevId: 820456592",
    "sha": "ef3a678718cbd0f22f36ac22b75e87b7c0cc991e",
    "files": [
        {
            "sha": "3447105aed663d611b7e18f1e70dbe10b111cab9",
            "filename": "third_party/xla/xla/backends/cpu/buffer_allocation_info.h",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ef3a678718cbd0f22f36ac22b75e87b7c0cc991e/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fbuffer_allocation_info.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ef3a678718cbd0f22f36ac22b75e87b7c0cc991e/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fbuffer_allocation_info.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fbuffer_allocation_info.h?ref=ef3a678718cbd0f22f36ac22b75e87b7c0cc991e",
            "patch": "@@ -113,7 +113,8 @@ class BufferAllocationInfo {\n   static BufferAllocationInfo InOutParameter(uint64_t size,\n                                              int32_t entry_param_number,\n                                              int32_t result_number) {\n-    return BufferAllocationInfo(Kind::kParameter, size, entry_param_number);\n+    return BufferAllocationInfo(Kind::kParameter, size, entry_param_number,\n+                                result_number);\n   }\n \n   static BufferAllocationInfo Result(uint64_t size, int32_t result_number) {\n@@ -160,15 +161,15 @@ class BufferAllocationInfo {\n         result_number_(result_number) {}\n \n   static uint64_t Pack(Kind kind, uint64_t size) {\n-    return (static_cast<uint64_t>(size) << 2) | static_cast<uint64_t>(kind);\n+    return (static_cast<uint64_t>(size) << 4) | static_cast<uint64_t>(kind);\n   }\n \n   static inline constexpr Kind UnpackKind(uint64_t packed) {\n-    return static_cast<Kind>((packed << 62) >> 62);\n+    return static_cast<Kind>((packed << 60) >> 60);\n   }\n \n   static inline constexpr uint64_t UnpackSize(uint64_t packed) {\n-    return packed >> 2;\n+    return packed >> 4;\n   }\n \n   static absl::string_view ToString(Kind kind) {\n@@ -186,8 +187,8 @@ class BufferAllocationInfo {\n     }\n   }\n \n-  Kind kind_ : 2;\n-  uint64_t size_ : 62;\n+  Kind kind_ : 4;\n+  uint64_t size_ : 60;\n   int32_t entry_param_number_ = -1;\n   int32_t result_number_ = -1;\n };"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 7,
        "deletions": 6
    }
}