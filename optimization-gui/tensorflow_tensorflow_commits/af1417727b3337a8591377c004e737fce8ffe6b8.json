{
    "author": "tensorflower-gardener",
    "message": "Migrate memory_space_assignment_test_base to PjRt.\n\nReverts 7a329ab980b0c80c399ed9363e13a6a721bd0e86\n\nPiperOrigin-RevId: 833581139",
    "sha": "af1417727b3337a8591377c004e737fce8ffe6b8",
    "files": [
        {
            "sha": "908768a4b8cd77bf0806141df2f0fd6ed52f93ba",
            "filename": "third_party/xla/xla/service/memory_space_assignment/BUILD",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/af1417727b3337a8591377c004e737fce8ffe6b8/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/af1417727b3337a8591377c004e737fce8ffe6b8/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2FBUILD?ref=af1417727b3337a8591377c004e737fce8ffe6b8",
            "patch": "@@ -6,6 +6,7 @@ load(\n     \"xla_cc_test\",\n     \"xla_py_proto_library\",\n )\n+load(\"//xla/tests:build_defs.bzl\", \"xla_test\")\n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n load(\n     \"//xla/tsl/platform:build_config.bzl\",\n@@ -78,9 +79,15 @@ cc_library(\n     ],\n )\n \n-xla_cc_test(\n+xla_test(\n     name = \"memory_space_assignment_test\",\n     srcs = [\"memory_space_assignment_test.cc\"],\n+    backends = [\n+        \"cpu\",\n+    ],\n+    tags = [\n+        \"test_migrated_to_hlo_runner_pjrt\",\n+    ],\n     deps = [\n         \":algorithm\",\n         \":allocation\",\n@@ -193,7 +200,7 @@ cc_library(\n         \"//xla/service:hlo_cost_analysis\",\n         \"//xla/service:hlo_value\",\n         \"//xla/service/cost_modelling:op_cost\",\n-        \"//xla/tests:hlo_test_base\",\n+        \"//xla/tests:hlo_pjrt_test_base\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\","
        },
        {
            "sha": "84d8cadfad7461c5318741c0568801ad9ddc07e2",
            "filename": "third_party/xla/xla/service/memory_space_assignment/memory_space_assignment_test_base.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/af1417727b3337a8591377c004e737fce8ffe6b8/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2Fmemory_space_assignment_test_base.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/af1417727b3337a8591377c004e737fce8ffe6b8/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2Fmemory_space_assignment_test_base.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2Fmemory_space_assignment_test_base.h?ref=af1417727b3337a8591377c004e737fce8ffe6b8",
            "patch": "@@ -54,7 +54,7 @@ limitations under the License.\n #include \"xla/service/memory_space_assignment/utils.h\"\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n-#include \"xla/tests/hlo_test_base.h\"\n+#include \"xla/tests/hlo_pjrt_test_base.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n #include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/statusor.h\"\n@@ -92,7 +92,7 @@ class TestBufferIntervalComparator : public BufferIntervalComparator {\n   MsaBufferIntervalCompare compare_method_;\n };\n \n-class MemorySpaceAssignmentTestBase : public HloTestBase {\n+class MemorySpaceAssignmentTestBase : public HloPjRtTestBase {\n  protected:\n   // We use the following two memory space values to describe the default (slow\n   // and large) and alternate (fast and small) memory spaces."
        }
    ],
    "stats": {
        "total": 15,
        "additions": 11,
        "deletions": 4
    }
}