{
    "author": "tensorflower-gardener",
    "message": "Integrate LLVM at llvm/llvm-project@dea330b38d9c\n\nUpdates LLVM usage to match\n[dea330b38d9c](https://github.com/llvm/llvm-project/commit/dea330b38d9c)\n\nPiperOrigin-RevId: 836460028",
    "sha": "5e73b75a05eaba3aef095fdfded88e6e9419e040",
    "files": [
        {
            "sha": "8327093e3c33e2911bd9a318f3777db126788e65",
            "filename": "third_party/xla/third_party/llvm/generated.patch",
            "status": "modified",
            "additions": 19,
            "deletions": 314,
            "changes": 333,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5e73b75a05eaba3aef095fdfded88e6e9419e040/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5e73b75a05eaba3aef095fdfded88e6e9419e040/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch?ref=5e73b75a05eaba3aef095fdfded88e6e9419e040",
            "patch": "@@ -1,315 +1,20 @@\n Auto generated patch. Do not edit or delete it, even if empty.\n-diff -ruN --strip-trailing-cr a/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp b/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n---- a/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n-+++ b/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n-@@ -1,4 +1,4 @@\n--// RUN: %clangxx -Xclang -verify -Wno-vla -fopenmp -fopenmp-version=60 -x c++ -S -emit-llvm %s -o - | FileCheck %s\n-+// RUN: %clang_cc1 -verify -fopenmp -fopenmp-version=60 -x c++ -emit-llvm %s -o - | FileCheck %s\n- // expected-no-diagnostics\n- #ifndef HEADER\n- #define HEADER\n-diff -ruN --strip-trailing-cr a/libcxx/docs/ReleaseNotes/22.rst b/libcxx/docs/ReleaseNotes/22.rst\n---- a/libcxx/docs/ReleaseNotes/22.rst\n-+++ b/libcxx/docs/ReleaseNotes/22.rst\n-@@ -67,8 +67,8 @@\n-   by up to 2.5x\n- - The performance of ``erase(iterator, iterator)`` in the unordered containers has been improved by up to 1.9x\n- - The performance of ``map::insert_or_assign`` has been improved by up to 2x\n--- ``ofstream::write`` and ``ifstream::read`` have been optimized to pass through large reads and writes to system calls\n--  directly instead of copying them in chunks.\n-+- ``ofstream::write`` has been optimized to pass through large strings to system calls directly instead of copying them\n-+  in chunks into a buffer.\n- - Multiple internal types have been refactored to use ``[[no_unique_address]]``, resulting in faster compile times and\n-   reduced debug information.\n- \n-diff -ruN --strip-trailing-cr a/libcxx/include/fstream b/libcxx/include/fstream\n---- a/libcxx/include/fstream\n-+++ b/libcxx/include/fstream\n-@@ -308,25 +308,6 @@\n-     return basic_streambuf<_CharT, _Traits>::xsputn(__str, __len);\n-   }\n- \n--  _LIBCPP_HIDE_FROM_ABI_VIRTUAL streamsize xsgetn(char_type* __str, streamsize __len) override {\n--    if (__always_noconv_) {\n--      const streamsize __n = std::min(this->egptr() - this->gptr(), __len);\n--      if (__n != 0) {\n--        traits_type::copy(__str, this->gptr(), __n);\n--        this->__gbump_ptrdiff(__n);\n--      }\n--      const streamsize __remainder    = __len - __n;\n--      const streamsize __buffer_space = this->egptr() - this->eback();\n--\n--      if (__remainder >= __buffer_space)\n--        return std::fread(__str + __n, sizeof(char_type), __remainder, __file_) + __n;\n--      else if (__remainder > 0)\n--        return basic_streambuf<_CharT, _Traits>::xsgetn(__str + __n, __remainder) + __n;\n--      return __n;\n--    }\n--    return basic_streambuf<_CharT, _Traits>::xsgetn(__str, __len);\n--  }\n--\n- private:\n-   char* __extbuf_;\n-   const char* __extbufnext_;\n-diff -ruN --strip-trailing-cr a/libcxx/test/benchmarks/streams/fstream.bench.cpp b/libcxx/test/benchmarks/streams/fstream.bench.cpp\n---- a/libcxx/test/benchmarks/streams/fstream.bench.cpp\n-+++ b/libcxx/test/benchmarks/streams/fstream.bench.cpp\n-@@ -1,43 +0,0 @@\n--//===----------------------------------------------------------------------===//\n--//\n--// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.\n--// See https://llvm.org/LICENSE.txt for license information.\n--// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception\n--//\n--//===----------------------------------------------------------------------===//\n--\n--#include <fstream>\n--#include <vector>\n--\n--#include <benchmark/benchmark.h>\n--\n--static void bm_ofstream_write(benchmark::State& state) {\n--  std::vector<char> buffer;\n--  buffer.resize(16384);\n--\n--  std::ofstream stream(\"/dev/null\");\n--\n--  for (auto _ : state)\n--    stream.write(buffer.data(), buffer.size());\n--}\n--BENCHMARK(bm_ofstream_write);\n--\n--static void bm_ifstream_read(benchmark::State& state) {\n--  std::vector<char> buffer;\n--  buffer.resize(16384);\n--\n--  std::ofstream gen_testfile(\"testfile\");\n--  gen_testfile.write(buffer.data(), buffer.size());\n--\n--  std::ifstream stream(\"testfile\");\n--  assert(stream);\n--\n--  for (auto _ : state) {\n--    stream.read(buffer.data(), buffer.size());\n--    benchmark::DoNotOptimize(buffer);\n--    stream.seekg(0);\n--  }\n--}\n--BENCHMARK(bm_ifstream_read);\n--\n--BENCHMARK_MAIN();\n-diff -ruN --strip-trailing-cr a/libcxx/test/benchmarks/streams/ofstream.bench.cpp b/libcxx/test/benchmarks/streams/ofstream.bench.cpp\n---- a/libcxx/test/benchmarks/streams/ofstream.bench.cpp\n-+++ b/libcxx/test/benchmarks/streams/ofstream.bench.cpp\n-@@ -0,0 +1,25 @@\n-+//===----------------------------------------------------------------------===//\n-+//\n-+// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.\n-+// See https://llvm.org/LICENSE.txt for license information.\n-+// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception\n-+//\n-+//===----------------------------------------------------------------------===//\n-+\n-+#include <fstream>\n-+#include <vector>\n-+\n-+#include <benchmark/benchmark.h>\n-+\n-+static void bm_write(benchmark::State& state) {\n-+  std::vector<char> buffer;\n-+  buffer.resize(16384);\n-+\n-+  std::ofstream stream(\"/dev/null\");\n-+\n-+  for (auto _ : state)\n-+    stream.write(buffer.data(), buffer.size());\n-+}\n-+BENCHMARK(bm_write);\n-+\n-+BENCHMARK_MAIN();\n-diff -ruN --strip-trailing-cr a/libcxx/test/libcxx/input.output/file.streams/fstreams/filebuf/traits_mismatch.verify.cpp b/libcxx/test/libcxx/input.output/file.streams/fstreams/filebuf/traits_mismatch.verify.cpp\n---- a/libcxx/test/libcxx/input.output/file.streams/fstreams/filebuf/traits_mismatch.verify.cpp\n-+++ b/libcxx/test/libcxx/input.output/file.streams/fstreams/filebuf/traits_mismatch.verify.cpp\n-@@ -19,4 +19,4 @@\n- \n- std::basic_filebuf<char, std::char_traits<wchar_t> > f;\n- // expected-error-re@*:* {{static assertion failed{{.*}}traits_type::char_type must be the same type as CharT}}\n--// expected-error@*:* 11 {{only virtual member functions can be marked 'override'}}\n-+// expected-error@*:* 10 {{only virtual member functions can be marked 'override'}}\n-diff -ruN --strip-trailing-cr a/libcxx/test/libcxx/input.output/file.streams/fstreams/traits_mismatch.verify.cpp b/libcxx/test/libcxx/input.output/file.streams/fstreams/traits_mismatch.verify.cpp\n---- a/libcxx/test/libcxx/input.output/file.streams/fstreams/traits_mismatch.verify.cpp\n-+++ b/libcxx/test/libcxx/input.output/file.streams/fstreams/traits_mismatch.verify.cpp\n-@@ -21,7 +21,7 @@\n- // expected-error-re@*:* {{static assertion failed{{.*}}traits_type::char_type must be the same type as CharT}}\n- // expected-error-re@*:* {{static assertion failed{{.*}}traits_type::char_type must be the same type as CharT}}\n- \n--// expected-error@*:* 13 {{only virtual member functions can be marked 'override'}}\n-+// expected-error@*:* 12 {{only virtual member functions can be marked 'override'}}\n- \n- // FIXME: As of commit r324062 Clang incorrectly generates a diagnostic about mismatching\n- // exception specifications for types which are already invalid for one reason or another.\n-diff -ruN --strip-trailing-cr a/lldb/unittests/Editline/EditlineTest.cpp b/lldb/unittests/Editline/EditlineTest.cpp\n---- a/lldb/unittests/Editline/EditlineTest.cpp\n-+++ b/lldb/unittests/Editline/EditlineTest.cpp\n-@@ -9,6 +9,8 @@\n- #include \"lldb/Host/Config.h\"\n- #include \"lldb/Host/File.h\"\n- #include \"lldb/Host/HostInfo.h\"\n-+#include \"lldb/lldb-forward.h\"\n-+#include \"llvm/Testing/Support/Error.h\"\n- \n- #if LLDB_ENABLE_LIBEDIT\n- \n-@@ -25,7 +27,6 @@\n- #include \"TestingSupport/SubsystemRAII.h\"\n- #include \"lldb/Host/Editline.h\"\n- #include \"lldb/Host/FileSystem.h\"\n--#include \"lldb/Host/Pipe.h\"\n- #include \"lldb/Host/PseudoTerminal.h\"\n- #include \"lldb/Host/StreamFile.h\"\n- #include \"lldb/Utility/Status.h\"\n-@@ -37,27 +38,6 @@\n- const size_t TIMEOUT_MILLIS = 5000;\n- }\n- \n--class FilePointer {\n--public:\n--  FilePointer() = delete;\n--\n--  FilePointer(const FilePointer &) = delete;\n--\n--  FilePointer(FILE *file_p) : _file_p(file_p) {}\n--\n--  ~FilePointer() {\n--    if (_file_p != nullptr) {\n--      const int close_result = fclose(_file_p);\n--      EXPECT_EQ(0, close_result);\n--    }\n--  }\n--\n--  operator FILE *() { return _file_p; }\n--\n--private:\n--  FILE *_file_p;\n--};\n--\n- /**\n-  Wraps an Editline class, providing a simple way to feed\n-  input (as if from the keyboard) and receive output from Editline.\n-@@ -90,44 +70,39 @@\n-   std::recursive_mutex output_mutex;\n-   std::unique_ptr<lldb_private::Editline> _editline_sp;\n- \n--  PseudoTerminal _pty;\n--  int _pty_primary_fd = -1;\n--  int _pty_secondary_fd = -1;\n--\n--  std::unique_ptr<FilePointer> _el_secondary_file;\n-+  lldb::FileSP _el_primary_file;\n-+  lldb::FileSP _el_secondary_file;\n- };\n- \n--EditlineAdapter::EditlineAdapter()\n--    : _editline_sp(), _pty(), _el_secondary_file() {\n-+EditlineAdapter::EditlineAdapter() : _editline_sp(), _el_secondary_file() {\n-   lldb_private::Status error;\n-+  PseudoTerminal pty;\n- \n-   // Open the first primary pty available.\n--  EXPECT_THAT_ERROR(_pty.OpenFirstAvailablePrimary(O_RDWR), llvm::Succeeded());\n-+  EXPECT_THAT_ERROR(pty.OpenFirstAvailablePrimary(O_RDWR), llvm::Succeeded());\n-+  // Open the corresponding secondary pty.\n-+  EXPECT_THAT_ERROR(pty.OpenSecondary(O_RDWR), llvm::Succeeded());\n- \n-   // Grab the primary fd.  This is a file descriptor we will:\n-   // (1) write to when we want to send input to editline.\n-   // (2) read from when we want to see what editline sends back.\n--  _pty_primary_fd = _pty.GetPrimaryFileDescriptor();\n--\n--  // Open the corresponding secondary pty.\n--  EXPECT_THAT_ERROR(_pty.OpenSecondary(O_RDWR), llvm::Succeeded());\n--  _pty_secondary_fd = _pty.GetSecondaryFileDescriptor();\n--\n--  _el_secondary_file.reset(new FilePointer(fdopen(_pty_secondary_fd, \"rw\")));\n--  EXPECT_FALSE(nullptr == *_el_secondary_file);\n--  if (*_el_secondary_file == nullptr)\n--    return;\n-+  _el_primary_file.reset(\n-+      new NativeFile(pty.ReleasePrimaryFileDescriptor(),\n-+                     lldb_private::NativeFile::eOpenOptionReadWrite, true));\n-+\n-+  _el_secondary_file.reset(\n-+      new NativeFile(pty.ReleaseSecondaryFileDescriptor(),\n-+                     lldb_private::NativeFile::eOpenOptionReadWrite, true));\n- \n-   lldb::LockableStreamFileSP output_stream_sp =\n--      std::make_shared<LockableStreamFile>(*_el_secondary_file,\n--                                           NativeFile::Unowned, output_mutex);\n-+      std::make_shared<LockableStreamFile>(_el_secondary_file, output_mutex);\n-   lldb::LockableStreamFileSP error_stream_sp =\n--      std::make_shared<LockableStreamFile>(*_el_secondary_file,\n--                                           NativeFile::Unowned, output_mutex);\n-+      std::make_shared<LockableStreamFile>(_el_secondary_file, output_mutex);\n- \n-   // Create an Editline instance.\n-   _editline_sp.reset(new lldb_private::Editline(\n--      \"gtest editor\", *_el_secondary_file, output_stream_sp, error_stream_sp,\n-+      \"gtest editor\", _el_secondary_file->GetStream(), output_stream_sp,\n-+      error_stream_sp,\n-       /*color=*/false));\n-   _editline_sp->SetPrompt(\"> \");\n- \n-@@ -140,7 +115,7 @@\n- \n- void EditlineAdapter::CloseInput() {\n-   if (_el_secondary_file != nullptr)\n--    _el_secondary_file.reset(nullptr);\n-+    _el_secondary_file->Close();\n- }\n- \n- bool EditlineAdapter::SendLine(const std::string &line) {\n-@@ -148,19 +123,14 @@\n-   if (!IsValid())\n-     return false;\n- \n-+  std::string out = line + \"\\n\";\n-+\n-   // Write the line out to the pipe connected to editline's input.\n--  ssize_t input_bytes_written =\n--      ::write(_pty_primary_fd, line.c_str(),\n--              line.length() * sizeof(std::string::value_type));\n--\n--  const char *eoln = \"\\n\";\n--  const size_t eoln_length = strlen(eoln);\n--  input_bytes_written =\n--      ::write(_pty_primary_fd, eoln, eoln_length * sizeof(char));\n--\n--  EXPECT_NE(-1, input_bytes_written) << strerror(errno);\n--  EXPECT_EQ(eoln_length * sizeof(char), size_t(input_bytes_written));\n--  return eoln_length * sizeof(char) == size_t(input_bytes_written);\n-+  size_t num_bytes = out.length() * sizeof(std::string::value_type);\n-+  EXPECT_THAT_ERROR(_el_primary_file->Write(out.c_str(), num_bytes).takeError(),\n-+                    llvm::Succeeded());\n-+  EXPECT_EQ(num_bytes, out.length() * sizeof(std::string::value_type));\n-+  return true;\n- }\n- \n- bool EditlineAdapter::SendLines(const std::vector<std::string> &lines) {\n-@@ -215,7 +185,7 @@\n- }\n- \n- void EditlineAdapter::ConsumeAllOutput() {\n--  FilePointer output_file(fdopen(_pty_primary_fd, \"r\"));\n-+  FILE *output_file = _el_primary_file->GetStream();\n- \n-   int ch;\n-   while ((ch = fgetc(output_file)) != EOF) {\n-diff -ruN --strip-trailing-cr a/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir b/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n---- a/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n-+++ b/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n-@@ -1,4 +1,4 @@\n--# RUN: not llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx950 -run-pass=greedy,amdgpu-rewrite-agpr-copy-mfma -verify-machineinstrs -o - %s 2>&1 | FileCheck %s\n-+# RUN: not --crash llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx950 -run-pass=greedy,amdgpu-rewrite-agpr-copy-mfma -verify-machineinstrs -o - %s 2>&1 | FileCheck %s\n- # CHECK: Illegal virtual register for instruction\n- # CHECK: Expected a VGPR_32 register, but got a AGPR_32 register\n-  \n+diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/clang/BUILD.bazel b/utils/bazel/llvm-project-overlay/clang/BUILD.bazel\n+--- a/utils/bazel/llvm-project-overlay/clang/BUILD.bazel\n++++ b/utils/bazel/llvm-project-overlay/clang/BUILD.bazel\n+@@ -1563,7 +1563,6 @@\n+         \":basic\",\n+         \":config\",\n+         \":driver_options_inc_gen\",\n+-        \":frontend\",\n+         \":lex\",\n+         \":options\",\n+         \":parse\",\n+@@ -1719,6 +1718,7 @@\n+         \":ast\",\n+         \":basic\",\n+         \":config\",\n++        \":driver\",\n+         \":driver_options_inc_gen\",\n+         \":edit\",\n+         \":lex\","
        },
        {
            "sha": "8e6cbc9ecc6244e9d5c882854ffcf6019d33657c",
            "filename": "third_party/xla/third_party/llvm/workspace.bzl",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5e73b75a05eaba3aef095fdfded88e6e9419e040/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5e73b75a05eaba3aef095fdfded88e6e9419e040/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl?ref=5e73b75a05eaba3aef095fdfded88e6e9419e040",
            "patch": "@@ -4,8 +4,8 @@ load(\"//third_party:repo.bzl\", \"tf_http_archive\")\n \n def repo(name):\n     \"\"\"Imports LLVM.\"\"\"\n-    LLVM_COMMIT = \"f2cb5d7a05bacb3e39df8dd355b2fbd16f96c856\"\n-    LLVM_SHA256 = \"57cb1ed943a6b62a62a1a239db81bf4ae93ba252022aef2d0efb8f8d8a46f404\"\n+    LLVM_COMMIT = \"dea330b38d9c18b68219abdb52baaa72c9f1103d\"\n+    LLVM_SHA256 = \"0f00dd4e0d61e49051b09169450af0c5ca364bf7e3f015794089455ae8c8555c\"\n \n     tf_http_archive(\n         name = name,"
        },
        {
            "sha": "3950089076aacf8d83432c99e09ec429cf2c769e",
            "filename": "third_party/xla/third_party/shardy/temporary.patch",
            "status": "modified",
            "additions": 330,
            "deletions": 2047,
            "changes": 2377,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5e73b75a05eaba3aef095fdfded88e6e9419e040/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5e73b75a05eaba3aef095fdfded88e6e9419e040/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch?ref=5e73b75a05eaba3aef095fdfded88e6e9419e040",
            "patch": "@@ -1,2071 +1,354 @@\n diff --git a/third_party/llvm/generated.patch b/third_party/llvm/generated.patch\n-index 927ab50..2eff859 100644\n+index 2eff859..8327093 100644\n --- a/third_party/llvm/generated.patch\n +++ b/third_party/llvm/generated.patch\n-@@ -1,4 +1,13 @@\n+@@ -1,315 +1,20 @@\n  Auto generated patch. Do not edit or delete it, even if empty.\n-+diff -ruN --strip-trailing-cr a/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp b/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n-+--- a/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n-++++ b/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n-+@@ -1,4 +1,4 @@\n-+-// RUN: %clangxx -Xclang -verify -Wno-vla -fopenmp -fopenmp-version=60 -x c++ -S -emit-llvm %s -o - | FileCheck %s\n-++// RUN: %clang_cc1 -verify -fopenmp -fopenmp-version=60 -x c++ -emit-llvm %s -o - | FileCheck %s\n-+ // expected-no-diagnostics\n-+ #ifndef HEADER\n-+ #define HEADER\n- diff -ruN --strip-trailing-cr a/libcxx/docs/ReleaseNotes/22.rst b/libcxx/docs/ReleaseNotes/22.rst\n- --- a/libcxx/docs/ReleaseNotes/22.rst\n- +++ b/libcxx/docs/ReleaseNotes/22.rst\n-@@ -42,18 +51,6 @@ diff -ruN --strip-trailing-cr a/libcxx/include/fstream b/libcxx/include/fstream\n-  private:\n-    char* __extbuf_;\n-    const char* __extbufnext_;\n--diff -ruN --strip-trailing-cr a/libcxx/include/__hash_table b/libcxx/include/__hash_table\n----- a/libcxx/include/__hash_table\n--+++ b/libcxx/include/__hash_table\n--@@ -1910,6 +1910,8 @@\n--         __bucket_list_[__next_chash] = __before_first;\n--         __chash                      = __next_chash;\n--       }\n--+    } else { // When __next is a nullptr we've fully erased the last bucket. Update the bucket list accordingly.\n--+      __bucket_list_[__chash] = nullptr;\n--     }\n--   }\n+-diff -ruN --strip-trailing-cr a/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp b/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n+---- a/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n+-+++ b/clang/test/OpenMP/parallel_default_variableCategory_codegen.cpp\n+-@@ -1,4 +1,4 @@\n+--// RUN: %clangxx -Xclang -verify -Wno-vla -fopenmp -fopenmp-version=60 -x c++ -S -emit-llvm %s -o - | FileCheck %s\n+-+// RUN: %clang_cc1 -verify -fopenmp -fopenmp-version=60 -x c++ -emit-llvm %s -o - | FileCheck %s\n+- // expected-no-diagnostics\n+- #ifndef HEADER\n+- #define HEADER\n+-diff -ruN --strip-trailing-cr a/libcxx/docs/ReleaseNotes/22.rst b/libcxx/docs/ReleaseNotes/22.rst\n+---- a/libcxx/docs/ReleaseNotes/22.rst\n+-+++ b/libcxx/docs/ReleaseNotes/22.rst\n+-@@ -67,8 +67,8 @@\n+-   by up to 2.5x\n+- - The performance of ``erase(iterator, iterator)`` in the unordered containers has been improved by up to 1.9x\n+- - The performance of ``map::insert_or_assign`` has been improved by up to 2x\n+--- ``ofstream::write`` and ``ifstream::read`` have been optimized to pass through large reads and writes to system calls\n+--  directly instead of copying them in chunks.\n+-+- ``ofstream::write`` has been optimized to pass through large strings to system calls directly instead of copying them\n+-+  in chunks into a buffer.\n+- - Multiple internal types have been refactored to use ``[[no_unique_address]]``, resulting in faster compile times and\n+-   reduced debug information.\n - \n- diff -ruN --strip-trailing-cr a/libcxx/test/benchmarks/streams/fstream.bench.cpp b/libcxx/test/benchmarks/streams/fstream.bench.cpp\n- --- a/libcxx/test/benchmarks/streams/fstream.bench.cpp\n- +++ b/libcxx/test/benchmarks/streams/fstream.bench.cpp\n-@@ -151,1860 +148,168 @@ diff -ruN --strip-trailing-cr a/libcxx/test/libcxx/input.output/file.streams/fst\n-  \n-  // FIXME: As of commit r324062 Clang incorrectly generates a diagnostic about mismatching\n-  // exception specifications for types which are already invalid for one reason or another.\n--diff -ruN --strip-trailing-cr a/libcxx/test/std/containers/unord/unord.map/unord.map.modifiers/erase_range.pass.cpp b/libcxx/test/std/containers/unord/unord.map/unord.map.modifiers/erase_range.pass.cpp\n----- a/libcxx/test/std/containers/unord/unord.map/unord.map.modifiers/erase_range.pass.cpp\n--+++ b/libcxx/test/std/containers/unord/unord.map/unord.map.modifiers/erase_range.pass.cpp\n--@@ -57,6 +57,28 @@\n--     assert(c.size() == 0);\n--     assert(k == c.end());\n+-diff -ruN --strip-trailing-cr a/libcxx/include/fstream b/libcxx/include/fstream\n+---- a/libcxx/include/fstream\n+-+++ b/libcxx/include/fstream\n+-@@ -308,25 +308,6 @@\n+-     return basic_streambuf<_CharT, _Traits>::xsputn(__str, __len);\n -   }\n--+  { // Make sure that we're properly updating the bucket list when we're erasing to the end\n--+    std::unordered_map<int, int> m;\n--+    m.insert(std::make_pair(1, 1));\n--+    m.insert(std::make_pair(2, 2));\n--+\n--+    {\n--+      auto pair = m.equal_range(1);\n--+      assert(pair.first != pair.second);\n--+      m.erase(pair.first, pair.second);\n--+    }\n--+\n--+    {\n--+      auto pair = m.equal_range(2);\n--+      assert(pair.first != pair.second);\n--+      m.erase(pair.first, pair.second);\n--+    }\n--+\n--+    m.insert(std::make_pair(3, 3));\n--+    assert(m.size() == 1);\n--+    assert(*m.begin() == std::make_pair(3, 3));\n--+    assert(++m.begin() == m.end());\n--+  }\n-- #if TEST_STD_VER >= 11\n--   {\n--     typedef std::unordered_map<int,\n--diff -ruN --strip-trailing-cr a/libcxx/test/std/containers/unord/unord.multimap/unord.multimap.modifiers/erase_range.pass.cpp b/libcxx/test/std/containers/unord/unord.multimap/unord.multimap.modifiers/erase_range.pass.cpp\n----- a/libcxx/test/std/containers/unord/unord.multimap/unord.multimap.modifiers/erase_range.pass.cpp\n--+++ b/libcxx/test/std/containers/unord/unord.multimap/unord.multimap.modifiers/erase_range.pass.cpp\n--@@ -122,6 +122,28 @@\n--     for (const auto& v : map)\n--       assert(v.first == 1 || v.first == collision_val);\n--   }\n--+  { // Make sure that we're properly updating the bucket list when we're erasing to the end\n--+    std::unordered_multimap<int, int> m;\n--+    m.insert(std::make_pair(1, 1));\n--+    m.insert(std::make_pair(2, 2));\n+- \n+--  _LIBCPP_HIDE_FROM_ABI_VIRTUAL streamsize xsgetn(char_type* __str, streamsize __len) override {\n+--    if (__always_noconv_) {\n+--      const streamsize __n = std::min(this->egptr() - this->gptr(), __len);\n+--      if (__n != 0) {\n+--        traits_type::copy(__str, this->gptr(), __n);\n+--        this->__gbump_ptrdiff(__n);\n+--      }\n+--      const streamsize __remainder    = __len - __n;\n+--      const streamsize __buffer_space = this->egptr() - this->eback();\n+--\n+--      if (__remainder >= __buffer_space)\n+--        return std::fread(__str + __n, sizeof(char_type), __remainder, __file_) + __n;\n+--      else if (__remainder > 0)\n+--        return basic_streambuf<_CharT, _Traits>::xsgetn(__str + __n, __remainder) + __n;\n+--      return __n;\n+--    }\n+--    return basic_streambuf<_CharT, _Traits>::xsgetn(__str, __len);\n+--  }\n+--\n+- private:\n+-   char* __extbuf_;\n+-   const char* __extbufnext_;\n+-diff -ruN --strip-trailing-cr a/libcxx/test/benchmarks/streams/fstream.bench.cpp b/libcxx/test/benchmarks/streams/fstream.bench.cpp\n+---- a/libcxx/test/benchmarks/streams/fstream.bench.cpp\n+-+++ b/libcxx/test/benchmarks/streams/fstream.bench.cpp\n+-@@ -1,43 +0,0 @@\n+--//===----------------------------------------------------------------------===//\n+--//\n+--// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.\n+--// See https://llvm.org/LICENSE.txt for license information.\n+--// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception\n+--//\n+--//===----------------------------------------------------------------------===//\n+--\n+--#include <fstream>\n+--#include <vector>\n+--\n+--#include <benchmark/benchmark.h>\n+--\n+--static void bm_ofstream_write(benchmark::State& state) {\n+--  std::vector<char> buffer;\n+--  buffer.resize(16384);\n+--\n+--  std::ofstream stream(\"/dev/null\");\n+--\n+--  for (auto _ : state)\n+--    stream.write(buffer.data(), buffer.size());\n+--}\n+--BENCHMARK(bm_ofstream_write);\n+--\n+--static void bm_ifstream_read(benchmark::State& state) {\n+--  std::vector<char> buffer;\n+--  buffer.resize(16384);\n+--\n+--  std::ofstream gen_testfile(\"testfile\");\n+--  gen_testfile.write(buffer.data(), buffer.size());\n+--\n+--  std::ifstream stream(\"testfile\");\n+--  assert(stream);\n+--\n+--  for (auto _ : state) {\n+--    stream.read(buffer.data(), buffer.size());\n+--    benchmark::DoNotOptimize(buffer);\n+--    stream.seekg(0);\n+--  }\n+--}\n+--BENCHMARK(bm_ifstream_read);\n+--\n+--BENCHMARK_MAIN();\n+-diff -ruN --strip-trailing-cr a/libcxx/test/benchmarks/streams/ofstream.bench.cpp b/libcxx/test/benchmarks/streams/ofstream.bench.cpp\n+---- a/libcxx/test/benchmarks/streams/ofstream.bench.cpp\n+-+++ b/libcxx/test/benchmarks/streams/ofstream.bench.cpp\n+-@@ -0,0 +1,25 @@\n+-+//===----------------------------------------------------------------------===//\n+-+//\n+-+// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.\n+-+// See https://llvm.org/LICENSE.txt for license information.\n+-+// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception\n+-+//\n+-+//===----------------------------------------------------------------------===//\n -+\n--+    {\n--+      auto pair = m.equal_range(1);\n--+      assert(pair.first != pair.second);\n--+      m.erase(pair.first, pair.second);\n--+    }\n+-+#include <fstream>\n+-+#include <vector>\n -+\n--+    {\n--+      auto pair = m.equal_range(2);\n--+      assert(pair.first != pair.second);\n--+      m.erase(pair.first, pair.second);\n--+    }\n+-+#include <benchmark/benchmark.h>\n -+\n--+    m.insert(std::make_pair(3, 3));\n--+    assert(m.size() == 1);\n--+    assert(*m.begin() == std::make_pair(3, 3));\n--+    assert(++m.begin() == m.end());\n--+  }\n-- #if TEST_STD_VER >= 11\n--   {\n--     typedef std::unordered_multimap<int,\n--diff -ruN --strip-trailing-cr a/libcxx/test/std/containers/unord/unord.multiset/erase_range.pass.cpp b/libcxx/test/std/containers/unord/unord.multiset/erase_range.pass.cpp\n----- a/libcxx/test/std/containers/unord/unord.multiset/erase_range.pass.cpp\n--+++ b/libcxx/test/std/containers/unord/unord.multiset/erase_range.pass.cpp\n--@@ -64,6 +64,28 @@\n--     for (const auto& v : map)\n--       assert(v == 1 || v == collision_val);\n--   }\n--+  { // Make sure that we're properly updating the bucket list when we're erasing to the end\n--+    std::unordered_multiset<int> m;\n--+    m.insert(1);\n--+    m.insert(2);\n+-+static void bm_write(benchmark::State& state) {\n+-+  std::vector<char> buffer;\n+-+  buffer.resize(16384);\n -+\n--+    {\n--+      auto pair = m.equal_range(1);\n--+      assert(pair.first != pair.second);\n--+      m.erase(pair.first, pair.second);\n--+    }\n+-+  std::ofstream stream(\"/dev/null\");\n -+\n--+    {\n--+      auto pair = m.equal_range(2);\n--+      assert(pair.first != pair.second);\n--+      m.erase(pair.first, pair.second);\n--+    }\n+-+  for (auto _ : state)\n+-+    stream.write(buffer.data(), buffer.size());\n+-+}\n+-+BENCHMARK(bm_write);\n -+\n--+    m.insert(3);\n--+    assert(m.size() == 1);\n--+    assert(*m.begin() == 3);\n--+    assert(++m.begin() == m.end());\n--+  }\n-- #if TEST_STD_VER >= 11\n--   {\n--     typedef std::unordered_multiset<int, std::hash<int>, std::equal_to<int>, min_allocator<int>> C;\n--diff -ruN --strip-trailing-cr a/libcxx/test/std/containers/unord/unord.set/erase_range.pass.cpp b/libcxx/test/std/containers/unord/unord.set/erase_range.pass.cpp\n----- a/libcxx/test/std/containers/unord/unord.set/erase_range.pass.cpp\n--+++ b/libcxx/test/std/containers/unord/unord.set/erase_range.pass.cpp\n--@@ -47,6 +47,28 @@\n--     assert(c.size() == 0);\n--     assert(k == c.end());\n--   }\n--+  { // Make sure that we're properly updating the bucket list when we're erasing to the end\n--+    std::unordered_set<int> m;\n--+    m.insert(1);\n--+    m.insert(2);\n+-+BENCHMARK_MAIN();\n+-diff -ruN --strip-trailing-cr a/libcxx/test/libcxx/input.output/file.streams/fstreams/filebuf/traits_mismatch.verify.cpp b/libcxx/test/libcxx/input.output/file.streams/fstreams/filebuf/traits_mismatch.verify.cpp\n+---- a/libcxx/test/libcxx/input.output/file.streams/fstreams/filebuf/traits_mismatch.verify.cpp\n+-+++ b/libcxx/test/libcxx/input.output/file.streams/fstreams/filebuf/traits_mismatch.verify.cpp\n+-@@ -19,4 +19,4 @@\n+- \n+- std::basic_filebuf<char, std::char_traits<wchar_t> > f;\n+- // expected-error-re@*:* {{static assertion failed{{.*}}traits_type::char_type must be the same type as CharT}}\n+--// expected-error@*:* 11 {{only virtual member functions can be marked 'override'}}\n+-+// expected-error@*:* 10 {{only virtual member functions can be marked 'override'}}\n+-diff -ruN --strip-trailing-cr a/libcxx/test/libcxx/input.output/file.streams/fstreams/traits_mismatch.verify.cpp b/libcxx/test/libcxx/input.output/file.streams/fstreams/traits_mismatch.verify.cpp\n+---- a/libcxx/test/libcxx/input.output/file.streams/fstreams/traits_mismatch.verify.cpp\n+-+++ b/libcxx/test/libcxx/input.output/file.streams/fstreams/traits_mismatch.verify.cpp\n+-@@ -21,7 +21,7 @@\n+- // expected-error-re@*:* {{static assertion failed{{.*}}traits_type::char_type must be the same type as CharT}}\n+- // expected-error-re@*:* {{static assertion failed{{.*}}traits_type::char_type must be the same type as CharT}}\n+- \n+--// expected-error@*:* 13 {{only virtual member functions can be marked 'override'}}\n+-+// expected-error@*:* 12 {{only virtual member functions can be marked 'override'}}\n+- \n+- // FIXME: As of commit r324062 Clang incorrectly generates a diagnostic about mismatching\n+- // exception specifications for types which are already invalid for one reason or another.\n+-diff -ruN --strip-trailing-cr a/lldb/unittests/Editline/EditlineTest.cpp b/lldb/unittests/Editline/EditlineTest.cpp\n+---- a/lldb/unittests/Editline/EditlineTest.cpp\n+-+++ b/lldb/unittests/Editline/EditlineTest.cpp\n+-@@ -9,6 +9,8 @@\n+- #include \"lldb/Host/Config.h\"\n+- #include \"lldb/Host/File.h\"\n+- #include \"lldb/Host/HostInfo.h\"\n+-+#include \"lldb/lldb-forward.h\"\n+-+#include \"llvm/Testing/Support/Error.h\"\n+- \n+- #if LLDB_ENABLE_LIBEDIT\n+- \n+-@@ -25,7 +27,6 @@\n+- #include \"TestingSupport/SubsystemRAII.h\"\n+- #include \"lldb/Host/Editline.h\"\n+- #include \"lldb/Host/FileSystem.h\"\n+--#include \"lldb/Host/Pipe.h\"\n+- #include \"lldb/Host/PseudoTerminal.h\"\n+- #include \"lldb/Host/StreamFile.h\"\n+- #include \"lldb/Utility/Status.h\"\n+-@@ -37,27 +38,6 @@\n+- const size_t TIMEOUT_MILLIS = 5000;\n+- }\n+- \n+--class FilePointer {\n+--public:\n+--  FilePointer() = delete;\n+--\n+--  FilePointer(const FilePointer &) = delete;\n+--\n+--  FilePointer(FILE *file_p) : _file_p(file_p) {}\n+--\n+--  ~FilePointer() {\n+--    if (_file_p != nullptr) {\n+--      const int close_result = fclose(_file_p);\n+--      EXPECT_EQ(0, close_result);\n+--    }\n+--  }\n+--\n+--  operator FILE *() { return _file_p; }\n+--\n+--private:\n+--  FILE *_file_p;\n+--};\n+--\n+- /**\n+-  Wraps an Editline class, providing a simple way to feed\n+-  input (as if from the keyboard) and receive output from Editline.\n+-@@ -90,44 +70,39 @@\n+-   std::recursive_mutex output_mutex;\n+-   std::unique_ptr<lldb_private::Editline> _editline_sp;\n+- \n+--  PseudoTerminal _pty;\n+--  int _pty_primary_fd = -1;\n+--  int _pty_secondary_fd = -1;\n+--\n+--  std::unique_ptr<FilePointer> _el_secondary_file;\n+-+  lldb::FileSP _el_primary_file;\n+-+  lldb::FileSP _el_secondary_file;\n+- };\n+- \n+--EditlineAdapter::EditlineAdapter()\n+--    : _editline_sp(), _pty(), _el_secondary_file() {\n+-+EditlineAdapter::EditlineAdapter() : _editline_sp(), _el_secondary_file() {\n+-   lldb_private::Status error;\n+-+  PseudoTerminal pty;\n+- \n+-   // Open the first primary pty available.\n+--  EXPECT_THAT_ERROR(_pty.OpenFirstAvailablePrimary(O_RDWR), llvm::Succeeded());\n+-+  EXPECT_THAT_ERROR(pty.OpenFirstAvailablePrimary(O_RDWR), llvm::Succeeded());\n+-+  // Open the corresponding secondary pty.\n+-+  EXPECT_THAT_ERROR(pty.OpenSecondary(O_RDWR), llvm::Succeeded());\n+- \n+-   // Grab the primary fd.  This is a file descriptor we will:\n+-   // (1) write to when we want to send input to editline.\n+-   // (2) read from when we want to see what editline sends back.\n+--  _pty_primary_fd = _pty.GetPrimaryFileDescriptor();\n+--\n+--  // Open the corresponding secondary pty.\n+--  EXPECT_THAT_ERROR(_pty.OpenSecondary(O_RDWR), llvm::Succeeded());\n+--  _pty_secondary_fd = _pty.GetSecondaryFileDescriptor();\n+--\n+--  _el_secondary_file.reset(new FilePointer(fdopen(_pty_secondary_fd, \"rw\")));\n+--  EXPECT_FALSE(nullptr == *_el_secondary_file);\n+--  if (*_el_secondary_file == nullptr)\n+--    return;\n+-+  _el_primary_file.reset(\n+-+      new NativeFile(pty.ReleasePrimaryFileDescriptor(),\n+-+                     lldb_private::NativeFile::eOpenOptionReadWrite, true));\n -+\n--+    {\n--+      auto pair = m.equal_range(1);\n--+      assert(pair.first != pair.second);\n--+      m.erase(pair.first, pair.second);\n--+    }\n+-+  _el_secondary_file.reset(\n+-+      new NativeFile(pty.ReleaseSecondaryFileDescriptor(),\n+-+                     lldb_private::NativeFile::eOpenOptionReadWrite, true));\n+- \n+-   lldb::LockableStreamFileSP output_stream_sp =\n+--      std::make_shared<LockableStreamFile>(*_el_secondary_file,\n+--                                           NativeFile::Unowned, output_mutex);\n+-+      std::make_shared<LockableStreamFile>(_el_secondary_file, output_mutex);\n+-   lldb::LockableStreamFileSP error_stream_sp =\n+--      std::make_shared<LockableStreamFile>(*_el_secondary_file,\n+--                                           NativeFile::Unowned, output_mutex);\n+-+      std::make_shared<LockableStreamFile>(_el_secondary_file, output_mutex);\n+- \n+-   // Create an Editline instance.\n+-   _editline_sp.reset(new lldb_private::Editline(\n+--      \"gtest editor\", *_el_secondary_file, output_stream_sp, error_stream_sp,\n+-+      \"gtest editor\", _el_secondary_file->GetStream(), output_stream_sp,\n+-+      error_stream_sp,\n+-       /*color=*/false));\n+-   _editline_sp->SetPrompt(\"> \");\n+- \n+-@@ -140,7 +115,7 @@\n+- \n+- void EditlineAdapter::CloseInput() {\n+-   if (_el_secondary_file != nullptr)\n+--    _el_secondary_file.reset(nullptr);\n+-+    _el_secondary_file->Close();\n+- }\n+- \n+- bool EditlineAdapter::SendLine(const std::string &line) {\n+-@@ -148,19 +123,14 @@\n+-   if (!IsValid())\n+-     return false;\n+- \n+-+  std::string out = line + \"\\n\";\n -+\n--+    {\n--+      auto pair = m.equal_range(2);\n--+      assert(pair.first != pair.second);\n--+      m.erase(pair.first, pair.second);\n--+    }\n-+diff -ruN --strip-trailing-cr a/lldb/unittests/Editline/EditlineTest.cpp b/lldb/unittests/Editline/EditlineTest.cpp\n-+--- a/lldb/unittests/Editline/EditlineTest.cpp\n-++++ b/lldb/unittests/Editline/EditlineTest.cpp\n-+@@ -9,6 +9,8 @@\n-+ #include \"lldb/Host/Config.h\"\n-+ #include \"lldb/Host/File.h\"\n-+ #include \"lldb/Host/HostInfo.h\"\n-++#include \"lldb/lldb-forward.h\"\n-++#include \"llvm/Testing/Support/Error.h\"\n-+ \n-+ #if LLDB_ENABLE_LIBEDIT\n-+ \n-+@@ -25,7 +27,6 @@\n-+ #include \"TestingSupport/SubsystemRAII.h\"\n-+ #include \"lldb/Host/Editline.h\"\n-+ #include \"lldb/Host/FileSystem.h\"\n-+-#include \"lldb/Host/Pipe.h\"\n-+ #include \"lldb/Host/PseudoTerminal.h\"\n-+ #include \"lldb/Host/StreamFile.h\"\n-+ #include \"lldb/Utility/Status.h\"\n-+@@ -37,27 +38,6 @@\n-+ const size_t TIMEOUT_MILLIS = 5000;\n-+ }\n-+ \n-+-class FilePointer {\n-+-public:\n-+-  FilePointer() = delete;\n-+-\n-+-  FilePointer(const FilePointer &) = delete;\n-+-\n-+-  FilePointer(FILE *file_p) : _file_p(file_p) {}\n-+-\n-+-  ~FilePointer() {\n-+-    if (_file_p != nullptr) {\n-+-      const int close_result = fclose(_file_p);\n-+-      EXPECT_EQ(0, close_result);\n-+-    }\n-+-  }\n-+-\n-+-  operator FILE *() { return _file_p; }\n-+-\n-+-private:\n-+-  FILE *_file_p;\n-+-};\n-+-\n-+ /**\n-+  Wraps an Editline class, providing a simple way to feed\n-+  input (as if from the keyboard) and receive output from Editline.\n-+@@ -90,44 +70,39 @@\n-+   std::recursive_mutex output_mutex;\n-+   std::unique_ptr<lldb_private::Editline> _editline_sp;\n-+ \n-+-  PseudoTerminal _pty;\n-+-  int _pty_primary_fd = -1;\n-+-  int _pty_secondary_fd = -1;\n-+-\n-+-  std::unique_ptr<FilePointer> _el_secondary_file;\n-++  lldb::FileSP _el_primary_file;\n-++  lldb::FileSP _el_secondary_file;\n-+ };\n-+ \n-+-EditlineAdapter::EditlineAdapter()\n-+-    : _editline_sp(), _pty(), _el_secondary_file() {\n-++EditlineAdapter::EditlineAdapter() : _editline_sp(), _el_secondary_file() {\n-+   lldb_private::Status error;\n-++  PseudoTerminal pty;\n-+ \n-+   // Open the first primary pty available.\n-+-  EXPECT_THAT_ERROR(_pty.OpenFirstAvailablePrimary(O_RDWR), llvm::Succeeded());\n-++  EXPECT_THAT_ERROR(pty.OpenFirstAvailablePrimary(O_RDWR), llvm::Succeeded());\n-++  // Open the corresponding secondary pty.\n-++  EXPECT_THAT_ERROR(pty.OpenSecondary(O_RDWR), llvm::Succeeded());\n-+ \n-+   // Grab the primary fd.  This is a file descriptor we will:\n-+   // (1) write to when we want to send input to editline.\n-+   // (2) read from when we want to see what editline sends back.\n-+-  _pty_primary_fd = _pty.GetPrimaryFileDescriptor();\n-+-\n-+-  // Open the corresponding secondary pty.\n-+-  EXPECT_THAT_ERROR(_pty.OpenSecondary(O_RDWR), llvm::Succeeded());\n-+-  _pty_secondary_fd = _pty.GetSecondaryFileDescriptor();\n-+-\n-+-  _el_secondary_file.reset(new FilePointer(fdopen(_pty_secondary_fd, \"rw\")));\n-+-  EXPECT_FALSE(nullptr == *_el_secondary_file);\n-+-  if (*_el_secondary_file == nullptr)\n-+-    return;\n-++  _el_primary_file.reset(\n-++      new NativeFile(pty.ReleasePrimaryFileDescriptor(),\n-++                     lldb_private::NativeFile::eOpenOptionReadWrite, true));\n- +\n--+    m.insert(3);\n--+    assert(m.size() == 1);\n--+    assert(*m.begin() == 3);\n--+    assert(++m.begin() == m.end());\n--+  }\n-- #if TEST_STD_VER >= 11\n--   {\n--     typedef std::unordered_set<int, std::hash<int>, std::equal_to<int>, min_allocator<int>> C;\n--diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/libc/BUILD.bazel b/utils/bazel/llvm-project-overlay/libc/BUILD.bazel\n----- a/utils/bazel/llvm-project-overlay/libc/BUILD.bazel\n--+++ b/utils/bazel/llvm-project-overlay/libc/BUILD.bazel\n--@@ -1103,6 +1103,7 @@\n--         \":func_realloc\",\n--         \":hdr_stdio_macros\",\n--         \":hdr_stdio_overlay\",\n--+        \":string_memory_utils\",\n--         \":types_off_t\",\n--     ],\n-- )\n--diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/llvm/BUILD.bazel b/utils/bazel/llvm-project-overlay/llvm/BUILD.bazel\n----- a/utils/bazel/llvm-project-overlay/llvm/BUILD.bazel\n--+++ b/utils/bazel/llvm-project-overlay/llvm/BUILD.bazel\n--@@ -2193,92 +2193,253 @@\n--     {\n--         \"name\": \"AArch64\",\n--         \"short_name\": \"AArch64\",\n---        \"tbl_outs\": {\n---            \"lib/Target/AArch64/AArch64GenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/AArch64/AArch64GenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/AArch64/AArch64GenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/AArch64/AArch64GenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/AArch64/AArch64GenMCPseudoLowering.inc\": [\"-gen-pseudo-lowering\"],\n---            \"lib/Target/AArch64/AArch64GenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/AArch64/AArch64GenAsmWriter1.inc\": [\n---                \"-gen-asm-writer\",\n---                \"-asmwriternum=1\",\n---            ],\n---            \"lib/Target/AArch64/AArch64GenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/AArch64/AArch64GenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/AArch64/AArch64GenFastISel.inc\": [\"-gen-fast-isel\"],\n---            \"lib/Target/AArch64/AArch64GenGlobalISel.inc\": [\"-gen-global-isel\"],\n---            \"lib/Target/AArch64/AArch64GenO0PreLegalizeGICombiner.inc\": [\n---                \"-gen-global-isel-combiner\",\n---                \"-combiners=AArch64O0PreLegalizerCombiner\",\n---            ],\n---            \"lib/Target/AArch64/AArch64GenPreLegalizeGICombiner.inc\": [\n---                \"-gen-global-isel-combiner\",\n---                \"-combiners=AArch64PreLegalizerCombiner\",\n---            ],\n---            \"lib/Target/AArch64/AArch64GenPostLegalizeGICombiner.inc\": [\n---                \"-gen-global-isel-combiner\",\n---                \"-combiners=AArch64PostLegalizerCombiner\",\n---            ],\n---            \"lib/Target/AArch64/AArch64GenPostLegalizeGILowering.inc\": [\n---                \"-gen-global-isel-combiner\",\n---                \"-combiners=AArch64PostLegalizerLowering\",\n---            ],\n---            \"lib/Target/AArch64/AArch64GenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/AArch64/AArch64GenSDNodeInfo.inc\": [\"-gen-sd-node-info\"],\n---            \"lib/Target/AArch64/AArch64GenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/AArch64/AArch64GenDisassemblerTables.inc\": [\n---                \"-gen-disassembler\",\n---            ],\n---            \"lib/Target/AArch64/AArch64GenSystemOperands.inc\": [\"-gen-searchable-tables\"],\n---            \"lib/Target/AArch64/AArch64GenExegesis.inc\": [\"-gen-exegesis\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/AArch64/AArch64GenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/AArch64/AArch64GenRegisterInfo.inc\",\n--+                    \"lib/Target/AArch64/AArch64GenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/AArch64/AArch64GenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/AArch64/AArch64GenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/AArch64/AArch64GenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/AArch64/AArch64GenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/AArch64/AArch64GenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-pseudo-lowering\"],\n--+                \"lib/Target/AArch64/AArch64GenMCPseudoLowering.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/AArch64/AArch64GenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-asm-writer\",\n--+                    \"-asmwriternum=1\",\n--+                ],\n--+                \"lib/Target/AArch64/AArch64GenAsmWriter1.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/AArch64/AArch64GenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/AArch64/AArch64GenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-fast-isel\"],\n--+                \"lib/Target/AArch64/AArch64GenFastISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-global-isel\"],\n--+                \"lib/Target/AArch64/AArch64GenGlobalISel.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-global-isel-combiner\",\n--+                    \"-combiners=AArch64O0PreLegalizerCombiner\",\n--+                ],\n--+                \"lib/Target/AArch64/AArch64GenO0PreLegalizeGICombiner.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-global-isel-combiner\",\n--+                    \"-combiners=AArch64PreLegalizerCombiner\",\n--+                ],\n--+                \"lib/Target/AArch64/AArch64GenPreLegalizeGICombiner.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-global-isel-combiner\",\n--+                    \"-combiners=AArch64PostLegalizerCombiner\",\n--+                ],\n--+                \"lib/Target/AArch64/AArch64GenPostLegalizeGICombiner.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-global-isel-combiner\",\n--+                    \"-combiners=AArch64PostLegalizerLowering\",\n--+                ],\n--+                \"lib/Target/AArch64/AArch64GenPostLegalizeGILowering.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/AArch64/AArch64GenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/AArch64/AArch64GenSDNodeInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/AArch64/AArch64GenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/AArch64/AArch64GenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-searchable-tables\"],\n--+                \"lib/Target/AArch64/AArch64GenSystemOperands.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-exegesis\"],\n--+                \"lib/Target/AArch64/AArch64GenExegesis.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"ARM\",\n--         \"short_name\": \"ARM\",\n---        \"tbl_outs\": {\n---            \"lib/Target/ARM/ARMGenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/ARM/ARMGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/ARM/ARMGenSystemRegister.inc\": [\"-gen-searchable-tables\"],\n---            \"lib/Target/ARM/ARMGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/ARM/ARMGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/ARM/ARMGenMCPseudoLowering.inc\": [\"-gen-pseudo-lowering\"],\n---            \"lib/Target/ARM/ARMGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/ARM/ARMGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/ARM/ARMGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/ARM/ARMGenFastISel.inc\": [\"-gen-fast-isel\"],\n---            \"lib/Target/ARM/ARMGenGlobalISel.inc\": [\"-gen-global-isel\"],\n---            \"lib/Target/ARM/ARMGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/ARM/ARMGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/ARM/ARMGenDisassemblerTables.inc\": [\n---                \"-gen-disassembler\",\n---                \"-ignore-non-decodable-operands\",\n---            ],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/ARM/ARMGenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/ARM/ARMGenRegisterInfo.inc\",\n--+                    \"lib/Target/ARM/ARMGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/ARM/ARMGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/ARM/ARMGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/ARM/ARMGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-searchable-tables\"],\n--+                \"lib/Target/ARM/ARMGenSystemRegister.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/ARM/ARMGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/ARM/ARMGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-pseudo-lowering\"],\n--+                \"lib/Target/ARM/ARMGenMCPseudoLowering.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/ARM/ARMGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/ARM/ARMGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/ARM/ARMGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-fast-isel\"],\n--+                \"lib/Target/ARM/ARMGenFastISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-global-isel\"],\n--+                \"lib/Target/ARM/ARMGenGlobalISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/ARM/ARMGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/ARM/ARMGenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-disassembler\",\n--+                    \"-ignore-non-decodable-operands\",\n--+                ],\n--+                \"lib/Target/ARM/ARMGenDisassemblerTables.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"AMDGPU\",\n--         \"short_name\": \"AMDGPU\",\n---        \"tbl_outs\": {\n---            \"lib/Target/AMDGPU/AMDGPUGenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenMCPseudoLowering.inc\": [\"-gen-pseudo-lowering\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/AMDGPU/AMDGPUGenDisassemblerTables.inc\": [\n---                \"-gen-disassembler\",\n---                \"--specialize-decoders-per-bitwidth\",\n---                \"-ignore-non-decodable-operands\",\n---                \"-ignore-fully-defined-operands\",\n---            ],\n---            \"lib/Target/AMDGPU/AMDGPUGenSearchableTables.inc\": [\"-gen-searchable-tables\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/AMDGPU/AMDGPUGenRegisterInfo.inc\",\n--+                    \"lib/Target/AMDGPU/AMDGPUGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/AMDGPU/AMDGPUGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/AMDGPU/AMDGPUGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/AMDGPU/AMDGPUGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-pseudo-lowering\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenMCPseudoLowering.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-disassembler\",\n--+                    \"--specialize-decoders-per-bitwidth\",\n--+                    \"-ignore-non-decodable-operands\",\n--+                    \"-ignore-fully-defined-operands\",\n--+                ],\n--+                \"lib/Target/AMDGPU/AMDGPUGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-searchable-tables\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenSearchableTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/AMDGPU/AMDGPUGenSDNodeInfo.inc\",\n--+            ),\n--+        ],\n--         \"tbl_deps\": [\n--             \":InstCombineTableGen\",\n--             \":amdgpu_isel_target_gen\",\n--@@ -2288,184 +2449,567 @@\n--     {\n--         \"name\": \"AVR\",\n--         \"short_name\": \"AVR\",\n---        \"tbl_outs\": {\n---            \"lib/Target/AVR/AVRGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/AVR/AVRGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/AVR/AVRGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/AVR/AVRGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/AVR/AVRGenDisassemblerTables.inc\": [\n---                \"-gen-disassembler\",\n---            ],\n---            \"lib/Target/AVR/AVRGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/AVR/AVRGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/AVR/AVRGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/AVR/AVRGenSDNodeInfo.inc\": [\"-gen-sd-node-info\"],\n---            \"lib/Target/AVR/AVRGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/AVR/AVRGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/AVR/AVRGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/AVR/AVRGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/AVR/AVRGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/AVR/AVRGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/AVR/AVRGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/AVR/AVRGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/AVR/AVRGenRegisterInfo.inc\",\n--+                    \"lib/Target/AVR/AVRGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/AVR/AVRGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/AVR/AVRGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/AVR/AVRGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/AVR/AVRGenSDNodeInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/AVR/AVRGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"BPF\",\n--         \"short_name\": \"BPF\",\n---        \"tbl_outs\": {\n---            \"lib/Target/BPF/BPFGenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/BPF/BPFGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/BPF/BPFGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/BPF/BPFGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/BPF/BPFGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/BPF/BPFGenGlobalISel.inc\": [\"-gen-global-isel\"],\n---            \"lib/Target/BPF/BPFGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/BPF/BPFGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/BPF/BPFGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/BPF/BPFGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/BPF/BPFGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/BPF/BPFGenSDNodeInfo.inc\": [\"-gen-sd-node-info\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/BPF/BPFGenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/BPF/BPFGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/BPF/BPFGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/BPF/BPFGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/BPF/BPFGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-global-isel\"],\n--+                \"lib/Target/BPF/BPFGenGlobalISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/BPF/BPFGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/BPF/BPFGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/BPF/BPFGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/BPF/BPFGenRegisterInfo.inc\",\n--+                    \"lib/Target/BPF/BPFGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/BPF/BPFGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/BPF/BPFGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/BPF/BPFGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/BPF/BPFGenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/BPF/BPFGenSDNodeInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"Hexagon\",\n--         \"short_name\": \"Hexagon\",\n---        \"tbl_outs\": {\n---            \"lib/Target/Hexagon/HexagonGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/Hexagon/HexagonGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/Hexagon/HexagonGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/Hexagon/HexagonGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/Hexagon/HexagonGenDFAPacketizer.inc\": [\"-gen-dfa-packetizer\"],\n---            \"lib/Target/Hexagon/HexagonGenDisassemblerTables.inc\": [\n---                \"-gen-disassembler\",\n---            ],\n---            \"lib/Target/Hexagon/HexagonGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/Hexagon/HexagonGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/Hexagon/HexagonGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/Hexagon/HexagonGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/Hexagon/HexagonGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/Hexagon/HexagonGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/Hexagon/HexagonGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/Hexagon/HexagonGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dfa-packetizer\"],\n--+                \"lib/Target/Hexagon/HexagonGenDFAPacketizer.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/Hexagon/HexagonGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/Hexagon/HexagonGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/Hexagon/HexagonGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/Hexagon/HexagonGenRegisterInfo.inc\",\n--+                    \"lib/Target/Hexagon/HexagonGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/Hexagon/HexagonGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/Hexagon/HexagonGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/Hexagon/HexagonGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/Hexagon/HexagonGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"Lanai\",\n--         \"short_name\": \"Lanai\",\n---        \"tbl_outs\": {\n---            \"lib/Target/Lanai/LanaiGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/Lanai/LanaiGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/Lanai/LanaiGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/Lanai/LanaiGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/Lanai/LanaiGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/Lanai/LanaiGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/Lanai/LanaiGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/Lanai/LanaiGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/Lanai/LanaiGenSDNodeInfo.inc\": [\"-gen-sd-node-info\"],\n---            \"lib/Target/Lanai/LanaiGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/Lanai/LanaiGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/Lanai/LanaiGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/Lanai/LanaiGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/Lanai/LanaiGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/Lanai/LanaiGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/Lanai/LanaiGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/Lanai/LanaiGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/Lanai/LanaiGenRegisterInfo.inc\",\n--+                    \"lib/Target/Lanai/LanaiGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/Lanai/LanaiGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/Lanai/LanaiGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/Lanai/LanaiGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/Lanai/LanaiGenSDNodeInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/Lanai/LanaiGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"LoongArch\",\n--         \"short_name\": \"LoongArch\",\n---        \"tbl_outs\": {\n---            \"lib/Target/LoongArch/LoongArchGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/LoongArch/LoongArchGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/LoongArch/LoongArchGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/LoongArch/LoongArchGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/LoongArch/LoongArchGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/LoongArch/LoongArchGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/LoongArch/LoongArchGenMCPseudoLowering.inc\": [\"-gen-pseudo-lowering\"],\n---            \"lib/Target/LoongArch/LoongArchGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/LoongArch/LoongArchGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/LoongArch/LoongArchGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/LoongArch/LoongArchGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/LoongArch/LoongArchGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/LoongArch/LoongArchGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/LoongArch/LoongArchGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/LoongArch/LoongArchGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-pseudo-lowering\"],\n--+                \"lib/Target/LoongArch/LoongArchGenMCPseudoLowering.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/LoongArch/LoongArchGenRegisterInfo.inc\",\n--+                    \"lib/Target/LoongArch/LoongArchGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/LoongArch/LoongArchGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/LoongArch/LoongArchGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/LoongArch/LoongArchGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/LoongArch/LoongArchGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"Mips\",\n--         \"short_name\": \"Mips\",\n---        \"tbl_outs\": {\n---            \"lib/Target/Mips/MipsGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/Mips/MipsGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/Mips/MipsGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/Mips/MipsGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/Mips/MipsGenDisassemblerTables.inc\": [\n---                \"-gen-disassembler\",\n---                \"-ignore-non-decodable-operands\",\n---            ],\n---            \"lib/Target/Mips/MipsGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/Mips/MipsGenExegesis.inc\": [\"-gen-exegesis\"],\n---            \"lib/Target/Mips/MipsGenFastISel.inc\": [\"-gen-fast-isel\"],\n---            \"lib/Target/Mips/MipsGenGlobalISel.inc\": [\"-gen-global-isel\"],\n---            \"lib/Target/Mips/MipsGenPostLegalizeGICombiner.inc\": [\n---                \"-gen-global-isel-combiner\",\n---                \"-combiners=MipsPostLegalizerCombiner\",\n---            ],\n---            \"lib/Target/Mips/MipsGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/Mips/MipsGenMCPseudoLowering.inc\": [\"-gen-pseudo-lowering\"],\n---            \"lib/Target/Mips/MipsGenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/Mips/MipsGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/Mips/MipsGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/Mips/MipsGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/Mips/MipsGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/Mips/MipsGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/Mips/MipsGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-disassembler\",\n--+                    \"-ignore-non-decodable-operands\",\n--+                ],\n--+                \"lib/Target/Mips/MipsGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/Mips/MipsGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-exegesis\"],\n--+                \"lib/Target/Mips/MipsGenExegesis.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-fast-isel\"],\n--+                \"lib/Target/Mips/MipsGenFastISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-global-isel\"],\n--+                \"lib/Target/Mips/MipsGenGlobalISel.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-global-isel-combiner\",\n--+                    \"-combiners=MipsPostLegalizerCombiner\",\n--+                ],\n--+                \"lib/Target/Mips/MipsGenPostLegalizeGICombiner.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/Mips/MipsGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-pseudo-lowering\"],\n--+                \"lib/Target/Mips/MipsGenMCPseudoLowering.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/Mips/MipsGenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/Mips/MipsGenRegisterInfo.inc\",\n--+                    \"lib/Target/Mips/MipsGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/Mips/MipsGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/Mips/MipsGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/Mips/MipsGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/Mips/MipsGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"MSP430\",\n--         \"short_name\": \"MSP430\",\n---        \"tbl_outs\": {\n---            \"lib/Target/MSP430/MSP430GenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/MSP430/MSP430GenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/MSP430/MSP430GenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/MSP430/MSP430GenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/MSP430/MSP430GenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/MSP430/MSP430GenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/MSP430/MSP430GenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/MSP430/MSP430GenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/MSP430/MSP430GenSDNodeInfo.inc\": [\"-gen-sd-node-info\"],\n---            \"lib/Target/MSP430/MSP430GenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/MSP430/MSP430GenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/MSP430/MSP430GenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/MSP430/MSP430GenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/MSP430/MSP430GenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/MSP430/MSP430GenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/MSP430/MSP430GenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/MSP430/MSP430GenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/MSP430/MSP430GenRegisterInfo.inc\",\n--+                    \"lib/Target/MSP430/MSP430GenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/MSP430/MSP430GenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/MSP430/MSP430GenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/MSP430/MSP430GenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/MSP430/MSP430GenSDNodeInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/MSP430/MSP430GenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"NVPTX\",\n--         \"short_name\": \"NVPTX\",\n---        \"tbl_outs\": {\n---            \"lib/Target/NVPTX/NVPTXGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/NVPTX/NVPTXGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/NVPTX/NVPTXGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/NVPTX/NVPTXGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/NVPTX/NVPTXGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/NVPTX/NVPTXGenRegisterInfo.inc\",\n--+                    \"lib/Target/NVPTX/NVPTXGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/NVPTX/NVPTXGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/NVPTX/NVPTXGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/NVPTX/NVPTXGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/NVPTX/NVPTXGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/NVPTX/NVPTXGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/NVPTX/NVPTXGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/NVPTX/NVPTXGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"PowerPC\",\n--         \"short_name\": \"PPC\",\n---        \"tbl_outs\": {\n---            \"lib/Target/PowerPC/PPCGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/PowerPC/PPCGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/PowerPC/PPCGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/PowerPC/PPCGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/PowerPC/PPCGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/PowerPC/PPCGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/PowerPC/PPCGenFastISel.inc\": [\"-gen-fast-isel\"],\n---            \"lib/Target/PowerPC/PPCGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/PowerPC/PPCGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/PowerPC/PPCGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/PowerPC/PPCGenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/PowerPC/PPCGenGlobalISel.inc\": [\"-gen-global-isel\"],\n---            \"lib/Target/PowerPC/PPCGenExegesis.inc\": [\"-gen-exegesis\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/PowerPC/PPCGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/PowerPC/PPCGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/PowerPC/PPCGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/PowerPC/PPCGenRegisterInfo.inc\",\n--+                    \"lib/Target/PowerPC/PPCGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/PowerPC/PPCGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/PowerPC/PPCGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/PowerPC/PPCGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/PowerPC/PPCGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/PowerPC/PPCGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-fast-isel\"],\n--+                \"lib/Target/PowerPC/PPCGenFastISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/PowerPC/PPCGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/PowerPC/PPCGenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/PowerPC/PPCGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/PowerPC/PPCGenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-global-isel\"],\n--+                \"lib/Target/PowerPC/PPCGenGlobalISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-exegesis\"],\n--+                \"lib/Target/PowerPC/PPCGenExegesis.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"RISCV\",\n--         \"short_name\": \"RISCV\",\n---        \"tbl_outs\": {\n---            \"lib/Target/RISCV/RISCVGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/RISCV/RISCVGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/RISCV/RISCVGenCompressInstEmitter.inc\": [\"-gen-compress-inst-emitter\"],\n---            \"lib/Target/RISCV/RISCVGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/RISCV/RISCVGenDisassemblerTables.inc\": [\n---                \"-gen-disassembler\",\n---                \"--specialize-decoders-per-bitwidth\",\n---            ],\n---            \"lib/Target/RISCV/RISCVGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/RISCV/RISCVGenMacroFusion.inc\": [\"-gen-macro-fusion-pred\"],\n---            \"lib/Target/RISCV/RISCVGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/RISCV/RISCVGenMCPseudoLowering.inc\": [\"-gen-pseudo-lowering\"],\n---            \"lib/Target/RISCV/RISCVGenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/RISCV/RISCVGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/RISCV/RISCVGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/RISCV/RISCVGenSearchableTables.inc\": [\"-gen-searchable-tables\"],\n---            \"lib/Target/RISCV/RISCVGenExegesis.inc\": [\"-gen-exegesis\"],\n---            \"lib/Target/RISCV/RISCVGenSDNodeInfo.inc\": [\"-gen-sd-node-info\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/RISCV/RISCVGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/RISCV/RISCVGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-compress-inst-emitter\"],\n--+                \"lib/Target/RISCV/RISCVGenCompressInstEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/RISCV/RISCVGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-disassembler\",\n--+                    \"--specialize-decoders-per-bitwidth\",\n--+                ],\n--+                \"lib/Target/RISCV/RISCVGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/RISCV/RISCVGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-macro-fusion-pred\"],\n--+                \"lib/Target/RISCV/RISCVGenMacroFusion.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/RISCV/RISCVGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-pseudo-lowering\"],\n--+                \"lib/Target/RISCV/RISCVGenMCPseudoLowering.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/RISCV/RISCVGenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/RISCV/RISCVGenRegisterInfo.inc\",\n--+                    \"lib/Target/RISCV/RISCVGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/RISCV/RISCVGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/RISCV/RISCVGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/RISCV/RISCVGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/RISCV/RISCVGenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-searchable-tables\"],\n--+                \"lib/Target/RISCV/RISCVGenSearchableTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-exegesis\"],\n--+                \"lib/Target/RISCV/RISCVGenExegesis.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/RISCV/RISCVGenSDNodeInfo.inc\",\n--+            ),\n--+        ],\n--         \"tbl_deps\": [\n--             \":riscv_isel_target_gen\",\n--         ],\n--@@ -2473,135 +3017,400 @@\n--     {\n--         \"name\": \"Sparc\",\n--         \"short_name\": \"Sparc\",\n---        \"tbl_outs\": {\n---            \"lib/Target/Sparc/SparcGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/Sparc/SparcGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/Sparc/SparcGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/Sparc/SparcGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/Sparc/SparcGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/Sparc/SparcGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/Sparc/SparcGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/Sparc/SparcGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/Sparc/SparcGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/Sparc/SparcGenSearchableTables.inc\": [\"-gen-searchable-tables\"],\n---            \"lib/Target/Sparc/SparcGenSDNodeInfo.inc\": [\n---                \"-gen-sd-node-info\",\n---                \"-sdnode-namespace=SPISD\",\n---            ],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/Sparc/SparcGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/Sparc/SparcGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/Sparc/SparcGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/Sparc/SparcGenRegisterInfo.inc\",\n--+                    \"lib/Target/Sparc/SparcGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/Sparc/SparcGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/Sparc/SparcGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/Sparc/SparcGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/Sparc/SparcGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/Sparc/SparcGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/Sparc/SparcGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/Sparc/SparcGenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/Sparc/SparcGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-searchable-tables\"],\n--+                \"lib/Target/Sparc/SparcGenSearchableTables.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-sd-node-info\",\n--+                    \"-sdnode-namespace=SPISD\",\n--+                ],\n--+                \"lib/Target/Sparc/SparcGenSDNodeInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"SPIRV\",\n--         \"short_name\": \"SPIRV\",\n---        \"tbl_outs\": {\n---            \"lib/Target/SPIRV/SPIRVGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/SPIRV/SPIRVGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/SPIRV/SPIRVGenGlobalISel.inc\": [\"-gen-global-isel\"],\n---            \"lib/Target/SPIRV/SPIRVGenPreLegalizeGICombiner.inc\": [\n---                \"-gen-global-isel-combiner\",\n---                \"-combiners=SPIRVPreLegalizerCombiner\",\n---            ],\n---            \"lib/Target/SPIRV/SPIRVGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/SPIRV/SPIRVGenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/SPIRV/SPIRVGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/SPIRV/SPIRVGenTables.inc\": [\"-gen-searchable-tables\"],\n---            \"lib/Target/SPIRV/SPIRVGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/SPIRV/SPIRVGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/SPIRV/SPIRVGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-global-isel\"],\n--+                \"lib/Target/SPIRV/SPIRVGenGlobalISel.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-global-isel-combiner\",\n--+                    \"-combiners=SPIRVPreLegalizerCombiner\",\n--+                ],\n--+                \"lib/Target/SPIRV/SPIRVGenPreLegalizeGICombiner.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/SPIRV/SPIRVGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/SPIRV/SPIRVGenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/SPIRV/SPIRVGenRegisterInfo.inc\",\n--+                    \"lib/Target/SPIRV/SPIRVGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/SPIRV/SPIRVGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/SPIRV/SPIRVGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/SPIRV/SPIRVGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-searchable-tables\"],\n--+                \"lib/Target/SPIRV/SPIRVGenTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/SPIRV/SPIRVGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"SystemZ\",\n--         \"short_name\": \"SystemZ\",\n---        \"tbl_outs\": {\n---            \"lib/Target/SystemZ/SystemZGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/SystemZ/SystemZGenGNUAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/SystemZ/SystemZGenHLASMAsmWriter.inc\": [\n---                \"-gen-asm-writer\",\n---                \"-asmwriternum=1\",\n---            ],\n---            \"lib/Target/SystemZ/SystemZGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/SystemZ/SystemZGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/SystemZ/SystemZGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/SystemZ/SystemZGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/SystemZ/SystemZGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/SystemZ/SystemZGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/SystemZ/SystemZGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/SystemZ/SystemZGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/SystemZ/SystemZGenGNUAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-asm-writer\",\n--+                    \"-asmwriternum=1\",\n--+                ],\n--+                \"lib/Target/SystemZ/SystemZGenHLASMAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/SystemZ/SystemZGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/SystemZ/SystemZGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/SystemZ/SystemZGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/SystemZ/SystemZGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/SystemZ/SystemZGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/SystemZ/SystemZGenRegisterInfo.inc\",\n--+                    \"lib/Target/SystemZ/SystemZGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/SystemZ/SystemZGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/SystemZ/SystemZGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/SystemZ/SystemZGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/SystemZ/SystemZGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"VE\",\n--         \"short_name\": \"VE\",\n---        \"tbl_outs\": {\n---            \"lib/Target/VE/VEGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/VE/VEGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/VE/VEGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/VE/VEGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/VE/VEGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/VE/VEGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/VE/VEGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/VE/VEGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/VE/VEGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/VE/VEGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/VE/VEGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/VE/VEGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/VE/VEGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/VE/VEGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/VE/VEGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/VE/VEGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/VE/VEGenRegisterInfo.inc\",\n--+                    \"lib/Target/VE/VEGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/VE/VEGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/VE/VEGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/VE/VEGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/VE/VEGenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/VE/VEGenSDNodeInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"WebAssembly\",\n--         \"short_name\": \"WebAssembly\",\n---        \"tbl_outs\": {\n---            \"lib/Target/WebAssembly/WebAssemblyGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenFastISel.inc\": [\"-gen-fast-isel\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/WebAssembly/WebAssemblyGenSDNodeInfo.inc\": [\"-gen-sd-node-info\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-fast-isel\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenFastISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-emitter\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenMCCodeEmitter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/WebAssembly/WebAssemblyGenRegisterInfo.inc\",\n--+                    \"lib/Target/WebAssembly/WebAssemblyGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/WebAssembly/WebAssemblyGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/WebAssembly/WebAssemblyGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/WebAssembly/WebAssemblyGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/WebAssembly/WebAssemblyGenSDNodeInfo.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"X86\",\n--         \"short_name\": \"X86\",\n---        \"tbl_outs\": {\n---            \"lib/Target/X86/X86GenRegisterBank.inc\": [\"-gen-register-bank\"],\n---            \"lib/Target/X86/X86GenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/X86/X86GenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/X86/X86GenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/X86/X86GenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/X86/X86GenAsmWriter1.inc\": [\n---                \"-gen-asm-writer\",\n---                \"-asmwriternum=1\",\n---            ],\n---            \"lib/Target/X86/X86GenAsmMatcher.inc\": [\"-gen-asm-matcher\"],\n---            \"lib/Target/X86/X86GenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/X86/X86GenFastISel.inc\": [\"-gen-fast-isel\"],\n---            \"lib/Target/X86/X86GenGlobalISel.inc\": [\"-gen-global-isel\"],\n---            \"lib/Target/X86/X86GenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/X86/X86GenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---            \"lib/Target/X86/X86GenFoldTables.inc\": [\n---                \"-gen-x86-fold-tables\",\n---                \"-asmwriternum=1\",\n---            ],\n---            \"lib/Target/X86/X86GenInstrMapping.inc\": [\"-gen-x86-instr-mapping\"],\n---            \"lib/Target/X86/X86GenExegesis.inc\": [\"-gen-exegesis\"],\n---            \"lib/Target/X86/X86GenMnemonicTables.inc\": [\n---                \"-gen-x86-mnemonic-tables\",\n---                \"-asmwriternum=1\",\n---            ],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-register-bank\"],\n--+                \"lib/Target/X86/X86GenRegisterBank.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/X86/X86GenRegisterInfo.inc\",\n--+                    \"lib/Target/X86/X86GenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/X86/X86GenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/X86/X86GenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/X86/X86GenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/X86/X86GenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/X86/X86GenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/X86/X86GenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-asm-writer\",\n--+                    \"-asmwriternum=1\",\n--+                ],\n--+                \"lib/Target/X86/X86GenAsmWriter1.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-asm-matcher\"],\n--+                \"lib/Target/X86/X86GenAsmMatcher.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/X86/X86GenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-fast-isel\"],\n--+                \"lib/Target/X86/X86GenFastISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-global-isel\"],\n--+                \"lib/Target/X86/X86GenGlobalISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/X86/X86GenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/X86/X86GenSubtargetInfo.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-x86-fold-tables\",\n--+                    \"-asmwriternum=1\",\n--+                ],\n--+                \"lib/Target/X86/X86GenFoldTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-x86-instr-mapping\"],\n--+                \"lib/Target/X86/X86GenInstrMapping.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-exegesis\"],\n--+                \"lib/Target/X86/X86GenExegesis.inc\",\n--+            ),\n--+            (\n--+                [\n--+                    \"-gen-x86-mnemonic-tables\",\n--+                    \"-asmwriternum=1\",\n--+                ],\n--+                \"lib/Target/X86/X86GenMnemonicTables.inc\",\n--+            ),\n--+        ],\n--     },\n--     {\n--         \"name\": \"XCore\",\n--         \"short_name\": \"XCore\",\n---        \"tbl_outs\": {\n---            \"lib/Target/XCore/XCoreGenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---            \"lib/Target/XCore/XCoreGenCallingConv.inc\": [\"-gen-callingconv\"],\n---            \"lib/Target/XCore/XCoreGenDAGISel.inc\": [\"-gen-dag-isel\"],\n---            \"lib/Target/XCore/XCoreGenDisassemblerTables.inc\": [\"-gen-disassembler\"],\n---            \"lib/Target/XCore/XCoreGenInstrInfo.inc\": [\"-gen-instr-info\"],\n---            \"lib/Target/XCore/XCoreGenRegisterInfo.inc\": [\"-gen-register-info\"],\n---            \"lib/Target/XCore/XCoreGenSDNodeInfo.inc\": [\"-gen-sd-node-info\"],\n---            \"lib/Target/XCore/XCoreGenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---        },\n--+        \"tbl_outs\": [\n--+            (\n--+                [\"-gen-asm-writer\"],\n--+                \"lib/Target/XCore/XCoreGenAsmWriter.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-callingconv\"],\n--+                \"lib/Target/XCore/XCoreGenCallingConv.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-dag-isel\"],\n--+                \"lib/Target/XCore/XCoreGenDAGISel.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-disassembler\"],\n--+                \"lib/Target/XCore/XCoreGenDisassemblerTables.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-instr-info\"],\n--+                \"lib/Target/XCore/XCoreGenInstrInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-register-info\"],\n--+                [\n--+                    \"lib/Target/XCore/XCoreGenRegisterInfo.inc\",\n--+                    \"lib/Target/XCore/XCoreGenRegisterInfoEnums.inc\",\n--+                    \"lib/Target/XCore/XCoreGenRegisterInfoMCDesc.inc\",\n--+                    \"lib/Target/XCore/XCoreGenRegisterInfoHeader.inc\",\n--+                    \"lib/Target/XCore/XCoreGenRegisterInfoTargetDesc.inc\",\n--+                ],\n--+            ),\n--+            (\n--+                [\"-gen-sd-node-info\"],\n--+                \"lib/Target/XCore/XCoreGenSDNodeInfo.inc\",\n--+            ),\n--+            (\n--+                [\"-gen-subtarget\"],\n--+                \"lib/Target/XCore/XCoreGenSubtargetInfo.inc\",\n--+            ),\n--+        ],\n--     },\n-- ] if lib[\"name\"] in llvm_targets]\n-++  _el_secondary_file.reset(\n-++      new NativeFile(pty.ReleaseSecondaryFileDescriptor(),\n-++                     lldb_private::NativeFile::eOpenOptionReadWrite, true));\n-+ \n-+   lldb::LockableStreamFileSP output_stream_sp =\n-+-      std::make_shared<LockableStreamFile>(*_el_secondary_file,\n-+-                                           NativeFile::Unowned, output_mutex);\n-++      std::make_shared<LockableStreamFile>(_el_secondary_file, output_mutex);\n-+   lldb::LockableStreamFileSP error_stream_sp =\n-+-      std::make_shared<LockableStreamFile>(*_el_secondary_file,\n-+-                                           NativeFile::Unowned, output_mutex);\n-++      std::make_shared<LockableStreamFile>(_el_secondary_file, output_mutex);\n-  \n--@@ -2639,16 +3448,46 @@\n-- gentbl_cc_library(\n--     name = \"r600_target_gen\",\n--     strip_include_prefix = \"lib/Target/AMDGPU\",\n---    tbl_outs = {\n---        \"lib/Target/AMDGPU/R600GenAsmWriter.inc\": [\"-gen-asm-writer\"],\n---        \"lib/Target/AMDGPU/R600GenCallingConv.inc\": [\"-gen-callingconv\"],\n---        \"lib/Target/AMDGPU/R600GenDAGISel.inc\": [\"-gen-dag-isel\"],\n---        \"lib/Target/AMDGPU/R600GenDFAPacketizer.inc\": [\"-gen-dfa-packetizer\"],\n---        \"lib/Target/AMDGPU/R600GenInstrInfo.inc\": [\"-gen-instr-info\"],\n---        \"lib/Target/AMDGPU/R600GenMCCodeEmitter.inc\": [\"-gen-emitter\"],\n---        \"lib/Target/AMDGPU/R600GenRegisterInfo.inc\": [\"-gen-register-info\"],\n---        \"lib/Target/AMDGPU/R600GenSubtargetInfo.inc\": [\"-gen-subtarget\"],\n---    },\n--+    tbl_outs = [\n--+        (\n--+            [\"-gen-asm-writer\"],\n--+            \"lib/Target/AMDGPU/R600GenAsmWriter.inc\",\n--+        ),\n--+        (\n--+            [\"-gen-callingconv\"],\n--+            \"lib/Target/AMDGPU/R600GenCallingConv.inc\",\n--+        ),\n--+        (\n--+            [\"-gen-dag-isel\"],\n--+            \"lib/Target/AMDGPU/R600GenDAGISel.inc\",\n--+        ),\n--+        (\n--+            [\"-gen-dfa-packetizer\"],\n--+            \"lib/Target/AMDGPU/R600GenDFAPacketizer.inc\",\n--+        ),\n--+        (\n--+            [\"-gen-instr-info\"],\n--+            \"lib/Target/AMDGPU/R600GenInstrInfo.inc\",\n--+        ),\n--+        (\n--+            [\"-gen-emitter\"],\n--+            \"lib/Target/AMDGPU/R600GenMCCodeEmitter.inc\",\n--+        ),\n--+        (\n--+            [\"-gen-register-info\"],\n--+            [\n--+                \"lib/Target/AMDGPU/R600GenRegisterInfo.inc\",\n--+                \"lib/Target/AMDGPU/R600GenRegisterInfoEnums.inc\",\n--+                \"lib/Target/AMDGPU/R600GenRegisterInfoMCDesc.inc\",\n--+                \"lib/Target/AMDGPU/R600GenRegisterInfoHeader.inc\",\n--+                \"lib/Target/AMDGPU/R600GenRegisterInfoTargetDesc.inc\",\n--+            ],\n--+        ),\n--+        (\n--+            [\"-gen-subtarget\"],\n--+            \"lib/Target/AMDGPU/R600GenSubtargetInfo.inc\",\n--+        ),\n--+    ],\n--     tblgen = \":llvm-tblgen\",\n--     td_file = \"lib/Target/AMDGPU/R600.td\",\n--     deps = [\n--@@ -3381,7 +4220,10 @@\n-- gentbl_cc_library(\n--     name = \"LibOptionsTableGen\",\n--     strip_include_prefix = \"lib/ToolDrivers/llvm-lib\",\n---    tbl_outs = {\"lib/ToolDrivers/llvm-lib/Options.inc\": [\"-gen-opt-parser-defs\"]},\n--+    tbl_outs = [(\n--+        [\"-gen-opt-parser-defs\"],\n--+        \"lib/ToolDrivers/llvm-lib/Options.inc\",\n--+    )],\n--     tblgen = \":llvm-tblgen\",\n--     td_file = \"lib/ToolDrivers/llvm-lib/Options.td\",\n--     deps = [\":OptParserTdFiles\"],\n--diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel b/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel\n----- a/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel\n--+++ b/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel\n--@@ -10318,6 +10318,8 @@\n--     ),\n--     includes = [\"include\"],\n--     deps = [\n--+        \":FunctionInterfaces\",\n--+        \":IR\",\n--         \":OpenACCDialect\",\n--         \":OpenACCOpsIncGen\",\n--         \":OpenACCPassIncGen\",\n--@@ -10325,6 +10327,7 @@\n--         \":Support\",\n--         \":ViewLikeInterface\",\n--         \"//llvm:Support\",\n--+        \"//llvm:ir_headers\",\n--     ],\n-- )\n-+   // Create an Editline instance.\n-+   _editline_sp.reset(new lldb_private::Editline(\n-+-      \"gtest editor\", *_el_secondary_file, output_stream_sp, error_stream_sp,\n-++      \"gtest editor\", _el_secondary_file->GetStream(), output_stream_sp,\n-++      error_stream_sp,\n-+       /*color=*/false));\n-+   _editline_sp->SetPrompt(\"> \");\n-  \n--@@ -13105,6 +13108,7 @@\n--         \":RuntimeVerifiableOpInterface\",\n--         \":ShapedOpInterfaces\",\n--         \":SideEffectInterfaces\",\n--+        \":UBDialect\",\n--         \":ValueBoundsOpInterface\",\n--         \":ViewLikeInterface\",\n--         \"//llvm:Support\",\n--diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/mlir/tblgen.bzl b/utils/bazel/llvm-project-overlay/mlir/tblgen.bzl\n----- a/utils/bazel/llvm-project-overlay/mlir/tblgen.bzl\n--+++ b/utils/bazel/llvm-project-overlay/mlir/tblgen.bzl\n--@@ -153,7 +153,7 @@\n--     args.add(\"-o\", ctx.outputs.out)\n-+@@ -140,7 +115,7 @@\n-  \n--     ctx.actions.run(\n---        outputs = [ctx.outputs.out],\n--+        outputs = [ctx.outputs.out] + ctx.outputs.additional_outputs,\n--         inputs = trans_srcs,\n--         executable = ctx.executable.tblgen,\n--         execution_requirements = {\"supports-path-mapping\": \"1\"},\n--@@ -195,6 +195,9 @@\n--             doc = \"The output file for the TableGen invocation.\",\n--             mandatory = True,\n--         ),\n--+        \"additional_outputs\": attr.output_list(\n--+            doc = \"Extra output files from the TableGen invocation. The primary 'out' is used for the -o argument.\",\n--+        ),\n--         \"opts\": attr.string_list(\n--             doc = \"Additional command line options to add to the TableGen\" +\n--                   \" invocation. For include arguments, prefer to use\" +\n--@@ -313,9 +316,12 @@\n--       name: The name of the generated filegroup rule for use in dependencies.\n--       tblgen: The binary used to produce the output.\n--       td_file: The primary table definitions file.\n---      tbl_outs: Either a dict {out: [opts]} or a list of tuples ([opts], out),\n---        where each 'opts' is a list of options passed to tblgen, each option\n---        being a string, and 'out' is the corresponding output file produced.\n--+      tbl_outs: Either a dict {out: [opts]}, a list of tuples ([opts], out),\n--+        or a list of tuples ([opts], [outs]). Each 'opts' is a list of options\n--+        passed to tblgen, each option being a string,\n--+        and 'out' is the corresponding output file produced. If 'outs' are used,\n--+        the first path in the list is passed to '-o' but tblgen is expected\n--+        to produce all listed outputs.\n--       td_srcs: See gentbl_rule.td_srcs\n--       includes: See gentbl_rule.includes\n--       deps: See gentbl_rule.deps\n--@@ -325,9 +331,14 @@\n--       **kwargs: Extra keyword arguments to pass to all generated rules.\n--     \"\"\"\n-+ void EditlineAdapter::CloseInput() {\n-+   if (_el_secondary_file != nullptr)\n-+-    _el_secondary_file.reset(nullptr);\n-++    _el_secondary_file->Close();\n-+ }\n-+ \n-+ bool EditlineAdapter::SendLine(const std::string &line) {\n-+@@ -148,19 +123,14 @@\n-+   if (!IsValid())\n-+     return false;\n-+ \n-++  std::string out = line + \"\\n\";\n-++\n-+   // Write the line out to the pipe connected to editline's input.\n-+-  ssize_t input_bytes_written =\n-+-      ::write(_pty_primary_fd, line.c_str(),\n-+-              line.length() * sizeof(std::string::value_type));\n-+-\n-+-  const char *eoln = \"\\n\";\n-+-  const size_t eoln_length = strlen(eoln);\n-+-  input_bytes_written =\n-+-      ::write(_pty_primary_fd, eoln, eoln_length * sizeof(char));\n-+-\n-+-  EXPECT_NE(-1, input_bytes_written) << strerror(errno);\n-+-  EXPECT_EQ(eoln_length * sizeof(char), size_t(input_bytes_written));\n-+-  return eoln_length * sizeof(char) == size_t(input_bytes_written);\n-++  size_t num_bytes = out.length() * sizeof(std::string::value_type);\n-++  EXPECT_THAT_ERROR(_el_primary_file->Write(out.c_str(), num_bytes).takeError(),\n-++                    llvm::Succeeded());\n-++  EXPECT_EQ(num_bytes, out.length() * sizeof(std::string::value_type));\n-++  return true;\n-+ }\n-  \n--+    included_srcs = []\n--     if type(tbl_outs) == type({}):\n--         tbl_outs = [(v, k) for k, v in tbl_outs.items()]\n---    for (opts, out) in tbl_outs:\n--+    for (opts, output_or_outputs) in tbl_outs:\n--+        outs = output_or_outputs if type(output_or_outputs) == type([]) else [output_or_outputs]\n--+        out = outs[0]\n--+        if not any([skip_opt in opts for skip_opt in skip_opts]):\n--+            included_srcs.extend(outs)\n--         first_opt = opts[0] if opts else \"\"\n--         rule_suffix = \"_{}_{}\".format(\n--             first_opt.replace(\"-\", \"_\").replace(\"=\", \"_\"),\n--@@ -343,6 +354,7 @@\n--             deps = deps,\n--             includes = includes,\n--             out = out,\n--+            additional_outputs = outs[1:],\n--             **kwargs\n--         )\n-+ bool EditlineAdapter::SendLines(const std::vector<std::string> &lines) {\n-+@@ -215,7 +185,7 @@\n-+ }\n-  \n--@@ -364,7 +376,6 @@\n--                 **kwargs\n--             )\n-+ void EditlineAdapter::ConsumeAllOutput() {\n-+-  FilePointer output_file(fdopen(_pty_primary_fd, \"r\"));\n-++  FILE *output_file = _el_primary_file->GetStream();\n-  \n---    included_srcs = [f for (opts, f) in tbl_outs if not any([skip_opt in opts for skip_opt in skip_opts])]\n--     native.filegroup(\n--         name = name,\n--         srcs = included_srcs,\n-+   int ch;\n-+   while ((ch = fgetc(output_file)) != EOF) {\n-+diff -ruN --strip-trailing-cr a/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir b/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n-+--- a/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n-++++ b/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n-+@@ -1,4 +1,4 @@\n-+-# RUN: not llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx950 -run-pass=greedy,amdgpu-rewrite-agpr-copy-mfma -verify-machineinstrs -o - %s 2>&1 | FileCheck %s\n-++# RUN: not --crash llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx950 -run-pass=greedy,amdgpu-rewrite-agpr-copy-mfma -verify-machineinstrs -o - %s 2>&1 | FileCheck %s\n-+ # CHECK: Illegal virtual register for instruction\n-+ # CHECK: Expected a VGPR_32 register, but got a AGPR_32 register\n-+  \n+-   // Write the line out to the pipe connected to editline's input.\n+--  ssize_t input_bytes_written =\n+--      ::write(_pty_primary_fd, line.c_str(),\n+--              line.length() * sizeof(std::string::value_type));\n+--\n+--  const char *eoln = \"\\n\";\n+--  const size_t eoln_length = strlen(eoln);\n+--  input_bytes_written =\n+--      ::write(_pty_primary_fd, eoln, eoln_length * sizeof(char));\n+--\n+--  EXPECT_NE(-1, input_bytes_written) << strerror(errno);\n+--  EXPECT_EQ(eoln_length * sizeof(char), size_t(input_bytes_written));\n+--  return eoln_length * sizeof(char) == size_t(input_bytes_written);\n+-+  size_t num_bytes = out.length() * sizeof(std::string::value_type);\n+-+  EXPECT_THAT_ERROR(_el_primary_file->Write(out.c_str(), num_bytes).takeError(),\n+-+                    llvm::Succeeded());\n+-+  EXPECT_EQ(num_bytes, out.length() * sizeof(std::string::value_type));\n+-+  return true;\n+- }\n+- \n+- bool EditlineAdapter::SendLines(const std::vector<std::string> &lines) {\n+-@@ -215,7 +185,7 @@\n+- }\n+- \n+- void EditlineAdapter::ConsumeAllOutput() {\n+--  FilePointer output_file(fdopen(_pty_primary_fd, \"r\"));\n+-+  FILE *output_file = _el_primary_file->GetStream();\n+- \n+-   int ch;\n+-   while ((ch = fgetc(output_file)) != EOF) {\n+-diff -ruN --strip-trailing-cr a/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir b/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n+---- a/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n+-+++ b/llvm/test/CodeGen/AMDGPU/rewrite-vgpr-mfma-scale-to-agpr.mir\n+-@@ -1,4 +1,4 @@\n+--# RUN: not llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx950 -run-pass=greedy,amdgpu-rewrite-agpr-copy-mfma -verify-machineinstrs -o - %s 2>&1 | FileCheck %s\n+-+# RUN: not --crash llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx950 -run-pass=greedy,amdgpu-rewrite-agpr-copy-mfma -verify-machineinstrs -o - %s 2>&1 | FileCheck %s\n+- # CHECK: Illegal virtual register for instruction\n+- # CHECK: Expected a VGPR_32 register, but got a AGPR_32 register\n+-  \n++diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/clang/BUILD.bazel b/utils/bazel/llvm-project-overlay/clang/BUILD.bazel\n++--- a/utils/bazel/llvm-project-overlay/clang/BUILD.bazel\n+++++ b/utils/bazel/llvm-project-overlay/clang/BUILD.bazel\n++@@ -1563,7 +1563,6 @@\n++         \":basic\",\n++         \":config\",\n++         \":driver_options_inc_gen\",\n++-        \":frontend\",\n++         \":lex\",\n++         \":options\",\n++         \":parse\",\n++@@ -1719,6 +1718,7 @@\n++         \":ast\",\n++         \":basic\",\n++         \":config\",\n+++        \":driver\",\n++         \":driver_options_inc_gen\",\n++         \":edit\",\n++         \":lex\",\n diff --git a/third_party/llvm/workspace.bzl b/third_party/llvm/workspace.bzl\n-index a001d88..1157959 100644\n+index 1157959..8e6cbc9 100644\n --- a/third_party/llvm/workspace.bzl\n +++ b/third_party/llvm/workspace.bzl\n @@ -4,8 +4,8 @@ load(\"//third_party:repo.bzl\", \"tf_http_archive\")\n  \n  def repo(name):\n      \"\"\"Imports LLVM.\"\"\"\n--    LLVM_COMMIT = \"d65be16ab6adf00af21e75d29049ae5de0f3a38a\"\n--    LLVM_SHA256 = \"8eaf93ab6428454242e5c0e8edfb875f70cd062d010d388eb9c2c4ba8c9cb4bd\"\n-+    LLVM_COMMIT = \"f2cb5d7a05bacb3e39df8dd355b2fbd16f96c856\"\n-+    LLVM_SHA256 = \"57cb1ed943a6b62a62a1a239db81bf4ae93ba252022aef2d0efb8f8d8a46f404\"\n+-    LLVM_COMMIT = \"f2cb5d7a05bacb3e39df8dd355b2fbd16f96c856\"\n+-    LLVM_SHA256 = \"57cb1ed943a6b62a62a1a239db81bf4ae93ba252022aef2d0efb8f8d8a46f404\"\n++    LLVM_COMMIT = \"dea330b38d9c18b68219abdb52baaa72c9f1103d\"\n++    LLVM_SHA256 = \"0f00dd4e0d61e49051b09169450af0c5ca364bf7e3f015794089455ae8c8555c\"\n  \n      tf_http_archive(\n          name = name,"
        },
        {
            "sha": "2bbe8ba0688cad3321d44ebc3004e846bf85cd29",
            "filename": "third_party/xla/third_party/shardy/workspace.bzl",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5e73b75a05eaba3aef095fdfded88e6e9419e040/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5e73b75a05eaba3aef095fdfded88e6e9419e040/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl?ref=5e73b75a05eaba3aef095fdfded88e6e9419e040",
            "patch": "@@ -3,8 +3,8 @@\n load(\"//third_party:repo.bzl\", \"tf_http_archive\", \"tf_mirror_urls\")\n \n def repo():\n-    SHARDY_COMMIT = \"6e8986ce5b3921ec2291b6daaac7aaccf6605fac\"\n-    SHARDY_SHA256 = \"4d481a546c8e2b0bb789147278171734ae9a94ec47f0b015d44780cb5ad186b6\"\n+    SHARDY_COMMIT = \"43786fc5cef24be5dedbeec7210f75fa0d1ee404\"\n+    SHARDY_SHA256 = \"49e69cd4b492629fe413a63fe0be84441c976e3616aa289bde9e7a7ca58c256c\"\n \n     tf_http_archive(\n         name = \"shardy\","
        }
    ],
    "stats": {
        "total": 2718,
        "additions": 353,
        "deletions": 2365
    }
}