{
    "author": "apivovarov",
    "message": "Use absl::StrAppend for string building.\n\nThis change\n\n- Replaces string concatenation with absl::StrAppend for efficiency\n\n- Updates usages of se::DeviceMemoryBase to se::DeviceAddressBase, reflecting a type renaming.\n\nPiperOrigin-RevId: 841899098",
    "sha": "5380ac8c2e7b8f20046d1115eee73d0cc4e464e3",
    "files": [
        {
            "sha": "23227934cd3775f6f74c731020cc793fe12e9e09",
            "filename": "third_party/xla/xla/backends/gpu/runtime/dynamic_slice_thunk.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 15,
            "changes": 32,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/5380ac8c2e7b8f20046d1115eee73d0cc4e464e3/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fdynamic_slice_thunk.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/5380ac8c2e7b8f20046d1115eee73d0cc4e464e3/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fdynamic_slice_thunk.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fdynamic_slice_thunk.cc?ref=5380ac8c2e7b8f20046d1115eee73d0cc4e464e3",
            "patch": "@@ -118,15 +118,17 @@ std::string DynamicSliceThunk::SliceDef::ToString() const {\n \n   // embedded_thunk_argument\n   if (embedded_thunk_argument.has_value()) {\n-    result += \"embedded_thunk_argument:\" + embedded_thunk_argument->ToString();\n+    absl::StrAppend(&result, \"embedded_thunk_argument:\",\n+                    embedded_thunk_argument->ToString());\n   } else {\n-    result += \"embedded_thunk_argument:null\";\n+    absl::StrAppend(&result, \"embedded_thunk_argument:null\");\n   }\n \n   // offsets\n   if (offsets.has_value()) {\n-    result += \", offsets:[\";\n-    result +=\n+    absl::StrAppend(&result, \", offsets:[\");\n+    absl::StrAppend(\n+        &result,\n         absl::StrJoin(*offsets, \", \", [](std::string* out, const auto& offset) {\n           std::visit(\n               [out](const auto& value) {\n@@ -141,34 +143,34 @@ std::string DynamicSliceThunk::SliceDef::ToString() const {\n                 }\n               },\n               offset);\n-        });\n-    result += \"]\";\n+        }));\n+    absl::StrAppend(&result, \"]\");\n   } else {\n-    result += \", offsets:null\";\n+    absl::StrAppend(&result, \", offsets:null\");\n   }\n \n   // orig_shape\n   if (orig_shape.has_value()) {\n-    result += \", orig_shape:\" + orig_shape->ToString();\n+    absl::StrAppend(&result, \", orig_shape:\", orig_shape->ToString());\n   } else {\n-    result += \", orig_shape:null\";\n+    absl::StrAppend(&result, \", orig_shape:null\");\n   }\n \n   // sliced_shape\n   if (sliced_shape.has_value()) {\n-    result += \", sliced_shape:\" + sliced_shape->ToString();\n+    absl::StrAppend(&result, \", sliced_shape:\", sliced_shape->ToString());\n   } else {\n-    result += \", sliced_shape:null\";\n+    absl::StrAppend(&result, \", sliced_shape:null\");\n   }\n \n   // offset_byte_size\n   if (offset_byte_size.has_value()) {\n-    result += \", offset_byte_size:\" + absl::StrCat(*offset_byte_size);\n+    absl::StrAppend(&result, \", offset_byte_size:\", *offset_byte_size);\n   } else {\n-    result += \", offset_byte_size:null\";\n+    absl::StrAppend(&result, \", offset_byte_size:null\");\n   }\n \n-  result += \"}\";\n+  absl::StrAppend(&result, \"}\");\n   return result;\n }\n \n@@ -243,7 +245,7 @@ absl::Status DynamicSliceThunk::Prepare(const PrepareParams& params) {\n         HloEvaluator()\n             .Evaluate(\n                 /*module=*/*offset_as_function_of_indvar_metadata_->indvar_init,\n-                /*arg_literals=*/{})\n+                /*args=*/{})\n             .value();\n     VLOG(2) << \"Indvar init module: \"\n             << offset_as_function_of_indvar_metadata_->indvar_init->ToString();"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 17,
        "deletions": 15
    }
}