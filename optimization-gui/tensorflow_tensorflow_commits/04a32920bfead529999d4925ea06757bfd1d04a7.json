{
    "author": "ezhulenev",
    "message": "[xla] Delete PjRtFuture<>::MoveOnlyPromise\n\nPiperOrigin-RevId: 809394462",
    "sha": "04a32920bfead529999d4925ea06757bfd1d04a7",
    "files": [
        {
            "sha": "6e50db651975cde76c700f87ebb5c84d38f7de05",
            "filename": "third_party/xla/xla/pjrt/common_pjrt_client.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/04a32920bfead529999d4925ea06757bfd1d04a7/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/04a32920bfead529999d4925ea06757bfd1d04a7/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.cc?ref=04a32920bfead529999d4925ea06757bfd1d04a7",
            "patch": "@@ -91,7 +91,7 @@ PjRtFuture<> CommonPjRtClient::CreateProfiledFuture(\n       });\n }\n \n-std::pair<PjRtFuture<>::MoveOnlyPromise, PjRtFuture<>>\n+std::pair<PjRtFuture<>::Promise, PjRtFuture<>>\n CommonPjRtClient::CreateLinkedUserPromise(PjRtMemorySpace* memory_space,\n                                           const char* callee_type,\n                                           const char* callee_method,"
        },
        {
            "sha": "a188f3cdca2a901e7b49aa780df6096e01516454",
            "filename": "third_party/xla/xla/pjrt/common_pjrt_client.h",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/04a32920bfead529999d4925ea06757bfd1d04a7/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/04a32920bfead529999d4925ea06757bfd1d04a7/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fcommon_pjrt_client.h?ref=04a32920bfead529999d4925ea06757bfd1d04a7",
            "patch": "@@ -137,10 +137,9 @@ class CommonPjRtClient : public PjRtClient {\n   // Create a linked PjRtFuture<> and ::Promise pair for operations on\n   // buffers in memory_space which populates debug information like linked\n   // tracmes.\n-  std::pair<PjRtFuture<>::MoveOnlyPromise, PjRtFuture<>>\n-  CreateLinkedUserPromise(PjRtMemorySpace* memory_space,\n-                          const char* callee_type, const char* callee_method,\n-                          absl::string_view debug_info);\n+  std::pair<PjRtFuture<>::Promise, PjRtFuture<>> CreateLinkedUserPromise(\n+      PjRtMemorySpace* memory_space, const char* callee_type,\n+      const char* callee_method, absl::string_view debug_info);\n \n   template <typename T, std::enable_if_t<std::is_invocable_v<T>, bool> = true>\n   absl::StatusOr<std::pair<tsl::RCReference<PjRtDeviceEventPromise>,"
        },
        {
            "sha": "2123d55106b19c4d9fdc5dd3e27ee6d36e099e52",
            "filename": "third_party/xla/xla/pjrt/host_callback.h",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/04a32920bfead529999d4925ea06757bfd1d04a7/third_party%2Fxla%2Fxla%2Fpjrt%2Fhost_callback.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/04a32920bfead529999d4925ea06757bfd1d04a7/third_party%2Fxla%2Fxla%2Fpjrt%2Fhost_callback.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fhost_callback.h?ref=04a32920bfead529999d4925ea06757bfd1d04a7",
            "patch": "@@ -84,8 +84,7 @@ class ThreadSafePjRtChunkQueue {\n   absl::Mutex mu_;\n   std::deque<PjRtChunk> queue_ ABSL_GUARDED_BY(mu_);\n   // Contains unfulfilled pop promises.\n-  std::deque<PjRtFuture<PjRtChunk>::MoveOnlyPromise> promises_\n-      ABSL_GUARDED_BY(mu_);\n+  std::deque<PjRtFuture<PjRtChunk>::Promise> promises_ ABSL_GUARDED_BY(mu_);\n };\n \n struct HostCallbackArgInfo {"
        },
        {
            "sha": "c756b683aae6ef9dbe523ce81be4081b5999efd4",
            "filename": "third_party/xla/xla/pjrt/pjrt_stream_executor_client.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/04a32920bfead529999d4925ea06757bfd1d04a7/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/04a32920bfead529999d4925ea06757bfd1d04a7/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_stream_executor_client.cc?ref=04a32920bfead529999d4925ea06757bfd1d04a7",
            "patch": "@@ -1967,7 +1967,7 @@ void PjRtStreamExecutorBuffer::CopyToRemoteDevice(\n \n PjRtFuture<> PjRtStreamExecutorBuffer::GetReadyFuture() {\n   absl::InlinedVector<BufferSequencingEventRef, 2> definition_events;\n-  PjRtFuture<>::MoveOnlyPromise definition_promise;\n+  PjRtFuture<>::Promise definition_promise;\n   PjRtFuture<> definition_future;\n   {\n     absl::MutexLock lock(&mu_);"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 6,
        "deletions": 8
    }
}