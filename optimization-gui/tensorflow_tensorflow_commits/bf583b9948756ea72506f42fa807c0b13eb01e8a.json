{
    "author": "penpornk",
    "message": "[xla:cpu:onednn] Add missing `dnnl_threadpool.hpp` includes.\n\nThis is for `dnnl::threadpool_interop::make_stream` symbol. The existing `dnnl.hpp` includes indirectly add `dnnl_threadpool.hpp`, but we prefer including all used headers directly.\n\nPiperOrigin-RevId: 810772894",
    "sha": "bf583b9948756ea72506f42fa807c0b13eb01e8a",
    "files": [
        {
            "sha": "d15ec3034a93c9c8f95ac10914723b4164d4af27",
            "filename": "tensorflow/core/util/mkl_util.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf583b9948756ea72506f42fa807c0b13eb01e8a/tensorflow%2Fcore%2Futil%2Fmkl_util.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf583b9948756ea72506f42fa807c0b13eb01e8a/tensorflow%2Fcore%2Futil%2Fmkl_util.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Futil%2Fmkl_util.h?ref=bf583b9948756ea72506f42fa807c0b13eb01e8a",
            "patch": "@@ -24,7 +24,8 @@ limitations under the License.\n #include <utility>\n #include <vector>\n \n-#include \"dnnl.hpp\"\n+#include \"oneapi/dnnl/dnnl.hpp\"\n+#include \"oneapi/dnnl/dnnl_threadpool.hpp\"\n #include \"tensorflow/core/framework/op_kernel.h\"\n #include \"tensorflow/core/framework/tensor.h\"\n #include \"tensorflow/core/framework/tensor_shape.h\""
        },
        {
            "sha": "13ebd54185620ef8a876920fc24f75231557c06d",
            "filename": "third_party/xla/xla/backends/cpu/runtime/onednn/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fonednn%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fonednn%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fonednn%2FBUILD?ref=bf583b9948756ea72506f42fa807c0b13eb01e8a",
            "patch": "@@ -132,6 +132,7 @@ cc_library(\n         \"//xla/service/cpu:onednn_util\",\n         \"//xla/stream_executor:device_memory\",\n         \"//xla/tsl/concurrency:async_value\",\n+        \"//xla/tsl/mkl:onednn\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/base\","
        },
        {
            "sha": "2d0f8a65f966a5290672e570fb15545f1dc03fef",
            "filename": "third_party/xla/xla/backends/cpu/runtime/onednn/onednn_op_thunk.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fonednn%2Fonednn_op_thunk.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fonednn%2Fonednn_op_thunk.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fruntime%2Fonednn%2Fonednn_op_thunk.cc?ref=bf583b9948756ea72506f42fa807c0b13eb01e8a",
            "patch": "@@ -30,6 +30,7 @@ limitations under the License.\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/str_format.h\"\n #include \"absl/types/span.h\"\n+#include \"oneapi/dnnl/dnnl_threadpool.hpp\"\n #include \"xla/backends/cpu/runtime/onednn/onednn_threadpool.h\"\n #include \"xla/backends/cpu/runtime/thunk.h\"\n #include \"xla/runtime/buffer_use.h\""
        },
        {
            "sha": "e9b63e97fc7802dc9be1700eec9256112c8c9904",
            "filename": "third_party/xla/xla/service/cpu/onednn_convolution.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_convolution.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_convolution.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_convolution.cc?ref=bf583b9948756ea72506f42fa807c0b13eb01e8a",
            "patch": "@@ -28,6 +28,7 @@ limitations under the License.\n #include \"absl/base/dynamic_annotations.h\"\n #include \"unsupported/Eigen/CXX11/Tensor\"\n #include \"dnnl.hpp\"\n+#include \"oneapi/dnnl/dnnl_threadpool.hpp\"\n #include \"xla/executable_run_options.h\"\n #include \"xla/hlo/ir/hlo_casting_utils.h\"\n #include \"xla/hlo/ir/hlo_instructions.h\""
        },
        {
            "sha": "66cc63b43ff32c190ca22b185b4197afd04a4472",
            "filename": "third_party/xla/xla/service/cpu/onednn_layer_norm.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_layer_norm.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_layer_norm.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_layer_norm.cc?ref=bf583b9948756ea72506f42fa807c0b13eb01e8a",
            "patch": "@@ -26,6 +26,7 @@ limitations under the License.\n \n #include \"absl/base/dynamic_annotations.h\"\n #include \"dnnl.hpp\"\n+#include \"oneapi/dnnl/dnnl_threadpool.hpp\"\n #include \"xla/executable_run_options.h\"\n #include \"xla/service/cpu/backend_config.pb.h\"\n #include \"xla/service/cpu/onednn_config.pb.h\""
        },
        {
            "sha": "bf2b3ad11cce0f81dbfe7e188265f10f93512f55",
            "filename": "third_party/xla/xla/service/cpu/onednn_softmax.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_softmax.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bf583b9948756ea72506f42fa807c0b13eb01e8a/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_softmax.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Fonednn_softmax.cc?ref=bf583b9948756ea72506f42fa807c0b13eb01e8a",
            "patch": "@@ -22,6 +22,7 @@ limitations under the License.\n \n #include \"absl/base/dynamic_annotations.h\"\n #include \"dnnl.hpp\"\n+#include \"oneapi/dnnl/dnnl_threadpool.hpp\"\n #include \"xla/executable_run_options.h\"\n #include \"xla/service/cpu/backend_config.pb.h\"\n #include \"xla/service/cpu/onednn_config.pb.h\""
        }
    ],
    "stats": {
        "total": 8,
        "additions": 7,
        "deletions": 1
    }
}