{
    "author": "yangustc07",
    "message": "#tf-data-service Fix a flaky test.\n\nWhen sharing a job using dynamic sharding, one dataset may be empty.\n\nPiperOrigin-RevId: 817700132",
    "sha": "62069d7c0b2403194dd66b4375644bc1a6f39a81",
    "files": [
        {
            "sha": "85b4e232a1c73a1df54d4ff023b1b40eb20c186c",
            "filename": "tensorflow/python/data/experimental/kernel_tests/service/dynamic_sharding_test.py",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/62069d7c0b2403194dd66b4375644bc1a6f39a81/tensorflow%2Fpython%2Fdata%2Fexperimental%2Fkernel_tests%2Fservice%2Fdynamic_sharding_test.py",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/62069d7c0b2403194dd66b4375644bc1a6f39a81/tensorflow%2Fpython%2Fdata%2Fexperimental%2Fkernel_tests%2Fservice%2Fdynamic_sharding_test.py",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fpython%2Fdata%2Fexperimental%2Fkernel_tests%2Fservice%2Fdynamic_sharding_test.py?ref=62069d7c0b2403194dd66b4375644bc1a6f39a81",
            "patch": "@@ -461,12 +461,9 @@ def testMultipleRegistration(self):\n     output = []\n     iter1 = self.getNext(dataset1)\n     iter2 = self.getNext(dataset2)\n-    for _ in range(5):\n-      output.append(self.evaluate(iter1()))\n-      output.append(self.evaluate(iter2()))\n     output.extend(self.getIteratorOutput(iter1))\n     output.extend(self.getIteratorOutput(iter2))\n-    self.assertEqual(sorted(output), list(range(100)))\n+    self.assertCountEqual(output, list(range(100)))\n \n   @combinations.generate(test_base.default_test_combinations())\n   def testDifferentDatasetIdsForSameJob(self):"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 1,
        "deletions": 4
    }
}