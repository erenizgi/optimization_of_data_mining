{
    "author": "pifon2a",
    "message": "[XLA:GPU] Remove unused mlir::Value fields in CollectiveThunk::Buffer.\n\nPiperOrigin-RevId: 818477433",
    "sha": "bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e",
    "files": [
        {
            "sha": "fd926a0c476e0fe8d827a311779461d0fcc8dcb7",
            "filename": "third_party/xla/xla/backends/gpu/codegen/custom.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Fcustom.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Fcustom.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Fcustom.cc?ref=bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e",
            "patch": "@@ -1309,9 +1309,7 @@ absl::StatusOr<FusionEmissionResult> EmitCollective(\n           /*source_buffer=*/src.value(),\n           /*destination_buffer=*/dst.value(),\n           /*source_memory_space=*/src_shape.layout().memory_space(),\n-          /*destination_memory_space=*/dst_shape.layout().memory_space(),\n-          /*source_value=*/nullptr,\n-          /*destination_value=*/nullptr});\n+          /*destination_memory_space=*/dst_shape.layout().memory_space()});\n     }\n     auto collective_start_thunk =\n         std::make_unique<NcclThunkType>(thunk_info, instr, buffers);"
        },
        {
            "sha": "bb614c385c53ae554f3997b5f65da8e6561aba0f",
            "filename": "third_party/xla/xla/backends/gpu/runtime/collective_kernel_thunk_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcollective_kernel_thunk_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcollective_kernel_thunk_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcollective_kernel_thunk_test.cc?ref=bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e",
            "patch": "@@ -204,9 +204,7 @@ TEST(CollectiveKernelThunkTest, ExecutesPtxKernel) {\n        /*source_buffer=*/input_slice,\n        /*destination_buffer=*/output_slice,\n        /*source_memory_space=*/0,\n-       /*destination_memory_space=*/0,\n-       /*source_value=*/nullptr,\n-       /*destination_value=*/nullptr}};\n+       /*destination_memory_space=*/0}};\n \n   // ## Setup device mapping.\n   DeviceAssignment device_assignment(/*replica_count=*/1,"
        },
        {
            "sha": "f7edde2e8543fa418ba3707aed694a6adac4ed36",
            "filename": "third_party/xla/xla/backends/gpu/runtime/collective_thunk.h",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcollective_thunk.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcollective_thunk.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fcollective_thunk.h?ref=bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e",
            "patch": "@@ -146,8 +146,6 @@ class CollectiveThunk : public Thunk {\n     BufferAllocation::Slice destination_buffer;\n     int64_t source_memory_space;\n     int64_t destination_memory_space;\n-    mlir::Value source_value;\n-    mlir::Value destination_value;\n   };\n \n   // Completion events for asynchronous collective operations (operations"
        },
        {
            "sha": "5ab0326705a45fd597c08f8df5e60162fd0b1e7b",
            "filename": "third_party/xla/xla/service/gpu/ir_emitter_unnested.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fir_emitter_unnested.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fir_emitter_unnested.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fir_emitter_unnested.cc?ref=bbde4992ae98dfa01bc561f9e0f61d6a66dbb77e",
            "patch": "@@ -2169,9 +2169,7 @@ absl::Status IrEmitterUnnested::EmitCollectiveThunk(\n                                 /*source_buffer=*/src,\n                                 /*destination_buffer=*/dst,\n                                 /*source_memory_space=*/src_memory_space,\n-                                /*destination_memory_space=*/dst_memory_space,\n-                                /*source_value=*/nullptr,\n-                                /*destination_value=*/nullptr});\n+                                /*destination_memory_space=*/dst_memory_space});\n   };\n \n   if (kind == Thunk::Kind::kAllGatherStart) {\n@@ -2559,9 +2557,7 @@ absl::Status IrEmitterUnnested::EmitNvshmemThunk(\n                                 /*source_buffer=*/src,\n                                 /*destination_buffer=*/dst,\n                                 /*source_memory_space=*/src_memory_space,\n-                                /*destination_memory_space=*/dst_memory_space,\n-                                /*source_value=*/nullptr,\n-                                /*destination_value=*/nullptr});\n+                                /*destination_memory_space=*/dst_memory_space});\n   };\n \n   // For other operations simply zip operands with results."
        }
    ],
    "stats": {
        "total": 18,
        "additions": 4,
        "deletions": 14
    }
}