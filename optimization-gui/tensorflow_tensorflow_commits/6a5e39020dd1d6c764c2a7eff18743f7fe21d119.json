{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 846026317",
    "sha": "6a5e39020dd1d6c764c2a7eff18743f7fe21d119",
    "files": [
        {
            "sha": "9570b9407e157486edeccd896c201831dc6b001a",
            "filename": "tensorflow/core/common_runtime/next_pluggable_device/c/tf_rendezvous_c_api_test.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/6a5e39020dd1d6c764c2a7eff18743f7fe21d119/tensorflow%2Fcore%2Fcommon_runtime%2Fnext_pluggable_device%2Fc%2Ftf_rendezvous_c_api_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/6a5e39020dd1d6c764c2a7eff18743f7fe21d119/tensorflow%2Fcore%2Fcommon_runtime%2Fnext_pluggable_device%2Fc%2Ftf_rendezvous_c_api_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fcommon_runtime%2Fnext_pluggable_device%2Fc%2Ftf_rendezvous_c_api_test.cc?ref=6a5e39020dd1d6c764c2a7eff18743f7fe21d119",
            "patch": "@@ -58,7 +58,7 @@ Tensor CreateTestTensor() {\n   Tensor t(DT_INT8, TensorShape({10, 20}));\n   for (int64_t a = 0; a < t.shape().dim_size(0); a++) {\n     for (int64_t b = 0; b < t.shape().dim_size(1); b++) {\n-      t.matrix<int8>()(a, b) = static_cast<int8>((a + 1) * (b + 1));\n+      t.matrix<int8_t>()(a, b) = static_cast<int8_t>((a + 1) * (b + 1));\n     }\n   }\n   return t;\n@@ -68,7 +68,8 @@ class FakeAllocator : public Allocator {\n  public:\n   std::string Name() override { return \"fake\"; }\n   void* AllocateRaw(size_t alignment, size_t num_bytes) override {\n-    return port::AlignedMalloc(num_bytes, alignment);\n+    return tsl::port::AlignedMalloc(num_bytes,\n+                                    static_cast<std::align_val_t>(alignment));\n   }\n   void DeallocateRaw(void* ptr) override { return port::AlignedFree(ptr); }\n };\n@@ -112,8 +113,9 @@ class FakeDeviceManager : public DeviceMgr {\n   bool ContainsDevice(int64_t device_incarnation) const override {\n     return false;\n   }\n-  void ClearContainers(absl::Span<const string> containers) const override {}\n-  int NumDeviceType(const string& type) const override { return 0; }\n+  void ClearContainers(\n+      absl::Span<const std::string> containers) const override {}\n+  int NumDeviceType(const std::string& type) const override { return 0; }\n   int NumDevices() const override { return 0; }\n   Device* HostCPU() const override { return nullptr; }\n \n@@ -127,7 +129,7 @@ class TestDeviceContext : public DeviceContext {\n                              Tensor* device_tensor, StatusCallback done,\n                              bool sync_dst_compute) const override {\n     Tensor test_tensor = CreateTestTensor();\n-    test::ExpectTensorEqual<int8>(test_tensor, *cpu_tensor);\n+    test::ExpectTensorEqual<int8_t>(test_tensor, *cpu_tensor);\n     done(absl::OkStatus());\n   }\n \n@@ -191,7 +193,7 @@ TEST(RendezvousCAPI, DeviceToHost) {\n                         });\n   callback_done.WaitForNotification();\n   Tensor test_tensor = CreateTestTensor();\n-  test::ExpectTensorEqual<int8>(test_tensor, result);\n+  test::ExpectTensorEqual<int8_t>(test_tensor, result);\n \n   Destroy(thunk);\n   delete thunk;"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 8,
        "deletions": 6
    }
}