{
    "author": "Cjkkkk",
    "message": "PR #33835: make cudnn fusion config conv kind optional for cudnn gemm fusion\n\nImported from GitHub PR https://github.com/openxla/xla/pull/33835\n\nüìù Summary of Changes\nmake cudnn fusion config conv type field optional since cudnn gemm fusion doesn't need it.\n\nüéØ Justification\nconv kind is not required by cudnn gemm fusion, it is better clean it up.\n\nüöÄ Kind of Contribution\nPlease remove what does not apply: ‚ôªÔ∏è Cleanup\n\nüìä Benchmark (for Performance Improvements)\nNone\n\nüß™ Unit Tests:\nNone\n\nüß™ Execution Tests:\nNone\n\nCopybara import of the project:\n\n--\nd0c35bd4e99676c5121208762b1b603414f504aa by Cjkkkk <ske@nvidia.com>:\n\nmake cudnn fusion config conv kind optional for cudnn gemm fusion\n\nMerging this change closes #33835\n\nPiperOrigin-RevId: 833262060",
    "sha": "be02f0db8dbc76b9d12f62ae091d205580053762",
    "files": [
        {
            "sha": "64c9222ca689670ee7c4825d9cb994d6196ed1d6",
            "filename": "third_party/xla/xla/service/gpu/backend_configs.proto",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/be02f0db8dbc76b9d12f62ae091d205580053762/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fbackend_configs.proto",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/be02f0db8dbc76b9d12f62ae091d205580053762/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fbackend_configs.proto",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fbackend_configs.proto?ref=be02f0db8dbc76b9d12f62ae091d205580053762",
            "patch": "@@ -177,7 +177,7 @@ message CuDnnFusionConfig {\n     CONV_WGRAD = 1;\n     CONV_DGRAD = 2;\n   }\n-  Kind kind = 2;\n+  optional Kind kind = 2;\n }\n \n // Output tile sizes for a fusion root."
        },
        {
            "sha": "14a417ed2b95730ec0daa745842aabecd3861deb",
            "filename": "third_party/xla/xla/service/gpu/transforms/cudnn_fusion_compiler.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/be02f0db8dbc76b9d12f62ae091d205580053762/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fcudnn_fusion_compiler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/be02f0db8dbc76b9d12f62ae091d205580053762/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fcudnn_fusion_compiler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fcudnn_fusion_compiler.cc?ref=be02f0db8dbc76b9d12f62ae091d205580053762",
            "patch": "@@ -386,8 +386,10 @@ class ConvDimensionAdapter {\n                         fusion.backend_config<GpuBackendConfig>());\n     const FusionBackendConfig& fusion_backend_config =\n         gpu_config.fusion_backend_config();\n-    if (!fusion_backend_config.has_cudnn_fusion_config()) {\n-      VLOG(3) << \"Can't find cudnn fusion config for cudnn conv fusion.\";\n+    if (!fusion_backend_config.has_cudnn_fusion_config() ||\n+        !fusion_backend_config.cudnn_fusion_config().has_kind()) {\n+      VLOG(3) << \"Can't find cudnn fusion config or conv kind for cudnn conv \"\n+                 \"fusion.\";\n       return std::nullopt;\n     }\n     CuDnnFusionConfig_Kind conv_kind ="
        }
    ],
    "stats": {
        "total": 8,
        "additions": 5,
        "deletions": 3
    }
}