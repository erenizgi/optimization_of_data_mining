{
    "author": "basioli-k",
    "message": "[XLA:GPU] Create hlo base test owning an mlir context.\n\nPiperOrigin-RevId: 816733978",
    "sha": "e696097f1b07646baf19f966851955e2acf538e9",
    "files": [
        {
            "sha": "182a01a43ea01a8dbaf03105df962402e7b4b04a",
            "filename": "third_party/xla/xla/tests/BUILD",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e696097f1b07646baf19f966851955e2acf538e9/third_party%2Fxla%2Fxla%2Ftests%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e696097f1b07646baf19f966851955e2acf538e9/third_party%2Fxla%2Fxla%2Ftests%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2FBUILD?ref=e696097f1b07646baf19f966851955e2acf538e9",
            "patch": "@@ -416,10 +416,10 @@ cc_library(\n     srcs = [\"codegen_test_base.cc\"],\n     hdrs = [\"codegen_test_base.h\"],\n     deps = [\n-        \":hlo_test_base\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service:compiler\",\n         \"//xla/service:executable\",\n+        \"//xla/tests:hlo_test_base_with_mlir_context\",\n     ],\n )\n \n@@ -3798,3 +3798,13 @@ cc_library(\n         \"@com_google_googletest//:gtest_for_library\",\n     ],\n )\n+\n+cc_library(\n+    name = \"hlo_test_base_with_mlir_context\",\n+    testonly = True,\n+    hdrs = [\"hlo_test_base_with_mlir_context.h\"],\n+    deps = [\n+        \"//xla/tests:hlo_test_base\",\n+        \"@llvm-project//mlir:IR\",\n+    ],\n+)"
        },
        {
            "sha": "9a5da75397aef33dc6fc085835eb4e4a6e5ca765",
            "filename": "third_party/xla/xla/tests/codegen_test_base.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e696097f1b07646baf19f966851955e2acf538e9/third_party%2Fxla%2Fxla%2Ftests%2Fcodegen_test_base.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e696097f1b07646baf19f966851955e2acf538e9/third_party%2Fxla%2Fxla%2Ftests%2Fcodegen_test_base.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fcodegen_test_base.h?ref=e696097f1b07646baf19f966851955e2acf538e9",
            "patch": "@@ -21,12 +21,12 @@ limitations under the License.\n #include \"xla/hlo/ir/hlo_module.h\"\n #include \"xla/service/compiler.h\"\n #include \"xla/service/executable.h\"\n-#include \"xla/tests/hlo_test_base.h\"\n+#include \"xla/tests/hlo_test_base_with_mlir_context.h\"\n \n namespace xla {\n \n // Provides access to both the JIT and the AOT compiler for testing.\n-class CodegenTestBase : public HloTestBase {\n+class CodegenTestBase : public HloTestBaseWithMlirContext {\n  protected:\n   // Compiles hlo_module with the JIT compiler.\n   absl::StatusOr<std::unique_ptr<Executable>> CompileToExecutable("
        },
        {
            "sha": "8bafe83523ddcd10d0021ccf817c962a5129e889",
            "filename": "third_party/xla/xla/tests/hlo_test_base_with_mlir_context.h",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e696097f1b07646baf19f966851955e2acf538e9/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base_with_mlir_context.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e696097f1b07646baf19f966851955e2acf538e9/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base_with_mlir_context.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fhlo_test_base_with_mlir_context.h?ref=e696097f1b07646baf19f966851955e2acf538e9",
            "patch": "@@ -0,0 +1,34 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#ifndef XLA_TESTS_HLO_TEST_BASE_WITH_MLIR_CONTEXT_H_\n+#define XLA_TESTS_HLO_TEST_BASE_WITH_MLIR_CONTEXT_H_\n+\n+#include \"mlir/IR/MLIRContext.h\"\n+#include \"xla/tests/hlo_test_base.h\"\n+\n+namespace xla {\n+\n+class HloTestBaseWithMlirContext : public HloTestBase {\n+ public:\n+  mlir::MLIRContext* mlir_context() { return &mlir_context_; }\n+\n+ private:\n+  mlir::MLIRContext mlir_context_;\n+};\n+\n+}  // namespace xla\n+\n+#endif  // XLA_TESTS_HLO_TEST_BASE_WITH_MLIR_CONTEXT_H_"
        }
    ],
    "stats": {
        "total": 50,
        "additions": 47,
        "deletions": 3
    }
}