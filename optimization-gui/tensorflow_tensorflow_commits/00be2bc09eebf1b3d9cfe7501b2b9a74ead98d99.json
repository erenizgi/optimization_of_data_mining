{
    "author": "penpornk",
    "message": "[xla:cpu:onednn] Skip failing tests on Aarch64 CPUs.\n\nPiperOrigin-RevId: 826675056",
    "sha": "00be2bc09eebf1b3d9cfe7501b2b9a74ead98d99",
    "files": [
        {
            "sha": "cbc572ff64dc84291aa9e572b6a32acf91ddc126",
            "filename": "third_party/xla/xla/service/cpu/tests/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/00be2bc09eebf1b3d9cfe7501b2b9a74ead98d99/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/00be2bc09eebf1b3d9cfe7501b2b9a74ead98d99/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2FBUILD?ref=00be2bc09eebf1b3d9cfe7501b2b9a74ead98d99",
            "patch": "@@ -422,6 +422,7 @@ xla_cc_test(\n         \"//xla/tsl/platform:test\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest_main\",\n+        \"@local_tsl//tsl/platform:platform_port\",\n     ],\n )\n "
        },
        {
            "sha": "9e26ce45dcba312ceb8eefbc7e04ac692061503b",
            "filename": "third_party/xla/xla/service/cpu/tests/onednn_fusion_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/00be2bc09eebf1b3d9cfe7501b2b9a74ead98d99/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fonednn_fusion_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/00be2bc09eebf1b3d9cfe7501b2b9a74ead98d99/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fonednn_fusion_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fonednn_fusion_test.cc?ref=00be2bc09eebf1b3d9cfe7501b2b9a74ead98d99",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n #include \"xla/error_spec.h\"\n #include \"xla/tests/hlo_test_base.h\"\n #include \"xla/tsl/platform/test.h\"\n+#include \"tsl/platform/cpu_info.h\"\n \n namespace xla::cpu {\n namespace {\n@@ -26,7 +27,8 @@ using OneDnnFusionTest = HloTestBase;\n \n inline constexpr bool IsOneDnnGraphEnabled() {\n #if defined(XLA_ONEDNN_USE_GRAPH_API)\n-  return true;\n+  // Some Aarch64 CPUs have failures. Only test on x86 for now.\n+  return tsl::port::IsX86CPU();\n #endif  // XLA_ONEDNN_USE_GRAPH_API\n   return false;\n }"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}