{
    "author": "quoctruong",
    "message": "Change RBE Docker Image to one that only installs nvidia-driver-580-open and not other CUDA packages\n\nThis will help prevent hermetic leaks.\n\nPiperOrigin-RevId: 805512380",
    "sha": "77c90d2a7139760743f535f16a9b2a1356362087",
    "files": [
        {
            "sha": "d12c886cc6d57a87da4880949cb688a9592e82db",
            "filename": "ci/official/containers/ml_build/Dockerfile",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/77c90d2a7139760743f535f16a9b2a1356362087/ci%2Fofficial%2Fcontainers%2Fml_build%2FDockerfile",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/77c90d2a7139760743f535f16a9b2a1356362087/ci%2Fofficial%2Fcontainers%2Fml_build%2FDockerfile",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/ci%2Fofficial%2Fcontainers%2Fml_build%2FDockerfile?ref=77c90d2a7139760743f535f16a9b2a1356362087",
            "patch": "@@ -37,15 +37,15 @@ RUN /setup.python.sh python3.14-nogil /builder.requirements.txt\n RUN /setup.python.sh python3.12 /builder.requirements.txt\n \n COPY setup.sources.cudnn.sh /setup.sources.cudnn.sh\n-ARG INSTALL_CUDNN=false\n-ARG CUDA_PACKAGES_FILE=cuda12.1_cudnn9.1.packages.txt\n-COPY ${CUDA_PACKAGES_FILE} /cudnn.packages.txt\n+ARG INSTALL_NVIDIA_PACKAGES=false\n+ARG NVIDIA_PACKAGES_FILE=cuda12.1_cudnn9.1.packages.txt\n+COPY ${NVIDIA_PACKAGES_FILE} /nvidia.packages.txt\n \n-RUN if [ \"${INSTALL_CUDNN}\" = \"true\" ]; then \\\n-      echo \"Installing cudnn\"; \\\n-      /setup.sources.cudnn.sh && /setup.packages.sh /cudnn.packages.txt; \\\n+RUN if [ \"${INSTALL_NVIDIA_PACKAGES}\" = \"true\" ]; then \\\n+      echo \"Installing Nvidia packages\"; \\\n+      /setup.sources.cudnn.sh && /setup.packages.sh /nvidia.packages.txt; \\\n     else \\\n-      echo \"cudnn is not installed\"; \\\n+      echo \"Nvidia packages are not installed\"; \\\n     fi\n \n # Setup links for TensorFlow to compile."
        },
        {
            "sha": "d82a13cd4f72c681676ca6dcdcd3cb01bfab1870",
            "filename": "ci/official/containers/ml_build/rbe_nvidia.packages.txt",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/77c90d2a7139760743f535f16a9b2a1356362087/ci%2Fofficial%2Fcontainers%2Fml_build%2Frbe_nvidia.packages.txt",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/77c90d2a7139760743f535f16a9b2a1356362087/ci%2Fofficial%2Fcontainers%2Fml_build%2Frbe_nvidia.packages.txt",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/ci%2Fofficial%2Fcontainers%2Fml_build%2Frbe_nvidia.packages.txt?ref=77c90d2a7139760743f535f16a9b2a1356362087",
            "patch": "@@ -0,0 +1,4 @@\n+# The RBE machine itself has older kernel mode driver, and it requires\n+# cuda-compat and nvidia driver to be installed.\n+nvidia-driver-580-open\n+cuda-compat-13-0"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 11,
        "deletions": 7
    }
}