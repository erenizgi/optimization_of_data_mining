{
    "author": "tensorflower-gardener",
    "message": "Remove @xla from MKL build defs\n\nPiperOrigin-RevId: 827426000",
    "sha": "1227245ada1a806315adccab940b76ea9d16246c",
    "files": [
        {
            "sha": "cf6c2ac5b463155d262eb9bc0a6a4c6b84c3c0b5",
            "filename": "third_party/xla/xla/tsl/mkl/build_defs.bzl",
            "status": "modified",
            "additions": 19,
            "deletions": 19,
            "changes": 38,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1227245ada1a806315adccab940b76ea9d16246c/third_party%2Fxla%2Fxla%2Ftsl%2Fmkl%2Fbuild_defs.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1227245ada1a806315adccab940b76ea9d16246c/third_party%2Fxla%2Fxla%2Ftsl%2Fmkl%2Fbuild_defs.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fmkl%2Fbuild_defs.bzl?ref=1227245ada1a806315adccab940b76ea9d16246c",
            "patch": "@@ -35,9 +35,9 @@ def if_mkl(if_true, if_false = []):\n       may need it. It may be deleted in future with refactoring.\n     \"\"\"\n     return select({\n-        \"@local_xla//xla/tsl/mkl:build_with_mkl_aarch64\": if_true,\n-        \"@local_xla//xla/tsl:linux_x86_64\": if_true,\n-        \"@local_xla//xla/tsl:windows\": if_true,\n+        Label(\"//xla/tsl/mkl:build_with_mkl_aarch64\"): if_true,\n+        Label(\"//xla/tsl:linux_x86_64\"): if_true,\n+        Label(\"//xla/tsl:windows\"): if_true,\n         \"//conditions:default\": if_false,\n     })\n \n@@ -57,8 +57,8 @@ def if_mkl_ml(if_true, if_false = []):\n       a select evaluating to either if_true or if_false as appropriate.\n     \"\"\"\n     return select({\n-        \"@local_xla//xla/tsl/mkl:build_with_mkl_opensource\": if_false,\n-        \"@local_xla//xla/tsl/mkl:build_with_mkl\": if_true,\n+        Label(\"//xla/tsl/mkl:build_with_mkl_opensource\"): if_false,\n+        Label(\"//xla/tsl/mkl:build_with_mkl\"): if_true,\n         \"//conditions:default\": if_false,\n     })\n \n@@ -75,7 +75,7 @@ def if_mkl_lnx_x64(if_true, if_false = []):\n       a select evaluating to either if_true or if_false as appropriate.\n     \"\"\"\n     return select({\n-        \"@local_xla//xla/tsl/mkl:build_with_mkl_lnx_x64\": if_true,\n+        Label(\"//xla/tsl/mkl:build_with_mkl_lnx_x64\"): if_true,\n         \"//conditions:default\": if_false,\n     })\n \n@@ -92,7 +92,7 @@ def if_enable_mkl(if_true, if_false = []):\n       A select evaluating to either if_true or if_false as appropriate.\n     \"\"\"\n     return select({\n-        \"@local_xla//xla/tsl/mkl:enable_mkl\": if_true,\n+        Label(\"//xla/tsl/mkl:enable_mkl\"): if_true,\n         \"//conditions:default\": if_false,\n     })\n \n@@ -108,10 +108,10 @@ def mkl_deps():\n       inclusion in the deps attribute of rules.\n     \"\"\"\n     return select({\n-        \"@local_xla//xla/tsl/mkl:build_with_mkl_aarch64\": [\"@mkl_dnn_acl_compatible//:mkl_dnn_acl\"],\n-        \"@local_xla//xla/tsl:linux_x86_64_with_onednn_async\": [\"@onednn_async//:mkl_dnn\"],\n-        \"@local_xla//xla/tsl:linux_x86_64\": [\"@onednn//:mkl_dnn\"],\n-        \"@local_xla//xla/tsl:windows\": [\"@onednn//:mkl_dnn\"],\n+        Label(\"//xla/tsl/mkl:build_with_mkl_aarch64\"): [\"@mkl_dnn_acl_compatible//:mkl_dnn_acl\"],\n+        Label(\"//xla/tsl:linux_x86_64_with_onednn_async\"): [\"@onednn_async//:mkl_dnn\"],\n+        Label(\"//xla/tsl:linux_x86_64\"): [\"@onednn//:mkl_dnn\"],\n+        Label(\"//xla/tsl:windows\"): [\"@onednn//:mkl_dnn\"],\n         \"//conditions:default\": [],\n     })\n \n@@ -124,7 +124,7 @@ def if_onednn_async(if_true, if_false = []):\n       Otherwise, the select statement evaluates to if_false.\n     \"\"\"\n     return select({\n-        \"@local_xla//xla/tsl:linux_x86_64_with_onednn_async\": if_true,\n+        Label(\"//xla/tsl:linux_x86_64_with_onednn_async\"): if_true,\n         \"//conditions:default\": if_false,\n     })\n \n@@ -136,9 +136,9 @@ def onednn_v3_define():\n       An empty list of all other cases (include ARM builds).\n     \"\"\"\n     return select({\n-        \"@local_xla//xla/tsl/mkl:build_with_mkl_aarch64\": [\"-DENABLE_ONEDNN_V3\"],\n-        \"@local_xla//xla/tsl:linux_x86_64\": [\"-DENABLE_ONEDNN_V3\"],\n-        \"@local_xla//xla/tsl:windows\": [\"-DENABLE_ONEDNN_V3\"],\n+        Label(\"//xla/tsl/mkl:build_with_mkl_aarch64\"): [\"-DENABLE_ONEDNN_V3\"],\n+        Label(\"//xla/tsl:linux_x86_64\"): [\"-DENABLE_ONEDNN_V3\"],\n+        Label(\"//xla/tsl:windows\"): [\"-DENABLE_ONEDNN_V3\"],\n         \"//conditions:default\": [],\n     })\n \n@@ -154,22 +154,22 @@ def if_mkldnn_openmp(if_true, if_false = []):\n \n     \"\"\"\n     return select({\n-        \"@local_xla//xla/tsl/mkl:build_with_mkldnn_openmp\": if_true,\n+        Label(\"//xla/tsl/mkl:build_with_mkldnn_openmp\"): if_true,\n         \"//conditions:default\": if_false,\n     })\n \n def if_mkldnn_aarch64_acl(if_true, if_false = []):\n     return select({\n-        \"@local_xla//xla/tsl/mkl:build_with_mkl_aarch64\": if_true,\n+        Label(\"//xla/tsl/mkl:build_with_mkl_aarch64\"): if_true,\n         \"//conditions:default\": if_false,\n     })\n \n # Enable Graph API on linux x86_64 and aarch64 platform with mkl builds\n def if_graph_api(if_true, if_false = []):\n     \"\"\"Returns `if_true` if Graph API is used with oneDNN.\"\"\"\n     return select({\n-        \"@local_xla//xla/tsl:linux_x86_64\": if_true,\n-        \"@local_xla//xla/tsl/mkl:build_with_mkl_aarch64\": if_true,\n+        Label(\"//xla/tsl:linux_x86_64\"): if_true,\n+        Label(\"//xla/tsl/mkl:build_with_mkl_aarch64\"): if_true,\n         \"//conditions:default\": if_false,\n     })\n "
        }
    ],
    "stats": {
        "total": 38,
        "additions": 19,
        "deletions": 19
    }
}