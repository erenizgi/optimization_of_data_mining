{
    "author": "penpornk",
    "message": "[xla:cpu:onednn] Use `if_onednn` for build options in XLA instead of `if_mkl`.\n\nPiperOrigin-RevId: 814694370",
    "sha": "914a23ce1ed41a6284497d6461e4c2099c5ffcb2",
    "files": [
        {
            "sha": "d6dcca3ef3de337ace448793008472b0a53e0106",
            "filename": "third_party/xla/xla/tsl/tsl.bzl",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/914a23ce1ed41a6284497d6461e4c2099c5ffcb2/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/914a23ce1ed41a6284497d6461e4c2099c5ffcb2/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.bzl?ref=914a23ce1ed41a6284497d6461e4c2099c5ffcb2",
            "patch": "@@ -11,9 +11,9 @@ load(\n load(\n     \"//xla/tsl/mkl:build_defs.bzl\",\n     \"if_enable_mkl\",\n-    \"if_mkl\",\n     \"if_mkldnn_aarch64_acl\",\n     \"if_mkldnn_openmp\",\n+    \"if_onednn\",\n     \"if_onednn_async\",\n     \"onednn_v3_define\",\n )\n@@ -338,7 +338,7 @@ def tsl_copts(\n         if_tensorrt([\"-DGOOGLE_TENSORRT=1\"]) +\n         if_rocm([\"-DTENSORFLOW_USE_ROCM=1\"]) +\n         # Compile in oneDNN based ops when building for x86 platforms\n-        if_mkl([\"-DXLA_ONEDNN\"]) +\n+        if_onednn([\"-DXLA_ONEDNN\"]) +\n         # Enable additional ops (e.g., ops with non-NHWC data layout) and\n         # optimizations for Intel builds using oneDNN if configured\n         if_enable_mkl([\"-DENABLE_MKL\"]) +\n@@ -411,7 +411,7 @@ def tsl_gpu_library(deps = None, cuda_deps = None, copts = tsl_copts(), **kwargs\n             \"@local_config_rocm//rocm:hip\",\n             \"@local_config_rocm//rocm:rocm_headers\",\n         ]),\n-        copts = (copts + if_cuda([\"-DGOOGLE_CUDA=1\", \"-DNV_CUDNN_DISABLE_EXCEPTION\"]) + if_rocm([\"-DTENSORFLOW_USE_ROCM=1\"]) + if_xla_available([\"-DTENSORFLOW_USE_XLA=1\"]) + if_mkl([\"-DXLA_ONEDNN\"]) + if_enable_mkl([\"-DENABLE_MKL\"]) + if_tensorrt([\"-DGOOGLE_TENSORRT=1\"])),\n+        copts = (copts + if_cuda([\"-DGOOGLE_CUDA=1\", \"-DNV_CUDNN_DISABLE_EXCEPTION\"]) + if_rocm([\"-DTENSORFLOW_USE_ROCM=1\"]) + if_xla_available([\"-DTENSORFLOW_USE_XLA=1\"]) + if_onednn([\"-DXLA_ONEDNN\"]) + if_enable_mkl([\"-DENABLE_MKL\"]) + if_tensorrt([\"-DGOOGLE_TENSORRT=1\"])),\n         **kwargs\n     )\n "
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}