{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 809665946",
    "sha": "a309cd423ed3c39276ae3b590591d1c6dca62766",
    "files": [
        {
            "sha": "f0d490184f36e81b36ea7471bd4aeabf52e835bf",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_executor.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.cc?ref=a309cd423ed3c39276ae3b590591d1c6dca62766",
            "patch": "@@ -67,19 +67,19 @@ tensorflow::tpu::TpuCoreLocationExternal TpuExecutor::GetCoreLocationExternal()\n void TpuExecutor::DeallocateStream(Stream* stream) {\n   ExecutorApiFn()->TpuExecutor_DeallocateStreamFn(executor_,\n                                                   get_stream(stream));\n-  tpu_platform().mutex().Lock();\n+  tpu_platform().mutex().lock();\n   stream_map().erase(stream);\n-  tpu_platform().mutex().Unlock();\n+  tpu_platform().mutex().unlock();\n }\n \n absl::StatusOr<std::unique_ptr<Stream>> TpuExecutor::CreateStream(\n     std::optional<std::variant<StreamPriority, int>> priority) {\n   SE_Stream* tpu_stream = ExecutorApiFn()->TpuStream_NewFn(executor_);\n   auto stream = std::make_unique<tensorflow::tpu::TpuStream>(\n       tpu_stream, this, executor_, &tpu_platform());\n-  tpu_platform().mutex().Lock();\n+  tpu_platform().mutex().lock();\n   stream_map()[stream.get()] = tpu_stream;\n-  tpu_platform().mutex().Unlock();\n+  tpu_platform().mutex().unlock();\n   return std::move(stream);\n }\n "
        },
        {
            "sha": "bbb22d2b8a5ff4100cc32788f7c23a40d2a933b7",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_executor.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.h?ref=a309cd423ed3c39276ae3b590591d1c6dca62766",
            "patch": "@@ -153,7 +153,7 @@ class TpuExecutor : public tensorflow::tpu::TpuExecutorInterface {\n   }\n \n   SE_Stream* get_stream(Stream* ptr) {\n-    absl::MutexLock m(&tpu_platform().mutex());\n+    absl::MutexLock m(tpu_platform().mutex());\n     return stream_map()[ptr];\n   }\n "
        },
        {
            "sha": "4b8cb002918185c8888df3c769beacb8b7c97d51",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_initialize_util.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_initialize_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_initialize_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_initialize_util.cc?ref=a309cd423ed3c39276ae3b590591d1c6dca62766",
            "patch": "@@ -135,7 +135,7 @@ absl::StatusOr<int64_t> FindLibtpuProcess() {\n \n absl::Status TryAcquireTpuLock() {\n   static absl::Mutex* const mu = new absl::Mutex();\n-  absl::MutexLock l(mu);\n+  absl::MutexLock l(*mu);\n \n   std::string load_library_override = absl::StrCat(getenv(\"TPU_LOAD_LIBRARY\"));\n "
        },
        {
            "sha": "729487300b3723865e71834584c6a8a110631d63",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_platform.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform.cc?ref=a309cd423ed3c39276ae3b590591d1c6dca62766",
            "patch": "@@ -123,17 +123,17 @@ TpuRuntimeVersion TpuPlatform::version() const {\n }\n \n void TpuPlatform::InsertEvent(stream_executor::Event* key, SE_Event* val) {\n-  absl::MutexLock lock(&event_map_mu_);\n+  absl::MutexLock lock(event_map_mu_);\n   event_map_[key] = val;\n }\n \n SE_Event* TpuPlatform::LookupEvent(stream_executor::Event* key) {\n-  absl::ReaderMutexLock lock(&event_map_mu_);\n+  absl::ReaderMutexLock lock(event_map_mu_);\n   return event_map_.at(key);\n }\n \n void TpuPlatform::EraseEvent(stream_executor::Event* key) {\n-  absl::MutexLock lock(&event_map_mu_);\n+  absl::MutexLock lock(event_map_mu_);\n   event_map_.erase(key);\n }\n "
        },
        {
            "sha": "d977d348a44529a9b9ad83d9a3a8b2aba9bdb6ab",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_platform.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform.h?ref=a309cd423ed3c39276ae3b590591d1c6dca62766",
            "patch": "@@ -95,9 +95,9 @@ class TpuPlatform : public ::tensorflow::tpu::TpuPlatformInterface {\n   void InsertEvent(stream_executor::Event* key, SE_Event* val);\n   SE_Event* LookupEvent(stream_executor::Event* key);\n   SE_Stream* LookupStream(stream_executor::Stream* key) {\n-    mutex().Lock();\n+    mutex().lock();\n     auto stream = stream_map_.at(key);\n-    mutex().Unlock();\n+    mutex().unlock();\n     return stream;\n   }\n   void EraseEvent(stream_executor::Event* key) override;"
        },
        {
            "sha": "6f0336a163529b078907b653631f8f9f963da425",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_platform_interface.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform_interface.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a309cd423ed3c39276ae3b590591d1c6dca62766/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform_interface.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_platform_interface.cc?ref=a309cd423ed3c39276ae3b590591d1c6dca62766",
            "patch": "@@ -97,7 +97,7 @@ TpuPlatformInterface* TpuPlatformInterface::GetRegisteredPlatform(\n   static TpuPlatformInterface* tpu_registered_platform =\n       GetRegisteredPlatformStatic(initialize_platform, num_tries);\n \n-  absl::MutexLock lock(mu);\n+  absl::MutexLock lock(*mu);\n   if (!requested_initialize_platform && initialize_platform) {\n     // If the first time this function is called, we did not request\n     // initializing the platform, but the next caller wants the platform"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 12,
        "deletions": 12
    }
}