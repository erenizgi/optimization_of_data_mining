{
    "author": "nvgrw",
    "message": "Migrate slice_test to use PjRt.\n\nPiperOrigin-RevId: 826158235",
    "sha": "1424c4f73945d8330292554b77ce3d0123ef9757",
    "files": [
        {
            "sha": "57a5e779524558d91d3e58be52a3343273b073e1",
            "filename": "third_party/xla/xla/tests/BUILD",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1424c4f73945d8330292554b77ce3d0123ef9757/third_party%2Fxla%2Fxla%2Ftests%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1424c4f73945d8330292554b77ce3d0123ef9757/third_party%2Fxla%2Fxla%2Ftests%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2FBUILD?ref=1424c4f73945d8330292554b77ce3d0123ef9757",
            "patch": "@@ -1843,9 +1843,13 @@ xla_test(\n     timeout = \"long\",\n     srcs = [\"slice_test.cc\"],\n     shard_count = 50,\n+    tags = [\n+        \"test_migrated_to_hlo_runner_pjrt\",\n+    ],\n     deps = [\n         \":client_library_test_runner_mixin\",\n-        \":hlo_test_base\",\n+        \":hlo_pjrt_interpreter_reference_mixin\",\n+        \":hlo_pjrt_test_base\",\n         \":xla_internal_test_main\",  # fixdeps: keep\n         \"//xla:array2d\",\n         \"//xla:array3d\","
        },
        {
            "sha": "b363742d8b271c6653fa8bc658bae20a54efb15d",
            "filename": "third_party/xla/xla/tests/slice_test.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 5,
            "changes": 15,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1424c4f73945d8330292554b77ce3d0123ef9757/third_party%2Fxla%2Fxla%2Ftests%2Fslice_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1424c4f73945d8330292554b77ce3d0123ef9757/third_party%2Fxla%2Fxla%2Ftests%2Fslice_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fslice_test.cc?ref=1424c4f73945d8330292554b77ce3d0123ef9757",
            "patch": "@@ -37,13 +37,15 @@ limitations under the License.\n #include \"xla/literal_util.h\"\n #include \"xla/reference_util.h\"\n #include \"xla/tests/client_library_test_runner_mixin.h\"\n-#include \"xla/tests/hlo_test_base.h\"\n+#include \"xla/tests/hlo_pjrt_interpreter_reference_mixin.h\"\n+#include \"xla/tests/hlo_pjrt_test_base.h\"\n #include \"xla/tsl/platform/test.h\"\n \n namespace xla {\n namespace {\n \n-using SliceTest = ClientLibraryTestRunnerMixin<HloTestBase>;\n+using SliceTest = ClientLibraryTestRunnerMixin<\n+    HloPjRtInterpreterReferenceMixin<HloPjRtTestBase>>;\n \n TEST_F(SliceTest, Slice3x3x3_To_3x3x1_F32) {\n   Array3D<float> values(3, 3, 3);\n@@ -216,7 +218,8 @@ struct R1Spec {\n \n // Parameterized test that generates R1 values, slices them according\n // to the R1Spec, and compares the result with a computed version.\n-class SliceR1Test : public ClientLibraryTestRunnerMixin<HloTestBase>,\n+class SliceR1Test : public ClientLibraryTestRunnerMixin<\n+                        HloPjRtInterpreterReferenceMixin<HloPjRtTestBase>>,\n                     public ::testing::WithParamInterface<R1Spec> {\n  protected:\n   template <typename NativeT>\n@@ -421,7 +424,8 @@ struct R2Spec {\n \n // Parameterized test that generates patterned R2 values, slices them according\n // to the R2Spec, and compares the results with the ReferenceUtil version.\n-class SliceR2Test : public ClientLibraryTestRunnerMixin<HloTestBase>,\n+class SliceR2Test : public ClientLibraryTestRunnerMixin<\n+                        HloPjRtInterpreterReferenceMixin<HloPjRtTestBase>>,\n                     public ::testing::WithParamInterface<R2Spec> {};\n \n TEST_P(SliceR2Test, DoIt) {\n@@ -510,7 +514,8 @@ std::string R4SpecToString(const ::testing::TestParamInfo<R4Spec>& data) {\n                       \"__strides_\", absl::StrJoin(spec.slice_strides, \"x\"));\n }\n \n-class SliceR4Test : public ClientLibraryTestRunnerMixin<HloTestBase>,\n+class SliceR4Test : public ClientLibraryTestRunnerMixin<\n+                        HloPjRtInterpreterReferenceMixin<HloPjRtTestBase>>,\n                     public ::testing::WithParamInterface<R4Spec> {\n  protected:\n   void Run(const R4Spec& spec) {"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 15,
        "deletions": 6
    }
}