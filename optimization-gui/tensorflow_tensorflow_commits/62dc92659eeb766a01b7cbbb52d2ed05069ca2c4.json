{
    "author": "liepieshov",
    "message": "Ignore split configs in `Layout::Equal::MinorToMajorOnly`.\n\nThe `MinorToMajorOnly` layout comparison now ignores the `split_configs` field, as it is not relevant to the minor-to-major ordering.\n\nPiperOrigin-RevId: 827985409",
    "sha": "62dc92659eeb766a01b7cbbb52d2ed05069ca2c4",
    "files": [
        {
            "sha": "940c149d9f59e70f566607355b6fd6441eeaa1ec",
            "filename": "third_party/xla/xla/layout.h",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/62dc92659eeb766a01b7cbbb52d2ed05069ca2c4/third_party%2Fxla%2Fxla%2Flayout.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/62dc92659eeb766a01b7cbbb52d2ed05069ca2c4/third_party%2Fxla%2Fxla%2Flayout.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Flayout.h?ref=62dc92659eeb766a01b7cbbb52d2ed05069ca2c4",
            "patch": "@@ -292,12 +292,13 @@ class Layout {\n \n     Equal& MinorToMajorOnly() {\n       return IgnoreTiles()\n+          .IgnoreTailPaddingAlignmentInElements()\n+          .IgnoreElementSize()\n           .IgnoreIndexPrimitiveType()\n           .IgnorePointerPrimitiveType()\n           .IgnoreMemorySpace()\n-          .IgnorePhysicalShape()\n-          .IgnoreElementSize()\n-          .IgnoreTailPaddingAlignmentInElements();\n+          .IgnoreSplitConfigs()\n+          .IgnorePhysicalShape();\n     }\n \n    private:"
        },
        {
            "sha": "79baac745f2f85a34dc8fe2e82d8f7207b8cc467",
            "filename": "third_party/xla/xla/layout_test.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/62dc92659eeb766a01b7cbbb52d2ed05069ca2c4/third_party%2Fxla%2Fxla%2Flayout_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/62dc92659eeb766a01b7cbbb52d2ed05069ca2c4/third_party%2Fxla%2Fxla%2Flayout_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Flayout_test.cc?ref=62dc92659eeb766a01b7cbbb52d2ed05069ca2c4",
            "patch": "@@ -165,6 +165,12 @@ TEST(Layout, Equality) {\n   EXPECT_TRUE(Layout::Equal().IgnoreSplitConfigs()(\n       Layout({0, 1, 2}).add_split_configs(SplitConfig(0, {2})),\n       Layout({0, 1, 2}).add_split_configs(SplitConfig(0, {3}))));\n+  EXPECT_FALSE(\n+      Layout::Equal()(Layout({0, 1, 2}).add_split_configs(SplitConfig(0, {2})),\n+                      Layout({0, 1, 2})));\n+  EXPECT_TRUE(Layout::Equal().MinorToMajorOnly()(\n+      Layout({0, 1, 2}).add_split_configs(SplitConfig(0, {2})),\n+      Layout({0, 1, 2})));\n }\n \n TEST(Layout, LayoutToFromProto) {"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 10,
        "deletions": 3
    }
}