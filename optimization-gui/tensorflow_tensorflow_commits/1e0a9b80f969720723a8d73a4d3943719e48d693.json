{
    "author": "EusebioDM",
    "message": "Add missing BUILD dependencies, and remove unused ones\n\nPiperOrigin-RevId: 840740319",
    "sha": "1e0a9b80f969720723a8d73a4d3943719e48d693",
    "files": [
        {
            "sha": "8f593fb2e05fbda53848d72a1ccefc4b9ee0797a",
            "filename": "third_party/xla/xla/pjrt/plugin/xla_gpu/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_gpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_gpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_gpu%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -29,7 +29,6 @@ cc_library(\n     hdrs = [\"xla_gpu_client_options.h\"],\n     deps = [\n         \":xla_gpu_allocator_config\",\n-        \"//xla/pjrt/distributed:client\",\n         \"//xla/pjrt/distributed:key_value_store_interface\",\n     ],\n )\n@@ -64,7 +63,6 @@ cc_library(\n     name = \"gpu_static_registration\",\n     srcs = [\"gpu_static_registration.cc\"],\n     deps = [\n-        \":xla_gpu_client_options\",\n         \"//xla/pjrt/c:pjrt_c_api_gpu_internal\",\n         \"//xla/pjrt/plugin:plugin_names\",\n         \"//xla/pjrt/plugin:static_registration\","
        },
        {
            "sha": "c3860f966c97b3e41a74274a778e60c5e32beded",
            "filename": "third_party/xla/xla/pjrt/profiling/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fpjrt%2Fprofiling%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fpjrt%2Fprofiling%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fprofiling%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -92,7 +92,7 @@ cc_library(\n         \":profiling_context_no_op\",\n         # copybara:comment_end\n         # copybara:uncomment_begin(google-only)\n-        # \"//learning/brain/google/runtime:profiling_context\",\n+        # \"//learning/brain/google/runtime:profiling_context\",  # buildcleaner: keep\n         # copybara:uncomment_end\n         \"@llvm-project//llvm:Support\",\n     ],"
        },
        {
            "sha": "8332ea79552d774816ae54f87de58cb208bd70a8",
            "filename": "third_party/xla/xla/python/profiler/internal/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fpython%2Fprofiler%2Finternal%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fpython%2Fprofiler%2Finternal%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fprofiler%2Finternal%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -23,7 +23,6 @@ cc_library(\n     deps = [\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:macros\",\n-        \"//xla/tsl/platform:types\",\n         \"//xla/tsl/profiler/utils:time_utils\",\n         \"//xla/tsl/profiler/utils:xplane_builder\",\n         \"//xla/tsl/profiler/utils:xplane_schema\","
        },
        {
            "sha": "86c670e6af73141f1ee82457e3744f86a37ad527",
            "filename": "third_party/xla/xla/runtime/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fruntime%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fruntime%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fruntime%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -75,7 +75,6 @@ cc_library(\n         \"//xla:util\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base:core_headers\",\n-        \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:inlined_vector\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n@@ -153,10 +152,7 @@ cc_library(\n cc_library(\n     name = \"work_item\",\n     hdrs = [\"work_item.h\"],\n-    deps = [\n-        \"@com_google_absl//absl/container:inlined_vector\",\n-        \"@com_google_absl//absl/strings:str_format\",\n-    ],\n+    deps = [\"@com_google_absl//absl/strings:str_format\"],\n )\n \n cc_library("
        },
        {
            "sha": "50a1ba0f0bd603cfb7bc26b5abb96f78fbdc8e37",
            "filename": "third_party/xla/xla/service/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 24,
            "changes": 25,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -128,15 +128,12 @@ xla_cc_test(\n     srcs = [\"collective_opt_utils_test.cc\"],\n     deps = [\n         \":collective_opt_utils\",\n-        \"//xla:shape_util\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/parser:hlo_parser\",\n         \"//xla/hlo/testlib:hlo_hardware_independent_test_base\",\n-        \"//xla/tests:hlo_test_base\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest_main\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n \n@@ -1200,7 +1197,6 @@ cc_library(\n         \"//xla/stream_executor:device_memory_allocator\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:stream_executor_h\",\n-        \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status:statusor\",\n@@ -1655,7 +1651,6 @@ cc_library(\n         \":stream_pool\",\n         \"//xla:executable_run_options\",\n         \"//xla/hlo/ir:hlo\",\n-        \"//xla/hlo/ir:hlo_module_group\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings:str_format\",\n@@ -2813,7 +2808,6 @@ cc_library(\n         \"//xla/hlo/utils:hlo_query\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:statusor\",\n-        \"@com_google_absl//absl/algorithm\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n@@ -3183,9 +3177,7 @@ cc_library(\n         \"//xla/stream_executor:platform\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log:check\",\n-        \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n-        \"@com_google_absl//absl/synchronization\",\n     ],\n )\n \n@@ -4083,7 +4075,6 @@ cc_library(\n     deps = [\n         \"//xla/stream_executor:device_memory\",\n         \"//xla/stream_executor:device_memory_allocator\",\n-        \"@com_google_absl//absl/types:variant\",\n     ],\n )\n \n@@ -4295,7 +4286,6 @@ xla_cc_test(\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/testlib:hlo_hardware_independent_test_base\",\n         \"//xla/hlo/testlib:test\",\n-        \"//xla/tests:test_utils\",\n         \"//xla/tests:xla_internal_test_main\",  # fixdeps: keep\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n@@ -4372,7 +4362,6 @@ xla_cc_test(\n     srcs = [\"stream_pool_test.cc\"],\n     deps = [\n         \":stream_pool\",\n-        \"//xla/hlo/testlib:test_helpers\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:platform_manager\",\n         \"//xla/stream_executor:stream\",\n@@ -4699,7 +4688,6 @@ xla_cc_test(\n     srcs = [\"while_util_test.cc\"],\n     deps = [\n         \":while_util\",\n-        \"//xla:shape_util\",\n         \"//xla:util\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/testlib:hlo_hardware_independent_test_base\",\n@@ -4810,7 +4798,6 @@ xla_cc_test(\n         \"//xla/tests:xla_internal_test_main\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:statusor\",\n-        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_googletest//:gtest\",\n@@ -4839,7 +4826,6 @@ cc_library(\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n-        \"@com_google_absl//absl/container:inlined_vector\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\",\n@@ -5246,10 +5232,8 @@ cc_library(\n         \"//xla/hlo/ir:collective_op_group_mode\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/runtime:device_id\",\n-        \"//xla/stream_executor:device_memory\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n-        \"@com_google_absl//absl/functional:function_ref\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n@@ -5342,12 +5326,7 @@ xla_cc_test(\n cc_library(\n     name = \"global_device_id\",\n     hdrs = [\"global_device_id.h\"],\n-    deps = [\n-        \"//xla/runtime:device_id\",\n-        \"//xla/tsl/distributed_runtime/coordination:coordination_service\",\n-        \"@com_google_absl//absl/strings\",\n-        \"@com_google_absl//absl/types:span\",\n-    ],\n+    deps = [\"//xla/runtime:device_id\"],\n )\n \n cc_library(\n@@ -5504,7 +5483,6 @@ cc_library(\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_protobuf//:any_cc_proto\",\n-        \"@local_tsl//tsl/platform\",\n         \"@local_tsl//tsl/platform:logging\",  # fixdeps: keep\n         \"@local_tsl//tsl/platform:protobuf\",\n     ],\n@@ -6046,7 +6024,6 @@ xla_cc_test(\n     srcs = [\"propagate_original_value_test.cc\"],\n     deps = [\n         \":call_inliner\",\n-        \":instruction_fusion\",\n         \"//xla:literal_util\",\n         \"//xla:shape_util\",\n         \"//xla:xla_data_proto_cc\","
        },
        {
            "sha": "504f0e7643a230b76771807248873c1232f41a18",
            "filename": "third_party/xla/xla/service/cpu/BUILD",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -415,7 +415,6 @@ cc_library(\n         \"//xla/backends/cpu/codegen:ir_compiler\",\n         \"//xla/backends/cpu/codegen:target_machine_features\",\n         \"//xla/hlo/ir:hlo\",\n-        \"//xla/hlo/ir:hlo_module_group\",\n         \"//xla/service:buffer_assignment\",\n         \"//xla/service:compiler\",\n         \"//xla/service:executable\",\n@@ -586,7 +585,6 @@ cc_library(\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/codegen/intrinsic\",\n         \"//xla/codegen/intrinsic:erf\",\n-        \"//xla/codegen/intrinsic:tanh\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@llvm-project//llvm:Core\",\n@@ -971,7 +969,6 @@ cc_library(\n         \":cpu_executable_run_options\",\n         \"//xla:executable_run_options\",\n         \"//xla:shape_util\",\n-        \"//xla:types\",\n         \"//xla:util\",\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/backends/cpu/collectives:cpu_clique_key\",\n@@ -1037,6 +1034,11 @@ cc_library(\n     compatible_with = get_compatible_with_portable(),\n     copts = runtime_copts(),\n     visibility = [\"//visibility:public\"],\n+    deps = [\n+        \"//xla/tsl/framework/contraction:eigen_contraction_kernel_no_mkl\",\n+        \"@com_google_absl//absl/base:core_headers\",\n+        \"@eigen_archive//:eigen3\",\n+    ],\n )\n \n cc_library(\n@@ -1608,8 +1610,6 @@ cc_library(\n     hdrs = [\"cpu_float_support.h\"],\n     copts = tsl_copts(),\n     deps = [\n-        \"//xla/backends/cpu:xnn_support\",\n-        \"//xla/backends/cpu/codegen:target_machine_features\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service:float_support\",\n     ],\n@@ -1721,7 +1721,6 @@ cc_library(\n         \"//xla/codegen:kernel_spec\",\n         \"//xla/codegen:llvm_kernel_source\",\n         \"//xla/codegen:mlir_kernel_source\",\n-        \"//xla/hlo/analysis:symbolic_expr\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service:buffer_assignment\",\n         \"//xla/tsl/platform:env\","
        },
        {
            "sha": "d9bf797b0960c4a584cd7cc96fdf9aeb3d69908b",
            "filename": "third_party/xla/xla/service/gpu/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -93,9 +93,7 @@ cc_library(\n         \"//xla/runtime:device_id\",\n         \"@com_google_absl//absl/container:btree\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n-        \"@com_google_absl//absl/functional:any_invocable\",\n         \"@com_google_absl//absl/status:statusor\",\n-        \"@com_google_absl//absl/types:span\",\n     ],\n )\n \n@@ -357,7 +355,6 @@ cc_library(\n         \":ir_emitter_context\",\n         \":kernel_call\",\n         \"//xla/backends/gpu/runtime:custom_kernel_thunk\",\n-        \"//xla/backends/gpu/runtime:kernel_thunk\",\n         \"//xla/codegen/emitters:kernel_arguments\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/service/gpu/kernels:custom_kernel\",\n@@ -396,7 +393,6 @@ cc_library(\n     deps = [\n         \":ir_emitter_context\",\n         \"//xla/hlo/ir:hlo\",\n-        \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n     ],\n )\n@@ -2764,7 +2760,6 @@ cc_library(\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/utils:hlo_traversal\",\n         \"//xla/stream_executor:device_description\",\n-        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:inlined_vector\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n@@ -3150,7 +3145,6 @@ cc_library(\n     srcs = [\"kernel_reuse_cache.cc\"],\n     hdrs = [\"kernel_reuse_cache.h\"],\n     deps = [\n-        \":gpu_executable_proto_cc\",\n         \":kernel_reuse_cache_proto_cc\",\n         \":launch_dimensions\",\n         \"//xla:status_macros\","
        },
        {
            "sha": "668b495f7626ac652a803b7a581aa56ae4860dc4",
            "filename": "third_party/xla/xla/service/gpu/llvm_gpu_backend/BUILD",
            "status": "modified",
            "additions": 12,
            "deletions": 4,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fllvm_gpu_backend%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -65,10 +65,7 @@ cc_library(\n     name = \"ptx_version_util\",\n     srcs = [\"ptx_version_util.cc\"],\n     hdrs = [\"ptx_version_util.h\"],\n-    deps = [\n-        \"//xla/stream_executor:semantic_version\",\n-        \"@com_google_absl//absl/status:statusor\",\n-    ],\n+    deps = [\"//xla/stream_executor:semantic_version\"],\n )\n \n cc_library(\n@@ -173,6 +170,9 @@ cc_library(\n         \"HAS_SUPPORT_FOR_LLD_AS_A_LIBRARY=1\",\n         \"HAS_SUPPORT_FOR_EMBEDDED_LIB_DEVICE=1\",\n     ]),\n+    tags = [\n+        \"nofixdeps\",  # This target crashes build_cleaner ¯\\_(ツ)_/¯\n+    ],\n     deps = [\n         \":llvm_gpu_backend\",\n         \":load_ir_module\",\n@@ -365,8 +365,16 @@ cc_library(\n     ]),\n     deps = [\n         \":llvm_gpu_backend\",\n+        \"//xla:xla_proto_cc\",\n         \"//xla/service/llvm_ir:llvm_command_line_options\",\n+        \"//xla/stream_executor:device_description\",\n+        \"@com_google_absl//absl/status:statusor\",\n         \"@llvm-project//llvm:SPIRVCodeGen\",\n+        \"@llvm-project//llvm:Scalar\",\n+        \"@llvm-project//llvm:Support\",\n+        \"@llvm-project//llvm:Target\",\n+        \"@llvm-project//llvm:TransformUtils\",\n+        \"@llvm-project//llvm:ir_headers\",\n         \"@local_tsl//tsl/platform:errors\",\n     ],\n )"
        },
        {
            "sha": "7ad8e03a450351b86fee7de966be71f9cf6771c5",
            "filename": "third_party/xla/xla/service/gpu/model/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -60,7 +60,6 @@ cc_library(\n         \":sol_gpu_cost_model\",\n         \"//xla:util\",\n         \"//xla/hlo/analysis:hlo_dataflow_analysis\",\n-        \"//xla/hlo/analysis:symbolic_expr\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/utils:hlo_query\",\n         \"//xla/service:collective_ops_utils\",\n@@ -92,7 +91,6 @@ xla_cc_test(\n         \"//xla:literal_util\",\n         \"//xla:shape_util\",\n         \"//xla:xla_data_proto_cc\",\n-        \"//xla/hlo/analysis:symbolic_expr\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/testlib:hlo_hardware_independent_test_base\",\n         \"//xla/hlo/utils:hlo_query\",\n@@ -473,40 +471,18 @@ cc_library(\n     srcs = [\"gpu_collective_performance_model.cc\"],\n     hdrs = [\"gpu_collective_performance_model.h\"],\n     deps = [\n-        \":coalescing_analysis\",\n-        \":fusion_analysis_cache\",\n         \":gpu_hlo_cost_analysis\",\n         \":gpu_performance_model_base\",\n-        \":hlo_op_profiles\",\n-        \"//xla:shape_util\",\n         \"//xla:util\",\n-        \"//xla/backends/gpu/codegen:fusion_emitter\",\n-        \"//xla/backends/gpu/codegen:fusions\",\n         \"//xla/hlo/analysis:hlo_dataflow_analysis\",\n-        \"//xla/hlo/analysis:indexing_analysis\",\n         \"//xla/hlo/ir:hlo\",\n-        \"//xla/hlo/utils:hlo_traversal\",\n-        \"//xla/service:hlo_cost_analysis\",\n-        \"//xla/service/gpu:backend_configs_cc\",\n-        \"//xla/service/gpu:gpu_fusible\",\n-        \"//xla/service/gpu:hlo_fusion_analysis\",\n-        \"//xla/service/gpu:launch_dimensions\",\n         \"//xla/stream_executor:device_description\",\n         \"//xla/stream_executor/cuda:cuda_compute_capability\",\n-        \"@com_google_absl//absl/container:flat_hash_map\",\n-        \"@com_google_absl//absl/container:flat_hash_set\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n-        \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n-        \"@com_google_absl//absl/strings:str_format\",\n-        \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n-        \"@com_google_absl//absl/types:span\",\n-        \"@llvm-project//llvm:Support\",\n-        \"@llvm-project//mlir:IR\",\n-        \"@local_tsl//tsl/platform:status\",\n     ],\n )\n "
        },
        {
            "sha": "8aec7b244e7c4cbec2835b9672b5d1bba4ae6ede",
            "filename": "third_party/xla/xla/service/gpu/tests/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftests%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftests%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftests%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -173,7 +173,6 @@ xla_test(\n         \"//xla/stream_executor:semantic_version\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/stream_executor:stream_executor_h\",\n-        \"//xla/stream_executor/cuda:cuda_compute_capability\",\n         \"//xla/tests:hlo_pjrt_interpreter_reference_mixin\",\n         \"//xla/tests:hlo_pjrt_test_base\",\n         \"//xla/tests:literal_test_util\",\n@@ -293,7 +292,6 @@ xla_test(\n         \"//xla:xla_proto_cc\",\n         \"//xla/hlo/parser:hlo_parser\",\n         \"//xla/stream_executor:device_description\",\n-        \"@com_google_absl//absl/strings\",\n         \"@com_google_googletest//:gtest_main\",\n         \"@local_tsl//tsl/platform:statusor\",\n         \"@local_tsl//tsl/platform:test\",\n@@ -357,7 +355,6 @@ xla_test(\n         \"//xla:xla_proto_cc\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/testlib:verified_hlo_module\",\n-        \"@com_google_absl//absl/strings\",\n         \"@com_google_googletest//:gtest_main\",\n         \"@local_tsl//tsl/platform:statusor\",\n         \"@local_tsl//tsl/platform:test\",\n@@ -990,7 +987,6 @@ xla_test(\n     backends = [\"gpu\"],\n     deps = [\n         \"//xla:xla_proto_cc\",\n-        \"//xla/stream_executor/cuda:cuda_compute_capability\",\n         \"//xla/tests:hlo_test_base\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest_main\","
        },
        {
            "sha": "57ee47b6e04a686ec007e18ed262b00a02d81f8c",
            "filename": "third_party/xla/xla/service/gpu/transforms/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -227,7 +227,6 @@ xla_cc_test(\n         \"//xla:xla_proto_cc\",\n         \"//xla/backends/gpu/codegen/triton:support\",\n         \"//xla/codegen/tiling:symbolic_tile_analysis\",\n-        \"//xla/hlo/analysis:symbolic_expr\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/testlib:hlo_hardware_independent_test_base\",\n         \"//xla/service:hlo_cost_analysis\",\n@@ -1585,7 +1584,6 @@ xla_test(\n         \"//xla/stream_executor:device_description\",\n         \"//xla/stream_executor:semantic_version\",\n         \"//xla/stream_executor/cuda:cuda_compute_capability\",\n-        \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/strings\",\n@@ -1829,7 +1827,6 @@ xla_cc_test(\n         \"//xla:shape_util\",\n         \"//xla:xla_data_proto_cc\",\n         \"//xla:xla_proto_cc\",\n-        \"//xla/hlo/analysis:symbolic_expr\",\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/testlib:hlo_hardware_independent_test_base\",\n         \"//xla/hlo/testlib:pattern_matcher_gmock\",\n@@ -2323,7 +2320,6 @@ cc_library(\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n-        \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@llvm-project//mlir:AsmParser\",\n         \"@llvm-project//mlir:IR\","
        },
        {
            "sha": "cb124cff524e9d0ea61d41c09de78e5affd9629f",
            "filename": "third_party/xla/xla/service/memory_space_assignment/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fmemory_space_assignment%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -651,7 +651,6 @@ cc_library(\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n-        \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:string_view\",\n     ],"
        },
        {
            "sha": "7a743008afb477197da0fae151d4b161bee503a2",
            "filename": "third_party/xla/xla/stream_executor/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 19,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fstream_executor%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fstream_executor%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -245,7 +245,6 @@ cc_library(\n         \":fft\",\n         \":kernel\",\n         \":kernel_spec\",\n-        \":launch_dim\",\n         \":memory_allocation\",\n         \":memory_allocator\",\n         \":module_spec\",\n@@ -256,7 +255,6 @@ cc_library(\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@com_google_protobuf//:wrappers_cc_proto\",\n     ],\n )\n \n@@ -416,7 +414,6 @@ cc_library(\n         \"//xla/tsl/protobuf:dnn_proto_cc\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:btree\",\n-        \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n@@ -426,11 +423,7 @@ cc_library(\n         \"@com_google_absl//absl/types:span\",\n         \"@com_google_protobuf//:wrappers_cc_proto\",\n         \"@eigen_archive//:eigen3\",  # buildcleaner: keep\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:logging\",\n         \"@local_tsl//tsl/platform:ml_dtypes\",\n-        \"@local_tsl//tsl/platform:status\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n \n@@ -615,8 +608,6 @@ xla_cc_test(\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:status_matchers\",\n         \"@com_google_googletest//:gtest_main\",\n-        \"@local_tsl//tsl/platform:status_matchers\",\n-        \"@local_tsl//tsl/platform:test\",\n     ],\n )\n \n@@ -629,9 +620,7 @@ cc_library(\n         \":kernel_args\",\n         \":kernel_argument_packing_spec\",\n         \":kernel_spec_proto_cc\",\n-        \":kernel_symbol_registry\",\n         \"//xla/tsl/platform:statusor\",\n-        \"@com_google_absl//absl/base:nullability\",\n         \"@com_google_absl//absl/functional:function_ref\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n@@ -689,7 +678,6 @@ cc_library(\n         \":kernel_argument_packing_spec_proto_cc\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/util:safe_reinterpret_cast\",\n-        \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n@@ -726,21 +714,14 @@ cc_library(\n     name = \"kernel\",\n     hdrs = [\"kernel.h\"],\n     deps = [\n-        \":device_memory\",\n         \":kernel_args\",\n-        \":kernel_argument_packing_spec\",\n         \":kernel_metadata\",\n         \":launch_dim\",\n         \":stream\",\n-        \"@com_google_absl//absl/base:core_headers\",\n-        \"@com_google_absl//absl/container:inlined_vector\",\n-        \"@com_google_absl//absl/functional:overload\",\n         \"@com_google_absl//absl/log:check\",\n-        \"@com_google_absl//absl/meta:type_traits\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n-        \"@com_google_absl//absl/types:span\",\n     ],\n )\n "
        },
        {
            "sha": "a7c059b3b5ea7a014b657928f4329653be04ea66",
            "filename": "third_party/xla/xla/stream_executor/cuda/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -458,7 +458,6 @@ cuda_library(\n         \"//xla/stream_executor:kernel_spec\",\n         \"//xla/stream_executor/gpu:buffer_debug_float_check_kernel\",\n         \"//xla/stream_executor/gpu:gpu_kernel_registry\",\n-        \"//xla/tsl/platform:logging\",\n         \"@com_google_absl//absl/base\",\n         \"@local_config_cuda//cuda:cuda_headers\",\n     ],\n@@ -1239,9 +1238,7 @@ cuda_library(\n         \":cuda_status\",\n         \"//xla/tsl/platform:errors\",\n         \"@com_google_absl//absl/status\",\n-        \"@local_config_cuda//cuda:cuda_headers\",\n         \"@local_config_cuda//cuda:cuda_runtime\",\n-        \"@local_tsl//tsl/platform:logging\",\n     ],\n )\n \n@@ -2495,7 +2492,6 @@ cuda_library(\n     ],\n     deps = [\n         \":cuda_platform_id\",\n-        \"//xla/stream_executor:kernel\",\n         \"//xla/stream_executor:kernel_argument_packing_spec\",\n         \"//xla/stream_executor:kernel_spec\",\n         \"//xla/stream_executor/gpu:gpu_kernel_registry\","
        },
        {
            "sha": "ce3cd0eca0f128ae5ee87153ac435213c3a2050d",
            "filename": "third_party/xla/xla/stream_executor/host/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fstream_executor%2Fhost%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fstream_executor%2Fhost%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fhost%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -77,22 +77,13 @@ cc_library(\n         \":host_event\",\n         \"//xla/stream_executor:device_memory\",\n         \"//xla/stream_executor:event\",\n-        \"//xla/stream_executor:kernel\",\n-        \"//xla/stream_executor:launch_dim\",\n         \"//xla/stream_executor:stream\",\n         \"//xla/stream_executor:stream_common\",\n         \"//xla/stream_executor:stream_executor_h\",\n-        \"//xla/tsl/platform:env\",\n-        \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/functional:any_invocable\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/synchronization\",\n-        \"@local_tsl//tsl/platform:context\",\n-        \"@local_tsl//tsl/platform:denormal\",\n-        \"@local_tsl//tsl/platform:env\",\n-        \"@local_tsl//tsl/platform:setround\",\n-        \"@local_tsl//tsl/platform:thread_annotations\",\n     ],\n )\n \n@@ -160,10 +151,7 @@ xla_cc_test(\n         \"//xla/stream_executor:stream_executor_h\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:statusor\",\n-        \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_googletest//:gtest_main\",\n-        \"@local_tsl//tsl/platform:errors\",\n-        \"@local_tsl//tsl/platform:test\",\n     ],\n )"
        },
        {
            "sha": "d089d2e0c036fc4043688577887a6982642cee5d",
            "filename": "third_party/xla/xla/stream_executor/rocm/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -779,10 +779,7 @@ cc_library(\n     deps = [\n         \":rocm_executor\",\n         \":roctracer_if_static\",  # buildcleaner: keep\n-        \"//xla/tsl/platform:env\",\n         \"@local_config_rocm//rocm:rocm_headers\",\n-        \"@local_tsl//tsl/platform\",\n-        \"@local_tsl//tsl/platform:dso_loader\",\n     ],\n     alwayslink = True,\n )\n@@ -1202,7 +1199,6 @@ rocm_library(\n         \"//xla/stream_executor:kernel_spec\",\n         \"//xla/stream_executor/gpu:gpu_kernel_registry\",\n         \"//xla/stream_executor/gpu:repeat_buffer_kernel\",\n-        \"@com_google_absl//absl/base\",\n     ],\n     alwayslink = 1,\n )\n@@ -1221,12 +1217,8 @@ rocm_library(\n     deps = [\n         \":rocm_platform_id\",\n         \"//xla/stream_executor:kernel_spec\",\n-        \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor/gpu:gpu_kernel_registry\",\n         \"//xla/stream_executor/gpu:redzone_allocator_kernel\",\n-        \"@com_google_absl//absl/base\",\n-        \"@com_google_absl//absl/log\",\n-        \"@com_google_absl//absl/status\",\n     ],\n     alwayslink = 1,\n )"
        },
        {
            "sha": "5e11593defa7391b819324d6a5380ed4f6c0c4a8",
            "filename": "third_party/xla/xla/tsl/BUILD",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -588,15 +588,17 @@ bzl_library(\n     visibility = [\"//visibility:public\"],\n     deps = [\n         \":package_groups_bzl\",\n-        \"//third_party/compute_library:build_defs_bzl\",\n-        \"//xla/tsl/mkl:build_defs_bzl\",\n-        \"//xla/tsl/platform:rules_cc_bzl\",\n+        # copybara:uncomment \"//devtools/build_cleaner/skylark:build_defs_lib\",\n+        \"@rules_cc//cc/common\",\n+        \"@rules_python//python:py_library_bzl\",\n         \"@bazel_skylib//lib:new_sets\",\n         \"@local_config_cuda//cuda:build_defs_bzl\",\n-        \"@local_config_rocm//rocm:build_defs_bzl\",\n+        \"//xla/tsl/mkl:build_defs_bzl\",\n+        \"//xla/tsl/platform:rules_cc_bzl\",\n         \"@local_config_tensorrt//:build_defs_bzl\",\n         \"@local_xla//third_party/py/rules_pywrap:pywrap_bzl\",\n-        \"@rules_cc//cc/common\",\n+        \"@local_config_rocm//rocm:build_defs_bzl\",\n+        \"//third_party/compute_library:build_defs_bzl\",\n     ],\n )\n "
        },
        {
            "sha": "29b1ca56401a94418478fe93784d8ba92443eaed",
            "filename": "third_party/xla/xla/tsl/c/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fc%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fc%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fc%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -82,10 +82,9 @@ tsl_cc_test(\n     name = \"tsl_status_test\",\n     srcs = [\"tsl_status_test.cc\"],\n     deps = [\n-        \":tsl_status\",\n+        \":tsl_status\",  # buildcleaner: keep\n         \":tsl_status_internal\",\n         \"//xla/tsl/platform:errors\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_googletest//:gtest_main\",\n     ],\n@@ -103,7 +102,6 @@ tsl_gpu_library(\n     hdrs = [\"tsl_status_helper.h\"],\n     visibility = [\"//visibility:public\"],\n     deps = [\n-        \":tsl_status\",\n         \":tsl_status_internal\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:status\","
        },
        {
            "sha": "aba4a369eaed0892c3760b1d5b7af6cf07957669",
            "filename": "third_party/xla/xla/tsl/concurrency/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fconcurrency%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fconcurrency%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fconcurrency%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -124,7 +124,7 @@ tsl_cc_test(\n     deps = [\n         \":concurrent_vector\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # buildcleaner: keep\n         \"//xla/tsl/platform:test\",\n         \"@com_google_googletest//:gtest_main\",\n     ],\n@@ -159,7 +159,6 @@ cc_library(\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/types:span\",\n-        \"@com_google_absl//absl/utility\",\n     ],\n )\n \n@@ -192,7 +191,6 @@ tsl_cc_test(\n     deps = [\n         \":ref_count\",\n         \"//xla/tsl/platform:test\",\n-        \"//xla/tsl/platform:test_benchmark\",\n         \"//xla/tsl/platform:test_main\",\n         \"@com_google_absl//absl/base:nullability\",\n     ],"
        },
        {
            "sha": "8720c23f8ebb3ce771f4b56c8197ef9276f0ad15",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/coordination/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -29,7 +29,6 @@ tsl_cc_test(\n     srcs = [\"coordination_service_error_util_test.cc\"],\n     deps = [\n         \":coordination_service_error_util\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/protobuf:coordination_service_proto_cc\",\n         \"@com_google_absl//absl/status\",\n@@ -258,12 +257,10 @@ tsl_cc_test(\n         \"//xla/tsl/distributed_runtime/rpc/coordination:grpc_coordination_service_impl\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # buildcleaner: keep\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/protobuf:coordination_config_proto_cc_impl\",\n-        \"//xla/tsl/protobuf:coordination_service_proto_cc_impl\",\n-        \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc_impl\",\n         \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n@@ -290,13 +287,12 @@ tsl_cc_test(\n         \"//xla/tsl/distributed_runtime/rpc/coordination:grpc_coordination_service_impl\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # buildcleaner: keep\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/protobuf:coordination_config_proto_cc_impl\",\n         \"//xla/tsl/protobuf:coordination_service_proto_cc_impl\",\n-        \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc_impl\",\n         \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\","
        },
        {
            "sha": "0cbadf4750d67e2cfd5933af6630526d04bab4fb",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/preemption/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fpreemption%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fpreemption%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fpreemption%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -37,7 +37,7 @@ tsl_cc_test(\n     deps = [\n         \":preemption_notifier\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # build_cleaner: keep\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n@@ -86,11 +86,9 @@ tsl_cc_test(\n         \"//xla/tsl/distributed_runtime/rpc/coordination:grpc_coordination_client\",\n         \"//xla/tsl/distributed_runtime/rpc/coordination:grpc_coordination_service_impl\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # build_cleaner: keep\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/protobuf:coordination_config_proto_cc_impl\",\n-        \"//xla/tsl/protobuf:coordination_service_proto_cc_impl\",\n-        \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc_impl\",\n         \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\","
        },
        {
            "sha": "b3d592924afef209c04a859b2589d491f44d7d7a",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/rpc/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -86,6 +86,7 @@ cc_library(\n     name = \"grpc_channel\",\n     srcs = [\"grpc_channel.cc\"],\n     hdrs = [\"grpc_channel.h\"],\n+    tags = [\"nofixdeps\"],\n     deps = [\n         \":grpc_channel_common\",\n         \":grpc_util\",\n@@ -117,7 +118,7 @@ tsl_cc_test(\n     deps = [\n         \":grpc_channel\",\n         \"//xla/tsl/lib/core:status_test_util\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env_impl\",  # buildcleaner: keep\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/protobuf:rpc_options_proto_cc_impl\",\n         \"//xla/tsl/util:device_name_utils\","
        },
        {
            "sha": "6983cd1250f1ba59af7ce6a1a028e2a99b3d7265",
            "filename": "third_party/xla/xla/tsl/framework/BUILD",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -229,7 +229,10 @@ cc_library(\n         \"device_id_manager.h\",\n     ],\n     deps = [\n+        \":device_type\",\n         \"//xla/tsl/lib/gtl:int_type\",\n+        \"//xla/tsl/platform:status\",\n+        \"//xla/tsl/platform:statusor\",\n     ] + if_static([\n         \":device_id_impl\",\n     ]),\n@@ -250,7 +253,6 @@ cc_library(\n         \"//xla/tsl/platform:macros\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n-        \"//xla/tsl/platform:types\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n@@ -410,6 +412,8 @@ tsl_cc_test(\n     deps = [\n         \":cancellation\",\n         \"//xla/tsl/platform:env\",\n+        \"//xla/tsl/platform:env_impl\",  # buildcleaner: keep\n+        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/status\","
        },
        {
            "sha": "bf19b0eb6ddcf3ef22732e7aef766e5c88659410",
            "filename": "third_party/xla/xla/tsl/framework/contraction/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcontraction%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1e0a9b80f969720723a8d73a4d3943719e48d693/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcontraction%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcontraction%2FBUILD?ref=1e0a9b80f969720723a8d73a4d3943719e48d693",
            "patch": "@@ -93,6 +93,7 @@ cc_library(\n     name = \"eigen_contraction_kernel\",\n     hdrs = [\"eigen_contraction_kernel.h\"],\n     compatible_with = get_compatible_with_portable(),\n+    tags = [\"nofixdeps\"],\n     deps = select({\n         \":no_mkldnn_contraction_kernel\": [\":eigen_contraction_kernel_no_mkl\"],\n         \":disable_onednn_contraction_kernel_config\": [\":eigen_contraction_kernel_no_mkl\"],\n@@ -154,6 +155,7 @@ cc_library(\n     srcs = [\"eigen_contraction_kernel.cc\"],\n     hdrs = [\"eigen_contraction_kernel.h\"],\n     compatible_with = get_compatible_with_portable(),\n+    tags = [\"nofixdeps\"],\n     # Somehow the following code works with fixedpoint, but not here.\n     # visibility = [\n     #     \"//tensorflow:__subpackages__\","
        }
    ],
    "stats": {
        "total": 190,
        "additions": 42,
        "deletions": 148
    }
}