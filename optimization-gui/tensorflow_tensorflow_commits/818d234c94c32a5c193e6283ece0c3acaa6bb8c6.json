{
    "author": "ybaturina",
    "message": "Add `testonly` parameter to `py_import` macros to allow testonly dependencies.\n\nPiperOrigin-RevId: 846479655",
    "sha": "818d234c94c32a5c193e6283ece0c3acaa6bb8c6",
    "files": [
        {
            "sha": "7ab46f8bfa00efc98131fab673af7c25bf3f1024",
            "filename": "third_party/xla/third_party/py/py_import.bzl",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/818d234c94c32a5c193e6283ece0c3acaa6bb8c6/third_party%2Fxla%2Fthird_party%2Fpy%2Fpy_import.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/818d234c94c32a5c193e6283ece0c3acaa6bb8c6/third_party%2Fxla%2Fthird_party%2Fpy%2Fpy_import.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fpy%2Fpy_import.bzl?ref=818d234c94c32a5c193e6283ece0c3acaa6bb8c6",
            "patch": "@@ -49,20 +49,23 @@ def py_import(\n         wheel,\n         deps = [],\n         wheel_deps = [],\n-        zip_deps = []):\n+        zip_deps = [],\n+        testonly = False):\n     unpacked_wheel_name = name + \"_unpacked_wheel\"\n     _unpacked_wheel(\n         name = unpacked_wheel_name,\n         wheel = wheel,\n         wheel_deps = wheel_deps,\n         zip_deps = zip_deps,\n+        testonly = testonly,\n     )\n     py_library(\n         name = name,\n         data = [\":\" + unpacked_wheel_name],\n         imports = [unpacked_wheel_name],\n         deps = deps,\n         visibility = [\"//visibility:public\"],\n+        testonly = testonly,\n     )\n \n \"\"\"Unpacks the wheel and uses its content as a py_library."
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}