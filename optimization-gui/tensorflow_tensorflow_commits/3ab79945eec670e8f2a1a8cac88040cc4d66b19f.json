{
    "author": "krishnaharidasan",
    "message": "Add documentation to `SerializedXlaExecutableMetadata` proto.\n\nThis change adds comments to `executable_metadata.proto` to describe the standard serialization format for XLA executables in IFRT, including the structure of the serialized string and the purpose of the `SerializedXlaExecutableMetadata` proto.\n\nPiperOrigin-RevId: 805517071",
    "sha": "3ab79945eec670e8f2a1a8cac88040cc4d66b19f",
    "files": [
        {
            "sha": "20367bb2fa8a3a5a99d26d40aa4d16b82518b829",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/executable_metadata.proto",
            "status": "modified",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3ab79945eec670e8f2a1a8cac88040cc4d66b19f/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fexecutable_metadata.proto",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3ab79945eec670e8f2a1a8cac88040cc4d66b19f/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fexecutable_metadata.proto",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fexecutable_metadata.proto?ref=3ab79945eec670e8f2a1a8cac88040cc4d66b19f",
            "patch": "@@ -22,6 +22,29 @@ import \"xla/python/ifrt/layout.proto\";\n import \"xla/python/ifrt/shape.proto\";\n import \"xla/xla_data.proto\";\n \n+// This is the definition of a standard format for serializing XLA executables\n+// in IFRT in a way that is portable across IFRT runtimes that support XLA.\n+//\n+// The ifrt::LoadedExecutable::Serialize API implemented for an XLA loaded\n+// executable must return a string that is in the following format:\n+// <SerializedXlaExecutableMetadata> (size delimited serialized proto)\n+// <Opaque string containing the serialized PjRt executable>\n+//\n+// SerializedXlaExecutableMetadata proto defines metadata about the XLA\n+// executable and its parameter/output specifications that are needed by IFRT\n+// runtimes to be able to construct an IFRT executable without a local\n+// PjRtClient. The underlying XLA executable can be loaded asynchronously.\n+//\n+// Version number of IFRT itself, the runtime type and the platform ID\n+// are encoded in the metadata. These must be validated for compatibility\n+// before IFRT runtimes attempt to deserialize the executable.\n+//\n+// Serialized executables in this format can be loaded into an IFRT runtime\n+// using the ifrt::LoadedExecutable::Deserialize API.\n+//\n+// The format and roundtrip compatibility of the executable for supported\n+// runtimes are validated in\n+// tensorflow/compiler/xla/python/pjrt_ifrt/xla_executable_impl_test_lib.cc.\n message SerializedXlaExecutableMetadata {\n   // IFRT version\n   int32 ifrt_version_number = 1;\n@@ -59,6 +82,7 @@ message SerializedXlaExecutableMetadata {\n     ifrt.ShapeProto shard_shape = 1;\n     ifrt.ShapeProto shape = 6;\n     ifrt.DTypeProto dtype = 2;\n+    // Layout can be absent when the output uses the default layout.\n     ifrt.LayoutProto layout = 3;\n     string memory_kind = 4;\n     xla.OpSharding op_sharding = 5;\n@@ -67,6 +91,7 @@ message SerializedXlaExecutableMetadata {\n   repeated OutputSpec output_specs = 5;\n \n   message ParameterSpec {\n+    // Layout can be absent when the parameter uses the default layout.\n     ifrt.LayoutProto layout = 1;\n     xla.OpSharding op_sharding = 2;\n     bool donated_input = 3;"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 25,
        "deletions": 0
    }
}