{
    "author": "tensorflower-gardener",
    "message": "Reverts 4618f903c401ab54fa07828d9e9e78380a75ac77\n\nPiperOrigin-RevId: 827511016",
    "sha": "ff68b78fe588db0eba27ebdf7c1e9b6229f5542f",
    "files": [
        {
            "sha": "238c05b4b19d9219122e683c42007a1358509353",
            "filename": "third_party/xla/xla/service/reduce_scatter_decomposer.h",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ff68b78fe588db0eba27ebdf7c1e9b6229f5542f/third_party%2Fxla%2Fxla%2Fservice%2Freduce_scatter_decomposer.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ff68b78fe588db0eba27ebdf7c1e9b6229f5542f/third_party%2Fxla%2Fxla%2Fservice%2Freduce_scatter_decomposer.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Freduce_scatter_decomposer.h?ref=ff68b78fe588db0eba27ebdf7c1e9b6229f5542f",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <functional>\n \n #include \"absl/status/statusor.h\"\n+#include \"xla/hlo/ir/hlo_instructions.h\"\n #include \"xla/hlo/ir/hlo_module.h\"\n #include \"xla/hlo/pass/hlo_pass_interface.h\"\n \n@@ -30,7 +31,8 @@ class ReduceScatterDecomposer : public HloModulePass {\n  public:\n   explicit ReduceScatterDecomposer(\n       std::function<void(Shape&)> update_layout = nullptr,\n-      std::function<bool(const HloInstruction*)> should_decompose = nullptr)\n+      std::function<bool(HloReduceScatterInstruction*)> should_decompose =\n+          nullptr)\n       : update_layout_(update_layout), should_decompose_(should_decompose) {}\n   absl::string_view name() const override {\n     return \"reduce-scatter-decomposer\";\n@@ -41,7 +43,7 @@ class ReduceScatterDecomposer : public HloModulePass {\n       HloModule* module,\n       const absl::flat_hash_set<absl::string_view>& execution_threads) override;\n   std::function<void(Shape&)> update_layout_;\n-  std::function<bool(const HloInstruction*)> should_decompose_;\n+  std::function<bool(HloReduceScatterInstruction*)> should_decompose_;\n };\n \n }  // namespace xla"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}