{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 808551748",
    "sha": "bc544d7379578568d736b0c74ebe0d6d5d43d662",
    "files": [
        {
            "sha": "e89fbc7839bf067b17d21a38889e7c3cd1004d4f",
            "filename": "tensorflow/core/kernels/data/experimental/global_shuffle_dataset_op.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bc544d7379578568d736b0c74ebe0d6d5d43d662/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fglobal_shuffle_dataset_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bc544d7379578568d736b0c74ebe0d6d5d43d662/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fglobal_shuffle_dataset_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fglobal_shuffle_dataset_op.cc?ref=bc544d7379578568d736b0c74ebe0d6d5d43d662",
            "patch": "@@ -188,7 +188,7 @@ class GlobalShuffleDatasetOp::Dataset::Iterator\n \n   absl::Status Initialize(IteratorContext* ctx) override\n       ABSL_LOCKS_EXCLUDED(mu_) {\n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     if (ctx->cancellation_manager()->IsCancelled()) {\n       return absl::CancelledError(\n           \"ctx->cancellation_manager()->IsCancelled() is true. Would not \"\n@@ -211,7 +211,7 @@ class GlobalShuffleDatasetOp::Dataset::Iterator\n                                std::vector<Tensor>* out_tensors,\n                                bool* end_of_sequence) override\n       ABSL_LOCKS_EXCLUDED(mu_) {\n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     IteratorContext::Params params(ctx);\n     params.index_mapper = GetIndexMapper(ctx->index_mapper());\n     IteratorContext global_shuffle_ctx(params);\n@@ -249,7 +249,7 @@ class GlobalShuffleDatasetOp::Dataset::Iterator\n \n   absl::Status SaveInternal(SerializationContext* ctx,\n                             IteratorStateWriter* writer) override {\n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     TF_RETURN_IF_ERROR(\n         writer->WriteScalar(prefix(), kElementCount, element_count_));\n     TF_RETURN_IF_ERROR(writer->WriteScalar(prefix(), kEpochNumRandomSamples,\n@@ -264,7 +264,7 @@ class GlobalShuffleDatasetOp::Dataset::Iterator\n \n   absl::Status RestoreInternal(IteratorContext* ctx,\n                                IteratorStateReader* reader) override {\n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     if (ctx->restored_element_count().has_value()) {\n       element_count_ = *ctx->restored_element_count();\n     } else {"
        },
        {
            "sha": "0654e1ee489f7a292f1c0c5b675385bac2b31fc3",
            "filename": "tensorflow/core/kernels/data/experimental/index_flat_map_dataset_op.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bc544d7379578568d736b0c74ebe0d6d5d43d662/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Findex_flat_map_dataset_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bc544d7379578568d736b0c74ebe0d6d5d43d662/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Findex_flat_map_dataset_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Findex_flat_map_dataset_op.cc?ref=bc544d7379578568d736b0c74ebe0d6d5d43d662",
            "patch": "@@ -252,7 +252,7 @@ class IndexFlatMapDatasetOp::Dataset::Iterator\n \n   absl::Status Initialize(IteratorContext* ctx) override\n       ABSL_LOCKS_EXCLUDED(mu_) {\n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     TF_RETURN_IF_ERROR(\n         dataset()->input_->MakeIterator(ctx, this, prefix(), &input_impl_));\n     TF_RETURN_IF_ERROR(dataset()->captured_map_func_->Instantiate(\n@@ -270,7 +270,7 @@ class IndexFlatMapDatasetOp::Dataset::Iterator\n       return Get(ctx, out_tensors, end_of_sequence);\n     }\n \n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     absl::StatusOr<std::tuple<size_t, size_t>> next_input_index_and_offset =\n         GetUnflattenedIndex(ctx, element_count_);\n     TF_RETURN_IF_ERROR(next_input_index_and_offset.status());\n@@ -304,7 +304,7 @@ class IndexFlatMapDatasetOp::Dataset::Iterator\n           cardinality, \" for dataset \", dataset()->DebugString(), \".\"));\n     }\n \n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     size_t offset = 0;\n     IteratorContext ctx_with_index_mapper =\n         GetContextWithIndexMapper(ctx, offset);\n@@ -384,7 +384,7 @@ class IndexFlatMapDatasetOp::Dataset::Iterator\n   absl::Status SaveInternal(SerializationContext* ctx,\n                             IteratorStateWriter* writer) override\n       ABSL_LOCKS_EXCLUDED(mu_) {\n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     TF_RETURN_IF_ERROR(\n         writer->WriteScalar(prefix(), kElementCount, element_count_));\n     TF_RETURN_IF_ERROR(writer->WriteScalar(prefix(), kInputElementCount,\n@@ -403,7 +403,7 @@ class IndexFlatMapDatasetOp::Dataset::Iterator\n   absl::Status RestoreInternal(IteratorContext* ctx,\n                                IteratorStateReader* reader) override\n       ABSL_LOCKS_EXCLUDED(mu_) {\n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     if (ctx->restored_element_count().has_value()) {\n       return RestoreInput(ctx, reader, input_impl_);\n     }"
        },
        {
            "sha": "c6e806e4cde4100bb9f4db5ab3e7847f547b50e7",
            "filename": "tensorflow/core/kernels/data/experimental/weighted_flat_map_dataset_op.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/bc544d7379578568d736b0c74ebe0d6d5d43d662/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fweighted_flat_map_dataset_op.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/bc544d7379578568d736b0c74ebe0d6d5d43d662/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fweighted_flat_map_dataset_op.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fdata%2Fexperimental%2Fweighted_flat_map_dataset_op.cc?ref=bc544d7379578568d736b0c74ebe0d6d5d43d662",
            "patch": "@@ -251,7 +251,7 @@ class WeightedFlatMapDatasetOp::Dataset : public DatasetBase {\n \n     absl::Status Initialize(IteratorContext* ctx) override\n         ABSL_LOCKS_EXCLUDED(mu_) {\n-      absl::MutexLock l(&mu_);\n+      absl::MutexLock l(mu_);\n       for (int i = 0; i < dataset()->inputs_.size(); ++i) {\n         TF_RETURN_IF_ERROR(dataset()->inputs_[i]->MakeIterator(\n             ctx, this, absl::StrCat(prefix(), \"[\", i, \"]\"), &input_impls_[i]));\n@@ -263,7 +263,7 @@ class WeightedFlatMapDatasetOp::Dataset : public DatasetBase {\n                                  std::vector<Tensor>* out_tensors,\n                                  bool* end_of_sequence) override\n         ABSL_LOCKS_EXCLUDED(mu_) {\n-      absl::MutexLock l(&mu_);\n+      absl::MutexLock l(mu_);\n       if (element_count_ >= cumulative_input_cardinalities_.back()) {\n         *end_of_sequence = true;\n         return absl::OkStatus();\n@@ -343,7 +343,7 @@ class WeightedFlatMapDatasetOp::Dataset : public DatasetBase {\n \n     absl::Status SaveInternal(SerializationContext* ctx,\n                               IteratorStateWriter* writer) override {\n-      absl::MutexLock l(&mu_);\n+      absl::MutexLock l(mu_);\n       TF_RETURN_IF_ERROR(\n           writer->WriteScalar(prefix(), kInputNumElements, element_count_));\n       for (int i = 0; i < inputs_element_count_.size(); ++i) {\n@@ -357,7 +357,7 @@ class WeightedFlatMapDatasetOp::Dataset : public DatasetBase {\n \n     absl::Status RestoreInternal(IteratorContext* ctx,\n                                  IteratorStateReader* reader) override {\n-      absl::MutexLock l(&mu_);\n+      absl::MutexLock l(mu_);\n       if (ctx->restored_element_count().has_value()) {\n         element_count_ = *ctx->restored_element_count();\n         // Restores all input's element counts and next positions."
        }
    ],
    "stats": {
        "total": 26,
        "additions": 13,
        "deletions": 13
    }
}