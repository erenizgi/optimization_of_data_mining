{
    "author": "ezhulenev",
    "message": "[xla] Fix PjRtFuture::GetReadyFuture\n\nPiperOrigin-RevId: 803101220",
    "sha": "227679f7fddc80c34dc395de4d00fa35dcdf6d0b",
    "files": [
        {
            "sha": "39c66c0e65ab8b3fa3b54eb9b5304bc8543bd846",
            "filename": "third_party/xla/xla/pjrt/pjrt_future.h",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/227679f7fddc80c34dc395de4d00fa35dcdf6d0b/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_future.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/227679f7fddc80c34dc395de4d00fa35dcdf6d0b/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_future.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_future.h?ref=227679f7fddc80c34dc395de4d00fa35dcdf6d0b",
            "patch": "@@ -341,9 +341,8 @@ class PjRtFutureBase : public PjRtFutureMoveControl<is_move_only> {\n   // Returns a PjRtFuture<> that becomes ready when *this is ready. If *this\n   // completes with an error, the returned future will also be an error.\n   //\n-  // These APIs defined out of line as they require PjRtFuture<> definition.\n-  PjRtFuture<> GetReadyFuture() const&;\n-  PjRtFuture<> GetReadyFuture() &&;\n+  // This function defined out of line as it requires PjRtFuture<> definition.\n+  PjRtFuture<> GetReadyFuture() const;\n \n   // Registers callback to be called once the promise is ready, with the final\n   // value.\n@@ -847,7 +846,7 @@ class PjRtFuture<void> : public internal::PjRtFutureBase<absl::Status> {\n namespace internal {\n \n template <typename T, bool is_move_only>\n-PjRtFuture<> PjRtFutureBase<T, is_move_only>::GetReadyFuture() const& {\n+PjRtFuture<> PjRtFutureBase<T, is_move_only>::GetReadyFuture() const {\n   auto [promise, future] = PjRtFuture<>::MakePromise();\n   promise_.AndThen(\n       [self = promise_.AsPtr(), promise = std::move(promise)]() mutable {\n@@ -860,11 +859,6 @@ PjRtFuture<> PjRtFutureBase<T, is_move_only>::GetReadyFuture() const& {\n   return future;\n }\n \n-template <typename T, bool is_move_only>\n-PjRtFuture<> PjRtFutureBase<T, is_move_only>::GetReadyFuture() && {\n-  return this->OnReady();\n-}\n-\n }  // namespace internal\n }  // namespace xla\n "
        }
    ],
    "stats": {
        "total": 12,
        "additions": 3,
        "deletions": 9
    }
}