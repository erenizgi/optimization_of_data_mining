{
    "author": "apivovarov",
    "message": "Replace std::transform with absl::c_transform\n\nThis change refactors uses of std::transform to its Abseil container algorithm equivalents, absl::c_transform. The Abseil versions are more concise as they operate directly on containers.\n\nPiperOrigin-RevId: 840536602",
    "sha": "0857cfb1ffc1c5222f33f8794d381c90edd6b263",
    "files": [
        {
            "sha": "151c46c8df3408f1019a9c52efa340198257b46a",
            "filename": "third_party/xla/xla/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2FBUILD?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -669,6 +669,7 @@ cc_library(\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/util:byte_swap_array\",\n         \"//xla/tsl/util:safe_reinterpret_cast\",\n+        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/base:no_destructor\",\n@@ -709,6 +710,7 @@ xla_cc_test(\n         \"//xla/tsl/platform:test_benchmark\",\n         \"//xla/tsl/platform:test_main\",\n         \"//xla/tsl/util:safe_reinterpret_cast\",\n+        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base\",\n         \"@com_google_absl//absl/hash\",\n         \"@com_google_absl//absl/random\","
        },
        {
            "sha": "2a5d61871b4dfad8a1d46449627f9dae656f3325",
            "filename": "third_party/xla/xla/backends/cpu/codegen/vector_ir_builder.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fvector_ir_builder.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fvector_ir_builder.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Fvector_ir_builder.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -15,7 +15,6 @@ limitations under the License.\n \n #include \"xla/backends/cpu/codegen/vector_ir_builder.h\"\n \n-#include <algorithm>\n #include <cstdint>\n #include <initializer_list>\n #include <iterator>\n@@ -364,8 +363,8 @@ std::vector<llvm::Value*> VectorIrBuilder::ComputeHorizontalSums(\n   }\n \n   std::vector<llvm::Value*> result;\n-  std::transform(vectors.begin(), vectors.end(), std::back_inserter(result),\n-                 [this](llvm::Value* vector) { return AddReduce(vector); });\n+  absl::c_transform(vectors, std::back_inserter(result),\n+                    [this](llvm::Value* vector) { return AddReduce(vector); });\n   if (init_values) {\n     for (int64_t i = 0, e = result.size(); i < e; i++) {\n       result[i] = Add(result[i],"
        },
        {
            "sha": "2b19bfa5eda74f6eb3e001aab667f4447565a340",
            "filename": "third_party/xla/xla/hlo/builder/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2FBUILD?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -149,7 +149,6 @@ cc_library(\n         \"//xla:comparison_util\",\n         \"//xla:literal\",\n         \"//xla:literal_util\",\n-        \"//xla:permutation_util\",\n         \"//xla:shape_util\",\n         \"//xla:sharding_op_util\",\n         \"//xla:status_macros\",\n@@ -162,6 +161,7 @@ cc_library(\n         \"//xla/service:shape_inference\",\n         \"//xla/tsl/lib/core:bitmap\",\n         \"//xla/tsl/platform:errors\",\n+        \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base:nullability\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n@@ -176,7 +176,6 @@ cc_library(\n         \"@com_google_absl//absl/types:span\",\n         \"@local_tsl//tsl/platform:errors\",\n         \"@local_tsl//tsl/platform:stacktrace\",\n-        \"@local_tsl//tsl/platform:statusor\",\n     ],\n )\n "
        },
        {
            "sha": "2392560c3bd28e4364f599016d1870558814debe",
            "filename": "third_party/xla/xla/hlo/builder/xla_builder.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fxla_builder.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fxla_builder.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fbuilder%2Fxla_builder.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -15,7 +15,6 @@ limitations under the License.\n \n #include \"xla/hlo/builder/xla_builder.h\"\n \n-#include <algorithm>\n #include <cstddef>\n #include <cstdint>\n #include <functional>\n@@ -56,7 +55,6 @@ limitations under the License.\n #include \"xla/layout_util.h\"\n #include \"xla/literal.h\"\n #include \"xla/literal_util.h\"\n-#include \"xla/permutation_util.h\"\n #include \"xla/primitive_util.h\"\n #include \"xla/service/hlo.pb.h\"\n #include \"xla/service/shape_inference.h\"\n@@ -65,11 +63,11 @@ limitations under the License.\n #include \"xla/sharding_op_util.h\"\n #include \"xla/status_macros.h\"\n #include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/window_util.h\"\n #include \"xla/xla_data.pb.h\"\n #include \"tsl/platform/stacktrace.h\"\n-#include \"tsl/platform/statusor.h\"\n \n namespace xla {\n \n@@ -4116,8 +4114,8 @@ XlaOp XlaBuilder::AllToAllArray(\n \n     if (is_unbounded) {\n       std::vector<bool> dynamic_dimensions;\n-      std::transform(\n-          sizes.begin(), sizes.end(), std::back_inserter(dynamic_dimensions),\n+      absl::c_transform(\n+          sizes, std::back_inserter(dynamic_dimensions),\n           [](int64_t size) { return size == Shape::kUnboundedSize; });\n       TF_ASSIGN_OR_RETURN(\n           const Shape shape,"
        },
        {
            "sha": "ce763d545a5dfab373f0664d18e0f57b512a2261",
            "filename": "third_party/xla/xla/hlo/evaluator/hlo_evaluator.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fevaluator%2Fhlo_evaluator.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -3618,8 +3618,8 @@ absl::Status HloEvaluator::HandleDynamicUpdateSlice(const HloInstruction* dus) {\n   std::vector<int64_t> result_index(rank, 0);\n \n   auto func = [&](absl::Span<const int64_t> update_index) {\n-    std::transform(update_index.begin(), update_index.end(), start.begin(),\n-                   result_index.begin(), std::plus<int64_t>());\n+    absl::c_transform(update_index, start, result_index.begin(),\n+                      std::plus<int64_t>());\n     result.CopyElementFrom(update_literal, update_index, result_index);\n     return true;\n   };"
        },
        {
            "sha": "946668fcbe5a5f077a41fe280f13f6b54769271c",
            "filename": "third_party/xla/xla/hlo/ir/hlo_instruction.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 11,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fir%2Fhlo_instruction.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -81,9 +81,7 @@ limitations under the License.\n #include \"xla/status_macros.h\"\n #include \"xla/tsl/lib/gtl/iterator_range.h\"\n #include \"xla/tsl/lib/gtl/map_util.h\"\n-#include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"  // IWYU pragma: keep\n-#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n #include \"xla/tsl/platform/status_macros.h\"\n@@ -321,10 +319,10 @@ absl::StatusOr<std::unique_ptr<HloInstruction>> HloInstruction::CreateFromProto(\n   };\n   const auto all_operands = [&instruction_map, &proto]() {\n     std::vector<HloInstruction*> result(proto.operand_ids_size());\n-    std::transform(proto.operand_ids().begin(), proto.operand_ids().end(),\n-                   result.begin(), [&instruction_map](int64_t operand_id) {\n-                     return instruction_map.at(CalculateLocalId(operand_id));\n-                   });\n+    absl::c_transform(proto.operand_ids(), result.begin(),\n+                      [&instruction_map](int64_t operand_id) {\n+                        return instruction_map.at(CalculateLocalId(operand_id));\n+                      });\n     return result;\n   };\n   const auto output_to_operand_aliasing = [&proto]() {\n@@ -345,11 +343,10 @@ absl::StatusOr<std::unique_ptr<HloInstruction>> HloInstruction::CreateFromProto(\n   };\n   const auto all_computations = [&computation_map, &proto]() {\n     std::vector<HloComputation*> result(proto.called_computation_ids_size());\n-    std::transform(proto.called_computation_ids().begin(),\n-                   proto.called_computation_ids().end(), result.begin(),\n-                   [&computation_map](int64_t computation_id) {\n-                     return computation_map.at(computation_id);\n-                   });\n+    absl::c_transform(proto.called_computation_ids(), result.begin(),\n+                      [&computation_map](int64_t computation_id) {\n+                        return computation_map.at(computation_id);\n+                      });\n     return result;\n   };\n "
        },
        {
            "sha": "f93f6784af1aaf0fede7c2ae232ea0a5214eabf6",
            "filename": "third_party/xla/xla/literal.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fliteral.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fliteral.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fliteral.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -29,6 +29,7 @@ limitations under the License.\n #include <utility>\n #include <vector>\n \n+#include \"absl/algorithm/container.h\"\n #include \"absl/base/casts.h\"\n #include \"absl/base/no_destructor.h\"\n #include \"absl/container/inlined_vector.h\"\n@@ -455,11 +456,11 @@ absl::Status MutableLiteralBase::CopySliceFromInternal(\n \n     auto copy_proc = [&](absl::Span<const int64_t> indexes) {\n       // Map from multi-dimensional index, to source index.\n-      std::transform(indexes.begin(), indexes.end(), src_base.begin(),\n-                     src_indexes.begin(), std::plus<int64_t>());\n+      absl::c_transform(indexes, src_base, src_indexes.begin(),\n+                        std::plus<int64_t>());\n       // Map from multi-dimensional index, to destination index.\n-      std::transform(indexes.begin(), indexes.end(), dest_base.begin(),\n-                     dest_indexes.begin(), std::plus<int64_t>());\n+      absl::c_transform(indexes, dest_base, dest_indexes.begin(),\n+                        std::plus<int64_t>());\n \n       int64_t src_index = linear_index(src_literal.shape(), src_indexes);\n       int64_t dest_index = linear_index(shape(), dest_indexes);"
        },
        {
            "sha": "0c55b2cb54e10c1b5a1e7d43301ce2a4cefbacdb",
            "filename": "third_party/xla/xla/literal_test.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fliteral_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fliteral_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fliteral_test.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -28,6 +28,7 @@ limitations under the License.\n #include <vector>\n \n #include <gtest/gtest.h>\n+#include \"absl/algorithm/container.h\"\n #include \"absl/base/casts.h\"\n #include \"absl/hash/hash.h\"\n #include \"absl/random/random.h\"\n@@ -1425,11 +1426,11 @@ TEST_F(LiteralUtilTest, CopySliceFrom) {\n     bool matched = true;\n     auto check_proc = [&](absl::Span<const int64_t> indexes) {\n       std::copy(indexes.begin(), indexes.end(), source_indexes.begin());\n-      std::transform(source_indexes.begin(), source_indexes.end(), src_base,\n-                     source_indexes.begin(), std::plus<int64_t>());\n+      absl::c_transform(source_indexes, src_base, source_indexes.begin(),\n+                        std::plus<int64_t>());\n       std::copy(indexes.begin(), indexes.end(), blank_indexes.begin());\n-      std::transform(blank_indexes.begin(), blank_indexes.end(), dest_base,\n-                     blank_indexes.begin(), std::plus<int64_t>());\n+      absl::c_transform(blank_indexes, dest_base, blank_indexes.begin(),\n+                        std::plus<int64_t>());\n       auto bval = blank.Get<uint32_t>(blank_indexes);\n       matched = (bval != 0 && bval == source.Get<uint32_t>(source_indexes));\n       return matched;"
        },
        {
            "sha": "b6a1bb648eee526fa75f8d6bbb38f87894fc0b01",
            "filename": "third_party/xla/xla/stream_executor/cuda/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2FBUILD?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -1518,6 +1518,7 @@ cc_library(\n         \"//xla/stream_executor:device_memory\",\n         \"//xla/stream_executor:dnn\",\n         \"//xla/stream_executor:kernel\",\n+        \"//xla/stream_executor:kernel_args\",\n         \"//xla/stream_executor:launch_dim\",\n         \"//xla/stream_executor:platform\",\n         \"//xla/stream_executor:semantic_version\","
        },
        {
            "sha": "2fb78067a5d6badb268f60124a50a7224030e26b",
            "filename": "third_party/xla/xla/stream_executor/cuda/cuda_command_buffer.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_command_buffer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_command_buffer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_command_buffer.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -15,13 +15,11 @@ limitations under the License.\n \n #include \"xla/stream_executor/cuda/cuda_command_buffer.h\"\n \n-#include <algorithm>\n #include <cstddef>\n #include <cstdint>\n #include <cstring>\n #include <memory>\n #include <string>\n-#include <utility>\n #include <vector>\n \n #include \"absl/base/casts.h\"\n@@ -44,6 +42,7 @@ limitations under the License.\n #include \"xla/stream_executor/dnn.h\"\n #include \"xla/stream_executor/gpu/gpu_command_buffer.h\"\n #include \"xla/stream_executor/kernel.h\"\n+#include \"xla/stream_executor/kernel_args.h\"\n #include \"xla/stream_executor/launch_dim.h\"\n #include \"xla/stream_executor/platform.h\"\n #include \"xla/stream_executor/semantic_version.h\"\n@@ -183,11 +182,10 @@ static std::unique_ptr<KernelArgsPackedArrayBase> PackCaseConditionKernelArgs(\n   // Pad handles up to size 8 with a default initialized handle.\n   std::vector<CUgraphConditionalHandle> padded_handles{};\n   padded_handles.resize(kCaseBranchBatchSize);\n-  std::transform(conditionals.begin(), conditionals.end(),\n-                 padded_handles.begin(),\n-                 [](GraphConditionalHandle conditional) {\n-                   return ToCudaGraphHandle(conditional);\n-                 });\n+  absl::c_transform(conditionals, padded_handles.begin(),\n+                    [](GraphConditionalHandle conditional) {\n+                      return ToCudaGraphHandle(conditional);\n+                    });\n \n   return PackKernelArgs(\n       kernel, padded_handles[0], padded_handles[1], padded_handles[2],"
        },
        {
            "sha": "2054dea9eafa30cd160bbc23c120103dda8893cf",
            "filename": "third_party/xla/xla/stream_executor/cuda/cuda_dnn.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 18,
            "changes": 34,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_dnn.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_dnn.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_dnn.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -19,7 +19,6 @@ limitations under the License.\n #include <array>\n #include <cstddef>\n #include <cstdint>\n-#include <functional>\n #include <iterator>\n #include <limits>\n #include <memory>\n@@ -648,10 +647,10 @@ class CudnnTensorDescriptor {\n         // cuDNN requires arrays of ints.\n         std::vector<int> strides(nd);\n         std::vector<int> dims(nd);\n-        std::transform(strides64.cbegin(), strides64.cend(), strides.begin(),\n-                       &CheckedNarrowing<int64_t, int>);\n-        std::transform(dims64.cbegin(), dims64.cend(), dims.begin(),\n-                       &CheckedNarrowing<int64_t, int>);\n+        absl::c_transform(strides64, strides.begin(),\n+                          &CheckedNarrowing<int64_t, int>);\n+        absl::c_transform(dims64, dims.begin(),\n+                          &CheckedNarrowing<int64_t, int>);\n         CHECK_CUDNN_OK(cudnnSetTensorNdDescriptor(handle_.get(), elem_type, nd,\n                                                   dims.data(), strides.data()))\n             << \"batch_descriptor: \" << batch_descriptor.ToString();\n@@ -725,7 +724,7 @@ class CudnnFilterDescriptor {\n     dims[1] = filter_descriptor.input_feature_map_count();\n     absl::Span<const int64_t> spatial_dims =\n         filter_descriptor.input_filter_dims();\n-    std::copy(spatial_dims.begin(), spatial_dims.end(), dims.begin() + 2);\n+    absl::c_copy(spatial_dims, dims.begin() + 2);\n \n     CHECK_CUDNN_OK(cudnnSetFilterNdDescriptor(handle_.get(), elem_type, format,\n                                               dims.size(), dims.data()));\n@@ -879,14 +878,14 @@ class CudnnConvolutionDescriptor {\n     std::vector<int> strides(convolution_descriptor.ndims());\n     std::vector<int> padding(convolution_descriptor.ndims());\n     std::vector<int> dilations(convolution_descriptor.ndims());\n-    std::transform(strides64.cbegin(), strides64.cend(), strides.begin(),\n-                   &CheckedNarrowing<int64_t, int>);\n-    std::transform(padding64.cbegin(), padding64.cend(), padding.begin(),\n-                   &CheckedNarrowing<int64_t, int>);\n+    absl::c_transform(strides64, strides.begin(),\n+                      &CheckedNarrowing<int64_t, int>);\n+    absl::c_transform(padding64, padding.begin(),\n+                      &CheckedNarrowing<int64_t, int>);\n     // TODO(yangzihao): Test with negative dilation to make sure that cudnn\n     // doesn't crash.\n-    std::transform(dilations64.cbegin(), dilations64.cend(), dilations.begin(),\n-                   &CheckedNarrowing<int64_t, int>);\n+    absl::c_transform(dilations64, dilations.begin(),\n+                      &CheckedNarrowing<int64_t, int>);\n \n     CHECK_CUDNN_OK(cudnnSetConvolutionNdDescriptor(\n         handle_.get(), convolution_descriptor.ndims(), padding.data(),\n@@ -954,12 +953,11 @@ class CudnnPoolingDescriptor {\n     std::vector<int> shape(nd);\n     std::vector<int> padding(nd);\n     std::vector<int> strides(nd);\n-    std::transform(strides64.cbegin(), strides64.cend(), strides.begin(),\n-                   &CheckedNarrowing<int64_t, int>);\n-    std::transform(padding64.cbegin(), padding64.cend(), padding.begin(),\n-                   &CheckedNarrowing<int64_t, int>);\n-    std::transform(shape64.cbegin(), shape64.cend(), shape.begin(),\n-                   &CheckedNarrowing<int64_t, int>);\n+    absl::c_transform(strides64, strides.begin(),\n+                      &CheckedNarrowing<int64_t, int>);\n+    absl::c_transform(padding64, padding.begin(),\n+                      &CheckedNarrowing<int64_t, int>);\n+    absl::c_transform(shape64, shape.begin(), &CheckedNarrowing<int64_t, int>);\n     bool propagate_nans = pooling_descriptor.propagate_nans();\n     const auto cudnn_max_pooling_mode = engine_options.require_determinism\n                                             ? CUDNN_POOLING_MAX_DETERMINISTIC"
        },
        {
            "sha": "3156a1e60746d61345135b2cb83c03d1b556732a",
            "filename": "third_party/xla/xla/stream_executor/rocm/rocm_dnn.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 18,
            "changes": 33,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_dnn.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_dnn.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_dnn.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -915,10 +915,9 @@ absl::StatusOr<ScopedTensorDescriptor> scope(\n       // MIOpen requires arrays of ints.\n       std::vector<int> strides(nd);\n       std::vector<int> dims(nd);\n-      std::transform(strides64.cbegin(), strides64.cend(), strides.begin(),\n-                     &CheckedNarrowing<int64_t, int>);\n-      std::transform(dims64.cbegin(), dims64.cend(), dims.begin(),\n-                     &CheckedNarrowing<int64_t, int>);\n+      absl::c_transform(strides64, strides.begin(),\n+                        &CheckedNarrowing<int64_t, int>);\n+      absl::c_transform(dims64, dims.begin(), &CheckedNarrowing<int64_t, int>);\n       status = wrap::miopenSetTensorDescriptor(obj.handle_, data_type, nd,\n                                                dims.data(), strides.data());\n #endif\n@@ -1032,15 +1031,15 @@ absl::StatusOr<ScopedConvolutionDescriptor> scope(\n   // MIOpen requires arrays of ints.\n   std::vector<int> strides(convolution_descriptor.ndims());\n   std::vector<int> padding(convolution_descriptor.ndims());\n-  std::transform(strides64.cbegin(), strides64.cend(), strides.begin(),\n-                 &CheckedNarrowing<int64_t, int>);\n-  std::transform(padding64.cbegin(), padding64.cend(), padding.begin(),\n-                 &CheckedNarrowing<int64_t, int>);\n+  absl::c_transform(strides64, strides.begin(),\n+                    &CheckedNarrowing<int64_t, int>);\n+  absl::c_transform(padding64, padding.begin(),\n+                    &CheckedNarrowing<int64_t, int>);\n \n   std::vector<int> upscale(convolution_descriptor.ndims());\n   const auto& dilations64 = convolution_descriptor.dilations();\n-  std::transform(dilations64.cbegin(), dilations64.cend(), upscale.begin(),\n-                 &CheckedNarrowing<int64_t, int>);\n+  absl::c_transform(dilations64, upscale.begin(),\n+                    &CheckedNarrowing<int64_t, int>);\n \n   status = wrap::miopenInitConvolutionNdDescriptor(\n       obj.handle_, convolution_descriptor.ndims(), padding.data(),\n@@ -1089,12 +1088,11 @@ absl::StatusOr<ScopedPoolingDescriptor> scope(\n   std::vector<int> shape(nd);\n   std::vector<int> padding(nd);\n   std::vector<int> strides(nd);\n-  std::transform(strides64.cbegin(), strides64.cend(), strides.begin(),\n-                 &CheckedNarrowing<int64_t, int>);\n-  std::transform(padding64.cbegin(), padding64.cend(), padding.begin(),\n-                 &CheckedNarrowing<int64_t, int>);\n-  std::transform(shape64.cbegin(), shape64.cend(), shape.begin(),\n-                 &CheckedNarrowing<int64_t, int>);\n+  absl::c_transform(strides64, strides.begin(),\n+                    &CheckedNarrowing<int64_t, int>);\n+  absl::c_transform(padding64, padding.begin(),\n+                    &CheckedNarrowing<int64_t, int>);\n+  absl::c_transform(shape64, shape.begin(), &CheckedNarrowing<int64_t, int>);\n \n   status = wrap::miopenSetNdPoolingDescriptor(\n       obj.handle_,\n@@ -4698,8 +4696,7 @@ bool MIOpenSupport::DoNormalizeBackwardWithDimensions(\n   // miopen does not use strides and must have 4D tensor.\n   std::vector<int> dimsint(4);\n \n-  std::transform(dims64.cbegin(), dims64.cend(), dimsint.begin(),\n-                 &CheckedNarrowing<int64_t, int>);\n+  absl::c_transform(dims64, dimsint.begin(), &CheckedNarrowing<int64_t, int>);\n \n   dest2_size =\n       dimsint[0] * dimsint[1] * dimsint[2] * dimsint[3] * sizeof(float);"
        },
        {
            "sha": "b8f0ea10cad89b8f1bbeb2d4ef5153d0d124c01f",
            "filename": "third_party/xla/xla/tests/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Ftests%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Ftests%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2FBUILD?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -3067,6 +3067,7 @@ xla_test(\n         \"//xla/service/gpu:backend_configs_cc\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/platform:test\",\n+        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status:statusor\","
        },
        {
            "sha": "8881151357e02c0df4edfa1d049c1a64dc244e82",
            "filename": "third_party/xla/xla/tests/collective_ops_sharded_unsharded_e2e_test.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Ftests%2Fcollective_ops_sharded_unsharded_e2e_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Ftests%2Fcollective_ops_sharded_unsharded_e2e_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fcollective_ops_sharded_unsharded_e2e_test.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -13,14 +13,14 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n-#include <algorithm>\n #include <cstdint>\n #include <functional>\n #include <memory>\n #include <string>\n #include <utility>\n #include <vector>\n \n+#include \"absl/algorithm/container.h\"\n #include \"absl/log/check.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/statusor.h\"\n@@ -165,9 +165,8 @@ class CollectiveOpsTestE2EShardedUnsharded : public CollectiveOpsE2ETestBase {\n             upper[param_sharded_dims[k][m]] =\n                 param_dims_per_shard[k][param_sharded_dims[k][m]];\n           }\n-          std::transform(upper.begin(), upper.end(),\n-                         param_dims_per_shard[k].begin(), lower.begin(),\n-                         std::minus<int64_t>());\n+          absl::c_transform(upper, param_dims_per_shard[k], lower.begin(),\n+                            std::minus<int64_t>());\n         }\n       } else {\n         fake_args_sliced[k].push_back(fake_args[k].Clone());\n@@ -227,8 +226,8 @@ class CollectiveOpsTestE2EShardedUnsharded : public CollectiveOpsE2ETestBase {\n           upper[root_sharded_dims[m]] =\n               root_dims_per_shard[root_sharded_dims[m]];\n         }\n-        std::transform(upper.begin(), upper.end(), root_dims_per_shard.begin(),\n-                       lower.begin(), std::minus<int64_t>());\n+        absl::c_transform(upper, root_dims_per_shard, lower.begin(),\n+                          std::minus<int64_t>());\n       }\n     } else {\n       EXPECT_TRUE("
        },
        {
            "sha": "cbdfc22d41b4c7da1855412d2677e95fdc8b51b6",
            "filename": "third_party/xla/xla/tests/complex_unary_op_test.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Ftests%2Fcomplex_unary_op_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Ftests%2Fcomplex_unary_op_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftests%2Fcomplex_unary_op_test.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -51,16 +51,16 @@ class ComplexUnaryOpTest\n   template <typename T, size_t index, typename... Types>\n   std::vector<T> get_column(const std::vector<std::tuple<Types...>>& table) {\n     std::vector<T> column;\n-    std::transform(\n-        table.cbegin(), table.cend(), std::back_inserter(column),\n-        [](const auto& item) { return static_cast<T>(std::get<index>(item)); });\n+    absl::c_transform(table, std::back_inserter(column), [](const auto& item) {\n+      return static_cast<T>(std::get<index>(item));\n+    });\n     return column;\n   }\n \n   template <typename T, typename S>\n   void scale_column(std::vector<T>& column, const std::vector<S>& scales) {\n-    std::transform(column.begin(), column.end(), scales.begin(), column.begin(),\n-                   [](const T& lhs, const S& rhs) { return lhs * rhs; });\n+    absl::c_transform(column, scales, column.begin(),\n+                      [](const T& lhs, const S& rhs) { return lhs * rhs; });\n   }\n \n   template <typename C>"
        },
        {
            "sha": "fee72cf92ca78e4eb88fde5548d98b8b560aad44",
            "filename": "third_party/xla/xla/util.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Futil.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0857cfb1ffc1c5222f33f8794d381c90edd6b263/third_party%2Fxla%2Fxla%2Futil.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Futil.cc?ref=0857cfb1ffc1c5222f33f8794d381c90edd6b263",
            "patch": "@@ -24,7 +24,6 @@ limitations under the License.\n #include <functional>\n #include <iterator>\n #include <limits>\n-#include <memory>\n #include <sstream>\n #include <string>\n #include <tuple>\n@@ -338,8 +337,8 @@ std::vector<int64_t> ElemwiseProduct(absl::Span<const int64_t> a,\n                                      absl::Span<const int64_t> b) {\n   CHECK_EQ(a.size(), b.size());\n   std::vector<int64_t> result;\n-  std::transform(a.begin(), a.end(), b.begin(), std::back_inserter(result),\n-                 std::multiplies<int64_t>());\n+  absl::c_transform(a, b, std::back_inserter(result),\n+                    std::multiplies<int64_t>());\n   return result;\n }\n "
        }
    ],
    "stats": {
        "total": 166,
        "additions": 78,
        "deletions": 88
    }
}