{
    "author": "cota",
    "message": "[xla:codegen] split LowerToLLVMPass into CPU and GPU versions\n\nPiperOrigin-RevId: 842927209",
    "sha": "1f1065a43ef68726ae91f774fdebfc816d708b4b",
    "files": [
        {
            "sha": "e770f8a6a7907f6110aaa8ab3c4872e263c914ae",
            "filename": "third_party/xla/xla/backends/cpu/codegen/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2FBUILD?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -193,6 +193,7 @@ cc_library(\n         \"//xla/codegen:trace_pass_instrumentation\",\n         \"//xla/codegen/emitters/ir:xla\",\n         \"//xla/codegen/emitters/ir:xla_attrs_inc_gen\",\n+        \"//xla/codegen/emitters/transforms:lower_to_llvm_cpu_pass\",\n         \"//xla/codegen/emitters/transforms:pass_pipelines\",\n         \"//xla/codegen/emitters/transforms:passes\",\n         \"//xla/codegen/xtile/ir:xtile\","
        },
        {
            "sha": "4b6ac965f10230bd6566a26edd4f9a217d163d21",
            "filename": "third_party/xla/xla/backends/cpu/codegen/fusion_compiler.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Ffusion_compiler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Ffusion_compiler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fcodegen%2Ffusion_compiler.cc?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -106,6 +106,7 @@ limitations under the License.\n #include \"xla/codegen/emitters/ir/xla_attrs.h.inc\"\n #include \"xla/codegen/emitters/ir/xla_dialect.h\"\n #include \"xla/codegen/emitters/ir/xla_ops.h\"\n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_cpu.h\"\n #include \"xla/codegen/emitters/transforms/pass_pipelines.h\"\n #include \"xla/codegen/emitters/transforms/passes.h\"\n #include \"xla/codegen/llvm_kernel_source.h\"\n@@ -212,7 +213,7 @@ static void AddGenericLoweringPasses(mlir::OpPassManager& pm,\n   pm.addPass(mlir::createSCFToControlFlowPass());\n   pm.addPass(emitters::CreateLowerXlaIntrinsicLibPass());\n   pm.addNestedPass<mlir::func::FuncOp>(CreateConvertMathToLLVMPass());\n-  pm.addPass(emitters::CreateLowerToLLVMPass(/*target_type=*/\"cpu\"));\n+  pm.addPass(emitters::CreateLowerToLLVMCPUPass());\n   pm.addPass(mlir::createReconcileUnrealizedCastsPass());\n   pm.addPass(mlir::createCanonicalizerPass());\n   pm.addPass(mlir::createCSEPass());"
        },
        {
            "sha": "6f91eb138bab3c9343d8121954c81ab0dcfebd33",
            "filename": "third_party/xla/xla/backends/gpu/codegen/emitters/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2FBUILD?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -59,6 +59,7 @@ cc_library(\n         \"//xla/codegen/emitters:kernel_api_builder\",\n         \"//xla/codegen/emitters:kernel_arguments\",\n         \"//xla/codegen/emitters/ir:xla\",\n+        \"//xla/codegen/emitters/transforms:lower_to_llvm_gpu_pass\",\n         \"//xla/codegen/emitters/transforms:pass_pipelines\",\n         \"//xla/codegen/emitters/transforms:passes\",\n         \"//xla/hlo/analysis:indexing_analysis\","
        },
        {
            "sha": "2821b28b53215b802332d12fe5fe3c63a69e78fb",
            "filename": "third_party/xla/xla/backends/gpu/codegen/emitters/emitter_base.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Femitter_base.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Femitter_base.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Femitters%2Femitter_base.cc?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -88,6 +88,7 @@ limitations under the License.\n #include \"xla/codegen/emitters/ir/xla_ops.h\"\n #include \"xla/codegen/emitters/kernel_api_builder.h\"\n #include \"xla/codegen/emitters/kernel_arguments.h\"\n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_gpu.h\"\n #include \"xla/codegen/emitters/transforms/pass_pipelines.h\"\n #include \"xla/codegen/emitters/transforms/passes.h\"\n #include \"xla/hlo/analysis/indexing_analysis.h\"\n@@ -511,7 +512,7 @@ void AddLoweringPasses(mlir::OpPassManager& pm,\n   pm.addPass(emitters::CreateExpandFloatOpsPass());\n   pm.addPass(mlir::createLowerAffinePass());\n   pm.addPass(mlir::createSCFToControlFlowPass());\n-  pm.addPass(emitters::CreateLowerToLLVMPass(device));\n+  pm.addPass(emitters::CreateLowerToLLVMGPUPass(device));\n   pm.addPass(mlir::createReconcileUnrealizedCastsPass());\n }\n "
        },
        {
            "sha": "9e07eef2ba0f2528f9d9ac9b4be422b2b5da93b2",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/BUILD",
            "status": "modified",
            "additions": 95,
            "deletions": 18,
            "changes": 113,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2FBUILD?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -29,6 +29,101 @@ cc_library(\n     ],\n )\n \n+gentbl_cc_library(\n+    name = \"lower_to_llvm_cpu_inc_gen\",\n+    compatible_with = get_compatible_with_portable(),\n+    tbl_outs = {\"lower_to_llvm_cpu.h.inc\": [\n+        \"-gen-pass-decls\",\n+        \"-name=TransformsLLVMCPU\",\n+    ]},\n+    tblgen = \"@llvm-project//mlir:mlir-tblgen\",\n+    td_file = \"lower_to_llvm_cpu.td\",\n+    visibility = [\"//visibility:private\"],\n+    deps = [\"@llvm-project//mlir:PassBaseTdFiles\"],\n+)\n+\n+cc_library(\n+    name = \"lower_to_llvm_cpu_pass\",\n+    srcs = [\"lower_to_llvm_cpu.cc\"],\n+    hdrs = [\"lower_to_llvm_cpu.h\"],\n+    deps = [\n+        \":lower_to_llvm_cpu_inc_gen\",\n+        \"@llvm-project//mlir:ArithDialect\",\n+        \"@llvm-project//mlir:ArithToLLVM\",\n+        \"@llvm-project//mlir:ArithTransforms\",\n+        \"@llvm-project//mlir:ComplexDialect\",\n+        \"@llvm-project//mlir:ComplexToLLVM\",\n+        \"@llvm-project//mlir:ControlFlowToLLVM\",\n+        \"@llvm-project//mlir:FuncDialect\",\n+        \"@llvm-project//mlir:FuncToLLVM\",\n+        \"@llvm-project//mlir:LLVMCommonConversion\",\n+        \"@llvm-project//mlir:MathDialect\",\n+        \"@llvm-project//mlir:MathToLLVM\",\n+        \"@llvm-project//mlir:MemRefToLLVM\",\n+        \"@llvm-project//mlir:Pass\",\n+        \"@llvm-project//mlir:SCFToControlFlow\",\n+        \"@llvm-project//mlir:TransformUtils\",\n+        \"@llvm-project//mlir:UBToLLVM\",\n+        \"@llvm-project//mlir:VectorToLLVM\",\n+    ],\n+)\n+\n+gentbl_cc_library(\n+    name = \"lower_to_llvm_gpu_inc_gen\",\n+    compatible_with = get_compatible_with_portable(),\n+    tbl_outs = {\"lower_to_llvm_gpu.h.inc\": [\n+        \"-gen-pass-decls\",\n+        \"-name=TransformsLLVMGPU\",\n+    ]},\n+    tblgen = \"@llvm-project//mlir:mlir-tblgen\",\n+    td_file = \"lower_to_llvm_gpu.td\",\n+    visibility = [\"//visibility:private\"],\n+    deps = [\"@llvm-project//mlir:PassBaseTdFiles\"],\n+)\n+\n+cc_library(\n+    name = \"lower_to_llvm_gpu_pass\",\n+    srcs = [\"lower_to_llvm_gpu.cc\"],\n+    hdrs = [\"lower_to_llvm_gpu.h\"],\n+    deps = [\n+        \":lower_to_llvm_gpu_inc_gen\",\n+        \"//xla/codegen:device_spec\",\n+        \"//xla/stream_executor:device_description\",\n+        \"//xla/stream_executor:device_description_proto_cc\",\n+        \"//xla/tsl/platform:logging\",\n+        \"@com_google_protobuf//:protobuf\",\n+        \"@llvm-project//llvm:Support\",\n+        \"@llvm-project//mlir:AMDGPUUtils\",\n+        \"@llvm-project//mlir:AffineToStandard\",\n+        \"@llvm-project//mlir:ArithDialect\",\n+        \"@llvm-project//mlir:ArithToLLVM\",\n+        \"@llvm-project//mlir:ArithTransforms\",\n+        \"@llvm-project//mlir:ComplexDialect\",\n+        \"@llvm-project//mlir:ComplexToLLVM\",\n+        \"@llvm-project//mlir:ControlFlowToLLVM\",\n+        \"@llvm-project//mlir:DataLayoutInterfaces\",\n+        \"@llvm-project//mlir:FuncDialect\",\n+        \"@llvm-project//mlir:FuncToLLVM\",\n+        \"@llvm-project//mlir:GPUToLLVMSPVTransforms\",\n+        \"@llvm-project//mlir:GPUToNVVMTransforms\",\n+        \"@llvm-project//mlir:GPUToROCDLTransforms\",\n+        \"@llvm-project//mlir:IR\",\n+        \"@llvm-project//mlir:LLVMCommonConversion\",\n+        \"@llvm-project//mlir:LLVMDialect\",\n+        \"@llvm-project//mlir:MathDialect\",\n+        \"@llvm-project//mlir:MathToLLVM\",\n+        \"@llvm-project//mlir:MemRefToLLVM\",\n+        \"@llvm-project//mlir:NVVMDialect\",\n+        \"@llvm-project//mlir:Pass\",\n+        \"@llvm-project//mlir:SCFToControlFlow\",\n+        \"@llvm-project//mlir:Support\",\n+        \"@llvm-project//mlir:TransformUtils\",\n+        \"@llvm-project//mlir:UBToLLVM\",\n+        \"@llvm-project//mlir:VectorToLLVM\",\n+        \"@local_tsl//tsl/platform:protobuf\",\n+    ],\n+)\n+\n gentbl_cc_library(\n     name = \"passes_inc_gen\",\n     compatible_with = get_compatible_with_portable(),\n@@ -49,7 +144,6 @@ cc_library(\n         \"expand_float_ops.cc\",\n         \"flatten_tensors.cc\",\n         \"lower_tensors.cc\",\n-        \"lower_to_llvm.cc\",\n         \"lower_xla_intrinsic_lib.cc\",\n         \"lower_xla_to_scf.cc\",\n         \"merge_pointers_to_same_slice.cc\",\n@@ -89,7 +183,6 @@ cc_library(\n         \"//xla/stream_executor:device_description_proto_cc\",\n         \"//xla/stream_executor/cuda:cuda_compute_capability\",\n         \"//xla/stream_executor/rocm:rocm_compute_capability\",\n-        \"//xla/tsl/platform:logging\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log:check\",\n@@ -98,41 +191,25 @@ cc_library(\n         \"@com_google_absl//absl/types:span\",\n         \"@com_google_protobuf//:protobuf\",\n         \"@llvm-project//llvm:Support\",\n-        \"@llvm-project//mlir:AMDGPUUtils\",\n-        \"@llvm-project//mlir:AffineToStandard\",\n         \"@llvm-project//mlir:ArithDialect\",\n-        \"@llvm-project//mlir:ArithToLLVM\",\n-        \"@llvm-project//mlir:ArithTransforms\",\n         \"@llvm-project//mlir:ComplexDialect\",\n-        \"@llvm-project//mlir:ComplexToLLVM\",\n-        \"@llvm-project//mlir:ControlFlowToLLVM\",\n         \"@llvm-project//mlir:DataLayoutInterfaces\",\n         \"@llvm-project//mlir:DialectUtils\",\n         \"@llvm-project//mlir:FuncDialect\",\n-        \"@llvm-project//mlir:FuncToLLVM\",\n         \"@llvm-project//mlir:GPUDialect\",\n-        \"@llvm-project//mlir:GPUToLLVMSPVTransforms\",\n-        \"@llvm-project//mlir:GPUToNVVMTransforms\",\n-        \"@llvm-project//mlir:GPUToROCDLTransforms\",\n         \"@llvm-project//mlir:IR\",\n         \"@llvm-project//mlir:LLVMCommonConversion\",\n         \"@llvm-project//mlir:LLVMDialect\",\n         \"@llvm-project//mlir:MathDialect\",\n-        \"@llvm-project//mlir:MathToLLVM\",\n         \"@llvm-project//mlir:MathTransforms\",\n-        \"@llvm-project//mlir:MemRefToLLVM\",\n-        \"@llvm-project//mlir:NVVMDialect\",\n         \"@llvm-project//mlir:Pass\",\n         \"@llvm-project//mlir:ROCDLDialect\",\n         \"@llvm-project//mlir:SCFDialect\",\n-        \"@llvm-project//mlir:SCFToControlFlow\",\n         \"@llvm-project//mlir:SCFUtils\",\n         \"@llvm-project//mlir:Support\",\n         \"@llvm-project//mlir:TensorDialect\",\n         \"@llvm-project//mlir:TransformUtils\",\n-        \"@llvm-project//mlir:UBToLLVM\",\n         \"@llvm-project//mlir:VectorDialect\",\n-        \"@llvm-project//mlir:VectorToLLVM\",\n         \"@llvm-project//mlir:VectorTransforms\",\n         \"@llvm-project//mlir:VectorUtils\",\n         \"@local_tsl//tsl/platform:protobuf\","
        },
        {
            "sha": "d98dc0cd8e70551e11d4e85748b70def0216aea2",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/lower_to_llvm_cpu.cc",
            "status": "added",
            "additions": 103,
            "deletions": 0,
            "changes": 103,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.cc?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -0,0 +1,103 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#include <memory>\n+#include <utility>\n+\n+#include \"mlir/Conversion/ArithToLLVM/ArithToLLVM.h\"\n+#include \"mlir/Conversion/ComplexToLLVM/ComplexToLLVM.h\"\n+#include \"mlir/Conversion/ControlFlowToLLVM/ControlFlowToLLVM.h\"\n+#include \"mlir/Conversion/FuncToLLVM/ConvertFuncToLLVM.h\"\n+#include \"mlir/Conversion/LLVMCommon/ConversionTarget.h\"\n+#include \"mlir/Conversion/LLVMCommon/TypeConverter.h\"\n+#include \"mlir/Conversion/MathToLLVM/MathToLLVM.h\"\n+#include \"mlir/Conversion/MemRefToLLVM/MemRefToLLVM.h\"\n+#include \"mlir/Conversion/SCFToControlFlow/SCFToControlFlow.h\"\n+#include \"mlir/Conversion/UBToLLVM/UBToLLVM.h\"\n+#include \"mlir/Conversion/VectorToLLVM/ConvertVectorToLLVM.h\"\n+#include \"mlir/Dialect/Arith/IR/Arith.h\"\n+#include \"mlir/Dialect/Arith/Transforms/Passes.h\"\n+#include \"mlir/Dialect/Complex/IR/Complex.h\"\n+#include \"mlir/Dialect/Func/IR/FuncOps.h\"\n+#include \"mlir/Dialect/Math/IR/Math.h\"\n+#include \"mlir/Pass/Pass.h\"\n+#include \"mlir/Transforms/DialectConversion.h\"\n+\n+namespace xla {\n+namespace emitters {\n+namespace {\n+\n+#define GEN_PASS_DEF_LOWERTOLLVMCPUPASS\n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_cpu.h.inc\"\n+\n+class LowerToLLVMCPUPass\n+    : public impl::LowerToLLVMCPUPassBase<LowerToLLVMCPUPass> {\n+ public:\n+  LowerToLLVMCPUPass() : LowerToLLVMCPUPassBase() {}\n+\n+  void runOnOperation() override {\n+    // Populate type conversions.\n+    mlir::LowerToLLVMOptions llvm_opts(&getContext(),\n+                                       mlir::DataLayout(getOperation()));\n+    mlir::LLVMTypeConverter type_converter(getOperation().getContext(),\n+                                           llvm_opts);\n+    mlir::LLVMConversionTarget target(*getOperation().getContext());\n+\n+    // Populate patterns.\n+    mlir::RewritePatternSet patterns(&getContext());\n+    mlir::arith::populateArithExpandOpsPatterns(patterns);\n+    mlir::arith::populateArithToLLVMConversionPatterns(type_converter,\n+                                                       patterns);\n+    mlir::populateFuncToLLVMConversionPatterns(type_converter, patterns);\n+    mlir::populateFinalizeMemRefToLLVMConversionPatterns(type_converter,\n+                                                         patterns);\n+    mlir::ub::populateUBToLLVMConversionPatterns(type_converter, patterns);\n+    mlir::populateVectorToLLVMConversionPatterns(type_converter, patterns);\n+    mlir::cf::populateControlFlowToLLVMConversionPatterns(type_converter,\n+                                                          patterns);\n+    mlir::populateComplexToLLVMConversionPatterns(type_converter, patterns);\n+\n+    //  Set up target.\n+    target.addIllegalDialect<mlir::arith::ArithDialect, mlir::func::FuncDialect,\n+                             mlir::complex::ComplexDialect>();\n+    target.addLegalOp<mlir::ModuleOp>();\n+\n+    if (failed(applyPartialConversion(getOperation(), target,\n+                                      std::move(patterns)))) {\n+      signalPassFailure();\n+      return;\n+    }\n+\n+    // Clean up any leftover math ops.\n+    mlir::RewritePatternSet mathPatterns(&getContext());\n+    mlir::populateMathToLLVMConversionPatterns(type_converter, mathPatterns,\n+                                               /*approximateLog1p=*/false);\n+    target.addIllegalDialect<mlir::math::MathDialect>();\n+\n+    if (failed(applyFullConversion(getOperation(), target,\n+                                   std::move(mathPatterns)))) {\n+      signalPassFailure();\n+    }\n+  }\n+};\n+\n+}  // namespace\n+\n+std::unique_ptr<::mlir::Pass> CreateLowerToLLVMCPUPass() {\n+  return std::make_unique<LowerToLLVMCPUPass>();\n+}\n+\n+}  // namespace emitters\n+}  // namespace xla"
        },
        {
            "sha": "3fb1d73d3b2606e76994a7c3bac5f804e3f44a7d",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/lower_to_llvm_cpu.h",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.h?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -0,0 +1,36 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+#ifndef XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_CPU_H_\n+#define XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_CPU_H_\n+\n+#include <memory>\n+\n+#include \"mlir/Pass/Pass.h\"\n+\n+namespace xla {\n+namespace emitters {\n+\n+#define GEN_PASS_DECL\n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_cpu.h.inc\"\n+\n+std::unique_ptr<mlir::Pass> CreateLowerToLLVMCPUPass();\n+\n+#define GEN_PASS_REGISTRATION\n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_cpu.h.inc\"\n+\n+}  // namespace emitters\n+}  // namespace xla\n+\n+#endif  // XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_CPU_H_"
        },
        {
            "sha": "f937a75c75fd40aae9d537d5ae9c8d832f133da7",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/lower_to_llvm_cpu.td",
            "status": "added",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.td",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.td",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_cpu.td?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -0,0 +1,35 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#ifndef XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_CPU_TD_\n+#define XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_CPU_TD_\n+\n+include \"mlir/Pass/PassBase.td\"\n+\n+def LowerToLLVMCPUPass :\n+   Pass<\"xla-lower-to-llvm-cpu\", \"mlir::ModuleOp\"> {\n+  let summary = \"Lowers to LLVM (CPU Version).\";\n+\n+  let description = [{\n+    Lowers the rest to LLVM (CPU Version)\n+  }];\n+\n+  let dependentDialects = [\n+    \"mlir::func::FuncDialect\",\n+  ];\n+  let constructor = \"CreateLowerToLLVMCPUPass()\";\n+}\n+\n+#endif  // XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_CPU_TD_"
        },
        {
            "sha": "ab4de23a4ed646c7195310a12adf4e7abf8aa148",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/lower_to_llvm_gpu.cc",
            "status": "renamed",
            "additions": 50,
            "deletions": 54,
            "changes": 104,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.cc?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -1,4 +1,4 @@\n-/* Copyright 2024 The OpenXLA Authors.\n+/* Copyright 2025 The OpenXLA Authors.\n \n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n@@ -13,6 +13,8 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_gpu.h\"\n+\n #include <cstdint>\n #include <memory>\n #include <string>\n@@ -51,7 +53,6 @@ limitations under the License.\n #include \"mlir/Transforms/DialectConversion.h\"\n #include \"google/protobuf/text_format.h\"\n #include \"xla/codegen/device_spec.h\"\n-#include \"xla/codegen/emitters/transforms/passes.h\"\n #include \"xla/stream_executor/device_description.h\"\n #include \"xla/stream_executor/device_description.pb.h\"\n #include \"xla/tsl/platform/logging.h\"\n@@ -63,29 +64,27 @@ namespace {\n \n namespace se = ::stream_executor;\n \n-#define GEN_PASS_DEF_LOWERTOLLVMPASS\n-#include \"xla/codegen/emitters/transforms/passes.h.inc\"\n+#define GEN_PASS_DEF_LOWERTOLLVMGPUPASS\n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_gpu.h.inc\"\n \n-class LowerToLLVMPass : public impl::LowerToLLVMPassBase<LowerToLLVMPass> {\n+class LowerToLLVMGPUPass\n+    : public impl::LowerToLLVMGPUPassBase<LowerToLLVMGPUPass> {\n  public:\n-  explicit LowerToLLVMPass(const LowerToLLVMPassOptions& options)\n-      : LowerToLLVMPassBase(options) {}\n+  explicit LowerToLLVMGPUPass(const LowerToLLVMGPUPassOptions& options)\n+      : LowerToLLVMGPUPassBase(options) {}\n \n-  explicit LowerToLLVMPass(const se::DeviceDescription& device_description)\n+  explicit LowerToLLVMGPUPass(const se::DeviceDescription& device_description)\n       : device_spec_(device_description) {}\n \n   void runOnOperation() override {\n-    if (target_type_ == \"gpu\" && !gpu_device_info_.empty()) {\n+    if (gpu_device_info_.empty()) {\n       se::GpuDeviceInfoProto device_info;\n       CHECK(tsl::protobuf::TextFormat::ParseFromString(gpu_device_info_,\n                                                        &device_info));\n       absl::StatusOr<se::DeviceDescription> device_description =\n           se::DeviceDescription::FromProto(device_info);\n       CHECK_OK(device_description.status());\n       *device_spec_.mutable_type() = *device_description;\n-    } else if (target_type_ == \"cpu\") {\n-      CHECK(gpu_device_info_.empty());\n-      *device_spec_.mutable_type() = CpuDeviceSpec{};\n     }\n     // Populate type conversions.\n     mlir::LowerToLLVMOptions llvm_opts(&getContext(),\n@@ -99,39 +98,37 @@ class LowerToLLVMPass : public impl::LowerToLLVMPassBase<LowerToLLVMPass> {\n     mlir::arith::populateArithExpandOpsPatterns(patterns);\n     mlir::arith::populateArithToLLVMConversionPatterns(type_converter,\n                                                        patterns);\n-    if (device_spec_.IsGpu()) {\n-      if (device_spec_.IsAmdGpu()) {\n-        std::string chipset =\n-            device_spec_.gpu().rocm_compute_capability().gfx_version();\n-        llvm::FailureOr<mlir::amdgpu::Chipset> maybeChipset =\n-            mlir::amdgpu::Chipset::parse(chipset);\n-        if (failed(maybeChipset)) {\n-          mlir::emitError(mlir::UnknownLoc::get(&getContext()),\n-                          \"Invalid chipset name: \" + chipset);\n-          return signalPassFailure();\n-        }\n-        mlir::populateGpuToROCDLConversionPatterns(\n-            type_converter, patterns, mlir::gpu::amd::Runtime::Unknown,\n-            *maybeChipset);\n-        mlir::configureGpuToROCDLConversionLegality(target);\n-      } else if (device_spec_.IsIntelGpu()) {\n-        // Add sub-group-size attribute to functions.\n-        int32_t sub_group_size = device_spec_.gpu().threads_per_warp();\n-        if (auto module_op = mlir::dyn_cast<mlir::ModuleOp>(getOperation())) {\n-          module_op.walk([sub_group_size](mlir::func::FuncOp func) {\n-            if (!func.getBody().empty()) {\n-              mlir::OpBuilder b(func.getContext());\n-              auto sub_group_attr = b.getI32IntegerAttr(sub_group_size);\n-              func->setAttr(\"intel_reqd_sub_group_size\", sub_group_attr);\n-            }\n-          });\n-        }\n-        populateGpuToLLVMSPVConversionPatterns(type_converter, patterns);\n-        populateGpuMemorySpaceAttributeConversions(type_converter);\n-      } else {\n-        mlir::populateGpuToNVVMConversionPatterns(type_converter, patterns);\n-        mlir::configureGpuToNVVMConversionLegality(target);\n+    if (device_spec_.IsAmdGpu()) {\n+      std::string chipset =\n+          device_spec_.gpu().rocm_compute_capability().gfx_version();\n+      llvm::FailureOr<mlir::amdgpu::Chipset> maybeChipset =\n+          mlir::amdgpu::Chipset::parse(chipset);\n+      if (failed(maybeChipset)) {\n+        mlir::emitError(mlir::UnknownLoc::get(&getContext()),\n+                        \"Invalid chipset name: \" + chipset);\n+        return signalPassFailure();\n+      }\n+      mlir::populateGpuToROCDLConversionPatterns(\n+          type_converter, patterns, mlir::gpu::amd::Runtime::Unknown,\n+          *maybeChipset);\n+      mlir::configureGpuToROCDLConversionLegality(target);\n+    } else if (device_spec_.IsIntelGpu()) {\n+      // Add sub-group-size attribute to functions.\n+      int32_t sub_group_size = device_spec_.gpu().threads_per_warp();\n+      if (auto module_op = mlir::dyn_cast<mlir::ModuleOp>(getOperation())) {\n+        module_op.walk([sub_group_size](mlir::func::FuncOp func) {\n+          if (!func.getBody().empty()) {\n+            mlir::OpBuilder b(func.getContext());\n+            auto sub_group_attr = b.getI32IntegerAttr(sub_group_size);\n+            func->setAttr(\"intel_reqd_sub_group_size\", sub_group_attr);\n+          }\n+        });\n       }\n+      populateGpuToLLVMSPVConversionPatterns(type_converter, patterns);\n+      populateGpuMemorySpaceAttributeConversions(type_converter);\n+    } else {\n+      mlir::populateGpuToNVVMConversionPatterns(type_converter, patterns);\n+      mlir::configureGpuToNVVMConversionLegality(target);\n     }\n     mlir::populateFuncToLLVMConversionPatterns(type_converter, patterns);\n     mlir::populateFinalizeMemRefToLLVMConversionPatterns(type_converter,\n@@ -142,7 +139,7 @@ class LowerToLLVMPass : public impl::LowerToLLVMPassBase<LowerToLLVMPass> {\n                                                           patterns);\n     mlir::populateComplexToLLVMConversionPatterns(type_converter, patterns);\n \n-    //  Setup target.\n+    // Set up target.\n     target.addIllegalDialect<mlir::arith::ArithDialect, mlir::func::FuncDialect,\n                              mlir::complex::ComplexDialect>();\n     target.addLegalOp<mlir::ModuleOp>();\n@@ -153,10 +150,10 @@ class LowerToLLVMPass : public impl::LowerToLLVMPassBase<LowerToLLVMPass> {\n       return;\n     }\n \n-    // Cleanup any leftover math ops not handled NVVM or ROCDL lowering\n+    // Clean up any leftover math ops not handled NVVM or ROCDL lowering.\n     mlir::RewritePatternSet mathPatterns(&getContext());\n     mlir::populateMathToLLVMConversionPatterns(type_converter, mathPatterns,\n-                                               /* approximateLog1p */ false);\n+                                               /*approximateLog1p=*/false);\n     target.addIllegalDialect<mlir::math::MathDialect>();\n \n     if (failed(applyFullConversion(getOperation(), target,\n@@ -171,17 +168,16 @@ class LowerToLLVMPass : public impl::LowerToLLVMPassBase<LowerToLLVMPass> {\n \n }  // namespace\n \n-std::unique_ptr<::mlir::Pass> CreateLowerToLLVMPass(\n-    const std::string& target_type, const std::string& gpu_device_info) {\n-  LowerToLLVMPassOptions options;\n+std::unique_ptr<::mlir::Pass> CreateLowerToLLVMGPUPass(\n+    const std::string& gpu_device_info) {\n+  LowerToLLVMGPUPassOptions options;\n   options.gpu_device_info_ = gpu_device_info;\n-  options.target_type_ = target_type;\n-  return std::make_unique<LowerToLLVMPass>(options);\n+  return std::make_unique<LowerToLLVMGPUPass>(options);\n }\n \n-std::unique_ptr<::mlir::Pass> CreateLowerToLLVMPass(\n+std::unique_ptr<::mlir::Pass> CreateLowerToLLVMGPUPass(\n     const se::DeviceDescription& device_description) {\n-  return std::make_unique<LowerToLLVMPass>(device_description);\n+  return std::make_unique<LowerToLLVMGPUPass>(device_description);\n }\n \n }  // namespace emitters",
            "previous_filename": "third_party/xla/xla/codegen/emitters/transforms/lower_to_llvm.cc"
        },
        {
            "sha": "35bd6a0d33766be906a52167258ad829b4de0b1c",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/lower_to_llvm_gpu.h",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.h?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -0,0 +1,44 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+#ifndef XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_GPU_H_\n+#define XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_GPU_H_\n+\n+#include <cstdint>\n+#include <memory>\n+#include <string>\n+\n+#include \"mlir/Pass/Pass.h\"\n+\n+namespace stream_executor {\n+class DeviceDescription;\n+}  // namespace stream_executor\n+\n+namespace xla {\n+namespace emitters {\n+\n+#define GEN_PASS_DECL\n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_gpu.h.inc\"\n+\n+std::unique_ptr<mlir::Pass> CreateLowerToLLVMGPUPass(\n+    const std::string& gpu_device_info = \"\");\n+std::unique_ptr<mlir::Pass> CreateLowerToLLVMGPUPass(\n+    const stream_executor::DeviceDescription& device_description);\n+#define GEN_PASS_REGISTRATION\n+#include \"xla/codegen/emitters/transforms/lower_to_llvm_gpu.h.inc\"\n+\n+}  // namespace emitters\n+}  // namespace xla\n+\n+#endif  // XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_GPU_H_"
        },
        {
            "sha": "765dab04a6fb79d75353033bd21eea9a4e034c09",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/lower_to_llvm_gpu.td",
            "status": "added",
            "additions": 42,
            "deletions": 0,
            "changes": 42,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.td",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.td",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Flower_to_llvm_gpu.td?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -0,0 +1,42 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#ifndef XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_GPU_TD_\n+#define XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_GPU_TD_\n+\n+include \"mlir/Pass/PassBase.td\"\n+\n+def LowerToLLVMGPUPass :\n+   Pass<\"xla-lower-to-llvm-gpu\", \"mlir::ModuleOp\"> {\n+  let summary = \"Lowers to LLVM (GPU Version).\";\n+\n+  let description = [{\n+    Lowers the rest to LLVM (GPU Version)\n+  }];\n+\n+  let dependentDialects = [\n+    \"mlir::func::FuncDialect\",\n+    \"mlir::LLVM::LLVMDialect\",\n+    \"mlir::NVVM::NVVMDialect\",\n+  ];\n+\n+  let options = [\n+    Option<\"gpu_device_info_\", \"gpu_device_info\", \"std::string\", /*default=*/\"\",\n+           \"Serialized stream_executor::GPUDeviceInfo proto.\">,\n+  ];\n+  let constructor = \"CreateLowerToLLVMGPUPass()\";\n+}\n+\n+#endif  // XLA_CODEGEN_EMITTERS_TRANSFORMS_LOWER_TO_LLVM_GPU_TD_"
        },
        {
            "sha": "d1bb595ab029a7034d5173b9b187143248ed696d",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/passes.h",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fpasses.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fpasses.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fpasses.h?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -42,11 +42,6 @@ std::unique_ptr<mlir::Pass> CreateLowerTensorsPass(\n     const std::string& gpu_device_info = \"\");\n std::unique_ptr<mlir::Pass> CreateLowerTensorsPass(\n     const stream_executor::DeviceDescription& device_description);\n-std::unique_ptr<mlir::Pass> CreateLowerToLLVMPass(\n-    const std::string& target_type = \"gpu\",\n-    const std::string& gpu_device_info = \"\");\n-std::unique_ptr<mlir::Pass> CreateLowerToLLVMPass(\n-    const stream_executor::DeviceDescription& device_description);\n std::unique_ptr<mlir::Pass> CreateLowerXlaToScfPass(int64_t warp_size = 32);\n std::unique_ptr<mlir::Pass> CreateLowerXlaLoopsToScfPass();\n std::unique_ptr<mlir::Pass> CreateMergePointersToSameSlicePass();"
        },
        {
            "sha": "c82a0d26ea39a2ff31199255b61af89462097000",
            "filename": "third_party/xla/xla/codegen/emitters/transforms/passes.td",
            "status": "modified",
            "additions": 0,
            "deletions": 23,
            "changes": 23,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fpasses.td",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/1f1065a43ef68726ae91f774fdebfc816d708b4b/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fpasses.td",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Femitters%2Ftransforms%2Fpasses.td?ref=1f1065a43ef68726ae91f774fdebfc816d708b4b",
            "patch": "@@ -129,29 +129,6 @@ def LowerTensorsPass : Pass<\"xla-lower-tensors\", \"mlir::ModuleOp\"> {\n   let constructor = \"CreateLowerTensorsPass()\";\n }\n \n-def LowerToLLVMPass :\n-   Pass<\"xla-lower-to-llvm\", \"mlir::ModuleOp\"> {\n-  let summary = \"Lowers to LLVM.\";\n-\n-  let description = [{\n-    Lowers the rest to LLVM\n-  }];\n-\n-  let dependentDialects = [\n-    \"mlir::func::FuncDialect\",\n-    \"mlir::LLVM::LLVMDialect\",\n-    \"mlir::NVVM::NVVMDialect\",\n-  ];\n-\n-  let options = [\n-    Option<\"gpu_device_info_\", \"gpu_device_info\", \"std::string\", /*default=*/\"\",\n-           \"Serialized stream_executor::GPUDeviceInfo proto.\">,\n-    Option<\"target_type_\", \"target_type\", \"std::string\", /*default=*/\"\\\"gpu\\\"\",\n-           \"Whether the pass targets a 'cpu' or 'gpu'. If 'cpu', gpu_device_info_ must be empty.\">,\n-  ];\n-  let constructor = \"CreateLowerToLLVMPass()\";\n-}\n-\n def LowerXlaToScfPass :\n    Pass<\"xla-lower-xla-to-scf\", \"mlir::func::FuncOp\"> {\n   let summary = \"Lowers xla to SCF.\";"
        }
    ],
    "stats": {
        "total": 513,
        "additions": 411,
        "deletions": 102
    }
}