{
    "author": "hhb",
    "message": "Rename methods in `xla::PjRtTopologyDescription`.\n\nThis change renames `IdForLogicalDeviceOfDefaultType` to `LogicalDeviceOfDefaultTypeIdForChipCoordAndCoreIndex` and `LogicalDeviceOfDefaultTypeForId` to `ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType` to better reflect their input and output.\n\nPiperOrigin-RevId: 834500023",
    "sha": "ce60aa6775b9af112e87cbafbcecd716a83d4bdc",
    "files": [
        {
            "sha": "f725d4359fe496660471c8836f6845e0f038d958",
            "filename": "third_party/xla/xla/pjrt/gpu/se_gpu_topology_description.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description.cc?ref=ce60aa6775b9af112e87cbafbcecd716a83d4bdc",
            "patch": "@@ -150,8 +150,9 @@ absl::StatusOr<std::string> StreamExecutorGpuTopologyDescription::Serialize()\n }\n \n absl::StatusOr<std::pair<PjRtDeviceDimensions, int32_t>>\n-StreamExecutorGpuTopologyDescription::LogicalDeviceOfDefaultTypeForId(\n-    xla::PjRtGlobalDeviceId device_id) const {\n+StreamExecutorGpuTopologyDescription::\n+    ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+        xla::PjRtGlobalDeviceId device_id) const {\n   if (device_id.value() < 0 ||\n       device_id.value() >= gpu_topology_->number_of_devices()) {\n     return absl::InvalidArgumentError("
        },
        {
            "sha": "50dc6f291c4fc394e72f6ae7dd5a23c744a2fb6c",
            "filename": "third_party/xla/xla/pjrt/gpu/se_gpu_topology_description.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description.h?ref=ce60aa6775b9af112e87cbafbcecd716a83d4bdc",
            "patch": "@@ -100,7 +100,7 @@ class StreamExecutorGpuTopologyDescription : public PjRtTopologyDescription {\n   }\n \n   absl::StatusOr<std::pair<PjRtDeviceDimensions, int32_t>>\n-  LogicalDeviceOfDefaultTypeForId(\n+  ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n       xla::PjRtGlobalDeviceId device_id) const override;\n \n   absl::StatusOr<std::string> Serialize() const override;"
        },
        {
            "sha": "3d73431e71b2d55f0549e39617fcb31a31611507",
            "filename": "third_party/xla/xla/pjrt/gpu/se_gpu_topology_description_test.cc",
            "status": "modified",
            "additions": 28,
            "deletions": 21,
            "changes": 49,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_topology_description_test.cc?ref=ce60aa6775b9af112e87cbafbcecd716a83d4bdc",
            "patch": "@@ -111,9 +111,10 @@ TEST(PjRtTopologyUtilsGPUTest, GetDeviceCoords) {\n   StreamExecutorGpuTopologyDescription topology_desc(\n       xla::CudaId(), xla::CudaName(), gpu_topology);\n \n-  TF_ASSERT_OK_AND_ASSIGN(auto device_core,\n-                          topology_desc.LogicalDeviceOfDefaultTypeForId(\n-                              xla::PjRtGlobalDeviceId(1)));\n+  TF_ASSERT_OK_AND_ASSIGN(\n+      auto device_core,\n+      topology_desc.ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+          xla::PjRtGlobalDeviceId(1)));\n   auto [device_coords, core_id] = std::move(device_core);\n   ASSERT_EQ(device_coords, (PjRtDeviceDimensions{0, 0, 1}));\n   ASSERT_EQ(core_id, 0);\n@@ -127,23 +128,26 @@ TEST(PjRtTopologyUtilsGPUTest, GetDeviceCoordsSingleHostScopedPartition) {\n   StreamExecutorGpuTopologyDescription topology_desc(\n       xla::CudaId(), xla::CudaName(), gpu_topology);\n \n-  TF_ASSERT_OK_AND_ASSIGN(auto device_core1,\n-                          topology_desc.LogicalDeviceOfDefaultTypeForId(\n-                              xla::PjRtGlobalDeviceId(1)));\n+  TF_ASSERT_OK_AND_ASSIGN(\n+      auto device_core1,\n+      topology_desc.ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+          xla::PjRtGlobalDeviceId(1)));\n   auto [device_coords1, core_id1] = std::move(device_core1);\n   ASSERT_EQ(device_coords1, (PjRtDeviceDimensions{0, 0, 1}));\n   ASSERT_EQ(core_id1, 0);\n \n-  TF_ASSERT_OK_AND_ASSIGN(auto device_core2,\n-                          topology_desc.LogicalDeviceOfDefaultTypeForId(\n-                              xla::PjRtGlobalDeviceId(6)));\n+  TF_ASSERT_OK_AND_ASSIGN(\n+      auto device_core2,\n+      topology_desc.ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+          xla::PjRtGlobalDeviceId(6)));\n   auto [device_coords2, core_id2] = std::move(device_core2);\n   ASSERT_EQ(device_coords2, (PjRtDeviceDimensions{1, 0, 2}));\n   ASSERT_EQ(core_id2, 0);\n \n-  TF_ASSERT_OK_AND_ASSIGN(auto device_core3,\n-                          topology_desc.LogicalDeviceOfDefaultTypeForId(\n-                              xla::PjRtGlobalDeviceId(10)));\n+  TF_ASSERT_OK_AND_ASSIGN(\n+      auto device_core3,\n+      topology_desc.ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+          xla::PjRtGlobalDeviceId(10)));\n   auto [device_coords3, core_id3] = std::move(device_core3);\n   ASSERT_EQ(device_coords3, (PjRtDeviceDimensions{2, 0, 2}));\n   ASSERT_EQ(core_id3, 0);\n@@ -157,23 +161,26 @@ TEST(PjRtTopologyUtilsGPUTest, GetDeviceCoordsMultipleHostScopedPartition) {\n   StreamExecutorGpuTopologyDescription topology_desc(\n       xla::CudaId(), xla::CudaName(), gpu_topology);\n \n-  TF_ASSERT_OK_AND_ASSIGN(auto device_core1,\n-                          topology_desc.LogicalDeviceOfDefaultTypeForId(\n-                              xla::PjRtGlobalDeviceId(1)));\n+  TF_ASSERT_OK_AND_ASSIGN(\n+      auto device_core1,\n+      topology_desc.ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+          xla::PjRtGlobalDeviceId(1)));\n   auto [device_coords1, core_id1] = std::move(device_core1);\n   ASSERT_EQ(device_coords1, (PjRtDeviceDimensions{0, 0, 1}));\n   ASSERT_EQ(core_id1, 0);\n \n-  TF_ASSERT_OK_AND_ASSIGN(auto device_core2,\n-                          topology_desc.LogicalDeviceOfDefaultTypeForId(\n-                              xla::PjRtGlobalDeviceId(6)));\n+  TF_ASSERT_OK_AND_ASSIGN(\n+      auto device_core2,\n+      topology_desc.ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+          xla::PjRtGlobalDeviceId(6)));\n   auto [device_coords2, core_id2] = std::move(device_core2);\n   ASSERT_EQ(device_coords2, (PjRtDeviceDimensions{0, 1, 2}));\n   ASSERT_EQ(core_id2, 0);\n \n-  TF_ASSERT_OK_AND_ASSIGN(auto device_core3,\n-                          topology_desc.LogicalDeviceOfDefaultTypeForId(\n-                              xla::PjRtGlobalDeviceId(10)));\n+  TF_ASSERT_OK_AND_ASSIGN(\n+      auto device_core3,\n+      topology_desc.ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+          xla::PjRtGlobalDeviceId(10)));\n   auto [device_coords3, core_id3] = std::move(device_core3);\n   ASSERT_EQ(device_coords3, (PjRtDeviceDimensions{0, 2, 2}));\n   ASSERT_EQ(core_id3, 0);"
        },
        {
            "sha": "84b8ac8bf503359c6e8ee9f0488221ab7f5ef82c",
            "filename": "third_party/xla/xla/pjrt/pjrt_compiler.h",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_compiler.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_compiler.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fpjrt_compiler.h?ref=ce60aa6775b9af112e87cbafbcecd716a83d4bdc",
            "patch": "@@ -222,16 +222,18 @@ class PjRtTopologyDescription {\n   // Returns a unique integer ID for the logical device of the default type on\n   // the chip at the given coordinates and with the given core index.\n   virtual absl::StatusOr<xla::PjRtGlobalDeviceId>\n-  IdForLogicalDeviceOfDefaultType(const PjRtDeviceDimensions& chip,\n-                                  int core_index) const {\n+  LogicalDeviceOfDefaultTypeIdFromChipCoordAndCoreIndex(\n+      const PjRtDeviceDimensions& chip, int core_index) const {\n     return absl::UnimplementedError(\n-        \"IdForLogicalDeviceOfDefaultType is unsupported.\");\n+        \"LogicalDeviceOfDefaultTypeIdFromChipCoordAndCoreIndex is \"\n+        \"unsupported.\");\n   }\n \n   // Returns the chip coordinates and core index of the logical device of the\n   // default type for the given unique device ID.\n   virtual absl::StatusOr<std::pair<PjRtDeviceDimensions, int32_t>>\n-  LogicalDeviceOfDefaultTypeForId(xla::PjRtGlobalDeviceId device_id) const {\n+  ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+      xla::PjRtGlobalDeviceId device_id) const {\n     return absl::UnimplementedError(\n         \"LogicalDeviceCoordsOfDefaultTypeForId is unsupported.\");\n   }"
        },
        {
            "sha": "7a6d29c9a043701f06760b6b990ab01bba70b80f",
            "filename": "third_party/xla/xla/pjrt/plugin/xla_cpu/cpu_topology_description.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description.cc?ref=ce60aa6775b9af112e87cbafbcecd716a83d4bdc",
            "patch": "@@ -55,7 +55,7 @@ absl::StatusOr<std::string> CpuTopologyDescription::Serialize() const {\n }\n \n absl::StatusOr<std::pair<PjRtDeviceDimensions, int32_t>>\n-CpuTopologyDescription::LogicalDeviceOfDefaultTypeForId(\n+CpuTopologyDescription::ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n     xla::PjRtGlobalDeviceId device_id) const {\n   return std::make_pair(PjRtDeviceDimensions{0, 0, device_id.value()}, 0);\n }"
        },
        {
            "sha": "2f2a4a9213029fae3582b12833c31c4ca37e0f0d",
            "filename": "third_party/xla/xla/pjrt/plugin/xla_cpu/cpu_topology_description.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description.h?ref=ce60aa6775b9af112e87cbafbcecd716a83d4bdc",
            "patch": "@@ -96,7 +96,7 @@ class CpuTopologyDescription : public PjRtTopologyDescription {\n   absl::StatusOr<std::string> Serialize() const override;\n \n   absl::StatusOr<std::pair<PjRtDeviceDimensions, int32_t>>\n-  LogicalDeviceOfDefaultTypeForId(\n+  ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n       xla::PjRtGlobalDeviceId device_id) const override;\n \n   // Returns vendor specific attributes about the topology."
        },
        {
            "sha": "bba46ec74d94d4a7671269b1b78b9b539f8f5cfe",
            "filename": "third_party/xla/xla/pjrt/plugin/xla_cpu/cpu_topology_description_test.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ce60aa6775b9af112e87cbafbcecd716a83d4bdc/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Fxla_cpu%2Fcpu_topology_description_test.cc?ref=ce60aa6775b9af112e87cbafbcecd716a83d4bdc",
            "patch": "@@ -103,14 +103,16 @@ TEST(CpuTopologyDescriptionTest, FromProto) {\n               ElementsAre(\"attrA\", \"attrB\"));\n }\n \n-TEST(CpuTopologyDescriptionTest, LogicalDeviceOfDefaultTypeForId) {\n+TEST(CpuTopologyDescriptionTest,\n+     ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType) {\n   std::vector<CpuTopology::CpuDevice> cpu_devices = {{0, 0}, {0, 1}};\n   std::vector<std::string> machine_attributes = {\"attr1\", \"attr2\"};\n   CpuTopologyDescription topology(xla::CpuId(), \"cpu\", \"1.0\", cpu_devices,\n                                   machine_attributes);\n   TF_ASSERT_OK_AND_ASSIGN(\n       auto device_core,\n-      topology.LogicalDeviceOfDefaultTypeForId(xla::PjRtGlobalDeviceId(1)));\n+      topology.ChipCoordAndCoreIndexForLogicalDeviceOfDefaultType(\n+          xla::PjRtGlobalDeviceId(1)));\n   auto [device_coords, core_id] = std::move(device_core);\n   ASSERT_EQ(device_coords, (PjRtDeviceDimensions{0, 0, 1}));\n   ASSERT_EQ(core_id, 0);"
        }
    ],
    "stats": {
        "total": 76,
        "additions": 44,
        "deletions": 32
    }
}