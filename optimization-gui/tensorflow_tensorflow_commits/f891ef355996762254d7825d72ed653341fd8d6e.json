{
    "author": "terryysun",
    "message": "PR #34868: [GPU] Update fabric detection failure warning message\n\nImported from GitHub PR https://github.com/openxla/xla/pull/34868\n\nüìù Summary of Changes\nUpdated fabric detection failure warning message to make it more clear and actionable, and only keep it as a VLOG.\n\nüéØ Justification\nFabric detection warning message confuses non-MNNVL users. See https://github.com/jax-ml/jax/issues/33466.\n\nüöÄ Kind of Contribution\n‚ôªÔ∏è Cleanup\n\nüìä Benchmark (for Performance Improvements)\nN/A.\n\nüß™ Unit Tests:\nN/A.\n\nüß™ Execution Tests:\nN/A.\n\nCopybara import of the project:\n\n--\na9546a2da11fb1e4d72a860ea1fbe80820191985 by Terry Sun <tesun@nvidia.com>:\n\nupdate warning message\n\n--\n9e7531844f3a722e586f6665363bbd1c2aa07742 by Terry Sun <tesun@nvidia.com>:\n\nonly throw warning for Blackwell+\n\n--\n01c6a9c29a9b8d60b3fb5ca24ed3ee7bc8c81657 by Terry Sun <tesun@nvidia.com>:\n\nonly keep vlog\n\nMerging this change closes #34868\n\nPiperOrigin-RevId: 842650532",
    "sha": "f891ef355996762254d7825d72ed653341fd8d6e",
    "files": [
        {
            "sha": "b2e7027ce1a56748c4f3f4360a0e5d630a4e6fcc",
            "filename": "third_party/xla/xla/stream_executor/cuda/cuda_executor.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f891ef355996762254d7825d72ed653341fd8d6e/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_executor.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f891ef355996762254d7825d72ed653341fd8d6e/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_executor.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_executor.cc?ref=f891ef355996762254d7825d72ed653341fd8d6e",
            "patch": "@@ -783,8 +783,9 @@ absl::StatusOr<FabricInfo> GetDeviceFabricInfo(nvmlDevice_t device) {\n \n   if (fabricInfo.state == NVML_GPU_FABRIC_STATE_NOT_SUPPORTED) {\n     std::string error_message =\n-        \"NVML doesn't support extracting fabric info or NVLink is not used by \"\n-        \"the device.\";\n+        \"[Ignore this message unless multi-node NVLink is used] \"\n+        \"CUDA driver version is too low for extracting fabric info (550+ \"\n+        \"required), or multi-node NVLink is not available.\";\n     VLOG(2) << error_message;\n     return absl::InternalError(error_message);\n   }\n@@ -1836,11 +1837,6 @@ CudaExecutor::CreateDeviceDescription(int device_ordinal) {\n     if (fabric_info.ok()) {\n       info.cluster_uuid = fabric_info->cluster_uuid;\n       info.clique_id = fabric_info->clique_id;\n-    } else {\n-      if (cc.IsAtLeastHopper() && p2p_link_count.ok() && *p2p_link_count) {\n-        LOG(WARNING) << \"GPU interconnect information not available: \"\n-                     << fabric_info.status();\n-      }\n     }\n     desc.set_device_interconnect_info(info);\n   }"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 3,
        "deletions": 7
    }
}