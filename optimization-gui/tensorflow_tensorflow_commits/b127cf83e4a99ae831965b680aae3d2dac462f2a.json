{
    "author": "penpornk",
    "message": "[xla:cpu:onednn] Internal changes only\n\n(Additional option to disable oneDNN in Eigen contraction kernel.)\n\nPiperOrigin-RevId: 816289243",
    "sha": "b127cf83e4a99ae831965b680aae3d2dac462f2a",
    "files": [
        {
            "sha": "52eda9768bdc0a55119d1c0a0a53f6704520addf",
            "filename": "third_party/xla/xla/tsl/framework/contraction/BUILD",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b127cf83e4a99ae831965b680aae3d2dac462f2a/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcontraction%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b127cf83e4a99ae831965b680aae3d2dac462f2a/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcontraction%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcontraction%2FBUILD?ref=b127cf83e4a99ae831965b680aae3d2dac462f2a",
            "patch": "@@ -1,4 +1,5 @@\n load(\"@bazel_skylib//:bzl_library.bzl\", \"bzl_library\")\n+load(\"@bazel_skylib//lib:selects.bzl\", \"selects\")\n load(\"@bazel_skylib//rules:common_settings.bzl\", \"bool_flag\")\n load(\"//xla/tsl:tsl.default.bzl\", \"get_compatible_with_portable\")\n load(\n@@ -50,10 +51,19 @@ bool_flag(\n )\n \n config_setting(\n-    name = \"disable_onednn_contraction_kernel_config\",\n+    name = \"disable_onednn_contraction_kernel_flag_set\",\n     flag_values = {\":disable_onednn_contraction_kernel\": \"True\"},\n )\n \n+selects.config_setting_group(\n+    name = \"disable_onednn_contraction_kernel_config\",\n+    match_any = [\n+        \":disable_onednn_contraction_kernel_flag_set\",\n+        # copybara:uncomment \"//xla/tsl/onednn:no_onednn\",\n+    ],\n+    visibility = [\"//visibility:public\"],\n+)\n+\n # Depending on a build configuration this target provides custom kernel for Eigen\n # tensor contractions (small matrix multiplication kernel used to multiple together\n # blocks of the original tensors)."
        }
    ],
    "stats": {
        "total": 12,
        "additions": 11,
        "deletions": 1
    }
}