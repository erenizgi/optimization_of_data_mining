{
    "author": "meteorcloudy",
    "message": "Use `common` instead of `build` in `.bazelrc` file.\n\nThis change makes most Bazel options apply to all commands (e.g., `build`, `test`, `query`, `mod`) rather than just the `build` command, which prevents external repo being refetched accidentally when switching between commands (e.g `build` vs `query`).\n\nPiperOrigin-RevId: 812842964",
    "sha": "2a5f830ee84d46261aea443163c15dc7119038fe",
    "files": [
        {
            "sha": "843c0aac12b80effcbc97c1e606bc3479cafb5f0",
            "filename": ".bazelrc",
            "status": "modified",
            "additions": 439,
            "deletions": 439,
            "changes": 878,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2a5f830ee84d46261aea443163c15dc7119038fe/.bazelrc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2a5f830ee84d46261aea443163c15dc7119038fe/.bazelrc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/.bazelrc?ref=2a5f830ee84d46261aea443163c15dc7119038fe",
            "patch": "@@ -75,45 +75,45 @@\n # The generated version suffix is used in\n # third_party/tensorflow/core/public/release_version.h and\n # third_party/tensorflow/tools/pip_package/setup.oss.py.tpl\n-build --repo_env=ML_WHEEL_TYPE=\"snapshot\"\n-build --repo_env=ML_WHEEL_BUILD_DATE=\"\"\n-build --repo_env=ML_WHEEL_VERSION_SUFFIX=\"\"\n+common --repo_env=ML_WHEEL_TYPE=\"snapshot\"\n+common --repo_env=ML_WHEEL_BUILD_DATE=\"\"\n+common --repo_env=ML_WHEEL_VERSION_SUFFIX=\"\"\n \n # For projects which use TensorFlow as part of a Bazel build process, putting\n # nothing in a bazelrc will default to a monolithic build. The following line\n # opts in to modular op registration support by default.\n-build --define framework_shared_object=true\n-build --define tsl_protobuf_header_only=true\n+common --define framework_shared_object=true\n+common --define tsl_protobuf_header_only=true\n \n-build --define=allow_oversize_protos=true\n+common --define=allow_oversize_protos=true\n \n-build --spawn_strategy=standalone\n-build -c opt\n+common --spawn_strategy=standalone\n+common -c opt\n \n-build --repo_env=USE_PYWRAP_RULES=True\n-build --copt=-DGRPC_BAZEL_BUILD\n-build --host_copt=-DGRPC_BAZEL_BUILD\n-build --action_env=GRPC_BAZEL_RUNTIME=1\n-build --repo_env=PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=upb\n-build --action_env=PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=upb\n+common --repo_env=USE_PYWRAP_RULES=True\n+common --copt=-DGRPC_BAZEL_BUILD\n+common --host_copt=-DGRPC_BAZEL_BUILD\n+common --action_env=GRPC_BAZEL_RUNTIME=1\n+common --repo_env=PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=upb\n+common --action_env=PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=upb\n # Some targets have the same py source file, but use different\n # configurations via `requires-` tags. This results in an action\n # conflict when precompiling. Disable to avoid that problem.\n # See https://github.com/bazel-contrib/rules_python/issues/2445\n-build --@rules_python//python/config_settings:precompile=force_disabled\n+common --@rules_python//python/config_settings:precompile=force_disabled\n \n # Do not do this. If enabled protobuf's core internal target \n # @com_google_protobuf//python:protobuf_python will start depending on a bunch\n # of cc_binary shared libraries artifacts, which will mess with how we link \n # protobuf dependencies ourselves. By default this value is false, but some \n # projects enable it, which we don't want here.\n-# build --define=use_fast_cpp_protos=true\n+# common --define=use_fast_cpp_protos=true\n \n # Make Bazel print out all options from rc files.\n common --announce_rc\n \n # TODO(mihaimaruseac): Document this option or remove if no longer needed\n-build --define=grpc_no_ares=true\n+common --define=grpc_no_ares=true\n \n # See https://github.com/bazelbuild/bazel/issues/7362 for information on what\n # --incompatible_remove_legacy_whole_archive flag does.\n@@ -127,25 +127,25 @@ build --define=grpc_no_ares=true\n #\n # TODO: Remove the following two lines once TF doesn't depend on Bazel wrapping\n # all library archives in -whole_archive -no_whole_archive.\n-build --noincompatible_remove_legacy_whole_archive\n-build --features=-force_no_whole_archive\n-build --host_features=-force_no_whole_archive\n+common --noincompatible_remove_legacy_whole_archive\n+common --features=-force_no_whole_archive\n+common --host_features=-force_no_whole_archive\n \n # TODO(mihaimaruseac): Document this option or remove if no longer needed\n-build --enable_platform_specific_config\n+common --enable_platform_specific_config\n \n # Enable XLA support by default.\n-build --define=with_xla_support=true\n+common --define=with_xla_support=true\n \n # TODO(mihaimaruseac): Document this option or remove if no longer needed\n-build --config=short_logs\n+common --config=short_logs\n \n # TODO(mihaimaruseac): Document this option or remove if no longer needed\n-build --config=v2\n+common --config=v2\n \n # Precompiling results in some action conflicts. Disable it for now until\n # the problematic targets are fixed.\n-build --@rules_python//python/config_settings:precompile=force_disabled\n+common --@rules_python//python/config_settings:precompile=force_disabled\n \n # TF now has `cc_shared_library` targets, so it needs the experimental flag\n # TODO(rostam): Remove when `cc_shared_library` is enabled by default\n@@ -163,14 +163,14 @@ common --incompatible_enforce_config_setting_visibility\n # TODO: Enable Bzlmod\n common --noenable_bzlmod\n \n-build --incompatible_enable_cc_toolchain_resolution\n-build --repo_env USE_HERMETIC_CC_TOOLCHAIN=1\n+common --incompatible_enable_cc_toolchain_resolution\n+common --repo_env USE_HERMETIC_CC_TOOLCHAIN=1\n \n # TODO: Migrate for https://github.com/bazelbuild/bazel/issues/7260\n-build:clang_local --noincompatible_enable_cc_toolchain_resolution\n-build:clang_local --noincompatible_enable_android_toolchain_resolution\n-build:clang_local --@rules_ml_toolchain//common:enable_hermetic_cc=False\n-build:clang_local --repo_env USE_HERMETIC_CC_TOOLCHAIN=0\n+common:clang_local --noincompatible_enable_cc_toolchain_resolution\n+common:clang_local --noincompatible_enable_android_toolchain_resolution\n+common:clang_local --@rules_ml_toolchain//common:enable_hermetic_cc=False\n+common:clang_local --repo_env USE_HERMETIC_CC_TOOLCHAIN=0\n \n # Print a stacktrace when a test is killed\n test --test_env=\"GTEST_INSTALL_FAILURE_SIGNAL_HANDLER=1\"\n@@ -181,135 +181,135 @@ test --test_env=\"GTEST_INSTALL_FAILURE_SIGNAL_HANDLER=1\"\n # Android configs. Bazel needs to have --cpu and --fat_apk_cpu both set to the\n # target CPU to build transient dependencies correctly. See\n # https://docs.bazel.build/versions/master/user-manual.html#flag--fat_apk_cpu\n-build:android --config=clang_local\n-build:android --crosstool_top=//external:android/crosstool\n-build:android --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\n-build:android_arm --config=android\n-build:android_arm --cpu=armeabi-v7a\n-build:android_arm --fat_apk_cpu=armeabi-v7a\n-build:android_arm --platforms=@org_tensorflow//tensorflow/tools/toolchains/android:armeabi-v7a\n-build:android_arm64 --config=android\n-build:android_arm64 --cpu=arm64-v8a\n-build:android_arm64 --fat_apk_cpu=arm64-v8a\n-build:android_arm64 --platforms=@org_tensorflow//tensorflow/tools/toolchains/android:arm64-v8a\n-build:android_x86 --config=android\n-build:android_x86 --cpu=x86\n-build:android_x86 --fat_apk_cpu=x86\n-build:android_x86 --platforms=@org_tensorflow//tensorflow/tools/toolchains/android:x86\n-build:android_x86_64 --config=android\n-build:android_x86_64 --cpu=x86_64\n-build:android_x86_64 --fat_apk_cpu=x86_64\n-build:android_x86_64 --platforms=@org_tensorflow//tensorflow/tools/toolchains/android:x86_64\n+common:android --config=clang_local\n+common:android --crosstool_top=//external:android/crosstool\n+common:android --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\n+common:android_arm --config=android\n+common:android_arm --cpu=armeabi-v7a\n+common:android_arm --fat_apk_cpu=armeabi-v7a\n+common:android_arm --platforms=@org_tensorflow//tensorflow/tools/toolchains/android:armeabi-v7a\n+common:android_arm64 --config=android\n+common:android_arm64 --cpu=arm64-v8a\n+common:android_arm64 --fat_apk_cpu=arm64-v8a\n+common:android_arm64 --platforms=@org_tensorflow//tensorflow/tools/toolchains/android:arm64-v8a\n+common:android_x86 --config=android\n+common:android_x86 --cpu=x86\n+common:android_x86 --fat_apk_cpu=x86\n+common:android_x86 --platforms=@org_tensorflow//tensorflow/tools/toolchains/android:x86\n+common:android_x86_64 --config=android\n+common:android_x86_64 --cpu=x86_64\n+common:android_x86_64 --fat_apk_cpu=x86_64\n+common:android_x86_64 --platforms=@org_tensorflow//tensorflow/tools/toolchains/android:x86_64\n \n # Build everything statically for Android since all static libs are later\n # bundled together into a single .so for deployment.\n-build:android --dynamic_mode=off\n+common:android --dynamic_mode=off\n # TODO(belitskiy): Remove once on Clang 20.\n-build:android --define=xnn_enable_avxvnniint8=false\n+common:android --define=xnn_enable_avxvnniint8=false\n \n # Sets the default Apple platform to macOS.\n-build:macos --apple_platform_type=macos\n+common:macos --apple_platform_type=macos\n \n # gRPC on MacOS requires this #define\n-build:macos --copt=-DGRPC_BAZEL_BUILD\n+common:macos --copt=-DGRPC_BAZEL_BUILD\n \n # Avoid hitting command line argument limit\n-build:macos --features=archive_param_file\n+common:macos --features=archive_param_file\n \n # TODO: Fix deps to remove this flag, see https://github.com/bazelbuild/bazel/pull/16414\n-build:macos --linkopt=-Wl,-undefined,dynamic_lookup\n-build:macos --host_linkopt=-Wl,-undefined,dynamic_lookup\n+common:macos --linkopt=-Wl,-undefined,dynamic_lookup\n+common:macos --host_linkopt=-Wl,-undefined,dynamic_lookup\n \n # Use the old Apple toolchain for MacOS builds.\n-build:macos --config=clang_local\n-build:macos --config=apple-toolchain\n+common:macos --config=clang_local\n+common:macos --config=apple-toolchain\n \n # Use cc toolchains from apple_support for Apple builds (ios, macos, etc).\n # https://github.com/bazelbuild/apple_support/tree/master?tab=readme-ov-file#bazel-6-setup\n-build:apple-toolchain --apple_crosstool_top=@local_config_apple_cc//:toolchain\n-build:apple-toolchain --crosstool_top=@local_config_apple_cc//:toolchain\n-build:apple-toolchain --host_crosstool_top=@local_config_apple_cc//:toolchain\n+common:apple-toolchain --apple_crosstool_top=@local_config_apple_cc//:toolchain\n+common:apple-toolchain --crosstool_top=@local_config_apple_cc//:toolchain\n+common:apple-toolchain --host_crosstool_top=@local_config_apple_cc//:toolchain\n \n # Settings for MacOS on ARM CPUs.\n-build:macos_arm64 --cpu=darwin_arm64\n-build:macos_arm64 --macos_minimum_os=11.0\n-build:macos_arm64 --config=clang_local\n-build:macos_arm64 --platforms=@build_bazel_apple_support//configs/platforms:darwin_arm64\n+common:macos_arm64 --cpu=darwin_arm64\n+common:macos_arm64 --macos_minimum_os=11.0\n+common:macos_arm64 --config=clang_local\n+common:macos_arm64 --platforms=@build_bazel_apple_support//configs/platforms:darwin_arm64\n \n # iOS configs for each architecture and the fat binary builds.\n-build:ios --apple_platform_type=ios\n-build:ios --copt=-fembed-bitcode\n-build:ios --copt=-Wno-c++11-narrowing\n-build:ios --config=clang_local\n-build:ios --config=apple-toolchain\n-build:ios_armv7 --config=ios\n-build:ios_armv7 --cpu=ios_armv7\n-build:ios_armv7 --platforms=@org_tensorflow//tensorflow/tools/toolchains/ios:ios_armv7\n-build:ios_arm64 --config=ios\n-build:ios_arm64 --cpu=ios_arm64\n-build:ios_arm64 --platforms=@build_bazel_apple_support//configs/platforms:ios_arm64\n-build:ios_arm64e --config=ios\n-build:ios_arm64e --cpu=ios_arm64e\n-build:ios_arm64e --platforms=@build_bazel_apple_support//configs/platforms:ios_arm64e\n-build:ios_sim_arm64 --config=ios\n-build:ios_sim_arm64 --cpu=ios_sim_arm64\n-build:ios_sim_arm64 --platforms=@build_bazel_apple_support//configs/platforms:ios_sim_arm64\n-build:ios_x86_64 --config=ios\n-build:ios_x86_64 --cpu=ios_x86_64\n-build:ios_x86_64 --platforms=@build_bazel_apple_support//configs/platforms:ios_x86_64\n-build:ios_fat --config=ios\n-build:ios_fat --ios_multi_cpus=armv7,arm64,i386,x86_64\n+common:ios --apple_platform_type=ios\n+common:ios --copt=-fembed-bitcode\n+common:ios --copt=-Wno-c++11-narrowing\n+common:ios --config=clang_local\n+common:ios --config=apple-toolchain\n+common:ios_armv7 --config=ios\n+common:ios_armv7 --cpu=ios_armv7\n+common:ios_armv7 --platforms=@org_tensorflow//tensorflow/tools/toolchains/ios:ios_armv7\n+common:ios_arm64 --config=ios\n+common:ios_arm64 --cpu=ios_arm64\n+common:ios_arm64 --platforms=@build_bazel_apple_support//configs/platforms:ios_arm64\n+common:ios_arm64e --config=ios\n+common:ios_arm64e --cpu=ios_arm64e\n+common:ios_arm64e --platforms=@build_bazel_apple_support//configs/platforms:ios_arm64e\n+common:ios_sim_arm64 --config=ios\n+common:ios_sim_arm64 --cpu=ios_sim_arm64\n+common:ios_sim_arm64 --platforms=@build_bazel_apple_support//configs/platforms:ios_sim_arm64\n+common:ios_x86_64 --config=ios\n+common:ios_x86_64 --cpu=ios_x86_64\n+common:ios_x86_64 --platforms=@build_bazel_apple_support//configs/platforms:ios_x86_64\n+common:ios_fat --config=ios\n+common:ios_fat --ios_multi_cpus=armv7,arm64,i386,x86_64\n \n # Config to use a mostly-static build and disable modular op registration\n # support (this will revert to loading TensorFlow with RTLD_GLOBAL in Python).\n # By default, TensorFlow will build with a dependence on\n # //tensorflow:libtensorflow_framework.so.\n-build:monolithic --define framework_shared_object=false\n-build:monolithic --define tsl_protobuf_header_only=false\n-build:monolithic --experimental_link_static_libraries_once=false  # b/229868128\n+common:monolithic --define framework_shared_object=false\n+common:monolithic --define tsl_protobuf_header_only=false\n+common:monolithic --experimental_link_static_libraries_once=false  # b/229868128\n \n # Please note that MKL on MacOS is still not supported.\n # If you would like to use a local MKL instead of downloading, please set the\n # environment variable \"TF_MKL_ROOT\" every time before build.\n-build:mkl --define=build_with_mkl=true --define=enable_mkl=true\n-build:mkl --define=tensorflow_mkldnn_contraction_kernel=0\n-build:mkl --define=build_with_openmp=true\n-build:mkl -c opt\n+common:mkl --define=build_with_mkl=true --define=enable_mkl=true\n+common:mkl --define=tensorflow_mkldnn_contraction_kernel=0\n+common:mkl --define=build_with_openmp=true\n+common:mkl -c opt\n \n # config to build OneDNN backend with a user specified threadpool.\n-build:mkl_threadpool --define=build_with_mkl=true --define=enable_mkl=true\n-build:mkl_threadpool --define=tensorflow_mkldnn_contraction_kernel=0\n-build:mkl_threadpool --define=build_with_mkl_opensource=true\n-build:mkl_threadpool -c opt\n+common:mkl_threadpool --define=build_with_mkl=true --define=enable_mkl=true\n+common:mkl_threadpool --define=tensorflow_mkldnn_contraction_kernel=0\n+common:mkl_threadpool --define=build_with_mkl_opensource=true\n+common:mkl_threadpool -c opt\n \n # Config setting to build oneDNN with Compute Library for the Arm Architecture (ACL).\n # with Eigen threadpool support\n-build:mkl_aarch64_threadpool --define=build_with_mkl_aarch64=true\n-build:mkl_aarch64_threadpool -c opt\n+common:mkl_aarch64_threadpool --define=build_with_mkl_aarch64=true\n+common:mkl_aarch64_threadpool -c opt\n \n # This is an alias for the mkl_aarch64_threadpool build.\n-build:mkl_aarch64 --config=mkl_aarch64_threadpool\n+common:mkl_aarch64 --config=mkl_aarch64_threadpool\n \n # Default CUDA, CUDNN and NVSHMEM versions.\n-build:cuda_version --repo_env=HERMETIC_CUDA_VERSION=\"12.5.1\"\n-build:cuda_version --repo_env=HERMETIC_CUDNN_VERSION=\"9.3.0\"\n-build:cuda_version --repo_env=HERMETIC_NVSHMEM_VERSION=\"3.2.5\"\n+common:cuda_version --repo_env=HERMETIC_CUDA_VERSION=\"12.5.1\"\n+common:cuda_version --repo_env=HERMETIC_CUDNN_VERSION=\"9.3.0\"\n+common:cuda_version --repo_env=HERMETIC_NVSHMEM_VERSION=\"3.2.5\"\n \n # CUDA: This config refers to building CUDA op kernels with nvcc.\n-build:cuda --repo_env TF_NEED_CUDA=1\n-build:cuda --crosstool_top=@local_config_cuda//crosstool:toolchain\n-build:cuda --@local_config_cuda//:enable_cuda\n-build:cuda --config=cuda_version\n+common:cuda --repo_env TF_NEED_CUDA=1\n+common:cuda --crosstool_top=@local_config_cuda//crosstool:toolchain\n+common:cuda --@local_config_cuda//:enable_cuda\n+common:cuda --config=cuda_version\n # This flag is needed to include CUDA libraries.\n-build:cuda --@local_config_cuda//cuda:include_cuda_libs=true\n+common:cuda --@local_config_cuda//cuda:include_cuda_libs=true\n \n # This configuration is used for building the wheels.\n-build:cuda_wheel --@local_config_cuda//cuda:include_cuda_libs=false\n+common:cuda_wheel --@local_config_cuda//cuda:include_cuda_libs=false\n \n # CUDA: This config refers to building CUDA op kernels with clang.\n-build:cuda_clang --config=cuda\n-build:cuda_clang --@local_config_cuda//:cuda_compiler=clang\n-build:cuda_clang --copt=-Qunused-arguments\n+common:cuda_clang --config=cuda\n+common:cuda_clang --@local_config_cuda//:cuda_compiler=clang\n+common:cuda_clang --copt=-Qunused-arguments\n # Select supported compute capabilities (supported graphics cards).\n # This is the same as the official TensorFlow builds.\n # See https://developer.nvidia.com/cuda-gpus#compute\n@@ -318,30 +318,30 @@ build:cuda_clang --copt=-Qunused-arguments\n # release while SASS is only forward compatible inside the current\n # major release. Example: sm_80 kernels can run on sm_89 GPUs but\n # not on sm_90 GPUs. compute_80 kernels though can also run on sm_90 GPUs.\n-build:cuda_clang --repo_env=HERMETIC_CUDA_COMPUTE_CAPABILITIES=\"sm_60,sm_70,sm_80,sm_89,compute_90\"\n+common:cuda_clang --repo_env=HERMETIC_CUDA_COMPUTE_CAPABILITIES=\"sm_60,sm_70,sm_80,sm_89,compute_90\"\n # Permit newer CUDA versions than Clang is aware of\n-build:cuda_clang --copt=\"-Wno-unknown-cuda-version\"\n+common:cuda_clang --copt=\"-Wno-unknown-cuda-version\"\n # Set lld as the linker.\n-build:cuda_clang --host_linkopt=\"-fuse-ld=lld\"\n-build:cuda_clang --host_linkopt=\"-lm\"\n-build:cuda_clang --linkopt=\"-fuse-ld=lld\"\n-build:cuda_clang --linkopt=\"-lm\"\n+common:cuda_clang --host_linkopt=\"-fuse-ld=lld\"\n+common:cuda_clang --host_linkopt=\"-lm\"\n+common:cuda_clang --linkopt=\"-fuse-ld=lld\"\n+common:cuda_clang --linkopt=\"-lm\"\n \n # Set up compilation CUDA version and paths and use the CUDA Clang toolchain.\n-build:cuda_clang_official --config=cuda_clang\n-build:cuda_clang_official --config=cuda_version\n-build:cuda_clang_official --action_env=CLANG_CUDA_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n-build:cuda_clang_official --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n+common:cuda_clang_official --config=cuda_clang\n+common:cuda_clang_official --config=cuda_version\n+common:cuda_clang_official --action_env=CLANG_CUDA_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n+common:cuda_clang_official --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n \n # Build with nvcc for CUDA and clang for host\n-build:cuda_nvcc --config=cuda\n-build:cuda_nvcc --action_env=TF_NVCC_CLANG=\"1\"\n-build:cuda_nvcc --@local_config_cuda//:cuda_compiler=nvcc\n+common:cuda_nvcc --config=cuda\n+common:cuda_nvcc --action_env=TF_NVCC_CLANG=\"1\"\n+common:cuda_nvcc --@local_config_cuda//:cuda_compiler=nvcc\n # Old config for backward compatibility\n-build:nvcc_clang --config=cuda_nvcc\n+common:nvcc_clang --config=cuda_nvcc\n \n # Debug config\n-build:dbg -c dbg\n+common:dbg -c dbg\n # Only include debug info for files under tensorflow/, excluding kernels, to\n # reduce the size of the debug info in the binary. This is because if the debug\n # sections in the ELF binary are too large, errors can occur. See\n@@ -350,357 +350,357 @@ build:dbg -c dbg\n #     --config=dbg --per_file_copt=+tensorflow/core/kernels/identity_op.*@-g\n # Since this .bazelrc file is synced between the tensorflow/tensorflow repo and\n # the openxla/xla repo, also include debug info for files under xla/.\n-build:dbg --per_file_copt=+.*,-tensorflow.*,-xla.*@-g0\n-build:dbg --per_file_copt=+tensorflow/core/kernels.*@-g0\n+common:dbg --per_file_copt=+.*,-tensorflow.*,-xla.*@-g0\n+common:dbg --per_file_copt=+tensorflow/core/kernels.*@-g0\n # for now, disable arm_neon. see: https://github.com/tensorflow/tensorflow/issues/33360\n-build:dbg --cxxopt -DTF_LITE_DISABLE_X86_NEON\n+common:dbg --cxxopt -DTF_LITE_DISABLE_X86_NEON\n # AWS SDK must be compiled in release mode. see: https://github.com/tensorflow/tensorflow/issues/37498\n-build:dbg --copt -DDEBUG_BUILD\n+common:dbg --copt -DDEBUG_BUILD\n \n # Config to build TF TPU\n-build:tpu --define=with_tpu_support=true\n-build:tpu --define=framework_shared_object=true\n-build:tpu --copt=-DLIBTPU_ON_GCE\n-build:tpu --define=enable_mlir_bridge=true\n-\n-build:rocm --copt=-Wno-gnu-offsetof-extensions\n-build:rocm --config=clang_local\n-build:rocm --crosstool_top=@local_config_rocm//crosstool:toolchain\n-build:rocm --define=using_rocm_hipcc=true\n-build:rocm --define=tensorflow_mkldnn_contraction_kernel=0\n-build:rocm --define=xnn_enable_avxvnniint8=false\n-build:rocm --define=xnn_enable_avx512fp16=false\n-build:rocm --repo_env TF_NEED_ROCM=1\n-\n-build:rocm_clang_official --config=rocm\n-build:rocm_clang_official --action_env=CLANG_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n-build:rocm_clang_official --action_env=TF_ROCM_CLANG=\"1\"\n-build:rocm_clang_official --linkopt=\"-fuse-ld=lld\"\n-build:rocm_clang_official --host_linkopt=\"-fuse-ld=lld\"\n-\n-build:rocm_ci --config=rocm_clang_official\n-build:rocm_ci_hermetic --config=rocm_clang_official\n-build:rocm_ci_hermetic --repo_env=\"OS=ubuntu_22.04\"\n-build:rocm_ci_hermetic --repo_env=\"ROCM_VERSION=6.2.0\"\n-build:rocm_ci_hermetic --@local_config_rocm//rocm:use_rocm_hermetic_rpath=True\n-\n-build:sycl --config=clang_local\n-build:sycl --crosstool_top=@local_config_sycl//crosstool:toolchain\n-build:sycl --define=using_sycl=true\n-build:sycl --define=tensorflow_mkldnn_contraction_kernel=0\n-build:sycl --repo_env TF_NEED_SYCL=1\n+common:tpu --define=with_tpu_support=true\n+common:tpu --define=framework_shared_object=true\n+common:tpu --copt=-DLIBTPU_ON_GCE\n+common:tpu --define=enable_mlir_bridge=true\n+\n+common:rocm --copt=-Wno-gnu-offsetof-extensions\n+common:rocm --config=clang_local\n+common:rocm --crosstool_top=@local_config_rocm//crosstool:toolchain\n+common:rocm --define=using_rocm_hipcc=true\n+common:rocm --define=tensorflow_mkldnn_contraction_kernel=0\n+common:rocm --define=xnn_enable_avxvnniint8=false\n+common:rocm --define=xnn_enable_avx512fp16=false\n+common:rocm --repo_env TF_NEED_ROCM=1\n+\n+common:rocm_clang_official --config=rocm\n+common:rocm_clang_official --action_env=CLANG_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n+common:rocm_clang_official --action_env=TF_ROCM_CLANG=\"1\"\n+common:rocm_clang_official --linkopt=\"-fuse-ld=lld\"\n+common:rocm_clang_official --host_linkopt=\"-fuse-ld=lld\"\n+\n+common:rocm_ci --config=rocm_clang_official\n+common:rocm_ci_hermetic --config=rocm_clang_official\n+common:rocm_ci_hermetic --repo_env=\"OS=ubuntu_22.04\"\n+common:rocm_ci_hermetic --repo_env=\"ROCM_VERSION=6.2.0\"\n+common:rocm_ci_hermetic --@local_config_rocm//rocm:use_rocm_hermetic_rpath=True\n+\n+common:sycl --config=clang_local\n+common:sycl --crosstool_top=@local_config_sycl//crosstool:toolchain\n+common:sycl --define=using_sycl=true\n+common:sycl --define=tensorflow_mkldnn_contraction_kernel=0\n+common:sycl --repo_env TF_NEED_SYCL=1\n \n # Options to disable default on features\n-build:nogcp --define=no_gcp_support=true\n-build:nonccl --define=no_nccl_support=true\n+common:nogcp --define=no_gcp_support=true\n+common:nonccl --define=no_nccl_support=true\n \n # Modular TF build options\n-build:dynamic_kernels --define=dynamic_loaded_kernels=true\n-build:dynamic_kernels --copt=-DAUTOLOAD_DYNAMIC_KERNELS\n+common:dynamic_kernels --define=dynamic_loaded_kernels=true\n+common:dynamic_kernels --copt=-DAUTOLOAD_DYNAMIC_KERNELS\n \n # Don't trigger --config=<host platform> when cross-compiling.\n-build:android --noenable_platform_specific_config\n-build:ios --noenable_platform_specific_config\n+common:android --noenable_platform_specific_config\n+common:ios --noenable_platform_specific_config\n \n # Suppress all C++ compiler warnings, otherwise build logs become 10s of MBs.\n-build:android --copt=-w\n-build:ios --copt=-w\n-build:linux --host_copt=-w\n-build:macos --copt=-w\n-build:windows --copt=/W0\n-build:windows --host_copt=/W0\n+common:android --copt=-w\n+common:ios --copt=-w\n+common:linux --host_copt=-w\n+common:macos --copt=-w\n+common:windows --copt=/W0\n+common:windows --host_copt=/W0\n \n # Suppress most C++ compiler warnings to reduce log size but allow\n # for specific warnings to still be present.\n-build:linux --copt=\"-Wno-all\"\n-build:linux --copt=\"-Wno-extra\"\n-build:linux --copt=\"-Wno-deprecated\"\n-build:linux --copt=\"-Wno-deprecated-declarations\"\n-build:linux --copt=\"-Wno-ignored-attributes\"\n-build:linux --copt=\"-Wno-array-bounds\"\n+common:linux --copt=\"-Wno-all\"\n+common:linux --copt=\"-Wno-extra\"\n+common:linux --copt=\"-Wno-deprecated\"\n+common:linux --copt=\"-Wno-deprecated-declarations\"\n+common:linux --copt=\"-Wno-ignored-attributes\"\n+common:linux --copt=\"-Wno-array-bounds\"\n \n # Add unused-result as an error on Linux.\n-build:linux --copt=\"-Wunused-result\"\n-build:linux --copt=\"-Werror=unused-result\"\n+common:linux --copt=\"-Wunused-result\"\n+common:linux --copt=\"-Werror=unused-result\"\n # Add switch as an error on Linux.\n-build:linux --copt=\"-Wswitch\"\n-build:linux --copt=\"-Werror=switch\"\n+common:linux --copt=\"-Wswitch\"\n+common:linux --copt=\"-Werror=switch\"\n \n # Linux ARM64 specific options\n-build:linux_arm64 --copt=\"-mtune=generic\" --copt=\"-march=armv8-a\" --copt=\"-O3\"\n+common:linux_arm64 --copt=\"-mtune=generic\" --copt=\"-march=armv8-a\" --copt=\"-O3\"\n \n \n # On Windows, `__cplusplus` is wrongly defined without this switch\n # See https://devblogs.microsoft.com/cppblog/msvc-now-correctly-reports-__cplusplus/\n-build:windows --copt=/Zc:__cplusplus\n-build:windows --host_copt=/Zc:__cplusplus\n+common:windows --copt=/Zc:__cplusplus\n+common:windows --host_copt=/Zc:__cplusplus\n \n # Tensorflow uses M_* math constants that only get defined by MSVC headers if\n # _USE_MATH_DEFINES is defined.\n-build:windows --copt=/D_USE_MATH_DEFINES\n-build:windows --host_copt=/D_USE_MATH_DEFINES\n+common:windows --copt=/D_USE_MATH_DEFINES\n+common:windows --host_copt=/D_USE_MATH_DEFINES\n \n # Windows has a relatively short command line limit, which TF has begun to hit.\n # See https://docs.bazel.build/versions/main/windows.html\n-build:windows --features=compiler_param_file\n-build:windows --features=archive_param_file\n+common:windows --features=compiler_param_file\n+common:windows --features=archive_param_file\n \n # Speed Windows compile times. Available in VS 16.4 (we are on 16.11). See\n # https://groups.google.com/a/tensorflow.org/d/topic/build/SsW98Eo7l3o/discussion\n-build:windows --copt=/d2ReducedOptimizeHugeFunctions\n-build:windows --host_copt=/d2ReducedOptimizeHugeFunctions\n+common:windows --copt=/d2ReducedOptimizeHugeFunctions\n+common:windows --host_copt=/d2ReducedOptimizeHugeFunctions\n \n # Before VS 2017 15.8, the member \"type\" would non-conformingly have an\n # alignment of only alignof(max_align_t). VS 2017 15.8 was fixed to handle this\n # correctly, but the fix inherently changes layout and breaks binary\n # compatibility (*only* for uses of aligned_storage with extended alignments).\n-build:windows --copt=-D_ENABLE_EXTENDED_ALIGNED_STORAGE\n-build:windows --host_copt=-D_ENABLE_EXTENDED_ALIGNED_STORAGE\n+common:windows --copt=-D_ENABLE_EXTENDED_ALIGNED_STORAGE\n+common:windows --host_copt=-D_ENABLE_EXTENDED_ALIGNED_STORAGE\n \n # Enable the runfiles symlink tree on Windows. This makes it possible to build\n # the pip package on Windows without an intermediate data-file archive, as the\n # build_pip_package script in its current form (as of Aug 2023) uses the\n # runfiles symlink tree to decide what to put into the Python wheel.\n startup --windows_enable_symlinks\n-build:windows --enable_runfiles\n-build:windows --nobuild_python_zip\n-build:windows --dynamic_mode=off\n+common:windows --enable_runfiles\n+common:windows --nobuild_python_zip\n+common:windows --dynamic_mode=off\n \n # Default paths for TF_SYSTEM_LIBS\n-build:linux --define=PREFIX=/usr\n-build:linux --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include\n-build:macos --define=PREFIX=/usr\n-build:macos --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include\n+common:linux --define=PREFIX=/usr\n+common:linux --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include\n+common:macos --define=PREFIX=/usr\n+common:macos --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include\n # TF_SYSTEM_LIBS do not work on windows.\n \n # By default, build TF in C++ 17 mode.\n-build:android --cxxopt=-std=c++17\n-build:android --host_cxxopt=-std=c++17\n-build:ios --cxxopt=-std=c++17\n-build:ios --host_cxxopt=-std=c++17\n-build:linux --cxxopt=-std=c++17\n-build:linux --host_cxxopt=-std=c++17\n-build:macos --cxxopt=-std=c++17\n-build:macos --host_cxxopt=-std=c++17\n-build:windows --cxxopt=/std:c++17\n-build:windows --host_cxxopt=/std:c++17\n+common:android --cxxopt=-std=c++17\n+common:android --host_cxxopt=-std=c++17\n+common:ios --cxxopt=-std=c++17\n+common:ios --host_cxxopt=-std=c++17\n+common:linux --cxxopt=-std=c++17\n+common:linux --host_cxxopt=-std=c++17\n+common:macos --cxxopt=-std=c++17\n+common:macos --host_cxxopt=-std=c++17\n+common:windows --cxxopt=/std:c++17\n+common:windows --host_cxxopt=/std:c++17\n \n # On windows, we still link everything into a single DLL.\n-build:windows --config=monolithic\n+common:windows --config=monolithic\n \n # On linux, we dynamically link small amount of kernels\n-build:linux --config=dynamic_kernels\n+common:linux --config=dynamic_kernels\n \n # Make sure to include as little of windows.h as possible\n-build:windows --copt=-DWIN32_LEAN_AND_MEAN\n-build:windows --host_copt=-DWIN32_LEAN_AND_MEAN\n-build:windows --copt=-DNOGDI\n-build:windows --host_copt=-DNOGDI\n+common:windows --copt=-DWIN32_LEAN_AND_MEAN\n+common:windows --host_copt=-DWIN32_LEAN_AND_MEAN\n+common:windows --copt=-DNOGDI\n+common:windows --host_copt=-DNOGDI\n \n # MSVC (Windows): Standards-conformant preprocessor mode\n # See https://docs.microsoft.com/en-us/cpp/preprocessor/preprocessor-experimental-overview\n-build:windows --copt=/Zc:preprocessor\n-build:windows --host_copt=/Zc:preprocessor\n+common:windows --copt=/Zc:preprocessor\n+common:windows --host_copt=/Zc:preprocessor\n \n # Misc build options we need for windows.\n-build:windows --linkopt=/DEBUG\n-build:windows --host_linkopt=/DEBUG\n-build:windows --linkopt=/OPT:REF\n-build:windows --host_linkopt=/OPT:REF\n-build:windows --linkopt=/OPT:ICF\n-build:windows --host_linkopt=/OPT:ICF\n+common:windows --linkopt=/DEBUG\n+common:windows --host_linkopt=/DEBUG\n+common:windows --linkopt=/OPT:REF\n+common:windows --host_linkopt=/OPT:REF\n+common:windows --linkopt=/OPT:ICF\n+common:windows --host_linkopt=/OPT:ICF\n \n # Verbose failure logs when something goes wrong\n-build:windows --verbose_failures\n+common:windows --verbose_failures\n \n # Work around potential issues with large command lines on windows.\n # See: https://github.com/bazelbuild/bazel/issues/5163\n-build:windows --features=compiler_param_file\n+common:windows --features=compiler_param_file\n \n # Use old toolchains for Windows builds.\n-build:windows --config=clang_local\n+common:windows --config=clang_local\n \n # Do not risk cache corruption. See:\n # https://github.com/bazelbuild/bazel/issues/3360\n-build:linux --experimental_guard_against_concurrent_changes\n+common:linux --experimental_guard_against_concurrent_changes\n \n # Configure short or long logs\n-build:short_logs --output_filter=DONT_MATCH_ANYTHING\n-build:verbose_logs --output_filter=\n+common:short_logs --output_filter=DONT_MATCH_ANYTHING\n+common:verbose_logs --output_filter=\n \n # Instruction set optimizations\n # TODO(gunan): Create a feature in toolchains for avx/avx2 to\n #   avoid having to define linux/win separately.\n-build:avx_linux --copt=-mavx\n-build:avx_linux --host_copt=-mavx\n-build:avx_linux --copt=\"-mf16c\"\n-build:avx_win --copt=/arch:AVX\n-build:avx_win --copt=\"-mf16c\"\n-\n-build:win_clang_base --@com_google_protobuf//build_defs:use_dlls=True\n-build:win_clang_base --@com_google_absl//absl:use_dlls=True\n-build:win_clang_base --linkopt=/demangle:no --host_linkopt=/demangle:no\n-build:win_clang_base --linkopt=/errorlimit:0 --host_linkopt=/errorlimit:0\n-build:win_clang_base --copt=/clang:-Weverything\n-build:win_clang_base --host_copt=/clang:-Weverything\n-build:win_clang_base --compiler=clang-cl\n-build:win_clang_base --linkopt=/FORCE:MULTIPLE\n-build:win_clang_base --host_linkopt=/FORCE:MULTIPLE\n-build:win_clang_base --action_env=PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW\n+common:avx_linux --copt=-mavx\n+common:avx_linux --host_copt=-mavx\n+common:avx_linux --copt=\"-mf16c\"\n+common:avx_win --copt=/arch:AVX\n+common:avx_win --copt=\"-mf16c\"\n+\n+common:win_clang_base --@com_google_protobuf//build_defs:use_dlls=True\n+common:win_clang_base --@com_google_absl//absl:use_dlls=True\n+common:win_clang_base --linkopt=/demangle:no --host_linkopt=/demangle:no\n+common:win_clang_base --linkopt=/errorlimit:0 --host_linkopt=/errorlimit:0\n+common:win_clang_base --copt=/clang:-Weverything\n+common:win_clang_base --host_copt=/clang:-Weverything\n+common:win_clang_base --compiler=clang-cl\n+common:win_clang_base --linkopt=/FORCE:MULTIPLE\n+common:win_clang_base --host_linkopt=/FORCE:MULTIPLE\n+common:win_clang_base --action_env=PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW\n test:win_clang_base --linkopt=/FORCE:MULTIPLE\n test:win_clang_base --host_linkopt=/FORCE:MULTIPLE\n test:win_clang_base --build_tests_only --keep_going --test_output=errors --verbose_failures=true --test_summary=short\n \n-build:win_clang --config=win_clang_base\n-build:win_clang --config=clang_local\n-build:win_clang --extra_toolchains=@local_config_cc//:cc-toolchain-x64_windows-clang-cl\n-build:win_clang --extra_execution_platforms=//tensorflow/tools/toolchains/win:x64_windows-clang-cl\n-build:win_clang --host_platform=//tensorflow/tools/toolchains/win:x64_windows-clang-cl\n+common:win_clang --config=win_clang_base\n+common:win_clang --config=clang_local\n+common:win_clang --extra_toolchains=@local_config_cc//:cc-toolchain-x64_windows-clang-cl\n+common:win_clang --extra_execution_platforms=//tensorflow/tools/toolchains/win:x64_windows-clang-cl\n+common:win_clang --host_platform=//tensorflow/tools/toolchains/win:x64_windows-clang-cl\n \n-build:windows_x86_cpu_2022 --config=win_clang_base\n-build:windows_x86_cpu_2022 --crosstool_top=\"//tensorflow/tools/toolchains/win2022/20241118:toolchain\"\n-build:windows_x86_cpu_2022 --extra_toolchains=\"//tensorflow/tools/toolchains/win2022/20241118:cc-toolchain-x64_windows-clang-cl\"\n-build:windows_x86_cpu_2022 --extra_execution_platforms=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n-build:windows_x86_cpu_2022 --host_platform=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n-build:windows_x86_cpu_2022 --platforms=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n+common:windows_x86_cpu_2022 --config=win_clang_base\n+common:windows_x86_cpu_2022 --crosstool_top=\"//tensorflow/tools/toolchains/win2022/20241118:toolchain\"\n+common:windows_x86_cpu_2022 --extra_toolchains=\"//tensorflow/tools/toolchains/win2022/20241118:cc-toolchain-x64_windows-clang-cl\"\n+common:windows_x86_cpu_2022 --extra_execution_platforms=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n+common:windows_x86_cpu_2022 --host_platform=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n+common:windows_x86_cpu_2022 --platforms=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n \n # Options to build TensorFlow 1.x or 2.x.\n # TODO(kanglan): Change v2's define to default behavior\n-build:v2 --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\n+common:v2 --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\n \n # Enable all targets in XLA\n-build:cpu_cross --define=with_cross_compiler_support=true\n+common:cpu_cross --define=with_cross_compiler_support=true\n \n # Disable XLA on mobile.\n-build:xla     --define=with_xla_support=true # TODO: remove, it's on by default.\n-build:android --define=with_xla_support=false\n-build:ios     --define=with_xla_support=false\n+common:xla     --define=with_xla_support=true # TODO: remove, it's on by default.\n+common:android --define=with_xla_support=false\n+common:ios     --define=with_xla_support=false\n \n # BEGIN TF REMOTE BUILD EXECUTION OPTIONS\n # Options when using remote execution\n # WARNING: THESE OPTIONS WONT WORK IF YOU DO NOT HAVE PROPER AUTHENTICATION AND PERMISSIONS\n \n # Allow creation of resultstore URLs for any bazel invocation\n-build:resultstore --google_default_credentials\n-build:resultstore --bes_backend=buildeventservice.googleapis.com\n-build:resultstore --bes_instance_name=\"tensorflow-testing\"\n-build:resultstore --bes_results_url=\"https://source.cloud.google.com/results/invocations\"\n-build:resultstore --bes_timeout=600s\n+common:resultstore --google_default_credentials\n+common:resultstore --bes_backend=buildeventservice.googleapis.com\n+common:resultstore --bes_instance_name=\"tensorflow-testing\"\n+common:resultstore --bes_results_url=\"https://source.cloud.google.com/results/invocations\"\n+common:resultstore --bes_timeout=600s\n \n # Flag to enable remote config\n common --experimental_repo_remote_exec\n \n-build:use_tar_archive_files --repo_env=USE_CUDA_TAR_ARCHIVE_FILES=1\n-build:use_tar_archive_files --repo_env=USE_NVSHMEM_TAR_ARCHIVE_FILES=1\n-build:use_tar_archive_files --repo_env=USE_LLVM_TAR_ARCHIVE_FILES=1\n-build:use_tar_archive_files --repo_env=USE_MIRRORED_TAR_ARCHIVE_FILES=1\n+common:use_tar_archive_files --repo_env=USE_CUDA_TAR_ARCHIVE_FILES=1\n+common:use_tar_archive_files --repo_env=USE_NVSHMEM_TAR_ARCHIVE_FILES=1\n+common:use_tar_archive_files --repo_env=USE_LLVM_TAR_ARCHIVE_FILES=1\n+common:use_tar_archive_files --repo_env=USE_MIRRORED_TAR_ARCHIVE_FILES=1\n \n # Make Bazel not try to probe the host system for a C++ toolchain.\n-build:rbe_base --config=use_tar_archive_files\n-build:rbe_base --config=resultstore\n-build:rbe_base --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\n-build:rbe_base --define=EXECUTOR=remote\n-build:rbe_base --jobs=800\n-build:rbe_base --remote_executor=grpcs://remotebuildexecution.googleapis.com\n-build:rbe_base --remote_timeout=3600\n-build:rbe_base --spawn_strategy=remote,worker,standalone,local\n+common:rbe_base --config=use_tar_archive_files\n+common:rbe_base --config=resultstore\n+common:rbe_base --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\n+common:rbe_base --define=EXECUTOR=remote\n+common:rbe_base --jobs=800\n+common:rbe_base --remote_executor=grpcs://remotebuildexecution.googleapis.com\n+common:rbe_base --remote_timeout=3600\n+common:rbe_base --spawn_strategy=remote,worker,standalone,local\n # Attempt to minimize the amount of data transfer between bazel and the remote\n # workers:\n-build:rbe_base --remote_download_toplevel\n+common:rbe_base --remote_download_toplevel\n test:rbe_base --test_env=USER=anon\n \n # TODO(kanglan): Check if we want to merge rbe_linux into rbe_linux_cpu.\n-build:rbe_linux --config=rbe_base\n-build:rbe_linux --action_env=PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/go/bin\"\n+common:rbe_linux --config=rbe_base\n+common:rbe_linux --action_env=PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/go/bin\"\n # Non-rbe settings we should include because we do not run configure\n-build:rbe_linux --config=avx_linux\n+common:rbe_linux --config=avx_linux\n # TODO(gunan): Check why we need this specified in rbe, but not in other builds.\n-build:rbe_linux --linkopt=-lrt\n-build:rbe_linux --host_linkopt=-lrt\n-build:rbe_linux --linkopt=-lm\n-build:rbe_linux --host_linkopt=-lm\n-\n-build:rbe_linux_cpu --config=rbe_linux\n-build:rbe_linux_cpu --extra_execution_platforms=\"@ml_build_config_platform//:platform\"\n-build:rbe_linux_cpu --host_platform=\"@ml_build_config_platform//:platform\"\n-build:rbe_linux_cpu --platforms=\"@ml_build_config_platform//:platform\"\n+common:rbe_linux --linkopt=-lrt\n+common:rbe_linux --host_linkopt=-lrt\n+common:rbe_linux --linkopt=-lm\n+common:rbe_linux --host_linkopt=-lm\n+\n+common:rbe_linux_cpu --config=rbe_linux\n+common:rbe_linux_cpu --extra_execution_platforms=\"@ml_build_config_platform//:platform\"\n+common:rbe_linux_cpu --host_platform=\"@ml_build_config_platform//:platform\"\n+common:rbe_linux_cpu --platforms=\"@ml_build_config_platform//:platform\"\n # This is needed for all Clang17 builds but must not be present in GCC builds.\n-build:rbe_linux_cpu --copt=-Wno-error=unused-command-line-argument\n+common:rbe_linux_cpu --copt=-Wno-error=unused-command-line-argument\n # This was added in clang-16 by https://reviews.llvm.org/D133574.\n # Can be removed once upb is updated, since a type definition is used within\n # offset of in the current version of ubp.\n # See https://github.com/protocolbuffers/upb/blob/9effcbcb27f0a665f9f345030188c0b291e32482/upb/upb.c#L183.\n-build:rbe_linux_cpu --copt=-Wno-gnu-offsetof-extensions\n+common:rbe_linux_cpu --copt=-Wno-gnu-offsetof-extensions\n # Python config is the same across all containers because the binary is the same\n-build:rbe_linux_cpu --python_path=\"/usr/bin/python3\"\n+common:rbe_linux_cpu --python_path=\"/usr/bin/python3\"\n # These you may need to change for your own GCP project.\n common:rbe_linux_cpu --remote_instance_name=projects/tensorflow-testing/instances/default_instance\n \n # Download CUDA/CUDNN redistributions to preserve the repositories cache between\n # CPU and GPU builds.\n # TODO(ybaturina): Uncomment when RBE is ready to support this.\n-# build:rbe_linux_cpu --repo_env USE_CUDA_REDISTRIBUTIONS=1\n-# build:rbe_linux_cpu --config=cuda_version\n+commonld:rbe_linux_cpu --repo_env USE_CUDA_REDISTRIBUTIONS=1\n+commonld:rbe_linux_cpu --config=cuda_version\n \n # Deprecated RBE config with non-hermetic toolchains.\n-build:rbe_linux_cpu_clang_local --config=rbe_linux_cpu\n-build:rbe_linux_cpu_clang_local --config=clang_local\n-build:rbe_linux_cpu_clang_local --host_crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n-build:rbe_linux_cpu_clang_local --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n-build:rbe_linux_cpu_clang_local --extra_toolchains=\"@local_config_cuda//crosstool:toolchain-linux-x86_64\"\n-build:rbe_linux_cpu_clang_local --repo_env=CC=\"/usr/lib/llvm-18/bin/clang\"\n-build:rbe_linux_cpu_clang_local --repo_env=TF_SYSROOT=\"/dt9\"\n+common:rbe_linux_cpu_clang_local --config=rbe_linux_cpu\n+common:rbe_linux_cpu_clang_local --config=clang_local\n+common:rbe_linux_cpu_clang_local --host_crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n+common:rbe_linux_cpu_clang_local --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n+common:rbe_linux_cpu_clang_local --extra_toolchains=\"@local_config_cuda//crosstool:toolchain-linux-x86_64\"\n+common:rbe_linux_cpu_clang_local --repo_env=CC=\"/usr/lib/llvm-18/bin/clang\"\n+common:rbe_linux_cpu_clang_local --repo_env=TF_SYSROOT=\"/dt9\"\n \n # TODO(kanglan): Remove it after toolchain update is complete.\n-build:rbe_linux_cpu_old --config=rbe_linux\n-build:rbe_linux_cpu_old --host_crosstool_top=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_cuda//crosstool:toolchain\"\n-build:rbe_linux_cpu_old --crosstool_top=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_cuda//crosstool:toolchain\"\n-build:rbe_linux_cpu_old --extra_toolchains=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_cuda//crosstool:toolchain-linux-x86_64\"\n-build:rbe_linux_cpu_old --extra_execution_platforms=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_platform//:platform\"\n-build:rbe_linux_cpu_old --host_platform=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_platform//:platform\"\n-build:rbe_linux_cpu_old --platforms=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_platform//:platform\"\n-build:rbe_linux_cpu_old --python_path=\"/usr/local/bin/python3.9\"\n+common:rbe_linux_cpu_old --config=rbe_linux\n+common:rbe_linux_cpu_old --host_crosstool_top=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_cuda//crosstool:toolchain\"\n+common:rbe_linux_cpu_old --crosstool_top=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_cuda//crosstool:toolchain\"\n+common:rbe_linux_cpu_old --extra_toolchains=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_cuda//crosstool:toolchain-linux-x86_64\"\n+common:rbe_linux_cpu_old --extra_execution_platforms=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_platform//:platform\"\n+common:rbe_linux_cpu_old --host_platform=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_platform//:platform\"\n+common:rbe_linux_cpu_old --platforms=\"@ubuntu20.04-gcc9_manylinux2014-cuda11.2-cudnn8.1-tensorrt7.2_config_platform//:platform\"\n+common:rbe_linux_cpu_old --python_path=\"/usr/local/bin/python3.9\"\n common:rbe_linux_cpu_old --remote_instance_name=projects/tensorflow-testing/instances/default_instance\n \n-build:rbe_linux_cuda --config=cuda_clang_official\n-build:rbe_linux_cuda --config=rbe_linux_cpu\n+common:rbe_linux_cuda --config=cuda_clang_official\n+common:rbe_linux_cuda --config=rbe_linux_cpu\n # For Remote build execution -- GPU configuration\n-build:rbe_linux_cuda --repo_env=REMOTE_GPU_TESTING=1\n+common:rbe_linux_cuda --repo_env=REMOTE_GPU_TESTING=1\n # Enable forward compatibility for CUDA builds because RBE docker image doesn't\n # have latest CUDA drivers installed.\n-build:rbe_linux_cuda --@cuda_driver//:enable_forward_compatibility=true\n+common:rbe_linux_cuda --@cuda_driver//:enable_forward_compatibility=true\n \n-build:rbe_linux_cuda_nvcc --config=rbe_linux_cuda\n-build:rbe_linux_cuda_nvcc --config=cuda_nvcc\n-build:rbe_linux_cuda_nvcc --repo_env TF_NCCL_USE_STUB=1\n+common:rbe_linux_cuda_nvcc --config=rbe_linux_cuda\n+common:rbe_linux_cuda_nvcc --config=cuda_nvcc\n+common:rbe_linux_cuda_nvcc --repo_env TF_NCCL_USE_STUB=1\n \n-build:rbe_win_base --config=rbe_base\n-build:rbe_win_base --config=clang_local\n-build:rbe_win_base --shell_executable=C:\\\\tools\\\\msys64\\\\usr\\\\bin\\\\bash.exe\n-build:rbe_win_base --remote_instance_name=projects/tensorflow-testing/instances/windows\n+common:rbe_win_base --config=rbe_base\n+common:rbe_win_base --config=clang_local\n+common:rbe_win_base --shell_executable=C:\\\\tools\\\\msys64\\\\usr\\\\bin\\\\bash.exe\n+common:rbe_win_base --remote_instance_name=projects/tensorflow-testing/instances/windows\n # Don't build the python zip archive in the RBE build.\n-build:rbe_win_base --remote_download_minimal\n-build:rbe_win_base --enable_runfiles\n-build:rbe_win_base --nobuild_python_zip\n+common:rbe_win_base --remote_download_minimal\n+common:rbe_win_base --enable_runfiles\n+common:rbe_win_base --nobuild_python_zip\n # Don't build the runfile links in the RBE build which is expensive on Windows.\n-build:rbe_win_base --nobuild_runfile_links\n-build:rbe_win_base --define=override_eigen_strong_inline=true\n+common:rbe_win_base --nobuild_runfile_links\n+common:rbe_win_base --define=override_eigen_strong_inline=true\n \n-build:rbe_windows_x86_cpu_2022 --config=rbe_win_base --config=windows_x86_cpu_2022\n+common:rbe_windows_x86_cpu_2022 --config=rbe_win_base --config=windows_x86_cpu_2022\n \n # END TF REMOTE BUILD EXECUTION OPTIONS\n \n # TFLite build configs for generic embedded Linux\n-build:elinux --config=clang_local\n-build:elinux --crosstool_top=@local_config_embedded_arm//:toolchain\n-build:elinux --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\n-build:elinux_aarch64 --config=elinux\n-build:elinux_aarch64 --cpu=aarch64\n-build:elinux_aarch64 --platforms=@org_tensorflow//tensorflow/tools/toolchains/linux:linux_aarch64\n-build:elinux_armhf --config=elinux\n-build:elinux_armhf --cpu=armhf\n-build:elinux_armhf --platforms=@org_tensorflow//tensorflow/tools/toolchains/linux:linux_armhf\n-build:elinux_armhf --copt -mfp16-format=ieee\n+common:elinux --config=clang_local\n+common:elinux --crosstool_top=@local_config_embedded_arm//:toolchain\n+common:elinux --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\n+common:elinux_aarch64 --config=elinux\n+common:elinux_aarch64 --cpu=aarch64\n+common:elinux_aarch64 --platforms=@org_tensorflow//tensorflow/tools/toolchains/linux:linux_aarch64\n+common:elinux_armhf --config=elinux\n+common:elinux_armhf --cpu=armhf\n+common:elinux_armhf --platforms=@org_tensorflow//tensorflow/tools/toolchains/linux:linux_armhf\n+common:elinux_armhf --copt -mfp16-format=ieee\n \n # Config-specific options should come above this line.\n \n@@ -715,26 +715,26 @@ try-import %workspace%/.bazelrc.user\n test:release_base --test_size_filters=small,medium\n \n # Enable support for all targets\n-build:release_base --config=cpu_cross\n+common:release_base --config=cpu_cross\n \n # Ensure release_base is set on linux\n-build:release_linux_base --config=release_base\n+common:release_linux_base --config=release_base\n \n # Disable clang extension that rejects type definitions within offsetof.\n # This was added in clang-16 by https://reviews.llvm.org/D133574.\n # Can be removed once upb is updated, since a type definition is used within\n # offset of in the current version of ubp.\n # See https://github.com/protocolbuffers/upb/blob/9effcbcb27f0a665f9f345030188c0b291e32482/upb/upb.c#L183.\n-build:release_linux_base --copt=-Wno-gnu-offsetof-extensions\n-build:release_linux_base --copt=-Wno-error=array-parameter\n-build:release_linux_base --copt=-Wno-error=unused-command-line-argument\n+common:release_linux_base --copt=-Wno-gnu-offsetof-extensions\n+common:release_linux_base --copt=-Wno-error=array-parameter\n+common:release_linux_base --copt=-Wno-error=unused-command-line-argument\n # Set lld as the linker.\n-build:release_linux_base --linkopt=\"-fuse-ld=lld\"\n-build:release_linux_base --linkopt=\"-lm\"\n+common:release_linux_base --linkopt=\"-fuse-ld=lld\"\n+common:release_linux_base --linkopt=\"-lm\"\n \n # We have some invalid linker scripts in the build,\n # so we need to disable this check\n-build:release_linux_base --linkopt=-Wl,--undefined-version\n+common:release_linux_base --linkopt=-Wl,--undefined-version\n \n # Container environment settings below this point.\n # Test-related settings below this point.\n@@ -744,65 +744,65 @@ test:release_linux_base --local_test_jobs=HOST_CPUS\n test:release_linux_base --test_summary=short\n \n # Use the Clang toolchain to compile\n-build:release_cpu_linux --config=release_linux_base\n+common:release_cpu_linux --config=release_linux_base\n # Target the AVX instruction set\n-build:release_cpu_linux --config=avx_linux\n+common:release_cpu_linux --config=avx_linux\n \n-build:release_gpu_linux --config=release_cpu_linux\n+common:release_gpu_linux --config=release_cpu_linux\n # Set up compilation CUDA version and paths and use the CUDA Clang toolchain.\n # Note that linux cpu and cuda builds share the same toolchain now.\n-build:release_gpu_linux --config=cuda_clang_official\n+common:release_gpu_linux --config=cuda_clang_official\n # Local test jobs has to be 4 because parallel_gpu_execute is fragile, I think\n test:release_gpu_linux --test_timeout=300,450,1200,3600 --local_test_jobs=4 --run_under=//tensorflow/tools/ci_build/gpu_build:parallel_gpu_execute\n \n # Deprecated release CPU config with non-hermetic toolchains.\n-build:release_cpu_linux_clang_local --config=release_cpu_linux\n-build:release_cpu_linux_clang_local --config=clang_local\n-build:release_cpu_linux_clang_local --repo_env=CC=\"/usr/lib/llvm-18/bin/clang\"\n-build:release_cpu_linux_clang_local --repo_env=BAZEL_COMPILER=\"/usr/lib/llvm-18/bin/clang\"\n-build:release_cpu_linux_clang_local --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n-build:release_cpu_linux_clang_local --repo_env=TF_SYSROOT=\"/dt9\"\n+common:release_cpu_linux_clang_local --config=release_cpu_linux\n+common:release_cpu_linux_clang_local --config=clang_local\n+common:release_cpu_linux_clang_local --repo_env=CC=\"/usr/lib/llvm-18/bin/clang\"\n+common:release_cpu_linux_clang_local --repo_env=BAZEL_COMPILER=\"/usr/lib/llvm-18/bin/clang\"\n+common:release_cpu_linux_clang_local --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n+common:release_cpu_linux_clang_local --repo_env=TF_SYSROOT=\"/dt9\"\n \n # Deprecated release GPU config with non-hermetic toolchains.\n-build:release_gpu_linux_clang_local --config=release_gpu_linux\n-build:release_gpu_linux_clang_local --config=release_cpu_linux_clang_local\n-\n-build:release_arm64_linux --config=release_linux_base\n-build:release_arm64_linux --config=linux_arm64\n-build:release_arm64_linux --config=clang_local\n-build:release_arm64_linux --repo_env=CC=\"/usr/lib/llvm-18/bin/clang\"\n-build:release_arm64_linux --repo_env=BAZEL_COMPILER=\"/usr/lib/llvm-18/bin/clang\"\n-build:release_arm64_linux --crosstool_top=\"@ml2014_clang_aarch64_config_aarch64//crosstool:toolchain\"\n-build:release_arm64_linux --config=mkl_aarch64_threadpool\n-build:release_arm64_linux --copt=-flax-vector-conversions\n+common:release_gpu_linux_clang_local --config=release_gpu_linux\n+common:release_gpu_linux_clang_local --config=release_cpu_linux_clang_local\n+\n+common:release_arm64_linux --config=release_linux_base\n+common:release_arm64_linux --config=linux_arm64\n+common:release_arm64_linux --config=clang_local\n+common:release_arm64_linux --repo_env=CC=\"/usr/lib/llvm-18/bin/clang\"\n+common:release_arm64_linux --repo_env=BAZEL_COMPILER=\"/usr/lib/llvm-18/bin/clang\"\n+common:release_arm64_linux --crosstool_top=\"@ml2014_clang_aarch64_config_aarch64//crosstool:toolchain\"\n+common:release_arm64_linux --config=mkl_aarch64_threadpool\n+common:release_arm64_linux --copt=-flax-vector-conversions\n test:release_arm64_linux --flaky_test_attempts=3\n \n-build:release_cpu_macos --config=avx_linux\n+common:release_cpu_macos --config=avx_linux\n \n # Base build configs for macOS\n-build:release_macos_base --config=clang_local\n-build:release_macos_base --action_env  DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developer\n-build:release_macos_base --define=no_nccl_support=true --output_filter=^$\n+common:release_macos_base --config=clang_local\n+common:release_macos_base --action_env  DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developer\n+common:release_macos_base --define=no_nccl_support=true --output_filter=^$\n \n # Ensure release_base is set on mac\n-build:release_macos_base --config=release_base\n+common:release_macos_base --config=release_base\n \n # Build configs for macOS x86\n-build:release_macos_x86 --config=release_macos_base\n+common:release_macos_x86 --config=release_macos_base\n # Build with the AVX instruction set when on macOS x86\n-build:release_macos_x86 --config=avx_linux\n-build:release_macos_x86 --cpu=darwin\n+common:release_macos_x86 --config=avx_linux\n+common:release_macos_x86 --cpu=darwin\n # Target Catalina as the minimum compatible OS version\n-build:release_macos_x86 --macos_minimum_os=10.15\n-build:release_macos_x86 --action_env MACOSX_DEPLOYMENT_TARGET=10.15\n+common:release_macos_x86 --macos_minimum_os=10.15\n+common:release_macos_x86 --action_env MACOSX_DEPLOYMENT_TARGET=10.15\n \n # Build configs for macOS Arm64\n-build:release_macos_arm64 --config=release_macos_base\n-build:release_macos_arm64 --cpu=darwin_arm64\n-build:release_macos_arm64 --define=tensorflow_mkldnn_contraction_kernel=0\n+common:release_macos_arm64 --config=release_macos_base\n+common:release_macos_arm64 --cpu=darwin_arm64\n+common:release_macos_arm64 --define=tensorflow_mkldnn_contraction_kernel=0\n # Target Moneterey as the minimum compatible OS version\n-build:release_macos_arm64 --macos_minimum_os=12.0\n-build:release_macos_arm64 --action_env MACOSX_DEPLOYMENT_TARGET=12.0\n+common:release_macos_arm64 --macos_minimum_os=12.0\n+common:release_macos_arm64 --action_env MACOSX_DEPLOYMENT_TARGET=12.0\n \n # Base test configs for macOS\n test:release_macos_base --verbose_failures=true --local_test_jobs=HOST_CPUS\n@@ -817,18 +817,18 @@ test:release_macos_x86 --config=release_macos_base\n test:release_macos_arm64 --config=release_macos_base\n \n # Ensure release_base is set on windows\n-build:release_cpu_windows --config=release_base\n+common:release_cpu_windows --config=release_base\n \n # TODO(kanglan): Update windows configs after b/289091160 is fixed\n-build:release_cpu_windows --config=avx_win\n-build:release_cpu_windows --define=no_tensorflow_py_deps=true\n+common:release_cpu_windows --config=avx_win\n+common:release_cpu_windows --define=no_tensorflow_py_deps=true\n \n # Exclude TFRT integration for anything but Linux.\n-build:android --config=no_tfrt\n-build:macos   --config=no_tfrt\n-build:windows --config=no_tfrt\n-build:rocm --config=no_tfrt\n-build:no_tfrt --deleted_packages=tensorflow/compiler/mlir/tfrt,tensorflow/compiler/mlir/tfrt/benchmarks,tensorflow/compiler/mlir/tfrt/ir,tensorflow/compiler/mlir/tfrt/ir/mlrt,tensorflow/compiler/mlir/tfrt/jit/python_binding,tensorflow/compiler/mlir/tfrt/jit/transforms,tensorflow/compiler/mlir/tfrt/python_tests,tensorflow/compiler/mlir/tfrt/tests,tensorflow/compiler/mlir/tfrt/tests/ifrt,tensorflow/compiler/mlir/tfrt/tests/mlrt,tensorflow/compiler/mlir/tfrt/tests/ir,tensorflow/compiler/mlir/tfrt/tests/analysis,tensorflow/compiler/mlir/tfrt/tests/jit,tensorflow/compiler/mlir/tfrt/tests/lhlo_to_tfrt,tensorflow/compiler/mlir/tfrt/tests/lhlo_to_jitrt,tensorflow/compiler/mlir/tfrt/tests/tf_to_corert,tensorflow/compiler/mlir/tfrt/tests/tf_to_tfrt_data,tensorflow/compiler/mlir/tfrt/tests/saved_model,tensorflow/compiler/mlir/tfrt/transforms/lhlo_gpu_to_tfrt_gpu,tensorflow/compiler/mlir/tfrt/transforms/mlrt,tensorflow/core/runtime_fallback,tensorflow/core/runtime_fallback/conversion,tensorflow/core/runtime_fallback/kernel,tensorflow/core/runtime_fallback/opdefs,tensorflow/core/runtime_fallback/runtime,tensorflow/core/runtime_fallback/util,tensorflow/core/runtime_fallback/test,tensorflow/core/runtime_fallback/test/gpu,tensorflow/core/runtime_fallback/test/saved_model,tensorflow/core/runtime_fallback/test/testdata,tensorflow/core/tfrt/stubs,tensorflow/core/tfrt/tfrt_session,tensorflow/core/tfrt/mlrt,tensorflow/core/tfrt/mlrt/attribute,tensorflow/core/tfrt/mlrt/kernel,tensorflow/core/tfrt/mlrt/bytecode,tensorflow/core/tfrt/mlrt/interpreter,tensorflow/compiler/mlir/tfrt/translate/mlrt,tensorflow/compiler/mlir/tfrt/translate/mlrt/testdata,tensorflow/core/tfrt/gpu,tensorflow/core/tfrt/run_handler_thread_pool,tensorflow/core/tfrt/runtime,tensorflow/core/tfrt/saved_model,tensorflow/core/tfrt/graph_executor,tensorflow/core/tfrt/saved_model/tests,tensorflow/core/tfrt/tpu,tensorflow/core/tfrt/utils,tensorflow/core/tfrt/utils/debug,tensorflow/core/tfrt/saved_model/python,tensorflow/core/tfrt/graph_executor/python,tensorflow/core/tfrt/saved_model/utils\n+common:android --config=no_tfrt\n+common:macos   --config=no_tfrt\n+common:windows --config=no_tfrt\n+common:rocm --config=no_tfrt\n+common:no_tfrt --deleted_packages=tensorflow/compiler/mlir/tfrt,tensorflow/compiler/mlir/tfrt/benchmarks,tensorflow/compiler/mlir/tfrt/ir,tensorflow/compiler/mlir/tfrt/ir/mlrt,tensorflow/compiler/mlir/tfrt/jit/python_binding,tensorflow/compiler/mlir/tfrt/jit/transforms,tensorflow/compiler/mlir/tfrt/python_tests,tensorflow/compiler/mlir/tfrt/tests,tensorflow/compiler/mlir/tfrt/tests/ifrt,tensorflow/compiler/mlir/tfrt/tests/mlrt,tensorflow/compiler/mlir/tfrt/tests/ir,tensorflow/compiler/mlir/tfrt/tests/analysis,tensorflow/compiler/mlir/tfrt/tests/jit,tensorflow/compiler/mlir/tfrt/tests/lhlo_to_tfrt,tensorflow/compiler/mlir/tfrt/tests/lhlo_to_jitrt,tensorflow/compiler/mlir/tfrt/tests/tf_to_corert,tensorflow/compiler/mlir/tfrt/tests/tf_to_tfrt_data,tensorflow/compiler/mlir/tfrt/tests/saved_model,tensorflow/compiler/mlir/tfrt/transforms/lhlo_gpu_to_tfrt_gpu,tensorflow/compiler/mlir/tfrt/transforms/mlrt,tensorflow/core/runtime_fallback,tensorflow/core/runtime_fallback/conversion,tensorflow/core/runtime_fallback/kernel,tensorflow/core/runtime_fallback/opdefs,tensorflow/core/runtime_fallback/runtime,tensorflow/core/runtime_fallback/util,tensorflow/core/runtime_fallback/test,tensorflow/core/runtime_fallback/test/gpu,tensorflow/core/runtime_fallback/test/saved_model,tensorflow/core/runtime_fallback/test/testdata,tensorflow/core/tfrt/stubs,tensorflow/core/tfrt/tfrt_session,tensorflow/core/tfrt/mlrt,tensorflow/core/tfrt/mlrt/attribute,tensorflow/core/tfrt/mlrt/kernel,tensorflow/core/tfrt/mlrt/bytecode,tensorflow/core/tfrt/mlrt/interpreter,tensorflow/compiler/mlir/tfrt/translate/mlrt,tensorflow/compiler/mlir/tfrt/translate/mlrt/testdata,tensorflow/core/tfrt/gpu,tensorflow/core/tfrt/run_handler_thread_pool,tensorflow/core/tfrt/runtime,tensorflow/core/tfrt/saved_model,tensorflow/core/tfrt/graph_executor,tensorflow/core/tfrt/saved_model/tests,tensorflow/core/tfrt/tpu,tensorflow/core/tfrt/utils,tensorflow/core/tfrt/utils/debug,tensorflow/core/tfrt/saved_model/python,tensorflow/core/tfrt/graph_executor/python,tensorflow/core/tfrt/saved_model/utils\n \n # BEGIN TF CACHE HELPER OPTIONS\n # Options when using remote execution\n@@ -837,13 +837,13 @@ build:no_tfrt --deleted_packages=tensorflow/compiler/mlir/tfrt,tensorflow/compil\n # Use --config=tf_public_cache to try and use the TensorFlow public build cache\n # to build TensorFlow. Look at ci/official/envs to find which types of jobs\n # push to the cache.  For macOS, use --config=tf_public_macos_cache\n-build:tf_public_cache --remote_cache=\"https://storage.googleapis.com/tensorflow-devinfra-bazel-cache/january2024\" --remote_upload_local_results=false\n+common:tf_public_cache --remote_cache=\"https://storage.googleapis.com/tensorflow-devinfra-bazel-cache/january2024\" --remote_upload_local_results=false\n # Cache pushes are limited to TF's CI system.\n-build:tf_public_cache_push --config=tf_public_cache --remote_upload_local_results=true --google_default_credentials\n+common:tf_public_cache_push --config=tf_public_cache --remote_upload_local_results=true --google_default_credentials\n # Public cache for macOS builds\n-build:tf_public_macos_cache --remote_cache=\"https://storage.googleapis.com/tensorflow-macos-bazel-cache/oct2023\" --remote_upload_local_results=false\n+common:tf_public_macos_cache --remote_cache=\"https://storage.googleapis.com/tensorflow-macos-bazel-cache/oct2023\" --remote_upload_local_results=false\n # Cache pushes are limited to TF's CI system.\n-build:tf_public_macos_cache_push --config=tf_public_macos_cache --remote_upload_local_results=true --google_default_credentials\n+common:tf_public_macos_cache_push --config=tf_public_macos_cache --remote_upload_local_results=true --google_default_credentials\n \n # END TF CACHE HELPER OPTIONS\n # BEGIN TF TEST SUITE OPTIONS\n@@ -906,15 +906,15 @@ test:linux_cuda_pycpp_test --config=linux_cuda_pycpp_test_filters -- //tensorflo\n # do not run them. By prefixing the configs with \"build\", we can run both\n # `bazel build` and `bazel test` commands with the same config as test configs\n # inherit from build.\n-build:linux_arm64_pycpp_test_filters --test_tag_filters=-no_oss,-no_oss_py313,-tf_tosa,-no_aarch64,-oss_excluded,-oss_serial,-gpu,-tpu,-benchmark-test,-v1only\n-build:linux_arm64_pycpp_test_filters --build_tag_filters=-no_oss,-no_oss_py313,-tf_tosa,-no_aarch64,-oss_excluded,-oss_serial,-gpu,-tpu,-benchmark-test,-v1only\n-build:linux_arm64_pycpp_test_filters --test_lang_filters=cc,py --test_size_filters=small,medium --flaky_test_attempts=3\n+common:linux_arm64_pycpp_test_filters --test_tag_filters=-no_oss,-no_oss_py313,-tf_tosa,-no_aarch64,-oss_excluded,-oss_serial,-gpu,-tpu,-benchmark-test,-v1only\n+common:linux_arm64_pycpp_test_filters --build_tag_filters=-no_oss,-no_oss_py313,-tf_tosa,-no_aarch64,-oss_excluded,-oss_serial,-gpu,-tpu,-benchmark-test,-v1only\n+common:linux_arm64_pycpp_test_filters --test_lang_filters=cc,py --test_size_filters=small,medium --flaky_test_attempts=3\n # TODO(michaelhudgins): Why do we need to specifically omit go and java here?\n-build:linux_arm64_pycpp_test --config=linux_arm64_pycpp_test_filters -- //tensorflow/... //tensorflow/tools/pip_package:import_api_packages_test_cpu -//tensorflow/compiler/tf2tensorrt/... -//tensorflow/core/tpu/... -//tensorflow/lite/... -//tensorflow/tools/toolchains/... -//tensorflow/go/... -//tensorflow/java/... -//tensorflow/core/grappler/optimizers:auto_mixed_precision_test_cpu -//tensorflow/core/grappler/optimizers:remapper_test_cpu -//tensorflow/core/kernels/image:resize_bicubic_op_test -//tensorflow/python/tools:aot_compiled_test\n+common:linux_arm64_pycpp_test --config=linux_arm64_pycpp_test_filters -- //tensorflow/... //tensorflow/tools/pip_package:import_api_packages_test_cpu -//tensorflow/compiler/tf2tensorrt/... -//tensorflow/core/tpu/... -//tensorflow/lite/... -//tensorflow/tools/toolchains/... -//tensorflow/go/... -//tensorflow/java/... -//tensorflow/core/grappler/optimizers:auto_mixed_precision_test_cpu -//tensorflow/core/grappler/optimizers:remapper_test_cpu -//tensorflow/core/kernels/image:resize_bicubic_op_test -//tensorflow/python/tools:aot_compiled_test\n # CROSS-COMPILE ARM64 PYCPP\n-build:cross_compile_linux_arm64_pycpp_test --config=linux_arm64_pycpp_test\n+common:cross_compile_linux_arm64_pycpp_test --config=linux_arm64_pycpp_test\n # Tests that fail only when cross-compiled\n-build:cross_compile_linux_arm64_pycpp_test -//tensorflow/compiler/mlir/quantization/stablehlo:convert_tf_quant_to_mhlo_int_test\n+common:cross_compile_linux_arm64_pycpp_test -//tensorflow/compiler/mlir/quantization/stablehlo:convert_tf_quant_to_mhlo_int_test\n # MACOS ARM64 PYCPP\n test:macos_arm64_pycpp_test_filters --test_tag_filters=-no_oss,-tf_tosa,-oss_excluded,-oss_serial,-no_oss_py39,-no_oss_py310,-no_oss_py313,-nomac,-no_mac,-mac_excluded,-v1only,-gpu,-tpu,-benchmark-test,-no_mac_arm64,-no_aarch64\n test:macos_arm64_pycpp_test_filters --build_tag_filters=-no_oss,-tf_tosa,-oss_excluded,-oss_serial,-no_oss_py39,-no_oss_py310,-no_oss_py313,-nomac,-no_mac,-mac_excluded,-v1only,-gpu,-tpu,-benchmark-test,-no_mac_arm64,-no_aarch64\n@@ -923,17 +923,17 @@ test:macos_arm64_pycpp_test --config=macos_arm64_pycpp_test_filters -- //tensorf\n # MACOS X86 PYCPP\n # These are defined as build configs so that we can run a build only job. See\n # the note under \"ARM64 PYCPP\" for more details.\n-build:macos_x86_pycpp_test_filters --test_tag_filters=-no_oss,-tf_tosa,-oss_excluded,-oss_serial,-no_oss_py38,-no_oss_py39,-no_oss_py310,-nomac,-no_mac,-mac_excluded,-v1only,-gpu,-tpu,-benchmark-test\n-build:macos_x86_pycpp_test_filters --build_tag_filters=-no_oss,-tf_tosa,-oss_excluded,-oss_serial,-no_oss_py38,-no_oss_py39,-no_oss_py310,-nomac,-no_mac,-mac_excluded,-v1only,-gpu,-tpu,-benchmark-test\n-build:macos_x86_pycpp_test_filters --keep_going --test_lang_filters=cc,py --test_size_filters=small,medium\n-build:macos_x86_pycpp_test --config=macos_x86_pycpp_test_filters -- //tensorflow/... //tensorflow/tools/pip_package:import_api_packages_test_cpu -//tensorflow/compiler/tf2tensorrt/... -//tensorflow/core/tpu/... -//tensorflow/go/... -//tensorflow/java/... -//tensorflow/tools/toolchains/... -//tensorflow/lite/... -//tensorflow/compiler/aot/...\n+common:macos_x86_pycpp_test_filters --test_tag_filters=-no_oss,-tf_tosa,-oss_excluded,-oss_serial,-no_oss_py38,-no_oss_py39,-no_oss_py310,-nomac,-no_mac,-mac_excluded,-v1only,-gpu,-tpu,-benchmark-test\n+common:macos_x86_pycpp_test_filters --build_tag_filters=-no_oss,-tf_tosa,-oss_excluded,-oss_serial,-no_oss_py38,-no_oss_py39,-no_oss_py310,-nomac,-no_mac,-mac_excluded,-v1only,-gpu,-tpu,-benchmark-test\n+common:macos_x86_pycpp_test_filters --keep_going --test_lang_filters=cc,py --test_size_filters=small,medium\n+common:macos_x86_pycpp_test --config=macos_x86_pycpp_test_filters -- //tensorflow/... //tensorflow/tools/pip_package:import_api_packages_test_cpu -//tensorflow/compiler/tf2tensorrt/... -//tensorflow/core/tpu/... -//tensorflow/go/... -//tensorflow/java/... -//tensorflow/tools/toolchains/... -//tensorflow/lite/... -//tensorflow/compiler/aot/...\n # CROSS-COMPILE MACOS X86 PYCPP\n-build:cross_compile_macos_x86_pycpp_test --config=macos_x86_pycpp_test\n-build:cross_compile_macos_x86_pycpp_test -//tensorflow/core/kernels:quantized_conv_ops_test -//tensorflow/core/kernels:quantized_matmul_op_test -//tensorflow/python/ops:quantized_conv_ops_test -//tensorflow/tools/graph_transforms:transforms_test -//tensorflow/python/tools:aot_compiled_test\n+common:cross_compile_macos_x86_pycpp_test --config=macos_x86_pycpp_test\n+common:cross_compile_macos_x86_pycpp_test -//tensorflow/core/kernels:quantized_conv_ops_test -//tensorflow/core/kernels:quantized_matmul_op_test -//tensorflow/python/ops:quantized_conv_ops_test -//tensorflow/tools/graph_transforms:transforms_test -//tensorflow/python/tools:aot_compiled_test\n # WINDOWS X86-64 CPU PYCPP\n-build:windows_x86_cpu_2022_pycpp_test_build_opts --copt=/d2ReducedOptimizeHugeFunctions --host_copt=/d2ReducedOptimizeHugeFunctions --dynamic_mode=off\n+common:windows_x86_cpu_2022_pycpp_test_build_opts --copt=/d2ReducedOptimizeHugeFunctions --host_copt=/d2ReducedOptimizeHugeFunctions --dynamic_mode=off\n test:windows_x86_cpu_2022_pycpp_test_filters --test_tag_filters=-no_windows,-windows_excluded,-no_oss,-tf_tosa,-oss_excluded,-gpu,-tpu,-benchmark-test,-v1only\n-build:windows_x86_cpu_2022_pycpp_test_filters --build_tag_filters=-no_windows,-windows_excluded,-no_oss,-tf_tosa,-oss_excluded,-benchmark-test,-v1only\n+common:windows_x86_cpu_2022_pycpp_test_filters --build_tag_filters=-no_windows,-windows_excluded,-no_oss,-tf_tosa,-oss_excluded,-benchmark-test,-v1only\n test:windows_x86_cpu_2022_pycpp_test_filters --test_lang_filters=cc,py --test_size_filters=small,medium --test_timeout=\"300,450,1200,3600\"\n test:windows_x86_cpu_2022_pycpp_test_opts --config=windows_x86_cpu_2022_pycpp_test_build_opts --build_tests_only\n test:windows_x86_cpu_2022_pycpp_test --config=windows_x86_cpu_2022_pycpp_test_opts --config=windows_x86_cpu_2022_pycpp_test_filters -- //tensorflow/... //tensorflow/tools/pip_package:import_api_packages_test_cpu -//tensorflow/java/... -//tensorflow/lite/... -//tensorflow/compiler/...\n@@ -946,13 +946,13 @@ test:windows_x86_cpu_2022_pycpp_test --config=windows_x86_cpu_2022_pycpp_test_op\n # flags seem to be actually used to specify the execution platform details. It\n # seems it is this way because these flags are old and predate the distinction\n # between host and execution platform.\n-build:cross_compile_base --config=clang_local\n-build:cross_compile_base --host_cpu=k8\n-build:cross_compile_base --host_crosstool_top=//tensorflow/tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n-build:cross_compile_base --extra_execution_platforms=//tensorflow/tools/toolchains/cross_compile/config:linux_x86_64\n+common:cross_compile_base --config=clang_local\n+common:cross_compile_base --host_cpu=k8\n+common:cross_compile_base --host_crosstool_top=//tensorflow/tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n+common:cross_compile_base --extra_execution_platforms=//tensorflow/tools/toolchains/cross_compile/config:linux_x86_64\n \n-build:rbe_cross_compile_base --config=rbe_base\n-build:rbe_cross_compile_base --remote_instance_name=projects/tensorflow-testing/instances/default_instance\n+common:rbe_cross_compile_base --config=rbe_base\n+common:rbe_cross_compile_base --remote_instance_name=projects/tensorflow-testing/instances/default_instance\n \n # Test-related settings below this point\n # We cannot run cross-compiled tests on the remote Linux x86 VMs so we need to\n@@ -961,49 +961,49 @@ test:rbe_cross_compile_base --strategy=TestRunner=local --build_tests_only\n test:rbe_cross_compile_base --verbose_failures=true --local_test_jobs=HOST_CPUS --test_output=errors\n \n # START LINUX AARCH64 CROSS-COMPILE CONFIGS\n-build:cross_compile_linux_arm64 --config=cross_compile_base\n+common:cross_compile_linux_arm64 --config=cross_compile_base\n \n # Set the target CPU to Aarch64\n-build:cross_compile_linux_arm64 --platforms=//tensorflow/tools/toolchains/cross_compile/config:linux_aarch64\n-build:cross_compile_linux_arm64 --cpu=aarch64\n-build:cross_compile_linux_arm64 --crosstool_top=//tensorflow/tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n+common:cross_compile_linux_arm64 --platforms=//tensorflow/tools/toolchains/cross_compile/config:linux_aarch64\n+common:cross_compile_linux_arm64 --cpu=aarch64\n+common:cross_compile_linux_arm64 --crosstool_top=//tensorflow/tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n \n # RBE cross-compile configs for Linux Aarch64\n-build:rbe_cross_compile_linux_arm64 --config=cross_compile_linux_arm64\n-build:rbe_cross_compile_linux_arm64 --config=rbe_cross_compile_base\n+common:rbe_cross_compile_linux_arm64 --config=cross_compile_linux_arm64\n+common:rbe_cross_compile_linux_arm64 --config=rbe_cross_compile_base\n test:rbe_cross_compile_linux_arm64 --config=rbe_cross_compile_base\n \n # END LINUX AARCH64 CROSS-COMPILE CONFIGS\n \n # START MACOS CROSS-COMPILE CONFIGS\n-build:cross_compile_macos_x86 --config=cross_compile_base\n-build:cross_compile_macos_x86 --config=nonccl\n+common:cross_compile_macos_x86 --config=cross_compile_base\n+common:cross_compile_macos_x86 --config=nonccl\n # Target Catalina (10.15) as the minimum supported OS\n-build:cross_compile_macos_x86 --action_env  MACOSX_DEPLOYMENT_TARGET=10.15\n+common:cross_compile_macos_x86 --action_env  MACOSX_DEPLOYMENT_TARGET=10.15\n \n # Set the target CPU to Darwin x86\n-build:cross_compile_macos_x86 --platforms=//tensorflow/tools/toolchains/cross_compile/config:darwin_x86_64\n-build:cross_compile_macos_x86 --cpu=darwin\n-build:cross_compile_macos_x86 --crosstool_top=//tensorflow/tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n+common:cross_compile_macos_x86 --platforms=//tensorflow/tools/toolchains/cross_compile/config:darwin_x86_64\n+common:cross_compile_macos_x86 --cpu=darwin\n+common:cross_compile_macos_x86 --crosstool_top=//tensorflow/tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n # When RBE cross-compiling for macOS, we need to explicitly register the\n # toolchain. Otherwise, oddly, RBE complains that a \"docker container must be\n # specified\".\n-build:cross_compile_macos_x86 --extra_toolchains=//tensorflow/tools/toolchains/cross_compile/config:macos-x86-cross-compile-cc-toolchain\n+common:cross_compile_macos_x86 --extra_toolchains=//tensorflow/tools/toolchains/cross_compile/config:macos-x86-cross-compile-cc-toolchain\n # Map --platforms=darwin_x86_64 to --cpu=darwin and vice-versa to make selects()\n # and transistions that use these flags work.\n-build:cross_compile_macos_x86 --platform_mappings=tensorflow/tools/toolchains/cross_compile/config/platform_mappings\n+common:cross_compile_macos_x86 --platform_mappings=tensorflow/tools/toolchains/cross_compile/config/platform_mappings\n \n # RBE cross-compile configs for Darwin x86\n-build:rbe_cross_compile_macos_x86 --config=cross_compile_macos_x86 --remote_download_minimal\n-build:rbe_cross_compile_macos_x86 --bes_backend=\"\" --bes_results_url=\"\" --bes_timeout=\"0s\"\n-build:rbe_cross_compile_macos_x86 --experimental_remote_build_event_upload=\"minimal\"\n-build:rbe_cross_compile_macos_x86 --config=rbe_cross_compile_base\n-build:rbe_cross_compile_macos_x86 --bes_upload_mode=nowait_for_upload_complete\n+common:rbe_cross_compile_macos_x86 --config=cross_compile_macos_x86 --remote_download_minimal\n+common:rbe_cross_compile_macos_x86 --bes_backend=\"\" --bes_results_url=\"\" --bes_timeout=\"0s\"\n+common:rbe_cross_compile_macos_x86 --experimental_remote_build_event_upload=\"minimal\"\n+common:rbe_cross_compile_macos_x86 --config=rbe_cross_compile_base\n+common:rbe_cross_compile_macos_x86 --bes_upload_mode=nowait_for_upload_complete\n test:rbe_cross_compile_macos_x86 --config=rbe_cross_compile_base\n # Increase the test timeout as tests often take longer on mac.\n test:rbe_cross_compile_macos_x86 --test_timeout=300,450,1200,3600\n # Limit jobs to 100 to avoid running into \"out of memory\" issues (b/316266643)\n-build:rbe_cross_compile_macos_x86 --jobs=100\n+common:rbe_cross_compile_macos_x86 --jobs=100\n test:rbe_cross_compile_macos_x86 --jobs=100\n # END MACOS CROSS-COMPILE CONFIGS\n # END CROSS-COMPILE CONFIGS"
        },
        {
            "sha": "486de02be8abdde27c053fbdc71c4d5f02dc9cdf",
            "filename": "third_party/xla/.bazelrc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2a5f830ee84d46261aea443163c15dc7119038fe/third_party%2Fxla%2F.bazelrc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2a5f830ee84d46261aea443163c15dc7119038fe/third_party%2Fxla%2F.bazelrc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2F.bazelrc?ref=2a5f830ee84d46261aea443163c15dc7119038fe",
            "patch": "@@ -1,13 +1,13 @@\n # Disable Bzlmod for now\n common --noenable_bzlmod\n \n-build --incompatible_enable_cc_toolchain_resolution\n-build --repo_env USE_HERMETIC_CC_TOOLCHAIN=1\n+common --incompatible_enable_cc_toolchain_resolution\n+common --repo_env USE_HERMETIC_CC_TOOLCHAIN=1\n \n # TODO: Migrate for https://github.com/bazelbuild/bazel/issues/7260\n-build:clang_local --noincompatible_enable_cc_toolchain_resolution\n-build:clang_local --@rules_ml_toolchain//common:enable_hermetic_cc=False\n-build:clang_local --repo_env USE_HERMETIC_CC_TOOLCHAIN=0\n+common:clang_local --noincompatible_enable_cc_toolchain_resolution\n+common:clang_local --@rules_ml_toolchain//common:enable_hermetic_cc=False\n+common:clang_local --repo_env USE_HERMETIC_CC_TOOLCHAIN=0\n \n # Load the TensorFlow bazelrc\n import %workspace%/tensorflow.bazelrc"
        },
        {
            "sha": "c82ed705f24bc87b7a4d4ef0adef4b38936a0429",
            "filename": "third_party/xla/tensorflow.bazelrc",
            "status": "modified",
            "additions": 327,
            "deletions": 327,
            "changes": 654,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2a5f830ee84d46261aea443163c15dc7119038fe/third_party%2Fxla%2Ftensorflow.bazelrc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2a5f830ee84d46261aea443163c15dc7119038fe/third_party%2Fxla%2Ftensorflow.bazelrc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Ftensorflow.bazelrc?ref=2a5f830ee84d46261aea443163c15dc7119038fe",
            "patch": "@@ -50,46 +50,46 @@\n # For projects which use TensorFlow as part of a Bazel build process, putting\n # nothing in a bazelrc will default to a monolithic build. The following line\n # opts in to modular op registration support by default.\n-build --define framework_shared_object=true\n-build --define tsl_protobuf_header_only=true\n+common --define framework_shared_object=true\n+common --define tsl_protobuf_header_only=true\n \n-build --define=allow_oversize_protos=true\n+common --define=allow_oversize_protos=true\n \n-build --spawn_strategy=standalone\n-build -c opt\n+common --spawn_strategy=standalone\n+common -c opt\n \n-build --repo_env=USE_PYWRAP_RULES=True\n-build --copt=-DGRPC_BAZEL_BUILD\n-build --host_copt=-DGRPC_BAZEL_BUILD\n-build --action_env=GRPC_BAZEL_RUNTIME=1\n-build --repo_env=PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=upb\n-build --action_env=PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=upb\n+common --repo_env=USE_PYWRAP_RULES=True\n+common --copt=-DGRPC_BAZEL_BUILD\n+common --host_copt=-DGRPC_BAZEL_BUILD\n+common --action_env=GRPC_BAZEL_RUNTIME=1\n+common --repo_env=PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=upb\n+common --action_env=PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=upb\n # Some targets have the same py source file, but use different\n # configurations via `requires-` tags. This results in an action\n # conflict when precompiling. Disable to avoid that problem.\n # See https://github.com/bazel-contrib/rules_python/issues/2445\n-build --@rules_python//python/config_settings:precompile=force_disabled\n+common --@rules_python//python/config_settings:precompile=force_disabled\n \n # Do not do this. This is how gRPC builds itself by default, but we don't want\n # that as it would link protobuf into its own set of dynamic libraries, which\n # would conflict with our protobuf linkage.\n-#build --define=use_fast_cpp_protos=true\n+#common --define=use_fast_cpp_protos=true\n \n # For local build, without dependency on rbe\n-build:linux_cpu --config=avx_linux\n-build:linux_cpu --linkopt=-lrt\n-build:linux_cpu --host_linkopt=-lrt\n-build:linux_cpu --linkopt=-lm\n-build:linux_cpu --host_linkopt=-lm\n-build:linux_cpu --config=avx_linux\n-build:linux_cpu --copt=-Wno-error=unused-command-line-argument\n-build:linux_cpu --copt=-Wno-gnu-offsetof-extensions\n+common:linux_cpu --config=avx_linux\n+common:linux_cpu --linkopt=-lrt\n+common:linux_cpu --host_linkopt=-lrt\n+common:linux_cpu --linkopt=-lm\n+common:linux_cpu --host_linkopt=-lm\n+common:linux_cpu --config=avx_linux\n+common:linux_cpu --copt=-Wno-error=unused-command-line-argument\n+common:linux_cpu --copt=-Wno-gnu-offsetof-extensions\n \n # Make Bazel print out all options from rc files.\n common --announce_rc\n \n # TODO(mihaimaruseac): Document this option or remove if no longer needed\n-build --define=grpc_no_ares=true\n+common --define=grpc_no_ares=true\n \n # See https://github.com/bazelbuild/bazel/issues/7362 for information on what\n # --incompatible_remove_legacy_whole_archive flag does.\n@@ -103,18 +103,18 @@ build --define=grpc_no_ares=true\n #\n # TODO: Remove the following two lines once TF doesn't depend on Bazel wrapping\n # all library archives in -whole_archive -no_whole_archive.\n-build --noincompatible_remove_legacy_whole_archive\n-build --features=-force_no_whole_archive\n+common --noincompatible_remove_legacy_whole_archive\n+common --features=-force_no_whole_archive\n \n # TODO(mihaimaruseac): Document this option or remove if no longer needed\n-build --enable_platform_specific_config\n+common --enable_platform_specific_config\n \n # TODO(mihaimaruseac): Document this option or remove if no longer needed\n-build --config=short_logs\n+common --config=short_logs\n \n # Precompiling results in some action conflicts. Disable it for now until\n # the problematic targets are fixed.\n-build --@rules_python//python/config_settings:precompile=force_disabled\n+common --@rules_python//python/config_settings:precompile=force_disabled\n \n # TF now has `cc_shared_library` targets, so it needs the experimental flag\n # TODO(rostam): Remove when `cc_shared_library` is enabled by default\n@@ -136,74 +136,74 @@ test --test_env=\"GTEST_INSTALL_FAILURE_SIGNAL_HANDLER=1\"\n # Default options should come above this line.\n \n # Sets the default Apple platform to macOS.\n-build:macos --apple_platform_type=macos\n+common:macos --apple_platform_type=macos\n \n # Use cc toolchains from apple_support for Apple builds.\n # https://github.com/bazelbuild/apple_support/tree/master?tab=readme-ov-file#bazel-6-setup\n-build:macos --apple_crosstool_top=@local_config_apple_cc//:toolchain\n-build:macos --crosstool_top=@local_config_apple_cc//:toolchain\n-build:macos --host_crosstool_top=@local_config_apple_cc//:toolchain\n+common:macos --apple_crosstool_top=@local_config_apple_cc//:toolchain\n+common:macos --crosstool_top=@local_config_apple_cc//:toolchain\n+common:macos --host_crosstool_top=@local_config_apple_cc//:toolchain\n \n # gRPC on MacOS requires this #define\n-build:macos --copt=-DGRPC_BAZEL_BUILD\n+common:macos --copt=-DGRPC_BAZEL_BUILD\n \n # Avoid hitting command line argument limit\n-build:macos --features=archive_param_file\n+common:macos --features=archive_param_file\n \n # Settings for MacOS on ARM CPUs.\n-build:macos_arm64 --cpu=darwin_arm64\n-build:macos_arm64 --macos_minimum_os=11.0\n-build:macos_arm64 --platforms=@build_bazel_apple_support//platforms:darwin_arm64\n+common:macos_arm64 --cpu=darwin_arm64\n+common:macos_arm64 --macos_minimum_os=11.0\n+common:macos_arm64 --platforms=@build_bazel_apple_support//platforms:darwin_arm64\n \n # Config to use a mostly-static build and disable modular op registration\n # support (this will revert to loading TensorFlow with RTLD_GLOBAL in Python).\n # By default, TensorFlow will build with a dependence on\n # //tensorflow:libtensorflow_framework.so.\n-build:monolithic --define framework_shared_object=false\n-build:monolithic --define tsl_protobuf_header_only=false\n-build:monolithic --experimental_link_static_libraries_once=false  # b/229868128\n+common:monolithic --define framework_shared_object=false\n+common:monolithic --define tsl_protobuf_header_only=false\n+common:monolithic --experimental_link_static_libraries_once=false  # b/229868128\n \n # Please note that MKL on MacOS is still not supported.\n # If you would like to use a local MKL instead of downloading, please set the\n # environment variable \"TF_MKL_ROOT\" every time before build.\n-build:mkl --define=build_with_mkl=true --define=enable_mkl=true\n-build:mkl --define=tensorflow_mkldnn_contraction_kernel=0\n-build:mkl --define=build_with_openmp=true\n-build:mkl -c opt\n+common:mkl --define=build_with_mkl=true --define=enable_mkl=true\n+common:mkl --define=tensorflow_mkldnn_contraction_kernel=0\n+common:mkl --define=build_with_openmp=true\n+common:mkl -c opt\n \n # config to build OneDNN backend with a user specified threadpool.\n-build:mkl_threadpool --define=build_with_mkl=true --define=enable_mkl=true\n-build:mkl_threadpool --define=tensorflow_mkldnn_contraction_kernel=0\n-build:mkl_threadpool --define=build_with_mkl_opensource=true\n-build:mkl_threadpool -c opt\n+common:mkl_threadpool --define=build_with_mkl=true --define=enable_mkl=true\n+common:mkl_threadpool --define=tensorflow_mkldnn_contraction_kernel=0\n+common:mkl_threadpool --define=build_with_mkl_opensource=true\n+common:mkl_threadpool -c opt\n \n # Config setting to build oneDNN with Compute Library for the Arm Architecture (ACL).\n # with Eigen threadpool support\n-build:mkl_aarch64_threadpool --define=build_with_mkl_aarch64=true\n-build:mkl_aarch64_threadpool -c opt\n+common:mkl_aarch64_threadpool --define=build_with_mkl_aarch64=true\n+common:mkl_aarch64_threadpool -c opt\n \n # This is an alias for the mkl_aarch64_threadpool build.\n-build:mkl_aarch64 --config=mkl_aarch64_threadpool\n+common:mkl_aarch64 --config=mkl_aarch64_threadpool\n \n # Default CUDA, CUDNN and NVSHMEM versions.\n-build:cuda_version --repo_env=HERMETIC_CUDA_VERSION=\"12.9.1\"\n-build:cuda_version --repo_env=HERMETIC_CUDNN_VERSION=\"9.8.0\"\n-build:cuda_version --repo_env=HERMETIC_NVSHMEM_VERSION=\"3.2.5\"\n+common:cuda_version --repo_env=HERMETIC_CUDA_VERSION=\"12.9.1\"\n+common:cuda_version --repo_env=HERMETIC_CUDNN_VERSION=\"9.8.0\"\n+common:cuda_version --repo_env=HERMETIC_NVSHMEM_VERSION=\"3.2.5\"\n \n # CUDA: This config refers to building CUDA op kernels with nvcc.\n-build:cuda --repo_env TF_NEED_CUDA=1\n-build:cuda --@rules_ml_toolchain//common:enable_cuda\n-build:cuda --config=cuda_version\n+common:cuda --repo_env TF_NEED_CUDA=1\n+common:cuda --@rules_ml_toolchain//common:enable_cuda\n+common:cuda --config=cuda_version\n # This flag is needed to include CUDA libraries.\n-build:cuda --@local_config_cuda//cuda:include_cuda_libs=true\n+common:cuda --@local_config_cuda//cuda:include_cuda_libs=true\n \n # This configuration is used for building the wheels.\n-build:cuda_wheel --@local_config_cuda//cuda:include_cuda_libs=false\n+common:cuda_wheel --@local_config_cuda//cuda:include_cuda_libs=false\n \n # CUDA: This config refers to building CUDA op kernels with clang.\n-build:cuda_clang --config=cuda\n-build:cuda_clang --@local_config_cuda//:cuda_compiler=clang\n-build:cuda_clang --copt=-Qunused-arguments\n+common:cuda_clang --config=cuda\n+common:cuda_clang --@local_config_cuda//:cuda_compiler=clang\n+common:cuda_clang --copt=-Qunused-arguments\n # Select supported compute capabilities (supported graphics cards).\n # This is the same as the official TensorFlow builds.\n # See https://developer.nvidia.com/cuda-gpus#compute\n@@ -212,375 +212,375 @@ build:cuda_clang --copt=-Qunused-arguments\n # release while SASS is only forward compatible inside the current\n # major release. Example: sm_80 kernels can run on sm_89 GPUs but\n # not on sm_90 GPUs. compute_80 kernels though can also run on sm_90 GPUs.\n-build:cuda_clang --repo_env=HERMETIC_CUDA_COMPUTE_CAPABILITIES=\"sm_60,sm_70,sm_80,sm_89,compute_90\"\n+common:cuda_clang --repo_env=HERMETIC_CUDA_COMPUTE_CAPABILITIES=\"sm_60,sm_70,sm_80,sm_89,compute_90\"\n # Permit newer CUDA versions than Clang is aware of\n-build:cuda_clang --copt=\"-Wno-unknown-cuda-version\"\n+common:cuda_clang --copt=\"-Wno-unknown-cuda-version\"\n # Set lld as the linker.\n-build:cuda_clang --host_linkopt=\"-fuse-ld=lld\"\n-build:cuda_clang --host_linkopt=\"-lm\"\n-build:cuda_clang --linkopt=\"-fuse-ld=lld\"\n-build:cuda_clang --linkopt=\"-lm\"\n+common:cuda_clang --host_linkopt=\"-fuse-ld=lld\"\n+common:cuda_clang --host_linkopt=\"-lm\"\n+common:cuda_clang --linkopt=\"-fuse-ld=lld\"\n+common:cuda_clang --linkopt=\"-lm\"\n \n-build:cuda_clang_local --config=cuda_clang\n-build:cuda_clang_local --config=clang_local\n-build:cuda_clang_local --crosstool_top=@local_config_cuda//crosstool:toolchain\n+common:cuda_clang_local --config=cuda_clang\n+common:cuda_clang_local --config=clang_local\n+common:cuda_clang_local --crosstool_top=@local_config_cuda//crosstool:toolchain\n \n # Set up compilation CUDA version and paths and use the CUDA Clang toolchain.\n-build:cuda_clang_official --config=cuda_clang\n-build:cuda_clang_official --config=cuda_version\n-build:cuda_clang_official --action_env=CLANG_CUDA_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n-build:cuda_clang_official --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n+common:cuda_clang_official --config=cuda_clang\n+common:cuda_clang_official --config=cuda_version\n+common:cuda_clang_official --action_env=CLANG_CUDA_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n+common:cuda_clang_official --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n \n # Build with nvcc for CUDA and clang for host\n-build:cuda_nvcc --config=cuda\n-build:cuda_nvcc --action_env=TF_NVCC_CLANG=\"1\"\n-build:cuda_nvcc --@local_config_cuda//:cuda_compiler=nvcc\n+common:cuda_nvcc --config=cuda\n+common:cuda_nvcc --action_env=TF_NVCC_CLANG=\"1\"\n+common:cuda_nvcc --@local_config_cuda//:cuda_compiler=nvcc\n # Old config for backward compatibility\n-build:nvcc_clang --config=cuda_nvcc\n+common:nvcc_clang --config=cuda_nvcc\n \n # Deprecated cuda_nvcc config with non-hermetic toolchains\n-build:cuda_nvcc_clang_local --config=cuda_nvcc\n-build:cuda_nvcc_clang_local --config=clang_local\n-build:cuda_nvcc_clang_local --crosstool_top=@local_config_cuda//crosstool:toolchain\n+common:cuda_nvcc_clang_local --config=cuda_nvcc\n+common:cuda_nvcc_clang_local --config=clang_local\n+common:cuda_nvcc_clang_local --crosstool_top=@local_config_cuda//crosstool:toolchain\n \n # Debug config. Enables Bazel's 'dbg' compilation mode, build with debugging enabled\n-build:dbg -c dbg\n+common:dbg -c dbg\n # Compiling all dependencies with debug info can cause linker failures\n # and significantly increase binary size.\n # The following setting disables debug info (-g0) for all files,\n # except those under the xla/* path. This helps reduce the size of debug sections\n # in the ELF binary, which can otherwise become too large and lead to errors.\n # For more details, see: https://github.com/tensorflow/tensorflow/issues/48919.\n-build:dbg --per_file_copt=+.*,-xla.*@-g0\n+common:dbg --per_file_copt=+.*,-xla.*@-g0\n # AWS SDK must be compiled in release mode. see: https://github.com/tensorflow/tensorflow/issues/37498\n-build:dbg --copt -DDEBUG_BUILD\n-\n-build:asan --strip=never\n-build:asan --copt -fsanitize=address\n-build:asan --copt -DADDRESS_SANITIZER\n-build:asan --copt -O1\n-build:asan --copt -g\n-build:asan --copt -fno-omit-frame-pointer\n-build:asan --linkopt -fsanitize=address\n-\n-build:rocm_base --config=clang_local\n-build:rocm_base --copt=-Wno-gnu-offsetof-extensions\n-build:rocm_base --crosstool_top=@local_config_rocm//crosstool:toolchain\n-build:rocm_base --define=using_rocm_hipcc=true\n-build:rocm_base --define=tensorflow_mkldnn_contraction_kernel=0\n-build:rocm_base --define=xnn_enable_avxvnniint8=false\n-build:rocm_base --define=xnn_enable_avx512fp16=false\n-build:rocm_base --repo_env TF_NEED_ROCM=1\n+common:dbg --copt -DDEBUG_BUILD\n+\n+common:asan --strip=never\n+common:asan --copt -fsanitize=address\n+common:asan --copt -DADDRESS_SANITIZER\n+common:asan --copt -O1\n+common:asan --copt -g\n+common:asan --copt -fno-omit-frame-pointer\n+common:asan --linkopt -fsanitize=address\n+\n+common:rocm_base --config=clang_local\n+common:rocm_base --copt=-Wno-gnu-offsetof-extensions\n+common:rocm_base --crosstool_top=@local_config_rocm//crosstool:toolchain\n+common:rocm_base --define=using_rocm_hipcc=true\n+common:rocm_base --define=tensorflow_mkldnn_contraction_kernel=0\n+common:rocm_base --define=xnn_enable_avxvnniint8=false\n+common:rocm_base --define=xnn_enable_avx512fp16=false\n+common:rocm_base --repo_env TF_NEED_ROCM=1\n \n # Depraceted, will be removed once all build/test scripts are migrated from --config=rocm.\n-build:rocm --config=rocm_base \n+common:rocm --config=rocm_base \n \n-build:rocm_gcc --config=rocm_base\n-build:rocm_gcc --copt=-Wno-stringop-truncation\n+common:rocm_gcc --config=rocm_base\n+common:rocm_gcc --copt=-Wno-stringop-truncation\n \n-build:rocm_clang_official --config=rocm_base\n-build:rocm_clang_official --action_env=CLANG_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n-build:rocm_clang_official --action_env=TF_ROCM_CLANG=\"1\"\n-build:rocm_clang_official --linkopt=\"-fuse-ld=lld\"\n-build:rocm_clang_official --host_linkopt=\"-fuse-ld=lld\"\n+common:rocm_clang_official --config=rocm_base\n+common:rocm_clang_official --action_env=CLANG_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n+common:rocm_clang_official --action_env=TF_ROCM_CLANG=\"1\"\n+common:rocm_clang_official --linkopt=\"-fuse-ld=lld\"\n+common:rocm_clang_official --host_linkopt=\"-fuse-ld=lld\"\n \n-build:rocm_ci --config=rocm_clang_official\n+common:rocm_ci --config=rocm_clang_official\n \n-build:rocm_ci_hermetic --config=rocm_clang_official\n-build:rocm_ci_hermetic --repo_env=\"OS=ubuntu_22.04\"\n-build:rocm_ci_hermetic --repo_env=\"ROCM_VERSION=6.4.1\"\n-build:rocm_ci_hermetic --@local_config_rocm//rocm:rocm_path_type=hermetic\n+common:rocm_ci_hermetic --config=rocm_clang_official\n+common:rocm_ci_hermetic --repo_env=\"OS=ubuntu_22.04\"\n+common:rocm_ci_hermetic --repo_env=\"ROCM_VERSION=6.4.1\"\n+common:rocm_ci_hermetic --@local_config_rocm//rocm:rocm_path_type=hermetic\n \n # This config option is used for SYCL as GPU backend.\n # SYCL Configuration (non-hermetic)\n-build:sycl --crosstool_top=@local_config_sycl//crosstool:toolchain\n-build:sycl --define=using_sycl=true\n-build:sycl --define=tensorflow_mkldnn_contraction_kernel=0\n-build:sycl --repo_env=TF_NEED_SYCL=1\n-build:sycl --cxxopt=-std=c++17\n-build:sycl --host_cxxopt=-std=c++17\n-build:sycl --repo_env=SYCL_BUILD_HERMETIC=0\n-build:sycl --config=clang_local\n+common:sycl --crosstool_top=@local_config_sycl//crosstool:toolchain\n+common:sycl --define=using_sycl=true\n+common:sycl --define=tensorflow_mkldnn_contraction_kernel=0\n+common:sycl --repo_env=TF_NEED_SYCL=1\n+common:sycl --cxxopt=-std=c++17\n+common:sycl --host_cxxopt=-std=c++17\n+common:sycl --repo_env=SYCL_BUILD_HERMETIC=0\n+common:sycl --config=clang_local\n \n # Enable Clang for host and icpx for SYCL\n-build:icpx_clang --repo_env TF_ICPX_CLANG=1\n-build:icpx_clang --action_env=CLANG_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n-build:icpx_clang --linkopt=\"-fuse-ld=lld\"\n-build:icpx_clang --linkopt=\"-lm\"\n-build:icpx_clang --host_linkopt=\"-lm\"\n-build:icpx_clang --host_linkopt=\"-fuse-ld=lld\"\n-build:icpx_clang --copt=-fclang-abi-compat=17\n+common:icpx_clang --repo_env TF_ICPX_CLANG=1\n+common:icpx_clang --action_env=CLANG_COMPILER_PATH=\"/usr/lib/llvm-18/bin/clang\"\n+common:icpx_clang --linkopt=\"-fuse-ld=lld\"\n+common:icpx_clang --linkopt=\"-lm\"\n+common:icpx_clang --host_linkopt=\"-lm\"\n+common:icpx_clang --host_linkopt=\"-fuse-ld=lld\"\n+common:icpx_clang --copt=-fclang-abi-compat=17\n \n # Hermetic SYCL Configuration\n-build:sycl_hermetic --config=sycl\n-build:sycl_hermetic --repo_env=SYCL_BUILD_HERMETIC=1\n-build:sycl_hermetic --repo_env=ONEAPI_VERSION=2025.1\n-build:sycl_hermetic --repo_env=OS=ubuntu_24.10\n+common:sycl_hermetic --config=sycl\n+common:sycl_hermetic --repo_env=SYCL_BUILD_HERMETIC=1\n+common:sycl_hermetic --repo_env=ONEAPI_VERSION=2025.1\n+common:sycl_hermetic --repo_env=OS=ubuntu_24.10\n \n # Options to disable default on features\n-build:nonccl --define=no_nccl_support=true\n+common:nonccl --define=no_nccl_support=true\n \n # Don't trigger --config=<host platform> when cross-compiling.\n-build:linux --host_copt=-w\n-build:macos --copt=-w\n-build:windows --copt=/W0\n-build:windows --host_copt=/W0\n+common:linux --host_copt=-w\n+common:macos --copt=-w\n+common:windows --copt=/W0\n+common:windows --host_copt=/W0\n \n # Linux ARM64 specific options\n-build:linux_arm64 --copt=\"-mtune=generic\" --copt=\"-march=armv8-a\" --copt=\"-O3\"\n+common:linux_arm64 --copt=\"-mtune=generic\" --copt=\"-march=armv8-a\" --copt=\"-O3\"\n \n \n # On Windows, `__cplusplus` is wrongly defined without this switch\n # See https://devblogs.microsoft.com/cppblog/msvc-now-correctly-reports-__cplusplus/\n-build:windows --copt=/Zc:__cplusplus\n-build:windows --host_copt=/Zc:__cplusplus\n+common:windows --copt=/Zc:__cplusplus\n+common:windows --host_copt=/Zc:__cplusplus\n \n # Tensorflow uses M_* math constants that only get defined by MSVC headers if\n # _USE_MATH_DEFINES is defined.\n-build:windows --copt=/D_USE_MATH_DEFINES\n-build:windows --host_copt=/D_USE_MATH_DEFINES\n+common:windows --copt=/D_USE_MATH_DEFINES\n+common:windows --host_copt=/D_USE_MATH_DEFINES\n \n # Windows has a relatively short command line limit, which TF has begun to hit.\n # See https://docs.bazel.build/versions/main/windows.html\n-build:windows --features=compiler_param_file\n-build:windows --features=archive_param_file\n+common:windows --features=compiler_param_file\n+common:windows --features=archive_param_file\n \n # Speed Windows compile times. Available in VS 16.4 (we are on 16.11). See\n # https://groups.google.com/a/tensorflow.org/d/topic/build/SsW98Eo7l3o/discussion\n-build:windows --copt=/d2ReducedOptimizeHugeFunctions\n-build:windows --host_copt=/d2ReducedOptimizeHugeFunctions\n+common:windows --copt=/d2ReducedOptimizeHugeFunctions\n+common:windows --host_copt=/d2ReducedOptimizeHugeFunctions\n \n # Before VS 2017 15.8, the member \"type\" would non-conformingly have an\n # alignment of only alignof(max_align_t). VS 2017 15.8 was fixed to handle this\n # correctly, but the fix inherently changes layout and breaks binary\n # compatibility (*only* for uses of aligned_storage with extended alignments).\n-build:windows --copt=-D_ENABLE_EXTENDED_ALIGNED_STORAGE\n-build:windows --host_copt=-D_ENABLE_EXTENDED_ALIGNED_STORAGE\n+common:windows --copt=-D_ENABLE_EXTENDED_ALIGNED_STORAGE\n+common:windows --host_copt=-D_ENABLE_EXTENDED_ALIGNED_STORAGE\n \n # Enable the runfiles symlink tree on Windows. This makes it possible to build\n # the pip package on Windows without an intermediate data-file archive, as the\n # build_pip_package script in its current form (as of Aug 2023) uses the\n # runfiles symlink tree to decide what to put into the Python wheel.\n startup --windows_enable_symlinks\n-build:windows --enable_runfiles\n-build:windows --nobuild_python_zip\n-build:windows --dynamic_mode=off\n+common:windows --enable_runfiles\n+common:windows --nobuild_python_zip\n+common:windows --dynamic_mode=off\n \n # Default paths for TF_SYSTEM_LIBS\n-build:linux --define=PREFIX=/usr\n-build:linux --define=LIBDIR=$(PREFIX)/lib\n-build:linux --define=INCLUDEDIR=$(PREFIX)/include\n-build:linux --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include\n-build:macos --define=PREFIX=/usr\n-build:macos --define=LIBDIR=$(PREFIX)/lib\n-build:macos --define=INCLUDEDIR=$(PREFIX)/include\n-build:macos --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include\n+common:linux --define=PREFIX=/usr\n+common:linux --define=LIBDIR=$(PREFIX)/lib\n+common:linux --define=INCLUDEDIR=$(PREFIX)/include\n+common:linux --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include\n+common:macos --define=PREFIX=/usr\n+common:macos --define=LIBDIR=$(PREFIX)/lib\n+common:macos --define=INCLUDEDIR=$(PREFIX)/include\n+common:macos --define=PROTOBUF_INCLUDE_PATH=$(PREFIX)/include\n # TF_SYSTEM_LIBS do not work on windows.\n \n # By default, build TF in C++ 17 mode.\n-build:linux --cxxopt=-std=c++17\n-build:linux --host_cxxopt=-std=c++17\n-build:macos --cxxopt=-std=c++17\n-build:macos --host_cxxopt=-std=c++17\n-build:windows --cxxopt=/std:c++17\n-build:windows --host_cxxopt=/std:c++17\n+common:linux --cxxopt=-std=c++17\n+common:linux --host_cxxopt=-std=c++17\n+common:macos --cxxopt=-std=c++17\n+common:macos --host_cxxopt=-std=c++17\n+common:windows --cxxopt=/std:c++17\n+common:windows --host_cxxopt=/std:c++17\n \n # On windows, we still link everything into a single DLL.\n-build:windows --config=monolithic\n+common:windows --config=monolithic\n \n # Make sure to include as little of windows.h as possible\n-build:windows --copt=-DWIN32_LEAN_AND_MEAN\n-build:windows --host_copt=-DWIN32_LEAN_AND_MEAN\n-build:windows --copt=-DNOGDI\n-build:windows --host_copt=-DNOGDI\n+common:windows --copt=-DWIN32_LEAN_AND_MEAN\n+common:windows --host_copt=-DWIN32_LEAN_AND_MEAN\n+common:windows --copt=-DNOGDI\n+common:windows --host_copt=-DNOGDI\n \n # MSVC (Windows): Standards-conformant preprocessor mode\n # See https://docs.microsoft.com/en-us/cpp/preprocessor/preprocessor-experimental-overview\n-build:windows --copt=/Zc:preprocessor\n-build:windows --host_copt=/Zc:preprocessor\n+common:windows --copt=/Zc:preprocessor\n+common:windows --host_copt=/Zc:preprocessor\n \n # Misc build options we need for windows.\n-build:windows --linkopt=/DEBUG\n-build:windows --host_linkopt=/DEBUG\n-build:windows --linkopt=/OPT:REF\n-build:windows --host_linkopt=/OPT:REF\n-build:windows --linkopt=/OPT:ICF\n-build:windows --host_linkopt=/OPT:ICF\n+common:windows --linkopt=/DEBUG\n+common:windows --host_linkopt=/DEBUG\n+common:windows --linkopt=/OPT:REF\n+common:windows --host_linkopt=/OPT:REF\n+common:windows --linkopt=/OPT:ICF\n+common:windows --host_linkopt=/OPT:ICF\n \n # Verbose failure logs when something goes wrong\n-build:windows --verbose_failures\n+common:windows --verbose_failures\n \n # Work around potential issues with large command lines on windows.\n # See: https://github.com/bazelbuild/bazel/issues/5163\n-build:windows --features=compiler_param_file\n+common:windows --features=compiler_param_file\n \n # Do not risk cache corruption. See:\n # https://github.com/bazelbuild/bazel/issues/3360\n-build:linux --experimental_guard_against_concurrent_changes\n+common:linux --experimental_guard_against_concurrent_changes\n \n # Configure short or long logs\n-build:short_logs --output_filter=DONT_MATCH_ANYTHING\n-build:verbose_logs --output_filter=\n+common:short_logs --output_filter=DONT_MATCH_ANYTHING\n+common:verbose_logs --output_filter=\n \n # Instruction set optimizations\n # TODO(gunan): Create a feature in toolchains for avx/avx2 to\n #   avoid having to define linux/win separately.\n-build:avx_linux --copt=-mavx\n-build:avx_linux --host_copt=-mavx\n-build:avx_win --copt=/arch:AVX\n-\n-build:win_clang_base --@com_google_protobuf//build_defs:use_dlls=True\n-build:win_clang_base --@com_google_absl//absl:use_dlls=True\n-build:win_clang_base --linkopt=/demangle:no --host_linkopt=/demangle:no\n-build:win_clang_base --linkopt=/errorlimit:0 --host_linkopt=/errorlimit:0\n-build:win_clang_base --copt=/clang:-Weverything\n-build:win_clang_base --host_copt=/clang:-Weverything\n-build:win_clang_base --compiler=clang-cl\n-build:win_clang_base --linkopt=/FORCE:MULTIPLE\n-build:win_clang_base --host_linkopt=/FORCE:MULTIPLE\n-build:win_clang_base --action_env=PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW\n+common:avx_linux --copt=-mavx\n+common:avx_linux --host_copt=-mavx\n+common:avx_win --copt=/arch:AVX\n+\n+common:win_clang_base --@com_google_protobuf//build_defs:use_dlls=True\n+common:win_clang_base --@com_google_absl//absl:use_dlls=True\n+common:win_clang_base --linkopt=/demangle:no --host_linkopt=/demangle:no\n+common:win_clang_base --linkopt=/errorlimit:0 --host_linkopt=/errorlimit:0\n+common:win_clang_base --copt=/clang:-Weverything\n+common:win_clang_base --host_copt=/clang:-Weverything\n+common:win_clang_base --compiler=clang-cl\n+common:win_clang_base --linkopt=/FORCE:MULTIPLE\n+common:win_clang_base --host_linkopt=/FORCE:MULTIPLE\n+common:win_clang_base --action_env=PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW\n test:win_clang_base --linkopt=/FORCE:MULTIPLE\n test:win_clang_base --host_linkopt=/FORCE:MULTIPLE\n test:win_clang_base --build_tests_only --keep_going --test_output=errors --verbose_failures=true --test_summary=short\n \n-build:win_clang --config=win_clang_base\n-build:win_clang --extra_toolchains=@local_config_cc//:cc-toolchain-x64_windows-clang-cl\n-build:win_clang --extra_execution_platforms=//tensorflow/tools/toolchains/win:x64_windows-clang-cl\n-build:win_clang --host_platform=//tensorflow/tools/toolchains/win:x64_windows-clang-cl\n+common:win_clang --config=win_clang_base\n+common:win_clang --extra_toolchains=@local_config_cc//:cc-toolchain-x64_windows-clang-cl\n+common:win_clang --extra_execution_platforms=//tensorflow/tools/toolchains/win:x64_windows-clang-cl\n+common:win_clang --host_platform=//tensorflow/tools/toolchains/win:x64_windows-clang-cl\n \n-build:windows_x86_cpu_2022 --config=win_clang_base\n-build:windows_x86_cpu_2022 --crosstool_top=\"//tensorflow/tools/toolchains/win2022/20241118:toolchain\"\n-build:windows_x86_cpu_2022 --extra_toolchains=\"//tensorflow/tools/toolchains/win2022/20241118:cc-toolchain-x64_windows-clang-cl\"\n-build:windows_x86_cpu_2022 --extra_execution_platforms=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n-build:windows_x86_cpu_2022 --host_platform=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n-build:windows_x86_cpu_2022 --platforms=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n+common:windows_x86_cpu_2022 --config=win_clang_base\n+common:windows_x86_cpu_2022 --crosstool_top=\"//tensorflow/tools/toolchains/win2022/20241118:toolchain\"\n+common:windows_x86_cpu_2022 --extra_toolchains=\"//tensorflow/tools/toolchains/win2022/20241118:cc-toolchain-x64_windows-clang-cl\"\n+common:windows_x86_cpu_2022 --extra_execution_platforms=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n+common:windows_x86_cpu_2022 --host_platform=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n+common:windows_x86_cpu_2022 --platforms=\"//tensorflow/tools/toolchains/win2022:windows_ltsc2022_clang\"\n \n # Options to build TensorFlow 1.x or 2.x.\n # TODO(kanglan): Change v2's define to default behavior\n-build:v2 --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\n+common:v2 --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\n \n # Enable all targets in XLA\n-build:cpu_cross --define=with_cross_compiler_support=true\n+common:cpu_cross --define=with_cross_compiler_support=true\n \n # BEGIN TF REMOTE BUILD EXECUTION OPTIONS\n # Options when using remote execution\n # WARNING: THESE OPTIONS WONT WORK IF YOU DO NOT HAVE PROPER AUTHENTICATION AND PERMISSIONS\n \n # Allow creation of resultstore URLs for any bazel invocation\n-build:resultstore --google_default_credentials\n-build:resultstore --bes_backend=buildeventservice.googleapis.com\n-build:resultstore --bes_instance_name=\"tensorflow-testing\"\n-build:resultstore --bes_results_url=\"https://source.cloud.google.com/results/invocations\"\n-build:resultstore --bes_timeout=600s\n+common:resultstore --google_default_credentials\n+common:resultstore --bes_backend=buildeventservice.googleapis.com\n+common:resultstore --bes_instance_name=\"tensorflow-testing\"\n+common:resultstore --bes_results_url=\"https://source.cloud.google.com/results/invocations\"\n+common:resultstore --bes_timeout=600s\n \n # Flag to enable remote config\n common --experimental_repo_remote_exec\n \n-build:use_tar_archive_files --repo_env=USE_CUDA_TAR_ARCHIVE_FILES=1\n-build:use_tar_archive_files --repo_env=USE_NVSHMEM_TAR_ARCHIVE_FILES=1\n-build:use_tar_archive_files --repo_env=USE_LLVM_TAR_ARCHIVE_FILES=1\n-build:use_tar_archive_files --repo_env=USE_MIRRORED_TAR_ARCHIVE_FILES=1\n+common:use_tar_archive_files --repo_env=USE_CUDA_TAR_ARCHIVE_FILES=1\n+common:use_tar_archive_files --repo_env=USE_NVSHMEM_TAR_ARCHIVE_FILES=1\n+common:use_tar_archive_files --repo_env=USE_LLVM_TAR_ARCHIVE_FILES=1\n+common:use_tar_archive_files --repo_env=USE_MIRRORED_TAR_ARCHIVE_FILES=1\n \n # Make Bazel not try to probe the host system for a C++ toolchain.\n-build:rbe_base --config=use_tar_archive_files\n-build:rbe_base --config=resultstore\n-build:rbe_base --define=EXECUTOR=remote\n-build:rbe_base --jobs=800\n-build:rbe_base --remote_executor=grpcs://remotebuildexecution.googleapis.com\n-build:rbe_base --remote_timeout=3600\n-build:rbe_base --spawn_strategy=remote,worker,standalone,local\n+common:rbe_base --config=use_tar_archive_files\n+common:rbe_base --config=resultstore\n+common:rbe_base --define=EXECUTOR=remote\n+common:rbe_base --jobs=800\n+common:rbe_base --remote_executor=grpcs://remotebuildexecution.googleapis.com\n+common:rbe_base --remote_timeout=3600\n+common:rbe_base --spawn_strategy=remote,worker,standalone,local\n # Attempt to minimize the amount of data transfer between bazel and the remote\n # workers:\n-build:rbe_base --remote_download_toplevel\n+common:rbe_base --remote_download_toplevel\n test:rbe_base --test_env=USER=anon\n \n # TODO(kanglan): Check if we want to merge rbe_linux into rbe_linux_cpu.\n-build:rbe_linux --config=rbe_base\n-build:rbe_linux --action_env=PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/go/bin\"\n+common:rbe_linux --config=rbe_base\n+common:rbe_linux --action_env=PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/go/bin\"\n # Non-rbe settings we should include because we do not run configure\n-build:rbe_linux --config=avx_linux\n+common:rbe_linux --config=avx_linux\n # TODO(gunan): Check why we need this specified in rbe, but not in other builds.\n-build:rbe_linux --linkopt=-lrt\n-build:rbe_linux --host_linkopt=-lrt\n-build:rbe_linux --linkopt=-lm\n-build:rbe_linux --host_linkopt=-lm\n+common:rbe_linux --linkopt=-lrt\n+common:rbe_linux --host_linkopt=-lrt\n+common:rbe_linux --linkopt=-lm\n+common:rbe_linux --host_linkopt=-lm\n \n-build:rbe_linux_cpu --config=rbe_linux\n+common:rbe_linux_cpu --config=rbe_linux\n # Linux cpu and cuda builds share the same toolchain now.\n-build:rbe_linux_cpu --extra_execution_platforms=\"@ml_build_config_platform//:platform\"\n-build:rbe_linux_cpu --host_platform=\"@ml_build_config_platform//:platform\"\n-build:rbe_linux_cpu --platforms=\"@ml_build_config_platform//:platform\"\n+common:rbe_linux_cpu --extra_execution_platforms=\"@ml_build_config_platform//:platform\"\n+common:rbe_linux_cpu --host_platform=\"@ml_build_config_platform//:platform\"\n+common:rbe_linux_cpu --platforms=\"@ml_build_config_platform//:platform\"\n # This is needed for all Clang17 builds but must not be present in GCC builds.\n-build:rbe_linux_cpu --copt=-Wno-error=unused-command-line-argument\n+common:rbe_linux_cpu --copt=-Wno-error=unused-command-line-argument\n # This was added in clang-16 by https://reviews.llvm.org/D133574.\n # Can be removed once upb is updated, since a type definition is used within\n # offset of in the current version of ubp.\n # See https://github.com/protocolbuffers/upb/blob/9effcbcb27f0a665f9f345030188c0b291e32482/upb/upb.c#L183.\n-build:rbe_linux_cpu --copt=-Wno-gnu-offsetof-extensions\n+common:rbe_linux_cpu --copt=-Wno-gnu-offsetof-extensions\n # Python config is the same across all containers because the binary is the same\n-build:rbe_linux_cpu --python_path=\"/usr/bin/python3\"\n+common:rbe_linux_cpu --python_path=\"/usr/bin/python3\"\n # These you may need to change for your own GCP project.\n common:rbe_linux_cpu --remote_instance_name=projects/tensorflow-testing/instances/default_instance\n \n # Deprecated RBE config with non-hermetic toolchains.\n-build:rbe_linux_cpu_clang_local --config=clang_local\n-build:rbe_linux_cpu_clang_local --config=rbe_linux_cpu\n-build:rbe_linux_cpu_clang_local --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\n-build:rbe_linux_cpu_clang_local --host_crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n-build:rbe_linux_cpu_clang_local --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n-build:rbe_linux_cpu_clang_local --extra_toolchains=\"@local_config_cuda//crosstool:toolchain-linux-x86_64\"\n-build:rbe_linux_cpu_clang_local --repo_env=CC=\"/usr/lib/llvm-18/bin/clang\"\n-build:rbe_linux_cpu_clang_local --repo_env=TF_SYSROOT=\"/dt9\"\n+common:rbe_linux_cpu_clang_local --config=clang_local\n+common:rbe_linux_cpu_clang_local --config=rbe_linux_cpu\n+common:rbe_linux_cpu_clang_local --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\n+common:rbe_linux_cpu_clang_local --host_crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n+common:rbe_linux_cpu_clang_local --crosstool_top=\"@local_config_cuda//crosstool:toolchain\"\n+common:rbe_linux_cpu_clang_local --extra_toolchains=\"@local_config_cuda//crosstool:toolchain-linux-x86_64\"\n+common:rbe_linux_cpu_clang_local --repo_env=CC=\"/usr/lib/llvm-18/bin/clang\"\n+common:rbe_linux_cpu_clang_local --repo_env=TF_SYSROOT=\"/dt9\"\n \n # Download CUDA/CUDNN redistributions to preserve the repositories cache between\n # CPU and GPU builds.\n # TODO(ybaturina): Uncomment when RBE is ready to support this.\n-# build:rbe_linux_cpu --repo_env USE_CUDA_REDISTRIBUTIONS=1\n-# build:rbe_linux_cpu --config=cuda_version\n+# common:rbe_linux_cpu --repo_env USE_CUDA_REDISTRIBUTIONS=1\n+# common:rbe_linux_cpu --config=cuda_version\n \n-build:rbe_linux_cuda --config=cuda_clang_official\n-build:rbe_linux_cuda --config=rbe_linux_cpu\n+common:rbe_linux_cuda --config=cuda_clang_official\n+common:rbe_linux_cuda --config=rbe_linux_cpu\n # dt9 is based on glibc 2.17, which is outdated and incompatible with CUDA 12.8.0\n # unset TF_SYSROOT\n-build:rbe_linux_cuda --repo_env=TF_SYSROOT=\n+common:rbe_linux_cuda --repo_env=TF_SYSROOT=\n # For Remote build execution -- GPU configuration\n-build:rbe_linux_cuda --repo_env=REMOTE_GPU_TESTING=1\n+common:rbe_linux_cuda --repo_env=REMOTE_GPU_TESTING=1\n # Enable forward compatibility for CUDA builds because RBE docker image doesn't\n # have latest CUDA drivers installed.\n-build:rbe_linux_cuda --@cuda_driver//:enable_forward_compatibility=true\n+common:rbe_linux_cuda --@cuda_driver//:enable_forward_compatibility=true\n \n-build:rbe_linux_cuda_nvcc --config=rbe_linux_cuda\n-build:rbe_linux_cuda_nvcc --config=cuda_nvcc\n-build:rbe_linux_cuda_nvcc --repo_env TF_NCCL_USE_STUB=1\n+common:rbe_linux_cuda_nvcc --config=rbe_linux_cuda\n+common:rbe_linux_cuda_nvcc --config=cuda_nvcc\n+common:rbe_linux_cuda_nvcc --repo_env TF_NCCL_USE_STUB=1\n \n-build:rbe_win_base --config=clang_local\n-build:rbe_win_base --config=rbe_base\n-build:rbe_win_base --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\n-build:rbe_win_base --shell_executable=C:\\\\tools\\\\msys64\\\\usr\\\\bin\\\\bash.exe\n-build:rbe_win_base --remote_instance_name=projects/tensorflow-testing/instances/windows\n+common:rbe_win_base --config=clang_local\n+common:rbe_win_base --config=rbe_base\n+common:rbe_win_base --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\n+common:rbe_win_base --shell_executable=C:\\\\tools\\\\msys64\\\\usr\\\\bin\\\\bash.exe\n+common:rbe_win_base --remote_instance_name=projects/tensorflow-testing/instances/windows\n # Don't build the python zip archive in the RBE build.\n-build:rbe_win_base --remote_download_minimal\n-build:rbe_win_base --enable_runfiles\n-build:rbe_win_base --nobuild_python_zip\n+common:rbe_win_base --remote_download_minimal\n+common:rbe_win_base --enable_runfiles\n+common:rbe_win_base --nobuild_python_zip\n # Don't build the runfile links in the RBE build which is expensive on Windows.\n-build:rbe_win_base --nobuild_runfile_links\n-build:rbe_win_base --define=override_eigen_strong_inline=true\n+common:rbe_win_base --nobuild_runfile_links\n+common:rbe_win_base --define=override_eigen_strong_inline=true\n \n-build:rbe_windows_x86_cpu_2022 --config=rbe_win_base --config=windows_x86_cpu_2022\n+common:rbe_windows_x86_cpu_2022 --config=rbe_win_base --config=windows_x86_cpu_2022\n \n # END TF REMOTE BUILD EXECUTION OPTIONS\n \n # TFLite build configs for generic embedded Linux\n-build:elinux --config=clang_local\n-build:elinux --crosstool_top=@local_config_embedded_arm//:toolchain\n-build:elinux --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\n-build:elinux_aarch64 --config=elinux\n-build:elinux_aarch64 --cpu=aarch64\n-build:elinux_aarch64 --platforms=@org_tensorflow//tensorflow/tools/toolchains/linux:linux_aarch64\n-build:elinux_armhf --config=elinux\n-build:elinux_armhf --cpu=armhf\n-build:elinux_armhf --platforms=@org_tensorflow//tensorflow/tools/toolchains/linux:linux_armhf\n-build:elinux_armhf --copt -mfp16-format=ieee\n+common:elinux --config=clang_local\n+common:elinux --crosstool_top=@local_config_embedded_arm//:toolchain\n+common:elinux --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\n+common:elinux_aarch64 --config=elinux\n+common:elinux_aarch64 --cpu=aarch64\n+common:elinux_aarch64 --platforms=@org_tensorflow//tensorflow/tools/toolchains/linux:linux_aarch64\n+common:elinux_armhf --config=elinux\n+common:elinux_armhf --cpu=armhf\n+common:elinux_armhf --platforms=@org_tensorflow//tensorflow/tools/toolchains/linux:linux_armhf\n+common:elinux_armhf --copt -mfp16-format=ieee\n \n # Config-specific options should come above this line.\n \n@@ -590,33 +590,33 @@ try-import %workspace%/.tf_configure.bazelrc\n # Load rc file with user-specific options.\n try-import %workspace%/.bazelrc.user\n \n-build:release_cpu_macos --config=avx_linux\n+common:release_cpu_macos --config=avx_linux\n \n # Base build configs for macOS\n-build:release_macos_base --define=no_nccl_support=true --output_filter=^$\n+common:release_macos_base --define=no_nccl_support=true --output_filter=^$\n \n # Ensure release_base is set on mac\n-build:release_macos_base --config=cpu_cross\n-build:release_macos_base --config=clang_local\n+common:release_macos_base --config=cpu_cross\n+common:release_macos_base --config=clang_local\n \n # Build configs for macOS x86\n-build:release_macos_x86 --config=release_macos_base\n+common:release_macos_x86 --config=release_macos_base\n # Build with the AVX instruction set when on macOS x86\n-build:release_macos_x86 --config=avx_linux\n-build:release_macos_x86 --cpu=darwin\n-build:release_macos_x86 --platforms=@build_bazel_apple_support//platforms:darwin_x86_64\n+common:release_macos_x86 --config=avx_linux\n+common:release_macos_x86 --cpu=darwin\n+common:release_macos_x86 --platforms=@build_bazel_apple_support//platforms:darwin_x86_64\n # Target Catalina as the minimum compatible OS version\n-build:release_macos_x86 --macos_minimum_os=10.15\n-build:release_macos_x86 --macos_sdk_version=10.15\n+common:release_macos_x86 --macos_minimum_os=10.15\n+common:release_macos_x86 --macos_sdk_version=10.15\n \n # Build configs for macOS Arm64\n-build:release_macos_arm64 --config=release_macos_base\n-build:release_macos_arm64 --cpu=darwin_arm64\n-build:release_macos_arm64 --platforms=@build_bazel_apple_support//platforms:darwin_arm64\n-build:release_macos_arm64 --define=tensorflow_mkldnn_contraction_kernel=0\n+common:release_macos_arm64 --config=release_macos_base\n+common:release_macos_arm64 --cpu=darwin_arm64\n+common:release_macos_arm64 --platforms=@build_bazel_apple_support//platforms:darwin_arm64\n+common:release_macos_arm64 --define=tensorflow_mkldnn_contraction_kernel=0\n # Target Moneterey as the minimum compatible OS version\n-build:release_macos_arm64 --macos_minimum_os=12.0\n-build:release_macos_arm64 --macos_sdk_version=12.0\n+common:release_macos_arm64 --macos_minimum_os=12.0\n+common:release_macos_arm64 --macos_sdk_version=12.0\n \n # Base test configs for macOS\n test:release_macos_base --verbose_failures=true --local_test_jobs=HOST_CPUS\n@@ -634,13 +634,13 @@ test:release_macos_x86 --config=release_macos_base\n # Use --config=tf_public_cache to try and use the TensorFlow public build cache\n # to build TensorFlow. Look at ci/official/envs to find which types of jobs\n # push to the cache.  For macOS, use --config=tf_public_macos_cache\n-build:tf_public_cache --remote_cache=\"https://storage.googleapis.com/tensorflow-devinfra-bazel-cache/january2024\" --remote_upload_local_results=false\n+common:tf_public_cache --remote_cache=\"https://storage.googleapis.com/tensorflow-devinfra-bazel-cache/january2024\" --remote_upload_local_results=false\n # Cache pushes are limited to TF's CI system.\n-build:tf_public_cache_push --config=tf_public_cache --remote_upload_local_results=true --google_default_credentials\n+common:tf_public_cache_push --config=tf_public_cache --remote_upload_local_results=true --google_default_credentials\n # Public cache for macOS builds\n-build:tf_public_macos_cache --remote_cache=\"https://storage.googleapis.com/tensorflow-macos-bazel-cache/oct2023\" --remote_upload_local_results=false\n+common:tf_public_macos_cache --remote_cache=\"https://storage.googleapis.com/tensorflow-macos-bazel-cache/oct2023\" --remote_upload_local_results=false\n # Cache pushes are limited to TF's CI system.\n-build:tf_public_macos_cache_push --config=tf_public_macos_cache --remote_upload_local_results=true --google_default_credentials\n+common:tf_public_macos_cache_push --config=tf_public_macos_cache --remote_upload_local_results=true --google_default_credentials\n \n # END TF CACHE HELPER OPTIONS\n \n@@ -650,14 +650,14 @@ build:tf_public_macos_cache_push --config=tf_public_macos_cache --remote_upload_\n # flags seem to be actually used to specify the execution platform details. It\n # seems it is this way because these flags are old and predate the distinction\n # between host and execution platform.\n-build:cross_compile_base --config=clang_local\n-build:cross_compile_base --host_cpu=k8\n-build:cross_compile_base --host_crosstool_top=//tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n-build:cross_compile_base --extra_execution_platforms=//tools/toolchains/cross_compile/config:linux_x86_64\n+common:cross_compile_base --config=clang_local\n+common:cross_compile_base --host_cpu=k8\n+common:cross_compile_base --host_crosstool_top=//tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n+common:cross_compile_base --extra_execution_platforms=//tools/toolchains/cross_compile/config:linux_x86_64\n \n-build:rbe_cross_compile_base --config=rbe_base\n-build:rbe_cross_compile_base --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\n-build:rbe_cross_compile_base --remote_instance_name=projects/tensorflow-testing/instances/default_instance\n+common:rbe_cross_compile_base --config=rbe_base\n+common:rbe_cross_compile_base --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\n+common:rbe_cross_compile_base --remote_instance_name=projects/tensorflow-testing/instances/default_instance\n \n # Test-related settings below this point\n # We cannot run cross-compiled tests on the remote Linux x86 VMs so we need to\n@@ -666,49 +666,49 @@ test:rbe_cross_compile_base --strategy=TestRunner=local --build_tests_only\n test:rbe_cross_compile_base --verbose_failures=true --local_test_jobs=HOST_CPUS --test_output=errors\n \n # START LINUX AARCH64 CROSS-COMPILE CONFIGS\n-build:cross_compile_linux_arm64 --config=cross_compile_base\n+common:cross_compile_linux_arm64 --config=cross_compile_base\n \n # Set the target CPU to Aarch64\n-build:cross_compile_linux_arm64 --platforms=//tools/toolchains/cross_compile/config:linux_aarch64\n-build:cross_compile_linux_arm64 --cpu=aarch64\n-build:cross_compile_linux_arm64 --crosstool_top=//tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n+common:cross_compile_linux_arm64 --platforms=//tools/toolchains/cross_compile/config:linux_aarch64\n+common:cross_compile_linux_arm64 --cpu=aarch64\n+common:cross_compile_linux_arm64 --crosstool_top=//tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n \n # RBE cross-compile configs for Linux Aarch64\n-build:rbe_cross_compile_linux_arm64 --config=cross_compile_linux_arm64\n-build:rbe_cross_compile_linux_arm64 --config=rbe_cross_compile_base\n+common:rbe_cross_compile_linux_arm64 --config=cross_compile_linux_arm64\n+common:rbe_cross_compile_linux_arm64 --config=rbe_cross_compile_base\n test:rbe_cross_compile_linux_arm64 --config=rbe_cross_compile_base\n \n # END LINUX AARCH64 CROSS-COMPILE CONFIGS\n \n # START MACOS CROSS-COMPILE CONFIGS\n-build:cross_compile_macos_x86 --config=cross_compile_base\n-build:cross_compile_macos_x86 --config=nonccl\n+common:cross_compile_macos_x86 --config=cross_compile_base\n+common:cross_compile_macos_x86 --config=nonccl\n # Target Catalina (10.15) as the minimum supported OS\n-build:cross_compile_macos_x86 --action_env  MACOSX_DEPLOYMENT_TARGET=10.15\n+common:cross_compile_macos_x86 --action_env  MACOSX_DEPLOYMENT_TARGET=10.15\n \n # Set the target CPU to Darwin x86\n-build:cross_compile_macos_x86 --platforms=//tools/toolchains/cross_compile/config:darwin_x86_64\n-build:cross_compile_macos_x86 --cpu=darwin\n-build:cross_compile_macos_x86 --crosstool_top=//tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n+common:cross_compile_macos_x86 --platforms=//tools/toolchains/cross_compile/config:darwin_x86_64\n+common:cross_compile_macos_x86 --cpu=darwin\n+common:cross_compile_macos_x86 --crosstool_top=//tools/toolchains/cross_compile/cc:cross_compile_toolchain_suite\n # When RBE cross-compiling for macOS, we need to explicitly register the\n # toolchain. Otherwise, oddly, RBE complains that a \"docker container must be\n # specified\".\n-build:cross_compile_macos_x86 --extra_toolchains=//tools/toolchains/cross_compile/config:macos-x86-cross-compile-cc-toolchain\n+common:cross_compile_macos_x86 --extra_toolchains=//tools/toolchains/cross_compile/config:macos-x86-cross-compile-cc-toolchain\n # Map --platforms=darwin_x86_64 to --cpu=darwin and vice-versa to make selects()\n # and transistions that use these flags work.\n-build:cross_compile_macos_x86 --platform_mappings=tools/toolchains/cross_compile/config/platform_mappings\n+common:cross_compile_macos_x86 --platform_mappings=tools/toolchains/cross_compile/config/platform_mappings\n \n # RBE cross-compile configs for Darwin x86\n-build:rbe_cross_compile_macos_x86 --config=cross_compile_macos_x86 --remote_download_minimal\n-build:rbe_cross_compile_macos_x86 --bes_backend=\"\" --bes_results_url=\"\" --bes_timeout=\"0s\"\n-build:rbe_cross_compile_macos_x86 --experimental_remote_build_event_upload=\"minimal\"\n-build:rbe_cross_compile_macos_x86 --config=rbe_cross_compile_base\n-build:rbe_cross_compile_macos_x86 --bes_upload_mode=nowait_for_upload_complete\n+common:rbe_cross_compile_macos_x86 --config=cross_compile_macos_x86 --remote_download_minimal\n+common:rbe_cross_compile_macos_x86 --bes_backend=\"\" --bes_results_url=\"\" --bes_timeout=\"0s\"\n+common:rbe_cross_compile_macos_x86 --experimental_remote_build_event_upload=\"minimal\"\n+common:rbe_cross_compile_macos_x86 --config=rbe_cross_compile_base\n+common:rbe_cross_compile_macos_x86 --bes_upload_mode=nowait_for_upload_complete\n test:rbe_cross_compile_macos_x86 --config=rbe_cross_compile_base\n # Increase the test timeout as tests often take longer on mac.\n test:rbe_cross_compile_macos_x86 --test_timeout=300,450,1200,3600\n # Limit jobs to 100 to avoid running into \"out of memory\" issues (b/316266643)\n-build:rbe_cross_compile_macos_x86 --jobs=100\n+common:rbe_cross_compile_macos_x86 --jobs=100\n test:rbe_cross_compile_macos_x86 --jobs=100\n # END MACOS CROSS-COMPILE CONFIGS\n # END CROSS-COMPILE CONFIGS"
        }
    ],
    "stats": {
        "total": 1542,
        "additions": 771,
        "deletions": 771
    }
}