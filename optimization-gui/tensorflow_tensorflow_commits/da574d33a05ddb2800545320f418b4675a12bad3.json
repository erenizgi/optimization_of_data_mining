{
    "author": "beckerhe",
    "message": "Prepare XLA Bazel dependencies for enabling the layering check\n\nThis makes a bunch of XLA's third party dependencies compliant with\nBazel's layering check by either:\n\n1. disabling the layering check for the dependency's targets, or by\n2. fixing the build rules so that they comply with the layering check\n\nBoth is either achieved by:\n\n1. patching the packages itself through patch files\n2. changing the BUILD files directly if we maintain Bazel BUILD files separately in the XLA repo.\n\nSome of the patches can be upstreamed which I'm going to attempt separately.\n\nPiperOrigin-RevId: 845127409",
    "sha": "da574d33a05ddb2800545320f418b4675a12bad3",
    "files": [
        {
            "sha": "39901b9b2e64eaac3e5e3f4bff9bc78a451b060c",
            "filename": "third_party/py/python_init_pip.bzl",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fpy%2Fpython_init_pip.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fpy%2Fpython_init_pip.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fpy%2Fpython_init_pip.bzl?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -24,6 +24,10 @@ cc_library(\n cc_library(\n     name = \"numpy_headers\",\n     deps = [\":numpy_headers_2\", \":numpy_headers_1\"],\n+    # For the layering check to work we need to re-export the headers from the\n+    # dependencies.\n+    hdrs = glob([\"site-packages/numpy/_core/include/**/*.h\"]) +\n+           glob([\"site-packages/numpy/core/include/**/*.h\"]),\n )\n \"\"\",\n         ),"
        },
        {
            "sha": "f1d9f7d670eaa96700e5b9bfd7742ce0736aea52",
            "filename": "third_party/xla/build_tools/dependencies/gen_disable_layering_check_patch.sh",
            "status": "added",
            "additions": 61,
            "deletions": 0,
            "changes": 61,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fbuild_tools%2Fdependencies%2Fgen_disable_layering_check_patch.sh",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fbuild_tools%2Fdependencies%2Fgen_disable_layering_check_patch.sh",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Fdependencies%2Fgen_disable_layering_check_patch.sh?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -0,0 +1,61 @@\n+#!/bin/bash\n+# Copyright 2025 The OpenXLA Authors.\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+# Generates a patch file that disables the layering check for all cc_library\n+# targets in the archive. Both BUILD and BUILD.bazel files are taken into account.\n+#\n+# The script takes one argument: the URL of the .tar.gz archive to download.\n+#\n+# The following tools are needed (need to be installed on the machine):\n+# - curl\n+# - git\n+# - buildozer (from Bazel buildtools)\n+#\n+# The tool has originally been written for ortools but should work for similarly structured\n+# projects as well.\n+#\n+# Example:\n+# build_tools/dependencies/gen_disable_layering_check_patch.sh \\\n+# https://github.com/google/or-tools/archive/v9.11.tar.gz \\\n+# > third_party/ortools/layering_check.patch\n+\n+set -euo pipefail\n+\n+readonly TMP_DIR=$(mktemp -d)\n+trap 'rm -rf -- $TMP_DIR' EXIT\n+\n+echo \"Downloading archive $1...\" >&2\n+curl -Lqo \"$TMP_DIR/archive.tar.gz\" \"$1\" 1>&2\n+\n+echo \"Extracting archive...\" >&2\n+mkdir -p \"$TMP_DIR/extracted\" 1>&2\n+tar  -x -C \"$TMP_DIR/extracted\" -f \"$TMP_DIR/archive.tar.gz\" --strip-components=1 1>&2\n+\n+echo \"Initialzing temporary git repo...\" >&2\n+git -C \"$TMP_DIR/extracted\" init 1>&2\n+git -C \"$TMP_DIR/extracted\" add . 1>&2\n+git -C \"$TMP_DIR/extracted\" commit --no-verify -m \"original state\" -q 1>&2\n+\n+echo \"Patching build targets...\" >&2\n+find $TMP_DIR/extracted -name BUILD.bazel -or -name BUILD | while read f; do\n+   buildozer 'add features \"-layering_check\"' $(dirname $f):%cc_library 1>&2 || exit_code=$?\n+   if [[ $exit_code -ne 0 && $exit_code -ne 3 ]]; then\n+     echo \"Buildozer command failed with exit code: $exit_code\" >&2\n+     exit $exit_code\n+   fi\n+done\n+\n+echo \"Generating diff...\" >&2\n+git -C \"$TMP_DIR/extracted\" --no-pager diff"
        },
        {
            "sha": "31433753e3abde1097aad0e979c12cf975852c06",
            "filename": "third_party/xla/third_party/boringssl.patch",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fboringssl.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fboringssl.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fboringssl.patch?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -0,0 +1,13 @@\n+diff --git a/BUILD b/BUILD\n+index 206786442..3d1624382 100644\n+--- a/BUILD\n++++ b/BUILD\n+@@ -145,7 +145,7 @@ cc_library(\n+ \n+ cc_library(\n+     name = \"ssl\",\n+-    srcs = ssl_sources + ssl_internal_headers,\n++    srcs = ssl_sources + ssl_internal_headers + crypto_internal_headers,\n+     hdrs = ssl_headers,\n+     copts = boringssl_copts_cxx,\n+     includes = [\"src/include\"],"
        },
        {
            "sha": "c1884050002a5eda371979317f1638c19d912e9b",
            "filename": "third_party/xla/third_party/curl.BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fcurl.BUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fcurl.BUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fcurl.BUILD?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -442,6 +442,7 @@ cc_library(\n         \"@local_xla//xla/tsl:ios\": [],\n         \"@local_xla//xla/tsl:windows\": [],\n         \"//conditions:default\": [\n+            \"@boringssl//:crypto\",\n             \"@boringssl//:ssl\",\n         ],\n     }),"
        },
        {
            "sha": "b9f95d91084e6df79186f4c9ccb1b7219db7033a",
            "filename": "third_party/xla/third_party/googletest/googletest.patch",
            "status": "modified",
            "additions": 10,
            "deletions": 36,
            "changes": 46,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fgoogletest%2Fgoogletest.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fgoogletest%2Fgoogletest.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fgoogletest%2Fgoogletest.patch?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -2,40 +2,14 @@ diff --git a/BUILD.bazel b/BUILD.bazel\n index cc254457..49120384 100644\n --- a/BUILD.bazel\n +++ b/BUILD.bazel\n-@@ -142,16 +142,16 @@ cc_library(\n-     }),\n-     deps = select({\n-         \":has_absl\": [\n--            \"@abseil-cpp//absl/container:flat_hash_set\",\n--            \"@abseil-cpp//absl/debugging:failure_signal_handler\",\n--            \"@abseil-cpp//absl/debugging:stacktrace\",\n--            \"@abseil-cpp//absl/debugging:symbolize\",\n--            \"@abseil-cpp//absl/flags:flag\",\n--            \"@abseil-cpp//absl/flags:parse\",\n--            \"@abseil-cpp//absl/flags:reflection\",\n--            \"@abseil-cpp//absl/flags:usage\",\n--            \"@abseil-cpp//absl/strings\",\n--            \"@re2\",\n-+            \"@com_google_absl//absl/container:flat_hash_set\",\n-+            \"@com_google_absl//absl/debugging:failure_signal_handler\",\n-+            \"@com_google_absl//absl/debugging:stacktrace\",\n-+            \"@com_google_absl//absl/debugging:symbolize\",\n-+            \"@com_google_absl//absl/flags:flag\",\n-+            \"@com_google_absl//absl/flags:parse\",\n-+            \"@com_google_absl//absl/flags:reflection\",\n-+            \"@com_google_absl//absl/flags:usage\",\n-+            \"@com_google_absl//absl/strings\",\n-+            \"@com_googlesource_code_re2//:re2\",\n-         ],\n+@@ -178,6 +178,10 @@ alias(\n+ cc_library(\n+     name = \"gtest_main\",\n+     srcs = [\"googlemock/src/gmock_main.cc\"],\n++    hdrs = glob([\n++        \"googletest/include/gtest/*.h\",\n++        \"googlemock/include/gmock/*.h\",\n++    ]),\n+     features = select({\n+         \":windows\": [\"windows_export_all_symbols\"],\n          \"//conditions:default\": [],\n-     }) + select({\n-@@ -160,9 +160,6 @@ cc_library(\n-         # so that's why these libraries are needed.\n-         # Otherwise, builds targeting Fuchsia would fail to compile.\n-         \":fuchsia\": [\n--            \"@fuchsia_sdk//pkg/fdio\",\n--            \"@fuchsia_sdk//pkg/syslog\",\n--            \"@fuchsia_sdk//pkg/zx\",\n-         ],\n-         \"//conditions:default\": [],\n-     }),"
        },
        {
            "sha": "2c409c8eb8597ea13affc1d9be51bf05bcce35a5",
            "filename": "third_party/xla/third_party/highwayhash/highwayhash.BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fhighwayhash%2Fhighwayhash.BUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fhighwayhash%2Fhighwayhash.BUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fhighwayhash%2Fhighwayhash.BUILD?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -255,6 +255,7 @@ cc_library(\n     deps = [\n         \":arch_specific\",\n         \":compiler_specific\",\n+        \":endianess\",\n         \":hh_types\",\n         \":iaca\",\n         \":load3\","
        },
        {
            "sha": "3c2240d8d39e44b66f05f22a95c62a40ef931ef8",
            "filename": "third_party/xla/third_party/ortools/layering_check.patch",
            "status": "added",
            "additions": 4261,
            "deletions": 0,
            "changes": 4261,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fortools%2Flayering_check.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fortools%2Flayering_check.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fortools%2Flayering_check.patch?ref=da574d33a05ddb2800545320f418b4675a12bad3"
        },
        {
            "sha": "39901b9b2e64eaac3e5e3f4bff9bc78a451b060c",
            "filename": "third_party/xla/third_party/py/python_init_pip.bzl",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fpy%2Fpython_init_pip.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fpy%2Fpython_init_pip.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fpy%2Fpython_init_pip.bzl?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -24,6 +24,10 @@ cc_library(\n cc_library(\n     name = \"numpy_headers\",\n     deps = [\":numpy_headers_2\", \":numpy_headers_1\"],\n+    # For the layering check to work we need to re-export the headers from the\n+    # dependencies.\n+    hdrs = glob([\"site-packages/numpy/_core/include/**/*.h\"]) +\n+           glob([\"site-packages/numpy/core/include/**/*.h\"]),\n )\n \"\"\",\n         ),"
        },
        {
            "sha": "1e52bb31c540fca9f6272b26eaf3cc6199f83c83",
            "filename": "third_party/xla/third_party/rocm_device_libs/rocm_device_libs.BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Frocm_device_libs%2Frocm_device_libs.BUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Frocm_device_libs%2Frocm_device_libs.BUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Frocm_device_libs%2Frocm_device_libs.BUILD?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -24,6 +24,7 @@ cc_binary(\n         \"@llvm-project//llvm:Core\",\n         \"@llvm-project//llvm:IRReader\",\n         \"@llvm-project//llvm:Support\",\n+        \"@llvm-project//llvm:config\",\n     ],\n )\n "
        },
        {
            "sha": "1e663770ba66e51e9bc6052ebfa5f40a9c63146a",
            "filename": "third_party/xla/third_party/xnnpack/layering_check_fix.patch",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fxnnpack%2Flayering_check_fix.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fxnnpack%2Flayering_check_fix.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fxnnpack%2Flayering_check_fix.patch?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -0,0 +1,12 @@\n+diff --git a/ynnpack/kernels/unary/BUILD b/ynnpack/kernels/unary/BUILD\n+index 9c46262..2e5ac81 100644\n+--- a/ynnpack/kernels/unary/BUILD\n++++ b/ynnpack/kernels/unary/BUILD\n+@@ -197,6 +197,7 @@ ynn_cc_library(\n+         \"x86_avx.inc\",\n+         \"x86_avx2.inc\",\n+         \"x86_avx512f.inc\",\n++        \"x86_f16c.inc\",\n+         \"x86_fma3.inc\",\n+         \"x86_sse2.inc\",\n+         \"x86_sse41.inc\",\n\\ No newline at end of file"
        },
        {
            "sha": "f67720ec702007e3c311e92f3b545b6be06cb75c",
            "filename": "third_party/xla/third_party/xnnpack/workspace.bzl",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fxnnpack%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fxnnpack%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fxnnpack%2Fworkspace.bzl?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -9,5 +9,6 @@ def repo():\n         sha256 = \"a89879422c6da8240cffb8ff67f5cd11f0362cb2a174ee9cd96b450e53902ca3\",\n         strip_prefix = \"XNNPACK-77468446ebfd9baab7fc4349c32608c9675cf6d9\",\n         urls = tf_mirror_urls(\"https://github.com/google/XNNPACK/archive/77468446ebfd9baab7fc4349c32608c9675cf6d9.zip\"),\n+        patch_file = [\"//third_party/xnnpack:layering_check_fix.patch\"],\n     )\n     # LINT.ThenChange(//tensorflow/lite/tools/cmake/modules/xnnpack.cmake)"
        },
        {
            "sha": "ae7a59d28af143b7443c1a3be41248b5b385f90f",
            "filename": "third_party/xla/third_party/zlib.BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fzlib.BUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fthird_party%2Fzlib.BUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fzlib.BUILD?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -27,11 +27,13 @@ cc_library(\n         \"trees.c\",\n         \"trees.h\",\n         \"uncompr.c\",\n-        \"zconf.h\",\n         \"zutil.c\",\n         \"zutil.h\",\n     ],\n-    hdrs = [\"zlib.h\"],\n+    hdrs = [\n+        \"zconf.h\",\n+        \"zlib.h\",\n+    ],\n     copts = select({\n         \"@local_xla//xla/tsl:windows\": [],\n         \"//conditions:default\": ["
        },
        {
            "sha": "8430d9842b1c0cc141601933c9860ea05f4b9581",
            "filename": "third_party/xla/workspace2.bzl",
            "status": "modified",
            "additions": 14,
            "deletions": 4,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fworkspace2.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/da574d33a05ddb2800545320f418b4675a12bad3/third_party%2Fxla%2Fworkspace2.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fworkspace2.bzl?ref=da574d33a05ddb2800545320f418b4675a12bad3",
            "patch": "@@ -316,9 +316,7 @@ def _tf_repositories():\n         sha256 = \"f253ca1a07262f8efde8328e4b2c68979e40ddfcfc001f70d1d5f612c7de2974\",\n         strip_prefix = \"googletest-28e9d1f26771c6517c3b4be10254887673c94018\",\n         # Patch googletest to:\n-        #   - avoid dependencies on @fuchsia_sdk,\n-        #   - refer to re2 as @com_googlesource_code_re2,\n-        #   - refer to abseil as @com_google_absl.\n+        #   - make the gtest_main target export the gtest.h header.\n         #   - add status assert macros for consistency with internal gmock (see\n         #     README.add-status-macros.md).\n         #\n@@ -339,6 +337,10 @@ def _tf_repositories():\n             \"//third_party/googletest:0002-Rename-dependencies-for-workspace.bzl-build.patch\",\n         ],\n         urls = tf_mirror_urls(\"https://github.com/google/googletest/archive/28e9d1f26771c6517c3b4be10254887673c940189.zip\"),\n+        repo_mapping = {\n+            \"@abseil-cpp\": \"@com_google_absl\",\n+            \"@re2\": \"@com_googlesource_code_re2\",\n+        },\n     )\n \n     tf_http_archive(\n@@ -436,14 +438,22 @@ def _tf_repositories():\n         sha256 = \"9dc53f851107eaf87b391136d13b815df97ec8f76dadb487b58b2fc45e624d2c\",\n         strip_prefix = \"boringssl-c00d7ca810e93780bd0c8ee4eea28f4f2ea4bcdc\",\n         system_build_file = \"//third_party:boringssl.BUILD\",\n+        patch_file = [\"//third_party:boringssl.patch\"],\n         urls = tf_mirror_urls(\"https://github.com/google/boringssl/archive/c00d7ca810e93780bd0c8ee4eea28f4f2ea4bcdc.tar.gz\"),\n     )\n \n     tf_http_archive(\n         name = \"com_google_ortools\",\n         sha256 = \"f6a0bd5b9f3058aa1a814b798db5d393c31ec9cbb6103486728997b49ab127bc\",\n         strip_prefix = \"or-tools-9.11\",\n-        patch_file = [\"//third_party/ortools:ortools.patch\"],\n+        patch_file = [\n+            \"//third_party/ortools:ortools.patch\",\n+            # On a version upgrade, this patch can be regenerated with the command:\n+            # third_party/gen_disable_layering_check_patch.sh \\\n+            #   https://github.com/google/or-tools/archive/v9.11.tar.gz \\\n+            #   > third_party/ortools/layering_check.patch\n+            \"//third_party/ortools:layering_check.patch\",\n+        ],\n         urls = tf_mirror_urls(\"https://github.com/google/or-tools/archive/v9.11.tar.gz\"),\n         repo_mapping = {\n             \"@com_google_protobuf_cc\": \"@com_google_protobuf\","
        }
    ],
    "stats": {
        "total": 4429,
        "additions": 4387,
        "deletions": 42
    }
}