{
    "author": "hawkinsp",
    "message": "[XLA] Make annotate_host_compute_offload a HloModulePass.\n\nThere's no reason for this pass to use the group mechanism.\n\nPiperOrigin-RevId: 814369294",
    "sha": "8ac9068e35d2d45302bd7c75dd70e9246d48362b",
    "files": [
        {
            "sha": "04d586418292ea8fd5068065da4909c9407eacb4",
            "filename": "third_party/xla/xla/core/host_offloading/annotate_host_compute_offload.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ac9068e35d2d45302bd7c75dd70e9246d48362b/third_party%2Fxla%2Fxla%2Fcore%2Fhost_offloading%2Fannotate_host_compute_offload.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ac9068e35d2d45302bd7c75dd70e9246d48362b/third_party%2Fxla%2Fxla%2Fcore%2Fhost_offloading%2Fannotate_host_compute_offload.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcore%2Fhost_offloading%2Fannotate_host_compute_offload.cc?ref=8ac9068e35d2d45302bd7c75dd70e9246d48362b",
            "patch": "@@ -51,16 +51,6 @@ void AnnotateComputationHostOffload(HloComputation& computation) {\n }\n }  // namespace\n \n-absl::StatusOr<bool> AnnotateHostComputeOffload::RunOnModuleGroup(\n-    HloModuleGroup* module_group,\n-    const absl::flat_hash_set<absl::string_view>& execution_threads) {\n-  bool modified = false;\n-  for (HloModule* module : module_group->modules()) {\n-    TF_ASSIGN_OR_RETURN(bool m, Run(module, execution_threads));\n-    modified |= m;\n-  }\n-  return modified;\n-}\n \n absl::StatusOr<bool> AnnotateHostComputeOffload::Run(\n     HloModule* module,"
        },
        {
            "sha": "c25c184572ee053cfdd690dc2af7eedb4c7d9512",
            "filename": "third_party/xla/xla/core/host_offloading/annotate_host_compute_offload.h",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/8ac9068e35d2d45302bd7c75dd70e9246d48362b/third_party%2Fxla%2Fxla%2Fcore%2Fhost_offloading%2Fannotate_host_compute_offload.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/8ac9068e35d2d45302bd7c75dd70e9246d48362b/third_party%2Fxla%2Fxla%2Fcore%2Fhost_offloading%2Fannotate_host_compute_offload.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcore%2Fhost_offloading%2Fannotate_host_compute_offload.h?ref=8ac9068e35d2d45302bd7c75dd70e9246d48362b",
            "patch": "@@ -28,17 +28,12 @@ namespace xla {\n \n // Annotates host compute offloaded instructions with the frontend attribute\n // `_xla_compute_type=host`.\n-class AnnotateHostComputeOffload : public HloModuleGroupPass {\n+class AnnotateHostComputeOffload : public HloModulePass {\n  public:\n   absl::string_view name() const override {\n     return \"annotate-host-compute-offload\";\n   }\n \n-  using HloPassInterface::RunOnModuleGroup;\n-  absl::StatusOr<bool> RunOnModuleGroup(\n-      HloModuleGroup* module_group,\n-      const absl::flat_hash_set<absl::string_view>& execution_threads) override;\n-\n   absl::StatusOr<bool> Run(\n       HloModule* module,\n       const absl::flat_hash_set<absl::string_view>& execution_threads) override;"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 1,
        "deletions": 16
    }
}