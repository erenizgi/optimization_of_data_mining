{
    "author": "apivovarov",
    "message": "[tsl]Migrate from std::algorithms to absl::c_\n\nThis change replaces uses of std::algorithms with absl::c_, which operate directly on containers. This simplifies the code by removing the need to pass begin() and end() iterators.\n\nAlso includes minor refactoring of if/else structures and updates function signatures for clarity.\n\nPiperOrigin-RevId: 839937426",
    "sha": "05b0db5d9783ec17eac92456ea268301cb8cc5ce",
    "files": [
        {
            "sha": "f3e6775d4e408446d1f24ba480eeb15740a622a1",
            "filename": "third_party/xla/xla/hlo/utils/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2FBUILD?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -157,6 +157,7 @@ cc_library(\n         \"//xla/service:dot_as_convolution_util\",\n         \"//xla/service:gather_scatter_utils\",\n         \"//xla/tsl/platform:errors\",\n+        \"//xla/tsl/platform:statusor\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:btree\",\n         \"@com_google_absl//absl/container:flat_hash_map\","
        },
        {
            "sha": "db776e6b26fa6819ffc1faf3c43f089f1b08114f",
            "filename": "third_party/xla/xla/hlo/utils/hlo_sharding_util.cc",
            "status": "modified",
            "additions": 24,
            "deletions": 19,
            "changes": 43,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2Fhlo_sharding_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2Fhlo_sharding_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Futils%2Fhlo_sharding_util.cc?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -60,6 +60,7 @@ limitations under the License.\n #include \"xla/shape.h\"\n #include \"xla/shape_util.h\"\n #include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/statusor.h\"\n #include \"xla/util.h\"\n #include \"xla/xla_data.pb.h\"\n #include \"tsl/platform/statusor.h\"\n@@ -572,7 +573,7 @@ bool MergeShardingIfCompatible(const HloSharding& to_merge,\n         result.push_back(sharding.tile_assignment()\n                              .Reshape(reshape_dims)\n                              .Transpose(local_perm));\n-      } while (std::next_permutation(iota.begin(), iota.end()));\n+      } while (absl::c_next_permutation(iota));\n       return result;\n     };\n \n@@ -676,7 +677,8 @@ bool MergeShardingIfCompatible(const HloSharding& to_merge,\n               gm1.erase(it1);\n               gm2.erase(it2);\n               return absl::OkStatus();\n-            } else if (*it1 < *it2) {\n+            }\n+            if (*it1 < *it2) {\n               it1++;\n             } else {\n               it2++;\n@@ -1568,16 +1570,19 @@ IdentityValueAndHloOpcodeForScatterReduceComputation(\n     return std::make_pair(HloInstruction::CreateConstant(LiteralUtil::Zero(\n                               scatter.shape().element_type())),\n                           root_instruction->opcode());\n-  } else if (root_instruction->opcode() == HloOpcode::kMultiply ||\n-             root_instruction->opcode() == HloOpcode::kAnd) {\n+  }\n+  if (root_instruction->opcode() == HloOpcode::kMultiply ||\n+      root_instruction->opcode() == HloOpcode::kAnd) {\n     return std::make_pair(HloInstruction::CreateConstant(\n                               LiteralUtil::One(scatter.shape().element_type())),\n                           root_instruction->opcode());\n-  } else if (root_instruction->opcode() == HloOpcode::kMaximum) {\n+  }\n+  if (root_instruction->opcode() == HloOpcode::kMaximum) {\n     return std::make_pair(HloInstruction::CreateConstant(LiteralUtil::MinValue(\n                               scatter.shape().element_type())),\n                           root_instruction->opcode());\n-  } else if (root_instruction->opcode() == HloOpcode::kMinimum) {\n+  }\n+  if (root_instruction->opcode() == HloOpcode::kMinimum) {\n     return std::make_pair(HloInstruction::CreateConstant(LiteralUtil::MaxValue(\n                               scatter.shape().element_type())),\n                           root_instruction->opcode());\n@@ -1626,17 +1631,16 @@ HloSharding PartiallyReplicateTiledShardingOnDims(\n     new_tile_shape.back() *= group_count;\n     new_tile = new_tile.Reshape(new_tile_shape);\n     return HloSharding::PartialTile(new_tile, sharding.metadata());\n-  } else {\n-    new_tile_shape.insert(new_tile_shape.begin() + sharding.TiledDataRank(),\n-                          group_count);\n-    new_tile = new_tile.Reshape(new_tile_shape);\n-    std::vector<OpSharding::Type> subgroup_types;\n-    subgroup_types.push_back(OpSharding::REPLICATED);\n-    for (OpSharding::Type type : sharding.subgroup_types()) {\n-      subgroup_types.push_back(type);\n-    }\n-    return HloSharding::Subgroup(new_tile, subgroup_types, sharding.metadata());\n   }\n+  new_tile_shape.insert(new_tile_shape.begin() + sharding.TiledDataRank(),\n+                        group_count);\n+  new_tile = new_tile.Reshape(new_tile_shape);\n+  std::vector<OpSharding::Type> subgroup_types;\n+  subgroup_types.push_back(OpSharding::REPLICATED);\n+  for (OpSharding::Type type : sharding.subgroup_types()) {\n+    subgroup_types.push_back(type);\n+  }\n+  return HloSharding::Subgroup(new_tile, subgroup_types, sharding.metadata());\n }\n \n HloSharding PartiallyReplicateTiledShardingOnAllDimsExcept(\n@@ -2846,9 +2850,8 @@ bool IsSpatiallyPartitioned(const HloSharding& sharding) {\n                           [](const HloSharding& sub_sharding) {\n                             return IsSpatiallyPartitioned(sub_sharding);\n                           });\n-  } else {\n-    return !sharding.IsTileMaximal() || sharding.IsReplicated();\n   }\n+  return !sharding.IsTileMaximal() || sharding.IsReplicated();\n }\n \n // Returns\n@@ -2883,7 +2886,9 @@ int MaskTupleShardingStrictlyBetter(const HloSharding& lhs,\n         mask |= 2;\n       }\n     }\n-    if (mask == 3) break;\n+    if (mask == 3) {\n+      break;\n+    }\n   }\n   return mask;\n }"
        },
        {
            "sha": "cb1ad278838746dc4ce7ba3397ad582ac00cbecf",
            "filename": "third_party/xla/xla/tsl/framework/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2FBUILD?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -273,7 +273,9 @@ cc_library(\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/util:device_name_utils\",\n+        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n+        \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n@@ -414,9 +416,9 @@ tsl_cc_test(\n     deps = [\n         \":cancellation\",\n         \"//xla/tsl/platform:env\",\n-        \"//xla/tsl/platform:env_impl\",\n-        \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:test\",\n+        \"@com_google_absl//absl/algorithm:container\",\n+        \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_googletest//:gtest_main\",\n     ],"
        },
        {
            "sha": "5db5391275c36d5faacadf8427d1a966cb60ba47",
            "filename": "third_party/xla/xla/tsl/framework/cancellation_test.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcancellation_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcancellation_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fcancellation_test.cc?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -16,13 +16,15 @@ limitations under the License.\n #include \"xla/tsl/framework/cancellation.h\"\n \n #include <algorithm>\n+#include <cstddef>\n #include <memory>\n-#include <numeric>\n #include <random>\n #include <vector>\n \n+#include \"absl/algorithm/container.h\"\n+#include \"absl/status/status.h\"\n #include \"absl/synchronization/notification.h\"\n-#include \"xla/tsl/platform/status.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/test.h\"\n #include \"xla/tsl/platform/threadpool.h\"\n \n@@ -225,7 +227,7 @@ TEST(Cancellation, Parent_CancelManyChildren) {\n   CancellationManager parent;\n   std::vector<std::unique_ptr<CancellationManager>> children;\n   for (size_t i = 0; i < 5; ++i) {\n-    children.push_back(absl::make_unique<CancellationManager>(&parent));\n+    children.push_back(std::make_unique<CancellationManager>(&parent));\n     EXPECT_FALSE(children.back()->IsCancelled());\n   }\n   parent.StartCancel();\n@@ -267,13 +269,13 @@ TEST(Cancellation, Parent_RandomDestructionOrder) {\n     std::uniform_int_distribution<int> dist(1, 9);\n     const size_t round_size = dist(rd);\n     for (size_t i = 0; i < round_size; ++i) {\n-      children.push_back(absl::make_unique<CancellationManager>(&parent));\n+      children.push_back(std::make_unique<CancellationManager>(&parent));\n       EXPECT_FALSE(children.back()->IsCancelled());\n     }\n \n     // 2. Deregister the children in a random order.\n     std::vector<size_t> destruction_order(round_size);\n-    std::iota(destruction_order.begin(), destruction_order.end(), 0);\n+    absl::c_iota(destruction_order, 0);\n     std::shuffle(destruction_order.begin(), destruction_order.end(), g);\n     for (size_t index : destruction_order) {\n       children[index].reset();"
        },
        {
            "sha": "97bbbefb3aa7e67d26a00695fd84f72287faf6b4",
            "filename": "third_party/xla/xla/tsl/framework/device_id_utils.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_utils.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_utils.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_utils.cc?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -15,22 +15,27 @@ limitations under the License.\n \n #include \"xla/tsl/framework/device_id_utils.h\"\n \n+#include <climits>\n+#include <cstddef>\n #include <cstdint>\n-#include <numeric>\n #include <set>\n #include <string>\n #include <vector>\n \n+#include \"absl/algorithm/container.h\"\n #include \"absl/container/flat_hash_map.h\"\n+#include \"absl/log/check.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n #include \"absl/strings/numbers.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/string_view.h\"\n #include \"xla/tsl/framework/device_id.h\"\n #include \"xla/tsl/framework/device_id_manager.h\"\n+#include \"xla/tsl/framework/device_type.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/statusor.h\"\n+#include \"xla/tsl/util/device_name_utils.h\"\n #include \"tsl/platform/str_util.h\"\n \n namespace tsl {\n@@ -82,7 +87,7 @@ absl::Status ParseVisibleDeviceList(\n   if (visible_device_list.empty()) {\n     visible_device_order->resize(visible_device_count);\n     // By default, visible to virtual mapping is unchanged.\n-    std::iota(visible_device_order->begin(), visible_device_order->end(), 0);\n+    absl::c_iota(*visible_device_order, 0);\n   } else {\n     const std::vector<std::string> order_str =\n         tsl::str_util::Split(visible_device_list, ',');  // non-absl ok"
        },
        {
            "sha": "cf223358d1152316e6cbcb9808385509306bb9df",
            "filename": "third_party/xla/xla/tsl/lib/random/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2FBUILD?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -194,8 +194,8 @@ tsl_cc_test(\n         \"//xla/tsl/lib/math:math_util\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:test\",\n+        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_googletest//:gtest_main\",\n-        \"@local_tsl//tsl/platform:random\",\n     ],\n )\n "
        },
        {
            "sha": "5203daac1a04c0e090398d37150dc90bca42c956",
            "filename": "third_party/xla/xla/tsl/lib/random/random_distributions_test.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 12,
            "changes": 22,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Frandom%2Frandom_distributions_test.cc?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -18,16 +18,15 @@ limitations under the License.\n #include <algorithm>\n #include <cmath>\n #include <functional>\n-#include <numeric>\n #include <unordered_map>\n #include <vector>\n \n+#include \"absl/algorithm/container.h\"\n #include \"xla/tsl/lib/math/math_util.h\"\n #include \"xla/tsl/lib/random/philox_random.h\"\n #include \"xla/tsl/lib/random/philox_random_test_utils.h\"\n #include \"xla/tsl/platform/logging.h\"\n #include \"xla/tsl/platform/test.h\"\n-#include \"tsl/platform/random.h\"\n \n namespace tsl {\n namespace random {\n@@ -171,15 +170,14 @@ void NormalMomentsTest(int count, int max_moments,\n     if (n % 2 == 1) {\n       // For an odd order, the moment of a unit normal distribution is zero.\n       return 0.;\n-    } else {\n-      // For an even order, the moment of a unit normal distribution is.\n-      // (n-1)!!\n-      double v = 1.;\n-      for (int i = n - 1; i >= 1; i -= 2) {\n-        v *= i;\n-      }\n-      return v;\n     }\n+    // For an even order, the moment of a unit normal distribution is.\n+    // (n-1)!!\n+    double v = 1.;\n+    for (int i = n - 1; i >= 1; i -= 2) {\n+      v *= i;\n+    }\n+    return v;\n   };\n \n   std::vector<T> v1(count);\n@@ -322,8 +320,8 @@ template <typename T>\n void SingleSampleAdapterSkipTest() {\n   std::vector<uint64> skips(10);\n   std::vector<uint64> skip_afters(10);\n-  std::iota(skips.begin(), skips.end(), 0);\n-  std::iota(skip_afters.begin(), skip_afters.end(), 0);\n+  absl::c_iota(skips, 0);\n+  absl::c_iota(skip_afters, 0);\n   uint64 total_samples = 100;\n   uint64 seed = GetTestSeed();\n "
        },
        {
            "sha": "3d5176f9492bd3b01e9e8494b703e6c64b35fa6b",
            "filename": "third_party/xla/xla/tsl/platform/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2FBUILD?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -383,11 +383,13 @@ cc_library(\n         \":threadpool_interface\",\n         \":types\",\n         \"//xla/tsl/concurrency:executor\",\n+        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/base:nullability\",\n         \"@com_google_absl//absl/functional:any_invocable\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_absl//absl/types:span\",\n@@ -468,8 +470,10 @@ cc_library(\n         \":status\",\n         \":statusor\",\n         \":types\",\n+        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/status:statusor\",\n         \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/types:span\","
        },
        {
            "sha": "917a576ccb95b0809a29c274bf56e839f800e5c7",
            "filename": "third_party/xla/xla/tsl/platform/cloud/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -480,8 +480,8 @@ tsl_cc_test(\n     deps = [\n         \":curl_http_request\",\n         \"//xla/tsl/lib/core:status_test_util\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n+        \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_googletest//:gtest_main\","
        },
        {
            "sha": "40c6d03dd37bc0dbdff2f57d2b98b92d3fd51785",
            "filename": "third_party/xla/xla/tsl/platform/cloud/curl_http_request_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request_test.cc?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n #include <fstream>\n #include <string>\n \n+#include \"absl/algorithm/container.h\"\n #include \"absl/status/status.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n@@ -223,7 +224,7 @@ class FakeLibCurl : public LibCurl {\n     }\n     char* out_char_str = reinterpret_cast<char*>(\n         port::Malloc(sizeof(char) * temp_str.size() + 1));\n-    std::copy(temp_str.begin(), temp_str.end(), out_char_str);\n+    absl::c_copy(temp_str, out_char_str);\n     out_char_str[temp_str.size()] = '\\0';\n     return out_char_str;\n   }"
        },
        {
            "sha": "1054a64caba6af2e4c9855c1b85822076335dd88",
            "filename": "third_party/xla/xla/tsl/platform/env.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fenv.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fenv.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fenv.cc?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -403,7 +403,7 @@ std::string Env::GetExecutablePath() {\n   WCHAR wc_file_path[MAX_PATH] = {0};\n   GetModuleFileNameW(hModule, wc_file_path, MAX_PATH);\n   string file_path = WideCharToUtf8(wc_file_path);\n-  std::copy(file_path.begin(), file_path.end(), exe_path);\n+  absl::c_copy(file_path, exe_path);\n #else\n   char buf[PATH_MAX] = {0};\n   int path_length = readlink(\"/proc/self/exe\", buf, sizeof(buf) - 1);\n@@ -468,9 +468,8 @@ bool Env::CreateUniqueFileName(std::string* prefix, const std::string& suffix) {\n   if (FileExists(*prefix).ok()) {\n     prefix->clear();\n     return false;\n-  } else {\n-    return true;\n   }\n+  return true;\n }\n \n int32_t Env::GetProcessId() {"
        },
        {
            "sha": "972745b5a6dab6058515632ccf04f67b442f1772",
            "filename": "third_party/xla/xla/tsl/platform/file_system_helper.h",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Ffile_system_helper.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Ffile_system_helper.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Ffile_system_helper.h?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -16,9 +16,13 @@ limitations under the License.\n #ifndef XLA_TSL_PLATFORM_FILE_SYSTEM_HELPER_H_\n #define XLA_TSL_PLATFORM_FILE_SYSTEM_HELPER_H_\n \n-#include <algorithm>\n+#include <cstdint>\n #include <vector>\n \n+#include \"absl/algorithm/container.h\"\n+#include \"absl/status/status.h\"\n+#include \"absl/status/statusor.h\"\n+#include \"absl/strings/string_view.h\"\n #include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/file_system.h\"\n #include \"xla/tsl/platform/status.h\"\n@@ -113,7 +117,7 @@ class RandomAccessFileCopyingInputStream\n       if (result.size() > size) {\n         return -1;\n       }\n-      std::copy(result.begin(), result.end(), static_cast<char*>(buffer));\n+      absl::c_copy(result, static_cast<char*>(buffer));\n     }\n \n     position_ += result.size();"
        },
        {
            "sha": "755d93b0153c96f8858f83160b2ac74d1620431a",
            "filename": "third_party/xla/xla/tsl/profiler/utils/xplane_utils.h",
            "status": "modified",
            "additions": 12,
            "deletions": 6,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Futils%2Fxplane_utils.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/05b0db5d9783ec17eac92456ea268301cb8cc5ce/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Futils%2Fxplane_utils.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Futils%2Fxplane_utils.h?ref=05b0db5d9783ec17eac92456ea268301cb8cc5ce",
            "patch": "@@ -24,7 +24,6 @@ limitations under the License.\n #include \"absl/container/flat_hash_set.h\"\n #include \"absl/strings/string_view.h\"\n #include \"absl/types/span.h\"\n-#include \"xla/tsl/platform/types.h\"\n #include \"xla/tsl/profiler/utils/timespan.h\"\n #include \"xla/tsl/profiler/utils/trace_utils.h\"\n #include \"xla/tsl/profiler/utils/xplane_schema.h\"\n@@ -135,18 +134,25 @@ std::vector<Event> GetSortedEvents(Plane& plane,\n                                    absl::Span<const int64_t> line_ids = {}) {\n   std::vector<Event> events;\n   plane.ForEachLine([&events, include_derived_events, line_ids](auto line) {\n-    if (!include_derived_events && IsDerivedThreadId(line.Id())) return;\n-    if (!line_ids.empty() && std::find(line_ids.begin(), line_ids.end(),\n-                                       line.Id()) == line_ids.end())\n+    if (!include_derived_events && IsDerivedThreadId(line.Id())) {\n       return;\n+    }\n+    if (!line_ids.empty() &&\n+        absl::c_find(line_ids, line.Id()) == line_ids.end()) {\n+      return;\n+    }\n     line.ForEachEvent(\n         [&events](auto event) { events.emplace_back(std::move(event)); });\n   });\n   std::sort(events.begin(), events.end(), [](const Event& a, const Event& b) {\n     const tsl::profiler::Timespan a_span = a.GetTimespan();\n     const tsl::profiler::Timespan b_span = b.GetTimespan();\n-    if (a_span.begin_ps() < b_span.begin_ps()) return true;\n-    if (a_span.begin_ps() > b_span.begin_ps()) return false;\n+    if (a_span.begin_ps() < b_span.begin_ps()) {\n+      return true;\n+    }\n+    if (a_span.begin_ps() > b_span.begin_ps()) {\n+      return false;\n+    }\n     return a_span.duration_ps() < b_span.duration_ps();\n   });\n   return events;"
        }
    ],
    "stats": {
        "total": 135,
        "additions": 81,
        "deletions": 54
    }
}