{
    "author": "AusarYao28",
    "message": "Reverts 42eb0dbe341e4b16f829da6f123b57ee460906a9\n\nPiperOrigin-RevId: 831009555",
    "sha": "20b7e54c6769e3920e62cdd340a9d6a6d1a56c80",
    "files": [
        {
            "sha": "736463ec5441c645e1441b0b2444a9d2561eb2b0",
            "filename": "third_party/xla/.github/workflows/bazel_query.yml",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/20b7e54c6769e3920e62cdd340a9d6a6d1a56c80/third_party%2Fxla%2F.github%2Fworkflows%2Fbazel_query.yml",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/20b7e54c6769e3920e62cdd340a9d6a6d1a56c80/third_party%2Fxla%2F.github%2Fworkflows%2Fbazel_query.yml",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2F.github%2Fworkflows%2Fbazel_query.yml?ref=20b7e54c6769e3920e62cdd340a9d6a6d1a56c80",
            "patch": "@@ -41,8 +41,8 @@ jobs:\n         run: parallel --ungroup --retries 3 --delay 15 --nonall -- bazelisk build --nobuild //xla/...\n       - name: \"Run bazel query //xla/...\"\n         run: bazelisk query //xla/... > /dev/null\n-      # - name: \"Run bazel query deps(//xla/...)\"\n-      #   run: bazelisk query \"deps(//xla/...)\" > /dev/null\n-      # - name: \"Check that TSL doesn't depend on XLA\"\n-      #  run: |\n-      #    bazelisk query \"somepath(//xla/tsl/..., //xla/... -//xla/tsl/...)\" |& tee /dev/fd/2 | grep -q \"INFO: Empty results\"\n+      - name: \"Run bazel query deps(//xla/...)\"\n+        run: bazelisk query \"deps(//xla/...)\" > /dev/null\n+      - name: \"Check that TSL doesn't depend on XLA\"\n+        run: |\n+          bazelisk query \"somepath(//xla/tsl/..., //xla/... -//xla/tsl/...)\" |& tee /dev/fd/2 | grep -q \"INFO: Empty results\""
        },
        {
            "sha": "f4dc3f2539978af907c7cf5613aa0b6e45093da7",
            "filename": "third_party/xla/workspace0.bzl",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/20b7e54c6769e3920e62cdd340a9d6a6d1a56c80/third_party%2Fxla%2Fworkspace0.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/20b7e54c6769e3920e62cdd340a9d6a6d1a56c80/third_party%2Fxla%2Fworkspace0.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fworkspace0.bzl?ref=20b7e54c6769e3920e62cdd340a9d6a6d1a56c80",
            "patch": "@@ -6,6 +6,7 @@ load(\"@build_bazel_apple_support//lib:repositories.bzl\", \"apple_support_dependen\n load(\"@build_bazel_rules_apple//apple:repositories.bzl\", \"apple_rules_dependencies\")\n load(\"@build_bazel_rules_swift//swift:repositories.bzl\", \"swift_rules_dependencies\")\n load(\"@com_github_grpc_grpc//bazel:grpc_extra_deps.bzl\", \"grpc_extra_deps\")\n+load(\"@com_google_benchmark//:bazel/benchmark_deps.bzl\", \"benchmark_deps\")\n \n def _tf_bind():\n     \"\"\"Bind targets for some external repositories\"\"\"\n@@ -130,6 +131,9 @@ def workspace():\n     swift_rules_dependencies()\n     apple_support_dependencies()\n \n+    # We only need `benchmark_deps` to be able to have bazel query to work and not complain about missing `@libpfm`.\n+    benchmark_deps()\n+\n     # TODO(yuriit): Remove this once the rules_ml_toolchain is added to WORKSPACE files of all ML projects.\n     # Toolchains for ML projects hermetic builds.\n     # Details: https://github.com/google-ml-infra/rules_ml_toolchain"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 9,
        "deletions": 5
    }
}