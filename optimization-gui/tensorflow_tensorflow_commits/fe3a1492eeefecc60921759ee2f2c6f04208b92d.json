{
    "author": "tensorflower-gardener",
    "message": "Integrate LLVM at llvm/llvm-project@355e0f94af5a\n\nUpdates LLVM usage to match\n[355e0f94af5a](https://github.com/llvm/llvm-project/commit/355e0f94af5a)\n\nPiperOrigin-RevId: 834865231",
    "sha": "fe3a1492eeefecc60921759ee2f2c6f04208b92d",
    "files": [
        {
            "sha": "3fcb99ad26eec19e3bbdec3afee2d1c8a23bce03",
            "filename": "third_party/xla/third_party/llvm/generated.patch",
            "status": "modified",
            "additions": 179,
            "deletions": 124,
            "changes": 303,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fllvm%2Fgenerated.patch?ref=fe3a1492eeefecc60921759ee2f2c6f04208b92d",
            "patch": "@@ -1,53 +1,144 @@\n Auto generated patch. Do not edit or delete it, even if empty.\n-diff -ruN --strip-trailing-cr a/libc/src/stdio/printf_core/vfprintf_internal.h b/libc/src/stdio/printf_core/vfprintf_internal.h\n---- a/libc/src/stdio/printf_core/vfprintf_internal.h\n-+++ b/libc/src/stdio/printf_core/vfprintf_internal.h\n-@@ -51,8 +51,11 @@\n- LIBC_INLINE FileIOResult fwrite_unlocked(const void *ptr, size_t size,\n-                                          size_t nmemb, ::FILE *f) {\n-   // Need to use system errno in this case, as system write will set this errno\n--  // which we need to propagate back into our code.\n--  return {::fwrite_unlocked(ptr, size, nmemb, f), errno};\n-+  // which we need to propagate back into our code. fwrite only modifies errno\n-+  // if there was an error, and errno may have previously been nonzero. Only\n-+  // return errno if there was an error.\n-+  size_t members_written = ::fwrite_unlocked(ptr, size, nmemb, f);\n-+  return {members_written, members_written == nmemb ? 0 : errno};\n- }\n- #endif // LIBC_COPT_STDIO_USE_SYSTEM_FILE\n- } // namespace internal\n-diff -ruN --strip-trailing-cr a/libcxx/include/fstream b/libcxx/include/fstream\n---- a/libcxx/include/fstream\n-+++ b/libcxx/include/fstream\n-@@ -315,8 +315,14 @@\n-         traits_type::copy(__str, this->gptr(), __n);\n-         this->__gbump_ptrdiff(__n);\n+diff -ruN --strip-trailing-cr a/libcxx/include/__hash_table b/libcxx/include/__hash_table\n+--- a/libcxx/include/__hash_table\n++++ b/libcxx/include/__hash_table\n+@@ -1910,6 +1910,8 @@\n+         __bucket_list_[__next_chash] = __before_first;\n+         __chash                      = __next_chash;\n        }\n--      if (__len - __n >= this->egptr() - this->eback())\n--        return std::fread(__str + __n, sizeof(char_type), __len - __n, __file_);\n-+      const streamsize __remainder    = __len - __n;\n-+      const streamsize __buffer_space = this->egptr() - this->eback();\n-+\n-+      if (__remainder >= __buffer_space)\n-+        return std::fread(__str + __n, sizeof(char_type), __remainder, __file_) + __n;\n-+      else if (__remainder > 0)\n-+        return basic_streambuf<_CharT, _Traits>::xsgetn(__str + __n, __remainder) + __n;\n-+      return __n;\n++    } else { // When __next is a nullptr we've fully erased the last bucket. Update the bucket list accordingly.\n++      __bucket_list_[__chash] = nullptr;\n      }\n-     return basic_streambuf<_CharT, _Traits>::xsgetn(__str, __len);\n    }\n-diff -ruN --strip-trailing-cr a/llvm/lib/Passes/PassBuilderPipelines.cpp b/llvm/lib/Passes/PassBuilderPipelines.cpp\n---- a/llvm/lib/Passes/PassBuilderPipelines.cpp\n-+++ b/llvm/lib/Passes/PassBuilderPipelines.cpp\n-@@ -228,7 +228,7 @@\n- static cl::opt<bool>\n-     EnableDFAJumpThreading(\"enable-dfa-jump-thread\",\n-                            cl::desc(\"Enable DFA jump threading\"),\n--                           cl::init(true), cl::Hidden);\n-+                           cl::init(false), cl::Hidden);\n  \n- static cl::opt<bool>\n-     EnableHotColdSplit(\"hot-cold-split\",\n+diff -ruN --strip-trailing-cr a/libcxx/test/std/containers/unord/unord.map/unord.map.modifiers/erase_range.pass.cpp b/libcxx/test/std/containers/unord/unord.map/unord.map.modifiers/erase_range.pass.cpp\n+--- a/libcxx/test/std/containers/unord/unord.map/unord.map.modifiers/erase_range.pass.cpp\n++++ b/libcxx/test/std/containers/unord/unord.map/unord.map.modifiers/erase_range.pass.cpp\n+@@ -57,6 +57,28 @@\n+     assert(c.size() == 0);\n+     assert(k == c.end());\n+   }\n++  { // Make sure that we're properly updating the bucket list when we're erasing to the end\n++    std::unordered_map<int, int> m;\n++    m.insert(std::make_pair(1, 1));\n++    m.insert(std::make_pair(2, 2));\n++\n++    {\n++      auto pair = m.equal_range(1);\n++      assert(pair.first != pair.second);\n++      m.erase(pair.first, pair.second);\n++    }\n++\n++    {\n++      auto pair = m.equal_range(2);\n++      assert(pair.first != pair.second);\n++      m.erase(pair.first, pair.second);\n++    }\n++\n++    m.insert(std::make_pair(3, 3));\n++    assert(m.size() == 1);\n++    assert(*m.begin() == std::make_pair(3, 3));\n++    assert(++m.begin() == m.end());\n++  }\n+ #if TEST_STD_VER >= 11\n+   {\n+     typedef std::unordered_map<int,\n+diff -ruN --strip-trailing-cr a/libcxx/test/std/containers/unord/unord.multimap/unord.multimap.modifiers/erase_range.pass.cpp b/libcxx/test/std/containers/unord/unord.multimap/unord.multimap.modifiers/erase_range.pass.cpp\n+--- a/libcxx/test/std/containers/unord/unord.multimap/unord.multimap.modifiers/erase_range.pass.cpp\n++++ b/libcxx/test/std/containers/unord/unord.multimap/unord.multimap.modifiers/erase_range.pass.cpp\n+@@ -122,6 +122,28 @@\n+     for (const auto& v : map)\n+       assert(v.first == 1 || v.first == collision_val);\n+   }\n++  { // Make sure that we're properly updating the bucket list when we're erasing to the end\n++    std::unordered_multimap<int, int> m;\n++    m.insert(std::make_pair(1, 1));\n++    m.insert(std::make_pair(2, 2));\n++\n++    {\n++      auto pair = m.equal_range(1);\n++      assert(pair.first != pair.second);\n++      m.erase(pair.first, pair.second);\n++    }\n++\n++    {\n++      auto pair = m.equal_range(2);\n++      assert(pair.first != pair.second);\n++      m.erase(pair.first, pair.second);\n++    }\n++\n++    m.insert(std::make_pair(3, 3));\n++    assert(m.size() == 1);\n++    assert(*m.begin() == std::make_pair(3, 3));\n++    assert(++m.begin() == m.end());\n++  }\n+ #if TEST_STD_VER >= 11\n+   {\n+     typedef std::unordered_multimap<int,\n+diff -ruN --strip-trailing-cr a/libcxx/test/std/containers/unord/unord.multiset/erase_range.pass.cpp b/libcxx/test/std/containers/unord/unord.multiset/erase_range.pass.cpp\n+--- a/libcxx/test/std/containers/unord/unord.multiset/erase_range.pass.cpp\n++++ b/libcxx/test/std/containers/unord/unord.multiset/erase_range.pass.cpp\n+@@ -64,6 +64,28 @@\n+     for (const auto& v : map)\n+       assert(v == 1 || v == collision_val);\n+   }\n++  { // Make sure that we're properly updating the bucket list when we're erasing to the end\n++    std::unordered_multiset<int> m;\n++    m.insert(1);\n++    m.insert(2);\n++\n++    {\n++      auto pair = m.equal_range(1);\n++      assert(pair.first != pair.second);\n++      m.erase(pair.first, pair.second);\n++    }\n++\n++    {\n++      auto pair = m.equal_range(2);\n++      assert(pair.first != pair.second);\n++      m.erase(pair.first, pair.second);\n++    }\n++\n++    m.insert(3);\n++    assert(m.size() == 1);\n++    assert(*m.begin() == 3);\n++    assert(++m.begin() == m.end());\n++  }\n+ #if TEST_STD_VER >= 11\n+   {\n+     typedef std::unordered_multiset<int, std::hash<int>, std::equal_to<int>, min_allocator<int>> C;\n+diff -ruN --strip-trailing-cr a/libcxx/test/std/containers/unord/unord.set/erase_range.pass.cpp b/libcxx/test/std/containers/unord/unord.set/erase_range.pass.cpp\n+--- a/libcxx/test/std/containers/unord/unord.set/erase_range.pass.cpp\n++++ b/libcxx/test/std/containers/unord/unord.set/erase_range.pass.cpp\n+@@ -47,6 +47,28 @@\n+     assert(c.size() == 0);\n+     assert(k == c.end());\n+   }\n++  { // Make sure that we're properly updating the bucket list when we're erasing to the end\n++    std::unordered_set<int> m;\n++    m.insert(1);\n++    m.insert(2);\n++\n++    {\n++      auto pair = m.equal_range(1);\n++      assert(pair.first != pair.second);\n++      m.erase(pair.first, pair.second);\n++    }\n++\n++    {\n++      auto pair = m.equal_range(2);\n++      assert(pair.first != pair.second);\n++      m.erase(pair.first, pair.second);\n++    }\n++\n++    m.insert(3);\n++    assert(m.size() == 1);\n++    assert(*m.begin() == 3);\n++    assert(++m.begin() == m.end());\n++  }\n+ #if TEST_STD_VER >= 11\n+   {\n+     typedef std::unordered_set<int, std::hash<int>, std::equal_to<int>, min_allocator<int>> C;\n diff -ruN --strip-trailing-cr a/llvm/lib/Transforms/Scalar/IndVarSimplify.cpp b/llvm/lib/Transforms/Scalar/IndVarSimplify.cpp\n --- a/llvm/lib/Transforms/Scalar/IndVarSimplify.cpp\n +++ b/llvm/lib/Transforms/Scalar/IndVarSimplify.cpp\n@@ -60,7 +151,7 @@ diff -ruN --strip-trailing-cr a/llvm/lib/Transforms/Scalar/IndVarSimplify.cpp b/\n  public:\n    IndVarSimplify(LoopInfo *LI, ScalarEvolution *SE, DominatorTree *DT,\n                   const DataLayout &DL, TargetLibraryInfo *TLI,\n-@@ -1077,6 +1079,85 @@\n+@@ -1091,6 +1093,85 @@\n    return true;\n  }\n  \n@@ -146,7 +237,7 @@ diff -ruN --strip-trailing-cr a/llvm/lib/Transforms/Scalar/IndVarSimplify.cpp b/\n  static void replaceExitCond(BranchInst *BI, Value *NewCond,\n                              SmallVectorImpl<WeakTrackingVH> &DeadInsts) {\n    auto *OldCond = BI->getCondition();\n-@@ -1984,6 +2065,10 @@\n+@@ -1998,6 +2079,10 @@\n  \n    // The Rewriter may not be used from this point on.\n  \n@@ -493,83 +584,6 @@ diff -ruN --strip-trailing-cr a/llvm/test/CodeGen/PowerPC/combine-sext-and-shl-a\n  ; CHECK-P9-BE-NEXT:    #\n  ; CHECK-P9-BE-NEXT:    ld r4, 0(r3)\n  ; CHECK-P9-BE-NEXT:    extswsli r5, r29, 2\n-diff -ruN --strip-trailing-cr a/llvm/test/Other/new-pm-defaults.ll b/llvm/test/Other/new-pm-defaults.ll\n---- a/llvm/test/Other/new-pm-defaults.ll\n-+++ b/llvm/test/Other/new-pm-defaults.ll\n-@@ -208,7 +208,6 @@\n- ; CHECK-O-NEXT: Running analysis: DemandedBitsAnalysis\n- ; CHECK-O-NEXT: Running pass: InstCombinePass\n- ; CHECK-EP-PEEPHOLE-NEXT: Running pass: NoOpFunctionPass\n--; CHECK-O23SZ-NEXT: Running pass: DFAJumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running pass: JumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running analysis: LazyValueAnalysis\n- ; CHECK-O23SZ-NEXT: Running pass: CorrelatedValuePropagationPass\n-diff -ruN --strip-trailing-cr a/llvm/test/Other/new-pm-thinlto-postlink-defaults.ll b/llvm/test/Other/new-pm-thinlto-postlink-defaults.ll\n---- a/llvm/test/Other/new-pm-thinlto-postlink-defaults.ll\n-+++ b/llvm/test/Other/new-pm-thinlto-postlink-defaults.ll\n-@@ -133,7 +133,6 @@\n- ; CHECK-O-NEXT: Running pass: BDCEPass\n- ; CHECK-O-NEXT: Running analysis: DemandedBitsAnalysis\n- ; CHECK-O-NEXT: Running pass: InstCombinePass\n--; CHECK-O23SZ-NEXT: Running pass: DFAJumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running pass: JumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running analysis: LazyValueAnalysis\n- ; CHECK-O23SZ-NEXT: Running pass: CorrelatedValuePropagationPass\n-diff -ruN --strip-trailing-cr a/llvm/test/Other/new-pm-thinlto-postlink-pgo-defaults.ll b/llvm/test/Other/new-pm-thinlto-postlink-pgo-defaults.ll\n---- a/llvm/test/Other/new-pm-thinlto-postlink-pgo-defaults.ll\n-+++ b/llvm/test/Other/new-pm-thinlto-postlink-pgo-defaults.ll\n-@@ -118,7 +118,6 @@\n- ; CHECK-O-NEXT: Running pass: BDCEPass\n- ; CHECK-O-NEXT: Running analysis: DemandedBitsAnalysis\n- ; CHECK-O-NEXT: Running pass: InstCombinePass\n--; CHECK-O23SZ-NEXT: Running pass: DFAJumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running pass: JumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running analysis: LazyValueAnalysis\n- ; CHECK-O23SZ-NEXT: Running pass: CorrelatedValuePropagationPass\n-diff -ruN --strip-trailing-cr a/llvm/test/Other/new-pm-thinlto-postlink-samplepgo-defaults.ll b/llvm/test/Other/new-pm-thinlto-postlink-samplepgo-defaults.ll\n---- a/llvm/test/Other/new-pm-thinlto-postlink-samplepgo-defaults.ll\n-+++ b/llvm/test/Other/new-pm-thinlto-postlink-samplepgo-defaults.ll\n-@@ -127,7 +127,6 @@\n- ; CHECK-O-NEXT: Running pass: BDCEPass\n- ; CHECK-O-NEXT: Running analysis: DemandedBitsAnalysis\n- ; CHECK-O-NEXT: Running pass: InstCombinePass\n--; CHECK-O23SZ-NEXT: Running pass: DFAJumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running pass: JumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running analysis: LazyValueAnalysis\n- ; CHECK-O23SZ-NEXT: Running pass: CorrelatedValuePropagationPass\n-diff -ruN --strip-trailing-cr a/llvm/test/Other/new-pm-thinlto-prelink-defaults.ll b/llvm/test/Other/new-pm-thinlto-prelink-defaults.ll\n---- a/llvm/test/Other/new-pm-thinlto-prelink-defaults.ll\n-+++ b/llvm/test/Other/new-pm-thinlto-prelink-defaults.ll\n-@@ -165,7 +165,6 @@\n- ; CHECK-O-NEXT: Running pass: BDCEPass\n- ; CHECK-O-NEXT: Running analysis: DemandedBitsAnalysis\n- ; CHECK-O-NEXT: Running pass: InstCombinePass\n--; CHECK-O23SZ-NEXT: Running pass: DFAJumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running pass: JumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running analysis: LazyValueAnalysis\n- ; CHECK-O23SZ-NEXT: Running pass: CorrelatedValuePropagationPass\n-diff -ruN --strip-trailing-cr a/llvm/test/Other/new-pm-thinlto-prelink-pgo-defaults.ll b/llvm/test/Other/new-pm-thinlto-prelink-pgo-defaults.ll\n---- a/llvm/test/Other/new-pm-thinlto-prelink-pgo-defaults.ll\n-+++ b/llvm/test/Other/new-pm-thinlto-prelink-pgo-defaults.ll\n-@@ -167,7 +167,6 @@\n- ; CHECK-O-NEXT: Running pass: BDCEPass\n- ; CHECK-O-NEXT: Running analysis: DemandedBitsAnalysis\n- ; CHECK-O-NEXT: Running pass: InstCombinePass\n--; CHECK-O23SZ-NEXT: Running pass: DFAJumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running pass: JumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running analysis: LazyValueAnalysis\n- ; CHECK-O23SZ-NEXT: Running pass: CorrelatedValuePropagationPass\n-diff -ruN --strip-trailing-cr a/llvm/test/Other/new-pm-thinlto-prelink-samplepgo-defaults.ll b/llvm/test/Other/new-pm-thinlto-prelink-samplepgo-defaults.ll\n---- a/llvm/test/Other/new-pm-thinlto-prelink-samplepgo-defaults.ll\n-+++ b/llvm/test/Other/new-pm-thinlto-prelink-samplepgo-defaults.ll\n-@@ -131,7 +131,6 @@\n- ; CHECK-O-NEXT: Running pass: BDCEPass\n- ; CHECK-O-NEXT: Running analysis: DemandedBitsAnalysis\n- ; CHECK-O-NEXT: Running pass: InstCombinePass\n--; CHECK-O23SZ-NEXT: Running pass: DFAJumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running pass: JumpThreadingPass\n- ; CHECK-O23SZ-NEXT: Running analysis: LazyValueAnalysis\n- ; CHECK-O23SZ-NEXT: Running pass: CorrelatedValuePropagationPass\n diff -ruN --strip-trailing-cr a/llvm/test/Transforms/IndVarSimplify/AMDGPU/addrspace-7-doesnt-crash.ll b/llvm/test/Transforms/IndVarSimplify/AMDGPU/addrspace-7-doesnt-crash.ll\n --- a/llvm/test/Transforms/IndVarSimplify/AMDGPU/addrspace-7-doesnt-crash.ll\n +++ b/llvm/test/Transforms/IndVarSimplify/AMDGPU/addrspace-7-doesnt-crash.ll\n@@ -1776,3 +1790,44 @@ diff -ruN --strip-trailing-cr a/llvm/test/Transforms/PhaseOrdering/X86/vdiv.ll b\n +; CHECK: [[META12]] = !{!\"llvm.loop.unroll.disable\"}\n +; CHECK: [[LOOP13]] = distinct !{[[LOOP13]], [[META8]]}\n  ;.\n+diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel b/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel\n+--- a/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel\n++++ b/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel\n+@@ -9794,6 +9794,29 @@\n+     deps = [\":mlir_float16_utils\"],\n+ )\n+ \n++cc_library(\n++    name = \"_mlir_apfloat_utils\",\n++    srcs = [\"lib/ExecutionEngine/APFloatWrappers.cpp\"],\n++    defines = [\"mlir_apfloat_wrappers_EXPORTS\"],\n++    includes = [\"include\"],\n++    deps = [\n++        \"//llvm:Support\",\n++    ],\n++)\n++\n++# Indirection to avoid 'libmlir_apfloat_utils.so' filename clash.\n++alias(\n++    name = \"mlir_apfloat_utils\",\n++    actual = \"_mlir_apfloat_utils\",\n++)\n++\n++cc_binary(\n++    name = \"libmlir_apfloat_utils.so\",\n++    linkshared = True,\n++    linkstatic = False,\n++    deps = [\":mlir_apfloat_utils\"],\n++)\n++\n+ # Unlike mlir_float16_utils, mlir_c_runner_utils, etc, we do *not* make\n+ # this a shared library: because on the CMake side, doing so causes issues\n+ # when building on Windows.  In particular, various functions take/return\n+@@ -9837,6 +9860,7 @@\n+     deps = [\n+         \":SparseTensorEnums\",\n+         \":SparseTensorRuntime\",\n++        \":mlir_apfloat_utils\",\n+         \":mlir_float16_utils\",\n+         \"//llvm:Support\",\n+     ],"
        },
        {
            "sha": "855355c45f663912bea203efefe024986796f56d",
            "filename": "third_party/xla/third_party/llvm/workspace.bzl",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fllvm%2Fworkspace.bzl?ref=fe3a1492eeefecc60921759ee2f2c6f04208b92d",
            "patch": "@@ -4,8 +4,8 @@ load(\"//third_party:repo.bzl\", \"tf_http_archive\")\n \n def repo(name):\n     \"\"\"Imports LLVM.\"\"\"\n-    LLVM_COMMIT = \"741ba8209c1f9bd5b1a145d9c137f5e18bfffb84\"\n-    LLVM_SHA256 = \"45f2faa4d50e9f333c4130c23f3a712cf42f8f8fec4520207f6514344f8b32b0\"\n+    LLVM_COMMIT = \"355e0f94af5adabe90ac57110ce1b47596afd4cd\"\n+    LLVM_SHA256 = \"70762c09d25dc7aaa23856338c5dd14a72faf85ecd4362d3267ec99427db95f8\"\n \n     tf_http_archive(\n         name = name,"
        },
        {
            "sha": "7f92eb5c2a5118f0486f8c2d912ad95462f4c71d",
            "filename": "third_party/xla/third_party/shardy/temporary.patch",
            "status": "modified",
            "additions": 324,
            "deletions": 1649,
            "changes": 1973,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fshardy%2Ftemporary.patch?ref=fe3a1492eeefecc60921759ee2f2c6f04208b92d"
        },
        {
            "sha": "655f504b33bf913ca597490fe09e3950cf00cbfb",
            "filename": "third_party/xla/third_party/shardy/workspace.bzl",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fshardy%2Fworkspace.bzl?ref=fe3a1492eeefecc60921759ee2f2c6f04208b92d",
            "patch": "@@ -3,8 +3,8 @@\n load(\"//third_party:repo.bzl\", \"tf_http_archive\", \"tf_mirror_urls\")\n \n def repo():\n-    SHARDY_COMMIT = \"c898ed01ccd83579bdb8e9cdba685ed5f188066e\"\n-    SHARDY_SHA256 = \"6a39d72a85322e333f834aae9df3731cd9e594fc07fd360985a4076c9bff7bf0\"\n+    SHARDY_COMMIT = \"44f89b834dc884b4988565e541cf072ee340f000\"\n+    SHARDY_SHA256 = \"e103bbc826604f966959fc48c25713425452d3eb83b548d592e784f794ebc8ab\"\n \n     tf_http_archive(\n         name = \"shardy\","
        },
        {
            "sha": "f2a151c730ca5667a756dfd603059c827cac669f",
            "filename": "third_party/xla/third_party/triton/llvm_integration/cl833447018.patch",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fcl833447018.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fcl833447018.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fcl833447018.patch?ref=fe3a1492eeefecc60921759ee2f2c6f04208b92d",
            "patch": "@@ -0,0 +1,22 @@\n+\n+--- a/third_party/nvidia/lib/TritonNVIDIAGPUToLLVM/ConvertWarpSpecializeToLLVM.cpp\t2025-10-15 10:11:13.000000000 -0700\n++++ b/third_party/nvidia/lib/TritonNVIDIAGPUToLLVM/ConvertWarpSpecializeToLLVM.cpp\t2025-11-20 11:24:12.000000000 -0800\n+@@ -7,6 +7,7 @@\n+ #include \"mlir/Dialect/LLVMIR/NVVMDialect.h\"\n+ #include \"mlir/IR/BuiltinOps.h\"\n+ #include \"mlir/IR/ImplicitLocOpBuilder.h\"\n++#include \"mlir/IR/TypeRange.h\"\n+ #include \"mlir/Pass/PassManager.h\"\n+ #include \"mlir/Transforms/GreedyPatternRewriteDriver.h\"\n+ #include \"triton/Conversion/TritonGPUToLLVM/Passes.h\"\n+@@ -91,7 +92,9 @@\n+   if (numThreads == 32)\n+     LLVM::NVIDIA::createSyncWarp(b.getLoc(), b);\n+   else\n+-    b.create<NVVM::BarrierOp>(b.i32_val(barIdx), b.i32_val(numThreads));\n++    mlir::NVVM::BarrierOp::create(b, b.getLoc(), mlir::TypeRange(),\n++                                  b.i32_val(barIdx), b.i32_val(numThreads), {},\n++                                  {});\n+ }\n+ \n+ static void createAllBarrier(TritonLLVMIRRewriter &b, unsigned barIdx) {"
        },
        {
            "sha": "c2834d8afc853cd2d93763fd0a48a3403287284d",
            "filename": "third_party/xla/third_party/triton/llvm_integration/series.bzl",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fseries.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fe3a1492eeefecc60921759ee2f2c6f04208b92d/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fseries.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftriton%2Fllvm_integration%2Fseries.bzl?ref=fe3a1492eeefecc60921759ee2f2c6f04208b92d",
            "patch": "@@ -9,5 +9,6 @@ LLVM nor MLIR integrator, please do not add any patches to this list.\n \n llvm_patch_list = [\n     \"//third_party/triton:llvm_integration/cl831451347.patch\",\n+    \"//third_party/triton:llvm_integration/cl833447018.patch\",\n     # Add new patches just above this line\n ]"
        }
    ],
    "stats": {
        "total": 2307,
        "additions": 530,
        "deletions": 1777
    }
}