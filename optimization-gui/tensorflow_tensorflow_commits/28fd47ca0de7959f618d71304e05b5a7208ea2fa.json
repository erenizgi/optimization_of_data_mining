{
    "author": "tensorflower-gardener",
    "message": "#HLODiffService Add forced mapping options to HLO Diff backend.\n\nPiperOrigin-RevId: 817818436",
    "sha": "28fd47ca0de7959f618d71304e05b5a7208ea2fa",
    "files": [
        {
            "sha": "a8f343e857d8684765fb06e64a0da1e47c9d7226",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/hlo_gumgraph_diff.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_gumgraph_diff.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_gumgraph_diff.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_gumgraph_diff.cc?ref=28fd47ca0de7959f618d71304e05b5a7208ea2fa",
            "patch": "@@ -15,6 +15,7 @@\n #include \"xla/hlo/tools/hlo_diff/hlo_gumgraph_diff.h\"\n \n #include <memory>\n+#include <string>\n #include <utility>\n #include <vector>\n \n@@ -49,8 +50,8 @@ namespace {\n \n absl::StatusOr<std::unique_ptr<const HloGumgraphMappings>> FindMappings(\n     const HloGumgraph& left, const HloGumgraph& right,\n-    absl::Span<const std::pair<absl::string_view, absl::string_view>>\n-        manual_mappings = {},\n+    const std::vector<std::pair<std::string, std::string>>& manual_mappings =\n+        {},\n     const MatchOptions& options = {}) {\n   LOG(INFO) << \"Running Matchers\";\n   auto mappings = std::make_unique<HloGumgraphMappings>();"
        },
        {
            "sha": "6a7717ee862a55ad5be11d0144e4dbfee0a8a54c",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/hlo_gumgraph_diff.h",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_gumgraph_diff.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_gumgraph_diff.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fhlo_gumgraph_diff.h?ref=28fd47ca0de7959f618d71304e05b5a7208ea2fa",
            "patch": "@@ -18,11 +18,11 @@\n #define XLA_HLO_TOOLS_HLO_DIFF_HLO_GUMGRAPH_DIFF_H_\n \n #include <memory>\n+#include <string>\n #include <utility>\n+#include <vector>\n \n #include \"absl/status/statusor.h\"\n-#include \"absl/strings/string_view.h\"\n-#include \"absl/types/span.h\"\n #include \"xla/hlo/ir/hlo_instruction.h\"\n #include \"xla/hlo/tools/hlo_diff/graph/hlo_gumgraph.h\"\n #include \"xla/hlo/tools/hlo_diff/hlo_diff_eval.h\"\n@@ -38,8 +38,7 @@ struct DiffOptions {\n   HloGumgraphFingerprintOptions fingerprint_options;\n   MatchOptions match_options;\n   bool run_eval = false;\n-  absl::Span<const std::pair<absl::string_view, absl::string_view>>\n-      manual_mappings;\n+  std::vector<std::pair<std::string, std::string>> manual_mappings;\n };\n \n struct HloGumgraphDiffResults {"
        },
        {
            "sha": "1a0e8990b7e53de497e14c24d08d12eb9f057c49",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/matchers/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2FBUILD?ref=28fd47ca0de7959f618d71304e05b5a7208ea2fa",
            "patch": "@@ -212,7 +212,6 @@ cc_library(\n         \"//xla/hlo/tools/hlo_diff/graph:hlo_gumgraph_node\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:die_if_null\",\n-        \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/types:span\",\n     ],\n )\n@@ -228,8 +227,6 @@ xla_cc_test(\n         \"//xla/hlo/tools/hlo_diff/graph:hlo_gumgraph\",\n         \"//xla/hlo/tools/hlo_diff/utils:test_util\",\n         \"//xla/tsl/platform:statusor\",\n-        \"@com_google_absl//absl/strings:string_view\",\n-        \"@com_google_absl//absl/types:span\",\n         \"@com_google_googletest//:gtest_main\",\n     ],\n )"
        },
        {
            "sha": "b789c70817d54c7b2f8b6b4463b7c15ac26767b6",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/matchers/manual_matcher.h",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2Fmanual_matcher.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2Fmanual_matcher.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2Fmanual_matcher.h?ref=28fd47ca0de7959f618d71304e05b5a7208ea2fa",
            "patch": "@@ -16,10 +16,10 @@ limitations under the License.\n #ifndef XLA_HLO_TOOLS_HLO_DIFF_MATCHERS_MANUAL_MATCHER_H_\n #define XLA_HLO_TOOLS_HLO_DIFF_MATCHERS_MANUAL_MATCHER_H_\n \n+#include <string>\n #include <utility>\n \n #include \"absl/log/die_if_null.h\"\n-#include \"absl/strings/string_view.h\"\n #include \"absl/types/span.h\"\n #include \"xla/hlo/tools/hlo_diff/graph/hlo_gumgraph.h\"\n #include \"xla/hlo/tools/hlo_diff/hlo_gumgraph_mappings.h\"\n@@ -30,11 +30,10 @@ namespace xla::hlo_diff {\n // Matcher that matches manually input nodes.\n class ManualMatcher : public HloGumgraphMatcher {\n  public:\n-  ManualMatcher(\n-      const HloGumgraph* left, const HloGumgraph* right,\n-      const absl::Span<const std::pair<absl::string_view, absl::string_view>>\n-          nodes_to_match,\n-      bool debug_mode = false)\n+  ManualMatcher(const HloGumgraph* left, const HloGumgraph* right,\n+                const absl::Span<const std::pair<std::string, std::string>>\n+                    nodes_to_match,\n+                bool debug_mode = false)\n       : HloGumgraphMatcher(MatcherType::kManual, debug_mode),\n         left_(*ABSL_DIE_IF_NULL(left)),\n         right_(*ABSL_DIE_IF_NULL(right)),\n@@ -44,8 +43,7 @@ class ManualMatcher : public HloGumgraphMatcher {\n  private:\n   const HloGumgraph& left_;\n   const HloGumgraph& right_;\n-  const absl::Span<const std::pair<absl::string_view, absl::string_view>>\n-      nodes_to_match_;\n+  const absl::Span<const std::pair<std::string, std::string>> nodes_to_match_;\n };\n }  // namespace xla::hlo_diff\n #endif  // XLA_HLO_TOOLS_HLO_DIFF_MATCHERS_MANUAL_MATCHER_H_"
        },
        {
            "sha": "e4ee57678c446ec1575c0af44216bbfe4b2db5d8",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/matchers/manual_matcher_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2Fmanual_matcher_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/28fd47ca0de7959f618d71304e05b5a7208ea2fa/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2Fmanual_matcher_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Fmatchers%2Fmanual_matcher_test.cc?ref=28fd47ca0de7959f618d71304e05b5a7208ea2fa",
            "patch": "@@ -22,7 +22,6 @@ limitations under the License.\n \n #include <gmock/gmock.h>\n #include <gtest/gtest.h>\n-#include \"absl/strings/string_view.h\"\n #include \"xla/hlo/testlib/hlo_hardware_independent_test_base.h\"\n #include \"xla/hlo/testlib/verified_hlo_module.h\"\n #include \"xla/hlo/tools/hlo_diff/graph/hlo_gumgraph.h\"\n@@ -68,9 +67,9 @@ TEST_F(ManualMatcherTest, ManualMatcherWorks) {\n                           HloGumgraph::Create(module_r.get()));\n \n   auto mappings = std::make_unique<HloGumgraphMappings>();\n-  std::vector<std::pair<absl::string_view, absl::string_view>> manual_mappings =\n-      {std::make_pair(\"add_1\", \"add_1\"), std::make_pair(\"foo\", \"foo\"),\n-       std::make_pair(\"baz\", \"baz\")};\n+  std::vector<std::pair<std::string, std::string>> manual_mappings = {\n+      std::make_pair(\"add_1\", \"add_1\"), std::make_pair(\"foo\", \"foo\"),\n+      std::make_pair(\"baz\", \"baz\")};\n   auto matcher = std::make_unique<ManualMatcher>(graph_l.get(), graph_r.get(),\n                                                  manual_mappings);\n   matcher->Match(*mappings);"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 15,
        "deletions": 21
    }
}