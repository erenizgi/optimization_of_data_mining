{
    "author": "mwhittaker",
    "message": "Change PjRt to use new copy of coordination service.\n\nPiperOrigin-RevId: 842365974",
    "sha": "d411e84d94174546f2d7b6a9e1a80a208bd4a554",
    "files": [
        {
            "sha": "fb1bdb6f7800f264b62f843c051ba54f5f0e2f96",
            "filename": "third_party/xla/xla/pjrt/distributed/BUILD",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2FBUILD?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -22,9 +22,9 @@ cc_library(\n     deps = [\n         \"//xla:types\",\n         \"//xla:util\",\n-        \"//xla/tsl/distributed_runtime/coordination:coordination_service\",\n+        \"//xla/pjrt/distributed/coordination:coordination_service\",\n+        \"//xla/pjrt/distributed/coordination:grpc_coordination_service_impl\",\n         \"//xla/tsl/distributed_runtime/rpc:async_service_interface\",\n-        \"//xla/tsl/distributed_runtime/rpc/coordination:grpc_coordination_service_impl\",\n         \"//xla/tsl/protobuf:coordination_config_proto_cc\",\n         \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n@@ -65,10 +65,10 @@ cc_library(\n     ],\n     deps = [\n         \":key_value_store_interface\",\n+        \"//xla/pjrt/distributed/coordination:coordination_client\",\n+        \"//xla/pjrt/distributed/coordination:coordination_service_agent\",\n+        \"//xla/pjrt/distributed/coordination:grpc_coordination_client\",\n         \"//xla/runtime:device_id\",\n-        \"//xla/tsl/distributed_runtime/coordination:coordination_client\",\n-        \"//xla/tsl/distributed_runtime/coordination:coordination_service_agent\",\n-        \"//xla/tsl/distributed_runtime/rpc/coordination:grpc_coordination_client\",\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/protobuf:coordination_config_proto_cc\",\n@@ -144,6 +144,7 @@ xla_cc_test(\n         \":service\",\n         \":topology_util\",\n         \"//xla:status_macros\",\n+        \"//xla/pjrt/distributed/coordination:coordination_service_agent\",\n         \"//xla/runtime:device_id\",\n         \"//xla/tsl/lib/core:status_test_util\",\n         \"//xla/tsl/platform:env\","
        },
        {
            "sha": "b6c3087a56f8086d5f070da3786f6c39eb0405b4",
            "filename": "third_party/xla/xla/pjrt/distributed/client.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fclient.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fclient.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fclient.cc?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -31,11 +31,11 @@ limitations under the License.\n #include \"absl/time/time.h\"\n #include \"absl/types/span.h\"\n #include \"grpcpp/channel.h\"\n+#include \"xla/pjrt/distributed/coordination/coordination_client.h\"\n+#include \"xla/pjrt/distributed/coordination/coordination_service_agent.h\"\n+#include \"xla/pjrt/distributed/coordination/grpc_coordination_client.h\"\n #include \"xla/pjrt/distributed/key_value_store_interface.h\"\n #include \"xla/runtime/device_id.h\"\n-#include \"xla/tsl/distributed_runtime/coordination/coordination_client.h\"\n-#include \"xla/tsl/distributed_runtime/coordination/coordination_service_agent.h\"\n-#include \"xla/tsl/distributed_runtime/rpc/coordination/grpc_coordination_client.h\"\n #include \"xla/tsl/platform/statusor.h\"\n #include \"xla/tsl/protobuf/coordination_config.pb.h\"\n #include \"xla/tsl/protobuf/coordination_service.pb.h\"\n@@ -73,11 +73,11 @@ class DistributedRuntimeCoordinationServiceClient\n   GetLiveNodesWithIncarnations(absl::Span<const int32_t> nodes) override;\n   absl::StatusOr<std::vector<int32_t>> GetLiveNodes(\n       absl::Span<const int32_t> nodes) override;\n-  absl::StatusOr<tsl::CoordinationServiceAgent*> GetCoordinationServiceAgent()\n+  absl::StatusOr<CoordinationServiceAgent*> GetCoordinationServiceAgent()\n       override;\n \n  private:\n-  std::unique_ptr<tsl::CoordinationServiceAgent> coord_agent_;\n+  std::unique_ptr<CoordinationServiceAgent> coord_agent_;\n   tensorflow::CoordinationServiceConfig config_;\n   absl::Duration min_connect_barrier_timeout_;\n   int task_id_;\n@@ -102,9 +102,9 @@ DistributedRuntimeCoordinationServiceClient::\n   config.set_poll_for_error_from_service_at_startup(\n       options.poll_for_error_from_service_at_startup);\n \n-  std::unique_ptr<tsl::CoordinationClient> leader_client;\n-  leader_client.reset(tsl::NewGrpcCoordinationClient(channel));\n-  coord_agent_ = tsl::CreateCoordinationServiceAgent();\n+  std::unique_ptr<CoordinationClient> leader_client;\n+  leader_client.reset(NewGrpcCoordinationClient(channel));\n+  coord_agent_ = CreateCoordinationServiceAgent();\n   const absl::Status status = coord_agent_->Initialize(\n       options.env, \"jax_worker\", options.node_id, config,\n       std::move(leader_client), options.missed_heartbeat_callback,\n@@ -232,12 +232,12 @@ DistributedRuntimeCoordinationServiceClient::GetLiveNodesWithIncarnations(\n \n   // Get the set of live tasks.\n   TF_ASSIGN_OR_RETURN(\n-      const std::vector<tsl::CoordinationServiceAgent::AliveTask> live_tasks,\n+      const std::vector<CoordinationServiceAgent::AliveTask> live_tasks,\n       coord_agent_->GetAliveTasks(tasks));\n \n   // Extract the node ids from the live tasks.\n   absl::flat_hash_map<int32_t, IncarnationId> live_nodes;\n-  for (const tsl::CoordinationServiceAgent::AliveTask& task : live_tasks) {\n+  for (const CoordinationServiceAgent::AliveTask& task : live_tasks) {\n     live_nodes[task.task_id] = task.incarnation_id;\n   }\n   return live_nodes;\n@@ -258,7 +258,7 @@ DistributedRuntimeCoordinationServiceClient::GetLiveNodes(\n   return live_nodes;\n }\n \n-absl::StatusOr<tsl::CoordinationServiceAgent*>\n+absl::StatusOr<CoordinationServiceAgent*>\n DistributedRuntimeCoordinationServiceClient::GetCoordinationServiceAgent() {\n   return coord_agent_.get();\n }"
        },
        {
            "sha": "01bab0d6f700c63198d8b4c02533659b82c732b6",
            "filename": "third_party/xla/xla/pjrt/distributed/client.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fclient.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fclient.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fclient.h?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -36,9 +36,9 @@ limitations under the License.\n #include \"xla/runtime/device_id.h\"\n #include \"xla/tsl/platform/env.h\"\n \n-namespace tsl {\n+namespace xla {\n class CoordinationServiceAgent;\n-}  // namespace tsl\n+}  // namespace xla\n \n namespace xla {\n \n@@ -165,7 +165,7 @@ class DistributedRuntimeClient {\n \n   // Returns pointer to coordination service agent, or InternalError if the\n   // client does not use coordination service.\n-  virtual absl::StatusOr<tsl::CoordinationServiceAgent*>\n+  virtual absl::StatusOr<CoordinationServiceAgent*>\n   GetCoordinationServiceAgent() = 0;\n };\n "
        },
        {
            "sha": "1f1a58f326c21be1a20200e126b5ec3258618455",
            "filename": "third_party/xla/xla/pjrt/distributed/service.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fservice.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fservice.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fservice.cc?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -24,17 +24,17 @@ limitations under the License.\n #include \"absl/time/clock.h\"\n #include \"absl/time/time.h\"\n #include \"grpcpp/server_builder.h\"\n-#include \"xla/tsl/distributed_runtime/coordination/coordination_service.h\"\n+#include \"xla/pjrt/distributed/coordination/coordination_service.h\"\n+#include \"xla/pjrt/distributed/coordination/grpc_coordination_service_impl.h\"\n #include \"xla/tsl/distributed_runtime/rpc/async_service_interface.h\"\n-#include \"xla/tsl/distributed_runtime/rpc/coordination/grpc_coordination_service_impl.h\"\n #include \"xla/tsl/protobuf/coordination_config.pb.h\"\n #include \"xla/util.h\"\n #include \"tsl/platform/env.h\"\n #include \"tsl/platform/threadpool.h\"\n \n namespace {\n \n-std::unique_ptr<tsl::CoordinationService> EnableCoordinationService(\n+std::unique_ptr<xla::CoordinationService> EnableCoordinationService(\n     const xla::CoordinationServiceImpl::Options& options) {\n   const std::string job_name = \"jax_worker\";\n   tensorflow::CoordinationServiceConfig config;\n@@ -52,7 +52,7 @@ std::unique_ptr<tsl::CoordinationService> EnableCoordinationService(\n   job->set_name(job_name);\n   job->set_num_tasks(options.num_nodes);\n   auto service =\n-      tsl::CoordinationService::Create(options.env, config, /*cache=*/nullptr);\n+      xla::CoordinationService::Create(options.env, config, /*cache=*/nullptr);\n   return service;\n }\n }  // namespace\n@@ -67,10 +67,10 @@ CoordinationServiceImpl::CoordinationServiceImpl(\n   coord_compute_pool_ = std::make_unique<tsl::thread::ThreadPool>(\n       options.env, \"CoordinationServiceRpcHandler\",\n       /*num_threads=*/4);\n-  coord_rpc_service_ = std::make_unique<tsl::GrpcCoordinationServiceImpl>(\n+  coord_rpc_service_ = std::make_unique<GrpcCoordinationServiceImpl>(\n       coord_compute_pool_.get(), builder);\n   auto* grpc_coord_service =\n-      static_cast<tsl::GrpcCoordinationServiceImpl*>(coord_rpc_service_.get());\n+      static_cast<GrpcCoordinationServiceImpl*>(coord_rpc_service_.get());\n   grpc_coord_service->SetCoordinationServiceInstance(coord_service_.get());\n   LOG(INFO) << \"Coordination service is enabled.\";\n }\n@@ -79,7 +79,7 @@ CoordinationServiceImpl::~CoordinationServiceImpl() {\n   // Service object must be destroyed to clear all pending RPCs before shutting\n   // down the RPC service.\n   coord_service_ = nullptr;\n-  static_cast<tsl::GrpcCoordinationServiceImpl*>(coord_rpc_service_.get())\n+  static_cast<GrpcCoordinationServiceImpl*>(coord_rpc_service_.get())\n       ->SetCoordinationServiceInstance(nullptr);\n   coord_rpc_service_->Shutdown();\n }"
        },
        {
            "sha": "ef875e099559a082d0106d7d72a2122f433aa4e1",
            "filename": "third_party/xla/xla/pjrt/distributed/service.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fservice.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fservice.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2Fservice.h?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -27,7 +27,7 @@ limitations under the License.\n #include \"grpcpp/grpcpp.h\"\n #include \"grpcpp/security/server_credentials.h\"\n #include \"grpcpp/server_builder.h\"\n-#include \"xla/tsl/distributed_runtime/coordination/coordination_service.h\"\n+#include \"xla/pjrt/distributed/coordination/coordination_service.h\"\n #include \"xla/tsl/distributed_runtime/rpc/async_service_interface.h\"\n #include \"xla/types.h\"\n #include \"tsl/platform/env.h\"\n@@ -72,7 +72,7 @@ class CoordinationServiceImpl {\n \n  private:\n   tsl::Env* env_ = nullptr;  // Not owned.\n-  std::unique_ptr<tsl::CoordinationService> coord_service_;\n+  std::unique_ptr<CoordinationService> coord_service_;\n   std::unique_ptr<tsl::thread::ThreadPool> coord_compute_pool_;\n   std::unique_ptr<tsl::AsyncServiceInterface> coord_rpc_service_;\n   std::unique_ptr<tsl::Thread> coord_rpc_thread_;"
        },
        {
            "sha": "ddecf07a49901f4b271592a3afa6961b20301d88",
            "filename": "third_party/xla/xla/pjrt/gpu/BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2FBUILD?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -128,7 +128,6 @@ cc_library(\n         \"//xla/tsl/concurrency:async_value\",\n         \"//xla/tsl/concurrency:ref_count\",\n         \"//xla/tsl/distributed_runtime/coordination:coordination_service\",\n-        \"//xla/tsl/distributed_runtime/coordination:coordination_service_agent\",\n         \"//xla/tsl/framework:allocator\",\n         \"//xla/tsl/framework:bfc_allocator\",\n         \"//xla/tsl/framework:device_id\","
        },
        {
            "sha": "adbe4c805fb54674150ee8865a8d727d16c1b4bf",
            "filename": "third_party/xla/xla/pjrt/gpu/se_gpu_pjrt_client.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_pjrt_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_pjrt_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Fse_gpu_pjrt_client.cc?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -111,7 +111,6 @@ limitations under the License.\n #include \"xla/tsl/concurrency/async_value.h\"\n #include \"xla/tsl/concurrency/async_value_ref.h\"\n #include \"xla/tsl/concurrency/ref_count.h\"\n-#include \"xla/tsl/distributed_runtime/coordination/coordination_service_agent.h\"\n #include \"xla/tsl/framework/allocator.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/status.h\""
        },
        {
            "sha": "afc3b0ba21baa4274c5cb32b99a390a7ed696987",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2FBUILD?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -342,6 +342,7 @@ cc_library(\n         \"//xla/pjrt/distributed:key_value_store_interface\",\n         \"//xla/pjrt/distributed:protocol_proto_cc\",\n         \"//xla/pjrt/distributed:topology_util\",\n+        \"//xla/pjrt/distributed/coordination:coordination_service_agent\",\n         \"//xla/python/ifrt\",\n         \"//xla/python/ifrt:attribute_map\",\n         \"//xla/python/ifrt:basic_device_list\",\n@@ -354,7 +355,6 @@ cc_library(\n         \"//xla/tsl/concurrency:future\",\n         \"//xla/tsl/concurrency:ref_count\",\n         \"//xla/tsl/distributed_runtime:call_options\",\n-        \"//xla/tsl/distributed_runtime/coordination:coordination_service_agent\",\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:logging\","
        },
        {
            "sha": "d906dd44f5bf7843c0a794256c073c3dd7d70ac8",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/pjrt_client.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.cc?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -48,6 +48,7 @@ limitations under the License.\n #include \"xla/layout.h\"\n #include \"xla/layout_util.h\"\n #include \"xla/literal.h\"\n+#include \"xla/pjrt/distributed/coordination/coordination_service_agent.h\"\n #include \"xla/pjrt/distributed/protocol.pb.h\"\n #include \"xla/pjrt/distributed/topology_util.h\"\n #include \"xla/pjrt/host_memory_spaces.h\"\n@@ -90,7 +91,6 @@ limitations under the License.\n #include \"xla/tsl/concurrency/future.h\"\n #include \"xla/tsl/concurrency/ref_count.h\"\n #include \"xla/tsl/distributed_runtime/call_options.h\"\n-#include \"xla/tsl/distributed_runtime/coordination/coordination_service_agent.h\"\n #include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"\n@@ -869,7 +869,7 @@ absl::StatusOr<std::unique_ptr<PjRtClient>> PjRtClient::Create(\n \n   // Start a background thread to monitor the status of all processes.\n   if (client->distributed_client_) {\n-    absl::StatusOr<tsl::CoordinationServiceAgent*> agent =\n+    absl::StatusOr<xla::CoordinationServiceAgent*> agent =\n         client->distributed_client_->GetCoordinationServiceAgent();\n     if (agent.ok()) {\n       client->global_process_info_thread_.reset(\n@@ -1497,7 +1497,7 @@ CrossHostTransferKey PjRtClient::CreateNewTransferKey() {\n }\n \n absl::Status PjRtClient::WatchGlobalProcessInfo(\n-    tsl::CoordinationServiceAgent& agent) {\n+    xla::CoordinationServiceAgent& agent) {\n   TF_ASSIGN_OR_RETURN(tensorflow::CoordinatedTask task, agent.GetOwnTask());\n   VLOG(3) << \"Watching global process info for task \"\n           << task.ShortDebugString();\n@@ -1763,7 +1763,7 @@ PjRtClient::Incarnations() const {\n   if (!distributed_client_) {\n     return absl::FailedPreconditionError(\"missing distributed client\");\n   }\n-  TF_ASSIGN_OR_RETURN(tsl::CoordinationServiceAgent * agent,\n+  TF_ASSIGN_OR_RETURN(xla::CoordinationServiceAgent * agent,\n                       distributed_client_->GetCoordinationServiceAgent());\n   return agent->Incarnations();\n }"
        },
        {
            "sha": "7aa3436584ab755918f44e1c96db92112b3e03ce",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/pjrt_client.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.h?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -418,7 +418,7 @@ class PjRtClient final\n   // If true, the backend implements the cross-host transfer APIs.\n   bool pjrt_supports_cross_host_transfers_ = false;\n \n-  absl::Status WatchGlobalProcessInfo(tsl::CoordinationServiceAgent& agent);\n+  absl::Status WatchGlobalProcessInfo(xla::CoordinationServiceAgent& agent);\n \n   std::atomic<int64_t> next_transfer_key_ = 0;\n   std::shared_ptr<xla::DistributedRuntimeClient> distributed_client_;"
        },
        {
            "sha": "46d996d59c1a9bb60b29a1b1e56449676c931369",
            "filename": "third_party/xla/xla/python/version.h",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpython%2Fversion.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/d411e84d94174546f2d7b6a9e1a80a208bd4a554/third_party%2Fxla%2Fxla%2Fpython%2Fversion.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fversion.h?ref=d411e84d94174546f2d7b6a9e1a80a208bd4a554",
            "patch": "@@ -18,8 +18,6 @@ limitations under the License.\n \n // An increasing version number to protect jax code against breaking changes.\n // In JAX, reference this via jax._src.lib.ifrt_version.\n-#define JAX_IFRT_VERSION_NUMBER \\\n-  38  // `xla::ifrt::Executable::Create()` can directly take an MLIR module and\n-      // compile it.\n+#define JAX_IFRT_VERSION_NUMBER 39  // New coordination service implementation.\n \n #endif  // XLA_PYTHON_VERSION_H_"
        }
    ],
    "stats": {
        "total": 75,
        "additions": 36,
        "deletions": 39
    }
}