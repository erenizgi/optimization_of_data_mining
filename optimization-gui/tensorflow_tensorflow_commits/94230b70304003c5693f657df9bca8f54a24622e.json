{
    "author": "WillFroom",
    "message": "[XTile] Add compatible_with_portable rules to enable CPU linking.\n\nPiperOrigin-RevId: 836159259",
    "sha": "94230b70304003c5693f657df9bca8f54a24622e",
    "files": [
        {
            "sha": "a372741d876835e338ee6496d245f201f23ac27a",
            "filename": "third_party/xla/xla/backends/gpu/codegen/triton/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/94230b70304003c5693f657df9bca8f54a24622e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/94230b70304003c5693f657df9bca8f54a24622e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2FBUILD?ref=94230b70304003c5693f657df9bca8f54a24622e",
            "patch": "@@ -7,6 +7,7 @@ load(\n )\n load(\"//xla/tests:build_defs.bzl\", \"xla_test\")\n load(\"//xla/tsl:tsl.bzl\", \"if_google\")\n+load(\"//xla/tsl:tsl.default.bzl\", \"get_compatible_with_portable\")\n load(\n     \"//xla/tsl/platform/default:cuda_build_defs.bzl\",\n     \"if_cuda_is_configured\",\n@@ -238,8 +239,8 @@ cc_library(\n         [\"fusion_emitter_stub.cc\"],\n     ),\n     hdrs = [\"fusion_emitter.h\"],\n+    compatible_with = get_compatible_with_portable(),\n     deps = [\n-        \":collective_emitter\",\n         \"//xla:autotuning_proto_cc\",\n         \"//xla/backends/gpu/codegen/triton/ir:triton_xla\",\n         \"//xla/codegen:emitter_loc_op_builder\",\n@@ -271,6 +272,7 @@ cc_library(\n         \"@triton//:TritonDialects\",\n     ] + if_cuda_or_rocm_is_configured([\n         \":compilation_pipeline\",\n+        \":collective_emitter\",\n         \":dot_algorithms\",\n         \":emitter_helpers\",\n         \":support\","
        },
        {
            "sha": "ff64a6dad10ae24c33471fad76a2412bd6c1714f",
            "filename": "third_party/xla/xla/backends/gpu/codegen/triton/ir/BUILD",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/94230b70304003c5693f657df9bca8f54a24622e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fir%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/94230b70304003c5693f657df9bca8f54a24622e/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fir%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fcodegen%2Ftriton%2Fir%2FBUILD?ref=94230b70304003c5693f657df9bca8f54a24622e",
            "patch": "@@ -1,5 +1,6 @@\n load(\"@llvm-project//mlir:tblgen.bzl\", \"gentbl_cc_library\", \"td_library\")\n-load(\"@rules_cc//cc:cc_library.bzl\", \"cc_library\")\n+load(\"//xla/tsl:tsl.default.bzl\", \"get_compatible_with_portable\")\n+load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n package(\n     # copybara:uncomment default_applicable_licenses = [\"//tensorflow:license\"],\n@@ -17,6 +18,7 @@ package_group(\n td_library(\n     name = \"triton_xla_td_files\",\n     srcs = glob([\"*.td\"]),\n+    compatible_with = get_compatible_with_portable(),\n     includes = [\".\"],\n     deps = [\n         \"@llvm-project//mlir:BuiltinDialectTdFiles\",\n@@ -27,6 +29,7 @@ td_library(\n \n gentbl_cc_library(\n     name = \"triton_xla_dialect_inc_gen\",\n+    compatible_with = get_compatible_with_portable(),\n     strip_include_prefix = \".\",\n     tbl_outs = {\n         \"triton_xla_dialect.h.inc\": [\"-gen-dialect-decls\"],\n@@ -39,6 +42,7 @@ gentbl_cc_library(\n \n gentbl_cc_library(\n     name = \"triton_xla_ops_inc_gen\",\n+    compatible_with = get_compatible_with_portable(),\n     strip_include_prefix = \".\",\n     tbl_outs = {\n         \"triton_xla_ops.h.inc\": [\"-gen-op-decls\"],\n@@ -57,6 +61,7 @@ gentbl_cc_library(\n \n gentbl_cc_library(\n     name = \"triton_xla_attrs_inc_gen\",\n+    compatible_with = get_compatible_with_portable(),\n     strip_include_prefix = \".\",\n     tbl_outs = {\n         \"triton_xla_enums.h.inc\": [\"-gen-enum-decls\"],"
        },
        {
            "sha": "0f5620cf1b456fb792c0b95a9f53751d4de3906e",
            "filename": "third_party/xla/xla/codegen/tiling/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/94230b70304003c5693f657df9bca8f54a24622e/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/94230b70304003c5693f657df9bca8f54a24622e/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2FBUILD?ref=94230b70304003c5693f657df9bca8f54a24622e",
            "patch": "@@ -1,6 +1,6 @@\n-load(\"@rules_cc//cc:cc_library.bzl\", \"cc_library\")\n load(\"//xla:xla.default.bzl\", \"xla_cc_test\")\n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n+load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n package(\n     # copybara:uncomment default_applicable_licenses = [\"//tensorflow:license\"],"
        },
        {
            "sha": "0e800c6b8b7487cf6efef2268d65c55aa7842243",
            "filename": "third_party/xla/xla/service/gpu/model/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/94230b70304003c5693f657df9bca8f54a24622e/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/94230b70304003c5693f657df9bca8f54a24622e/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD?ref=94230b70304003c5693f657df9bca8f54a24622e",
            "patch": "@@ -589,6 +589,7 @@ cc_library(\n     hdrs = [\n         \"block_level_parameters.h\",\n     ],\n+    compatible_with = get_compatible_with_portable(),\n     deps = [\"//xla/service/gpu:backend_configs_cc\"],\n )\n "
        }
    ],
    "stats": {
        "total": 14,
        "additions": 11,
        "deletions": 3
    }
}