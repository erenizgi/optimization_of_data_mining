{
    "author": "d4n1elchen",
    "message": "[HLO Diff] Add an introduction section to the HLO GumGraph HTML renderer.\n\nThis section provides an overview of the diff report, including diff statistics, a color legend, interactive features, and a summary of the report sections.\n\nPiperOrigin-RevId: 809112835",
    "sha": "b82c13e2723c8e1259cf9669fc3a24deea47d269",
    "files": [
        {
            "sha": "9ee3b0a804801d750c151308af51825714b91c42",
            "filename": "third_party/xla/xla/hlo/tools/hlo_diff/render/hlo_gumgraph_html_renderer.cc",
            "status": "modified",
            "additions": 67,
            "deletions": 0,
            "changes": 67,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b82c13e2723c8e1259cf9669fc3a24deea47d269/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Frender%2Fhlo_gumgraph_html_renderer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b82c13e2723c8e1259cf9669fc3a24deea47d269/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Frender%2Fhlo_gumgraph_html_renderer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftools%2Fhlo_diff%2Frender%2Fhlo_gumgraph_html_renderer.cc?ref=b82c13e2723c8e1259cf9669fc3a24deea47d269",
            "patch": "@@ -78,6 +78,14 @@ std::string PrintCss() {\n     .section > .content {\n       font-size: 14px;\n     }\n+    .section > .content ul {\n+      margin-top: 5px;\n+      margin-bottom: 5px;\n+      padding-left: 20px;\n+    }\n+    .section > .content li {\n+      margin-bottom: 3px;\n+    }\n \n     details {\n       margin: 0;\n@@ -626,6 +634,59 @@ std::string PrintSectionWithHeader(absl::string_view header,\n                   {\"section\"});\n }\n \n+// Prints overview section.\n+std::string PrintOverviewSection(const DiffResult& diff_result) {\n+  std::string content = absl::StrFormat(\n+      R\"html(\n+        <p>This report highlights the differences between two HLO modules.</p>\n+        <p>\n+          <b>Diff Statistics:</b>\n+          <span>%d unchanged</span>,\n+          <span class=\"yellow\">%d changed</span>,\n+          <span class=\"red\">%d left unmatched</span>,\n+          <span class=\"green\">%d right unmatched</span> instruction(s).\n+        </p>\n+      )html\",\n+      diff_result.unchanged_instructions.size(),\n+      diff_result.changed_instructions.size(),\n+      diff_result.left_module_unmatched_instructions.size(),\n+      diff_result.right_module_unmatched_instructions.size());\n+  return PrintSectionWithHeader(\"Overview\", content);\n+}\n+\n+// Prints the \"How to use this report\" section.\n+std::string PrintHowToUseSection() {\n+  std::string content = R\"html(\n+        <p>\n+          <b>Highlights:</b>\n+          <ul>\n+            <li><span class=\"red-highlight\">&nbsp;Red&nbsp;</span>: Instruction only present in the left module.</li>\n+            <li><span class=\"green-highlight\">&nbsp;Green&nbsp;</span>: Instruction only present in the right module.</li>\n+            <li><span class=\"yellow-highlight\">&nbsp;Yellow&nbsp;</span>: Instruction present in both modules but with differences.</li>\n+            <li>Instructions without highlights are identical in both modules.</li>\n+          </ul>\n+        </p>\n+        <p>\n+          <b>Interactions:</b>\n+          <ul>\n+            <li><b>Hover</b> over an instruction to highlight its counterpart in the other module.</li>\n+            <li><b>Click</b> on an instruction to scroll its counterpart into view within the same computation diff.</li>\n+            <li><b>Double-click</b> on an instruction to jump to its counterpart if it resides in a different computation diff.</li>\n+            <li>Click the <b>[+]</b> button on an instruction to expand/collapse overflowing text.</li>\n+          </ul>\n+        </p>\n+        <p>\n+          <b>Sections:</b>\n+          <ul>\n+            <li><b>XProf Op Metrics Diff</b>: Shows instructions with the largest execution time differences based on XProf data (if available).</li>\n+            <li><b>Diffs grouped by computation</b>: Groups computations with similar diff patterns to help identify repetitive changes.</li>\n+            <li><b>Full Diff Results</b>: A flat list of all instructions that are unmatched or have changed.</li>\n+          </ul>\n+        </p>\n+      )html\";\n+  return PrintSectionWithHeader(\"How to use this report\", content);\n+}\n+\n // Prints a system message placeholder.\n std::string PrintSystemMessagePlaceholder() {\n   return PrintDiv(PrintSpan(\"System message placeholder\", {}),\n@@ -1415,6 +1476,12 @@ void RenderHtml(const DiffResult& diff_result, const DiffSummary& diff_summary,\n \n   out << PrintCss() << PrintJavascript();\n \n+  // Print overview section\n+  out << PrintOverviewSection(filtered_diff_result);\n+\n+  // Print \"How to use this report\" section\n+  out << PrintHowToUseSection();\n+\n   // Print profile metrics diff\n   if (left_op_metric_getter != nullptr && right_op_metric_getter != nullptr) {\n     out << PrintSectionWithHeader("
        }
    ],
    "stats": {
        "total": 67,
        "additions": 67,
        "deletions": 0
    }
}