{
    "author": "jingpu",
    "message": "Disable MHLO->TF ConvOp Pattern for Int8 input/parameter because the data type is not supported by TF ConvOp.\n\nPiperOrigin-RevId: 810183072",
    "sha": "090c559e8dbfa051c41587b88113434784cc4034",
    "files": [
        {
            "sha": "3891d0f3fe4db30df8f854ff9125e5182e2f333a",
            "filename": "tensorflow/compiler/mlir/lite/stablehlo/transforms/legalize_hlo.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/090c559e8dbfa051c41587b88113434784cc4034/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fstablehlo%2Ftransforms%2Flegalize_hlo.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/090c559e8dbfa051c41587b88113434784cc4034/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fstablehlo%2Ftransforms%2Flegalize_hlo.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Flite%2Fstablehlo%2Ftransforms%2Flegalize_hlo.cc?ref=090c559e8dbfa051c41587b88113434784cc4034",
            "patch": "@@ -163,9 +163,10 @@ class ConvertNdConvOp : public OpConversionPattern<mhlo::ConvolutionOp> {\n       return failure();\n     }\n \n-    // tf Convolution doesn't support quantized type.\n-    if (mlir::isa<quant::QuantizedType>(\n-            conv_op.getRhs().getType().getElementType())) {\n+    // tf Convolution doesn't support quantized type or 8-bit integer type.\n+    Type rhs_element_type = conv_op.getRhs().getType().getElementType();\n+    if (mlir::isa<quant::QuantizedType>(rhs_element_type) ||\n+        rhs_element_type.isInteger(8)) {\n       return failure();\n     }\n "
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}