{
    "author": "ezhulenev",
    "message": "PR #35482: Correctly generate compile_commands.json\n\nImported from GitHub PR https://github.com/openxla/xla/pull/35482\n\nSometime json incorrectly parse compile commands from bazel, and we end up passing them as\n\n```\n\"-isystem path/to/includes\"\n```\n\nto `clangd`, and these flags parsed incorrectly\nCopybara import of the project:\n\n--\nadf291e21b098d79fa3be4065ee02fafdf5c660a by Eugene Zhulenev <ezhulenev@google.com>:\n\nCorrectly generate compile_commands.json\n\nMerging this change closes #35482\n\nPiperOrigin-RevId: 846269357",
    "sha": "f644aa87f76850e916bf50a8eb4f64caf2c6cb77",
    "files": [
        {
            "sha": "1c7e6f930931ed4a00617c3ce840b17bcb5044c1",
            "filename": "third_party/xla/build_tools/lint/generate_compile_commands.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/f644aa87f76850e916bf50a8eb4f64caf2c6cb77/third_party%2Fxla%2Fbuild_tools%2Flint%2Fgenerate_compile_commands.py",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/f644aa87f76850e916bf50a8eb4f64caf2c6cb77/third_party%2Fxla%2Fbuild_tools%2Flint%2Fgenerate_compile_commands.py",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Flint%2Fgenerate_compile_commands.py?ref=f644aa87f76850e916bf50a8eb4f64caf2c6cb77",
            "patch": "@@ -67,7 +67,11 @@ def from_args_list(cls, args_list: list[str]) -> \"CompileCommand\":\n       if arg.endswith(\".cc\"):\n         cc_file = arg\n \n-      filtered_args.append(arg)\n+      # Split generated commands, because otherwise they get wrapped\n+      # into \"command with spaces\" when passed to clangd, and clangd\n+      # can't parse them correctly.\n+      for s in arg.split(\" \"):\n+        filtered_args.append(s)\n \n     return cls(cc_file, filtered_args)\n "
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}