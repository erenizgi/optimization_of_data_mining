{
    "author": "sohaibiftikhar",
    "message": "[XLA:GPU]: Add peer to peer copies for cupti tracing.\n\nBefore this change peer to peer copies done using\ncuMemcpyPeerAsync was not being tracked with the driver API.\n\nPiperOrigin-RevId: 825040246",
    "sha": "542ffe0410f8e8ad278ca3101c8cc44ca006d859",
    "files": [
        {
            "sha": "8c1c64548725135b986981fc8138a5c43e11d58d",
            "filename": "third_party/xla/xla/backends/profiler/gpu/cupti_tracer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/542ffe0410f8e8ad278ca3101c8cc44ca006d859/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fcupti_tracer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/542ffe0410f8e8ad278ca3101c8cc44ca006d859/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fcupti_tracer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fgpu%2Fcupti_tracer.cc?ref=542ffe0410f8e8ad278ca3101c8cc44ca006d859",
            "patch": "@@ -1225,6 +1225,8 @@ CuptiTracer::CreateDefaultCallbackIds() {\n       CUPTI_DRIVER_TRACE_CBID_cuMemcpy3DAsync_v2,\n       CUPTI_DRIVER_TRACE_CBID_cuMemcpyHtoA_v2,\n       CUPTI_DRIVER_TRACE_CBID_cuMemcpyHtoAAsync_v2,\n+      CUPTI_DRIVER_TRACE_CBID_cuMemcpyPeer,\n+      CUPTI_DRIVER_TRACE_CBID_cuMemcpyPeerAsync,\n       // MemAlloc\n       CUPTI_DRIVER_TRACE_CBID_cuMemAlloc_v2,\n       CUPTI_DRIVER_TRACE_CBID_cuMemAllocPitch_v2,"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 2,
        "deletions": 0
    }
}