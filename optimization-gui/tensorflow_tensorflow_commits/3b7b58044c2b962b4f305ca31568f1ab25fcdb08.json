{
    "author": "WillFroom",
    "message": "[XLA:CPU/GPU] Move size and stride expression to shared directory.\n\nPiperOrigin-RevId: 814125879",
    "sha": "3b7b58044c2b962b4f305ca31568f1ab25fcdb08",
    "files": [
        {
            "sha": "c2995d3aaaa9011bb182b3c82f9f78a05e7c79dc",
            "filename": "third_party/xla/xla/codegen/tiling/BUILD",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2FBUILD?ref=3b7b58044c2b962b4f305ca31568f1ab25fcdb08",
            "patch": "@@ -168,3 +168,20 @@ xla_cc_test(\n         \"@com_google_googletest//:gtest\",\n     ],\n )\n+\n+cc_library(\n+    name = \"size_and_stride_expression\",\n+    srcs = [\"size_and_stride_expression.cc\"],\n+    hdrs = [\"size_and_stride_expression.h\"],\n+    deps = [\n+        \":constraint_expression\",\n+        \"//xla/hlo/analysis:indexing_analysis\",\n+        \"@com_google_absl//absl/algorithm:container\",\n+        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n+        \"@com_google_absl//absl/types:span\",\n+        \"@llvm-project//llvm:Support\",\n+        \"@llvm-project//mlir:IR\",\n+        \"@llvm-project//mlir:Support\",\n+    ],\n+)"
        },
        {
            "sha": "4cb4100e9d55c9e0eeda49ed61e54b1c09c0e758",
            "filename": "third_party/xla/xla/codegen/tiling/size_and_stride_expression.cc",
            "status": "renamed",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsize_and_stride_expression.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsize_and_stride_expression.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsize_and_stride_expression.cc?ref=3b7b58044c2b962b4f305ca31568f1ab25fcdb08",
            "patch": "@@ -13,7 +13,7 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n-#include \"xla/service/gpu/model/size_and_stride_expression.h\"\n+#include \"xla/codegen/tiling/size_and_stride_expression.h\"\n \n #include <cstdint>\n #include <cstdlib>\n@@ -38,7 +38,6 @@ limitations under the License.\n #include \"xla/hlo/analysis/indexing_map_serialization.h\"\n \n namespace xla {\n-namespace gpu {\n namespace {\n \n using ::llvm::SmallVector;\n@@ -631,5 +630,4 @@ std::optional<SizeAndStrideExpression> ExtractSizeAndStride(\n   LOG(FATAL) << \"unreachable\";\n }\n \n-}  // namespace gpu\n }  // namespace xla",
            "previous_filename": "third_party/xla/xla/service/gpu/model/size_and_stride_expression.cc"
        },
        {
            "sha": "85a099eabb19be36b02a7ed64d9cd194d4d3b675",
            "filename": "third_party/xla/xla/codegen/tiling/size_and_stride_expression.h",
            "status": "renamed",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsize_and_stride_expression.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsize_and_stride_expression.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Ftiling%2Fsize_and_stride_expression.h?ref=3b7b58044c2b962b4f305ca31568f1ab25fcdb08",
            "patch": "@@ -13,8 +13,8 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n-#ifndef XLA_SERVICE_GPU_MODEL_SIZE_AND_STRIDE_EXPRESSION_H_\n-#define XLA_SERVICE_GPU_MODEL_SIZE_AND_STRIDE_EXPRESSION_H_\n+#ifndef XLA_CODEGEN_TILING_SIZE_AND_STRIDE_EXPRESSION_H_\n+#define XLA_CODEGEN_TILING_SIZE_AND_STRIDE_EXPRESSION_H_\n \n #include <cstdint>\n #include <optional>\n@@ -23,10 +23,10 @@ limitations under the License.\n \n #include \"absl/types/span.h\"\n #include \"mlir/IR/AffineExpr.h\"\n-#include \"xla/codegen/tiling/constraint_expression.h\"\n #include \"xla/hlo/analysis/indexing_map.h\"\n+#include \"xla/codegen/tiling/constraint_expression.h\"\n \n-namespace xla::gpu {\n+namespace xla {\n \n // Encapsulates expressions for size and stride and the corresponding\n // constraints on the dimension values that need to be satisfied.\n@@ -77,6 +77,6 @@ std::optional<SizeAndStrideExpression> ExtractSizeAndStride(\n     absl::Span<Interval const> dimension_intervals,\n     absl::Span<Interval const> symbol_intervals);\n \n-}  // namespace xla::gpu\n+}  // namespace xla\n \n-#endif  // XLA_SERVICE_GPU_MODEL_SIZE_AND_STRIDE_EXPRESSION_H_\n+#endif  // XLA_CODEGEN_TILING_SIZE_AND_STRIDE_EXPRESSION_H_",
            "previous_filename": "third_party/xla/xla/service/gpu/model/size_and_stride_expression.h"
        },
        {
            "sha": "81f39842b287f87dbbd03942ee5f4f2431a9b372",
            "filename": "third_party/xla/xla/service/gpu/model/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 18,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2FBUILD?ref=3b7b58044c2b962b4f305ca31568f1ab25fcdb08",
            "patch": "@@ -584,31 +584,14 @@ xla_cc_test(\n     ],\n )\n \n-cc_library(\n-    name = \"size_and_stride_expression\",\n-    srcs = [\"size_and_stride_expression.cc\"],\n-    hdrs = [\"size_and_stride_expression.h\"],\n-    deps = [\n-        \"//xla/codegen/tiling:constraint_expression\",\n-        \"//xla/hlo/analysis:indexing_analysis\",\n-        \"@com_google_absl//absl/algorithm:container\",\n-        \"@com_google_absl//absl/log\",\n-        \"@com_google_absl//absl/log:check\",\n-        \"@com_google_absl//absl/types:span\",\n-        \"@llvm-project//llvm:Support\",\n-        \"@llvm-project//mlir:IR\",\n-        \"@llvm-project//mlir:Support\",\n-    ],\n-)\n-\n cc_library(\n     name = \"symbolic_tile\",\n     srcs = [\"symbolic_tile.cc\"],\n     hdrs = [\"symbolic_tile.h\"],\n     deps = [\n-        \":size_and_stride_expression\",\n         \"//xla/codegen/tiling:affine_map_evaluator\",\n         \"//xla/codegen/tiling:constraint_expression\",\n+        \"//xla/codegen/tiling:size_and_stride_expression\",\n         \"//xla/hlo/analysis:indexing_analysis\",\n         \"@com_google_absl//absl/algorithm:container\",\n         \"@com_google_absl//absl/log\","
        },
        {
            "sha": "e5d5a6063bbdd2c96da63baca217c54129bf6a0d",
            "filename": "third_party/xla/xla/service/gpu/model/symbolic_tile.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fsymbolic_tile.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3b7b58044c2b962b4f305ca31568f1ab25fcdb08/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fsymbolic_tile.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fmodel%2Fsymbolic_tile.cc?ref=3b7b58044c2b962b4f305ca31568f1ab25fcdb08",
            "patch": "@@ -38,9 +38,9 @@ limitations under the License.\n #include \"mlir/Support/LLVM.h\"\n #include \"xla/codegen/tiling/affine_map_evaluator.h\"\n #include \"xla/codegen/tiling/constraint_expression.h\"\n+#include \"xla/codegen/tiling/size_and_stride_expression.h\"\n #include \"xla/hlo/analysis/indexing_map.h\"\n #include \"xla/hlo/analysis/indexing_map_serialization.h\"\n-#include \"xla/service/gpu/model/size_and_stride_expression.h\"\n \n namespace xla {\n namespace gpu {"
        }
    ],
    "stats": {
        "total": 54,
        "additions": 26,
        "deletions": 28
    }
}