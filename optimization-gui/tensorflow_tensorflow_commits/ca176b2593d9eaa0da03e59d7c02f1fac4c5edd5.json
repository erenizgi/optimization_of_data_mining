{
    "author": "ddunl",
    "message": "Remove obsolete use of TSL_IS_IN_OSS\n\nAlso move inclusion of `status.h` to below the license header (how did it get up there?)\n\nPiperOrigin-RevId: 828686888",
    "sha": "ca176b2593d9eaa0da03e59d7c02f1fac4c5edd5",
    "files": [
        {
            "sha": "9c8bfcf513bfd1403e688d4a3e74fae35d91dc6b",
            "filename": "third_party/xla/xla/service/compilation_environments.h",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/ca176b2593d9eaa0da03e59d7c02f1fac4c5edd5/third_party%2Fxla%2Fxla%2Fservice%2Fcompilation_environments.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/ca176b2593d9eaa0da03e59d7c02f1fac4c5edd5/third_party%2Fxla%2Fxla%2Fservice%2Fcompilation_environments.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcompilation_environments.h?ref=ca176b2593d9eaa0da03e59d7c02f1fac4c5edd5",
            "patch": "@@ -1,4 +1,3 @@\n-#include \"tsl/platform/status.h\"\n /* Copyright 2022 The OpenXLA Authors.\n \n Licensed under the Apache License, Version 2.0 (the \"License\");\n@@ -29,6 +28,7 @@ limitations under the License.\n #include \"tsl/platform/casts.h\"\n #include \"tsl/platform/platform.h\"\n #include \"tsl/platform/protobuf.h\"\n+#include \"tsl/platform/status.h\"\n \n namespace xla {\n \n@@ -161,12 +161,7 @@ T& CompilationEnvironments::GetMutableEnv() {\n     it = environments_.find(descriptor);\n   }\n \n-  // TODO(b/302086111): Remove after XLA has an updated protobuf version.\n-#if TSL_IS_IN_OSS\n-  return tensorflow::down_cast<T&>(*it->second);\n-#else\n   return tsl::protobuf::DownCastToGenerated<T>(*it->second);\n-#endif\n }\n \n template <typename T>"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 1,
        "deletions": 6
    }
}