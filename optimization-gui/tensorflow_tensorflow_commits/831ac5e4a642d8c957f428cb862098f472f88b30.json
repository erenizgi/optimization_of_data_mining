{
    "author": "majnemer",
    "message": "Replace C-style character functions with `absl::ascii_` or `llvm::` equivalents.\n\nThis change updates various uses of `cctype` functions such as `toupper`, `tolower`, `isspace`, `isdigit`, `isalpha`, and `isalnum` to their `absl::ascii_` counterparts. In some instances within MLIR/LLVM code, `llvm::` equivalents are used. String transformations using `std::transform` with `::tolower` or `::toupper` are also updated to use `absl::AsciiStrToLower` or `absl::AsciiStrToUpper`. This ensures locale-independent behavior for character manipulations.\n\nPiperOrigin-RevId: 828236978",
    "sha": "831ac5e4a642d8c957f428cb862098f472f88b30",
    "files": [
        {
            "sha": "f0f6e5351372e14d43c65c47debb18dfa2bd54e4",
            "filename": "tensorflow/c/experimental/filesystem/plugins/gcs/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fc%2Fexperimental%2Ffilesystem%2Fplugins%2Fgcs%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fc%2Fexperimental%2Ffilesystem%2Fplugins%2Fgcs%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fc%2Fexperimental%2Ffilesystem%2Fplugins%2Fgcs%2FBUILD?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -85,6 +85,7 @@ tf_cc_test(\n         \"//tensorflow/core:test_main\",\n         \"//tensorflow/core/platform/cloud:now_seconds_env\",\n         \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n         \"@local_xla//xla/tsl/protobuf:error_codes_proto_impl_cc\","
        },
        {
            "sha": "26b7bff8f7e8192173a881e55db2b159b207dffd",
            "filename": "tensorflow/c/experimental/filesystem/plugins/gcs/ram_file_block_cache_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fc%2Fexperimental%2Ffilesystem%2Fplugins%2Fgcs%2Fram_file_block_cache_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fc%2Fexperimental%2Ffilesystem%2Fplugins%2Fgcs%2Fram_file_block_cache_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fc%2Fexperimental%2Ffilesystem%2Fplugins%2Fgcs%2Fram_file_block_cache_test.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -16,7 +16,6 @@ limitations under the License.\n #include \"tensorflow/c/experimental/filesystem/plugins/gcs/ram_file_block_cache.h\"\n \n #include <algorithm>\n-#include <cctype>\n #include <cstdint>\n #include <cstring>\n #include <list>\n@@ -25,6 +24,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/status/status.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/synchronization/blocking_counter.h\"\n #include \"absl/synchronization/notification.h\"\n #include \"absl/time/time.h\"\n@@ -392,7 +392,7 @@ TEST(RamFileBlockCacheTest, RemoveFile) {\n     char c = (filename == \"a\") ? 'a' : (filename == \"b\") ? 'b' : 'x';\n     if (offset > 0) {\n       // The first block is lower case and all subsequent blocks are upper case.\n-      c = toupper(c);\n+      c = absl::ascii_toupper(c);\n     }\n     memset(buffer, c, n);\n     TF_SetStatus(status, TF_OK, \"\");"
        },
        {
            "sha": "9e0c162e5d233a651336c061d836bf0402bdb6ef",
            "filename": "tensorflow/c/experimental/ops/gen/common/case_format.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fc%2Fexperimental%2Fops%2Fgen%2Fcommon%2Fcase_format.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fc%2Fexperimental%2Fops%2Fgen%2Fcommon%2Fcase_format.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fc%2Fexperimental%2Fops%2Fgen%2Fcommon%2Fcase_format.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -52,7 +52,7 @@ string FormatStringCase(const string &str, CaseFormatType to,\n       wordStart = true;\n       continue;\n     }\n-    if (!from_snake && isupper(c)) {\n+    if (!from_snake && absl::ascii_isupper(c)) {\n       wordStart = true;\n     }\n \n@@ -65,9 +65,9 @@ string FormatStringCase(const string &str, CaseFormatType to,\n     const bool shouldCapIfSnake = toUpper;\n     const bool shouldCapIfCamel = wordStart && (toUpper || !inputStart);\n     if ((toSnake && shouldCapIfSnake) || (!toSnake && shouldCapIfCamel)) {\n-      result += toupper(c);\n+      result += absl::ascii_toupper(c);\n     } else {\n-      result += tolower(c);\n+      result += absl::ascii_tolower(c);\n     }\n \n     // at this point we are no longer at the start of a word:"
        },
        {
            "sha": "e601b38ad3abed15f3893e85d8fae0ff15310667",
            "filename": "tensorflow/cc/framework/cc_op_gen_util.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcc%2Fframework%2Fcc_op_gen_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcc%2Fframework%2Fcc_op_gen_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcc%2Fframework%2Fcc_op_gen_util.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -15,7 +15,6 @@ limitations under the License.\n \n #include \"tensorflow/cc/framework/cc_op_gen_util.h\"\n \n-#include <cctype>\n #include <cmath>\n #include <cstddef>\n #include <cstdint>\n@@ -29,6 +28,7 @@ limitations under the License.\n #include \"absl/log/check.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/statusor.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/escaping.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/string_view.h\"\n@@ -306,7 +306,7 @@ string ToCamelCase(absl::string_view str) {\n     } else if (c == joiner) {\n       cap = true;\n     } else if (cap) {\n-      result += toupper(c);\n+      result += absl::ascii_toupper(c);\n       cap = false;\n     } else {\n       result += c;"
        },
        {
            "sha": "954c318b41615006a9478029c367df88af2b9597",
            "filename": "tensorflow/compiler/mlir/tensorflow/transforms/einsum.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftransforms%2Feinsum.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftransforms%2Feinsum.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftransforms%2Feinsum.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -16,7 +16,6 @@ limitations under the License.\n #include \"tensorflow/compiler/mlir/tensorflow/transforms/einsum.h\"\n \n #include <algorithm>\n-#include <cctype>\n #include <cstdint>\n #include <memory>\n #include <optional>\n@@ -29,6 +28,7 @@ limitations under the License.\n #include \"llvm/ADT/DenseMap.h\"\n #include \"llvm/ADT/STLExtras.h\"\n #include \"llvm/ADT/SetVector.h\"\n+#include \"llvm/ADT/StringExtras.h\"\n #include \"llvm/ADT/StringRef.h\"\n #include \"llvm/ADT/StringSwitch.h\"\n #include \"llvm/Support/Casting.h\"\n@@ -230,7 +230,7 @@ std::optional<llvm::SmallDenseMap<char, int64_t>> EquationToMap(\n     llvm::StringRef equation) {\n   llvm::SmallDenseMap<char, int64_t> map;\n   for (int64_t i = 0; i < equation.size(); ++i) {\n-    if (!std::isalpha(equation[i])) {\n+    if (!llvm::isAlpha(equation[i])) {\n       // Unsupported character in the equation.\n       return std::nullopt;\n     }\n@@ -263,7 +263,7 @@ std::optional<llvm::SetVector<char>> GetAvailableLabels(\n   const int lhs_size = lhs.size();\n   for (int i = 0; i < lhs_size; ++i) {\n     const char label = lhs[i];\n-    if (std::isalpha(label)) {\n+    if (llvm::isAlpha(label)) {\n       labels.remove(label);\n       ++lhs_count;\n     } else if (label == '.') {\n@@ -280,7 +280,7 @@ std::optional<llvm::SetVector<char>> GetAvailableLabels(\n   const int rhs_size = rhs.size();\n   for (int i = 0; i < rhs_size; ++i) {\n     const char label = rhs[i];\n-    if (std::isalpha(label)) {\n+    if (llvm::isAlpha(label)) {\n       labels.remove(label);\n       ++rhs_count;\n     } else if (label == '.') {\n@@ -318,7 +318,7 @@ std::tuple<std::string, std::string, std::string> FlattenEllipsis(\n   std::string new_lhs;\n   for (int i = 0; i < lhs.size(); ++i) {\n     const char label = lhs[i];\n-    if (std::isalpha(label)) {\n+    if (llvm::isAlpha(label)) {\n       new_lhs.push_back(label);\n     } else {\n       // Encounter ellipsis: generate unnamed labels then insert to the new\n@@ -333,7 +333,7 @@ std::tuple<std::string, std::string, std::string> FlattenEllipsis(\n   std::string new_rhs, new_rhs_labels;\n   for (int i = 0; i < rhs.size(); ++i) {\n     const char label = rhs[i];\n-    if (std::isalpha(label)) {\n+    if (llvm::isAlpha(label)) {\n       new_rhs.push_back(label);\n     } else {\n       // Encounter ellipsis: generate unnamed labels then insert to the new\n@@ -352,7 +352,7 @@ std::tuple<std::string, std::string, std::string> FlattenEllipsis(\n   std::string new_output;\n   for (int i = 0; i < out.size(); ++i) {\n     const char label = out[i];\n-    if (std::isalpha(label)) {\n+    if (llvm::isAlpha(label)) {\n       new_output.push_back(label);\n     } else {\n       // Encounter ellipsis: we will just insert the generated labels to the new"
        },
        {
            "sha": "57a41f538f277f8e5a911de00d6fd4fc17829b6d",
            "filename": "tensorflow/compiler/mlir/tensorflow/translate/import_model.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftranslate%2Fimport_model.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftranslate%2Fimport_model.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Ftranslate%2Fimport_model.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -17,7 +17,6 @@ limitations under the License.\n \n #include <algorithm>\n #include <cassert>\n-#include <cctype>\n #include <cstddef>\n #include <functional>\n #include <memory>\n@@ -36,6 +35,7 @@ limitations under the License.\n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_join.h\"\n #include \"absl/strings/string_view.h\"\n@@ -289,8 +289,10 @@ ObjectNames::ObjectNames(const SavedObjectGraph& object_graph,\n                 // - `model.variables.0`\n                 // - `model.keras_api.layers.1.keras_api.trainable_variables.0`\n                 // - ... 10 more long aliases ending in digits ...\n-                return std::make_tuple(isdigit(a.back()), a.size(), a) <\n-                       std::make_tuple(isdigit(b.back()), b.size(), b);\n+                return std::make_tuple(absl::ascii_isdigit(a.back()), a.size(),\n+                                       a) <\n+                       std::make_tuple(absl::ascii_isdigit(b.back()), b.size(),\n+                                       b);\n               });\n     for (const std::string& name : kv.second) {\n       if (IsExported(name)) {"
        },
        {
            "sha": "3706b8afe34d780d473738133f7bbcf10c4b72b2",
            "filename": "tensorflow/compiler/mlir/tensorflow/utils/bridge_logger.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Futils%2Fbridge_logger.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Futils%2Fbridge_logger.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Ftensorflow%2Futils%2Fbridge_logger.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -17,12 +17,12 @@ limitations under the License.\n \n #include <algorithm>\n #include <atomic>\n-#include <cctype>\n #include <memory>\n #include <string>\n #include <vector>\n \n #include \"absl/log/log.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_split.h\"\n #include \"llvm/ADT/StringRef.h\"\n #include \"llvm/Support/FormatVariadic.h\"\n@@ -99,8 +99,7 @@ std::vector<std::string> BridgeLoggerConfig::GetFilter(\n \n bool BridgeLoggerConfig::ShouldOnlyDumpTopLevelPasses() {\n   const char* env_var = getenv(kEnableOnlyTopLevelPassesEnvVar);\n-  std::string value(env_var);\n-  std::transform(value.begin(), value.end(), value.begin(), ::tolower);\n+  std::string value = absl::AsciiStrToLower(env_var);\n   // Return true if value is \"1\" or \"true\"; otherwise, false.\n   return value == \"1\" || value == \"true\";\n }"
        },
        {
            "sha": "fb5bb77644c21198b051afa54b12c56305e07a8b",
            "filename": "tensorflow/compiler/mlir/utils/name_utils.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Fmlir%2Futils%2Fname_utils.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Fmlir%2Futils%2Fname_utils.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fmlir%2Futils%2Fname_utils.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -31,8 +31,8 @@ namespace {\n // Checks if a character is legal for a TensorFlow node name, with special\n // handling if a character is at the beginning.\n bool IsLegalChar(char c, bool first_char) {\n-  if (isalpha(c)) return true;\n-  if (isdigit(c)) return true;\n+  if (llvm::isAlpha(c)) return true;\n+  if (llvm::isDigit(c)) return true;\n   if (c == '.') return true;\n   if (c == '_') return true;\n "
        },
        {
            "sha": "b4c3052953c677fb2bc1be998c3b6e4186f73ef9",
            "filename": "tensorflow/compiler/tf2tensorrt/convert/ops/einsum.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Ftf2tensorrt%2Fconvert%2Fops%2Feinsum.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Ftf2tensorrt%2Fconvert%2Fops%2Feinsum.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Ftf2tensorrt%2Fconvert%2Fops%2Feinsum.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -739,16 +739,16 @@ class ReIndexer {\n   // Initializes the index map with existing lowercase labels.\n   ReIndexer(std::string eq) {\n     for (char c : eq) {\n-      if (islower(c)) {\n+      if (absl::ascii_islower(c)) {\n         idx_map_[c] = c;\n       }\n     }\n   }\n   // Finds new character for uppercase character c.\n   char operator()(char c) {\n-    if (!std::isupper(c)) return c;\n+    if (!absl::ascii_isupper(c)) return c;\n     if (idx_map_.count(c) > 0) return idx_map_[c];\n-    char new_idx = std::tolower(c);\n+    char new_idx = absl::ascii_tolower(c);\n \n     // If lower(c) is not used in the equation, use it to replace c.\n     if (idx_map_.count(new_idx) == 0) {"
        },
        {
            "sha": "000c32df25d253479a7b1f993aecf1fcad547a9b",
            "filename": "tensorflow/compiler/tf2tensorrt/convert/trt_parameters.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Ftf2tensorrt%2Fconvert%2Ftrt_parameters.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcompiler%2Ftf2tensorrt%2Fconvert%2Ftrt_parameters.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Ftf2tensorrt%2Fconvert%2Ftrt_parameters.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -81,9 +81,7 @@ string ProfileStrategyToName(const ProfileStrategy strategy) {\n }\n \n Status ProfileStrategyFromName(const string& name, ProfileStrategy* strategy) {\n-  string name_lowercase(name);\n-  std::transform(name.begin(), name.end(), name_lowercase.begin(),\n-                 [](unsigned char c) { return std::tolower(c); });\n+  std::string name_lowercase = absl::AsciiStrToLower(name);\n   if (name_lowercase == \"range\") {\n     *strategy = ProfileStrategy::kRange;\n   } else if (name_lowercase == \"optimal\") {"
        },
        {
            "sha": "a9300194089efe9936b5efaf1fb1fd5d4358e1d4",
            "filename": "tensorflow/core/data/dataset_utils.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fdata%2Fdataset_utils.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fdata%2Fdataset_utils.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fdata%2Fdataset_utils.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -30,6 +30,7 @@ limitations under the License.\n #include \"absl/container/flat_hash_set.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/match.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_join.h\"\n@@ -493,7 +494,7 @@ bool MatchesAnyVersion(absl::string_view op_prefix,\n     return true;\n   }\n   size_t index = op_to_match.length() - 1;\n-  while (isdigit(op_to_match[index])) {\n+  while (absl::ascii_isdigit(op_to_match[index])) {\n     index--;\n   }\n   return (op_to_match[index] == 'V') && (op_prefix.length() == index);"
        },
        {
            "sha": "e59497f08ab97323b085dac3f5df264eed24d033",
            "filename": "tensorflow/core/framework/dataset.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fframework%2Fdataset.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fframework%2Fdataset.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fframework%2Fdataset.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -1310,7 +1310,7 @@ bool DatasetOpKernel::IsDatasetOp(const OpDef& op_def) {\n \n   // Check if the suffix matches \"DatasetV[0-9]+\".\n   size_t index = op_name.length() - 1;\n-  while (index >= 0 && isdigit(op_name[index])) {\n+  while (index >= 0 && absl::ascii_isdigit(op_name[index])) {\n     index--;\n   }\n   constexpr absl::string_view kDatasetPrefix = \"DatasetV\";"
        },
        {
            "sha": "67456886338a6bab46bef8dfffb1eb6442c9bdd6",
            "filename": "tensorflow/core/framework/function.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fframework%2Ffunction.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fframework%2Ffunction.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fframework%2Ffunction.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -1039,7 +1039,7 @@ class AttrKeyAndValue {\n  private:\n   static bool NeedsEscaping(const string& s) {\n     for (auto c : s) {\n-      if (!isalnum(c) && (c != ' ')) {\n+      if (!absl::ascii_isalnum(c) && (c != ' ')) {\n         return true;\n       }\n     }"
        },
        {
            "sha": "cf837bfd0f41b61b4847c568ea3c2b1c62c65ac4",
            "filename": "tensorflow/core/framework/graph_to_functiondef.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fframework%2Fgraph_to_functiondef.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fframework%2Fgraph_to_functiondef.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fframework%2Fgraph_to_functiondef.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -87,9 +87,9 @@ string NodeNameMapping::Normalize(string name) {\n   const int n = name.size();\n   for (int i = 0; i < n; ++i) {\n     char c = name[i];\n-    if (isalnum(c)) {\n-      if (isupper(c)) {\n-        name[i] = tolower(c);\n+    if (absl::ascii_isalnum(c)) {\n+      if (absl::ascii_isupper(c)) {\n+        name[i] = absl::ascii_tolower(c);\n       }\n     } else {\n       name[i] = '_';\n@@ -99,7 +99,7 @@ string NodeNameMapping::Normalize(string name) {\n   // Find the first letter and start with it.\n   int i = 0;\n   for (; i < n; ++i) {\n-    if (isalpha(name[i])) break;\n+    if (absl::ascii_isalpha(name[i])) break;\n   }\n \n   // Return \"unknown\" if none of the name's chars were letters."
        },
        {
            "sha": "2f5bc2c22b0875a6140c6dc5485bc6e6e396b6b2",
            "filename": "tensorflow/core/grappler/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fgrappler%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fgrappler%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fgrappler%2FBUILD?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -29,6 +29,7 @@ cc_library(\n         \"//tensorflow/core:framework\",\n         \"//tensorflow/core:lib\",\n         \"//tensorflow/core:protos_all_cc\",\n+        \"@com_google_absl//absl/strings\",\n     ],\n )\n "
        },
        {
            "sha": "326b291c4eb4f50670829059879388d5732242ab",
            "filename": "tensorflow/core/grappler/op_types.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fgrappler%2Fop_types.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fgrappler%2Fop_types.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fgrappler%2Fop_types.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -15,6 +15,7 @@ limitations under the License.\n \n #include \"tensorflow/core/grappler/op_types.h\"\n \n+#include \"absl/strings/ascii.h\"\n #include \"tensorflow/core/framework/attr_value.pb.h\"\n #include \"tensorflow/core/framework/op.h\"\n #include \"tensorflow/core/framework/types.h\"\n@@ -767,9 +768,7 @@ bool ModifiesInputsInPlace(const NodeDef& node) {\n     return false;\n   }\n \n-  string lower_op_name = op_name;\n-  std::transform(lower_op_name.begin(), lower_op_name.end(),\n-                 lower_op_name.begin(), ::tolower);\n+  std::string lower_op_name = absl::AsciiStrToLower(op_name);\n   if (absl::StrContains(lower_op_name, \"inplace\")) {\n     return true;\n   }"
        },
        {
            "sha": "94d02108caa0ed0c9bcbcc843fceff8cbf872d59",
            "filename": "tensorflow/core/grappler/optimizers/scoped_allocator_optimizer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fgrappler%2Foptimizers%2Fscoped_allocator_optimizer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fgrappler%2Foptimizers%2Fscoped_allocator_optimizer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fgrappler%2Foptimizers%2Fscoped_allocator_optimizer.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -14,6 +14,7 @@ limitations under the License.\n ==============================================================================*/\n #include \"tensorflow/core/grappler/optimizers/scoped_allocator_optimizer.h\"\n \n+#include \"absl/strings/ascii.h\"\n #include \"tensorflow/core/common_runtime/scoped_allocator.h\"\n #include \"tensorflow/core/common_runtime/scoped_allocator_mgr.h\"\n #include \"tensorflow/core/framework/graph.pb.h\"\n@@ -58,7 +59,7 @@ bool HasOpName(const string& node_name, const string& op_name) {\n   if (end != string::npos) {\n     size_t p = end + 1;\n     while (p < node_name.size()) {\n-      if (!isdigit(node_name[p])) {\n+      if (!absl::ascii_isdigit(node_name[p])) {\n         end = node_name.size();\n         break;\n       }"
        },
        {
            "sha": "8e6700f646d090f7e42f966310fcfccc515da9aa",
            "filename": "tensorflow/core/kernels/mkl/mkl_matmul_ops_common.h",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fkernels%2Fmkl%2Fmkl_matmul_ops_common.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fkernels%2Fmkl%2Fmkl_matmul_ops_common.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fmkl%2Fmkl_matmul_ops_common.h?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -1174,8 +1174,10 @@ void dnnl_gemm(char transa, char transb, int64_t m, int64_t n, int64_t k,\n   dims a_dims = dims{m, k};\n   dims b_dims = dims{k, n};\n   dims c_dims = dims{m, n};\n-  dims a_strides = tolower(transa) == 'n' ? dims{lda, 1} : dims{1, lda};\n-  dims b_strides = tolower(transb) == 'n' ? dims{ldb, 1} : dims{1, ldb};\n+  dims a_strides =\n+      absl::ascii_tolower(transa) == 'n' ? dims{lda, 1} : dims{1, lda};\n+  dims b_strides =\n+      absl::ascii_tolower(transb) == 'n' ? dims{ldb, 1} : dims{1, ldb};\n   dims c_strides = dims{ldc, 1};\n \n   // MklMatMul uses const alpha and beta, make guarantee here to ensure"
        },
        {
            "sha": "9faeeafc45a72e2b4384a73462103080917e960f",
            "filename": "tensorflow/core/kernels/set_kernels.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fkernels%2Fset_kernels.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Fkernels%2Fset_kernels.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Fkernels%2Fset_kernels.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -16,7 +16,7 @@ limitations under the License.\n // Ops for operating with sets. They are not checked in\n // to TensorFlow because we would first like to demonstrate successful\n // end-to-end use of these ops in eval and polish the api a bit like taking two\n-// SparseTensor rather than on edense and one sparse.\n+// SparseTensor rather than one dense and one sparse.\n \n #define EIGEN_USE_THREADS\n \n@@ -28,6 +28,7 @@ limitations under the License.\n \n #include \"absl/container/btree_set.h\"\n #include \"absl/container/flat_hash_set.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"unsupported/Eigen/CXX11/Tensor\"  // from @eigen_archive\n #include \"tensorflow/core/framework/op_kernel.h\"\n #include \"tensorflow/core/framework/register_types.h\"\n@@ -323,8 +324,7 @@ SetOperation SetOperationFromContext(OpKernelConstruction* ctx) {\n   if (!ctx->GetAttr(\"set_operation\", &set_operation_str).ok()) {\n     ctx->CtxFailure(errors::InvalidArgument(\"Missing set_operation.\"));\n   } else {\n-    std::transform(set_operation_str.begin(), set_operation_str.end(),\n-                   set_operation_str.begin(), ::tolower);\n+    absl::AsciiStrToLower(&set_operation_str);\n     if (\"a-b\" == set_operation_str) {\n       return A_MINUS_B;\n     }"
        },
        {
            "sha": "b1771bb89f2ded38ccfdc87eec7bc36c7e5fa136",
            "filename": "tensorflow/core/lib/gtl/edit_distance_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Flib%2Fgtl%2Fedit_distance_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Flib%2Fgtl%2Fedit_distance_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Flib%2Fgtl%2Fedit_distance_test.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -17,6 +17,8 @@ limitations under the License.\n \n #include <cctype>\n #include <vector>\n+\n+#include \"absl/strings/ascii.h\"\n #include \"tensorflow/core/platform/logging.h\"\n #include \"tensorflow/core/platform/test.h\"\n #include \"tensorflow/core/platform/test_benchmark.h\"\n@@ -96,7 +98,7 @@ TEST_F(LevenshteinDistanceTest, DifferentComparisons) {\n                           std::equal_to<char>()),\n       5);\n   auto no_case_cmp = [](char c1, char c2) {\n-    return std::tolower(c1) == std::tolower(c2);\n+    return absl::ascii_tolower(c1) == absl::ascii_tolower(c2);\n   };\n   ASSERT_EQ(LevenshteinDistance(lower_, upper_, no_case_cmp), 3);\n   ASSERT_EQ(LevenshteinDistance(upper_, lower_, no_case_cmp), 3);"
        },
        {
            "sha": "33592c87f7d11314767d348f99be5af06803b97f",
            "filename": "tensorflow/core/transforms/constant_folding/pass.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Ftransforms%2Fconstant_folding%2Fpass.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Ftransforms%2Fconstant_folding%2Fpass.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftransforms%2Fconstant_folding%2Fpass.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -30,6 +30,7 @@ limitations under the License.\n #include \"absl/container/flat_hash_set.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/match.h\"\n #include \"llvm/ADT/APInt.h\"\n #include \"llvm/ADT/STLExtras.h\"\n@@ -448,9 +449,7 @@ bool OpPropertyHelper::ModifiesInputsInPlace(TFOp op) {\n     return false;\n   }\n \n-  std::string lower_op_name = op_name.str();\n-  std::transform(lower_op_name.begin(), lower_op_name.end(),\n-                 lower_op_name.begin(), ::tolower);\n+  std::string lower_op_name = absl::AsciiStrToLower(op_name.str());\n   if (absl::StrContains(lower_op_name, \"inplace\")) return true;\n \n   return op->hasAttr(\"in_place\") || op->hasAttr(\"inplace\");"
        },
        {
            "sha": "65c37b8b468825175916d9de756d08dadec7e3c9",
            "filename": "tensorflow/core/transforms/region_to_functional/impl.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Ftransforms%2Fregion_to_functional%2Fimpl.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Ftransforms%2Fregion_to_functional%2Fimpl.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftransforms%2Fregion_to_functional%2Fimpl.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -27,6 +27,7 @@ limitations under the License.\n #include \"llvm/ADT/DenseSet.h\"\n #include \"llvm/ADT/STLExtras.h\"\n #include \"llvm/ADT/SmallVector.h\"\n+#include \"llvm/ADT/StringExtras.h\"\n #include \"llvm/ADT/StringSet.h\"\n #include \"llvm/ADT/iterator.h\"\n #include \"llvm/Support/ScopedPrinter.h\"\n@@ -668,8 +669,9 @@ FuncAttr BasePattern::Outline(Operation *op, PatternRewriter &rewriter,\n             op->getAttrOfType<StringAttr>(dialect_.getNameAttrIdentifier())) {\n       llvm::raw_string_ostream os(new_func_name);\n       os << \"_tfg_region_specialized_\";\n-      for (char c : llvm::map_range(\n-               op_name.getValue(), [](char c) { return isalnum(c) ? c : '_'; }))\n+      for (char c : llvm::map_range(op_name.getValue(), [](char c) {\n+             return llvm::isAlnum(c) ? c : '_';\n+           }))\n         os << c;\n       os << '_' << llvm::to_string(region.getRegionNumber());\n       os.flush();"
        },
        {
            "sha": "62506802f8956b0ab0d654b68c9c1b864841a8dc",
            "filename": "tensorflow/core/util/command_line_flags_test.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Futil%2Fcommand_line_flags_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fcore%2Futil%2Fcommand_line_flags_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Futil%2Fcommand_line_flags_test.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -13,11 +13,14 @@ See the License for the specific language governing permissions and\n limitations under the License.\n ==============================================================================*/\n \n+#include \"tensorflow/core/util/command_line_flags.h\"\n+\n #include <ctype.h>\n+\n #include <vector>\n \n+#include \"absl/strings/ascii.h\"\n #include \"tensorflow/core/platform/test.h\"\n-#include \"tensorflow/core/util/command_line_flags.h\"\n \n namespace tensorflow {\n namespace {\n@@ -266,16 +269,16 @@ static bool MatchWithAnyWhitespace(const string &str, const string &pat) {\n   bool matching = true;\n   int pat_i = 0;\n   for (int str_i = 0; str_i != str.size() && matching; str_i++) {\n-    if (isspace(str[str_i])) {\n-      matching = (pat_i != pat.size() && isspace(pat[pat_i]));\n+    if (absl::ascii_isspace(str[str_i])) {\n+      matching = (pat_i != pat.size() && absl::ascii_isspace(pat[pat_i]));\n     } else {\n-      while (pat_i != pat.size() && isspace(pat[pat_i])) {\n+      while (pat_i != pat.size() && absl::ascii_isspace(pat[pat_i])) {\n         pat_i++;\n       }\n       matching = (pat_i != pat.size() && str[str_i] == pat[pat_i++]);\n     }\n   }\n-  while (pat_i != pat.size() && isspace(pat[pat_i])) {\n+  while (pat_i != pat.size() && absl::ascii_isspace(pat[pat_i])) {\n     pat_i++;\n   }\n   return (matching && pat_i == pat.size());"
        },
        {
            "sha": "549f96a204d37b259a802cd428c5cbc34b794c09",
            "filename": "tensorflow/distribute/experimental/rpc/kernels/rpc_ops.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fdistribute%2Fexperimental%2Frpc%2Fkernels%2Frpc_ops.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fdistribute%2Fexperimental%2Frpc%2Fkernels%2Frpc_ops.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fdistribute%2Fexperimental%2Frpc%2Fkernels%2Frpc_ops.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -32,6 +32,7 @@ limitations under the License.\n #include \"absl/container/flat_hash_map.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_format.h\"\n // Needed for encoding and decoding ResourceDeleter Variant.\n@@ -375,10 +376,11 @@ class GrpcPollingThread {\n   explicit GrpcPollingThread(std::string thread_name) {\n     // Thread name can only have alpha numeric characters. Remove special\n     // characters from input thread_name.\n-    thread_name.erase(\n-        std::remove_if(thread_name.begin(), thread_name.end(),\n-                       [](auto const c) -> bool { return !std::isalnum(c); }),\n-        thread_name.end());\n+    thread_name.erase(std::remove_if(thread_name.begin(), thread_name.end(),\n+                                     [](unsigned char const c) -> bool {\n+                                       return !absl::ascii_isalnum(c);\n+                                     }),\n+                      thread_name.end());\n     thread_.reset(Env::Default()->StartThread(\n         ThreadOptions(), absl::StrCat(\"GrpcPollingThread\", thread_name),\n         [this]() {"
        },
        {
            "sha": "bab4e713bd653aca9fd46f97718fe1a5428eeeb0",
            "filename": "tensorflow/java/src/gen/cc/op_specs.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fjava%2Fsrc%2Fgen%2Fcc%2Fop_specs.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fjava%2Fsrc%2Fgen%2Fcc%2Fop_specs.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fjava%2Fsrc%2Fgen%2Fcc%2Fop_specs.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -23,6 +23,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/log/log.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/match.h\"\n #include \"absl/strings/str_join.h\"\n #include \"absl/strings/strip.h\"\n@@ -188,7 +189,7 @@ string SnakeToCamelCase(const string& str, bool upper = false) {\n     if (c == '_') {\n       cap = true;\n     } else if (cap) {\n-      result += toupper(c);\n+      result += absl::ascii_toupper(c);\n       cap = false;\n     } else {\n       result += c;"
        },
        {
            "sha": "716c31e59810350d3f3ba1bfba441034e2b330a6",
            "filename": "tensorflow/python/framework/python_op_gen.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fpython%2Fframework%2Fpython_op_gen.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Fpython%2Fframework%2Fpython_op_gen.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fpython%2Fframework%2Fpython_op_gen.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -29,6 +29,7 @@ limitations under the License.\n #include <utility>\n #include <vector>\n \n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/escaping.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_join.h\"\n@@ -783,14 +784,15 @@ void GenerateLowerCaseOpName(const string& str, string* result) {\n     // Emit a joiner only if a previous-lower-to-now-upper or a\n     // now-upper-to-next-lower transition happens.\n     // (But don't emit an extra joiner if we just saw a namespace separator\n-    if (isupper(c) && (i > 0)) {\n-      if (islower(str[i - 1]) || ((i < last_index) && islower(str[i + 1]))) {\n+    if (absl::ascii_isupper(c) && (i > 0)) {\n+      if (absl::ascii_islower(str[i - 1]) ||\n+          ((i < last_index) && absl::ascii_islower(str[i + 1]))) {\n         if (!(str[i - 1] == namespace_separator)) {\n           result->push_back(joiner);\n         }\n       }\n     }\n-    result->push_back(tolower(c));\n+    result->push_back(absl::ascii_tolower(c));\n   }\n }\n "
        },
        {
            "sha": "2c05eb4267f817a0e8f759ab02b0b07c8c446806",
            "filename": "tensorflow/tools/proto_text/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Ftools%2Fproto_text%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Ftools%2Fproto_text%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Ftools%2Fproto_text%2FBUILD?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -68,6 +68,7 @@ cc_library(\n     }),\n     deps = [\n         \"//tensorflow/core:lib_proto_parsing\",\n+        \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/strings:string_view\",\n     ] + if_ios([\"//tensorflow/core/platform:logging\"]),\n )"
        },
        {
            "sha": "acc884bad434b128153608cfac8ca3b92b00cc72",
            "filename": "tensorflow/tools/proto_text/gen_proto_text_functions_lib.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Ftools%2Fproto_text%2Fgen_proto_text_functions_lib.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/tensorflow%2Ftools%2Fproto_text%2Fgen_proto_text_functions_lib.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Ftools%2Fproto_text%2Fgen_proto_text_functions_lib.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -20,6 +20,7 @@ limitations under the License.\n #include <string>\n #include <unordered_set>\n \n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/string_view.h\"\n #include \"tensorflow/core/platform/logging.h\"\n #include \"tensorflow/core/platform/macros.h\"\n@@ -352,7 +353,7 @@ void Generator::AppendFieldAppend(const FieldDescriptor& field) {\n     const auto* oneof = field.containing_oneof();\n     if (oneof != nullptr) {\n       std::string camel_name(field.camelcase_name());\n-      camel_name[0] = toupper(camel_name[0]);\n+      camel_name[0] = absl::ascii_toupper(camel_name[0]);\n       Print(\"if (msg.\", oneof->name(), \"_case() == \",\n             GetQualifiedName(*oneof->containing_type()), \"::k\", camel_name,\n             \") {\");"
        },
        {
            "sha": "b524cd85adb214853e907193e90913234717d230",
            "filename": "third_party/xla/third_party/tsl/tsl/platform/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2FBUILD?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -158,11 +158,11 @@ cc_library(\n     srcs = [\"numbers.cc\"],\n     hdrs = [\"numbers.h\"],\n     deps = [\n-        \":str_util\",\n         \":stringpiece\",\n         \":stringprintf\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/strings:str_format\",\n         \"@local_xla//xla/tsl/platform:logging\",\n         \"@local_xla//xla/tsl/platform:macros\",\n         \"@local_xla//xla/tsl/platform:types\",\n@@ -1036,6 +1036,7 @@ cc_library(\n     deps = [\n         \":str_util\",\n         \":stringpiece\",\n+        \"@com_google_absl//absl/strings\",\n         \"@local_xla//xla/tsl/platform:macros\",\n     ],\n )"
        },
        {
            "sha": "b2c80536bd369f22c946970928ed0624d31ffabe",
            "filename": "third_party/xla/third_party/tsl/tsl/platform/numbers.cc",
            "status": "modified",
            "additions": 93,
            "deletions": 171,
            "changes": 264,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fnumbers.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fnumbers.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fnumbers.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -14,21 +14,22 @@ limitations under the License.\n \n #include \"tsl/platform/numbers.h\"\n \n-#include <ctype.h>\n-#include <float.h>\n #include <stdio.h>\n #include <stdlib.h>\n \n #include <algorithm>\n #include <charconv>\n #include <cmath>\n #include <cstdint>\n-#include <locale>\n+#include <limits>\n+#include <optional>\n #include <string>\n #include <system_error>  // NOLINT\n-#include <unordered_map>\n+#include <type_traits>\n \n+#include \"absl/strings/charconv.h\"\n #include \"absl/strings/str_cat.h\"\n+#include \"absl/strings/str_format.h\"\n #include \"absl/strings/string_view.h\"\n #include \"xla/tsl/platform/logging.h\"\n #include \"xla/tsl/platform/macros.h\"\n@@ -40,102 +41,23 @@ namespace tsl {\n namespace {\n \n template <typename T>\n-const std::unordered_map<std::string, T>* GetSpecialNumsSingleton() {\n-  static const std::unordered_map<std::string, T>* special_nums =\n-      CHECK_NOTNULL((new const std::unordered_map<std::string, T>{\n-          {\"inf\", std::numeric_limits<T>::infinity()},\n-          {\"+inf\", std::numeric_limits<T>::infinity()},\n-          {\"-inf\", -std::numeric_limits<T>::infinity()},\n-          {\"infinity\", std::numeric_limits<T>::infinity()},\n-          {\"+infinity\", std::numeric_limits<T>::infinity()},\n-          {\"-infinity\", -std::numeric_limits<T>::infinity()},\n-          {\"nan\", std::numeric_limits<T>::quiet_NaN()},\n-          {\"+nan\", std::numeric_limits<T>::quiet_NaN()},\n-          {\"-nan\", -std::numeric_limits<T>::quiet_NaN()},\n-      }));\n-  return special_nums;\n-}\n-\n-template <typename T>\n-T locale_independent_strtonum(const char* str, const char** endptr) {\n-  auto special_nums = GetSpecialNumsSingleton<T>();\n-  std::stringstream s(str);\n-\n-  // Check if str is one of the special numbers.\n-  std::string special_num_str;\n-  s >> special_num_str;\n-\n-  for (size_t i = 0; i < special_num_str.length(); ++i) {\n-    special_num_str[i] =\n-        std::tolower(special_num_str[i], std::locale::classic());\n-  }\n-\n-  auto entry = special_nums->find(special_num_str);\n-  if (entry != special_nums->end()) {\n-    *endptr = str + (s.eof() ? static_cast<std::iostream::pos_type>(strlen(str))\n-                             : s.tellg());\n-    return entry->second;\n-  } else {\n-    // Perhaps it's a hex number\n-    if (special_num_str.compare(0, 2, \"0x\") == 0 ||\n-        special_num_str.compare(0, 3, \"-0x\") == 0) {\n-      return strtol(str, const_cast<char**>(endptr), 16);\n-    }\n-  }\n-  // Reset the stream\n-  s.str(str);\n-  s.clear();\n-  // Use the \"C\" locale\n-  s.imbue(std::locale::classic());\n-\n-  T result;\n-  s >> result;\n-\n-  // Set to result to what strto{f,d} functions would have returned. If the\n-  // number was outside the range, the stringstream sets the fail flag, but\n-  // returns the +/-max() value, whereas strto{f,d} functions return +/-INF.\n-  if (s.fail()) {\n-    if (result == std::numeric_limits<T>::max() ||\n-        result == std::numeric_limits<T>::infinity()) {\n-      result = std::numeric_limits<T>::infinity();\n-      s.clear(s.rdstate() & ~std::ios::failbit);\n-    } else if (result == -std::numeric_limits<T>::max() ||\n-               result == -std::numeric_limits<T>::infinity()) {\n-      result = -std::numeric_limits<T>::infinity();\n-      s.clear(s.rdstate() & ~std::ios::failbit);\n-    }\n+std::optional<T> AsciiToFp(absl::string_view str) {\n+  T value;\n+  absl::from_chars_result result =\n+      absl::from_chars(str.data(), str.data() + str.size(), value);\n+  if (result.ec != std::errc{}) {\n+    return std::nullopt;\n   }\n-\n-  if (endptr) {\n-    *endptr =\n-        str +\n-        (s.fail() ? static_cast<std::iostream::pos_type>(0)\n-                  : (s.eof() ? static_cast<std::iostream::pos_type>(strlen(str))\n-                             : s.tellg()));\n+  if (result.ptr != str.data() + str.size()) {\n+    // Not all characters consumed.\n+    return std::nullopt;\n   }\n-  return result;\n+  return value;\n }\n \n-}  // namespace\n-\n-namespace strings {\n-\n-size_t FastInt32ToBufferLeft(int32_t i, char* buffer) {\n-  uint32_t u = i;\n-  size_t length = 0;\n-  if (i < 0) {\n-    *buffer++ = '-';\n-    ++length;\n-    // We need to do the negation in modular (i.e., \"unsigned\")\n-    // arithmetic; MSVC++ apparently warns for plain \"-u\", so\n-    // we write the equivalent expression \"0 - u\" instead.\n-    u = 0 - u;\n-  }\n-  length += FastUInt32ToBufferLeft(u, buffer);\n-  return length;\n-}\n-\n-size_t FastUInt32ToBufferLeft(uint32_t i, char* buffer) {\n+template <typename T>\n+size_t FastUIntToBufferLeft(T i, char* buffer) {\n+  static_assert(std::is_unsigned_v<T>);\n   char* start = buffer;\n   do {\n     *buffer++ = ((i % 10) + '0');\n@@ -146,103 +68,107 @@ size_t FastUInt32ToBufferLeft(uint32_t i, char* buffer) {\n   return buffer - start;\n }\n \n-size_t FastInt64ToBufferLeft(int64_t i, char* buffer) {\n-  uint64_t u = i;\n+template <typename T>\n+size_t FastIntToBufferLeft(T i, char* buffer) {\n+  static_assert(std::is_signed_v<T>);\n+  std::make_unsigned_t<T> u = i;\n   size_t length = 0;\n   if (i < 0) {\n     *buffer++ = '-';\n     ++length;\n+    // We need to do the negation in modular (i.e., \"unsigned\")\n+    // arithmetic; MSVC++ apparently warns for plain \"-u\", so\n+    // we write the equivalent expression \"0 - u\" instead.\n     u = 0 - u;\n   }\n-  length += FastUInt64ToBufferLeft(u, buffer);\n+  length += FastUIntToBufferLeft(u, buffer);\n   return length;\n }\n+}  // namespace\n \n-size_t FastUInt64ToBufferLeft(uint64_t i, char* buffer) {\n-  char* start = buffer;\n-  do {\n-    *buffer++ = ((i % 10) + '0');\n-    i /= 10;\n-  } while (i > 0);\n-  *buffer = 0;\n-  std::reverse(start, buffer);\n-  return buffer - start;\n-}\n-\n-static const double kDoublePrecisionCheckMax = DBL_MAX / 1.000000000000001;\n-\n-size_t DoubleToBuffer(double value, char* buffer) {\n-  // DBL_DIG is 15 for IEEE-754 doubles, which are used on almost all\n-  // platforms these days.  Just in case some system exists where DBL_DIG\n-  // is significantly larger -- and risks overflowing our buffer -- we have\n-  // this assert.\n-  static_assert(DBL_DIG < 20, \"DBL_DIG is too big\");\n-\n-  if (std::isnan(value)) {\n-    int snprintf_result = snprintf(buffer, kFastToBufferSize, \"%snan\",\n-                                   std::signbit(value) ? \"-\" : \"\");\n-    // Paranoid check to ensure we don't overflow the buffer.\n-    DCHECK(snprintf_result > 0 && snprintf_result < kFastToBufferSize);\n-    return snprintf_result;\n-  }\n+namespace strings {\n \n-  if (std::abs(value) <= kDoublePrecisionCheckMax) {\n-    int snprintf_result =\n-        snprintf(buffer, kFastToBufferSize, \"%.*g\", DBL_DIG, value);\n+size_t FastInt32ToBufferLeft(int32_t i, char* buffer) {\n+  return FastIntToBufferLeft(i, buffer);\n+}\n \n-    // The snprintf should never overflow because the buffer is significantly\n-    // larger than the precision we asked for.\n-    DCHECK(snprintf_result > 0 && snprintf_result < kFastToBufferSize);\n+size_t FastUInt32ToBufferLeft(uint32_t i, char* buffer) {\n+  return FastUIntToBufferLeft(i, buffer);\n+}\n \n-    if (locale_independent_strtonum<double>(buffer, nullptr) == value) {\n-      // Round-tripping the string to double works; we're done.\n-      return snprintf_result;\n-    }\n-    // else: full precision formatting needed. Fall through.\n-  }\n+size_t FastInt64ToBufferLeft(int64_t i, char* buffer) {\n+  return FastIntToBufferLeft(i, buffer);\n+}\n \n-  int snprintf_result =\n-      snprintf(buffer, kFastToBufferSize, \"%.*g\", DBL_DIG + 2, value);\n+size_t FastUInt64ToBufferLeft(uint64_t i, char* buffer) {\n+  return FastUIntToBufferLeft(i, buffer);\n+}\n \n-  // Should never overflow; see above.\n-  DCHECK(snprintf_result > 0 && snprintf_result < kFastToBufferSize);\n+namespace {\n \n-  return snprintf_result;\n+constexpr int NumDecimalDigits(int n) {\n+  int count = 0;\n+  do {\n+    ++count;\n+    n /= 10;\n+  } while (n != 0);\n+  return count;\n }\n \n-size_t FloatToBuffer(float value, char* buffer) {\n-  // FLT_DIG is 6 for IEEE-754 floats, which are used on almost all\n-  // platforms these days.  Just in case some system exists where FLT_DIG\n-  // is significantly larger -- and risks overflowing our buffer -- we have\n-  // this assert.\n-  static_assert(FLT_DIG < 10, \"FLT_DIG is too big\");\n-\n+template <typename T>\n+size_t FpToBuffer(T value, char* buffer) {\n+  // Out of an abundance of caution, we ensure that the buffer is large enough\n+  // to hold the worst-case formatting of any floating-point number.\n+  constexpr size_t kMaxExponentDigits10 =\n+      std::max(NumDecimalDigits(std::numeric_limits<T>::max_exponent10),\n+               NumDecimalDigits(std::numeric_limits<T>::min_exponent10));\n+  constexpr size_t kMaxCharsWritten =\n+      1 +                                     // sign bit\n+      std::numeric_limits<T>::max_digits10 +  // decimal digits\n+      1 +                                     // decimal point\n+      1 +                                     // exponent character\n+      1 +                                     // exponent sign\n+      kMaxExponentDigits10;                   // exponent digits\n+  static_assert(kMaxCharsWritten < kFastToBufferSize);\n   if (std::isnan(value)) {\n-    int snprintf_result = snprintf(buffer, kFastToBufferSize, \"%snan\",\n-                                   std::signbit(value) ? \"-\" : \"\");\n+    int snprintf_result = absl::SNPrintF(buffer, kFastToBufferSize, \"%snan\",\n+                                         std::signbit(value) ? \"-\" : \"\");\n     // Paranoid check to ensure we don't overflow the buffer.\n     DCHECK(snprintf_result > 0 && snprintf_result < kFastToBufferSize);\n     return snprintf_result;\n   }\n \n-  int snprintf_result =\n-      snprintf(buffer, kFastToBufferSize, \"%.*g\", FLT_DIG, value);\n+  int snprintf_result = absl::SNPrintF(buffer, kFastToBufferSize, \"%.*g\",\n+                                       std::numeric_limits<T>::digits10, value);\n \n   // The snprintf should never overflow because the buffer is significantly\n   // larger than the precision we asked for.\n-  DCHECK(snprintf_result > 0 && snprintf_result < kFastToBufferSize);\n+  DCHECK(snprintf_result > 0 && snprintf_result <= kMaxCharsWritten);\n \n-  float parsed_value;\n-  if (!absl::SimpleAtof(buffer, &parsed_value) || parsed_value != value) {\n+  if (auto parsed_value = AsciiToFp<T>(buffer); parsed_value != value) {\n+    // Round-trip conversion failed, so we need to use full precision\n+    // formatting.\n     snprintf_result =\n-        snprintf(buffer, kFastToBufferSize, \"%.*g\", FLT_DIG + 3, value);\n+        absl::SNPrintF(buffer, kFastToBufferSize, \"%.*g\",\n+                       std::numeric_limits<T>::max_digits10, value);\n \n     // Should never overflow; see above.\n-    DCHECK(snprintf_result > 0 && snprintf_result < kFastToBufferSize);\n+    DCHECK(snprintf_result > 0 && snprintf_result <= kMaxCharsWritten);\n   }\n+\n   return snprintf_result;\n }\n \n+}  // namespace\n+\n+size_t DoubleToBuffer(double value, char* buffer) {\n+  return FpToBuffer(value, buffer);\n+}\n+\n+size_t FloatToBuffer(float value, char* buffer) {\n+  return FpToBuffer(value, buffer);\n+}\n+\n strings_internal::AlphaNumBuffer LegacyPrecision(double d) {\n   strings_internal::AlphaNumBuffer result;\n   result.size = DoubleToBuffer(d, result.data.data());\n@@ -304,33 +230,29 @@ std::string HumanReadableNumBytes(int64_t num_bytes) {\n     return \"-8E\";\n   }\n \n-  const char* neg_str = (num_bytes < 0) ? \"-\" : \"\";\n+  static absl::string_view kNegSign = \"-\";\n+  absl::string_view neg_str = (num_bytes < 0) ? kNegSign : \"\";\n   if (num_bytes < 0) {\n     num_bytes = -num_bytes;\n   }\n \n   // Special case for bytes.\n   if (num_bytes < 1024) {\n     // No fractions for bytes.\n-    char buf[8];  // Longest possible string is '-XXXXB'\n-    snprintf(buf, sizeof(buf), \"%s%lldB\", neg_str,\n-             static_cast<long long>(num_bytes));\n-    return std::string(buf);\n+    return absl::StrCat(neg_str, num_bytes, \"B\");\n   }\n \n-  static const char units[] = \"KMGTPE\";  // int64 only goes up to E.\n-  const char* unit = units;\n+  static absl::string_view kUnits = \"KMGTPE\";  // int64 only goes up to E.\n+  auto unit = kUnits.begin();\n   while (num_bytes >= static_cast<int64_t>(1024) * 1024) {\n     num_bytes /= 1024;\n     ++unit;\n-    CHECK(unit < units + TF_ARRAYSIZE(units));\n+    CHECK(unit < kUnits.end());\n   }\n \n   // We use SI prefixes.\n-  char buf[16];\n-  snprintf(buf, sizeof(buf), ((*unit == 'K') ? \"%s%.1f%ciB\" : \"%s%.2f%ciB\"),\n-           neg_str, num_bytes / 1024.0, *unit);\n-  return std::string(buf);\n+  return absl::StrFormat(\"%s%.*f%ciB\", neg_str, *unit == 'K' ? 1 : 2,\n+                         num_bytes / 1024.0, *unit);\n }\n \n std::string HumanReadableElapsedTime(double seconds) {"
        },
        {
            "sha": "a13bcaf2b65e125fd06c9cd4a0e3810d8a4ca379",
            "filename": "third_party/xla/third_party/tsl/tsl/platform/scanner.h",
            "status": "modified",
            "additions": 17,
            "deletions": 31,
            "changes": 48,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fscanner.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fscanner.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fscanner.h?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -18,6 +18,7 @@ limitations under the License.\n \n #include <string>\n \n+#include \"absl/strings/ascii.h\"\n #include \"xla/tsl/platform/macros.h\"\n #include \"tsl/platform/str_util.h\"\n #include \"tsl/platform/stringpiece.h\"\n@@ -174,58 +175,43 @@ class Scanner {\n     return *this;\n   }\n \n-  static bool IsLetter(char ch) {\n-    return (ch >= 'a' && ch <= 'z') || (ch >= 'A' && ch <= 'Z');\n-  }\n-\n-  static bool IsLowerLetter(char ch) { return ch >= 'a' && ch <= 'z'; }\n-\n-  static bool IsDigit(char ch) { return ch >= '0' && ch <= '9'; }\n-\n-  static bool IsSpace(char ch) {\n-    return (ch == ' ' || ch == '\\t' || ch == '\\n' || ch == '\\v' || ch == '\\f' ||\n-            ch == '\\r');\n-  }\n-\n   static bool Matches(CharClass clz, char ch) {\n     switch (clz) {\n       case ALL:\n         return true;\n       case DIGIT:\n-        return IsDigit(ch);\n+        return absl::ascii_isdigit(ch);\n       case LETTER:\n-        return IsLetter(ch);\n+        return absl::ascii_isalpha(ch);\n       case LETTER_DIGIT:\n-        return IsLetter(ch) || IsDigit(ch);\n+        return absl::ascii_isalnum(ch);\n       case LETTER_DIGIT_DASH_UNDERSCORE:\n-        return (IsLetter(ch) || IsDigit(ch) || ch == '-' || ch == '_');\n+        return (absl::ascii_isalnum(ch) || ch == '-' || ch == '_');\n       case LETTER_DIGIT_DASH_DOT_SLASH:\n-        return IsLetter(ch) || IsDigit(ch) || ch == '-' || ch == '.' ||\n-               ch == '/';\n+        return absl::ascii_isalnum(ch) || ch == '-' || ch == '.' || ch == '/';\n       case LETTER_DIGIT_DASH_DOT_SLASH_UNDERSCORE:\n-        return (IsLetter(ch) || IsDigit(ch) || ch == '-' || ch == '.' ||\n+        return (absl::ascii_isalnum(ch) || ch == '-' || ch == '.' ||\n                 ch == '/' || ch == '_');\n       case LETTER_DIGIT_DOT:\n-        return IsLetter(ch) || IsDigit(ch) || ch == '.';\n+        return absl::ascii_isalnum(ch) || ch == '.';\n       case LETTER_DIGIT_DOT_PLUS_MINUS:\n-        return IsLetter(ch) || IsDigit(ch) || ch == '+' || ch == '-' ||\n-               ch == '.';\n+        return absl::ascii_isalnum(ch) || ch == '+' || ch == '-' || ch == '.';\n       case LETTER_DIGIT_DOT_UNDERSCORE:\n-        return IsLetter(ch) || IsDigit(ch) || ch == '.' || ch == '_';\n+        return absl::ascii_isalnum(ch) || ch == '.' || ch == '_';\n       case LETTER_DIGIT_UNDERSCORE:\n-        return IsLetter(ch) || IsDigit(ch) || ch == '_';\n+        return absl::ascii_isalnum(ch) || ch == '_';\n       case LOWERLETTER:\n-        return ch >= 'a' && ch <= 'z';\n+        return absl::ascii_islower(ch);\n       case LOWERLETTER_DIGIT:\n-        return IsLowerLetter(ch) || IsDigit(ch);\n+        return absl::ascii_islower(ch) || absl::ascii_isdigit(ch);\n       case LOWERLETTER_DIGIT_UNDERSCORE:\n-        return IsLowerLetter(ch) || IsDigit(ch) || ch == '_';\n+        return absl::ascii_islower(ch) || absl::ascii_isdigit(ch) || ch == '_';\n       case NON_ZERO_DIGIT:\n-        return IsDigit(ch) && ch != '0';\n+        return absl::ascii_isdigit(ch) && ch != '0';\n       case SPACE:\n-        return IsSpace(ch);\n+        return absl::ascii_isspace(ch);\n       case UPPERLETTER:\n-        return ch >= 'A' && ch <= 'Z';\n+        return absl::ascii_isupper(ch);\n       case RANGLE:\n         return ch == '>';\n     }"
        },
        {
            "sha": "7351e0b49429954092d8c305eb586f063a409c39",
            "filename": "third_party/xla/third_party/tsl/tsl/platform/str_util.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 8,
            "changes": 19,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fstr_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fstr_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Ftsl%2Ftsl%2Fplatform%2Fstr_util.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -16,10 +16,12 @@ limitations under the License.\n #include \"tsl/platform/str_util.h\"\n \n #include <cctype>\n+#include <cstddef>\n #include <cstdint>\n #include <string>\n \n #include \"absl/strings/ascii.h\"\n+#include \"absl/strings/match.h\"\n #include \"xla/tsl/platform/logging.h\"\n #include \"tsl/platform/stringpiece.h\"\n \n@@ -77,7 +79,7 @@ bool ConsumeNonWhitespace(absl::string_view* s, absl::string_view* val) {\n   const char* limit = p + s->size();\n   while (p < limit) {\n     const char c = *p;\n-    if (isspace(c)) break;\n+    if (absl::ascii_isspace(c)) break;\n     p++;\n   }\n   const size_t n = p - s->data();\n@@ -95,9 +97,9 @@ void TitlecaseString(string* s, absl::string_view delimiters) {\n   bool upper = true;\n   for (string::iterator ss = s->begin(); ss != s->end(); ++ss) {\n     if (upper) {\n-      *ss = toupper(*ss);\n+      *ss = absl::ascii_toupper(*ss);\n     }\n-    upper = (delimiters.find(*ss) != absl::string_view::npos);\n+    upper = absl::StrContains(delimiters, *ss);\n   }\n }\n \n@@ -138,7 +140,7 @@ string ArgDefCase(absl::string_view s) {\n   size_t to_skip = 0;\n   for (size_t i = 0; i < n; ++i) {\n     // If we are skipping and current letter is non-alpha, skip it as well\n-    if (i == to_skip && !isalpha(s[i])) {\n+    if (i == to_skip && !absl::ascii_isalpha(s[i])) {\n       ++to_skip;\n       continue;\n     }\n@@ -147,7 +149,8 @@ string ArgDefCase(absl::string_view s) {\n     // If this letter is upper case, not the very first char in the\n     // resulting string, and previous letter isn't replaced with an underscore,\n     // we will need to insert an underscore.\n-    if (isupper(s[i]) && i != to_skip && i > 0 && isalnum(s[i - 1])) {\n+    if (absl::ascii_isupper(s[i]) && i != to_skip && i > 0 &&\n+        absl::ascii_isalnum(s[i - 1])) {\n       ++extra_us;\n     }\n   }\n@@ -162,15 +165,15 @@ string ArgDefCase(absl::string_view s) {\n     char c = s[i];\n     // If c is not alphanumeric, we don't need to do anything\n     // since there is already an underscore in its place.\n-    if (isalnum(c)) {\n-      if (isupper(c)) {\n+    if (absl::ascii_isalnum(c)) {\n+      if (absl::ascii_isupper(c)) {\n         // If current char is upper case, we might need to insert an\n         // underscore.\n         if (i != to_skip) {\n           DCHECK_GT(j, 0);\n           if (result[j - 1] != '_') ++j;\n         }\n-        result[j] = tolower(c);\n+        result[j] = absl::ascii_tolower(c);\n       } else {\n         result[j] = c;\n       }"
        },
        {
            "sha": "33376186beb77087e01c1f834660b9a79ddac256",
            "filename": "third_party/xla/xla/codegen/intrinsic/type.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2Ftype.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2Ftype.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fcodegen%2Fintrinsic%2Ftype.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -15,14 +15,14 @@ limitations under the License.\n \n #include \"xla/codegen/intrinsic/type.h\"\n \n-#include <cctype>\n #include <cstddef>\n #include <optional>\n #include <string>\n #include <variant>\n \n #include \"absl/log/check.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/numbers.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/string_view.h\"\n@@ -121,7 +121,7 @@ std::string Type::name() const {\n \n Type Type::FromName(absl::string_view name) {\n   if (name[0] == 'v') {\n-    size_t len = std::isdigit(name[2]) ? 2 : 1;\n+    size_t len = absl::ascii_isdigit(name[2]) ? 2 : 1;\n     size_t width;\n     CHECK(absl::SimpleAtoi(name.substr(1, len), &width)) << name;\n     return Type(FromLowercaseLLVMTypeName(name.substr(len + 1)), width);"
        },
        {
            "sha": "98699ef111e7c41f873bb02f6a212a85aa4099fc",
            "filename": "third_party/xla/xla/hlo/analysis/indexing_map_serialization.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Findexing_map_serialization.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Findexing_map_serialization.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Findexing_map_serialization.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -26,6 +26,7 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/log/check.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_format.h\"\n #include \"absl/strings/str_join.h\"\n@@ -169,7 +170,7 @@ class Parser {\n \n  private:\n   void ConsumeWhitespace() {\n-    while (it_ != input_.end() && std::isspace(*it_)) {\n+    while (it_ != input_.end() && absl::ascii_isspace(*it_)) {\n       ++it_;\n     }\n   }\n@@ -302,10 +303,10 @@ Token Parser::GetNextTokenImpl() {\n     return Token{\"\", Token::Kind::kEOF};\n   }\n   auto start = it_;\n-  if (std::isalpha(*it_)) {\n+  if (absl::ascii_isalpha(*it_)) {\n     // Variable name.\n-    while (it_ != input_.end() &&\n-           (std::isalpha(*it_) || std::isdigit(*it_) || *it_ == '_')) {\n+    while (it_ != input_.end() && (absl::ascii_isalpha(*it_) ||\n+                                   absl::ascii_isdigit(*it_) || *it_ == '_')) {\n       ++it_;\n     }\n     StringRef spelling = input_.substr(start - input_.data(), it_ - start);\n@@ -326,9 +327,9 @@ Token Parser::GetNextTokenImpl() {\n     }\n     return Token{spelling, Token::Kind::kVarName};\n   }\n-  if (std::isdigit(*it_)) {\n+  if (absl::ascii_isdigit(*it_)) {\n     auto start = it_;\n-    while (it_ != input_.end() && std::isdigit(*it_)) {\n+    while (it_ != input_.end() && absl::ascii_isdigit(*it_)) {\n       ++it_;\n     }\n \n@@ -342,9 +343,9 @@ Token Parser::GetNextTokenImpl() {\n         ++it_;\n         return Token{\"->\", Token::Kind::kArrow};\n       }\n-      if (std::isdigit(*it_)) {\n+      if (absl::ascii_isdigit(*it_)) {\n         auto start = it_ - 1;\n-        while (it_ != input_.end() && std::isdigit(*it_)) {\n+        while (it_ != input_.end() && absl::ascii_isdigit(*it_)) {\n           ++it_;\n         }\n         StringRef spelling = input_.substr(start - input_.data(), it_ - start);"
        },
        {
            "sha": "ca8a5fd75f14b1d23a8afd58db68b387cb83d063",
            "filename": "third_party/xla/xla/hlo/analysis/indexing_test_utils.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Findexing_test_utils.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Findexing_test_utils.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Findexing_test_utils.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -30,6 +30,7 @@ limitations under the License.\n #include \"absl/log/check.h\"\n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_join.h\"\n #include \"absl/strings/string_view.h\"\n@@ -171,10 +172,10 @@ bool ApproximateMatch(absl::string_view lhs, absl::string_view rhs) {\n   size_t rhs_length = rhs.size();\n   size_t l = 0, r = 0;\n   while (l < lhs_length || r < rhs_length) {\n-    while (l < lhs_length && std::isspace(lhs[l])) {\n+    while (l < lhs_length && absl::ascii_isspace(lhs[l])) {\n       ++l;\n     }\n-    while (r < rhs_length && std::isspace(rhs[r])) {\n+    while (r < rhs_length && absl::ascii_isspace(rhs[r])) {\n       ++r;\n     }\n     if (l == lhs_length || r == rhs_length) {"
        },
        {
            "sha": "b057c45755928d8ff736a7c41c4b139b2d0cdfc8",
            "filename": "third_party/xla/xla/hlo/analysis/symbolic_expr.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fsymbolic_expr.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fsymbolic_expr.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Fanalysis%2Fsymbolic_expr.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -88,11 +88,11 @@ class Parser {\n   int64_t ParseNumber(std::string& error_msg) {\n     size_t num_len = 0;\n     if (!remaining_str_.empty() &&\n-        (isdigit(remaining_str_[0]) || remaining_str_[0] == '-')) {\n+        (absl::ascii_isdigit(remaining_str_[0]) || remaining_str_[0] == '-')) {\n       num_len = 1;\n     }\n     while (num_len < remaining_str_.size() &&\n-           isdigit(remaining_str_[num_len])) {\n+           absl::ascii_isdigit(remaining_str_[num_len])) {\n       num_len++;\n     }\n     CHECK(num_len > 0) << error_msg;"
        },
        {
            "sha": "0a20c69af6b6fa6a4040fc8341019b208d979fa7",
            "filename": "third_party/xla/xla/mlir_hlo/mhlo/transforms/legalize_einsum_to_dot_general/legalize_einsum_to_dot_general.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Flegalize_einsum_to_dot_general%2Flegalize_einsum_to_dot_general.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Flegalize_einsum_to_dot_general%2Flegalize_einsum_to_dot_general.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fmlir_hlo%2Fmhlo%2Ftransforms%2Flegalize_einsum_to_dot_general%2Flegalize_einsum_to_dot_general.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -19,6 +19,7 @@ limitations under the License.\n #include <memory>\n #include <utility>\n \n+#include \"llvm/ADT/StringExtras.h\"\n #include \"mhlo/IR/hlo_ops.h\"\n #include \"mhlo/transforms/passes.h\"\n #include \"mhlo/transforms/rewriters.h\"\n@@ -48,7 +49,7 @@ struct EinsumToDotGeneralPattern : public OpRewritePattern<EinsumOp> {\n     enum EquationVariable { kIsLhs, kIsRhs, kIsResult };\n     EquationVariable currentVariable = kIsLhs;\n     while (index < equation.size()) {\n-      if (std::isalpha(equation[index])) {\n+      if (llvm::isAlpha(equation[index])) {\n         if (currentVariable == kIsLhs) {\n           lhsTokens.push_back(equation[index]);\n         } else if (currentVariable == kIsRhs) {"
        },
        {
            "sha": "35acc45c65cee194d261fadf8a5a72e0c6b7ffc5",
            "filename": "third_party/xla/xla/service/cpu/tests/cpu_intrinsic_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fcpu_intrinsic_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fcpu_intrinsic_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fcpu_intrinsic_test.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -61,10 +61,10 @@ class CpuUnaryIntrinsicTest\n     auto spec = info.param;\n \n     std::string opcode(HloOpcodeString(spec.opcode));\n-    opcode[0] = toupper(opcode[0]);\n+    opcode[0] = absl::ascii_toupper(opcode[0]);\n \n     std::string type(PrimitiveType_Name(spec.type));\n-    type[0] = toupper(type[0]);\n+    type[0] = absl::ascii_toupper(type[0]);\n \n     std::string triple{spec.triple.data(), spec.triple.size()};\n     if (triple == kTriple_x86_64) {"
        },
        {
            "sha": "b659c9a48f821b9e72801a1e0a3c2225b781becd",
            "filename": "third_party/xla/xla/service/cpu/tests/cpu_vectorization_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fcpu_vectorization_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fcpu_vectorization_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fcpu_vectorization_test.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -63,7 +63,7 @@ class CpuVectorizationTest\n     auto spec = info.param;\n \n     std::string opcode(HloOpcodeString(spec.opcode));\n-    opcode[0] = toupper(opcode[0]);\n+    opcode[0] = absl::ascii_toupper(opcode[0]);\n \n     std::string triple{spec.triple.data(), spec.triple.size()};\n     if (triple == kTriple_x86_64) {\n@@ -256,7 +256,7 @@ class JitVectorizationTest\n   static std::string Name(\n       const ::testing::TestParamInfo<JitVectorizationTestSpec>& info) {\n     std::string op_name(HloOpcodeString(info.param.opcode));\n-    op_name[0] = toupper(op_name[0]);\n+    op_name[0] = absl::ascii_toupper(op_name[0]);\n     return absl::StrCat(op_name, \"_max_\", info.param.max_isa);\n   }\n "
        },
        {
            "sha": "dd28c5432c8bd5b39a12e4f9c63b6c0c33f5861c",
            "filename": "third_party/xla/xla/service/cpu/tests/onednn_convolution_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fonednn_convolution_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fonednn_convolution_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fcpu%2Ftests%2Fonednn_convolution_test.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -15,6 +15,7 @@ limitations under the License.\n \n #include <utility>\n \n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_replace.h\"\n #include \"xla/hlo/testlib/filecheck.h\"\n #include \"xla/hlo/testlib/test.h\"\n@@ -756,8 +757,7 @@ INSTANTIATE_TEST_SUITE_P(\n     ::testing::Values(F32, BF16, F16),\n     [](const ::testing::TestParamInfo<ConvolutionTest::ParamType>& info) {\n       auto test_name = primitive_util::LowercasePrimitiveTypeName(info.param);\n-      std::transform(test_name.begin(), test_name.end(), test_name.begin(),\n-                     [](auto c) { return std::toupper(c); });\n+      absl::AsciiStrToUpper(&test_name);\n       return test_name;\n     });\n "
        },
        {
            "sha": "fc0ed7fbf660f7201227fb05d48d2467da519808",
            "filename": "third_party/xla/xla/sort_json.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fsort_json.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Fsort_json.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fsort_json.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -26,6 +26,7 @@ limitations under the License.\n \n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/strings/string_view.h\"\n #include \"xla/tsl/platform/errors.h\"\n@@ -34,7 +35,7 @@ limitations under the License.\n namespace {\n \n void SkipWhitespace(absl::string_view json, size_t& index) {\n-  while (index < json.size() && std::isspace(json[index])) {\n+  while (index < json.size() && absl::ascii_isspace(json[index])) {\n     ++index;\n   }\n }\n@@ -134,8 +135,8 @@ bool LiteralIsFinished(absl::string_view outer_json, size_t& index,\n     return c == '\"';\n   }\n \n-  return std::isspace(c) || c == ',' || c == '{' || c == '}' || c == '[' ||\n-         c == ']' || c == ':';\n+  return absl::ascii_isspace(c) || c == ',' || c == '{' || c == '}' ||\n+         c == '[' || c == ']' || c == ':';\n }\n \n absl::StatusOr<absl::string_view> ParseLiteral(absl::string_view outer_json,"
        },
        {
            "sha": "0132edf2af5b548bb697e4a7ae1dbea8d61a4b9d",
            "filename": "third_party/xla/xla/tools/benchmarks/utils/generate_benchmark_matrices_main.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Ftools%2Fbenchmarks%2Futils%2Fgenerate_benchmark_matrices_main.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Ftools%2Fbenchmarks%2Futils%2Fgenerate_benchmark_matrices_main.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftools%2Fbenchmarks%2Futils%2Fgenerate_benchmark_matrices_main.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -24,6 +24,7 @@\n #include \"absl/log/log.h\"\n #include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n+#include \"absl/strings/ascii.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"json/json.h\"\n #include \"xla/tools/benchmarks/proto/benchmark_config.pb.h\"\n@@ -71,8 +72,7 @@ constexpr char kUsageText[] = R\"(\n absl::StatusOr<xla::WorkflowType> GetWorkflowTypeFromStr(\n     std::string workflow_type_arg_str) {\n   // Convert to uppercase for matching with enum names\n-  std::transform(workflow_type_arg_str.begin(), workflow_type_arg_str.end(),\n-                 workflow_type_arg_str.begin(), ::toupper);\n+  absl::AsciiStrToUpper(&workflow_type_arg_str);\n \n   static const absl::NoDestructor<\n       absl::flat_hash_map<std::string, xla::WorkflowType>>"
        },
        {
            "sha": "664a57c7cc94f629c9e6deee7d6a0a91f46f593e",
            "filename": "third_party/xla/xla/tsl/platform/cloud/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -387,6 +387,7 @@ tsl_cc_test(\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:test\",\n+        \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n         \"@com_google_googletest//:gtest_main\","
        },
        {
            "sha": "581db189ddeb41ac6df7b6bfc256caf519f63e22",
            "filename": "third_party/xla/xla/tsl/platform/cloud/ram_file_block_cache_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fram_file_block_cache_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/831ac5e4a642d8c957f428cb862098f472f88b30/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fram_file_block_cache_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fram_file_block_cache_test.cc?ref=831ac5e4a642d8c957f428cb862098f472f88b30",
            "patch": "@@ -17,6 +17,7 @@ limitations under the License.\n \n #include <cstring>\n \n+#include \"absl/strings/ascii.h\"\n #include \"absl/synchronization/blocking_counter.h\"\n #include \"absl/synchronization/notification.h\"\n #include \"absl/time/time.h\"\n@@ -366,7 +367,7 @@ TEST(RamFileBlockCacheTest, RemoveFile) {\n     char c = (filename == \"a\") ? 'a' : (filename == \"b\") ? 'b' : 'x';\n     if (offset > 0) {\n       // The first block is lower case and all subsequent blocks are upper case.\n-      c = toupper(c);\n+      c = absl::ascii_toupper(c);\n     }\n     memset(buffer, c, n);\n     *bytes_transferred = n;"
        }
    ],
    "stats": {
        "total": 539,
        "additions": 237,
        "deletions": 302
    }
}