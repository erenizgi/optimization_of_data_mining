{
    "author": "ybaturina",
    "message": "Fix MacOS nightly wheel builds by adding h5py version limit.\n\nThe new h5py releases support only MacOS 14, 15 (TF needs MacOS 10, 11).\n\nPiperOrigin-RevId: 819884128",
    "sha": "2fe50c50208b0e0478df06f164214d9aa68a1287",
    "files": [
        {
            "sha": "a24dc1a57e36830dc14ec0076ad7ae7f511a5f63",
            "filename": "ci/official/requirements_updater/numpy1_requirements/requirements.in",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2fe50c50208b0e0478df06f164214d9aa68a1287/ci%2Fofficial%2Frequirements_updater%2Fnumpy1_requirements%2Frequirements.in",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2fe50c50208b0e0478df06f164214d9aa68a1287/ci%2Fofficial%2Frequirements_updater%2Fnumpy1_requirements%2Frequirements.in",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/ci%2Fofficial%2Frequirements_updater%2Fnumpy1_requirements%2Frequirements.in?ref=2fe50c50208b0e0478df06f164214d9aa68a1287",
            "patch": "@@ -1,7 +1,7 @@\n # Requirements for NumPy 1.x\n numpy ~= 1.26.0\n wheel ~= 0.41.2\n-h5py >= 3.11.0\n+h5py >= 3.11.0, < 3.15.0\n lit ~= 17.0.2\n opt_einsum == 3.3.0\n astunparse == 1.6.3"
        },
        {
            "sha": "86d5526834753fd4b133a0536ac797b499faf8a8",
            "filename": "ci/official/requirements_updater/requirements.in",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2fe50c50208b0e0478df06f164214d9aa68a1287/ci%2Fofficial%2Frequirements_updater%2Frequirements.in",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2fe50c50208b0e0478df06f164214d9aa68a1287/ci%2Fofficial%2Frequirements_updater%2Frequirements.in",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/ci%2Fofficial%2Frequirements_updater%2Frequirements.in?ref=2fe50c50208b0e0478df06f164214d9aa68a1287",
            "patch": "@@ -1,7 +1,7 @@\n # Note that numpy 2.1.0 does not support python 3.9\n numpy >= 2.0.0, < 2.2.0\n wheel ~= 0.41.2\n-h5py >= 3.11.0\n+h5py >= 3.11.0, < 3.15.0\n lit ~= 17.0.2\n opt_einsum == 3.3.0\n astunparse == 1.6.3"
        },
        {
            "sha": "b27f2b3be05dfee87a8870d869ce9034d68a95cb",
            "filename": "tensorflow/tools/pip_package/setup.py.tpl",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2fe50c50208b0e0478df06f164214d9aa68a1287/tensorflow%2Ftools%2Fpip_package%2Fsetup.py.tpl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2fe50c50208b0e0478df06f164214d9aa68a1287/tensorflow%2Ftools%2Fpip_package%2Fsetup.py.tpl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Ftools%2Fpip_package%2Fsetup.py.tpl?ref=2fe50c50208b0e0478df06f164214d9aa68a1287",
            "patch": "@@ -126,7 +126,8 @@ REQUIRED_PACKAGES = [\n     'tb-nightly ~= 2.20.0.a',\n     'keras-nightly >= 3.10.0.dev',\n     'numpy >= 1.26.0',\n-    'h5py >= 3.11.0',\n+    # Starting with 3.15, only MacOS 14 and 15 are supported.\n+    'h5py >= 3.11.0, < 3.15.0',\n     'ml_dtypes >= 0.5.1, < 1.0.0',\n ]\n "
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}