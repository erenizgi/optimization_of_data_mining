{
    "author": "loislo",
    "message": "[XLA:GPU] Fix usages of deprecated tsl::errors::NotFound in xla\n\nThis change replaces usages of tsl::errors::NotFound with absl::NotFoundError,\nwrapping arguments in absl::StrCat where necessary. This addresses deprecation\nwarnings and moves towards standard Abseil error handling.\n\nThe deprecated tsl::errors::NotFound function was identified in third_party/tensorflow/compiler/xla/tsl/platform/errors.h.\n\nChanges:\n- Replaced errors::NotFound with absl::NotFoundError.\n- Used absl::StrCat to construct error messages where necessary.\nPiperOrigin-RevId: 836651254",
    "sha": "191445381148a62e3784a9b19724bc994fd19b99",
    "files": [
        {
            "sha": "e67e267c4ac175fd2c45a57eebadc63c25aa71e9",
            "filename": "third_party/xla/xla/tsl/framework/device_id_manager.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_manager.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_manager.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fframework%2Fdevice_id_manager.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -15,13 +15,17 @@ limitations under the License.\n \n #include \"xla/tsl/framework/device_id_manager.h\"\n \n+#include <cstdint>\n+#include <string>\n #include <unordered_map>\n+#include <utility>\n #include <vector>\n \n #include \"absl/status/status.h\"\n #include \"absl/strings/str_cat.h\"\n #include \"absl/synchronization/mutex.h\"\n #include \"xla/tsl/framework/device_id.h\"\n+#include \"xla/tsl/framework/device_type.h\"\n #include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/logging.h\"\n #include \"xla/tsl/platform/macros.h\"\n@@ -134,8 +138,9 @@ absl::Status DeviceIdManager::TfToPlatformDeviceId(\n                                                  platform_device_id)) {\n     return absl::OkStatus();\n   }\n-  return errors::NotFound(\"TensorFlow device \", type, \":\", tf_device_id.value(),\n-                          \" was not registered\");\n+  return absl::NotFoundError(\n+      absl::StrCat(\"TensorFlow device \", type.type_string(), \":\",\n+                   tf_device_id.value(), \" was not registered\"));\n }\n \n absl::StatusOr<std::vector<TfDeviceId>> DeviceIdManager::GetTfDevicesOnPlatform("
        },
        {
            "sha": "f60924e3b04111f4290a3e2556742e77eeb8bd52",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/cell_reader-inl.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcell_reader-inl.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcell_reader-inl.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcell_reader-inl.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -21,7 +21,9 @@ limitations under the License.\n #include <vector>\n \n #include \"absl/log/log.h\"\n+#include \"absl/status/status.h\"\n #include \"absl/status/statusor.h\"\n+#include \"absl/strings/str_cat.h\"\n #include \"absl/strings/str_join.h\"\n #include \"xla/tsl/lib/monitoring/collected_metrics.h\"\n #include \"xla/tsl/lib/monitoring/collection_registry.h\"\n@@ -67,8 +69,8 @@ absl::StatusOr<std::vector<Point>> GetPoints(\n     const std::vector<std::string>& labels) {\n   auto metric_descriptor = metrics.metric_descriptor_map.find(metric_name);\n   if (metric_descriptor == metrics.metric_descriptor_map.end()) {\n-    return errors::NotFound(\"Metric descriptor is not found for metric \",\n-                            metric_name, \".\");\n+    return absl::NotFoundError(absl::StrCat(\n+        \"Metric descriptor is not found for metric \", metric_name, \".\"));\n   }\n   const std::vector<std::string>& label_names =\n       metric_descriptor->second->label_names;\n@@ -80,8 +82,8 @@ absl::StatusOr<std::vector<Point>> GetPoints(\n   }\n   auto point_set = metrics.point_set_map.find(metric_name);\n   if (point_set == metrics.point_set_map.end()) {\n-    return errors::NotFound(\"Metric point set is not found for metric \",\n-                            metric_name, \".\");\n+    return absl::NotFoundError(absl::StrCat(\n+        \"Metric point set is not found for metric \", metric_name, \".\"));\n   }\n \n   std::vector<Point> points;"
        },
        {
            "sha": "f3034b1b79e588a950bfb5f58680989f07b3acad",
            "filename": "third_party/xla/xla/tsl/platform/cloud/BUILD",
            "status": "modified",
            "additions": 17,
            "deletions": 1,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2FBUILD?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -224,10 +224,16 @@ cc_library(\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:types\",\n         \"//xla/tsl/util:env_var\",\n+        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/log:check\",\n+        \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/strings\",\n+        \"@com_google_absl//absl/strings:string_view\",\n         \"@curl\",\n         \"@local_tsl//tsl/platform:protobuf\",\n         \"@local_tsl//tsl/platform:scanner\",\n         \"@local_tsl//tsl/platform:str_util\",\n+        \"@local_tsl//tsl/platform:strcat\",\n         \"@local_tsl//tsl/platform:stringpiece\",\n     ],\n )\n@@ -267,6 +273,9 @@ cc_library(\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:status\",\n+        \"//xla/tsl/platform:types\",\n+        \"@com_google_absl//absl/log\",\n+        \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@jsoncpp_git//:jsoncpp\",\n@@ -499,14 +508,21 @@ tsl_cc_test(\n     ],\n     tags = [\"no_oss\"],  # TODO(b/327036247): revisit after this moves to XLA\n     deps = [\n+        \":compute_engine_metadata_client\",\n         \":google_auth_provider\",\n+        \":http_request\",\n         \":http_request_fake\",\n         \":oauth_client\",\n         \"//xla/tsl/lib/core:status_test_util\",\n-        \"//xla/tsl/platform:env_impl\",\n+        \"//xla/tsl/platform:env\",\n+        \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:test\",\n+        \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest_main\",\n+        \"@jsoncpp_git//:jsoncpp\",\n         \"@local_tsl//tsl/platform:path\",\n+        \"@local_tsl//tsl/platform:retrying_utils\",\n     ],\n )\n "
        },
        {
            "sha": "a2456e60ec29b838ec4683655b0396ab5e75d999",
            "filename": "third_party/xla/xla/tsl/platform/cloud/curl_http_request.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 5,
            "changes": 23,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fcurl_http_request.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -16,14 +16,27 @@ limitations under the License.\n #include \"xla/tsl/platform/cloud/curl_http_request.h\"\n \n #include <algorithm>\n-\n-#include \"xla/tsl/lib/gtl/map_util.h\"\n+#include <cerrno>\n+#include <cstddef>\n+#include <cstdint>\n+#include <cstdio>\n+#include <cstring>\n+#include <string>\n+#include <vector>\n+\n+#include \"absl/log/check.h\"\n+#include \"absl/log/log.h\"\n+#include \"absl/status/status.h\"\n+#include \"absl/strings/ascii.h\"\n+#include \"absl/strings/str_cat.h\"\n+#include \"absl/strings/string_view.h\"\n+#include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/errors.h\"\n-#include \"xla/tsl/platform/macros.h\"\n+#include \"xla/tsl/platform/status.h\"\n #include \"xla/tsl/platform/types.h\"\n #include \"xla/tsl/util/env_var.h\"\n #include \"tsl/platform/scanner.h\"\n-#include \"tsl/platform/str_util.h\"\n+#include \"tsl/platform/strcat.h\"\n \n #define CHECK_CURL_OK(expr) CHECK_EQ(expr, CURLE_OK)\n \n@@ -506,7 +519,7 @@ absl::Status CurlHttpRequest::Send() {\n     // NOT_FOUND indicates that the requested resource does not exist.\n     case 404:  // Not found\n     case 410:  // Gone\n-      result = errors::NotFound(get_error_message());\n+      result = absl::NotFoundError(get_error_message());\n       break;\n \n     // FAILED_PRECONDITION indicates that the request failed because some"
        },
        {
            "sha": "8487dcaceaa5c3fc30adc827ecde9f0c4a1217bf",
            "filename": "third_party/xla/xla/tsl/platform/cloud/gcs_file_system.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 9,
            "changes": 23,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -1322,7 +1322,7 @@ void GcsFileSystem::ClearFileCaches(const string& fname) {\n   absl::ReaderMutexLock l(&block_cache_lock_);\n   file_block_cache_->RemoveFile(fname);\n   stat_cache_->Delete(fname);\n-  // TODO(rxsang): Remove the patterns that matche the file in\n+  // TODO(rxsang): Remove the patterns that match the file in\n   // MatchingPathsCache as well.\n }\n \n@@ -1499,7 +1499,8 @@ absl::Status GcsFileSystem::FileExists(const string& fname,\n   if (result) {\n     return absl::OkStatus();\n   }\n-  return errors::NotFound(\"The specified path \", fname, \" was not found.\");\n+  return absl::NotFoundError(\n+      absl::StrCat(\"The specified path \", fname, \" was not found.\"));\n }\n \n absl::Status GcsFileSystem::ObjectExists(const string& fname,\n@@ -1925,7 +1926,8 @@ absl::Status GcsFileSystem::Stat(const string& fname, TransactionToken* token,\n       *stat = DIRECTORY_STAT;\n       return absl::OkStatus();\n     }\n-    return errors::NotFound(\"The specified bucket \", fname, \" was not found.\");\n+    return absl::NotFoundError(\n+        absl::StrCat(\"The specified bucket \", fname, \" was not found.\"));\n   }\n \n   GcsFileStat gcs_stat;\n@@ -1943,7 +1945,8 @@ absl::Status GcsFileSystem::Stat(const string& fname, TransactionToken* token,\n     *stat = DIRECTORY_STAT;\n     return absl::OkStatus();\n   }\n-  return errors::NotFound(\"The specified path \", fname, \" was not found.\");\n+  return absl::NotFoundError(\n+      absl::StrCat(\"The specified path \", fname, \" was not found.\"));\n }\n \n absl::Status GcsFileSystem::DeleteFile(const string& fname,\n@@ -1975,8 +1978,9 @@ absl::Status GcsFileSystem::CreateDir(const string& dirname,\n     bool is_bucket;\n     TF_RETURN_IF_ERROR(BucketExists(bucket, &is_bucket));\n     return is_bucket ? absl::OkStatus()\n-                     : errors::NotFound(\"The specified bucket \",\n-                                        dirname_with_slash, \" was not found.\");\n+                     : absl::NotFoundError(absl::StrCat(\"The specified bucket \",\n+                                                        dirname_with_slash,\n+                                                        \" was not found.\"));\n   }\n \n   if (FileExists(dirname_with_slash, token).ok()) {\n@@ -2147,8 +2151,8 @@ absl::Status GcsFileSystem::IsDirectory(const string& fname,\n     if (is_bucket) {\n       return absl::OkStatus();\n     }\n-    return errors::NotFound(\"The specified bucket gs://\", bucket,\n-                            \" was not found.\");\n+    return absl::NotFoundError(\n+        absl::StrCat(\"The specified bucket gs://\", bucket, \" was not found.\"));\n   }\n   bool is_folder;\n   TF_RETURN_IF_ERROR(FolderExists(fname, &is_folder));\n@@ -2161,7 +2165,8 @@ absl::Status GcsFileSystem::IsDirectory(const string& fname,\n     return errors::FailedPrecondition(\"The specified path \", fname,\n                                       \" is not a directory.\");\n   }\n-  return errors::NotFound(\"The specified path \", fname, \" was not found.\");\n+  return absl::NotFoundError(\n+      absl::StrCat(\"The specified path \", fname, \" was not found.\"));\n }\n \n absl::Status GcsFileSystem::DeleteRecursively(const string& dirname,"
        },
        {
            "sha": "2d3cdfaf70009057e69345541812764f9b5fbe8d",
            "filename": "third_party/xla/xla/tsl/platform/cloud/gcs_file_system_test.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 19,
            "changes": 38,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgcs_file_system_test.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -1262,7 +1262,7 @@ TEST(GcsFileSystemTest, NewWritableFile_UploadReturns410) {\n                            \"Header Content-Range: bytes 0-16/17\\n\"\n                            \"Timeouts: 5 1 30\\n\"\n                            \"Put body: content1,content2\\n\",\n-                           \"\", errors::NotFound(\"important HTTP error 410\"),\n+                           \"\", absl::NotFoundError(\"important HTTP error 410\"),\n                            410),\n        // These calls will be made in the Close() attempt from the destructor.\n        // Letting the destructor succeed.\n@@ -1444,7 +1444,7 @@ TEST(GcsFileSystemTest, NewAppendableFile_ObjectDoesNotExist) {\n            \"Auth Token: fake_token\\n\"\n            \"Range: 0-1048575\\n\"\n            \"Timeouts: 5 1 20\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/upload/storage/v1/b/bucket/o\"\n            \"?uploadType=resumable&name=filename\\n\"\n@@ -1553,7 +1553,7 @@ TEST(GcsFileSystemTest, FileExists_YesAsFolder) {\n            \"path%2Fsubfolder?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n            \"fields=items%2Fname%2CnextPageToken&prefix=path%2Fsubfolder%2F\"\n@@ -1610,7 +1610,7 @@ TEST(GcsFileSystemTest, FileExists_NotAsObjectOrFolder) {\n            \"path%2Ffile1.txt?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n            \"fields=items%2Fname%2CnextPageToken&prefix=path%2Ffile1.txt%2F\"\n@@ -1639,12 +1639,12 @@ TEST(GcsFileSystemTest, FileExists_NotAsBucket) {\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket2\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket2\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404)});\n+           \"\", absl::NotFoundError(\"404\"), 404)});\n   GcsFileSystem fs(\n       std::unique_ptr<AuthProvider>(new FakeAuthProvider),\n       std::unique_ptr<HttpRequest::Factory>(\n@@ -1673,7 +1673,7 @@ TEST(GcsFileSystemTest, FileExists_StatCache) {\n            \"path%2Fsubfolder%2F?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n            \"fields=items%2Fname%2CnextPageToken&prefix=path%2Fsubfolder%2F\"\n@@ -2318,7 +2318,7 @@ TEST(GcsFileSystemTest, DeleteFile_StatCacheRemoved) {\n            \"file.txt?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n            \"fields=items%2Fname%2CnextPageToken&prefix=file.txt%2F\"\n@@ -3035,7 +3035,7 @@ TEST(GcsFileSystemTest, RenameFile_Object_DeletionRetried) {\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\"\n            \"Delete: yes\\n\",\n-           \"\", errors::NotFound(\"404\"), 404)});\n+           \"\", absl::NotFoundError(\"404\"), 404)});\n   GcsFileSystem fs(\n       std::unique_ptr<AuthProvider>(new FakeAuthProvider),\n       std::unique_ptr<HttpRequest::Factory>(\n@@ -3202,7 +3202,7 @@ TEST(GcsFileSystemTest, Stat_Folder) {\n            \"subfolder?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n            \"fields=items%2Fname%2CnextPageToken&prefix=subfolder%2F\"\n@@ -3236,7 +3236,7 @@ TEST(GcsFileSystemTest, Stat_ObjectOrFolderNotFound) {\n            \"path?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n            \"fields=items%2Fname%2CnextPageToken&prefix=path%2F\"\n@@ -3289,7 +3289,7 @@ TEST(GcsFileSystemTest, Stat_BucketNotFound) {\n       \"Uri: https://www.googleapis.com/storage/v1/b/bucket\\n\"\n       \"Auth Token: fake_token\\n\"\n       \"Timeouts: 5 1 10\\n\",\n-      \"\", errors::NotFound(\"404\"), 404)});\n+      \"\", absl::NotFoundError(\"404\"), 404)});\n   GcsFileSystem fs(\n       std::unique_ptr<AuthProvider>(new FakeAuthProvider),\n       std::unique_ptr<HttpRequest::Factory>(\n@@ -3320,7 +3320,7 @@ TEST(GcsFileSystemTest, Stat_Cache) {\n            \"subfolder%2F?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404),\n+           \"\", absl::NotFoundError(\"404\"), 404),\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n            \"fields=items%2Fname%2CnextPageToken&prefix=subfolder%2F\"\n@@ -3439,7 +3439,7 @@ TEST(GcsFileSystemTest, IsDirectory_NotFound) {\n            \"file.txt?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404)});\n+           \"\", absl::NotFoundError(\"404\"), 404)});\n   GcsFileSystem fs(\n       std::unique_ptr<AuthProvider>(new FakeAuthProvider),\n       std::unique_ptr<HttpRequest::Factory>(\n@@ -3549,7 +3549,7 @@ TEST(GcsFileSystemTest, IsDirectory_BucketNotFound) {\n       \"Uri: https://www.googleapis.com/storage/v1/b/bucket\\n\"\n       \"Auth Token: fake_token\\n\"\n       \"Timeouts: 5 1 10\\n\",\n-      \"\", errors::NotFound(\"404\"), 404)});\n+      \"\", absl::NotFoundError(\"404\"), 404)});\n   GcsFileSystem fs(\n       std::unique_ptr<AuthProvider>(new FakeAuthProvider),\n       std::unique_ptr<HttpRequest::Factory>(\n@@ -3767,7 +3767,7 @@ TEST(GcsFileSystemTest, DeleteRecursively_DeletionErrors) {\n                            \"Auth Token: fake_token\\n\"\n                            \"Timeouts: 5 1 10\\n\"\n                            \"Delete: yes\\n\",\n-                           \"\", errors::NotFound(\"404\"), 404),\n+                           \"\", absl::NotFoundError(\"404\"), 404),\n        // Checking if gs://bucket/path/subpath/ is a folder - it is.\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n@@ -3790,7 +3790,7 @@ TEST(GcsFileSystemTest, DeleteRecursively_DeletionErrors) {\n                            \"Auth Token: fake_token\\n\"\n                            \"Timeouts: 5 1 10\\n\"\n                            \"Delete: yes\\n\",\n-                           \"\", errors::NotFound(\"404\"), 404),\n+                           \"\", absl::NotFoundError(\"404\"), 404),\n        // Checking if gs://bucket/path/file3.txt/ is a folder - it's not.\n        new FakeHttpRequest(\n            \"Uri: https://www.googleapis.com/storage/v1/b/bucket/o?\"\n@@ -3805,7 +3805,7 @@ TEST(GcsFileSystemTest, DeleteRecursively_DeletionErrors) {\n            \"path%2Ffile3.txt?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404)});\n+           \"\", absl::NotFoundError(\"404\"), 404)});\n \n   GcsFileSystem fs(\n       std::unique_ptr<AuthProvider>(new FakeAuthProvider),\n@@ -3841,7 +3841,7 @@ TEST(GcsFileSystemTest, DeleteRecursively_NotAFolder) {\n            \"path?fields=size%2Cgeneration%2Cupdated\\n\"\n            \"Auth Token: fake_token\\n\"\n            \"Timeouts: 5 1 10\\n\",\n-           \"\", errors::NotFound(\"404\"), 404)});\n+           \"\", absl::NotFoundError(\"404\"), 404)});\n   GcsFileSystem fs(\n       std::unique_ptr<AuthProvider>(new FakeAuthProvider),\n       std::unique_ptr<HttpRequest::Factory>("
        },
        {
            "sha": "b2f80fd4b77ef8e89d1cbe6e7d9ff891650816a4",
            "filename": "third_party/xla/xla/tsl/platform/cloud/google_auth_provider.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 5,
            "changes": 23,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -14,6 +14,19 @@ limitations under the License.\n ==============================================================================*/\n \n #include \"xla/tsl/platform/cloud/google_auth_provider.h\"\n+\n+#include <cstdint>\n+#include <cstdlib>\n+#include <memory>\n+#include <vector>\n+\n+#include \"absl/log/log.h\"\n+#include \"absl/status/status.h\"\n+#include \"absl/strings/str_cat.h\"\n+#include \"absl/strings/string_view.h\"\n+#include \"xla/tsl/platform/cloud/compute_engine_metadata_client.h\"\n+#include \"xla/tsl/platform/cloud/oauth_client.h\"\n+#include \"xla/tsl/platform/types.h\"\n #ifndef _WIN32\n #include <pwd.h>\n #include <unistd.h>\n@@ -89,8 +102,8 @@ absl::Status GetEnvironmentVariableFileName(string* filename) {\n   }\n   const char* result = std::getenv(kGoogleApplicationCredentials);\n   if (!result || !IsFile(result)) {\n-    return errors::NotFound(absl::StrCat(\"$\", kGoogleApplicationCredentials,\n-                                         \" is not set or corrupt.\"));\n+    return absl::NotFoundError(absl::StrCat(\"$\", kGoogleApplicationCredentials,\n+                                            \" is not set or corrupt.\"));\n   }\n   *filename = result;\n   return absl::OkStatus();\n@@ -115,7 +128,7 @@ absl::Status GetWellKnownFileName(string* filename) {\n   }\n   auto result = io::JoinPath(config_dir, kWellKnownCredentialsFile);\n   if (!IsFile(result)) {\n-    return errors::NotFound(\n+    return absl::NotFoundError(\n         \"Could not find the credentials file in the standard gcloud location.\");\n   }\n   *filename = result;\n@@ -211,7 +224,7 @@ absl::Status GoogleAuthProvider::GetTokenFromFiles() {\n   string credentials_filename;\n   if (!GetEnvironmentVariableFileName(&credentials_filename).ok() &&\n       !GetWellKnownFileName(&credentials_filename).ok()) {\n-    return errors::NotFound(\"Could not locate the credentials file.\");\n+    return absl::NotFoundError(\"Could not locate the credentials file.\");\n   }\n \n   Json::Value json;\n@@ -254,7 +267,7 @@ absl::Status GoogleAuthProvider::GetTokenFromGce() {\n absl::Status GoogleAuthProvider::GetTokenForTesting() {\n   const char* token = std::getenv(kGoogleAuthTokenForTesting);\n   if (!token) {\n-    return errors::NotFound(\"The env variable for testing was not set.\");\n+    return absl::NotFoundError(\"The env variable for testing was not set.\");\n   }\n   expiration_timestamp_sec_ = UINT64_MAX;\n   current_token_ = token;"
        },
        {
            "sha": "46c00e71d18ca5c3194fe0eb098b3fea9003c246",
            "filename": "third_party/xla/xla/tsl/platform/cloud/google_auth_provider_test.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 1,
            "changes": 17,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fcloud%2Fgoogle_auth_provider_test.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -17,10 +17,25 @@ limitations under the License.\n \n #include <stdlib.h>\n \n+#include <cstdint>\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+#include \"absl/status/status.h\"\n+#include \"absl/strings/string_view.h\"\n+#include \"json/json.h\"\n+#include \"third_party/jsoncpp/include/json/value.h\"\n #include \"xla/tsl/lib/core/status_test_util.h\"\n+#include \"xla/tsl/platform/cloud/compute_engine_metadata_client.h\"\n+#include \"xla/tsl/platform/cloud/http_request.h\"\n #include \"xla/tsl/platform/cloud/http_request_fake.h\"\n+#include \"xla/tsl/platform/cloud/oauth_client.h\"\n+#include \"xla/tsl/platform/env.h\"\n+#include \"xla/tsl/platform/errors.h\"\n #include \"xla/tsl/platform/test.h\"\n #include \"tsl/platform/path.h\"\n+#include \"tsl/platform/retrying_utils.h\"\n \n namespace tsl {\n \n@@ -225,7 +240,7 @@ TEST_F(GoogleAuthProviderTest, NothingAvailable) {\n       \"Uri: http://metadata.google.internal/computeMetadata/v1/instance\"\n       \"/service-accounts/default/token\\n\"\n       \"Header Metadata-Flavor: Google\\n\",\n-      \"\", errors::NotFound(\"404\"), 404)});\n+      \"\", absl::NotFoundError(\"404\"), 404)});\n \n   FakeEnv env;\n   std::shared_ptr<HttpRequest::Factory> fakeHttpRequestFactory ="
        },
        {
            "sha": "536e0f1e6834b7d5f1ff34abec56985a1223bfed",
            "filename": "third_party/xla/xla/tsl/platform/default/posix_file_system.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fposix_file_system.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fposix_file_system.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fposix_file_system.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -20,6 +20,18 @@ limitations under the License.\n #include <stdio.h>\n #include <sys/mman.h>\n \n+#include <cstring>\n+#include <memory>\n+#include <string>\n+#include <vector>\n+\n+#include \"absl/status/status.h\"\n+#include \"absl/strings/cord.h\"\n+#include \"absl/strings/str_cat.h\"\n+#include \"absl/strings/string_view.h\"\n+#include \"xla/tsl/platform/file_statistics.h\"\n+#include \"xla/tsl/platform/file_system.h\"\n+\n #if defined(__linux__)\n #include <sys/sendfile.h>\n #endif\n@@ -295,7 +307,7 @@ absl::Status PosixFileSystem::FileExists(const std::string& fname,\n   if (access(TranslateName(fname).c_str(), F_OK) == 0) {\n     return absl::OkStatus();\n   }\n-  return errors::NotFound(fname, \" not found\");\n+  return absl::NotFoundError(absl::StrCat(fname, \" not found\"));\n }\n \n absl::Status PosixFileSystem::GetChildren(const std::string& dir,"
        },
        {
            "sha": "b56f2d5a38857ea38deef7dd685bc8855817a7d2",
            "filename": "third_party/xla/xla/tsl/platform/ram_file_system.h",
            "status": "modified",
            "additions": 17,
            "deletions": 6,
            "changes": 23,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fram_file_system.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fram_file_system.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fram_file_system.h?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -26,11 +26,22 @@ limitations under the License.\n // reference a single FS location, though no thread-safety guarantees are\n // provided.\n \n+#include <algorithm>\n+#include <cstddef>\n+#include <cstdint>\n+#include <map>\n+#include <memory>\n #include <string>\n+#include <vector>\n \n+#include \"absl/status/status.h\"\n+#include \"absl/strings/cord.h\"\n #include \"absl/strings/match.h\"\n+#include \"absl/strings/string_view.h\"\n #include \"absl/synchronization/mutex.h\"\n #include \"xla/tsl/platform/env.h\"\n+#include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/file_statistics.h\"\n #include \"xla/tsl/platform/file_system.h\"\n #include \"xla/tsl/platform/types.h\"\n #include \"tsl/platform/stringpiece.h\"\n@@ -114,7 +125,7 @@ class RamFileSystem : public FileSystem {\n     auto fname = StripRamFsPrefix(fname_);\n \n     if (fs_.find(fname) == fs_.end()) {\n-      return errors::NotFound(\"\");\n+      return absl::NotFoundError(\"\");\n     }\n     if (fs_[fname] == nullptr) {\n       return errors::InvalidArgument(fname_, \" is a directory.\");\n@@ -212,7 +223,7 @@ class RamFileSystem : public FileSystem {\n \n     auto it = fs_.lower_bound(fname);\n     if (it == fs_.end() || !StartsWith(it->first, fname)) {\n-      return errors::NotFound(\"\");\n+      return absl::NotFoundError(\"\");\n     }\n \n     if (it->first == fname && it->second != nullptr) {\n@@ -238,7 +249,7 @@ class RamFileSystem : public FileSystem {\n       return absl::OkStatus();\n     }\n \n-    return errors::NotFound(\"\");\n+    return absl::NotFoundError(\"\");\n   }\n \n   absl::Status CreateDir(const std::string& dirname_,\n@@ -279,7 +290,7 @@ class RamFileSystem : public FileSystem {\n \n     auto it = fs_.find(dirname);\n     if (it == fs_.end()) {\n-      return errors::NotFound(\"\");\n+      return absl::NotFoundError(\"\");\n     }\n     if (it->second != nullptr) {\n       return errors::InvalidArgument(\"Not a directory\");\n@@ -301,7 +312,7 @@ class RamFileSystem : public FileSystem {\n       *file_size = fs_[fname]->size();\n       return absl::OkStatus();\n     }\n-    return errors::NotFound(\"\");\n+    return absl::NotFoundError(\"\");\n   }\n \n   absl::Status RenameFile(const std::string& src_, const std::string& target_,\n@@ -315,7 +326,7 @@ class RamFileSystem : public FileSystem {\n       fs_.erase(fs_.find(src));\n       return absl::OkStatus();\n     }\n-    return errors::NotFound(\"\");\n+    return absl::NotFoundError(\"\");\n   }\n \n   RamFileSystem() {}"
        },
        {
            "sha": "b912479ef136f1e9e66425506ac588d58808e07e",
            "filename": "third_party/xla/xla/tsl/platform/windows/windows_file_system.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fwindows%2Fwindows_file_system.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/191445381148a62e3784a9b19724bc994fd19b99/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fwindows%2Fwindows_file_system.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fwindows%2Fwindows_file_system.cc?ref=191445381148a62e3784a9b19724bc994fd19b99",
            "patch": "@@ -28,11 +28,16 @@ limitations under the License.\n #include <time.h>\n \n #include \"absl/status/status.h\"\n+#include \"absl/strings/cord.h\"\n #include \"absl/strings/string_view.h\"\n #include \"xla/tsl/platform/env.h\"\n #include \"xla/tsl/platform/errors.h\"\n+#include \"xla/tsl/platform/file_statistics.h\"\n+#include \"xla/tsl/platform/file_system.h\"\n #include \"xla/tsl/platform/file_system_helper.h\"\n #include \"xla/tsl/platform/logging.h\"\n+#include \"xla/tsl/platform/status.h\"\n+#include \"xla/tsl/platform/types.h\"\n #include \"xla/tsl/platform/windows/error_windows.h\"\n #include \"xla/tsl/platform/windows/wide_char.h\"\n #include \"xla/tsl/protobuf/error_codes.pb.h\"\n@@ -534,7 +539,7 @@ Status WindowsFileSystem::FileExists(const string& fname,\n   if (_waccess(ws_translated_fname.c_str(), kOk) == 0) {\n     return absl::OkStatus();\n   }\n-  return errors::NotFound(fname, \" not found\");\n+  return absl::NotFoundError(absl::StrCat(fname, \" not found\"));\n }\n \n Status WindowsFileSystem::GetChildren(const string& dir,"
        }
    ],
    "stats": {
        "total": 205,
        "additions": 151,
        "deletions": 54
    }
}