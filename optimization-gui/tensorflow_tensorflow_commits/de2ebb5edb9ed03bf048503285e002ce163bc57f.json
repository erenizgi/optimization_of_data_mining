{
    "author": "hyeontaek",
    "message": "[IFRT] Remove `Client::CreateUserContext()`\n\n`xla::ifrt::Client::CreateUserContext()` is removed as the IFRT user has become\nresponsible to set up `xla::ifrt::UserContextScope` (and own the full control\nover creation of the user context).\n\nPiperOrigin-RevId: 840476849",
    "sha": "de2ebb5edb9ed03bf048503285e002ce163bc57f",
    "files": [
        {
            "sha": "e4e8db3412454915df57e42ee55dcceb561a28c0",
            "filename": "third_party/xla/xla/backends/cpu/nanort/ifrt_client.h",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fnanort%2Fifrt_client.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fnanort%2Fifrt_client.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fcpu%2Fnanort%2Fifrt_client.h?ref=de2ebb5edb9ed03bf048503285e002ce163bc57f",
            "patch": "@@ -193,10 +193,6 @@ class NanoIfrtClient : public llvm::RTTIExtends<NanoIfrtClient, ifrt::Client> {\n       ifrt::DType dtype, absl::Span<const int64_t> dims, ifrt::Device* device,\n       ifrt::MemoryKind memory_kind) const override;\n \n-  tsl::RCReference<ifrt::UserContext> CreateUserContext() override {\n-    return tsl::RCReference<ifrt::UserContext>();\n-  }\n-\n   static char ID;  // NOLINT\n \n  private:"
        },
        {
            "sha": "659227fcecbdca12a9d215ac697089e65c103113",
            "filename": "third_party/xla/xla/python/compile_only_ifrt/client.h",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fcompile_only_ifrt%2Fclient.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fcompile_only_ifrt%2Fclient.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fcompile_only_ifrt%2Fclient.h?ref=de2ebb5edb9ed03bf048503285e002ce163bc57f",
            "patch": "@@ -330,10 +330,6 @@ class CompileOnlyIfRtClient final\n \n   ifrt::Compiler* GetDefaultCompiler() override { return &default_compiler_; }\n \n-  tsl::RCReference<xla::ifrt::UserContext> CreateUserContext() override {\n-    return tsl::RCReference<xla::ifrt::UserContext>();\n-  }\n-\n   static char ID;  // NOLINT\n \n   const ifrt::PjRtTopology& topology() const { return *topology_; }"
        },
        {
            "sha": "b7824d7c69c824082f449e309afa9ac96507e6b1",
            "filename": "third_party/xla/xla/python/ifrt/client.h",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fclient.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fclient.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fclient.h?ref=de2ebb5edb9ed03bf048503285e002ce163bc57f",
            "patch": "@@ -360,11 +360,6 @@ class Client : public llvm::RTTIExtends<Client, llvm::RTTIRoot> {\n       DType dtype, absl::Span<const int64_t> shard_dims, Device* device,\n       xla::ifrt::MemoryKind memory_kind) const;\n \n-  // Returns a UserContext that captures the current context information such as\n-  // the stack trace. IFRT implementations that do not support UserContext will\n-  // return a nullptr.\n-  virtual tsl::RCReference<UserContext> CreateUserContext() = 0;\n-\n   static char ID;  // NOLINT\n };\n "
        },
        {
            "sha": "9540ad6dd8f911c4afe9121708f7ad834851ea39",
            "filename": "third_party/xla/xla/python/ifrt/mock.h",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt%2Fmock.h?ref=de2ebb5edb9ed03bf048503285e002ce163bc57f",
            "patch": "@@ -189,8 +189,6 @@ class MockClient : public llvm::RTTIExtends<MockClient, Client> {\n   MOCK_METHOD(absl::StatusOr<CustomLayoutRef>, GetDefaultLayout,\n               (DType dtype, const Shape& shape, const ShardingRef& sharding),\n               (const, final));\n-  MOCK_METHOD(tsl::RCReference<xla::ifrt::UserContext>, CreateUserContext, (),\n-              (final));\n   // LINT.ThenChange(mock.cc:MockClientDelegation)\n \n   xla::ifrt::Client* delegated() const { return delegated_.get(); }"
        },
        {
            "sha": "16428466e9de41029650142b0b891f460f9164e1",
            "filename": "third_party/xla/xla/python/ifrt_proxy/client/client.h",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fifrt_proxy%2Fclient%2Fclient.h?ref=de2ebb5edb9ed03bf048503285e002ce163bc57f",
            "patch": "@@ -154,10 +154,6 @@ class Client final : public llvm::RTTIExtends<Client, xla::ifrt::Client> {\n       xla::ifrt::Device* device,\n       xla::ifrt::MemoryKind memory_kind) const override;\n \n-  tsl::RCReference<xla::ifrt::UserContext> CreateUserContext() override {\n-    return tsl::RCReference<xla::ifrt::UserContext>();\n-  }\n-\n   // For llvm::RTTIExtends.\n   static char ID;  // NOLINT\n "
        },
        {
            "sha": "d6a653e05360972e9147e11aae3c6ce4fdca3696",
            "filename": "third_party/xla/xla/python/pjrt_ifrt/pjrt_client.h",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/de2ebb5edb9ed03bf048503285e002ce163bc57f/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpython%2Fpjrt_ifrt%2Fpjrt_client.h?ref=de2ebb5edb9ed03bf048503285e002ce163bc57f",
            "patch": "@@ -345,10 +345,6 @@ class PjRtClient final\n   absl::Status TransferFromOutfeed(PjRtDevice* device,\n                                    MutableBorrowingLiteral literal);\n \n-  tsl::RCReference<UserContext> CreateUserContext() override {\n-    return tsl::RCReference<UserContext>();\n-  }\n-\n   // Returns the latest set of incarnation ids for every task.\n   absl::StatusOr<absl::flat_hash_map<int, IncarnationId>> Incarnations() const;\n "
        }
    ],
    "stats": {
        "total": 23,
        "additions": 0,
        "deletions": 23
    }
}