{
    "author": "mdfaijul",
    "message": "PR #33860: [XLA:GPU][oneAPI][Build-fix] Fix ptx custom kernel build issue.\n\nImported from GitHub PR https://github.com/openxla/xla/pull/33860\n\nRecent addition of ptx custom kernel to `xla/service/gpu/ir_emitter_unnested.cc` is not supported by SYCL platform. This PR fixes the build issue with a stub implementation.\n\nCopybara import of the project:\n\n--\ncd411391578157a61264c5074e1f526ccde795e5 by mdfaijul <md.faijul.amin@intel.com>:\n\nFix ptx custom kernel build issue on SYCL.\n\nMerging this change closes #33860\n\nPiperOrigin-RevId: 831753161",
    "sha": "20c1ff66b771b2f030701d78f7cfe6846fac4db8",
    "files": [
        {
            "sha": "784e86208bcb5ad8d45b13b01e11856b5dced996",
            "filename": "third_party/xla/xla/service/gpu/BUILD",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/20c1ff66b771b2f030701d78f7cfe6846fac4db8/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/20c1ff66b771b2f030701d78f7cfe6846fac4db8/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2FBUILD?ref=20c1ff66b771b2f030701d78f7cfe6846fac4db8",
            "patch": "@@ -6,6 +6,10 @@ load(\n     \"@local_config_rocm//rocm:build_defs.bzl\",\n     \"if_rocm_is_configured\",\n )\n+load(\n+    \"@local_config_sycl//sycl:build_defs.bzl\",\n+    \"if_sycl_is_configured\",\n+)\n load(\"@rules_cc//cc:cc_library.bzl\", \"cc_library\")\n load(\"//xla:xla.default.bzl\", \"xla_cc_test\", \"xla_internal\")\n load(\"//xla/tests:build_defs.bzl\", \"xla_test\")\n@@ -379,6 +383,22 @@ cc_library(\n     ],\n )\n \n+cc_library(\n+    name = \"ptx_custom_kernel_emitter_sycl\",\n+    srcs = [\"custom_kernel_emitter_sycl_stub.cc\"],\n+    hdrs = [\"custom_kernel_emitter.h\"],\n+    tags = [\n+        \"gpu\",\n+        \"oneapi-only\",\n+    ],\n+    deps = [\n+        \":ir_emitter_context\",\n+        \"//xla/hlo/ir:hlo\",\n+        \"@com_google_absl//absl/status\",\n+        \"@com_google_absl//absl/status:statusor\",\n+    ],\n+)\n+\n cc_library(\n     name = \"ptx_custom_kernel_emitter\",\n     hdrs = [\"custom_kernel_emitter.h\"],\n@@ -387,6 +407,8 @@ cc_library(\n         \":ptx_custom_kernel_emitter_cuda\",\n     ]) + if_rocm_is_configured([\n         \":ptx_custom_kernel_emitter_rocm\",\n+    ]) + if_sycl_is_configured([\n+        \":ptx_custom_kernel_emitter_sycl\",\n     ]) + [\n         \"//xla/hlo/ir:hlo\",\n         \"@com_google_absl//absl/status:statusor\","
        },
        {
            "sha": "08344224e30bfc802066812567a9c13d886fa2fb",
            "filename": "third_party/xla/xla/service/gpu/custom_kernel_emitter_sycl_stub.cc",
            "status": "added",
            "additions": 31,
            "deletions": 0,
            "changes": 31,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/20c1ff66b771b2f030701d78f7cfe6846fac4db8/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fcustom_kernel_emitter_sycl_stub.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/20c1ff66b771b2f030701d78f7cfe6846fac4db8/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fcustom_kernel_emitter_sycl_stub.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Fcustom_kernel_emitter_sycl_stub.cc?ref=20c1ff66b771b2f030701d78f7cfe6846fac4db8",
            "patch": "@@ -0,0 +1,31 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#include \"xla/hlo/ir/hlo_instructions.h\"\n+#include \"xla/service/gpu/custom_kernel_emitter.h\"\n+#include \"xla/service/gpu/ir_emitter_context.h\"\n+\n+namespace xla {\n+namespace gpu {\n+\n+absl::StatusOr<std::unique_ptr<Thunk>> EmitPtxCustomKernelThunk(\n+    const HloCustomCallInstruction* /*instr*/, IrEmitterContext* /*context*/) {\n+  return absl::UnimplementedError(\n+      \"Custom kernel emitter for PTX custom call is not yet implemented in \"\n+      \"SYCL platform.\");\n+}\n+\n+}  // namespace gpu\n+}  // namespace xla"
        }
    ],
    "stats": {
        "total": 53,
        "additions": 53,
        "deletions": 0
    }
}