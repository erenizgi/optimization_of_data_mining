{
    "author": "vwbaker",
    "message": "Disable autotuning in `gpu_kernel_tiling_test`.\n\nExplicitly set `xla_gpu_autotune_level` to 0 for the HLO module in the test which is specifically checking our native codegen behavior & fails when going through triton (you can see this when setting --xla_gpu_experimental_enable_fusion_autotuner).\n\nPiperOrigin-RevId: 830453189",
    "sha": "17c7a2d697ac73feb3c98437dadbcce0ec9c6b17",
    "files": [
        {
            "sha": "91359cd8b6ca9198babb02d73f161c7507be20e0",
            "filename": "third_party/xla/xla/service/gpu/tests/gpu_kernel_tiling_test.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/17c7a2d697ac73feb3c98437dadbcce0ec9c6b17/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftests%2Fgpu_kernel_tiling_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/17c7a2d697ac73feb3c98437dadbcce0ec9c6b17/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftests%2Fgpu_kernel_tiling_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftests%2Fgpu_kernel_tiling_test.cc?ref=17c7a2d697ac73feb3c98437dadbcce0ec9c6b17",
            "patch": "@@ -141,10 +141,16 @@ TEST_F(GpuKernelTilingTest, SimpleFusionWithTransposeTiled) {\n         calls=fused_computation.1\n     })\";\n \n-  // Check that a call to llvm.nvvm.barrier0 is generated.\n   auto hlo_module =\n       ParseAndReturnVerifiedModule(kHloString, ConfigWithoutLayoutAssignment())\n           .value();\n+  // Disable autotuning because this test is checking for that the native\n+  // emitter generates a kernel correctly. Autotuning may change it to generate\n+  // a triton kernel instead, which uses a different barrier.\n+  hlo_module->mutable_config()\n+      .mutable_debug_options()\n+      .set_xla_gpu_autotune_level(0);\n+  // Check that a call to llvm.nvvm.barrier0 is generated.\n   auto expected_ir = R\"(\n ; CHECK-LABEL: define KERNEL_ANNOTATION @{{[a-z_]*}}fusion\n ; CHECK: call void BARRIER()"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 7,
        "deletions": 1
    }
}