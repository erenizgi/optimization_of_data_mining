{
    "author": "beckerhe",
    "message": "Replace the tsl_grpc_cc_dependencies macro by explicit dependencies\n\nThat makes it easier to manage the dependencies and run tools like build_cleaner.\n\nPiperOrigin-RevId: 837075798",
    "sha": "e4682747e5febaf57f930437dd8a3c074b887ccf",
    "files": [
        {
            "sha": "1a62071beafea5a032251b11154d9f729b07efa6",
            "filename": "third_party/xla/xla/backends/profiler/subprocess/BUILD",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fsubprocess%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fsubprocess%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fprofiler%2Fsubprocess%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -3,7 +3,6 @@ load(\n     \"xla_cc_test\",\n )\n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n-load(\"//xla/tsl:tsl.default.bzl\", \"tsl_grpc_cc_dependencies\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_binary\", \"cc_library\")\n load(\"//xla/tsl/profiler/builds:build_config.bzl\", \"tf_profiler_copts\")\n \n@@ -18,6 +17,7 @@ cc_library(\n     ]),\n     deps = [\n         \"//xla/tsl/platform:env\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/base:no_destructor\",\n         \"@com_google_absl//absl/container:flat_hash_set\",\n@@ -26,7 +26,7 @@ cc_library(\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@local_tsl//tsl/profiler/protobuf:profiler_service_cc_grpc_proto\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n xla_cc_test(\n@@ -56,6 +56,7 @@ cc_library(\n         \"//xla/tsl/profiler/utils:timestamp_utils\",\n         \"//xla/tsl/profiler/utils:xplane_schema\",\n         \"//xla/tsl/profiler/utils:xplane_utils\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/cleanup\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/memory\",\n@@ -69,7 +70,7 @@ cc_library(\n         \"@local_tsl//tsl/profiler/protobuf:profiler_options_proto_cc\",\n         \"@local_tsl//tsl/profiler/protobuf:profiler_service_proto_cc\",\n         \"@local_tsl//tsl/profiler/protobuf:xplane_proto_cc\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n     alwayslink = True,\n )\n \n@@ -106,7 +107,7 @@ xla_cc_test(\n         \"@local_tsl//tsl/profiler/lib:traceme\",\n         \"@local_tsl//tsl/profiler/protobuf:profiler_options_proto_cc\",\n         \"@local_tsl//tsl/profiler/protobuf:xplane_proto_cc\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_binary("
        },
        {
            "sha": "2ddb630c1003a306dc329a2c5545d13a476021d2",
            "filename": "third_party/xla/xla/pjrt/distributed/BUILD",
            "status": "modified",
            "additions": 10,
            "deletions": 6,
            "changes": 16,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fdistributed%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -1,6 +1,5 @@\n load(\"//xla:xla.default.bzl\", \"xla_cc_test\")\n load(\"//xla/tsl:tsl.bzl\", \"if_oss\", \"internal_visibility\")\n-load(\"//xla/tsl:tsl.default.bzl\", \"tsl_grpc_cc_dependencies\")\n load(\"//xla/tsl/platform:build_config.bzl\", \"tf_proto_library\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n@@ -29,6 +28,7 @@ cc_library(\n         \"//xla/tsl/distributed_runtime/rpc:async_service_interface\",\n         \"//xla/tsl/distributed_runtime/rpc/coordination:grpc_coordination_service_impl\",\n         \"//xla/tsl/protobuf:coordination_config_proto_cc\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/memory\",\n@@ -39,7 +39,7 @@ cc_library(\n         \"@local_tsl//tsl/platform:env\",\n         \"@local_tsl//tsl/platform:errors\",\n         \"@local_tsl//tsl/platform:random\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n xla_cc_test(\n@@ -79,6 +79,7 @@ cc_library(\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/protobuf:coordination_config_proto_cc\",\n         \"//xla/tsl/protobuf:coordination_service_proto_cc\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n@@ -88,15 +89,16 @@ cc_library(\n         \"@com_google_absl//absl/types:span\",\n         \"@local_tsl//tsl/platform:env\",\n         \"@local_tsl//tsl/platform:statusor\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_library(\n     name = \"util\",\n     hdrs = [\"util.h\"],\n     deps = [\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/status\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_library(\n@@ -107,8 +109,9 @@ cc_library(\n         \":client\",\n         \":service\",\n         \"//xla/tsl/platform:grpc_credentials\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/status:statusor\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_library(\n@@ -157,6 +160,7 @@ xla_cc_test(\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/util/proto:proto_matchers\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n@@ -170,7 +174,7 @@ xla_cc_test(\n         \"@local_tsl//tsl/platform:errors\",\n         \"@local_tsl//tsl/platform:statusor\",\n         \"@local_tsl//tsl/platform:test\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_library("
        },
        {
            "sha": "a72583405507e6247209e9eb4f2908e36435a79d",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/coordination/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fcoordination%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -1,5 +1,4 @@\n load(\"//xla/tsl:tsl.bzl\", \"if_oss\", \"internal_visibility\")\n-load(\"//xla/tsl:tsl.default.bzl\", \"tsl_grpc_cc_dependencies\")\n load(\"//xla/tsl/platform:build_config.bzl\", \"tf_proto_library\", \"tsl_cc_test\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n@@ -265,14 +264,15 @@ tsl_cc_test(\n         \"//xla/tsl/protobuf:coordination_config_proto_cc_impl\",\n         \"//xla/tsl/protobuf:coordination_service_proto_cc_impl\",\n         \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc_impl\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_googletest//:gtest_main\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n tsl_cc_test(\n@@ -297,6 +297,7 @@ tsl_cc_test(\n         \"//xla/tsl/protobuf:coordination_config_proto_cc_impl\",\n         \"//xla/tsl/protobuf:coordination_service_proto_cc_impl\",\n         \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc_impl\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/status:status_matchers\",\n@@ -306,7 +307,7 @@ tsl_cc_test(\n         \"@com_google_absl//absl/synchronization\",\n         \"@com_google_absl//absl/time\",\n         \"@com_google_googletest//:gtest_main\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n filegroup("
        },
        {
            "sha": "96b898834df6eff0452696d5da33821839c2a24e",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/preemption/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fpreemption%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fpreemption%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Fpreemption%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -1,5 +1,5 @@\n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n-load(\"//xla/tsl:tsl.default.bzl\", \"get_compatible_with_portable\", \"tsl_grpc_cc_dependencies\")\n+load(\"//xla/tsl:tsl.default.bzl\", \"get_compatible_with_portable\")\n load(\"//xla/tsl/platform:build_config.bzl\", \"tsl_cc_test\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n@@ -89,11 +89,12 @@ tsl_cc_test(\n         \"//xla/tsl/protobuf:coordination_config_proto_cc_impl\",\n         \"//xla/tsl/protobuf:coordination_service_proto_cc_impl\",\n         \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc_impl\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/log:check\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/time\",\n         \"@com_google_googletest//:gtest_main\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )"
        },
        {
            "sha": "64ed07fbc832cca9e479b472f00afe2df4c8995f",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/rpc/BUILD",
            "status": "modified",
            "additions": 13,
            "deletions": 8,
            "changes": 21,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -2,7 +2,6 @@\n #   RPC communication interfaces and implementations for TensorFlow.\n \n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n-load(\"//xla/tsl:tsl.default.bzl\", \"tsl_grpc_cc_dependencies\")\n load(\"//xla/tsl/platform:build_config.bzl\", \"tf_proto_library\", \"tsl_cc_test\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n@@ -26,9 +25,10 @@ cc_library(\n     srcs = [],\n     hdrs = [\"grpc_call.h\"],\n     deps = [\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@local_tsl//tsl/platform:refcount\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_library(\n@@ -38,12 +38,16 @@ cc_library(\n     deps = [\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n+        \"@com_github_grpc_grpc//:grpc++_codegen_proto\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/strings:cord\",\n+        \"@com_google_protobuf//:protobuf\",\n         \"@local_tsl//tsl/platform:protobuf\",\n         \"@local_tsl//tsl/platform:stringpiece\",\n         \"@local_tsl//tsl/platform:stringprintf\",\n-    ] + tsl_grpc_cc_dependencies(),\n+        \"@local_tsl//tsl/platform:tstring\",\n+    ],\n )\n \n tsl_cc_test(\n@@ -56,14 +60,13 @@ tsl_cc_test(\n     deps = [\n         \":grpc_util\",\n         \":test_request_proto_cc_impl\",\n-        \"//xla/tsl/platform:env_impl\",\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:test\",\n         \"//xla/tsl/platform:test_benchmark\",\n         \"//xla/tsl/platform:test_main\",\n-        \"//xla/tsl/protobuf:distributed_runtime_payloads_proto_cc_impl\",\n         \"//xla/tsl/util/proto:proto_matchers\",\n-    ] + tsl_grpc_cc_dependencies(),\n+        \"@com_github_grpc_grpc//:grpc++\",\n+    ],\n )\n \n cc_library(\n@@ -93,13 +96,14 @@ cc_library(\n         \"//xla/tsl/platform:types\",\n         \"//xla/tsl/protobuf:rpc_options_proto_cc\",\n         \"//xla/tsl/util:device_name_utils\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@local_tsl//tsl/platform:numbers\",\n         \"@local_tsl//tsl/platform:str_util\",\n         \"@local_tsl//tsl/platform:strcat\",\n         \"@local_tsl//tsl/platform:thread_annotations\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n tsl_cc_test(\n@@ -131,9 +135,10 @@ cc_library(\n         \"//xla/tsl/platform:errors\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/util:env_var\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/status\",\n         \"@local_tsl//tsl/platform:strcat\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_library("
        },
        {
            "sha": "b572020c22e08c8a1020fe29b336df66780fb55f",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/rpc/coordination/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2Fcoordination%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2Fcoordination%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2Fcoordination%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -1,5 +1,4 @@\n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n-load(\"//xla/tsl:tsl.default.bzl\", \"tsl_grpc_cc_dependencies\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n package(\n@@ -24,11 +23,12 @@ cc_library(\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/protobuf:coordination_service_proto_cc\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/base:core_headers\",\n         \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/synchronization\",\n         \"@local_tsl//tsl/platform:protobuf\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_library(\n@@ -45,9 +45,9 @@ cc_library(\n         \"//xla/tsl/platform:env\",\n         \"//xla/tsl/protobuf:coordination_service_cc_grpc_proto\",\n         \"//xla/tsl/protobuf:coordination_service_proto_cc\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/base:core_headers\",\n-        \"@com_google_absl//absl/log\",\n         \"@com_google_absl//absl/status\",\n         \"@com_google_absl//absl/synchronization\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )"
        },
        {
            "sha": "ec1ddb87f3d318686cd6506f054da4e822d23cc3",
            "filename": "third_party/xla/xla/tsl/distributed_runtime/rpc/grpc_util.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2Fgrpc_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2Fgrpc_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fdistributed_runtime%2Frpc%2Fgrpc_util.cc?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -15,11 +15,15 @@ limitations under the License.\n \n #include \"xla/tsl/distributed_runtime/rpc/grpc_util.h\"\n \n-#include <algorithm>\n+#include <string>\n #include <vector>\n \n-#include \"grpcpp/impl/codegen/proto_utils.h\"\n-#include \"tsl/platform/protobuf.h\"\n+#include \"grpcpp/impl/proto_utils.h\"\n+#include \"grpcpp/support/byte_buffer.h\"\n+#include \"grpcpp/support/slice.h\"\n+#include \"grpcpp/support/status.h\"\n+#include \"google/protobuf/message.h\"\n+#include \"tsl/platform/tstring.h\"\n \n namespace tsl {\n "
        },
        {
            "sha": "acefddd92d385b6212718599824a54729984e0ff",
            "filename": "third_party/xla/xla/tsl/platform/default/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -13,7 +13,6 @@ load(\n     \"//xla/tsl:tsl.default.bzl\",\n     \"filegroup\",\n     \"if_cuda_tools\",\n-    \"tsl_grpc_cc_dependencies\",\n )\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n load(\n@@ -252,8 +251,9 @@ cc_library(\n     ],\n     deps = [\n         \"//xla/tsl/platform:logging\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/log:check\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n cc_library("
        },
        {
            "sha": "0b04692d0dc8271dbca413dc2e13a89f3680fafd",
            "filename": "third_party/xla/xla/tsl/platform/default/build_config.bzl",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fbuild_config.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fbuild_config.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fbuild_config.bzl?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -311,7 +311,7 @@ def tf_proto_library(\n             generate_mocks = True,\n             visibility = visibility,\n             compatible_with = compatible_with,\n-            deps = [\":{}\".format(cc_proto_name)],\n+            deps = [\":{}\".format(cc_proto_name), \"@com_github_grpc_grpc//:grpc++\"],\n             plugin_flags = [\"services_namespace=grpc\"],\n             grpc_only = True,\n         )"
        },
        {
            "sha": "523db019d51d6f3e2bf82431717c4381b6cda219",
            "filename": "third_party/xla/xla/tsl/profiler/rpc/BUILD",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -1,5 +1,4 @@\n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n-load(\"//xla/tsl:tsl.default.bzl\", \"tsl_grpc_cc_dependencies\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n load(\n     \"//xla/tsl/profiler/builds:build_config.bzl\",\n@@ -44,6 +43,7 @@ cc_library(\n         \"//xla/tsl/profiler/utils:profiler_options_util\",\n         \"//xla/tsl/profiler/utils:time_utils\",\n         \"//xla/tsl/profiler/utils:xplane_utils\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/container:flat_hash_map\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/status\",\n@@ -54,7 +54,7 @@ cc_library(\n         \"@local_tsl//tsl/profiler/protobuf:profiler_service_cc_grpc_proto\",\n         \"@local_tsl//tsl/profiler/protobuf:profiler_service_proto_cc\",\n         \"@local_tsl//tsl/profiler/protobuf:xplane_proto_cc\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n )\n \n tf_profiler_pybind_cc_library_wrapper(\n@@ -81,8 +81,9 @@ cc_library(\n         \":profiler_service_impl\",\n         \"//xla/tsl/platform:logging\",\n         \"//xla/tsl/platform:types\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/strings\",\n         \"@local_tsl//tsl/profiler/protobuf:profiler_service_cc_grpc_proto\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n     alwayslink = True,\n )"
        },
        {
            "sha": "fe3b66a1940d15dfe08b5ff20d74b6a61153a815",
            "filename": "third_party/xla/xla/tsl/profiler/rpc/client/BUILD",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fprofiler%2Frpc%2Fclient%2FBUILD?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -1,5 +1,4 @@\n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n-load(\"//xla/tsl:tsl.default.bzl\", \"tsl_grpc_cc_dependencies\")\n load(\n     \"//xla/tsl/platform:build_config.bzl\",\n     \"tf_protos_profiler_service\",\n@@ -32,6 +31,7 @@ cc_library(\n         \"//third_party/xprof/pywrap:__pkg__\",\n     ]),\n     deps = [\n+        \":profiler_client\",\n         \":profiler_client_for_pybind\",\n         \":remote_profiler_session_manager\",\n         \":save_profile\",\n@@ -131,12 +131,13 @@ cc_library(\n         \"//xla/tsl/platform:status\",\n         \"//xla/tsl/platform:types\",\n         \"//xla/tsl/protobuf:error_codes_proto_impl_cc\",\n+        \"@com_github_grpc_grpc//:grpc++\",\n         \"@com_google_absl//absl/memory\",\n         \"@com_google_absl//absl/strings\",\n         \"@com_google_absl//absl/time\",\n         \"@local_tsl//tsl/profiler/protobuf:profiler_analysis_cc_grpc_proto\",\n         \"@local_tsl//tsl/profiler/protobuf:profiler_service_cc_grpc_proto\",\n-    ] + tsl_grpc_cc_dependencies(),\n+    ],\n     alwayslink = True,\n )\n "
        },
        {
            "sha": "5dc399ce2a1ab79504842bdf68659a0d42117610",
            "filename": "third_party/xla/xla/tsl/tsl.bzl",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.bzl?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -508,9 +508,6 @@ def if_not_mobile_or_arm_or_macos_or_lgpl_restricted(a):\n         \"//conditions:default\": [],\n     })\n \n-def tsl_grpc_cc_dependencies():\n-    return [clean_dep(\"//xla/tsl:grpc++\")]\n-\n # Bazel rule for collecting the header files that a target depends on.\n def _transitive_hdrs_impl(ctx):\n     outputs = _get_transitive_headers([], ctx.attr.deps)"
        },
        {
            "sha": "5ba377ac9c8acb3f51daa5a48b02675af8f7653b",
            "filename": "third_party/xla/xla/tsl/tsl.default.bzl",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.default.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/e4682747e5febaf57f930437dd8a3c074b887ccf/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.default.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Ftsl.default.bzl?ref=e4682747e5febaf57f930437dd8a3c074b887ccf",
            "patch": "@@ -10,7 +10,6 @@ load(\n     _tsl_extra_config_settings = \"tsl_extra_config_settings\",\n     _tsl_extra_config_settings_targets = \"tsl_extra_config_settings_targets\",\n     _tsl_google_bzl_deps = \"tsl_google_bzl_deps\",\n-    _tsl_grpc_cc_dependencies = \"tsl_grpc_cc_dependencies\",\n     _tsl_pybind_extension = \"tsl_pybind_extension\",\n )\n \n@@ -20,7 +19,6 @@ get_compatible_with_portable = _get_compatible_with_portable\n get_compatible_with_libtpu_portable = _get_compatible_with_libtpu_portable\n filegroup = _filegroup\n if_not_mobile_or_arm_or_macos_or_lgpl_restricted = _if_not_mobile_or_arm_or_macos_or_lgpl_restricted\n-tsl_grpc_cc_dependencies = _tsl_grpc_cc_dependencies\n tsl_pybind_extension = _tsl_pybind_extension\n tsl_google_bzl_deps = _tsl_google_bzl_deps\n tsl_extra_config_settings = _tsl_extra_config_settings"
        }
    ],
    "stats": {
        "total": 99,
        "additions": 56,
        "deletions": 43
    }
}