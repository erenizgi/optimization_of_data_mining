{
    "author": "apivovarov",
    "message": "Remove unused Kokkos mdspan dependency from raft.\n\nThe `@kokkos//:mdspan` dependency is not needed because raft project has its own copy of mdspan in cpp/include/raft/thirdparty/mdspan\n\nPiperOrigin-RevId: 806026532",
    "sha": "b0da62740bcf419835f45669e645c11f81991cf6",
    "files": [
        {
            "sha": "cc558415f2b3d22e6e29586e495b47e8efc9be5a",
            "filename": "third_party/xla/third_party/kokkos/BUILD",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb/third_party%2Fxla%2Fthird_party%2Fkokkos%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb/third_party%2Fxla%2Fthird_party%2Fkokkos%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fkokkos%2FBUILD?ref=2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb",
            "patch": "@@ -1 +0,0 @@\n-# copybara:uncomment package(default_applicable_licenses = [\"//third_party/tensorflow:license\"])"
        },
        {
            "sha": "ca1f7128e9a144c1911789b07609bc0cb85f8a7a",
            "filename": "third_party/xla/third_party/kokkos/kokkos.BUILD",
            "status": "removed",
            "additions": 0,
            "deletions": 21,
            "changes": 21,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fkokkos.BUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fkokkos.BUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fkokkos.BUILD?ref=2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb",
            "patch": "@@ -1,21 +0,0 @@\n-# Kokkos C++ Performance Portability Programming Ecosystem: The Programming Model - Parallel Execution and Memory Abstraction\n-licenses([\"notice\"])  # Apache 2.0\n-\n-exports_files([\"LICENSE\"])\n-\n-cc_library(\n-    name = \"mdspan\",\n-    hdrs = glob([\"tpls/mdspan/include/**/*.hpp\"]),\n-    copts = [\"-fexceptions\"],\n-    includes = [\"tpls/mdspan/include\"],\n-    visibility = [\"//visibility:public\"],\n-)\n-\n-cc_test(\n-    name = \"smoke_test\",\n-    srcs = [\"smoke_test.cc\"],\n-    copts = [\"-fexceptions\"],\n-    deps = [\n-        \":mdspan\",\n-    ],\n-)"
        },
        {
            "sha": "3e1bed2974d7a6a7bb9db39949b13111c12508e0",
            "filename": "third_party/xla/third_party/kokkos/smoke_test.cc.patch",
            "status": "removed",
            "additions": 0,
            "deletions": 32,
            "changes": 32,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fsmoke_test.cc.patch",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fsmoke_test.cc.patch",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fsmoke_test.cc.patch?ref=2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb",
            "patch": "@@ -1,32 +0,0 @@\n---- /dev/null\t2025-08-20 16:29:02.164000374 +0000\n-+++ b/smoke_test.cc\t2025-08-20 21:02:15.000000000 +0000\n-@@ -0,0 +1,29 @@\n-+#include <iostream>\n-+#include <mdspan/mdspan.hpp>\n-+\n-+int main() {\n-+  constexpr size_t N = 3, M = 4;\n-+\n-+  // Flattened storage\n-+  double data[N * M] = {1.0, 2.0, 3.0, 4.0,  5.0,  6.0,\n-+                        7.0, 8.0, 9.0, 10.0, 11.0, 12.0};\n-+\n-+  // Create mdspan over flat data\n-+  Kokkos::mdspan<double, Kokkos::extents<size_t, N, M>> view(data);\n-+\n-+  // Access elements\n-+  std::cout << \"Original array via mdspan:\\n\";\n-+  for (size_t i = 0; i < N; ++i) {\n-+    for (size_t j = 0; j < M; ++j) {\n-+      std::cout << view(i, j) << \" \";\n-+    }\n-+    std::cout << \"\\n\";\n-+  }\n-+\n-+  // Modify a value\n-+  view(1, 2) = 42.0;\n-+  std::cout << \"\\nAfter modification:\\n\";\n-+  std::cout << \"view(1,2) = \" << view(1, 2) << \"\\n\";\n-+\n-+  return 0;\n-+}"
        },
        {
            "sha": "7929cc751ceb18b2e9de10f31a7f889a8389e2e5",
            "filename": "third_party/xla/third_party/kokkos/workspace.bzl",
            "status": "removed",
            "additions": 0,
            "deletions": 18,
            "changes": 18,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fworkspace.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fworkspace.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fkokkos%2Fworkspace.bzl?ref=2717bfd0ea984e4b211fdadf68be9cc4b1de0fcb",
            "patch": "@@ -1,18 +0,0 @@\n-\"\"\"Provides the repository macro to import kokkos.\"\"\"\n-\n-load(\"//third_party:repo.bzl\", \"tf_http_archive\", \"tf_mirror_urls\")\n-\n-def repo():\n-    \"\"\"Imports kokkos.\"\"\"\n-\n-    KOKKOS_VERSION = \"4.4.01\"\n-    KOKKOS_SHA256 = \"3f7096d17eaaa4004c7497ac082bf1ae3ff47b5104149e54af021a89414c3682\"\n-\n-    tf_http_archive(\n-        name = \"kokkos\",\n-        sha256 = KOKKOS_SHA256,\n-        strip_prefix = \"kokkos-{version}\".format(version = KOKKOS_VERSION),\n-        urls = tf_mirror_urls(\"https://github.com/kokkos/kokkos/archive/refs/tags/{version}.tar.gz\".format(version = KOKKOS_VERSION)),\n-        build_file = \"//third_party/kokkos:kokkos.BUILD\",\n-        patch_file = [\"//third_party/kokkos:smoke_test.cc.patch\"],\n-    )"
        },
        {
            "sha": "e14b049cb62e1cc718625ff3489e80e2f8ffd3b3",
            "filename": "third_party/xla/third_party/raft/raft.BUILD",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b0da62740bcf419835f45669e645c11f81991cf6/third_party%2Fxla%2Fthird_party%2Fraft%2Fraft.BUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b0da62740bcf419835f45669e645c11f81991cf6/third_party%2Fxla%2Fthird_party%2Fraft%2Fraft.BUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fthird_party%2Fraft%2Fraft.BUILD?ref=b0da62740bcf419835f45669e645c11f81991cf6",
            "patch": "@@ -33,7 +33,6 @@ cuda_library(\n     ],\n     visibility = [\"//visibility:public\"],\n     deps = [\n-        \"@kokkos//:mdspan\",\n         \"@rapids_logger\",\n         \"@rmm\",\n     ],"
        },
        {
            "sha": "0df685f89075c645ea8ef92a3b3f5afa199c4172",
            "filename": "third_party/xla/workspace2.bzl",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b0da62740bcf419835f45669e645c11f81991cf6/third_party%2Fxla%2Fworkspace2.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b0da62740bcf419835f45669e645c11f81991cf6/third_party%2Fxla%2Fworkspace2.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fworkspace2.bzl?ref=b0da62740bcf419835f45669e645c11f81991cf6",
            "patch": "@@ -22,7 +22,6 @@ load(\"//third_party/gpus:sycl_configure.bzl\", \"sycl_configure\")\n load(\"//third_party/highwayhash:workspace.bzl\", highwayhash = \"repo\")\n load(\"//third_party/hwloc:workspace.bzl\", hwloc = \"repo\")\n load(\"//third_party/implib_so:workspace.bzl\", implib_so = \"repo\")\n-load(\"//third_party/kokkos:workspace.bzl\", kokkos = \"repo\")\n load(\"//third_party/llvm:workspace.bzl\", llvm = \"repo\")\n load(\"//third_party/mpitrampoline:workspace.bzl\", mpitrampoline = \"repo\")\n load(\"//third_party/nanobind:workspace.bzl\", nanobind = \"repo\")\n@@ -66,7 +65,6 @@ def _initialize_third_party():\n     highwayhash()\n     hwloc()\n     implib_so()\n-    kokkos()\n     ml_dtypes()\n     mpitrampoline()\n     nanobind()"
        }
    ],
    "stats": {
        "total": 75,
        "additions": 0,
        "deletions": 75
    }
}