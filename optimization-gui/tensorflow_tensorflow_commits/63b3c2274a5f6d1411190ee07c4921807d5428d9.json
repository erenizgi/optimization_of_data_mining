{
    "author": "tensorflower-gardener",
    "message": "Merge pull request #101287 from HurSungYun:shape_equals_fix\n\nPiperOrigin-RevId: 817531619",
    "sha": "63b3c2274a5f6d1411190ee07c4921807d5428d9",
    "files": [
        {
            "sha": "66894e173e86a7bf8b32ab29a894075d8387ea45",
            "filename": "tensorflow/python/framework/tensor_util.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/63b3c2274a5f6d1411190ee07c4921807d5428d9/tensorflow%2Fpython%2Fframework%2Ftensor_util.py",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/63b3c2274a5f6d1411190ee07c4921807d5428d9/tensorflow%2Fpython%2Fframework%2Ftensor_util.py",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fpython%2Fframework%2Ftensor_util.py?ref=63b3c2274a5f6d1411190ee07c4921807d5428d9",
            "patch": "@@ -854,7 +854,9 @@ def ShapeEquals(tensor_proto, shape):\n     raise TypeError(\"`shape` must be a list or tuple, but got type \"\n                     f\"{type(shape)}.\")\n   tensor_shape_list = [d.size for d in tensor_proto.tensor_shape.dim]\n-  return all(x == y for x, y in zip(tensor_shape_list, shape))\n+  return len(tensor_shape_list) == len(shape) and all(\n+      x == y for x, y in zip(tensor_shape_list, shape)\n+  )\n \n \n def _ConstantValue(tensor, partial):"
        },
        {
            "sha": "68dd9967142fdfd612d2d7abd152011477a04e70",
            "filename": "tensorflow/python/framework/tensor_util_test.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/63b3c2274a5f6d1411190ee07c4921807d5428d9/tensorflow%2Fpython%2Fframework%2Ftensor_util_test.py",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/63b3c2274a5f6d1411190ee07c4921807d5428d9/tensorflow%2Fpython%2Fframework%2Ftensor_util_test.py",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fpython%2Fframework%2Ftensor_util_test.py?ref=63b3c2274a5f6d1411190ee07c4921807d5428d9",
            "patch": "@@ -1013,6 +1013,9 @@ def testShapeEquals(self):\n     self.assertFalse(tensor_util.ShapeEquals(t, [5, 3]))\n     self.assertFalse(tensor_util.ShapeEquals(t, [1, 4]))\n     self.assertFalse(tensor_util.ShapeEquals(t, [4]))\n+    self.assertFalse(tensor_util.ShapeEquals(t, [2]))\n+    self.assertFalse(tensor_util.ShapeEquals(t, []))\n+    self.assertFalse(tensor_util.ShapeEquals(t, [2, 2, 1]))\n \n \n @test_util.run_all_in_graph_and_eager_modes"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 6,
        "deletions": 1
    }
}