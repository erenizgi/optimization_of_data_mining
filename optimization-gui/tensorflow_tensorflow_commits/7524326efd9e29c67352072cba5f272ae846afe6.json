{
    "author": "tensorflower-gardener",
    "message": "Create testing utilities for extension plugin testing\n\nPiperOrigin-RevId: 822185331",
    "sha": "7524326efd9e29c67352072cba5f272ae846afe6",
    "files": [
        {
            "sha": "893806fc354af8309fa9b45daa2b68320be8c240",
            "filename": "third_party/xla/xla/pjrt/plugin/testing/BUILD",
            "status": "added",
            "additions": 71,
            "deletions": 0,
            "changes": 71,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2FBUILD?ref=7524326efd9e29c67352072cba5f272ae846afe6",
            "patch": "@@ -0,0 +1,71 @@\n+load(\"@rules_cc//cc:cc_library.bzl\", \"cc_library\")\n+load(\"//xla:xla.default.bzl\", \"xla_cc_test\")\n+\n+package(\n+    # copybara:uncomment default_applicable_licenses = [\"//tensorflow:license\"],\n+    default_visibility = [\"//visibility:public\"],\n+    licenses = [\"notice\"],\n+)\n+\n+cc_library(\n+    name = \"testing_cpp_pjrt\",\n+    srcs = [\n+        \"testing_cpp_pjrt.cc\",\n+    ],\n+    hdrs = [\"testing_cpp_pjrt.h\"],\n+    deps = [\n+        \"//xla/pjrt:pjrt_client\",\n+        \"//xla/pjrt:pjrt_compiler\",\n+        \"@com_google_absl//absl/strings:string_view\",\n+        \"@com_google_absl//absl/types:span\",\n+        \"@local_tsl//tsl/platform:fingerprint\",\n+    ],\n+)\n+\n+xla_cc_test(\n+    name = \"testing_cpp_pjrt_test\",\n+    srcs = [\"testing_cpp_pjrt_test.cc\"],\n+    deps = [\n+        \":testing_cpp_pjrt\",\n+        \"//xla/tests:xla_internal_test_main\",\n+        \"//xla/tsl/platform:status_matchers\",\n+        \"@com_google_absl//absl/status:status_matchers\",\n+        \"@com_google_googletest//:gtest\",\n+    ],\n+)\n+\n+cc_library(\n+    name = \"testing_c_pjrt_internal\",\n+    srcs = [\n+        \"testing_c_pjrt_internal.cc\",\n+    ],\n+    hdrs = [\"testing_c_pjrt_internal.h\"],\n+    deps = [\n+        \"//xla/pjrt:pjrt_client\",\n+        \"//xla/pjrt/c:pjrt_c_api_hdrs\",\n+        \"//xla/pjrt/c:pjrt_c_api_layouts_extension_hdrs\",\n+        \"//xla/pjrt/c:pjrt_c_api_wrapper_impl\",\n+        \"//xla/pjrt/extensions/example:example_extension\",\n+        \"//xla/pjrt/extensions/example:example_extension_cpp\",\n+        \"//xla/pjrt/extensions/example:example_extension_private\",\n+        \"//xla/pjrt/plugin/testing:testing_cpp_pjrt\",\n+        \"@com_google_absl//absl/status\",\n+    ],\n+    alwayslink = 1,\n+)\n+\n+xla_cc_test(\n+    name = \"testing_c_pjrt_internal_test\",\n+    srcs = [\"testing_c_pjrt_internal_test.cc\"],\n+    deps = [\n+        \":testing_c_pjrt_internal\",\n+        \"//xla/pjrt/c:pjrt_c_api_hdrs\",\n+        \"//xla/pjrt/c:pjrt_c_api_helpers\",\n+        \"//xla/pjrt/c:pjrt_c_api_layouts_extension_hdrs\",\n+        \"//xla/pjrt/c:pjrt_c_api_wrapper_impl\",\n+        \"//xla/tests:xla_internal_test_main\",\n+        \"@com_google_absl//absl/log:check\",\n+        \"@com_google_absl//absl/strings\",\n+        \"@com_google_googletest//:gtest\",\n+    ],\n+)"
        },
        {
            "sha": "d520bdd649d6e2e09d8135e50e634d901dde68bd",
            "filename": "third_party/xla/xla/pjrt/plugin/testing/testing_c_pjrt_internal.cc",
            "status": "added",
            "additions": 69,
            "deletions": 0,
            "changes": 69,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal.cc?ref=7524326efd9e29c67352072cba5f272ae846afe6",
            "patch": "@@ -0,0 +1,69 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#include \"xla/pjrt/plugin/testing/testing_c_pjrt_internal.h\"\n+\n+#include <cstdio>\n+#include <memory>\n+#include <utility>\n+\n+#include \"absl/status/status.h\"\n+#include \"xla/pjrt/c/pjrt_c_api.h\"\n+#include \"xla/pjrt/c/pjrt_c_api_layouts_extension.h\"\n+#include \"xla/pjrt/c/pjrt_c_api_wrapper_impl.h\"\n+#include \"xla/pjrt/pjrt_client.h\"\n+#include \"xla/pjrt/plugin/testing/testing_cpp_pjrt.h\"\n+\n+namespace testing {\n+\n+// Create C++ client. Called by the C API and is the glue between the C API\n+// and the C++ API.\n+PJRT_Error* PJRT_TestingClient_Create(PJRT_Client_Create_Args* args) {\n+  std::unique_ptr<xla::PjRtClient> client = CreateTestingPjrtClient();\n+  args->client = pjrt::CreateWrapperClient(std::move(client));\n+  printf(\"Creating PJRT Client from myplugin_pjrt.cc\\n\");\n+  return nullptr;\n+}\n+\n+PJRT_Error* PJRT_TestingExecuteContext_Create(\n+    PJRT_ExecuteContext_Create_Args* args) {\n+  return new PJRT_Error{absl::UnimplementedError(\n+      \"ExecuteContext not supported for Testing execution.\")};\n+}\n+\n+PJRT_Error* PJRT_TestingDeviceTopology_Create(\n+    PJRT_TopologyDescription_Create_Args* args) {\n+  return new PJRT_Error{absl::UnimplementedError(\n+      \"Topology not supported for Testing compilation.\")};\n+}\n+\n+const PJRT_Api* GetTestingPjrtApi(PJRT_Extension_Base* extension_base) {\n+  printf(\"C++ Calling GetPjrtApi\");\n+  static PJRT_Layouts_Extension layouts_extension;\n+  // Static for memory storage but reassigning to avoid reusing the same\n+  // extension when testing with many calls to GetPjrtApi.\n+  layouts_extension = pjrt::CreateLayoutsExtension(extension_base);\n+\n+  static const PJRT_Api pjrt_api = pjrt::CreatePjrtApi(\n+      testing::PJRT_TestingClient_Create,\n+      testing::PJRT_TestingExecuteContext_Create,\n+      testing::PJRT_TestingDeviceTopology_Create,\n+      pjrt::PJRT_Plugin_Initialize_NoOp, &layouts_extension.base,\n+      pjrt::PJRT_Plugin_Attributes_Xla);\n+\n+  return &pjrt_api;\n+}\n+\n+}  // namespace testing"
        },
        {
            "sha": "c0b5cc6b6652be374f0919b10cd23ed1dc941a02",
            "filename": "third_party/xla/xla/pjrt/plugin/testing/testing_c_pjrt_internal.h",
            "status": "added",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal.h?ref=7524326efd9e29c67352072cba5f272ae846afe6",
            "patch": "@@ -0,0 +1,29 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#ifndef XLA_PJRT_PLUGIN_TESTING_TESTING_C_PJRT_INTERNAL_H_\n+#define XLA_PJRT_PLUGIN_TESTING_TESTING_C_PJRT_INTERNAL_H_\n+\n+#include \"xla/pjrt/c/pjrt_c_api.h\"\n+\n+namespace testing {\n+\n+// Basic fake C API PJRT_Api for testing extensions.\n+// Does not pass ownership of returned PJRT_Api* to caller.\n+const PJRT_Api* GetTestingPjrtApi(PJRT_Extension_Base* extension_base);\n+\n+}  // namespace testing\n+\n+#endif  // XLA_PJRT_PLUGIN_TESTING_TESTING_C_PJRT_INTERNAL_H_"
        },
        {
            "sha": "0d5f4d3aae3ee6f206297f634d1e30d05d4721e3",
            "filename": "third_party/xla/xla/pjrt/plugin/testing/testing_c_pjrt_internal_test.cc",
            "status": "added",
            "additions": 103,
            "deletions": 0,
            "changes": 103,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_c_pjrt_internal_test.cc?ref=7524326efd9e29c67352072cba5f272ae846afe6",
            "patch": "@@ -0,0 +1,103 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#include \"xla/pjrt/plugin/testing/testing_c_pjrt_internal.h\"\n+\n+#include <gtest/gtest.h>\n+#include \"absl/log/check.h\"\n+#include \"absl/strings/string_view.h\"\n+#include \"xla/pjrt/c/pjrt_c_api.h\"\n+#include \"xla/pjrt/c/pjrt_c_api_helpers.h\"\n+#include \"xla/pjrt/c/pjrt_c_api_layouts_extension.h\"\n+#include \"xla/pjrt/c/pjrt_c_api_wrapper_impl.h\"\n+\n+namespace testing {\n+namespace {\n+\n+TEST(PjRtCApiTest, GetPjrtApi) {\n+  const PJRT_Api* pjrt_api = GetTestingPjrtApi(nullptr);\n+  ASSERT_NE(pjrt_api, nullptr);\n+}\n+\n+TEST(PjRtCApiTest, TopologyCreate) {\n+  const PJRT_Api* pjrt_api = GetTestingPjrtApi(nullptr);\n+  PJRT_TopologyDescription_Create_Args args;\n+  args.struct_size = PJRT_TopologyDescription_Create_Args_STRUCT_SIZE;\n+  PJRT_Error* error = pjrt_api->PJRT_TopologyDescription_Create(&args);\n+  ASSERT_NE(error, nullptr);\n+  PJRT_Error_Destroy_Args destroy_args = {PJRT_Error_Destroy_Args_STRUCT_SIZE,\n+                                          nullptr, error};\n+  pjrt_api->PJRT_Error_Destroy(&destroy_args);\n+}\n+\n+TEST(PjRtCApiTest, ClientApi) {\n+  const PJRT_Api* pjrt_api = GetTestingPjrtApi(nullptr);\n+  ASSERT_NE(pjrt_api, nullptr);\n+\n+  PJRT_Client_Create_Args create_args;\n+  create_args.struct_size = PJRT_Client_Create_Args_STRUCT_SIZE;\n+  create_args.create_options = nullptr;\n+  create_args.num_options = 0;\n+  create_args.kv_get_callback = nullptr;\n+  create_args.kv_get_user_arg = nullptr;\n+  create_args.kv_put_callback = nullptr;\n+  create_args.kv_put_user_arg = nullptr;\n+  PJRT_Error* error = pjrt_api->PJRT_Client_Create(&create_args);\n+  CHECK(error == nullptr);\n+  PJRT_Client* client = create_args.client;\n+\n+  PJRT_Client_PlatformName_Args pname_args;\n+  pname_args.struct_size = PJRT_Client_PlatformName_Args_STRUCT_SIZE;\n+  pname_args.client = client;\n+  error = pjrt_api->PJRT_Client_PlatformName(&pname_args);\n+  CHECK(error == nullptr);\n+  EXPECT_EQ(absl::string_view(pname_args.platform_name,\n+                              pname_args.platform_name_size),\n+            \"testing_pjrt_client\");\n+\n+  PJRT_Client_Destroy_Args destroy_args;\n+  destroy_args.struct_size = PJRT_Client_Destroy_Args_STRUCT_SIZE;\n+  destroy_args.client = client;\n+  error = pjrt_api->PJRT_Client_Destroy(&destroy_args);\n+  CHECK(error == nullptr);\n+}\n+\n+TEST(PjRtCApiTest, Extension) {\n+  struct MyExtension {\n+    PJRT_Extension_Base base;\n+    int foo;\n+  };\n+  MyExtension my_extension;\n+  my_extension.base.struct_size = sizeof(MyExtension);\n+  my_extension.base.type = PJRT_Extension_Type_Unknown;\n+  my_extension.base.next = nullptr;\n+  my_extension.foo = 42;\n+\n+  const PJRT_Api* pjrt_api = GetTestingPjrtApi(&my_extension.base);\n+  ASSERT_NE(pjrt_api, nullptr);\n+\n+  const auto* layouts_extension = pjrt::FindExtension<PJRT_Layouts_Extension>(\n+      pjrt_api, PJRT_Extension_Type_Layouts);\n+  ASSERT_NE(layouts_extension, nullptr);\n+\n+  const auto* unknown_extension =\n+      pjrt::FindExtension<MyExtension>(pjrt_api, PJRT_Extension_Type_Unknown);\n+  ASSERT_NE(unknown_extension, nullptr);\n+  EXPECT_EQ(&unknown_extension->base, &my_extension.base);\n+  EXPECT_EQ(unknown_extension->foo, 42);\n+}\n+\n+}  // namespace\n+}  // namespace testing"
        },
        {
            "sha": "7a74e99fc4bc10f0552b12a8bc988d7aed185425",
            "filename": "third_party/xla/xla/pjrt/plugin/testing/testing_cpp_pjrt.cc",
            "status": "added",
            "additions": 88,
            "deletions": 0,
            "changes": 88,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt.cc?ref=7524326efd9e29c67352072cba5f272ae846afe6",
            "patch": "@@ -0,0 +1,88 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#include \"xla/pjrt/plugin/testing/testing_cpp_pjrt.h\"\n+\n+#include <cstdint>\n+#include <memory>\n+#include <vector>\n+\n+#include \"absl/strings/string_view.h\"\n+#include \"absl/types/span.h\"\n+#include \"xla/pjrt/pjrt_client.h\"\n+#include \"xla/pjrt/pjrt_compiler.h\"\n+#include \"tsl/platform/fingerprint.h\"\n+\n+namespace testing {\n+\n+class TestingPjrtClient : public xla::PjRtClient {\n+ public:\n+  TestingPjrtClient() = default;\n+  ~TestingPjrtClient() override = default;\n+  absl::string_view platform_name() const override;\n+  int process_index() const override;\n+  int device_count() const override;\n+  int addressable_device_count() const override;\n+  absl::Span<xla::PjRtDevice* const> devices() const override;\n+  absl::Span<xla::PjRtDevice* const> addressable_devices() const override;\n+  absl::Span<xla::PjRtMemorySpace* const> memory_spaces() const override;\n+  xla::PjRtPlatformId platform_id() const override;\n+  absl::string_view platform_version() const override;\n+\n+ private:\n+  std::vector<xla::PjRtDevice*> devices_;\n+  std::vector<xla::PjRtMemorySpace*> memory_spaces_;\n+};  // end class\n+\n+absl::string_view TestingPjrtClient::platform_name() const {\n+  return \"testing_pjrt_client\";\n+}\n+\n+int TestingPjrtClient::process_index() const { return 0; }\n+\n+xla::PjRtPlatformId TestingPjrtClient::platform_id() const {\n+  constexpr char kTestingBackendName[] = \"testing_backend\";\n+  static const uint64_t kTestingBackendId =\n+      tsl::Fingerprint64(kTestingBackendName);\n+  return kTestingBackendId;\n+}\n+\n+int TestingPjrtClient::device_count() const { return 0; }\n+\n+int TestingPjrtClient::addressable_device_count() const { return 0; }\n+\n+absl::Span<xla::PjRtDevice* const> TestingPjrtClient::addressable_devices()\n+    const {\n+  return devices_;\n+}\n+\n+absl::Span<xla::PjRtDevice* const> TestingPjrtClient::devices() const {\n+  return devices_;\n+}\n+\n+absl::Span<xla::PjRtMemorySpace* const> TestingPjrtClient::memory_spaces()\n+    const {\n+  return memory_spaces_;\n+}\n+\n+absl::string_view TestingPjrtClient::platform_version() const {\n+  return \"Testing platform version\";\n+}\n+\n+std::unique_ptr<xla::PjRtClient> CreateTestingPjrtClient() {\n+  return std::make_unique<testing::TestingPjrtClient>();\n+}\n+\n+}  // namespace testing"
        },
        {
            "sha": "af624486a17e738c6b6cda26c4a0dcc9821a68f4",
            "filename": "third_party/xla/xla/pjrt/plugin/testing/testing_cpp_pjrt.h",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt.h?ref=7524326efd9e29c67352072cba5f272ae846afe6",
            "patch": "@@ -0,0 +1,32 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#ifndef XLA_PJRT_PLUGIN_TESTING_TESTING_CPP_PJRT_H_\n+#define XLA_PJRT_PLUGIN_TESTING_TESTING_CPP_PJRT_H_\n+\n+#include <memory>\n+\n+#include \"xla/pjrt/pjrt_client.h\"\n+\n+namespace testing {\n+\n+// Minimal fake PjRtClient for testing using the PJRT C API to test extensions.\n+// This is not a full backend. It's a lightweight test dependency that can be\n+// more convenient for testing than a real backend (e.g. CPU).\n+std::unique_ptr<xla::PjRtClient> CreateTestingPjrtClient();\n+\n+}  // namespace testing\n+\n+#endif  // XLA_PJRT_PLUGIN_TESTING_TESTING_CPP_PJRT_H_"
        },
        {
            "sha": "5688d47b116c51eb4fbd69a8ba0c461d9fe80898",
            "filename": "third_party/xla/xla/pjrt/plugin/testing/testing_cpp_pjrt_test.cc",
            "status": "added",
            "additions": 37,
            "deletions": 0,
            "changes": 37,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7524326efd9e29c67352072cba5f272ae846afe6/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fplugin%2Ftesting%2Ftesting_cpp_pjrt_test.cc?ref=7524326efd9e29c67352072cba5f272ae846afe6",
            "patch": "@@ -0,0 +1,37 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#include \"xla/pjrt/plugin/testing/testing_cpp_pjrt.h\"\n+\n+#include <gmock/gmock.h>\n+#include <gtest/gtest.h>\n+#include \"absl/status/status_matchers.h\"\n+\n+namespace {\n+\n+using ::testing::CreateTestingPjrtClient;\n+\n+TEST(TestingCPPTest, HasDeviceCount) {\n+  auto client = CreateTestingPjrtClient();\n+  EXPECT_EQ(client->device_count(), 0);\n+}\n+\n+TEST(TestingCPPTest, GetHloCostAnalysis) {\n+  auto client = CreateTestingPjrtClient();\n+\n+  EXPECT_THAT(client->GetHloCostAnalysis(), testing::Not(absl_testing::IsOk()));\n+}\n+\n+}  // namespace"
        }
    ],
    "stats": {
        "total": 429,
        "additions": 429,
        "deletions": 0
    }
}