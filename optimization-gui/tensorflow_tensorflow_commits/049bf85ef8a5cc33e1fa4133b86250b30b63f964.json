{
    "author": "tensorflower-gardener",
    "message": "Avoid inlining the graph when delegation can take the composite hop\n\nPiperOrigin-RevId: 830300465",
    "sha": "049bf85ef8a5cc33e1fa4133b86250b30b63f964",
    "files": [
        {
            "sha": "996d36b7e9725f4f9faada1a3d4c46d8c10f621c",
            "filename": "tensorflow/lite/core/subgraph.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/049bf85ef8a5cc33e1fa4133b86250b30b63f964/tensorflow%2Flite%2Fcore%2Fsubgraph.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/049bf85ef8a5cc33e1fa4133b86250b30b63f964/tensorflow%2Flite%2Fcore%2Fsubgraph.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Flite%2Fcore%2Fsubgraph.cc?ref=049bf85ef8a5cc33e1fa4133b86250b30b63f964",
            "patch": "@@ -992,7 +992,8 @@ TfLiteStatus Subgraph::AllocateTensors(InliningStrategy auto_inline) {\n   TF_LITE_ENSURE_STATUS(RedoAllDelegates());\n \n   if (options_ && options_->GetShloCompositeInlining() &&\n-      auto_inline == InliningStrategy::kAutoInline) {\n+      auto_inline == InliningStrategy::kAutoInline &&\n+      !IsDelegationSkippable() && !IsFullyDelegated()) {\n     TF_LITE_ENSURE_STATUS(InlineCompositeNodes());\n   }\n "
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}