{
    "author": "golechwierowicz",
    "message": "[XLA:GPU] Documentation for -On.\n\nPiperOrigin-RevId: 811248961",
    "sha": "2b59e80f3422b8152c532274f127409b96dde5f4",
    "files": [
        {
            "sha": "e46efae6b255f2e16d16cad96f04334839f90cc3",
            "filename": "third_party/xla/docs/_toc.yaml",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b59e80f3422b8152c532274f127409b96dde5f4/third_party%2Fxla%2Fdocs%2F_toc.yaml",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b59e80f3422b8152c532274f127409b96dde5f4/third_party%2Fxla%2Fdocs%2F_toc.yaml",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fdocs%2F_toc.yaml?ref=2b59e80f3422b8152c532274f127409b96dde5f4",
            "patch": "@@ -53,6 +53,8 @@ toc:\n     path: /xla/flags_guidance\n   - title: XLA Tooling\n     path: /xla/tools\n+  - title: XLA:GPU optimization levels\n+    path: /xla/gpu_optimization_levels\n - title: Debugging\n   section:\n   # This is the default tab for the Debugging section."
        },
        {
            "sha": "67160dabcb97a260aa4f59f7524e53e428c5c0dc",
            "filename": "third_party/xla/docs/gpu_optimization_levels.md",
            "status": "added",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/2b59e80f3422b8152c532274f127409b96dde5f4/third_party%2Fxla%2Fdocs%2Fgpu_optimization_levels.md",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/2b59e80f3422b8152c532274f127409b96dde5f4/third_party%2Fxla%2Fdocs%2Fgpu_optimization_levels.md",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fdocs%2Fgpu_optimization_levels.md?ref=2b59e80f3422b8152c532274f127409b96dde5f4",
            "patch": "@@ -0,0 +1,24 @@\n+# XLA:GPU optimization Level (-On).\n+\n+There are some passes which we find beneficial to run (especially at scale), but\n+they increase the HLO size, and thus compilation time. That's why they are not\n+enabled by default. For convenience, we consolidate them under a single option.\n+\n+Setting [optimization_level](https://github.com/openxla/xla/blob/5b54d0e9cf34f4e5ab05b3752ecb390145ca5716/xla/pjrt/proto/compile_options.proto#L66-L71)\n+to [O1 or above](https://github.com/openxla/xla/blob/5b54d0e9cf34f4e5ab05b3752ecb390145ca5716/xla/xla.proto#L1481) will lead to the following behaviour:\n+\n+* Collectives commonly used for data-parallel communication will be pipelined.\n+This behavior can also be steered more granularly by enabling individual flags.\n+  * `xla_gpu_enable_pipelined_all_gather`\n+  * `xla_gpu_enable_pipelined_all_reduce`\n+  * `xla_gpu_enable_pipelined_reduce_scatter`\n+* Unrolling while loops by a factor of two. Breaks down the loop-barrier potentially leading to a better compute-communication overlap and less copies.\n+  * `xla_gpu_enable_while_loop_double_buffering`\n+* Latency Hiding Scheduler will do most the work to hide the communication latency.\n+  * `xla_gpu_enable_latency_hiding_scheduler`\n+* To maximize networking bandwidth, combiner passes will combine pipelined\n+collectives to the maximum available memory. The optimization does not kick in\n+if the loop is already unrolled in the input HLO.\n+  * [all_gather_combiner](https://github.com/openxla/xla/blob/5b54d0e9cf34f4e5ab05b3752ecb390145ca5716/xla/service/gpu/transforms/collectives/all_gather_combiner.cc#L78)\n+  * [all_reduce_combiner](https://github.com/openxla/xla/blob/5b54d0e9cf34f4e5ab05b3752ecb390145ca5716/xla/service/gpu/transforms/collectives/all_reduce_combiner.cc#L76)\n+  * [reduce_scatter_combiner](https://github.com/openxla/xla/blob/5b54d0e9cf34f4e5ab05b3752ecb390145ca5716/xla/service/gpu/transforms/collectives/reduce_scatter_combiner.cc#L76)"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 26,
        "deletions": 0
    }
}