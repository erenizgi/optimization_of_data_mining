{
    "author": "tensorflower-gardener",
    "message": "Explicitly converting llvm::StringRef to absl::string_view\n\nPiperOrigin-RevId: 805048060",
    "sha": "868ce81cbea8ee07cd9c482c25b4c6460d1d09a1",
    "files": [
        {
            "sha": "23ceb17e58d62f326eaa079abea420190dbcf520",
            "filename": "third_party/xla/xla/hlo/translate/hlo_to_mhlo/BUILD",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2FBUILD?ref=868ce81cbea8ee07cd9c482c25b4c6460d1d09a1",
            "patch": "@@ -193,7 +193,6 @@ cc_library(\n         \"@llvm-project//llvm:Support\",\n         \"@llvm-project//mlir:IR\",\n         \"@llvm-project//mlir:SparseTensorDialect\",\n-        \"@llvm-project//mlir:SparseTensorEnums\",\n         \"@llvm-project//mlir:Support\",\n         \"@stablehlo//:stablehlo_ops\",\n     ],\n@@ -208,7 +207,9 @@ xla_cc_test(\n         \"//xla:xla_data_proto_cc\",\n         \"//xla/tsl/platform:statusor\",\n         \"//xla/tsl/platform:test_main\",\n+        \"@com_google_absl//absl/strings:string_view\",\n         \"@com_google_googletest//:gtest\",\n+        \"@llvm-project//llvm:Support\",\n         \"@llvm-project//mlir:IR\",\n         \"@llvm-project//mlir:Support\",\n         \"@stablehlo//:stablehlo_ops\","
        },
        {
            "sha": "c722427e4a3991a422ab831d8a4cf1ed0850b5fe",
            "filename": "third_party/xla/xla/hlo/translate/hlo_to_mhlo/hlo_utils.h",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_utils.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_utils.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_utils.h?ref=868ce81cbea8ee07cd9c482c25b4c6460d1d09a1",
            "patch": "@@ -18,7 +18,6 @@ limitations under the License.\n #ifndef XLA_HLO_TRANSLATE_HLO_TO_MHLO_HLO_UTILS_H_\n #define XLA_HLO_TRANSLATE_HLO_TO_MHLO_HLO_UTILS_H_\n \n-#include <cstddef>\n #include <cstdint>\n #include <optional>\n #include <utility>\n@@ -27,7 +26,7 @@ limitations under the License.\n #include \"absl/strings/string_view.h\"\n #include \"llvm/ADT/STLExtras.h\"\n #include \"llvm/ADT/SmallVector.h\"\n-#include \"mlir/Dialect/SparseTensor/IR/Enums.h\"\n+#include \"llvm/ADT/StringRef.h\"\n #include \"mlir/Dialect/SparseTensor/IR/SparseTensor.h\"\n #include \"mlir/IR/Attributes.h\"\n #include \"mlir/IR/Builders.h\"\n@@ -218,6 +217,10 @@ inline llvm::StringRef ToStringRef(absl::string_view str) {\n   return llvm::StringRef(str.data(), str.size());\n }\n \n+inline absl::string_view ToStringView(llvm::StringRef str) {\n+  return absl::string_view(str.data(), str.size());\n+}\n+\n }  // namespace xla\n \n #endif  // XLA_HLO_TRANSLATE_HLO_TO_MHLO_HLO_UTILS_H_"
        },
        {
            "sha": "22db24fafa33bf5672db73fea2a86df91f4a8e11",
            "filename": "third_party/xla/xla/hlo/translate/hlo_to_mhlo/hlo_utils_test.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_utils_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_utils_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fhlo_to_mhlo%2Fhlo_utils_test.cc?ref=868ce81cbea8ee07cd9c482c25b4c6460d1d09a1",
            "patch": "@@ -19,6 +19,8 @@ limitations under the License.\n #include <vector>\n \n #include <gtest/gtest.h>\n+#include \"absl/strings/string_view.h\"\n+#include \"llvm/ADT/StringRef.h\"\n #include \"mlir/IR/Builders.h\"\n #include \"mlir/IR/BuiltinTypeInterfaces.h\"\n #include \"mlir/IR/BuiltinTypes.h\"\n@@ -69,5 +71,16 @@ TEST(ConvertTensorShapeToType, Simple) {\n   }\n }\n \n+TEST(StringRefToStringView, Conversion) {\n+  absl::string_view sv = \"hello\";\n+  llvm::StringRef sref = ToStringRef(sv);\n+  EXPECT_EQ(sref.data(), sv.data());\n+  EXPECT_EQ(sref.size(), sv.size());\n+\n+  absl::string_view sv2 = ToStringView(sref);\n+  EXPECT_EQ(sv2.data(), sref.data());\n+  EXPECT_EQ(sv2.size(), sref.size());\n+}\n+\n }  // namespace\n }  // namespace xla"
        },
        {
            "sha": "9967bed7bb0cdc1d7bd5a28e1945af30d268ac9b",
            "filename": "third_party/xla/xla/hlo/translate/mhlo_to_hlo/BUILD",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fmhlo_to_hlo%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fmhlo_to_hlo%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fmhlo_to_hlo%2FBUILD?ref=868ce81cbea8ee07cd9c482c25b4c6460d1d09a1",
            "patch": "@@ -119,6 +119,7 @@ cc_library(\n         \"//xla/hlo/ir:hlo\",\n         \"//xla/hlo/parser:hlo_parser\",\n         \"//xla/hlo/translate:attributes\",\n+        \"//xla/hlo/translate/hlo_to_mhlo:hlo_utils\",\n         \"@llvm-project//llvm:Support\",\n         \"@llvm-project//mlir:IR\",\n         \"@llvm-project//mlir:Support\","
        },
        {
            "sha": "04ec35bffb70bd1e58eb697644a521a5c1f7bad1",
            "filename": "third_party/xla/xla/hlo/translate/mhlo_to_hlo/location_exporter.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fmhlo_to_hlo%2Flocation_exporter.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/868ce81cbea8ee07cd9c482c25b4c6460d1d09a1/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fmhlo_to_hlo%2Flocation_exporter.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fhlo%2Ftranslate%2Fmhlo_to_hlo%2Flocation_exporter.cc?ref=868ce81cbea8ee07cd9c482c25b4c6460d1d09a1",
            "patch": "@@ -31,6 +31,7 @@ limitations under the License.\n #include \"xla/hlo/ir/hlo_original_value.h\"\n #include \"xla/hlo/parser/hlo_parser.h\"\n #include \"xla/hlo/translate/attributes.h\"\n+#include \"xla/hlo/translate/hlo_to_mhlo/hlo_utils.h\"\n #include \"xla/hlo/translate/mhlo_to_hlo/stack_frame_index_builder.h\"\n #include \"xla/xla_data.pb.h\"\n \n@@ -131,7 +132,8 @@ static std::shared_ptr<xla::OriginalValue> GetOriginalValueFromLoc(\n     }\n   }\n \n-  auto original_value = xla::ParseOriginalValue(loc_original_value);\n+  auto original_value =\n+      xla::ParseOriginalValue(xla::ToStringView(loc_original_value));\n   if (!original_value.ok()) {\n     return nullptr;\n   }"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 24,
        "deletions": 4
    }
}