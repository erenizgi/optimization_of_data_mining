{
    "author": "tensorflower-gardener",
    "message": "[XLA] Remove pad_alignment as no users of this class are setting a non-default pad alignment\n\nPiperOrigin-RevId: 803120262",
    "sha": "0fbfec0ba9de193527100b261ad8b6627f927e3b",
    "files": [
        {
            "sha": "423976daccf26835a1716238bfe0aa9bcef50a2d",
            "filename": "third_party/xla/xla/stream_executor/cuda/cuda_dnn.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0fbfec0ba9de193527100b261ad8b6627f927e3b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_dnn.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0fbfec0ba9de193527100b261ad8b6627f927e3b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_dnn.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fcuda%2Fcuda_dnn.cc?ref=0fbfec0ba9de193527100b261ad8b6627f927e3b",
            "patch": "@@ -875,9 +875,6 @@ class CudnnConvolutionDescriptor {\n     absl::Span<const int64_t> strides64 = convolution_descriptor.strides();\n     absl::Span<const int64_t> padding64 = convolution_descriptor.padding();\n     absl::Span<const int64_t> dilations64 = convolution_descriptor.dilations();\n-    CHECK_NE(convolution_descriptor.pad_alignment(),\n-             dnn::PadAlignment::kTensorFlowPadding)\n-        << \"TensorFlow padding alignment is not supported.\";\n \n     // cuDNN requires arrays of ints.\n     std::vector<int> strides(convolution_descriptor.ndims());\n@@ -2942,9 +2939,6 @@ GetCudnnOperationGraph(dnn::ConvolutionKind kind, dnn::DataType input_type,\n   int conv_dim = convolution_descriptor.ndims();\n \n   auto accumulator_type = ToCudnnDataType(GetConvAccumulatorType(input_type));\n-  CHECK_NE(convolution_descriptor.pad_alignment(),\n-           dnn::PadAlignment::kTensorFlowPadding)\n-      << \"TensorFlow padding alignment is not supported.\";\n \n   auto conv_desc =\n       cudnn_frontend::ConvDescBuilder()\n@@ -3291,9 +3285,6 @@ GetGenericCudnnOperationGraph(\n                         /*is_virtual=*/op_descriptor.is_virtual));\n \n   auto accumulator_type = ToCudnnDataType(GetConvAccumulatorType(input_type));\n-  CHECK_NE(convolution_descriptor.pad_alignment(),\n-           dnn::PadAlignment::kTensorFlowPadding)\n-      << \"TensorFlow padding alignment is not supported.\";\n \n   int conv_dim = convolution_descriptor.ndims();\n   auto conv_desc =\n@@ -3616,10 +3607,6 @@ GetCudnnFusedOperationGraph(\n \n   int conv_dim = convolution_descriptor.ndims();\n \n-  CHECK_NE(convolution_descriptor.pad_alignment(),\n-           dnn::PadAlignment::kTensorFlowPadding)\n-      << \"TensorFlow padding alignment is not supported.\";\n-\n   cudnnDataType_t cudnn_convolution_type = ToCudnnDataType(accumulator_type);\n   cudnnDataType_t cudnn_activation_type = ToCudnnDataType(activation_type);\n   auto conv_desc ="
        },
        {
            "sha": "0818b3a0c3090d2b1d4230cdc51715b676af9686",
            "filename": "third_party/xla/xla/stream_executor/dnn.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0fbfec0ba9de193527100b261ad8b6627f927e3b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fdnn.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0fbfec0ba9de193527100b261ad8b6627f927e3b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fdnn.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fdnn.cc?ref=0fbfec0ba9de193527100b261ad8b6627f927e3b",
            "patch": "@@ -902,7 +902,7 @@ std::string ConvolutionDescriptor::ToString() const {\n   return absl::StrFormat(\n       \"{zero_padding: %s pad_alignment: %s filter_strides: %s dilation_rates: \"\n       \"%s}\",\n-      padding, PadAlignmentString(pad_alignment()), strides, dilations);\n+      padding, PadAlignmentString(PadAlignment::kDefault), strides, dilations);\n }\n \n // -- PoolingDescriptor"
        },
        {
            "sha": "a69e40a1dee3340fcd209980ccb488e189ffb954",
            "filename": "third_party/xla/xla/stream_executor/dnn.h",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0fbfec0ba9de193527100b261ad8b6627f927e3b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fdnn.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0fbfec0ba9de193527100b261ad8b6627f927e3b/third_party%2Fxla%2Fxla%2Fstream_executor%2Fdnn.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Fdnn.h?ref=0fbfec0ba9de193527100b261ad8b6627f927e3b",
            "patch": "@@ -588,9 +588,6 @@ class ConvolutionDescriptor {\n     return *this;\n   }\n \n-  // TODO(timshen): remove this function. No users of this class is setting a\n-  // non-default pad alignment.\n-  PadAlignment pad_alignment() const { return PadAlignment::kDefault; }\n   int group_count() const { return proto_.group_count(); }\n   int ndims() const { return padding().size(); }\n   bool convolution_not_crosscorr() const {"
        },
        {
            "sha": "8284f56d9838a896a397bdbeffda576ae9e88bf4",
            "filename": "third_party/xla/xla/stream_executor/rocm/rocm_dnn.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/0fbfec0ba9de193527100b261ad8b6627f927e3b/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_dnn.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/0fbfec0ba9de193527100b261ad8b6627f927e3b/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_dnn.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Frocm%2Frocm_dnn.cc?ref=0fbfec0ba9de193527100b261ad8b6627f927e3b",
            "patch": "@@ -1042,10 +1042,6 @@ absl::StatusOr<ScopedConvolutionDescriptor> scope(\n   }\n   const auto& strides64 = convolution_descriptor.strides();\n   const auto& padding64 = convolution_descriptor.padding();\n-  if (convolution_descriptor.pad_alignment() ==\n-      dnn::PadAlignment::kTensorFlowPadding) {\n-    LOG(ERROR) << \"TensorFlow padding alignment is not supported.\";\n-  }\n \n   // MIOpen requires arrays of ints.\n   std::vector<int> strides(convolution_descriptor.ndims());"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 1,
        "deletions": 21
    }
}