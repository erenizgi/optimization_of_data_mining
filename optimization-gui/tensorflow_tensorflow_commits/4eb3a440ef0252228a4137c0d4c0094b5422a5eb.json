{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 816087179",
    "sha": "4eb3a440ef0252228a4137c0d4c0094b5422a5eb",
    "files": [
        {
            "sha": "f0b741697435867fba1f9282055751346440543a",
            "filename": "tensorflow/python/eager/pywrap_tensor.cc",
            "status": "modified",
            "additions": 45,
            "deletions": 53,
            "changes": 98,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/4eb3a440ef0252228a4137c0d4c0094b5422a5eb/tensorflow%2Fpython%2Feager%2Fpywrap_tensor.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/4eb3a440ef0252228a4137c0d4c0094b5422a5eb/tensorflow%2Fpython%2Feager%2Fpywrap_tensor.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fpython%2Feager%2Fpywrap_tensor.cc?ref=4eb3a440ef0252228a4137c0d4c0094b5422a5eb",
            "patch": "@@ -124,12 +124,12 @@ TFE_Context* GetContextHandle(PyObject* py_context) {\n   auto* ctx = reinterpret_cast<TFE_Context*>(\n       PyCapsule_GetPointer(py_context_handle.get(), nullptr));\n   if (ctx == nullptr) {\n-    PyErr_SetString(PyExc_TypeError,\n-                    tensorflow::strings::StrCat(\n-                        \"Expected context._handle to contain a PyCapsule \"\n-                        \"encoded pointer to TFE_Context. Got \",\n-                        Py_TYPE(py_context_handle.get())->tp_name)\n-                        .c_str());\n+    PyErr_SetString(\n+        PyExc_TypeError,\n+        absl::StrCat(\"Expected context._handle to contain a PyCapsule \"\n+                     \"encoded pointer to TFE_Context. Got \",\n+                     Py_TYPE(py_context_handle.get())->tp_name)\n+            .c_str());\n   }\n   return ctx;\n }\n@@ -168,11 +168,10 @@ int ConvertDataType(PyObject* obj, tensorflow::DataType* dst) {\n   if (obj == Py_None) {\n     *dst = tensorflow::DataType::DT_INVALID;\n   } else if (!PyIntToDataType(obj, dst)) {\n-    PyErr_SetString(\n-        PyExc_TypeError,\n-        tensorflow::strings::StrCat(\n-            \"Expecting a DataType value for dtype. Got \", Py_TYPE(obj)->tp_name)\n-            .c_str());\n+    PyErr_SetString(PyExc_TypeError,\n+                    absl::StrCat(\"Expecting a DataType value for dtype. Got \",\n+                                 Py_TYPE(obj)->tp_name)\n+                        .c_str());\n     return 0;\n   }\n \n@@ -1094,9 +1093,8 @@ PyObject* TFE_Py_InitEagerTensor(PyObject* base_class) {\n   if (!PyType_Check(base_class)) {\n     PyErr_SetString(\n         PyExc_TypeError,\n-        tensorflow::strings::StrCat(\n-            \"Expecting a class definition for `base_class` passed to \",\n-            \"TFE_InitEagerTensor. Got \", Py_TYPE(base_class)->tp_name)\n+        absl::StrCat(\"Expecting a class definition for `base_class` passed to \",\n+                     \"TFE_InitEagerTensor. Got \", Py_TYPE(base_class)->tp_name)\n             .c_str());\n     return nullptr;\n   }\n@@ -1106,20 +1104,18 @@ PyObject* TFE_Py_InitEagerTensor(PyObject* base_class) {\n   if (base_class_type->tp_basicsize > kMaxEagerTensorParentSize) {\n     PyErr_SetString(\n         PyExc_TypeError,\n-        tensorflow::strings::StrCat(\n-            \"Unable to create subclass EagerTensor from base class \",\n-            Py_TYPE(base_class)->tp_name,\n-            \". Need its size to be <= \", kMaxEagerTensorParentSize)\n+        absl::StrCat(\"Unable to create subclass EagerTensor from base class \",\n+                     Py_TYPE(base_class)->tp_name,\n+                     \". Need its size to be <= \", kMaxEagerTensorParentSize)\n             .c_str());\n     return nullptr;\n   }\n   if (base_class_type->tp_itemsize != 0) {\n     PyErr_SetString(\n         PyExc_TypeError,\n-        tensorflow::strings::StrCat(\n-            \"Unable to create subclass EagerTensor from base class \",\n-            Py_TYPE(base_class)->tp_name,\n-            \" which supports variable length instances.\")\n+        absl::StrCat(\"Unable to create subclass EagerTensor from base class \",\n+                     Py_TYPE(base_class)->tp_name,\n+                     \" which supports variable length instances.\")\n             .c_str());\n     return nullptr;\n   }\n@@ -1149,7 +1145,7 @@ PyObject* TFE_Py_InitEagerTensor(PyObject* base_class) {\n   // NOTE: The c_str from this string needs to outlast the function, hence is\n   // static.\n   static tensorflow::string fully_qualified_name =\n-      tensorflow::strings::StrCat(module, \".EagerTensor\");\n+      absl::StrCat(module, \".EagerTensor\");\n \n   static PyType_Spec EagerTensor_Type_spec = {\n       fully_qualified_name.c_str(), sizeof(EagerTensor), 0,\n@@ -1200,29 +1196,28 @@ PyObject* TFE_Py_SetEagerTensorProfiler(PyObject* profiler) {\n \n PyObject* TFE_Py_TensorShapeSlice(PyObject* tensors, int slice_dim) {\n   if (!PyList_Check(tensors) && !PyTuple_Check(tensors)) {\n-    PyErr_SetString(PyExc_TypeError,\n-                    tensorflow::strings::StrCat(\n-                        \"tensors argument must be a list or a tuple. Got \\\"\",\n-                        Py_TYPE(tensors)->tp_name, \"\\\"\")\n-                        .c_str());\n+    PyErr_SetString(\n+        PyExc_TypeError,\n+        absl::StrCat(\"tensors argument must be a list or a tuple. Got \\\"\",\n+                     Py_TYPE(tensors)->tp_name, \"\\\"\")\n+            .c_str());\n     return nullptr;\n   }\n   if (slice_dim < 0) {\n-    PyErr_SetString(\n-        PyExc_ValueError,\n-        tensorflow::strings::StrCat(\"Slice dimension must be non-negative. \"\n-                                    \"Got \",\n-                                    slice_dim)\n-            .c_str());\n+    PyErr_SetString(PyExc_ValueError,\n+                    absl::StrCat(\"Slice dimension must be non-negative. \"\n+                                 \"Got \",\n+                                 slice_dim)\n+                        .c_str());\n     return nullptr;\n   }\n \n   PyObject* py_context = GetPyEagerContext();\n   if (py_context == nullptr) {\n-    PyErr_SetString(PyExc_RuntimeError, tensorflow::strings::StrCat(\n-                                            \"Cannot create EagerTensor when \"\n-                                            \"EagerContext is not valid\")\n-                                            .c_str());\n+    PyErr_SetString(PyExc_RuntimeError,\n+                    absl::StrCat(\"Cannot create EagerTensor when \"\n+                                 \"EagerContext is not valid\")\n+                        .c_str());\n     return nullptr;\n   }\n \n@@ -1285,11 +1280,10 @@ PyObject* TFE_Py_TensorShapeSlice(PyObject* tensors, int slice_dim) {\n       tensorflow::wrap(tensorflow::unwrap(ctx)->CreateLocalHandle(tensor));\n \n   if (!status->status.ok()) {\n-    PyErr_SetString(\n-        PyExc_RuntimeError,\n-        tensorflow::strings::StrCat(\"Failed to construct new tensor handle: \",\n-                                    TF_Message(status.get()))\n-            .c_str());\n+    PyErr_SetString(PyExc_RuntimeError,\n+                    absl::StrCat(\"Failed to construct new tensor handle: \",\n+                                 TF_Message(status.get()))\n+                        .c_str());\n     return nullptr;\n   }\n \n@@ -1298,11 +1292,10 @@ PyObject* TFE_Py_TensorShapeSlice(PyObject* tensors, int slice_dim) {\n \n PyObject* TFE_Py_TensorShapeOnDevice(PyObject* tensor) {\n   if (!EagerTensor_CheckExact(tensor)) {\n-    PyErr_SetString(\n-        PyExc_TypeError,\n-        tensorflow::strings::StrCat(\"Expected an EagerTensors but got type \\\"\",\n-                                    Py_TYPE(tensor)->tp_name, \"\\\"\")\n-            .c_str());\n+    PyErr_SetString(PyExc_TypeError,\n+                    absl::StrCat(\"Expected an EagerTensors but got type \\\"\",\n+                                 Py_TYPE(tensor)->tp_name, \"\\\"\")\n+                        .c_str());\n     return nullptr;\n   }\n   TFE_TensorHandle* handle = EagerTensor_Handle(tensor);\n@@ -1311,11 +1304,10 @@ PyObject* TFE_Py_TensorShapeOnDevice(PyObject* tensor) {\n   TFE_TensorDebugInfo* debug_info =\n       TFE_TensorHandleTensorDebugInfo(handle, status.get());\n   if (!status->status.ok()) {\n-    PyErr_SetString(\n-        PyExc_RuntimeError,\n-        tensorflow::strings::StrCat(\"Error retrieving tensor's device shape: \",\n-                                    TF_Message(status.get()))\n-            .c_str());\n+    PyErr_SetString(PyExc_RuntimeError,\n+                    absl::StrCat(\"Error retrieving tensor's device shape: \",\n+                                 TF_Message(status.get()))\n+                        .c_str());\n     return nullptr;\n   }\n "
        }
    ],
    "stats": {
        "total": 98,
        "additions": 45,
        "deletions": 53
    }
}