{
    "author": "ybaturina",
    "message": "Update list of JAX tests in XLA presubmit.\n\nPiperOrigin-RevId: 838944622",
    "sha": "c68a4b7c0c91b6f6097b361fd35deec05386a70a",
    "files": [
        {
            "sha": "9164a0350ff7c213bb650fd9b96990a342635d0d",
            "filename": "third_party/xla/build_tools/ci/build.py",
            "status": "modified",
            "additions": 32,
            "deletions": 4,
            "changes": 36,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c68a4b7c0c91b6f6097b361fd35deec05386a70a/third_party%2Fxla%2Fbuild_tools%2Fci%2Fbuild.py",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c68a4b7c0c91b6f6097b361fd35deec05386a70a/third_party%2Fxla%2Fbuild_tools%2Fci%2Fbuild.py",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Fci%2Fbuild.py?ref=c68a4b7c0c91b6f6097b361fd35deec05386a70a",
            "patch": "@@ -783,7 +783,15 @@ def nvidia_gpu_build_with_compute_capability(\n     type_=BuildType.JAX_LINUX_X86_CPU_GITHUB_ACTIONS,\n     repo=\"google/jax\",\n     configs=(\"rbe_linux_x86_64\",),\n-    target_patterns=(\"//tests:cpu_tests\", \"//tests:backend_independent_tests\"),\n+    target_patterns=(\n+        \"//tests:cpu_tests\",\n+        \"//tests:backend_independent_tests\",\n+        \"//jax/experimental/jax2tf/tests:jax2tf_test_cpu\",\n+        \"//tests/multiprocess:cpu_tests\",\n+        \"//jax/experimental/jax2tf/tests/multiprocess:cpu_tests\",\n+        \"//jaxlib/tools:jaxlib_wheel_size_test\",\n+        \"//:jax_wheel_size_test\",\n+    ),\n     test_env=dict(\n         JAX_NUM_GENERATED_CASES=25,\n         JAX_SKIP_SLOW_TESTS=1,\n@@ -799,7 +807,15 @@ def nvidia_gpu_build_with_compute_capability(\n     type_=BuildType.JAX_WINDOWS_X86_CPU_GITHUB_ACTIONS,\n     repo=\"google/jax\",\n     configs=(\"rbe_windows_amd64\",),\n-    target_patterns=(\"//tests:cpu_tests\", \"//tests:backend_independent_tests\"),\n+    target_patterns=(\n+        \"//tests:cpu_tests\",\n+        \"//tests:backend_independent_tests\",\n+        \"//jax/experimental/jax2tf/tests:jax2tf_test_cpu\",\n+        \"//tests/multiprocess:cpu_tests\",\n+        \"//jax/experimental/jax2tf/tests/multiprocess:cpu_tests\",\n+        \"//jaxlib/tools:jaxlib_wheel_size_test\",\n+        \"//:jax_wheel_size_test\",\n+    ),\n     test_env=dict(\n         JAX_NUM_GENERATED_CASES=25,\n         JAX_SKIP_SLOW_TESTS=1,\n@@ -819,7 +835,16 @@ def nvidia_gpu_build_with_compute_capability(\n     type_=BuildType.JAX_LINUX_X86_GPU_L4_GITHUB_ACTIONS,\n     repo=\"google/jax\",\n     configs=(\"rbe_linux_x86_64_cuda\",),\n-    target_patterns=(\"//tests:gpu_tests\", \"//tests:backend_independent_tests\"),\n+    target_patterns=(\n+        \"//tests:gpu_tests\",\n+        \"//tests:backend_independent_tests\",\n+        \"//tests/pallas:gpu_tests\",\n+        \"//tests/pallas:backend_independent_tests\",\n+        \"//jaxlib/tools:jax_cuda_plugin_wheel_size_test\",\n+        \"//jaxlib/tools:jax_cuda_pjrt_wheel_size_test\",\n+        \"//jaxlib/tools:jaxlib_wheel_size_test\",\n+        \"//:jax_wheel_size_test\",\n+    ),\n     build_tag_filters=(\"-multiaccelerator\",),\n     test_tag_filters=(\"-multiaccelerator\",),\n     test_env=dict(\n@@ -830,7 +855,10 @@ def nvidia_gpu_build_with_compute_capability(\n     override_repository=dict(\n         xla=f\"{_GITHUB_WORKSPACE}/openxla/xla\",\n     ),\n-    options=_DEFAULT_BAZEL_OPTIONS,\n+    options={\n+        **_DEFAULT_BAZEL_OPTIONS,\n+        \"@local_config_cuda//cuda:override_include_cuda_libs\": True,\n+    },\n     repo_env={\"HERMETIC_PYTHON_VERSION\": \"3.11\"},\n     extra_setup_commands=([\"nvidia-smi\"],),\n )"
        },
        {
            "sha": "4bc38348ba04055b68250949d85025c3bee78282",
            "filename": "third_party/xla/build_tools/ci/golden_commands.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c68a4b7c0c91b6f6097b361fd35deec05386a70a/third_party%2Fxla%2Fbuild_tools%2Fci%2Fgolden_commands.txt",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c68a4b7c0c91b6f6097b361fd35deec05386a70a/third_party%2Fxla%2Fbuild_tools%2Fci%2Fgolden_commands.txt",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fbuild_tools%2Fci%2Fgolden_commands.txt?ref=c68a4b7c0c91b6f6097b361fd35deec05386a70a",
            "patch": "@@ -1,16 +1,16 @@\n # BEGIN BuildType.JAX_LINUX_X86_CPU_GITHUB_ACTIONS\n-parallel --ungroup --retries 3 --delay 15 --nonall -- bazel build --build_tag_filters= --test_tag_filters= --config=rbe_linux_x86_64 --test_env=JAX_NUM_GENERATED_CASES=25 --test_env=JAX_SKIP_SLOW_TESTS=1 --repo_env=HERMETIC_PYTHON_VERSION=3.12 --override_repository=xla=$GITHUB_WORKSPACE/openxla/xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --nobuild -- //tests:cpu_tests //tests:backend_independent_tests\n-bazel test --build_tag_filters= --test_tag_filters= --config=rbe_linux_x86_64 --test_env=JAX_NUM_GENERATED_CASES=25 --test_env=JAX_SKIP_SLOW_TESTS=1 --repo_env=HERMETIC_PYTHON_VERSION=3.12 --override_repository=xla=$GITHUB_WORKSPACE/openxla/xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async -- //tests:cpu_tests //tests:backend_independent_tests\n+parallel --ungroup --retries 3 --delay 15 --nonall -- bazel build --build_tag_filters= --test_tag_filters= --config=rbe_linux_x86_64 --test_env=JAX_NUM_GENERATED_CASES=25 --test_env=JAX_SKIP_SLOW_TESTS=1 --repo_env=HERMETIC_PYTHON_VERSION=3.12 --override_repository=xla=$GITHUB_WORKSPACE/openxla/xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --nobuild -- //tests:cpu_tests //tests:backend_independent_tests //jax/experimental/jax2tf/tests:jax2tf_test_cpu //tests/multiprocess:cpu_tests //jax/experimental/jax2tf/tests/multiprocess:cpu_tests //jaxlib/tools:jaxlib_wheel_size_test //:jax_wheel_size_test\n+bazel test --build_tag_filters= --test_tag_filters= --config=rbe_linux_x86_64 --test_env=JAX_NUM_GENERATED_CASES=25 --test_env=JAX_SKIP_SLOW_TESTS=1 --repo_env=HERMETIC_PYTHON_VERSION=3.12 --override_repository=xla=$GITHUB_WORKSPACE/openxla/xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async -- //tests:cpu_tests //tests:backend_independent_tests //jax/experimental/jax2tf/tests:jax2tf_test_cpu //tests/multiprocess:cpu_tests //jax/experimental/jax2tf/tests/multiprocess:cpu_tests //jaxlib/tools:jaxlib_wheel_size_test //:jax_wheel_size_test\n bazel analyze-profile profile.json.gz\n # END BuildType.JAX_LINUX_X86_CPU_GITHUB_ACTIONS\n # BEGIN BuildType.JAX_LINUX_X86_GPU_L4_GITHUB_ACTIONS\n nvidia-smi\n-parallel --ungroup --retries 3 --delay 15 --nonall -- bazel build --build_tag_filters=-multiaccelerator --test_tag_filters=-multiaccelerator --config=rbe_linux_x86_64_cuda --test_env=JAX_SKIP_SLOW_TESTS=1 --test_env=TF_CPP_MIN_LOG_LEVEL=0 --test_env=JAX_EXCLUDE_TEST_TARGETS=PmapTest.testSizeOverflow --repo_env=HERMETIC_PYTHON_VERSION=3.11 --override_repository=xla=$GITHUB_WORKSPACE/openxla/xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --nobuild -- //tests:gpu_tests //tests:backend_independent_tests\n-bazel test --build_tag_filters=-multiaccelerator --test_tag_filters=-multiaccelerator --config=rbe_linux_x86_64_cuda --test_env=JAX_SKIP_SLOW_TESTS=1 --test_env=TF_CPP_MIN_LOG_LEVEL=0 --test_env=JAX_EXCLUDE_TEST_TARGETS=PmapTest.testSizeOverflow --repo_env=HERMETIC_PYTHON_VERSION=3.11 --override_repository=xla=$GITHUB_WORKSPACE/openxla/xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async -- //tests:gpu_tests //tests:backend_independent_tests\n+parallel --ungroup --retries 3 --delay 15 --nonall -- bazel build --build_tag_filters=-multiaccelerator --test_tag_filters=-multiaccelerator --config=rbe_linux_x86_64_cuda --test_env=JAX_SKIP_SLOW_TESTS=1 --test_env=TF_CPP_MIN_LOG_LEVEL=0 --test_env=JAX_EXCLUDE_TEST_TARGETS=PmapTest.testSizeOverflow --repo_env=HERMETIC_PYTHON_VERSION=3.11 --override_repository=xla=$GITHUB_WORKSPACE/openxla/xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --@local_config_cuda//cuda:override_include_cuda_libs --nobuild -- //tests:gpu_tests //tests:backend_independent_tests //tests/pallas:gpu_tests //tests/pallas:backend_independent_tests //jaxlib/tools:jax_cuda_plugin_wheel_size_test //jaxlib/tools:jax_cuda_pjrt_wheel_size_test //jaxlib/tools:jaxlib_wheel_size_test //:jax_wheel_size_test\n+bazel test --build_tag_filters=-multiaccelerator --test_tag_filters=-multiaccelerator --config=rbe_linux_x86_64_cuda --test_env=JAX_SKIP_SLOW_TESTS=1 --test_env=TF_CPP_MIN_LOG_LEVEL=0 --test_env=JAX_EXCLUDE_TEST_TARGETS=PmapTest.testSizeOverflow --repo_env=HERMETIC_PYTHON_VERSION=3.11 --override_repository=xla=$GITHUB_WORKSPACE/openxla/xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --@local_config_cuda//cuda:override_include_cuda_libs -- //tests:gpu_tests //tests:backend_independent_tests //tests/pallas:gpu_tests //tests/pallas:backend_independent_tests //jaxlib/tools:jax_cuda_plugin_wheel_size_test //jaxlib/tools:jax_cuda_pjrt_wheel_size_test //jaxlib/tools:jaxlib_wheel_size_test //:jax_wheel_size_test\n bazel analyze-profile profile.json.gz\n # END BuildType.JAX_LINUX_X86_GPU_L4_GITHUB_ACTIONS\n # BEGIN BuildType.JAX_WINDOWS_X86_CPU_GITHUB_ACTIONS\n-bazel --output_base=$GITHUB_WORKSPACE\\bazel_output_base build --build_tag_filters= --test_tag_filters= --config=rbe_windows_amd64 --test_env=JAX_NUM_GENERATED_CASES=25 --test_env=JAX_SKIP_SLOW_TESTS=1 --repo_env=HERMETIC_PYTHON_VERSION=3.12 --override_repository=xla=$GITHUB_WORKSPACE\\openxla\\xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --build_runfile_links=False -- //tests:cpu_tests //tests:backend_independent_tests\n+bazel --output_base=$GITHUB_WORKSPACE\\bazel_output_base build --build_tag_filters= --test_tag_filters= --config=rbe_windows_amd64 --test_env=JAX_NUM_GENERATED_CASES=25 --test_env=JAX_SKIP_SLOW_TESTS=1 --repo_env=HERMETIC_PYTHON_VERSION=3.12 --override_repository=xla=$GITHUB_WORKSPACE\\openxla\\xla --color=yes --test_output=errors --verbose_failures --keep_going --nobuild_tests_only --profile=profile.json.gz --flaky_test_attempts=3 --jobs=150 --bes_upload_mode=fully_async --build_runfile_links=False -- //tests:cpu_tests //tests:backend_independent_tests //jax/experimental/jax2tf/tests:jax2tf_test_cpu //tests/multiprocess:cpu_tests //jax/experimental/jax2tf/tests/multiprocess:cpu_tests //jaxlib/tools:jaxlib_wheel_size_test //:jax_wheel_size_test\n bazel analyze-profile profile.json.gz\n # END BuildType.JAX_WINDOWS_X86_CPU_GITHUB_ACTIONS\n # BEGIN BuildType.TENSORFLOW_LINUX_X86_CPU_GITHUB_ACTIONS"
        }
    ],
    "stats": {
        "total": 46,
        "additions": 37,
        "deletions": 9
    }
}