{
    "author": "ezhulenev",
    "message": "[xla:ffi] Add xla::ffi::MakeTypeInfo\n\nPiperOrigin-RevId: 825230372",
    "sha": "3ea81667317fe2f9ae66592bde68a1d53b8fa983",
    "files": [
        {
            "sha": "f5060813503cd3cfa049d6e42d0827fa10122bc1",
            "filename": "third_party/xla/xla/ffi/api/ffi.h",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/3ea81667317fe2f9ae66592bde68a1d53b8fa983/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fffi.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/3ea81667317fe2f9ae66592bde68a1d53b8fa983/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fffi.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fffi%2Fapi%2Fffi.h?ref=3ea81667317fe2f9ae66592bde68a1d53b8fa983",
            "patch": "@@ -1503,11 +1503,17 @@ inline ThreadPool::ThreadPool(const XLA_FFI_Api* api,\n // Type Registration\n //===----------------------------------------------------------------------===//\n \n+// TODO(ezhulenev): Remove this once everyone migrates to MakeTypeInfo.\n template <typename T>\n constexpr XLA_FFI_TypeInfo TypeInfo() {\n   return XLA_FFI_TypeInfo{[](void* ptr) { delete static_cast<T*>(ptr); }};\n }\n \n+template <typename T>\n+constexpr XLA_FFI_TypeInfo MakeTypeInfo() {\n+  return XLA_FFI_TypeInfo{[](void* ptr) { delete static_cast<T*>(ptr); }};\n+}\n+\n #define XLA_FFI_REGISTER_TYPE(API, NAME, TYPE_ID, TYPE_INFO) \\\n   XLA_FFI_REGISTER_TYPE_(API, NAME, TYPE_ID, TYPE_INFO, __COUNTER__)\n #define XLA_FFI_REGISTER_TYPE_(API, NAME, TYPE_ID, TYPE_INFO, N) \\"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 6,
        "deletions": 0
    }
}