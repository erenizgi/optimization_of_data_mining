{
    "author": "vwbaker",
    "message": "Move tfrt_gpu_client_test to be an xla_test\n\nThis will link the correct runtime based on the GPU model, which is important as we roll out more autotuning.\n\nPiperOrigin-RevId: 810915199",
    "sha": "9445840f8d84bd2fc3e151f9e8ce86e283d97c45",
    "files": [
        {
            "sha": "bb4e7b2f837cc9824cf597f291cd70e9af7b0a39",
            "filename": "third_party/xla/xla/pjrt/gpu/tfrt/BUILD",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9445840f8d84bd2fc3e151f9e8ce86e283d97c45/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9445840f8d84bd2fc3e151f9e8ce86e283d97c45/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fpjrt%2Fgpu%2Ftfrt%2FBUILD?ref=9445840f8d84bd2fc3e151f9e8ce86e283d97c45",
            "patch": "@@ -2,6 +2,7 @@ load(\"@local_config_cuda//cuda:build_defs.bzl\", \"if_cuda\")\n load(\"@local_config_rocm//rocm:build_defs.bzl\", \"if_rocm\")\n load(\"//xla:xla.default.bzl\", \"xla_cc_test\")\n load(\"//xla/pjrt/gpu:package_groups.bzl\", \"xla_gpu_internal_packages\")\n+load(\"//xla/tests:build_defs.bzl\", \"xla_test\")\n load(\"//xla/tsl:tsl.bzl\", \"internal_visibility\")\n load(\"//xla/tsl/platform:rules_cc.bzl\", \"cc_library\")\n \n@@ -152,15 +153,17 @@ cc_library(\n     ]),\n )\n \n-xla_cc_test(\n+xla_test(\n     name = \"tfrt_gpu_client_test\",\n     srcs = [\"tfrt_gpu_client_test.cc\"],\n+    backends = [\n+        \"nvgpu_any\",\n+    ],\n     tags = [\n-        \"gpu\",\n+        \"multi_gpu\",\n         \"no_oss\",\n         \"noasan\",\n         \"nomsan\",\n-        \"requires-gpu-nvidia:2\",\n     ],\n     deps = [\n         \":gpu_event\",\n@@ -206,7 +209,6 @@ xla_cc_test(\n         \"//xla/pjrt/gpu:gpu_topology_proto_cc\",\n         \"//xla/pjrt/plugin/xla_gpu:xla_gpu_client_options\",\n         \"//xla/pjrt/proto:compile_options_proto_cc\",\n-        \"//xla/service:gpu_plugin\",\n         \"//xla/service:platform_util\",\n         \"//xla/stream_executor:device_description\",\n         \"//xla/stream_executor:device_memory\","
        }
    ],
    "stats": {
        "total": 10,
        "additions": 6,
        "deletions": 4
    }
}