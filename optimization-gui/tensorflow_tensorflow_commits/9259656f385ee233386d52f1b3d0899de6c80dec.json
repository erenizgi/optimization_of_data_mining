{
    "author": "khasanovaa",
    "message": "Add proto definition for `DynamicSliceThunk`.\n\nThis change introduces `dynamic_slice_thunk.proto` to define helper messages used by `DynamicSliceThunkProto`. The `DynamicSliceThunkProto` itself is added to `thunk.proto`, enabling the serialization of `DynamicSliceThunk` instances.\n\nPiperOrigin-RevId: 800446510",
    "sha": "9259656f385ee233386d52f1b3d0899de6c80dec",
    "files": [
        {
            "sha": "d4d600af0fabfd404062e8afcaa301984d6bcce1",
            "filename": "third_party/xla/xla/backends/gpu/runtime/BUILD",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9259656f385ee233386d52f1b3d0899de6c80dec/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9259656f385ee233386d52f1b3d0899de6c80dec/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2FBUILD?ref=9259656f385ee233386d52f1b3d0899de6c80dec",
            "patch": "@@ -2060,6 +2060,7 @@ tf_proto_library(\n     ],\n     protodeps = [\n         # keep sorted\n+        \":dynamic_slice_thunk_proto\",\n         \"//xla:xla_data_proto\",\n         \"//xla/service:buffer_assignment_proto\",\n         \"//xla/service/gpu:launch_dimensions_proto\",\n@@ -2069,6 +2070,19 @@ tf_proto_library(\n     ],\n )\n \n+tf_proto_library(\n+    name = \"dynamic_slice_thunk_proto\",\n+    srcs = [\n+        \"dynamic_slice_thunk.proto\",\n+    ],\n+    protodeps = [\n+        # keep sorted\n+        \"//xla:xla_data_proto\",\n+        \"//xla/service:buffer_assignment_proto\",\n+        \"//xla/service:hlo_proto\",\n+    ],\n+)\n+\n cc_library(\n     name = \"thunk_proto_deserialization\",\n     srcs = [\"thunk_proto_deserialization.cc\"],"
        },
        {
            "sha": "6f1ab809b56f6074fb0a30737cffa3a59eb0768b",
            "filename": "third_party/xla/xla/backends/gpu/runtime/dynamic_slice_thunk.proto",
            "status": "added",
            "additions": 59,
            "deletions": 0,
            "changes": 59,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9259656f385ee233386d52f1b3d0899de6c80dec/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fdynamic_slice_thunk.proto",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9259656f385ee233386d52f1b3d0899de6c80dec/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fdynamic_slice_thunk.proto",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fdynamic_slice_thunk.proto?ref=9259656f385ee233386d52f1b3d0899de6c80dec",
            "patch": "@@ -0,0 +1,59 @@\n+/* Copyright 2025 The OpenXLA Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+// This file contains proto representations of arguments to DynamicSliceThunk.\n+// The DynamicSliceThunkProto itself is defined in thunk.proto, along with the\n+// other ThunkProto types.\n+\n+syntax = \"proto3\";\n+\n+package xla.gpu;\n+\n+import \"xla/service/buffer_assignment.proto\";\n+import \"xla/service/hlo.proto\";\n+import \"xla/xla_data.proto\";\n+\n+message OptionalBufferAllocationSliceProto {\n+  optional xla.buffer_assignment.BufferAllocationSliceProto slice = 1;\n+}\n+\n+message OptionalShapeProto {\n+  optional xla.ShapeProto shape = 1;\n+}\n+\n+message OptionalInt64Proto {\n+  optional int64 value = 1;\n+}\n+\n+message OptionalDynamicSliceOffsetsProto {\n+  message DynamicSliceOffsetProto {\n+    oneof offset {\n+      int64 const_offset = 1;\n+      xla.buffer_assignment.BufferAllocationSliceProto slice_offset = 2;\n+      int64 hlo_module_offset_id = 3;\n+    }\n+  }\n+\n+  message DynamicSliceOffsetsProto {\n+    repeated DynamicSliceOffsetProto offsets = 1;\n+  }\n+  optional DynamicSliceOffsetsProto offsets = 1;\n+}\n+\n+message OffsetAsFunctionOfIndvarModulesMetadataProto {\n+  optional xla.HloModuleProto indvar_init = 1;\n+  optional xla.HloModuleProto indvar_update = 2;\n+  repeated xla.HloModuleProto extracted_offset_modules = 3;\n+}"
        },
        {
            "sha": "001c94fdb32e332fcd80d20f4db929cc29cbb294",
            "filename": "third_party/xla/xla/backends/gpu/runtime/thunk.proto",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9259656f385ee233386d52f1b3d0899de6c80dec/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fthunk.proto",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9259656f385ee233386d52f1b3d0899de6c80dec/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fthunk.proto",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fbackends%2Fgpu%2Fruntime%2Fthunk.proto?ref=9259656f385ee233386d52f1b3d0899de6c80dec",
            "patch": "@@ -17,6 +17,7 @@ syntax = \"proto3\";\n \n package xla.gpu;\n \n+import \"xla/backends/gpu/runtime/dynamic_slice_thunk.proto\";\n import \"xla/service/buffer_assignment.proto\";\n import \"xla/service/gpu/launch_dimensions.proto\";\n import \"xla/stream_executor/gpu/gpu_blas_lt.proto\";\n@@ -117,6 +118,17 @@ message CudnnThunkProto {\n message HostExecuteStartThunkProto {}\n message HostExecuteDoneThunkProto {}\n \n+message DynamicSliceThunkProto {\n+  SequentialThunkProto embedded_thunk = 1;\n+  repeated OptionalBufferAllocationSliceProto arguments = 2;\n+  repeated OptionalDynamicSliceOffsetsProto offsets = 3;\n+  repeated OptionalShapeProto orig_shapes = 4;\n+  repeated OptionalShapeProto sliced_shapes = 5;\n+  repeated OptionalInt64Proto offset_byte_sizes = 6;\n+  optional OffsetAsFunctionOfIndvarModulesMetadataProto\n+      offset_as_function_of_indvar_modules_metadata = 7;\n+}\n+\n message ThunkProto {\n   ThunkInfoProto thunk_info = 1;\n \n@@ -137,6 +149,7 @@ message ThunkProto {\n     CudnnThunkProto cudnn_thunk = 15;\n     HostExecuteStartThunkProto host_execute_start_thunk = 16;\n     HostExecuteDoneThunkProto host_execute_done_thunk = 17;\n+    DynamicSliceThunkProto dynamic_slice_thunk = 18;\n   }\n }\n "
        }
    ],
    "stats": {
        "total": 86,
        "additions": 86,
        "deletions": 0
    }
}