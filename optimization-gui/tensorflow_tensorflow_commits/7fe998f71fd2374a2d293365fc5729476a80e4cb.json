{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 828881454",
    "sha": "7fe998f71fd2374a2d293365fc5729476a80e4cb",
    "files": [
        {
            "sha": "d108bc51b5ee3317586da7744cc56bcc567bed64",
            "filename": "tensorflow/compiler/jit/tests/auto_clustering_test.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7fe998f71fd2374a2d293365fc5729476a80e4cb/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fauto_clustering_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7fe998f71fd2374a2d293365fc5729476a80e4cb/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fauto_clustering_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fauto_clustering_test.cc?ref=7fe998f71fd2374a2d293365fc5729476a80e4cb",
            "patch": "@@ -23,7 +23,7 @@ class AutoClusteringTestImpl : public AutoClusteringTest {\n  protected:\n   // Test auto-clustering with a proto text file ${key}.pbtxt.\n   absl::Status RunAutoClusteringTestWithPbtxt(absl::string_view key) {\n-    string file_name_without_extension =\n+    std::string file_name_without_extension =\n         absl::StrCat(testing::TensorFlowSrcRoot(), \"/compiler/jit/tests/\", key);\n \n     return AutoClusteringTest::RunAutoClusteringTestWithPbtxt(\n@@ -33,7 +33,7 @@ class AutoClusteringTestImpl : public AutoClusteringTest {\n \n   // Test auto-clustering with a gzipped proto text file ${key}.pbtxt.gz.\n   absl::Status RunAutoClusteringTestWithGzippedPbtxt(absl::string_view key) {\n-    string file_name_without_extension =\n+    std::string file_name_without_extension =\n         absl::StrCat(testing::TensorFlowSrcRoot(), \"/compiler/jit/tests/\", key);\n \n     return AutoClusteringTest::RunAutoClusteringTestWithGzippedPbtxt("
        },
        {
            "sha": "258449e91120e10a794c302208e4a7ef652f0860",
            "filename": "tensorflow/compiler/jit/tests/auto_clustering_test_helper.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 14,
            "changes": 31,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7fe998f71fd2374a2d293365fc5729476a80e4cb/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fauto_clustering_test_helper.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7fe998f71fd2374a2d293365fc5729476a80e4cb/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fauto_clustering_test_helper.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fauto_clustering_test_helper.cc?ref=7fe998f71fd2374a2d293365fc5729476a80e4cb",
            "patch": "@@ -33,7 +33,7 @@ limitations under the License.\n \n namespace tensorflow {\n namespace {\n-absl::StatusOr<string> SummarizeClustering(\n+absl::StatusOr<std::string> SummarizeClustering(\n     const GraphDef& auto_clustered_graph_def) {\n   testing::ResetClusterSequenceNumber();\n   Graph graph(OpRegistry::Global());\n@@ -45,7 +45,7 @@ absl::StatusOr<string> SummarizeClustering(\n \n   // cluster_id -> (operation name -> # of operations)\n   const int kNoCluster = -1;\n-  std::map<int, std::map<string, int>> clusters;\n+  std::map<int, std::map<std::string, int>> clusters;\n   std::map<int, int> cluster_size;\n   int clustered_nodes = 0;\n   for (Node* n : graph.op_nodes()) {\n@@ -60,7 +60,7 @@ absl::StatusOr<string> SummarizeClustering(\n     cluster_size[cluster]++;\n   }\n \n-  string result =\n+  std::string result =\n       absl::StrCat(\"Clustered nodes: \", clustered_nodes,\n                    \"\\nUnclustered nodes: \", cluster_size[kNoCluster],\n                    \"\\nNumber of clusters: \", clusters.size() - 1, \"\\n\\n\");\n@@ -99,7 +99,7 @@ absl::Status AssertGraphDefIsUnclustered(const GraphDef& graphdef) {\n   return absl::OkStatus();\n }\n \n-absl::Status ReadTextProtoFromString(Env* env, const string& data,\n+absl::Status ReadTextProtoFromString(Env* env, const std::string& data,\n                                      ::tensorflow::protobuf::Message* proto) {\n   if (!::tensorflow::protobuf::TextFormat::ParseFromString(data, proto)) {\n     return errors::DataLoss(\"Can't parse input data as text proto\");\n@@ -141,21 +141,24 @@ absl::Status AutoClusteringTest::RunAutoClusteringTestImpl(\n     graphdef = std::move(next);\n   }\n \n-  TF_ASSIGN_OR_RETURN(string clustering_summary, SummarizeClustering(graphdef));\n+  TF_ASSIGN_OR_RETURN(std::string clustering_summary,\n+                      SummarizeClustering(graphdef));\n \n   // To update golden files flip this to true and run\n   //\n   // bazel test --test_strategy=local \\\n   //   tensorflow/compiler/jit/tests:auto_clustering_test\n   bool update_golden = false;\n   if (update_golden) {\n-    TF_RETURN_IF_ERROR(WriteStringToFile(\n-        Env::Default(), string(golden_summary_file_path), clustering_summary));\n+    TF_RETURN_IF_ERROR(WriteStringToFile(Env::Default(),\n+                                         std::string(golden_summary_file_path),\n+                                         clustering_summary));\n   }\n \n-  string golden_file_contents;\n-  TF_RETURN_IF_ERROR(ReadFileToString(\n-      Env::Default(), string(golden_summary_file_path), &golden_file_contents));\n+  std::string golden_file_contents;\n+  TF_RETURN_IF_ERROR(ReadFileToString(Env::Default(),\n+                                      std::string(golden_summary_file_path),\n+                                      &golden_file_contents));\n \n   EXPECT_EQ(golden_file_contents, clustering_summary);\n \n@@ -167,7 +170,7 @@ absl::Status AutoClusteringTest::RunAutoClusteringTestWithPbtxt(\n     absl::string_view golden_summary_file_path) {\n   GraphDef graphdef;\n   TF_RETURN_IF_ERROR(\n-      ReadTextProto(Env::Default(), string(pbtxt_file_path), &graphdef));\n+      ReadTextProto(Env::Default(), std::string(pbtxt_file_path), &graphdef));\n   return RunAutoClusteringTestImpl(std::move(graphdef),\n                                    golden_summary_file_path);\n }\n@@ -177,8 +180,8 @@ absl::Status AutoClusteringTest::RunAutoClusteringTestWithGzippedPbtxt(\n     absl::string_view golden_summary_file_path) {\n   Env* env = Env::Default();\n   std::unique_ptr<RandomAccessFile> file_reader;\n-  TF_RETURN_IF_ERROR(\n-      env->NewRandomAccessFile(string(gzipped_pbtxt_file_path), &file_reader));\n+  TF_RETURN_IF_ERROR(env->NewRandomAccessFile(\n+      std::string(gzipped_pbtxt_file_path), &file_reader));\n   std::unique_ptr<io::RandomAccessInputStream> input_stream(\n       new io::RandomAccessInputStream(file_reader.get()));\n   constexpr int k_buffer_size = 256 << 10;  // 256kb\n@@ -206,7 +209,7 @@ absl::Status BenchmarkMarkForCompilation(absl::string_view graph_def_path,\n                                          benchmark::State& state) {\n   GraphDef graph_def;\n   TF_RETURN_IF_ERROR(\n-      ReadTextProto(Env::Default(), string(graph_def_path), &graph_def));\n+      ReadTextProto(Env::Default(), std::string(graph_def_path), &graph_def));\n \n   OptimizationPassRunner runner;\n   TF_RETURN_IF_ERROR(runner.SetJitLevel(tensorflow::OptimizerOptions::ON_2));"
        },
        {
            "sha": "33e2daf941eafb296b106432cffe6b013383b85c",
            "filename": "tensorflow/compiler/jit/tests/device_compiler_test_helper.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/7fe998f71fd2374a2d293365fc5729476a80e4cb/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fdevice_compiler_test_helper.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/7fe998f71fd2374a2d293365fc5729476a80e4cb/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fdevice_compiler_test_helper.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fjit%2Ftests%2Fdevice_compiler_test_helper.cc?ref=7fe998f71fd2374a2d293365fc5729476a80e4cb",
            "patch": "@@ -29,7 +29,7 @@ namespace {\n // Creates a float tensor of linearly increasing values, starting from offset.\n Tensor CreateInputTensor(const TensorShape& shape, float offset) {\n   Tensor tensor(DT_FLOAT, shape);\n-  for (int64 i = 0; i < tensor.flat<float>().size(); ++i) {\n+  for (int64_t i = 0; i < tensor.flat<float>().size(); ++i) {\n     tensor.flat<float>()(i) = offset + i;\n   }\n   return tensor;\n@@ -127,7 +127,7 @@ absl::Status DeviceCompilerSerializeTest::ExecuteWithBatch(\n   }\n \n   Tensor f32_input(DT_FLOAT, shape);\n-  for (int64 i = 0; i < f32_input.NumElements(); ++i) {\n+  for (int64_t i = 0; i < f32_input.NumElements(); ++i) {\n     EXPECT_NEAR(golden_output_tensors[0].flat<float>()(i),\n                 output_tensors[0].flat<float>()(i), 1e-3);\n   }\n@@ -139,7 +139,7 @@ DeviceCompilerSerializeTest::AlterPersistentCacheEntryHloModuleNames(\n     absl::string_view persistent_cache_dir_path,\n     absl::string_view file_prefix) {\n   Env* env = Env::Default();\n-  std::vector<string> file_names;\n+  std::vector<std::string> file_names;\n   TF_RETURN_IF_ERROR(\n       env->GetChildren(tensorflow::testing::TmpDir(), &file_names));\n "
        }
    ],
    "stats": {
        "total": 41,
        "additions": 22,
        "deletions": 19
    }
}