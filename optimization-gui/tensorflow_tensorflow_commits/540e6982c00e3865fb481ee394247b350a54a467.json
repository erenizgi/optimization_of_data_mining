{
    "author": "tensorflower-gardener",
    "message": "Automated Code Change\n\nPiperOrigin-RevId: 818508156",
    "sha": "540e6982c00e3865fb481ee394247b350a54a467",
    "files": [
        {
            "sha": "18d0ad0c7632dad3e83ebb15da5182bfaca5e3ed",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/collection_registry.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.cc?ref=540e6982c00e3865fb481ee394247b350a54a467",
            "patch": "@@ -39,14 +39,14 @@ void Collector::CollectMetricValues(\n }\n \n std::unique_ptr<CollectedMetrics> Collector::ConsumeCollectedMetrics() {\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   return std::move(collected_metrics_);\n }\n \n void Collector::CollectMetricDescriptor(\n     const AbstractMetricDef* const metric_def) {\n   auto* const metric_descriptor = [&]() {\n-    absl::MutexLock l(&mu_);\n+    absl::MutexLock l(mu_);\n     return collected_metrics_->metric_descriptor_map\n         .insert(std::make_pair(\n             string(metric_def->name()),\n@@ -81,7 +81,7 @@ CollectionRegistry::Register(const AbstractMetricDef* const metric_def,\n   CHECK(collection_function)\n       << \"Requires collection_function to contain an implementation.\";\n \n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n \n   const auto found_it = registry_.find(metric_def->name());\n   if (found_it != registry_.end()) {\n@@ -103,15 +103,15 @@ CollectionRegistry::Register(const AbstractMetricDef* const metric_def,\n }\n \n void CollectionRegistry::Unregister(const AbstractMetricDef* const metric_def) {\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   registry_.erase(metric_def->name());\n }\n \n std::unique_ptr<CollectedMetrics> CollectionRegistry::CollectMetrics(\n     const CollectMetricsOptions& options) const {\n   internal::Collector collector(env_->NowMicros() / 1000);\n \n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   for (const auto& registration : registry_) {\n     if (options.collect_metric_descriptors) {\n       collector.CollectMetricDescriptor(registration.second.metric_def);"
        },
        {
            "sha": "80ff3d0a02dba6584b5421825f84835647d42f07",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/collection_registry.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcollection_registry.h?ref=540e6982c00e3865fb481ee394247b350a54a467",
            "patch": "@@ -385,7 +385,7 @@ class Collector {\n       const uint64 registration_time_millis,\n       internal::Collector* const collector) TF_LOCKS_EXCLUDED(mu_) {\n     auto* const point_set = [&]() {\n-      absl::MutexLock l(&mu_);\n+      absl::MutexLock l(mu_);\n       return collected_metrics_->point_set_map\n           .insert(std::make_pair(std::string(metric_def->name()),\n                                  std::unique_ptr<PointSet>(new PointSet())))"
        },
        {
            "sha": "d0f23d2c63d250f375faba43934735793e41b022",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/counter.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcounter.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcounter.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fcounter.h?ref=540e6982c00e3865fb481ee394247b350a54a467",
            "patch": "@@ -169,7 +169,7 @@ class Counter {\n             &metric_def_, [&](MetricCollectorGetter getter) {\n               auto metric_collector = getter.Get(&metric_def_);\n \n-              absl::MutexLock l(&mu_);\n+              absl::MutexLock l(mu_);\n               for (const auto& cell : cells_) {\n                 metric_collector.CollectValue(cell.first, cell.second.value());\n               }\n@@ -231,7 +231,7 @@ CounterCell* Counter<NumLabels>::GetCell(const Labels&... labels)\n                 \"provided in GetCell(...).\");\n \n   const LabelArray& label_array = {{labels...}};\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   const auto found_it = cells_.find(label_array);\n   if (found_it != cells_.end()) {\n     return &(found_it->second);"
        },
        {
            "sha": "76c82efe1fc8ea6ec2da2ca560fd522665e917df",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/gauge.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fgauge.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fgauge.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fgauge.h?ref=540e6982c00e3865fb481ee394247b350a54a467",
            "patch": "@@ -235,7 +235,7 @@ class Gauge {\n             &metric_def_, [&](MetricCollectorGetter getter) {\n               auto metric_collector = getter.Get(&metric_def_);\n \n-              absl::MutexLock l(&mu_);\n+              absl::MutexLock l(mu_);\n               for (const auto& cell : cells_) {\n                 metric_collector.CollectValue(cell.first, cell.second.value());\n               }\n@@ -271,13 +271,13 @@ class Gauge {\n ////\n template <typename T>\n void GaugeCell<T>::Set(const T& value) {\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   value_ = value;\n }\n \n template <typename T>\n T GaugeCell<T>::value() const {\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   return value_;\n }\n \n@@ -320,7 +320,7 @@ GaugeCell<ValueType>* Gauge<ValueType, NumLabels>::GetCell(\n       \"provided in GetCell(...).\");\n \n   const LabelArray& label_array = {{labels...}};\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   const auto found_it = cells_.find(label_array);\n   if (found_it != cells_.end()) {\n     return &(found_it->second);"
        },
        {
            "sha": "88b8d24030b207e1559a8f0d678ebdb9077e1c9f",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/percentile_sampler.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.cc?ref=540e6982c00e3865fb481ee394247b350a54a467",
            "patch": "@@ -36,7 +36,7 @@ namespace monitoring {\n \n void PercentileSamplerCell::Add(double sample) {\n   uint64 nstime = EnvTime::NowNanos();\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   samples_[next_position_] = {nstime, sample};\n   ++next_position_;\n   if (TF_PREDICT_FALSE(next_position_ >= samples_.size())) {\n@@ -90,7 +90,7 @@ Percentiles PercentileSamplerCell::value() const {\n \n std::vector<PercentileSamplerCell::Sample> PercentileSamplerCell::GetSamples(\n     size_t* total_samples, long double* accumulator) const {\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   std::vector<Sample> samples;\n   if (num_samples_ == samples_.size()) {\n     samples.insert(samples.end(), samples_.begin() + next_position_,"
        },
        {
            "sha": "ffc442ad5601c7357109fdb5d3193da9f6bd00e8",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/percentile_sampler.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fpercentile_sampler.h?ref=540e6982c00e3865fb481ee394247b350a54a467",
            "patch": "@@ -195,7 +195,7 @@ class PercentileSampler {\n         registration_handle_(CollectionRegistry::Default()->Register(\n             &metric_def_, [&](MetricCollectorGetter getter) {\n               auto metric_collector = getter.Get(&metric_def_);\n-              absl::MutexLock l(&mu_);\n+              absl::MutexLock l(mu_);\n               for (const auto& cell : cells_) {\n                 metric_collector.CollectValue(cell.first, cell.second.value());\n               }\n@@ -274,7 +274,7 @@ PercentileSamplerCell* PercentileSampler<NumLabels>::GetCell(\n       \"provided in GetCell(...).\");\n \n   const LabelArray& label_array = {{labels...}};\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   const auto found_it = cells_.find(label_array);\n   if (found_it != cells_.end()) {\n     return &(found_it->second);"
        },
        {
            "sha": "d7122f3633ff7196a92d24ce18352488e54bd4f6",
            "filename": "third_party/xla/xla/tsl/lib/monitoring/sampler.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fsampler.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/540e6982c00e3865fb481ee394247b350a54a467/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fsampler.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Flib%2Fmonitoring%2Fsampler.h?ref=540e6982c00e3865fb481ee394247b350a54a467",
            "patch": "@@ -246,7 +246,7 @@ class Sampler {\n             &metric_def_, [&](MetricCollectorGetter getter) {\n               auto metric_collector = getter.Get(&metric_def_);\n \n-              absl::ReaderMutexLock l(&mu_);\n+              absl::ReaderMutexLock l(mu_);\n               for (const auto& cell : cells_) {\n                 metric_collector.CollectValue(cell.first, cell.second.value());\n               }\n@@ -317,13 +317,13 @@ SamplerCell* Sampler<NumLabels>::GetCell(const Labels&... labels)\n \n   const LabelArray& label_array = {{labels...}};\n   {\n-    absl::ReaderMutexLock l(&mu_);\n+    absl::ReaderMutexLock l(mu_);\n     const auto found_it = cells_.find(label_array);\n     if (found_it != cells_.end()) {\n       return &(found_it->second);\n     }\n   }\n-  absl::MutexLock l(&mu_);\n+  absl::MutexLock l(mu_);\n   return &(cells_\n                .emplace(std::piecewise_construct,\n                         std::forward_as_tuple(label_array),"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 19,
        "deletions": 19
    }
}