{
    "author": "jaro-sevcik",
    "message": "PR #29116: Set names for XLA threads\n\nImported from GitHub PR https://github.com/openxla/xla/pull/29116\n\nLet us call `pthread_setname_np` for XLA threads so that the thread names are visible in gdb.\n\nI should say that `pthread_setname_np` is not posix, but it should be provided on Linux and Mac.\nIf there is concern about this, we could put some `#if` around this.\nCopybara import of the project:\n\n--\nee2a11802428a966800af67fc7d95ff5837802ed by Jaroslav Sevcik <jsevcik@nvidia.com>:\n\nSet names for XLA threads\n\nMerging this change closes #29116\n\nPiperOrigin-RevId: 808477465",
    "sha": "51440b3ef2adb602d2a3d0942b13511b44977f82",
    "files": [
        {
            "sha": "816f4ed098b1a189cd387084656abde538494266",
            "filename": "third_party/xla/xla/tsl/platform/default/env.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/51440b3ef2adb602d2a3d0942b13511b44977f82/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fenv.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/51440b3ef2adb602d2a3d0942b13511b44977f82/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fenv.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Ftsl%2Fplatform%2Fdefault%2Fenv.cc?ref=51440b3ef2adb602d2a3d0942b13511b44977f82",
            "patch": "@@ -84,6 +84,9 @@ class PThread : public Thread {\n     CHECK_EQ(ret, 0) << \"Thread \" << name\n                      << \" creation via pthread_create() failed.\";\n     pthread_attr_destroy(&attributes);\n+#if !defined(__APPLE__)\n+    pthread_setname_np(thread_, name.c_str());\n+#endif\n   }\n \n   ~PThread() override {"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 3,
        "deletions": 0
    }
}