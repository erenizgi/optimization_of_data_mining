{
    "author": "ezhulenev",
    "message": "[stream_executor] Switch SE TPU backend to se::DeviceMemoryAddress\n\nRenaming types in preparation for introducing physical memory allocation concept to SE.\n\nPiperOrigin-RevId: 842074373",
    "sha": "9e24441327c16113bb1e1f578616209dc8ae1bf7",
    "files": [
        {
            "sha": "a8edf650bc1718641309e35110f9ae8bfe77adb7",
            "filename": "tensorflow/core/tpu/tpu_execute.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/tensorflow%2Fcore%2Ftpu%2Ftpu_execute.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/tensorflow%2Fcore%2Ftpu%2Ftpu_execute.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcore%2Ftpu%2Ftpu_execute.cc?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -474,7 +474,7 @@ absl::StatusOr<xla::ExecutionOutput> TPUExecute(\n   VLOG(1) << \"TPUExecute: Updating TPUEmbedding memory addresses on \"\n           << device_ordinal;\n \n-  SE_DeviceMemoryBase* device_memory_addrs = nullptr;\n+  SE_DeviceAddressBase* device_memory_addrs = nullptr;\n   size_t device_memory_addrs_count;\n   auto device_memory_cleanup =\n       absl::MakeCleanup([device_memory_addrs, device_ordinal]() {\n@@ -501,7 +501,7 @@ absl::StatusOr<xla::ExecutionOutput> TPUExecute(\n   for (int i = 0; i < device_memory_addrs_count; ++i) {\n     xla::ShapeTree<xla::MaybeOwningDeviceMemory> tree(\n         xla::ShapeUtil::MakeOpaqueShape());\n-    const SE_DeviceMemoryBase& addr = device_memory_addrs[i];\n+    const SE_DeviceAddressBase& addr = device_memory_addrs[i];\n     VLOG(2) << absl::StrFormat(\"Device memory addr[%i] = {%p, %llu, %llu}\", i,\n                                addr.opaque, addr.size, addr.payload);\n     *tree.mutable_element({}) = ApiConverter::FromC(addr);"
        },
        {
            "sha": "cb53f7c79336dc7c26facfb3ae4514848bdbe30c",
            "filename": "third_party/xla/xla/stream_executor/tpu/c_api_conversions.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.cc?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -158,9 +158,9 @@ xla::ShapedBuffer FromC(XLA_ShapedBuffer* c_buffer) {\n   return xla_shaped_buffer;\n }\n \n-SE_MaybeOwningDeviceMemory ToC(xla::MaybeOwningDeviceAddress& mem,\n-                               bool aliased) {\n-  SE_MaybeOwningDeviceMemory se_mem;\n+SE_MaybeOwningDeviceAddress ToC(xla::MaybeOwningDeviceAddress& mem,\n+                                bool aliased) {\n+  SE_MaybeOwningDeviceAddress se_mem;\n   se_mem.owned = mem.HasOwnership();\n   se_mem.memory = ApiConverter::ToC(mem.AsDeviceAddress());\n   if (mem.HasOwnership()) {\n@@ -181,7 +181,7 @@ SE_MaybeOwningDeviceMemory ToC(xla::MaybeOwningDeviceAddress& mem,\n }\n \n xla::MaybeOwningDeviceAddress FromC(\n-    SE_MaybeOwningDeviceMemory* se_mem,\n+    SE_MaybeOwningDeviceAddress* se_mem,\n     stream_executor::DeviceAddressAllocator* allocator) {\n   if (se_mem->owned) {\n     return xla::MaybeOwningDeviceAddress(stream_executor::OwningDeviceAddress(\n@@ -244,8 +244,8 @@ stream_executor::DeviceAddressAllocator* FromC(\n       c_allocator.ctx);\n }\n \n-SE_MaybeOwningDeviceMemory ToC(stream_executor::OwningDeviceAddress* mem) {\n-  SE_MaybeOwningDeviceMemory se_mem;\n+SE_MaybeOwningDeviceAddress ToC(stream_executor::OwningDeviceAddress* mem) {\n+  SE_MaybeOwningDeviceAddress se_mem;\n   se_mem.device_ordinal = mem->device_ordinal();\n   se_mem.memory = ApiConverter::ToC(mem->Release());\n   se_mem.allocator = ApiConverter::ToC(mem->allocator());"
        },
        {
            "sha": "cdfcab80fabb6965d3f18f5d233b24410d55ffa1",
            "filename": "third_party/xla/xla/stream_executor/tpu/c_api_conversions.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions.h?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -118,7 +118,7 @@ struct TpuEmbeddingEngineParametersData {\n std::unique_ptr<TpuEmbeddingEngineParametersData> Create(int num_tables);\n \n xla::MaybeOwningDeviceAddress FromC(\n-    SE_MaybeOwningDeviceMemory* se_mem,\n+    SE_MaybeOwningDeviceAddress* se_mem,\n     stream_executor::DeviceAddressAllocator* allocator);\n \n // DeviceAddressAllocator\n@@ -128,12 +128,12 @@ stream_executor::DeviceAddressAllocator* FromC(\n     const SE_DeviceAddressAllocator& c_allocator);\n \n // OwningDeviceAddress\n-SE_MaybeOwningDeviceMemory ToC(stream_executor::OwningDeviceAddress* mem);\n+SE_MaybeOwningDeviceAddress ToC(stream_executor::OwningDeviceAddress* mem);\n // mem.HasOwnership() may be true if the buffer is aliased and shouldn't be\n // released. 'aliased' should be true in this case. 'aliased' has no effect if\n // 'mem' is unowned.\n-SE_MaybeOwningDeviceMemory ToC(xla::MaybeOwningDeviceAddress& mem,\n-                               bool aliased);\n+SE_MaybeOwningDeviceAddress ToC(xla::MaybeOwningDeviceAddress& mem,\n+                                bool aliased);\n \n // HloModule\n XLA_HloModule ToC(const xla::HloModule& module);"
        },
        {
            "sha": "c96e6be263d884e43065d76cc892553d263b0566",
            "filename": "third_party/xla/xla/stream_executor/tpu/c_api_conversions_test.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_conversions_test.cc?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -308,7 +308,7 @@ TEST(XlaHloModule, ToAndFromC) {\n }\n \n // TODO(b/290654348): SE_DeviceAddressBase, SE_DeviceAddressAllocator,\n-// SE_MaybeOwningDeviceMemory\n+// SE_MaybeOwningDeviceAddress\n \n }  // namespace\n "
        },
        {
            "sha": "a42221294fa16c3b8bc583a1c0609b88a739a2c6",
            "filename": "third_party/xla/xla/stream_executor/tpu/c_api_decl.h",
            "status": "modified",
            "additions": 4,
            "deletions": 10,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_decl.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_decl.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Fc_api_decl.h?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -72,15 +72,11 @@ typedef struct SE_DeviceAddressBase {\n   uint64_t payload;\n } SE_DeviceAddressBase;\n \n-typedef SE_DeviceAddressBase SE_DeviceMemoryBase;\n-\n typedef struct SE_ScopedDeviceAddress {\n   SE_DeviceAddressBase wrapped;\n   int device_ordinal;\n } SE_ScopedDeviceAddress;\n \n-typedef SE_ScopedDeviceAddress SE_ScopedDeviceMemory;\n-\n typedef struct SE_AllocatorStats {\n   int64_t num_allocs;\n   int64_t bytes_in_use;\n@@ -117,8 +113,6 @@ typedef struct SE_DeviceAddressAllocator {\n   SE_DeallocateFn deallocate;\n } SE_DeviceAddressAllocator;\n \n-typedef SE_DeviceAddressAllocator SE_DeviceMemoryAllocator;\n-\n typedef struct SE_DeviceDescription {\n   char* device_vendor;\n   char* platform_version;\n@@ -175,14 +169,14 @@ typedef struct SE_ExecutableRunOptions {\n typedef struct SE_ExecutableSerializationHandle\n     SE_ExecutableSerializationHandle;\n \n-typedef struct SE_MaybeOwningDeviceMemory {\n+typedef struct SE_MaybeOwningDeviceAddress {\n   SE_DeviceAddressBase memory;\n   bool owned;\n \n   // Set if owned\n   int device_ordinal;\n   SE_DeviceAddressAllocator allocator;\n-} SE_MaybeOwningDeviceMemory;\n+} SE_MaybeOwningDeviceAddress;\n \n typedef struct IntList {\n   union {\n@@ -279,7 +273,7 @@ typedef struct XLA_Literal {\n \n typedef struct XLA_MaybeOwningDeviceAddressShapeTree {\n   XLA_Shape shape;\n-  SE_MaybeOwningDeviceMemory* buffers;\n+  SE_MaybeOwningDeviceAddress* buffers;\n } XLA_MaybeOwningDeviceAddressShapeTree;\n \n typedef struct XLA_ShapeIndex {\n@@ -296,7 +290,7 @@ typedef struct SE_ExecutionInput {\n \n typedef struct SE_ExecutionOutput {\n   XLA_ShapedBuffer result;\n-  SE_MaybeOwningDeviceMemory* to_be_released;\n+  SE_MaybeOwningDeviceAddress* to_be_released;\n   int to_be_released_size;\n   XLA_ShapeIndex* aliased_indices;\n   int aliased_indices_size;"
        },
        {
            "sha": "b5f5c6d80017ab1aa45489ee92f9d74d8cc0adff",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_executable.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executable.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executable.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executable.cc?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -102,13 +102,13 @@ absl::StatusOr<ExecutionOutput> TpuExecutable::ExecuteAsyncOnStream(\n \n     ApiConverter::ToC(arg.shape(), &se_args[i]->shape_tree.shape);\n     auto* arg_buffers = arg.MutableBuffers();\n-    absl::InlinedVector<SE_MaybeOwningDeviceMemory, 2> se_buffers;\n+    absl::InlinedVector<SE_MaybeOwningDeviceAddress, 2> se_buffers;\n     for (auto& pair : *arg_buffers) {\n       bool aliased = arg.unowned_indices().count(pair.first) > 0;\n       se_buffers.push_back(ApiConverter::ToC(pair.second, aliased));\n     }\n     se_args[i]->shape_tree.buffers =\n-        new SE_MaybeOwningDeviceMemory[se_buffers.size()];\n+        new SE_MaybeOwningDeviceAddress[se_buffers.size()];\n     for (int j = 0; j < se_buffers.size(); ++j) {\n       se_args[i]->shape_tree.buffers[j] = se_buffers[j];\n     }\n@@ -166,7 +166,7 @@ absl::StatusOr<ExecutionOutput> TpuExecutable::ExecuteAsyncOnStream(\n             .Release()\n             .value());\n   }\n-  ExecutorApiFn()->TpuExecutable_FreeMaybeOwningDeviceMemoryArrayFn(\n+  ExecutorApiFn()->TpuExecutable_FreeMaybeOwningDeviceAddressArrayFn(\n       se_execution_output.to_be_released);\n \n   return output;"
        },
        {
            "sha": "f8080a29d01fb34829a539ee288331c298c82b12",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_executable_interface.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executable_interface.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executable_interface.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executable_interface.cc?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -212,7 +212,7 @@ absl::StatusOr<ExecutionOutput> TpuExecutableInterface::ExecuteAsyncOnStream(\n   std::vector<se::DeviceAddressBase> memory_bases;\n   memory_bases.reserve(arguments.size());\n   for (auto& argument : arguments) {\n-    memory_bases.push_back(argument.Buffer({}).AsDeviceMemoryBase());\n+    memory_bases.push_back(argument.Buffer({}).AsDeviceAddress());\n   }\n   se::Stream* stream = run_options->stream();\n \n@@ -240,16 +240,16 @@ absl::StatusOr<ExecutionOutput> TpuExecutableInterface::ExecuteAsyncOnStream(\n       // data from fast memory instead of fresh data in large memory.\n       auto it = arguments[parameter].MutableBuffers()->find({index});\n       CHECK(it != arguments[parameter].MutableBuffers()->end());\n-      CHECK(!it->second.AsDeviceMemoryBase().is_null());\n+      CHECK(!it->second.AsDeviceAddress().is_null());\n       CHECK(offset);\n       bool is_prefetch_output_alias =\n           absl::c_any_of(result.Result().buffers(), [&](auto index_addr_pair) {\n             return index_addr_pair.second.IsSameAs(\n-                it->second.AsDeviceMemoryBase());\n+                it->second.AsDeviceAddress());\n           });\n       cross_program_prefetch_addrs.emplace_back(\n           is_prefetch_output_alias ? stream_executor::DeviceAddressBase()\n-                                   : it->second.AsDeviceMemoryBase());\n+                                   : it->second.AsDeviceAddress());\n       cross_program_prefetch_offsets.emplace_back(\n           is_prefetch_output_alias ? std::numeric_limits<uint32_t>::max()\n                                    : *offset);"
        },
        {
            "sha": "7edaba7a8e9fdd09cd723be6a8a8d1bfb8d0ef77",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_executor.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor.h?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -118,8 +118,8 @@ class TpuExecutor : public tensorflow::tpu::TpuExecutorInterface {\n   // to TpuExecutorInterface.\n   absl::StatusOr<std::unique_ptr<\n       tensorflow::tpu::TpuExecutorInterface::TemporaryDeviceAddress>>\n-  CreateTemporaryDeviceMemory(int64_t memory_space, int64_t byte_offset,\n-                              int64_t size) override {\n+  CreateTemporaryDeviceAddress(int64_t memory_space, int64_t byte_offset,\n+                               int64_t size) override {\n     LOG(FATAL) << \"Unimplemented.\";\n   }\n "
        },
        {
            "sha": "7f2c1b02e094b2c9cd70606ec87d2d49f169c83c",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_executor_c_api.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_c_api.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_c_api.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_c_api.h?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -298,12 +298,12 @@ TFTPU_CAPI_EXPORT void TpuExecutable_ExecuteAsyncOnStream(\n TFTPU_CAPI_EXPORT void TpuExecutable_FreeXlaShapeIndexArray(\n     XLA_ShapeIndex* array);\n \n-// This frees the SE_MaybeOwningDeviceMemory* array allocated when se_output is\n+// This frees the SE_MaybeOwningDeviceAddress* array allocated when se_output is\n // returned by TpuExecutable_ExecuteAsyncOnStream.\n // Note that this only frees the heap-allocated array itself, and does not\n // free any of the underlying device memory.\n-TFTPU_CAPI_EXPORT void TpuExecutable_FreeMaybeOwningDeviceMemoryArray(\n-    SE_MaybeOwningDeviceMemory* array);\n+TFTPU_CAPI_EXPORT void TpuExecutable_FreeMaybeOwningDeviceAddressArray(\n+    SE_MaybeOwningDeviceAddress* array);\n \n TFTPU_CAPI_EXPORT void TpuExecutable_Fingerprint(SE_Executable* executable,\n                                                  const char** fingerprint,\n@@ -479,7 +479,7 @@ struct TfTpu_ExecutorApiFn {\n \n   TFTPU_ADD_FN_IN_STRUCT(TpuExecutable_ExecuteAsyncOnStream);\n   TFTPU_ADD_FN_IN_STRUCT(TpuExecutable_FreeXlaShapeIndexArray);\n-  TFTPU_ADD_FN_IN_STRUCT(TpuExecutable_FreeMaybeOwningDeviceMemoryArray);\n+  TFTPU_ADD_FN_IN_STRUCT(TpuExecutable_FreeMaybeOwningDeviceAddressArray);\n   TFTPU_ADD_FN_IN_STRUCT(TpuExecutable_Fingerprint);\n   TFTPU_ADD_FN_IN_STRUCT(TpuExecutable_Serialize);\n   TFTPU_ADD_FN_IN_STRUCT(TpuExecutableSerialize_GetByteSize);"
        },
        {
            "sha": "ee02abad1bf4019592eb8ebfe7ee53df23f9523b",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_executor_init_fns.inc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_init_fns.inc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_init_fns.inc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_init_fns.inc?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -125,7 +125,7 @@ absl::Status SetExecutorStructFn(\n   TFTPU_SET_FN(executor_fn, TpuCompiler_DefaultDeviceShapeRepresentation);\n   TFTPU_SET_FN(executor_fn, TpuExecutable_ExecuteAsyncOnStream);\n   TFTPU_SET_FN(executor_fn, TpuExecutable_FreeXlaShapeIndexArray);\n-  TFTPU_SET_FN(executor_fn, TpuExecutable_FreeMaybeOwningDeviceMemoryArray);\n+  TFTPU_SET_FN(executor_fn, TpuExecutable_FreeMaybeOwningDeviceAddressArray);\n   TFTPU_SET_FN(executor_fn, TpuExecutable_Fingerprint);\n   TFTPU_SET_FN(executor_fn, TpuExecutable_Serialize);\n   TFTPU_SET_FN(executor_fn, TpuExecutableSerialize_GetByteSize);"
        },
        {
            "sha": "db95ca86242a9552c049a4db2323271bfbb40866",
            "filename": "third_party/xla/xla/stream_executor/tpu/tpu_executor_interface.h",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_interface.h",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/9e24441327c16113bb1e1f578616209dc8ae1bf7/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_interface.h",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fstream_executor%2Ftpu%2Ftpu_executor_interface.h?ref=9e24441327c16113bb1e1f578616209dc8ae1bf7",
            "patch": "@@ -42,15 +42,12 @@ class TpuExecutorInterface : public stream_executor::StreamExecutorCommon {\n   class TemporaryDeviceAddress {\n    public:\n     virtual ~TemporaryDeviceAddress() {}\n-    virtual stream_executor::DeviceAddressBase AsDeviceMemoryBase() const = 0;\n+    virtual stream_executor::DeviceAddressBase AsDeviceAddress() const = 0;\n   };\n \n-  using TemporaryDeviceMemory ABSL_DEPRECATE_AND_INLINE() =\n-      TemporaryDeviceAddress;\n-\n   virtual absl::StatusOr<std::unique_ptr<TemporaryDeviceAddress>>\n-  CreateTemporaryDeviceMemory(int64_t memory_space, int64_t byte_offset,\n-                              int64_t size) {\n+  CreateTemporaryDeviceAddress(int64_t memory_space, int64_t byte_offset,\n+                               int64_t size) {\n     LOG(FATAL) << \"Unimplemented.\";\n   }\n "
        }
    ],
    "stats": {
        "total": 77,
        "additions": 34,
        "deletions": 43
    }
}