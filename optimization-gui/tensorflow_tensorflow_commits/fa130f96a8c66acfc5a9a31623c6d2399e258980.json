{
    "author": "nvgrw",
    "message": "Log ExecutePhase deserialization filename.\n\nPiperOrigin-RevId: 829013047",
    "sha": "fa130f96a8c66acfc5a9a31623c6d2399e258980",
    "files": [
        {
            "sha": "f12c36ade2657ec76aed507444fc360184e1d17d",
            "filename": "third_party/xla/xla/service/hlo_runner_pjrt.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/fa130f96a8c66acfc5a9a31623c6d2399e258980/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_runner_pjrt.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/fa130f96a8c66acfc5a9a31623c6d2399e258980/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_runner_pjrt.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fhlo_runner_pjrt.cc?ref=fa130f96a8c66acfc5a9a31623c6d2399e258980",
            "patch": "@@ -910,7 +910,7 @@ std::string MakeFilename(const HloModule& module, const bool run_hlo_passes) {\n absl::StatusOr<std::unique_ptr<OpaqueExecutable>>\n CompilePhaseHloRunnerPjRt::CreateExecutable(std::unique_ptr<HloModule> module,\n                                             const bool run_hlo_passes) {\n-  const std::string filename =\n+  const std::string path =\n       tsl::io::JoinPath(artifact_dir_, MakeFilename(*module, run_hlo_passes));\n   TF_ASSIGN_OR_RETURN(\n       std::unique_ptr<OpaqueExecutable> wrapped_executable,\n@@ -921,19 +921,19 @@ CompilePhaseHloRunnerPjRt::CreateExecutable(std::unique_ptr<HloModule> module,\n \n   TF_ASSIGN_OR_RETURN(const std::string serialized_executable,\n                       executable->executable()->SerializeExecutable());\n-  TF_RETURN_IF_ERROR(tsl::WriteStringToFile(tsl::Env::Default(), filename,\n-                                            serialized_executable));\n+  TF_RETURN_IF_ERROR(\n+      tsl::WriteStringToFile(tsl::Env::Default(), path, serialized_executable));\n   return wrapped_executable;\n }\n \n absl::StatusOr<std::unique_ptr<OpaqueExecutable>>\n ExecutePhaseHloRunnerPjRt::CreateExecutable(std::unique_ptr<HloModule> module,\n                                             const bool run_hlo_passes) {\n-  const std::string filename =\n-      tsl::io::JoinPath(artifact_dir_, MakeFilename(*module, run_hlo_passes));\n+  const std::string filename = MakeFilename(*module, run_hlo_passes);\n+  const std::string path = tsl::io::JoinPath(artifact_dir_, filename);\n   std::string serialized_executable;\n   if (const absl::Status status = tsl::ReadFileToString(\n-          tsl::Env::Default(), filename, &serialized_executable);\n+          tsl::Env::Default(), path, &serialized_executable);\n       !status.ok()) {\n     if (!compile_if_not_found_) {\n       return absl::NotFoundError(absl::StrCat(\n@@ -942,6 +942,8 @@ ExecutePhaseHloRunnerPjRt::CreateExecutable(std::unique_ptr<HloModule> module,\n     LOG(INFO) << \"Failed to read serialized executable. \" << status;\n     return HloRunnerPjRt::CreateExecutable(std::move(module), run_hlo_passes);\n   }\n+  LOG(INFO) << \"ExecutePhase deserializing \" << module->name() << \" from \"\n+            << filename;\n   return DeserializeExecutable(serialized_executable);\n }\n "
        }
    ],
    "stats": {
        "total": 14,
        "additions": 8,
        "deletions": 6
    }
}