{
    "author": "ybaturina",
    "message": "Enable using custom hermetic NCCL version.\n\nThe NCCL version can be chosen via `HERMETIC_NCCL_VERSION` env var.\n\nSee docs [here](https://github.com/google-ml-infra/rules_ml_toolchain/blob/main/gpu/README.md#environment-variables-controlling-the-hermetic-cudacudnnnvshmem-versions).\n\nPiperOrigin-RevId: 846792626",
    "sha": "a3fad5d03e2b1d6738a171f98f5b69e1103f05a6",
    "files": [
        {
            "sha": "114f1dd36f5315f0a7c7f76a3b792b1946a3d726",
            "filename": "third_party/xla/MODULE.bazel",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a3fad5d03e2b1d6738a171f98f5b69e1103f05a6/third_party%2Fxla%2FMODULE.bazel",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a3fad5d03e2b1d6738a171f98f5b69e1103f05a6/third_party%2Fxla%2FMODULE.bazel",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2FMODULE.bazel?ref=a3fad5d03e2b1d6738a171f98f5b69e1103f05a6",
            "patch": "@@ -45,9 +45,9 @@ bazel_dep(name = \"rules_ml_toolchain\")\n # echo \"sha256-${HASH}\"\n archive_override(\n     module_name = \"rules_ml_toolchain\",\n-    integrity = \"sha256-U5Be3lDj7rx4ImbiDpuawdcWbvaLh3vqWT02ANz+A+Y=\",\n-    strip_prefix = \"rules_ml_toolchain-a1ff84835e407b41eef5fd1a865a23748c294db6\",\n-    urls = [\"https://github.com/google-ml-infra/rules_ml_toolchain/archive/a1ff84835e407b41eef5fd1a865a23748c294db6.tar.gz\"],\n+    integrity = \"sha256-HCxTCgVOnos8gR7CHtimh/yGW+w6u8j/Zb64KbHWeuQ=\",\n+    strip_prefix = \"rules_ml_toolchain-6734d2a174bf29e731d3f473743d1cc1a86100c3\",\n+    urls = [\"https://github.com/google-ml-infra/rules_ml_toolchain/archive/6734d2a174bf29e731d3f473743d1cc1a86100c3.tar.gz\"],\n )\n \n # TODO: Upstream the patch?"
        },
        {
            "sha": "29e65b3afcc430c3fe0742812fc91f9aa911c39a",
            "filename": "third_party/xla/WORKSPACE",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a3fad5d03e2b1d6738a171f98f5b69e1103f05a6/third_party%2Fxla%2FWORKSPACE",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a3fad5d03e2b1d6738a171f98f5b69e1103f05a6/third_party%2Fxla%2FWORKSPACE",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2FWORKSPACE?ref=a3fad5d03e2b1d6738a171f98f5b69e1103f05a6",
            "patch": "@@ -9,10 +9,10 @@ load(\"//third_party:repo.bzl\", \"tf_http_archive\", \"tf_mirror_urls\")\n # Details: https://github.com/google-ml-infra/rules_ml_toolchain\n tf_http_archive(\n     name = \"rules_ml_toolchain\",\n-    sha256 = \"53905ede50e3eebc782266e20e9b9ac1d7166ef68b877bea593d3600dcfe03e6\",\n-    strip_prefix = \"rules_ml_toolchain-a1ff84835e407b41eef5fd1a865a23748c294db6\",\n+    sha256 = \"1c2c530a054e9e8b3c811ec21ed8a687fc865bec3abbc8ff65beb829b1d67ae4\",\n+    strip_prefix = \"rules_ml_toolchain-6734d2a174bf29e731d3f473743d1cc1a86100c3\",\n     urls = tf_mirror_urls(\n-        \"https://github.com/google-ml-infra/rules_ml_toolchain/archive/a1ff84835e407b41eef5fd1a865a23748c294db6.tar.gz\",\n+        \"https://github.com/google-ml-infra/rules_ml_toolchain/archive/6734d2a174bf29e731d3f473743d1cc1a86100c3.tar.gz\",\n     ),\n )\n "
        },
        {
            "sha": "38a7ef005f800dfb0560fd19373b62d0eaea0cf7",
            "filename": "third_party/xla/tensorflow.bazelrc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a3fad5d03e2b1d6738a171f98f5b69e1103f05a6/third_party%2Fxla%2Ftensorflow.bazelrc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a3fad5d03e2b1d6738a171f98f5b69e1103f05a6/third_party%2Fxla%2Ftensorflow.bazelrc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Ftensorflow.bazelrc?ref=a3fad5d03e2b1d6738a171f98f5b69e1103f05a6",
            "patch": "@@ -189,10 +189,11 @@ common:mkl_aarch64_threadpool -c opt\n # This is an alias for the mkl_aarch64_threadpool build.\n common:mkl_aarch64 --config=mkl_aarch64_threadpool\n \n-# Default CUDA, CUDNN and NVSHMEM versions.\n+# Default CUDA, CUDNN, NCCL and NVSHMEM versions.\n common:cuda_version --repo_env=HERMETIC_CUDA_VERSION=\"12.9.1\"\n common:cuda_version --repo_env=HERMETIC_CUDNN_VERSION=\"9.8.0\"\n common:cuda_version --repo_env=HERMETIC_NVSHMEM_VERSION=\"3.2.5\"\n+common:cuda_version --repo_env=HERMETIC_NCCL_VERSION=\"2.27.7\"\n \n # CUDA: This config refers to building CUDA op kernels with nvcc.\n common:cuda --repo_env TF_NEED_CUDA=1"
        },
        {
            "sha": "fa0212dfcea2eb8f3fd1ed5b924c39b56e07b4e8",
            "filename": "third_party/xla/workspace0.bzl",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a3fad5d03e2b1d6738a171f98f5b69e1103f05a6/third_party%2Fxla%2Fworkspace0.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a3fad5d03e2b1d6738a171f98f5b69e1103f05a6/third_party%2Fxla%2Fworkspace0.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fworkspace0.bzl?ref=a3fad5d03e2b1d6738a171f98f5b69e1103f05a6",
            "patch": "@@ -140,10 +140,10 @@ def workspace():\n     if \"rules_ml_toolchain\" not in native.existing_rules():\n         tf_http_archive(\n             name = \"rules_ml_toolchain\",\n-            sha256 = \"53905ede50e3eebc782266e20e9b9ac1d7166ef68b877bea593d3600dcfe03e6\",\n-            strip_prefix = \"rules_ml_toolchain-a1ff84835e407b41eef5fd1a865a23748c294db6\",\n+            sha256 = \"1c2c530a054e9e8b3c811ec21ed8a687fc865bec3abbc8ff65beb829b1d67ae4\",\n+            strip_prefix = \"rules_ml_toolchain-6734d2a174bf29e731d3f473743d1cc1a86100c3\",\n             urls = tf_mirror_urls(\n-                \"https://github.com/google-ml-infra/rules_ml_toolchain/archive/a1ff84835e407b41eef5fd1a865a23748c294db6.tar.gz\",\n+                \"https://github.com/google-ml-infra/rules_ml_toolchain/archive/6734d2a174bf29e731d3f473743d1cc1a86100c3.tar.gz\",\n             ),\n         )\n "
        }
    ],
    "stats": {
        "total": 21,
        "additions": 11,
        "deletions": 10
    }
}