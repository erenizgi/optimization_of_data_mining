{
    "author": "akuegel",
    "message": "[XLA:GPU] Add xla_h100 tag to lit test suite.\n\nThese tests actually don't need a GPU, but a GPU configured build. Choose an\narbitrary GPU type to avoid that the tests are needlessly run on multiple GPU\ntypes.\n\nPiperOrigin-RevId: 840123183",
    "sha": "a1408a94eeca1f069ea753d7458d6ec4232a174f",
    "files": [
        {
            "sha": "3f252f4653d64a3f0ac3571c3aaedec96c42a02b",
            "filename": "third_party/xla/xla/lit.bzl",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/a1408a94eeca1f069ea753d7458d6ec4232a174f/third_party%2Fxla%2Fxla%2Flit.bzl",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/a1408a94eeca1f069ea753d7458d6ec4232a174f/third_party%2Fxla%2Fxla%2Flit.bzl",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Flit.bzl?ref=a1408a94eeca1f069ea753d7458d6ec4232a174f",
            "patch": "@@ -228,7 +228,10 @@ def lit_test_suite_for_gpus(\n             tags_override,\n             hermetic_cuda_data_dir,\n             exec_properties,\n-            tags + [\"rocm-only\"] if gpu == \"mi200\" else [\"cuda-only\"],\n+            # We add the tag xla_h100 to avoid that the test suite is scheduled\n+            # on different GPU architectures. Technically these tests don't\n+            # need a GPU, but a build with GPU configured.\n+            tags + [\"rocm-only\"] if gpu == \"mi200\" else [\"cuda-only\", \"xla_h100\"],\n             \"_%s\" % (gpu),\n             **kwargs\n         )"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}