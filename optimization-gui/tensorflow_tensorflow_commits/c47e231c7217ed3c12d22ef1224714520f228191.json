{
    "author": "felixwqp",
    "message": "Retain the `frontend_attributes` in ragged-all-to-all in `RaggedAllToAllCanonicalizer`.\n\nPiperOrigin-RevId: 834301585",
    "sha": "c47e231c7217ed3c12d22ef1224714520f228191",
    "files": [
        {
            "sha": "ce47d5d64279f2c6477b48da6fcd89eca732c0cc",
            "filename": "third_party/xla/xla/service/gpu/transforms/ragged_all_to_all_canonicalizer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c47e231c7217ed3c12d22ef1224714520f228191/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fragged_all_to_all_canonicalizer.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c47e231c7217ed3c12d22ef1224714520f228191/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fragged_all_to_all_canonicalizer.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fragged_all_to_all_canonicalizer.cc?ref=c47e231c7217ed3c12d22ef1224714520f228191",
            "patch": "@@ -66,6 +66,8 @@ absl::StatusOr<bool> CanonicalizeRaggedAllToAll(\n           ragged_all_to_all->shape(), new_operands,\n           ragged_all_to_all->device_list(),\n           /*channel_id=*/ragged_all_to_all->channel_id()));\n+  new_ragged_all_to_all->set_frontend_attributes(\n+      ragged_all_to_all->frontend_attributes());\n   TF_RETURN_IF_ERROR(\n       ragged_all_to_all->ReplaceAllUsesWith(new_ragged_all_to_all));\n   TF_RETURN_IF_ERROR("
        },
        {
            "sha": "6c58f8bbf838528914480c5c30cea8199ca2afdb",
            "filename": "third_party/xla/xla/service/gpu/transforms/ragged_all_to_all_canonicalizer_test.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/c47e231c7217ed3c12d22ef1224714520f228191/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fragged_all_to_all_canonicalizer_test.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/c47e231c7217ed3c12d22ef1224714520f228191/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fragged_all_to_all_canonicalizer_test.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/third_party%2Fxla%2Fxla%2Fservice%2Fgpu%2Ftransforms%2Fragged_all_to_all_canonicalizer_test.cc?ref=c47e231c7217ed3c12d22ef1224714520f228191",
            "patch": "@@ -44,7 +44,7 @@ ENTRY main {\n   output_offsets = s32[2] parameter(4)\n   recv_sizes = s32[2] parameter(5)\n   ROOT ra2a = bf16[16] ragged-all-to-all(input, output, input_offsets,\n-    send_sizes, output_offsets, recv_sizes), replica_groups={{0,1}}\n+    send_sizes, output_offsets, recv_sizes), replica_groups={{0,1}}, frontend_attributes={_scheduling_group_id=\"0\",latency_metadata=\"150000\",sync_collective=\"false\"}\n }\n )\"));\n \n@@ -60,6 +60,8 @@ ENTRY main {\n   EXPECT_EQ(ragged_all_to_all->operand(3)->shape().element_type(), S64);\n   EXPECT_EQ(ragged_all_to_all->operand(4)->shape().element_type(), S64);\n   EXPECT_EQ(ragged_all_to_all->operand(5)->shape().element_type(), S64);\n+  EXPECT_TRUE(ragged_all_to_all->has_frontend_attributes());\n+  EXPECT_EQ(ragged_all_to_all->frontend_attributes().map().size(), 3);\n }\n \n TEST_F(RaggedAllToAllCanonicalizerTest, CanonicalRaggedAllToAllIsNotChanged) {"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}