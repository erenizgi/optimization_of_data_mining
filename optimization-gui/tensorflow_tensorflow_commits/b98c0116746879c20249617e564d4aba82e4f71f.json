{
    "author": "ezhulenev",
    "message": "[xla:jit] Avoid accidental ResourceHandle copy\n\nPiperOrigin-RevId: 806187517",
    "sha": "b98c0116746879c20249617e564d4aba82e4f71f",
    "files": [
        {
            "sha": "e33268c43c763b190592a47ccbed1e042e0ff4ce",
            "filename": "tensorflow/compiler/jit/variable_info_util.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/tensorflow/tensorflow/blob/b98c0116746879c20249617e564d4aba82e4f71f/tensorflow%2Fcompiler%2Fjit%2Fvariable_info_util.cc",
            "raw_url": "https://github.com/tensorflow/tensorflow/raw/b98c0116746879c20249617e564d4aba82e4f71f/tensorflow%2Fcompiler%2Fjit%2Fvariable_info_util.cc",
            "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/tensorflow%2Fcompiler%2Fjit%2Fvariable_info_util.cc?ref=b98c0116746879c20249617e564d4aba82e4f71f",
            "patch": "@@ -26,6 +26,7 @@ limitations under the License.\n #include \"absl/algorithm/container.h\"\n #include \"tensorflow/core/framework/op.h\"\n #include \"tensorflow/core/framework/op_kernel.h\"\n+#include \"tensorflow/core/framework/resource_handle.h\"\n #include \"tensorflow/core/framework/resource_mgr.h\"\n #include \"tensorflow/core/framework/tensor.h\"\n #include \"tensorflow/core/lib/core/errors.h\"\n@@ -57,7 +58,7 @@ absl::Status GetVariableInfosFromInputs(ResourceMgr* rm, DeviceBase* dev,\n                                      var_idx,\n                                      \" to GetVariableInfosFromInputs.\");\n     }\n-    ResourceHandle handle = inputs[var_idx]->flat<ResourceHandle>()(0);\n+    const ResourceHandle& handle = inputs[var_idx]->flat<ResourceHandle>()(0);\n     if (handle.device() != dev->attributes().name()) {\n       std::string definition_location =\n           DefinitionLocationMsg(handle.definition_stack_trace());"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}