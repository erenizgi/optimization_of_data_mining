{
    "author": "BridgeAR",
    "message": "buffer: improve write(U)Int functions\n\nThis improves the performance of some write functions by around 5-15%.\n\nPR-URL: https://github.com/nodejs/node/pull/19289\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "f4e5f969baba15a566bb30a1ba11e64fe61470a5",
    "files": [
        {
            "sha": "297059c1926fc83afdb5e7e28897dce28715cdcf",
            "filename": "benchmark/buffers/buffer-write.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/f4e5f969baba15a566bb30a1ba11e64fe61470a5/benchmark%2Fbuffers%2Fbuffer-write.js",
            "raw_url": "https://github.com/nodejs/node/raw/f4e5f969baba15a566bb30a1ba11e64fe61470a5/benchmark%2Fbuffers%2Fbuffer-write.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fbuffers%2Fbuffer-write.js?ref=f4e5f969baba15a566bb30a1ba11e64fe61470a5",
            "patch": "@@ -34,6 +34,7 @@ const INT32 = 0x7fffffff;\n const INT48 = 0x7fffffffffff;\n const UINT8 = 0xff;\n const UINT16 = 0xffff;\n+const UINT32 = 0xffffffff;\n \n const mod = {\n   writeInt8: INT8,\n@@ -44,8 +45,8 @@ const mod = {\n   writeUInt8: UINT8,\n   writeUInt16BE: UINT16,\n   writeUInt16LE: UINT16,\n-  writeUInt32BE: INT32,\n-  writeUInt32LE: INT32,\n+  writeUInt32BE: UINT32,\n+  writeUInt32LE: UINT32,\n   writeUIntLE: INT8,\n   writeUIntBE: INT16,\n   writeIntLE: INT32,"
        },
        {
            "sha": "2c65194bfa00cce9761905ab235412ba393d8a5b",
            "filename": "lib/internal/buffer.js",
            "status": "modified",
            "additions": 52,
            "deletions": 30,
            "changes": 82,
            "blob_url": "https://github.com/nodejs/node/blob/f4e5f969baba15a566bb30a1ba11e64fe61470a5/lib%2Finternal%2Fbuffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/f4e5f969baba15a566bb30a1ba11e64fe61470a5/lib%2Finternal%2Fbuffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbuffer.js?ref=f4e5f969baba15a566bb30a1ba11e64fe61470a5",
            "patch": "@@ -481,9 +481,12 @@ function writeU_Int48LE(buf, value, offset, min, max) {\n \n   const newVal = Math.floor(value * 2 ** -32);\n   buf[offset++] = value;\n-  buf[offset++] = (value >>> 8);\n-  buf[offset++] = (value >>> 16);\n-  buf[offset++] = (value >>> 24);\n+  value = value >>> 8;\n+  buf[offset++] = value;\n+  value = value >>> 8;\n+  buf[offset++] = value;\n+  value = value >>> 8;\n+  buf[offset++] = value;\n   buf[offset++] = newVal;\n   buf[offset++] = (newVal >>> 8);\n   return offset;\n@@ -495,9 +498,12 @@ function writeU_Int40LE(buf, value, offset, min, max) {\n \n   const newVal = value;\n   buf[offset++] = value;\n-  buf[offset++] = (value >>> 8);\n-  buf[offset++] = (value >>> 16);\n-  buf[offset++] = (value >>> 24);\n+  value = value >>> 8;\n+  buf[offset++] = value;\n+  value = value >>> 8;\n+  buf[offset++] = value;\n+  value = value >>> 8;\n+  buf[offset++] = value;\n   buf[offset++] = Math.floor(newVal * 2 ** -32);\n   return offset;\n }\n@@ -507,9 +513,12 @@ function writeU_Int32LE(buf, value, offset, min, max) {\n   checkInt(value, min, max, buf, offset, 3);\n \n   buf[offset++] = value;\n-  buf[offset++] = (value >>> 8);\n-  buf[offset++] = (value >>> 16);\n-  buf[offset++] = (value >>> 24);\n+  value = value >>> 8;\n+  buf[offset++] = value;\n+  value = value >>> 8;\n+  buf[offset++] = value;\n+  value = value >>> 8;\n+  buf[offset++] = value;\n   return offset;\n }\n \n@@ -522,8 +531,10 @@ function writeU_Int24LE(buf, value, offset, min, max) {\n   checkInt(value, min, max, buf, offset, 2);\n \n   buf[offset++] = value;\n-  buf[offset++] = (value >>> 8);\n-  buf[offset++] = (value >>> 16);\n+  value = value >>> 8;\n+  buf[offset++] = value;\n+  value = value >>> 8;\n+  buf[offset++] = value;\n   return offset;\n }\n \n@@ -582,34 +593,43 @@ function writeU_Int48BE(buf, value, offset, min, max) {\n   const newVal = Math.floor(value * 2 ** -32);\n   buf[offset++] = (newVal >>> 8);\n   buf[offset++] = newVal;\n-  buf[offset++] = (value >>> 24);\n-  buf[offset++] = (value >>> 16);\n-  buf[offset++] = (value >>> 8);\n-  buf[offset++] = value;\n-  return offset;\n+  buf[offset + 3] = value;\n+  value = value >>> 8;\n+  buf[offset + 2] = value;\n+  value = value >>> 8;\n+  buf[offset + 1] = value;\n+  value = value >>> 8;\n+  buf[offset] = value;\n+  return offset + 4;\n }\n \n function writeU_Int40BE(buf, value, offset, min, max) {\n   value = +value;\n   checkInt(value, min, max, buf, offset, 4);\n \n   buf[offset++] = Math.floor(value * 2 ** -32);\n-  buf[offset++] = (value >>> 24);\n-  buf[offset++] = (value >>> 16);\n-  buf[offset++] = (value >>> 8);\n-  buf[offset++] = value;\n-  return offset;\n+  buf[offset + 3] = value;\n+  value = value >>> 8;\n+  buf[offset + 2] = value;\n+  value = value >>> 8;\n+  buf[offset + 1] = value;\n+  value = value >>> 8;\n+  buf[offset] = value;\n+  return offset + 4;\n }\n \n function writeU_Int32BE(buf, value, offset, min, max) {\n   value = +value;\n   checkInt(value, min, max, buf, offset, 3);\n \n-  buf[offset++] = (value >>> 24);\n-  buf[offset++] = (value >>> 16);\n-  buf[offset++] = (value >>> 8);\n-  buf[offset++] = value;\n-  return offset;\n+  buf[offset + 3] = value;\n+  value = value >>> 8;\n+  buf[offset + 2] = value;\n+  value = value >>> 8;\n+  buf[offset + 1] = value;\n+  value = value >>> 8;\n+  buf[offset] = value;\n+  return offset + 4;\n }\n \n function writeUInt32BE(value, offset) {\n@@ -620,10 +640,12 @@ function writeU_Int24BE(buf, value, offset, min, max) {\n   value = +value;\n   checkInt(value, min, max, buf, offset, 2);\n \n-  buf[offset++] = (value >>> 16);\n-  buf[offset++] = (value >>> 8);\n-  buf[offset++] = value;\n-  return offset;\n+  buf[offset + 2] = value;\n+  value = value >>> 8;\n+  buf[offset + 1] = value;\n+  value = value >>> 8;\n+  buf[offset] = value;\n+  return offset + 3;\n }\n \n function writeU_Int16BE(buf, value, offset, min, max) {"
        }
    ],
    "stats": {
        "total": 87,
        "additions": 55,
        "deletions": 32
    }
}