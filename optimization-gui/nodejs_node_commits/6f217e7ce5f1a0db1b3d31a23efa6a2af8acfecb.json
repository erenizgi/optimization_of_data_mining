{
    "author": "addaleax",
    "message": "src: turn ROUND_UP into an inline function\n\nPR-URL: https://github.com/nodejs/node/pull/25743\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>",
    "sha": "6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb",
    "files": [
        {
            "sha": "4e19432efbd3d664b98b6e4501682f789b186cff",
            "filename": "src/node_http2.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb/src%2Fnode_http2.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb/src%2Fnode_http2.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http2.cc?ref=6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb",
            "patch": "@@ -382,7 +382,7 @@ Headers::Headers(Isolate* isolate,\n                                  header_string_len);\n   // Make sure the start address is aligned appropriately for an nghttp2_nv*.\n   char* start = reinterpret_cast<char*>(\n-      ROUND_UP(reinterpret_cast<uintptr_t>(*buf_), alignof(nghttp2_nv)));\n+      RoundUp(reinterpret_cast<uintptr_t>(*buf_), alignof(nghttp2_nv)));\n   char* header_contents = start + (count_ * sizeof(nghttp2_nv));\n   nghttp2_nv* const nva = reinterpret_cast<nghttp2_nv*>(start);\n \n@@ -438,8 +438,8 @@ Origins::Origins(Isolate* isolate,\n \n   // Make sure the start address is aligned appropriately for an nghttp2_nv*.\n   char* start = reinterpret_cast<char*>(\n-      ROUND_UP(reinterpret_cast<uintptr_t>(*buf_),\n-               alignof(nghttp2_origin_entry)));\n+      RoundUp(reinterpret_cast<uintptr_t>(*buf_),\n+              alignof(nghttp2_origin_entry)));\n   char* origin_contents = start + (count_ * sizeof(nghttp2_origin_entry));\n   nghttp2_origin_entry* const nva =\n       reinterpret_cast<nghttp2_origin_entry*>(start);"
        },
        {
            "sha": "749e628fbdfe9a3cb73bb4255533943f8d0627e3",
            "filename": "src/spawn_sync.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb/src%2Fspawn_sync.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb/src%2Fspawn_sync.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fspawn_sync.cc?ref=6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb",
            "patch": "@@ -1051,7 +1051,7 @@ Maybe<int> SyncProcessRunner::CopyJsStringArray(Local<Value> js_value,\n     Maybe<size_t> maybe_size = StringBytes::StorageSize(isolate, value, UTF8);\n     if (maybe_size.IsNothing()) return Nothing<int>();\n     data_size += maybe_size.FromJust() + 1;\n-    data_size = ROUND_UP(data_size, sizeof(void*));\n+    data_size = RoundUp(data_size, sizeof(void*));\n   }\n \n   buffer = new char[list_size + data_size];\n@@ -1068,7 +1068,7 @@ Maybe<int> SyncProcessRunner::CopyJsStringArray(Local<Value> js_value,\n                                       value,\n                                       UTF8);\n     buffer[data_offset++] = '\\0';\n-    data_offset = ROUND_UP(data_offset, sizeof(void*));\n+    data_offset = RoundUp(data_offset, sizeof(void*));\n   }\n \n   list[length] = nullptr;"
        },
        {
            "sha": "f3a174821ab882de986e944f495673ba3dc70244",
            "filename": "src/util.h",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb/src%2Futil.h",
            "raw_url": "https://github.com/nodejs/node/raw/6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb/src%2Futil.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Futil.h?ref=6f217e7ce5f1a0db1b3d31a23efa6a2af8acfecb",
            "patch": "@@ -617,9 +617,11 @@ constexpr size_t arraysize(const T (&)[N]) {\n   return N;\n }\n \n-#ifndef ROUND_UP\n-#define ROUND_UP(a, b) ((a) % (b) ? ((a) + (b)) - ((a) % (b)) : (a))\n-#endif\n+// Round up a to the next highest multiple of b.\n+template <typename T>\n+constexpr T RoundUp(T a, T b) {\n+  return a % b != 0 ? a + b - (a % b) : a;\n+}\n \n #ifdef __GNUC__\n #define MUST_USE_RESULT __attribute__((warn_unused_result))"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 10,
        "deletions": 8
    }
}