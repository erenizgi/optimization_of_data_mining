{
    "author": "joyeecheung",
    "message": "test: pull html/webappapis/timers WPT\n\nUsing\n\n```\ngit node wpt html/webappapis/timers\n```\n\nPR-URL: https://github.com/nodejs/node/pull/25618\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "476531ba42a4ba09464132ece951e85af8d01e1a",
    "files": [
        {
            "sha": "51450f918bd1b88d717f826b678ed23b2455838e",
            "filename": "test/fixtures/wpt/README.md",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwpt%2FREADME.md?ref=476531ba42a4ba09464132ece951e85af8d01e1a",
            "patch": "@@ -16,6 +16,7 @@ Last update:\n - resources: https://github.com/web-platform-tests/wpt/tree/679a364421/resources\n - interfaces: https://github.com/web-platform-tests/wpt/tree/712c9f275e/interfaces\n - html/webappapis/microtask-queuing: https://github.com/web-platform-tests/wpt/tree/0c3bed38df/html/webappapis/microtask-queuing\n+- html/webappapis/timers: https://github.com/web-platform-tests/wpt/tree/ddfe9c089b/html/webappapis/timers\n \n [Web Platform Tests]: https://github.com/web-platform-tests/wpt\n [`git node wpt`]: https://github.com/nodejs/node-core-utils/blob/master/docs/git-node.md#git-node-wpt"
        },
        {
            "sha": "77a8746908d74257e27ef6f936a0266bb4298a44",
            "filename": "test/fixtures/wpt/html/webappapis/timers/evil-spec-example.html",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fevil-spec-example.html",
            "raw_url": "https://github.com/nodejs/node/raw/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fevil-spec-example.html",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fevil-spec-example.html?ref=476531ba42a4ba09464132ece951e85af8d01e1a",
            "patch": "@@ -0,0 +1,23 @@\n+<!doctype html>\n+<title>Interaction of setTimeout and WebIDL</title>\n+<link rel=\"author\" title=\"Ian Hickson\" href=\"mailto:ian@hixie.ch\">\n+<link rel=\"author\" title=\"Ms2ger\" href=\"mailto:ms2ger@gmail.com\">\n+<link rel=\"help\" href=\"https://html.spec.whatwg.org/multipage/#dom-windowtimers-settimeout\">\n+<link rel=\"help\" href=\"https://heycam.github.io/webidl/#es-operations\">\n+<script src=\"/resources/testharness.js\"></script>\n+<script src=\"/resources/testharnessreport.js\"></script>\n+<div id=\"log\"></div>\n+<script>\n+var t = async_test()\n+function finishTest() {\n+  assert_equals(log, \"ONE TWO \")\n+  t.done()\n+}\n+var log = '';\n+function logger(s) { log += s + ' '; }\n+\n+setTimeout({ toString: function () {\n+  setTimeout(\"logger('ONE')\", 100);\n+  return \"logger('TWO'); t.step(finishTest)\";\n+} }, 100);\n+</script>"
        },
        {
            "sha": "33a1cc073c8c1f7ebfaa7edc32a65293a1a5f713",
            "filename": "test/fixtures/wpt/html/webappapis/timers/missing-timeout-setinterval.any.js",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fmissing-timeout-setinterval.any.js",
            "raw_url": "https://github.com/nodejs/node/raw/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fmissing-timeout-setinterval.any.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fmissing-timeout-setinterval.any.js?ref=476531ba42a4ba09464132ece951e85af8d01e1a",
            "patch": "@@ -0,0 +1,34 @@\n+function timeout_trampoline(t, timeout, message) {\n+  t.step_timeout(function() {\n+    // Yield in case we managed to be called before the second interval callback.\n+    t.step_timeout(function() {\n+      assert_unreached(message);\n+    }, timeout);\n+  }, timeout);\n+}\n+\n+async_test(function(t) {\n+  let ctr = 0;\n+  let h = setInterval(t.step_func(function() {\n+    if (++ctr == 2) {\n+      clearInterval(h);\n+      t.done();\n+      return;\n+    }\n+  }) /* no interval */);\n+\n+  timeout_trampoline(t, 100, \"Expected setInterval callback to be called two times\");\n+}, \"Calling setInterval with no interval should be the same as if called with 0 interval\");\n+\n+async_test(function(t) {\n+  let ctr = 0;\n+  let h = setInterval(t.step_func(function() {\n+    if (++ctr == 2) {\n+      clearInterval(h);\n+      t.done();\n+      return;\n+    }\n+  }),  undefined);\n+\n+  timeout_trampoline(t, 100, \"Expected setInterval callback to be called two times\");\n+}, \"Calling setInterval with undefined interval should be the same as if called with 0 interval\");"
        },
        {
            "sha": "430d13c58aab69b4a57317bbfc9acfec7a6e3ab1",
            "filename": "test/fixtures/wpt/html/webappapis/timers/negative-setinterval.html",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fnegative-setinterval.html",
            "raw_url": "https://github.com/nodejs/node/raw/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fnegative-setinterval.html",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fnegative-setinterval.html?ref=476531ba42a4ba09464132ece951e85af8d01e1a",
            "patch": "@@ -0,0 +1,17 @@\n+<!doctype html>\n+<title>Negative timeout in setInterval</title>\n+<script src=\"/resources/testharness.js\"></script>\n+<script src=\"/resources/testharnessreport.js\"></script>\n+<script>\n+var i = 0;\n+var interval;\n+function next() {\n+  i++;\n+  if (i === 20) {\n+    clearInterval(interval);\n+    done();\n+  }\n+}\n+setTimeout(assert_unreached, 1000);\n+interval = setInterval(next, -100);\n+</script>"
        },
        {
            "sha": "57e88ee701d80714098b6c710aa661048dbe2182",
            "filename": "test/fixtures/wpt/html/webappapis/timers/negative-settimeout.html",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fnegative-settimeout.html",
            "raw_url": "https://github.com/nodejs/node/raw/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fnegative-settimeout.html",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Fnegative-settimeout.html?ref=476531ba42a4ba09464132ece951e85af8d01e1a",
            "patch": "@@ -0,0 +1,8 @@\n+<!doctype html>\n+<title>Negative timeout in setTimeout</title>\n+<script src=\"/resources/testharness.js\"></script>\n+<script src=\"/resources/testharnessreport.js\"></script>\n+<script>\n+ setTimeout(done, -100);\n+ setTimeout(assert_unreached, 10);\n+</script>"
        },
        {
            "sha": "af0299599846680f1fa4106c5f3f6a2fe26d0e1e",
            "filename": "test/fixtures/wpt/html/webappapis/timers/type-long-setinterval.html",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Ftype-long-setinterval.html",
            "raw_url": "https://github.com/nodejs/node/raw/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Ftype-long-setinterval.html",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Ftype-long-setinterval.html?ref=476531ba42a4ba09464132ece951e85af8d01e1a",
            "patch": "@@ -0,0 +1,13 @@\n+<!doctype html>\n+<title>Type long timeout for setInterval</title>\n+<script src=\"/resources/testharness.js\"></script>\n+<script src=\"/resources/testharnessreport.js\"></script>\n+<script>\n+var interval;\n+function next() {\n+  clearInterval(interval);\n+  done();\n+}\n+interval = setInterval(next, Math.pow(2, 32));\n+setTimeout(assert_unreached, 100);\n+</script>"
        },
        {
            "sha": "31fa4f1264211e050864147db24216465e1ac62f",
            "filename": "test/fixtures/wpt/html/webappapis/timers/type-long-settimeout.html",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Ftype-long-settimeout.html",
            "raw_url": "https://github.com/nodejs/node/raw/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Ftype-long-settimeout.html",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwpt%2Fhtml%2Fwebappapis%2Ftimers%2Ftype-long-settimeout.html?ref=476531ba42a4ba09464132ece951e85af8d01e1a",
            "patch": "@@ -0,0 +1,8 @@\n+<!doctype html>\n+<title>Type long timeout for setTimeout</title>\n+<script src=\"/resources/testharness.js\"></script>\n+<script src=\"/resources/testharnessreport.js\"></script>\n+<script>\n+setTimeout(done, Math.pow(2, 32));\n+setTimeout(assert_unreached, 100);\n+</script>"
        },
        {
            "sha": "7bd65d90237370c255871259417de440f01f2ead",
            "filename": "test/fixtures/wpt/versions.json",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fversions.json",
            "raw_url": "https://github.com/nodejs/node/raw/476531ba42a4ba09464132ece951e85af8d01e1a/test%2Ffixtures%2Fwpt%2Fversions.json",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwpt%2Fversions.json?ref=476531ba42a4ba09464132ece951e85af8d01e1a",
            "patch": "@@ -22,5 +22,9 @@\n   \"html/webappapis/microtask-queuing\": {\n     \"commit\": \"0c3bed38df6d9dcd1441873728fb5c1bb59c92df\",\n     \"path\": \"html/webappapis/microtask-queuing\"\n+  },\n+  \"html/webappapis/timers\": {\n+    \"commit\": \"ddfe9c089bab565a9d3aa37bdef63d8012c1a94c\",\n+    \"path\": \"html/webappapis/timers\"\n   }\n }\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 108,
        "additions": 108,
        "deletions": 0
    }
}