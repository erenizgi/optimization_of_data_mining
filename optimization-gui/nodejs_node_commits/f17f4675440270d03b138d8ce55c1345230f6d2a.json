{
    "author": "danbev",
    "message": "build,test: guard eslint with crypto check\n\nCurrently, configuring --without-ssl will cause the lint-js target to\nfail with the following error:\n$ make lint-js\nRunning JS linter...\ninternal/util.js:101\n    throw new ERR_NO_CRYPTO();\n    ^\n\nError [ERR_NO_CRYPTO]:\nNode.js is not compiled with OpenSSL crypto support\nat assertCrypto (internal/util.js:101:11)\nat crypto.js:31:1\n...\n(/node/tools/node_modules/eslint/node_modules/file-entry-cache/\ncache.js:2:14)\nat Module._compile (internal/modules/cjs/loader.js:746:30)\nat Object.Module._extensions..js (internal/modules/cjs/loader.js:757:10)\nmake: *** [lint-js] Error 1\n\nThere are also a number of tests that are affected in a similar way.\n\nThis commit adds crypto checks to allow for lint-js and the affected\ntests to be skipped when configured --without-ssl.\n\nPR-URL: https://github.com/nodejs/node/pull/26182\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "f17f4675440270d03b138d8ce55c1345230f6d2a",
    "files": [
        {
            "sha": "3d8ef4dc5764bba4d6ed5bad3cc03a2045c3be86",
            "filename": "Makefile",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1184,8 +1184,12 @@ lint-js-fix:\n # Note that on the CI `lint-js-ci` is run instead.\n # Lints the JavaScript code with eslint.\n lint-js:\n-\t@echo \"Running JS linter...\"\n-\t@$(call available-node,$(run-lint-js))\n+\t@if [ \"$(shell $(node_use_openssl))\" != \"true\" ]; then \\\n+\t\techo \"Skipping $@ (no crypto)\"; \\\n+\telse \\\n+\t\techo \"Running JS linter...\"; \\\n+\t\t$(call available-node,$(run-lint-js)) \\\n+\tfi\n \n jslint: lint-js\n \t@echo \"Please use lint-js instead of jslint\""
        },
        {
            "sha": "a9bc26d7f0540a36ff923d5cdf214a9a97a17ce5",
            "filename": "test/parallel/test-eslint-alphabetize-errors.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-alphabetize-errors.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-alphabetize-errors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-alphabetize-errors.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;"
        },
        {
            "sha": "0a973f4c9c951da9036d87c249aa1ba23c1a4b1e",
            "filename": "test/parallel/test-eslint-crypto-check.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-crypto-check.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-crypto-check.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-crypto-check.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "a047ecd35847e023ba0fa9024c256b9aafb4aa29",
            "filename": "test/parallel/test-eslint-documented-errors.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-documented-errors.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-documented-errors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-documented-errors.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;"
        },
        {
            "sha": "5932fac48e0991754acbfbaa4fcd14bb9aea6be0",
            "filename": "test/parallel/test-eslint-duplicate-requires.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-duplicate-requires.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-duplicate-requires.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-duplicate-requires.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "c1ee3d501f0eec6f19ea8cadcc46c922ce485b64",
            "filename": "test/parallel/test-eslint-eslint-check.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-eslint-check.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-eslint-check.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-eslint-check.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "cf9f60e94505b8ff21eed98ff0f3bf22936b7d7c",
            "filename": "test/parallel/test-eslint-inspector-check.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-inspector-check.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-inspector-check.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-inspector-check.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;"
        },
        {
            "sha": "11cba8f3f8e697148d2e4255c1f1e8fe31fe6cc9",
            "filename": "test/parallel/test-eslint-lowercase-name-for-primitive.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-lowercase-name-for-primitive.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-lowercase-name-for-primitive.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-lowercase-name-for-primitive.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "3afabf72f54dcb0e39f91971e97cac8a376af4b3",
            "filename": "test/parallel/test-eslint-no-let-in-for-declaration.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-no-let-in-for-declaration.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-no-let-in-for-declaration.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-no-let-in-for-declaration.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "69600d80731302fd829744c93b4e37f67035418f",
            "filename": "test/parallel/test-eslint-no-unescaped-regexp-dot.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-no-unescaped-regexp-dot.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-no-unescaped-regexp-dot.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-no-unescaped-regexp-dot.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "73359be3bcd37faf5ca58432c086055323d5cec6",
            "filename": "test/parallel/test-eslint-number-isnan.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-number-isnan.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-number-isnan.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-number-isnan.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "342459f0b77ce4f995f0f60e89aadbf645b1dd34",
            "filename": "test/parallel/test-eslint-prefer-assert-iferror.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-assert-iferror.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-assert-iferror.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-assert-iferror.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "a5829cdce3054f5b57e96fc1bee03b9eadaaead7",
            "filename": "test/parallel/test-eslint-prefer-assert-methods.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-assert-methods.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-assert-methods.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-assert-methods.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "9829b2adb8ea2122bcca7b583e230d319f97f354",
            "filename": "test/parallel/test-eslint-prefer-common-expectserror.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-common-expectserror.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-common-expectserror.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-common-expectserror.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "dba244a2a9fa8917177c8c4dd42d16d510d86eb9",
            "filename": "test/parallel/test-eslint-prefer-common-mustnotcall.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-common-mustnotcall.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-common-mustnotcall.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-common-mustnotcall.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "762fec28b1f1d8a6cae1d79d665c99fdb568a2e9",
            "filename": "test/parallel/test-eslint-prefer-util-format-errors.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-util-format-errors.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-prefer-util-format-errors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-util-format-errors.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -3,6 +3,8 @@\n /* eslint-disable no-template-curly-in-string */\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "e0abd0c2d8d52427fc81c083d4454f1cc19ea2b1",
            "filename": "test/parallel/test-eslint-require-buffer.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-require-buffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-require-buffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-require-buffer.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        },
        {
            "sha": "6b2b0d95028d73b4d7fed1e50d0d4b9a755b538c",
            "filename": "test/parallel/test-eslint-required-modules.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-required-modules.js",
            "raw_url": "https://github.com/nodejs/node/raw/f17f4675440270d03b138d8ce55c1345230f6d2a/test%2Fparallel%2Ftest-eslint-required-modules.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-required-modules.js?ref=f17f4675440270d03b138d8ce55c1345230f6d2a",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n \n common.skipIfEslintMissing();\n "
        }
    ],
    "stats": {
        "total": 42,
        "additions": 40,
        "deletions": 2
    }
}