{
    "author": "BridgeAR",
    "message": "benchmark: refactor util benchmarks\n\nThis significantly reduces the benchmark runtime. It removes to many\nvariations that do not provide any benefit and reduces the iterations.\n\nPR-URL: https://github.com/nodejs/node/pull/22503\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: John-David Dalton <john.david.dalton@gmail.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
    "files": [
        {
            "sha": "2a4a20097c72d347fb6531177663f0417473aa00",
            "filename": "benchmark/util/format.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Fformat.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Fformat.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Fformat.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -16,7 +16,7 @@ const inputs = {\n };\n \n const bench = common.createBenchmark(main, {\n-  n: [4e6],\n+  n: [1e5],\n   type: Object.keys(inputs)\n });\n "
        },
        {
            "sha": "4fd73785f789d1d50e0f2c0a54fe0d5fa6a6e763",
            "filename": "benchmark/util/inspect-array.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Finspect-array.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Finspect-array.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Finspect-array.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -4,8 +4,8 @@ const common = require('../common');\n const util = require('util');\n \n const bench = common.createBenchmark(main, {\n-  n: [1e3],\n-  len: [1e5],\n+  n: [5e2],\n+  len: [1e2, 1e5],\n   type: [\n     'denseArray',\n     'sparseArray',"
        },
        {
            "sha": "3c82d50ac3c0ce4ef3bae7e6105edd34b207c610",
            "filename": "benchmark/util/inspect-proxy.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Finspect-proxy.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Finspect-proxy.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Finspect-proxy.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -3,7 +3,7 @@\n const util = require('util');\n const common = require('../common.js');\n \n-const bench = common.createBenchmark(main, { n: [1e6] });\n+const bench = common.createBenchmark(main, { n: [2e4] });\n \n function main({ n }) {\n   const proxyA = new Proxy({}, { get: () => {} });"
        },
        {
            "sha": "9ba3020fd0e55b415ef58d3189876fb5ca6dcc50",
            "filename": "benchmark/util/inspect.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Finspect.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Finspect.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Finspect.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -9,7 +9,7 @@ const opts = {\n   none: undefined\n };\n const bench = common.createBenchmark(main, {\n-  n: [2e6],\n+  n: [2e4],\n   method: [\n     'Object',\n     'Object_empty',\n@@ -81,7 +81,7 @@ function main({ method, n, option }) {\n       benchmark(n, new Error('error'), options);\n       break;\n     case 'Array':\n-      benchmark(n, Array(20).fill().map((_, i) => i), options);\n+      benchmark(n, Array(50).fill().map((_, i) => i), options);\n       break;\n     case 'TypedArray':\n       obj = new Uint8Array(Array(50).fill().map((_, i) => i));"
        },
        {
            "sha": "47c8bce277cf3d8436e9f096a0a80825486829f8",
            "filename": "benchmark/util/normalize-encoding.js",
            "status": "modified",
            "additions": 9,
            "deletions": 20,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Fnormalize-encoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Fnormalize-encoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Fnormalize-encoding.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -5,26 +5,23 @@ const assert = require('assert');\n \n const groupedInputs = {\n   group_common: ['undefined', 'utf8', 'utf-8', 'base64',\n-                 'binary', 'latin1', 'ucs-2'],\n-  group_upper: ['UTF-8', 'UTF8', 'UCS2', 'UTF-16LE',\n-                'UTF16LE', 'BASE64', 'UCS-2'],\n-  group_uncommon: ['foo', '1', 'false', 'undefined', '[]', '{}'],\n+                 'binary', 'latin1', 'ucs2'],\n+  group_upper: ['UTF-8', 'UTF8', 'UCS2',\n+                'UTF16LE', 'BASE64', 'UCS2'],\n+  group_uncommon: ['foo'],\n   group_misc: ['', 'utf16le', 'hex', 'HEX', 'BINARY']\n };\n \n const inputs = [\n-  '',\n-  'utf8', 'utf-8', 'UTF-8',\n-  'UTF8', 'Utf8', 'uTf-8', 'utF-8',\n-  'ucs2', 'UCS2', 'UcS2',\n-  'ucs-2', 'UCS-2', 'UcS-2',\n-  'utf16le', 'utf-16le', 'UTF-16LE', 'UTF16LE',\n+  '', 'utf8', 'utf-8', 'UTF-8', 'UTF8', 'Utf8',\n+  'ucs2', 'UCS2', 'utf16le', 'UTF16LE',\n   'binary', 'BINARY', 'latin1', 'base64', 'BASE64',\n-  'hex', 'HEX', 'foo', '1', 'false', 'undefined', '[]', '{}'];\n+  'hex', 'HEX', 'foo', 'undefined'\n+];\n \n const bench = common.createBenchmark(main, {\n   input: inputs.concat(Object.keys(groupedInputs)),\n-  n: [1e7]\n+  n: [1e5]\n }, {\n   flags: '--expose-internals'\n });\n@@ -39,16 +36,8 @@ function getInput(input) {\n       return groupedInputs.group_uncommon;\n     case 'group_misc':\n       return groupedInputs.group_misc;\n-    case '1':\n-      return [1];\n-    case 'false':\n-      return [false];\n     case 'undefined':\n       return [undefined];\n-    case '[]':\n-      return [[]];\n-    case '{}':\n-      return [{}];\n     default:\n       return [input];\n   }"
        },
        {
            "sha": "9cff7cbbacba84f6d0bbc574735419e81415580a",
            "filename": "benchmark/util/priority-queue.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Fpriority-queue.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Fpriority-queue.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Fpriority-queue.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -3,7 +3,7 @@\n const common = require('../common');\n \n const bench = common.createBenchmark(main, {\n-  n: [1e6]\n+  n: [1e5]\n }, { flags: ['--expose-internals'] });\n \n function main({ n, type }) {"
        },
        {
            "sha": "4ca7c8564d3fc431ffaf25c28e32b57c38893a76",
            "filename": "benchmark/util/splice-one.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Fsplice-one.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Fsplice-one.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Fsplice-one.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -3,7 +3,7 @@\n const common = require('../common');\n \n const bench = common.createBenchmark(main, {\n-  n: [1e7],\n+  n: [1e5],\n   pos: ['start', 'middle', 'end'],\n   size: [10, 100, 500],\n }, { flags: ['--expose-internals'] });"
        },
        {
            "sha": "d9acdaedf5a57fece7265723be0589f8daf052a2",
            "filename": "benchmark/util/type-check.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Ftype-check.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/benchmark%2Futil%2Ftype-check.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Ftype-check.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -29,7 +29,7 @@ const bench = common.createBenchmark(main, {\n   type: Object.keys(args),\n   version: ['native', 'js'],\n   argument: ['true', 'false-primitive', 'false-object'],\n-  n: [5e6]\n+  n: [1e5]\n }, {\n   flags: ['--expose-internals']\n });"
        },
        {
            "sha": "97b02bbdeed5cd8dc294e7f5c43b16bf70013b34",
            "filename": "test/parallel/test-benchmark-util.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/test%2Fparallel%2Ftest-benchmark-util.js",
            "raw_url": "https://github.com/nodejs/node/raw/de33a5aa6ea357fb7c6fde7b75a024e16be88a47/test%2Fparallel%2Ftest-benchmark-util.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-benchmark-util.js?ref=de33a5aa6ea357fb7c6fde7b75a024e16be88a47",
            "patch": "@@ -13,5 +13,6 @@ runBenchmark('util',\n               'pos=start',\n               'size=1',\n               'type=',\n+              'len=1',\n               'version=native'],\n              { NODEJS_BENCHMARK_ZERO_ALLOWED: 1 });"
        }
    ],
    "stats": {
        "total": 48,
        "additions": 19,
        "deletions": 29
    }
}