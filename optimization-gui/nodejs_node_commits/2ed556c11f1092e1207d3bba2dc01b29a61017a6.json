{
    "author": "cjihrig",
    "message": "report: print libuv handle addresses as hex\n\nPR-URL: https://github.com/nodejs/node/pull/25910\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "2ed556c11f1092e1207d3bba2dc01b29a61017a6",
    "files": [
        {
            "sha": "a49d33d65e262be574eba98cb215c953718022b7",
            "filename": "doc/api/report.md",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/2ed556c11f1092e1207d3bba2dc01b29a61017a6/doc%2Fapi%2Freport.md",
            "raw_url": "https://github.com/nodejs/node/raw/2ed556c11f1092e1207d3bba2dc01b29a61017a6/doc%2Fapi%2Freport.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Freport.md?ref=2ed556c11f1092e1207d3bba2dc01b29a61017a6",
            "patch": "@@ -171,49 +171,49 @@ is provided below for reference.\n       \"type\": \"async\",\n       \"is_active\": true,\n       \"is_referenced\": false,\n-      \"address\": \"68090592\",\n+      \"address\": \"0x0000000102910900\",\n       \"details\": \"\"\n     },\n     {\n       \"type\": \"timer\",\n       \"is_active\": false,\n       \"is_referenced\": false,\n-      \"address\": \"140723513949920\",\n+      \"address\": \"0x00007fff5fbfeab0\",\n       \"details\": \"repeat: 0, timeout expired: 18075165916 ms ago\"\n     },\n     {\n       \"type\": \"check\",\n       \"is_active\": true,\n       \"is_referenced\": false,\n-      \"address\": \"140723513950072\",\n+      \"address\": \"0x00007fff5fbfeb48\",\n       \"details\": \"\"\n     },\n     {\n       \"type\": \"idle\",\n       \"is_active\": false,\n       \"is_referenced\": true,\n-      \"address\": \"140723513950192\",\n+      \"address\": \"0x00007fff5fbfebc0\",\n       \"details\": \"\"\n     },\n     {\n       \"type\": \"prepare\",\n       \"is_active\": false,\n       \"is_referenced\": false,\n-      \"address\": \"140723513950312\",\n+      \"address\": \"0x00007fff5fbfec38\",\n       \"details\": \"\"\n     },\n     {\n       \"type\": \"check\",\n       \"is_active\": false,\n       \"is_referenced\": false,\n-      \"address\": \"140723513950432\",\n+      \"address\": \"0x00007fff5fbfecb0\",\n       \"details\": \"\"\n     },\n     {\n       \"type\": \"async\",\n       \"is_active\": true,\n       \"is_referenced\": false,\n-      \"address\": \"39353856\",\n+      \"address\": \"0x000000010188f2e0\",\n       \"details\": \"\"\n     }\n   ],"
        },
        {
            "sha": "9b67dcf1c5b30527cc700b06bab1fbbe37b782dc",
            "filename": "src/node_report.h",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/2ed556c11f1092e1207d3bba2dc01b29a61017a6/src%2Fnode_report.h",
            "raw_url": "https://github.com/nodejs/node/raw/2ed556c11f1092e1207d3bba2dc01b29a61017a6/src%2Fnode_report.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_report.h?ref=2ed556c11f1092e1207d3bba2dc01b29a61017a6",
            "patch": "@@ -53,10 +53,12 @@ void GetNodeReport(v8::Isolate* isolate,\n                    v8::Local<v8::String> stackstr,\n                    std::ostream& out);\n \n-// Function declarations - utility functions in src/utilities.cc\n+// Function declarations - utility functions in src/node_report_utils.cc\n void ReportEndpoints(uv_handle_t* h, std::ostringstream& out);\n void WalkHandle(uv_handle_t* h, void* arg);\n std::string EscapeJsonChars(const std::string& str);\n+template <typename T>\n+std::string ValueToHexString(T value);\n \n // Function declarations - export functions in src/node_report_module.cc\n void TriggerReport(const v8::FunctionCallbackInfo<v8::Value>& info);"
        },
        {
            "sha": "d013eb916773232559bf6d17ac32a111a2f63903",
            "filename": "src/node_report_utils.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/2ed556c11f1092e1207d3bba2dc01b29a61017a6/src%2Fnode_report_utils.cc",
            "raw_url": "https://github.com/nodejs/node/raw/2ed556c11f1092e1207d3bba2dc01b29a61017a6/src%2Fnode_report_utils.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_report_utils.cc?ref=2ed556c11f1092e1207d3bba2dc01b29a61017a6",
            "patch": "@@ -209,11 +209,20 @@ void WalkHandle(uv_handle_t* h, void* arg) {\n   writer->json_keyvalue(\"is_active\", static_cast<bool>(uv_is_active(h)));\n   writer->json_keyvalue(\"is_referenced\", static_cast<bool>(uv_has_ref(h)));\n   writer->json_keyvalue(\"address\",\n-                        std::to_string(reinterpret_cast<int64_t>(h)));\n+                        ValueToHexString(reinterpret_cast<uint64_t>(h)));\n   writer->json_keyvalue(\"details\", data.str());\n   writer->json_end();\n }\n \n+template <typename T>\n+std::string ValueToHexString(T value) {\n+  std::stringstream hex;\n+\n+  hex << \"0x\" << std::setfill('0') << std::setw(sizeof(T) * 2) << std::hex <<\n+    value;\n+  return hex.str();\n+}\n+\n std::string EscapeJsonChars(const std::string& str) {\n   const std::string control_symbols[0x20] = {\n       \"\\\\u0000\", \"\\\\u0001\", \"\\\\u0002\", \"\\\\u0003\", \"\\\\u0004\", \"\\\\u0005\","
        }
    ],
    "stats": {
        "total": 29,
        "additions": 20,
        "deletions": 9
    }
}