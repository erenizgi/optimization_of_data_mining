{
    "author": "devsnek",
    "message": "test: clean up wasm fixtures\n\nPR-URL: https://github.com/nodejs/node/pull/25360\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "0c8dedd103f78e3f6f9cc907240b9beaabdf12c3",
    "files": [
        {
            "sha": "497b8440bd212e14fe51694b9c0e0fddf31f975f",
            "filename": "test/fixtures/shared-memory.wasm",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Ffixtures%2Fshared-memory.wasm",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Ffixtures%2Fshared-memory.wasm",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fshared-memory.wasm?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3"
        },
        {
            "sha": "9dbaf7fa7fe51b68bb97a3c3bd1a8ec42e38e169",
            "filename": "test/fixtures/shared-memory.wat",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Ffixtures%2Fshared-memory.wat",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Ffixtures%2Fshared-memory.wat",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fshared-memory.wat?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3",
            "patch": "@@ -0,0 +1,8 @@\n+;; Compiled using the WebAssembly Tootkit (https://github.com/WebAssembly/wabt)\n+;; $ wat2wasm --enable-threads shared-memory.wat -o shared-memory.wasm\n+\n+(module\n+  ;; Create shared memory with initial 1 page (64KiB) and max 1 page\n+  (memory $mem 1 1 shared)\n+  (export \"memory\" (memory $mem))\n+)\n\\ No newline at end of file"
        },
        {
            "sha": "357f72da7a0db8add83699082fd51d46bf3352fb",
            "filename": "test/fixtures/simple.wasm",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Ffixtures%2Fsimple.wasm",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Ffixtures%2Fsimple.wasm",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fsimple.wasm?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3"
        },
        {
            "sha": "e3026bffe5a3890497e1550ac1c17debe5d8349d",
            "filename": "test/fixtures/simple.wat",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Ffixtures%2Fsimple.wat",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Ffixtures%2Fsimple.wat",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fsimple.wat?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3",
            "patch": "@@ -0,0 +1,11 @@\n+;; Compiled using the WebAssembly Tootkit (https://github.com/WebAssembly/wabt)\n+;; $ wat2wasm simple.wat -o simple.wasm\n+\n+(module\n+  (func $add (param $a i32) (param $b i32) (result i32)\n+    ;; return $a + $b\n+    (i32.add (get_local $a) (get_local $b))\n+  )\n+\n+  (export \"add\" (func $add))\n+)"
        },
        {
            "sha": "da1b0330069de60ad944216d8fd1ba403dd3f761",
            "filename": "test/fixtures/test.wasm",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/9987f1abb92461af5b2da61befe7ce0c1ab19503/test%2Ffixtures%2Ftest.wasm",
            "raw_url": "https://github.com/nodejs/node/raw/9987f1abb92461af5b2da61befe7ce0c1ab19503/test%2Ffixtures%2Ftest.wasm",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Ftest.wasm?ref=9987f1abb92461af5b2da61befe7ce0c1ab19503"
        },
        {
            "sha": "fa90b17cce01556c0d97ed2ae8b1f53101932422",
            "filename": "test/fixtures/test.wat",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/9987f1abb92461af5b2da61befe7ce0c1ab19503/test%2Ffixtures%2Ftest.wat",
            "raw_url": "https://github.com/nodejs/node/raw/9987f1abb92461af5b2da61befe7ce0c1ab19503/test%2Ffixtures%2Ftest.wat",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Ftest.wat?ref=9987f1abb92461af5b2da61befe7ce0c1ab19503",
            "patch": "@@ -1,10 +0,0 @@\n-;; Compiled using the WebAssembly Tootkit (https://github.com/WebAssembly/wabt)\n-;; $ wat2wasm test.wat -o test.wasm\n-(module\n-  (func $add (export \"add\") (param $first i32) (param $second i32) (result i32)\n-    get_local $first\n-    get_local $second\n-    (i32.add)\n-  )\n-  (export \"addTwo\" (func $add))\n-)"
        },
        {
            "sha": "24b4d691058fd4f8987fb45e5ff5b9069ff1c36d",
            "filename": "test/fixtures/wasm-threads-shared-memory.wasm",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/9987f1abb92461af5b2da61befe7ce0c1ab19503/test%2Ffixtures%2Fwasm-threads-shared-memory.wasm",
            "raw_url": "https://github.com/nodejs/node/raw/9987f1abb92461af5b2da61befe7ce0c1ab19503/test%2Ffixtures%2Fwasm-threads-shared-memory.wasm",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwasm-threads-shared-memory.wasm?ref=9987f1abb92461af5b2da61befe7ce0c1ab19503"
        },
        {
            "sha": "68a2698df6564e951f2ca75c92e627d525ab1a8c",
            "filename": "test/fixtures/wasm-threads-shared-memory.wat",
            "status": "removed",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9987f1abb92461af5b2da61befe7ce0c1ab19503/test%2Ffixtures%2Fwasm-threads-shared-memory.wat",
            "raw_url": "https://github.com/nodejs/node/raw/9987f1abb92461af5b2da61befe7ce0c1ab19503/test%2Ffixtures%2Fwasm-threads-shared-memory.wat",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fwasm-threads-shared-memory.wat?ref=9987f1abb92461af5b2da61befe7ce0c1ab19503",
            "patch": "@@ -1,4 +0,0 @@\n-(module\n-  (memory $mem 1 2 shared)\n-  (export \"memory\" (memory $mem))\n-)\n\\ No newline at end of file"
        },
        {
            "sha": "19b265ca2a7c96df5c7b9ace821fe6b43ca78e37",
            "filename": "test/parallel/test-util-types.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-util-types.js",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-util-types.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util-types.js?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3",
            "patch": "@@ -9,7 +9,7 @@ const { internalBinding } = require('internal/test/binding');\n const { JSStream } = internalBinding('js_stream');\n \n const external = (new JSStream())._externalStream;\n-const wasmBuffer = fixtures.readSync('test.wasm');\n+const wasmBuffer = fixtures.readSync('simple.wasm');\n \n for (const [ value, _method ] of [\n   [ external, 'isExternal' ],"
        },
        {
            "sha": "def4914e2e4a3670d89b7d1471d02ff1db59a114",
            "filename": "test/parallel/test-v8-serdes.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-v8-serdes.js",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-v8-serdes.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-v8-serdes.js?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3",
            "patch": "@@ -12,7 +12,7 @@ const os = require('os');\n const circular = {};\n circular.circular = circular;\n \n-const wasmModule = new WebAssembly.Module(fixtures.readSync('test.wasm'));\n+const wasmModule = new WebAssembly.Module(fixtures.readSync('simple.wasm'));\n \n const objects = [\n   { foo: 'bar' },\n@@ -238,5 +238,5 @@ const deserializerTypeError =\n {\n   const deserializedWasmModule = v8.deserialize(v8.serialize(wasmModule));\n   const instance = new WebAssembly.Instance(deserializedWasmModule);\n-  assert.strictEqual(instance.exports.addTwo(10, 20), 30);\n+  assert.strictEqual(instance.exports.add(10, 20), 30);\n }"
        },
        {
            "sha": "f769925be91e72984c0112f6f3b0c92ef6725298",
            "filename": "test/parallel/test-wasm-simple.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-wasm-simple.js",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-wasm-simple.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-wasm-simple.js?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3",
            "patch": "@@ -4,14 +4,14 @@ require('../common');\n const assert = require('assert');\n const fixtures = require('../common/fixtures');\n \n-const buffer = fixtures.readSync('test.wasm');\n+const buffer = fixtures.readSync('simple.wasm');\n \n assert.ok(WebAssembly.validate(buffer), 'Buffer should be valid WebAssembly');\n \n WebAssembly.instantiate(buffer, {}).then((results) => {\n   // Exported function should add two numbers.\n   assert.strictEqual(\n-    results.instance.exports.addTwo(10, 20),\n+    results.instance.exports.add(10, 20),\n     30\n   );\n });"
        },
        {
            "sha": "922d8b11a30bfb97e74843b2f0391eb3163660f4",
            "filename": "test/parallel/test-worker-message-port-wasm-module.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-worker-message-port-wasm-module.js",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-worker-message-port-wasm-module.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-worker-message-port-wasm-module.js?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3",
            "patch": "@@ -5,13 +5,13 @@ const assert = require('assert');\n const fixtures = require('../common/fixtures');\n \n const { Worker } = require('worker_threads');\n-const wasmModule = new WebAssembly.Module(fixtures.readSync('test.wasm'));\n+const wasmModule = new WebAssembly.Module(fixtures.readSync('simple.wasm'));\n \n const worker = new Worker(`\n const { parentPort } = require('worker_threads');\n parentPort.once('message', ({ wasmModule }) => {\n   const instance = new WebAssembly.Instance(wasmModule);\n-  parentPort.postMessage(instance.exports.addTwo(10, 20));\n+  parentPort.postMessage(instance.exports.add(10, 20));\n });\n `, { eval: true });\n "
        },
        {
            "sha": "90b18cd759ff7dc0cea47a8d3492fa7b2f5b6712",
            "filename": "test/parallel/test-worker-message-port-wasm-threads.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-worker-message-port-wasm-threads.js",
            "raw_url": "https://github.com/nodejs/node/raw/0c8dedd103f78e3f6f9cc907240b9beaabdf12c3/test%2Fparallel%2Ftest-worker-message-port-wasm-threads.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-worker-message-port-wasm-threads.js?ref=0c8dedd103f78e3f6f9cc907240b9beaabdf12c3",
            "patch": "@@ -8,7 +8,7 @@ const { MessageChannel, Worker } = require('worker_threads');\n // through MessageChannels (without crashing).\n \n const fixtures = require('../common/fixtures');\n-const wasmSource = fixtures.readSync('wasm-threads-shared-memory.wasm');\n+const wasmSource = fixtures.readSync('shared-memory.wasm');\n const wasmModule = new WebAssembly.Module(wasmSource);\n const instance = new WebAssembly.Instance(wasmModule);\n "
        }
    ],
    "stats": {
        "total": 49,
        "additions": 27,
        "deletions": 22
    }
}