{
    "author": "unknown",
    "message": "build: add lint-py which uses flake8\n\nPR-URL: https://github.com/nodejs/node/pull/21952\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "0c39290201a81dc1e9acb65cae477e67f8cde919",
    "files": [
        {
            "sha": "88be22fcace3ecba9dad72ca6549a49f16ca293c",
            "filename": "Makefile",
            "status": "modified",
            "additions": 23,
            "deletions": 1,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/0c39290201a81dc1e9acb65cae477e67f8cde919/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/0c39290201a81dc1e9acb65cae477e67f8cde919/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=0c39290201a81dc1e9acb65cae477e67f8cde919",
            "patch": "@@ -1208,6 +1208,28 @@ lint-addon-docs: test/addons/.docbuildstamp\n cpplint: lint-cpp\n \t@echo \"Please use lint-cpp instead of cpplint\"\n \n+.PHONY: lint-py-build\n+# python -m pip install flake8\n+# Try with '--system' is to overcome systems that blindly set '--user'\n+lint-py-build:\n+\t@echo \"Pip installing flake8 linter on $(shell $(PYTHON) --version)...\"\n+\t$(PYTHON) -m pip install --upgrade -t tools/pip/site-packages flake8 || \\\n+\t\t$(PYTHON) -m pip install --upgrade --system -t tools/pip/site-packages flake8\n+\n+ifneq (\"\",\"$(wildcard tools/pip/site-packages)\")\n+.PHONY: lint-py\n+# Lints the Python code with flake8.\n+# Flag the build if there are Python syntax errors or undefined names\n+lint-py:\n+\tPYTHONPATH=tools/pip $(PYTHON) -m flake8 . \\\n+\t\t--count --show-source --statistics --select=E901,E999,F821,F822,F823 \\\n+\t\t--exclude=deps,lib,src,tools/*_macros.py,tools/gyp,tools/jinja2,tools/pip\n+else\n+lint-py:\n+\t@echo \"Python linting with flake8 is not avalible\"\n+\t@echo \"Run 'make lint-py-build'\"\n+endif\n+\n .PHONY: lint\n .PHONY: lint-ci\n ifneq (\"\",\"$(wildcard tools/node_modules/eslint/)\")\n@@ -1221,7 +1243,7 @@ lint: ## Run JS, C++, MD and doc linters.\n CONFLICT_RE=^>>>>>>> [0-9A-Fa-f]+|^<<<<<<< [A-Za-z]+\n \n # Related CI job: node-test-linter\n-lint-ci: lint-js-ci lint-cpp lint-md lint-addon-docs\n+lint-ci: lint-js-ci lint-cpp lint-py lint-md lint-addon-docs\n \t@if ! ( grep -IEqrs \"$(CONFLICT_RE)\" benchmark deps doc lib src test tools ) \\\n \t\t&& ! ( find . -maxdepth 1 -type f | xargs grep -IEqs \"$(CONFLICT_RE)\" ); then \\\n \t\texit 0 ; \\"
        },
        {
            "sha": "03eb26e01302fd7cc4b9adb102ed56f48fd2f0e2",
            "filename": "tools/pip/.gitignore",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0c39290201a81dc1e9acb65cae477e67f8cde919/tools%2Fpip%2F.gitignore",
            "raw_url": "https://github.com/nodejs/node/raw/0c39290201a81dc1e9acb65cae477e67f8cde919/tools%2Fpip%2F.gitignore",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fpip%2F.gitignore?ref=0c39290201a81dc1e9acb65cae477e67f8cde919",
            "patch": "@@ -0,0 +1,2 @@\n+*.pyc\n+site-packages\n\\ No newline at end of file"
        },
        {
            "sha": "aa8087c89896043300ae0884d2dcca479de46a47",
            "filename": "tools/pip/sitecustomize.py",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0c39290201a81dc1e9acb65cae477e67f8cde919/tools%2Fpip%2Fsitecustomize.py",
            "raw_url": "https://github.com/nodejs/node/raw/0c39290201a81dc1e9acb65cae477e67f8cde919/tools%2Fpip%2Fsitecustomize.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fpip%2Fsitecustomize.py?ref=0c39290201a81dc1e9acb65cae477e67f8cde919",
            "patch": "@@ -0,0 +1,3 @@\n+import os\n+import site\n+site.addsitedir(os.path.dirname(os.path.realpath(__file__)) + '/site-packages')"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 28,
        "deletions": 1
    }
}