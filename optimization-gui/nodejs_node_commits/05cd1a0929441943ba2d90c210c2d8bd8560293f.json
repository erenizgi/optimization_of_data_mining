{
    "author": "ofrobots",
    "message": "lib: requireStack property for MODULE_NOT_FOUND\n\nInclude the stack of requires that led to a MODULE_NOT_FOUND error.\n\nPR-URL: https://github.com/nodejs/node/pull/25690\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "05cd1a0929441943ba2d90c210c2d8bd8560293f",
    "files": [
        {
            "sha": "ca2beef2dd5fd67663a573679d7dd166967519cb",
            "filename": "doc/api/errors.md",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/05cd1a0929441943ba2d90c210c2d8bd8560293f/doc%2Fapi%2Ferrors.md",
            "raw_url": "https://github.com/nodejs/node/raw/05cd1a0929441943ba2d90c210c2d8bd8560293f/doc%2Fapi%2Ferrors.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Ferrors.md?ref=05cd1a0929441943ba2d90c210c2d8bd8560293f",
            "patch": "@@ -1964,7 +1964,12 @@ an `Error` with this code will be emitted.\n \n <a id=\"MODULE_NOT_FOUND\"></a>\n ### MODULE_NOT_FOUND\n-\n+<!-- YAML\n+changes:\n+  - version: REPLACEME\n+    pr-url: https://github.com/nodejs/node/pull/25690\n+    description: Added `requireStack` property.\n+-->\n A module file could not be resolved while attempting a [`require()`][] or\n `import` operation.\n "
        },
        {
            "sha": "e420a10e4867a114702d68b776fd7a7e1c93b91d",
            "filename": "lib/internal/modules/cjs/loader.js",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/05cd1a0929441943ba2d90c210c2d8bd8560293f/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js",
            "raw_url": "https://github.com/nodejs/node/raw/05cd1a0929441943ba2d90c210c2d8bd8560293f/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js?ref=05cd1a0929441943ba2d90c210c2d8bd8560293f",
            "patch": "@@ -606,9 +606,16 @@ Module._resolveFilename = function(request, parent, isMain, options) {\n   // Look up the filename first, since that's the cache key.\n   var filename = Module._findPath(request, paths, isMain);\n   if (!filename) {\n+    const requireStack = [];\n+    for (var cursor = parent;\n+      cursor;\n+      cursor = cursor.parent) {\n+      requireStack.push(cursor.filename || cursor.id);\n+    }\n     // eslint-disable-next-line no-restricted-syntax\n     var err = new Error(`Cannot find module '${request}'`);\n     err.code = 'MODULE_NOT_FOUND';\n+    err.requireStack = requireStack;\n     throw err;\n   }\n   return filename;"
        },
        {
            "sha": "33366f0069a8f1ef6fed557565e72b082bf3ae88",
            "filename": "lib/internal/modules/esm/default_resolve.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/05cd1a0929441943ba2d90c210c2d8bd8560293f/lib%2Finternal%2Fmodules%2Fesm%2Fdefault_resolve.js",
            "raw_url": "https://github.com/nodejs/node/raw/05cd1a0929441943ba2d90c210c2d8bd8560293f/lib%2Finternal%2Fmodules%2Fesm%2Fdefault_resolve.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2Fdefault_resolve.js?ref=05cd1a0929441943ba2d90c210c2d8bd8560293f",
            "patch": "@@ -66,8 +66,11 @@ function resolve(specifier, parentURL) {\n                  parentURL || pathToFileURL(`${process.cwd()}/`).href);\n   } catch (e) {\n     if (typeof e.message === 'string' &&\n-        StringStartsWith(e.message, 'Cannot find module'))\n+        StringStartsWith(e.message, 'Cannot find module')) {\n       e.code = 'MODULE_NOT_FOUND';\n+      // TODO: also add e.requireStack to match behavior with CJS\n+      // MODULE_NOT_FOUND.\n+    }\n     throw e;\n   }\n "
        }
    ],
    "stats": {
        "total": 19,
        "additions": 17,
        "deletions": 2
    }
}