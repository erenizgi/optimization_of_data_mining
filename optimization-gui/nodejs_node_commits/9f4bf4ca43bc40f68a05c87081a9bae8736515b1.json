{
    "author": "kaelzhang",
    "message": "stream: fix removeAllListeners() for Stream.Readable\n\nFixes: https://github.com/nodejs/node/issues/20923\n\nPR-URL: https://github.com/nodejs/node/pull/20924\nRefs: https://github.com/nodejs/node/issues/20923\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>",
    "sha": "9f4bf4ca43bc40f68a05c87081a9bae8736515b1",
    "files": [
        {
            "sha": "a8e52f5f1d6c5bffd9269681d9db39dd481fb21a",
            "filename": "lib/_stream_readable.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9f4bf4ca43bc40f68a05c87081a9bae8736515b1/lib%2F_stream_readable.js",
            "raw_url": "https://github.com/nodejs/node/raw/9f4bf4ca43bc40f68a05c87081a9bae8736515b1/lib%2F_stream_readable.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_stream_readable.js?ref=9f4bf4ca43bc40f68a05c87081a9bae8736515b1",
            "patch": "@@ -846,7 +846,7 @@ Readable.prototype.removeListener = function(ev, fn) {\n };\n \n Readable.prototype.removeAllListeners = function(ev) {\n-  const res = Stream.prototype.removeAllListeners.call(this, ev);\n+  const res = Stream.prototype.removeAllListeners.apply(this, arguments);\n \n   if (ev === 'readable' || ev === undefined) {\n     // We need to check if there is someone still listening to"
        },
        {
            "sha": "06fac7dc8bd1251ed79135e8efc7bbd10f696932",
            "filename": "test/parallel/test-stream-readable-event.js",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/9f4bf4ca43bc40f68a05c87081a9bae8736515b1/test%2Fparallel%2Ftest-stream-readable-event.js",
            "raw_url": "https://github.com/nodejs/node/raw/9f4bf4ca43bc40f68a05c87081a9bae8736515b1/test%2Fparallel%2Ftest-stream-readable-event.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stream-readable-event.js?ref=9f4bf4ca43bc40f68a05c87081a9bae8736515b1",
            "patch": "@@ -113,3 +113,16 @@ const Readable = require('stream').Readable;\n     assert.deepStrictEqual(result, expected);\n   }));\n }\n+\n+{\n+  // #20923\n+  const r = new Readable();\n+  r._read = function() {\n+    // actually doing thing here\n+  };\n+  r.on('data', function() {});\n+\n+  r.removeAllListeners();\n+\n+  assert.strictEqual(r.eventNames().length, 0);\n+}"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 14,
        "deletions": 1
    }
}