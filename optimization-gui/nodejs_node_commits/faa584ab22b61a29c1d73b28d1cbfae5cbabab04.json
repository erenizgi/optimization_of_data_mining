{
    "author": "danbev",
    "message": "test: fix v8 Set/Get compiler warnings\n\nPR-URL: https://github.com/nodejs/node/pull/24246\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "faa584ab22b61a29c1d73b28d1cbfae5cbabab04",
    "files": [
        {
            "sha": "9f250aaa83db50b745b210bced34bbb8b88c04e3",
            "filename": "benchmark/napi/function_args/binding.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/benchmark%2Fnapi%2Ffunction_args%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/benchmark%2Fnapi%2Ffunction_args%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fnapi%2Ffunction_args%2Fbinding.cc?ref=faa584ab22b61a29c1d73b28d1cbfae5cbabab04",
            "patch": "@@ -33,7 +33,8 @@ void CallWithArray(const FunctionCallbackInfo<Value>& args) {\n     uint32_t length = array->Length();\n     for (uint32_t i = 0; i < length; ++ i) {\n       Local<Value> v;\n-      v = array->Get(i);\n+      v = array->Get(args.GetIsolate()->GetCurrentContext(),\n+                     i).ToLocalChecked();\n     }\n   }\n }"
        },
        {
            "sha": "d993c72d3464950d5460684ae51b14d29f2e312a",
            "filename": "doc/api/addons.md",
            "status": "modified",
            "additions": 9,
            "deletions": 5,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/doc%2Fapi%2Faddons.md",
            "raw_url": "https://github.com/nodejs/node/raw/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/doc%2Fapi%2Faddons.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Faddons.md?ref=faa584ab22b61a29c1d73b28d1cbfae5cbabab04",
            "patch": "@@ -537,6 +537,7 @@ to invoke such callbacks:\n \n namespace demo {\n \n+using v8::Context;\n using v8::Function;\n using v8::FunctionCallbackInfo;\n using v8::Isolate;\n@@ -549,13 +550,14 @@ using v8::Value;\n \n void RunCallback(const FunctionCallbackInfo<Value>& args) {\n   Isolate* isolate = args.GetIsolate();\n+  Local<Context> context = isolate->GetCurrentContext();\n   Local<Function> cb = Local<Function>::Cast(args[0]);\n   const unsigned argc = 1;\n   Local<Value> argv[argc] = {\n       String::NewFromUtf8(isolate,\n                           \"hello world\",\n                           NewStringType::kNormal).ToLocalChecked() };\n-  cb->Call(Null(isolate), argc, argv);\n+  cb->Call(context, Null(isolate), argc, argv).ToLocalChecked();\n }\n \n void Init(Local<Object> exports, Local<Object> module) {\n@@ -612,10 +614,12 @@ void CreateObject(const FunctionCallbackInfo<Value>& args) {\n   Local<Context> context = isolate->GetCurrentContext();\n \n   Local<Object> obj = Object::New(isolate);\n-  obj->Set(String::NewFromUtf8(isolate,\n+  obj->Set(context,\n+           String::NewFromUtf8(isolate,\n                                \"msg\",\n                                NewStringType::kNormal).ToLocalChecked(),\n-                               args[0]->ToString(context).ToLocalChecked());\n+                               args[0]->ToString(context).ToLocalChecked())\n+           .FromJust();\n \n   args.GetReturnValue().Set(obj);\n }\n@@ -803,9 +807,9 @@ void MyObject::Init(Local<Object> exports) {\n \n   Local<Context> context = isolate->GetCurrentContext();\n   constructor.Reset(isolate, tpl->GetFunction(context).ToLocalChecked());\n-  exports->Set(String::NewFromUtf8(\n+  exports->Set(context, String::NewFromUtf8(\n       isolate, \"MyObject\", NewStringType::kNormal).ToLocalChecked(),\n-               tpl->GetFunction(context).ToLocalChecked());\n+               tpl->GetFunction(context).ToLocalChecked()).FromJust();\n }\n \n void MyObject::New(const FunctionCallbackInfo<Value>& args) {"
        },
        {
            "sha": "1bf94ddd1d70bcab23c01370c54c0ce263e8df2d",
            "filename": "test/addons/async-hello-world/binding.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/test%2Faddons%2Fasync-hello-world%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/test%2Faddons%2Fasync-hello-world%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fasync-hello-world%2Fbinding.cc?ref=faa584ab22b61a29c1d73b28d1cbfae5cbabab04",
            "patch": "@@ -53,7 +53,8 @@ void AfterAsync(uv_work_t* r) {\n     // This should be changed to an empty handle.\n     assert(!ret.IsEmpty());\n   } else {\n-    callback->Call(global, 2, argv);\n+    callback->Call(isolate->GetCurrentContext(),\n+                   global, 2, argv).ToLocalChecked();\n   }\n \n   // cleanup"
        },
        {
            "sha": "9e1e97e9fc2afc4493776f16a852ec0ed0d594c4",
            "filename": "test/addons/heap-profiler/binding.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/test%2Faddons%2Fheap-profiler%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/test%2Faddons%2Fheap-profiler%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fheap-profiler%2Fbinding.cc?ref=faa584ab22b61a29c1d73b28d1cbfae5cbabab04",
            "patch": "@@ -19,11 +19,11 @@ inline void Test(const v8::FunctionCallbackInfo<v8::Value>& args) {\n inline void Initialize(v8::Local<v8::Object> binding) {\n   v8::Isolate* const isolate = binding->GetIsolate();\n   v8::Local<v8::Context> context = isolate->GetCurrentContext();\n-  binding->Set(v8::String::NewFromUtf8(\n+  binding->Set(context, v8::String::NewFromUtf8(\n         isolate, \"test\", v8::NewStringType::kNormal).ToLocalChecked(),\n                v8::FunctionTemplate::New(isolate, Test)\n                    ->GetFunction(context)\n-                   .ToLocalChecked());\n+                   .ToLocalChecked()).FromJust();\n }\n \n NODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)"
        },
        {
            "sha": "48ceeb55ca1aae140a702e49339268d6eb398460",
            "filename": "test/addons/new-target/binding.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/test%2Faddons%2Fnew-target%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/faa584ab22b61a29c1d73b28d1cbfae5cbabab04/test%2Faddons%2Fnew-target%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fnew-target%2Fbinding.cc?ref=faa584ab22b61a29c1d73b28d1cbfae5cbabab04",
            "patch": "@@ -12,11 +12,11 @@ inline void NewClass(const v8::FunctionCallbackInfo<v8::Value>& args) {\n inline void Initialize(v8::Local<v8::Object> binding) {\n   auto isolate = binding->GetIsolate();\n   auto context = isolate->GetCurrentContext();\n-  binding->Set(v8::String::NewFromUtf8(\n+  binding->Set(context, v8::String::NewFromUtf8(\n         isolate, \"Class\", v8::NewStringType::kNormal).ToLocalChecked(),\n                v8::FunctionTemplate::New(isolate, NewClass)\n                    ->GetFunction(context)\n-                   .ToLocalChecked());\n+                   .ToLocalChecked()).FromJust();\n }\n \n NODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 17,
        "deletions": 11
    }
}