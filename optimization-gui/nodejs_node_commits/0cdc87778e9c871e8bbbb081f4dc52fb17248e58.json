{
    "author": "BridgeAR",
    "message": "assert: show proper differences\n\nRight now it is possible to get an AssertionError from input that has\nthe customInspect function set to always return the same value.\n\nThat way the error message is actually misleading because the output\nis going to look the same. This fixes it by deactivating the custom\ninspect function.\n\nPR-URL: https://github.com/nodejs/node/pull/18611\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "0cdc87778e9c871e8bbbb081f4dc52fb17248e58",
    "files": [
        {
            "sha": "fb4f5e84822d7fc6ead585fcbefaeb93a1235224",
            "filename": "lib/internal/errors.js",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0cdc87778e9c871e8bbbb081f4dc52fb17248e58/lib%2Finternal%2Ferrors.js",
            "raw_url": "https://github.com/nodejs/node/raw/0cdc87778e9c871e8bbbb081f4dc52fb17248e58/lib%2Finternal%2Ferrors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ferrors.js?ref=0cdc87778e9c871e8bbbb081f4dc52fb17248e58",
            "patch": "@@ -164,9 +164,9 @@ function createErrDiff(actual, expected, operator) {\n   var skipped = false;\n   const util = lazyUtil();\n   const actualLines = util\n-    .inspect(actual, { compact: false }).split('\\n');\n+    .inspect(actual, { compact: false, customInspect: false }).split('\\n');\n   const expectedLines = util\n-    .inspect(expected, { compact: false }).split('\\n');\n+    .inspect(expected, { compact: false, customInspect: false }).split('\\n');\n   const msg = `Input A expected to ${operator} input B:\\n` +\n         `${green}+ expected${white} ${red}- actual${white}`;\n   const skippedMsg = ' ... Lines skipped';\n@@ -310,8 +310,10 @@ class AssertionError extends Error {\n       } else if (errorDiff === 1) {\n         // In case the objects are equal but the operator requires unequal, show\n         // the first object and say A equals B\n-        const res = util\n-          .inspect(actual, { compact: false }).split('\\n');\n+        const res = util.inspect(\n+          actual,\n+          { compact: false, customInspect: false }\n+        ).split('\\n');\n \n         if (res.length > 20) {\n           res[19] = '...';"
        },
        {
            "sha": "c120f47302a4bc275ec7777f62cccf4b930549a3",
            "filename": "test/parallel/test-assert.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0cdc87778e9c871e8bbbb081f4dc52fb17248e58/test%2Fparallel%2Ftest-assert.js",
            "raw_url": "https://github.com/nodejs/node/raw/0cdc87778e9c871e8bbbb081f4dc52fb17248e58/test%2Fparallel%2Ftest-assert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert.js?ref=0cdc87778e9c871e8bbbb081f4dc52fb17248e58",
            "patch": "@@ -574,7 +574,11 @@ common.expectsError(\n     message: `${start}\\n` +\n     `${actExp}\\n` +\n     '\\n' +\n-    '  {}'\n+    `${minus} {}\\n` +\n+    `${plus} {\\n` +\n+    `${plus}   loop: 'forever',\\n` +\n+    `${plus}   [Symbol(util.inspect.custom)]: [Function]\\n` +\n+    `${plus} }`\n   });\n \n   // notDeepEqual tests"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 11,
        "deletions": 5
    }
}