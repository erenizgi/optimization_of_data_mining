{
    "author": "apapirovski",
    "message": "test: check gc does not resurrect the loop\n\nPR-URL: https://github.com/nodejs/node/pull/21093\nFixes: https://github.com/nodejs/node/issues/18190\nRefs: https://github.com/nodejs/node/pull/18307\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "ff16545f609bf7833cd5c6cf10dd3993d1a849f0",
    "files": [
        {
            "sha": "60309ecb2d49b8baf02d136a1d536eeb1b4f65df",
            "filename": "test/sequential/test-async-wrap-getasyncid.js",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/ff16545f609bf7833cd5c6cf10dd3993d1a849f0/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "raw_url": "https://github.com/nodejs/node/raw/ff16545f609bf7833cd5c6cf10dd3993d1a849f0/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-async-wrap-getasyncid.js?ref=ff16545f609bf7833cd5c6cf10dd3993d1a849f0",
            "patch": "@@ -1,4 +1,5 @@\n 'use strict';\n+// Flags: --expose-gc\n \n const common = require('../common');\n const assert = require('assert');\n@@ -22,6 +23,11 @@ common.crashOnUnhandledRejection();\n     },\n   }).enable();\n   process.on('beforeExit', common.mustCall(() => {\n+    // This garbage collection call verifies that the wraps being garbage\n+    // collected doesn't resurrect the process again due to weirdly timed\n+    // uv_close calls and other similar instruments in destructors.\n+    global.gc();\n+\n     process.removeAllListeners('uncaughtException');\n     hooks.disable();\n     delete providers.NONE;  // Should never be used."
        }
    ],
    "stats": {
        "total": 6,
        "additions": 6,
        "deletions": 0
    }
}