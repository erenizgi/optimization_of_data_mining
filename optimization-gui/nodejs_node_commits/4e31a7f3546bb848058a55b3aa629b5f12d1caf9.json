{
    "author": "cjihrig",
    "message": "src: introduce DCHECK macro\n\nThis commit adds a DCHECK macro for consistency with the\nother DCHECK_* macros.\n\nPR-URL: https://github.com/nodejs/node/pull/25207\nReviewed-By: Michaël Zasso <targos@protonmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Tobias Nießen <tniessen@tnie.de>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "4e31a7f3546bb848058a55b3aa629b5f12d1caf9",
    "files": [
        {
            "sha": "eae60f4d93a9c0552245bdacfdf260c07b142bcf",
            "filename": "src/aliased_buffer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Faliased_buffer.h",
            "raw_url": "https://github.com/nodejs/node/raw/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Faliased_buffer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Faliased_buffer.h?ref=4e31a7f3546bb848058a55b3aa629b5f12d1caf9",
            "patch": "@@ -231,9 +231,7 @@ class AliasedBuffer {\n   void reserve(size_t new_capacity) {\n     DCHECK_GE(new_capacity, count_);\n     DCHECK_EQ(byte_offset_, 0);\n-#if defined(DEBUG) && DEBUG\n-    CHECK(free_buffer_);\n-#endif\n+    DCHECK(free_buffer_);\n     const v8::HandleScope handle_scope(isolate_);\n \n     const size_t old_size_in_bytes = sizeof(NativeT) * count_;"
        },
        {
            "sha": "f1f1498e6c61285f01cbd0e479a13fd0f63b3d74",
            "filename": "src/base_object-inl.h",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Fbase_object-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Fbase_object-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fbase_object-inl.h?ref=4e31a7f3546bb848058a55b3aa629b5f12d1caf9",
            "patch": "@@ -113,9 +113,7 @@ void BaseObject::ClearWeak() {\n v8::Local<v8::FunctionTemplate>\n BaseObject::MakeLazilyInitializedJSTemplate(Environment* env) {\n   auto constructor = [](const v8::FunctionCallbackInfo<v8::Value>& args) {\n-#ifdef DEBUG\n-    CHECK(args.IsConstructCall());\n-#endif\n+    DCHECK(args.IsConstructCall());\n     DCHECK_GT(args.This()->InternalFieldCount(), 0);\n     args.This()->SetAlignedPointerInInternalField(0, nullptr);\n   };"
        },
        {
            "sha": "504798853675a51c6a4787e0b9d370bf03a9ab57",
            "filename": "src/inspector/node_string.h",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Finspector%2Fnode_string.h",
            "raw_url": "https://github.com/nodejs/node/raw/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Finspector%2Fnode_string.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector%2Fnode_string.h?ref=4e31a7f3546bb848058a55b3aa629b5f12d1caf9",
            "patch": "@@ -73,8 +73,4 @@ extern size_t kNotFound;\n }  // namespace inspector\n }  // namespace node\n \n-#ifndef DCHECK\n-  #define DCHECK CHECK\n-  #define DCHECK_LT CHECK_LT\n-#endif  // DCHECK\n #endif  // SRC_INSPECTOR_NODE_STRING_H_"
        },
        {
            "sha": "ceee1c9d762060ce4487ebd6ff20f655ecb588e1",
            "filename": "src/string_decoder.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Fstring_decoder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Fstring_decoder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstring_decoder.cc?ref=4e31a7f3546bb848058a55b3aa629b5f12d1caf9",
            "patch": "@@ -44,9 +44,7 @@ MaybeLocal<String> MakeString(Isolate* isolate,\n     isolate->ThrowException(error);\n   }\n \n-#ifdef DEBUG\n-  CHECK(ret.IsEmpty() || ret.ToLocalChecked()->IsString());\n-#endif\n+  DCHECK(ret.IsEmpty() || ret.ToLocalChecked()->IsString());\n   return ret.FromMaybe(Local<Value>()).As<String>();\n }\n "
        },
        {
            "sha": "d3835c7e692b7d28402775741e6ac1faf600b469",
            "filename": "src/util.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Futil.h",
            "raw_url": "https://github.com/nodejs/node/raw/4e31a7f3546bb848058a55b3aa629b5f12d1caf9/src%2Futil.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Futil.h?ref=4e31a7f3546bb848058a55b3aa629b5f12d1caf9",
            "patch": "@@ -130,6 +130,7 @@ void DumpBacktrace(FILE* fp);\n #define CHECK_IMPLIES(a, b) CHECK(!(a) || (b))\n \n #ifdef DEBUG\n+  #define DCHECK(expr) CHECK(expr)\n   #define DCHECK_EQ(a, b) CHECK((a) == (b))\n   #define DCHECK_GE(a, b) CHECK((a) >= (b))\n   #define DCHECK_GT(a, b) CHECK((a) > (b))\n@@ -140,6 +141,7 @@ void DumpBacktrace(FILE* fp);\n   #define DCHECK_NOT_NULL(val) CHECK((val) != nullptr)\n   #define DCHECK_IMPLIES(a, b) CHECK(!(a) || (b))\n #else\n+  #define DCHECK(expr)\n   #define DCHECK_EQ(a, b)\n   #define DCHECK_GE(a, b)\n   #define DCHECK_GT(a, b)"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 5,
        "deletions": 13
    }
}