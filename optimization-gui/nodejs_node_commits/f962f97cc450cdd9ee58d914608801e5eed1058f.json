{
    "author": "cjihrig",
    "message": "path: replace assertPath() with validator\n\nThe path module's assertPath() does exactly what the\nvalidateString() validator does, so this commit updates\npath to use validateString() instead. A couple drive by\nupdates to validateString() outside of assertPath() are\nalso included.\n\nPR-URL: https://github.com/nodejs/node/pull/24840\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>",
    "sha": "f962f97cc450cdd9ee58d914608801e5eed1058f",
    "files": [
        {
            "sha": "7ea431d1d00bb490d440c4cba3505fa1ce63bd6f",
            "filename": "lib/path.js",
            "status": "modified",
            "additions": 25,
            "deletions": 30,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/f962f97cc450cdd9ee58d914608801e5eed1058f/lib%2Fpath.js",
            "raw_url": "https://github.com/nodejs/node/raw/f962f97cc450cdd9ee58d914608801e5eed1058f/lib%2Fpath.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fpath.js?ref=f962f97cc450cdd9ee58d914608801e5eed1058f",
            "patch": "@@ -33,12 +33,7 @@ const {\n   CHAR_COLON,\n   CHAR_QUESTION_MARK,\n } = require('internal/constants');\n-\n-function assertPath(path) {\n-  if (typeof path !== 'string') {\n-    throw new ERR_INVALID_ARG_TYPE('path', 'string', path);\n-  }\n-}\n+const { validateString } = require('internal/validators');\n \n function isPathSeparator(code) {\n   return code === CHAR_FORWARD_SLASH || code === CHAR_BACKWARD_SLASH;\n@@ -163,7 +158,7 @@ const win32 = {\n         }\n       }\n \n-      assertPath(path);\n+      validateString(path, 'path');\n \n       // Skip empty entries\n       if (path.length === 0) {\n@@ -282,7 +277,7 @@ const win32 = {\n   },\n \n   normalize: function normalize(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n     const len = path.length;\n     if (len === 0)\n       return '.';\n@@ -401,7 +396,7 @@ const win32 = {\n \n \n   isAbsolute: function isAbsolute(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n     const len = path.length;\n     if (len === 0)\n       return false;\n@@ -429,7 +424,7 @@ const win32 = {\n     var firstPart;\n     for (var i = 0; i < arguments.length; ++i) {\n       var arg = arguments[i];\n-      assertPath(arg);\n+      validateString(arg, 'path');\n       if (arg.length > 0) {\n         if (joined === undefined)\n           joined = firstPart = arg;\n@@ -494,8 +489,8 @@ const win32 = {\n   //  to = 'C:\\\\orandea\\\\impl\\\\bbb'\n   // The output of the function should be: '..\\\\..\\\\impl\\\\bbb'\n   relative: function relative(from, to) {\n-    assertPath(from);\n-    assertPath(to);\n+    validateString(from, 'from');\n+    validateString(to, 'to');\n \n     if (from === to)\n       return '';\n@@ -648,7 +643,7 @@ const win32 = {\n   },\n \n   dirname: function dirname(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n     const len = path.length;\n     if (len === 0)\n       return '.';\n@@ -744,9 +739,9 @@ const win32 = {\n \n \n   basename: function basename(path, ext) {\n-    if (ext !== undefined && typeof ext !== 'string')\n-      throw new ERR_INVALID_ARG_TYPE('ext', 'string', ext);\n-    assertPath(path);\n+    if (ext !== undefined)\n+      validateString(ext, 'ext');\n+    validateString(path, 'path');\n     var start = 0;\n     var end = -1;\n     var matchedSlash = true;\n@@ -832,7 +827,7 @@ const win32 = {\n \n \n   extname: function extname(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n     var start = 0;\n     var startDot = -1;\n     var startPart = 0;\n@@ -905,7 +900,7 @@ const win32 = {\n \n \n   parse: function parse(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n \n     var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n     if (path.length === 0)\n@@ -1082,7 +1077,7 @@ const posix = {\n         path = process.cwd();\n       }\n \n-      assertPath(path);\n+      validateString(path, 'path');\n \n       // Skip empty entries\n       if (path.length === 0) {\n@@ -1114,7 +1109,7 @@ const posix = {\n \n \n   normalize: function normalize(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n \n     if (path.length === 0)\n       return '.';\n@@ -1138,7 +1133,7 @@ const posix = {\n \n \n   isAbsolute: function isAbsolute(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n     return path.length > 0 && path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n   },\n \n@@ -1149,7 +1144,7 @@ const posix = {\n     var joined;\n     for (var i = 0; i < arguments.length; ++i) {\n       var arg = arguments[i];\n-      assertPath(arg);\n+      validateString(arg, 'path');\n       if (arg.length > 0) {\n         if (joined === undefined)\n           joined = arg;\n@@ -1164,8 +1159,8 @@ const posix = {\n \n \n   relative: function relative(from, to) {\n-    assertPath(from);\n-    assertPath(to);\n+    validateString(from, 'from');\n+    validateString(to, 'to');\n \n     if (from === to)\n       return '';\n@@ -1262,7 +1257,7 @@ const posix = {\n   },\n \n   dirname: function dirname(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n     if (path.length === 0)\n       return '.';\n     const hasRoot = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n@@ -1289,9 +1284,9 @@ const posix = {\n \n \n   basename: function basename(path, ext) {\n-    if (ext !== undefined && typeof ext !== 'string')\n-      throw new ERR_INVALID_ARG_TYPE('ext', 'string', ext);\n-    assertPath(path);\n+    if (ext !== undefined)\n+      validateString(ext, 'ext');\n+    validateString(path, 'path');\n \n     var start = 0;\n     var end = -1;\n@@ -1367,7 +1362,7 @@ const posix = {\n \n \n   extname: function extname(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n     var startDot = -1;\n     var startPart = 0;\n     var end = -1;\n@@ -1428,7 +1423,7 @@ const posix = {\n \n \n   parse: function parse(path) {\n-    assertPath(path);\n+    validateString(path, 'path');\n \n     var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n     if (path.length === 0)"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 25,
        "deletions": 30
    }
}