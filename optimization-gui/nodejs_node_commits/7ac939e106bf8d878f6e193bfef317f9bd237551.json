{
    "author": "cjihrig",
    "message": "fs: simplify fs.promises warning logic\n\nfs.promises is lazy loaded. Instead of using a seaparate\nBoolean flag to track whether or not it has been loaded, just\ninspect the state of the lazy loaded module itself.\n\nPR-URL: https://github.com/nodejs/node/pull/24788\nReviewed-By: Anto Aravinth <anto.aravinth.cse@gmail.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Masashi Hirano <shisama07@gmail.com>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>",
    "sha": "7ac939e106bf8d878f6e193bfef317f9bd237551",
    "files": [
        {
            "sha": "1a720f618189fd3b587c8daeebd1849ad19bf4f4",
            "filename": "lib/fs.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/7ac939e106bf8d878f6e193bfef317f9bd237551/lib%2Ffs.js",
            "raw_url": "https://github.com/nodejs/node/raw/7ac939e106bf8d878f6e193bfef317f9bd237551/lib%2Ffs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ffs.js?ref=7ac939e106bf8d878f6e193bfef317f9bd237551",
            "patch": "@@ -86,12 +86,11 @@ const {\n   validateUint32\n } = require('internal/validators');\n \n-let promisesWarn = true;\n let truncateWarn = true;\n let fs;\n \n // Lazy loaded\n-let promises;\n+let promises = null;\n let watchers;\n let ReadFileContext;\n let ReadStream;\n@@ -1931,9 +1930,8 @@ Object.defineProperties(fs, {\n     configurable: true,\n     enumerable: false,\n     get() {\n-      if (promisesWarn) {\n+      if (promises === null) {\n         promises = require('internal/fs/promises');\n-        promisesWarn = false;\n         process.emitWarning('The fs.promises API is experimental',\n                             'ExperimentalWarning');\n       }"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 2,
        "deletions": 4
    }
}