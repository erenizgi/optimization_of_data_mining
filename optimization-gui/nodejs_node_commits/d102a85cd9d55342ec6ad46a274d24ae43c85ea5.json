{
    "author": "addaleax",
    "message": "src: simplify `MessagePort` construction code a bit\n\nUsing `ASSIGN_OR_RETURN_UNWRAP` would return if the\ncreated `MessagePort` object had no internal fields.\nThat would be a bug, so switch to a checked conversion instead.\n\nPR-URL: https://github.com/nodejs/node/pull/23036\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>",
    "sha": "d102a85cd9d55342ec6ad46a274d24ae43c85ea5",
    "files": [
        {
            "sha": "bb7344503e72c5429fd68e3081bffc396a208df9",
            "filename": "src/node_messaging.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/d102a85cd9d55342ec6ad46a274d24ae43c85ea5/src%2Fnode_messaging.cc",
            "raw_url": "https://github.com/nodejs/node/raw/d102a85cd9d55342ec6ad46a274d24ae43c85ea5/src%2Fnode_messaging.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_messaging.cc?ref=d102a85cd9d55342ec6ad46a274d24ae43c85ea5",
            "patch": "@@ -483,14 +483,14 @@ MessagePort* MessagePort::New(\n   Local<Function> ctor;\n   if (!GetMessagePortConstructor(env, context).ToLocal(&ctor))\n     return nullptr;\n-  MessagePort* port = nullptr;\n \n   // Construct a new instance, then assign the listener instance and possibly\n   // the MessagePortData to it.\n   Local<Object> instance;\n   if (!ctor->NewInstance(context).ToLocal(&instance))\n     return nullptr;\n-  ASSIGN_OR_RETURN_UNWRAP(&port, instance, nullptr);\n+  MessagePort* port = Unwrap<MessagePort>(instance);\n+  CHECK_NOT_NULL(port);\n   if (data) {\n     port->Detach();\n     port->data_ = std::move(data);"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}