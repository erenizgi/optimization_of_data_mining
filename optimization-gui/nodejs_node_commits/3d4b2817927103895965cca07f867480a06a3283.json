{
    "author": "refack",
    "message": "build,tools: update make-v8.sh for ppc64le\n\nPR-URL: https://github.com/nodejs/node/pull/24293\nFixes: https://github.com/nodejs/build/issues/1536\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>",
    "sha": "3d4b2817927103895965cca07f867480a06a3283",
    "files": [
        {
            "sha": "fd66fda94274df13a81abb40c2e43227ac17322c",
            "filename": "tools/make-v8.sh",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/3d4b2817927103895965cca07f867480a06a3283/tools%2Fmake-v8.sh",
            "raw_url": "https://github.com/nodejs/node/raw/3d4b2817927103895965cca07f867480a06a3283/tools%2Fmake-v8.sh",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fmake-v8.sh?ref=3d4b2817927103895965cca07f867480a06a3283",
            "patch": "@@ -6,21 +6,30 @@ V8_BUILD_OPTIONS=$2\n cd deps/v8\n tools/node/fetch_deps.py .\n \n-if [ \"`arch`\" == \"s390x\" ]\n-then\n+ARCH=\"`arch`\"\n+if [[ \"$ARCH\" == \"s390x\" ]] || [[ \"$ARCH\" == \"ppc64le\" ]]; then\n   # set paths manually for now to use locally installed gn\n   export BUILD_TOOLS=/home/iojs/build-tools\n   export LD_LIBRARY_PATH=$BUILD_TOOLS:$LD_LIBRARY_PATH\n   export PATH=$BUILD_TOOLS:$PATH\n   CXX_PATH=`which $CXX |grep g++`\n   rm -f \"$BUILD_TOOLS/g++\"\n   rm -f \"$BUILD_TOOLS/gcc\"\n+fi\n+if [[ \"$ARCH\" == \"s390x\" ]]; then\n   ln -s $CXX_PATH \"$BUILD_TOOLS/g++\"\n   ln -s $CXX_PATH \"$BUILD_TOOLS/gcc\"\n   g++ --version\n   export PKG_CONFIG_PATH=$BUILD_TOOLS/pkg-config\n   gn gen -v out.gn/$BUILD_ARCH_TYPE --args='is_component_build=false is_debug=false use_goma=false goma_dir=\"None\" use_custom_libcxx=false v8_target_cpu=\"s390x\" target_cpu=\"s390x\"'\n   ninja -v -C out.gn/$BUILD_ARCH_TYPE d8 cctest inspector-test\n+elif [[ \"$ARCH\" == \"ppc64le\" ]]; then\n+  ln -s /usr/bin/$CXX \"$BUILD_TOOLS/g++\"\n+  ln -s /usr/bin/$CC \"$BUILD_TOOLS/gcc\"\n+  g++ --version\n+  export PKG_CONFIG_PATH=$BUILD_TOOLS/pkg-config-files\n+  gn gen out.gn/$BUILD_ARCH_TYPE --args='is_component_build=false is_debug=false use_goma=false goma_dir=\"None\" use_custom_libcxx=false v8_target_cpu=\"ppc64\" target_cpu=\"ppc64\"'\n+  ninja -C out.gn/$BUILD_ARCH_TYPE d8 cctest inspector-test\n else\n   PATH=~/_depot_tools:$PATH tools/dev/v8gen.py $BUILD_ARCH_TYPE --no-goma $V8_BUILD_OPTIONS\n   PATH=~/_depot_tools:$PATH ninja -C out.gn/$BUILD_ARCH_TYPE/ d8 cctest inspector-test"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 11,
        "deletions": 2
    }
}