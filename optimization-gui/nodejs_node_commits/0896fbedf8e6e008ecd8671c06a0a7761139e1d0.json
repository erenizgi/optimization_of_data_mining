{
    "author": "addaleax",
    "message": "vm: do not overwrite error when creating context\n\nAn empty `Local<>` already indicates that an exception is pending,\nso there is no need to throw an exception. In the case of Workers,\nthis could override a `.terminate()` call.\n\nPR-URL: https://github.com/nodejs/node/pull/26112\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "0896fbedf8e6e008ecd8671c06a0a7761139e1d0",
    "files": [
        {
            "sha": "343342408b1a7510a58cd5ff11a65fe48b7283e3",
            "filename": "src/node_contextify.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0896fbedf8e6e008ecd8671c06a0a7761139e1d0/src%2Fnode_contextify.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0896fbedf8e6e008ecd8671c06a0a7761139e1d0/src%2Fnode_contextify.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_contextify.cc?ref=0896fbedf8e6e008ecd8671c06a0a7761139e1d0",
            "patch": "@@ -171,7 +171,6 @@ MaybeLocal<Context> ContextifyContext::CreateV8Context(\n   Local<Context> ctx = NewContext(env->isolate(), object_template);\n \n   if (ctx.IsEmpty()) {\n-    env->ThrowError(\"Could not instantiate context\");\n     return MaybeLocal<Context>();\n   }\n "
        },
        {
            "sha": "23b58ba4db14d5781e27e71d9675f0d4da150617",
            "filename": "test/parallel/test-worker-vm-context-terminate.js",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/0896fbedf8e6e008ecd8671c06a0a7761139e1d0/test%2Fparallel%2Ftest-worker-vm-context-terminate.js",
            "raw_url": "https://github.com/nodejs/node/raw/0896fbedf8e6e008ecd8671c06a0a7761139e1d0/test%2Fparallel%2Ftest-worker-vm-context-terminate.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-worker-vm-context-terminate.js?ref=0896fbedf8e6e008ecd8671c06a0a7761139e1d0",
            "patch": "@@ -0,0 +1,19 @@\n+'use strict';\n+const common = require('../common');\n+const assert = require('assert');\n+const vm = require('vm');\n+const { Worker } = require('worker_threads');\n+\n+// Do not use isMainThread so that this test itself can be run inside a Worker.\n+if (!process.env.HAS_STARTED_WORKER) {\n+  process.env.HAS_STARTED_WORKER = 1;\n+  const w = new Worker(__filename);\n+  w.on('online', common.mustCall(() => {\n+    setTimeout(() => w.terminate(), 50);\n+  }));\n+  w.on('error', common.mustNotCall());\n+  w.on('exit', common.mustCall((code) => assert.strictEqual(code, 1)));\n+} else {\n+  while (true)\n+    vm.runInNewContext('');\n+}"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 19,
        "deletions": 1
    }
}