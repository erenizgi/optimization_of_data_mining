{
    "author": "jvelezpo",
    "message": "src: replace var for (let|const) in utilities module\n\nUpdate Utilities module to replace var for let or const\n\nPR-URL: https://github.com/nodejs/node/pull/18814\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Matheus Marchini <matheus@sthima.com>",
    "sha": "ca79fc5373f2fde4a3a3cfd86c34c3848df37a1a",
    "files": [
        {
            "sha": "630cd0ef213bdb65b5e1bd88f4cab8216e0cf49e",
            "filename": "lib/internal/util.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/ca79fc5373f2fde4a3a3cfd86c34c3848df37a1a/lib%2Finternal%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/ca79fc5373f2fde4a3a3cfd86c34c3848df37a1a/lib%2Finternal%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil.js?ref=ca79fc5373f2fde4a3a3cfd86c34c3848df37a1a",
            "patch": "@@ -47,7 +47,7 @@ function deprecate(fn, msg, code) {\n   if (code !== undefined && typeof code !== 'string')\n     throw new errors.TypeError('ERR_INVALID_ARG_TYPE', 'code', 'string');\n \n-  var warned = false;\n+  let warned = false;\n   function deprecated(...args) {\n     if (!warned) {\n       warned = true;\n@@ -103,7 +103,7 @@ function assertCrypto() {\n // Return undefined if there is no match.\n function normalizeEncoding(enc) {\n   if (!enc) return 'utf8';\n-  var retried;\n+  let retried;\n   while (true) {\n     switch (enc) {\n       case 'utf8':\n@@ -152,7 +152,7 @@ function filterDuplicateStrings(items, low) {\n }\n \n function cachedResult(fn) {\n-  var result;\n+  let result;\n   return () => {\n     if (result === undefined)\n       result = fn();\n@@ -207,7 +207,7 @@ function convertToValidSignal(signal) {\n \n function getConstructorOf(obj) {\n   while (obj) {\n-    var descriptor = Object.getOwnPropertyDescriptor(obj, 'constructor');\n+    const descriptor = Object.getOwnPropertyDescriptor(obj, 'constructor');\n     if (descriptor !== undefined &&\n         typeof descriptor.value === 'function' &&\n         descriptor.value.name !== '') {\n@@ -323,7 +323,7 @@ promisify.custom = kCustomPromisifiedSymbol;\n \n // The build-in Array#join is slower in v8 6.0\n function join(output, separator) {\n-  var str = '';\n+  let str = '';\n   if (output.length !== 0) {\n     for (var i = 0; i < output.length - 1; i++) {\n       // It is faster not to use a template string here"
        },
        {
            "sha": "a019036ede651633ab9b4a634e6eb4504f69a2f5",
            "filename": "lib/util.js",
            "status": "modified",
            "additions": 38,
            "deletions": 38,
            "changes": 76,
            "blob_url": "https://github.com/nodejs/node/blob/ca79fc5373f2fde4a3a3cfd86c34c3848df37a1a/lib%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/ca79fc5373f2fde4a3a3cfd86c34c3848df37a1a/lib%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Futil.js?ref=ca79fc5373f2fde4a3a3cfd86c34c3848df37a1a",
            "patch": "@@ -79,7 +79,7 @@ const regExpToString = RegExp.prototype.toString;\n const dateToISOString = Date.prototype.toISOString;\n const errorToString = Error.prototype.toString;\n \n-var CIRCULAR_ERROR_MESSAGE;\n+let CIRCULAR_ERROR_MESSAGE;\n \n /* eslint-disable */\n const strEscapeSequencesRegExp = /[\\x00-\\x1f\\x27\\x5c]/;\n@@ -119,8 +119,8 @@ function strEscape(str) {\n     return `'${str}'`;\n   if (str.length > 100)\n     return `'${str.replace(strEscapeSequencesReplacer, escapeFn)}'`;\n-  var result = '';\n-  var last = 0;\n+  let result = '';\n+  let last = 0;\n   for (var i = 0; i < str.length; i++) {\n     const point = str.charCodeAt(i);\n     if (point === 39 || point === 92 || point < 32) {\n@@ -159,10 +159,10 @@ function tryStringify(arg) {\n }\n \n function format(f) {\n-  var i, tempStr;\n+  let i, tempStr;\n   if (typeof f !== 'string') {\n     if (arguments.length === 0) return '';\n-    var res = '';\n+    let res = '';\n     for (i = 0; i < arguments.length - 1; i++) {\n       res += inspect(arguments[i]);\n       res += ' ';\n@@ -173,9 +173,9 @@ function format(f) {\n \n   if (arguments.length === 1) return f;\n \n-  var str = '';\n-  var a = 1;\n-  var lastPos = 0;\n+  let str = '';\n+  let a = 1;\n+  let lastPos = 0;\n   for (i = 0; i < f.length - 1; i++) {\n     if (f.charCodeAt(i) === 37) { // '%'\n       const nextChar = f.charCodeAt(++i);\n@@ -250,9 +250,9 @@ function debuglog(set) {\n   set = set.toUpperCase();\n   if (!debugs[set]) {\n     if (debugEnvRegex.test(set)) {\n-      var pid = process.pid;\n+      const pid = process.pid;\n       debugs[set] = function() {\n-        var msg = exports.format.apply(exports, arguments);\n+        const msg = exports.format.apply(exports, arguments);\n         console.error('%s %d: %s', set, pid, msg);\n       };\n     } else {\n@@ -426,8 +426,8 @@ function formatValue(ctx, value, recurseTimes, ln) {\n     }\n   }\n \n-  var keys;\n-  var symbols = Object.getOwnPropertySymbols(value);\n+  let keys;\n+  let symbols = Object.getOwnPropertySymbols(value);\n \n   // Look up the keys of the object.\n   if (ctx.showHidden) {\n@@ -441,19 +441,19 @@ function formatValue(ctx, value, recurseTimes, ln) {\n   const keyLength = keys.length + symbols.length;\n \n   const { constructor, tag } = getIdentificationOf(value);\n-  var prefix = '';\n+  let prefix = '';\n   if (constructor && tag && constructor !== tag)\n     prefix = `${constructor} [${tag}] `;\n   else if (constructor)\n     prefix = `${constructor} `;\n   else if (tag)\n     prefix = `[${tag}] `;\n \n-  var base = '';\n-  var formatter = formatObject;\n-  var braces;\n-  var noIterator = true;\n-  var raw;\n+  let base = '';\n+  let formatter = formatObject;\n+  let braces;\n+  let noIterator = true;\n+  let raw;\n \n   // Iterators and the rest are split to reduce checks\n   if (value[Symbol.iterator]) {\n@@ -623,7 +623,7 @@ function formatPrimitive(fn, value, ctx) {\n       // eslint-disable-next-line max-len\n       const averageLineLength = Math.ceil(value.length / Math.ceil(value.length / minLineLength));\n       const divisor = Math.max(averageLineLength, MIN_LINE_LENGTH);\n-      var res = '';\n+      let res = '';\n       if (readableRegExps[divisor] === undefined) {\n         // Build a new RegExp that naturally breaks text into multiple lines.\n         //\n@@ -678,8 +678,8 @@ function formatObject(ctx, value, recurseTimes, keys) {\n function formatSpecialArray(ctx, value, recurseTimes, keys, maxLength, valLen) {\n   const output = [];\n   const keyLen = keys.length;\n-  var visibleLength = 0;\n-  var i = 0;\n+  let visibleLength = 0;\n+  let i = 0;\n   if (keyLen !== 0 && numberRegExp.test(keys[0])) {\n     for (const key of keys) {\n       if (visibleLength === maxLength)\n@@ -728,7 +728,7 @@ function formatSpecialArray(ctx, value, recurseTimes, keys, maxLength, valLen) {\n   } else if (keys[keyLen - 1] !== `${valLen - 1}`) {\n     const extra = [];\n     // Only handle special keys\n-    var key;\n+    let key;\n     for (i = keys.length - 1; i >= 0; i--) {\n       key = keys[i];\n       if (numberRegExp.test(key) && +key < 2 ** 32 - 1)\n@@ -792,7 +792,7 @@ function formatTypedArray(ctx, value, recurseTimes, keys) {\n \n function formatSet(ctx, value, recurseTimes, keys) {\n   const output = new Array(value.size + keys.length + (ctx.showHidden ? 1 : 0));\n-  var i = 0;\n+  let i = 0;\n   for (const v of value)\n     output[i++] = formatValue(ctx, v, recurseTimes);\n   // With `showHidden`, `length` will display as a hidden property for\n@@ -808,7 +808,7 @@ function formatSet(ctx, value, recurseTimes, keys) {\n \n function formatMap(ctx, value, recurseTimes, keys) {\n   const output = new Array(value.size + keys.length + (ctx.showHidden ? 1 : 0));\n-  var i = 0;\n+  let i = 0;\n   for (const [k, v] of value)\n     output[i++] = `${formatValue(ctx, k, recurseTimes)} => ` +\n       formatValue(ctx, v, recurseTimes);\n@@ -823,9 +823,9 @@ function formatMap(ctx, value, recurseTimes, keys) {\n \n function formatCollectionIterator(preview, ctx, value, recurseTimes,\n                                   visibleKeys, keys) {\n-  var nextRecurseTimes = recurseTimes === null ? null : recurseTimes - 1;\n-  var vals = preview(value, 100);\n-  var output = [];\n+  const nextRecurseTimes = recurseTimes === null ? null : recurseTimes - 1;\n+  const vals = preview(value, 100);\n+  const output = [];\n   for (const o of vals) {\n     output.push(formatValue(ctx, o, nextRecurseTimes));\n   }\n@@ -843,7 +843,7 @@ function formatSetIterator(ctx, value, recurseTimes, visibleKeys, keys) {\n }\n \n function formatPromise(ctx, value, recurseTimes, keys) {\n-  var output;\n+  let output;\n   const [state, result] = getPromiseDetails(value);\n   if (state === kPending) {\n     output = ['<pending>'];\n@@ -858,7 +858,7 @@ function formatPromise(ctx, value, recurseTimes, keys) {\n }\n \n function formatProperty(ctx, value, recurseTimes, key, array) {\n-  var name, str;\n+  let name, str;\n   const desc = Object.getOwnPropertyDescriptor(value, key) ||\n     { value: value[key], enumerable: true };\n   if (desc.value !== undefined) {\n@@ -895,18 +895,18 @@ function formatProperty(ctx, value, recurseTimes, key, array) {\n \n function reduceToSingleString(ctx, output, base, braces, addLn) {\n   const breakLength = ctx.breakLength;\n-  var i = 0;\n+  let i = 0;\n   if (ctx.compact === false) {\n     const indentation = ' '.repeat(ctx.indentationLvl);\n-    var res = `${base ? `${base} ` : ''}${braces[0]}\\n${indentation}  `;\n+    let res = `${base ? `${base} ` : ''}${braces[0]}\\n${indentation}  `;\n     for (; i < output.length - 1; i++) {\n       res += `${output[i]},\\n${indentation}  `;\n     }\n     res += `${output[i]}\\n${indentation}${braces[1]}`;\n     return res;\n   }\n   if (output.length * 2 <= breakLength) {\n-    var length = 0;\n+    let length = 0;\n     for (; i < output.length && length <= breakLength; i++) {\n       if (ctx.colors) {\n         length += removeColors(output[i]).length + 1;\n@@ -979,10 +979,10 @@ const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n \n // 26 Feb 16:19:34\n function timestamp() {\n-  var d = new Date();\n-  var time = [pad(d.getHours()),\n-              pad(d.getMinutes()),\n-              pad(d.getSeconds())].join(':');\n+  const d = new Date();\n+  const time = [pad(d.getHours()),\n+                pad(d.getMinutes()),\n+                pad(d.getSeconds())].join(':');\n   return [d.getDate(), months[d.getMonth()], time].join(' ');\n }\n \n@@ -1026,8 +1026,8 @@ function _extend(target, source) {\n   // Don't do anything if source isn't an object\n   if (source === null || typeof source !== 'object') return target;\n \n-  var keys = Object.keys(source);\n-  var i = keys.length;\n+  const keys = Object.keys(source);\n+  let i = keys.length;\n   while (i--) {\n     target[keys[i]] = source[keys[i]];\n   }"
        }
    ],
    "stats": {
        "total": 86,
        "additions": 43,
        "deletions": 43
    }
}