{
    "author": "addaleax",
    "message": "src: warn about odd UTF-16 decoding function signature\n\nUsing a `uint16_t` sequence for UTF-16 processing would typically\nimply that the sequence already contains the correct 16-bit\ncode units.\n\nHowever, our API does not account for that. The previous comments\nwere somewhat misleading, since endianness is typically applied to\nsequences of bytes, which is not something that this API works with.\n\nPR-URL: https://github.com/nodejs/node/pull/22623\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "6455bea52ba262cea8d1c706ec8a2eec192ec643",
    "files": [
        {
            "sha": "1154c3976502df081e4cab6f8f6e35097c8a37ba",
            "filename": "src/node.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6455bea52ba262cea8d1c706ec8a2eec192ec643/src%2Fnode.h",
            "raw_url": "https://github.com/nodejs/node/raw/6455bea52ba262cea8d1c706ec8a2eec192ec643/src%2Fnode.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.h?ref=6455bea52ba262cea8d1c706ec8a2eec192ec643",
            "patch": "@@ -416,7 +416,8 @@ NODE_EXTERN v8::Local<v8::Value> Encode(v8::Isolate* isolate,\n                                         size_t len,\n                                         enum encoding encoding = LATIN1);\n \n-// The input buffer should be in host endianness.\n+// Warning: This reverses endianness on Big Endian platforms, even though the\n+// signature using uint16_t implies that it should not.\n NODE_EXTERN v8::Local<v8::Value> Encode(v8::Isolate* isolate,\n                                         const uint16_t* buf,\n                                         size_t len);"
        },
        {
            "sha": "9e64fa0ee5f90ae044db64643155eb2153f1e1e8",
            "filename": "src/string_bytes.h",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/6455bea52ba262cea8d1c706ec8a2eec192ec643/src%2Fstring_bytes.h",
            "raw_url": "https://github.com/nodejs/node/raw/6455bea52ba262cea8d1c706ec8a2eec192ec643/src%2Fstring_bytes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstring_bytes.h?ref=6455bea52ba262cea8d1c706ec8a2eec192ec643",
            "patch": "@@ -97,7 +97,10 @@ class StringBytes {\n                                           enum encoding encoding,\n                                           v8::Local<v8::Value>* error);\n \n-  // The input buffer should be in host endianness.\n+  // Warning: This reverses endianness on BE platforms, even though the\n+  // signature using uint16_t implies that it should not.\n+  // However, the brokenness is already public API and can't therefore\n+  // be changed easily.\n   static v8::MaybeLocal<v8::Value> Encode(v8::Isolate* isolate,\n                                           const uint16_t* buf,\n                                           size_t buflen,"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    }
}