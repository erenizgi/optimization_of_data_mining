{
    "author": "cjihrig",
    "message": "src: remove unneeded variables in node_crypto.cc\n\nPR-URL: https://github.com/nodejs/node/pull/23297\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Gabriel Schulhof <gabriel.schulhof@intel.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "78b4369f093d0070bdd22e1b994feb7336c47cfd",
    "files": [
        {
            "sha": "c669dccde783bc069fbdf2c559962afcfe3c62a1",
            "filename": "src/node_crypto.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 17,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/78b4369f093d0070bdd22e1b994feb7336c47cfd/src%2Fnode_crypto.cc",
            "raw_url": "https://github.com/nodejs/node/raw/78b4369f093d0070bdd22e1b994feb7336c47cfd/src%2Fnode_crypto.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.cc?ref=78b4369f093d0070bdd22e1b994feb7336c47cfd",
            "patch": "@@ -573,17 +573,13 @@ int SSL_CTX_use_certificate_chain(SSL_CTX* ctx,\n   if (ret) {\n     // If we could set up our certificate, now proceed to\n     // the CA certificates.\n-    int r;\n-\n     SSL_CTX_clear_extra_chain_certs(ctx);\n \n     for (int i = 0; i < sk_X509_num(extra_certs); i++) {\n       X509* ca = sk_X509_value(extra_certs, i);\n \n       // NOTE: Increments reference count on `ca`\n-      r = SSL_CTX_add1_chain_cert(ctx, ca);\n-\n-      if (!r) {\n+      if (!SSL_CTX_add1_chain_cert(ctx, ca)) {\n         ret = 0;\n         issuer = nullptr;\n         break;\n@@ -1580,15 +1576,11 @@ static Local<Object> X509ToObject(Environment* env, X509* cert) {\n     if (index < 0)\n       continue;\n \n-    X509_EXTENSION* ext;\n-    int rv;\n-\n-    ext = X509_get_ext(cert, index);\n+    X509_EXTENSION* ext = X509_get_ext(cert, index);\n     CHECK_NOT_NULL(ext);\n \n     if (!SafeX509ExtPrint(bio.get(), ext)) {\n-      rv = X509V3_EXT_print(bio.get(), ext, 0, 0);\n-      CHECK_EQ(rv, 1);\n+      CHECK_EQ(1, X509V3_EXT_print(bio.get(), ext, 0, 0));\n     }\n \n     BIO_get_mem_ptr(bio.get(), &mem);\n@@ -3746,7 +3738,6 @@ SignBase::Error Verify::VerifyFinal(const char* key_pem,\n   EVPKeyPointer pkey;\n   unsigned char m[EVP_MAX_MD_SIZE];\n   unsigned int m_len;\n-  int r = 0;\n   *verify_result = false;\n   EVPMDPointer mdctx = std::move(mdctx_);\n \n@@ -3762,11 +3753,11 @@ SignBase::Error Verify::VerifyFinal(const char* key_pem,\n       ApplyRSAOptions(pkey, pkctx.get(), padding, saltlen) &&\n       EVP_PKEY_CTX_set_signature_md(pkctx.get(),\n                                     EVP_MD_CTX_md(mdctx.get())) > 0) {\n-    r = EVP_PKEY_verify(pkctx.get(),\n-                        reinterpret_cast<const unsigned char*>(sig),\n-                        siglen,\n-                        m,\n-                        m_len);\n+    const int r = EVP_PKEY_verify(pkctx.get(),\n+                                  reinterpret_cast<const unsigned char*>(sig),\n+                                  siglen,\n+                                  m,\n+                                  m_len);\n     *verify_result = r == 1;\n   }\n "
        }
    ],
    "stats": {
        "total": 25,
        "additions": 8,
        "deletions": 17
    }
}