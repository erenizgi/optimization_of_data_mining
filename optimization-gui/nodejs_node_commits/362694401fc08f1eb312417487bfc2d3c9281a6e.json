{
    "author": "joyeecheung",
    "message": "src: rename ERR_STRING_TOO_LARGE to ERR_STRING_TOO_LONG\n\nThe old error name and message were trying to be consistent with\nERR_BUFFER_TOO_LARGE but they were not really accurate.\nThe kStringMaxLength was measured in number of characters,\nnot number of bytes. The name ERR_STRING_TOO_LARGE also\nseems a bit awkward. This patch tries to correct them before\nthey get released to users.\n\nPR-URL: https://github.com/nodejs/node/pull/19864\nRefs: https://github.com/nodejs/node/pull/19739\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>",
    "sha": "362694401fc08f1eb312417487bfc2d3c9281a6e",
    "files": [
        {
            "sha": "3424afa12c3967bd0d15663b238c41309f3ceb3e",
            "filename": "doc/api/errors.md",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/doc%2Fapi%2Ferrors.md",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/doc%2Fapi%2Ferrors.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Ferrors.md?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -1474,11 +1474,11 @@ additional details.\n A stream method was called that cannot complete because the stream was\n destroyed using `stream.destroy()`.\n \n-<a id=\"ERR_STRING_TOO_LARGE\"></a>\n-### ERR_STRING_TOO_LARGE\n+<a id=\"ERR_STRING_TOO_LONG\"></a>\n+### ERR_STRING_TOO_LONG\n \n-An attempt has been made to create a string larger than the maximum allowed\n-size.\n+An attempt has been made to create a string longer than the maximum allowed\n+length.\n \n <a id=\"ERR_TLS_CERT_ALTNAME_INVALID\"></a>\n ### ERR_TLS_CERT_ALTNAME_INVALID"
        },
        {
            "sha": "f34beb6fbc94cde75d5ec69bfa3c602fea6be9bc",
            "filename": "src/node_errors.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/src%2Fnode_errors.h",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/src%2Fnode_errors.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_errors.h?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -18,7 +18,7 @@ namespace node {\n \n #define ERRORS_WITH_CODE(V)                                                  \\\n   V(ERR_MEMORY_ALLOCATION_FAILED, Error)                                     \\\n-  V(ERR_STRING_TOO_LARGE, Error)                                             \\\n+  V(ERR_STRING_TOO_LONG, Error)                                             \\\n   V(ERR_BUFFER_TOO_LARGE, Error)\n \n #define V(code, type)                                                         \\\n@@ -58,12 +58,12 @@ inline v8::Local<v8::Value> ERR_BUFFER_TOO_LARGE(v8::Isolate *isolate) {\n   return ERR_BUFFER_TOO_LARGE(isolate, message);\n }\n \n-inline v8::Local<v8::Value> ERR_STRING_TOO_LARGE(v8::Isolate *isolate) {\n+inline v8::Local<v8::Value> ERR_STRING_TOO_LONG(v8::Isolate *isolate) {\n   char message[128];\n   snprintf(message, sizeof(message),\n-      \"Cannot create a string larger than 0x%x bytes\",\n+      \"Cannot create a string longer than 0x%x characters\",\n       v8::String::kMaxLength);\n-  return ERR_STRING_TOO_LARGE(isolate, message);\n+  return ERR_STRING_TOO_LONG(isolate, message);\n }\n \n }  // namespace node"
        },
        {
            "sha": "0bc2ec044ebb55d2b23e0d7e1e7457e23cad4d3c",
            "filename": "src/string_bytes.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/src%2Fstring_bytes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/src%2Fstring_bytes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstring_bytes.cc?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -113,7 +113,7 @@ class ExternString: public ResourceType {\n \n     if (str.IsEmpty()) {\n       delete h_str;\n-      *error = node::ERR_STRING_TOO_LARGE(isolate);\n+      *error = node::ERR_STRING_TOO_LONG(isolate);\n       return MaybeLocal<Value>();\n     }\n \n@@ -170,7 +170,7 @@ MaybeLocal<Value> ExternOneByteString::NewSimpleFromCopy(Isolate* isolate,\n                              v8::NewStringType::kNormal,\n                              length);\n   if (str.IsEmpty()) {\n-    *error = node::ERR_STRING_TOO_LARGE(isolate);\n+    *error = node::ERR_STRING_TOO_LONG(isolate);\n     return MaybeLocal<Value>();\n   }\n   return str.ToLocalChecked();\n@@ -188,7 +188,7 @@ MaybeLocal<Value> ExternTwoByteString::NewSimpleFromCopy(Isolate* isolate,\n                              v8::NewStringType::kNormal,\n                              length);\n   if (str.IsEmpty()) {\n-    *error = node::ERR_STRING_TOO_LARGE(isolate);\n+    *error = node::ERR_STRING_TOO_LONG(isolate);\n     return MaybeLocal<Value>();\n   }\n   return str.ToLocalChecked();\n@@ -657,7 +657,7 @@ MaybeLocal<Value> StringBytes::Encode(Isolate* isolate,\n                                 v8::NewStringType::kNormal,\n                                 buflen);\n       if (val.IsEmpty()) {\n-        *error = node::ERR_STRING_TOO_LARGE(isolate);\n+        *error = node::ERR_STRING_TOO_LONG(isolate);\n         return MaybeLocal<Value>();\n       }\n       return val.ToLocalChecked();"
        },
        {
            "sha": "c7cf1319e7c57c7202b9169baf0d5be6e7de1370",
            "filename": "test/addons/stringbytes-external-exceed-max/test-stringbytes-external-exceed-max-by-1-ascii.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-ascii.js",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-ascii.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-ascii.js?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -28,7 +28,8 @@ const stringLengthHex = kStringMaxLength.toString(16);\n common.expectsError(function() {\n   buf.toString('ascii');\n }, {\n-  message: `Cannot create a string larger than 0x${stringLengthHex} bytes`,\n-  code: 'ERR_STRING_TOO_LARGE',\n+  message: `Cannot create a string longer than 0x${stringLengthHex} ` +\n+           'characters',\n+  code: 'ERR_STRING_TOO_LONG',\n   type: Error\n });"
        },
        {
            "sha": "920124e897de328b908e04a6ecd2510de63dadf5",
            "filename": "test/addons/stringbytes-external-exceed-max/test-stringbytes-external-exceed-max-by-1-base64.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-base64.js",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-base64.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-base64.js?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -28,7 +28,8 @@ const stringLengthHex = kStringMaxLength.toString(16);\n common.expectsError(function() {\n   buf.toString('base64');\n }, {\n-  message: `Cannot create a string larger than 0x${stringLengthHex} bytes`,\n-  code: 'ERR_STRING_TOO_LARGE',\n+  message: `Cannot create a string longer than 0x${stringLengthHex} ` +\n+           'characters',\n+  code: 'ERR_STRING_TOO_LONG',\n   type: Error\n });"
        },
        {
            "sha": "f8aed7c0b2e09ba9020be5f7ec0f65b5429df0f5",
            "filename": "test/addons/stringbytes-external-exceed-max/test-stringbytes-external-exceed-max-by-1-binary.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-binary.js",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-binary.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-binary.js?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -29,8 +29,9 @@ const stringLengthHex = kStringMaxLength.toString(16);\n common.expectsError(function() {\n   buf.toString('latin1');\n }, {\n-  message: `Cannot create a string larger than 0x${stringLengthHex} bytes`,\n-  code: 'ERR_STRING_TOO_LARGE',\n+  message: `Cannot create a string longer than 0x${stringLengthHex} ` +\n+           'characters',\n+  code: 'ERR_STRING_TOO_LONG',\n   type: Error\n });\n "
        },
        {
            "sha": "18fb46e0df95b893d4491dc55115df2d2607376e",
            "filename": "test/addons/stringbytes-external-exceed-max/test-stringbytes-external-exceed-max-by-1-hex.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-hex.js",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-hex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-hex.js?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -28,7 +28,8 @@ const stringLengthHex = kStringMaxLength.toString(16);\n common.expectsError(function() {\n   buf.toString('hex');\n }, {\n-  message: `Cannot create a string larger than 0x${stringLengthHex} bytes`,\n-  code: 'ERR_STRING_TOO_LARGE',\n+  message: `Cannot create a string longer than 0x${stringLengthHex} ` +\n+           'characters',\n+  code: 'ERR_STRING_TOO_LONG',\n   type: Error\n });"
        },
        {
            "sha": "5f7221b591e8acf64bae67b79924337ec9cb64b6",
            "filename": "test/addons/stringbytes-external-exceed-max/test-stringbytes-external-exceed-max-by-1-utf8.js",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-utf8.js",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-utf8.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max-by-1-utf8.js?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -32,8 +32,9 @@ assert.throws(function() {\n }, function(e) {\n   if (e.message !== 'Array buffer allocation failed') {\n     common.expectsError({\n-      message: `Cannot create a string larger than 0x${stringLengthHex} bytes`,\n-      code: 'ERR_STRING_TOO_LARGE',\n+      message: `Cannot create a string longer than 0x${stringLengthHex} ` +\n+               'characters',\n+      code: 'ERR_STRING_TOO_LONG',\n       type: Error\n     })(e);\n     return true;\n@@ -45,7 +46,8 @@ assert.throws(function() {\n common.expectsError(function() {\n   buf.toString('utf8');\n }, {\n-  message: `Cannot create a string larger than 0x${stringLengthHex} bytes`,\n-  code: 'ERR_STRING_TOO_LARGE',\n+  message: `Cannot create a string longer than 0x${stringLengthHex} ` +\n+           'characters',\n+  code: 'ERR_STRING_TOO_LONG',\n   type: Error\n });"
        },
        {
            "sha": "e46b5f24cce02830433df15e4c7e1c2f858cce64",
            "filename": "test/addons/stringbytes-external-exceed-max/test-stringbytes-external-exceed-max.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max.js",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fstringbytes-external-exceed-max%2Ftest-stringbytes-external-exceed-max.js?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -29,7 +29,8 @@ const stringLengthHex = kStringMaxLength.toString(16);\n common.expectsError(function() {\n   buf.toString('utf16le');\n }, {\n-  message: `Cannot create a string larger than 0x${stringLengthHex} bytes`,\n-  code: 'ERR_STRING_TOO_LARGE',\n+  message: `Cannot create a string longer than 0x${stringLengthHex} ` +\n+           'characters',\n+  code: 'ERR_STRING_TOO_LONG',\n   type: Error\n });"
        },
        {
            "sha": "c5ed8559103d7730392fced9c1b05ae7745969fd",
            "filename": "test/sequential/test-fs-readfile-tostring-fail.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Fsequential%2Ftest-fs-readfile-tostring-fail.js",
            "raw_url": "https://github.com/nodejs/node/raw/362694401fc08f1eb312417487bfc2d3c9281a6e/test%2Fsequential%2Ftest-fs-readfile-tostring-fail.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-fs-readfile-tostring-fail.js?ref=362694401fc08f1eb312417487bfc2d3c9281a6e",
            "patch": "@@ -35,9 +35,9 @@ stream.on('finish', common.mustCall(function() {\n     if (err.message !== 'Array buffer allocation failed') {\n       const stringLengthHex = kStringMaxLength.toString(16);\n       common.expectsError({\n-        message: 'Cannot create a string larger than ' +\n-                 `0x${stringLengthHex} bytes`,\n-        code: 'ERR_STRING_TOO_LARGE',\n+        message: 'Cannot create a string longer than ' +\n+                 `0x${stringLengthHex} characters`,\n+        code: 'ERR_STRING_TOO_LONG',\n         type: Error\n       })(err);\n     }"
        }
    ],
    "stats": {
        "total": 65,
        "additions": 36,
        "deletions": 29
    }
}