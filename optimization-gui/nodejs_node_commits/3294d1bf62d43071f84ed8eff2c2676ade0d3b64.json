{
    "author": "danbev",
    "message": "src: remove --expose-http2 option\n\nThis commit removes the --expose-http2 option. In the code comment it\nstates that this should should be noop through v9.x, and it sounds like\nit can be removed for 10.x and above.\n\nPR-URL: https://github.com/nodejs/node/pull/20887\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "3294d1bf62d43071f84ed8eff2c2676ade0d3b64",
    "files": [
        {
            "sha": "beb1d31b71338f24b958a34289c0d8bd68f9725a",
            "filename": "benchmark/http2/headers.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/benchmark%2Fhttp2%2Fheaders.js",
            "raw_url": "https://github.com/nodejs/node/raw/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/benchmark%2Fhttp2%2Fheaders.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fhttp2%2Fheaders.js?ref=3294d1bf62d43071f84ed8eff2c2676ade0d3b64",
            "patch": "@@ -7,7 +7,7 @@ const bench = common.createBenchmark(main, {\n   n: [1e3],\n   nheaders: [0, 10, 100, 1000],\n   benchmarker: ['h2load']\n-}, { flags: ['--no-warnings', '--expose-http2'] });\n+}, { flags: ['--no-warnings'] });\n \n function main({ n, nheaders }) {\n   const http2 = require('http2');"
        },
        {
            "sha": "3415a9c69f13ec3bfc6cd23b75d2eb545950e47b",
            "filename": "benchmark/http2/respond-with-fd.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/benchmark%2Fhttp2%2Frespond-with-fd.js",
            "raw_url": "https://github.com/nodejs/node/raw/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/benchmark%2Fhttp2%2Frespond-with-fd.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fhttp2%2Frespond-with-fd.js?ref=3294d1bf62d43071f84ed8eff2c2676ade0d3b64",
            "patch": "@@ -11,7 +11,7 @@ const bench = common.createBenchmark(main, {\n   streams: [100, 200, 1000],\n   clients: [1, 2],\n   benchmarker: ['h2load']\n-}, { flags: ['--no-warnings', '--expose-http2'] });\n+}, { flags: ['--no-warnings'] });\n \n function main({ requests, streams, clients }) {\n   fs.open(file, 'r', (err, fd) => {"
        },
        {
            "sha": "f4598b815602309b860526e20029f97953a09bd9",
            "filename": "benchmark/http2/simple.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/benchmark%2Fhttp2%2Fsimple.js",
            "raw_url": "https://github.com/nodejs/node/raw/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/benchmark%2Fhttp2%2Fsimple.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fhttp2%2Fsimple.js?ref=3294d1bf62d43071f84ed8eff2c2676ade0d3b64",
            "patch": "@@ -10,7 +10,7 @@ const bench = common.createBenchmark(main, {\n   streams: [100, 200, 1000],\n   clients: [1, 2],\n   benchmarker: ['h2load']\n-}, { flags: ['--no-warnings', '--expose-http2'] });\n+}, { flags: ['--no-warnings'] });\n \n function main({ requests, streams, clients }) {\n   const http2 = require('http2');"
        },
        {
            "sha": "fc3203c6e554519a59bed3e54c0988a478777434",
            "filename": "benchmark/http2/write.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/benchmark%2Fhttp2%2Fwrite.js",
            "raw_url": "https://github.com/nodejs/node/raw/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/benchmark%2Fhttp2%2Fwrite.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fhttp2%2Fwrite.js?ref=3294d1bf62d43071f84ed8eff2c2676ade0d3b64",
            "patch": "@@ -7,7 +7,7 @@ const bench = common.createBenchmark(main, {\n   length: [64 * 1024, 128 * 1024, 256 * 1024, 1024 * 1024],\n   size: [100000],\n   benchmarker: ['h2load']\n-}, { flags: ['--no-warnings', '--expose-http2'] });\n+}, { flags: ['--no-warnings'] });\n \n function main({ streams, length, size }) {\n   const http2 = require('http2');"
        },
        {
            "sha": "fc33543a6acc62cefcaa33b8a192661f15deddb7",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=3294d1bf62d43071f84ed8eff2c2676ade0d3b64",
            "patch": "@@ -3358,7 +3358,6 @@ static void CheckIfAllowedInEnv(const char* exe, bool is_env,\n     \"--experimental-modules\",\n     \"--experimental-repl-await\",\n     \"--experimental-vm-modules\",\n-    \"--expose-http2\",   // keep as a non-op through v9.x\n     \"--force-fips\",\n     \"--icu-data-dir\",\n     \"--inspect\",\n@@ -3608,9 +3607,6 @@ static void ParseArgs(int* argc,\n     } else if (strcmp(arg, \"--expose-internals\") == 0 ||\n                strcmp(arg, \"--expose_internals\") == 0) {\n       config_expose_internals = true;\n-    } else if (strcmp(arg, \"--expose-http2\") == 0 ||\n-               strcmp(arg, \"--expose_http2\") == 0) {\n-      // Keep as a non-op through v9.x\n     } else if (strcmp(arg, \"-\") == 0) {\n       break;\n     } else if (strcmp(arg, \"--\") == 0) {"
        },
        {
            "sha": "8143f56d491cccc369db8f0f8719f92153835417",
            "filename": "test/parallel/test-http2-https-fallback-http-server-options.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/test%2Fparallel%2Ftest-http2-https-fallback-http-server-options.js",
            "raw_url": "https://github.com/nodejs/node/raw/3294d1bf62d43071f84ed8eff2c2676ade0d3b64/test%2Fparallel%2Ftest-http2-https-fallback-http-server-options.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http2-https-fallback-http-server-options.js?ref=3294d1bf62d43071f84ed8eff2c2676ade0d3b64",
            "patch": "@@ -1,4 +1,3 @@\n-// Flags: --expose-http2\n 'use strict';\n \n const common = require('../common');"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 4,
        "deletions": 9
    }
}