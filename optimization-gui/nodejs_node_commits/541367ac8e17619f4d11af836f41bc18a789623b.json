{
    "author": "quinnlangille",
    "message": "test: removed mustCallAsync from common and added inside testcase\n\nPR-URL: https://github.com/nodejs/node/pull/23467\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "541367ac8e17619f4d11af836f41bc18a789623b",
    "files": [
        {
            "sha": "63b7905113f5776ccbaa789836a8888e1fb018a0",
            "filename": "test/common/README.md",
            "status": "modified",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/541367ac8e17619f4d11af836f41bc18a789623b/test%2Fcommon%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/541367ac8e17619f4d11af836f41bc18a789623b/test%2Fcommon%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2FREADME.md?ref=541367ac8e17619f4d11af836f41bc18a789623b",
            "patch": "@@ -234,17 +234,6 @@ fail.\n \n If `fn` is not provided, an empty function will be used.\n \n-### mustCallAsync([fn][, exact])\n-* `fn` [&lt;Function>]\n-* `exact` [&lt;number>] default = 1\n-* return [&lt;Function>]\n-\n-The same as `mustCall()`, except that it is also checked that the Promise\n-returned by the function is fulfilled for each invocation of the function.\n-\n-The return value of the wrapped function is the return value of the original\n-function, if necessary wrapped as a promise.\n-\n ### mustCallAtLeast([fn][, minimum])\n * `fn` [&lt;Function>] default = () => {}\n * `minimum` [&lt;number>] default = 1"
        },
        {
            "sha": "53977beef5bc748b07b8357b75a3dedd832dc8f6",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/541367ac8e17619f4d11af836f41bc18a789623b/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/541367ac8e17619f4d11af836f41bc18a789623b/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=541367ac8e17619f4d11af836f41bc18a789623b",
            "patch": "@@ -308,12 +308,6 @@ function mustCallAtLeast(fn, minimum) {\n   return _mustCallInner(fn, minimum, 'minimum');\n }\n \n-function mustCallAsync(fn, exact) {\n-  return mustCall((...args) => {\n-    return Promise.resolve(fn(...args)).then(mustCall((val) => val));\n-  }, exact);\n-}\n-\n function _mustCallInner(fn, criteria = 1, field) {\n   if (process._exiting)\n     throw new Error('Cannot use common.mustCall*() in process exit handler');\n@@ -722,7 +716,6 @@ module.exports = {\n   isWindows,\n   localIPv6Hosts,\n   mustCall,\n-  mustCallAsync,\n   mustCallAtLeast,\n   mustNotCall,\n   nodeProcessAborted,"
        },
        {
            "sha": "068dd35049c3017b0e986c932802293478610973",
            "filename": "test/common/index.mjs",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/541367ac8e17619f4d11af836f41bc18a789623b/test%2Fcommon%2Findex.mjs",
            "raw_url": "https://github.com/nodejs/node/raw/541367ac8e17619f4d11af836f41bc18a789623b/test%2Fcommon%2Findex.mjs",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.mjs?ref=541367ac8e17619f4d11af836f41bc18a789623b",
            "patch": "@@ -26,7 +26,6 @@ const {\n   allowGlobals,\n   mustCall,\n   mustCallAtLeast,\n-  mustCallAsync,\n   hasMultiLocalhost,\n   skipIfEslintMissing,\n   canCreateSymLink,\n@@ -74,7 +73,6 @@ export {\n   allowGlobals,\n   mustCall,\n   mustCallAtLeast,\n-  mustCallAsync,\n   hasMultiLocalhost,\n   skipIfEslintMissing,\n   canCreateSymLink,"
        },
        {
            "sha": "1f9687831eb1a8f3c24ccce5d68525955cbd6f93",
            "filename": "test/parallel/test-http2-backpressure.js",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/541367ac8e17619f4d11af836f41bc18a789623b/test%2Fparallel%2Ftest-http2-backpressure.js",
            "raw_url": "https://github.com/nodejs/node/raw/541367ac8e17619f4d11af836f41bc18a789623b/test%2Fparallel%2Ftest-http2-backpressure.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http2-backpressure.js?ref=541367ac8e17619f4d11af836f41bc18a789623b",
            "patch": "@@ -12,7 +12,7 @@ const makeDuplexPair = require('../common/duplexpair');\n {\n   let req;\n   const server = http2.createServer();\n-  server.on('stream', common.mustCallAsync(async (stream, headers) => {\n+  server.on('stream', mustCallAsync(async (stream, headers) => {\n     stream.respond({\n       'content-type': 'text/html',\n       ':status': 200\n@@ -45,3 +45,9 @@ function event(ee, eventName) {\n     ee.once(eventName, common.mustCall(resolve));\n   });\n }\n+\n+function mustCallAsync(fn, exact) {\n+  return common.mustCall((...args) => {\n+    return Promise.resolve(fn(...args)).then(common.mustCall((val) => val));\n+  }, exact);\n+}"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 7,
        "deletions": 21
    }
}