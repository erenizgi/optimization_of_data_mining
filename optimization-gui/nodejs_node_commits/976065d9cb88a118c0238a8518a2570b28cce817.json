{
    "author": "joyeecheung",
    "message": "lib: do not register DOMException in a module\n\nInstead of registering it in a global scope of a native module\nand expecting that it only gets evaluated when the module is actually\ncompiled and run and will not be evaluated because the module can\nbe cached, directly register the DOMException constructor\nonto Environment during bootstrap for clarity, since this is\na side effect that has to happen during bootstrap.\n\nPR-URL: https://github.com/nodejs/node/pull/24708\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "976065d9cb88a118c0238a8518a2570b28cce817",
    "files": [
        {
            "sha": "67093089f7af08def737da9abe4f653f618646f2",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/976065d9cb88a118c0238a8518a2570b28cce817/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/976065d9cb88a118c0238a8518a2570b28cce817/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=976065d9cb88a118c0238a8518a2570b28cce817",
            "patch": "@@ -566,7 +566,9 @@\n \n   function setupDOMException() {\n     // Registers the constructor with C++.\n-    NativeModule.require('internal/domexception');\n+    const DOMException = NativeModule.require('internal/domexception');\n+    const { registerDOMException } = internalBinding('messaging');\n+    registerDOMException(DOMException);\n   }\n \n   function setupInspector(originalConsole, wrappedConsole) {"
        },
        {
            "sha": "9845919e498dae72bd2a925a042a2e3a95aff213",
            "filename": "lib/internal/domexception.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/976065d9cb88a118c0238a8518a2570b28cce817/lib%2Finternal%2Fdomexception.js",
            "raw_url": "https://github.com/nodejs/node/raw/976065d9cb88a118c0238a8518a2570b28cce817/lib%2Finternal%2Fdomexception.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fdomexception.js?ref=976065d9cb88a118c0238a8518a2570b28cce817",
            "patch": "@@ -1,6 +1,5 @@\n 'use strict';\n \n-const { registerDOMException } = internalBinding('messaging');\n const { ERR_INVALID_THIS } = require('internal/errors').codes;\n \n const internalsMap = new WeakMap();\n@@ -85,5 +84,3 @@ for (const [name, codeName, value] of [\n }\n \n module.exports = DOMException;\n-\n-registerDOMException(DOMException);"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 3,
        "deletions": 4
    }
}