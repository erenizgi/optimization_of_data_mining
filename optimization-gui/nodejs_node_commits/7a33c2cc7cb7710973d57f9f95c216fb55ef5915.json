{
    "author": "danbev",
    "message": "test: set clientOpts.port property\n\nCurrently this test will overwrite the clientOpts object with the port,\ninstead of setting the port property on the clientOpts object which\nlooks like the original intent.\n\nDoing this the test fails reporting that the fake-cnnic-root-cert has\nexpired. This is indeed true:\n$ openssl x509 -in test/fixtures/keys/fake-cnnic-root-cert.pem \\\n-text -noout\nCertificate:\n        ...\n        Validity\n            Not Before: Jun  9 17:15:16 2015 GMT\n            Not After : Mar 29 17:15:16 2018 GMT\n\nThis commit sets the errorCode to CERT_HAS_EXPIRED. I tried updating the\ncertificate using test/fixtures/keys/Makefile but then no error is\nthrown and I'm currently looking into this.\n\nPR-URL: https://github.com/nodejs/node/pull/19767\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "7a33c2cc7cb7710973d57f9f95c216fb55ef5915",
    "files": [
        {
            "sha": "2b036cb2a5583b224a37e73d0049564cad7aced3",
            "filename": "test/parallel/test-tls-cnnic-whitelist.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/7a33c2cc7cb7710973d57f9f95c216fb55ef5915/test%2Fparallel%2Ftest-tls-cnnic-whitelist.js",
            "raw_url": "https://github.com/nodejs/node/raw/7a33c2cc7cb7710973d57f9f95c216fb55ef5915/test%2Fparallel%2Ftest-tls-cnnic-whitelist.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-cnnic-whitelist.js?ref=7a33c2cc7cb7710973d57f9f95c216fb55ef5915",
            "patch": "@@ -28,7 +28,7 @@ const testCases = [\n       rejectUnauthorized: true,\n       ca: [loadPEM('fake-cnnic-root-cert')]\n     },\n-    errorCode: 'UNABLE_TO_VERIFY_LEAF_SIGNATURE'\n+    errorCode: 'CERT_HAS_EXPIRED'\n   },\n   // Test 1: for the fix of node#2061\n   // agent6-cert.pem is signed by intermediate cert of ca3.\n@@ -58,7 +58,7 @@ function runTest(tindex) {\n   const server = tls.createServer(tcase.serverOpts, (s) => {\n     s.resume();\n   }).listen(0, common.mustCall(function() {\n-    tcase.clientOpts = this.address().port;\n+    tcase.clientOpts.port = this.address().port;\n     const client = tls.connect(tcase.clientOpts);\n     client.on('error', common.mustCall((e) => {\n       assert.strictEqual(e.code, tcase.errorCode);"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}