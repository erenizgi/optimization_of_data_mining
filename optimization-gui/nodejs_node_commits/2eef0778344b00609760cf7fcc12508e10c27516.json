{
    "author": "BridgeAR",
    "message": "repl: refactor ERR_SCRIPT_EXECUTION_INTERRUPTED stack handling\n\nThe stack was removed later on instead of never being attached in\nthe first place.\n\nPR-URL: https://github.com/nodejs/node/pull/22436\nRefs: https://github.com/nodejs/node/issues/20253\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "2eef0778344b00609760cf7fcc12508e10c27516",
    "files": [
        {
            "sha": "46f81a02f0c5d59ecc3cea4559181be97e7105a3",
            "filename": "lib/repl.js",
            "status": "modified",
            "additions": 5,
            "deletions": 11,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/2eef0778344b00609760cf7fcc12508e10c27516/lib%2Frepl.js",
            "raw_url": "https://github.com/nodejs/node/raw/2eef0778344b00609760cf7fcc12508e10c27516/lib%2Frepl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Frepl.js?ref=2eef0778344b00609760cf7fcc12508e10c27516",
            "patch": "@@ -345,11 +345,6 @@ function REPLServer(prompt,\n       } catch (e) {\n         err = e;\n \n-        if (err && err.code === 'ERR_SCRIPT_EXECUTION_INTERRUPTED') {\n-          // The stack trace for this case is not very useful anyway.\n-          Object.defineProperty(err, 'stack', { value: '' });\n-        }\n-\n         if (process.domain) {\n           debug('not recoverable, send to domain');\n           process.domain.emit('error', err);\n@@ -365,7 +360,11 @@ function REPLServer(prompt,\n         if (self.breakEvalOnSigint) {\n           const interrupt = new Promise((resolve, reject) => {\n             sigintListener = () => {\n-              reject(new ERR_SCRIPT_EXECUTION_INTERRUPTED());\n+              const tmp = Error.stackTraceLimit;\n+              Error.stackTraceLimit = 0;\n+              const err = new ERR_SCRIPT_EXECUTION_INTERRUPTED();\n+              Error.stackTraceLimit = tmp;\n+              reject(err);\n             };\n             prioritizedSigintQueue.add(sigintListener);\n           });\n@@ -384,11 +383,6 @@ function REPLServer(prompt,\n           // Remove prioritized SIGINT listener if it was not called.\n           prioritizedSigintQueue.delete(sigintListener);\n \n-          if (err.code === 'ERR_SCRIPT_EXECUTION_INTERRUPTED') {\n-            // The stack trace for this case is not very useful anyway.\n-            Object.defineProperty(err, 'stack', { value: '' });\n-          }\n-\n           unpause();\n           if (err && process.domain) {\n             debug('not recoverable, send to domain');"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 5,
        "deletions": 11
    }
}