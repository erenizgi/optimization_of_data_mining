{
    "author": "cjihrig",
    "message": "buffer: remove checkNumberType()\n\ncheckNumberType() was a very thin wrapper around validateNumber().\nThis commit removes checkNumberType() and used validateNumber()\ndirectly instead.\n\nPR-URL: https://github.com/nodejs/node/pull/24815\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "adbdaf94be37462c3d174c8b519909ff27e7a118",
    "files": [
        {
            "sha": "d201924afa050219344b6d9b3f7e25e2ef770259",
            "filename": "lib/internal/buffer.js",
            "status": "modified",
            "additions": 29,
            "deletions": 33,
            "changes": 62,
            "blob_url": "https://github.com/nodejs/node/blob/adbdaf94be37462c3d174c8b519909ff27e7a118/lib%2Finternal%2Fbuffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/adbdaf94be37462c3d174c8b519909ff27e7a118/lib%2Finternal%2Fbuffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbuffer.js?ref=adbdaf94be37462c3d174c8b519909ff27e7a118",
            "patch": "@@ -26,7 +26,7 @@ float32Array[0] = -1; // 0xBF800000\n const bigEndian = uInt8Float32Array[3] === 0;\n \n function checkBounds(buf, offset, byteLength) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   if (buf[offset] === undefined || buf[offset + byteLength] === undefined)\n     boundsError(offset, buf.length - (byteLength + 1));\n }\n@@ -38,13 +38,9 @@ function checkInt(value, min, max, buf, offset, byteLength) {\n   checkBounds(buf, offset, byteLength);\n }\n \n-function checkNumberType(value, type) {\n-  validateNumber(value, type || 'offset');\n-}\n-\n function boundsError(value, length, type) {\n   if (Math.floor(value) !== value) {\n-    checkNumberType(value, type);\n+    validateNumber(value, type);\n     throw new ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value);\n   }\n \n@@ -77,7 +73,7 @@ function readUIntLE(offset, byteLength) {\n }\n \n function readUInt48LE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 5];\n   if (first === undefined || last === undefined)\n@@ -91,7 +87,7 @@ function readUInt48LE(buf, offset = 0) {\n }\n \n function readUInt40LE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 4];\n   if (first === undefined || last === undefined)\n@@ -105,7 +101,7 @@ function readUInt40LE(buf, offset = 0) {\n }\n \n function readUInt32LE(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 3];\n   if (first === undefined || last === undefined)\n@@ -118,7 +114,7 @@ function readUInt32LE(offset = 0) {\n }\n \n function readUInt24LE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 2];\n   if (first === undefined || last === undefined)\n@@ -128,7 +124,7 @@ function readUInt24LE(buf, offset = 0) {\n }\n \n function readUInt16LE(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 1];\n   if (first === undefined || last === undefined)\n@@ -138,7 +134,7 @@ function readUInt16LE(offset = 0) {\n }\n \n function readUInt8(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const val = this[offset];\n   if (val === undefined)\n     boundsError(offset, this.length - 1);\n@@ -166,7 +162,7 @@ function readUIntBE(offset, byteLength) {\n }\n \n function readUInt48BE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 5];\n   if (first === undefined || last === undefined)\n@@ -180,7 +176,7 @@ function readUInt48BE(buf, offset = 0) {\n }\n \n function readUInt40BE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 4];\n   if (first === undefined || last === undefined)\n@@ -194,7 +190,7 @@ function readUInt40BE(buf, offset = 0) {\n }\n \n function readUInt32BE(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 3];\n   if (first === undefined || last === undefined)\n@@ -207,7 +203,7 @@ function readUInt32BE(offset = 0) {\n }\n \n function readUInt24BE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 2];\n   if (first === undefined || last === undefined)\n@@ -217,7 +213,7 @@ function readUInt24BE(buf, offset = 0) {\n }\n \n function readUInt16BE(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 1];\n   if (first === undefined || last === undefined)\n@@ -246,7 +242,7 @@ function readIntLE(offset, byteLength) {\n }\n \n function readInt48LE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 5];\n   if (first === undefined || last === undefined)\n@@ -261,7 +257,7 @@ function readInt48LE(buf, offset = 0) {\n }\n \n function readInt40LE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 4];\n   if (first === undefined || last === undefined)\n@@ -275,7 +271,7 @@ function readInt40LE(buf, offset = 0) {\n }\n \n function readInt32LE(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 3];\n   if (first === undefined || last === undefined)\n@@ -288,7 +284,7 @@ function readInt32LE(offset = 0) {\n }\n \n function readInt24LE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 2];\n   if (first === undefined || last === undefined)\n@@ -299,7 +295,7 @@ function readInt24LE(buf, offset = 0) {\n }\n \n function readInt16LE(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 1];\n   if (first === undefined || last === undefined)\n@@ -310,7 +306,7 @@ function readInt16LE(offset = 0) {\n }\n \n function readInt8(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const val = this[offset];\n   if (val === undefined)\n     boundsError(offset, this.length - 1);\n@@ -338,7 +334,7 @@ function readIntBE(offset, byteLength) {\n }\n \n function readInt48BE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 5];\n   if (first === undefined || last === undefined)\n@@ -353,7 +349,7 @@ function readInt48BE(buf, offset = 0) {\n }\n \n function readInt40BE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 4];\n   if (first === undefined || last === undefined)\n@@ -367,7 +363,7 @@ function readInt40BE(buf, offset = 0) {\n }\n \n function readInt32BE(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 3];\n   if (first === undefined || last === undefined)\n@@ -380,7 +376,7 @@ function readInt32BE(offset = 0) {\n }\n \n function readInt24BE(buf, offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = buf[offset];\n   const last = buf[offset + 2];\n   if (first === undefined || last === undefined)\n@@ -391,7 +387,7 @@ function readInt24BE(buf, offset = 0) {\n }\n \n function readInt16BE(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 1];\n   if (first === undefined || last === undefined)\n@@ -403,7 +399,7 @@ function readInt16BE(offset = 0) {\n \n // Read floats\n function readFloatBackwards(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 3];\n   if (first === undefined || last === undefined)\n@@ -417,7 +413,7 @@ function readFloatBackwards(offset = 0) {\n }\n \n function readFloatForwards(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 3];\n   if (first === undefined || last === undefined)\n@@ -431,7 +427,7 @@ function readFloatForwards(offset = 0) {\n }\n \n function readDoubleBackwards(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 7];\n   if (first === undefined || last === undefined)\n@@ -449,7 +445,7 @@ function readDoubleBackwards(offset = 0) {\n }\n \n function readDoubleForwards(offset = 0) {\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   const first = this[offset];\n   const last = this[offset + 7];\n   if (first === undefined || last === undefined)\n@@ -563,7 +559,7 @@ function writeUInt16LE(value, offset = 0) {\n function writeU_Int8(buf, value, offset, min, max) {\n   value = +value;\n   // `checkInt()` can not be used here because it checks two entries.\n-  checkNumberType(offset);\n+  validateNumber(offset, 'offset');\n   if (value > max || value < min) {\n     throw new ERR_OUT_OF_RANGE('value', `>= ${min} and <= ${max}`, value);\n   }"
        }
    ],
    "stats": {
        "total": 62,
        "additions": 29,
        "deletions": 33
    }
}