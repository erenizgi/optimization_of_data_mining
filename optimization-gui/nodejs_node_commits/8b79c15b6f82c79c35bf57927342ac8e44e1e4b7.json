{
    "author": "addaleax",
    "message": "src: pass along errors from StreamBase req obj creations\n\nPR-URL: https://github.com/nodejs/node/pull/25822\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>",
    "sha": "8b79c15b6f82c79c35bf57927342ac8e44e1e4b7",
    "files": [
        {
            "sha": "7db8403ced832b3285dee33a3d094e2bc82c3bc2",
            "filename": "src/stream_base-inl.h",
            "status": "modified",
            "additions": 10,
            "deletions": 6,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/8b79c15b6f82c79c35bf57927342ac8e44e1e4b7/src%2Fstream_base-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/8b79c15b6f82c79c35bf57927342ac8e44e1e4b7/src%2Fstream_base-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstream_base-inl.h?ref=8b79c15b6f82c79c35bf57927342ac8e44e1e4b7",
            "patch": "@@ -163,9 +163,11 @@ inline int StreamBase::Shutdown(v8::Local<v8::Object> req_wrap_obj) {\n   HandleScope handle_scope(env->isolate());\n \n   if (req_wrap_obj.IsEmpty()) {\n-    req_wrap_obj =\n-        env->shutdown_wrap_template()\n-            ->NewInstance(env->context()).ToLocalChecked();\n+    if (!env->shutdown_wrap_template()\n+             ->NewInstance(env->context())\n+             .ToLocal(&req_wrap_obj)) {\n+      return UV_EBUSY;\n+    }\n     StreamReq::ResetObject(req_wrap_obj);\n   }\n \n@@ -211,9 +213,11 @@ inline StreamWriteResult StreamBase::Write(\n   HandleScope handle_scope(env->isolate());\n \n   if (req_wrap_obj.IsEmpty()) {\n-    req_wrap_obj =\n-        env->write_wrap_template()\n-            ->NewInstance(env->context()).ToLocalChecked();\n+    if (!env->write_wrap_template()\n+             ->NewInstance(env->context())\n+             .ToLocal(&req_wrap_obj)) {\n+      return StreamWriteResult { false, UV_EBUSY, nullptr, 0 };\n+    }\n     StreamReq::ResetObject(req_wrap_obj);\n   }\n "
        }
    ],
    "stats": {
        "total": 16,
        "additions": 10,
        "deletions": 6
    }
}