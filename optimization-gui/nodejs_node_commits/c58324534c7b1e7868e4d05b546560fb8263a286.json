{
    "author": "addaleax",
    "message": "src: remove inspector main_thread_request_ field\n\nThis is redundant to the platform notification mechanism, and\nthe handle may not be cleaned up util we attempt to close the loop.\n\nRefs: https://github.com/nodejs/node/pull/26089\nRefs: https://github.com/nodejs/node/pull/26006\n\nPR-URL: https://github.com/nodejs/node/pull/26137\nReviewed-By: Eugene Ostroukhov <eostroukhov@google.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>",
    "sha": "c58324534c7b1e7868e4d05b546560fb8263a286",
    "files": [
        {
            "sha": "25b6270e4124641936e7e65bae0529e34abfd4e1",
            "filename": "src/inspector/main_thread_interface.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/c58324534c7b1e7868e4d05b546560fb8263a286/src%2Finspector%2Fmain_thread_interface.cc",
            "raw_url": "https://github.com/nodejs/node/raw/c58324534c7b1e7868e4d05b546560fb8263a286/src%2Finspector%2Fmain_thread_interface.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector%2Fmain_thread_interface.cc?ref=c58324534c7b1e7868e4d05b546560fb8263a286",
            "patch": "@@ -224,11 +224,6 @@ MainThreadInterface::MainThreadInterface(Agent* agent, uv_loop_t* loop,\n                                          v8::Platform* platform)\n                                          : agent_(agent), isolate_(isolate),\n                                            platform_(platform) {\n-  main_thread_request_.reset(new AsyncAndInterface(uv_async_t(), this));\n-  CHECK_EQ(0, uv_async_init(loop, &main_thread_request_->first,\n-                            DispatchMessagesAsyncCallback));\n-  // Inspector uv_async_t should not prevent main loop shutdown.\n-  uv_unref(reinterpret_cast<uv_handle_t*>(&main_thread_request_->first));\n }\n \n MainThreadInterface::~MainThreadInterface() {\n@@ -253,7 +248,6 @@ void MainThreadInterface::Post(std::unique_ptr<Request> request) {\n   bool needs_notify = requests_.empty();\n   requests_.push_back(std::move(request));\n   if (needs_notify) {\n-    CHECK_EQ(0, uv_async_send(&main_thread_request_->first));\n     if (isolate_ != nullptr && platform_ != nullptr) {\n       std::shared_ptr<v8::TaskRunner> taskrunner =\n         platform_->GetForegroundTaskRunner(isolate_);"
        },
        {
            "sha": "1c644144cca991dd4afae18181da4f8778eeb407",
            "filename": "src/inspector/main_thread_interface.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/c58324534c7b1e7868e4d05b546560fb8263a286/src%2Finspector%2Fmain_thread_interface.h",
            "raw_url": "https://github.com/nodejs/node/raw/c58324534c7b1e7868e4d05b546560fb8263a286/src%2Finspector%2Fmain_thread_interface.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector%2Fmain_thread_interface.h?ref=c58324534c7b1e7868e4d05b546560fb8263a286",
            "patch": "@@ -105,7 +105,6 @@ class MainThreadInterface {\n   Agent* const agent_;\n   v8::Isolate* const isolate_;\n   v8::Platform* const platform_;\n-  DeleteFnPtr<AsyncAndInterface, CloseAsync> main_thread_request_;\n   std::shared_ptr<MainThreadHandle> handle_;\n   std::unordered_map<int, std::unique_ptr<Deletable>> managed_objects_;\n };"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 0,
        "deletions": 7
    }
}