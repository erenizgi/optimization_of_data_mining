{
    "author": "targos",
    "message": "deps: update V8 to 6.8.275.24\n\nPR-URL: https://github.com/nodejs/node/pull/21079\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Yang Guo <yangguo@chromium.org>",
    "sha": "6a31d05340b22fc413ee83eaacd0a5565bbbe799",
    "files": [
        {
            "sha": "d38eef01ae52033e1d31c77ab19471101ae3215c",
            "filename": "deps/v8/.gitattributes",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2F.gitattributes",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2F.gitattributes",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.gitattributes?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -0,0 +1,2 @@\n+# Automatically normalize line endings (to LF) for all text-based files.\n+* text=auto"
        },
        {
            "sha": "ba54db5505663df8e2fa3c8185f7c50d99963fb1",
            "filename": "deps/v8/AUTHORS",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FAUTHORS",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FAUTHORS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FAUTHORS?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -32,6 +32,7 @@ Facebook, Inc. <*@fb.com>\n Facebook, Inc. <*@oculus.com>\n Vewd Software AS <*@vewd.com>\n Groupon <*@groupon.com>\n+Cloudflare, Inc. <*@cloudflare.com>\n \n Aaron Bieber <deftly@gmail.com>\n Abdulla Kamar <abdulla.kamar@gmail.com>\n@@ -41,6 +42,7 @@ Alexander Botero-Lowry <alexbl@FreeBSD.org>\n Alexander Karpinsky <homm86@gmail.com>\n Alexandre Vassalotti <avassalotti@gmail.com>\n Alexis Campailla <alexis@janeasystems.com>\n+Amos Lim <eui-sang.lim@samsung.com>\n Andreas Anyuru <andreas.anyuru@gmail.com>\n Andrew Paprocki <andrew@ishiboo.com>\n Andrei Kashcha <anvaka@gmail.com>\n@@ -61,6 +63,7 @@ Daniel Andersson <kodandersson@gmail.com>\n Daniel Bevenius <daniel.bevenius@gmail.com>\n Daniel James <dnljms@gmail.com>\n Deon Dior <diaoyuanjie@gmail.com>\n+Dominic Farolini <domfarolino@gmail.com>\n Douglas Crosher <dtc-v8@scieneer.com>\n Dusan Milosavljevic <dusan.m.milosavljevic@gmail.com>\n Erich Ocean <erich.ocean@me.com>\n@@ -75,14 +78,14 @@ Gwang Yoon Hwang <ryumiel@company100.net>\n Henrique Ferreiro <henrique.ferreiro@gmail.com>\n Hirofumi Mako <mkhrfm@gmail.com>\n Honggyu Kim <honggyu.kp@gmail.com>\n+Ingvar Stepanyan <me@rreverser.com>\n Ioseb Dzmanashvili <ioseb.dzmanashvili@gmail.com>\n Isiah Meadows <impinball@gmail.com>\n Jaime Bernardo <jaime@janeasystems.com>\n Jan de Mooij <jandemooij@gmail.com>\n Jan Krems <jan.krems@gmail.com>\n Jay Freeman <saurik@saurik.com>\n James Pike <g00gle@chilon.net>\n-James M Snell <jasnell@gmail.com>\n Jianghua Yang <jianghua.yjh@alibaba-inc.com>\n Joel Stanley <joel@jms.id.au>\n Johan Bergstr√∂m <johan@bergstroem.nu>\n@@ -126,8 +129,10 @@ Paul Lind <plind44@gmail.com>\n Qingyan Li <qingyan.liqy@alibaba-inc.com>\n Qiuyi Zhang <qiuyi.zqy@alibaba-inc.com>\n Rafal Krypa <rafal@krypa.net>\n+Ray Glover <ray@rayglover.net>\n Refael Ackermann <refack@gmail.com>\n Rene Rebe <rene@exactcode.de>\n+Rick Waldron <waldron.rick@gmail.com>\n Rob Wu <rob@robwu.nl>\n Robert Mustacchi <rm@fingolfin.org>\n Robert Nagy <robert.nagy@gmail.com>"
        },
        {
            "sha": "456a318c1c60527ae264cc3b8326cbd860dc5d2f",
            "filename": "deps/v8/BUILD.gn",
            "status": "modified",
            "additions": 243,
            "deletions": 35,
            "changes": 278,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FBUILD.gn",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FBUILD.gn",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FBUILD.gn?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -70,7 +70,7 @@ declare_args() {\n \n   # Enable embedded builtins.\n   # TODO(jgruber,v8:6666): Support ia32 and maybe MSVC.\n-  # TODO(jgruber,v8:6666): Re-enable after the M67 branch point.\n+  # TODO(jgruber,v8:6666): Re-enable.\n   v8_enable_embedded_builtins = false\n \n   # Enable code-generation-time checking of types in the CodeStubAssembler.\n@@ -190,7 +190,10 @@ v8_toolset_for_shell = \"host\"\n config(\"internal_config\") {\n   visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n \n-  include_dirs = [ \".\" ]\n+  include_dirs = [\n+    \".\",\n+    \"$target_gen_dir\",\n+  ]\n \n   if (is_component_build) {\n     defines = [ \"BUILDING_V8_SHARED\" ]\n@@ -200,7 +203,10 @@ config(\"internal_config\") {\n config(\"internal_config_base\") {\n   visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n \n-  include_dirs = [ \".\" ]\n+  include_dirs = [\n+    \".\",\n+    \"$target_gen_dir\",\n+  ]\n }\n \n # This config should be applied to code using the libplatform.\n@@ -569,7 +575,14 @@ config(\"toolchain\") {\n       \"/wd4703\",  # Potentially uninitialized local pointer variable.\n       \"/wd4709\",  # Comma operator within array index expr (bugged).\n       \"/wd4714\",  # Function marked forceinline not inlined.\n+\n+      # MSVC assumes that control can get past an exhaustive switch and then\n+      # warns if there's no return there (see https://crbug.com/v8/7658)\n+      \"/wd4715\",  # Not all control paths return a value.\n+\n       \"/wd4718\",  # Recursive call has no side-effect.\n+      \"/wd4723\",  # https://crbug.com/v8/7771\n+      \"/wd4724\",  # https://crbug.com/v8/7771\n       \"/wd4800\",  # Forcing value to bool.\n     ]\n   }\n@@ -580,6 +593,10 @@ config(\"toolchain\") {\n       # signed overflow does not occur. Generates false positives (see\n       # http://crbug.com/v8/6341).\n       \"-Wno-strict-overflow\",\n+\n+      # GCC assumes that control can get past an exhaustive switch and then\n+      # warns if there's no return there (see https://crbug.com/v8/7658).\n+      \"-Wno-return-type\",\n     ]\n   }\n }\n@@ -827,6 +844,99 @@ action(\"postmortem-metadata\") {\n          rebase_path(sources, root_build_dir)\n }\n \n+torque_files = [\n+  \"src/builtins/base.tq\",\n+  \"src/builtins/array.tq\",\n+  \"src/builtins/typed-array.tq\",\n+  \"test/torque/test-torque.tq\",\n+]\n+\n+torque_modules = [\n+  \"base\",\n+  \"array\",\n+  \"typed-array\",\n+  \"test\",\n+]\n+\n+action(\"run_torque\") {\n+  visibility = [\n+    \":*\",\n+    \"tools/gcmole/:*\",\n+    \"test/cctest/:*\",\n+  ]\n+\n+  # We reuse the snapshot toolchain for building torque to not build v8_libbase\n+  # on the host more than once. On mips with big endian, the snapshot toolchain\n+  # is the target toolchain and, hence, can't be used.\n+  v8_torque_toolchain = v8_snapshot_toolchain\n+  if (host_cpu == \"x64\" &&\n+      (v8_current_cpu == \"mips\" || v8_current_cpu == \"mips64\")) {\n+    v8_torque_toolchain = \"//build/toolchain/linux:clang_x64\"\n+  }\n+\n+  deps = [\n+    \":torque($v8_torque_toolchain)\",\n+  ]\n+\n+  script = \"tools/run.py\"\n+\n+  sources = torque_files\n+\n+  outputs = [\n+    \"$target_gen_dir/torque-generated/builtin-definitions-from-dsl.h\",\n+  ]\n+  foreach(module, torque_modules) {\n+    outputs += [\n+      \"$target_gen_dir/torque-generated/builtins-$module-from-dsl-gen.cc\",\n+      \"$target_gen_dir/torque-generated/builtins-$module-from-dsl-gen.h\",\n+    ]\n+  }\n+\n+  args = [\n+    \"./\" + rebase_path(get_label_info(\":torque($v8_torque_toolchain)\",\n+                                      \"root_out_dir\") + \"/torque\",\n+                       root_build_dir),\n+    \"-o\",\n+    rebase_path(\"$target_gen_dir/torque-generated\", root_build_dir),\n+  ]\n+\n+  foreach(file, torque_files) {\n+    args += [ rebase_path(file, root_build_dir) ]\n+  }\n+}\n+\n+v8_source_set(\"torque_generated_core\") {\n+  visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n+\n+  deps = [\n+    \":run_torque\",\n+  ]\n+\n+  sources = [\n+    \"$target_gen_dir/torque-generated/builtin-definitions-from-dsl.h\",\n+  ]\n+\n+  configs = [ \":internal_config\" ]\n+}\n+\n+v8_source_set(\"torque_generated_initializers\") {\n+  visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n+\n+  deps = [\n+    \":run_torque\",\n+  ]\n+\n+  sources = []\n+  foreach(module, torque_modules) {\n+    sources += [\n+      \"$target_gen_dir/torque-generated/builtins-$module-from-dsl-gen.cc\",\n+      \"$target_gen_dir/torque-generated/builtins-$module-from-dsl-gen.h\",\n+    ]\n+  }\n+\n+  configs = [ \":internal_config\" ]\n+}\n+\n # Template to generate different V8 snapshots based on different runtime flags.\n # Can be invoked with run_mksnapshot(<name>). The target will resolve to\n # run_mksnapshot_<name>. If <name> is \"default\", no file suffixes will be used.\n@@ -1054,6 +1164,9 @@ if (v8_use_snapshot && !v8_use_external_startup_data) {\n       \":run_mksnapshot_default\",\n     ]\n \n+    # Do not publicize any header to remove build dependency.\n+    public = []\n+\n     sources = [\n       \"$target_gen_dir/experimental-extras-libraries.cc\",\n       \"$target_gen_dir/extras-libraries.cc\",\n@@ -1104,6 +1217,9 @@ if (v8_use_snapshot && v8_use_external_startup_data) {\n       \"src/snapshot/snapshot-external.cc\",\n     ]\n \n+    # Do not publicize any header to remove build dependency.\n+    public = []\n+\n     if (v8_enable_embedded_builtins) {\n       sources += [ \"$target_gen_dir/embedded.cc\" ]\n \n@@ -1130,6 +1246,7 @@ v8_source_set(\"v8_initializers\") {\n   ]\n \n   deps = [\n+    \":torque_generated_initializers\",\n     \":v8_base\",\n   ]\n \n@@ -1180,8 +1297,8 @@ v8_source_set(\"v8_initializers\") {\n     \"src/builtins/builtins-string-gen.cc\",\n     \"src/builtins/builtins-string-gen.h\",\n     \"src/builtins/builtins-symbol-gen.cc\",\n-    \"src/builtins/builtins-typedarray-gen.cc\",\n-    \"src/builtins/builtins-typedarray-gen.h\",\n+    \"src/builtins/builtins-typed-array-gen.cc\",\n+    \"src/builtins/builtins-typed-array-gen.h\",\n     \"src/builtins/builtins-utils-gen.h\",\n     \"src/builtins/builtins-wasm-gen.cc\",\n     \"src/builtins/growable-fixed-array-gen.cc\",\n@@ -1340,6 +1457,7 @@ v8_source_set(\"v8_base\") {\n     \"src/api.h\",\n     \"src/arguments.cc\",\n     \"src/arguments.h\",\n+    \"src/asan.h\",\n     \"src/asmjs/asm-js.cc\",\n     \"src/asmjs/asm-js.h\",\n     \"src/asmjs/asm-names.h\",\n@@ -1351,6 +1469,7 @@ v8_source_set(\"v8_base\") {\n     \"src/asmjs/asm-types.h\",\n     \"src/asmjs/switch-logic.cc\",\n     \"src/asmjs/switch-logic.h\",\n+    \"src/assembler-arch.h\",\n     \"src/assembler-inl.h\",\n     \"src/assembler.cc\",\n     \"src/assembler.h\",\n@@ -1420,8 +1539,7 @@ v8_source_set(\"v8_base\") {\n     \"src/builtins/builtins-sharedarraybuffer.cc\",\n     \"src/builtins/builtins-string.cc\",\n     \"src/builtins/builtins-symbol.cc\",\n-    \"src/builtins/builtins-trace.cc\",\n-    \"src/builtins/builtins-typedarray.cc\",\n+    \"src/builtins/builtins-typed-array.cc\",\n     \"src/builtins/builtins-utils.h\",\n     \"src/builtins/builtins.cc\",\n     \"src/builtins/builtins.h\",\n@@ -1439,6 +1557,8 @@ v8_source_set(\"v8_base\") {\n     \"src/code-events.h\",\n     \"src/code-factory.cc\",\n     \"src/code-factory.h\",\n+    \"src/code-reference.cc\",\n+    \"src/code-reference.h\",\n     \"src/code-stub-assembler.cc\",\n     \"src/code-stub-assembler.h\",\n     \"src/code-stubs-utils.h\",\n@@ -1498,6 +1618,8 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/common-operator.h\",\n     \"src/compiler/compiler-source-position-table.cc\",\n     \"src/compiler/compiler-source-position-table.h\",\n+    \"src/compiler/constant-folding-reducer.cc\",\n+    \"src/compiler/constant-folding-reducer.h\",\n     \"src/compiler/control-equivalence.cc\",\n     \"src/compiler/control-equivalence.h\",\n     \"src/compiler/control-flow-optimizer.cc\",\n@@ -1540,8 +1662,6 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/instruction.h\",\n     \"src/compiler/int64-lowering.cc\",\n     \"src/compiler/int64-lowering.h\",\n-    \"src/compiler/js-builtin-reducer.cc\",\n-    \"src/compiler/js-builtin-reducer.h\",\n     \"src/compiler/js-call-reducer.cc\",\n     \"src/compiler/js-call-reducer.h\",\n     \"src/compiler/js-context-specialization.cc\",\n@@ -1582,6 +1702,8 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/loop-variable-optimizer.h\",\n     \"src/compiler/machine-graph-verifier.cc\",\n     \"src/compiler/machine-graph-verifier.h\",\n+    \"src/compiler/machine-graph.cc\",\n+    \"src/compiler/machine-graph.h\",\n     \"src/compiler/machine-operator-reducer.cc\",\n     \"src/compiler/machine-operator-reducer.h\",\n     \"src/compiler/machine-operator.cc\",\n@@ -1597,6 +1719,8 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/node-marker.h\",\n     \"src/compiler/node-matchers.cc\",\n     \"src/compiler/node-matchers.h\",\n+    \"src/compiler/node-origin-table.cc\",\n+    \"src/compiler/node-origin-table.h\",\n     \"src/compiler/node-properties.cc\",\n     \"src/compiler/node-properties.h\",\n     \"src/compiler/node.cc\",\n@@ -1648,6 +1772,8 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/store-store-elimination.h\",\n     \"src/compiler/type-cache.cc\",\n     \"src/compiler/type-cache.h\",\n+    \"src/compiler/type-narrowing-reducer.cc\",\n+    \"src/compiler/type-narrowing-reducer.h\",\n     \"src/compiler/typed-optimization.cc\",\n     \"src/compiler/typed-optimization.h\",\n     \"src/compiler/typer.cc\",\n@@ -1661,7 +1787,6 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/verifier.h\",\n     \"src/compiler/wasm-compiler.cc\",\n     \"src/compiler/wasm-compiler.h\",\n-    \"src/compiler/wasm-linkage.cc\",\n     \"src/compiler/zone-stats.cc\",\n     \"src/compiler/zone-stats.h\",\n     \"src/contexts-inl.h\",\n@@ -1922,11 +2047,11 @@ v8_source_set(\"v8_base\") {\n     \"src/lookup-cache.h\",\n     \"src/lookup.cc\",\n     \"src/lookup.h\",\n+    \"src/lsan.h\",\n     \"src/machine-type.cc\",\n     \"src/machine-type.h\",\n     \"src/macro-assembler-inl.h\",\n     \"src/macro-assembler.h\",\n-    \"src/managed.h\",\n     \"src/map-updater.cc\",\n     \"src/map-updater.h\",\n     \"src/messages.cc\",\n@@ -1939,6 +2064,8 @@ v8_source_set(\"v8_base\") {\n     \"src/objects-printer.cc\",\n     \"src/objects.cc\",\n     \"src/objects.h\",\n+    \"src/objects/api-callbacks-inl.h\",\n+    \"src/objects/api-callbacks.h\",\n     \"src/objects/arguments-inl.h\",\n     \"src/objects/arguments.h\",\n     \"src/objects/bigint.cc\",\n@@ -1964,6 +2091,9 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/js-array.h\",\n     \"src/objects/js-collection-inl.h\",\n     \"src/objects/js-collection.h\",\n+    \"src/objects/js-locale-inl.h\",\n+    \"src/objects/js-locale.cc\",\n+    \"src/objects/js-locale.h\",\n     \"src/objects/js-promise-inl.h\",\n     \"src/objects/js-promise.h\",\n     \"src/objects/js-regexp-inl.h\",\n@@ -1973,6 +2103,8 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/literal-objects-inl.h\",\n     \"src/objects/literal-objects.cc\",\n     \"src/objects/literal-objects.h\",\n+    \"src/objects/managed.cc\",\n+    \"src/objects/managed.h\",\n     \"src/objects/map-inl.h\",\n     \"src/objects/map.h\",\n     \"src/objects/maybe-object-inl.h\",\n@@ -1986,6 +2118,9 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/name.h\",\n     \"src/objects/object-macros-undef.h\",\n     \"src/objects/object-macros.h\",\n+    \"src/objects/ordered-hash-table-inl.h\",\n+    \"src/objects/ordered-hash-table.cc\",\n+    \"src/objects/ordered-hash-table.h\",\n     \"src/objects/promise-inl.h\",\n     \"src/objects/promise.h\",\n     \"src/objects/property-descriptor-object-inl.h\",\n@@ -2002,6 +2137,8 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/string.h\",\n     \"src/objects/template-objects.cc\",\n     \"src/objects/template-objects.h\",\n+    \"src/objects/templates-inl.h\",\n+    \"src/objects/templates.h\",\n     \"src/optimized-compilation-info.cc\",\n     \"src/optimized-compilation-info.h\",\n     \"src/ostreams.cc\",\n@@ -2208,6 +2345,7 @@ v8_source_set(\"v8_base\") {\n     \"src/transitions-inl.h\",\n     \"src/transitions.cc\",\n     \"src/transitions.h\",\n+    \"src/trap-handler/handler-inside.cc\",\n     \"src/trap-handler/handler-outside.cc\",\n     \"src/trap-handler/handler-shared.cc\",\n     \"src/trap-handler/trap-handler-internal.h\",\n@@ -2248,13 +2386,14 @@ v8_source_set(\"v8_base\") {\n     \"src/wasm/baseline/liftoff-assembler.cc\",\n     \"src/wasm/baseline/liftoff-assembler.h\",\n     \"src/wasm/baseline/liftoff-compiler.cc\",\n+    \"src/wasm/baseline/liftoff-compiler.h\",\n     \"src/wasm/baseline/liftoff-register.h\",\n-    \"src/wasm/compilation-manager.cc\",\n-    \"src/wasm/compilation-manager.h\",\n     \"src/wasm/decoder.h\",\n     \"src/wasm/function-body-decoder-impl.h\",\n     \"src/wasm/function-body-decoder.cc\",\n     \"src/wasm/function-body-decoder.h\",\n+    \"src/wasm/function-compiler.cc\",\n+    \"src/wasm/function-compiler.h\",\n     \"src/wasm/leb-helper.h\",\n     \"src/wasm/local-decl-encoder.cc\",\n     \"src/wasm/local-decl-encoder.h\",\n@@ -2268,6 +2407,7 @@ v8_source_set(\"v8_base\") {\n     \"src/wasm/signature-map.h\",\n     \"src/wasm/streaming-decoder.cc\",\n     \"src/wasm/streaming-decoder.h\",\n+    \"src/wasm/value-type.h\",\n     \"src/wasm/wasm-code-manager.cc\",\n     \"src/wasm/wasm-code-manager.h\",\n     \"src/wasm/wasm-code-specialization.cc\",\n@@ -2283,6 +2423,7 @@ v8_source_set(\"v8_base\") {\n     \"src/wasm/wasm-js.cc\",\n     \"src/wasm/wasm-js.h\",\n     \"src/wasm/wasm-limits.h\",\n+    \"src/wasm/wasm-linkage.h\",\n     \"src/wasm/wasm-memory.cc\",\n     \"src/wasm/wasm-memory.h\",\n     \"src/wasm/wasm-module-builder.cc\",\n@@ -2389,7 +2530,13 @@ v8_source_set(\"v8_base\") {\n       \"src/x64/sse-instr.h\",\n     ]\n     if (is_linux) {\n-      sources += [ \"src/trap-handler/handler-inside.cc\" ]\n+      sources += [\n+        \"src/trap-handler/handler-inside-linux.cc\",\n+        \"src/trap-handler/handler-outside-linux.cc\",\n+      ]\n+    }\n+    if (is_win) {\n+      sources += [ \"src/trap-handler/handler-outside-win.cc\" ]\n     }\n   } else if (v8_current_cpu == \"arm\") {\n     sources += [  ### gcmole(arch:arm) ###\n@@ -2598,6 +2745,7 @@ v8_source_set(\"v8_base\") {\n \n   defines = []\n   deps = [\n+    \":torque_generated_core\",\n     \":v8_headers\",\n     \":v8_libbase\",\n     \":v8_libsampler\",\n@@ -2620,6 +2768,9 @@ v8_source_set(\"v8_base\") {\n       \"src/intl.h\",\n       \"src/objects/intl-objects.cc\",\n       \"src/objects/intl-objects.h\",\n+      \"src/objects/js-locale-inl.h\",\n+      \"src/objects/js-locale.cc\",\n+      \"src/objects/js-locale.h\",\n       \"src/runtime/runtime-intl.cc\",\n     ]\n   }\n@@ -2699,6 +2850,8 @@ v8_component(\"v8_libbase\") {\n \n   public_configs = [ \":libbase_config\" ]\n \n+  public_deps = []\n+\n   data = []\n \n   data_deps = []\n@@ -2770,6 +2923,7 @@ v8_component(\"v8_libbase\") {\n       \"src/base/debug/stack_trace_fuchsia.cc\",\n       \"src/base/platform/platform-fuchsia.cc\",\n     ]\n+    public_deps += [ \"//third_party/fuchsia-sdk:launchpad\" ]\n   } else if (is_mac) {\n     sources += [\n       \"src/base/debug/stack_trace_posix.cc\",\n@@ -2925,6 +3079,73 @@ if (v8_use_snapshot && current_toolchain == v8_snapshot_toolchain) {\n   }\n }\n \n+if (current_toolchain == v8_snapshot_toolchain) {\n+  v8_executable(\"torque\") {\n+    visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n+\n+    defines = [ \"ANTLR4CPP_STATIC\" ]\n+\n+    include_dirs = [\n+      \"third_party/antlr4/runtime/Cpp/runtime/src\",\n+      \"src/torque\",\n+    ]\n+\n+    sources = [\n+      \"src/torque/TorqueBaseVisitor.cpp\",\n+      \"src/torque/TorqueBaseVisitor.h\",\n+      \"src/torque/TorqueLexer.cpp\",\n+      \"src/torque/TorqueLexer.h\",\n+      \"src/torque/TorqueParser.cpp\",\n+      \"src/torque/TorqueParser.h\",\n+      \"src/torque/TorqueVisitor.cpp\",\n+      \"src/torque/TorqueVisitor.h\",\n+      \"src/torque/ast-generator.cc\",\n+      \"src/torque/ast-generator.h\",\n+      \"src/torque/ast.h\",\n+      \"src/torque/contextual.h\",\n+      \"src/torque/declarable.cc\",\n+      \"src/torque/declarable.h\",\n+      \"src/torque/declaration-visitor.cc\",\n+      \"src/torque/declaration-visitor.h\",\n+      \"src/torque/declarations.cc\",\n+      \"src/torque/declarations.h\",\n+      \"src/torque/file-visitor.cc\",\n+      \"src/torque/file-visitor.h\",\n+      \"src/torque/global-context.h\",\n+      \"src/torque/implementation-visitor.cc\",\n+      \"src/torque/implementation-visitor.h\",\n+      \"src/torque/scope.cc\",\n+      \"src/torque/scope.h\",\n+      \"src/torque/torque.cc\",\n+      \"src/torque/type-oracle.h\",\n+      \"src/torque/types.cc\",\n+      \"src/torque/types.h\",\n+      \"src/torque/utils.cc\",\n+      \"src/torque/utils.h\",\n+    ]\n+\n+    deps = [\n+      \":v8_libbase\",\n+      \"third_party/antlr4:antlr4\",\n+      \"//build/config:exe_and_shlib_deps\",\n+      \"//build/win:default_exe_manifest\",\n+    ]\n+\n+    remove_configs = [\n+      \"//build/config/compiler:no_rtti\",\n+      \"//build/config/compiler:no_exceptions\",\n+    ]\n+\n+    configs = [\n+      \"//build/config/compiler:rtti\",\n+      \"//build/config/compiler:exceptions\",\n+      \"third_party/antlr4:antlr-compatibility\",\n+      \":external_config\",\n+      \":internal_config_base\",\n+    ]\n+  }\n+}\n+\n ###############################################################################\n # Public targets\n #\n@@ -2942,7 +3163,6 @@ group(\"gn_all\") {\n     \":d8\",\n     \":v8_fuzzers\",\n     \":v8_hello_world\",\n-    \":v8_parser_shell\",\n     \":v8_sample_process\",\n     \"test:gn_all\",\n     \"tools:gn_all\",\n@@ -3144,26 +3364,6 @@ v8_executable(\"v8_sample_process\") {\n   ]\n }\n \n-v8_executable(\"v8_parser_shell\") {\n-  sources = [\n-    \"tools/parser-shell.cc\",\n-    \"tools/shell-utils.h\",\n-  ]\n-\n-  configs = [\n-    \":external_config\",\n-    \":internal_config_base\",\n-  ]\n-\n-  deps = [\n-    \":v8\",\n-    \":v8_libbase\",\n-    \":v8_libplatform\",\n-    \"//build/config:exe_and_shlib_deps\",\n-    \"//build/win:default_exe_manifest\",\n-  ]\n-}\n-\n if (want_v8_shell) {\n   v8_executable(\"v8_shell\") {\n     sources = [\n@@ -3302,6 +3502,10 @@ v8_source_set(\"wasm_module_runner\") {\n     \"test/common/wasm/wasm-module-runner.h\",\n   ]\n \n+  deps = [\n+    \":torque_generated_core\",\n+  ]\n+\n   configs = [\n     \":external_config\",\n     \":internal_config_base\",\n@@ -3375,6 +3579,10 @@ v8_source_set(\"lib_wasm_fuzzer_common\") {\n     \"test/fuzzer/wasm-fuzzer-common.h\",\n   ]\n \n+  deps = [\n+    \":torque_generated_core\",\n+  ]\n+\n   configs = [\n     \":external_config\",\n     \":internal_config_base\","
        },
        {
            "sha": "437c09b4d0fb049b45ff980f968e45ccb5ee845b",
            "filename": "deps/v8/ChangeLog",
            "status": "modified",
            "additions": 1385,
            "deletions": 0,
            "changes": 1385,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FChangeLog",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FChangeLog",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FChangeLog?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -1,3 +1,1388 @@\n+2018-05-22: Version 6.8.275\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.274\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.273\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.272\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.271\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.270\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.269\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.268\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.267\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-22: Version 6.8.266\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-21: Version 6.8.265\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-21: Version 6.8.264\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-21: Version 6.8.263\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-21: Version 6.8.262\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-19: Version 6.8.261\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.260\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.259\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.258\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.257\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.256\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.255\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.254\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.253\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.252\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.251\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.250\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.249\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.248\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-18: Version 6.8.247\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-17: Version 6.8.246\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-17: Version 6.8.245\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-17: Version 6.8.244\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-17: Version 6.8.243\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-17: Version 6.8.242\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.241\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.240\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.239\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.238\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.237\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.236\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.235\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.234\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-16: Version 6.8.233\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-15: Version 6.8.232\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-15: Version 6.8.231\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-15: Version 6.8.230\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-15: Version 6.8.229\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-15: Version 6.8.228\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-15: Version 6.8.227\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-15: Version 6.8.226\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.225\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.224\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.223\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.222\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.221\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.220\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.219\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.218\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.217\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.216\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.215\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.214\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.213\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.212\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.211\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.210\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.209\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-14: Version 6.8.208\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-11: Version 6.8.207\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-11: Version 6.8.206\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-11: Version 6.8.205\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-11: Version 6.8.204\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-11: Version 6.8.203\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-11: Version 6.8.202\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-11: Version 6.8.201\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-11: Version 6.8.200\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-10: Version 6.8.199\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.198\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.197\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.196\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.195\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.194\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.193\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.192\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.191\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.190\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-08: Version 6.8.189\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.188\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.187\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.186\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.185\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.184\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.183\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.182\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.181\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.180\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.179\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.178\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-07: Version 6.8.177\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-05: Version 6.8.176\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.175\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.174\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.173\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.172\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.171\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.170\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.169\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.168\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.167\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.166\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.165\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.164\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-04: Version 6.8.163\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.162\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.161\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.160\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.159\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.158\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.157\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.156\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.155\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.154\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.153\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.152\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.151\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.150\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.149\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.148\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.147\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.146\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.145\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.144\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.143\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.142\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.141\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-03: Version 6.8.140\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.139\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.138\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.137\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.136\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.135\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.134\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.133\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.132\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.131\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.130\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.129\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.128\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.127\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.126\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-02: Version 6.8.125\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-01: Version 6.8.124\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-01: Version 6.8.123\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-01: Version 6.8.122\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-01: Version 6.8.121\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-05-01: Version 6.8.120\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.119\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.118\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.117\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.116\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.115\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.114\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.113\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.112\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.111\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.110\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.109\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.108\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-30: Version 6.8.107\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-29: Version 6.8.106\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.105\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.104\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.103\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.102\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.101\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.100\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.99\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.98\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.97\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.96\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.95\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.94\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.93\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.92\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.91\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.90\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.89\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.88\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.87\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.86\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.85\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.84\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.83\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.82\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.81\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.80\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-27: Version 6.8.79\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-26: Version 6.8.78\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-26: Version 6.8.77\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-26: Version 6.8.76\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-26: Version 6.8.75\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-25: Version 6.8.74\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-25: Version 6.8.73\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-25: Version 6.8.72\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-25: Version 6.8.71\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-25: Version 6.8.70\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-25: Version 6.8.69\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-25: Version 6.8.68\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-25: Version 6.8.67\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-24: Version 6.8.66\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-24: Version 6.8.65\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-24: Version 6.8.64\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.63\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.62\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.61\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.60\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.59\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.58\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.57\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.56\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.55\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.54\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.53\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.52\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-23: Version 6.8.51\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-20: Version 6.8.50\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-20: Version 6.8.49\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-20: Version 6.8.48\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-20: Version 6.8.47\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-20: Version 6.8.46\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-19: Version 6.8.45\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-19: Version 6.8.44\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-19: Version 6.8.43\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-19: Version 6.8.42\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-19: Version 6.8.41\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-18: Version 6.8.40\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-18: Version 6.8.39\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-18: Version 6.8.38\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-18: Version 6.8.37\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-18: Version 6.8.36\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.35\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.34\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.33\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.32\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.31\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.30\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.29\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.28\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.27\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.26\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-17: Version 6.8.25\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.24\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.23\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.22\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.21\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.20\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.19\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.18\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.17\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.16\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.15\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.14\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.13\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.12\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.11\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.10\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-16: Version 6.8.9\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-15: Version 6.8.8\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-15: Version 6.8.7\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-14: Version 6.8.6\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-14: Version 6.8.5\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-13: Version 6.8.4\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-13: Version 6.8.3\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-12: Version 6.8.2\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-12: Version 6.8.1\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-11: Version 6.7.290\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-11: Version 6.7.289\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n 2018-04-11: Version 6.7.288\n \n         Performance and stability improvements on all platforms."
        },
        {
            "sha": "4bac02255de4590b2f89af5683ff67a36bf6d653",
            "filename": "deps/v8/DEPS",
            "status": "modified",
            "additions": 25,
            "deletions": 10,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FDEPS",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FDEPS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FDEPS?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -12,43 +12,47 @@ vars = {\n \n deps = {\n   'v8/build':\n-    Var('chromium_url') + '/chromium/src/build.git' + '@' + '73e352e758d90603e23bdc84734c12aa5817ab5f',\n+    Var('chromium_url') + '/chromium/src/build.git' + '@' + 'b5df2518f091eea3d358f30757dec3e33db56156',\n   'v8/tools/gyp':\n     Var('chromium_url') + '/external/gyp.git' + '@' + 'd61a9397e668fa9843c4aa7da9e79460fe590bfb',\n   'v8/third_party/depot_tools':\n-    Var('chromium_url') + '/chromium/tools/depot_tools.git' + '@' + '024a3317597b06418efea2d45aa54dd2a7030c8a',\n+    Var('chromium_url') + '/chromium/tools/depot_tools.git' + '@' + '083eb25f9acbe034db94a1bd5c1659125b6ebf98',\n   'v8/third_party/icu':\n-    Var('chromium_url') + '/chromium/deps/icu.git' + '@' + 'd888fd2a1be890f4d35e43f68d6d79f42519a357',\n+    Var('chromium_url') + '/chromium/deps/icu.git' + '@' + 'f61e46dbee9d539a32551493e3bcc1dea92f83ec',\n   'v8/third_party/instrumented_libraries':\n     Var('chromium_url') + '/chromium/src/third_party/instrumented_libraries.git' + '@' + '323cf32193caecbf074d1a0cb5b02b905f163e0f',\n   'v8/buildtools':\n-    Var('chromium_url') + '/chromium/buildtools.git' + '@' + 'e8aa02ea839e087f2db66100d02c3b5d47993852',\n+    Var('chromium_url') + '/chromium/buildtools.git' + '@' + '94288c26d2ffe3aec9848c147839afee597acefd',\n   'v8/base/trace_event/common':\n     Var('chromium_url') + '/chromium/src/base/trace_event/common.git' + '@' + '211b3ed9d0481b4caddbee1322321b86a483ca1f',\n   'v8/third_party/android_ndk': {\n-    'url': Var('chromium_url') + '/android_ndk.git' + '@' + '635bc380968a76f6948fee65f80a0b28db53ae81',\n+    'url': Var('chromium_url') + '/android_ndk.git' + '@' + '5cd86312e794bdf542a3685c6f10cbb96072990b',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/android_tools': {\n     'url': Var('chromium_url') + '/android_tools.git' + '@' + 'c22a664c39af72dd8f89200220713dcad811300a',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/catapult': {\n-    'url': Var('chromium_url') + '/catapult.git' + '@' + '2c59f678c7ede8a844fb687525d594b71aabe3dd',\n+    'url': Var('chromium_url') + '/catapult.git' + '@' + '49edbd3a2b582cbab0a912cb1989062e9b8453ff',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/colorama/src': {\n     'url': Var('chromium_url') + '/external/colorama.git' + '@' + '799604a1041e9b3bc5d2789ecbd7e8db2e18e6b8',\n     'condition': 'checkout_android',\n   },\n+  'v8/third_party/fuchsia-sdk': {\n+    'url': Var('chromium_url') + '/chromium/src/third_party/fuchsia-sdk.git' + '@' + 'afac8ecd6300c9903009e6f233f61aae401aced6',\n+    'condition': 'checkout_fuchsia',\n+  },\n   'v8/third_party/googletest/src':\n-    Var('chromium_url') + '/external/github.com/google/googletest.git' + '@' + '7e5f90d3780d553cb86771141fb81349f3a63508',\n+    Var('chromium_url') + '/external/github.com/google/googletest.git' + '@' + '08d5b1f33af8c18785fb8ca02792b5fac81e248f',\n   'v8/third_party/jinja2':\n     Var('chromium_url') + '/chromium/src/third_party/jinja2.git' + '@' + '45571de473282bd1d8b63a8dfcb1fd268d0635d2',\n   'v8/third_party/markupsafe':\n     Var('chromium_url') + '/chromium/src/third_party/markupsafe.git' + '@' + '8f45f5cfa0009d2a70589bcda0349b8cb2b72783',\n   'v8/tools/swarming_client':\n-    Var('chromium_url') + '/infra/luci/client-py.git' + '@' + '88229872dd17e71658fe96763feaa77915d8cbd6',\n+    Var('chromium_url') + '/infra/luci/client-py.git' + '@' + '833f5ebf894be1e3e6d13678d5de8479bf12ff28',\n   'v8/test/benchmarks/data':\n     Var('chromium_url') + '/v8/deps/third_party/benchmarks.git' + '@' + '05d7188267b4560491ff9155c5ee13e207ecd65f',\n   'v8/test/mozilla/data':\n@@ -58,11 +62,11 @@ deps = {\n   'v8/test/test262/harness':\n     Var('chromium_url') + '/external/github.com/test262-utils/test262-harness-py.git' + '@' + '0f2acdd882c84cff43b9d60df7574a1901e2cdcd',\n   'v8/tools/clang':\n-    Var('chromium_url') + '/chromium/src/tools/clang.git' + '@' + 'd7c36b0ae001a5cc31f2da79a430154916a3def2',\n+    Var('chromium_url') + '/chromium/src/tools/clang.git' + '@' + 'c893c7eec4706f8c7fc244ee254b1dadd8f8d158',\n   'v8/tools/luci-go':\n     Var('chromium_url') + '/chromium/src/tools/luci-go.git' + '@' + 'ff0709d4283b1f233dcf0c9fec1672c6ecaed2f1',\n   'v8/test/wasm-js':\n-    Var('chromium_url') + '/external/github.com/WebAssembly/spec.git' + '@' + '586d34770c6445bfb93c9bae8ac50baade7ee168',\n+    Var('chromium_url') + '/external/github.com/WebAssembly/spec.git' + '@' + '27d63f22e72395248d314520b3ad5b1e0943fc10',\n }\n \n recursedeps = [\n@@ -84,6 +88,17 @@ skip_child_includes = [\n ]\n \n hooks = [\n+  {\n+    # Ensure that the DEPS'd \"depot_tools\" has its self-update capability\n+    # disabled.\n+    'name': 'disable_depot_tools_selfupdate',\n+    'pattern': '.',\n+    'action': [\n+        'python',\n+        'v8/third_party/depot_tools/update_depot_tools_toggle.py',\n+        '--disable',\n+    ],\n+  },\n   {\n     # This clobbers when necessary (based on get_landmines.py). It must be the\n     # first hook so that other things that get/generate into the output"
        },
        {
            "sha": "055027c7bb605067829da57a609241c7443151ab",
            "filename": "deps/v8/PRESUBMIT.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FPRESUBMIT.py",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2FPRESUBMIT.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FPRESUBMIT.py?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -289,6 +289,13 @@ def FilterFile(affected_file):\n def _CommonChecks(input_api, output_api):\n   \"\"\"Checks common to both upload and commit.\"\"\"\n   results = []\n+  # TODO(machenbach): Replace some of those checks, e.g. owners and copyright,\n+  # with the canned PanProjectChecks. Need to make sure that the checks all\n+  # pass on all existing files.\n+  results.extend(input_api.canned_checks.CheckOwnersFormat(\n+      input_api, output_api))\n+  results.extend(input_api.canned_checks.CheckOwners(\n+      input_api, output_api))\n   results.extend(_CheckCommitMessageBugEntry(input_api, output_api))\n   results.extend(input_api.canned_checks.CheckPatchFormatted(\n       input_api, output_api))"
        },
        {
            "sha": "1cbba9fefdd795f03a6674c4f0945a41c0dd3e5c",
            "filename": "deps/v8/gni/v8.gni",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fgni%2Fv8.gni",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fgni%2Fv8.gni",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fgni%2Fv8.gni?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -96,7 +96,7 @@ if (is_debug && !v8_optimized_debug) {\n \n   # TODO(crbug.com/621335) Rework this so that we don't have the confusion\n   # between \"optimize_speed\" and \"optimize_max\".\n-  if (is_posix && !is_android && !using_sanitizer) {\n+  if (((is_posix && !is_android) || is_fuchsia) && !using_sanitizer) {\n     v8_add_configs += [ \"//build/config/compiler:optimize_speed\" ]\n   } else {\n     v8_add_configs += [ \"//build/config/compiler:optimize_max\" ]\n@@ -110,7 +110,7 @@ if (v8_code_coverage && !is_clang) {\n   ]\n }\n \n-if (is_posix && (v8_enable_backtrace || v8_monolithic)) {\n+if ((is_posix || is_fuchsia) && (v8_enable_backtrace || v8_monolithic)) {\n   v8_remove_configs += [ \"//build/config/gcc:symbol_visibility_hidden\" ]\n   v8_add_configs += [ \"//build/config/gcc:symbol_visibility_default\" ]\n }"
        },
        {
            "sha": "a381b97f889749dc1f79c342f0735ecdc927a968",
            "filename": "deps/v8/include/libplatform/libplatform.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -62,7 +62,7 @@ V8_PLATFORM_EXPORT bool PumpMessageLoop(\n     v8::Platform* platform, v8::Isolate* isolate,\n     MessageLoopBehavior behavior = MessageLoopBehavior::kDoNotWait);\n \n-V8_PLATFORM_EXPORT V8_DEPRECATE_SOON(\n+V8_PLATFORM_EXPORT V8_DEPRECATED(\n     \"This function has become obsolete and is essentially a nop\",\n     void EnsureEventLoopInitialized(v8::Platform* platform,\n                                     v8::Isolate* isolate));"
        },
        {
            "sha": "d879a94373e427892bb6921eafff5139e05509b0",
            "filename": "deps/v8/include/v8-inspector.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8-inspector.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8-inspector.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-inspector.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -99,6 +99,7 @@ class V8_EXPORT V8ContextInfo {\n \n class V8_EXPORT V8StackTrace {\n  public:\n+  virtual StringView firstNonEmptySourceURL() const = 0;\n   virtual bool isEmpty() const = 0;\n   virtual StringView topSourceURL() const = 0;\n   virtual int topLineNumber() const = 0;"
        },
        {
            "sha": "cfeb13b65829f9e0bad2518b8c4b03a645b6223c",
            "filename": "deps/v8/include/v8-platform.h",
            "status": "modified",
            "additions": 18,
            "deletions": 96,
            "changes": 114,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8-platform.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8-platform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-platform.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -207,6 +207,7 @@ class PageAllocator {\n    */\n   enum Permission {\n     kNoAccess,\n+    kRead,\n     kReadWrite,\n     // TODO(hpayer): Remove this flag. Memory should never be rwx.\n     kReadWriteExecute,\n@@ -245,16 +246,6 @@ class PageAllocator {\n  */\n class Platform {\n  public:\n-  /**\n-   * This enum is used to indicate whether a task is potentially long running,\n-   * or causes a long wait. The embedder might want to use this hint to decide\n-   * whether to execute the task on a dedicated thread.\n-   */\n-  enum ExpectedRuntime {\n-    kShortRunningTask,\n-    kLongRunningTask\n-  };\n-\n   virtual ~Platform() = default;\n \n   /**\n@@ -289,101 +280,25 @@ class Platform {\n   virtual bool OnCriticalMemoryPressure(size_t length) { return false; }\n \n   /**\n-   * Gets the number of worker threads used by GetWorkerThreadsTaskRunner() and\n-   * CallOnWorkerThread(). This can be used to estimate the number of tasks a\n-   * work package should be split into. A return value of 0 means that there are\n-   * no worker threads available. Note that a value of 0 won't prohibit V8 from\n-   * posting tasks using |CallOnWorkerThread|.\n-   */\n-  virtual int NumberOfWorkerThreads() {\n-    return static_cast<int>(NumberOfAvailableBackgroundThreads());\n-  }\n-\n-  /**\n-   * Deprecated. Use NumberOfWorkerThreads() instead.\n-   * TODO(gab): Remove this when all embedders override\n-   * NumberOfWorkerThreads() instead.\n+   * Gets the number of worker threads used by\n+   * Call(BlockingTask)OnWorkerThread(). This can be used to estimate the number\n+   * of tasks a work package should be split into. A return value of 0 means\n+   * that there are no worker threads available. Note that a value of 0 won't\n+   * prohibit V8 from posting tasks using |CallOnWorkerThread|.\n    */\n-  V8_DEPRECATE_SOON(\n-      \"NumberOfAvailableBackgroundThreads() is deprecated, use \"\n-      \"NumberOfAvailableBackgroundThreads() instead.\",\n-      virtual size_t NumberOfAvailableBackgroundThreads()) {\n-    return 0;\n-  }\n+  virtual int NumberOfWorkerThreads() = 0;\n \n   /**\n    * Returns a TaskRunner which can be used to post a task on the foreground.\n    * This function should only be called from a foreground thread.\n    */\n   virtual std::shared_ptr<v8::TaskRunner> GetForegroundTaskRunner(\n-      Isolate* isolate) {\n-    // TODO(ahaas): Make this function abstract after it got implemented on all\n-    // platforms.\n-    return {};\n-  }\n-\n-  /**\n-   * Returns a TaskRunner which can be used to post a task on a background.\n-   * This function should only be called from a foreground thread.\n-   */\n-  V8_DEPRECATE_SOON(\n-      \"GetBackgroundTaskRunner() is deprecated, use \"\n-      \"GetWorkerThreadsTaskRunner() \"\n-      \"instead.\",\n-      virtual std::shared_ptr<v8::TaskRunner> GetBackgroundTaskRunner(\n-          Isolate* isolate)) {\n-    // TODO(gab): Remove this method when all embedders have moved to\n-    // GetWorkerThreadsTaskRunner().\n-\n-    // An implementation needs to be provided here because this is called by the\n-    // default GetWorkerThreadsTaskRunner() implementation below. In practice\n-    // however, all code either:\n-    //  - Overrides GetWorkerThreadsTaskRunner() (thus not making this call) --\n-    //    i.e. all v8 code.\n-    //  - Overrides this method (thus not making this call) -- i.e. all\n-    //    unadapted embedders.\n-    abort();\n-  }\n-\n-  /**\n-   * Returns a TaskRunner which can be used to post async tasks on a worker.\n-   * This function should only be called from a foreground thread.\n-   */\n-  virtual std::shared_ptr<v8::TaskRunner> GetWorkerThreadsTaskRunner(\n-      Isolate* isolate) {\n-    // TODO(gab): Make this function abstract after it got implemented on all\n-    // platforms.\n-    return GetBackgroundTaskRunner(isolate);\n-  }\n-\n-  /**\n-   * Schedules a task to be invoked on a background thread. |expected_runtime|\n-   * indicates that the task will run a long time. The Platform implementation\n-   * takes ownership of |task|. There is no guarantee about order of execution\n-   * of tasks wrt order of scheduling, nor is there a guarantee about the\n-   * thread the task will be run on.\n-   */\n-  V8_DEPRECATE_SOON(\n-      \"ExpectedRuntime is deprecated, use CallOnWorkerThread() instead.\",\n-      virtual void CallOnBackgroundThread(Task* task,\n-                                          ExpectedRuntime expected_runtime)) {\n-    // An implementation needs to be provided here because this is called by the\n-    // default implementation below. In practice however, all code either:\n-    //  - Overrides the new method (thus not making this call) -- i.e. all v8\n-    //    code.\n-    //  - Overrides this method (thus not making this call) -- i.e. all\n-    //    unadapted embedders.\n-    abort();\n-  }\n+      Isolate* isolate) = 0;\n \n   /**\n    * Schedules a task to be invoked on a worker thread.\n-   * TODO(gab): Make pure virtual when all embedders override this instead of\n-   * CallOnBackgroundThread().\n    */\n-  virtual void CallOnWorkerThread(std::unique_ptr<Task> task) {\n-    CallOnBackgroundThread(task.release(), kShortRunningTask);\n-  }\n+  virtual void CallOnWorkerThread(std::unique_ptr<Task> task) = 0;\n \n   /**\n    * Schedules a task that blocks the main thread to be invoked with\n@@ -395,6 +310,13 @@ class Platform {\n     CallOnWorkerThread(std::move(task));\n   }\n \n+  /**\n+   * Schedules a task to be invoked on a worker thread after |delay_in_seconds|\n+   * expires.\n+   */\n+  virtual void CallDelayedOnWorkerThread(std::unique_ptr<Task> task,\n+                                         double delay_in_seconds) = 0;\n+\n   /**\n    * Schedules a task to be invoked on a foreground thread wrt a specific\n    * |isolate|. Tasks posted for the same isolate should be execute in order of\n@@ -420,14 +342,14 @@ class Platform {\n    * The definition of \"foreground\" is opaque to V8.\n    */\n   virtual void CallIdleOnForegroundThread(Isolate* isolate, IdleTask* task) {\n-    // TODO(ulan): Make this function abstract after V8 roll in Chromium.\n+    // This must be overriden if |IdleTasksEnabled()|.\n+    abort();\n   }\n \n   /**\n    * Returns true if idle tasks are enabled for the given |isolate|.\n    */\n   virtual bool IdleTasksEnabled(Isolate* isolate) {\n-    // TODO(ulan): Make this function abstract after V8 roll in Chromium.\n     return false;\n   }\n "
        },
        {
            "sha": "34ad2b9cea5445ade4bfaa4c2d453c0a7796eee5",
            "filename": "deps/v8/include/v8-profiler.h",
            "status": "modified",
            "additions": 10,
            "deletions": 88,
            "changes": 98,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8-profiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8-profiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-profiler.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -54,7 +54,11 @@ namespace v8 {\n  */\n class V8_EXPORT TracingCpuProfiler {\n  public:\n-  static std::unique_ptr<TracingCpuProfiler> Create(Isolate*);\n+  V8_DEPRECATE_SOON(\n+      \"The profiler is created automatically with the isolate.\\n\"\n+      \"No need to create it explicitly.\",\n+      static std::unique_ptr<TracingCpuProfiler> Create(Isolate*));\n+\n   virtual ~TracingCpuProfiler() = default;\n \n  protected:\n@@ -636,7 +640,7 @@ class V8_EXPORT AllocationProfile {\n  * Usage:\n  * 1) Define derived class of EmbedderGraph::Node for embedder objects.\n  * 2) Set the build embedder graph callback on the heap profiler using\n- *    HeapProfiler::AddBuildEmbedderGraphCallback.\n+ *    HeapProfiler::SetBuildEmbedderGraphCallback.\n  * 3) In the callback use graph->AddEdge(node1, node2) to add an edge from\n  *    node1 to node2.\n  * 4) To represent references from/to V8 object, construct V8 nodes using\n@@ -736,12 +740,7 @@ class V8_EXPORT HeapProfiler {\n    * The callback must not trigger garbage collection in V8.\n    */\n   typedef void (*BuildEmbedderGraphCallback)(v8::Isolate* isolate,\n-                                             v8::EmbedderGraph* graph,\n-                                             void* data);\n-\n-  /** TODO(addaleax): Remove */\n-  typedef void (*LegacyBuildEmbedderGraphCallback)(v8::Isolate* isolate,\n-                                                   v8::EmbedderGraph* graph);\n+                                             v8::EmbedderGraph* graph);\n \n   /** Returns the number of snapshots taken. */\n   int GetSnapshotCount();\n@@ -883,22 +882,15 @@ class V8_EXPORT HeapProfiler {\n \n   /** Binds a callback to embedder's class ID. */\n   V8_DEPRECATED(\n-      \"Use AddBuildEmbedderGraphCallback to provide info about embedder nodes\",\n+      \"Use SetBuildEmbedderGraphCallback to provide info about embedder nodes\",\n       void SetWrapperClassInfoProvider(uint16_t class_id,\n                                        WrapperInfoCallback callback));\n \n   V8_DEPRECATED(\n-      \"Use AddBuildEmbedderGraphCallback to provide info about embedder nodes\",\n+      \"Use SetBuildEmbedderGraphCallback to provide info about embedder nodes\",\n       void SetGetRetainerInfosCallback(GetRetainerInfosCallback callback));\n \n-  V8_DEPRECATE_SOON(\n-      \"Use AddBuildEmbedderGraphCallback to provide info about embedder nodes\",\n-      void SetBuildEmbedderGraphCallback(\n-          LegacyBuildEmbedderGraphCallback callback));\n-  void AddBuildEmbedderGraphCallback(BuildEmbedderGraphCallback callback,\n-                                     void* data);\n-  void RemoveBuildEmbedderGraphCallback(BuildEmbedderGraphCallback callback,\n-                                        void* data);\n+  void SetBuildEmbedderGraphCallback(BuildEmbedderGraphCallback callback);\n \n   /**\n    * Default value of persistent handle class ID. Must not be used to\n@@ -1000,76 +992,6 @@ struct HeapStatsUpdate {\n   uint32_t size;  // New value of size field for the interval with this index.\n };\n \n-#define CODE_EVENTS_LIST(V) \\\n-  V(Builtin)                \\\n-  V(Callback)               \\\n-  V(Eval)                   \\\n-  V(Function)               \\\n-  V(InterpretedFunction)    \\\n-  V(Handler)                \\\n-  V(BytecodeHandler)        \\\n-  V(LazyCompile)            \\\n-  V(RegExp)                 \\\n-  V(Script)                 \\\n-  V(Stub)\n-\n-/**\n- * Note that this enum may be extended in the future. Please include a default\n- * case if this enum is used in a switch statement.\n- */\n-enum CodeEventType {\n-  kUnknownType = 0\n-#define V(Name) , k##Name##Type\n-  CODE_EVENTS_LIST(V)\n-#undef V\n-};\n-\n-/**\n- * Representation of a code creation event\n- */\n-class V8_EXPORT CodeEvent {\n- public:\n-  uintptr_t GetCodeStartAddress();\n-  size_t GetCodeSize();\n-  Local<String> GetFunctionName();\n-  Local<String> GetScriptName();\n-  int GetScriptLine();\n-  int GetScriptColumn();\n-  /**\n-   * NOTE (mmarchini): We can't allocate objects in the heap when we collect\n-   * existing code, and both the code type and the comment are not stored in the\n-   * heap, so we return those as const char*.\n-   */\n-  CodeEventType GetCodeType();\n-  const char* GetComment();\n-\n-  static const char* GetCodeEventTypeName(CodeEventType code_event_type);\n-};\n-\n-/**\n- * Interface to listen to code creation events.\n- */\n-class V8_EXPORT CodeEventHandler {\n- public:\n-  /**\n-   * Creates a new listener for the |isolate|. The isolate must be initialized.\n-   * The listener object must be disposed after use by calling |Dispose| method.\n-   * Multiple listeners can be created for the same isolate.\n-   */\n-  explicit CodeEventHandler(Isolate* isolate);\n-  virtual ~CodeEventHandler();\n-\n-  virtual void Handle(CodeEvent* code_event) = 0;\n-\n-  void Enable();\n-  void Disable();\n-\n- private:\n-  CodeEventHandler();\n-  CodeEventHandler(const CodeEventHandler&);\n-  CodeEventHandler& operator=(const CodeEventHandler&);\n-  void* internal_listener_;\n-};\n \n }  // namespace v8\n "
        },
        {
            "sha": "e57efc3084acba902ff5705d3a77fbc879022ba7",
            "filename": "deps/v8/include/v8-version.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8-version.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8-version.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-version.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -9,9 +9,9 @@\n // NOTE these macros are used by some of the tool scripts and the build\n // system so their names cannot be changed without changing the scripts.\n #define V8_MAJOR_VERSION 6\n-#define V8_MINOR_VERSION 7\n-#define V8_BUILD_NUMBER 288\n-#define V8_PATCH_LEVEL 49\n+#define V8_MINOR_VERSION 8\n+#define V8_BUILD_NUMBER 275\n+#define V8_PATCH_LEVEL 24\n \n // Use 1 for candidates and 0 otherwise.\n // (Boolean macro values are not supported by all preprocessors.)"
        },
        {
            "sha": "b68d9fbbfc3c86ca09ec91fb8c01d83efd6f4534",
            "filename": "deps/v8/include/v8.h",
            "status": "modified",
            "additions": 218,
            "deletions": 153,
            "changes": 371,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finclude%2Fv8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -156,6 +156,95 @@ class GlobalHandles;\n namespace wasm {\n class StreamingDecoder;\n }  // namespace wasm\n+\n+/**\n+ * Configuration of tagging scheme.\n+ */\n+const int kApiPointerSize = sizeof(void*);  // NOLINT\n+const int kApiDoubleSize = sizeof(double);  // NOLINT\n+const int kApiIntSize = sizeof(int);        // NOLINT\n+const int kApiInt64Size = sizeof(int64_t);  // NOLINT\n+\n+// Tag information for HeapObject.\n+const int kHeapObjectTag = 1;\n+const int kWeakHeapObjectTag = 3;\n+const int kHeapObjectTagSize = 2;\n+const intptr_t kHeapObjectTagMask = (1 << kHeapObjectTagSize) - 1;\n+\n+// Tag information for Smi.\n+const int kSmiTag = 0;\n+const int kSmiTagSize = 1;\n+const intptr_t kSmiTagMask = (1 << kSmiTagSize) - 1;\n+\n+template <size_t ptr_size>\n+struct SmiTagging;\n+\n+template <int kSmiShiftSize>\n+V8_INLINE internal::Object* IntToSmi(int value) {\n+  int smi_shift_bits = kSmiTagSize + kSmiShiftSize;\n+  uintptr_t tagged_value =\n+      (static_cast<uintptr_t>(value) << smi_shift_bits) | kSmiTag;\n+  return reinterpret_cast<internal::Object*>(tagged_value);\n+}\n+\n+// Smi constants for 32-bit systems.\n+template <>\n+struct SmiTagging<4> {\n+  enum { kSmiShiftSize = 0, kSmiValueSize = 31 };\n+  static int SmiShiftSize() { return kSmiShiftSize; }\n+  static int SmiValueSize() { return kSmiValueSize; }\n+  V8_INLINE static int SmiToInt(const internal::Object* value) {\n+    int shift_bits = kSmiTagSize + kSmiShiftSize;\n+    // Throw away top 32 bits and shift down (requires >> to be sign extending).\n+    return static_cast<int>(reinterpret_cast<intptr_t>(value)) >> shift_bits;\n+  }\n+  V8_INLINE static internal::Object* IntToSmi(int value) {\n+    return internal::IntToSmi<kSmiShiftSize>(value);\n+  }\n+  V8_INLINE static bool IsValidSmi(intptr_t value) {\n+    // To be representable as an tagged small integer, the two\n+    // most-significant bits of 'value' must be either 00 or 11 due to\n+    // sign-extension. To check this we add 01 to the two\n+    // most-significant bits, and check if the most-significant bit is 0\n+    //\n+    // CAUTION: The original code below:\n+    // bool result = ((value + 0x40000000) & 0x80000000) == 0;\n+    // may lead to incorrect results according to the C language spec, and\n+    // in fact doesn't work correctly with gcc4.1.1 in some cases: The\n+    // compiler may produce undefined results in case of signed integer\n+    // overflow. The computation must be done w/ unsigned ints.\n+    return static_cast<uintptr_t>(value) + 0x40000000U < 0x80000000U;\n+  }\n+};\n+\n+// Smi constants for 64-bit systems.\n+template <>\n+struct SmiTagging<8> {\n+  enum { kSmiShiftSize = 31, kSmiValueSize = 32 };\n+  static int SmiShiftSize() { return kSmiShiftSize; }\n+  static int SmiValueSize() { return kSmiValueSize; }\n+  V8_INLINE static int SmiToInt(const internal::Object* value) {\n+    int shift_bits = kSmiTagSize + kSmiShiftSize;\n+    // Shift down and throw away top 32 bits.\n+    return static_cast<int>(reinterpret_cast<intptr_t>(value) >> shift_bits);\n+  }\n+  V8_INLINE static internal::Object* IntToSmi(int value) {\n+    return internal::IntToSmi<kSmiShiftSize>(value);\n+  }\n+  V8_INLINE static bool IsValidSmi(intptr_t value) {\n+    // To be representable as a long smi, the value must be a 32-bit integer.\n+    return (value == static_cast<int32_t>(value));\n+  }\n+};\n+\n+typedef SmiTagging<kApiPointerSize> PlatformSmiTagging;\n+const int kSmiShiftSize = PlatformSmiTagging::kSmiShiftSize;\n+const int kSmiValueSize = PlatformSmiTagging::kSmiValueSize;\n+const int kSmiMinValue = (static_cast<unsigned int>(-1)) << (kSmiValueSize - 1);\n+const int kSmiMaxValue = -(kSmiMinValue + 1);\n+constexpr bool SmiValuesAre31Bits() { return kSmiValueSize == 31; }\n+constexpr bool SmiValuesAre32Bits() { return kSmiValueSize == 32; }\n+\n }  // namespace internal\n \n namespace debug {\n@@ -1123,6 +1212,13 @@ class V8_EXPORT UnboundScript {\n   static const int kNoScriptId = 0;\n };\n \n+/**\n+ * A compiled JavaScript module, not yet tied to a Context.\n+ */\n+class V8_EXPORT UnboundModuleScript {\n+  // Only used as a container for code caching.\n+};\n+\n /**\n  * A location in JavaScript source.\n  */\n@@ -1222,6 +1318,14 @@ class V8_EXPORT Module {\n    * The module's status must be at least kInstantiated.\n    */\n   Local<Value> GetModuleNamespace();\n+\n+  /**\n+   * Returns the corresponding context-unbound module script.\n+   *\n+   * The module must be unevaluated, i.e. its status must not be kEvaluating,\n+   * kEvaluated or kErrored.\n+   */\n+  Local<UnboundModuleScript> GetUnboundModuleScript();\n };\n \n /**\n@@ -1580,9 +1684,17 @@ class V8_EXPORT ScriptCompiler {\n    */\n   static CachedData* CreateCodeCache(Local<UnboundScript> unbound_script);\n \n-  // Deprecated.\n-  static CachedData* CreateCodeCache(Local<UnboundScript> unbound_script,\n-                                     Local<String> source);\n+  /**\n+   * Creates and returns code cache for the specified unbound_module_script.\n+   * This will return nullptr if the script cannot be serialized. The\n+   * CachedData returned by this function should be owned by the caller.\n+   */\n+  static CachedData* CreateCodeCache(\n+      Local<UnboundModuleScript> unbound_module_script);\n+\n+  V8_DEPRECATED(\"Source string is no longer required\",\n+                static CachedData* CreateCodeCache(\n+                    Local<UnboundScript> unbound_script, Local<String> source));\n \n   /**\n    * Creates and returns code cache for the specified function that was\n@@ -1592,9 +1704,9 @@ class V8_EXPORT ScriptCompiler {\n    */\n   static CachedData* CreateCodeCacheForFunction(Local<Function> function);\n \n-  // Deprecated.\n-  static CachedData* CreateCodeCacheForFunction(Local<Function> function,\n-                                                Local<String> source);\n+  V8_DEPRECATED(\"Source string is no longer required\",\n+                static CachedData* CreateCodeCacheForFunction(\n+                    Local<Function> function, Local<String> source));\n \n  private:\n   static V8_WARN_UNUSED_RESULT MaybeLocal<UnboundScript> CompileUnboundInternal(\n@@ -1913,12 +2025,16 @@ class V8_EXPORT ValueSerializer {\n      * If the memory cannot be allocated, nullptr should be returned.\n      * |actual_size| will be ignored. It is assumed that |old_buffer| is still\n      * valid in this case and has not been modified.\n+     *\n+     * The default implementation uses the stdlib's `realloc()` function.\n      */\n     virtual void* ReallocateBufferMemory(void* old_buffer, size_t size,\n                                          size_t* actual_size);\n \n     /**\n      * Frees a buffer allocated with |ReallocateBufferMemory|.\n+     *\n+     * The default implementation uses the stdlib's `free()` function.\n      */\n     virtual void FreeBufferMemory(void* buffer);\n   };\n@@ -1946,9 +2062,9 @@ class V8_EXPORT ValueSerializer {\n \n   /**\n    * Returns the stored data (allocated using the delegate's\n-   * AllocateBufferMemory) and its size. This serializer should not be used once\n-   * the buffer is released. The contents are undefined if a previous write has\n-   * failed.\n+   * ReallocateBufferMemory) and its size. This serializer should not be used\n+   * once the buffer is released. The contents are undefined if a previous write\n+   * has failed. Ownership of the buffer is transferred to the caller.\n    */\n   V8_WARN_UNUSED_RESULT std::pair<uint8_t*, size_t> Release();\n \n@@ -2538,8 +2654,9 @@ enum class NewStringType {\n  */\n class V8_EXPORT String : public Name {\n  public:\n-  static constexpr int kMaxLength =\n-      sizeof(void*) == 4 ? (1 << 28) - 16 : (1 << 30) - 1 - 24;\n+  static constexpr int kMaxLength = internal::kApiPointerSize == 4\n+                                        ? (1 << 28) - 16\n+                                        : internal::kSmiMaxValue / 2 - 24;\n \n   enum Encoding {\n     UNKNOWN_ENCODING = 0x1,\n@@ -3048,48 +3165,6 @@ class V8_EXPORT Uint32 : public Integer {\n class V8_EXPORT BigInt : public Primitive {\n  public:\n   static Local<BigInt> New(Isolate* isolate, int64_t value);\n-  static Local<BigInt> NewFromUnsigned(Isolate* isolate, uint64_t value);\n-  /**\n-   * Creates a new BigInt object using a specified sign bit and a\n-   * specified list of digits/words.\n-   * The resulting number is calculated as:\n-   *\n-   * (-1)^sign_bit * (words[0] * (2^64)^0 + words[1] * (2^64)^1 + ...)\n-   */\n-  static MaybeLocal<BigInt> NewFromWords(Local<Context> context, int sign_bit,\n-                                         int word_count, const uint64_t* words);\n-\n-  /**\n-   * Returns the value of this BigInt as an unsigned 64-bit integer.\n-   * If `lossless` is provided, it will reflect whether the return value was\n-   * truncated or wrapped around. In particular, it is set to `false` if this\n-   * BigInt is negative.\n-   */\n-  uint64_t Uint64Value(bool* lossless = nullptr) const;\n-\n-  /**\n-   * Returns the value of this BigInt as a signed 64-bit integer.\n-   * If `lossless` is provided, it will reflect whether this BigInt was\n-   * truncated or not.\n-   */\n-  int64_t Int64Value(bool* lossless = nullptr) const;\n-\n-  /**\n-   * Returns the number of 64-bit words needed to store the result of\n-   * ToWordsArray().\n-   */\n-  int WordCount() const;\n-\n-  /**\n-   * Writes the contents of this BigInt to a specified memory location.\n-   * `sign_bit` must be provided and will be set to 1 if this BigInt is\n-   * negative.\n-   * `*word_count` has to be initialized to the length of the `words` array.\n-   * Upon return, it will be set to the actual number of words that would\n-   * be needed to store this BigInt (i.e. the return value of `WordCount()`).\n-   */\n-  void ToWordsArray(int* sign_bit, int* word_count, uint64_t* words) const;\n-\n   V8_INLINE static BigInt* Cast(v8::Value* obj);\n \n  private:\n@@ -3958,6 +4033,15 @@ class V8_EXPORT Function : public Object {\n     return NewInstance(context, 0, nullptr);\n   }\n \n+  /**\n+   * When side effect checks are enabled, passing kHasNoSideEffect allows the\n+   * constructor to be invoked without throwing. Calls made within the\n+   * constructor are still checked.\n+   */\n+  V8_WARN_UNUSED_RESULT MaybeLocal<Object> NewInstanceWithSideEffectType(\n+      Local<Context> context, int argc, Local<Value> argv[],\n+      SideEffectType side_effect_type = SideEffectType::kHasSideEffect) const;\n+\n   V8_DEPRECATE_SOON(\"Use maybe version\",\n                     Local<Value> Call(Local<Value> recv, int argc,\n                                       Local<Value> argv[]));\n@@ -4308,8 +4392,6 @@ class V8_EXPORT WasmModuleObjectBuilderStreaming final {\n   ~WasmModuleObjectBuilderStreaming();\n \n  private:\n-  typedef std::pair<std::unique_ptr<const uint8_t[]>, size_t> Buffer;\n-\n   WasmModuleObjectBuilderStreaming(const WasmModuleObjectBuilderStreaming&) =\n       delete;\n   WasmModuleObjectBuilderStreaming(WasmModuleObjectBuilderStreaming&&) =\n@@ -4332,8 +4414,6 @@ class V8_EXPORT WasmModuleObjectBuilderStreaming final {\n #else\n   Persistent<Promise> promise_;\n #endif\n-  std::vector<Buffer> received_buffers_;\n-  size_t total_size_ = 0;\n   std::shared_ptr<internal::wasm::StreamingDecoder> streaming_decoder_;\n };\n \n@@ -4584,8 +4664,7 @@ class V8_EXPORT TypedArray : public ArrayBufferView {\n   /*\n    * The largest typed array size that can be constructed using New.\n    */\n-  static constexpr size_t kMaxLength =\n-      sizeof(void*) == 4 ? (1u << 30) - 1 : (1u << 31) - 1;\n+  static constexpr size_t kMaxLength = internal::kSmiMaxValue;\n \n   /**\n    * Number of elements in this typed array\n@@ -5170,22 +5249,25 @@ class V8_EXPORT Template : public Data {\n       // TODO(dcarney): gcc can't handle Local below\n       Local<Value> data = Local<Value>(), PropertyAttribute attribute = None,\n       Local<AccessorSignature> signature = Local<AccessorSignature>(),\n-      AccessControl settings = DEFAULT);\n+      AccessControl settings = DEFAULT,\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n   void SetNativeDataProperty(\n       Local<Name> name, AccessorNameGetterCallback getter,\n       AccessorNameSetterCallback setter = 0,\n       // TODO(dcarney): gcc can't handle Local below\n       Local<Value> data = Local<Value>(), PropertyAttribute attribute = None,\n       Local<AccessorSignature> signature = Local<AccessorSignature>(),\n-      AccessControl settings = DEFAULT);\n+      AccessControl settings = DEFAULT,\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   /**\n    * Like SetNativeDataProperty, but V8 will replace the native data property\n    * with a real data property on first access.\n    */\n-  void SetLazyDataProperty(Local<Name> name, AccessorNameGetterCallback getter,\n-                           Local<Value> data = Local<Value>(),\n-                           PropertyAttribute attribute = None);\n+  void SetLazyDataProperty(\n+      Local<Name> name, AccessorNameGetterCallback getter,\n+      Local<Value> data = Local<Value>(), PropertyAttribute attribute = None,\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   /**\n    * During template instantiation, sets the value with the intrinsic property\n@@ -5909,12 +5991,14 @@ class V8_EXPORT ObjectTemplate : public Template {\n       Local<String> name, AccessorGetterCallback getter,\n       AccessorSetterCallback setter = 0, Local<Value> data = Local<Value>(),\n       AccessControl settings = DEFAULT, PropertyAttribute attribute = None,\n-      Local<AccessorSignature> signature = Local<AccessorSignature>());\n+      Local<AccessorSignature> signature = Local<AccessorSignature>(),\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n   void SetAccessor(\n       Local<Name> name, AccessorNameGetterCallback getter,\n       AccessorNameSetterCallback setter = 0, Local<Value> data = Local<Value>(),\n       AccessControl settings = DEFAULT, PropertyAttribute attribute = None,\n-      Local<AccessorSignature> signature = Local<AccessorSignature>());\n+      Local<AccessorSignature> signature = Local<AccessorSignature>(),\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   /**\n    * Sets a named property handler on the object template.\n@@ -6394,9 +6478,7 @@ typedef void (*PromiseHook)(PromiseHookType type, Local<Promise> promise,\n // --- Promise Reject Callback ---\n enum PromiseRejectEvent {\n   kPromiseRejectWithNoHandler = 0,\n-  kPromiseHandlerAddedAfterReject = 1,\n-  kPromiseRejectAfterResolved = 2,\n-  kPromiseResolveAfterResolved = 3,\n+  kPromiseHandlerAddedAfterReject = 1\n };\n \n class PromiseRejectMessage {\n@@ -6643,10 +6725,12 @@ class V8_EXPORT HeapCodeStatistics {\n   HeapCodeStatistics();\n   size_t code_and_metadata_size() { return code_and_metadata_size_; }\n   size_t bytecode_and_metadata_size() { return bytecode_and_metadata_size_; }\n+  size_t external_script_source_size() { return external_script_source_size_; }\n \n  private:\n   size_t code_and_metadata_size_;\n   size_t bytecode_and_metadata_size_;\n+  size_t external_script_source_size_;\n \n   friend class Isolate;\n };\n@@ -6946,7 +7030,8 @@ class V8_EXPORT Isolate {\n           add_histogram_sample_callback(nullptr),\n           array_buffer_allocator(nullptr),\n           external_references(nullptr),\n-          allow_atomics_wait(true) {}\n+          allow_atomics_wait(true),\n+          only_terminate_in_safe_scope(false) {}\n \n     /**\n      * The optional entry_hook allows the host application to provide the\n@@ -7009,6 +7094,11 @@ class V8_EXPORT Isolate {\n      * this isolate. This can also be configured via SetAllowAtomicsWait.\n      */\n     bool allow_atomics_wait;\n+\n+    /**\n+     * Termination is postponed when there is no active SafeForTerminationScope.\n+     */\n+    bool only_terminate_in_safe_scope;\n   };\n \n \n@@ -7093,6 +7183,24 @@ class V8_EXPORT Isolate {\n     internal::Isolate* const isolate_;\n   };\n \n+  /**\n+   * This scope allows terminations inside direct V8 API calls and forbid them\n+   * inside any recursice API calls without explicit SafeForTerminationScope.\n+   */\n+  class V8_EXPORT SafeForTerminationScope {\n+   public:\n+    explicit SafeForTerminationScope(v8::Isolate* isolate);\n+    ~SafeForTerminationScope();\n+\n+    // Prevent copying of Scope objects.\n+    SafeForTerminationScope(const SafeForTerminationScope&) = delete;\n+    SafeForTerminationScope& operator=(const SafeForTerminationScope&) = delete;\n+\n+   private:\n+    internal::Isolate* isolate_;\n+    bool prev_value_;\n+  };\n+\n   /**\n    * Types of garbage collections that can be requested via\n    * RequestGarbageCollectionForTesting.\n@@ -7156,6 +7264,7 @@ class V8_EXPORT Isolate {\n     kErrorStackTraceLimit = 45,\n     kWebAssemblyInstantiation = 46,\n     kDeoptimizerDisableSpeculation = 47,\n+    kArrayPrototypeSortJSArrayModifiedPrototype = 48,\n \n     // If you add new values here, you'll also need to update Chromium's:\n     // web_feature.mojom, UseCounterCallback.cpp, and enums.xml. V8 changes to\n@@ -7176,6 +7285,26 @@ class V8_EXPORT Isolate {\n   typedef void (*UseCounterCallback)(Isolate* isolate,\n                                      UseCounterFeature feature);\n \n+  /**\n+   * Allocates a new isolate but does not initialize it. Does not change the\n+   * currently entered isolate.\n+   *\n+   * Only Isolate::GetData() and Isolate::SetData(), which access the\n+   * embedder-controlled parts of the isolate, are allowed to be called on the\n+   * uninitialized isolate. To initialize the isolate, call\n+   * Isolate::Initialize().\n+   *\n+   * When an isolate is no longer used its resources should be freed\n+   * by calling Dispose().  Using the delete operator is not allowed.\n+   *\n+   * V8::Initialize() must have run prior to this.\n+   */\n+  static Isolate* Allocate();\n+\n+  /**\n+   * Initialize an Isolate previously allocated by Isolate::Allocate().\n+   */\n+  static void Initialize(Isolate* isolate, const CreateParams& params);\n \n   /**\n    * Creates a new isolate.  Does not change the currently entered\n@@ -8024,7 +8153,9 @@ class V8_EXPORT V8 {\n    * Returns { NULL, 0 } on failure.\n    * The caller acquires ownership of the data array in the return value.\n    */\n-  static StartupData CreateSnapshotDataBlob(const char* embedded_source = NULL);\n+  V8_DEPRECATED(\"Use SnapshotCreator\",\n+                static StartupData CreateSnapshotDataBlob(\n+                    const char* embedded_source = NULL));\n \n   /**\n    * Bootstrap an isolate and a context from the cold startup blob, run the\n@@ -8034,8 +8165,9 @@ class V8_EXPORT V8 {\n    * The caller acquires ownership of the data array in the return value.\n    * The argument startup blob is untouched.\n    */\n-  static StartupData WarmUpSnapshotDataBlob(StartupData cold_startup_blob,\n-                                            const char* warmup_source);\n+  V8_DEPRECATED(\"Use SnapshotCreator\",\n+                static StartupData WarmUpSnapshotDataBlob(\n+                    StartupData cold_startup_blob, const char* warmup_source));\n \n   /** Set the callback to invoke in case of Dcheck failures. */\n   static void SetDcheckErrorHandler(DcheckErrorCallback that);\n@@ -8230,6 +8362,18 @@ class V8_EXPORT SnapshotCreator {\n  public:\n   enum class FunctionCodeHandling { kClear, kKeep };\n \n+  /**\n+   * Initialize and enter an isolate, and set it up for serialization.\n+   * The isolate is either created from scratch or from an existing snapshot.\n+   * The caller keeps ownership of the argument snapshot.\n+   * \\param existing_blob existing snapshot from which to create this one.\n+   * \\param external_references a null-terminated array of external references\n+   *        that must be equivalent to CreateParams::external_references.\n+   */\n+  SnapshotCreator(Isolate* isolate,\n+                  const intptr_t* external_references = nullptr,\n+                  StartupData* existing_blob = nullptr);\n+\n   /**\n    * Create and enter an isolate, and set it up for serialization.\n    * The isolate is either created from scratch or from an existing snapshot.\n@@ -8990,85 +9134,6 @@ class V8_EXPORT Locker {\n \n namespace internal {\n \n-const int kApiPointerSize = sizeof(void*);  // NOLINT\n-const int kApiIntSize = sizeof(int);  // NOLINT\n-const int kApiInt64Size = sizeof(int64_t);  // NOLINT\n-\n-// Tag information for HeapObject.\n-const int kHeapObjectTag = 1;\n-const int kWeakHeapObjectTag = 3;\n-const int kHeapObjectTagSize = 2;\n-const intptr_t kHeapObjectTagMask = (1 << kHeapObjectTagSize) - 1;\n-\n-// Tag information for Smi.\n-const int kSmiTag = 0;\n-const int kSmiTagSize = 1;\n-const intptr_t kSmiTagMask = (1 << kSmiTagSize) - 1;\n-\n-template <size_t ptr_size> struct SmiTagging;\n-\n-template<int kSmiShiftSize>\n-V8_INLINE internal::Object* IntToSmi(int value) {\n-  int smi_shift_bits = kSmiTagSize + kSmiShiftSize;\n-  uintptr_t tagged_value =\n-      (static_cast<uintptr_t>(value) << smi_shift_bits) | kSmiTag;\n-  return reinterpret_cast<internal::Object*>(tagged_value);\n-}\n-\n-// Smi constants for 32-bit systems.\n-template <> struct SmiTagging<4> {\n-  enum { kSmiShiftSize = 0, kSmiValueSize = 31 };\n-  static int SmiShiftSize() { return kSmiShiftSize; }\n-  static int SmiValueSize() { return kSmiValueSize; }\n-  V8_INLINE static int SmiToInt(const internal::Object* value) {\n-    int shift_bits = kSmiTagSize + kSmiShiftSize;\n-    // Throw away top 32 bits and shift down (requires >> to be sign extending).\n-    return static_cast<int>(reinterpret_cast<intptr_t>(value)) >> shift_bits;\n-  }\n-  V8_INLINE static internal::Object* IntToSmi(int value) {\n-    return internal::IntToSmi<kSmiShiftSize>(value);\n-  }\n-  V8_INLINE static bool IsValidSmi(intptr_t value) {\n-    // To be representable as an tagged small integer, the two\n-    // most-significant bits of 'value' must be either 00 or 11 due to\n-    // sign-extension. To check this we add 01 to the two\n-    // most-significant bits, and check if the most-significant bit is 0\n-    //\n-    // CAUTION: The original code below:\n-    // bool result = ((value + 0x40000000) & 0x80000000) == 0;\n-    // may lead to incorrect results according to the C language spec, and\n-    // in fact doesn't work correctly with gcc4.1.1 in some cases: The\n-    // compiler may produce undefined results in case of signed integer\n-    // overflow. The computation must be done w/ unsigned ints.\n-    return static_cast<uintptr_t>(value + 0x40000000U) < 0x80000000U;\n-  }\n-};\n-\n-// Smi constants for 64-bit systems.\n-template <> struct SmiTagging<8> {\n-  enum { kSmiShiftSize = 31, kSmiValueSize = 32 };\n-  static int SmiShiftSize() { return kSmiShiftSize; }\n-  static int SmiValueSize() { return kSmiValueSize; }\n-  V8_INLINE static int SmiToInt(const internal::Object* value) {\n-    int shift_bits = kSmiTagSize + kSmiShiftSize;\n-    // Shift down and throw away top 32 bits.\n-    return static_cast<int>(reinterpret_cast<intptr_t>(value) >> shift_bits);\n-  }\n-  V8_INLINE static internal::Object* IntToSmi(int value) {\n-    return internal::IntToSmi<kSmiShiftSize>(value);\n-  }\n-  V8_INLINE static bool IsValidSmi(intptr_t value) {\n-    // To be representable as a long smi, the value must be a 32-bit integer.\n-    return (value == static_cast<int32_t>(value));\n-  }\n-};\n-\n-typedef SmiTagging<kApiPointerSize> PlatformSmiTagging;\n-const int kSmiShiftSize = PlatformSmiTagging::kSmiShiftSize;\n-const int kSmiValueSize = PlatformSmiTagging::kSmiValueSize;\n-V8_INLINE static bool SmiValuesAre31Bits() { return kSmiValueSize == 31; }\n-V8_INLINE static bool SmiValuesAre32Bits() { return kSmiValueSize == 32; }\n-\n /**\n  * This class exports constants and functionality from within v8 that\n  * is necessary to implement inline functions in the v8 api.  Don't\n@@ -9082,7 +9147,7 @@ class Internals {\n   static const int kMapInstanceTypeOffset = 1 * kApiPointerSize + kApiIntSize;\n   static const int kStringResourceOffset = 3 * kApiPointerSize;\n \n-  static const int kOddballKindOffset = 4 * kApiPointerSize + sizeof(double);\n+  static const int kOddballKindOffset = 4 * kApiPointerSize + kApiDoubleSize;\n   static const int kForeignAddressOffset = kApiPointerSize;\n   static const int kJSObjectHeaderSize = 3 * kApiPointerSize;\n   static const int kFixedArrayHeaderSize = 2 * kApiPointerSize;"
        },
        {
            "sha": "49c13c000bcbf907dc34192dd4070f5829b141db",
            "filename": "deps/v8/infra/config/cq.cfg",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -30,6 +30,11 @@ verifiers {\n         name: \"v8_linux64_asan_rel_ng_triggered\"\n         triggered_by: \"v8_linux64_asan_rel_ng\"\n       }\n+      builders { name: \"v8_linux64_dbg_ng\" }\n+      builders {\n+        name: \"v8_linux64_dbg_ng_triggered\"\n+        triggered_by: \"v8_linux64_dbg_ng\"\n+      }\n       builders { name: \"v8_linux64_gcc_compile_dbg\" }\n       builders { name: \"v8_linux64_jumbo_compile_rel\" }\n       builders { name: \"v8_linux64_rel_ng\" }\n@@ -61,11 +66,6 @@ verifiers {\n         experiment_percentage: 100\n       }\n       builders { name: \"v8_linux_chromium_gn_rel\" }\n-      builders { name: \"v8_linux_dbg_ng\" }\n-      builders {\n-        name: \"v8_linux_dbg_ng_triggered\"\n-        triggered_by: \"v8_linux_dbg_ng\"\n-      }\n       builders { name: \"v8_linux_gcc_compile_rel\" }\n       builders { name: \"v8_linux_mips64el_compile_rel\" }\n       builders { name: \"v8_linux_mipsel_compile_rel\" }"
        },
        {
            "sha": "23b0062455760620550c46ddd0286c8ee4a9d7a8",
            "filename": "deps/v8/infra/mb/mb_config.pyl",
            "status": "modified",
            "additions": 31,
            "deletions": 35,
            "changes": 66,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -43,12 +43,6 @@\n       'x64.optdebug': 'default_optdebug_x64',\n       'x64.release': 'default_release_x64',\n     },\n-\n-    'client.dart.fyi': {\n-      'v8-linux-release': 'release_x86_disassembler',\n-      'v8-win-release': 'release_x86_disassembler',\n-      'v8-mac-release': 'release_x86_disassembler',\n-    },\n     'client.dynamorio': {\n       'linux-v8-dr': 'release_x64',\n     },\n@@ -110,37 +104,39 @@\n       'V8 Random Deopt Fuzzer - debug': 'debug_x64',\n     },\n     'client.v8.clusterfuzz': {\n-      'V8 Win64 ASAN - release builder':\n+      'V8 Clusterfuzz Win64 ASAN - release builder':\n         'release_x64_asan_no_lsan_verify_heap',\n       # Note this is called a debug builder, but it uses a release build\n       # configuration with dchecks (which enables DEBUG in V8), since win-asan\n       # debug is not supported.\n-      'V8 Win64 ASAN - debug builder':\n+      'V8 Clusterfuzz Win64 ASAN - debug builder':\n         'release_x64_asan_no_lsan_verify_heap_dchecks',\n-      'V8 Mac64 ASAN - release builder':\n+      'V8 Clusterfuzz Mac64 ASAN - release builder':\n           'release_x64_asan_no_lsan_edge_verify_heap',\n-      'V8 Mac64 ASAN - debug builder':\n+      'V8 Clusterfuzz Mac64 ASAN - debug builder':\n           'debug_x64_asan_no_lsan_static_edge',\n-      'V8 Linux64 - release builder': 'release_x64_correctness_fuzzer',\n-      'V8 Linux64 - debug builder': 'debug_x64',\n-      'V8 Linux64 - nosnap release builder': 'release_x64_no_snap',\n-      'V8 Linux64 - nosnap debug builder': 'debug_x64_no_snap',\n-      'V8 Linux64 ASAN no inline - release builder':\n+      'V8 Clusterfuzz Linux64 - release builder':\n+          'release_x64_correctness_fuzzer',\n+      'V8 Clusterfuzz Linux64 - debug builder': 'debug_x64',\n+      'V8 Clusterfuzz Linux64 - nosnap release builder': 'release_x64_no_snap',\n+      'V8 Clusterfuzz Linux64 - nosnap debug builder': 'debug_x64_no_snap',\n+      'V8 Clusterfuzz Linux64 ASAN no inline - release builder':\n           'release_x64_asan_symbolized_edge_verify_heap',\n-      'V8 Linux64 ASAN - debug builder': 'debug_x64_asan_edge',\n-      'V8 Linux64 ASAN arm64 - debug builder':\n+      'V8 Clusterfuzz Linux64 ASAN - debug builder': 'debug_x64_asan_edge',\n+      'V8 Clusterfuzz Linux64 ASAN arm64 - debug builder':\n           'debug_simulate_arm64_asan_edge',\n-      'V8 Linux ASAN arm - debug builder':\n+      'V8 Clusterfuzz Linux ASAN arm - debug builder':\n           'debug_simulate_arm_asan_edge',\n-      'V8 Linux ASAN mipsel - debug builder':\n+      'V8 Clusterfuzz Linux ASAN mipsel - debug builder':\n           'debug_simulate_mipsel_asan_edge',\n-      'V8 Linux64 CFI - release builder': 'release_x64_cfi_clusterfuzz',\n-      'V8 Linux MSAN no origins':\n+      'V8 Clusterfuzz Linux64 CFI - release builder':\n+          'release_x64_cfi_clusterfuzz',\n+      'V8 Clusterfuzz Linux MSAN no origins':\n           'release_simulate_arm64_msan_no_origins_edge',\n-      'V8 Linux MSAN chained origins':\n+      'V8 Clusterfuzz Linux MSAN chained origins':\n           'release_simulate_arm64_msan_edge',\n-      'V8 Linux64 TSAN - release builder': 'release_x64_tsan',\n-      'V8 Linux64 UBSanVptr - release builder':\n+      'V8 Clusterfuzz Linux64 TSAN - release builder': 'release_x64_tsan',\n+      'V8 Clusterfuzz Linux64 UBSanVptr - release builder':\n           'release_x64_ubsan_vptr_recover_edge',\n     },\n     'client.v8.ports': {\n@@ -207,6 +203,7 @@\n       'v8_linux_gcc_compile_rel': 'release_x86_gcc_minimal_symbols',\n       'v8_linux_gcc_rel': 'release_x86_gcc_minimal_symbols',\n       'v8_linux_shared_compile_rel': 'release_x86_shared_verify_heap',\n+      'v8_linux64_dbg_ng': 'debug_x64_trybot',\n       'v8_linux64_gcc_compile_dbg': 'debug_x64_gcc',\n       'v8_linux64_fyi_rel_ng': 'release_x64_test_features_trybot',\n       'v8_linux64_rel_ng': 'release_x64_test_features_trybot',\n@@ -238,6 +235,7 @@\n       'v8_mac64_dbg': 'debug_x64',\n       'v8_mac64_dbg_ng': 'debug_x64',\n       'v8_mac64_asan_rel': 'release_x64_asan_no_lsan',\n+      'v8_mips_compile_rel': 'release_mips_no_snap_no_i18n',\n       'v8_linux_arm_rel_ng': 'release_simulate_arm_trybot',\n       'v8_linux_arm_dbg': 'debug_simulate_arm',\n       'v8_linux_arm_armv8a_rel': 'release_simulate_arm_trybot',\n@@ -417,7 +415,7 @@\n     'release_x64_fuchsia_trybot': [\n       'release_trybot', 'x64', 'fuchsia'],\n     'release_x64_gcc_coverage': [\n-      'release_bot', 'x64', 'coverage', 'gcc'],\n+      'release_bot', 'x64', 'coverage', 'gcc', 'no_custom_libcxx', 'no_sysroot'],\n     'release_x64_internal': [\n       'release_bot', 'x64', 'v8_enable_embedded_builtins',\n       'v8_snapshot_internal'],\n@@ -503,8 +501,6 @@\n     # Release configs for x86.\n     'release_x86': [\n       'release_bot', 'x86'],\n-    'release_x86_disassembler': [\n-      'release_bot', 'x86', 'v8_enable_disassembler'],\n     'release_x86_gcc': [\n       'release_bot', 'x86', 'gcc'],\n     'release_x86_gcc_minimal_symbols': [\n@@ -566,14 +562,14 @@\n \n     'cfi': {\n       'mixins': ['v8_enable_test_features'],\n-      'gn_args': ('is_cfi=true use_cfi_cast=true use_cfi_diag=true '\n-                  'use_cfi_recover=false'),\n+      'gn_args': ('is_cfi=true use_cfi_cast=true use_cfi_icall=true '\n+                  'use_cfi_diag=true use_cfi_recover=false'),\n     },\n \n     'cfi_clusterfuzz': {\n       'mixins': ['v8_enable_test_features'],\n-      'gn_args': ('is_cfi=true use_cfi_cast=true use_cfi_diag=true '\n-                  'use_cfi_recover=true'),\n+      'gn_args': ('is_cfi=true use_cfi_cast=true use_cfi_icall=true '\n+                  'use_cfi_diag=true use_cfi_recover=true'),\n     },\n \n     'clang': {\n@@ -669,6 +665,10 @@\n       'gn_args': 'is_clang=false',\n     },\n \n+    'no_custom_libcxx': {\n+      'gn_args': 'use_custom_libcxx=false',\n+    },\n+\n     'no_sysroot': {\n       'gn_args': 'use_sysroot=false',\n     },\n@@ -763,10 +763,6 @@\n       'gn_args': 'v8_correctness_fuzzer=true v8_multi_arch_build=true',\n     },\n \n-    'v8_enable_disassembler': {\n-      'gn_args': 'v8_enable_disassembler=true',\n-    },\n-\n     'v8_enable_embedded_builtins': {\n       'gn_args': 'v8_enable_embedded_builtins=true',\n     },"
        },
        {
            "sha": "9f242a929943af79a150ffdf9fd36e9a3d6d3031",
            "filename": "deps/v8/infra/testing/PRESUBMIT.py",
            "status": "added",
            "additions": 183,
            "deletions": 0,
            "changes": 183,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Ftesting%2FPRESUBMIT.py",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Ftesting%2FPRESUBMIT.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Ftesting%2FPRESUBMIT.py?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -0,0 +1,183 @@\n+# Copyright 2018 the V8 project authors. All rights reserved.\n+# Use of this source code is governed by a BSD-style license that can be\n+# found in the LICENSE file.\n+\n+\"\"\"\n+Presubmit checks for the validity of V8-side test specifications in pyl files.\n+\n+For simplicity, we check all pyl files on any changes in this folder.\n+\"\"\"\n+\n+import ast\n+import os\n+\n+\n+SUPPORTED_BUILDER_SPEC_KEYS = [\n+  'swarming_dimensions',\n+  'swarming_task_attrs',\n+  'tests',\n+]\n+\n+# This is not an exhaustive list. It only reflects what we currently use. If\n+# there's need to specify a different dimension, just add it here.\n+SUPPORTED_SWARMING_DIMENSIONS = [\n+  'cores',\n+  'cpu',\n+  'os',\n+]\n+\n+# This is not an exhaustive list. It only reflects what we currently use. If\n+# there's need to specify a different property, just add it here.\n+SUPPORTED_SWARMING_TASK_ATTRS = [\n+  'expiration',\n+  'hard_timeout',\n+  'priority',\n+]\n+\n+SUPPORTED_TEST_KEYS = [\n+  'name',\n+  'shards',\n+  'suffix',\n+  'swarming_dimensions',\n+  'swarming_task_attrs',\n+  'test_args',\n+  'variant',\n+]\n+\n+def check_keys(error_msg, src_dict, supported_keys):\n+  errors = []\n+  for key in src_dict.keys():\n+    if key not in supported_keys:\n+      errors += error_msg('Key \"%s\" must be one of %s' % (key, supported_keys))\n+  return errors\n+\n+\n+def _check_properties(error_msg, src_dict, prop_name, supported_keys):\n+  properties = src_dict.get(prop_name, {})\n+  if not isinstance(properties, dict):\n+    return error_msg('Value for %s must be a dict' % prop_name)\n+  return check_keys(error_msg, properties, supported_keys)\n+\n+\n+def _check_int_range(error_msg, src_dict, prop_name, lower_bound=None,\n+                     upper_bound=None):\n+  if prop_name not in src_dict:\n+    # All properties are optional.\n+    return []\n+  try:\n+    value = int(src_dict[prop_name])\n+  except ValueError:\n+    return error_msg('If specified, %s must be an int' % prop_name)\n+  if lower_bound is not None and value < lower_bound:\n+    return error_msg('If specified, %s must be >=%d' % (prop_name, lower_bound))\n+  if upper_bound is not None and value > upper_bound:\n+    return error_msg('If specified, %s must be <=%d' % (prop_name, upper_bound))\n+  return []\n+\n+\n+def _check_swarming_task_attrs(error_msg, src_dict):\n+  errors = []\n+  task_attrs = src_dict.get('swarming_task_attrs', {})\n+  errors += _check_int_range(\n+      error_msg, task_attrs, 'priority', lower_bound=25, upper_bound=100)\n+  errors += _check_int_range(\n+      error_msg, task_attrs, 'expiration', lower_bound=1)\n+  errors += _check_int_range(\n+      error_msg, task_attrs, 'hard_timeout', lower_bound=1)\n+  return errors\n+\n+\n+def _check_swarming_config(error_msg, src_dict):\n+  errors = []\n+  errors += _check_properties(\n+      error_msg, src_dict, 'swarming_dimensions',\n+      SUPPORTED_SWARMING_DIMENSIONS)\n+  errors += _check_properties(\n+      error_msg, src_dict, 'swarming_task_attrs',\n+      SUPPORTED_SWARMING_TASK_ATTRS)\n+  errors += _check_swarming_task_attrs(error_msg, src_dict)\n+  return errors\n+\n+\n+def _check_test(error_msg, test):\n+  if not isinstance(test, dict):\n+    return error_msg('Each test must be specified with a dict')\n+  errors = check_keys(error_msg, test, SUPPORTED_TEST_KEYS)\n+  if not test.get('name'):\n+    errors += error_msg('A test requires a name')\n+  errors += _check_swarming_config(error_msg, test)\n+\n+  test_args = test.get('test_args', [])\n+  if not isinstance(test_args, list):\n+    errors += error_msg('If specified, test_args must be a list of arguments')\n+  if not all(isinstance(x, basestring) for x in test_args):\n+    errors += error_msg('If specified, all test_args must be strings')\n+\n+  # Limit shards to 10 to avoid erroneous resource exhaustion.\n+  errors += _check_int_range(\n+      error_msg, test, 'shards', lower_bound=1, upper_bound=10)\n+\n+  variant = test.get('variant', 'default')\n+  if not variant or not isinstance(variant, basestring):\n+    errors += error_msg('If specified, variant must be a non-empty string')\n+\n+  return errors\n+\n+\n+def _check_test_spec(file_path, raw_pyl):\n+  def error_msg(msg):\n+    return ['Error in %s:\\n%s' % (file_path, msg)]\n+\n+  try:\n+    # Eval python literal file.\n+    full_test_spec = ast.literal_eval(raw_pyl)\n+  except SyntaxError as e:\n+    return error_msg('Pyl parsing failed with:\\n%s' % e)\n+\n+  if not isinstance(full_test_spec, dict):\n+    return error_msg('Test spec must be a dict')\n+\n+  errors = []\n+  for buildername, builder_spec in full_test_spec.iteritems():\n+    def error_msg(msg):\n+      return ['Error in %s for builder %s:\\n%s' % (file_path, buildername, msg)]\n+\n+    if not isinstance(buildername, basestring) or not buildername:\n+      errors += error_msg('Buildername must be a non-empty string')\n+\n+    if not isinstance(builder_spec, dict) or not builder_spec:\n+      errors += error_msg('Value must be a non-empty dict')\n+      continue\n+\n+    errors += check_keys(error_msg, builder_spec, SUPPORTED_BUILDER_SPEC_KEYS)\n+    errors += _check_swarming_config(error_msg, builder_spec)\n+\n+    for test in builder_spec.get('tests', []):\n+      errors += _check_test(error_msg, test)\n+\n+  return errors\n+\n+\n+\n+def CheckChangeOnCommit(input_api, output_api):\n+  def file_filter(regexp):\n+    return lambda f: input_api.FilterSourceFile(f, white_list=(regexp,))\n+\n+  # Calculate which files are affected.\n+  if input_api.AffectedFiles(False, file_filter(r'.*PRESUBMIT\\.py')):\n+    # If PRESUBMIT.py itself was changed, check also the test spec.\n+    affected_files = [\n+      os.path.join(input_api.PresubmitLocalPath(), 'builders.pyl'),\n+    ]\n+  else:\n+    # Otherwise, check test spec only when changed.\n+    affected_files = [\n+      f.AbsoluteLocalPath()\n+      for f in input_api.AffectedFiles(False, file_filter(r'.*builders\\.pyl'))\n+    ]\n+\n+  errors = []\n+  for file_path in affected_files:\n+    with open(file_path) as f:\n+      errors += _check_test_spec(file_path, f.read())\n+  return [output_api.PresubmitError(r) for r in errors]"
        },
        {
            "sha": "438ba2e6d064c422ed8ed128e6ce77aff1f6177e",
            "filename": "deps/v8/infra/testing/README.md",
            "status": "modified",
            "additions": 45,
            "deletions": 18,
            "changes": 63,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Ftesting%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Ftesting%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Ftesting%2FREADME.md?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -7,38 +7,65 @@ variants specified [here](https://chromium.googlesource.com/v8/v8/+/master/tools\n Changes to src-side test specifications go through CQ like any other CL and\n require tests added for specific trybots to pass.\n \n-The test specifications are defined in a V8-side folder called infra/testing.\n-Every master has an optional file named `<mastername>.pyl`. E.g.\n-`tryserver.v8.pyl`.\n+The test specifications are defined in a V8-side python-literal file\n+`infra/testing/builders.pyl`.\n \n-The structure of each file is:\n+The structure of the file is:\n ```\n {\n-  <buildername>: [\n-    {\n-      'name': <test-spec name>,\n-      'variant': <variant name>,\n-      'shards': <number of shards>,\n-    },\n-    ...\n-  ],\n+  <buildername>: {\n+    'tests': [\n+      {\n+        'name': <test-spec name>,\n+        'suffix': <step suffix>,\n+        'variant': <variant name>,\n+        'shards': <number of shards>,\n+        'test_args': <list of flags>,\n+        'swarming_task_attrs': {...},\n+        'swarming_dimensions': {...},\n+      },\n+      ...\n+    ],\n+    'swarming_task_attrs': {...},\n+    'swarming_dimensions': {...},\n+  },\n   ...\n }\n ```\n The `<buildername>` is a string name of the builder to execute the tests.\n `<test-spec name>` is a label defining a test specification matching the\n [infra-side](https://chromium.googlesource.com/chromium/tools/build/+/master/scripts/slave/recipe_modules/v8/testing.py#58).\n-The `<variant name>` is a testing variant specified\n+The optional `suffix` will be appended to test-step names for disambiguation.\n+The optional `variant` is a testing variant specified\n [here](https://chromium.googlesource.com/v8/v8/+/master/tools/testrunner/local/variants.py).\n-`<number of shards>` is optional (default 1), but can be provided to increase\n-the swarming shards for long-running tests.\n+The optional `shards` (default 1) can be provided to increase the swarming\n+shards for long-running tests.\n+The optional `test_args` is a list of string flags that will be passed to the\n+V8 test driver.\n+The optional `swarming_task_attrs` is a dict allowing to override the defaults\n+for `priority`, `expiration` and `hard_timeout`.\n+The optional `swarming_dimensions` is a dict allowing to override the defaults\n+for `cpu`, `cores` and `os`.\n+Both `swarming_task_attrs` and `swarming_dimensions` can be defined per builder\n+and per test, whereas the latter takes precedence.\n \n Example:\n ```\n {\n-  'v8_linux64_rel_ng_triggered': [\n-    {'name': 'v8testing', 'variant': 'nooptimization', 'shards': 2},\n-  ],\n+  'v8_linux64_rel_ng_triggered': {\n+    'tests': [\n+      {\n+        'name': 'v8testing',\n+        'suffix': 'stress',\n+        'variant': 'nooptimization',\n+        'shards': 2,\n+        'test_args': ['--gc-stress'],\n+        'swarming_dimensions': {'os': 'Ubuntu-14.4'},\n+      },\n+    ],\n+    'swarming_properties': {'priority': 35},\n+    'swarming_dimensions': {'os': 'Ubuntu'},\n+  },\n }\n ```\n "
        },
        {
            "sha": "4d76d696b5dccd4886971d929e61846cb946cc65",
            "filename": "deps/v8/infra/testing/builders.pyl",
            "status": "added",
            "additions": 432,
            "deletions": 0,
            "changes": 432,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Ftesting%2Fbuilders.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Finfra%2Ftesting%2Fbuilders.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Ftesting%2Fbuilders.pyl?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -0,0 +1,432 @@\n+# Copyright 2018 The V8 project authors. All rights reserved.\n+# Use of this source code is governed by a BSD-style license that can be\n+# found in the LICENSE file.\n+#\n+# Please keep builder names, builder configs and test definitions sorted.\n+# Builder names should be sorted alphabetically. Builder configs should have\n+# keys sorted in the alphabetical order except 'tests' key, which should always\n+# come last. Test definitions must have keys in the following order, but omit\n+# optional fields:\n+#  * name (required)\n+#  * variant\n+#  * test_args\n+#  * shards\n+#  * suffix\n+#  * swarming_dimensions\n+#  * swarming_task_attrs\n+#\n+# Please also format test definitions as a single line with ', ' separating\n+# fields, e.g.\n+#\n+#   {'name': 'v8testing', 'variant': 'extra', 'shards': 2}\n+#\n+# After formatting test definitions this way, please sort them alphabetically by\n+# test name. For all variants of the test with the same name, the\n+# least-qualified test (no variant, no test args) should come first. You may\n+# also deviate from the alphabetical order if necessary and group tests\n+# differently, but in this case please add a comment before each group and\n+# continue to sort tests using the rules above within each group.\n+\n+{\n+  ##############################################################################\n+  ### luci.v8.try\n+  ##############################################################################\n+  # Linux32\n+  'v8_linux_dbg_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64-avx2',\n+    },\n+    'tests': [\n+      {'name': 'benchmarks'},\n+      {'name': 'benchmarks', 'variant': 'extra'},\n+      {'name': 'mjsunit_sp_frame_access'},\n+      {'name': 'mozilla'},\n+      {'name': 'mozilla', 'variant': 'extra'},\n+      {'name': 'test262'},\n+      {'name': 'test262_variants', 'variant': 'extra', 'shards': 3},\n+      {'name': 'v8testing', 'shards': 3},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 2},\n+    ],\n+  },\n+  'v8_linux_gc_stress_dbg': {\n+    'tests': [\n+      {'name': 'mjsunit', 'variant': 'slow_path', 'test_args': ['--gc-stress'], 'shards': 2},\n+      {'name': 'd8testing', 'test_args': ['--gc-stress'], 'shards': 5},\n+    ],\n+  },\n+  'v8_linux_gcc_rel': {\n+    'tests': [\n+      {'name': 'v8testing'},\n+    ],\n+  },\n+  'v8_linux_nodcheck_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64-avx2',\n+    },\n+    'tests': [\n+      {'name': 'benchmarks'},\n+      {'name': 'benchmarks', 'variant': 'extra'},\n+      {'name': 'mozilla'},\n+      {'name': 'mozilla', 'variant': 'extra'},\n+      {'name': 'test262_variants', 'shards': 2},\n+      {'name': 'test262_variants', 'variant': 'extra', 'shards': 2},\n+      {'name': 'v8testing'},\n+      {'name': 'v8testing', 'variant': 'extra'},\n+    ],\n+  },\n+  'v8_linux_noi18n_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'mozilla', 'variant': 'default'},\n+      {'name': 'test262', 'variant': 'default'},\n+      {'name': 'v8testing', 'variant': 'default', 'shards': 2},\n+    ],\n+  },\n+  'v8_linux_nosnap_rel': {\n+    'tests': [\n+      {'name': 'v8testing', 'variant': 'default', 'shards': 4},\n+    ],\n+  },\n+  'v8_linux_nosnap_dbg': {\n+    'swarming_task_attrs': {\n+      'hard_timeout': 3600,\n+    },\n+    'tests': [\n+      {'name': 'v8testing', 'variant': 'default', 'shards': 9},\n+    ],\n+  },\n+  'v8_linux_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64-avx2',\n+    },\n+    'tests': [\n+      {'name': 'benchmarks'},\n+      {'name': 'benchmarks', 'variant': 'extra'},\n+      {'name': 'gcmole'},\n+      {'name': 'mjsunit_sp_frame_access'},\n+      {'name': 'mozilla'},\n+      {'name': 'mozilla', 'variant': 'extra'},\n+      {'name': 'optimize_for_size'},\n+      {'name': 'test262_variants', 'shards': 4},\n+      {'name': 'test262_variants', 'variant': 'extra', 'shards': 2},\n+      {'name': 'v8testing'},\n+      {'name': 'v8testing', 'variant': 'extra'},\n+    ],\n+  },\n+  'v8_linux_verify_csa_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'v8testing'},\n+    ],\n+  },\n+  ##############################################################################\n+  # Linux32 with arm simulators\n+  'v8_linux_arm_dbg': {\n+    'tests': [\n+      {'name': 'mjsunit_sp_frame_access'},\n+      {'name': 'mozilla'},\n+      {'name': 'test262'},\n+      {'name': 'v8testing', 'shards': 7},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 3},\n+    ],\n+  },\n+  'v8_linux_arm_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'mjsunit_sp_frame_access'},\n+      {'name': 'mozilla'},\n+      {'name': 'test262'},\n+      {'name': 'v8testing', 'shards': 7},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 3},\n+    ],\n+  },\n+  ##############################################################################\n+  # Linux64\n+  'v8_linux64_asan_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'test262_variants', 'shards': 7},\n+      {'name': 'v8testing', 'shards': 3},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 2},\n+      {'name': 'v8testing', 'variant': 'slow_path'},\n+    ],\n+  },\n+  'v8_linux64_cfi_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'benchmarks'},\n+      {'name': 'mozilla'},\n+      {'name': 'optimize_for_size'},\n+      {'name': 'test262'},\n+      {'name': 'v8testing', 'shards': 2},\n+    ],\n+  },\n+  'v8_linux64_dbg_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64-avx2',\n+    },\n+    'tests': [\n+      {'name': 'benchmarks'},\n+      {'name': 'benchmarks', 'variant': 'extra'},\n+      {'name': 'mjsunit_sp_frame_access'},\n+      {'name': 'mozilla'},\n+      {'name': 'mozilla', 'variant': 'extra'},\n+      {'name': 'test262'},\n+      {'name': 'test262_variants', 'variant': 'extra', 'shards': 3},\n+      {'name': 'v8testing', 'shards': 3},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 2},\n+      {'name': 'v8testing', 'variant': 'minor_mc', 'shards': 1},\n+    ],\n+  },\n+  'v8_linux64_fyi_rel_ng_triggered': {\n+    'tests': [\n+      # Stress sampling.\n+      {'name': 'mjsunit', 'variant': 'stress_sampling'},\n+      {'name': 'webkit', 'variant': 'stress_sampling'},\n+      # Infra staging.\n+      {'name': 'test262_variants', 'variant': 'infra_staging', 'shards': 2},\n+      {'name': 'v8testing', 'variant': 'infra_staging', 'shards': 2},\n+    ],\n+  },\n+  'v8_linux64_msan_rel': {\n+    'tests': [\n+      {'name': 'test262', 'shards': 2},\n+      {'name': 'v8testing', 'shards': 5},\n+    ],\n+  },\n+  'v8_linux64_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64-avx2',\n+    },\n+    'tests': [\n+      # TODO(machenbach): Add benchmarks.\n+      # TODO(machenbach): Add mozilla tests.\n+      {'name': 'mjsunit_sp_frame_access'},\n+      {'name': 'optimize_for_size'},\n+      {'name': 'test262_variants', 'shards': 4},\n+      {'name': 'test262_variants', 'variant': 'extra', 'shards': 2},\n+      {'name': 'v8initializers'},\n+      {'name': 'v8testing'},\n+      {'name': 'v8testing', 'variant': 'extra'},\n+      {'name': 'v8testing', 'variant': 'minor_mc'},\n+      {'name': 'v8testing', 'variant': 'slow_path'},\n+    ],\n+  },\n+  'v8_linux64_tsan_rel': {\n+    'tests': [\n+      {'name': 'benchmarks'},\n+      {'name': 'mozilla'},\n+      {'name': 'test262', 'shards': 3},\n+      {'name': 'v8testing', 'shards': 5},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 3},\n+      {'name': 'v8testing', 'variant': 'slow_path'},\n+    ],\n+  },\n+  'v8_linux64_ubsan_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'v8testing', 'shards': 2},\n+    ],\n+  },\n+  'v8_linux64_verify_csa_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'v8testing'},\n+    ],\n+  },\n+  ##############################################################################\n+  # Linux64 with arm64 simulators\n+  'v8_linux_arm64_dbg': {\n+    'tests': [\n+      {'name': 'mjsunit_sp_frame_access'},\n+      {'name': 'mozilla'},\n+      {'name': 'test262'},\n+      {'name': 'v8testing', 'shards': 7},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 3},\n+    ],\n+  },\n+  'v8_linux_arm64_gc_stress_dbg': {\n+    'tests': [\n+      {'name': 'd8testing', 'test_args': ['--gc-stress'], 'shards': 8},\n+    ],\n+  },\n+  'v8_linux_arm64_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'mjsunit_sp_frame_access'},\n+      {'name': 'mozilla'},\n+      {'name': 'test262'},\n+      {'name': 'v8testing', 'shards': 7},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 3},\n+    ],\n+  },\n+  ##############################################################################\n+  # Win32\n+  'v8_win_dbg': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Windows-7-SP1',\n+    },\n+    'tests': [\n+      {'name': 'mozilla'},\n+      {'name': 'v8testing', 'shards': 3},\n+    ],\n+  },\n+  'v8_win_nosnap_shared_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Windows-7-SP1',\n+    },\n+    'tests': [\n+      {'name': 'v8testing', 'variant': 'default', 'shards': 3},\n+    ],\n+  },\n+  'v8_win_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Windows-7-SP1',\n+    },\n+    'tests': [\n+      {'name': 'test262'},\n+      {'name': 'v8testing'},\n+    ],\n+  },\n+  ##############################################################################\n+  # Win64\n+  'v8_win64_asan_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'os': 'Windows-10',\n+    },\n+    'tests': [\n+      {'name': 'v8testing', 'shards': 5},\n+    ],\n+  },\n+  'v8_win64_dbg': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Windows-7-SP1',\n+    },\n+    'tests': [\n+      {'name': 'mozilla'},\n+      {'name': 'test262', 'shards': 2},\n+      {'name': 'v8testing', 'shards': 3},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 2},\n+    ],\n+  },\n+  'v8_win64_msvc_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Windows-7-SP1',\n+    },\n+    'tests': [\n+      {'name': 'mozilla'},\n+      {'name': 'test262'},\n+      {'name': 'v8testing'},\n+    ],\n+  },\n+  'v8_win64_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Windows-7-SP1',\n+    },\n+    'tests': [\n+      {'name': 'test262'},\n+      {'name': 'v8testing'},\n+      {'name': 'v8testing', 'variant': 'extra'},\n+    ],\n+  },\n+  ##############################################################################\n+  # Mac64\n+  'v8_mac64_asan_rel': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Mac-10.13',\n+    },\n+    'tests': [\n+      {'name': 'v8testing', 'shards': 4},\n+    ],\n+  },\n+  'v8_mac64_dbg_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Mac-10.13',\n+    },\n+    'tests': [\n+      {'name': 'mozilla'},\n+      {'name': 'test262'},\n+      {'name': 'v8testing', 'shards': 3},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 2},\n+    ],\n+  },\n+  'v8_mac64_gc_stress_dbg': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Mac-10.13',\n+    },\n+    'tests': [\n+      {'name': 'd8testing', 'test_args': ['--gc-stress'], 'shards': 4},\n+    ],\n+  },\n+  'v8_mac64_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'cpu': 'x86-64',\n+      'os': 'Mac-10.13',\n+    },\n+    'tests': [\n+      {'name': 'mozilla'},\n+      {'name': 'test262'},\n+      {'name': 'v8testing'},\n+      {'name': 'v8testing', 'variant': 'extra'},\n+    ],\n+  },\n+  ##############################################################################\n+  ### luci.v8.ci\n+  ##############################################################################\n+  # Linux32\n+  'V8 Linux - debug': {\n+    'tests': [\n+      {'name': 'benchmarks', 'variant': 'code_serializer', 'shards': 1},\n+      {'name': 'd8testing', 'variant': 'code_serializer', 'shards': 1},\n+      {'name': 'mozilla', 'variant': 'code_serializer', 'shards': 1},\n+      {'name': 'test262_variants', 'variant': 'code_serializer', 'shards': 1},\n+    ],\n+  },\n+  'V8 Linux - gc stress': {\n+    'tests': [\n+      {'name': 'mjsunit', 'variant': 'slow_path', 'shards': 2},\n+    ],\n+  },\n+  ##############################################################################\n+  # Linux64\n+  'V8 Linux64': {\n+    'tests': [\n+      {'name': 'v8testing', 'variant': 'minor_mc', 'shards': 1},\n+    ],\n+  },\n+  'V8 Linux64 - debug': {\n+    'tests': [\n+      {'name': 'v8testing', 'variant': 'minor_mc', 'shards': 1},\n+      {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n+    ],\n+  },\n+  'V8 Linux64 - debug - fyi': {\n+    'tests': [\n+      # Infra staging.\n+      {'name': 'test262_variants', 'variant': 'infra_staging', 'shards': 3},\n+      {'name': 'v8testing', 'variant': 'infra_staging', 'shards': 2},\n+      # Stress sampling.\n+      {'name': 'mjsunit', 'variant': 'stress_sampling', 'shards': 1},\n+      {'name': 'webkit', 'variant': 'stress_sampling', 'shards': 1},\n+    ],\n+  },\n+  'V8 Linux64 - fyi': {\n+    'tests': [\n+      {'name': 'mjsunit', 'variant': 'stress_sampling', 'shards': 1},\n+      {'name': 'test262_variants', 'variant': 'infra_staging', 'shards': 2},\n+      {'name': 'v8testing', 'variant': 'infra_staging', 'shards': 1},\n+      {'name': 'webkit', 'variant': 'stress_sampling', 'shards': 1},\n+    ],\n+  },\n+  'V8 Linux64 ASAN': {\n+    'tests': [\n+      {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n+    ],\n+  },\n+  'V8 Linux64 TSAN': {\n+    'tests': [\n+      {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n+    ],\n+  },\n+}"
        },
        {
            "sha": "ab1744fc78b33e3f0b32bda55dd81fc82675f80c",
            "filename": "deps/v8/infra/testing/client.v8.pyl",
            "status": "removed",
            "additions": 0,
            "deletions": 48,
            "changes": 48,
            "blob_url": "https://github.com/nodejs/node/blob/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Finfra%2Ftesting%2Fclient.v8.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Finfra%2Ftesting%2Fclient.v8.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Ftesting%2Fclient.v8.pyl?ref=4d94bb2b1f72b6b612983a517a39c5545724a3ad",
            "patch": "@@ -1,48 +0,0 @@\n-# Copyright 2017 The V8 project authors. All rights reserved.\n-# Use of this source code is governed by a BSD-style license that can be\n-# found in the LICENSE file.\n-\n-{\n-  ### Example configuration for CI bots (please keep as reference).\n-  # 'V8 Linux64': [\n-  #   {'name': 'benchmarks', 'variant': 'default', 'shards': 1},\n-  # ],\n-  # 'V8 Linux64 - debug': [\n-  #   {'name': 'benchmarks', 'variant': 'default', 'shards': 1},\n-  # ],\n-\n-  'V8 Linux - debug': [\n-    {'name': 'd8testing', 'variant': 'code_serializer', 'shards': 1},\n-    {'name': 'mozilla', 'variant': 'code_serializer', 'shards': 1},\n-    {'name': 'test262_variants', 'variant': 'code_serializer', 'shards': 1},\n-    {'name': 'benchmarks', 'variant': 'code_serializer', 'shards': 1},\n-  ],\n-  'V8 Linux - gc stress': [\n-    {'name': 'mjsunit', 'variant': 'slow_path', 'shards': 2},\n-  ],\n-  'V8 Linux64': [\n-    {'name': 'v8testing', 'variant': 'minor_mc', 'shards': 1},\n-  ],\n-  'V8 Linux64 - debug': [\n-    {'name': 'v8testing', 'variant': 'minor_mc', 'shards': 1},\n-    {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n-  ],\n-  'V8 Linux64 ASAN': [\n-    {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n-  ],\n-  'V8 Linux64 TSAN': [\n-    {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n-  ],\n-  'V8 Linux64 - fyi': [\n-    {'name': 'v8testing', 'variant': 'infra_staging', 'shards': 1},\n-    {'name': 'test262_variants', 'variant': 'infra_staging', 'shards': 2},\n-    {'name': 'mjsunit', 'variant': 'stress_sampling', 'shards': 1},\n-    {'name': 'webkit', 'variant': 'stress_sampling', 'shards': 1},\n-  ],\n-  'V8 Linux64 - debug - fyi': [\n-    {'name': 'v8testing', 'variant': 'infra_staging', 'shards': 2},\n-    {'name': 'test262_variants', 'variant': 'infra_staging', 'shards': 3},\n-    {'name': 'mjsunit', 'variant': 'stress_sampling', 'shards': 1},\n-    {'name': 'webkit', 'variant': 'stress_sampling', 'shards': 1},\n-  ],\n-}"
        },
        {
            "sha": "ee6abae5d533d3e1fcbd26ce37cd17ea7b1bdc8d",
            "filename": "deps/v8/infra/testing/tryserver.v8.pyl",
            "status": "removed",
            "additions": 0,
            "deletions": 30,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Finfra%2Ftesting%2Ftryserver.v8.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Finfra%2Ftesting%2Ftryserver.v8.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Ftesting%2Ftryserver.v8.pyl?ref=4d94bb2b1f72b6b612983a517a39c5545724a3ad",
            "patch": "@@ -1,30 +0,0 @@\n-# Copyright 2017 The V8 project authors. All rights reserved.\n-# Use of this source code is governed by a BSD-style license that can be\n-# found in the LICENSE file.\n-\n-{\n-  ### Example configuration for trybots (please keep as reference).\n-  # 'v8_linux64_rel_ng_triggered': [\n-  #   {'name': 'benchmarks', 'variant': 'default', 'shards': 1},\n-  # ],\n-\n-  'v8_linux64_fyi_rel_ng_triggered': [\n-    {'name': 'v8testing', 'variant': 'infra_staging', 'shards': 2},\n-    {'name': 'test262_variants', 'variant': 'infra_staging', 'shards': 2},\n-    {'name': 'mjsunit', 'variant': 'stress_sampling', 'shards': 1},\n-    {'name': 'webkit', 'variant': 'stress_sampling', 'shards': 1},\n-  ],\n-  'v8_linux64_rel_ng_triggered': [\n-    {'name': 'v8testing', 'variant': 'minor_mc', 'shards': 1},\n-    {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n-  ],\n-  'v8_linux_gc_stress_dbg': [\n-    {'name': 'mjsunit', 'variant': 'slow_path', 'shards': 2},\n-  ],\n-  'v8_linux64_asan_rel_ng_triggered': [\n-    {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n-  ],\n-  'v8_linux64_tsan_rel': [\n-    {'name': 'v8testing', 'variant': 'slow_path', 'shards': 1},\n-  ],\n-}"
        },
        {
            "sha": "275595d0d8048117d54419650d63c88b940fa355",
            "filename": "deps/v8/src/DEPS",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2FDEPS",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2FDEPS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2FDEPS?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -27,7 +27,8 @@ include_rules = [\n   \"+src/trap-handler/trap-handler.h\",\n   \"+testing/gtest/include/gtest/gtest_prod.h\",\n   \"-src/libplatform\",\n-  \"-include/libplatform\"\n+  \"-include/libplatform\",\n+  \"+torque-generated\"\n ]\n \n specific_include_rules = {"
        },
        {
            "sha": "565c019092b8a19f08e8e04a7f4872cdc61d294f",
            "filename": "deps/v8/src/accessors.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 23,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Faccessors.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Faccessors.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faccessors.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -12,6 +12,7 @@\n #include \"src/heap/factory.h\"\n #include \"src/isolate-inl.h\"\n #include \"src/messages.h\"\n+#include \"src/objects/api-callbacks.h\"\n #include \"src/property-details.h\"\n #include \"src/prototype.h\"\n \n@@ -37,7 +38,7 @@ Handle<AccessorInfo> Accessors::MakeAccessor(\n   info->set_getter(*get);\n   info->set_setter(*set);\n   Address redirected = info->redirected_getter();\n-  if (redirected != nullptr) {\n+  if (redirected != kNullAddress) {\n     Handle<Object> js_get = v8::FromCData(isolate, redirected);\n     info->set_js_getter(*js_get);\n   }\n@@ -76,12 +77,12 @@ bool Accessors::IsJSObjectFieldAccessor(Handle<Map> map, Handle<Name> name,\n   }\n }\n \n-\n-namespace {\n-\n-V8_WARN_UNUSED_RESULT MaybeHandle<Object> ReplaceAccessorWithDataProperty(\n-    Isolate* isolate, Handle<Object> receiver, Handle<JSObject> holder,\n-    Handle<Name> name, Handle<Object> value) {\n+V8_WARN_UNUSED_RESULT MaybeHandle<Object>\n+Accessors::ReplaceAccessorWithDataProperty(Isolate* isolate,\n+                                           Handle<Object> receiver,\n+                                           Handle<JSObject> holder,\n+                                           Handle<Name> name,\n+                                           Handle<Object> value) {\n   LookupIterator it(receiver, name, holder,\n                     LookupIterator::OWN_SKIP_INTERCEPTOR);\n   // Skip any access checks we might hit. This accessor should never hit in a\n@@ -96,7 +97,6 @@ V8_WARN_UNUSED_RESULT MaybeHandle<Object> ReplaceAccessorWithDataProperty(\n   return value;\n }\n \n-}  // namespace\n \n //\n // Accessors::ReconfigureToDataProperty\n@@ -113,26 +113,15 @@ void Accessors::ReconfigureToDataProperty(\n       Handle<JSObject>::cast(Utils::OpenHandle(*info.Holder()));\n   Handle<Name> name = Utils::OpenHandle(*key);\n   Handle<Object> value = Utils::OpenHandle(*val);\n-  MaybeHandle<Object> result =\n-      ReplaceAccessorWithDataProperty(isolate, receiver, holder, name, value);\n+  MaybeHandle<Object> result = Accessors::ReplaceAccessorWithDataProperty(\n+      isolate, receiver, holder, name, value);\n   if (result.is_null()) {\n     isolate->OptionalRescheduleException(false);\n   } else {\n     info.GetReturnValue().Set(true);\n   }\n }\n \n-void Accessors::ReconfigureToDataPropertyGetter(\n-    v8::Local<v8::Name> name, const v8::PropertyCallbackInfo<v8::Value>& info) {\n-  UNREACHABLE();\n-}\n-\n-Handle<AccessorInfo> Accessors::MakeReconfigureToDataPropertyInfo(\n-    Isolate* isolate) {\n-  Handle<Name> name = isolate->factory()->ReconfigureToDataProperty_string();\n-  return MakeAccessor(isolate, name, &ReconfigureToDataPropertyGetter,\n-                      &ReconfigureToDataProperty);\n-}\n \n //\n // Accessors::ArgumentsIterator\n@@ -1194,8 +1183,8 @@ void Accessors::ErrorStackGetter(\n       Utils::OpenHandle(*v8::Local<v8::Value>(info.This()));\n   Handle<Name> name = Utils::OpenHandle(*key);\n   if (IsAccessor(receiver, name, holder)) {\n-    result = ReplaceAccessorWithDataProperty(isolate, receiver, holder, name,\n-                                             formatted_stack_trace);\n+    result = Accessors::ReplaceAccessorWithDataProperty(\n+        isolate, receiver, holder, name, formatted_stack_trace);\n     if (result.is_null()) {\n       isolate->OptionalRescheduleException(false);\n       return;"
        },
        {
            "sha": "4a1a67e93e68221d69a51a239e6c789b721fcc17",
            "filename": "deps/v8/src/accessors.h",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Faccessors.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Faccessors.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faccessors.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -33,7 +33,6 @@ class JavaScriptFrame;\n   V(function_name, FunctionName)                                    \\\n   V(function_length, FunctionLength)                                \\\n   V(function_prototype, FunctionPrototype)                          \\\n-  V(reconfigure_to_data_property, ReconfigureToDataProperty)        \\\n   V(script_column_offset, ScriptColumnOffset)                       \\\n   V(script_compilation_type, ScriptCompilationType)                 \\\n   V(script_context_data, ScriptContextData)                         \\\n@@ -110,6 +109,10 @@ class Accessors : public AllStatic {\n   static bool IsJSObjectFieldAccessor(Handle<Map> map, Handle<Name> name,\n                                       FieldIndex* field_index);\n \n+  static MaybeHandle<Object> ReplaceAccessorWithDataProperty(\n+      Isolate* isolate, Handle<Object> receiver, Handle<JSObject> holder,\n+      Handle<Name> name, Handle<Object> value);\n+\n   // Create an AccessorInfo. The setter is optional (can be nullptr).\n   //\n   // Note that the type of setter is AccessorNameBooleanSetterCallback instead"
        },
        {
            "sha": "f3e2770847b1566c8f30ce9bcdfde080219ab4ea",
            "filename": "deps/v8/src/address-map.h",
            "status": "modified",
            "additions": 11,
            "deletions": 3,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Faddress-map.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Faddress-map.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faddress-map.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -34,13 +34,21 @@ class PointerToIndexHashMap\n   }\n \n  private:\n-  static uintptr_t Key(Type value) {\n-    return reinterpret_cast<uintptr_t>(value);\n-  }\n+  static inline uintptr_t Key(Type value);\n \n   static uint32_t Hash(uintptr_t key) { return static_cast<uint32_t>(key); }\n };\n \n+template <>\n+inline uintptr_t PointerToIndexHashMap<Address>::Key(Address value) {\n+  return static_cast<uintptr_t>(value);\n+}\n+\n+template <typename Type>\n+inline uintptr_t PointerToIndexHashMap<Type>::Key(Type value) {\n+  return reinterpret_cast<uintptr_t>(value);\n+}\n+\n class AddressToIndexHashMap : public PointerToIndexHashMap<Address> {};\n class HeapObjectToIndexHashMap : public PointerToIndexHashMap<HeapObject*> {};\n "
        },
        {
            "sha": "55c68dea89482e5ac9c5072c946fdf4b2b755da3",
            "filename": "deps/v8/src/allocation.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 17,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fallocation.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fallocation.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fallocation.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -206,15 +206,15 @@ bool OnCriticalMemoryPressure(size_t length) {\n   return true;\n }\n \n-VirtualMemory::VirtualMemory() : address_(nullptr), size_(0) {}\n+VirtualMemory::VirtualMemory() : address_(kNullAddress), size_(0) {}\n \n VirtualMemory::VirtualMemory(size_t size, void* hint, size_t alignment)\n-    : address_(nullptr), size_(0) {\n+    : address_(kNullAddress), size_(0) {\n   size_t page_size = AllocatePageSize();\n   size_t alloc_size = RoundUp(size, page_size);\n-  address_ =\n-      AllocatePages(hint, alloc_size, alignment, PageAllocator::kNoAccess);\n-  if (address_ != nullptr) {\n+  address_ = reinterpret_cast<Address>(\n+      AllocatePages(hint, alloc_size, alignment, PageAllocator::kNoAccess));\n+  if (address_ != kNullAddress) {\n     size_ = alloc_size;\n   }\n }\n@@ -226,31 +226,29 @@ VirtualMemory::~VirtualMemory() {\n }\n \n void VirtualMemory::Reset() {\n-  address_ = nullptr;\n+  address_ = kNullAddress;\n   size_ = 0;\n }\n \n-bool VirtualMemory::SetPermissions(void* address, size_t size,\n+bool VirtualMemory::SetPermissions(Address address, size_t size,\n                                    PageAllocator::Permission access) {\n   CHECK(InVM(address, size));\n   bool result = v8::internal::SetPermissions(address, size, access);\n   DCHECK(result);\n-  USE(result);\n   return result;\n }\n \n-size_t VirtualMemory::Release(void* free_start) {\n+size_t VirtualMemory::Release(Address free_start) {\n   DCHECK(IsReserved());\n-  DCHECK(IsAddressAligned(static_cast<Address>(free_start), CommitPageSize()));\n+  DCHECK(IsAddressAligned(free_start, CommitPageSize()));\n   // Notice: Order is important here. The VirtualMemory object might live\n   // inside the allocated region.\n-  const size_t free_size = size_ - (reinterpret_cast<size_t>(free_start) -\n-                                    reinterpret_cast<size_t>(address_));\n+  const size_t free_size = size_ - (free_start - address_);\n   CHECK(InVM(free_start, free_size));\n   DCHECK_LT(address_, free_start);\n-  DCHECK_LT(free_start, reinterpret_cast<void*>(\n-                            reinterpret_cast<size_t>(address_) + size_));\n-  CHECK(ReleasePages(address_, size_, size_ - free_size));\n+  DCHECK_LT(free_start, address_ + size_);\n+  CHECK(ReleasePages(reinterpret_cast<void*>(address_), size_,\n+                     size_ - free_size));\n   size_ -= free_size;\n   return free_size;\n }\n@@ -259,13 +257,14 @@ void VirtualMemory::Free() {\n   DCHECK(IsReserved());\n   // Notice: Order is important here. The VirtualMemory object might live\n   // inside the allocated region.\n-  void* address = address_;\n+  Address address = address_;\n   size_t size = size_;\n   CHECK(InVM(address, size));\n   Reset();\n   // FreePages expects size to be aligned to allocation granularity. Trimming\n   // may leave size at only commit granularity. Align it here.\n-  CHECK(FreePages(address, RoundUp(size, AllocatePageSize())));\n+  CHECK(FreePages(reinterpret_cast<void*>(address),\n+                  RoundUp(size, AllocatePageSize())));\n }\n \n void VirtualMemory::TakeControl(VirtualMemory* from) {"
        },
        {
            "sha": "67a510c611c866a02a08639b43129ae4000f8a18",
            "filename": "deps/v8/src/allocation.h",
            "status": "modified",
            "additions": 15,
            "deletions": 14,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fallocation.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fallocation.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fallocation.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -126,6 +126,10 @@ V8_WARN_UNUSED_RESULT bool ReleasePages(void* address, size_t size,\n V8_EXPORT_PRIVATE\n V8_WARN_UNUSED_RESULT bool SetPermissions(void* address, size_t size,\n                                           PageAllocator::Permission access);\n+inline bool SetPermissions(Address address, size_t size,\n+                           PageAllocator::Permission access) {\n+  return SetPermissions(reinterpret_cast<void*>(address), size, access);\n+}\n \n // Convenience function that allocates a single system page with read and write\n // permissions. |address| is a hint. Returns the base address of the memory and\n@@ -151,14 +155,15 @@ class V8_EXPORT_PRIVATE VirtualMemory {\n \n   // Construct a virtual memory by assigning it some already mapped address\n   // and size.\n-  VirtualMemory(void* address, size_t size) : address_(address), size_(size) {}\n+  VirtualMemory(Address address, size_t size)\n+      : address_(address), size_(size) {}\n \n   // Releases the reserved memory, if any, controlled by this VirtualMemory\n   // object.\n   ~VirtualMemory();\n \n   // Returns whether the memory has been reserved.\n-  bool IsReserved() const { return address_ != nullptr; }\n+  bool IsReserved() const { return address_ != kNullAddress; }\n \n   // Initialize or resets an embedded VirtualMemory object.\n   void Reset();\n@@ -167,15 +172,14 @@ class V8_EXPORT_PRIVATE VirtualMemory {\n   // If the memory was reserved with an alignment, this address is not\n   // necessarily aligned. The user might need to round it up to a multiple of\n   // the alignment to get the start of the aligned block.\n-  void* address() const {\n+  Address address() const {\n     DCHECK(IsReserved());\n     return address_;\n   }\n \n-  void* end() const {\n+  Address end() const {\n     DCHECK(IsReserved());\n-    return reinterpret_cast<void*>(reinterpret_cast<uintptr_t>(address_) +\n-                                   size_);\n+    return address_ + size_;\n   }\n \n   // Returns the size of the reserved memory. The returned value is only\n@@ -186,11 +190,11 @@ class V8_EXPORT_PRIVATE VirtualMemory {\n \n   // Sets permissions according to the access argument. address and size must be\n   // multiples of CommitPageSize(). Returns true on success, otherwise false.\n-  bool SetPermissions(void* address, size_t size,\n+  bool SetPermissions(Address address, size_t size,\n                       PageAllocator::Permission access);\n \n   // Releases memory after |free_start|. Returns the number of bytes released.\n-  size_t Release(void* free_start);\n+  size_t Release(Address free_start);\n \n   // Frees all memory.\n   void Free();\n@@ -199,15 +203,12 @@ class V8_EXPORT_PRIVATE VirtualMemory {\n   // The old object is no longer functional (IsReserved() returns false).\n   void TakeControl(VirtualMemory* from);\n \n-  bool InVM(void* address, size_t size) {\n-    return (reinterpret_cast<uintptr_t>(address_) <=\n-            reinterpret_cast<uintptr_t>(address)) &&\n-           ((reinterpret_cast<uintptr_t>(address_) + size_) >=\n-            (reinterpret_cast<uintptr_t>(address) + size));\n+  bool InVM(Address address, size_t size) {\n+    return (address_ <= address) && ((address_ + size_) >= (address + size));\n   }\n \n  private:\n-  void* address_;  // Start address of the virtual memory.\n+  Address address_;  // Start address of the virtual memory.\n   size_t size_;    // Size of the virtual memory.\n };\n "
        },
        {
            "sha": "503cea8dcb65abc00c7e287a9493f9c71346a8cc",
            "filename": "deps/v8/src/api-arguments-inl.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -7,6 +7,7 @@\n \n #include \"src/api-arguments.h\"\n \n+#include \"src/objects/api-callbacks.h\"\n #include \"src/tracing/trace-event.h\"\n #include \"src/vm-state-inl.h\"\n "
        },
        {
            "sha": "1b6df15d7a69d466b7e9c7c2abd75aba8f5cc448",
            "filename": "deps/v8/src/api-natives.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fapi-natives.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fapi-natives.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-natives.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -8,6 +8,9 @@\n #include \"src/isolate-inl.h\"\n #include \"src/lookup.h\"\n #include \"src/messages.h\"\n+#include \"src/objects/api-callbacks.h\"\n+#include \"src/objects/hash-table-inl.h\"\n+#include \"src/objects/templates.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "89bcb2e4fa556fbfe123b944a50f1b7173fbbeb6",
            "filename": "deps/v8/src/api.cc",
            "status": "modified",
            "additions": 256,
            "deletions": 492,
            "changes": 748,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fapi.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fapi.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -5,10 +5,7 @@\n #include \"src/api.h\"\n \n #include <string.h>  // For memcpy, strlen.\n-#ifdef V8_USE_ADDRESS_SANITIZER\n-#include <sanitizer/asan_interface.h>\n-#endif  // V8_USE_ADDRESS_SANITIZER\n-#include <cmath>  // For isnan.\n+#include <cmath>     // For isnan.\n #include <limits>\n #include <vector>\n #include \"include/v8-profiler.h\"\n@@ -49,6 +46,9 @@\n #include \"src/json-stringifier.h\"\n #include \"src/messages.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/api-callbacks.h\"\n+#include \"src/objects/ordered-hash-table-inl.h\"\n+#include \"src/objects/templates.h\"\n #include \"src/parsing/parser.h\"\n #include \"src/parsing/scanner-character-streams.h\"\n #include \"src/pending-compilation-error-handler.h\"\n@@ -79,7 +79,6 @@\n #include \"src/value-serializer.h\"\n #include \"src/version.h\"\n #include \"src/vm-state-inl.h\"\n-#include \"src/wasm/compilation-manager.h\"\n #include \"src/wasm/streaming-decoder.h\"\n #include \"src/wasm/wasm-engine.h\"\n #include \"src/wasm/wasm-objects-inl.h\"\n@@ -233,10 +232,20 @@ template <bool do_callback>\n class CallDepthScope {\n  public:\n   explicit CallDepthScope(i::Isolate* isolate, Local<Context> context)\n-      : isolate_(isolate), context_(context), escaped_(false) {\n+      : isolate_(isolate),\n+        context_(context),\n+        escaped_(false),\n+        safe_for_termination_(isolate->next_v8_call_is_safe_for_termination()),\n+        interrupts_scope_(isolate_, i::StackGuard::TERMINATE_EXECUTION,\n+                          isolate_->only_terminate_in_safe_scope()\n+                              ? (safe_for_termination_\n+                                     ? i::InterruptsScope::kRunInterrupts\n+                                     : i::InterruptsScope::kPostponeInterrupts)\n+                              : i::InterruptsScope::kNoop) {\n     // TODO(dcarney): remove this when blink stops crashing.\n     DCHECK(!isolate_->external_caught_exception());\n     isolate_->handle_scope_implementer()->IncrementCallDepth();\n+    isolate_->set_next_v8_call_is_safe_for_termination(false);\n     if (!context.IsEmpty()) {\n       i::Handle<i::Context> env = Utils::OpenHandle(*context);\n       i::HandleScopeImplementer* impl = isolate->handle_scope_implementer();\n@@ -261,6 +270,7 @@ class CallDepthScope {\n #ifdef V8_CHECK_MICROTASKS_SCOPES_CONSISTENCY\n     if (do_callback) CheckMicrotasksScopesConsistency(isolate_);\n #endif\n+    isolate_->set_next_v8_call_is_safe_for_termination(safe_for_termination_);\n   }\n \n   void Escape() {\n@@ -277,6 +287,8 @@ class CallDepthScope {\n   Local<Context> context_;\n   bool escaped_;\n   bool do_callback_;\n+  bool safe_for_termination_;\n+  i::InterruptsScope interrupts_scope_;\n };\n \n }  // namespace\n@@ -332,7 +344,9 @@ void i::V8::FatalProcessOutOfMemory(i::Isolate* isolate, const char* location,\n     memset(&heap_stats, 0xBADC0DE, sizeof(heap_stats));\n     // Note that the embedder's oom handler won't be called in this case. We\n     // just crash.\n-    FATAL(\"API fatal error handler returned after process out of memory\");\n+    FATAL(\n+        \"API fatal error handler returned after process out of memory on the \"\n+        \"background thread\");\n     UNREACHABLE();\n   }\n \n@@ -341,6 +355,10 @@ void i::V8::FatalProcessOutOfMemory(i::Isolate* isolate, const char* location,\n \n   intptr_t start_marker;\n   heap_stats.start_marker = &start_marker;\n+  size_t ro_space_size;\n+  heap_stats.ro_space_size = &ro_space_size;\n+  size_t ro_space_capacity;\n+  heap_stats.ro_space_capacity = &ro_space_capacity;\n   size_t new_space_size;\n   heap_stats.new_space_size = &new_space_size;\n   size_t new_space_capacity;\n@@ -539,14 +557,15 @@ struct SnapshotCreatorData {\n \n }  // namespace\n \n-SnapshotCreator::SnapshotCreator(const intptr_t* external_references,\n+SnapshotCreator::SnapshotCreator(Isolate* isolate,\n+                                 const intptr_t* external_references,\n                                  StartupData* existing_snapshot) {\n-  i::Isolate* internal_isolate = new i::Isolate(true);\n-  Isolate* isolate = reinterpret_cast<Isolate*>(internal_isolate);\n   SnapshotCreatorData* data = new SnapshotCreatorData(isolate);\n   data->isolate_ = isolate;\n+  i::Isolate* internal_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   internal_isolate->set_array_buffer_allocator(&data->allocator_);\n   internal_isolate->set_api_external_references(external_references);\n+  internal_isolate->enable_serializer();\n   isolate->Enter();\n   const StartupData* blob = existing_snapshot\n                                 ? existing_snapshot\n@@ -560,6 +579,11 @@ SnapshotCreator::SnapshotCreator(const intptr_t* external_references,\n   data_ = data;\n }\n \n+SnapshotCreator::SnapshotCreator(const intptr_t* external_references,\n+                                 StartupData* existing_snapshot)\n+    : SnapshotCreator(reinterpret_cast<Isolate*>(new i::Isolate()),\n+                      external_references, existing_snapshot) {}\n+\n SnapshotCreator::~SnapshotCreator() {\n   SnapshotCreatorData* data = SnapshotCreatorData::cast(data_);\n   DCHECK(data->created_);\n@@ -710,6 +734,8 @@ StartupData SnapshotCreator::CreateBlob(\n       i::GarbageCollectionReason::kSnapshotCreator);\n   isolate->heap()->CompactFixedArraysOfWeakCells();\n \n+  isolate->heap()->read_only_space()->ClearStringPaddingIfNeeded();\n+\n   i::DisallowHeapAllocation no_gc_from_here_on;\n \n   int num_contexts = num_additional_contexts + 1;\n@@ -753,7 +779,7 @@ StartupData SnapshotCreator::CreateBlob(\n       if (shared->CanFlushCompiled()) {\n         shared->FlushCompiled();\n       }\n-      DCHECK(shared->HasCodeObject() || shared->HasBuiltinId() ||\n+      DCHECK(shared->HasWasmExportedFunctionData() || shared->HasBuiltinId() ||\n              shared->IsApiFunction());\n     }\n   }\n@@ -1527,7 +1553,9 @@ i::Handle<i::AccessorInfo> MakeAccessorInfo(\n   }\n   SET_FIELD_WRAPPED(obj, set_setter, setter);\n   i::Address redirected = obj->redirected_getter();\n-  if (redirected != nullptr) SET_FIELD_WRAPPED(obj, set_js_getter, redirected);\n+  if (redirected != i::kNullAddress) {\n+    SET_FIELD_WRAPPED(obj, set_js_getter, redirected);\n+  }\n   if (data.IsEmpty()) {\n     data = v8::Undefined(reinterpret_cast<v8::Isolate*>(isolate));\n   }\n@@ -1694,13 +1722,11 @@ static i::Handle<i::FunctionTemplateInfo> EnsureConstructor(\n }\n \n template <typename Getter, typename Setter, typename Data, typename Template>\n-static void TemplateSetAccessor(Template* template_obj, v8::Local<Name> name,\n-                                Getter getter, Setter setter, Data data,\n-                                AccessControl settings,\n-                                PropertyAttribute attribute,\n-                                v8::Local<AccessorSignature> signature,\n-                                bool is_special_data_property,\n-                                bool replace_on_access) {\n+static void TemplateSetAccessor(\n+    Template* template_obj, v8::Local<Name> name, Getter getter, Setter setter,\n+    Data data, AccessControl settings, PropertyAttribute attribute,\n+    v8::Local<AccessorSignature> signature, bool is_special_data_property,\n+    bool replace_on_access, SideEffectType getter_side_effect_type) {\n   auto info = Utils::OpenHandle(template_obj);\n   auto isolate = info->GetIsolate();\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n@@ -1710,40 +1736,38 @@ static void TemplateSetAccessor(Template* template_obj, v8::Local<Name> name,\n                        is_special_data_property, replace_on_access);\n   accessor_info->set_initial_property_attributes(\n       static_cast<i::PropertyAttributes>(attribute));\n+  accessor_info->set_has_no_side_effect(getter_side_effect_type ==\n+                                        SideEffectType::kHasNoSideEffect);\n   i::ApiNatives::AddNativeDataProperty(isolate, info, accessor_info);\n }\n \n-\n-void Template::SetNativeDataProperty(v8::Local<String> name,\n-                                     AccessorGetterCallback getter,\n-                                     AccessorSetterCallback setter,\n-                                     v8::Local<Value> data,\n-                                     PropertyAttribute attribute,\n-                                     v8::Local<AccessorSignature> signature,\n-                                     AccessControl settings) {\n+void Template::SetNativeDataProperty(\n+    v8::Local<String> name, AccessorGetterCallback getter,\n+    AccessorSetterCallback setter, v8::Local<Value> data,\n+    PropertyAttribute attribute, v8::Local<AccessorSignature> signature,\n+    AccessControl settings, SideEffectType getter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter, setter, data, settings, attribute,\n-                      signature, true, false);\n+                      signature, true, false, getter_side_effect_type);\n }\n \n-\n-void Template::SetNativeDataProperty(v8::Local<Name> name,\n-                                     AccessorNameGetterCallback getter,\n-                                     AccessorNameSetterCallback setter,\n-                                     v8::Local<Value> data,\n-                                     PropertyAttribute attribute,\n-                                     v8::Local<AccessorSignature> signature,\n-                                     AccessControl settings) {\n+void Template::SetNativeDataProperty(\n+    v8::Local<Name> name, AccessorNameGetterCallback getter,\n+    AccessorNameSetterCallback setter, v8::Local<Value> data,\n+    PropertyAttribute attribute, v8::Local<AccessorSignature> signature,\n+    AccessControl settings, SideEffectType getter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter, setter, data, settings, attribute,\n-                      signature, true, false);\n+                      signature, true, false, getter_side_effect_type);\n }\n \n void Template::SetLazyDataProperty(v8::Local<Name> name,\n                                    AccessorNameGetterCallback getter,\n                                    v8::Local<Value> data,\n-                                   PropertyAttribute attribute) {\n-  TemplateSetAccessor(\n-      this, name, getter, static_cast<AccessorNameSetterCallback>(nullptr),\n-      data, DEFAULT, attribute, Local<AccessorSignature>(), true, true);\n+                                   PropertyAttribute attribute,\n+                                   SideEffectType getter_side_effect_type) {\n+  TemplateSetAccessor(this, name, getter,\n+                      static_cast<AccessorNameSetterCallback>(nullptr), data,\n+                      DEFAULT, attribute, Local<AccessorSignature>(), true,\n+                      true, getter_side_effect_type);\n }\n \n void Template::SetIntrinsicDataProperty(Local<Name> name, Intrinsic intrinsic,\n@@ -1757,26 +1781,28 @@ void Template::SetIntrinsicDataProperty(Local<Name> name, Intrinsic intrinsic,\n                                  static_cast<i::PropertyAttributes>(attribute));\n }\n \n-\n void ObjectTemplate::SetAccessor(v8::Local<String> name,\n                                  AccessorGetterCallback getter,\n                                  AccessorSetterCallback setter,\n                                  v8::Local<Value> data, AccessControl settings,\n                                  PropertyAttribute attribute,\n-                                 v8::Local<AccessorSignature> signature) {\n+                                 v8::Local<AccessorSignature> signature,\n+                                 SideEffectType getter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter, setter, data, settings, attribute,\n-                      signature, i::FLAG_disable_old_api_accessors, false);\n+                      signature, i::FLAG_disable_old_api_accessors, false,\n+                      getter_side_effect_type);\n }\n \n-\n void ObjectTemplate::SetAccessor(v8::Local<Name> name,\n                                  AccessorNameGetterCallback getter,\n                                  AccessorNameSetterCallback setter,\n                                  v8::Local<Value> data, AccessControl settings,\n                                  PropertyAttribute attribute,\n-                                 v8::Local<AccessorSignature> signature) {\n+                                 v8::Local<AccessorSignature> signature,\n+                                 SideEffectType getter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter, setter, data, settings, attribute,\n-                      signature, i::FLAG_disable_old_api_accessors, false);\n+                      signature, i::FLAG_disable_old_api_accessors, false,\n+                      getter_side_effect_type);\n }\n \n template <typename Getter, typename Setter, typename Query, typename Descriptor,\n@@ -2298,6 +2324,15 @@ Local<Value> Module::GetModuleNamespace() {\n   return ToApiHandle<Value>(module_namespace);\n }\n \n+Local<UnboundModuleScript> Module::GetUnboundModuleScript() {\n+  Utils::ApiCheck(\n+      GetStatus() < kEvaluating, \"v8::Module::GetUnboundScript\",\n+      \"v8::Module::GetUnboundScript must be used on an unevaluated module\");\n+  i::Handle<i::Module> self = Utils::OpenHandle(this);\n+  return ToApiHandle<UnboundModuleScript>(\n+      i::Handle<i::SharedFunctionInfo>(self->GetSharedFunctionInfo()));\n+}\n+\n int Module::GetIdentityHash() const { return Utils::OpenHandle(this)->hash(); }\n \n Maybe<bool> Module::InstantiateModule(Local<Context> context,\n@@ -2505,8 +2540,10 @@ MaybeLocal<Function> ScriptCompiler::CompileFunctionInContext(\n          options == CompileOptions::kNoCompileOptions);\n \n   i::Handle<i::Context> context = Utils::OpenHandle(*v8_context);\n-  i::Handle<i::SharedFunctionInfo> outer_info(context->closure()->shared(),\n-                                              isolate);\n+\n+  DCHECK(context->IsNativeContext());\n+  i::Handle<i::SharedFunctionInfo> outer_info(\n+      context->empty_function()->shared(), isolate);\n \n   i::Handle<i::JSFunction> fun;\n   i::Handle<i::FixedArray> arguments_list =\n@@ -2522,9 +2559,8 @@ MaybeLocal<Function> ScriptCompiler::CompileFunctionInContext(\n     i::Handle<i::JSReceiver> extension =\n         Utils::OpenHandle(*context_extensions[i]);\n     if (!extension->IsJSObject()) return Local<Function>();\n-    i::Handle<i::JSFunction> closure(context->closure(), isolate);\n     context = isolate->factory()->NewWithContext(\n-        closure, context,\n+        context,\n         i::ScopeInfo::CreateForWithScope(\n             isolate, context->IsNativeContext()\n                          ? i::Handle<i::ScopeInfo>::null()\n@@ -2638,6 +2674,16 @@ ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCache(\n   return i::CodeSerializer::Serialize(shared);\n }\n \n+// static\n+ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCache(\n+    Local<UnboundModuleScript> unbound_module_script) {\n+  i::Handle<i::SharedFunctionInfo> shared =\n+      i::Handle<i::SharedFunctionInfo>::cast(\n+          Utils::OpenHandle(*unbound_module_script));\n+  DCHECK(shared->is_toplevel());\n+  return i::CodeSerializer::Serialize(shared);\n+}\n+\n ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCacheForFunction(\n     Local<Function> function, Local<String> source) {\n   return CreateCodeCacheForFunction(function);\n@@ -5079,20 +5125,55 @@ Local<Function> Function::New(Isolate* v8_isolate, FunctionCallback callback,\n       .FromMaybe(Local<Function>());\n }\n \n-\n MaybeLocal<Object> Function::NewInstance(Local<Context> context, int argc,\n                                          v8::Local<v8::Value> argv[]) const {\n+  return NewInstanceWithSideEffectType(context, argc, argv,\n+                                       SideEffectType::kHasSideEffect);\n+}\n+\n+MaybeLocal<Object> Function::NewInstanceWithSideEffectType(\n+    Local<Context> context, int argc, v8::Local<v8::Value> argv[],\n+    SideEffectType side_effect_type) const {\n   auto isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n   TRACE_EVENT_CALL_STATS_SCOPED(isolate, \"v8\", \"V8.Execute\");\n   ENTER_V8(isolate, context, Function, NewInstance, MaybeLocal<Object>(),\n            InternalEscapableScope);\n   i::TimerEventScope<i::TimerEventExecute> timer_scope(isolate);\n   auto self = Utils::OpenHandle(this);\n   STATIC_ASSERT(sizeof(v8::Local<v8::Value>) == sizeof(i::Object**));\n+  bool should_set_has_no_side_effect =\n+      side_effect_type == SideEffectType::kHasNoSideEffect &&\n+      isolate->debug_execution_mode() == i::DebugInfo::kSideEffects;\n+  if (should_set_has_no_side_effect) {\n+    CHECK(self->IsJSFunction() &&\n+          i::JSFunction::cast(*self)->shared()->IsApiFunction());\n+    i::Object* obj =\n+        i::JSFunction::cast(*self)->shared()->get_api_func_data()->call_code();\n+    if (obj->IsCallHandlerInfo()) {\n+      i::CallHandlerInfo* handler_info = i::CallHandlerInfo::cast(obj);\n+      if (!handler_info->IsSideEffectFreeCallHandlerInfo()) {\n+        handler_info->SetNextCallHasNoSideEffect();\n+      }\n+    }\n+  }\n   i::Handle<i::Object>* args = reinterpret_cast<i::Handle<i::Object>*>(argv);\n   Local<Object> result;\n   has_pending_exception = !ToLocal<Object>(\n       i::Execution::New(isolate, self, self, argc, args), &result);\n+  if (should_set_has_no_side_effect) {\n+    i::Object* obj =\n+        i::JSFunction::cast(*self)->shared()->get_api_func_data()->call_code();\n+    if (obj->IsCallHandlerInfo()) {\n+      i::CallHandlerInfo* handler_info = i::CallHandlerInfo::cast(obj);\n+      if (has_pending_exception) {\n+        // Restore the map if an exception prevented restoration.\n+        handler_info->NextCallHasNoSideEffect();\n+      } else {\n+        DCHECK(handler_info->IsSideEffectCallHandlerInfo() ||\n+               handler_info->IsSideEffectFreeCallHandlerInfo());\n+      }\n+    }\n+  }\n   RETURN_ON_FAILED_EXECUTION(Object);\n   RETURN_ESCAPED(result);\n }\n@@ -5403,202 +5484,28 @@ bool String::ContainsOnlyOneByte() const {\n }\n \n \n-class Utf8LengthHelper : public i::AllStatic {\n- public:\n-  enum State {\n-    kEndsWithLeadingSurrogate = 1 << 0,\n-    kStartsWithTrailingSurrogate = 1 << 1,\n-    kLeftmostEdgeIsCalculated = 1 << 2,\n-    kRightmostEdgeIsCalculated = 1 << 3,\n-    kLeftmostEdgeIsSurrogate = 1 << 4,\n-    kRightmostEdgeIsSurrogate = 1 << 5\n-  };\n-\n-  static const uint8_t kInitialState = 0;\n-\n-  static inline bool EndsWithSurrogate(uint8_t state) {\n-    return state & kEndsWithLeadingSurrogate;\n-  }\n-\n-  static inline bool StartsWithSurrogate(uint8_t state) {\n-    return state & kStartsWithTrailingSurrogate;\n-  }\n-\n-  class Visitor {\n-   public:\n-    Visitor() : utf8_length_(0), state_(kInitialState) {}\n-\n-    void VisitOneByteString(const uint8_t* chars, int length) {\n-      int utf8_length = 0;\n-      // Add in length 1 for each non-Latin1 character.\n-      for (int i = 0; i < length; i++) {\n-        utf8_length += *chars++ >> 7;\n-      }\n-      // Add in length 1 for each character.\n-      utf8_length_ = utf8_length + length;\n-      state_ = kInitialState;\n-    }\n-\n-    void VisitTwoByteString(const uint16_t* chars, int length) {\n-      int utf8_length = 0;\n-      int last_character = unibrow::Utf16::kNoPreviousCharacter;\n-      for (int i = 0; i < length; i++) {\n-        uint16_t c = chars[i];\n-        utf8_length += unibrow::Utf8::Length(c, last_character);\n-        last_character = c;\n-      }\n-      utf8_length_ = utf8_length;\n-      uint8_t state = 0;\n-      if (unibrow::Utf16::IsTrailSurrogate(chars[0])) {\n-        state |= kStartsWithTrailingSurrogate;\n-      }\n-      if (unibrow::Utf16::IsLeadSurrogate(chars[length-1])) {\n-        state |= kEndsWithLeadingSurrogate;\n-      }\n-      state_ = state;\n-    }\n-\n-    static i::ConsString* VisitFlat(i::String* string,\n-                                    int* length,\n-                                    uint8_t* state) {\n-      Visitor visitor;\n-      i::ConsString* cons_string = i::String::VisitFlat(&visitor, string);\n-      *length = visitor.utf8_length_;\n-      *state = visitor.state_;\n-      return cons_string;\n-    }\n-\n-   private:\n-    int utf8_length_;\n-    uint8_t state_;\n-    DISALLOW_COPY_AND_ASSIGN(Visitor);\n-  };\n-\n-  static inline void MergeLeafLeft(int* length,\n-                                   uint8_t* state,\n-                                   uint8_t leaf_state) {\n-    bool edge_surrogate = StartsWithSurrogate(leaf_state);\n-    if (!(*state & kLeftmostEdgeIsCalculated)) {\n-      DCHECK(!(*state & kLeftmostEdgeIsSurrogate));\n-      *state |= kLeftmostEdgeIsCalculated\n-          | (edge_surrogate ? kLeftmostEdgeIsSurrogate : 0);\n-    } else if (EndsWithSurrogate(*state) && edge_surrogate) {\n-      *length -= unibrow::Utf8::kBytesSavedByCombiningSurrogates;\n-    }\n-    if (EndsWithSurrogate(leaf_state)) {\n-      *state |= kEndsWithLeadingSurrogate;\n-    } else {\n-      *state &= ~kEndsWithLeadingSurrogate;\n-    }\n-  }\n-\n-  static inline void MergeLeafRight(int* length,\n-                                    uint8_t* state,\n-                                    uint8_t leaf_state) {\n-    bool edge_surrogate = EndsWithSurrogate(leaf_state);\n-    if (!(*state & kRightmostEdgeIsCalculated)) {\n-      DCHECK(!(*state & kRightmostEdgeIsSurrogate));\n-      *state |= (kRightmostEdgeIsCalculated\n-                 | (edge_surrogate ? kRightmostEdgeIsSurrogate : 0));\n-    } else if (edge_surrogate && StartsWithSurrogate(*state)) {\n-      *length -= unibrow::Utf8::kBytesSavedByCombiningSurrogates;\n-    }\n-    if (StartsWithSurrogate(leaf_state)) {\n-      *state |= kStartsWithTrailingSurrogate;\n-    } else {\n-      *state &= ~kStartsWithTrailingSurrogate;\n-    }\n-  }\n-\n-  static inline void MergeTerminal(int* length,\n-                                   uint8_t state,\n-                                   uint8_t* state_out) {\n-    DCHECK((state & kLeftmostEdgeIsCalculated) &&\n-           (state & kRightmostEdgeIsCalculated));\n-    if (EndsWithSurrogate(state) && StartsWithSurrogate(state)) {\n-      *length -= unibrow::Utf8::kBytesSavedByCombiningSurrogates;\n-    }\n-    *state_out = kInitialState |\n-        (state & kLeftmostEdgeIsSurrogate ? kStartsWithTrailingSurrogate : 0) |\n-        (state & kRightmostEdgeIsSurrogate ? kEndsWithLeadingSurrogate : 0);\n-  }\n-\n-  static int Calculate(i::ConsString* current, uint8_t* state_out) {\n-    using internal::ConsString;\n-    int total_length = 0;\n-    uint8_t state = kInitialState;\n-    while (true) {\n-      i::String* left = current->first();\n-      i::String* right = current->second();\n-      uint8_t right_leaf_state;\n-      uint8_t left_leaf_state;\n-      int leaf_length;\n-      ConsString* left_as_cons =\n-          Visitor::VisitFlat(left, &leaf_length, &left_leaf_state);\n-      if (left_as_cons == nullptr) {\n-        total_length += leaf_length;\n-        MergeLeafLeft(&total_length, &state, left_leaf_state);\n-      }\n-      ConsString* right_as_cons =\n-          Visitor::VisitFlat(right, &leaf_length, &right_leaf_state);\n-      if (right_as_cons == nullptr) {\n-        total_length += leaf_length;\n-        MergeLeafRight(&total_length, &state, right_leaf_state);\n-        if (left_as_cons != nullptr) {\n-          // 1 Leaf node. Descend in place.\n-          current = left_as_cons;\n-          continue;\n-        } else {\n-          // Terminal node.\n-          MergeTerminal(&total_length, state, state_out);\n-          return total_length;\n-        }\n-      } else if (left_as_cons == nullptr) {\n-        // 1 Leaf node. Descend in place.\n-        current = right_as_cons;\n-        continue;\n-      }\n-      // Both strings are ConsStrings.\n-      // Recurse on smallest.\n-      if (left->length() < right->length()) {\n-        total_length += Calculate(left_as_cons, &left_leaf_state);\n-        MergeLeafLeft(&total_length, &state, left_leaf_state);\n-        current = right_as_cons;\n-      } else {\n-        total_length += Calculate(right_as_cons, &right_leaf_state);\n-        MergeLeafRight(&total_length, &state, right_leaf_state);\n-        current = left_as_cons;\n-      }\n-    }\n-    UNREACHABLE();\n-  }\n-\n-  static inline int Calculate(i::ConsString* current) {\n-    uint8_t state = kInitialState;\n-    return Calculate(current, &state);\n-  }\n-\n- private:\n-  DISALLOW_IMPLICIT_CONSTRUCTORS(Utf8LengthHelper);\n-};\n-\n-\n-static int Utf8Length(i::String* str, i::Isolate* isolate) {\n-  int length = str->length();\n-  if (length == 0) return 0;\n-  uint8_t state;\n-  i::ConsString* cons_string =\n-      Utf8LengthHelper::Visitor::VisitFlat(str, &length, &state);\n-  if (cons_string == nullptr) return length;\n-  return Utf8LengthHelper::Calculate(cons_string);\n-}\n-\n-\n int String::Utf8Length() const {\n   i::Handle<i::String> str = Utils::OpenHandle(this);\n   str = i::String::Flatten(str);\n-  i::Isolate* isolate = str->GetIsolate();\n-  return v8::Utf8Length(*str, isolate);\n+  int length = str->length();\n+  if (length == 0) return 0;\n+  i::DisallowHeapAllocation no_gc;\n+  i::String::FlatContent flat = str->GetFlatContent();\n+  DCHECK(flat.IsFlat());\n+  int utf8_length = 0;\n+  if (flat.IsOneByte()) {\n+    for (uint8_t c : flat.ToOneByteVector()) {\n+      utf8_length += c >> 7;\n+    }\n+    utf8_length += length;\n+  } else {\n+    int last_character = unibrow::Utf16::kNoPreviousCharacter;\n+    for (uint16_t c : flat.ToUC16Vector()) {\n+      utf8_length += unibrow::Utf8::Length(c, last_character);\n+      last_character = c;\n+    }\n+  }\n+  return utf8_length;\n }\n \n \n@@ -5823,7 +5730,7 @@ int String::WriteUtf8(char* buffer,\n     if (success) return writer.CompleteWrite(write_null, nchars_ref);\n   } else if (capacity >= string_length) {\n     // First check that the buffer is large enough.\n-    int utf8_bytes = v8::Utf8Length(*str, isolate);\n+    int utf8_bytes = Utf8Length();\n     if (utf8_bytes <= capacity) {\n       // one-byte fast path.\n       if (utf8_bytes == string_length) {\n@@ -5843,8 +5750,6 @@ int String::WriteUtf8(char* buffer,\n       return WriteUtf8(buffer, -1, nchars_ref, options);\n     }\n   }\n-  // Recursive slow path can potentially be unreasonable slow. Flatten.\n-  str = i::String::Flatten(str);\n   Utf8WriterVisitor writer(buffer, capacity, false, replace_invalid_utf8);\n   i::String::VisitFlat(&writer, *str);\n   return writer.CompleteWrite(write_null, nchars_ref);\n@@ -6083,7 +5988,7 @@ static void* ExternalValue(i::Object* obj) {\n     return nullptr;\n   }\n   i::Object* foreign = i::JSObject::cast(obj)->GetEmbedderField(0);\n-  return i::Foreign::cast(foreign)->foreign_address();\n+  return reinterpret_cast<void*>(i::Foreign::cast(foreign)->foreign_address());\n }\n \n \n@@ -6120,7 +6025,7 @@ bool V8::TryHandleSignal(int signum, void* info, void* context) {\n #endif\n \n bool V8::RegisterDefaultSignalHandler() {\n-  return v8::internal::trap_handler::RegisterDefaultSignalHandler();\n+  return v8::internal::trap_handler::RegisterDefaultTrapHandler();\n }\n \n bool V8::EnableWebAssemblyTrapHandler(bool use_v8_signal_handler) {\n@@ -6173,7 +6078,9 @@ HeapObjectStatistics::HeapObjectStatistics()\n       object_size_(0) {}\n \n HeapCodeStatistics::HeapCodeStatistics()\n-    : code_and_metadata_size_(0), bytecode_and_metadata_size_(0) {}\n+    : code_and_metadata_size_(0),\n+      bytecode_and_metadata_size_(0),\n+      external_script_source_size_(0) {}\n \n bool v8::V8::InitializeICU(const char* icu_data_file) {\n   return i::InitializeICU(icu_data_file);\n@@ -6867,8 +6774,9 @@ bool v8::String::CanMakeExternal() {\n   if (obj->IsExternalString()) return false;\n \n   // Old space strings should be externalized.\n-  i::Isolate* isolate = obj->GetIsolate();\n-  return !isolate->heap()->new_space()->Contains(*obj);\n+  i::Heap* heap = obj->GetIsolate()->heap();\n+  return !heap->new_space()->Contains(*obj) &&\n+         !heap->read_only_space()->Contains(*obj);\n }\n \n \n@@ -7509,9 +7417,7 @@ MaybeLocal<Proxy> Proxy::New(Local<Context> context, Local<Object> local_target,\n Local<String> WasmCompiledModule::GetWasmWireBytes() {\n   i::Handle<i::WasmModuleObject> obj =\n       i::Handle<i::WasmModuleObject>::cast(Utils::OpenHandle(this));\n-  i::Handle<i::WasmCompiledModule> compiled_part =\n-      i::handle(obj->compiled_module());\n-  i::Handle<i::String> wire_bytes(compiled_part->shared()->module_bytes());\n+  i::Handle<i::String> wire_bytes(obj->shared()->module_bytes());\n   return Local<String>::Cast(Utils::ToLocal(wire_bytes));\n }\n \n@@ -7550,25 +7456,30 @@ WasmCompiledModule::SerializedModule WasmCompiledModule::Serialize() {\n       i::Handle<i::WasmModuleObject>::cast(Utils::OpenHandle(this));\n   i::Handle<i::WasmCompiledModule> compiled_part =\n       i::handle(i::WasmCompiledModule::cast(obj->compiled_module()));\n-  return i::wasm::SerializeNativeModule(obj->GetIsolate(), compiled_part);\n+  size_t buffer_size =\n+      i::wasm::GetSerializedNativeModuleSize(obj->GetIsolate(), compiled_part);\n+  std::unique_ptr<uint8_t[]> buffer(new uint8_t[buffer_size]);\n+  if (i::wasm::SerializeNativeModule(obj->GetIsolate(), compiled_part,\n+                                     {buffer.get(), buffer_size}))\n+    return {std::move(buffer), buffer_size};\n+  return {};\n }\n \n MaybeLocal<WasmCompiledModule> WasmCompiledModule::Deserialize(\n     Isolate* isolate,\n     const WasmCompiledModule::CallerOwnedBuffer& serialized_module,\n     const WasmCompiledModule::CallerOwnedBuffer& wire_bytes) {\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n-  i::MaybeHandle<i::WasmCompiledModule> maybe_compiled_module =\n+  i::MaybeHandle<i::WasmModuleObject> maybe_module_object =\n       i::wasm::DeserializeNativeModule(\n           i_isolate, {serialized_module.first, serialized_module.second},\n           {wire_bytes.first, wire_bytes.second});\n-  i::Handle<i::WasmCompiledModule> compiled_module;\n-  if (!maybe_compiled_module.ToHandle(&compiled_module)) {\n+  i::Handle<i::WasmModuleObject> module_object;\n+  if (!maybe_module_object.ToHandle(&module_object)) {\n     return MaybeLocal<WasmCompiledModule>();\n   }\n   return Local<WasmCompiledModule>::Cast(\n-      Utils::ToLocal(i::Handle<i::JSObject>::cast(\n-          i::WasmModuleObject::New(i_isolate, compiled_module))));\n+      Utils::ToLocal(i::Handle<i::JSObject>::cast(module_object)));\n }\n \n MaybeLocal<WasmCompiledModule> WasmCompiledModule::DeserializeOrCompile(\n@@ -7607,15 +7518,10 @@ WasmModuleObjectBuilderStreaming::WasmModuleObjectBuilderStreaming(\n   Local<Promise::Resolver> resolver = maybe_resolver.ToLocalChecked();\n   promise_.Reset(isolate, resolver->GetPromise());\n \n-  if (i::FLAG_wasm_stream_compilation) {\n-    i::Handle<i::JSPromise> promise = Utils::OpenHandle(*GetPromise());\n-    i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n-    streaming_decoder_ =\n-        i_isolate->wasm_engine()\n-            ->compilation_manager()\n-            ->StartStreamingCompilation(i_isolate, handle(i_isolate->context()),\n-                                        promise);\n-  }\n+  i::Handle<i::JSPromise> promise = Utils::OpenHandle(*GetPromise());\n+  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n+  streaming_decoder_ = i_isolate->wasm_engine()->StartStreamingCompilation(\n+      i_isolate, handle(i_isolate->context()), promise);\n }\n \n Local<Promise> WasmModuleObjectBuilderStreaming::GetPromise() {\n@@ -7624,46 +7530,19 @@ Local<Promise> WasmModuleObjectBuilderStreaming::GetPromise() {\n \n void WasmModuleObjectBuilderStreaming::OnBytesReceived(const uint8_t* bytes,\n                                                        size_t size) {\n-  if (i::FLAG_wasm_stream_compilation) {\n-    streaming_decoder_->OnBytesReceived(i::Vector<const uint8_t>(bytes, size));\n-    return;\n-  }\n-  std::unique_ptr<uint8_t[]> cloned_bytes(new uint8_t[size]);\n-  memcpy(cloned_bytes.get(), bytes, size);\n-  received_buffers_.push_back(\n-      Buffer(std::unique_ptr<const uint8_t[]>(\n-                 const_cast<const uint8_t*>(cloned_bytes.release())),\n-             size));\n-  total_size_ += size;\n+  streaming_decoder_->OnBytesReceived(i::Vector<const uint8_t>(bytes, size));\n }\n \n void WasmModuleObjectBuilderStreaming::Finish() {\n-  if (i::FLAG_wasm_stream_compilation) {\n-    streaming_decoder_->Finish();\n-    return;\n-  }\n-  std::unique_ptr<uint8_t[]> wire_bytes(new uint8_t[total_size_]);\n-  uint8_t* insert_at = wire_bytes.get();\n-\n-  for (size_t i = 0; i < received_buffers_.size(); ++i) {\n-    const Buffer& buff = received_buffers_[i];\n-    memcpy(insert_at, buff.first.get(), buff.second);\n-    insert_at += buff.second;\n-  }\n-  // AsyncCompile makes its own copy of the wire bytes. This inefficiency\n-  // will be resolved when we move to true streaming compilation.\n-  auto i_isolate = reinterpret_cast<i::Isolate*>(isolate_);\n-  i_isolate->wasm_engine()->AsyncCompile(\n-      i_isolate, Utils::OpenHandle(*promise_.Get(isolate_)),\n-      {wire_bytes.get(), wire_bytes.get() + total_size_}, false);\n+  streaming_decoder_->Finish();\n }\n \n void WasmModuleObjectBuilderStreaming::Abort(MaybeLocal<Value> exception) {\n   Local<Promise> promise = GetPromise();\n   // The promise has already been resolved, e.g. because of a compilation\n   // error.\n   if (promise->State() != v8::Promise::kPending) return;\n-  if (i::FLAG_wasm_stream_compilation) streaming_decoder_->Abort();\n+  streaming_decoder_->Abort();\n \n   // If no exception value is provided, we do not reject the promise. This can\n   // happen when streaming compilation gets aborted when no script execution is\n@@ -8121,49 +8000,6 @@ Local<BigInt> v8::BigInt::New(Isolate* isolate, int64_t value) {\n   return Utils::ToLocal(result);\n }\n \n-Local<BigInt> v8::BigInt::NewFromUnsigned(Isolate* isolate, uint64_t value) {\n-  CHECK(i::FLAG_harmony_bigint);\n-  i::Isolate* internal_isolate = reinterpret_cast<i::Isolate*>(isolate);\n-  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(internal_isolate);\n-  i::Handle<i::BigInt> result = i::BigInt::FromUint64(internal_isolate, value);\n-  return Utils::ToLocal(result);\n-}\n-\n-MaybeLocal<BigInt> v8::BigInt::NewFromWords(Local<Context> context,\n-                                            int sign_bit, int word_count,\n-                                            const uint64_t* words) {\n-  CHECK(i::FLAG_harmony_bigint);\n-  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n-  ENTER_V8_NO_SCRIPT(isolate, context, BigInt, NewFromWords,\n-                     MaybeLocal<BigInt>(), InternalEscapableScope);\n-  i::MaybeHandle<i::BigInt> result =\n-      i::BigInt::FromWords64(isolate, sign_bit, word_count, words);\n-  has_pending_exception = result.is_null();\n-  RETURN_ON_FAILED_EXECUTION(BigInt);\n-  RETURN_ESCAPED(Utils::ToLocal(result.ToHandleChecked()));\n-}\n-\n-uint64_t v8::BigInt::Uint64Value(bool* lossless) const {\n-  i::Handle<i::BigInt> handle = Utils::OpenHandle(this);\n-  return handle->AsUint64(lossless);\n-}\n-\n-int64_t v8::BigInt::Int64Value(bool* lossless) const {\n-  i::Handle<i::BigInt> handle = Utils::OpenHandle(this);\n-  return handle->AsInt64(lossless);\n-}\n-\n-int BigInt::WordCount() const {\n-  i::Handle<i::BigInt> handle = Utils::OpenHandle(this);\n-  return handle->Words64Count();\n-}\n-\n-void BigInt::ToWordsArray(int* sign_bit, int* word_count,\n-                          uint64_t* words) const {\n-  i::Handle<i::BigInt> handle = Utils::OpenHandle(this);\n-  return handle->ToWordsArray64(sign_bit, word_count, words);\n-}\n-\n void Isolate::ReportExternalAllocationLimitReached() {\n   i::Heap* heap = reinterpret_cast<i::Isolate*>(this)->heap();\n   if (heap->gc_state() != i::Heap::NOT_IN_GC) return;\n@@ -8185,7 +8021,7 @@ HeapProfiler* Isolate::GetHeapProfiler() {\n \n CpuProfiler* Isolate::GetCpuProfiler() {\n   i::CpuProfiler* cpu_profiler =\n-      reinterpret_cast<i::Isolate*>(this)->cpu_profiler();\n+      reinterpret_cast<i::Isolate*>(this)->EnsureCpuProfiler();\n   return reinterpret_cast<CpuProfiler*>(cpu_profiler);\n }\n \n@@ -8363,22 +8199,22 @@ Isolate* Isolate::GetCurrent() {\n   return reinterpret_cast<Isolate*>(isolate);\n }\n \n-\n-Isolate* Isolate::New(const Isolate::CreateParams& params) {\n-  i::Isolate* isolate = new i::Isolate(false);\n-  return IsolateNewImpl(isolate, params);\n+// static\n+Isolate* Isolate::Allocate() {\n+  return reinterpret_cast<Isolate*>(new i::Isolate());\n }\n \n+// static\n // This is separate so that tests can provide a different |isolate|.\n-Isolate* IsolateNewImpl(internal::Isolate* isolate,\n-                        const v8::Isolate::CreateParams& params) {\n-  Isolate* v8_isolate = reinterpret_cast<Isolate*>(isolate);\n+void Isolate::Initialize(Isolate* isolate,\n+                         const v8::Isolate::CreateParams& params) {\n+  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   CHECK_NOT_NULL(params.array_buffer_allocator);\n-  isolate->set_array_buffer_allocator(params.array_buffer_allocator);\n+  i_isolate->set_array_buffer_allocator(params.array_buffer_allocator);\n   if (params.snapshot_blob != nullptr) {\n-    isolate->set_snapshot_blob(params.snapshot_blob);\n+    i_isolate->set_snapshot_blob(params.snapshot_blob);\n   } else {\n-    isolate->set_snapshot_blob(i::Snapshot::DefaultSnapshotBlob());\n+    i_isolate->set_snapshot_blob(i::Snapshot::DefaultSnapshotBlob());\n   }\n   if (params.entry_hook) {\n #ifdef V8_USE_SNAPSHOT\n@@ -8387,7 +8223,7 @@ Isolate* IsolateNewImpl(internal::Isolate* isolate,\n         false, \"v8::Isolate::New\",\n         \"Setting a FunctionEntryHook is only supported in no-snapshot builds.\");\n #endif\n-    isolate->set_function_entry_hook(params.entry_hook);\n+    i_isolate->set_function_entry_hook(params.entry_hook);\n   }\n   auto code_event_handler = params.code_event_handler;\n #ifdef ENABLE_GDB_JIT_INTERFACE\n@@ -8396,44 +8232,50 @@ Isolate* IsolateNewImpl(internal::Isolate* isolate,\n   }\n #endif  // ENABLE_GDB_JIT_INTERFACE\n   if (code_event_handler) {\n-    isolate->InitializeLoggingAndCounters();\n-    isolate->logger()->SetCodeEventHandler(kJitCodeEventDefault,\n-                                           code_event_handler);\n+    i_isolate->InitializeLoggingAndCounters();\n+    i_isolate->logger()->SetCodeEventHandler(kJitCodeEventDefault,\n+                                             code_event_handler);\n   }\n   if (params.counter_lookup_callback) {\n-    v8_isolate->SetCounterFunction(params.counter_lookup_callback);\n+    isolate->SetCounterFunction(params.counter_lookup_callback);\n   }\n \n   if (params.create_histogram_callback) {\n-    v8_isolate->SetCreateHistogramFunction(params.create_histogram_callback);\n+    isolate->SetCreateHistogramFunction(params.create_histogram_callback);\n   }\n \n   if (params.add_histogram_sample_callback) {\n-    v8_isolate->SetAddHistogramSampleFunction(\n+    isolate->SetAddHistogramSampleFunction(\n         params.add_histogram_sample_callback);\n   }\n \n-  isolate->set_api_external_references(params.external_references);\n-  isolate->set_allow_atomics_wait(params.allow_atomics_wait);\n+  i_isolate->set_api_external_references(params.external_references);\n+  i_isolate->set_allow_atomics_wait(params.allow_atomics_wait);\n \n-  SetResourceConstraints(isolate, params.constraints);\n+  SetResourceConstraints(i_isolate, params.constraints);\n   // TODO(jochen): Once we got rid of Isolate::Current(), we can remove this.\n-  Isolate::Scope isolate_scope(v8_isolate);\n-  if (params.entry_hook || !i::Snapshot::Initialize(isolate)) {\n+  Isolate::Scope isolate_scope(isolate);\n+  if (params.entry_hook || !i::Snapshot::Initialize(i_isolate)) {\n     // If snapshot data was provided and we failed to deserialize it must\n     // have been corrupted.\n-    CHECK_NULL(isolate->snapshot_blob());\n+    CHECK_NULL(i_isolate->snapshot_blob());\n     base::ElapsedTimer timer;\n     if (i::FLAG_profile_deserialization) timer.Start();\n-    isolate->Init(nullptr);\n+    i_isolate->Init(nullptr);\n     if (i::FLAG_profile_deserialization) {\n       double ms = timer.Elapsed().InMillisecondsF();\n       i::PrintF(\"[Initializing isolate from scratch took %0.3f ms]\\n\", ms);\n     }\n   }\n-  return v8_isolate;\n+  i_isolate->set_only_terminate_in_safe_scope(\n+      params.only_terminate_in_safe_scope);\n }\n \n+Isolate* Isolate::New(const Isolate::CreateParams& params) {\n+  Isolate* isolate = Allocate();\n+  Initialize(isolate, params);\n+  return isolate;\n+}\n \n void Isolate::Dispose() {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n@@ -8540,6 +8382,16 @@ Isolate::SuppressMicrotaskExecutionScope::~SuppressMicrotaskExecutionScope() {\n   isolate_->handle_scope_implementer()->DecrementCallDepth();\n }\n \n+Isolate::SafeForTerminationScope::SafeForTerminationScope(v8::Isolate* isolate)\n+    : isolate_(reinterpret_cast<i::Isolate*>(isolate)),\n+      prev_value_(isolate_->next_v8_call_is_safe_for_termination()) {\n+  isolate_->set_next_v8_call_is_safe_for_termination(true);\n+}\n+\n+Isolate::SafeForTerminationScope::~SafeForTerminationScope() {\n+  isolate_->set_next_v8_call_is_safe_for_termination(prev_value_);\n+}\n+\n i::Object** Isolate::GetDataFromSnapshotOnce(size_t index) {\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(this);\n   i::FixedArray* list = i_isolate->heap()->serialized_objects();\n@@ -8635,6 +8487,8 @@ bool Isolate::GetHeapCodeAndMetadataStatistics(\n   code_statistics->code_and_metadata_size_ = isolate->code_and_metadata_size();\n   code_statistics->bytecode_and_metadata_size_ =\n       isolate->bytecode_and_metadata_size();\n+  code_statistics->external_script_source_size_ =\n+      isolate->external_script_source_size();\n   return true;\n }\n \n@@ -8835,7 +8689,7 @@ int Isolate::ContextDisposedNotification(bool dependant_context) {\n   if (!dependant_context) {\n     // We left the current context, we can abort all running WebAssembly\n     // compilations.\n-    isolate->wasm_engine()->compilation_manager()->AbortAllJobs();\n+    isolate->wasm_engine()->AbortAllCompileJobs();\n   }\n   // TODO(ahaas): move other non-heap activity out of the heap call.\n   return isolate->heap()->NotifyContextDisposed(dependant_context);\n@@ -8898,7 +8752,8 @@ void Isolate::SetStackLimit(uintptr_t stack_limit) {\n void Isolate::GetCodeRange(void** start, size_t* length_in_bytes) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n   if (isolate->heap()->memory_allocator()->code_range()->valid()) {\n-    *start = isolate->heap()->memory_allocator()->code_range()->start();\n+    *start = reinterpret_cast<void*>(\n+        isolate->heap()->memory_allocator()->code_range()->start());\n     *length_in_bytes =\n         isolate->heap()->memory_allocator()->code_range()->size();\n   } else {\n@@ -9095,8 +8950,7 @@ String::Utf8Value::Utf8Value(v8::Isolate* isolate, v8::Local<v8::Value> obj)\n   TryCatch try_catch(isolate);\n   Local<String> str;\n   if (!obj->ToString(context).ToLocal(&str)) return;\n-  i::Handle<i::String> i_str = Utils::OpenHandle(*str);\n-  length_ = v8::Utf8Length(*i_str, i_isolate);\n+  length_ = str->Utf8Length();\n   str_ = i::NewArray<char>(length_ + 1);\n   str->WriteUtf8(str_);\n }\n@@ -9413,7 +9267,7 @@ bool debug::Script::GetPossibleBreakpoints(\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   if (script->type() == i::Script::TYPE_WASM) {\n     i::WasmSharedModuleData* shared =\n-        i::WasmCompiledModule::cast(script->wasm_compiled_module())->shared();\n+        i::WasmModuleObject::cast(script->wasm_module_object())->shared();\n     return shared->GetPossibleBreakpoints(start, end, locations);\n   }\n \n@@ -9462,7 +9316,7 @@ bool debug::Script::GetPossibleBreakpoints(\n int debug::Script::GetSourceOffset(const debug::Location& location) const {\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   if (script->type() == i::Script::TYPE_WASM) {\n-    return i::WasmCompiledModule::cast(script->wasm_compiled_module())\n+    return i::WasmModuleObject::cast(script->wasm_module_object())\n                ->shared()\n                ->GetFunctionOffset(location.GetLineNumber()) +\n            location.GetColumnNumber();\n@@ -9522,6 +9376,10 @@ void debug::RemoveBreakpoint(Isolate* v8_isolate, BreakpointId id) {\n   isolate->debug()->RemoveBreakpoint(id);\n }\n \n+v8::Platform* debug::GetCurrentPlatform() {\n+  return i::V8::GetCurrentPlatform();\n+}\n+\n debug::WasmScript* debug::WasmScript::Cast(debug::Script* script) {\n   CHECK(script->IsWasm());\n   return static_cast<WasmScript*>(script);\n@@ -9531,9 +9389,9 @@ int debug::WasmScript::NumFunctions() const {\n   i::DisallowHeapAllocation no_gc;\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   DCHECK_EQ(i::Script::TYPE_WASM, script->type());\n-  i::WasmCompiledModule* compiled_module =\n-      i::WasmCompiledModule::cast(script->wasm_compiled_module());\n-  i::wasm::WasmModule* module = compiled_module->shared()->module();\n+  i::WasmModuleObject* module_object =\n+      i::WasmModuleObject::cast(script->wasm_module_object());\n+  i::wasm::WasmModule* module = module_object->shared()->module();\n   DCHECK_GE(i::kMaxInt, module->functions.size());\n   return static_cast<int>(module->functions.size());\n }\n@@ -9542,9 +9400,9 @@ int debug::WasmScript::NumImportedFunctions() const {\n   i::DisallowHeapAllocation no_gc;\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   DCHECK_EQ(i::Script::TYPE_WASM, script->type());\n-  i::WasmCompiledModule* compiled_module =\n-      i::WasmCompiledModule::cast(script->wasm_compiled_module());\n-  i::wasm::WasmModule* module = compiled_module->shared()->module();\n+  i::WasmModuleObject* module_object =\n+      i::WasmModuleObject::cast(script->wasm_module_object());\n+  i::wasm::WasmModule* module = module_object->shared()->module();\n   DCHECK_GE(i::kMaxInt, module->num_imported_functions);\n   return static_cast<int>(module->num_imported_functions);\n }\n@@ -9554,9 +9412,9 @@ std::pair<int, int> debug::WasmScript::GetFunctionRange(\n   i::DisallowHeapAllocation no_gc;\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   DCHECK_EQ(i::Script::TYPE_WASM, script->type());\n-  i::WasmCompiledModule* compiled_module =\n-      i::WasmCompiledModule::cast(script->wasm_compiled_module());\n-  i::wasm::WasmModule* module = compiled_module->shared()->module();\n+  i::WasmModuleObject* module_object =\n+      i::WasmModuleObject::cast(script->wasm_module_object());\n+  i::wasm::WasmModule* module = module_object->shared()->module();\n   DCHECK_LE(0, function_index);\n   DCHECK_GT(module->functions.size(), function_index);\n   i::wasm::WasmFunction& func = module->functions[function_index];\n@@ -9570,13 +9428,13 @@ uint32_t debug::WasmScript::GetFunctionHash(int function_index) {\n   i::DisallowHeapAllocation no_gc;\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   DCHECK_EQ(i::Script::TYPE_WASM, script->type());\n-  i::WasmCompiledModule* compiled_module =\n-      i::WasmCompiledModule::cast(script->wasm_compiled_module());\n-  i::wasm::WasmModule* module = compiled_module->shared()->module();\n+  i::WasmModuleObject* module_object =\n+      i::WasmModuleObject::cast(script->wasm_module_object());\n+  i::wasm::WasmModule* module = module_object->shared()->module();\n   DCHECK_LE(0, function_index);\n   DCHECK_GT(module->functions.size(), function_index);\n   i::wasm::WasmFunction& func = module->functions[function_index];\n-  i::SeqOneByteString* module_bytes = compiled_module->shared()->module_bytes();\n+  i::SeqOneByteString* module_bytes = module_object->shared()->module_bytes();\n   i::wasm::ModuleWireBytes wire_bytes(\n       module_bytes->GetFlatContent().ToOneByteVector());\n   i::Vector<const i::byte> function_bytes = wire_bytes.GetFunctionBytes(&func);\n@@ -9590,9 +9448,9 @@ debug::WasmDisassembly debug::WasmScript::DisassembleFunction(\n   i::DisallowHeapAllocation no_gc;\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   DCHECK_EQ(i::Script::TYPE_WASM, script->type());\n-  i::WasmCompiledModule* compiled_module =\n-      i::WasmCompiledModule::cast(script->wasm_compiled_module());\n-  return compiled_module->shared()->DisassembleFunction(function_index);\n+  i::WasmModuleObject* module_object =\n+      i::WasmModuleObject::cast(script->wasm_module_object());\n+  return module_object->shared()->DisassembleFunction(function_index);\n }\n \n debug::Location::Location(int line_number, int column_number)\n@@ -9951,15 +9809,7 @@ Local<String> CpuProfileNode::GetFunctionName() const {\n   const i::CodeEntry* entry = node->entry();\n   i::Handle<i::String> name =\n       isolate->factory()->InternalizeUtf8String(entry->name());\n-  if (!entry->has_name_prefix()) {\n-    return ToApiHandle<String>(name);\n-  } else {\n-    // We do not expect this to fail. Change this if it does.\n-    i::Handle<i::String> cons = isolate->factory()->NewConsString(\n-        isolate->factory()->InternalizeUtf8String(entry->name_prefix()),\n-        name).ToHandleChecked();\n-    return ToApiHandle<String>(cons);\n-  }\n+  return ToApiHandle<String>(name);\n }\n \n int debug::Coverage::BlockData::StartOffset() const { return block_->start; }\n@@ -10254,74 +10104,6 @@ void CpuProfiler::SetIdle(bool is_idle) {\n   isolate->SetIdle(is_idle);\n }\n \n-uintptr_t CodeEvent::GetCodeStartAddress() {\n-  return reinterpret_cast<i::CodeEvent*>(this)->code_start_address;\n-}\n-\n-size_t CodeEvent::GetCodeSize() {\n-  return reinterpret_cast<i::CodeEvent*>(this)->code_size;\n-}\n-\n-Local<String> CodeEvent::GetFunctionName() {\n-  return ToApiHandle<String>(\n-      reinterpret_cast<i::CodeEvent*>(this)->function_name);\n-}\n-\n-Local<String> CodeEvent::GetScriptName() {\n-  return ToApiHandle<String>(\n-      reinterpret_cast<i::CodeEvent*>(this)->script_name);\n-}\n-\n-int CodeEvent::GetScriptLine() {\n-  return reinterpret_cast<i::CodeEvent*>(this)->script_line;\n-}\n-\n-int CodeEvent::GetScriptColumn() {\n-  return reinterpret_cast<i::CodeEvent*>(this)->script_column;\n-}\n-\n-CodeEventType CodeEvent::GetCodeType() {\n-  return reinterpret_cast<i::CodeEvent*>(this)->code_type;\n-}\n-\n-const char* CodeEvent::GetComment() {\n-  return reinterpret_cast<i::CodeEvent*>(this)->comment;\n-}\n-\n-const char* CodeEvent::GetCodeEventTypeName(CodeEventType code_event_type) {\n-  switch (code_event_type) {\n-    case kUnknownType:\n-      return \"Unknown\";\n-#define V(Name)       \\\n-  case k##Name##Type: \\\n-    return #Name;\n-      CODE_EVENTS_LIST(V)\n-#undef V\n-  }\n-  // The execution should never pass here\n-  UNREACHABLE();\n-  // NOTE(mmarchini): Workaround to fix a compiler failure on GCC 4.9\n-  return \"Unknown\";\n-}\n-\n-CodeEventHandler::CodeEventHandler(Isolate* isolate) {\n-  internal_listener_ =\n-      new i::ExternalCodeEventListener(reinterpret_cast<i::Isolate*>(isolate));\n-}\n-\n-CodeEventHandler::~CodeEventHandler() {\n-  delete reinterpret_cast<i::ExternalCodeEventListener*>(internal_listener_);\n-}\n-\n-void CodeEventHandler::Enable() {\n-  reinterpret_cast<i::ExternalCodeEventListener*>(internal_listener_)\n-      ->StartListening(this);\n-}\n-\n-void CodeEventHandler::Disable() {\n-  reinterpret_cast<i::ExternalCodeEventListener*>(internal_listener_)\n-      ->StopListening();\n-}\n \n static i::HeapGraphEdge* ToInternal(const HeapGraphEdge* edge) {\n   return const_cast<i::HeapGraphEdge*>(\n@@ -10558,25 +10340,9 @@ void HeapProfiler::SetGetRetainerInfosCallback(\n }\n \n void HeapProfiler::SetBuildEmbedderGraphCallback(\n-    LegacyBuildEmbedderGraphCallback callback) {\n-  reinterpret_cast<i::HeapProfiler*>(this)->AddBuildEmbedderGraphCallback(\n-      [](v8::Isolate* isolate, v8::EmbedderGraph* graph, void* data) {\n-        reinterpret_cast<LegacyBuildEmbedderGraphCallback>(data)(isolate,\n-                                                                 graph);\n-      },\n-      reinterpret_cast<void*>(callback));\n-}\n-\n-void HeapProfiler::AddBuildEmbedderGraphCallback(\n-    BuildEmbedderGraphCallback callback, void* data) {\n-  reinterpret_cast<i::HeapProfiler*>(this)->AddBuildEmbedderGraphCallback(\n-      callback, data);\n-}\n-\n-void HeapProfiler::RemoveBuildEmbedderGraphCallback(\n-    BuildEmbedderGraphCallback callback, void* data) {\n-  reinterpret_cast<i::HeapProfiler*>(this)->RemoveBuildEmbedderGraphCallback(\n-      callback, data);\n+    BuildEmbedderGraphCallback callback) {\n+  reinterpret_cast<i::HeapProfiler*>(this)->SetBuildEmbedderGraphCallback(\n+      callback);\n }\n \n v8::Testing::StressType internal::Testing::stress_type_ =\n@@ -10804,8 +10570,7 @@ void InvokeAccessorGetterCallback(\n   Isolate* isolate = reinterpret_cast<Isolate*>(info.GetIsolate());\n   RuntimeCallTimerScope timer(isolate,\n                               RuntimeCallCounterId::kAccessorGetterCallback);\n-  Address getter_address = reinterpret_cast<Address>(reinterpret_cast<intptr_t>(\n-      getter));\n+  Address getter_address = reinterpret_cast<Address>(getter);\n   VMState<EXTERNAL> state(isolate);\n   ExternalCallbackScope call_scope(isolate, getter_address);\n   getter(property, info);\n@@ -10817,8 +10582,7 @@ void InvokeFunctionCallback(const v8::FunctionCallbackInfo<v8::Value>& info,\n   Isolate* isolate = reinterpret_cast<Isolate*>(info.GetIsolate());\n   RuntimeCallTimerScope timer(isolate,\n                               RuntimeCallCounterId::kInvokeFunctionCallback);\n-  Address callback_address =\n-      reinterpret_cast<Address>(reinterpret_cast<intptr_t>(callback));\n+  Address callback_address = reinterpret_cast<Address>(callback);\n   VMState<EXTERNAL> state(isolate);\n   ExternalCallbackScope call_scope(isolate, callback_address);\n   callback(info);"
        },
        {
            "sha": "d1297c8f38c65a6900b2a06a14b65dfd4bf72f1f",
            "filename": "deps/v8/src/api.h",
            "status": "modified",
            "additions": 16,
            "deletions": 7,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fapi.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fapi.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -31,20 +31,32 @@ template <typename T> inline T ToCData(v8::internal::Object* obj) {\n   STATIC_ASSERT(sizeof(T) == sizeof(v8::internal::Address));\n   if (obj == v8::internal::Smi::kZero) return nullptr;\n   return reinterpret_cast<T>(\n-      reinterpret_cast<intptr_t>(\n-          v8::internal::Foreign::cast(obj)->foreign_address()));\n+      v8::internal::Foreign::cast(obj)->foreign_address());\n }\n \n+template <>\n+inline v8::internal::Address ToCData(v8::internal::Object* obj) {\n+  if (obj == v8::internal::Smi::kZero) return v8::internal::kNullAddress;\n+  return v8::internal::Foreign::cast(obj)->foreign_address();\n+}\n \n template <typename T>\n inline v8::internal::Handle<v8::internal::Object> FromCData(\n     v8::internal::Isolate* isolate, T obj) {\n   STATIC_ASSERT(sizeof(T) == sizeof(v8::internal::Address));\n   if (obj == nullptr) return handle(v8::internal::Smi::kZero, isolate);\n   return isolate->factory()->NewForeign(\n-      reinterpret_cast<v8::internal::Address>(reinterpret_cast<intptr_t>(obj)));\n+      reinterpret_cast<v8::internal::Address>(obj));\n }\n \n+template <>\n+inline v8::internal::Handle<v8::internal::Object> FromCData(\n+    v8::internal::Isolate* isolate, v8::internal::Address obj) {\n+  if (obj == v8::internal::kNullAddress) {\n+    return handle(v8::internal::Smi::kZero, isolate);\n+  }\n+  return isolate->factory()->NewForeign(obj);\n+}\n \n class ApiFunction {\n  public:\n@@ -100,6 +112,7 @@ class RegisteredExtension {\n   V(String, String)                            \\\n   V(Symbol, Symbol)                            \\\n   V(Script, JSFunction)                        \\\n+  V(UnboundModuleScript, SharedFunctionInfo)   \\\n   V(UnboundScript, SharedFunctionInfo)         \\\n   V(Module, Module)                            \\\n   V(Function, JSReceiver)                      \\\n@@ -114,7 +127,6 @@ class RegisteredExtension {\n   V(Promise, JSPromise)                        \\\n   V(Primitive, Object)                         \\\n   V(PrimitiveArray, FixedArray)                \\\n-  V(BigInt, BigInt)                            \\\n   V(ScriptOrModule, Script)\n \n class Utils {\n@@ -365,9 +377,6 @@ OPEN_HANDLE_LIST(MAKE_OPEN_HANDLE)\n #undef MAKE_OPEN_HANDLE\n #undef OPEN_HANDLE_LIST\n \n-extern Isolate* IsolateNewImpl(internal::Isolate* isolate,\n-                               const Isolate::CreateParams& params);\n-\n namespace internal {\n \n class V8_EXPORT_PRIVATE DeferredHandles {"
        },
        {
            "sha": "4c4eb00ec284cad2388aa45a0da391dd8a5f9d33",
            "filename": "deps/v8/src/arm/assembler-arm-inl.h",
            "status": "modified",
            "additions": 13,
            "deletions": 10,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -76,7 +76,7 @@ Address RelocInfo::target_address_address() {\n          IsEmbeddedObject(rmode_) || IsExternalReference(rmode_) ||\n          IsOffHeapTarget(rmode_));\n   if (Assembler::IsMovW(Memory::int32_at(pc_))) {\n-    return reinterpret_cast<Address>(pc_);\n+    return pc_;\n   } else {\n     DCHECK(Assembler::IsLdrPcImmediateOffset(Memory::int32_at(pc_)));\n     return constant_pool_entry_address();\n@@ -141,7 +141,7 @@ Address RelocInfo::target_internal_reference() {\n \n Address RelocInfo::target_internal_reference_address() {\n   DCHECK(rmode_ == INTERNAL_REFERENCE);\n-  return reinterpret_cast<Address>(pc_);\n+  return pc_;\n }\n \n void RelocInfo::set_wasm_code_table_entry(Address target,\n@@ -174,9 +174,9 @@ void RelocInfo::WipeOut() {\n          IsRuntimeEntry(rmode_) || IsExternalReference(rmode_) ||\n          IsInternalReference(rmode_));\n   if (IsInternalReference(rmode_)) {\n-    Memory::Address_at(pc_) = nullptr;\n+    Memory::Address_at(pc_) = kNullAddress;\n   } else {\n-    Assembler::set_target_address_at(pc_, constant_pool_, nullptr);\n+    Assembler::set_target_address_at(pc_, constant_pool_, kNullAddress);\n   }\n }\n \n@@ -206,7 +206,7 @@ Operand Operand::Zero() { return Operand(static_cast<int32_t>(0)); }\n \n Operand::Operand(const ExternalReference& f)\n     : rmode_(RelocInfo::EXTERNAL_REFERENCE) {\n-  value_.immediate = reinterpret_cast<int32_t>(f.address());\n+  value_.immediate = static_cast<int32_t>(f.address());\n }\n \n Operand::Operand(Smi* value) : rmode_(RelocInfo::NONE) {\n@@ -298,6 +298,10 @@ void Assembler::deserialization_set_special_target_at(\n   Memory::Address_at(constant_pool_entry) = target;\n }\n \n+int Assembler::deserialization_special_target_size(Address location) {\n+  return kSpecialTargetSize;\n+}\n+\n void Assembler::deserialization_set_target_internal_reference_at(\n     Address pc, Address target, RelocInfo::Mode mode) {\n   Memory::Address_at(pc) = target;\n@@ -327,9 +331,8 @@ Address Assembler::target_address_at(Address pc, Address constant_pool) {\n            IsMovT(Memory::int32_at(pc + kInstrSize)));\n     Instruction* movw_instr = Instruction::At(pc);\n     Instruction* movt_instr = Instruction::At(pc + kInstrSize);\n-    return reinterpret_cast<Address>(\n-        (movt_instr->ImmedMovwMovtValue() << 16) |\n-         movw_instr->ImmedMovwMovtValue());\n+    return static_cast<Address>((movt_instr->ImmedMovwMovtValue() << 16) |\n+                                movw_instr->ImmedMovwMovtValue());\n   } else {\n     // This is an mov / orr immediate load. Return the immediate.\n     DCHECK(IsMovImmed(Memory::int32_at(pc)) &&\n@@ -340,7 +343,7 @@ Address Assembler::target_address_at(Address pc, Address constant_pool) {\n     Instr orr_instr_1 = instr_at(pc + kInstrSize);\n     Instr orr_instr_2 = instr_at(pc + 2 * kInstrSize);\n     Instr orr_instr_3 = instr_at(pc + 3 * kInstrSize);\n-    Address ret = reinterpret_cast<Address>(\n+    Address ret = static_cast<Address>(\n         DecodeShiftImm(mov_instr) | DecodeShiftImm(orr_instr_1) |\n         DecodeShiftImm(orr_instr_2) | DecodeShiftImm(orr_instr_3));\n     return ret;\n@@ -367,7 +370,7 @@ void Assembler::set_target_address_at(Address pc, Address constant_pool,\n     DCHECK(IsMovW(Memory::int32_at(pc)));\n     DCHECK(IsMovT(Memory::int32_at(pc + kInstrSize)));\n     uint32_t* instr_ptr = reinterpret_cast<uint32_t*>(pc);\n-    uint32_t immediate = reinterpret_cast<uint32_t>(target);\n+    uint32_t immediate = static_cast<uint32_t>(target);\n     instr_ptr[0] = PatchMovwImmediate(instr_ptr[0], immediate & 0xFFFF);\n     instr_ptr[1] = PatchMovwImmediate(instr_ptr[1], immediate >> 16);\n     DCHECK(IsMovW(Memory::int32_at(pc)));"
        },
        {
            "sha": "da5e4663450a983e14ead3c67ba75209cb20afc7",
            "filename": "deps/v8/src/arm/assembler-arm.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -374,7 +374,7 @@ Address RelocInfo::js_to_wasm_address() const {\n \n Operand::Operand(Handle<HeapObject> handle) {\n   rm_ = no_reg;\n-  value_.immediate = reinterpret_cast<intptr_t>(handle.address());\n+  value_.immediate = static_cast<intptr_t>(handle.address());\n   rmode_ = RelocInfo::EMBEDDED_OBJECT;\n }\n \n@@ -491,7 +491,7 @@ void Assembler::AllocateAndInstallRequestedHeapObjects(Isolate* isolate) {\n         object = request.code_stub()->GetCode();\n         break;\n     }\n-    Address pc = buffer_ + request.offset();\n+    Address pc = reinterpret_cast<Address>(buffer_) + request.offset();\n     Memory::Address_at(constant_pool_entry_address(pc, 0 /* unused */)) =\n         object.address();\n   }\n@@ -5152,7 +5152,7 @@ void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data) {\n     return;\n   }\n   DCHECK_GE(buffer_space(), kMaxRelocSize);  // too late to grow buffer here\n-  RelocInfo rinfo(pc_, rmode, data, nullptr);\n+  RelocInfo rinfo(reinterpret_cast<Address>(pc_), rmode, data, nullptr);\n   reloc_info_writer.Write(&rinfo);\n }\n \n@@ -5191,7 +5191,7 @@ void Assembler::ConstantPoolAddEntry(int position, RelocInfo::Mode rmode,\n       value != 0) {\n     // Sharing entries here relies on canonicalized handles - without them, we\n     // will miss the optimisation opportunity.\n-    Address handle_address = reinterpret_cast<Address>(value);\n+    Address handle_address = static_cast<Address>(value);\n     auto existing = handle_to_index_map_.find(handle_address);\n     if (existing != handle_to_index_map_.end()) {\n       int index = existing->second;\n@@ -5476,9 +5476,7 @@ PatchingAssembler::~PatchingAssembler() {\n   DCHECK_EQ(reloc_info_writer.pos(), buffer_ + buffer_size_);\n }\n \n-void PatchingAssembler::Emit(Address addr) {\n-  emit(reinterpret_cast<Instr>(addr));\n-}\n+void PatchingAssembler::Emit(Address addr) { emit(static_cast<Instr>(addr)); }\n \n UseScratchRegisterScope::UseScratchRegisterScope(Assembler* assembler)\n     : assembler_(assembler),"
        },
        {
            "sha": "4a424ccea22ee719d35c44948aa8f88488748c82",
            "filename": "deps/v8/src/arm/assembler-arm.h",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -689,6 +689,9 @@ class Assembler : public AssemblerBase {\n   inline static void deserialization_set_special_target_at(\n       Address constant_pool_entry, Code* code, Address target);\n \n+  // Get the size of the special target encoded at 'location'.\n+  inline static int deserialization_special_target_size(Address location);\n+\n   // This sets the internal reference at the pc.\n   inline static void deserialization_set_target_internal_reference_at(\n       Address pc, Address target,\n@@ -1496,8 +1499,8 @@ class Assembler : public AssemblerBase {\n   void instr_at_put(int pos, Instr instr) {\n     *reinterpret_cast<Instr*>(buffer_ + pos) = instr;\n   }\n-  static Instr instr_at(byte* pc) { return *reinterpret_cast<Instr*>(pc); }\n-  static void instr_at_put(byte* pc, Instr instr) {\n+  static Instr instr_at(Address pc) { return *reinterpret_cast<Instr*>(pc); }\n+  static void instr_at_put(Address pc, Instr instr) {\n     *reinterpret_cast<Instr*>(pc) = instr;\n   }\n   static Condition GetCondition(Instr instr);"
        },
        {
            "sha": "8267da47030360b1d5849cb1c5d30b253b68a0ab",
            "filename": "deps/v8/src/arm/code-stubs-arm.cc",
            "status": "modified",
            "additions": 31,
            "deletions": 374,
            "changes": 405,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -17,6 +17,7 @@\n #include \"src/ic/ic.h\"\n #include \"src/ic/stub-cache.h\"\n #include \"src/isolate.h\"\n+#include \"src/objects/api-callbacks.h\"\n #include \"src/objects/regexp-match-info.h\"\n #include \"src/regexp/jsregexp.h\"\n #include \"src/regexp/regexp-macro-assembler.h\"\n@@ -38,355 +39,11 @@ void ArrayNArgumentsConstructorStub::Generate(MacroAssembler* masm) {\n   __ TailCallRuntime(Runtime::kNewArray);\n }\n \n-\n-void DoubleToIStub::Generate(MacroAssembler* masm) {\n-  Label negate, done;\n-  Register result_reg = destination();\n-\n-  UseScratchRegisterScope temps(masm);\n-  Register double_low = GetRegisterThatIsNotOneOf(result_reg);\n-  Register double_high = GetRegisterThatIsNotOneOf(result_reg, double_low);\n-  LowDwVfpRegister double_scratch = temps.AcquireLowD();\n-\n-  // Save the old values from these temporary registers on the stack.\n-  __ Push(double_high, double_low);\n-\n-  // Account for saved regs.\n-  const int kArgumentOffset = 2 * kPointerSize;\n-\n-  // Load double input.\n-  __ vldr(double_scratch, MemOperand(sp, kArgumentOffset));\n-  __ vmov(double_low, double_high, double_scratch);\n-  // Try to convert with a FPU convert instruction. This handles all\n-  // non-saturating cases.\n-  __ TryInlineTruncateDoubleToI(result_reg, double_scratch, &done);\n-\n-  Register scratch = temps.Acquire();\n-  __ Ubfx(scratch, double_high, HeapNumber::kExponentShift,\n-          HeapNumber::kExponentBits);\n-  // Load scratch with exponent - 1. This is faster than loading\n-  // with exponent because Bias + 1 = 1024 which is an *ARM* immediate value.\n-  STATIC_ASSERT(HeapNumber::kExponentBias + 1 == 1024);\n-  __ sub(scratch, scratch, Operand(HeapNumber::kExponentBias + 1));\n-  // If exponent is greater than or equal to 84, the 32 less significant\n-  // bits are 0s (2^84 = 1, 52 significant bits, 32 uncoded bits),\n-  // the result is 0.\n-  // Compare exponent with 84 (compare exponent - 1 with 83). If the exponent is\n-  // greater than this, the conversion is out of range, so return zero.\n-  __ cmp(scratch, Operand(83));\n-  __ mov(result_reg, Operand::Zero(), LeaveCC, ge);\n-  __ b(ge, &done);\n-\n-  // If we reach this code, 30 <= exponent <= 83.\n-  // `TryInlineTruncateDoubleToI` above will have truncated any double with an\n-  // exponent lower than 30.\n-  if (masm->emit_debug_code()) {\n-    // Scratch is exponent - 1.\n-    __ cmp(scratch, Operand(30 - 1));\n-    __ Check(ge, AbortReason::kUnexpectedValue);\n-  }\n-\n-  // We don't have to handle cases where 0 <= exponent <= 20 for which we would\n-  // need to shift right the high part of the mantissa.\n-  // Scratch contains exponent - 1.\n-  // Load scratch with 52 - exponent (load with 51 - (exponent - 1)).\n-  __ rsb(scratch, scratch, Operand(51), SetCC);\n-\n-  // 52 <= exponent <= 83, shift only double_low.\n-  // On entry, scratch contains: 52 - exponent.\n-  __ rsb(scratch, scratch, Operand::Zero(), LeaveCC, ls);\n-  __ mov(result_reg, Operand(double_low, LSL, scratch), LeaveCC, ls);\n-  __ b(ls, &negate);\n-\n-  // 21 <= exponent <= 51, shift double_low and double_high\n-  // to generate the result.\n-  __ mov(double_low, Operand(double_low, LSR, scratch));\n-  // Scratch contains: 52 - exponent.\n-  // We needs: exponent - 20.\n-  // So we use: 32 - scratch = 32 - 52 + exponent = exponent - 20.\n-  __ rsb(scratch, scratch, Operand(32));\n-  __ Ubfx(result_reg, double_high, 0, HeapNumber::kMantissaBitsInTopWord);\n-  // Set the implicit 1 before the mantissa part in double_high.\n-  __ orr(result_reg, result_reg,\n-         Operand(1 << HeapNumber::kMantissaBitsInTopWord));\n-  __ orr(result_reg, double_low, Operand(result_reg, LSL, scratch));\n-\n-  __ bind(&negate);\n-  // If input was positive, double_high ASR 31 equals 0 and\n-  // double_high LSR 31 equals zero.\n-  // New result = (result eor 0) + 0 = result.\n-  // If the input was negative, we have to negate the result.\n-  // Input_high ASR 31 equals 0xFFFFFFFF and double_high LSR 31 equals 1.\n-  // New result = (result eor 0xFFFFFFFF) + 1 = 0 - result.\n-  __ eor(result_reg, result_reg, Operand(double_high, ASR, 31));\n-  __ add(result_reg, result_reg, Operand(double_high, LSR, 31));\n-\n-  __ bind(&done);\n-\n-  // Restore registers corrupted in this routine and return.\n-  __ Pop(double_high, double_low);\n-  __ Ret();\n-}\n-\n-\n-void MathPowStub::Generate(MacroAssembler* masm) {\n-  const Register exponent = MathPowTaggedDescriptor::exponent();\n-  DCHECK(exponent == r2);\n-  const LowDwVfpRegister double_base = d0;\n-  const LowDwVfpRegister double_exponent = d1;\n-  const LowDwVfpRegister double_result = d2;\n-  const LowDwVfpRegister double_scratch = d3;\n-  const SwVfpRegister single_scratch = s6;\n-  const Register scratch = r9;\n-  const Register scratch2 = r4;\n-\n-  Label call_runtime, done, int_exponent;\n-\n-  // Detect integer exponents stored as double.\n-  __ TryDoubleToInt32Exact(scratch, double_exponent, double_scratch);\n-  __ b(eq, &int_exponent);\n-\n-  __ push(lr);\n-  {\n-    AllowExternalCallThatCantCauseGC scope(masm);\n-    __ PrepareCallCFunction(0, 2);\n-    __ MovToFloatParameters(double_base, double_exponent);\n-    __ CallCFunction(ExternalReference::power_double_double_function(isolate()),\n-                     0, 2);\n-  }\n-  __ pop(lr);\n-  __ MovFromFloatResult(double_result);\n-  __ b(&done);\n-\n-  // Calculate power with integer exponent.\n-  __ bind(&int_exponent);\n-\n-  // Get two copies of exponent in the registers scratch and exponent.\n-  // Exponent has previously been stored into scratch as untagged integer.\n-  __ mov(exponent, scratch);\n-\n-  __ vmov(double_scratch, double_base);  // Back up base.\n-  __ vmov(double_result, Double(1.0), scratch2);\n-\n-  // Get absolute value of exponent.\n-  __ cmp(scratch, Operand::Zero());\n-  __ rsb(scratch, scratch, Operand::Zero(), LeaveCC, mi);\n-\n-  Label while_true;\n-  __ bind(&while_true);\n-  __ mov(scratch, Operand(scratch, LSR, 1), SetCC);\n-  __ vmul(double_result, double_result, double_scratch, cs);\n-  __ vmul(double_scratch, double_scratch, double_scratch, ne);\n-  __ b(ne, &while_true);\n-\n-  __ cmp(exponent, Operand::Zero());\n-  __ b(ge, &done);\n-  __ vmov(double_scratch, Double(1.0), scratch);\n-  __ vdiv(double_result, double_scratch, double_result);\n-  // Test whether result is zero.  Bail out to check for subnormal result.\n-  // Due to subnormals, x^-y == (1/x)^y does not hold in all cases.\n-  __ VFPCompareAndSetFlags(double_result, 0.0);\n-  __ b(ne, &done);\n-  // double_exponent may not containe the exponent value if the input was a\n-  // smi.  We set it with exponent value before bailing out.\n-  __ vmov(single_scratch, exponent);\n-  __ vcvt_f64_s32(double_exponent, single_scratch);\n-\n-  // Returning or bailing out.\n-  __ push(lr);\n-  {\n-    AllowExternalCallThatCantCauseGC scope(masm);\n-    __ PrepareCallCFunction(0, 2);\n-    __ MovToFloatParameters(double_base, double_exponent);\n-    __ CallCFunction(ExternalReference::power_double_double_function(isolate()),\n-                     0, 2);\n-  }\n-  __ pop(lr);\n-  __ MovFromFloatResult(double_result);\n-\n-  __ bind(&done);\n-  __ Ret();\n-}\n-\n-Movability CEntryStub::NeedsImmovableCode() { return kImmovable; }\n-\n void CodeStub::GenerateStubsAheadOfTime(Isolate* isolate) {\n-  CEntryStub::GenerateAheadOfTime(isolate);\n   CommonArrayConstructorStub::GenerateStubsAheadOfTime(isolate);\n   StoreFastElementStub::GenerateAheadOfTime(isolate);\n }\n \n-\n-void CodeStub::GenerateFPStubs(Isolate* isolate) {\n-  // Generate if not already in cache.\n-  SaveFPRegsMode mode = kSaveFPRegs;\n-  CEntryStub(isolate, 1, mode).GetCode();\n-}\n-\n-\n-void CEntryStub::GenerateAheadOfTime(Isolate* isolate) {\n-  CEntryStub stub(isolate, 1, kDontSaveFPRegs);\n-  stub.GetCode();\n-}\n-\n-\n-void CEntryStub::Generate(MacroAssembler* masm) {\n-  // Called from JavaScript; parameters are on stack as if calling JS function.\n-  // r0: number of arguments including receiver\n-  // r1: pointer to builtin function\n-  // fp: frame pointer  (restored after C call)\n-  // sp: stack pointer  (restored as callee's sp after C call)\n-  // cp: current context  (C callee-saved)\n-  //\n-  // If argv_in_register():\n-  // r2: pointer to the first argument\n-  ProfileEntryHookStub::MaybeCallEntryHook(masm);\n-\n-  __ mov(r5, Operand(r1));\n-\n-  if (argv_in_register()) {\n-    // Move argv into the correct register.\n-    __ mov(r1, Operand(r2));\n-  } else {\n-    // Compute the argv pointer in a callee-saved register.\n-    __ add(r1, sp, Operand(r0, LSL, kPointerSizeLog2));\n-    __ sub(r1, r1, Operand(kPointerSize));\n-  }\n-\n-  // Enter the exit frame that transitions from JavaScript to C++.\n-  FrameScope scope(masm, StackFrame::MANUAL);\n-  __ EnterExitFrame(save_doubles(), 0, is_builtin_exit()\n-                                           ? StackFrame::BUILTIN_EXIT\n-                                           : StackFrame::EXIT);\n-\n-  // Store a copy of argc in callee-saved registers for later.\n-  __ mov(r4, Operand(r0));\n-\n-  // r0, r4: number of arguments including receiver  (C callee-saved)\n-  // r1: pointer to the first argument (C callee-saved)\n-  // r5: pointer to builtin function  (C callee-saved)\n-\n-#if V8_HOST_ARCH_ARM\n-  int frame_alignment = MacroAssembler::ActivationFrameAlignment();\n-  int frame_alignment_mask = frame_alignment - 1;\n-  if (FLAG_debug_code) {\n-    if (frame_alignment > kPointerSize) {\n-      Label alignment_as_expected;\n-      DCHECK(base::bits::IsPowerOfTwo(frame_alignment));\n-      __ tst(sp, Operand(frame_alignment_mask));\n-      __ b(eq, &alignment_as_expected);\n-      // Don't use Check here, as it will call Runtime_Abort re-entering here.\n-      __ stop(\"Unexpected alignment\");\n-      __ bind(&alignment_as_expected);\n-    }\n-  }\n-#endif\n-\n-  // Call C built-in.\n-  // r0 = argc, r1 = argv, r2 = isolate\n-  __ mov(r2, Operand(ExternalReference::isolate_address(isolate())));\n-\n-  // To let the GC traverse the return address of the exit frames, we need to\n-  // know where the return address is. The CEntryStub is unmovable, so\n-  // we can store the address on the stack to be able to find it again and\n-  // we never have to restore it, because it will not change.\n-  // Compute the return address in lr to return to after the jump below. Pc is\n-  // already at '+ 8' from the current instruction but return is after three\n-  // instructions so add another 4 to pc to get the return address.\n-  {\n-    // Prevent literal pool emission before return address.\n-    Assembler::BlockConstPoolScope block_const_pool(masm);\n-    __ add(lr, pc, Operand(4));\n-    __ str(lr, MemOperand(sp));\n-    __ Call(r5);\n-  }\n-\n-  // Result returned in r0 or r1:r0 - do not destroy these registers!\n-\n-  // Check result for exception sentinel.\n-  Label exception_returned;\n-  __ CompareRoot(r0, Heap::kExceptionRootIndex);\n-  __ b(eq, &exception_returned);\n-\n-  // Check that there is no pending exception, otherwise we\n-  // should have returned the exception sentinel.\n-  if (FLAG_debug_code) {\n-    Label okay;\n-    ExternalReference pending_exception_address(\n-        IsolateAddressId::kPendingExceptionAddress, isolate());\n-    __ mov(r3, Operand(pending_exception_address));\n-    __ ldr(r3, MemOperand(r3));\n-    __ CompareRoot(r3, Heap::kTheHoleValueRootIndex);\n-    // Cannot use check here as it attempts to generate call into runtime.\n-    __ b(eq, &okay);\n-    __ stop(\"Unexpected pending exception\");\n-    __ bind(&okay);\n-  }\n-\n-  // Exit C frame and return.\n-  // r0:r1: result\n-  // sp: stack pointer\n-  // fp: frame pointer\n-  Register argc = argv_in_register()\n-                      // We don't want to pop arguments so set argc to no_reg.\n-                      ? no_reg\n-                      // Callee-saved register r4 still holds argc.\n-                      : r4;\n-  __ LeaveExitFrame(save_doubles(), argc);\n-  __ mov(pc, lr);\n-\n-  // Handling of exception.\n-  __ bind(&exception_returned);\n-\n-  ExternalReference pending_handler_context_address(\n-      IsolateAddressId::kPendingHandlerContextAddress, isolate());\n-  ExternalReference pending_handler_entrypoint_address(\n-      IsolateAddressId::kPendingHandlerEntrypointAddress, isolate());\n-  ExternalReference pending_handler_fp_address(\n-      IsolateAddressId::kPendingHandlerFPAddress, isolate());\n-  ExternalReference pending_handler_sp_address(\n-      IsolateAddressId::kPendingHandlerSPAddress, isolate());\n-\n-  // Ask the runtime for help to determine the handler. This will set r0 to\n-  // contain the current pending exception, don't clobber it.\n-  ExternalReference find_handler(Runtime::kUnwindAndFindExceptionHandler,\n-                                 isolate());\n-  {\n-    FrameScope scope(masm, StackFrame::MANUAL);\n-    __ PrepareCallCFunction(3, 0);\n-    __ mov(r0, Operand(0));\n-    __ mov(r1, Operand(0));\n-    __ mov(r2, Operand(ExternalReference::isolate_address(isolate())));\n-    __ CallCFunction(find_handler, 3);\n-  }\n-\n-  // Retrieve the handler context, SP and FP.\n-  __ mov(cp, Operand(pending_handler_context_address));\n-  __ ldr(cp, MemOperand(cp));\n-  __ mov(sp, Operand(pending_handler_sp_address));\n-  __ ldr(sp, MemOperand(sp));\n-  __ mov(fp, Operand(pending_handler_fp_address));\n-  __ ldr(fp, MemOperand(fp));\n-\n-  // If the handler is a JS frame, restore the context to the frame. Note that\n-  // the context will be set to (cp == 0) for non-JS frames.\n-  __ cmp(cp, Operand(0));\n-  __ str(cp, MemOperand(fp, StandardFrameConstants::kContextOffset), ne);\n-\n-  // Reset the masking register. This is done independent of the underlying\n-  // feature flag {FLAG_branch_load_poisoning} to make the snapshot work with\n-  // both configurations. It is safe to always do this, because the underlying\n-  // register is caller-saved and can be arbitrarily clobbered.\n-  __ ResetSpeculationPoisonRegister();\n-\n-  // Compute the handler entry address and jump to it.\n-  ConstantPoolUnavailableScope constant_pool_unavailable(masm);\n-  __ mov(r1, Operand(pending_handler_entrypoint_address));\n-  __ ldr(r1, MemOperand(r1));\n-  __ Jump(r1);\n-}\n-\n-\n void JSEntryStub::Generate(MacroAssembler* masm) {\n   // r0: code entry\n   // r1: function\n@@ -396,19 +53,23 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n \n   Label invoke, handler_entry, exit;\n \n-  ProfileEntryHookStub::MaybeCallEntryHook(masm);\n+  {\n+    NoRootArrayScope no_root_array(masm);\n+\n+    ProfileEntryHookStub::MaybeCallEntryHook(masm);\n \n-  // Called from C, so do not pop argc and args on exit (preserve sp)\n-  // No need to save register-passed args\n-  // Save callee-saved registers (incl. cp and fp), sp, and lr\n-  __ stm(db_w, sp, kCalleeSaved | lr.bit());\n+    // Called from C, so do not pop argc and args on exit (preserve sp)\n+    // No need to save register-passed args\n+    // Save callee-saved registers (incl. cp and fp), sp, and lr\n+    __ stm(db_w, sp, kCalleeSaved | lr.bit());\n \n-  // Save callee-saved vfp registers.\n-  __ vstm(db_w, sp, kFirstCalleeSavedDoubleReg, kLastCalleeSavedDoubleReg);\n-  // Set up the reserved register for 0.0.\n-  __ vmov(kDoubleRegZero, Double(0.0));\n+    // Save callee-saved vfp registers.\n+    __ vstm(db_w, sp, kFirstCalleeSavedDoubleReg, kLastCalleeSavedDoubleReg);\n+    // Set up the reserved register for 0.0.\n+    __ vmov(kDoubleRegZero, Double(0.0));\n \n-  __ InitializeRootRegister();\n+    __ InitializeRootRegister();\n+  }\n \n   // Get address of argv, see stm above.\n   // r0: code entry\n@@ -430,8 +91,8 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n   StackFrame::Type marker = type();\n   __ mov(r7, Operand(StackFrame::TypeToMarker(marker)));\n   __ mov(r6, Operand(StackFrame::TypeToMarker(marker)));\n-  __ mov(r5, Operand(ExternalReference(IsolateAddressId::kCEntryFPAddress,\n-                                       isolate())));\n+  __ mov(r5, Operand(ExternalReference::Create(\n+                 IsolateAddressId::kCEntryFPAddress, isolate())));\n   __ ldr(r5, MemOperand(r5));\n   {\n     UseScratchRegisterScope temps(masm);\n@@ -449,7 +110,8 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n \n   // If this is the outermost JS call, set js_entry_sp value.\n   Label non_outermost_js;\n-  ExternalReference js_entry_sp(IsolateAddressId::kJSEntrySPAddress, isolate());\n+  ExternalReference js_entry_sp =\n+      ExternalReference::Create(IsolateAddressId::kJSEntrySPAddress, isolate());\n   __ mov(r5, Operand(ExternalReference(js_entry_sp)));\n   __ ldr(scratch, MemOperand(r5));\n   __ cmp(scratch, Operand::Zero());\n@@ -479,8 +141,8 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n     // fp will be invalid because the PushStackHandler below sets it to 0 to\n     // signal the existence of the JSEntry frame.\n     __ mov(scratch,\n-           Operand(ExternalReference(IsolateAddressId::kPendingExceptionAddress,\n-                                     isolate())));\n+           Operand(ExternalReference::Create(\n+               IsolateAddressId::kPendingExceptionAddress, isolate())));\n   }\n   __ str(r0, MemOperand(scratch));\n   __ LoadRoot(r0, Heap::kExceptionRootIndex);\n@@ -523,8 +185,8 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n \n   // Restore the top frame descriptors from the stack.\n   __ pop(r3);\n-  __ mov(scratch, Operand(ExternalReference(IsolateAddressId::kCEntryFPAddress,\n-                                            isolate())));\n+  __ mov(scratch, Operand(ExternalReference::Create(\n+                      IsolateAddressId::kCEntryFPAddress, isolate())));\n   __ str(r3, MemOperand(scratch));\n \n   // Reset the stack to the callee saved registers.\n@@ -638,9 +300,8 @@ void ProfileEntryHookStub::Generate(MacroAssembler* masm) {\n     __ mov(r2, Operand(ExternalReference::isolate_address(isolate())));\n \n     ApiFunction dispatcher(FUNCTION_ADDR(EntryHookTrampoline));\n-    __ mov(scratch,\n-           Operand(ExternalReference(\n-               &dispatcher, ExternalReference::BUILTIN_CALL, isolate())));\n+    __ mov(scratch, Operand(ExternalReference::Create(\n+                        &dispatcher, ExternalReference::BUILTIN_CALL)));\n #endif\n     __ Call(scratch);\n   }\n@@ -849,7 +510,7 @@ void ArrayConstructorStub::Generate(MacroAssembler* masm) {\n   __ str(r1, MemOperand(sp, r0, LSL, kPointerSizeLog2));\n   __ add(r0, r0, Operand(3));\n   __ Push(r3, r2);\n-  __ JumpToExternalReference(ExternalReference(Runtime::kNewArray, isolate()));\n+  __ JumpToExternalReference(ExternalReference::Create(Runtime::kNewArray));\n }\n \n \n@@ -982,8 +643,7 @@ static void CallApiFunctionAndReturn(MacroAssembler* masm,\n     __ PushSafepointRegisters();\n     __ PrepareCallCFunction(1);\n     __ mov(r0, Operand(ExternalReference::isolate_address(isolate)));\n-    __ CallCFunction(ExternalReference::log_enter_external_function(isolate),\n-                     1);\n+    __ CallCFunction(ExternalReference::log_enter_external_function(), 1);\n     __ PopSafepointRegisters();\n   }\n \n@@ -998,8 +658,7 @@ static void CallApiFunctionAndReturn(MacroAssembler* masm,\n     __ PushSafepointRegisters();\n     __ PrepareCallCFunction(1);\n     __ mov(r0, Operand(ExternalReference::isolate_address(isolate)));\n-    __ CallCFunction(ExternalReference::log_leave_external_function(isolate),\n-                     1);\n+    __ CallCFunction(ExternalReference::log_leave_external_function(), 1);\n     __ PopSafepointRegisters();\n   }\n \n@@ -1054,8 +713,7 @@ static void CallApiFunctionAndReturn(MacroAssembler* masm,\n   __ mov(r4, r0);\n   __ PrepareCallCFunction(1);\n   __ mov(r0, Operand(ExternalReference::isolate_address(isolate)));\n-  __ CallCFunction(ExternalReference::delete_handle_scope_extensions(isolate),\n-                   1);\n+  __ CallCFunction(ExternalReference::delete_handle_scope_extensions(), 1);\n   __ mov(r0, r4);\n   __ jmp(&leave_exit_frame);\n }\n@@ -1131,8 +789,7 @@ void CallApiCallbackStub::Generate(MacroAssembler* masm) {\n   __ mov(scratch0, Operand(argc()));\n   __ str(scratch0, MemOperand(r0, 2 * kPointerSize));\n \n-  ExternalReference thunk_ref =\n-      ExternalReference::invoke_function_callback(masm->isolate());\n+  ExternalReference thunk_ref = ExternalReference::invoke_function_callback();\n \n   AllowExternalCallThatCantCauseGC scope(masm);\n   // Stores return the first js argument\n@@ -1194,7 +851,7 @@ void CallApiGetterStub::Generate(MacroAssembler* masm) {\n   __ add(r1, sp, Operand(1 * kPointerSize));  // r1 = v8::PropertyCallbackInfo&\n \n   ExternalReference thunk_ref =\n-      ExternalReference::invoke_accessor_getter_callback(isolate());\n+      ExternalReference::invoke_accessor_getter_callback();\n \n   __ ldr(scratch, FieldMemOperand(callback, AccessorInfo::kJsGetterOffset));\n   __ ldr(api_function_address,"
        },
        {
            "sha": "02d1c6b1dd2d9883bf529a4e524ac7e34d10fe68",
            "filename": "deps/v8/src/arm/constants-arm.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fconstants-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fconstants-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fconstants-arm.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -666,7 +666,7 @@ class Instruction {\n   // reference to an instruction is to convert a pointer. There is no way\n   // to allocate or create instances of class Instruction.\n   // Use the At(pc) function to create references to Instruction.\n-  static Instruction* At(byte* pc) {\n+  static Instruction* At(Address pc) {\n     return reinterpret_cast<Instruction*>(pc);\n   }\n "
        },
        {
            "sha": "73131d7d1843c2fa6f0665c406a90762a791dd8e",
            "filename": "deps/v8/src/arm/deoptimizer-arm.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fdeoptimizer-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fdeoptimizer-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fdeoptimizer-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -58,7 +58,7 @@ void Deoptimizer::TableEntryGenerator::Generate() {\n   {\n     UseScratchRegisterScope temps(masm());\n     Register scratch = temps.Acquire();\n-    __ mov(scratch, Operand(ExternalReference(\n+    __ mov(scratch, Operand(ExternalReference::Create(\n                         IsolateAddressId::kCEntryFPAddress, isolate())));\n     __ str(fp, MemOperand(scratch));\n   }\n@@ -95,7 +95,7 @@ void Deoptimizer::TableEntryGenerator::Generate() {\n   // Call Deoptimizer::New().\n   {\n     AllowExternalCallThatCantCauseGC scope(masm());\n-    __ CallCFunction(ExternalReference::new_deoptimizer_function(isolate()), 6);\n+    __ CallCFunction(ExternalReference::new_deoptimizer_function(), 6);\n   }\n \n   // Preserve \"deoptimizer\" object in register r0 and get the input\n@@ -164,8 +164,7 @@ void Deoptimizer::TableEntryGenerator::Generate() {\n   // Call Deoptimizer::ComputeOutputFrames().\n   {\n     AllowExternalCallThatCantCauseGC scope(masm());\n-    __ CallCFunction(\n-        ExternalReference::compute_output_frames_function(isolate()), 1);\n+    __ CallCFunction(ExternalReference::compute_output_frames_function(), 1);\n   }\n   __ pop(r0);  // Restore deoptimizer object (class Deoptimizer).\n "
        },
        {
            "sha": "5dab458889624cc8876d0e3ea8b71714c75e650a",
            "filename": "deps/v8/src/arm/disasm-arm.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fdisasm-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fdisasm-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fdisasm-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -2592,7 +2592,7 @@ int Decoder::ConstantPoolSizeAt(byte* instr_ptr) {\n \n // Disassemble the instruction at *instr_ptr into the output buffer.\n int Decoder::InstructionDecode(byte* instr_ptr) {\n-  Instruction* instr = Instruction::At(instr_ptr);\n+  Instruction* instr = Instruction::At(reinterpret_cast<Address>(instr_ptr));\n   // Print raw instruction bytes.\n   out_buffer_pos_ += SNPrintF(out_buffer_ + out_buffer_pos_,\n                               \"%08x       \","
        },
        {
            "sha": "a40b323d831fd5104ff9842ef36331d460d53c0c",
            "filename": "deps/v8/src/arm/interface-descriptors-arm.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 7,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -34,7 +34,7 @@ void RecordWriteDescriptor::InitializePlatformSpecific(\n   data->InitializePlatformSpecific(kParameterCount, default_stub_registers);\n }\n \n-const Register FastNewFunctionContextDescriptor::FunctionRegister() {\n+const Register FastNewFunctionContextDescriptor::ScopeInfoRegister() {\n   return r1;\n }\n const Register FastNewFunctionContextDescriptor::SlotsRegister() { return r0; }\n@@ -254,12 +254,6 @@ void BinaryOpDescriptor::InitializePlatformSpecific(\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n-void StringAddDescriptor::InitializePlatformSpecific(\n-    CallInterfaceDescriptorData* data) {\n-  Register registers[] = {r1, r0};\n-  data->InitializePlatformSpecific(arraysize(registers), registers);\n-}\n-\n void ArgumentAdaptorDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   static PlatformInterfaceDescriptor default_descriptor ="
        },
        {
            "sha": "5a013da14104e5f796808bdb584b94a377a877fc",
            "filename": "deps/v8/src/arm/macro-assembler-arm.cc",
            "status": "modified",
            "additions": 189,
            "deletions": 52,
            "changes": 241,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -11,7 +11,9 @@\n #include \"src/base/division-by-constant.h\"\n #include \"src/base/utils/random-number-generator.h\"\n #include \"src/bootstrapper.h\"\n+#include \"src/builtins/constants-table-builder.h\"\n #include \"src/callable.h\"\n+#include \"src/code-factory.h\"\n #include \"src/code-stubs.h\"\n #include \"src/counters.h\"\n #include \"src/debug/debug.h\"\n@@ -22,6 +24,7 @@\n #include \"src/objects-inl.h\"\n #include \"src/register-configuration.h\"\n #include \"src/runtime/runtime.h\"\n+#include \"src/snapshot/serializer-common.h\"\n \n #include \"src/arm/macro-assembler-arm.h\"\n \n@@ -30,14 +33,24 @@ namespace internal {\n \n MacroAssembler::MacroAssembler(Isolate* isolate, void* buffer, int size,\n                                CodeObjectRequired create_code_object)\n-    : TurboAssembler(isolate, buffer, size, create_code_object) {}\n+    : TurboAssembler(isolate, buffer, size, create_code_object) {\n+  if (create_code_object == CodeObjectRequired::kYes) {\n+    // Unlike TurboAssembler, which can be used off the main thread and may not\n+    // allocate, macro assembler creates its own copy of the self-reference\n+    // marker in order to disambiguate between self-references during nested\n+    // code generation (e.g.: codegen of the current object triggers stub\n+    // compilation through CodeStub::GetCode()).\n+    code_object_ = Handle<HeapObject>::New(\n+        *isolate->factory()->NewSelfReferenceMarker(), isolate);\n+  }\n+}\n \n TurboAssembler::TurboAssembler(Isolate* isolate, void* buffer, int buffer_size,\n                                CodeObjectRequired create_code_object)\n     : Assembler(isolate, buffer, buffer_size), isolate_(isolate) {\n   if (create_code_object == CodeObjectRequired::kYes) {\n-    code_object_ =\n-        Handle<HeapObject>::New(isolate->heap()->undefined_value(), isolate);\n+    code_object_ = Handle<HeapObject>::New(\n+        isolate->heap()->self_reference_marker(), isolate);\n   }\n }\n \n@@ -122,6 +135,74 @@ int TurboAssembler::PopCallerSaved(SaveFPRegsMode fp_mode, Register exclusion1,\n   return bytes;\n }\n \n+#ifdef V8_EMBEDDED_BUILTINS\n+void TurboAssembler::LookupConstant(Register destination,\n+                                    Handle<Object> object) {\n+  CHECK(isolate()->ShouldLoadConstantsFromRootList());\n+  CHECK(root_array_available_);\n+\n+  // Ensure the given object is in the builtins constants table and fetch its\n+  // index.\n+  BuiltinsConstantsTableBuilder* builder =\n+      isolate()->builtins_constants_table_builder();\n+  uint32_t index = builder->AddObject(object);\n+\n+  // TODO(jgruber): Load builtins from the builtins table.\n+  // TODO(jgruber): Ensure that code generation can recognize constant targets\n+  // in kArchCallCodeObject.\n+\n+  DCHECK(isolate()->heap()->RootCanBeTreatedAsConstant(\n+      Heap::kBuiltinsConstantsTableRootIndex));\n+\n+  // The ldr call below could end up clobbering the destination register when\n+  // the offset does not fit into 12 bits (and thus needs to be loaded from the\n+  // constant pool). In that case, we need to be extra-careful and temporarily\n+  // use another register as the target.\n+\n+  const uint32_t offset =\n+      FixedArray::kHeaderSize + index * kPointerSize - kHeapObjectTag;\n+  const bool could_clobber_ip = !is_uint12(offset) && destination == ip;\n+\n+  Register reg = destination;\n+  if (could_clobber_ip) {\n+    Push(r7);\n+    reg = r7;\n+  }\n+\n+  LoadRoot(reg, Heap::kBuiltinsConstantsTableRootIndex);\n+  ldr(destination, MemOperand(reg, offset));\n+\n+  if (could_clobber_ip) {\n+    DCHECK_EQ(reg, r7);\n+    Pop(r7);\n+  }\n+}\n+\n+void TurboAssembler::LookupExternalReference(Register destination,\n+                                             ExternalReference reference) {\n+  CHECK(reference.address() !=\n+        ExternalReference::roots_array_start(isolate()).address());\n+  CHECK(isolate()->ShouldLoadConstantsFromRootList());\n+  CHECK(root_array_available_);\n+\n+  // Encode as an index into the external reference table stored on the isolate.\n+\n+  ExternalReferenceEncoder encoder(isolate());\n+  ExternalReferenceEncoder::Value v = encoder.Encode(reference.address());\n+  CHECK(!v.is_from_api());\n+  uint32_t index = v.index();\n+\n+  // Generate code to load from the external reference table.\n+\n+  int32_t roots_to_external_reference_offset =\n+      Heap::roots_to_external_reference_table_offset() +\n+      ExternalReferenceTable::OffsetOfEntry(index);\n+\n+  ldr(destination,\n+      MemOperand(kRootRegister, roots_to_external_reference_offset));\n+}\n+#endif  // V8_EMBEDDED_BUILTINS\n+\n void TurboAssembler::Jump(Register target, Condition cond) { bx(target, cond); }\n \n void TurboAssembler::Jump(intptr_t target, RelocInfo::Mode rmode,\n@@ -133,14 +214,24 @@ void TurboAssembler::Jump(intptr_t target, RelocInfo::Mode rmode,\n void TurboAssembler::Jump(Address target, RelocInfo::Mode rmode,\n                           Condition cond) {\n   DCHECK(!RelocInfo::IsCodeTarget(rmode));\n-  Jump(reinterpret_cast<intptr_t>(target), rmode, cond);\n+  Jump(static_cast<intptr_t>(target), rmode, cond);\n }\n \n void TurboAssembler::Jump(Handle<Code> code, RelocInfo::Mode rmode,\n                           Condition cond) {\n   DCHECK(RelocInfo::IsCodeTarget(rmode));\n+#ifdef V8_EMBEDDED_BUILTINS\n+  if (root_array_available_ && isolate()->ShouldLoadConstantsFromRootList()) {\n+    UseScratchRegisterScope temps(this);\n+    Register scratch = temps.Acquire();\n+    LookupConstant(scratch, code);\n+    add(scratch, scratch, Operand(Code::kHeaderSize - kHeapObjectTag));\n+    Jump(scratch, cond);\n+    return;\n+  }\n+#endif  // V8_EMBEDDED_BUILTINS\n   // 'code' is always generated ARM code, never THUMB code\n-  Jump(reinterpret_cast<intptr_t>(code.address()), rmode, cond);\n+  Jump(static_cast<intptr_t>(code.address()), rmode, cond);\n }\n \n int TurboAssembler::CallSize(Register target, Condition cond) {\n@@ -159,7 +250,7 @@ void TurboAssembler::Call(Register target, Condition cond) {\n int TurboAssembler::CallSize(Address target, RelocInfo::Mode rmode,\n                              Condition cond) {\n   Instr mov_instr = cond | MOV | LeaveCC;\n-  Operand mov_operand = Operand(reinterpret_cast<intptr_t>(target), rmode);\n+  Operand mov_operand = Operand(target, rmode);\n   return kInstrSize +\n          mov_operand.InstructionsRequired(this, mov_instr) * kInstrSize;\n }\n@@ -203,7 +294,7 @@ void TurboAssembler::Call(Address target, RelocInfo::Mode rmode, Condition cond,\n   //  blx   ip\n   //                      @ return address\n \n-  mov(ip, Operand(reinterpret_cast<int32_t>(target), rmode));\n+  mov(ip, Operand(target, rmode));\n   blx(ip, cond);\n \n   DCHECK_EQ(expected_size, SizeOfCodeGeneratedSince(&start));\n@@ -221,6 +312,16 @@ void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode,\n                           Condition cond, TargetAddressStorageMode mode,\n                           bool check_constant_pool) {\n   DCHECK(RelocInfo::IsCodeTarget(rmode));\n+#ifdef V8_EMBEDDED_BUILTINS\n+  if (root_array_available_ && isolate()->ShouldLoadConstantsFromRootList()) {\n+    // Use ip directly instead of using UseScratchRegisterScope, as we do not\n+    // preserve scratch registers across calls.\n+    LookupConstant(ip, code);\n+    add(ip, ip, Operand(Code::kHeaderSize - kHeapObjectTag));\n+    Call(ip, cond);\n+    return;\n+  }\n+#endif  // V8_EMBEDDED_BUILTINS\n   // 'code' is always generated ARM code, never THUMB code\n   Call(code.address(), rmode, cond, mode);\n }\n@@ -261,9 +362,32 @@ void TurboAssembler::Push(Smi* smi) {\n void TurboAssembler::Move(Register dst, Smi* smi) { mov(dst, Operand(smi)); }\n \n void TurboAssembler::Move(Register dst, Handle<HeapObject> value) {\n+#ifdef V8_EMBEDDED_BUILTINS\n+  if (root_array_available_ && isolate()->ShouldLoadConstantsFromRootList()) {\n+    Heap::RootListIndex root_index;\n+    if (!isolate()->heap()->IsRootHandle(value, &root_index)) {\n+      LookupConstant(dst, value);\n+    } else {\n+      LoadRoot(dst, root_index);\n+    }\n+    return;\n+  }\n+#endif  // V8_EMBEDDED_BUILTINS\n   mov(dst, Operand(value));\n }\n \n+void TurboAssembler::Move(Register dst, ExternalReference reference) {\n+#ifdef V8_EMBEDDED_BUILTINS\n+  if (root_array_available_ && isolate()->ShouldLoadConstantsFromRootList() &&\n+      reference.address() !=\n+          ExternalReference::roots_array_start(isolate()).address()) {\n+    LookupExternalReference(dst, reference);\n+    return;\n+  }\n+#endif  // V8_EMBEDDED_BUILTINS\n+  mov(dst, Operand(reference));\n+}\n+\n void TurboAssembler::Move(Register dst, Register src, Condition cond) {\n   if (dst != src) {\n     mov(dst, src, LeaveCC, cond);\n@@ -539,8 +663,7 @@ void TurboAssembler::CallRecordWriteStub(\n   Pop(slot_parameter);\n   Pop(object_parameter);\n \n-  Move(isolate_parameter,\n-       Operand(ExternalReference::isolate_address(isolate())));\n+  Move(isolate_parameter, ExternalReference::isolate_address(isolate()));\n   Move(remembered_set_parameter, Smi::FromEnum(remembered_set_action));\n   Move(fp_mode_parameter, Smi::FromEnum(fp_mode));\n   Call(callable.code(), RelocInfo::CODE_TARGET);\n@@ -558,10 +681,12 @@ void MacroAssembler::RecordWrite(Register object, Register address,\n                                  SmiCheck smi_check) {\n   DCHECK(object != value);\n   if (emit_debug_code()) {\n-    UseScratchRegisterScope temps(this);\n-    Register scratch = temps.Acquire();\n-    ldr(scratch, MemOperand(address));\n-    cmp(scratch, value);\n+    {\n+      UseScratchRegisterScope temps(this);\n+      Register scratch = temps.Acquire();\n+      ldr(scratch, MemOperand(address));\n+      cmp(scratch, value);\n+    }\n     Check(eq, AbortReason::kWrongAddressOrValuePassedToRecordWrite);\n   }\n \n@@ -1100,7 +1225,7 @@ void TurboAssembler::EnterFrame(StackFrame::Type type,\n   mov(scratch, Operand(StackFrame::TypeToMarker(type)));\n   PushCommonFrame(scratch);\n   if (type == StackFrame::INTERNAL) {\n-    mov(scratch, Operand(CodeObject()));\n+    Move(scratch, CodeObject());\n     push(scratch);\n   }\n }\n@@ -1137,15 +1262,15 @@ void MacroAssembler::EnterExitFrame(bool save_doubles, int stack_space,\n     mov(scratch, Operand::Zero());\n     str(scratch, MemOperand(fp, ExitFrameConstants::kSPOffset));\n   }\n-  mov(scratch, Operand(CodeObject()));\n+  Move(scratch, CodeObject());\n   str(scratch, MemOperand(fp, ExitFrameConstants::kCodeOffset));\n \n   // Save the frame pointer and the context in top.\n-  mov(scratch, Operand(ExternalReference(IsolateAddressId::kCEntryFPAddress,\n-                                         isolate())));\n+  Move(scratch, ExternalReference::Create(IsolateAddressId::kCEntryFPAddress,\n+                                          isolate()));\n   str(fp, MemOperand(scratch));\n-  mov(scratch,\n-      Operand(ExternalReference(IsolateAddressId::kContextAddress, isolate())));\n+  Move(scratch,\n+       ExternalReference::Create(IsolateAddressId::kContextAddress, isolate()));\n   str(cp, MemOperand(scratch));\n \n   // Optionally save all double registers.\n@@ -1204,18 +1329,18 @@ void MacroAssembler::LeaveExitFrame(bool save_doubles, Register argument_count,\n \n   // Clear top frame.\n   mov(r3, Operand::Zero());\n-  mov(scratch, Operand(ExternalReference(IsolateAddressId::kCEntryFPAddress,\n-                                         isolate())));\n+  Move(scratch, ExternalReference::Create(IsolateAddressId::kCEntryFPAddress,\n+                                          isolate()));\n   str(r3, MemOperand(scratch));\n \n   // Restore current context from top and clear it in debug mode.\n-  mov(scratch,\n-      Operand(ExternalReference(IsolateAddressId::kContextAddress, isolate())));\n+  Move(scratch,\n+       ExternalReference::Create(IsolateAddressId::kContextAddress, isolate()));\n   ldr(cp, MemOperand(scratch));\n #ifdef DEBUG\n   mov(r3, Operand(Context::kInvalidContext));\n-  mov(scratch,\n-      Operand(ExternalReference(IsolateAddressId::kContextAddress, isolate())));\n+  Move(scratch,\n+       ExternalReference::Create(IsolateAddressId::kContextAddress, isolate()));\n   str(r3, MemOperand(scratch));\n #endif\n \n@@ -1372,14 +1497,21 @@ void MacroAssembler::CheckDebugHook(Register fun, Register new_target,\n                                     const ParameterCount& actual) {\n   Label skip_hook;\n \n-  ExternalReference debug_hook_avtive =\n+  ExternalReference debug_hook_active =\n       ExternalReference::debug_hook_on_function_call_address(isolate());\n-  mov(r4, Operand(debug_hook_avtive));\n+  Move(r4, debug_hook_active);\n   ldrsb(r4, MemOperand(r4));\n   cmp(r4, Operand(0));\n   b(eq, &skip_hook);\n \n   {\n+    // Load receiver to pass it later to DebugOnFunctionCall hook.\n+    if (actual.is_reg()) {\n+      mov(r4, actual.reg());\n+    } else {\n+      mov(r4, Operand(actual.immediate()));\n+    }\n+    ldr(r4, MemOperand(sp, r4, LSL, kPointerSizeLog2));\n     FrameScope frame(this,\n                      has_frame() ? StackFrame::NONE : StackFrame::INTERNAL);\n     if (expected.is_reg()) {\n@@ -1395,6 +1527,7 @@ void MacroAssembler::CheckDebugHook(Register fun, Register new_target,\n     }\n     Push(fun);\n     Push(fun);\n+    Push(r4);\n     CallRuntime(Runtime::kDebugOnFunctionCall);\n     Pop(fun);\n     if (new_target.is_valid()) {\n@@ -1494,7 +1627,7 @@ void MacroAssembler::MaybeDropFrames() {\n   // Check whether we need to drop frames to restart a function on the stack.\n   ExternalReference restart_fp =\n       ExternalReference::debug_restart_fp_address(isolate());\n-  mov(r1, Operand(restart_fp));\n+  Move(r1, restart_fp);\n   ldr(r1, MemOperand(r1));\n   tst(r1, r1);\n   Jump(BUILTIN_CODE(isolate(), FrameDropperTrampoline), RelocInfo::CODE_TARGET,\n@@ -1508,8 +1641,8 @@ void MacroAssembler::PushStackHandler() {\n \n   Push(Smi::kZero);  // Padding.\n   // Link the current handler as the next handler.\n-  mov(r6,\n-      Operand(ExternalReference(IsolateAddressId::kHandlerAddress, isolate())));\n+  mov(r6, Operand(ExternalReference::Create(IsolateAddressId::kHandlerAddress,\n+                                            isolate())));\n   ldr(r5, MemOperand(r6));\n   push(r5);\n   // Set this new handler as the current one.\n@@ -1522,8 +1655,8 @@ void MacroAssembler::PopStackHandler() {\n   Register scratch = temps.Acquire();\n   STATIC_ASSERT(StackHandlerConstants::kNextOffset == 0);\n   pop(r1);\n-  mov(scratch,\n-      Operand(ExternalReference(IsolateAddressId::kHandlerAddress, isolate())));\n+  mov(scratch, Operand(ExternalReference::Create(\n+                   IsolateAddressId::kHandlerAddress, isolate())));\n   str(r1, MemOperand(scratch));\n   add(sp, sp, Operand(StackHandlerConstants::kSize - kPointerSize));\n }\n@@ -1639,8 +1772,9 @@ void TurboAssembler::TryInlineTruncateDoubleToI(Register result,\n   b(lt, done);\n }\n \n-void TurboAssembler::TruncateDoubleToIDelayed(Zone* zone, Register result,\n-                                              DwVfpRegister double_input) {\n+void TurboAssembler::TruncateDoubleToI(Isolate* isolate, Zone* zone,\n+                                       Register result,\n+                                       DwVfpRegister double_input) {\n   Label done;\n \n   TryInlineTruncateDoubleToI(result, double_input, &done);\n@@ -1650,7 +1784,8 @@ void TurboAssembler::TruncateDoubleToIDelayed(Zone* zone, Register result,\n   sub(sp, sp, Operand(kDoubleSize));  // Put input on stack.\n   vstr(double_input, MemOperand(sp, 0));\n \n-  CallStubDelayed(new (zone) DoubleToIStub(nullptr, result));\n+  Call(BUILTIN_CODE(isolate, DoubleToI), RelocInfo::CODE_TARGET);\n+  ldr(result, MemOperand(sp, 0));\n \n   add(sp, sp, Operand(kDoubleSize));\n   pop(lr);\n@@ -1666,8 +1801,10 @@ void TurboAssembler::CallRuntimeDelayed(Zone* zone, Runtime::FunctionId fid,\n   // should remove this need and make the runtime routine entry code\n   // smarter.\n   mov(r0, Operand(f->nargs));\n-  mov(r1, Operand(ExternalReference(f, isolate())));\n-  CallStubDelayed(new (zone) CEntryStub(nullptr, 1, save_doubles));\n+  Move(r1, ExternalReference::Create(f));\n+  Handle<Code> code =\n+      CodeFactory::CEntry(isolate(), f->result_size, save_doubles);\n+  Call(code, RelocInfo::CODE_TARGET);\n }\n \n void MacroAssembler::CallRuntime(const Runtime::Function* f,\n@@ -1685,9 +1822,10 @@ void MacroAssembler::CallRuntime(const Runtime::Function* f,\n   // should remove this need and make the runtime routine entry code\n   // smarter.\n   mov(r0, Operand(num_arguments));\n-  mov(r1, Operand(ExternalReference(f, isolate())));\n-  CEntryStub stub(isolate(), 1, save_doubles);\n-  CallStub(&stub);\n+  Move(r1, ExternalReference::Create(f));\n+  Handle<Code> code =\n+      CodeFactory::CEntry(isolate(), f->result_size, save_doubles);\n+  Call(code, RelocInfo::CODE_TARGET);\n }\n \n void MacroAssembler::TailCallRuntime(Runtime::FunctionId fid) {\n@@ -1700,24 +1838,23 @@ void MacroAssembler::TailCallRuntime(Runtime::FunctionId fid) {\n     // smarter.\n     mov(r0, Operand(function->nargs));\n   }\n-  JumpToExternalReference(ExternalReference(fid, isolate()));\n+  JumpToExternalReference(ExternalReference::Create(fid));\n }\n \n void MacroAssembler::JumpToExternalReference(const ExternalReference& builtin,\n                                              bool builtin_exit_frame) {\n #if defined(__thumb__)\n   // Thumb mode builtin.\n-  DCHECK_EQ(reinterpret_cast<intptr_t>(builtin.address()) & 1, 1);\n+  DCHECK_EQ(builtin.address() & 1, 1);\n #endif\n-  mov(r1, Operand(builtin));\n-  CEntryStub stub(isolate(), 1, kDontSaveFPRegs, kArgvOnStack,\n-                  builtin_exit_frame);\n-  Jump(stub.GetCode(), RelocInfo::CODE_TARGET);\n+  Move(r1, builtin);\n+  Handle<Code> code = CodeFactory::CEntry(isolate(), 1, kDontSaveFPRegs,\n+                                          kArgvOnStack, builtin_exit_frame);\n+  Jump(code, RelocInfo::CODE_TARGET);\n }\n \n void MacroAssembler::JumpToInstructionStream(Address entry) {\n-  mov(kOffHeapTrampolineRegister,\n-      Operand(reinterpret_cast<int32_t>(entry), RelocInfo::OFF_HEAP_TARGET));\n+  mov(kOffHeapTrampolineRegister, Operand(entry, RelocInfo::OFF_HEAP_TARGET));\n   Jump(kOffHeapTrampolineRegister);\n }\n \n@@ -1733,7 +1870,7 @@ void MacroAssembler::IncrementCounter(StatsCounter* counter, int value,\n                                       Register scratch1, Register scratch2) {\n   DCHECK_GT(value, 0);\n   if (FLAG_native_code_counters && counter->Enabled()) {\n-    mov(scratch2, Operand(ExternalReference(counter)));\n+    Move(scratch2, ExternalReference::Create(counter));\n     ldr(scratch1, MemOperand(scratch2));\n     add(scratch1, scratch1, Operand(value));\n     str(scratch1, MemOperand(scratch2));\n@@ -1745,7 +1882,7 @@ void MacroAssembler::DecrementCounter(StatsCounter* counter, int value,\n                                       Register scratch1, Register scratch2) {\n   DCHECK_GT(value, 0);\n   if (FLAG_native_code_counters && counter->Enabled()) {\n-    mov(scratch2, Operand(ExternalReference(counter)));\n+    Move(scratch2, ExternalReference::Create(counter));\n     ldr(scratch1, MemOperand(scratch2));\n     sub(scratch1, scratch1, Operand(value));\n     str(scratch1, MemOperand(scratch2));\n@@ -1965,7 +2102,7 @@ void MacroAssembler::AssertUndefinedOrAllocationSite(Register object,\n \n \n void TurboAssembler::CheckFor32DRegs(Register scratch) {\n-  mov(scratch, Operand(ExternalReference::cpu_features(isolate())));\n+  Move(scratch, ExternalReference::cpu_features());\n   ldr(scratch, MemOperand(scratch));\n   tst(scratch, Operand(1u << VFP32DREGS));\n }\n@@ -2197,7 +2334,7 @@ void TurboAssembler::CallCFunction(ExternalReference function,\n                                    int num_double_arguments) {\n   UseScratchRegisterScope temps(this);\n   Register scratch = temps.Acquire();\n-  mov(scratch, Operand(function));\n+  Move(scratch, function);\n   CallCFunctionHelper(scratch, num_reg_arguments, num_double_arguments);\n }\n "
        },
        {
            "sha": "51ef552a921bba75a64e6937d55f30ecdf389e5c",
            "filename": "deps/v8/src/arm/macro-assembler-arm.h",
            "status": "modified",
            "additions": 20,
            "deletions": 5,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -28,9 +28,10 @@ constexpr Register kInterpreterDispatchTableRegister = r8;\n constexpr Register kJavaScriptCallArgCountRegister = r0;\n constexpr Register kJavaScriptCallCodeStartRegister = r2;\n constexpr Register kJavaScriptCallNewTargetRegister = r3;\n-constexpr Register kOffHeapTrampolineRegister = r6;\n+constexpr Register kOffHeapTrampolineRegister = ip;\n constexpr Register kRuntimeCallFunctionRegister = r1;\n constexpr Register kRuntimeCallArgCountRegister = r0;\n+constexpr Register kWasmInstanceRegister = r3;\n \n // ----------------------------------------------------------------------------\n // Static helper functions\n@@ -320,6 +321,12 @@ class TurboAssembler : public Assembler {\n   void AsrPair(Register dst_low, Register dst_high, Register src_low,\n                Register src_high, uint32_t shift);\n \n+#ifdef V8_EMBEDDED_BUILTINS\n+  void LookupConstant(Register destination, Handle<Object> object);\n+  void LookupExternalReference(Register destination,\n+                               ExternalReference reference);\n+#endif  // V8_EMBEDDED_BUILTINS\n+\n   // Returns the size of a call in instructions. Note, the value returned is\n   // only valid as long as no entries are added to the constant pool between\n   // checking the call size and emitting the actual call.\n@@ -331,6 +338,7 @@ class TurboAssembler : public Assembler {\n   int CallStubSize();\n \n   void CallStubDelayed(CodeStub* stub);\n+  // TODO(jgruber): Remove in favor of MacroAssembler::CallRuntime.\n   void CallRuntimeDelayed(Zone* zone, Runtime::FunctionId fid,\n                           SaveFPRegsMode save_doubles = kDontSaveFPRegs);\n \n@@ -465,6 +473,7 @@ class TurboAssembler : public Assembler {\n   // Register move. May do nothing if the registers are identical.\n   void Move(Register dst, Smi* smi);\n   void Move(Register dst, Handle<HeapObject> value);\n+  void Move(Register dst, ExternalReference reference);\n   void Move(Register dst, Register src, Condition cond = al);\n   void Move(Register dst, const Operand& src, SBit sbit = LeaveCC,\n             Condition cond = al) {\n@@ -520,8 +529,8 @@ class TurboAssembler : public Assembler {\n   // Performs a truncating conversion of a floating point number as used by\n   // the JS bitwise operations. See ECMA-262 9.5: ToInt32.\n   // Exits with 'result' holding the answer.\n-  void TruncateDoubleToIDelayed(Zone* zone, Register result,\n-                                DwVfpRegister double_input);\n+  void TruncateDoubleToI(Isolate* isolate, Zone* zone, Register result,\n+                         DwVfpRegister double_input);\n \n   // EABI variant for double arguments in use.\n   bool use_eabi_hardfloat() {\n@@ -540,11 +549,17 @@ class TurboAssembler : public Assembler {\n \n   void ResetSpeculationPoisonRegister();\n \n+  bool root_array_available() const { return root_array_available_; }\n+  void set_root_array_available(bool v) { root_array_available_ = v; }\n+\n+ protected:\n+  // This handle will be patched with the code object on installation.\n+  Handle<HeapObject> code_object_;\n+\n  private:\n   bool has_frame_ = false;\n+  bool root_array_available_ = true;\n   Isolate* const isolate_;\n-  // This handle will be patched with the code object on installation.\n-  Handle<HeapObject> code_object_;\n \n   // Compare single values and then load the fpscr flags to a register.\n   void VFPCompareAndLoadFlags(const SwVfpRegister src1,"
        },
        {
            "sha": "e8eb4740900c211aad305df742c1bc2f54d8eccc",
            "filename": "deps/v8/src/arm/simulator-arm.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 12,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -1666,17 +1666,18 @@ void Simulator::SoftwareInterrupt(Instruction* instr) {\n           case ExternalReference::BUILTIN_FP_FP_CALL:\n           case ExternalReference::BUILTIN_COMPARE_CALL:\n             PrintF(\"Call to host function at %p with args %f, %f\",\n-                   static_cast<void*>(FUNCTION_ADDR(generic_target)), dval0,\n-                   dval1);\n+                   reinterpret_cast<void*>(FUNCTION_ADDR(generic_target)),\n+                   dval0, dval1);\n             break;\n           case ExternalReference::BUILTIN_FP_CALL:\n             PrintF(\"Call to host function at %p with arg %f\",\n-                   static_cast<void*>(FUNCTION_ADDR(generic_target)), dval0);\n+                   reinterpret_cast<void*>(FUNCTION_ADDR(generic_target)),\n+                   dval0);\n             break;\n           case ExternalReference::BUILTIN_FP_INT_CALL:\n             PrintF(\"Call to host function at %p with args %f, %d\",\n-                   static_cast<void*>(FUNCTION_ADDR(generic_target)), dval0,\n-                   ival);\n+                   reinterpret_cast<void*>(FUNCTION_ADDR(generic_target)),\n+                   dval0, ival);\n             break;\n           default:\n             UNREACHABLE();\n@@ -1803,8 +1804,8 @@ void Simulator::SoftwareInterrupt(Instruction* instr) {\n           PrintF(\n               \"Call to host function at %p \"\n               \"args %08x, %08x, %08x, %08x, %08x, %08x, %08x, %08x, %08x\",\n-              static_cast<void*>(FUNCTION_ADDR(target)), arg0, arg1, arg2, arg3,\n-              arg4, arg5, arg6, arg7, arg8);\n+              reinterpret_cast<void*>(FUNCTION_ADDR(target)), arg0, arg1, arg2,\n+              arg3, arg4, arg5, arg6, arg7, arg8);\n           if (!stack_aligned) {\n             PrintF(\" with unaligned stack %08x\\n\", get_register(sp));\n           }\n@@ -3651,6 +3652,8 @@ int VFPConversionSaturate(double val, bool unsigned_res) {\n \n int32_t Simulator::ConvertDoubleToInt(double val, bool unsigned_integer,\n                                       VFPRoundingMode mode) {\n+  // TODO(jkummerow): These casts are undefined behavior if the integral\n+  // part of {val} does not fit into the destination type.\n   int32_t result =\n       unsigned_integer ? static_cast<uint32_t>(val) : static_cast<int32_t>(val);\n \n@@ -5731,13 +5734,12 @@ void Simulator::Execute() {\n   }\n }\n \n-\n-void Simulator::CallInternal(byte* entry) {\n+void Simulator::CallInternal(Address entry) {\n   // Adjust JS-based stack limit to C-based stack limit.\n   isolate_->stack_guard()->AdjustStackLimitForSimulator();\n \n   // Prepare to execute the code at entry\n-  set_register(pc, reinterpret_cast<int32_t>(entry));\n+  set_register(pc, static_cast<int32_t>(entry));\n   // Put down marker for end of simulation. The simulator will stop simulation\n   // when the PC reaches this value. By saving the \"end simulation\" value into\n   // the LR the simulation stops when returning to this call point.\n@@ -5791,7 +5793,7 @@ void Simulator::CallInternal(byte* entry) {\n   set_register(r11, r11_val);\n }\n \n-intptr_t Simulator::CallImpl(byte* entry, int argument_count,\n+intptr_t Simulator::CallImpl(Address entry, int argument_count,\n                              const intptr_t* arguments) {\n   // Set up arguments\n \n@@ -5823,7 +5825,7 @@ intptr_t Simulator::CallImpl(byte* entry, int argument_count,\n   return get_register(r0);\n }\n \n-intptr_t Simulator::CallFPImpl(byte* entry, double d0, double d1) {\n+intptr_t Simulator::CallFPImpl(Address entry, double d0, double d1) {\n   if (use_eabi_hardfloat()) {\n     set_d_register_from_double(0, d0);\n     set_d_register_from_double(1, d1);"
        },
        {
            "sha": "6eb3cf6c6be595116fc0a93ce20e78b19e604428",
            "filename": "deps/v8/src/arm/simulator-arm.h",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -148,9 +148,7 @@ class Simulator : public SimulatorBase {\n   void set_pc(int32_t value);\n   int32_t get_pc() const;\n \n-  Address get_sp() const {\n-    return reinterpret_cast<Address>(static_cast<intptr_t>(get_register(sp)));\n-  }\n+  Address get_sp() const { return static_cast<Address>(get_register(sp)); }\n \n   // Accessor to the internal simulator stack area.\n   uintptr_t StackLimit(uintptr_t c_limit) const;\n@@ -159,13 +157,13 @@ class Simulator : public SimulatorBase {\n   void Execute();\n \n   template <typename Return, typename... Args>\n-  Return Call(byte* entry, Args... args) {\n+  Return Call(Address entry, Args... args) {\n     return VariadicCall<Return>(this, &Simulator::CallImpl, entry, args...);\n   }\n \n   // Alternative: call a 2-argument double function.\n   template <typename Return>\n-  Return CallFP(byte* entry, double d0, double d1) {\n+  Return CallFP(Address entry, double d0, double d1) {\n     return ConvertReturn<Return>(CallFPImpl(entry, d0, d1));\n   }\n \n@@ -212,9 +210,9 @@ class Simulator : public SimulatorBase {\n     end_sim_pc = -2\n   };\n \n-  V8_EXPORT_PRIVATE intptr_t CallImpl(byte* entry, int argument_count,\n+  V8_EXPORT_PRIVATE intptr_t CallImpl(Address entry, int argument_count,\n                                       const intptr_t* arguments);\n-  intptr_t CallFPImpl(byte* entry, double d0, double d1);\n+  intptr_t CallFPImpl(Address entry, double d0, double d1);\n \n   // Unsupported instructions use Format to print an error and stop execution.\n   void Format(Instruction* instr, const char* format);\n@@ -344,7 +342,7 @@ class Simulator : public SimulatorBase {\n   void SetSpecialRegister(SRegisterFieldMask reg_and_mask, uint32_t value);\n   uint32_t GetFromSpecialRegister(SRegister reg);\n \n-  void CallInternal(byte* entry);\n+  void CallInternal(Address entry);\n \n   // Architecture state.\n   // Saturating instructions require a Q flag to indicate saturation."
        },
        {
            "sha": "0c43fbe0e1ee6c684762728215f5a7fd3fae8920",
            "filename": "deps/v8/src/arm64/assembler-arm64-inl.h",
            "status": "modified",
            "additions": 134,
            "deletions": 62,
            "changes": 196,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -18,12 +18,20 @@ bool CpuFeatures::SupportsOptimizer() { return true; }\n bool CpuFeatures::SupportsWasmSimd128() { return true; }\n \n void RelocInfo::apply(intptr_t delta) {\n-  // On arm64 only internal references need extra work.\n-  DCHECK(RelocInfo::IsInternalReference(rmode_));\n-\n-  // Absolute code pointer inside code object moves with the code object.\n-  intptr_t* p = reinterpret_cast<intptr_t*>(pc_);\n-  *p += delta;  // Relocate entry.\n+  // On arm64 only internal references and immediate branches need extra work.\n+  if (RelocInfo::IsInternalReference(rmode_)) {\n+    // Absolute code pointer inside code object moves with the code object.\n+    intptr_t* p = reinterpret_cast<intptr_t*>(pc_);\n+    *p += delta;  // Relocate entry.\n+  } else {\n+    Instruction* instr = reinterpret_cast<Instruction*>(pc_);\n+    if (instr->IsBranchAndLink() || instr->IsUnconditionalBranch()) {\n+      Address old_target =\n+          reinterpret_cast<Address>(instr->ImmPCOffsetTarget());\n+      Address new_target = old_target - delta;\n+      instr->SetBranchImmTarget(reinterpret_cast<Instruction*>(new_target));\n+    }\n+  }\n }\n \n \n@@ -222,7 +230,7 @@ struct ImmediateInitializer<ExternalReference> {\n     return RelocInfo::EXTERNAL_REFERENCE;\n   }\n   static inline int64_t immediate_for(ExternalReference t) {;\n-    return reinterpret_cast<int64_t>(t.address());\n+    return static_cast<int64_t>(t.address());\n   }\n };\n \n@@ -348,6 +356,10 @@ int64_t Operand::ImmediateValue() const {\n   return immediate_.value();\n }\n \n+RelocInfo::Mode Operand::ImmediateRMode() const {\n+  DCHECK(IsImmediate() || IsHeapObjectRequest());\n+  return immediate_.rmode();\n+}\n \n Register Operand::reg() const {\n   DCHECK(IsShiftedRegister() || IsExtendedRegister());\n@@ -523,9 +535,39 @@ Address Assembler::target_pointer_address_at(Address pc) {\n \n // Read/Modify the code target address in the branch/call instruction at pc.\n Address Assembler::target_address_at(Address pc, Address constant_pool) {\n-  return Memory::Address_at(target_pointer_address_at(pc));\n+  Instruction* instr = reinterpret_cast<Instruction*>(pc);\n+  if (instr->IsLdrLiteralX()) {\n+    return Memory::Address_at(target_pointer_address_at(pc));\n+  } else {\n+    DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n+    return reinterpret_cast<Address>(instr->ImmPCOffsetTarget());\n+  }\n }\n \n+Handle<Code> Assembler::code_target_object_handle_at(Address pc) {\n+  Instruction* instr = reinterpret_cast<Instruction*>(pc);\n+  if (instr->IsLdrLiteralX()) {\n+    return Handle<Code>(reinterpret_cast<Code**>(\n+        Assembler::target_address_at(pc, 0 /* unused */)));\n+  } else {\n+    DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n+    DCHECK_GE(instr->ImmPCOffset(), 0);\n+    DCHECK_EQ(instr->ImmPCOffset() % kInstructionSize, 0);\n+    DCHECK_LT(instr->ImmPCOffset() >> kInstructionSizeLog2,\n+              code_targets_.size());\n+    return code_targets_[instr->ImmPCOffset() >> kInstructionSizeLog2];\n+  }\n+}\n+\n+Address Assembler::runtime_entry_at(Address pc) {\n+  Instruction* instr = reinterpret_cast<Instruction*>(pc);\n+  if (instr->IsLdrLiteralX()) {\n+    return Assembler::target_address_at(pc, 0 /* unused */);\n+  } else {\n+    DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n+    return instr->ImmPCOffset() + isolate_data().code_range_start_;\n+  }\n+}\n \n Address Assembler::target_address_from_return_address(Address pc) {\n   // Returns the address of the call target from the return address that will\n@@ -540,45 +582,37 @@ Address Assembler::target_address_from_return_address(Address pc) {\n   return candidate;\n }\n \n-\n-Address Assembler::return_address_from_call_start(Address pc) {\n-  // The call, generated by MacroAssembler::Call, is one of two possible\n-  // sequences:\n-  //\n-  // Without relocation:\n-  //  movz  temp, #(target & 0x000000000000ffff)\n-  //  movk  temp, #(target & 0x00000000ffff0000)\n-  //  movk  temp, #(target & 0x0000ffff00000000)\n-  //  blr   temp\n-  //\n-  // With relocation:\n-  //  ldr   temp, =target\n-  //  blr   temp\n-  //\n-  // The return address is immediately after the blr instruction in both cases,\n-  // so it can be found by adding the call size to the address at the start of\n-  // the call sequence.\n-  STATIC_ASSERT(Assembler::kCallSizeWithoutRelocation == 4 * kInstructionSize);\n-  STATIC_ASSERT(Assembler::kCallSizeWithRelocation == 2 * kInstructionSize);\n-\n-  Instruction* instr = reinterpret_cast<Instruction*>(pc);\n-  if (instr->IsMovz()) {\n-    // Verify the instruction sequence.\n-    DCHECK(instr->following(1)->IsMovk());\n-    DCHECK(instr->following(2)->IsMovk());\n-    DCHECK(instr->following(3)->IsBranchAndLinkToRegister());\n-    return pc + Assembler::kCallSizeWithoutRelocation;\n+int Assembler::deserialization_special_target_size(Address location) {\n+  Instruction* instr = reinterpret_cast<Instruction*>(location);\n+  if (instr->IsBranchAndLink() || instr->IsUnconditionalBranch()) {\n+    return kSpecialTargetSize;\n   } else {\n-    // Verify the instruction sequence.\n-    DCHECK(instr->IsLdrLiteralX());\n-    DCHECK(instr->following(1)->IsBranchAndLinkToRegister());\n-    return pc + Assembler::kCallSizeWithRelocation;\n+    DCHECK_EQ(instr->InstructionBits(), 0);\n+    return kPointerSize;\n   }\n }\n \n-void Assembler::deserialization_set_special_target_at(\n-    Address constant_pool_entry, Code* code, Address target) {\n-  Memory::Address_at(constant_pool_entry) = target;\n+void Assembler::deserialization_set_special_target_at(Address location,\n+                                                      Code* code,\n+                                                      Address target) {\n+  Instruction* instr = reinterpret_cast<Instruction*>(location);\n+  if (instr->IsBranchAndLink() || instr->IsUnconditionalBranch()) {\n+    if (target == 0) {\n+      // We are simply wiping the target out for serialization. Set the offset\n+      // to zero instead.\n+      target = location;\n+    }\n+    instr->SetBranchImmTarget(reinterpret_cast<Instruction*>(target));\n+    Assembler::FlushICache(location, kInstructionSize);\n+  } else {\n+    DCHECK_EQ(instr->InstructionBits(), 0);\n+    Memory::Address_at(location) = target;\n+    // Intuitively, we would think it is necessary to always flush the\n+    // instruction cache after patching a target address in the code. However,\n+    // in this case, only the constant pool contents change. The instruction\n+    // accessing the constant pool remains unchanged, so a flush is not\n+    // required.\n+  }\n }\n \n void Assembler::deserialization_set_target_internal_reference_at(\n@@ -589,20 +623,35 @@ void Assembler::deserialization_set_target_internal_reference_at(\n void Assembler::set_target_address_at(Address pc, Address constant_pool,\n                                       Address target,\n                                       ICacheFlushMode icache_flush_mode) {\n-  Memory::Address_at(target_pointer_address_at(pc)) = target;\n-  // Intuitively, we would think it is necessary to always flush the\n-  // instruction cache after patching a target address in the code as follows:\n-  //   Assembler::FlushICache(pc, sizeof(target));\n-  // However, on ARM, an instruction is actually patched in the case of\n-  // embedded constants of the form:\n-  // ldr   ip, [pc, #...]\n-  // since the instruction accessing this address in the constant pool remains\n-  // unchanged, a flush is not required.\n+  Instruction* instr = reinterpret_cast<Instruction*>(pc);\n+  if (instr->IsLdrLiteralX()) {\n+    Memory::Address_at(target_pointer_address_at(pc)) = target;\n+    // Intuitively, we would think it is necessary to always flush the\n+    // instruction cache after patching a target address in the code. However,\n+    // in this case, only the constant pool contents change. The instruction\n+    // accessing the constant pool remains unchanged, so a flush is not\n+    // required.\n+  } else {\n+    DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n+    if (target == 0) {\n+      // We are simply wiping the target out for serialization. Set the offset\n+      // to zero instead.\n+      target = pc;\n+    }\n+    instr->SetBranchImmTarget(reinterpret_cast<Instruction*>(target));\n+    if (icache_flush_mode != SKIP_ICACHE_FLUSH) {\n+      Assembler::FlushICache(pc, kInstructionSize);\n+    }\n+  }\n }\n \n-\n int RelocInfo::target_address_size() {\n-  return kPointerSize;\n+  if (IsCodedSpecially()) {\n+    return Assembler::kSpecialTargetSize;\n+  } else {\n+    DCHECK(reinterpret_cast<Instruction*>(pc_)->IsLdrLiteralX());\n+    return kPointerSize;\n+  }\n }\n \n \n@@ -615,7 +664,26 @@ Address RelocInfo::target_address_address() {\n   DCHECK(IsCodeTarget(rmode_) || IsRuntimeEntry(rmode_) || IsWasmCall(rmode_) ||\n          IsEmbeddedObject(rmode_) || IsExternalReference(rmode_) ||\n          IsOffHeapTarget(rmode_));\n-  return Assembler::target_pointer_address_at(pc_);\n+  Instruction* instr = reinterpret_cast<Instruction*>(pc_);\n+  // Read the address of the word containing the target_address in an\n+  // instruction stream.\n+  // The only architecture-independent user of this function is the serializer.\n+  // The serializer uses it to find out how many raw bytes of instruction to\n+  // output before the next target.\n+  // For an instruction like B/BL, where the target bits are mixed into the\n+  // instruction bits, the size of the target will be zero, indicating that the\n+  // serializer should not step forward in memory after a target is resolved\n+  // and written.\n+  // For LDR literal instructions, we can skip up to the constant pool entry\n+  // address. We make sure that RelocInfo is ordered by the\n+  // target_address_address so that we do not skip over any relocatable\n+  // instruction sequences.\n+  if (instr->IsLdrLiteralX()) {\n+    return constant_pool_entry_address();\n+  } else {\n+    DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n+    return reinterpret_cast<Address>(pc_);\n+  }\n }\n \n \n@@ -631,9 +699,13 @@ HeapObject* RelocInfo::target_object() {\n }\n \n Handle<HeapObject> RelocInfo::target_object_handle(Assembler* origin) {\n-  DCHECK(IsCodeTarget(rmode_) || rmode_ == EMBEDDED_OBJECT);\n-  return Handle<HeapObject>(reinterpret_cast<HeapObject**>(\n-      Assembler::target_address_at(pc_, constant_pool_)));\n+  if (rmode_ == EMBEDDED_OBJECT) {\n+    return Handle<HeapObject>(reinterpret_cast<HeapObject**>(\n+        Assembler::target_address_at(pc_, constant_pool_)));\n+  } else {\n+    DCHECK(IsCodeTarget(rmode_));\n+    return origin->code_target_object_handle_at(pc_);\n+  }\n }\n \n void RelocInfo::set_target_object(HeapObject* target,\n@@ -671,7 +743,7 @@ Address RelocInfo::target_internal_reference() {\n \n Address RelocInfo::target_internal_reference_address() {\n   DCHECK(rmode_ == INTERNAL_REFERENCE);\n-  return reinterpret_cast<Address>(pc_);\n+  return pc_;\n }\n \n void RelocInfo::set_wasm_code_table_entry(Address target,\n@@ -683,7 +755,7 @@ void RelocInfo::set_wasm_code_table_entry(Address target,\n \n Address RelocInfo::target_runtime_entry(Assembler* origin) {\n   DCHECK(IsRuntimeEntry(rmode_));\n-  return target_address();\n+  return origin->runtime_entry_at(pc_);\n }\n \n void RelocInfo::set_target_runtime_entry(Address target,\n@@ -705,9 +777,9 @@ void RelocInfo::WipeOut() {\n          IsRuntimeEntry(rmode_) || IsExternalReference(rmode_) ||\n          IsInternalReference(rmode_));\n   if (IsInternalReference(rmode_)) {\n-    Memory::Address_at(pc_) = nullptr;\n+    Memory::Address_at(pc_) = kNullAddress;\n   } else {\n-    Assembler::set_target_address_at(pc_, constant_pool_, nullptr);\n+    Assembler::set_target_address_at(pc_, constant_pool_, kNullAddress);\n   }\n }\n "
        },
        {
            "sha": "121c15aac9ca6c933d0f6de3a21bb6b4be1f86e7",
            "filename": "deps/v8/src/arm64/assembler-arm64.cc",
            "status": "modified",
            "additions": 78,
            "deletions": 26,
            "changes": 104,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -157,14 +157,20 @@ CPURegList CPURegList::GetSafepointSavedRegisters() {\n // -----------------------------------------------------------------------------\n // Implementation of RelocInfo\n \n-const int RelocInfo::kApplyMask = 1 << RelocInfo::INTERNAL_REFERENCE;\n-\n+const int RelocInfo::kApplyMask = RelocInfo::kCodeTargetMask |\n+                                  1 << RelocInfo::RUNTIME_ENTRY |\n+                                  1 << RelocInfo::INTERNAL_REFERENCE;\n \n bool RelocInfo::IsCodedSpecially() {\n   // The deserializer needs to know whether a pointer is specially coded. Being\n-  // specially coded on ARM64 means that it is a movz/movk sequence. We don't\n-  // generate those for relocatable pointers.\n-  return false;\n+  // specially coded on ARM64 means that it is an immediate branch.\n+  Instruction* instr = reinterpret_cast<Instruction*>(pc_);\n+  if (instr->IsLdrLiteralX()) {\n+    return false;\n+  } else {\n+    DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n+    return true;\n+  }\n }\n \n \n@@ -174,7 +180,7 @@ bool RelocInfo::IsInConstantPool() {\n }\n \n Address RelocInfo::embedded_address() const {\n-  return Memory::Address_at(Assembler::target_pointer_address_at(pc_));\n+  return Assembler::target_address_at(pc_, constant_pool_);\n }\n \n uint32_t RelocInfo::embedded_size() const {\n@@ -290,7 +296,7 @@ bool AreConsecutive(const VRegister& reg1, const VRegister& reg2,\n }\n \n void Immediate::InitializeHandle(Handle<HeapObject> handle) {\n-  value_ = reinterpret_cast<intptr_t>(handle.address());\n+  value_ = static_cast<intptr_t>(handle.address());\n   rmode_ = RelocInfo::EMBEDDED_OBJECT;\n }\n \n@@ -570,8 +576,8 @@ void Assembler::Reset() {\n   memset(buffer_, 0, pc_ - buffer_);\n #endif\n   pc_ = buffer_;\n-  reloc_info_writer.Reposition(reinterpret_cast<byte*>(buffer_ + buffer_size_),\n-                               reinterpret_cast<byte*>(pc_));\n+  code_targets_.reserve(64);\n+  reloc_info_writer.Reposition(buffer_ + buffer_size_, pc_);\n   constpool_.Clear();\n   next_constant_pool_check_ = 0;\n   next_veneer_pool_check_ = kMaxInt;\n@@ -580,19 +586,27 @@ void Assembler::Reset() {\n \n void Assembler::AllocateAndInstallRequestedHeapObjects(Isolate* isolate) {\n   for (auto& request : heap_object_requests_) {\n-    Handle<HeapObject> object;\n+    Address pc = reinterpret_cast<Address>(buffer_) + request.offset();\n     switch (request.kind()) {\n-      case HeapObjectRequest::kHeapNumber:\n-        object = isolate->factory()->NewHeapNumber(request.heap_number(),\n-                                                   IMMUTABLE, TENURED);\n+      case HeapObjectRequest::kHeapNumber: {\n+        Handle<HeapObject> object = isolate->factory()->NewHeapNumber(\n+            request.heap_number(), IMMUTABLE, TENURED);\n+        set_target_address_at(pc, 0 /* unused */, object.address());\n         break;\n-      case HeapObjectRequest::kCodeStub:\n+      }\n+      case HeapObjectRequest::kCodeStub: {\n         request.code_stub()->set_isolate(isolate);\n-        object = request.code_stub()->GetCode();\n+        Instruction* instr = reinterpret_cast<Instruction*>(pc);\n+        DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n+        DCHECK_GE(instr->ImmPCOffset(), 0);\n+        DCHECK_EQ(instr->ImmPCOffset() % kInstructionSize, 0);\n+        DCHECK_LT(instr->ImmPCOffset() >> kInstructionSizeLog2,\n+                  code_targets_.size());\n+        code_targets_[instr->ImmPCOffset() >> kInstructionSizeLog2] =\n+            request.code_stub()->GetCode();\n         break;\n+      }\n     }\n-    Address pc = buffer_ + request.offset();\n-    Memory::Address_at(target_pointer_address_at(pc)) = object.address();\n   }\n }\n \n@@ -4722,7 +4736,7 @@ void Assembler::GrowBuffer() {\n   DeleteArray(buffer_);\n   buffer_ = desc.buffer;\n   buffer_size_ = desc.buffer_size;\n-  pc_ = reinterpret_cast<byte*>(pc_) + pc_delta;\n+  pc_ = pc_ + pc_delta;\n   reloc_info_writer.Reposition(reloc_info_writer.pos() + rc_delta,\n                                reloc_info_writer.last_pc() + pc_delta);\n \n@@ -4739,13 +4753,13 @@ void Assembler::GrowBuffer() {\n   // Pending relocation entries are also relative, no need to relocate.\n }\n \n-\n-void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data) {\n+void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data,\n+                                ConstantPoolMode constant_pool_mode) {\n   // Non-relocatable constants should not end up in the literal pool.\n   DCHECK(!RelocInfo::IsNone(rmode));\n \n   // We do not try to reuse pool constants.\n-  RelocInfo rinfo(reinterpret_cast<byte*>(pc_), rmode, data, nullptr);\n+  RelocInfo rinfo(reinterpret_cast<Address>(pc_), rmode, data, nullptr);\n   bool write_reloc_info = true;\n \n   if ((rmode == RelocInfo::COMMENT) ||\n@@ -4760,12 +4774,14 @@ void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data) {\n            RelocInfo::IsInternalReference(rmode) ||\n            RelocInfo::IsConstPool(rmode) || RelocInfo::IsVeneerPool(rmode));\n     // These modes do not need an entry in the constant pool.\n-  } else {\n+  } else if (constant_pool_mode == NEEDS_POOL_ENTRY) {\n     write_reloc_info = constpool_.RecordEntry(data, rmode);\n     // Make sure the constant pool is not emitted in place of the next\n     // instruction for which we just recorded relocation info.\n     BlockConstPoolFor(1);\n   }\n+  // For modes that cannot use the constant pool, a different sequence of\n+  // instructions will be emitted by this function's caller.\n \n   if (!RelocInfo::IsNone(rmode) && write_reloc_info) {\n     // Don't record external references unless the heap will be serialized.\n@@ -4778,6 +4794,34 @@ void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data) {\n   }\n }\n \n+int Assembler::GetCodeTargetIndex(Handle<Code> target) {\n+  int current = static_cast<int>(code_targets_.size());\n+  if (current > 0 && !target.is_null() &&\n+      code_targets_.back().address() == target.address()) {\n+    // Optimization if we keep jumping to the same code target.\n+    return (current - 1);\n+  } else {\n+    code_targets_.push_back(target);\n+    return current;\n+  }\n+}\n+\n+void Assembler::near_jump(int offset, RelocInfo::Mode rmode) {\n+  if (!RelocInfo::IsNone(rmode)) RecordRelocInfo(rmode, offset, NO_POOL_ENTRY);\n+  b(offset);\n+}\n+\n+void Assembler::near_call(int offset, RelocInfo::Mode rmode) {\n+  if (!RelocInfo::IsNone(rmode)) RecordRelocInfo(rmode, offset, NO_POOL_ENTRY);\n+  bl(offset);\n+}\n+\n+void Assembler::near_call(HeapObjectRequest request) {\n+  RequestHeapObject(request);\n+  int index = GetCodeTargetIndex(Handle<Code>());\n+  RecordRelocInfo(RelocInfo::CODE_TARGET, index, NO_POOL_ENTRY);\n+  bl(index);\n+}\n \n void Assembler::BlockConstPoolFor(int instructions) {\n   int pc_limit = pc_offset() + instructions * kInstructionSize;\n@@ -4858,8 +4902,8 @@ bool Assembler::ShouldEmitVeneer(int max_reachable_pc, int margin) {\n \n \n void Assembler::RecordVeneerPool(int location_offset, int size) {\n-  RelocInfo rinfo(buffer_ + location_offset, RelocInfo::VENEER_POOL,\n-                  static_cast<intptr_t>(size), nullptr);\n+  RelocInfo rinfo(reinterpret_cast<Address>(buffer_) + location_offset,\n+                  RelocInfo::VENEER_POOL, static_cast<intptr_t>(size), nullptr);\n   reloc_info_writer.Write(&rinfo);\n }\n \n@@ -4965,8 +5009,7 @@ void Assembler::CheckVeneerPool(bool force_emit, bool require_jump,\n \n \n int Assembler::buffer_space() const {\n-  return static_cast<int>(reloc_info_writer.pos() -\n-                          reinterpret_cast<byte*>(pc_));\n+  return static_cast<int>(reloc_info_writer.pos() - pc_);\n }\n \n \n@@ -5009,6 +5052,15 @@ void PatchingAssembler::PatchAdrFar(int64_t target_offset) {\n   add(rd, rd, scratch);\n }\n \n+void PatchingAssembler::PatchSubSp(uint32_t immediate) {\n+  // The code at the current instruction should be:\n+  //   sub sp, sp, #0\n+\n+  // Verify the expected code.\n+  Instruction* expected_adr = InstructionAt(0);\n+  CHECK(expected_adr->IsAddSubImmediate());\n+  sub(sp, sp, immediate);\n+}\n \n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "431b5208112845198ce5c4738224e38359fe77bd",
            "filename": "deps/v8/src/arm64/assembler-arm64.h",
            "status": "modified",
            "additions": 77,
            "deletions": 44,
            "changes": 121,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -124,10 +124,6 @@ class CPURegister : public RegisterBase<CPURegister, kRegAfterLast> {\n   }\n \n   RegisterType type() const { return reg_type_; }\n-  RegList bit() const {\n-    DCHECK(static_cast<size_t>(reg_code_) < (sizeof(RegList) * kBitsPerByte));\n-    return IsValid() ? 1UL << reg_code_ : 0;\n-  }\n   int SizeInBits() const {\n     DCHECK(IsValid());\n     return reg_size_;\n@@ -445,7 +441,7 @@ ALIAS_REGISTER(Register, ip1, x17);\n ALIAS_REGISTER(Register, wip0, w16);\n ALIAS_REGISTER(Register, wip1, w17);\n // Root register.\n-ALIAS_REGISTER(Register, root, x26);\n+ALIAS_REGISTER(Register, kRootRegister, x26);\n ALIAS_REGISTER(Register, rr, x26);\n // Context pointer register.\n ALIAS_REGISTER(Register, cp, x27);\n@@ -485,14 +481,11 @@ bool AreAliased(const CPURegister& reg1,\n // same size, and are of the same type. The system stack pointer may be\n // specified. Arguments set to NoReg are ignored, as are any subsequent\n // arguments. At least one argument (reg1) must be valid (not NoCPUReg).\n-bool AreSameSizeAndType(const CPURegister& reg1,\n-                        const CPURegister& reg2,\n-                        const CPURegister& reg3 = NoCPUReg,\n-                        const CPURegister& reg4 = NoCPUReg,\n-                        const CPURegister& reg5 = NoCPUReg,\n-                        const CPURegister& reg6 = NoCPUReg,\n-                        const CPURegister& reg7 = NoCPUReg,\n-                        const CPURegister& reg8 = NoCPUReg);\n+bool AreSameSizeAndType(\n+    const CPURegister& reg1, const CPURegister& reg2 = NoCPUReg,\n+    const CPURegister& reg3 = NoCPUReg, const CPURegister& reg4 = NoCPUReg,\n+    const CPURegister& reg5 = NoCPUReg, const CPURegister& reg6 = NoCPUReg,\n+    const CPURegister& reg7 = NoCPUReg, const CPURegister& reg8 = NoCPUReg);\n \n // AreSameFormat returns true if all of the specified VRegisters have the same\n // vector format. Arguments set to NoVReg are ignored, as are any subsequent\n@@ -517,12 +510,12 @@ typedef VRegister Simd128Register;\n // Lists of registers.\n class CPURegList {\n  public:\n-  explicit CPURegList(CPURegister reg1, CPURegister reg2 = NoCPUReg,\n-                      CPURegister reg3 = NoCPUReg, CPURegister reg4 = NoCPUReg)\n-      : list_(reg1.bit() | reg2.bit() | reg3.bit() | reg4.bit()),\n-        size_(reg1.SizeInBits()),\n-        type_(reg1.type()) {\n-    DCHECK(AreSameSizeAndType(reg1, reg2, reg3, reg4));\n+  template <typename... CPURegisters>\n+  explicit CPURegList(CPURegister reg0, CPURegisters... regs)\n+      : list_(CPURegister::ListOf(reg0, regs...)),\n+        size_(reg0.SizeInBits()),\n+        type_(reg0.type()) {\n+    DCHECK(AreSameSizeAndType(reg0, regs...));\n     DCHECK(IsValid());\n   }\n \n@@ -646,8 +639,8 @@ class CPURegList {\n   CPURegister::RegisterType type_;\n \n   bool IsValid() const {\n-    const RegList kValidRegisters = 0x8000000ffffffff;\n-    const RegList kValidVRegisters = 0x0000000ffffffff;\n+    constexpr RegList kValidRegisters{0x8000000ffffffff};\n+    constexpr RegList kValidVRegisters{0x0000000ffffffff};\n     switch (type_) {\n       case CPURegister::kRegister:\n         return (list_ & kValidRegisters) == list_;\n@@ -751,6 +744,7 @@ class Operand {\n \n   inline Immediate immediate() const;\n   inline int64_t ImmediateValue() const;\n+  inline RelocInfo::Mode ImmediateRMode() const;\n   inline Register reg() const;\n   inline Shift shift() const;\n   inline Extend extend() const;\n@@ -950,7 +944,22 @@ class Assembler : public AssemblerBase {\n   // RelocInfo and pools ------------------------------------------------------\n \n   // Record relocation information for current pc_.\n-  void RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data = 0);\n+  enum ConstantPoolMode { NEEDS_POOL_ENTRY, NO_POOL_ENTRY };\n+  void RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data = 0,\n+                       ConstantPoolMode constant_pool_mode = NEEDS_POOL_ENTRY);\n+\n+  // Generate a B immediate instruction with the corresponding relocation info.\n+  // 'offset' is the immediate to encode in the B instruction (so it is the\n+  // difference between the target and the PC of the instruction, divided by\n+  // the instruction size).\n+  void near_jump(int offset, RelocInfo::Mode rmode);\n+  // Generate a BL immediate instruction with the corresponding relocation info.\n+  // As for near_jump, 'offset' is the immediate to encode in the BL\n+  // instruction.\n+  void near_call(int offset, RelocInfo::Mode rmode);\n+  // Generate a BL immediate instruction with the corresponding relocation info\n+  // for the input HeapObjectRequest.\n+  void near_call(HeapObjectRequest request);\n \n   // Return the address in the constant pool of the code target address used by\n   // the branch/call instruction at pc.\n@@ -963,42 +972,59 @@ class Assembler : public AssemblerBase {\n       Address pc, Address constant_pool, Address target,\n       ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n \n+  // Add 'target' to the code_targets_ vector, if necessary, and return the\n+  // offset at which it is stored.\n+  int GetCodeTargetIndex(Handle<Code> target);\n+\n+  // Returns the handle for the code object called at 'pc'.\n+  // This might need to be temporarily encoded as an offset into code_targets_.\n+  inline Handle<Code> code_target_object_handle_at(Address pc);\n+\n+  // Returns the target address for a runtime function for the call encoded\n+  // at 'pc'.\n+  // Runtime entries can be temporarily encoded as the offset between the\n+  // runtime function entrypoint and the code range start (stored in the\n+  // code_range_start_ field), in order to be encodable as we generate the code,\n+  // before it is moved into the code space.\n+  inline Address runtime_entry_at(Address pc);\n+\n   // Return the code target address at a call site from the return address of\n   // that call in the instruction stream.\n   inline static Address target_address_from_return_address(Address pc);\n \n-  // Given the address of the beginning of a call, return the address in the\n-  // instruction stream that call will return from.\n-  inline static Address return_address_from_call_start(Address pc);\n-\n-  // This sets the branch destination (which is in the constant pool on ARM).\n+  // This sets the branch destination. 'location' here can be either the pc of\n+  // an immediate branch or the address of an entry in the constant pool.\n   // This is for calls and branches within generated code.\n-  inline static void deserialization_set_special_target_at(\n-      Address constant_pool_entry, Code* code, Address target);\n+  inline static void deserialization_set_special_target_at(Address location,\n+                                                           Code* code,\n+                                                           Address target);\n+\n+  // Get the size of the special target encoded at 'location'.\n+  inline static int deserialization_special_target_size(Address location);\n \n   // This sets the internal reference at the pc.\n   inline static void deserialization_set_target_internal_reference_at(\n       Address pc, Address target,\n       RelocInfo::Mode mode = RelocInfo::INTERNAL_REFERENCE);\n \n-  // All addresses in the constant pool are the same size as pointers.\n-  static constexpr int kSpecialTargetSize = kPointerSize;\n+  // This value is used in the serialization process and must be zero for\n+  // ARM64, as the code target is split across multiple instructions and does\n+  // not exist separately in the code, so the serializer should not step\n+  // forwards in memory after a target is resolved and written.\n+  static constexpr int kSpecialTargetSize = 0;\n \n   // The sizes of the call sequences emitted by MacroAssembler::Call.\n   // Wherever possible, use MacroAssembler::CallSize instead of these constants,\n   // as it will choose the correct value for a given relocation mode.\n   //\n-  // Without relocation:\n-  //  movz  temp, #(target & 0x000000000000ffff)\n-  //  movk  temp, #(target & 0x00000000ffff0000)\n-  //  movk  temp, #(target & 0x0000ffff00000000)\n-  //  blr   temp\n+  // A \"near\" call is encoded in a BL immediate instruction:\n+  //  bl target\n   //\n-  // With relocation:\n-  //  ldr   temp, =target\n-  //  blr   temp\n-  static constexpr int kCallSizeWithoutRelocation = 4 * kInstructionSize;\n-  static constexpr int kCallSizeWithRelocation = 2 * kInstructionSize;\n+  // whereas a \"far\" call will be encoded like this:\n+  //  ldr temp, =target\n+  //  blr temp\n+  static constexpr int kNearCallSize = 1 * kInstructionSize;\n+  static constexpr int kFarCallSize = 2 * kInstructionSize;\n \n   // Size of the generated code in bytes\n   uint64_t SizeOfGeneratedCode() const {\n@@ -1021,7 +1047,7 @@ class Assembler : public AssemblerBase {\n   // change things to be consistent.\n   void AssertSizeOfCodeGeneratedSince(const Label* label, ptrdiff_t size) {\n     DCHECK_GE(size, 0);\n-    DCHECK(static_cast<uint64_t>(size) == SizeOfCodeGeneratedSince(label));\n+    DCHECK_EQ(static_cast<uint64_t>(size), SizeOfCodeGeneratedSince(label));\n   }\n \n   // Return the number of instructions generated from label to the\n@@ -3431,8 +3457,6 @@ class Assembler : public AssemblerBase {\n   // Verify that a label's link chain is intact.\n   void CheckLabelLinkChain(Label const * label);\n \n-  void RecordLiteral(int64_t imm, unsigned size);\n-\n   // Postpone the generation of the constant pool for the specified number of\n   // instructions.\n   void BlockConstPoolFor(int instructions);\n@@ -3522,6 +3546,14 @@ class Assembler : public AssemblerBase {\n   // are already bound.\n   std::deque<int> internal_reference_positions_;\n \n+  // Before we copy code into the code space, we cannot encode calls to code\n+  // targets as we normally would, as the difference between the instruction's\n+  // location in the temporary buffer and the call target is not guaranteed to\n+  // fit in the offset field. We keep track of the code handles we encounter\n+  // in calls in this vector, and encode the index of the code handle in the\n+  // vector instead.\n+  std::vector<Handle<Code>> code_targets_;\n+\n   // Relocation info records are also used during code generation as temporary\n   // containers for constants and code target addresses until they are emitted\n   // to the constant pool. These pending relocation info records are temporarily\n@@ -3666,6 +3698,7 @@ class PatchingAssembler : public Assembler {\n   static constexpr int kAdrFarPatchableNNops = 2;\n   static constexpr int kAdrFarPatchableNInstrs = kAdrFarPatchableNNops + 2;\n   void PatchAdrFar(int64_t target_offset);\n+  void PatchSubSp(uint32_t immediate);\n };\n \n "
        },
        {
            "sha": "cca4c302696ecbbc22acaeb81c6174dd4b6842ab",
            "filename": "deps/v8/src/arm64/code-stubs-arm64.cc",
            "status": "modified",
            "additions": 40,
            "deletions": 463,
            "changes": 503,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -16,6 +16,7 @@\n #include \"src/ic/ic.h\"\n #include \"src/ic/stub-cache.h\"\n #include \"src/isolate.h\"\n+#include \"src/objects/api-callbacks.h\"\n #include \"src/objects/regexp-match-info.h\"\n #include \"src/regexp/jsregexp.h\"\n #include \"src/regexp/regexp-macro-assembler.h\"\n@@ -36,437 +37,13 @@ void ArrayNArgumentsConstructorStub::Generate(MacroAssembler* masm) {\n   __ TailCallRuntime(Runtime::kNewArray);\n }\n \n-\n-void DoubleToIStub::Generate(MacroAssembler* masm) {\n-  Label done;\n-  Register result = destination();\n-\n-  DCHECK(result.Is64Bits());\n-\n-  UseScratchRegisterScope temps(masm);\n-  Register scratch1 = temps.AcquireX();\n-  Register scratch2 = temps.AcquireX();\n-  DoubleRegister double_scratch = temps.AcquireD();\n-\n-  __ Peek(double_scratch, 0);\n-  // Try to convert with a FPU convert instruction.  This handles all\n-  // non-saturating cases.\n-  __ TryConvertDoubleToInt64(result, double_scratch, &done);\n-  __ Fmov(result, double_scratch);\n-\n-  // If we reach here we need to manually convert the input to an int32.\n-\n-  // Extract the exponent.\n-  Register exponent = scratch1;\n-  __ Ubfx(exponent, result, HeapNumber::kMantissaBits,\n-          HeapNumber::kExponentBits);\n-\n-  // It the exponent is >= 84 (kMantissaBits + 32), the result is always 0 since\n-  // the mantissa gets shifted completely out of the int32_t result.\n-  __ Cmp(exponent, HeapNumber::kExponentBias + HeapNumber::kMantissaBits + 32);\n-  __ CzeroX(result, ge);\n-  __ B(ge, &done);\n-\n-  // The Fcvtzs sequence handles all cases except where the conversion causes\n-  // signed overflow in the int64_t target. Since we've already handled\n-  // exponents >= 84, we can guarantee that 63 <= exponent < 84.\n-\n-  if (masm->emit_debug_code()) {\n-    __ Cmp(exponent, HeapNumber::kExponentBias + 63);\n-    // Exponents less than this should have been handled by the Fcvt case.\n-    __ Check(ge, AbortReason::kUnexpectedValue);\n-  }\n-\n-  // Isolate the mantissa bits, and set the implicit '1'.\n-  Register mantissa = scratch2;\n-  __ Ubfx(mantissa, result, 0, HeapNumber::kMantissaBits);\n-  __ Orr(mantissa, mantissa, 1UL << HeapNumber::kMantissaBits);\n-\n-  // Negate the mantissa if necessary.\n-  __ Tst(result, kXSignMask);\n-  __ Cneg(mantissa, mantissa, ne);\n-\n-  // Shift the mantissa bits in the correct place. We know that we have to shift\n-  // it left here, because exponent >= 63 >= kMantissaBits.\n-  __ Sub(exponent, exponent,\n-         HeapNumber::kExponentBias + HeapNumber::kMantissaBits);\n-  __ Lsl(result, mantissa, exponent);\n-\n-  __ Bind(&done);\n-  __ Ret();\n-}\n-\n-\n-void MathPowStub::Generate(MacroAssembler* masm) {\n-  // Stack on entry:\n-  // sp[0]: Exponent (as a tagged value).\n-  // sp[1]: Base (as a tagged value).\n-  //\n-  // The (tagged) result will be returned in x0, as a heap number.\n-\n-  Register exponent_tagged = MathPowTaggedDescriptor::exponent();\n-  DCHECK(exponent_tagged.is(x11));\n-  Register exponent_integer = MathPowIntegerDescriptor::exponent();\n-  DCHECK(exponent_integer.is(x12));\n-  Register saved_lr = x19;\n-  VRegister result_double = d0;\n-  VRegister base_double = d0;\n-  VRegister exponent_double = d1;\n-  VRegister base_double_copy = d2;\n-  VRegister scratch1_double = d6;\n-  VRegister scratch0_double = d7;\n-\n-  // A fast-path for integer exponents.\n-  Label exponent_is_smi, exponent_is_integer;\n-  // Allocate a heap number for the result, and return it.\n-  Label done;\n-\n-  // Unpack the inputs.\n-\n-  // Handle double (heap number) exponents.\n-  // Detect integer exponents stored as doubles and handle those in the\n-  // integer fast-path.\n-  __ TryRepresentDoubleAsInt64(exponent_integer, exponent_double,\n-                               scratch0_double, &exponent_is_integer);\n-\n-  {\n-    AllowExternalCallThatCantCauseGC scope(masm);\n-    __ Mov(saved_lr, lr);\n-    __ CallCFunction(ExternalReference::power_double_double_function(isolate()),\n-                     0, 2);\n-    __ Mov(lr, saved_lr);\n-    __ B(&done);\n-  }\n-\n-  // Handle SMI exponents.\n-  __ Bind(&exponent_is_smi);\n-  //  x10   base_tagged       The tagged base (input).\n-  //  x11   exponent_tagged   The tagged exponent (input).\n-  //  d1    base_double       The base as a double.\n-  __ SmiUntag(exponent_integer, exponent_tagged);\n-\n-  __ Bind(&exponent_is_integer);\n-  //  x10   base_tagged       The tagged base (input).\n-  //  x11   exponent_tagged   The tagged exponent (input).\n-  //  x12   exponent_integer  The exponent as an integer.\n-  //  d1    base_double       The base as a double.\n-\n-  // Find abs(exponent). For negative exponents, we can find the inverse later.\n-  Register exponent_abs = x13;\n-  __ Cmp(exponent_integer, 0);\n-  __ Cneg(exponent_abs, exponent_integer, mi);\n-  //  x13   exponent_abs      The value of abs(exponent_integer).\n-\n-  // Repeatedly multiply to calculate the power.\n-  //  result = 1.0;\n-  //  For each bit n (exponent_integer{n}) {\n-  //    if (exponent_integer{n}) {\n-  //      result *= base;\n-  //    }\n-  //    base *= base;\n-  //    if (remaining bits in exponent_integer are all zero) {\n-  //      break;\n-  //    }\n-  //  }\n-  Label power_loop, power_loop_entry, power_loop_exit;\n-  __ Fmov(scratch1_double, base_double);\n-  __ Fmov(base_double_copy, base_double);\n-  __ Fmov(result_double, 1.0);\n-  __ B(&power_loop_entry);\n-\n-  __ Bind(&power_loop);\n-  __ Fmul(scratch1_double, scratch1_double, scratch1_double);\n-  __ Lsr(exponent_abs, exponent_abs, 1);\n-  __ Cbz(exponent_abs, &power_loop_exit);\n-\n-  __ Bind(&power_loop_entry);\n-  __ Tbz(exponent_abs, 0, &power_loop);\n-  __ Fmul(result_double, result_double, scratch1_double);\n-  __ B(&power_loop);\n-\n-  __ Bind(&power_loop_exit);\n-\n-  // If the exponent was positive, result_double holds the result.\n-  __ Tbz(exponent_integer, kXSignBit, &done);\n-\n-  // The exponent was negative, so find the inverse.\n-  __ Fmov(scratch0_double, 1.0);\n-  __ Fdiv(result_double, scratch0_double, result_double);\n-  // ECMA-262 only requires Math.pow to return an 'implementation-dependent\n-  // approximation' of base^exponent. However, mjsunit/math-pow uses Math.pow\n-  // to calculate the subnormal value 2^-1074. This method of calculating\n-  // negative powers doesn't work because 2^1074 overflows to infinity. To\n-  // catch this corner-case, we bail out if the result was 0. (This can only\n-  // occur if the divisor is infinity or the base is zero.)\n-  __ Fcmp(result_double, 0.0);\n-  __ B(&done, ne);\n-\n-  AllowExternalCallThatCantCauseGC scope(masm);\n-  __ Mov(saved_lr, lr);\n-  __ Fmov(base_double, base_double_copy);\n-  __ Scvtf(exponent_double, exponent_integer);\n-  __ CallCFunction(ExternalReference::power_double_double_function(isolate()),\n-                   0, 2);\n-  __ Mov(lr, saved_lr);\n-  __ Bind(&done);\n-  __ Ret();\n-}\n-\n void CodeStub::GenerateStubsAheadOfTime(Isolate* isolate) {\n   // It is important that the following stubs are generated in this order\n   // because pregenerated stubs can only call other pregenerated stubs.\n-  CEntryStub::GenerateAheadOfTime(isolate);\n   CommonArrayConstructorStub::GenerateStubsAheadOfTime(isolate);\n   StoreFastElementStub::GenerateAheadOfTime(isolate);\n }\n \n-\n-void CodeStub::GenerateFPStubs(Isolate* isolate) {\n-  // Floating-point code doesn't get special handling in ARM64, so there's\n-  // nothing to do here.\n-  USE(isolate);\n-}\n-\n-Movability CEntryStub::NeedsImmovableCode() {\n-  // CEntryStub stores the return address on the stack before calling into\n-  // C++ code. In some cases, the VM accesses this address, but it is not used\n-  // when the C++ code returns to the stub because LR holds the return address\n-  // in AAPCS64. If the stub is moved (perhaps during a GC), we could end up\n-  // returning to dead code.\n-  // TODO(jbramley): Whilst this is the only analysis that makes sense, I can't\n-  // find any comment to confirm this, and I don't hit any crashes whatever\n-  // this function returns. The anaylsis should be properly confirmed.\n-  return kImmovable;\n-}\n-\n-\n-void CEntryStub::GenerateAheadOfTime(Isolate* isolate) {\n-  CEntryStub stub(isolate, 1, kDontSaveFPRegs);\n-  stub.GetCode();\n-  CEntryStub stub_fp(isolate, 1, kSaveFPRegs);\n-  stub_fp.GetCode();\n-}\n-\n-\n-void CEntryStub::Generate(MacroAssembler* masm) {\n-  // The Abort mechanism relies on CallRuntime, which in turn relies on\n-  // CEntryStub, so until this stub has been generated, we have to use a\n-  // fall-back Abort mechanism.\n-  //\n-  // Note that this stub must be generated before any use of Abort.\n-  MacroAssembler::NoUseRealAbortsScope no_use_real_aborts(masm);\n-\n-  ASM_LOCATION(\"CEntryStub::Generate entry\");\n-  ProfileEntryHookStub::MaybeCallEntryHook(masm);\n-\n-  // Register parameters:\n-  //    x0: argc (including receiver, untagged)\n-  //    x1: target\n-  // If argv_in_register():\n-  //    x11: argv (pointer to first argument)\n-  //\n-  // The stack on entry holds the arguments and the receiver, with the receiver\n-  // at the highest address:\n-  //\n-  //    sp]argc-1]: receiver\n-  //    sp[argc-2]: arg[argc-2]\n-  //    ...           ...\n-  //    sp[1]:      arg[1]\n-  //    sp[0]:      arg[0]\n-  //\n-  // The arguments are in reverse order, so that arg[argc-2] is actually the\n-  // first argument to the target function and arg[0] is the last.\n-  const Register& argc_input = x0;\n-  const Register& target_input = x1;\n-\n-  // Calculate argv, argc and the target address, and store them in\n-  // callee-saved registers so we can retry the call without having to reload\n-  // these arguments.\n-  // TODO(jbramley): If the first call attempt succeeds in the common case (as\n-  // it should), then we might be better off putting these parameters directly\n-  // into their argument registers, rather than using callee-saved registers and\n-  // preserving them on the stack.\n-  const Register& argv = x21;\n-  const Register& argc = x22;\n-  const Register& target = x23;\n-\n-  // Derive argv from the stack pointer so that it points to the first argument\n-  // (arg[argc-2]), or just below the receiver in case there are no arguments.\n-  //  - Adjust for the arg[] array.\n-  Register temp_argv = x11;\n-  if (!argv_in_register()) {\n-    __ SlotAddress(temp_argv, x0);\n-    //  - Adjust for the receiver.\n-    __ Sub(temp_argv, temp_argv, 1 * kPointerSize);\n-  }\n-\n-  // Reserve three slots to preserve x21-x23 callee-saved registers.\n-  int extra_stack_space = 3;\n-  // Enter the exit frame.\n-  FrameScope scope(masm, StackFrame::MANUAL);\n-  __ EnterExitFrame(\n-      save_doubles(), x10, extra_stack_space,\n-      is_builtin_exit() ? StackFrame::BUILTIN_EXIT : StackFrame::EXIT);\n-\n-  // Poke callee-saved registers into reserved space.\n-  __ Poke(argv, 1 * kPointerSize);\n-  __ Poke(argc, 2 * kPointerSize);\n-  __ Poke(target, 3 * kPointerSize);\n-\n-  // We normally only keep tagged values in callee-saved registers, as they\n-  // could be pushed onto the stack by called stubs and functions, and on the\n-  // stack they can confuse the GC. However, we're only calling C functions\n-  // which can push arbitrary data onto the stack anyway, and so the GC won't\n-  // examine that part of the stack.\n-  __ Mov(argc, argc_input);\n-  __ Mov(target, target_input);\n-  __ Mov(argv, temp_argv);\n-\n-  // x21 : argv\n-  // x22 : argc\n-  // x23 : call target\n-  //\n-  // The stack (on entry) holds the arguments and the receiver, with the\n-  // receiver at the highest address:\n-  //\n-  //         argv[8]:     receiver\n-  // argv -> argv[0]:     arg[argc-2]\n-  //         ...          ...\n-  //         argv[...]:   arg[1]\n-  //         argv[...]:   arg[0]\n-  //\n-  // Immediately below (after) this is the exit frame, as constructed by\n-  // EnterExitFrame:\n-  //         fp[8]:    CallerPC (lr)\n-  //   fp -> fp[0]:    CallerFP (old fp)\n-  //         fp[-8]:   Space reserved for SPOffset.\n-  //         fp[-16]:  CodeObject()\n-  //         sp[...]:  Saved doubles, if saved_doubles is true.\n-  //         sp[32]:   Alignment padding, if necessary.\n-  //         sp[24]:   Preserved x23 (used for target).\n-  //         sp[16]:   Preserved x22 (used for argc).\n-  //         sp[8]:    Preserved x21 (used for argv).\n-  //   sp -> sp[0]:    Space reserved for the return address.\n-  //\n-  // After a successful call, the exit frame, preserved registers (x21-x23) and\n-  // the arguments (including the receiver) are dropped or popped as\n-  // appropriate. The stub then returns.\n-  //\n-  // After an unsuccessful call, the exit frame and suchlike are left\n-  // untouched, and the stub either throws an exception by jumping to one of\n-  // the exception_returned label.\n-\n-  // Prepare AAPCS64 arguments to pass to the builtin.\n-  __ Mov(x0, argc);\n-  __ Mov(x1, argv);\n-  __ Mov(x2, ExternalReference::isolate_address(isolate()));\n-\n-  Label return_location;\n-  __ Adr(x12, &return_location);\n-  __ Poke(x12, 0);\n-\n-  if (__ emit_debug_code()) {\n-    // Verify that the slot below fp[kSPOffset]-8 points to the return location\n-    // (currently in x12).\n-    UseScratchRegisterScope temps(masm);\n-    Register temp = temps.AcquireX();\n-    __ Ldr(temp, MemOperand(fp, ExitFrameConstants::kSPOffset));\n-    __ Ldr(temp, MemOperand(temp, -static_cast<int64_t>(kXRegSize)));\n-    __ Cmp(temp, x12);\n-    __ Check(eq, AbortReason::kReturnAddressNotFoundInFrame);\n-  }\n-\n-  // Call the builtin.\n-  __ Blr(target);\n-  __ Bind(&return_location);\n-\n-  // Result returned in x0 or x1:x0 - do not destroy these registers!\n-\n-  //  x0    result0      The return code from the call.\n-  //  x1    result1      For calls which return ObjectPair.\n-  //  x21   argv\n-  //  x22   argc\n-  //  x23   target\n-  const Register& result = x0;\n-\n-  // Check result for exception sentinel.\n-  Label exception_returned;\n-  __ CompareRoot(result, Heap::kExceptionRootIndex);\n-  __ B(eq, &exception_returned);\n-\n-  // The call succeeded, so unwind the stack and return.\n-\n-  // Restore callee-saved registers x21-x23.\n-  __ Mov(x11, argc);\n-\n-  __ Peek(argv, 1 * kPointerSize);\n-  __ Peek(argc, 2 * kPointerSize);\n-  __ Peek(target, 3 * kPointerSize);\n-\n-  __ LeaveExitFrame(save_doubles(), x10, x9);\n-  if (!argv_in_register()) {\n-    // Drop the remaining stack slots and return from the stub.\n-    __ DropArguments(x11);\n-  }\n-  __ AssertFPCRState();\n-  __ Ret();\n-\n-  // Handling of exception.\n-  __ Bind(&exception_returned);\n-\n-  ExternalReference pending_handler_context_address(\n-      IsolateAddressId::kPendingHandlerContextAddress, isolate());\n-  ExternalReference pending_handler_entrypoint_address(\n-      IsolateAddressId::kPendingHandlerEntrypointAddress, isolate());\n-  ExternalReference pending_handler_fp_address(\n-      IsolateAddressId::kPendingHandlerFPAddress, isolate());\n-  ExternalReference pending_handler_sp_address(\n-      IsolateAddressId::kPendingHandlerSPAddress, isolate());\n-\n-  // Ask the runtime for help to determine the handler. This will set x0 to\n-  // contain the current pending exception, don't clobber it.\n-  ExternalReference find_handler(Runtime::kUnwindAndFindExceptionHandler,\n-                                 isolate());\n-  {\n-    FrameScope scope(masm, StackFrame::MANUAL);\n-    __ Mov(x0, 0);  // argc.\n-    __ Mov(x1, 0);  // argv.\n-    __ Mov(x2, ExternalReference::isolate_address(isolate()));\n-    __ CallCFunction(find_handler, 3);\n-  }\n-\n-  // Retrieve the handler context, SP and FP.\n-  __ Mov(cp, Operand(pending_handler_context_address));\n-  __ Ldr(cp, MemOperand(cp));\n-  {\n-    UseScratchRegisterScope temps(masm);\n-    Register scratch = temps.AcquireX();\n-    __ Mov(scratch, Operand(pending_handler_sp_address));\n-    __ Ldr(scratch, MemOperand(scratch));\n-    __ Mov(sp, scratch);\n-  }\n-  __ Mov(fp, Operand(pending_handler_fp_address));\n-  __ Ldr(fp, MemOperand(fp));\n-\n-  // If the handler is a JS frame, restore the context to the frame. Note that\n-  // the context will be set to (cp == 0) for non-JS frames.\n-  Label not_js_frame;\n-  __ Cbz(cp, &not_js_frame);\n-  __ Str(cp, MemOperand(fp, StandardFrameConstants::kContextOffset));\n-  __ Bind(&not_js_frame);\n-\n-  // Reset the masking register. This is done independent of the underlying\n-  // feature flag {FLAG_branch_load_poisoning} to make the snapshot work with\n-  // both configurations. It is safe to always do this, because the underlying\n-  // register is caller-saved and can be arbitrarily clobbered.\n-  __ ResetSpeculationPoisonRegister();\n-\n-  // Compute the handler entry address and jump to it.\n-  __ Mov(x10, Operand(pending_handler_entrypoint_address));\n-  __ Ldr(x10, MemOperand(x10));\n-  __ Br(x10);\n-}\n-\n // This is the entry point from C++. 5 arguments are provided in x0-x4.\n // See use of the JSEntryFunction for example in src/execution.cc.\n // Input:\n@@ -478,30 +55,35 @@ void CEntryStub::Generate(MacroAssembler* masm) {\n // Output:\n //   x0: result.\n void JSEntryStub::Generate(MacroAssembler* masm) {\n+  Label invoke, handler_entry, exit;\n+\n   Register code_entry = x0;\n \n-  // Enable instruction instrumentation. This only works on the simulator, and\n-  // will have no effect on the model or real hardware.\n-  __ EnableInstrumentation();\n+  {\n+    NoRootArrayScope no_root_array(masm);\n \n-  Label invoke, handler_entry, exit;\n+    // Enable instruction instrumentation. This only works on the simulator, and\n+    // will have no effect on the model or real hardware.\n+    __ EnableInstrumentation();\n \n-  __ PushCalleeSavedRegisters();\n+    __ PushCalleeSavedRegisters();\n \n-  ProfileEntryHookStub::MaybeCallEntryHook(masm);\n+    ProfileEntryHookStub::MaybeCallEntryHook(masm);\n \n-  // Set up the reserved register for 0.0.\n-  __ Fmov(fp_zero, 0.0);\n+    // Set up the reserved register for 0.0.\n+    __ Fmov(fp_zero, 0.0);\n \n-  // Initialize the root array register\n-  __ InitializeRootRegister();\n+    // Initialize the root array register\n+    __ InitializeRootRegister();\n+  }\n \n   // Build an entry frame (see layout below).\n   StackFrame::Type marker = type();\n   int64_t bad_frame_pointer = -1L;  // Bad frame pointer to fail if it is used.\n   __ Mov(x13, bad_frame_pointer);\n   __ Mov(x12, StackFrame::TypeToMarker(marker));\n-  __ Mov(x11, ExternalReference(IsolateAddressId::kCEntryFPAddress, isolate()));\n+  __ Mov(x11, ExternalReference::Create(IsolateAddressId::kCEntryFPAddress,\n+                                        isolate()));\n   __ Ldr(x10, MemOperand(x11));\n \n   __ Push(x13, x12, xzr, x10);\n@@ -511,8 +93,9 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n   // Push the JS entry frame marker. Also set js_entry_sp if this is the\n   // outermost JS call.\n   Label non_outermost_js, done;\n-  ExternalReference js_entry_sp(IsolateAddressId::kJSEntrySPAddress, isolate());\n-  __ Mov(x10, ExternalReference(js_entry_sp));\n+  ExternalReference js_entry_sp =\n+      ExternalReference::Create(IsolateAddressId::kJSEntrySPAddress, isolate());\n+  __ Mov(x10, js_entry_sp);\n   __ Ldr(x11, MemOperand(x10));\n \n   // Select between the inner and outermost frame marker, based on the JS entry\n@@ -552,7 +135,7 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n     // field in the JSEnv and return a failure sentinel. Coming in here the\n     // fp will be invalid because the PushTryHandler below sets it to 0 to\n     // signal the existence of the JSEntry frame.\n-    __ Mov(x10, Operand(ExternalReference(\n+    __ Mov(x10, Operand(ExternalReference::Create(\n                     IsolateAddressId::kPendingExceptionAddress, isolate())));\n   }\n   __ Str(code_entry, MemOperand(x10));\n@@ -569,7 +152,8 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n                 \"Unexpected offset for StackHandlerConstants::kNextOffset\");\n \n   // Link the current handler as the next handler.\n-  __ Mov(x11, ExternalReference(IsolateAddressId::kHandlerAddress, isolate()));\n+  __ Mov(x11, ExternalReference::Create(IsolateAddressId::kHandlerAddress,\n+                                        isolate()));\n   __ Ldr(x10, MemOperand(x11));\n   __ Push(padreg, x10);\n \n@@ -602,7 +186,8 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n   static_assert(StackHandlerConstants::kNextOffset == 0 * kPointerSize,\n                 \"Unexpected offset for StackHandlerConstants::kNextOffset\");\n   __ Pop(x10, padreg);\n-  __ Mov(x11, ExternalReference(IsolateAddressId::kHandlerAddress, isolate()));\n+  __ Mov(x11, ExternalReference::Create(IsolateAddressId::kHandlerAddress,\n+                                        isolate()));\n   __ Drop(StackHandlerConstants::kSlotCount - 2);\n   __ Str(x10, MemOperand(x11));\n \n@@ -624,13 +209,13 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n     __ PeekPair(x10, c_entry_fp, 1 * kPointerSize);\n     __ Cmp(x10, StackFrame::OUTERMOST_JSENTRY_FRAME);\n     __ B(ne, &non_outermost_js_2);\n-    __ Mov(x12, ExternalReference(js_entry_sp));\n+    __ Mov(x12, js_entry_sp);\n     __ Str(xzr, MemOperand(x12));\n     __ Bind(&non_outermost_js_2);\n \n     // Restore the top frame descriptors from the stack.\n-    __ Mov(x12,\n-           ExternalReference(IsolateAddressId::kCEntryFPAddress, isolate()));\n+    __ Mov(x12, ExternalReference::Create(IsolateAddressId::kCEntryFPAddress,\n+                                          isolate()));\n     __ Str(c_entry_fp, MemOperand(x12));\n   }\n \n@@ -643,9 +228,9 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n   __ Ret();\n }\n \n-// The entry hook is a Push (stp) instruction, followed by a call.\n+// The entry hook is a Push (stp) instruction, followed by a near call.\n static const unsigned int kProfileEntryHookCallSize =\n-    (1 * kInstructionSize) + Assembler::kCallSizeWithRelocation;\n+    (1 * kInstructionSize) + Assembler::kNearCallSize;\n \n void ProfileEntryHookStub::MaybeCallEntryHookDelayed(TurboAssembler* tasm,\n                                                      Zone* zone) {\n@@ -700,9 +285,8 @@ void ProfileEntryHookStub::Generate(MacroAssembler* masm) {\n   // Under the simulator we need to indirect the entry hook through a trampoline\n   // function at a known address.\n   ApiFunction dispatcher(FUNCTION_ADDR(EntryHookTrampoline));\n-  __ Mov(x10, Operand(ExternalReference(&dispatcher,\n-                                        ExternalReference::BUILTIN_CALL,\n-                                        isolate())));\n+  __ Mov(x10, Operand(ExternalReference::Create(\n+                  &dispatcher, ExternalReference::BUILTIN_CALL)));\n   // It additionally takes an isolate as a third parameter\n   __ Mov(x2, ExternalReference::isolate_address(isolate()));\n #endif\n@@ -735,12 +319,9 @@ void DirectCEntryStub::Generate(MacroAssembler* masm) {\n \n void DirectCEntryStub::GenerateCall(MacroAssembler* masm,\n                                     Register target) {\n-  intptr_t code =\n-      reinterpret_cast<intptr_t>(GetCode().location());\n-  __ Mov(lr, Operand(code, RelocInfo::CODE_TARGET));\n-  __ Mov(x10, target);\n   // Branch to the stub.\n-  __ Blr(lr);\n+  __ Mov(x10, target);\n+  __ Call(GetCode(), RelocInfo::CODE_TARGET);\n }\n \n template<class T>\n@@ -967,7 +548,7 @@ void ArrayConstructorStub::Generate(MacroAssembler* masm) {\n   __ Poke(constructor, Operand(x0, LSL, kPointerSizeLog2));\n   __ Add(x0, x0, Operand(3));\n   __ Push(new_target, allocation_site);\n-  __ JumpToExternalReference(ExternalReference(Runtime::kNewArray, isolate()));\n+  __ JumpToExternalReference(ExternalReference::Create(Runtime::kNewArray));\n }\n \n \n@@ -1131,8 +712,7 @@ static void CallApiFunctionAndReturn(MacroAssembler* masm,\n     FrameScope frame(masm, StackFrame::MANUAL);\n     __ PushSafepointRegisters();\n     __ Mov(x0, ExternalReference::isolate_address(isolate));\n-    __ CallCFunction(ExternalReference::log_enter_external_function(isolate),\n-                     1);\n+    __ CallCFunction(ExternalReference::log_enter_external_function(), 1);\n     __ PopSafepointRegisters();\n   }\n \n@@ -1146,8 +726,7 @@ static void CallApiFunctionAndReturn(MacroAssembler* masm,\n     FrameScope frame(masm, StackFrame::MANUAL);\n     __ PushSafepointRegisters();\n     __ Mov(x0, ExternalReference::isolate_address(isolate));\n-    __ CallCFunction(ExternalReference::log_leave_external_function(isolate),\n-                     1);\n+    __ CallCFunction(ExternalReference::log_leave_external_function(), 1);\n     __ PopSafepointRegisters();\n   }\n \n@@ -1203,8 +782,7 @@ static void CallApiFunctionAndReturn(MacroAssembler* masm,\n   Register saved_result = x19;\n   __ Mov(saved_result, x0);\n   __ Mov(x0, ExternalReference::isolate_address(isolate));\n-  __ CallCFunction(ExternalReference::delete_handle_scope_extensions(isolate),\n-                   1);\n+  __ CallCFunction(ExternalReference::delete_handle_scope_extensions(), 1);\n   __ Mov(x0, saved_result);\n   __ B(&leave_exit_frame);\n }\n@@ -1275,8 +853,7 @@ void CallApiCallbackStub::Generate(MacroAssembler* masm) {\n   __ Mov(x10, argc());\n   __ Str(x10, MemOperand(x0, 2 * kPointerSize));\n \n-  ExternalReference thunk_ref =\n-      ExternalReference::invoke_function_callback(masm->isolate());\n+  ExternalReference thunk_ref = ExternalReference::invoke_function_callback();\n \n   AllowExternalCallThatCantCauseGC scope(masm);\n   // Stores return the first js argument\n@@ -1354,7 +931,7 @@ void CallApiGetterStub::Generate(MacroAssembler* masm) {\n   // x1 = v8::PropertyCallbackInfo&\n \n   ExternalReference thunk_ref =\n-      ExternalReference::invoke_accessor_getter_callback(isolate());\n+      ExternalReference::invoke_accessor_getter_callback();\n \n   Register api_function_address = x2;\n   Register js_getter = x4;"
        },
        {
            "sha": "397f4cb36d4595b0673484bce828ee4b7a990106",
            "filename": "deps/v8/src/arm64/deoptimizer-arm64.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fdeoptimizer-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fdeoptimizer-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fdeoptimizer-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -115,8 +115,8 @@ void Deoptimizer::TableEntryGenerator::Generate() {\n   DCHECK_EQ(saved_registers.Count() % 2, 0);\n   __ PushCPURegList(saved_registers);\n \n-  __ Mov(x3, Operand(ExternalReference(IsolateAddressId::kCEntryFPAddress,\n-                                       isolate())));\n+  __ Mov(x3, Operand(ExternalReference::Create(\n+                 IsolateAddressId::kCEntryFPAddress, isolate())));\n   __ Str(fp, MemOperand(x3));\n \n   const int kSavedRegistersAreaSize =\n@@ -165,7 +165,7 @@ void Deoptimizer::TableEntryGenerator::Generate() {\n   {\n     // Call Deoptimizer::New().\n     AllowExternalCallThatCantCauseGC scope(masm());\n-    __ CallCFunction(ExternalReference::new_deoptimizer_function(isolate()), 6);\n+    __ CallCFunction(ExternalReference::new_deoptimizer_function(), 6);\n   }\n \n   // Preserve \"deoptimizer\" object in register x0.\n@@ -212,8 +212,7 @@ void Deoptimizer::TableEntryGenerator::Generate() {\n   {\n     // Call Deoptimizer::ComputeOutputFrames().\n     AllowExternalCallThatCantCauseGC scope(masm());\n-    __ CallCFunction(\n-        ExternalReference::compute_output_frames_function(isolate()), 1);\n+    __ CallCFunction(ExternalReference::compute_output_frames_function(), 1);\n   }\n   __ Pop(x4, padreg);  // Restore deoptimizer object (class Deoptimizer).\n "
        },
        {
            "sha": "b1c488eb65407ed9747e847bec92406ff450d0e0",
            "filename": "deps/v8/src/arm64/instructions-arm64.h",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -354,6 +354,12 @@ class Instruction {\n     return (high16 << 16) | low16;\n   }\n \n+  bool IsUnconditionalBranch() const {\n+    return Mask(UnconditionalBranchMask) == B;\n+  }\n+\n+  bool IsBranchAndLink() const { return Mask(UnconditionalBranchMask) == BL; }\n+\n   bool IsBranchAndLinkToRegister() const {\n     return Mask(UnconditionalBranchToRegisterMask) == BLR;\n   }"
        },
        {
            "sha": "89c7b98f51152a872c76d376d35bd4a929fdbe9e",
            "filename": "deps/v8/src/arm64/interface-descriptors-arm64.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -34,7 +34,7 @@ void RecordWriteDescriptor::InitializePlatformSpecific(\n   data->InitializePlatformSpecific(kParameterCount, default_stub_registers);\n }\n \n-const Register FastNewFunctionContextDescriptor::FunctionRegister() {\n+const Register FastNewFunctionContextDescriptor::ScopeInfoRegister() {\n   return x1;\n }\n const Register FastNewFunctionContextDescriptor::SlotsRegister() { return x0; }\n@@ -260,14 +260,6 @@ void BinaryOpDescriptor::InitializePlatformSpecific(\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n-void StringAddDescriptor::InitializePlatformSpecific(\n-    CallInterfaceDescriptorData* data) {\n-  // x1: left operand\n-  // x0: right operand\n-  Register registers[] = {x1, x0};\n-  data->InitializePlatformSpecific(arraysize(registers), registers);\n-}\n-\n void ArgumentAdaptorDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   static PlatformInterfaceDescriptor default_descriptor ="
        },
        {
            "sha": "20533362bc7927f753263cfca09744d79c67f809",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64-inl.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64-inl.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -1039,7 +1039,7 @@ void TurboAssembler::Uxtw(const Register& rd, const Register& rn) {\n void TurboAssembler::InitializeRootRegister() {\n   ExternalReference roots_array_start =\n       ExternalReference::roots_array_start(isolate());\n-  Mov(root, Operand(roots_array_start));\n+  Mov(kRootRegister, Operand(roots_array_start));\n }\n \n "
        },
        {
            "sha": "784ffbb27511239731e8d1e7bfa54925cb64c650",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64.cc",
            "status": "modified",
            "additions": 239,
            "deletions": 104,
            "changes": 343,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -8,7 +8,9 @@\n #include \"src/base/bits.h\"\n #include \"src/base/division-by-constant.h\"\n #include \"src/bootstrapper.h\"\n+#include \"src/builtins/constants-table-builder.h\"\n #include \"src/callable.h\"\n+#include \"src/code-factory.h\"\n #include \"src/code-stubs.h\"\n #include \"src/debug/debug.h\"\n #include \"src/external-reference-table.h\"\n@@ -18,6 +20,7 @@\n #include \"src/instruction-stream.h\"\n #include \"src/register-configuration.h\"\n #include \"src/runtime/runtime.h\"\n+#include \"src/snapshot/serializer-common.h\"\n \n #include \"src/arm64/macro-assembler-arm64-inl.h\"\n #include \"src/arm64/macro-assembler-arm64.h\"  // Cannot be the first include\n@@ -28,7 +31,17 @@ namespace internal {\n MacroAssembler::MacroAssembler(Isolate* isolate, byte* buffer,\n                                unsigned buffer_size,\n                                CodeObjectRequired create_code_object)\n-    : TurboAssembler(isolate, buffer, buffer_size, create_code_object) {}\n+    : TurboAssembler(isolate, buffer, buffer_size, create_code_object) {\n+  if (create_code_object == CodeObjectRequired::kYes) {\n+    // Unlike TurboAssembler, which can be used off the main thread and may not\n+    // allocate, macro assembler creates its own copy of the self-reference\n+    // marker in order to disambiguate between self-references during nested\n+    // code generation (e.g.: codegen of the current object triggers stub\n+    // compilation through CodeStub::GetCode()).\n+    code_object_ = Handle<HeapObject>::New(\n+        *isolate->factory()->NewSelfReferenceMarker(), isolate);\n+  }\n+}\n \n CPURegList TurboAssembler::DefaultTmpList() { return CPURegList(ip0, ip1); }\n \n@@ -47,8 +60,8 @@ TurboAssembler::TurboAssembler(Isolate* isolate, void* buffer, int buffer_size,\n       fptmp_list_(DefaultFPTmpList()),\n       use_real_aborts_(true) {\n   if (create_code_object == CodeObjectRequired::kYes) {\n-    code_object_ =\n-        Handle<HeapObject>::New(isolate->heap()->undefined_value(), isolate);\n+    code_object_ = Handle<HeapObject>::New(\n+        isolate->heap()->self_reference_marker(), isolate);\n   }\n }\n \n@@ -310,7 +323,6 @@ void TurboAssembler::Mov(const Register& rd, const Operand& operand,\n \n   if (operand.NeedsRelocation(this)) {\n     Ldr(dst, operand);\n-\n   } else if (operand.IsImmediate()) {\n     // Call the macro assembler for generic immediates.\n     Mov(dst, operand.ImmediateValue());\n@@ -352,6 +364,16 @@ void TurboAssembler::Mov(const Register& rd, const Operand& operand,\n   }\n }\n \n+void TurboAssembler::Mov(const Register& rd, ExternalReference reference) {\n+#ifdef V8_EMBEDDED_BUILTINS\n+  if (root_array_available_ && isolate()->ShouldLoadConstantsFromRootList()) {\n+    LookupExternalReference(rd, reference);\n+    return;\n+  }\n+#endif  // V8_EMBEDDED_BUILTINS\n+  Mov(rd, Operand(reference));\n+}\n+\n void TurboAssembler::Movi16bitHelper(const VRegister& vd, uint64_t imm) {\n   DCHECK(is_uint16(imm));\n   int byte1 = (imm & 0xFF);\n@@ -1355,8 +1377,7 @@ void TurboAssembler::Poke(const CPURegister& src, const Operand& offset) {\n   Str(src, MemOperand(sp, offset));\n }\n \n-\n-void MacroAssembler::Peek(const CPURegister& dst, const Operand& offset) {\n+void TurboAssembler::Peek(const CPURegister& dst, const Operand& offset) {\n   if (offset.IsImmediate()) {\n     DCHECK_GE(offset.ImmediateValue(), 0);\n   } else if (emit_debug_code()) {\n@@ -1552,7 +1573,7 @@ void TurboAssembler::LoadRoot(CPURegister destination,\n                               Heap::RootListIndex index) {\n   // TODO(jbramley): Most root values are constants, and can be synthesized\n   // without a load. Refer to the ARM back end for details.\n-  Ldr(destination, MemOperand(root, index << kPointerSizeLog2));\n+  Ldr(destination, MemOperand(kRootRegister, index << kPointerSizeLog2));\n }\n \n \n@@ -1566,7 +1587,17 @@ void MacroAssembler::LoadObject(Register result, Handle<Object> object) {\n }\n \n void TurboAssembler::Move(Register dst, Register src) { Mov(dst, src); }\n-void TurboAssembler::Move(Register dst, Handle<HeapObject> x) { Mov(dst, x); }\n+\n+void TurboAssembler::Move(Register dst, Handle<HeapObject> x) {\n+#ifdef V8_EMBEDDED_BUILTINS\n+  if (root_array_available_ && isolate()->ShouldLoadConstantsFromRootList()) {\n+    LookupConstant(dst, x);\n+    return;\n+  }\n+#endif  // V8_EMBEDDED_BUILTINS\n+  Mov(dst, x);\n+}\n+\n void TurboAssembler::Move(Register dst, Smi* src) { Mov(dst, src); }\n \n void TurboAssembler::Swap(Register lhs, Register rhs) {\n@@ -1718,12 +1749,10 @@ void TurboAssembler::CallStubDelayed(CodeStub* stub) {\n   Label start_call;\n   Bind(&start_call);\n #endif\n-  UseScratchRegisterScope temps(this);\n-  Register temp = temps.AcquireX();\n-  Ldr(temp, Operand::EmbeddedCode(stub));\n-  Blr(temp);\n+  Operand operand = Operand::EmbeddedCode(stub);\n+  near_call(operand.heap_object_request());\n #ifdef DEBUG\n-  AssertSizeOfCodeGeneratedSince(&start_call, kCallSizeWithRelocation);\n+  AssertSizeOfCodeGeneratedSince(&start_call, kNearCallSize);\n #endif\n }\n \n@@ -1744,8 +1773,10 @@ void TurboAssembler::CallRuntimeDelayed(Zone* zone, Runtime::FunctionId fid,\n   // should remove this need and make the runtime routine entry code\n   // smarter.\n   Mov(x0, f->nargs);\n-  Mov(x1, ExternalReference(f, isolate()));\n-  CallStubDelayed(new (zone) CEntryStub(nullptr, 1, save_doubles));\n+  Mov(x1, ExternalReference::Create(f));\n+  Handle<Code> code =\n+      CodeFactory::CEntry(isolate(), f->result_size, save_doubles);\n+  Call(code, RelocInfo::CODE_TARGET);\n }\n \n void MacroAssembler::CallRuntime(const Runtime::Function* f,\n@@ -1760,23 +1791,23 @@ void MacroAssembler::CallRuntime(const Runtime::Function* f,\n \n   // Place the necessary arguments.\n   Mov(x0, num_arguments);\n-  Mov(x1, ExternalReference(f, isolate()));\n+  Mov(x1, ExternalReference::Create(f));\n \n-  CEntryStub stub(isolate(), 1, save_doubles);\n-  CallStub(&stub);\n+  Handle<Code> code =\n+      CodeFactory::CEntry(isolate(), f->result_size, save_doubles);\n+  Call(code, RelocInfo::CODE_TARGET);\n }\n \n void MacroAssembler::JumpToExternalReference(const ExternalReference& builtin,\n                                              bool builtin_exit_frame) {\n   Mov(x1, builtin);\n-  CEntryStub stub(isolate(), 1, kDontSaveFPRegs, kArgvOnStack,\n-                  builtin_exit_frame);\n-  Jump(stub.GetCode(), RelocInfo::CODE_TARGET);\n+  Handle<Code> code = CodeFactory::CEntry(isolate(), 1, kDontSaveFPRegs,\n+                                          kArgvOnStack, builtin_exit_frame);\n+  Jump(code, RelocInfo::CODE_TARGET);\n }\n \n void MacroAssembler::JumpToInstructionStream(Address entry) {\n-  Mov(kOffHeapTrampolineRegister,\n-      Operand(reinterpret_cast<uint64_t>(entry), RelocInfo::OFF_HEAP_TARGET));\n+  Mov(kOffHeapTrampolineRegister, Operand(entry, RelocInfo::OFF_HEAP_TARGET));\n   Br(kOffHeapTrampolineRegister);\n }\n \n@@ -1790,7 +1821,7 @@ void MacroAssembler::TailCallRuntime(Runtime::FunctionId fid) {\n     // smarter.\n     Mov(x0, function->nargs);\n   }\n-  JumpToExternalReference(ExternalReference(fid, isolate()));\n+  JumpToExternalReference(ExternalReference::Create(fid));\n }\n \n int TurboAssembler::ActivationFrameAlignment() {\n@@ -1852,30 +1883,124 @@ void TurboAssembler::CallCFunction(Register function, int num_of_reg_args,\n   }\n }\n \n-void TurboAssembler::Jump(Register target) { Br(target); }\n+#ifdef V8_EMBEDDED_BUILTINS\n+void TurboAssembler::LookupConstant(Register destination,\n+                                    Handle<Object> object) {\n+  CHECK(isolate()->ShouldLoadConstantsFromRootList());\n+  CHECK(root_array_available_);\n \n-void TurboAssembler::Jump(intptr_t target, RelocInfo::Mode rmode,\n-                          Condition cond) {\n+  // Ensure the given object is in the builtins constants table and fetch its\n+  // index.\n+  BuiltinsConstantsTableBuilder* builder =\n+      isolate()->builtins_constants_table_builder();\n+  uint32_t index = builder->AddObject(object);\n+\n+  // TODO(jgruber): Load builtins from the builtins table.\n+  // TODO(jgruber): Ensure that code generation can recognize constant targets\n+  // in kArchCallCodeObject.\n+\n+  DCHECK(isolate()->heap()->RootCanBeTreatedAsConstant(\n+      Heap::kBuiltinsConstantsTableRootIndex));\n+\n+  LoadRoot(destination, Heap::kBuiltinsConstantsTableRootIndex);\n+  Ldr(destination, FieldMemOperand(destination, FixedArray::kHeaderSize +\n+                                                    index * kPointerSize));\n+}\n+\n+void TurboAssembler::LookupExternalReference(Register destination,\n+                                             ExternalReference reference) {\n+  CHECK(reference.address() !=\n+        ExternalReference::roots_array_start(isolate()).address());\n+  CHECK(isolate()->ShouldLoadConstantsFromRootList());\n+  CHECK(root_array_available_);\n+\n+  // Encode as an index into the external reference table stored on the isolate.\n+\n+  ExternalReferenceEncoder encoder(isolate());\n+  ExternalReferenceEncoder::Value v = encoder.Encode(reference.address());\n+  CHECK(!v.is_from_api());\n+  uint32_t index = v.index();\n+\n+  // Generate code to load from the external reference table.\n+\n+  int32_t roots_to_external_reference_offset =\n+      Heap::roots_to_external_reference_table_offset() +\n+      ExternalReferenceTable::OffsetOfEntry(index);\n+\n+  Ldr(destination,\n+      MemOperand(kRootRegister, roots_to_external_reference_offset));\n+}\n+#endif  // V8_EMBEDDED_BUILTINS\n+\n+void TurboAssembler::Jump(Register target, Condition cond) {\n+  if (cond == nv) return;\n+  Label done;\n+  if (cond != al) B(NegateCondition(cond), &done);\n+  Br(target);\n+  Bind(&done);\n+}\n+\n+void TurboAssembler::JumpHelper(int64_t offset, RelocInfo::Mode rmode,\n+                                Condition cond) {\n   if (cond == nv) return;\n-  UseScratchRegisterScope temps(this);\n-  Register temp = temps.AcquireX();\n   Label done;\n   if (cond != al) B(NegateCondition(cond), &done);\n-  Mov(temp, Operand(target, rmode));\n-  Br(temp);\n+  if (CanUseNearCallOrJump(rmode)) {\n+    DCHECK(IsNearCallOffset(offset));\n+    near_jump(static_cast<int>(offset), rmode);\n+  } else {\n+    UseScratchRegisterScope temps(this);\n+    Register temp = temps.AcquireX();\n+    uint64_t imm = reinterpret_cast<uint64_t>(pc_) + offset * kInstructionSize;\n+    Mov(temp, Immediate(imm, rmode));\n+    Br(temp);\n+  }\n   Bind(&done);\n }\n \n+namespace {\n+\n+// The calculated offset is either:\n+// * the 'target' input unmodified if this is a WASM call, or\n+// * the offset of the target from the current PC, in instructions, for any\n+//   other type of call.\n+static int64_t CalculateTargetOffset(Address target, RelocInfo::Mode rmode,\n+                                     byte* pc) {\n+  int64_t offset = static_cast<int64_t>(target);\n+  // The target of WebAssembly calls is still an index instead of an actual\n+  // address at this point, and needs to be encoded as-is.\n+  if (rmode != RelocInfo::WASM_CALL) {\n+    offset -= reinterpret_cast<int64_t>(pc);\n+    DCHECK_EQ(offset % kInstructionSize, 0);\n+    offset = offset / static_cast<int>(kInstructionSize);\n+  }\n+  return offset;\n+}\n+}  // namespace\n+\n void TurboAssembler::Jump(Address target, RelocInfo::Mode rmode,\n                           Condition cond) {\n-  DCHECK(!RelocInfo::IsCodeTarget(rmode));\n-  Jump(reinterpret_cast<intptr_t>(target), rmode, cond);\n+  JumpHelper(CalculateTargetOffset(target, rmode, pc_), rmode, cond);\n }\n \n void TurboAssembler::Jump(Handle<Code> code, RelocInfo::Mode rmode,\n                           Condition cond) {\n   DCHECK(RelocInfo::IsCodeTarget(rmode));\n-  Jump(reinterpret_cast<intptr_t>(code.address()), rmode, cond);\n+#ifdef V8_EMBEDDED_BUILTINS\n+  if (root_array_available_ && isolate()->ShouldLoadConstantsFromRootList()) {\n+    UseScratchRegisterScope temps(this);\n+    Register scratch = temps.AcquireX();\n+    LookupConstant(scratch, code);\n+    Add(scratch, scratch, Operand(Code::kHeaderSize - kHeapObjectTag));\n+    Jump(scratch, cond);\n+    return;\n+  }\n+#endif  // V8_EMBEDDED_BUILTINS\n+  if (CanUseNearCallOrJump(rmode)) {\n+    JumpHelper(static_cast<int64_t>(GetCodeTargetIndex(code)), rmode, cond);\n+  } else {\n+    Jump(code.address(), rmode, cond);\n+  }\n }\n \n void TurboAssembler::Call(Register target) {\n@@ -1892,20 +2017,6 @@ void TurboAssembler::Call(Register target) {\n #endif\n }\n \n-void TurboAssembler::Call(Label* target) {\n-  BlockPoolsScope scope(this);\n-#ifdef DEBUG\n-  Label start_call;\n-  Bind(&start_call);\n-#endif\n-\n-  Bl(target);\n-\n-#ifdef DEBUG\n-  AssertSizeOfCodeGeneratedSince(&start_call, CallSize(target));\n-#endif\n-}\n-\n // TurboAssembler::CallSize is sensitive to changes in this function, as it\n // requires to know how many instructions are used to branch to the target.\n void TurboAssembler::Call(Address target, RelocInfo::Mode rmode) {\n@@ -1915,33 +2026,40 @@ void TurboAssembler::Call(Address target, RelocInfo::Mode rmode) {\n   Bind(&start_call);\n #endif\n \n-  UseScratchRegisterScope temps(this);\n-  Register temp = temps.AcquireX();\n-\n-  if (RelocInfo::IsNone(rmode)) {\n-    // Addresses are 48 bits so we never need to load the upper 16 bits.\n-    uint64_t imm = reinterpret_cast<uint64_t>(target);\n-    // If we don't use ARM tagged addresses, the 16 higher bits must be 0.\n-    DCHECK_EQ((imm >> 48) & 0xFFFF, 0);\n-    movz(temp, (imm >> 0) & 0xFFFF, 0);\n-    movk(temp, (imm >> 16) & 0xFFFF, 16);\n-    movk(temp, (imm >> 32) & 0xFFFF, 32);\n+  if (CanUseNearCallOrJump(rmode)) {\n+    int64_t offset = CalculateTargetOffset(target, rmode, pc_);\n+    DCHECK(IsNearCallOffset(offset));\n+    near_call(static_cast<int>(offset), rmode);\n   } else {\n-    Ldr(temp, Immediate(reinterpret_cast<intptr_t>(target), rmode));\n+    IndirectCall(target, rmode);\n   }\n-  Blr(temp);\n #ifdef DEBUG\n   AssertSizeOfCodeGeneratedSince(&start_call, CallSize(target, rmode));\n #endif\n }\n \n void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode) {\n+  BlockPoolsScope scope(this);\n #ifdef DEBUG\n   Label start_call;\n   Bind(&start_call);\n #endif\n \n-  Call(code.address(), rmode);\n+#ifdef V8_EMBEDDED_BUILTINS\n+  if (root_array_available_ && isolate()->ShouldLoadConstantsFromRootList()) {\n+    UseScratchRegisterScope temps(this);\n+    Register scratch = temps.AcquireX();\n+    LookupConstant(scratch, code);\n+    Add(scratch, scratch, Operand(Code::kHeaderSize - kHeapObjectTag));\n+    Call(scratch);\n+    return;\n+  }\n+#endif  // V8_EMBEDDED_BUILTINS\n+  if (CanUseNearCallOrJump(rmode)) {\n+    near_call(GetCodeTargetIndex(code), rmode);\n+  } else {\n+    IndirectCall(code.address(), rmode);\n+  }\n \n #ifdef DEBUG\n   // Check the size of the code generated.\n@@ -1954,10 +2072,21 @@ void TurboAssembler::Call(ExternalReference target) {\n   Register temp = temps.AcquireX();\n   // Immediate is in charge of setting the relocation mode to\n   // EXTERNAL_REFERENCE.\n-  Ldr(temp, Immediate(target));\n+  Mov(temp, Immediate(target));\n   Call(temp);\n }\n \n+void TurboAssembler::IndirectCall(Address target, RelocInfo::Mode rmode) {\n+  UseScratchRegisterScope temps(this);\n+  Register temp = temps.AcquireX();\n+  Mov(temp, Immediate(target, rmode));\n+  Blr(temp);\n+}\n+\n+bool TurboAssembler::IsNearCallOffset(int64_t offset) {\n+  return is_int26(offset);\n+}\n+\n void TurboAssembler::CallForDeoptimization(Address target,\n                                            RelocInfo::Mode rmode) {\n   DCHECK_EQ(rmode, RelocInfo::RUNTIME_ENTRY);\n@@ -1972,12 +2101,20 @@ void TurboAssembler::CallForDeoptimization(Address target,\n \n   // Deoptimisation table entries require the call address to be in x16, in\n   // order to compute the entry id.\n+  // TODO(all): Put the entry id back in the table now that we are using\n+  // a direct branch for the call and do not need to set up x16.\n   DCHECK(temp.Is(x16));\n-  Ldr(temp, Immediate(reinterpret_cast<intptr_t>(target), rmode));\n-  Blr(temp);\n+  Mov(temp, Immediate(target, rmode));\n+\n+  int64_t offset = static_cast<int64_t>(target) -\n+                   static_cast<int64_t>(isolate_data().code_range_start_);\n+  DCHECK_EQ(offset % kInstructionSize, 0);\n+  offset = offset / static_cast<int>(kInstructionSize);\n+  DCHECK(IsNearCallOffset(offset));\n+  near_call(static_cast<int>(offset), rmode);\n \n #ifdef DEBUG\n-  AssertSizeOfCodeGeneratedSince(&start_call, CallSize(target, rmode));\n+  AssertSizeOfCodeGeneratedSince(&start_call, kNearCallSize + kInstructionSize);\n #endif\n }\n \n@@ -1986,23 +2123,14 @@ int TurboAssembler::CallSize(Register target) {\n   return kInstructionSize;\n }\n \n-int TurboAssembler::CallSize(Label* target) {\n-  USE(target);\n-  return kInstructionSize;\n-}\n-\n int TurboAssembler::CallSize(Address target, RelocInfo::Mode rmode) {\n   USE(target);\n-\n-  return RelocInfo::IsNone(rmode) ? kCallSizeWithoutRelocation\n-                                  : kCallSizeWithRelocation;\n+  return CanUseNearCallOrJump(rmode) ? kNearCallSize : kFarCallSize;\n }\n \n int TurboAssembler::CallSize(Handle<Code> code, RelocInfo::Mode rmode) {\n   USE(code);\n-\n-  return RelocInfo::IsNone(rmode) ? kCallSizeWithoutRelocation\n-                                  : kCallSizeWithRelocation;\n+  return CanUseNearCallOrJump(rmode) ? kNearCallSize : kFarCallSize;\n }\n \n void MacroAssembler::TryRepresentDoubleAsInt(Register as_int, VRegister value,\n@@ -2161,13 +2289,16 @@ void MacroAssembler::CheckDebugHook(Register fun, Register new_target,\n                                     const ParameterCount& actual) {\n   Label skip_hook;\n \n-  ExternalReference debug_hook_active =\n-      ExternalReference::debug_hook_on_function_call_address(isolate());\n-  Mov(x4, Operand(debug_hook_active));\n+  Mov(x4, ExternalReference::debug_hook_on_function_call_address(isolate()));\n   Ldrsb(x4, MemOperand(x4));\n   Cbz(x4, &skip_hook);\n \n   {\n+    // Load receiver to pass it later to DebugOnFunctionCall hook.\n+    Operand actual_op = actual.is_immediate() ? Operand(actual.immediate())\n+                                              : Operand(actual.reg());\n+    Mov(x4, actual_op);\n+    Ldr(x4, MemOperand(sp, x4, LSL, kPointerSizeLog2));\n     FrameScope frame(this,\n                      has_frame() ? StackFrame::NONE : StackFrame::INTERNAL);\n \n@@ -2181,8 +2312,7 @@ void MacroAssembler::CheckDebugHook(Register fun, Register new_target,\n     SmiTag(expected_reg);\n     SmiTag(actual_reg);\n     Push(expected_reg, actual_reg, new_target, fun);\n-\n-    PushArgument(fun);\n+    Push(fun, x4);\n     CallRuntime(Runtime::kDebugOnFunctionCall);\n \n     // Restore values from stack.\n@@ -2304,8 +2434,9 @@ void TurboAssembler::TryConvertDoubleToInt64(Register result,\n   B(vc, done);\n }\n \n-void TurboAssembler::TruncateDoubleToIDelayed(Zone* zone, Register result,\n-                                              DoubleRegister double_input) {\n+void TurboAssembler::TruncateDoubleToI(Isolate* isolate, Zone* zone,\n+                                       Register result,\n+                                       DoubleRegister double_input) {\n   Label done;\n \n   // Try to convert the double to an int64. If successful, the bottom 32 bits\n@@ -2315,9 +2446,9 @@ void TurboAssembler::TruncateDoubleToIDelayed(Zone* zone, Register result,\n   // If we fell through then inline version didn't succeed - call stub instead.\n   Push(lr, double_input);\n \n-  auto stub = new (zone) DoubleToIStub(nullptr, result);\n-  // DoubleToIStub preserves any registers it needs to clobber.\n-  CallStubDelayed(stub);\n+  // DoubleToI preserves any registers it needs to clobber.\n+  Call(BUILTIN_CODE(isolate, DoubleToI), RelocInfo::CODE_TARGET);\n+  Ldr(result, MemOperand(sp, 0));\n \n   DCHECK_EQ(xzr.SizeInBytes(), double_input.SizeInBytes());\n   Pop(xzr, lr);  // xzr to drop the double input on the stack.\n@@ -2334,19 +2465,20 @@ void TurboAssembler::Prologue() {\n \n void TurboAssembler::EnterFrame(StackFrame::Type type) {\n   UseScratchRegisterScope temps(this);\n-  Register type_reg = temps.AcquireX();\n-  Register code_reg = temps.AcquireX();\n \n   if (type == StackFrame::INTERNAL) {\n+    Register code_reg = temps.AcquireX();\n+    Move(code_reg, CodeObject());\n+    Register type_reg = temps.AcquireX();\n     Mov(type_reg, StackFrame::TypeToMarker(type));\n-    Mov(code_reg, Operand(CodeObject()));\n     Push(lr, fp, type_reg, code_reg);\n     Add(fp, sp, InternalFrameConstants::kFixedFrameSizeFromFp);\n     // sp[4] : lr\n     // sp[3] : fp\n     // sp[1] : type\n     // sp[0] : [code object]\n   } else if (type == StackFrame::WASM_COMPILED) {\n+    Register type_reg = temps.AcquireX();\n     Mov(type_reg, StackFrame::TypeToMarker(type));\n     Push(lr, fp);\n     Mov(fp, sp);\n@@ -2357,6 +2489,7 @@ void TurboAssembler::EnterFrame(StackFrame::Type type) {\n     // sp[0] : for alignment\n   } else {\n     DCHECK_EQ(type, StackFrame::CONSTRUCT);\n+    Register type_reg = temps.AcquireX();\n     Mov(type_reg, StackFrame::TypeToMarker(type));\n \n     // Users of this frame type push a context pointer after the type field,\n@@ -2418,7 +2551,7 @@ void MacroAssembler::EnterExitFrame(bool save_doubles, const Register& scratch,\n   Mov(fp, sp);\n   Mov(scratch, StackFrame::TypeToMarker(frame_type));\n   Push(scratch, xzr);\n-  Mov(scratch, Operand(CodeObject()));\n+  Move(scratch, CodeObject());\n   Push(scratch, padreg);\n   //          fp[8]: CallerPC (lr)\n   //    fp -> fp[0]: CallerFP (old fp)\n@@ -2434,11 +2567,11 @@ void MacroAssembler::EnterExitFrame(bool save_doubles, const Register& scratch,\n   STATIC_ASSERT((-4 * kPointerSize) == ExitFrameConstants::kPaddingOffset);\n \n   // Save the frame pointer and context pointer in the top frame.\n-  Mov(scratch, Operand(ExternalReference(IsolateAddressId::kCEntryFPAddress,\n-                                         isolate())));\n+  Mov(scratch,\n+      ExternalReference::Create(IsolateAddressId::kCEntryFPAddress, isolate()));\n   Str(fp, MemOperand(scratch));\n   Mov(scratch,\n-      Operand(ExternalReference(IsolateAddressId::kContextAddress, isolate())));\n+      ExternalReference::Create(IsolateAddressId::kContextAddress, isolate()));\n   Str(cp, MemOperand(scratch));\n \n   STATIC_ASSERT((-4 * kPointerSize) == ExitFrameConstants::kLastExitFrameField);\n@@ -2481,19 +2614,19 @@ void MacroAssembler::LeaveExitFrame(bool restore_doubles,\n \n   // Restore the context pointer from the top frame.\n   Mov(scratch,\n-      Operand(ExternalReference(IsolateAddressId::kContextAddress, isolate())));\n+      ExternalReference::Create(IsolateAddressId::kContextAddress, isolate()));\n   Ldr(cp, MemOperand(scratch));\n \n   if (emit_debug_code()) {\n     // Also emit debug code to clear the cp in the top frame.\n     Mov(scratch2, Operand(Context::kInvalidContext));\n-    Mov(scratch, Operand(ExternalReference(IsolateAddressId::kContextAddress,\n-                                           isolate())));\n+    Mov(scratch, ExternalReference::Create(IsolateAddressId::kContextAddress,\n+                                           isolate()));\n     Str(scratch2, MemOperand(scratch));\n   }\n   // Clear the frame pointer from the top frame.\n-  Mov(scratch, Operand(ExternalReference(IsolateAddressId::kCEntryFPAddress,\n-                                         isolate())));\n+  Mov(scratch,\n+      ExternalReference::Create(IsolateAddressId::kCEntryFPAddress, isolate()));\n   Str(xzr, MemOperand(scratch));\n \n   // Pop the exit frame.\n@@ -2515,7 +2648,7 @@ void MacroAssembler::IncrementCounter(StatsCounter* counter, int value,\n                                       Register scratch1, Register scratch2) {\n   DCHECK_NE(value, 0);\n   if (FLAG_native_code_counters && counter->Enabled()) {\n-    Mov(scratch2, ExternalReference(counter));\n+    Mov(scratch2, ExternalReference::Create(counter));\n     Ldr(scratch1.W(), MemOperand(scratch2));\n     Add(scratch1.W(), scratch1.W(), value);\n     Str(scratch1.W(), MemOperand(scratch2));\n@@ -2530,9 +2663,7 @@ void MacroAssembler::DecrementCounter(StatsCounter* counter, int value,\n \n void MacroAssembler::MaybeDropFrames() {\n   // Check whether we need to drop frames to restart a function on the stack.\n-  ExternalReference restart_fp =\n-      ExternalReference::debug_restart_fp_address(isolate());\n-  Mov(x1, Operand(restart_fp));\n+  Mov(x1, ExternalReference::debug_restart_fp_address(isolate()));\n   Ldr(x1, MemOperand(x1));\n   Tst(x1, x1);\n   Jump(BUILTIN_CODE(isolate(), FrameDropperTrampoline), RelocInfo::CODE_TARGET,\n@@ -2890,6 +3021,10 @@ void TurboAssembler::Assert(Condition cond, AbortReason reason) {\n   }\n }\n \n+void TurboAssembler::AssertUnreachable(AbortReason reason) {\n+  if (emit_debug_code()) Abort(reason);\n+}\n+\n void MacroAssembler::AssertRegisterIsRoot(Register reg,\n                                           Heap::RootListIndex index,\n                                           AbortReason reason) {\n@@ -3115,7 +3250,7 @@ void TurboAssembler::CallPrintf(int arg_count, const CPURegister* args) {\n     dc32(arg_pattern_list);   // kPrintfArgPatternListOffset\n   }\n #else\n-  Call(ExternalReference::printf_function(isolate()));\n+  Call(ExternalReference::printf_function());\n #endif\n }\n "
        },
        {
            "sha": "16aa006b2f4660604e2baf23a717c8c1cbc80efe",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64.h",
            "status": "modified",
            "additions": 48,
            "deletions": 18,
            "changes": 66,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -58,6 +58,7 @@ namespace internal {\n #define kOffHeapTrampolineRegister ip0\n #define kRuntimeCallFunctionRegister x1\n #define kRuntimeCallArgCountRegister x0\n+#define kWasmInstanceRegister x7\n \n #define LS_MACRO_LIST(V)                                     \\\n   V(Ldrb, Register&, rt, LDRB_w)                             \\\n@@ -182,10 +183,10 @@ class TurboAssembler : public Assembler {\n                  CodeObjectRequired create_code_object);\n \n   // The Abort method should call a V8 runtime function, but the CallRuntime\n-  // mechanism depends on CEntryStub. If use_real_aborts is false, Abort will\n-  // use a simpler abort mechanism that doesn't depend on CEntryStub.\n+  // mechanism depends on CEntry. If use_real_aborts is false, Abort will\n+  // use a simpler abort mechanism that doesn't depend on CEntry.\n   //\n-  // The purpose of this is to allow Aborts to be compiled whilst CEntryStub is\n+  // The purpose of this is to allow Aborts to be compiled whilst CEntry is\n   // being generated.\n   bool use_real_aborts() const { return use_real_aborts_; }\n \n@@ -219,6 +220,14 @@ class TurboAssembler : public Assembler {\n   bool allow_macro_instructions() const { return allow_macro_instructions_; }\n #endif\n \n+  // We should not use near calls or jumps for JS->WASM calls and calls to\n+  // external references, since the code spaces are not guaranteed to be close\n+  // to each other.\n+  bool CanUseNearCallOrJump(RelocInfo::Mode rmode) {\n+    return rmode != RelocInfo::JS_TO_WASM_CALL &&\n+           rmode != RelocInfo::EXTERNAL_REFERENCE;\n+  }\n+\n   // Activation support.\n   void EnterFrame(StackFrame::Type type);\n   void EnterFrame(StackFrame::Type type, bool load_constant_pool_pointer_reg) {\n@@ -231,6 +240,7 @@ class TurboAssembler : public Assembler {\n \n   void Mov(const Register& rd, const Operand& operand,\n            DiscardMoveMode discard_mode = kDontDiscardForSameWReg);\n+  void Mov(const Register& rd, ExternalReference reference);\n   void Mov(const Register& rd, uint64_t imm);\n   inline void Mov(const Register& rd, const Register& rm);\n   void Mov(const VRegister& vd, int vd_index, const VRegister& vn,\n@@ -563,6 +573,7 @@ class TurboAssembler : public Assembler {\n \n   bool AllowThisStubCall(CodeStub* stub);\n   void CallStubDelayed(CodeStub* stub);\n+  // TODO(jgruber): Remove in favor of MacroAssembler::CallRuntime.\n   void CallRuntimeDelayed(Zone* zone, Runtime::FunctionId fid,\n                           SaveFPRegsMode save_doubles = kDontSaveFPRegs);\n \n@@ -582,6 +593,10 @@ class TurboAssembler : public Assembler {\n   // Use --debug_code to enable.\n   void Assert(Condition cond, AbortReason reason);\n \n+  // Like Assert(), but without condition.\n+  // Use --debug_code to enable.\n+  void AssertUnreachable(AbortReason reason);\n+\n   void AssertSmi(Register object,\n                  AbortReason reason = AbortReason::kOperandIsNotASmi);\n \n@@ -867,26 +882,32 @@ class TurboAssembler : public Assembler {\n             int shift_amount = 0);\n   void Movi(const VRegister& vd, uint64_t hi, uint64_t lo);\n \n-  void Jump(Register target);\n+#ifdef V8_EMBEDDED_BUILTINS\n+  void LookupConstant(Register destination, Handle<Object> object);\n+  void LookupExternalReference(Register destination,\n+                               ExternalReference reference);\n+#endif  // V8_EMBEDDED_BUILTINS\n+\n+  void Jump(Register target, Condition cond = al);\n   void Jump(Address target, RelocInfo::Mode rmode, Condition cond = al);\n   void Jump(Handle<Code> code, RelocInfo::Mode rmode, Condition cond = al);\n-  void Jump(intptr_t target, RelocInfo::Mode rmode, Condition cond = al);\n \n   void Call(Register target);\n-  void Call(Label* target);\n   void Call(Address target, RelocInfo::Mode rmode);\n   void Call(Handle<Code> code, RelocInfo::Mode rmode = RelocInfo::CODE_TARGET);\n   void Call(ExternalReference target);\n \n+  // Generate an indirect call (for when a direct call's range is not adequate).\n+  void IndirectCall(Address target, RelocInfo::Mode rmode);\n+\n   void CallForDeoptimization(Address target, RelocInfo::Mode rmode);\n \n   // For every Call variant, there is a matching CallSize function that returns\n   // the size (in bytes) of the call sequence.\n   static int CallSize(Register target);\n-  static int CallSize(Label* target);\n-  static int CallSize(Address target, RelocInfo::Mode rmode);\n-  static int CallSize(Handle<Code> code,\n-                      RelocInfo::Mode rmode = RelocInfo::CODE_TARGET);\n+  int CallSize(Address target, RelocInfo::Mode rmode);\n+  int CallSize(Handle<Code> code,\n+               RelocInfo::Mode rmode = RelocInfo::CODE_TARGET);\n \n   // Calls a C function.\n   // The called function is not allowed to trigger a\n@@ -902,8 +923,8 @@ class TurboAssembler : public Assembler {\n   // Performs a truncating conversion of a floating point number as used by\n   // the JS bitwise operations. See ECMA-262 9.5: ToInt32.\n   // Exits with 'result' holding the answer.\n-  void TruncateDoubleToIDelayed(Zone* zone, Register result,\n-                                DoubleRegister double_input);\n+  void TruncateDoubleToI(Isolate* isolate, Zone* zone, Register result,\n+                         DoubleRegister double_input);\n \n   inline void Mul(const Register& rd, const Register& rn, const Register& rm);\n \n@@ -984,6 +1005,10 @@ class TurboAssembler : public Assembler {\n   // be 16 byte aligned.\n   void Poke(const CPURegister& src, const Operand& offset);\n \n+  // Peek at a value on the stack, and put it in 'dst'. The offset is in bytes.\n+  // The stack pointer must be aligned to 16 bytes.\n+  void Peek(const CPURegister& dst, const Operand& offset);\n+\n   // Poke 'src1' and 'src2' onto the stack. The values written will be adjacent\n   // with 'src2' at a higher address than 'src1'. The offset is in bytes. The\n   // stack pointer must be 16 byte aligned.\n@@ -1206,6 +1231,9 @@ class TurboAssembler : public Assembler {\n \n   void ResetSpeculationPoisonRegister();\n \n+  bool root_array_available() const { return root_array_available_; }\n+  void set_root_array_available(bool v) { root_array_available_ = v; }\n+\n  protected:\n   // The actual Push and Pop implementations. These don't generate any code\n   // other than that required for the push or pop. This allows\n@@ -1238,17 +1266,20 @@ class TurboAssembler : public Assembler {\n   // have mixed types. The format string (x0) should not be included.\n   void CallPrintf(int arg_count = 0, const CPURegister* args = nullptr);\n \n+  // This handle will be patched with the code object on installation.\n+  Handle<HeapObject> code_object_;\n+\n  private:\n   bool has_frame_ = false;\n+  bool root_array_available_ = true;\n   Isolate* const isolate_;\n #if DEBUG\n   // Tell whether any of the macro instruction can be used. When false the\n   // MacroAssembler will assert if a method which can emit a variable number\n   // of instructions is called.\n   bool allow_macro_instructions_;\n #endif\n-  // This handle will be patched with the code object on installation.\n-  Handle<HeapObject> code_object_;\n+\n \n   // Scratch registers available for use by the MacroAssembler.\n   CPURegList tmp_list_;\n@@ -1276,6 +1307,9 @@ class TurboAssembler : public Assembler {\n \n   void LoadStorePairMacro(const CPURegister& rt, const CPURegister& rt2,\n                           const MemOperand& addr, LoadStorePairOp op);\n+\n+  static bool IsNearCallOffset(int64_t offset);\n+  void JumpHelper(int64_t offset, RelocInfo::Mode rmode, Condition cond = al);\n };\n \n class MacroAssembler : public TurboAssembler {\n@@ -1606,10 +1640,6 @@ class MacroAssembler : public TurboAssembler {\n     std::vector<CPURegister> queued_;\n   };\n \n-  // Peek at a value on the stack, and put it in 'dst'. The offset is in bytes.\n-  // The stack pointer must be aligned to 16 bytes.\n-  void Peek(const CPURegister& dst, const Operand& offset);\n-\n   // Peek at two values on the stack, and put them in 'dst1' and 'dst2'. The\n   // values peeked will be adjacent, with the value in 'dst2' being from a\n   // higher address than 'dst1'. The offset is in bytes. The stack pointer must"
        },
        {
            "sha": "839c4edda6f0f0f35c749b9c479c72cc94078cf5",
            "filename": "deps/v8/src/arm64/simulator-arm64.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -117,7 +117,7 @@ Simulator* Simulator::current(Isolate* isolate) {\n   return sim;\n }\n \n-void Simulator::CallImpl(byte* entry, CallArgument* args) {\n+void Simulator::CallImpl(Address entry, CallArgument* args) {\n   int index_x = 0;\n   int index_d = 0;\n "
        },
        {
            "sha": "4bd9294c2f27deabf05d99d751823daf17ba850b",
            "filename": "deps/v8/src/arm64/simulator-arm64.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -719,7 +719,7 @@ class Simulator : public DecoderVisitor, public SimulatorBase {\n \n   // Call an arbitrary function taking an arbitrary number of arguments.\n   template <typename Return, typename... Args>\n-  Return Call(byte* entry, Args... args) {\n+  Return Call(Address entry, Args... args) {\n     // Convert all arguments to CallArgument.\n     CallArgument call_args[] = {CallArgument(args)..., CallArgument::End()};\n     CallImpl(entry, call_args);\n@@ -2279,7 +2279,7 @@ class Simulator : public DecoderVisitor, public SimulatorBase {\n  private:\n   void Init(FILE* stream);\n \n-  V8_EXPORT_PRIVATE void CallImpl(byte* entry, CallArgument* args);\n+  V8_EXPORT_PRIVATE void CallImpl(Address entry, CallArgument* args);\n \n   // Read floating point return values.\n   template <typename T>"
        },
        {
            "sha": "fc0add016e1ca90bd5a4360702af1893bb37f108",
            "filename": "deps/v8/src/asan.h",
            "status": "added",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fasan.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fasan.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fasan.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -0,0 +1,30 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+// AddressSanitizer support.\n+\n+#ifndef V8_ASAN_H_\n+#define V8_ASAN_H_\n+\n+#include \"src/base/macros.h\"\n+#include \"src/globals.h\"\n+\n+#ifdef V8_USE_ADDRESS_SANITIZER\n+\n+#include <sanitizer/asan_interface.h>\n+\n+#else  // !V8_USE_ADDRESS_SANITIZER\n+\n+#define ASAN_POISON_MEMORY_REGION(start, size)                         \\\n+  static_assert(                                                       \\\n+      (std::is_pointer<decltype(start)>::value ||                      \\\n+       std::is_same<v8::internal::Address, decltype(start)>::value) && \\\n+          std::is_convertible<decltype(size), size_t>::value,          \\\n+      \"static type violation\")\n+#define ASAN_UNPOISON_MEMORY_REGION(start, size) \\\n+  ASAN_POISON_MEMORY_REGION(start, size)\n+\n+#endif  // V8_USE_ADDRESS_SANITIZER\n+\n+#endif  // V8_ASAN_H_"
        },
        {
            "sha": "1fca56b0fc84806dafd6770ed69ebad21f276249",
            "filename": "deps/v8/src/asmjs/asm-parser.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 13,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-parser.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-parser.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-parser.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -1345,7 +1345,8 @@ void AsmJsParser::ValidateCase() {\n     FAIL(\"Numeric literal out of range\");\n   }\n   int32_t value = static_cast<int32_t>(uvalue);\n-  if (negate) {\n+  DCHECK_IMPLIES(negate && uvalue == 0x80000000, value == kMinInt);\n+  if (negate && value != kMinInt) {\n     value = -value;\n   }\n   EXPECT_TOKEN(':');\n@@ -1406,7 +1407,6 @@ AsmType* AsmJsParser::NumericLiteral() {\n       current_function_builder_->EmitI32Const(static_cast<int32_t>(uvalue));\n       return AsmType::FixNum();\n     } else {\n-      DCHECK_LE(uvalue, 0xFFFFFFFF);\n       current_function_builder_->EmitI32Const(static_cast<int32_t>(uvalue));\n       return AsmType::Unsigned();\n     }\n@@ -2501,18 +2501,16 @@ void AsmJsParser::GatherCases(ZoneVector<int32_t>* cases) {\n       }\n     } else if (depth == 1 && Peek(TOK(case))) {\n       scanner_.Next();\n-      int32_t value;\n       uint32_t uvalue;\n-      if (Check('-')) {\n-        if (!CheckForUnsigned(&uvalue)) {\n-          break;\n-        }\n-        value = -static_cast<int32_t>(uvalue);\n-      } else {\n-        if (!CheckForUnsigned(&uvalue)) {\n-          break;\n-        }\n-        value = static_cast<int32_t>(uvalue);\n+      bool negate = false;\n+      if (Check('-')) negate = true;\n+      if (!CheckForUnsigned(&uvalue)) {\n+        break;\n+      }\n+      int32_t value = static_cast<int32_t>(uvalue);\n+      DCHECK_IMPLIES(negate && uvalue == 0x80000000, value == kMinInt);\n+      if (negate && value != kMinInt) {\n+        value = -value;\n       }\n       cases->push_back(value);\n     } else if (Peek(AsmJsScanner::kEndOfInput) ||"
        },
        {
            "sha": "5858907537c415275f564d748e493d9bc8400ad1",
            "filename": "deps/v8/src/assembler-arch.h",
            "status": "added",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fassembler-arch.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fassembler-arch.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler-arch.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -0,0 +1,30 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_ASSEMBLER_ARCH_H_\n+#define V8_ASSEMBLER_ARCH_H_\n+\n+#include \"src/assembler.h\"\n+\n+#if V8_TARGET_ARCH_IA32\n+#include \"src/ia32/assembler-ia32.h\"\n+#elif V8_TARGET_ARCH_X64\n+#include \"src/x64/assembler-x64.h\"\n+#elif V8_TARGET_ARCH_ARM64\n+#include \"src/arm64/assembler-arm64.h\"\n+#elif V8_TARGET_ARCH_ARM\n+#include \"src/arm/assembler-arm.h\"\n+#elif V8_TARGET_ARCH_PPC\n+#include \"src/ppc/assembler-ppc.h\"\n+#elif V8_TARGET_ARCH_MIPS\n+#include \"src/mips/assembler-mips.h\"\n+#elif V8_TARGET_ARCH_MIPS64\n+#include \"src/mips64/assembler-mips64.h\"\n+#elif V8_TARGET_ARCH_S390\n+#include \"src/s390/assembler-s390.h\"\n+#else\n+#error Unknown architecture.\n+#endif\n+\n+#endif  // V8_ASSEMBLER_ARCH_H_"
        },
        {
            "sha": "799f08a4d893a5360cfcf95b73612d1a1652b6b8",
            "filename": "deps/v8/src/assembler.cc",
            "status": "modified",
            "additions": 36,
            "deletions": 34,
            "changes": 70,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fassembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fassembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -54,7 +54,7 @@ const char* const RelocInfo::kFillerCommentString = \"DEOPTIMIZATION PADDING\";\n \n AssemblerBase::IsolateData::IsolateData(Isolate* isolate)\n     : serializer_enabled_(isolate->serializer_enabled())\n-#if V8_TARGET_ARCH_X64\n+#if V8_TARGET_ARCH_X64 || V8_TARGET_ARCH_ARM64\n       ,\n       code_range_start_(\n           isolate->heap()->memory_allocator()->code_range()->start())\n@@ -96,7 +96,7 @@ void AssemblerBase::FlushICache(void* start, size_t size) {\n \n void AssemblerBase::Print(Isolate* isolate) {\n   OFStream os(stdout);\n-  v8::internal::Disassembler::Decode(isolate, &os, buffer_, pc_, nullptr);\n+  v8::internal::Disassembler::Decode(isolate, &os, buffer_, pc_);\n }\n \n // -----------------------------------------------------------------------------\n@@ -313,9 +313,10 @@ void RelocInfoWriter::Write(const RelocInfo* rinfo) {\n   byte* begin_pos = pos_;\n #endif\n   DCHECK(rinfo->rmode() < RelocInfo::NUMBER_OF_MODES);\n-  DCHECK_GE(rinfo->pc() - last_pc_, 0);\n+  DCHECK_GE(rinfo->pc() - reinterpret_cast<Address>(last_pc_), 0);\n   // Use unsigned delta-encoding for pc.\n-  uint32_t pc_delta = static_cast<uint32_t>(rinfo->pc() - last_pc_);\n+  uint32_t pc_delta =\n+      static_cast<uint32_t>(rinfo->pc() - reinterpret_cast<Address>(last_pc_));\n \n   // The two most common modes are given small tags, and usually fit in a byte.\n   if (rmode == RelocInfo::EMBEDDED_OBJECT) {\n@@ -337,7 +338,7 @@ void RelocInfoWriter::Write(const RelocInfo* rinfo) {\n       WriteIntData(static_cast<int>(rinfo->data()));\n     }\n   }\n-  last_pc_ = rinfo->pc();\n+  last_pc_ = reinterpret_cast<byte*>(rinfo->pc());\n #ifdef DEBUG\n   DCHECK_LE(begin_pos - pos_, kMaxSize);\n #endif\n@@ -450,38 +451,39 @@ void RelocIterator::next() {\n }\n \n RelocIterator::RelocIterator(Code* code, int mode_mask)\n-    : mode_mask_(mode_mask) {\n-  rinfo_.host_ = code;\n-  rinfo_.pc_ = code->raw_instruction_start();\n-  rinfo_.data_ = 0;\n-  rinfo_.constant_pool_ = code->constant_pool();\n-  // Relocation info is read backwards.\n-  pos_ = code->relocation_start() + code->relocation_size();\n-  end_ = code->relocation_start();\n-  if (mode_mask_ == 0) pos_ = end_;\n-  next();\n-}\n+    : RelocIterator(code, code->raw_instruction_start(), code->constant_pool(),\n+                    code->relocation_end(), code->relocation_start(),\n+                    mode_mask) {}\n+\n+RelocIterator::RelocIterator(const CodeReference code_reference, int mode_mask)\n+    : RelocIterator(nullptr, code_reference.instruction_start(),\n+                    code_reference.constant_pool(),\n+                    code_reference.relocation_end(),\n+                    code_reference.relocation_start(), mode_mask) {}\n \n RelocIterator::RelocIterator(const CodeDesc& desc, int mode_mask)\n-    : mode_mask_(mode_mask) {\n-  rinfo_.pc_ = desc.buffer;\n-  // Relocation info is read backwards.\n-  pos_ = desc.buffer + desc.buffer_size;\n-  end_ = pos_ - desc.reloc_size;\n-  if (mode_mask_ == 0) pos_ = end_;\n-  next();\n-}\n+    : RelocIterator(nullptr, reinterpret_cast<Address>(desc.buffer), 0,\n+                    desc.buffer + desc.buffer_size,\n+                    desc.buffer + desc.buffer_size - desc.reloc_size,\n+                    mode_mask) {}\n \n RelocIterator::RelocIterator(Vector<byte> instructions,\n                              Vector<const byte> reloc_info, Address const_pool,\n                              int mode_mask)\n-    : mode_mask_(mode_mask) {\n-  rinfo_.pc_ = instructions.start();\n-  rinfo_.constant_pool_ = const_pool;\n+    : RelocIterator(nullptr, reinterpret_cast<Address>(instructions.start()),\n+                    const_pool, reloc_info.start() + reloc_info.size(),\n+                    reloc_info.start(), mode_mask) {\n   rinfo_.flags_ = RelocInfo::kInNativeWasmCode;\n+}\n+\n+RelocIterator::RelocIterator(Code* host, Address pc, Address constant_pool,\n+                             const byte* pos, const byte* end, int mode_mask)\n+    : pos_(pos), end_(end), mode_mask_(mode_mask) {\n   // Relocation info is read backwards.\n-  pos_ = reloc_info.start() + reloc_info.size();\n-  end_ = reloc_info.start();\n+  DCHECK_GE(pos_, end_);\n+  rinfo_.host_ = host;\n+  rinfo_.pc_ = pc;\n+  rinfo_.constant_pool_ = constant_pool;\n   if (mode_mask_ == 0) pos_ = end_;\n   next();\n }\n@@ -551,7 +553,7 @@ const char* RelocInfo::RelocModeName(RelocInfo::Mode rmode) {\n }\n \n void RelocInfo::Print(Isolate* isolate, std::ostream& os) {  // NOLINT\n-  os << static_cast<const void*>(pc_) << \"  \" << RelocModeName(rmode_);\n+  os << reinterpret_cast<const void*>(pc_) << \"  \" << RelocModeName(rmode_);\n   if (IsComment(rmode_)) {\n     os << \"  (\" << reinterpret_cast<char*>(data_) << \")\";\n   } else if (rmode_ == DEOPT_SCRIPT_OFFSET || rmode_ == DEOPT_INLINING_ID) {\n@@ -565,7 +567,7 @@ void RelocInfo::Print(Isolate* isolate, std::ostream& os) {  // NOLINT\n     ExternalReferenceEncoder ref_encoder(isolate);\n     os << \" (\"\n        << ref_encoder.NameOfAddress(isolate, target_external_reference())\n-       << \")  (\" << static_cast<const void*>(target_external_reference())\n+       << \")  (\" << reinterpret_cast<const void*>(target_external_reference())\n        << \")\";\n   } else if (IsCodeTarget(rmode_)) {\n     const Address code_target = target_address();\n@@ -582,7 +584,7 @@ void RelocInfo::Print(Isolate* isolate, std::ostream& os) {  // NOLINT\n       }\n       os << \") \";\n     }\n-    os << \" (\" << static_cast<const void*>(target_address()) << \")\";\n+    os << \" (\" << reinterpret_cast<const void*>(target_address()) << \")\";\n   } else if (IsRuntimeEntry(rmode_) && isolate->deoptimizer_data() != nullptr) {\n     // Depotimization bailouts are stored as runtime entries.\n     int id = Deoptimizer::GetDeoptimizationId(\n@@ -607,7 +609,7 @@ void RelocInfo::Verify(Isolate* isolate) {\n     case CODE_TARGET: {\n       // convert inline target address to code object\n       Address addr = target_address();\n-      CHECK_NOT_NULL(addr);\n+      CHECK_NE(addr, kNullAddress);\n       // Check that we can find the right code object.\n       Code* code = Code::GetCodeFromTargetAddress(addr);\n       Object* found = isolate->FindCodeObject(addr);\n@@ -626,7 +628,7 @@ void RelocInfo::Verify(Isolate* isolate) {\n     }\n     case OFF_HEAP_TARGET: {\n       Address addr = target_off_heap_target();\n-      CHECK_NOT_NULL(addr);\n+      CHECK_NE(addr, kNullAddress);\n       CHECK_NOT_NULL(InstructionStream::TryLookupCode(isolate, addr));\n       break;\n     }"
        },
        {
            "sha": "35f6147053a58e376969114d84dd746320f23cfe",
            "filename": "deps/v8/src/assembler.h",
            "status": "modified",
            "additions": 27,
            "deletions": 18,
            "changes": 45,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fassembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fassembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -40,6 +40,7 @@\n #include <map>\n \n #include \"src/allocation.h\"\n+#include \"src/code-reference.h\"\n #include \"src/contexts.h\"\n #include \"src/deoptimize-reason.h\"\n #include \"src/double.h\"\n@@ -98,7 +99,7 @@ class AssemblerBase: public Malloced {\n     IsolateData(const IsolateData&) = default;\n \n     bool serializer_enabled_;\n-#if V8_TARGET_ARCH_X64\n+#if V8_TARGET_ARCH_X64 || V8_TARGET_ARCH_ARM64\n     Address code_range_start_;\n #endif\n   };\n@@ -162,6 +163,9 @@ class AssemblerBase: public Malloced {\n   static const int kMinimalBufferSize = 4*KB;\n \n   static void FlushICache(void* start, size_t size);\n+  static void FlushICache(Address start, size_t size) {\n+    return FlushICache(reinterpret_cast<void*>(start), size);\n+  }\n \n  protected:\n   // The buffer into which code and relocation info are generated. It could\n@@ -180,6 +184,7 @@ class AssemblerBase: public Malloced {\n   }\n \n   // The program counter, which points into the buffer above and moves forward.\n+  // TODO(jkummerow): This should probably have type {Address}.\n   byte* pc_;\n \n  private:\n@@ -315,11 +320,6 @@ class CpuFeatures : public AllStatic {\n   DISALLOW_COPY_AND_ASSIGN(CpuFeatures);\n };\n \n-\n-enum SaveFPRegsMode { kDontSaveFPRegs, kSaveFPRegs };\n-\n-enum ArgvMode { kArgvOnStack, kArgvInRegister };\n-\n // Specifies whether to perform icache flush operations on RelocInfo updates.\n // If FLUSH_ICACHE_IF_NEEDED, the icache will always be flushed if an\n // instruction was modified. If SKIP_ICACHE_FLUSH the flush will always be\n@@ -414,7 +414,7 @@ class RelocInfo {\n \n   RelocInfo() = default;\n \n-  RelocInfo(byte* pc, Mode rmode, intptr_t data, Code* host)\n+  RelocInfo(Address pc, Mode rmode, intptr_t data, Code* host)\n       : pc_(pc), rmode_(rmode), data_(data), host_(host) {}\n \n   static inline bool IsRealRelocMode(Mode mode) {\n@@ -476,8 +476,7 @@ class RelocInfo {\n   static constexpr int ModeMask(Mode mode) { return 1 << mode; }\n \n   // Accessors\n-  byte* pc() const { return pc_; }\n-  void set_pc(byte* pc) { pc_ = pc; }\n+  Address pc() const { return pc_; }\n   Mode rmode() const {  return rmode_; }\n   intptr_t data() const { return data_; }\n   Code* host() const { return host_; }\n@@ -613,15 +612,13 @@ class RelocInfo {\n   uint32_t embedded_size() const;\n   Address embedded_address() const;\n \n-  // On ARM, note that pc_ is the address of the constant pool entry\n-  // to be relocated and not the address of the instruction\n-  // referencing the constant pool entry (except when rmode_ ==\n-  // comment).\n-  byte* pc_;\n+  // On ARM/ARM64, note that pc_ is the address of the instruction referencing\n+  // the constant pool and not the address of the constant pool entry.\n+  Address pc_;\n   Mode rmode_;\n   intptr_t data_ = 0;\n   Code* host_;\n-  Address constant_pool_ = nullptr;\n+  Address constant_pool_ = kNullAddress;\n   Flags flags_;\n   friend class RelocIterator;\n };\n@@ -683,6 +680,8 @@ class RelocIterator: public Malloced {\n   // iteration iff bit k of mode_mask is set.\n   explicit RelocIterator(Code* code, int mode_mask = -1);\n   explicit RelocIterator(const CodeDesc& desc, int mode_mask = -1);\n+  explicit RelocIterator(const CodeReference code_reference,\n+                         int mode_mask = -1);\n   explicit RelocIterator(Vector<byte> instructions,\n                          Vector<const byte> reloc_info, Address const_pool,\n                          int mode_mask = -1);\n@@ -700,6 +699,9 @@ class RelocIterator: public Malloced {\n   }\n \n  private:\n+  RelocIterator(Code* host, Address pc, Address constant_pool, const byte* pos,\n+                const byte* end, int mode_mask);\n+\n   // Advance* moves the position before/after reading.\n   // *Read* reads from current byte(s) into rinfo_.\n   // *Get* just reads and returns info on current byte.\n@@ -958,8 +960,8 @@ class RegisterBase {\n   }\n \n   template <RegisterCode reg_code>\n-  static constexpr int bit() {\n-    return 1 << code<reg_code>();\n+  static constexpr RegList bit() {\n+    return RegList{1} << code<reg_code>();\n   }\n \n   static SubType from_code(int code) {\n@@ -968,19 +970,26 @@ class RegisterBase {\n     return SubType{code};\n   }\n \n+  // Constexpr version (pass registers as template parameters).\n   template <RegisterCode... reg_codes>\n   static constexpr RegList ListOf() {\n     return CombineRegLists(RegisterBase::bit<reg_codes>()...);\n   }\n \n+  // Non-constexpr version (pass registers as method parameters).\n+  template <typename... Register>\n+  static RegList ListOf(Register... regs) {\n+    return CombineRegLists(regs.bit()...);\n+  }\n+\n   bool is_valid() const { return reg_code_ != kCode_no_reg; }\n \n   int code() const {\n     DCHECK(is_valid());\n     return reg_code_;\n   }\n \n-  int bit() const { return 1 << code(); }\n+  RegList bit() const { return RegList{1} << code(); }\n \n   inline constexpr bool operator==(SubType other) const {\n     return reg_code_ == other.reg_code_;"
        },
        {
            "sha": "5efecc5375a33da442e2acef7b73da3c3514e9d3",
            "filename": "deps/v8/src/ast/ast-value-factory.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -223,15 +223,13 @@ AstRawString* AstValueFactory::GetOneByteStringInternal(\n   return GetString(hash_field, true, literal);\n }\n \n-\n AstRawString* AstValueFactory::GetTwoByteStringInternal(\n     Vector<const uint16_t> literal) {\n   uint32_t hash_field = StringHasher::HashSequentialString<uint16_t>(\n       literal.start(), literal.length(), hash_seed_);\n   return GetString(hash_field, false, Vector<const byte>::cast(literal));\n }\n \n-\n const AstRawString* AstValueFactory::GetString(Handle<String> literal) {\n   AstRawString* result = nullptr;\n   DisallowHeapAllocation no_gc;\n@@ -280,7 +278,6 @@ void AstValueFactory::Internalize(Isolate* isolate) {\n   ResetStrings();\n }\n \n-\n AstRawString* AstValueFactory::GetString(uint32_t hash_field, bool is_one_byte,\n                                          Vector<const byte> literal_bytes) {\n   // literal_bytes here points to whatever the user passed, and this is OK"
        },
        {
            "sha": "15b8bff61b697f901003d91d046546f4cf0e917a",
            "filename": "deps/v8/src/ast/ast.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fast.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fast.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -276,7 +276,9 @@ std::unique_ptr<char[]> FunctionLiteral::GetDebugName() const {\n     AllowHandleDereference allow_deref;\n     return inferred_name_->ToCString();\n   } else {\n-    return std::unique_ptr<char[]>(new char{'\\0'});\n+    char* empty_str = new char[1];\n+    empty_str[0] = 0;\n+    return std::unique_ptr<char[]>(empty_str);\n   }\n \n   // TODO(rmcilroy): Deal with two-character strings."
        },
        {
            "sha": "35dede266b37e3203facc17d2f9968a69efcb33c",
            "filename": "deps/v8/src/ast/ast.h",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fast.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fast.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -1429,6 +1429,8 @@ class ArrayLiteral final : public AggregateLiteral {\n \n   ZoneList<Expression*>* values() const { return values_; }\n \n+  int first_spread_index() const { return first_spread_index_; }\n+\n   bool is_empty() const;\n \n   // Populate the depth field and flags, returns the depth.\n@@ -1453,16 +1455,6 @@ class ArrayLiteral final : public AggregateLiteral {\n     return AggregateLiteral::ComputeFlags(disable_mementos);\n   }\n \n-  // Provide a mechanism for iterating through values to rewrite spreads.\n-  ZoneList<Expression*>::iterator FirstSpreadOrEndValue() const {\n-    return (first_spread_index_ >= 0) ? values_->begin() + first_spread_index_\n-                                      : values_->end();\n-  }\n-  ZoneList<Expression*>::iterator BeginValue() const {\n-    return values_->begin();\n-  }\n-  ZoneList<Expression*>::iterator EndValue() const { return values_->end(); }\n-\n  private:\n   friend class AstNodeFactory;\n "
        },
        {
            "sha": "4f9029810a044a66f747acb58fb76d7763410a16",
            "filename": "deps/v8/src/ast/prettyprinter.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -1325,7 +1325,7 @@ void AstPrinter::VisitCompareOperation(CompareOperation* node) {\n \n \n void AstPrinter::VisitSpread(Spread* node) {\n-  IndentedScope indent(this, \"...\", node->position());\n+  IndentedScope indent(this, \"SPREAD\", node->position());\n   Visit(node->expression());\n }\n "
        },
        {
            "sha": "42affeea2c9dd55bc72a31c46318062126aa4bf9",
            "filename": "deps/v8/src/ast/scopes.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -2234,6 +2234,8 @@ void Scope::AllocateNonParameterLocal(Variable* var) {\n   if (var->IsUnallocated() && MustAllocate(var)) {\n     if (MustAllocateInContext(var)) {\n       AllocateHeapSlot(var);\n+      DCHECK_IMPLIES(is_catch_scope(),\n+                     var->index() == Context::THROWN_OBJECT_INDEX);\n     } else {\n       AllocateStackSlot(var);\n     }"
        },
        {
            "sha": "6eeaed140bf0dd95df6deb71a2b2799379906de8",
            "filename": "deps/v8/src/base/adapters.h",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fadapters.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fadapters.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fadapters.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -8,6 +8,8 @@\n #ifndef V8_BASE_ADAPTERS_H_\n #define V8_BASE_ADAPTERS_H_\n \n+#include <iterator>\n+\n #include \"src/base/macros.h\"\n \n namespace v8 {\n@@ -17,13 +19,15 @@ namespace base {\n template <typename T>\n class ReversedAdapter {\n  public:\n-  typedef decltype(static_cast<T*>(nullptr)->rbegin()) Iterator;\n+  using Iterator =\n+      std::reverse_iterator<decltype(std::begin(std::declval<T>()))>;\n \n   explicit ReversedAdapter(T& t) : t_(t) {}\n-  ReversedAdapter(const ReversedAdapter& ra) : t_(ra.t_) {}\n+  ReversedAdapter(const ReversedAdapter& ra) = default;\n \n-  Iterator begin() const { return t_.rbegin(); }\n-  Iterator end() const { return t_.rend(); }\n+  // TODO(clemensh): Use std::rbegin/std::rend once we have C++14 support.\n+  Iterator begin() const { return Iterator(std::end(t_)); }\n+  Iterator end() const { return Iterator(std::begin(t_)); }\n \n  private:\n   T& t_;"
        },
        {
            "sha": "7787e4ff5279d3128cfc3d8c68dc0a85e4ea5a03",
            "filename": "deps/v8/src/base/atomic-utils.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fatomic-utils.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fatomic-utils.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fatomic-utils.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -14,6 +14,7 @@\n namespace v8 {\n namespace base {\n \n+// Deprecated. Use std::atomic<T> for new code.\n template <class T>\n class AtomicNumber {\n  public:"
        },
        {
            "sha": "7a1cc175cb733eaf1db86c05eae54f0b6bda03cf",
            "filename": "deps/v8/src/base/ieee754.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -51,6 +51,7 @@ namespace {\n /*\n  * A union which permits us to convert between a double and two 32 bit\n  * ints.\n+ * TODO(jkummerow): This is undefined behavior. Use bit_cast instead.\n  */\n \n #if V8_TARGET_LITTLE_ENDIAN"
        },
        {
            "sha": "64f7fed413e3c186b45da78546ad6b48cee42187",
            "filename": "deps/v8/src/base/logging.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Flogging.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Flogging.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Flogging.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -135,7 +135,7 @@ class FailureMessage {\n \n   static const uintptr_t kStartMarker = 0xdecade10;\n   static const uintptr_t kEndMarker = 0xdecade11;\n-  static const int kMessageBufferSize = 1024;\n+  static const int kMessageBufferSize = 512;\n \n   uintptr_t start_marker_ = kStartMarker;\n   char message_[kMessageBufferSize];\n@@ -154,6 +154,7 @@ void V8_Fatal(const char* file, int line, const char* format, ...) {\n \n   fflush(stdout);\n   fflush(stderr);\n+  // Print the formatted message to stdout without cropping the output.\n   v8::base::OS::PrintError(\"\\n\\n#\\n# Fatal error in %s, line %d\\n# \", file,\n                            line);\n "
        },
        {
            "sha": "3437309bc7ee2ac3f33a34c490d49a1237141abb",
            "filename": "deps/v8/src/base/macros.h",
            "status": "modified",
            "additions": 25,
            "deletions": 3,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -43,7 +43,6 @@ template <typename T, size_t N>\n char (&ArraySizeHelper(const T (&array)[N]))[N];\n #endif\n \n-\n // bit_cast<Dest,Source> is a template function that implements the\n // equivalent of \"*reinterpret_cast<Dest*>(&source)\".  We need this in\n // very low-level functions like the protobuf library and fast math\n@@ -150,20 +149,27 @@ V8_INLINE Dest bit_cast(Source const& source) {\n #define INLINE(declarator)    V8_INLINE declarator\n #define NO_INLINE(declarator) V8_NOINLINE declarator\n \n-// Define V8_USE_ADDRESS_SANITIZER macros.\n+// Define V8_USE_ADDRESS_SANITIZER macro.\n #if defined(__has_feature)\n #if __has_feature(address_sanitizer)\n #define V8_USE_ADDRESS_SANITIZER 1\n #endif\n #endif\n \n-// Define DISABLE_ASAN macros.\n+// Define DISABLE_ASAN macro.\n #ifdef V8_USE_ADDRESS_SANITIZER\n #define DISABLE_ASAN __attribute__((no_sanitize_address))\n #else\n #define DISABLE_ASAN\n #endif\n \n+// Define V8_USE_MEMORY_SANITIZER macro.\n+#if defined(__has_feature)\n+#if __has_feature(memory_sanitizer)\n+#define V8_USE_MEMORY_SANITIZER 1\n+#endif\n+#endif\n+\n // Helper macro to define no_sanitize attributes only with clang.\n #if defined(__clang__) && defined(__has_attribute)\n #if __has_attribute(no_sanitize)\n@@ -271,6 +277,14 @@ struct Use {\n }  // namespace base\n }  // namespace v8\n \n+// implicit_cast<A>(x) triggers an implicit cast from {x} to type {A}. This is\n+// useful in situations where static_cast<A>(x) would do too much.\n+// Only use this for cheap-to-copy types, or use move semantics explicitly.\n+template <class A>\n+V8_INLINE A implicit_cast(A x) {\n+  return x;\n+}\n+\n // Define our own macros for writing 64-bit constants.  This is less fragile\n // than defining __STDC_CONSTANT_MACROS before including <stdint.h>, and it\n // works on compilers that don't have it (like MSVC).\n@@ -296,6 +310,14 @@ struct Use {\n #define V8PRIdPTR V8_PTR_PREFIX \"d\"\n #define V8PRIuPTR V8_PTR_PREFIX \"u\"\n \n+#ifdef V8_TARGET_ARCH_64_BIT\n+#define V8_PTR_HEX_DIGITS 12\n+#define V8PRIxPTR_FMT \"0x%012\" V8PRIxPTR\n+#else\n+#define V8_PTR_HEX_DIGITS 8\n+#define V8PRIxPTR_FMT \"0x%08\" V8PRIxPTR\n+#endif\n+\n // ptrdiff_t is 't' according to the standard, but MSVC uses 'I'.\n #if V8_CC_MSVC\n #define V8PRIxPTRDIFF \"Ix\""
        },
        {
            "sha": "6b4158f079e3e87ee6ff16f94f16968d51d5ce5f",
            "filename": "deps/v8/src/base/platform/mutex.h",
            "status": "modified",
            "additions": 13,
            "deletions": 3,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fmutex.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fmutex.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fmutex.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -203,11 +203,21 @@ typedef LazyStaticInstance<RecursiveMutex,\n // object was created, the LockGuard is destructed and the mutex is released.\n // The LockGuard class is non-copyable.\n \n-template <typename Mutex>\n+// Controls whether a LockGuard always requires a valid Mutex or will just\n+// ignore it if it's nullptr.\n+enum class NullBehavior { kRequireNotNull, kIgnoreIfNull };\n+\n+template <typename Mutex, NullBehavior Behavior = NullBehavior::kRequireNotNull>\n class LockGuard final {\n  public:\n-  explicit LockGuard(Mutex* mutex) : mutex_(mutex) { mutex_->Lock(); }\n-  ~LockGuard() { mutex_->Unlock(); }\n+  explicit LockGuard(Mutex* mutex) : mutex_(mutex) {\n+    if (Behavior == NullBehavior::kRequireNotNull || mutex_ != nullptr) {\n+      mutex_->Lock();\n+    }\n+  }\n+  ~LockGuard() {\n+    if (mutex_ != nullptr) mutex_->Unlock();\n+  }\n \n  private:\n   Mutex* mutex_;"
        },
        {
            "sha": "c5d94fc6ba55b455780f9c1afac7c335e7d7be58",
            "filename": "deps/v8/src/base/platform/platform-cygwin.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-cygwin.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-cygwin.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-cygwin.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -34,6 +34,8 @@ DWORD GetProtectionFromMemoryPermission(OS::MemoryPermission access) {\n   switch (access) {\n     case OS::MemoryPermission::kNoAccess:\n       return PAGE_NOACCESS;\n+    case OS::MemoryPermission::kRead:\n+      return PAGE_READONLY;\n     case OS::MemoryPermission::kReadWrite:\n       return PAGE_READWRITE;\n     case OS::MemoryPermission::kReadWriteExecute:"
        },
        {
            "sha": "3a9d65a12d393d098d1ede3437b9331b73a98521",
            "filename": "deps/v8/src/base/platform/platform-fuchsia.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -19,6 +19,8 @@ uint32_t GetProtectionFromMemoryPermission(OS::MemoryPermission access) {\n   switch (access) {\n     case OS::MemoryPermission::kNoAccess:\n       return 0;  // no permissions\n+    case OS::MemoryPermission::kRead:\n+      return ZX_VM_FLAG_PERM_READ;\n     case OS::MemoryPermission::kReadWrite:\n       return ZX_VM_FLAG_PERM_READ | ZX_VM_FLAG_PERM_WRITE;\n     case OS::MemoryPermission::kReadWriteExecute:"
        },
        {
            "sha": "d21107d6f785f60020c40d1dd3929494e3266c9b",
            "filename": "deps/v8/src/base/platform/platform-posix.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -112,6 +112,8 @@ int GetProtectionFromMemoryPermission(OS::MemoryPermission access) {\n   switch (access) {\n     case OS::MemoryPermission::kNoAccess:\n       return PROT_NONE;\n+    case OS::MemoryPermission::kRead:\n+      return PROT_READ;\n     case OS::MemoryPermission::kReadWrite:\n       return PROT_READ | PROT_WRITE;\n     case OS::MemoryPermission::kReadWriteExecute:\n@@ -352,6 +354,18 @@ bool OS::SetPermissions(void* address, size_t size, MemoryPermission access) {\n   if (ret == 0 && access == OS::MemoryPermission::kNoAccess) {\n     ret = ReclaimInaccessibleMemory(address, size);\n   }\n+\n+// For accounting purposes, we want to call MADV_FREE_REUSE on macOS after\n+// changing permissions away from OS::MemoryPermission::kNoAccess. Since this\n+// state is not kept at this layer, we always call this if access != kNoAccess.\n+// The cost is a syscall that effectively no-ops.\n+// TODO(erikchen): Fix this to only call MADV_FREE_REUSE when necessary.\n+// https://crbug.com/823915\n+#if defined(OS_MACOSX)\n+  if (access != OS::MemoryPermission::kNoAccess)\n+    madvise(address, size, MADV_FREE_REUSE);\n+#endif\n+\n   return ret == 0;\n }\n "
        },
        {
            "sha": "f618c65fb6458ee8bb1db84d5d71d2e191c02adc",
            "filename": "deps/v8/src/base/platform/platform-win32.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -758,6 +758,8 @@ DWORD GetProtectionFromMemoryPermission(OS::MemoryPermission access) {\n   switch (access) {\n     case OS::MemoryPermission::kNoAccess:\n       return PAGE_NOACCESS;\n+    case OS::MemoryPermission::kRead:\n+      return PAGE_READONLY;\n     case OS::MemoryPermission::kReadWrite:\n       return PAGE_READWRITE;\n     case OS::MemoryPermission::kReadWriteExecute:"
        },
        {
            "sha": "5d015eeeac379894f4f7f6f0240a525a68e76bb5",
            "filename": "deps/v8/src/base/platform/platform.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -159,6 +159,7 @@ class V8_BASE_EXPORT OS {\n   // v8::PageAllocator.\n   enum class MemoryPermission {\n     kNoAccess,\n+    kRead,\n     kReadWrite,\n     // TODO(hpayer): Remove this flag. Memory should never be rwx.\n     kReadWriteExecute,"
        },
        {
            "sha": "cbbe7e3cbf2d7e6aac4ec85298aa29fd3aed7773",
            "filename": "deps/v8/src/base/template-utils.h",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -56,13 +56,6 @@ std::unique_ptr<T> make_unique(Args&&... args) {\n   return std::unique_ptr<T>(new T(std::forward<Args>(args)...));\n }\n \n-// implicit_cast<A>(x) triggers an implicit cast from {x} to type {A}. This is\n-// useful in situations where static_cast<A>(x) would do too much.\n-template <class A>\n-A implicit_cast(A x) {\n-  return x;\n-}\n-\n // Helper to determine how to pass values: Pass scalars and arrays by value,\n // others by const reference (even if it was a non-const ref before; this is\n // disallowed by the style guide anyway)."
        },
        {
            "sha": "ed8fd72c91527d85a0172e85ef76edc86a21baea",
            "filename": "deps/v8/src/bootstrapper.cc",
            "status": "modified",
            "additions": 122,
            "deletions": 102,
            "changes": 224,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbootstrapper.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -19,15 +19,18 @@\n #include \"src/extensions/trigger-failure-extension.h\"\n #include \"src/heap/heap.h\"\n #include \"src/isolate-inl.h\"\n+#include \"src/objects/api-callbacks.h\"\n+#ifdef V8_INTL_SUPPORT\n+#include \"src/objects/intl-objects.h\"\n+#include \"src/objects/js-locale.h\"\n+#endif  // V8_INTL_SUPPORT\n+#include \"src/objects/hash-table-inl.h\"\n #include \"src/objects/js-regexp.h\"\n+#include \"src/objects/templates.h\"\n #include \"src/snapshot/natives.h\"\n #include \"src/snapshot/snapshot.h\"\n #include \"src/wasm/wasm-js.h\"\n \n-#if V8_INTL_SUPPORT\n-#include \"src/objects/intl-objects.h\"\n-#endif  // V8_INTL_SUPPORT\n-\n namespace v8 {\n namespace internal {\n \n@@ -161,7 +164,7 @@ class Genesis BASE_EMBEDDED {\n   // Creates some basic objects. Used for creating a context from scratch.\n   void CreateRoots();\n   // Creates the empty function.  Used for creating a context from scratch.\n-  Handle<JSFunction> CreateEmptyFunction(Isolate* isolate);\n+  Handle<JSFunction> CreateEmptyFunction();\n   // Returns the %ThrowTypeError% intrinsic function.\n   // See ES#sec-%throwtypeerror% for details.\n   Handle<JSFunction> GetThrowTypeErrorIntrinsic();\n@@ -357,10 +360,11 @@ void Bootstrapper::DetachGlobal(Handle<Context> env) {\n namespace {\n \n V8_NOINLINE Handle<SharedFunctionInfo> SimpleCreateSharedFunctionInfo(\n-    Isolate* isolate, Builtins::Name builtin_id, Handle<String> name, int len) {\n+    Isolate* isolate, Builtins::Name builtin_id, Handle<String> name, int len,\n+    FunctionKind kind = FunctionKind::kNormalFunction) {\n   Handle<SharedFunctionInfo> shared =\n       isolate->factory()->NewSharedFunctionInfoForBuiltin(name, builtin_id,\n-                                                          kNormalFunction);\n+                                                          kind);\n   shared->set_internal_formal_parameter_count(len);\n   shared->set_length(len);\n   return shared;\n@@ -589,29 +593,33 @@ V8_NOINLINE void InstallSpeciesGetter(Handle<JSFunction> constructor) {\n \n }  // namespace\n \n-Handle<JSFunction> Genesis::CreateEmptyFunction(Isolate* isolate) {\n-  Factory* factory = isolate->factory();\n-\n+Handle<JSFunction> Genesis::CreateEmptyFunction() {\n   // Allocate the function map first and then patch the prototype later.\n-  Handle<Map> empty_function_map = factory->CreateSloppyFunctionMap(\n+  Handle<Map> empty_function_map = factory()->CreateSloppyFunctionMap(\n       FUNCTION_WITHOUT_PROTOTYPE, MaybeHandle<JSFunction>());\n   empty_function_map->set_is_prototype_map(true);\n   DCHECK(!empty_function_map->is_dictionary_map());\n \n+  // Allocate ScopeInfo for the empty function.\n+  Handle<ScopeInfo> scope_info = ScopeInfo::CreateForEmptyFunction(isolate());\n+\n   // Allocate the empty function as the prototype for function according to\n   // ES#sec-properties-of-the-function-prototype-object\n   NewFunctionArgs args = NewFunctionArgs::ForBuiltin(\n-      factory->empty_string(), empty_function_map, Builtins::kEmptyFunction);\n-  Handle<JSFunction> empty_function = factory->NewFunction(args);\n+      factory()->empty_string(), empty_function_map, Builtins::kEmptyFunction);\n+  Handle<JSFunction> empty_function = factory()->NewFunction(args);\n+  native_context()->set_empty_function(*empty_function);\n \n   // --- E m p t y ---\n-  Handle<String> source = factory->NewStringFromStaticChars(\"() {}\");\n-  Handle<Script> script = factory->NewScript(source);\n+  Handle<String> source = factory()->NewStringFromStaticChars(\"() {}\");\n+  Handle<Script> script = factory()->NewScript(source);\n   script->set_type(Script::TYPE_NATIVE);\n-  Handle<WeakFixedArray> infos = factory->NewWeakFixedArray(2);\n+  Handle<WeakFixedArray> infos = factory()->NewWeakFixedArray(2);\n   script->set_shared_function_infos(*infos);\n+  // TODO(cbruni): fix position information here.\n   empty_function->shared()->set_raw_start_position(0);\n   empty_function->shared()->set_raw_end_position(source->length());\n+  empty_function->shared()->set_scope_info(*scope_info);\n   empty_function->shared()->set_function_literal_id(1);\n   empty_function->shared()->DontAdaptArguments();\n   SharedFunctionInfo::SetScript(handle(empty_function->shared()), script);\n@@ -1165,8 +1173,8 @@ void Genesis::InstallGlobalThisBinding() {\n   Handle<ScriptContextTable> script_contexts(\n       native_context()->script_context_table());\n   Handle<ScopeInfo> scope_info = ScopeInfo::CreateGlobalThisBinding(isolate());\n-  Handle<JSFunction> closure(native_context()->closure());\n-  Handle<Context> context = factory()->NewScriptContext(closure, scope_info);\n+  Handle<Context> context =\n+      factory()->NewScriptContext(native_context(), scope_info);\n \n   // Go ahead and hook it up while we're at it.\n   int slot = scope_info->ReceiverContextSlotIndex();\n@@ -1399,8 +1407,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                                Handle<JSFunction> empty_function,\n                                GlobalContextType context_type) {\n   // --- N a t i v e   C o n t e x t ---\n-  // Use the empty function as closure (no scope info).\n-  native_context()->set_closure(*empty_function);\n+  // Use the empty scope info.\n+  native_context()->set_scope_info(empty_function->shared()->scope_info());\n   native_context()->set_previous(nullptr);\n   // Set extension and global object.\n   native_context()->set_extension(*global_object);\n@@ -1466,14 +1474,10 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     SimpleInstallFunction(object_function, \"setPrototypeOf\",\n                           Builtins::kObjectSetPrototypeOf, 2, false);\n \n-    Handle<JSFunction> object_is_extensible = SimpleInstallFunction(\n-        object_function, \"isExtensible\", Builtins::kObjectIsExtensible,\n-        1, false);\n-    native_context()->set_object_is_extensible(*object_is_extensible);\n-\n-    Handle<JSFunction> object_is_frozen = SimpleInstallFunction(\n-        object_function, \"isFrozen\", Builtins::kObjectIsFrozen, 1, false);\n-    native_context()->set_object_is_frozen(*object_is_frozen);\n+    SimpleInstallFunction(object_function, \"isExtensible\",\n+                          Builtins::kObjectIsExtensible, 1, false);\n+    SimpleInstallFunction(object_function, \"isFrozen\",\n+                          Builtins::kObjectIsFrozen, 1, false);\n \n     Handle<JSFunction> object_is_sealed = SimpleInstallFunction(\n         object_function, \"isSealed\", Builtins::kObjectIsSealed, 1, false);\n@@ -1696,7 +1700,12 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     SimpleInstallFunction(proto, \"unshift\", Builtins::kArrayUnshift, 1, false);\n     SimpleInstallFunction(proto, \"slice\", Builtins::kArrayPrototypeSlice, 2,\n                           false);\n-    SimpleInstallFunction(proto, \"splice\", Builtins::kArraySplice, 2, false);\n+    if (FLAG_enable_experimental_builtins) {\n+      SimpleInstallFunction(proto, \"splice\", Builtins::kArraySpliceTorque, 2,\n+                            false);\n+    } else {\n+      SimpleInstallFunction(proto, \"splice\", Builtins::kArraySplice, 2, false);\n+    }\n     SimpleInstallFunction(proto, \"includes\", Builtins::kArrayIncludes, 1,\n                           false);\n     SimpleInstallFunction(proto, \"indexOf\", Builtins::kArrayIndexOf, 1, false);\n@@ -1808,9 +1817,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     // Install Number constants\n     double kMaxValue = 1.7976931348623157e+308;\n     double kMinValue = 5e-324;\n-\n-    double kMaxSafeInt = 9007199254740991;\n-    double kMinSafeInt = -9007199254740991;\n+    double kMinSafeInteger = -kMaxSafeInteger;\n     double kEPS = 2.220446049250313e-16;\n \n     Handle<Object> infinity = factory->infinity_value();\n@@ -1838,11 +1845,11 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         number_fun, factory->NewStringFromAsciiChecked(\"MAX_SAFE_INTEGER\"),\n-        factory->NewNumber(kMaxSafeInt),\n+        factory->NewNumber(kMaxSafeInteger),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         number_fun, factory->NewStringFromAsciiChecked(\"MIN_SAFE_INTEGER\"),\n-        factory->NewNumber(kMinSafeInt),\n+        factory->NewNumber(kMinSafeInteger),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         number_fun, factory->NewStringFromAsciiChecked(\"EPSILON\"),\n@@ -2331,15 +2338,19 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     {\n       Handle<SharedFunctionInfo> info = SimpleCreateSharedFunctionInfo(\n           isolate, Builtins::kPromiseCapabilityDefaultResolve,\n-          factory->empty_string(), 1);\n+          factory->empty_string(), 1, FunctionKind::kConciseMethod);\n       info->set_native(true);\n+      info->set_function_map_index(\n+          Context::STRICT_FUNCTION_WITHOUT_PROTOTYPE_MAP_INDEX);\n       native_context()->set_promise_capability_default_resolve_shared_fun(\n           *info);\n \n       info = SimpleCreateSharedFunctionInfo(\n           isolate, Builtins::kPromiseCapabilityDefaultReject,\n-          factory->empty_string(), 1);\n+          factory->empty_string(), 1, FunctionKind::kConciseMethod);\n       info->set_native(true);\n+      info->set_function_map_index(\n+          Context::STRICT_FUNCTION_WITHOUT_PROTOTYPE_MAP_INDEX);\n       native_context()->set_promise_capability_default_reject_shared_fun(*info);\n     }\n \n@@ -2720,6 +2731,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           NONE);\n     SimpleInstallFunction(console, \"count\", Builtins::kConsoleCount, 1, false,\n                           NONE);\n+    SimpleInstallFunction(console, \"countReset\", Builtins::kConsoleCountReset,\n+                          1, false, NONE);\n     SimpleInstallFunction(console, \"assert\", Builtins::kFastConsoleAssert, 1,\n                           false, NONE);\n     SimpleInstallFunction(console, \"markTimeline\",\n@@ -2767,6 +2780,10 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n       JSObject::AddProperty(\n           prototype, factory->to_string_tag_symbol(), factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+      SimpleInstallFunction(prototype, \"formatToParts\",\n+                            Builtins::kDateTimeFormatPrototypeFormatToParts, 1,\n+                            false);\n     }\n \n     {\n@@ -2783,6 +2800,10 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n       JSObject::AddProperty(\n           prototype, factory->to_string_tag_symbol(), factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+      SimpleInstallFunction(prototype, \"formatToParts\",\n+                            Builtins::kNumberFormatPrototypeFormatToParts, 1,\n+                            false);\n     }\n \n     {\n@@ -2815,6 +2836,22 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           prototype, factory->to_string_tag_symbol(), factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n     }\n+\n+    {\n+      Handle<JSFunction> plural_rules_constructor = InstallFunction(\n+          intl, \"PluralRules\", JS_OBJECT_TYPE, PluralRules::kSize, 0,\n+          factory->the_hole_value(), Builtins::kIllegal);\n+      native_context()->set_intl_plural_rules_function(\n+          *plural_rules_constructor);\n+\n+      Handle<JSObject> prototype(\n+          JSObject::cast(plural_rules_constructor->prototype()), isolate);\n+\n+      // Install the @@toStringTag property on the {prototype}.\n+      JSObject::AddProperty(\n+          prototype, factory->to_string_tag_symbol(), factory->Object_string(),\n+          static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+    }\n   }\n #endif  // V8_INTL_SUPPORT\n \n@@ -2871,6 +2908,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           true);\n     SimpleInstallFunction(atomics_object, \"wake\", Builtins::kAtomicsWake, 3,\n                           true);\n+    SimpleInstallFunction(atomics_object, \"notify\", Builtins::kAtomicsWake, 3,\n+                          true);\n   }\n \n   {  // -- T y p e d A r r a y\n@@ -2959,6 +2998,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kTypedArrayPrototypeSlice, 2, false);\n     SimpleInstallFunction(prototype, \"some\", Builtins::kTypedArrayPrototypeSome,\n                           1, false);\n+    SimpleInstallFunction(prototype, \"sort\", Builtins::kTypedArrayPrototypeSort,\n+                          1, false);\n     SimpleInstallFunction(prototype, \"subarray\",\n                           Builtins::kTypedArrayPrototypeSubArray, 2, false);\n   }\n@@ -3042,17 +3083,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n   }\n \n   {  // -- M a p\n-    {\n-      Handle<String> index_string = isolate->factory()->zero_string();\n-      uint32_t field =\n-          StringHasher::MakeArrayIndexHash(0, index_string->length());\n-      index_string->set_hash_field(field);\n-\n-      index_string = isolate->factory()->one_string();\n-      field = StringHasher::MakeArrayIndexHash(1, index_string->length());\n-      index_string->set_hash_field(field);\n-    }\n-\n     Handle<JSFunction> js_map_fun =\n         InstallFunction(global, \"Map\", JS_MAP_TYPE, JSMap::kSize, 0,\n                         factory->the_hole_value(), Builtins::kMapConstructor);\n@@ -4136,24 +4166,6 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n       }\n     }\n   }\n-\n-#ifdef V8_INTL_SUPPORT\n-  {  // I n t l  P l u r a l R u l e s\n-    Handle<JSObject> plural_rules_prototype =\n-        factory->NewJSObject(isolate->object_function(), TENURED);\n-    // Install the @@toStringTag property on the {prototype}.\n-    JSObject::AddProperty(\n-        plural_rules_prototype, factory->to_string_tag_symbol(),\n-        factory->Object_string(),\n-        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n-    Handle<JSFunction> plural_rules_constructor = InstallFunction(\n-        container, \"PluralRules\", JS_OBJECT_TYPE, PluralRules::kSize, 0,\n-        plural_rules_prototype, Builtins::kIllegal);\n-    JSObject::AddProperty(plural_rules_prototype, factory->constructor_string(),\n-                          plural_rules_constructor, DONT_ENUM);\n-    native_context->set_intl_plural_rules_function(*plural_rules_constructor);\n-  }\n-#endif  // V8_INTL_SUPPORT\n }\n \n \n@@ -4170,9 +4182,7 @@ EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_static_fields)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_class_fields)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_dynamic_import)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_import_meta)\n-EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_restrict_constructor_return)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_optional_catch_binding)\n-EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_subsume_json)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_numeric_separator)\n \n #undef EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE\n@@ -4402,8 +4412,6 @@ void Genesis::InitializeGlobal_harmony_bigint() {\n   bigint_fun->shared()->set_length(1);\n   InstallWithIntrinsicDefaultProto(isolate(), bigint_fun,\n                                    Context::BIGINT_FUNCTION_INDEX);\n-  heap()->bigint_map()->SetConstructorFunctionIndex(\n-      Context::BIGINT_FUNCTION_INDEX);\n \n   // Install the properties of the BigInt constructor.\n   // asUintN(bits, bigint)\n@@ -4450,30 +4458,56 @@ void Genesis::InitializeGlobal_harmony_bigint() {\n \n #ifdef V8_INTL_SUPPORT\n \n-void Genesis::InitializeGlobal_harmony_number_format_to_parts() {\n-  if (!FLAG_harmony_number_format_to_parts) return;\n-  Handle<JSObject> number_format_prototype(JSObject::cast(\n-      native_context()->intl_number_format_function()->prototype()));\n-  Handle<String> name = factory()->InternalizeUtf8String(\"formatToParts\");\n-  InstallFunction(number_format_prototype,\n-                  SimpleCreateFunction(\n-                      isolate(), name,\n-                      Builtins::kNumberFormatPrototypeFormatToParts, 1, false),\n-                  name);\n-}\n-\n-void Genesis::InitializeGlobal_harmony_plural_rules() {\n-  if (!FLAG_harmony_plural_rules) return;\n+void Genesis::InitializeGlobal_harmony_locale() {\n+  if (!FLAG_harmony_locale) return;\n \n-  Handle<JSFunction> plural_rules(\n-      native_context()->intl_plural_rules_function());\n   Handle<JSObject> intl = Handle<JSObject>::cast(\n       JSReceiver::GetProperty(\n           Handle<JSReceiver>(native_context()->global_object()),\n           factory()->InternalizeUtf8String(\"Intl\"))\n           .ToHandleChecked());\n-  JSObject::AddProperty(intl, factory()->InternalizeUtf8String(\"PluralRules\"),\n-                        plural_rules, DONT_ENUM);\n+\n+  Handle<JSFunction> locale_fun = InstallFunction(\n+      intl, \"Locale\", JS_INTL_LOCALE_TYPE, JSLocale::kSize, 0,\n+      factory()->the_hole_value(), Builtins::kLocaleConstructor);\n+  InstallWithIntrinsicDefaultProto(isolate(), locale_fun,\n+                                   Context::INTL_LOCALE_FUNCTION_INDEX);\n+  locale_fun->shared()->set_length(1);\n+  locale_fun->shared()->DontAdaptArguments();\n+\n+  // Setup %LocalePrototype%.\n+  Handle<JSObject> prototype(JSObject::cast(locale_fun->instance_prototype()));\n+\n+  // Install the @@toStringTag property on the {prototype}.\n+  JSObject::AddProperty(prototype, factory()->to_string_tag_symbol(),\n+                        factory()->NewStringFromAsciiChecked(\"Locale\"),\n+                        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+  SimpleInstallFunction(prototype, \"toString\",\n+                        Builtins::kLocalePrototypeToString, 0, false);\n+  // Base locale getters.\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"language\"),\n+                      Builtins::kLocalePrototypeLanguage, true);\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"script\"),\n+                      Builtins::kLocalePrototypeScript, true);\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"region\"),\n+                      Builtins::kLocalePrototypeRegion, true);\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"baseName\"),\n+                      Builtins::kLocalePrototypeBaseName, true);\n+  // Unicode extension getters.\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"calendar\"),\n+                      Builtins::kLocalePrototypeCalendar, true);\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"caseFirst\"),\n+                      Builtins::kLocalePrototypeCaseFirst, true);\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"collation\"),\n+                      Builtins::kLocalePrototypeCollation, true);\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"hourCycle\"),\n+                      Builtins::kLocalePrototypeHourCycle, true);\n+  SimpleInstallGetter(prototype, factory()->InternalizeUtf8String(\"numeric\"),\n+                      Builtins::kLocalePrototypeNumeric, true);\n+  SimpleInstallGetter(prototype,\n+                      factory()->InternalizeUtf8String(\"numberingSystem\"),\n+                      Builtins::kLocalePrototypeNumberingSystem, true);\n }\n \n #endif  // V8_INTL_SUPPORT\n@@ -4947,15 +4981,6 @@ bool Genesis::InstallExtraNatives() {\n \n   Handle<JSObject> extras_binding =\n       factory()->NewJSObject(isolate()->object_function());\n-\n-  // binding.isTraceCategoryenabled(category)\n-  SimpleInstallFunction(extras_binding, \"isTraceCategoryEnabled\",\n-                        Builtins::kIsTraceCategoryEnabled, 1, true);\n-\n-  // binding.trace(phase, category, name, id, data)\n-  SimpleInstallFunction(extras_binding, \"trace\", Builtins::kTrace, 5,\n-                        true);\n-\n   native_context()->set_extras_binding_object(*extras_binding);\n \n   for (int i = ExtraNatives::GetDebuggerCount();\n@@ -5237,11 +5262,6 @@ bool Genesis::ConfigureGlobalObjects(\n   native_context()->set_js_map_map(js_map_fun->initial_map());\n   native_context()->set_js_set_map(js_set_fun->initial_map());\n \n-  Handle<JSFunction> js_array_constructor(native_context()->array_function());\n-  Handle<JSObject> js_array_prototype(\n-      JSObject::cast(js_array_constructor->instance_prototype()));\n-  native_context()->set_initial_array_prototype_map(js_array_prototype->map());\n-\n   return true;\n }\n \n@@ -5460,7 +5480,7 @@ Genesis::Genesis(\n     DCHECK_EQ(0u, context_snapshot_index);\n     // We get here if there was no context snapshot.\n     CreateRoots();\n-    Handle<JSFunction> empty_function = CreateEmptyFunction(isolate);\n+    Handle<JSFunction> empty_function = CreateEmptyFunction();\n     CreateSloppyModeFunctionMaps(empty_function);\n     CreateStrictModeFunctionMaps(empty_function);\n     CreateObjectFunction(empty_function);"
        },
        {
            "sha": "ec1b37e94f5d7ee937f4e3e36036c6519f712b39",
            "filename": "deps/v8/src/builtins/arm/builtins-arm.cc",
            "status": "modified",
            "additions": 373,
            "deletions": 65,
            "changes": 438,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -5,6 +5,7 @@\n #if V8_TARGET_ARCH_ARM\n \n #include \"src/assembler-inl.h\"\n+#include \"src/code-factory.h\"\n #include \"src/code-stubs.h\"\n #include \"src/counters.h\"\n #include \"src/debug/debug.h\"\n@@ -23,11 +24,11 @@ void Builtins::Generate_Adaptor(MacroAssembler* masm, Address address,\n                                 ExitFrameType exit_frame_type) {\n #if defined(__thumb__)\n   // Thumb mode builtin.\n-  DCHECK_EQ(1, reinterpret_cast<intptr_t>(\n-                   ExternalReference(address, masm->isolate()).address()) &\n+  DCHECK_EQ(1, reinterpret_cast<uintptr_t>(\n+                   ExternalReference::Create(address).address()) &\n                    1);\n #endif\n-  __ mov(r5, Operand(ExternalReference(address, masm->isolate())));\n+  __ Move(r5, ExternalReference::Create(address));\n   if (exit_frame_type == BUILTIN_EXIT) {\n     __ Jump(BUILTIN_CODE(masm->isolate(), AdaptorWithBuiltinExitFrame),\n             RelocInfo::CODE_TARGET);\n@@ -60,7 +61,7 @@ void AdaptorWithExitFrameType(MacroAssembler* masm,\n   // ordinary functions).\n   __ ldr(cp, FieldMemOperand(r1, JSFunction::kContextOffset));\n \n-  // CEntryStub expects r0 to contain the number of arguments including the\n+  // CEntry expects r0 to contain the number of arguments including the\n   // receiver and the extra arguments.\n   __ add(r0, r0, Operand(BuiltinExitFrameConstants::kNumExtraArgsWithReceiver));\n \n@@ -74,9 +75,10 @@ void AdaptorWithExitFrameType(MacroAssembler* masm,\n   // JumpToExternalReference. We have already loaded entry point to r5\n   // in Generate_adaptor.\n   __ mov(r1, r5);\n-  CEntryStub stub(masm->isolate(), 1, kDontSaveFPRegs, kArgvOnStack,\n-                  exit_frame_type == Builtins::BUILTIN_EXIT);\n-  __ Jump(stub.GetCode(), RelocInfo::CODE_TARGET);\n+  Handle<Code> code =\n+      CodeFactory::CEntry(masm->isolate(), 1, kDontSaveFPRegs, kArgvOnStack,\n+                          exit_frame_type == Builtins::BUILTIN_EXIT);\n+  __ Jump(code, RelocInfo::CODE_TARGET);\n }\n }  // namespace\n \n@@ -247,9 +249,10 @@ void Generate_JSBuiltinsConstructStubHelper(MacroAssembler* masm) {\n   __ Jump(lr);\n }\n \n+}  // namespace\n+\n // The construct stub for ES5 constructor functions and ES6 class constructors.\n-void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n-                                     bool restrict_constructor_return) {\n+void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  --      r0: number of arguments (untagged)\n   //  --      r1: constructor function\n@@ -377,7 +380,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // If the result is an object (in the ECMA sense), we should get rid\n     // of the receiver and use the result; see ECMA-262 section 13.2.2-7\n     // on page 74.\n-    Label use_receiver, do_throw, other_result, leave_frame;\n+    Label use_receiver, do_throw, leave_frame;\n \n     // If the result is undefined, we jump out to using the implicit receiver.\n     __ JumpIfRoot(r0, Heap::kUndefinedValueRootIndex, &use_receiver);\n@@ -386,30 +389,14 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // is a valid receiver.\n \n     // If the result is a smi, it is *not* an object in the ECMA sense.\n-    __ JumpIfSmi(r0, &other_result);\n+    __ JumpIfSmi(r0, &use_receiver);\n \n     // If the type of the result (stored in its map) is less than\n     // FIRST_JS_RECEIVER_TYPE, it is not an object in the ECMA sense.\n     STATIC_ASSERT(LAST_JS_RECEIVER_TYPE == LAST_TYPE);\n     __ CompareObjectType(r0, r4, r5, FIRST_JS_RECEIVER_TYPE);\n     __ b(ge, &leave_frame);\n-\n-    // The result is now neither undefined nor an object.\n-    __ bind(&other_result);\n-    __ ldr(r4, MemOperand(fp, ConstructFrameConstants::kConstructorOffset));\n-    __ ldr(r4, FieldMemOperand(r4, JSFunction::kSharedFunctionInfoOffset));\n-    __ ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kFlagsOffset));\n-    __ tst(r4, Operand(SharedFunctionInfo::IsClassConstructorBit::kMask));\n-\n-    if (restrict_constructor_return) {\n-      // Throw if constructor function is a class constructor\n-      __ b(eq, &use_receiver);\n-    } else {\n-      __ b(ne, &use_receiver);\n-      __ CallRuntime(\n-          Runtime::kIncrementUseCounterConstructorReturnNonUndefinedPrimitive);\n-      __ b(&use_receiver);\n-    }\n+    __ b(&use_receiver);\n \n     __ bind(&do_throw);\n     __ CallRuntime(Runtime::kThrowConstructorReturnedNonObject);\n@@ -431,16 +418,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n   __ add(sp, sp, Operand(kPointerSize));\n   __ Jump(lr);\n }\n-}  // namespace\n \n-void Builtins::Generate_JSConstructStubGenericRestrictedReturn(\n-    MacroAssembler* masm) {\n-  Generate_JSConstructStubGeneric(masm, true);\n-}\n-void Builtins::Generate_JSConstructStubGenericUnrestrictedReturn(\n-    MacroAssembler* masm) {\n-  Generate_JSConstructStubGeneric(masm, false);\n-}\n void Builtins::Generate_JSBuiltinsConstructStub(MacroAssembler* masm) {\n   Generate_JSBuiltinsConstructStubHelper(masm);\n }\n@@ -483,7 +461,7 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   // Flood function if we are stepping.\n   ExternalReference debug_hook =\n       ExternalReference::debug_hook_on_function_call_address(masm->isolate());\n-  __ mov(scratch, Operand(debug_hook));\n+  __ Move(scratch, debug_hook);\n   __ ldrsb(scratch, MemOperand(scratch));\n   __ cmp(scratch, Operand(0));\n   __ b(ne, &prepare_step_in_if_stepping);\n@@ -492,7 +470,7 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   // generator.\n   ExternalReference debug_suspended_generator =\n       ExternalReference::debug_suspended_generator_address(masm->isolate());\n-  __ mov(scratch, Operand(debug_suspended_generator));\n+  __ Move(scratch, debug_suspended_generator);\n   __ ldr(scratch, MemOperand(scratch));\n   __ cmp(scratch, Operand(r1));\n   __ b(eq, &prepare_step_in_suspended_generator);\n@@ -562,6 +540,8 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   {\n     FrameAndConstantPoolScope scope(masm, StackFrame::INTERNAL);\n     __ Push(r1, r4);\n+    // Push hole as receiver since we do not use it for stepping.\n+    __ PushRoot(Heap::kTheHoleValueRootIndex);\n     __ CallRuntime(Runtime::kDebugOnFunctionCall);\n     __ Pop(r1);\n     __ ldr(r4, FieldMemOperand(r1, JSGeneratorObject::kFunctionOffset));\n@@ -623,9 +603,9 @@ static void Generate_JSEntryTrampolineHelper(MacroAssembler* masm,\n     FrameScope scope(masm, StackFrame::INTERNAL);\n \n     // Setup the context (we need to use the caller context from the isolate).\n-    ExternalReference context_address(IsolateAddressId::kContextAddress,\n-                                      masm->isolate());\n-    __ mov(cp, Operand(context_address));\n+    ExternalReference context_address = ExternalReference::Create(\n+        IsolateAddressId::kContextAddress, masm->isolate());\n+    __ Move(cp, context_address);\n     __ ldr(cp, MemOperand(cp));\n \n     // Push the function and the receiver onto the stack.\n@@ -848,9 +828,8 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   DCHECK(!AreAliased(bytecode_array, bytecode_offset, bytecode_size_table,\n                      bytecode));\n \n-  __ mov(\n-      bytecode_size_table,\n-      Operand(ExternalReference::bytecode_size_table_address(masm->isolate())));\n+  __ Move(bytecode_size_table,\n+          ExternalReference::bytecode_size_table_address());\n \n   // Check if the bytecode is a Wide or ExtraWide prefix bytecode.\n   Label process_bytecode, extra_wide;\n@@ -1231,9 +1210,9 @@ static void Generate_InterpreterEnterBytecode(MacroAssembler* masm) {\n                          Code::kHeaderSize - kHeapObjectTag));\n \n   // Initialize the dispatch table register.\n-  __ mov(kInterpreterDispatchTableRegister,\n-         Operand(ExternalReference::interpreter_dispatch_table_address(\n-             masm->isolate())));\n+  __ Move(\n+      kInterpreterDispatchTableRegister,\n+      ExternalReference::interpreter_dispatch_table_address(masm->isolate()));\n \n   // Get the bytecode array pointer from the frame.\n   __ ldr(kInterpreterBytecodeArrayRegister,\n@@ -1314,7 +1293,7 @@ static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n   // Figure out the SFI's code object.\n   Label done;\n   Label check_is_bytecode_array;\n-  Label check_is_code;\n+  Label check_is_exported_function_data;\n   Label check_is_fixed_array;\n   Label check_is_pre_parsed_scope_data;\n   Label check_is_function_template_info;\n@@ -1324,8 +1303,7 @@ static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n \n   // IsSmi: Is builtin\n   __ JumpIfNotSmi(sfi_data, &check_is_bytecode_array);\n-  __ Move(scratch1,\n-          Operand(ExternalReference::builtins_address(masm->isolate())));\n+  __ Move(scratch1, ExternalReference::builtins_address(masm->isolate()));\n   __ ldr(sfi_data, MemOperand::PointerAddressFromSmiKey(scratch1, sfi_data));\n   __ b(&done);\n \n@@ -1336,16 +1314,19 @@ static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n \n   // IsBytecodeArray: Interpret bytecode\n   __ cmp(data_type, Operand(BYTECODE_ARRAY_TYPE));\n-  __ b(ne, &check_is_code);\n+  __ b(ne, &check_is_exported_function_data);\n   __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n   __ b(&done);\n \n-  // IsCode: Run code\n-  __ bind(&check_is_code);\n-  __ cmp(data_type, Operand(CODE_TYPE));\n-  __ b(eq, &done);\n+  // IsWasmExportedFunctionData: Use the wrapper code\n+  __ bind(&check_is_exported_function_data);\n+  __ cmp(data_type, Operand(WASM_EXPORTED_FUNCTION_DATA_TYPE));\n+  __ b(ne, &check_is_fixed_array);\n+  __ ldr(sfi_data, FieldMemOperand(\n+                       sfi_data, WasmExportedFunctionData::kWrapperCodeOffset));\n+  __ b(&done);\n \n-  // IsFixedArray: Instantiate using AsmWasmData,\n+  // IsFixedArray: Instantiate using AsmWasmData\n   __ bind(&check_is_fixed_array);\n   __ cmp(data_type, Operand(FIXED_ARRAY_TYPE));\n   __ b(ne, &check_is_pre_parsed_scope_data);\n@@ -1465,8 +1446,7 @@ void Builtins::Generate_DeserializeLazy(MacroAssembler* masm) {\n     // Load the code object at builtins_table[builtin_id] into scratch1.\n \n     __ SmiUntag(scratch1);\n-    __ Move(scratch0,\n-            Operand(ExternalReference::builtins_address(masm->isolate())));\n+    __ Move(scratch0, ExternalReference::builtins_address(masm->isolate()));\n     __ ldr(scratch1, MemOperand(scratch0, scratch1, LSL, kPointerSizeLog2));\n \n     // Check if the loaded code object has already been deserialized. This is\n@@ -2317,7 +2297,7 @@ void Builtins::Generate_ConstructFunction(MacroAssembler* masm) {\n           RelocInfo::CODE_TARGET);\n \n   __ bind(&call_generic_stub);\n-  __ Jump(masm->isolate()->builtins()->JSConstructStubGeneric(),\n+  __ Jump(BUILTIN_CODE(masm->isolate(), JSConstructStubGeneric),\n           RelocInfo::CODE_TARGET);\n }\n \n@@ -2570,8 +2550,6 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   {\n     FrameAndConstantPoolScope scope(masm, StackFrame::INTERNAL);\n \n-    auto wasm_instance_reg = r3;  // TODO(titzer): put in a common place.\n-\n     // Save all parameter registers (see wasm-linkage.cc). They might be\n     // overwritten in the runtime call below. We don't have any callee-saved\n     // registers in wasm, so no need to store anything else.\n@@ -2583,15 +2561,15 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n     __ vstm(db_w, sp, lowest_fp_reg, highest_fp_reg);\n \n     // Pass the WASM instance as an explicit argument to WasmCompileLazy.\n-    __ push(wasm_instance_reg);\n-    // Initialize the JavaScript context with 0. CEntryStub will use it to\n+    __ push(kWasmInstanceRegister);\n+    // Initialize the JavaScript context with 0. CEntry will use it to\n     // set the current context on the isolate.\n     __ Move(cp, Smi::kZero);\n     __ CallRuntime(Runtime::kWasmCompileLazy);\n     // The entrypoint address is the first return value.\n     __ mov(r8, kReturnRegister0);\n     // The WASM instance is the second return value.\n-    __ mov(wasm_instance_reg, kReturnRegister1);\n+    __ mov(kWasmInstanceRegister, kReturnRegister1);\n \n     // Restore registers.\n     __ vldm(ia_w, sp, lowest_fp_reg, highest_fp_reg);\n@@ -2600,6 +2578,336 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   // Finally, jump to the entrypoint.\n   __ Jump(r8);\n }\n+\n+void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n+                               SaveFPRegsMode save_doubles, ArgvMode argv_mode,\n+                               bool builtin_exit_frame) {\n+  // Called from JavaScript; parameters are on stack as if calling JS function.\n+  // r0: number of arguments including receiver\n+  // r1: pointer to builtin function\n+  // fp: frame pointer  (restored after C call)\n+  // sp: stack pointer  (restored as callee's sp after C call)\n+  // cp: current context  (C callee-saved)\n+  //\n+  // If argv_mode == kArgvInRegister:\n+  // r2: pointer to the first argument\n+  ProfileEntryHookStub::MaybeCallEntryHook(masm);\n+\n+  __ mov(r5, Operand(r1));\n+\n+  if (argv_mode == kArgvInRegister) {\n+    // Move argv into the correct register.\n+    __ mov(r1, Operand(r2));\n+  } else {\n+    // Compute the argv pointer in a callee-saved register.\n+    __ add(r1, sp, Operand(r0, LSL, kPointerSizeLog2));\n+    __ sub(r1, r1, Operand(kPointerSize));\n+  }\n+\n+  // Enter the exit frame that transitions from JavaScript to C++.\n+  FrameScope scope(masm, StackFrame::MANUAL);\n+  __ EnterExitFrame(\n+      save_doubles == kSaveFPRegs, 0,\n+      builtin_exit_frame ? StackFrame::BUILTIN_EXIT : StackFrame::EXIT);\n+\n+  // Store a copy of argc in callee-saved registers for later.\n+  __ mov(r4, Operand(r0));\n+\n+// r0, r4: number of arguments including receiver  (C callee-saved)\n+// r1: pointer to the first argument (C callee-saved)\n+// r5: pointer to builtin function  (C callee-saved)\n+\n+#if V8_HOST_ARCH_ARM\n+  int frame_alignment = MacroAssembler::ActivationFrameAlignment();\n+  int frame_alignment_mask = frame_alignment - 1;\n+  if (FLAG_debug_code) {\n+    if (frame_alignment > kPointerSize) {\n+      Label alignment_as_expected;\n+      DCHECK(base::bits::IsPowerOfTwo(frame_alignment));\n+      __ tst(sp, Operand(frame_alignment_mask));\n+      __ b(eq, &alignment_as_expected);\n+      // Don't use Check here, as it will call Runtime_Abort re-entering here.\n+      __ stop(\"Unexpected alignment\");\n+      __ bind(&alignment_as_expected);\n+    }\n+  }\n+#endif\n+\n+  // Call C built-in.\n+  // r0 = argc, r1 = argv, r2 = isolate\n+  __ Move(r2, ExternalReference::isolate_address(masm->isolate()));\n+\n+  // To let the GC traverse the return address of the exit frames, we need to\n+  // know where the return address is. CEntry is unmovable, so\n+  // we can store the address on the stack to be able to find it again and\n+  // we never have to restore it, because it will not change.\n+  // Compute the return address in lr to return to after the jump below. Pc is\n+  // already at '+ 8' from the current instruction but return is after three\n+  // instructions so add another 4 to pc to get the return address.\n+  {\n+    // Prevent literal pool emission before return address.\n+    Assembler::BlockConstPoolScope block_const_pool(masm);\n+    __ add(lr, pc, Operand(4));\n+    __ str(lr, MemOperand(sp));\n+    __ Call(r5);\n+  }\n+\n+  // Result returned in r0 or r1:r0 - do not destroy these registers!\n+\n+  // Check result for exception sentinel.\n+  Label exception_returned;\n+  __ CompareRoot(r0, Heap::kExceptionRootIndex);\n+  __ b(eq, &exception_returned);\n+\n+  // Check that there is no pending exception, otherwise we\n+  // should have returned the exception sentinel.\n+  if (FLAG_debug_code) {\n+    Label okay;\n+    ExternalReference pending_exception_address = ExternalReference::Create(\n+        IsolateAddressId::kPendingExceptionAddress, masm->isolate());\n+    __ Move(r3, pending_exception_address);\n+    __ ldr(r3, MemOperand(r3));\n+    __ CompareRoot(r3, Heap::kTheHoleValueRootIndex);\n+    // Cannot use check here as it attempts to generate call into runtime.\n+    __ b(eq, &okay);\n+    __ stop(\"Unexpected pending exception\");\n+    __ bind(&okay);\n+  }\n+\n+  // Exit C frame and return.\n+  // r0:r1: result\n+  // sp: stack pointer\n+  // fp: frame pointer\n+  Register argc = argv_mode == kArgvInRegister\n+                      // We don't want to pop arguments so set argc to no_reg.\n+                      ? no_reg\n+                      // Callee-saved register r4 still holds argc.\n+                      : r4;\n+  __ LeaveExitFrame(save_doubles == kSaveFPRegs, argc);\n+  __ mov(pc, lr);\n+\n+  // Handling of exception.\n+  __ bind(&exception_returned);\n+\n+  ExternalReference pending_handler_context_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerContextAddress, masm->isolate());\n+  ExternalReference pending_handler_entrypoint_address =\n+      ExternalReference::Create(\n+          IsolateAddressId::kPendingHandlerEntrypointAddress, masm->isolate());\n+  ExternalReference pending_handler_fp_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerFPAddress, masm->isolate());\n+  ExternalReference pending_handler_sp_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerSPAddress, masm->isolate());\n+\n+  // Ask the runtime for help to determine the handler. This will set r0 to\n+  // contain the current pending exception, don't clobber it.\n+  ExternalReference find_handler =\n+      ExternalReference::Create(Runtime::kUnwindAndFindExceptionHandler);\n+  {\n+    FrameScope scope(masm, StackFrame::MANUAL);\n+    __ PrepareCallCFunction(3, 0);\n+    __ mov(r0, Operand(0));\n+    __ mov(r1, Operand(0));\n+    __ Move(r2, ExternalReference::isolate_address(masm->isolate()));\n+    __ CallCFunction(find_handler, 3);\n+  }\n+\n+  // Retrieve the handler context, SP and FP.\n+  __ Move(cp, pending_handler_context_address);\n+  __ ldr(cp, MemOperand(cp));\n+  __ Move(sp, pending_handler_sp_address);\n+  __ ldr(sp, MemOperand(sp));\n+  __ Move(fp, pending_handler_fp_address);\n+  __ ldr(fp, MemOperand(fp));\n+\n+  // If the handler is a JS frame, restore the context to the frame. Note that\n+  // the context will be set to (cp == 0) for non-JS frames.\n+  __ cmp(cp, Operand(0));\n+  __ str(cp, MemOperand(fp, StandardFrameConstants::kContextOffset), ne);\n+\n+  // Reset the masking register. This is done independent of the underlying\n+  // feature flag {FLAG_branch_load_poisoning} to make the snapshot work with\n+  // both configurations. It is safe to always do this, because the underlying\n+  // register is caller-saved and can be arbitrarily clobbered.\n+  __ ResetSpeculationPoisonRegister();\n+\n+  // Compute the handler entry address and jump to it.\n+  ConstantPoolUnavailableScope constant_pool_unavailable(masm);\n+  __ Move(r1, pending_handler_entrypoint_address);\n+  __ ldr(r1, MemOperand(r1));\n+  __ Jump(r1);\n+}\n+\n+void Builtins::Generate_DoubleToI(MacroAssembler* masm) {\n+  Label negate, done;\n+\n+  UseScratchRegisterScope temps(masm);\n+  Register result_reg = r7;\n+  Register double_low = GetRegisterThatIsNotOneOf(result_reg);\n+  Register double_high = GetRegisterThatIsNotOneOf(result_reg, double_low);\n+  LowDwVfpRegister double_scratch = temps.AcquireLowD();\n+\n+  // Save the old values from these temporary registers on the stack.\n+  __ Push(result_reg, double_high, double_low);\n+\n+  // Account for saved regs.\n+  const int kArgumentOffset = 3 * kPointerSize;\n+\n+  MemOperand input_operand(sp, kArgumentOffset);\n+  MemOperand result_operand = input_operand;\n+\n+  // Load double input.\n+  __ vldr(double_scratch, input_operand);\n+  __ vmov(double_low, double_high, double_scratch);\n+  // Try to convert with a FPU convert instruction. This handles all\n+  // non-saturating cases.\n+  __ TryInlineTruncateDoubleToI(result_reg, double_scratch, &done);\n+\n+  Register scratch = temps.Acquire();\n+  __ Ubfx(scratch, double_high, HeapNumber::kExponentShift,\n+          HeapNumber::kExponentBits);\n+  // Load scratch with exponent - 1. This is faster than loading\n+  // with exponent because Bias + 1 = 1024 which is an *ARM* immediate value.\n+  STATIC_ASSERT(HeapNumber::kExponentBias + 1 == 1024);\n+  __ sub(scratch, scratch, Operand(HeapNumber::kExponentBias + 1));\n+  // If exponent is greater than or equal to 84, the 32 less significant\n+  // bits are 0s (2^84 = 1, 52 significant bits, 32 uncoded bits),\n+  // the result is 0.\n+  // Compare exponent with 84 (compare exponent - 1 with 83). If the exponent is\n+  // greater than this, the conversion is out of range, so return zero.\n+  __ cmp(scratch, Operand(83));\n+  __ mov(result_reg, Operand::Zero(), LeaveCC, ge);\n+  __ b(ge, &done);\n+\n+  // If we reach this code, 30 <= exponent <= 83.\n+  // `TryInlineTruncateDoubleToI` above will have truncated any double with an\n+  // exponent lower than 30.\n+  if (masm->emit_debug_code()) {\n+    // Scratch is exponent - 1.\n+    __ cmp(scratch, Operand(30 - 1));\n+    __ Check(ge, AbortReason::kUnexpectedValue);\n+  }\n+\n+  // We don't have to handle cases where 0 <= exponent <= 20 for which we would\n+  // need to shift right the high part of the mantissa.\n+  // Scratch contains exponent - 1.\n+  // Load scratch with 52 - exponent (load with 51 - (exponent - 1)).\n+  __ rsb(scratch, scratch, Operand(51), SetCC);\n+\n+  // 52 <= exponent <= 83, shift only double_low.\n+  // On entry, scratch contains: 52 - exponent.\n+  __ rsb(scratch, scratch, Operand::Zero(), LeaveCC, ls);\n+  __ mov(result_reg, Operand(double_low, LSL, scratch), LeaveCC, ls);\n+  __ b(ls, &negate);\n+\n+  // 21 <= exponent <= 51, shift double_low and double_high\n+  // to generate the result.\n+  __ mov(double_low, Operand(double_low, LSR, scratch));\n+  // Scratch contains: 52 - exponent.\n+  // We needs: exponent - 20.\n+  // So we use: 32 - scratch = 32 - 52 + exponent = exponent - 20.\n+  __ rsb(scratch, scratch, Operand(32));\n+  __ Ubfx(result_reg, double_high, 0, HeapNumber::kMantissaBitsInTopWord);\n+  // Set the implicit 1 before the mantissa part in double_high.\n+  __ orr(result_reg, result_reg,\n+         Operand(1 << HeapNumber::kMantissaBitsInTopWord));\n+  __ orr(result_reg, double_low, Operand(result_reg, LSL, scratch));\n+\n+  __ bind(&negate);\n+  // If input was positive, double_high ASR 31 equals 0 and\n+  // double_high LSR 31 equals zero.\n+  // New result = (result eor 0) + 0 = result.\n+  // If the input was negative, we have to negate the result.\n+  // Input_high ASR 31 equals 0xFFFFFFFF and double_high LSR 31 equals 1.\n+  // New result = (result eor 0xFFFFFFFF) + 1 = 0 - result.\n+  __ eor(result_reg, result_reg, Operand(double_high, ASR, 31));\n+  __ add(result_reg, result_reg, Operand(double_high, LSR, 31));\n+\n+  __ bind(&done);\n+  __ str(result_reg, result_operand);\n+\n+  // Restore registers corrupted in this routine and return.\n+  __ Pop(result_reg, double_high, double_low);\n+  __ Ret();\n+}\n+\n+void Builtins::Generate_MathPowInternal(MacroAssembler* masm) {\n+  const Register exponent = MathPowTaggedDescriptor::exponent();\n+  DCHECK(exponent == r2);\n+  const LowDwVfpRegister double_base = d0;\n+  const LowDwVfpRegister double_exponent = d1;\n+  const LowDwVfpRegister double_result = d2;\n+  const LowDwVfpRegister double_scratch = d3;\n+  const SwVfpRegister single_scratch = s6;\n+  const Register scratch = r9;\n+  const Register scratch2 = r4;\n+\n+  Label call_runtime, done, int_exponent;\n+\n+  // Detect integer exponents stored as double.\n+  __ TryDoubleToInt32Exact(scratch, double_exponent, double_scratch);\n+  __ b(eq, &int_exponent);\n+\n+  __ push(lr);\n+  {\n+    AllowExternalCallThatCantCauseGC scope(masm);\n+    __ PrepareCallCFunction(0, 2);\n+    __ MovToFloatParameters(double_base, double_exponent);\n+    __ CallCFunction(ExternalReference::power_double_double_function(), 0, 2);\n+  }\n+  __ pop(lr);\n+  __ MovFromFloatResult(double_result);\n+  __ b(&done);\n+\n+  // Calculate power with integer exponent.\n+  __ bind(&int_exponent);\n+\n+  // Get two copies of exponent in the registers scratch and exponent.\n+  // Exponent has previously been stored into scratch as untagged integer.\n+  __ mov(exponent, scratch);\n+\n+  __ vmov(double_scratch, double_base);  // Back up base.\n+  __ vmov(double_result, Double(1.0), scratch2);\n+\n+  // Get absolute value of exponent.\n+  __ cmp(scratch, Operand::Zero());\n+  __ rsb(scratch, scratch, Operand::Zero(), LeaveCC, mi);\n+\n+  Label while_true;\n+  __ bind(&while_true);\n+  __ mov(scratch, Operand(scratch, LSR, 1), SetCC);\n+  __ vmul(double_result, double_result, double_scratch, cs);\n+  __ vmul(double_scratch, double_scratch, double_scratch, ne);\n+  __ b(ne, &while_true);\n+\n+  __ cmp(exponent, Operand::Zero());\n+  __ b(ge, &done);\n+  __ vmov(double_scratch, Double(1.0), scratch);\n+  __ vdiv(double_result, double_scratch, double_result);\n+  // Test whether result is zero.  Bail out to check for subnormal result.\n+  // Due to subnormals, x^-y == (1/x)^y does not hold in all cases.\n+  __ VFPCompareAndSetFlags(double_result, 0.0);\n+  __ b(ne, &done);\n+  // double_exponent may not containe the exponent value if the input was a\n+  // smi.  We set it with exponent value before bailing out.\n+  __ vmov(single_scratch, exponent);\n+  __ vcvt_f64_s32(double_exponent, single_scratch);\n+\n+  // Returning or bailing out.\n+  __ push(lr);\n+  {\n+    AllowExternalCallThatCantCauseGC scope(masm);\n+    __ PrepareCallCFunction(0, 2);\n+    __ MovToFloatParameters(double_base, double_exponent);\n+    __ CallCFunction(ExternalReference::power_double_double_function(), 0, 2);\n+  }\n+  __ pop(lr);\n+  __ MovFromFloatResult(double_result);\n+\n+  __ bind(&done);\n+  __ Ret();\n+}\n+\n #undef __\n \n }  // namespace internal"
        },
        {
            "sha": "c397d03f283cd40a4a4971c271a611f87cd9c80f",
            "filename": "deps/v8/src/builtins/arm64/builtins-arm64.cc",
            "status": "modified",
            "additions": 444,
            "deletions": 70,
            "changes": 514,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -5,6 +5,7 @@\n #if V8_TARGET_ARCH_ARM64\n \n #include \"src/arm64/macro-assembler-arm64-inl.h\"\n+#include \"src/code-factory.h\"\n #include \"src/code-stubs.h\"\n #include \"src/counters.h\"\n #include \"src/debug/debug.h\"\n@@ -21,7 +22,7 @@ namespace internal {\n \n void Builtins::Generate_Adaptor(MacroAssembler* masm, Address address,\n                                 ExitFrameType exit_frame_type) {\n-  __ Mov(x5, ExternalReference(address, masm->isolate()));\n+  __ Mov(x5, ExternalReference::Create(address));\n   if (exit_frame_type == BUILTIN_EXIT) {\n     __ Jump(BUILTIN_CODE(masm->isolate(), AdaptorWithBuiltinExitFrame),\n             RelocInfo::CODE_TARGET);\n@@ -54,7 +55,7 @@ void AdaptorWithExitFrameType(MacroAssembler* masm,\n   // ordinary functions).\n   __ Ldr(cp, FieldMemOperand(x1, JSFunction::kContextOffset));\n \n-  // CEntryStub expects x0 to contain the number of arguments including the\n+  // CEntry expects x0 to contain the number of arguments including the\n   // receiver and the extra arguments.\n   __ Add(x0, x0, BuiltinExitFrameConstants::kNumExtraArgsWithReceiver);\n \n@@ -68,9 +69,10 @@ void AdaptorWithExitFrameType(MacroAssembler* masm,\n   // JumpToExternalReference. We have already loaded entry point to x5\n   // in Generate_adaptor.\n   __ Mov(x1, x5);\n-  CEntryStub stub(masm->isolate(), 1, kDontSaveFPRegs, kArgvOnStack,\n-                  exit_frame_type == Builtins::BUILTIN_EXIT);\n-  __ Jump(stub.GetCode(), RelocInfo::CODE_TARGET);\n+  Handle<Code> code =\n+      CodeFactory::CEntry(masm->isolate(), 1, kDontSaveFPRegs, kArgvOnStack,\n+                          exit_frame_type == Builtins::BUILTIN_EXIT);\n+  __ Jump(code, RelocInfo::CODE_TARGET);\n }\n }  // namespace\n \n@@ -274,9 +276,10 @@ void Generate_JSBuiltinsConstructStubHelper(MacroAssembler* masm) {\n   __ Ret();\n }\n \n+}  // namespace\n+\n // The construct stub for ES5 constructor functions and ES6 class constructors.\n-void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n-                                     bool restrict_constructor_return) {\n+void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- x0     : number of arguments\n   //  -- x1     : constructor function\n@@ -418,7 +421,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // If the result is an object (in the ECMA sense), we should get rid\n     // of the receiver and use the result; see ECMA-262 section 13.2.2-7\n     // on page 74.\n-    Label use_receiver, do_throw, other_result, leave_frame;\n+    Label use_receiver, do_throw, leave_frame;\n \n     // If the result is undefined, we jump out to using the implicit receiver.\n     __ CompareRoot(x0, Heap::kUndefinedValueRootIndex);\n@@ -428,30 +431,13 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // is a valid receiver.\n \n     // If the result is a smi, it is *not* an object in the ECMA sense.\n-    __ JumpIfSmi(x0, &other_result);\n+    __ JumpIfSmi(x0, &use_receiver);\n \n     // If the type of the result (stored in its map) is less than\n     // FIRST_JS_RECEIVER_TYPE, it is not an object in the ECMA sense.\n     STATIC_ASSERT(LAST_JS_RECEIVER_TYPE == LAST_TYPE);\n     __ JumpIfObjectType(x0, x4, x5, FIRST_JS_RECEIVER_TYPE, &leave_frame, ge);\n-\n-    // The result is now neither undefined nor an object.\n-    __ Bind(&other_result);\n-    __ Ldr(x4, MemOperand(fp, ConstructFrameConstants::kConstructorOffset));\n-    __ Ldr(x4, FieldMemOperand(x4, JSFunction::kSharedFunctionInfoOffset));\n-    __ Ldr(w4, FieldMemOperand(x4, SharedFunctionInfo::kFlagsOffset));\n-\n-    if (restrict_constructor_return) {\n-      // Throw if constructor function is a class constructor\n-      __ TestAndBranchIfAllClear(\n-          w4, SharedFunctionInfo::IsClassConstructorBit::kMask, &use_receiver);\n-    } else {\n-      __ TestAndBranchIfAnySet(\n-          w4, SharedFunctionInfo::IsClassConstructorBit::kMask, &use_receiver);\n-      __ CallRuntime(\n-          Runtime::kIncrementUseCounterConstructorReturnNonUndefinedPrimitive);\n-      __ B(&use_receiver);\n-    }\n+    __ B(&use_receiver);\n \n     __ Bind(&do_throw);\n     __ CallRuntime(Runtime::kThrowConstructorReturnedNonObject);\n@@ -473,16 +459,6 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n   __ DropArguments(x1, TurboAssembler::kCountExcludesReceiver);\n   __ Ret();\n }\n-}  // namespace\n-\n-void Builtins::Generate_JSConstructStubGenericRestrictedReturn(\n-    MacroAssembler* masm) {\n-  Generate_JSConstructStubGeneric(masm, true);\n-}\n-void Builtins::Generate_JSConstructStubGenericUnrestrictedReturn(\n-    MacroAssembler* masm) {\n-  Generate_JSConstructStubGeneric(masm, false);\n-}\n void Builtins::Generate_JSBuiltinsConstructStub(MacroAssembler* masm) {\n   Generate_JSBuiltinsConstructStubHelper(masm);\n }\n@@ -516,14 +492,14 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   Label stepping_prepared;\n   ExternalReference debug_hook =\n       ExternalReference::debug_hook_on_function_call_address(masm->isolate());\n-  __ Mov(x10, Operand(debug_hook));\n+  __ Mov(x10, debug_hook);\n   __ Ldrsb(x10, MemOperand(x10));\n   __ CompareAndBranch(x10, Operand(0), ne, &prepare_step_in_if_stepping);\n \n   // Flood function if we need to continue stepping in the suspended generator.\n   ExternalReference debug_suspended_generator =\n       ExternalReference::debug_suspended_generator_address(masm->isolate());\n-  __ Mov(x10, Operand(debug_suspended_generator));\n+  __ Mov(x10, debug_suspended_generator);\n   __ Ldr(x10, MemOperand(x10));\n   __ CompareAndBranch(x10, Operand(x1), eq,\n                       &prepare_step_in_suspended_generator);\n@@ -611,8 +587,9 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   __ Bind(&prepare_step_in_if_stepping);\n   {\n     FrameScope scope(masm, StackFrame::INTERNAL);\n-    __ Push(x1, padreg);\n-    __ PushArgument(x4);\n+    // Push hole as receiver since we do not use it for stepping.\n+    __ LoadRoot(x5, Heap::kTheHoleValueRootIndex);\n+    __ Push(x1, padreg, x4, x5);\n     __ CallRuntime(Runtime::kDebugOnFunctionCall);\n     __ Pop(padreg, x1);\n     __ Ldr(x4, FieldMemOperand(x1, JSGeneratorObject::kFunctionOffset));\n@@ -665,7 +642,6 @@ static void Generate_StackOverflowCheck(MacroAssembler* masm, Register num_args,\n //   x0: result.\n static void Generate_JSEntryTrampolineHelper(MacroAssembler* masm,\n                                              bool is_construct) {\n-  // Called from JSEntryStub::GenerateBody().\n   Register new_target = x0;\n   Register function = x1;\n   Register receiver = x2;\n@@ -681,12 +657,10 @@ static void Generate_JSEntryTrampolineHelper(MacroAssembler* masm,\n     FrameScope scope(masm, StackFrame::INTERNAL);\n \n     // Setup the context (we need to use the caller context from the isolate).\n-    __ Mov(scratch, Operand(ExternalReference(IsolateAddressId::kContextAddress,\n-                                              masm->isolate())));\n+    __ Mov(scratch, ExternalReference::Create(IsolateAddressId::kContextAddress,\n+                                              masm->isolate()));\n     __ Ldr(cp, MemOperand(scratch));\n \n-    __ InitializeRootRegister();\n-\n     // Claim enough space for the arguments, the receiver and the function,\n     // including an optional slot of padding.\n     __ Add(slots_to_claim, argc, 3);\n@@ -754,7 +728,7 @@ static void Generate_JSEntryTrampolineHelper(MacroAssembler* masm,\n     __ Mov(x25, x19);\n     __ Mov(x28, x19);\n     // Don't initialize the reserved registers.\n-    // x26 : root register (root).\n+    // x26 : root register (kRootRegister).\n     // x27 : context pointer (cp).\n     // x29 : frame pointer (fp).\n \n@@ -932,9 +906,7 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   DCHECK(!AreAliased(bytecode_array, bytecode_offset, bytecode_size_table,\n                      bytecode));\n \n-  __ Mov(\n-      bytecode_size_table,\n-      Operand(ExternalReference::bytecode_size_table_address(masm->isolate())));\n+  __ Mov(bytecode_size_table, ExternalReference::bytecode_size_table_address());\n \n   // Check if the bytecode is a Wide or ExtraWide prefix bytecode.\n   Label process_bytecode, extra_wide;\n@@ -1106,9 +1078,9 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n   // handler at the current bytecode offset.\n   Label do_dispatch;\n   __ bind(&do_dispatch);\n-  __ Mov(kInterpreterDispatchTableRegister,\n-         Operand(ExternalReference::interpreter_dispatch_table_address(\n-             masm->isolate())));\n+  __ Mov(\n+      kInterpreterDispatchTableRegister,\n+      ExternalReference::interpreter_dispatch_table_address(masm->isolate()));\n   __ Ldrb(x18, MemOperand(kInterpreterBytecodeArrayRegister,\n                           kInterpreterBytecodeOffsetRegister));\n   __ Mov(x1, Operand(x18, LSL, kPointerSizeLog2));\n@@ -1345,9 +1317,9 @@ static void Generate_InterpreterEnterBytecode(MacroAssembler* masm) {\n                          Code::kHeaderSize - kHeapObjectTag));\n \n   // Initialize the dispatch table register.\n-  __ Mov(kInterpreterDispatchTableRegister,\n-         Operand(ExternalReference::interpreter_dispatch_table_address(\n-             masm->isolate())));\n+  __ Mov(\n+      kInterpreterDispatchTableRegister,\n+      ExternalReference::interpreter_dispatch_table_address(masm->isolate()));\n \n   // Get the bytecode array pointer from the frame.\n   __ Ldr(kInterpreterBytecodeArrayRegister,\n@@ -1413,7 +1385,7 @@ void Builtins::Generate_InterpreterEnterBytecodeDispatch(MacroAssembler* masm) {\n \n void Builtins::Generate_CompileLazyDeoptimizedCode(MacroAssembler* masm) {\n   // Set the code slot inside the JSFunction to CompileLazy.\n-  __ Mov(x2, BUILTIN_CODE(masm->isolate(), CompileLazy));\n+  __ Move(x2, BUILTIN_CODE(masm->isolate(), CompileLazy));\n   __ Str(x2, FieldMemOperand(x1, JSFunction::kCodeOffset));\n   __ RecordWriteField(x1, JSFunction::kCodeOffset, x2, x5, kLRHasNotBeenSaved,\n                       kDontSaveFPRegs, OMIT_REMEMBERED_SET, OMIT_SMI_CHECK);\n@@ -1426,7 +1398,7 @@ static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n   // Figure out the SFI's code object.\n   Label done;\n   Label check_is_bytecode_array;\n-  Label check_is_code;\n+  Label check_is_exported_function_data;\n   Label check_is_fixed_array;\n   Label check_is_pre_parsed_scope_data;\n   Label check_is_function_template_info;\n@@ -1448,16 +1420,19 @@ static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n \n   // IsBytecodeArray: Interpret bytecode\n   __ Cmp(data_type, Operand(BYTECODE_ARRAY_TYPE));\n-  __ B(ne, &check_is_code);\n+  __ B(ne, &check_is_exported_function_data);\n   __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n   __ B(&done);\n \n-  // IsCode: Run code\n-  __ Bind(&check_is_code);\n-  __ Cmp(data_type, Operand(CODE_TYPE));\n-  __ B(eq, &done);\n+  // IsWasmExportedFunctionData: Use the wrapper code\n+  __ Bind(&check_is_exported_function_data);\n+  __ Cmp(data_type, Operand(WASM_EXPORTED_FUNCTION_DATA_TYPE));\n+  __ B(ne, &check_is_fixed_array);\n+  __ Ldr(sfi_data, FieldMemOperand(\n+                       sfi_data, WasmExportedFunctionData::kWrapperCodeOffset));\n+  __ B(&done);\n \n-  // IsFixedArray: Instantiate using AsmWasmData,\n+  // IsFixedArray: Instantiate using AsmWasmData\n   __ Bind(&check_is_fixed_array);\n   __ Cmp(data_type, Operand(FIXED_ARRAY_TYPE));\n   __ B(ne, &check_is_pre_parsed_scope_data);\n@@ -2713,7 +2688,7 @@ void Builtins::Generate_ConstructFunction(MacroAssembler* masm) {\n           RelocInfo::CODE_TARGET);\n \n   __ bind(&call_generic_stub);\n-  __ Jump(masm->isolate()->builtins()->JSConstructStubGeneric(),\n+  __ Jump(BUILTIN_CODE(masm->isolate(), JSConstructStubGeneric),\n           RelocInfo::CODE_TARGET);\n }\n \n@@ -3035,8 +3010,6 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   {\n     FrameScope scope(masm, StackFrame::INTERNAL);\n \n-    auto wasm_instance_reg = x7;  // TODO(titzer): put in a common place.\n-\n     // Save all parameter registers (see wasm-linkage.cc). They might be\n     // overwritten in the runtime call below. We don't have any callee-saved\n     // registers in wasm, so no need to store anything else.\n@@ -3048,15 +3021,15 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n     __ Push(x5, x6);  // note: pushed twice because alignment required\n \n     // Pass the WASM instance as an explicit argument to WasmCompileLazy.\n-    __ PushArgument(wasm_instance_reg);\n-    // Initialize the JavaScript context with 0. CEntryStub will use it to\n+    __ PushArgument(kWasmInstanceRegister);\n+    // Initialize the JavaScript context with 0. CEntry will use it to\n     // set the current context on the isolate.\n     __ Move(cp, Smi::kZero);\n     __ CallRuntime(Runtime::kWasmCompileLazy);\n     // The entrypoint address is the first return value.\n     __ mov(x8, kReturnRegister0);\n     // The WASM instance is the second return value.\n-    __ mov(wasm_instance_reg, kReturnRegister1);\n+    __ mov(kWasmInstanceRegister, kReturnRegister1);\n \n     // Restore registers.\n     __ Pop(x6, x5);  // note: pushed twice because alignment required\n@@ -3067,6 +3040,407 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   __ Jump(x8);\n }\n \n+void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n+                               SaveFPRegsMode save_doubles, ArgvMode argv_mode,\n+                               bool builtin_exit_frame) {\n+  // The Abort mechanism relies on CallRuntime, which in turn relies on\n+  // CEntry, so until this stub has been generated, we have to use a\n+  // fall-back Abort mechanism.\n+  //\n+  // Note that this stub must be generated before any use of Abort.\n+  MacroAssembler::NoUseRealAbortsScope no_use_real_aborts(masm);\n+\n+  ASM_LOCATION(\"CEntry::Generate entry\");\n+  ProfileEntryHookStub::MaybeCallEntryHook(masm);\n+\n+  // Register parameters:\n+  //    x0: argc (including receiver, untagged)\n+  //    x1: target\n+  // If argv_mode == kArgvInRegister:\n+  //    x11: argv (pointer to first argument)\n+  //\n+  // The stack on entry holds the arguments and the receiver, with the receiver\n+  // at the highest address:\n+  //\n+  //    sp]argc-1]: receiver\n+  //    sp[argc-2]: arg[argc-2]\n+  //    ...           ...\n+  //    sp[1]:      arg[1]\n+  //    sp[0]:      arg[0]\n+  //\n+  // The arguments are in reverse order, so that arg[argc-2] is actually the\n+  // first argument to the target function and arg[0] is the last.\n+  const Register& argc_input = x0;\n+  const Register& target_input = x1;\n+\n+  // Calculate argv, argc and the target address, and store them in\n+  // callee-saved registers so we can retry the call without having to reload\n+  // these arguments.\n+  // TODO(jbramley): If the first call attempt succeeds in the common case (as\n+  // it should), then we might be better off putting these parameters directly\n+  // into their argument registers, rather than using callee-saved registers and\n+  // preserving them on the stack.\n+  const Register& argv = x21;\n+  const Register& argc = x22;\n+  const Register& target = x23;\n+\n+  // Derive argv from the stack pointer so that it points to the first argument\n+  // (arg[argc-2]), or just below the receiver in case there are no arguments.\n+  //  - Adjust for the arg[] array.\n+  Register temp_argv = x11;\n+  if (argv_mode == kArgvOnStack) {\n+    __ SlotAddress(temp_argv, x0);\n+    //  - Adjust for the receiver.\n+    __ Sub(temp_argv, temp_argv, 1 * kPointerSize);\n+  }\n+\n+  // Reserve three slots to preserve x21-x23 callee-saved registers.\n+  int extra_stack_space = 3;\n+  // Enter the exit frame.\n+  FrameScope scope(masm, StackFrame::MANUAL);\n+  __ EnterExitFrame(\n+      save_doubles == kSaveFPRegs, x10, extra_stack_space,\n+      builtin_exit_frame ? StackFrame::BUILTIN_EXIT : StackFrame::EXIT);\n+\n+  // Poke callee-saved registers into reserved space.\n+  __ Poke(argv, 1 * kPointerSize);\n+  __ Poke(argc, 2 * kPointerSize);\n+  __ Poke(target, 3 * kPointerSize);\n+\n+  // We normally only keep tagged values in callee-saved registers, as they\n+  // could be pushed onto the stack by called stubs and functions, and on the\n+  // stack they can confuse the GC. However, we're only calling C functions\n+  // which can push arbitrary data onto the stack anyway, and so the GC won't\n+  // examine that part of the stack.\n+  __ Mov(argc, argc_input);\n+  __ Mov(target, target_input);\n+  __ Mov(argv, temp_argv);\n+\n+  // x21 : argv\n+  // x22 : argc\n+  // x23 : call target\n+  //\n+  // The stack (on entry) holds the arguments and the receiver, with the\n+  // receiver at the highest address:\n+  //\n+  //         argv[8]:     receiver\n+  // argv -> argv[0]:     arg[argc-2]\n+  //         ...          ...\n+  //         argv[...]:   arg[1]\n+  //         argv[...]:   arg[0]\n+  //\n+  // Immediately below (after) this is the exit frame, as constructed by\n+  // EnterExitFrame:\n+  //         fp[8]:    CallerPC (lr)\n+  //   fp -> fp[0]:    CallerFP (old fp)\n+  //         fp[-8]:   Space reserved for SPOffset.\n+  //         fp[-16]:  CodeObject()\n+  //         sp[...]:  Saved doubles, if saved_doubles is true.\n+  //         sp[32]:   Alignment padding, if necessary.\n+  //         sp[24]:   Preserved x23 (used for target).\n+  //         sp[16]:   Preserved x22 (used for argc).\n+  //         sp[8]:    Preserved x21 (used for argv).\n+  //   sp -> sp[0]:    Space reserved for the return address.\n+  //\n+  // After a successful call, the exit frame, preserved registers (x21-x23) and\n+  // the arguments (including the receiver) are dropped or popped as\n+  // appropriate. The stub then returns.\n+  //\n+  // After an unsuccessful call, the exit frame and suchlike are left\n+  // untouched, and the stub either throws an exception by jumping to one of\n+  // the exception_returned label.\n+\n+  // Prepare AAPCS64 arguments to pass to the builtin.\n+  __ Mov(x0, argc);\n+  __ Mov(x1, argv);\n+  __ Mov(x2, ExternalReference::isolate_address(masm->isolate()));\n+\n+  Label return_location;\n+  __ Adr(x12, &return_location);\n+  __ Poke(x12, 0);\n+\n+  if (__ emit_debug_code()) {\n+    // Verify that the slot below fp[kSPOffset]-8 points to the return location\n+    // (currently in x12).\n+    UseScratchRegisterScope temps(masm);\n+    Register temp = temps.AcquireX();\n+    __ Ldr(temp, MemOperand(fp, ExitFrameConstants::kSPOffset));\n+    __ Ldr(temp, MemOperand(temp, -static_cast<int64_t>(kXRegSize)));\n+    __ Cmp(temp, x12);\n+    __ Check(eq, AbortReason::kReturnAddressNotFoundInFrame);\n+  }\n+\n+  // Call the builtin.\n+  __ Blr(target);\n+  __ Bind(&return_location);\n+\n+  // Result returned in x0 or x1:x0 - do not destroy these registers!\n+\n+  //  x0    result0      The return code from the call.\n+  //  x1    result1      For calls which return ObjectPair.\n+  //  x21   argv\n+  //  x22   argc\n+  //  x23   target\n+  const Register& result = x0;\n+\n+  // Check result for exception sentinel.\n+  Label exception_returned;\n+  __ CompareRoot(result, Heap::kExceptionRootIndex);\n+  __ B(eq, &exception_returned);\n+\n+  // The call succeeded, so unwind the stack and return.\n+\n+  // Restore callee-saved registers x21-x23.\n+  __ Mov(x11, argc);\n+\n+  __ Peek(argv, 1 * kPointerSize);\n+  __ Peek(argc, 2 * kPointerSize);\n+  __ Peek(target, 3 * kPointerSize);\n+\n+  __ LeaveExitFrame(save_doubles == kSaveFPRegs, x10, x9);\n+  if (argv_mode == kArgvOnStack) {\n+    // Drop the remaining stack slots and return from the stub.\n+    __ DropArguments(x11);\n+  }\n+  __ AssertFPCRState();\n+  __ Ret();\n+\n+  // Handling of exception.\n+  __ Bind(&exception_returned);\n+\n+  ExternalReference pending_handler_context_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerContextAddress, masm->isolate());\n+  ExternalReference pending_handler_entrypoint_address =\n+      ExternalReference::Create(\n+          IsolateAddressId::kPendingHandlerEntrypointAddress, masm->isolate());\n+  ExternalReference pending_handler_fp_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerFPAddress, masm->isolate());\n+  ExternalReference pending_handler_sp_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerSPAddress, masm->isolate());\n+\n+  // Ask the runtime for help to determine the handler. This will set x0 to\n+  // contain the current pending exception, don't clobber it.\n+  ExternalReference find_handler =\n+      ExternalReference::Create(Runtime::kUnwindAndFindExceptionHandler);\n+  {\n+    FrameScope scope(masm, StackFrame::MANUAL);\n+    __ Mov(x0, 0);  // argc.\n+    __ Mov(x1, 0);  // argv.\n+    __ Mov(x2, ExternalReference::isolate_address(masm->isolate()));\n+    __ CallCFunction(find_handler, 3);\n+  }\n+\n+  // Retrieve the handler context, SP and FP.\n+  __ Mov(cp, pending_handler_context_address);\n+  __ Ldr(cp, MemOperand(cp));\n+  {\n+    UseScratchRegisterScope temps(masm);\n+    Register scratch = temps.AcquireX();\n+    __ Mov(scratch, pending_handler_sp_address);\n+    __ Ldr(scratch, MemOperand(scratch));\n+    __ Mov(sp, scratch);\n+  }\n+  __ Mov(fp, pending_handler_fp_address);\n+  __ Ldr(fp, MemOperand(fp));\n+\n+  // If the handler is a JS frame, restore the context to the frame. Note that\n+  // the context will be set to (cp == 0) for non-JS frames.\n+  Label not_js_frame;\n+  __ Cbz(cp, &not_js_frame);\n+  __ Str(cp, MemOperand(fp, StandardFrameConstants::kContextOffset));\n+  __ Bind(&not_js_frame);\n+\n+  // Reset the masking register. This is done independent of the underlying\n+  // feature flag {FLAG_branch_load_poisoning} to make the snapshot work with\n+  // both configurations. It is safe to always do this, because the underlying\n+  // register is caller-saved and can be arbitrarily clobbered.\n+  __ ResetSpeculationPoisonRegister();\n+\n+  // Compute the handler entry address and jump to it.\n+  __ Mov(x10, pending_handler_entrypoint_address);\n+  __ Ldr(x10, MemOperand(x10));\n+  __ Br(x10);\n+}\n+\n+void Builtins::Generate_DoubleToI(MacroAssembler* masm) {\n+  Label done;\n+  Register result = x7;\n+\n+  DCHECK(result.Is64Bits());\n+\n+  UseScratchRegisterScope temps(masm);\n+  Register scratch1 = temps.AcquireX();\n+  Register scratch2 = temps.AcquireX();\n+  DoubleRegister double_scratch = temps.AcquireD();\n+\n+  // Account for saved regs.\n+  const int kArgumentOffset = 2 * kPointerSize;\n+\n+  __ Push(result, scratch1);  // scratch1 is also pushed to preserve alignment.\n+  __ Peek(double_scratch, kArgumentOffset);\n+\n+  // Try to convert with a FPU convert instruction.  This handles all\n+  // non-saturating cases.\n+  __ TryConvertDoubleToInt64(result, double_scratch, &done);\n+  __ Fmov(result, double_scratch);\n+\n+  // If we reach here we need to manually convert the input to an int32.\n+\n+  // Extract the exponent.\n+  Register exponent = scratch1;\n+  __ Ubfx(exponent, result, HeapNumber::kMantissaBits,\n+          HeapNumber::kExponentBits);\n+\n+  // It the exponent is >= 84 (kMantissaBits + 32), the result is always 0 since\n+  // the mantissa gets shifted completely out of the int32_t result.\n+  __ Cmp(exponent, HeapNumber::kExponentBias + HeapNumber::kMantissaBits + 32);\n+  __ CzeroX(result, ge);\n+  __ B(ge, &done);\n+\n+  // The Fcvtzs sequence handles all cases except where the conversion causes\n+  // signed overflow in the int64_t target. Since we've already handled\n+  // exponents >= 84, we can guarantee that 63 <= exponent < 84.\n+\n+  if (masm->emit_debug_code()) {\n+    __ Cmp(exponent, HeapNumber::kExponentBias + 63);\n+    // Exponents less than this should have been handled by the Fcvt case.\n+    __ Check(ge, AbortReason::kUnexpectedValue);\n+  }\n+\n+  // Isolate the mantissa bits, and set the implicit '1'.\n+  Register mantissa = scratch2;\n+  __ Ubfx(mantissa, result, 0, HeapNumber::kMantissaBits);\n+  __ Orr(mantissa, mantissa, 1UL << HeapNumber::kMantissaBits);\n+\n+  // Negate the mantissa if necessary.\n+  __ Tst(result, kXSignMask);\n+  __ Cneg(mantissa, mantissa, ne);\n+\n+  // Shift the mantissa bits in the correct place. We know that we have to shift\n+  // it left here, because exponent >= 63 >= kMantissaBits.\n+  __ Sub(exponent, exponent,\n+         HeapNumber::kExponentBias + HeapNumber::kMantissaBits);\n+  __ Lsl(result, mantissa, exponent);\n+\n+  __ Bind(&done);\n+  __ Poke(result, kArgumentOffset);\n+  __ Pop(scratch1, result);\n+  __ Ret();\n+}\n+\n+void Builtins::Generate_MathPowInternal(MacroAssembler* masm) {\n+  // Stack on entry:\n+  // sp[0]: Exponent (as a tagged value).\n+  // sp[1]: Base (as a tagged value).\n+  //\n+  // The (tagged) result will be returned in x0, as a heap number.\n+\n+  Register exponent_tagged = MathPowTaggedDescriptor::exponent();\n+  DCHECK(exponent_tagged.is(x11));\n+  Register exponent_integer = MathPowIntegerDescriptor::exponent();\n+  DCHECK(exponent_integer.is(x12));\n+  Register saved_lr = x19;\n+  VRegister result_double = d0;\n+  VRegister base_double = d0;\n+  VRegister exponent_double = d1;\n+  VRegister base_double_copy = d2;\n+  VRegister scratch1_double = d6;\n+  VRegister scratch0_double = d7;\n+\n+  // A fast-path for integer exponents.\n+  Label exponent_is_smi, exponent_is_integer;\n+  // Allocate a heap number for the result, and return it.\n+  Label done;\n+\n+  // Unpack the inputs.\n+\n+  // Handle double (heap number) exponents.\n+  // Detect integer exponents stored as doubles and handle those in the\n+  // integer fast-path.\n+  __ TryRepresentDoubleAsInt64(exponent_integer, exponent_double,\n+                               scratch0_double, &exponent_is_integer);\n+\n+  {\n+    AllowExternalCallThatCantCauseGC scope(masm);\n+    __ Mov(saved_lr, lr);\n+    __ CallCFunction(ExternalReference::power_double_double_function(), 0, 2);\n+    __ Mov(lr, saved_lr);\n+    __ B(&done);\n+  }\n+\n+  // Handle SMI exponents.\n+  __ Bind(&exponent_is_smi);\n+  //  x10   base_tagged       The tagged base (input).\n+  //  x11   exponent_tagged   The tagged exponent (input).\n+  //  d1    base_double       The base as a double.\n+  __ SmiUntag(exponent_integer, exponent_tagged);\n+\n+  __ Bind(&exponent_is_integer);\n+  //  x10   base_tagged       The tagged base (input).\n+  //  x11   exponent_tagged   The tagged exponent (input).\n+  //  x12   exponent_integer  The exponent as an integer.\n+  //  d1    base_double       The base as a double.\n+\n+  // Find abs(exponent). For negative exponents, we can find the inverse later.\n+  Register exponent_abs = x13;\n+  __ Cmp(exponent_integer, 0);\n+  __ Cneg(exponent_abs, exponent_integer, mi);\n+  //  x13   exponent_abs      The value of abs(exponent_integer).\n+\n+  // Repeatedly multiply to calculate the power.\n+  //  result = 1.0;\n+  //  For each bit n (exponent_integer{n}) {\n+  //    if (exponent_integer{n}) {\n+  //      result *= base;\n+  //    }\n+  //    base *= base;\n+  //    if (remaining bits in exponent_integer are all zero) {\n+  //      break;\n+  //    }\n+  //  }\n+  Label power_loop, power_loop_entry, power_loop_exit;\n+  __ Fmov(scratch1_double, base_double);\n+  __ Fmov(base_double_copy, base_double);\n+  __ Fmov(result_double, 1.0);\n+  __ B(&power_loop_entry);\n+\n+  __ Bind(&power_loop);\n+  __ Fmul(scratch1_double, scratch1_double, scratch1_double);\n+  __ Lsr(exponent_abs, exponent_abs, 1);\n+  __ Cbz(exponent_abs, &power_loop_exit);\n+\n+  __ Bind(&power_loop_entry);\n+  __ Tbz(exponent_abs, 0, &power_loop);\n+  __ Fmul(result_double, result_double, scratch1_double);\n+  __ B(&power_loop);\n+\n+  __ Bind(&power_loop_exit);\n+\n+  // If the exponent was positive, result_double holds the result.\n+  __ Tbz(exponent_integer, kXSignBit, &done);\n+\n+  // The exponent was negative, so find the inverse.\n+  __ Fmov(scratch0_double, 1.0);\n+  __ Fdiv(result_double, scratch0_double, result_double);\n+  // ECMA-262 only requires Math.pow to return an 'implementation-dependent\n+  // approximation' of base^exponent. However, mjsunit/math-pow uses Math.pow\n+  // to calculate the subnormal value 2^-1074. This method of calculating\n+  // negative powers doesn't work because 2^1074 overflows to infinity. To\n+  // catch this corner-case, we bail out if the result was 0. (This can only\n+  // occur if the divisor is infinity or the base is zero.)\n+  __ Fcmp(result_double, 0.0);\n+  __ B(&done, ne);\n+\n+  AllowExternalCallThatCantCauseGC scope(masm);\n+  __ Mov(saved_lr, lr);\n+  __ Fmov(base_double, base_double_copy);\n+  __ Scvtf(exponent_double, exponent_integer);\n+  __ CallCFunction(ExternalReference::power_double_double_function(), 0, 2);\n+  __ Mov(lr, saved_lr);\n+  __ Bind(&done);\n+  __ Ret();\n+}\n+\n #undef __\n \n }  // namespace internal"
        },
        {
            "sha": "69aea57f5a98461c9d871c583ba62317ff1eeafb",
            "filename": "deps/v8/src/builtins/array.tq",
            "status": "added",
            "additions": 469,
            "deletions": 0,
            "changes": 469,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -0,0 +1,469 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+module array {\n+  macro FastArraySplice(\n+      context: Context, args: Arguments, o: Object,\n+      originalLengthNumber: Number, actualStartNumber: Number, insertCount: Smi,\n+      actualDeleteCountNumber: Number): Object\n+  labels Bailout {\n+    let originalLength: Smi = cast<Smi>(originalLengthNumber) otherwise Bailout;\n+    let actualStart: Smi = cast<Smi>(actualStartNumber) otherwise Bailout;\n+    let actualDeleteCount: Smi =\n+        cast<Smi>(actualDeleteCountNumber) otherwise Bailout;\n+    let lengthDelta: Smi = insertCount - actualDeleteCount;\n+    let newLength: Smi = originalLength + lengthDelta;\n+\n+    let a: JSArray = cast<JSArray>(o) otherwise Bailout;\n+\n+    let map: Map = a.map;\n+    if (!IsPrototypeInitialArrayPrototype(context, map)) goto Bailout;\n+    if (IsNoElementsProtectorCellInvalid()) goto Bailout;\n+    if (IsArraySpeciesProtectorCellInvalid()) goto Bailout;\n+\n+    // Fast path only works on fast elements kind and with writable length.\n+    let elementsKind: ElementsKind = EnsureArrayPushable(map) otherwise Bailout;\n+    if (!IsFastElementsKind(elementsKind)) goto Bailout;\n+\n+    // For now, only support non-double fast elements\n+    if (!IsFastSmiOrTaggedElementsKind(elementsKind)) goto Bailout;\n+\n+    if (IsFastSmiElementsKind(elementsKind)) {\n+      for (let e: Object of args [2: ]) {\n+        if (TaggedIsNotSmi(e)) goto Bailout;\n+      }\n+    }\n+\n+    // Make sure that the length hasn't been changed by side-effect.\n+    let length: Smi = cast<Smi>(a.length) otherwise Bailout;\n+    if (originalLength != length) goto Bailout;\n+\n+    let deletedResult: JSArray =\n+        ExtractFastJSArray(context, a, actualStart, actualDeleteCount);\n+\n+    if (newLength == 0) {\n+      a.elements = kEmptyFixedArray;\n+      a.length = 0;\n+      return deletedResult;\n+    }\n+\n+    let elements: FixedArray = cast<FixedArray>(a.elements) otherwise Bailout;\n+    let elementsMap: Map = elements.map;\n+\n+    // If the source is a COW array or the spliced array is larger then the\n+    // source array, then allocate a new FixedArray to hold the result.\n+    let newElements: FixedArray = elements;\n+    if ((elementsMap == kCOWMap) || (lengthDelta > 0)) {\n+      newElements = ExtractFixedArray(\n+          elements, 0, actualStart, newLength, kAllFixedArrays);\n+      newElements.map = elementsMap;\n+      a.elements = newElements;\n+    }\n+\n+    // Double check that the array is still in fast elements mode\n+    assert(IsFastSmiElementsKind(a.map.elements_kind));\n+\n+    // Copy over inserted elements.\n+    let k: Smi = actualStart;\n+    if (insertCount > 0) {\n+      for (let e: Object of args [2: ]) {\n+        newElements[k++] = e;\n+      }\n+    }\n+\n+    // Copy over elements after deleted elements.\n+    let count: Smi = length - actualStart - actualDeleteCount;\n+    while (count > 0) {\n+      let e: Object = elements[k - lengthDelta];\n+      newElements[k++] = e;\n+      count--;\n+    }\n+\n+    // Fill rest of spliced FixedArray with the hole, but only if the\n+    // destination FixedArray is the original array's, since otherwise the array\n+    // is pre-filled with holes.\n+    if (elements == newElements) {\n+      let limit: Smi = elements.length;\n+      while (k < limit) {\n+        newElements[k++] = Hole;\n+      }\n+    }\n+\n+    // Update the array's length after all the FixedArray shuffling is done.\n+    a.length = newLength;\n+\n+    return deletedResult;\n+  }\n+\n+  // https://tc39.github.io/ecma262/#sec-array.prototype.splice\n+  javascript builtin ArraySpliceTorque(\n+      context: Context, receiver: Object, ...arguments): Object {\n+    // 1. Let O be ? ToObject(this value).\n+    let o: Object = ToObject(context, receiver);\n+\n+    // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+    let len: Number =\n+        ToLength_Inline(context, GetProperty(context, o, 'length'));\n+\n+    // 3. Let relativeStart be ? ToInteger(start).\n+    let start: Object = arguments[0];\n+    let relativeStart: Number = ToInteger_Inline(context, start);\n+\n+    // 4. If relativeStart < 0, let actualStart be max((len + relativeStart),\n+    // 0);\n+    //    else let actualStart be min(relativeStart, len).\n+    let actualStart: Number = relativeStart < 0 ?\n+        max((len + relativeStart), 0) :\n+        min(relativeStart, len);\n+\n+    let insertCount: Smi;\n+    let actualDeleteCount: Number;\n+    // 5. If the Number of actual arguments is 0, then\n+    if (arguments.length == 0) {\n+      // a. Let insertCount be 0.\n+      insertCount = 0;\n+      // b. Let actualDeleteCount be 0.\n+      actualDeleteCount = 0;\n+      // 6. Else if the Number of actual arguments is 1, then\n+    } else if (arguments.length == 1) {\n+      // a. Let insertCount be 0.\n+      insertCount = 0;\n+      // b. Let actualDeleteCount be len - actualStart.\n+      actualDeleteCount = len - actualStart;\n+      // 7. Else,\n+    } else {\n+      // a. Let insertCount be the Number of actual arguments minus 2.\n+      insertCount = convert<Smi>(arguments.length) - 2;\n+      // b. Let dc be ? ToInteger(deleteCount).\n+      let deleteCount: Object = arguments[1];\n+      let dc: Number = ToInteger_Inline(context, deleteCount);\n+      // c. Let actualDeleteCount be min(max(dc, 0), len - actualStart).\n+      actualDeleteCount = min(max(dc, 0), len - actualStart);\n+    }\n+\n+    // 8. If len + insertCount - actualDeleteCount > 2^53-1, throw a\n+    //    Bailout exception.\n+    if (len + insertCount - actualDeleteCount > kMaxSafeInteger) {\n+      ThrowRangeError(context, kInvalidArrayLengthMessage);\n+    }\n+\n+    try {\n+      return FastArraySplice(\n+          context, arguments, o, len, actualStart, insertCount,\n+          actualDeleteCount) otherwise Bailout;\n+    }\n+    label Bailout {}\n+    // If the fast case fails, just continue with the slow, correct,\n+    // spec-compliant case.\n+\n+    // 9. Let A be ? ArraySpeciesCreate(O, actualDeleteCount).\n+    let a: Object = ArraySpeciesCreate(context, o, actualDeleteCount);\n+\n+    // 10. Let k be 0.\n+    let k: Number = 0;\n+\n+    // 11. Repeat, while k < actualDeleteCount\n+    while (k < actualDeleteCount) {\n+      // a. Let from be ! ToString(actualStart + k).\n+      let from: String = ToString_Inline(context, actualStart + k);\n+\n+      // b. Let fromPresent be ? HasProperty(O, from).\n+      let fromPresent: Oddball =\n+          HasPropertyObject(o, from, context, kHasProperty);\n+\n+      // c. If fromPresent is true, then\n+      if (fromPresent == True) {\n+        // i. Let fromValue be ? Get(O, from).\n+        let fromValue: Object = GetProperty(context, o, from);\n+\n+        // ii. Perform ? CreateDataPropertyOrThrow(A, ! ToString(k), fromValue).\n+        CreateDataProperty(context, a, ToString_Inline(context, k), fromValue);\n+      }\n+\n+      // d. Increment k by 1.\n+      k = k + 1;\n+    }\n+\n+    // 12. Perform ? Set(A, \"length\", actualDeleteCount, true).\n+    SetProperty(context, a, 'length', actualDeleteCount, strict);\n+\n+    // 13. Let items be a List whose elements are, in left-to-right order,\n+    //     the portion of the actual argument list starting with the third\n+    //     argument. The list is empty if fewer than three arguments were\n+    //     passed.\n+    // 14. Let itemCount be the Number of elements in items.\n+    let itemCount: Number = insertCount;\n+\n+    // 15. If itemCount < actualDeleteCount, then\n+    if (itemCount < actualDeleteCount) {\n+      // a. Let k be actualStart.\n+      let k: Number = actualStart;\n+\n+      // b. Repeat, while k < (len - actualDeleteCount)\n+      while (k < (len - actualDeleteCount)) {\n+        // i. Let from be ! ToString(k + actualDeleteCount).\n+        let from: String = ToString_Inline(context, k + actualDeleteCount);\n+        // ii. Let to be ! ToString(k + itemCount).\n+        let to: String = ToString_Inline(context, k + itemCount);\n+\n+        // iii. Let fromPresent be ? HasProperty(O, from).\n+        let fromPresent: Oddball =\n+            HasPropertyObject(o, from, context, kHasProperty);\n+\n+        // iv. If fromPresent is true, then\n+        if (fromPresent == True) {\n+          // 1. Let fromValue be ? Get(O, from).\n+          let fromValue: Object = GetProperty(context, o, from);\n+\n+          // 2. Perform ? Set(O, to, fromValue, true).\n+          SetProperty(context, o, to, fromValue, strict);\n+\n+          // v. Else fromPresent is false,\n+        } else {\n+          // 1. Perform ? DeletePropertyOrThrow(O, to).\n+          DeleteProperty(context, o, to, strict);\n+        }\n+        // vi. Increase k by 1.\n+        k = k + 1;\n+      }\n+\n+      // c. Let k be len.\n+      k = len;\n+      // d. Repeat, while k > (len - actualDeleteCount + itemCount)\n+      while (k > (len - actualDeleteCount + itemCount)) {\n+        // i. Perform ? DeletePropertyOrThrow(O, ! ToString(k - 1)).\n+        DeleteProperty(context, o, ToString_Inline(context, k - 1), strict);\n+\n+        // ii. Decrease k by 1.\n+        k = k - 1;\n+      }\n+      // 16. Else if itemCount > actualDeleteCount, then\n+    } else if (itemCount > actualDeleteCount) {\n+      // a. Let k be (len - actualDeleteCount).\n+      let k: Number = len - actualDeleteCount;\n+\n+      // b. Repeat, while k > actualStart\n+      while (k > actualStart) {\n+        // i. Let from be ! ToString(k + actualDeleteCount - 1).\n+        let from: String = ToString_Inline(context, k + actualDeleteCount - 1);\n+\n+        // ii. Let to be ! ToString(k + itemCount - 1).\n+        let to: String = ToString_Inline(context, k + itemCount - 1);\n+\n+        // iii. Let fromPresent be ? HasProperty(O, from).\n+        let fromPresent: Oddball =\n+            HasPropertyObject(o, from, context, kHasProperty);\n+\n+        // iv. If fromPresent is true, then\n+        if (fromPresent == True) {\n+          // 1. Let fromValue be ? Get(O, from).\n+          let fromValue: Object = GetProperty(context, o, from);\n+\n+          // 2. Perform ? Set(O, to, fromValue, true).\n+          SetProperty(context, o, to, fromValue, strict);\n+\n+          // v. Else fromPresent is false,\n+        } else {\n+          // 1. Perform ? DeletePropertyOrThrow(O, to).\n+          DeleteProperty(context, o, to, strict);\n+        }\n+\n+        // vi. Decrease k by 1.\n+        k = k - 1;\n+      }\n+    }\n+\n+    // 17. Let k be actualStart.\n+    k = actualStart;\n+\n+    // 18. Repeat, while items is not empty\n+    //   a. Remove the first element from items and let E be the value of that\n+    //   element.\n+    if (arguments.length > 2) {\n+      for (let e: Object of arguments [2: ]) {\n+        // b. Perform ? Set(O, ! ToString(k), E, true).\n+        SetProperty(context, o, ToString_Inline(context, k), e, strict);\n+\n+        // c. Increase k by 1.\n+        k = k + 1;\n+      }\n+    }\n+\n+    // 19. Perform ? Set(O, \"length\", len - actualDeleteCount + itemCount,\n+    // true).\n+    SetProperty(\n+        context, o, 'length', len - actualDeleteCount + itemCount, strict);\n+\n+    return a;\n+  }\n+\n+  macro ArrayForEachTorqueContinuation(\n+      context: Context, o: Object, len: Number, callbackfn: Callable,\n+      thisArg: Object, initial_k: Smi): Object {\n+    // 5. Let k be 0.\n+    // 6. Repeat, while k < len\n+    for (let k: Smi = initial_k; k < len; k = k + 1) {\n+      // 6a. Let Pk be ! ToString(k).\n+      let pK: String = ToString_Inline(context, k);\n+\n+      // 6b. Let kPresent be ? HasProperty(O, Pk).\n+      let kPresent: Oddball = HasPropertyObject(o, pK, context, kHasProperty);\n+\n+      // 6c. If kPresent is true, then\n+      if (kPresent == True) {\n+        // 6c. i. Let kValue be ? Get(O, Pk).\n+        let kValue: Object = GetProperty(context, o, pK);\n+\n+        // 6c. ii. Perform ? Call(callbackfn, T, <kValue, k, O>).\n+        Call(context, callbackfn, thisArg, kValue, k, o);\n+      }\n+\n+      // 6d. Increase k by 1. (done by the loop).\n+    }\n+    return Undefined;\n+  }\n+\n+  javascript builtin ArrayForEachLoopEagerDeoptContinuation(\n+      context: Context, receiver: Object, callback: Object, thisArg: Object,\n+      initialK: Object, length: Object): Object {\n+    return ArrayForEachLoopContinuation(\n+        context, receiver, callback, thisArg, Undefined, receiver, initialK,\n+        length, Undefined);\n+  }\n+\n+  javascript builtin ArrayForEachLoopLazyDeoptContinuation(\n+      context: Context, receiver: Object, callback: Object, thisArg: Object,\n+      initialK: Object, length: Object, result: Object): Object {\n+    return ArrayForEachLoopContinuation(\n+        context, receiver, callback, thisArg, Undefined, receiver, initialK,\n+        length, Undefined);\n+  }\n+\n+  builtin ArrayForEachLoopContinuation(\n+      context: Context, receiver: Object, callback: Object, thisArg: Object,\n+      array: Object, object: Object, initialK: Object, length: Object,\n+      to: Object): Object {\n+    try {\n+      let callbackfn: Callable = cast<Callable>(callback) otherwise Unexpected;\n+      let k: Smi = cast<Smi>(initialK) otherwise Unexpected;\n+      let number_length: Number = cast<Number>(length) otherwise Unexpected;\n+\n+      return ArrayForEachTorqueContinuation(\n+          context, object, number_length, callbackfn, thisArg, k);\n+    }\n+    label Unexpected {\n+      unreachable;\n+    }\n+  }\n+\n+  macro VisitAllElements<FixedArrayType : type>(\n+      context: Context, a: JSArray, len: Smi, callbackfn: Callable,\n+      thisArg: Object): void labels\n+  Bailout(Smi) {\n+    let k: Smi = 0;\n+    let map: Map = a.map;\n+\n+    try {\n+      // Build a fast loop over the smi array.\n+      for (; k < len; k = k + 1) {\n+        // Ensure that the map didn't change.\n+        if (map != a.map) goto Slow;\n+        // Ensure that we haven't walked beyond a possibly updated length.\n+        if (k >= a.length) goto Slow;\n+\n+        try {\n+          let value: Object =\n+              LoadElementNoHole<FixedArrayType>(a, k) otherwise FoundHole;\n+          Call(context, callbackfn, thisArg, value, k, a);\n+        }\n+        label FoundHole {\n+          // If we found the hole, we need to bail out if the initial\n+          // array prototype has had elements inserted. This is preferable\n+          // to walking the prototype chain looking for elements.\n+\n+          if (IsNoElementsProtectorCellInvalid()) goto Bailout(k);\n+        }\n+      }\n+    }\n+    label Slow {\n+      goto Bailout(k);\n+    }\n+  }\n+\n+  macro FastArrayForEach(\n+      context: Context, o: Object, len: Number, callbackfn: Callable,\n+      thisArg: Object): Object labels\n+  Bailout(Smi) {\n+    let k: Smi = 0;\n+    try {\n+      let smi_len: Smi = cast<Smi>(len) otherwise Slow;\n+      let a: JSArray = cast<JSArray>(o) otherwise Slow;\n+      let map: Map = a.map;\n+\n+      if (!IsPrototypeInitialArrayPrototype(context, map)) goto Slow;\n+      let elementsKind: ElementsKind = map.elements_kind;\n+      if (!IsFastElementsKind(elementsKind)) goto Slow;\n+\n+      if (IsElementsKindGreaterThan(elementsKind, HOLEY_ELEMENTS)) {\n+        VisitAllElements<FixedDoubleArray>(\n+            context, a, smi_len, callbackfn, thisArg)\n+        otherwise Bailout;\n+      } else {\n+        VisitAllElements<FixedArray>(context, a, smi_len, callbackfn, thisArg)\n+        otherwise Bailout;\n+      }\n+    }\n+    label Slow {\n+      goto Bailout(k);\n+    }\n+    return Undefined;\n+  }\n+\n+  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n+  javascript builtin ArrayForEach(\n+      context: Context, receiver: Object, ...arguments): Object {\n+    try {\n+      if (IsNullOrUndefined(receiver)) {\n+        goto NullOrUndefinedError;\n+      }\n+\n+      // 1. Let O be ? ToObject(this value).\n+      let o: Object = ToObject(context, receiver);\n+\n+      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+      let len: Number =\n+          ToLength_Inline(context, GetProperty(context, o, 'length'));\n+\n+      // 3. If IsCallable(callbackfn) is false, throw a TypeError exception.\n+      if (arguments.length == 0) {\n+        goto TypeError;\n+      }\n+      let callbackfn: Callable =\n+          cast<Callable>(arguments[0]) otherwise TypeError;\n+\n+      // 4. If thisArg is present, let T be thisArg; else let T be undefined.\n+      let thisArg: Object = arguments.length > 1 ? arguments[1] : Undefined;\n+\n+      // Special cases.\n+      let k: Smi = 0;\n+      try {\n+        return FastArrayForEach(context, o, len, callbackfn, thisArg)\n+        otherwise Bailout;\n+      }\n+      label Bailout(k_value: Smi) {\n+        k = k_value;\n+      }\n+\n+      return ArrayForEachTorqueContinuation(\n+          context, o, len, callbackfn, thisArg, k);\n+    }\n+    label TypeError {\n+      ThrowTypeError(context, kCalledNonCallable, arguments[0]);\n+    }\n+    label NullOrUndefinedError {\n+      ThrowTypeError(\n+          context, kCalledOnNullOrUndefined, 'Array.prototype.forEach');\n+    }\n+  }\n+}"
        },
        {
            "sha": "9b4d02d0ce58b0351392466c39d6709997bf6374",
            "filename": "deps/v8/src/builtins/base.tq",
            "status": "added",
            "additions": 345,
            "deletions": 0,
            "changes": 345,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -0,0 +1,345 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+type Arguments generates 'CodeStubArguments*';\n+type void generates 'void';\n+type never generates 'void';\n+\n+type Object generates 'TNode<Object>';\n+type int32 generates 'TNode<Int32T>' constexpr 'int32_t';\n+type intptr generates 'TNode<IntPtrT>' constexpr 'intptr_t';\n+type float64 generates 'TNode<Float64T>' constexpr 'double';\n+type bool generates 'TNode<BoolT>' constexpr 'bool';\n+\n+type int31 extends int32 generates 'TNode<Int32T>' constexpr 'int32_t';\n+type RawPtr generates 'TNode<RawPtrT>' constexpr 'void*';\n+type Number extends Object generates 'TNode<Number>';\n+type Smi extends Number generates 'TNode<Smi>';\n+type HeapObject extends Object generates 'TNode<HeapObject>';\n+type AbstractCode extends HeapObject generates 'TNode<AbstractCode>';\n+type Code extends AbstractCode generates 'TNode<Code>';\n+type JSReceiver extends HeapObject generates 'TNode<JSReceiver>';\n+type Context extends HeapObject generates 'TNode<Context>';\n+type String extends HeapObject generates 'TNode<String>';\n+type Oddball extends HeapObject generates 'TNode<Oddball>';\n+type HeapNumber extends HeapObject generates 'TNode<HeapNumber>';\n+type Boolean extends Oddball generates 'TNode<Oddball>';\n+type JSArray extends HeapObject generates 'TNode<JSArray>';\n+type Callable extends JSReceiver generates 'TNode<JSReceiver>';\n+type JSFunction extends Callable generates 'TNode<JSFunction>';\n+type Map extends HeapObject generates 'TNode<Map>';\n+type FixedArrayBase extends HeapObject generates 'TNode<FixedArrayBase>';\n+type FixedArray extends FixedArrayBase generates 'TNode<FixedArray>';\n+type FixedDoubleArray extends FixedArrayBase generates\n+'TNode<FixedDoubleArray>';\n+\n+type JSArrayBuffer extends Object generates 'TNode<JSArrayBuffer>';\n+type JSArrayBufferView extends Object generates 'TNode<JSArrayBufferView>';\n+type JSTypedArray extends JSArrayBufferView generates 'TNode<JSTypedArray>';\n+\n+type InstanceType extends int32 generates 'TNode<Int32T>';\n+type ElementsKind generates 'TNode<Int32T>' constexpr 'ElementsKind';\n+type LanguageMode generates 'TNode<Smi>' constexpr 'LanguageMode';\n+type ExtractFixedArrayFlags generates\n+'TNode<Smi>' constexpr 'ExtractFixedArrayFlags';\n+\n+type MessageTemplate;\n+type HasPropertyFlag generates 'HasPropertyLookupMode';\n+\n+const PACKED_SMI_ELEMENTS: constexpr ElementsKind = 'PACKED_SMI_ELEMENTS';\n+const HOLEY_SMI_ELEMENTS: constexpr ElementsKind = 'HOLEY_SMI_ELEMENTS';\n+const PACKED_ELEMENTS: constexpr ElementsKind = 'PACKED_ELEMENTS';\n+const HOLEY_ELEMENTS: constexpr ElementsKind = 'HOLEY_ELEMENTS';\n+const PACKED_DOUBLE_ELEMENTS: constexpr ElementsKind = 'PACKED_DOUBLE_ELEMENTS';\n+const HOLEY_DOUBLE_ELEMENTS: constexpr ElementsKind = 'HOLEY_DOUBLE_ELEMENTS';\n+\n+const UINT8_ELEMENTS: constexpr ElementsKind = 'UINT8_ELEMENTS';\n+const INT8_ELEMENTS: constexpr ElementsKind = 'INT8_ELEMENTS';\n+const UINT16_ELEMENTS: constexpr ElementsKind = 'UINT16_ELEMENTS';\n+const INT16_ELEMENTS: constexpr ElementsKind = 'INT16_ELEMENTS';\n+const UINT32_ELEMENTS: constexpr ElementsKind = 'UINT32_ELEMENTS';\n+const INT32_ELEMENTS: constexpr ElementsKind = 'INT32_ELEMENTS';\n+const FLOAT32_ELEMENTS: constexpr ElementsKind = 'FLOAT32_ELEMENTS';\n+const FLOAT64_ELEMENTS: constexpr ElementsKind = 'FLOAT64_ELEMENTS';\n+const UINT8_CLAMPED_ELEMENTS: constexpr ElementsKind = 'UINT8_CLAMPED_ELEMENTS';\n+const BIGUINT64_ELEMENTS: constexpr ElementsKind = 'BIGUINT64_ELEMENTS';\n+const BIGINT64_ELEMENTS: constexpr ElementsKind = 'BIGINT64_ELEMENTS';\n+\n+const kAllFixedArrays: constexpr ExtractFixedArrayFlags =\n+    'ExtractFixedArrayFlag::kAllFixedArrays';\n+\n+const kCOWMap: Map = 'LoadRoot(Heap::kFixedCOWArrayMapRootIndex)';\n+const kEmptyFixedArray: FixedArrayBase =\n+    'UncheckedCast<FixedArrayBase>(LoadRoot(Heap::kEmptyFixedArrayRootIndex))';\n+\n+const kInvalidArrayLengthMessage: MessageTemplate =\n+    'MessageTemplate::kInvalidArrayLength';\n+const kCalledNonCallable: MessageTemplate =\n+    'MessageTemplate::kCalledNonCallable';\n+const kCalledOnNullOrUndefined: MessageTemplate =\n+    'MessageTemplate::kCalledOnNullOrUndefined';\n+\n+const kHasProperty: HasPropertyFlag = 'kHasProperty';\n+\n+const kMaxSafeInteger: constexpr float64 = 'kMaxSafeInteger';\n+\n+const kNotTypedArray: MessageTemplate = 'MessageTemplate::kNotTypedArray';\n+const kDetachedOperation: MessageTemplate =\n+    'MessageTemplate::kDetachedOperation';\n+const kBadSortComparisonFunction: MessageTemplate =\n+    'MessageTemplate::kBadSortComparisonFunction';\n+\n+const Hole: Oddball = 'TheHoleConstant()';\n+const Null: Oddball = 'NullConstant()';\n+const Undefined: Oddball = 'UndefinedConstant()';\n+const True: Boolean = 'TrueConstant()';\n+const False: Boolean = 'FalseConstant()';\n+const true: constexpr bool = 'true';\n+const false: constexpr bool = 'false';\n+\n+const strict: constexpr LanguageMode = 'LanguageMode::kStrict';\n+const sloppy: constexpr LanguageMode = 'LanguageMode::kSloppy';\n+\n+extern macro Print(Object);\n+extern macro DebugBreak();\n+extern macro ToInteger_Inline(Context, Object): Number;\n+extern macro ToLength_Inline(Context, Object): Number;\n+extern macro ToNumber_Inline(Context, Object): Number;\n+extern macro ToString_Inline(Context, Object): String;\n+extern macro GetProperty(Context, Object, Object): Object;\n+extern macro HasProperty(HeapObject, Object, Context, HasPropertyFlag): Oddball;\n+extern macro ThrowRangeError(Context, MessageTemplate): never;\n+extern macro ThrowTypeError(Context, MessageTemplate): never;\n+extern macro ThrowTypeError(Context, MessageTemplate, Object): never;\n+extern macro ArraySpeciesCreate(Context, Object, Number): Object;\n+extern macro EnsureArrayPushable(Map): ElementsKind labels Bailout;\n+\n+extern builtin ToObject(Context, Object): Object;\n+extern macro IsNullOrUndefined(Object): bool;\n+\n+extern runtime CreateDataProperty(Context, Object, Object, Object);\n+extern runtime SetProperty(Context, Object, Object, Object, LanguageMode);\n+extern runtime DeleteProperty(Context, Object, Object, LanguageMode);\n+\n+extern runtime StringEqual(Context, String, String): Oddball;\n+\n+extern operator '==' macro Word32Equal(int32, int32): bool;\n+extern operator '!=' macro Word32NotEqual(int32, int32): bool;\n+extern operator '<' macro Int32LessThan(int32, int32): bool;\n+extern operator '>' macro Int32GreaterThan(int32, int32): bool;\n+extern operator '<=' macro Int32LessThanOrEqual(int32, int32): bool;\n+extern operator '>=' macro Int32GreaterThanOrEqual(int32, int32): bool;\n+\n+extern operator '==' macro SmiEqual(Smi, Smi): bool;\n+extern operator '!=' macro SmiNotEqual(Smi, Smi): bool;\n+extern operator '<' macro SmiLessThan(Smi, Smi): bool;\n+extern operator '<=' macro SmiLessThanOrEqual(Smi, Smi): bool;\n+extern operator '>' macro SmiGreaterThan(Smi, Smi): bool;\n+extern operator '>=' macro SmiGreaterThanOrEqual(Smi, Smi): bool;\n+\n+extern operator '==' macro ElementsKindEqual(\n+    constexpr ElementsKind, constexpr ElementsKind): constexpr bool;\n+extern macro IsFastElementsKind(constexpr ElementsKind): constexpr bool;\n+\n+extern macro SmiAbove(Smi, Smi): bool;\n+\n+extern operator '==' macro WordEqual(intptr, intptr): bool;\n+extern operator '!=' macro WordNotEqual(intptr, intptr): bool;\n+extern operator '<' macro IntPtrLessThan(intptr, intptr): bool;\n+extern operator '>' macro IntPtrGreaterThan(intptr, intptr): bool;\n+extern operator '<=' macro IntPtrLessThanOrEqual(intptr, intptr): bool;\n+extern operator '>=' macro IntPtrGreaterThanOrEqual(intptr, intptr): bool;\n+\n+extern operator '==' macro Float64Equal(float64, float64): bool;\n+\n+extern operator\n+'<' macro BranchIfNumberLessThan(Number, Number): never labels Taken, NotTaken;\n+extern operator\n+'<=' macro BranchIfNumberLessThanOrEqual(Number, Number): never labels Taken,\n+    NotTaken;\n+extern operator\n+'>' macro BranchIfNumberGreaterThan(Number, Number): never labels Taken,\n+    NotTaken;\n+extern operator '>=' macro BranchIfNumberGreaterThanOrEqual(Number, Number):\n+    never labels Taken,\n+    NotTaken;\n+\n+extern operator '==' macro WordEqual(Object, Object): bool;\n+extern operator '!=' macro WordNotEqual(Object, Object): bool;\n+\n+extern operator '+' macro SmiAdd(Smi, Smi): Smi;\n+extern operator '-' macro SmiSub(Smi, Smi): Smi;\n+extern operator '>>>' macro SmiShr(Smi, constexpr int31): Smi;\n+\n+extern operator '+' macro IntPtrAdd(intptr, intptr): intptr;\n+extern operator '-' macro IntPtrSub(intptr, intptr): intptr;\n+extern operator '>>>' macro WordShr(intptr, intptr): intptr;\n+\n+extern operator '+' macro NumberAdd(Number, Number): Number;\n+extern operator '-' macro NumberSub(Number, Number): Number;\n+extern operator 'min' macro NumberMin(Number, Number): Number;\n+extern operator 'max' macro NumberMax(Number, Number): Number;\n+\n+extern operator '!' macro ConstexprBoolNot(constexpr bool): constexpr bool;\n+extern operator '!' macro Word32BinaryNot(bool): bool;\n+\n+extern operator '.map' macro LoadMap(HeapObject): Map;\n+extern operator '.map=' macro StoreMap(HeapObject, Map);\n+extern operator '.instanceType' macro LoadInstanceType(Object): InstanceType;\n+\n+extern operator '.length' macro LoadStringLengthAsWord(String): intptr;\n+\n+extern operator '.length' macro GetArgumentsLength(Arguments): intptr;\n+extern operator '[]' macro GetArgumentValue(Arguments, intptr): Object;\n+extern operator '[]' macro GetArgumentValueSmiIndex(Arguments, Smi): Object;\n+\n+extern operator 'is<Smi>' macro TaggedIsSmi(Object): bool;\n+extern operator 'isnt<Smi>' macro TaggedIsNotSmi(Object): bool;\n+\n+extern operator\n+'cast<>' macro TaggedToHeapObject(Object): HeapObject labels CastError;\n+extern operator 'cast<>' macro TaggedToSmi(Object): Smi labels CastError;\n+extern operator\n+'cast<>' macro TaggedToJSArray(Object): JSArray labels CastError;\n+extern operator\n+'cast<>' macro TaggedToCallable(Object): Callable labels CastError;\n+extern operator 'cast<>' macro ConvertFixedArrayBaseToFixedArray(\n+    FixedArrayBase): FixedArray labels CastError;\n+extern operator 'cast<>' macro ConvertFixedArrayBaseToFixedDoubleArray(\n+    FixedArrayBase): FixedDoubleArray labels CastError;\n+\n+extern macro AllocateHeapNumberWithValue(float64): HeapNumber;\n+\n+extern implicit operator\n+'convert<>' macro AllocateHeapNumberWithValue(constexpr float64): Number;\n+extern implicit operator\n+'convert<>' macro IntPtrConstant(constexpr int31): intptr;\n+extern implicit operator\n+'convert<>' macro Int32Constant(constexpr int31): int32;\n+extern implicit operator 'convert<>' macro SmiConstant(constexpr int31): Smi;\n+extern implicit operator\n+'convert<>' macro NumberConstant(constexpr int31): Number;\n+extern implicit operator 'convert<>' macro BoolConstant(constexpr bool): bool;\n+extern implicit operator 'convert<>' macro LanguageModeConstant(\n+    constexpr LanguageMode): LanguageMode;\n+\n+extern implicit operator 'convert<>' macro SmiFromInt32(ElementsKind): Smi;\n+\n+extern operator 'convert<>' macro ChangeInt32ToTagged(int32): Number;\n+extern operator 'convert<>' macro TruncateWordToWord32(intptr): int32;\n+extern operator 'convert<>' macro SmiTag(intptr): Smi;\n+extern operator 'convert<>' macro SmiFromInt32(int32): Smi;\n+extern operator 'convert<>' macro SmiUntag(Smi): intptr;\n+\n+extern macro BranchIfFastJSArray(Object, Context): never labels Taken, NotTaken;\n+extern macro BranchIfNotFastJSArray(Object, Context): never labels Taken,\n+    NotTaken;\n+\n+extern macro IsPrototypeInitialArrayPrototype(Context, Map): bool;\n+extern macro IsNoElementsProtectorCellInvalid(): bool;\n+extern macro IsArraySpeciesProtectorCellInvalid(): bool;\n+extern macro IsTypedArraySpeciesProtectorCellInvalid(): bool;\n+extern macro IsPromiseSpeciesProtectorCellInvalid(): bool;\n+\n+extern operator\n+'.buffer' macro LoadTypedArrayBuffer(JSTypedArray): JSArrayBuffer;\n+\n+extern operator '.data_ptr' macro LoadDataPtr(JSTypedArray): RawPtr;\n+\n+extern operator '.elements_kind' macro LoadMapElementsKind(Map): ElementsKind;\n+extern operator\n+'.elements_kind' macro LoadElementsKind(JSTypedArray): ElementsKind;\n+\n+extern operator '.elements' macro LoadElements(Object): FixedArrayBase;\n+extern operator '.elements=' macro StoreElements(Object, FixedArrayBase);\n+\n+extern operator '.length' macro LoadTypedArrayLength(JSTypedArray): Smi;\n+extern operator '.length' macro LoadJSArrayLength(JSArray): Number;\n+extern operator '.length=' macro StoreJSArrayLength(JSArray, Smi);\n+\n+extern operator '.length' macro LoadFixedArrayBaseLength(FixedArrayBase): Smi;\n+extern operator '[]' macro LoadFixedArrayElement(FixedArray, intptr): Object;\n+extern operator '[]' macro LoadFixedArrayElement(FixedArray, Smi): Object;\n+extern operator\n+'[]=' macro StoreFixedArrayElement(FixedArray, intptr, Object): void;\n+extern operator\n+'[]=' macro StoreFixedArrayElementSmi(FixedArray, Smi, Object): void;\n+\n+extern macro IsFastElementsKind(ElementsKind): bool;\n+extern macro IsFastSmiOrTaggedElementsKind(ElementsKind): bool;\n+extern macro IsFastSmiElementsKind(ElementsKind): bool;\n+extern macro IsHoleyFastElementsKind(ElementsKind): bool;\n+\n+extern macro AllocateFixedArray(constexpr ElementsKind, Smi): FixedArray;\n+extern macro AllocateFixedArray(constexpr ElementsKind, Smi, Map): FixedArray;\n+\n+extern macro CopyFixedArrayElements(\n+    constexpr ElementsKind, FixedArray, constexpr ElementsKind, FixedArray,\n+    intptr, intptr, intptr): void;\n+extern macro CopyFixedArrayElements(\n+    constexpr ElementsKind, FixedArray, constexpr ElementsKind, FixedArray, Smi,\n+    Smi, Smi): void;\n+\n+extern macro AllocateJSArray(constexpr ElementsKind, Map, intptr, Smi): JSArray;\n+extern macro AllocateJSArray(constexpr ElementsKind, Map, Smi, Smi): JSArray;\n+extern macro IsElementsKindGreaterThan(\n+    ElementsKind, constexpr ElementsKind): bool;\n+\n+extern macro LoadDoubleWithHoleCheck(FixedDoubleArray, Smi): float64\n+labels IfHole;\n+\n+extern macro Call(Context, Callable, Object, ...): Object;\n+\n+extern macro ExtractFixedArray(\n+    FixedArray, Smi, Smi, Smi, constexpr ExtractFixedArrayFlags): FixedArray;\n+\n+extern builtin ExtractFastJSArray(Context, JSArray, Smi, Smi): JSArray;\n+\n+macro LoadElementNoHole<T : type>(a: JSArray, index: Smi): Object\n+labels IfHole {\n+  unreachable;\n+}\n+\n+LoadElementNoHole<FixedArray>(a: JSArray, index: Smi): Object\n+labels IfHole {\n+  try {\n+    let elements: FixedArray =\n+        cast<FixedArray>(a.elements) otherwise Unexpected;\n+    let e: Object = elements[index];\n+    if (e == Hole) {\n+      goto IfHole;\n+    }\n+    return e;\n+  }\n+  label Unexpected {\n+    unreachable;\n+  }\n+}\n+\n+LoadElementNoHole<FixedDoubleArray>(a: JSArray, index: Smi): Object\n+labels IfHole {\n+  try {\n+    let elements: FixedDoubleArray =\n+        cast<FixedDoubleArray>(a.elements) otherwise Unexpected;\n+    let e: float64 = LoadDoubleWithHoleCheck(elements, index) otherwise IfHole;\n+    return AllocateHeapNumberWithValue(e);\n+  }\n+  label Unexpected {\n+    unreachable;\n+  }\n+}\n+\n+macro HasPropertyObject(\n+    o: Object, p: Object, c: Context, f: HasPropertyFlag): Oddball {\n+  try {\n+    return HasProperty(cast<HeapObject>(o) otherwise CastError, p, c, f);\n+  }\n+  label CastError {\n+    return False;\n+  }\n+}\n+\n+extern macro IsCallable(HeapObject): bool;\n+extern macro TaggedIsCallable(Object): bool;\n+extern macro IsDetachedBuffer(JSArrayBuffer): bool;"
        },
        {
            "sha": "c26c1a9fd1ba9df357794a19ead35a5462438335",
            "filename": "deps/v8/src/builtins/builtins-api.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -10,6 +10,7 @@\n #include \"src/counters.h\"\n #include \"src/log.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/templates.h\"\n #include \"src/prototype.h\"\n #include \"src/visitors.h\"\n "
        },
        {
            "sha": "ba5ed13f326a49179d2d2775fa95b981777ad3aa",
            "filename": "deps/v8/src/builtins/builtins-arguments-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -4,6 +4,7 @@\n \n #include \"src/builtins/builtins-arguments-gen.h\"\n \n+#include \"src/arguments.h\"\n #include \"src/builtins/builtins-utils-gen.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-factory.h\""
        },
        {
            "sha": "0bfbf7b417f4489da857280a230d90f0eafd0d6b",
            "filename": "deps/v8/src/builtins/builtins-array-gen.cc",
            "status": "modified",
            "additions": 73,
            "deletions": 165,
            "changes": 238,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -4,7 +4,7 @@\n \n #include \"src/builtins/builtins-iterator-gen.h\"\n #include \"src/builtins/builtins-string-gen.h\"\n-#include \"src/builtins/builtins-typedarray-gen.h\"\n+#include \"src/builtins/builtins-typed-array-gen.h\"\n #include \"src/builtins/builtins-utils-gen.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-stub-assembler.h\"\n@@ -20,7 +20,7 @@ using Node = compiler::Node;\n \n ArrayBuiltinsAssembler::ArrayBuiltinsAssembler(\n     compiler::CodeAssemblerState* state)\n-    : CodeStubAssembler(state),\n+    : BaseBuiltinsFromDSLAssembler(state),\n       k_(this, MachineRepresentation::kTagged),\n       a_(this, MachineRepresentation::kTagged),\n       to_(this, MachineRepresentation::kTagged, SmiConstant(0)),\n@@ -150,7 +150,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n       BIND(&fast);\n       {\n-        GotoIf(SmiNotEqual(LoadJSArrayLength(a()), to_.value()), &runtime);\n+        GotoIf(WordNotEqual(LoadJSArrayLength(a()), to_.value()), &runtime);\n         kind = EnsureArrayPushable(LoadMap(a()), &runtime);\n         GotoIf(IsElementsKindGreaterThan(kind, HOLEY_SMI_ELEMENTS),\n                &object_push_pre);\n@@ -211,9 +211,10 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n         context(), original_array, length, method_name);\n     // In the Spec and our current implementation, the length check is already\n     // performed in TypedArraySpeciesCreate.\n-    CSA_ASSERT(this,\n-               SmiLessThanOrEqual(\n-                   len_, LoadObjectField(a, JSTypedArray::kLengthOffset)));\n+    CSA_ASSERT(\n+        this,\n+        SmiLessThanOrEqual(\n+            CAST(len_), CAST(LoadObjectField(a, JSTypedArray::kLengthOffset))));\n     fast_typed_array_target_ =\n         Word32Equal(LoadInstanceType(LoadElements(original_array)),\n                     LoadInstanceType(LoadElements(a)));\n@@ -385,10 +386,9 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n   void ArrayBuiltinsAssembler::InitIteratingArrayBuiltinBody(\n       TNode<Context> context, TNode<Object> receiver, Node* callbackfn,\n-      Node* this_arg, Node* new_target, TNode<IntPtrT> argc) {\n+      Node* this_arg, TNode<IntPtrT> argc) {\n     context_ = context;\n     receiver_ = receiver;\n-    new_target_ = new_target;\n     callbackfn_ = callbackfn;\n     this_arg_ = this_arg;\n     argc_ = argc;\n@@ -679,6 +679,9 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n       Label* array_changed, ParameterMode mode, ForEachDirection direction,\n       MissingPropertyMode missing_property_mode, TNode<Smi> length) {\n     Comment(\"begin VisitAllFastElementsOneKind\");\n+    // We only use this kind of processing if the no-elements protector is\n+    // in place at the start. We'll continue checking during array iteration.\n+    CSA_ASSERT(this, Word32BinaryNot(IsNoElementsProtectorCellInvalid()));\n     VARIABLE(original_map, MachineRepresentation::kTagged);\n     original_map.Bind(LoadMap(o()));\n     VariableList list({&original_map, &a_, &k_, &to_}, zone());\n@@ -704,7 +707,8 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n           TNode<JSArray> o_array = CAST(o());\n           // Check if o's length has changed during the callback and if the\n           // index is now out of range of the new length.\n-          GotoIf(SmiGreaterThanOrEqual(k_.value(), LoadJSArrayLength(o_array)),\n+          GotoIf(SmiGreaterThanOrEqual(CAST(k_.value()),\n+                                       CAST(LoadJSArrayLength(o_array))),\n                  array_changed);\n \n           // Re-load the elements array. If may have been resized.\n@@ -730,10 +734,9 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n           BIND(&hole_element);\n           if (missing_property_mode == MissingPropertyMode::kSkip) {\n-            // Check if o's prototype change unexpectedly has elements after\n-            // the callback in the case of a hole.\n-            BranchIfPrototypesHaveNoElements(o_map, &one_element_done,\n-                                             array_changed);\n+            // The NoElementsProtectorCell could go invalid during callbacks.\n+            Branch(IsNoElementsProtectorCellInvalid(), array_changed,\n+                   &one_element_done);\n           } else {\n             value.Bind(UndefinedConstant());\n             Goto(&process_element);\n@@ -867,8 +870,9 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     GotoIf(WordEqual(value, protector_invalid), &runtime);\n \n     GotoIfNot(TaggedIsPositiveSmi(len), &runtime);\n-    GotoIf(SmiAbove(len, SmiConstant(JSArray::kInitialMaxFastElementArray)),\n-           &runtime);\n+    GotoIf(\n+        SmiAbove(CAST(len), SmiConstant(JSArray::kInitialMaxFastElementArray)),\n+        &runtime);\n \n     // We need to be conservative and start with holey because the builtins\n     // that create output arrays aren't guaranteed to be called for every\n@@ -1162,9 +1166,9 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n     // Make sure that the length hasn't been changed by side-effect.\n     Node* array_length = LoadJSArrayLength(array);\n     GotoIf(TaggedIsNotSmi(array_length), slow);\n-    GotoIf(SmiAbove(SmiAdd(from, count), array_length), slow);\n+    GotoIf(SmiAbove(SmiAdd(CAST(from), CAST(count)), CAST(array_length)), slow);\n \n-    CSA_ASSERT(this, SmiGreaterThanOrEqual(from, SmiConstant(0)));\n+    CSA_ASSERT(this, SmiGreaterThanOrEqual(CAST(from), SmiConstant(0)));\n \n     result.Bind(CallStub(CodeFactory::ExtractFastJSArray(isolate()), context,\n                          array, from, count));\n@@ -1178,8 +1182,9 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n     GotoIf(WordNotEqual(map, fast_aliasted_arguments_map), &try_simple_slice);\n \n     Node* sloppy_elements = LoadElements(array);\n-    Node* sloppy_elements_length = LoadFixedArrayBaseLength(sloppy_elements);\n-    Node* parameter_map_length =\n+    TNode<Smi> sloppy_elements_length =\n+        LoadFixedArrayBaseLength(sloppy_elements);\n+    TNode<Smi> parameter_map_length =\n         SmiSub(sloppy_elements_length,\n                SmiConstant(SloppyArgumentsElements::kParameterMapStart));\n     VARIABLE(index_out, MachineType::PointerRepresentation());\n@@ -1188,16 +1193,16 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n         (kMaxRegularHeapObjectSize - FixedArray::kHeaderSize - JSArray::kSize -\n          AllocationMemento::kSize) /\n         kPointerSize;\n-    GotoIf(SmiAboveOrEqual(count, SmiConstant(max_fast_elements)),\n+    GotoIf(SmiAboveOrEqual(CAST(count), SmiConstant(max_fast_elements)),\n            &try_simple_slice);\n \n-    GotoIf(SmiLessThan(from, SmiConstant(0)), slow);\n+    GotoIf(SmiLessThan(CAST(from), SmiConstant(0)), slow);\n \n-    Node* end = SmiAdd(from, count);\n+    TNode<Smi> end = SmiAdd(CAST(from), CAST(count));\n \n     Node* unmapped_elements = LoadFixedArrayElement(\n         sloppy_elements, SloppyArgumentsElements::kArgumentsIndex);\n-    Node* unmapped_elements_length =\n+    TNode<Smi> unmapped_elements_length =\n         LoadFixedArrayBaseLength(unmapped_elements);\n \n     GotoIf(SmiAbove(end, unmapped_elements_length), slow);\n@@ -1208,8 +1213,8 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n \n     index_out.Bind(IntPtrConstant(0));\n     Node* result_elements = LoadElements(result.value());\n-    Node* from_mapped = SmiMin(parameter_map_length, from);\n-    Node* to = SmiMin(parameter_map_length, end);\n+    TNode<Smi> from_mapped = SmiMin(parameter_map_length, CAST(from));\n+    TNode<Smi> to = SmiMin(parameter_map_length, end);\n     Node* arguments_context = LoadFixedArrayElement(\n         sloppy_elements, SloppyArgumentsElements::kContextIndex);\n     VariableList var_list({&index_out}, zone());\n@@ -1239,7 +1244,8 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n         },\n         1, SMI_PARAMETERS, IndexAdvanceMode::kPost);\n \n-    Node* unmapped_from = SmiMin(SmiMax(parameter_map_length, from), end);\n+    TNode<Smi> unmapped_from =\n+        SmiMin(SmiMax(parameter_map_length, CAST(from)), end);\n \n     BuildFastLoop(\n         var_list, unmapped_from, end,\n@@ -1304,7 +1310,7 @@ TF_BUILTIN(ArrayPrototypeSlice, ArrayPrototypeSliceCodeStubAssembler) {\n       load_arguments_length(this);\n \n   GotoIf(TaggedIsSmi(receiver), &generic_length);\n-  GotoIfNot(IsJSArray(receiver), &check_arguments_length);\n+  GotoIfNot(IsJSArray(CAST(receiver)), &check_arguments_length);\n \n   TNode<JSArray> array_receiver = CAST(receiver);\n   o = array_receiver;\n@@ -1549,7 +1555,7 @@ TF_BUILTIN(ArrayPrototypeShift, CodeStubAssembler) {\n \n       int32_t header_size = FixedDoubleArray::kHeaderSize - kHeapObjectTag;\n       Node* memmove =\n-          ExternalConstant(ExternalReference::libc_memmove_function(isolate()));\n+          ExternalConstant(ExternalReference::libc_memmove_function());\n       Node* start = IntPtrAdd(\n           BitcastTaggedToWord(elements),\n           ElementOffsetFromIndex(IntPtrConstant(0), HOLEY_DOUBLE_ELEMENTS,\n@@ -1733,13 +1739,11 @@ TF_BUILTIN(ArrayPrototypeFind, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingArrayBuiltinBody(\n       \"Array.prototype.find\", &ArrayBuiltinsAssembler::FindResultGenerator,\n@@ -1827,13 +1831,11 @@ TF_BUILTIN(ArrayPrototypeFindIndex, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingArrayBuiltinBody(\n       \"Array.prototype.findIndex\",\n@@ -1855,7 +1857,7 @@ class ArrayPopulatorAssembler : public CodeStubAssembler {\n     TVARIABLE(Object, array);\n     Label is_constructor(this), is_not_constructor(this), done(this);\n     GotoIf(TaggedIsSmi(receiver), &is_not_constructor);\n-    Branch(IsConstructor(receiver), &is_constructor, &is_not_constructor);\n+    Branch(IsConstructor(CAST(receiver)), &is_constructor, &is_not_constructor);\n \n     BIND(&is_constructor);\n     {\n@@ -1888,7 +1890,7 @@ class ArrayPopulatorAssembler : public CodeStubAssembler {\n     Label is_constructor(this), is_not_constructor(this), done(this);\n     CSA_ASSERT(this, IsNumberNormalized(length));\n     GotoIf(TaggedIsSmi(receiver), &is_not_constructor);\n-    Branch(IsConstructor(receiver), &is_constructor, &is_not_constructor);\n+    Branch(IsConstructor(CAST(receiver)), &is_constructor, &is_not_constructor);\n \n     BIND(&is_constructor);\n     {\n@@ -1999,7 +2001,7 @@ TF_BUILTIN(ArrayFrom, ArrayPopulatorAssembler) {\n     Label no_error(this), error(this);\n     GotoIf(IsUndefined(map_function), &no_error);\n     GotoIf(TaggedIsSmi(map_function), &error);\n-    Branch(IsCallable(map_function), &no_error, &error);\n+    Branch(IsCallable(CAST(map_function)), &no_error, &error);\n \n     BIND(&error);\n     ThrowTypeError(context, MessageTemplate::kCalledNonCallable, map_function);\n@@ -2036,7 +2038,7 @@ TF_BUILTIN(ArrayFrom, ArrayPopulatorAssembler) {\n     {\n       Label get_method_not_callable(this, Label::kDeferred), next(this);\n       GotoIf(TaggedIsSmi(iterator_method), &get_method_not_callable);\n-      GotoIfNot(IsCallable(iterator_method), &get_method_not_callable);\n+      GotoIfNot(IsCallable(CAST(iterator_method)), &get_method_not_callable);\n       Goto(&next);\n \n       BIND(&get_method_not_callable);\n@@ -2076,7 +2078,7 @@ TF_BUILTIN(ArrayFrom, ArrayPopulatorAssembler) {\n         Label next(this);\n         GotoIf(IsUndefined(map_function), &next);\n \n-        CSA_ASSERT(this, IsCallable(map_function));\n+        CSA_ASSERT(this, IsCallable(CAST(map_function)));\n         Node* v = CallJS(CodeFactory::Call(isolate()), context, map_function,\n                          this_arg, value.value(), index.value());\n         GotoIfException(v, &on_exception, &var_exception);\n@@ -2135,7 +2137,9 @@ TF_BUILTIN(ArrayFrom, ArrayPopulatorAssembler) {\n \n     TVARIABLE(Number, index, SmiConstant(0));\n \n-    GotoIf(SmiEqual(length.value(), SmiConstant(0)), &finished);\n+    // TODO(ishell): remove <Object, Object>\n+    GotoIf(WordEqual<Object, Object>(length.value(), SmiConstant(0)),\n+           &finished);\n \n     // Loop from 0 to length-1.\n     {\n@@ -2152,7 +2156,7 @@ TF_BUILTIN(ArrayFrom, ArrayPopulatorAssembler) {\n         Label next(this);\n         GotoIf(IsUndefined(map_function), &next);\n \n-        CSA_ASSERT(this, IsCallable(map_function));\n+        CSA_ASSERT(this, IsCallable(CAST(map_function)));\n         value = CAST(CallJS(CodeFactory::Call(isolate()), context, map_function,\n                             this_arg, value.value(), index.value()));\n         Goto(&next);\n@@ -2207,13 +2211,11 @@ TF_BUILTIN(TypedArrayPrototypeFind, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingTypedArrayBuiltinBody(\n       \"%TypedArray%.prototype.find\",\n@@ -2228,13 +2230,11 @@ TF_BUILTIN(TypedArrayPrototypeFindIndex, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingTypedArrayBuiltinBody(\n       \"%TypedArray%.prototype.findIndex\",\n@@ -2243,86 +2243,16 @@ TF_BUILTIN(TypedArrayPrototypeFindIndex, ArrayBuiltinsAssembler) {\n       &ArrayBuiltinsAssembler::NullPostLoopAction);\n }\n \n-TF_BUILTIN(ArrayForEachLoopContinuation, ArrayBuiltinsAssembler) {\n-  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n-  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n-  Node* this_arg = Parameter(Descriptor::kThisArg);\n-  Node* array = Parameter(Descriptor::kArray);\n-  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n-  Node* initial_k = Parameter(Descriptor::kInitialK);\n-  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n-  Node* to = Parameter(Descriptor::kTo);\n-\n-  InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n-                                            this_arg, array, object, initial_k,\n-                                            len, to);\n-\n-  GenerateIteratingArrayBuiltinLoopContinuation(\n-      &ArrayBuiltinsAssembler::ForEachProcessor,\n-      &ArrayBuiltinsAssembler::NullPostLoopAction, MissingPropertyMode::kSkip);\n-}\n-\n-TF_BUILTIN(ArrayForEachLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n-  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n-  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n-  Node* this_arg = Parameter(Descriptor::kThisArg);\n-  Node* initial_k = Parameter(Descriptor::kInitialK);\n-  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n-\n-  Return(CallBuiltin(Builtins::kArrayForEachLoopContinuation, context, receiver,\n-                     callbackfn, this_arg, UndefinedConstant(), receiver,\n-                     initial_k, len, UndefinedConstant()));\n-}\n-\n-TF_BUILTIN(ArrayForEachLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n-  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n-  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n-  Node* this_arg = Parameter(Descriptor::kThisArg);\n-  Node* initial_k = Parameter(Descriptor::kInitialK);\n-  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n-\n-  Return(CallBuiltin(Builtins::kArrayForEachLoopContinuation, context, receiver,\n-                     callbackfn, this_arg, UndefinedConstant(), receiver,\n-                     initial_k, len, UndefinedConstant()));\n-}\n-\n-TF_BUILTIN(ArrayForEach, ArrayBuiltinsAssembler) {\n-  TNode<IntPtrT> argc =\n-      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n-  CodeStubArguments args(this, argc);\n-  TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n-  TNode<Object> receiver = args.GetReceiver();\n-  Node* callbackfn = args.GetOptionalArgumentValue(0);\n-  Node* this_arg = args.GetOptionalArgumentValue(1);\n-\n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n-\n-  GenerateIteratingArrayBuiltinBody(\n-      \"Array.prototype.forEach\",\n-      &ArrayBuiltinsAssembler::ForEachResultGenerator,\n-      &ArrayBuiltinsAssembler::ForEachProcessor,\n-      &ArrayBuiltinsAssembler::NullPostLoopAction,\n-      Builtins::CallableFor(isolate(), Builtins::kArrayForEachLoopContinuation),\n-      MissingPropertyMode::kSkip);\n-}\n-\n TF_BUILTIN(TypedArrayPrototypeForEach, ArrayBuiltinsAssembler) {\n   TNode<IntPtrT> argc =\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingTypedArrayBuiltinBody(\n       \"%TypedArray%.prototype.forEach\",\n@@ -2398,13 +2328,11 @@ TF_BUILTIN(ArraySome, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingArrayBuiltinBody(\n       \"Array.prototype.some\", &ArrayBuiltinsAssembler::SomeResultGenerator,\n@@ -2419,13 +2347,11 @@ TF_BUILTIN(TypedArrayPrototypeSome, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingTypedArrayBuiltinBody(\n       \"%TypedArray%.prototype.some\",\n@@ -2501,13 +2427,11 @@ TF_BUILTIN(ArrayEvery, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingArrayBuiltinBody(\n       \"Array.prototype.every\", &ArrayBuiltinsAssembler::EveryResultGenerator,\n@@ -2522,13 +2446,11 @@ TF_BUILTIN(TypedArrayPrototypeEvery, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingTypedArrayBuiltinBody(\n       \"%TypedArray%.prototype.every\",\n@@ -2603,13 +2525,12 @@ TF_BUILTIN(ArrayReduce, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* initial_value = args.GetOptionalArgumentValue(1, TheHoleConstant());\n \n   InitIteratingArrayBuiltinBody(context, receiver, callbackfn, initial_value,\n-                                new_target, argc);\n+                                argc);\n \n   GenerateIteratingArrayBuiltinBody(\n       \"Array.prototype.reduce\", &ArrayBuiltinsAssembler::ReduceResultGenerator,\n@@ -2624,13 +2545,12 @@ TF_BUILTIN(TypedArrayPrototypeReduce, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* initial_value = args.GetOptionalArgumentValue(1, TheHoleConstant());\n \n   InitIteratingArrayBuiltinBody(context, receiver, callbackfn, initial_value,\n-                                new_target, argc);\n+                                argc);\n \n   GenerateIteratingTypedArrayBuiltinBody(\n       \"%TypedArray%.prototype.reduce\",\n@@ -2707,13 +2627,12 @@ TF_BUILTIN(ArrayReduceRight, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* initial_value = args.GetOptionalArgumentValue(1, TheHoleConstant());\n \n   InitIteratingArrayBuiltinBody(context, receiver, callbackfn, initial_value,\n-                                new_target, argc);\n+                                argc);\n \n   GenerateIteratingArrayBuiltinBody(\n       \"Array.prototype.reduceRight\",\n@@ -2730,13 +2649,12 @@ TF_BUILTIN(TypedArrayPrototypeReduceRight, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* initial_value = args.GetOptionalArgumentValue(1, TheHoleConstant());\n \n   InitIteratingArrayBuiltinBody(context, receiver, callbackfn, initial_value,\n-                                new_target, argc);\n+                                argc);\n \n   GenerateIteratingTypedArrayBuiltinBody(\n       \"%TypedArray%.prototype.reduceRight\",\n@@ -2827,13 +2745,11 @@ TF_BUILTIN(ArrayFilter, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingArrayBuiltinBody(\n       \"Array.prototype.filter\", &ArrayBuiltinsAssembler::FilterResultGenerator,\n@@ -2907,13 +2823,11 @@ TF_BUILTIN(ArrayMap, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingArrayBuiltinBody(\n       \"Array.prototype.map\", &ArrayBuiltinsAssembler::MapResultGenerator,\n@@ -2928,13 +2842,11 @@ TF_BUILTIN(TypedArrayPrototypeMap, ArrayBuiltinsAssembler) {\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n   TNode<Object> receiver = args.GetReceiver();\n   Node* callbackfn = args.GetOptionalArgumentValue(0);\n   Node* this_arg = args.GetOptionalArgumentValue(1);\n \n-  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg,\n-                                new_target, argc);\n+  InitIteratingArrayBuiltinBody(context, receiver, callbackfn, this_arg, argc);\n \n   GenerateIteratingTypedArrayBuiltinBody(\n       \"%TypedArray%.prototype.map\",\n@@ -3220,7 +3132,7 @@ void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n                 &return_not_found);\n       Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n       GotoIf(TaggedIsSmi(element_k), &continue_loop);\n-      GotoIfNot(IsHeapNumber(element_k), &continue_loop);\n+      GotoIfNot(IsHeapNumber(CAST(element_k)), &continue_loop);\n       BranchIfFloat64IsNaN(LoadHeapNumberValue(element_k), &return_found,\n                            &continue_loop);\n \n@@ -3272,7 +3184,7 @@ void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n     Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n     Label continue_loop(this);\n     GotoIf(TaggedIsSmi(element_k), &continue_loop);\n-    GotoIfNot(IsBigInt(element_k), &continue_loop);\n+    GotoIfNot(IsBigInt(CAST(element_k)), &continue_loop);\n     TNode<Object> result = CallRuntime(Runtime::kBigIntEqualToBigInt, context,\n                                        search_element, element_k);\n     Branch(WordEqual(result, TrueConstant()), &return_found, &continue_loop);\n@@ -3577,7 +3489,7 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n   // If O does not have all of the internal slots of an Array Iterator Instance\n   // (22.1.5.3), throw a TypeError exception\n   GotoIf(TaggedIsSmi(iterator), &throw_bad_receiver);\n-  GotoIfNot(IsJSArrayIterator(iterator), &throw_bad_receiver);\n+  GotoIfNot(IsJSArrayIterator(CAST(iterator)), &throw_bad_receiver);\n \n   // Let a be O.[[IteratedObject]].\n   Node* array =\n@@ -3603,17 +3515,14 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n     Node* elements_kind = LoadMapElementsKind(array_map);\n     GotoIfNot(IsFastElementsKind(elements_kind), &if_other);\n \n-    Node* length = LoadJSArrayLength(array);\n-\n-    CSA_ASSERT(this, TaggedIsSmi(length));\n-    CSA_ASSERT(this, TaggedIsSmi(index));\n+    TNode<Smi> length = CAST(LoadJSArrayLength(array));\n \n-    GotoIfNot(SmiBelow(index, length), &set_done);\n+    GotoIfNot(SmiBelow(CAST(index), length), &set_done);\n \n     var_value.Bind(index);\n-    Node* one = SmiConstant(1);\n+    TNode<Smi> one = SmiConstant(1);\n     StoreObjectFieldNoWriteBarrier(iterator, JSArrayIterator::kNextIndexOffset,\n-                                   SmiAdd(index, one));\n+                                   SmiAdd(CAST(index), one));\n     var_done.Bind(FalseConstant());\n \n     GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n@@ -3718,17 +3627,15 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n     Node* buffer = LoadObjectField(array, JSTypedArray::kBufferOffset);\n     GotoIf(IsDetachedBuffer(buffer), &if_detached);\n \n-    Node* length = LoadObjectField(array, JSTypedArray::kLengthOffset);\n+    TNode<Smi> length =\n+        CAST(LoadObjectField(array, JSTypedArray::kLengthOffset));\n \n-    CSA_ASSERT(this, TaggedIsSmi(length));\n-    CSA_ASSERT(this, TaggedIsSmi(index));\n-\n-    GotoIfNot(SmiBelow(index, length), &set_done);\n+    GotoIfNot(SmiBelow(CAST(index), length), &set_done);\n \n     var_value.Bind(index);\n-    Node* one = SmiConstant(1);\n+    TNode<Smi> one = SmiConstant(1);\n     StoreObjectFieldNoWriteBarrier(iterator, JSArrayIterator::kNextIndexOffset,\n-                                   SmiAdd(index, one));\n+                                   SmiAdd(CAST(index), one));\n     var_done.Bind(FalseConstant());\n \n     GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n@@ -3879,7 +3786,8 @@ class ArrayFlattenAssembler : public CodeStubAssembler {\n \n       // a. Let P be ! ToString(sourceIndex).\n       // b. Let exists be ? HasProperty(source, P).\n-      CSA_ASSERT(this, SmiGreaterThanOrEqual(source_index, SmiConstant(0)));\n+      CSA_ASSERT(this,\n+                 SmiGreaterThanOrEqual(CAST(source_index), SmiConstant(0)));\n       Node* const exists =\n           HasProperty(source, source_index, context, kHasProperty);\n "
        },
        {
            "sha": "1cb5de3146897f60c5ddb62b06bb6cbcd3ee5a13",
            "filename": "deps/v8/src/builtins/builtins-array-gen.h",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -5,12 +5,12 @@\n #ifndef V8_BUILTINS_BUILTINS_ARRAY_GEN_H_\n #define V8_BUILTINS_BUILTINS_ARRAY_GEN_H_\n \n-#include \"src/code-stub-assembler.h\"\n+#include \"torque-generated/builtins-base-from-dsl-gen.h\"\n \n namespace v8 {\n namespace internal {\n \n-class ArrayBuiltinsAssembler : public CodeStubAssembler {\n+class ArrayBuiltinsAssembler : public BaseBuiltinsFromDSLAssembler {\n  public:\n   explicit ArrayBuiltinsAssembler(compiler::CodeAssemblerState* state);\n \n@@ -71,7 +71,6 @@ class ArrayBuiltinsAssembler : public CodeStubAssembler {\n  protected:\n   TNode<Context> context() { return context_; }\n   TNode<Object> receiver() { return receiver_; }\n-  Node* new_target() { return new_target_; }\n   TNode<IntPtrT> argc() { return argc_; }\n   TNode<JSReceiver> o() { return o_; }\n   TNode<Number> len() { return len_; }\n@@ -84,8 +83,7 @@ class ArrayBuiltinsAssembler : public CodeStubAssembler {\n \n   void InitIteratingArrayBuiltinBody(TNode<Context> context,\n                                      TNode<Object> receiver, Node* callbackfn,\n-                                     Node* this_arg, Node* new_target,\n-                                     TNode<IntPtrT> argc);\n+                                     Node* this_arg, TNode<IntPtrT> argc);\n \n   void GenerateIteratingArrayBuiltinBody(\n       const char* name, const BuiltinResultGenerator& generator,\n@@ -142,7 +140,6 @@ class ArrayBuiltinsAssembler : public CodeStubAssembler {\n   TNode<Number> len_;\n   TNode<Context> context_;\n   TNode<Object> receiver_;\n-  Node* new_target_ = nullptr;\n   TNode<IntPtrT> argc_;\n   Node* fast_typed_array_target_ = nullptr;\n   const char* name_ = nullptr;"
        },
        {
            "sha": "f9b90f1b2fad510d20e1c1a97c95479ce71a5315",
            "filename": "deps/v8/src/builtins/builtins-array.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 8,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -14,6 +14,7 @@\n #include \"src/isolate.h\"\n #include \"src/lookup.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/hash-table-inl.h\"\n #include \"src/prototype.h\"\n \n namespace v8 {\n@@ -55,7 +56,7 @@ inline bool IsJSArrayFastElementMovingAllowed(Isolate* isolate,\n }\n \n inline bool HasSimpleElements(JSObject* current) {\n-  return current->map()->instance_type() > LAST_CUSTOM_ELEMENTS_RECEIVER &&\n+  return !current->map()->IsCustomElementsReceiverMap() &&\n          !current->GetElementsAccessor()->HasAccessors(current);\n }\n \n@@ -321,13 +322,12 @@ class ArrayConcatVisitor {\n       : isolate_(isolate),\n         storage_(isolate->global_handles()->Create(*storage)),\n         index_offset_(0u),\n-        bit_field_(\n-            FastElementsField::encode(fast_elements) |\n-            ExceedsLimitField::encode(false) |\n-            IsFixedArrayField::encode(storage->IsFixedArray()) |\n-            HasSimpleElementsField::encode(storage->IsFixedArray() ||\n-                                           storage->map()->instance_type() >\n-                                               LAST_CUSTOM_ELEMENTS_RECEIVER)) {\n+        bit_field_(FastElementsField::encode(fast_elements) |\n+                   ExceedsLimitField::encode(false) |\n+                   IsFixedArrayField::encode(storage->IsFixedArray()) |\n+                   HasSimpleElementsField::encode(\n+                       storage->IsFixedArray() ||\n+                       !storage->map()->IsCustomElementsReceiverMap())) {\n     DCHECK(!(this->fast_elements() && !is_fixed_array()));\n   }\n \n@@ -378,6 +378,8 @@ class ArrayConcatVisitor {\n     return true;\n   }\n \n+  uint32_t index_offset() const { return index_offset_; }\n+\n   void increase_index_offset(uint32_t delta) {\n     if (JSObject::kMaxElementCount - index_offset_ < delta) {\n       index_offset_ = JSObject::kMaxElementCount;\n@@ -710,6 +712,11 @@ bool IterateElements(Isolate* isolate, Handle<JSReceiver> receiver,\n     Handle<Object> val;\n     ASSIGN_RETURN_ON_EXCEPTION_VALUE(\n         isolate, val, Object::GetLengthFromArrayLike(isolate, receiver), false);\n+    if (visitor->index_offset() + val->Number() > kMaxSafeInteger) {\n+      isolate->Throw(*isolate->factory()->NewTypeError(\n+          MessageTemplate::kInvalidArrayLength));\n+      return false;\n+    }\n     // TODO(caitp): Support larger element indexes (up to 2^53-1).\n     if (!val->ToUint32(&length)) {\n       length = 0;"
        },
        {
            "sha": "1f29cbfefd20e7f3c995f3dc331da668b7f5f024",
            "filename": "deps/v8/src/builtins/builtins-async-function-gen.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -55,9 +55,9 @@ void AsyncFunctionBuiltinsAssembler::AsyncFunctionAwaitResumeClosure(\n   // Ensure that the generator is neither closed nor running.\n   CSA_SLOW_ASSERT(\n       this,\n-      SmiGreaterThan(\n-          LoadObjectField(generator, JSGeneratorObject::kContinuationOffset),\n-          SmiConstant(JSGeneratorObject::kGeneratorClosed)));\n+      SmiGreaterThan(CAST(LoadObjectField(\n+                         generator, JSGeneratorObject::kContinuationOffset)),\n+                     SmiConstant(JSGeneratorObject::kGeneratorClosed)));\n \n   // Remember the {resume_mode} for the {generator}.\n   StoreObjectFieldNoWriteBarrier(generator,"
        },
        {
            "sha": "929522a83b6f63d69343dd0b41c822e66e6b6e2f",
            "filename": "deps/v8/src/builtins/builtins-async-generator-gen.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 13,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -41,37 +41,39 @@ class AsyncGeneratorBuiltinsAssembler : public AsyncBuiltinsAssembler {\n     return LoadObjectField(generator, JSGeneratorObject::kContinuationOffset);\n   }\n \n-  inline Node* IsGeneratorStateClosed(Node* const state) {\n+  inline TNode<BoolT> IsGeneratorStateClosed(SloppyTNode<Smi> const state) {\n     return SmiEqual(state, SmiConstant(JSGeneratorObject::kGeneratorClosed));\n   }\n-  inline Node* IsGeneratorClosed(Node* const generator) {\n+  inline TNode<BoolT> IsGeneratorClosed(Node* const generator) {\n     return IsGeneratorStateClosed(LoadGeneratorState(generator));\n   }\n \n-  inline Node* IsGeneratorStateSuspended(Node* const state) {\n+  inline TNode<BoolT> IsGeneratorStateSuspended(SloppyTNode<Smi> const state) {\n     return SmiGreaterThanOrEqual(state, SmiConstant(0));\n   }\n \n-  inline Node* IsGeneratorSuspended(Node* const generator) {\n+  inline TNode<BoolT> IsGeneratorSuspended(Node* const generator) {\n     return IsGeneratorStateSuspended(LoadGeneratorState(generator));\n   }\n \n-  inline Node* IsGeneratorStateSuspendedAtStart(Node* const state) {\n+  inline TNode<BoolT> IsGeneratorStateSuspendedAtStart(\n+      SloppyTNode<Smi> const state) {\n     return SmiEqual(state, SmiConstant(0));\n   }\n \n-  inline Node* IsGeneratorStateNotExecuting(Node* const state) {\n+  inline TNode<BoolT> IsGeneratorStateNotExecuting(\n+      SloppyTNode<Smi> const state) {\n     return SmiNotEqual(state,\n                        SmiConstant(JSGeneratorObject::kGeneratorExecuting));\n   }\n-  inline Node* IsGeneratorNotExecuting(Node* const generator) {\n+  inline TNode<BoolT> IsGeneratorNotExecuting(Node* const generator) {\n     return IsGeneratorStateNotExecuting(LoadGeneratorState(generator));\n   }\n \n-  inline Node* IsGeneratorAwaiting(Node* const generator) {\n-    Node* is_generator_awaiting =\n+  inline TNode<BoolT> IsGeneratorAwaiting(Node* const generator) {\n+    TNode<Object> is_generator_awaiting =\n         LoadObjectField(generator, JSAsyncGeneratorObject::kIsAwaitingOffset);\n-    return SmiEqual(is_generator_awaiting, SmiConstant(1));\n+    return WordEqual(is_generator_awaiting, SmiConstant(1));\n   }\n \n   inline void SetGeneratorAwaiting(Node* const generator) {\n@@ -118,7 +120,7 @@ class AsyncGeneratorBuiltinsAssembler : public AsyncBuiltinsAssembler {\n     return LoadObjectField(request, AsyncGeneratorRequest::kValueOffset);\n   }\n \n-  inline Node* IsAbruptResumeType(Node* const resume_type) {\n+  inline TNode<BoolT> IsAbruptResumeType(SloppyTNode<Smi> const resume_type) {\n     return SmiNotEqual(resume_type, SmiConstant(JSGeneratorObject::kNext));\n   }\n \n@@ -174,7 +176,7 @@ void AsyncGeneratorBuiltinsAssembler::AsyncGeneratorEnqueue(\n     // If state is not \"executing\", then\n     //     Perform AsyncGeneratorResumeNext(Generator)\n     // Check if the {receiver} is running or already closed.\n-    Node* continuation = LoadGeneratorState(generator);\n+    TNode<Smi> continuation = CAST(LoadGeneratorState(generator));\n \n     GotoIf(SmiEqual(continuation,\n                     SmiConstant(JSAsyncGeneratorObject::kGeneratorExecuting)),\n@@ -430,7 +432,8 @@ TF_BUILTIN(AsyncGeneratorResumeNext, AsyncGeneratorBuiltinsAssembler) {\n   ReturnIf(IsUndefined(var_next.value()), UndefinedConstant());\n \n   Node* const next = var_next.value();\n-  Node* const resume_type = LoadResumeTypeFromAsyncGeneratorRequest(next);\n+  TNode<Smi> const resume_type =\n+      CAST(LoadResumeTypeFromAsyncGeneratorRequest(next));\n \n   Label if_abrupt(this), if_normal(this), resume_generator(this);\n   Branch(IsAbruptResumeType(resume_type), &if_abrupt, &if_normal);"
        },
        {
            "sha": "cc6ff07e13fe57905b81230de0bd8b03dae5659f",
            "filename": "deps/v8/src/builtins/builtins-call-gen.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -312,8 +312,8 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructWithSpread(\n     Node* iterator_fn = GetProperty(context, spread, IteratorSymbolConstant());\n     GotoIf(TaggedIsSmi(iterator_fn), &if_iterator_fn_not_callable);\n     GotoIfNot(IsCallable(iterator_fn), &if_iterator_fn_not_callable);\n-    Node* list =\n-        CallBuiltin(Builtins::kIterableToList, context, spread, iterator_fn);\n+    Node* list = CallBuiltin(Builtins::kIterableToList, context, spread,\n+                             iterator_fn);\n     CSA_ASSERT(this, IsJSArray(list));\n     Node* list_kind = LoadMapElementsKind(LoadMap(list));\n     var_length.Bind("
        },
        {
            "sha": "edbfb26a7132f265819ae0a5fba33d210f8f7ee0",
            "filename": "deps/v8/src/builtins/builtins-collections-gen.cc",
            "status": "modified",
            "additions": 63,
            "deletions": 202,
            "changes": 265,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -7,7 +7,7 @@\n #include \"src/builtins/builtins-utils-gen.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/heap/factory-inl.h\"\n-#include \"src/objects/hash-table.h\"\n+#include \"src/objects/hash-table-inl.h\"\n \n namespace v8 {\n namespace internal {\n@@ -116,13 +116,13 @@ class BaseCollectionsAssembler : public CodeStubAssembler {\n \n   // Loads an element from a fixed array.  If the element is the hole, returns\n   // `undefined`.\n-  TNode<Object> LoadAndNormalizeFixedArrayElement(TNode<Object> elements,\n+  TNode<Object> LoadAndNormalizeFixedArrayElement(TNode<HeapObject> elements,\n                                                   TNode<IntPtrT> index);\n \n   // Loads an element from a fixed double array.  If the element is the hole,\n   // returns `undefined`.\n-  TNode<Object> LoadAndNormalizeFixedDoubleArrayElement(TNode<Object> elements,\n-                                                        TNode<IntPtrT> index);\n+  TNode<Object> LoadAndNormalizeFixedDoubleArrayElement(\n+      TNode<HeapObject> elements, TNode<IntPtrT> index);\n \n   // Loads key and value variables with the first and second elements of an\n   // array.  If the array lacks 2 elements, undefined is used.\n@@ -262,12 +262,11 @@ void BaseCollectionsAssembler::AddConstructorEntriesFromFastJSArray(\n     // A Map constructor requires entries to be arrays (ex. [key, value]),\n     // so a FixedDoubleArray can never succeed.\n     if (variant == kMap || variant == kWeakMap) {\n-      TNode<Float64T> element =\n-          UncheckedCast<Float64T>(LoadFixedDoubleArrayElement(\n-              elements, IntPtrConstant(0), MachineType::Float64(), 0,\n-              INTPTR_PARAMETERS));\n+      CSA_ASSERT(this, IntPtrGreaterThan(length, IntPtrConstant(0)));\n+      TNode<Object> element =\n+          LoadAndNormalizeFixedDoubleArrayElement(elements, IntPtrConstant(0));\n       ThrowTypeError(context, MessageTemplate::kIteratorValueNotAnObject,\n-                     AllocateHeapNumberWithValue(element));\n+                     element);\n     } else {\n       DCHECK(variant == kSet || variant == kWeakSet);\n       auto set_entry = [&](Node* index) {\n@@ -386,7 +385,7 @@ TNode<Object> BaseCollectionsAssembler::GetAddFunction(\n \n   Label exit(this), if_notcallable(this, Label::kDeferred);\n   GotoIf(TaggedIsSmi(add_func), &if_notcallable);\n-  GotoIfNot(IsCallable(add_func), &if_notcallable);\n+  GotoIfNot(IsCallable(CAST(add_func)), &if_notcallable);\n   Goto(&exit);\n \n   BIND(&if_notcallable);\n@@ -485,20 +484,20 @@ TNode<BoolT> BaseCollectionsAssembler::HasInitialCollectionPrototype(\n   TNode<Map> initial_prototype_map =\n       CAST(LoadContextElement(native_context, initial_prototype_index));\n   TNode<Map> collection_proto_map =\n-      LoadMap(CAST(LoadMapPrototype(LoadMap(CAST(collection)))));\n+      LoadMap(LoadMapPrototype(LoadMap(CAST(collection))));\n \n   return WordEqual(collection_proto_map, initial_prototype_map);\n }\n \n TNode<Object> BaseCollectionsAssembler::LoadAndNormalizeFixedArrayElement(\n-    TNode<Object> elements, TNode<IntPtrT> index) {\n+    TNode<HeapObject> elements, TNode<IntPtrT> index) {\n   TNode<Object> element = LoadFixedArrayElement(elements, index);\n   return Select<Object>(IsTheHole(element), [=] { return UndefinedConstant(); },\n                         [=] { return element; });\n }\n \n TNode<Object> BaseCollectionsAssembler::LoadAndNormalizeFixedDoubleArrayElement(\n-    TNode<Object> elements, TNode<IntPtrT> index) {\n+    TNode<HeapObject> elements, TNode<IntPtrT> index) {\n   TVARIABLE(Object, entry);\n   Label if_hole(this, Label::kDeferred), next(this);\n   TNode<Float64T> element = UncheckedCast<Float64T>(LoadFixedDoubleArrayElement(\n@@ -621,8 +620,6 @@ class CollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n       : BaseCollectionsAssembler(state) {}\n \n  protected:\n-  template <typename CollectionType>\n-  Node* AllocateOrderedHashTable();\n   template <typename IteratorType>\n   Node* AllocateJSCollectionIterator(Node* context, int map_index,\n                                      Node* collection);\n@@ -646,22 +643,6 @@ class CollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n   std::tuple<Node*, Node*, Node*> NextSkipHoles(Node* table, Node* index,\n                                                 Label* if_end);\n \n-  // Builds code that finds OrderedHashTable entry for a key with hash code\n-  // {hash} with using the comparison code generated by {key_compare}. The code\n-  // jumps to {entry_found} if the key is found, or to {not_found} if the key\n-  // was not found. In the {entry_found} branch, the variable\n-  // entry_start_position will be bound to the index of the entry (relative to\n-  // OrderedHashTable::kHashTableStartIndex).\n-  //\n-  // The {CollectionType} template parameter stands for the particular instance\n-  // of OrderedHashTable, it should be OrderedHashMap or OrderedHashSet.\n-  template <typename CollectionType>\n-  void FindOrderedHashTableEntry(\n-      Node* table, Node* hash,\n-      std::function<void(Node* other, Label* if_same, Label* if_not_same)>\n-          key_compare,\n-      Variable* entry_start_position, Label* entry_found, Label* not_found);\n-\n   // Specialization for Smi.\n   // The {result} variable will contain the entry index if the key was found,\n   // or the hash code otherwise.\n@@ -735,58 +716,6 @@ class CollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n                                    Node* const occupancy);\n };\n \n-template <typename CollectionType>\n-Node* CollectionsBuiltinsAssembler::AllocateOrderedHashTable() {\n-  static const int kCapacity = CollectionType::kMinCapacity;\n-  static const int kBucketCount = kCapacity / CollectionType::kLoadFactor;\n-  static const int kDataTableLength = kCapacity * CollectionType::kEntrySize;\n-  static const int kFixedArrayLength =\n-      CollectionType::kHashTableStartIndex + kBucketCount + kDataTableLength;\n-  static const int kDataTableStartIndex =\n-      CollectionType::kHashTableStartIndex + kBucketCount;\n-\n-  STATIC_ASSERT(base::bits::IsPowerOfTwo(kCapacity));\n-  STATIC_ASSERT(kCapacity <= CollectionType::kMaxCapacity);\n-\n-  // Allocate the table and add the proper map.\n-  const ElementsKind elements_kind = HOLEY_ELEMENTS;\n-  Node* const length_intptr = IntPtrConstant(kFixedArrayLength);\n-  Node* const fixed_array_map = LoadRoot(\n-      static_cast<Heap::RootListIndex>(CollectionType::GetMapRootIndex()));\n-  Node* const table =\n-      AllocateFixedArray(elements_kind, length_intptr, INTPTR_PARAMETERS,\n-                         kAllowLargeObjectAllocation, fixed_array_map);\n-\n-  // Initialize the OrderedHashTable fields.\n-  const WriteBarrierMode barrier_mode = SKIP_WRITE_BARRIER;\n-  StoreFixedArrayElement(table, CollectionType::kNumberOfElementsIndex,\n-                         SmiConstant(0), barrier_mode);\n-  StoreFixedArrayElement(table, CollectionType::kNumberOfDeletedElementsIndex,\n-                         SmiConstant(0), barrier_mode);\n-  StoreFixedArrayElement(table, CollectionType::kNumberOfBucketsIndex,\n-                         SmiConstant(kBucketCount), barrier_mode);\n-\n-  // Fill the buckets with kNotFound.\n-  Node* const not_found = SmiConstant(CollectionType::kNotFound);\n-  STATIC_ASSERT(CollectionType::kHashTableStartIndex ==\n-                CollectionType::kNumberOfBucketsIndex + 1);\n-  STATIC_ASSERT((CollectionType::kHashTableStartIndex + kBucketCount) ==\n-                kDataTableStartIndex);\n-  for (int i = 0; i < kBucketCount; i++) {\n-    StoreFixedArrayElement(table, CollectionType::kHashTableStartIndex + i,\n-                           not_found, barrier_mode);\n-  }\n-\n-  // Fill the data table with undefined.\n-  STATIC_ASSERT(kDataTableStartIndex + kDataTableLength == kFixedArrayLength);\n-  for (int i = 0; i < kDataTableLength; i++) {\n-    StoreFixedArrayElement(table, kDataTableStartIndex + i, UndefinedConstant(),\n-                           barrier_mode);\n-  }\n-\n-  return table;\n-}\n-\n template <typename IteratorType>\n Node* CollectionsBuiltinsAssembler::AllocateJSCollectionIterator(\n     Node* context, int map_index, Node* collection) {\n@@ -837,8 +766,8 @@ Node* CollectionsBuiltinsAssembler::CallGetOrCreateHashRaw(Node* const key) {\n }\n \n Node* CollectionsBuiltinsAssembler::CallGetHashRaw(Node* const key) {\n-  Node* const function_addr = ExternalConstant(\n-      ExternalReference::orderedhashmap_gethash_raw(isolate()));\n+  Node* const function_addr =\n+      ExternalConstant(ExternalReference::orderedhashmap_gethash_raw());\n   Node* const isolate_ptr =\n       ExternalConstant(ExternalReference::isolate_address(isolate()));\n \n@@ -1053,78 +982,9 @@ void CollectionsBuiltinsAssembler::SameValueZeroHeapNumber(Node* key_float,\n   }\n }\n \n-template <typename CollectionType>\n-void CollectionsBuiltinsAssembler::FindOrderedHashTableEntry(\n-    Node* table, Node* hash,\n-    std::function<void(Node*, Label*, Label*)> key_compare,\n-    Variable* entry_start_position, Label* entry_found, Label* not_found) {\n-  // Get the index of the bucket.\n-  Node* const number_of_buckets = SmiUntag(CAST(\n-      LoadFixedArrayElement(table, CollectionType::kNumberOfBucketsIndex)));\n-  Node* const bucket =\n-      WordAnd(hash, IntPtrSub(number_of_buckets, IntPtrConstant(1)));\n-  Node* const first_entry = SmiUntag(CAST(LoadFixedArrayElement(\n-      table, bucket, CollectionType::kHashTableStartIndex * kPointerSize)));\n-\n-  // Walk the bucket chain.\n-  Node* entry_start;\n-  Label if_key_found(this);\n-  {\n-    VARIABLE(var_entry, MachineType::PointerRepresentation(), first_entry);\n-    Label loop(this, {&var_entry, entry_start_position}),\n-        continue_next_entry(this);\n-    Goto(&loop);\n-    BIND(&loop);\n-\n-    // If the entry index is the not-found sentinel, we are done.\n-    GotoIf(\n-        WordEqual(var_entry.value(), IntPtrConstant(CollectionType::kNotFound)),\n-        not_found);\n-\n-    // Make sure the entry index is within range.\n-    CSA_ASSERT(\n-        this,\n-        UintPtrLessThan(\n-            var_entry.value(),\n-            SmiUntag(SmiAdd(\n-                CAST(LoadFixedArrayElement(\n-                    table, CollectionType::kNumberOfElementsIndex)),\n-                CAST(LoadFixedArrayElement(\n-                    table, CollectionType::kNumberOfDeletedElementsIndex))))));\n-\n-    // Compute the index of the entry relative to kHashTableStartIndex.\n-    entry_start =\n-        IntPtrAdd(IntPtrMul(var_entry.value(),\n-                            IntPtrConstant(CollectionType::kEntrySize)),\n-                  number_of_buckets);\n-\n-    // Load the key from the entry.\n-    Node* const candidate_key = LoadFixedArrayElement(\n-        table, entry_start,\n-        CollectionType::kHashTableStartIndex * kPointerSize);\n-\n-    key_compare(candidate_key, &if_key_found, &continue_next_entry);\n-\n-    BIND(&continue_next_entry);\n-    // Load the index of the next entry in the bucket chain.\n-    var_entry.Bind(SmiUntag(CAST(LoadFixedArrayElement(\n-        table, entry_start,\n-        (CollectionType::kHashTableStartIndex + CollectionType::kChainOffset) *\n-            kPointerSize))));\n-\n-    Goto(&loop);\n-  }\n-\n-  BIND(&if_key_found);\n-  entry_start_position->Bind(entry_start);\n-  Goto(entry_found);\n-}\n-\n TF_BUILTIN(OrderedHashTableHealIndex, CollectionsBuiltinsAssembler) {\n-  Node* table = Parameter(Descriptor::kTable);\n-  Node* index = Parameter(Descriptor::kIndex);\n-  CSA_ASSERT(this, TaggedIsNotSmi(table));\n-  CSA_ASSERT(this, TaggedIsSmi(index));\n+  TNode<HeapObject> table = CAST(Parameter(Descriptor::kTable));\n+  TNode<Smi> index = CAST(Parameter(Descriptor::kIndex));\n   Label return_index(this), return_zero(this);\n \n   // Check if we need to update the {index}.\n@@ -1145,8 +1005,8 @@ TF_BUILTIN(OrderedHashTableHealIndex, CollectionsBuiltinsAssembler) {\n   {\n     Node* i = var_i.value();\n     GotoIfNot(IntPtrLessThan(i, number_of_deleted_elements), &return_index);\n-    Node* removed_index = LoadFixedArrayElement(\n-        table, i, OrderedHashTableBase::kRemovedHolesIndex * kPointerSize);\n+    TNode<Smi> removed_index = CAST(LoadFixedArrayElement(\n+        table, i, OrderedHashTableBase::kRemovedHolesIndex * kPointerSize));\n     GotoIf(SmiGreaterThanOrEqual(removed_index, index), &return_index);\n     Decrement(&var_index, 1, SMI_PARAMETERS);\n     Increment(&var_i);\n@@ -1258,8 +1118,8 @@ TF_BUILTIN(MapPrototypeGet, CollectionsBuiltinsAssembler) {\n   ThrowIfNotInstanceType(context, receiver, JS_MAP_TYPE, \"Map.prototype.get\");\n \n   Node* const table = LoadObjectField(receiver, JSMap::kTableOffset);\n-  Node* index =\n-      CallBuiltin(Builtins::kFindOrderedHashMapEntry, context, table, key);\n+  TNode<Smi> index = CAST(\n+      CallBuiltin(Builtins::kFindOrderedHashMapEntry, context, table, key));\n \n   Label if_found(this), if_not_found(this);\n   Branch(SmiGreaterThanOrEqual(index, SmiConstant(0)), &if_found,\n@@ -1283,8 +1143,8 @@ TF_BUILTIN(MapPrototypeHas, CollectionsBuiltinsAssembler) {\n   ThrowIfNotInstanceType(context, receiver, JS_MAP_TYPE, \"Map.prototype.has\");\n \n   Node* const table = LoadObjectField(receiver, JSMap::kTableOffset);\n-  Node* index =\n-      CallBuiltin(Builtins::kFindOrderedHashMapEntry, context, table, key);\n+  TNode<Smi> index = CAST(\n+      CallBuiltin(Builtins::kFindOrderedHashMapEntry, context, table, key));\n \n   Label if_found(this), if_not_found(this);\n   Branch(SmiGreaterThanOrEqual(index, SmiConstant(0)), &if_found,\n@@ -1420,8 +1280,8 @@ void CollectionsBuiltinsAssembler::StoreOrderedHashMapNewEntry(\n                          OrderedHashMap::kHashTableStartIndex * kPointerSize);\n \n   // Bump the elements count.\n-  Node* const number_of_elements =\n-      LoadObjectField(table, OrderedHashMap::kNumberOfElementsOffset);\n+  TNode<Smi> const number_of_elements =\n+      CAST(LoadObjectField(table, OrderedHashMap::kNumberOfElementsOffset));\n   StoreObjectFieldNoWriteBarrier(table, OrderedHashMap::kNumberOfElementsOffset,\n                                  SmiAdd(number_of_elements, SmiConstant(1)));\n }\n@@ -1458,20 +1318,20 @@ TF_BUILTIN(MapPrototypeDelete, CollectionsBuiltinsAssembler) {\n                                          OrderedHashMap::kValueOffset));\n \n   // Decrement the number of elements, increment the number of deleted elements.\n-  Node* const number_of_elements = SmiSub(\n+  TNode<Smi> const number_of_elements = SmiSub(\n       CAST(LoadObjectField(table, OrderedHashMap::kNumberOfElementsOffset)),\n       SmiConstant(1));\n   StoreObjectFieldNoWriteBarrier(table, OrderedHashMap::kNumberOfElementsOffset,\n                                  number_of_elements);\n-  Node* const number_of_deleted =\n+  TNode<Smi> const number_of_deleted =\n       SmiAdd(CAST(LoadObjectField(\n                  table, OrderedHashMap::kNumberOfDeletedElementsOffset)),\n              SmiConstant(1));\n   StoreObjectFieldNoWriteBarrier(\n       table, OrderedHashMap::kNumberOfDeletedElementsOffset, number_of_deleted);\n \n-  Node* const number_of_buckets =\n-      LoadFixedArrayElement(table, OrderedHashMap::kNumberOfBucketsIndex);\n+  TNode<Smi> const number_of_buckets =\n+      CAST(LoadFixedArrayElement(table, OrderedHashMap::kNumberOfBucketsIndex));\n \n   // If there fewer elements than #buckets / 2, shrink the table.\n   Label shrink(this);\n@@ -1583,8 +1443,8 @@ void CollectionsBuiltinsAssembler::StoreOrderedHashSetNewEntry(\n                          OrderedHashSet::kHashTableStartIndex * kPointerSize);\n \n   // Bump the elements count.\n-  Node* const number_of_elements =\n-      LoadObjectField(table, OrderedHashSet::kNumberOfElementsOffset);\n+  TNode<Smi> const number_of_elements =\n+      CAST(LoadObjectField(table, OrderedHashSet::kNumberOfElementsOffset));\n   StoreObjectFieldNoWriteBarrier(table, OrderedHashSet::kNumberOfElementsOffset,\n                                  SmiAdd(number_of_elements, SmiConstant(1)));\n }\n@@ -1617,20 +1477,20 @@ TF_BUILTIN(SetPrototypeDelete, CollectionsBuiltinsAssembler) {\n                          kPointerSize * OrderedHashSet::kHashTableStartIndex);\n \n   // Decrement the number of elements, increment the number of deleted elements.\n-  Node* const number_of_elements = SmiSub(\n+  TNode<Smi> const number_of_elements = SmiSub(\n       CAST(LoadObjectField(table, OrderedHashSet::kNumberOfElementsOffset)),\n       SmiConstant(1));\n   StoreObjectFieldNoWriteBarrier(table, OrderedHashSet::kNumberOfElementsOffset,\n                                  number_of_elements);\n-  Node* const number_of_deleted =\n+  TNode<Smi> const number_of_deleted =\n       SmiAdd(CAST(LoadObjectField(\n                  table, OrderedHashSet::kNumberOfDeletedElementsOffset)),\n              SmiConstant(1));\n   StoreObjectFieldNoWriteBarrier(\n       table, OrderedHashSet::kNumberOfDeletedElementsOffset, number_of_deleted);\n \n-  Node* const number_of_buckets =\n-      LoadFixedArrayElement(table, OrderedHashSet::kNumberOfBucketsIndex);\n+  TNode<Smi> const number_of_buckets =\n+      CAST(LoadFixedArrayElement(table, OrderedHashSet::kNumberOfBucketsIndex));\n \n   // If there fewer elements than #buckets / 2, shrink the table.\n   Label shrink(this);\n@@ -2094,7 +1954,7 @@ class WeakCollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n       : BaseCollectionsAssembler(state) {}\n \n  protected:\n-  void AddEntry(TNode<Object> table, TNode<IntPtrT> key_index,\n+  void AddEntry(TNode<HeapObject> table, TNode<IntPtrT> key_index,\n                 TNode<Object> key, TNode<Object> value,\n                 TNode<IntPtrT> number_of_elements);\n \n@@ -2110,19 +1970,19 @@ class WeakCollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n   // the {key} is found.\n   typedef std::function<void(TNode<Object> entry_key, Label* if_same)>\n       KeyComparator;\n-  TNode<IntPtrT> FindKeyIndex(TNode<Object> table, TNode<IntPtrT> key_hash,\n+  TNode<IntPtrT> FindKeyIndex(TNode<HeapObject> table, TNode<IntPtrT> key_hash,\n                               TNode<IntPtrT> entry_mask,\n                               const KeyComparator& key_compare);\n \n   // Builds code that finds an ObjectHashTable entry available for a new entry.\n-  TNode<IntPtrT> FindKeyIndexForInsertion(TNode<Object> table,\n+  TNode<IntPtrT> FindKeyIndexForInsertion(TNode<HeapObject> table,\n                                           TNode<IntPtrT> key_hash,\n                                           TNode<IntPtrT> entry_mask);\n \n   // Builds code that finds the ObjectHashTable entry with key that matches\n   // {key} and returns the entry's key index. If {key} cannot be found, jumps to\n   // {if_not_found}.\n-  TNode<IntPtrT> FindKeyIndexForKey(TNode<Object> table, TNode<Object> key,\n+  TNode<IntPtrT> FindKeyIndexForKey(TNode<HeapObject> table, TNode<Object> key,\n                                     TNode<IntPtrT> hash,\n                                     TNode<IntPtrT> entry_mask,\n                                     Label* if_not_found);\n@@ -2132,12 +1992,12 @@ class WeakCollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n                                            TNode<IntPtrT> number_of_deleted);\n   TNode<IntPtrT> KeyIndexFromEntry(TNode<IntPtrT> entry);\n \n-  TNode<IntPtrT> LoadNumberOfElements(TNode<Object> table, int offset);\n-  TNode<IntPtrT> LoadNumberOfDeleted(TNode<Object> table, int offset = 0);\n-  TNode<Object> LoadTable(SloppyTNode<Object> collection);\n-  TNode<IntPtrT> LoadTableCapacity(TNode<Object> table);\n+  TNode<IntPtrT> LoadNumberOfElements(TNode<HeapObject> table, int offset);\n+  TNode<IntPtrT> LoadNumberOfDeleted(TNode<HeapObject> table, int offset = 0);\n+  TNode<HeapObject> LoadTable(SloppyTNode<HeapObject> collection);\n+  TNode<IntPtrT> LoadTableCapacity(TNode<HeapObject> table);\n \n-  void RemoveEntry(TNode<Object> table, TNode<IntPtrT> key_index,\n+  void RemoveEntry(TNode<HeapObject> table, TNode<IntPtrT> key_index,\n                    TNode<IntPtrT> number_of_elements);\n   TNode<BoolT> ShouldRehash(TNode<IntPtrT> number_of_elements,\n                             TNode<IntPtrT> number_of_deleted);\n@@ -2147,7 +2007,7 @@ class WeakCollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n };\n \n void WeakCollectionsBuiltinsAssembler::AddEntry(\n-    TNode<Object> table, TNode<IntPtrT> key_index, TNode<Object> key,\n+    TNode<HeapObject> table, TNode<IntPtrT> key_index, TNode<Object> key,\n     TNode<Object> value, TNode<IntPtrT> number_of_elements) {\n   // See ObjectHashTable::AddEntry().\n   TNode<IntPtrT> value_index = ValueIndexFromKeyIndex(key_index);\n@@ -2169,8 +2029,8 @@ TNode<Object> WeakCollectionsBuiltinsAssembler::AllocateTable(\n \n   // See HashTable::NewInternal().\n   TNode<IntPtrT> length = KeyIndexFromEntry(capacity);\n-  TNode<Object> table = CAST(AllocateFixedArray(\n-      HOLEY_ELEMENTS, length, INTPTR_PARAMETERS, kAllowLargeObjectAllocation));\n+  TNode<FixedArray> table = AllocateFixedArray(\n+      HOLEY_ELEMENTS, length, INTPTR_PARAMETERS, kAllowLargeObjectAllocation);\n \n   Heap::RootListIndex map_root_index =\n       static_cast<Heap::RootListIndex>(ObjectHashTableShape::GetMapRootIndex());\n@@ -2208,7 +2068,7 @@ TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::EntryMask(\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::FindKeyIndex(\n-    TNode<Object> table, TNode<IntPtrT> key_hash, TNode<IntPtrT> entry_mask,\n+    TNode<HeapObject> table, TNode<IntPtrT> key_hash, TNode<IntPtrT> entry_mask,\n     const KeyComparator& key_compare) {\n   // See HashTable::FirstProbe().\n   TVARIABLE(IntPtrT, var_entry, WordAnd(key_hash, entry_mask));\n@@ -2237,7 +2097,8 @@ TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::FindKeyIndex(\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::FindKeyIndexForInsertion(\n-    TNode<Object> table, TNode<IntPtrT> key_hash, TNode<IntPtrT> entry_mask) {\n+    TNode<HeapObject> table, TNode<IntPtrT> key_hash,\n+    TNode<IntPtrT> entry_mask) {\n   // See HashTable::FindInsertionEntry().\n   auto is_not_live = [&](TNode<Object> entry_key, Label* if_found) {\n     // This is the the negative form BaseShape::IsLive().\n@@ -2247,7 +2108,7 @@ TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::FindKeyIndexForInsertion(\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::FindKeyIndexForKey(\n-    TNode<Object> table, TNode<Object> key, TNode<IntPtrT> hash,\n+    TNode<HeapObject> table, TNode<Object> key, TNode<IntPtrT> hash,\n     TNode<IntPtrT> entry_mask, Label* if_not_found) {\n   // See HashTable::FindEntry().\n   auto match_key_or_exit_on_empty = [&](TNode<Object> entry_key,\n@@ -2269,26 +2130,26 @@ TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::KeyIndexFromEntry(\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadNumberOfElements(\n-    TNode<Object> table, int offset) {\n+    TNode<HeapObject> table, int offset) {\n   TNode<IntPtrT> number_of_elements = SmiUntag(CAST(\n       LoadFixedArrayElement(table, ObjectHashTable::kNumberOfElementsIndex)));\n   return IntPtrAdd(number_of_elements, IntPtrConstant(offset));\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadNumberOfDeleted(\n-    TNode<Object> table, int offset) {\n+    TNode<HeapObject> table, int offset) {\n   TNode<IntPtrT> number_of_deleted = SmiUntag(CAST(LoadFixedArrayElement(\n       table, ObjectHashTable::kNumberOfDeletedElementsIndex)));\n   return IntPtrAdd(number_of_deleted, IntPtrConstant(offset));\n }\n \n-TNode<Object> WeakCollectionsBuiltinsAssembler::LoadTable(\n-    SloppyTNode<Object> collection) {\n-  return LoadObjectField(CAST(collection), JSWeakCollection::kTableOffset);\n+TNode<HeapObject> WeakCollectionsBuiltinsAssembler::LoadTable(\n+    SloppyTNode<HeapObject> collection) {\n+  return CAST(LoadObjectField(collection, JSWeakCollection::kTableOffset));\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadTableCapacity(\n-    TNode<Object> table) {\n+    TNode<HeapObject> table) {\n   return SmiUntag(\n       CAST(LoadFixedArrayElement(table, ObjectHashTable::kCapacityIndex)));\n }\n@@ -2312,7 +2173,7 @@ TNode<Word32T> WeakCollectionsBuiltinsAssembler::InsufficientCapacityToAdd(\n }\n \n void WeakCollectionsBuiltinsAssembler::RemoveEntry(\n-    TNode<Object> table, TNode<IntPtrT> key_index,\n+    TNode<HeapObject> table, TNode<IntPtrT> key_index,\n     TNode<IntPtrT> number_of_elements) {\n   // See ObjectHashTable::RemoveEntry().\n   TNode<IntPtrT> value_index = ValueIndexFromKeyIndex(key_index);\n@@ -2366,7 +2227,7 @@ TF_BUILTIN(WeakSetConstructor, WeakCollectionsBuiltinsAssembler) {\n }\n \n TF_BUILTIN(WeakMapLookupHashIndex, WeakCollectionsBuiltinsAssembler) {\n-  TNode<Object> table = CAST(Parameter(Descriptor::kTable));\n+  TNode<HeapObject> table = CAST(Parameter(Descriptor::kTable));\n   TNode<Object> key = CAST(Parameter(Descriptor::kKey));\n \n   Label if_not_found(this);\n@@ -2431,15 +2292,15 @@ TF_BUILTIN(WeakMapHas, WeakCollectionsBuiltinsAssembler) {\n // (ObjectHashTable) of a WeakMap or WeakSet.\n TF_BUILTIN(WeakCollectionDelete, WeakCollectionsBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n-  TNode<Object> collection = CAST(Parameter(Descriptor::kCollection));\n+  TNode<HeapObject> collection = CAST(Parameter(Descriptor::kCollection));\n   TNode<Object> key = CAST(Parameter(Descriptor::kKey));\n \n   Label call_runtime(this), if_not_found(this);\n \n   GotoIfNotJSReceiver(key, &if_not_found);\n \n   TNode<IntPtrT> hash = LoadJSReceiverIdentityHash(key, &if_not_found);\n-  TNode<Object> table = LoadTable(collection);\n+  TNode<HeapObject> table = LoadTable(collection);\n   TNode<IntPtrT> capacity = LoadTableCapacity(table);\n   TNode<IntPtrT> key_index =\n       FindKeyIndexForKey(table, key, hash, EntryMask(capacity), &if_not_found);\n@@ -2461,15 +2322,15 @@ TF_BUILTIN(WeakCollectionDelete, WeakCollectionsBuiltinsAssembler) {\n // a WeakMap or WeakSet.\n TF_BUILTIN(WeakCollectionSet, WeakCollectionsBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n-  TNode<Object> collection = CAST(Parameter(Descriptor::kCollection));\n-  TNode<Object> key = CAST(Parameter(Descriptor::kKey));\n+  TNode<HeapObject> collection = CAST(Parameter(Descriptor::kCollection));\n+  TNode<JSReceiver> key = CAST(Parameter(Descriptor::kKey));\n   TNode<Object> value = CAST(Parameter(Descriptor::kValue));\n \n   CSA_ASSERT(this, IsJSReceiver(key));\n \n   Label call_runtime(this), if_no_hash(this), if_not_found(this);\n \n-  TNode<Object> table = LoadTable(collection);\n+  TNode<HeapObject> table = LoadTable(collection);\n   TNode<IntPtrT> capacity = LoadTableCapacity(table);\n   TNode<IntPtrT> entry_mask = EntryMask(capacity);\n "
        },
        {
            "sha": "936d22c492c37767fe7617bc0ffbdd65023ad766",
            "filename": "deps/v8/src/builtins/builtins-console.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -30,6 +30,7 @@ namespace internal {\n   V(GroupEnd, groupEnd)             \\\n   V(Clear, clear)                   \\\n   V(Count, count)                   \\\n+  V(CountReset, countReset)         \\\n   V(Assert, assert)                 \\\n   V(MarkTimeline, markTimeline)     \\\n   V(Profile, profile)               \\"
        },
        {
            "sha": "0933cc9a3cd93f3288f1641886e5ece1a35f0c61",
            "filename": "deps/v8/src/builtins/builtins-constructor-gen.cc",
            "status": "modified",
            "additions": 27,
            "deletions": 24,
            "changes": 51,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -233,7 +233,7 @@ Node* ConstructorBuiltinsAssembler::EmitFastNewObject(Node* context,\n }\n \n Node* ConstructorBuiltinsAssembler::EmitFastNewFunctionContext(\n-    Node* function, Node* slots, Node* context, ScopeType scope_type) {\n+    Node* scope_info, Node* slots, Node* context, ScopeType scope_type) {\n   slots = ChangeUint32ToWord(slots);\n \n   // TODO(ishell): Use CSA::OptimalParameterMode() here.\n@@ -261,8 +261,8 @@ Node* ConstructorBuiltinsAssembler::EmitFastNewFunctionContext(\n                                  SmiTag(length));\n \n   // Set up the fixed slots.\n-  StoreFixedArrayElement(function_context, Context::CLOSURE_INDEX, function,\n-                         SKIP_WRITE_BARRIER);\n+  StoreFixedArrayElement(function_context, Context::SCOPE_INFO_INDEX,\n+                         scope_info, SKIP_WRITE_BARRIER);\n   StoreFixedArrayElement(function_context, Context::PREVIOUS_INDEX, context,\n                          SKIP_WRITE_BARRIER);\n   StoreFixedArrayElement(function_context, Context::EXTENSION_INDEX,\n@@ -287,18 +287,18 @@ Node* ConstructorBuiltinsAssembler::EmitFastNewFunctionContext(\n }\n \n TF_BUILTIN(FastNewFunctionContextEval, ConstructorBuiltinsAssembler) {\n-  Node* function = Parameter(FastNewFunctionContextDescriptor::kFunction);\n+  Node* scope_info = Parameter(FastNewFunctionContextDescriptor::kScopeInfo);\n   Node* slots = Parameter(FastNewFunctionContextDescriptor::kSlots);\n   Node* context = Parameter(FastNewFunctionContextDescriptor::kContext);\n-  Return(EmitFastNewFunctionContext(function, slots, context,\n+  Return(EmitFastNewFunctionContext(scope_info, slots, context,\n                                     ScopeType::EVAL_SCOPE));\n }\n \n TF_BUILTIN(FastNewFunctionContextFunction, ConstructorBuiltinsAssembler) {\n-  Node* function = Parameter(FastNewFunctionContextDescriptor::kFunction);\n+  Node* scope_info = Parameter(FastNewFunctionContextDescriptor::kScopeInfo);\n   Node* slots = Parameter(FastNewFunctionContextDescriptor::kSlots);\n   Node* context = Parameter(FastNewFunctionContextDescriptor::kContext);\n-  Return(EmitFastNewFunctionContext(function, slots, context,\n+  Return(EmitFastNewFunctionContext(scope_info, slots, context,\n                                     ScopeType::FUNCTION_SCOPE));\n }\n \n@@ -308,8 +308,8 @@ Node* ConstructorBuiltinsAssembler::EmitCreateRegExpLiteral(\n   Label call_runtime(this, Label::kDeferred), end(this);\n \n   VARIABLE(result, MachineRepresentation::kTagged);\n-  Node* literal_site =\n-      LoadFeedbackVectorSlot(feedback_vector, slot, 0, INTPTR_PARAMETERS);\n+  TNode<Object> literal_site = ToObject(\n+      LoadFeedbackVectorSlot(feedback_vector, slot, 0, INTPTR_PARAMETERS));\n   GotoIf(NotHasBoilerplate(literal_site), &call_runtime);\n   {\n     Node* boilerplate = literal_site;\n@@ -353,17 +353,19 @@ Node* ConstructorBuiltinsAssembler::EmitCreateShallowArrayLiteral(\n       return_result(this);\n   VARIABLE(result, MachineRepresentation::kTagged);\n \n-  Node* allocation_site =\n-      LoadFeedbackVectorSlot(feedback_vector, slot, 0, INTPTR_PARAMETERS);\n+  TNode<Object> allocation_site = ToObject(\n+      LoadFeedbackVectorSlot(feedback_vector, slot, 0, INTPTR_PARAMETERS));\n   GotoIf(NotHasBoilerplate(allocation_site), call_runtime);\n \n   Node* boilerplate = LoadAllocationSiteBoilerplate(allocation_site);\n-  allocation_site =\n-      allocation_site_mode == TRACK_ALLOCATION_SITE ? allocation_site : nullptr;\n \n   CSA_ASSERT(this, IsJSArrayMap(LoadMap(boilerplate)));\n   ParameterMode mode = OptimalParameterMode();\n-  return CloneFastJSArray(context, boilerplate, mode, allocation_site);\n+  if (allocation_site_mode == TRACK_ALLOCATION_SITE) {\n+    return CloneFastJSArray(context, boilerplate, mode, allocation_site);\n+  } else {\n+    return CloneFastJSArray(context, boilerplate, mode);\n+  }\n }\n \n TF_BUILTIN(CreateShallowArrayLiteral, ConstructorBuiltinsAssembler) {\n@@ -390,8 +392,9 @@ Node* ConstructorBuiltinsAssembler::EmitCreateEmptyArrayLiteral(\n     Node* feedback_vector, Node* slot, Node* context) {\n   // Array literals always have a valid AllocationSite to properly track\n   // elements transitions.\n-  VARIABLE(allocation_site, MachineRepresentation::kTagged,\n-           LoadFeedbackVectorSlot(feedback_vector, slot, 0, INTPTR_PARAMETERS));\n+  TVARIABLE(Object, allocation_site,\n+            ToObject(LoadFeedbackVectorSlot(feedback_vector, slot, 0,\n+                                            INTPTR_PARAMETERS)));\n \n   Label create_empty_array(this),\n       initialize_allocation_site(this, Label::kDeferred), done(this);\n@@ -401,15 +404,15 @@ Node* ConstructorBuiltinsAssembler::EmitCreateEmptyArrayLiteral(\n   // TODO(cbruni): create the AllocationSite in CSA.\n   BIND(&initialize_allocation_site);\n   {\n-    allocation_site.Bind(\n-        CreateAllocationSiteInFeedbackVector(feedback_vector, SmiTag(slot)));\n+    allocation_site =\n+        CreateAllocationSiteInFeedbackVector(feedback_vector, SmiTag(slot));\n     Goto(&create_empty_array);\n   }\n \n   BIND(&create_empty_array);\n-  CSA_ASSERT(this, IsAllocationSite(allocation_site.value()));\n+  CSA_ASSERT(this, IsAllocationSite(CAST(allocation_site.value())));\n   Node* kind = SmiToInt32(CAST(\n-      LoadObjectField(allocation_site.value(),\n+      LoadObjectField(CAST(allocation_site.value()),\n                       AllocationSite::kTransitionInfoOrBoilerplateOffset)));\n   CSA_ASSERT(this, IsFastElementsKind(kind));\n   Node* native_context = LoadNativeContext(context);\n@@ -437,8 +440,8 @@ TF_BUILTIN(CreateEmptyArrayLiteral, ConstructorBuiltinsAssembler) {\n \n Node* ConstructorBuiltinsAssembler::EmitCreateShallowObjectLiteral(\n     Node* feedback_vector, Node* slot, Label* call_runtime) {\n-  Node* allocation_site =\n-      LoadFeedbackVectorSlot(feedback_vector, slot, 0, INTPTR_PARAMETERS);\n+  TNode<Object> allocation_site = ToObject(\n+      LoadFeedbackVectorSlot(feedback_vector, slot, 0, INTPTR_PARAMETERS));\n   GotoIf(NotHasBoilerplate(allocation_site), call_runtime);\n \n   Node* boilerplate = LoadAllocationSiteBoilerplate(allocation_site);\n@@ -456,8 +459,8 @@ Node* ConstructorBuiltinsAssembler::EmitCreateShallowObjectLiteral(\n     BIND(&if_dictionary);\n     {\n       Comment(\"Copy dictionary properties\");\n-      var_properties.Bind(\n-          CopyNameDictionary(LoadSlowProperties(boilerplate), call_runtime));\n+      var_properties.Bind(CopyNameDictionary(\n+          CAST(LoadSlowProperties(boilerplate)), call_runtime));\n       // Slow objects have no in-object properties.\n       Goto(&done);\n     }"
        },
        {
            "sha": "4d3c7faa5302110654662bc3cc374420580b77e0",
            "filename": "deps/v8/src/builtins/builtins-date-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -52,7 +52,7 @@ void DateBuiltinsAssembler::Generate_DatePrototype_GetField(Node* context,\n \n     Node* field_index_smi = SmiConstant(field_index);\n     Node* function =\n-        ExternalConstant(ExternalReference::get_date_field_function(isolate()));\n+        ExternalConstant(ExternalReference::get_date_field_function());\n     Node* result = CallCFunction2(\n         MachineType::AnyTagged(), MachineType::AnyTagged(),\n         MachineType::AnyTagged(), function, receiver, field_index_smi);"
        },
        {
            "sha": "6568469145e8ee438f5cd963aff5f6b26399304d",
            "filename": "deps/v8/src/builtins/builtins-date.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 19,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -80,7 +80,7 @@ double MakeDay(double year, double month, double date) {\n                                           182, 213, 244, 274, 305, 335};\n       day_from_year += kDayFromMonth[m];\n     }\n-    return static_cast<double>(day_from_year - 1) + date;\n+    return static_cast<double>(day_from_year - 1) + DoubleToInteger(date);\n   }\n   return std::numeric_limits<double>::quiet_NaN();\n }\n@@ -98,14 +98,6 @@ double MakeTime(double hour, double min, double sec, double ms) {\n   return std::numeric_limits<double>::quiet_NaN();\n }\n \n-// ES6 section 20.3.1.15 TimeClip (time)\n-double TimeClip(double time) {\n-  if (-DateCache::kMaxTimeInMs <= time && time <= DateCache::kMaxTimeInMs) {\n-    return DoubleToInteger(time) + 0.0;\n-  }\n-  return std::numeric_limits<double>::quiet_NaN();\n-}\n-\n const char* kShortWeekDays[] = {\"Sun\", \"Mon\", \"Tue\", \"Wed\",\n                                 \"Thu\", \"Fri\", \"Sat\"};\n const char* kShortMonths[] = {\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\n@@ -190,7 +182,7 @@ Object* SetLocalDateValue(Handle<JSDate> date, double time_val) {\n   } else {\n     time_val = std::numeric_limits<double>::quiet_NaN();\n   }\n-  return *JSDate::SetValue(date, TimeClip(time_val));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(time_val));\n }\n \n }  // namespace\n@@ -356,7 +348,8 @@ BUILTIN(DateUTC) {\n   }\n   double const day = MakeDay(year, month, date);\n   double const time = MakeTime(hours, minutes, seconds, ms);\n-  return *isolate->factory()->NewNumber(TimeClip(MakeDate(day, time)));\n+  return *isolate->factory()->NewNumber(\n+      DateCache::TimeClip(MakeDate(day, time)));\n }\n \n // ES6 section 20.3.4.20 Date.prototype.setDate ( date )\n@@ -560,7 +553,7 @@ BUILTIN(DatePrototypeSetTime) {\n   CHECK_RECEIVER(JSDate, date, \"Date.prototype.setTime\");\n   Handle<Object> value = args.atOrUndefined(isolate, 1);\n   ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, value, Object::ToNumber(value));\n-  return *JSDate::SetValue(date, TimeClip(value->Number()));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(value->Number()));\n }\n \n // ES6 section 20.3.4.28 Date.prototype.setUTCDate ( date )\n@@ -577,7 +570,7 @@ BUILTIN(DatePrototypeSetUTCDate) {\n   isolate->date_cache()->YearMonthDayFromDays(days, &year, &month, &day);\n   double const time_val =\n       MakeDate(MakeDay(year, month, value->Number()), time_within_day);\n-  return *JSDate::SetValue(date, TimeClip(time_val));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(time_val));\n }\n \n // ES6 section 20.3.4.29 Date.prototype.setUTCFullYear (year, month, date)\n@@ -609,7 +602,7 @@ BUILTIN(DatePrototypeSetUTCFullYear) {\n     }\n   }\n   double const time_val = MakeDate(MakeDay(y, m, dt), time_within_day);\n-  return *JSDate::SetValue(date, TimeClip(time_val));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(time_val));\n }\n \n // ES6 section 20.3.4.30 Date.prototype.setUTCHours(hour, min, sec, ms)\n@@ -645,7 +638,7 @@ BUILTIN(DatePrototypeSetUTCHours) {\n     }\n     time_val = MakeDate(day, MakeTime(h, m, s, milli));\n   }\n-  return *JSDate::SetValue(date, TimeClip(time_val));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(time_val));\n }\n \n // ES6 section 20.3.4.31 Date.prototype.setUTCMilliseconds(ms)\n@@ -664,7 +657,7 @@ BUILTIN(DatePrototypeSetUTCMilliseconds) {\n     int s = (time_within_day / 1000) % 60;\n     time_val = MakeDate(day, MakeTime(h, m, s, ms->Number()));\n   }\n-  return *JSDate::SetValue(date, TimeClip(time_val));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(time_val));\n }\n \n // ES6 section 20.3.4.32 Date.prototype.setUTCMinutes ( min, sec, ms )\n@@ -695,7 +688,7 @@ BUILTIN(DatePrototypeSetUTCMinutes) {\n     }\n     time_val = MakeDate(day, MakeTime(h, m, s, milli));\n   }\n-  return *JSDate::SetValue(date, TimeClip(time_val));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(time_val));\n }\n \n // ES6 section 20.3.4.31 Date.prototype.setUTCMonth ( month, date )\n@@ -721,7 +714,7 @@ BUILTIN(DatePrototypeSetUTCMonth) {\n     }\n     time_val = MakeDate(MakeDay(year, m, dt), time_within_day);\n   }\n-  return *JSDate::SetValue(date, TimeClip(time_val));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(time_val));\n }\n \n // ES6 section 20.3.4.34 Date.prototype.setUTCSeconds ( sec, ms )\n@@ -747,7 +740,7 @@ BUILTIN(DatePrototypeSetUTCSeconds) {\n     }\n     time_val = MakeDate(day, MakeTime(h, m, s, milli));\n   }\n-  return *JSDate::SetValue(date, TimeClip(time_val));\n+  return *JSDate::SetValue(date, DateCache::TimeClip(time_val));\n }\n \n // ES6 section 20.3.4.35 Date.prototype.toDateString ( )"
        },
        {
            "sha": "3da81f17a4b2c52eb2ac704109cb80ce8013ca53",
            "filename": "deps/v8/src/builtins/builtins-definitions.h",
            "status": "modified",
            "additions": 75,
            "deletions": 40,
            "changes": 115,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -5,6 +5,9 @@\n #ifndef V8_BUILTINS_BUILTINS_DEFINITIONS_H_\n #define V8_BUILTINS_BUILTINS_DEFINITIONS_H_\n \n+// include generated header\n+#include \"torque-generated/builtin-definitions-from-dsl.h\"\n+\n namespace v8 {\n namespace internal {\n \n@@ -65,8 +68,7 @@ namespace internal {\n   TFC(ConstructWithArrayLike, ConstructWithArrayLike, 1)                       \\\n   ASM(ConstructForwardVarargs)                                                 \\\n   ASM(ConstructFunctionForwardVarargs)                                         \\\n-  ASM(JSConstructStubGenericRestrictedReturn)                                  \\\n-  ASM(JSConstructStubGenericUnrestrictedReturn)                                \\\n+  ASM(JSConstructStubGeneric)                                                  \\\n   ASM(JSBuiltinsConstructStub)                                                 \\\n   TFC(FastNewObject, FastNewObject, 1)                                         \\\n   TFS(FastNewClosure, kSharedFunctionInfo, kFeedbackCell)                      \\\n@@ -203,7 +205,6 @@ namespace internal {\n   TFH(KeyedStoreIC_Megamorphic, StoreWithVector)                               \\\n   TFH(KeyedStoreIC_Slow, StoreWithVector)                                      \\\n   TFH(LoadGlobalIC_Slow, LoadWithVector)                                       \\\n-  TFH(LoadField, LoadField)                                                    \\\n   TFH(LoadIC_FunctionPrototype, LoadWithVector)                                \\\n   TFH(LoadIC_Slow, LoadWithVector)                                             \\\n   TFH(LoadIC_StringLength, LoadWithVector)                                     \\\n@@ -276,14 +277,6 @@ namespace internal {\n   /* Support for Array.from and other array-copying idioms */                  \\\n   TFS(CloneFastJSArray, kSource)                                               \\\n   TFS(ExtractFastJSArray, kSource, kBegin, kCount)                             \\\n-  /* ES6 #sec-array.prototype.foreach */                                       \\\n-  TFS(ArrayForEachLoopContinuation, kReceiver, kCallbackFn, kThisArg, kArray,  \\\n-      kObject, kInitialK, kLength, kTo)                                        \\\n-  TFJ(ArrayForEachLoopEagerDeoptContinuation, 4, kCallbackFn, kThisArg,        \\\n-      kInitialK, kLength)                                                      \\\n-  TFJ(ArrayForEachLoopLazyDeoptContinuation, 5, kCallbackFn, kThisArg,         \\\n-      kInitialK, kLength, kResult)                                             \\\n-  TFJ(ArrayForEach, SharedFunctionInfo::kDontAdaptArgumentsSentinel)           \\\n   /* ES6 #sec-array.prototype.every */                                         \\\n   TFS(ArrayEveryLoopContinuation, kReceiver, kCallbackFn, kThisArg, kArray,    \\\n       kObject, kInitialK, kLength, kTo)                                        \\\n@@ -437,6 +430,7 @@ namespace internal {\n   CPP(ConsoleGroupEnd)                                                         \\\n   CPP(ConsoleClear)                                                            \\\n   CPP(ConsoleCount)                                                            \\\n+  CPP(ConsoleCountReset)                                                       \\\n   CPP(ConsoleAssert)                                                           \\\n   TFJ(FastConsoleAssert, SharedFunctionInfo::kDontAdaptArgumentsSentinel)      \\\n   CPP(ConsoleMarkTimeline)                                                     \\\n@@ -729,6 +723,7 @@ namespace internal {\n   TFJ(NumberParseFloat, 1, kString)                                            \\\n   /* ES6 #sec-number.parseint */                                               \\\n   TFJ(NumberParseInt, 2, kString, kRadix)                                      \\\n+  TFS(ParseInt, kString, kRadix)                                               \\\n   CPP(NumberPrototypeToExponential)                                            \\\n   CPP(NumberPrototypeToFixed)                                                  \\\n   CPP(NumberPrototypeToLocaleString)                                           \\\n@@ -763,9 +758,10 @@ namespace internal {\n   /* Object */                                                                 \\\n   /* ES #sec-object-constructor */                                             \\\n   TFJ(ObjectConstructor, SharedFunctionInfo::kDontAdaptArgumentsSentinel)      \\\n-  CPP(ObjectAssign)                                                            \\\n+  TFJ(ObjectAssign, SharedFunctionInfo::kDontAdaptArgumentsSentinel)           \\\n   /* ES #sec-object.create */                                                  \\\n   TFJ(ObjectCreate, SharedFunctionInfo::kDontAdaptArgumentsSentinel)           \\\n+  TFS(CreateObjectWithoutProperties, kPrototypeArg)                            \\\n   CPP(ObjectDefineGetter)                                                      \\\n   CPP(ObjectDefineProperties)                                                  \\\n   CPP(ObjectDefineProperty)                                                    \\\n@@ -1097,7 +1093,8 @@ namespace internal {\n                                                                                \\\n   /* TypedArray */                                                             \\\n   TFS(IterableToList, kIterable, kIteratorFn)                                  \\\n-  TFS(TypedArrayInitialize, kHolder, kLength, kElementSize, kInitialize)       \\\n+  TFS(TypedArrayInitialize, kHolder, kLength, kElementSize, kInitialize,       \\\n+      kBufferConstructor)                                                      \\\n   TFS(TypedArrayInitializeWithBuffer, kHolder, kLength, kBuffer, kElementSize, \\\n       kByteOffset)                                                             \\\n   /* ES #sec-typedarray-constructors */                                        \\\n@@ -1170,6 +1167,8 @@ namespace internal {\n   TFJ(TypedArrayOf, SharedFunctionInfo::kDontAdaptArgumentsSentinel)           \\\n   /* ES6 %TypedArray%.from */                                                  \\\n   TFJ(TypedArrayFrom, SharedFunctionInfo::kDontAdaptArgumentsSentinel)         \\\n+  TFS(TypedArrayLoadElementAsTagged, kArray, kKind, kIndex)                    \\\n+  TFS(TypedArrayStoreElementFromTagged, kArray, kKind, kIndex, kValue)         \\\n                                                                                \\\n   /* Wasm */                                                                   \\\n   ASM(WasmCompileLazy)                                                         \\\n@@ -1249,36 +1248,72 @@ namespace internal {\n   /* #sec-async-iterator-value-unwrap-functions */                             \\\n   TFJ(AsyncIteratorValueUnwrap, 1, kValue)                                     \\\n                                                                                \\\n-  /* Trace */                                                                  \\\n-  CPP(IsTraceCategoryEnabled)                                                  \\\n-  CPP(Trace)\n+  /* CEntry */                                                                 \\\n+  ASM(CEntry_Return1_DontSaveFPRegs_ArgvOnStack_NoBuiltinExit)                 \\\n+  ASM(CEntry_Return1_DontSaveFPRegs_ArgvOnStack_BuiltinExit)                   \\\n+  ASM(CEntry_Return1_DontSaveFPRegs_ArgvInRegister_NoBuiltinExit)              \\\n+  ASM(CEntry_Return1_SaveFPRegs_ArgvOnStack_NoBuiltinExit)                     \\\n+  ASM(CEntry_Return1_SaveFPRegs_ArgvOnStack_BuiltinExit)                       \\\n+  ASM(CEntry_Return2_DontSaveFPRegs_ArgvOnStack_NoBuiltinExit)                 \\\n+  ASM(CEntry_Return2_DontSaveFPRegs_ArgvOnStack_BuiltinExit)                   \\\n+  ASM(CEntry_Return2_DontSaveFPRegs_ArgvInRegister_NoBuiltinExit)              \\\n+  ASM(CEntry_Return2_SaveFPRegs_ArgvOnStack_NoBuiltinExit)                     \\\n+  ASM(CEntry_Return2_SaveFPRegs_ArgvOnStack_BuiltinExit)                       \\\n+                                                                               \\\n+  /* StringAdd */                                                              \\\n+  TFS(StringAdd_CheckNone_NotTenured, kLeft, kRight)                           \\\n+  TFS(StringAdd_CheckNone_Tenured, kLeft, kRight)                              \\\n+  TFS(StringAdd_ConvertLeft_NotTenured, kLeft, kRight)                         \\\n+  TFS(StringAdd_ConvertRight_NotTenured, kLeft, kRight)                        \\\n+                                                                               \\\n+  /* Miscellaneous */                                                          \\\n+  ASM(DoubleToI)                                                               \\\n+  TFC(GetProperty, GetProperty, 1)                                             \\\n+  ASM(MathPowInternal)\n \n #ifdef V8_INTL_SUPPORT\n-#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, ASM)        \\\n-  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)         \\\n-                                                               \\\n-  TFS(StringToLowerCaseIntl, kString)                          \\\n-  /* ES #sec-string.prototype.tolowercase */                   \\\n-  TFJ(StringPrototypeToLowerCaseIntl, 0)                       \\\n-  /* ES #sec-string.prototype.touppercase */                   \\\n-  CPP(StringPrototypeToUpperCaseIntl)                          \\\n-  /* ES #sec-string.prototype.normalize */                     \\\n-  CPP(StringPrototypeNormalizeIntl)                            \\\n-  /* ecma402 #sec-intl.numberformat.prototype.formattoparts */ \\\n-  CPP(NumberFormatPrototypeFormatToParts)\n+#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, ASM)          \\\n+  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)           \\\n+  BUILTIN_LIST_FROM_DSL(CPP, API, TFJ, TFC, TFS, TFH, ASM)       \\\n+                                                                 \\\n+  TFS(StringToLowerCaseIntl, kString)                            \\\n+  /* ES #sec-string.prototype.tolowercase */                     \\\n+  TFJ(StringPrototypeToLowerCaseIntl, 0)                         \\\n+  /* ES #sec-string.prototype.touppercase */                     \\\n+  CPP(StringPrototypeToUpperCaseIntl)                            \\\n+  /* ES #sec-string.prototype.normalize */                       \\\n+  CPP(StringPrototypeNormalizeIntl)                              \\\n+  /* ecma402 #sec-intl.numberformat.prototype.formattoparts */   \\\n+  CPP(NumberFormatPrototypeFormatToParts)                        \\\n+  /* ecma402 #sec-intl.datetimeformat.prototype.formattoparts */ \\\n+  CPP(DateTimeFormatPrototypeFormatToParts)                      \\\n+  /* ecma402 #new proposal */                                    \\\n+  CPP(LocaleConstructor)                                         \\\n+  CPP(LocalePrototypeLanguage)                                   \\\n+  CPP(LocalePrototypeScript)                                     \\\n+  CPP(LocalePrototypeRegion)                                     \\\n+  CPP(LocalePrototypeBaseName)                                   \\\n+  CPP(LocalePrototypeCalendar)                                   \\\n+  CPP(LocalePrototypeCaseFirst)                                  \\\n+  CPP(LocalePrototypeCollation)                                  \\\n+  CPP(LocalePrototypeHourCycle)                                  \\\n+  CPP(LocalePrototypeNumeric)                                    \\\n+  CPP(LocalePrototypeNumberingSystem)                            \\\n+  CPP(LocalePrototypeToString)\n #else\n-#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, ASM) \\\n-  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)  \\\n-                                                        \\\n-  /* no-op fallback version */                          \\\n-  CPP(StringPrototypeNormalize)                         \\\n-  /* same as toLowercase; fallback version */           \\\n-  CPP(StringPrototypeToLocaleLowerCase)                 \\\n-  /* same as toUppercase; fallback version */           \\\n-  CPP(StringPrototypeToLocaleUpperCase)                 \\\n-  /* (obsolete) Unibrow version */                      \\\n-  CPP(StringPrototypeToLowerCase)                       \\\n-  /* (obsolete) Unibrow version */                      \\\n+#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, ASM)    \\\n+  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)     \\\n+  BUILTIN_LIST_FROM_DSL(CPP, API, TFJ, TFC, TFS, TFH, ASM) \\\n+                                                           \\\n+  /* no-op fallback version */                             \\\n+  CPP(StringPrototypeNormalize)                            \\\n+  /* same as toLowercase; fallback version */              \\\n+  CPP(StringPrototypeToLocaleLowerCase)                    \\\n+  /* same as toUppercase; fallback version */              \\\n+  CPP(StringPrototypeToLocaleUpperCase)                    \\\n+  /* (obsolete) Unibrow version */                         \\\n+  CPP(StringPrototypeToLowerCase)                          \\\n+  /* (obsolete) Unibrow version */                         \\\n   CPP(StringPrototypeToUpperCase)\n #endif  // V8_INTL_SUPPORT\n "
        },
        {
            "sha": "4e5276484f20cdf344420eb3f86974b3030e2e7f",
            "filename": "deps/v8/src/builtins/builtins-error.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-error.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-error.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-error.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -9,6 +9,7 @@\n #include \"src/counters.h\"\n #include \"src/messages.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/api-callbacks.h\"\n #include \"src/property-descriptor.h\"\n #include \"src/string-builder.h\"\n "
        },
        {
            "sha": "d53f89418cf015ecb569455faa95d88ade828fc9",
            "filename": "deps/v8/src/builtins/builtins-function-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -6,6 +6,7 @@\n #include \"src/builtins/builtins.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/frame-constants.h\"\n+#include \"src/objects/api-callbacks.h\"\n #include \"src/objects/descriptor-array.h\"\n \n namespace v8 {"
        },
        {
            "sha": "df1dc19d82dfb1b6d2b40c87c2a3dd493af8f63b",
            "filename": "deps/v8/src/builtins/builtins-function.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -10,6 +10,7 @@\n #include \"src/counters.h\"\n #include \"src/lookup.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/api-callbacks.h\"\n #include \"src/string-builder.h\"\n \n namespace v8 {"
        },
        {
            "sha": "769238ccea82c5c53ade78c8a5cd63cb0243397e",
            "filename": "deps/v8/src/builtins/builtins-generator-gen.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-generator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-generator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-generator-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -35,11 +35,11 @@ void GeneratorBuiltinsAssembler::GeneratorPrototypeResume(\n             &if_receiverisincompatible);\n \n   // Check if the {receiver} is running or already closed.\n-  Node* receiver_continuation =\n-      LoadObjectField(receiver, JSGeneratorObject::kContinuationOffset);\n+  TNode<Smi> receiver_continuation =\n+      CAST(LoadObjectField(receiver, JSGeneratorObject::kContinuationOffset));\n   Label if_receiverisclosed(this, Label::kDeferred),\n       if_receiverisrunning(this, Label::kDeferred);\n-  Node* closed = SmiConstant(JSGeneratorObject::kGeneratorClosed);\n+  TNode<Smi> closed = SmiConstant(JSGeneratorObject::kGeneratorClosed);\n   GotoIf(SmiEqual(receiver_continuation, closed), &if_receiverisclosed);\n   DCHECK_LT(JSGeneratorObject::kGeneratorExecuting,\n             JSGeneratorObject::kGeneratorClosed);\n@@ -59,14 +59,14 @@ void GeneratorBuiltinsAssembler::GeneratorPrototypeResume(\n \n   // If the generator is not suspended (i.e., its state is 'executing'),\n   // close it and wrap the return value in IteratorResult.\n-  Node* result_continuation =\n-      LoadObjectField(receiver, JSGeneratorObject::kContinuationOffset);\n+  TNode<Smi> result_continuation =\n+      CAST(LoadObjectField(receiver, JSGeneratorObject::kContinuationOffset));\n \n   // The generator function should not close the generator by itself, let's\n   // check it is indeed not closed yet.\n   CSA_ASSERT(this, SmiNotEqual(result_continuation, closed));\n \n-  Node* executing = SmiConstant(JSGeneratorObject::kGeneratorExecuting);\n+  TNode<Smi> executing = SmiConstant(JSGeneratorObject::kGeneratorExecuting);\n   GotoIf(SmiEqual(result_continuation, executing), &if_final_return);\n \n   args->PopAndReturn(result);"
        },
        {
            "sha": "7ee50345aadea338d87912c93a493d83b74906b8",
            "filename": "deps/v8/src/builtins/builtins-ic-gen.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -25,7 +25,6 @@ IC_BUILTIN(LoadIC_Noninlined)\n IC_BUILTIN(LoadIC_Uninitialized)\n IC_BUILTIN(KeyedLoadIC)\n IC_BUILTIN(LoadICTrampoline)\n-IC_BUILTIN(LoadField)\n IC_BUILTIN(KeyedLoadICTrampoline)\n IC_BUILTIN(KeyedLoadIC_Megamorphic)\n IC_BUILTIN(KeyedLoadIC_PolymorphicName)"
        },
        {
            "sha": "c1bf7df2ec1acb1e5d08c7f386fe9aa507bdcd9f",
            "filename": "deps/v8/src/builtins/builtins-internal-gen.cc",
            "status": "modified",
            "additions": 141,
            "deletions": 35,
            "changes": 176,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -383,8 +383,8 @@ class RecordWriteCodeStubAssembler : public CodeStubAssembler {\n \n     BIND(&overflow);\n     {\n-      Node* function = ExternalConstant(\n-          ExternalReference::store_buffer_overflow_function(this->isolate()));\n+      Node* function =\n+          ExternalConstant(ExternalReference::store_buffer_overflow_function());\n       CallCFunction1WithCallerSavedRegistersMode(MachineType::Int32(),\n                                                  MachineType::Pointer(),\n                                                  function, isolate, mode, next);\n@@ -467,8 +467,7 @@ TF_BUILTIN(RecordWrite, RecordWriteCodeStubAssembler) {\n     BIND(&call_incremental_wb);\n     {\n       Node* function = ExternalConstant(\n-          ExternalReference::incremental_marking_record_write_function(\n-              this->isolate()));\n+          ExternalReference::incremental_marking_record_write_function());\n       CallCFunction3WithCallerSavedRegistersMode(\n           MachineType::Int32(), MachineType::Pointer(), MachineType::Pointer(),\n           MachineType::Pointer(), function, object, slot, isolate, fp_mode,\n@@ -485,22 +484,23 @@ class DeletePropertyBaseAssembler : public AccessorAssembler {\n   explicit DeletePropertyBaseAssembler(compiler::CodeAssemblerState* state)\n       : AccessorAssembler(state) {}\n \n-  void DeleteDictionaryProperty(Node* receiver, Node* properties, Node* name,\n-                                Node* context, Label* dont_delete,\n-                                Label* notfound) {\n-    VARIABLE(var_name_index, MachineType::PointerRepresentation());\n+  void DeleteDictionaryProperty(TNode<Object> receiver,\n+                                TNode<NameDictionary> properties,\n+                                TNode<Name> name, TNode<Context> context,\n+                                Label* dont_delete, Label* notfound) {\n+    TVARIABLE(IntPtrT, var_name_index);\n     Label dictionary_found(this, &var_name_index);\n     NameDictionaryLookup<NameDictionary>(properties, name, &dictionary_found,\n                                          &var_name_index, notfound);\n \n     BIND(&dictionary_found);\n-    Node* key_index = var_name_index.value();\n-    Node* details =\n+    TNode<IntPtrT> key_index = var_name_index.value();\n+    TNode<Uint32T> details =\n         LoadDetailsByKeyIndex<NameDictionary>(properties, key_index);\n     GotoIf(IsSetWord32(details, PropertyDetails::kAttributesDontDeleteMask),\n            dont_delete);\n     // Overwrite the entry itself (see NameDictionary::SetEntry).\n-    Node* filler = TheHoleConstant();\n+    TNode<HeapObject> filler = TheHoleConstant();\n     DCHECK(Heap::RootIsImmortalImmovable(Heap::kTheHoleValueRootIndex));\n     StoreFixedArrayElement(properties, key_index, filler, SKIP_WRITE_BARRIER);\n     StoreValueByKeyIndex<NameDictionary>(properties, key_index, filler,\n@@ -509,16 +509,17 @@ class DeletePropertyBaseAssembler : public AccessorAssembler {\n                                            SmiConstant(0));\n \n     // Update bookkeeping information (see NameDictionary::ElementRemoved).\n-    Node* nof = GetNumberOfElements<NameDictionary>(properties);\n-    Node* new_nof = SmiSub(nof, SmiConstant(1));\n+    TNode<Smi> nof = GetNumberOfElements<NameDictionary>(properties);\n+    TNode<Smi> new_nof = SmiSub(nof, SmiConstant(1));\n     SetNumberOfElements<NameDictionary>(properties, new_nof);\n-    Node* num_deleted = GetNumberOfDeletedElements<NameDictionary>(properties);\n-    Node* new_deleted = SmiAdd(num_deleted, SmiConstant(1));\n+    TNode<Smi> num_deleted =\n+        GetNumberOfDeletedElements<NameDictionary>(properties);\n+    TNode<Smi> new_deleted = SmiAdd(num_deleted, SmiConstant(1));\n     SetNumberOfDeletedElements<NameDictionary>(properties, new_deleted);\n \n     // Shrink the dictionary if necessary (see NameDictionary::Shrink).\n     Label shrinking_done(this);\n-    Node* capacity = GetCapacity<NameDictionary>(properties);\n+    TNode<Smi> capacity = GetCapacity<NameDictionary>(properties);\n     GotoIf(SmiGreaterThan(new_nof, SmiShr(capacity, 2)), &shrinking_done);\n     GotoIf(SmiLessThan(new_nof, SmiConstant(16)), &shrinking_done);\n     CallRuntime(Runtime::kShrinkPropertyDictionary, context, receiver);\n@@ -530,22 +531,20 @@ class DeletePropertyBaseAssembler : public AccessorAssembler {\n };\n \n TF_BUILTIN(DeleteProperty, DeletePropertyBaseAssembler) {\n-  Node* receiver = Parameter(Descriptor::kObject);\n-  Node* key = Parameter(Descriptor::kKey);\n-  Node* language_mode = Parameter(Descriptor::kLanguageMode);\n-  Node* context = Parameter(Descriptor::kContext);\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kObject));\n+  TNode<Object> key = CAST(Parameter(Descriptor::kKey));\n+  TNode<Smi> language_mode = CAST(Parameter(Descriptor::kLanguageMode));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   VARIABLE(var_index, MachineType::PointerRepresentation());\n   VARIABLE(var_unique, MachineRepresentation::kTagged, key);\n   Label if_index(this), if_unique_name(this), if_notunique(this),\n       if_notfound(this), slow(this);\n \n   GotoIf(TaggedIsSmi(receiver), &slow);\n-  Node* receiver_map = LoadMap(receiver);\n-  Node* instance_type = LoadMapInstanceType(receiver_map);\n-  GotoIf(Int32LessThanOrEqual(instance_type,\n-                              Int32Constant(LAST_CUSTOM_ELEMENTS_RECEIVER)),\n-         &slow);\n+  TNode<Map> receiver_map = LoadMap(CAST(receiver));\n+  TNode<Int32T> instance_type = LoadMapInstanceType(receiver_map);\n+  GotoIf(IsCustomElementsReceiverInstanceType(instance_type), &slow);\n   TryToName(key, &if_index, &var_index, &if_unique_name, &var_unique, &slow,\n             &if_notunique);\n \n@@ -558,7 +557,7 @@ TF_BUILTIN(DeleteProperty, DeletePropertyBaseAssembler) {\n   BIND(&if_unique_name);\n   {\n     Comment(\"key is unique name\");\n-    Node* unique = var_unique.value();\n+    TNode<Name> unique = CAST(var_unique.value());\n     CheckForAssociatedProtector(unique, &slow);\n \n     Label dictionary(this), dont_delete(this);\n@@ -572,7 +571,8 @@ TF_BUILTIN(DeleteProperty, DeletePropertyBaseAssembler) {\n     {\n       InvalidateValidityCellIfPrototype(receiver_map);\n \n-      Node* properties = LoadSlowProperties(receiver);\n+      TNode<NameDictionary> properties =\n+          CAST(LoadSlowProperties(CAST(receiver)));\n       DeleteDictionaryProperty(receiver, properties, unique, context,\n                                &dont_delete, &if_notfound);\n     }\n@@ -672,12 +672,12 @@ class InternalBuiltinsAssembler : public CodeStubAssembler {\n                       SloppyTNode<HeapObject> promise_or_capability);\n \n   TNode<Object> GetPendingException() {\n-    auto ref = ExternalReference(kPendingExceptionAddress, isolate());\n+    auto ref = ExternalReference::Create(kPendingExceptionAddress, isolate());\n     return TNode<Object>::UncheckedCast(\n         Load(MachineType::AnyTagged(), ExternalConstant(ref)));\n   }\n   void ClearPendingException() {\n-    auto ref = ExternalReference(kPendingExceptionAddress, isolate());\n+    auto ref = ExternalReference::Create(kPendingExceptionAddress, isolate());\n     StoreNoWriteBarrier(MachineRepresentation::kTagged, ExternalConstant(ref),\n                         TheHoleConstant());\n   }\n@@ -728,13 +728,13 @@ void InternalBuiltinsAssembler::SetMicrotaskQueue(TNode<FixedArray> queue) {\n }\n \n TNode<Context> InternalBuiltinsAssembler::GetCurrentContext() {\n-  auto ref = ExternalReference(kContextAddress, isolate());\n+  auto ref = ExternalReference::Create(kContextAddress, isolate());\n   return TNode<Context>::UncheckedCast(\n       Load(MachineType::AnyTagged(), ExternalConstant(ref)));\n }\n \n void InternalBuiltinsAssembler::SetCurrentContext(TNode<Context> context) {\n-  auto ref = ExternalReference(kContextAddress, isolate());\n+  auto ref = ExternalReference::Create(kContextAddress, isolate());\n   StoreNoWriteBarrier(MachineRepresentation::kTagged, ExternalConstant(ref),\n                       context);\n }\n@@ -838,7 +838,7 @@ TF_BUILTIN(EnqueueMicrotask, InternalBuiltinsAssembler) {\n       // This is the likely case where the new queue fits into new space,\n       // and thus we don't need any write barriers for initializing it.\n       TNode<FixedArray> new_queue =\n-          CAST(AllocateFixedArray(PACKED_ELEMENTS, new_queue_length));\n+          AllocateFixedArray(PACKED_ELEMENTS, new_queue_length);\n       CopyFixedArrayElements(PACKED_ELEMENTS, queue, new_queue, num_tasks,\n                              SKIP_WRITE_BARRIER);\n       StoreFixedArrayElement(new_queue, num_tasks, microtask,\n@@ -852,9 +852,9 @@ TF_BUILTIN(EnqueueMicrotask, InternalBuiltinsAssembler) {\n     BIND(&if_lospace);\n     {\n       // The fallback case where the new queue ends up in large object space.\n-      TNode<FixedArray> new_queue = CAST(AllocateFixedArray(\n+      TNode<FixedArray> new_queue = AllocateFixedArray(\n           PACKED_ELEMENTS, new_queue_length, INTPTR_PARAMETERS,\n-          AllocationFlag::kAllowLargeObjectAllocation));\n+          AllocationFlag::kAllowLargeObjectAllocation);\n       CopyFixedArrayElements(PACKED_ELEMENTS, queue, new_queue, num_tasks);\n       StoreFixedArrayElement(new_queue, num_tasks, microtask);\n       FillFixedArrayWithValue(PACKED_ELEMENTS, new_queue, new_num_tasks,\n@@ -960,7 +960,7 @@ TF_BUILTIN(RunMicrotasks, InternalBuiltinsAssembler) {\n             LoadObjectField(microtask, CallbackTask::kDataOffset);\n \n         // If this turns out to become a bottleneck because of the calls\n-        // to C++ via CEntryStub, we can choose to speed them up using a\n+        // to C++ via CEntry, we can choose to speed them up using a\n         // similar mechanism that we use for the CallApiFunction stub,\n         // except that calling the MicrotaskCallback is even easier, since\n         // it doesn't accept any tagged parameters, doesn't return a value\n@@ -1097,5 +1097,111 @@ TF_BUILTIN(AbortJS, CodeStubAssembler) {\n   TailCallRuntime(Runtime::kAbortJS, reason, message);\n }\n \n+void Builtins::Generate_CEntry_Return1_DontSaveFPRegs_ArgvOnStack_NoBuiltinExit(\n+    MacroAssembler* masm) {\n+  Generate_CEntry(masm, 1, kDontSaveFPRegs, kArgvOnStack, false);\n+}\n+\n+void Builtins::Generate_CEntry_Return1_DontSaveFPRegs_ArgvOnStack_BuiltinExit(\n+    MacroAssembler* masm) {\n+  Generate_CEntry(masm, 1, kDontSaveFPRegs, kArgvOnStack, true);\n+}\n+\n+void Builtins::\n+    Generate_CEntry_Return1_DontSaveFPRegs_ArgvInRegister_NoBuiltinExit(\n+        MacroAssembler* masm) {\n+  Generate_CEntry(masm, 1, kDontSaveFPRegs, kArgvInRegister, false);\n+}\n+\n+void Builtins::Generate_CEntry_Return1_SaveFPRegs_ArgvOnStack_NoBuiltinExit(\n+    MacroAssembler* masm) {\n+  Generate_CEntry(masm, 1, kSaveFPRegs, kArgvOnStack, false);\n+}\n+\n+void Builtins::Generate_CEntry_Return1_SaveFPRegs_ArgvOnStack_BuiltinExit(\n+    MacroAssembler* masm) {\n+  Generate_CEntry(masm, 1, kSaveFPRegs, kArgvOnStack, true);\n+}\n+\n+void Builtins::Generate_CEntry_Return2_DontSaveFPRegs_ArgvOnStack_NoBuiltinExit(\n+    MacroAssembler* masm) {\n+  Generate_CEntry(masm, 2, kDontSaveFPRegs, kArgvOnStack, false);\n+}\n+\n+void Builtins::Generate_CEntry_Return2_DontSaveFPRegs_ArgvOnStack_BuiltinExit(\n+    MacroAssembler* masm) {\n+  Generate_CEntry(masm, 2, kDontSaveFPRegs, kArgvOnStack, true);\n+}\n+\n+void Builtins::\n+    Generate_CEntry_Return2_DontSaveFPRegs_ArgvInRegister_NoBuiltinExit(\n+        MacroAssembler* masm) {\n+  Generate_CEntry(masm, 2, kDontSaveFPRegs, kArgvInRegister, false);\n+}\n+\n+void Builtins::Generate_CEntry_Return2_SaveFPRegs_ArgvOnStack_NoBuiltinExit(\n+    MacroAssembler* masm) {\n+  Generate_CEntry(masm, 2, kSaveFPRegs, kArgvOnStack, false);\n+}\n+\n+void Builtins::Generate_CEntry_Return2_SaveFPRegs_ArgvOnStack_BuiltinExit(\n+    MacroAssembler* masm) {\n+  Generate_CEntry(masm, 2, kSaveFPRegs, kArgvOnStack, true);\n+}\n+\n+// ES6 [[Get]] operation.\n+TF_BUILTIN(GetProperty, CodeStubAssembler) {\n+  Label call_runtime(this, Label::kDeferred), return_undefined(this), end(this);\n+\n+  Node* object = Parameter(Descriptor::kObject);\n+  Node* key = Parameter(Descriptor::kKey);\n+  Node* context = Parameter(Descriptor::kContext);\n+  VARIABLE(var_result, MachineRepresentation::kTagged);\n+\n+  CodeStubAssembler::LookupInHolder lookup_property_in_holder =\n+      [=, &var_result, &end](Node* receiver, Node* holder, Node* holder_map,\n+                             Node* holder_instance_type, Node* unique_name,\n+                             Label* next_holder, Label* if_bailout) {\n+        VARIABLE(var_value, MachineRepresentation::kTagged);\n+        Label if_found(this);\n+        TryGetOwnProperty(context, receiver, holder, holder_map,\n+                          holder_instance_type, unique_name, &if_found,\n+                          &var_value, next_holder, if_bailout);\n+        BIND(&if_found);\n+        {\n+          var_result.Bind(var_value.value());\n+          Goto(&end);\n+        }\n+      };\n+\n+  CodeStubAssembler::LookupInHolder lookup_element_in_holder =\n+      [=](Node* receiver, Node* holder, Node* holder_map,\n+          Node* holder_instance_type, Node* index, Label* next_holder,\n+          Label* if_bailout) {\n+        // Not supported yet.\n+        Use(next_holder);\n+        Goto(if_bailout);\n+      };\n+\n+  TryPrototypeChainLookup(object, key, lookup_property_in_holder,\n+                          lookup_element_in_holder, &return_undefined,\n+                          &call_runtime);\n+\n+  BIND(&return_undefined);\n+  {\n+    var_result.Bind(UndefinedConstant());\n+    Goto(&end);\n+  }\n+\n+  BIND(&call_runtime);\n+  {\n+    var_result.Bind(CallRuntime(Runtime::kGetProperty, context, object, key));\n+    Goto(&end);\n+  }\n+\n+  BIND(&end);\n+  Return(var_result.value());\n+}\n+\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "6d8636949e91a2ac8029adf0bed149fa162350f3",
            "filename": "deps/v8/src/builtins/builtins-intl-gen.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -57,8 +57,8 @@ TF_BUILTIN(StringToLowerCaseIntl, IntlBuiltinsAssembler) {\n     TNode<IntPtrT> const end_address =\n         Signed(IntPtrAdd(start_address, SmiUntag(length)));\n \n-    Node* const to_lower_table_addr = ExternalConstant(\n-        ExternalReference::intl_to_latin1_lower_table(isolate()));\n+    Node* const to_lower_table_addr =\n+        ExternalConstant(ExternalReference::intl_to_latin1_lower_table());\n \n     VARIABLE(var_did_change, MachineRepresentation::kWord32, Int32Constant(0));\n \n@@ -93,8 +93,8 @@ TF_BUILTIN(StringToLowerCaseIntl, IntlBuiltinsAssembler) {\n   {\n     Node* const src = to_direct.string();\n \n-    Node* const function_addr = ExternalConstant(\n-        ExternalReference::intl_convert_one_byte_to_lower(isolate()));\n+    Node* const function_addr =\n+        ExternalConstant(ExternalReference::intl_convert_one_byte_to_lower());\n     Node* const isolate_ptr =\n         ExternalConstant(ExternalReference::isolate_address(isolate()));\n "
        },
        {
            "sha": "e15fb9d9435fbd47ba0faae7ac38df57502a46db",
            "filename": "deps/v8/src/builtins/builtins-intl.cc",
            "status": "modified",
            "additions": 273,
            "deletions": 0,
            "changes": 273,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -9,15 +9,20 @@\n #include \"src/builtins/builtins-intl.h\"\n #include \"src/builtins/builtins-utils.h\"\n #include \"src/builtins/builtins.h\"\n+#include \"src/date.h\"\n #include \"src/intl.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects/intl-objects.h\"\n+#include \"src/objects/js-locale-inl.h\"\n \n+#include \"unicode/datefmt.h\"\n #include \"unicode/decimfmt.h\"\n #include \"unicode/fieldpos.h\"\n #include \"unicode/fpositer.h\"\n #include \"unicode/normalizer2.h\"\n #include \"unicode/numfmt.h\"\n+#include \"unicode/smpdtfmt.h\"\n+#include \"unicode/udat.h\"\n #include \"unicode/ufieldpositer.h\"\n #include \"unicode/unistr.h\"\n #include \"unicode/ustring.h\"\n@@ -152,6 +157,57 @@ Handle<String> IcuNumberFieldIdToNumberType(int32_t field_id, double number,\n   }\n }\n \n+// The list comes from third_party/icu/source/i18n/unicode/udat.h.\n+// They're mapped to DateTimeFormat components listed at\n+// https://tc39.github.io/ecma402/#sec-datetimeformat-abstracts .\n+\n+Handle<String> IcuDateFieldIdToDateType(int32_t field_id, Isolate* isolate) {\n+  switch (field_id) {\n+    case -1:\n+      return isolate->factory()->literal_string();\n+    case UDAT_YEAR_FIELD:\n+    case UDAT_EXTENDED_YEAR_FIELD:\n+    case UDAT_YEAR_NAME_FIELD:\n+      return isolate->factory()->year_string();\n+    case UDAT_MONTH_FIELD:\n+    case UDAT_STANDALONE_MONTH_FIELD:\n+      return isolate->factory()->month_string();\n+    case UDAT_DATE_FIELD:\n+      return isolate->factory()->day_string();\n+    case UDAT_HOUR_OF_DAY1_FIELD:\n+    case UDAT_HOUR_OF_DAY0_FIELD:\n+    case UDAT_HOUR1_FIELD:\n+    case UDAT_HOUR0_FIELD:\n+      return isolate->factory()->hour_string();\n+    case UDAT_MINUTE_FIELD:\n+      return isolate->factory()->minute_string();\n+    case UDAT_SECOND_FIELD:\n+      return isolate->factory()->second_string();\n+    case UDAT_DAY_OF_WEEK_FIELD:\n+    case UDAT_DOW_LOCAL_FIELD:\n+    case UDAT_STANDALONE_DAY_FIELD:\n+      return isolate->factory()->weekday_string();\n+    case UDAT_AM_PM_FIELD:\n+      return isolate->factory()->dayperiod_string();\n+    case UDAT_TIMEZONE_FIELD:\n+    case UDAT_TIMEZONE_RFC_FIELD:\n+    case UDAT_TIMEZONE_GENERIC_FIELD:\n+    case UDAT_TIMEZONE_SPECIAL_FIELD:\n+    case UDAT_TIMEZONE_LOCALIZED_GMT_OFFSET_FIELD:\n+    case UDAT_TIMEZONE_ISO_FIELD:\n+    case UDAT_TIMEZONE_ISO_LOCAL_FIELD:\n+      return isolate->factory()->timeZoneName_string();\n+    case UDAT_ERA_FIELD:\n+      return isolate->factory()->era_string();\n+    default:\n+      // Other UDAT_*_FIELD's cannot show up because there is no way to specify\n+      // them via options of Intl.DateTimeFormat.\n+      UNREACHABLE();\n+      // To prevent MSVC from issuing C4715 warning.\n+      return Handle<String>();\n+  }\n+}\n+\n bool AddElement(Handle<JSArray> array, int index,\n                 Handle<String> field_type_string,\n                 const icu::UnicodeString& formatted, int32_t begin, int32_t end,\n@@ -240,6 +296,53 @@ Object* FormatNumberToParts(Isolate* isolate, icu::NumberFormat* fmt,\n \n   return *result;\n }\n+\n+Object* FormatDateToParts(Isolate* isolate, icu::DateFormat* format,\n+                          double date_value) {\n+  Factory* factory = isolate->factory();\n+\n+  icu::UnicodeString formatted;\n+  icu::FieldPositionIterator fp_iter;\n+  icu::FieldPosition fp;\n+  UErrorCode status = U_ZERO_ERROR;\n+  format->format(date_value, formatted, &fp_iter, status);\n+  if (U_FAILURE(status)) return isolate->heap()->undefined_value();\n+\n+  Handle<JSArray> result = factory->NewJSArray(0);\n+  int32_t length = formatted.length();\n+  if (length == 0) return *result;\n+\n+  int index = 0;\n+  int32_t previous_end_pos = 0;\n+  while (fp_iter.next(fp)) {\n+    int32_t begin_pos = fp.getBeginIndex();\n+    int32_t end_pos = fp.getEndIndex();\n+\n+    if (previous_end_pos < begin_pos) {\n+      if (!AddElement(result, index, IcuDateFieldIdToDateType(-1, isolate),\n+                      formatted, previous_end_pos, begin_pos, isolate)) {\n+        return isolate->heap()->undefined_value();\n+      }\n+      ++index;\n+    }\n+    if (!AddElement(result, index,\n+                    IcuDateFieldIdToDateType(fp.getField(), isolate), formatted,\n+                    begin_pos, end_pos, isolate)) {\n+      return isolate->heap()->undefined_value();\n+    }\n+    previous_end_pos = end_pos;\n+    ++index;\n+  }\n+  if (previous_end_pos < length) {\n+    if (!AddElement(result, index, IcuDateFieldIdToDateType(-1, isolate),\n+                    formatted, previous_end_pos, length, isolate)) {\n+      return isolate->heap()->undefined_value();\n+    }\n+  }\n+  JSObject::ValidateElements(*result);\n+  return *result;\n+}\n+\n }  // namespace\n \n // Flattens a list of possibly-overlapping \"regions\" to a list of\n@@ -366,5 +469,175 @@ BUILTIN(NumberFormatPrototypeFormatToParts) {\n   return result;\n }\n \n+BUILTIN(DateTimeFormatPrototypeFormatToParts) {\n+  const char* const method = \"Intl.DateTimeFormat.prototype.formatToParts\";\n+  HandleScope handle_scope(isolate);\n+  CHECK_RECEIVER(JSObject, date_format_holder, method);\n+  Factory* factory = isolate->factory();\n+\n+  Handle<Symbol> marker = factory->intl_initialized_marker_symbol();\n+  Handle<Object> tag = JSReceiver::GetDataProperty(date_format_holder, marker);\n+  Handle<String> expected_tag = factory->NewStringFromStaticChars(\"dateformat\");\n+  if (!(tag->IsString() && String::cast(*tag)->Equals(*expected_tag))) {\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewTypeError(MessageTemplate::kIncompatibleMethodReceiver,\n+                              factory->NewStringFromAsciiChecked(method),\n+                              date_format_holder));\n+  }\n+\n+  Handle<Object> x = args.atOrUndefined(isolate, 1);\n+  if (x->IsUndefined(isolate)) {\n+    x = factory->NewNumber(JSDate::CurrentTimeValue(isolate));\n+  } else {\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, x,\n+                                       Object::ToNumber(args.at(1)));\n+  }\n+\n+  double date_value = DateCache::TimeClip(x->Number());\n+  if (std::isnan(date_value)) {\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewRangeError(MessageTemplate::kInvalidTimeValue));\n+  }\n+\n+  icu::SimpleDateFormat* date_format =\n+      DateFormat::UnpackDateFormat(isolate, date_format_holder);\n+  CHECK_NOT_NULL(date_format);\n+\n+  return FormatDateToParts(isolate, date_format, date_value);\n+}\n+\n+// Intl.Locale implementation\n+BUILTIN(LocaleConstructor) {\n+  HandleScope scope(isolate);\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n+                              isolate->factory()->NewStringFromAsciiChecked(\n+                                  \"Intl.Locale\")));\n+  } else {  // [[Construct]]\n+    Handle<JSFunction> target = args.target();\n+    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+    Handle<JSObject> result;\n+\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n+                                       JSObject::New(target, new_target));\n+\n+    Handle<Object> tag = args.atOrUndefined(isolate, 1);\n+    Handle<Object> options = args.atOrUndefined(isolate, 2);\n+\n+    // First parameter is a locale, as a string/object. Can't be empty.\n+    if (!tag->IsName() && !tag->IsJSReceiver()) {\n+      THROW_NEW_ERROR_RETURN_FAILURE(\n+          isolate, NewTypeError(MessageTemplate::kLocaleNotEmpty));\n+    }\n+\n+    Handle<String> locale_string;\n+    if (tag->IsJSLocale() &&\n+        Handle<JSLocale>::cast(tag)->locale()->IsString()) {\n+      locale_string = Handle<String>(Handle<JSLocale>::cast(tag)->locale());\n+    } else {\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, locale_string,\n+                                         Object::ToString(isolate, tag));\n+    }\n+\n+    Handle<JSReceiver> options_object;\n+    if (options->IsNullOrUndefined(isolate)) {\n+      // Make empty options bag.\n+      options_object = isolate->factory()->NewJSObjectWithNullProto();\n+    } else {\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, options_object,\n+                                         Object::ToObject(isolate, options));\n+    }\n+\n+    if (!JSLocale::InitializeLocale(isolate, Handle<JSLocale>::cast(result),\n+                                    locale_string, options_object)) {\n+      THROW_NEW_ERROR_RETURN_FAILURE(\n+          isolate, NewTypeError(MessageTemplate::kLocaleBadParameters));\n+    }\n+\n+    return *result;\n+  }\n+}\n+\n+// Locale getters.\n+BUILTIN(LocalePrototypeLanguage) {\n+  HandleScope scope(isolate);\n+  // CHECK_RECEIVER will case locale_holder to JSLocale.\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.language\");\n+\n+  return locale_holder->language();\n+}\n+\n+BUILTIN(LocalePrototypeScript) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.script\");\n+\n+  return locale_holder->script();\n+}\n+\n+BUILTIN(LocalePrototypeRegion) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.region\");\n+\n+  return locale_holder->region();\n+}\n+\n+BUILTIN(LocalePrototypeBaseName) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.baseName\");\n+\n+  return locale_holder->base_name();\n+}\n+\n+BUILTIN(LocalePrototypeCalendar) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.calendar\");\n+\n+  return locale_holder->calendar();\n+}\n+\n+BUILTIN(LocalePrototypeCaseFirst) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.caseFirst\");\n+\n+  return locale_holder->case_first();\n+}\n+\n+BUILTIN(LocalePrototypeCollation) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.collation\");\n+\n+  return locale_holder->collation();\n+}\n+\n+BUILTIN(LocalePrototypeHourCycle) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.hourCycle\");\n+\n+  return locale_holder->hour_cycle();\n+}\n+\n+BUILTIN(LocalePrototypeNumeric) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.numeric\");\n+\n+  return locale_holder->numeric();\n+}\n+\n+BUILTIN(LocalePrototypeNumberingSystem) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder,\n+                 \"Intl.Locale.prototype.numberingSystem\");\n+\n+  return locale_holder->numbering_system();\n+}\n+\n+BUILTIN(LocalePrototypeToString) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.toString\");\n+\n+  return locale_holder->locale();\n+}\n+\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "ca59db0972247286152f33146a51da05ec8f6159",
            "filename": "deps/v8/src/builtins/builtins-math-gen.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 20,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-math-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-math-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-math-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -35,18 +35,22 @@ TF_BUILTIN(MathAbs, CodeStubAssembler) {\n \n     BIND(&if_xissmi);\n     {\n-      Label if_overflow(this, Label::kDeferred), if_notoverflow(this);\n-      Node* pair = nullptr;\n+      Label if_overflow(this, Label::kDeferred);\n \n       // check if support abs function\n       if (IsIntPtrAbsWithOverflowSupported()) {\n-        pair = IntPtrAbsWithOverflow(x);\n+        Node* pair = IntPtrAbsWithOverflow(x);\n         Node* overflow = Projection(1, pair);\n-        Branch(overflow, &if_overflow, &if_notoverflow);\n+        GotoIf(overflow, &if_overflow);\n+\n+        // There is a Smi representation for negated {x}.\n+        Node* result = Projection(0, pair);\n+        Return(BitcastWordToTagged(result));\n+\n       } else {\n         // Check if {x} is already positive.\n         Label if_xispositive(this), if_xisnotpositive(this);\n-        BranchIfSmiLessThanOrEqual(SmiConstant(0), x, &if_xispositive,\n+        BranchIfSmiLessThanOrEqual(SmiConstant(0), CAST(x), &if_xispositive,\n                                    &if_xisnotpositive);\n \n         BIND(&if_xispositive);\n@@ -58,20 +62,11 @@ TF_BUILTIN(MathAbs, CodeStubAssembler) {\n         BIND(&if_xisnotpositive);\n         {\n           // Try to negate the {x} value.\n-          pair =\n-              IntPtrSubWithOverflow(IntPtrConstant(0), BitcastTaggedToWord(x));\n-          Node* overflow = Projection(1, pair);\n-          Branch(overflow, &if_overflow, &if_notoverflow);\n+          TNode<Smi> result = TrySmiSub(SmiConstant(0), CAST(x), &if_overflow);\n+          Return(result);\n         }\n       }\n \n-      BIND(&if_notoverflow);\n-      {\n-        // There is a Smi representation for negated {x}.\n-        Node* result = Projection(0, pair);\n-        Return(BitcastWordToTagged(result));\n-      }\n-\n       BIND(&if_overflow);\n       { Return(NumberConstant(0.0 - Smi::kMinValue)); }\n     }\n@@ -409,21 +404,21 @@ TF_BUILTIN(MathRandom, CodeStubAssembler) {\n   Node* native_context = LoadNativeContext(context);\n \n   // Load cache index.\n-  VARIABLE(smi_index, MachineRepresentation::kTagged);\n-  smi_index.Bind(\n+  TVARIABLE(Smi, smi_index);\n+  smi_index = CAST(\n       LoadContextElement(native_context, Context::MATH_RANDOM_INDEX_INDEX));\n \n   // Cached random numbers are exhausted if index is 0. Go to slow path.\n   Label if_cached(this);\n   GotoIf(SmiAbove(smi_index.value(), SmiConstant(0)), &if_cached);\n \n   // Cache exhausted, populate the cache. Return value is the new index.\n-  smi_index.Bind(CallRuntime(Runtime::kGenerateRandomNumbers, context));\n+  smi_index = CAST(CallRuntime(Runtime::kGenerateRandomNumbers, context));\n   Goto(&if_cached);\n \n   // Compute next index by decrement.\n   BIND(&if_cached);\n-  Node* new_smi_index = SmiSub(smi_index.value(), SmiConstant(1));\n+  TNode<Smi> new_smi_index = SmiSub(smi_index.value(), SmiConstant(1));\n   StoreContextElement(native_context, Context::MATH_RANDOM_INDEX_INDEX,\n                       new_smi_index);\n "
        },
        {
            "sha": "360ddd1091c374bbdc1a229010b9b00ec195c17d",
            "filename": "deps/v8/src/builtins/builtins-number-gen.cc",
            "status": "modified",
            "additions": 20,
            "deletions": 21,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -280,7 +280,7 @@ TF_BUILTIN(NumberParseFloat, CodeStubAssembler) {\n }\n \n // ES6 #sec-number.parseint\n-TF_BUILTIN(NumberParseInt, CodeStubAssembler) {\n+TF_BUILTIN(ParseInt, CodeStubAssembler) {\n   Node* context = Parameter(Descriptor::kContext);\n   Node* input = Parameter(Descriptor::kString);\n   Node* radix = Parameter(Descriptor::kRadix);\n@@ -357,6 +357,14 @@ TF_BUILTIN(NumberParseInt, CodeStubAssembler) {\n   }\n }\n \n+// ES6 #sec-number.parseint\n+TF_BUILTIN(NumberParseInt, CodeStubAssembler) {\n+  Node* context = Parameter(Descriptor::kContext);\n+  Node* input = Parameter(Descriptor::kString);\n+  Node* radix = Parameter(Descriptor::kRadix);\n+  Return(CallBuiltin(Builtins::kParseInt, context, input, radix));\n+}\n+\n // ES6 #sec-number.prototype.valueof\n TF_BUILTIN(NumberPrototypeValueOf, CodeStubAssembler) {\n   Node* context = Parameter(Descriptor::kContext);\n@@ -436,13 +444,9 @@ TF_BUILTIN(Add, AddStubAssembler) {\n \n       BIND(&if_right_smi);\n       {\n-        // Try fast Smi addition first, bail out if it overflows.\n-        Node* pair = IntPtrAddWithOverflow(BitcastTaggedToWord(left),\n-                                           BitcastTaggedToWord(right));\n-        Node* overflow = Projection(1, pair);\n         Label if_overflow(this);\n-        GotoIf(overflow, &if_overflow);\n-        Return(BitcastWordToTaggedSigned(Projection(0, pair)));\n+        TNode<Smi> result = TrySmiAdd(CAST(left), CAST(right), &if_overflow);\n+        Return(result);\n \n         BIND(&if_overflow);\n         {\n@@ -731,22 +735,17 @@ TF_BUILTIN(Subtract, NumberBuiltinsAssembler) {\n \n   BIND(&do_smi_sub);\n   {\n-    // Try a fast Smi subtraction first, bail out if it overflows.\n-    Node* pair = IntPtrSubWithOverflow(BitcastTaggedToWord(var_left.value()),\n-                                       BitcastTaggedToWord(var_right.value()));\n-    Node* overflow = Projection(1, pair);\n-    Label if_overflow(this), if_notoverflow(this);\n-    Branch(overflow, &if_overflow, &if_notoverflow);\n+    Label if_overflow(this);\n+    TNode<Smi> result = TrySmiSub(CAST(var_left.value()),\n+                                  CAST(var_right.value()), &if_overflow);\n+    Return(result);\n \n     BIND(&if_overflow);\n     {\n       var_left_double.Bind(SmiToFloat64(var_left.value()));\n       var_right_double.Bind(SmiToFloat64(var_right.value()));\n       Goto(&do_double_sub);\n     }\n-\n-    BIND(&if_notoverflow);\n-    Return(BitcastWordToTaggedSigned(Projection(0, pair)));\n   }\n \n   BIND(&do_double_sub);\n@@ -831,7 +830,7 @@ TF_BUILTIN(Negate, NumberBuiltinsAssembler) {\n                       &do_bigint);\n \n   BIND(&do_smi);\n-  { Return(SmiMul(var_input.value(), SmiConstant(-1))); }\n+  { Return(SmiMul(CAST(var_input.value()), SmiConstant(-1))); }\n \n   BIND(&do_double);\n   {\n@@ -859,7 +858,7 @@ TF_BUILTIN(Multiply, NumberBuiltinsAssembler) {\n \n   BIND(&do_smi_mul);\n   // The result is not necessarily a smi, in case of overflow.\n-  Return(SmiMul(var_left.value(), var_right.value()));\n+  Return(SmiMul(CAST(var_left.value()), CAST(var_right.value())));\n \n   BIND(&do_double_mul);\n   Node* value = Float64Mul(var_left_double.value(), var_right_double.value());\n@@ -887,8 +886,8 @@ TF_BUILTIN(Divide, NumberBuiltinsAssembler) {\n   {\n     // TODO(jkummerow): Consider just always doing a double division.\n     Label bailout(this);\n-    Node* dividend = var_left.value();\n-    Node* divisor = var_right.value();\n+    TNode<Smi> dividend = CAST(var_left.value());\n+    TNode<Smi> divisor = CAST(var_right.value());\n \n     // Do floating point division if {divisor} is zero.\n     GotoIf(SmiEqual(divisor, SmiConstant(0)), &bailout);\n@@ -968,7 +967,7 @@ TF_BUILTIN(Modulus, NumberBuiltinsAssembler) {\n                        &var_left_double, &var_right_double, &do_bigint_mod);\n \n   BIND(&do_smi_mod);\n-  Return(SmiMod(var_left.value(), var_right.value()));\n+  Return(SmiMod(CAST(var_left.value()), CAST(var_right.value())));\n \n   BIND(&do_double_mod);\n   Node* value = Float64Mod(var_left_double.value(), var_right_double.value());"
        },
        {
            "sha": "6d397952d2b2dbb167ad6849e9631b9faeb49b5a",
            "filename": "deps/v8/src/builtins/builtins-object-gen.cc",
            "status": "modified",
            "additions": 306,
            "deletions": 16,
            "changes": 322,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -6,6 +6,8 @@\n #include \"src/builtins/builtins.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/heap/factory-inl.h\"\n+#include \"src/ic/accessor-assembler.h\"\n+#include \"src/ic/keyed-store-generic.h\"\n #include \"src/objects/property-descriptor-object.h\"\n #include \"src/objects/shared-function-info.h\"\n \n@@ -26,8 +28,10 @@ class ObjectBuiltinsAssembler : public CodeStubAssembler {\n \n  protected:\n   void ReturnToStringFormat(Node* context, Node* string);\n-  void AddToDictionaryIf(Node* condition, Node* name_dictionary,\n-                         Handle<Name> name, Node* value, Label* bailout);\n+  void AddToDictionaryIf(TNode<BoolT> condition,\n+                         TNode<NameDictionary> name_dictionary,\n+                         Handle<Name> name, TNode<Object> value,\n+                         Label* bailout);\n   Node* FromPropertyDescriptor(Node* context, Node* desc);\n   Node* FromPropertyDetails(Node* context, Node* raw_value, Node* details,\n                             Label* if_bailout);\n@@ -38,6 +42,16 @@ class ObjectBuiltinsAssembler : public CodeStubAssembler {\n   Node* GetAccessorOrUndefined(Node* accessor, Label* if_bailout);\n \n   Node* IsSpecialReceiverMap(SloppyTNode<Map> map);\n+\n+  TNode<Word32T> IsStringWrapperElementsKind(TNode<Map> map);\n+\n+  // Checks that |map| has only simple properties, returns bitfield3.\n+  TNode<Uint32T> EnsureOnlyHasSimpleProperties(TNode<Map> map,\n+                                               TNode<Int32T> instance_type,\n+                                               Label* bailout);\n+\n+  void ObjectAssignFast(TNode<Context> context, TNode<JSReceiver> to,\n+                        TNode<Object> from, Label* slow);\n };\n \n class ObjectEntriesValuesBuiltinsAssembler : public ObjectBuiltinsAssembler {\n@@ -49,8 +63,6 @@ class ObjectEntriesValuesBuiltinsAssembler : public ObjectBuiltinsAssembler {\n  protected:\n   enum CollectType { kEntries, kValues };\n \n-  TNode<Word32T> IsStringWrapperElementsKind(TNode<Map> map);\n-\n   TNode<BoolT> IsPropertyEnumerable(TNode<Uint32T> details);\n \n   TNode<BoolT> IsPropertyKindAccessor(TNode<Uint32T> kind);\n@@ -153,8 +165,7 @@ Node* ObjectBuiltinsAssembler::IsSpecialReceiverMap(SloppyTNode<Map> map) {\n   return is_special;\n }\n \n-TNode<Word32T>\n-ObjectEntriesValuesBuiltinsAssembler::IsStringWrapperElementsKind(\n+TNode<Word32T> ObjectBuiltinsAssembler::IsStringWrapperElementsKind(\n     TNode<Map> map) {\n   Node* kind = LoadMapElementsKind(map);\n   return Word32Or(\n@@ -419,7 +430,7 @@ TF_BUILTIN(ObjectPrototypeHasOwnProperty, ObjectBuiltinsAssembler) {\n   BIND(&if_objectisnotsmi);\n \n   Node* map = LoadMap(object);\n-  Node* instance_type = LoadMapInstanceType(map);\n+  TNode<Int32T> instance_type = LoadMapInstanceType(map);\n \n   {\n     VARIABLE(var_index, MachineType::PointerRepresentation());\n@@ -473,6 +484,220 @@ TF_BUILTIN(ObjectPrototypeHasOwnProperty, ObjectBuiltinsAssembler) {\n   Return(CallRuntime(Runtime::kObjectHasOwnProperty, context, object, key));\n }\n \n+// ES #sec-object.assign\n+TF_BUILTIN(ObjectAssign, ObjectBuiltinsAssembler) {\n+  TNode<IntPtrT> argc =\n+      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n+  CodeStubArguments args(this, argc);\n+\n+  TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n+  TNode<Object> target = args.GetOptionalArgumentValue(0);\n+\n+  // 1. Let to be ? ToObject(target).\n+  TNode<JSReceiver> to = ToObject(context, target);\n+\n+  Label done(this);\n+  // 2. If only one argument was passed, return to.\n+  GotoIf(UintPtrLessThanOrEqual(argc, IntPtrConstant(1)), &done);\n+\n+  // 3. Let sources be the List of argument values starting with the\n+  //    second argument.\n+  // 4. For each element nextSource of sources, in ascending index order,\n+  args.ForEach(\n+      [=](Node* next_source_) {\n+        TNode<Object> next_source = CAST(next_source_);\n+        Label slow(this), cont(this);\n+        ObjectAssignFast(context, to, next_source, &slow);\n+        Goto(&cont);\n+\n+        BIND(&slow);\n+        {\n+          CallRuntime(Runtime::kSetDataProperties, context, to, next_source);\n+          Goto(&cont);\n+        }\n+        BIND(&cont);\n+      },\n+      IntPtrConstant(1));\n+  Goto(&done);\n+\n+  // 5. Return to.\n+  BIND(&done);\n+  args.PopAndReturn(to);\n+}\n+\n+TNode<Uint32T> ObjectBuiltinsAssembler::EnsureOnlyHasSimpleProperties(\n+    TNode<Map> map, TNode<Int32T> instance_type, Label* bailout) {\n+  GotoIf(IsCustomElementsReceiverInstanceType(instance_type), bailout);\n+\n+  TNode<Uint32T> bit_field3 = LoadMapBitField3(map);\n+  GotoIf(IsSetWord32(bit_field3, Map::IsDictionaryMapBit::kMask |\n+                                     Map::HasHiddenPrototypeBit::kMask),\n+         bailout);\n+\n+  return bit_field3;\n+}\n+\n+// This function mimics what FastAssign() function does for C++ implementation.\n+void ObjectBuiltinsAssembler::ObjectAssignFast(TNode<Context> context,\n+                                               TNode<JSReceiver> to,\n+                                               TNode<Object> from,\n+                                               Label* slow) {\n+  Label done(this);\n+\n+  // Non-empty strings are the only non-JSReceivers that need to be handled\n+  // explicitly by Object.assign.\n+  GotoIf(TaggedIsSmi(from), &done);\n+  TNode<Map> from_map = LoadMap(CAST(from));\n+  TNode<Int32T> from_instance_type = LoadMapInstanceType(from_map);\n+  {\n+    Label cont(this);\n+    GotoIf(IsJSReceiverInstanceType(from_instance_type), &cont);\n+    GotoIfNot(IsStringInstanceType(from_instance_type), &done);\n+    {\n+      Branch(SmiEqual(LoadStringLengthAsSmi(CAST(from)), SmiConstant(0)), &done,\n+             slow);\n+    }\n+    BIND(&cont);\n+  }\n+\n+  // If the target is deprecated, the object will be updated on first store. If\n+  // the source for that store equals the target, this will invalidate the\n+  // cached representation of the source. Handle this case in runtime.\n+  TNode<Map> to_map = LoadMap(to);\n+  GotoIf(IsDeprecatedMap(to_map), slow);\n+  TNode<BoolT> to_is_simple_receiver = IsSimpleObjectMap(to_map);\n+\n+  GotoIfNot(IsJSObjectInstanceType(from_instance_type), slow);\n+  TNode<Uint32T> from_bit_field3 =\n+      EnsureOnlyHasSimpleProperties(from_map, from_instance_type, slow);\n+\n+  GotoIfNot(IsEmptyFixedArray(LoadElements(CAST(from))), slow);\n+\n+  TNode<DescriptorArray> from_descriptors = LoadMapDescriptors(from_map);\n+  TNode<Uint32T> nof_descriptors =\n+      DecodeWord32<Map::NumberOfOwnDescriptorsBits>(from_bit_field3);\n+\n+  TVARIABLE(BoolT, var_stable, Int32TrueConstant());\n+  VariableList list({&var_stable}, zone());\n+\n+  DescriptorArrayForEach(\n+      list, Unsigned(Int32Constant(0)), nof_descriptors,\n+      [=, &var_stable](TNode<UintPtrT> descriptor_key_index) {\n+        TNode<Name> next_key =\n+            CAST(LoadFixedArrayElement(from_descriptors, descriptor_key_index));\n+\n+        TVARIABLE(Object, var_value, SmiConstant(0));\n+        Label do_store(this), next_iteration(this);\n+\n+        {\n+          TVARIABLE(Map, var_from_map);\n+          TVARIABLE(HeapObject, var_meta_storage);\n+          TVARIABLE(IntPtrT, var_entry);\n+          TVARIABLE(Uint32T, var_details);\n+          Label if_found(this);\n+\n+          Label if_found_fast(this), if_found_dict(this);\n+\n+          Label if_stable(this), if_not_stable(this);\n+          Branch(var_stable.value(), &if_stable, &if_not_stable);\n+          BIND(&if_stable);\n+          {\n+            // Directly decode from the descriptor array if |from| did not\n+            // change shape.\n+            var_from_map = from_map;\n+            var_meta_storage = from_descriptors;\n+            var_entry = Signed(descriptor_key_index);\n+            Goto(&if_found_fast);\n+          }\n+          BIND(&if_not_stable);\n+          {\n+            // If the map did change, do a slower lookup. We are still\n+            // guaranteed that the object has a simple shape, and that the key\n+            // is a name.\n+            var_from_map = LoadMap(CAST(from));\n+            TryLookupPropertyInSimpleObject(\n+                CAST(from), var_from_map.value(), next_key, &if_found_fast,\n+                &if_found_dict, &var_meta_storage, &var_entry, &next_iteration);\n+          }\n+\n+          BIND(&if_found_fast);\n+          {\n+            Node* descriptors = var_meta_storage.value();\n+            Node* name_index = var_entry.value();\n+\n+            // Skip non-enumerable properties.\n+            var_details =\n+                LoadDetailsByKeyIndex<DescriptorArray>(descriptors, name_index);\n+            GotoIf(IsSetWord32(var_details.value(),\n+                               PropertyDetails::kAttributesDontEnumMask),\n+                   &next_iteration);\n+\n+            LoadPropertyFromFastObject(from, var_from_map.value(), descriptors,\n+                                       name_index, var_details.value(),\n+                                       &var_value);\n+            Goto(&if_found);\n+          }\n+          BIND(&if_found_dict);\n+          {\n+            Node* dictionary = var_meta_storage.value();\n+            Node* entry = var_entry.value();\n+\n+            TNode<Uint32T> details =\n+                LoadDetailsByKeyIndex<NameDictionary>(dictionary, entry);\n+            // Skip non-enumerable properties.\n+            GotoIf(\n+                IsSetWord32(details, PropertyDetails::kAttributesDontEnumMask),\n+                &next_iteration);\n+\n+            var_details = details;\n+            var_value = LoadValueByKeyIndex<NameDictionary>(dictionary, entry);\n+            Goto(&if_found);\n+          }\n+\n+          // Here we have details and value which could be an accessor.\n+          BIND(&if_found);\n+          {\n+            Label slow_load(this, Label::kDeferred);\n+\n+            var_value =\n+                CallGetterIfAccessor(var_value.value(), var_details.value(),\n+                                     context, from, &slow_load, kCallJSGetter);\n+            Goto(&do_store);\n+\n+            BIND(&slow_load);\n+            {\n+              var_value =\n+                  CallRuntime(Runtime::kGetProperty, context, from, next_key);\n+              Goto(&do_store);\n+            }\n+          }\n+        }\n+\n+        // Store property to target object.\n+        BIND(&do_store);\n+        {\n+          KeyedStoreGenericGenerator::SetProperty(\n+              state(), context, to, to_is_simple_receiver, next_key,\n+              var_value.value(), LanguageMode::kStrict);\n+\n+          // Check if the |from| object is still stable, i.e. we can proceed\n+          // using property details from preloaded |from_descriptors|.\n+          var_stable = Select<BoolT>(\n+              var_stable.value(),\n+              [=] { return WordEqual(LoadMap(CAST(from)), from_map); },\n+              [=] { return Int32FalseConstant(); });\n+\n+          Goto(&next_iteration);\n+        }\n+\n+        BIND(&next_iteration);\n+      });\n+\n+  Goto(&done);\n+\n+  BIND(&done);\n+}\n+\n // ES #sec-object.keys\n TF_BUILTIN(ObjectKeys, ObjectBuiltinsAssembler) {\n   Node* object = Parameter(Descriptor::kObject);\n@@ -903,6 +1128,69 @@ TF_BUILTIN(ObjectPrototypeValueOf, CodeStubAssembler) {\n   Return(ToObject(context, receiver));\n }\n \n+// ES #sec-object.create\n+TF_BUILTIN(CreateObjectWithoutProperties, ObjectBuiltinsAssembler) {\n+  Node* const prototype = Parameter(Descriptor::kPrototypeArg);\n+  Node* const context = Parameter(Descriptor::kContext);\n+  Node* const native_context = LoadNativeContext(context);\n+  Label call_runtime(this, Label::kDeferred), prototype_null(this),\n+      prototype_jsreceiver(this);\n+  {\n+    Comment(\"Argument check: prototype\");\n+    GotoIf(IsNull(prototype), &prototype_null);\n+    BranchIfJSReceiver(prototype, &prototype_jsreceiver, &call_runtime);\n+  }\n+\n+  VARIABLE(map, MachineRepresentation::kTagged);\n+  VARIABLE(properties, MachineRepresentation::kTagged);\n+  Label instantiate_map(this);\n+\n+  BIND(&prototype_null);\n+  {\n+    Comment(\"Prototype is null\");\n+    map.Bind(LoadContextElement(native_context,\n+                                Context::SLOW_OBJECT_WITH_NULL_PROTOTYPE_MAP));\n+    properties.Bind(AllocateNameDictionary(NameDictionary::kInitialCapacity));\n+    Goto(&instantiate_map);\n+  }\n+\n+  BIND(&prototype_jsreceiver);\n+  {\n+    Comment(\"Prototype is JSReceiver\");\n+    properties.Bind(EmptyFixedArrayConstant());\n+    Node* object_function =\n+        LoadContextElement(native_context, Context::OBJECT_FUNCTION_INDEX);\n+    Node* object_function_map = LoadObjectField(\n+        object_function, JSFunction::kPrototypeOrInitialMapOffset);\n+    map.Bind(object_function_map);\n+    GotoIf(WordEqual(prototype, LoadMapPrototype(map.value())),\n+           &instantiate_map);\n+    Comment(\"Try loading the prototype info\");\n+    Node* prototype_info =\n+        LoadMapPrototypeInfo(LoadMap(prototype), &call_runtime);\n+    Node* weak_cell =\n+        LoadObjectField(prototype_info, PrototypeInfo::kObjectCreateMap);\n+    GotoIf(IsUndefined(weak_cell), &call_runtime);\n+    map.Bind(LoadWeakCellValue(weak_cell, &call_runtime));\n+    Goto(&instantiate_map);\n+  }\n+\n+  BIND(&instantiate_map);\n+  {\n+    Comment(\"Instantiate map\");\n+    Node* instance = AllocateJSObjectFromMap(map.value(), properties.value());\n+    Return(instance);\n+  }\n+\n+  BIND(&call_runtime);\n+  {\n+    Comment(\"Call Runtime (prototype is not null/jsreceiver)\");\n+    Node* result = CallRuntime(Runtime::kObjectCreate, context, prototype,\n+                               UndefinedConstant());\n+    Return(result);\n+  }\n+}\n+\n // ES #sec-object.create\n TF_BUILTIN(ObjectCreate, ObjectBuiltinsAssembler) {\n   int const kPrototypeArg = 0;\n@@ -1134,7 +1422,7 @@ TF_BUILTIN(ObjectGetOwnPropertyDescriptor, ObjectBuiltinsAssembler) {\n       call_runtime(this, Label::kDeferred),\n       return_undefined(this, Label::kDeferred), if_notunique_name(this);\n   Node* map = LoadMap(object);\n-  Node* instance_type = LoadMapInstanceType(map);\n+  TNode<Int32T> instance_type = LoadMapInstanceType(map);\n   GotoIf(IsSpecialReceiverInstanceType(instance_type), &call_runtime);\n   {\n     VARIABLE(var_index, MachineType::PointerRepresentation(),\n@@ -1206,10 +1494,9 @@ TF_BUILTIN(ObjectGetOwnPropertyDescriptor, ObjectBuiltinsAssembler) {\n   args.PopAndReturn(UndefinedConstant());\n }\n \n-void ObjectBuiltinsAssembler::AddToDictionaryIf(Node* condition,\n-                                                Node* name_dictionary,\n-                                                Handle<Name> name, Node* value,\n-                                                Label* bailout) {\n+void ObjectBuiltinsAssembler::AddToDictionaryIf(\n+    TNode<BoolT> condition, TNode<NameDictionary> name_dictionary,\n+    Handle<Name> name, TNode<Object> value, Label* bailout) {\n   Label done(this);\n   GotoIfNot(condition, &done);\n \n@@ -1269,13 +1556,14 @@ Node* ObjectBuiltinsAssembler::FromPropertyDescriptor(Node* context,\n         native_context, Context::SLOW_OBJECT_WITH_OBJECT_PROTOTYPE_MAP);\n     // We want to preallocate the slots for value, writable, get, set,\n     // enumerable and configurable - a total of 6\n-    Node* properties = AllocateNameDictionary(6);\n+    TNode<NameDictionary> properties = AllocateNameDictionary(6);\n     Node* js_desc = AllocateJSObjectFromMap(map, properties);\n \n     Label bailout(this, Label::kDeferred);\n \n     Factory* factory = isolate()->factory();\n-    Node* value = LoadObjectField(desc, PropertyDescriptorObject::kValueOffset);\n+    TNode<Object> value =\n+        LoadObjectField(desc, PropertyDescriptorObject::kValueOffset);\n     AddToDictionaryIf(IsNotTheHole(value), properties, factory->value_string(),\n                       value, &bailout);\n     AddToDictionaryIf(\n@@ -1285,10 +1573,12 @@ Node* ObjectBuiltinsAssembler::FromPropertyDescriptor(Node* context,\n             IsSetWord32<PropertyDescriptorObject::IsWritableBit>(flags)),\n         &bailout);\n \n-    Node* get = LoadObjectField(desc, PropertyDescriptorObject::kGetOffset);\n+    TNode<Object> get =\n+        LoadObjectField(desc, PropertyDescriptorObject::kGetOffset);\n     AddToDictionaryIf(IsNotTheHole(get), properties, factory->get_string(), get,\n                       &bailout);\n-    Node* set = LoadObjectField(desc, PropertyDescriptorObject::kSetOffset);\n+    TNode<Object> set =\n+        LoadObjectField(desc, PropertyDescriptorObject::kSetOffset);\n     AddToDictionaryIf(IsNotTheHole(set), properties, factory->set_string(), set,\n                       &bailout);\n "
        },
        {
            "sha": "2df04d6bcaf5a473c73d6d515cc282a89141676b",
            "filename": "deps/v8/src/builtins/builtins-object.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 23,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -18,29 +18,6 @@ namespace internal {\n // -----------------------------------------------------------------------------\n // ES6 section 19.1 Object Objects\n \n-// ES6 19.1.2.1 Object.assign\n-BUILTIN(ObjectAssign) {\n-  HandleScope scope(isolate);\n-  Handle<Object> target = args.atOrUndefined(isolate, 1);\n-\n-  // 1. Let to be ? ToObject(target).\n-  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, target,\n-                                     Object::ToObject(isolate, target));\n-  Handle<JSReceiver> to = Handle<JSReceiver>::cast(target);\n-  // 2. If only one argument was passed, return to.\n-  if (args.length() == 2) return *to;\n-  // 3. Let sources be the List of argument values starting with the\n-  //    second argument.\n-  // 4. For each element nextSource of sources, in ascending index order,\n-  for (int i = 2; i < args.length(); ++i) {\n-    Handle<Object> next_source = args.at(i);\n-    MAYBE_RETURN(JSReceiver::SetOrCopyDataProperties(isolate, to, next_source),\n-                 isolate->heap()->exception());\n-  }\n-  // 5. Return to.\n-  return *to;\n-}\n-\n // ES6 section 19.1.3.4 Object.prototype.propertyIsEnumerable ( V )\n BUILTIN(ObjectPrototypePropertyIsEnumerable) {\n   HandleScope scope(isolate);"
        },
        {
            "sha": "6dcf9f53722e3bedb17a6fbd93cfa6f92320174d",
            "filename": "deps/v8/src/builtins/builtins-promise-gen.cc",
            "status": "modified",
            "additions": 29,
            "deletions": 48,
            "changes": 77,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -221,8 +221,7 @@ Node* PromiseBuiltinsAssembler::CreatePromiseAllResolveElementContext(\n }\n \n Node* PromiseBuiltinsAssembler::CreatePromiseAllResolveElementFunction(\n-    Node* context, Node* index, Node* native_context) {\n-  CSA_ASSERT(this, TaggedIsSmi(index));\n+    Node* context, TNode<Smi> index, Node* native_context) {\n   CSA_ASSERT(this, SmiGreaterThan(index, SmiConstant(0)));\n   CSA_ASSERT(this, SmiLessThanOrEqual(\n                        index, SmiConstant(PropertyArray::HashField::kMax)));\n@@ -247,8 +246,6 @@ Node* PromiseBuiltinsAssembler::CreatePromiseResolvingFunctionsContext(\n   Node* const context =\n       CreatePromiseContext(native_context, kPromiseContextLength);\n   StoreContextElementNoWriteBarrier(context, kPromiseSlot, promise);\n-  StoreContextElementNoWriteBarrier(context, kAlreadyResolvedSlot,\n-                                    FalseConstant());\n   StoreContextElementNoWriteBarrier(context, kDebugEventSlot, debug_event);\n   return context;\n }\n@@ -268,8 +265,9 @@ Node* PromiseBuiltinsAssembler::PromiseHasHandler(Node* promise) {\n }\n \n void PromiseBuiltinsAssembler::PromiseSetHasHandler(Node* promise) {\n-  Node* const flags = LoadObjectField(promise, JSPromise::kFlagsOffset);\n-  Node* const new_flags =\n+  TNode<Smi> const flags =\n+      CAST(LoadObjectField(promise, JSPromise::kFlagsOffset));\n+  TNode<Smi> const new_flags =\n       SmiOr(flags, SmiConstant(1 << JSPromise::kHasHandlerBit));\n   StoreObjectFieldNoWriteBarrier(promise, JSPromise::kFlagsOffset, new_flags);\n }\n@@ -281,7 +279,8 @@ Node* PromiseBuiltinsAssembler::IsPromiseStatus(\n \n Node* PromiseBuiltinsAssembler::PromiseStatus(Node* promise) {\n   STATIC_ASSERT(JSPromise::kStatusShift == 0);\n-  Node* const flags = LoadObjectField(promise, JSPromise::kFlagsOffset);\n+  TNode<Smi> const flags =\n+      CAST(LoadObjectField(promise, JSPromise::kFlagsOffset));\n   return Word32And(SmiToInt32(flags), Int32Constant(JSPromise::kStatusMask));\n }\n \n@@ -291,15 +290,17 @@ void PromiseBuiltinsAssembler::PromiseSetStatus(\n              IsPromiseStatus(PromiseStatus(promise), v8::Promise::kPending));\n   CHECK_NE(status, v8::Promise::kPending);\n \n-  Node* mask = SmiConstant(status);\n-  Node* const flags = LoadObjectField(promise, JSPromise::kFlagsOffset);\n+  TNode<Smi> mask = SmiConstant(status);\n+  TNode<Smi> const flags =\n+      CAST(LoadObjectField(promise, JSPromise::kFlagsOffset));\n   StoreObjectFieldNoWriteBarrier(promise, JSPromise::kFlagsOffset,\n                                  SmiOr(flags, mask));\n }\n \n void PromiseBuiltinsAssembler::PromiseSetHandledHint(Node* promise) {\n-  Node* const flags = LoadObjectField(promise, JSPromise::kFlagsOffset);\n-  Node* const new_flags =\n+  TNode<Smi> const flags =\n+      CAST(LoadObjectField(promise, JSPromise::kFlagsOffset));\n+  TNode<Smi> const new_flags =\n       SmiOr(flags, SmiConstant(1 << JSPromise::kHandledHintBit));\n   StoreObjectFieldNoWriteBarrier(promise, JSPromise::kFlagsOffset, new_flags);\n }\n@@ -735,27 +736,17 @@ TF_BUILTIN(PromiseCapabilityDefaultReject, PromiseBuiltinsAssembler) {\n   Node* const promise = LoadContextElement(context, kPromiseSlot);\n \n   // 3. Let alreadyResolved be F.[[AlreadyResolved]].\n-  Label if_already_resolved(this, Label::kDeferred);\n-  Node* const already_resolved =\n-      LoadContextElement(context, kAlreadyResolvedSlot);\n-\n   // 4. If alreadyResolved.[[Value]] is true, return undefined.\n-  GotoIf(IsTrue(already_resolved), &if_already_resolved);\n+  // We use undefined as a marker for the [[AlreadyResolved]] state.\n+  ReturnIf(IsUndefined(promise), UndefinedConstant());\n \n   // 5. Set alreadyResolved.[[Value]] to true.\n-  StoreContextElementNoWriteBarrier(context, kAlreadyResolvedSlot,\n-                                    TrueConstant());\n+  StoreContextElementNoWriteBarrier(context, kPromiseSlot, UndefinedConstant());\n \n   // 6. Return RejectPromise(promise, reason).\n   Node* const debug_event = LoadContextElement(context, kDebugEventSlot);\n   Return(CallBuiltin(Builtins::kRejectPromise, context, promise, reason,\n                      debug_event));\n-\n-  BIND(&if_already_resolved);\n-  {\n-    Return(CallRuntime(Runtime::kPromiseRejectAfterResolved, context, promise,\n-                       reason));\n-  }\n }\n \n // ES #sec-promise-resolve-functions\n@@ -767,26 +758,16 @@ TF_BUILTIN(PromiseCapabilityDefaultResolve, PromiseBuiltinsAssembler) {\n   Node* const promise = LoadContextElement(context, kPromiseSlot);\n \n   // 3. Let alreadyResolved be F.[[AlreadyResolved]].\n-  Label if_already_resolved(this, Label::kDeferred);\n-  Node* const already_resolved =\n-      LoadContextElement(context, kAlreadyResolvedSlot);\n-\n   // 4. If alreadyResolved.[[Value]] is true, return undefined.\n-  GotoIf(IsTrue(already_resolved), &if_already_resolved);\n+  // We use undefined as a marker for the [[AlreadyResolved]] state.\n+  ReturnIf(IsUndefined(promise), UndefinedConstant());\n \n   // 5. Set alreadyResolved.[[Value]] to true.\n-  StoreContextElementNoWriteBarrier(context, kAlreadyResolvedSlot,\n-                                    TrueConstant());\n+  StoreContextElementNoWriteBarrier(context, kPromiseSlot, UndefinedConstant());\n \n   // The rest of the logic (and the catch prediction) is\n   // encapsulated in the dedicated ResolvePromise builtin.\n   Return(CallBuiltin(Builtins::kResolvePromise, context, promise, resolution));\n-\n-  BIND(&if_already_resolved);\n-  {\n-    Return(CallRuntime(Runtime::kPromiseResolveAfterResolved, context, promise,\n-                       resolution));\n-  }\n }\n \n TF_BUILTIN(PromiseConstructorLazyDeoptContinuation, PromiseBuiltinsAssembler) {\n@@ -1823,7 +1804,7 @@ Node* PromiseBuiltinsAssembler::PerformPromiseAll(\n   Node* const resolve_element_context =\n       CreatePromiseAllResolveElementContext(capability, native_context);\n \n-  VARIABLE(var_index, MachineRepresentation::kTagged, SmiConstant(1));\n+  TVARIABLE(Smi, var_index, SmiConstant(1));\n   Label loop(this, &var_index), done_loop(this),\n       too_many_elements(this, Label::kDeferred),\n       close_iterator(this, Label::kDeferred);\n@@ -1853,14 +1834,14 @@ Node* PromiseBuiltinsAssembler::PerformPromiseAll(\n                       var_exception);\n \n     // Check if we reached the limit.\n-    Node* const index = var_index.value();\n+    TNode<Smi> const index = var_index.value();\n     GotoIf(SmiEqual(index, SmiConstant(PropertyArray::HashField::kMax)),\n            &too_many_elements);\n \n     // Set remainingElementsCount.[[Value]] to\n     //     remainingElementsCount.[[Value]] + 1.\n-    Node* const remaining_elements_count = LoadContextElement(\n-        resolve_element_context, kPromiseAllResolveElementRemainingSlot);\n+    TNode<Smi> const remaining_elements_count = CAST(LoadContextElement(\n+        resolve_element_context, kPromiseAllResolveElementRemainingSlot));\n     StoreContextElementNoWriteBarrier(\n         resolve_element_context, kPromiseAllResolveElementRemainingSlot,\n         SmiAdd(remaining_elements_count, SmiConstant(1)));\n@@ -1899,7 +1880,7 @@ Node* PromiseBuiltinsAssembler::PerformPromiseAll(\n     });\n \n     // Set index to index + 1.\n-    var_index.Bind(SmiAdd(index, SmiConstant(1)));\n+    var_index = SmiAdd(index, SmiConstant(1));\n     Goto(&loop);\n   }\n \n@@ -1933,8 +1914,8 @@ Node* PromiseBuiltinsAssembler::PerformPromiseAll(\n     // Set iteratorRecord.[[Done]] to true.\n     // Set remainingElementsCount.[[Value]] to\n     //    remainingElementsCount.[[Value]] - 1.\n-    Node* remaining_elements_count = LoadContextElement(\n-        resolve_element_context, kPromiseAllResolveElementRemainingSlot);\n+    TNode<Smi> remaining_elements_count = CAST(LoadContextElement(\n+        resolve_element_context, kPromiseAllResolveElementRemainingSlot));\n     remaining_elements_count = SmiSub(remaining_elements_count, SmiConstant(1));\n     StoreContextElementNoWriteBarrier(resolve_element_context,\n                                       kPromiseAllResolveElementRemainingSlot,\n@@ -1949,8 +1930,8 @@ Node* PromiseBuiltinsAssembler::PerformPromiseAll(\n     Node* const values_array = LoadContextElement(\n         resolve_element_context, kPromiseAllResolveElementValuesArraySlot);\n     Node* const old_elements = LoadElements(values_array);\n-    Node* const old_capacity = LoadFixedArrayBaseLength(old_elements);\n-    Node* const new_capacity = var_index.value();\n+    TNode<Smi> const old_capacity = LoadFixedArrayBaseLength(old_elements);\n+    TNode<Smi> const new_capacity = var_index.value();\n     GotoIf(SmiGreaterThanOrEqual(old_capacity, new_capacity), &return_promise);\n     Node* const new_elements =\n         AllocateFixedArray(PACKED_ELEMENTS, new_capacity, SMI_PARAMETERS,\n@@ -2127,8 +2108,8 @@ TF_BUILTIN(PromiseAllResolveElementClosure, PromiseBuiltinsAssembler) {\n   }\n \n   BIND(&done);\n-  Node* remaining_elements_count =\n-      LoadContextElement(context, kPromiseAllResolveElementRemainingSlot);\n+  TNode<Smi> remaining_elements_count =\n+      CAST(LoadContextElement(context, kPromiseAllResolveElementRemainingSlot));\n   remaining_elements_count = SmiSub(remaining_elements_count, SmiConstant(1));\n   StoreContextElement(context, kPromiseAllResolveElementRemainingSlot,\n                       remaining_elements_count);"
        },
        {
            "sha": "46fb9338b4a0d4e651074193d45bbe113700fd6f",
            "filename": "deps/v8/src/builtins/builtins-promise-gen.h",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -17,12 +17,11 @@ typedef compiler::CodeAssemblerState CodeAssemblerState;\n class PromiseBuiltinsAssembler : public CodeStubAssembler {\n  public:\n   enum PromiseResolvingFunctionContextSlot {\n-    // The promise which resolve/reject callbacks fulfill.\n+    // The promise which resolve/reject callbacks fulfill. If this is\n+    // undefined, then we've already visited this callback and it\n+    // should be a no-op.\n     kPromiseSlot = Context::MIN_CONTEXT_SLOTS,\n \n-    // Whether the callback was already invoked.\n-    kAlreadyResolvedSlot,\n-\n     // Whether to trigger a debug event or not. Used in catch\n     // prediction.\n     kDebugEventSlot,\n@@ -114,7 +113,7 @@ class PromiseBuiltinsAssembler : public CodeStubAssembler {\n   // case to mark it's done).\n   Node* CreatePromiseAllResolveElementContext(Node* promise_capability,\n                                               Node* native_context);\n-  Node* CreatePromiseAllResolveElementFunction(Node* context, Node* index,\n+  Node* CreatePromiseAllResolveElementFunction(Node* context, TNode<Smi> index,\n                                                Node* native_context);\n \n   Node* CreatePromiseResolvingFunctionsContext(Node* promise, Node* debug_event,"
        },
        {
            "sha": "680d1c8d9fdd572f4a7663cb1154c73d8f516d01",
            "filename": "deps/v8/src/builtins/builtins-proxy-gen.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 6,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -17,7 +17,7 @@ void ProxiesCodeStubAssembler::GotoIfRevokedProxy(Node* object,\n                                                   Label* if_proxy_revoked) {\n   Label proxy_not_revoked(this);\n   GotoIfNot(IsJSProxy(object), &proxy_not_revoked);\n-  Branch(IsJSReceiver(LoadObjectField(object, JSProxy::kHandlerOffset)),\n+  Branch(IsJSReceiver(CAST(LoadObjectField(object, JSProxy::kHandlerOffset))),\n          &proxy_not_revoked, if_proxy_revoked);\n   BIND(&proxy_not_revoked);\n }\n@@ -408,6 +408,8 @@ TF_BUILTIN(ProxyHasProperty, ProxiesCodeStubAssembler) {\n \n   CSA_ASSERT(this, IsJSProxy(proxy));\n \n+  PerformStackCheck(context);\n+\n   // 1. Assert: IsPropertyKey(P) is true.\n   CSA_ASSERT(this, IsName(name));\n   CSA_ASSERT(this, Word32Equal(IsPrivateSymbol(name), Int32Constant(0)));\n@@ -542,7 +544,7 @@ TF_BUILTIN(ProxySetProperty, ProxiesCodeStubAssembler) {\n   Node* name = Parameter(Descriptor::kName);\n   Node* value = Parameter(Descriptor::kValue);\n   Node* receiver = Parameter(Descriptor::kReceiverValue);\n-  Node* language_mode = Parameter(Descriptor::kLanguageMode);\n+  TNode<Smi> language_mode = CAST(Parameter(Descriptor::kLanguageMode));\n \n   CSA_ASSERT(this, IsJSProxy(proxy));\n \n@@ -714,14 +716,23 @@ void ProxiesCodeStubAssembler::CheckGetSetTrapResult(\n \n     BIND(&throw_non_configurable_data);\n     {\n-      ThrowTypeError(context, MessageTemplate::kProxyGetNonConfigurableData,\n-                     name, var_value.value(), trap_result);\n+      if (access_kind == JSProxy::kGet) {\n+        ThrowTypeError(context, MessageTemplate::kProxyGetNonConfigurableData,\n+                       name, var_value.value(), trap_result);\n+      } else {\n+        ThrowTypeError(context, MessageTemplate::kProxySetFrozenData, name);\n+      }\n     }\n \n     BIND(&throw_non_configurable_accessor);\n     {\n-      ThrowTypeError(context, MessageTemplate::kProxyGetNonConfigurableAccessor,\n-                     name, trap_result);\n+      if (access_kind == JSProxy::kGet) {\n+        ThrowTypeError(context,\n+                       MessageTemplate::kProxyGetNonConfigurableAccessor, name,\n+                       trap_result);\n+      } else {\n+        ThrowTypeError(context, MessageTemplate::kProxySetFrozenAccessor, name);\n+      }\n     }\n   }\n }"
        },
        {
            "sha": "5b086e01b5dc8efd04e37af90dca09a9c8e99dac",
            "filename": "deps/v8/src/builtins/builtins-regexp-gen.cc",
            "status": "modified",
            "additions": 191,
            "deletions": 125,
            "changes": 316,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -35,8 +35,9 @@ Node* RegExpBuiltinsAssembler::AllocateRegExpResult(Node* context, Node* length,\n   CSA_ASSERT(this, IsString(input));\n \n #ifdef DEBUG\n-  Node* const max_length = SmiConstant(JSArray::kInitialMaxFastElementArray);\n-  CSA_ASSERT(this, SmiLessThanOrEqual(length, max_length));\n+  TNode<Smi> const max_length =\n+      SmiConstant(JSArray::kInitialMaxFastElementArray);\n+  CSA_ASSERT(this, SmiLessThanOrEqual(CAST(length), max_length));\n #endif  // DEBUG\n \n   // Allocate the JSRegExpResult together with its elements fixed array.\n@@ -169,7 +170,7 @@ Node* RegExpBuiltinsAssembler::ConstructNewResultFromMatchInfo(\n \n   TNode<IntPtrT> num_indices = SmiUntag(CAST(LoadFixedArrayElement(\n       match_info, RegExpMatchInfo::kNumberOfCapturesIndex)));\n-  Node* const num_results = SmiTag(WordShr(num_indices, 1));\n+  TNode<Smi> const num_results = SmiTag(WordShr(num_indices, 1));\n   Node* const start =\n       LoadFixedArrayElement(match_info, RegExpMatchInfo::kFirstCaptureIndex);\n   Node* const end = LoadFixedArrayElement(\n@@ -206,7 +207,8 @@ Node* RegExpBuiltinsAssembler::ConstructNewResultFromMatchInfo(\n   {\n     Node* const from_cursor = var_from_cursor.value();\n     Node* const to_cursor = var_to_cursor.value();\n-    Node* const start = LoadFixedArrayElement(match_info, from_cursor);\n+    TNode<Smi> const start =\n+        CAST(LoadFixedArrayElement(match_info, from_cursor));\n \n     Label next_iter(this);\n     GotoIf(SmiEqual(start, SmiConstant(-1)), &next_iter);\n@@ -238,14 +240,15 @@ Node* RegExpBuiltinsAssembler::ConstructNewResultFromMatchInfo(\n     // not have any named captures to minimize performance impact.\n \n     Node* const data = LoadObjectField(regexp, JSRegExp::kDataOffset);\n-    CSA_ASSERT(this, SmiEqual(LoadFixedArrayElement(data, JSRegExp::kTagIndex),\n-                              SmiConstant(JSRegExp::IRREGEXP)));\n+    CSA_ASSERT(this,\n+               SmiEqual(CAST(LoadFixedArrayElement(data, JSRegExp::kTagIndex)),\n+                        SmiConstant(JSRegExp::IRREGEXP)));\n \n     // The names fixed array associates names at even indices with a capture\n     // index at odd indices.\n-    Node* const names =\n+    TNode<Object> const maybe_names =\n         LoadFixedArrayElement(data, JSRegExp::kIrregexpCaptureNameMapIndex);\n-    GotoIf(SmiEqual(names, SmiConstant(0)), &out);\n+    GotoIf(WordEqual(maybe_names, SmiConstant(0)), &out);\n \n     // Allocate a new object to store the named capture properties.\n     // TODO(jgruber): Could be optimized by adding the object map to the heap\n@@ -262,8 +265,8 @@ Node* RegExpBuiltinsAssembler::ConstructNewResultFromMatchInfo(\n \n     // One or more named captures exist, add a property for each one.\n \n-    CSA_ASSERT(this, HasInstanceType(names, FIXED_ARRAY_TYPE));\n-    Node* const names_length = LoadAndUntagFixedArrayBaseLength(names);\n+    TNode<FixedArray> names = CAST(maybe_names);\n+    TNode<IntPtrT> const names_length = LoadAndUntagFixedArrayBaseLength(names);\n     CSA_ASSERT(this, IntPtrGreaterThan(names_length, IntPtrConstant(0)));\n \n     VARIABLE(var_i, MachineType::PointerRepresentation());\n@@ -403,9 +406,8 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n \n     // Check (number_of_captures + 1) * 2 <= offsets vector size\n     // Or              number_of_captures <= offsets vector size / 2 - 1\n-    Node* const capture_count =\n-        LoadFixedArrayElement(data, JSRegExp::kIrregexpCaptureCountIndex);\n-    CSA_ASSERT(this, TaggedIsSmi(capture_count));\n+    TNode<Smi> const capture_count =\n+        CAST(LoadFixedArrayElement(data, JSRegExp::kIrregexpCaptureCountIndex));\n \n     STATIC_ASSERT(Isolate::kJSRegexpStaticOffsetsVectorSize >= 2);\n     GotoIf(SmiAbove(\n@@ -470,7 +472,7 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n   Node* const code = var_code.value();\n   CSA_ASSERT_BRANCH(this, [=](Label* ok, Label* not_ok) {\n     GotoIfNot(TaggedIsSmi(code), ok);\n-    Branch(SmiEqual(code, SmiConstant(JSRegExp::kUninitializedValue)), ok,\n+    Branch(SmiEqual(CAST(code), SmiConstant(JSRegExp::kUninitializedValue)), ok,\n            not_ok);\n   });\n   GotoIf(TaggedIsSmi(code), &runtime);\n@@ -567,13 +569,13 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n     // Check that the last match info has space for the capture registers and\n     // the additional information. Ensure no overflow in add.\n     STATIC_ASSERT(FixedArray::kMaxLength < kMaxInt - FixedArray::kLengthOffset);\n-    Node* const available_slots =\n+    TNode<Smi> const available_slots =\n         SmiSub(LoadFixedArrayBaseLength(match_info),\n                SmiConstant(RegExpMatchInfo::kLastMatchOverhead));\n-    Node* const capture_count =\n-        LoadFixedArrayElement(data, JSRegExp::kIrregexpCaptureCountIndex);\n+    TNode<Smi> const capture_count =\n+        CAST(LoadFixedArrayElement(data, JSRegExp::kIrregexpCaptureCountIndex));\n     // Calculate number of register_count = (capture_count + 1) * 2.\n-    Node* const register_count =\n+    TNode<Smi> const register_count =\n         SmiShl(SmiAdd(capture_count, SmiConstant(1)), 1);\n     GotoIf(SmiGreaterThan(register_count, available_slots), &runtime);\n \n@@ -624,8 +626,9 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n   {\n // A stack overflow was detected in RegExp code.\n #ifdef DEBUG\n-    Node* const pending_exception_address = ExternalConstant(ExternalReference(\n-        IsolateAddressId::kPendingExceptionAddress, isolate()));\n+    Node* const pending_exception_address =\n+        ExternalConstant(ExternalReference::Create(\n+            IsolateAddressId::kPendingExceptionAddress, isolate()));\n     CSA_ASSERT(this, IsTheHole(Load(MachineType::AnyTagged(),\n                                     pending_exception_address)));\n #endif  // DEBUG\n@@ -726,7 +729,7 @@ Node* RegExpBuiltinsAssembler::RegExpPrototypeExecBodyWithoutResult(\n       Label if_isoob(this, Label::kDeferred);\n       GotoIfNot(TaggedIsSmi(lastindex), &if_isoob);\n       TNode<Smi> const string_length = LoadStringLengthAsSmi(string);\n-      GotoIfNot(SmiLessThanOrEqual(lastindex, string_length), &if_isoob);\n+      GotoIfNot(SmiLessThanOrEqual(CAST(lastindex), string_length), &if_isoob);\n       Goto(&run_exec);\n \n       BIND(&if_isoob);\n@@ -905,7 +908,7 @@ void RegExpBuiltinsAssembler::BranchIfFastRegExp(Node* const context,\n \n   Node* const initial_proto_initial_map =\n       LoadContextElement(native_context, Context::REGEXP_PROTOTYPE_MAP_INDEX);\n-  Node* const proto_map = LoadMap(CAST(LoadMapPrototype(map)));\n+  Node* const proto_map = LoadMap(LoadMapPrototype(map));\n   Node* const proto_has_initialmap =\n       WordEqual(proto_map, initial_proto_initial_map);\n \n@@ -926,19 +929,19 @@ void RegExpBuiltinsAssembler::BranchIfFastRegExp(Node* const context,\n                      if_ismodified);\n }\n \n-Node* RegExpBuiltinsAssembler::IsFastRegExp(Node* const context,\n-                                            Node* const object) {\n+TNode<BoolT> RegExpBuiltinsAssembler::IsFastRegExp(SloppyTNode<Context> context,\n+                                                   SloppyTNode<Object> object) {\n   Label yup(this), nope(this), out(this);\n-  VARIABLE(var_result, MachineRepresentation::kWord32);\n+  TVARIABLE(BoolT, var_result);\n \n   BranchIfFastRegExp(context, object, &yup, &nope);\n \n   BIND(&yup);\n-  var_result.Bind(Int32Constant(1));\n+  var_result = Int32TrueConstant();\n   Goto(&out);\n \n   BIND(&nope);\n-  var_result.Bind(Int32Constant(0));\n+  var_result = Int32FalseConstant();\n   Goto(&out);\n \n   BIND(&out);\n@@ -986,8 +989,9 @@ TF_BUILTIN(RegExpExecAtom, RegExpBuiltinsAssembler) {\n \n   Node* const data = LoadObjectField(regexp, JSRegExp::kDataOffset);\n   CSA_ASSERT(this, IsFixedArray(data));\n-  CSA_ASSERT(this, SmiEqual(LoadFixedArrayElement(data, JSRegExp::kTagIndex),\n-                            SmiConstant(JSRegExp::ATOM)));\n+  CSA_ASSERT(this,\n+             SmiEqual(CAST(LoadFixedArrayElement(data, JSRegExp::kTagIndex)),\n+                      SmiConstant(JSRegExp::ATOM)));\n \n   // Callers ensure that last_index is in-bounds.\n   CSA_ASSERT(this,\n@@ -998,10 +1002,9 @@ TF_BUILTIN(RegExpExecAtom, RegExpBuiltinsAssembler) {\n       LoadFixedArrayElement(data, JSRegExp::kAtomPatternIndex);\n   CSA_ASSERT(this, IsString(needle_string));\n \n-  Node* const match_from =\n-      CallBuiltin(Builtins::kStringIndexOf, context, subject_string,\n-                  needle_string, last_index);\n-  CSA_ASSERT(this, TaggedIsSmi(match_from));\n+  TNode<Smi> const match_from =\n+      CAST(CallBuiltin(Builtins::kStringIndexOf, context, subject_string,\n+                       needle_string, last_index));\n \n   Label if_failure(this), if_success(this);\n   Branch(SmiEqual(match_from, SmiConstant(-1)), &if_failure, &if_success);\n@@ -1015,7 +1018,7 @@ TF_BUILTIN(RegExpExecAtom, RegExpBuiltinsAssembler) {\n     const int kNumRegisters = 2;\n     STATIC_ASSERT(RegExpMatchInfo::kInitialCaptureIndices >= kNumRegisters);\n \n-    Node* const match_to =\n+    TNode<Smi> const match_to =\n         SmiAdd(match_from, LoadStringLengthAsSmi(needle_string));\n \n     StoreFixedArrayElement(match_info, RegExpMatchInfo::kNumberOfCapturesIndex,\n@@ -1475,8 +1478,9 @@ TF_BUILTIN(RegExpPrototypeSourceGetter, RegExpBuiltinsAssembler) {\n // Fast-path implementation for flag checks on an unmodified JSRegExp instance.\n Node* RegExpBuiltinsAssembler::FastFlagGetter(Node* const regexp,\n                                               JSRegExp::Flag flag) {\n-  Node* const flags = LoadObjectField(regexp, JSRegExp::kFlagsOffset);\n-  Node* const mask = SmiConstant(flag);\n+  TNode<Smi> const flags =\n+      CAST(LoadObjectField(regexp, JSRegExp::kFlagsOffset));\n+  TNode<Smi> const mask = SmiConstant(flag);\n   return SmiToInt32(SmiAnd(flags, mask));\n }\n \n@@ -1866,8 +1870,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n         Branch(IsNull(result), &if_didnotmatch, &load_match);\n \n         BIND(&load_match);\n-        Node* const match = GetProperty(context, result, smi_zero);\n-        var_match.Bind(ToString_Inline(context, match));\n+        var_match.Bind(\n+            ToString_Inline(context, GetProperty(context, result, smi_zero)));\n         Goto(&if_didmatch);\n       }\n \n@@ -1955,20 +1959,49 @@ TF_BUILTIN(RegExpPrototypeMatch, RegExpBuiltinsAssembler) {\n \n TNode<Object> RegExpBuiltinsAssembler::MatchAllIterator(\n     TNode<Context> context, TNode<Context> native_context,\n-    TNode<Object> maybe_regexp, TNode<Object> maybe_string,\n-    char const* method_name) {\n-  Label create_iterator(this), if_regexp(this), if_not_regexp(this),\n+    TNode<Object> maybe_regexp, TNode<String> string,\n+    TNode<BoolT> is_fast_regexp, char const* method_name) {\n+  Label create_iterator(this), if_fast_regexp(this),\n+      if_slow_regexp(this, Label::kDeferred), if_not_regexp(this),\n       throw_type_error(this, Label::kDeferred);\n \n   // 1. Let S be ? ToString(O).\n-  TNode<String> string = ToString_Inline(context, maybe_string);\n+  // Handled by the caller of MatchAllIterator.\n+  CSA_ASSERT(this, IsString(string));\n+\n   TVARIABLE(Object, var_matcher);\n   TVARIABLE(Int32T, var_global);\n   TVARIABLE(Int32T, var_unicode);\n \n   // 2. If ? IsRegExp(R) is true, then\n-  Branch(IsRegExp(context, maybe_regexp), &if_regexp, &if_not_regexp);\n-  BIND(&if_regexp);\n+  GotoIf(is_fast_regexp, &if_fast_regexp);\n+  Branch(IsRegExp(context, maybe_regexp), &if_slow_regexp, &if_not_regexp);\n+  BIND(&if_fast_regexp);\n+  {\n+    CSA_ASSERT(this, IsFastRegExp(context, maybe_regexp));\n+    TNode<JSRegExp> fast_regexp = CAST(maybe_regexp);\n+    TNode<Object> source =\n+        LoadObjectField(fast_regexp, JSRegExp::kSourceOffset);\n+    TNode<String> flags = CAST(FlagsGetter(context, fast_regexp, true));\n+\n+    // c. Let matcher be ? Construct(C, ¬´ R, flags ¬ª).\n+    var_matcher = RegExpCreate(context, native_context, source, flags);\n+    CSA_ASSERT(this, IsFastRegExp(context, var_matcher.value()));\n+\n+    // d. Let global be ? ToBoolean(? Get(matcher, \"global\")).\n+    var_global = UncheckedCast<Int32T>(\n+        FastFlagGetter(var_matcher.value(), JSRegExp::kGlobal));\n+\n+    // e. Let fullUnicode be ? ToBoolean(? Get(matcher, \"unicode\").\n+    var_unicode = UncheckedCast<Int32T>(\n+        FastFlagGetter(var_matcher.value(), JSRegExp::kUnicode));\n+\n+    // f. Let lastIndex be ? ToLength(? Get(R, \"lastIndex\")).\n+    // g. Perform ? Set(matcher, \"lastIndex\", lastIndex, true).\n+    FastStoreLastIndex(var_matcher.value(), FastLoadLastIndex(fast_regexp));\n+    Goto(&create_iterator);\n+  }\n+  BIND(&if_slow_regexp);\n   {\n     // a. Let C be ? SpeciesConstructor(R, %RegExp%).\n     TNode<Object> regexp_fun =\n@@ -1977,33 +2010,28 @@ TNode<Object> RegExpBuiltinsAssembler::MatchAllIterator(\n         SpeciesConstructor(native_context, maybe_regexp, regexp_fun);\n \n     // b. Let flags be ? ToString(? Get(R, \"flags\")).\n-    // TODO(pwong): Add fast path to avoid property lookup.\n     TNode<Object> flags = GetProperty(context, maybe_regexp,\n                                       isolate()->factory()->flags_string());\n-    TNode<Object> flags_string = ToString_Inline(context, flags);\n+    TNode<String> flags_string = ToString_Inline(context, flags);\n \n     // c. Let matcher be ? Construct(C, ¬´ R, flags ¬ª).\n     var_matcher =\n         CAST(ConstructJS(CodeFactory::Construct(isolate()), context,\n                          species_constructor, maybe_regexp, flags_string));\n \n     // d. Let global be ? ToBoolean(? Get(matcher, \"global\")).\n-    // TODO(pwong): Add fast path for loading flags.\n     var_global = UncheckedCast<Int32T>(\n         SlowFlagGetter(context, var_matcher.value(), JSRegExp::kGlobal));\n \n     // e. Let fullUnicode be ? ToBoolean(? Get(matcher, \"unicode\").\n-    // TODO(pwong): Add fast path for loading flags.\n     var_unicode = UncheckedCast<Int32T>(\n         SlowFlagGetter(context, var_matcher.value(), JSRegExp::kUnicode));\n \n     // f. Let lastIndex be ? ToLength(? Get(R, \"lastIndex\")).\n-    // TODO(pwong): Add fast path for loading last index.\n     TNode<Number> last_index = UncheckedCast<Number>(\n         ToLength_Inline(context, SlowLoadLastIndex(context, maybe_regexp)));\n \n     // g. Perform ? Set(matcher, \"lastIndex\", lastIndex, true).\n-    // TODO(pwong): Add fast path for storing last index.\n     SlowStoreLastIndex(context, var_matcher.value(), last_index);\n \n     Goto(&create_iterator);\n@@ -2016,20 +2044,27 @@ TNode<Object> RegExpBuiltinsAssembler::MatchAllIterator(\n     var_matcher = RegExpCreate(context, native_context, maybe_regexp,\n                                StringConstant(\"g\"));\n \n-    // c. If ? IsRegExp(matcher) is not true, throw a TypeError exception.\n-    GotoIfNot(IsRegExp(context, var_matcher.value()), &throw_type_error);\n-\n     // d. Let global be true.\n     var_global = Int32Constant(1);\n \n     // e. Let fullUnicode be false.\n     var_unicode = Int32Constant(0);\n \n-    // f. If ? Get(matcher, \"lastIndex\") is not 0, throw a TypeError exception.\n-    TNode<Object> last_index =\n-        CAST(LoadLastIndex(context, var_matcher.value(), false));\n-    Branch(SmiEqual(SmiConstant(0), last_index), &create_iterator,\n-           &throw_type_error);\n+    Label if_matcher_slow_regexp(this, Label::kDeferred);\n+    BranchIfFastRegExp(context, var_matcher.value(), &create_iterator,\n+                       &if_matcher_slow_regexp);\n+    BIND(&if_matcher_slow_regexp);\n+    {\n+      // c. If ? IsRegExp(matcher) is not true, throw a TypeError exception.\n+      GotoIfNot(IsRegExp(context, var_matcher.value()), &throw_type_error);\n+\n+      // f. If ? Get(matcher, \"lastIndex\") is not 0, throw a TypeError\n+      // exception.\n+      TNode<Object> last_index =\n+          CAST(LoadLastIndex(context, var_matcher.value(), false));\n+      Branch(WordEqual(SmiConstant(0), last_index), &create_iterator,\n+             &throw_type_error);\n+    }\n   }\n   BIND(&throw_type_error);\n   {\n@@ -2106,8 +2141,9 @@ TF_BUILTIN(RegExpPrototypeMatchAll, RegExpBuiltinsAssembler) {\n                        \"RegExp.prototype.@@matchAll\");\n \n   // 3. Return ? MatchAllIterator(R, string).\n-  Return(MatchAllIterator(context, native_context, receiver, string,\n-                          \"RegExp.prototype.@@matchAll\"));\n+  Return(MatchAllIterator(\n+      context, native_context, receiver, ToString_Inline(context, string),\n+      IsFastRegExp(context, receiver), \"RegExp.prototype.@@matchAll\"));\n }\n \n // Helper that skips a few initial checks. and assumes...\n@@ -2267,10 +2303,9 @@ TF_BUILTIN(RegExpSearchFast, RegExpBuiltinsAssembler) {\n void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n                                                        Node* const regexp,\n                                                        TNode<String> string,\n-                                                       Node* const limit) {\n+                                                       TNode<Smi> const limit) {\n   CSA_ASSERT(this, IsFastRegExp(context, regexp));\n   CSA_ASSERT(this, Word32BinaryNot(FastFlagGetter(regexp, JSRegExp::kSticky)));\n-  CSA_ASSERT(this, TaggedIsSmi(limit));\n \n   TNode<Smi> const smi_zero = SmiConstant(0);\n   TNode<IntPtrT> const int_zero = IntPtrConstant(0);\n@@ -2333,11 +2368,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n \n   GrowableFixedArray array(state());\n \n-  VARIABLE(var_last_matched_until, MachineRepresentation::kTagged);\n-  VARIABLE(var_next_search_from, MachineRepresentation::kTagged);\n-\n-  var_last_matched_until.Bind(smi_zero);\n-  var_next_search_from.Bind(smi_zero);\n+  TVARIABLE(Smi, var_last_matched_until, smi_zero);\n+  TVARIABLE(Smi, var_next_search_from, smi_zero);\n \n   Variable* vars[] = {array.var_array(), array.var_length(),\n                       array.var_capacity(), &var_last_matched_until,\n@@ -2348,11 +2380,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n \n   BIND(&loop);\n   {\n-    Node* const next_search_from = var_next_search_from.value();\n-    Node* const last_matched_until = var_last_matched_until.value();\n-\n-    CSA_ASSERT(this, TaggedIsSmi(next_search_from));\n-    CSA_ASSERT(this, TaggedIsSmi(last_matched_until));\n+    TNode<Smi> const next_search_from = var_next_search_from.value();\n+    TNode<Smi> const last_matched_until = var_last_matched_until.value();\n \n     // We're done if we've reached the end of the string.\n     {\n@@ -2377,8 +2406,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n       BIND(&next);\n     }\n \n-    Node* const match_from = LoadFixedArrayElement(\n-        match_indices, RegExpMatchInfo::kFirstCaptureIndex);\n+    TNode<Smi> const match_from = CAST(LoadFixedArrayElement(\n+        match_indices, RegExpMatchInfo::kFirstCaptureIndex));\n \n     // We're done if the match starts beyond the string.\n     {\n@@ -2387,8 +2416,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n       BIND(&next);\n     }\n \n-    Node* const match_to = LoadFixedArrayElement(\n-        match_indices, RegExpMatchInfo::kFirstCaptureIndex + 1);\n+    TNode<Smi> const match_to = CAST(LoadFixedArrayElement(\n+        match_indices, RegExpMatchInfo::kFirstCaptureIndex + 1));\n \n     // Advance index and continue if the match is empty.\n     {\n@@ -2400,16 +2429,16 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n       Node* const is_unicode = FastFlagGetter(regexp, JSRegExp::kUnicode);\n       Node* const new_next_search_from =\n           AdvanceStringIndex(string, next_search_from, is_unicode, true);\n-      var_next_search_from.Bind(new_next_search_from);\n+      var_next_search_from = CAST(new_next_search_from);\n       Goto(&loop);\n \n       BIND(&next);\n     }\n \n     // A valid match was found, add the new substring to the array.\n     {\n-      Node* const from = last_matched_until;\n-      Node* const to = match_from;\n+      TNode<Smi> const from = last_matched_until;\n+      TNode<Smi> const to = match_from;\n       array.Push(SubString(string, SmiUntag(from), SmiUntag(to)));\n       GotoIf(WordEqual(array.length(), int_limit), &out);\n     }\n@@ -2436,9 +2465,9 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n         Node* const from = LoadFixedArrayElement(\n             match_indices, reg,\n             RegExpMatchInfo::kFirstCaptureIndex * kPointerSize, mode);\n-        Node* const to = LoadFixedArrayElement(\n+        TNode<Smi> const to = CAST(LoadFixedArrayElement(\n             match_indices, reg,\n-            (RegExpMatchInfo::kFirstCaptureIndex + 1) * kPointerSize, mode);\n+            (RegExpMatchInfo::kFirstCaptureIndex + 1) * kPointerSize, mode));\n \n         Label select_capture(this), select_undefined(this), store_value(this);\n         VARIABLE(var_value, MachineRepresentation::kTagged);\n@@ -2473,8 +2502,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n       BIND(&nested_loop_out);\n     }\n \n-    var_last_matched_until.Bind(match_to);\n-    var_next_search_from.Bind(match_to);\n+    var_last_matched_until = match_to;\n+    var_next_search_from = match_to;\n     Goto(&loop);\n   }\n \n@@ -2550,7 +2579,7 @@ TF_BUILTIN(RegExpSplit, RegExpBuiltinsAssembler) {\n \n   // We're good to go on the fast path, which is inlined here.\n \n-  RegExpPrototypeSplitBody(context, regexp, string, var_limit.value());\n+  RegExpPrototypeSplitBody(context, regexp, string, CAST(var_limit.value()));\n \n   BIND(&runtime);\n   Return(CallRuntime(Runtime::kRegExpSplit, context, regexp, string,\n@@ -2652,8 +2681,8 @@ Node* RegExpBuiltinsAssembler::ReplaceGlobalCallableFastPath(\n   Node* const res_elems = LoadElements(res);\n   CSA_ASSERT(this, HasInstanceType(res_elems, FIXED_ARRAY_TYPE));\n \n-  Node* const num_capture_registers = LoadFixedArrayElement(\n-      last_match_info, RegExpMatchInfo::kNumberOfCapturesIndex);\n+  TNode<Smi> const num_capture_registers = CAST(LoadFixedArrayElement(\n+      last_match_info, RegExpMatchInfo::kNumberOfCapturesIndex));\n \n   Label if_hasexplicitcaptures(this), if_noexplicitcaptures(this),\n       create_result(this);\n@@ -2688,14 +2717,15 @@ Node* RegExpBuiltinsAssembler::ReplaceGlobalCallableFastPath(\n \n       BIND(&if_issmi);\n       {\n+        TNode<Smi> smi_elem = CAST(elem);\n         // Integers represent slices of the original string.\n         Label if_isnegativeorzero(this), if_ispositive(this);\n-        BranchIfSmiLessThanOrEqual(elem, smi_zero, &if_isnegativeorzero,\n+        BranchIfSmiLessThanOrEqual(smi_elem, smi_zero, &if_isnegativeorzero,\n                                    &if_ispositive);\n \n         BIND(&if_ispositive);\n         {\n-          TNode<IntPtrT> int_elem = SmiUntag(elem);\n+          TNode<IntPtrT> int_elem = SmiUntag(smi_elem);\n           TNode<IntPtrT> new_match_start =\n               Signed(IntPtrAdd(WordShr(int_elem, IntPtrConstant(11)),\n                                WordAnd(int_elem, IntPtrConstant(0x7FF))));\n@@ -2707,10 +2737,10 @@ Node* RegExpBuiltinsAssembler::ReplaceGlobalCallableFastPath(\n         {\n           var_i = IntPtrAdd(var_i.value(), int_one);\n \n-          Node* const next_elem =\n-              LoadFixedArrayElement(res_elems, var_i.value());\n+          TNode<Smi> const next_elem =\n+              CAST(LoadFixedArrayElement(res_elems, var_i.value()));\n \n-          var_match_start = SmiSub(next_elem, elem);\n+          var_match_start = SmiSub(next_elem, smi_elem);\n           Goto(&loop_epilogue);\n         }\n       }\n@@ -2811,7 +2841,7 @@ Node* RegExpBuiltinsAssembler::ReplaceSimpleStringFastPath(\n \n   CSA_ASSERT(this, IsFastRegExp(context, regexp));\n \n-  Node* const smi_zero = SmiConstant(0);\n+  TNode<Smi> const smi_zero = SmiConstant(0);\n   const bool kIsFastPath = true;\n \n   TVARIABLE(String, var_result, EmptyStringConstant());\n@@ -2837,10 +2867,10 @@ Node* RegExpBuiltinsAssembler::ReplaceSimpleStringFastPath(\n \n     // Successful match.\n     {\n-      Node* const match_start = LoadFixedArrayElement(\n-          var_match_indices.value(), RegExpMatchInfo::kFirstCaptureIndex);\n-      Node* const match_end = LoadFixedArrayElement(\n-          var_match_indices.value(), RegExpMatchInfo::kFirstCaptureIndex + 1);\n+      TNode<Smi> const match_start = CAST(LoadFixedArrayElement(\n+          var_match_indices.value(), RegExpMatchInfo::kFirstCaptureIndex));\n+      TNode<Smi> const match_end = CAST(LoadFixedArrayElement(\n+          var_match_indices.value(), RegExpMatchInfo::kFirstCaptureIndex + 1));\n \n       Label if_replaceisempty(this), if_replaceisnotempty(this);\n       TNode<Smi> const replace_length = LoadStringLengthAsSmi(replace_string);\n@@ -2931,11 +2961,11 @@ TF_BUILTIN(RegExpReplace, RegExpBuiltinsAssembler) {\n       BIND(&next);\n     }\n \n-    Node* const dollar_string = HeapConstant(\n+    TNode<String> const dollar_string = HeapConstant(\n         isolate()->factory()->LookupSingleCharacterStringFromCode('$'));\n-    Node* const dollar_ix =\n-        CallBuiltin(Builtins::kStringIndexOf, context, replace_string,\n-                    dollar_string, SmiConstant(0));\n+    TNode<Smi> const dollar_ix =\n+        CAST(CallBuiltin(Builtins::kStringIndexOf, context, replace_string,\n+                         dollar_string, SmiConstant(0)));\n     GotoIfNot(SmiEqual(dollar_ix, SmiConstant(-1)), &runtime);\n \n     Return(\n@@ -3093,8 +3123,8 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n   // 1. Let O be the this value.\n   // 2. If Type(O) is not Object, throw a TypeError exception.\n   GotoIf(TaggedIsSmi(maybe_receiver), &throw_bad_receiver);\n-  GotoIfNot(IsJSReceiver(maybe_receiver), &throw_bad_receiver);\n   TNode<HeapObject> receiver = CAST(maybe_receiver);\n+  GotoIfNot(IsJSReceiver(receiver), &throw_bad_receiver);\n \n   // 3. If O does not have all of the internal slots of a RegExp String Iterator\n   // Object Instance (see 5.3), throw a TypeError exception.\n@@ -3123,25 +3153,28 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n \n   // 9. Let match be ? RegExpExec(R, S).\n   TVARIABLE(Object, var_match);\n+  TVARIABLE(BoolT, var_is_fast_regexp);\n   {\n-    Label if_fast(this), if_slow(this), next(this);\n+    Label if_fast(this), if_slow(this, Label::kDeferred);\n     BranchIfFastRegExp(context, iterating_regexp, &if_fast, &if_slow);\n     BIND(&if_fast);\n     {\n-      var_match = CAST(RegExpPrototypeExecBody(context, iterating_regexp,\n-                                               iterating_string, true));\n-      Goto(&next);\n+      TNode<Object> indices_or_null = CAST(RegExpPrototypeExecBodyWithoutResult(\n+          context, iterating_regexp, iterating_string, &if_no_match, true));\n+      var_match = CAST(ConstructNewResultFromMatchInfo(\n+          context, iterating_regexp, indices_or_null, iterating_string));\n+      var_is_fast_regexp = Int32TrueConstant();\n+      Goto(&if_match);\n     }\n     BIND(&if_slow);\n     {\n       var_match = CAST(RegExpExec(context, iterating_regexp, iterating_string));\n-      Goto(&next);\n+      var_is_fast_regexp = Int32FalseConstant();\n+      Branch(IsNull(var_match.value()), &if_no_match, &if_match);\n     }\n-    BIND(&next);\n   }\n \n   // 10. If match is null, then\n-  Branch(IsNull(var_match.value()), &if_no_match, &if_match);\n   BIND(&if_no_match);\n   {\n     // a. Set O.[[Done]] to true.\n@@ -3153,26 +3186,60 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n   // 11. Else,\n   BIND(&if_match);\n   {\n-    Label if_global(this), if_not_global(this, Label::kDeferred);\n+    Label if_global(this), if_not_global(this, Label::kDeferred),\n+        return_result(this);\n \n     // a. If global is true,\n     Branch(HasGlobalFlag(flags), &if_global, &if_not_global);\n     BIND(&if_global);\n     {\n-      // i. Let matchStr be ? ToString(? Get(match, \"0\")).\n-      // TODO(pwong): Add fast path for fast regexp results. See\n-      // BranchIfFastRegExpResult().\n-      TNode<Object> match_str = ToString_Inline(\n-          context, GetProperty(context, var_match.value(),\n-                               isolate()->factory()->zero_string()));\n+      Label if_fast(this), if_slow(this, Label::kDeferred);\n \n       // ii. If matchStr is the empty string,\n+      Branch(var_is_fast_regexp.value(), &if_fast, &if_slow);\n+      BIND(&if_fast);\n+      {\n+        // i. Let matchStr be ? ToString(? Get(match, \"0\")).\n+        CSA_ASSERT_BRANCH(this, [&](Label* ok, Label* not_ok) {\n+          BranchIfFastRegExpResult(context, var_match.value(), ok, not_ok);\n+        });\n+        CSA_ASSERT(this,\n+                   SmiNotEqual(LoadFastJSArrayLength(CAST(var_match.value())),\n+                               SmiConstant(0)));\n+        TNode<FixedArrayBase> result_fixed_array =\n+            LoadElements(CAST(var_match.value()));\n+        TNode<String> match_str =\n+            CAST(LoadFixedArrayElement(result_fixed_array, 0));\n+\n+        // When iterating_regexp is fast, we assume it stays fast even after\n+        // accessing the first match from the RegExp result.\n+        CSA_ASSERT(this, IsFastRegExp(context, iterating_regexp));\n+        GotoIfNot(IsEmptyString(match_str), &return_result);\n+\n+        // 1. Let thisIndex be ? ToLength(? Get(R, \"lastIndex\")).\n+        TNode<Smi> this_index = CAST(FastLoadLastIndex(iterating_regexp));\n+        CSA_ASSERT(this, TaggedIsSmi(this_index));\n+\n+        // 2. Let nextIndex be ! AdvanceStringIndex(S, thisIndex, fullUnicode).\n+        TNode<Smi> next_index = CAST(AdvanceStringIndex(\n+            iterating_string, this_index, HasUnicodeFlag(flags), true));\n+        CSA_ASSERT(this, TaggedIsSmi(next_index));\n+\n+        // 3. Perform ? Set(R, \"lastIndex\", nextIndex, true).\n+        FastStoreLastIndex(iterating_regexp, next_index);\n+\n+        // iii. Return ! CreateIterResultObject(match, false).\n+        Goto(&return_result);\n+      }\n+      BIND(&if_slow);\n       {\n-        Label next(this);\n-        GotoIfNot(IsEmptyString(match_str), &next);\n+        // i. Let matchStr be ? ToString(? Get(match, \"0\")).\n+        TNode<String> match_str = ToString_Inline(\n+            context, GetProperty(context, var_match.value(), SmiConstant(0)));\n+\n+        GotoIfNot(IsEmptyString(match_str), &return_result);\n \n         // 1. Let thisIndex be ? ToLength(? Get(R, \"lastIndex\")).\n-        // TODO(pwong): Add fast path for loading last index.\n         TNode<Object> last_index =\n             CAST(SlowLoadLastIndex(context, iterating_regexp));\n         TNode<Number> this_index = ToLength_Inline(context, last_index);\n@@ -3182,16 +3249,11 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n             iterating_string, this_index, HasUnicodeFlag(flags), false));\n \n         // 3. Perform ? Set(R, \"lastIndex\", nextIndex, true).\n-        // TODO(pwong): Add fast path for storing last index.\n         SlowStoreLastIndex(context, iterating_regexp, next_index);\n \n-        Goto(&next);\n-        BIND(&next);\n+        // iii. Return ! CreateIterResultObject(match, false).\n+        Goto(&return_result);\n       }\n-\n-      // iii. Return ! CreateIterResultObject(match, false).\n-      Return(AllocateJSIteratorResult(context, var_match.value(),\n-                                      FalseConstant()));\n     }\n     // b. Else,\n     BIND(&if_not_global);\n@@ -3200,6 +3262,10 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n       SetDoneFlag(receiver, flags);\n \n       // ii. Return ! CreateIterResultObject(match, false).\n+      Goto(&return_result);\n+    }\n+    BIND(&return_result);\n+    {\n       Return(AllocateJSIteratorResult(context, var_match.value(),\n                                       FalseConstant()));\n     }"
        },
        {
            "sha": "5616769dd9e5ebf0eceb0a0c9fa13c249a82fb41",
            "filename": "deps/v8/src/builtins/builtins-regexp-gen.h",
            "status": "modified",
            "additions": 9,
            "deletions": 5,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -29,7 +29,8 @@ class RegExpBuiltinsAssembler : public CodeStubAssembler {\n \n   TNode<Object> MatchAllIterator(TNode<Context> context,\n                                  TNode<Context> native_context,\n-                                 TNode<Object> regexp, TNode<Object> string,\n+                                 TNode<Object> regexp, TNode<String> string,\n+                                 TNode<BoolT> is_fast_regexp,\n                                  char const* method_name);\n \n  protected:\n@@ -77,13 +78,14 @@ class RegExpBuiltinsAssembler : public CodeStubAssembler {\n                              MessageTemplate::Template msg_template,\n                              char const* method_name);\n \n+  // Analogous to BranchIfFastRegExp, for use in asserts.\n+  TNode<BoolT> IsFastRegExp(SloppyTNode<Context> context,\n+                            SloppyTNode<Object> object);\n+\n   void BranchIfFastRegExp(Node* const context, Node* const object,\n                           Label* const if_isunmodified,\n                           Label* const if_ismodified);\n \n-  // Analogous to BranchIfFastRegExp, for use in asserts.\n-  Node* IsFastRegExp(Node* const context, Node* const object);\n-\n   // Performs fast path checks on the given object itself, but omits prototype\n   // checks.\n   Node* IsFastRegExpNoPrototype(Node* const context, Node* const object);\n@@ -104,6 +106,7 @@ class RegExpBuiltinsAssembler : public CodeStubAssembler {\n                   int counter, const char* method_name);\n \n   Node* IsRegExp(Node* const context, Node* const maybe_receiver);\n+\n   Node* RegExpInitialize(Node* const context, Node* const regexp,\n                          Node* const maybe_pattern, Node* const maybe_flags);\n \n@@ -122,7 +125,8 @@ class RegExpBuiltinsAssembler : public CodeStubAssembler {\n                                      Node* const string);\n \n   void RegExpPrototypeSplitBody(Node* const context, Node* const regexp,\n-                                TNode<String> const string, Node* const limit);\n+                                TNode<String> const string,\n+                                TNode<Smi> const limit);\n \n   Node* ReplaceGlobalCallableFastPath(Node* context, Node* regexp, Node* string,\n                                       Node* replace_callable);"
        },
        {
            "sha": "ce8075c062d316fa31be6b7f9b6593cab86a3aac",
            "filename": "deps/v8/src/builtins/builtins-string-gen.cc",
            "status": "modified",
            "additions": 240,
            "deletions": 79,
            "changes": 319,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -98,8 +98,7 @@ Node* StringBuiltinsAssembler::CallSearchStringRaw(Node* const subject_ptr,\n                                                    Node* const search_length,\n                                                    Node* const start_position) {\n   Node* const function_addr = ExternalConstant(\n-      ExternalReference::search_string_raw<SubjectChar, PatternChar>(\n-          isolate()));\n+      ExternalReference::search_string_raw<SubjectChar, PatternChar>());\n   Node* const isolate_ptr =\n       ExternalConstant(ExternalReference::isolate_address(isolate()));\n \n@@ -285,6 +284,69 @@ void StringBuiltinsAssembler::StringEqual_Loop(\n   }\n }\n \n+void StringBuiltinsAssembler::Generate_StringAdd(StringAddFlags flags,\n+                                                 PretenureFlag pretenure_flag,\n+                                                 Node* context, Node* left,\n+                                                 Node* right) {\n+  switch (flags) {\n+    case STRING_ADD_CONVERT_LEFT: {\n+      // TODO(danno): The ToString and JSReceiverToPrimitive below could be\n+      // combined to avoid duplicate smi and instance type checks.\n+      left = ToString(context, JSReceiverToPrimitive(context, left));\n+      Callable callable = CodeFactory::StringAdd(\n+          isolate(), STRING_ADD_CHECK_NONE, pretenure_flag);\n+      TailCallStub(callable, context, left, right);\n+      break;\n+    }\n+    case STRING_ADD_CONVERT_RIGHT: {\n+      // TODO(danno): The ToString and JSReceiverToPrimitive below could be\n+      // combined to avoid duplicate smi and instance type checks.\n+      right = ToString(context, JSReceiverToPrimitive(context, right));\n+      Callable callable = CodeFactory::StringAdd(\n+          isolate(), STRING_ADD_CHECK_NONE, pretenure_flag);\n+      TailCallStub(callable, context, left, right);\n+      break;\n+    }\n+    case STRING_ADD_CHECK_NONE: {\n+      CodeStubAssembler::AllocationFlag allocation_flags =\n+          (pretenure_flag == TENURED) ? CodeStubAssembler::kPretenured\n+                                      : CodeStubAssembler::kNone;\n+      Return(StringAdd(context, CAST(left), CAST(right), allocation_flags));\n+      break;\n+    }\n+  }\n+}\n+\n+TF_BUILTIN(StringAdd_CheckNone_NotTenured, StringBuiltinsAssembler) {\n+  Node* left = Parameter(Descriptor::kLeft);\n+  Node* right = Parameter(Descriptor::kRight);\n+  Node* context = Parameter(Descriptor::kContext);\n+  Generate_StringAdd(STRING_ADD_CHECK_NONE, NOT_TENURED, context, left, right);\n+}\n+\n+TF_BUILTIN(StringAdd_CheckNone_Tenured, StringBuiltinsAssembler) {\n+  Node* left = Parameter(Descriptor::kLeft);\n+  Node* right = Parameter(Descriptor::kRight);\n+  Node* context = Parameter(Descriptor::kContext);\n+  Generate_StringAdd(STRING_ADD_CHECK_NONE, TENURED, context, left, right);\n+}\n+\n+TF_BUILTIN(StringAdd_ConvertLeft_NotTenured, StringBuiltinsAssembler) {\n+  Node* left = Parameter(Descriptor::kLeft);\n+  Node* right = Parameter(Descriptor::kRight);\n+  Node* context = Parameter(Descriptor::kContext);\n+  Generate_StringAdd(STRING_ADD_CONVERT_LEFT, NOT_TENURED, context, left,\n+                     right);\n+}\n+\n+TF_BUILTIN(StringAdd_ConvertRight_NotTenured, StringBuiltinsAssembler) {\n+  Node* left = Parameter(Descriptor::kLeft);\n+  Node* right = Parameter(Descriptor::kRight);\n+  Node* context = Parameter(Descriptor::kContext);\n+  Generate_StringAdd(STRING_ADD_CONVERT_RIGHT, NOT_TENURED, context, left,\n+                     right);\n+}\n+\n void StringBuiltinsAssembler::GenerateStringAt(char const* method_name,\n                                                TNode<Context> context,\n                                                Node* receiver,\n@@ -831,7 +893,7 @@ void StringBuiltinsAssembler::StringIndexOf(\n           ChangeInt32ToIntPtr(Load(MachineType::Uint8(), adjusted_search_ptr));\n \n       Node* const memchr =\n-          ExternalConstant(ExternalReference::libc_memchr_function(isolate()));\n+          ExternalConstant(ExternalReference::libc_memchr_function());\n       Node* const result_address =\n           CallCFunction3(MachineType::Pointer(), MachineType::Pointer(),\n                          MachineType::IntPtr(), MachineType::UintPtr(), memchr,\n@@ -992,7 +1054,7 @@ void StringIncludesIndexOfAssembler::Generate(SearchVariant variant) {\n       arguments.PopAndReturn((variant == kIndexOf)\n                                  ? result\n                                  : SelectBooleanConstant(SmiGreaterThanOrEqual(\n-                                       result, SmiConstant(0))));\n+                                       CAST(result), SmiConstant(0))));\n     });\n   }\n   BIND(&call_runtime);\n@@ -1046,7 +1108,7 @@ void StringBuiltinsAssembler::MaybeCallFunctionAtSymbol(\n         LoadContextElement(native_context, Context::STRING_FUNCTION_INDEX);\n     Node* const initial_map =\n         LoadObjectField(string_fun, JSFunction::kPrototypeOrInitialMapOffset);\n-    Node* const proto_map = LoadMap(CAST(LoadMapPrototype(initial_map)));\n+    Node* const proto_map = LoadMap(LoadMapPrototype(initial_map));\n \n     Branch(WordEqual(proto_map, initial_proto_initial_map), &out, &next);\n \n@@ -1094,16 +1156,15 @@ void StringBuiltinsAssembler::MaybeCallFunctionAtSymbol(\n   BIND(&out);\n }\n \n-compiler::Node* StringBuiltinsAssembler::IndexOfDollarChar(Node* const context,\n-                                                           Node* const string) {\n+TNode<Smi> StringBuiltinsAssembler::IndexOfDollarChar(Node* const context,\n+                                                      Node* const string) {\n   CSA_ASSERT(this, IsString(string));\n \n-  Node* const dollar_string = HeapConstant(\n+  TNode<String> const dollar_string = HeapConstant(\n       isolate()->factory()->LookupSingleCharacterStringFromCode('$'));\n-  Node* const dollar_ix = CallBuiltin(Builtins::kStringIndexOf, context, string,\n-                                      dollar_string, SmiConstant(0));\n-\n-  CSA_ASSERT(this, TaggedIsSmi(dollar_ix));\n+  TNode<Smi> const dollar_ix =\n+      CAST(CallBuiltin(Builtins::kStringIndexOf, context, string, dollar_string,\n+                       SmiConstant(0)));\n   return dollar_ix;\n }\n \n@@ -1126,7 +1187,7 @@ compiler::Node* StringBuiltinsAssembler::GetSubstitution(\n   // TODO(jgruber): Possibly extend this in the future to handle more complex\n   // cases without runtime calls.\n \n-  Node* const dollar_index = IndexOfDollarChar(context, replace_string);\n+  TNode<Smi> const dollar_index = IndexOfDollarChar(context, replace_string);\n   Branch(SmiIsNegative(dollar_index), &out, &runtime);\n \n   BIND(&runtime);\n@@ -1171,16 +1232,17 @@ TF_BUILTIN(StringPrototypeRepeat, StringBuiltinsAssembler) {\n     Label if_count_isheapnumber(this, Label::kDeferred);\n \n     GotoIfNot(TaggedIsSmi(var_count.value()), &if_count_isheapnumber);\n-\n-    // If count is a SMI, throw a RangeError if less than 0 or greater than\n-    // the maximum string length.\n-    GotoIf(SmiLessThan(var_count.value(), SmiConstant(0)), &invalid_count);\n-    GotoIf(SmiEqual(var_count.value(), SmiConstant(0)), &return_emptystring);\n-    GotoIf(is_stringempty, &return_emptystring);\n-    GotoIf(SmiGreaterThan(var_count.value(), SmiConstant(String::kMaxLength)),\n-           &invalid_string_length);\n-    Return(CallBuiltin(Builtins::kStringRepeat, context, string,\n-                       var_count.value()));\n+    {\n+      // If count is a SMI, throw a RangeError if less than 0 or greater than\n+      // the maximum string length.\n+      TNode<Smi> smi_count = CAST(var_count.value());\n+      GotoIf(SmiLessThan(smi_count, SmiConstant(0)), &invalid_count);\n+      GotoIf(SmiEqual(smi_count, SmiConstant(0)), &return_emptystring);\n+      GotoIf(is_stringempty, &return_emptystring);\n+      GotoIf(SmiGreaterThan(smi_count, SmiConstant(String::kMaxLength)),\n+             &invalid_string_length);\n+      Return(CallBuiltin(Builtins::kStringRepeat, context, string, smi_count));\n+    }\n \n     // If count is a Heap Number...\n     // 1) If count is Infinity, throw a RangeError exception\n@@ -1218,7 +1280,7 @@ TF_BUILTIN(StringPrototypeRepeat, StringBuiltinsAssembler) {\n TF_BUILTIN(StringRepeat, StringBuiltinsAssembler) {\n   Node* const context = Parameter(Descriptor::kContext);\n   Node* const string = Parameter(Descriptor::kString);\n-  Node* const count = Parameter(Descriptor::kCount);\n+  TNode<Smi> const count = CAST(Parameter(Descriptor::kCount));\n \n   CSA_ASSERT(this, IsString(string));\n   CSA_ASSERT(this, Word32BinaryNot(IsEmptyString(string)));\n@@ -1237,7 +1299,7 @@ TF_BUILTIN(StringRepeat, StringBuiltinsAssembler) {\n   //   }\n   VARIABLE(var_result, MachineRepresentation::kTagged, EmptyStringConstant());\n   VARIABLE(var_temp, MachineRepresentation::kTagged, string);\n-  VARIABLE(var_count, MachineRepresentation::kTagged, count);\n+  TVARIABLE(Smi, var_count, count);\n \n   Callable stringadd_callable =\n       CodeFactory::StringAdd(isolate(), STRING_ADD_CHECK_NONE, NOT_TENURED);\n@@ -1255,7 +1317,7 @@ TF_BUILTIN(StringRepeat, StringBuiltinsAssembler) {\n       BIND(&next);\n     }\n \n-    var_count.Bind(SmiShr(var_count.value(), 1));\n+    var_count = SmiShr(var_count.value(), 1);\n     GotoIf(SmiEqual(var_count.value(), SmiConstant(0)), &return_result);\n     var_temp.Bind(CallStub(stringadd_callable, context, var_temp.value(),\n                            var_temp.value()));\n@@ -1275,7 +1337,7 @@ TF_BUILTIN(StringPrototypeReplace, StringBuiltinsAssembler) {\n   Node* const replace = Parameter(Descriptor::kReplace);\n   Node* const context = Parameter(Descriptor::kContext);\n \n-  Node* const smi_zero = SmiConstant(0);\n+  TNode<Smi> const smi_zero = SmiConstant(0);\n \n   RequireObjectCoercible(context, receiver, \"String.prototype.replace\");\n \n@@ -1330,10 +1392,9 @@ TF_BUILTIN(StringPrototypeReplace, StringBuiltinsAssembler) {\n   // longer substrings - we can handle up to 8 chars (one-byte) / 4 chars\n   // (2-byte).\n \n-  Node* const match_start_index =\n-      CallBuiltin(Builtins::kStringIndexOf, context, subject_string,\n-                  search_string, smi_zero);\n-  CSA_ASSERT(this, TaggedIsSmi(match_start_index));\n+  TNode<Smi> const match_start_index =\n+      CAST(CallBuiltin(Builtins::kStringIndexOf, context, subject_string,\n+                       search_string, smi_zero));\n \n   // Early exit if no match found.\n   {\n@@ -1359,7 +1420,7 @@ TF_BUILTIN(StringPrototypeReplace, StringBuiltinsAssembler) {\n     BIND(&next);\n   }\n \n-  Node* const match_end_index = SmiAdd(match_start_index, search_length);\n+  TNode<Smi> const match_end_index = SmiAdd(match_start_index, search_length);\n \n   Callable stringadd_callable =\n       CodeFactory::StringAdd(isolate(), STRING_ADD_CHECK_NONE, NOT_TENURED);\n@@ -1507,28 +1568,46 @@ TF_BUILTIN(StringPrototypeMatchAll, StringBuiltinsAssembler) {\n   RequireObjectCoercible(context, receiver, method_name);\n \n   // 2. If regexp is neither undefined nor null, then\n-  Label return_match_all_iterator(this);\n-  GotoIf(IsNullOrUndefined(maybe_regexp), &return_match_all_iterator);\n+  Label return_match_all_iterator(this),\n+      tostring_and_return_match_all_iterator(this, Label::kDeferred);\n+  TVARIABLE(BoolT, var_is_fast_regexp);\n+  TVARIABLE(String, var_receiver_string);\n+  GotoIf(IsNullOrUndefined(maybe_regexp),\n+         &tostring_and_return_match_all_iterator);\n   {\n     // a. Let matcher be ? GetMethod(regexp, @@matchAll).\n     // b. If matcher is not undefined, then\n     //   i. Return ? Call(matcher, regexp, ¬´ O ¬ª).\n-    auto if_regexp_call = [&] { Goto(&return_match_all_iterator); };\n+    auto if_regexp_call = [&] {\n+      // MaybeCallFunctionAtSymbol guarantees fast path is chosen only if\n+      // maybe_regexp is a fast regexp and receiver is a string.\n+      var_receiver_string = CAST(receiver);\n+      CSA_ASSERT(this, IsString(var_receiver_string.value()));\n+      var_is_fast_regexp = Int32TrueConstant();\n+      Goto(&return_match_all_iterator);\n+    };\n     auto if_generic_call = [=](Node* fn) {\n       Callable call_callable = CodeFactory::Call(isolate());\n       Return(CallJS(call_callable, context, fn, maybe_regexp, receiver));\n     };\n     MaybeCallFunctionAtSymbol(context, maybe_regexp, receiver,\n                               isolate()->factory()->match_all_symbol(),\n                               if_regexp_call, if_generic_call);\n+    Goto(&tostring_and_return_match_all_iterator);\n+  }\n+  BIND(&tostring_and_return_match_all_iterator);\n+  {\n+    var_receiver_string = ToString_Inline(context, receiver);\n+    var_is_fast_regexp = Int32FalseConstant();\n     Goto(&return_match_all_iterator);\n   }\n   BIND(&return_match_all_iterator);\n   {\n     // 3. Return ? MatchAllIterator(regexp, O).\n     RegExpBuiltinsAssembler regexp_asm(state());\n     TNode<Object> iterator = regexp_asm.MatchAllIterator(\n-        context, native_context, maybe_regexp, receiver, method_name);\n+        context, native_context, maybe_regexp, var_receiver_string.value(),\n+        var_is_fast_regexp.value(), method_name);\n     Return(iterator);\n   }\n }\n@@ -1558,18 +1637,20 @@ class StringPadAssembler : public StringBuiltinsAssembler {\n     // If no max_length was provided, return the string.\n     GotoIf(IntPtrEqual(argc, IntPtrConstant(0)), &dont_pad);\n \n-    Node* const max_length = ToLength_Inline(context, arguments.AtIndex(0));\n+    TNode<Number> const max_length =\n+        ToLength_Inline(context, arguments.AtIndex(0));\n     CSA_ASSERT(this, IsNumberNormalized(max_length));\n \n     // Throw if max_length is not a smi or greater than the max string length.\n-    GotoIfNot(Word32And(TaggedIsSmi(max_length),\n-                        SmiLessThanOrEqual(max_length,\n-                                           SmiConstant(String::kMaxLength))),\n-              &invalid_string_length);\n+    GotoIfNot(TaggedIsSmi(max_length), &invalid_string_length);\n+    TNode<Smi> smi_max_length = CAST(max_length);\n+    GotoIfNot(\n+        SmiLessThanOrEqual(smi_max_length, SmiConstant(String::kMaxLength)),\n+        &invalid_string_length);\n \n     // If the max_length is less than length of the string, return the string.\n-    CSA_ASSERT(this, TaggedIsPositiveSmi(max_length));\n-    GotoIf(SmiLessThanOrEqual(max_length, string_length), &dont_pad);\n+    CSA_ASSERT(this, TaggedIsPositiveSmi(smi_max_length));\n+    GotoIf(SmiLessThanOrEqual(smi_max_length, string_length), &dont_pad);\n \n     Branch(IntPtrEqual(argc, IntPtrConstant(1)), &pad, &argc_2);\n     BIND(&argc_2);\n@@ -1587,11 +1668,11 @@ class StringPadAssembler : public StringBuiltinsAssembler {\n     {\n       CSA_ASSERT(this,\n                  IntPtrGreaterThan(var_fill_length.value(), IntPtrConstant(0)));\n-      CSA_ASSERT(this, SmiGreaterThan(max_length, string_length));\n+      CSA_ASSERT(this, SmiGreaterThan(smi_max_length, string_length));\n \n       Callable stringadd_callable =\n           CodeFactory::StringAdd(isolate(), STRING_ADD_CHECK_NONE, NOT_TENURED);\n-      TNode<Smi> const pad_length = SmiSub(max_length, string_length);\n+      TNode<Smi> const pad_length = SmiSub(smi_max_length, string_length);\n \n       VARIABLE(var_pad, MachineRepresentation::kTagged);\n \n@@ -1718,6 +1799,83 @@ TF_BUILTIN(StringPrototypeSlice, StringBuiltinsAssembler) {\n   args.PopAndReturn(EmptyStringConstant());\n }\n \n+TNode<JSArray> StringBuiltinsAssembler::StringToArray(\n+    TNode<Context> context, TNode<String> subject_string,\n+    TNode<Smi> subject_length, TNode<Number> limit_number) {\n+  CSA_ASSERT(this, SmiGreaterThan(subject_length, SmiConstant(0)));\n+\n+  Label done(this), call_runtime(this, Label::kDeferred),\n+      fill_thehole_and_call_runtime(this, Label::kDeferred);\n+  TVARIABLE(JSArray, result_array);\n+\n+  TNode<Int32T> instance_type = LoadInstanceType(subject_string);\n+  GotoIfNot(IsOneByteStringInstanceType(instance_type), &call_runtime);\n+\n+  // Try to use cached one byte characters.\n+  {\n+    TNode<Smi> length_smi =\n+        Select<Smi>(TaggedIsSmi(limit_number),\n+                    [=] { return SmiMin(CAST(limit_number), subject_length); },\n+                    [=] { return subject_length; });\n+    TNode<IntPtrT> length = SmiToIntPtr(length_smi);\n+\n+    ToDirectStringAssembler to_direct(state(), subject_string);\n+    to_direct.TryToDirect(&call_runtime);\n+    TNode<FixedArray> elements =\n+        AllocateFixedArray(PACKED_ELEMENTS, length_smi,\n+                           AllocationFlag::kAllowLargeObjectAllocation);\n+    // Don't allocate anything while {string_data} is live!\n+    TNode<RawPtrT> string_data = UncheckedCast<RawPtrT>(\n+        to_direct.PointerToData(&fill_thehole_and_call_runtime));\n+    TNode<IntPtrT> string_data_offset = to_direct.offset();\n+    TNode<Object> cache = LoadRoot(Heap::kSingleCharacterStringCacheRootIndex);\n+\n+    BuildFastLoop(\n+        IntPtrConstant(0), length,\n+        [&](Node* index) {\n+          // TODO(jkummerow): Implement a CSA version of DisallowHeapAllocation\n+          // and use that to guard ToDirectStringAssembler.PointerToData().\n+          CSA_ASSERT(this, WordEqual(to_direct.PointerToData(&call_runtime),\n+                                     string_data));\n+          TNode<Int32T> char_code =\n+              UncheckedCast<Int32T>(Load(MachineType::Uint8(), string_data,\n+                                         IntPtrAdd(index, string_data_offset)));\n+          Node* code_index = ChangeUint32ToWord(char_code);\n+          TNode<Object> entry = LoadFixedArrayElement(CAST(cache), code_index);\n+\n+          // If we cannot find a char in the cache, fill the hole for the fixed\n+          // array, and call runtime.\n+          GotoIf(IsUndefined(entry), &fill_thehole_and_call_runtime);\n+\n+          StoreFixedArrayElement(elements, index, entry);\n+        },\n+        1, ParameterMode::INTPTR_PARAMETERS, IndexAdvanceMode::kPost);\n+\n+    TNode<Map> array_map = LoadJSArrayElementsMap(PACKED_ELEMENTS, context);\n+    result_array = CAST(\n+        AllocateUninitializedJSArrayWithoutElements(array_map, length_smi));\n+    StoreObjectField(result_array.value(), JSObject::kElementsOffset, elements);\n+    Goto(&done);\n+\n+    BIND(&fill_thehole_and_call_runtime);\n+    {\n+      FillFixedArrayWithValue(PACKED_ELEMENTS, elements, IntPtrConstant(0),\n+                              length, Heap::kTheHoleValueRootIndex);\n+      Goto(&call_runtime);\n+    }\n+  }\n+\n+  BIND(&call_runtime);\n+  {\n+    result_array = CAST(CallRuntime(Runtime::kStringToArray, context,\n+                                    subject_string, limit_number));\n+    Goto(&done);\n+  }\n+\n+  BIND(&done);\n+  return result_array.value();\n+}\n+\n // ES6 section 21.1.3.19 String.prototype.split ( separator, limit )\n TF_BUILTIN(StringPrototypeSplit, StringBuiltinsAssembler) {\n   const int kSeparatorArg = 0;\n@@ -1730,9 +1888,9 @@ TF_BUILTIN(StringPrototypeSplit, StringBuiltinsAssembler) {\n   Node* const receiver = args.GetReceiver();\n   Node* const separator = args.GetOptionalArgumentValue(kSeparatorArg);\n   Node* const limit = args.GetOptionalArgumentValue(kLimitArg);\n-  Node* const context = Parameter(BuiltinDescriptor::kContext);\n+  TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n \n-  Node* const smi_zero = SmiConstant(0);\n+  TNode<Smi> smi_zero = SmiConstant(0);\n \n   RequireObjectCoercible(context, receiver, \"String.prototype.split\");\n \n@@ -1752,29 +1910,17 @@ TF_BUILTIN(StringPrototypeSplit, StringBuiltinsAssembler) {\n \n   // String and integer conversions.\n \n-  Node* const subject_string = ToString_Inline(context, receiver);\n-  TNode<Number> const limit_number = Select<Number>(\n+  TNode<String> subject_string = ToString_Inline(context, receiver);\n+  TNode<Number> limit_number = Select<Number>(\n       IsUndefined(limit), [=] { return NumberConstant(kMaxUInt32); },\n       [=] { return ToUint32(context, limit); });\n   Node* const separator_string = ToString_Inline(context, separator);\n \n-  // Shortcut for {limit} == 0.\n-  {\n-    Label next(this);\n-    GotoIfNot(SmiEqual(limit_number, smi_zero), &next);\n-\n-    const ElementsKind kind = PACKED_ELEMENTS;\n-    Node* const native_context = LoadNativeContext(context);\n-    Node* const array_map = LoadJSArrayElementsMap(kind, native_context);\n-\n-    Node* const length = smi_zero;\n-    Node* const capacity = IntPtrConstant(0);\n-    Node* const result = AllocateJSArray(kind, array_map, capacity, length);\n-\n-    args.PopAndReturn(result);\n+  Label return_empty_array(this);\n \n-    BIND(&next);\n-  }\n+  // Shortcut for {limit} == 0.\n+  GotoIf(WordEqual<Object, Object>(limit_number, smi_zero),\n+         &return_empty_array);\n \n   // ECMA-262 says that if {separator} is undefined, the result should\n   // be an array of size 1 containing the entire string.\n@@ -1801,12 +1947,14 @@ TF_BUILTIN(StringPrototypeSplit, StringBuiltinsAssembler) {\n   // If the separator string is empty then return the elements in the subject.\n   {\n     Label next(this);\n-    GotoIfNot(SmiEqual(LoadStringLengthAsSmi(separator_string), SmiConstant(0)),\n+    GotoIfNot(SmiEqual(LoadStringLengthAsSmi(separator_string), smi_zero),\n               &next);\n \n-    Node* const result = CallRuntime(Runtime::kStringToArray, context,\n-                                     subject_string, limit_number);\n-    args.PopAndReturn(result);\n+    TNode<Smi> subject_length = LoadStringLengthAsSmi(subject_string);\n+    GotoIf(SmiEqual(subject_length, smi_zero), &return_empty_array);\n+\n+    args.PopAndReturn(\n+        StringToArray(context, subject_string, subject_length, limit_number));\n \n     BIND(&next);\n   }\n@@ -1815,6 +1963,19 @@ TF_BUILTIN(StringPrototypeSplit, StringBuiltinsAssembler) {\n       CallRuntime(Runtime::kStringSplit, context, subject_string,\n                   separator_string, limit_number);\n   args.PopAndReturn(result);\n+\n+  BIND(&return_empty_array);\n+  {\n+    const ElementsKind kind = PACKED_ELEMENTS;\n+    Node* const native_context = LoadNativeContext(context);\n+    Node* const array_map = LoadJSArrayElementsMap(kind, native_context);\n+\n+    Node* const length = smi_zero;\n+    Node* const capacity = IntPtrConstant(0);\n+    Node* const result = AllocateJSArray(kind, array_map, capacity, length);\n+\n+    args.PopAndReturn(result);\n+  }\n }\n \n // ES6 #sec-string.prototype.substr\n@@ -1887,7 +2048,7 @@ TF_BUILTIN(StringPrototypeSubstr, StringBuiltinsAssembler) {\n     // two cases according to the spec: if it is negative, \"\" is returned; if\n     // it is positive, then length is set to {string_length} - {start}.\n \n-    CSA_ASSERT(this, IsHeapNumber(var_length.value()));\n+    CSA_ASSERT(this, IsHeapNumber(CAST(var_length.value())));\n \n     Label if_isnegative(this), if_ispositive(this);\n     TNode<Float64T> const float_zero = Float64Constant(0.);\n@@ -1989,34 +2150,34 @@ TF_BUILTIN(StringPrototypeSubstring, StringBuiltinsAssembler) {\n \n   Label out(this);\n \n-  VARIABLE(var_start, MachineRepresentation::kTagged);\n-  VARIABLE(var_end, MachineRepresentation::kTagged);\n+  TVARIABLE(Smi, var_start);\n+  TVARIABLE(Smi, var_end);\n \n   // Check that {receiver} is coercible to Object and convert it to a String.\n   TNode<String> const string =\n       ToThisString(context, receiver, \"String.prototype.substring\");\n \n-  Node* const length = LoadStringLengthAsSmi(string);\n+  TNode<Smi> const length = LoadStringLengthAsSmi(string);\n \n   // Conversion and bounds-checks for {start}.\n-  var_start.Bind(ToSmiBetweenZeroAnd(context, start, length));\n+  var_start = ToSmiBetweenZeroAnd(context, start, length);\n \n   // Conversion and bounds-checks for {end}.\n   {\n-    var_end.Bind(length);\n+    var_end = length;\n     GotoIf(IsUndefined(end), &out);\n \n-    var_end.Bind(ToSmiBetweenZeroAnd(context, end, length));\n+    var_end = ToSmiBetweenZeroAnd(context, end, length);\n \n     Label if_endislessthanstart(this);\n     Branch(SmiLessThan(var_end.value(), var_start.value()),\n            &if_endislessthanstart, &out);\n \n     BIND(&if_endislessthanstart);\n     {\n-      Node* const tmp = var_end.value();\n-      var_end.Bind(var_start.value());\n-      var_start.Bind(tmp);\n+      TNode<Smi> const tmp = var_end.value();\n+      var_end = var_start.value();\n+      var_start = tmp;\n       Goto(&out);\n     }\n   }"
        },
        {
            "sha": "c3dd543a98e34bd54803a82445f3f1326e245865",
            "filename": "deps/v8/src/builtins/builtins-string-gen.h",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -74,12 +74,17 @@ class StringBuiltinsAssembler : public CodeStubAssembler {\n   void StringIndexOf(Node* const subject_string, Node* const search_string,\n                      Node* const position, std::function<void(Node*)> f_return);\n \n-  Node* IndexOfDollarChar(Node* const context, Node* const string);\n+  TNode<Smi> IndexOfDollarChar(Node* const context, Node* const string);\n+\n+  TNode<JSArray> StringToArray(TNode<Context> context,\n+                               TNode<String> subject_string,\n+                               TNode<Smi> subject_length,\n+                               TNode<Number> limit_number);\n \n   void RequireObjectCoercible(Node* const context, Node* const value,\n                               const char* method_name);\n \n-  Node* SmiIsNegative(Node* const value) {\n+  TNode<BoolT> SmiIsNegative(TNode<Smi> value) {\n     return SmiLessThan(value, SmiConstant(0));\n   }\n \n@@ -102,6 +107,9 @@ class StringBuiltinsAssembler : public CodeStubAssembler {\n                                  Handle<Symbol> symbol,\n                                  const NodeFunction0& regexp_call,\n                                  const NodeFunction1& generic_call);\n+\n+  void Generate_StringAdd(StringAddFlags flags, PretenureFlag pretenure_flag,\n+                          Node* context, Node* left, Node* right);\n };\n \n class StringIncludesIndexOfAssembler : public StringBuiltinsAssembler {"
        },
        {
            "sha": "5412beb9bdad6890731d2155536162bfcacfcf7b",
            "filename": "deps/v8/src/builtins/builtins-test-gen.h",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-test-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-test-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-test-gen.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -0,0 +1,22 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_BUILTINS_BUILTINS_TEST_GEN_H_\n+#define V8_BUILTINS_BUILTINS_TEST_GEN_H_\n+\n+#include \"torque-generated/builtins-base-from-dsl-gen.h\"\n+\n+namespace v8 {\n+namespace internal {\n+\n+class TestBuiltinsAssembler : public BaseBuiltinsFromDSLAssembler {\n+ public:\n+  explicit TestBuiltinsAssembler(compiler::CodeAssemblerState* state)\n+      : BaseBuiltinsFromDSLAssembler(state) {}\n+};\n+\n+}  // namespace internal\n+}  // namespace v8\n+\n+#endif  // V8_BUILTINS_BUILTINS_TEST_GEN_H_"
        },
        {
            "sha": "a10c1363387db8a3923e3909cbf7cf512f2d296f",
            "filename": "deps/v8/src/builtins/builtins-trace.cc",
            "status": "removed",
            "additions": 0,
            "deletions": 191,
            "changes": 191,
            "blob_url": "https://github.com/nodejs/node/blob/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-trace.cc",
            "raw_url": "https://github.com/nodejs/node/raw/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-trace.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-trace.cc?ref=4d94bb2b1f72b6b612983a517a39c5545724a3ad",
            "patch": "@@ -1,191 +0,0 @@\n-// Copyright 2018 the V8 project authors. All rights reserved.\n-// Use of this source code is governed by a BSD-style license that can be\n-// found in the LICENSE file.\n-\n-#include \"src/api.h\"\n-#include \"src/builtins/builtins-utils.h\"\n-#include \"src/builtins/builtins.h\"\n-#include \"src/counters.h\"\n-#include \"src/json-stringifier.h\"\n-#include \"src/objects-inl.h\"\n-\n-namespace v8 {\n-namespace internal {\n-\n-namespace {\n-\n-using v8::tracing::TracedValue;\n-\n-#define MAX_STACK_LENGTH 100\n-\n-class MaybeUtf8 {\n- public:\n-  explicit MaybeUtf8(Isolate* isolate, Handle<String> string) : buf_(data_) {\n-    string = String::Flatten(string);\n-    int len;\n-    if (string->IsOneByteRepresentation()) {\n-      // Technically this allows unescaped latin1 characters but the trace\n-      // events mechanism currently does the same and the current consuming\n-      // tools are tolerant of it. A more correct approach here would be to\n-      // escape non-ascii characters but this is easier and faster.\n-      len = string->length();\n-      AllocateSufficientSpace(len);\n-      if (len > 0) {\n-        // Why copy? Well, the trace event mechanism requires null-terminated\n-        // strings, the bytes we get from SeqOneByteString are not. buf_ is\n-        // guaranteed to be null terminated.\n-        memcpy(buf_, Handle<SeqOneByteString>::cast(string)->GetChars(), len);\n-      }\n-    } else {\n-      Local<v8::String> local = Utils::ToLocal(string);\n-      len = local->Utf8Length();\n-      AllocateSufficientSpace(len);\n-      if (len > 0) {\n-        local->WriteUtf8(reinterpret_cast<char*>(buf_));\n-      }\n-    }\n-    buf_[len] = 0;\n-  }\n-  const char* operator*() const { return reinterpret_cast<const char*>(buf_); }\n-\n- private:\n-  void AllocateSufficientSpace(int len) {\n-    if (len + 1 > MAX_STACK_LENGTH) {\n-      allocated_.reset(new uint8_t[len + 1]);\n-      buf_ = allocated_.get();\n-    }\n-  }\n-\n-  // In the most common cases, the buffer here will be stack allocated.\n-  // A heap allocation will only occur if the data is more than MAX_STACK_LENGTH\n-  // Given that this is used primarily for trace event categories and names,\n-  // the MAX_STACK_LENGTH should be more than enough.\n-  uint8_t* buf_;\n-  uint8_t data_[MAX_STACK_LENGTH];\n-  std::unique_ptr<uint8_t> allocated_;\n-};\n-\n-class JsonTraceValue : public ConvertableToTraceFormat {\n- public:\n-  explicit JsonTraceValue(Isolate* isolate, Handle<String> object) {\n-    // object is a JSON string serialized using JSON.stringify() from within\n-    // the BUILTIN(Trace) method. This may (likely) contain UTF8 values so\n-    // to grab the appropriate buffer data we have to serialize it out. We\n-    // hold on to the bits until the AppendAsTraceFormat method is called.\n-    MaybeUtf8 data(isolate, object);\n-    data_ = *data;\n-  }\n-\n-  void AppendAsTraceFormat(std::string* out) const override { *out += data_; }\n-\n- private:\n-  std::string data_;\n-};\n-\n-const uint8_t* GetCategoryGroupEnabled(Isolate* isolate,\n-                                       Handle<String> string) {\n-  MaybeUtf8 category(isolate, string);\n-  return TRACE_EVENT_API_GET_CATEGORY_GROUP_ENABLED(*category);\n-}\n-\n-#undef MAX_STACK_LENGTH\n-\n-}  // namespace\n-\n-// Builins::kIsTraceCategoryEnabled(category) : bool\n-BUILTIN(IsTraceCategoryEnabled) {\n-  HandleScope scope(isolate);\n-  Handle<Object> category = args.atOrUndefined(isolate, 1);\n-  if (!category->IsString()) {\n-    THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewTypeError(MessageTemplate::kTraceEventCategoryError));\n-  }\n-  return isolate->heap()->ToBoolean(\n-      *GetCategoryGroupEnabled(isolate, Handle<String>::cast(category)));\n-}\n-\n-// Builtins::kTrace(phase, category, name, id, data) : bool\n-BUILTIN(Trace) {\n-  HandleScope handle_scope(isolate);\n-\n-  Handle<Object> phase_arg = args.atOrUndefined(isolate, 1);\n-  Handle<Object> category = args.atOrUndefined(isolate, 2);\n-  Handle<Object> name_arg = args.atOrUndefined(isolate, 3);\n-  Handle<Object> id_arg = args.atOrUndefined(isolate, 4);\n-  Handle<Object> data_arg = args.atOrUndefined(isolate, 5);\n-\n-  const uint8_t* category_group_enabled =\n-      GetCategoryGroupEnabled(isolate, Handle<String>::cast(category));\n-\n-  // Exit early if the category group is not enabled.\n-  if (!*category_group_enabled) {\n-    return isolate->heap()->false_value();\n-  }\n-\n-  if (!phase_arg->IsNumber()) {\n-    THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewTypeError(MessageTemplate::kTraceEventPhaseError));\n-  }\n-  if (!category->IsString()) {\n-    THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewTypeError(MessageTemplate::kTraceEventCategoryError));\n-  }\n-  if (!name_arg->IsString()) {\n-    THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewTypeError(MessageTemplate::kTraceEventNameError));\n-  }\n-\n-  uint32_t flags = TRACE_EVENT_FLAG_COPY;\n-  int32_t id = 0;\n-  if (!id_arg->IsNullOrUndefined(isolate)) {\n-    if (!id_arg->IsNumber()) {\n-      THROW_NEW_ERROR_RETURN_FAILURE(\n-          isolate, NewTypeError(MessageTemplate::kTraceEventIDError));\n-    }\n-    flags |= TRACE_EVENT_FLAG_HAS_ID;\n-    id = DoubleToInt32(id_arg->Number());\n-  }\n-\n-  Handle<String> name_str = Handle<String>::cast(name_arg);\n-  if (name_str->length() == 0) {\n-    THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewTypeError(MessageTemplate::kTraceEventNameLengthError));\n-  }\n-  MaybeUtf8 name(isolate, name_str);\n-\n-  // We support passing one additional trace event argument with the\n-  // name \"data\". Any JSON serializable value may be passed.\n-  static const char* arg_name = \"data\";\n-  int32_t num_args = 0;\n-  uint8_t arg_type;\n-  uint64_t arg_value;\n-\n-  if (!data_arg->IsUndefined(isolate)) {\n-    // Serializes the data argument as a JSON string, which is then\n-    // copied into an object. This eliminates duplicated code but\n-    // could have perf costs. It is also subject to all the same\n-    // limitations as JSON.stringify() as it relates to circular\n-    // references and value limitations (e.g. BigInt is not supported).\n-    JsonStringifier stringifier(isolate);\n-    Handle<Object> result;\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-        isolate, result,\n-        stringifier.Stringify(data_arg, isolate->factory()->undefined_value(),\n-                              isolate->factory()->undefined_value()));\n-    std::unique_ptr<JsonTraceValue> traced_value;\n-    traced_value.reset(\n-        new JsonTraceValue(isolate, Handle<String>::cast(result)));\n-    tracing::SetTraceValue(std::move(traced_value), &arg_type, &arg_value);\n-    num_args++;\n-  }\n-\n-  TRACE_EVENT_API_ADD_TRACE_EVENT(\n-      static_cast<char>(DoubleToInt32(phase_arg->Number())),\n-      category_group_enabled, *name, tracing::kGlobalScope, id, tracing::kNoId,\n-      num_args, &arg_name, &arg_type, &arg_value, flags);\n-\n-  return isolate->heap()->true_value();\n-}\n-\n-}  // namespace internal\n-}  // namespace v8"
        },
        {
            "sha": "2abde8e126d93cb9cf76778d97b85bfef1ea9760",
            "filename": "deps/v8/src/builtins/builtins-typed-array-gen.cc",
            "status": "renamed",
            "additions": 205,
            "deletions": 108,
            "changes": 313,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-typedarray-gen.h\"\n+#include \"src/builtins/builtins-typed-array-gen.h\"\n \n #include \"src/builtins/builtins-constructor-gen.h\"\n #include \"src/builtins/builtins-iterator-gen.h\"\n@@ -122,6 +122,8 @@ TF_BUILTIN(TypedArrayInitialize, TypedArrayBuiltinsAssembler) {\n   TNode<Smi> length = CAST(Parameter(Descriptor::kLength));\n   TNode<Smi> element_size = CAST(Parameter(Descriptor::kElementSize));\n   Node* initialize = Parameter(Descriptor::kInitialize);\n+  TNode<JSReceiver> buffer_constructor =\n+      CAST(Parameter(Descriptor::kBufferConstructor));\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   CSA_ASSERT(this, TaggedIsPositiveSmi(length));\n@@ -135,6 +137,7 @@ TF_BUILTIN(TypedArrayInitialize, TypedArrayBuiltinsAssembler) {\n \n   Label setup_holder(this), allocate_on_heap(this), aligned(this),\n       allocate_elements(this), allocate_off_heap(this),\n+      allocate_off_heap_custom_constructor(this),\n       allocate_off_heap_no_init(this), attach_buffer(this), done(this);\n   TVARIABLE(IntPtrT, var_total_size);\n \n@@ -144,8 +147,15 @@ TF_BUILTIN(TypedArrayInitialize, TypedArrayBuiltinsAssembler) {\n   SetupTypedArray(holder, length, byte_offset, byte_length);\n \n   TNode<Map> fixed_typed_map = LoadMapForType(holder);\n+\n+  // If target and new_target for the buffer differ, allocate off-heap.\n+  TNode<JSFunction> default_constructor = CAST(LoadContextElement(\n+      LoadNativeContext(context), Context::ARRAY_BUFFER_FUN_INDEX));\n+  GotoIfNot(WordEqual(buffer_constructor, default_constructor),\n+            &allocate_off_heap_custom_constructor);\n+\n+  // For buffers with byte_length over the threshold, allocate off-heap.\n   GotoIf(TaggedIsNotSmi(byte_length), &allocate_off_heap);\n-  // The goto above ensures that byte_length is a Smi.\n   TNode<Smi> smi_byte_length = CAST(byte_length);\n   GotoIf(SmiGreaterThan(smi_byte_length,\n                         SmiConstant(V8_TYPED_ARRAY_MAX_SIZE_IN_HEAP)),\n@@ -195,8 +205,10 @@ TF_BUILTIN(TypedArrayInitialize, TypedArrayBuiltinsAssembler) {\n     StoreObjectField(holder, JSArrayBufferView::kBufferOffset, buffer);\n \n     // Check the alignment.\n-    GotoIf(SmiEqual(SmiMod(element_size, SmiConstant(kObjectAlignment)),\n-                    SmiConstant(0)),\n+    // TODO(ishell): remove <Object, Object>\n+    GotoIf(WordEqual<Object, Object>(\n+               SmiMod(element_size, SmiConstant(kObjectAlignment)),\n+               SmiConstant(0)),\n            &aligned);\n \n     // Fix alignment if needed.\n@@ -247,8 +259,7 @@ TF_BUILTIN(TypedArrayInitialize, TypedArrayBuiltinsAssembler) {\n     Node* backing_store = IntPtrAdd(BitcastTaggedToWord(elements),\n                                     IntPtrConstant(fta_base_data_offset));\n     // Call out to memset to perform initialization.\n-    Node* memset =\n-        ExternalConstant(ExternalReference::libc_memset_function(isolate()));\n+    Node* memset = ExternalConstant(ExternalReference::libc_memset_function());\n     CallCFunction3(MachineType::AnyTagged(), MachineType::Pointer(),\n                    MachineType::IntPtr(), MachineType::UintPtr(), memset,\n                    backing_store, IntPtrConstant(0), word_byte_length);\n@@ -260,11 +271,17 @@ TF_BUILTIN(TypedArrayInitialize, TypedArrayBuiltinsAssembler) {\n   BIND(&allocate_off_heap);\n   {\n     GotoIf(IsFalse(initialize), &allocate_off_heap_no_init);\n-\n-    Node* buffer_constructor = LoadContextElement(\n-        LoadNativeContext(context), Context::ARRAY_BUFFER_FUN_INDEX);\n     var_buffer = CAST(ConstructJS(CodeFactory::Construct(isolate()), context,\n-                                  buffer_constructor, byte_length));\n+                                  default_constructor, byte_length));\n+    Goto(&attach_buffer);\n+  }\n+\n+  BIND(&allocate_off_heap_custom_constructor);\n+  {\n+    var_buffer =\n+        CAST(CallStub(CodeFactory::Construct(isolate()), context,\n+                      default_constructor, buffer_constructor, Int32Constant(1),\n+                      UndefinedConstant(), byte_length));\n     Goto(&attach_buffer);\n   }\n \n@@ -310,8 +327,10 @@ void TypedArrayBuiltinsAssembler::ConstructByLength(TNode<Context> context,\n   GotoIf(SmiLessThan(smi_converted_length, SmiConstant(0)), &invalid_length);\n \n   Node* initialize = TrueConstant();\n+  TNode<JSFunction> default_constructor = CAST(LoadContextElement(\n+      LoadNativeContext(context), Context::ARRAY_BUFFER_FUN_INDEX));\n   CallBuiltin(Builtins::kTypedArrayInitialize, context, holder,\n-              converted_length, element_size, initialize);\n+              converted_length, element_size, initialize, default_constructor);\n   Goto(&done);\n \n   BIND(&invalid_length);\n@@ -350,10 +369,12 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayBuffer(\n   // Check that the offset is a multiple of the element size.\n   BIND(&offset_is_smi);\n   {\n-    GotoIf(SmiEqual(offset.value(), SmiConstant(0)), &check_length);\n-    GotoIf(SmiLessThan(offset.value(), SmiConstant(0)), &invalid_length);\n-    Node* remainder = SmiMod(offset.value(), element_size);\n-    Branch(SmiEqual(remainder, SmiConstant(0)), &check_length,\n+    TNode<Smi> smi_offset = CAST(offset.value());\n+    GotoIf(SmiEqual(smi_offset, SmiConstant(0)), &check_length);\n+    GotoIf(SmiLessThan(smi_offset, SmiConstant(0)), &invalid_length);\n+    TNode<Number> remainder = SmiMod(smi_offset, element_size);\n+    // TODO(ishell): remove <Object, Object>\n+    Branch(WordEqual<Object, Object>(remainder, SmiConstant(0)), &check_length,\n            &start_offset_error);\n   }\n   BIND(&offset_not_smi);\n@@ -507,14 +528,7 @@ void TypedArrayBuiltinsAssembler::ConstructByTypedArray(\n   BIND(&construct);\n   {\n     ConstructByArrayLike(context, holder, typed_array, source_length.value(),\n-                         element_size);\n-    TNode<Object> proto = GetProperty(context, buffer_constructor.value(),\n-                                      PrototypeStringConstant());\n-    // TODO(petermarshall): Correct for realm as per 9.1.14 step 4.\n-    TNode<JSArrayBuffer> buffer = LoadObjectField<JSArrayBuffer>(\n-        holder, JSArrayBufferView::kBufferOffset);\n-    CallRuntime(Runtime::kInternalSetPrototype, context, buffer, proto);\n-\n+                         element_size, buffer_constructor.value());\n     Goto(&done);\n   }\n \n@@ -554,20 +568,28 @@ TNode<BoolT> TypedArrayBuiltinsAssembler::ByteLengthIsValid(\n void TypedArrayBuiltinsAssembler::ConstructByArrayLike(\n     TNode<Context> context, TNode<JSTypedArray> holder,\n     TNode<HeapObject> array_like, TNode<Object> initial_length,\n-    TNode<Smi> element_size) {\n-  Node* initialize = FalseConstant();\n-\n-  Label invalid_length(this), fill(this), fast_copy(this), done(this);\n+    TNode<Smi> element_size, TNode<JSReceiver> buffer_constructor) {\n+  Label invalid_length(this, Label::kDeferred), fill(this), fast_copy(this),\n+      detached_check(this), done(this), detached_error(this, Label::kDeferred);\n \n   // The caller has looked up length on array_like, which is observable.\n   TNode<Smi> length = ToSmiLength(initial_length, context, &invalid_length);\n \n+  Node* initialize = FalseConstant();\n   CallBuiltin(Builtins::kTypedArrayInitialize, context, holder, length,\n-              element_size, initialize);\n-  GotoIf(SmiNotEqual(length, SmiConstant(0)), &fill);\n-  Goto(&done);\n+              element_size, initialize, buffer_constructor);\n+\n+  GotoIf(IsJSTypedArray(array_like), &detached_check);\n+  Goto(&fill);\n+\n+  BIND(&detached_check);\n+  GotoIf(IsDetachedBuffer(\n+             LoadObjectField(array_like, JSTypedArray::kBufferOffset)),\n+         &detached_error);\n+  Goto(&fill);\n \n   BIND(&fill);\n+  GotoIf(SmiEqual(length, SmiConstant(0)), &done);\n   TNode<Int32T> holder_kind = LoadMapElementsKind(LoadMap(holder));\n   TNode<Int32T> source_kind = LoadMapElementsKind(LoadMap(array_like));\n   GotoIf(Word32Equal(holder_kind, source_kind), &fast_copy);\n@@ -597,14 +619,16 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayLike(\n                          byte_length_intptr,\n                          IntPtrConstant(FixedTypedArrayBase::kMaxByteLength)));\n \n-    Node* memcpy =\n-        ExternalConstant(ExternalReference::libc_memcpy_function(isolate()));\n+    Node* memcpy = ExternalConstant(ExternalReference::libc_memcpy_function());\n     CallCFunction3(MachineType::AnyTagged(), MachineType::Pointer(),\n                    MachineType::Pointer(), MachineType::UintPtr(), memcpy,\n                    holder_data_ptr, source_data_ptr, byte_length_intptr);\n     Goto(&done);\n   }\n \n+  BIND(&detached_error);\n+  { ThrowTypeError(context, MessageTemplate::kDetachedOperation, \"Construct\"); }\n+\n   BIND(&invalid_length);\n   {\n     ThrowRangeError(context, MessageTemplate::kInvalidTypedArrayLength,\n@@ -616,16 +640,19 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayLike(\n \n void TypedArrayBuiltinsAssembler::ConstructByIterable(\n     TNode<Context> context, TNode<JSTypedArray> holder,\n-    TNode<JSReceiver> iterable, TNode<Object> iterator_fn,\n+    TNode<JSReceiver> iterable, TNode<JSReceiver> iterator_fn,\n     TNode<Smi> element_size) {\n-  CSA_ASSERT(this, IsCallable(iterator_fn));\n   Label fast_path(this), slow_path(this), done(this);\n+  CSA_ASSERT(this, IsCallable(iterator_fn));\n \n   TNode<JSArray> array_like = CAST(\n       CallBuiltin(Builtins::kIterableToList, context, iterable, iterator_fn));\n   TNode<Object> initial_length = LoadJSArrayLength(array_like);\n+\n+  TNode<JSFunction> default_constructor = CAST(LoadContextElement(\n+      LoadNativeContext(context), Context::ARRAY_BUFFER_FUN_INDEX));\n   ConstructByArrayLike(context, holder, array_like, initial_length,\n-                       element_size);\n+                       element_size, default_constructor);\n }\n \n TF_BUILTIN(TypedArrayBaseConstructor, TypedArrayBuiltinsAssembler) {\n@@ -657,9 +684,10 @@ TF_BUILTIN(CreateTypedArray, TypedArrayBuiltinsAssembler) {\n       SmiTag(GetTypedArrayElementSize(LoadElementsKind(result)));\n \n   GotoIf(TaggedIsSmi(arg1), &if_arg1isnumber);\n-  GotoIf(IsJSArrayBuffer(arg1), &if_arg1isbuffer);\n-  GotoIf(IsJSTypedArray(arg1), &if_arg1istypedarray);\n-  GotoIf(IsJSReceiver(arg1), &if_arg1isreceiver);\n+  TNode<HeapObject> arg1_heap_object = UncheckedCast<HeapObject>(arg1);\n+  GotoIf(IsJSArrayBuffer(arg1_heap_object), &if_arg1isbuffer);\n+  GotoIf(IsJSTypedArray(arg1_heap_object), &if_arg1istypedarray);\n+  GotoIf(IsJSReceiver(arg1_heap_object), &if_arg1isreceiver);\n   Goto(&if_arg1isnumber);\n \n   // https://tc39.github.io/ecma262/#sec-typedarray-buffer-byteoffset-length\n@@ -673,7 +701,7 @@ TF_BUILTIN(CreateTypedArray, TypedArrayBuiltinsAssembler) {\n   // https://tc39.github.io/ecma262/#sec-typedarray-typedarray\n   BIND(&if_arg1istypedarray);\n   {\n-    TNode<JSTypedArray> typed_array = CAST(arg1);\n+    TNode<JSTypedArray> typed_array = CAST(arg1_heap_object);\n     ConstructByTypedArray(context, result, typed_array, element_size);\n     Goto(&return_result);\n   }\n@@ -683,23 +711,26 @@ TF_BUILTIN(CreateTypedArray, TypedArrayBuiltinsAssembler) {\n   {\n     Label if_iteratorundefined(this), if_iteratornotcallable(this);\n     // Get iterator symbol\n-    TNode<Object> iteratorFn =\n-        CAST(GetMethod(context, arg1, isolate()->factory()->iterator_symbol(),\n-                       &if_iteratorundefined));\n+    TNode<Object> iteratorFn = CAST(GetMethod(\n+        context, arg1_heap_object, isolate()->factory()->iterator_symbol(),\n+        &if_iteratorundefined));\n     GotoIf(TaggedIsSmi(iteratorFn), &if_iteratornotcallable);\n-    GotoIfNot(IsCallable(iteratorFn), &if_iteratornotcallable);\n+    GotoIfNot(IsCallable(CAST(iteratorFn)), &if_iteratornotcallable);\n \n-    ConstructByIterable(context, result, CAST(arg1), iteratorFn, element_size);\n+    ConstructByIterable(context, result, CAST(arg1_heap_object),\n+                        CAST(iteratorFn), element_size);\n     Goto(&return_result);\n \n     BIND(&if_iteratorundefined);\n     {\n-      TNode<HeapObject> array_like = CAST(arg1);\n+      TNode<HeapObject> array_like = arg1_heap_object;\n       TNode<Object> initial_length =\n           GetProperty(context, arg1, LengthStringConstant());\n \n+      TNode<JSFunction> default_constructor = CAST(LoadContextElement(\n+          LoadNativeContext(context), Context::ARRAY_BUFFER_FUN_INDEX));\n       ConstructByArrayLike(context, result, array_like, initial_length,\n-                           element_size);\n+                           element_size, default_constructor);\n       Goto(&return_result);\n     }\n \n@@ -750,7 +781,8 @@ TF_BUILTIN(TypedArrayConstructor, TypedArrayBuiltinsAssembler) {\n \n   BIND(&throwtypeerror);\n   {\n-    Node* name = CallRuntime(Runtime::kGetFunctionName, context, target);\n+    TNode<String> name =\n+        CAST(CallRuntime(Runtime::kGetFunctionName, context, target));\n     ThrowTypeError(context, MessageTemplate::kConstructorNotFunction, name);\n   }\n }\n@@ -841,6 +873,42 @@ TNode<IntPtrT> TypedArrayBuiltinsAssembler::GetTypedArrayElementSize(\n   return element_size.value();\n }\n \n+TF_BUILTIN(TypedArrayLoadElementAsTagged, TypedArrayBuiltinsAssembler) {\n+  TVARIABLE(Object, result);\n+  TNode<JSTypedArray> array = CAST(Parameter(Descriptor::kArray));\n+  TNode<Smi> kind = CAST(Parameter(Descriptor::kKind));\n+  TNode<Smi> index_node = CAST(Parameter(Descriptor::kIndex));\n+\n+  TNode<RawPtrT> data_pointer = UncheckedCast<RawPtrT>(LoadDataPtr(array));\n+  TNode<Int32T> elements_kind = SmiToInt32(kind);\n+\n+  DispatchTypedArrayByElementsKind(\n+      elements_kind, [&](ElementsKind el_kind, int, int) {\n+        result = CAST(LoadFixedTypedArrayElementAsTagged(\n+            data_pointer, index_node, el_kind, SMI_PARAMETERS));\n+      });\n+\n+  Return(result.value());\n+}\n+\n+TF_BUILTIN(TypedArrayStoreElementFromTagged, TypedArrayBuiltinsAssembler) {\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<JSTypedArray> array = CAST(Parameter(Descriptor::kArray));\n+  TNode<Smi> kind = CAST(Parameter(Descriptor::kKind));\n+  TNode<Smi> index_node = CAST(Parameter(Descriptor::kIndex));\n+  TNode<Object> value = CAST(Parameter(Descriptor::kValue));\n+\n+  TNode<FixedTypedArrayBase> elements = CAST(LoadElements(array));\n+  TNode<Int32T> elements_kind = SmiToInt32(kind);\n+\n+  DispatchTypedArrayByElementsKind(\n+      elements_kind, [&](ElementsKind el_kind, int, int) {\n+        StoreFixedTypedArrayElementFromTagged(context, elements, index_node,\n+                                              value, el_kind, SMI_PARAMETERS);\n+      });\n+  Return(UndefinedConstant());\n+}\n+\n TNode<Object> TypedArrayBuiltinsAssembler::GetDefaultConstructor(\n     TNode<Context> context, TNode<JSTypedArray> exemplar) {\n   TVARIABLE(IntPtrT, context_slot);\n@@ -899,9 +967,8 @@ TNode<JSTypedArray> TypedArrayBuiltinsAssembler::SpeciesCreateByLength(\n   CSA_ASSERT(this, TaggedIsPositiveSmi(len));\n \n   // Let constructor be ? SpeciesConstructor(exemplar, defaultConstructor).\n-  TNode<Object> constructor = TypedArraySpeciesConstructor(context, exemplar);\n-  CSA_ASSERT(this, IsJSFunction(constructor));\n-\n+  TNode<HeapObject> constructor =\n+      CAST(TypedArraySpeciesConstructor(context, exemplar));\n   return CreateByLength(context, constructor, len, method_name);\n }\n \n@@ -1097,7 +1164,7 @@ void TypedArrayBuiltinsAssembler::CallCMemmove(TNode<IntPtrT> dest_ptr,\n                                                TNode<IntPtrT> src_ptr,\n                                                TNode<IntPtrT> byte_length) {\n   TNode<ExternalReference> memmove =\n-      ExternalConstant(ExternalReference::libc_memmove_function(isolate()));\n+      ExternalConstant(ExternalReference::libc_memmove_function());\n   CallCFunction3(MachineType::AnyTagged(), MachineType::Pointer(),\n                  MachineType::Pointer(), MachineType::UintPtr(), memmove,\n                  dest_ptr, src_ptr, byte_length);\n@@ -1111,8 +1178,7 @@ void TypedArrayBuiltinsAssembler::\n                                                    TNode<IntPtrT> offset) {\n   CSA_ASSERT(this, Word32Not(IsBigInt64ElementsKind(LoadElementsKind(dest))));\n   TNode<ExternalReference> f = ExternalConstant(\n-      ExternalReference::copy_fast_number_jsarray_elements_to_typed_array(\n-          isolate()));\n+      ExternalReference::copy_fast_number_jsarray_elements_to_typed_array());\n   CallCFunction5(MachineType::AnyTagged(), MachineType::AnyTagged(),\n                  MachineType::AnyTagged(), MachineType::AnyTagged(),\n                  MachineType::UintPtr(), MachineType::UintPtr(), f, context,\n@@ -1123,7 +1189,7 @@ void TypedArrayBuiltinsAssembler::CallCCopyTypedArrayElementsToTypedArray(\n     TNode<JSTypedArray> source, TNode<JSTypedArray> dest,\n     TNode<IntPtrT> source_length, TNode<IntPtrT> offset) {\n   TNode<ExternalReference> f = ExternalConstant(\n-      ExternalReference::copy_typed_array_elements_to_typed_array(isolate()));\n+      ExternalReference::copy_typed_array_elements_to_typed_array());\n   CallCFunction4(MachineType::AnyTagged(), MachineType::AnyTagged(),\n                  MachineType::AnyTagged(), MachineType::UintPtr(),\n                  MachineType::UintPtr(), f, source, dest, source_length,\n@@ -1133,8 +1199,8 @@ void TypedArrayBuiltinsAssembler::CallCCopyTypedArrayElementsToTypedArray(\n void TypedArrayBuiltinsAssembler::CallCCopyTypedArrayElementsSlice(\n     TNode<JSTypedArray> source, TNode<JSTypedArray> dest, TNode<IntPtrT> start,\n     TNode<IntPtrT> end) {\n-  TNode<ExternalReference> f = ExternalConstant(\n-      ExternalReference::copy_typed_array_elements_slice(isolate()));\n+  TNode<ExternalReference> f =\n+      ExternalConstant(ExternalReference::copy_typed_array_elements_slice());\n   CallCFunction4(MachineType::AnyTagged(), MachineType::AnyTagged(),\n                  MachineType::AnyTagged(), MachineType::UintPtr(),\n                  MachineType::UintPtr(), f, source, dest, start, end);\n@@ -1180,6 +1246,27 @@ void TypedArrayBuiltinsAssembler::DispatchTypedArrayByElementsKind(\n   BIND(&next);\n }\n \n+TNode<BoolT> TypedArrayBuiltinsAssembler::NumberIsNaN(TNode<Number> value) {\n+  Label is_heapnumber(this), done(this);\n+  TVARIABLE(BoolT, result);\n+\n+  GotoIf(TaggedIsNotSmi(value), &is_heapnumber);\n+  result = Int32FalseConstant();\n+  Goto(&done);\n+\n+  BIND(&is_heapnumber);\n+  {\n+    CSA_ASSERT(this, IsHeapNumber(CAST(value)));\n+\n+    TNode<Float64T> value_f = LoadHeapNumberValue(CAST(value));\n+    result = Float64NotEqual(value_f, value_f);\n+    Goto(&done);\n+  }\n+\n+  BIND(&done);\n+  return result.value();\n+}\n+\n // ES #sec-get-%typedarray%.prototype.set\n TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n@@ -1195,7 +1282,7 @@ TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n   // Check the receiver is a typed array.\n   TNode<Object> receiver = args.GetReceiver();\n   GotoIf(TaggedIsSmi(receiver), &if_receiver_is_not_typedarray);\n-  GotoIfNot(IsJSTypedArray(receiver), &if_receiver_is_not_typedarray);\n+  GotoIfNot(IsJSTypedArray(CAST(receiver)), &if_receiver_is_not_typedarray);\n \n   // Normalize offset argument (using ToInteger) and handle heap number cases.\n   TNode<Object> offset = args.GetOptionalArgumentValue(1, SmiConstant(0));\n@@ -1221,7 +1308,7 @@ TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n   Label call_runtime(this);\n   TNode<Object> source = args.GetOptionalArgumentValue(0);\n   GotoIf(TaggedIsSmi(source), &call_runtime);\n-  GotoIf(IsJSTypedArray(source), &if_source_is_typed_array);\n+  GotoIf(IsJSTypedArray(CAST(source)), &if_source_is_typed_array);\n   BranchIfFastJSArray(source, context, &if_source_is_fast_jsarray,\n                       &call_runtime);\n \n@@ -1495,16 +1582,16 @@ TF_BUILTIN(TypedArrayPrototypeToStringTag, TypedArrayBuiltinsAssembler) {\n }\n \n void TypedArrayBuiltinsAssembler::GenerateTypedArrayPrototypeIterationMethod(\n-    Node* context, Node* receiver, const char* method_name,\n+    TNode<Context> context, TNode<Object> receiver, const char* method_name,\n     IterationKind kind) {\n   Label throw_bad_receiver(this, Label::kDeferred);\n \n   GotoIf(TaggedIsSmi(receiver), &throw_bad_receiver);\n-  GotoIfNot(IsJSTypedArray(receiver), &throw_bad_receiver);\n+  GotoIfNot(IsJSTypedArray(CAST(receiver)), &throw_bad_receiver);\n \n   // Check if the {receiver}'s JSArrayBuffer was neutered.\n-  Node* receiver_buffer =\n-      LoadObjectField(receiver, JSTypedArray::kBufferOffset);\n+  TNode<JSArrayBuffer> receiver_buffer = LoadObjectField<JSArrayBuffer>(\n+      CAST(receiver), JSTypedArray::kBufferOffset);\n   Label if_receiverisneutered(this, Label::kDeferred);\n   GotoIf(IsDetachedBuffer(receiver_buffer), &if_receiverisneutered);\n \n@@ -1519,26 +1606,26 @@ void TypedArrayBuiltinsAssembler::GenerateTypedArrayPrototypeIterationMethod(\n \n // ES #sec-%typedarray%.prototype.values\n TF_BUILTIN(TypedArrayPrototypeValues, TypedArrayBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   GenerateTypedArrayPrototypeIterationMethod(context, receiver,\n                                              \"%TypedArray%.prototype.values()\",\n                                              IterationKind::kValues);\n }\n \n // ES #sec-%typedarray%.prototype.entries\n TF_BUILTIN(TypedArrayPrototypeEntries, TypedArrayBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   GenerateTypedArrayPrototypeIterationMethod(context, receiver,\n                                              \"%TypedArray%.prototype.entries()\",\n                                              IterationKind::kEntries);\n }\n \n // ES #sec-%typedarray%.prototype.keys\n TF_BUILTIN(TypedArrayPrototypeKeys, TypedArrayBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   GenerateTypedArrayPrototypeIterationMethod(\n       context, receiver, \"%TypedArray%.prototype.keys()\", IterationKind::kKeys);\n }\n@@ -1561,7 +1648,7 @@ TF_BUILTIN(TypedArrayOf, TypedArrayBuiltinsAssembler) {\n   // 4. If IsConstructor(C) is false, throw a TypeError exception.\n   TNode<Object> receiver = args.GetReceiver();\n   GotoIf(TaggedIsSmi(receiver), &if_not_constructor);\n-  GotoIfNot(IsConstructor(receiver), &if_not_constructor);\n+  GotoIfNot(IsConstructor(CAST(receiver)), &if_not_constructor);\n \n   // 5. Let newObj be ? TypedArrayCreate(C, len).\n   TNode<JSTypedArray> new_typed_array =\n@@ -1621,6 +1708,46 @@ TF_BUILTIN(TypedArrayOf, TypedArrayBuiltinsAssembler) {\n                  \"%TypedArray%.of\");\n }\n \n+void TypedArrayBuiltinsAssembler::IterableToListSlowPath(\n+    TNode<Context> context, TNode<Object> iterable, TNode<Object> iterator_fn,\n+    Variable* created_list) {\n+  IteratorBuiltinsAssembler iterator_assembler(state());\n+\n+  // 1. Let iteratorRecord be ? GetIterator(items, method).\n+  IteratorRecord iterator_record =\n+      iterator_assembler.GetIterator(context, iterable, iterator_fn);\n+\n+  // 2. Let values be a new empty List.\n+  GrowableFixedArray values(state());\n+\n+  Variable* vars[] = {values.var_array(), values.var_length(),\n+                      values.var_capacity()};\n+  Label loop_start(this, 3, vars), loop_end(this);\n+  Goto(&loop_start);\n+  // 3. Let next be true.\n+  // 4. Repeat, while next is not false\n+  BIND(&loop_start);\n+  {\n+    //  a. Set next to ? IteratorStep(iteratorRecord).\n+    TNode<Object> next = CAST(\n+        iterator_assembler.IteratorStep(context, iterator_record, &loop_end));\n+    //  b. If next is not false, then\n+    //   i. Let nextValue be ? IteratorValue(next).\n+    TNode<Object> next_value =\n+        CAST(iterator_assembler.IteratorValue(context, next));\n+    //   ii. Append nextValue to the end of the List values.\n+    values.Push(next_value);\n+    Goto(&loop_start);\n+  }\n+  BIND(&loop_end);\n+\n+  // 5. Return values.\n+  TNode<JSArray> js_array_values = values.ToJSArray(context);\n+  created_list->Bind(js_array_values);\n+}\n+\n+// This builtin always returns a new JSArray and is thus safe to use even in the\n+// presence of code that may call back into user-JS.\n TF_BUILTIN(IterableToList, TypedArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> iterable = CAST(Parameter(Descriptor::kIterable));\n@@ -1631,53 +1758,23 @@ TF_BUILTIN(IterableToList, TypedArrayBuiltinsAssembler) {\n   TVARIABLE(JSArray, created_list);\n \n   // This is a fast-path for ignoring the iterator.\n-  // TODO(petermarshall): Port to CSA.\n+  // TODO(petermarshall): Port IterableToListCanBeElided to CSA.\n   Node* elided =\n       CallRuntime(Runtime::kIterableToListCanBeElided, context, iterable);\n   CSA_ASSERT(this, IsBoolean(elided));\n   Branch(IsTrue(elided), &fast_path, &slow_path);\n \n   BIND(&fast_path);\n   {\n-    created_list = CAST(iterable);\n+    TNode<JSArray> input_array = CAST(iterable);\n+    TNode<JSArray> new_array = CAST(CloneFastJSArray(context, input_array));\n+    created_list = new_array;\n     Goto(&done);\n   }\n \n   BIND(&slow_path);\n   {\n-    IteratorBuiltinsAssembler iterator_assembler(state());\n-\n-    // 1. Let iteratorRecord be ? GetIterator(items, method).\n-    IteratorRecord iterator_record =\n-        iterator_assembler.GetIterator(context, iterable, iterator_fn);\n-\n-    // 2. Let values be a new empty List.\n-    GrowableFixedArray values(state());\n-\n-    Variable* vars[] = {values.var_array(), values.var_length(),\n-                        values.var_capacity()};\n-    Label loop_start(this, 3, vars), loop_end(this);\n-    Goto(&loop_start);\n-    // 3. Let next be true.\n-    // 4. Repeat, while next is not false\n-    BIND(&loop_start);\n-    {\n-      //  a. Set next to ? IteratorStep(iteratorRecord).\n-      TNode<Object> next = CAST(\n-          iterator_assembler.IteratorStep(context, iterator_record, &loop_end));\n-      //  b. If next is not false, then\n-      //   i. Let nextValue be ? IteratorValue(next).\n-      TNode<Object> next_value =\n-          CAST(iterator_assembler.IteratorValue(context, next));\n-      //   ii. Append nextValue to the end of the List values.\n-      values.Push(next_value);\n-      Goto(&loop_start);\n-    }\n-    BIND(&loop_end);\n-\n-    // 5. Return values.\n-    TNode<JSArray> js_array_values = values.ToJSArray(context);\n-    created_list = js_array_values;\n+    IterableToListSlowPath(context, iterable, iterator_fn, &created_list);\n     Goto(&done);\n   }\n \n@@ -1707,7 +1804,7 @@ TF_BUILTIN(TypedArrayFrom, TypedArrayBuiltinsAssembler) {\n   // 2. If IsConstructor(C) is false, throw a TypeError exception.\n   TNode<Object> receiver = args.GetReceiver();\n   GotoIf(TaggedIsSmi(receiver), &if_not_constructor);\n-  GotoIfNot(IsConstructor(receiver), &if_not_constructor);\n+  GotoIfNot(IsConstructor(CAST(receiver)), &if_not_constructor);\n \n   // 3. If mapfn is present and mapfn is not undefined, then\n   TNode<Object> map_fn = args.GetOptionalArgumentValue(1);\n@@ -1718,7 +1815,7 @@ TF_BUILTIN(TypedArrayFrom, TypedArrayBuiltinsAssembler) {\n   //  b. Let mapping be true.\n   // 4. Else, let mapping be false.\n   GotoIf(TaggedIsSmi(map_fn), &if_map_fn_not_callable);\n-  GotoIfNot(IsCallable(map_fn), &if_map_fn_not_callable);\n+  GotoIfNot(IsCallable(CAST(map_fn)), &if_map_fn_not_callable);\n   mapping = Int32TrueConstant();\n   Goto(&check_iterator);\n \n@@ -1741,7 +1838,7 @@ TF_BUILTIN(TypedArrayFrom, TypedArrayBuiltinsAssembler) {\n         CAST(GetMethod(context, source, isolate()->factory()->iterator_symbol(),\n                        &from_array_like));\n     GotoIf(TaggedIsSmi(iterator_fn), &if_iterator_fn_not_callable);\n-    GotoIfNot(IsCallable(iterator_fn), &if_iterator_fn_not_callable);\n+    GotoIfNot(IsCallable(CAST(iterator_fn)), &if_iterator_fn_not_callable);\n \n     // We are using the iterator.\n     Label if_length_not_smi(this, Label::kDeferred);\n@@ -1888,7 +1985,7 @@ TF_BUILTIN(TypedArrayPrototypeFilter, TypedArrayBuiltinsAssembler) {\n   // 4. If IsCallable(callbackfn) is false, throw a TypeError exception.\n   TNode<Object> callbackfn = args.GetOptionalArgumentValue(0);\n   GotoIf(TaggedIsSmi(callbackfn), &if_callback_not_callable);\n-  GotoIfNot(IsCallable(callbackfn), &if_callback_not_callable);\n+  GotoIfNot(IsCallable(CAST(callbackfn)), &if_callback_not_callable);\n \n   // 5. If thisArg is present, let T be thisArg; else let T be undefined.\n   TNode<Object> this_arg = args.GetOptionalArgumentValue(1);",
            "previous_filename": "deps/v8/src/builtins/builtins-typedarray-gen.cc"
        },
        {
            "sha": "6464ce70a4dd1458dc5fc3ca64bbbde36f4afaef",
            "filename": "deps/v8/src/builtins/builtins-typed-array-gen.h",
            "status": "renamed",
            "additions": 26,
            "deletions": 6,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -2,8 +2,8 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#ifndef V8_BUILTINS_BUILTINS_TYPEDARRAY_GEN_H_\n-#define V8_BUILTINS_BUILTINS_TYPEDARRAY_GEN_H_\n+#ifndef V8_BUILTINS_BUILTINS_TYPED_ARRAY_GEN_H_\n+#define V8_BUILTINS_BUILTINS_TYPED_ARRAY_GEN_H_\n \n #include \"src/code-stub-assembler.h\"\n \n@@ -24,7 +24,8 @@ class TypedArrayBuiltinsAssembler : public CodeStubAssembler {\n   void GenerateTypedArrayPrototypeGetter(Node* context, Node* receiver,\n                                          const char* method_name,\n                                          int object_offset);\n-  void GenerateTypedArrayPrototypeIterationMethod(Node* context, Node* receiver,\n+  void GenerateTypedArrayPrototypeIterationMethod(TNode<Context> context,\n+                                                  TNode<Object> receiver,\n                                                   const char* method_name,\n                                                   IterationKind iteration_kind);\n \n@@ -41,17 +42,23 @@ class TypedArrayBuiltinsAssembler : public CodeStubAssembler {\n   void ConstructByArrayLike(TNode<Context> context, TNode<JSTypedArray> holder,\n                             TNode<HeapObject> array_like,\n                             TNode<Object> initial_length,\n-                            TNode<Smi> element_size);\n+                            TNode<Smi> element_size,\n+                            TNode<JSReceiver> buffer_constructor);\n   void ConstructByIterable(TNode<Context> context, TNode<JSTypedArray> holder,\n                            TNode<JSReceiver> iterable,\n-                           TNode<Object> iterator_fn, TNode<Smi> element_size);\n+                           TNode<JSReceiver> iterator_fn,\n+                           TNode<Smi> element_size);\n \n   void SetupTypedArray(TNode<JSTypedArray> holder, TNode<Smi> length,\n                        TNode<Number> byte_offset, TNode<Number> byte_length);\n   void AttachBuffer(TNode<JSTypedArray> holder, TNode<JSArrayBuffer> buffer,\n                     TNode<Map> map, TNode<Smi> length,\n                     TNode<Number> byte_offset);\n \n+  void IterableToListSlowPath(TNode<Context> context, TNode<Object> iterable,\n+                              TNode<Object> iterator_fn,\n+                              Variable* created_list);\n+\n   TNode<Map> LoadMapForType(TNode<JSTypedArray> array);\n   TNode<UintPtrT> CalculateExternalPointer(TNode<UintPtrT> backing_store,\n                                            TNode<Number> byte_offset);\n@@ -70,6 +77,15 @@ class TypedArrayBuiltinsAssembler : public CodeStubAssembler {\n   // Returns the byte size of an element for a TypedArray elements kind.\n   TNode<IntPtrT> GetTypedArrayElementSize(TNode<Word32T> elements_kind);\n \n+  TNode<Smi> LoadTypedArrayLength(TNode<JSTypedArray> typed_array) {\n+    return LoadObjectField<Smi>(typed_array, JSTypedArray::kLengthOffset);\n+  }\n+\n+  TNode<JSArrayBuffer> LoadTypedArrayBuffer(TNode<JSTypedArray> typed_array) {\n+    return LoadObjectField<JSArrayBuffer>(typed_array,\n+                                          JSTypedArray::kBufferOffset);\n+  }\n+\n   TNode<Object> GetDefaultConstructor(TNode<Context> context,\n                                       TNode<JSTypedArray> exemplar);\n \n@@ -125,9 +141,13 @@ class TypedArrayBuiltinsAssembler : public CodeStubAssembler {\n \n   void DispatchTypedArrayByElementsKind(\n       TNode<Word32T> elements_kind, const TypedArraySwitchCase& case_function);\n+\n+  // Returns true iff number is NaN.\n+  // TOOD(szuend): Remove when UncheckedCasts are supported in Torque.\n+  TNode<BoolT> NumberIsNaN(TNode<Number> number);\n };\n \n }  // namespace internal\n }  // namespace v8\n \n-#endif  // V8_BUILTINS_BUILTINS_TYPEDARRAY_GEN_H_\n+#endif  // V8_BUILTINS_BUILTINS_TYPED_ARRAY_GEN_H_",
            "previous_filename": "deps/v8/src/builtins/builtins-typedarray-gen.h"
        },
        {
            "sha": "6fcc279c66303b4ef30cddf2588b2b31f5181c12",
            "filename": "deps/v8/src/builtins/builtins-typed-array.cc",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "previous_filename": "deps/v8/src/builtins/builtins-typedarray.cc"
        },
        {
            "sha": "d4ca442d7a2ae39fe42bfd8b687c48e410b34f53",
            "filename": "deps/v8/src/builtins/builtins.cc",
            "status": "modified",
            "additions": 28,
            "deletions": 355,
            "changes": 383,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -40,11 +40,11 @@ struct BuiltinMetadata {\n                               { FUNCTION_ADDR(Builtin_##Name) }},\n #ifdef V8_TARGET_BIG_ENDIAN\n #define DECL_TFJ(Name, Count, ...) { #Name, Builtins::TFJ, \\\n-  { reinterpret_cast<Address>(static_cast<uintptr_t>(      \\\n+  { static_cast<Address>(static_cast<uintptr_t>(           \\\n                               Count) << (kBitsPerByte * (kPointerSize - 1))) }},\n #else\n #define DECL_TFJ(Name, Count, ...) { #Name, Builtins::TFJ, \\\n-                              { reinterpret_cast<Address>(Count) }},\n+                              { static_cast<Address>(Count) }},\n #endif\n #define DECL_TFC(Name, ...) { #Name, Builtins::TFC, {} },\n #define DECL_TFS(Name, ...) { #Name, Builtins::TFS, {} },\n@@ -91,7 +91,7 @@ void Builtins::IterateBuiltins(RootVisitor* v) {\n   }\n }\n \n-const char* Builtins::Lookup(byte* pc) {\n+const char* Builtins::Lookup(Address pc) {\n   // may be called during initialization (disassembler!)\n   if (initialized_) {\n     for (int i = 0; i < builtin_count; i++) {\n@@ -254,6 +254,18 @@ bool Builtins::IsLazy(int index) {\n     case kArraySomeLoopLazyDeoptContinuation:\n     case kAsyncGeneratorAwaitCaught:            // https://crbug.com/v8/6786.\n     case kAsyncGeneratorAwaitUncaught:          // https://crbug.com/v8/6786.\n+    // CEntry variants must be immovable, whereas lazy deserialization allocates\n+    // movable code.\n+    case kCEntry_Return1_DontSaveFPRegs_ArgvOnStack_NoBuiltinExit:\n+    case kCEntry_Return1_DontSaveFPRegs_ArgvOnStack_BuiltinExit:\n+    case kCEntry_Return1_DontSaveFPRegs_ArgvInRegister_NoBuiltinExit:\n+    case kCEntry_Return1_SaveFPRegs_ArgvOnStack_NoBuiltinExit:\n+    case kCEntry_Return1_SaveFPRegs_ArgvOnStack_BuiltinExit:\n+    case kCEntry_Return2_DontSaveFPRegs_ArgvOnStack_NoBuiltinExit:\n+    case kCEntry_Return2_DontSaveFPRegs_ArgvOnStack_BuiltinExit:\n+    case kCEntry_Return2_DontSaveFPRegs_ArgvInRegister_NoBuiltinExit:\n+    case kCEntry_Return2_SaveFPRegs_ArgvOnStack_NoBuiltinExit:\n+    case kCEntry_Return2_SaveFPRegs_ArgvOnStack_BuiltinExit:\n     case kCompileLazy:\n     case kDebugBreakTrampoline:\n     case kDeserializeLazy:\n@@ -290,352 +302,19 @@ bool Builtins::IsLazy(int index) {\n // static\n bool Builtins::IsIsolateIndependent(int index) {\n   DCHECK(IsBuiltinId(index));\n-  switch (index) {\n-#ifdef DEBUG\n-    case kAbortJS:\n-    case kContinueToCodeStubBuiltin:\n-    case kContinueToCodeStubBuiltinWithResult:\n-    case kContinueToJavaScriptBuiltin:\n-    case kContinueToJavaScriptBuiltinWithResult:\n-    case kKeyedLoadIC_Slow:\n-    case kKeyedStoreIC_Slow:\n-    case kLoadGlobalIC_Slow:\n-    case kLoadIC_Slow:\n-    case kStoreGlobalIC_Slow:\n-    case kWasmStackGuard:\n-    case kThrowWasmTrapUnreachable:\n-    case kThrowWasmTrapMemOutOfBounds:\n-    case kThrowWasmTrapDivByZero:\n-    case kThrowWasmTrapDivUnrepresentable:\n-    case kThrowWasmTrapRemByZero:\n-    case kThrowWasmTrapFloatUnrepresentable:\n-    case kThrowWasmTrapFuncInvalid:\n-    case kThrowWasmTrapFuncSigMismatch:\n-#else\n-    case kAbortJS:\n-    case kAdd:\n-    case kAllocateHeapNumber:\n-    case kArrayEvery:\n-    case kArrayEveryLoopContinuation:\n-    case kArrayEveryLoopEagerDeoptContinuation:\n-    case kArrayEveryLoopLazyDeoptContinuation:\n-    case kArrayFilterLoopEagerDeoptContinuation:\n-    case kArrayFilterLoopLazyDeoptContinuation:\n-    case kArrayFindIndexLoopAfterCallbackLazyDeoptContinuation:\n-    case kArrayFindIndexLoopContinuation:\n-    case kArrayFindIndexLoopEagerDeoptContinuation:\n-    case kArrayFindIndexLoopLazyDeoptContinuation:\n-    case kArrayFindLoopAfterCallbackLazyDeoptContinuation:\n-    case kArrayFindLoopContinuation:\n-    case kArrayFindLoopEagerDeoptContinuation:\n-    case kArrayFindLoopLazyDeoptContinuation:\n-    case kArrayForEach:\n-    case kArrayForEachLoopContinuation:\n-    case kArrayForEachLoopEagerDeoptContinuation:\n-    case kArrayForEachLoopLazyDeoptContinuation:\n-    case kArrayFrom:\n-    case kArrayIncludes:\n-    case kArrayIndexOf:\n-    case kArrayIsArray:\n-    case kArrayMapLoopContinuation:\n-    case kArrayMapLoopEagerDeoptContinuation:\n-    case kArrayMapLoopLazyDeoptContinuation:\n-    case kArrayOf:\n-    case kArrayPrototypeEntries:\n-    case kArrayPrototypeFind:\n-    case kArrayPrototypeFindIndex:\n-    case kArrayPrototypeKeys:\n-    case kArrayPrototypeSlice:\n-    case kArrayPrototypeValues:\n-    case kArrayReduce:\n-    case kArrayReduceLoopContinuation:\n-    case kArrayReduceLoopEagerDeoptContinuation:\n-    case kArrayReduceLoopLazyDeoptContinuation:\n-    case kArrayReducePreLoopEagerDeoptContinuation:\n-    case kArrayReduceRight:\n-    case kArrayReduceRightLoopContinuation:\n-    case kArrayReduceRightLoopEagerDeoptContinuation:\n-    case kArrayReduceRightLoopLazyDeoptContinuation:\n-    case kArrayReduceRightPreLoopEagerDeoptContinuation:\n-    case kArraySome:\n-    case kArraySomeLoopContinuation:\n-    case kArraySomeLoopEagerDeoptContinuation:\n-    case kArraySomeLoopLazyDeoptContinuation:\n-    case kAsyncFromSyncIteratorPrototypeNext:\n-    case kAsyncFromSyncIteratorPrototypeReturn:\n-    case kAsyncFromSyncIteratorPrototypeThrow:\n-    case kAsyncFunctionAwaitCaught:\n-    case kAsyncFunctionPromiseCreate:\n-    case kAsyncFunctionPromiseRelease:\n-    case kAsyncGeneratorResumeNext:\n-    case kAsyncGeneratorReturnClosedRejectClosure:\n-    case kAsyncGeneratorReturn:\n-    case kAsyncIteratorValueUnwrap:\n-    case kBitwiseNot:\n-    case kBooleanPrototypeToString:\n-    case kBooleanPrototypeValueOf:\n-    case kContinueToCodeStubBuiltin:\n-    case kContinueToCodeStubBuiltinWithResult:\n-    case kContinueToJavaScriptBuiltin:\n-    case kContinueToJavaScriptBuiltinWithResult:\n-    case kCreateGeneratorObject:\n-    case kCreateIterResultObject:\n-    case kCreateRegExpLiteral:\n-    case kDatePrototypeGetDate:\n-    case kDatePrototypeGetDay:\n-    case kDatePrototypeGetFullYear:\n-    case kDatePrototypeGetHours:\n-    case kDatePrototypeGetMilliseconds:\n-    case kDatePrototypeGetMinutes:\n-    case kDatePrototypeGetMonth:\n-    case kDatePrototypeGetSeconds:\n-    case kDatePrototypeGetTime:\n-    case kDatePrototypeGetTimezoneOffset:\n-    case kDatePrototypeGetUTCDate:\n-    case kDatePrototypeGetUTCDay:\n-    case kDatePrototypeGetUTCFullYear:\n-    case kDatePrototypeGetUTCHours:\n-    case kDatePrototypeGetUTCMilliseconds:\n-    case kDatePrototypeGetUTCMinutes:\n-    case kDatePrototypeGetUTCMonth:\n-    case kDatePrototypeGetUTCSeconds:\n-    case kDatePrototypeToPrimitive:\n-    case kDatePrototypeValueOf:\n-    case kDecrement:\n-    case kDeleteProperty:\n-    case kDivide:\n-    case kEqual:\n-    case kFastConsoleAssert:\n-    case kFastNewClosure:\n-    case kFastNewFunctionContextEval:\n-    case kFastNewFunctionContextFunction:\n-    case kFastNewObject:\n-    case kFindOrderedHashMapEntry:\n-    case kForInEnumerate:\n-    case kForInFilter:\n-    case kFunctionPrototypeHasInstance:\n-    case kGeneratorPrototypeNext:\n-    case kGeneratorPrototypeReturn:\n-    case kGeneratorPrototypeThrow:\n-    case kGetSuperConstructor:\n-    case kGlobalIsFinite:\n-    case kGlobalIsNaN:\n-    case kGreaterThan:\n-    case kGreaterThanOrEqual:\n-    case kHasProperty:\n-    case kIncrement:\n-    case kInstanceOf:\n-    case kKeyedLoadIC_Megamorphic:\n-    case kKeyedLoadIC_PolymorphicName:\n-    case kKeyedLoadIC_Slow:\n-    case kKeyedLoadICTrampoline:\n-    case kKeyedStoreIC_Slow:\n-    case kKeyedStoreICTrampoline:\n-    case kLessThan:\n-    case kLessThanOrEqual:\n-    case kLoadField:\n-    case kLoadGlobalIC:\n-    case kLoadGlobalICInsideTypeof:\n-    case kLoadGlobalICInsideTypeofTrampoline:\n-    case kLoadGlobalIC_Slow:\n-    case kLoadGlobalICTrampoline:\n-    case kLoadIC:\n-    case kLoadIC_FunctionPrototype:\n-    case kLoadIC_Noninlined:\n-    case kLoadIC_Slow:\n-    case kLoadIC_StringLength:\n-    case kLoadIC_StringWrapperLength:\n-    case kLoadICTrampoline:\n-    case kLoadIC_Uninitialized:\n-    case kMapPrototypeEntries:\n-    case kMapPrototypeForEach:\n-    case kMapPrototypeGet:\n-    case kMapPrototypeGetSize:\n-    case kMapPrototypeHas:\n-    case kMapPrototypeKeys:\n-    case kMapPrototypeValues:\n-    case kMathCeil:\n-    case kMathFloor:\n-    case kMathFround:\n-    case kMathMax:\n-    case kMathMin:\n-    case kMathRound:\n-    case kMathSign:\n-    case kMathSqrt:\n-    case kMathTrunc:\n-    case kMultiply:\n-    case kNegate:\n-    case kNewArgumentsElements:\n-    case kNonNumberToNumber:\n-    case kNonNumberToNumeric:\n-    case kNonPrimitiveToPrimitive_Default:\n-    case kNonPrimitiveToPrimitive_Number:\n-    case kNonPrimitiveToPrimitive_String:\n-    case kNumberIsFinite:\n-    case kNumberIsInteger:\n-    case kNumberIsNaN:\n-    case kNumberIsSafeInteger:\n-    case kNumberParseFloat:\n-    case kNumberPrototypeValueOf:\n-    case kNumberToString:\n-    case kObjectConstructor:\n-    case kObjectCreate:\n-    case kObjectIs:\n-    case kObjectKeys:\n-    case kObjectPrototypeHasOwnProperty:\n-    case kObjectPrototypeIsPrototypeOf:\n-    case kObjectPrototypeToLocaleString:\n-    case kObjectPrototypeToString:\n-    case kObjectPrototypeValueOf:\n-    case kOrderedHashTableHealIndex:\n-    case kOrdinaryHasInstance:\n-    case kOrdinaryToPrimitive_Number:\n-    case kOrdinaryToPrimitive_String:\n-    case kPromiseCapabilityDefaultReject:\n-    case kPromiseCapabilityDefaultResolve:\n-    case kPromiseCatchFinally:\n-    case kPromiseConstructor:\n-    case kPromiseConstructorLazyDeoptContinuation:\n-    case kPromiseFulfillReactionJob:\n-    case kPromiseInternalConstructor:\n-    case kPromiseInternalReject:\n-    case kPromiseInternalResolve:\n-    case kPromisePrototypeCatch:\n-    case kPromisePrototypeFinally:\n-    case kPromiseRace:\n-    case kPromiseReject:\n-    case kPromiseRejectReactionJob:\n-    case kPromiseResolve:\n-    case kPromiseResolveThenableJob:\n-    case kPromiseResolveTrampoline:\n-    case kPromiseThenFinally:\n-    case kPromiseThrowerFinally:\n-    case kPromiseValueThunkFinally:\n-    case kProxyGetProperty:\n-    case kProxyHasProperty:\n-    case kProxySetProperty:\n-    case kReflectHas:\n-    case kRegExpConstructor:\n-    case kRegExpPrototypeCompile:\n-    case kRegExpPrototypeDotAllGetter:\n-    case kRegExpPrototypeFlagsGetter:\n-    case kRegExpPrototypeGlobalGetter:\n-    case kRegExpPrototypeIgnoreCaseGetter:\n-    case kRegExpPrototypeMultilineGetter:\n-    case kRegExpPrototypeReplace:\n-    case kRegExpPrototypeSearch:\n-    case kRegExpPrototypeSourceGetter:\n-    case kRegExpPrototypeSplit:\n-    case kRegExpPrototypeStickyGetter:\n-    case kRegExpPrototypeUnicodeGetter:\n-    case kResolvePromise:\n-    case kReturnReceiver:\n-    case kRunMicrotasks:\n-    case kSameValue:\n-    case kSetPrototypeEntries:\n-    case kSetPrototypeForEach:\n-    case kSetPrototypeGetSize:\n-    case kSetPrototypeHas:\n-    case kSetPrototypeValues:\n-    case kStoreGlobalIC_Slow:\n-    case kStoreGlobalICTrampoline:\n-    case kStoreICTrampoline:\n-    case kStrictEqual:\n-    case kStringCodePointAtUTF16:\n-    case kStringCodePointAtUTF32:\n-    case kStringEqual:\n-    case kStringGreaterThan:\n-    case kStringGreaterThanOrEqual:\n-    case kStringIndexOf:\n-    case kStringLessThan:\n-    case kStringLessThanOrEqual:\n-    case kStringPrototypeAnchor:\n-    case kStringPrototypeBig:\n-    case kStringPrototypeBlink:\n-    case kStringPrototypeBold:\n-    case kStringPrototypeCharCodeAt:\n-    case kStringPrototypeCodePointAt:\n-    case kStringPrototypeConcat:\n-    case kStringPrototypeFixed:\n-    case kStringPrototypeFontcolor:\n-    case kStringPrototypeFontsize:\n-    case kStringPrototypeIncludes:\n-    case kStringPrototypeIndexOf:\n-    case kStringPrototypeItalics:\n-    case kStringPrototypeIterator:\n-    case kStringPrototypeLink:\n-    case kStringPrototypeMatch:\n-    case kStringPrototypePadEnd:\n-    case kStringPrototypePadStart:\n-    case kStringPrototypeRepeat:\n-    case kStringPrototypeReplace:\n-    case kStringPrototypeSearch:\n-    case kStringPrototypeSmall:\n-    case kStringPrototypeStrike:\n-    case kStringPrototypeSub:\n-    case kStringPrototypeSup:\n-#ifdef V8_INTL_SUPPORT\n-    case kStringPrototypeToLowerCaseIntl:\n-    case kStringToLowerCaseIntl:\n-#endif\n-    case kStringPrototypeToString:\n-    case kStringPrototypeValueOf:\n-    case kStringRepeat:\n-    case kStringToNumber:\n-    case kSubtract:\n-    case kSymbolPrototypeToPrimitive:\n-    case kSymbolPrototypeToString:\n-    case kSymbolPrototypeValueOf:\n-    case kThrowWasmTrapDivByZero:\n-    case kThrowWasmTrapDivUnrepresentable:\n-    case kThrowWasmTrapFloatUnrepresentable:\n-    case kThrowWasmTrapFuncInvalid:\n-    case kThrowWasmTrapFuncSigMismatch:\n-    case kThrowWasmTrapMemOutOfBounds:\n-    case kThrowWasmTrapRemByZero:\n-    case kThrowWasmTrapUnreachable:\n-    case kToBoolean:\n-    case kToBooleanLazyDeoptContinuation:\n-    case kToInteger:\n-    case kToInteger_TruncateMinusZero:\n-    case kToName:\n-    case kToNumber:\n-    case kToNumeric:\n-    case kToString:\n-    case kTypedArrayConstructor:\n-    case kTypedArrayPrototypeByteLength:\n-    case kTypedArrayPrototypeByteOffset:\n-    case kTypedArrayPrototypeEntries:\n-    case kTypedArrayPrototypeEvery:\n-    case kTypedArrayPrototypeFind:\n-    case kTypedArrayPrototypeFindIndex:\n-    case kTypedArrayPrototypeForEach:\n-    case kTypedArrayPrototypeKeys:\n-    case kTypedArrayPrototypeLength:\n-    case kTypedArrayPrototypeReduce:\n-    case kTypedArrayPrototypeReduceRight:\n-    case kTypedArrayPrototypeSet:\n-    case kTypedArrayPrototypeSlice:\n-    case kTypedArrayPrototypeSome:\n-    case kTypedArrayPrototypeSubArray:\n-    case kTypedArrayPrototypeToStringTag:\n-    case kTypedArrayPrototypeValues:\n-    case kTypeof:\n-    case kWasmStackGuard:\n-    case kWeakMapGet:\n-    case kWeakMapHas:\n-    case kWeakMapLookupHashIndex:\n-    case kWeakMapPrototypeDelete:\n-    case kWeakMapPrototypeSet:\n-    case kWeakSetHas:\n-    case kWeakSetPrototypeAdd:\n-    case kWeakSetPrototypeDelete:\n-#endif  // !DEBUG\n-      return true;\n-    default:\n-      return false;\n-  }\n-  UNREACHABLE();\n+  // TODO(jgruber): There's currently two blockers for moving\n+  // InterpreterEntryTrampoline into the binary:\n+  // 1. InterpreterEnterBytecode calculates a pointer into the middle of\n+  //    InterpreterEntryTrampoline (see interpreter_entry_return_pc_offset).\n+  //    When the builtin is embedded, the pointer would need to be calculated\n+  //    at an offset from the embedded instruction stream (instead of the\n+  //    trampoline code object).\n+  // 2. We create distinct copies of the trampoline to make it possible to\n+  //    attribute ticks in the interpreter to individual JS functions.\n+  //    See https://crrev.com/c/959081 and InstallBytecodeArray. When the\n+  //    trampoline is embedded, we need to ensure that CopyCode creates a copy\n+  //    of the builtin itself (and not just the trampoline).\n+  return index != kInterpreterEntryTrampoline;\n }\n \n #ifdef V8_EMBEDDED_BUILTINS\n@@ -696,12 +375,6 @@ bool Builtins::HasCppImplementation(int index) {\n   return (kind == CPP || kind == API);\n }\n \n-Handle<Code> Builtins::JSConstructStubGeneric() {\n-  return FLAG_harmony_restrict_constructor_return\n-             ? builtin_handle(kJSConstructStubGenericRestrictedReturn)\n-             : builtin_handle(kJSConstructStubGenericUnrestrictedReturn);\n-}\n-\n // static\n bool Builtins::AllowDynamicFunction(Isolate* isolate, Handle<JSFunction> target,\n                                     Handle<JSObject> target_global_proxy) {"
        },
        {
            "sha": "4cb091492db486e8833c55c5500eb3dfca16b2b9",
            "filename": "deps/v8/src/builtins/builtins.h",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -39,7 +39,7 @@ class Builtins {\n   void IterateBuiltins(RootVisitor* v);\n \n   // Disassembler support.\n-  const char* Lookup(byte* pc);\n+  const char* Lookup(Address pc);\n \n   enum Name : int32_t {\n #define DEF_ENUM(Name, ...) k##Name,\n@@ -143,6 +143,10 @@ class Builtins {\n   static void Generate_Adaptor(MacroAssembler* masm, Address builtin_address,\n                                ExitFrameType exit_frame_type);\n \n+  static void Generate_CEntry(MacroAssembler* masm, int result_size,\n+                              SaveFPRegsMode save_doubles, ArgvMode argv_mode,\n+                              bool builtin_exit_frame);\n+\n   static bool AllowDynamicFunction(Isolate* isolate, Handle<JSFunction> target,\n                                    Handle<JSObject> target_global_proxy);\n "
        },
        {
            "sha": "d9805834caf695181b41b10cb372f8a74b029df0",
            "filename": "deps/v8/src/builtins/constants-table-builder.cc",
            "status": "modified",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -38,6 +38,7 @@ uint32_t BuiltinsConstantsTableBuilder::AddObject(Handle<Object> object) {\n \n   uint32_t* maybe_key = map_.Find(object);\n   if (maybe_key == nullptr) {\n+    DCHECK(object->IsHeapObject());\n     uint32_t index = map_.size();\n     map_.Set(object, index);\n     return index;\n@@ -46,6 +47,37 @@ uint32_t BuiltinsConstantsTableBuilder::AddObject(Handle<Object> object) {\n   }\n }\n \n+void BuiltinsConstantsTableBuilder::PatchSelfReference(\n+    Handle<Object> self_reference, Handle<Code> code_object) {\n+#ifdef DEBUG\n+  // Roots must not be inserted into the constants table as they are already\n+  // accessibly from the root list.\n+  Heap::RootListIndex root_list_index;\n+  DCHECK(!isolate_->heap()->IsRootHandle(code_object, &root_list_index));\n+\n+  // Not yet finalized.\n+  DCHECK_EQ(isolate_->heap()->empty_fixed_array(),\n+            isolate_->heap()->builtins_constants_table());\n+\n+  DCHECK(isolate_->serializer_enabled());\n+\n+  DCHECK(self_reference->IsOddball());\n+  DCHECK(Oddball::cast(*self_reference)->kind() ==\n+         Oddball::kSelfReferenceMarker);\n+\n+  // During indirection generation, we always create a distinct marker for each\n+  // macro assembler. The canonical marker is only used when not generating a\n+  // snapshot.\n+  DCHECK(*self_reference != isolate_->heap()->self_reference_marker());\n+#endif\n+\n+  uint32_t key;\n+  if (map_.Delete(self_reference, &key)) {\n+    DCHECK(code_object->IsCode());\n+    map_.Set(code_object, key);\n+  }\n+}\n+\n void BuiltinsConstantsTableBuilder::Finalize() {\n   HandleScope handle_scope(isolate_);\n \n@@ -69,13 +101,15 @@ void BuiltinsConstantsTableBuilder::Finalize() {\n       // builtin.\n       value = builtins->builtin(Code::cast(value)->builtin_index());\n     }\n+    DCHECK(value->IsHeapObject());\n     table->set(index, value);\n   }\n \n #ifdef DEBUG\n   for (int i = 0; i < map_.size(); i++) {\n     DCHECK(table->get(i)->IsHeapObject());\n     DCHECK_NE(isolate_->heap()->undefined_value(), table->get(i));\n+    DCHECK_NE(isolate_->heap()->self_reference_marker(), table->get(i));\n   }\n #endif\n "
        },
        {
            "sha": "12644d49642665d1fda778b72d98aedb5d9fb202",
            "filename": "deps/v8/src/builtins/constants-table-builder.h",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -28,6 +28,12 @@ class BuiltinsConstantsTableBuilder final {\n   // object, possibly adding the object to the table. Objects are deduplicated.\n   uint32_t AddObject(Handle<Object> object);\n \n+  // Self-references during code generation start out by referencing a handle\n+  // with a temporary dummy object. Once the final Code object exists, such\n+  // entries in the constants map must be patched up.\n+  void PatchSelfReference(Handle<Object> self_reference,\n+                          Handle<Code> code_object);\n+\n   // Should be called after all affected code (e.g. builtins and bytecode\n   // handlers) has been generated.\n   void Finalize();"
        },
        {
            "sha": "dfeec1339c45581df642bacbb5a0eab37952225c",
            "filename": "deps/v8/src/builtins/ia32/builtins-ia32.cc",
            "status": "modified",
            "additions": 408,
            "deletions": 65,
            "changes": 473,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799",
            "patch": "@@ -4,12 +4,14 @@\n \n #if V8_TARGET_ARCH_IA32\n \n+#include \"src/base/adapters.h\"\n #include \"src/code-factory.h\"\n #include \"src/debug/debug.h\"\n #include \"src/deoptimizer.h\"\n #include \"src/frame-constants.h\"\n #include \"src/frames.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/wasm/wasm-linkage.h\"\n \n namespace v8 {\n namespace internal {\n@@ -18,7 +20,7 @@ namespace internal {\n \n void Builtins::Generate_Adaptor(MacroAssembler* masm, Address address,\n                                 ExitFrameType exit_frame_type) {\n-  __ mov(ebx, Immediate(ExternalReference(address, masm->isolate())));\n+  __ mov(ebx, Immediate(ExternalReference::Create(address)));\n   if (exit_frame_type == BUILTIN_EXIT) {\n     __ Jump(BUILTIN_CODE(masm->isolate(), AdaptorWithBuiltinExitFrame),\n             RelocInfo::CODE_TARGET);\n@@ -52,7 +54,7 @@ void AdaptorWithExitFrameType(MacroAssembler* masm,\n   // ordinary functions).\n   __ mov(esi, FieldOperand(edi, JSFunction::kContextOffset));\n \n-  // CEntryStub expects eax to contain the number of arguments including the\n+  // CEntry expects eax to contain the number of arguments including the\n   // receiver and the extra arguments.\n   __ add(eax, Immediate(BuiltinExitFrameConstants::kNumExtraArgsWithReceiver));\n \n@@ -68,9 +70,10 @@ void AdaptorWithExitFrameType(MacroAssembler* masm,\n \n   // Jump to the C entry runtime stub directly here instead of using\n   // JumpToExternalReference because ebx is loaded by Generate_adaptor.\n-  CEntryStub ces(masm->isolate(), 1, kDontSaveFPRegs, kArgvOnStack,\n-                 exit_frame_type == Builtins::BUILTIN_EXIT);\n-  __ jmp(ces.GetCode(), RelocInfo::CODE_TARGET);\n+  Handle<Code> code =\n+      CodeFactory::CEntry(masm->isolate(), 1, kDontSaveFPRegs, kArgvOnStack,\n+                          exit_frame_type == Builtins::BUILTIN_EXIT);\n+  __ Jump(code, RelocInfo::CODE_TARGET);\n }\n }  // namespace\n \n@@ -183,9 +186,10 @@ void Generate_JSBuiltinsConstructStubHelper(MacroAssembler* masm) {\n   __ ret(0);\n }\n \n+}  // namespace\n+\n // The construct stub for ES5 constructor functions and ES6 class constructors.\n-void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n-                                     bool restrict_constructor_return) {\n+void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- eax: number of arguments (untagged)\n   //  -- edi: constructor function\n@@ -316,7 +320,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // If the result is an object (in the ECMA sense), we should get rid\n     // of the receiver and use the result; see ECMA-262 section 13.2.2-7\n     // on page 74.\n-    Label use_receiver, do_throw, other_result, leave_frame;\n+    Label use_receiver, do_throw, leave_frame;\n \n     // If the result is undefined, we jump out to using the implicit receiver.\n     __ JumpIfRoot(eax, Heap::kUndefinedValueRootIndex, &use_receiver,\n@@ -326,30 +330,14 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // is a valid receiver.\n \n     // If the result is a smi, it is *not* an object in the ECMA sense.\n-    __ JumpIfSmi(eax, &other_result, Label::kNear);\n+    __ JumpIfSmi(eax, &use_receiver, Label::kNear);\n \n     // If the type of the result (stored in its map) is less than\n     // FIRST_JS_RECEIVER_TYPE, it is not an object in the ECMA sense.\n     STATIC_ASSERT(LAST_JS_RECEIVER_TYPE == LAST_TYPE);\n     __ CmpObjectType(eax, FIRST_JS_RECEIVER_TYPE, ecx);\n     __ j(above_equal, &leave_frame, Label::kNear);\n-\n-    // The result is now neither undefined nor an object.\n-    __ bind(&other_result);\n-    __ mov(ebx, Operand(ebp, ConstructFrameConstants::kConstructorOffset));\n-    __ mov(ebx, FieldOperand(ebx, JSFunction::kSharedFunctionInfoOffset));\n-    __ test(FieldOperand(ebx, SharedFunctionInfo::kFlagsOffset),\n-            Immediate(SharedFunctionInfo::IsClassConstructorBit::kMask));\n-\n-    if (restrict_constructor_return) {\n-      // Throw if constructor function is a class constructor\n-      __ j(Condition::zero, &use_receiver, Label::kNear);\n-    } else {\n-      __ j(not_zero, &use_receiver, Label::kNear);\n-      __ CallRuntime(\n-          Runtime::kIncrementUseCounterConstructorReturnNonUndefinedPrimitive);\n-      __ jmp(&use_receiver, Label::kNear);\n-    }\n+    __ jmp(&use_receiver, Label::kNear);\n \n     __ bind(&do_throw);\n     __ CallRuntime(Runtime::kThrowConstructorReturnedNonObject);\n@@ -372,16 +360,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n   __ push(ecx);\n   __ ret(0);\n }\n-}  // namespace\n \n-void Builtins::Generate_JSConstructStubGenericRestrictedReturn(\n-    MacroAssembler* masm) {\n-  return Generate_JSConstructStubGeneric(masm, true);\n-}\n-void Builtins::Generate_JSConstructStubGenericUnrestrictedReturn(\n-    MacroAssembler* masm) {\n-  return Generate_JSConstructStubGeneric(masm, false);\n-}\n void Builtins::Generate_JSBuiltinsConstructStub(MacroAssembler* masm) {\n   Generate_JSBuiltinsConstructStubHelper(masm);\n }\n@@ -426,8 +405,8 @@ static void Generate_JSEntryTrampolineHelper(MacroAssembler* masm,\n     FrameScope scope(masm, StackFrame::INTERNAL);\n \n     // Setup the context (we need to use the caller context from the isolate).\n-    ExternalReference context_address(IsolateAddressId::kContextAddress,\n-                                      masm->isolate());\n+    ExternalReference context_address = ExternalReference::Create(\n+        IsolateAddressId::kContextAddress, masm->isolate());\n     __ mov(esi, Operand::StaticVariable(context_address));\n \n     // Load the previous frame pointer (ebx) to access C arguments\n@@ -608,6 +587,8 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n     FrameScope scope(masm, StackFrame::INTERNAL);\n     __ Push(edx);\n     __ Push(edi);\n+    // Push hole as receiver since we do not use it for stepping.\n+    __ PushRoot(Heap::kTheHoleValueRootIndex);\n     __ CallRuntime(Runtime::kDebugOnFunctionCall);\n     __ Pop(edx);\n     __ mov(edi, FieldOperand(edx, JSGeneratorObject::kFunctionOffset));\n@@ -788,8 +769,7 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n                      bytecode));\n \n   __ Move(bytecode_size_table,\n-          Immediate(\n-              ExternalReference::bytecode_size_table_address(masm->isolate())));\n+          Immediate(ExternalReference::bytecode_size_table_address()));\n \n   // Check if the bytecode is a Wide or ExtraWide prefix bytecode.\n   Label process_bytecode, extra_wide;\n@@ -1370,7 +1350,7 @@ static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n   // Figure out the SFI's code object.\n   Label done;\n   Label check_is_bytecode_array;\n-  Label check_is_code;\n+  Label check_is_exported_function_data;\n   Label check_is_fixed_array;\n   Label check_is_pre_parsed_scope_data;\n   Label check_is_function_template_info;\n@@ -1394,16 +1374,19 @@ static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n \n   // IsBytecodeArray: Interpret bytecode\n   __ cmpw(data_type, Immediate(BYTECODE_ARRAY_TYPE));\n-  __ j(not_equal, &check_is_code);\n+  __ j(not_equal, &check_is_exported_function_data);\n   __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n   __ jmp(&done);\n \n-  // IsCode: Run code\n-  __ bind(&check_is_code);\n-  __ cmpw(data_type, Immediate(CODE_TYPE));\n-  __ j(equal, &done);\n+  // IsWasmExportedFunctionData: Use the wrapper code\n+  __ bind(&check_is_exported_function_data);\n+  __ cmpw(data_type, Immediate(WASM_EXPORTED_FUNCTION_DATA_TYPE));\n+  __ j(not_equal, &check_is_fixed_array);\n+  __ mov(sfi_data,\n+         FieldOperand(sfi_data, WasmExportedFunctionData::kWrapperCodeOffset));\n+  __ jmp(&done);\n \n-  // IsFixedArray: Instantiate using AsmWasmData,\n+  // IsFixedArray: Instantiate using AsmWasmData\n   __ bind(&check_is_fixed_array);\n   __ cmpw(data_type, Immediate(FIXED_ARRAY_TYPE));\n   __ j(not_equal, &check_is_pre_parsed_scope_data);\n@@ -2458,7 +2441,7 @@ void Builtins::Generate_ConstructFunction(MacroAssembler* masm) {\n           RelocInfo::CODE_TARGET);\n \n   __ bind(&call_generic_stub);\n-  __ Jump(masm->isolate()->builtins()->JSConstructStubGeneric(),\n+  __ Jump(BUILTIN_CODE(masm->isolate(), JSConstructStubGeneric),\n           RelocInfo::CODE_TARGET);\n }\n \n@@ -2762,47 +2745,407 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   {\n     FrameScope scope(masm, StackFrame::INTERNAL);\n \n-    auto wasm_instance_reg = esi;  // TODO(titzer): put in a common place.\n-\n     // Save all parameter registers (see wasm-linkage.cc). They might be\n     // overwritten in the runtime call below. We don't have any callee-saved\n     // registers in wasm, so no need to store anything else.\n-    constexpr Register gp_regs[]{eax, ebx, ecx, edx};\n-    constexpr XMMRegister xmm_regs[]{xmm1, xmm2, xmm3, xmm4, xmm5, xmm6};\n-\n-    for (auto reg : gp_regs) {\n+    for (Register reg : wasm::kGpParamRegisters) {\n+      if (reg == kWasmInstanceRegister) continue;\n       __ Push(reg);\n     }\n-    __ sub(esp, Immediate(16 * arraysize(xmm_regs)));\n-    for (int i = 0, e = arraysize(xmm_regs); i < e; ++i) {\n-      __ movdqu(Operand(esp, 16 * i), xmm_regs[i]);\n+    __ sub(esp, Immediate(16 * arraysize(wasm::kFpParamRegisters)));\n+    int offset = 0;\n+    for (DoubleRegister reg : wasm::kFpParamRegisters) {\n+      __ movdqu(Operand(esp, offset), reg);\n+      offset += 16;\n     }\n \n     // Pass the WASM instance as an explicit argument to WasmCompileLazy.\n-    __ Push(wasm_instance_reg);\n-    // Initialize the JavaScript context with 0. CEntryStub will use it to\n+    __ Push(kWasmInstanceRegister);\n+    // Initialize the JavaScript context with 0. CEntry will use it to\n     // set the current context on the isolate.\n-    __ Move(esi, Smi::kZero);\n+    __ Move(kContextRegister, Smi::kZero);\n     __ CallRuntime(Runtime::kWasmCompileLazy);\n     // The entrypoint address is the first return value.\n     __ mov(edi, kReturnRegister0);\n     // The WASM instance is the second return value.\n-    __ mov(wasm_instance_reg, kReturnRegister1);\n+    __ mov(kWasmInstanceRegister, kReturnRegister1);\n \n     // Restore registers.\n-    for (int i = arraysize(xmm_regs) - 1; i >= 0; --i) {\n-      __ movdqu(xmm_regs[i], Operand(esp, 16 * i));\n+    for (DoubleRegister reg : base::Reversed(wasm::kFpParamRegisters)) {\n+      offset -= 16;\n+      __ movdqu(reg, Operand(esp, offset));\n     }\n-    __ add(esp, Immediate(16 * arraysize(xmm_regs)));\n-    for (int i = arraysize(gp_regs) - 1; i >= 0; --i) {\n-      __ Pop(gp_regs[i]);\n+    DCHECK_EQ(0, offset);\n+    __ add(esp, Immediate(16 * arraysize(wasm::kFpParamRegisters)));\n+    for (Register reg : base::Reversed(wasm::kGpParamRegisters)) {\n+      if (reg == kWasmInstanceRegister) continue;\n+      __ Pop(reg);\n     }\n   }\n   // Finally, jump to the entrypoint.\n   __ jmp(edi);\n }\n \n+void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n+                               SaveFPRegsMode save_doubles, ArgvMode argv_mode,\n+                               bool builtin_exit_frame) {\n+  // eax: number of arguments including receiver\n+  // ebx: pointer to C function  (C callee-saved)\n+  // ebp: frame pointer  (restored after C call)\n+  // esp: stack pointer  (restored after C call)\n+  // esi: current context (C callee-saved)\n+  // edi: JS function of the caller (C callee-saved)\n+  //\n+  // If argv_mode == kArgvInRegister:\n+  // ecx: pointer to the first argument\n+\n+  ProfileEntryHookStub::MaybeCallEntryHook(masm);\n+\n+  // Reserve space on the stack for the three arguments passed to the call. If\n+  // result size is greater than can be returned in registers, also reserve\n+  // space for the hidden argument for the result location, and space for the\n+  // result itself.\n+  int arg_stack_space = 3;\n+\n+  // Enter the exit frame that transitions from JavaScript to C++.\n+  if (argv_mode == kArgvInRegister) {\n+    DCHECK(save_doubles == kDontSaveFPRegs);\n+    DCHECK(!builtin_exit_frame);\n+    __ EnterApiExitFrame(arg_stack_space);\n+\n+    // Move argc and argv into the correct registers.\n+    __ mov(esi, ecx);\n+    __ mov(edi, eax);\n+  } else {\n+    __ EnterExitFrame(\n+        arg_stack_space, save_doubles == kSaveFPRegs,\n+        builtin_exit_frame ? StackFrame::BUILTIN_EXIT : StackFrame::EXIT);\n+  }\n+\n+  // ebx: pointer to C function  (C callee-saved)\n+  // ebp: frame pointer  (restored after C call)\n+  // esp: stack pointer  (restored after C call)\n+  // edi: number of arguments including receiver  (C callee-saved)\n+  // esi: pointer to the first argument (C callee-saved)\n+\n+  // Result returned in eax, or eax+edx if result size is 2.\n+\n+  // Check stack alignment.\n+  if (FLAG_debug_code) {\n+    __ CheckStackAlignment();\n+  }\n+  // Call C function.\n+  __ mov(Operand(esp, 0 * kPointerSize), edi);  // argc.\n+  __ mov(Operand(esp, 1 * kPointerSize), esi);  // argv.\n+  __ mov(Operand(esp, 2 * kPointerSize),\n+         Immediate(ExternalReference::isolate_address(masm->isolate())));\n+  __ call(ebx);\n+\n+  // Result is in eax or edx:eax - do not destroy these registers!\n+\n+  // Check result for exception sentinel.\n+  Label exception_returned;\n+  __ cmp(eax, masm->isolate()->factory()->exception());\n+  __ j(equal, &exception_returned);\n+\n+  // Check that there is no pending exception, otherwise we\n+  // should have returned the exception sentinel.\n+  if (FLAG_debug_code) {\n+    __ push(edx);\n+    __ mov(edx, Immediate(masm->isolate()->factory()->the_hole_value()));\n+    Label okay;\n+    ExternalReference pending_exception_address = ExternalReference::Create(\n+        IsolateAddressId::kPendingExceptionAddress, masm->isolate());\n+    __ cmp(edx, Operand::StaticVariable(pending_exception_address));\n+    // Cannot use check here as it attempts to generate call into runtime.\n+    __ j(equal, &okay, Label::kNear);\n+    __ int3();\n+    __ bind(&okay);\n+    __ pop(edx);\n+  }\n+\n+  // Exit the JavaScript to C++ exit frame.\n+  __ LeaveExitFrame(save_doubles == kSaveFPRegs, argv_mode == kArgvOnStack);\n+  __ ret(0);\n+\n+  // Handling of exception.\n+  __ bind(&exception_returned);\n+\n+  ExternalReference pending_handler_context_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerContextAddress, masm->isolate());\n+  ExternalReference pending_handler_entrypoint_address =\n+      ExternalReference::Create(\n+          IsolateAddressId::kPendingHandlerEntrypointAddress, masm->isolate());\n+  ExternalReference pending_handler_fp_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerFPAddress, masm->isolate());\n+  ExternalReference pending_handler_sp_address = ExternalReference::Create(\n+      IsolateAddressId::kPendingHandlerSPAddress, masm->isolate());\n+\n+  // Ask the runtime for help to determine the handler. This will set eax to\n+  // contain the current pending exception, don't clobber it.\n+  ExternalReference find_handler =\n+      ExternalReference::Create(Runtime::kUnwindAndFindExceptionHandler);\n+  {\n+    FrameScope scope(masm, StackFrame::MANUAL);\n+    __ PrepareCallCFunction(3, eax);\n+    __ mov(Operand(esp, 0 * kPointerSize), Immediate(0));  // argc.\n+    __ mov(Operand(esp, 1 * kPointerSize), Immediate(0));  // argv.\n+    __ mov(Operand(esp, 2 * kPointerSize),\n+           Immediate(ExternalReference::isolate_address(masm->isolate())));\n+    __ CallCFunction(find_handler, 3);\n+  }\n+\n+  // Retrieve the handler context, SP and FP.\n+  __ mov(esi, Operand::StaticVariable(pending_handler_context_address));\n+  __ mov(esp, Operand::StaticVariable(pending_handler_sp_address));\n+  __ mov(ebp, Operand::StaticVariable(pending_handler_fp_address));\n+\n+  // If the handler is a JS frame, restore the context to the frame. Note that\n+  // the context will be set to (esi == 0) for non-JS frames.\n+  Label skip;\n+  __ test(esi, esi);\n+  __ j(zero, &skip, Label::kNear);\n+  __ mov(Operand(ebp, StandardFrameConstants::kContextOffset), esi);\n+  __ bind(&skip);\n+\n+  // Reset the masking register. This is done independent of the underlying\n+  // feature flag {FLAG_branch_load_poisoning} to make the snapshot work with\n+  // both configurations. It is safe to always do this, because the underlying\n+  // register is caller-saved and can be arbitrarily clobbered.\n+  __ ResetSpeculationPoisonRegister();\n+\n+  // Compute the handler entry address and jump to it.\n+  __ mov(edi, Operand::StaticVariable(pending_handler_entrypoint_address));\n+  __ jmp(edi);\n+}\n+\n+void Builtins::Generate_DoubleToI(MacroAssembler* masm) {\n+  Label check_negative, process_64_bits, done;\n+\n+  // Account for return address and saved regs.\n+  const int kArgumentOffset = 4 * kPointerSize;\n+\n+  MemOperand mantissa_operand(MemOperand(esp, kArgumentOffset));\n+  MemOperand exponent_operand(\n+      MemOperand(esp, kArgumentOffset + kDoubleSize / 2));\n+\n+  // The result is returned on the stack.\n+  MemOperand return_operand = mantissa_operand;\n+\n+  Register scratch1 = ebx;\n+\n+  // Since we must use ecx for shifts below, use some other register (eax)\n+  // to calculate the result.\n+  Register result_reg = eax;\n+  // Save ecx if it isn't the return register and therefore volatile, or if it\n+  // is the return register, then save the temp register we use in its stead for\n+  // the result.\n+  Register save_reg = eax;\n+  __ push(ecx);\n+  __ push(scratch1);\n+  __ push(save_reg);\n+\n+  __ mov(scratch1, mantissa_operand);\n+  if (CpuFeatures::IsSupported(SSE3)) {\n+    CpuFeatureScope scope(masm, SSE3);\n+    // Load x87 register with heap number.\n+    __ fld_d(mantissa_operand);\n+  }\n+  __ mov(ecx, exponent_operand);\n+\n+  __ and_(ecx, HeapNumber::kExponentMask);\n+  __ shr(ecx, HeapNumber::kExponentShift);\n+  __ lea(result_reg, MemOperand(ecx, -HeapNumber::kExponentBias));\n+  __ cmp(result_reg, Immediate(HeapNumber::kMantissaBits));\n+  __ j(below, &process_64_bits);\n+\n+  // Result is entirely in lower 32-bits of mantissa\n+  int delta = HeapNumber::kExponentBias + Double::kPhysicalSignificandSize;\n+  if (CpuFeatures::IsSupported(SSE3)) {\n+    __ fstp(0);\n+  }\n+  __ sub(ecx, Immediate(delta));\n+  __ xor_(result_reg, result_reg);\n+  __ cmp(ecx, Immediate(31));\n+  __ j(above, &done);\n+  __ shl_cl(scratch1);\n+  __ jmp(&check_negative);\n+\n+  __ bind(&process_64_bits);\n+  if (CpuFeatures::IsSupported(SSE3)) {\n+    CpuFeatureScope scope(masm, SSE3);\n+    // Reserve space for 64 bit answer.\n+    __ sub(esp, Immediate(kDoubleSize));  // Nolint.\n+    // Do conversion, which cannot fail because we checked the exponent.\n+    __ fisttp_d(Operand(esp, 0));\n+    __ mov(result_reg, Operand(esp, 0));  // Load low word of answer as result\n+    __ add(esp, Immediate(kDoubleSize));\n+    __ jmp(&done);\n+  } else {\n+    // Result must be extracted from shifted 32-bit mantissa\n+    __ sub(ecx, Immediate(delta));\n+    __ neg(ecx);\n+    __ mov(result_reg, exponent_operand);\n+    __ and_(result_reg,\n+            Immediate(static_cast<uint32_t>(Double::kSignificandMask >> 32)));\n+    __ add(result_reg,\n+           Immediate(static_cast<uint32_t>(Double::kHiddenBit >> 32)));\n+    __ shrd_cl(scratch1, result_reg);\n+    __ shr_cl(result_reg);\n+    __ test(ecx, Immediate(32));\n+    __ cmov(not_equal, scratch1, result_reg);\n+  }\n+\n+  // If the double was negative, negate the integer result.\n+  __ bind(&check_negative);\n+  __ mov(result_reg, scratch1);\n+  __ neg(result_reg);\n+  __ cmp(exponent_operand, Immediate(0));\n+  __ cmov(greater, result_reg, scratch1);\n+\n+  // Restore registers\n+  __ bind(&done);\n+  __ mov(return_operand, result_reg);\n+  __ pop(save_reg);\n+  __ pop(scratch1);\n+  __ pop(ecx);\n+  __ ret(0);\n+}\n+\n+void Builtins::Generate_MathPowInternal(MacroAssembler* masm) {\n+  const Register exponent = MathPowTaggedDescriptor::exponent();\n+  DCHECK(exponent == eax);\n+  const Register scratch = ecx;\n+  const XMMRegister double_result = xmm3;\n+  const XMMRegister double_base = xmm2;\n+  const XMMRegister double_exponent = xmm1;\n+  const XMMRegister double_scratch = xmm4;\n+\n+  Label call_runtime, done, exponent_not_smi, int_exponent;\n+\n+  // Save 1 in double_result - we need this several times later on.\n+  __ mov(scratch, Immediate(1));\n+  __ Cvtsi2sd(double_result, scratch);\n+\n+  Label fast_power, try_arithmetic_simplification;\n+  __ DoubleToI(exponent, double_exponent, double_scratch,\n+               &try_arithmetic_simplification, &try_arithmetic_simplification);\n+  __ jmp(&int_exponent);\n+\n+  __ bind(&try_arithmetic_simplification);\n+  // Skip to runtime if possibly NaN (indicated by the indefinite integer).\n+  __ cvttsd2si(exponent, Operand(double_exponent));\n+  __ cmp(exponent, Immediate(0x1));\n+  __ j(overflow, &call_runtime);\n+\n+  // Using FPU instructions to calculate power.\n+  Label fast_power_failed;\n+  __ bind(&fast_power);\n+  __ fnclex();  // Clear flags to catch exceptions later.\n+  // Transfer (B)ase and (E)xponent onto the FPU register stack.\n+  __ sub(esp, Immediate(kDoubleSize));\n+  __ movsd(Operand(esp, 0), double_exponent);\n+  __ fld_d(Operand(esp, 0));  // E\n+  __ movsd(Operand(esp, 0), double_base);\n+  __ fld_d(Operand(esp, 0));  // B, E\n+\n+  // Exponent is in st(1) and base is in st(0)\n+  // B ^ E = (2^(E * log2(B)) - 1) + 1 = (2^X - 1) + 1 for X = E * log2(B)\n+  // FYL2X calculates st(1) * log2(st(0))\n+  __ fyl2x();    // X\n+  __ fld(0);     // X, X\n+  __ frndint();  // rnd(X), X\n+  __ fsub(1);    // rnd(X), X-rnd(X)\n+  __ fxch(1);    // X - rnd(X), rnd(X)\n+  // F2XM1 calculates 2^st(0) - 1 for -1 < st(0) < 1\n+  __ f2xm1();   // 2^(X-rnd(X)) - 1, rnd(X)\n+  __ fld1();    // 1, 2^(X-rnd(X)) - 1, rnd(X)\n+  __ faddp(1);  // 2^(X-rnd(X)), rnd(X)\n+  // FSCALE calculates st(0) * 2^st(1)\n+  __ fscale();  // 2^X, rnd(X)\n+  __ fstp(1);   // 2^X\n+  // Bail out to runtime in case of exceptions in the status word.\n+  __ fnstsw_ax();\n+  __ test_b(eax, Immediate(0x5F));  // We check for all but precision exception.\n+  __ j(not_zero, &fast_power_failed, Label::kNear);\n+  __ fstp_d(Operand(esp, 0));\n+  __ movsd(double_result, Operand(esp, 0));\n+  __ add(esp, Immediate(kDoubleSize));\n+  __ jmp(&done);\n+\n+  __ bind(&fast_power_failed);\n+  __ fninit();\n+  __ add(esp, Immediate(kDoubleSize));\n+  __ jmp(&call_runtime);\n+\n+  // Calculate power with integer exponent.\n+  __ bind(&int_exponent);\n+  const XMMRegister double_scratch2 = double_exponent;\n+  __ mov(scratch, exponent);                 // Back up exponent.\n+  __ movsd(double_scratch, double_base);     // Back up base.\n+  __ movsd(double_scratch2, double_result);  // Load double_exponent with 1.\n+\n+  // Get absolute value of exponent.\n+  Label no_neg, while_true, while_false;\n+  __ test(scratch, scratch);\n+  __ j(positive, &no_neg, Label::kNear);\n+  __ neg(scratch);\n+  __ bind(&no_neg);\n+\n+  __ j(zero, &while_false, Label::kNear);\n+  __ shr(scratch, 1);\n+  // Above condition means CF==0 && ZF==0.  This means that the\n+  // bit that has been shifted out is 0 and the result is not 0.\n+  __ j(above, &while_true, Label::kNear);\n+  __ movsd(double_result, double_scratch);\n+  __ j(zero, &while_false, Label::kNear);\n+\n+  __ bind(&while_true);\n+  __ shr(scratch, 1);\n+  __ mulsd(double_scratch, double_scratch);\n+  __ j(above, &while_true, Label::kNear);\n+  __ mulsd(double_result, double_scratch);\n+  __ j(not_zero, &while_true);\n+\n+  __ bind(&while_false);\n+  // scratch has the original value of the exponent - if the exponent is\n+  // negative, return 1/result.\n+  __ test(exponent, exponent);\n+  __ j(positive, &done);\n+  __ divsd(double_scratch2, double_result);\n+  __ movsd(double_result, double_scratch2);\n+  // Test whether result is zero.  Bail out to check for subnormal result.\n+  // Due to subnormals, x^-y == (1/x)^y does not hold in all cases.\n+  __ xorps(double_scratch2, double_scratch2);\n+  __ ucomisd(double_scratch2, double_result);  // Result cannot be NaN.\n+  // double_exponent aliased as double_scratch2 has already been overwritten\n+  // and may not have contained the exponent value in the first place when the\n+  // exponent is a smi.  We reset it with exponent value before bailing out.\n+  __ j(not_equal, &done);\n+  __ Cvtsi2sd(double_exponent, exponent);\n+\n+  // Returning or bailing out.\n+  __ bind(&call_runtime);\n+  {\n+    AllowExternalCallThatCantCauseGC scope(masm);\n+    __ PrepareCallCFunction(4, scratch);\n+    __ movsd(Operand(esp, 0 * kDoubleSize), double_base);\n+    __ movsd(Operand(esp, 1 * kDoubleSize), double_exponent);\n+    __ CallCFunction(ExternalReference::power_double_double_function(), 4);\n+  }\n+  // Return value is in st(0) on ia32.\n+  // Store it into the (fixed) result register.\n+  __ sub(esp, Immediate(kDoubleSize));\n+  __ fstp_d(Operand(esp, 0));\n+  __ movsd(double_result, Operand(esp, 0));\n+  __ add(esp, Immediate(kDoubleSize));\n+\n+  __ bind(&done);\n+  __ ret(0);\n+}\n+\n #undef __\n+\n }  // namespace internal\n }  // namespace v8\n "
        },
        {
            "sha": "f831cf12e14eb51fde46644c583004f27cf239d7",
            "filename": "deps/v8/src/builtins/mips/builtins-mips.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7186b3a7c3804968be529eeaff67d2a24c05be18",
            "filename": "deps/v8/src/builtins/mips64/builtins-mips64.cc",
            "status": "modified",
            "additions": 488,
            "deletions": 112,
            "changes": 600,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "3d6c397d6b27c8d7e2a74dcd22592a81efa48527",
            "filename": "deps/v8/src/builtins/ppc/builtins-ppc.cc",
            "status": "modified",
            "additions": 450,
            "deletions": 69,
            "changes": 519,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "dbcf633a43d54aad827679ef3f1cf2fba40108b6",
            "filename": "deps/v8/src/builtins/s390/builtins-s390.cc",
            "status": "modified",
            "additions": 426,
            "deletions": 63,
            "changes": 489,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c30b4e114fb1ecf3b34064c751857570cb1a9cb1",
            "filename": "deps/v8/src/builtins/setup-builtins-internal.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "40e0bcbb2c31c08e9299696a7d7ce1e1b3fe3a66",
            "filename": "deps/v8/src/builtins/typed-array.tq",
            "status": "added",
            "additions": 261,
            "deletions": 0,
            "changes": 261,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c7217870931ff2c4a99ee1f371d0995066443ddb",
            "filename": "deps/v8/src/builtins/x64/builtins-x64.cc",
            "status": "modified",
            "additions": 436,
            "deletions": 102,
            "changes": 538,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "8eb10f43dd7e9744827a0e3dadfe565fdf68f965",
            "filename": "deps/v8/src/checks.h",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fchecks.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fchecks.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fchecks.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "439cb54dca6b6d1f7ba5b816bf51d7ecacb9fd39",
            "filename": "deps/v8/src/code-events.h",
            "status": "modified",
            "additions": 23,
            "deletions": 39,
            "changes": 62,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-events.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-events.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-events.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "4479d33fb8fffde4f164ed56f7e1133b8cca7c39",
            "filename": "deps/v8/src/code-factory.cc",
            "status": "modified",
            "additions": 64,
            "deletions": 12,
            "changes": 76,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-factory.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-factory.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-factory.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "20ad2ac1d73a95951d5e8bfbebb8d3e85b61dca3",
            "filename": "deps/v8/src/code-factory.h",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-factory.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-factory.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-factory.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "3716ad04d9fee66be4a81f762788c10ce90cf66d",
            "filename": "deps/v8/src/code-reference.cc",
            "status": "added",
            "additions": 53,
            "deletions": 0,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-reference.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-reference.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-reference.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "189ab52769dbe50c8626f14583378e8036d38274",
            "filename": "deps/v8/src/code-reference.h",
            "status": "added",
            "additions": 52,
            "deletions": 0,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-reference.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-reference.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-reference.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7d3f71bc9df5021697c9505081a573f37f19c75c",
            "filename": "deps/v8/src/code-stub-assembler.cc",
            "status": "modified",
            "additions": 997,
            "deletions": 533,
            "changes": 1530,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "35341b65d53e6601cb5551bb46fa92894141898d",
            "filename": "deps/v8/src/code-stub-assembler.h",
            "status": "modified",
            "additions": 416,
            "deletions": 247,
            "changes": 663,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "bf1a3181aba369f3764b4c95cbbc01e1af9baf2a",
            "filename": "deps/v8/src/code-stubs.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 100,
            "changes": 108,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-stubs.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-stubs.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stubs.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "cdc9c9878d473812599fe9d9538add3fd8c8d787",
            "filename": "deps/v8/src/code-stubs.h",
            "status": "modified",
            "additions": 13,
            "deletions": 145,
            "changes": 158,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-stubs.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcode-stubs.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stubs.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ce8270fdb3d72bdadf6e07672162339af03b4d63",
            "filename": "deps/v8/src/compilation-cache.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 8,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7609e7ac384ef4bec8c566f15b6a2c27b64907f8",
            "filename": "deps/v8/src/compilation-cache.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompilation-cache.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompilation-cache.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompilation-cache.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f887e2e89e0e6500109726f864bb40024330e743",
            "filename": "deps/v8/src/compiler-dispatcher/compiler-dispatcher.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ae6bc9c4fa681d3a56f2ff639ce93f91f2e740d2",
            "filename": "deps/v8/src/compiler.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 28,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "02c5d8a2a0c0f20900a86cc7a4536c605ec9c2b2",
            "filename": "deps/v8/src/compiler/access-builder.cc",
            "status": "modified",
            "additions": 32,
            "deletions": 40,
            "changes": 72,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "4e8107d859fdb5c232084dd81595d7f9be071aa3",
            "filename": "deps/v8/src/compiler/access-builder.h",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f33555cbe39dd23af3b27be27d0621d8811944d1",
            "filename": "deps/v8/src/compiler/access-info.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "d591cc219bd302d7b469be88b5c024e8a19a3b4d",
            "filename": "deps/v8/src/compiler/access-info.h",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "167a8bdb5481c752087f2da447ddc5b4e4134b4c",
            "filename": "deps/v8/src/compiler/allocation-builder.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "3d2c3d287124f160760804d3255788fcca9ad79c",
            "filename": "deps/v8/src/compiler/arm/code-generator-arm.cc",
            "status": "modified",
            "additions": 27,
            "deletions": 22,
            "changes": 49,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "4f6702b67a0653852c58f01cbda71818d2a88d9b",
            "filename": "deps/v8/src/compiler/arm/instruction-selector-arm.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 7,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "751ad4599baf60aee7cb66872b4665e885e2be8c",
            "filename": "deps/v8/src/compiler/arm64/code-generator-arm64.cc",
            "status": "modified",
            "additions": 146,
            "deletions": 129,
            "changes": 275,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c5f4b19c1636dc50060eff2e49eb7d9fd0f99292",
            "filename": "deps/v8/src/compiler/arm64/instruction-codes-arm64.h",
            "status": "modified",
            "additions": 326,
            "deletions": 310,
            "changes": 636,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "4ea251c590e2c1571d3a3ffc393a309b26bffeb8",
            "filename": "deps/v8/src/compiler/arm64/instruction-scheduler-arm64.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7f388cde3f48467a9bd59fa12a399a50fbc94b40",
            "filename": "deps/v8/src/compiler/arm64/instruction-selector-arm64.cc",
            "status": "modified",
            "additions": 164,
            "deletions": 91,
            "changes": 255,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "d3ed9241f2ea2789a5bd1d66c45225ed8a3bfea6",
            "filename": "deps/v8/src/compiler/branch-elimination.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 8,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fbranch-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fbranch-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbranch-elimination.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ade917de476ef729ff19dff01f3ff9391b37ec3c",
            "filename": "deps/v8/src/compiler/bytecode-graph-builder.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 24,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c9f323615ac0e597a94dd2f8a14dc0f463f4a9bd",
            "filename": "deps/v8/src/compiler/code-assembler.cc",
            "status": "modified",
            "additions": 62,
            "deletions": 36,
            "changes": 98,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "0e4f8ea5c81be0f1b5af2ef62f492c8c4ef58ab1",
            "filename": "deps/v8/src/compiler/code-assembler.h",
            "status": "modified",
            "additions": 41,
            "deletions": 26,
            "changes": 67,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "865b42b0b83fbbf7ac65187a382e4df54cbbbac3",
            "filename": "deps/v8/src/compiler/code-generator.cc",
            "status": "modified",
            "additions": 23,
            "deletions": 12,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "1dfe0c3526553c0820286223627dbe2910e9a32f",
            "filename": "deps/v8/src/compiler/code-generator.h",
            "status": "modified",
            "additions": 2,
            "deletions": 8,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "5ef7548ce8b6c7d4a57cccd76b2fb3c8eee443a4",
            "filename": "deps/v8/src/compiler/common-operator.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 18,
            "changes": 51,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "4a0da7c20aed8ecb0d04bad44a312afb4d87c4a1",
            "filename": "deps/v8/src/compiler/common-operator.h",
            "status": "modified",
            "additions": 14,
            "deletions": 7,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "a7e231941025258280c0526cfd2a76a1a40124cb",
            "filename": "deps/v8/src/compiler/compiler-source-position-table.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompiler-source-position-table.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompiler-source-position-table.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompiler-source-position-table.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "e0314f5556586bcf0b3b525f982f715876f5d87f",
            "filename": "deps/v8/src/compiler/compiler-source-position-table.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompiler-source-position-table.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompiler-source-position-table.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompiler-source-position-table.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "5e45746d97b86057ac428b19abfda5243e4981e3",
            "filename": "deps/v8/src/compiler/constant-folding-reducer.cc",
            "status": "added",
            "additions": 64,
            "deletions": 0,
            "changes": 64,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "2085d59e5ea4593a593cfe5f293c1e2f39539783",
            "filename": "deps/v8/src/compiler/constant-folding-reducer.h",
            "status": "added",
            "additions": 39,
            "deletions": 0,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "9c8fd7001166d88680d6164f621b2b576a6bd007",
            "filename": "deps/v8/src/compiler/dead-code-elimination.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fdead-code-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fdead-code-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fdead-code-elimination.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "921bfd7852a770b46e933aa5bdbda9365592b05f",
            "filename": "deps/v8/src/compiler/effect-control-linearizer.cc",
            "status": "modified",
            "additions": 55,
            "deletions": 35,
            "changes": 90,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7f297f6a12a4af94b7f4988ccc1c6c97baa12702",
            "filename": "deps/v8/src/compiler/effect-control-linearizer.h",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "1642d85c230cabc45620846b304e26e144500e41",
            "filename": "deps/v8/src/compiler/escape-analysis-reducer.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "77a8de2c66e5e8fb1cdc1e831817d58eae7920b1",
            "filename": "deps/v8/src/compiler/escape-analysis-reducer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "78349799efedf01d6b62e23cdd514e9028d89f16",
            "filename": "deps/v8/src/compiler/escape-analysis.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "94789276bb8223dab4303da821396097f0a785ed",
            "filename": "deps/v8/src/compiler/frame.h",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "64f466363689e6e91c61ef62d3c73db7c3655095",
            "filename": "deps/v8/src/compiler/graph-assembler.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "e7d74c8721b6f4dfb67642257b08d04ee9c6bc51",
            "filename": "deps/v8/src/compiler/graph-assembler.h",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "5f05919ed784ca2ba07a462e57ed0b396033a469",
            "filename": "deps/v8/src/compiler/graph-visualizer.cc",
            "status": "modified",
            "additions": 164,
            "deletions": 22,
            "changes": 186,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "b005927edcbe450c5a02bf645072c45027a44e81",
            "filename": "deps/v8/src/compiler/graph-visualizer.h",
            "status": "modified",
            "additions": 67,
            "deletions": 4,
            "changes": 71,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "a150c3f12d86851942b07e834531955672b1c90b",
            "filename": "deps/v8/src/compiler/ia32/code-generator-ia32.cc",
            "status": "modified",
            "additions": 158,
            "deletions": 69,
            "changes": 227,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7886615939cc1737f39fdf41f538a041f23745b4",
            "filename": "deps/v8/src/compiler/ia32/instruction-codes-ia32.h",
            "status": "modified",
            "additions": 16,
            "deletions": 2,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "4287f7be918f68ef0ea2ee3592788ac2ca5db26c",
            "filename": "deps/v8/src/compiler/ia32/instruction-scheduler-ia32.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "9000a1235f7174c80c36b5e27eedd5eda9ecbc81",
            "filename": "deps/v8/src/compiler/ia32/instruction-selector-ia32.cc",
            "status": "modified",
            "additions": 40,
            "deletions": 4,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "17d032c3f2c1c6fef6fbdb3d2b474f48f42e5d01",
            "filename": "deps/v8/src/compiler/instruction-codes.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-codes.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-codes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-codes.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "cee5fc883b21ec164012cf97c59d1514fb8b9930",
            "filename": "deps/v8/src/compiler/instruction-scheduler.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "257f0d8c041f49f6ed671e17f07a369760968941",
            "filename": "deps/v8/src/compiler/instruction-selector-impl.h",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c8c6afea170eaf10b07d40c52f88f07cf09884bb",
            "filename": "deps/v8/src/compiler/instruction-selector.cc",
            "status": "modified",
            "additions": 74,
            "deletions": 52,
            "changes": 126,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "42cf6ca4fc203c98fc71e61f164de35d2c7fd895",
            "filename": "deps/v8/src/compiler/instruction-selector.h",
            "status": "modified",
            "additions": 28,
            "deletions": 16,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "2ea3736b9088d64d01c0426a0df23357e1141091",
            "filename": "deps/v8/src/compiler/instruction.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "410e78a30d246e52b8878f7c8af022dc98ea2c52",
            "filename": "deps/v8/src/compiler/int64-lowering.cc",
            "status": "modified",
            "additions": 38,
            "deletions": 7,
            "changes": 45,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "6109cd58472f62100bbdfc505fd7bc6daf0845af",
            "filename": "deps/v8/src/compiler/int64-lowering.h",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c3483092d23fb4de6f91faa63ad4fcbd51e408bc",
            "filename": "deps/v8/src/compiler/js-builtin-reducer.cc",
            "status": "removed",
            "additions": 0,
            "deletions": 449,
            "changes": 449,
            "blob_url": "https://github.com/nodejs/node/blob/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.cc?ref=4d94bb2b1f72b6b612983a517a39c5545724a3ad"
        },
        {
            "sha": "eff40060bb1cd8eaa824837132c0d357e594d93b",
            "filename": "deps/v8/src/compiler/js-builtin-reducer.h",
            "status": "removed",
            "additions": 0,
            "deletions": 73,
            "changes": 73,
            "blob_url": "https://github.com/nodejs/node/blob/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.h?ref=4d94bb2b1f72b6b612983a517a39c5545724a3ad"
        },
        {
            "sha": "2acdf0945efc5e67d30a0741b86dc9bdcedfc837",
            "filename": "deps/v8/src/compiler/js-call-reducer.cc",
            "status": "modified",
            "additions": 306,
            "deletions": 26,
            "changes": 332,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "04a9cf920ec6d021f3daf1622515d9a6a2e48a8b",
            "filename": "deps/v8/src/compiler/js-call-reducer.h",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "87698565ef72d7fd47aa5486c7e87b665f0a0eec",
            "filename": "deps/v8/src/compiler/js-create-lowering.cc",
            "status": "modified",
            "additions": 134,
            "deletions": 69,
            "changes": 203,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7a61f171ff281a17367cab20b8cbe69b50816e92",
            "filename": "deps/v8/src/compiler/js-create-lowering.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "cedeb96d2d55fd91f7e3fa0a597e35df7c88b85e",
            "filename": "deps/v8/src/compiler/js-generic-lowering.cc",
            "status": "modified",
            "additions": 21,
            "deletions": 3,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "cb9a6dda2eeb60e6904137cf07c3aa9e222391a6",
            "filename": "deps/v8/src/compiler/js-graph.cc",
            "status": "modified",
            "additions": 80,
            "deletions": 220,
            "changes": 300,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "0046ef8b5e3ee46956cebeb3b367f3aeb43d5c21",
            "filename": "deps/v8/src/compiler/js-graph.h",
            "status": "modified",
            "additions": 56,
            "deletions": 133,
            "changes": 189,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "5f50eb4d2ea2c6863f29c553d289d2ce10bc2884",
            "filename": "deps/v8/src/compiler/js-inlining-heuristic.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "08917ab78bd93d4a5651a26282a746c2917d3519",
            "filename": "deps/v8/src/compiler/js-inlining.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 51,
            "changes": 58,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "07724530f63df083534cb48b22e46693dd422ec3",
            "filename": "deps/v8/src/compiler/js-native-context-specialization.cc",
            "status": "modified",
            "additions": 31,
            "deletions": 37,
            "changes": 68,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "8fe10bb36a83d75fb9714e0a9278d1f7f555db35",
            "filename": "deps/v8/src/compiler/js-operator.cc",
            "status": "modified",
            "additions": 25,
            "deletions": 49,
            "changes": 74,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "6d89e5ac09a9deb53481453909542fd8bb8ca049",
            "filename": "deps/v8/src/compiler/js-operator.h",
            "status": "modified",
            "additions": 11,
            "deletions": 32,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "877b4b5646c8f1084c49f8a210c3e5617ce83c28",
            "filename": "deps/v8/src/compiler/js-typed-lowering.cc",
            "status": "modified",
            "additions": 240,
            "deletions": 114,
            "changes": 354,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "64bc059106141be7f19442fa0649abaac5a82ef0",
            "filename": "deps/v8/src/compiler/js-typed-lowering.h",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "91019f3163f7d1828e147faddf46a8a259e7d213",
            "filename": "deps/v8/src/compiler/linkage.cc",
            "status": "modified",
            "additions": 42,
            "deletions": 14,
            "changes": 56,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ae3a6bfe2d4e7e6b4040dcff92b5b35f816b6ace",
            "filename": "deps/v8/src/compiler/linkage.h",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "53d5d794d9a978aa8e284f6c89301c71a13476b6",
            "filename": "deps/v8/src/compiler/load-elimination.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "6cf1b96ad4396729966e2851c927bd0f2bbb27a2",
            "filename": "deps/v8/src/compiler/loop-peeling.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "150505a5e577d2b073d2407635e03388840acd10",
            "filename": "deps/v8/src/compiler/loop-peeling.h",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "6473c3ee1a56fa6b5946e8d19c7d612216afb026",
            "filename": "deps/v8/src/compiler/loop-variable-optimizer.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "b3f5ec2964383048d6ef866cee921ce4ff4991a0",
            "filename": "deps/v8/src/compiler/machine-graph-verifier.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 4,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "0fcd97ff90d43fb3d8b206042bec2dba89860aab",
            "filename": "deps/v8/src/compiler/machine-graph.cc",
            "status": "added",
            "additions": 99,
            "deletions": 0,
            "changes": 99,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "bd20d8c50dcd49c38a39290ff6a9044728c2c7c6",
            "filename": "deps/v8/src/compiler/machine-graph.h",
            "status": "added",
            "additions": 92,
            "deletions": 0,
            "changes": 92,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7fcba20e2e20ce3b700fb3e2c0ed982fc5e9a165",
            "filename": "deps/v8/src/compiler/machine-operator-reducer.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 11,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "1dc2a0a106ff2f51e46b3655b7aeda51017c6f67",
            "filename": "deps/v8/src/compiler/machine-operator-reducer.h",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "61a22489f717fe6dad5a1fca17209dc983f36411",
            "filename": "deps/v8/src/compiler/machine-operator.cc",
            "status": "modified",
            "additions": 38,
            "deletions": 14,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f07c89f70a349be4b2f784539d2a58a2a16417f5",
            "filename": "deps/v8/src/compiler/machine-operator.h",
            "status": "modified",
            "additions": 27,
            "deletions": 21,
            "changes": 48,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "0298f012519cbfdf51d9c162f1b3b09871c4ebae",
            "filename": "deps/v8/src/compiler/memory-optimizer.cc",
            "status": "modified",
            "additions": 21,
            "deletions": 4,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "5ea79556f4fcead2a030401fa8a2a70402fa1e4f",
            "filename": "deps/v8/src/compiler/memory-optimizer.h",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7f1868e12a61d29644264ad8001aa25384399e22",
            "filename": "deps/v8/src/compiler/mips/code-generator-mips.cc",
            "status": "modified",
            "additions": 78,
            "deletions": 65,
            "changes": 143,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "a60c86635328fc3d2e232dcfe3e20bf3b01bb759",
            "filename": "deps/v8/src/compiler/mips/instruction-selector-mips.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f76f3fc44838310d216e4e64ce37b5d554f2e1ea",
            "filename": "deps/v8/src/compiler/mips64/code-generator-mips64.cc",
            "status": "modified",
            "additions": 73,
            "deletions": 64,
            "changes": 137,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "9302b2bca3ae4bd2a8fd77365eea83854fb8b765",
            "filename": "deps/v8/src/compiler/mips64/instruction-selector-mips64.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "406d634812ba7766c1732c95780339382f6b2fcd",
            "filename": "deps/v8/src/compiler/node-origin-table.cc",
            "status": "added",
            "additions": 80,
            "deletions": 0,
            "changes": 80,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-origin-table.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-origin-table.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-origin-table.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "fae53c57886f490b8f2e0b736dd924f1c10db681",
            "filename": "deps/v8/src/compiler/node-origin-table.h",
            "status": "added",
            "additions": 128,
            "deletions": 0,
            "changes": 128,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-origin-table.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-origin-table.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-origin-table.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "2ccabb18eb6012b2c2b6231f847558e2e8dd2af6",
            "filename": "deps/v8/src/compiler/node-properties.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "10c19b6e35dd7a667471a233323270bd9c75ae81",
            "filename": "deps/v8/src/compiler/node-properties.h",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f53468c216c5bd875b6d6d142d097aa1c310a932",
            "filename": "deps/v8/src/compiler/node.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "506b38d53f4af4d02587d3e1cd8c4da5c42c6515",
            "filename": "deps/v8/src/compiler/node.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f84598e3fd598cd85c38e50ab08ecbde66a41764",
            "filename": "deps/v8/src/compiler/opcodes.h",
            "status": "modified",
            "additions": 11,
            "deletions": 5,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "4512a5274213c0e6e7c9093b1b0eaa275eeac310",
            "filename": "deps/v8/src/compiler/operation-typer.cc",
            "status": "modified",
            "additions": 367,
            "deletions": 349,
            "changes": 716,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "719d381ab851613530701c3697832d7a84c4122b",
            "filename": "deps/v8/src/compiler/operation-typer.h",
            "status": "modified",
            "additions": 40,
            "deletions": 35,
            "changes": 75,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ba9b400b927f1695fe0c56d6e01c3bc99eb957cf",
            "filename": "deps/v8/src/compiler/operator-properties.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "779457bcf76c3499db06975e1c9d0319277ffa6d",
            "filename": "deps/v8/src/compiler/pipeline.cc",
            "status": "modified",
            "additions": 223,
            "deletions": 193,
            "changes": 416,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "3f8affc61beb8096354ff9760642adf09876deb7",
            "filename": "deps/v8/src/compiler/pipeline.h",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "54a0b0e67c18d9436ae4b10266ceee8c038b9602",
            "filename": "deps/v8/src/compiler/ppc/code-generator-ppc.cc",
            "status": "modified",
            "additions": 123,
            "deletions": 28,
            "changes": 151,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "9638a50f7b00c23e9b5e1e5175bc32b8ba77a193",
            "filename": "deps/v8/src/compiler/ppc/instruction-selector-ppc.cc",
            "status": "modified",
            "additions": 106,
            "deletions": 13,
            "changes": 119,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ce1bece51c813984da179ecadfb6343e86f9f8e8",
            "filename": "deps/v8/src/compiler/property-access-builder.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "778481f8c0630921b232daee7ec8f5ac3f63596a",
            "filename": "deps/v8/src/compiler/raw-machine-assembler.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ea4636b6d6e5a2284187f530bd2f2a0e11fb5322",
            "filename": "deps/v8/src/compiler/raw-machine-assembler.h",
            "status": "modified",
            "additions": 22,
            "deletions": 14,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "5ecef0408be4c849cccd695ccb8329ec7f27055e",
            "filename": "deps/v8/src/compiler/redundancy-elimination.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fredundancy-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fredundancy-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fredundancy-elimination.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "8bf8337bd1c2807465a97e2d68675cf8775d8e00",
            "filename": "deps/v8/src/compiler/register-allocator.cc",
            "status": "modified",
            "additions": 28,
            "deletions": 3,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "e3c49df7a6c1444fa0fbe0a4e776122661a00cde",
            "filename": "deps/v8/src/compiler/representation-change.cc",
            "status": "modified",
            "additions": 72,
            "deletions": 75,
            "changes": 147,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "85a69d92eb8e829cdd0726150c1530bae2c19a93",
            "filename": "deps/v8/src/compiler/representation-change.h",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "81bd8266c046c4e8878e67489b204b1cb966edd9",
            "filename": "deps/v8/src/compiler/s390/code-generator-s390.cc",
            "status": "modified",
            "additions": 339,
            "deletions": 29,
            "changes": 368,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c502135c302d871a9650d4cc6ec1c229dd058d9d",
            "filename": "deps/v8/src/compiler/s390/instruction-selector-s390.cc",
            "status": "modified",
            "additions": 120,
            "deletions": 9,
            "changes": 129,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "1bedeb8e047d4ca156eb47c48712744afb3a14e3",
            "filename": "deps/v8/src/compiler/schedule.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "619237582607357e515c1425a0c26c3d988a6808",
            "filename": "deps/v8/src/compiler/simd-scalar-lowering.cc",
            "status": "modified",
            "additions": 205,
            "deletions": 20,
            "changes": 225,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "0bbac969064c4d816efbb7d0bec7065a79e1da0c",
            "filename": "deps/v8/src/compiler/simd-scalar-lowering.h",
            "status": "modified",
            "additions": 15,
            "deletions": 7,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f24f000887d50278c4325e20d62a653de339b2e9",
            "filename": "deps/v8/src/compiler/simplified-lowering.cc",
            "status": "modified",
            "additions": 271,
            "deletions": 261,
            "changes": 532,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "b78d5d5cfe0967c53ebf716d2bb258fa3bfe8578",
            "filename": "deps/v8/src/compiler/simplified-lowering.h",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "8b64eb566e6b5a24be701350f8772ba4716825ec",
            "filename": "deps/v8/src/compiler/simplified-operator.cc",
            "status": "modified",
            "additions": 45,
            "deletions": 22,
            "changes": 67,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "62e7f73bfab529f942c6f540e33e6c004cc8b1dd",
            "filename": "deps/v8/src/compiler/simplified-operator.h",
            "status": "modified",
            "additions": 35,
            "deletions": 20,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7a02c9a37cf004cf65a6343f5c9f44f9693b1a8e",
            "filename": "deps/v8/src/compiler/type-cache.h",
            "status": "modified",
            "additions": 59,
            "deletions": 60,
            "changes": 119,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-cache.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-cache.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-cache.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "23ef594c5da063e2ce9b89a88b6bde5e4a85f1c7",
            "filename": "deps/v8/src/compiler/type-narrowing-reducer.cc",
            "status": "added",
            "additions": 86,
            "deletions": 0,
            "changes": 86,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "4b1d58936114401b1ed41f780bd1a529c5fcbebb",
            "filename": "deps/v8/src/compiler/type-narrowing-reducer.h",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ddcedd6d326b4723287b3494a1878cb8e53e5ce9",
            "filename": "deps/v8/src/compiler/typed-optimization.cc",
            "status": "modified",
            "additions": 93,
            "deletions": 135,
            "changes": 228,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "cbb5ab78655a10411bc2616a7621f4888f8ca01b",
            "filename": "deps/v8/src/compiler/typed-optimization.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "29f6f0230d8ad5acbbcba676274d54d6a7676608",
            "filename": "deps/v8/src/compiler/typer.cc",
            "status": "modified",
            "additions": 495,
            "deletions": 588,
            "changes": 1083,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "2d3cda7be3e01d6558e08062a516f390f860c461",
            "filename": "deps/v8/src/compiler/typer.h",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "b101acad1dda4b3fd49f0e0099fe8737a8ea6906",
            "filename": "deps/v8/src/compiler/types.cc",
            "status": "modified",
            "additions": 234,
            "deletions": 173,
            "changes": 407,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "9f7a7d3d805bfbeef2895a3398a6675b361a1ee1",
            "filename": "deps/v8/src/compiler/types.h",
            "status": "modified",
            "additions": 243,
            "deletions": 269,
            "changes": 512,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "864d33bc201eb31e609f553e0fcd68644ffe8d9f",
            "filename": "deps/v8/src/compiler/value-numbering-reducer.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fvalue-numbering-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fvalue-numbering-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fvalue-numbering-reducer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "7aaab7963d64726cb72ebd4d49e18101fc867c7b",
            "filename": "deps/v8/src/compiler/verifier.cc",
            "status": "modified",
            "additions": 63,
            "deletions": 49,
            "changes": 112,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "daceffd331302376f374b20fda2ecf764187e01c",
            "filename": "deps/v8/src/compiler/wasm-compiler.cc",
            "status": "modified",
            "additions": 1783,
            "deletions": 1693,
            "changes": 3476,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "01c339fb47251978a05db17d1d73ba33398fccdd",
            "filename": "deps/v8/src/compiler/wasm-compiler.h",
            "status": "modified",
            "additions": 78,
            "deletions": 179,
            "changes": 257,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "caf38c8d8c9ceefccf8d2b5435d76c2bd55db6b0",
            "filename": "deps/v8/src/compiler/wasm-linkage.cc",
            "status": "removed",
            "additions": 0,
            "deletions": 367,
            "changes": 367,
            "blob_url": "https://github.com/nodejs/node/blob/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-linkage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/4d94bb2b1f72b6b612983a517a39c5545724a3ad/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-linkage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-linkage.cc?ref=4d94bb2b1f72b6b612983a517a39c5545724a3ad"
        },
        {
            "sha": "5d7534d2ebe1c92f6e68f315efb6e412297a5468",
            "filename": "deps/v8/src/compiler/x64/code-generator-x64.cc",
            "status": "modified",
            "additions": 53,
            "deletions": 113,
            "changes": 166,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "b14f2fdb8c54e547cd8241c41c7570756d2e50f3",
            "filename": "deps/v8/src/compiler/x64/instruction-selector-x64.cc",
            "status": "modified",
            "additions": 193,
            "deletions": 196,
            "changes": 389,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "eb164591e518a008b17fbd1715325b3b1cf4c6d6",
            "filename": "deps/v8/src/contexts-inl.h",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcontexts-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcontexts-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcontexts-inl.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "2d2ff2d2ce206d34be94a7f2c86356bfef2063aa",
            "filename": "deps/v8/src/contexts.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 56,
            "changes": 71,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcontexts.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcontexts.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcontexts.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "b66bb94a4b41ec9e04b35132b780373a1ad7587e",
            "filename": "deps/v8/src/contexts.h",
            "status": "modified",
            "additions": 24,
            "deletions": 37,
            "changes": 61,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcontexts.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcontexts.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcontexts.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f2a6be42279f521e506288218ea8ac0e6c79143a",
            "filename": "deps/v8/src/conversions-inl.h",
            "status": "modified",
            "additions": 10,
            "deletions": 11,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fconversions-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fconversions-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fconversions-inl.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "77d3e8bbcd4380c4f757ab2f56c6e5a6bad20d80",
            "filename": "deps/v8/src/conversions.h",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fconversions.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fconversions.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fconversions.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "95812cf518700068ba1af7dff2d649416c6a5272",
            "filename": "deps/v8/src/counters.h",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcounters.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fcounters.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcounters.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "a2463479623f55b06e306be3d1ba7c1c25ec34f8",
            "filename": "deps/v8/src/d8.cc",
            "status": "modified",
            "additions": 31,
            "deletions": 47,
            "changes": 78,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fd8.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fd8.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "e4a58707c2ebda016425859feee3040f8018c0a3",
            "filename": "deps/v8/src/d8.h",
            "status": "modified",
            "additions": 14,
            "deletions": 33,
            "changes": 47,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fd8.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fd8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "a5486ccd1e933bf4e2ccfc4b0a035701b870e5c4",
            "filename": "deps/v8/src/d8.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fd8.js",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fd8.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8.js?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "d98d4f6f87b7c001b8c45669ffac6bf561608e5c",
            "filename": "deps/v8/src/date.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdate.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdate.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdate.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "28947ebcbe344cc65c58ddd72f4943281f87d1bc",
            "filename": "deps/v8/src/date.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdate.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdate.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdate.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "2ca6d320641a553cda670f4821b91c51e0e08171",
            "filename": "deps/v8/src/debug/arm64/debug-arm64.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Farm64%2Fdebug-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Farm64%2Fdebug-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Farm64%2Fdebug-arm64.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "dd63a0187c0225368ca4e6c535eeed0d6d433175",
            "filename": "deps/v8/src/debug/debug-evaluate.cc",
            "status": "modified",
            "additions": 62,
            "deletions": 21,
            "changes": 83,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "fbc98874403c7eaab555491d057ccb365648a760",
            "filename": "deps/v8/src/debug/debug-evaluate.h",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "2210b4e87f1bc6b18e2896a3f68f6507dcfda05c",
            "filename": "deps/v8/src/debug/debug-interface.h",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-interface.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-interface.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-interface.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f3185b149a48987d91ec627a15aa14c6d781b6b6",
            "filename": "deps/v8/src/debug/debug-scope-iterator.cc",
            "status": "modified",
            "additions": 29,
            "deletions": 11,
            "changes": 40,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "38109e754dc5d2eaffcd05b73ca503c2d9b68a5b",
            "filename": "deps/v8/src/debug/debug-scope-iterator.h",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c6e46d216739aef096ec0e2007088916d7c9984e",
            "filename": "deps/v8/src/debug/debug-scopes.cc",
            "status": "modified",
            "additions": 81,
            "deletions": 122,
            "changes": 203,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "c61cf73cc5e5492c1dc56fec974f80ed205e1340",
            "filename": "deps/v8/src/debug/debug-scopes.h",
            "status": "modified",
            "additions": 12,
            "deletions": 6,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "ab703f1f0e9779f0eb5d6618364766074905dd8d",
            "filename": "deps/v8/src/debug/debug-stack-trace-iterator.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "0c09afa87c37e5955dc3567c8596e0cc3f61d3ce",
            "filename": "deps/v8/src/debug/debug-stack-trace-iterator.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "b5dbbf8412e57da30bd25ef22dfd9c1a6f6257dc",
            "filename": "deps/v8/src/debug/debug.cc",
            "status": "modified",
            "additions": 69,
            "deletions": 33,
            "changes": 102,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "2c83d9855cf47712c6daf4dfc3a11a1c37f621f3",
            "filename": "deps/v8/src/debug/debug.h",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "219ed6a06046736230f333e8dda898bac4f6a29f",
            "filename": "deps/v8/src/debug/interface-types.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Finterface-types.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Finterface-types.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Finterface-types.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "f3bd7c86ec2cfa00866df2e8ca40b7217a8e34c4",
            "filename": "deps/v8/src/debug/ppc/debug-ppc.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fppc%2Fdebug-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fppc%2Fdebug-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fppc%2Fdebug-ppc.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "e7bc6f56c03a9d72c8f81dd0e199d06f6bc29198",
            "filename": "deps/v8/src/debug/s390/debug-s390.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fs390%2Fdebug-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdebug%2Fs390%2Fdebug-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fs390%2Fdebug-s390.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "5fa74d571a84867c686e33ebbdfd6734429fee02",
            "filename": "deps/v8/src/deoptimizer.cc",
            "status": "modified",
            "additions": 311,
            "deletions": 466,
            "changes": 777,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdeoptimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdeoptimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdeoptimizer.cc?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        },
        {
            "sha": "eae442dec38e918563a137cf88df716b6fc20ab9",
            "filename": "deps/v8/src/deoptimizer.h",
            "status": "modified",
            "additions": 15,
            "deletions": 14,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdeoptimizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/6a31d05340b22fc413ee83eaacd0a5565bbbe799/deps%2Fv8%2Fsrc%2Fdeoptimizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdeoptimizer.h?ref=6a31d05340b22fc413ee83eaacd0a5565bbbe799"
        }
    ],
    "stats": {
        "total": 118128,
        "additions": 76959,
        "deletions": 41169
    }
}