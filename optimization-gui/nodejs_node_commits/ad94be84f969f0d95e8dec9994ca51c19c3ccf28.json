{
    "author": "ofrobots",
    "message": "async_hooks: clean up comments\n\nWith some of the recent work, some of the comments were no longer\nrepresentative of the code, or were otherwise unclear. This commit\nfixes some obvious issues I found.\n\nRef: https://github.com/nodejs/node/commit/83e5215a4e8438a43b9f0002b7a43e2fd2dd37a4\nRef: https://github.com/nodejs/node/commit/0784b0440c05464f79b857f7d8698fcc953d3fb3\nPR-URL: https://github.com/nodejs/node/pull/18467\nReviewed-By: Andreas Madsen <amwebdk@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "ad94be84f969f0d95e8dec9994ca51c19c3ccf28",
    "files": [
        {
            "sha": "92cd9ba1e42b7475c714f6c88e3078b301e6f2dc",
            "filename": "lib/internal/async_hooks.js",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/ad94be84f969f0d95e8dec9994ca51c19c3ccf28/lib%2Finternal%2Fasync_hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/ad94be84f969f0d95e8dec9994ca51c19c3ccf28/lib%2Finternal%2Fasync_hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fasync_hooks.js?ref=ad94be84f969f0d95e8dec9994ca51c19c3ccf28",
            "patch": "@@ -11,27 +11,28 @@ const async_wrap = process.binding('async_wrap');\n  * the various asynchronous states of the application. These are:\n  *  kExecutionAsyncId: The async_id assigned to the resource responsible for the\n  *    current execution stack.\n- *  kTriggerAsyncId: The trigger_async_id of the resource responsible for\n- *    the current execution stack.\n+ *  kTriggerAsyncId: The async_id of the resource that caused (or 'triggered')\n+ *    the resource corresponding to the current execution stack.\n  *  kAsyncIdCounter: Incremental counter tracking the next assigned async_id.\n  *  kDefaultTriggerAsyncId: Written immediately before a resource's constructor\n- *    that sets the value of the init()'s triggerAsyncId. The order of\n- *    retrieving the triggerAsyncId value is passing directly to the\n- *    constructor -> value set in kDefaultTriggerAsyncId -> executionAsyncId of\n- *    the current resource.\n+ *    that sets the value of the init()'s triggerAsyncId. The precedence order\n+ *    of retrieving the triggerAsyncId value is:\n+ *    1. the value passed directly to the constructor\n+ *    2. value set in kDefaultTriggerAsyncId\n+ *    3. executionAsyncId of the current resource.\n  *\n- * async_ids_fast_stack is a Float64Array that contains part of the async ID\n+ * async_ids_stack is a Float64Array that contains part of the async ID\n  * stack. Each pushAsyncIds() call adds two doubles to it, and each\n  * popAsyncIds() call removes two doubles from it.\n  * It has a fixed size, so if that is exceeded, calls to the native\n  * side are used instead in pushAsyncIds() and popAsyncIds().\n  */\n const { async_id_symbol, async_hook_fields, async_id_fields } = async_wrap;\n // Store the pair executionAsyncId and triggerAsyncId in a std::stack on\n-// Environment::AsyncHooks::ids_stack_ tracks the resource responsible for the\n-// current execution stack. This is unwound as each resource exits. In the case\n-// of a fatal exception this stack is emptied after calling each hook's after()\n-// callback.\n+// Environment::AsyncHooks::async_ids_stack_ tracks the resource responsible for\n+// the current execution stack. This is unwound as each resource exits. In the\n+// case of a fatal exception this stack is emptied after calling each hook's\n+// after() callback.\n const { pushAsyncIds: pushAsyncIds_, popAsyncIds: popAsyncIds_ } = async_wrap;\n // For performance reasons, only track Promises when a hook is enabled.\n const { enablePromiseHook, disablePromiseHook } = async_wrap;"
        },
        {
            "sha": "706cd879901fba2e9b10265072d91039a2addc23",
            "filename": "src/async_wrap.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/ad94be84f969f0d95e8dec9994ca51c19c3ccf28/src%2Fasync_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/ad94be84f969f0d95e8dec9994ca51c19c3ccf28/src%2Fasync_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fasync_wrap.cc?ref=ad94be84f969f0d95e8dec9994ca51c19c3ccf28",
            "patch": "@@ -540,12 +540,12 @@ void AsyncWrap::Initialize(Local<Object> target,\n   // this way to allow JS and C++ to read/write each value as quickly as\n   // possible. The fields are represented as follows:\n   //\n-  // kAsyncUid: Maintains the state of the next unique id to be assigned.\n+  // kAsyncIdCounter: Maintains the state of the next unique id to be assigned.\n   //\n   // kDefaultTriggerAsyncId: Write the id of the resource responsible for a\n   //   handle's creation just before calling the new handle's constructor.\n   //   After the new handle is constructed kDefaultTriggerAsyncId is set back\n-  //   to 0.\n+  //   to -1.\n   FORCE_SET_TARGET_FIELD(target,\n                          \"async_id_fields\",\n                          env->async_hooks()->async_id_fields().GetJSArray());"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 14,
        "deletions": 13
    }
}