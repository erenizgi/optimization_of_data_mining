{
    "author": "antsmartian",
    "message": "async_hooks: adding regression test case for async/await\n\nThe actual bug was fixed by a V8 update in Node v10.4.0.\n\nSee: https://github.com/nodejs/node/pull/19989\nPR-URL: https://github.com/nodejs/node/pull/22374\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "c8a27a761773b9815bd6af07ce6d6e72ae19df30",
    "files": [
        {
            "sha": "791adab75c8621eeb20a5e7630eef51b73e7c56e",
            "filename": "test/parallel/test-async-hooks-async-await.js",
            "status": "added",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/c8a27a761773b9815bd6af07ce6d6e72ae19df30/test%2Fparallel%2Ftest-async-hooks-async-await.js",
            "raw_url": "https://github.com/nodejs/node/raw/c8a27a761773b9815bd6af07ce6d6e72ae19df30/test%2Fparallel%2Ftest-async-hooks-async-await.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-hooks-async-await.js?ref=c8a27a761773b9815bd6af07ce6d6e72ae19df30",
            "patch": "@@ -0,0 +1,26 @@\n+// Test async-hooks fired on right\n+// asyncIds & triggerAsyncId for async-await\n+'use strict';\n+\n+require('../common');\n+const async_hooks = require('async_hooks');\n+const assert = require('assert');\n+\n+const asyncIds = [];\n+async_hooks.createHook({\n+  init: (asyncId, type, triggerAsyncId) => {\n+    asyncIds.push([triggerAsyncId, asyncId]);\n+  }\n+}).enable();\n+\n+async function main() {\n+  await null;\n+}\n+\n+main().then(() => {\n+  // Verify the relationships between async ids\n+  // 1 => 2, 2 => 3 etc\n+  assert.strictEqual(asyncIds[0][1], asyncIds[1][0]);\n+  assert.strictEqual(asyncIds[0][1], asyncIds[3][0]);\n+  assert.strictEqual(asyncIds[1][1], asyncIds[2][0]);\n+});"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 26,
        "deletions": 0
    }
}