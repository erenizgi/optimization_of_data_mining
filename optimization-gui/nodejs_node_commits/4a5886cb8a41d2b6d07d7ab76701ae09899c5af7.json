{
    "author": "addaleax",
    "message": "test: fix flaky addons/callback-scope/test-resolve-async\n\nFixes: https://github.com/nodejs/node/issues/22668\nPR-URL: https://github.com/nodejs/node/pull/22664\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: Denys Otrishko <shishugi@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: George Adams <george.adams@uk.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "4a5886cb8a41d2b6d07d7ab76701ae09899c5af7",
    "files": [
        {
            "sha": "c2942397737359996fdd19170d5471a12ef11aec",
            "filename": "test/addons/callback-scope/test-resolve-async.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/4a5886cb8a41d2b6d07d7ab76701ae09899c5af7/test%2Faddons%2Fcallback-scope%2Ftest-resolve-async.js",
            "raw_url": "https://github.com/nodejs/node/raw/4a5886cb8a41d2b6d07d7ab76701ae09899c5af7/test%2Faddons%2Fcallback-scope%2Ftest-resolve-async.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fcallback-scope%2Ftest-resolve-async.js?ref=4a5886cb8a41d2b6d07d7ab76701ae09899c5af7",
            "patch": "@@ -4,7 +4,9 @@ const common = require('../../common');\n const assert = require('assert');\n const { testResolveAsync } = require(`./build/${common.buildType}/binding`);\n \n+// Checks that resolving promises from C++ works.\n+\n let called = false;\n testResolveAsync().then(() => { called = true; });\n \n-setTimeout(() => { assert(called); }, common.platformTimeout(50));\n+process.on('beforeExit', () => { assert(called); });"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}