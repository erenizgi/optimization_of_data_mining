{
    "author": "starkwang",
    "message": "repl: use promise#finally\n\nPR-URL: https://github.com/nodejs/node/pull/23971\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "c1e670338ba105faaf6df3e8ab7086bede04ad6f",
    "files": [
        {
            "sha": "75750ca1cd629541729fa7fccfc78d4e5429a6c9",
            "filename": "lib/repl.js",
            "status": "modified",
            "additions": 4,
            "deletions": 10,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/c1e670338ba105faaf6df3e8ab7086bede04ad6f/lib%2Frepl.js",
            "raw_url": "https://github.com/nodejs/node/raw/c1e670338ba105faaf6df3e8ab7086bede04ad6f/lib%2Frepl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Frepl.js?ref=c1e670338ba105faaf6df3e8ab7086bede04ad6f",
            "patch": "@@ -376,25 +376,19 @@ function REPLServer(prompt,\n         }\n \n         promise.then((result) => {\n-          // Remove prioritized SIGINT listener if it was not called.\n-          // TODO(TimothyGu): Use Promise.prototype.finally when it becomes\n-          // available.\n-          prioritizedSigintQueue.delete(sigintListener);\n-\n           finishExecution(undefined, result);\n-          unpause();\n         }, (err) => {\n-          // Remove prioritized SIGINT listener if it was not called.\n-          prioritizedSigintQueue.delete(sigintListener);\n-\n-          unpause();\n           if (err && process.domain) {\n             debug('not recoverable, send to domain');\n             process.domain.emit('error', err);\n             process.domain.exit();\n             return;\n           }\n           finishExecution(err);\n+        }).finally(() => {\n+          // Remove prioritized SIGINT listener if it was not called.\n+          prioritizedSigintQueue.delete(sigintListener);\n+          unpause();\n         });\n       }\n     }"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 4,
        "deletions": 10
    }
}