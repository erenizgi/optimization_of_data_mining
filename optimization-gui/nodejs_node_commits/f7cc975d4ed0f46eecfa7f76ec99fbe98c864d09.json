{
    "author": "devsnek",
    "message": "deps: cherry-pick 39d546a from upstream V8\n\nOriginal commit message:\n\n    [api] introduce v8::Value::IsModuleNamespaceObject\n\n    This allows an embedder to check if a Value is a module namespace object.\n\n    Cq-Include-Trybots: luci.chromium.try:linux_chromium_rel_ng\n    Change-Id: Idffceff451dd5f5c6a53d4cb3ce02c1c2c5b653c\n    Reviewed-on: https://chromium-review.googlesource.com/1011762\n    Reviewed-by: Georg Neis <neis@chromium.org>\n    Commit-Queue: Georg Neis <neis@chromium.org>\n    Cr-Commit-Position: refs/heads/master@{#52597}\n\nRefs: https://github.com/v8/v8/commit/39d546a24022b62b00aedf7b556ac6c9e2306aab\n\nPR-URL: https://github.com/nodejs/node/pull/20016\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Guy Bedford <guybedford@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09",
    "files": [
        {
            "sha": "08e4f36cec4d242770d408a9ca9a9fb4b15fdf2a",
            "filename": "common.gypi",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/common.gypi",
            "raw_url": "https://github.com/nodejs/node/raw/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/common.gypi",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/common.gypi?ref=f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09",
            "patch": "@@ -27,7 +27,7 @@\n \n     # Reset this number to 0 on major V8 upgrades.\n     # Increment by one for each non-official patch applied to deps/v8.\n-    'v8_embedder_string': '-node.1',\n+    'v8_embedder_string': '-node.2',\n \n     # Enable disassembler for `--print-code` v8 options\n     'v8_enable_disassembler': 1,"
        },
        {
            "sha": "4b5163961d282ee874aa982073c2f231379e00c0",
            "filename": "deps/v8/AUTHORS",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/deps%2Fv8%2FAUTHORS",
            "raw_url": "https://github.com/nodejs/node/raw/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/deps%2Fv8%2FAUTHORS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FAUTHORS?ref=f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09",
            "patch": "@@ -70,6 +70,7 @@ Felix Geisend√∂rfer <haimuiba@gmail.com>\n Filipe David Manana <fdmanana@gmail.com>\n Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\n Geoffrey Garside <ggarside@gmail.com>\n+Gus Caplan <me@gus.host>\n Gwang Yoon Hwang <ryumiel@company100.net>\n Henrique Ferreiro <henrique.ferreiro@gmail.com>\n Hirofumi Mako <mkhrfm@gmail.com>"
        },
        {
            "sha": "c6e9250e4e938b6282eb1d6cdbc9993abae3422e",
            "filename": "deps/v8/include/v8.h",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/deps%2Fv8%2Finclude%2Fv8.h",
            "raw_url": "https://github.com/nodejs/node/raw/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/deps%2Fv8%2Finclude%2Fv8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8.h?ref=f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09",
            "patch": "@@ -2378,6 +2378,11 @@ class V8_EXPORT Value : public Data {\n \n   bool IsWebAssemblyCompiledModule() const;\n \n+  /**\n+   * Returns true if the value is a Module Namespace Object.\n+   */\n+  bool IsModuleNamespaceObject() const;\n+\n   V8_WARN_UNUSED_RESULT MaybeLocal<BigInt> ToBigInt(\n       Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT MaybeLocal<Boolean> ToBoolean("
        },
        {
            "sha": "6dd669ee1133bff0f2edd32f92c0b3c322f1cf8e",
            "filename": "deps/v8/src/api.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/deps%2Fv8%2Fsrc%2Fapi.cc",
            "raw_url": "https://github.com/nodejs/node/raw/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/deps%2Fv8%2Fsrc%2Fapi.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.cc?ref=f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09",
            "patch": "@@ -3583,6 +3583,10 @@ bool Value::IsSetIterator() const {\n \n bool Value::IsPromise() const { return Utils::OpenHandle(this)->IsJSPromise(); }\n \n+bool Value::IsModuleNamespaceObject() const {\n+  return Utils::OpenHandle(this)->IsJSModuleNamespace();\n+}\n+\n MaybeLocal<String> Value::ToString(Local<Context> context) const {\n   auto obj = Utils::OpenHandle(this);\n   if (obj->IsString()) return ToApiHandle<String>(obj);"
        },
        {
            "sha": "261ada0f2bb30804ba00b8678a743994eb2cccb1",
            "filename": "deps/v8/test/cctest/test-api.cc",
            "status": "modified",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc?ref=f7cc975d4ed0f46eecfa7f76ec99fbe98c864d09",
            "patch": "@@ -27274,6 +27274,35 @@ TEST(ImportMeta) {\n   CHECK(result->StrictEquals(Local<v8::Value>::Cast(v8::Utils::ToLocal(meta))));\n }\n \n+TEST(GetModuleNamespace) {\n+  LocalContext context;\n+  v8::Isolate* isolate = context->GetIsolate();\n+  v8::HandleScope scope(isolate);\n+\n+  Local<String> url = v8_str(\"www.google.com\");\n+  Local<String> source_text = v8_str(\"export default 5; export const a = 10;\");\n+  v8::ScriptOrigin origin(url, Local<v8::Integer>(), Local<v8::Integer>(),\n+                          Local<v8::Boolean>(), Local<v8::Integer>(),\n+                          Local<v8::Value>(), Local<v8::Boolean>(),\n+                          Local<v8::Boolean>(), True(isolate));\n+  v8::ScriptCompiler::Source source(source_text, origin);\n+  Local<Module> module =\n+      v8::ScriptCompiler::CompileModule(isolate, &source).ToLocalChecked();\n+  module->InstantiateModule(context.local(), UnexpectedModuleResolveCallback)\n+      .ToChecked();\n+  module->Evaluate(context.local()).ToLocalChecked();\n+\n+  Local<Value> ns_val = module->GetModuleNamespace();\n+  CHECK(ns_val->IsModuleNamespaceObject());\n+  Local<Object> ns = ns_val.As<Object>();\n+  CHECK(ns->Get(context.local(), v8_str(\"default\"))\n+            .ToLocalChecked()\n+            ->StrictEquals(v8::Number::New(isolate, 5)));\n+  CHECK(ns->Get(context.local(), v8_str(\"a\"))\n+            .ToLocalChecked()\n+            ->StrictEquals(v8::Number::New(isolate, 10)));\n+}\n+\n TEST(GlobalTemplateWithDoubleProperty) {\n   v8::Isolate* isolate = CcTest::isolate();\n   v8::HandleScope handle_scope(isolate);"
        }
    ],
    "stats": {
        "total": 41,
        "additions": 40,
        "deletions": 1
    }
}