{
    "author": "danbev",
    "message": "src: rename fs_req_wrap -> FSReqWrapSync\n\nThis commit renames fs_req_wrap to FSReqWrapSync to make it consistent\nwith most of the other classes in the code base.\n\nPR-URL: https://github.com/nodejs/node/pull/19614\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "376f949510eeb7b3e1036079451f68bd5210b68b",
    "files": [
        {
            "sha": "6e1818b45f805533d05b6c49dc9337736549e121",
            "filename": "src/node_file.cc",
            "status": "modified",
            "additions": 37,
            "deletions": 37,
            "changes": 74,
            "blob_url": "https://github.com/nodejs/node/blob/376f949510eeb7b3e1036079451f68bd5210b68b/src%2Fnode_file.cc",
            "raw_url": "https://github.com/nodejs/node/raw/376f949510eeb7b3e1036079451f68bd5210b68b/src%2Fnode_file.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_file.cc?ref=376f949510eeb7b3e1036079451f68bd5210b68b",
            "patch": "@@ -676,16 +676,16 @@ void AfterScanDir(uv_fs_t* req) {\n }\n \n \n-// This struct is only used on sync fs calls.\n+// This class is only used on sync fs calls.\n // For async calls FSReqWrap is used.\n-class fs_req_wrap {\n+class FSReqWrapSync {\n  public:\n-  fs_req_wrap() {}\n-  ~fs_req_wrap() { uv_fs_req_cleanup(&req); }\n+  FSReqWrapSync() {}\n+  ~FSReqWrapSync() { uv_fs_req_cleanup(&req); }\n   uv_fs_t req;\n \n  private:\n-  DISALLOW_COPY_AND_ASSIGN(fs_req_wrap);\n+  DISALLOW_COPY_AND_ASSIGN(FSReqWrapSync);\n };\n \n // Returns nullptr if the operation fails from the start.\n@@ -729,7 +729,7 @@ inline FSReqBase* AsyncCall(Environment* env,\n // creating an error in the C++ land.\n // ctx must be checked using value->IsObject() before being passed.\n template <typename Func, typename... Args>\n-inline int SyncCall(Environment* env, Local<Value> ctx, fs_req_wrap* req_wrap,\n+inline int SyncCall(Environment* env, Local<Value> ctx, FSReqWrapSync* req_wrap,\n     const char* syscall, Func fn, Args... args) {\n   env->PrintSyncTrace();\n   int err = fn(env->event_loop(), &(req_wrap->req), args..., nullptr);\n@@ -775,7 +775,7 @@ void Access(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_access, *path, mode);\n   } else {  // access(path, mode, undefined, ctx)\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[3], &req_wrap, \"access\", uv_fs_access, *path, mode);\n   }\n }\n@@ -796,7 +796,7 @@ void Close(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_close, fd);\n   } else {  // close(fd, undefined, ctx)\n     CHECK_EQ(argc, 3);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[2], &req_wrap, \"close\", uv_fs_close, fd);\n   }\n }\n@@ -904,7 +904,7 @@ static void Stat(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_stat, *path);\n   } else {  // stat(path, undefined, ctx)\n     CHECK_EQ(argc, 3);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int err = SyncCall(env, args[2], &req_wrap, \"stat\", uv_fs_stat, *path);\n     if (err == 0) {\n       FillStatsArray(env->fs_stats_field_array(),\n@@ -928,7 +928,7 @@ static void LStat(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_lstat, *path);\n   } else {  // lstat(path, undefined, ctx)\n     CHECK_EQ(argc, 3);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int err = SyncCall(env, args[2], &req_wrap, \"lstat\", uv_fs_lstat, *path);\n     if (err == 0) {\n       FillStatsArray(env->fs_stats_field_array(),\n@@ -952,7 +952,7 @@ static void FStat(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_fstat, fd);\n   } else {  // fstat(fd, undefined, ctx)\n     CHECK_EQ(argc, 3);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int err = SyncCall(env, args[2], &req_wrap, \"fstat\", uv_fs_fstat, fd);\n     if (err == 0) {\n       FillStatsArray(env->fs_stats_field_array(),\n@@ -981,7 +981,7 @@ static void Symlink(const FunctionCallbackInfo<Value>& args) {\n                   AfterNoArgs, uv_fs_symlink, *target, *path, flags);\n   } else {  // symlink(target, path, flags, undefinec, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req;\n+    FSReqWrapSync req;\n     SyncCall(env, args[4], &req, \"symlink\",\n              uv_fs_symlink, *target, *path, flags);\n   }\n@@ -1005,7 +1005,7 @@ static void Link(const FunctionCallbackInfo<Value>& args) {\n                   AfterNoArgs, uv_fs_link, *src, *dest);\n   } else {  // link(src, dest)\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req;\n+    FSReqWrapSync req;\n     SyncCall(env, args[3], &req, \"link\",\n              uv_fs_link, *src, *dest);\n   }\n@@ -1028,7 +1028,7 @@ static void ReadLink(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_readlink, *path);\n   } else {\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req;\n+    FSReqWrapSync req;\n     int err = SyncCall(env, args[3], &req, \"readlink\",\n                        uv_fs_readlink, *path);\n     if (err < 0) {\n@@ -1068,7 +1068,7 @@ static void Rename(const FunctionCallbackInfo<Value>& args) {\n                   UTF8, AfterNoArgs, uv_fs_rename, *old_path, *new_path);\n   } else {\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req;\n+    FSReqWrapSync req;\n     SyncCall(env, args[3], &req, \"rename\", uv_fs_rename, *old_path, *new_path);\n   }\n }\n@@ -1091,7 +1091,7 @@ static void FTruncate(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_ftruncate, fd, len);\n   } else {\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req;\n+    FSReqWrapSync req;\n     SyncCall(env, args[3], &req, \"ftruncate\", uv_fs_ftruncate, fd, len);\n   }\n }\n@@ -1111,7 +1111,7 @@ static void Fdatasync(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_fdatasync, fd);\n   } else {\n     CHECK_EQ(argc, 3);\n-    fs_req_wrap req;\n+    FSReqWrapSync req;\n     SyncCall(env, args[2], &req, \"fdatasync\", uv_fs_fdatasync, fd);\n   }\n }\n@@ -1131,7 +1131,7 @@ static void Fsync(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_fsync, fd);\n   } else {\n     CHECK_EQ(argc, 3);\n-    fs_req_wrap req;\n+    FSReqWrapSync req;\n     SyncCall(env, args[2], &req, \"fsync\", uv_fs_fsync, fd);\n   }\n }\n@@ -1151,7 +1151,7 @@ static void Unlink(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_unlink, *path);\n   } else {\n     CHECK_EQ(argc, 3);\n-    fs_req_wrap req;\n+    FSReqWrapSync req;\n     SyncCall(env, args[2], &req, \"unlink\", uv_fs_unlink, *path);\n   }\n }\n@@ -1171,7 +1171,7 @@ static void RMDir(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_rmdir, *path);\n   } else {  // rmdir(path, undefined, ctx)\n     CHECK_EQ(argc, 3);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[2], &req_wrap, \"rmdir\",\n              uv_fs_rmdir, *path);\n   }\n@@ -1195,7 +1195,7 @@ static void MKDir(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_mkdir, *path, mode);\n   } else {  // mkdir(path, mode, undefined, ctx)\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[3], &req_wrap, \"mkdir\",\n              uv_fs_mkdir, *path, mode);\n   }\n@@ -1218,7 +1218,7 @@ static void RealPath(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_realpath, *path);\n   } else {  // realpath(path, encoding, undefined, ctx)\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int err = SyncCall(env, args[3], &req_wrap, \"realpath\",\n                        uv_fs_realpath, *path);\n     if (err < 0) {\n@@ -1259,7 +1259,7 @@ static void ReadDir(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_scandir, *path, 0 /*flags*/);\n   } else {  // readdir(path, encoding, undefined, ctx)\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int err = SyncCall(env, args[3], &req_wrap, \"scandir\",\n                        uv_fs_scandir, *path, 0 /*flags*/);\n     if (err < 0) {\n@@ -1343,7 +1343,7 @@ static void Open(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_open, *path, flags, mode);\n   } else {  // open(path, flags, mode, undefined, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int result = SyncCall(env, args[4], &req_wrap, \"open\",\n                           uv_fs_open, *path, flags, mode);\n     args.GetReturnValue().Set(result);\n@@ -1371,7 +1371,7 @@ static void OpenFileHandle(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_open, *path, flags, mode);\n   } else {  // openFileHandle(path, flags, mode, undefined, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int result = SyncCall(env, args[4], &req_wrap, \"open\",\n                           uv_fs_open, *path, flags, mode);\n     if (result < 0) {\n@@ -1405,7 +1405,7 @@ static void CopyFile(const FunctionCallbackInfo<Value>& args) {\n                   uv_fs_copyfile, *src, *dest, flags);\n   } else {  // copyFile(src, dest, flags, undefined, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[4], &req_wrap, \"copyfile\",\n              uv_fs_copyfile, *src, *dest, flags);\n   }\n@@ -1456,7 +1456,7 @@ static void WriteBuffer(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_write, fd, &uvbuf, 1, pos);\n   } else {  // write(fd, buffer, off, len, pos, undefined, ctx)\n     CHECK_EQ(argc, 7);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int bytesWritten = SyncCall(env, args[6], &req_wrap, \"write\",\n                                 uv_fs_write, fd, &uvbuf, 1, pos);\n     args.GetReturnValue().Set(bytesWritten);\n@@ -1499,7 +1499,7 @@ static void WriteBuffers(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_write, fd, *iovs, iovs.length(), pos);\n   } else {  // writeBuffers(fd, chunks, pos, undefined, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     int bytesWritten = SyncCall(env, args[4], &req_wrap, \"write\",\n                                 uv_fs_write, fd, *iovs, iovs.length(), pos);\n     args.GetReturnValue().Set(bytesWritten);\n@@ -1578,7 +1578,7 @@ static void WriteString(const FunctionCallbackInfo<Value>& args) {\n     }\n   } else {  // write(fd, string, pos, enc, undefined, ctx)\n     CHECK_EQ(argc, 6);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     FSReqBase::FSReqBuffer stack_buffer;\n     if (buf == nullptr) {\n       len = StringBytes::StorageSize(env->isolate(), value, enc);\n@@ -1643,7 +1643,7 @@ static void Read(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_read, fd, &uvbuf, 1, pos);\n   } else {  // read(fd, buffer, offset, len, pos, undefined, ctx)\n     CHECK_EQ(argc, 7);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     const int bytesRead = SyncCall(env, args[6], &req_wrap, \"read\",\n                                    uv_fs_read, fd, &uvbuf, 1, pos);\n     args.GetReturnValue().Set(bytesRead);\n@@ -1672,7 +1672,7 @@ static void Chmod(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_chmod, *path, mode);\n   } else {  // chmod(path, mode, undefined, ctx)\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[3], &req_wrap, \"chmod\",\n              uv_fs_chmod, *path, mode);\n   }\n@@ -1700,7 +1700,7 @@ static void FChmod(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_fchmod, fd, mode);\n   } else {  // fchmod(fd, mode, undefined, ctx)\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[3], &req_wrap, \"fchmod\",\n              uv_fs_fchmod, fd, mode);\n   }\n@@ -1731,7 +1731,7 @@ static void Chown(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_chown, *path, uid, gid);\n   } else {  // chown(path, uid, gid, undefined, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[4], &req_wrap, \"chown\",\n              uv_fs_chown, *path, uid, gid);\n   }\n@@ -1762,7 +1762,7 @@ static void FChown(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_fchown, fd, uid, gid);\n   } else {  // fchown(fd, uid, gid, undefined, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[4], &req_wrap, \"fchown\",\n              uv_fs_fchown, fd, uid, gid);\n   }\n@@ -1790,7 +1790,7 @@ static void UTimes(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_utime, *path, atime, mtime);\n   } else {  // utimes(path, atime, mtime, undefined, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[4], &req_wrap, \"utime\",\n              uv_fs_utime, *path, atime, mtime);\n   }\n@@ -1817,7 +1817,7 @@ static void FUTimes(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_futime, fd, atime, mtime);\n   } else {  // futimes(fd, atime, mtime, undefined, ctx)\n     CHECK_EQ(argc, 5);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[4], &req_wrap, \"futime\",\n              uv_fs_futime, fd, atime, mtime);\n   }\n@@ -1840,7 +1840,7 @@ static void Mkdtemp(const FunctionCallbackInfo<Value>& args) {\n               uv_fs_mkdtemp, *tmpl);\n   } else {  // mkdtemp(tmpl, encoding, undefined, ctx)\n     CHECK_EQ(argc, 4);\n-    fs_req_wrap req_wrap;\n+    FSReqWrapSync req_wrap;\n     SyncCall(env, args[3], &req_wrap, \"mkdtemp\",\n              uv_fs_mkdtemp, *tmpl);\n     const char* path = static_cast<const char*>(req_wrap.req.path);"
        }
    ],
    "stats": {
        "total": 74,
        "additions": 37,
        "deletions": 37
    }
}