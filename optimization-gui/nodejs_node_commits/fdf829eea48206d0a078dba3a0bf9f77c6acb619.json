{
    "author": "unknown",
    "message": "test: check parameter type of fs.mkdir()\n\nAdded tests to check parameter type of fs.mkdir(), fs.mkdirSync()\nand fsPromises.mkdir() to increase coverage.\n\nPR-URL: https://github.com/nodejs/node/pull/22616\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: George Adams <george.adams@uk.ibm.com>",
    "sha": "fdf829eea48206d0a078dba3a0bf9f77c6acb619",
    "files": [
        {
            "sha": "d07aab53769299c60cda9f935d5484cab63b4228",
            "filename": "test/parallel/test-fs-mkdir.js",
            "status": "modified",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/fdf829eea48206d0a078dba3a0bf9f77c6acb619/test%2Fparallel%2Ftest-fs-mkdir.js",
            "raw_url": "https://github.com/nodejs/node/raw/fdf829eea48206d0a078dba3a0bf9f77c6acb619/test%2Fparallel%2Ftest-fs-mkdir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-mkdir.js?ref=fdf829eea48206d0a078dba3a0bf9f77c6acb619",
            "patch": "@@ -177,6 +177,32 @@ if (common.isMainThread && (common.isLinux || common.isOSX)) {\n   });\n }\n \n+// mkdirSync and mkdir require options.recursive to be a boolean.\n+// Anything else generates an error.\n+{\n+  const pathname = path.join(tmpdir.path, nextdir());\n+  ['', 1, {}, [], null, Symbol('test'), () => {}].forEach((recursive) => {\n+    common.expectsError(\n+      () => fs.mkdir(pathname, { recursive }, common.mustNotCall()),\n+      {\n+        code: 'ERR_INVALID_ARG_TYPE',\n+        type: TypeError,\n+        message: 'The \"recursive\" argument must be of type boolean. Received ' +\n+          `type ${typeof recursive}`\n+      }\n+    );\n+    common.expectsError(\n+      () => fs.mkdirSync(pathname, { recursive }),\n+      {\n+        code: 'ERR_INVALID_ARG_TYPE',\n+        type: TypeError,\n+        message: 'The \"recursive\" argument must be of type boolean. Received ' +\n+          `type ${typeof recursive}`\n+      }\n+    );\n+  });\n+}\n+\n // Keep the event loop alive so the async mkdir() requests\n // have a chance to run (since they don't ref the event loop).\n process.nextTick(() => {});"
        },
        {
            "sha": "714f1db05d5494de9e508f361809b26d987e3f4c",
            "filename": "test/parallel/test-fs-promises.js",
            "status": "modified",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/fdf829eea48206d0a078dba3a0bf9f77c6acb619/test%2Fparallel%2Ftest-fs-promises.js",
            "raw_url": "https://github.com/nodejs/node/raw/fdf829eea48206d0a078dba3a0bf9f77c6acb619/test%2Fparallel%2Ftest-fs-promises.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-promises.js?ref=fdf829eea48206d0a078dba3a0bf9f77c6acb619",
            "patch": "@@ -211,6 +211,22 @@ function verifyStatObject(stat) {\n     assert.deepStrictEqual(list, ['baz2.js', 'dir']);\n     await rmdir(newdir);\n \n+    // mkdir when options is number.\n+    {\n+      const dir = path.join(tmpDir, nextdir());\n+      await mkdir(dir, 777);\n+      stats = await stat(dir);\n+      assert(stats.isDirectory());\n+    }\n+\n+    // mkdir when options is string.\n+    {\n+      const dir = path.join(tmpDir, nextdir());\n+      await mkdir(dir, '777');\n+      stats = await stat(dir);\n+      assert(stats.isDirectory());\n+    }\n+\n     // mkdirp when folder does not yet exist.\n     {\n       const dir = path.join(tmpDir, nextdir(), nextdir());\n@@ -250,6 +266,24 @@ function verifyStatObject(stat) {\n       assert(stats.isDirectory());\n     }\n \n+    // mkdirp require recursive option to be a boolean.\n+    // Anything else generates an error.\n+    {\n+      const dir = path.join(tmpDir, nextdir(), nextdir());\n+      ['', 1, {}, [], null, Symbol('test'), () => {}].forEach((recursive) => {\n+        assert.rejects(\n+          // mkdir() expects to get a boolean value for options.recursive.\n+          async () => mkdir(dir, { recursive }),\n+          {\n+            code: 'ERR_INVALID_ARG_TYPE',\n+            name: 'TypeError [ERR_INVALID_ARG_TYPE]',\n+            message: 'The \"recursive\" argument must be of type boolean. ' +\n+              `Received type ${typeof recursive}`\n+          }\n+        );\n+      });\n+    }\n+\n     await mkdtemp(path.resolve(tmpDir, 'FOO'));\n     assert.rejects(\n       // mkdtemp() expects to get a string prefix."
        }
    ],
    "stats": {
        "total": 60,
        "additions": 60,
        "deletions": 0
    }
}