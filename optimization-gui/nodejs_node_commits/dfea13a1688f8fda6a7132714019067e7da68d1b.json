{
    "author": "cjihrig",
    "message": "test: verify inspector help url works\n\nThis commit adds basic functionality testing of the\nhelp URL printed when the inspector starts.\n\nPR-URL: https://github.com/nodejs/node/pull/19887\nRefs: https://github.com/nodejs/node/pull/19871\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Khaidi Chu <i@2333.moe>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "dfea13a1688f8fda6a7132714019067e7da68d1b",
    "files": [
        {
            "sha": "a6a38bd0265e78a00d35aba039e5a08fd21a086e",
            "filename": "test/internet/test-inspector-help-page.js",
            "status": "added",
            "additions": 37,
            "deletions": 0,
            "changes": 37,
            "blob_url": "https://github.com/nodejs/node/blob/dfea13a1688f8fda6a7132714019067e7da68d1b/test%2Finternet%2Ftest-inspector-help-page.js",
            "raw_url": "https://github.com/nodejs/node/raw/dfea13a1688f8fda6a7132714019067e7da68d1b/test%2Finternet%2Ftest-inspector-help-page.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Finternet%2Ftest-inspector-help-page.js?ref=dfea13a1688f8fda6a7132714019067e7da68d1b",
            "patch": "@@ -0,0 +1,37 @@\n+'use strict';\n+const common = require('../common');\n+\n+common.skipIfInspectorDisabled();\n+\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n+\n+const assert = require('assert');\n+const https = require('https');\n+const { spawnSync } = require('child_process');\n+const child = spawnSync(process.execPath, ['--inspect', '-e', '\"\"']);\n+const stderr = child.stderr.toString();\n+const helpUrl = stderr.match(/For help, see: (.+)/)[1];\n+\n+function check(url, cb) {\n+  https.get(url, common.mustCall((res) => {\n+    assert(res.statusCode >= 200 && res.statusCode < 400);\n+\n+    if (res.statusCode >= 300)\n+      return check(res.headers.location, cb);\n+\n+    let result = '';\n+\n+    res.setEncoding('utf8');\n+    res.on('data', (data) => {\n+      result += data;\n+    });\n+\n+    res.on('end', common.mustCall(() => {\n+      assert(/>Debugging Guide</.test(result));\n+      cb();\n+    }));\n+  })).on('error', common.mustNotCall);\n+}\n+\n+check(helpUrl, common.mustCall());"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 37,
        "deletions": 0
    }
}