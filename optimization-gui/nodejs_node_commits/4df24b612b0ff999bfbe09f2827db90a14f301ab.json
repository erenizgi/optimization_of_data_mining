{
    "author": "dodev",
    "message": "test: test add and remove for lib/domain\n\nTesting some of the more specific cases of using domain.add and\ndomain.remove. For example, calling domain.add twice with same event\nemmiter and actually removing an event emitter from the domain.\n\nPR-URL: https://github.com/nodejs/node/pull/24163\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "4df24b612b0ff999bfbe09f2827db90a14f301ab",
    "files": [
        {
            "sha": "8e1d082125cb0beb7d2a5026834d892dd6e44d71",
            "filename": "test/parallel/test-domain-add-remove.js",
            "status": "added",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/4df24b612b0ff999bfbe09f2827db90a14f301ab/test%2Fparallel%2Ftest-domain-add-remove.js",
            "raw_url": "https://github.com/nodejs/node/raw/4df24b612b0ff999bfbe09f2827db90a14f301ab/test%2Fparallel%2Ftest-domain-add-remove.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-domain-add-remove.js?ref=4df24b612b0ff999bfbe09f2827db90a14f301ab",
            "patch": "@@ -0,0 +1,26 @@\n+'use strict';\n+\n+require('../common');\n+const assert = require('assert');\n+const domain = require('domain');\n+const EventEmitter = require('events');\n+\n+const d = new domain.Domain();\n+const e = new EventEmitter();\n+const e2 = new EventEmitter();\n+\n+d.add(e);\n+assert.strictEqual(e.domain, d);\n+\n+// Adding the same event to a domain should not change the member count\n+let previousMemberCount = d.members.length;\n+d.add(e);\n+assert.strictEqual(previousMemberCount, d.members.length);\n+\n+d.add(e2);\n+assert.strictEqual(e2.domain, d);\n+\n+previousMemberCount = d.members.length;\n+d.remove(e2);\n+assert.notStrictEqual(e2.domain, d);\n+assert.strictEqual(previousMemberCount - 1, d.members.length);"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 26,
        "deletions": 0
    }
}