{
    "author": "cjihrig",
    "message": "test: simplify test-api-getreport.js\n\nPR-URL: https://github.com/nodejs/node/pull/26169\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "1aadfa87000849330cb3baa2061966f4511446ed",
    "files": [
        {
            "sha": "780a5147b3f1003f0546cf54a0492ecd908d99e1",
            "filename": "test/node-report/test-api-getreport.js",
            "status": "modified",
            "additions": 7,
            "deletions": 20,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/1aadfa87000849330cb3baa2061966f4511446ed/test%2Fnode-report%2Ftest-api-getreport.js",
            "raw_url": "https://github.com/nodejs/node/raw/1aadfa87000849330cb3baa2061966f4511446ed/test%2Fnode-report%2Ftest-api-getreport.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fnode-report%2Ftest-api-getreport.js?ref=1aadfa87000849330cb3baa2061966f4511446ed",
            "patch": "@@ -1,25 +1,12 @@\n+// Flags: --experimental-report\n 'use strict';\n-\n-// Testcase for returning report as a string via API call\n const common = require('../common');\n common.skipIfReportDisabled();\n const assert = require('assert');\n-if (process.argv[2] === 'child') {\n-  console.log(process.report.getReport());\n-} else {\n-  const helper = require('../common/report.js');\n-  const spawnSync = require('child_process').spawnSync;\n-  const tmpdir = require('../common/tmpdir');\n-  tmpdir.refresh();\n+const helper = require('../common/report');\n \n-  const args = ['--experimental-report', __filename, 'child'];\n-  const child = spawnSync(process.execPath, args, { cwd: tmpdir.path });\n-  const report_msg = 'Found report files';\n-  const std_msg = 'Found messages on stderr';\n-  assert.ok(child.stderr.toString().includes(\n-    `(node:${child.pid}) ExperimentalWarning: report is an` +\n-    ' experimental feature. This feature could change at any time'), std_msg);\n-  const reportFiles = helper.findReports(child.pid, tmpdir.path);\n-  assert.deepStrictEqual(reportFiles, [], report_msg);\n-  helper.validateContent(child.stdout);\n-}\n+common.expectWarning('ExperimentalWarning',\n+                     'report is an experimental feature. This feature could ' +\n+                     'change at any time');\n+helper.validateContent(process.report.getReport());\n+assert.deepStrictEqual(helper.findReports(process.pid, process.cwd()), []);"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 7,
        "deletions": 20
    }
}