{
    "author": "Trott",
    "message": "test: add WPT console-label-conversion test\n\nAdd console-label-conversion.any.js from WPT to the test suite.\n\nPR-URL: https://github.com/nodejs/node/pull/23340\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "39490798ba9198f65cee4b8a13e74a5019ab12d3",
    "files": [
        {
            "sha": "74c6c007b0151afa2aeeb5934824136226db224b",
            "filename": "test/parallel/test-whatwg-console-label-conversion.js",
            "status": "added",
            "additions": 45,
            "deletions": 0,
            "changes": 45,
            "blob_url": "https://github.com/nodejs/node/blob/39490798ba9198f65cee4b8a13e74a5019ab12d3/test%2Fparallel%2Ftest-whatwg-console-label-conversion.js",
            "raw_url": "https://github.com/nodejs/node/raw/39490798ba9198f65cee4b8a13e74a5019ab12d3/test%2Fparallel%2Ftest-whatwg-console-label-conversion.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-console-label-conversion.js?ref=39490798ba9198f65cee4b8a13e74a5019ab12d3",
            "patch": "@@ -0,0 +1,45 @@\n+'use strict';\n+\n+require('../common');\n+\n+const { test, assert_true, assert_throws } =\n+  require('../common/wpt');\n+\n+/* eslint-disable max-len, object-curly-spacing */\n+\n+/* The following tests should not be modified as they are copied */\n+/* WPT Refs:\n+   https://github.com/web-platform-tests/wpt/blob/6f0a96ed650935b17b6e5d277889cfbe0ccc103e/console/console-label-conversion.any.js\n+   License: hhttps://github.com/web-platform-tests/wpt/blob/6f0a96ed650935b17b6e5d277889cfbe0ccc103e/LICENSE.md\n+*/\n+\n+// https://console.spec.whatwg/org/#counting\n+// https://console.spec.whatwg/org/#timing\n+\n+const methods = ['count', 'countReset', 'time', 'timeLog', 'timeEnd'];\n+\n+for (const method of methods) {\n+  test(() => {\n+    let labelToStringCalled = false;\n+\n+    console[method]({\n+      toString() {\n+        labelToStringCalled = true;\n+      }\n+    });\n+\n+    assert_true(labelToStringCalled, `${method}() must call toString() on label when label is an object`);\n+  }, `console.${method}()'s label gets converted to string via label.toString() when label is an object`);\n+\n+  test(() => {\n+    assert_throws({name: 'Error'}, () => {\n+      console[method]({\n+        toString() {\n+          throw new Error('conversion error');\n+        }\n+      });\n+    }, `${method} must re-throw any exceptions thrown by label.toString() conversion`);\n+  }, `console.${method}() throws exceptions generated by erroneous label.toString() conversion`);\n+}\n+\n+/* eslint-enable */"
        }
    ],
    "stats": {
        "total": 45,
        "additions": 45,
        "deletions": 0
    }
}