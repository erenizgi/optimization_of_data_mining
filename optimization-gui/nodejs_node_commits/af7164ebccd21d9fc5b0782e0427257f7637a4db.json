{
    "author": "addaleax",
    "message": "lib,src: standardize `owner_symbol` for handles\n\nInstead of somtimes using an `owner` string to link from a\nnative handle object to the corresponding JS object, standardize\non a single symbol that fulfills this role.\n\nPR-URL: https://github.com/nodejs/node/pull/22002\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Jon Moss <me@jonathanmoss.me>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>",
    "sha": "af7164ebccd21d9fc5b0782e0427257f7637a4db",
    "files": [
        {
            "sha": "83da2721e85173d46253953030b6c56552e1e952",
            "filename": "lib/_tls_wrap.js",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2F_tls_wrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2F_tls_wrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_tls_wrap.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -35,6 +35,7 @@ const debug = util.debuglog('tls');\n const tls_wrap = process.binding('tls_wrap');\n const { TCP, constants: TCPConstants } = process.binding('tcp_wrap');\n const { Pipe, constants: PipeConstants } = process.binding('pipe_wrap');\n+const { owner_symbol } = require('internal/async_hooks').symbols;\n const {\n   SecureContext: NativeSecureContext\n } = process.binding('crypto');\n@@ -76,7 +77,7 @@ function onhandshakestart(now) {\n   else\n     this.handshakes++;\n \n-  const { owner } = this;\n+  const owner = this[owner_symbol];\n   if (this.handshakes > tls.CLIENT_RENEG_LIMIT) {\n     owner._emitTLSError(new ERR_TLS_SESSION_ATTACK());\n     return;\n@@ -89,7 +90,7 @@ function onhandshakestart(now) {\n function onhandshakedone() {\n   debug('onhandshakedone');\n \n-  const owner = this.owner;\n+  const owner = this[owner_symbol];\n \n   // `newSession` callback wasn't called yet\n   if (owner._newSessionPending) {\n@@ -102,7 +103,7 @@ function onhandshakedone() {\n \n \n function loadSession(hello) {\n-  const owner = this.owner;\n+  const owner = this[owner_symbol];\n \n   var once = false;\n   function onSession(err, session) {\n@@ -130,7 +131,7 @@ function loadSession(hello) {\n \n \n function loadSNI(info) {\n-  const owner = this.owner;\n+  const owner = this[owner_symbol];\n   const servername = info.servername;\n   if (!servername || !owner._SNICallback)\n     return requestOCSP(owner, info);\n@@ -212,7 +213,7 @@ function requestOCSPDone(socket) {\n \n \n function onnewsession(key, session) {\n-  const owner = this.owner;\n+  const owner = this[owner_symbol];\n \n   if (!owner.server)\n     return;\n@@ -241,11 +242,11 @@ function onnewsession(key, session) {\n \n \n function onocspresponse(resp) {\n-  this.owner.emit('OCSPResponse', resp);\n+  this[owner_symbol].emit('OCSPResponse', resp);\n }\n \n function onerror(err) {\n-  const owner = this.owner;\n+  const owner = this[owner_symbol];\n \n   if (owner._writableState.errorEmitted)\n     return;\n@@ -364,9 +365,9 @@ for (var n = 0; n < proxiedMethods.length; n++) {\n \n tls_wrap.TLSWrap.prototype.close = function close(cb) {\n   let ssl;\n-  if (this.owner) {\n-    ssl = this.owner.ssl;\n-    this.owner.ssl = null;\n+  if (this[owner_symbol]) {\n+    ssl = this[owner_symbol].ssl;\n+    this[owner_symbol].ssl = null;\n   }\n \n   // Invoke `destroySSL` on close to clean up possibly pending write requests\n@@ -405,7 +406,7 @@ TLSSocket.prototype._wrapHandle = function(wrap) {\n     handle = options.pipe ?\n       new Pipe(PipeConstants.SOCKET) :\n       new TCP(TCPConstants.SOCKET);\n-    handle.owner = this;\n+    handle[owner_symbol] = this;\n   }\n \n   // Wrap socket's handle"
        },
        {
            "sha": "8ddd523237185c348058e7d9ea817eadaf97315b",
            "filename": "lib/dgram.js",
            "status": "modified",
            "additions": 12,
            "deletions": 4,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Fdgram.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Fdgram.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fdgram.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -43,7 +43,7 @@ const { isUint8Array } = require('internal/util/types');\n const EventEmitter = require('events');\n const {\n   defaultTriggerAsyncIdScope,\n-  symbols: { async_id_symbol }\n+  symbols: { async_id_symbol, owner_symbol }\n } = require('internal/async_hooks');\n const { UV_UDP_REUSEADDR } = process.binding('constants').os;\n \n@@ -78,7 +78,7 @@ function Socket(type, listener) {\n   }\n \n   var handle = newHandle(type, lookup);\n-  handle.owner = this;\n+  handle[owner_symbol] = this;\n \n   this[async_id_symbol] = handle.getAsyncId();\n   this.type = type;\n@@ -132,7 +132,7 @@ function replaceHandle(self, newHandle) {\n   newHandle.lookup = oldHandle.lookup;\n   newHandle.bind = oldHandle.bind;\n   newHandle.send = oldHandle.send;\n-  newHandle.owner = self;\n+  newHandle[owner_symbol] = self;\n \n   // Replace the existing handle by the handle we got from master.\n   oldHandle.close();\n@@ -635,7 +635,7 @@ function stopReceiving(socket) {\n \n \n function onMessage(nread, handle, buf, rinfo) {\n-  var self = handle.owner;\n+  var self = handle[owner_symbol];\n   if (nread < 0) {\n     return self.emit('error', errnoException(nread, 'recvmsg'));\n   }\n@@ -745,6 +745,14 @@ Socket.prototype._stopReceiving = function() {\n };\n \n \n+// Legacy alias on the C++ wrapper object. This is not public API, so we may\n+// want to runtime-deprecate it at some point. There's no hurry, though.\n+Object.defineProperty(UDP.prototype, 'owner', {\n+  get() { return this[owner_symbol]; },\n+  set(v) { return this[owner_symbol] = v; }\n+});\n+\n+\n module.exports = {\n   _createSocketHandle,\n   createSocket,"
        },
        {
            "sha": "9edb23f8a6bdee41a06c3f7822035d3c90ba9dc1",
            "filename": "lib/internal/async_hooks.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fasync_hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fasync_hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fasync_hooks.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -30,7 +30,7 @@ const async_wrap = process.binding('async_wrap');\n  * It has a fixed size, so if that is exceeded, calls to the native\n  * side are used instead in pushAsyncIds() and popAsyncIds().\n  */\n-const { async_hook_fields, async_id_fields } = async_wrap;\n+const { async_hook_fields, async_id_fields, owner_symbol } = async_wrap;\n // Store the pair executionAsyncId and triggerAsyncId in a std::stack on\n // Environment::AsyncHooks::async_ids_stack_ tracks the resource responsible for\n // the current execution stack. This is unwound as each resource exits. In the\n@@ -434,7 +434,7 @@ module.exports = {\n   symbols: {\n     async_id_symbol, trigger_async_id_symbol,\n     init_symbol, before_symbol, after_symbol, destroy_symbol,\n-    promise_resolve_symbol\n+    promise_resolve_symbol, owner_symbol\n   },\n   constants: {\n     kInit, kBefore, kAfter, kDestroy, kTotals, kPromiseResolve"
        },
        {
            "sha": "558932d341c8e8c591babe18222d0ea8b73f503f",
            "filename": "lib/internal/child_process.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fchild_process.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fchild_process.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fchild_process.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -27,6 +27,7 @@ const { TTY } = process.binding('tty_wrap');\n const { TCP } = process.binding('tcp_wrap');\n const { UDP } = process.binding('udp_wrap');\n const SocketList = require('internal/socket_list');\n+const { owner_symbol } = require('internal/async_hooks').symbols;\n const { convertToValidSignal } = require('internal/util');\n const { isUint8Array } = require('internal/util/types');\n const spawn_sync = process.binding('spawn_sync');\n@@ -209,7 +210,7 @@ function ChildProcess() {\n   this.spawnfile = null;\n \n   this._handle = new Process();\n-  this._handle.owner = this;\n+  this._handle[owner_symbol] = this;\n \n   this._handle.onexit = (exitCode, signalCode) => {\n     if (signalCode) {"
        },
        {
            "sha": "39e891214ff7870a51f28df1aaa56b4301633949",
            "filename": "lib/internal/cluster/child.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fcluster%2Fchild.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fcluster%2Fchild.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fcluster%2Fchild.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -3,6 +3,7 @@ const assert = require('assert');\n const util = require('util');\n const path = require('path');\n const EventEmitter = require('events');\n+const { owner_symbol } = require('internal/async_hooks').symbols;\n const Worker = require('internal/cluster/worker');\n const { internal, sendHelper } = require('internal/cluster/utils');\n const cluster = new EventEmitter();\n@@ -207,8 +208,8 @@ function _disconnect(masterInitiated) {\n     delete handles[key];\n     waitingCount++;\n \n-    if (handle.owner)\n-      handle.owner.close(checkWaitingCount);\n+    if (handle[owner_symbol])\n+      handle[owner_symbol].close(checkWaitingCount);\n     else\n       handle.close(checkWaitingCount);\n   }"
        },
        {
            "sha": "90ea3971aae6f5c1069025182420d44138ded973",
            "filename": "lib/internal/fs/watchers.js",
            "status": "modified",
            "additions": 15,
            "deletions": 5,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Ffs%2Fwatchers.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Ffs%2Fwatchers.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ffs%2Fwatchers.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -11,7 +11,10 @@ const {\n   getStatsFromBinding,\n   validatePath\n } = require('internal/fs/utils');\n-const { defaultTriggerAsyncIdScope } = require('internal/async_hooks');\n+const {\n+  defaultTriggerAsyncIdScope,\n+  symbols: { owner_symbol }\n+} = require('internal/async_hooks');\n const { toNamespacedPath } = require('path');\n const { validateUint32 } = require('internal/validators');\n const { getPathFromURL } = require('internal/url');\n@@ -20,7 +23,6 @@ const assert = require('assert');\n \n const kOldStatus = Symbol('kOldStatus');\n const kUseBigint = Symbol('kUseBigint');\n-const kOwner = Symbol('kOwner');\n \n function emitStop(self) {\n   self.emit('stop');\n@@ -36,7 +38,7 @@ function StatWatcher(bigint) {\n util.inherits(StatWatcher, EventEmitter);\n \n function onchange(newStatus, stats) {\n-  const self = this[kOwner];\n+  const self = this[owner_symbol];\n   if (self[kOldStatus] === -1 &&\n       newStatus === -1 &&\n       stats[2/* new nlink */] === stats[16/* old nlink */]) {\n@@ -59,7 +61,7 @@ StatWatcher.prototype.start = function(filename, persistent, interval) {\n     return;\n \n   this._handle = new _StatWatcher(this[kUseBigint]);\n-  this._handle[kOwner] = this;\n+  this._handle[owner_symbol] = this;\n   this._handle.onchange = onchange;\n   if (!persistent)\n     this._handle.unref();\n@@ -104,7 +106,7 @@ function FSWatcher() {\n   EventEmitter.call(this);\n \n   this._handle = new FSEvent();\n-  this._handle.owner = this;\n+  this._handle[owner_symbol] = this;\n \n   this._handle.onchange = (status, eventType, filename) => {\n     // TODO(joyeecheung): we may check self._handle.initialized here\n@@ -131,6 +133,7 @@ function FSWatcher() {\n }\n util.inherits(FSWatcher, EventEmitter);\n \n+\n // FIXME(joyeecheung): this method is not documented.\n // At the moment if filename is undefined, we\n // 1. Throw an Error if it's the first time .start() is called\n@@ -187,6 +190,13 @@ function emitCloseNT(self) {\n   self.emit('close');\n }\n \n+// Legacy alias on the C++ wrapper object. This is not public API, so we may\n+// want to runtime-deprecate it at some point. There's no hurry, though.\n+Object.defineProperty(FSEvent.prototype, 'owner', {\n+  get() { return this[owner_symbol]; },\n+  set(v) { return this[owner_symbol] = v; }\n+});\n+\n module.exports = {\n   FSWatcher,\n   StatWatcher"
        },
        {
            "sha": "568980c927bdb8d1120b26ae4599385354ad3fa4",
            "filename": "lib/internal/http2/core.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fhttp2%2Fcore.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fhttp2%2Fcore.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fhttp2%2Fcore.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -28,6 +28,7 @@ const {\n   defaultTriggerAsyncIdScope,\n   symbols: {\n     async_id_symbol,\n+    owner_symbol,\n   },\n } = require('internal/async_hooks');\n const { internalBinding } = require('internal/bootstrap/loaders');\n@@ -141,7 +142,7 @@ const kInfoHeaders = Symbol('sent-info-headers');\n const kMaybeDestroy = Symbol('maybe-destroy');\n const kLocalSettings = Symbol('local-settings');\n const kOptions = Symbol('options');\n-const kOwner = Symbol('owner');\n+const kOwner = owner_symbol;\n const kProceed = Symbol('proceed');\n const kProtocol = Symbol('protocol');\n const kProxySocket = Symbol('proxy-socket');"
        },
        {
            "sha": "e80716059ef6e7a491400f390ac1d7d79046e579",
            "filename": "lib/internal/wrap_js_stream.js",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fwrap_js_stream.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Finternal%2Fwrap_js_stream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fwrap_js_stream.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -6,16 +6,17 @@ const { Socket } = require('net');\n const { JSStream } = process.binding('js_stream');\n const uv = process.binding('uv');\n const debug = util.debuglog('stream_wrap');\n+const { owner_symbol } = require('internal/async_hooks').symbols;\n const { ERR_STREAM_WRAP } = require('internal/errors').codes;\n \n const kCurrentWriteRequest = Symbol('kCurrentWriteRequest');\n const kCurrentShutdownRequest = Symbol('kCurrentShutdownRequest');\n \n-function isClosing() { return this.owner.isClosing(); }\n-function onreadstart() { return this.owner.readStart(); }\n-function onreadstop() { return this.owner.readStop(); }\n-function onshutdown(req) { return this.owner.doShutdown(req); }\n-function onwrite(req, bufs) { return this.owner.doWrite(req, bufs); }\n+function isClosing() { return this[owner_symbol].isClosing(); }\n+function onreadstart() { return this[owner_symbol].readStart(); }\n+function onreadstop() { return this[owner_symbol].readStop(); }\n+function onshutdown(req) { return this[owner_symbol].doShutdown(req); }\n+function onwrite(req, bufs) { return this[owner_symbol].doWrite(req, bufs); }\n \n /* This class serves as a wrapper for when the C++ side of Node wants access\n  * to a standard JS stream. For example, TLS or HTTP do not operate on network\n@@ -37,7 +38,7 @@ class JSStreamWrap extends Socket {\n       this.doClose(cb);\n     };\n     // Inside of the following functions, `this` refers to the handle\n-    // and `this.owner` refers to this JSStreamWrap instance.\n+    // and `this[owner_symbol]` refers to this JSStreamWrap instance.\n     handle.isClosing = isClosing;\n     handle.onreadstart = onreadstart;\n     handle.onreadstop = onreadstop;"
        },
        {
            "sha": "8c05f2c07b5da5da0aee03de75a93d5d26a0b7e3",
            "filename": "lib/net.js",
            "status": "modified",
            "additions": 16,
            "deletions": 8,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Fnet.js",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/lib%2Fnet.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fnet.js?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -56,7 +56,7 @@ const {\n const {\n   newAsyncId,\n   defaultTriggerAsyncIdScope,\n-  symbols: { async_id_symbol }\n+  symbols: { async_id_symbol, owner_symbol }\n } = require('internal/async_hooks');\n const {\n   createWriteWrap,\n@@ -207,7 +207,7 @@ function initSocketHandle(self) {\n \n   // Handle creation may be deferred to bind() or connect() time.\n   if (self._handle) {\n-    self._handle.owner = self;\n+    self._handle[owner_symbol] = self;\n     self._handle.onread = onread;\n     self[async_id_symbol] = getNewAsyncId(self._handle);\n   }\n@@ -371,7 +371,7 @@ Socket.prototype._final = function(cb) {\n \n \n function afterShutdown(status, handle) {\n-  var self = handle.owner;\n+  var self = handle[owner_symbol];\n \n   debug('afterShutdown destroyed=%j', self.destroyed,\n         self._readableState);\n@@ -620,7 +620,7 @@ Socket.prototype._destroy = function(exception, cb) {\n // buffer, or when there's an error reading.\n function onread(nread, buffer) {\n   var handle = this;\n-  var self = handle.owner;\n+  var self = handle[owner_symbol];\n   assert(handle === self._handle, 'handle != self._handle');\n \n   self._unrefTimer();\n@@ -819,7 +819,7 @@ protoGetter('bytesWritten', function bytesWritten() {\n \n \n function afterWrite(status, handle, err) {\n-  var self = handle.owner;\n+  var self = handle[owner_symbol];\n   if (self !== process.stderr && self !== process.stdout)\n     debug('afterWrite', status);\n \n@@ -1123,7 +1123,7 @@ Socket.prototype.unref = function() {\n \n \n function afterConnect(status, handle, req, readable, writable) {\n-  var self = handle.owner;\n+  var self = handle[owner_symbol];\n \n   // callback may come after call to destroy\n   if (self.destroyed) {\n@@ -1325,7 +1325,7 @@ function setupListenHandle(address, port, addressType, backlog, fd) {\n \n   this[async_id_symbol] = getNewAsyncId(this._handle);\n   this._handle.onconnection = onconnection;\n-  this._handle.owner = this;\n+  this._handle[owner_symbol] = this;\n \n   // Use a backlog of 512 entries. We pass 511 to the listen() call because\n   // the kernel does: backlogsize = roundup_pow_of_two(backlogsize + 1);\n@@ -1538,7 +1538,7 @@ Server.prototype.address = function() {\n \n function onconnection(err, clientHandle) {\n   var handle = this;\n-  var self = handle.owner;\n+  var self = handle[owner_symbol];\n \n   debug('onconnection');\n \n@@ -1669,6 +1669,14 @@ function emitCloseNT(self) {\n }\n \n \n+// Legacy alias on the C++ wrapper object. This is not public API, so we may\n+// want to runtime-deprecate it at some point. There's no hurry, though.\n+Object.defineProperty(TCP.prototype, 'owner', {\n+  get() { return this[owner_symbol]; },\n+  set(v) { return this[owner_symbol] = v; }\n+});\n+\n+\n Server.prototype.listenFD = internalUtil.deprecate(function(fd, type) {\n   return this.listen({ fd: fd });\n }, 'Server.listenFD is deprecated. Use Server.listen({fd: <number>}) instead.',"
        },
        {
            "sha": "9d9d03b0fa964786a715d737a61dcdac5eb9e593",
            "filename": "src/async_wrap.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/src%2Fasync_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/src%2Fasync_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fasync_wrap.cc?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -481,6 +481,10 @@ void AsyncWrap::Initialize(Local<Object> target,\n               env->async_ids_stack_string(),\n               env->async_hooks()->async_ids_stack().GetJSArray()).FromJust();\n \n+  target->Set(context,\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"owner_symbol\"),\n+              env->owner_symbol()).FromJust();\n+\n   Local<Object> constants = Object::New(isolate);\n #define SET_HOOKS_CONSTANT(name)                                              \\\n   FORCE_SET_TARGET_FIELD(                                                     \\"
        },
        {
            "sha": "290ac89fb5f5560a95e8d0cb33e935a1acd83e46",
            "filename": "src/env.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/src%2Fenv.h",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/src%2Fenv.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.h?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -111,6 +111,7 @@ struct PackageConfig {\n // for the sake of convenience.\n #define PER_ISOLATE_SYMBOL_PROPERTIES(V)                                      \\\n   V(handle_onclose_symbol, \"handle_onclose\")                                  \\\n+  V(owner_symbol, \"owner\")                                                    \\\n \n // Strings are per-isolate primitives but Environment proxies them\n // for the sake of convenience.  Strings should be ASCII-only.\n@@ -234,7 +235,6 @@ struct PackageConfig {\n   V(openssl_error_stack, \"opensslErrorStack\")                                 \\\n   V(output_string, \"output\")                                                  \\\n   V(order_string, \"order\")                                                    \\\n-  V(owner_string, \"owner\")                                                    \\\n   V(parse_error_string, \"Parse Error\")                                        \\\n   V(password_string, \"password\")                                              \\\n   V(path_string, \"path\")                                                      \\"
        },
        {
            "sha": "e817087d97110b675f07c9f37e37b215588a0115",
            "filename": "src/tcp_wrap.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/af7164ebccd21d9fc5b0782e0427257f7637a4db/src%2Ftcp_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/af7164ebccd21d9fc5b0782e0427257f7637a4db/src%2Ftcp_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftcp_wrap.cc?ref=af7164ebccd21d9fc5b0782e0427257f7637a4db",
            "patch": "@@ -81,7 +81,7 @@ void TCPWrap::Initialize(Local<Object> target,\n   // Init properties\n   t->InstanceTemplate()->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"reading\"),\n                              Boolean::New(env->isolate(), false));\n-  t->InstanceTemplate()->Set(env->owner_string(), Null(env->isolate()));\n+  t->InstanceTemplate()->Set(env->owner_symbol(), Null(env->isolate()));\n   t->InstanceTemplate()->Set(env->onread_string(), Null(env->isolate()));\n   t->InstanceTemplate()->Set(env->onconnection_string(), Null(env->isolate()));\n "
        }
    ],
    "stats": {
        "total": 119,
        "additions": 77,
        "deletions": 42
    }
}