{
    "author": "joyeecheung",
    "message": "test: move custom WHATWG URL tests into separate files\n\nTo enable automatic update of WPT, move all our custom\nWHATWG URL tests that are not present in the upstream into\nfiles starting with `test-whatwg-url-custom-`, so it's easier\nto identify test cases that can be upstreamed and test cases\nthat should be rolled into our repo (possibly with automation).\n\nPR-URL: https://github.com/nodejs/node/pull/22442\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Daijiro Wachi <daijiro.wachi@gmail.com>",
    "sha": "6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
    "files": [
        {
            "sha": "556a3ff8410b73c12cd7de043212fdceb007441e",
            "filename": "test/parallel/test-whatwg-url-custom-domainto.js",
            "status": "renamed",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-domainto.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-domainto.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-domainto.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,4 +1,7 @@\n 'use strict';\n+\n+// Tests below are not from WPT.\n+\n const common = require('../common');\n \n if (!common.hasIntl)\n@@ -7,9 +10,8 @@ if (!common.hasIntl)\n const assert = require('assert');\n const { domainToASCII, domainToUnicode } = require('url');\n \n-// Tests below are not from WPT.\n-const tests = require('../fixtures/url-idna.js');\n-const wptToASCIITests = require('../fixtures/url-toascii.js');\n+const tests = require('../fixtures/url-idna');\n+const wptToASCIITests = require('../fixtures/url-toascii');\n \n {\n   const expectedError = common.expectsError(",
            "previous_filename": "test/parallel/test-whatwg-url-domainto.js"
        },
        {
            "sha": "c79723f0490e07fcd8c465b97fb317e9f6dd0e0a",
            "filename": "test/parallel/test-whatwg-url-custom-global.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-global.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-global.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-global.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,5 +1,7 @@\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n require('../common');\n const assert = require('assert');\n const { URL, URLSearchParams } = require('url');",
            "previous_filename": "test/parallel/test-whatwg-url-global.js"
        },
        {
            "sha": "1083866d86f505fbaaae9250985650ebe6b9e3fa",
            "filename": "test/parallel/test-whatwg-url-custom-inspect.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-inspect.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-inspect.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-inspect.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,5 +1,7 @@\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n const common = require('../common');\n if (!common.hasIntl) {\n   // A handful of the tests fail when ICU is not included.\n@@ -10,7 +12,6 @@ const util = require('util');\n const URL = require('url').URL;\n const assert = require('assert');\n \n-// Tests below are not from WPT.\n const url = new URL('https://username:password@host.name:8080/path/name/?que=ry#hash');\n \n assert.strictEqual(",
            "previous_filename": "test/parallel/test-whatwg-url-inspect.js"
        },
        {
            "sha": "252e35c8d3552c65af7f5d8a914948fdb37b22e4",
            "filename": "test/parallel/test-whatwg-url-custom-parsing.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-parsing.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-parsing.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-parsing.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,5 +1,7 @@\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n const common = require('../common');\n if (!common.hasIntl) {\n   // A handful of the tests fail when ICU is not included.\n@@ -10,7 +12,6 @@ const URL = require('url').URL;\n const assert = require('assert');\n const fixtures = require('../common/fixtures');\n \n-// Tests below are not from WPT.\n const tests = require(fixtures.path('url-tests'));\n \n const originalFailures = tests.filter((test) => test.failure);",
            "previous_filename": "test/parallel/test-whatwg-url-parsing.js"
        },
        {
            "sha": "4a35215bc4ac9659525038a8b37941da89bb437b",
            "filename": "test/parallel/test-whatwg-url-custom-properties.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-properties.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-properties.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-properties.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,12 +1,13 @@\n // Flags: --expose-internals\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n require('../common');\n const URL = require('url').URL;\n const assert = require('assert');\n const urlToOptions = require('internal/url').urlToOptions;\n \n-// Tests below are not from WPT.\n const url = new URL('http://user:pass@foo.bar.com:21/aaa/zzz?l=24#test');\n const oldParams = url.searchParams;  // for test of [SameObject]\n ",
            "previous_filename": "test/parallel/test-whatwg-url-properties.js"
        },
        {
            "sha": "e5d3f203588c604e46a7f237388df79030ea9559",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-append.js",
            "status": "added",
            "additions": 37,
            "deletions": 0,
            "changes": 37,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-append.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-append.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-append.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,37 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const assert = require('assert');\n+const URLSearchParams = require('url').URLSearchParams;\n+\n+{\n+  const params = new URLSearchParams();\n+  common.expectsError(() => {\n+    params.append.call(undefined);\n+  }, {\n+    code: 'ERR_INVALID_THIS',\n+    type: TypeError,\n+    message: 'Value of \"this\" must be of type URLSearchParams'\n+  });\n+  common.expectsError(() => {\n+    params.append('a');\n+  }, {\n+    code: 'ERR_MISSING_ARGS',\n+    type: TypeError,\n+    message: 'The \"name\" and \"value\" arguments must be specified'\n+  });\n+\n+  const obj = {\n+    toString() { throw new Error('toString'); },\n+    valueOf() { throw new Error('valueOf'); }\n+  };\n+  const sym = Symbol();\n+  assert.throws(() => params.set(obj, 'b'), /^Error: toString$/);\n+  assert.throws(() => params.set('a', obj), /^Error: toString$/);\n+  assert.throws(() => params.set(sym, 'b'),\n+                /^TypeError: Cannot convert a Symbol value to a string$/);\n+  assert.throws(() => params.set('a', sym),\n+                /^TypeError: Cannot convert a Symbol value to a string$/);\n+}"
        },
        {
            "sha": "fd7cc51127903329508956f92ba5d0891666cec0",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-constructor.js",
            "status": "added",
            "additions": 69,
            "deletions": 0,
            "changes": 69,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-constructor.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-constructor.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-constructor.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,69 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const assert = require('assert');\n+const URLSearchParams = require('url').URLSearchParams;\n+\n+function makeIterableFunc(array) {\n+  return Object.assign(() => {}, {\n+    [Symbol.iterator]() {\n+      return array[Symbol.iterator]();\n+    }\n+  });\n+}\n+\n+{\n+  const iterableError = common.expectsError({\n+    code: 'ERR_ARG_NOT_ITERABLE',\n+    type: TypeError,\n+    message: 'Query pairs must be iterable'\n+  });\n+  const tupleError = common.expectsError({\n+    code: 'ERR_INVALID_TUPLE',\n+    type: TypeError,\n+    message: 'Each query pair must be an iterable [name, value] tuple'\n+  }, 6);\n+\n+  let params;\n+  params = new URLSearchParams(undefined);\n+  assert.strictEqual(params.toString(), '');\n+  params = new URLSearchParams(null);\n+  assert.strictEqual(params.toString(), '');\n+  params = new URLSearchParams(\n+    makeIterableFunc([['key', 'val'], ['key2', 'val2']])\n+  );\n+  assert.strictEqual(params.toString(), 'key=val&key2=val2');\n+  params = new URLSearchParams(\n+    makeIterableFunc([['key', 'val'], ['key2', 'val2']].map(makeIterableFunc))\n+  );\n+  assert.strictEqual(params.toString(), 'key=val&key2=val2');\n+  assert.throws(() => new URLSearchParams([[1]]), tupleError);\n+  assert.throws(() => new URLSearchParams([[1, 2, 3]]), tupleError);\n+  assert.throws(() => new URLSearchParams({ [Symbol.iterator]: 42 }),\n+                iterableError);\n+  assert.throws(() => new URLSearchParams([{}]), tupleError);\n+  assert.throws(() => new URLSearchParams(['a']), tupleError);\n+  assert.throws(() => new URLSearchParams([null]), tupleError);\n+  assert.throws(() => new URLSearchParams([{ [Symbol.iterator]: 42 }]),\n+                tupleError);\n+}\n+\n+{\n+  const obj = {\n+    toString() { throw new Error('toString'); },\n+    valueOf() { throw new Error('valueOf'); }\n+  };\n+  const sym = Symbol();\n+  const toStringError = /^Error: toString$/;\n+  const symbolError = /^TypeError: Cannot convert a Symbol value to a string$/;\n+\n+  assert.throws(() => new URLSearchParams({ a: obj }), toStringError);\n+  assert.throws(() => new URLSearchParams([['a', obj]]), toStringError);\n+  assert.throws(() => new URLSearchParams(sym), symbolError);\n+  assert.throws(() => new URLSearchParams({ [sym]: 'a' }), symbolError);\n+  assert.throws(() => new URLSearchParams({ a: sym }), symbolError);\n+  assert.throws(() => new URLSearchParams([[sym, 'a']]), symbolError);\n+  assert.throws(() => new URLSearchParams([['a', sym]]), symbolError);\n+}"
        },
        {
            "sha": "a22345cc6eef824e6dcb4a37221dc2421942b6db",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-delete.js",
            "status": "added",
            "additions": 46,
            "deletions": 0,
            "changes": 46,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-delete.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-delete.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-delete.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,46 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const assert = require('assert');\n+const { URL, URLSearchParams } = require('url');\n+\n+{\n+  const params = new URLSearchParams();\n+  common.expectsError(() => {\n+    params.delete.call(undefined);\n+  }, {\n+    code: 'ERR_INVALID_THIS',\n+    type: TypeError,\n+    message: 'Value of \"this\" must be of type URLSearchParams'\n+  });\n+  common.expectsError(() => {\n+    params.delete();\n+  }, {\n+    code: 'ERR_MISSING_ARGS',\n+    type: TypeError,\n+    message: 'The \"name\" argument must be specified'\n+  });\n+\n+  const obj = {\n+    toString() { throw new Error('toString'); },\n+    valueOf() { throw new Error('valueOf'); }\n+  };\n+  const sym = Symbol();\n+  assert.throws(() => params.delete(obj), /^Error: toString$/);\n+  assert.throws(() => params.delete(sym),\n+                /^TypeError: Cannot convert a Symbol value to a string$/);\n+}\n+\n+// https://github.com/nodejs/node/issues/10480\n+// Emptying searchParams should correctly update url's query\n+{\n+  const url = new URL('http://domain?var=1&var=2&var=3');\n+  for (const param of url.searchParams.keys()) {\n+    url.searchParams.delete(param);\n+  }\n+  assert.strictEqual(url.searchParams.toString(), '');\n+  assert.strictEqual(url.search, '');\n+  assert.strictEqual(url.href, 'http://domain/');\n+}"
        },
        {
            "sha": "fc3086545870eebc4c96229a02af62525ae1f3e7",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-entries.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-entries.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-entries.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-entries.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "previous_filename": "test/parallel/test-whatwg-url-searchparams-entries.js"
        },
        {
            "sha": "3e729d2bcd4cdd55cb551869dc2ebba9dc016457",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-foreach.js",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-foreach.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-foreach.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-foreach.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,17 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const { URLSearchParams } = require('url');\n+\n+{\n+  const params = new URLSearchParams();\n+  common.expectsError(() => {\n+    params.forEach.call(undefined);\n+  }, {\n+    code: 'ERR_INVALID_THIS',\n+    type: TypeError,\n+    message: 'Value of \"this\" must be of type URLSearchParams'\n+  });\n+}"
        },
        {
            "sha": "b99a5fae97d9270a74e288796b84cd610544d3cf",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-get.js",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-get.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-get.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-get.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,34 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const assert = require('assert');\n+const URLSearchParams = require('url').URLSearchParams;\n+\n+{\n+  const params = new URLSearchParams();\n+  common.expectsError(() => {\n+    params.get.call(undefined);\n+  }, {\n+    code: 'ERR_INVALID_THIS',\n+    type: TypeError,\n+    message: 'Value of \"this\" must be of type URLSearchParams'\n+  });\n+  common.expectsError(() => {\n+    params.get();\n+  }, {\n+    code: 'ERR_MISSING_ARGS',\n+    type: TypeError,\n+    message: 'The \"name\" argument must be specified'\n+  });\n+\n+  const obj = {\n+    toString() { throw new Error('toString'); },\n+    valueOf() { throw new Error('valueOf'); }\n+  };\n+  const sym = Symbol();\n+  assert.throws(() => params.get(obj), /^Error: toString$/);\n+  assert.throws(() => params.get(sym),\n+                /^TypeError: Cannot convert a Symbol value to a string$/);\n+}"
        },
        {
            "sha": "7f3c7b7610cfd77062079bc009f13ef79f601375",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-getall.js",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-getall.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-getall.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-getall.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,34 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const assert = require('assert');\n+const URLSearchParams = require('url').URLSearchParams;\n+\n+{\n+  const params = new URLSearchParams();\n+  common.expectsError(() => {\n+    params.getAll.call(undefined);\n+  }, {\n+    code: 'ERR_INVALID_THIS',\n+    type: TypeError,\n+    message: 'Value of \"this\" must be of type URLSearchParams'\n+  });\n+  common.expectsError(() => {\n+    params.getAll();\n+  }, {\n+    code: 'ERR_MISSING_ARGS',\n+    type: TypeError,\n+    message: 'The \"name\" argument must be specified'\n+  });\n+\n+  const obj = {\n+    toString() { throw new Error('toString'); },\n+    valueOf() { throw new Error('valueOf'); }\n+  };\n+  const sym = Symbol();\n+  assert.throws(() => params.getAll(obj), /^Error: toString$/);\n+  assert.throws(() => params.getAll(sym),\n+                /^TypeError: Cannot convert a Symbol value to a string$/);\n+}"
        },
        {
            "sha": "2697f199bcc98bafc825d01ee25dcb810239fdcc",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-has.js",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-has.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-has.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-has.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,34 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const assert = require('assert');\n+const URLSearchParams = require('url').URLSearchParams;\n+\n+{\n+  const params = new URLSearchParams();\n+  common.expectsError(() => {\n+    params.has.call(undefined);\n+  }, {\n+    code: 'ERR_INVALID_THIS',\n+    type: TypeError,\n+    message: 'Value of \"this\" must be of type URLSearchParams'\n+  });\n+  common.expectsError(() => {\n+    params.has();\n+  }, {\n+    code: 'ERR_MISSING_ARGS',\n+    type: TypeError,\n+    message: 'The \"name\" argument must be specified'\n+  });\n+\n+  const obj = {\n+    toString() { throw new Error('toString'); },\n+    valueOf() { throw new Error('valueOf'); }\n+  };\n+  const sym = Symbol();\n+  assert.throws(() => params.has(obj), /^Error: toString$/);\n+  assert.throws(() => params.has(sym),\n+                /^TypeError: Cannot convert a Symbol value to a string$/);\n+}"
        },
        {
            "sha": "6cc22caea624369a114a67ec45e053a7e52013a4",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-inspect.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-inspect.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-inspect.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-inspect.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,11 +1,12 @@\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n require('../common');\n const assert = require('assert');\n const util = require('util');\n const URLSearchParams = require('url').URLSearchParams;\n \n-// Tests below are not from WPT.\n const sp = new URLSearchParams('?a=a&b=b&b=c');\n assert.strictEqual(util.inspect(sp),\n                    \"URLSearchParams { 'a' => 'a', 'b' => 'b', 'b' => 'c' }\");",
            "previous_filename": "test/parallel/test-whatwg-url-searchparams-inspect.js"
        },
        {
            "sha": "00800cc79cbf7e4f0ad2856fba2999c779b7c94a",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-keys.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-keys.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-keys.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-keys.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,10 +1,11 @@\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n const common = require('../common');\n const assert = require('assert');\n const URLSearchParams = require('url').URLSearchParams;\n \n-// Tests below are not from WPT.\n const params = new URLSearchParams('a=b&c=d');\n const keys = params.keys();\n ",
            "previous_filename": "test/parallel/test-whatwg-url-searchparams-keys.js"
        },
        {
            "sha": "ccd3353ecd0e8ebcb3a440e8cff8434f52bca463",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-set.js",
            "status": "added",
            "additions": 37,
            "deletions": 0,
            "changes": 37,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-set.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-set.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-set.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,37 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const assert = require('assert');\n+const URLSearchParams = require('url').URLSearchParams;\n+\n+{\n+  const params = new URLSearchParams();\n+  common.expectsError(() => {\n+    params.set.call(undefined);\n+  }, {\n+    code: 'ERR_INVALID_THIS',\n+    type: TypeError,\n+    message: 'Value of \"this\" must be of type URLSearchParams'\n+  });\n+  common.expectsError(() => {\n+    params.set('a');\n+  }, {\n+    code: 'ERR_MISSING_ARGS',\n+    type: TypeError,\n+    message: 'The \"name\" and \"value\" arguments must be specified'\n+  });\n+\n+  const obj = {\n+    toString() { throw new Error('toString'); },\n+    valueOf() { throw new Error('valueOf'); }\n+  };\n+  const sym = Symbol();\n+  assert.throws(() => params.append(obj, 'b'), /^Error: toString$/);\n+  assert.throws(() => params.append('a', obj), /^Error: toString$/);\n+  assert.throws(() => params.append(sym, 'b'),\n+                /^TypeError: Cannot convert a Symbol value to a string$/);\n+  assert.throws(() => params.append('a', sym),\n+                /^TypeError: Cannot convert a Symbol value to a string$/);\n+}"
        },
        {
            "sha": "f8884a7e7092a35247f96b6a6e9f563885b80486",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-sort.js",
            "status": "added",
            "additions": 47,
            "deletions": 0,
            "changes": 47,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-sort.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-sort.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-sort.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,47 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+require('../common');\n+const { URL, URLSearchParams } = require('url');\n+const { test, assert_array_equals } = require('../common/wpt');\n+\n+// Test bottom-up iterative stable merge sort\n+const tests = [{ input: '', output: [] }];\n+const pairs = [];\n+for (let i = 10; i < 100; i++) {\n+  pairs.push([`a${i}`, 'b']);\n+  tests[0].output.push([`a${i}`, 'b']);\n+}\n+tests[0].input = pairs.sort(() => Math.random() > 0.5)\n+  .map((pair) => pair.join('=')).join('&');\n+\n+tests.push(\n+  {\n+    'input': 'z=a&=b&c=d',\n+    'output': [['', 'b'], ['c', 'd'], ['z', 'a']]\n+  }\n+);\n+\n+tests.forEach((val) => {\n+  test(() => {\n+    const params = new URLSearchParams(val.input);\n+    let i = 0;\n+    params.sort();\n+    for (const param of params) {\n+      assert_array_equals(param, val.output[i]);\n+      i++;\n+    }\n+  }, `Parse and sort: ${val.input}`);\n+\n+  test(() => {\n+    const url = new URL(`?${val.input}`, 'https://example/');\n+    url.searchParams.sort();\n+    const params = new URLSearchParams(url.search);\n+    let i = 0;\n+    for (const param of params) {\n+      assert_array_equals(param, val.output[i]);\n+      i++;\n+    }\n+  }, `URL parse and sort: ${val.input}`);\n+});"
        },
        {
            "sha": "d2929ae557a0799e39168439cbdb350a2e953295",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-stringifier.js",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-stringifier.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-stringifier.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-stringifier.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,17 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+const URLSearchParams = require('url').URLSearchParams;\n+\n+{\n+  const params = new URLSearchParams();\n+  common.expectsError(() => {\n+    params.toString.call(undefined);\n+  }, {\n+    code: 'ERR_INVALID_THIS',\n+    type: TypeError,\n+    message: 'Value of \"this\" must be of type URLSearchParams'\n+  });\n+}"
        },
        {
            "sha": "e10a9dc04fe0df73c8eaf5610bd2b5175a839ad6",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams-values.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-values.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-values.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams-values.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,10 +1,11 @@\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n const common = require('../common');\n const assert = require('assert');\n const URLSearchParams = require('url').URLSearchParams;\n \n-// Tests below are not from WPT.\n const params = new URLSearchParams('a=b&c=d');\n const values = params.values();\n ",
            "previous_filename": "test/parallel/test-whatwg-url-searchparams-values.js"
        },
        {
            "sha": "f88c3b4a836b3988e66041995eb6092de2eec393",
            "filename": "test/parallel/test-whatwg-url-custom-searchparams.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-searchparams.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,11 +1,12 @@\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n const common = require('../common');\n const assert = require('assert');\n const { URL, URLSearchParams } = require('url');\n const fixtures = require('../common/fixtures');\n \n-// Tests below are not from WPT.\n const serialized = 'a=a&a=1&a=true&a=undefined&a=null&a=%EF%BF%BD' +\n                    '&a=%EF%BF%BD&a=%F0%9F%98%80&a=%EF%BF%BD%EF%BF%BD' +\n                    '&a=%5Bobject+Object%5D';",
            "previous_filename": "test/parallel/test-whatwg-url-searchparams.js"
        },
        {
            "sha": "99b4361831fd3b438081673c4a43f4f8397817a9",
            "filename": "test/parallel/test-whatwg-url-custom-setters.js",
            "status": "added",
            "additions": 60,
            "deletions": 0,
            "changes": 60,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-setters.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-setters.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-setters.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -0,0 +1,60 @@\n+'use strict';\n+\n+// Tests below are not from WPT.\n+\n+const common = require('../common');\n+if (!common.hasIntl) {\n+  // A handful of the tests fail when ICU is not included.\n+  common.skip('missing Intl');\n+}\n+\n+const assert = require('assert');\n+const URL = require('url').URL;\n+const { test, assert_equals } = require('../common/wpt');\n+const fixtures = require('../common/fixtures');\n+\n+const additionalTestCases =\n+  require(fixtures.path('url-setter-tests-additional.js'));\n+\n+{\n+  for (const attributeToBeSet in additionalTestCases) {\n+    if (attributeToBeSet === 'comment') {\n+      continue;\n+    }\n+    const testCases = additionalTestCases[attributeToBeSet];\n+    for (const testCase of testCases) {\n+      let name = `Setting <${testCase.href}>.${attributeToBeSet}` +\n+                 ` = \"${testCase.new_value}\"`;\n+      if ('comment' in testCase) {\n+        name += ` ${testCase.comment}`;\n+      }\n+      test(function() {\n+        const url = new URL(testCase.href);\n+        url[attributeToBeSet] = testCase.new_value;\n+        for (const attribute in testCase.expected) {\n+          assert_equals(url[attribute], testCase.expected[attribute]);\n+        }\n+      }, `URL: ${name}`);\n+    }\n+  }\n+}\n+\n+{\n+  const url = new URL('http://example.com/');\n+  const obj = {\n+    toString() { throw new Error('toString'); },\n+    valueOf() { throw new Error('valueOf'); }\n+  };\n+  const sym = Symbol();\n+  const props = Object.getOwnPropertyDescriptors(Object.getPrototypeOf(url));\n+  for (const [name, { set }] of Object.entries(props)) {\n+    if (set) {\n+      assert.throws(() => url[name] = obj,\n+                    /^Error: toString$/,\n+                    `url.${name} = { toString() { throw ... } }`);\n+      assert.throws(() => url[name] = sym,\n+                    /^TypeError: Cannot convert a Symbol value to a string$/,\n+                    `url.${name} = ${String(sym)}`);\n+    }\n+  }\n+}"
        },
        {
            "sha": "784a3ebc7728e5bf91d39f15bc414290b1274c5c",
            "filename": "test/parallel/test-whatwg-url-custom-tostringtag.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-tostringtag.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-custom-tostringtag.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-tostringtag.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,10 +1,11 @@\n 'use strict';\n \n+// Tests below are not from WPT.\n+\n require('../common');\n const assert = require('assert');\n const URL = require('url').URL;\n \n-// Tests below are not from WPT.\n const toString = Object.prototype.toString;\n \n const url = new URL('http://example.org');",
            "previous_filename": "test/parallel/test-whatwg-url-tostringtag.js"
        },
        {
            "sha": "342cbd5335798612483ebd509bd7374b83c1e132",
            "filename": "test/parallel/test-whatwg-url-searchparams-append.js",
            "status": "modified",
            "additions": 1,
            "deletions": 33,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-append.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-append.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-append.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,7 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n-const assert = require('assert');\n+require('../common');\n const URLSearchParams = require('url').URLSearchParams;\n const { test, assert_equals, assert_true } = require('../common/wpt');\n \n@@ -48,34 +47,3 @@ test(function() {\n     assert_equals(params.get('first'), '1', 'Search params object has name \"first\" with value \"1\"');\n }, 'Append multiple');\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-{\n-  const params = new URLSearchParams();\n-  common.expectsError(() => {\n-    params.append.call(undefined);\n-  }, {\n-    code: 'ERR_INVALID_THIS',\n-    type: TypeError,\n-    message: 'Value of \"this\" must be of type URLSearchParams'\n-  });\n-  common.expectsError(() => {\n-    params.append('a');\n-  }, {\n-    code: 'ERR_MISSING_ARGS',\n-    type: TypeError,\n-    message: 'The \"name\" and \"value\" arguments must be specified'\n-  });\n-\n-  const obj = {\n-    toString() { throw new Error('toString'); },\n-    valueOf() { throw new Error('valueOf'); }\n-  };\n-  const sym = Symbol();\n-  assert.throws(() => params.set(obj, 'b'), /^Error: toString$/);\n-  assert.throws(() => params.set('a', obj), /^Error: toString$/);\n-  assert.throws(() => params.set(sym, 'b'),\n-                /^TypeError: Cannot convert a Symbol value to a string$/);\n-  assert.throws(() => params.set('a', sym),\n-                /^TypeError: Cannot convert a Symbol value to a string$/);\n-}"
        },
        {
            "sha": "882072ba445fcbc2abc0d267d66f5071f26d1cf9",
            "filename": "test/parallel/test-whatwg-url-searchparams-constructor.js",
            "status": "modified",
            "additions": 1,
            "deletions": 65,
            "changes": 66,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-constructor.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-constructor.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-constructor.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,7 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n-const assert = require('assert');\n+require('../common');\n const URLSearchParams = require('url').URLSearchParams;\n const {\n   test, assert_equals, assert_true,\n@@ -190,66 +189,3 @@ test(() => {\n   assert_equals(params2.get(\"a\"), \"b\")\n }, \"Custom [Symbol.iterator]\")\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-function makeIterableFunc(array) {\n-  return Object.assign(() => {}, {\n-    [Symbol.iterator]() {\n-      return array[Symbol.iterator]();\n-    }\n-  });\n-}\n-\n-{\n-  const iterableError = common.expectsError({\n-    code: 'ERR_ARG_NOT_ITERABLE',\n-    type: TypeError,\n-    message: 'Query pairs must be iterable'\n-  });\n-  const tupleError = common.expectsError({\n-    code: 'ERR_INVALID_TUPLE',\n-    type: TypeError,\n-    message: 'Each query pair must be an iterable [name, value] tuple'\n-  }, 6);\n-\n-  let params;\n-  params = new URLSearchParams(undefined);\n-  assert.strictEqual(params.toString(), '');\n-  params = new URLSearchParams(null);\n-  assert.strictEqual(params.toString(), '');\n-  params = new URLSearchParams(\n-    makeIterableFunc([['key', 'val'], ['key2', 'val2']])\n-  );\n-  assert.strictEqual(params.toString(), 'key=val&key2=val2');\n-  params = new URLSearchParams(\n-    makeIterableFunc([['key', 'val'], ['key2', 'val2']].map(makeIterableFunc))\n-  );\n-  assert.strictEqual(params.toString(), 'key=val&key2=val2');\n-  assert.throws(() => new URLSearchParams([[1]]), tupleError);\n-  assert.throws(() => new URLSearchParams([[1, 2, 3]]), tupleError);\n-  assert.throws(() => new URLSearchParams({ [Symbol.iterator]: 42 }),\n-                iterableError);\n-  assert.throws(() => new URLSearchParams([{}]), tupleError);\n-  assert.throws(() => new URLSearchParams(['a']), tupleError);\n-  assert.throws(() => new URLSearchParams([null]), tupleError);\n-  assert.throws(() => new URLSearchParams([{ [Symbol.iterator]: 42 }]),\n-                tupleError);\n-}\n-\n-{\n-  const obj = {\n-    toString() { throw new Error('toString'); },\n-    valueOf() { throw new Error('valueOf'); }\n-  };\n-  const sym = Symbol();\n-  const toStringError = /^Error: toString$/;\n-  const symbolError = /^TypeError: Cannot convert a Symbol value to a string$/;\n-\n-  assert.throws(() => new URLSearchParams({ a: obj }), toStringError);\n-  assert.throws(() => new URLSearchParams([['a', obj]]), toStringError);\n-  assert.throws(() => new URLSearchParams(sym), symbolError);\n-  assert.throws(() => new URLSearchParams({ [sym]: 'a' }), symbolError);\n-  assert.throws(() => new URLSearchParams({ a: sym }), symbolError);\n-  assert.throws(() => new URLSearchParams([[sym, 'a']]), symbolError);\n-  assert.throws(() => new URLSearchParams([['a', sym]]), symbolError);\n-}"
        },
        {
            "sha": "cdf3332efc7807a70c92410f4dce06b478c5cea8",
            "filename": "test/parallel/test-whatwg-url-searchparams-delete.js",
            "status": "modified",
            "additions": 1,
            "deletions": 42,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-delete.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-delete.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-delete.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,7 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n-const assert = require('assert');\n+require('../common');\n const { URL, URLSearchParams } = require('url');\n const { test, assert_equals, assert_true, assert_false } =\n   require('../common/wpt');\n@@ -58,43 +57,3 @@ test(function() {\n     assert_equals(url.search, '', 'url.search does not have ?');\n }, 'Removing non-existent param removes ? from URL');\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-{\n-  const params = new URLSearchParams();\n-  common.expectsError(() => {\n-    params.delete.call(undefined);\n-  }, {\n-    code: 'ERR_INVALID_THIS',\n-    type: TypeError,\n-    message: 'Value of \"this\" must be of type URLSearchParams'\n-  });\n-  common.expectsError(() => {\n-    params.delete();\n-  }, {\n-    code: 'ERR_MISSING_ARGS',\n-    type: TypeError,\n-    message: 'The \"name\" argument must be specified'\n-  });\n-\n-  const obj = {\n-    toString() { throw new Error('toString'); },\n-    valueOf() { throw new Error('valueOf'); }\n-  };\n-  const sym = Symbol();\n-  assert.throws(() => params.delete(obj), /^Error: toString$/);\n-  assert.throws(() => params.delete(sym),\n-                /^TypeError: Cannot convert a Symbol value to a string$/);\n-}\n-\n-// https://github.com/nodejs/node/issues/10480\n-// Emptying searchParams should correctly update url's query\n-{\n-  const url = new URL('http://domain?var=1&var=2&var=3');\n-  for (const param of url.searchParams.keys()) {\n-    url.searchParams.delete(param);\n-  }\n-  assert.strictEqual(url.searchParams.toString(), '');\n-  assert.strictEqual(url.search, '');\n-  assert.strictEqual(url.href, 'http://domain/');\n-}"
        },
        {
            "sha": "833858618f8e5bf0661db73f39733e5281fbb714",
            "filename": "test/parallel/test-whatwg-url-searchparams-foreach.js",
            "status": "modified",
            "additions": 1,
            "deletions": 13,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-foreach.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-foreach.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-foreach.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,6 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n const { URL, URLSearchParams } = require('url');\n const { test, assert_array_equals, assert_unreached } =\n   require('../common/wpt');\n@@ -45,15 +45,3 @@ test(function() {\n     }\n }, \"empty\");\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-{\n-  const params = new URLSearchParams();\n-  common.expectsError(() => {\n-    params.forEach.call(undefined);\n-  }, {\n-    code: 'ERR_INVALID_THIS',\n-    type: TypeError,\n-    message: 'Value of \"this\" must be of type URLSearchParams'\n-  });\n-}"
        },
        {
            "sha": "94e92c18e4b218e96d4712dbf6087b4de4a643fe",
            "filename": "test/parallel/test-whatwg-url-searchparams-get.js",
            "status": "modified",
            "additions": 1,
            "deletions": 30,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-get.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-get.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-get.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,7 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n-const assert = require('assert');\n+require('../common');\n const URLSearchParams = require('url').URLSearchParams;\n const { test, assert_equals, assert_true } = require('../common/wpt');\n \n@@ -33,31 +32,3 @@ test(function() {\n     assert_equals(params.get('fourth'), null, 'Search params object has no \"fourth\" name and value.');\n }, 'More get() basics');\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-{\n-  const params = new URLSearchParams();\n-  common.expectsError(() => {\n-    params.get.call(undefined);\n-  }, {\n-    code: 'ERR_INVALID_THIS',\n-    type: TypeError,\n-    message: 'Value of \"this\" must be of type URLSearchParams'\n-  });\n-  common.expectsError(() => {\n-    params.get();\n-  }, {\n-    code: 'ERR_MISSING_ARGS',\n-    type: TypeError,\n-    message: 'The \"name\" argument must be specified'\n-  });\n-\n-  const obj = {\n-    toString() { throw new Error('toString'); },\n-    valueOf() { throw new Error('valueOf'); }\n-  };\n-  const sym = Symbol();\n-  assert.throws(() => params.get(obj), /^Error: toString$/);\n-  assert.throws(() => params.get(sym),\n-                /^TypeError: Cannot convert a Symbol value to a string$/);\n-}"
        },
        {
            "sha": "06827f37d95bfe3daeac5044031712fdcf33df8f",
            "filename": "test/parallel/test-whatwg-url-searchparams-getall.js",
            "status": "modified",
            "additions": 1,
            "deletions": 30,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-getall.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-getall.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-getall.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,7 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n-const assert = require('assert');\n+require('../common');\n const URLSearchParams = require('url').URLSearchParams;\n const { test, assert_equals, assert_true, assert_array_equals } =\n   require('../common/wpt');\n@@ -38,31 +37,3 @@ test(function() {\n     assert_array_equals(matches, ['one'], 'Search params object has expected name \"a\" values');\n }, 'getAll() multiples');\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-{\n-  const params = new URLSearchParams();\n-  common.expectsError(() => {\n-    params.getAll.call(undefined);\n-  }, {\n-    code: 'ERR_INVALID_THIS',\n-    type: TypeError,\n-    message: 'Value of \"this\" must be of type URLSearchParams'\n-  });\n-  common.expectsError(() => {\n-    params.getAll();\n-  }, {\n-    code: 'ERR_MISSING_ARGS',\n-    type: TypeError,\n-    message: 'The \"name\" argument must be specified'\n-  });\n-\n-  const obj = {\n-    toString() { throw new Error('toString'); },\n-    valueOf() { throw new Error('valueOf'); }\n-  };\n-  const sym = Symbol();\n-  assert.throws(() => params.getAll(obj), /^Error: toString$/);\n-  assert.throws(() => params.getAll(sym),\n-                /^TypeError: Cannot convert a Symbol value to a string$/);\n-}"
        },
        {
            "sha": "95e69beb4d26ecf240f6995c51aa3104323452ed",
            "filename": "test/parallel/test-whatwg-url-searchparams-has.js",
            "status": "modified",
            "additions": 1,
            "deletions": 30,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-has.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-has.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-has.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,7 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n-const assert = require('assert');\n+require('../common');\n const URLSearchParams = require('url').URLSearchParams;\n const { test, assert_false, assert_true } = require('../common/wpt');\n \n@@ -36,31 +35,3 @@ test(function() {\n     assert_false(params.has('first'), 'Search params object has no name \"first\"');\n }, 'has() following delete()');\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-{\n-  const params = new URLSearchParams();\n-  common.expectsError(() => {\n-    params.has.call(undefined);\n-  }, {\n-    code: 'ERR_INVALID_THIS',\n-    type: TypeError,\n-    message: 'Value of \"this\" must be of type URLSearchParams'\n-  });\n-  common.expectsError(() => {\n-    params.has();\n-  }, {\n-    code: 'ERR_MISSING_ARGS',\n-    type: TypeError,\n-    message: 'The \"name\" argument must be specified'\n-  });\n-\n-  const obj = {\n-    toString() { throw new Error('toString'); },\n-    valueOf() { throw new Error('valueOf'); }\n-  };\n-  const sym = Symbol();\n-  assert.throws(() => params.has(obj), /^Error: toString$/);\n-  assert.throws(() => params.has(sym),\n-                /^TypeError: Cannot convert a Symbol value to a string$/);\n-}"
        },
        {
            "sha": "0d43678427c23fd17ac8a13c3694455f87a62a7a",
            "filename": "test/parallel/test-whatwg-url-searchparams-set.js",
            "status": "modified",
            "additions": 1,
            "deletions": 33,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-set.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-set.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-set.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,7 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n-const assert = require('assert');\n+require('../common');\n const URLSearchParams = require('url').URLSearchParams;\n const { test, assert_equals, assert_true } = require('../common/wpt');\n \n@@ -34,34 +33,3 @@ test(function() {\n     assert_equals(params.get('a'), '4', 'Search params object has name \"a\" with value \"4\"');\n }, 'URLSearchParams.set');\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-{\n-  const params = new URLSearchParams();\n-  common.expectsError(() => {\n-    params.set.call(undefined);\n-  }, {\n-    code: 'ERR_INVALID_THIS',\n-    type: TypeError,\n-    message: 'Value of \"this\" must be of type URLSearchParams'\n-  });\n-  common.expectsError(() => {\n-    params.set('a');\n-  }, {\n-    code: 'ERR_MISSING_ARGS',\n-    type: TypeError,\n-    message: 'The \"name\" and \"value\" arguments must be specified'\n-  });\n-\n-  const obj = {\n-    toString() { throw new Error('toString'); },\n-    valueOf() { throw new Error('valueOf'); }\n-  };\n-  const sym = Symbol();\n-  assert.throws(() => params.append(obj, 'b'), /^Error: toString$/);\n-  assert.throws(() => params.append('a', obj), /^Error: toString$/);\n-  assert.throws(() => params.append(sym, 'b'),\n-                /^TypeError: Cannot convert a Symbol value to a string$/);\n-  assert.throws(() => params.append('a', sym),\n-                /^TypeError: Cannot convert a Symbol value to a string$/);\n-}"
        },
        {
            "sha": "65dd23a6daba57fd8d82745d7d43790fe123a941",
            "filename": "test/parallel/test-whatwg-url-searchparams-sort.js",
            "status": "modified",
            "additions": 0,
            "deletions": 42,
            "changes": 42,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-sort.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-sort.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-sort.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -61,45 +61,3 @@ test(function() {\n   assert_equals(url.search, \"\")\n }, \"Sorting non-existent params removes ? from URL\")\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-\n-// Test bottom-up iterative stable merge sort\n-const tests = [{ input: '', output: [] }];\n-const pairs = [];\n-for (let i = 10; i < 100; i++) {\n-  pairs.push([`a${i}`, 'b']);\n-  tests[0].output.push([`a${i}`, 'b']);\n-}\n-tests[0].input = pairs.sort(() => Math.random() > 0.5)\n-  .map((pair) => pair.join('=')).join('&');\n-\n-tests.push(\n-  {\n-    'input': 'z=a&=b&c=d',\n-    'output': [['', 'b'], ['c', 'd'], ['z', 'a']]\n-  }\n-);\n-\n-tests.forEach((val) => {\n-  test(() => {\n-    const params = new URLSearchParams(val.input);\n-    let i = 0;\n-    params.sort();\n-    for (const param of params) {\n-      assert_array_equals(param, val.output[i]);\n-      i++;\n-    }\n-  }, `Parse and sort: ${val.input}`);\n-\n-  test(() => {\n-    const url = new URL(`?${val.input}`, 'https://example/');\n-    url.searchParams.sort();\n-    const params = new URLSearchParams(url.search);\n-    let i = 0;\n-    for (const param of params) {\n-      assert_array_equals(param, val.output[i]);\n-      i++;\n-    }\n-  }, `URL parse and sort: ${val.input}`);\n-});"
        },
        {
            "sha": "e2b6faaabe85fca9ea81e8036779fd506f6f4d75",
            "filename": "test/parallel/test-whatwg-url-searchparams-stringifier.js",
            "status": "modified",
            "additions": 1,
            "deletions": 13,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-stringifier.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-searchparams-stringifier.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-searchparams-stringifier.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -1,6 +1,6 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n const URLSearchParams = require('url').URLSearchParams;\n const { test, assert_equals } = require('../common/wpt');\n \n@@ -121,15 +121,3 @@ test(function() {\n     assert_equals(params.toString(), 'a=&a=b');\n }, 'URLSearchParams.toString');\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-{\n-  const params = new URLSearchParams();\n-  common.expectsError(() => {\n-    params.toString.call(undefined);\n-  }, {\n-    code: 'ERR_INVALID_THIS',\n-    type: TypeError,\n-    message: 'Value of \"this\" must be of type URLSearchParams'\n-  });\n-}"
        },
        {
            "sha": "a04b6c93eccf3d944a42d0b9921aa8deefe85234",
            "filename": "test/parallel/test-whatwg-url-setters.js",
            "status": "modified",
            "additions": 0,
            "deletions": 49,
            "changes": 49,
            "blob_url": "https://github.com/nodejs/node/blob/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-setters.js",
            "raw_url": "https://github.com/nodejs/node/raw/6dd694c1257ded6d8a9f3b48e8c9027c3986a285/test%2Fparallel%2Ftest-whatwg-url-setters.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-setters.js?ref=6dd694c1257ded6d8a9f3b48e8c9027c3986a285",
            "patch": "@@ -6,14 +6,10 @@ if (!common.hasIntl) {\n   common.skip('missing Intl');\n }\n \n-const assert = require('assert');\n const URL = require('url').URL;\n const { test, assert_equals } = require('../common/wpt');\n const fixtures = require('../common/fixtures');\n \n-const additionalTestCases =\n-  require(fixtures.path('url-setter-tests-additional.js'));\n-\n const request = {\n   response: require(fixtures.path('url-setter-tests'))\n };\n@@ -80,48 +76,3 @@ function runURLSettersTests(all_test_cases) {\n \n startURLSettersTests()\n /* eslint-enable */\n-\n-// Tests below are not from WPT.\n-\n-{\n-  for (const attributeToBeSet in additionalTestCases) {\n-    if (attributeToBeSet === 'comment') {\n-      continue;\n-    }\n-    const testCases = additionalTestCases[attributeToBeSet];\n-    for (const testCase of testCases) {\n-      let name = `Setting <${testCase.href}>.${attributeToBeSet}` +\n-                 ` = \"${testCase.new_value}\"`;\n-      if ('comment' in testCase) {\n-        name += ` ${testCase.comment}`;\n-      }\n-      test(function() {\n-        const url = new URL(testCase.href);\n-        url[attributeToBeSet] = testCase.new_value;\n-        for (const attribute in testCase.expected) {\n-          assert_equals(url[attribute], testCase.expected[attribute]);\n-        }\n-      }, `URL: ${name}`);\n-    }\n-  }\n-}\n-\n-{\n-  const url = new URL('http://example.com/');\n-  const obj = {\n-    toString() { throw new Error('toString'); },\n-    valueOf() { throw new Error('valueOf'); }\n-  };\n-  const sym = Symbol();\n-  const props = Object.getOwnPropertyDescriptors(Object.getPrototypeOf(url));\n-  for (const [name, { set }] of Object.entries(props)) {\n-    if (set) {\n-      assert.throws(() => url[name] = obj,\n-                    /^Error: toString$/,\n-                    `url.${name} = { toString() { throw ... } }`);\n-      assert.throws(() => url[name] = sym,\n-                    /^TypeError: Cannot convert a Symbol value to a string$/,\n-                    `url.${name} = ${String(sym)}`);\n-    }\n-  }\n-}"
        }
    ],
    "stats": {
        "total": 855,
        "additions": 464,
        "deletions": 391
    }
}