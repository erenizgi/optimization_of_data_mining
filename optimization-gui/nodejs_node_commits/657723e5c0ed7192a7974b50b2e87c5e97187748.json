{
    "author": "joyeecheung",
    "message": "build: always use BUILDTYPE binary to run JS tests\n\nPR-URL: https://github.com/nodejs/node/pull/20362\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "657723e5c0ed7192a7974b50b2e87c5e97187748",
    "files": [
        {
            "sha": "e74f29b84dde6bf3e498c093482e5fb620b7b362",
            "filename": "Makefile",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/657723e5c0ed7192a7974b50b2e87c5e97187748/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/657723e5c0ed7192a7974b50b2e87c5e97187748/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=657723e5c0ed7192a7974b50b2e87c5e97187748",
            "patch": "@@ -234,7 +234,7 @@ v8:\n \n .PHONY: jstest\n jstest: build-addons build-addons-napi ## Runs addon tests and JS tests\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release \\\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) \\\n \t\t$(CI_JS_SUITES) \\\n \t\t$(CI_NATIVE_SUITES)\n \n@@ -269,13 +269,13 @@ test-cov: all\n \t$(MAKE) lint\n \n test-parallel: all\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release parallel\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) parallel\n \n test-valgrind: all\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release --valgrind sequential parallel message\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) --valgrind sequential parallel message\n \n test-check-deopts: all\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release --check-deopts parallel sequential\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) --check-deopts parallel sequential\n \n benchmark/misc/function_call/build/Release/binding.node: all \\\n \t\tbenchmark/misc/function_call/binding.cc \\\n@@ -398,7 +398,7 @@ clear-stalled:\n \n .PHONY: test-gc\n test-gc: all test/gc/build/Release/binding.node\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release gc\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) gc\n \n .PHONY: test-gc-clean\n test-gc-clean:\n@@ -425,15 +425,15 @@ CI_DOC := doctool\n test-ci-native: LOGLEVEL := info\n test-ci-native: | test/addons/.buildstamp test/addons-napi/.buildstamp\n \t$(PYTHON) tools/test.py $(PARALLEL_ARGS) -p tap --logfile test.tap \\\n-\t\t--mode=release --flaky-tests=$(FLAKY_TESTS) \\\n+\t\t--mode=$(BUILDTYPE_LOWER) --flaky-tests=$(FLAKY_TESTS) \\\n \t\t$(TEST_CI_ARGS) $(CI_NATIVE_SUITES)\n \n .PHONY: test-ci-js\n # This target should not use a native compiler at all\n # Related CI job: node-test-commit-arm-fanned\n test-ci-js: | clear-stalled\n \t$(PYTHON) tools/test.py $(PARALLEL_ARGS) -p tap --logfile test.tap \\\n-\t\t--mode=release --flaky-tests=$(FLAKY_TESTS) \\\n+\t\t--mode=$(BUILDTYPE_LOWER) --flaky-tests=$(FLAKY_TESTS) \\\n \t\t$(TEST_CI_ARGS) $(CI_JS_SUITES)\n \t# Clean up any leftover processes, error if found.\n \tps awwx | grep Release/node | grep -v grep | cat\n@@ -448,7 +448,7 @@ test-ci: LOGLEVEL := info\n test-ci: | clear-stalled build-addons build-addons-napi doc-only\n \tout/Release/cctest --gtest_output=tap:cctest.tap\n \t$(PYTHON) tools/test.py $(PARALLEL_ARGS) -p tap --logfile test.tap \\\n-\t\t--mode=release --flaky-tests=$(FLAKY_TESTS) \\\n+\t\t--mode=$(BUILDTYPE_LOWER) --flaky-tests=$(FLAKY_TESTS) \\\n \t\t$(TEST_CI_ARGS) $(CI_JS_SUITES) $(CI_NATIVE_SUITES) $(CI_DOC)\n \t# Clean up any leftover processes, error if found.\n \tps awwx | grep Release/node | grep -v grep | cat\n@@ -475,7 +475,7 @@ run-ci: build-ci\n \t$(MAKE) test-ci\n \n test-release: test-build\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER)\n \n test-debug: test-build\n \t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=debug\n@@ -521,7 +521,7 @@ test-npm-publish: $(NODE_EXE)\n \n .PHONY: test-addons-napi\n test-addons-napi: test-build-addons-napi\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release addons-napi\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) addons-napi\n \n .PHONY: test-addons-napi-clean\n test-addons-napi-clean:\n@@ -530,7 +530,7 @@ test-addons-napi-clean:\n \n .PHONY: test-addons\n test-addons: test-build test-addons-napi\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release addons\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) addons\n \n .PHONY: test-addons-clean\n test-addons-clean:\n@@ -541,19 +541,19 @@ test-addons-clean:\n \n test-timers:\n \t$(MAKE) --directory=tools faketime\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release timers\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) timers\n \n test-timers-clean:\n \t$(MAKE) --directory=tools clean\n \n test-async-hooks:\n-\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release async-hooks\n+\t$(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) async-hooks\n \n test-with-async-hooks:\n \t$(MAKE) build-addons\n \t$(MAKE) build-addons-napi\n \t$(MAKE) cctest\n-\tNODE_TEST_WITH_ASYNC_HOOKS=1 $(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=release \\\n+\tNODE_TEST_WITH_ASYNC_HOOKS=1 $(PYTHON) tools/test.py $(PARALLEL_ARGS) --mode=$(BUILDTYPE_LOWER) \\\n \t\t$(CI_JS_SUITES) \\\n \t\t$(CI_NATIVE_SUITES)\n "
        }
    ],
    "stats": {
        "total": 28,
        "additions": 14,
        "deletions": 14
    }
}