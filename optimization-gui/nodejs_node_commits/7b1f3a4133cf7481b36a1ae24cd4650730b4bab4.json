{
    "author": "tlhunter",
    "message": "doc: add subprocess.ref() and subprocess.unref()\n\nPR-URL: https://github.com/nodejs/node/pull/22220\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Bryan English <bryan@bryanenglish.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>",
    "sha": "7b1f3a4133cf7481b36a1ae24cd4650730b4bab4",
    "files": [
        {
            "sha": "ee75cbc5f348a2e68c74479d34664604a09028f3",
            "filename": "doc/api/child_process.md",
            "status": "modified",
            "additions": 50,
            "deletions": 5,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/7b1f3a4133cf7481b36a1ae24cd4650730b4bab4/doc%2Fapi%2Fchild_process.md",
            "raw_url": "https://github.com/nodejs/node/raw/7b1f3a4133cf7481b36a1ae24cd4650730b4bab4/doc%2Fapi%2Fchild_process.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fchild_process.md?ref=7b1f3a4133cf7481b36a1ae24cd4650730b4bab4",
            "patch": "@@ -536,11 +536,12 @@ process will be made the leader of a new process group and session. Note that\n child processes may continue running after the parent exits regardless of\n whether they are detached or not. See setsid(2) for more information.\n \n-By default, the parent will wait for the detached child to exit. To prevent\n-the parent from waiting for a given `subprocess`, use the `subprocess.unref()`\n-method. Doing so will cause the parent's event loop to not include the child in\n-its reference count, allowing the parent to exit independently of the child,\n-unless there is an established IPC channel between the child and parent.\n+By default, the parent will wait for the detached child to exit. To prevent the\n+parent from waiting for a given `subprocess` to exit, use the\n+`subprocess.unref()` method. Doing so will cause the parent's event loop to not\n+include the child in its reference count, allowing the parent to exit\n+independently of the child, unless there is an established IPC channel between\n+the child and the parent.\n \n When using the `detached` option to start a long-running process, the process\n will not stay running in the background after the parent exits unless it is\n@@ -1094,6 +1095,27 @@ console.log(`Spawned child pid: ${grep.pid}`);\n grep.stdin.end();\n ```\n \n+### subprocess.ref()\n+<!-- YAML\n+added: v0.7.10\n+-->\n+\n+Calling `subprocess.ref()` after making a call to `subprocess.unref()` will\n+restore the removed reference count for the child process, forcing the parent\n+to wait for the child to exit before exiting itself.\n+\n+```js\n+const { spawn } = require('child_process');\n+\n+const subprocess = spawn(process.argv[0], ['child_program.js'], {\n+  detached: true,\n+  stdio: 'ignore'\n+});\n+\n+subprocess.unref();\n+subprocess.ref();\n+```\n+\n ### subprocess.send(message[, sendHandle[, options]][, callback])\n <!-- YAML\n added: v0.5.9\n@@ -1362,6 +1384,29 @@ then this will be `null`.\n `subprocess.stdout` is an alias for `subprocess.stdio[1]`. Both properties will\n refer to the same value.\n \n+### subprocess.unref()\n+<!-- YAML\n+added: v0.7.10\n+-->\n+\n+By default, the parent will wait for the detached child to exit. To prevent the\n+parent from waiting for a given `subprocess` to exit, use the\n+`subprocess.unref()` method. Doing so will cause the parent's event loop to not\n+include the child in its reference count, allowing the parent to exit\n+independently of the child, unless there is an established IPC channel between\n+the child and the parent.\n+\n+```js\n+const { spawn } = require('child_process');\n+\n+const subprocess = spawn(process.argv[0], ['child_program.js'], {\n+  detached: true,\n+  stdio: 'ignore'\n+});\n+\n+subprocess.unref();\n+```\n+\n ## `maxBuffer` and Unicode\n \n The `maxBuffer` option specifies the largest number of bytes allowed on `stdout`"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 50,
        "deletions": 5
    }
}