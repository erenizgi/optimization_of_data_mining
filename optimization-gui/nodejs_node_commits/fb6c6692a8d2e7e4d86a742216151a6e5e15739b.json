{
    "author": "addaleax",
    "message": "net: partially revert \"simplify Socket.prototype._final\"\n\nPartially revert b7e6ccd0cc60f20cc397e6ac0705bb3f38c7d225\nbecause it broke a test that was added since its last CI run.\n\nRefs: https://github.com/nodejs/node/pull/24075\nRefs: https://github.com/nodejs/node/pull/23866\n\nPR-URL: https://github.com/nodejs/node/pull/24288\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ujjwal Sharma <usharma1998@gmail.com>",
    "sha": "fb6c6692a8d2e7e4d86a742216151a6e5e15739b",
    "files": [
        {
            "sha": "99dc76c8f3baf59edca176978594b85c264064fb",
            "filename": "lib/net.js",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/fb6c6692a8d2e7e4d86a742216151a6e5e15739b/lib%2Fnet.js",
            "raw_url": "https://github.com/nodejs/node/raw/fb6c6692a8d2e7e4d86a742216151a6e5e15739b/lib%2Fnet.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fnet.js?ref=fb6c6692a8d2e7e4d86a742216151a6e5e15739b",
            "patch": "@@ -345,6 +345,12 @@ Socket.prototype._final = function(cb) {\n     return this.once('connect', () => this._final(cb));\n   }\n \n+  // TODO(addaleax): This should not be necessary.\n+  if (!this.readable || this._readableState.ended) {\n+    cb();\n+    return this.destroy();\n+  }\n+\n   if (!this._handle)\n     return cb();\n "
        }
    ],
    "stats": {
        "total": 6,
        "additions": 6,
        "deletions": 0
    }
}