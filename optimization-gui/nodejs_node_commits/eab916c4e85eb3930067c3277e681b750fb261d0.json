{
    "author": "danbev",
    "message": "crypto: move process.binding('tls_wrap') internal\n\nThis commit makes the tls_wrap builtin an internal builtin, and\nchanges usage of the builtin from using process.binding('tls_wrap')\nto use internalBinding instead.\n\nRefs: https://github.com/nodejs/node/issues/22160\n\nPR-URL: https://github.com/nodejs/node/pull/22429\nRefs: https://github.com/nodejs/node/issues/22160\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "eab916c4e85eb3930067c3277e681b750fb261d0",
    "files": [
        {
            "sha": "010973fddc07fdf9f83ba2bb8871bd6cb042ea67",
            "filename": "lib/_tls_wrap.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/eab916c4e85eb3930067c3277e681b750fb261d0/lib%2F_tls_wrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/eab916c4e85eb3930067c3277e681b750fb261d0/lib%2F_tls_wrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_tls_wrap.js?ref=eab916c4e85eb3930067c3277e681b750fb261d0",
            "patch": "@@ -32,9 +32,9 @@ const common = require('_tls_common');\n const { StreamWrap } = require('_stream_wrap');\n const { Buffer } = require('buffer');\n const debug = util.debuglog('tls');\n-const tls_wrap = process.binding('tls_wrap');\n const { internalBinding } = require('internal/bootstrap/loaders');\n const { TCP, constants: TCPConstants } = internalBinding('tcp_wrap');\n+const tls_wrap = internalBinding('tls_wrap');\n const { Pipe, constants: PipeConstants } = process.binding('pipe_wrap');\n const { owner_symbol } = require('internal/async_hooks').symbols;\n const { SecureContext: NativeSecureContext } = internalBinding('crypto');"
        },
        {
            "sha": "e4748602f31ea8fdefcc5c8ca1da99385ca39602",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/eab916c4e85eb3930067c3277e681b750fb261d0/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/eab916c4e85eb3930067c3277e681b750fb261d0/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=eab916c4e85eb3930067c3277e681b750fb261d0",
            "patch": "@@ -353,7 +353,8 @@\n         'signal_wrap',\n         'crypto',\n         'contextify',\n-        'tcp_wrap']);\n+        'tcp_wrap',\n+        'tls_wrap']);\n     process.binding = function binding(name) {\n       return internalBindingWhitelist.has(name) ?\n         internalBinding(name) :"
        },
        {
            "sha": "c2efc0c0b870023b73f808328829f2d45af2c744",
            "filename": "src/tls_wrap.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/eab916c4e85eb3930067c3277e681b750fb261d0/src%2Ftls_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/eab916c4e85eb3930067c3277e681b750fb261d0/src%2Ftls_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftls_wrap.cc?ref=eab916c4e85eb3930067c3277e681b750fb261d0",
            "patch": "@@ -915,4 +915,4 @@ void TLSWrap::Initialize(Local<Object> target,\n \n }  // namespace node\n \n-NODE_BUILTIN_MODULE_CONTEXT_AWARE(tls_wrap, node::TLSWrap::Initialize)\n+NODE_MODULE_CONTEXT_AWARE_INTERNAL(tls_wrap, node::TLSWrap::Initialize)"
        },
        {
            "sha": "9e75da501513fbe65c1c698e2d7734a692b4be8e",
            "filename": "test/parallel/test-tls-wrap-no-abort.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/eab916c4e85eb3930067c3277e681b750fb261d0/test%2Fparallel%2Ftest-tls-wrap-no-abort.js",
            "raw_url": "https://github.com/nodejs/node/raw/eab916c4e85eb3930067c3277e681b750fb261d0/test%2Fparallel%2Ftest-tls-wrap-no-abort.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-wrap-no-abort.js?ref=eab916c4e85eb3930067c3277e681b750fb261d0",
            "patch": "@@ -1,11 +1,13 @@\n+// Flags: --expose-internals\n 'use strict';\n \n const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n const util = require('util');\n-const TLSWrap = process.binding('tls_wrap').TLSWrap;\n+const { internalBinding } = require('internal/test/binding');\n+const TLSWrap = internalBinding('tls_wrap').TLSWrap;\n \n // This will abort if internal pointer is not set to nullptr.\n util.inspect(new TLSWrap());"
        },
        {
            "sha": "c4a4b9b058f49ad8ebea6ac2a683768fa16f5013",
            "filename": "test/sequential/test-async-wrap-getasyncid.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/eab916c4e85eb3930067c3277e681b750fb261d0/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "raw_url": "https://github.com/nodejs/node/raw/eab916c4e85eb3930067c3277e681b750fb261d0/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-async-wrap-getasyncid.js?ref=eab916c4e85eb3930067c3277e681b750fb261d0",
            "patch": "@@ -266,7 +266,7 @@ if (common.hasCrypto) { // eslint-disable-line node-core/crypto-check\n   const credentials = require('tls').createSecureContext({ ca, cert, key });\n \n   // TLSWrap is exposed, but needs to be instantiated via tls_wrap.wrap().\n-  const tls_wrap = process.binding('tls_wrap');\n+  const tls_wrap = internalBinding('tls_wrap');\n   testInitialized(\n     tls_wrap.wrap(tcp._externalStream, credentials.context, true), 'TLSWrap');\n }"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 8,
        "deletions": 5
    }
}