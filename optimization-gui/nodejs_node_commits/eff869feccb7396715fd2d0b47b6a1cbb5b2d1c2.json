{
    "author": "jnord99",
    "message": "test: skip failing tests for osx mojave\n\nRefs: https://github.com/nodejs/node/issues/21679\nPR-URL: https://github.com/nodejs/node/pull/23550\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: George Adams <george.adams@uk.ibm.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Santiago Gimeno <santiago.gimeno@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>",
    "sha": "eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2",
    "files": [
        {
            "sha": "768570437a7d8591d29f19c1dd018e8dbec696c5",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2",
            "patch": "@@ -56,6 +56,8 @@ const isOpenBSD = process.platform === 'openbsd';\n const isLinux = process.platform === 'linux';\n const isOSX = process.platform === 'darwin';\n \n+const isOSXMojave = isOSX && (os.release().startsWith('18'));\n+\n const enoughTestMem = os.totalmem() > 0x70000000; /* 1.75 Gb */\n const cpus = os.cpus();\n const enoughTestCpu = Array.isArray(cpus) &&\n@@ -712,6 +714,7 @@ module.exports = {\n   isMainThread,\n   isOpenBSD,\n   isOSX,\n+  isOSXMojave,\n   isSunOS,\n   isWindows,\n   localIPv6Hosts,"
        },
        {
            "sha": "6ada04aa030b31b72834c9d9d76dfe4f86985041",
            "filename": "test/known_issues/test-cluster-bind-privileged-port.js",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2/test%2Fknown_issues%2Ftest-cluster-bind-privileged-port.js",
            "raw_url": "https://github.com/nodejs/node/raw/eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2/test%2Fknown_issues%2Ftest-cluster-bind-privileged-port.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fknown_issues%2Ftest-cluster-bind-privileged-port.js?ref=eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2",
            "patch": "@@ -0,0 +1,25 @@\n+'use strict';\n+const common = require('../common');\n+\n+// This test should fail on macOS (10.14) due to an issue with privileged ports.\n+\n+const assert = require('assert');\n+const cluster = require('cluster');\n+const net = require('net');\n+\n+if (!common.isOSXMojave)\n+  assert.fail('Code should fail only on macOS Mojave.');\n+\n+\n+if (cluster.isMaster) {\n+  cluster.fork().on('exit', common.mustCall((exitCode) => {\n+    assert.strictEqual(exitCode, 0);\n+  }));\n+} else {\n+  const s = net.createServer(common.mustNotCall());\n+  s.listen(42, common.mustNotCall('listen should have failed'));\n+  s.on('error', common.mustCall((err) => {\n+    assert.strictEqual(err.code, 'EACCES');\n+    process.disconnect();\n+  }));\n+}"
        },
        {
            "sha": "9d155259c3789e158b8f448c8c7f75c16f570695",
            "filename": "test/parallel/test-cluster-bind-privileged-port.js",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2/test%2Fparallel%2Ftest-cluster-bind-privileged-port.js",
            "raw_url": "https://github.com/nodejs/node/raw/eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2/test%2Fparallel%2Ftest-cluster-bind-privileged-port.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-bind-privileged-port.js?ref=eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2",
            "patch": "@@ -21,6 +21,11 @@\n \n 'use strict';\n const common = require('../common');\n+\n+// Skip on OS X Mojave. https://github.com/nodejs/node/issues/21679\n+if (common.isOSXMojave)\n+  common.skip('bypass test for Mojave due to OSX issue');\n+\n if (common.isWindows)\n   common.skip('not reliable on Windows.');\n "
        },
        {
            "sha": "1edece30af6de9173566d475c3e1ac67802893bc",
            "filename": "test/parallel/test-cluster-shared-handle-bind-privileged-port.js",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2/test%2Fparallel%2Ftest-cluster-shared-handle-bind-privileged-port.js",
            "raw_url": "https://github.com/nodejs/node/raw/eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2/test%2Fparallel%2Ftest-cluster-shared-handle-bind-privileged-port.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-shared-handle-bind-privileged-port.js?ref=eff869feccb7396715fd2d0b47b6a1cbb5b2d1c2",
            "patch": "@@ -21,6 +21,11 @@\n \n 'use strict';\n const common = require('../common');\n+\n+// Skip on OS X Mojave. https://github.com/nodejs/node/issues/21679\n+if (common.isOSXMojave)\n+  common.skip('bypass test for Mojave due to OSX issue');\n+\n if (common.isWindows)\n   common.skip('not reliable on Windows');\n "
        }
    ],
    "stats": {
        "total": 38,
        "additions": 38,
        "deletions": 0
    }
}