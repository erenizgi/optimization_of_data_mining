{
    "author": "jasnell",
    "message": "test: move hijackstdio out of require('common')\n\nMove the hijackstdio functions out of common so that they are\nimported only into the tests that actually need them\n\nPR-URL: https://github.com/nodejs/node/pull/22462\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "5da834f685f85af477afcb193d283f14a5244025",
    "files": [
        {
            "sha": "487c252af3977967320b694412f2b4c87961052e",
            "filename": "test/common/README.md",
            "status": "modified",
            "additions": 48,
            "deletions": 30,
            "changes": 78,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fcommon%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fcommon%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2FREADME.md?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -173,24 +173,6 @@ Indicates whether `IPv6` is supported on this platform.\n \n Indicates if there are multiple localhosts available.\n \n-### hijackStderr(listener)\n-* `listener` [&lt;Function>]: a listener with a single parameter\n-  called `data`.\n-\n-Eavesdrop to `process.stderr.write` calls. Once `process.stderr.write` is\n-called, `listener` will also be called and the `data` of `write` function will\n-be passed to `listener`. What's more, `process.stderr.writeTimes` is a count of\n-the number of calls.\n-\n-### hijackStdout(listener)\n-* `listener` [&lt;Function>]: a listener with a single parameter\n-  called `data`.\n-\n-Eavesdrop to `process.stdout.write` calls. Once `process.stdout.write` is\n-called, `listener` will also be called and the `data` of `write` function will\n-be passed to `listener`. What's more, `process.stdout.writeTimes` is a count of\n-the number of calls.\n-\n ### inFreeBSDJail\n * [&lt;boolean>]\n \n@@ -355,16 +337,6 @@ A port number for tests to use if one is needed.\n \n Logs '1..0 # Skipped: ' + `msg`\n \n-### restoreStderr()\n-\n-Restore the original `process.stderr.write`. Used to restore `stderr` to its\n-original state after calling [`common.hijackStdErr()`][].\n-\n-### restoreStdout()\n-\n-Restore the original `process.stdout.write`. Used to restore `stdout` to its\n-original state after calling [`common.hijackStdOut()`][].\n-\n ### rootDir\n * [&lt;string>]\n \n@@ -596,6 +568,52 @@ validateSnapshotNodes('TLSWRAP', [\n ]);\n ```\n \n+## hijackstdio Module\n+\n+The `hijackstdio` module provides utility functions for temporarily redirecting\n+`stdout` and `stderr` output.\n+\n+<!-- eslint-disable no-undef, node-core/required-modules -->\n+```js\n+const { hijackStdout, restoreStdout } = require('../common/hijackstdio');\n+\n+hijackStdout((data) => {\n+  /* Do something with data */\n+  restoreStdout();\n+});\n+\n+console.log('this is sent to the hijacked listener');\n+```\n+\n+### hijackStderr(listener)\n+* `listener` [&lt;Function>]: a listener with a single parameter\n+  called `data`.\n+\n+Eavesdrop to `process.stderr.write()` calls. Once `process.stderr.write()` is\n+called, `listener` will also be called and the `data` of `write` function will\n+be passed to `listener`. What's more, `process.stderr.writeTimes` is a count of\n+the number of calls.\n+\n+### hijackStdout(listener)\n+* `listener` [&lt;Function>]: a listener with a single parameter\n+  called `data`.\n+\n+Eavesdrop to `process.stdout.write()` calls. Once `process.stdout.write()` is\n+called, `listener` will also be called and the `data` of `write` function will\n+be passed to `listener`. What's more, `process.stdout.writeTimes` is a count of\n+the number of calls.\n+\n+### restoreStderr()\n+\n+Restore the original `process.stderr.write()`. Used to restore `stderr` to its\n+original state after calling [`hijackstdio.hijackStdErr()`][].\n+\n+### restoreStdout()\n+\n+Restore the original `process.stdout.write()`. Used to restore `stdout` to its\n+original state after calling [`hijackstdio.hijackStdOut()`][].\n+\n+\n ## HTTP/2 Module\n \n The http2.js module provides a handful of utilities for creating mock HTTP/2\n@@ -773,6 +791,6 @@ implementation with tests from\n [&lt;boolean>]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type\n [&lt;number>]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type\n [&lt;string>]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type\n-[`common.hijackStdErr()`]: #hijackstderrlistener\n-[`common.hijackStdOut()`]: #hijackstdoutlistener\n+[`hijackstdio.hijackStdErr()`]: #hijackstderrlistener\n+[`hijackstdio.hijackStdOut()`]: #hijackstdoutlistener\n [internationalization]: https://github.com/nodejs/node/wiki/Intl"
        },
        {
            "sha": "fcc98208f0ec8cb66186774f5c7508323e326577",
            "filename": "test/common/hijackstdio.js",
            "status": "added",
            "additions": 33,
            "deletions": 0,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fcommon%2Fhijackstdio.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fcommon%2Fhijackstdio.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Fhijackstdio.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -0,0 +1,33 @@\n+/* eslint-disable node-core/required-modules */\n+'use strict';\n+\n+// Hijack stdout and stderr\n+const stdWrite = {};\n+function hijackStdWritable(name, listener) {\n+  const stream = process[name];\n+  const _write = stdWrite[name] = stream.write;\n+\n+  stream.writeTimes = 0;\n+  stream.write = function(data, callback) {\n+    try {\n+      listener(data);\n+    } catch (e) {\n+      process.nextTick(() => { throw e; });\n+    }\n+\n+    _write.call(stream, data, callback);\n+    stream.writeTimes++;\n+  };\n+}\n+\n+function restoreWritable(name) {\n+  process[name].write = stdWrite[name];\n+  delete process[name].writeTimes;\n+}\n+\n+module.exports = {\n+  hijackStdout: hijackStdWritable.bind(null, 'stdout'),\n+  hijackStderr: hijackStdWritable.bind(null, 'stderr'),\n+  restoreStdout: restoreWritable.bind(null, 'stdout'),\n+  restoreStderr: restoreWritable.bind(null, 'stderr')\n+};"
        },
        {
            "sha": "f1b8964815a4bcb75dae2a7d1d675e9275af60d4",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 0,
            "deletions": 28,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -787,30 +787,6 @@ exports.getTTYfd = function getTTYfd() {\n   return ttyFd;\n };\n \n-// Hijack stdout and stderr\n-const stdWrite = {};\n-function hijackStdWritable(name, listener) {\n-  const stream = process[name];\n-  const _write = stdWrite[name] = stream.write;\n-\n-  stream.writeTimes = 0;\n-  stream.write = function(data, callback) {\n-    try {\n-      listener(data);\n-    } catch (e) {\n-      process.nextTick(() => { throw e; });\n-    }\n-\n-    _write.call(stream, data, callback);\n-    stream.writeTimes++;\n-  };\n-}\n-\n-function restoreWritable(name) {\n-  process[name].write = stdWrite[name];\n-  delete process[name].writeTimes;\n-}\n-\n exports.runWithInvalidFD = function(func) {\n   let fd = 1 << 30;\n   // Get first known bad file descriptor. 1 << 30 is usually unlikely to\n@@ -824,10 +800,6 @@ exports.runWithInvalidFD = function(func) {\n   exports.printSkipMessage('Could not generate an invalid fd');\n };\n \n-exports.hijackStdout = hijackStdWritable.bind(null, 'stdout');\n-exports.hijackStderr = hijackStdWritable.bind(null, 'stderr');\n-exports.restoreStdout = restoreWritable.bind(null, 'stdout');\n-exports.restoreStderr = restoreWritable.bind(null, 'stderr');\n exports.isCPPSymbolsNotMapped = exports.isWindows ||\n                                 exports.isSunOS ||\n                                 exports.isAIX ||"
        },
        {
            "sha": "5a0d547d595b6de72be7964986732e0811369459",
            "filename": "test/common/index.mjs",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fcommon%2Findex.mjs",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fcommon%2Findex.mjs",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.mjs?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -52,10 +52,6 @@ const {\n   disableCrashOnUnhandledRejection,\n   getTTYfd,\n   runWithInvalidFD,\n-  hijackStdout,\n-  hijackStderr,\n-  restoreStdout,\n-  restoreStderr,\n   isCPPSymbolsNotMapped\n } = common;\n \n@@ -109,9 +105,5 @@ export {\n   disableCrashOnUnhandledRejection,\n   getTTYfd,\n   runWithInvalidFD,\n-  hijackStdout,\n-  hijackStderr,\n-  restoreStdout,\n-  restoreStderr,\n   isCPPSymbolsNotMapped\n };"
        },
        {
            "sha": "eafe4dd830bcb27a549cab152a41b5df8fa1a167",
            "filename": "test/parallel/test-common.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-common.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-common.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-common.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -21,6 +21,7 @@\n \n 'use strict';\n const common = require('../common');\n+const hijackstdio = require('../common/hijackstdio');\n const fixtures = require('../common/fixtures');\n const assert = require('assert');\n const { execFile } = require('child_process');\n@@ -95,7 +96,7 @@ const HIJACK_TEST_ARRAY = [ 'foo\\n', 'bar\\n', 'baz\\n' ];\n   const stream = process[`std${txt}`];\n   const originalWrite = stream.write;\n \n-  common[`hijackStd${txt}`](common.mustCall(function(data) {\n+  hijackstdio[`hijackStd${txt}`](common.mustCall(function(data) {\n     assert.strictEqual(data, HIJACK_TEST_ARRAY[stream.writeTimes]);\n   }, HIJACK_TEST_ARRAY.length));\n   assert.notStrictEqual(originalWrite, stream.write);\n@@ -105,22 +106,22 @@ const HIJACK_TEST_ARRAY = [ 'foo\\n', 'bar\\n', 'baz\\n' ];\n   });\n \n   assert.strictEqual(HIJACK_TEST_ARRAY.length, stream.writeTimes);\n-  common[`restoreStd${txt}`]();\n+  hijackstdio[`restoreStd${txt}`]();\n   assert.strictEqual(originalWrite, stream.write);\n });\n \n // hijackStderr and hijackStdout again\n // for console\n [[ 'err', 'error' ], [ 'out', 'log' ]].forEach(([ type, method ]) => {\n-  common[`hijackStd${type}`](common.mustCall(function(data) {\n+  hijackstdio[`hijackStd${type}`](common.mustCall(function(data) {\n     assert.strictEqual(data, 'test\\n');\n \n     // throw an error\n     throw new Error(`console ${type} error`);\n   }));\n \n   console[method]('test');\n-  common[`restoreStd${type}`]();\n+  hijackstdio[`restoreStd${type}`]();\n });\n \n let uncaughtTimes = 0;"
        },
        {
            "sha": "9ab6c9db7e8c1677e051901fe20ae4b3a19bde2e",
            "filename": "test/parallel/test-console-group.js",
            "status": "modified",
            "additions": 11,
            "deletions": 5,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-console-group.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-console-group.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-console-group.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -1,5 +1,11 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const {\n+  hijackStdout,\n+  hijackStderr,\n+  restoreStdout,\n+  restoreStderr\n+} = require('../common/hijackstdio');\n \n const assert = require('assert');\n const Console = require('console').Console;\n@@ -8,21 +14,21 @@ let c, stdout, stderr;\n \n function setup() {\n   stdout = '';\n-  common.hijackStdout(function(data) {\n+  hijackStdout(function(data) {\n     stdout += data;\n   });\n \n   stderr = '';\n-  common.hijackStderr(function(data) {\n+  hijackStderr(function(data) {\n     stderr += data;\n   });\n \n   c = new Console(process.stdout, process.stderr);\n }\n \n function teardown() {\n-  common.restoreStdout();\n-  common.restoreStderr();\n+  restoreStdout();\n+  restoreStderr();\n }\n \n // Basic group() functionality"
        },
        {
            "sha": "21fbeed929f942d2cbb170c455d5c477edaf508a",
            "filename": "test/parallel/test-console.js",
            "status": "modified",
            "additions": 13,
            "deletions": 6,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-console.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-console.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-console.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -24,6 +24,13 @@ const common = require('../common');\n const assert = require('assert');\n const util = require('util');\n \n+const {\n+  hijackStdout,\n+  hijackStderr,\n+  restoreStdout,\n+  restoreStderr\n+} = require('../common/hijackstdio');\n+\n assert.ok(process.stdout.writable);\n assert.ok(process.stderr.writable);\n // Support legacy API\n@@ -63,11 +70,11 @@ const custom_inspect = { foo: 'bar', [util.inspect.custom]: () => 'inspect' };\n const strings = [];\n const errStrings = [];\n process.stdout.isTTY = false;\n-common.hijackStdout(function(data) {\n+hijackStdout(function(data) {\n   strings.push(data);\n });\n process.stderr.isTTY = false;\n-common.hijackStderr(function(data) {\n+hijackStderr(function(data) {\n   errStrings.push(data);\n });\n \n@@ -175,8 +182,8 @@ console.assert(true, 'this should not throw');\n \n assert.strictEqual(strings.length, process.stdout.writeTimes);\n assert.strictEqual(errStrings.length, process.stderr.writeTimes);\n-common.restoreStdout();\n-common.restoreStderr();\n+restoreStdout();\n+restoreStderr();\n \n // verify that console.timeEnd() doesn't leave dead links\n const timesMapSize = console._times.size;\n@@ -246,8 +253,8 @@ assert.strictEqual(errStrings.shift().split('\\n').shift(),\n \n // hijack stderr to catch `process.emitWarning` which is using\n // `process.nextTick`\n-common.hijackStderr(common.mustCall(function(data) {\n-  common.restoreStderr();\n+hijackStderr(common.mustCall(function(data) {\n+  restoreStderr();\n \n   // stderr.write will catch sync error, so use `process.nextTick` here\n   process.nextTick(function() {"
        },
        {
            "sha": "8d9169256a2f6dbcf616ca6d8f20e1bc69330b2a",
            "filename": "test/parallel/test-internal-errors.js",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-internal-errors.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-internal-errors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-errors.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -1,7 +1,10 @@\n // Flags: --expose-internals\n 'use strict';\n const common = require('../common');\n-\n+const {\n+  hijackStdout,\n+  restoreStdout,\n+} = require('../common/hijackstdio');\n const assert = require('assert');\n const errors = require('internal/errors');\n \n@@ -241,22 +244,22 @@ assert.strictEqual(\n // browser. Note that `message` remains non-enumerable after being assigned.\n {\n   let initialConsoleLog = '';\n-  common.hijackStdout((data) => { initialConsoleLog += data; });\n+  hijackStdout((data) => { initialConsoleLog += data; });\n   const myError = new errors.codes.ERR_TLS_HANDSHAKE_TIMEOUT();\n   assert.deepStrictEqual(Object.keys(myError), []);\n   const initialToString = myError.toString();\n   console.log(myError);\n   assert.notStrictEqual(initialConsoleLog, '');\n \n-  common.restoreStdout();\n+  restoreStdout();\n \n   let subsequentConsoleLog = '';\n-  common.hijackStdout((data) => { subsequentConsoleLog += data; });\n+  hijackStdout((data) => { subsequentConsoleLog += data; });\n   myError.message = 'Fhqwhgads';\n   assert.deepStrictEqual(Object.keys(myError), []);\n   assert.notStrictEqual(myError.toString(), initialToString);\n   console.log(myError);\n   assert.strictEqual(subsequentConsoleLog, initialConsoleLog);\n \n-  common.restoreStdout();\n+  restoreStdout();\n }"
        },
        {
            "sha": "090525e18c5d3ed0c8f6867793ecb1919d748c76",
            "filename": "test/parallel/test-process-raw-debug.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-process-raw-debug.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-process-raw-debug.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-raw-debug.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -21,6 +21,7 @@\n \n 'use strict';\n const common = require('../common');\n+const { hijackStderr } = require('../common/hijackstdio');\n const assert = require('assert');\n const os = require('os');\n \n@@ -63,7 +64,7 @@ function child() {\n     throw new Error('No ticking!');\n   };\n \n-  common.hijackStderr(common.mustNotCall('stderr.write must not be called.'));\n+  hijackStderr(common.mustNotCall('stderr.write must not be called.'));\n \n   process._rawDebug('I can still %s!', 'debug');\n }"
        },
        {
            "sha": "e4538ddc0847224fa49aef74d00f16d12f06d0f4",
            "filename": "test/parallel/test-process-warning.js",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-process-warning.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-process-warning.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-warning.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -1,12 +1,16 @@\n 'use strict';\n \n const common = require('../common');\n+const {\n+  hijackStderr,\n+  restoreStderr\n+} = require('../common/hijackstdio');\n const assert = require('assert');\n \n function test1() {\n   // Output is skipped if the argument to the 'warning' event is\n   // not an Error object.\n-  common.hijackStderr(common.mustNotCall('stderr.write must not be called'));\n+  hijackStderr(common.mustNotCall('stderr.write must not be called'));\n   process.emit('warning', 'test');\n   setImmediate(test2);\n }\n@@ -21,7 +25,7 @@ function test2() {\n }\n \n function test3() {\n-  common.restoreStderr();\n+  restoreStderr();\n   // Type defaults to warning when the second argument is an object\n   process.emitWarning('test', {});\n   process.once('warning', common.mustCall((warning) => {"
        },
        {
            "sha": "784bcade77e6fab3624da257acec015b1bf55c14",
            "filename": "test/parallel/test-repl-tab-complete.js",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-repl-tab-complete.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-repl-tab-complete.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-tab-complete.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -23,6 +23,10 @@\n \n const common = require('../common');\n const ArrayStream = require('../common/arraystream');\n+const {\n+  hijackStderr,\n+  restoreStderr\n+} = require('../common/hijackstdio');\n const assert = require('assert');\n const fixtures = require('../common/fixtures');\n const hasInspector = process.config.variables.v8_enable_inspector === 1;\n@@ -423,9 +427,9 @@ testMe.complete('obj.', common.mustCall((error, data) => {\n     putIn.run([`var ele = new ${type.name}(1e6 + 1); ele.biu = 1;`]);\n   }\n \n-  common.hijackStderr(common.mustNotCall());\n+  hijackStderr(common.mustNotCall());\n   testMe.complete('ele.', common.mustCall((err, data) => {\n-    common.restoreStderr();\n+    restoreStderr();\n     assert.ifError(err);\n \n     const ele = (type === Array) ?"
        },
        {
            "sha": "a3062c227e6fd1d41e1b58bfc0209a7a0d4e698a",
            "filename": "test/parallel/test-tls-parse-cert-string.js",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-tls-parse-cert-string.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-tls-parse-cert-string.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-parse-cert-string.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -5,13 +5,17 @@ const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n+const {\n+  hijackStderr,\n+  restoreStderr\n+} = require('../common/hijackstdio');\n const assert = require('assert');\n // Flags: --expose_internals\n const internalTLS = require('internal/tls');\n const tls = require('tls');\n \n const noOutput = common.mustNotCall();\n-common.hijackStderr(noOutput);\n+hijackStderr(noOutput);\n \n {\n   const singles = 'C=US\\nST=CA\\nL=SF\\nO=Node.js Foundation\\nOU=Node.js\\n' +\n@@ -54,7 +58,7 @@ common.hijackStderr(noOutput);\n   assert.deepStrictEqual(internalTLS.parseCertString(input), expected);\n }\n \n-common.restoreStderr();\n+restoreStderr();\n \n {\n   common.expectWarning('DeprecationWarning',"
        },
        {
            "sha": "4d81fc8f7a425530c4d4d4e57f30b99d61226878",
            "filename": "test/parallel/test-util-log.js",
            "status": "modified",
            "additions": 8,
            "deletions": 3,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-util-log.js",
            "raw_url": "https://github.com/nodejs/node/raw/5da834f685f85af477afcb193d283f14a5244025/test%2Fparallel%2Ftest-util-log.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util-log.js?ref=5da834f685f85af477afcb193d283f14a5244025",
            "patch": "@@ -21,17 +21,22 @@\n \n 'use strict';\n const common = require('../common');\n+const {\n+  hijackStdout,\n+  hijackStderr,\n+  restoreStdout,\n+} = require('../common/hijackstdio');\n const assert = require('assert');\n const util = require('util');\n \n assert.ok(process.stdout.writable);\n assert.ok(process.stderr.writable);\n \n const strings = [];\n-common.hijackStdout(function(data) {\n+hijackStdout(function(data) {\n   strings.push(data);\n });\n-common.hijackStderr(common.mustNotCall('stderr.write must not be called'));\n+hijackStderr(common.mustNotCall('stderr.write must not be called'));\n \n const tests = [\n   { input: 'foo', output: 'foo' },\n@@ -57,4 +62,4 @@ tests.forEach(function(test) {\n \n assert.strictEqual(process.stdout.writeTimes, tests.length);\n \n-common.restoreStdout();\n+restoreStdout();"
        }
    ],
    "stats": {
        "total": 242,
        "additions": 146,
        "deletions": 96
    }
}