{
    "author": "BridgeAR",
    "message": "benchmark: (url) refactor\n\nPR-URL: https://github.com/nodejs/node/pull/18320\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "1a8ed225b2ce66451ec34705f0d96438671e0f70",
    "files": [
        {
            "sha": "2cc3ab8c75e65c31c05783912241b64bd8892b75",
            "filename": "benchmark/url/legacy-vs-whatwg-url-get-prop.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-get-prop.js",
            "raw_url": "https://github.com/nodejs/node/raw/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-get-prop.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Furl%2Flegacy-vs-whatwg-url-get-prop.js?ref=1a8ed225b2ce66451ec34705f0d96438671e0f70",
            "patch": "@@ -74,7 +74,7 @@ function useWHATWG(n, input) {\n function main({ type, n, method }) {\n   const input = inputs[type];\n   if (!input) {\n-    throw new Error('Unknown input type');\n+    throw new Error(`Unknown input type \"${type}\"`);\n   }\n \n   var noDead;  // Avoid dead code elimination.\n@@ -86,7 +86,7 @@ function main({ type, n, method }) {\n       noDead = useWHATWG(n, input);\n       break;\n     default:\n-      throw new Error('Unknown method');\n+      throw new Error(`Unknown method \"${method}\"`);\n   }\n \n   assert.ok(noDead);"
        },
        {
            "sha": "2be55e17cc354b0e953ebfddbea8c099352dcae2",
            "filename": "benchmark/url/legacy-vs-whatwg-url-parse.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-parse.js",
            "raw_url": "https://github.com/nodejs/node/raw/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-parse.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Furl%2Flegacy-vs-whatwg-url-parse.js?ref=1a8ed225b2ce66451ec34705f0d96438671e0f70",
            "patch": "@@ -34,7 +34,7 @@ function useWHATWG(n, input) {\n function main({ type, n, method }) {\n   const input = inputs[type];\n   if (!input) {\n-    throw new Error('Unknown input type');\n+    throw new Error(`Unknown input type \"${type}\"`);\n   }\n \n   var noDead;  // Avoid dead code elimination.\n@@ -46,7 +46,7 @@ function main({ type, n, method }) {\n       noDead = useWHATWG(n, input);\n       break;\n     default:\n-      throw new Error('Unknown method');\n+      throw new Error(`Unknown method ${method}`);\n   }\n \n   assert.ok(noDead);"
        },
        {
            "sha": "e915ceb54f917f2d4be0eab5b7b08896af17e486",
            "filename": "benchmark/url/legacy-vs-whatwg-url-searchparams-parse.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-searchparams-parse.js",
            "raw_url": "https://github.com/nodejs/node/raw/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-searchparams-parse.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Furl%2Flegacy-vs-whatwg-url-searchparams-parse.js?ref=1a8ed225b2ce66451ec34705f0d96438671e0f70",
            "patch": "@@ -31,7 +31,7 @@ function useWHATWG(n, input) {\n function main({ type, n, method }) {\n   const input = inputs[type];\n   if (!input) {\n-    throw new Error('Unknown input type');\n+    throw new Error(`Unknown input type \"${type}\"`);\n   }\n \n   switch (method) {\n@@ -42,6 +42,6 @@ function main({ type, n, method }) {\n       useWHATWG(n, input);\n       break;\n     default:\n-      throw new Error('Unknown method');\n+      throw new Error(`Unknown method ${method}`);\n   }\n }"
        },
        {
            "sha": "8fe3e546f0780d312becb3bb6b27a4a69b03f8b2",
            "filename": "benchmark/url/legacy-vs-whatwg-url-searchparams-serialize.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-searchparams-serialize.js",
            "raw_url": "https://github.com/nodejs/node/raw/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-searchparams-serialize.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Furl%2Flegacy-vs-whatwg-url-searchparams-serialize.js?ref=1a8ed225b2ce66451ec34705f0d96438671e0f70",
            "patch": "@@ -33,7 +33,7 @@ function useWHATWG(n, input, prop) {\n function main({ type, n, method }) {\n   const input = inputs[type];\n   if (!input) {\n-    throw new Error('Unknown input type');\n+    throw new Error(`Unknown input type \"${type}\"`);\n   }\n \n   switch (method) {\n@@ -44,6 +44,6 @@ function main({ type, n, method }) {\n       useWHATWG(n, input);\n       break;\n     default:\n-      throw new Error('Unknown method');\n+      throw new Error(`Unknown method ${method}`);\n   }\n }"
        },
        {
            "sha": "017ec4328c590bea887a9949b3fd3efa00105b0b",
            "filename": "benchmark/url/legacy-vs-whatwg-url-serialize.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-serialize.js",
            "raw_url": "https://github.com/nodejs/node/raw/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Flegacy-vs-whatwg-url-serialize.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Furl%2Flegacy-vs-whatwg-url-serialize.js?ref=1a8ed225b2ce66451ec34705f0d96438671e0f70",
            "patch": "@@ -36,7 +36,7 @@ function useWHATWG(n, input, prop) {\n function main({ type, n, method }) {\n   const input = inputs[type];\n   if (!input) {\n-    throw new Error('Unknown input type');\n+    throw new Error(`Unknown input type \"${type}\"`);\n   }\n \n   var noDead;  // Avoid dead code elimination.\n@@ -48,7 +48,7 @@ function main({ type, n, method }) {\n       noDead = useWHATWG(n, input);\n       break;\n     default:\n-      throw new Error('Unknown method');\n+      throw new Error(`Unknown method ${method}`);\n   }\n \n   assert.ok(noDead);"
        },
        {
            "sha": "cae2ef5df619564279c4701d3bf3f7622c05a510",
            "filename": "benchmark/url/url-searchparams-iteration.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Furl-searchparams-iteration.js",
            "raw_url": "https://github.com/nodejs/node/raw/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Furl-searchparams-iteration.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Furl%2Furl-searchparams-iteration.js?ref=1a8ed225b2ce66451ec34705f0d96438671e0f70",
            "patch": "@@ -53,6 +53,6 @@ function main({ method, n }) {\n       iterator(n);\n       break;\n     default:\n-      throw new Error('Unknown method');\n+      throw new Error(`Unknown method ${method}`);\n   }\n }"
        },
        {
            "sha": "0cf66dabbc36dcfe435e5da3ea6f55c3996ddfac",
            "filename": "benchmark/url/url-searchparams-read.js",
            "status": "modified",
            "additions": 5,
            "deletions": 36,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Furl-searchparams-read.js",
            "raw_url": "https://github.com/nodejs/node/raw/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Furl-searchparams-read.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Furl%2Furl-searchparams-read.js?ref=1a8ed225b2ce66451ec34705f0d96438671e0f70",
            "patch": "@@ -10,45 +10,14 @@ const bench = common.createBenchmark(main, {\n \n const str = 'one=single&two=first&three=first&two=2nd&three=2nd&three=3rd';\n \n-function get(n, param) {\n-  const params = new URLSearchParams(str);\n-\n-  bench.start();\n-  for (var i = 0; i < n; i += 1)\n-    params.get(param);\n-  bench.end(n);\n-}\n-\n-function getAll(n, param) {\n-  const params = new URLSearchParams(str);\n-\n-  bench.start();\n-  for (var i = 0; i < n; i += 1)\n-    params.getAll(param);\n-  bench.end(n);\n-}\n-\n-function has(n, param) {\n+function main({ method, param, n }) {\n   const params = new URLSearchParams(str);\n+  const fn = params[method];\n+  if (!fn)\n+    throw new Error(`Unknown method ${method}`);\n \n   bench.start();\n   for (var i = 0; i < n; i += 1)\n-    params.has(param);\n+    fn(param);\n   bench.end(n);\n }\n-\n-function main({ method, param, n }) {\n-  switch (method) {\n-    case 'get':\n-      get(n, param);\n-      break;\n-    case 'getAll':\n-      getAll(n, param);\n-      break;\n-    case 'has':\n-      has(n, param);\n-      break;\n-    default:\n-      throw new Error('Unknown method');\n-  }\n-}"
        },
        {
            "sha": "fe152bf823468fc33874a91168072372eb83a5a8",
            "filename": "benchmark/url/url-searchparams-sort.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Furl-searchparams-sort.js",
            "raw_url": "https://github.com/nodejs/node/raw/1a8ed225b2ce66451ec34705f0d96438671e0f70/benchmark%2Furl%2Furl-searchparams-sort.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Furl%2Furl-searchparams-sort.js?ref=1a8ed225b2ce66451ec34705f0d96438671e0f70",
            "patch": "@@ -37,9 +37,8 @@ function main({ type, n }) {\n   const params = new URLSearchParams();\n   const array = getParams(input);\n \n-  var i;\n   bench.start();\n-  for (i = 0; i < n; i++) {\n+  for (var i = 0; i < n; i++) {\n     params[searchParams] = array.slice();\n     params.sort();\n   }"
        }
    ],
    "stats": {
        "total": 66,
        "additions": 17,
        "deletions": 49
    }
}