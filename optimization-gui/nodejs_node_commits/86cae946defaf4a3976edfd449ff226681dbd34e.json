{
    "author": "ryzokuken",
    "message": "src: use kInternalized instead of kNormal\n\nUse v8::NewStringType::kInternalized instead of\nv8::NewStringType::kNormal in different calls to v8::String::NewFromUtf8\nin node.h and node.cc wherever it makes sense, to save the GC some work\nwhich would largely be redundant.\n\nPR-URL: https://github.com/nodejs/node/pull/21926\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "86cae946defaf4a3976edfd449ff226681dbd34e",
    "files": [
        {
            "sha": "c4fc05f75fe2b125cbbdbe021f8abac8f94da555",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/86cae946defaf4a3976edfd449ff226681dbd34e/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/86cae946defaf4a3976edfd449ff226681dbd34e/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=86cae946defaf4a3976edfd449ff226681dbd34e",
            "patch": "@@ -2352,11 +2352,11 @@ void SetupProcessObject(Environment* env,\n   if (uv_exepath(exec_path, &exec_path_len) == 0) {\n     exec_path_value = String::NewFromUtf8(env->isolate(),\n                                           exec_path,\n-                                          v8::NewStringType::kNormal,\n+                                          v8::NewStringType::kInternalized,\n                                           exec_path_len).ToLocalChecked();\n   } else {\n     exec_path_value = String::NewFromUtf8(env->isolate(), argv[0],\n-        v8::NewStringType::kNormal).ToLocalChecked();\n+        v8::NewStringType::kInternalized).ToLocalChecked();\n   }\n   process->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"execPath\"),\n                exec_path_value);"
        },
        {
            "sha": "a94612eb0b9de80e13390ce3e52d8f8d9c56ae3b",
            "filename": "src/node.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/86cae946defaf4a3976edfd449ff226681dbd34e/src%2Fnode.h",
            "raw_url": "https://github.com/nodejs/node/raw/86cae946defaf4a3976edfd449ff226681dbd34e/src%2Fnode.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.h?ref=86cae946defaf4a3976edfd449ff226681dbd34e",
            "patch": "@@ -304,7 +304,7 @@ NODE_EXTERN struct uv_loop_s* GetCurrentEventLoop(v8::Isolate* isolate);\n     v8::Local<v8::Context> context = isolate->GetCurrentContext();            \\\n     v8::Local<v8::String> constant_name =                                     \\\n         v8::String::NewFromUtf8(isolate, #constant,                           \\\n-            v8::NewStringType::kNormal).ToLocalChecked();                     \\\n+            v8::NewStringType::kInternalized).ToLocalChecked();               \\\n     v8::Local<v8::Number> constant_value =                                    \\\n         v8::Number::New(isolate, static_cast<double>(constant));              \\\n     v8::PropertyAttribute constant_attributes =                               \\\n@@ -346,7 +346,7 @@ inline void NODE_SET_METHOD(v8::Local<v8::Template> recv,\n   v8::Local<v8::FunctionTemplate> t = v8::FunctionTemplate::New(isolate,\n                                                                 callback);\n   v8::Local<v8::String> fn_name = v8::String::NewFromUtf8(isolate, name,\n-      v8::NewStringType::kNormal).ToLocalChecked();\n+      v8::NewStringType::kInternalized).ToLocalChecked();\n   t->SetClassName(fn_name);\n   recv->Set(fn_name, t);\n }\n@@ -361,7 +361,7 @@ inline void NODE_SET_METHOD(v8::Local<v8::Object> recv,\n                                                                 callback);\n   v8::Local<v8::Function> fn = t->GetFunction();\n   v8::Local<v8::String> fn_name = v8::String::NewFromUtf8(isolate, name,\n-      v8::NewStringType::kNormal).ToLocalChecked();\n+      v8::NewStringType::kInternalized).ToLocalChecked();\n   fn->SetName(fn_name);\n   recv->Set(fn_name, fn);\n }\n@@ -378,7 +378,7 @@ inline void NODE_SET_PROTOTYPE_METHOD(v8::Local<v8::FunctionTemplate> recv,\n   v8::Local<v8::FunctionTemplate> t =\n       v8::FunctionTemplate::New(isolate, callback, v8::Local<v8::Value>(), s);\n   v8::Local<v8::String> fn_name = v8::String::NewFromUtf8(isolate, name,\n-      v8::NewStringType::kNormal).ToLocalChecked();\n+      v8::NewStringType::kInternalized).ToLocalChecked();\n   t->SetClassName(fn_name);\n   recv->PrototypeTemplate()->Set(fn_name, t);\n }"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 6,
        "deletions": 6
    }
}