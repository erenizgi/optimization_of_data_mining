{
    "author": "targos",
    "message": "doc: remove usage of deprecated V8 APIs in addons.md\n\nPR-URL: https://github.com/nodejs/node/pull/22667\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Denys Otrishko <shishugi@gmail.com>\nReviewed-By: Ujjwal Sharma <usharma1998@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "d9ea50ee66b93266f0c8ebe9d98502816e04acf2",
    "files": [
        {
            "sha": "483f2ad27d7feb83b28a46c9d79d7c6b3cb407cc",
            "filename": "doc/api/addons.md",
            "status": "modified",
            "additions": 14,
            "deletions": 10,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/d9ea50ee66b93266f0c8ebe9d98502816e04acf2/doc%2Fapi%2Faddons.md",
            "raw_url": "https://github.com/nodejs/node/raw/d9ea50ee66b93266f0c8ebe9d98502816e04acf2/doc%2Fapi%2Faddons.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Faddons.md?ref=d9ea50ee66b93266f0c8ebe9d98502816e04acf2",
            "patch": "@@ -491,7 +491,8 @@ void Add(const FunctionCallbackInfo<Value>& args) {\n   }\n \n   // Perform the operation\n-  double value = args[0]->NumberValue() + args[1]->NumberValue();\n+  double value =\n+      args[0].As<Number>()->Value() + args[1].As<Number>()->Value();\n   Local<Number> num = Number::New(isolate, value);\n \n   // Set the return value (using the passed in\n@@ -597,7 +598,7 @@ void CreateObject(const FunctionCallbackInfo<Value>& args) {\n   Isolate* isolate = args.GetIsolate();\n \n   Local<Object> obj = Object::New(isolate);\n-  obj->Set(String::NewFromUtf8(isolate, \"msg\"), args[0]->ToString());\n+  obj->Set(String::NewFromUtf8(isolate, \"msg\"), args[0]->ToString(isolate));\n \n   args.GetReturnValue().Set(obj);\n }\n@@ -783,18 +784,19 @@ void MyObject::Init(Local<Object> exports) {\n \n void MyObject::New(const FunctionCallbackInfo<Value>& args) {\n   Isolate* isolate = args.GetIsolate();\n+  Local<Context> context = isolate->GetCurrentContext();\n \n   if (args.IsConstructCall()) {\n     // Invoked as constructor: `new MyObject(...)`\n-    double value = args[0]->IsUndefined() ? 0 : args[0]->NumberValue();\n+    double value = args[0]->IsUndefined() ?\n+        0 : args[0]->NumberValue(context).FromMaybe(0);\n     MyObject* obj = new MyObject(value);\n     obj->Wrap(args.This());\n     args.GetReturnValue().Set(args.This());\n   } else {\n     // Invoked as plain function `MyObject(...)`, turn into construct call.\n     const int argc = 1;\n     Local<Value> argv[argc] = { args[0] };\n-    Local<Context> context = isolate->GetCurrentContext();\n     Local<Function> cons = Local<Function>::New(isolate, constructor);\n     Local<Object> result =\n         cons->NewInstance(context, argc, argv).ToLocalChecked();\n@@ -965,10 +967,12 @@ void MyObject::Init(Isolate* isolate) {\n \n void MyObject::New(const FunctionCallbackInfo<Value>& args) {\n   Isolate* isolate = args.GetIsolate();\n+  Local<Context> context = isolate->GetCurrentContext();\n \n   if (args.IsConstructCall()) {\n     // Invoked as constructor: `new MyObject(...)`\n-    double value = args[0]->IsUndefined() ? 0 : args[0]->NumberValue();\n+    double value = args[0]->IsUndefined() ?\n+        0 : args[0]->NumberValue(context).FromMaybe(0);\n     MyObject* obj = new MyObject(value);\n     obj->Wrap(args.This());\n     args.GetReturnValue().Set(args.This());\n@@ -977,7 +981,6 @@ void MyObject::New(const FunctionCallbackInfo<Value>& args) {\n     const int argc = 1;\n     Local<Value> argv[argc] = { args[0] };\n     Local<Function> cons = Local<Function>::New(isolate, constructor);\n-    Local<Context> context = isolate->GetCurrentContext();\n     Local<Object> instance =\n         cons->NewInstance(context, argc, argv).ToLocalChecked();\n     args.GetReturnValue().Set(instance);\n@@ -1080,9 +1083,9 @@ void Add(const FunctionCallbackInfo<Value>& args) {\n   Isolate* isolate = args.GetIsolate();\n \n   MyObject* obj1 = node::ObjectWrap::Unwrap<MyObject>(\n-      args[0]->ToObject());\n+      args[0]->ToObject(isolate));\n   MyObject* obj2 = node::ObjectWrap::Unwrap<MyObject>(\n-      args[1]->ToObject());\n+      args[1]->ToObject(isolate));\n \n   double sum = obj1->value() + obj2->value();\n   args.GetReturnValue().Set(Number::New(isolate, sum));\n@@ -1172,18 +1175,19 @@ void MyObject::Init(Isolate* isolate) {\n \n void MyObject::New(const FunctionCallbackInfo<Value>& args) {\n   Isolate* isolate = args.GetIsolate();\n+  Local<Context> context = isolate->GetCurrentContext();\n \n   if (args.IsConstructCall()) {\n     // Invoked as constructor: `new MyObject(...)`\n-    double value = args[0]->IsUndefined() ? 0 : args[0]->NumberValue();\n+    double value = args[0]->IsUndefined() ?\n+        0 : args[0]->NumberValue(context).FromMaybe(0);\n     MyObject* obj = new MyObject(value);\n     obj->Wrap(args.This());\n     args.GetReturnValue().Set(args.This());\n   } else {\n     // Invoked as plain function `MyObject(...)`, turn into construct call.\n     const int argc = 1;\n     Local<Value> argv[argc] = { args[0] };\n-    Local<Context> context = isolate->GetCurrentContext();\n     Local<Function> cons = Local<Function>::New(isolate, constructor);\n     Local<Object> instance =\n         cons->NewInstance(context, argc, argv).ToLocalChecked();"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 14,
        "deletions": 10
    }
}