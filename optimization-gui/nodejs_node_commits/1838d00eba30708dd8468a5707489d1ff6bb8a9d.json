{
    "author": "joyeecheung",
    "message": "src: reduce includes of node_internals.h\n\nPR-URL: https://github.com/nodejs/node/pull/25507\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "1838d00eba30708dd8468a5707489d1ff6bb8a9d",
    "files": [
        {
            "sha": "70fc86702f0b1096bea0865373eac38a0a7a5d41",
            "filename": "src/async_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fasync_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fasync_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fasync_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -22,7 +22,6 @@\n #include \"async_wrap-inl.h\"\n #include \"env-inl.h\"\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n #include \"tracing/traced_value.h\"\n #include \"util-inl.h\"\n "
        },
        {
            "sha": "57c02fb32653e524721cb37d4412ad690c7b3c64",
            "filename": "src/cares_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fcares_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fcares_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fcares_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -24,7 +24,6 @@\n #include \"async_wrap-inl.h\"\n #include \"env-inl.h\"\n #include \"node.h\"\n-#include \"node_internals.h\"\n #include \"req_wrap-inl.h\"\n #include \"util-inl.h\"\n #include \"uv.h\""
        },
        {
            "sha": "67308bdb9c8d95b69f3e27d8bd811aad00df655f",
            "filename": "src/connection_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fconnection_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fconnection_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fconnection_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -3,7 +3,6 @@\n #include \"connect_wrap.h\"\n #include \"env-inl.h\"\n #include \"pipe_wrap.h\"\n-#include \"node_internals.h\"\n #include \"stream_base-inl.h\"\n #include \"stream_wrap.h\"\n #include \"tcp_wrap.h\""
        },
        {
            "sha": "6dac86f002b07d5981ddc0e1398c3470fa9b76a6",
            "filename": "src/debug_utils.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fdebug_utils.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fdebug_utils.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fdebug_utils.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,5 +1,4 @@\n #include \"debug_utils.h\"\n-#include \"node_internals.h\"\n \n #ifdef __POSIX__\n #if defined(__linux__)"
        },
        {
            "sha": "7e8a23d3ae309e22619306b5ed8cccf43dfe41c6",
            "filename": "src/debug_utils.h",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fdebug_utils.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fdebug_utils.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fdebug_utils.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -4,9 +4,10 @@\n #if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n #include \"async_wrap.h\"\n-#include \"env.h\"\n-#include <string>\n+#include \"env-inl.h\"\n+\n #include <sstream>\n+#include <string>\n \n // Use FORCE_INLINE on functions that have a debug-category-enabled check first\n // and then ideally only a single function call following it, to maintain"
        },
        {
            "sha": "acc83d017e06330a718f30b204f8f97fdbaf4a2b",
            "filename": "src/fs_event_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Ffs_event_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Ffs_event_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ffs_event_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -23,7 +23,6 @@\n #include \"env-inl.h\"\n #include \"util-inl.h\"\n #include \"node.h\"\n-#include \"node_internals.h\"\n #include \"handle_wrap.h\"\n #include \"string_bytes.h\"\n "
        },
        {
            "sha": "a1ca118e6c1f93b13ef289eebb8e512806785818",
            "filename": "src/heap_utils.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fheap_utils.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fheap_utils.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fheap_utils.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,5 +1,4 @@\n-#include \"node_internals.h\"\n-#include \"env.h\"\n+#include \"env-inl.h\"\n \n using v8::Array;\n using v8::Boolean;"
        },
        {
            "sha": "d94cf4173d19aa1b0983c8d540b11c69ed93c328",
            "filename": "src/inspector_js_api.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Finspector_js_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Finspector_js_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_js_api.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,7 +1,6 @@\n #include \"base_object-inl.h\"\n #include \"inspector_agent.h\"\n #include \"inspector_io.h\"\n-#include \"node_internals.h\"\n #include \"v8.h\"\n #include \"v8-inspector.h\"\n "
        },
        {
            "sha": "32dea04db5aeecef747843a8350a2b2081409c8b",
            "filename": "src/js_stream.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fjs_stream.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fjs_stream.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fjs_stream.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -4,7 +4,6 @@\n #include \"env-inl.h\"\n #include \"node_buffer.h\"\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n #include \"stream_base-inl.h\"\n #include \"v8.h\"\n "
        },
        {
            "sha": "8599029fea1f9f747ce35d8f77b0c42b4e5fd509",
            "filename": "src/module_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fmodule_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fmodule_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fmodule_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -7,7 +7,6 @@\n #include \"node_errors.h\"\n #include \"node_url.h\"\n #include \"util-inl.h\"\n-#include \"node_internals.h\"\n #include \"node_contextify.h\"\n #include \"node_watchdog.h\"\n "
        },
        {
            "sha": "85f3c19e690182b69d238e7c63d42a336cdaeaca",
            "filename": "src/node_binding.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_binding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_binding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_binding.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,6 +1,7 @@\n #include \"node_binding.h\"\n-#include \"node_internals.h\"\n+#include \"env-inl.h\"\n #include \"node_native_module.h\"\n+#include \"util.h\"\n \n #if HAVE_OPENSSL\n #define NODE_BUILTIN_OPENSSL_MODULES(V) V(crypto) V(tls_wrap)"
        },
        {
            "sha": "ccc338f94174aaa7aa117cec2748fc32c67944be",
            "filename": "src/node_buffer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_buffer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_buffer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_buffer.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -19,9 +19,10 @@\n // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n-#include \"node.h\"\n #include \"node_buffer.h\"\n+#include \"node.h\"\n #include \"node_errors.h\"\n+#include \"node_internals.h\"\n \n #include \"env-inl.h\"\n #include \"string_bytes.h\""
        },
        {
            "sha": "5f4f20554aed50c39c0eefe252aa299ae5a8ef8c",
            "filename": "src/node_contextify.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_contextify.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_contextify.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_contextify.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -6,7 +6,6 @@\n #include \"base_object-inl.h\"\n #include \"node_context_data.h\"\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n \n namespace node {\n namespace contextify {"
        },
        {
            "sha": "920869a2f2becd09c38f10a6e0a73189dcda95f5",
            "filename": "src/node_crypto.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_crypto.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_crypto.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -27,7 +27,6 @@\n #include \"node_crypto_clienthello-inl.h\"\n #include \"node_crypto_groups.h\"\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n #include \"node_mutex.h\"\n #include \"node_process.h\"\n #include \"tls_wrap.h\"  // TLSWrap"
        },
        {
            "sha": "9075845442fd4dda1b1cb0814670973391622a96",
            "filename": "src/node_domain.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_domain.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_domain.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_domain.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,5 +1,5 @@\n+#include \"env-inl.h\"\n #include \"v8.h\"\n-#include \"node_internals.h\"\n \n namespace node {\n namespace domain {"
        },
        {
            "sha": "dfabde0747bdc98395dfd613959083ab59c7f44b",
            "filename": "src/node_dtrace.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_dtrace.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_dtrace.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_dtrace.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -43,7 +43,6 @@\n #endif\n \n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n \n #include <string.h>\n "
        },
        {
            "sha": "ee11cd68aa7630ceaf935616f7c479fb4718dc64",
            "filename": "src/node_dtrace.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_dtrace.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_dtrace.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_dtrace.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -24,7 +24,8 @@\n \n #if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n-#include \"node_internals.h\"\n+#include \"env.h\"\n+#include \"v8.h\"\n \n extern \"C\" {\n /*"
        },
        {
            "sha": "63cba55ab567a844f5a808bc806a4e6fe893e931",
            "filename": "src/node_env_var.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_env_var.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_env_var.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_env_var.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,6 +1,6 @@\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n #include \"node_process.h\"\n+#include \"util.h\"\n \n #ifdef __APPLE__\n #include <crt_externs.h>"
        },
        {
            "sha": "35c8e01a28c0b5f621b47da64825c70ac9e8e851",
            "filename": "src/node_file.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_file.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_file.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_file.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -22,9 +22,9 @@\n #include \"node_file.h\"\n #include \"aliased_buffer.h\"\n #include \"node_buffer.h\"\n-#include \"node_internals.h\"\n #include \"node_process.h\"\n #include \"node_stat_watcher.h\"\n+#include \"util.h\"\n \n #include \"tracing/trace_event.h\"\n "
        },
        {
            "sha": "a3ce022835ea5ae6e40eb0de6a630780566af09f",
            "filename": "src/node_http2.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_http2.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_http2.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http2.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -4,8 +4,8 @@\n #include \"node_buffer.h\"\n #include \"node_http2.h\"\n #include \"node_http2_state.h\"\n-#include \"node_internals.h\"\n #include \"node_perf.h\"\n+#include \"util.h\"\n \n #include <algorithm>\n "
        },
        {
            "sha": "8347510c9d09136040aa0e772337c85df4e8832d",
            "filename": "src/node_http2.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_http2.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_http2.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http2.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -3,7 +3,10 @@\n \n #if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n+// FIXME(joyeecheung): nghttp2.h needs stdint.h to compile on Windows\n+#include <stdint.h>\n #include \"nghttp2/nghttp2.h\"\n+\n #include \"node_http2_state.h\"\n #include \"node_perf.h\"\n #include \"stream_base-inl.h\""
        },
        {
            "sha": "7a955cc1e9eca63405a5c2b20144f9d9b1e5de74",
            "filename": "src/node_http_parser_impl.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_http_parser_impl.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_http_parser_impl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http_parser_impl.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -27,7 +27,7 @@\n \n #include \"node.h\"\n #include \"node_buffer.h\"\n-#include \"node_internals.h\"\n+#include \"util.h\"\n \n #include \"async_wrap-inl.h\"\n #include \"env-inl.h\""
        },
        {
            "sha": "edc7f56093a137f61f669eb5eb75d28a708182c0",
            "filename": "src/node_i18n.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_i18n.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_i18n.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_i18n.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -44,12 +44,13 @@\n \n #if defined(NODE_HAVE_I18N_SUPPORT)\n \n+#include \"base_object-inl.h\"\n+#include \"env-inl.h\"\n #include \"node.h\"\n #include \"node_buffer.h\"\n #include \"node_errors.h\"\n-#include \"env-inl.h\"\n+#include \"node_internals.h\"\n #include \"util-inl.h\"\n-#include \"base_object-inl.h\"\n #include \"v8.h\"\n \n #include <unicode/utypes.h>"
        },
        {
            "sha": "a0a398ac8187364d194e3952b82488c48f0fa868",
            "filename": "src/node_i18n.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_i18n.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_i18n.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_i18n.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -24,7 +24,8 @@\n \n #if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n-#include \"node_internals.h\"\n+#include \"util.h\"\n+\n #include <string>\n \n #if defined(NODE_HAVE_I18N_SUPPORT)"
        },
        {
            "sha": "0d4fe74ebf3d02ebc9c3f94a36d4050a9654b57e",
            "filename": "src/node_internals.h",
            "status": "modified",
            "additions": 0,
            "deletions": 100,
            "changes": 100,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_internals.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_internals.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_internals.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -44,39 +44,9 @@\n #define Z_MIN_WINDOWBITS 8\n #define Z_MAX_WINDOWBITS 15\n #define Z_DEFAULT_WINDOWBITS 15\n-// Fewer than 64 bytes per chunk is not recommended.\n-// Technically it could work with as few as 8, but even 64 bytes\n-// is low.  Usually a MB or more is best.\n-#define Z_MIN_CHUNK 64\n-#define Z_MAX_CHUNK std::numeric_limits<double>::infinity()\n-#define Z_DEFAULT_CHUNK (16 * 1024)\n-#define Z_MIN_MEMLEVEL 1\n-#define Z_MAX_MEMLEVEL 9\n-#define Z_DEFAULT_MEMLEVEL 8\n-#define Z_MIN_LEVEL -1\n-#define Z_MAX_LEVEL 9\n-#define Z_DEFAULT_LEVEL Z_DEFAULT_COMPRESSION\n \n struct sockaddr;\n \n-// Variation on NODE_DEFINE_CONSTANT that sets a String value.\n-#define NODE_DEFINE_STRING_CONSTANT(target, name, constant)                   \\\n-  do {                                                                        \\\n-    v8::Isolate* isolate = target->GetIsolate();                              \\\n-    v8::Local<v8::String> constant_name =                                     \\\n-        v8::String::NewFromUtf8(isolate, name, v8::NewStringType::kNormal)    \\\n-            .ToLocalChecked();                                                \\\n-    v8::Local<v8::String> constant_value =                                    \\\n-        v8::String::NewFromUtf8(isolate, constant, v8::NewStringType::kNormal)\\\n-            .ToLocalChecked();                                                \\\n-    v8::PropertyAttribute constant_attributes =                               \\\n-        static_cast<v8::PropertyAttribute>(v8::ReadOnly | v8::DontDelete);    \\\n-    target->DefineOwnProperty(isolate->GetCurrentContext(),                   \\\n-                              constant_name,                                  \\\n-                              constant_value,                                 \\\n-                              constant_attributes).FromJust();                \\\n-  } while (0)\n-\n namespace node {\n \n namespace native_module {\n@@ -126,80 +96,10 @@ void RegisterSignalHandler(int signal,\n std::string GetHumanReadableProcessName();\n void GetHumanReadableProcessName(char (*name)[1024]);\n \n-template <typename T, size_t N>\n-constexpr size_t arraysize(const T(&)[N]) { return N; }\n-\n-#ifndef ROUND_UP\n-# define ROUND_UP(a, b) ((a) % (b) ? ((a) + (b)) - ((a) % (b)) : (a))\n-#endif\n-\n-#ifdef __GNUC__\n-# define MUST_USE_RESULT __attribute__((warn_unused_result))\n-#else\n-# define MUST_USE_RESULT\n-#endif\n-\n-class SlicedArguments {\n- public:\n-  inline explicit SlicedArguments(\n-      const v8::FunctionCallbackInfo<v8::Value>& args,\n-      size_t start = 0);\n-  inline size_t size() const { return size_; }\n-  inline v8::Local<v8::Value>* data() { return data_; }\n-\n- private:\n-  size_t size_;\n-  v8::Local<v8::Value>* data_;\n-  v8::Local<v8::Value> fixed_[64];\n-  std::vector<v8::Local<v8::Value>> dynamic_;\n-};\n-\n-SlicedArguments::SlicedArguments(\n-    const v8::FunctionCallbackInfo<v8::Value>& args,\n-    size_t start) : size_(0), data_(fixed_) {\n-  const size_t length = static_cast<size_t>(args.Length());\n-  if (start >= length) return;\n-  const size_t size = length - start;\n-\n-  if (size > arraysize(fixed_)) {\n-    dynamic_.resize(size);\n-    data_ = dynamic_.data();\n-  }\n-\n-  for (size_t i = 0; i < size; ++i)\n-    data_[i] = args[i + start];\n-\n-  size_ = size;\n-}\n-\n namespace task_queue {\n void PromiseRejectCallback(v8::PromiseRejectMessage message);\n }  // namespace task_queue\n \n-enum Endianness {\n-  kLittleEndian,  // _Not_ LITTLE_ENDIAN, clashes with endian.h.\n-  kBigEndian\n-};\n-\n-inline enum Endianness GetEndianness() {\n-  // Constant-folded by the compiler.\n-  const union {\n-    uint8_t u8[2];\n-    uint16_t u16;\n-  } u = {\n-    { 1, 0 }\n-  };\n-  return u.u16 == 1 ? kLittleEndian : kBigEndian;\n-}\n-\n-inline bool IsLittleEndian() {\n-  return GetEndianness() == kLittleEndian;\n-}\n-\n-inline bool IsBigEndian() {\n-  return GetEndianness() == kBigEndian;\n-}\n-\n class ArrayBufferAllocator : public v8::ArrayBuffer::Allocator {\n  public:\n   inline uint32_t* zero_fill_field() { return &zero_fill_field_; }"
        },
        {
            "sha": "aa4b92bf749eac00bf63e8cd809507be1ded2e1a",
            "filename": "src/node_messaging.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_messaging.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_messaging.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_messaging.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -4,7 +4,6 @@\n #include \"debug_utils.h\"\n #include \"node_buffer.h\"\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n #include \"node_process.h\"\n #include \"util-inl.h\"\n #include \"util.h\""
        },
        {
            "sha": "f272dd46bef6352fb8cabb00d90fd3366bfd3acb",
            "filename": "src/node_native_module.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_native_module.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_native_module.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_native_module.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,6 +1,5 @@\n #include \"node_native_module.h\"\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n \n namespace node {\n "
        },
        {
            "sha": "a3a5e0233aa67cb4de86a6c96fdfcaf89b78141e",
            "filename": "src/node_options.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_options.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_options.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_options.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,5 +1,6 @@\n #include <errno.h>\n-#include \"node_internals.h\"\n+#include \"env-inl.h\"\n+#include \"node_binding.h\"\n #include \"node_options-inl.h\"\n \n using v8::Boolean;"
        },
        {
            "sha": "4a372f4e4284911af3d938dded9dd467aa303201",
            "filename": "src/node_os.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_os.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_os.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_os.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -19,8 +19,9 @@\n // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n-#include \"node_internals.h\"\n+#include \"env-inl.h\"\n #include \"string_bytes.h\"\n+#include \"util.h\"\n \n #include <array>\n #include <errno.h>"
        },
        {
            "sha": "fe418ad441718a9d9071bb9add7731ff8e2f5664",
            "filename": "src/node_perf.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_perf.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_perf.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_perf.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -4,7 +4,6 @@\n #if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n #include \"node.h\"\n-#include \"node_internals.h\"\n #include \"node_perf_common.h\"\n #include \"env.h\"\n #include \"base_object-inl.h\""
        },
        {
            "sha": "1c4cf01c871ad338fe8dd5d03ced4256a60a4888",
            "filename": "src/node_perf_common.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_perf_common.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_perf_common.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_perf_common.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -4,6 +4,7 @@\n #if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n #include \"node.h\"\n+#include \"uv.h\"\n #include \"v8.h\"\n \n #include <algorithm>"
        },
        {
            "sha": "ccc40b65753d3df33a76e87d317f711cd30eae0d",
            "filename": "src/node_process_events.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_process_events.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_process_events.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_process_events.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,8 +1,8 @@\n #include <stdarg.h>\n \n-#include \"env.h\"\n-#include \"node_internals.h\"\n+#include \"env-inl.h\"\n #include \"node_process.h\"\n+#include \"util.h\"\n \n namespace node {\n using v8::Context;"
        },
        {
            "sha": "9564a0a2b32ad70e48cae3223d74c935bc39a143",
            "filename": "src/node_stat_watcher.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_stat_watcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_stat_watcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_stat_watcher.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -20,10 +20,10 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n #include \"node_stat_watcher.h\"\n-#include \"node_internals.h\"\n #include \"async_wrap-inl.h\"\n #include \"env.h\"\n #include \"node_file.h\"\n+#include \"util.h\"\n \n #include <string.h>\n #include <stdlib.h>"
        },
        {
            "sha": "a53bcba555448fd99d582da7dc0c7af528627ca5",
            "filename": "src/node_types.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_types.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_types.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_types.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,4 +1,5 @@\n-#include \"node_internals.h\"\n+#include \"env-inl.h\"\n+#include \"node.h\"\n \n using v8::Context;\n using v8::FunctionCallbackInfo;"
        },
        {
            "sha": "d7402c4d043430328ece81f45ccf3f5628e42731",
            "filename": "src/node_url.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_url.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_url.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_url.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -2,7 +2,7 @@\n #include \"base_object-inl.h\"\n #include \"node_errors.h\"\n #include \"node_i18n.h\"\n-#include \"node_internals.h\"\n+#include \"util.h\"\n \n #include <string>\n #include <vector>"
        },
        {
            "sha": "2a7d90cfe2b661f688a51377ee20b7c8fc197e13",
            "filename": "src/node_util.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_util.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_util.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_util.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,6 +1,6 @@\n-#include \"node_internals.h\"\n #include \"node_errors.h\"\n #include \"node_watchdog.h\"\n+#include \"util.h\"\n \n namespace node {\n namespace util {"
        },
        {
            "sha": "8ed0e416702e0b1b9517a1c1eb8f1a11ddd03542",
            "filename": "src/node_v8.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_v8.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_v8.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_v8.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -20,7 +20,6 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n #include \"node.h\"\n-#include \"node_internals.h\"\n #include \"env-inl.h\"\n #include \"util-inl.h\"\n #include \"v8.h\""
        },
        {
            "sha": "cb496005844e216e03a35115fa64875142998b8f",
            "filename": "src/node_worker.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_worker.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_worker.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_worker.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,7 +1,6 @@\n #include \"node_worker.h\"\n #include \"debug_utils.h\"\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n #include \"node_buffer.h\"\n #include \"node_perf.h\"\n #include \"util.h\""
        },
        {
            "sha": "639d7f87c5abe470cd752809153d464fa322e75e",
            "filename": "src/node_zlib.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_zlib.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fnode_zlib.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_zlib.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -21,7 +21,6 @@\n \n #include \"node.h\"\n #include \"node_buffer.h\"\n-#include \"node_internals.h\"\n \n #include \"async_wrap-inl.h\"\n #include \"env-inl.h\"\n@@ -59,6 +58,19 @@ using v8::Value;\n \n namespace {\n \n+// Fewer than 64 bytes per chunk is not recommended.\n+// Technically it could work with as few as 8, but even 64 bytes\n+// is low.  Usually a MB or more is best.\n+#define Z_MIN_CHUNK 64\n+#define Z_MAX_CHUNK std::numeric_limits<double>::infinity()\n+#define Z_DEFAULT_CHUNK (16 * 1024)\n+#define Z_MIN_MEMLEVEL 1\n+#define Z_MAX_MEMLEVEL 9\n+#define Z_DEFAULT_MEMLEVEL 8\n+#define Z_MIN_LEVEL -1\n+#define Z_MAX_LEVEL 9\n+#define Z_DEFAULT_LEVEL Z_DEFAULT_COMPRESSION\n+\n #define ZLIB_ERROR_CODES(V)      \\\n   V(Z_OK)                        \\\n   V(Z_STREAM_END)                \\"
        },
        {
            "sha": "8ad1e0f594aa26343a587166081ff071670ff963",
            "filename": "src/pipe_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fpipe_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fpipe_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fpipe_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -27,7 +27,6 @@\n #include \"handle_wrap.h\"\n #include \"node.h\"\n #include \"node_buffer.h\"\n-#include \"node_internals.h\"\n #include \"connect_wrap.h\"\n #include \"stream_base-inl.h\"\n #include \"stream_wrap.h\""
        },
        {
            "sha": "37afaf8ff961c9722317158a3431d790cf61c458",
            "filename": "src/process_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fprocess_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fprocess_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fprocess_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -20,7 +20,6 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n #include \"env-inl.h\"\n-#include \"node_internals.h\"\n #include \"stream_base-inl.h\"\n #include \"stream_wrap.h\"\n #include \"util-inl.h\""
        },
        {
            "sha": "5a600d2e21099ccca52a1d42df40c7c104024ab5",
            "filename": "src/spawn_sync.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fspawn_sync.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fspawn_sync.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fspawn_sync.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -22,8 +22,8 @@\n #include \"spawn_sync.h\"\n #include \"debug_utils.h\"\n #include \"env-inl.h\"\n+#include \"node_internals.h\"\n #include \"string_bytes.h\"\n-#include \"util.h\"\n \n #include <string.h>\n "
        },
        {
            "sha": "0ed6b9dff3a6632c3654dca1831b494820398ff6",
            "filename": "src/spawn_sync.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fspawn_sync.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fspawn_sync.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fspawn_sync.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -24,8 +24,9 @@\n \n #if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n-#include \"node_internals.h\"\n #include \"node_buffer.h\"\n+#include \"uv.h\"\n+#include \"v8.h\"\n \n namespace node {\n "
        },
        {
            "sha": "a55cb60cfc5338a510b25739617a2993b8055e3d",
            "filename": "src/stream_base.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstream_base.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstream_base.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstream_base.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -4,11 +4,9 @@\n #include \"node.h\"\n #include \"node_buffer.h\"\n #include \"node_errors.h\"\n-#include \"node_internals.h\"\n #include \"env-inl.h\"\n #include \"js_stream.h\"\n #include \"string_bytes.h\"\n-#include \"util.h\"\n #include \"util-inl.h\"\n #include \"v8.h\"\n "
        },
        {
            "sha": "e58aa929e4b30e35867c0dc8580d58faa4ee9b23",
            "filename": "src/stream_pipe.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstream_pipe.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstream_pipe.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstream_pipe.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,7 +1,6 @@\n #include \"stream_pipe.h\"\n #include \"stream_base-inl.h\"\n #include \"node_buffer.h\"\n-#include \"node_internals.h\"\n \n using v8::Context;\n using v8::External;"
        },
        {
            "sha": "53bb95d80dab12604d49861d0d36179a7e786d67",
            "filename": "src/string_bytes.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstring_bytes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstring_bytes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstring_bytes.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -22,9 +22,10 @@\n #include \"string_bytes.h\"\n \n #include \"base64.h\"\n-#include \"node_internals.h\"\n-#include \"node_errors.h\"\n+#include \"env-inl.h\"\n #include \"node_buffer.h\"\n+#include \"node_errors.h\"\n+#include \"util.h\"\n \n #include <limits.h>\n #include <string.h>  // memcpy"
        },
        {
            "sha": "9cf1bd671b3fc926017fcab81f991eef8316c89d",
            "filename": "src/string_decoder.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstring_decoder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstring_decoder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstring_decoder.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,7 +1,7 @@\n-#include \"string_decoder-inl.h\"\n-#include \"string_bytes.h\"\n-#include \"node_internals.h\"\n+#include \"env-inl.h\"\n #include \"node_buffer.h\"\n+#include \"string_bytes.h\"\n+#include \"string_decoder-inl.h\"\n \n using v8::Array;\n using v8::Context;"
        },
        {
            "sha": "95c746ea89e01e682cfeadd4fe71e28da6860420",
            "filename": "src/string_search.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstring_search.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fstring_search.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstring_search.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -7,7 +7,8 @@\n \n #if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n-#include \"node_internals.h\"\n+#include \"util.h\"\n+\n #include <string.h>\n #include <algorithm>\n "
        },
        {
            "sha": "f80e9e6be4d20cc57c5e77a4131d5a59003541bb",
            "filename": "src/timers.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Ftimers.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Ftimers.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftimers.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -1,4 +1,6 @@\n-#include \"node_internals.h\"\n+#include \"env-inl.h\"\n+#include \"util.h\"\n+#include \"v8.h\"\n \n #include <stdint.h>\n "
        },
        {
            "sha": "d9f916f3d16a235fed09f915604dfedab1878f07",
            "filename": "src/tls_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Ftls_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Ftls_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftls_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -26,7 +26,6 @@\n #include \"node_crypto_bio.h\"  // NodeBIO\n // ClientHelloParser\n #include \"node_crypto_clienthello-inl.h\"\n-#include \"node_internals.h\"\n #include \"stream_base-inl.h\"\n #include \"util-inl.h\"\n "
        },
        {
            "sha": "7507978408f6ab840d997802884f1c6f0130c67a",
            "filename": "src/tracing/traced_value.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Ftracing%2Ftraced_value.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Ftracing%2Ftraced_value.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftracing%2Ftraced_value.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -5,7 +5,8 @@\n #ifndef SRC_TRACING_TRACED_VALUE_H_\n #define SRC_TRACING_TRACED_VALUE_H_\n \n-#include \"node_internals.h\"\n+#include \"node.h\"\n+#include \"util.h\"\n #include \"v8.h\"\n \n #include <stddef.h>"
        },
        {
            "sha": "d838ef6e725b96b4f313f251d4863b69e92cb0e6",
            "filename": "src/udp_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fudp_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fudp_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fudp_wrap.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -22,7 +22,6 @@\n #include \"udp_wrap.h\"\n #include \"env-inl.h\"\n #include \"node_buffer.h\"\n-#include \"node_internals.h\"\n #include \"handle_wrap.h\"\n #include \"req_wrap-inl.h\"\n #include \"util-inl.h\""
        },
        {
            "sha": "ea705b800bdf17849a2f97d2fed5fb0c9bb6cea9",
            "filename": "src/util.h",
            "status": "modified",
            "additions": 88,
            "deletions": 0,
            "changes": 88,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Futil.h",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Futil.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Futil.h?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -570,6 +570,94 @@ inline v8::MaybeLocal<v8::Value> ToV8Value(v8::Local<v8::Context> context,\n #define READONLY_STRING_PROPERTY(obj, name, str)                               \\\n   READONLY_PROPERTY(obj, name, ToV8Value(context, str).ToLocalChecked())\n \n+// Variation on NODE_DEFINE_CONSTANT that sets a String value.\n+#define NODE_DEFINE_STRING_CONSTANT(target, name, constant)                    \\\n+  do {                                                                         \\\n+    v8::Isolate* isolate = target->GetIsolate();                               \\\n+    v8::Local<v8::String> constant_name =                                      \\\n+        v8::String::NewFromUtf8(isolate, name, v8::NewStringType::kNormal)     \\\n+            .ToLocalChecked();                                                 \\\n+    v8::Local<v8::String> constant_value =                                     \\\n+        v8::String::NewFromUtf8(isolate, constant, v8::NewStringType::kNormal) \\\n+            .ToLocalChecked();                                                 \\\n+    v8::PropertyAttribute constant_attributes =                                \\\n+        static_cast<v8::PropertyAttribute>(v8::ReadOnly | v8::DontDelete);     \\\n+    target                                                                     \\\n+        ->DefineOwnProperty(isolate->GetCurrentContext(),                      \\\n+                            constant_name,                                     \\\n+                            constant_value,                                    \\\n+                            constant_attributes)                               \\\n+        .FromJust();                                                           \\\n+  } while (0)\n+\n+enum Endianness {\n+  kLittleEndian,  // _Not_ LITTLE_ENDIAN, clashes with endian.h.\n+  kBigEndian\n+};\n+\n+inline enum Endianness GetEndianness() {\n+  // Constant-folded by the compiler.\n+  const union {\n+    uint8_t u8[2];\n+    uint16_t u16;\n+  } u = {{1, 0}};\n+  return u.u16 == 1 ? kLittleEndian : kBigEndian;\n+}\n+\n+inline bool IsLittleEndian() {\n+  return GetEndianness() == kLittleEndian;\n+}\n+\n+inline bool IsBigEndian() {\n+  return GetEndianness() == kBigEndian;\n+}\n+\n+template <typename T, size_t N>\n+constexpr size_t arraysize(const T (&)[N]) {\n+  return N;\n+}\n+\n+#ifndef ROUND_UP\n+#define ROUND_UP(a, b) ((a) % (b) ? ((a) + (b)) - ((a) % (b)) : (a))\n+#endif\n+\n+#ifdef __GNUC__\n+#define MUST_USE_RESULT __attribute__((warn_unused_result))\n+#else\n+#define MUST_USE_RESULT\n+#endif\n+\n+class SlicedArguments {\n+ public:\n+  inline explicit SlicedArguments(\n+      const v8::FunctionCallbackInfo<v8::Value>& args, size_t start = 0);\n+  inline size_t size() const { return size_; }\n+  inline v8::Local<v8::Value>* data() { return data_; }\n+\n+ private:\n+  size_t size_;\n+  v8::Local<v8::Value>* data_;\n+  v8::Local<v8::Value> fixed_[64];\n+  std::vector<v8::Local<v8::Value>> dynamic_;\n+};\n+\n+SlicedArguments::SlicedArguments(\n+    const v8::FunctionCallbackInfo<v8::Value>& args, size_t start)\n+    : size_(0), data_(fixed_) {\n+  const size_t length = static_cast<size_t>(args.Length());\n+  if (start >= length) return;\n+  const size_t size = length - start;\n+\n+  if (size > arraysize(fixed_)) {\n+    dynamic_.resize(size);\n+    data_ = dynamic_.data();\n+  }\n+\n+  for (size_t i = 0; i < size; ++i) data_[i] = args[i + start];\n+\n+  size_ = size;\n+}\n+\n }  // namespace node\n \n #endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS"
        },
        {
            "sha": "59469fc3075a52ff19307365fa65a8a75062fc1f",
            "filename": "src/uv.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fuv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1838d00eba30708dd8468a5707489d1ff6bb8a9d/src%2Fuv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fuv.cc?ref=1838d00eba30708dd8468a5707489d1ff6bb8a9d",
            "patch": "@@ -22,8 +22,8 @@\n #include \"uv.h\"\n #include \"env-inl.h\"\n #include \"node.h\"\n-#include \"node_internals.h\"\n #include \"node_process.h\"\n+#include \"util.h\"\n \n namespace node {\n "
        }
    ],
    "stats": {
        "total": 311,
        "additions": 153,
        "deletions": 158
    }
}