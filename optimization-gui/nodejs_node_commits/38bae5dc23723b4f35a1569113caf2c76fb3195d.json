{
    "author": "daynin",
    "message": "url: remove redundant function\n\nPR-URL: https://github.com/nodejs/node/pull/19076\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "38bae5dc23723b4f35a1569113caf2c76fb3195d",
    "files": [
        {
            "sha": "0579cac16ce0ba11e1362f873b161424837d956c",
            "filename": "lib/internal/url.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/38bae5dc23723b4f35a1569113caf2c76fb3195d/lib%2Finternal%2Furl.js",
            "raw_url": "https://github.com/nodejs/node/raw/38bae5dc23723b4f35a1569113caf2c76fb3195d/lib%2Finternal%2Furl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Furl.js?ref=38bae5dc23723b4f35a1569113caf2c76fb3195d",
            "patch": "@@ -887,8 +887,7 @@ function serializeParams(array) {\n \n   const firstEncodedParam = encodeStr(array[0], noEscape, paramHexTable);\n   const firstEncodedValue = encodeStr(array[1], noEscape, paramHexTable);\n-  let output =\n-    `${firstEncodedParam}=${firstEncodedValue}`;\n+  let output = `${firstEncodedParam}=${firstEncodedValue}`;\n \n   for (var i = 2; i < len; i += 2) {\n     const encodedParam = encodeStr(array[i], noEscape, paramHexTable);"
        },
        {
            "sha": "78c0ea3d17b98f9771be964cc71d61d327adc71b",
            "filename": "lib/url.js",
            "status": "modified",
            "additions": 20,
            "deletions": 74,
            "changes": 94,
            "blob_url": "https://github.com/nodejs/node/blob/38bae5dc23723b4f35a1569113caf2c76fb3195d/lib%2Furl.js",
            "raw_url": "https://github.com/nodejs/node/raw/38bae5dc23723b4f35a1569113caf2c76fb3195d/lib%2Furl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Furl.js?ref=38bae5dc23723b4f35a1569113caf2c76fb3195d",
            "patch": "@@ -38,7 +38,8 @@ const {\n   URLSearchParams,\n   domainToASCII,\n   domainToUnicode,\n-  formatSymbol\n+  formatSymbol,\n+  encodeStr,\n } = require('internal/url');\n \n // Original url.parse() API\n@@ -543,10 +544,27 @@ function urlFormat(urlObject, options) {\n   return urlObject.format();\n }\n \n+// These characters do not need escaping:\n+// ! - . _ ~\n+// ' ( ) * :\n+// digits\n+// alpha (uppercase)\n+// alpha (lowercase)\n+const noEscapeAuth = [\n+  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x00 - 0x0F\n+  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x10 - 0x1F\n+  0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, // 0x20 - 0x2F\n+  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, // 0x30 - 0x3F\n+  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 0x40 - 0x4F\n+  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, // 0x50 - 0x5F\n+  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 0x60 - 0x6F\n+  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0  // 0x70 - 0x7F\n+];\n+\n Url.prototype.format = function format() {\n   var auth = this.auth || '';\n   if (auth) {\n-    auth = encodeAuth(auth);\n+    auth = encodeStr(auth, noEscapeAuth, hexTable);\n     auth += '@';\n   }\n \n@@ -931,78 +949,6 @@ Url.prototype.parseHost = function parseHost() {\n   if (host) this.hostname = host;\n };\n \n-// These characters do not need escaping:\n-// ! - . _ ~\n-// ' ( ) * :\n-// digits\n-// alpha (uppercase)\n-// alpha (lowercase)\n-const noEscapeAuth = [\n-  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x00 - 0x0F\n-  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x10 - 0x1F\n-  0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, // 0x20 - 0x2F\n-  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, // 0x30 - 0x3F\n-  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 0x40 - 0x4F\n-  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, // 0x50 - 0x5F\n-  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 0x60 - 0x6F\n-  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0  // 0x70 - 0x7F\n-];\n-\n-function encodeAuth(str) {\n-  // faster encodeURIComponent alternative for encoding auth uri components\n-  var out = '';\n-  var lastPos = 0;\n-  for (var i = 0; i < str.length; ++i) {\n-    var c = str.charCodeAt(i);\n-\n-    // ASCII\n-    if (c < 0x80) {\n-      if (noEscapeAuth[c] === 1)\n-        continue;\n-      if (lastPos < i)\n-        out += str.slice(lastPos, i);\n-      lastPos = i + 1;\n-      out += hexTable[c];\n-      continue;\n-    }\n-\n-    if (lastPos < i)\n-      out += str.slice(lastPos, i);\n-\n-    // Multi-byte characters ...\n-    if (c < 0x800) {\n-      lastPos = i + 1;\n-      out += hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)];\n-      continue;\n-    }\n-    if (c < 0xD800 || c >= 0xE000) {\n-      lastPos = i + 1;\n-      out += hexTable[0xE0 | (c >> 12)] +\n-             hexTable[0x80 | ((c >> 6) & 0x3F)] +\n-             hexTable[0x80 | (c & 0x3F)];\n-      continue;\n-    }\n-    // Surrogate pair\n-    ++i;\n-    var c2;\n-    if (i < str.length)\n-      c2 = str.charCodeAt(i) & 0x3FF;\n-    else\n-      c2 = 0;\n-    lastPos = i + 1;\n-    c = 0x10000 + (((c & 0x3FF) << 10) | c2);\n-    out += hexTable[0xF0 | (c >> 18)] +\n-           hexTable[0x80 | ((c >> 12) & 0x3F)] +\n-           hexTable[0x80 | ((c >> 6) & 0x3F)] +\n-           hexTable[0x80 | (c & 0x3F)];\n-  }\n-  if (lastPos === 0)\n-    return str;\n-  if (lastPos < str.length)\n-    return out + str.slice(lastPos);\n-  return out;\n-}\n-\n module.exports = {\n   // Original API\n   Url,"
        }
    ],
    "stats": {
        "total": 97,
        "additions": 21,
        "deletions": 76
    }
}