{
    "author": "sam-github",
    "message": "src: do not alias new and old signal masks\n\nIn recent gcc, -Wrestrict warns when an argument passed to a\nrestrict-qualified parameter aliases with another argument.\n\nPR-URL: https://github.com/nodejs/node/pull/24810\nReviewed-By: Richard Lau <riclau@uk.ibm.com>",
    "sha": "c49d87e1131f31edb4ea9b9a1ab08eadae4dfc61",
    "files": [
        {
            "sha": "21319abca7d1f529ee2af3ad9097a685a3f90238",
            "filename": "src/inspector_agent.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/c49d87e1131f31edb4ea9b9a1ab08eadae4dfc61/src%2Finspector_agent.cc",
            "raw_url": "https://github.com/nodejs/node/raw/c49d87e1131f31edb4ea9b9a1ab08eadae4dfc61/src%2Finspector_agent.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_agent.cc?ref=c49d87e1131f31edb4ea9b9a1ab08eadae4dfc61",
            "patch": "@@ -110,7 +110,9 @@ static int StartDebugSignalHandler() {\n   sigset_t sigmask;\n   // Mask all signals.\n   sigfillset(&sigmask);\n-  CHECK_EQ(0, pthread_sigmask(SIG_SETMASK, &sigmask, &sigmask));\n+  sigset_t savemask;\n+  CHECK_EQ(0, pthread_sigmask(SIG_SETMASK, &sigmask, &savemask));\n+  sigmask = savemask;\n   pthread_t thread;\n   const int err = pthread_create(&thread, &attr,\n                                  StartIoThreadMain, nullptr);"
        },
        {
            "sha": "9ef7bafeded44f811da10757989e73c0493c6b6f",
            "filename": "src/node_watchdog.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/c49d87e1131f31edb4ea9b9a1ab08eadae4dfc61/src%2Fnode_watchdog.cc",
            "raw_url": "https://github.com/nodejs/node/raw/c49d87e1131f31edb4ea9b9a1ab08eadae4dfc61/src%2Fnode_watchdog.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_watchdog.cc?ref=c49d87e1131f31edb4ea9b9a1ab08eadae4dfc61",
            "patch": "@@ -187,7 +187,9 @@ int SigintWatchdogHelper::Start() {\n \n   sigset_t sigmask;\n   sigfillset(&sigmask);\n-  CHECK_EQ(0, pthread_sigmask(SIG_SETMASK, &sigmask, &sigmask));\n+  sigset_t savemask;\n+  CHECK_EQ(0, pthread_sigmask(SIG_SETMASK, &sigmask, &savemask));\n+  sigmask = savemask;\n   int ret = pthread_create(&thread_, nullptr, RunSigintWatchdog, nullptr);\n   CHECK_EQ(0, pthread_sigmask(SIG_SETMASK, &sigmask, nullptr));\n   if (ret != 0) {"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    }
}