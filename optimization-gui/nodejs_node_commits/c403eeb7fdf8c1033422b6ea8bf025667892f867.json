{
    "author": "bzoz",
    "message": "build: build addons in parallel on Windows\n\nPort https://github.com/nodejs/node/pull/21155 to vcbuild.bat\n\nPR-URL: https://github.com/nodejs/node/pull/21403\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "c403eeb7fdf8c1033422b6ea8bf025667892f867",
    "files": [
        {
            "sha": "595f8dd6c99941f53d9019995d1f69aa035ef854",
            "filename": "vcbuild.bat",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/c403eeb7fdf8c1033422b6ea8bf025667892f867/vcbuild.bat",
            "raw_url": "https://github.com/nodejs/node/raw/c403eeb7fdf8c1033422b6ea8bf025667892f867/vcbuild.bat",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/vcbuild.bat?ref=c403eeb7fdf8c1033422b6ea8bf025667892f867",
            "patch": "@@ -448,13 +448,11 @@ for /d %%F in (test\\addons\\??_*) do (\n \"%node_exe%\" tools\\doc\\addon-verify.js\n if %errorlevel% neq 0 exit /b %errorlevel%\n :: building addons\n-setlocal EnableDelayedExpansion\n-for /d %%F in (test\\addons\\*) do (\n-  %node_gyp_exe% rebuild ^\n-    --directory=\"%%F\" ^\n-    --nodedir=\"%cd%\"\n-  if !errorlevel! neq 0 exit /b !errorlevel!\n-)\n+setlocal\n+set npm_config_nodedir=%~dp0\n+\"%node_exe%\" \"%~dp0tools\\build-addons.js\" \"%~dp0deps\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js\" \"%~dp0test\\addons\"\n+if errorlevel 1 exit /b 1\n+endlocal\n \n :build-addons-napi\n if not defined build_addons_napi goto run-tests"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 5,
        "deletions": 7
    }
}