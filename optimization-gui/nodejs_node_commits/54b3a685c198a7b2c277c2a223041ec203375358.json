{
    "author": "joyeecheung",
    "message": "benchmark: cut down http benchmark run time\n\nPR-URL: https://github.com/nodejs/node/pull/18379\nReviewed-By: Jon Moss <me@jonathanmoss.me>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "54b3a685c198a7b2c277c2a223041ec203375358",
    "files": [
        {
            "sha": "76e02504b27ec173f8d070f9d9469cc12ac5ab1e",
            "filename": "benchmark/_http-benchmarkers.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/54b3a685c198a7b2c277c2a223041ec203375358/benchmark%2F_http-benchmarkers.js",
            "raw_url": "https://github.com/nodejs/node/raw/54b3a685c198a7b2c277c2a223041ec203375358/benchmark%2F_http-benchmarkers.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2F_http-benchmarkers.js?ref=54b3a685c198a7b2c277c2a223041ec203375358",
            "patch": "@@ -185,7 +185,7 @@ exports.run = function(options, callback) {\n     port: exports.PORT,\n     path: '/',\n     connections: 100,\n-    duration: 10,\n+    duration: 5,\n     benchmarker: exports.default_http_benchmarker\n   }, options);\n   if (!options.benchmarker) {"
        },
        {
            "sha": "f0987f2cc77150c76338d21d1f644352b98f2e99",
            "filename": "benchmark/http/set-header.js",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/54b3a685c198a7b2c277c2a223041ec203375358/benchmark%2Fhttp%2Fset-header.js",
            "raw_url": "https://github.com/nodejs/node/raw/54b3a685c198a7b2c277c2a223041ec203375358/benchmark%2Fhttp%2Fset-header.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fhttp%2Fset-header.js?ref=54b3a685c198a7b2c277c2a223041ec203375358",
            "patch": "@@ -0,0 +1,32 @@\n+'use strict';\n+const common = require('../common.js');\n+const PORT = common.PORT;\n+\n+const bench = common.createBenchmark(main, {\n+  res: ['normal', 'setHeader', 'setHeaderWH']\n+});\n+\n+const type = 'bytes';\n+const len = 4;\n+const chunks = 0;\n+const chunkedEnc = 0;\n+const c = 50;\n+\n+// normal: writeHead(status, {...})\n+// setHeader: statusCode = status, setHeader(...) x2\n+// setHeaderWH: setHeader(...), writeHead(status, ...)\n+function main({ res }) {\n+  process.env.PORT = PORT;\n+  var server = require('../fixtures/simple-http-server.js')\n+  .listen(PORT)\n+  .on('listening', function() {\n+    const path = `/${type}/${len}/${chunks}/normal/${chunkedEnc}`;\n+\n+    bench.http({\n+      path: path,\n+      connections: c\n+    }, function() {\n+      server.close();\n+    });\n+  });\n+}"
        },
        {
            "sha": "6d1851c45e17b223bc2dde0f141f041db81236f5",
            "filename": "benchmark/http/simple.js",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/54b3a685c198a7b2c277c2a223041ec203375358/benchmark%2Fhttp%2Fsimple.js",
            "raw_url": "https://github.com/nodejs/node/raw/54b3a685c198a7b2c277c2a223041ec203375358/benchmark%2Fhttp%2Fsimple.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fhttp%2Fsimple.js?ref=54b3a685c198a7b2c277c2a223041ec203375358",
            "patch": "@@ -7,15 +7,14 @@ const bench = common.createBenchmark(main, {\n   len: [4, 1024, 102400],\n   chunks: [1, 4],\n   c: [50, 500],\n-  chunkedEnc: [1, 0],\n-  res: ['normal', 'setHeader', 'setHeaderWH']\n+  chunkedEnc: [1, 0]\n });\n \n function main({ type, len, chunks, c, chunkedEnc, res }) {\n   var server = require('../fixtures/simple-http-server.js')\n   .listen(common.PORT)\n   .on('listening', function() {\n-    const path = `/${type}/${len}/${chunks}/${res}/${chunkedEnc}`;\n+    const path = `/${type}/${len}/${chunks}/normal/${chunkedEnc}`;\n \n     bench.http({\n       path: path,"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 35,
        "deletions": 4
    }
}