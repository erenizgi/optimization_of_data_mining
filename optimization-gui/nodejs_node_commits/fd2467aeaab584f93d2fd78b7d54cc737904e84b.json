{
    "author": "BridgeAR",
    "message": "Revert \"repl: handle buffered string logic on finish\"\n\nThis reverts commit eb42c1eb4f2502433a22c49ede9e657fb6cd86e0.\n\nPR-URL: https://github.com/nodejs/node/pull/24804\nRefs: https://github.com/nodejs/node/issues/24231\nReviewed-By: Anto Aravinth <anto.aravinth.cse@gmail.com>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>",
    "sha": "fd2467aeaab584f93d2fd78b7d54cc737904e84b",
    "files": [
        {
            "sha": "8d03cd6e332d91a8148a0c95ee4327bde0cd602e",
            "filename": "lib/readline.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/fd2467aeaab584f93d2fd78b7d54cc737904e84b/lib%2Freadline.js",
            "raw_url": "https://github.com/nodejs/node/raw/fd2467aeaab584f93d2fd78b7d54cc737904e84b/lib%2Freadline.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Freadline.js?ref=fd2467aeaab584f93d2fd78b7d54cc737904e84b",
            "patch": "@@ -357,9 +357,9 @@ Interface.prototype.undoHistory = function() {\n \n // If it's a multiline code, then add history\n // accordingly.\n-Interface.prototype.multilineHistory = function(clearBuffer) {\n-  // if not clear buffer, add multiline history\n-  if (!clearBuffer && this.terminal) {\n+Interface.prototype.multilineHistory = function() {\n+  // check if we got a multiline code\n+  if (this.multiline !== '' && this.terminal) {\n     const dupIndex = this.history.indexOf(this.multiline);\n     if (dupIndex !== -1) this.history.splice(dupIndex, 1);\n     // Remove the last entered line as multiline"
        },
        {
            "sha": "bb5ea3d9500a899b3989a6775b285dd838a03abc",
            "filename": "lib/repl.js",
            "status": "modified",
            "additions": 1,
            "deletions": 7,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/fd2467aeaab584f93d2fd78b7d54cc737904e84b/lib%2Frepl.js",
            "raw_url": "https://github.com/nodejs/node/raw/fd2467aeaab584f93d2fd78b7d54cc737904e84b/lib%2Frepl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Frepl.js?ref=fd2467aeaab584f93d2fd78b7d54cc737904e84b",
            "patch": "@@ -666,13 +666,6 @@ function REPLServer(prompt,\n         }\n       }\n \n-      // handle multiline history\n-      if (self[kBufferedCommandSymbol].length)\n-        Interface.prototype.multilineHistory.call(self, false);\n-      else {\n-        Interface.prototype.multilineHistory.call(self, true);\n-      }\n-\n       // Clear buffer if no SyntaxErrors\n       self.clearBufferedCommand();\n       sawCtrlD = false;\n@@ -781,6 +774,7 @@ exports.start = function(prompt,\n \n REPLServer.prototype.clearBufferedCommand = function clearBufferedCommand() {\n   this[kBufferedCommandSymbol] = '';\n+  REPLServer.super_.prototype.multilineHistory.call(this);\n };\n \n REPLServer.prototype.close = function close() {"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 4,
        "deletions": 10
    }
}