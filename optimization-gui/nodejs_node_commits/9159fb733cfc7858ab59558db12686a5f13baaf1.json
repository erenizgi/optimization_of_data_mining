{
    "author": "gireeshpunathil",
    "message": "doc: hide undocumented object artifacts in async_hooks\n\nThe examples show `process.stdout.fd` as a means to use synchronous\nwrites in async_hooks context. However this is an undocumented field,\nso showcase a file write example instead.\n\nFixes: https://github.com/nodejs/node/issues/22873\n\nPR-URL: https://github.com/nodejs/node/pull/24741\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>",
    "sha": "9159fb733cfc7858ab59558db12686a5f13baaf1",
    "files": [
        {
            "sha": "6894851ba1e137f0f01ee52fad764962d296e016",
            "filename": "doc/api/async_hooks.md",
            "status": "modified",
            "additions": 10,
            "deletions": 7,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/9159fb733cfc7858ab59558db12686a5f13baaf1/doc%2Fapi%2Fasync_hooks.md",
            "raw_url": "https://github.com/nodejs/node/raw/9159fb733cfc7858ab59558db12686a5f13baaf1/doc%2Fapi%2Fasync_hooks.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fasync_hooks.md?ref=9159fb733cfc7858ab59558db12686a5f13baaf1",
            "patch": "@@ -150,17 +150,17 @@ Because printing to the console is an asynchronous operation, `console.log()`\n will cause the AsyncHooks callbacks to be called. Using `console.log()` or\n similar asynchronous operations inside an AsyncHooks callback function will thus\n cause an infinite recursion. An easy solution to this when debugging is to use a\n-synchronous logging operation such as `fs.writeSync(process.stdout.fd, msg)`.\n-This will print to stdout and will not invoke AsyncHooks recursively because it\n-is synchronous.\n+synchronous logging operation such as `fs.writeFileSync(file, msg, flag)`.\n+This will print to the file and will not invoke AsyncHooks recursively because\n+it is synchronous.\n \n ```js\n const fs = require('fs');\n const util = require('util');\n \n function debug(...args) {\n   // use a function like this one when debugging inside an AsyncHooks callback\n-  fs.writeSync(process.stdout.fd, `${util.format(...args)}\\n`);\n+  fs.writeFileSync('log.out', `${util.format(...args)}\\n`, { flag: 'a' });\n }\n ```\n \n@@ -329,17 +329,20 @@ async_hooks.createHook({\n   },\n   before(asyncId) {\n     const indentStr = ' '.repeat(indent);\n-    fs.writeSync(process.stdout.fd, `${indentStr}before:  ${asyncId}\\n`);\n+    fs.writeFileSync('log.out',\n+                     `${indentStr}before:  ${asyncId}\\n`, { flag: 'a' });\n     indent += 2;\n   },\n   after(asyncId) {\n     indent -= 2;\n     const indentStr = ' '.repeat(indent);\n-    fs.writeSync(process.stdout.fd, `${indentStr}after:   ${asyncId}\\n`);\n+    fs.writeFileSync('log.out',\n+                     `${indentStr}after:  ${asyncId}\\n`, { flag: 'a' });\n   },\n   destroy(asyncId) {\n     const indentStr = ' '.repeat(indent);\n-    fs.writeSync(process.stdout.fd, `${indentStr}destroy: ${asyncId}\\n`);\n+    fs.writeFileSync('log.out',\n+                     `${indentStr}destroy:  ${asyncId}\\n`, { flag: 'a' });\n   },\n }).enable();\n "
        }
    ],
    "stats": {
        "total": 17,
        "additions": 10,
        "deletions": 7
    }
}