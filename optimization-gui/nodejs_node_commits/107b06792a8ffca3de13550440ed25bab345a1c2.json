{
    "author": "ryzokuken",
    "message": "test: rename regression tests more expressively\n\n- Rename test-fs-truncate-GH-6233 to test-fs-truncate-clear-file-zero\n- Rename test-process-exit-GH-12322 to test-process-exit-handler\n\nPR-URL: https://github.com/nodejs/node/pull/19668\nRefs: https://github.com/nodejs/node/issues/19105\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "107b06792a8ffca3de13550440ed25bab345a1c2",
    "files": [
        {
            "sha": "4f3dce90995d06c5fee634336ac00384194a6060",
            "filename": "test/parallel/test-fs-truncate-clear-file-zero.js",
            "status": "renamed",
            "additions": 14,
            "deletions": 6,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/107b06792a8ffca3de13550440ed25bab345a1c2/test%2Fparallel%2Ftest-fs-truncate-clear-file-zero.js",
            "raw_url": "https://github.com/nodejs/node/raw/107b06792a8ffca3de13550440ed25bab345a1c2/test%2Fparallel%2Ftest-fs-truncate-clear-file-zero.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-truncate-clear-file-zero.js?ref=107b06792a8ffca3de13550440ed25bab345a1c2",
            "patch": "@@ -21,11 +21,15 @@\n \n 'use strict';\n const common = require('../common');\n+const tmpdir = require('../common/tmpdir');\n+\n+// This test ensures that `fs.truncate` opens the file with `r+` and not `w`,\n+// which had earlier resulted in the target file's content getting zeroed out.\n+// https://github.com/nodejs/node-v0.x-archive/issues/6233\n+\n const assert = require('assert');\n const fs = require('fs');\n \n-const tmpdir = require('../common/tmpdir');\n-\n const filename = `${tmpdir.path}/truncate-file.txt`;\n \n tmpdir.refresh();\n@@ -42,8 +46,12 @@ tmpdir.refresh();\n {\n   fs.writeFileSync(filename, '0123456789');\n   assert.strictEqual(fs.readFileSync(filename).toString(), '0123456789');\n-  fs.truncate(filename, 5, common.mustCall(function(err) {\n-    assert.ifError(err);\n-    assert.strictEqual(fs.readFileSync(filename).toString(), '01234');\n-  }));\n+  fs.truncate(\n+    filename,\n+    5,\n+    common.mustCall(function(err) {\n+      assert.ifError(err);\n+      assert.strictEqual(fs.readFileSync(filename).toString(), '01234');\n+    })\n+  );\n }",
            "previous_filename": "test/parallel/test-fs-truncate-GH-6233.js"
        },
        {
            "sha": "890dfd4df7bff4b72bb90bfa3e4d510b19fec49c",
            "filename": "test/parallel/test-process-exit-GH-12322.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/07ba9141e475ec63f6ef56b67ec5f98077cd3446/test%2Fparallel%2Ftest-process-exit-GH-12322.js",
            "raw_url": "https://github.com/nodejs/node/raw/07ba9141e475ec63f6ef56b67ec5f98077cd3446/test%2Fparallel%2Ftest-process-exit-GH-12322.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-exit-GH-12322.js?ref=07ba9141e475ec63f6ef56b67ec5f98077cd3446",
            "patch": "@@ -1,7 +0,0 @@\n-'use strict';\n-require('../common');\n-\n-process.on('exit', () => {\n-  setTimeout(process.abort, 0);  // Should not run.\n-  for (const start = Date.now(); Date.now() - start < 10; /* Empty. */);\n-});"
        },
        {
            "sha": "22d84f34349b735c46c241780fce9903c7ce9c7a",
            "filename": "test/parallel/test-process-exit-handler.js",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/107b06792a8ffca3de13550440ed25bab345a1c2/test%2Fparallel%2Ftest-process-exit-handler.js",
            "raw_url": "https://github.com/nodejs/node/raw/107b06792a8ffca3de13550440ed25bab345a1c2/test%2Fparallel%2Ftest-process-exit-handler.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-exit-handler.js?ref=107b06792a8ffca3de13550440ed25bab345a1c2",
            "patch": "@@ -0,0 +1,11 @@\n+'use strict';\n+require('../common');\n+\n+// This test ensures that no asynchronous operations are performed in the 'exit'\n+// handler.\n+// https://github.com/nodejs/node/issues/12322\n+\n+process.on('exit', () => {\n+  setTimeout(process.abort, 0); // Should not run.\n+  for (const start = Date.now(); Date.now() - start < 10;);\n+});"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 25,
        "deletions": 13
    }
}