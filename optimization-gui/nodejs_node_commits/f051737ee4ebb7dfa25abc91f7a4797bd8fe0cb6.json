{
    "author": "nanomosfet",
    "message": "test: test and docs for detached fork process\n\nThis tests child process fork component in detached mode\nby spawning a parent process that creates a child process.\nWe kill the parent process and check if the child is still\nrunning.\n\nFixes: https://github.com/nodejs/node/issues/17592\n\nPR-URL: https://github.com/nodejs/node/pull/24524\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6",
    "files": [
        {
            "sha": "34f0e612f828db424b2c5d638e3de2680d1c28b2",
            "filename": "doc/api/child_process.md",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6/doc%2Fapi%2Fchild_process.md",
            "raw_url": "https://github.com/nodejs/node/raw/f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6/doc%2Fapi%2Fchild_process.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fchild_process.md?ref=f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6",
            "patch": "@@ -325,6 +325,9 @@ changes:\n * `args` {string[]} List of string arguments.\n * `options` {Object}\n   * `cwd` {string} Current working directory of the child process.\n+  * `detached` {boolean} Prepare child to run independently of its parent\n+    process. Specific behavior depends on the platform, see\n+    [`options.detached`][]).\n   * `env` {Object} Environment key-value pairs.\n   * `execPath` {string} Executable used to create the child process.\n   * `execArgv` {string[]} List of string arguments passed to the executable."
        },
        {
            "sha": "49c0a1d1838135e4c2e8474edf40b45eceb3fe2b",
            "filename": "test/fixtures/parent-process-nonpersistent-fork.js",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6/test%2Ffixtures%2Fparent-process-nonpersistent-fork.js",
            "raw_url": "https://github.com/nodejs/node/raw/f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6/test%2Ffixtures%2Fparent-process-nonpersistent-fork.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fparent-process-nonpersistent-fork.js?ref=f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6",
            "patch": "@@ -0,0 +1,12 @@\n+const fork = require('child_process').fork;\n+const path = require('path');\n+\n+const child = fork(\n+\tpath.join(__dirname, 'child-process-persistent.js'),\n+\t[],\n+\t{ detached: true, stdio: 'ignore' }\n+);\n+\n+console.log(child.pid);\n+\n+child.unref();"
        },
        {
            "sha": "87c15173284dbe1b244c89963277f81aa2662a0a",
            "filename": "test/parallel/test-child-process-fork-detached.js",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6/test%2Fparallel%2Ftest-child-process-fork-detached.js",
            "raw_url": "https://github.com/nodejs/node/raw/f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6/test%2Fparallel%2Ftest-child-process-fork-detached.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-child-process-fork-detached.js?ref=f051737ee4ebb7dfa25abc91f7a4797bd8fe0cb6",
            "patch": "@@ -0,0 +1,23 @@\n+'use strict';\n+require('../common');\n+const assert = require('assert');\n+const fork = require('child_process').fork;\n+const fixtures = require('../common/fixtures');\n+\n+const nonPersistentNode = fork(\n+  fixtures.path('parent-process-nonpersistent-fork.js'),\n+  [],\n+  { silent: true });\n+\n+let childId = -1;\n+\n+nonPersistentNode.stdout.on('data', (data) => {\n+  childId = parseInt(data, 10);\n+  nonPersistentNode.kill();\n+});\n+\n+process.on('exit', () => {\n+  assert.notStrictEqual(childId, -1);\n+  // Killing the child process should not throw an error\n+  process.kill(childId);\n+});"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 38,
        "deletions": 0
    }
}