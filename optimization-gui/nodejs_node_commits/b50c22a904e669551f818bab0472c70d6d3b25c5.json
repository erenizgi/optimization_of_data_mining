{
    "author": "sam-github",
    "message": "tls: do not confuse TLSSocket and Socket\n\nDon't use \"socket\" to describe two different objects in the same\nfunction.\n\nPR-URL: https://github.com/nodejs/node/pull/25153\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>",
    "sha": "b50c22a904e669551f818bab0472c70d6d3b25c5",
    "files": [
        {
            "sha": "1fc339cc2e85af465a5e2a81b2e6f9a04cc9c73b",
            "filename": "lib/_tls_wrap.js",
            "status": "modified",
            "additions": 13,
            "deletions": 11,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/b50c22a904e669551f818bab0472c70d6d3b25c5/lib%2F_tls_wrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/b50c22a904e669551f818bab0472c70d6d3b25c5/lib%2F_tls_wrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_tls_wrap.js?ref=b50c22a904e669551f818bab0472c70d6d3b25c5",
            "patch": "@@ -1227,7 +1227,7 @@ exports.connect = function connect(...args) {\n \n   const context = options.secureContext || tls.createSecureContext(options);\n \n-  var socket = new TLSSocket(options.socket, {\n+  var tlssock = new TLSSocket(options.socket, {\n     pipe: !!options.path,\n     secureContext: context,\n     isServer: false,\n@@ -1238,12 +1238,14 @@ exports.connect = function connect(...args) {\n     requestOCSP: options.requestOCSP\n   });\n \n-  socket[kConnectOptions] = options;\n+  tlssock[kConnectOptions] = options;\n \n   if (cb)\n-    socket.once('secureConnect', cb);\n+    tlssock.once('secureConnect', cb);\n \n   if (!options.socket) {\n+    // If user provided the socket, its their responsibility to manage its\n+    // connectivity. If we created one internally, we connect it.\n     const connectOpt = {\n       path: options.path,\n       port: options.port,\n@@ -1252,13 +1254,13 @@ exports.connect = function connect(...args) {\n       localAddress: options.localAddress,\n       lookup: options.lookup\n     };\n-    socket.connect(connectOpt, socket._start);\n+    tlssock.connect(connectOpt, tlssock._start);\n   }\n \n-  socket._releaseControl();\n+  tlssock._releaseControl();\n \n   if (options.session)\n-    socket.setSession(options.session);\n+    tlssock.setSession(options.session);\n \n   if (options.servername) {\n     if (!ipServernameWarned && net.isIP(options.servername)) {\n@@ -1270,14 +1272,14 @@ exports.connect = function connect(...args) {\n       );\n       ipServernameWarned = true;\n     }\n-    socket.setServername(options.servername);\n+    tlssock.setServername(options.servername);\n   }\n \n   if (options.socket)\n-    socket._start();\n+    tlssock._start();\n \n-  socket.on('secure', onConnectSecure);\n-  socket.once('end', onConnectEnd);\n+  tlssock.on('secure', onConnectSecure);\n+  tlssock.once('end', onConnectEnd);\n \n-  return socket;\n+  return tlssock;\n };"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 13,
        "deletions": 11
    }
}