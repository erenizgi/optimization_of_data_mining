{
    "author": "cjihrig",
    "message": "os: use uv_os_gethostname() in hostname()\n\nThis commit changes the C++ implementation of os.hostname()\nto use uv_os_gethostname().\n\nPR-URL: https://github.com/nodejs/node/pull/25111\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "3438f4b2cab572b4e21ed68013f2b25adf911e8b",
    "files": [
        {
            "sha": "6ecfb7fe9f8f44999efde507aadf31dbfd78f725",
            "filename": "src/node_os.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 8,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/3438f4b2cab572b4e21ed68013f2b25adf911e8b/src%2Fnode_os.cc",
            "raw_url": "https://github.com/nodejs/node/raw/3438f4b2cab572b4e21ed68013f2b25adf911e8b/src%2Fnode_os.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_os.cc?ref=3438f4b2cab572b4e21ed68013f2b25adf911e8b",
            "patch": "@@ -68,18 +68,15 @@ using v8::Value;\n static void GetHostname(const FunctionCallbackInfo<Value>& args) {\n   Environment* env = Environment::GetCurrent(args);\n   char buf[MAXHOSTNAMELEN + 1];\n+  size_t size = sizeof(buf);\n+  int r = uv_os_gethostname(buf, &size);\n \n-  if (gethostname(buf, sizeof(buf))) {\n-#ifdef __POSIX__\n-    int errorno = errno;\n-#else  // __MINGW32__\n-    int errorno = WSAGetLastError();\n-#endif  // __POSIX__\n+  if (r != 0) {\n     CHECK_GE(args.Length(), 1);\n-    env->CollectExceptionInfo(args[args.Length() - 1], errorno, \"gethostname\");\n+    env->CollectUVExceptionInfo(args[args.Length() - 1], r,\n+                                \"uv_os_gethostname\");\n     return args.GetReturnValue().SetUndefined();\n   }\n-  buf[sizeof(buf) - 1] = '\\0';\n \n   args.GetReturnValue().Set(OneByteString(env->isolate(), buf));\n }"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 5,
        "deletions": 8
    }
}