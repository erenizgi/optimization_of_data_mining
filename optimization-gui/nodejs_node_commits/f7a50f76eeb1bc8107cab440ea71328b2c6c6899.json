{
    "author": "seanhealy",
    "message": "test: refactor callback functions to arrow functions\n\nRefactor callback functions to modern arrow functions.\n\nAlso, added `common.mustCall` to `online` callbacks.\n\nPR-URL: https://github.com/nodejs/node/pull/23546\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "f7a50f76eeb1bc8107cab440ea71328b2c6c6899",
    "files": [
        {
            "sha": "cc76b4ba3aff3a9e1578761427412d2e6d454306",
            "filename": "test/parallel/test-cluster-worker-forced-exit.js",
            "status": "modified",
            "additions": 10,
            "deletions": 12,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/f7a50f76eeb1bc8107cab440ea71328b2c6c6899/test%2Fparallel%2Ftest-cluster-worker-forced-exit.js",
            "raw_url": "https://github.com/nodejs/node/raw/f7a50f76eeb1bc8107cab440ea71328b2c6c6899/test%2Fparallel%2Ftest-cluster-worker-forced-exit.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-worker-forced-exit.js?ref=f7a50f76eeb1bc8107cab440ea71328b2c6c6899",
            "patch": "@@ -37,10 +37,8 @@ const SENTINEL = 42;\n // 3 disconnect worker with child_process's disconnect, confirm\n //   no sentinel value\n if (cluster.isWorker) {\n-  process.on('disconnect', function(msg) {\n-    setTimeout(function() {\n-      process.exit(SENTINEL);\n-    }, 10);\n+  process.on('disconnect', (msg) => {\n+    setTimeout(() => process.exit(SENTINEL), 10);\n   });\n   return;\n }\n@@ -49,17 +47,17 @@ checkUnforced();\n checkForced();\n \n function checkUnforced() {\n-  cluster.fork()\n-    .on('online', function() { this.disconnect(); })\n-    .on('exit', common.mustCall(function(status) {\n+  const worker = cluster.fork();\n+  worker\n+    .on('online', common.mustCall(() => worker.disconnect()))\n+    .on('exit', common.mustCall((status) => {\n       assert.strictEqual(status, SENTINEL);\n     }));\n }\n \n function checkForced() {\n-  cluster.fork()\n-    .on('online', function() { this.process.disconnect(); })\n-    .on('exit', common.mustCall(function(status) {\n-      assert.strictEqual(status, 0);\n-    }));\n+  const worker = cluster.fork();\n+  worker\n+    .on('online', common.mustCall(() => worker.process.disconnect()))\n+    .on('exit', common.mustCall((status) => assert.strictEqual(status, 0)));\n }"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 10,
        "deletions": 12
    }
}