{
    "author": "aeisenberg",
    "message": "test: replace assert.throws w/ common.expectsError\n\nConverts RangeError assertions to use common.expectsError and includes\nan assertion for the error code.\n\nPR-URL: https://github.com/nodejs/node/pull/23454\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>",
    "sha": "0005846f033ae9866a6bc5dbbe7f73c6aeb67185",
    "files": [
        {
            "sha": "61bb3a8c57767b083687448d64038ee6576b4d35",
            "filename": "test/parallel/test-buffer-alloc.js",
            "status": "modified",
            "additions": 34,
            "deletions": 42,
            "changes": 76,
            "blob_url": "https://github.com/nodejs/node/blob/0005846f033ae9866a6bc5dbbe7f73c6aeb67185/test%2Fparallel%2Ftest-buffer-alloc.js",
            "raw_url": "https://github.com/nodejs/node/raw/0005846f033ae9866a6bc5dbbe7f73c6aeb67185/test%2Fparallel%2Ftest-buffer-alloc.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-buffer-alloc.js?ref=0005846f033ae9866a6bc5dbbe7f73c6aeb67185",
            "patch": "@@ -74,41 +74,22 @@ new Buffer('', 'latin1');\n new Buffer('', 'binary');\n Buffer(0);\n \n+const outOfBoundsError = {\n+  code: 'ERR_BUFFER_OUT_OF_BOUNDS',\n+  type: RangeError\n+};\n+\n // try to write a 0-length string beyond the end of b\n-common.expectsError(\n-  () => b.write('', 2048),\n-  {\n-    code: 'ERR_BUFFER_OUT_OF_BOUNDS',\n-    type: RangeError\n-  }\n-);\n+common.expectsError(() => b.write('', 2048), outOfBoundsError);\n \n // throw when writing to negative offset\n-common.expectsError(\n-  () => b.write('a', -1),\n-  {\n-    code: 'ERR_BUFFER_OUT_OF_BOUNDS',\n-    type: RangeError\n-  }\n-);\n+common.expectsError(() => b.write('a', -1), outOfBoundsError);\n \n // throw when writing past bounds from the pool\n-common.expectsError(\n-  () => b.write('a', 2048),\n-  {\n-    code: 'ERR_BUFFER_OUT_OF_BOUNDS',\n-    type: RangeError\n-  }\n-);\n+common.expectsError(() => b.write('a', 2048), outOfBoundsError);\n \n // throw when writing to negative offset\n-common.expectsError(\n-  () => b.write('a', -1),\n-  {\n-    code: 'ERR_BUFFER_OUT_OF_BOUNDS',\n-    type: RangeError\n-  }\n-);\n+common.expectsError(() => b.write('a', -1), outOfBoundsError);\n \n // try to copy 0 bytes worth of data into an empty buffer\n b.copy(Buffer.alloc(0), 0, 0, 0);\n@@ -804,20 +785,34 @@ assert.strictEqual(Buffer.from('13.37').length, 5);\n Buffer.from(Buffer.allocUnsafe(0), 0, 0);\n \n // issue GH-5587\n-assert.throws(() => Buffer.alloc(8).writeFloatLE(0, 5), RangeError);\n-assert.throws(() => Buffer.alloc(16).writeDoubleLE(0, 9), RangeError);\n+common.expectsError(\n+  () => Buffer.alloc(8).writeFloatLE(0, 5),\n+  outOfBoundsError\n+);\n+common.expectsError(\n+  () => Buffer.alloc(16).writeDoubleLE(0, 9),\n+  outOfBoundsError\n+);\n \n // attempt to overflow buffers, similar to previous bug in array buffers\n-assert.throws(() => Buffer.allocUnsafe(8).writeFloatLE(0.0, 0xffffffff),\n-              RangeError);\n-assert.throws(() => Buffer.allocUnsafe(8).writeFloatLE(0.0, 0xffffffff),\n-              RangeError);\n-\n+common.expectsError(\n+  () => Buffer.allocUnsafe(8).writeFloatLE(0.0, 0xffffffff),\n+  outOfBoundsError\n+);\n+common.expectsError(\n+  () => Buffer.allocUnsafe(8).writeFloatLE(0.0, 0xffffffff),\n+  outOfBoundsError\n+);\n \n // ensure negative values can't get past offset\n-assert.throws(() => Buffer.allocUnsafe(8).writeFloatLE(0.0, -1), RangeError);\n-assert.throws(() => Buffer.allocUnsafe(8).writeFloatLE(0.0, -1), RangeError);\n-\n+common.expectsError(\n+  () => Buffer.allocUnsafe(8).writeFloatLE(0.0, -1),\n+  outOfBoundsError\n+);\n+common.expectsError(\n+  () => Buffer.allocUnsafe(8).writeFloatLE(0.0, -1),\n+  outOfBoundsError\n+);\n \n // test for common write(U)IntLE/BE\n {\n@@ -1010,10 +1005,7 @@ common.expectsError(() => {\n   const a = Buffer.alloc(1);\n   const b = Buffer.alloc(1);\n   a.copy(b, 0, 0x100000000, 0x100000001);\n-}, {\n-  code: 'ERR_OUT_OF_RANGE',\n-  type: RangeError\n-});\n+}, outOfBoundsError);\n \n // Unpooled buffer (replaces SlowBuffer)\n {"
        }
    ],
    "stats": {
        "total": 76,
        "additions": 34,
        "deletions": 42
    }
}