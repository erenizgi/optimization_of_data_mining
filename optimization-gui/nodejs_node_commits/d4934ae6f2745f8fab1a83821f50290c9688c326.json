{
    "author": "cjihrig",
    "message": "lib: move DEP0006 to end of life\n\nThis commit moves DEP0006, which has been runtime deprecated\nsince Node 0.11, to end of life status.\n\nPR-URL: https://github.com/nodejs/node/pull/25279\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>\nReviewed-By: Tobias Nießen <tniessen@tnie.de>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>",
    "sha": "d4934ae6f2745f8fab1a83821f50290c9688c326",
    "files": [
        {
            "sha": "c4fbacc0e0ae46328107d745a433f8d30c4fb0a2",
            "filename": "doc/api/deprecations.md",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/d4934ae6f2745f8fab1a83821f50290c9688c326/doc%2Fapi%2Fdeprecations.md",
            "raw_url": "https://github.com/nodejs/node/raw/d4934ae6f2745f8fab1a83821f50290c9688c326/doc%2Fapi%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fdeprecations.md?ref=d4934ae6f2745f8fab1a83821f50290c9688c326",
            "patch": "@@ -160,6 +160,9 @@ outside `node_modules` in order to better target developers, rather than users.\n ### DEP0006: child\\_process options.customFds\n <!-- YAML\n changes:\n+  - version: REPLACEME\n+    pr-url: https://github.com/nodejs/node/pull/25279\n+    description: End-of-Life.\n   - version:\n     - v4.8.6\n     - v6.12.0\n@@ -171,7 +174,7 @@ changes:\n     description: Documentation-only deprecation.\n -->\n \n-Type: Runtime\n+Type: End-of-Life\n \n Within the [`child_process`][] module's `spawn()`, `fork()`, and `exec()`\n methods, the `options.customFds` option is deprecated. The `options.stdio`"
        },
        {
            "sha": "d70803866c1f5864311126648507f34609d32d3a",
            "filename": "lib/child_process.js",
            "status": "modified",
            "additions": 1,
            "deletions": 19,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/d4934ae6f2745f8fab1a83821f50290c9688c326/lib%2Fchild_process.js",
            "raw_url": "https://github.com/nodejs/node/raw/d4934ae6f2745f8fab1a83821f50290c9688c326/lib%2Fchild_process.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fchild_process.js?ref=d4934ae6f2745f8fab1a83821f50290c9688c326",
            "patch": "@@ -22,9 +22,7 @@\n 'use strict';\n \n const util = require('util');\n-const {\n-  deprecate, convertToValidSignal, getSystemErrorName\n-} = require('internal/util');\n+const { convertToValidSignal, getSystemErrorName } = require('internal/util');\n const { isArrayBufferView } = require('internal/util/types');\n const debug = util.debuglog('child_process');\n const { Buffer } = require('buffer');\n@@ -384,20 +382,6 @@ Object.defineProperty(exports.execFile, util.promisify.custom, {\n   value: customPromiseExecFunction(exports.execFile)\n });\n \n-const _deprecatedCustomFds = deprecate(\n-  function deprecateCustomFds(options) {\n-    options.stdio = options.customFds.map(function mapCustomFds(fd) {\n-      return fd === -1 ? 'pipe' : fd;\n-    });\n-  }, 'child_process: options.customFds option is deprecated. ' +\n-     'Use options.stdio instead.', 'DEP0006');\n-\n-function _convertCustomFds(options) {\n-  if (options.customFds && !options.stdio) {\n-    _deprecatedCustomFds(options);\n-  }\n-}\n-\n function normalizeSpawnArguments(file, args, options) {\n   validateString(file, 'file');\n \n@@ -526,8 +510,6 @@ function normalizeSpawnArguments(file, args, options) {\n     }\n   }\n \n-  _convertCustomFds(options);\n-\n   return {\n     file: file,\n     args: args,"
        },
        {
            "sha": "1c89c207d37f99f94f17511ed97e8b73913ce4e1",
            "filename": "test/parallel/test-child-process-custom-fds.js",
            "status": "removed",
            "additions": 0,
            "deletions": 47,
            "changes": 47,
            "blob_url": "https://github.com/nodejs/node/blob/7d453ff21294bc9dcf7c9a61b1a07c3a15a021ce/test%2Fparallel%2Ftest-child-process-custom-fds.js",
            "raw_url": "https://github.com/nodejs/node/raw/7d453ff21294bc9dcf7c9a61b1a07c3a15a021ce/test%2Fparallel%2Ftest-child-process-custom-fds.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-child-process-custom-fds.js?ref=7d453ff21294bc9dcf7c9a61b1a07c3a15a021ce",
            "patch": "@@ -1,47 +0,0 @@\n-// Flags: --expose_internals\n-'use strict';\n-const common = require('../common');\n-const assert = require('assert');\n-const { spawnSync } = require('child_process');\n-const internalCp = require('internal/child_process');\n-\n-if (!common.isMainThread)\n-  common.skip('stdio is not associated with file descriptors in Workers');\n-\n-// This test uses the deprecated `customFds` option. We expect a deprecation\n-// warning, but only once (per node process).\n-const msg = 'child_process: options.customFds option is deprecated. ' +\n-            'Use options.stdio instead.';\n-common.expectWarning('DeprecationWarning', msg, 'DEP0006');\n-\n-// Verify that customFds is used if stdio is not provided.\n-{\n-  const customFds = [-1, process.stdout.fd, process.stderr.fd];\n-  const oldSpawnSync = internalCp.spawnSync;\n-  internalCp.spawnSync = common.mustCall(function(opts) {\n-    assert.deepStrictEqual(opts.options.customFds, customFds);\n-    assert.deepStrictEqual(opts.options.stdio, [\n-      { type: 'pipe', readable: true, writable: false },\n-      { type: 'fd', fd: process.stdout.fd },\n-      { type: 'fd', fd: process.stderr.fd }\n-    ]);\n-  });\n-  spawnSync(...common.pwdCommand, { customFds });\n-  internalCp.spawnSync = oldSpawnSync;\n-}\n-\n-// Verify that customFds is ignored when stdio is present.\n-{\n-  const customFds = [0, 1, 2];\n-  const oldSpawnSync = internalCp.spawnSync;\n-  internalCp.spawnSync = common.mustCall(function(opts) {\n-    assert.deepStrictEqual(opts.options.customFds, customFds);\n-    assert.deepStrictEqual(opts.options.stdio, [\n-      { type: 'pipe', readable: true, writable: false },\n-      { type: 'pipe', readable: false, writable: true },\n-      { type: 'pipe', readable: false, writable: true }\n-    ]);\n-  });\n-  spawnSync(...common.pwdCommand, { customFds, stdio: 'pipe' });\n-  internalCp.spawnSync = oldSpawnSync;\n-}"
        }
    ],
    "stats": {
        "total": 72,
        "additions": 5,
        "deletions": 67
    }
}