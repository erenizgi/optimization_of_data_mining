{
    "author": "addaleax",
    "message": "src: remove unused freelist.h header\n\nAlways easy enough to re-introduce if we do need it.\n\nPR-URL: https://github.com/nodejs/node/pull/20544\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Matheus Marchini <matheus@sthima.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>",
    "sha": "5bb5d61cdd76f816c0af3cda5b610f5c34f41023",
    "files": [
        {
            "sha": "7dff56a35d348a744a772e08a7078bd6b200d5b2",
            "filename": "src/freelist.h",
            "status": "removed",
            "additions": 0,
            "deletions": 92,
            "changes": 92,
            "blob_url": "https://github.com/nodejs/node/blob/2c52f656bd95f1809ac1f75cfd55cf0563301279/src%2Ffreelist.h",
            "raw_url": "https://github.com/nodejs/node/raw/2c52f656bd95f1809ac1f75cfd55cf0563301279/src%2Ffreelist.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ffreelist.h?ref=2c52f656bd95f1809ac1f75cfd55cf0563301279",
            "patch": "@@ -1,92 +0,0 @@\n-#ifndef SRC_FREELIST_H_\n-#define SRC_FREELIST_H_\n-\n-#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n-\n-#include \"util.h\"\n-\n-namespace node {\n-\n-struct DefaultFreelistTraits;\n-\n-template <typename T,\n-          size_t kMaximumLength,\n-          typename FreelistTraits = DefaultFreelistTraits>\n-class Freelist {\n- public:\n-  typedef struct list_item {\n-    T* item = nullptr;\n-    list_item* next = nullptr;\n-  } list_item;\n-\n-  Freelist() {}\n-  ~Freelist() {\n-    while (head_ != nullptr) {\n-      list_item* item = head_;\n-      head_ = item->next;\n-      FreelistTraits::Free(item->item);\n-      free(item);\n-    }\n-  }\n-\n-  void push(T* item) {\n-    if (size_ > kMaximumLength) {\n-      FreelistTraits::Free(item);\n-    } else {\n-      size_++;\n-      FreelistTraits::Reset(item);\n-      list_item* li = Calloc<list_item>(1);\n-      li->item = item;\n-      if (head_ == nullptr) {\n-        head_ = li;\n-        tail_ = li;\n-      } else {\n-        tail_->next = li;\n-        tail_ = li;\n-      }\n-    }\n-  }\n-\n-  T* pop() {\n-    if (head_ != nullptr) {\n-      size_--;\n-      list_item* cur = head_;\n-      T* item = cur->item;\n-      head_ = cur->next;\n-      free(cur);\n-      return item;\n-    } else {\n-      return FreelistTraits::template Alloc<T>();\n-    }\n-  }\n-\n- private:\n-  size_t size_ = 0;\n-  list_item* head_ = nullptr;\n-  list_item* tail_ = nullptr;\n-};\n-\n-struct DefaultFreelistTraits {\n-  template <typename T>\n-  static T* Alloc() {\n-    return ::new (Malloc<T>(1)) T();\n-  }\n-\n-  template <typename T>\n-  static void Free(T* item) {\n-    item->~T();\n-    free(item);\n-  }\n-\n-  template <typename T>\n-  static void Reset(T* item) {\n-    item->~T();\n-    ::new (item) T();\n-  }\n-};\n-\n-}  // namespace node\n-\n-#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n-\n-#endif  // SRC_FREELIST_H_"
        }
    ],
    "stats": {
        "total": 92,
        "additions": 0,
        "deletions": 92
    }
}