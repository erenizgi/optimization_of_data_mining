{
    "author": "gireeshpunathil",
    "message": "test: relax chunk count expectations\n\nIn parallel/test-fs-read-stream-concurrent-reads.js the number\nof data chunks used is being tested when few concurrent reads\nare performed. The number of chunks can fluctuate based on the\nnumber of concurrent reads as well as the data that was read in\none shot. Accommodate these variations in the test.\n\nFixes: https://github.com/nodejs/node/issues/22339\n\nPR-URL: https://github.com/nodejs/node/pull/25415\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "cc26957cc30d89619d3b9be85f5301111e17615a",
    "files": [
        {
            "sha": "b5674484866cc72516452642e5b95b0ac438610d",
            "filename": "test/parallel/test-fs-read-stream-concurrent-reads.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/cc26957cc30d89619d3b9be85f5301111e17615a/test%2Fparallel%2Ftest-fs-read-stream-concurrent-reads.js",
            "raw_url": "https://github.com/nodejs/node/raw/cc26957cc30d89619d3b9be85f5301111e17615a/test%2Fparallel%2Ftest-fs-read-stream-concurrent-reads.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-read-stream-concurrent-reads.js?ref=cc26957cc30d89619d3b9be85f5301111e17615a",
            "patch": "@@ -13,7 +13,7 @@ const fs = require('fs');\n const filename = fixtures.path('loop.js');  // Some small non-homogeneous file.\n const content = fs.readFileSync(filename);\n \n-const N = 1000;\n+const N = 2000;\n let started = 0;\n let done = 0;\n \n@@ -26,10 +26,10 @@ function startRead() {\n     .on('data', (chunk) => {\n       chunks.push(chunk);\n       arrayBuffers.add(chunk.buffer);\n-      if (started < N)\n-        startRead();\n     })\n     .on('end', common.mustCall(() => {\n+      if (started < N)\n+        startRead();\n       assert.deepStrictEqual(Buffer.concat(chunks), content);\n       if (++done === N) {\n         const retainedMemory =\n@@ -43,5 +43,5 @@ function startRead() {\n \n // Don’t start the reads all at once – that way we would have to allocate\n // a large amount of memory upfront.\n-for (let i = 0; i < 4; ++i)\n+for (let i = 0; i < 6; ++i)\n   startRead();"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}