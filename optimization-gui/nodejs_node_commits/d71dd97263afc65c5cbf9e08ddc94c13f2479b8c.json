{
    "author": "unknown",
    "message": "util: support BigInt in util.format\n\n`util.format` and `console.log` now support BigInt via the existing\nformat specifiers `%i` and `%d`.\n\nPR-URL: https://github.com/nodejs/node/pull/22097\nReviewed-By: Roman Reiss <me@silverwind.io>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "d71dd97263afc65c5cbf9e08ddc94c13f2479b8c",
    "files": [
        {
            "sha": "ead1afcd42fd7b878f73c217f93e97821b87e274",
            "filename": "doc/api/util.md",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/d71dd97263afc65c5cbf9e08ddc94c13f2479b8c/doc%2Fapi%2Futil.md",
            "raw_url": "https://github.com/nodejs/node/raw/d71dd97263afc65c5cbf9e08ddc94c13f2479b8c/doc%2Fapi%2Futil.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Futil.md?ref=d71dd97263afc65c5cbf9e08ddc94c13f2479b8c",
            "patch": "@@ -202,8 +202,8 @@ Each placeholder token is replaced with the converted value from the\n corresponding argument. Supported placeholders are:\n \n * `%s` - `String`.\n-* `%d` - `Number` (integer or floating point value).\n-* `%i` - Integer.\n+* `%d` - `Number` (integer or floating point value) or `BigInt`.\n+* `%i` - Integer or `BigInt`.\n * `%f` - Floating point value.\n * `%j` - JSON. Replaced with the string `'[Circular]'` if the argument\n contains circular references."
        },
        {
            "sha": "2e42beb58b2398490c8dba702c6a4c931f7c5685",
            "filename": "lib/util.js",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/d71dd97263afc65c5cbf9e08ddc94c13f2479b8c/lib%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/d71dd97263afc65c5cbf9e08ddc94c13f2479b8c/lib%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Futil.js?ref=d71dd97263afc65c5cbf9e08ddc94c13f2479b8c",
            "patch": "@@ -102,7 +102,13 @@ function formatWithOptions(inspectOptions, f) {\n             tempStr = tryStringify(arguments[a++]);\n             break;\n           case 100: // 'd'\n-            tempStr = `${Number(arguments[a++])}`;\n+            const tempNum = arguments[a++];\n+            // eslint-disable-next-line valid-typeof\n+            if (typeof tempNum === 'bigint') {\n+              tempStr = `${tempNum}n`;\n+            } else {\n+              tempStr = `${Number(tempNum)}`;\n+            }\n             break;\n           case 79: // 'O'\n             tempStr = inspect(arguments[a++], inspectOptions);\n@@ -117,7 +123,13 @@ function formatWithOptions(inspectOptions, f) {\n             break;\n           }\n           case 105: // 'i'\n-            tempStr = `${parseInt(arguments[a++])}`;\n+            const tempInteger = arguments[a++];\n+            // eslint-disable-next-line valid-typeof\n+            if (typeof tempInteger === 'bigint') {\n+              tempStr = `${tempInteger}n`;\n+            } else {\n+              tempStr = `${parseInt(tempInteger)}`;\n+            }\n             break;\n           case 102: // 'f'\n             tempStr = `${parseFloat(arguments[a++])}`;"
        },
        {
            "sha": "0c4ba82fec83594d1bbb324c1f8954a2e9188414",
            "filename": "test/parallel/test-util-format.js",
            "status": "modified",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/d71dd97263afc65c5cbf9e08ddc94c13f2479b8c/test%2Fparallel%2Ftest-util-format.js",
            "raw_url": "https://github.com/nodejs/node/raw/d71dd97263afc65c5cbf9e08ddc94c13f2479b8c/test%2Fparallel%2Ftest-util-format.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util-format.js?ref=d71dd97263afc65c5cbf9e08ddc94c13f2479b8c",
            "patch": "@@ -68,6 +68,18 @@ assert.strictEqual(util.format('%d', -0.5), '-0.5');\n assert.strictEqual(util.format('%d', ''), '0');\n assert.strictEqual(util.format('%d %d', 42, 43), '42 43');\n assert.strictEqual(util.format('%d %d', 42), '42 %d');\n+assert.strictEqual(\n+  util.format('%d', 1180591620717411303424),\n+  '1.1805916207174113e+21'\n+);\n+assert.strictEqual(\n+  util.format('%d', 1180591620717411303424n),\n+  '1180591620717411303424n'\n+);\n+assert.strictEqual(\n+  util.format('%d %d', 1180591620717411303424n, 12345678901234567890123n),\n+  '1180591620717411303424n 12345678901234567890123n'\n+);\n \n // Integer format specifier\n assert.strictEqual(util.format('%i'), '%i');\n@@ -80,6 +92,28 @@ assert.strictEqual(util.format('%i', -0.5), '0');\n assert.strictEqual(util.format('%i', ''), 'NaN');\n assert.strictEqual(util.format('%i %i', 42, 43), '42 43');\n assert.strictEqual(util.format('%i %i', 42), '42 %i');\n+assert.strictEqual(\n+  util.format('%i', 1180591620717411303424),\n+  '1'\n+);\n+assert.strictEqual(\n+  util.format('%i', 1180591620717411303424n),\n+  '1180591620717411303424n'\n+);\n+assert.strictEqual(\n+  util.format('%i %i', 1180591620717411303424n, 12345678901234567890123n),\n+  '1180591620717411303424n 12345678901234567890123n'\n+);\n+\n+assert.strictEqual(\n+  util.format('%d %i', 1180591620717411303424n, 12345678901234567890123n),\n+  '1180591620717411303424n 12345678901234567890123n'\n+);\n+\n+assert.strictEqual(\n+  util.format('%i %d', 1180591620717411303424n, 12345678901234567890123n),\n+  '1180591620717411303424n 12345678901234567890123n'\n+);\n \n // Float format specifier\n assert.strictEqual(util.format('%f'), '%f');"
        }
    ],
    "stats": {
        "total": 54,
        "additions": 50,
        "deletions": 4
    }
}