{
    "author": "MarkArranz",
    "message": "test: add error code tests in dgram test\n\nImprove error validation in test-dgram-send-bad-arguments.\n\nPR-URL: https://github.com/nodejs/node/pull/24215\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "457cde3167ec474aa57948a2b1fa58e9c4a55f4c",
    "files": [
        {
            "sha": "20356ba50c477a1dcb6292fec6a09de7964c7c00",
            "filename": "test/parallel/test-dgram-send-bad-arguments.js",
            "status": "modified",
            "additions": 29,
            "deletions": 6,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/457cde3167ec474aa57948a2b1fa58e9c4a55f4c/test%2Fparallel%2Ftest-dgram-send-bad-arguments.js",
            "raw_url": "https://github.com/nodejs/node/raw/457cde3167ec474aa57948a2b1fa58e9c4a55f4c/test%2Fparallel%2Ftest-dgram-send-bad-arguments.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-dgram-send-bad-arguments.js?ref=457cde3167ec474aa57948a2b1fa58e9c4a55f4c",
            "patch": "@@ -20,25 +20,48 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-require('../common');\n+const common = require('../common');\n const assert = require('assert');\n const dgram = require('dgram');\n \n const buf = Buffer.from('test');\n const host = '127.0.0.1';\n const sock = dgram.createSocket('udp4');\n \n-assert.throws(() => {\n-  sock.send();\n-}, TypeError);  // First argument should be a buffer.\n+// First argument should be a buffer.\n+common.expectsError(\n+  () => { sock.send(); },\n+  {\n+    code: 'ERR_INVALID_ARG_TYPE',\n+    type: TypeError,\n+    message: 'The \"buffer\" argument must be one of type ' +\n+    'Buffer, Uint8Array, or string. Received type undefined'\n+  }\n+);\n \n // send(buf, offset, length, port, host)\n assert.throws(() => { sock.send(buf, 1, 1, -1, host); }, RangeError);\n assert.throws(() => { sock.send(buf, 1, 1, 0, host); }, RangeError);\n assert.throws(() => { sock.send(buf, 1, 1, 65536, host); }, RangeError);\n \n // send(buf, port, host)\n-assert.throws(() => { sock.send(23, 12345, host); }, TypeError);\n+common.expectsError(\n+  () => { sock.send(23, 12345, host); },\n+  {\n+    code: 'ERR_INVALID_ARG_TYPE',\n+    type: TypeError,\n+    message: 'The \"buffer\" argument must be one of type ' +\n+    'Buffer, Uint8Array, or string. Received type number'\n+  }\n+);\n \n // send([buf1, ..], port, host)\n-assert.throws(() => { sock.send([buf, 23], 12345, host); }, TypeError);\n+common.expectsError(\n+  () => { sock.send([buf, 23], 12345, host); },\n+  {\n+    code: 'ERR_INVALID_ARG_TYPE',\n+    type: TypeError,\n+    message: 'The \"buffer list arguments\" argument must be one of type ' +\n+    'Buffer or string. Received type object'\n+  }\n+);"
        }
    ],
    "stats": {
        "total": 35,
        "additions": 29,
        "deletions": 6
    }
}