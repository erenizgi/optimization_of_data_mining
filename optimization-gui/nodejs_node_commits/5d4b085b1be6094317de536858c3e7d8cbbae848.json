{
    "author": "cjihrig",
    "message": "report: disambiguate glibc versions\n\n- Give the glibc version entries more specific names.\n- Group all of the glibc version reporting together.\n\nPR-URL: https://github.com/nodejs/node/pull/25781\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "5d4b085b1be6094317de536858c3e7d8cbbae848",
    "files": [
        {
            "sha": "cc099993057e2e264bf3ba2118826d847dc726a2",
            "filename": "doc/api/report.md",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/5d4b085b1be6094317de536858c3e7d8cbbae848/doc%2Fapi%2Freport.md",
            "raw_url": "https://github.com/nodejs/node/raw/5d4b085b1be6094317de536858c3e7d8cbbae848/doc%2Fapi%2Freport.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Freport.md?ref=5d4b085b1be6094317de536858c3e7d8cbbae848",
            "patch": "@@ -36,7 +36,8 @@ is provided below for reference.\n       \"child\"\n     ],\n     \"nodejsVersion\": \"v12.0.0-pre\",\n-    \"glibcVersion\": \"2.17\",\n+    \"glibcVersionRuntime\": \"2.17\",\n+    \"glibcVersionCompiler\": \"2.17\",\n     \"wordSize\": \"64 bit\",\n     \"componentVersions\": {\n       \"node\": \"12.0.0-pre\",\n@@ -55,7 +56,6 @@ is provided below for reference.\n       \"release\": \"node\"\n     },\n     \"osVersion\": \"Linux 3.10.0-862.el7.x86_64 #1 SMP Wed Mar 21 18:14:51 EDT 2018\",\n-    \"glibc\": \"2.17\",\n     \"machine\": \"Linux 3.10.0-862.el7.x86_64 #1 SMP Wed Mar 21 18:14:51 EDT 2018test_machine x86_64\"\n   },\n   \"javascriptStack\": {"
        },
        {
            "sha": "381a40e7861f2a63c0e533be62db941ae2bcf6d1",
            "filename": "src/node_report.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 8,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/5d4b085b1be6094317de536858c3e7d8cbbae848/src%2Fnode_report.cc",
            "raw_url": "https://github.com/nodejs/node/raw/5d4b085b1be6094317de536858c3e7d8cbbae848/src%2Fnode_report.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_report.cc?ref=5d4b085b1be6094317de536858c3e7d8cbbae848",
            "patch": "@@ -323,11 +323,22 @@ static void PrintVersionInformation(JSONWriter* writer) {\n   buf << \"v\" << NODE_VERSION_STRING;\n   writer->json_keyvalue(\"nodejsVersion\", buf.str());\n   buf.str(\"\");\n+\n+#ifndef _WIN32\n+  // Report compiler and runtime glibc versions where possible.\n+  const char* (*libc_version)();\n+  *(reinterpret_cast<void**>(&libc_version)) =\n+      dlsym(RTLD_DEFAULT, \"gnu_get_libc_version\");\n+  if (libc_version != nullptr)\n+    writer->json_keyvalue(\"glibcVersionRuntime\", (*libc_version)());\n+#endif /* _WIN32 */\n+\n #ifdef __GLIBC__\n   buf << __GLIBC__ << \".\" << __GLIBC_MINOR__;\n-  writer->json_keyvalue(\"glibcVersion\", buf.str());\n+  writer->json_keyvalue(\"glibcVersionCompiler\", buf.str());\n   buf.str(\"\");\n #endif\n+\n   // Report Process word size\n   writer->json_keyvalue(\"wordSize\", sizeof(void*) * 8);\n \n@@ -433,13 +444,6 @@ static void PrintVersionInformation(JSONWriter* writer) {\n     buf.str(\"\");\n     buf << os_info.nodename << \" \" << os_info.machine;\n     writer->json_keyvalue(\"machine\", buf.str());\n-\n-    const char* (*libc_version)();\n-    *(reinterpret_cast<void**>(&libc_version)) =\n-        dlsym(RTLD_DEFAULT, \"gnu_get_libc_version\");\n-    if (libc_version != nullptr) {\n-      writer->json_keyvalue(\"glibc\", (*libc_version)());\n-    }\n   }\n #endif\n }"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 14,
        "deletions": 10
    }
}