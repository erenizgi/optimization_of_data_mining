{
    "author": "daynin",
    "message": "module: replace magic numbers by constants\n\n- add new constants\n- replace \"magic\" numbers in \"module\" by constants\n\nPR-URL: https://github.com/nodejs/node/pull/18785\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Matheus Marchini <matheus@sthima.com>\nReviewed-By: Jon Moss <me@jonathanmoss.me>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>",
    "sha": "c86fe511f4924ebbf7291fd938e5cd952199145b",
    "files": [
        {
            "sha": "d059dbc7ef8fa6d74413a31d42b12eb205a438e4",
            "filename": "lib/internal/constants.js",
            "status": "modified",
            "additions": 14,
            "deletions": 9,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/c86fe511f4924ebbf7291fd938e5cd952199145b/lib%2Finternal%2Fconstants.js",
            "raw_url": "https://github.com/nodejs/node/raw/c86fe511f4924ebbf7291fd938e5cd952199145b/lib%2Finternal%2Fconstants.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fconstants.js?ref=c86fe511f4924ebbf7291fd938e5cd952199145b",
            "patch": "@@ -2,15 +2,20 @@\n \n module.exports = {\n   // Alphabet chars.\n-  CHAR_UPPERCASE_A: 65, /*A*/\n-  CHAR_LOWERCASE_A: 97, /*a*/\n-  CHAR_UPPERCASE_Z: 90, /*Z*/\n-  CHAR_LOWERCASE_Z: 122, /*z*/\n+  CHAR_UPPERCASE_A: 65, /* A */\n+  CHAR_LOWERCASE_A: 97, /* a */\n+  CHAR_UPPERCASE_Z: 90, /* Z */\n+  CHAR_LOWERCASE_Z: 122, /* z */\n \n   // Non-alphabetic chars.\n-  CHAR_DOT: 46, /*.*/\n-  CHAR_FORWARD_SLASH: 47, /*/*/\n-  CHAR_BACKWARD_SLASH: 92, /*\\*/\n-  CHAR_COLON: 58, /*:*/\n-  CHAR_QUESTION_MARK: 63, /*?*/\n+  CHAR_DOT: 46, /* . */\n+  CHAR_FORWARD_SLASH: 47, /* / */\n+  CHAR_BACKWARD_SLASH: 92, /* \\ */\n+  CHAR_COLON: 58, /* : */\n+  CHAR_QUESTION_MARK: 63, /* ? */\n+  CHAR_UNDERSCORE: 95, /* _ */\n+\n+  // Digits\n+  CHAR_0: 48, /* 0 */\n+  CHAR_9: 57, /* 9 */\n };"
        },
        {
            "sha": "be49fa8e8d7e99f225b06555c34b482081132a34",
            "filename": "lib/module.js",
            "status": "modified",
            "additions": 27,
            "deletions": 12,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/c86fe511f4924ebbf7291fd938e5cd952199145b/lib%2Fmodule.js",
            "raw_url": "https://github.com/nodejs/node/raw/c86fe511f4924ebbf7291fd938e5cd952199145b/lib%2Fmodule.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fmodule.js?ref=c86fe511f4924ebbf7291fd938e5cd952199145b",
            "patch": "@@ -47,6 +47,19 @@ module.exports = Module;\n const internalESModule = require('internal/process/modules');\n const ModuleJob = require('internal/loader/ModuleJob');\n const createDynamicModule = require('internal/loader/CreateDynamicModule');\n+const {\n+  CHAR_UPPERCASE_A,\n+  CHAR_LOWERCASE_A,\n+  CHAR_UPPERCASE_Z,\n+  CHAR_LOWERCASE_Z,\n+  CHAR_FORWARD_SLASH,\n+  CHAR_BACKWARD_SLASH,\n+  CHAR_COLON,\n+  CHAR_DOT,\n+  CHAR_UNDERSCORE,\n+  CHAR_0,\n+  CHAR_9,\n+} = require('internal/constants');\n \n function stat(filename) {\n   filename = path.toNamespacedPath(filename);\n@@ -201,7 +214,7 @@ Module._findPath = function(request, paths, isMain) {\n \n   var exts;\n   var trailingSlash = request.length > 0 &&\n-                      request.charCodeAt(request.length - 1) === 47/*/*/;\n+    request.charCodeAt(request.length - 1) === CHAR_FORWARD_SLASH;\n \n   // For each path\n   for (var i = 0; i < paths.length; i++) {\n@@ -276,8 +289,8 @@ if (process.platform === 'win32') {\n \n     // return root node_modules when path is 'D:\\\\'.\n     // path.resolve will make sure from.length >=3 in Windows.\n-    if (from.charCodeAt(from.length - 1) === 92/*\\*/ &&\n-        from.charCodeAt(from.length - 2) === 58/*:*/)\n+    if (from.charCodeAt(from.length - 1) === CHAR_BACKWARD_SLASH &&\n+        from.charCodeAt(from.length - 2) === CHAR_COLON)\n       return [from + 'node_modules'];\n \n     const paths = [];\n@@ -290,7 +303,9 @@ if (process.platform === 'win32') {\n       // Use colon as an extra condition since we can get node_modules\n       // path for drive root like 'C:\\node_modules' and don't need to\n       // parse drive name.\n-      if (code === 92/*\\*/ || code === 47/*/*/ || code === 58/*:*/) {\n+      if (code === CHAR_BACKWARD_SLASH ||\n+          code === CHAR_FORWARD_SLASH ||\n+          code === CHAR_COLON) {\n         if (p !== nmLen)\n           paths.push(from.slice(0, last) + '\\\\node_modules');\n         last = i;\n@@ -324,7 +339,7 @@ if (process.platform === 'win32') {\n     var last = from.length;\n     for (var i = from.length - 1; i >= 0; --i) {\n       const code = from.charCodeAt(i);\n-      if (code === 47/*/*/) {\n+      if (code === CHAR_FORWARD_SLASH) {\n         if (p !== nmLen)\n           paths.push(from.slice(0, last) + '/node_modules');\n         last = i;\n@@ -357,9 +372,9 @@ Module._resolveLookupPaths = function(request, parent, newReturn) {\n \n   // Check for relative path\n   if (request.length < 2 ||\n-      request.charCodeAt(0) !== 46/*.*/ ||\n-      (request.charCodeAt(1) !== 46/*.*/ &&\n-       request.charCodeAt(1) !== 47/*/*/)) {\n+      request.charCodeAt(0) !== CHAR_DOT ||\n+      (request.charCodeAt(1) !== CHAR_DOT &&\n+       request.charCodeAt(1) !== CHAR_FORWARD_SLASH)) {\n     var paths = modulePaths;\n     if (parent) {\n       if (!parent.paths)\n@@ -407,10 +422,10 @@ Module._resolveLookupPaths = function(request, parent, newReturn) {\n       // We matched 'index.', let's validate the rest\n       for (; i < base.length; ++i) {\n         const code = base.charCodeAt(i);\n-        if (code !== 95/*_*/ &&\n-            (code < 48/*0*/ || code > 57/*9*/) &&\n-            (code < 65/*A*/ || code > 90/*Z*/) &&\n-            (code < 97/*a*/ || code > 122/*z*/))\n+        if (code !== CHAR_UNDERSCORE &&\n+            (code < CHAR_0 || code > CHAR_9) &&\n+            (code < CHAR_UPPERCASE_A || code > CHAR_UPPERCASE_Z) &&\n+            (code < CHAR_LOWERCASE_A || code > CHAR_LOWERCASE_Z))\n           break;\n       }\n       if (i === base.length) {"
        }
    ],
    "stats": {
        "total": 62,
        "additions": 41,
        "deletions": 21
    }
}