{
    "author": "joyeecheung",
    "message": "test: split test-whatwg-encoding-textdecoder-fatal.js\n\nSplit `test-whatwg-encoding-textdecoder-fatal.js` into\n\n- `test-whatwg-encoding-custom-textdecoder-fatal.js` which\n  is a customized version of the WPT that tests for Node.js-specific\n  error codes.\n- `test-whatwg-encoding-custom-textdecoder-invalid-arg` which\n  tests `ERR_INVALID_ARG_TYPE`\n\nPR-URL: https://github.com/nodejs/node/pull/25155\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "ab02d380e5aca7cb304c4660e2071ae4dd841461",
    "files": [
        {
            "sha": "c5e4b9684b190f9276a08c5236b6207bed081549",
            "filename": "test/parallel/test-whatwg-encoding-custom-textdecoder-fatal.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/ab02d380e5aca7cb304c4660e2071ae4dd841461/test%2Fparallel%2Ftest-whatwg-encoding-custom-textdecoder-fatal.js",
            "raw_url": "https://github.com/nodejs/node/raw/ab02d380e5aca7cb304c4660e2071ae4dd841461/test%2Fparallel%2Ftest-whatwg-encoding-custom-textdecoder-fatal.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-encoding-custom-textdecoder-fatal.js?ref=ab02d380e5aca7cb304c4660e2071ae4dd841461",
            "patch": "@@ -1,6 +1,7 @@\n 'use strict';\n \n // From: https://github.com/w3c/web-platform-tests/blob/39a67e2fff/encoding/textdecoder-fatal.html\n+// With the twist that we specifically test for Node.js error codes\n \n const common = require('../common');\n \n@@ -82,21 +83,10 @@ bad.forEach((t) => {\n   );\n });\n \n+// TODO(joyeecheung): remove this when WPT is ported\n {\n   assert('fatal' in new TextDecoder());\n   assert.strictEqual(typeof new TextDecoder().fatal, 'boolean');\n   assert(!new TextDecoder().fatal);\n   assert(new TextDecoder('utf-8', { fatal: true }).fatal);\n }\n-\n-{\n-  const notArrayBufferViewExamples = [false, {}, 1, '', new Error()];\n-  notArrayBufferViewExamples.forEach((invalidInputType) => {\n-    common.expectsError(() => {\n-      new TextDecoder(undefined, null).decode(invalidInputType);\n-    }, {\n-      code: 'ERR_INVALID_ARG_TYPE',\n-      type: TypeError\n-    });\n-  });\n-}",
            "previous_filename": "test/parallel/test-whatwg-encoding-textdecoder-fatal.js"
        },
        {
            "sha": "a2b56ad9577271739a5e80b8c6766f6bec89f8b8",
            "filename": "test/parallel/test-whatwg-encoding-custom-textdecoder-invalid-arg.js",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/ab02d380e5aca7cb304c4660e2071ae4dd841461/test%2Fparallel%2Ftest-whatwg-encoding-custom-textdecoder-invalid-arg.js",
            "raw_url": "https://github.com/nodejs/node/raw/ab02d380e5aca7cb304c4660e2071ae4dd841461/test%2Fparallel%2Ftest-whatwg-encoding-custom-textdecoder-invalid-arg.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-encoding-custom-textdecoder-invalid-arg.js?ref=ab02d380e5aca7cb304c4660e2071ae4dd841461",
            "patch": "@@ -0,0 +1,18 @@\n+'use strict';\n+\n+// This tests that ERR_INVALID_ARG_TYPE are thrown when\n+// invalid arguments are passed to TextDecoder.\n+\n+const common = require('../common');\n+\n+{\n+  const notArrayBufferViewExamples = [false, {}, 1, '', new Error()];\n+  notArrayBufferViewExamples.forEach((invalidInputType) => {\n+    common.expectsError(() => {\n+      new TextDecoder(undefined, null).decode(invalidInputType);\n+    }, {\n+      code: 'ERR_INVALID_ARG_TYPE',\n+      type: TypeError\n+    });\n+  });\n+}"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 20,
        "deletions": 12
    }
}