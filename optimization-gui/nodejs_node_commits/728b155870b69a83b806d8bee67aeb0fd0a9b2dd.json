{
    "author": "cjihrig",
    "message": "deps: upgrade to libuv 1.24.1\n\nPR-URL: https://github.com/nodejs/node/pull/25078\nFixes: https://github.com/nodejs/node/issues/24521\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>",
    "sha": "728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
    "files": [
        {
            "sha": "c132987917623e55720a63d415a0abf865967c24",
            "filename": "deps/uv/.gitignore",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2F.gitignore",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2F.gitignore",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2F.gitignore?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -42,7 +42,7 @@ Makefile.in\n /android-toolchain\n \n /out/\n-/build/gyp\n+/build/\n \n /test/.libs/\n /test/run-tests"
        },
        {
            "sha": "a8b50f6209d7a0945fe1315215cc4cad8607b78a",
            "filename": "deps/uv/AUTHORS",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FAUTHORS",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FAUTHORS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2FAUTHORS?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -356,3 +356,9 @@ hitesh <sainihitesh.scientist@gmail.com>\n Svante Signell <svante.signell@gmail.com>\n Samuel Thibault <sthibault@debian.org>\n Jeremy Studer <studerj1.mail@gmail.com>\n+damon-kwok <563066990@qq.com>\n+Damon Kwok <MedusaIDE@outlook.com>\n+Ashe Connor <ashe@kivikakk.ee>\n+Rick <lcw0622@163.com>\n+Ivan Krylov <krylov.r00t@gmail.com>\n+Michael Meier <michael.meier@leica-geosystems.com>"
        },
        {
            "sha": "9f1c0587a980605a74deda264a5c0c853d60c57b",
            "filename": "deps/uv/CMakeLists.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FCMakeLists.txt",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FCMakeLists.txt",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2FCMakeLists.txt?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -15,6 +15,7 @@ set(uv_sources\n     src/fs-poll.c\n     src/idna.c\n     src/inet.c\n+    src/strscpy.c\n     src/threadpool.c\n     src/timer.c\n     src/uv-common.c\n@@ -116,6 +117,7 @@ set(uv_test_sources\n     test/test-socket-buffer-size.c\n     test/test-spawn.c\n     test/test-stdio-over-pipes.c\n+    test/test-strscpy.c\n     test/test-tcp-alloc-cb-fail.c\n     test/test-tcp-bind-error.c\n     test/test-tcp-bind6-error.c\n@@ -208,7 +210,11 @@ if(WIN32)\n   list(APPEND uv_test_sources src/win/snprintf.c test/runner-win.c)\n else()\n   list(APPEND uv_defines _FILE_OFFSET_BITS=64 _LARGEFILE_SOURCE)\n-  list(APPEND uv_libraries pthread)\n+  if(NOT CMAKE_SYSTEM_NAME STREQUAL \"Android\")\n+    # Android has pthread as part of its c library, not as a separate \n+    # libpthread.so.\n+    list(APPEND uv_libraries pthread)\n+  endif()\n   list(APPEND uv_sources\n        src/unix/async.c\n        src/unix/core.c"
        },
        {
            "sha": "f7881e6bbc4f9224a3e357f9fa99fd81f2b9ef96",
            "filename": "deps/uv/ChangeLog",
            "status": "modified",
            "additions": 33,
            "deletions": 0,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FChangeLog",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FChangeLog",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2FChangeLog?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -1,3 +1,36 @@\n+2018.12.17, Version 1.24.1 (Stable), 274f2bd3b70847cadd9a3965577a87e666ab9ac3\n+\n+Changes since version 1.24.0:\n+\n+* test: fix platform_output test on cygwin (damon-kwok)\n+\n+* gitignore: ignore build/ directory (Damon Kwok)\n+\n+* unix: zero epoll_event before use (Ashe Connor)\n+\n+* darwin: use runtime check for file cloning (Ben Noordhuis)\n+\n+* doc: replace deprecated build command on macOS (Rick)\n+\n+* warnings: fix code that emits compiler warnings (Jameson Nash)\n+\n+* doc: clarify expected memory management strategy (Ivan Krylov)\n+\n+* test: add uv_inet_ntop(AF_INET) coverage (Ben Noordhuis)\n+\n+* unix: harden string copying, introduce strscpy() (Ben Noordhuis)\n+\n+* linux: get rid of strncpy() call (Ben Noordhuis)\n+\n+* aix: get rid of strcat() calls (Ben Noordhuis)\n+\n+* aix: fix data race in uv_fs_event_start() (Ben Noordhuis)\n+\n+* win: fs: fix `FILE_FLAG_NO_BUFFERING` for writes (Joran Dirk Greef)\n+\n+* build: don't link against -lpthread on Android (Michael Meier)\n+\n+\n 2018.11.14, Version 1.24.0 (Stable), 2d427ee0083d1baf995df4ebf79a3f8890e9a3e1\n \n Changes since version 1.23.2:"
        },
        {
            "sha": "f9c9c9a05d14f34b4e3c63d28a22fc6295469e54",
            "filename": "deps/uv/Makefile.am",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FMakefile.am",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FMakefile.am",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2FMakefile.am?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -32,6 +32,8 @@ libuv_la_SOURCES = src/fs-poll.c \\\n                    src/idna.c \\\n                    src/inet.c \\\n                    src/queue.h \\\n+                   src/strscpy.c \\\n+                   src/strscpy.h \\\n                    src/threadpool.c \\\n                    src/timer.c \\\n                    src/uv-data-getter-setters.c \\\n@@ -241,6 +243,7 @@ test_run_tests_SOURCES = test/blackhole-server.c \\\n                          test/test-socket-buffer-size.c \\\n                          test/test-spawn.c \\\n                          test/test-stdio-over-pipes.c \\\n+                         test/test-strscpy.c \\\n                          test/test-tcp-alloc-cb-fail.c \\\n                          test/test-tcp-bind-error.c \\\n                          test/test-tcp-bind6-error.c \\"
        },
        {
            "sha": "fb5971d3e3542597ba8aa208756156e8713b5321",
            "filename": "deps/uv/README.md",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2FREADME.md?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -262,8 +262,7 @@ Run:\n \n ```bash\n $ ./gyp_uv.py -f xcode\n-$ xcodebuild -ARCHS=\"x86_64\" -project uv.xcodeproj \\\n-     -configuration Release -target All\n+$ xcodebuild -ARCHS=\"x86_64\" -project out/uv.xcodeproj -configuration Release -alltargets\n ```\n \n Using Homebrew:"
        },
        {
            "sha": "35e7c1b7493acdc493b586a6385b17567b09116c",
            "filename": "deps/uv/configure.ac",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fconfigure.ac",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fconfigure.ac",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fconfigure.ac?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -13,7 +13,7 @@\n # OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n \n AC_PREREQ(2.57)\n-AC_INIT([libuv], [1.24.0], [https://github.com/libuv/libuv/issues])\n+AC_INIT([libuv], [1.24.1], [https://github.com/libuv/libuv/issues])\n AC_CONFIG_MACRO_DIR([m4])\n m4_include([m4/libuv-extra-automake-flags.m4])\n m4_include([m4/as_case.m4])"
        },
        {
            "sha": "544794db06c956d251648669a65b9a8eff46e9d8",
            "filename": "deps/uv/docs/src/handle.rst",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fdocs%2Fsrc%2Fhandle.rst",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fdocs%2Fsrc%2Fhandle.rst",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fdocs%2Fsrc%2Fhandle.rst?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -140,6 +140,8 @@ API\n \n     Request handle to be closed. `close_cb` will be called asynchronously after\n     this call. This MUST be called on each handle before memory is released.\n+    Moreover, the memory can only be released in `close_cb` or after it has\n+    returned.\n \n     Handles that wrap file descriptors are closed immediately but\n     `close_cb` will still be deferred to the next iteration of the event loop."
        },
        {
            "sha": "3bc023700ef002b8cc4804c6852eb6dff12c0aac",
            "filename": "deps/uv/include/uv/version.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Finclude%2Fuv%2Fversion.h",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Finclude%2Fuv%2Fversion.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Finclude%2Fuv%2Fversion.h?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -32,7 +32,7 @@\n \n #define UV_VERSION_MAJOR 1\n #define UV_VERSION_MINOR 24\n-#define UV_VERSION_PATCH 0\n+#define UV_VERSION_PATCH 1\n #define UV_VERSION_IS_RELEASE 1\n #define UV_VERSION_SUFFIX \"\"\n "
        },
        {
            "sha": "edd2cc6eb9cd3facd5bcbea938968bc99ad7481c",
            "filename": "deps/uv/include/uv/win.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Finclude%2Fuv%2Fwin.h",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Finclude%2Fuv%2Fwin.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Finclude%2Fuv%2Fwin.h?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -25,6 +25,7 @@\n \n #if !defined(_SSIZE_T_) && !defined(_SSIZE_T_DEFINED)\n typedef intptr_t ssize_t;\n+# define SSIZE_MAX INTPTR_MAX\n # define _SSIZE_T_\n # define _SSIZE_T_DEFINED\n #endif"
        },
        {
            "sha": "698ab232e53714e48a973446701263715df8860d",
            "filename": "deps/uv/src/inet.c",
            "status": "modified",
            "additions": 2,
            "deletions": 9,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Finet.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Finet.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Finet.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -59,8 +59,7 @@ static int inet_ntop4(const unsigned char *src, char *dst, size_t size) {\n   if (l <= 0 || (size_t) l >= size) {\n     return UV_ENOSPC;\n   }\n-  strncpy(dst, tmp, size);\n-  dst[size - 1] = '\\0';\n+  uv__strscpy(dst, tmp, size);\n   return 0;\n }\n \n@@ -142,14 +141,8 @@ static int inet_ntop6(const unsigned char *src, char *dst, size_t size) {\n   if (best.base != -1 && (best.base + best.len) == ARRAY_SIZE(words))\n     *tp++ = ':';\n   *tp++ = '\\0';\n-\n-  /*\n-   * Check for overflow, copy, and we're done.\n-   */\n-  if ((size_t)(tp - tmp) > size) {\n+  if (UV_E2BIG == uv__strscpy(dst, tmp, size))\n     return UV_ENOSPC;\n-  }\n-  strcpy(dst, tmp);\n   return 0;\n }\n "
        },
        {
            "sha": "2a2bdce74501138b20c7713f003d31da928fb415",
            "filename": "deps/uv/src/strscpy.c",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fstrscpy.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fstrscpy.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fstrscpy.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -0,0 +1,17 @@\n+#include \"strscpy.h\"\n+#include <limits.h>  /* SSIZE_MAX */\n+\n+ssize_t uv__strscpy(char* d, const char* s, size_t n) {\n+  size_t i;\n+\n+  for (i = 0; i < n; i++)\n+    if ('\\0' == (d[i] = s[i]))\n+      return i > SSIZE_MAX ? UV_E2BIG : (ssize_t) i;\n+\n+  if (i == 0)\n+    return 0;\n+\n+  d[--i] = '\\0';\n+\n+  return UV_E2BIG;\n+}"
        },
        {
            "sha": "fbe0a393f205420bb4ee9528a15cacdfafc7c7c5",
            "filename": "deps/uv/src/strscpy.h",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fstrscpy.h",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fstrscpy.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fstrscpy.h?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -0,0 +1,18 @@\n+#ifndef UV_STRSCPY_H_\n+#define UV_STRSCPY_H_\n+\n+/* Include uv.h for its definitions of size_t and ssize_t.\n+ * size_t can be obtained directly from <stddef.h> but ssize_t requires\n+ * some hoop jumping on Windows that I didn't want to duplicate here.\n+ */\n+#include \"uv.h\"\n+\n+/* Copies up to |n-1| bytes from |d| to |s| and always zero-terminates\n+ * the result, except when |n==0|. Returns the number of bytes copied\n+ * or UV_E2BIG if |d| is too small.\n+ *\n+ * See https://www.kernel.org/doc/htmldocs/kernel-api/API-strscpy.html\n+ */\n+ssize_t uv__strscpy(char* d, const char* s, size_t n);\n+\n+#endif  /* UV_STRSCPY_H_ */"
        },
        {
            "sha": "dd78bcbad9a986d5f15f5704c16cfc9d3ad45d57",
            "filename": "deps/uv/src/timer.c",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Ftimer.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Ftimer.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Ftimer.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -152,7 +152,7 @@ int uv__next_timeout(const uv_loop_t* loop) {\n   if (diff > INT_MAX)\n     diff = INT_MAX;\n \n-  return diff;\n+  return (int) diff;\n }\n \n "
        },
        {
            "sha": "44c9cf5b639c31b81118d034a5fd8a2772f6c11b",
            "filename": "deps/uv/src/unix/aix.c",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Faix.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Faix.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Faix.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -358,19 +358,15 @@ void uv_loadavg(double avg[3]) {\n \n \n #ifdef HAVE_SYS_AHAFS_EVPRODS_H\n-static char *uv__rawname(char *cp) {\n-  static char rawbuf[FILENAME_MAX+1];\n-  char *dp = rindex(cp, '/');\n+static char* uv__rawname(const char* cp, char (*dst)[FILENAME_MAX+1]) {\n+  char* dp;\n \n+  dp = rindex(cp, '/');\n   if (dp == 0)\n     return 0;\n \n-  *dp = 0;\n-  strcpy(rawbuf, cp);\n-  *dp = '/';\n-  strcat(rawbuf, \"/r\");\n-  strcat(rawbuf, dp+1);\n-  return rawbuf;\n+  snprintf(*dst, sizeof(*dst), \"%.*s/r%s\", (int) (dp - cp), cp, dp + 1);\n+  return *dst;\n }\n \n \n@@ -399,6 +395,7 @@ static int uv__path_is_a_directory(char* filename) {\n  * Returns 0 if AHAFS is mounted, or an error code < 0 on failure\n  */\n static int uv__is_ahafs_mounted(void){\n+  char rawbuf[FILENAME_MAX+1];\n   int rv, i = 2;\n   struct vmount *p;\n   int size_multiplier = 10;\n@@ -432,7 +429,7 @@ static int uv__is_ahafs_mounted(void){\n     obj = vmt2dataptr(vmt, VMT_OBJECT);     /* device */\n     stub = vmt2dataptr(vmt, VMT_STUB);      /* mount point */\n \n-    if (EQ(obj, dev) || EQ(uv__rawname(obj), dev) || EQ(stub, dev)) {\n+    if (EQ(obj, dev) || EQ(uv__rawname(obj, &rawbuf), dev) || EQ(stub, dev)) {\n       uv__free(p);  /* Found a match */\n       return 0;\n     }\n@@ -453,7 +450,8 @@ static int uv__makedir_p(const char *dir) {\n   size_t len;\n   int err;\n \n-  snprintf(tmp, sizeof(tmp),\"%s\",dir);\n+  /* TODO(bnoordhuis) Check uv__strscpy() return value. */\n+  uv__strscpy(tmp, dir, sizeof(tmp));\n   len = strlen(tmp);\n   if (tmp[len - 1] == '/')\n     tmp[len - 1] = 0;\n@@ -702,9 +700,9 @@ static void uv__ahafs_event(uv_loop_t* loop, uv__io_t* event_watch, unsigned int\n     else\n       p++;\n   }\n-  strncpy(fname, p, sizeof(fname) - 1);\n-  /* Just in case */\n-  fname[sizeof(fname) - 1] = '\\0';\n+\n+  /* TODO(bnoordhuis) Check uv__strscpy() return value. */\n+  uv__strscpy(fname, p, sizeof(fname));\n \n   handle->cb(handle, fname, events, 0);\n }\n@@ -735,7 +733,8 @@ int uv_fs_event_start(uv_fs_event_t* handle,\n   /* Figure out whether filename is absolute or not */\n   if (filename[0] == '/') {\n     /* We have absolute pathname */\n-    snprintf(absolute_path, sizeof(absolute_path), \"%s\", filename);\n+    /* TODO(bnoordhuis) Check uv__strscpy() return value. */\n+    uv__strscpy(absolute_path, filename, sizeof(absolute_path));\n   } else {\n     /* We have a relative pathname, compose the absolute pathname */\n     snprintf(cwd, sizeof(cwd), \"/proc/%lu/cwd\", (unsigned long) getpid());\n@@ -986,7 +985,8 @@ int uv_cpu_info(uv_cpu_info_t** cpu_infos, int* count) {\n     return UV_ENOMEM;\n   }\n \n-  strcpy(cpu_id.name, FIRST_CPU);\n+  /* TODO(bnoordhuis) Check uv__strscpy() return value. */\n+  uv__strscpy(cpu_id.name, FIRST_CPU, sizeof(cpu_id.name));\n   result = perfstat_cpu(&cpu_id, ps_cpus, sizeof(perfstat_cpu_t), ncpus);\n   if (result == -1) {\n     uv__free(ps_cpus);"
        },
        {
            "sha": "e505bdd23f86360a8cb711fef948206be3fbde25",
            "filename": "deps/uv/src/unix/darwin-proctitle.c",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fdarwin-proctitle.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fdarwin-proctitle.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Fdarwin-proctitle.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -192,8 +192,7 @@ void uv__set_process_title(const char* title) {\n \n   if (dynamic_pthread_setname_np != NULL) {\n     char namebuf[64];  /* MAXTHREADNAMESIZE */\n-    strncpy(namebuf, title, sizeof(namebuf) - 1);\n-    namebuf[sizeof(namebuf) - 1] = '\\0';\n+    uv__strscpy(namebuf, title, sizeof(namebuf));\n     dynamic_pthread_setname_np(namebuf);\n   }\n }"
        },
        {
            "sha": "d22c70f0c293d44d4901db41d590601ae3b36f2c",
            "filename": "deps/uv/src/unix/fs.c",
            "status": "modified",
            "additions": 31,
            "deletions": 11,
            "changes": 42,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Ffs.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Ffs.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Ffs.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -61,6 +61,7 @@\n \n #if defined(__APPLE__)\n # include <copyfile.h>\n+# include <sys/sysctl.h>\n #elif defined(__linux__) && !defined(FICLONE)\n # include <sys/ioctl.h>\n # define FICLONE _IOW(0x94, 9, int)\n@@ -70,6 +71,10 @@\n # include <utime.h>\n #endif\n \n+#if defined(_AIX) && _XOPEN_SOURCE <= 600\n+extern char *mkdtemp(char *template); /* See issue #740 on AIX < 7 */\n+#endif\n+\n #define INIT(subtype)                                                         \\\n   do {                                                                        \\\n     if (req == NULL)                                                          \\\n@@ -722,7 +727,7 @@ static ssize_t uv__fs_utime(uv_fs_t* req) {\n   atr.att_atimechg = 1;\n   atr.att_mtime = req->mtime;\n   atr.att_atime = req->atime;\n-  return __lchattr(req->path, &atr, sizeof(atr));\n+  return __lchattr((char*) req->path, &atr, sizeof(atr));\n #else\n   errno = ENOSYS;\n   return -1;\n@@ -793,26 +798,41 @@ static ssize_t uv__fs_write(uv_fs_t* req) {\n static ssize_t uv__fs_copyfile(uv_fs_t* req) {\n #if defined(__APPLE__) && !TARGET_OS_IPHONE\n   /* On macOS, use the native copyfile(3). */\n+  static int can_clone;\n   copyfile_flags_t flags;\n+  char buf[64];\n+  size_t len;\n+  int major;\n \n   flags = COPYFILE_ALL;\n \n   if (req->flags & UV_FS_COPYFILE_EXCL)\n     flags |= COPYFILE_EXCL;\n \n-#ifdef COPYFILE_CLONE\n-  if (req->flags & UV_FS_COPYFILE_FICLONE)\n-    flags |= COPYFILE_CLONE;\n-#endif\n-\n+  /* Check OS version. Cloning is only supported on macOS >= 10.12. */\n   if (req->flags & UV_FS_COPYFILE_FICLONE_FORCE) {\n-#ifdef COPYFILE_CLONE_FORCE\n-    flags |= COPYFILE_CLONE_FORCE;\n-#else\n-    return UV_ENOSYS;\n-#endif\n+    if (can_clone == 0) {\n+      len = sizeof(buf);\n+      if (sysctlbyname(\"kern.osrelease\", buf, &len, NULL, 0))\n+        return UV__ERR(errno);\n+\n+      if (1 != sscanf(buf, \"%d\", &major))\n+        abort();\n+\n+      can_clone = -1 + 2 * (major >= 16);  /* macOS >= 10.12 */\n+    }\n+\n+    if (can_clone < 0)\n+      return UV_ENOSYS;\n   }\n \n+  /* copyfile() simply ignores COPYFILE_CLONE if it's not supported. */\n+  if (req->flags & UV_FS_COPYFILE_FICLONE)\n+    flags |= 1 << 24;  /* COPYFILE_CLONE */\n+\n+  if (req->flags & UV_FS_COPYFILE_FICLONE_FORCE)\n+    flags |= 1 << 25;  /* COPYFILE_CLONE_FORCE */\n+\n   return copyfile(req->path, req->new_path, NULL, flags);\n #else\n   uv_fs_t fs_req;"
        },
        {
            "sha": "3341b94e1f26fd4c96450f8df50ce6cbc8f99e19",
            "filename": "deps/uv/src/unix/linux-core.c",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Flinux-core.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Flinux-core.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Flinux-core.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -170,6 +170,7 @@ int uv__io_check_fd(uv_loop_t* loop, int fd) {\n   struct epoll_event e;\n   int rc;\n \n+  memset(&e, 0, sizeof(e));\n   e.events = POLLIN;\n   e.data.fd = -1;\n \n@@ -218,6 +219,8 @@ void uv__io_poll(uv_loop_t* loop, int timeout) {\n     return;\n   }\n \n+  memset(&e, 0, sizeof(e));\n+\n   while (!QUEUE_EMPTY(&loop->watcher_queue)) {\n     q = QUEUE_HEAD(&loop->watcher_queue);\n     QUEUE_REMOVE(q);"
        },
        {
            "sha": "9b26202fb3366d78dd0010ae974a12c81b03eb55",
            "filename": "deps/uv/src/unix/linux-inotify.c",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Flinux-inotify.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Flinux-inotify.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Flinux-inotify.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -278,6 +278,7 @@ int uv_fs_event_start(uv_fs_event_t* handle,\n                       const char* path,\n                       unsigned int flags) {\n   struct watcher_list* w;\n+  size_t len;\n   int events;\n   int err;\n   int wd;\n@@ -306,12 +307,13 @@ int uv_fs_event_start(uv_fs_event_t* handle,\n   if (w)\n     goto no_insert;\n \n-  w = uv__malloc(sizeof(*w) + strlen(path) + 1);\n+  len = strlen(path) + 1;\n+  w = uv__malloc(sizeof(*w) + len);\n   if (w == NULL)\n     return UV_ENOMEM;\n \n   w->wd = wd;\n-  w->path = strcpy((char*)(w + 1), path);\n+  w->path = memcpy(w + 1, path, len);\n   QUEUE_INIT(&w->watchers);\n   w->iterating = 0;\n   RB_INSERT(watcher_root, CAST(&handle->loop->inotify_watchers), w);"
        },
        {
            "sha": "a2a4e521542af3abd62a2e17b037085dae568b6f",
            "filename": "deps/uv/src/unix/netbsd.c",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fnetbsd.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fnetbsd.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Fnetbsd.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -87,7 +87,8 @@ int uv_exepath(char* buffer, size_t* size) {\n   /* Copy string from the intermediate buffer to outer one with appropriate\n    * length.\n    */\n-  strlcpy(buffer, int_buf, *size);\n+  /* TODO(bnoordhuis) Check uv__strscpy() return value. */\n+  uv__strscpy(buffer, int_buf, *size);\n \n   /* Set new size. */\n   *size = strlen(buffer);"
        },
        {
            "sha": "dc146e3110810811407145ce6a4499c2be1fd18a",
            "filename": "deps/uv/src/unix/os390.c",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fos390.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fos390.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Fos390.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -229,15 +229,15 @@ static int getexe(const int pid, char* buf, size_t len) {\n   assert(((Output_buf.Output_data.offsetPath >>24) & 0xFF) == 'A');\n \n   /* Get the offset from the lowest 3 bytes */\n-  Output_path = (char*)(&Output_buf) +\n-                (Output_buf.Output_data.offsetPath & 0x00FFFFFF);\n+  Output_path = (struct Output_path_type*) ((char*) (&Output_buf) +\n+      (Output_buf.Output_data.offsetPath & 0x00FFFFFF));\n \n   if (Output_path->len >= len) {\n     errno = ENOBUFS;\n     return -1;\n   }\n \n-  strncpy(buf, Output_path->path, len);\n+  uv__strscpy(buf, Output_path->path, len);\n \n   return 0;\n }"
        },
        {
            "sha": "d3b554cfc3d8968eebc13c7c65e9f86cf8e49a2f",
            "filename": "deps/uv/src/unix/pipe.c",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fpipe.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fpipe.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Fpipe.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -66,8 +66,7 @@ int uv_pipe_bind(uv_pipe_t* handle, const char* name) {\n   sockfd = err;\n \n   memset(&saddr, 0, sizeof saddr);\n-  strncpy(saddr.sun_path, pipe_fname, sizeof(saddr.sun_path) - 1);\n-  saddr.sun_path[sizeof(saddr.sun_path) - 1] = '\\0';\n+  uv__strscpy(saddr.sun_path, pipe_fname, sizeof(saddr.sun_path));\n   saddr.sun_family = AF_UNIX;\n \n   if (bind(sockfd, (struct sockaddr*)&saddr, sizeof saddr)) {\n@@ -186,8 +185,7 @@ void uv_pipe_connect(uv_connect_t* req,\n   }\n \n   memset(&saddr, 0, sizeof saddr);\n-  strncpy(saddr.sun_path, name, sizeof(saddr.sun_path) - 1);\n-  saddr.sun_path[sizeof(saddr.sun_path) - 1] = '\\0';\n+  uv__strscpy(saddr.sun_path, name, sizeof(saddr.sun_path));\n   saddr.sun_family = AF_UNIX;\n \n   do {"
        },
        {
            "sha": "2552a019eb474d2a8fb155d82a1c7b09b833b8ef",
            "filename": "deps/uv/src/unix/sunos.c",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fsunos.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Funix%2Fsunos.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Funix%2Fsunos.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -707,13 +707,14 @@ static int uv__set_phys_addr(uv_interface_address_t* address,\n \n   struct sockaddr_dl* sa_addr;\n   int sockfd;\n-  int i;\n+  size_t i;\n   struct arpreq arpreq;\n \n   /* This appears to only work as root */\n   sa_addr = (struct sockaddr_dl*)(ent->ifa_addr);\n   memcpy(address->phys_addr, LLADDR(sa_addr), sizeof(address->phys_addr));\n   for (i = 0; i < sizeof(address->phys_addr); i++) {\n+    /* Check that all bytes of phys_addr are zero. */\n     if (address->phys_addr[i] != 0)\n       return 0;\n   }"
        },
        {
            "sha": "952bde080c286451e532f0ec91c8d936c2d7a175",
            "filename": "deps/uv/src/uv-common.c",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fuv-common.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fuv-common.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fuv-common.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -162,7 +162,7 @@ static const char* uv__unknown_err_code(int err) {\n \n #define UV_ERR_NAME_GEN_R(name, _) \\\n case UV_## name: \\\n-  snprintf(buf, buflen, \"%s\", #name); break;\n+  uv__strscpy(buf, #name, buflen); break;\n char* uv_err_name_r(int err, char* buf, size_t buflen) {\n   switch (err) {\n     UV_ERRNO_MAP(UV_ERR_NAME_GEN_R)"
        },
        {
            "sha": "15ac4d02c1332bcf2c8ce49f99d38c8cc72ccea2",
            "filename": "deps/uv/src/uv-common.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fuv-common.h",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fuv-common.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fuv-common.h?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -40,6 +40,7 @@\n #include \"uv.h\"\n #include \"uv/tree.h\"\n #include \"queue.h\"\n+#include \"strscpy.h\"\n \n #if EDOM > 0\n # define UV__ERR(x) (-(x))"
        },
        {
            "sha": "b7fcd4a7fd0ae4a70d3d097525d2824d81caab82",
            "filename": "deps/uv/src/uv-data-getter-setters.c",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fuv-data-getter-setters.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fuv-data-getter-setters.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fuv-data-getter-setters.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -3,11 +3,11 @@\n const char* uv_handle_type_name(uv_handle_type type) {\n   switch (type) {\n #define XX(uc,lc) case UV_##uc: return #lc;\n-    UV_HANDLE_TYPE_MAP(XX)\n+  UV_HANDLE_TYPE_MAP(XX)\n #undef XX\n-    case UV_FILE: return \"file\";\n-    case UV_HANDLE_TYPE_MAX:\n-    case UV_UNKNOWN_HANDLE: return NULL;\n+  case UV_FILE: return \"file\";\n+  case UV_HANDLE_TYPE_MAX:\n+  case UV_UNKNOWN_HANDLE: return NULL;\n   }\n   return NULL;\n }\n@@ -31,10 +31,12 @@ void uv_handle_set_data(uv_handle_t* handle, void* data) {\n const char* uv_req_type_name(uv_req_type type) {\n   switch (type) {\n #define XX(uc,lc) case UV_##uc: return #lc;\n-    UV_REQ_TYPE_MAP(XX)\n+  UV_REQ_TYPE_MAP(XX)\n #undef XX\n-    case UV_REQ_TYPE_MAX:\n-    case UV_UNKNOWN_REQ: return NULL;\n+  case UV_REQ_TYPE_MAX:\n+  case UV_UNKNOWN_REQ:\n+  default: /* UV_REQ_TYPE_PRIVATE */\n+     return NULL;\n   }\n   return NULL;\n }"
        },
        {
            "sha": "676be4dc7b5b8a05d19656b7648ac71b841ec7bb",
            "filename": "deps/uv/src/win/dl.c",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fdl.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fdl.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fwin%2Fdl.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -64,7 +64,8 @@ void uv_dlclose(uv_lib_t* lib) {\n \n \n int uv_dlsym(uv_lib_t* lib, const char* name, void** ptr) {\n-  *ptr = (void*) GetProcAddress(lib->handle, name);\n+  /* Cast though integer to suppress pedantic warning about forbidden cast. */\n+  *ptr = (void*)(uintptr_t) GetProcAddress(lib->handle, name);\n   return uv__dlerror(lib, \"\", *ptr ? 0 : GetLastError());\n }\n \n@@ -75,8 +76,9 @@ const char* uv_dlerror(const uv_lib_t* lib) {\n \n \n static void uv__format_fallback_error(uv_lib_t* lib, int errorno){\n-  DWORD_PTR args[1] = { (DWORD_PTR) errorno };\n-  LPSTR fallback_error = \"error: %1!d!\";\n+  static const CHAR fallback_error[] = \"error: %1!d!\";\n+  DWORD_PTR args[1];\n+  args[0] = (DWORD_PTR) errorno;\n \n   FormatMessageA(FORMAT_MESSAGE_FROM_STRING |\n                  FORMAT_MESSAGE_ARGUMENT_ARRAY |"
        },
        {
            "sha": "1244967a78dacb24f4fc3cadcd9abd1a6941109b",
            "filename": "deps/uv/src/win/fs-event.c",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Ffs-event.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Ffs-event.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fwin%2Ffs-event.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -215,11 +215,11 @@ int uv_fs_event_start(uv_fs_event_t* handle,\n         uv__free(long_path);\n         long_path = NULL;\n       }\n-    }\n \n-    if (long_path) {\n-      uv__free(pathw);\n-      pathw = long_path;\n+      if (long_path) {\n+        uv__free(pathw);\n+        pathw = long_path;\n+      }\n     }\n \n     dir_to_watch = pathw;"
        },
        {
            "sha": "0716ecca1221e6122701712d9abab6e884adbeca",
            "filename": "deps/uv/src/win/fs.c",
            "status": "modified",
            "additions": 39,
            "deletions": 10,
            "changes": 49,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Ffs.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Ffs.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fwin%2Ffs.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -98,14 +98,17 @@\n     return;                                                                 \\\n   }\n \n+#define MILLIONu (1000U * 1000U)\n+#define BILLIONu (1000U * 1000U * 1000U)\n+\n #define FILETIME_TO_UINT(filetime)                                          \\\n-   (*((uint64_t*) &(filetime)) - 116444736000000000ULL)\n+   (*((uint64_t*) &(filetime)) - (uint64_t) 116444736 * BILLIONu)\n \n #define FILETIME_TO_TIME_T(filetime)                                        \\\n-   (FILETIME_TO_UINT(filetime) / 10000000ULL)\n+   (FILETIME_TO_UINT(filetime) / (10u * MILLIONu))\n \n #define FILETIME_TO_TIME_NS(filetime, secs)                                 \\\n-   ((FILETIME_TO_UINT(filetime) - (secs * 10000000ULL)) * 100)\n+   ((FILETIME_TO_UINT(filetime) - (secs * (uint64_t) 10 * MILLIONu)) * 100U)\n \n #define FILETIME_TO_TIMESPEC(ts, filetime)                                  \\\n    do {                                                                     \\\n@@ -115,8 +118,8 @@\n \n #define TIME_T_TO_FILETIME(time, filetime_ptr)                              \\\n   do {                                                                      \\\n-    uint64_t bigtime = ((uint64_t) ((time) * 10000000ULL)) +                \\\n-                                  116444736000000000ULL;                    \\\n+    uint64_t bigtime = ((uint64_t) ((time) * (uint64_t) 10 * MILLIONu)) +   \\\n+                       (uint64_t) 116444736 * BILLIONu;                     \\\n     (filetime_ptr)->dwLowDateTime = bigtime & 0xFFFFFFFF;                   \\\n     (filetime_ptr)->dwHighDateTime = bigtime >> 32;                         \\\n   } while(0)\n@@ -507,6 +510,33 @@ void fs__open(uv_fs_t* req) {\n   }\n \n   if (flags & UV_FS_O_DIRECT) {\n+    /*\n+     * FILE_APPEND_DATA and FILE_FLAG_NO_BUFFERING are mutually exclusive.\n+     * Windows returns 87, ERROR_INVALID_PARAMETER if these are combined.\n+     *\n+     * FILE_APPEND_DATA is included in FILE_GENERIC_WRITE:\n+     *\n+     * FILE_GENERIC_WRITE = STANDARD_RIGHTS_WRITE |\n+     *                      FILE_WRITE_DATA |\n+     *                      FILE_WRITE_ATTRIBUTES |\n+     *                      FILE_WRITE_EA |\n+     *                      FILE_APPEND_DATA |\n+     *                      SYNCHRONIZE\n+     *\n+     * Note: Appends are also permitted by FILE_WRITE_DATA.\n+     *\n+     * In order for direct writes and direct appends to succeed, we therefore\n+     * exclude FILE_APPEND_DATA if FILE_WRITE_DATA is specified, and otherwise\n+     * fail if the user's sole permission is a direct append, since this\n+     * particular combination is invalid.\n+     */\n+    if (access & FILE_APPEND_DATA) {\n+      if (access & FILE_WRITE_DATA) {\n+        access &= ~FILE_APPEND_DATA;\n+      } else {\n+        goto einval;\n+      }\n+    }\n     attributes |= FILE_FLAG_NO_BUFFERING;\n   }\n \n@@ -788,9 +818,8 @@ void fs__unlink(uv_fs_t* req) {\n     /* Remove read-only attribute */\n     FILE_BASIC_INFORMATION basic = { 0 };\n \n-    basic.FileAttributes = info.dwFileAttributes\n-                           & ~(FILE_ATTRIBUTE_READONLY)\n-                           | FILE_ATTRIBUTE_ARCHIVE;\n+    basic.FileAttributes = (info.dwFileAttributes & ~FILE_ATTRIBUTE_READONLY) |\n+                           FILE_ATTRIBUTE_ARCHIVE;\n \n     status = pNtSetInformationFile(handle,\n                                    &iosb,\n@@ -1201,7 +1230,7 @@ INLINE static int fs__stat_handle(HANDLE handle, uv_stat_t* statbuf,\n \n   /* st_blocks contains the on-disk allocation size in 512-byte units. */\n   statbuf->st_blocks =\n-      file_info.StandardInformation.AllocationSize.QuadPart >> 9ULL;\n+      (uint64_t) file_info.StandardInformation.AllocationSize.QuadPart >> 9;\n \n   statbuf->st_nlink = file_info.StandardInformation.NumberOfLinks;\n \n@@ -1958,7 +1987,7 @@ static void fs__readlink(uv_fs_t* req) {\n }\n \n \n-static size_t fs__realpath_handle(HANDLE handle, char** realpath_ptr) {\n+static ssize_t fs__realpath_handle(HANDLE handle, char** realpath_ptr) {\n   int r;\n   DWORD w_realpath_len;\n   WCHAR* w_realpath_ptr = NULL;"
        },
        {
            "sha": "e303cc8a2331e7dadd940e7494aee3628d6b0bc8",
            "filename": "deps/uv/src/win/pipe.c",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fpipe.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fpipe.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fwin%2Fpipe.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -1541,7 +1541,7 @@ int uv__pipe_write_ipc(uv_loop_t* loop,\n         frame_header.flags |= UV__IPC_FRAME_HAS_SOCKET_XFER;\n         break;\n       default:\n-        assert(0);  // Unreachable.\n+        assert(0);  /* Unreachable. */\n     }\n     /* Add xfer info buffer. */\n     bufs[buf_index++] = uv_buf_init((char*) &xfer_info, sizeof xfer_info);\n@@ -2141,7 +2141,7 @@ int uv_pipe_open(uv_pipe_t* pipe, uv_file file) {\n   if (pipe->ipc) {\n     assert(!(pipe->flags & UV_HANDLE_NON_OVERLAPPED_PIPE));\n     pipe->pipe.conn.ipc_remote_pid = uv_os_getppid();\n-    assert(pipe->pipe.conn.ipc_remote_pid != -1);\n+    assert(pipe->pipe.conn.ipc_remote_pid != (DWORD) -1);\n   }\n   return 0;\n }\n@@ -2312,7 +2312,7 @@ uv_handle_type uv_pipe_pending_type(uv_pipe_t* handle) {\n }\n \n int uv_pipe_chmod(uv_pipe_t* handle, int mode) {\n-  SID_IDENTIFIER_AUTHORITY sid_world = SECURITY_WORLD_SID_AUTHORITY;\n+  SID_IDENTIFIER_AUTHORITY sid_world = { SECURITY_WORLD_SID_AUTHORITY };\n   PACL old_dacl, new_dacl;\n   PSECURITY_DESCRIPTOR sd;\n   EXPLICIT_ACCESS ea;"
        },
        {
            "sha": "3c6678600e40cc121b64ed69de2bf1c5aab63d6f",
            "filename": "deps/uv/src/win/poll.c",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fpoll.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fpoll.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fwin%2Fpoll.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -75,7 +75,7 @@ static AFD_POLL_INFO* uv__get_afd_poll_info_dummy(void) {\n static void uv__fast_poll_submit_poll_req(uv_loop_t* loop, uv_poll_t* handle) {\n   uv_req_t* req;\n   AFD_POLL_INFO* afd_poll_info;\n-  DWORD result;\n+  int result;\n \n   /* Find a yet unsubmitted req to submit. */\n   if (handle->submitted_events_1 == 0) {\n@@ -136,7 +136,7 @@ static void uv__fast_poll_submit_poll_req(uv_loop_t* loop, uv_poll_t* handle) {\n \n static int uv__fast_poll_cancel_poll_req(uv_loop_t* loop, uv_poll_t* handle) {\n   AFD_POLL_INFO afd_poll_info;\n-  DWORD result;\n+  int result;\n \n   afd_poll_info.Exclusive = TRUE;\n   afd_poll_info.NumberOfHandles = 1;"
        },
        {
            "sha": "f9c53de0af007961b0d269651d368fd83717976a",
            "filename": "deps/uv/src/win/process.c",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fprocess.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fprocess.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fwin%2Fprocess.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -739,7 +739,7 @@ int make_program_env(char* env_block[], WCHAR** dst_ptr) {\n     }\n   }\n   *ptr_copy = NULL;\n-  assert(env_len == ptr - dst_copy);\n+  assert(env_len == (size_t) (ptr - dst_copy));\n \n   /* sort our (UTF-16) copy */\n   qsort(env_copy, env_block_count-1, sizeof(wchar_t*), qsort_wcscmp);\n@@ -799,7 +799,7 @@ int make_program_env(char* env_block[], WCHAR** dst_ptr) {\n         var_size = GetEnvironmentVariableW(required_vars[i].wide,\n                                            ptr,\n                                            (int) (env_len - (ptr - dst)));\n-        if (var_size != len-1) { /* race condition? */\n+        if (var_size != (DWORD) (len - 1)) { /* TODO: handle race condition? */\n           uv_fatal_error(GetLastError(), \"GetEnvironmentVariableW\");\n         }\n       }\n@@ -815,7 +815,7 @@ int make_program_env(char* env_block[], WCHAR** dst_ptr) {\n   }\n \n   /* Terminate with an extra NULL. */\n-  assert(env_len == (ptr - dst));\n+  assert(env_len == (size_t) (ptr - dst));\n   *ptr = L'\\0';\n \n   uv__free(dst_copy);"
        },
        {
            "sha": "45bbe9689aea1d2ff6dc044d09156ef5b72581a8",
            "filename": "deps/uv/src/win/tty.c",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Ftty.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Ftty.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fwin%2Ftty.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -791,8 +791,9 @@ void uv_process_tty_read_raw_req(uv_loop_t* loop, uv_tty_t* handle,\n         if (KEV.uChar.UnicodeChar >= 0xDC00 &&\n             KEV.uChar.UnicodeChar < 0xE000) {\n           /* UTF-16 surrogate pair */\n-          WCHAR utf16_buffer[2] = { handle->tty.rd.last_utf16_high_surrogate,\n-                                    KEV.uChar.UnicodeChar};\n+          WCHAR utf16_buffer[2];\n+          utf16_buffer[0] = handle->tty.rd.last_utf16_high_surrogate;\n+          utf16_buffer[1] = KEV.uChar.UnicodeChar;\n           char_len = WideCharToMultiByte(CP_UTF8,\n                                          0,\n                                          utf16_buffer,"
        },
        {
            "sha": "2a8adf6b262463da89ca28d4d7838074e9538f06",
            "filename": "deps/uv/src/win/winapi.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fwinapi.h",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fsrc%2Fwin%2Fwinapi.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fsrc%2Fwin%2Fwinapi.h?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -4109,6 +4109,9 @@\n #endif\n \n /* from winternl.h */\n+#if !defined(__UNICODE_STRING_DEFINED) && defined(__MINGW32_)\n+#define __UNICODE_STRING_DEFINED\n+#endif\n typedef struct _UNICODE_STRING {\n   USHORT Length;\n   USHORT MaximumLength;"
        },
        {
            "sha": "2a699f46dcb0ff3a9209afab291cd7ce4c432e3f",
            "filename": "deps/uv/test/run-tests.c",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Frun-tests.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Frun-tests.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Frun-tests.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -142,20 +142,20 @@ static int maybe_run_test(int argc, char **argv) {\n   if (strcmp(argv[1], \"spawn_helper5\") == 0) {\n     const char out[] = \"fourth stdio!\\n\";\n     notify_parent_process();\n+    {\n #ifdef _WIN32\n-    DWORD bytes;\n-    WriteFile((HANDLE) _get_osfhandle(3), out, sizeof(out) - 1, &bytes, NULL);\n+      DWORD bytes;\n+      WriteFile((HANDLE) _get_osfhandle(3), out, sizeof(out) - 1, &bytes, NULL);\n #else\n-    {\n       ssize_t r;\n \n       do\n         r = write(3, out, sizeof(out) - 1);\n       while (r == -1 && errno == EINTR);\n \n       fsync(3);\n-    }\n #endif\n+    }\n     return 1;\n   }\n "
        },
        {
            "sha": "f60c23df3ebf1e65715cb2c222efb691e0baea2d",
            "filename": "deps/uv/test/runner-win.c",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Frunner-win.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Frunner-win.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Frunner-win.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -194,7 +194,7 @@ int process_wait(process_info_t *vec, int n, int timeout) {\n \n   result = WaitForMultipleObjects(n, handles, TRUE, timeout_api);\n \n-  if (result >= WAIT_OBJECT_0 && result < WAIT_OBJECT_0 + n) {\n+  if (result < WAIT_OBJECT_0 + n) {\n     /* All processes are terminated. */\n     return 0;\n   }\n@@ -268,7 +268,8 @@ int process_read_last_line(process_info_t *p,\n   if (!ReadFile(p->stdio_out, buffer, buffer_len - 1, &read, &overlapped))\n     return -1;\n \n-  for (start = read - 1; start >= 0; start--) {\n+  start = read;\n+  while (start-- > 0) {\n     if (buffer[start] == '\\n' || buffer[start] == '\\r')\n       break;\n   }\n@@ -308,7 +309,7 @@ void process_cleanup(process_info_t *p) {\n }\n \n \n-static int clear_line() {\n+static int clear_line(void) {\n   HANDLE handle;\n   CONSOLE_SCREEN_BUFFER_INFO info;\n   COORD coord;"
        },
        {
            "sha": "975eed793104c202230781f1ffea6aa0c11f907e",
            "filename": "deps/uv/test/runner-win.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Frunner-win.h",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Frunner-win.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Frunner-win.h?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -20,7 +20,9 @@\n  */\n \n /* Don't complain about write(), fileno() etc. being deprecated. */\n+#ifdef _MSC_VER\n #pragma warning(disable : 4996)\n+#endif\n \n \n #include <winsock2.h>"
        },
        {
            "sha": "2ed9a10032dfe6f4ae1850704e92826a335bf358",
            "filename": "deps/uv/test/test-close-fd.c",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-close-fd.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-close-fd.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-close-fd.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -73,4 +73,8 @@ TEST_IMPL(close_fd) {\n   return 0;\n }\n \n-#endif  /* !defined(_WIN32) */\n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n+\n+#endif /* !_WIN32 */"
        },
        {
            "sha": "32abccc2e7602e504f2e56506a84ce1f66760372",
            "filename": "deps/uv/test/test-condvar.c",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-condvar.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-condvar.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-condvar.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -235,7 +235,7 @@ TEST_IMPL(condvar_5) {\n   uint64_t elapsed;\n   uint64_t timeout;\n \n-  timeout = 100 * 1e6; /* 100 ms in ns */\n+  timeout = 100 * 1000 * 1000; /* 100 ms in ns */\n \n   /* Mostly irrelevant. We need cond and mutex initialized. */\n   worker_config_init(&wc, 0, NULL, NULL);"
        },
        {
            "sha": "bc1fce5f5591f0a62a2ef7cf41dca9408e258909",
            "filename": "deps/uv/test/test-emfile.c",
            "status": "modified",
            "additions": 10,
            "deletions": 6,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-emfile.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-emfile.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-emfile.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -38,18 +38,18 @@ static uv_tcp_t client_handle;\n \n \n TEST_IMPL(emfile) {\n+  struct sockaddr_in addr;\n+  struct rlimit limits;\n+  uv_connect_t connect_req;\n+  uv_loop_t* loop;\n+  int first_fd;\n #if defined(_AIX) || defined(__MVS__)\n   /* On AIX, if a 'accept' call fails ECONNRESET is set on the socket\n    * which causes uv__emfile_trick to not work as intended and this test\n    * to fail.\n    */\n   RETURN_SKIP(\"uv__emfile_trick does not work on this OS\");\n #endif\n-  struct sockaddr_in addr;\n-  struct rlimit limits;\n-  uv_connect_t connect_req;\n-  uv_loop_t* loop;\n-  int first_fd;\n \n   /* Lower the file descriptor limit and use up all fds save one. */\n   limits.rlim_cur = limits.rlim_max = maxfd + 1;\n@@ -114,4 +114,8 @@ static void connect_cb(uv_connect_t* req, int status) {\n   uv_close((uv_handle_t*) &client_handle, NULL);\n }\n \n-#endif  /* !defined(_WIN32) */\n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n+\n+#endif /* !_WIN32 */"
        },
        {
            "sha": "9e4684f0e15376c7bc41c77d61e0ebf8bef89556",
            "filename": "deps/uv/test/test-fork.c",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-fork.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-fork.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-fork.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -676,5 +676,8 @@ TEST_IMPL(fork_threadpool_queue_work_simple) {\n }\n #endif /* !__MVS__ */\n \n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n \n #endif /* !_WIN32 */"
        },
        {
            "sha": "5eed160de2e64b7db540dcf580369372d90ae5ab",
            "filename": "deps/uv/test/test-fs.c",
            "status": "modified",
            "additions": 51,
            "deletions": 5,
            "changes": 56,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-fs.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-fs.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-fs.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -154,7 +154,7 @@ int uv_test_getiovmax(void) {\n static unsigned REPARSE_TAG = 0x9913;\n static GUID REPARSE_GUID = {\n   0x1bf6205f, 0x46ae, 0x4527,\n-  0xb1, 0x0c, 0xc5, 0x09, 0xb7, 0x55, 0x22, 0x80 };\n+  { 0xb1, 0x0c, 0xc5, 0x09, 0xb7, 0x55, 0x22, 0x80 }};\n #endif\n \n static void check_permission(const char* filename, unsigned int mode) {\n@@ -2331,16 +2331,16 @@ TEST_IMPL(fs_stat_root) {\n \n \n TEST_IMPL(fs_futime) {\n-#if defined(_AIX) && !defined(_AIX71)\n-  RETURN_SKIP(\"futime is not implemented for AIX versions below 7.1\");\n-#else\n   utime_check_t checkme;\n   const char* path = \"test_file\";\n   double atime;\n   double mtime;\n   uv_file file;\n   uv_fs_t req;\n   int r;\n+#if defined(_AIX) && !defined(_AIX71)\n+  RETURN_SKIP(\"futime is not implemented for AIX versions below 7.1\");\n+#endif\n \n   /* Setup. */\n   loop = uv_default_loop();\n@@ -2402,7 +2402,6 @@ TEST_IMPL(fs_futime) {\n \n   MAKE_VALGRIND_HAPPY();\n   return 0;\n-#endif\n }\n \n \n@@ -3601,6 +3600,53 @@ TEST_IMPL(fs_exclusive_sharing_mode) {\n }\n #endif\n \n+#ifdef _WIN32\n+TEST_IMPL(fs_file_flag_no_buffering) {\n+  int r;\n+\n+  /* Setup. */\n+  unlink(\"test_file\");\n+\n+  ASSERT(UV_FS_O_APPEND > 0);\n+  ASSERT(UV_FS_O_CREAT > 0);\n+  ASSERT(UV_FS_O_DIRECT > 0);\n+  ASSERT(UV_FS_O_RDWR > 0);\n+\n+  /* FILE_APPEND_DATA must be excluded from FILE_GENERIC_WRITE: */\n+  r = uv_fs_open(NULL,\n+                 &open_req1,\n+                 \"test_file\",\n+                 UV_FS_O_RDWR | UV_FS_O_CREAT | UV_FS_O_DIRECT,\n+                 S_IWUSR | S_IRUSR,\n+                 NULL);\n+  ASSERT(r >= 0);\n+  ASSERT(open_req1.result >= 0);\n+  uv_fs_req_cleanup(&open_req1);\n+\n+  r = uv_fs_close(NULL, &close_req, open_req1.result, NULL);\n+  ASSERT(r == 0);\n+  ASSERT(close_req.result == 0);\n+  uv_fs_req_cleanup(&close_req);\n+\n+  /* FILE_APPEND_DATA and FILE_FLAG_NO_BUFFERING are mutually exclusive: */\n+  r = uv_fs_open(NULL,\n+                 &open_req2,\n+                 \"test_file\",\n+                 UV_FS_O_APPEND | UV_FS_O_DIRECT,\n+                 S_IWUSR | S_IRUSR,\n+                 NULL);\n+  ASSERT(r == UV_EINVAL);\n+  ASSERT(open_req2.result == UV_EINVAL);\n+  uv_fs_req_cleanup(&open_req2);\n+\n+  /* Cleanup */\n+  unlink(\"test_file\");\n+\n+  MAKE_VALGRIND_HAPPY();\n+  return 0;\n+}\n+#endif\n+\n #ifdef _WIN32\n int call_icacls(const char* command, ...) {\n     char icacls_command[1024];"
        },
        {
            "sha": "c72f36a694455d189fff70838f6a46c0ba3232b5",
            "filename": "deps/uv/test/test-ip4-addr.c",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-ip4-addr.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-ip4-addr.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-ip4-addr.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -27,8 +27,13 @@\n \n \n TEST_IMPL(ip4_addr) {\n-\n   struct sockaddr_in addr;\n+  char dst[16];\n+\n+  ASSERT(0 == uv_inet_ntop(AF_INET, \"\\xFF\\xFF\\xFF\\xFF\", dst, sizeof(dst)));\n+  ASSERT(0 == strcmp(dst, \"255.255.255.255\"));\n+  ASSERT(UV_ENOSPC == uv_inet_ntop(AF_INET, \"\\xFF\\xFF\\xFF\\xFF\",\n+                                   dst, sizeof(dst) - 1));\n \n   ASSERT(0 == uv_ip4_addr(\"127.0.0.1\", TEST_PORT, &addr));\n   ASSERT(0 == uv_ip4_addr(\"255.255.255.255\", TEST_PORT, &addr));"
        },
        {
            "sha": "bbf33a4854ed232eb69908dabc05493c92cee465",
            "filename": "deps/uv/test/test-ip6-addr.c",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-ip6-addr.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-ip6-addr.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-ip6-addr.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -83,7 +83,7 @@ TEST_IMPL(ip6_addr_link_local) {\n     ASSERT(0 == r);\n #ifdef _WIN32\n     /* On Windows, the interface identifier is the numeric string of the index. */\n-    ASSERT(strtol(interface_id, NULL, 10) == iface_index);\n+    ASSERT(strtoul(interface_id, NULL, 10) == iface_index);\n #else\n     /* On Unix/Linux, the interface identifier is the interface device name. */\n     ASSERT(0 == strcmp(device_name, interface_id));"
        },
        {
            "sha": "cc37bc039b15baace8150ee3433193550edad1cd",
            "filename": "deps/uv/test/test-list.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-list.h",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-list.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-list.h?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -349,9 +349,11 @@ TEST_DECLARE   (fs_null_req)\n TEST_DECLARE   (fs_read_dir)\n #ifdef _WIN32\n TEST_DECLARE   (fs_exclusive_sharing_mode)\n+TEST_DECLARE   (fs_file_flag_no_buffering)\n TEST_DECLARE   (fs_open_readonly_acl)\n TEST_DECLARE   (fs_fchmod_archive_readonly)\n #endif\n+TEST_DECLARE   (strscpy)\n TEST_DECLARE   (threadpool_queue_work_simple)\n TEST_DECLARE   (threadpool_queue_work_einval)\n TEST_DECLARE   (threadpool_multiple_event_loops)\n@@ -904,11 +906,13 @@ TASK_LIST_START\n   TEST_ENTRY  (fs_read_dir)\n #ifdef _WIN32\n   TEST_ENTRY  (fs_exclusive_sharing_mode)\n+  TEST_ENTRY  (fs_file_flag_no_buffering)\n   TEST_ENTRY  (fs_open_readonly_acl)\n   TEST_ENTRY  (fs_fchmod_archive_readonly)\n #endif\n   TEST_ENTRY  (get_osfhandle_valid_handle)\n   TEST_ENTRY  (open_osfhandle_valid_handle)\n+  TEST_ENTRY  (strscpy)\n   TEST_ENTRY  (threadpool_queue_work_simple)\n   TEST_ENTRY  (threadpool_queue_work_einval)\n   TEST_ENTRY  (threadpool_multiple_event_loops)"
        },
        {
            "sha": "126be2cc46f0e3dac1119d81943635ff885ab9ef",
            "filename": "deps/uv/test/test-pipe-close-stdout-read-stdin.c",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-pipe-close-stdout-read-stdin.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-pipe-close-stdout-read-stdin.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-pipe-close-stdout-read-stdin.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -105,4 +105,8 @@ TEST_IMPL(pipe_close_stdout_read_stdin) {\n   return 0;\n }\n \n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n+\n #endif /* ifndef _WIN32 */"
        },
        {
            "sha": "43ed119debfe691fe47598113612f75042082bae",
            "filename": "deps/uv/test/test-platform-output.c",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-platform-output.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-platform-output.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-platform-output.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -49,7 +49,7 @@ TEST_IMPL(platform_output) {\n   printf(\"uv_cwd: %s\\n\", buffer);\n \n   err = uv_resident_set_memory(&rss);\n-#if defined(__CYGWIN__) || defined(__MSYS__)\n+#if defined(__MSYS__)\n   ASSERT(err == UV_ENOSYS);\n #else\n   ASSERT(err == 0);"
        },
        {
            "sha": "3393820fc40d77c1ba60c97d0e791d2e42bdfeec",
            "filename": "deps/uv/test/test-poll-close-doesnt-corrupt-stack.c",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-poll-close-doesnt-corrupt-stack.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-poll-close-doesnt-corrupt-stack.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-poll-close-doesnt-corrupt-stack.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -49,7 +49,7 @@ static void poll_cb(uv_poll_t* h, int status, int events) {\n }\n \n \n-static void NO_INLINE close_socket_and_verify_stack() {\n+static void NO_INLINE close_socket_and_verify_stack(void) {\n   const uint32_t MARKER = 0xDEADBEEF;\n   const int VERIFY_AFTER = 10; /* ms */\n   int r;"
        },
        {
            "sha": "77ffe31e962f10a18a41ab73a7129f840ada3dc3",
            "filename": "deps/uv/test/test-poll-oob.c",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-poll-oob.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-poll-oob.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-poll-oob.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -202,4 +202,9 @@ TEST_IMPL(poll_oob) {\n   MAKE_VALGRIND_HAPPY();\n   return 0;\n }\n+\n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n+\n #endif"
        },
        {
            "sha": "19098eda0c40195960299a72b938c1c84aba82f3",
            "filename": "deps/uv/test/test-process-title-threadsafe.c",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-process-title-threadsafe.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-process-title-threadsafe.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-process-title-threadsafe.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -70,7 +70,7 @@ TEST_IMPL(process_title_threadsafe) {\n #if defined(__sun) || defined(__CYGWIN__) || defined(__MSYS__) || \\\n     defined(__MVS__)\n   RETURN_SKIP(\"uv_(get|set)_process_title is not implemented.\");\n-#else\n+#endif\n \n   ASSERT(0 == uv_set_process_title(titles[0]));\n   ASSERT(0 == uv_thread_create(&getter_thread, getter_thread_body, NULL));\n@@ -82,5 +82,4 @@ TEST_IMPL(process_title_threadsafe) {\n     ASSERT(0 == uv_thread_join(&setter_threads[i]));\n \n   return 0;\n-#endif\n }"
        },
        {
            "sha": "efd48142b707bf55892d9bf3057f9faeed4186e1",
            "filename": "deps/uv/test/test-process-title.c",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-process-title.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-process-title.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-process-title.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -62,7 +62,8 @@ static void uv_get_process_title_edge_cases(void) {\n TEST_IMPL(process_title) {\n #if defined(__sun) || defined(__CYGWIN__) || defined(__MSYS__)\n   RETURN_SKIP(\"uv_(get|set)_process_title is not implemented.\");\n-#else\n+#endif\n+\n   /* Check for format string vulnerabilities. */\n   set_title(\"%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s\");\n   set_title(\"new title\");\n@@ -71,5 +72,4 @@ TEST_IMPL(process_title) {\n   uv_get_process_title_edge_cases();\n \n   return 0;\n-#endif\n }"
        },
        {
            "sha": "4281d23d7223abb60a8e593585beedd33d72b52e",
            "filename": "deps/uv/test/test-signal-multiple-loops.c",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-signal-multiple-loops.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-signal-multiple-loops.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-signal-multiple-loops.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -295,4 +295,8 @@ TEST_IMPL(signal_multiple_loops) {\n   return 0;\n }\n \n-#endif  /* !_WIN32 */\n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n+\n+#endif /* !_WIN32 */"
        },
        {
            "sha": "05c76f61452400c348f01de32e936e3c2f113d40",
            "filename": "deps/uv/test/test-spawn.c",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-spawn.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-spawn.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-spawn.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -49,7 +49,9 @@ static char exepath[1024];\n static size_t exepath_size = 1024;\n static char* args[5];\n static int no_term_signal;\n+#ifndef _WIN32\n static int timer_counter;\n+#endif\n static uv_tcp_t tcp_server;\n \n #define OUTPUT_SIZE 1024\n@@ -138,10 +140,12 @@ static void on_read(uv_stream_t* tcp, ssize_t nread, const uv_buf_t* buf) {\n }\n \n \n+#ifndef _WIN32\n static void on_read_once(uv_stream_t* tcp, ssize_t nread, const uv_buf_t* buf) {\n   uv_read_stop(tcp);\n   on_read(tcp, nread, buf);\n }\n+#endif\n \n \n static void write_cb(uv_write_t* req, int status) {\n@@ -173,9 +177,11 @@ static void timer_cb(uv_timer_t* handle) {\n }\n \n \n+#ifndef _WIN32\n static void timer_counter_cb(uv_timer_t* handle) {\n   ++timer_counter;\n }\n+#endif\n \n \n TEST_IMPL(spawn_fails) {\n@@ -1198,7 +1204,7 @@ TEST_IMPL(argument_escaping) {\n int make_program_env(char** env_block, WCHAR** dst_ptr);\n \n TEST_IMPL(environment_creation) {\n-  int i;\n+  size_t i;\n   char* environment[] = {\n     \"FOO=BAR\",\n     \"SYSTEM=ROOT\", /* substring of a supplied var name */"
        },
        {
            "sha": "4e7db6ffec8ef284ee7923dbf496f8ba1065d5aa",
            "filename": "deps/uv/test/test-strscpy.c",
            "status": "added",
            "additions": 53,
            "deletions": 0,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-strscpy.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-strscpy.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-strscpy.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -0,0 +1,53 @@\n+/* Copyright libuv project contributors. All rights reserved.\n+*\n+* Permission is hereby granted, free of charge, to any person obtaining a copy\n+* of this software and associated documentation files (the \"Software\"), to\n+* deal in the Software without restriction, including without limitation the\n+* rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n+* sell copies of the Software, and to permit persons to whom the Software is\n+* furnished to do so, subject to the following conditions:\n+*\n+* The above copyright notice and this permission notice shall be included in\n+* all copies or substantial portions of the Software.\n+*\n+* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n+* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n+* IN THE SOFTWARE.\n+*/\n+\n+#include \"uv.h\"\n+#include \"task.h\"\n+#include <string.h>\n+\n+#include \"../src/strscpy.h\"\n+#include \"../src/strscpy.c\"\n+\n+TEST_IMPL(strscpy) {\n+  char d[4];\n+\n+  ASSERT(0 == uv__strscpy(d, \"\", 0));\n+  ASSERT(0 == uv__strscpy(d, \"x\", 0));\n+\n+  memset(d, 0, sizeof(d));\n+  ASSERT(1 == uv__strscpy(d, \"x\", sizeof(d)));\n+  ASSERT(0 == memcmp(d, \"x\\0\\0\", sizeof(d)));\n+\n+  memset(d, 0, sizeof(d));\n+  ASSERT(2 == uv__strscpy(d, \"xy\", sizeof(d)));\n+  ASSERT(0 == memcmp(d, \"xy\\0\", sizeof(d)));\n+\n+  ASSERT(3 == uv__strscpy(d, \"xyz\", sizeof(d)));\n+  ASSERT(0 == memcmp(d, \"xyz\", sizeof(d)));\n+\n+  ASSERT(UV_E2BIG == uv__strscpy(d, \"xyzz\", sizeof(d)));\n+  ASSERT(0 == memcmp(d, \"xyz\", sizeof(d)));\n+\n+  ASSERT(UV_E2BIG == uv__strscpy(d, \"xyzzy\", sizeof(d)));\n+  ASSERT(0 == memcmp(d, \"xyz\", sizeof(d)));\n+\n+  return 0;\n+}"
        },
        {
            "sha": "624262bcfe9000ca90993f25be4e5b1cd02e0509",
            "filename": "deps/uv/test/test-tcp-close-accept.c",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-tcp-close-accept.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-tcp-close-accept.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-tcp-close-accept.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -191,4 +191,8 @@ TEST_IMPL(tcp_close_accept) {\n   return 0;\n }\n \n-#endif  /* !_WIN32 */\n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n+\n+#endif /* !_WIN32 */"
        },
        {
            "sha": "53f8231e83e497f6585479675e4971dd1cd11362",
            "filename": "deps/uv/test/test-tcp-oob.c",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-tcp-oob.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-tcp-oob.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-tcp-oob.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -138,4 +138,9 @@ TEST_IMPL(tcp_oob) {\n   MAKE_VALGRIND_HAPPY();\n   return 0;\n }\n-#endif\n+\n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n+\n+#endif /* !_WIN32 */"
        },
        {
            "sha": "8198e7e184d5e4905b07d8a22caeaf1f623ec34a",
            "filename": "deps/uv/test/test-tcp-write-after-connect.c",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-tcp-write-after-connect.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-tcp-write-after-connect.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-tcp-write-after-connect.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -65,4 +65,8 @@ TEST_IMPL(tcp_write_after_connect) {\n   return 0;\n }\n \n-#endif\n+#else\n+\n+typedef int file_has_no_tests; /* ISO C forbids an empty translation unit. */\n+\n+#endif /* !_WIN32 */"
        },
        {
            "sha": "688711e50821166d6d37b9e8d9c6f73ddc067232",
            "filename": "deps/uv/test/test-tty.c",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-tty.c",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest-tty.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest-tty.c?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -315,10 +315,8 @@ TEST_IMPL(tty_raw_cancel) {\n   int r;\n   int ttyin_fd;\n   uv_tty_t tty_in;\n-  uv_loop_t* loop;\n   HANDLE handle;\n \n-  loop = uv_default_loop();\n   /* Make sure we have an FD that refers to a tty */\n   handle = CreateFileA(\"conin$\",\n                        GENERIC_READ | GENERIC_WRITE,"
        },
        {
            "sha": "ae7dc0d628f6e43a4ea2ccfae20c5e4c188f7d0f",
            "filename": "deps/uv/test/test.gyp",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Ftest%2Ftest.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Ftest%2Ftest.gyp?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -34,6 +34,7 @@\n         'test-fs.c',\n         'test-fs-copyfile.c',\n         'test-fs-event.c',\n+        'test-fs-poll.c',\n         'test-getters-setters.c',\n         'test-get-currentexe.c',\n         'test-get-memory.c',\n@@ -96,7 +97,7 @@\n         'test-signal-multiple-loops.c',\n         'test-socket-buffer-size.c',\n         'test-spawn.c',\n-        'test-fs-poll.c',\n+        'test-strscpy.c',\n         'test-stdio-over-pipes.c',\n         'test-tcp-alloc-cb-fail.c',\n         'test-tcp-bind-error.c',"
        },
        {
            "sha": "0836dd27f2b72a4059df8ad23e0742ac62392bcb",
            "filename": "deps/uv/uv.gyp",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fuv.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/728b155870b69a83b806d8bee67aeb0fd0a9b2dd/deps%2Fuv%2Fuv.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fuv%2Fuv.gyp?ref=728b155870b69a83b806d8bee67aeb0fd0a9b2dd",
            "patch": "@@ -74,6 +74,8 @@\n         'src/idna.h',\n         'src/inet.c',\n         'src/queue.h',\n+        'src/strscpy.c',\n+        'src/strscpy.h',\n         'src/threadpool.c',\n         'src/timer.c',\n         'src/uv-data-getter-setters.c',"
        }
    ],
    "stats": {
        "total": 548,
        "additions": 421,
        "deletions": 127
    }
}