{
    "author": "aleclarson",
    "message": "fs: add 'close' event to FSWatcher\n\nPR-URL: https://github.com/nodejs/node/pull/19900\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "5cc948b77a1452cdd8b667978c3cc1188b433b1a",
    "files": [
        {
            "sha": "bf4261c15cd914e7f9e96a5f609e13051fd0b383",
            "filename": "doc/api/fs.md",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/5cc948b77a1452cdd8b667978c3cc1188b433b1a/doc%2Fapi%2Ffs.md",
            "raw_url": "https://github.com/nodejs/node/raw/5cc948b77a1452cdd8b667978c3cc1188b433b1a/doc%2Fapi%2Ffs.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Ffs.md?ref=5cc948b77a1452cdd8b667978c3cc1188b433b1a",
            "patch": "@@ -329,6 +329,13 @@ added: v0.5.8\n \n Emitted when an error occurs while watching the file.\n \n+### Event: 'close'\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Emitted when the watcher stops watching for changes.\n+\n ### watcher.close()\n <!-- YAML\n added: v0.5.8"
        },
        {
            "sha": "6c8417030b7ac72fd8be8b52cc0f71d86c42a172",
            "filename": "lib/fs.js",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/5cc948b77a1452cdd8b667978c3cc1188b433b1a/lib%2Ffs.js",
            "raw_url": "https://github.com/nodejs/node/raw/5cc948b77a1452cdd8b667978c3cc1188b433b1a/lib%2Ffs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ffs.js?ref=5cc948b77a1452cdd8b667978c3cc1188b433b1a",
            "patch": "@@ -1387,8 +1387,13 @@ FSWatcher.prototype.close = function() {\n     return;\n   }\n   this._handle.close();\n+  process.nextTick(emitCloseNT, this);\n };\n \n+function emitCloseNT(self) {\n+  self.emit('close');\n+}\n+\n fs.watch = function(filename, options, listener) {\n   if (typeof options === 'function') {\n     listener = options;"
        },
        {
            "sha": "ffa82e52c73b721a6b47e0989c96ae73a278b73c",
            "filename": "test/parallel/test-fs-watch.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/5cc948b77a1452cdd8b667978c3cc1188b433b1a/test%2Fparallel%2Ftest-fs-watch.js",
            "raw_url": "https://github.com/nodejs/node/raw/5cc948b77a1452cdd8b667978c3cc1188b433b1a/test%2Fparallel%2Ftest-fs-watch.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-watch.js?ref=5cc948b77a1452cdd8b667978c3cc1188b433b1a",
            "patch": "@@ -54,6 +54,7 @@ for (const testCase of cases) {\n     }\n     assert.fail(err);\n   });\n+  watcher.on('close', common.mustCall());\n   watcher.on('change', common.mustCall(function(eventType, argFilename) {\n     if (interval) {\n       clearInterval(interval);"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 13,
        "deletions": 0
    }
}