{
    "author": "addaleax",
    "message": "cli: generate --help text in JS\n\nInstead of having a custom, static, hand-written string\nthat is being printed to stdout when `--help` is present,\ngenerate it in JS when requested.\n\nPR-URL: https://github.com/nodejs/node/pull/22490\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>",
    "sha": "c8880ea27645aec31ef9dd5687c57747f338d67f",
    "files": [
        {
            "sha": "069c8bc9975fa1b51b831500947f71a4725513c2",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/c8880ea27645aec31ef9dd5687c57747f338d67f/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/c8880ea27645aec31ef9dd5687c57747f338d67f/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=c8880ea27645aec31ef9dd5687c57747f338d67f",
            "patch": "@@ -105,6 +105,11 @@\n       NativeModule.require('internal/inspector_async_hook').setup();\n     }\n \n+    if (internalBinding('options').getOptions('--help')) {\n+      NativeModule.require('internal/print_help').print(process.stdout);\n+      return;\n+    }\n+\n     if (isMainThread) {\n       mainThreadSetup.setupChildProcessIpcChannel();\n     }"
        },
        {
            "sha": "9d14671973402e2288300502923bd33a6ed46322",
            "filename": "lib/internal/print_help.js",
            "status": "added",
            "additions": 151,
            "deletions": 0,
            "changes": 151,
            "blob_url": "https://github.com/nodejs/node/blob/c8880ea27645aec31ef9dd5687c57747f338d67f/lib%2Finternal%2Fprint_help.js",
            "raw_url": "https://github.com/nodejs/node/raw/c8880ea27645aec31ef9dd5687c57747f338d67f/lib%2Finternal%2Fprint_help.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprint_help.js?ref=c8880ea27645aec31ef9dd5687c57747f338d67f",
            "patch": "@@ -0,0 +1,151 @@\n+'use strict';\n+const { internalBinding } = require('internal/bootstrap/loaders');\n+const { getOptions, types } = internalBinding('options');\n+\n+const typeLookup = [];\n+for (const key of Object.keys(types))\n+  typeLookup[types[key]] = key;\n+\n+// Environment variables are parsed ad-hoc throughout the code base,\n+// so we gather the documentation here.\n+const { hasIntl, hasSmallICU, hasNodeOptions } = process.binding('config');\n+const envVars = new Map([\n+  ['NODE_DEBUG', { helpText: \"','-separated list of core modules that \" +\n+    'should print debug information' }],\n+  ['NODE_DEBUG_NATIVE', { helpText: \"','-separated list of C++ core debug \" +\n+    'categories that should print debug output' }],\n+  ['NODE_DISABLE_COLORS', { helpText: 'set to 1 to disable colors in ' +\n+    'the REPL' }],\n+  ['NODE_EXTRA_CA_CERTS', { helpText: 'path to additional CA certificates ' +\n+    'file' }],\n+  ['NODE_NO_WARNINGS', { helpText: 'set to 1 to silence process warnings' }],\n+  ['NODE_PATH', { helpText: `'${require('path').delimiter}'-separated list ` +\n+    'of directories prefixed to the module search path' }],\n+  ['NODE_PENDING_DEPRECATION', { helpText: 'set to 1 to emit pending ' +\n+    'deprecation warnings' }],\n+  ['NODE_PRESERVE_SYMLINKS', { helpText: 'set to 1 to preserve symbolic ' +\n+    'links when resolving and caching modules' }],\n+  ['NODE_REDIRECT_WARNINGS', { helpText: 'write warnings to path instead ' +\n+    'of stderr' }],\n+  ['NODE_REPL_HISTORY', { helpText: 'path to the persistent REPL ' +\n+    'history file' }],\n+  ['OPENSSL_CONF', { helpText: 'load OpenSSL configuration from file' }]\n+].concat(hasIntl ? [\n+  ['NODE_ICU_DATA', { helpText: 'data path for ICU (Intl object) data' +\n+    hasSmallICU ? '' : ' (will extend linked-in data)' }]\n+] : []).concat(hasNodeOptions ? [\n+  ['NODE_OPTIONS', { helpText: 'set CLI options in the environment via a ' +\n+    'space-separated list' }]\n+] : []));\n+\n+\n+function indent(text, depth) {\n+  return text.replace(/^/gm, ' '.repeat(depth));\n+}\n+\n+function fold(text, width) {\n+  return text.replace(new RegExp(`([^\\n]{0,${width}})( |$)`, 'g'),\n+                      (_, newLine, end) => newLine + (end === ' ' ? '\\n' : ''));\n+}\n+\n+function getArgDescription(type) {\n+  switch (typeLookup[type]) {\n+    case 'kNoOp':\n+    case 'kV8Option':\n+    case 'kBoolean':\n+      break;\n+    case 'kHostPort':\n+      return '[host:]port';\n+    case 'kInteger':\n+    case 'kString':\n+    case 'kStringList':\n+      return '...';\n+    case undefined:\n+      break;\n+    default:\n+      require('assert').fail(`unknown option type ${type}`);\n+  }\n+}\n+\n+function format({ options, aliases = new Map(), firstColumn, secondColumn }) {\n+  let text = '';\n+\n+  for (const [\n+    name, { helpText, type, value }\n+  ] of [...options.entries()].sort()) {\n+    if (!helpText) continue;\n+\n+    let displayName = name;\n+    const argDescription = getArgDescription(type);\n+    if (argDescription)\n+      displayName += `=${argDescription}`;\n+\n+    for (const [ from, to ] of aliases) {\n+      // For cases like e.g. `-e, --eval`.\n+      if (to[0] === name && to.length === 1) {\n+        displayName = `${from}, ${displayName}`;\n+      }\n+\n+      // For cases like `--inspect-brk[=[host:]port]`.\n+      const targetInfo = options.get(to[0]);\n+      const targetArgDescription =\n+        targetInfo ? getArgDescription(targetInfo.type) : '...';\n+      if (from === `${name}=`) {\n+        displayName += `[=${targetArgDescription}]`;\n+      } else if (from === `${name} <arg>`) {\n+        displayName += ` [${targetArgDescription}]`;\n+      }\n+    }\n+\n+    let displayHelpText = helpText;\n+    if (value === true) {\n+      // Mark boolean options we currently have enabled.\n+      // In particular, it indicates whether --use-openssl-ca\n+      // or --use-bundled-ca is the (current) default.\n+      displayHelpText += ' (currently set)';\n+    }\n+\n+    text += displayName;\n+    if (displayName.length >= firstColumn)\n+      text += '\\n' + ' '.repeat(firstColumn);\n+    else\n+      text += ' '.repeat(firstColumn - displayName.length);\n+\n+    text += indent(fold(displayHelpText, secondColumn),\n+                   firstColumn).trimLeft() + '\\n';\n+  }\n+\n+  return text;\n+}\n+\n+function print(stream) {\n+  const { options, aliases } = getOptions();\n+\n+  // TODO(addaleax): Allow a bit of expansion depending on `stream.columns`\n+  // if it is set.\n+  const firstColumn = 28;\n+  const secondColumn = 40;\n+\n+  options.set('-', { helpText: 'script read from stdin (default; ' +\n+                               'interactive mode if a tty)' });\n+  options.set('--', { helpText: 'indicate the end of node options' });\n+  stream.write(\n+    'Usage: node [options] [ -e script | script.js | - ] [arguments]\\n' +\n+    '       node inspect script.js [arguments]\\n\\n' +\n+    'Options:\\n');\n+  stream.write(indent(format({\n+    options, aliases, firstColumn, secondColumn\n+  }), 2));\n+\n+  stream.write('\\nEnvironment variables:\\n');\n+\n+  stream.write(format({\n+    options: envVars, firstColumn, secondColumn\n+  }));\n+\n+  stream.write('\\nDocumentation can be found at https://nodejs.org/\\n');\n+}\n+\n+module.exports = {\n+  print\n+};"
        },
        {
            "sha": "d94e6ff62aa0dbcfb5105b32a0da35589488d551",
            "filename": "node.gyp",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/c8880ea27645aec31ef9dd5687c57747f338d67f/node.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/c8880ea27645aec31ef9dd5687c57747f338d67f/node.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/node.gyp?ref=c8880ea27645aec31ef9dd5687c57747f338d67f",
            "patch": "@@ -132,6 +132,7 @@\n       'lib/internal/modules/esm/translators.js',\n       'lib/internal/safe_globals.js',\n       'lib/internal/net.js',\n+      'lib/internal/print_help.js',\n       'lib/internal/priority_queue.js',\n       'lib/internal/process/esm_loader.js',\n       'lib/internal/process/main_thread_only.js',"
        },
        {
            "sha": "acaab53c1336615018ae156363a6e0d3f6cb5a88",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 154,
            "changes": 154,
            "blob_url": "https://github.com/nodejs/node/blob/c8880ea27645aec31ef9dd5687c57747f338d67f/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/c8880ea27645aec31ef9dd5687c57747f338d67f/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=c8880ea27645aec31ef9dd5687c57747f338d67f",
            "patch": "@@ -2348,155 +2348,6 @@ void LoadEnvironment(Environment* env) {\n   }\n }\n \n-static void PrintHelp() {\n-  printf(\"Usage: node [options] [ -e script | script.js | - ] [arguments]\\n\"\n-         \"       node inspect script.js [arguments]\\n\"\n-         \"\\n\"\n-         \"Options:\\n\"\n-         \"  -                          script read from stdin (default; \\n\"\n-         \"                             interactive mode if a tty)\\n\"\n-         \"  --                         indicate the end of node options\\n\"\n-         \"  --abort-on-uncaught-exception\\n\"\n-         \"                             aborting instead of exiting causes a\\n\"\n-         \"                             core file to be generated for analysis\\n\"\n-#if HAVE_OPENSSL && NODE_FIPS_MODE\n-         \"  --enable-fips              enable FIPS crypto at startup\\n\"\n-#endif  // NODE_FIPS_MODE && NODE_FIPS_MODE\n-         \"  --experimental-modules     experimental ES Module support\\n\"\n-         \"                             and caching modules\\n\"\n-         \"  --experimental-repl-await  experimental await keyword support\\n\"\n-         \"                             in REPL\\n\"\n-         \"  --experimental-vm-modules  experimental ES Module support\\n\"\n-         \"                             in vm module\\n\"\n-         \"  --experimental-worker      experimental threaded Worker support\\n\"\n-#if HAVE_OPENSSL && NODE_FIPS_MODE\n-         \"  --force-fips               force FIPS crypto (cannot be disabled)\\n\"\n-#endif  // HAVE_OPENSSL && NODE_FIPS_MODE\n-#if defined(NODE_HAVE_I18N_SUPPORT)\n-         \"  --icu-data-dir=dir         set ICU data load path to dir\\n\"\n-         \"                             (overrides NODE_ICU_DATA)\\n\"\n-#if !defined(NODE_HAVE_SMALL_ICU)\n-         \"                             note: linked-in ICU data is present\\n\"\n-#endif\n-#endif  // defined(NODE_HAVE_I18N_SUPPORT)\n-#if HAVE_INSPECTOR\n-         \"  --inspect-brk[=[host:]port]\\n\"\n-         \"                             activate inspector on host:port\\n\"\n-         \"                             and break at start of user script\\n\"\n-         \"  --inspect-port=[host:]port\\n\"\n-         \"                             set host:port for inspector\\n\"\n-         \"  --inspect[=[host:]port]    activate inspector on host:port\\n\"\n-         \"                             (default: 127.0.0.1:9229)\\n\"\n-#endif  // HAVE_INSPECTOR\n-         \"  --loader=file              (with --experimental-modules) use the \\n\"\n-         \"                             specified file as a custom loader\\n\"\n-         \"                             for ECMAScript Modules \\n\"\n-         \"  --napi-modules             load N-API modules (no-op - option\\n\"\n-         \"                             kept for compatibility)\\n\"\n-         \"  --no-deprecation           silence deprecation warnings\\n\"\n-         \"  --no-force-async-hooks-checks\\n\"\n-         \"                             disable checks for async_hooks\\n\"\n-         \"  --no-warnings              silence all process warnings\\n\"\n-#if HAVE_OPENSSL\n-         \"  --openssl-config=file      load OpenSSL configuration from the\\n\"\n-         \"                             specified file (overrides\\n\"\n-         \"                             OPENSSL_CONF)\\n\"\n-#endif  // HAVE_OPENSSL\n-         \"  --pending-deprecation      emit pending deprecation warnings\\n\"\n-         \"  --preserve-symlinks        preserve symbolic links when resolving\\n\"\n-         \"  --preserve-symlinks-main   preserve symbolic links when resolving\\n\"\n-         \"                             the main module\\n\"\n-         \"  --prof                     generate V8 profiler output\\n\"\n-         \"  --prof-process             process V8 profiler output generated\\n\"\n-         \"                             using --prof\\n\"\n-         \"  --redirect-warnings=file\\n\"\n-         \"                             write warnings to file instead of\\n\"\n-         \"                             stderr\\n\"\n-         \"  --throw-deprecation        throw an exception on deprecations\\n\"\n-         \"  --title=title              the process title to use on start up\\n\"\n-#if HAVE_OPENSSL\n-         \"  --tls-cipher-list=val      use an alternative default TLS cipher \"\n-         \"list\\n\"\n-#endif  // HAVE_OPENSSL\n-         \"  --trace-deprecation        show stack traces on deprecations\\n\"\n-         \"  --trace-event-categories   comma separated list of trace event\\n\"\n-         \"                             categories to record\\n\"\n-         \"  --trace-event-file-pattern Template string specifying the\\n\"\n-         \"                             filepath for the trace-events data, it\\n\"\n-         \"                             supports ${rotation} and ${pid}\\n\"\n-         \"                             log-rotation id. %%2$u is the pid.\\n\"\n-         \"  --trace-events-enabled     track trace events\\n\"\n-         \"  --trace-sync-io            show stack trace when use of sync IO\\n\"\n-         \"                             is detected after the first tick\\n\"\n-         \"  --trace-warnings           show stack traces on process warnings\\n\"\n-         \"  --track-heap-objects       track heap object allocations for heap \"\n-         \"snapshots\\n\"\n-#if HAVE_OPENSSL\n-         \"  --use-bundled-ca           use bundled CA store\"\n-#if !defined(NODE_OPENSSL_CERT_STORE)\n-         \" (default)\"\n-#endif\n-         \"\\n\"\n-         \"  --use-openssl-ca           use OpenSSL's default CA store\"\n-#if defined(NODE_OPENSSL_CERT_STORE)\n-         \" (default)\"\n-#endif\n-#endif  // HAVE_OPENSSL\n-         \"\\n\"\n-         \"  --v8-options               print v8 command line options\\n\"\n-         \"  --v8-pool-size=num         set v8's thread pool size\\n\"\n-         \"  --zero-fill-buffers        automatically zero-fill all newly \"\n-         \"allocated\\n\"\n-         \"                             Buffer and SlowBuffer instances\\n\"\n-         \"  -c, --check                syntax check script without executing\\n\"\n-         \"  -e, --eval script          evaluate script\\n\"\n-         \"  -h, --help                 print node command line options\\n\"\n-         \"  -i, --interactive          always enter the REPL even if stdin\\n\"\n-         \"                             does not appear to be a terminal\\n\"\n-         \"  -p, --print                evaluate script and print result\\n\"\n-         \"  -r, --require              module to preload (option can be \"\n-         \"repeated)\\n\"\n-         \"  -v, --version              print Node.js version\\n\"\n-         \"\\n\"\n-         \"Environment variables:\\n\"\n-         \"NODE_DEBUG                   ','-separated list of core modules\\n\"\n-         \"                             that should print debug information\\n\"\n-         \"NODE_DEBUG_NATIVE            ','-separated list of C++ core debug\\n\"\n-         \"                             categories that should print debug\\n\"\n-         \"                             output\\n\"\n-         \"NODE_DISABLE_COLORS          set to 1 to disable colors in the REPL\\n\"\n-         \"NODE_EXTRA_CA_CERTS          path to additional CA certificates\\n\"\n-         \"                             file\\n\"\n-#if defined(NODE_HAVE_I18N_SUPPORT)\n-         \"NODE_ICU_DATA                data path for ICU (Intl object) data\\n\"\n-#if !defined(NODE_HAVE_SMALL_ICU)\n-         \"                             (will extend linked-in data)\\n\"\n-#endif\n-#endif  // defined(NODE_HAVE_I18N_SUPPORT)\n-         \"NODE_NO_WARNINGS             set to 1 to silence process warnings\\n\"\n-#if !defined(NODE_WITHOUT_NODE_OPTIONS)\n-         \"NODE_OPTIONS                 set CLI options in the environment\\n\"\n-         \"                             via a space-separated list\\n\"\n-#endif  // !defined(NODE_WITHOUT_NODE_OPTIONS)\n-#ifdef _WIN32\n-         \"NODE_PATH                    ';'-separated list of directories\\n\"\n-#else\n-         \"NODE_PATH                    ':'-separated list of directories\\n\"\n-#endif\n-         \"                             prefixed to the module search path\\n\"\n-         \"NODE_PENDING_DEPRECATION     set to 1 to emit pending deprecation\\n\"\n-         \"                             warnings\\n\"\n-         \"NODE_PRESERVE_SYMLINKS       set to 1 to preserve symbolic links\\n\"\n-         \"                             when resolving and caching modules\\n\"\n-         \"NODE_REDIRECT_WARNINGS       write warnings to path instead of\\n\"\n-         \"                             stderr\\n\"\n-         \"NODE_REPL_HISTORY            path to the persistent REPL history\\n\"\n-         \"                             file\\n\"\n-         \"OPENSSL_CONF                 load OpenSSL configuration from file\\n\"\n-         \"\\n\"\n-         \"Documentation can be found at https://nodejs.org/\\n\");\n-}\n-\n \n static void StartInspector(Environment* env, const char* path,\n                            std::shared_ptr<DebugOptions> debug_options) {\n@@ -2772,11 +2623,6 @@ void ProcessArgv(std::vector<std::string>* args,\n     exit(0);\n   }\n \n-  if (per_process_opts->print_help) {\n-    PrintHelp();\n-    exit(0);\n-  }\n-\n   if (per_process_opts->print_v8_help) {\n     V8::SetFlagsFromString(\"--help\", 6);\n     exit(0);"
        },
        {
            "sha": "080d8550665ad3a10f38f8cf07c6f0308df054c5",
            "filename": "src/node_config.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/c8880ea27645aec31ef9dd5687c57747f338d67f/src%2Fnode_config.cc",
            "raw_url": "https://github.com/nodejs/node/raw/c8880ea27645aec31ef9dd5687c57747f338d67f/src%2Fnode_config.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_config.cc?ref=c8880ea27645aec31ef9dd5687c57747f338d67f",
            "patch": "@@ -73,6 +73,10 @@ static void Initialize(Local<Object> target,\n   READONLY_BOOLEAN_PROPERTY(\"hasTracing\");\n #endif\n \n+#if !defined(NODE_WITHOUT_NODE_OPTIONS)\n+  READONLY_BOOLEAN_PROPERTY(\"hasNodeOptions\");\n+#endif\n+\n   // TODO(addaleax): This seems to be an unused, private API. Remove it?\n   READONLY_STRING_PROPERTY(target, \"icuDataDir\",\n       per_process_opts->icu_data_dir);"
        },
        {
            "sha": "27e518d0f1f2d81a3ac8c6d811265fa0f385b241",
            "filename": "src/node_options.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/c8880ea27645aec31ef9dd5687c57747f338d67f/src%2Fnode_options.cc",
            "raw_url": "https://github.com/nodejs/node/raw/c8880ea27645aec31ef9dd5687c57747f338d67f/src%2Fnode_options.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_options.cc?ref=c8880ea27645aec31ef9dd5687c57747f338d67f",
            "patch": "@@ -251,11 +251,19 @@ PerProcessOptionsParser::PerProcessOptionsParser() {\n             &PerProcessOptions::tls_cipher_list,\n             kAllowedInEnvironment);\n   AddOption(\"--use-openssl-ca\",\n-            \"use OpenSSL's default CA store\",\n+            \"use OpenSSL's default CA store\"\n+#if defined(NODE_OPENSSL_CERT_STORE)\n+            \" (default)\"\n+#endif\n+            ,\n             &PerProcessOptions::use_openssl_ca,\n             kAllowedInEnvironment);\n   AddOption(\"--use-bundled-ca\",\n-            \"use bundled CA store\",\n+            \"use bundled CA store\"\n+#if !defined(NODE_OPENSSL_CERT_STORE)\n+            \" (default)\"\n+#endif\n+            ,\n             &PerProcessOptions::use_bundled_ca,\n             kAllowedInEnvironment);\n   // Similar to [has_eval_string] above, except that the separation between"
        },
        {
            "sha": "81563355d246fff9dba4515b9e126e97ffc67ecf",
            "filename": "test/parallel/test-bootstrap-modules.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c8880ea27645aec31ef9dd5687c57747f338d67f/test%2Fparallel%2Ftest-bootstrap-modules.js",
            "raw_url": "https://github.com/nodejs/node/raw/c8880ea27645aec31ef9dd5687c57747f338d67f/test%2Fparallel%2Ftest-bootstrap-modules.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-bootstrap-modules.js?ref=c8880ea27645aec31ef9dd5687c57747f338d67f",
            "patch": "@@ -11,4 +11,4 @@ const list = process.moduleLoadList.slice();\n \n const assert = require('assert');\n \n-assert(list.length <= 73, list);\n+assert(list.length <= 74, list);"
        },
        {
            "sha": "e715fdbcb8f5765e676eb7bbaa17162601af0328",
            "filename": "test/parallel/test-cli-node-print-help.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/c8880ea27645aec31ef9dd5687c57747f338d67f/test%2Fparallel%2Ftest-cli-node-print-help.js",
            "raw_url": "https://github.com/nodejs/node/raw/c8880ea27645aec31ef9dd5687c57747f338d67f/test%2Fparallel%2Ftest-cli-node-print-help.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cli-node-print-help.js?ref=c8880ea27645aec31ef9dd5687c57747f338d67f",
            "patch": "@@ -27,12 +27,12 @@ function validateNodePrintHelp() {\n \n   const cliHelpOptions = [\n     { compileConstant: HAVE_OPENSSL,\n-      flags: [ '--openssl-config=file', '--tls-cipher-list=val',\n+      flags: [ '--openssl-config=...', '--tls-cipher-list=...',\n                '--use-bundled-ca', '--use-openssl-ca' ] },\n     { compileConstant: NODE_FIPS_MODE,\n       flags: [ '--enable-fips', '--force-fips' ] },\n     { compileConstant: NODE_HAVE_I18N_SUPPORT,\n-      flags: [ '--icu-data-dir=dir', 'NODE_ICU_DATA' ] },\n+      flags: [ '--icu-data-dir=...', 'NODE_ICU_DATA' ] },\n     { compileConstant: HAVE_INSPECTOR,\n       flags: [ '--inspect-brk[=[host:]port]', '--inspect-port=[host:]port',\n                '--inspect[=[host:]port]' ] },"
        }
    ],
    "stats": {
        "total": 333,
        "additions": 174,
        "deletions": 159
    }
}