{
    "author": "unknown",
    "message": "src,lib: make process.binding('config') internal\n\nPR-URL: https://github.com/nodejs/node/pull/23400\nRefs: https://github.com/nodejs/node/issues/22160\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "63b06551f4c51d8868f36b184a6539ebc51cf0b4",
    "files": [
        {
            "sha": "ac5e19c40819c10cb3c362fec9ab8f38e8e34e3b",
            "filename": "lib/buffer.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Fbuffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Fbuffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fbuffer.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -50,7 +50,7 @@ const {\n } = require('internal/util/types');\n const {\n   pendingDeprecation\n-} = process.binding('config');\n+} = internalBinding('config');\n const {\n   ERR_BUFFER_OUT_OF_BOUNDS,\n   ERR_OUT_OF_RANGE,\n@@ -1067,7 +1067,7 @@ Buffer.prototype.swap64 = function swap64() {\n Buffer.prototype.toLocaleString = Buffer.prototype.toString;\n \n let transcode;\n-if (process.binding('config').hasIntl) {\n+if (internalBinding('config').hasIntl) {\n   const {\n     icuErrName,\n     transcode: _transcode"
        },
        {
            "sha": "4707ab2b35ca513242b15f675d41dde9e2c40099",
            "filename": "lib/crypto.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Fcrypto.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Fcrypto.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fcrypto.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -40,7 +40,7 @@ const pendingDeprecation = getOptionValue('--pending-deprecation');\n const {\n   fipsMode,\n   fipsForced\n-} = process.binding('config');\n+} = internalBinding('config');\n const { getFipsCrypto, setFipsCrypto } = internalBinding('crypto');\n const {\n   randomBytes,"
        },
        {
            "sha": "d382fe36e1847f3261b5a8f0be064ccbb7f98998",
            "filename": "lib/internal/async_hooks.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fasync_hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fasync_hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fasync_hooks.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -107,7 +107,7 @@ function fatalError(e) {\n     Error.captureStackTrace(o, fatalError);\n     process._rawDebug(o.stack);\n   }\n-  if (process.binding('config').shouldAbortOnUncaughtException) {\n+  if (internalBinding('config').shouldAbortOnUncaughtException) {\n     process.abort();\n   }\n   process.exit(1);"
        },
        {
            "sha": "dfe904857fa3e5f8eb4110bb05da654ba5f96e72",
            "filename": "lib/internal/bootstrap/loaders.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fbootstrap%2Floaders.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fbootstrap%2Floaders.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Floaders.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -73,6 +73,7 @@ ObjectDefineProperty(process, 'moduleLoadList', {\n   writable: false\n });\n \n+\n // internalBindingWhitelist contains the name of internalBinding modules\n // that are whitelisted for access via process.binding()... This is used\n // to provide a transition path for modules that are being moved over to\n@@ -81,6 +82,7 @@ const internalBindingWhitelist = [\n   'async_wrap',\n   'buffer',\n   'cares_wrap',\n+  'config',\n   'constants',\n   'contextify',\n   'crypto',\n@@ -168,7 +170,7 @@ function NativeModule(id) {\n NativeModule._source = getInternalBinding('natives');\n NativeModule._cache = {};\n \n-const config = getBinding('config');\n+const config = getInternalBinding('config');\n \n // Think of this as module.exports in this file even though it is not\n // written in CommonJS style."
        },
        {
            "sha": "51e27afecaea3cfc875f90aaf8ae67bee320d948",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -176,7 +176,7 @@ function startup() {\n   {\n     // Install legacy getters on the `util` binding for typechecking.\n     // TODO(addaleax): Turn into a full runtime deprecation.\n-    const { pendingDeprecation } = process.binding('config');\n+    const { pendingDeprecation } = internalBinding('config');\n     const utilBinding = internalBinding('util');\n     const types = internalBinding('types');\n     for (const name of [\n@@ -638,7 +638,7 @@ function setupProcessFatal() {\n }\n \n function setupProcessICUVersions() {\n-  const icu = process.binding('config').hasIntl ?\n+  const icu = internalBinding('config').hasIntl ?\n     internalBinding('icu') : undefined;\n   if (!icu) return;  // no Intl/ICU: nothing to add here.\n   // With no argument, getVersion() returns a comma separated list"
        },
        {
            "sha": "ad056fd0bd997ff6b93d4b79fb6b52ba1dd93336",
            "filename": "lib/internal/encoding.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fencoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fencoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fencoding.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -342,7 +342,7 @@ Object.defineProperties(\n     } });\n \n const TextDecoder =\n-  process.binding('config').hasIntl ?\n+  internalBinding('config').hasIntl ?\n     makeTextDecoderICU() :\n     makeTextDecoderJS();\n "
        },
        {
            "sha": "1ad0cbf3a533f2067a33eb6eeeaa6cea14f40110",
            "filename": "lib/internal/inspector_async_hook.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Finspector_async_hook.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Finspector_async_hook.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Finspector_async_hook.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -12,7 +12,7 @@ let config;\n \n function lazyHookCreation() {\n   const { createHook } = require('async_hooks');\n-  config = process.binding('config');\n+  config = internalBinding('config');\n \n   hook = createHook({\n     init(asyncId, type, triggerAsyncId, resource) {"
        },
        {
            "sha": "c3e984dd9f49879eb1b22b491f0368954b241c5a",
            "filename": "lib/internal/print_help.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fprint_help.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fprint_help.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprint_help.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -9,7 +9,7 @@ for (const key of Object.keys(types))\n \n // Environment variables are parsed ad-hoc throughout the code base,\n // so we gather the documentation here.\n-const { hasIntl, hasSmallICU, hasNodeOptions } = process.binding('config');\n+const { hasIntl, hasSmallICU, hasNodeOptions } = internalBinding('config');\n const envVars = new Map([\n   ['NODE_DEBUG', { helpText: \"','-separated list of core modules that \" +\n     'should print debug information' }],"
        },
        {
            "sha": "5dac78082bf205953847e26a69618b60c7feb2b4",
            "filename": "lib/internal/process/warning.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fprocess%2Fwarning.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Fprocess%2Fwarning.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprocess%2Fwarning.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -1,6 +1,6 @@\n 'use strict';\n \n-const config = process.binding('config');\n+const config = internalBinding('config');\n const prefix = `(${process.release.name}:${process.pid}) `;\n const { ERR_INVALID_ARG_TYPE } = require('internal/errors').codes;\n "
        },
        {
            "sha": "c325f42cf42328cec17488367d356e314ff454f1",
            "filename": "lib/internal/readline.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Freadline.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Finternal%2Freadline.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Freadline.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -30,7 +30,7 @@ CSI.kClearToEnd = CSI`0K`;\n CSI.kClearLine = CSI`2K`;\n CSI.kClearScreenDown = CSI`0J`;\n \n-if (process.binding('config').hasIntl) {\n+if (internalBinding('config').hasIntl) {\n   const icu = internalBinding('icu');\n   getStringWidth = function getStringWidth(str, options) {\n     options = options || {};"
        },
        {
            "sha": "d2977679e168b8d33b840bdc97eff0579dc81fa4",
            "filename": "lib/trace_events.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Ftrace_events.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Ftrace_events.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ftrace_events.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -1,6 +1,6 @@\n 'use strict';\n \n-const { hasTracing } = process.binding('config');\n+const { hasTracing } = internalBinding('config');\n const kHandle = Symbol('handle');\n const kEnabled = Symbol('enabled');\n const kCategories = Symbol('categories');"
        },
        {
            "sha": "eac9d1511b9f8c38670fe407a6f096190f6aaff4",
            "filename": "lib/url.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Furl.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/lib%2Furl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Furl.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -21,7 +21,7 @@\n \n 'use strict';\n \n-const { toASCII } = process.binding('config').hasIntl ?\n+const { toASCII } = internalBinding('config').hasIntl ?\n   internalBinding('icu') : require('punycode');\n \n const { hexTable } = require('internal/querystring');"
        },
        {
            "sha": "c2bf3349c46269dd8bed908dc99c61603a13dc6a",
            "filename": "src/node_config.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/src%2Fnode_config.cc",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/src%2Fnode_config.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_config.cc?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -112,4 +112,4 @@ static void Initialize(Local<Object> target,\n \n }  // namespace node\n \n-NODE_BUILTIN_MODULE_CONTEXT_AWARE(config, node::Initialize)\n+NODE_MODULE_CONTEXT_AWARE_INTERNAL(config, node::Initialize)"
        },
        {
            "sha": "daf15ba880ced7b349677691fdd65ab6eded31ec",
            "filename": "test/parallel/test-icu-data-dir.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/test%2Fparallel%2Ftest-icu-data-dir.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/test%2Fparallel%2Ftest-icu-data-dir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-icu-data-dir.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -1,8 +1,10 @@\n+// Flags: --expose-internals\n 'use strict';\n+const { internalBinding } = require('internal/test/binding');\n const common = require('../common');\n const os = require('os');\n \n-const { hasSmallICU } = process.binding('config');\n+const { hasSmallICU } = internalBinding('config');\n if (!(common.hasIntl && hasSmallICU))\n   common.skip('missing Intl');\n "
        },
        {
            "sha": "5229032573088ed54381945747a9716486d98c5a",
            "filename": "test/parallel/test-internal-modules-expose.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/test%2Fparallel%2Ftest-internal-modules-expose.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/test%2Fparallel%2Ftest-internal-modules-expose.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-modules-expose.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -3,7 +3,8 @@\n \n require('../common');\n const assert = require('assert');\n-const config = process.binding('config');\n+const { internalBinding } = require('internal/test/binding');\n+const config = internalBinding('config');\n \n console.log(config, process.argv);\n "
        },
        {
            "sha": "0e62761ca57b404d2cc4a92fc8e64fe2d6512d02",
            "filename": "test/parallel/test-readline-position.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/63b06551f4c51d8868f36b184a6539ebc51cf0b4/test%2Fparallel%2Ftest-readline-position.js",
            "raw_url": "https://github.com/nodejs/node/raw/63b06551f4c51d8868f36b184a6539ebc51cf0b4/test%2Fparallel%2Ftest-readline-position.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-readline-position.js?ref=63b06551f4c51d8868f36b184a6539ebc51cf0b4",
            "patch": "@@ -1,4 +1,6 @@\n+// Flags: --expose-internals\n 'use strict';\n+const { internalBinding } = require('internal/test/binding');\n require('../common');\n const { PassThrough } = require('stream');\n const readline = require('readline');\n@@ -23,7 +25,7 @@ const ctrlU = { ctrl: true, name: 'u' };\n   // The non-ICU JS implementation of character width calculation is only aware\n   // of the wide/narrow distinction. Only test these more advanced cases when\n   // ICU is available.\n-  if (process.binding('config').hasIntl) {\n+  if (internalBinding('config').hasIntl) {\n     tests.push(\n       [0, '\\u0301'],   // COMBINING ACUTE ACCENT\n       [1, 'a\\u0301'],  // aÃÅ"
        }
    ],
    "stats": {
        "total": 43,
        "additions": 25,
        "deletions": 18
    }
}