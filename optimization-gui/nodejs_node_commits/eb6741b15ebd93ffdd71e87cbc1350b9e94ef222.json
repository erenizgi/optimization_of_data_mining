{
    "author": "refack",
    "message": "build: fix c++ code coverage on macOS\n\nPR-URL: https://github.com/nodejs/node/pull/24520\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "eb6741b15ebd93ffdd71e87cbc1350b9e94ef222",
    "files": [
        {
            "sha": "665fc627b3f25f99d31b5b4e3dd5202bafe62751",
            "filename": "node.gypi",
            "status": "modified",
            "additions": 11,
            "deletions": 8,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/eb6741b15ebd93ffdd71e87cbc1350b9e94ef222/node.gypi",
            "raw_url": "https://github.com/nodejs/node/raw/eb6741b15ebd93ffdd71e87cbc1350b9e94ef222/node.gypi",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/node.gypi?ref=eb6741b15ebd93ffdd71e87cbc1350b9e94ef222",
            "patch": "@@ -274,25 +274,28 @@\n                    '-Wl,--whole-archive <(v8_base)',\n                    '-Wl,--no-whole-archive' ]\n     }],\n-    [ 'OS in \"mac freebsd linux\" and node_shared==\"false\"'\n-        ' and coverage==\"true\"', {\n+    [ 'coverage==\"true\" and node_shared==\"false\" and OS in \"mac freebsd linux\"', {\n+      'cflags!': [ '-O3' ],\n       'ldflags': [ '--coverage',\n                    '-g',\n                    '-O0' ],\n       'cflags': [ '--coverage',\n                    '-g',\n                    '-O0' ],\n-      'cflags!': [ '-O3' ],\n       'xcode_settings': {\n-        'OTHER_LDFLAGS': [\n-          '--coverage',\n-        ],\n-        'OTHER_CFLAGS+': [\n+        'OTHER_CFLAGS': [\n           '--coverage',\n           '-g',\n           '-O0'\n         ],\n-      }\n+      },\n+      'conditions': [\n+        [ '_type==\"executable\"', {\n+          'xcode_settings': {\n+            'OTHER_LDFLAGS': [ '--coverage', ],\n+          },\n+        }],\n+      ],\n     }],\n     [ 'OS==\"sunos\"', {\n       'ldflags': [ '-Wl,-M,/usr/lib/ld/map.noexstk' ],"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 11,
        "deletions": 8
    }
}