{
    "author": "danbev",
    "message": "build: use arm64 as DESTCPU for aarch64\n\nOn a aarch64 system I can run the complete build with tests without\nspecifying the Makefile variable DESTCPU.\n\nBut when running the tar-headers target DESTCPU is passed to configure:\n$(PYTHON) ./configure \\\n       --prefix=/ \\\n       --dest-cpu=$(DESTCPU) \\\n       ...\nThe value of DESTCPU in this case will be aarch64 which will cause\nconfigure to fail:\nconfigure: error: option --dest-cpu: invalid choice: 'aarch64'\n(choose from 'arm', 'arm64', 'ia32', 'mips', 'mipsel', 'mips64el', 'ppc',\n'ppc64', 'x32', 'x64', 'x86', 'x86_64', 's390', 's390x')\n\nIn the configure script there is a matching of __aarch64__ to arm64:\n$ python -c 'from configure import host_arch_cc; print host_arch_cc()'\narm64\n\nIn our case it would be nice to have consitent behaviour for both of\nthese cases on aarch64.\n\nThis commit changes DESTCPU to arm64 to be consistent with the\nconfigure script. DESTCPU is used in $(TARBALL)-headers and in\n$(BINARYTAR) but I'm not sure about the implications of making the\nchange purposed and hope others might chime in and provide some\nguidance.\n\nPR-URL: https://github.com/nodejs/node/pull/22548\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "d7d3bf57a6a32a0e1222deb6eeb106ea0ce711c8",
    "files": [
        {
            "sha": "50c5e2ed906a3ef055c42e57bbf8e39487bbb309",
            "filename": "Makefile",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/d7d3bf57a6a32a0e1222deb6eeb106ea0ce711c8/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/d7d3bf57a6a32a0e1222deb6eeb106ea0ce711c8/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=d7d3bf57a6a32a0e1222deb6eeb106ea0ce711c8",
            "patch": "@@ -731,7 +731,7 @@ ifeq ($(findstring arm,$(UNAME_M)),arm)\n DESTCPU ?= arm\n else\n ifeq ($(findstring aarch64,$(UNAME_M)),aarch64)\n-DESTCPU ?= aarch64\n+DESTCPU ?= arm64\n else\n ifeq ($(findstring powerpc,$(shell uname -p)),powerpc)\n DESTCPU ?= ppc64\n@@ -751,7 +751,7 @@ else\n ifeq ($(DESTCPU),arm)\n ARCH=arm\n else\n-ifeq ($(DESTCPU),aarch64)\n+ifeq ($(DESTCPU),arm64)\n ARCH=arm64\n else\n ifeq ($(DESTCPU),ppc64)"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}