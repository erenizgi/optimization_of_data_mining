{
    "author": "sam-github",
    "message": "test: wait for TCP connect, not TLS handshake\n\nTest assumed server gets a handshake before the client destroyed it, and\ndidn't assert that dns.lookup() callback occurred.\n\nPR-URL: https://github.com/nodejs/node/pull/25508\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "cdd6eb237b8393531a1beeef00901e89e5279c0a",
    "files": [
        {
            "sha": "083208cc1d3ab07ec52fb874133af8ba47236c9d",
            "filename": "test/parallel/test-tls-connect-address-family.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/cdd6eb237b8393531a1beeef00901e89e5279c0a/test%2Fparallel%2Ftest-tls-connect-address-family.js",
            "raw_url": "https://github.com/nodejs/node/raw/cdd6eb237b8393531a1beeef00901e89e5279c0a/test%2Fparallel%2Ftest-tls-connect-address-family.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-connect-address-family.js?ref=cdd6eb237b8393531a1beeef00901e89e5279c0a",
            "patch": "@@ -15,7 +15,7 @@ function runTest() {\n   tls.createServer({\n     cert: fixtures.readKey('agent1-cert.pem'),\n     key: fixtures.readKey('agent1-key.pem'),\n-  }, common.mustCall(function() {\n+  }).on('connection', common.mustCall(function() {\n     this.close();\n   })).listen(0, '::1', common.mustCall(function() {\n     const options = {\n@@ -32,7 +32,9 @@ function runTest() {\n   }));\n }\n \n-dns.lookup('localhost', { family: 6, all: true }, (err, addresses) => {\n+dns.lookup('localhost', {\n+  family: 6, all: true\n+}, common.mustCall((err, addresses) => {\n   if (err) {\n     if (err.code === 'ENOTFOUND' || err.code === 'EAI_AGAIN')\n       common.skip('localhost does not resolve to ::1');\n@@ -44,4 +46,4 @@ dns.lookup('localhost', { family: 6, all: true }, (err, addresses) => {\n     runTest();\n   else\n     common.skip('localhost does not resolve to ::1');\n-});\n+}));"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 5,
        "deletions": 3
    }
}