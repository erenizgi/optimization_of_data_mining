{
    "author": "mhdawson",
    "message": "build: fix gocvr version used for coverage\n\nFix the gcovr version to a fixed version and uses patches\nspecific to that version. This avoids us being broken by\nchanges in the gcovr repo. Using file name for patches\nspecific to the version level will allow us to move up when\nnecessary without breaking coverage for earlier versions\nof Node.js\n\nPR-URL: https://github.com/nodejs/node/pull/19094\nReviewed-By: Gibson Fahnestock <gibfahn@gmail.com>",
    "sha": "29697ef3de024a20787064216cdcb8d2466a7921",
    "files": [
        {
            "sha": "cd7d33fd655d15cc40ab61698d1c8afbb88ecad5",
            "filename": "Makefile",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/29697ef3de024a20787064216cdcb8d2466a7921/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/29697ef3de024a20787064216cdcb8d2466a7921/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=29697ef3de024a20787064216cdcb8d2466a7921",
            "patch": "@@ -172,13 +172,13 @@ coverage-build: all\n \t\t$(NODE) ./deps/npm install istanbul-merge --no-save --no-package-lock; fi\n \tif [ ! -d node_modules/nyc ]; then \\\n \t\t$(NODE) ./deps/npm install nyc --no-save --no-package-lock; fi\n-\tif [ ! -d gcovr ]; then git clone --depth=1 \\\n+\tif [ ! -d gcovr ]; then git clone -b 3.4 --depth=1 \\\n \t\t--single-branch git://github.com/gcovr/gcovr.git; fi\n \tif [ ! -d build ]; then git clone --depth=1 \\\n \t\t--single-branch https://github.com/nodejs/build.git; fi\n-\tif [ ! -f gcovr/gcovr/gcov.py.orig ]; then \\\n-\t\t(cd gcovr && patch -b -N -p1 < \\\n-\t\t\"$(CURDIR)/build/jenkins/scripts/coverage/gcovr-patches.diff\"); fi\n+\tif [ ! -f gcovr/scripts/gcovr.orig ]; then \\\n+\t\t(cd gcovr && patch -N -p1 < \\\n+\t\t\"$(CURDIR)/build/jenkins/scripts/coverage/gcovr-patches-3.4.diff\"); fi\n \tif [ -d lib_ ]; then $(RM) -r lib; mv lib_ lib; fi\n \tmv lib lib_\n \t$(NODE) ./node_modules/.bin/nyc instrument --extension .js --extension .mjs lib_/ lib/\n@@ -203,7 +203,7 @@ coverage-test: coverage-build\n \t(cd lib && .$(NODE) ../node_modules/.bin/nyc report \\\n \t\t--temp-directory \"$(CURDIR)/.cov_tmp\" \\\n \t\t--report-dir \"../coverage\")\n-\t-(cd out && PYTHONPATH=$(CURDIR)/gcovr $(PYTHON) -m gcovr --gcov-exclude='.*deps' \\\n+\t-(cd out && \"../gcovr/scripts/gcovr\" --gcov-exclude='.*deps' \\\n \t\t--gcov-exclude='.*usr' -v -r Release/obj.target \\\n \t\t--html --html-detail -o ../coverage/cxxcoverage.html \\\n \t\t--gcov-executable=\"$(GCOV)\")"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 5,
        "deletions": 5
    }
}