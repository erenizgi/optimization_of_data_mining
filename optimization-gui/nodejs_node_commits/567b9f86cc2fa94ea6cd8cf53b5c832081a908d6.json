{
    "author": "danbev",
    "message": "lib: suppress crypto related env vars in help msg\n\nThis commit adds a crypto check to suppress the crypto related\nenvironment variables introduced in Commit\n399bb3c95af821350774c18f469ab700387f38e1 (\"doc: add NODE_DEBUG_NATIVE to API\ndocs\").\n\nWithout this check, test/parallel/test-cli-node-print-help.js will fail\nwhen configured --without-ssl, as it some of the descriptions for these\nenvironment variables contain flags that the test is not expecting to find.\n\nPR-URL: https://github.com/nodejs/node/pull/24556\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Sam Roberts <vieuxtech@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "567b9f86cc2fa94ea6cd8cf53b5c832081a908d6",
    "files": [
        {
            "sha": "5d2c1daa075e0dcef09a29b74c4ba4650afeed60",
            "filename": "lib/internal/print_help.js",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/567b9f86cc2fa94ea6cd8cf53b5c832081a908d6/lib%2Finternal%2Fprint_help.js",
            "raw_url": "https://github.com/nodejs/node/raw/567b9f86cc2fa94ea6cd8cf53b5c832081a908d6/lib%2Finternal%2Fprint_help.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprint_help.js?ref=567b9f86cc2fa94ea6cd8cf53b5c832081a908d6",
            "patch": "@@ -1,6 +1,7 @@\n 'use strict';\n \n const { types } = internalBinding('options');\n+const hasCrypto = Boolean(process.versions.openssl);\n \n const typeLookup = [];\n for (const key of Object.keys(types))\n@@ -33,11 +34,6 @@ const envVars = new Map([\n     'certificate validation' }],\n   ['NODE_V8_COVERAGE', { helpText: 'directory to output v8 coverage JSON ' +\n     'to' }],\n-  ['OPENSSL_CONF', { helpText: 'load OpenSSL configuration from file' }],\n-  ['SSL_CERT_DIR', { helpText: 'sets OpenSSL\\'s directory of trusted ' +\n-    'certificates when used in conjunction with --use-openssl-ca' }],\n-  ['SSL_CERT_FILE', { helpText: 'sets OpenSSL\\'s trusted certificate file ' +\n-    'when used in conjunction with --use-openssl-ca' }],\n   ['UV_THREADPOOL_SIZE', { helpText: 'sets the number of threads used in ' +\n     'libuv\\'s threadpool' }]\n ].concat(hasIntl ? [\n@@ -46,6 +42,12 @@ const envVars = new Map([\n ] : []).concat(hasNodeOptions ? [\n   ['NODE_OPTIONS', { helpText: 'set CLI options in the environment via a ' +\n     'space-separated list' }]\n+] : []).concat(hasCrypto ? [\n+  ['OPENSSL_CONF', { helpText: 'load OpenSSL configuration from file' }],\n+  ['SSL_CERT_DIR', { helpText: 'sets OpenSSL\\'s directory of trusted ' +\n+    'certificates when used in conjunction with --use-openssl-ca' }],\n+  ['SSL_CERT_FILE', { helpText: 'sets OpenSSL\\'s trusted certificate file ' +\n+    'when used in conjunction with --use-openssl-ca' }],\n ] : []));\n \n "
        }
    ],
    "stats": {
        "total": 12,
        "additions": 7,
        "deletions": 5
    }
}