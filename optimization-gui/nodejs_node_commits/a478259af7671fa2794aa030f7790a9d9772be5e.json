{
    "author": "unknown",
    "message": "test,util: add missing tests and conditions\n\n1) Add missing unit tests by `ucs-2` in different kinds of cases.\n2) Add missing unit tests by `usc-2` in different kinds of cases.\n3) Fix a bugï¼šWe cannot find `ucs-2` in `case 5`'s `if` condition after\n`toLowerCase()`\n\nPR-URL: https://github.com/nodejs/node/pull/21455\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "a478259af7671fa2794aa030f7790a9d9772be5e",
    "files": [
        {
            "sha": "65cf5b1b0ce18c31530f0bd640424d8f781afea3",
            "filename": "benchmark/util/normalize-encoding.js",
            "status": "modified",
            "additions": 17,
            "deletions": 8,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/a478259af7671fa2794aa030f7790a9d9772be5e/benchmark%2Futil%2Fnormalize-encoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/a478259af7671fa2794aa030f7790a9d9772be5e/benchmark%2Futil%2Fnormalize-encoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Futil%2Fnormalize-encoding.js?ref=a478259af7671fa2794aa030f7790a9d9772be5e",
            "patch": "@@ -4,18 +4,25 @@ const common = require('../common.js');\n const assert = require('assert');\n \n const groupedInputs = {\n-  group_common: ['undefined', 'utf8', 'utf-8', 'base64', 'binary', 'latin1'],\n-  group_upper: ['UTF-8', 'UTF8', 'UCS2', 'UTF-16LE', 'UTF16LE', 'BASE64'],\n-  group_uncommon: [ 'foo', '1', 'false', 'undefined', '[]'],\n+  group_common: ['undefined', 'utf8', 'utf-8', 'base64',\n+                 'binary', 'latin1', 'ucs-2', 'usc-2'],\n+  group_upper: ['UTF-8', 'UTF8', 'UCS2', 'UTF-16LE',\n+                'UTF16LE', 'BASE64', 'UCS-2', 'USC-2'],\n+  group_uncommon: ['foo', '1', 'false', 'undefined', '[]', '{}'],\n   group_misc: ['', 'utf16le', 'usc2', 'hex', 'HEX', 'BINARY']\n };\n \n const inputs = [\n-  '', 'utf8', 'utf-8', 'UTF-8',\n-  'UTF8', 'Utf8', 'uTf-8', 'utF-8', 'ucs2',\n-  'UCS2', 'utf16le', 'utf-16le', 'UTF-16LE', 'UTF16LE',\n+  '',\n+  'utf8', 'utf-8', 'UTF-8',\n+  'UTF8', 'Utf8', 'uTf-8', 'utF-8',\n+  'ucs2', 'UCS2', 'UcS2',\n+  'USC2', 'usc2', 'uSc2',\n+  'ucs-2', 'UCS-2', 'UcS-2',\n+  'usc-2', 'USC-2', 'uSc-2',\n+  'utf16le', 'utf-16le', 'UTF-16LE', 'UTF16LE',\n   'binary', 'BINARY', 'latin1', 'base64', 'BASE64',\n-  'hex', 'HEX', 'foo', '1', 'false', 'undefined', '[]'];\n+  'hex', 'HEX', 'foo', '1', 'false', 'undefined', '[]', '{}'];\n \n const bench = common.createBenchmark(main, {\n   input: inputs.concat(Object.keys(groupedInputs)),\n@@ -42,6 +49,8 @@ function getInput(input) {\n       return [undefined];\n     case '[]':\n       return [[]];\n+    case '{}':\n+      return [{}];\n     default:\n       return [input];\n   }\n@@ -53,7 +62,7 @@ function main({ input, n }) {\n   var noDead = '';\n \n   bench.start();\n-  for (var i = 0; i < n; i += 1) {\n+  for (var i = 0; i < n; ++i) {\n     for (var j = 0; j < inputs.length; ++j) {\n       noDead = normalizeEncoding(inputs[j]);\n     }"
        },
        {
            "sha": "bc513e7fedf79e20085242b55b262d04bd27cb12",
            "filename": "lib/internal/util.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/a478259af7671fa2794aa030f7790a9d9772be5e/lib%2Finternal%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/a478259af7671fa2794aa030f7790a9d9772be5e/lib%2Finternal%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil.js?ref=a478259af7671fa2794aa030f7790a9d9772be5e",
            "patch": "@@ -115,7 +115,7 @@ function slowCases(enc) {\n       if (enc === 'ucs2' || enc === 'UCS2') return 'utf16le';\n       enc = `${enc}`.toLowerCase();\n       if (enc === 'utf8') return 'utf8';\n-      if (enc === 'ucs2' || enc === 'UCS2') return 'utf16le';\n+      if (enc === 'ucs2') return 'utf16le';\n       break;\n     case 3:\n       if (enc === 'hex' || enc === 'HEX' || `${enc}`.toLowerCase() === 'hex')\n@@ -131,6 +131,7 @@ function slowCases(enc) {\n       if (enc === 'utf-8') return 'utf8';\n       if (enc === 'ascii') return 'ascii';\n       if (enc === 'usc-2') return 'utf16le';\n+      if (enc === 'ucs-2') return 'utf16le';\n       break;\n     case 6:\n       if (enc === 'base64') return 'base64';"
        },
        {
            "sha": "2f16d55fad247ce8204c4884008d5d7d868cb925",
            "filename": "test/parallel/test-internal-util-normalizeencoding.js",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/a478259af7671fa2794aa030f7790a9d9772be5e/test%2Fparallel%2Ftest-internal-util-normalizeencoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/a478259af7671fa2794aa030f7790a9d9772be5e/test%2Fparallel%2Ftest-internal-util-normalizeencoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-util-normalizeencoding.js?ref=a478259af7671fa2794aa030f7790a9d9772be5e",
            "patch": "@@ -18,10 +18,16 @@ const tests = [\n   ['utF-8', 'utf8'],\n   ['ucs2', 'utf16le'],\n   ['UCS2', 'utf16le'],\n+  ['ucs-2', 'utf16le'],\n+  ['UCS-2', 'utf16le'],\n+  ['UcS-2', 'utf16le'],\n   ['utf16le', 'utf16le'],\n   ['utf-16le', 'utf16le'],\n   ['UTF-16LE', 'utf16le'],\n   ['UTF16LE', 'utf16le'],\n+  ['usc-2', 'utf16le'],\n+  ['USC-2', 'utf16le'],\n+  ['uSc-2', 'utf16le'],\n   ['binary', 'latin1'],\n   ['BINARY', 'latin1'],\n   ['latin1', 'latin1'],\n@@ -36,6 +42,7 @@ const tests = [\n   [NaN, undefined],\n   [0, undefined],\n   [[], undefined],\n+  [{}, undefined]\n ];\n \n tests.forEach((e, i) => {"
        }
    ],
    "stats": {
        "total": 35,
        "additions": 26,
        "deletions": 9
    }
}