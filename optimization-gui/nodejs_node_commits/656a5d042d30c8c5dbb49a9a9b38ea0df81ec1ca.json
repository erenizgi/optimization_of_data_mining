{
    "author": "BridgeAR",
    "message": "assert: fix infinite loop\n\nIn rare cirumstances it is possible to get a identical error diff.\nIn such a case the advances diffing runs into a infinite loop.\nThis fixes it by properly checking for extra entries.\n\nPR-URL: https://github.com/nodejs/node/pull/18611\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "656a5d042d30c8c5dbb49a9a9b38ea0df81ec1ca",
    "files": [
        {
            "sha": "6d3b0557803563fd765cc16f19e2c25f2bc401c8",
            "filename": "lib/internal/errors.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/656a5d042d30c8c5dbb49a9a9b38ea0df81ec1ca/lib%2Finternal%2Ferrors.js",
            "raw_url": "https://github.com/nodejs/node/raw/656a5d042d30c8c5dbb49a9a9b38ea0df81ec1ca/lib%2Finternal%2Ferrors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ferrors.js?ref=656a5d042d30c8c5dbb49a9a9b38ea0df81ec1ca",
            "patch": "@@ -184,6 +184,8 @@ function createErrDiff(actual, expected, operator) {\n     }\n     actualLines.pop();\n     expectedLines.pop();\n+    if (actualLines.length === 0 || expectedLines.length === 0)\n+      break;\n     a = actualLines[actualLines.length - 1];\n     b = expectedLines[expectedLines.length - 1];\n   }"
        },
        {
            "sha": "f3f0012f84251e94c461020a1c3f0dd2813045b3",
            "filename": "test/parallel/test-assert.js",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/656a5d042d30c8c5dbb49a9a9b38ea0df81ec1ca/test%2Fparallel%2Ftest-assert.js",
            "raw_url": "https://github.com/nodejs/node/raw/656a5d042d30c8c5dbb49a9a9b38ea0df81ec1ca/test%2Fparallel%2Ftest-assert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert.js?ref=656a5d042d30c8c5dbb49a9a9b38ea0df81ec1ca",
            "patch": "@@ -31,6 +31,7 @@ const { EOL } = require('os');\n const EventEmitter = require('events');\n const { errorCache } = require('internal/errors');\n const { writeFileSync, unlinkSync } = require('fs');\n+const { inspect } = require('util');\n const a = assert;\n \n assert.ok(a.AssertionError.prototype instanceof Error,\n@@ -565,6 +566,17 @@ common.expectsError(\n     () => assert.deepEqual(Array(12).fill(1), Array(12).fill(2)),\n     { message });\n \n+  const obj1 = {};\n+  const obj2 = { loop: 'forever' };\n+  obj2[inspect.custom] = () => '{}';\n+  // No infinite loop and no custom inspect.\n+  assert.throws(() => assert.deepEqual(obj1, obj2), {\n+    message: `${start}\\n` +\n+    `${actExp}\\n` +\n+    '\\n' +\n+    '  {}'\n+  });\n+\n   // notDeepEqual tests\n   message = 'Identical input passed to notDeepStrictEqual:\\n[\\n  1\\n]';\n   assert.throws("
        }
    ],
    "stats": {
        "total": 14,
        "additions": 14,
        "deletions": 0
    }
}