{
    "author": "joyeecheung",
    "message": "src: remove pushValueToArray and SetupProcessObject\n\nThe usage of NODE_PUSH_VAL_TO_ARRAY_MAX and\npush_values_to_array_function has all been removed\nin favor of the new Array::New API that takes a C++\narray. Remove the unused code.\n\nPR-URL: https://github.com/nodejs/node/pull/24264\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "5877836a33c23dfa591f75005182fb4ab379bcdc",
    "files": [
        {
            "sha": "85bfc688b391c0d31883b5b021d24649178c6fa3",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/5877836a33c23dfa591f75005182fb4ab379bcdc/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/5877836a33c23dfa591f75005182fb4ab379bcdc/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=5877836a33c23dfa591f75005182fb4ab379bcdc",
            "patch": "@@ -17,7 +17,7 @@\n                               // avoid retaining a reference to the bootstrap\n                               // object.\n                               { _setupTraceCategoryState,\n-                                _setupProcessObject, _setupNextTick,\n+                                _setupNextTick,\n                                 _setupPromises, _chdir, _cpuUsage,\n                                 _hrtime, _hrtimeBigInt,\n                                 _memoryUsage, _rawDebug,\n@@ -376,13 +376,6 @@\n     const origProcProto = Object.getPrototypeOf(process);\n     Object.setPrototypeOf(origProcProto, EventEmitter.prototype);\n     EventEmitter.call(process);\n-\n-    _setupProcessObject(pushValueToArray);\n-\n-    function pushValueToArray() {\n-      for (var i = 0; i < arguments.length; i++)\n-        this.push(arguments[i]);\n-    }\n   }\n \n   function setupGlobalVariables() {"
        },
        {
            "sha": "c40b855b9939cae4cba3a4be38ed37a9687a82e4",
            "filename": "src/bootstrapper.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/5877836a33c23dfa591f75005182fb4ab379bcdc/src%2Fbootstrapper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/5877836a33c23dfa591f75005182fb4ab379bcdc/src%2Fbootstrapper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fbootstrapper.cc?ref=5877836a33c23dfa591f75005182fb4ab379bcdc",
            "patch": "@@ -26,12 +26,6 @@ using v8::PromiseRejectMessage;\n using v8::String;\n using v8::Value;\n \n-void SetupProcessObject(const FunctionCallbackInfo<Value>& args) {\n-  Environment* env = Environment::GetCurrent(args);\n-  CHECK(args[0]->IsFunction());\n-  env->set_push_values_to_array_function(args[0].As<Function>());\n-}\n-\n void RunMicrotasks(const FunctionCallbackInfo<Value>& args) {\n   args.GetIsolate()->RunMicrotasks();\n }\n@@ -142,7 +136,6 @@ void SetupPromises(const FunctionCallbackInfo<Value>& args) {\n void SetupBootstrapObject(Environment* env,\n                           Local<Object> bootstrapper) {\n   BOOTSTRAP_METHOD(_setupTraceCategoryState, SetupTraceCategoryState);\n-  BOOTSTRAP_METHOD(_setupProcessObject, SetupProcessObject);\n   BOOTSTRAP_METHOD(_setupNextTick, SetupNextTick);\n   BOOTSTRAP_METHOD(_setupPromises, SetupPromises);\n   BOOTSTRAP_METHOD(_chdir, Chdir);"
        },
        {
            "sha": "01f686833eab24bae89e2ebe932fd00466a5bf73",
            "filename": "src/env.h",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/5877836a33c23dfa591f75005182fb4ab379bcdc/src%2Fenv.h",
            "raw_url": "https://github.com/nodejs/node/raw/5877836a33c23dfa591f75005182fb4ab379bcdc/src%2Fenv.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.h?ref=5877836a33c23dfa591f75005182fb4ab379bcdc",
            "patch": "@@ -82,10 +82,6 @@ struct PackageConfig {\n };\n }  // namespace loader\n \n-// The number of items passed to push_values_to_array_function has diminishing\n-// returns around 8. This should be used at all call sites using said function.\n-constexpr size_t NODE_PUSH_VAL_TO_ARRAY_MAX = 8;\n-\n // Stat fields buffers contain twice the number of entries in an uv_stat_t\n // because `fs.StatWatcher` needs room to store 2 `fs.Stats` instances.\n constexpr size_t kFsStatsFieldsNumber = 14;\n@@ -353,7 +349,6 @@ constexpr size_t kFsStatsBufferLength = kFsStatsFieldsNumber * 2;\n   V(process_object, v8::Object)                                               \\\n   V(promise_handler_function, v8::Function)                                   \\\n   V(promise_wrap_template, v8::ObjectTemplate)                                \\\n-  V(push_values_to_array_function, v8::Function)                              \\\n   V(sab_lifetimepartner_constructor_template, v8::FunctionTemplate)           \\\n   V(script_context_constructor_template, v8::FunctionTemplate)                \\\n   V(script_data_constructor_function, v8::Function)                           \\"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 1,
        "deletions": 20
    }
}