{
    "author": "Trott",
    "message": "test: fix test-net-connect-econnrefused (again)\n\ntest-net-connect-econnrefused was recently fixed, but only in certain\ncircumstances. This change allows it to succeed whether it is invoked\nwith `node` or `tools/test.py`. Makes sure no Socket handles are left,\nwhich is what the test is trying to determine, rather than failing if\nthere are no handles of any kind left.\n\nPR-URL: https://github.com/nodejs/node/pull/25438\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Beth Griggs <Bethany.Griggs@uk.ibm.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "c24fccf06460581a8b788ca4784bfef89eedf8f1",
    "files": [
        {
            "sha": "0f350bd572f177be0e63ce4f204d4901b9c3e8a0",
            "filename": "test/pummel/test-net-connect-econnrefused.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/c24fccf06460581a8b788ca4784bfef89eedf8f1/test%2Fpummel%2Ftest-net-connect-econnrefused.js",
            "raw_url": "https://github.com/nodejs/node/raw/c24fccf06460581a8b788ca4784bfef89eedf8f1/test%2Fpummel%2Ftest-net-connect-econnrefused.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-net-connect-econnrefused.js?ref=c24fccf06460581a8b788ca4784bfef89eedf8f1",
            "patch": "@@ -50,7 +50,8 @@ function pummel() {\n function check() {\n   setTimeout(function() {\n     assert.strictEqual(process._getActiveRequests().length, 0);\n-    assert.strictEqual(process._getActiveHandles().length, 1); // the timer\n+    const activeHandles = process._getActiveHandles();\n+    assert.ok(activeHandles.every((val) => val.constructor.name !== 'Socket'));\n     check_called = true;\n   }, 0);\n }"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}