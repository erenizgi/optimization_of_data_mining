{
    "author": "cjihrig",
    "message": "os,report: use UV_MAXHOSTNAMESIZE\n\nUV_MAXHOSTNAMESIZE was introduced in libuv 1.26.0. Use this\ninstead of including multiple header files, adding fallback\nifdef logic, and remembering to add one to the buffer size\nfor the terminating nul character with MAXHOSTNAMELEN.\n\nPR-URL: https://github.com/nodejs/node/pull/26038\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "8ecf313324e619d7211adaee76c6b7bb1882e12b",
    "files": [
        {
            "sha": "fa27b7bac51b8173ee86cc27c241175cb817360f",
            "filename": "src/node_os.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/8ecf313324e619d7211adaee76c6b7bb1882e12b/src%2Fnode_os.cc",
            "raw_url": "https://github.com/nodejs/node/raw/8ecf313324e619d7211adaee76c6b7bb1882e12b/src%2Fnode_os.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_os.cc?ref=8ecf313324e619d7211adaee76c6b7bb1882e12b",
            "patch": "@@ -33,16 +33,9 @@\n \n #ifdef __POSIX__\n # include <limits.h>        // PATH_MAX on Solaris.\n-# include <netdb.h>         // MAXHOSTNAMELEN on Solaris.\n # include <unistd.h>        // gethostname, sysconf\n-# include <sys/param.h>     // MAXHOSTNAMELEN on Linux and the BSDs.\n #endif  // __POSIX__\n \n-// Add Windows fallback.\n-#ifndef MAXHOSTNAMELEN\n-# define MAXHOSTNAMELEN 256\n-#endif  // MAXHOSTNAMELEN\n-\n namespace node {\n namespace os {\n \n@@ -66,7 +59,7 @@ using v8::Value;\n \n static void GetHostname(const FunctionCallbackInfo<Value>& args) {\n   Environment* env = Environment::GetCurrent(args);\n-  char buf[MAXHOSTNAMELEN + 1];\n+  char buf[UV_MAXHOSTNAMESIZE];\n   size_t size = sizeof(buf);\n   int r = uv_os_gethostname(buf, &size);\n "
        },
        {
            "sha": "8f882b9887424e6b7ee60c173a8bf6316aaaf7d4",
            "filename": "src/node_report.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 10,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/8ecf313324e619d7211adaee76c6b7bb1882e12b/src%2Fnode_report.cc",
            "raw_url": "https://github.com/nodejs/node/raw/8ecf313324e619d7211adaee76c6b7bb1882e12b/src%2Fnode_report.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_report.cc?ref=8ecf313324e619d7211adaee76c6b7bb1882e12b",
            "patch": "@@ -47,15 +47,6 @@\n extern char** environ;\n #endif\n \n-#ifdef __POSIX__\n-# include <netdb.h>         // MAXHOSTNAMELEN on Solaris.\n-# include <sys/param.h>     // MAXHOSTNAMELEN on Linux and the BSDs.\n-#endif  // __POSIX__\n-\n-#ifndef MAXHOSTNAMELEN\n-# define MAXHOSTNAMELEN 256\n-#endif  // MAXHOSTNAMELEN\n-\n namespace report {\n using node::arraysize;\n using node::Environment;\n@@ -377,7 +368,7 @@ static void PrintVersionInformation(JSONWriter* writer) {\n     writer->json_keyvalue(\"osMachine\", os_info.machine);\n   }\n \n-  char host[MAXHOSTNAMELEN + 1];\n+  char host[UV_MAXHOSTNAMESIZE];\n   size_t host_size = sizeof(host);\n \n   if (uv_os_gethostname(host, &host_size) == 0)"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 2,
        "deletions": 18
    }
}