{
    "author": "ZauberNerd",
    "message": "test: add whatwg-encoding TextDecoder custom inspection with showHidden\n\nThese tests ensure hidden fields are shown when inspecting with\n`showHidden` and that passing negative `depth` prints simplified value.\n\nCo-authored-by: Robin Drexler <drexler.robin@gmail.com>\nPR-URL: https://github.com/nodejs/node/pull/24166\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Daijiro Wachi <daijiro.wachi@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "57869bf06f9d29cc27005c388f970391916e2914",
    "files": [
        {
            "sha": "0a812504f6179ed5396b46c60ca92d814ecf95f5",
            "filename": "test/parallel/test-whatwg-encoding-textdecoder.js",
            "status": "modified",
            "additions": 37,
            "deletions": 0,
            "changes": 37,
            "blob_url": "https://github.com/nodejs/node/blob/57869bf06f9d29cc27005c388f970391916e2914/test%2Fparallel%2Ftest-whatwg-encoding-textdecoder.js",
            "raw_url": "https://github.com/nodejs/node/raw/57869bf06f9d29cc27005c388f970391916e2914/test%2Fparallel%2Ftest-whatwg-encoding-textdecoder.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-encoding-textdecoder.js?ref=57869bf06f9d29cc27005c388f970391916e2914",
            "patch": "@@ -5,6 +5,7 @@ const common = require('../common');\n \n const assert = require('assert');\n const { customInspectSymbol: inspect } = require('internal/util');\n+const util = require('util');\n \n const buf = Buffer.from([0xef, 0xbb, 0xbf, 0x74, 0x65,\n                          0x73, 0x74, 0xe2, 0x82, 0xac]);\n@@ -97,6 +98,42 @@ if (common.hasIntl) {\n   assert.strictEqual(res, 'testâ‚¬');\n }\n \n+// Test TextDecoder inspect with hidden fields\n+{\n+  const dec = new TextDecoder('utf-8', { ignoreBOM: true });\n+  if (common.hasIntl) {\n+    assert.strictEqual(\n+      util.inspect(dec, { showHidden: true }),\n+      'TextDecoder {\\n  encoding: \\'utf-8\\',\\n  fatal: false,\\n  ' +\n+      'ignoreBOM: true,\\n  [Symbol(flags)]: 4,\\n  [Symbol(handle)]: {} }'\n+    );\n+  } else {\n+    assert.strictEqual(\n+      util.inspect(dec, { showHidden: true }),\n+      'TextDecoder {\\n  encoding: \\'utf-8\\',\\n  fatal: false,\\n  ' +\n+      'ignoreBOM: true,\\n  [Symbol(flags)]: 4,\\n  [Symbol(handle)]:\\n   ' +\n+      'StringDecoder {\\n     encoding: \\'utf8\\',\\n     ' +\n+      '[Symbol(kNativeDecoder)]: <Buffer 00 00 00 00 00 00 01> } }'\n+    );\n+  }\n+}\n+\n+\n+// Test TextDecoder inspect without hidden fields\n+{\n+  const dec = new TextDecoder('utf-8', { ignoreBOM: true });\n+  assert.strictEqual(\n+    util.inspect(dec, { showHidden: false }),\n+    'TextDecoder { encoding: \\'utf-8\\', fatal: false, ignoreBOM: true }'\n+  );\n+}\n+\n+// Test TextDecoder inspect with negative depth\n+{\n+  const dec = new TextDecoder();\n+  assert.strictEqual(util.inspect(dec, { depth: -1 }), '[Object]');\n+}\n+\n {\n   const inspectFn = TextDecoder.prototype[inspect];\n   const decodeFn = TextDecoder.prototype.decode;"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 37,
        "deletions": 0
    }
}