{
    "author": "BridgeAR",
    "message": "fs: fix functions executed in wrong context\n\nThe callback should run in the global scope and not in the FSReqWrap\ncontext.\n\nPR-URL: https://github.com/nodejs/node/pull/18668\nRefs: https://github.com/nodejs/node/pull/12562\nRefs: https://github.com/nodejs/node/pull/12976\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>",
    "sha": "c3eb3efa315382d1073d6a126f4d888cf3e121ec",
    "files": [
        {
            "sha": "543e6b8c618f55d41e1d60be73c563ed995c0247",
            "filename": "lib/fs.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/c3eb3efa315382d1073d6a126f4d888cf3e121ec/lib%2Ffs.js",
            "raw_url": "https://github.com/nodejs/node/raw/c3eb3efa315382d1073d6a126f4d888cf3e121ec/lib%2Ffs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ffs.js?ref=c3eb3efa315382d1073d6a126f4d888cf3e121ec",
            "patch": "@@ -737,7 +737,7 @@ fs.ftruncateSync = function(fd, len = 0) {\n };\n \n fs.rmdir = function(path, callback) {\n-  callback = maybeCallback(callback);\n+  callback = makeCallback(callback);\n   path = getPathFromURL(path);\n   validatePath(path);\n   const req = new FSReqWrap();\n@@ -1784,7 +1784,7 @@ fs.realpath = function realpath(p, options, callback) {\n \n \n fs.realpath.native = function(path, options, callback) {\n-  callback = maybeCallback(callback || options);\n+  callback = makeCallback(callback || options);\n   options = getOptions(options, {});\n   path = getPathFromURL(path);\n   validatePath(path);"
        },
        {
            "sha": "6427dbd34034d9101f8aded03f070159c8774007",
            "filename": "test/parallel/test-fs-mkdir-rmdir.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/c3eb3efa315382d1073d6a126f4d888cf3e121ec/test%2Fparallel%2Ftest-fs-mkdir-rmdir.js",
            "raw_url": "https://github.com/nodejs/node/raw/c3eb3efa315382d1073d6a126f4d888cf3e121ec/test%2Fparallel%2Ftest-fs-mkdir-rmdir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-mkdir-rmdir.js?ref=c3eb3efa315382d1073d6a126f4d888cf3e121ec",
            "patch": "@@ -29,6 +29,7 @@ fs.mkdir(d, 0o666, common.mustCall(function(err) {\n   assert.ifError(err);\n \n   fs.mkdir(d, 0o666, common.mustCall(function(err) {\n+    assert.strictEqual(this, undefined);\n     assert.ok(err, 'got no error');\n     assert.ok(/^EEXIST/.test(err.message), 'got no EEXIST message');\n     assert.strictEqual(err.code, 'EEXIST', 'got no EEXIST code');"
        },
        {
            "sha": "93b5a278cf4f1e52128398947156a396982ac91b",
            "filename": "test/parallel/test-fs-realpath-native.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/c3eb3efa315382d1073d6a126f4d888cf3e121ec/test%2Fparallel%2Ftest-fs-realpath-native.js",
            "raw_url": "https://github.com/nodejs/node/raw/c3eb3efa315382d1073d6a126f4d888cf3e121ec/test%2Fparallel%2Ftest-fs-realpath-native.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-realpath-native.js?ref=c3eb3efa315382d1073d6a126f4d888cf3e121ec",
            "patch": "@@ -6,7 +6,8 @@ const fs = require('fs');\n if (!common.isOSX) common.skip('MacOS-only test.');\n \n assert.strictEqual(fs.realpathSync.native('/users'), '/Users');\n-fs.realpath.native('/users', common.mustCall((err, res) => {\n+fs.realpath.native('/users', common.mustCall(function(err, res) {\n   assert.ifError(err);\n   assert.strictEqual(res, '/Users');\n+  assert.strictEqual(this, undefined);\n }));"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 5,
        "deletions": 3
    }
}