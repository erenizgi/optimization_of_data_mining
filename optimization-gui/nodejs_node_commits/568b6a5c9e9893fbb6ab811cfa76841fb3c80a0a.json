{
    "author": "apapirovski",
    "message": "timers: be more defensive with intervals\n\nIt's possible for user-code to flip an existing timeout to\nbe an interval during its execution, in which case the\ncurrent code would crash due to start being undefined. Fix\nthis by providing a default start value within rearm.\n\nPR-URL: https://github.com/nodejs/node/pull/18579\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "568b6a5c9e9893fbb6ab811cfa76841fb3c80a0a",
    "files": [
        {
            "sha": "4d41b5dc8a4e3edc966db0e7353380329128d60d",
            "filename": "lib/timers.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/568b6a5c9e9893fbb6ab811cfa76841fb3c80a0a/lib%2Ftimers.js",
            "raw_url": "https://github.com/nodejs/node/raw/568b6a5c9e9893fbb6ab811cfa76841fb3c80a0a/lib%2Ftimers.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ftimers.js?ref=568b6a5c9e9893fbb6ab811cfa76841fb3c80a0a",
            "patch": "@@ -442,8 +442,7 @@ function ontimeout(timer, start) {\n     rearm(timer, start);\n }\n \n-\n-function rearm(timer, start) {\n+function rearm(timer, start = TimerWrap.now()) {\n   // // Do not re-arm unenroll'd or closed timers.\n   if (timer._idleTimeout === -1) return;\n "
        },
        {
            "sha": "6952f2231a7e18bbf8b83ac80700494af22acc74",
            "filename": "test/parallel/test-timers-timeout-to-interval.js",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/568b6a5c9e9893fbb6ab811cfa76841fb3c80a0a/test%2Fparallel%2Ftest-timers-timeout-to-interval.js",
            "raw_url": "https://github.com/nodejs/node/raw/568b6a5c9e9893fbb6ab811cfa76841fb3c80a0a/test%2Fparallel%2Ftest-timers-timeout-to-interval.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-timers-timeout-to-interval.js?ref=568b6a5c9e9893fbb6ab811cfa76841fb3c80a0a",
            "patch": "@@ -0,0 +1,12 @@\n+'use strict';\n+const common = require('../common');\n+\n+// This isn't officially supported but nonetheless is something that is\n+// currently possible and as such it shouldn't cause the process to crash\n+\n+const t = setTimeout(common.mustCall(() => {\n+  if (t._repeat) {\n+    clearInterval(t);\n+  }\n+  t._repeat = true;\n+}, 2), 1);"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 13,
        "deletions": 2
    }
}