{
    "author": "unknown",
    "message": "tools: prepare tools/genv8constants.py for Python 3\n\nPR-URL: https://github.com/nodejs/node/pull/24801\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "ae3ee28abd0c794ec7782831f50578374eececb5",
    "files": [
        {
            "sha": "8ab2ed8bae50c02cc7db77470325d000ca34d0bc",
            "filename": "tools/genv8constants.py",
            "status": "modified",
            "additions": 31,
            "deletions": 31,
            "changes": 62,
            "blob_url": "https://github.com/nodejs/node/blob/ae3ee28abd0c794ec7782831f50578374eececb5/tools%2Fgenv8constants.py",
            "raw_url": "https://github.com/nodejs/node/raw/ae3ee28abd0c794ec7782831f50578374eececb5/tools%2Fgenv8constants.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fgenv8constants.py?ref=ae3ee28abd0c794ec7782831f50578374eececb5",
            "patch": "@@ -15,13 +15,13 @@\n \n if len(sys.argv) != 3:\n   print(\"usage: objsym.py outfile libv8_base.a\")\n-  sys.exit(2);\n+  sys.exit(2)\n \n-outfile = file(sys.argv[1], 'w');\n+outfile = open(sys.argv[1], 'w')\n try:\n   pipe = subprocess.Popen([ 'objdump', '-z', '-D', sys.argv[2] ],\n-      bufsize=-1, stdout=subprocess.PIPE).stdout;\n-except OSError, e:\n+      bufsize=-1, stdout=subprocess.PIPE).stdout\n+except OSError as e:\n   if e.errno == errno.ENOENT:\n     print('''\n       Node.js compile error: could not find objdump\n@@ -33,9 +33,9 @@\n \n   sys.exit()\n \n-pattern = re.compile('([0-9a-fA-F]{8}|[0-9a-fA-F]{16}) <(.*)>:');\n+pattern = re.compile('([0-9a-fA-F]{8}|[0-9a-fA-F]{16}) <(.*)>:')\n v8dbg = re.compile('^v8dbg.*$')\n-numpattern = re.compile('^[0-9a-fA-F]{2} $');\n+numpattern = re.compile('^[0-9a-fA-F]{2} $')\n octets = 4\n \n outfile.write(\"\"\"\n@@ -49,28 +49,28 @@\n #ifndef V8_CONSTANTS_H\n #define V8_CONSTANTS_H\n \n-\"\"\");\n+\"\"\")\n \n-curr_sym = None;\n-curr_val = 0;\n-curr_octet = 0;\n+curr_sym = None\n+curr_val = 0\n+curr_octet = 0\n \n def out_reset():\n   global curr_sym, curr_val, curr_octet\n-  curr_sym = None;\n-  curr_val = 0;\n-  curr_octet = 0;\n+  curr_sym = None\n+  curr_val = 0\n+  curr_octet = 0\n \n def out_define():\n   global curr_sym, curr_val, curr_octet, outfile, octets\n   if curr_sym != None:\n-    wrapped_val = curr_val & 0xffffffff;\n+    wrapped_val = curr_val & 0xffffffff\n     if curr_val & 0x80000000 != 0:\n-      wrapped_val = 0x100000000 - wrapped_val;\n-      outfile.write(\"#define %s -0x%x\\n\" % (curr_sym.upper(), wrapped_val));\n+      wrapped_val = 0x100000000 - wrapped_val\n+      outfile.write(\"#define %s -0x%x\\n\" % (curr_sym.upper(), wrapped_val))\n     else:\n-      outfile.write(\"#define %s 0x%x\\n\" % (curr_sym.upper(), wrapped_val));\n-  out_reset();\n+      outfile.write(\"#define %s 0x%x\\n\" % (curr_sym.upper(), wrapped_val))\n+  out_reset()\n \n for line in pipe:\n   if curr_sym != None:\n@@ -81,35 +81,35 @@ def out_define():\n     # much like hex numbers (e.g., \"adc\"), and we don't want to risk picking\n     # those up by mistake, so we look at character-based columns instead.\n     #\n-    for i in range (0, 3):\n+    for i in range(0, 3):\n       # 6-character margin, 2-characters + 1 space for each field\n-      idx = 6 + i * 3;\n+      idx = 6 + i * 3\n       octetstr = line[idx:idx+3]\n       if curr_octet > octets:\n-        break;\n+        break\n \n       if not numpattern.match(octetstr):\n-        break;\n+        break\n \n-      curr_val += int('0x%s' % octetstr, 16) << (curr_octet * 8);\n-      curr_octet += 1;\n+      curr_val += int('0x%s' % octetstr, 16) << (curr_octet * 8)\n+      curr_octet += 1\n \n   match = pattern.match(line)\n   if match == None:\n-    continue;\n+    continue\n \n   # Print previous symbol\n-  out_define();\n+  out_define()\n \n-  v8match = v8dbg.match(match.group(2));\n+  v8match = v8dbg.match(match.group(2))\n   if v8match != None:\n-    out_reset();\n-    curr_sym = match.group(2);\n+    out_reset()\n+    curr_sym = match.group(2)\n \n # Print last symbol\n-out_define();\n+out_define()\n \n outfile.write(\"\"\"\n \n #endif /* V8_CONSTANTS_H */\n-\"\"\");\n+\"\"\")"
        }
    ],
    "stats": {
        "total": 62,
        "additions": 31,
        "deletions": 31
    }
}