{
    "author": "targos",
    "message": "deps: patch V8 to 6.9.427.23\n\nPR-URL: https://github.com/nodejs/node/pull/22898\nRefs: https://github.com/v8/v8/compare/6.9.427.22...6.9.427.23\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>",
    "sha": "2811ae48017828579928999e3c4f77fb4c32f77c",
    "files": [
        {
            "sha": "57fbc629644c090235ecf1590cc0b0d1e446a630",
            "filename": "deps/v8/include/v8-version.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/2811ae48017828579928999e3c4f77fb4c32f77c/deps%2Fv8%2Finclude%2Fv8-version.h",
            "raw_url": "https://github.com/nodejs/node/raw/2811ae48017828579928999e3c4f77fb4c32f77c/deps%2Fv8%2Finclude%2Fv8-version.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-version.h?ref=2811ae48017828579928999e3c4f77fb4c32f77c",
            "patch": "@@ -11,7 +11,7 @@\n #define V8_MAJOR_VERSION 6\n #define V8_MINOR_VERSION 9\n #define V8_BUILD_NUMBER 427\n-#define V8_PATCH_LEVEL 22\n+#define V8_PATCH_LEVEL 23\n \n // Use 1 for candidates and 0 otherwise.\n // (Boolean macro values are not supported by all preprocessors.)"
        },
        {
            "sha": "7ff27dc769b41b195e528a680086a4a1d987ebe6",
            "filename": "deps/v8/src/wasm/wasm-js.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/2811ae48017828579928999e3c4f77fb4c32f77c/deps%2Fv8%2Fsrc%2Fwasm%2Fwasm-js.cc",
            "raw_url": "https://github.com/nodejs/node/raw/2811ae48017828579928999e3c4f77fb4c32f77c/deps%2Fv8%2Fsrc%2Fwasm%2Fwasm-js.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fwasm%2Fwasm-js.cc?ref=2811ae48017828579928999e3c4f77fb4c32f77c",
            "patch": "@@ -729,6 +729,7 @@ void WebAssemblyInstantiate(const v8::FunctionCallbackInfo<v8::Value>& args) {\n   if (!i::wasm::IsWasmCodegenAllowed(i_isolate, i_isolate->native_context())) {\n     thrower.CompileError(\"Wasm code generation disallowed by embedder\");\n     compilation_resolver->OnCompilationFailed(thrower.Reify());\n+    return;\n   }\n \n   // Asynchronous compilation handles copying wire bytes if necessary."
        },
        {
            "sha": "f1303e845fe2154645ef8c4dd1675bf62ecc376f",
            "filename": "deps/v8/test/mjsunit/wasm/disallow-codegen.js",
            "status": "modified",
            "additions": 39,
            "deletions": 0,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/2811ae48017828579928999e3c4f77fb4c32f77c/deps%2Fv8%2Ftest%2Fmjsunit%2Fwasm%2Fdisallow-codegen.js",
            "raw_url": "https://github.com/nodejs/node/raw/2811ae48017828579928999e3c4f77fb4c32f77c/deps%2Fv8%2Ftest%2Fmjsunit%2Fwasm%2Fdisallow-codegen.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fmjsunit%2Fwasm%2Fdisallow-codegen.js?ref=2811ae48017828579928999e3c4f77fb4c32f77c",
            "patch": "@@ -65,6 +65,16 @@ async function AsyncTestOk() {\n     promise, module => assertInstanceof(module, WebAssembly.Module));\n }\n \n+async function AsyncTestWithInstantiateOk() {\n+  print('async module instantiate (ok)...');\n+  %DisallowCodegenFromStrings(false);\n+  %DisallowWasmCodegen(false);\n+  let promise = WebAssembly.instantiate(buffer);\n+  assertPromiseResult(\n+      promise,\n+      module => assertInstanceof(module.instance, WebAssembly.Instance));\n+}\n+\n async function AsyncTestFail() {\n   print('async module compile (fail)...');\n   %DisallowCodegenFromStrings(true);\n@@ -78,6 +88,19 @@ async function AsyncTestFail() {\n   }\n }\n \n+async function AsyncTestWithInstantiateFail() {\n+  print('async module instantiate (fail)...');\n+  %DisallowCodegenFromStrings(true);\n+  %DisallowWasmCodegen(false);\n+  try {\n+    let m = await WebAssembly.instantiate(buffer);\n+    assertUnreachable();\n+  } catch (e) {\n+    print(\"  \" + e);\n+    assertInstanceof(e, WebAssembly.CompileError);\n+  }\n+}\n+\n async function AsyncTestWasmFail(disallow_codegen) {\n   print('async wasm module compile (fail)...');\n   %DisallowCodegenFromStrings(disallow_codegen);\n@@ -91,6 +114,19 @@ async function AsyncTestWasmFail(disallow_codegen) {\n   }\n }\n \n+async function AsyncTestWasmWithInstantiateFail(disallow_codegen) {\n+  print('async wasm module instantiate (fail)...');\n+  %DisallowCodegenFromStrings(disallow_codegen);\n+  %DisallowWasmCodegen(true);\n+  try {\n+    let m = await WebAssembly.instantiate(buffer);\n+    assertUnreachable();\n+  } catch (e) {\n+    print(\"  \" + e);\n+    assertInstanceof(e, WebAssembly.CompileError);\n+  }\n+}\n+\n async function StreamingTestOk() {\n   print('streaming module compile (ok)...');\n   // TODO(titzer): compileStreaming must be supplied by embedder.\n@@ -149,14 +185,17 @@ async function RunAll() {\n   await SyncTestOk();\n   await SyncTestFail();\n   await AsyncTestOk();\n+  await AsyncTestWithInstantiateOk();\n   await AsyncTestFail();\n+  await AsyncTestWithInstantiateFail();\n   await StreamingTestOk();\n   await StreamingTestFail();\n \n   disallow_codegen = false;\n   for (count = 0; count < 2; ++count) {\n     SyncTestWasmFail(disallow_codegen);\n     AsyncTestWasmFail(disallow_codegen);\n+    AsyncTestWasmWithInstantiateFail(disallow_codegen);\n     StreamingTestWasmFail(disallow_codegen)\n     disallow_codegen = true;\n   }"
        }
    ],
    "stats": {
        "total": 42,
        "additions": 41,
        "deletions": 1
    }
}