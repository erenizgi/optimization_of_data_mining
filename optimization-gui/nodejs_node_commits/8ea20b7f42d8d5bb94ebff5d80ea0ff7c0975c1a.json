{
    "author": "cjihrig",
    "message": "src: reduce variable scope in cares_wrap.cc\n\nPR-URL: https://github.com/nodejs/node/pull/23297\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Gabriel Schulhof <gabriel.schulhof@intel.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "8ea20b7f42d8d5bb94ebff5d80ea0ff7c0975c1a",
    "files": [
        {
            "sha": "1a83a1cf7adf09e7a2a8815c5dfd5070dda3d46e",
            "filename": "src/cares_wrap.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/8ea20b7f42d8d5bb94ebff5d80ea0ff7c0975c1a/src%2Fcares_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/8ea20b7f42d8d5bb94ebff5d80ea0ff7c0975c1a/src%2Fcares_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fcares_wrap.cc?ref=8ea20b7f42d8d5bb94ebff5d80ea0ff7c0975c1a",
            "patch": "@@ -429,17 +429,16 @@ void cares_wrap_hostent_cpy(struct hostent* dest, struct hostent* src) {\n \n   /* copy `h_aliases` */\n   size_t alias_count;\n-  size_t cur_alias_length;\n   for (alias_count = 0;\n       src->h_aliases[alias_count] != nullptr;\n       alias_count++) {\n   }\n \n   dest->h_aliases = node::Malloc<char*>(alias_count + 1);\n   for (size_t i = 0; i < alias_count; i++) {\n-    cur_alias_length = strlen(src->h_aliases[i]);\n-    dest->h_aliases[i] = node::Malloc(cur_alias_length + 1);\n-    memcpy(dest->h_aliases[i], src->h_aliases[i], cur_alias_length + 1);\n+    const size_t cur_alias_size = strlen(src->h_aliases[i]) + 1;\n+    dest->h_aliases[i] = node::Malloc(cur_alias_size);\n+    memcpy(dest->h_aliases[i], src->h_aliases[i], cur_alias_size);\n   }\n   dest->h_aliases[alias_count] = nullptr;\n \n@@ -1065,7 +1064,6 @@ int ParseSoaReply(Environment* env,\n   /* Can't use ares_parse_soa_reply() here which can only parse single record */\n   unsigned int ancount = cares_get_16bit(buf + 6);\n   unsigned char* ptr = buf + NS_HFIXEDSZ;\n-  int rr_type, rr_len;\n   char* name;\n   char* rr_name;\n   long temp_len;  // NOLINT(runtime/int)\n@@ -1094,8 +1092,8 @@ int ParseSoaReply(Environment* env,\n       break;\n     }\n \n-    rr_type = cares_get_16bit(ptr);\n-    rr_len = cares_get_16bit(ptr + 8);\n+    const int rr_type = cares_get_16bit(ptr);\n+    const int rr_len = cares_get_16bit(ptr + 8);\n     ptr += NS_RRFIXEDSZ;\n \n     /* only need SOA */"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 5,
        "deletions": 7
    }
}