{
    "author": "domahony",
    "message": "test: update assert messages to show expected and actual values\n\nuses the same approach as in test-fs-readfile-pipe-large\n\nPR-URL: https://github.com/nodejs/node/pull/19420\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "3217c707185a0918818a14f5f9ddf400d5590c7d",
    "files": [
        {
            "sha": "65975655dc10fabc64bf674916de3f6876cff8b4",
            "filename": "test/fixtures/readfile_pipe_test.txt",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/3217c707185a0918818a14f5f9ddf400d5590c7d/test%2Ffixtures%2Freadfile_pipe_test.txt",
            "raw_url": "https://github.com/nodejs/node/raw/3217c707185a0918818a14f5f9ddf400d5590c7d/test%2Ffixtures%2Freadfile_pipe_test.txt",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Freadfile_pipe_test.txt?ref=3217c707185a0918818a14f5f9ddf400d5590c7d",
            "patch": "@@ -0,0 +1,5 @@\n+xxxx xxxx xxxx xxxx\n+xxxx xxxx xxxx xxxx\n+xxxx xxxx xxxx xxxx\n+xxxx xxxx xxxx xxxx\n+xxxx xxxx xxxx xxxx"
        },
        {
            "sha": "c9f7144c11a6f62a435e4e1610966b99fbe5f69a",
            "filename": "test/parallel/test-fs-readfile-pipe.js",
            "status": "modified",
            "additions": 14,
            "deletions": 5,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/3217c707185a0918818a14f5f9ddf400d5590c7d/test%2Fparallel%2Ftest-fs-readfile-pipe.js",
            "raw_url": "https://github.com/nodejs/node/raw/3217c707185a0918818a14f5f9ddf400d5590c7d/test%2Fparallel%2Ftest-fs-readfile-pipe.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-readfile-pipe.js?ref=3217c707185a0918818a14f5f9ddf400d5590c7d",
            "patch": "@@ -30,8 +30,6 @@ if (common.isWindows || common.isAIX)\n const assert = require('assert');\n const fs = require('fs');\n \n-const dataExpected = fs.readFileSync(__filename, 'utf8');\n-\n if (process.argv[2] === 'child') {\n   fs.readFile('/dev/stdin', function(er, data) {\n     assert.ifError(er);\n@@ -40,13 +38,24 @@ if (process.argv[2] === 'child') {\n   return;\n }\n \n+const fixtures = require('../common/fixtures');\n+\n+const filename = fixtures.path('readfile_pipe_test.txt');\n+const dataExpected = fs.readFileSync(filename).toString();\n+\n const exec = require('child_process').exec;\n const f = JSON.stringify(__filename);\n const node = JSON.stringify(process.execPath);\n-const cmd = `cat ${f} | ${node} ${f} child`;\n+const cmd = `cat ${filename} | ${node} ${f} child`;\n exec(cmd, function(err, stdout, stderr) {\n   assert.ifError(err);\n-  assert.strictEqual(stdout, dataExpected, 'it reads the file and outputs it');\n-  assert.strictEqual(stderr, '', 'it does not write to stderr');\n+  assert.strictEqual(\n+    stdout,\n+    dataExpected,\n+    `expected to read: '${dataExpected}' but got: '${stdout}'`);\n+  assert.strictEqual(\n+    stderr,\n+    '',\n+    `expected not to read anything from stderr but got: '${stderr}'`);\n   console.log('ok');\n });"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 19,
        "deletions": 5
    }
}