{
    "author": "sam-github",
    "message": "doc: describe certificate object properties\n\nPR-URL: https://github.com/nodejs/node/pull/24358\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>",
    "sha": "a856406c2dc0f6edf9b33067cd91fa1a71eab041",
    "files": [
        {
            "sha": "3f52b7872cbbd12c9f7fba37130aa905908f4fa9",
            "filename": "doc/api/tls.md",
            "status": "modified",
            "additions": 69,
            "deletions": 59,
            "changes": 128,
            "blob_url": "https://github.com/nodejs/node/blob/a856406c2dc0f6edf9b33067cd91fa1a71eab041/doc%2Fapi%2Ftls.md",
            "raw_url": "https://github.com/nodejs/node/raw/a856406c2dc0f6edf9b33067cd91fa1a71eab041/doc%2Fapi%2Ftls.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Ftls.md?ref=a856406c2dc0f6edf9b33067cd91fa1a71eab041",
            "patch": "@@ -638,44 +638,84 @@ added: v0.11.4\n \n * `detailed` {boolean} Include the full certificate chain if `true`, otherwise\n   include just the peer's certificate.\n-* Returns: {Object}\n+* Returns: {Object} A certificate object.\n \n-Returns an object representing the peer's certificate. The returned object has\n-some properties corresponding to the fields of the certificate.\n+Returns an object representing the peer's certificate. If the peer does not\n+provide a certificate, an empty object will be returned. If the socket has been\n+destroyed, `null` will be returned.\n \n If the full certificate chain was requested, each certificate will include an\n `issuerCertificate` property containing an object representing its issuer's\n certificate.\n \n+#### Certificate Object\n+\n+A certificate object has properties corresponding to the fields of the\n+certificate.\n+\n+* `raw` {Buffer} The DER encoded X.509 certificate data.\n+* `subject` {Object} The certificate subject, described in terms of\n+   Country (`C:`), StateOrProvince (`ST`), Locality (`L`), Organization (`O`),\n+   OrganizationalUnit (`OU`), and CommonName (`CN`). The CommonName is typically\n+   a DNS name with TLS certificates. Example:\n+   `{C: 'UK', ST: 'BC', L: 'Metro', O: 'Node Fans', OU: 'Docs', CN: 'example.com'}`.\n+* `issuer` {Object} The certificate issuer, described in the same terms as the\n+   `subject`.\n+* `valid_from` {string} The date-time the certificate is valid from.\n+* `valid_to` {string} The date-time the certificate is valid to.\n+* `serialNumber` {string} The certificate serial number, as a hex string.\n+   Example: `'B9B0D332A1AA5635'`.\n+* `fingerprint` {string} The SHA-1 digest of the DER encoded certificate. It is\n+  returned as a `:` separated hexadecimal string. Example: `'2A:7A:C2:DD:...'`.\n+* `fingerprint256` {string} The SHA-256 digest of the DER encoded certificate.\n+   It is returned as a `:` separated hexadecimal string. Example:\n+   `'2A:7A:C2:DD:...'`.\n+* `ext_key_usage` {Array} (Optional) The extended key usage, a set of OIDs.\n+* `subjectaltname` {Array} (Optional) An array of names for the subject, an\n+   alternative to the `subject` names.\n+* `infoAccess` {Array} (Optional) An array describing the AuthorityInfoAccess,\n+   used with OCSP.\n+* `issuerCert` {Object} (Optional) The issuer certificate object. For\n+   self-signed certificates, this may be a circular reference.\n+\n+The certificate may contain information about the public key, depending on\n+the key type.\n+\n+For RSA keys, the following properties may be defined:\n+* `exponent` {string} The RSA exponent, as a string in hexadecimal number\n+  notation.  Example: `'0x010001'`.\n+* `modulus` {string} The RSA modulus, as a hexadecimal string. Example:\n+   `'B56CE45CB7...'`.\n+* `pubkey` {Buffer} The public key.\n+\n+\n ```text\n { subject:\n-   { C: 'UK',\n-     ST: 'Acknack Ltd',\n-     L: 'Rhys Jones',\n-     O: 'node.js',\n-     OU: 'Test TLS Certificate',\n-     CN: 'localhost' },\n+   { OU: [ 'Domain Control Validated', 'PositiveSSL Wildcard' ],\n+     CN: '*.nodejs.org' },\n   issuer:\n-   { C: 'UK',\n-     ST: 'Acknack Ltd',\n-     L: 'Rhys Jones',\n-     O: 'node.js',\n-     OU: 'Test TLS Certificate',\n-     CN: 'localhost' },\n-  issuerCertificate:\n-   { ... another certificate, possibly with an .issuerCertificate ... },\n-  raw: < RAW DER buffer >,\n-  pubkey: < RAW DER buffer >,\n-  valid_from: 'Nov 11 09:52:22 2009 GMT',\n-  valid_to: 'Nov 6 09:52:22 2029 GMT',\n-  fingerprint: '2A:7A:C2:DD:E5:F9:CC:53:72:35:99:7A:02:5A:71:38:52:EC:8A:DF',\n-  fingerprint256: '2A:7A:C2:DD:E5:F9:CC:53:72:35:99:7A:02:5A:71:38:52:EC:8A:DF:00:11:22:33:44:55:66:77:88:99:AA:BB',\n-  serialNumber: 'B9B0D332A1AA5635' }\n+   { C: 'GB',\n+     ST: 'Greater Manchester',\n+     L: 'Salford',\n+     O: 'COMODO CA Limited',\n+     CN: 'COMODO RSA Domain Validation Secure Server CA' },\n+  subjectaltname: 'DNS:*.nodejs.org, DNS:nodejs.org',\n+  infoAccess:\n+   { 'CA Issuers - URI':\n+      [ 'http://crt.comodoca.com/COMODORSADomainValidationSecureServerCA.crt' ],\n+     'OCSP - URI': [ 'http://ocsp.comodoca.com' ] },\n+  modulus: 'B56CE45CB740B09A13F64AC543B712FF9EE8E4C284B542A1708A27E82A8D151CA178153E12E6DDA15BF70FFD96CB8A88618641BDFCCA03527E665B70D779C8A349A6F88FD4EF6557180BD4C98192872BCFE3AF56E863C09DDD8BC1EC58DF9D94F914F0369102B2870BECFA1348A0838C9C49BD1C20124B442477572347047506B1FCD658A80D0C44BCC16BC5C5496CFE6E4A8428EF654CD3D8972BF6E5BFAD59C93006830B5EB1056BBB38B53D1464FA6E02BFDF2FF66CD949486F0775EC43034EC2602AEFBF1703AD221DAA2A88353C3B6A688EFE8387811F645CEED7B3FE46E1F8B9F59FAD028F349B9BC14211D5830994D055EEA3D547911E07A0ADDEB8A82B9188E58720D95CD478EEC9AF1F17BE8141BE80906F1A339445A7EB5B285F68039B0F294598A7D1C0005FC22B5271B0752F58CCDEF8C8FD856FB7AE21C80B8A2CE983AE94046E53EDE4CB89F42502D31B5360771C01C80155918637490550E3F555E2EE75CC8C636DDE3633CFEDD62E91BF0F7688273694EEEBA20C2FC9F14A2A435517BC1D7373922463409AB603295CEB0BB53787A334C9CA3CA8B30005C5A62FC0715083462E00719A8FA3ED0A9828C3871360A73F8B04A4FC1E71302844E9BB9940B77E745C9D91F226D71AFCAD4B113AAF68D92B24DDB4A2136B55A1CD1ADF39605B63CB639038ED0F4C987689866743A68769CC55847E4A06D6E2E3F1',\n+  exponent: '0x10001',\n+  pubkey: <Buffer ... >,\n+  valid_from: 'Aug 14 00:00:00 2017 GMT',\n+  valid_to: 'Nov 20 23:59:59 2019 GMT',\n+  fingerprint: '01:02:59:D9:C3:D2:0D:08:F7:82:4E:44:A4:B4:53:C5:E2:3A:87:4D',\n+  fingerprint256: '69:AE:1A:6A:D4:3D:C6:C1:1B:EA:C6:23:DE:BA:2A:14:62:62:93:5C:7A:EA:06:41:9B:0B:BC:87:CE:48:4E:02',\n+  ext_key_usage: [ '1.3.6.1.5.5.7.3.1', '1.3.6.1.5.5.7.3.2' ],\n+  serialNumber: '66593D57F20CBC573E433381B5FEC280',\n+  raw: <Buffer ... > }\n ```\n \n-If the peer does not provide a certificate, an empty object will be returned.\n-If the socket has been destroyed, `null` will be returned.\n-\n ### tlsSocket.getPeerFinished()\n <!-- YAML\n added: v9.9.0\n@@ -830,8 +870,7 @@ added: v0.8.4\n \n * `hostname` {string} The host name or IP address to verify the certificate\n   against.\n-* `cert` {Object} An object representing the peer's certificate. The returned\n-  object has some properties corresponding to the fields of the certificate.\n+* `cert` {Object} A [certificate object][] representing the peer's certificate.\n * Returns: {Error|undefined}\n \n Verifies the certificate `cert` is issued to `hostname`.\n@@ -847,36 +886,6 @@ the checks done with additional verification.\n This function is only called if the certificate passed all other checks, such as\n being issued by trusted CA (`options.ca`).\n \n-The cert object contains the parsed certificate and will have a structure\n-similar to:\n-\n-```text\n-{ subject:\n-   { OU: [ 'Domain Control Validated', 'PositiveSSL Wildcard' ],\n-     CN: '*.nodejs.org' },\n-  issuer:\n-   { C: 'GB',\n-     ST: 'Greater Manchester',\n-     L: 'Salford',\n-     O: 'COMODO CA Limited',\n-     CN: 'COMODO RSA Domain Validation Secure Server CA' },\n-  subjectaltname: 'DNS:*.nodejs.org, DNS:nodejs.org',\n-  infoAccess:\n-   { 'CA Issuers - URI':\n-      [ 'http://crt.comodoca.com/COMODORSADomainValidationSecureServerCA.crt' ],\n-     'OCSP - URI': [ 'http://ocsp.comodoca.com' ] },\n-  modulus: 'B56CE45CB740B09A13F64AC543B712FF9EE8E4C284B542A1708A27E82A8D151CA178153E12E6DDA15BF70FFD96CB8A88618641BDFCCA03527E665B70D779C8A349A6F88FD4EF6557180BD4C98192872BCFE3AF56E863C09DDD8BC1EC58DF9D94F914F0369102B2870BECFA1348A0838C9C49BD1C20124B442477572347047506B1FCD658A80D0C44BCC16BC5C5496CFE6E4A8428EF654CD3D8972BF6E5BFAD59C93006830B5EB1056BBB38B53D1464FA6E02BFDF2FF66CD949486F0775EC43034EC2602AEFBF1703AD221DAA2A88353C3B6A688EFE8387811F645CEED7B3FE46E1F8B9F59FAD028F349B9BC14211D5830994D055EEA3D547911E07A0ADDEB8A82B9188E58720D95CD478EEC9AF1F17BE8141BE80906F1A339445A7EB5B285F68039B0F294598A7D1C0005FC22B5271B0752F58CCDEF8C8FD856FB7AE21C80B8A2CE983AE94046E53EDE4CB89F42502D31B5360771C01C80155918637490550E3F555E2EE75CC8C636DDE3633CFEDD62E91BF0F7688273694EEEBA20C2FC9F14A2A435517BC1D7373922463409AB603295CEB0BB53787A334C9CA3CA8B30005C5A62FC0715083462E00719A8FA3ED0A9828C3871360A73F8B04A4FC1E71302844E9BB9940B77E745C9D91F226D71AFCAD4B113AAF68D92B24DDB4A2136B55A1CD1ADF39605B63CB639038ED0F4C987689866743A68769CC55847E4A06D6E2E3F1',\n-  exponent: '0x10001',\n-  pubkey: <Buffer ... >,\n-  valid_from: 'Aug 14 00:00:00 2017 GMT',\n-  valid_to: 'Nov 20 23:59:59 2019 GMT',\n-  fingerprint: '01:02:59:D9:C3:D2:0D:08:F7:82:4E:44:A4:B4:53:C5:E2:3A:87:4D',\n-  fingerprint256: '69:AE:1A:6A:D4:3D:C6:C1:1B:EA:C6:23:DE:BA:2A:14:62:62:93:5C:7A:EA:06:41:9B:0B:BC:87:CE:48:4E:02',\n-  ext_key_usage: [ '1.3.6.1.5.5.7.3.1', '1.3.6.1.5.5.7.3.2' ],\n-  serialNumber: '66593D57F20CBC573E433381B5FEC280',\n-  raw: <Buffer ... > }\n-```\n-\n ## tls.connect(options[, callback])\n <!-- YAML\n added: v0.11.3\n@@ -1402,5 +1411,6 @@ where `secureSocket` has the same API as `pair.cleartext`.\n [TLS Session Tickets]: https://www.ietf.org/rfc/rfc5077.txt\n [TLS recommendations]: https://wiki.mozilla.org/Security/Server_Side_TLS\n [asn1.js]: https://www.npmjs.com/package/asn1.js\n+[certificate object]: #tls_certificate_object\n [modifying the default cipher suite]: #tls_modifying_the_default_tls_cipher_suite\n [specific attacks affecting larger AES key sizes]: https://www.schneier.com/blog/archives/2009/07/another_new_aes.html"
        }
    ],
    "stats": {
        "total": 128,
        "additions": 69,
        "deletions": 59
    }
}