{
    "author": "sagirk",
    "message": "test: refactor test to use arrow functions\n\nIn `test/parallel/test-cluster-send-deadlock.js`, callbacks use\nanonymous closure functions. It is safe to replace them with arrow\nfunctions since these callbacks don't contain references to `this`,\n`super` or `arguments`. This results in shorter functions.\n\nPR-URL: https://github.com/nodejs/node/pull/24479\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>",
    "sha": "a67b22a21888ec5812b1c3e8ef75e78db49ac9e1",
    "files": [
        {
            "sha": "b34eb892adb4644f82665c421072e17c5228b48b",
            "filename": "test/parallel/test-cluster-send-deadlock.js",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/a67b22a21888ec5812b1c3e8ef75e78db49ac9e1/test%2Fparallel%2Ftest-cluster-send-deadlock.js",
            "raw_url": "https://github.com/nodejs/node/raw/a67b22a21888ec5812b1c3e8ef75e78db49ac9e1/test%2Fparallel%2Ftest-cluster-send-deadlock.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-send-deadlock.js?ref=a67b22a21888ec5812b1c3e8ef75e78db49ac9e1",
            "patch": "@@ -30,42 +30,42 @@ const net = require('net');\n \n if (cluster.isMaster) {\n   const worker = cluster.fork();\n-  worker.on('exit', function(code, signal) {\n+  worker.on('exit', (code, signal) => {\n     assert.strictEqual(code, 0, `Worker exited with an error code: ${code}`);\n     assert(!signal, `Worker exited by a signal: ${signal}`);\n     server.close();\n   });\n \n-  const server = net.createServer(function(socket) {\n+  const server = net.createServer((socket) => {\n     worker.send('handle', socket);\n   });\n \n-  server.listen(0, function() {\n+  server.listen(0, () => {\n     worker.send({ message: 'listen', port: server.address().port });\n   });\n } else {\n-  process.on('message', function(msg, handle) {\n+  process.on('message', (msg, handle) => {\n     if (msg.message && msg.message === 'listen') {\n       assert(msg.port);\n       const client1 = net.connect({\n         host: 'localhost',\n         port: msg.port\n-      }, function() {\n+      }, () => {\n         const client2 = net.connect({\n           host: 'localhost',\n           port: msg.port\n-        }, function() {\n+        }, () => {\n           client1.on('close', onclose);\n           client2.on('close', onclose);\n           client1.end();\n           client2.end();\n         });\n       });\n       let waiting = 2;\n-      function onclose() {\n+      const onclose = () => {\n         if (--waiting === 0)\n           cluster.worker.disconnect();\n-      }\n+      };\n     } else {\n       process.send('reply', handle);\n     }"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 8,
        "deletions": 8
    }
}