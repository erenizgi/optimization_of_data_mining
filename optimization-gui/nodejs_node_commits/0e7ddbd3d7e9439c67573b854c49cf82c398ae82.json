{
    "author": "targos",
    "message": "deps: update V8 to 7.0.276.20\n\nPR-URL: https://github.com/nodejs/node/pull/22754\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
    "files": [
        {
            "sha": "511e24d90c740fed393b6aec9a0e3b7c03fd0008",
            "filename": "deps/v8/.gitignore",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2F.gitignore",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2F.gitignore",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.gitignore?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -36,6 +36,7 @@\n /_*\n /build\n /buildtools\n+/check-header-includes\n /hydrogen.cfg\n /obj\n /out\n@@ -68,6 +69,7 @@\n !/third_party/googletest/src/googletest/include/gtest\n /third_party/googletest/src/googletest/include/gtest/*\n !/third_party/googletest/src/googletest/include/gtest/gtest_prod.h\n+!/third_party/v8\n /tools/clang\n /tools/gcmole/gcmole-tools\n /tools/gcmole/gcmole-tools.tar.gz"
        },
        {
            "sha": "398cef1ad526c0de39a9b98428e216fd62f76aab",
            "filename": "deps/v8/.vpython",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2F.vpython",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2F.vpython",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.vpython?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -1,7 +1,7 @@\n # This is a vpython \"spec\" file.\n #\n # It describes patterns for python wheel dependencies of the python scripts in\n-# the chromium repo, particularly for dependencies that have compiled components\n+# the V8 repo, particularly for dependencies that have compiled components\n # (since pure-python dependencies can be easily vendored into third_party).\n #\n # When vpython is invoked, it finds this file and builds a python VirtualEnv,"
        },
        {
            "sha": "898bc8feaecd0821c4386a27d9c738f07142716e",
            "filename": "deps/v8/AUTHORS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2FAUTHORS",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2FAUTHORS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FAUTHORS?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -17,6 +17,7 @@ Opera Software ASA <*@opera.com>\n Intel Corporation <*@intel.com>\n MIPS Technologies, Inc. <*@mips.com>\n Imagination Technologies, LLC <*@imgtec.com>\n+Wave Computing, Inc. <*@wavecomp.com>\n Loongson Technology Corporation Limited <*@loongson.cn>\n Code Aurora Forum <*@codeaurora.org>\n Home Jinni Inc. <*@homejinni.com>\n@@ -100,6 +101,7 @@ Kang-Hao (Kenny) Lu <kennyluck@csail.mit.edu>\n Karl Skomski <karl@skomski.com>\n Kevin Gibbons <bakkot@gmail.com>\n Kris Selden <kris.selden@gmail.com>\n+Kyounga Ra <kyounga@alticast.com>\n Loo Rong Jie <loorongjie@gmail.com>\n Luis Reis <luis.m.reis@gmail.com>\n Luke Zarko <lukezarko@gmail.com>"
        },
        {
            "sha": "c6a58776cd6a81cf5653b94a8db1a04dd7e54045",
            "filename": "deps/v8/BUILD.gn",
            "status": "modified",
            "additions": 132,
            "deletions": 72,
            "changes": 204,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2FBUILD.gn",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2FBUILD.gn",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FBUILD.gn?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -25,10 +25,6 @@ declare_args() {\n   # Dynamically set an additional dependency from v8/custom_deps.\n   v8_custom_deps = \"\"\n \n-  # Turns on deprecation warnings for HeapObject::GetIsolate,\n-  # HeapObject::GetHeap, Handle(T* obj) and handle(T* obj).\n-  v8_deprecate_get_isolate = false\n-\n   # Turns on all V8 debug features. Enables running V8 in a pseudo debug mode\n   # within a release Chrome.\n   v8_enable_debugging_features = is_debug\n@@ -43,10 +39,10 @@ declare_args() {\n   v8_enable_verify_predictable = false\n \n   # Enable compiler warnings when using V8_DEPRECATED apis.\n-  v8_deprecation_warnings = false\n+  v8_deprecation_warnings = true\n \n   # Enable compiler warnings when using V8_DEPRECATE_SOON apis.\n-  v8_imminent_deprecation_warnings = false\n+  v8_imminent_deprecation_warnings = true\n \n   # Embeds the given script into the snapshot.\n   v8_embed_script = \"\"\n@@ -77,10 +73,11 @@ declare_args() {\n \n   # Enable embedded builtins.\n   # TODO(jgruber,v8:6666): Support ia32 and maybe MSVC.\n-  # TODO(jgruber,v8:6666): Enable for remaining architectures once performance\n-  #                        regressions are addressed.\n-  v8_enable_embedded_builtins =\n-      v8_use_snapshot && v8_current_cpu == \"x64\" && (!is_win || is_clang)\n+  v8_enable_embedded_builtins = v8_use_snapshot && v8_current_cpu != \"x86\" &&\n+                                !is_aix && (!is_win || is_clang)\n+\n+  # Enable embedded bytecode handlers.\n+  v8_enable_embedded_bytecode_handlers = false\n \n   # Enable code-generation-time checking of types in the CodeStubAssembler.\n   v8_enable_verify_csa = false\n@@ -162,6 +159,11 @@ declare_args() {\n \n   # Enable minor mark compact.\n   v8_enable_minor_mc = true\n+\n+  # Check that each header can be included in isolation (requires also\n+  # setting the \"check_v8_header_includes\" gclient variable to run a\n+  # specific hook).\n+  v8_check_header_includes = false\n }\n \n # Derived defaults.\n@@ -190,6 +192,13 @@ if (v8_check_microtasks_scopes_consistency == \"\") {\n \n assert(!v8_enable_embedded_builtins || v8_use_snapshot,\n        \"Embedded builtins only work with snapshots\")\n+assert(\n+    v8_current_cpu != \"x86\" || !v8_enable_embedded_builtins ||\n+        !v8_untrusted_code_mitigations,\n+    \"Embedded builtins on ia32 and untrusted code mitigations are incompatible\")\n+\n+assert(!v8_enable_embedded_bytecode_handlers || v8_enable_embedded_builtins,\n+       \"Embedded bytecode handlers only work with embedded builtins\")\n \n # Specifies if the target build is a simulator build. Comparing target cpu\n # with v8 target cpu to not affect simulator builds for making cross-compile\n@@ -260,6 +269,12 @@ config(\"external_config\") {\n   if (v8_enable_v8_checks) {\n     defines += [ \"V8_ENABLE_CHECKS\" ]  # Used in \"include/v8.h\".\n   }\n+  if (v8_deprecation_warnings) {\n+    defines += [ \"V8_DEPRECATION_WARNINGS\" ]\n+  }\n+  if (v8_imminent_deprecation_warnings) {\n+    defines += [ \"V8_IMMINENT_DEPRECATION_WARNINGS\" ]\n+  }\n   include_dirs = [\n     \"include\",\n     \"$target_gen_dir/include\",\n@@ -340,9 +355,6 @@ config(\"features\") {\n   if (v8_imminent_deprecation_warnings) {\n     defines += [ \"V8_IMMINENT_DEPRECATION_WARNINGS\" ]\n   }\n-  if (v8_deprecate_get_isolate) {\n-    defines += [ \"DEPRECATE_GET_ISOLATE\" ]\n-  }\n   if (v8_enable_i18n_support) {\n     defines += [ \"V8_INTL_SUPPORT\" ]\n   }\n@@ -367,6 +379,9 @@ config(\"features\") {\n   if (v8_enable_embedded_builtins) {\n     defines += [ \"V8_EMBEDDED_BUILTINS\" ]\n   }\n+  if (v8_enable_embedded_bytecode_handlers) {\n+    defines += [ \"V8_EMBEDDED_BYTECODE_HANDLERS\" ]\n+  }\n   if (v8_use_multi_snapshots) {\n     defines += [ \"V8_MULTI_SNAPSHOTS\" ]\n   }\n@@ -586,10 +601,6 @@ config(\"toolchain\") {\n         v8_current_cpu == \"mips64el\") {\n       cflags += [ \"-Wshorten-64-to-32\" ]\n     }\n-\n-    if (v8_deprecate_get_isolate) {\n-      cflags += [ \"-Wno-error=deprecated\" ]\n-    }\n   }\n \n   if (is_win) {\n@@ -846,6 +857,8 @@ action(\"postmortem-metadata\") {\n     \"src/objects/fixed-array.h\",\n     \"src/objects/js-array-inl.h\",\n     \"src/objects/js-array.h\",\n+    \"src/objects/js-array-buffer-inl.h\",\n+    \"src/objects/js-array-buffer.h\",\n     \"src/objects/js-regexp-inl.h\",\n     \"src/objects/js-regexp.h\",\n     \"src/objects/js-regexp-string-iterator-inl.h\",\n@@ -872,11 +885,13 @@ action(\"postmortem-metadata\") {\n torque_files = [\n   \"src/builtins/base.tq\",\n   \"src/builtins/array.tq\",\n+  \"src/builtins/array-copywithin.tq\",\n   \"src/builtins/array-foreach.tq\",\n-  \"src/builtins/array-sort.tq\",\n+  \"src/builtins/array-reverse.tq\",\n   \"src/builtins/typed-array.tq\",\n   \"src/builtins/data-view.tq\",\n   \"test/torque/test-torque.tq\",\n+  \"third_party/v8/builtins/array-sort.tq\",\n ]\n \n torque_modules = [\n@@ -1106,6 +1121,7 @@ action(\"v8_dump_build_config\") {\n     rebase_path(\"$root_out_dir/v8_build_config.json\", root_build_dir),\n     \"current_cpu=\\\"$current_cpu\\\"\",\n     \"dcheck_always_on=$dcheck_always_on\",\n+    \"is_android=$is_android\",\n     \"is_asan=$is_asan\",\n     \"is_cfi=$is_cfi\",\n     \"is_component_build=$is_component_build\",\n@@ -1502,11 +1518,13 @@ v8_source_set(\"v8_base\") {\n     \"src/allocation.cc\",\n     \"src/allocation.h\",\n     \"src/api-arguments-inl.h\",\n+    \"src/api-arguments.cc\",\n     \"src/api-arguments.h\",\n     \"src/api-natives.cc\",\n     \"src/api-natives.h\",\n     \"src/api.cc\",\n     \"src/api.h\",\n+    \"src/arguments-inl.h\",\n     \"src/arguments.cc\",\n     \"src/arguments.h\",\n     \"src/asan.h\",\n@@ -1521,6 +1539,7 @@ v8_source_set(\"v8_base\") {\n     \"src/asmjs/asm-types.h\",\n     \"src/asmjs/switch-logic.cc\",\n     \"src/asmjs/switch-logic.h\",\n+    \"src/assembler-arch-inl.h\",\n     \"src/assembler-arch.h\",\n     \"src/assembler-inl.h\",\n     \"src/assembler.cc\",\n@@ -1591,6 +1610,7 @@ v8_source_set(\"v8_base\") {\n     \"src/builtins/builtins-symbol.cc\",\n     \"src/builtins/builtins-trace.cc\",\n     \"src/builtins/builtins-typed-array.cc\",\n+    \"src/builtins/builtins-utils-inl.h\",\n     \"src/builtins/builtins-utils.h\",\n     \"src/builtins/builtins.cc\",\n     \"src/builtins/builtins.h\",\n@@ -1726,6 +1746,8 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/js-graph.h\",\n     \"src/compiler/js-heap-broker.cc\",\n     \"src/compiler/js-heap-broker.h\",\n+    \"src/compiler/js-heap-copy-reducer.cc\",\n+    \"src/compiler/js-heap-copy-reducer.h\",\n     \"src/compiler/js-inlining-heuristic.cc\",\n     \"src/compiler/js-inlining-heuristic.h\",\n     \"src/compiler/js-inlining.cc\",\n@@ -1892,6 +1914,7 @@ v8_source_set(\"v8_base\") {\n     \"src/dtoa.h\",\n     \"src/eh-frame.cc\",\n     \"src/eh-frame.h\",\n+    \"src/elements-inl.h\",\n     \"src/elements-kind.cc\",\n     \"src/elements-kind.h\",\n     \"src/elements.cc\",\n@@ -1967,6 +1990,8 @@ v8_source_set(\"v8_base\") {\n     \"src/heap/heap-controller.cc\",\n     \"src/heap/heap-controller.h\",\n     \"src/heap/heap-inl.h\",\n+    \"src/heap/heap-write-barrier-inl.h\",\n+    \"src/heap/heap-write-barrier.h\",\n     \"src/heap/heap.cc\",\n     \"src/heap/heap.h\",\n     \"src/heap/incremental-marking-inl.h\",\n@@ -1979,6 +2004,7 @@ v8_source_set(\"v8_base\") {\n     \"src/heap/invalidated-slots.h\",\n     \"src/heap/item-parallel-job.cc\",\n     \"src/heap/item-parallel-job.h\",\n+    \"src/heap/local-allocator-inl.h\",\n     \"src/heap/local-allocator.h\",\n     \"src/heap/mark-compact-inl.h\",\n     \"src/heap/mark-compact.cc\",\n@@ -2002,6 +2028,7 @@ v8_source_set(\"v8_base\") {\n     \"src/heap/spaces-inl.h\",\n     \"src/heap/spaces.cc\",\n     \"src/heap/spaces.h\",\n+    \"src/heap/store-buffer-inl.h\",\n     \"src/heap/store-buffer.cc\",\n     \"src/heap/store-buffer.h\",\n     \"src/heap/stress-marking-observer.cc\",\n@@ -2101,6 +2128,7 @@ v8_source_set(\"v8_base\") {\n     \"src/lookup-cache-inl.h\",\n     \"src/lookup-cache.cc\",\n     \"src/lookup-cache.h\",\n+    \"src/lookup-inl.h\",\n     \"src/lookup.cc\",\n     \"src/lookup.h\",\n     \"src/lsan.h\",\n@@ -2110,6 +2138,8 @@ v8_source_set(\"v8_base\") {\n     \"src/macro-assembler.h\",\n     \"src/map-updater.cc\",\n     \"src/map-updater.h\",\n+    \"src/maybe-handles-inl.h\",\n+    \"src/maybe-handles.h\",\n     \"src/messages.cc\",\n     \"src/messages.h\",\n     \"src/msan.h\",\n@@ -2144,15 +2174,31 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/intl-objects-inl.h\",\n     \"src/objects/intl-objects.cc\",\n     \"src/objects/intl-objects.h\",\n+    \"src/objects/js-array-buffer-inl.h\",\n+    \"src/objects/js-array-buffer.cc\",\n+    \"src/objects/js-array-buffer.h\",\n     \"src/objects/js-array-inl.h\",\n     \"src/objects/js-array.h\",\n+    \"src/objects/js-collator-inl.h\",\n+    \"src/objects/js-collator.cc\",\n+    \"src/objects/js-collator.h\",\n     \"src/objects/js-collection-inl.h\",\n     \"src/objects/js-collection.h\",\n+    \"src/objects/js-generator-inl.h\",\n+    \"src/objects/js-generator.h\",\n+    \"src/objects/js-list-format-inl.h\",\n+    \"src/objects/js-list-format.cc\",\n+    \"src/objects/js-list-format.h\",\n     \"src/objects/js-locale-inl.h\",\n     \"src/objects/js-locale.cc\",\n     \"src/objects/js-locale.h\",\n+    \"src/objects/js-plural-rules-inl.h\",\n+    \"src/objects/js-plural-rules.cc\",\n+    \"src/objects/js-plural-rules.h\",\n     \"src/objects/js-promise-inl.h\",\n     \"src/objects/js-promise.h\",\n+    \"src/objects/js-proxy-inl.h\",\n+    \"src/objects/js-proxy.h\",\n     \"src/objects/js-regexp-inl.h\",\n     \"src/objects/js-regexp-string-iterator-inl.h\",\n     \"src/objects/js-regexp-string-iterator.h\",\n@@ -2219,10 +2265,9 @@ v8_source_set(\"v8_base\") {\n     \"src/parsing/parsing.cc\",\n     \"src/parsing/parsing.h\",\n     \"src/parsing/pattern-rewriter.cc\",\n-    \"src/parsing/preparse-data.cc\",\n-    \"src/parsing/preparse-data.h\",\n     \"src/parsing/preparsed-scope-data.cc\",\n     \"src/parsing/preparsed-scope-data.h\",\n+    \"src/parsing/preparser-logger.h\",\n     \"src/parsing/preparser.cc\",\n     \"src/parsing/preparser.h\",\n     \"src/parsing/rewriter.cc\",\n@@ -2294,6 +2339,8 @@ v8_source_set(\"v8_base\") {\n     \"src/register-configuration.cc\",\n     \"src/register-configuration.h\",\n     \"src/reglist.h\",\n+    \"src/reloc-info.cc\",\n+    \"src/reloc-info.h\",\n     \"src/roots-inl.h\",\n     \"src/roots.h\",\n     \"src/runtime-profiler.cc\",\n@@ -2386,8 +2433,8 @@ v8_source_set(\"v8_base\") {\n     \"src/splay-tree.h\",\n     \"src/startup-data-util.cc\",\n     \"src/startup-data-util.h\",\n+    \"src/string-builder-inl.h\",\n     \"src/string-builder.cc\",\n-    \"src/string-builder.h\",\n     \"src/string-case.cc\",\n     \"src/string-case.h\",\n     \"src/string-hasher-inl.h\",\n@@ -2482,6 +2529,9 @@ v8_source_set(\"v8_base\") {\n     \"src/wasm/wasm-engine.h\",\n     \"src/wasm/wasm-external-refs.cc\",\n     \"src/wasm/wasm-external-refs.h\",\n+    \"src/wasm/wasm-feature-flags.h\",\n+    \"src/wasm/wasm-features.cc\",\n+    \"src/wasm/wasm-features.h\",\n     \"src/wasm/wasm-interpreter.cc\",\n     \"src/wasm/wasm-interpreter.h\",\n     \"src/wasm/wasm-js.cc\",\n@@ -2505,6 +2555,7 @@ v8_source_set(\"v8_base\") {\n     \"src/wasm/wasm-serialization.h\",\n     \"src/wasm/wasm-text.cc\",\n     \"src/wasm/wasm-text.h\",\n+    \"src/wasm/wasm-tier.h\",\n     \"src/wasm/wasm-value.h\",\n     \"src/zone/accounting-allocator.cc\",\n     \"src/zone/accounting-allocator.h\",\n@@ -2519,6 +2570,13 @@ v8_source_set(\"v8_base\") {\n     \"src/zone/zone.h\",\n   ]\n \n+  if (v8_check_header_includes) {\n+    # This file will be generated by tools/generate-header-include-checks.py\n+    # if the \"check_v8_header_includes\" gclient variable is set.\n+    import(\"check-header-includes/sources.gni\")\n+    sources += check_header_includes_sources\n+  }\n+\n   if (use_jumbo_build == true) {\n     jumbo_excluded_sources = [\n       # TODO(mostynb@vewd.com): don't exclude these http://crbug.com/752428\n@@ -2833,9 +2891,18 @@ v8_source_set(\"v8_base\") {\n       \"src/objects/intl-objects-inl.h\",\n       \"src/objects/intl-objects.cc\",\n       \"src/objects/intl-objects.h\",\n+      \"src/objects/js-collator-inl.h\",\n+      \"src/objects/js-collator.cc\",\n+      \"src/objects/js-collator.h\",\n+      \"src/objects/js-list-format-inl.h\",\n+      \"src/objects/js-list-format.cc\",\n+      \"src/objects/js-list-format.h\",\n       \"src/objects/js-locale-inl.h\",\n       \"src/objects/js-locale.cc\",\n       \"src/objects/js-locale.h\",\n+      \"src/objects/js-plural-rules-inl.h\",\n+      \"src/objects/js-plural-rules.cc\",\n+      \"src/objects/js-plural-rules.h\",\n       \"src/objects/js-relative-time-format-inl.h\",\n       \"src/objects/js-relative-time-format.cc\",\n       \"src/objects/js-relative-time-format.h\",\n@@ -2849,6 +2916,46 @@ v8_source_set(\"v8_base\") {\n   }\n }\n \n+v8_source_set(\"torque_base\") {\n+  visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n+\n+  sources = [\n+    \"src/torque/ast.h\",\n+    \"src/torque/contextual.h\",\n+    \"src/torque/declarable.cc\",\n+    \"src/torque/declarable.h\",\n+    \"src/torque/declaration-visitor.cc\",\n+    \"src/torque/declaration-visitor.h\",\n+    \"src/torque/declarations.cc\",\n+    \"src/torque/declarations.h\",\n+    \"src/torque/earley-parser.cc\",\n+    \"src/torque/earley-parser.h\",\n+    \"src/torque/file-visitor.cc\",\n+    \"src/torque/file-visitor.h\",\n+    \"src/torque/global-context.h\",\n+    \"src/torque/implementation-visitor.cc\",\n+    \"src/torque/implementation-visitor.h\",\n+    \"src/torque/scope.cc\",\n+    \"src/torque/scope.h\",\n+    \"src/torque/source-positions.cc\",\n+    \"src/torque/source-positions.h\",\n+    \"src/torque/torque-parser.cc\",\n+    \"src/torque/torque-parser.h\",\n+    \"src/torque/type-oracle.cc\",\n+    \"src/torque/type-oracle.h\",\n+    \"src/torque/types.cc\",\n+    \"src/torque/types.h\",\n+    \"src/torque/utils.cc\",\n+    \"src/torque/utils.h\",\n+  ]\n+\n+  deps = [\n+    \":v8_libbase\",\n+  ]\n+\n+  configs = [ \":internal_config\" ]\n+}\n+\n v8_component(\"v8_libbase\") {\n   sources = [\n     \"src/base/adapters.h\",\n@@ -3153,65 +3260,16 @@ if (current_toolchain == v8_snapshot_toolchain) {\n   v8_executable(\"torque\") {\n     visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n \n-    defines = [ \"ANTLR4CPP_STATIC\" ]\n-\n-    include_dirs = [\n-      \"third_party/antlr4/runtime/Cpp/runtime/src\",\n-      \"src/torque\",\n-    ]\n-\n     sources = [\n-      \"src/torque/TorqueBaseVisitor.cpp\",\n-      \"src/torque/TorqueBaseVisitor.h\",\n-      \"src/torque/TorqueLexer.cpp\",\n-      \"src/torque/TorqueLexer.h\",\n-      \"src/torque/TorqueParser.cpp\",\n-      \"src/torque/TorqueParser.h\",\n-      \"src/torque/TorqueVisitor.cpp\",\n-      \"src/torque/TorqueVisitor.h\",\n-      \"src/torque/ast-generator.cc\",\n-      \"src/torque/ast-generator.h\",\n-      \"src/torque/ast.h\",\n-      \"src/torque/contextual.h\",\n-      \"src/torque/declarable.cc\",\n-      \"src/torque/declarable.h\",\n-      \"src/torque/declaration-visitor.cc\",\n-      \"src/torque/declaration-visitor.h\",\n-      \"src/torque/declarations.cc\",\n-      \"src/torque/declarations.h\",\n-      \"src/torque/file-visitor.cc\",\n-      \"src/torque/file-visitor.h\",\n-      \"src/torque/global-context.h\",\n-      \"src/torque/implementation-visitor.cc\",\n-      \"src/torque/implementation-visitor.h\",\n-      \"src/torque/scope.cc\",\n-      \"src/torque/scope.h\",\n       \"src/torque/torque.cc\",\n-      \"src/torque/type-oracle.h\",\n-      \"src/torque/types.cc\",\n-      \"src/torque/types.h\",\n-      \"src/torque/utils.cc\",\n-      \"src/torque/utils.h\",\n     ]\n \n     deps = [\n-      \":v8_libbase\",\n-      \"third_party/antlr4:antlr4\",\n+      \":torque_base\",\n       \"//build/win:default_exe_manifest\",\n     ]\n \n-    remove_configs = [\n-      \"//build/config/compiler:no_rtti\",\n-      \"//build/config/compiler:no_exceptions\",\n-    ]\n-\n-    configs = [\n-      \"//build/config/compiler:rtti\",\n-      \"//build/config/compiler:exceptions\",\n-      \"third_party/antlr4:antlr-compatibility\",\n-      \":external_config\",\n-      \":internal_config_base\",\n-    ]\n+    configs = [ \":internal_config\" ]\n   }\n }\n \n@@ -3316,6 +3374,7 @@ if (is_component_build) {\n     ]\n \n     public_deps = [\n+      \":torque_base\",\n       \":v8_base\",\n       \":v8_maybe_snapshot\",\n     ]\n@@ -3342,6 +3401,7 @@ if (is_component_build) {\n     testonly = true\n \n     public_deps = [\n+      \":torque_base\",\n       \":v8_base\",\n       \":v8_maybe_snapshot\",\n     ]"
        },
        {
            "sha": "428325ad58c97418a015eff0608d7e859e97cd21",
            "filename": "deps/v8/ChangeLog",
            "status": "modified",
            "additions": 1515,
            "deletions": 0,
            "changes": 1515,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2FChangeLog",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2FChangeLog",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FChangeLog?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -1,3 +1,1518 @@\n+2018-08-27: Version 7.0.276\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-27: Version 7.0.275\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-26: Version 7.0.274\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-25: Version 7.0.273\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-25: Version 7.0.272\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-25: Version 7.0.271\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-25: Version 7.0.270\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.269\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.268\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.267\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.266\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.265\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.264\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.263\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.262\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.261\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.260\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-24: Version 7.0.259\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.258\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.257\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.256\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.255\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.254\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.253\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.252\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.251\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.250\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-23: Version 7.0.249\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-22: Version 7.0.248\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-22: Version 7.0.247\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-21: Version 7.0.246\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-21: Version 7.0.245\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-21: Version 7.0.244\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-21: Version 7.0.243\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-17: Version 7.0.242\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-17: Version 7.0.241\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-17: Version 7.0.240\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-17: Version 7.0.239\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-17: Version 7.0.238\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-15: Version 7.0.237\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-14: Version 7.0.236\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-14: Version 7.0.235\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-14: Version 7.0.234\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-14: Version 7.0.233\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-14: Version 7.0.232\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-14: Version 7.0.231\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-12: Version 7.0.230\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-11: Version 7.0.229\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-11: Version 7.0.228\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-11: Version 7.0.227\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-11: Version 7.0.226\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-11: Version 7.0.225\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-11: Version 7.0.224\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.223\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.222\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.221\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.220\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.219\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.218\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.217\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.216\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.215\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.214\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.213\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.212\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.211\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.210\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.209\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-10: Version 7.0.208\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-09: Version 7.0.207\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-09: Version 7.0.206\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-09: Version 7.0.205\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-09: Version 7.0.204\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-09: Version 7.0.203\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-09: Version 7.0.202\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-09: Version 7.0.201\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.200\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.199\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.198\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.197\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.196\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.195\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.194\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.193\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.192\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.191\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.190\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.189\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.188\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.187\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.186\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.185\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.184\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.183\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.182\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.181\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.180\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.179\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.178\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.177\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.176\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-08: Version 7.0.175\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-07: Version 7.0.174\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-07: Version 7.0.173\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-07: Version 7.0.172\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-07: Version 7.0.171\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.170\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.169\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.168\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.167\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.166\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.165\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.164\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.163\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.162\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.161\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.160\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-06: Version 7.0.159\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.158\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.157\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.156\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.155\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.154\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.153\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.152\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.151\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.150\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.149\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-03: Version 7.0.148\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.147\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.146\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.145\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.144\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.143\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.142\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.141\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.140\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.139\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.138\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.137\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.136\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.135\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.134\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.133\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.132\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.131\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.130\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.129\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-02: Version 7.0.128\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.127\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.126\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.125\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.124\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.123\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.122\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.121\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.120\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.119\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.118\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.117\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-01: Version 7.0.116\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.115\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.114\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.113\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.112\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.111\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.110\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.109\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.108\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.107\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.106\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.105\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.104\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.103\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.102\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.101\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.100\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.99\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.98\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.97\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.96\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-31: Version 7.0.95\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-30: Version 7.0.94\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-30: Version 7.0.93\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-30: Version 7.0.92\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-30: Version 7.0.91\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-30: Version 7.0.90\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-30: Version 7.0.89\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-30: Version 7.0.88\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-30: Version 7.0.87\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-29: Version 7.0.86\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-28: Version 7.0.85\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-28: Version 7.0.84\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-28: Version 7.0.83\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.82\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.81\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.80\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.79\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.78\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.77\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.76\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.75\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-27: Version 7.0.74\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.73\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.72\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.71\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.70\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.69\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.68\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.67\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.66\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.65\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.64\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.63\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.62\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.61\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-26: Version 7.0.60\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.59\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.58\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.57\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.56\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.55\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.54\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.53\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.52\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.51\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.50\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.49\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.48\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.47\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.46\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.45\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.44\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-25: Version 7.0.43\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.42\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.41\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.40\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.39\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.38\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.37\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.36\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.35\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.34\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.33\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.32\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.31\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.30\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.29\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.28\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.27\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.26\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.25\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.24\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.23\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.22\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.21\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.20\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.19\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.18\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.17\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.16\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.15\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.14\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.13\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.12\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.11\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.10\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-24: Version 7.0.9\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-23: Version 7.0.8\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-23: Version 7.0.7\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-23: Version 7.0.6\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-23: Version 7.0.5\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-23: Version 7.0.4\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-23: Version 7.0.3\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-23: Version 7.0.2\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-20: Version 7.0.1\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-19: Version 6.9.454\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-19: Version 6.9.453\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-19: Version 6.9.452\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.451\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.450\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.449\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.448\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.447\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.446\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.445\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.444\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.443\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.442\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.441\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.440\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.439\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.438\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.437\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.436\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.435\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.434\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.433\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.432\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.431\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.430\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-18: Version 6.9.429\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-07-17: Version 6.9.428\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n 2018-07-17: Version 6.9.427\n \n         Performance and stability improvements on all platforms."
        },
        {
            "sha": "36d9d0eaebb20adf6fecc1d31cd5e7581f790f0f",
            "filename": "deps/v8/DEPS",
            "status": "modified",
            "additions": 48,
            "deletions": 14,
            "changes": 62,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2FDEPS",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2FDEPS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FDEPS?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,53 +8,54 @@ vars = {\n   'download_gcmole': False,\n   'download_jsfunfuzz': False,\n   'download_mips_toolchain': False,\n+  'check_v8_header_includes': False,\n }\n \n deps = {\n   'v8/build':\n-    Var('chromium_url') + '/chromium/src/build.git' + '@' + '7315579e388589b62236ad933f09afd1e838d234',\n+    Var('chromium_url') + '/chromium/src/build.git' + '@' + 'dd6b994b32b498e9e766ce60c44da0aec3a2a188',\n   'v8/tools/gyp':\n     Var('chromium_url') + '/external/gyp.git' + '@' + 'd61a9397e668fa9843c4aa7da9e79460fe590bfb',\n   'v8/third_party/depot_tools':\n-    Var('chromium_url') + '/chromium/tools/depot_tools.git' + '@' + 'fb734036f4b5ae6d5afc63cbfc41d3a5d1c29a82',\n+    Var('chromium_url') + '/chromium/tools/depot_tools.git' + '@' + '1aa405fd859a3bd625b0d61184d6e4a3cf95c0b4',\n   'v8/third_party/icu':\n-    Var('chromium_url') + '/chromium/deps/icu.git' + '@' + 'a9a2bd3ee4f1d313651c5272252aaf2a3e7ed529',\n+    Var('chromium_url') + '/chromium/deps/icu.git' + '@' + 'a191af9d025859e8368b8b469120d78006e9f5f6',\n   'v8/third_party/instrumented_libraries':\n-    Var('chromium_url') + '/chromium/src/third_party/instrumented_libraries.git' + '@' + '323cf32193caecbf074d1a0cb5b02b905f163e0f',\n+    Var('chromium_url') + '/chromium/src/third_party/instrumented_libraries.git' + '@' + 'd8cf40c4592dcec7fb01fcbdf1f6d4958b3fbf11',\n   'v8/buildtools':\n-    Var('chromium_url') + '/chromium/buildtools.git' + '@' + '0dd5c6f980d22be96b728155249df2da355989d9',\n+    Var('chromium_url') + '/chromium/buildtools.git' + '@' + '2dff9c9c74e9d732e6fe57c84ef7fd044cc45d96',\n   'v8/base/trace_event/common':\n     Var('chromium_url') + '/chromium/src/base/trace_event/common.git' + '@' + '211b3ed9d0481b4caddbee1322321b86a483ca1f',\n   'v8/third_party/android_ndk': {\n-    'url': Var('chromium_url') + '/android_ndk.git' + '@' + '5cd86312e794bdf542a3685c6f10cbb96072990b',\n+    'url': Var('chromium_url') + '/android_ndk.git' + '@' + '4e2cea441bfd43f0863d14f57b1e1844260b9884',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/android_tools': {\n     'url': Var('chromium_url') + '/android_tools.git' + '@' + '130499e25286f4d56acafa252fee09f3cc595c49',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/catapult': {\n-    'url': Var('chromium_url') + '/catapult.git' + '@' + 'f5342c4cf3d3e85e43be84c22bdfd8ebff23ec70',\n+    'url': Var('chromium_url') + '/catapult.git' + '@' + 'bc2c0a9307285fa36e03e7cdb6bf8623390ff855',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/colorama/src': {\n     'url': Var('chromium_url') + '/external/colorama.git' + '@' + '799604a1041e9b3bc5d2789ecbd7e8db2e18e6b8',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/fuchsia-sdk': {\n-    'url': Var('chromium_url') + '/chromium/src/third_party/fuchsia-sdk.git' + '@' + '82277014aeccc89bae4d7a317813affa3f7de0ee',\n+    'url': Var('chromium_url') + '/chromium/src/third_party/fuchsia-sdk.git' + '@' + '3ec92c896bcbddc46e2a073ebfdd25aa1194656e',\n     'condition': 'checkout_fuchsia',\n   },\n   'v8/third_party/googletest/src':\n-    Var('chromium_url') + '/external/github.com/google/googletest.git' + '@' + 'ce468a17c434e4e79724396ee1b51d86bfc8a88b',\n+    Var('chromium_url') + '/external/github.com/google/googletest.git' + '@' + 'd5266326752f0a1dadbd310932d8f4fd8c3c5e7d',\n   'v8/third_party/jinja2':\n     Var('chromium_url') + '/chromium/src/third_party/jinja2.git' + '@' + 'b41863e42637544c2941b574c7877d3e1f663e25',\n   'v8/third_party/markupsafe':\n     Var('chromium_url') + '/chromium/src/third_party/markupsafe.git' + '@' + '8f45f5cfa0009d2a70589bcda0349b8cb2b72783',\n   'v8/third_party/proguard':\n-    Var('chromium_url') + '/chromium/src/third_party/proguard.git' + '@' + 'eba7a98d98735b2cc65c54d36baa5c9b46fe4f8e',\n+    Var('chromium_url') + '/chromium/src/third_party/proguard.git' + '@' + 'a3729bea473bb5ffc5eaf289f5733bc5e2861c07',\n   'v8/tools/swarming_client':\n-    Var('chromium_url') + '/infra/luci/client-py.git' + '@' + '9a518d097dca20b7b00ce3bdfc5d418ccc79893a',\n+    Var('chromium_url') + '/infra/luci/client-py.git' + '@' + '486c9b53c4d54dd4b95bb6ce0e31160e600dfc11',\n   'v8/test/benchmarks/data':\n     Var('chromium_url') + '/v8/deps/third_party/benchmarks.git' + '@' + '05d7188267b4560491ff9155c5ee13e207ecd65f',\n   'v8/test/mozilla/data':\n@@ -63,12 +64,22 @@ deps = {\n     Var('chromium_url') + '/external/github.com/tc39/test262.git' + '@' + 'a6c1d05ac4fed084fa047e4c52ab2a8c9c2a8aef',\n   'v8/test/test262/harness':\n     Var('chromium_url') + '/external/github.com/test262-utils/test262-harness-py.git' + '@' + '0f2acdd882c84cff43b9d60df7574a1901e2cdcd',\n+  'v8/third_party/qemu': {\n+      'packages': [\n+          {\n+              'package': 'fuchsia/qemu/linux-amd64',\n+              'version': '9cc486c5b18a0be515c39a280ca9a309c54cf994'\n+          },\n+      ],\n+      'condition': 'checkout_fuchsia',\n+      'dep_type': 'cipd',\n+  },\n   'v8/tools/clang':\n-    Var('chromium_url') + '/chromium/src/tools/clang.git' + '@' + 'c0b1d892b2bc1291eb287d716ca239c1b03fb215',\n+    Var('chromium_url') + '/chromium/src/tools/clang.git' + '@' + 'bb4146fb8a9dde405b71914657bb461dc93912ab',\n   'v8/tools/luci-go':\n-    Var('chromium_url') + '/chromium/src/tools/luci-go.git' + '@' + 'abcd908f74fdb155cc8870f5cae48dff1ece7c3c',\n+    Var('chromium_url') + '/chromium/src/tools/luci-go.git' + '@' + '445d7c4b6a4f10e188edb395b132e3996b127691',\n   'v8/test/wasm-js':\n-    Var('chromium_url') + '/external/github.com/WebAssembly/spec.git' + '@' + '2113ea7e106f8a964e0445ba38f289d2aa845edd',\n+    Var('chromium_url') + '/external/github.com/WebAssembly/spec.git' + '@' + '240ea673de6e75d78ae472f66127301ecab22a99',\n }\n \n recursedeps = [\n@@ -333,6 +344,13 @@ hooks = [\n     'condition': 'checkout_win',\n     'action': ['python', 'v8/build/vs_toolchain.py', 'update'],\n   },\n+  {\n+    # Update the Mac toolchain if necessary.\n+    'name': 'mac_toolchain',\n+    'pattern': '.',\n+    'condition': 'checkout_mac',\n+    'action': ['python', 'v8/build/mac_toolchain.py'],\n+  },\n   # Pull binutils for linux, enabled debug fission for faster linking /\n   # debugging when used with clang on Ubuntu Precise.\n   # https://code.google.com/p/chromium/issues/detail?id=352046\n@@ -353,6 +371,13 @@ hooks = [\n     'condition': 'host_os != \"aix\"',\n     'action': ['python', 'v8/tools/clang/scripts/update.py'],\n   },\n+  {\n+    # Update LASTCHANGE.\n+    'name': 'lastchange',\n+    'pattern': '.',\n+    'action': ['python', 'v8/build/util/lastchange.py',\n+               '-o', 'v8/build/util/LASTCHANGE'],\n+  },\n   {\n     'name': 'fuchsia_sdk',\n     'pattern': '.',\n@@ -385,4 +410,13 @@ hooks = [\n                 '-vpython-tool', 'install',\n     ],\n   },\n+  {\n+    'name': 'check_v8_header_includes',\n+    'pattern': '.',\n+    'condition': 'check_v8_header_includes',\n+    'action': [\n+      'python',\n+      'v8/tools/generate-header-include-checks.py',\n+    ],\n+  },\n ]"
        },
        {
            "sha": "d20fb79fe16625f2126fb42a802e7ce9de8e8da5",
            "filename": "deps/v8/include/OWNERS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2FOWNERS?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -7,7 +7,9 @@ yangguo@chromium.org\n \n per-file v8-inspector.h=dgozman@chromium.org\n per-file v8-inspector.h=pfeldman@chromium.org\n+per-file v8-inspector.h=kozyatinskiy@chromium.org\n per-file v8-inspector-protocol.h=dgozman@chromium.org\n per-file v8-inspector-protocol.h=pfeldman@chromium.org\n+per-file v8-inspector-protocol.h=kozyatinskiy@chromium.org\n \n # COMPONENT: Blink>JavaScript>API"
        },
        {
            "sha": "2b167cb9e5b4122258d788f15bc5ac5bfb869b20",
            "filename": "deps/v8/include/libplatform/libplatform.h",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -62,11 +62,6 @@ V8_PLATFORM_EXPORT bool PumpMessageLoop(\n     v8::Platform* platform, v8::Isolate* isolate,\n     MessageLoopBehavior behavior = MessageLoopBehavior::kDoNotWait);\n \n-V8_PLATFORM_EXPORT V8_DEPRECATED(\n-    \"This function has become obsolete and is essentially a nop\",\n-    void EnsureEventLoopInitialized(v8::Platform* platform,\n-                                    v8::Isolate* isolate));\n-\n /**\n  * Runs pending idle tasks for at most |idle_time_in_seconds| seconds.\n  *"
        },
        {
            "sha": "e06963949a5620bc9909ae8f8aca6feb9a726ce7",
            "filename": "deps/v8/include/v8-inspector.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8-inspector.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8-inspector.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-inspector.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -245,6 +245,8 @@ class V8_EXPORT V8Inspector {\n   virtual void contextCreated(const V8ContextInfo&) = 0;\n   virtual void contextDestroyed(v8::Local<v8::Context>) = 0;\n   virtual void resetContextGroup(int contextGroupId) = 0;\n+  virtual v8::MaybeLocal<v8::Context> contextById(int groupId,\n+                                                  v8::Maybe<int> contextId) = 0;\n \n   // Various instrumentation.\n   virtual void idleStarted() = 0;"
        },
        {
            "sha": "9981061a44bf0647fca1273f6ac0f1f625ff0e86",
            "filename": "deps/v8/include/v8-profiler.h",
            "status": "modified",
            "additions": 1,
            "deletions": 19,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8-profiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8-profiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-profiler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -47,24 +47,6 @@ template class V8_EXPORT std::vector<v8::CpuProfileDeoptInfo>;\n \n namespace v8 {\n \n-/**\n- * TracingCpuProfiler monitors tracing being enabled/disabled\n- * and emits CpuProfile trace events once v8.cpu_profiler tracing category\n- * is enabled. It has no overhead unless the category is enabled.\n- */\n-class V8_EXPORT TracingCpuProfiler {\n- public:\n-  V8_DEPRECATED(\n-      \"The profiler is created automatically with the isolate.\\n\"\n-      \"No need to create it explicitly.\",\n-      static std::unique_ptr<TracingCpuProfiler> Create(Isolate*));\n-\n-  virtual ~TracingCpuProfiler() = default;\n-\n- protected:\n-  TracingCpuProfiler() = default;\n-};\n-\n // TickSample captures the information collected for each sample.\n struct TickSample {\n   // Internal profiling (with --prof + tools/$OS-tick-processor) wants to\n@@ -915,7 +897,7 @@ class V8_EXPORT HeapProfiler {\n       \"Use AddBuildEmbedderGraphCallback to provide info about embedder nodes\",\n       void SetGetRetainerInfosCallback(GetRetainerInfosCallback callback));\n \n-  V8_DEPRECATE_SOON(\n+  V8_DEPRECATED(\n       \"Use AddBuildEmbedderGraphCallback to provide info about embedder nodes\",\n       void SetBuildEmbedderGraphCallback(\n           LegacyBuildEmbedderGraphCallback callback));"
        },
        {
            "sha": "b4c837cda42fd043f901be0758df3b21d1087599",
            "filename": "deps/v8/include/v8-version.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8-version.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8-version.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-version.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,10 +8,10 @@\n // These macros define the version number for the current version.\n // NOTE these macros are used by some of the tool scripts and the build\n // system so their names cannot be changed without changing the scripts.\n-#define V8_MAJOR_VERSION 6\n-#define V8_MINOR_VERSION 9\n-#define V8_BUILD_NUMBER 427\n-#define V8_PATCH_LEVEL 23\n+#define V8_MAJOR_VERSION 7\n+#define V8_MINOR_VERSION 0\n+#define V8_BUILD_NUMBER 276\n+#define V8_PATCH_LEVEL 20\n \n // Use 1 for candidates and 0 otherwise.\n // (Boolean macro values are not supported by all preprocessors.)"
        },
        {
            "sha": "63edc67edfd95f704b5bd64ae30c721c0a968097",
            "filename": "deps/v8/include/v8.h",
            "status": "modified",
            "additions": 148,
            "deletions": 274,
            "changes": 422,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -155,7 +155,7 @@ class FunctionCallbackArguments;\n class GlobalHandles;\n \n namespace wasm {\n-class CompilationResultResolver;\n+class NativeModule;\n class StreamingDecoder;\n }  // namespace wasm\n \n@@ -203,7 +203,7 @@ struct SmiTagging<4> {\n   V8_INLINE static internal::Object* IntToSmi(int value) {\n     return internal::IntToSmi<kSmiShiftSize>(value);\n   }\n-  V8_INLINE static bool IsValidSmi(intptr_t value) {\n+  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n     // To be representable as an tagged small integer, the two\n     // most-significant bits of 'value' must be either 00 or 11 due to\n     // sign-extension. To check this we add 01 to the two\n@@ -233,7 +233,7 @@ struct SmiTagging<8> {\n   V8_INLINE static internal::Object* IntToSmi(int value) {\n     return internal::IntToSmi<kSmiShiftSize>(value);\n   }\n-  V8_INLINE static bool IsValidSmi(intptr_t value) {\n+  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n     // To be representable as a long smi, the value must be a 32-bit integer.\n     return (value == static_cast<int32_t>(value));\n   }\n@@ -1125,10 +1125,6 @@ class V8_EXPORT PrimitiveArray {\n   int Length() const;\n   void Set(Isolate* isolate, int index, Local<Primitive> item);\n   Local<Primitive> Get(Isolate* isolate, int index);\n-\n-  V8_DEPRECATE_SOON(\"Use Isolate version\",\n-                    void Set(int index, Local<Primitive> item));\n-  V8_DEPRECATE_SOON(\"Use Isolate version\", Local<Primitive> Get(int index));\n };\n \n /**\n@@ -1356,23 +1352,15 @@ class V8_EXPORT Script {\n   /**\n    * A shorthand for ScriptCompiler::Compile().\n    */\n-  static V8_DEPRECATED(\"Use maybe version\",\n-                       Local<Script> Compile(Local<String> source,\n-                                             ScriptOrigin* origin = nullptr));\n   static V8_WARN_UNUSED_RESULT MaybeLocal<Script> Compile(\n       Local<Context> context, Local<String> source,\n       ScriptOrigin* origin = nullptr);\n \n-  static Local<Script> V8_DEPRECATED(\"Use maybe version\",\n-                                     Compile(Local<String> source,\n-                                             Local<String> file_name));\n-\n   /**\n    * Runs the script returning the resulting value. It will be run in the\n    * context in which it was created (ScriptCompiler::CompileBound or\n    * UnboundScript::BindToCurrentContext()).\n    */\n-  V8_DEPRECATED(\"Use maybe version\", Local<Value> Run());\n   V8_WARN_UNUSED_RESULT MaybeLocal<Value> Run(Local<Context> context);\n \n   /**\n@@ -1688,13 +1676,6 @@ class V8_EXPORT ScriptCompiler {\n    * It is possible to specify multiple context extensions (obj in the above\n    * example).\n    */\n-  static V8_DEPRECATED(\"Use maybe version\",\n-                       Local<Function> CompileFunctionInContext(\n-                           Isolate* isolate, Source* source,\n-                           Local<Context> context, size_t arguments_count,\n-                           Local<String> arguments[],\n-                           size_t context_extension_count,\n-                           Local<Object> context_extensions[]));\n   static V8_WARN_UNUSED_RESULT MaybeLocal<Function> CompileFunctionInContext(\n       Local<Context> context, Source* source, size_t arguments_count,\n       Local<String> arguments[], size_t context_extension_count,\n@@ -1717,10 +1698,6 @@ class V8_EXPORT ScriptCompiler {\n   static CachedData* CreateCodeCache(\n       Local<UnboundModuleScript> unbound_module_script);\n \n-  V8_DEPRECATED(\"Source string is no longer required\",\n-                static CachedData* CreateCodeCache(\n-                    Local<UnboundScript> unbound_script, Local<String> source));\n-\n   /**\n    * Creates and returns code cache for the specified function that was\n    * previously produced by CompileFunctionInContext.\n@@ -1729,10 +1706,6 @@ class V8_EXPORT ScriptCompiler {\n    */\n   static CachedData* CreateCodeCacheForFunction(Local<Function> function);\n \n-  V8_DEPRECATED(\"Source string is no longer required\",\n-                static CachedData* CreateCodeCacheForFunction(\n-                    Local<Function> function, Local<String> source));\n-\n  private:\n   static V8_WARN_UNUSED_RESULT MaybeLocal<UnboundScript> CompileUnboundInternal(\n       Isolate* isolate, Source* source, CompileOptions options,\n@@ -1747,7 +1720,11 @@ class V8_EXPORT Message {\n  public:\n   Local<String> Get() const;\n \n-  V8_DEPRECATED(\"Use maybe version\", Local<String> GetSourceLine() const);\n+  /**\n+   * Return the isolate to which the Message belongs.\n+   */\n+  Isolate* GetIsolate() const;\n+\n   V8_WARN_UNUSED_RESULT MaybeLocal<String> GetSourceLine(\n       Local<Context> context) const;\n \n@@ -1773,7 +1750,6 @@ class V8_EXPORT Message {\n   /**\n    * Returns the number, 1-based, of the line where the error occurred.\n    */\n-  V8_DEPRECATED(\"Use maybe version\", int GetLineNumber() const);\n   V8_WARN_UNUSED_RESULT Maybe<int> GetLineNumber(Local<Context> context) const;\n \n   /**\n@@ -1853,8 +1829,6 @@ class V8_EXPORT StackTrace {\n   /**\n    * Returns a StackFrame at a particular index.\n    */\n-  V8_DEPRECATE_SOON(\"Use Isolate version\",\n-                    Local<StackFrame> GetFrame(uint32_t index) const);\n   Local<StackFrame> GetFrame(Isolate* isolate, uint32_t index) const;\n \n   /**\n@@ -2563,13 +2537,6 @@ class V8_EXPORT Value : public Data {\n   V8_DEPRECATE_SOON(\"Use maybe version\",\n                     Local<Int32> ToInt32(Isolate* isolate) const);\n \n-  inline V8_DEPRECATE_SOON(\"Use maybe version\",\n-                           Local<Boolean> ToBoolean() const);\n-  inline V8_DEPRECATE_SOON(\"Use maybe version\", Local<String> ToString() const);\n-  inline V8_DEPRECATE_SOON(\"Use maybe version\", Local<Object> ToObject() const);\n-  inline V8_DEPRECATE_SOON(\"Use maybe version\",\n-                           Local<Integer> ToInteger() const);\n-\n   /**\n    * Attempts to convert a string to an array index.\n    * Returns an empty handle if the conversion fails.\n@@ -2585,14 +2552,7 @@ class V8_EXPORT Value : public Data {\n       Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT Maybe<int32_t> Int32Value(Local<Context> context) const;\n \n-  V8_DEPRECATE_SOON(\"Use maybe version\", bool BooleanValue() const);\n-  V8_DEPRECATE_SOON(\"Use maybe version\", double NumberValue() const);\n-  V8_DEPRECATE_SOON(\"Use maybe version\", int64_t IntegerValue() const);\n-  V8_DEPRECATE_SOON(\"Use maybe version\", uint32_t Uint32Value() const);\n-  V8_DEPRECATE_SOON(\"Use maybe version\", int32_t Int32Value() const);\n-\n   /** JS == */\n-  V8_DEPRECATE_SOON(\"Use maybe version\", bool Equals(Local<Value> that) const);\n   V8_WARN_UNUSED_RESULT Maybe<bool> Equals(Local<Context> context,\n                                            Local<Value> that) const;\n   bool StrictEquals(Local<Value> that) const;\n@@ -2699,8 +2659,6 @@ class V8_EXPORT String : public Name {\n    * Returns the number of bytes in the UTF-8 encoded\n    * representation of this string.\n    */\n-  V8_DEPRECATE_SOON(\"Use Isolate version instead\", int Utf8Length() const);\n-\n   int Utf8Length(Isolate* isolate) const;\n \n   /**\n@@ -2757,23 +2715,12 @@ class V8_EXPORT String : public Name {\n   // 16-bit character codes.\n   int Write(Isolate* isolate, uint16_t* buffer, int start = 0, int length = -1,\n             int options = NO_OPTIONS) const;\n-  V8_DEPRECATE_SOON(\"Use Isolate* version\",\n-                    int Write(uint16_t* buffer, int start = 0, int length = -1,\n-                              int options = NO_OPTIONS) const);\n   // One byte characters.\n   int WriteOneByte(Isolate* isolate, uint8_t* buffer, int start = 0,\n                    int length = -1, int options = NO_OPTIONS) const;\n-  V8_DEPRECATE_SOON(\"Use Isolate* version\",\n-                    int WriteOneByte(uint8_t* buffer, int start = 0,\n-                                     int length = -1, int options = NO_OPTIONS)\n-                        const);\n   // UTF-8 encoded characters.\n   int WriteUtf8(Isolate* isolate, char* buffer, int length = -1,\n                 int* nchars_ref = NULL, int options = NO_OPTIONS) const;\n-  V8_DEPRECATE_SOON(\"Use Isolate* version\",\n-                    int WriteUtf8(char* buffer, int length = -1,\n-                                  int* nchars_ref = NULL,\n-                                  int options = NO_OPTIONS) const);\n \n   /**\n    * A zero length string.\n@@ -2937,9 +2884,6 @@ class V8_EXPORT String : public Name {\n    */\n   static Local<String> Concat(Isolate* isolate, Local<String> left,\n                               Local<String> right);\n-  static V8_DEPRECATE_SOON(\"Use Isolate* version\",\n-                           Local<String> Concat(Local<String> left,\n-                                                Local<String> right));\n \n   /**\n    * Creates a new external string using the data defined in the given\n@@ -2994,6 +2938,11 @@ class V8_EXPORT String : public Name {\n    */\n   bool CanMakeExternal();\n \n+  /**\n+   * Returns true if the strings values are equal. Same as JS ==/===.\n+   */\n+  bool StringEquals(Local<String> str);\n+\n   /**\n    * Converts an object to a UTF-8-encoded character array.  Useful if\n    * you want to print the object.  If conversion to a string fails\n@@ -3003,8 +2952,6 @@ class V8_EXPORT String : public Name {\n    */\n   class V8_EXPORT Utf8Value {\n    public:\n-    V8_DEPRECATED(\"Use Isolate version\",\n-                  explicit Utf8Value(Local<v8::Value> obj));\n     Utf8Value(Isolate* isolate, Local<v8::Value> obj);\n     ~Utf8Value();\n     char* operator*() { return str_; }\n@@ -3028,7 +2975,6 @@ class V8_EXPORT String : public Name {\n    */\n   class V8_EXPORT Value {\n    public:\n-    V8_DEPRECATED(\"Use Isolate version\", explicit Value(Local<v8::Value> obj));\n     Value(Isolate* isolate, Local<v8::Value> obj);\n     ~Value();\n     uint16_t* operator*() { return str_; }\n@@ -3048,6 +2994,12 @@ class V8_EXPORT String : public Name {\n   void VerifyExternalStringResourceBase(ExternalStringResourceBase* v,\n                                         Encoding encoding) const;\n   void VerifyExternalStringResource(ExternalStringResource* val) const;\n+  ExternalStringResource* GetExternalStringResourceSlow() const;\n+  ExternalStringResourceBase* GetExternalStringResourceBaseSlow(\n+      String::Encoding* encoding_out) const;\n+  const ExternalOneByteStringResource* GetExternalOneByteStringResourceSlow()\n+      const;\n+\n   static void CheckCast(v8::Value* obj);\n };\n \n@@ -4204,8 +4156,6 @@ class V8_EXPORT Promise : public Object {\n     /**\n      * Create a new resolver, along with an associated promise in pending state.\n      */\n-    static V8_DEPRECATED(\"Use maybe version\",\n-                         Local<Resolver> New(Isolate* isolate));\n     static V8_WARN_UNUSED_RESULT MaybeLocal<Resolver> New(\n         Local<Context> context);\n \n@@ -4218,11 +4168,9 @@ class V8_EXPORT Promise : public Object {\n      * Resolve/reject the associated promise with a given value.\n      * Ignored if the promise is no longer pending.\n      */\n-    V8_DEPRECATED(\"Use maybe version\", void Resolve(Local<Value> value));\n     V8_WARN_UNUSED_RESULT Maybe<bool> Resolve(Local<Context> context,\n                                               Local<Value> value);\n \n-    V8_DEPRECATED(\"Use maybe version\", void Reject(Local<Value> value));\n     V8_WARN_UNUSED_RESULT Maybe<bool> Reject(Local<Context> context,\n                                              Local<Value> value);\n \n@@ -4375,9 +4323,9 @@ class V8_EXPORT WasmCompiledModule : public Object {\n  public:\n   typedef std::pair<std::unique_ptr<const uint8_t[]>, size_t> SerializedModule;\n \n-// The COMMA macro allows us to use ',' inside of the V8_DEPRECATE_SOON macro.\n+// The COMMA macro allows us to use ',' inside of the V8_DEPRECATED macro.\n #define COMMA ,\n-  V8_DEPRECATE_SOON(\n+  V8_DEPRECATED(\n       \"Use BufferReference.\",\n       typedef std::pair<const uint8_t * COMMA size_t> CallerOwnedBuffer);\n #undef COMMA\n@@ -4391,10 +4339,10 @@ class V8_EXPORT WasmCompiledModule : public Object {\n     BufferReference(const uint8_t* start, size_t size)\n         : start(start), size(size) {}\n     // Temporarily allow conversion to and from CallerOwnedBuffer.\n-    V8_DEPRECATE_SOON(\n+    V8_DEPRECATED(\n         \"Use BufferReference directly.\",\n         inline BufferReference(CallerOwnedBuffer));  // NOLINT(runtime/explicit)\n-    V8_DEPRECATE_SOON(\"Use BufferReference directly.\",\n+    V8_DEPRECATED(\"Use BufferReference directly.\",\n                       inline operator CallerOwnedBuffer());\n   };\n \n@@ -4411,13 +4359,17 @@ class V8_EXPORT WasmCompiledModule : public Object {\n     TransferrableModule& operator=(const TransferrableModule& src) = delete;\n \n    private:\n+    typedef std::shared_ptr<internal::wasm::NativeModule> SharedModule;\n     typedef std::pair<std::unique_ptr<const uint8_t[]>, size_t> OwnedBuffer;\n     friend class WasmCompiledModule;\n-    TransferrableModule(OwnedBuffer code, OwnedBuffer bytes)\n-        : compiled_code(std::move(code)), wire_bytes(std::move(bytes)) {}\n-\n-    OwnedBuffer compiled_code = {nullptr, 0};\n-    OwnedBuffer wire_bytes = {nullptr, 0};\n+    explicit TransferrableModule(SharedModule shared_module)\n+        : shared_module_(std::move(shared_module)) {}\n+    TransferrableModule(OwnedBuffer serialized, OwnedBuffer bytes)\n+        : serialized_(std::move(serialized)), wire_bytes_(std::move(bytes)) {}\n+\n+    SharedModule shared_module_;\n+    OwnedBuffer serialized_ = {nullptr, 0};\n+    OwnedBuffer wire_bytes_ = {nullptr, 0};\n   };\n \n   /**\n@@ -4438,7 +4390,7 @@ class V8_EXPORT WasmCompiledModule : public Object {\n    * Get the wasm-encoded bytes that were used to compile this module.\n    */\n   BufferReference GetWasmWireBytesRef();\n-  V8_DEPRECATE_SOON(\"Use GetWasmWireBytesRef version.\",\n+  V8_DEPRECATED(\"Use GetWasmWireBytesRef version.\",\n                     Local<String> GetWasmWireBytes());\n \n   /**\n@@ -4472,7 +4424,7 @@ class V8_EXPORT WasmCompiledModule : public Object {\n   static void CheckCast(Value* obj);\n };\n \n-// TODO(clemensh): Remove after M69 branch.\n+// TODO(clemensh): Remove after M70 branch.\n WasmCompiledModule::BufferReference::BufferReference(\n     WasmCompiledModule::CallerOwnedBuffer buf)\n     : BufferReference(buf.first, buf.second) {}\n@@ -4645,17 +4597,22 @@ class V8_EXPORT ArrayBuffer : public Object {\n    * returns an instance of this class, populated, with a pointer to data\n    * and byte length.\n    *\n-   * The Data pointer of ArrayBuffer::Contents is always allocated with\n-   * Allocator::Allocate that is set via Isolate::CreateParams.\n+   * The Data pointer of ArrayBuffer::Contents must be freed using the provided\n+   * deleter, which will call ArrayBuffer::Allocator::Free if the buffer\n+   * was allocated with ArraryBuffer::Allocator::Allocate.\n    */\n   class V8_EXPORT Contents { // NOLINT\n    public:\n+    using DeleterCallback = void (*)(void* buffer, size_t length, void* info);\n+\n     Contents()\n         : data_(nullptr),\n           byte_length_(0),\n           allocation_base_(nullptr),\n           allocation_length_(0),\n-          allocation_mode_(Allocator::AllocationMode::kNormal) {}\n+          allocation_mode_(Allocator::AllocationMode::kNormal),\n+          deleter_(nullptr),\n+          deleter_data_(nullptr) {}\n \n     void* AllocationBase() const { return allocation_base_; }\n     size_t AllocationLength() const { return allocation_length_; }\n@@ -4665,13 +4622,22 @@ class V8_EXPORT ArrayBuffer : public Object {\n \n     void* Data() const { return data_; }\n     size_t ByteLength() const { return byte_length_; }\n+    DeleterCallback Deleter() const { return deleter_; }\n+    void* DeleterData() const { return deleter_data_; }\n \n    private:\n+    Contents(void* data, size_t byte_length, void* allocation_base,\n+             size_t allocation_length,\n+             Allocator::AllocationMode allocation_mode, DeleterCallback deleter,\n+             void* deleter_data);\n+\n     void* data_;\n     size_t byte_length_;\n     void* allocation_base_;\n     size_t allocation_length_;\n     Allocator::AllocationMode allocation_mode_;\n+    DeleterCallback deleter_;\n+    void* deleter_data_;\n \n     friend class ArrayBuffer;\n   };\n@@ -4728,8 +4694,9 @@ class V8_EXPORT ArrayBuffer : public Object {\n    * had been externalized, it does no longer own the memory block. The caller\n    * should take steps to free memory when it is no longer needed.\n    *\n-   * The memory block is guaranteed to be allocated with |Allocator::Allocate|\n-   * that has been set via Isolate::CreateParams.\n+   * The Data pointer of ArrayBuffer::Contents must be freed using the provided\n+   * deleter, which will call ArrayBuffer::Allocator::Free if the buffer\n+   * was allocated with ArraryBuffer::Allocator::Allocate.\n    */\n   Contents Externalize();\n \n@@ -4740,8 +4707,6 @@ class V8_EXPORT ArrayBuffer : public Object {\n    *\n    * The embedder should make sure to hold a strong reference to the\n    * ArrayBuffer while accessing this pointer.\n-   *\n-   * The memory block is guaranteed to be allocated with |Allocator::Allocate|.\n    */\n   Contents GetContents();\n \n@@ -5048,41 +5013,54 @@ class V8_EXPORT SharedArrayBuffer : public Object {\n    * |SharedArrayBuffer| returns an instance of this class, populated, with a\n    * pointer to data and byte length.\n    *\n-   * The Data pointer of SharedArrayBuffer::Contents is always allocated with\n-   * |ArrayBuffer::Allocator::Allocate| by the allocator specified in\n-   * v8::Isolate::CreateParams::array_buffer_allocator.\n+   * The Data pointer of ArrayBuffer::Contents must be freed using the provided\n+   * deleter, which will call ArrayBuffer::Allocator::Free if the buffer\n+   * was allocated with ArraryBuffer::Allocator::Allocate.\n    *\n    * This API is experimental and may change significantly.\n    */\n   class V8_EXPORT Contents {  // NOLINT\n    public:\n+    using Allocator = v8::ArrayBuffer::Allocator;\n+    using DeleterCallback = void (*)(void* buffer, size_t length, void* info);\n+\n     Contents()\n         : data_(nullptr),\n           byte_length_(0),\n           allocation_base_(nullptr),\n           allocation_length_(0),\n-          allocation_mode_(ArrayBuffer::Allocator::AllocationMode::kNormal) {}\n+          allocation_mode_(Allocator::AllocationMode::kNormal),\n+          deleter_(nullptr),\n+          deleter_data_(nullptr) {}\n \n     void* AllocationBase() const { return allocation_base_; }\n     size_t AllocationLength() const { return allocation_length_; }\n-    ArrayBuffer::Allocator::AllocationMode AllocationMode() const {\n+    Allocator::AllocationMode AllocationMode() const {\n       return allocation_mode_;\n     }\n \n     void* Data() const { return data_; }\n     size_t ByteLength() const { return byte_length_; }\n+    DeleterCallback Deleter() const { return deleter_; }\n+    void* DeleterData() const { return deleter_data_; }\n \n    private:\n+    Contents(void* data, size_t byte_length, void* allocation_base,\n+             size_t allocation_length,\n+             Allocator::AllocationMode allocation_mode, DeleterCallback deleter,\n+             void* deleter_data);\n+\n     void* data_;\n     size_t byte_length_;\n     void* allocation_base_;\n     size_t allocation_length_;\n-    ArrayBuffer::Allocator::AllocationMode allocation_mode_;\n+    Allocator::AllocationMode allocation_mode_;\n+    DeleterCallback deleter_;\n+    void* deleter_data_;\n \n     friend class SharedArrayBuffer;\n   };\n \n-\n   /**\n    * Data length in bytes.\n    */\n@@ -5239,8 +5217,6 @@ class V8_EXPORT BooleanObject : public Object {\n class V8_EXPORT StringObject : public Object {\n  public:\n   static Local<Value> New(Isolate* isolate, Local<String> value);\n-  static V8_DEPRECATE_SOON(\"Use Isolate* version\",\n-                           Local<Value> New(Local<String> value));\n \n   Local<String> ValueOf() const;\n \n@@ -5296,8 +5272,6 @@ class V8_EXPORT RegExp : public Object {\n    *               static_cast<RegExp::Flags>(kGlobal | kMultiline))\n    * is equivalent to evaluating \"/foo/gm\".\n    */\n-  static V8_DEPRECATED(\"Use maybe version\",\n-                       Local<RegExp> New(Local<String> pattern, Flags flags));\n   static V8_WARN_UNUSED_RESULT MaybeLocal<RegExp> New(Local<Context> context,\n                                                       Local<String> pattern,\n                                                       Flags flags);\n@@ -5441,57 +5415,8 @@ class V8_EXPORT Template : public Data {\n   friend class FunctionTemplate;\n };\n \n-\n-/**\n- * NamedProperty[Getter|Setter] are used as interceptors on object.\n- * See ObjectTemplate::SetNamedPropertyHandler.\n- */\n-typedef void (*NamedPropertyGetterCallback)(\n-    Local<String> property,\n-    const PropertyCallbackInfo<Value>& info);\n-\n-\n-/**\n- * Returns the value if the setter intercepts the request.\n- * Otherwise, returns an empty handle.\n- */\n-typedef void (*NamedPropertySetterCallback)(\n-    Local<String> property,\n-    Local<Value> value,\n-    const PropertyCallbackInfo<Value>& info);\n-\n-\n-/**\n- * Returns a non-empty handle if the interceptor intercepts the request.\n- * The result is an integer encoding property attributes (like v8::None,\n- * v8::DontEnum, etc.)\n- */\n-typedef void (*NamedPropertyQueryCallback)(\n-    Local<String> property,\n-    const PropertyCallbackInfo<Integer>& info);\n-\n-\n-/**\n- * Returns a non-empty handle if the deleter intercepts the request.\n- * The return value is true if the property could be deleted and false\n- * otherwise.\n- */\n-typedef void (*NamedPropertyDeleterCallback)(\n-    Local<String> property,\n-    const PropertyCallbackInfo<Boolean>& info);\n-\n-/**\n- * Returns an array containing the names of the properties the named\n- * property getter intercepts.\n- *\n- * Note: The values in the array must be of type v8::Name.\n- */\n-typedef void (*NamedPropertyEnumeratorCallback)(\n-    const PropertyCallbackInfo<Array>& info);\n-\n-\n-// TODO(dcarney): Deprecate and remove previous typedefs, and replace\n-// GenericNamedPropertyFooCallback with just NamedPropertyFooCallback.\n+// TODO(dcarney): Replace GenericNamedPropertyFooCallback with just\n+// NamedPropertyFooCallback.\n \n /**\n  * Interceptor for get requests on an object.\n@@ -6197,39 +6122,6 @@ class V8_EXPORT ObjectTemplate : public Template {\n       Local<AccessorSignature> signature = Local<AccessorSignature>(),\n       SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n \n-  /**\n-   * Sets a named property handler on the object template.\n-   *\n-   * Whenever a property whose name is a string is accessed on objects created\n-   * from this object template, the provided callback is invoked instead of\n-   * accessing the property directly on the JavaScript object.\n-   *\n-   * SetNamedPropertyHandler() is different from SetHandler(), in\n-   * that the latter can intercept symbol-named properties as well as\n-   * string-named properties when called with a\n-   * NamedPropertyHandlerConfiguration. New code should use SetHandler().\n-   *\n-   * \\param getter The callback to invoke when getting a property.\n-   * \\param setter The callback to invoke when setting a property.\n-   * \\param query The callback to invoke to check if a property is present,\n-   *   and if present, get its attributes.\n-   * \\param deleter The callback to invoke when deleting a property.\n-   * \\param enumerator The callback to invoke to enumerate all the named\n-   *   properties of an object.\n-   * \\param data A piece of data that will be passed to the callbacks\n-   *   whenever they are invoked.\n-   */\n-  V8_DEPRECATED(\n-      \"Use SetHandler(const NamedPropertyHandlerConfiguration) \"\n-      \"with the kOnlyInterceptStrings flag set.\",\n-      void SetNamedPropertyHandler(\n-          NamedPropertyGetterCallback getter,\n-          NamedPropertySetterCallback setter = 0,\n-          NamedPropertyQueryCallback query = 0,\n-          NamedPropertyDeleterCallback deleter = 0,\n-          NamedPropertyEnumeratorCallback enumerator = 0,\n-          Local<Value> data = Local<Value>()));\n-\n   /**\n    * Sets a named property handler on the object template.\n    *\n@@ -6401,9 +6293,8 @@ class V8_EXPORT AccessorSignature : public Data {\n \n \n // --- Extensions ---\n-V8_DEPRECATE_SOON(\"Implementation detail\",\n-                  class ExternalOneByteStringResourceImpl);\n-class V8_EXPORT ExternalOneByteStringResourceImpl\n+V8_DEPRECATE_SOON(\"Implementation detail\", class)\n+V8_EXPORT ExternalOneByteStringResourceImpl\n     : public String::ExternalOneByteStringResource {\n  public:\n   ExternalOneByteStringResourceImpl() : data_(0), length_(0) {}\n@@ -6613,7 +6504,6 @@ typedef void (*AddHistogramSampleCallback)(void* histogram, int sample);\n // --- Enter/Leave Script Callback ---\n typedef void (*BeforeCallEnteredCallback)(Isolate*);\n typedef void (*CallCompletedCallback)(Isolate*);\n-typedef void (*DeprecatedCallCompletedCallback)();\n \n /**\n  * HostImportModuleDynamicallyCallback is called when we require the\n@@ -6787,6 +6677,9 @@ typedef void (*ApiImplementationCallback)(const FunctionCallbackInfo<Value>&);\n // --- Callback for WebAssembly.compileStreaming ---\n typedef void (*WasmStreamingCallback)(const FunctionCallbackInfo<Value>&);\n \n+// --- Callback for checking if WebAssembly threads are enabled ---\n+typedef bool (*WasmThreadsEnabledCallback)(Local<Context> context);\n+\n // --- Garbage Collection Callbacks ---\n \n /**\n@@ -6859,6 +6752,7 @@ class V8_EXPORT HeapStatistics {\n   size_t used_heap_size() { return used_heap_size_; }\n   size_t heap_size_limit() { return heap_size_limit_; }\n   size_t malloced_memory() { return malloced_memory_; }\n+  size_t external_memory() { return external_memory_; }\n   size_t peak_malloced_memory() { return peak_malloced_memory_; }\n   size_t number_of_native_contexts() { return number_of_native_contexts_; }\n   size_t number_of_detached_contexts() { return number_of_detached_contexts_; }\n@@ -6877,6 +6771,7 @@ class V8_EXPORT HeapStatistics {\n   size_t used_heap_size_;\n   size_t heap_size_limit_;\n   size_t malloced_memory_;\n+  size_t external_memory_;\n   size_t peak_malloced_memory_;\n   bool does_zap_garbage_;\n   size_t number_of_native_contexts_;\n@@ -7102,18 +6997,21 @@ class V8_EXPORT PersistentHandleVisitor {  // NOLINT\n enum class MemoryPressureLevel { kNone, kModerate, kCritical };\n \n /**\n- * Interface for tracing through the embedder heap. During a v8 garbage\n- * collection, v8 collects hidden fields of all potential wrappers, and at the\n+ * Interface for tracing through the embedder heap. During a V8 garbage\n+ * collection, V8 collects hidden fields of all potential wrappers, and at the\n  * end of its marking phase iterates the collection and asks the embedder to\n  * trace through its heap and use reporter to report each JavaScript object\n  * reachable from any of the given wrappers.\n- *\n- * Before the first call to the TraceWrappersFrom function TracePrologue will be\n- * called. When the garbage collection cycle is finished, TraceEpilogue will be\n- * called.\n  */\n class V8_EXPORT EmbedderHeapTracer {\n  public:\n+  // Indicator for the stack state of the embedder.\n+  enum EmbedderStackState {\n+    kUnknown,\n+    kNonEmpty,\n+    kEmpty,\n+  };\n+\n   enum ForceCompletionAction { FORCE_COMPLETION, DO_NOT_FORCE_COMPLETION };\n \n   struct AdvanceTracingActions {\n@@ -7123,6 +7021,8 @@ class V8_EXPORT EmbedderHeapTracer {\n     ForceCompletionAction force_completion;\n   };\n \n+  virtual ~EmbedderHeapTracer() = default;\n+\n   /**\n    * Called by v8 to register internal fields of found wrappers.\n    *\n@@ -7138,23 +7038,44 @@ class V8_EXPORT EmbedderHeapTracer {\n   virtual void TracePrologue() = 0;\n \n   /**\n-   * Called to to make a tracing step in the embedder.\n+   * Called to make a tracing step in the embedder.\n    *\n    * The embedder is expected to trace its heap starting from wrappers reported\n    * by RegisterV8References method, and report back all reachable wrappers.\n    * Furthermore, the embedder is expected to stop tracing by the given\n    * deadline.\n    *\n    * Returns true if there is still work to do.\n+   *\n+   * Note: Only one of the AdvanceTracing methods needs to be overriden by the\n+   * embedder.\n+   */\n+  V8_DEPRECATE_SOON(\"Use void AdvanceTracing(deadline_in_ms)\",\n+                    virtual bool AdvanceTracing(\n+                        double deadline_in_ms, AdvanceTracingActions actions)) {\n+    return false;\n+  }\n+\n+  /**\n+   * Called to advance tracing in the embedder.\n+   *\n+   * The embedder is expected to trace its heap starting from wrappers reported\n+   * by RegisterV8References method, and report back all reachable wrappers.\n+   * Furthermore, the embedder is expected to stop tracing by the given\n+   * deadline. A deadline of infinity means that tracing should be finished.\n+   *\n+   * Returns |true| if tracing is done, and false otherwise.\n+   *\n+   * Note: Only one of the AdvanceTracing methods needs to be overriden by the\n+   * embedder.\n    */\n-  virtual bool AdvanceTracing(double deadline_in_ms,\n-                              AdvanceTracingActions actions) = 0;\n+  virtual bool AdvanceTracing(double deadline_in_ms);\n \n   /*\n    * Returns true if there no more tracing work to be done (see AdvanceTracing)\n    * and false otherwise.\n    */\n-  virtual bool IsTracingDone() { return NumberOfWrappersToTrace() == 0; }\n+  virtual bool IsTracingDone();\n \n   /**\n    * Called at the end of a GC cycle.\n@@ -7166,8 +7087,13 @@ class V8_EXPORT EmbedderHeapTracer {\n   /**\n    * Called upon entering the final marking pause. No more incremental marking\n    * steps will follow this call.\n+   *\n+   * Note: Only one of the EnterFinalPause methods needs to be overriden by the\n+   * embedder.\n    */\n-  virtual void EnterFinalPause() = 0;\n+  V8_DEPRECATE_SOON(\"Use void EnterFinalPause(EmbedderStackState)\",\n+                    virtual void EnterFinalPause()) {}\n+  virtual void EnterFinalPause(EmbedderStackState stack_state);\n \n   /**\n    * Called when tracing is aborted.\n@@ -7178,7 +7104,7 @@ class V8_EXPORT EmbedderHeapTracer {\n   virtual void AbortTracing() = 0;\n \n   /*\n-   * Called by the embedder to request immediaet finalization of the currently\n+   * Called by the embedder to request immediate finalization of the currently\n    * running tracing phase that has been started with TracePrologue and not\n    * yet finished with TraceEpilogue.\n    *\n@@ -7188,6 +7114,13 @@ class V8_EXPORT EmbedderHeapTracer {\n    */\n   void FinalizeTracing();\n \n+  /*\n+   * Called by the embedder to immediately perform a full garbage collection.\n+   *\n+   * Should only be used in testing code.\n+   */\n+  void GarbageCollectionForTesting(EmbedderStackState stack_state);\n+\n   /*\n    * Returns the v8::Isolate this tracer is attached too and |nullptr| if it\n    * is not attached to any v8::Isolate.\n@@ -7198,11 +7131,11 @@ class V8_EXPORT EmbedderHeapTracer {\n    * Returns the number of wrappers that are still to be traced by the embedder.\n    */\n   V8_DEPRECATE_SOON(\"Use IsTracingDone\",\n-                    virtual size_t NumberOfWrappersToTrace() { return 0; });\n+                    virtual size_t NumberOfWrappersToTrace()) {\n+    return 0;\n+  }\n \n  protected:\n-  virtual ~EmbedderHeapTracer() = default;\n-\n   v8::Isolate* isolate_ = nullptr;\n \n   friend class internal::LocalEmbedderHeapTracer;\n@@ -7500,6 +7433,8 @@ class V8_EXPORT Isolate {\n     kDeoptimizerDisableSpeculation = 47,\n     kArrayPrototypeSortJSArrayModifiedPrototype = 48,\n     kFunctionTokenOffsetTooLongForToString = 49,\n+    kWasmSharedMemory = 50,\n+    kWasmThreadOpcodes = 51,\n \n     // If you add new values here, you'll also need to update Chromium's:\n     // web_feature.mojom, UseCounterCallback.cpp, and enums.xml. V8 changes to\n@@ -7768,16 +7703,6 @@ class V8_EXPORT Isolate {\n    */\n   Local<Context> GetCurrentContext();\n \n-  /**\n-   * Returns the context of the calling JavaScript code.  That is the\n-   * context of the top-most JavaScript frame.  If there are no\n-   * JavaScript frames an empty handle is returned.\n-   */\n-  V8_DEPRECATED(\n-      \"Calling context concept is not compatible with tail calls, and will be \"\n-      \"removed.\",\n-      Local<Context> GetCallingContext());\n-\n   /** Returns the last context entered through V8's C++ API. */\n   Local<Context> GetEnteredContext();\n \n@@ -8029,17 +7954,11 @@ class V8_EXPORT Isolate {\n    * further callbacks.\n    */\n   void AddCallCompletedCallback(CallCompletedCallback callback);\n-  V8_DEPRECATED(\n-      \"Use callback with parameter\",\n-      void AddCallCompletedCallback(DeprecatedCallCompletedCallback callback));\n \n   /**\n    * Removes callback that was installed by AddCallCompletedCallback.\n    */\n   void RemoveCallCompletedCallback(CallCompletedCallback callback);\n-  V8_DEPRECATED(\"Use callback with parameter\",\n-                void RemoveCallCompletedCallback(\n-                    DeprecatedCallCompletedCallback callback));\n \n   /**\n    * Set the PromiseHook callback for various promise lifecycle\n@@ -8073,14 +7992,11 @@ class V8_EXPORT Isolate {\n    * Controls how Microtasks are invoked. See MicrotasksPolicy for details.\n    */\n   void SetMicrotasksPolicy(MicrotasksPolicy policy);\n-  V8_DEPRECATED(\"Use SetMicrotasksPolicy\",\n-                void SetAutorunMicrotasks(bool autorun));\n \n   /**\n    * Returns the policy controlling how Microtasks are invoked.\n    */\n   MicrotasksPolicy GetMicrotasksPolicy() const;\n-  V8_DEPRECATED(\"Use GetMicrotasksPolicy\", bool WillAutorunMicrotasks() const);\n \n   /**\n    * Adds a callback to notify the host application after\n@@ -8303,6 +8219,8 @@ class V8_EXPORT Isolate {\n \n   void SetWasmStreamingCallback(WasmStreamingCallback callback);\n \n+  void SetWasmThreadsEnabledCallback(WasmThreadsEnabledCallback callback);\n+\n   /**\n   * Check if V8 is dead and therefore unusable.  This is the case after\n   * fatal errors such as out-of-memory situations.\n@@ -8467,28 +8385,6 @@ class V8_EXPORT V8 {\n   static void SetNativesDataBlob(StartupData* startup_blob);\n   static void SetSnapshotDataBlob(StartupData* startup_blob);\n \n-  /**\n-   * Bootstrap an isolate and a context from scratch to create a startup\n-   * snapshot. Include the side-effects of running the optional script.\n-   * Returns { NULL, 0 } on failure.\n-   * The caller acquires ownership of the data array in the return value.\n-   */\n-  V8_DEPRECATED(\"Use SnapshotCreator\",\n-                static StartupData CreateSnapshotDataBlob(\n-                    const char* embedded_source = NULL));\n-\n-  /**\n-   * Bootstrap an isolate and a context from the cold startup blob, run the\n-   * warm-up script to trigger code compilation. The side effects are then\n-   * discarded. The resulting startup snapshot will include compiled code.\n-   * Returns { NULL, 0 } on failure.\n-   * The caller acquires ownership of the data array in the return value.\n-   * The argument startup blob is untouched.\n-   */\n-  V8_DEPRECATED(\"Use SnapshotCreator\",\n-                static StartupData WarmUpSnapshotDataBlob(\n-                    StartupData cold_startup_blob, const char* warmup_source));\n-\n   /** Set the callback to invoke in case of Dcheck failures. */\n   static void SetDcheckErrorHandler(DcheckErrorCallback that);\n \n@@ -8956,7 +8852,6 @@ class V8_EXPORT TryCatch {\n    * Returns the .stack property of the thrown object.  If no .stack\n    * property is present an empty handle is returned.\n    */\n-  V8_DEPRECATED(\"Use maybe version.\", Local<Value> StackTrace() const);\n   V8_WARN_UNUSED_RESULT MaybeLocal<Value> StackTrace(\n       Local<Context> context) const;\n \n@@ -9535,7 +9430,7 @@ class Internals {\n     return PlatformSmiTagging::IntToSmi(value);\n   }\n \n-  V8_INLINE static bool IsValidSmi(intptr_t value) {\n+  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n     return PlatformSmiTagging::IsValidSmi(value);\n   }\n \n@@ -10209,12 +10104,13 @@ String::ExternalStringResource* String::GetExternalStringResource() const {\n   typedef internal::Object O;\n   typedef internal::Internals I;\n   O* obj = *reinterpret_cast<O* const*>(this);\n-  String::ExternalStringResource* result;\n+\n+  ExternalStringResource* result;\n   if (I::IsExternalTwoByteString(I::GetInstanceType(obj))) {\n     void* value = I::ReadField<void*>(obj, I::kStringResourceOffset);\n     result = reinterpret_cast<String::ExternalStringResource*>(value);\n   } else {\n-    result = NULL;\n+    result = GetExternalStringResourceSlow();\n   }\n #ifdef V8_ENABLE_CHECKS\n   VerifyExternalStringResource(result);\n@@ -10230,14 +10126,16 @@ String::ExternalStringResourceBase* String::GetExternalStringResourceBase(\n   O* obj = *reinterpret_cast<O* const*>(this);\n   int type = I::GetInstanceType(obj) & I::kFullStringRepresentationMask;\n   *encoding_out = static_cast<Encoding>(type & I::kStringEncodingMask);\n-  ExternalStringResourceBase* resource = NULL;\n+  ExternalStringResourceBase* resource;\n   if (type == I::kExternalOneByteRepresentationTag ||\n       type == I::kExternalTwoByteRepresentationTag) {\n     void* value = I::ReadField<void*>(obj, I::kStringResourceOffset);\n     resource = static_cast<ExternalStringResourceBase*>(value);\n+  } else {\n+    resource = GetExternalStringResourceBaseSlow(encoding_out);\n   }\n #ifdef V8_ENABLE_CHECKS\n-    VerifyExternalStringResourceBase(resource, *encoding_out);\n+  VerifyExternalStringResourceBase(resource, *encoding_out);\n #endif\n   return resource;\n }\n@@ -10318,30 +10216,6 @@ template <class T> Value* Value::Cast(T* value) {\n }\n \n \n-Local<Boolean> Value::ToBoolean() const {\n-  return ToBoolean(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(Local<Boolean>());\n-}\n-\n-\n-Local<String> Value::ToString() const {\n-  return ToString(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(Local<String>());\n-}\n-\n-\n-Local<Object> Value::ToObject() const {\n-  return ToObject(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(Local<Object>());\n-}\n-\n-\n-Local<Integer> Value::ToInteger() const {\n-  return ToInteger(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(Local<Integer>());\n-}\n-\n-\n Boolean* Boolean::Cast(v8::Value* value) {\n #ifdef V8_ENABLE_CHECKS\n   CheckCast(value);"
        },
        {
            "sha": "75fd5aa7e743f78d5fe786696ab584d65267ef84",
            "filename": "deps/v8/include/v8config.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8config.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finclude%2Fv8config.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8config.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -214,6 +214,8 @@\n # define V8_HAS_ATTRIBUTE_ALIGNED (__has_attribute(aligned))\n # define V8_HAS_ATTRIBUTE_ALWAYS_INLINE (__has_attribute(always_inline))\n # define V8_HAS_ATTRIBUTE_DEPRECATED (__has_attribute(deprecated))\n+# define V8_HAS_ATTRIBUTE_DEPRECATED_MESSAGE \\\n+    (__has_extension(attribute_deprecated_with_message))\n # define V8_HAS_ATTRIBUTE_NOINLINE (__has_attribute(noinline))\n # define V8_HAS_ATTRIBUTE_UNUSED (__has_attribute(unused))\n # define V8_HAS_ATTRIBUTE_VISIBILITY (__has_attribute(visibility))"
        },
        {
            "sha": "a0ede58b911a7940133b4907a07d7b06bdd4bc6e",
            "filename": "deps/v8/infra/config/cq.cfg",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,6 @@\n # documentation of this file format.\n \n version: 1\n-cq_name: \"v8\"\n cq_status_url: \"https://chromium-cq-status.appspot.com\"\n git_repo_url: \"https://chromium.googlesource.com/v8/v8\"\n commit_burst_delay: 60\n@@ -36,6 +35,7 @@ verifiers {\n         triggered_by: \"v8_linux64_dbg_ng\"\n       }\n       builders { name: \"v8_linux64_gcc_compile_dbg\" }\n+      builders { name: \"v8_linux64_header_includes_dbg\" }\n       builders { name: \"v8_linux64_jumbo_compile_rel\" }\n       builders { name: \"v8_linux64_rel_ng\" }\n       builders {\n@@ -67,8 +67,6 @@ verifiers {\n       }\n       builders { name: \"v8_linux_chromium_gn_rel\" }\n       builders { name: \"v8_linux_gcc_compile_rel\" }\n-      builders { name: \"v8_linux_mips64el_compile_rel\" }\n-      builders { name: \"v8_linux_mipsel_compile_rel\" }\n       builders { name: \"v8_linux_nodcheck_rel_ng\" }\n       builders {\n         name: \"v8_linux_nodcheck_rel_ng_triggered\""
        },
        {
            "sha": "095aeefc5c463178a57f2fac1d24053ba7c7a9b5",
            "filename": "deps/v8/infra/mb/mb_config.pyl",
            "status": "modified",
            "additions": 20,
            "deletions": 21,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -69,10 +69,10 @@\n       'V8 Linux - verify csa': 'release_x86_verify_csa',\n       # Linux64.\n       'V8 Linux64 - builder': 'release_x64',\n-      'V8 Linux64 - concurrent marking - builder': 'release_x64_concurrent_marking',\n       'V8 Linux64 - debug builder': 'debug_x64',\n       'V8 Linux64 - custom snapshot - debug builder': 'debug_x64_custom',\n       'V8 Linux64 - internal snapshot': 'release_x64_internal',\n+      'V8 Linux64 - debug - header includes': 'debug_x64_header_includes',\n       'V8 Linux64 - verify csa': 'release_x64_verify_csa',\n       # Jumbo.\n       'V8 Linux64 Jumbo': 'release_x64_jumbo',\n@@ -96,9 +96,7 @@\n       'V8 Mac64 ASAN': 'release_x64_asan_no_lsan',\n       # Sanitizers.\n       'V8 Linux64 ASAN': 'release_x64_asan',\n-      'V8 Linux64 TSAN': 'release_x64_tsan',\n-      'V8 Linux64 TSAN - concurrent marking':\n-          'release_x64_tsan_concurrent_marking',\n+      'V8 Linux64 TSAN - builder': 'release_x64_tsan',\n       'V8 Linux - arm64 - sim - MSAN': 'release_simulate_arm64_msan',\n       # Misc.\n       'V8 Linux gcc 4.8': 'release_x86_gcc',\n@@ -161,6 +159,7 @@\n       'V8 Linux - arm - sim - debug': 'debug_simulate_arm',\n       # Arm64.\n       'V8 Android Arm64 - builder': 'release_android_arm64',\n+      'V8 Android Arm64 - debug builder': 'debug_android_arm64',\n       'V8 Linux - arm64 - sim': 'release_simulate_arm64',\n       'V8 Linux - arm64 - sim - debug': 'debug_simulate_arm64',\n       'V8 Linux - arm64 - sim - nosnap - debug':\n@@ -204,6 +203,9 @@\n       'V8 s390x - sim - stable branch': 'release_simulate_s390x',\n     },\n     'tryserver.v8': {\n+      'v8_android_arm_compile_rel': 'release_android_arm',\n+      'v8_android_arm64_compile_dbg': 'debug_android_arm64',\n+      'v8_android_arm64_n5x_rel_ng': 'release_android_arm64',\n       'v8_fuchsia_rel_ng': 'release_x64_fuchsia_trybot',\n       'v8_linux_rel_ng': 'release_x86_gcmole_trybot',\n       'v8_linux_verify_csa_rel_ng': 'release_x86_verify_csa',\n@@ -218,6 +220,7 @@\n       'v8_linux_shared_compile_rel': 'release_x86_shared_verify_heap',\n       'v8_linux64_dbg_ng': 'debug_x64_trybot',\n       'v8_linux64_gcc_compile_dbg': 'debug_x64_gcc',\n+      'v8_linux64_header_includes_dbg': 'debug_x64_header_includes',\n       'v8_linux64_fyi_rel_ng': 'release_x64_test_features_trybot',\n       'v8_linux64_rel_ng': 'release_x64_test_features_trybot',\n       'v8_linux64_verify_csa_rel_ng': 'release_x64_verify_csa',\n@@ -229,8 +232,8 @@\n       'v8_linux64_jumbo_compile_rel': 'release_x64_jumbo_trybot',\n       'v8_linux64_jumbo_limited_compile_rel': 'release_x64_jumbo_limited_trybot',\n       'v8_linux64_tsan_rel': 'release_x64_tsan_minimal_symbols',\n-      'v8_linux64_tsan_concurrent_marking_rel_ng':\n-          'release_x64_tsan_concurrent_marking_minimal_symbols',\n+      'v8_linux64_tsan_isolates_rel_ng':\n+          'release_x64_tsan_minimal_symbols',\n       'v8_linux64_ubsan_rel_ng': 'release_x64_ubsan_vptr_minimal_symbols',\n       # TODO(machenbach): Remove after switching to x64 on infra side.\n       'v8_win_dbg': 'debug_x86_trybot',\n@@ -258,7 +261,6 @@\n       'v8_linux_arm64_gc_stress_dbg': 'debug_simulate_arm64',\n       'v8_linux_mipsel_compile_rel': 'release_simulate_mipsel',\n       'v8_linux_mips64el_compile_rel': 'release_simulate_mips64el',\n-      'v8_android_arm_compile_rel': 'release_android_arm',\n     },\n   },\n \n@@ -405,6 +407,8 @@\n       'release_bot', 'simulate_s390x'],\n \n     # Debug configs for arm.\n+    'debug_android_arm64': [\n+      'debug_bot', 'arm64', 'android', 'minimal_symbols'],\n     'debug_arm': [\n       'debug_bot', 'arm', 'hard_float'],\n \n@@ -443,8 +447,6 @@\n       'release_bot', 'x64', 'cfi_clusterfuzz'],\n     'release_x64_msvc': [\n       'release_bot', 'x64', 'msvc'],\n-    'release_x64_concurrent_marking': [\n-      'release_bot', 'x64', 'v8_enable_concurrent_marking'],\n     'release_x64_correctness_fuzzer' : [\n       'release_bot', 'x64', 'v8_correctness_fuzzer'],\n     'release_x64_fuchsia': [\n@@ -473,11 +475,6 @@\n       'release_trybot', 'x64', 'v8_enable_test_features'],\n     'release_x64_tsan': [\n       'release_bot', 'x64', 'tsan'],\n-    'release_x64_tsan_concurrent_marking': [\n-      'release_bot', 'x64', 'v8_enable_concurrent_marking', 'tsan'],\n-    'release_x64_tsan_concurrent_marking_minimal_symbols': [\n-      'release_bot', 'x64', 'v8_enable_concurrent_marking', 'tsan',\n-      'minimal_symbols'],\n     'release_x64_tsan_minimal_symbols': [\n       'release_bot', 'x64', 'tsan', 'minimal_symbols'],\n     'release_x64_ubsan': [\n@@ -506,6 +503,8 @@\n       'debug_bot', 'x64', 'fuchsia'],\n     'debug_x64_gcc': [\n       'debug_bot', 'x64', 'gcc'],\n+    'debug_x64_header_includes': [\n+      'debug_bot', 'x64', 'v8_check_header_includes'],\n     'debug_x64_jumbo': [\n       'debug_bot', 'x64', 'jumbo'],\n     'debug_x64_jumbo_limited': [\n@@ -716,7 +715,7 @@\n     },\n \n     'release': {\n-      'gn_args': 'is_debug=false',\n+      'gn_args': 'is_debug=false android_unstripped_runtime_outputs=false',\n     },\n \n     'release_bot': {\n@@ -800,12 +799,8 @@\n       'gn_args': 'is_ubsan_vptr=true is_ubsan_no_recover=false',\n     },\n \n-    'v8_no_i18n': {\n-      'gn_args': 'v8_enable_i18n_support=false icu_use_data_file=false',\n-    },\n-\n-    'v8_enable_concurrent_marking': {\n-      'gn_args': 'v8_enable_concurrent_marking=true',\n+    'v8_check_header_includes': {\n+      'gn_args': 'v8_check_header_includes=true',\n     },\n \n     'v8_correctness_fuzzer': {\n@@ -841,6 +836,10 @@\n       # This is the default in gn for debug.\n     },\n \n+    'v8_no_i18n': {\n+      'gn_args': 'v8_enable_i18n_support=false icu_use_data_file=false',\n+    },\n+\n     'v8_snapshot_custom': {\n       # GN path is relative to project root.\n       'gn_args': 'v8_embed_script=\"test/mjsunit/mjsunit.js\"',"
        },
        {
            "sha": "e145534e6ea15cef10617078f302ec073911f477",
            "filename": "deps/v8/infra/testing/PRESUBMIT.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finfra%2Ftesting%2FPRESUBMIT.py",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finfra%2Ftesting%2FPRESUBMIT.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Ftesting%2FPRESUBMIT.py?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -23,6 +23,8 @@\n SUPPORTED_SWARMING_DIMENSIONS = [\n   'cores',\n   'cpu',\n+  'device_os',\n+  'device_type',\n   'os',\n ]\n "
        },
        {
            "sha": "b2cd7618170c39127f734a4296a1415be1e3913a",
            "filename": "deps/v8/infra/testing/builders.pyl",
            "status": "modified",
            "additions": 19,
            "deletions": 1,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finfra%2Ftesting%2Fbuilders.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Finfra%2Ftesting%2Fbuilders.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Ftesting%2Fbuilders.pyl?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -31,6 +31,18 @@\n   ##############################################################################\n   ### luci.v8.try\n   ##############################################################################\n+  # Android\n+  'v8_android_arm64_n5x_rel_ng_triggered': {\n+    'swarming_dimensions' : {\n+      'device_os': 'MMB29Q',\n+      'device_type': 'bullhead',\n+      'os': 'Android',\n+    },\n+    'tests': [\n+      {'name': 'mjsunit', 'variant': 'default', 'shards': 2},\n+    ],\n+  },\n+  ##############################################################################\n   # Linux32\n   'v8_linux_dbg_ng_triggered': {\n     'swarming_dimensions' : {\n@@ -109,6 +121,7 @@\n       {'name': 'test262_variants', 'shards': 4},\n       {'name': 'test262_variants', 'variant': 'extra', 'shards': 2},\n       {'name': 'v8testing'},\n+      {'name': 'v8testing', 'suffix': 'isolates', 'test_args': ['--isolates'], 'shards': 2},\n       {'name': 'v8testing', 'variant': 'extra'},\n     ],\n   },\n@@ -217,6 +230,11 @@\n       {'name': 'v8testing', 'variant': 'slow_path'},\n     ],\n   },\n+  'v8_linux64_tsan_isolates_rel_ng_triggered': {\n+    'tests': [\n+      {'name': 'v8testing', 'test_args': ['--isolates'], 'shards': 7},\n+    ],\n+  },\n   'v8_linux64_ubsan_rel_ng_triggered': {\n     'tests': [\n       {'name': 'v8testing', 'shards': 2},\n@@ -249,7 +267,7 @@\n       {'name': 'mozilla'},\n       {'name': 'test262'},\n       {'name': 'v8testing', 'shards': 9},\n-      {'name': 'v8testing', 'variant': 'extra', 'shards': 3},\n+      {'name': 'v8testing', 'variant': 'extra', 'shards': 4},\n     ],\n   },\n   ##############################################################################"
        },
        {
            "sha": "90cfd737f21bd6a6a48fd9fb4242133e991574cf",
            "filename": "deps/v8/src/DEPS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2FDEPS",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2FDEPS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2FDEPS?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -12,6 +12,7 @@ include_rules = [\n   \"+src/heap/factory-inl.h\",\n   \"+src/heap/heap.h\",\n   \"+src/heap/heap-inl.h\",\n+  \"+src/heap/heap-write-barrier-inl.h\",\n   \"-src/inspector\",\n   \"-src/interpreter\",\n   \"+src/interpreter/bytecode-array-accessor.h\",\n@@ -22,6 +23,7 @@ include_rules = [\n   \"+src/interpreter/bytecode-register.h\",\n   \"+src/interpreter/bytecodes.h\",\n   \"+src/interpreter/interpreter.h\",\n+  \"+src/interpreter/interpreter-generator.h\",\n   \"+src/interpreter/setup-interpreter.h\",\n   \"-src/trap-handler\",\n   \"+src/trap-handler/trap-handler.h\","
        },
        {
            "sha": "da935f3652812ce0c48a093e53a080be1a63d178",
            "filename": "deps/v8/src/accessors.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Faccessors.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Faccessors.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faccessors.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -4,7 +4,7 @@\n \n #include \"src/accessors.h\"\n \n-#include \"src/api.h\"\n+#include \"src/api-inl.h\"\n #include \"src/contexts.h\"\n #include \"src/deoptimizer.h\"\n #include \"src/execution.h\"\n@@ -13,6 +13,7 @@\n #include \"src/isolate-inl.h\"\n #include \"src/messages.h\"\n #include \"src/objects/api-callbacks.h\"\n+#include \"src/objects/js-array-inl.h\"\n #include \"src/objects/module-inl.h\"\n #include \"src/property-details.h\"\n #include \"src/prototype.h\"\n@@ -77,8 +78,7 @@ bool Accessors::IsJSObjectFieldAccessor(Isolate* isolate, Handle<Map> map,\n }\n \n V8_WARN_UNUSED_RESULT MaybeHandle<Object>\n-Accessors::ReplaceAccessorWithDataProperty(Isolate* isolate,\n-                                           Handle<Object> receiver,\n+Accessors::ReplaceAccessorWithDataProperty(Handle<Object> receiver,\n                                            Handle<JSObject> holder,\n                                            Handle<Name> name,\n                                            Handle<Object> value) {\n@@ -112,8 +112,8 @@ void Accessors::ReconfigureToDataProperty(\n       Handle<JSObject>::cast(Utils::OpenHandle(*info.Holder()));\n   Handle<Name> name = Utils::OpenHandle(*key);\n   Handle<Object> value = Utils::OpenHandle(*val);\n-  MaybeHandle<Object> result = Accessors::ReplaceAccessorWithDataProperty(\n-      isolate, receiver, holder, name, value);\n+  MaybeHandle<Object> result =\n+      Accessors::ReplaceAccessorWithDataProperty(receiver, holder, name, value);\n   if (result.is_null()) {\n     isolate->OptionalRescheduleException(false);\n   } else {\n@@ -327,6 +327,7 @@ void Accessors::FunctionPrototypeGetter(\n   HandleScope scope(isolate);\n   Handle<JSFunction> function =\n       Handle<JSFunction>::cast(Utils::OpenHandle(*info.Holder()));\n+  DCHECK(function->has_prototype_property());\n   Handle<Object> result = GetFunctionPrototype(isolate, function);\n   info.GetReturnValue().Set(Utils::ToLocal(result));\n }\n@@ -341,6 +342,7 @@ void Accessors::FunctionPrototypeSetter(\n   Handle<Object> value = Utils::OpenHandle(*val);\n   Handle<JSFunction> object =\n       Handle<JSFunction>::cast(Utils::OpenHandle(*info.Holder()));\n+  DCHECK(object->has_prototype_property());\n   JSFunction::SetPrototype(object, value);\n   info.GetReturnValue().Set(true);\n }\n@@ -857,8 +859,8 @@ void Accessors::ErrorStackGetter(\n       Utils::OpenHandle(*v8::Local<v8::Value>(info.This()));\n   Handle<Name> name = Utils::OpenHandle(*key);\n   if (IsAccessor(receiver, name, holder)) {\n-    result = Accessors::ReplaceAccessorWithDataProperty(\n-        isolate, receiver, holder, name, formatted_stack_trace);\n+    result = Accessors::ReplaceAccessorWithDataProperty(receiver, holder, name,\n+                                                        formatted_stack_trace);\n     if (result.is_null()) {\n       isolate->OptionalRescheduleException(false);\n       return;"
        },
        {
            "sha": "69fdbbb74e329ad73c6677b6565e8ce4dd5faf6c",
            "filename": "deps/v8/src/accessors.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Faccessors.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Faccessors.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faccessors.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -98,8 +98,8 @@ class Accessors : public AllStatic {\n                                       FieldIndex* field_index);\n \n   static MaybeHandle<Object> ReplaceAccessorWithDataProperty(\n-      Isolate* isolate, Handle<Object> receiver, Handle<JSObject> holder,\n-      Handle<Name> name, Handle<Object> value);\n+      Handle<Object> receiver, Handle<JSObject> holder, Handle<Name> name,\n+      Handle<Object> value);\n \n   // Create an AccessorInfo. The setter is optional (can be nullptr).\n   //"
        },
        {
            "sha": "89f606ed410a51970f3fb6fbf6f6b4331e932734",
            "filename": "deps/v8/src/api-arguments-inl.h",
            "status": "modified",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -7,13 +7,37 @@\n \n #include \"src/api-arguments.h\"\n \n+#include \"src/api-inl.h\"\n #include \"src/objects/api-callbacks.h\"\n #include \"src/tracing/trace-event.h\"\n #include \"src/vm-state-inl.h\"\n \n namespace v8 {\n namespace internal {\n \n+CustomArgumentsBase::CustomArgumentsBase(Isolate* isolate)\n+    : Relocatable(isolate) {}\n+\n+template <typename T>\n+template <typename V>\n+Handle<V> CustomArguments<T>::GetReturnValue(Isolate* isolate) {\n+  // Check the ReturnValue.\n+  Object** handle = &this->begin()[kReturnValueOffset];\n+  // Nothing was set, return empty handle as per previous behaviour.\n+  if ((*handle)->IsTheHole(isolate)) return Handle<V>();\n+  Handle<V> result = Handle<V>::cast(Handle<Object>(handle));\n+  result->VerifyApiCallResultType();\n+  return result;\n+}\n+\n+inline JSObject* PropertyCallbackArguments::holder() {\n+  return JSObject::cast(this->begin()[T::kHolderIndex]);\n+}\n+\n+inline JSObject* FunctionCallbackArguments::holder() {\n+  return JSObject::cast(this->begin()[T::kHolderIndex]);\n+}\n+\n #define FOR_EACH_CALLBACK(F)                        \\\n   F(Query, query, Object, v8::Integer, interceptor) \\\n   F(Deleter, deleter, Object, v8::Boolean, Handle<Object>())"
        },
        {
            "sha": "4b290d9dabb8008bd06c664fc6035d0ce65cafe4",
            "filename": "deps/v8/src/api-arguments.cc",
            "status": "added",
            "additions": 54,
            "deletions": 0,
            "changes": 54,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-arguments.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-arguments.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -0,0 +1,54 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#include \"src/api-arguments.h\"\n+\n+#include \"src/api-arguments-inl.h\"\n+\n+namespace v8 {\n+namespace internal {\n+\n+PropertyCallbackArguments::PropertyCallbackArguments(Isolate* isolate,\n+                                                     Object* data, Object* self,\n+                                                     JSObject* holder,\n+                                                     ShouldThrow should_throw)\n+    : Super(isolate) {\n+  Object** values = this->begin();\n+  values[T::kThisIndex] = self;\n+  values[T::kHolderIndex] = holder;\n+  values[T::kDataIndex] = data;\n+  values[T::kIsolateIndex] = reinterpret_cast<Object*>(isolate);\n+  values[T::kShouldThrowOnErrorIndex] =\n+      Smi::FromInt(should_throw == kThrowOnError ? 1 : 0);\n+\n+  // Here the hole is set as default value.\n+  // It cannot escape into js as it's removed in Call below.\n+  HeapObject* the_hole = ReadOnlyRoots(isolate).the_hole_value();\n+  values[T::kReturnValueDefaultValueIndex] = the_hole;\n+  values[T::kReturnValueIndex] = the_hole;\n+  DCHECK(values[T::kHolderIndex]->IsHeapObject());\n+  DCHECK(values[T::kIsolateIndex]->IsSmi());\n+}\n+\n+FunctionCallbackArguments::FunctionCallbackArguments(\n+    internal::Isolate* isolate, internal::Object* data,\n+    internal::HeapObject* callee, internal::Object* holder,\n+    internal::HeapObject* new_target, internal::Object** argv, int argc)\n+    : Super(isolate), argv_(argv), argc_(argc) {\n+  Object** values = begin();\n+  values[T::kDataIndex] = data;\n+  values[T::kHolderIndex] = holder;\n+  values[T::kNewTargetIndex] = new_target;\n+  values[T::kIsolateIndex] = reinterpret_cast<internal::Object*>(isolate);\n+  // Here the hole is set as default value.\n+  // It cannot escape into js as it's remove in Call below.\n+  HeapObject* the_hole = ReadOnlyRoots(isolate).the_hole_value();\n+  values[T::kReturnValueDefaultValueIndex] = the_hole;\n+  values[T::kReturnValueIndex] = the_hole;\n+  DCHECK(values[T::kHolderIndex]->IsHeapObject());\n+  DCHECK(values[T::kIsolateIndex]->IsSmi());\n+}\n+\n+}  // namespace internal\n+}  // namespace v8"
        },
        {
            "sha": "0a0a7362c7c687eebd7446b0a7fb658e7fe769a9",
            "filename": "deps/v8/src/api-arguments.h",
            "status": "modified",
            "additions": 5,
            "deletions": 53,
            "changes": 58,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-arguments.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-arguments.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -18,8 +18,7 @@ namespace internal {\n // can.\n class CustomArgumentsBase : public Relocatable {\n  protected:\n-  explicit inline CustomArgumentsBase(Isolate* isolate)\n-      : Relocatable(isolate) {}\n+  explicit inline CustomArgumentsBase(Isolate* isolate);\n };\n \n template <typename T>\n@@ -52,18 +51,6 @@ class CustomArguments : public CustomArgumentsBase {\n   Object* values_[T::kArgsLength];\n };\n \n-template <typename T>\n-template <typename V>\n-Handle<V> CustomArguments<T>::GetReturnValue(Isolate* isolate) {\n-  // Check the ReturnValue.\n-  Object** handle = &this->begin()[kReturnValueOffset];\n-  // Nothing was set, return empty handle as per previous behaviour.\n-  if ((*handle)->IsTheHole(isolate)) return Handle<V>();\n-  Handle<V> result = Handle<V>::cast(Handle<Object>(handle));\n-  result->VerifyApiCallResultType();\n-  return result;\n-}\n-\n // Note: Calling args.Call() sets the return value on args. For multiple\n // Call()'s, a new args should be used every time.\n class PropertyCallbackArguments\n@@ -81,24 +68,7 @@ class PropertyCallbackArguments\n   static const int kShouldThrowOnErrorIndex = T::kShouldThrowOnErrorIndex;\n \n   PropertyCallbackArguments(Isolate* isolate, Object* data, Object* self,\n-                            JSObject* holder, ShouldThrow should_throw)\n-      : Super(isolate) {\n-    Object** values = this->begin();\n-    values[T::kThisIndex] = self;\n-    values[T::kHolderIndex] = holder;\n-    values[T::kDataIndex] = data;\n-    values[T::kIsolateIndex] = reinterpret_cast<Object*>(isolate);\n-    values[T::kShouldThrowOnErrorIndex] =\n-        Smi::FromInt(should_throw == kThrowOnError ? 1 : 0);\n-\n-    // Here the hole is set as default value.\n-    // It cannot escape into js as it's removed in Call below.\n-    HeapObject* the_hole = ReadOnlyRoots(isolate).the_hole_value();\n-    values[T::kReturnValueDefaultValueIndex] = the_hole;\n-    values[T::kReturnValueIndex] = the_hole;\n-    DCHECK(values[T::kHolderIndex]->IsHeapObject());\n-    DCHECK(values[T::kIsolateIndex]->IsSmi());\n-  }\n+                            JSObject* holder, ShouldThrow should_throw);\n \n   // -------------------------------------------------------------------------\n   // Accessor Callbacks\n@@ -165,9 +135,7 @@ class PropertyCallbackArguments\n       GenericNamedPropertyGetterCallback f, Handle<Name> name,\n       Handle<Object> info);\n \n-  inline JSObject* holder() {\n-    return JSObject::cast(this->begin()[T::kHolderIndex]);\n-  }\n+  inline JSObject* holder();\n \n   // Don't copy PropertyCallbackArguments, because they would both have the\n   // same prev_ pointer.\n@@ -191,21 +159,7 @@ class FunctionCallbackArguments\n                             internal::HeapObject* callee,\n                             internal::Object* holder,\n                             internal::HeapObject* new_target,\n-                            internal::Object** argv, int argc)\n-      : Super(isolate), argv_(argv), argc_(argc) {\n-    Object** values = begin();\n-    values[T::kDataIndex] = data;\n-    values[T::kHolderIndex] = holder;\n-    values[T::kNewTargetIndex] = new_target;\n-    values[T::kIsolateIndex] = reinterpret_cast<internal::Object*>(isolate);\n-    // Here the hole is set as default value.\n-    // It cannot escape into js as it's remove in Call below.\n-    HeapObject* the_hole = ReadOnlyRoots(isolate).the_hole_value();\n-    values[T::kReturnValueDefaultValueIndex] = the_hole;\n-    values[T::kReturnValueIndex] = the_hole;\n-    DCHECK(values[T::kHolderIndex]->IsHeapObject());\n-    DCHECK(values[T::kIsolateIndex]->IsSmi());\n-  }\n+                            internal::Object** argv, int argc);\n \n   /*\n    * The following Call function wraps the calling of all callbacks to handle\n@@ -218,9 +172,7 @@ class FunctionCallbackArguments\n   inline Handle<Object> Call(CallHandlerInfo* handler);\n \n  private:\n-  inline JSObject* holder() {\n-    return JSObject::cast(this->begin()[T::kHolderIndex]);\n-  }\n+  inline JSObject* holder();\n \n   internal::Object** argv_;\n   int argc_;"
        },
        {
            "sha": "50586814d8d1a3b1ff48b7198df1302558485671",
            "filename": "deps/v8/src/api-inl.h",
            "status": "added",
            "additions": 140,
            "deletions": 0,
            "changes": 140,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -0,0 +1,140 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_API_INL_H_\n+#define V8_API_INL_H_\n+\n+#include \"src/api.h\"\n+#include \"src/objects-inl.h\"\n+\n+namespace v8 {\n+\n+template <typename T>\n+inline T ToCData(v8::internal::Object* obj) {\n+  STATIC_ASSERT(sizeof(T) == sizeof(v8::internal::Address));\n+  if (obj == v8::internal::Smi::kZero) return nullptr;\n+  return reinterpret_cast<T>(\n+      v8::internal::Foreign::cast(obj)->foreign_address());\n+}\n+\n+template <>\n+inline v8::internal::Address ToCData(v8::internal::Object* obj) {\n+  if (obj == v8::internal::Smi::kZero) return v8::internal::kNullAddress;\n+  return v8::internal::Foreign::cast(obj)->foreign_address();\n+}\n+\n+template <typename T>\n+inline v8::internal::Handle<v8::internal::Object> FromCData(\n+    v8::internal::Isolate* isolate, T obj) {\n+  STATIC_ASSERT(sizeof(T) == sizeof(v8::internal::Address));\n+  if (obj == nullptr) return handle(v8::internal::Smi::kZero, isolate);\n+  return isolate->factory()->NewForeign(\n+      reinterpret_cast<v8::internal::Address>(obj));\n+}\n+\n+template <>\n+inline v8::internal::Handle<v8::internal::Object> FromCData(\n+    v8::internal::Isolate* isolate, v8::internal::Address obj) {\n+  if (obj == v8::internal::kNullAddress) {\n+    return handle(v8::internal::Smi::kZero, isolate);\n+  }\n+  return isolate->factory()->NewForeign(obj);\n+}\n+\n+template <class From, class To>\n+inline Local<To> Utils::Convert(v8::internal::Handle<From> obj) {\n+  DCHECK(obj.is_null() || (obj->IsSmi() || !obj->IsTheHole()));\n+  return Local<To>(reinterpret_cast<To*>(obj.location()));\n+}\n+\n+// Implementations of ToLocal\n+\n+#define MAKE_TO_LOCAL(Name, From, To)                                       \\\n+  Local<v8::To> Utils::Name(v8::internal::Handle<v8::internal::From> obj) { \\\n+    return Convert<v8::internal::From, v8::To>(obj);                        \\\n+  }\n+\n+#define MAKE_TO_LOCAL_TYPED_ARRAY(Type, typeName, TYPE, ctype)        \\\n+  Local<v8::Type##Array> Utils::ToLocal##Type##Array(                 \\\n+      v8::internal::Handle<v8::internal::JSTypedArray> obj) {         \\\n+    DCHECK(obj->type() == v8::internal::kExternal##Type##Array);      \\\n+    return Convert<v8::internal::JSTypedArray, v8::Type##Array>(obj); \\\n+  }\n+\n+MAKE_TO_LOCAL(ToLocal, Context, Context)\n+MAKE_TO_LOCAL(ToLocal, Object, Value)\n+MAKE_TO_LOCAL(ToLocal, Module, Module)\n+MAKE_TO_LOCAL(ToLocal, Name, Name)\n+MAKE_TO_LOCAL(ToLocal, String, String)\n+MAKE_TO_LOCAL(ToLocal, Symbol, Symbol)\n+MAKE_TO_LOCAL(ToLocal, JSRegExp, RegExp)\n+MAKE_TO_LOCAL(ToLocal, JSReceiver, Object)\n+MAKE_TO_LOCAL(ToLocal, JSObject, Object)\n+MAKE_TO_LOCAL(ToLocal, JSFunction, Function)\n+MAKE_TO_LOCAL(ToLocal, JSArray, Array)\n+MAKE_TO_LOCAL(ToLocal, JSMap, Map)\n+MAKE_TO_LOCAL(ToLocal, JSSet, Set)\n+MAKE_TO_LOCAL(ToLocal, JSProxy, Proxy)\n+MAKE_TO_LOCAL(ToLocal, JSArrayBuffer, ArrayBuffer)\n+MAKE_TO_LOCAL(ToLocal, JSArrayBufferView, ArrayBufferView)\n+MAKE_TO_LOCAL(ToLocal, JSDataView, DataView)\n+MAKE_TO_LOCAL(ToLocal, JSTypedArray, TypedArray)\n+MAKE_TO_LOCAL(ToLocalShared, JSArrayBuffer, SharedArrayBuffer)\n+\n+TYPED_ARRAYS(MAKE_TO_LOCAL_TYPED_ARRAY)\n+\n+MAKE_TO_LOCAL(ToLocal, FunctionTemplateInfo, FunctionTemplate)\n+MAKE_TO_LOCAL(ToLocal, ObjectTemplateInfo, ObjectTemplate)\n+MAKE_TO_LOCAL(SignatureToLocal, FunctionTemplateInfo, Signature)\n+MAKE_TO_LOCAL(AccessorSignatureToLocal, FunctionTemplateInfo, AccessorSignature)\n+MAKE_TO_LOCAL(MessageToLocal, Object, Message)\n+MAKE_TO_LOCAL(PromiseToLocal, JSObject, Promise)\n+MAKE_TO_LOCAL(StackTraceToLocal, FixedArray, StackTrace)\n+MAKE_TO_LOCAL(StackFrameToLocal, StackFrameInfo, StackFrame)\n+MAKE_TO_LOCAL(NumberToLocal, Object, Number)\n+MAKE_TO_LOCAL(IntegerToLocal, Object, Integer)\n+MAKE_TO_LOCAL(Uint32ToLocal, Object, Uint32)\n+MAKE_TO_LOCAL(ToLocal, BigInt, BigInt);\n+MAKE_TO_LOCAL(ExternalToLocal, JSObject, External)\n+MAKE_TO_LOCAL(CallableToLocal, JSReceiver, Function)\n+MAKE_TO_LOCAL(ToLocalPrimitive, Object, Primitive)\n+MAKE_TO_LOCAL(ToLocal, FixedArray, PrimitiveArray)\n+MAKE_TO_LOCAL(ScriptOrModuleToLocal, Script, ScriptOrModule)\n+\n+#undef MAKE_TO_LOCAL_TYPED_ARRAY\n+#undef MAKE_TO_LOCAL\n+\n+// Implementations of OpenHandle\n+\n+#define MAKE_OPEN_HANDLE(From, To)                                             \\\n+  v8::internal::Handle<v8::internal::To> Utils::OpenHandle(                    \\\n+      const v8::From* that, bool allow_empty_handle) {                         \\\n+    DCHECK(allow_empty_handle || that != nullptr);                             \\\n+    DCHECK(that == nullptr ||                                                  \\\n+           (*reinterpret_cast<v8::internal::Object* const*>(that))->Is##To()); \\\n+    return v8::internal::Handle<v8::internal::To>(                             \\\n+        reinterpret_cast<v8::internal::To**>(const_cast<v8::From*>(that)));    \\\n+  }\n+\n+OPEN_HANDLE_LIST(MAKE_OPEN_HANDLE)\n+\n+#undef MAKE_OPEN_HANDLE\n+#undef OPEN_HANDLE_LIST\n+\n+namespace internal {\n+\n+Handle<Context> HandleScopeImplementer::MicrotaskContext() {\n+  if (microtask_context_) return Handle<Context>(microtask_context_, isolate_);\n+  return Handle<Context>::null();\n+}\n+\n+Handle<Context> HandleScopeImplementer::LastEnteredContext() {\n+  if (entered_contexts_.empty()) return Handle<Context>::null();\n+  return Handle<Context>(entered_contexts_.back(), isolate_);\n+}\n+\n+}  // namespace internal\n+}  // namespace v8\n+\n+#endif  // V8_API_INL_H_"
        },
        {
            "sha": "977d6cdafc95fcd2018046c4cc0f311ddca3aa7c",
            "filename": "deps/v8/src/api-natives.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-natives.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-natives.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-natives.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -4,7 +4,7 @@\n \n #include \"src/api-natives.h\"\n \n-#include \"src/api.h\"\n+#include \"src/api-inl.h\"\n #include \"src/isolate-inl.h\"\n #include \"src/lookup.h\"\n #include \"src/messages.h\""
        },
        {
            "sha": "e8bb32d40a02fbb6faa6a7f52927e1263dcffec5",
            "filename": "deps/v8/src/api-natives.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-natives.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi-natives.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-natives.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,6 +8,7 @@\n #include \"include/v8.h\"\n #include \"src/base/macros.h\"\n #include \"src/handles.h\"\n+#include \"src/maybe-handles.h\"\n #include \"src/property-details.h\"\n \n namespace v8 {"
        },
        {
            "sha": "d141496c5749cc86fac4b38706af46915ec20b4f",
            "filename": "deps/v8/src/api.cc",
            "status": "modified",
            "additions": 315,
            "deletions": 605,
            "changes": 920,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,6 +8,9 @@\n #include <cmath>     // For isnan.\n #include <limits>\n #include <vector>\n+\n+#include \"src/api-inl.h\"\n+\n #include \"include/v8-profiler.h\"\n #include \"include/v8-testing.h\"\n #include \"include/v8-util.h\"\n@@ -48,7 +51,9 @@\n #include \"src/messages.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects/api-callbacks.h\"\n+#include \"src/objects/js-array-inl.h\"\n #include \"src/objects/js-collection-inl.h\"\n+#include \"src/objects/js-generator-inl.h\"\n #include \"src/objects/js-promise-inl.h\"\n #include \"src/objects/js-regexp-inl.h\"\n #include \"src/objects/module-inl.h\"\n@@ -207,37 +212,13 @@ namespace v8 {\n \n #define RETURN_ESCAPED(value) return handle_scope.Escape(value);\n \n-// TODO(v8:7786): Remove this when HeapObject::GetIsolate is removed.\n-#ifdef DEPRECATE_GET_ISOLATE\n-#define DISABLE_DEPRECATED_WARNINGS \\\n-  _Pragma(\"clang diagnostic push\")  \\\n-      _Pragma(\"clang diagnostic ignored \\\"-Wdeprecated\\\"\")\n-#define RESET_DEPRECATED_WARNINGS _Pragma(\"clang diagnostic pop\")\n-#else\n-#define DISABLE_DEPRECATED_WARNINGS\n-#define RESET_DEPRECATED_WARNINGS\n-#endif\n-\n namespace {\n \n Local<Context> ContextFromNeverReadOnlySpaceObject(\n     i::Handle<i::NeverReadOnlySpaceObject> obj) {\n   return reinterpret_cast<v8::Isolate*>(obj->GetIsolate())->GetCurrentContext();\n }\n \n-// This is unsafe because obj could be in RO_SPACE which would not be tied to a\n-// particular isolate.\n-#ifdef DEPRECATE_GET_ISOLATE\n-[[deprecated(\"Pass Context explicitly or use a NeverReadOnlySpaceObject\")]]\n-#endif\n-    Local<Context>\n-    UnsafeContextFromHeapObject(i::Handle<i::Object> obj) {\n-  DISABLE_DEPRECATED_WARNINGS\n-  return reinterpret_cast<v8::Isolate*>(i::HeapObject::cast(*obj)->GetIsolate())\n-      ->GetCurrentContext();\n-  RESET_DEPRECATED_WARNINGS\n-}\n-\n class InternalEscapableScope : public v8::EscapableHandleScope {\n  public:\n   explicit inline InternalEscapableScope(i::Isolate* isolate)\n@@ -534,34 +515,6 @@ class ArrayBufferAllocator : public v8::ArrayBuffer::Allocator {\n   void Free(void* data, size_t) override { free(data); }\n };\n \n-bool RunExtraCode(Isolate* isolate, Local<Context> context,\n-                  const char* utf8_source, const char* name) {\n-  base::ElapsedTimer timer;\n-  timer.Start();\n-  Context::Scope context_scope(context);\n-  TryCatch try_catch(isolate);\n-  Local<String> source_string;\n-  if (!String::NewFromUtf8(isolate, utf8_source, NewStringType::kNormal)\n-           .ToLocal(&source_string)) {\n-    return false;\n-  }\n-  Local<String> resource_name =\n-      String::NewFromUtf8(isolate, name, NewStringType::kNormal)\n-          .ToLocalChecked();\n-  ScriptOrigin origin(resource_name);\n-  ScriptCompiler::Source source(source_string, origin);\n-  Local<Script> script;\n-  if (!ScriptCompiler::Compile(context, &source).ToLocal(&script)) return false;\n-  if (script->Run(context).IsEmpty()) return false;\n-  if (i::FLAG_profile_deserialization) {\n-    i::PrintF(\"Executing custom snapshot script %s took %0.3f ms\\n\", name,\n-              timer.Elapsed().InMillisecondsF());\n-  }\n-  timer.Stop();\n-  CHECK(!try_catch.HasCaught());\n-  return true;\n-}\n-\n struct SnapshotCreatorData {\n   explicit SnapshotCreatorData(Isolate* isolate)\n       : isolate_(isolate),\n@@ -763,7 +716,7 @@ StartupData SnapshotCreator::CreateBlob(\n       i::GarbageCollectionReason::kSnapshotCreator);\n   {\n     i::HandleScope scope(isolate);\n-    isolate->heap()->CompactFixedArraysOfWeakCells();\n+    isolate->heap()->CompactWeakArrayLists(internal::TENURED);\n   }\n \n   isolate->heap()->read_only_space()->ClearStringPaddingIfNeeded();\n@@ -884,77 +837,6 @@ StartupData SnapshotCreator::CreateBlob(\n   return result;\n }\n \n-StartupData V8::CreateSnapshotDataBlob(const char* embedded_source) {\n-  // Create a new isolate and a new context from scratch, optionally run\n-  // a script to embed, and serialize to create a snapshot blob.\n-  StartupData result = {nullptr, 0};\n-  base::ElapsedTimer timer;\n-  timer.Start();\n-  {\n-    SnapshotCreator snapshot_creator;\n-    Isolate* isolate = snapshot_creator.GetIsolate();\n-    {\n-      HandleScope scope(isolate);\n-      Local<Context> context = Context::New(isolate);\n-      if (embedded_source != nullptr &&\n-          !RunExtraCode(isolate, context, embedded_source, \"<embedded>\")) {\n-        return result;\n-      }\n-      snapshot_creator.SetDefaultContext(context);\n-    }\n-    result = snapshot_creator.CreateBlob(\n-        SnapshotCreator::FunctionCodeHandling::kClear);\n-  }\n-\n-  if (i::FLAG_profile_deserialization) {\n-    i::PrintF(\"Creating snapshot took %0.3f ms\\n\",\n-              timer.Elapsed().InMillisecondsF());\n-  }\n-  timer.Stop();\n-  return result;\n-}\n-\n-StartupData V8::WarmUpSnapshotDataBlob(StartupData cold_snapshot_blob,\n-                                       const char* warmup_source) {\n-  CHECK(cold_snapshot_blob.raw_size > 0 && cold_snapshot_blob.data != nullptr);\n-  CHECK_NOT_NULL(warmup_source);\n-  // Use following steps to create a warmed up snapshot blob from a cold one:\n-  //  - Create a new isolate from the cold snapshot.\n-  //  - Create a new context to run the warmup script. This will trigger\n-  //    compilation of executed functions.\n-  //  - Create a new context. This context will be unpolluted.\n-  //  - Serialize the isolate and the second context into a new snapshot blob.\n-  StartupData result = {nullptr, 0};\n-  base::ElapsedTimer timer;\n-  timer.Start();\n-  {\n-    SnapshotCreator snapshot_creator(nullptr, &cold_snapshot_blob);\n-    Isolate* isolate = snapshot_creator.GetIsolate();\n-    {\n-      HandleScope scope(isolate);\n-      Local<Context> context = Context::New(isolate);\n-      if (!RunExtraCode(isolate, context, warmup_source, \"<warm-up>\")) {\n-        return result;\n-      }\n-    }\n-    {\n-      HandleScope handle_scope(isolate);\n-      isolate->ContextDisposedNotification(false);\n-      Local<Context> context = Context::New(isolate);\n-      snapshot_creator.SetDefaultContext(context);\n-    }\n-    result = snapshot_creator.CreateBlob(\n-        SnapshotCreator::FunctionCodeHandling::kKeep);\n-  }\n-\n-  if (i::FLAG_profile_deserialization) {\n-    i::PrintF(\"Warming up snapshot took %0.3f ms\\n\",\n-              timer.Elapsed().InMillisecondsF());\n-  }\n-  timer.Stop();\n-  return result;\n-}\n-\n void V8::SetDcheckErrorHandler(DcheckErrorCallback that) {\n   v8::base::SetDcheckFunction(that);\n }\n@@ -1953,16 +1835,6 @@ static void ObjectTemplateSetNamedPropertyHandler(\n   cons->set_named_property_handler(*obj);\n }\n \n-// TODO(cbruni) deprecate.\n-void ObjectTemplate::SetNamedPropertyHandler(\n-    NamedPropertyGetterCallback getter, NamedPropertySetterCallback setter,\n-    NamedPropertyQueryCallback query, NamedPropertyDeleterCallback remover,\n-    NamedPropertyEnumeratorCallback enumerator, Local<Value> data) {\n-  ObjectTemplateSetNamedPropertyHandler(\n-      this, getter, setter, query, nullptr, remover, enumerator, nullptr, data,\n-      PropertyHandlerFlags::kOnlyInterceptStrings);\n-}\n-\n void ObjectTemplate::SetHandler(\n     const NamedPropertyHandlerConfiguration& config) {\n   ObjectTemplateSetNamedPropertyHandler(\n@@ -2247,15 +2119,6 @@ MaybeLocal<Value> Script::Run(Local<Context> context) {\n }\n \n \n-Local<Value> Script::Run() {\n-  auto self = Utils::OpenHandle(this, true);\n-  // If execution is terminating, Compile(..)->Run() requires this\n-  // check.\n-  if (self.is_null()) return Local<Value>();\n-  auto context = ContextFromNeverReadOnlySpaceObject(self);\n-  RETURN_TO_LOCAL_UNCHECKED(Run(context), Value);\n-}\n-\n Local<Value> ScriptOrModule::GetResourceName() {\n   i::Handle<i::Script> obj = Utils::OpenHandle(this);\n   i::Isolate* isolate = obj->GetIsolate();\n@@ -2307,14 +2170,6 @@ void PrimitiveArray::Set(Isolate* v8_isolate, int index,\n   array->set(index, *i_item);\n }\n \n-void PrimitiveArray::Set(int index, Local<Primitive> item) {\n-  i::Handle<i::FixedArray> array = Utils::OpenHandle(this);\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = array->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  Set(reinterpret_cast<Isolate*>(isolate), index, item);\n-}\n-\n Local<Primitive> PrimitiveArray::Get(Isolate* v8_isolate, int index) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n   i::Handle<i::FixedArray> array = Utils::OpenHandle(this);\n@@ -2327,14 +2182,6 @@ Local<Primitive> PrimitiveArray::Get(Isolate* v8_isolate, int index) {\n   return ToApiHandle<Primitive>(i_item);\n }\n \n-Local<Primitive> PrimitiveArray::Get(int index) {\n-  i::Handle<i::FixedArray> array = Utils::OpenHandle(this);\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = array->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  return Get(reinterpret_cast<Isolate*>(isolate), index);\n-}\n-\n Module::Status Module::GetStatus() const {\n   i::Handle<i::Module> self = Utils::OpenHandle(this);\n   switch (self->status()) {\n@@ -2513,8 +2360,8 @@ MaybeLocal<UnboundScript> ScriptCompiler::CompileUnboundInternal(\n       source->host_defined_options);\n   i::MaybeHandle<i::SharedFunctionInfo> maybe_function_info =\n       i::Compiler::GetSharedFunctionInfoForScript(\n-          str, script_details, source->resource_options, nullptr, script_data,\n-          options, no_cache_reason, i::NOT_NATIVES_CODE);\n+          isolate, str, script_details, source->resource_options, nullptr,\n+          script_data, options, no_cache_reason, i::NOT_NATIVES_CODE);\n   if (options == kConsumeCodeCache) {\n     source->cached_data->rejected = script_data->rejected();\n   }\n@@ -2680,17 +2527,6 @@ MaybeLocal<Function> ScriptCompiler::CompileFunctionInContext(\n }\n \n \n-Local<Function> ScriptCompiler::CompileFunctionInContext(\n-    Isolate* v8_isolate, Source* source, Local<Context> v8_context,\n-    size_t arguments_count, Local<String> arguments[],\n-    size_t context_extension_count, Local<Object> context_extensions[]) {\n-  RETURN_TO_LOCAL_UNCHECKED(\n-      CompileFunctionInContext(v8_context, source, arguments_count, arguments,\n-                               context_extension_count, context_extensions),\n-      Function);\n-}\n-\n-\n ScriptCompiler::ScriptStreamingTask* ScriptCompiler::StartStreamingScript(\n     Isolate* v8_isolate, StreamedSource* source, CompileOptions options) {\n   if (!i::FLAG_script_streaming) {\n@@ -2722,7 +2558,7 @@ MaybeLocal<Script> ScriptCompiler::Compile(Local<Context> context,\n \n   i::MaybeHandle<i::SharedFunctionInfo> maybe_function_info =\n       i::Compiler::GetSharedFunctionInfoForStreamedScript(\n-          str, script_details, origin.Options(), streaming_data);\n+          isolate, str, script_details, origin.Options(), streaming_data);\n \n   i::Handle<i::SharedFunctionInfo> result;\n   has_pending_exception = !maybe_function_info.ToHandle(&result);\n@@ -2743,11 +2579,6 @@ uint32_t ScriptCompiler::CachedDataVersionTag() {\n       static_cast<uint32_t>(internal::CpuFeatures::SupportedFeatures())));\n }\n \n-ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCache(\n-    Local<UnboundScript> unbound_script, Local<String> source) {\n-  return CreateCodeCache(unbound_script);\n-}\n-\n ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCache(\n     Local<UnboundScript> unbound_script) {\n   i::Handle<i::SharedFunctionInfo> shared =\n@@ -2767,11 +2598,6 @@ ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCache(\n   return i::CodeSerializer::Serialize(shared);\n }\n \n-ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCacheForFunction(\n-    Local<Function> function, Local<String> source) {\n-  return CreateCodeCacheForFunction(function);\n-}\n-\n ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCacheForFunction(\n     Local<Function> function) {\n   auto js_function =\n@@ -2793,27 +2619,6 @@ MaybeLocal<Script> Script::Compile(Local<Context> context, Local<String> source,\n }\n \n \n-Local<Script> Script::Compile(v8::Local<String> source,\n-                              v8::ScriptOrigin* origin) {\n-  auto str = Utils::OpenHandle(*source);\n-  DISABLE_DEPRECATED_WARNINGS\n-  auto context = UnsafeContextFromHeapObject(str);\n-  RESET_DEPRECATED_WARNINGS\n-  RETURN_TO_LOCAL_UNCHECKED(Compile(context, source, origin), Script);\n-}\n-\n-\n-Local<Script> Script::Compile(v8::Local<String> source,\n-                              v8::Local<String> file_name) {\n-  auto str = Utils::OpenHandle(*source);\n-  DISABLE_DEPRECATED_WARNINGS\n-  auto context = UnsafeContextFromHeapObject(str);\n-  RESET_DEPRECATED_WARNINGS\n-  ScriptOrigin origin(file_name);\n-  return Compile(context, source, &origin).FromMaybe(Local<Script>());\n-}\n-\n-\n // --- E x c e p t i o n s ---\n \n v8::TryCatch::TryCatch(v8::Isolate* isolate)\n@@ -2919,12 +2724,6 @@ MaybeLocal<Value> v8::TryCatch::StackTrace(Local<Context> context) const {\n }\n \n \n-v8::Local<Value> v8::TryCatch::StackTrace() const {\n-  auto context = reinterpret_cast<v8::Isolate*>(isolate_)->GetCurrentContext();\n-  RETURN_TO_LOCAL_UNCHECKED(StackTrace(context), Value);\n-}\n-\n-\n v8::Local<v8::Message> v8::TryCatch::Message() const {\n   i::Object* message = reinterpret_cast<i::Object*>(message_obj_);\n   DCHECK(message->IsJSMessageObject() || message->IsTheHole(isolate_));\n@@ -2978,6 +2777,10 @@ Local<String> Message::Get() const {\n   return scope.Escape(result);\n }\n \n+v8::Isolate* Message::GetIsolate() const {\n+  i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n+  return reinterpret_cast<Isolate*>(isolate);\n+}\n \n ScriptOrigin Message::GetScriptOrigin() const {\n   i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n@@ -3015,12 +2818,6 @@ Maybe<int> Message::GetLineNumber(Local<Context> context) const {\n }\n \n \n-int Message::GetLineNumber() const {\n-  auto context = ContextFromNeverReadOnlySpaceObject(Utils::OpenHandle(this));\n-  return GetLineNumber(context).FromMaybe(0);\n-}\n-\n-\n int Message::GetStartPosition() const {\n   auto self = Utils::OpenHandle(this);\n   return self->start_position();\n@@ -3094,12 +2891,6 @@ MaybeLocal<String> Message::GetSourceLine(Local<Context> context) const {\n }\n \n \n-Local<String> Message::GetSourceLine() const {\n-  auto context = ContextFromNeverReadOnlySpaceObject(Utils::OpenHandle(this));\n-  RETURN_TO_LOCAL_UNCHECKED(GetSourceLine(context), String)\n-}\n-\n-\n void Message::PrintCurrentStackTrace(Isolate* isolate, FILE* out) {\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n@@ -3119,13 +2910,6 @@ Local<StackFrame> StackTrace::GetFrame(Isolate* v8_isolate,\n   return scope.Escape(Utils::StackFrameToLocal(info));\n }\n \n-Local<StackFrame> StackTrace::GetFrame(uint32_t index) const {\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  return GetFrame(reinterpret_cast<Isolate*>(isolate), index);\n-}\n-\n int StackTrace::GetFrameCount() const {\n   return Utils::OpenHandle(this)->length();\n }\n@@ -3244,9 +3028,8 @@ MaybeLocal<String> JSON::Stringify(Local<Context> context,\n                                         ? isolate->factory()->empty_string()\n                                         : Utils::OpenHandle(*gap);\n   i::Handle<i::Object> maybe;\n-  has_pending_exception = !i::JsonStringifier(isolate)\n-                               .Stringify(object, replacer, gap_string)\n-                               .ToHandle(&maybe);\n+  has_pending_exception =\n+      !i::JsonStringify(isolate, object, replacer, gap_string).ToHandle(&maybe);\n   RETURN_ON_FAILED_EXECUTION(String);\n   Local<String> result;\n   has_pending_exception =\n@@ -3580,15 +3363,13 @@ bool Value::IsTypedArray() const {\n   return Utils::OpenHandle(this)->IsJSTypedArray();\n }\n \n-\n-#define VALUE_IS_TYPED_ARRAY(Type, typeName, TYPE, ctype, size)              \\\n+#define VALUE_IS_TYPED_ARRAY(Type, typeName, TYPE, ctype)                    \\\n   bool Value::Is##Type##Array() const {                                      \\\n     i::Handle<i::Object> obj = Utils::OpenHandle(this);                      \\\n     return obj->IsJSTypedArray() &&                                          \\\n            i::JSTypedArray::cast(*obj)->type() == i::kExternal##Type##Array; \\\n   }\n \n-\n TYPED_ARRAYS(VALUE_IS_TYPED_ARRAY)\n \n #undef VALUE_IS_TYPED_ARRAY\n@@ -3616,14 +3397,6 @@ bool Value::IsBigInt() const { return Utils::OpenHandle(this)->IsBigInt(); }\n \n bool Value::IsProxy() const { return Utils::OpenHandle(this)->IsJSProxy(); }\n \n-bool Value::IsWebAssemblyCompiledModule() const {\n-  i::Handle<i::Object> obj = Utils::OpenHandle(this);\n-  if (!obj->IsJSObject()) return false;\n-  i::Handle<i::JSObject> js_obj = i::Handle<i::JSObject>::cast(obj);\n-  return js_obj->GetIsolate()->native_context()->wasm_module_constructor() ==\n-         js_obj->map()->GetConstructor();\n-}\n-\n #define VALUE_IS_SPECIFIC_TYPE(Type, Check)             \\\n   bool Value::Is##Type() const {                        \\\n     i::Handle<i::Object> obj = Utils::OpenHandle(this); \\\n@@ -3641,6 +3414,7 @@ VALUE_IS_SPECIFIC_TYPE(Map, JSMap)\n VALUE_IS_SPECIFIC_TYPE(Set, JSSet)\n VALUE_IS_SPECIFIC_TYPE(WeakMap, JSWeakMap)\n VALUE_IS_SPECIFIC_TYPE(WeakSet, JSWeakSet)\n+VALUE_IS_SPECIFIC_TYPE(WebAssemblyCompiledModule, WasmModuleObject)\n \n #undef VALUE_IS_SPECIFIC_TYPE\n \n@@ -4023,8 +3797,7 @@ void v8::TypedArray::CheckCast(Value* that) {\n                   \"Could not convert to TypedArray\");\n }\n \n-\n-#define CHECK_TYPED_ARRAY_CAST(Type, typeName, TYPE, ctype, size)             \\\n+#define CHECK_TYPED_ARRAY_CAST(Type, typeName, TYPE, ctype)                   \\\n   void v8::Type##Array::CheckCast(Value* that) {                              \\\n     i::Handle<i::Object> obj = Utils::OpenHandle(that);                       \\\n     Utils::ApiCheck(                                                          \\\n@@ -4033,7 +3806,6 @@ void v8::TypedArray::CheckCast(Value* that) {\n         \"v8::\" #Type \"Array::Cast()\", \"Could not convert to \" #Type \"Array\"); \\\n   }\n \n-\n TYPED_ARRAYS(CHECK_TYPED_ARRAY_CAST)\n \n #undef CHECK_TYPED_ARRAY_CAST\n@@ -4110,17 +3882,6 @@ Maybe<bool> Value::BooleanValue(Local<Context> context) const {\n }\n \n \n-bool Value::BooleanValue() const {\n-  auto obj = Utils::OpenHandle(this);\n-  if (obj->IsSmi()) return *obj != i::Smi::kZero;\n-  DCHECK(obj->IsHeapObject());\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = i::Handle<i::HeapObject>::cast(obj)->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  return obj->BooleanValue(isolate);\n-}\n-\n-\n Maybe<double> Value::NumberValue(Local<Context> context) const {\n   auto obj = Utils::OpenHandle(this);\n   if (obj->IsNumber()) return Just(obj->Number());\n@@ -4134,16 +3895,6 @@ Maybe<double> Value::NumberValue(Local<Context> context) const {\n }\n \n \n-double Value::NumberValue() const {\n-  auto obj = Utils::OpenHandle(this);\n-  if (obj->IsNumber()) return obj->Number();\n-  DISABLE_DEPRECATED_WARNINGS\n-  return NumberValue(UnsafeContextFromHeapObject(obj))\n-      .FromMaybe(std::numeric_limits<double>::quiet_NaN());\n-  RESET_DEPRECATED_WARNINGS\n-}\n-\n-\n Maybe<int64_t> Value::IntegerValue(Local<Context> context) const {\n   auto obj = Utils::OpenHandle(this);\n   if (obj->IsNumber()) {\n@@ -4159,21 +3910,6 @@ Maybe<int64_t> Value::IntegerValue(Local<Context> context) const {\n }\n \n \n-int64_t Value::IntegerValue() const {\n-  auto obj = Utils::OpenHandle(this);\n-  if (obj->IsNumber()) {\n-    if (obj->IsSmi()) {\n-      return i::Smi::ToInt(*obj);\n-    } else {\n-      return static_cast<int64_t>(obj->Number());\n-    }\n-  }\n-  DISABLE_DEPRECATED_WARNINGS\n-  return IntegerValue(UnsafeContextFromHeapObject(obj)).FromMaybe(0);\n-  RESET_DEPRECATED_WARNINGS\n-}\n-\n-\n Maybe<int32_t> Value::Int32Value(Local<Context> context) const {\n   auto obj = Utils::OpenHandle(this);\n   if (obj->IsNumber()) return Just(NumberToInt32(*obj));\n@@ -4188,15 +3924,6 @@ Maybe<int32_t> Value::Int32Value(Local<Context> context) const {\n }\n \n \n-int32_t Value::Int32Value() const {\n-  auto obj = Utils::OpenHandle(this);\n-  if (obj->IsNumber()) return NumberToInt32(*obj);\n-  DISABLE_DEPRECATED_WARNINGS\n-  return Int32Value(UnsafeContextFromHeapObject(obj)).FromMaybe(0);\n-  RESET_DEPRECATED_WARNINGS\n-}\n-\n-\n Maybe<uint32_t> Value::Uint32Value(Local<Context> context) const {\n   auto obj = Utils::OpenHandle(this);\n   if (obj->IsNumber()) return Just(NumberToUint32(*obj));\n@@ -4211,15 +3938,6 @@ Maybe<uint32_t> Value::Uint32Value(Local<Context> context) const {\n }\n \n \n-uint32_t Value::Uint32Value() const {\n-  auto obj = Utils::OpenHandle(this);\n-  if (obj->IsNumber()) return NumberToUint32(*obj);\n-  DISABLE_DEPRECATED_WARNINGS\n-  return Uint32Value(UnsafeContextFromHeapObject(obj)).FromMaybe(0);\n-  RESET_DEPRECATED_WARNINGS\n-}\n-\n-\n MaybeLocal<Uint32> Value::ToArrayIndex(Local<Context> context) const {\n   auto self = Utils::OpenHandle(this);\n   if (self->IsSmi()) {\n@@ -4254,23 +3972,6 @@ Maybe<bool> Value::Equals(Local<Context> context, Local<Value> that) const {\n }\n \n \n-bool Value::Equals(Local<Value> that) const {\n-  auto self = Utils::OpenHandle(this);\n-  auto other = Utils::OpenHandle(*that);\n-  if (self->IsSmi() && other->IsSmi()) {\n-    return self->Number() == other->Number();\n-  }\n-  if (self->IsJSObject() && other->IsJSObject()) {\n-    return *self == *other;\n-  }\n-  auto heap_object = self->IsSmi() ? other : self;\n-  DISABLE_DEPRECATED_WARNINGS\n-  auto context = UnsafeContextFromHeapObject(heap_object);\n-  RESET_DEPRECATED_WARNINGS\n-  return Equals(context, that).FromMaybe(false);\n-}\n-\n-\n bool Value::StrictEquals(Local<Value> that) const {\n   auto self = Utils::OpenHandle(this);\n   auto other = Utils::OpenHandle(*that);\n@@ -4357,10 +4058,8 @@ Maybe<bool> v8::Object::CreateDataProperty(v8::Local<v8::Context> context,\n   i::Handle<i::Name> key_obj = Utils::OpenHandle(*key);\n   i::Handle<i::Object> value_obj = Utils::OpenHandle(*value);\n \n-  i::LookupIterator it = i::LookupIterator::PropertyOrElement(\n-      isolate, self, key_obj, self, i::LookupIterator::OWN);\n-  Maybe<bool> result =\n-      i::JSReceiver::CreateDataProperty(&it, value_obj, i::kDontThrow);\n+  Maybe<bool> result = i::JSReceiver::CreateDataProperty(\n+      isolate, self, key_obj, value_obj, i::kDontThrow);\n   has_pending_exception = result.IsNothing();\n   RETURN_ON_FAILED_EXECUTION_PRIMITIVE(bool);\n   return result;\n@@ -5596,11 +5295,6 @@ bool String::ContainsOnlyOneByte() const {\n   return helper.Check(*str);\n }\n \n-int String::Utf8Length() const {\n-  i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n-  return Utf8Length(reinterpret_cast<Isolate*>(isolate));\n-}\n-\n int String::Utf8Length(Isolate* isolate) const {\n   i::Handle<i::String> str = Utils::OpenHandle(this);\n   str = i::String::Flatten(reinterpret_cast<i::Isolate*>(isolate), str);\n@@ -5843,11 +5537,12 @@ int String::WriteUtf8(Isolate* v8_isolate, char* buffer, int capacity,\n     if (success) return writer.CompleteWrite(write_null, nchars_ref);\n   } else if (capacity >= string_length) {\n     // First check that the buffer is large enough.\n-    int utf8_bytes = Utf8Length(reinterpret_cast<Isolate*>(isolate));\n+    int utf8_bytes = Utf8Length(v8_isolate);\n     if (utf8_bytes <= capacity) {\n       // one-byte fast path.\n       if (utf8_bytes == string_length) {\n-        WriteOneByte(reinterpret_cast<uint8_t*>(buffer), 0, capacity, options);\n+        WriteOneByte(v8_isolate, reinterpret_cast<uint8_t*>(buffer), 0,\n+                     capacity, options);\n         if (nchars_ref != nullptr) *nchars_ref = string_length;\n         if (write_null && (utf8_bytes+1 <= capacity)) {\n           return string_length + 1;\n@@ -5860,24 +5555,14 @@ int String::WriteUtf8(Isolate* v8_isolate, char* buffer, int capacity,\n       // Recurse once without a capacity limit.\n       // This will get into the first branch above.\n       // TODO(dcarney) Check max left rec. in Utf8Length and fall through.\n-      return WriteUtf8(buffer, -1, nchars_ref, options);\n+      return WriteUtf8(v8_isolate, buffer, -1, nchars_ref, options);\n     }\n   }\n   Utf8WriterVisitor writer(buffer, capacity, false, replace_invalid_utf8);\n   i::String::VisitFlat(&writer, *str);\n   return writer.CompleteWrite(write_null, nchars_ref);\n }\n \n-int String::WriteUtf8(char* buffer, int capacity, int* nchars_ref,\n-                      int options) const {\n-  i::Handle<i::String> str = Utils::OpenHandle(this);\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = str->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  return WriteUtf8(reinterpret_cast<Isolate*>(isolate), buffer, capacity,\n-                   nchars_ref, options);\n-}\n-\n template <typename CharType>\n static inline int WriteHelper(i::Isolate* isolate, const String* string,\n                               CharType* buffer, int start, int length,\n@@ -5900,33 +5585,13 @@ static inline int WriteHelper(i::Isolate* isolate, const String* string,\n }\n \n \n-int String::WriteOneByte(uint8_t* buffer,\n-                         int start,\n-                         int length,\n-                         int options) const {\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  return WriteHelper(isolate, this, buffer, start, length, options);\n-}\n-\n int String::WriteOneByte(Isolate* isolate, uint8_t* buffer, int start,\n                          int length, int options) const {\n   return WriteHelper(reinterpret_cast<i::Isolate*>(isolate), this, buffer,\n                      start, length, options);\n }\n \n \n-int String::Write(uint16_t* buffer,\n-                  int start,\n-                  int length,\n-                  int options) const {\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  return WriteHelper(isolate, this, buffer, start, length, options);\n-}\n-\n int String::Write(Isolate* isolate, uint16_t* buffer, int start, int length,\n                   int options) const {\n   return WriteHelper(reinterpret_cast<i::Isolate*>(isolate), this, buffer,\n@@ -5948,11 +5613,16 @@ bool v8::String::IsExternalOneByte() const {\n \n void v8::String::VerifyExternalStringResource(\n     v8::String::ExternalStringResource* value) const {\n-  i::Handle<i::String> str = Utils::OpenHandle(this);\n+  i::DisallowHeapAllocation no_allocation;\n+  i::String* str = *Utils::OpenHandle(this);\n   const v8::String::ExternalStringResource* expected;\n-  if (i::StringShape(*str).IsExternalTwoByte()) {\n-    const void* resource =\n-        i::Handle<i::ExternalTwoByteString>::cast(str)->resource();\n+\n+  if (str->IsThinString()) {\n+    str = i::ThinString::cast(str)->actual();\n+  }\n+\n+  if (i::StringShape(str).IsExternalTwoByte()) {\n+    const void* resource = i::ExternalTwoByteString::cast(str)->resource();\n     expected = reinterpret_cast<const ExternalStringResource*>(resource);\n   } else {\n     expected = nullptr;\n@@ -5962,17 +5632,21 @@ void v8::String::VerifyExternalStringResource(\n \n void v8::String::VerifyExternalStringResourceBase(\n     v8::String::ExternalStringResourceBase* value, Encoding encoding) const {\n-  i::Handle<i::String> str = Utils::OpenHandle(this);\n+  i::DisallowHeapAllocation no_allocation;\n+  i::String* str = *Utils::OpenHandle(this);\n   const v8::String::ExternalStringResourceBase* expected;\n   Encoding expectedEncoding;\n-  if (i::StringShape(*str).IsExternalOneByte()) {\n-    const void* resource =\n-        i::Handle<i::ExternalOneByteString>::cast(str)->resource();\n+\n+  if (str->IsThinString()) {\n+    str = i::ThinString::cast(str)->actual();\n+  }\n+\n+  if (i::StringShape(str).IsExternalOneByte()) {\n+    const void* resource = i::ExternalOneByteString::cast(str)->resource();\n     expected = reinterpret_cast<const ExternalStringResourceBase*>(resource);\n     expectedEncoding = ONE_BYTE_ENCODING;\n-  } else if (i::StringShape(*str).IsExternalTwoByte()) {\n-    const void* resource =\n-        i::Handle<i::ExternalTwoByteString>::cast(str)->resource();\n+  } else if (i::StringShape(str).IsExternalTwoByte()) {\n+    const void* resource = i::ExternalTwoByteString::cast(str)->resource();\n     expected = reinterpret_cast<const ExternalStringResourceBase*>(resource);\n     expectedEncoding = TWO_BYTE_ENCODING;\n   } else {\n@@ -5984,33 +5658,88 @@ void v8::String::VerifyExternalStringResourceBase(\n   CHECK_EQ(expectedEncoding, encoding);\n }\n \n+String::ExternalStringResource* String::GetExternalStringResourceSlow() const {\n+  i::DisallowHeapAllocation no_allocation;\n+  typedef internal::Internals I;\n+  ExternalStringResource* result = nullptr;\n+  i::String* str = *Utils::OpenHandle(this);\n+\n+  if (str->IsThinString()) {\n+    str = i::ThinString::cast(str)->actual();\n+  }\n+\n+  if (i::StringShape(str).IsExternalTwoByte()) {\n+    void* value = I::ReadField<void*>(str, I::kStringResourceOffset);\n+    result = reinterpret_cast<String::ExternalStringResource*>(value);\n+  }\n+  return result;\n+}\n+\n+String::ExternalStringResourceBase* String::GetExternalStringResourceBaseSlow(\n+    String::Encoding* encoding_out) const {\n+  i::DisallowHeapAllocation no_allocation;\n+  typedef internal::Internals I;\n+  ExternalStringResourceBase* resource = nullptr;\n+  i::String* str = *Utils::OpenHandle(this);\n+\n+  if (str->IsThinString()) {\n+    str = i::ThinString::cast(str)->actual();\n+  }\n+\n+  int type = I::GetInstanceType(str) & I::kFullStringRepresentationMask;\n+  *encoding_out = static_cast<Encoding>(type & I::kStringEncodingMask);\n+  if (i::StringShape(str).IsExternalOneByte() ||\n+      i::StringShape(str).IsExternalTwoByte()) {\n+    void* value = I::ReadField<void*>(str, I::kStringResourceOffset);\n+    resource = static_cast<ExternalStringResourceBase*>(value);\n+  }\n+  return resource;\n+}\n+\n+const String::ExternalOneByteStringResource*\n+String::GetExternalOneByteStringResourceSlow() const {\n+  i::DisallowHeapAllocation no_allocation;\n+  i::String* str = *Utils::OpenHandle(this);\n+\n+  if (str->IsThinString()) {\n+    str = i::ThinString::cast(str)->actual();\n+  }\n+\n+  if (i::StringShape(str).IsExternalOneByte()) {\n+    const void* resource = i::ExternalOneByteString::cast(str)->resource();\n+    return reinterpret_cast<const ExternalOneByteStringResource*>(resource);\n+  }\n+  return nullptr;\n+}\n+\n const v8::String::ExternalOneByteStringResource*\n v8::String::GetExternalOneByteStringResource() const {\n-  i::Handle<i::String> str = Utils::OpenHandle(this);\n-  if (i::StringShape(*str).IsExternalOneByte()) {\n-    const void* resource =\n-        i::Handle<i::ExternalOneByteString>::cast(str)->resource();\n+  i::DisallowHeapAllocation no_allocation;\n+  i::String* str = *Utils::OpenHandle(this);\n+  if (i::StringShape(str).IsExternalOneByte()) {\n+    const void* resource = i::ExternalOneByteString::cast(str)->resource();\n     return reinterpret_cast<const ExternalOneByteStringResource*>(resource);\n   } else {\n-    return nullptr;\n+    return GetExternalOneByteStringResourceSlow();\n   }\n }\n \n \n Local<Value> Symbol::Name() const {\n   i::Handle<i::Symbol> sym = Utils::OpenHandle(this);\n \n-  i::MemoryChunk* chunk = i::MemoryChunk::FromHeapObject(*sym);\n-  // If the Symbol is in RO_SPACE, then its name must be too. Since RO_SPACE\n-  // objects are immovable we can use the Handle(T**) constructor with the\n-  // address of the name field in the Symbol object without needing an isolate.\n-  if (chunk->owner()->identity() == i::RO_SPACE) {\n+  i::Isolate* isolate;\n+  if (!i::Isolate::FromWritableHeapObject(*sym, &isolate)) {\n+    // If the Symbol is in RO_SPACE, then its name must be too. Since RO_SPACE\n+    // objects are immovable we can use the Handle(T**) constructor with the\n+    // address of the name field in the Symbol object without needing an\n+    // isolate.\n     i::Handle<i::HeapObject> ro_name(reinterpret_cast<i::HeapObject**>(\n         sym->GetFieldAddress(i::Symbol::kNameOffset)));\n     return Utils::ToLocal(ro_name);\n   }\n \n-  i::Handle<i::Object> name(sym->name(), chunk->heap()->isolate());\n+  i::Handle<i::Object> name(sym->name(), isolate);\n \n   return Utils::ToLocal(name);\n }\n@@ -6207,6 +5936,7 @@ HeapStatistics::HeapStatistics()\n       used_heap_size_(0),\n       heap_size_limit_(0),\n       malloced_memory_(0),\n+      external_memory_(0),\n       peak_malloced_memory_(0),\n       does_zap_garbage_(0),\n       number_of_native_contexts_(0),\n@@ -6819,14 +6549,6 @@ Local<String> v8::String::Concat(Isolate* v8_isolate, Local<String> left,\n   return Utils::ToLocal(result);\n }\n \n-Local<String> v8::String::Concat(Local<String> left, Local<String> right) {\n-  i::Handle<i::String> left_string = Utils::OpenHandle(*left);\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = left_string->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  return Concat(reinterpret_cast<Isolate*>(isolate), left, right);\n-}\n-\n MaybeLocal<String> v8::String::NewExternalTwoByte(\n     Isolate* isolate, v8::String::ExternalStringResource* resource) {\n   CHECK(resource && resource->data());\n@@ -6880,73 +6602,83 @@ Local<String> v8::String::NewExternal(\n \n \n bool v8::String::MakeExternal(v8::String::ExternalStringResource* resource) {\n-  i::Handle<i::String> obj = Utils::OpenHandle(this);\n-  // RO_SPACE strings cannot be externalized.\n-  i::MemoryChunk* chunk = i::MemoryChunk::FromHeapObject(*obj);\n-  if (chunk->owner()->identity() == i::RO_SPACE) {\n-    return false;\n-  }\n+  i::DisallowHeapAllocation no_allocation;\n \n-  i::Isolate* isolate = chunk->heap()->isolate();\n-  if (i::StringShape(*obj).IsExternal()) {\n-    return false;  // Already an external string.\n+  i::String* obj = *Utils::OpenHandle(this);\n+\n+  if (obj->IsThinString()) {\n+    obj = i::ThinString::cast(obj)->actual();\n   }\n-  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n-  if (isolate->heap()->IsInGCPostProcessing()) {\n+\n+  if (!obj->SupportsExternalization()) {\n     return false;\n   }\n+\n+  // It is safe to call FromWritable because SupportsExternalization already\n+  // checked that the object is writable.\n+  i::Isolate* isolate;\n+  i::Isolate::FromWritableHeapObject(obj, &isolate);\n+  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n+\n   CHECK(resource && resource->data());\n \n   bool result = obj->MakeExternal(resource);\n-  // Assert that if CanMakeExternal(), then externalizing actually succeeds.\n-  DCHECK(!CanMakeExternal() || result);\n-  if (result) {\n-    DCHECK(obj->IsExternalString());\n-  }\n+  DCHECK(result);\n+  DCHECK(obj->IsExternalString());\n   return result;\n }\n \n \n bool v8::String::MakeExternal(\n     v8::String::ExternalOneByteStringResource* resource) {\n-  i::Handle<i::String> obj = Utils::OpenHandle(this);\n+  i::DisallowHeapAllocation no_allocation;\n \n-  // RO_SPACE strings cannot be externalized.\n-  i::MemoryChunk* chunk = i::MemoryChunk::FromHeapObject(*obj);\n-  if (chunk->owner()->identity() == i::RO_SPACE) {\n-    return false;\n-  }\n+  i::String* obj = *Utils::OpenHandle(this);\n \n-  i::Isolate* isolate = chunk->heap()->isolate();\n-  if (i::StringShape(*obj).IsExternal()) {\n-    return false;  // Already an external string.\n+  if (obj->IsThinString()) {\n+    obj = i::ThinString::cast(obj)->actual();\n   }\n-  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n-  if (isolate->heap()->IsInGCPostProcessing()) {\n+\n+  if (!obj->SupportsExternalization()) {\n     return false;\n   }\n+\n+  // It is safe to call FromWritable because SupportsExternalization already\n+  // checked that the object is writable.\n+  i::Isolate* isolate;\n+  i::Isolate::FromWritableHeapObject(obj, &isolate);\n+  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n+\n   CHECK(resource && resource->data());\n \n   bool result = obj->MakeExternal(resource);\n-  // Assert that if CanMakeExternal(), then externalizing actually succeeds.\n-  DCHECK(!CanMakeExternal() || result);\n-  if (result) {\n-    DCHECK(obj->IsExternalString());\n-  }\n+  DCHECK(result);\n+  DCHECK(obj->IsExternalString());\n   return result;\n }\n \n \n bool v8::String::CanMakeExternal() {\n-  i::Handle<i::String> obj = Utils::OpenHandle(this);\n-  if (obj->IsExternalString()) return false;\n+  i::DisallowHeapAllocation no_allocation;\n+  i::String* obj = *Utils::OpenHandle(this);\n+\n+  if (obj->IsThinString()) {\n+    obj = i::ThinString::cast(obj)->actual();\n+  }\n+\n+  if (!obj->SupportsExternalization()) {\n+    return false;\n+  }\n \n   // Only old space strings should be externalized.\n-  i::MemoryChunk* chunk = i::MemoryChunk::FromHeapObject(*obj);\n-  i::AllocationSpace space = chunk->owner()->identity();\n-  return space != i::NEW_SPACE && space != i::RO_SPACE;\n+  return !i::Heap::InNewSpace(obj);\n }\n \n+bool v8::String::StringEquals(Local<String> that) {\n+  auto self = Utils::OpenHandle(this);\n+  auto other = Utils::OpenHandle(*that);\n+  return self->Equals(*other);\n+}\n \n Isolate* v8::Object::GetIsolate() {\n   i::Isolate* i_isolate = Utils::OpenHandle(this)->GetIsolate();\n@@ -7026,14 +6758,6 @@ bool v8::BooleanObject::ValueOf() const {\n }\n \n \n-Local<v8::Value> v8::StringObject::New(Local<String> value) {\n-  i::Handle<i::String> string = Utils::OpenHandle(*value);\n-  DISABLE_DEPRECATED_WARNINGS\n-  i::Isolate* isolate = string->GetIsolate();\n-  RESET_DEPRECATED_WARNINGS\n-  return New(reinterpret_cast<Isolate*>(isolate), value);\n-}\n-\n Local<v8::Value> v8::StringObject::New(Isolate* v8_isolate,\n                                        Local<String> value) {\n   i::Handle<i::String> string = Utils::OpenHandle(*value);\n@@ -7138,14 +6862,6 @@ MaybeLocal<v8::RegExp> v8::RegExp::New(Local<Context> context,\n }\n \n \n-Local<v8::RegExp> v8::RegExp::New(Local<String> pattern, Flags flags) {\n-  auto isolate =\n-      reinterpret_cast<Isolate*>(Utils::OpenHandle(*pattern)->GetIsolate());\n-  auto context = isolate->GetCurrentContext();\n-  RETURN_TO_LOCAL_UNCHECKED(New(context, pattern, flags), RegExp);\n-}\n-\n-\n Local<v8::String> v8::RegExp::GetSource() const {\n   i::Handle<i::JSRegExp> obj = Utils::OpenHandle(this);\n   return Utils::ToLocal(\n@@ -7436,12 +7152,6 @@ MaybeLocal<Promise::Resolver> Promise::Resolver::New(Local<Context> context) {\n }\n \n \n-Local<Promise::Resolver> Promise::Resolver::New(Isolate* isolate) {\n-  RETURN_TO_LOCAL_UNCHECKED(New(isolate->GetCurrentContext()),\n-                            Promise::Resolver);\n-}\n-\n-\n Local<Promise> Promise::Resolver::GetPromise() {\n   i::Handle<i::JSReceiver> promise = Utils::OpenHandle(this);\n   return Local<Promise>::Cast(Utils::ToLocal(promise));\n@@ -7467,12 +7177,6 @@ Maybe<bool> Promise::Resolver::Resolve(Local<Context> context,\n }\n \n \n-void Promise::Resolver::Resolve(Local<Value> value) {\n-  auto context = ContextFromNeverReadOnlySpaceObject(Utils::OpenHandle(this));\n-  USE(Resolve(context, value));\n-}\n-\n-\n Maybe<bool> Promise::Resolver::Reject(Local<Context> context,\n                                       Local<Value> value) {\n   auto isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n@@ -7492,12 +7196,6 @@ Maybe<bool> Promise::Resolver::Reject(Local<Context> context,\n }\n \n \n-void Promise::Resolver::Reject(Local<Value> value) {\n-  auto context = ContextFromNeverReadOnlySpaceObject(Utils::OpenHandle(this));\n-  USE(Reject(context, value));\n-}\n-\n-\n MaybeLocal<Promise> Promise::Catch(Local<Context> context,\n                                    Local<Function> handler) {\n   PREPARE_FOR_EXECUTION(context, Promise, Catch, Promise);\n@@ -7610,42 +7308,47 @@ Local<String> WasmCompiledModule::GetWasmWireBytes() {\n       .ToLocalChecked();\n }\n \n-// Currently, wasm modules are bound, both to Isolate and to\n-// the Context they were created in. The currently-supported means to\n-// decontextualize and then re-contextualize a module is via\n-// serialization/deserialization.\n WasmCompiledModule::TransferrableModule\n WasmCompiledModule::GetTransferrableModule() {\n-  i::DisallowHeapAllocation no_gc;\n-  WasmCompiledModule::SerializedModule compiled_part = Serialize();\n-\n-  BufferReference wire_bytes_ref = GetWasmWireBytesRef();\n-  size_t wire_size = wire_bytes_ref.size;\n-  std::unique_ptr<uint8_t[]> wire_bytes_copy(new uint8_t[wire_size]);\n-  memcpy(wire_bytes_copy.get(), wire_bytes_ref.start, wire_size);\n-\n-  return TransferrableModule(std::move(compiled_part),\n-                             {std::move(wire_bytes_copy), wire_size});\n+  if (i::FLAG_wasm_shared_code) {\n+    i::Handle<i::WasmModuleObject> obj =\n+        i::Handle<i::WasmModuleObject>::cast(Utils::OpenHandle(this));\n+    return TransferrableModule(obj->managed_native_module()->get());\n+  } else {\n+    WasmCompiledModule::SerializedModule serialized_module = Serialize();\n+    BufferReference wire_bytes_ref = GetWasmWireBytesRef();\n+    size_t wire_size = wire_bytes_ref.size;\n+    std::unique_ptr<uint8_t[]> wire_bytes_copy(new uint8_t[wire_size]);\n+    memcpy(wire_bytes_copy.get(), wire_bytes_ref.start, wire_size);\n+    return TransferrableModule(std::move(serialized_module),\n+                               {std::move(wire_bytes_copy), wire_size});\n+  }\n }\n \n MaybeLocal<WasmCompiledModule> WasmCompiledModule::FromTransferrableModule(\n     Isolate* isolate,\n     const WasmCompiledModule::TransferrableModule& transferrable_module) {\n-  MaybeLocal<WasmCompiledModule> ret =\n-      Deserialize(isolate, AsReference(transferrable_module.compiled_code),\n-                  AsReference(transferrable_module.wire_bytes));\n-  return ret;\n+  if (i::FLAG_wasm_shared_code) {\n+    i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n+    i::Handle<i::WasmModuleObject> module_object =\n+        i_isolate->wasm_engine()->ImportNativeModule(\n+            i_isolate, transferrable_module.shared_module_);\n+    return Local<WasmCompiledModule>::Cast(\n+        Utils::ToLocal(i::Handle<i::JSObject>::cast(module_object)));\n+  } else {\n+    return Deserialize(isolate, AsReference(transferrable_module.serialized_),\n+                       AsReference(transferrable_module.wire_bytes_));\n+  }\n }\n \n WasmCompiledModule::SerializedModule WasmCompiledModule::Serialize() {\n   i::Handle<i::WasmModuleObject> obj =\n       i::Handle<i::WasmModuleObject>::cast(Utils::OpenHandle(this));\n   i::wasm::NativeModule* native_module = obj->native_module();\n-  size_t buffer_size =\n-      i::wasm::GetSerializedNativeModuleSize(obj->GetIsolate(), native_module);\n+  i::wasm::WasmSerializer wasm_serializer(obj->GetIsolate(), native_module);\n+  size_t buffer_size = wasm_serializer.GetSerializedNativeModuleSize();\n   std::unique_ptr<uint8_t[]> buffer(new uint8_t[buffer_size]);\n-  if (i::wasm::SerializeNativeModule(obj->GetIsolate(), native_module,\n-                                     {buffer.get(), buffer_size}))\n+  if (wasm_serializer.SerializeNativeModule({buffer.get(), buffer_size}))\n     return {std::move(buffer), buffer_size};\n   return {};\n }\n@@ -7685,9 +7388,11 @@ MaybeLocal<WasmCompiledModule> WasmCompiledModule::Compile(Isolate* isolate,\n   if (!i::wasm::IsWasmCodegenAllowed(i_isolate, i_isolate->native_context())) {\n     return MaybeLocal<WasmCompiledModule>();\n   }\n+  auto enabled_features = i::wasm::WasmFeaturesFromIsolate(i_isolate);\n   i::MaybeHandle<i::JSObject> maybe_compiled =\n       i_isolate->wasm_engine()->SyncCompile(\n-          i_isolate, &thrower, i::wasm::ModuleWireBytes(start, start + length));\n+          i_isolate, enabled_features, &thrower,\n+          i::wasm::ModuleWireBytes(start, start + length));\n   if (maybe_compiled.is_null()) return MaybeLocal<WasmCompiledModule>();\n   return Local<WasmCompiledModule>::Cast(\n       Utils::ToLocal(maybe_compiled.ToHandleChecked()));\n@@ -7698,7 +7403,7 @@ MaybeLocal<WasmCompiledModule> WasmCompiledModule::Compile(Isolate* isolate,\n // move to wasm-js.cc.\n class AsyncCompilationResolver : public i::wasm::CompilationResultResolver {\n  public:\n-  AsyncCompilationResolver(Isolate* isolate, Handle<Promise> promise)\n+  AsyncCompilationResolver(Isolate* isolate, Local<Promise> promise)\n       : promise_(\n             reinterpret_cast<i::Isolate*>(isolate)->global_handles()->Create(\n                 *Utils::OpenHandle(*promise))) {}\n@@ -7726,55 +7431,23 @@ class AsyncCompilationResolver : public i::wasm::CompilationResultResolver {\n };\n \n WasmModuleObjectBuilderStreaming::WasmModuleObjectBuilderStreaming(\n-    Isolate* isolate)\n-    : isolate_(isolate) {\n-  MaybeLocal<Promise::Resolver> maybe_resolver =\n-      Promise::Resolver::New(isolate->GetCurrentContext());\n-  Local<Promise::Resolver> resolver = maybe_resolver.ToLocalChecked();\n-  promise_.Reset(isolate, resolver->GetPromise());\n-\n-  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n-  streaming_decoder_ = i_isolate->wasm_engine()->StartStreamingCompilation(\n-      i_isolate, handle(i_isolate->context(), i_isolate),\n-      base::make_unique<AsyncCompilationResolver>(isolate, GetPromise()));\n+    Isolate* isolate) {\n+  USE(isolate_);\n }\n \n-Local<Promise> WasmModuleObjectBuilderStreaming::GetPromise() {\n-  return promise_.Get(isolate_);\n-}\n+Local<Promise> WasmModuleObjectBuilderStreaming::GetPromise() { return {}; }\n \n void WasmModuleObjectBuilderStreaming::OnBytesReceived(const uint8_t* bytes,\n                                                        size_t size) {\n-  streaming_decoder_->OnBytesReceived(i::Vector<const uint8_t>(bytes, size));\n }\n \n void WasmModuleObjectBuilderStreaming::Finish() {\n-  streaming_decoder_->Finish();\n }\n \n void WasmModuleObjectBuilderStreaming::Abort(MaybeLocal<Value> exception) {\n-  Local<Promise> promise = GetPromise();\n-  // The promise has already been resolved, e.g. because of a compilation\n-  // error.\n-  if (promise->State() != v8::Promise::kPending) return;\n-  streaming_decoder_->Abort();\n-\n-  // If no exception value is provided, we do not reject the promise. This can\n-  // happen when streaming compilation gets aborted when no script execution is\n-  // allowed anymore, e.g. when a browser tab gets refreshed.\n-  if (exception.IsEmpty()) return;\n-\n-  Local<Promise::Resolver> resolver = promise.As<Promise::Resolver>();\n-  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate_);\n-  i::HandleScope scope(i_isolate);\n-  Local<Context> context =\n-      Utils::ToLocal(handle(i_isolate->context(), i_isolate));\n-  auto maybe = resolver->Reject(context, exception.ToLocalChecked());\n-  CHECK_IMPLIES(!maybe.FromMaybe(false), i_isolate->has_scheduled_exception());\n }\n \n WasmModuleObjectBuilderStreaming::~WasmModuleObjectBuilderStreaming() {\n-  promise_.Reset();\n }\n \n // static\n@@ -7799,35 +7472,53 @@ v8::ArrayBuffer::Contents v8::ArrayBuffer::Externalize() {\n                   \"ArrayBuffer already externalized\");\n   self->set_is_external(true);\n \n-  // We need to capture the contents before releasing the allocation from the\n-  // Wasm tracker, because otherwise we will not correctly capture the\n-  // allocation data.\n   const v8::ArrayBuffer::Contents contents = GetContents();\n-  if (self->is_wasm_memory()) {\n-    // Since this is being externalized, the Wasm Allocation Tracker can no\n-    // longer track it.\n-    //\n-    // TODO(eholk): Find a way to track this across externalization\n-    self->StopTrackingWasmMemory(isolate);\n-  }\n   isolate->heap()->UnregisterArrayBuffer(*self);\n \n   // A regular copy is good enough. No move semantics needed.\n   return contents;\n }\n \n+v8::ArrayBuffer::Contents::Contents(void* data, size_t byte_length,\n+                                    void* allocation_base,\n+                                    size_t allocation_length,\n+                                    Allocator::AllocationMode allocation_mode,\n+                                    DeleterCallback deleter, void* deleter_data)\n+    : data_(data),\n+      byte_length_(byte_length),\n+      allocation_base_(allocation_base),\n+      allocation_length_(allocation_length),\n+      allocation_mode_(allocation_mode),\n+      deleter_(deleter),\n+      deleter_data_(deleter_data) {\n+  DCHECK_LE(allocation_base_, data_);\n+  DCHECK_LE(byte_length_, allocation_length_);\n+}\n+\n+void WasmMemoryDeleter(void* buffer, size_t lenght, void* info) {\n+  internal::wasm::WasmEngine* engine =\n+      reinterpret_cast<internal::wasm::WasmEngine*>(info);\n+  CHECK(engine->memory_tracker()->FreeMemoryIfIsWasmMemory(nullptr, buffer));\n+}\n+\n+void ArrayBufferDeleter(void* buffer, size_t length, void* info) {\n+  v8::ArrayBuffer::Allocator* allocator =\n+      reinterpret_cast<v8::ArrayBuffer::Allocator*>(info);\n+  allocator->Free(buffer, length);\n+}\n \n v8::ArrayBuffer::Contents v8::ArrayBuffer::GetContents() {\n   i::Handle<i::JSArrayBuffer> self = Utils::OpenHandle(this);\n   size_t byte_length = static_cast<size_t>(self->byte_length()->Number());\n-  Contents contents;\n-  contents.allocation_base_ = self->allocation_base();\n-  contents.allocation_length_ = self->allocation_length();\n-  contents.allocation_mode_ = self->is_wasm_memory()\n-                                  ? Allocator::AllocationMode::kReservation\n-                                  : Allocator::AllocationMode::kNormal;\n-  contents.data_ = self->backing_store();\n-  contents.byte_length_ = byte_length;\n+  Contents contents(\n+      self->backing_store(), byte_length, self->allocation_base(),\n+      self->allocation_length(),\n+      self->is_wasm_memory() ? Allocator::AllocationMode::kReservation\n+                             : Allocator::AllocationMode::kNormal,\n+      self->is_wasm_memory() ? WasmMemoryDeleter : ArrayBufferDeleter,\n+      self->is_wasm_memory()\n+          ? static_cast<void*>(self->GetIsolate()->wasm_engine())\n+          : static_cast<void*>(self->GetIsolate()->array_buffer_allocator()));\n   return contents;\n }\n \n@@ -7948,13 +7639,13 @@ size_t v8::ArrayBufferView::ByteLength() {\n \n size_t v8::TypedArray::Length() {\n   i::Handle<i::JSTypedArray> obj = Utils::OpenHandle(this);\n-  return static_cast<size_t>(obj->length_value());\n+  return obj->length_value();\n }\n \n static_assert(v8::TypedArray::kMaxLength == i::Smi::kMaxValue,\n               \"v8::TypedArray::kMaxLength must match i::Smi::kMaxValue\");\n \n-#define TYPED_ARRAY_NEW(Type, type, TYPE, ctype, size)                     \\\n+#define TYPED_ARRAY_NEW(Type, type, TYPE, ctype)                           \\\n   Local<Type##Array> Type##Array::New(Local<ArrayBuffer> array_buffer,     \\\n                                       size_t byte_offset, size_t length) { \\\n     i::Isolate* isolate = Utils::OpenHandle(*array_buffer)->GetIsolate();  \\\n@@ -8025,54 +7716,58 @@ bool v8::SharedArrayBuffer::IsExternal() const {\n   return Utils::OpenHandle(this)->is_external();\n }\n \n-\n v8::SharedArrayBuffer::Contents v8::SharedArrayBuffer::Externalize() {\n   i::Handle<i::JSArrayBuffer> self = Utils::OpenHandle(this);\n   i::Isolate* isolate = self->GetIsolate();\n   Utils::ApiCheck(!self->is_external(), \"v8_SharedArrayBuffer_Externalize\",\n                   \"SharedArrayBuffer already externalized\");\n   self->set_is_external(true);\n \n-  // We need to capture the contents before releasing the allocation from the\n-  // Wasm tracker, because otherwise we will not correctly capture the\n-  // allocation data.\n   const v8::SharedArrayBuffer::Contents contents = GetContents();\n-  if (self->is_wasm_memory()) {\n-    // Since this is being externalized, the Wasm Allocation Tracker can no\n-    // longer track it.\n-    //\n-    // TODO(eholk): Find a way to track this across externalization\n-    self->StopTrackingWasmMemory(isolate);\n-  }\n   isolate->heap()->UnregisterArrayBuffer(*self);\n \n   // A regular copy is good enough. No move semantics needed.\n   return contents;\n }\n \n+v8::SharedArrayBuffer::Contents::Contents(\n+    void* data, size_t byte_length, void* allocation_base,\n+    size_t allocation_length, Allocator::AllocationMode allocation_mode,\n+    DeleterCallback deleter, void* deleter_data)\n+    : data_(data),\n+      byte_length_(byte_length),\n+      allocation_base_(allocation_base),\n+      allocation_length_(allocation_length),\n+      allocation_mode_(allocation_mode),\n+      deleter_(deleter),\n+      deleter_data_(deleter_data) {\n+  DCHECK_LE(allocation_base_, data_);\n+  DCHECK_LE(byte_length_, allocation_length_);\n+}\n \n v8::SharedArrayBuffer::Contents v8::SharedArrayBuffer::GetContents() {\n   i::Handle<i::JSArrayBuffer> self = Utils::OpenHandle(this);\n   size_t byte_length = static_cast<size_t>(self->byte_length()->Number());\n-  Contents contents;\n-  contents.allocation_base_ = self->allocation_base();\n-  contents.allocation_length_ = self->allocation_length();\n-  contents.allocation_mode_ =\n+  Contents contents(\n+      self->backing_store(), byte_length, self->allocation_base(),\n+      self->allocation_length(),\n+      self->is_wasm_memory()\n+          ? ArrayBuffer::Allocator::AllocationMode::kReservation\n+          : ArrayBuffer::Allocator::AllocationMode::kNormal,\n+      self->is_wasm_memory()\n+          ? reinterpret_cast<Contents::DeleterCallback>(WasmMemoryDeleter)\n+          : reinterpret_cast<Contents::DeleterCallback>(ArrayBufferDeleter),\n       self->is_wasm_memory()\n-          ? ArrayBufferAllocator::Allocator::AllocationMode::kReservation\n-          : ArrayBufferAllocator::Allocator::AllocationMode::kNormal;\n-  contents.data_ = self->backing_store();\n-  contents.byte_length_ = byte_length;\n+          ? static_cast<void*>(self->GetIsolate()->wasm_engine())\n+          : static_cast<void*>(self->GetIsolate()->array_buffer_allocator()));\n   return contents;\n }\n \n-\n size_t v8::SharedArrayBuffer::ByteLength() const {\n   i::Handle<i::JSArrayBuffer> obj = Utils::OpenHandle(this);\n   return static_cast<size_t>(obj->byte_length()->Number());\n }\n \n-\n Local<SharedArrayBuffer> v8::SharedArrayBuffer::New(Isolate* isolate,\n                                                     size_t byte_length) {\n   CHECK(i::FLAG_harmony_sharedarraybuffer);\n@@ -8102,9 +7797,11 @@ Local<SharedArrayBuffer> v8::SharedArrayBuffer::New(\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n   i::Handle<i::JSArrayBuffer> obj =\n       i_isolate->factory()->NewJSArrayBuffer(i::SharedFlag::kShared);\n+  bool is_wasm_memory =\n+      i_isolate->wasm_engine()->memory_tracker()->IsWasmMemory(data);\n   i::JSArrayBuffer::Setup(obj, i_isolate,\n                           mode == ArrayBufferCreationMode::kExternalized, data,\n-                          byte_length, i::SharedFlag::kShared);\n+                          byte_length, i::SharedFlag::kShared, is_wasm_memory);\n   return Utils::ToLocalShared(obj);\n }\n \n@@ -8302,14 +7999,6 @@ v8::Local<v8::Context> Isolate::GetCurrentContext() {\n }\n \n \n-v8::Local<v8::Context> Isolate::GetCallingContext() {\n-  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n-  i::Handle<i::Object> calling = isolate->GetCallingNativeContext();\n-  if (calling.is_null()) return Local<Context>();\n-  return Utils::ToLocal(i::Handle<i::Context>::cast(calling));\n-}\n-\n-\n v8::Local<v8::Context> Isolate::GetEnteredContext() {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n   i::Handle<i::Object> last =\n@@ -8670,6 +8359,7 @@ void Isolate::GetHeapStatistics(HeapStatistics* heap_statistics) {\n   heap_statistics->malloced_memory_ =\n       isolate->allocator()->GetCurrentMemoryUsage() +\n       isolate->wasm_engine()->allocator()->GetCurrentMemoryUsage();\n+  heap_statistics->external_memory_ = isolate->heap()->external_memory();\n   heap_statistics->peak_malloced_memory_ =\n       isolate->allocator()->GetMaxMemoryUsage() +\n       isolate->wasm_engine()->allocator()->GetMaxMemoryUsage();\n@@ -8806,18 +8496,6 @@ void Isolate::RemoveCallCompletedCallback(CallCompletedCallback callback) {\n   isolate->RemoveCallCompletedCallback(callback);\n }\n \n-void Isolate::AddCallCompletedCallback(\n-    DeprecatedCallCompletedCallback callback) {\n-  AddCallCompletedCallback(reinterpret_cast<CallCompletedCallback>(callback));\n-}\n-\n-\n-void Isolate::RemoveCallCompletedCallback(\n-    DeprecatedCallCompletedCallback callback) {\n-  RemoveCallCompletedCallback(\n-      reinterpret_cast<CallCompletedCallback>(callback));\n-}\n-\n void Isolate::AtomicsWaitWakeHandle::Wake() {\n   reinterpret_cast<i::AtomicsWaitWakeHandle*>(this)->Wake();\n }\n@@ -8861,17 +8539,6 @@ void Isolate::EnqueueMicrotask(MicrotaskCallback callback, void* data) {\n }\n \n \n-void Isolate::SetAutorunMicrotasks(bool autorun) {\n-  SetMicrotasksPolicy(\n-      autorun ? MicrotasksPolicy::kAuto : MicrotasksPolicy::kExplicit);\n-}\n-\n-\n-bool Isolate::WillAutorunMicrotasks() const {\n-  return GetMicrotasksPolicy() == MicrotasksPolicy::kAuto;\n-}\n-\n-\n void Isolate::SetMicrotasksPolicy(MicrotasksPolicy policy) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n   isolate->handle_scope_implementer()->set_microtasks_policy(policy);\n@@ -8959,7 +8626,7 @@ int Isolate::ContextDisposedNotification(bool dependant_context) {\n   if (!dependant_context) {\n     // We left the current context, we can abort all WebAssembly compilations on\n     // that isolate.\n-    isolate->wasm_engine()->AbortCompileJobsOnIsolate(isolate);\n+    isolate->wasm_engine()->DeleteCompileJobsOnIsolate(isolate);\n   }\n   // TODO(ahaas): move other non-heap activity out of the heap call.\n   return isolate->heap()->NotifyContextDisposed(dependant_context);\n@@ -9065,6 +8732,9 @@ CALLBACK_SETTER(WasmCompileStreamingCallback, ApiImplementationCallback,\n CALLBACK_SETTER(WasmStreamingCallback, WasmStreamingCallback,\n                 wasm_streaming_callback)\n \n+CALLBACK_SETTER(WasmThreadsEnabledCallback, WasmThreadsEnabledCallback,\n+                wasm_threads_enabled_callback)\n+\n void Isolate::AddNearHeapLimitCallback(v8::NearHeapLimitCallback callback,\n                                        void* data) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n@@ -9235,12 +8905,9 @@ String::Utf8Value::Utf8Value(v8::Isolate* isolate, v8::Local<v8::Value> obj)\n   if (!obj->ToString(context).ToLocal(&str)) return;\n   length_ = str->Utf8Length(isolate);\n   str_ = i::NewArray<char>(length_ + 1);\n-  str->WriteUtf8(str_);\n+  str->WriteUtf8(isolate, str_);\n }\n \n-String::Utf8Value::Utf8Value(v8::Local<v8::Value> obj)\n-    : String::Utf8Value::Utf8Value(Isolate::GetCurrent(), obj) {}\n-\n String::Utf8Value::~Utf8Value() {\n   i::DeleteArray(str_);\n }\n@@ -9257,12 +8924,9 @@ String::Value::Value(v8::Isolate* isolate, v8::Local<v8::Value> obj)\n   if (!obj->ToString(context).ToLocal(&str)) return;\n   length_ = str->Length();\n   str_ = i::NewArray<uint16_t>(length_ + 1);\n-  str->Write(str_);\n+  str->Write(isolate, str_);\n }\n \n-String::Value::Value(v8::Local<v8::Value> obj)\n-    : String::Value::Value(v8::Isolate::GetCurrent(), obj) {}\n-\n String::Value::~Value() {\n   i::DeleteArray(str_);\n }\n@@ -9757,7 +9421,7 @@ MaybeLocal<UnboundScript> debug::CompileInspectorScript(Isolate* v8_isolate,\n     i::ScriptData* script_data = nullptr;\n     i::MaybeHandle<i::SharedFunctionInfo> maybe_function_info =\n         i::Compiler::GetSharedFunctionInfoForScript(\n-            str, i::Compiler::ScriptDetails(), origin_options, nullptr,\n+            isolate, str, i::Compiler::ScriptDetails(), origin_options, nullptr,\n             script_data, ScriptCompiler::kNoCompileOptions,\n             ScriptCompiler::kNoCacheBecauseInspector,\n             i::FLAG_expose_inspector_scripts ? i::NOT_NATIVES_CODE\n@@ -9990,7 +9654,6 @@ void debug::GlobalLexicalScopeNames(\n void debug::SetReturnValue(v8::Isolate* v8_isolate,\n                            v8::Local<v8::Value> value) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n-  if (!isolate->debug()->break_id()) return;\n   isolate->debug()->set_return_value(*Utils::OpenHandle(*value));\n }\n \n@@ -10773,6 +10436,55 @@ void EmbedderHeapTracer::FinalizeTracing() {\n   }\n }\n \n+void EmbedderHeapTracer::GarbageCollectionForTesting(\n+    EmbedderStackState stack_state) {\n+  CHECK(isolate_);\n+  CHECK(i::FLAG_expose_gc);\n+  i::Heap* const heap = reinterpret_cast<i::Isolate*>(isolate_)->heap();\n+  heap->SetEmbedderStackStateForNextFinalizaton(stack_state);\n+  heap->CollectAllGarbage(i::Heap::kAbortIncrementalMarkingMask,\n+                          i::GarbageCollectionReason::kTesting,\n+                          kGCCallbackFlagForced);\n+}\n+\n+bool EmbedderHeapTracer::AdvanceTracing(double deadline_in_ms) {\n+#if __clang__\n+#pragma clang diagnostic push\n+#pragma clang diagnostic ignored \"-Wdeprecated\"\n+#endif\n+  return !this->AdvanceTracing(\n+      deadline_in_ms, AdvanceTracingActions(std::isinf(deadline_in_ms)\n+                                                ? FORCE_COMPLETION\n+                                                : DO_NOT_FORCE_COMPLETION));\n+#if __clang__\n+#pragma clang diagnostic pop\n+#endif\n+}\n+\n+void EmbedderHeapTracer::EnterFinalPause(EmbedderStackState stack_state) {\n+#if __clang__\n+#pragma clang diagnostic push\n+#pragma clang diagnostic ignored \"-Wdeprecated\"\n+#endif\n+  this->EnterFinalPause();\n+#if __clang__\n+#pragma clang diagnostic pop\n+#endif\n+}\n+\n+bool EmbedderHeapTracer::IsTracingDone() {\n+// TODO(mlippautz): Implement using \"return true\" after removing the deprecated\n+// call.\n+#if __clang__\n+#pragma clang diagnostic push\n+#pragma clang diagnostic ignored \"-Wdeprecated\"\n+#endif\n+  return NumberOfWrappersToTrace() == 0;\n+#if __clang__\n+#pragma clang diagnostic pop\n+#endif\n+}\n+\n namespace internal {\n \n void HandleScopeImplementer::FreeThreadResources() {\n@@ -10968,8 +10680,6 @@ void InvokeFunctionCallback(const v8::FunctionCallbackInfo<v8::Value>& info,\n #undef SET_FIELD_WRAPPED\n #undef NEW_STRING\n #undef CALLBACK_SETTER\n-#undef DISABLE_DEPRECATED_WARNINGS\n-#undef RESET_DEPRECATED_WARNINGS\n \n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "ae0ce350a4aaac73ca7b7633afc7ef880422f0fd",
            "filename": "deps/v8/src/api.h",
            "status": "modified",
            "additions": 17,
            "deletions": 121,
            "changes": 138,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fapi.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -11,10 +11,15 @@\n #include \"src/detachable-vector.h\"\n #include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n+#include \"src/objects.h\"\n #include \"src/objects/bigint.h\"\n #include \"src/objects/js-collection.h\"\n+#include \"src/objects/js-generator.h\"\n #include \"src/objects/js-promise.h\"\n+#include \"src/objects/js-proxy.h\"\n #include \"src/objects/module.h\"\n+#include \"src/objects/shared-function-info.h\"\n+\n #include \"src/objects/templates.h\"\n \n namespace v8 {\n@@ -31,36 +36,19 @@ class Consts {\n   };\n };\n \n-template <typename T> inline T ToCData(v8::internal::Object* obj) {\n-  STATIC_ASSERT(sizeof(T) == sizeof(v8::internal::Address));\n-  if (obj == v8::internal::Smi::kZero) return nullptr;\n-  return reinterpret_cast<T>(\n-      v8::internal::Foreign::cast(obj)->foreign_address());\n-}\n+template <typename T>\n+inline T ToCData(v8::internal::Object* obj);\n \n template <>\n-inline v8::internal::Address ToCData(v8::internal::Object* obj) {\n-  if (obj == v8::internal::Smi::kZero) return v8::internal::kNullAddress;\n-  return v8::internal::Foreign::cast(obj)->foreign_address();\n-}\n+inline v8::internal::Address ToCData(v8::internal::Object* obj);\n \n template <typename T>\n inline v8::internal::Handle<v8::internal::Object> FromCData(\n-    v8::internal::Isolate* isolate, T obj) {\n-  STATIC_ASSERT(sizeof(T) == sizeof(v8::internal::Address));\n-  if (obj == nullptr) return handle(v8::internal::Smi::kZero, isolate);\n-  return isolate->factory()->NewForeign(\n-      reinterpret_cast<v8::internal::Address>(obj));\n-}\n+    v8::internal::Isolate* isolate, T obj);\n \n template <>\n inline v8::internal::Handle<v8::internal::Object> FromCData(\n-    v8::internal::Isolate* isolate, v8::internal::Address obj) {\n-  if (obj == v8::internal::kNullAddress) {\n-    return handle(v8::internal::Smi::kZero, isolate);\n-  }\n-  return isolate->factory()->NewForeign(obj);\n-}\n+    v8::internal::Isolate* isolate, v8::internal::Address obj);\n \n class ApiFunction {\n  public:\n@@ -250,17 +238,14 @@ OPEN_HANDLE_LIST(DECLARE_OPEN_HANDLE)\n \n #undef DECLARE_OPEN_HANDLE\n \n-  template<class From, class To>\n-  static inline Local<To> Convert(v8::internal::Handle<From> obj) {\n-    DCHECK(obj.is_null() || (obj->IsSmi() || !obj->IsTheHole()));\n-    return Local<To>(reinterpret_cast<To*>(obj.location()));\n-  }\n+template <class From, class To>\n+static inline Local<To> Convert(v8::internal::Handle<From> obj);\n \n-  template <class T>\n-  static inline v8::internal::Handle<v8::internal::Object> OpenPersistent(\n-      const v8::Persistent<T>& persistent) {\n-    return v8::internal::Handle<v8::internal::Object>(\n-        reinterpret_cast<v8::internal::Object**>(persistent.val_));\n+template <class T>\n+static inline v8::internal::Handle<v8::internal::Object> OpenPersistent(\n+    const v8::Persistent<T>& persistent) {\n+  return v8::internal::Handle<v8::internal::Object>(\n+      reinterpret_cast<v8::internal::Object**>(persistent.val_));\n   }\n \n   template <class T>\n@@ -302,84 +287,6 @@ inline bool ToLocal(v8::internal::MaybeHandle<v8::internal::Object> maybe,\n   return false;\n }\n \n-\n-// Implementations of ToLocal\n-\n-#define MAKE_TO_LOCAL(Name, From, To)                                       \\\n-  Local<v8::To> Utils::Name(v8::internal::Handle<v8::internal::From> obj) { \\\n-    return Convert<v8::internal::From, v8::To>(obj);  \\\n-  }\n-\n-\n-#define MAKE_TO_LOCAL_TYPED_ARRAY(Type, typeName, TYPE, ctype, size)  \\\n-  Local<v8::Type##Array> Utils::ToLocal##Type##Array(                 \\\n-      v8::internal::Handle<v8::internal::JSTypedArray> obj) {         \\\n-    DCHECK(obj->type() == v8::internal::kExternal##Type##Array);      \\\n-    return Convert<v8::internal::JSTypedArray, v8::Type##Array>(obj); \\\n-  }\n-\n-\n-MAKE_TO_LOCAL(ToLocal, Context, Context)\n-MAKE_TO_LOCAL(ToLocal, Object, Value)\n-MAKE_TO_LOCAL(ToLocal, Module, Module)\n-MAKE_TO_LOCAL(ToLocal, Name, Name)\n-MAKE_TO_LOCAL(ToLocal, String, String)\n-MAKE_TO_LOCAL(ToLocal, Symbol, Symbol)\n-MAKE_TO_LOCAL(ToLocal, JSRegExp, RegExp)\n-MAKE_TO_LOCAL(ToLocal, JSReceiver, Object)\n-MAKE_TO_LOCAL(ToLocal, JSObject, Object)\n-MAKE_TO_LOCAL(ToLocal, JSFunction, Function)\n-MAKE_TO_LOCAL(ToLocal, JSArray, Array)\n-MAKE_TO_LOCAL(ToLocal, JSMap, Map)\n-MAKE_TO_LOCAL(ToLocal, JSSet, Set)\n-MAKE_TO_LOCAL(ToLocal, JSProxy, Proxy)\n-MAKE_TO_LOCAL(ToLocal, JSArrayBuffer, ArrayBuffer)\n-MAKE_TO_LOCAL(ToLocal, JSArrayBufferView, ArrayBufferView)\n-MAKE_TO_LOCAL(ToLocal, JSDataView, DataView)\n-MAKE_TO_LOCAL(ToLocal, JSTypedArray, TypedArray)\n-MAKE_TO_LOCAL(ToLocalShared, JSArrayBuffer, SharedArrayBuffer)\n-\n-TYPED_ARRAYS(MAKE_TO_LOCAL_TYPED_ARRAY)\n-\n-MAKE_TO_LOCAL(ToLocal, FunctionTemplateInfo, FunctionTemplate)\n-MAKE_TO_LOCAL(ToLocal, ObjectTemplateInfo, ObjectTemplate)\n-MAKE_TO_LOCAL(SignatureToLocal, FunctionTemplateInfo, Signature)\n-MAKE_TO_LOCAL(AccessorSignatureToLocal, FunctionTemplateInfo, AccessorSignature)\n-MAKE_TO_LOCAL(MessageToLocal, Object, Message)\n-MAKE_TO_LOCAL(PromiseToLocal, JSObject, Promise)\n-MAKE_TO_LOCAL(StackTraceToLocal, FixedArray, StackTrace)\n-MAKE_TO_LOCAL(StackFrameToLocal, StackFrameInfo, StackFrame)\n-MAKE_TO_LOCAL(NumberToLocal, Object, Number)\n-MAKE_TO_LOCAL(IntegerToLocal, Object, Integer)\n-MAKE_TO_LOCAL(Uint32ToLocal, Object, Uint32)\n-MAKE_TO_LOCAL(ToLocal, BigInt, BigInt);\n-MAKE_TO_LOCAL(ExternalToLocal, JSObject, External)\n-MAKE_TO_LOCAL(CallableToLocal, JSReceiver, Function)\n-MAKE_TO_LOCAL(ToLocalPrimitive, Object, Primitive)\n-MAKE_TO_LOCAL(ToLocal, FixedArray, PrimitiveArray)\n-MAKE_TO_LOCAL(ScriptOrModuleToLocal, Script, ScriptOrModule)\n-\n-#undef MAKE_TO_LOCAL_TYPED_ARRAY\n-#undef MAKE_TO_LOCAL\n-\n-\n-// Implementations of OpenHandle\n-\n-#define MAKE_OPEN_HANDLE(From, To)                                             \\\n-  v8::internal::Handle<v8::internal::To> Utils::OpenHandle(                    \\\n-      const v8::From* that, bool allow_empty_handle) {                         \\\n-    DCHECK(allow_empty_handle || that != nullptr);                             \\\n-    DCHECK(that == nullptr ||                                                  \\\n-           (*reinterpret_cast<v8::internal::Object* const*>(that))->Is##To()); \\\n-    return v8::internal::Handle<v8::internal::To>(                             \\\n-        reinterpret_cast<v8::internal::To**>(const_cast<v8::From*>(that)));    \\\n-  }\n-\n-OPEN_HANDLE_LIST(MAKE_OPEN_HANDLE)\n-\n-#undef MAKE_OPEN_HANDLE\n-#undef OPEN_HANDLE_LIST\n-\n namespace internal {\n \n class V8_EXPORT_PRIVATE DeferredHandles {\n@@ -634,12 +541,6 @@ bool HandleScopeImplementer::LastEnteredContextWas(Handle<Context> context) {\n   return !entered_contexts_.empty() && entered_contexts_.back() == *context;\n }\n \n-\n-Handle<Context> HandleScopeImplementer::LastEnteredContext() {\n-  if (entered_contexts_.empty()) return Handle<Context>::null();\n-  return Handle<Context>(entered_contexts_.back(), isolate_);\n-}\n-\n void HandleScopeImplementer::EnterMicrotaskContext(Handle<Context> context) {\n   DCHECK(!microtask_context_);\n   microtask_context_ = *context;\n@@ -651,11 +552,6 @@ void HandleScopeImplementer::LeaveMicrotaskContext() {\n   entered_context_count_during_microtasks_ = 0;\n }\n \n-Handle<Context> HandleScopeImplementer::MicrotaskContext() {\n-  if (microtask_context_) return Handle<Context>(microtask_context_, isolate_);\n-  return Handle<Context>::null();\n-}\n-\n // If there's a spare block, use it for growing the current scope.\n internal::Object** HandleScopeImplementer::GetSpareOrNewBlock() {\n   internal::Object** block ="
        },
        {
            "sha": "c1a18ab82fd9aeb84d2be603452b77be3f477a77",
            "filename": "deps/v8/src/arguments-inl.h",
            "status": "added",
            "additions": 28,
            "deletions": 0,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farguments-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farguments-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farguments-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -0,0 +1,28 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_ARGUMENTS_INL_H_\n+#define V8_ARGUMENTS_INL_H_\n+\n+#include \"src/arguments.h\"\n+\n+#include \"src/handles-inl.h\"\n+#include \"src/objects-inl.h\"\n+\n+namespace v8 {\n+namespace internal {\n+\n+template <class S>\n+Handle<S> Arguments::at(int index) {\n+  return Handle<S>::cast(at<Object>(index));\n+}\n+\n+int Arguments::smi_at(int index) { return Smi::ToInt((*this)[index]); }\n+\n+double Arguments::number_at(int index) { return (*this)[index]->Number(); }\n+\n+}  // namespace internal\n+}  // namespace v8\n+\n+#endif  // V8_ARGUMENTS_INL_H_"
        },
        {
            "sha": "0bfdd770f5835173aeb8fe01a749d13396d8ccde",
            "filename": "deps/v8/src/arguments.h",
            "status": "modified",
            "additions": 9,
            "deletions": 11,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farguments.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farguments.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farguments.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -42,19 +42,11 @@ class Arguments BASE_EMBEDDED {\n   }\n \n   template <class S = Object>\n-  Handle<S> at(int index) {\n-    Object** value = &((*this)[index]);\n-    // This cast checks that the object we're accessing does indeed have the\n-    // expected type.\n-    S::cast(*value);\n-    return Handle<S>(reinterpret_cast<S**>(value));\n-  }\n+  inline Handle<S> at(int index);\n \n-  int smi_at(int index) { return Smi::ToInt((*this)[index]); }\n+  inline int smi_at(int index);\n \n-  double number_at(int index) {\n-    return (*this)[index]->Number();\n-  }\n+  inline double number_at(int index);\n \n   // Get the total number of arguments including the receiver.\n   int length() const { return static_cast<int>(length_); }\n@@ -70,6 +62,12 @@ class Arguments BASE_EMBEDDED {\n   Object** arguments_;\n };\n \n+template <>\n+inline Handle<Object> Arguments::at(int index) {\n+  Object** value = &((*this)[index]);\n+  return Handle<Object>(value);\n+}\n+\n double ClobberDoubleRegisters(double x1, double x2, double x3, double x4);\n \n #ifdef DEBUG"
        },
        {
            "sha": "68ea6f321025d2befeba9961c52f699528cd1847",
            "filename": "deps/v8/src/arm/assembler-arm-inl.h",
            "status": "modified",
            "additions": 53,
            "deletions": 55,
            "changes": 108,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -78,10 +78,10 @@ Address RelocInfo::target_address_address() {\n   DCHECK(IsCodeTarget(rmode_) || IsRuntimeEntry(rmode_) || IsWasmCall(rmode_) ||\n          IsEmbeddedObject(rmode_) || IsExternalReference(rmode_) ||\n          IsOffHeapTarget(rmode_));\n-  if (Assembler::IsMovW(Memory::int32_at(pc_))) {\n+  if (Assembler::IsMovW(Memory<int32_t>(pc_))) {\n     return pc_;\n   } else {\n-    DCHECK(Assembler::IsLdrPcImmediateOffset(Memory::int32_at(pc_)));\n+    DCHECK(Assembler::IsLdrPcImmediateOffset(Memory<int32_t>(pc_)));\n     return constant_pool_entry_address();\n   }\n }\n@@ -120,8 +120,7 @@ void RelocInfo::set_target_object(Heap* heap, HeapObject* target,\n                                    reinterpret_cast<Address>(target),\n                                    icache_flush_mode);\n   if (write_barrier_mode == UPDATE_WRITE_BARRIER && host() != nullptr) {\n-    heap->incremental_marking()->RecordWriteIntoCode(host(), this, target);\n-    heap->RecordWriteIntoCode(host(), this, target);\n+    WriteBarrierForCode(host(), this, target);\n   }\n }\n \n@@ -140,7 +139,7 @@ void RelocInfo::set_target_external_reference(\n \n Address RelocInfo::target_internal_reference() {\n   DCHECK(rmode_ == INTERNAL_REFERENCE);\n-  return Memory::Address_at(pc_);\n+  return Memory<Address>(pc_);\n }\n \n \n@@ -170,9 +169,9 @@ Address RelocInfo::target_off_heap_target() {\n void RelocInfo::WipeOut() {\n   DCHECK(IsEmbeddedObject(rmode_) || IsCodeTarget(rmode_) ||\n          IsRuntimeEntry(rmode_) || IsExternalReference(rmode_) ||\n-         IsInternalReference(rmode_));\n+         IsInternalReference(rmode_) || IsOffHeapTarget(rmode_));\n   if (IsInternalReference(rmode_)) {\n-    Memory::Address_at(pc_) = kNullAddress;\n+    Memory<Address>(pc_) = kNullAddress;\n   } else {\n     Assembler::set_target_address_at(pc_, constant_pool_, kNullAddress);\n   }\n@@ -181,7 +180,7 @@ void RelocInfo::WipeOut() {\n Handle<Code> Assembler::relative_code_target_object_handle_at(\n     Address pc) const {\n   Instruction* branch = Instruction::At(pc);\n-  int code_target_index = branch->GetBranchOffset() / Instruction::kInstrSize;\n+  int code_target_index = branch->GetBranchOffset() / kInstrSize;\n   return GetCodeTarget(code_target_index);\n }\n \n@@ -255,43 +254,42 @@ Address Assembler::target_address_from_return_address(Address pc) {\n   //  ldr   ip, [pc, #...] @ call address\n   //  blx   ip\n   //                      @ return address\n-  Address candidate = pc - 2 * Assembler::kInstrSize;\n-  Instr candidate_instr(Memory::int32_at(candidate));\n+  Address candidate = pc - 2 * kInstrSize;\n+  Instr candidate_instr(Memory<int32_t>(candidate));\n   if (IsLdrPcImmediateOffset(candidate_instr)) {\n     return candidate;\n   } else {\n     if (CpuFeatures::IsSupported(ARMv7)) {\n-      candidate -= 1 * Assembler::kInstrSize;\n-      DCHECK(IsMovW(Memory::int32_at(candidate)) &&\n-             IsMovT(Memory::int32_at(candidate + Assembler::kInstrSize)));\n+      candidate -= 1 * kInstrSize;\n+      DCHECK(IsMovW(Memory<int32_t>(candidate)) &&\n+             IsMovT(Memory<int32_t>(candidate + kInstrSize)));\n     } else {\n-      candidate -= 3 * Assembler::kInstrSize;\n-      DCHECK(\n-          IsMovImmed(Memory::int32_at(candidate)) &&\n-          IsOrrImmed(Memory::int32_at(candidate + Assembler::kInstrSize)) &&\n-          IsOrrImmed(Memory::int32_at(candidate + 2 * Assembler::kInstrSize)) &&\n-          IsOrrImmed(Memory::int32_at(candidate + 3 * Assembler::kInstrSize)));\n+      candidate -= 3 * kInstrSize;\n+      DCHECK(IsMovImmed(Memory<int32_t>(candidate)) &&\n+             IsOrrImmed(Memory<int32_t>(candidate + kInstrSize)) &&\n+             IsOrrImmed(Memory<int32_t>(candidate + 2 * kInstrSize)) &&\n+             IsOrrImmed(Memory<int32_t>(candidate + 3 * kInstrSize)));\n     }\n     return candidate;\n   }\n }\n \n \n Address Assembler::return_address_from_call_start(Address pc) {\n-  if (IsLdrPcImmediateOffset(Memory::int32_at(pc))) {\n+  if (IsLdrPcImmediateOffset(Memory<int32_t>(pc))) {\n     // Load from constant pool, small section.\n     return pc + kInstrSize * 2;\n   } else {\n     if (CpuFeatures::IsSupported(ARMv7)) {\n-      DCHECK(IsMovW(Memory::int32_at(pc)));\n-      DCHECK(IsMovT(Memory::int32_at(pc + kInstrSize)));\n+      DCHECK(IsMovW(Memory<int32_t>(pc)));\n+      DCHECK(IsMovT(Memory<int32_t>(pc + kInstrSize)));\n       // A movw / movt load immediate.\n       return pc + kInstrSize * 3;\n     } else {\n-      DCHECK(IsMovImmed(Memory::int32_at(pc)));\n-      DCHECK(IsOrrImmed(Memory::int32_at(pc + kInstrSize)));\n-      DCHECK(IsOrrImmed(Memory::int32_at(pc + 2 * kInstrSize)));\n-      DCHECK(IsOrrImmed(Memory::int32_at(pc + 3 * kInstrSize)));\n+      DCHECK(IsMovImmed(Memory<int32_t>(pc)));\n+      DCHECK(IsOrrImmed(Memory<int32_t>(pc + kInstrSize)));\n+      DCHECK(IsOrrImmed(Memory<int32_t>(pc + 2 * kInstrSize)));\n+      DCHECK(IsOrrImmed(Memory<int32_t>(pc + 3 * kInstrSize)));\n       // A mov / orr load immediate.\n       return pc + kInstrSize * 5;\n     }\n@@ -300,7 +298,7 @@ Address Assembler::return_address_from_call_start(Address pc) {\n \n void Assembler::deserialization_set_special_target_at(\n     Address constant_pool_entry, Code* code, Address target) {\n-  Memory::Address_at(constant_pool_entry) = target;\n+  Memory<Address>(constant_pool_entry) = target;\n }\n \n int Assembler::deserialization_special_target_size(Address location) {\n@@ -309,41 +307,41 @@ int Assembler::deserialization_special_target_size(Address location) {\n \n void Assembler::deserialization_set_target_internal_reference_at(\n     Address pc, Address target, RelocInfo::Mode mode) {\n-  Memory::Address_at(pc) = target;\n+  Memory<Address>(pc) = target;\n }\n \n \n bool Assembler::is_constant_pool_load(Address pc) {\n-  return IsLdrPcImmediateOffset(Memory::int32_at(pc));\n+  return IsLdrPcImmediateOffset(Memory<int32_t>(pc));\n }\n \n \n Address Assembler::constant_pool_entry_address(Address pc,\n                                                Address constant_pool) {\n-  DCHECK(Assembler::IsLdrPcImmediateOffset(Memory::int32_at(pc)));\n-  Instr instr = Memory::int32_at(pc);\n+  DCHECK(Assembler::IsLdrPcImmediateOffset(Memory<int32_t>(pc)));\n+  Instr instr = Memory<int32_t>(pc);\n   return pc + GetLdrRegisterImmediateOffset(instr) + Instruction::kPcLoadDelta;\n }\n \n \n Address Assembler::target_address_at(Address pc, Address constant_pool) {\n   if (is_constant_pool_load(pc)) {\n     // This is a constant pool lookup. Return the value in the constant pool.\n-    return Memory::Address_at(constant_pool_entry_address(pc, constant_pool));\n-  } else if (CpuFeatures::IsSupported(ARMv7) && IsMovW(Memory::int32_at(pc))) {\n+    return Memory<Address>(constant_pool_entry_address(pc, constant_pool));\n+  } else if (CpuFeatures::IsSupported(ARMv7) && IsMovW(Memory<int32_t>(pc))) {\n     // This is an movw / movt immediate load. Return the immediate.\n-    DCHECK(IsMovW(Memory::int32_at(pc)) &&\n-           IsMovT(Memory::int32_at(pc + kInstrSize)));\n+    DCHECK(IsMovW(Memory<int32_t>(pc)) &&\n+           IsMovT(Memory<int32_t>(pc + kInstrSize)));\n     Instruction* movw_instr = Instruction::At(pc);\n     Instruction* movt_instr = Instruction::At(pc + kInstrSize);\n     return static_cast<Address>((movt_instr->ImmedMovwMovtValue() << 16) |\n                                 movw_instr->ImmedMovwMovtValue());\n-  } else if (IsMovImmed(Memory::int32_at(pc))) {\n+  } else if (IsMovImmed(Memory<int32_t>(pc))) {\n     // This is an mov / orr immediate load. Return the immediate.\n-    DCHECK(IsMovImmed(Memory::int32_at(pc)) &&\n-           IsOrrImmed(Memory::int32_at(pc + kInstrSize)) &&\n-           IsOrrImmed(Memory::int32_at(pc + 2 * kInstrSize)) &&\n-           IsOrrImmed(Memory::int32_at(pc + 3 * kInstrSize)));\n+    DCHECK(IsMovImmed(Memory<int32_t>(pc)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + kInstrSize)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + 2 * kInstrSize)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + 3 * kInstrSize)));\n     Instr mov_instr = instr_at(pc);\n     Instr orr_instr_1 = instr_at(pc + kInstrSize);\n     Instr orr_instr_2 = instr_at(pc + 2 * kInstrSize);\n@@ -364,7 +362,7 @@ void Assembler::set_target_address_at(Address pc, Address constant_pool,\n                                       ICacheFlushMode icache_flush_mode) {\n   if (is_constant_pool_load(pc)) {\n     // This is a constant pool lookup. Update the entry in the constant pool.\n-    Memory::Address_at(constant_pool_entry_address(pc, constant_pool)) = target;\n+    Memory<Address>(constant_pool_entry_address(pc, constant_pool)) = target;\n     // Intuitively, we would think it is necessary to always flush the\n     // instruction cache after patching a target address in the code as follows:\n     //   Assembler::FlushICache(pc, sizeof(target));\n@@ -373,37 +371,37 @@ void Assembler::set_target_address_at(Address pc, Address constant_pool,\n     // ldr   ip, [pp, #...]\n     // since the instruction accessing this address in the constant pool remains\n     // unchanged.\n-  } else if (CpuFeatures::IsSupported(ARMv7) && IsMovW(Memory::int32_at(pc))) {\n+  } else if (CpuFeatures::IsSupported(ARMv7) && IsMovW(Memory<int32_t>(pc))) {\n     // This is an movw / movt immediate load. Patch the immediate embedded in\n     // the instructions.\n-    DCHECK(IsMovW(Memory::int32_at(pc)));\n-    DCHECK(IsMovT(Memory::int32_at(pc + kInstrSize)));\n+    DCHECK(IsMovW(Memory<int32_t>(pc)));\n+    DCHECK(IsMovT(Memory<int32_t>(pc + kInstrSize)));\n     uint32_t* instr_ptr = reinterpret_cast<uint32_t*>(pc);\n     uint32_t immediate = static_cast<uint32_t>(target);\n     instr_ptr[0] = PatchMovwImmediate(instr_ptr[0], immediate & 0xFFFF);\n     instr_ptr[1] = PatchMovwImmediate(instr_ptr[1], immediate >> 16);\n-    DCHECK(IsMovW(Memory::int32_at(pc)));\n-    DCHECK(IsMovT(Memory::int32_at(pc + kInstrSize)));\n+    DCHECK(IsMovW(Memory<int32_t>(pc)));\n+    DCHECK(IsMovT(Memory<int32_t>(pc + kInstrSize)));\n     if (icache_flush_mode != SKIP_ICACHE_FLUSH) {\n       Assembler::FlushICache(pc, 2 * kInstrSize);\n     }\n-  } else if (IsMovImmed(Memory::int32_at(pc))) {\n+  } else if (IsMovImmed(Memory<int32_t>(pc))) {\n     // This is an mov / orr immediate load. Patch the immediate embedded in\n     // the instructions.\n-    DCHECK(IsMovImmed(Memory::int32_at(pc)) &&\n-           IsOrrImmed(Memory::int32_at(pc + kInstrSize)) &&\n-           IsOrrImmed(Memory::int32_at(pc + 2 * kInstrSize)) &&\n-           IsOrrImmed(Memory::int32_at(pc + 3 * kInstrSize)));\n+    DCHECK(IsMovImmed(Memory<int32_t>(pc)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + kInstrSize)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + 2 * kInstrSize)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + 3 * kInstrSize)));\n     uint32_t* instr_ptr = reinterpret_cast<uint32_t*>(pc);\n     uint32_t immediate = static_cast<uint32_t>(target);\n     instr_ptr[0] = PatchShiftImm(instr_ptr[0], immediate & kImm8Mask);\n     instr_ptr[1] = PatchShiftImm(instr_ptr[1], immediate & (kImm8Mask << 8));\n     instr_ptr[2] = PatchShiftImm(instr_ptr[2], immediate & (kImm8Mask << 16));\n     instr_ptr[3] = PatchShiftImm(instr_ptr[3], immediate & (kImm8Mask << 24));\n-    DCHECK(IsMovImmed(Memory::int32_at(pc)) &&\n-           IsOrrImmed(Memory::int32_at(pc + kInstrSize)) &&\n-           IsOrrImmed(Memory::int32_at(pc + 2 * kInstrSize)) &&\n-           IsOrrImmed(Memory::int32_at(pc + 3 * kInstrSize)));\n+    DCHECK(IsMovImmed(Memory<int32_t>(pc)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + kInstrSize)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + 2 * kInstrSize)) &&\n+           IsOrrImmed(Memory<int32_t>(pc + 3 * kInstrSize)));\n     if (icache_flush_mode != SKIP_ICACHE_FLUSH) {\n       Assembler::FlushICache(pc, 4 * kInstrSize);\n     }"
        },
        {
            "sha": "163fa4c2192f8a6776db67812b3de544306ea3a4",
            "filename": "deps/v8/src/arm/assembler-arm.cc",
            "status": "modified",
            "additions": 41,
            "deletions": 103,
            "changes": 144,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -485,7 +485,7 @@ void Assembler::AllocateAndInstallRequestedHeapObjects(Isolate* isolate) {\n         break;\n     }\n     Address pc = reinterpret_cast<Address>(buffer_) + request.offset();\n-    Memory::Address_at(constant_pool_entry_address(pc, 0 /* unused */)) =\n+    Memory<Address>(constant_pool_entry_address(pc, 0 /* unused */)) =\n         object.address();\n   }\n }\n@@ -2058,6 +2058,13 @@ void Assembler::rbit(Register dst, Register src, Condition cond) {\n   emit(cond | 0x6FF * B16 | dst.code() * B12 | 0xF3 * B4 | src.code());\n }\n \n+void Assembler::rev(Register dst, Register src, Condition cond) {\n+  // Instruction details available in ARM DDI 0406C.b, A8.8.144.\n+  // cond(31-28) | 011010111111(27-16) | Rd(15-12) | 11110011(11-4) | Rm(3-0)\n+  DCHECK(dst != pc);\n+  DCHECK(src != pc);\n+  emit(cond | 0x6BF * B16 | dst.code() * B12 | 0xF3 * B4 | src.code());\n+}\n \n // Status register access instructions.\n void Assembler::mrs(Register dst, SRegister s, Condition cond) {\n@@ -2233,6 +2240,30 @@ void Assembler::strexh(Register src1, Register src2, Register dst,\n        0xF9 * B4 | src2.code());\n }\n \n+void Assembler::ldrexd(Register dst1, Register dst2, Register src,\n+                       Condition cond) {\n+  // cond(31-28) | 00011011(27-20) | Rn(19-16) | Rt(15-12) | 111110011111(11-0)\n+  DCHECK(dst1 != lr);  // r14.\n+  // The pair of destination registers is restricted to being an even-numbered\n+  // register and the odd-numbered register that immediately follows it.\n+  DCHECK_EQ(0, dst1.code() % 2);\n+  DCHECK_EQ(dst1.code() + 1, dst2.code());\n+  emit(cond | B24 | B23 | B21 | B20 | src.code() * B16 | dst1.code() * B12 |\n+       0xF9F);\n+}\n+\n+void Assembler::strexd(Register res, Register src1, Register src2, Register dst,\n+                       Condition cond) {\n+  // cond(31-28) | 00011010(27-20) | Rn(19-16) | Rt(15-12) | 111110011111(11-0)\n+  DCHECK(src1 != lr);  // r14.\n+  // The pair of source registers is restricted to being an even-numbered\n+  // register and the odd-numbered register that immediately follows it.\n+  DCHECK_EQ(0, src1.code() % 2);\n+  DCHECK_EQ(src1.code() + 1, src2.code());\n+  emit(cond | B24 | B23 | B21 | dst.code() * B16 | res.code() * B12 |\n+       0xF9 * B4 | src1.code());\n+}\n+\n // Preload instructions.\n void Assembler::pld(const MemOperand& address) {\n   // Instruction details available in ARM DDI 0406C.b, A8.8.128.\n@@ -2827,25 +2858,6 @@ void Assembler::vmov(const DwVfpRegister dst, Double imm,\n     int vd, d;\n     dst.split_code(&vd, &d);\n     emit(al | 0x1D*B23 | d*B22 | 0x3*B20 | vd*B12 | 0x5*B9 | B8 | enc);\n-  } else if (CpuFeatures::IsSupported(ARMv7) && FLAG_enable_vldr_imm) {\n-    CpuFeatureScope scope(this, ARMv7);\n-    // TODO(jfb) Temporarily turned off until we have constant blinding or\n-    //           some equivalent mitigation: an attacker can otherwise control\n-    //           generated data which also happens to be executable, a Very Bad\n-    //           Thing indeed.\n-    //           Blinding gets tricky because we don't have xor, we probably\n-    //           need to add/subtract without losing precision, which requires a\n-    //           cookie value that Lithium is probably better positioned to\n-    //           choose.\n-    //           We could also add a few peepholes here like detecting 0.0 and\n-    //           -0.0 and doing a vmov from the sequestered d14, forcing denorms\n-    //           to zero (we set flush-to-zero), and normalizing NaN values.\n-    //           We could also detect redundant values.\n-    //           The code could also randomize the order of values, though\n-    //           that's tricky because vldr has a limited reach. Furthermore\n-    //           it breaks load locality.\n-    ConstantPoolAddEntry(pc_offset(), imm);\n-    vldr(dst, MemOperand(pc, 0));\n   } else {\n     // Synthesise the double from ARM immediates.\n     uint32_t lo, hi;\n@@ -2861,14 +2873,14 @@ void Assembler::vmov(const DwVfpRegister dst, Double imm,\n     } else if (extra_scratch == no_reg) {\n       // We only have one spare scratch register.\n       mov(scratch, Operand(lo));\n-      vmov(dst, VmovIndexLo, scratch);\n+      vmov(NeonS32, dst, 0, scratch);\n       if (((lo & 0xFFFF) == (hi & 0xFFFF)) && CpuFeatures::IsSupported(ARMv7)) {\n         CpuFeatureScope scope(this, ARMv7);\n         movt(scratch, hi >> 16);\n       } else {\n         mov(scratch, Operand(hi));\n       }\n-      vmov(dst, VmovIndexHi, scratch);\n+      vmov(NeonS32, dst, 1, scratch);\n     } else {\n       // Move the low and high parts of the double to a D register in one\n       // instruction.\n@@ -2908,40 +2920,6 @@ void Assembler::vmov(const DwVfpRegister dst,\n        vm);\n }\n \n-void Assembler::vmov(const DwVfpRegister dst,\n-                     const VmovIndex index,\n-                     const Register src,\n-                     const Condition cond) {\n-  // Dd[index] = Rt\n-  // Instruction details available in ARM DDI 0406C.b, A8-940.\n-  // cond(31-28) | 1110(27-24) | 0(23) | opc1=0index(22-21) | 0(20) |\n-  // Vd(19-16) | Rt(15-12) | 1011(11-8) | D(7) | opc2=00(6-5) | 1(4) | 0000(3-0)\n-  DCHECK(VfpRegisterIsAvailable(dst));\n-  DCHECK(index.index == 0 || index.index == 1);\n-  int vd, d;\n-  dst.split_code(&vd, &d);\n-  emit(cond | 0xE*B24 | index.index*B21 | vd*B16 | src.code()*B12 | 0xB*B8 |\n-       d*B7 | B4);\n-}\n-\n-\n-void Assembler::vmov(const Register dst,\n-                     const VmovIndex index,\n-                     const DwVfpRegister src,\n-                     const Condition cond) {\n-  // Dd[index] = Rt\n-  // Instruction details available in ARM DDI 0406C.b, A8.8.342.\n-  // cond(31-28) | 1110(27-24) | U=0(23) | opc1=0index(22-21) | 1(20) |\n-  // Vn(19-16) | Rt(15-12) | 1011(11-8) | N(7) | opc2=00(6-5) | 1(4) | 0000(3-0)\n-  DCHECK(VfpRegisterIsAvailable(src));\n-  DCHECK(index.index == 0 || index.index == 1);\n-  int vn, n;\n-  src.split_code(&vn, &n);\n-  emit(cond | 0xE*B24 | index.index*B21 | B20 | vn*B16 | dst.code()*B12 |\n-       0xB*B8 | n*B7 | B4);\n-}\n-\n-\n void Assembler::vmov(const DwVfpRegister dst,\n                      const Register src1,\n                      const Register src2,\n@@ -5140,14 +5118,17 @@ void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data) {\n void Assembler::ConstantPoolAddEntry(int position, RelocInfo::Mode rmode,\n                                      intptr_t value) {\n   DCHECK(rmode != RelocInfo::COMMENT && rmode != RelocInfo::CONST_POOL);\n-  bool sharing_ok =\n-      RelocInfo::IsNone(rmode) || RelocInfo::IsShareableRelocMode(rmode);\n+  // We can share CODE_TARGETs because we don't patch the code objects anymore,\n+  // and we make sure we emit only one reloc info for them (thus delta patching)\n+  // will apply the delta only once. At the moment, we do not dedup code targets\n+  // if they are wrapped in a heap object request (value == 0).\n+  bool sharing_ok = RelocInfo::IsShareableRelocMode(rmode) ||\n+                    (rmode == RelocInfo::CODE_TARGET && value != 0);\n   DCHECK_LT(pending_32_bit_constants_.size(), kMaxNumPending32Constants);\n   if (pending_32_bit_constants_.empty()) {\n     first_const_pool_32_use_ = position;\n   }\n-  ConstantPoolEntry entry(\n-      position, value, sharing_ok || (rmode == RelocInfo::CODE_TARGET), rmode);\n+  ConstantPoolEntry entry(position, value, sharing_ok, rmode);\n \n   bool shared = false;\n   if (sharing_ok) {\n@@ -5164,24 +5145,6 @@ void Assembler::ConstantPoolAddEntry(int position, RelocInfo::Mode rmode,\n     }\n   }\n \n-  // Share entries if allowed and possible.\n-  // Null-values are placeholders and must be ignored.\n-  if (rmode == RelocInfo::CODE_TARGET && value != 0) {\n-    // Sharing entries here relies on canonicalized handles - without them, we\n-    // will miss the optimisation opportunity.\n-    Address handle_address = static_cast<Address>(value);\n-    auto existing = handle_to_index_map_.find(handle_address);\n-    if (existing != handle_to_index_map_.end()) {\n-      int index = existing->second;\n-      entry.set_merged_index(index);\n-      shared = true;\n-    } else {\n-      // Keep track of this code handle.\n-      handle_to_index_map_[handle_address] =\n-          static_cast<int>(pending_32_bit_constants_.size());\n-    }\n-  }\n-\n   pending_32_bit_constants_.push_back(entry);\n \n   // Make sure the constant pool is not emitted in place of the next\n@@ -5194,30 +5157,6 @@ void Assembler::ConstantPoolAddEntry(int position, RelocInfo::Mode rmode,\n   }\n }\n \n-void Assembler::ConstantPoolAddEntry(int position, Double value) {\n-  DCHECK_LT(pending_64_bit_constants_.size(), kMaxNumPending64Constants);\n-  if (pending_64_bit_constants_.empty()) {\n-    first_const_pool_64_use_ = position;\n-  }\n-  ConstantPoolEntry entry(position, value);\n-\n-  // Merge the constant, if possible.\n-  for (size_t i = 0; i < pending_64_bit_constants_.size(); i++) {\n-    ConstantPoolEntry& current_entry = pending_64_bit_constants_[i];\n-    DCHECK(current_entry.sharing_ok());\n-    if (entry.value() == current_entry.value()) {\n-      entry.set_merged_index(i);\n-      break;\n-    }\n-  }\n-  pending_64_bit_constants_.push_back(entry);\n-\n-  // Make sure the constant pool is not emitted in place of the next\n-  // instruction for which we just recorded relocation info.\n-  BlockConstPoolFor(1);\n-}\n-\n-\n void Assembler::BlockConstPoolFor(int instructions) {\n   int pc_limit = pc_offset() + instructions * kInstrSize;\n   if (no_const_pool_before_ < pc_limit) {\n@@ -5419,7 +5358,6 @@ void Assembler::CheckConstPool(bool force_emit, bool require_jump) {\n \n     pending_32_bit_constants_.clear();\n     pending_64_bit_constants_.clear();\n-    handle_to_index_map_.clear();\n \n     first_const_pool_32_use_ = -1;\n     first_const_pool_64_use_ = -1;"
        },
        {
            "sha": "fb367028825fa569d74374ee7524ef5824cbcd45",
            "filename": "deps/v8/src/arm/assembler-arm.h",
            "status": "modified",
            "additions": 5,
            "deletions": 26,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -167,7 +167,6 @@ static_assert(sizeof(Register) == sizeof(int),\n               \"Register can efficiently be passed by value\");\n \n // r7: context register\n-// r9: lithium scratch\n #define DECLARE_REGISTER(R) \\\n   constexpr Register R = Register::from_code<kRegCode_##R>();\n GENERAL_REGISTERS(DECLARE_REGISTER)\n@@ -605,14 +604,7 @@ class NeonListOperand BASE_EMBEDDED {\n   int register_count_;\n };\n \n-\n-struct VmovIndex {\n-  unsigned char index;\n-};\n-constexpr VmovIndex VmovIndexLo = { 0 };\n-constexpr VmovIndex VmovIndexHi = { 1 };\n-\n-class Assembler : public AssemblerBase {\n+class V8_EXPORT_PRIVATE Assembler : public AssemblerBase {\n  public:\n   // Create an assembler. Instructions and relocation information are emitted\n   // into a buffer, with the instructions starting from the beginning and the\n@@ -700,9 +692,6 @@ class Assembler : public AssemblerBase {\n   // pointer.\n   static constexpr int kSpecialTargetSize = kPointerSize;\n \n-  // Size of an instruction.\n-  static constexpr int kInstrSize = sizeof(Instr);\n-\n   RegList* GetScratchRegisterList() { return &scratch_register_list_; }\n   VfpRegList* GetScratchVfpRegisterList() {\n     return &scratch_vfp_register_list_;\n@@ -908,6 +897,7 @@ class Assembler : public AssemblerBase {\n \n   // Reverse the bits in a register.\n   void rbit(Register dst, Register src, Condition cond = al);\n+  void rev(Register dst, Register src, Condition cond = al);\n \n   // Status register access instructions\n \n@@ -940,6 +930,9 @@ class Assembler : public AssemblerBase {\n   void strexb(Register src1, Register src2, Register dst, Condition cond = al);\n   void ldrexh(Register dst, Register src, Condition cond = al);\n   void strexh(Register src1, Register src2, Register dst, Condition cond = al);\n+  void ldrexd(Register dst1, Register dst2, Register src, Condition cond = al);\n+  void strexd(Register res, Register src1, Register src2, Register dst,\n+              Condition cond = al);\n \n   // Preload instructions\n   void pld(const MemOperand& address);\n@@ -1070,16 +1063,6 @@ class Assembler : public AssemblerBase {\n   void vmov(const DwVfpRegister dst,\n             const DwVfpRegister src,\n             const Condition cond = al);\n-  // TODO(bbudge) Replace uses of these with the more general core register to\n-  // scalar register vmov's.\n-  void vmov(const DwVfpRegister dst,\n-            const VmovIndex index,\n-            const Register src,\n-            const Condition cond = al);\n-  void vmov(const Register dst,\n-            const VmovIndex index,\n-            const DwVfpRegister src,\n-            const Condition cond = al);\n   void vmov(const DwVfpRegister dst,\n             const Register src1,\n             const Register src2,\n@@ -1637,9 +1620,6 @@ class Assembler : public AssemblerBase {\n   std::vector<ConstantPoolEntry> pending_32_bit_constants_;\n   std::vector<ConstantPoolEntry> pending_64_bit_constants_;\n \n-  // Map of address of handle to index in pending_32_bit_constants_.\n-  std::map<Address, int> handle_to_index_map_;\n-\n   // Scratch registers available for use by the Assembler.\n   RegList scratch_register_list_;\n   VfpRegList scratch_vfp_register_list_;\n@@ -1705,7 +1685,6 @@ class Assembler : public AssemblerBase {\n   void RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data = 0);\n   void ConstantPoolAddEntry(int position, RelocInfo::Mode rmode,\n                             intptr_t value);\n-  void ConstantPoolAddEntry(int position, Double value);\n   void AllocateAndInstallRequestedHeapObjects(Isolate* isolate);\n \n   friend class RelocInfo;"
        },
        {
            "sha": "bb5becefb854a0f1209f8307ac8fc33fd6f5cf4b",
            "filename": "deps/v8/src/arm/code-stubs-arm.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -4,7 +4,7 @@\n \n #if V8_TARGET_ARCH_ARM\n \n-#include \"src/api-arguments.h\"\n+#include \"src/api-arguments-inl.h\"\n #include \"src/assembler-inl.h\"\n #include \"src/base/bits.h\"\n #include \"src/bootstrapper.h\"\n@@ -227,7 +227,7 @@ void ProfileEntryHookStub::MaybeCallEntryHookDelayed(TurboAssembler* tasm,\n   if (tasm->isolate()->function_entry_hook() != nullptr) {\n     tasm->MaybeCheckConstPool();\n     PredictableCodeSizeScope predictable(\n-        tasm, tasm->CallStubSize() + 2 * Assembler::kInstrSize);\n+        tasm, TurboAssembler::kCallStubSize + 2 * kInstrSize);\n     tasm->push(lr);\n     tasm->CallStubDelayed(new (zone) ProfileEntryHookStub(nullptr));\n     tasm->pop(lr);\n@@ -239,7 +239,7 @@ void ProfileEntryHookStub::MaybeCallEntryHook(MacroAssembler* masm) {\n     ProfileEntryHookStub stub(masm->isolate());\n     masm->MaybeCheckConstPool();\n     PredictableCodeSizeScope predictable(\n-        masm, masm->CallStubSize() + 2 * Assembler::kInstrSize);\n+        masm, TurboAssembler::kCallStubSize + 2 * kInstrSize);\n     __ push(lr);\n     __ CallStub(&stub);\n     __ pop(lr);\n@@ -249,8 +249,7 @@ void ProfileEntryHookStub::MaybeCallEntryHook(MacroAssembler* masm) {\n \n void ProfileEntryHookStub::Generate(MacroAssembler* masm) {\n   // The entry hook is a \"push lr\" instruction, followed by a call.\n-  const int32_t kReturnAddressDistanceFromFunctionStart =\n-      3 * Assembler::kInstrSize;\n+  const int32_t kReturnAddressDistanceFromFunctionStart = 3 * kInstrSize;\n \n   // This should contain all kCallerSaved registers.\n   const RegList kSavedRegs ="
        },
        {
            "sha": "39f756d152c4a344cce3972a656b155642ca1dd4",
            "filename": "deps/v8/src/arm/codegen-arm.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -167,7 +167,7 @@ MemCopyUint8Function CreateMemCopyUint8Function(Isolate* isolate,\n \n   CodeDesc desc;\n   masm.GetCode(isolate, &desc);\n-  DCHECK(!RelocInfo::RequiresRelocation(desc));\n+  DCHECK(!RelocInfo::RequiresRelocationAfterCodegen(desc));\n \n   Assembler::FlushICache(buffer, allocated);\n   CHECK(SetPermissions(buffer, allocated, PageAllocator::kReadExecute));\n@@ -283,7 +283,7 @@ UnaryMathFunctionWithIsolate CreateSqrtFunction(Isolate* isolate) {\n \n   CodeDesc desc;\n   masm.GetCode(isolate, &desc);\n-  DCHECK(!RelocInfo::RequiresRelocation(desc));\n+  DCHECK(!RelocInfo::RequiresRelocationAfterCodegen(desc));\n \n   Assembler::FlushICache(buffer, allocated);\n   CHECK(SetPermissions(buffer, allocated, PageAllocator::kReadExecute));"
        },
        {
            "sha": "b012340418217a4603efb8de081d85f44c9e62b7",
            "filename": "deps/v8/src/arm/constants-arm.h",
            "status": "modified",
            "additions": 4,
            "deletions": 31,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fconstants-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fconstants-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fconstants-arm.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -105,31 +105,6 @@ inline Condition NegateCondition(Condition cond) {\n }\n \n \n-// Commute a condition such that {a cond b == b cond' a}.\n-inline Condition CommuteCondition(Condition cond) {\n-  switch (cond) {\n-    case lo:\n-      return hi;\n-    case hi:\n-      return lo;\n-    case hs:\n-      return ls;\n-    case ls:\n-      return hs;\n-    case lt:\n-      return gt;\n-    case gt:\n-      return lt;\n-    case ge:\n-      return le;\n-    case le:\n-      return ge;\n-    default:\n-      return cond;\n-  }\n-}\n-\n-\n // -----------------------------------------------------------------------------\n // Instructions encoding.\n \n@@ -461,14 +436,12 @@ inline Hint NegateHint(Hint ignored) { return no_hint; }\n //   return ((type == 0) || (type == 1)) && instr->HasS();\n // }\n //\n+\n+constexpr uint8_t kInstrSize = 4;\n+constexpr uint8_t kInstrSizeLog2 = 2;\n+\n class Instruction {\n  public:\n-  enum {\n-    kInstrSize = 4,\n-    kInstrSizeLog2 = 2,\n-    kPCReadOffset = 8\n-  };\n-\n   // Difference between address of current opcode and value read from pc\n   // register.\n   static constexpr int kPcLoadDelta = 8;"
        },
        {
            "sha": "0c6ef132f815dc08b7ed1652fedc9133af1557f1",
            "filename": "deps/v8/src/arm/disasm-arm.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 16,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fdisasm-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fdisasm-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fdisasm-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -669,7 +669,7 @@ int Decoder::FormatOption(Instruction* instr, const char* format) {\n     case 'A': {\n       // Print pc-relative address.\n       int offset = instr->Offset12Value();\n-      byte* pc = reinterpret_cast<byte*>(instr) + Instruction::kPCReadOffset;\n+      byte* pc = reinterpret_cast<byte*>(instr) + Instruction::kPcLoadDelta;\n       byte* addr;\n       switch (instr->PUField()) {\n         case db_x: {\n@@ -786,6 +786,9 @@ void Decoder::DecodeType01(Instruction* instr) {\n               case 0:\n                 Format(instr, \"ldrex'cond 'rt, ['rn]\");\n                 break;\n+              case 1:\n+                Format(instr, \"ldrexd'cond 'rt, ['rn]\");\n+                break;\n               case 2:\n                 Format(instr, \"ldrexb'cond 'rt, ['rn]\");\n                 break;\n@@ -804,6 +807,9 @@ void Decoder::DecodeType01(Instruction* instr) {\n               case 0:\n                 Format(instr, \"strex'cond 'rd, 'rm, ['rn]\");\n                 break;\n+              case 1:\n+                Format(instr, \"strexd'cond 'rd, 'rm, ['rn]\");\n+                break;\n               case 2:\n                 Format(instr, \"strexb'cond 'rd, 'rm, ['rn]\");\n                 break;\n@@ -1194,6 +1200,9 @@ void Decoder::DecodeType3(Instruction* instr) {\n                     }\n                   }\n                 }\n+              } else if (instr->Bits(27, 16) == 0x6BF &&\n+                         instr->Bits(11, 4) == 0xF3) {\n+                Format(instr, \"rev'cond 'rd, 'rm\");\n               } else {\n                 UNREACHABLE();\n               }\n@@ -1416,7 +1425,7 @@ int Decoder::DecodeType7(Instruction* instr) {\n         break;\n     }\n   }\n-  return Instruction::kInstrSize;\n+  return kInstrSize;\n }\n \n \n@@ -2599,14 +2608,14 @@ int Decoder::InstructionDecode(byte* instr_ptr) {\n                               instr->InstructionBits());\n   if (instr->ConditionField() == kSpecialCondition) {\n     DecodeSpecialCondition(instr);\n-    return Instruction::kInstrSize;\n+    return kInstrSize;\n   }\n   int instruction_bits = *(reinterpret_cast<int*>(instr_ptr));\n   if ((instruction_bits & kConstantPoolMarkerMask) == kConstantPoolMarker) {\n     out_buffer_pos_ += SNPrintF(out_buffer_ + out_buffer_pos_,\n                                 \"constant pool begin (length %d)\",\n                                 DecodeConstantPoolLength(instruction_bits));\n-    return Instruction::kInstrSize;\n+    return kInstrSize;\n   }\n   switch (instr->TypeValue()) {\n     case 0:\n@@ -2643,7 +2652,7 @@ int Decoder::InstructionDecode(byte* instr_ptr) {\n       break;\n     }\n   }\n-  return Instruction::kInstrSize;\n+  return kInstrSize;\n }\n \n \n@@ -2693,13 +2702,6 @@ const char* NameConverter::NameInCode(byte* addr) const {\n \n //------------------------------------------------------------------------------\n \n-Disassembler::Disassembler(const NameConverter& converter)\n-    : converter_(converter) {}\n-\n-\n-Disassembler::~Disassembler() {}\n-\n-\n int Disassembler::InstructionDecode(v8::internal::Vector<char> buffer,\n                                     byte* instruction) {\n   v8::internal::Decoder d(converter_, buffer);\n@@ -2711,10 +2713,10 @@ int Disassembler::ConstantPoolSizeAt(byte* instruction) {\n   return v8::internal::Decoder::ConstantPoolSizeAt(instruction);\n }\n \n-\n-void Disassembler::Disassemble(FILE* f, byte* begin, byte* end) {\n+void Disassembler::Disassemble(FILE* f, byte* begin, byte* end,\n+                               UnimplementedOpcodeAction unimplemented_action) {\n   NameConverter converter;\n-  Disassembler d(converter);\n+  Disassembler d(converter, unimplemented_action);\n   for (byte* pc = begin; pc < end;) {\n     v8::internal::EmbeddedVector<char, 128> buffer;\n     buffer[0] = '\\0';\n@@ -2725,7 +2727,6 @@ void Disassembler::Disassemble(FILE* f, byte* begin, byte* end) {\n   }\n }\n \n-\n }  // namespace disasm\n \n #endif  // V8_TARGET_ARCH_ARM"
        },
        {
            "sha": "8af455fc6e4d3d87d813f47629c18a0c0d527c98",
            "filename": "deps/v8/src/arm/interface-descriptors-arm.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -245,30 +245,6 @@ void InterpreterPushArgsThenConstructDescriptor::InitializePlatformSpecific(\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n-namespace {\n-\n-void InterpreterCEntryDescriptor_InitializePlatformSpecific(\n-    CallInterfaceDescriptorData* data) {\n-  Register registers[] = {\n-      r0,  // argument count (argc)\n-      r2,  // address of first argument (argv)\n-      r1   // the runtime function to call\n-  };\n-  data->InitializePlatformSpecific(arraysize(registers), registers);\n-}\n-\n-}  // namespace\n-\n-void InterpreterCEntry1Descriptor::InitializePlatformSpecific(\n-    CallInterfaceDescriptorData* data) {\n-  InterpreterCEntryDescriptor_InitializePlatformSpecific(data);\n-}\n-\n-void InterpreterCEntry2Descriptor::InitializePlatformSpecific(\n-    CallInterfaceDescriptorData* data) {\n-  InterpreterCEntryDescriptor_InitializePlatformSpecific(data);\n-}\n-\n void ResumeGeneratorDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   Register registers[] = {"
        },
        {
            "sha": "09db465d598b0a855b636864a590c3589c4caff8",
            "filename": "deps/v8/src/arm/macro-assembler-arm.cc",
            "status": "modified",
            "additions": 28,
            "deletions": 91,
            "changes": 119,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -24,6 +24,7 @@\n #include \"src/register-configuration.h\"\n #include \"src/runtime/runtime.h\"\n #include \"src/snapshot/snapshot.h\"\n+#include \"src/wasm/wasm-code-manager.h\"\n \n #include \"src/arm/macro-assembler-arm.h\"\n \n@@ -172,7 +173,6 @@ void TurboAssembler::Jump(Register target, Condition cond) { bx(target, cond); }\n \n void TurboAssembler::Jump(intptr_t target, RelocInfo::Mode rmode,\n                           Condition cond) {\n-  DCHECK(RelocInfo::IsCodeTarget(rmode));\n   mov(pc, Operand(target, rmode), LeaveCC, cond);\n }\n \n@@ -193,8 +193,7 @@ void TurboAssembler::Jump(Handle<Code> code, RelocInfo::Mode rmode,\n     if (target_is_isolate_independent_builtin &&\n         options().use_pc_relative_calls_and_jumps) {\n       int32_t code_target_index = AddCodeTarget(code);\n-      b(code_target_index * Instruction::kInstrSize, cond,\n-        RelocInfo::RELATIVE_CODE_TARGET);\n+      b(code_target_index * kInstrSize, cond, RelocInfo::RELATIVE_CODE_TARGET);\n       return;\n     } else if (root_array_available_ && options().isolate_independent_code) {\n       UseScratchRegisterScope temps(this);\n@@ -206,6 +205,7 @@ void TurboAssembler::Jump(Handle<Code> code, RelocInfo::Mode rmode,\n     } else if (target_is_isolate_independent_builtin &&\n                options().inline_offheap_trampolines) {\n       // Inline the trampoline.\n+      RecordCommentForOffHeapTrampoline(builtin_index);\n       EmbeddedData d = EmbeddedData::FromBlob();\n       Address entry = d.InstructionStartOfBuiltin(builtin_index);\n       // Use ip directly instead of using UseScratchRegisterScope, as we do not\n@@ -219,29 +219,10 @@ void TurboAssembler::Jump(Handle<Code> code, RelocInfo::Mode rmode,\n   Jump(static_cast<intptr_t>(code.address()), rmode, cond);\n }\n \n-int TurboAssembler::CallSize(Register target, Condition cond) {\n-  return kInstrSize;\n-}\n-\n void TurboAssembler::Call(Register target, Condition cond) {\n   // Block constant pool for the call instruction sequence.\n   BlockConstPoolScope block_const_pool(this);\n-  Label start;\n-  bind(&start);\n   blx(target, cond);\n-  DCHECK_EQ(CallSize(target, cond), SizeOfCodeGeneratedSince(&start));\n-}\n-\n-int TurboAssembler::CallSize(Address target, RelocInfo::Mode rmode,\n-                             Condition cond) {\n-  Instr mov_instr = cond | MOV | LeaveCC;\n-  Operand mov_operand = Operand(target, rmode);\n-  return kInstrSize +\n-         mov_operand.InstructionsRequired(this, mov_instr) * kInstrSize;\n-}\n-\n-int TurboAssembler::CallStubSize() {\n-  return CallSize(Handle<Code>(), RelocInfo::CODE_TARGET, al);\n }\n \n void TurboAssembler::Call(Address target, RelocInfo::Mode rmode, Condition cond,\n@@ -251,20 +232,12 @@ void TurboAssembler::Call(Address target, RelocInfo::Mode rmode, Condition cond,\n   if (check_constant_pool) MaybeCheckConstPool();\n   // Block constant pool for the call instruction sequence.\n   BlockConstPoolScope block_const_pool(this);\n-  Label start;\n-  bind(&start);\n \n   bool old_predictable_code_size = predictable_code_size();\n   if (mode == NEVER_INLINE_TARGET_ADDRESS) {\n     set_predictable_code_size(true);\n   }\n \n-#ifdef DEBUG\n-  // Check the expected size before generating code to ensure we assume the same\n-  // constant pool availability (e.g., whether constant pool is full or not).\n-  int expected_size = CallSize(target, rmode, cond);\n-#endif\n-\n   // Use ip directly instead of using UseScratchRegisterScope, as we do not\n   // preserve scratch registers across calls.\n \n@@ -282,17 +255,11 @@ void TurboAssembler::Call(Address target, RelocInfo::Mode rmode, Condition cond,\n   mov(ip, Operand(target, rmode));\n   blx(ip, cond);\n \n-  DCHECK_EQ(expected_size, SizeOfCodeGeneratedSince(&start));\n   if (mode == NEVER_INLINE_TARGET_ADDRESS) {\n     set_predictable_code_size(old_predictable_code_size);\n   }\n }\n \n-int TurboAssembler::CallSize(Handle<Code> code, RelocInfo::Mode rmode,\n-                             Condition cond) {\n-  return CallSize(code.address(), rmode, cond);\n-}\n-\n void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode,\n                           Condition cond, TargetAddressStorageMode mode,\n                           bool check_constant_pool) {\n@@ -305,8 +272,7 @@ void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode,\n     if (target_is_isolate_independent_builtin &&\n         options().use_pc_relative_calls_and_jumps) {\n       int32_t code_target_index = AddCodeTarget(code);\n-      bl(code_target_index * Instruction::kInstrSize, cond,\n-         RelocInfo::RELATIVE_CODE_TARGET);\n+      bl(code_target_index * kInstrSize, cond, RelocInfo::RELATIVE_CODE_TARGET);\n       return;\n     } else if (root_array_available_ && options().isolate_independent_code) {\n       // Use ip directly instead of using UseScratchRegisterScope, as we do not\n@@ -318,7 +284,7 @@ void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode,\n     } else if (target_is_isolate_independent_builtin &&\n                options().inline_offheap_trampolines) {\n       // Inline the trampoline.\n-      DCHECK(Builtins::IsBuiltinId(builtin_index));\n+      RecordCommentForOffHeapTrampoline(builtin_index);\n       EmbeddedData d = EmbeddedData::FromBlob();\n       Address entry = d.InstructionStartOfBuiltin(builtin_index);\n       // Use ip directly instead of using UseScratchRegisterScope, as we do not\n@@ -867,7 +833,7 @@ void TurboAssembler::VmovHigh(Register dst, DwVfpRegister src) {\n     const LowDwVfpRegister loc = LowDwVfpRegister::from_code(src.code());\n     vmov(dst, loc.high());\n   } else {\n-    vmov(dst, VmovIndexHi, src);\n+    vmov(NeonS32, dst, src, 1);\n   }\n }\n \n@@ -876,7 +842,7 @@ void TurboAssembler::VmovHigh(DwVfpRegister dst, Register src) {\n     const LowDwVfpRegister loc = LowDwVfpRegister::from_code(dst.code());\n     vmov(loc.high(), src);\n   } else {\n-    vmov(dst, VmovIndexHi, src);\n+    vmov(NeonS32, dst, 1, src);\n   }\n }\n \n@@ -885,7 +851,7 @@ void TurboAssembler::VmovLow(Register dst, DwVfpRegister src) {\n     const LowDwVfpRegister loc = LowDwVfpRegister::from_code(src.code());\n     vmov(dst, loc.low());\n   } else {\n-    vmov(dst, VmovIndexLo, src);\n+    vmov(NeonS32, dst, src, 0);\n   }\n }\n \n@@ -894,7 +860,7 @@ void TurboAssembler::VmovLow(DwVfpRegister dst, Register src) {\n     const LowDwVfpRegister loc = LowDwVfpRegister::from_code(dst.code());\n     vmov(loc.low(), src);\n   } else {\n-    vmov(dst, VmovIndexLo, src);\n+    vmov(NeonS32, dst, 0, src);\n   }\n }\n \n@@ -1698,13 +1664,10 @@ void TurboAssembler::CallStubDelayed(CodeStub* stub) {\n \n   // Block constant pool for the call instruction sequence.\n   BlockConstPoolScope block_const_pool(this);\n-  Label start;\n-  bind(&start);\n \n #ifdef DEBUG\n-  // Check the expected size before generating code to ensure we assume the same\n-  // constant pool availability (e.g., whether constant pool is full or not).\n-  int expected_size = CallStubSize();\n+  Label start;\n+  bind(&start);\n #endif\n \n   // Call sequence on V7 or later may be :\n@@ -1721,7 +1684,7 @@ void TurboAssembler::CallStubDelayed(CodeStub* stub) {\n   mov(ip, Operand::EmbeddedCode(stub));\n   blx(ip, al);\n \n-  DCHECK_EQ(expected_size, SizeOfCodeGeneratedSince(&start));\n+  DCHECK_EQ(kCallStubSize, SizeOfCodeGeneratedSince(&start));\n }\n \n void MacroAssembler::TailCallStub(CodeStub* stub, Condition cond) {\n@@ -1917,6 +1880,18 @@ void TurboAssembler::Abort(AbortReason reason) {\n     return;\n   }\n \n+  if (should_abort_hard()) {\n+    // We don't care if we constructed a frame. Just pretend we did.\n+    FrameScope assume_frame(this, StackFrame::NONE);\n+    Move32BitImmediate(r0, Operand(static_cast<int>(reason)));\n+    PrepareCallCFunction(1, 0, r1);\n+    Move(r1, ExternalReference::abort_with_reason());\n+    // Use Call directly to avoid any unneeded overhead. The function won't\n+    // return anyway.\n+    Call(r1);\n+    return;\n+  }\n+\n   Move(r1, Smi::FromInt(static_cast<int>(reason)));\n \n   // Disable stub call restrictions to always allow calls to abort.\n@@ -1929,17 +1904,6 @@ void TurboAssembler::Abort(AbortReason reason) {\n     Call(BUILTIN_CODE(isolate(), Abort), RelocInfo::CODE_TARGET);\n   }\n   // will not return here\n-  if (is_const_pool_blocked()) {\n-    // If the calling code cares about the exact number of\n-    // instructions generated, we insert padding here to keep the size\n-    // of the Abort macro constant.\n-    static const int kExpectedAbortInstructions = 7;\n-    int abort_instructions = InstructionsGeneratedSince(&abort_start);\n-    DCHECK_LE(abort_instructions, kExpectedAbortInstructions);\n-    while (abort_instructions++ < kExpectedAbortInstructions) {\n-      nop();\n-    }\n-  }\n }\n \n void MacroAssembler::LoadNativeContextSlot(int index, Register dst) {\n@@ -2285,21 +2249,22 @@ int TurboAssembler::CalculateStackPassedWords(int num_reg_arguments,\n }\n \n void TurboAssembler::PrepareCallCFunction(int num_reg_arguments,\n-                                          int num_double_arguments) {\n+                                          int num_double_arguments,\n+                                          Register scratch) {\n   int frame_alignment = ActivationFrameAlignment();\n   int stack_passed_arguments = CalculateStackPassedWords(\n       num_reg_arguments, num_double_arguments);\n   if (frame_alignment > kPointerSize) {\n     UseScratchRegisterScope temps(this);\n-    Register scratch = temps.Acquire();\n+    if (!scratch.is_valid()) scratch = temps.Acquire();\n     // Make stack end at alignment and make room for num_arguments - 4 words\n     // and the original value of sp.\n     mov(scratch, sp);\n     sub(sp, sp, Operand((stack_passed_arguments + 1) * kPointerSize));\n     DCHECK(base::bits::IsPowerOfTwo(frame_alignment));\n     and_(sp, sp, Operand(-frame_alignment));\n     str(scratch, MemOperand(sp, stack_passed_arguments * kPointerSize));\n-  } else {\n+  } else if (stack_passed_arguments > 0) {\n     sub(sp, sp, Operand(stack_passed_arguments * kPointerSize));\n   }\n }\n@@ -2421,34 +2386,6 @@ Register GetRegisterThatIsNotOneOf(Register reg1,\n   UNREACHABLE();\n }\n \n-#ifdef DEBUG\n-bool AreAliased(Register reg1,\n-                Register reg2,\n-                Register reg3,\n-                Register reg4,\n-                Register reg5,\n-                Register reg6,\n-                Register reg7,\n-                Register reg8) {\n-  int n_of_valid_regs = reg1.is_valid() + reg2.is_valid() +\n-      reg3.is_valid() + reg4.is_valid() + reg5.is_valid() + reg6.is_valid() +\n-      reg7.is_valid() + reg8.is_valid();\n-\n-  RegList regs = 0;\n-  if (reg1.is_valid()) regs |= reg1.bit();\n-  if (reg2.is_valid()) regs |= reg2.bit();\n-  if (reg3.is_valid()) regs |= reg3.bit();\n-  if (reg4.is_valid()) regs |= reg4.bit();\n-  if (reg5.is_valid()) regs |= reg5.bit();\n-  if (reg6.is_valid()) regs |= reg6.bit();\n-  if (reg7.is_valid()) regs |= reg7.bit();\n-  if (reg8.is_valid()) regs |= reg8.bit();\n-  int n_of_non_aliasing_regs = NumRegs(regs);\n-\n-  return n_of_valid_regs != n_of_non_aliasing_regs;\n-}\n-#endif\n-\n void TurboAssembler::ComputeCodeStartAddress(Register dst) {\n   // We can use the register pc - 8 for the address of the current instruction.\n   sub(dst, pc, Operand(pc_offset() + Instruction::kPcLoadDelta));"
        },
        {
            "sha": "055b6e6fbc86a9dfba2564fba377b6e39f918350",
            "filename": "deps/v8/src/arm/macro-assembler-arm.h",
            "status": "modified",
            "additions": 5,
            "deletions": 42,
            "changes": 47,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -36,6 +36,7 @@ constexpr Register kJavaScriptCallExtraArg1Register = r2;\n constexpr Register kOffHeapTrampolineRegister = ip;\n constexpr Register kRuntimeCallFunctionRegister = r1;\n constexpr Register kRuntimeCallArgCountRegister = r0;\n+constexpr Register kRuntimeCallArgvRegister = r2;\n constexpr Register kWasmInstanceRegister = r3;\n \n // ----------------------------------------------------------------------------\n@@ -51,15 +52,6 @@ inline MemOperand FieldMemOperand(Register object, int offset) {\n constexpr Register cp = r7;              // JavaScript context pointer.\n constexpr Register kRootRegister = r10;  // Roots array pointer.\n \n-// Flags used for AllocateHeapNumber\n-enum TaggingMode {\n-  // Tag the result.\n-  TAG_RESULT,\n-  // Don't tag\n-  DONT_TAG_RESULT\n-};\n-\n-\n enum RememberedSetAction { EMIT_REMEMBERED_SET, OMIT_REMEMBERED_SET };\n enum SmiCheck { INLINE_SMI_CHECK, OMIT_SMI_CHECK };\n enum LinkRegisterStatus { kLRHasNotBeenSaved, kLRHasBeenSaved };\n@@ -72,25 +64,12 @@ Register GetRegisterThatIsNotOneOf(Register reg1,\n                                    Register reg5 = no_reg,\n                                    Register reg6 = no_reg);\n \n-\n-#ifdef DEBUG\n-bool AreAliased(Register reg1,\n-                Register reg2,\n-                Register reg3 = no_reg,\n-                Register reg4 = no_reg,\n-                Register reg5 = no_reg,\n-                Register reg6 = no_reg,\n-                Register reg7 = no_reg,\n-                Register reg8 = no_reg);\n-#endif\n-\n-\n enum TargetAddressStorageMode {\n   CAN_INLINE_TARGET_ADDRESS,\n   NEVER_INLINE_TARGET_ADDRESS\n };\n \n-class TurboAssembler : public TurboAssemblerBase {\n+class V8_EXPORT_PRIVATE TurboAssembler : public TurboAssemblerBase {\n  public:\n   TurboAssembler(Isolate* isolate, const AssemblerOptions& options,\n                  void* buffer, int buffer_size,\n@@ -259,8 +238,8 @@ class TurboAssembler : public TurboAssemblerBase {\n   // C++ code.\n   // Needs a scratch register to do some arithmetic. This register will be\n   // trashed.\n-  void PrepareCallCFunction(int num_reg_arguments,\n-                            int num_double_registers = 0);\n+  void PrepareCallCFunction(int num_reg_arguments, int num_double_registers = 0,\n+                            Register scratch = no_reg);\n \n   // Removes current frame and its arguments from the stack preserving\n   // the arguments and a return address pushed to the stack for the next call.\n@@ -324,16 +303,7 @@ class TurboAssembler : public TurboAssemblerBase {\n   void LoadRootRegisterOffset(Register destination, intptr_t offset) override;\n   void LoadRootRelative(Register destination, int32_t offset) override;\n \n-  // Returns the size of a call in instructions. Note, the value returned is\n-  // only valid as long as no entries are added to the constant pool between\n-  // checking the call size and emitting the actual call.\n-  static int CallSize(Register target, Condition cond = al);\n-  int CallSize(Address target, RelocInfo::Mode rmode, Condition cond = al);\n-  int CallSize(Handle<Code> code,\n-               RelocInfo::Mode rmode = RelocInfo::CODE_TARGET,\n-               Condition cond = al);\n-  int CallStubSize();\n-\n+  static constexpr int kCallStubSize = 2 * kInstrSize;\n   void CallStubDelayed(CodeStub* stub);\n \n   // Call a runtime routine. This expects {centry} to contain a fitting CEntry\n@@ -618,13 +588,6 @@ class MacroAssembler : public TurboAssembler {\n   // ---------------------------------------------------------------------------\n   // GC Support\n \n-  // Record in the remembered set the fact that we have a pointer to new space\n-  // at the address pointed to by the addr register.  Only works if addr is not\n-  // in new space.\n-  void RememberedSetHelper(Register object,  // Used for debug code.\n-                           Register addr, Register scratch,\n-                           SaveFPRegsMode save_fp);\n-\n   // Check if object is in new space.  Jumps if the object is not in new space.\n   // The register scratch can be object itself, but scratch will be clobbered.\n   void JumpIfNotInNewSpace(Register object, Register scratch, Label* branch) {"
        },
        {
            "sha": "b1e84218762bed6413e4eecd4a0f2080c4805bb0",
            "filename": "deps/v8/src/arm/simulator-arm.cc",
            "status": "modified",
            "additions": 90,
            "deletions": 58,
            "changes": 148,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -359,7 +359,7 @@ void ArmDebugger::Debug() {\n \n         if (argc == 1) {\n           cur = reinterpret_cast<byte*>(sim_->get_pc());\n-          end = cur + (10 * Instruction::kInstrSize);\n+          end = cur + (10 * kInstrSize);\n         } else if (argc == 2) {\n           int regnum = Registers::Number(arg1);\n           if (regnum != kNoRegister || strncmp(arg1, \"0x\", 2) == 0) {\n@@ -368,23 +368,23 @@ void ArmDebugger::Debug() {\n             if (GetValue(arg1, &value)) {\n               cur = reinterpret_cast<byte*>(value);\n               // Disassemble 10 instructions at <arg1>.\n-              end = cur + (10 * Instruction::kInstrSize);\n+              end = cur + (10 * kInstrSize);\n             }\n           } else {\n             // The argument is the number of instructions.\n             int32_t value;\n             if (GetValue(arg1, &value)) {\n               cur = reinterpret_cast<byte*>(sim_->get_pc());\n               // Disassemble <arg1> instructions.\n-              end = cur + (value * Instruction::kInstrSize);\n+              end = cur + (value * kInstrSize);\n             }\n           }\n         } else {\n           int32_t value1;\n           int32_t value2;\n           if (GetValue(arg1, &value1) && GetValue(arg2, &value2)) {\n             cur = reinterpret_cast<byte*>(value1);\n-            end = cur + (value2 * Instruction::kInstrSize);\n+            end = cur + (value2 * kInstrSize);\n           }\n         }\n \n@@ -427,7 +427,7 @@ void ArmDebugger::Debug() {\n         PrintF(\"INEXACT flag: %d;\\n\", sim_->inexact_vfp_flag_);\n       } else if (strcmp(cmd, \"stop\") == 0) {\n         int32_t value;\n-        intptr_t stop_pc = sim_->get_pc() - Instruction::kInstrSize;\n+        intptr_t stop_pc = sim_->get_pc() - kInstrSize;\n         Instruction* stop_instr = reinterpret_cast<Instruction*>(stop_pc);\n         if ((argc == 2) && (strcmp(arg1, \"unstop\") == 0)) {\n           // Remove the current stop.\n@@ -632,9 +632,8 @@ void Simulator::CheckICache(base::CustomMatcherHashMap* i_cache,\n   char* cached_line = cache_page->CachedData(offset & ~CachePage::kLineMask);\n   if (cache_hit) {\n     // Check that the data in memory matches the contents of the I-cache.\n-    CHECK_EQ(0,\n-             memcmp(reinterpret_cast<void*>(instr),\n-                    cache_page->CachedData(offset), Instruction::kInstrSize));\n+    CHECK_EQ(0, memcmp(reinterpret_cast<void*>(instr),\n+                       cache_page->CachedData(offset), kInstrSize));\n   } else {\n     // Cache miss.  Load memory into the cache.\n     memcpy(cached_line, line, CachePage::kLineLength);\n@@ -736,7 +735,7 @@ int32_t Simulator::get_register(int reg) const {\n   // See: http://gcc.gnu.org/bugzilla/show_bug.cgi?id=43949\n   if (reg >= num_registers) return 0;\n   // End stupid code.\n-  return registers_[reg] + ((reg == pc) ? Instruction::kPCReadOffset : 0);\n+  return registers_[reg] + ((reg == pc) ? Instruction::kPcLoadDelta : 0);\n }\n \n \n@@ -931,8 +930,7 @@ void Simulator::TrashCallerSaveRegisters() {\n   registers_[12] = 0x50BAD4U;\n }\n \n-\n-int Simulator::ReadW(int32_t addr, Instruction* instr) {\n+int Simulator::ReadW(int32_t addr) {\n   // All supported ARM targets allow unaligned accesses, so we don't need to\n   // check the alignment here.\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n@@ -941,7 +939,7 @@ int Simulator::ReadW(int32_t addr, Instruction* instr) {\n   return *ptr;\n }\n \n-int Simulator::ReadExW(int32_t addr, Instruction* instr) {\n+int Simulator::ReadExW(int32_t addr) {\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n   local_monitor_.NotifyLoadExcl(addr, TransactionSize::Word);\n   global_monitor_.Pointer()->NotifyLoadExcl_Locked(addr,\n@@ -950,7 +948,7 @@ int Simulator::ReadExW(int32_t addr, Instruction* instr) {\n   return *ptr;\n }\n \n-void Simulator::WriteW(int32_t addr, int value, Instruction* instr) {\n+void Simulator::WriteW(int32_t addr, int value) {\n   // All supported ARM targets allow unaligned accesses, so we don't need to\n   // check the alignment here.\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n@@ -961,7 +959,7 @@ void Simulator::WriteW(int32_t addr, int value, Instruction* instr) {\n   *ptr = value;\n }\n \n-int Simulator::WriteExW(int32_t addr, int value, Instruction* instr) {\n+int Simulator::WriteExW(int32_t addr, int value) {\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n   if (local_monitor_.NotifyStoreExcl(addr, TransactionSize::Word) &&\n       global_monitor_.Pointer()->NotifyStoreExcl_Locked(\n@@ -974,7 +972,7 @@ int Simulator::WriteExW(int32_t addr, int value, Instruction* instr) {\n   }\n }\n \n-uint16_t Simulator::ReadHU(int32_t addr, Instruction* instr) {\n+uint16_t Simulator::ReadHU(int32_t addr) {\n   // All supported ARM targets allow unaligned accesses, so we don't need to\n   // check the alignment here.\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n@@ -983,7 +981,7 @@ uint16_t Simulator::ReadHU(int32_t addr, Instruction* instr) {\n   return *ptr;\n }\n \n-int16_t Simulator::ReadH(int32_t addr, Instruction* instr) {\n+int16_t Simulator::ReadH(int32_t addr) {\n   // All supported ARM targets allow unaligned accesses, so we don't need to\n   // check the alignment here.\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n@@ -992,7 +990,7 @@ int16_t Simulator::ReadH(int32_t addr, Instruction* instr) {\n   return *ptr;\n }\n \n-uint16_t Simulator::ReadExHU(int32_t addr, Instruction* instr) {\n+uint16_t Simulator::ReadExHU(int32_t addr) {\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n   local_monitor_.NotifyLoadExcl(addr, TransactionSize::HalfWord);\n   global_monitor_.Pointer()->NotifyLoadExcl_Locked(addr,\n@@ -1001,7 +999,7 @@ uint16_t Simulator::ReadExHU(int32_t addr, Instruction* instr) {\n   return *ptr;\n }\n \n-void Simulator::WriteH(int32_t addr, uint16_t value, Instruction* instr) {\n+void Simulator::WriteH(int32_t addr, uint16_t value) {\n   // All supported ARM targets allow unaligned accesses, so we don't need to\n   // check the alignment here.\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n@@ -1012,7 +1010,7 @@ void Simulator::WriteH(int32_t addr, uint16_t value, Instruction* instr) {\n   *ptr = value;\n }\n \n-void Simulator::WriteH(int32_t addr, int16_t value, Instruction* instr) {\n+void Simulator::WriteH(int32_t addr, int16_t value) {\n   // All supported ARM targets allow unaligned accesses, so we don't need to\n   // check the alignment here.\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n@@ -1023,7 +1021,7 @@ void Simulator::WriteH(int32_t addr, int16_t value, Instruction* instr) {\n   *ptr = value;\n }\n \n-int Simulator::WriteExH(int32_t addr, uint16_t value, Instruction* instr) {\n+int Simulator::WriteExH(int32_t addr, uint16_t value) {\n   base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n   if (local_monitor_.NotifyStoreExcl(addr, TransactionSize::HalfWord) &&\n       global_monitor_.Pointer()->NotifyStoreExcl_Locked(\n@@ -1099,6 +1097,14 @@ int32_t* Simulator::ReadDW(int32_t addr) {\n   return ptr;\n }\n \n+int32_t* Simulator::ReadExDW(int32_t addr) {\n+  base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n+  local_monitor_.NotifyLoadExcl(addr, TransactionSize::DoubleWord);\n+  global_monitor_.Pointer()->NotifyLoadExcl_Locked(addr,\n+                                                   &global_monitor_processor_);\n+  int32_t* ptr = reinterpret_cast<int32_t*>(addr);\n+  return ptr;\n+}\n \n void Simulator::WriteDW(int32_t addr, int32_t value1, int32_t value2) {\n   // All supported ARM targets allow unaligned accesses, so we don't need to\n@@ -1112,6 +1118,19 @@ void Simulator::WriteDW(int32_t addr, int32_t value1, int32_t value2) {\n   *ptr = value2;\n }\n \n+int Simulator::WriteExDW(int32_t addr, int32_t value1, int32_t value2) {\n+  base::LockGuard<base::Mutex> lock_guard(&global_monitor_.Pointer()->mutex);\n+  if (local_monitor_.NotifyStoreExcl(addr, TransactionSize::DoubleWord) &&\n+      global_monitor_.Pointer()->NotifyStoreExcl_Locked(\n+          addr, &global_monitor_processor_)) {\n+    intptr_t* ptr = reinterpret_cast<intptr_t*>(addr);\n+    *ptr++ = value1;\n+    *ptr = value2;\n+    return 0;\n+  } else {\n+    return 1;\n+  }\n+}\n \n // Returns the limit of the stack area to enable checking for stack overflows.\n uintptr_t Simulator::StackLimit(uintptr_t c_limit) const {\n@@ -1561,25 +1580,23 @@ void Simulator::HandleVList(Instruction* instr) {\n   for (int reg = vd; reg < vd + num_regs; reg++) {\n     if (precision == kSinglePrecision) {\n       if (load) {\n-        set_s_register_from_sinteger(\n-            reg, ReadW(reinterpret_cast<int32_t>(address), instr));\n+        set_s_register_from_sinteger(reg,\n+                                     ReadW(reinterpret_cast<int32_t>(address)));\n       } else {\n         WriteW(reinterpret_cast<int32_t>(address),\n-               get_sinteger_from_s_register(reg), instr);\n+               get_sinteger_from_s_register(reg));\n       }\n       address += 1;\n     } else {\n       if (load) {\n-        int32_t data[] = {\n-          ReadW(reinterpret_cast<int32_t>(address), instr),\n-          ReadW(reinterpret_cast<int32_t>(address + 1), instr)\n-        };\n+        int32_t data[] = {ReadW(reinterpret_cast<int32_t>(address)),\n+                          ReadW(reinterpret_cast<int32_t>(address + 1))};\n         set_d_register(reg, reinterpret_cast<uint32_t*>(data));\n       } else {\n         uint32_t data[2];\n         get_d_register(reg, data);\n-        WriteW(reinterpret_cast<int32_t>(address), data[0], instr);\n-        WriteW(reinterpret_cast<int32_t>(address + 1), data[1], instr);\n+        WriteW(reinterpret_cast<int32_t>(address), data[0]);\n+        WriteW(reinterpret_cast<int32_t>(address + 1), data[1]);\n       }\n       address += 2;\n     }\n@@ -2054,10 +2071,16 @@ void Simulator::DecodeType01(Instruction* instr) {\n             switch (instr->Bits(22, 21)) {\n               case 0: {\n                 // Format(instr, \"ldrex'cond 'rt, ['rn]\");\n-                int value = ReadExW(addr, instr);\n+                int value = ReadExW(addr);\n                 set_register(rt, value);\n                 break;\n               }\n+              case 1: {\n+                // Format(instr, \"ldrexd'cond 'rt, ['rn]\");\n+                int* rn_data = ReadExDW(addr);\n+                set_dw_register(rt, rn_data);\n+                break;\n+              }\n               case 2: {\n                 // Format(instr, \"ldrexb'cond 'rt, ['rn]\");\n                 uint8_t value = ReadExBU(addr);\n@@ -2066,7 +2089,7 @@ void Simulator::DecodeType01(Instruction* instr) {\n               }\n               case 3: {\n                 // Format(instr, \"ldrexh'cond 'rt, ['rn]\");\n-                uint16_t value = ReadExHU(addr, instr);\n+                uint16_t value = ReadExHU(addr);\n                 set_register(rt, value);\n                 break;\n               }\n@@ -2087,7 +2110,16 @@ void Simulator::DecodeType01(Instruction* instr) {\n               case 0: {\n                 // Format(instr, \"strex'cond 'rd, 'rm, ['rn]\");\n                 int value = get_register(rt);\n-                int status = WriteExW(addr, value, instr);\n+                int status = WriteExW(addr, value);\n+                set_register(rd, status);\n+                break;\n+              }\n+              case 1: {\n+                // Format(instr, \"strexd'cond 'rd, 'rm, ['rn]\");\n+                DCHECK_EQ(rt % 2, 0);\n+                int32_t value1 = get_register(rt);\n+                int32_t value2 = get_register(rt + 1);\n+                int status = WriteExDW(addr, value1, value2);\n                 set_register(rd, status);\n                 break;\n               }\n@@ -2101,7 +2133,7 @@ void Simulator::DecodeType01(Instruction* instr) {\n               case 3: {\n                 // Format(instr, \"strexh'cond 'rd, 'rm, ['rn]\");\n                 uint16_t value = get_register(rt);\n-                int status = WriteExH(addr, value, instr);\n+                int status = WriteExH(addr, value);\n                 set_register(rd, status);\n                 break;\n               }\n@@ -2223,19 +2255,19 @@ void Simulator::DecodeType01(Instruction* instr) {\n       } else if (instr->HasH()) {\n         if (instr->HasSign()) {\n           if (instr->HasL()) {\n-            int16_t val = ReadH(addr, instr);\n+            int16_t val = ReadH(addr);\n             set_register(rd, val);\n           } else {\n             int16_t val = get_register(rd);\n-            WriteH(addr, val, instr);\n+            WriteH(addr, val);\n           }\n         } else {\n           if (instr->HasL()) {\n-            uint16_t val = ReadHU(addr, instr);\n+            uint16_t val = ReadHU(addr);\n             set_register(rd, val);\n           } else {\n             uint16_t val = get_register(rd);\n-            WriteH(addr, val, instr);\n+            WriteH(addr, val);\n           }\n         }\n       } else {\n@@ -2272,7 +2304,7 @@ void Simulator::DecodeType01(Instruction* instr) {\n         case BLX: {\n           uint32_t old_pc = get_pc();\n           set_pc(get_register(rm));\n-          set_register(lr, old_pc + Instruction::kInstrSize);\n+          set_register(lr, old_pc + kInstrSize);\n           break;\n         }\n         case BKPT: {\n@@ -2604,9 +2636,9 @@ void Simulator::DecodeType2(Instruction* instr) {\n     }\n   } else {\n     if (instr->HasL()) {\n-      set_register(rd, ReadW(addr, instr));\n+      set_register(rd, ReadW(addr));\n     } else {\n-      WriteW(addr, get_register(rd), instr);\n+      WriteW(addr, get_register(rd));\n     }\n   }\n }\n@@ -2772,6 +2804,11 @@ void Simulator::DecodeType3(Instruction* instr) {\n                     set_register(rd, rn_val + static_cast<int16_t>(rm_val));\n                   }\n                 }\n+              } else if (instr->Bits(27, 16) == 0x6BF &&\n+                         instr->Bits(11, 4) == 0xF3) {\n+                // Rev.\n+                uint32_t rm_val = get_register(instr->RmValue());\n+                set_register(rd, ByteReverse(rm_val));\n               } else {\n                 UNREACHABLE();\n               }\n@@ -3021,9 +3058,9 @@ void Simulator::DecodeType3(Instruction* instr) {\n     }\n   } else {\n     if (instr->HasL()) {\n-      set_register(rd, ReadW(addr, instr));\n+      set_register(rd, ReadW(addr));\n     } else {\n-      WriteW(addr, get_register(rd), instr);\n+      WriteW(addr, get_register(rd));\n     }\n   }\n }\n@@ -3046,7 +3083,7 @@ void Simulator::DecodeType5(Instruction* instr) {\n   int off = (instr->SImmed24Value() << 2);\n   intptr_t pc_address = get_pc();\n   if (instr->HasLink()) {\n-    set_register(lr, pc_address + Instruction::kInstrSize);\n+    set_register(lr, pc_address + kInstrSize);\n   }\n   int pc_reg = get_register(pc);\n   set_pc(pc_reg + off);\n@@ -3790,10 +3827,10 @@ void Simulator::DecodeType6CoprocessorIns(Instruction* instr) {\n         DCHECK_EQ(address % 4, 0);\n         if (instr->HasL()) {\n           // Load single from memory: vldr.\n-          set_s_register_from_sinteger(vd, ReadW(address, instr));\n+          set_s_register_from_sinteger(vd, ReadW(address));\n         } else {\n           // Store single to memory: vstr.\n-          WriteW(address, get_sinteger_from_s_register(vd), instr);\n+          WriteW(address, get_sinteger_from_s_register(vd));\n         }\n         break;\n       }\n@@ -3846,17 +3883,14 @@ void Simulator::DecodeType6CoprocessorIns(Instruction* instr) {\n         DCHECK_EQ(address % 4, 0);\n         if (instr->HasL()) {\n           // Load double from memory: vldr.\n-          int32_t data[] = {\n-            ReadW(address, instr),\n-            ReadW(address + 4, instr)\n-          };\n+          int32_t data[] = {ReadW(address), ReadW(address + 4)};\n           set_d_register(vd, reinterpret_cast<uint32_t*>(data));\n         } else {\n           // Store double to memory: vstr.\n           uint32_t data[2];\n           get_d_register(vd, data);\n-          WriteW(address, data[0], instr);\n-          WriteW(address + 4, data[1], instr);\n+          WriteW(address, data[0]);\n+          WriteW(address + 4, data[1]);\n         }\n         break;\n       }\n@@ -5403,8 +5437,8 @@ void Simulator::DecodeSpecialCondition(Instruction* instr) {\n         while (r < regs) {\n           uint32_t data[2];\n           get_d_register(Vd + r, data);\n-          WriteW(address, data[0], instr);\n-          WriteW(address + 4, data[1], instr);\n+          WriteW(address, data[0]);\n+          WriteW(address + 4, data[1]);\n           address += 8;\n           r++;\n         }\n@@ -5443,8 +5477,8 @@ void Simulator::DecodeSpecialCondition(Instruction* instr) {\n         int r = 0;\n         while (r < regs) {\n           uint32_t data[2];\n-          data[0] = ReadW(address, instr);\n-          data[1] = ReadW(address + 4, instr);\n+          data[0] = ReadW(address);\n+          data[1] = ReadW(address + 4);\n           set_d_register(Vd + r, data);\n           address += 8;\n           r++;\n@@ -5697,12 +5731,10 @@ void Simulator::InstructionDecode(Instruction* instr) {\n     }\n   }\n   if (!pc_modified_) {\n-    set_register(pc, reinterpret_cast<int32_t>(instr)\n-                         + Instruction::kInstrSize);\n+    set_register(pc, reinterpret_cast<int32_t>(instr) + kInstrSize);\n   }\n }\n \n-\n void Simulator::Execute() {\n   // Get the PC to simulate. Cannot use the accessor here as we need the\n   // raw PC value and not the one used as input to arithmetic instructions."
        },
        {
            "sha": "69e5cdbe3d6691fc71c099231086e431aa01c135",
            "filename": "deps/v8/src/arm/simulator-arm.h",
            "status": "modified",
            "additions": 13,
            "deletions": 10,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -276,21 +276,23 @@ class Simulator : public SimulatorBase {\n   inline void WriteB(int32_t addr, int8_t value);\n   int WriteExB(int32_t addr, uint8_t value);\n \n-  inline uint16_t ReadHU(int32_t addr, Instruction* instr);\n-  inline int16_t ReadH(int32_t addr, Instruction* instr);\n-  uint16_t ReadExHU(int32_t addr, Instruction* instr);\n+  inline uint16_t ReadHU(int32_t addr);\n+  inline int16_t ReadH(int32_t addr);\n+  uint16_t ReadExHU(int32_t addr);\n   // Note: Overloaded on the sign of the value.\n-  inline void WriteH(int32_t addr, uint16_t value, Instruction* instr);\n-  inline void WriteH(int32_t addr, int16_t value, Instruction* instr);\n-  int WriteExH(int32_t addr, uint16_t value, Instruction* instr);\n+  inline void WriteH(int32_t addr, uint16_t value);\n+  inline void WriteH(int32_t addr, int16_t value);\n+  int WriteExH(int32_t addr, uint16_t value);\n \n-  inline int ReadW(int32_t addr, Instruction* instr);\n-  int ReadExW(int32_t addr, Instruction* instr);\n-  inline void WriteW(int32_t addr, int value, Instruction* instr);\n-  int WriteExW(int32_t addr, int value, Instruction* instr);\n+  inline int ReadW(int32_t addr);\n+  int ReadExW(int32_t addr);\n+  inline void WriteW(int32_t addr, int value);\n+  int WriteExW(int32_t addr, int value);\n \n   int32_t* ReadDW(int32_t addr);\n   void WriteDW(int32_t addr, int32_t value1, int32_t value2);\n+  int32_t* ReadExDW(int32_t addr);\n+  int WriteExDW(int32_t addr, int32_t value1, int32_t value2);\n \n   // Executing is handled based on the instruction type.\n   // Both type 0 and type 1 rolled into one.\n@@ -414,6 +416,7 @@ class Simulator : public SimulatorBase {\n     Byte = 1,\n     HalfWord = 2,\n     Word = 4,\n+    DoubleWord = 8,\n   };\n \n   // The least-significant bits of the address are ignored. The number of bits"
        },
        {
            "sha": "52df8143ef1311f4e09c60fa67915994746a7265",
            "filename": "deps/v8/src/arm64/assembler-arm64-inl.h",
            "status": "modified",
            "additions": 17,
            "deletions": 18,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -276,7 +276,7 @@ Operand::Operand(Register reg, Shift shift, unsigned shift_amount)\n       shift_amount_(shift_amount) {\n   DCHECK(reg.Is64Bits() || (shift_amount < kWRegSizeInBits));\n   DCHECK(reg.Is32Bits() || (shift_amount < kXRegSizeInBits));\n-  DCHECK(!reg.IsSP());\n+  DCHECK_IMPLIES(reg.IsSP(), shift_amount == 0);\n }\n \n \n@@ -535,7 +535,7 @@ Address Assembler::target_pointer_address_at(Address pc) {\n Address Assembler::target_address_at(Address pc, Address constant_pool) {\n   Instruction* instr = reinterpret_cast<Instruction*>(pc);\n   if (instr->IsLdrLiteralX()) {\n-    return Memory::Address_at(target_pointer_address_at(pc));\n+    return Memory<Address>(target_pointer_address_at(pc));\n   } else {\n     DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n     return reinterpret_cast<Address>(instr->ImmPCOffsetTarget());\n@@ -549,8 +549,8 @@ Handle<Code> Assembler::code_target_object_handle_at(Address pc) {\n         Assembler::target_address_at(pc, 0 /* unused */)));\n   } else {\n     DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n-    DCHECK_EQ(instr->ImmPCOffset() % kInstructionSize, 0);\n-    return GetCodeTarget(instr->ImmPCOffset() >> kInstructionSizeLog2);\n+    DCHECK_EQ(instr->ImmPCOffset() % kInstrSize, 0);\n+    return GetCodeTarget(instr->ImmPCOffset() >> kInstrSizeLog2);\n   }\n }\n \n@@ -570,7 +570,7 @@ Address Assembler::target_address_from_return_address(Address pc) {\n   // Call sequence on ARM64 is:\n   //  ldr ip0, #... @ load from literal pool\n   //  blr ip0\n-  Address candidate = pc - 2 * kInstructionSize;\n+  Address candidate = pc - 2 * kInstrSize;\n   Instruction* instr = reinterpret_cast<Instruction*>(candidate);\n   USE(instr);\n   DCHECK(instr->IsLdrLiteralX());\n@@ -598,10 +598,10 @@ void Assembler::deserialization_set_special_target_at(Address location,\n       target = location;\n     }\n     instr->SetBranchImmTarget(reinterpret_cast<Instruction*>(target));\n-    Assembler::FlushICache(location, kInstructionSize);\n+    Assembler::FlushICache(location, kInstrSize);\n   } else {\n     DCHECK_EQ(instr->InstructionBits(), 0);\n-    Memory::Address_at(location) = target;\n+    Memory<Address>(location) = target;\n     // Intuitively, we would think it is necessary to always flush the\n     // instruction cache after patching a target address in the code. However,\n     // in this case, only the constant pool contents change. The instruction\n@@ -612,15 +612,15 @@ void Assembler::deserialization_set_special_target_at(Address location,\n \n void Assembler::deserialization_set_target_internal_reference_at(\n     Address pc, Address target, RelocInfo::Mode mode) {\n-  Memory::Address_at(pc) = target;\n+  Memory<Address>(pc) = target;\n }\n \n void Assembler::set_target_address_at(Address pc, Address constant_pool,\n                                       Address target,\n                                       ICacheFlushMode icache_flush_mode) {\n   Instruction* instr = reinterpret_cast<Instruction*>(pc);\n   if (instr->IsLdrLiteralX()) {\n-    Memory::Address_at(target_pointer_address_at(pc)) = target;\n+    Memory<Address>(target_pointer_address_at(pc)) = target;\n     // Intuitively, we would think it is necessary to always flush the\n     // instruction cache after patching a target address in the code. However,\n     // in this case, only the constant pool contents change. The instruction\n@@ -635,7 +635,7 @@ void Assembler::set_target_address_at(Address pc, Address constant_pool,\n     }\n     instr->SetBranchImmTarget(reinterpret_cast<Instruction*>(target));\n     if (icache_flush_mode != SKIP_ICACHE_FLUSH) {\n-      Assembler::FlushICache(pc, kInstructionSize);\n+      Assembler::FlushICache(pc, kInstrSize);\n     }\n   }\n }\n@@ -711,8 +711,7 @@ void RelocInfo::set_target_object(Heap* heap, HeapObject* target,\n                                    reinterpret_cast<Address>(target),\n                                    icache_flush_mode);\n   if (write_barrier_mode == UPDATE_WRITE_BARRIER && host() != nullptr) {\n-    heap->incremental_marking()->RecordWriteIntoCode(host(), this, target);\n-    heap->RecordWriteIntoCode(host(), this, target);\n+    WriteBarrierForCode(host(), this, target);\n   }\n }\n \n@@ -731,7 +730,7 @@ void RelocInfo::set_target_external_reference(\n \n Address RelocInfo::target_internal_reference() {\n   DCHECK(rmode_ == INTERNAL_REFERENCE);\n-  return Memory::Address_at(pc_);\n+  return Memory<Address>(pc_);\n }\n \n \n@@ -762,9 +761,9 @@ Address RelocInfo::target_off_heap_target() {\n void RelocInfo::WipeOut() {\n   DCHECK(IsEmbeddedObject(rmode_) || IsCodeTarget(rmode_) ||\n          IsRuntimeEntry(rmode_) || IsExternalReference(rmode_) ||\n-         IsInternalReference(rmode_));\n+         IsInternalReference(rmode_) || IsOffHeapTarget(rmode_));\n   if (IsInternalReference(rmode_)) {\n-    Memory::Address_at(pc_) = kNullAddress;\n+    Memory<Address>(pc_) = kNullAddress;\n   } else {\n     Assembler::set_target_address_at(pc_, constant_pool_, kNullAddress);\n   }\n@@ -874,8 +873,8 @@ LoadLiteralOp Assembler::LoadLiteralOpFor(const CPURegister& rt) {\n int Assembler::LinkAndGetInstructionOffsetTo(Label* label) {\n   DCHECK_EQ(kStartOfLabelLinkChain, 0);\n   int offset = LinkAndGetByteOffsetTo(label);\n-  DCHECK(IsAligned(offset, kInstructionSize));\n-  return offset >> kInstructionSizeLog2;\n+  DCHECK(IsAligned(offset, kInstrSize));\n+  return offset >> kInstrSizeLog2;\n }\n \n \n@@ -1092,7 +1091,7 @@ Instr Assembler::ImmBarrierType(int imm2) {\n }\n \n unsigned Assembler::CalcLSDataSize(LoadStoreOp op) {\n-  DCHECK((LSSize_offset + LSSize_width) == (kInstructionSize * 8));\n+  DCHECK((LSSize_offset + LSSize_width) == (kInstrSize * 8));\n   unsigned size = static_cast<Instr>(op >> LSSize_offset);\n   if ((op & LSVector_mask) != 0) {\n     // Vector register memory operations encode the access size in the \"size\""
        },
        {
            "sha": "d41b1a7d7f49279bda66fb959b77a5028df2dbdc",
            "filename": "deps/v8/src/arm64/assembler-arm64.cc",
            "status": "modified",
            "additions": 26,
            "deletions": 27,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -208,10 +208,10 @@ uint32_t RelocInfo::wasm_call_tag() const {\n   Instruction* instr = reinterpret_cast<Instruction*>(pc_);\n   if (instr->IsLdrLiteralX()) {\n     return static_cast<uint32_t>(\n-        Memory::Address_at(Assembler::target_pointer_address_at(pc_)));\n+        Memory<Address>(Assembler::target_pointer_address_at(pc_)));\n   } else {\n     DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n-    return static_cast<uint32_t>(instr->ImmPCOffset() / kInstructionSize);\n+    return static_cast<uint32_t>(instr->ImmPCOffset() / kInstrSize);\n   }\n }\n \n@@ -347,7 +347,7 @@ bool ConstPool::RecordEntry(intptr_t data, RelocInfo::Mode mode) {\n     first_use_ = offset;\n   }\n \n-  if (CanBeShared(mode)) {\n+  if (RelocInfo::IsShareableRelocMode(mode)) {\n     write_reloc_info = AddSharedEntry(shared_entries_, raw_data, offset);\n   } else if (mode == RelocInfo::CODE_TARGET && raw_data != 0) {\n     // A zero data value is a placeholder and must not be shared.\n@@ -391,7 +391,7 @@ int ConstPool::WorstCaseSize() {\n   //   blr xzr\n   //   nop\n   // All entries are 64-bit for now.\n-  return 4 * kInstructionSize + EntryCount() * kPointerSize;\n+  return 4 * kInstrSize + EntryCount() * kPointerSize;\n }\n \n \n@@ -403,10 +403,10 @@ int ConstPool::SizeIfEmittedAtCurrentPc(bool require_jump) {\n   //   ldr xzr, #pool_size\n   //   blr xzr\n   //   nop       ;; if not 64-bit aligned\n-  int prologue_size = require_jump ? kInstructionSize : 0;\n-  prologue_size += 2 * kInstructionSize;\n-  prologue_size += IsAligned(assm_->pc_offset() + prologue_size, 8) ?\n-                   0 : kInstructionSize;\n+  int prologue_size = require_jump ? kInstrSize : 0;\n+  prologue_size += 2 * kInstrSize;\n+  prologue_size +=\n+      IsAligned(assm_->pc_offset() + prologue_size, 8) ? 0 : kInstrSize;\n \n   // All entries are 64-bit for now.\n   return prologue_size + EntryCount() * kPointerSize;\n@@ -476,11 +476,6 @@ void ConstPool::Clear() {\n }\n \n \n-bool ConstPool::CanBeShared(RelocInfo::Mode mode) {\n-  return RelocInfo::IsNone(mode) || RelocInfo::IsShareableRelocMode(mode);\n-}\n-\n-\n void ConstPool::EmitMarker() {\n   // A constant pool size is expressed in number of 32-bits words.\n   // Currently all entries are 64-bit.\n@@ -601,8 +596,8 @@ void Assembler::AllocateAndInstallRequestedHeapObjects(Isolate* isolate) {\n         request.code_stub()->set_isolate(isolate);\n         Instruction* instr = reinterpret_cast<Instruction*>(pc);\n         DCHECK(instr->IsBranchAndLink() || instr->IsUnconditionalBranch());\n-        DCHECK_EQ(instr->ImmPCOffset() % kInstructionSize, 0);\n-        UpdateCodeTarget(instr->ImmPCOffset() >> kInstructionSizeLog2,\n+        DCHECK_EQ(instr->ImmPCOffset() % kInstrSize, 0);\n+        UpdateCodeTarget(instr->ImmPCOffset() >> kInstrSizeLog2,\n                          request.code_stub()->GetCode());\n         break;\n       }\n@@ -959,12 +954,12 @@ int Assembler::ConstantPoolSizeAt(Instruction* instr) {\n         reinterpret_cast<const char*>(\n             instr->InstructionAtOffset(kDebugMessageOffset));\n     int size = static_cast<int>(kDebugMessageOffset + strlen(message) + 1);\n-    return RoundUp(size, kInstructionSize) / kInstructionSize;\n+    return RoundUp(size, kInstrSize) / kInstrSize;\n   }\n   // Same for printf support, see MacroAssembler::CallPrintf().\n   if ((instr->Mask(ExceptionMask) == HLT) &&\n       (instr->ImmException() == kImmExceptionIsPrintf)) {\n-    return kPrintfLength / kInstructionSize;\n+    return kPrintfLength / kInstrSize;\n   }\n #endif\n   if (IsConstantPoolAt(instr)) {\n@@ -3938,7 +3933,7 @@ void Assembler::dcptr(Label* label) {\n     // references are not instructions so while unbound they are encoded as\n     // two consecutive brk instructions. The two 16-bit immediates are used\n     // to encode the offset.\n-    offset >>= kInstructionSizeLog2;\n+    offset >>= kInstrSizeLog2;\n     DCHECK(is_int32(offset));\n     uint32_t high16 = unsigned_bitextract_32(31, 16, offset);\n     uint32_t low16 = unsigned_bitextract_32(15, 0, offset);\n@@ -4069,13 +4064,13 @@ void Assembler::brk(int code) {\n \n void Assembler::EmitStringData(const char* string) {\n   size_t len = strlen(string) + 1;\n-  DCHECK_LE(RoundUp(len, kInstructionSize), static_cast<size_t>(kGap));\n+  DCHECK_LE(RoundUp(len, kInstrSize), static_cast<size_t>(kGap));\n   EmitData(string, static_cast<int>(len));\n   // Pad with nullptr characters until pc_ is aligned.\n   const char pad[] = {'\\0', '\\0', '\\0', '\\0'};\n-  static_assert(sizeof(pad) == kInstructionSize,\n+  static_assert(sizeof(pad) == kInstrSize,\n                 \"Size of padding must match instruction size.\");\n-  EmitData(pad, RoundUp(pc_offset(), kInstructionSize) - pc_offset());\n+  EmitData(pad, RoundUp(pc_offset(), kInstrSize) - pc_offset());\n }\n \n \n@@ -4103,6 +4098,10 @@ void Assembler::debug(const char* message, uint32_t code, Instr params) {\n     return;\n   }\n   // Fall through if Serializer is enabled.\n+#else\n+  // Make sure we haven't dynamically enabled simulator code when there is no\n+  // simulator built in.\n+  DCHECK(!options().enable_simulator_code);\n #endif\n \n   if (params & BREAK) {\n@@ -4422,7 +4421,7 @@ bool Assembler::IsImmLSPair(int64_t offset, unsigned size) {\n \n \n bool Assembler::IsImmLLiteral(int64_t offset) {\n-  int inst_size = static_cast<int>(kInstructionSizeLog2);\n+  int inst_size = static_cast<int>(kInstrSizeLog2);\n   bool offset_is_inst_multiple =\n       (((offset >> inst_size) << inst_size) == offset);\n   DCHECK_GT(offset, 0);\n@@ -4810,7 +4809,7 @@ void Assembler::near_call(HeapObjectRequest request) {\n }\n \n void Assembler::BlockConstPoolFor(int instructions) {\n-  int pc_limit = pc_offset() + instructions * kInstructionSize;\n+  int pc_limit = pc_offset() + instructions * kInstrSize;\n   if (no_const_pool_before_ < pc_limit) {\n     no_const_pool_before_ = pc_limit;\n     // Make sure the pool won't be blocked for too long.\n@@ -4862,7 +4861,7 @@ void Assembler::CheckConstPool(bool force_emit, bool require_jump) {\n \n   // Check that the code buffer is large enough before emitting the constant\n   // pool (this includes the gap to the relocation information).\n-  int needed_space = worst_case_size + kGap + 1 * kInstructionSize;\n+  int needed_space = worst_case_size + kGap + 1 * kInstrSize;\n   while (buffer_space() <= needed_space) {\n     GrowBuffer();\n   }\n@@ -4881,7 +4880,7 @@ void Assembler::CheckConstPool(bool force_emit, bool require_jump) {\n \n bool Assembler::ShouldEmitVeneer(int max_reachable_pc, int margin) {\n   // Account for the branch around the veneers and the guard.\n-  int protection_offset = 2 * kInstructionSize;\n+  int protection_offset = 2 * kInstrSize;\n   return pc_offset() > max_reachable_pc - margin - protection_offset -\n     static_cast<int>(unresolved_branches_.size() * kMaxVeneerCodeSize);\n }\n@@ -5018,10 +5017,10 @@ void PatchingAssembler::PatchAdrFar(int64_t target_offset) {\n   CHECK(expected_adr->IsAdr() && (expected_adr->ImmPCRel() == 0));\n   int rd_code = expected_adr->Rd();\n   for (int i = 0; i < kAdrFarPatchableNNops; ++i) {\n-    CHECK(InstructionAt((i + 1) * kInstructionSize)->IsNop(ADR_FAR_NOP));\n+    CHECK(InstructionAt((i + 1) * kInstrSize)->IsNop(ADR_FAR_NOP));\n   }\n   Instruction* expected_movz =\n-      InstructionAt((kAdrFarPatchableNInstrs - 1) * kInstructionSize);\n+      InstructionAt((kAdrFarPatchableNInstrs - 1) * kInstrSize);\n   CHECK(expected_movz->IsMovz() &&\n         (expected_movz->ImmMoveWide() == 0) &&\n         (expected_movz->ShiftMoveWide() == 0));"
        },
        {
            "sha": "b42b80f9ca93088d853e375ff02ecce5b6f2296e",
            "filename": "deps/v8/src/arm64/assembler-arm64.h",
            "status": "modified",
            "additions": 9,
            "deletions": 21,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -407,6 +407,7 @@ constexpr Register NoReg = Register::no_reg();\n constexpr VRegister NoVReg = VRegister::no_reg();\n constexpr CPURegister NoCPUReg = CPURegister::no_reg();\n constexpr Register no_reg = NoReg;\n+constexpr VRegister no_dreg = NoVReg;\n \n #define DEFINE_REGISTER(register_class, name, ...) \\\n   constexpr register_class name = register_class::Create<__VA_ARGS__>()\n@@ -848,7 +849,6 @@ class ConstPool {\n   void Clear();\n \n  private:\n-  bool CanBeShared(RelocInfo::Mode mode);\n   void EmitMarker();\n   void EmitGuard();\n   void EmitEntries();\n@@ -882,7 +882,7 @@ class ConstPool {\n // -----------------------------------------------------------------------------\n // Assembler.\n \n-class Assembler : public AssemblerBase {\n+class V8_EXPORT_PRIVATE Assembler : public AssemblerBase {\n  public:\n   // Create an assembler. Instructions and relocation information are emitted\n   // into a buffer, with the instructions starting from the beginning and the\n@@ -1008,17 +1008,15 @@ class Assembler : public AssemblerBase {\n   static constexpr int kSpecialTargetSize = 0;\n \n   // The sizes of the call sequences emitted by MacroAssembler::Call.\n-  // Wherever possible, use MacroAssembler::CallSize instead of these constants,\n-  // as it will choose the correct value for a given relocation mode.\n   //\n   // A \"near\" call is encoded in a BL immediate instruction:\n   //  bl target\n   //\n   // whereas a \"far\" call will be encoded like this:\n   //  ldr temp, =target\n   //  blr temp\n-  static constexpr int kNearCallSize = 1 * kInstructionSize;\n-  static constexpr int kFarCallSize = 2 * kInstructionSize;\n+  static constexpr int kNearCallSize = 1 * kInstrSize;\n+  static constexpr int kFarCallSize = 2 * kInstrSize;\n \n   // Size of the generated code in bytes\n   uint64_t SizeOfGeneratedCode() const {\n@@ -1034,20 +1032,10 @@ class Assembler : public AssemblerBase {\n     return pc_offset() - label->pos();\n   }\n \n-  // Check the size of the code generated since the given label. This function\n-  // is used primarily to work around comparisons between signed and unsigned\n-  // quantities, since V8 uses both.\n-  // TODO(jbramley): Work out what sign to use for these things and if possible,\n-  // change things to be consistent.\n-  void AssertSizeOfCodeGeneratedSince(const Label* label, ptrdiff_t size) {\n-    DCHECK_GE(size, 0);\n-    DCHECK_EQ(static_cast<uint64_t>(size), SizeOfCodeGeneratedSince(label));\n-  }\n-\n   // Return the number of instructions generated from label to the\n   // current position.\n   uint64_t InstructionsGeneratedSince(const Label* label) {\n-    return SizeOfCodeGeneratedSince(label) / kInstructionSize;\n+    return SizeOfCodeGeneratedSince(label) / kInstrSize;\n   }\n \n   // Prevent contant pool emission until EndBlockConstPool is called.\n@@ -3198,7 +3186,7 @@ class Assembler : public AssemblerBase {\n   // The maximum code size generated for a veneer. Currently one branch\n   // instruction. This is for code size checking purposes, and can be extended\n   // in the future for example if we decide to add nops between the veneers.\n-  static constexpr int kMaxVeneerCodeSize = 1 * kInstructionSize;\n+  static constexpr int kMaxVeneerCodeSize = 1 * kInstrSize;\n \n   void RecordVeneerPool(int location_offset, int size);\n   // Emits veneers for branches that are approaching their maximum range.\n@@ -3423,13 +3411,13 @@ class Assembler : public AssemblerBase {\n \n   // Set how far from current pc the next constant pool check will be.\n   void SetNextConstPoolCheckIn(int instructions) {\n-    next_constant_pool_check_ = pc_offset() + instructions * kInstructionSize;\n+    next_constant_pool_check_ = pc_offset() + instructions * kInstrSize;\n   }\n \n   // Emit the instruction at pc_.\n   void Emit(Instr instruction) {\n     STATIC_ASSERT(sizeof(*pc_) == 1);\n-    STATIC_ASSERT(sizeof(instruction) == kInstructionSize);\n+    STATIC_ASSERT(sizeof(instruction) == kInstrSize);\n     DCHECK((pc_ + sizeof(instruction)) <= (buffer_ + buffer_size_));\n \n     memcpy(pc_, &instruction, sizeof(instruction));\n@@ -3614,7 +3602,7 @@ class PatchingAssembler : public Assembler {\n   // Note that the instruction cache will not be flushed.\n   PatchingAssembler(const AssemblerOptions& options, byte* start,\n                     unsigned count)\n-      : Assembler(options, start, count * kInstructionSize + kGap) {\n+      : Assembler(options, start, count * kInstrSize + kGap) {\n     // Block constant pool emission.\n     StartBlockPools();\n   }"
        },
        {
            "sha": "328983f42c6b3a7be33abc85c8ce5b3acdaa823c",
            "filename": "deps/v8/src/arm64/code-stubs-arm64.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -215,7 +215,7 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n \n // The entry hook is a Push (stp) instruction, followed by a near call.\n static const unsigned int kProfileEntryHookCallSize =\n-    (1 * kInstructionSize) + Assembler::kNearCallSize;\n+    (1 * kInstrSize) + Assembler::kNearCallSize;\n \n void ProfileEntryHookStub::MaybeCallEntryHookDelayed(TurboAssembler* tasm,\n                                                      Zone* zone) {\n@@ -249,7 +249,7 @@ void ProfileEntryHookStub::MaybeCallEntryHook(MacroAssembler* masm) {\n \n \n void ProfileEntryHookStub::Generate(MacroAssembler* masm) {\n-  MacroAssembler::NoUseRealAbortsScope no_use_real_aborts(masm);\n+  HardAbortScope hard_aborts(masm);\n \n   // Save all kCallerSaved registers (including lr), since this can be called\n   // from anywhere."
        },
        {
            "sha": "389f4818d5c34f15156cbd886b43de149743d9cb",
            "filename": "deps/v8/src/arm64/constants-arm64.h",
            "status": "modified",
            "additions": 5,
            "deletions": 35,
            "changes": 40,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fconstants-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fconstants-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fconstants-arm64.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -28,10 +28,10 @@ namespace internal {\n \n constexpr size_t kMaxPCRelativeCodeRangeInMB = 128;\n \n-const unsigned kInstructionSize = 4;\n-const unsigned kInstructionSizeLog2 = 2;\n-const unsigned kLoadLiteralScaleLog2 = 2;\n-const unsigned kMaxLoadLiteralRange = 1 * MB;\n+constexpr uint8_t kInstrSize = 4;\n+constexpr uint8_t kInstrSizeLog2 = 2;\n+constexpr size_t kLoadLiteralScaleLog2 = 2;\n+constexpr size_t kMaxLoadLiteralRange = 1 * MB;\n \n const int kNumberOfRegisters = 32;\n const int kNumberOfVRegisters = 32;\n@@ -42,7 +42,7 @@ const int kFirstCalleeSavedRegisterIndex = 19;\n const int kNumberOfCalleeSavedVRegisters = 8;\n const int kFirstCalleeSavedVRegisterIndex = 8;\n // Callee saved registers with no specific purpose in JS are x19-x25.\n-const unsigned kJSCalleeSavedRegList = 0x03f80000;\n+const size_t kJSCalleeSavedRegList = 0x03f80000;\n const int kWRegSizeInBits = 32;\n const int kWRegSizeInBitsLog2 = 5;\n const int kWRegSize = kWRegSizeInBits >> 3;\n@@ -329,36 +329,6 @@ inline Condition NegateCondition(Condition cond) {\n   return static_cast<Condition>(cond ^ 1);\n }\n \n-// Commute a condition such that {a cond b == b cond' a}.\n-inline Condition CommuteCondition(Condition cond) {\n-  switch (cond) {\n-    case lo:\n-      return hi;\n-    case hi:\n-      return lo;\n-    case hs:\n-      return ls;\n-    case ls:\n-      return hs;\n-    case lt:\n-      return gt;\n-    case gt:\n-      return lt;\n-    case ge:\n-      return le;\n-    case le:\n-      return ge;\n-    case eq:\n-      return eq;\n-    default:\n-      // In practice this function is only used with a condition coming from\n-      // TokenToCondition in lithium-codegen-arm64.cc. Any other condition is\n-      // invalid as it doesn't necessary make sense to reverse it (consider\n-      // 'mi' for instance).\n-      UNREACHABLE();\n-  }\n-}\n-\n enum FlagsUpdate {\n   SetFlags   = 1,\n   LeaveFlags = 0"
        },
        {
            "sha": "c2181ddc408bc79af416a5a8d8a4efe8ebdd4812",
            "filename": "deps/v8/src/arm64/decoder-arm64-inl.h",
            "status": "modified",
            "additions": 2,
            "deletions": 8,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fdecoder-arm64-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fdecoder-arm64-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fdecoder-arm64-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -106,10 +106,7 @@ void Decoder<V>::DecodePCRelAddressing(Instruction* instr) {\n \n template<typename V>\n void Decoder<V>::DecodeBranchSystemException(Instruction* instr) {\n-  DCHECK((instr->Bits(27, 24) == 0x4) ||\n-         (instr->Bits(27, 24) == 0x5) ||\n-         (instr->Bits(27, 24) == 0x6) ||\n-         (instr->Bits(27, 24) == 0x7) );\n+  DCHECK_EQ(0x4, instr->Bits(27, 24) & 0xC);  // 0x4, 0x5, 0x6, 0x7\n \n   switch (instr->Bits(31, 29)) {\n     case 0:\n@@ -203,10 +200,7 @@ void Decoder<V>::DecodeBranchSystemException(Instruction* instr) {\n \n template<typename V>\n void Decoder<V>::DecodeLoadStore(Instruction* instr) {\n-  DCHECK((instr->Bits(27, 24) == 0x8) ||\n-         (instr->Bits(27, 24) == 0x9) ||\n-         (instr->Bits(27, 24) == 0xC) ||\n-         (instr->Bits(27, 24) == 0xD) );\n+  DCHECK_EQ(0x8, instr->Bits(27, 24) & 0xA);  // 0x8, 0x9, 0xC, 0xD\n \n   if ((instr->Bit(28) == 0) && (instr->Bit(29) == 0) && (instr->Bit(26) == 1)) {\n     DecodeNEONLoadStore(instr);"
        },
        {
            "sha": "cb8925f779b9a54d5f860c912af7358d11d9a37b",
            "filename": "deps/v8/src/arm64/deoptimizer-arm64.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fdeoptimizer-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fdeoptimizer-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fdeoptimizer-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -277,7 +277,7 @@ void Deoptimizer::TableEntryGenerator::Generate() {\n \n // Size of an entry of the second level deopt table. Since we do not generate\n // a table for ARM64, the size is zero.\n-const int Deoptimizer::table_entry_size_ = 0 * kInstructionSize;\n+const int Deoptimizer::table_entry_size_ = 0 * kInstrSize;\n \n void Deoptimizer::TableEntryGenerator::GeneratePrologue() {\n   UseScratchRegisterScope temps(masm());"
        },
        {
            "sha": "4c7ce77e4a22ff4828b1467e337253e3a927d51f",
            "filename": "deps/v8/src/arm64/disasm-arm64.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 12,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fdisasm-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fdisasm-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fdisasm-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -3917,7 +3917,7 @@ int DisassemblingDecoder::SubstituteBranchTargetField(Instruction* instr,\n     case 'e': offset = instr->ImmTestBranch(); break;\n     default: UNREACHABLE();\n   }\n-  offset <<= kInstructionSizeLog2;\n+  offset <<= kInstrSizeLog2;\n   char sign = '+';\n   if (offset < 0) {\n     sign = '-';\n@@ -4106,21 +4106,15 @@ class BufferDisassembler : public v8::internal::DisassemblingDecoder {\n   v8::internal::Vector<char> out_buffer_;\n };\n \n-Disassembler::Disassembler(const NameConverter& converter)\n-    : converter_(converter) {}\n-\n-\n-Disassembler::~Disassembler() { USE(converter_); }\n-\n-\n int Disassembler::InstructionDecode(v8::internal::Vector<char> buffer,\n                                     byte* instr) {\n+  USE(converter_);  // avoid unused field warning\n   v8::internal::Decoder<v8::internal::DispatchingDecoderVisitor> decoder;\n   BufferDisassembler disasm(buffer);\n   decoder.AppendVisitor(&disasm);\n \n   decoder.Decode(reinterpret_cast<v8::internal::Instruction*>(instr));\n-  return v8::internal::kInstructionSize;\n+  return v8::internal::kInstrSize;\n }\n \n \n@@ -4129,13 +4123,13 @@ int Disassembler::ConstantPoolSizeAt(byte* instr) {\n       reinterpret_cast<v8::internal::Instruction*>(instr));\n }\n \n-\n-void Disassembler::Disassemble(FILE* file, byte* start, byte* end) {\n+void Disassembler::Disassemble(FILE* file, byte* start, byte* end,\n+                               UnimplementedOpcodeAction) {\n   v8::internal::Decoder<v8::internal::DispatchingDecoderVisitor> decoder;\n   v8::internal::PrintDisassembler disasm(file);\n   decoder.AppendVisitor(&disasm);\n \n-  for (byte* pc = start; pc < end; pc += v8::internal::kInstructionSize) {\n+  for (byte* pc = start; pc < end; pc += v8::internal::kInstrSize) {\n     decoder.Decode(reinterpret_cast<v8::internal::Instruction*>(pc));\n   }\n }"
        },
        {
            "sha": "503f31050f23dd801462a601e79c651bfaf5a515",
            "filename": "deps/v8/src/arm64/instructions-arm64.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -159,7 +159,7 @@ double Instruction::ImmNEONFP64() const {\n \n unsigned CalcLSDataSize(LoadStoreOp op) {\n   DCHECK_EQ(static_cast<unsigned>(LSSize_offset + LSSize_width),\n-            kInstructionSize * 8);\n+            kInstrSize * 8);\n   unsigned size = static_cast<Instr>(op) >> LSSize_offset;\n   if ((op & LSVector_mask) != 0) {\n     // Vector register memory operations encode the access size in the \"size\"\n@@ -197,16 +197,16 @@ int64_t Instruction::ImmPCOffset() {\n   } else if (BranchType() != UnknownBranchType) {\n     // All PC-relative branches.\n     // Relative branch offsets are instruction-size-aligned.\n-    offset = ImmBranch() << kInstructionSizeLog2;\n+    offset = ImmBranch() << kInstrSizeLog2;\n   } else if (IsUnresolvedInternalReference()) {\n     // Internal references are always word-aligned.\n-    offset = ImmUnresolvedInternalReference() << kInstructionSizeLog2;\n+    offset = ImmUnresolvedInternalReference() << kInstrSizeLog2;\n   } else {\n     // Load literal (offset from PC).\n     DCHECK(IsLdrLiteral());\n     // The offset is always shifted by 2 bits, even for loads to 64-bits\n     // registers.\n-    offset = ImmLLiteral() << kInstructionSizeLog2;\n+    offset = ImmLLiteral() << kInstrSizeLog2;\n   }\n   return offset;\n }\n@@ -260,10 +260,10 @@ void Instruction::SetPCRelImmTarget(const AssemblerOptions& options,\n \n \n void Instruction::SetBranchImmTarget(Instruction* target) {\n-  DCHECK(IsAligned(DistanceTo(target), kInstructionSize));\n-  DCHECK(IsValidImmPCOffset(BranchType(),\n-                            DistanceTo(target) >> kInstructionSizeLog2));\n-  int offset = static_cast<int>(DistanceTo(target) >> kInstructionSizeLog2);\n+  DCHECK(IsAligned(DistanceTo(target), kInstrSize));\n+  DCHECK(\n+      IsValidImmPCOffset(BranchType(), DistanceTo(target) >> kInstrSizeLog2));\n+  int offset = static_cast<int>(DistanceTo(target) >> kInstrSizeLog2);\n   Instr branch_imm = 0;\n   uint32_t imm_mask = 0;\n   switch (BranchType()) {\n@@ -295,10 +295,10 @@ void Instruction::SetBranchImmTarget(Instruction* target) {\n void Instruction::SetUnresolvedInternalReferenceImmTarget(\n     const AssemblerOptions& options, Instruction* target) {\n   DCHECK(IsUnresolvedInternalReference());\n-  DCHECK(IsAligned(DistanceTo(target), kInstructionSize));\n-  DCHECK(is_int32(DistanceTo(target) >> kInstructionSizeLog2));\n+  DCHECK(IsAligned(DistanceTo(target), kInstrSize));\n+  DCHECK(is_int32(DistanceTo(target) >> kInstrSizeLog2));\n   int32_t target_offset =\n-      static_cast<int32_t>(DistanceTo(target) >> kInstructionSizeLog2);\n+      static_cast<int32_t>(DistanceTo(target) >> kInstrSizeLog2);\n   uint32_t high16 = unsigned_bitextract_32(31, 16, target_offset);\n   uint32_t low16 = unsigned_bitextract_32(15, 0, target_offset);\n \n@@ -310,7 +310,7 @@ void Instruction::SetUnresolvedInternalReferenceImmTarget(\n \n void Instruction::SetImmLLiteral(Instruction* source) {\n   DCHECK(IsLdrLiteral());\n-  DCHECK(IsAligned(DistanceTo(source), kInstructionSize));\n+  DCHECK(IsAligned(DistanceTo(source), kInstrSize));\n   DCHECK(Assembler::IsImmLLiteral(DistanceTo(source)));\n   Instr imm = Assembler::ImmLLiteral(\n       static_cast<int>(DistanceTo(source) >> kLoadLiteralScaleLog2));"
        },
        {
            "sha": "9ea15e55adaa51670b947af682d0547ef884bf7f",
            "filename": "deps/v8/src/arm64/instructions-arm64.h",
            "status": "modified",
            "additions": 13,
            "deletions": 14,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Finstructions-arm64.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -104,11 +104,11 @@ class Instruction {\n   }\n \n   V8_INLINE const Instruction* following(int count = 1) const {\n-    return InstructionAtOffset(count * static_cast<int>(kInstructionSize));\n+    return InstructionAtOffset(count * static_cast<int>(kInstrSize));\n   }\n \n   V8_INLINE Instruction* following(int count = 1) {\n-    return InstructionAtOffset(count * static_cast<int>(kInstructionSize));\n+    return InstructionAtOffset(count * static_cast<int>(kInstrSize));\n   }\n \n   V8_INLINE const Instruction* preceding(int count = 1) const {\n@@ -329,9 +329,8 @@ class Instruction {\n \n   // The range of the branch instruction, expressed as 'instr +- range'.\n   static int32_t ImmBranchRange(ImmBranchType branch_type) {\n-    return\n-      (1 << (ImmBranchRangeBitwidth(branch_type) + kInstructionSizeLog2)) / 2 -\n-      kInstructionSize;\n+    return (1 << (ImmBranchRangeBitwidth(branch_type) + kInstrSizeLog2)) / 2 -\n+           kInstrSize;\n   }\n \n   int ImmBranch() const {\n@@ -419,14 +418,14 @@ class Instruction {\n   V8_INLINE const Instruction* InstructionAtOffset(\n       int64_t offset, CheckAlignment check = CHECK_ALIGNMENT) const {\n     // The FUZZ_disasm test relies on no check being done.\n-    DCHECK(check == NO_CHECK || IsAligned(offset, kInstructionSize));\n+    DCHECK(check == NO_CHECK || IsAligned(offset, kInstrSize));\n     return this + offset;\n   }\n \n   V8_INLINE Instruction* InstructionAtOffset(\n       int64_t offset, CheckAlignment check = CHECK_ALIGNMENT) {\n     // The FUZZ_disasm test relies on no check being done.\n-    DCHECK(check == NO_CHECK || IsAligned(offset, kInstructionSize));\n+    DCHECK(check == NO_CHECK || IsAligned(offset, kInstrSize));\n     return this + offset;\n   }\n \n@@ -534,9 +533,9 @@ const Instr kImmExceptionIsPrintf = 0xdeb1;\n // passed in. This information could be retrieved from the printf format string,\n // but the format string is not trivial to parse so we encode the relevant\n // information with the HLT instruction.\n-const unsigned kPrintfArgCountOffset = 1 * kInstructionSize;\n-const unsigned kPrintfArgPatternListOffset = 2 * kInstructionSize;\n-const unsigned kPrintfLength = 3 * kInstructionSize;\n+const unsigned kPrintfArgCountOffset = 1 * kInstrSize;\n+const unsigned kPrintfArgPatternListOffset = 2 * kInstrSize;\n+const unsigned kPrintfLength = 3 * kInstrSize;\n \n const unsigned kPrintfMaxArgCount = 4;\n \n@@ -557,12 +556,12 @@ const Instr kImmExceptionIsDebug = 0xdeb0;\n // - Debug code.\n // - Debug parameters.\n // - Debug message string. This is a nullptr-terminated ASCII string, padded to\n-//   kInstructionSize so that subsequent instructions are correctly aligned.\n+//   kInstrSize so that subsequent instructions are correctly aligned.\n // - A kImmExceptionIsUnreachable marker, to catch accidental execution of the\n //   string data.\n-const unsigned kDebugCodeOffset = 1 * kInstructionSize;\n-const unsigned kDebugParamsOffset = 2 * kInstructionSize;\n-const unsigned kDebugMessageOffset = 3 * kInstructionSize;\n+const unsigned kDebugCodeOffset = 1 * kInstrSize;\n+const unsigned kDebugParamsOffset = 2 * kInstrSize;\n+const unsigned kDebugMessageOffset = 3 * kInstrSize;\n \n // Debug parameters.\n // Used without a TRACE_ option, the Debugger will print the arguments only"
        },
        {
            "sha": "bb1c22aff55bb446ff0ca7e57b3b619ae6246fe8",
            "filename": "deps/v8/src/arm64/interface-descriptors-arm64.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -250,30 +250,6 @@ void InterpreterPushArgsThenConstructDescriptor::InitializePlatformSpecific(\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n-namespace {\n-\n-void InterpreterCEntryDescriptor_InitializePlatformSpecific(\n-    CallInterfaceDescriptorData* data) {\n-  Register registers[] = {\n-      x0,   // argument count (argc)\n-      x11,  // address of first argument (argv)\n-      x1    // the runtime function to call\n-  };\n-  data->InitializePlatformSpecific(arraysize(registers), registers);\n-}\n-\n-}  // namespace\n-\n-void InterpreterCEntry1Descriptor::InitializePlatformSpecific(\n-    CallInterfaceDescriptorData* data) {\n-  InterpreterCEntryDescriptor_InitializePlatformSpecific(data);\n-}\n-\n-void InterpreterCEntry2Descriptor::InitializePlatformSpecific(\n-    CallInterfaceDescriptorData* data) {\n-  InterpreterCEntryDescriptor_InitializePlatformSpecific(data);\n-}\n-\n void ResumeGeneratorDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   Register registers[] = {"
        },
        {
            "sha": "62594241ec2bf4b98329aa42b7ebd521d00b010e",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64-inl.h",
            "status": "modified",
            "additions": 6,
            "deletions": 12,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -780,18 +780,6 @@ void TurboAssembler::Mneg(const Register& rd, const Register& rn,\n   mneg(rd, rn, rm);\n }\n \n-void TurboAssembler::Mov(const Register& rd, const Register& rn) {\n-  DCHECK(allow_macro_instructions());\n-  DCHECK(!rd.IsZero());\n-  // Emit a register move only if the registers are distinct, or if they are\n-  // not X registers. Note that mov(w0, w0) is not a no-op because it clears\n-  // the top word of x0.\n-  if (!rd.Is(rn) || !rd.Is64Bits()) {\n-    Assembler::mov(rd, rn);\n-  }\n-}\n-\n-\n void MacroAssembler::Movk(const Register& rd, uint64_t imm, int shift) {\n   DCHECK(allow_macro_instructions());\n   DCHECK(!rd.IsZero());\n@@ -830,6 +818,12 @@ void TurboAssembler::Rbit(const Register& rd, const Register& rn) {\n   rbit(rd, rn);\n }\n \n+void TurboAssembler::Rev(const Register& rd, const Register& rn) {\n+  DCHECK(allow_macro_instructions());\n+  DCHECK(!rd.IsZero());\n+  rev(rd, rn);\n+}\n+\n void TurboAssembler::Ret(const Register& xn) {\n   DCHECK(allow_macro_instructions());\n   DCHECK(!xn.IsZero());"
        },
        {
            "sha": "b15ab4747345ba193d71fcb153e244cbd82c03cc",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64.cc",
            "status": "modified",
            "additions": 69,
            "deletions": 175,
            "changes": 244,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -20,6 +20,7 @@\n #include \"src/register-configuration.h\"\n #include \"src/runtime/runtime.h\"\n #include \"src/snapshot/snapshot.h\"\n+#include \"src/wasm/wasm-code-manager.h\"\n \n #include \"src/arm64/macro-assembler-arm64-inl.h\"\n #include \"src/arm64/macro-assembler-arm64.h\"  // Cannot be the first include\n@@ -305,23 +306,35 @@ void TurboAssembler::Mov(const Register& rd, const Operand& operand,\n   Register dst = (rd.IsSP()) ? temps.AcquireSameSizeAs(rd) : rd;\n \n   if (operand.NeedsRelocation(this)) {\n+    if (FLAG_embedded_builtins) {\n+      if (root_array_available_ && options().isolate_independent_code) {\n+        if (operand.ImmediateRMode() == RelocInfo::EXTERNAL_REFERENCE) {\n+          Address addr = static_cast<Address>(operand.ImmediateValue());\n+          ExternalReference reference = bit_cast<ExternalReference>(addr);\n+          IndirectLoadExternalReference(rd, reference);\n+          return;\n+        } else if (operand.ImmediateRMode() == RelocInfo::EMBEDDED_OBJECT) {\n+          Handle<HeapObject> x(\n+              reinterpret_cast<HeapObject**>(operand.ImmediateValue()));\n+          IndirectLoadConstant(rd, x);\n+          return;\n+        }\n+      }\n+    }\n     Ldr(dst, operand);\n   } else if (operand.IsImmediate()) {\n     // Call the macro assembler for generic immediates.\n     Mov(dst, operand.ImmediateValue());\n-\n   } else if (operand.IsShiftedRegister() && (operand.shift_amount() != 0)) {\n     // Emit a shift instruction if moving a shifted register. This operation\n     // could also be achieved using an orr instruction (like orn used by Mvn),\n     // but using a shift instruction makes the disassembly clearer.\n     EmitShift(dst, operand.reg(), operand.shift(), operand.shift_amount());\n-\n   } else if (operand.IsExtendedRegister()) {\n     // Emit an extend instruction if moving an extended register. This handles\n     // extend with post-shift operations, too.\n     EmitExtendShift(dst, operand.reg(), operand.extend(),\n                     operand.shift_amount());\n-\n   } else {\n     // Otherwise, emit a register move only if the registers are distinct, or\n     // if they are not X registers.\n@@ -347,16 +360,6 @@ void TurboAssembler::Mov(const Register& rd, const Operand& operand,\n   }\n }\n \n-void TurboAssembler::Mov(const Register& rd, ExternalReference reference) {\n-  if (FLAG_embedded_builtins) {\n-    if (root_array_available_ && options().isolate_independent_code) {\n-      IndirectLoadExternalReference(rd, reference);\n-      return;\n-    }\n-  }\n-  Mov(rd, Operand(reference));\n-}\n-\n void TurboAssembler::Movi16bitHelper(const VRegister& vd, uint64_t imm) {\n   DCHECK(is_uint16(imm));\n   int byte1 = (imm & 0xFF);\n@@ -1049,8 +1052,8 @@ void TurboAssembler::Push(const CPURegister& src0, const CPURegister& src1,\n \n   int count = 1 + src1.IsValid() + src2.IsValid() + src3.IsValid();\n   int size = src0.SizeInBytes();\n+  DCHECK_EQ(0, (size * count) % 16);\n \n-  PushPreamble(count, size);\n   PushHelper(count, size, src0, src1, src2, src3);\n }\n \n@@ -1062,8 +1065,8 @@ void TurboAssembler::Push(const CPURegister& src0, const CPURegister& src1,\n \n   int count = 5 + src5.IsValid() + src6.IsValid() + src6.IsValid();\n   int size = src0.SizeInBytes();\n+  DCHECK_EQ(0, (size * count) % 16);\n \n-  PushPreamble(count, size);\n   PushHelper(4, size, src0, src1, src2, src3);\n   PushHelper(count - 4, size, src4, src5, src6, src7);\n }\n@@ -1078,9 +1081,9 @@ void TurboAssembler::Pop(const CPURegister& dst0, const CPURegister& dst1,\n \n   int count = 1 + dst1.IsValid() + dst2.IsValid() + dst3.IsValid();\n   int size = dst0.SizeInBytes();\n+  DCHECK_EQ(0, (size * count) % 16);\n \n   PopHelper(count, size, dst0, dst1, dst2, dst3);\n-  PopPostamble(count, size);\n }\n \n void TurboAssembler::Pop(const CPURegister& dst0, const CPURegister& dst1,\n@@ -1095,31 +1098,26 @@ void TurboAssembler::Pop(const CPURegister& dst0, const CPURegister& dst1,\n \n   int count = 5 + dst5.IsValid() + dst6.IsValid() + dst7.IsValid();\n   int size = dst0.SizeInBytes();\n+  DCHECK_EQ(0, (size * count) % 16);\n \n   PopHelper(4, size, dst0, dst1, dst2, dst3);\n   PopHelper(count - 4, size, dst4, dst5, dst6, dst7);\n-  PopPostamble(count, size);\n }\n \n void TurboAssembler::Push(const Register& src0, const VRegister& src1) {\n   int size = src0.SizeInBytes() + src1.SizeInBytes();\n+  DCHECK_EQ(0, size % 16);\n \n-  PushPreamble(size);\n   // Reserve room for src0 and push src1.\n   str(src1, MemOperand(sp, -size, PreIndex));\n   // Fill the gap with src0.\n   str(src0, MemOperand(sp, src1.SizeInBytes()));\n }\n \n-\n-void MacroAssembler::PushPopQueue::PushQueued(\n-    PreambleDirective preamble_directive) {\n+void MacroAssembler::PushPopQueue::PushQueued() {\n+  DCHECK_EQ(0, size_ % 16);\n   if (queued_.empty()) return;\n \n-  if (preamble_directive == WITH_PREAMBLE) {\n-    masm_->PushPreamble(size_);\n-  }\n-\n   size_t count = queued_.size();\n   size_t index = 0;\n   while (index < count) {\n@@ -1141,6 +1139,7 @@ void MacroAssembler::PushPopQueue::PushQueued(\n \n \n void MacroAssembler::PushPopQueue::PopQueued() {\n+  DCHECK_EQ(0, size_ % 16);\n   if (queued_.empty()) return;\n \n   size_t count = queued_.size();\n@@ -1159,14 +1158,13 @@ void MacroAssembler::PushPopQueue::PopQueued() {\n                      batch[0], batch[1], batch[2], batch[3]);\n   }\n \n-  masm_->PopPostamble(size_);\n   queued_.clear();\n }\n \n void TurboAssembler::PushCPURegList(CPURegList registers) {\n   int size = registers.RegisterSizeInBytes();\n+  DCHECK_EQ(0, (size * registers.Count()) % 16);\n \n-  PushPreamble(registers.Count(), size);\n   // Push up to four registers at a time.\n   while (!registers.IsEmpty()) {\n     int count_before = registers.Count();\n@@ -1181,6 +1179,7 @@ void TurboAssembler::PushCPURegList(CPURegList registers) {\n \n void TurboAssembler::PopCPURegList(CPURegList registers) {\n   int size = registers.RegisterSizeInBytes();\n+  DCHECK_EQ(0, (size * registers.Count()) % 16);\n \n   // Pop up to four registers at a time.\n   while (!registers.IsEmpty()) {\n@@ -1192,12 +1191,9 @@ void TurboAssembler::PopCPURegList(CPURegList registers) {\n     int count = count_before - registers.Count();\n     PopHelper(count, size, dst0, dst1, dst2, dst3);\n   }\n-  PopPostamble(registers.Count(), size);\n }\n \n void MacroAssembler::PushMultipleTimes(CPURegister src, Register count) {\n-  PushPreamble(Operand(count, UXTW, WhichPowerOf2(src.SizeInBytes())));\n-\n   UseScratchRegisterScope temps(this);\n   Register temp = temps.AcquireSameSizeAs(count);\n \n@@ -1316,39 +1312,6 @@ void TurboAssembler::PopHelper(int count, int size, const CPURegister& dst0,\n   }\n }\n \n-void TurboAssembler::PushPreamble(Operand total_size) {\n-  if (total_size.IsZero()) return;\n-\n-  // The stack pointer must be aligned to 16 bytes on entry, and the total\n-  // size of the specified registers must also be a multiple of 16 bytes.\n-  if (total_size.IsImmediate()) {\n-    DCHECK_EQ(total_size.ImmediateValue() % 16, 0);\n-  }\n-\n-  // Don't check access size for non-immediate sizes. It's difficult to do\n-  // well, and it will be caught by hardware (or the simulator) anyway.\n-}\n-\n-void TurboAssembler::PopPostamble(Operand total_size) {\n-  if (total_size.IsZero()) return;\n-\n-  // The stack pointer must be aligned to 16 bytes on entry, and the total\n-  // size of the specified registers must also be a multiple of 16 bytes.\n-  if (total_size.IsImmediate()) {\n-    DCHECK_EQ(total_size.ImmediateValue() % 16, 0);\n-  }\n-\n-  // Don't check access size for non-immediate sizes. It's difficult to do\n-  // well, and it will be caught by hardware (or the simulator) anyway.\n-}\n-\n-void TurboAssembler::PushPreamble(int count, int size) {\n-  PushPreamble(count * size);\n-}\n-void TurboAssembler::PopPostamble(int count, int size) {\n-  PopPostamble(count * size);\n-}\n-\n void TurboAssembler::Poke(const CPURegister& src, const Operand& offset) {\n   if (offset.IsImmediate()) {\n     DCHECK_GE(offset.ImmediateValue(), 0);\n@@ -1429,7 +1392,7 @@ void MacroAssembler::PopCalleeSavedRegisters() {\n \n void TurboAssembler::AssertSpAligned() {\n   if (emit_debug_code()) {\n-    TrapOnAbortScope trap_on_abort_scope(this);  // Avoid calls to Abort.\n+    HardAbortScope hard_abort(this);  // Avoid calls to Abort.\n     // Arm64 requires the stack pointer to be 16-byte aligned prior to address\n     // calculation.\n     UseScratchRegisterScope scope(this);\n@@ -1563,24 +1526,12 @@ void TurboAssembler::LoadRoot(Register destination, Heap::RootListIndex index) {\n void MacroAssembler::LoadObject(Register result, Handle<Object> object) {\n   AllowDeferredHandleDereference heap_object_check;\n   if (object->IsHeapObject()) {\n-    Move(result, Handle<HeapObject>::cast(object));\n+    Mov(result, Handle<HeapObject>::cast(object));\n   } else {\n     Mov(result, Operand(Smi::cast(*object)));\n   }\n }\n \n-void TurboAssembler::Move(Register dst, Register src) { Mov(dst, src); }\n-\n-void TurboAssembler::Move(Register dst, Handle<HeapObject> value) {\n-  if (FLAG_embedded_builtins) {\n-    if (root_array_available_ && options().isolate_independent_code) {\n-      IndirectLoadConstant(dst, value);\n-      return;\n-    }\n-  }\n-  Mov(dst, value);\n-}\n-\n void TurboAssembler::Move(Register dst, Smi* src) { Mov(dst, src); }\n \n void TurboAssembler::Swap(Register lhs, Register rhs) {\n@@ -1717,14 +1668,12 @@ void TurboAssembler::CallStubDelayed(CodeStub* stub) {\n   DCHECK(AllowThisStubCall(stub));  // Stub calls are not allowed in some stubs.\n   BlockPoolsScope scope(this);\n #ifdef DEBUG\n-  Label start_call;\n-  Bind(&start_call);\n+  Label start;\n+  Bind(&start);\n #endif\n   Operand operand = Operand::EmbeddedCode(stub);\n   near_call(operand.heap_object_request());\n-#ifdef DEBUG\n-  AssertSizeOfCodeGeneratedSince(&start_call, kNearCallSize);\n-#endif\n+  DCHECK_EQ(kNearCallSize, SizeOfCodeGeneratedSince(&start));\n }\n \n void MacroAssembler::CallStub(CodeStub* stub) {\n@@ -1871,9 +1820,9 @@ void TurboAssembler::LoadRootRelative(Register destination, int32_t offset) {\n void TurboAssembler::LoadRootRegisterOffset(Register destination,\n                                             intptr_t offset) {\n   if (offset == 0) {\n-    Move(destination, kRootRegister);\n+    Mov(destination, kRootRegister);\n   } else {\n-    Add(destination, kRootRegister, Operand(offset));\n+    Add(destination, kRootRegister, offset);\n   }\n }\n \n@@ -1896,7 +1845,7 @@ void TurboAssembler::JumpHelper(int64_t offset, RelocInfo::Mode rmode,\n   } else {\n     UseScratchRegisterScope temps(this);\n     Register temp = temps.AcquireX();\n-    uint64_t imm = reinterpret_cast<uint64_t>(pc_) + offset * kInstructionSize;\n+    uint64_t imm = reinterpret_cast<uint64_t>(pc_) + offset * kInstrSize;\n     Mov(temp, Immediate(imm, rmode));\n     Br(temp);\n   }\n@@ -1916,8 +1865,8 @@ static int64_t CalculateTargetOffset(Address target, RelocInfo::Mode rmode,\n   // address at this point, and needs to be encoded as-is.\n   if (rmode != RelocInfo::WASM_CALL && rmode != RelocInfo::WASM_STUB_CALL) {\n     offset -= reinterpret_cast<int64_t>(pc);\n-    DCHECK_EQ(offset % kInstructionSize, 0);\n-    offset = offset / static_cast<int>(kInstructionSize);\n+    DCHECK_EQ(offset % kInstrSize, 0);\n+    offset = offset / static_cast<int>(kInstrSize);\n   }\n   return offset;\n }\n@@ -1950,6 +1899,7 @@ void TurboAssembler::Jump(Handle<Code> code, RelocInfo::Mode rmode,\n       if (isolate()->builtins()->IsBuiltinHandle(code, &builtin_index) &&\n           Builtins::IsIsolateIndependent(builtin_index)) {\n         // Inline the trampoline.\n+        RecordCommentForOffHeapTrampoline(builtin_index);\n         CHECK_NE(builtin_index, Builtins::kNoBuiltinId);\n         UseScratchRegisterScope temps(this);\n         Register scratch = temps.AcquireX();\n@@ -1970,26 +1920,11 @@ void TurboAssembler::Jump(Handle<Code> code, RelocInfo::Mode rmode,\n \n void TurboAssembler::Call(Register target) {\n   BlockPoolsScope scope(this);\n-#ifdef DEBUG\n-  Label start_call;\n-  Bind(&start_call);\n-#endif\n-\n   Blr(target);\n-\n-#ifdef DEBUG\n-  AssertSizeOfCodeGeneratedSince(&start_call, CallSize(target));\n-#endif\n }\n \n-// TurboAssembler::CallSize is sensitive to changes in this function, as it\n-// requires to know how many instructions are used to branch to the target.\n void TurboAssembler::Call(Address target, RelocInfo::Mode rmode) {\n   BlockPoolsScope scope(this);\n-#ifdef DEBUG\n-  Label start_call;\n-  Bind(&start_call);\n-#endif\n \n   if (CanUseNearCallOrJump(rmode)) {\n     int64_t offset = CalculateTargetOffset(target, rmode, pc_);\n@@ -1998,17 +1933,10 @@ void TurboAssembler::Call(Address target, RelocInfo::Mode rmode) {\n   } else {\n     IndirectCall(target, rmode);\n   }\n-#ifdef DEBUG\n-  AssertSizeOfCodeGeneratedSince(&start_call, CallSize(target, rmode));\n-#endif\n }\n \n void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode) {\n   BlockPoolsScope scope(this);\n-#ifdef DEBUG\n-  Label start_call;\n-  Bind(&start_call);\n-#endif\n \n   if (FLAG_embedded_builtins) {\n     if (root_array_available_ && options().isolate_independent_code &&\n@@ -2029,6 +1957,7 @@ void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode) {\n       if (isolate()->builtins()->IsBuiltinHandle(code, &builtin_index) &&\n           Builtins::IsIsolateIndependent(builtin_index)) {\n         // Inline the trampoline.\n+        RecordCommentForOffHeapTrampoline(builtin_index);\n         CHECK_NE(builtin_index, Builtins::kNoBuiltinId);\n         UseScratchRegisterScope temps(this);\n         Register scratch = temps.AcquireX();\n@@ -2045,19 +1974,12 @@ void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode) {\n   } else {\n     IndirectCall(code.address(), rmode);\n   }\n-\n-#ifdef DEBUG\n-  // Check the size of the code generated.\n-  AssertSizeOfCodeGeneratedSince(&start_call, CallSize(code, rmode));\n-#endif\n }\n \n void TurboAssembler::Call(ExternalReference target) {\n   UseScratchRegisterScope temps(this);\n   Register temp = temps.AcquireX();\n-  // Immediate is in charge of setting the relocation mode to\n-  // EXTERNAL_REFERENCE.\n-  Mov(temp, Immediate(target));\n+  Mov(temp, target);\n   Call(temp);\n }\n \n@@ -2078,8 +2000,8 @@ void TurboAssembler::CallForDeoptimization(Address target, int deopt_id,\n \n   BlockPoolsScope scope(this);\n #ifdef DEBUG\n-  Label start_call;\n-  Bind(&start_call);\n+  Label start;\n+  Bind(&start);\n #endif\n   // The deoptimizer requires the deoptimization id to be in x16.\n   UseScratchRegisterScope temps(this);\n@@ -2091,29 +2013,12 @@ void TurboAssembler::CallForDeoptimization(Address target, int deopt_id,\n   movz(temp, deopt_id);\n   int64_t offset = static_cast<int64_t>(target) -\n                    static_cast<int64_t>(options().code_range_start);\n-  DCHECK_EQ(offset % kInstructionSize, 0);\n-  offset = offset / static_cast<int>(kInstructionSize);\n+  DCHECK_EQ(offset % kInstrSize, 0);\n+  offset = offset / static_cast<int>(kInstrSize);\n   DCHECK(IsNearCallOffset(offset));\n   near_call(static_cast<int>(offset), RelocInfo::RUNTIME_ENTRY);\n \n-#ifdef DEBUG\n-  AssertSizeOfCodeGeneratedSince(&start_call, kNearCallSize + kInstructionSize);\n-#endif\n-}\n-\n-int TurboAssembler::CallSize(Register target) {\n-  USE(target);\n-  return kInstructionSize;\n-}\n-\n-int TurboAssembler::CallSize(Address target, RelocInfo::Mode rmode) {\n-  USE(target);\n-  return CanUseNearCallOrJump(rmode) ? kNearCallSize : kFarCallSize;\n-}\n-\n-int TurboAssembler::CallSize(Handle<Code> code, RelocInfo::Mode rmode) {\n-  USE(code);\n-  return CanUseNearCallOrJump(rmode) ? kNearCallSize : kFarCallSize;\n+  DCHECK_EQ(kNearCallSize + kInstrSize, SizeOfCodeGeneratedSince(&start));\n }\n \n void MacroAssembler::TryRepresentDoubleAsInt(Register as_int, VRegister value,\n@@ -2536,7 +2441,7 @@ void MacroAssembler::EnterExitFrame(bool save_doubles, const Register& scratch,\n   Mov(fp, sp);\n   Mov(scratch, StackFrame::TypeToMarker(frame_type));\n   Push(scratch, xzr);\n-  Move(scratch, CodeObject());\n+  Mov(scratch, CodeObject());\n   Push(scratch, padreg);\n   //          fp[8]: CallerPC (lr)\n   //    fp -> fp[0]: CallerFP (old fp)\n@@ -2810,7 +2715,7 @@ int MacroAssembler::SafepointRegisterStackIndex(int reg_code) {\n void MacroAssembler::CheckPageFlag(const Register& object,\n                                    const Register& scratch, int mask,\n                                    Condition cc, Label* condition_met) {\n-  And(scratch, object, ~Page::kPageAlignmentMask);\n+  And(scratch, object, ~kPageAlignmentMask);\n   Ldr(scratch, MemOperand(scratch, MemoryChunk::kFlagsOffset));\n   if (cc == eq) {\n     TestAndBranchIfAnySet(scratch, mask, condition_met);\n@@ -2822,15 +2727,15 @@ void MacroAssembler::CheckPageFlag(const Register& object,\n void TurboAssembler::CheckPageFlagSet(const Register& object,\n                                       const Register& scratch, int mask,\n                                       Label* if_any_set) {\n-  And(scratch, object, ~Page::kPageAlignmentMask);\n+  And(scratch, object, ~kPageAlignmentMask);\n   Ldr(scratch, MemOperand(scratch, MemoryChunk::kFlagsOffset));\n   TestAndBranchIfAnySet(scratch, mask, if_any_set);\n }\n \n void TurboAssembler::CheckPageFlagClear(const Register& object,\n                                         const Register& scratch, int mask,\n                                         Label* if_all_clear) {\n-  And(scratch, object, ~Page::kPageAlignmentMask);\n+  And(scratch, object, ~kPageAlignmentMask);\n   Ldr(scratch, MemOperand(scratch, MemoryChunk::kFlagsOffset));\n   TestAndBranchIfAllClear(scratch, mask, if_all_clear);\n }\n@@ -2930,8 +2835,8 @@ void TurboAssembler::CallRecordWriteStub(\n   Pop(slot_parameter, object_parameter);\n \n   Mov(isolate_parameter, ExternalReference::isolate_address(isolate()));\n-  Move(remembered_set_parameter, Smi::FromEnum(remembered_set_action));\n-  Move(fp_mode_parameter, Smi::FromEnum(fp_mode));\n+  Mov(remembered_set_parameter, Smi::FromEnum(remembered_set_action));\n+  Mov(fp_mode_parameter, Smi::FromEnum(fp_mode));\n   Call(callable.code(), RelocInfo::CODE_TARGET);\n \n   RestoreRegisters(registers);\n@@ -3044,38 +2949,26 @@ void TurboAssembler::Abort(AbortReason reason) {\n   RegList old_tmp_list = TmpList()->list();\n   TmpList()->Combine(MacroAssembler::DefaultTmpList());\n \n-  if (use_real_aborts()) {\n-    // Avoid infinite recursion; Push contains some assertions that use Abort.\n-    NoUseRealAbortsScope no_real_aborts(this);\n-\n-    Move(x1, Smi::FromInt(static_cast<int>(reason)));\n-\n-    if (!has_frame_) {\n-      // We don't actually want to generate a pile of code for this, so just\n-      // claim there is a stack frame, without generating one.\n-      FrameScope scope(this, StackFrame::NONE);\n-      Call(BUILTIN_CODE(isolate(), Abort), RelocInfo::CODE_TARGET);\n-    } else {\n-      Call(BUILTIN_CODE(isolate(), Abort), RelocInfo::CODE_TARGET);\n-    }\n-  } else {\n-    // Load the string to pass to Printf.\n-    Label msg_address;\n-    Adr(x0, &msg_address);\n+  if (should_abort_hard()) {\n+    // We don't care if we constructed a frame. Just pretend we did.\n+    FrameScope assume_frame(this, StackFrame::NONE);\n+    Mov(w0, static_cast<int>(reason));\n+    Call(ExternalReference::abort_with_reason());\n+    return;\n+  }\n \n-    // Call Printf directly to report the error.\n-    CallPrintf();\n+  // Avoid infinite recursion; Push contains some assertions that use Abort.\n+  HardAbortScope hard_aborts(this);\n \n-    // We need a way to stop execution on both the simulator and real hardware,\n-    // and Unreachable() is the best option.\n-    Unreachable();\n+  Mov(x1, Smi::FromInt(static_cast<int>(reason)));\n \n-    // Emit the message string directly in the instruction stream.\n-    {\n-      BlockPoolsScope scope(this);\n-      Bind(&msg_address);\n-      EmitStringData(GetAbortReason(reason));\n-    }\n+  if (!has_frame_) {\n+    // We don't actually want to generate a pile of code for this, so just\n+    // claim there is a stack frame, without generating one.\n+    FrameScope scope(this, StackFrame::NONE);\n+    Call(BUILTIN_CODE(isolate(), Abort), RelocInfo::CODE_TARGET);\n+  } else {\n+    Call(BUILTIN_CODE(isolate(), Abort), RelocInfo::CODE_TARGET);\n   }\n \n   TmpList()->set_list(old_tmp_list);\n@@ -3216,7 +3109,8 @@ void TurboAssembler::CallPrintf(int arg_count, const CPURegister* args) {\n // printf function will use a different instruction set and the procedure-call\n // standard will not be compatible.\n #ifdef USE_SIMULATOR\n-  { InstructionAccurateScope scope(this, kPrintfLength / kInstructionSize);\n+  {\n+    InstructionAccurateScope scope(this, kPrintfLength / kInstrSize);\n     hlt(kImmExceptionIsPrintf);\n     dc32(arg_count);          // kPrintfArgCountOffset\n "
        },
        {
            "sha": "a2862748a6b233b9a1ca8e4fe13af1ebf9844517",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64.h",
            "status": "modified",
            "additions": 6,
            "deletions": 51,
            "changes": 57,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -63,6 +63,7 @@ constexpr Register kJavaScriptCallExtraArg1Register = x2;\n constexpr Register kOffHeapTrampolineRegister = ip0;\n constexpr Register kRuntimeCallFunctionRegister = x1;\n constexpr Register kRuntimeCallArgCountRegister = x0;\n+constexpr Register kRuntimeCallArgvRegister = x11;\n constexpr Register kWasmInstanceRegister = x7;\n \n #define LS_MACRO_LIST(V)                                     \\\n@@ -177,35 +178,14 @@ enum PreShiftImmMode {\n   kAnyShift          // Allow any pre-shift.\n };\n \n-class TurboAssembler : public TurboAssemblerBase {\n+class V8_EXPORT_PRIVATE TurboAssembler : public TurboAssemblerBase {\n  public:\n   TurboAssembler(Isolate* isolate, const AssemblerOptions& options,\n                  void* buffer, int buffer_size,\n                  CodeObjectRequired create_code_object)\n       : TurboAssemblerBase(isolate, options, buffer, buffer_size,\n                            create_code_object) {}\n \n-  // The Abort method should call a V8 runtime function, but the CallRuntime\n-  // mechanism depends on CEntry. If use_real_aborts is false, Abort will\n-  // use a simpler abort mechanism that doesn't depend on CEntry.\n-  //\n-  // The purpose of this is to allow Aborts to be compiled whilst CEntry is\n-  // being generated.\n-  bool use_real_aborts() const { return use_real_aborts_; }\n-\n-  class NoUseRealAbortsScope {\n-   public:\n-    explicit NoUseRealAbortsScope(TurboAssembler* tasm)\n-        : saved_(tasm->use_real_aborts_), tasm_(tasm) {\n-      tasm_->use_real_aborts_ = false;\n-    }\n-    ~NoUseRealAbortsScope() { tasm_->use_real_aborts_ = saved_; }\n-\n-   private:\n-    bool saved_;\n-    TurboAssembler* tasm_;\n-  };\n-\n #if DEBUG\n   void set_allow_macro_instructions(bool value) {\n     allow_macro_instructions_ = value;\n@@ -233,9 +213,7 @@ class TurboAssembler : public TurboAssemblerBase {\n \n   void Mov(const Register& rd, const Operand& operand,\n            DiscardMoveMode discard_mode = kDontDiscardForSameWReg);\n-  void Mov(const Register& rd, ExternalReference reference);\n   void Mov(const Register& rd, uint64_t imm);\n-  inline void Mov(const Register& rd, const Register& rm);\n   void Mov(const VRegister& vd, int vd_index, const VRegister& vn,\n            int vn_index) {\n     DCHECK(allow_macro_instructions());\n@@ -256,8 +234,6 @@ class TurboAssembler : public TurboAssemblerBase {\n \n   // This is required for compatibility with architecture independent code.\n   // Remove if not needed.\n-  void Move(Register dst, Register src);\n-  void Move(Register dst, Handle<HeapObject> value);\n   void Move(Register dst, Smi* src);\n \n   // Register swap. Note that the register operands should be distinct.\n@@ -833,15 +809,6 @@ class TurboAssembler : public TurboAssemblerBase {\n   void CheckPageFlagClear(const Register& object, const Register& scratch,\n                           int mask, Label* if_all_clear);\n \n-  // Perform necessary maintenance operations before a push or after a pop.\n-  //\n-  // Note that size is specified in bytes.\n-  void PushPreamble(Operand total_size);\n-  void PopPostamble(Operand total_size);\n-\n-  void PushPreamble(int count, int size);\n-  void PopPostamble(int count, int size);\n-\n   // Test the bits of register defined by bit_pattern, and branch if ANY of\n   // those bits are set. May corrupt the status flags.\n   inline void TestAndBranchIfAnySet(const Register& reg,\n@@ -900,13 +867,6 @@ class TurboAssembler : public TurboAssemblerBase {\n   void CallForDeoptimization(Address target, int deopt_id,\n                              RelocInfo::Mode rmode);\n \n-  // For every Call variant, there is a matching CallSize function that returns\n-  // the size (in bytes) of the call sequence.\n-  static int CallSize(Register target);\n-  int CallSize(Address target, RelocInfo::Mode rmode);\n-  int CallSize(Handle<Code> code,\n-               RelocInfo::Mode rmode = RelocInfo::CODE_TARGET);\n-\n   // Calls a C function.\n   // The called function is not allowed to trigger a\n   // garbage collection, since that might move the code and invalidate the\n@@ -979,6 +939,7 @@ class TurboAssembler : public TurboAssemblerBase {\n   inline void Fmin(const VRegister& fd, const VRegister& fn,\n                    const VRegister& fm);\n   inline void Rbit(const Register& rd, const Register& rn);\n+  inline void Rev(const Register& rd, const Register& rn);\n \n   enum AdrHint {\n     // The target must be within the immediate range of adr.\n@@ -1274,8 +1235,6 @@ class TurboAssembler : public TurboAssemblerBase {\n   CPURegList tmp_list_ = DefaultTmpList();\n   CPURegList fptmp_list_ = DefaultFPTmpList();\n \n-  bool use_real_aborts_ = true;\n-\n   // Helps resolve branching to labels potentially out of range.\n   // If the label is not bound, it registers the information necessary to later\n   // be able to emit a veneer for this branch if necessary.\n@@ -1609,7 +1568,7 @@ class MacroAssembler : public TurboAssembler {\n   // register sizes and types.\n   class PushPopQueue {\n    public:\n-    explicit PushPopQueue(MacroAssembler* masm) : masm_(masm), size_(0) { }\n+    explicit PushPopQueue(MacroAssembler* masm) : masm_(masm), size_(0) {}\n \n     ~PushPopQueue() {\n       DCHECK(queued_.empty());\n@@ -1620,11 +1579,7 @@ class MacroAssembler : public TurboAssembler {\n       queued_.push_back(rt);\n     }\n \n-    enum PreambleDirective {\n-      WITH_PREAMBLE,\n-      SKIP_PREAMBLE\n-    };\n-    void PushQueued(PreambleDirective preamble_directive = WITH_PREAMBLE);\n+    void PushQueued();\n     void PopQueued();\n \n    private:\n@@ -2076,7 +2031,7 @@ class InstructionAccurateScope BASE_EMBEDDED {\n       : tasm_(tasm)\n #ifdef DEBUG\n         ,\n-        size_(count * kInstructionSize)\n+        size_(count * kInstrSize)\n #endif\n   {\n     // Before blocking the const pool, see if it needs to be emitted."
        },
        {
            "sha": "5df4361c1b17edd3a022e34d1e27fc2d1e0f74d6",
            "filename": "deps/v8/src/arm64/simulator-arm64.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -1081,7 +1081,7 @@ void Simulator::CheckBreakNext() {\n \n \n void Simulator::PrintInstructionsAt(Instruction* start, uint64_t count) {\n-  Instruction* end = start->InstructionAtOffset(count * kInstructionSize);\n+  Instruction* end = start->InstructionAtOffset(count * kInstrSize);\n   for (Instruction* pc = start; pc < end; pc = pc->following()) {\n     disassembler_decoder_->Decode(pc);\n   }\n@@ -3415,7 +3415,7 @@ void Simulator::VisitException(Instruction* instr) {\n         // The stop parameters are inlined in the code. Skip them:\n         //  - Skip to the end of the message string.\n         size_t size = kDebugMessageOffset + strlen(message) + 1;\n-        pc_ = pc_->InstructionAtOffset(RoundUp(size, kInstructionSize));\n+        pc_ = pc_->InstructionAtOffset(RoundUp(size, kInstrSize));\n         //  - Verify that the unreachable marker is present.\n         DCHECK(pc_->Mask(ExceptionMask) == HLT);\n         DCHECK_EQ(pc_->ImmException(), kImmExceptionIsUnreachable);"
        },
        {
            "sha": "c97a759d1bdf47225e55278f17fb35ae995f5e2a",
            "filename": "deps/v8/src/arm64/simulator-arm64.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -774,7 +774,7 @@ class Simulator : public DecoderVisitor, public SimulatorBase {\n   }\n \n   void ExecuteInstruction() {\n-    DCHECK(IsAligned(reinterpret_cast<uintptr_t>(pc_), kInstructionSize));\n+    DCHECK(IsAligned(reinterpret_cast<uintptr_t>(pc_), kInstrSize));\n     CheckBreakNext();\n     Decode(pc_);\n     increment_pc();"
        },
        {
            "sha": "fd973c8a36c2f59292150e9f95ff1bbdb1fda7d8",
            "filename": "deps/v8/src/asmjs/asm-js.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 10,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -23,6 +23,7 @@\n \n #include \"src/wasm/wasm-engine.h\"\n #include \"src/wasm/wasm-js.h\"\n+#include \"src/wasm/wasm-limits.h\"\n #include \"src/wasm/wasm-module-builder.h\"\n #include \"src/wasm/wasm-objects-inl.h\"\n #include \"src/wasm/wasm-result.h\"\n@@ -329,6 +330,28 @@ UnoptimizedCompilationJob* AsmJs::NewCompilationJob(\n   return new AsmJsCompilationJob(parse_info, literal, allocator);\n }\n \n+namespace {\n+inline bool IsValidAsmjsMemorySize(size_t size) {\n+  // Enforce asm.js spec minimum size.\n+  if (size < (1u << 12u)) return false;\n+  // Enforce engine-limited maximum allocation size.\n+  if (size > wasm::kV8MaxWasmMemoryBytes) return false;\n+  // Enforce flag-limited maximum allocation size.\n+  if (size > (FLAG_wasm_max_mem_pages * uint64_t{wasm::kWasmPageSize})) {\n+    return false;\n+  }\n+  // Enforce power-of-2 sizes for 2^12 - 2^24.\n+  if (size < (1u << 24u)) {\n+    uint32_t size32 = static_cast<uint32_t>(size);\n+    return base::bits::IsPowerOfTwo(size32);\n+  }\n+  // Enforce multiple of 2^24 for sizes >= 2^24\n+  if ((size % (1u << 24u)) != 0) return false;\n+  // All checks passed!\n+  return true;\n+}\n+}  // namespace\n+\n MaybeHandle<Object> AsmJs::InstantiateAsmWasm(Isolate* isolate,\n                                               Handle<SharedFunctionInfo> shared,\n                                               Handle<FixedArray> wasm_data,\n@@ -369,15 +392,9 @@ MaybeHandle<Object> AsmJs::InstantiateAsmWasm(Isolate* isolate,\n     }\n     memory->set_is_growable(false);\n     size_t size = NumberToSize(memory->byte_length());\n-    // TODO(mstarzinger): We currently only limit byte length of the buffer to\n-    // be a multiple of 8, we should enforce the stricter spec limits here.\n-    if (size % FixedTypedArrayBase::kMaxElementSize != 0) {\n-      ReportInstantiationFailure(script, position, \"Unexpected heap size\");\n-      return MaybeHandle<Object>();\n-    }\n-    // Currently WebAssembly only supports heap sizes within the uint32_t range.\n-    if (size > std::numeric_limits<uint32_t>::max()) {\n-      ReportInstantiationFailure(script, position, \"Unexpected heap size\");\n+    // Check the asm.js heap size against the valid limits.\n+    if (!IsValidAsmjsMemorySize(size)) {\n+      ReportInstantiationFailure(script, position, \"Invalid heap size\");\n       return MaybeHandle<Object>();\n     }\n   } else {\n@@ -392,8 +409,14 @@ MaybeHandle<Object> AsmJs::InstantiateAsmWasm(Isolate* isolate,\n     // An exception caused by the module start function will be set as pending\n     // and bypass the {ErrorThrower}, this happens in case of a stack overflow.\n     if (isolate->has_pending_exception()) isolate->clear_pending_exception();\n+    if (thrower.error()) {\n+      ScopedVector<char> error_reason(100);\n+      SNPrintF(error_reason, \"Internal wasm failure: %s\", thrower.error_msg());\n+      ReportInstantiationFailure(script, position, error_reason.start());\n+    } else {\n+      ReportInstantiationFailure(script, position, \"Internal wasm failure\");\n+    }\n     thrower.Reset();  // Ensure exceptions do not propagate.\n-    ReportInstantiationFailure(script, position, \"Internal wasm failure\");\n     return MaybeHandle<Object>();\n   }\n   DCHECK(!thrower.error());"
        },
        {
            "sha": "443c6ee1aeaff2f674d18871e1faa0ed6201088c",
            "filename": "deps/v8/src/assembler-arch-inl.h",
            "status": "added",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fassembler-arch-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fassembler-arch-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler-arch-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -0,0 +1,30 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_ASSEMBLER_ARCH_INL_H_\n+#define V8_ASSEMBLER_ARCH_INL_H_\n+\n+#include \"src/assembler-inl.h\"\n+\n+#if V8_TARGET_ARCH_IA32\n+#include \"src/ia32/assembler-ia32-inl.h\"\n+#elif V8_TARGET_ARCH_X64\n+#include \"src/x64/assembler-x64-inl.h\"\n+#elif V8_TARGET_ARCH_ARM64\n+#include \"src/arm64/assembler-arm64-inl.h\"\n+#elif V8_TARGET_ARCH_ARM\n+#include \"src/arm/assembler-arm-inl.h\"\n+#elif V8_TARGET_ARCH_PPC\n+#include \"src/ppc/assembler-ppc-inl.h\"\n+#elif V8_TARGET_ARCH_MIPS\n+#include \"src/mips/assembler-mips-inl.h\"\n+#elif V8_TARGET_ARCH_MIPS64\n+#include \"src/mips64/assembler-mips64-inl.h\"\n+#elif V8_TARGET_ARCH_S390\n+#include \"src/s390/assembler-s390-inl.h\"\n+#else\n+#error Unknown architecture.\n+#endif\n+\n+#endif  // V8_ASSEMBLER_ARCH_INL_H_"
        },
        {
            "sha": "0f216052f3fa7cc01876c26d65e897d834db1750",
            "filename": "deps/v8/src/assembler.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 530,
            "changes": 530,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fassembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fassembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -48,8 +48,6 @@\n namespace v8 {\n namespace internal {\n \n-const char* const RelocInfo::kFillerCommentString = \"DEOPTIMIZATION PADDING\";\n-\n AssemblerOptions AssemblerOptions::Default(\n     Isolate* isolate, bool explicitly_support_serialization) {\n   AssemblerOptions options;\n@@ -62,7 +60,6 @@ AssemblerOptions AssemblerOptions::Default(\n   // might be run on real hardware.\n   options.enable_simulator_code = !serializer;\n #endif\n-  options.isolate_independent_code = isolate->ShouldLoadConstantsFromRootList();\n   options.inline_offheap_trampolines = !serializer;\n #if V8_TARGET_ARCH_X64 || V8_TARGET_ARCH_ARM64\n   options.code_range_start =\n@@ -150,533 +147,6 @@ unsigned CpuFeatures::supported_ = 0;\n unsigned CpuFeatures::icache_line_size_ = 0;\n unsigned CpuFeatures::dcache_line_size_ = 0;\n \n-// -----------------------------------------------------------------------------\n-// Implementation of RelocInfoWriter and RelocIterator\n-//\n-// Relocation information is written backwards in memory, from high addresses\n-// towards low addresses, byte by byte.  Therefore, in the encodings listed\n-// below, the first byte listed it at the highest address, and successive\n-// bytes in the record are at progressively lower addresses.\n-//\n-// Encoding\n-//\n-// The most common modes are given single-byte encodings.  Also, it is\n-// easy to identify the type of reloc info and skip unwanted modes in\n-// an iteration.\n-//\n-// The encoding relies on the fact that there are fewer than 14\n-// different relocation modes using standard non-compact encoding.\n-//\n-// The first byte of a relocation record has a tag in its low 2 bits:\n-// Here are the record schemes, depending on the low tag and optional higher\n-// tags.\n-//\n-// Low tag:\n-//   00: embedded_object:      [6-bit pc delta] 00\n-//\n-//   01: code_target:          [6-bit pc delta] 01\n-//\n-//   10: wasm_stub_call:       [6-bit pc delta] 10\n-//\n-//   11: long_record           [6 bit reloc mode] 11\n-//                             followed by pc delta\n-//                             followed by optional data depending on type.\n-//\n-//  If a pc delta exceeds 6 bits, it is split into a remainder that fits into\n-//  6 bits and a part that does not. The latter is encoded as a long record\n-//  with PC_JUMP as pseudo reloc info mode. The former is encoded as part of\n-//  the following record in the usual way. The long pc jump record has variable\n-//  length:\n-//               pc-jump:        [PC_JUMP] 11\n-//                               [7 bits data] 0\n-//                                  ...\n-//                               [7 bits data] 1\n-//               (Bits 6..31 of pc delta, with leading zeroes\n-//                dropped, and last non-zero chunk tagged with 1.)\n-\n-const int kTagBits = 2;\n-const int kTagMask = (1 << kTagBits) - 1;\n-const int kLongTagBits = 6;\n-\n-const int kEmbeddedObjectTag = 0;\n-const int kCodeTargetTag = 1;\n-const int kWasmStubCallTag = 2;\n-const int kDefaultTag = 3;\n-\n-const int kSmallPCDeltaBits = kBitsPerByte - kTagBits;\n-const int kSmallPCDeltaMask = (1 << kSmallPCDeltaBits) - 1;\n-const int RelocInfo::kMaxSmallPCDelta = kSmallPCDeltaMask;\n-\n-const int kChunkBits = 7;\n-const int kChunkMask = (1 << kChunkBits) - 1;\n-const int kLastChunkTagBits = 1;\n-const int kLastChunkTagMask = 1;\n-const int kLastChunkTag = 1;\n-\n-uint32_t RelocInfoWriter::WriteLongPCJump(uint32_t pc_delta) {\n-  // Return if the pc_delta can fit in kSmallPCDeltaBits bits.\n-  // Otherwise write a variable length PC jump for the bits that do\n-  // not fit in the kSmallPCDeltaBits bits.\n-  if (is_uintn(pc_delta, kSmallPCDeltaBits)) return pc_delta;\n-  WriteMode(RelocInfo::PC_JUMP);\n-  uint32_t pc_jump = pc_delta >> kSmallPCDeltaBits;\n-  DCHECK_GT(pc_jump, 0);\n-  // Write kChunkBits size chunks of the pc_jump.\n-  for (; pc_jump > 0; pc_jump = pc_jump >> kChunkBits) {\n-    byte b = pc_jump & kChunkMask;\n-    *--pos_ = b << kLastChunkTagBits;\n-  }\n-  // Tag the last chunk so it can be identified.\n-  *pos_ = *pos_ | kLastChunkTag;\n-  // Return the remaining kSmallPCDeltaBits of the pc_delta.\n-  return pc_delta & kSmallPCDeltaMask;\n-}\n-\n-void RelocInfoWriter::WriteShortTaggedPC(uint32_t pc_delta, int tag) {\n-  // Write a byte of tagged pc-delta, possibly preceded by an explicit pc-jump.\n-  pc_delta = WriteLongPCJump(pc_delta);\n-  *--pos_ = pc_delta << kTagBits | tag;\n-}\n-\n-void RelocInfoWriter::WriteShortData(intptr_t data_delta) {\n-  *--pos_ = static_cast<byte>(data_delta);\n-}\n-\n-void RelocInfoWriter::WriteMode(RelocInfo::Mode rmode) {\n-  STATIC_ASSERT(RelocInfo::NUMBER_OF_MODES <= (1 << kLongTagBits));\n-  *--pos_ = static_cast<int>((rmode << kTagBits) | kDefaultTag);\n-}\n-\n-void RelocInfoWriter::WriteModeAndPC(uint32_t pc_delta, RelocInfo::Mode rmode) {\n-  // Write two-byte tagged pc-delta, possibly preceded by var. length pc-jump.\n-  pc_delta = WriteLongPCJump(pc_delta);\n-  WriteMode(rmode);\n-  *--pos_ = pc_delta;\n-}\n-\n-void RelocInfoWriter::WriteIntData(int number) {\n-  for (int i = 0; i < kIntSize; i++) {\n-    *--pos_ = static_cast<byte>(number);\n-    // Signed right shift is arithmetic shift.  Tested in test-utils.cc.\n-    number = number >> kBitsPerByte;\n-  }\n-}\n-\n-void RelocInfoWriter::WriteData(intptr_t data_delta) {\n-  for (int i = 0; i < kIntptrSize; i++) {\n-    *--pos_ = static_cast<byte>(data_delta);\n-    // Signed right shift is arithmetic shift.  Tested in test-utils.cc.\n-    data_delta = data_delta >> kBitsPerByte;\n-  }\n-}\n-\n-void RelocInfoWriter::Write(const RelocInfo* rinfo) {\n-  RelocInfo::Mode rmode = rinfo->rmode();\n-#ifdef DEBUG\n-  byte* begin_pos = pos_;\n-#endif\n-  DCHECK(rinfo->rmode() < RelocInfo::NUMBER_OF_MODES);\n-  DCHECK_GE(rinfo->pc() - reinterpret_cast<Address>(last_pc_), 0);\n-  // Use unsigned delta-encoding for pc.\n-  uint32_t pc_delta =\n-      static_cast<uint32_t>(rinfo->pc() - reinterpret_cast<Address>(last_pc_));\n-\n-  // The two most common modes are given small tags, and usually fit in a byte.\n-  if (rmode == RelocInfo::EMBEDDED_OBJECT) {\n-    WriteShortTaggedPC(pc_delta, kEmbeddedObjectTag);\n-  } else if (rmode == RelocInfo::CODE_TARGET) {\n-    WriteShortTaggedPC(pc_delta, kCodeTargetTag);\n-    DCHECK_LE(begin_pos - pos_, RelocInfo::kMaxCallSize);\n-  } else if (rmode == RelocInfo::WASM_STUB_CALL) {\n-    WriteShortTaggedPC(pc_delta, kWasmStubCallTag);\n-  } else {\n-    WriteModeAndPC(pc_delta, rmode);\n-    if (RelocInfo::IsComment(rmode)) {\n-      WriteData(rinfo->data());\n-    } else if (RelocInfo::IsDeoptReason(rmode)) {\n-      DCHECK_LT(rinfo->data(), 1 << kBitsPerByte);\n-      WriteShortData(rinfo->data());\n-    } else if (RelocInfo::IsConstPool(rmode) ||\n-               RelocInfo::IsVeneerPool(rmode) || RelocInfo::IsDeoptId(rmode) ||\n-               RelocInfo::IsDeoptPosition(rmode)) {\n-      WriteIntData(static_cast<int>(rinfo->data()));\n-    }\n-  }\n-  last_pc_ = reinterpret_cast<byte*>(rinfo->pc());\n-#ifdef DEBUG\n-  DCHECK_LE(begin_pos - pos_, kMaxSize);\n-#endif\n-}\n-\n-inline int RelocIterator::AdvanceGetTag() {\n-  return *--pos_ & kTagMask;\n-}\n-\n-inline RelocInfo::Mode RelocIterator::GetMode() {\n-  return static_cast<RelocInfo::Mode>((*pos_ >> kTagBits) &\n-                                      ((1 << kLongTagBits) - 1));\n-}\n-\n-inline void RelocIterator::ReadShortTaggedPC() {\n-  rinfo_.pc_ += *pos_ >> kTagBits;\n-}\n-\n-inline void RelocIterator::AdvanceReadPC() {\n-  rinfo_.pc_ += *--pos_;\n-}\n-\n-void RelocIterator::AdvanceReadInt() {\n-  int x = 0;\n-  for (int i = 0; i < kIntSize; i++) {\n-    x |= static_cast<int>(*--pos_) << i * kBitsPerByte;\n-  }\n-  rinfo_.data_ = x;\n-}\n-\n-void RelocIterator::AdvanceReadData() {\n-  intptr_t x = 0;\n-  for (int i = 0; i < kIntptrSize; i++) {\n-    x |= static_cast<intptr_t>(*--pos_) << i * kBitsPerByte;\n-  }\n-  rinfo_.data_ = x;\n-}\n-\n-void RelocIterator::AdvanceReadLongPCJump() {\n-  // Read the 32-kSmallPCDeltaBits most significant bits of the\n-  // pc jump in kChunkBits bit chunks and shift them into place.\n-  // Stop when the last chunk is encountered.\n-  uint32_t pc_jump = 0;\n-  for (int i = 0; i < kIntSize; i++) {\n-    byte pc_jump_part = *--pos_;\n-    pc_jump |= (pc_jump_part >> kLastChunkTagBits) << i * kChunkBits;\n-    if ((pc_jump_part & kLastChunkTagMask) == 1) break;\n-  }\n-  // The least significant kSmallPCDeltaBits bits will be added\n-  // later.\n-  rinfo_.pc_ += pc_jump << kSmallPCDeltaBits;\n-}\n-\n-inline void RelocIterator::ReadShortData() {\n-  uint8_t unsigned_b = *pos_;\n-  rinfo_.data_ = unsigned_b;\n-}\n-\n-void RelocIterator::next() {\n-  DCHECK(!done());\n-  // Basically, do the opposite of RelocInfoWriter::Write.\n-  // Reading of data is as far as possible avoided for unwanted modes,\n-  // but we must always update the pc.\n-  //\n-  // We exit this loop by returning when we find a mode we want.\n-  while (pos_ > end_) {\n-    int tag = AdvanceGetTag();\n-    if (tag == kEmbeddedObjectTag) {\n-      ReadShortTaggedPC();\n-      if (SetMode(RelocInfo::EMBEDDED_OBJECT)) return;\n-    } else if (tag == kCodeTargetTag) {\n-      ReadShortTaggedPC();\n-      if (SetMode(RelocInfo::CODE_TARGET)) return;\n-    } else if (tag == kWasmStubCallTag) {\n-      ReadShortTaggedPC();\n-      if (SetMode(RelocInfo::WASM_STUB_CALL)) return;\n-    } else {\n-      DCHECK_EQ(tag, kDefaultTag);\n-      RelocInfo::Mode rmode = GetMode();\n-      if (rmode == RelocInfo::PC_JUMP) {\n-        AdvanceReadLongPCJump();\n-      } else {\n-        AdvanceReadPC();\n-        if (RelocInfo::IsComment(rmode)) {\n-          if (SetMode(rmode)) {\n-            AdvanceReadData();\n-            return;\n-          }\n-          Advance(kIntptrSize);\n-        } else if (RelocInfo::IsDeoptReason(rmode)) {\n-          Advance();\n-          if (SetMode(rmode)) {\n-            ReadShortData();\n-            return;\n-          }\n-        } else if (RelocInfo::IsConstPool(rmode) ||\n-                   RelocInfo::IsVeneerPool(rmode) ||\n-                   RelocInfo::IsDeoptId(rmode) ||\n-                   RelocInfo::IsDeoptPosition(rmode)) {\n-          if (SetMode(rmode)) {\n-            AdvanceReadInt();\n-            return;\n-          }\n-          Advance(kIntSize);\n-        } else if (SetMode(static_cast<RelocInfo::Mode>(rmode))) {\n-          return;\n-        }\n-      }\n-    }\n-  }\n-  done_ = true;\n-}\n-\n-RelocIterator::RelocIterator(Code* code, int mode_mask)\n-    : RelocIterator(code, code->raw_instruction_start(), code->constant_pool(),\n-                    code->relocation_end(), code->relocation_start(),\n-                    mode_mask) {}\n-\n-RelocIterator::RelocIterator(const CodeReference code_reference, int mode_mask)\n-    : RelocIterator(nullptr, code_reference.instruction_start(),\n-                    code_reference.constant_pool(),\n-                    code_reference.relocation_end(),\n-                    code_reference.relocation_start(), mode_mask) {}\n-\n-RelocIterator::RelocIterator(EmbeddedData* embedded_data, Code* code,\n-                             int mode_mask)\n-    : RelocIterator(\n-          code, embedded_data->InstructionStartOfBuiltin(code->builtin_index()),\n-          code->constant_pool(),\n-          code->relocation_start() + code->relocation_size(),\n-          code->relocation_start(), mode_mask) {}\n-\n-RelocIterator::RelocIterator(const CodeDesc& desc, int mode_mask)\n-    : RelocIterator(nullptr, reinterpret_cast<Address>(desc.buffer), 0,\n-                    desc.buffer + desc.buffer_size,\n-                    desc.buffer + desc.buffer_size - desc.reloc_size,\n-                    mode_mask) {}\n-\n-RelocIterator::RelocIterator(Vector<byte> instructions,\n-                             Vector<const byte> reloc_info, Address const_pool,\n-                             int mode_mask)\n-    : RelocIterator(nullptr, reinterpret_cast<Address>(instructions.start()),\n-                    const_pool, reloc_info.start() + reloc_info.size(),\n-                    reloc_info.start(), mode_mask) {}\n-\n-RelocIterator::RelocIterator(Code* host, Address pc, Address constant_pool,\n-                             const byte* pos, const byte* end, int mode_mask)\n-    : pos_(pos), end_(end), mode_mask_(mode_mask) {\n-  // Relocation info is read backwards.\n-  DCHECK_GE(pos_, end_);\n-  rinfo_.host_ = host;\n-  rinfo_.pc_ = pc;\n-  rinfo_.constant_pool_ = constant_pool;\n-  if (mode_mask_ == 0) pos_ = end_;\n-  next();\n-}\n-\n-// -----------------------------------------------------------------------------\n-// Implementation of RelocInfo\n-\n-// static\n-bool RelocInfo::OffHeapTargetIsCodedSpecially() {\n-#if defined(V8_TARGET_ARCH_ARM) || defined(V8_TARGET_ARCH_ARM64) || \\\n-    defined(V8_TARGET_ARCH_X64) || defined(V8_TARGET_ARCH_IA32)\n-  return false;\n-#elif defined(V8_TARGET_ARCH_MIPS) || defined(V8_TARGET_ARCH_MIPS64) || \\\n-    defined(V8_TARGET_ARCH_PPC) || defined(V8_TARGET_ARCH_S390)\n-  return true;\n-#endif\n-}\n-\n-Address RelocInfo::wasm_call_address() const {\n-  DCHECK_EQ(rmode_, WASM_CALL);\n-  return Assembler::target_address_at(pc_, constant_pool_);\n-}\n-\n-void RelocInfo::set_wasm_call_address(Address address,\n-                                      ICacheFlushMode icache_flush_mode) {\n-  DCHECK_EQ(rmode_, WASM_CALL);\n-  Assembler::set_target_address_at(pc_, constant_pool_, address,\n-                                   icache_flush_mode);\n-}\n-\n-Address RelocInfo::wasm_stub_call_address() const {\n-  DCHECK_EQ(rmode_, WASM_STUB_CALL);\n-  return Assembler::target_address_at(pc_, constant_pool_);\n-}\n-\n-void RelocInfo::set_wasm_stub_call_address(Address address,\n-                                           ICacheFlushMode icache_flush_mode) {\n-  DCHECK_EQ(rmode_, WASM_STUB_CALL);\n-  Assembler::set_target_address_at(pc_, constant_pool_, address,\n-                                   icache_flush_mode);\n-}\n-\n-void RelocInfo::set_target_address(Address target,\n-                                   WriteBarrierMode write_barrier_mode,\n-                                   ICacheFlushMode icache_flush_mode) {\n-  DCHECK(IsCodeTargetMode(rmode_) || IsRuntimeEntry(rmode_) ||\n-         IsWasmCall(rmode_));\n-  Assembler::set_target_address_at(pc_, constant_pool_, target,\n-                                   icache_flush_mode);\n-  if (write_barrier_mode == UPDATE_WRITE_BARRIER && host() != nullptr &&\n-      IsCodeTargetMode(rmode_)) {\n-    Code* target_code = Code::GetCodeFromTargetAddress(target);\n-    host()->GetHeap()->incremental_marking()->RecordWriteIntoCode(host(), this,\n-                                                                  target_code);\n-  }\n-}\n-\n-#ifdef DEBUG\n-bool RelocInfo::RequiresRelocation(const CodeDesc& desc) {\n-  // Ensure there are no code targets or embedded objects present in the\n-  // deoptimization entries, they would require relocation after code\n-  // generation.\n-  int mode_mask = RelocInfo::ModeMask(RelocInfo::CODE_TARGET) |\n-                  RelocInfo::ModeMask(RelocInfo::RELATIVE_CODE_TARGET) |\n-                  RelocInfo::ModeMask(RelocInfo::EMBEDDED_OBJECT) |\n-                  RelocInfo::kApplyMask;\n-  RelocIterator it(desc, mode_mask);\n-  return !it.done();\n-}\n-#endif\n-\n-#ifdef ENABLE_DISASSEMBLER\n-const char* RelocInfo::RelocModeName(RelocInfo::Mode rmode) {\n-  switch (rmode) {\n-    case NONE:\n-      return \"no reloc\";\n-    case EMBEDDED_OBJECT:\n-      return \"embedded object\";\n-    case CODE_TARGET:\n-      return \"code target\";\n-    case RELATIVE_CODE_TARGET:\n-      return \"relative code target\";\n-    case RUNTIME_ENTRY:\n-      return \"runtime entry\";\n-    case COMMENT:\n-      return \"comment\";\n-    case EXTERNAL_REFERENCE:\n-      return \"external reference\";\n-    case INTERNAL_REFERENCE:\n-      return \"internal reference\";\n-    case INTERNAL_REFERENCE_ENCODED:\n-      return \"encoded internal reference\";\n-    case OFF_HEAP_TARGET:\n-      return \"off heap target\";\n-    case DEOPT_SCRIPT_OFFSET:\n-      return \"deopt script offset\";\n-    case DEOPT_INLINING_ID:\n-      return \"deopt inlining id\";\n-    case DEOPT_REASON:\n-      return \"deopt reason\";\n-    case DEOPT_ID:\n-      return \"deopt index\";\n-    case CONST_POOL:\n-      return \"constant pool\";\n-    case VENEER_POOL:\n-      return \"veneer pool\";\n-    case WASM_CALL:\n-      return \"internal wasm call\";\n-    case WASM_STUB_CALL:\n-      return \"wasm stub call\";\n-    case JS_TO_WASM_CALL:\n-      return \"js to wasm call\";\n-    case NUMBER_OF_MODES:\n-    case PC_JUMP:\n-      UNREACHABLE();\n-  }\n-  return \"unknown relocation type\";\n-}\n-\n-void RelocInfo::Print(Isolate* isolate, std::ostream& os) {  // NOLINT\n-  os << reinterpret_cast<const void*>(pc_) << \"  \" << RelocModeName(rmode_);\n-  if (IsComment(rmode_)) {\n-    os << \"  (\" << reinterpret_cast<char*>(data_) << \")\";\n-  } else if (rmode_ == DEOPT_SCRIPT_OFFSET || rmode_ == DEOPT_INLINING_ID) {\n-    os << \"  (\" << data() << \")\";\n-  } else if (rmode_ == DEOPT_REASON) {\n-    os << \"  (\"\n-       << DeoptimizeReasonToString(static_cast<DeoptimizeReason>(data_)) << \")\";\n-  } else if (rmode_ == EMBEDDED_OBJECT) {\n-    os << \"  (\" << Brief(target_object()) << \")\";\n-  } else if (rmode_ == EXTERNAL_REFERENCE) {\n-    if (isolate) {\n-      ExternalReferenceEncoder ref_encoder(isolate);\n-      os << \" (\"\n-         << ref_encoder.NameOfAddress(isolate, target_external_reference())\n-         << \") \";\n-    }\n-    os << \" (\" << reinterpret_cast<const void*>(target_external_reference())\n-       << \")\";\n-  } else if (IsCodeTargetMode(rmode_)) {\n-    const Address code_target = target_address();\n-    Code* code = Code::GetCodeFromTargetAddress(code_target);\n-    DCHECK(code->IsCode());\n-    os << \" (\" << Code::Kind2String(code->kind());\n-    if (Builtins::IsBuiltin(code)) {\n-      os << \" \" << Builtins::name(code->builtin_index());\n-    } else if (code->kind() == Code::STUB) {\n-      os << \" \" << CodeStub::MajorName(CodeStub::GetMajorKey(code));\n-    }\n-    os << \")  (\" << reinterpret_cast<const void*>(target_address()) << \")\";\n-  } else if (IsRuntimeEntry(rmode_) && isolate->deoptimizer_data() != nullptr) {\n-    // Deoptimization bailouts are stored as runtime entries.\n-    DeoptimizeKind type;\n-    if (Deoptimizer::IsDeoptimizationEntry(isolate, target_address(), &type)) {\n-      int id = GetDeoptimizationId(isolate, type);\n-      os << \"  (\" << Deoptimizer::MessageFor(type) << \" deoptimization bailout \"\n-         << id << \")\";\n-    }\n-  } else if (IsConstPool(rmode_)) {\n-    os << \" (size \" << static_cast<int>(data_) << \")\";\n-  }\n-\n-  os << \"\\n\";\n-}\n-#endif  // ENABLE_DISASSEMBLER\n-\n-#ifdef VERIFY_HEAP\n-void RelocInfo::Verify(Isolate* isolate) {\n-  switch (rmode_) {\n-    case EMBEDDED_OBJECT:\n-      Object::VerifyPointer(isolate, target_object());\n-      break;\n-    case CODE_TARGET:\n-    case RELATIVE_CODE_TARGET: {\n-      // convert inline target address to code object\n-      Address addr = target_address();\n-      CHECK_NE(addr, kNullAddress);\n-      // Check that we can find the right code object.\n-      Code* code = Code::GetCodeFromTargetAddress(addr);\n-      Object* found = isolate->FindCodeObject(addr);\n-      CHECK(found->IsCode());\n-      CHECK(code->address() == HeapObject::cast(found)->address());\n-      break;\n-    }\n-    case INTERNAL_REFERENCE:\n-    case INTERNAL_REFERENCE_ENCODED: {\n-      Address target = target_internal_reference();\n-      Address pc = target_internal_reference_address();\n-      Code* code = Code::cast(isolate->FindCodeObject(pc));\n-      CHECK(target >= code->InstructionStart());\n-      CHECK(target <= code->InstructionEnd());\n-      break;\n-    }\n-    case OFF_HEAP_TARGET: {\n-      Address addr = target_off_heap_target();\n-      CHECK_NE(addr, kNullAddress);\n-      CHECK_NOT_NULL(InstructionStream::TryLookupCode(isolate, addr));\n-      break;\n-    }\n-    case RUNTIME_ENTRY:\n-    case COMMENT:\n-    case EXTERNAL_REFERENCE:\n-    case DEOPT_SCRIPT_OFFSET:\n-    case DEOPT_INLINING_ID:\n-    case DEOPT_REASON:\n-    case DEOPT_ID:\n-    case CONST_POOL:\n-    case VENEER_POOL:\n-    case WASM_CALL:\n-    case WASM_STUB_CALL:\n-    case JS_TO_WASM_CALL:\n-    case NONE:\n-      break;\n-    case NUMBER_OF_MODES:\n-    case PC_JUMP:\n-      UNREACHABLE();\n-      break;\n-  }\n-}\n-#endif  // VERIFY_HEAP\n-\n ConstantPoolBuilder::ConstantPoolBuilder(int ptr_reach_bits,\n                                          int double_reach_bits) {\n   info_[ConstantPoolEntry::INTPTR].entries.reserve(64);"
        },
        {
            "sha": "b108c5dfff7487d114b83b646ad18be6c33bcc05",
            "filename": "deps/v8/src/assembler.h",
            "status": "modified",
            "additions": 2,
            "deletions": 421,
            "changes": 423,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fassembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fassembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -51,6 +51,7 @@\n #include \"src/objects.h\"\n #include \"src/register-configuration.h\"\n #include \"src/reglist.h\"\n+#include \"src/reloc-info.h\"\n \n namespace v8 {\n \n@@ -171,7 +172,7 @@ struct V8_EXPORT_PRIVATE AssemblerOptions {\n       Isolate* isolate, bool explicitly_support_serialization = false);\n };\n \n-class AssemblerBase : public Malloced {\n+class V8_EXPORT_PRIVATE AssemblerBase : public Malloced {\n  public:\n   AssemblerBase(const AssemblerOptions& options, void* buffer, int buffer_size);\n   virtual ~AssemblerBase();\n@@ -415,426 +416,6 @@ class CpuFeatures : public AllStatic {\n   DISALLOW_COPY_AND_ASSIGN(CpuFeatures);\n };\n \n-// Specifies whether to perform icache flush operations on RelocInfo updates.\n-// If FLUSH_ICACHE_IF_NEEDED, the icache will always be flushed if an\n-// instruction was modified. If SKIP_ICACHE_FLUSH the flush will always be\n-// skipped (only use this if you will flush the icache manually before it is\n-// executed).\n-enum ICacheFlushMode { FLUSH_ICACHE_IF_NEEDED, SKIP_ICACHE_FLUSH };\n-\n-// -----------------------------------------------------------------------------\n-// Relocation information\n-\n-\n-// Relocation information consists of the address (pc) of the datum\n-// to which the relocation information applies, the relocation mode\n-// (rmode), and an optional data field. The relocation mode may be\n-// \"descriptive\" and not indicate a need for relocation, but simply\n-// describe a property of the datum. Such rmodes are useful for GC\n-// and nice disassembly output.\n-\n-class RelocInfo {\n- public:\n-  // This string is used to add padding comments to the reloc info in cases\n-  // where we are not sure to have enough space for patching in during\n-  // lazy deoptimization. This is the case if we have indirect calls for which\n-  // we do not normally record relocation info.\n-  static const char* const kFillerCommentString;\n-\n-  // The minimum size of a comment is equal to two bytes for the extra tagged\n-  // pc and kPointerSize for the actual pointer to the comment.\n-  static const int kMinRelocCommentSize = 2 + kPointerSize;\n-\n-  // The maximum size for a call instruction including pc-jump.\n-  static const int kMaxCallSize = 6;\n-\n-  // The maximum pc delta that will use the short encoding.\n-  static const int kMaxSmallPCDelta;\n-\n-  enum Mode : int8_t {\n-    // Please note the order is important (see IsRealRelocMode, IsGCRelocMode,\n-    // and IsShareableRelocMode predicates below).\n-\n-    CODE_TARGET,\n-    RELATIVE_CODE_TARGET,  // LAST_CODE_TARGET_MODE\n-    EMBEDDED_OBJECT,       // LAST_GCED_ENUM\n-\n-    JS_TO_WASM_CALL,\n-    WASM_CALL,  // FIRST_SHAREABLE_RELOC_MODE\n-    WASM_STUB_CALL,\n-\n-    RUNTIME_ENTRY,\n-    COMMENT,\n-\n-    EXTERNAL_REFERENCE,  // The address of an external C++ function.\n-    INTERNAL_REFERENCE,  // An address inside the same function.\n-\n-    // Encoded internal reference, used only on MIPS, MIPS64 and PPC.\n-    INTERNAL_REFERENCE_ENCODED,\n-\n-    // An off-heap instruction stream target. See http://goo.gl/Z2HUiM.\n-    OFF_HEAP_TARGET,\n-\n-    // Marks constant and veneer pools. Only used on ARM and ARM64.\n-    // They use a custom noncompact encoding.\n-    CONST_POOL,\n-    VENEER_POOL,\n-\n-    DEOPT_SCRIPT_OFFSET,\n-    DEOPT_INLINING_ID,  // Deoptimization source position.\n-    DEOPT_REASON,       // Deoptimization reason index.\n-    DEOPT_ID,           // Deoptimization inlining id.\n-\n-    // This is not an actual reloc mode, but used to encode a long pc jump that\n-    // cannot be encoded as part of another record.\n-    PC_JUMP,\n-\n-    // Pseudo-types\n-    NUMBER_OF_MODES,\n-    NONE,  // never recorded value\n-\n-    LAST_CODE_TARGET_MODE = RELATIVE_CODE_TARGET,\n-    FIRST_REAL_RELOC_MODE = CODE_TARGET,\n-    LAST_REAL_RELOC_MODE = VENEER_POOL,\n-    LAST_GCED_ENUM = EMBEDDED_OBJECT,\n-    FIRST_SHAREABLE_RELOC_MODE = WASM_CALL,\n-  };\n-\n-  STATIC_ASSERT(NUMBER_OF_MODES <= kBitsPerInt);\n-\n-  RelocInfo() = default;\n-\n-  RelocInfo(Address pc, Mode rmode, intptr_t data, Code* host,\n-            Address constant_pool = kNullAddress)\n-      : pc_(pc),\n-        rmode_(rmode),\n-        data_(data),\n-        host_(host),\n-        constant_pool_(constant_pool) {}\n-\n-  static inline bool IsRealRelocMode(Mode mode) {\n-    return mode >= FIRST_REAL_RELOC_MODE && mode <= LAST_REAL_RELOC_MODE;\n-  }\n-  // Is the relocation mode affected by GC?\n-  static inline bool IsGCRelocMode(Mode mode) { return mode <= LAST_GCED_ENUM; }\n-  static inline bool IsShareableRelocMode(Mode mode) {\n-    return mode >= RelocInfo::FIRST_SHAREABLE_RELOC_MODE;\n-  }\n-  static inline bool IsCodeTarget(Mode mode) { return mode == CODE_TARGET; }\n-  static inline bool IsCodeTargetMode(Mode mode) {\n-    return mode <= LAST_CODE_TARGET_MODE;\n-  }\n-  static inline bool IsRelativeCodeTarget(Mode mode) {\n-    return mode == RELATIVE_CODE_TARGET;\n-  }\n-  static inline bool IsEmbeddedObject(Mode mode) {\n-    return mode == EMBEDDED_OBJECT;\n-  }\n-  static inline bool IsRuntimeEntry(Mode mode) {\n-    return mode == RUNTIME_ENTRY;\n-  }\n-  static inline bool IsWasmCall(Mode mode) { return mode == WASM_CALL; }\n-  static inline bool IsWasmStubCall(Mode mode) {\n-    return mode == WASM_STUB_CALL;\n-  }\n-  static inline bool IsComment(Mode mode) {\n-    return mode == COMMENT;\n-  }\n-  static inline bool IsConstPool(Mode mode) {\n-    return mode == CONST_POOL;\n-  }\n-  static inline bool IsVeneerPool(Mode mode) {\n-    return mode == VENEER_POOL;\n-  }\n-  static inline bool IsDeoptPosition(Mode mode) {\n-    return mode == DEOPT_SCRIPT_OFFSET || mode == DEOPT_INLINING_ID;\n-  }\n-  static inline bool IsDeoptReason(Mode mode) {\n-    return mode == DEOPT_REASON;\n-  }\n-  static inline bool IsDeoptId(Mode mode) {\n-    return mode == DEOPT_ID;\n-  }\n-  static inline bool IsExternalReference(Mode mode) {\n-    return mode == EXTERNAL_REFERENCE;\n-  }\n-  static inline bool IsInternalReference(Mode mode) {\n-    return mode == INTERNAL_REFERENCE;\n-  }\n-  static inline bool IsInternalReferenceEncoded(Mode mode) {\n-    return mode == INTERNAL_REFERENCE_ENCODED;\n-  }\n-  static inline bool IsOffHeapTarget(Mode mode) {\n-    return mode == OFF_HEAP_TARGET;\n-  }\n-  static inline bool IsNone(Mode mode) { return mode == NONE; }\n-  static inline bool IsWasmReference(Mode mode) {\n-    return IsWasmPtrReference(mode);\n-  }\n-  static inline bool IsWasmPtrReference(Mode mode) {\n-    return mode == WASM_CALL || mode == JS_TO_WASM_CALL;\n-  }\n-\n-  static inline bool IsOnlyForSerializer(Mode mode) {\n-    return mode == EXTERNAL_REFERENCE || mode == OFF_HEAP_TARGET;\n-  }\n-\n-  static constexpr int ModeMask(Mode mode) { return 1 << mode; }\n-\n-  // Accessors\n-  Address pc() const { return pc_; }\n-  Mode rmode() const {  return rmode_; }\n-  intptr_t data() const { return data_; }\n-  Code* host() const { return host_; }\n-  Address constant_pool() const { return constant_pool_; }\n-\n-  // Apply a relocation by delta bytes. When the code object is moved, PC\n-  // relative addresses have to be updated as well as absolute addresses\n-  // inside the code (internal references).\n-  // Do not forget to flush the icache afterwards!\n-  V8_INLINE void apply(intptr_t delta);\n-\n-  // Is the pointer this relocation info refers to coded like a plain pointer\n-  // or is it strange in some way (e.g. relative or patched into a series of\n-  // instructions).\n-  bool IsCodedSpecially();\n-\n-  // The static pendant to IsCodedSpecially, just for off-heap targets. Used\n-  // during deserialization, when we don't actually have a RelocInfo handy.\n-  static bool OffHeapTargetIsCodedSpecially();\n-\n-  // If true, the pointer this relocation info refers to is an entry in the\n-  // constant pool, otherwise the pointer is embedded in the instruction stream.\n-  bool IsInConstantPool();\n-\n-  // Returns the deoptimization id for the entry associated with the reloc info\n-  // where {kind} is the deoptimization kind.\n-  // This is only used for printing RUNTIME_ENTRY relocation info.\n-  int GetDeoptimizationId(Isolate* isolate, DeoptimizeKind kind);\n-\n-  Address wasm_call_address() const;\n-  Address wasm_stub_call_address() const;\n-  Address js_to_wasm_address() const;\n-\n-  uint32_t wasm_call_tag() const;\n-\n-  void set_wasm_call_address(\n-      Address, ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-  void set_wasm_stub_call_address(\n-      Address, ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-  void set_js_to_wasm_address(\n-      Address, ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-\n-  void set_target_address(\n-      Address target,\n-      WriteBarrierMode write_barrier_mode = UPDATE_WRITE_BARRIER,\n-      ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-\n-  // this relocation applies to;\n-  // can only be called if IsCodeTarget(rmode_) || IsRuntimeEntry(rmode_)\n-  V8_INLINE Address target_address();\n-  V8_INLINE HeapObject* target_object();\n-  V8_INLINE Handle<HeapObject> target_object_handle(Assembler* origin);\n-  V8_INLINE void set_target_object(\n-      Heap* heap, HeapObject* target,\n-      WriteBarrierMode write_barrier_mode = UPDATE_WRITE_BARRIER,\n-      ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-  V8_INLINE Address target_runtime_entry(Assembler* origin);\n-  V8_INLINE void set_target_runtime_entry(\n-      Address target,\n-      WriteBarrierMode write_barrier_mode = UPDATE_WRITE_BARRIER,\n-      ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-  V8_INLINE Address target_off_heap_target();\n-  V8_INLINE Cell* target_cell();\n-  V8_INLINE Handle<Cell> target_cell_handle();\n-  V8_INLINE void set_target_cell(\n-      Cell* cell, WriteBarrierMode write_barrier_mode = UPDATE_WRITE_BARRIER,\n-      ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-  V8_INLINE void set_target_external_reference(\n-      Address, ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-\n-  // Returns the address of the constant pool entry where the target address\n-  // is held.  This should only be called if IsInConstantPool returns true.\n-  V8_INLINE Address constant_pool_entry_address();\n-\n-  // Read the address of the word containing the target_address in an\n-  // instruction stream.  What this means exactly is architecture-independent.\n-  // The only architecture-independent user of this function is the serializer.\n-  // The serializer uses it to find out how many raw bytes of instruction to\n-  // output before the next target.  Architecture-independent code shouldn't\n-  // dereference the pointer it gets back from this.\n-  V8_INLINE Address target_address_address();\n-\n-  // This indicates how much space a target takes up when deserializing a code\n-  // stream.  For most architectures this is just the size of a pointer.  For\n-  // an instruction like movw/movt where the target bits are mixed into the\n-  // instruction bits the size of the target will be zero, indicating that the\n-  // serializer should not step forwards in memory after a target is resolved\n-  // and written.  In this case the target_address_address function above\n-  // should return the end of the instructions to be patched, allowing the\n-  // deserializer to deserialize the instructions as raw bytes and put them in\n-  // place, ready to be patched with the target.\n-  V8_INLINE int target_address_size();\n-\n-  // Read the reference in the instruction this relocation\n-  // applies to; can only be called if rmode_ is EXTERNAL_REFERENCE.\n-  V8_INLINE Address target_external_reference();\n-\n-  // Read the reference in the instruction this relocation\n-  // applies to; can only be called if rmode_ is INTERNAL_REFERENCE.\n-  V8_INLINE Address target_internal_reference();\n-\n-  // Return the reference address this relocation applies to;\n-  // can only be called if rmode_ is INTERNAL_REFERENCE.\n-  V8_INLINE Address target_internal_reference_address();\n-\n-  // Wipe out a relocation to a fixed value, used for making snapshots\n-  // reproducible.\n-  V8_INLINE void WipeOut();\n-\n-  template <typename ObjectVisitor>\n-  inline void Visit(ObjectVisitor* v);\n-\n-#ifdef DEBUG\n-  // Check whether the given code contains relocation information that\n-  // either is position-relative or movable by the garbage collector.\n-  static bool RequiresRelocation(const CodeDesc& desc);\n-#endif\n-\n-#ifdef ENABLE_DISASSEMBLER\n-  // Printing\n-  static const char* RelocModeName(Mode rmode);\n-  void Print(Isolate* isolate, std::ostream& os);  // NOLINT\n-#endif  // ENABLE_DISASSEMBLER\n-#ifdef VERIFY_HEAP\n-  void Verify(Isolate* isolate);\n-#endif\n-\n-  static const int kApplyMask;  // Modes affected by apply.  Depends on arch.\n-\n- private:\n-  // On ARM/ARM64, note that pc_ is the address of the instruction referencing\n-  // the constant pool and not the address of the constant pool entry.\n-  Address pc_;\n-  Mode rmode_;\n-  intptr_t data_ = 0;\n-  Code* host_;\n-  Address constant_pool_ = kNullAddress;\n-  friend class RelocIterator;\n-};\n-\n-\n-// RelocInfoWriter serializes a stream of relocation info. It writes towards\n-// lower addresses.\n-class RelocInfoWriter BASE_EMBEDDED {\n- public:\n-  RelocInfoWriter() : pos_(nullptr), last_pc_(nullptr) {}\n-\n-  byte* pos() const { return pos_; }\n-  byte* last_pc() const { return last_pc_; }\n-\n-  void Write(const RelocInfo* rinfo);\n-\n-  // Update the state of the stream after reloc info buffer\n-  // and/or code is moved while the stream is active.\n-  void Reposition(byte* pos, byte* pc) {\n-    pos_ = pos;\n-    last_pc_ = pc;\n-  }\n-\n-  // Max size (bytes) of a written RelocInfo. Longest encoding is\n-  // ExtraTag, VariableLengthPCJump, ExtraTag, pc_delta, data_delta.\n-  static constexpr int kMaxSize = 1 + 4 + 1 + 1 + kPointerSize;\n-\n- private:\n-  inline uint32_t WriteLongPCJump(uint32_t pc_delta);\n-\n-  inline void WriteShortTaggedPC(uint32_t pc_delta, int tag);\n-  inline void WriteShortData(intptr_t data_delta);\n-\n-  inline void WriteMode(RelocInfo::Mode rmode);\n-  inline void WriteModeAndPC(uint32_t pc_delta, RelocInfo::Mode rmode);\n-  inline void WriteIntData(int data_delta);\n-  inline void WriteData(intptr_t data_delta);\n-\n-  byte* pos_;\n-  byte* last_pc_;\n-\n-  DISALLOW_COPY_AND_ASSIGN(RelocInfoWriter);\n-};\n-\n-\n-// A RelocIterator iterates over relocation information.\n-// Typical use:\n-//\n-//   for (RelocIterator it(code); !it.done(); it.next()) {\n-//     // do something with it.rinfo() here\n-//   }\n-//\n-// A mask can be specified to skip unwanted modes.\n-class RelocIterator: public Malloced {\n- public:\n-  // Create a new iterator positioned at\n-  // the beginning of the reloc info.\n-  // Relocation information with mode k is included in the\n-  // iteration iff bit k of mode_mask is set.\n-  explicit RelocIterator(Code* code, int mode_mask = -1);\n-  explicit RelocIterator(EmbeddedData* embedded_data, Code* code,\n-                         int mode_mask);\n-  explicit RelocIterator(const CodeDesc& desc, int mode_mask = -1);\n-  explicit RelocIterator(const CodeReference code_reference,\n-                         int mode_mask = -1);\n-  explicit RelocIterator(Vector<byte> instructions,\n-                         Vector<const byte> reloc_info, Address const_pool,\n-                         int mode_mask = -1);\n-  RelocIterator(RelocIterator&&) = default;\n-  RelocIterator& operator=(RelocIterator&&) = default;\n-\n-  // Iteration\n-  bool done() const { return done_; }\n-  void next();\n-\n-  // Return pointer valid until next next().\n-  RelocInfo* rinfo() {\n-    DCHECK(!done());\n-    return &rinfo_;\n-  }\n-\n- private:\n-  RelocIterator(Code* host, Address pc, Address constant_pool, const byte* pos,\n-                const byte* end, int mode_mask);\n-\n-  // Advance* moves the position before/after reading.\n-  // *Read* reads from current byte(s) into rinfo_.\n-  // *Get* just reads and returns info on current byte.\n-  void Advance(int bytes = 1) { pos_ -= bytes; }\n-  int AdvanceGetTag();\n-  RelocInfo::Mode GetMode();\n-\n-  void AdvanceReadLongPCJump();\n-\n-  void ReadShortTaggedPC();\n-  void ReadShortData();\n-\n-  void AdvanceReadPC();\n-  void AdvanceReadInt();\n-  void AdvanceReadData();\n-\n-  // If the given mode is wanted, set it in rinfo_ and return true.\n-  // Else return false. Used for efficiently skipping unwanted modes.\n-  bool SetMode(RelocInfo::Mode mode) {\n-    return (mode_mask_ & (1 << mode)) ? (rinfo_.rmode_ = mode, true) : false;\n-  }\n-\n-  const byte* pos_;\n-  const byte* end_;\n-  RelocInfo rinfo_;\n-  bool done_ = false;\n-  const int mode_mask_;\n-\n-  DISALLOW_COPY_AND_ASSIGN(RelocIterator);\n-};\n-\n // -----------------------------------------------------------------------------\n // Utility functions\n "
        },
        {
            "sha": "acf764979252f6e4199322cd12617d65593ef8a7",
            "filename": "deps/v8/src/assert-scope.h",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fassert-scope.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fassert-scope.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassert-scope.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -139,6 +139,12 @@ typedef PerThreadAssertScopeDebugOnly<CODE_DEPENDENCY_CHANGE_ASSERT, false>\n typedef PerThreadAssertScopeDebugOnly<CODE_DEPENDENCY_CHANGE_ASSERT, true>\n     AllowCodeDependencyChange;\n \n+class DisallowHeapAccess {\n+  DisallowHeapAllocation no_heap_allocation_;\n+  DisallowHandleAllocation no_handle_allocation_;\n+  DisallowHandleDereference no_handle_dereference_;\n+  DisallowCodeDependencyChange no_dependency_change_;\n+};\n \n // Per-isolate assert scopes.\n "
        },
        {
            "sha": "8cf81b24a501003804cb1bd5acd0c846ab91b435",
            "filename": "deps/v8/src/ast/ast-value-factory.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -27,7 +27,6 @@\n \n #include \"src/ast/ast-value-factory.h\"\n \n-#include \"src/api.h\"\n #include \"src/char-predicates-inl.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects.h\""
        },
        {
            "sha": "6c1e989d30beb589af66d784c550254508818d53",
            "filename": "deps/v8/src/ast/ast.h",
            "status": "modified",
            "additions": 79,
            "deletions": 24,
            "changes": 103,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fast.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fast.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -249,14 +249,37 @@ class Expression : public AstNode {\n   static const uint8_t kNextBitFieldIndex = AstNode::kNextBitFieldIndex;\n };\n \n-\n+// V8's notion of BreakableStatement does not correspond to the notion of\n+// BreakableStatement in ECMAScript. In V8, the idea is that a\n+// BreakableStatement is a statement that can be the target of a break\n+// statement.  The BreakableStatement AST node carries a list of labels, any of\n+// which can be used as an argument to the break statement in order to target\n+// it.\n+//\n+// Since we don't want to attach a list of labels to all kinds of statements, we\n+// only declare switchs, loops, and blocks as BreakableStatements.  This means\n+// that we implement breaks targeting other statement forms as breaks targeting\n+// a substatement thereof. For instance, in \"foo: if (b) { f(); break foo; }\" we\n+// pretend that foo is the label of the inner block. That's okay because one\n+// can't observe the difference.\n+//\n+// This optimization makes it harder to detect invalid continue labels, see the\n+// need for own_labels in IterationStatement.\n+//\n class BreakableStatement : public Statement {\n  public:\n   enum BreakableType {\n     TARGET_FOR_ANONYMOUS,\n     TARGET_FOR_NAMED_ONLY\n   };\n \n+  // A list of all labels declared on the path up to the previous\n+  // BreakableStatement (if any).\n+  //\n+  // Example: \"l1: for (;;) l2: l3: { l4: if (b) l5: { s } }\"\n+  // labels() of the ForStatement will be l1.\n+  // labels() of the Block { l4: ... } will be l2, l3.\n+  // labels() of the Block { s } will be l4, l5.\n   ZonePtrList<const AstRawString>* labels() const;\n \n   // Testers.\n@@ -441,11 +464,23 @@ class IterationStatement : public BreakableStatement {\n \n   ZonePtrList<const AstRawString>* labels() const { return labels_; }\n \n+  // A list of all labels that the iteration statement is directly prefixed\n+  // with, i.e.  all the labels that a continue statement in the body can use to\n+  // continue this iteration statement. This is always a subset of {labels}.\n+  //\n+  // Example: \"l1: { l2: if (b) l3: l4: for (;;) s }\"\n+  // labels() of the Block will be l1.\n+  // labels() of the ForStatement will be l2, l3, l4.\n+  // own_labels() of the ForStatement will be l3, l4.\n+  ZonePtrList<const AstRawString>* own_labels() const { return own_labels_; }\n+\n  protected:\n-  IterationStatement(ZonePtrList<const AstRawString>* labels, int pos,\n+  IterationStatement(ZonePtrList<const AstRawString>* labels,\n+                     ZonePtrList<const AstRawString>* own_labels, int pos,\n                      NodeType type)\n       : BreakableStatement(TARGET_FOR_ANONYMOUS, pos, type),\n         labels_(labels),\n+        own_labels_(own_labels),\n         body_(nullptr) {}\n   void Initialize(Statement* body) { body_ = body; }\n \n@@ -454,6 +489,7 @@ class IterationStatement : public BreakableStatement {\n \n  private:\n   ZonePtrList<const AstRawString>* labels_;\n+  ZonePtrList<const AstRawString>* own_labels_;\n   Statement* body_;\n };\n \n@@ -470,8 +506,10 @@ class DoWhileStatement final : public IterationStatement {\n  private:\n   friend class AstNodeFactory;\n \n-  DoWhileStatement(ZonePtrList<const AstRawString>* labels, int pos)\n-      : IterationStatement(labels, pos, kDoWhileStatement), cond_(nullptr) {}\n+  DoWhileStatement(ZonePtrList<const AstRawString>* labels,\n+                   ZonePtrList<const AstRawString>* own_labels, int pos)\n+      : IterationStatement(labels, own_labels, pos, kDoWhileStatement),\n+        cond_(nullptr) {}\n \n   Expression* cond_;\n };\n@@ -489,8 +527,10 @@ class WhileStatement final : public IterationStatement {\n  private:\n   friend class AstNodeFactory;\n \n-  WhileStatement(ZonePtrList<const AstRawString>* labels, int pos)\n-      : IterationStatement(labels, pos, kWhileStatement), cond_(nullptr) {}\n+  WhileStatement(ZonePtrList<const AstRawString>* labels,\n+                 ZonePtrList<const AstRawString>* own_labels, int pos)\n+      : IterationStatement(labels, own_labels, pos, kWhileStatement),\n+        cond_(nullptr) {}\n \n   Expression* cond_;\n };\n@@ -513,8 +553,9 @@ class ForStatement final : public IterationStatement {\n  private:\n   friend class AstNodeFactory;\n \n-  ForStatement(ZonePtrList<const AstRawString>* labels, int pos)\n-      : IterationStatement(labels, pos, kForStatement),\n+  ForStatement(ZonePtrList<const AstRawString>* labels,\n+               ZonePtrList<const AstRawString>* own_labels, int pos)\n+      : IterationStatement(labels, own_labels, pos, kForStatement),\n         init_(nullptr),\n         cond_(nullptr),\n         next_(nullptr) {}\n@@ -539,9 +580,10 @@ class ForEachStatement : public IterationStatement {\n   }\n \n  protected:\n-  ForEachStatement(ZonePtrList<const AstRawString>* labels, int pos,\n+  ForEachStatement(ZonePtrList<const AstRawString>* labels,\n+                   ZonePtrList<const AstRawString>* own_labels, int pos,\n                    NodeType type)\n-      : IterationStatement(labels, pos, type) {}\n+      : IterationStatement(labels, own_labels, pos, type) {}\n };\n \n \n@@ -566,8 +608,9 @@ class ForInStatement final : public ForEachStatement {\n  private:\n   friend class AstNodeFactory;\n \n-  ForInStatement(ZonePtrList<const AstRawString>* labels, int pos)\n-      : ForEachStatement(labels, pos, kForInStatement),\n+  ForInStatement(ZonePtrList<const AstRawString>* labels,\n+                 ZonePtrList<const AstRawString>* own_labels, int pos)\n+      : ForEachStatement(labels, own_labels, pos, kForInStatement),\n         each_(nullptr),\n         subject_(nullptr) {\n     bit_field_ = ForInTypeField::update(bit_field_, SLOW_FOR_IN);\n@@ -632,8 +675,9 @@ class ForOfStatement final : public ForEachStatement {\n  private:\n   friend class AstNodeFactory;\n \n-  ForOfStatement(ZonePtrList<const AstRawString>* labels, int pos)\n-      : ForEachStatement(labels, pos, kForOfStatement),\n+  ForOfStatement(ZonePtrList<const AstRawString>* labels,\n+                 ZonePtrList<const AstRawString>* own_labels, int pos)\n+      : ForEachStatement(labels, own_labels, pos, kForOfStatement),\n         iterator_(nullptr),\n         assign_iterator_(nullptr),\n         next_result_(nullptr),\n@@ -2201,6 +2245,12 @@ class FunctionLiteral final : public Expression {\n   bool is_anonymous_expression() const {\n     return function_type() == kAnonymousExpression;\n   }\n+\n+  void mark_as_iife() { bit_field_ = IIFEBit::update(bit_field_, true); }\n+  bool is_iife() const { return IIFEBit::decode(bit_field_); }\n+  bool is_top_level() const {\n+    return function_literal_id() == FunctionLiteral::kIdTypeTopLevel;\n+  }\n   bool is_wrapped() const { return function_type() == kWrapped; }\n   LanguageMode language_mode() const;\n \n@@ -2333,7 +2383,7 @@ class FunctionLiteral final : public Expression {\n                                                  kHasDuplicateParameters) |\n                   DontOptimizeReasonField::encode(BailoutReason::kNoReason) |\n                   RequiresInstanceFieldsInitializer::encode(false) |\n-                  HasBracesField::encode(has_braces);\n+                  HasBracesField::encode(has_braces) | IIFEBit::encode(false);\n     if (eager_compile_hint == kShouldEagerCompile) SetShouldEagerCompile();\n     DCHECK_EQ(body == nullptr, expected_property_count < 0);\n   }\n@@ -2348,6 +2398,7 @@ class FunctionLiteral final : public Expression {\n       : public BitField<bool, DontOptimizeReasonField::kNext, 1> {};\n   class HasBracesField\n       : public BitField<bool, RequiresInstanceFieldsInitializer::kNext, 1> {};\n+  class IIFEBit : public BitField<bool, HasBracesField::kNext, 1> {};\n \n   int expected_property_count_;\n   int parameter_count_;\n@@ -2803,9 +2854,11 @@ class AstNodeFactory final BASE_EMBEDDED {\n                      Block(zone_, labels, capacity, ignore_completion_value);\n   }\n \n-#define STATEMENT_WITH_LABELS(NodeType)                                       \\\n-  NodeType* New##NodeType(ZonePtrList<const AstRawString>* labels, int pos) { \\\n-    return new (zone_) NodeType(labels, pos);                                 \\\n+#define STATEMENT_WITH_LABELS(NodeType)                                \\\n+  NodeType* New##NodeType(ZonePtrList<const AstRawString>* labels,     \\\n+                          ZonePtrList<const AstRawString>* own_labels, \\\n+                          int pos) {                                   \\\n+    return new (zone_) NodeType(labels, own_labels, pos);              \\\n   }\n   STATEMENT_WITH_LABELS(DoWhileStatement)\n   STATEMENT_WITH_LABELS(WhileStatement)\n@@ -2817,23 +2870,25 @@ class AstNodeFactory final BASE_EMBEDDED {\n     return new (zone_) SwitchStatement(zone_, labels, tag, pos);\n   }\n \n-  ForEachStatement* NewForEachStatement(ForEachStatement::VisitMode visit_mode,\n-                                        ZonePtrList<const AstRawString>* labels,\n-                                        int pos) {\n+  ForEachStatement* NewForEachStatement(\n+      ForEachStatement::VisitMode visit_mode,\n+      ZonePtrList<const AstRawString>* labels,\n+      ZonePtrList<const AstRawString>* own_labels, int pos) {\n     switch (visit_mode) {\n       case ForEachStatement::ENUMERATE: {\n-        return new (zone_) ForInStatement(labels, pos);\n+        return new (zone_) ForInStatement(labels, own_labels, pos);\n       }\n       case ForEachStatement::ITERATE: {\n-        return new (zone_) ForOfStatement(labels, pos);\n+        return new (zone_) ForOfStatement(labels, own_labels, pos);\n       }\n     }\n     UNREACHABLE();\n   }\n \n   ForOfStatement* NewForOfStatement(ZonePtrList<const AstRawString>* labels,\n+                                    ZonePtrList<const AstRawString>* own_labels,\n                                     int pos) {\n-    return new (zone_) ForOfStatement(labels, pos);\n+    return new (zone_) ForOfStatement(labels, own_labels, pos);\n   }\n \n   ExpressionStatement* NewExpressionStatement(Expression* expression, int pos) {"
        },
        {
            "sha": "d2e56a93351f7f2b3e7ad499eb2dace082f11f4f",
            "filename": "deps/v8/src/ast/prettyprinter.cc",
            "status": "modified",
            "additions": 23,
            "deletions": 8,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -11,12 +11,13 @@\n #include \"src/base/platform/platform.h\"\n #include \"src/globals.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/string-builder-inl.h\"\n \n namespace v8 {\n namespace internal {\n \n CallPrinter::CallPrinter(Isolate* isolate, bool is_user_js)\n-    : builder_(isolate) {\n+    : builder_(new IncrementalStringBuilder(isolate)) {\n   isolate_ = isolate;\n   position_ = 0;\n   num_prints_ = 0;\n@@ -30,6 +31,8 @@ CallPrinter::CallPrinter(Isolate* isolate, bool is_user_js)\n   InitializeAstVisitor(isolate);\n }\n \n+CallPrinter::~CallPrinter() {}\n+\n CallPrinter::ErrorHint CallPrinter::GetErrorHint() const {\n   if (is_call_error_) {\n     if (is_iterator_error_) return ErrorHint::kCallAndNormalIterator;\n@@ -45,7 +48,7 @@ Handle<String> CallPrinter::Print(FunctionLiteral* program, int position) {\n   num_prints_ = 0;\n   position_ = position;\n   Find(program);\n-  return builder_.Finish().ToHandleChecked();\n+  return builder_->Finish().ToHandleChecked();\n }\n \n \n@@ -65,13 +68,13 @@ void CallPrinter::Find(AstNode* node, bool print) {\n void CallPrinter::Print(const char* str) {\n   if (!found_ || done_) return;\n   num_prints_++;\n-  builder_.AppendCString(str);\n+  builder_->AppendCString(str);\n }\n \n void CallPrinter::Print(Handle<String> str) {\n   if (!found_ || done_) return;\n   num_prints_++;\n-  builder_.AppendString(str);\n+  builder_->AppendString(str);\n }\n \n void CallPrinter::VisitBlock(Block* node) {\n@@ -746,17 +749,21 @@ void AstPrinter::PrintLiteralWithModeIndented(const char* info, Variable* var,\n   }\n }\n \n-void AstPrinter::PrintLabelsIndented(ZonePtrList<const AstRawString>* labels) {\n+void AstPrinter::PrintLabelsIndented(ZonePtrList<const AstRawString>* labels,\n+                                     const char* prefix) {\n   if (labels == nullptr || labels->length() == 0) return;\n-  PrintIndented(\"LABELS \");\n+  PrintIndented(prefix);\n+  Print(\"LABELS \");\n   PrintLabels(labels);\n   Print(\"\\n\");\n }\n \n \n void AstPrinter::PrintIndentedVisit(const char* s, AstNode* node) {\n-  IndentedScope indent(this, s, node->position());\n-  Visit(node);\n+  if (node != nullptr) {\n+    IndentedScope indent(this, s, node->position());\n+    Visit(node);\n+  }\n }\n \n \n@@ -823,6 +830,7 @@ void AstPrinter::VisitBlock(Block* node) {\n   const char* block_txt =\n       node->ignore_completion_value() ? \"BLOCK NOCOMPLETIONS\" : \"BLOCK\";\n   IndentedScope indent(this, block_txt, node->position());\n+  PrintLabelsIndented(node->labels());\n   PrintStatements(node->statements());\n }\n \n@@ -916,6 +924,7 @@ void AstPrinter::VisitSwitchStatement(SwitchStatement* node) {\n void AstPrinter::VisitDoWhileStatement(DoWhileStatement* node) {\n   IndentedScope indent(this, \"DO\", node->position());\n   PrintLabelsIndented(node->labels());\n+  PrintLabelsIndented(node->own_labels(), \"OWN \");\n   PrintIndentedVisit(\"BODY\", node->body());\n   PrintIndentedVisit(\"COND\", node->cond());\n }\n@@ -924,6 +933,7 @@ void AstPrinter::VisitDoWhileStatement(DoWhileStatement* node) {\n void AstPrinter::VisitWhileStatement(WhileStatement* node) {\n   IndentedScope indent(this, \"WHILE\", node->position());\n   PrintLabelsIndented(node->labels());\n+  PrintLabelsIndented(node->own_labels(), \"OWN \");\n   PrintIndentedVisit(\"COND\", node->cond());\n   PrintIndentedVisit(\"BODY\", node->body());\n }\n@@ -932,6 +942,7 @@ void AstPrinter::VisitWhileStatement(WhileStatement* node) {\n void AstPrinter::VisitForStatement(ForStatement* node) {\n   IndentedScope indent(this, \"FOR\", node->position());\n   PrintLabelsIndented(node->labels());\n+  PrintLabelsIndented(node->own_labels(), \"OWN \");\n   if (node->init()) PrintIndentedVisit(\"INIT\", node->init());\n   if (node->cond()) PrintIndentedVisit(\"COND\", node->cond());\n   PrintIndentedVisit(\"BODY\", node->body());\n@@ -941,6 +952,8 @@ void AstPrinter::VisitForStatement(ForStatement* node) {\n \n void AstPrinter::VisitForInStatement(ForInStatement* node) {\n   IndentedScope indent(this, \"FOR IN\", node->position());\n+  PrintLabelsIndented(node->labels());\n+  PrintLabelsIndented(node->own_labels(), \"OWN \");\n   PrintIndentedVisit(\"FOR\", node->each());\n   PrintIndentedVisit(\"IN\", node->enumerable());\n   PrintIndentedVisit(\"BODY\", node->body());\n@@ -949,6 +962,8 @@ void AstPrinter::VisitForInStatement(ForInStatement* node) {\n \n void AstPrinter::VisitForOfStatement(ForOfStatement* node) {\n   IndentedScope indent(this, \"FOR OF\", node->position());\n+  PrintLabelsIndented(node->labels());\n+  PrintLabelsIndented(node->own_labels(), \"OWN \");\n   PrintIndentedVisit(\"INIT\", node->assign_iterator());\n   PrintIndentedVisit(\"NEXT\", node->next_result());\n   PrintIndentedVisit(\"DONE\", node->result_done());"
        },
        {
            "sha": "71019fe264fbd96488793de151961dbfe8d8d340",
            "filename": "deps/v8/src/ast/prettyprinter.h",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,14 +8,16 @@\n #include \"src/allocation.h\"\n #include \"src/ast/ast.h\"\n #include \"src/base/compiler-specific.h\"\n-#include \"src/string-builder.h\"\n \n namespace v8 {\n namespace internal {\n \n+class IncrementalStringBuilder;  // to avoid including string-builder-inl.h\n+\n class CallPrinter final : public AstVisitor<CallPrinter> {\n  public:\n   explicit CallPrinter(Isolate* isolate, bool is_user_js);\n+  ~CallPrinter();\n \n   // The following routine prints the node with position |position| into a\n   // string.\n@@ -42,7 +44,8 @@ class CallPrinter final : public AstVisitor<CallPrinter> {\n \n   Isolate* isolate_;\n   int num_prints_;\n-  IncrementalStringBuilder builder_;\n+  // Allocate the builder on the heap simply because it's forward declared.\n+  std::unique_ptr<IncrementalStringBuilder> builder_;\n   int position_;  // position of ast node to print\n   bool found_;\n   bool done_;\n@@ -107,7 +110,8 @@ class AstPrinter final : public AstVisitor<AstPrinter> {\n                             bool quote);\n   void PrintLiteralWithModeIndented(const char* info, Variable* var,\n                                     const AstRawString* value);\n-  void PrintLabelsIndented(ZonePtrList<const AstRawString>* labels);\n+  void PrintLabelsIndented(ZonePtrList<const AstRawString>* labels,\n+                           const char* prefix = \"\");\n   void PrintObjectProperties(ZonePtrList<ObjectLiteral::Property>* properties);\n   void PrintClassProperties(ZonePtrList<ClassLiteral::Property>* properties);\n "
        },
        {
            "sha": "74d50c44de59a50cc4b7f9facc93ecc49ebd1cec",
            "filename": "deps/v8/src/ast/scopes.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 17,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2178,25 +2178,16 @@ void Scope::AllocateHeapSlot(Variable* var) {\n void DeclarationScope::AllocateParameterLocals() {\n   DCHECK(is_function_scope());\n \n-  bool uses_sloppy_arguments = false;\n-\n+  bool has_mapped_arguments = false;\n   if (arguments_ != nullptr) {\n     DCHECK(!is_arrow_scope());\n-    // 'arguments' is used. Unless there is also a parameter called\n-    // 'arguments', we must be conservative and allocate all parameters to\n-    // the context assuming they will be captured by the arguments object.\n-    // If we have a parameter named 'arguments', a (new) value is always\n-    // assigned to it via the function invocation. Then 'arguments' denotes\n-    // that specific parameter value and cannot be used to access the\n-    // parameters, which is why we don't need to allocate an arguments\n-    // object in that case.\n     if (MustAllocate(arguments_) && !has_arguments_parameter_) {\n-      // In strict mode 'arguments' does not alias formal parameters.\n-      // Therefore in strict mode we allocate parameters as if 'arguments'\n-      // were not used.\n-      // If the parameter list is not simple, arguments isn't sloppy either.\n-      uses_sloppy_arguments =\n-          is_sloppy(language_mode()) && has_simple_parameters();\n+      // 'arguments' is used and does not refer to a function\n+      // parameter of the same name. If the arguments object\n+      // aliases formal parameters, we conservatively allocate\n+      // them specially in the loop below.\n+      has_mapped_arguments =\n+          GetArgumentsType() == CreateArgumentsType::kMappedArguments;\n     } else {\n       // 'arguments' is unused. Tell the code generator that it does not need to\n       // allocate the arguments object by nulling out arguments_.\n@@ -2212,7 +2203,7 @@ void DeclarationScope::AllocateParameterLocals() {\n     Variable* var = params_[i];\n     DCHECK(!has_rest_ || var != rest_parameter());\n     DCHECK_EQ(this, var->scope());\n-    if (uses_sloppy_arguments) {\n+    if (has_mapped_arguments) {\n       var->set_is_used();\n       var->set_maybe_assigned();\n       var->ForceContextAllocation();"
        },
        {
            "sha": "f43761af58d37e224aed98b80c2fd43c1e14f319",
            "filename": "deps/v8/src/ast/scopes.h",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -804,6 +804,16 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n     has_simple_parameters_ = false;\n   }\n \n+  // Returns whether the arguments object aliases formal parameters.\n+  CreateArgumentsType GetArgumentsType() const {\n+    DCHECK(is_function_scope());\n+    DCHECK(!is_arrow_scope());\n+    DCHECK_NOT_NULL(arguments_);\n+    return is_sloppy(language_mode()) && has_simple_parameters()\n+               ? CreateArgumentsType::kMappedArguments\n+               : CreateArgumentsType::kUnmappedArguments;\n+  }\n+\n   // The local variable 'arguments' if we need to allocate it; nullptr\n   // otherwise.\n   Variable* arguments() const {"
        },
        {
            "sha": "fd724af9c9c69e0835ece43d8a775ffa5fbfdc3f",
            "filename": "deps/v8/src/async-hooks-wrapper.cc",
            "status": "modified",
            "additions": 43,
            "deletions": 13,
            "changes": 56,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fasync-hooks-wrapper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fasync-hooks-wrapper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fasync-hooks-wrapper.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -4,6 +4,7 @@\n \n #include \"src/async-hooks-wrapper.h\"\n #include \"src/d8.h\"\n+#include \"src/isolate-inl.h\"\n \n namespace v8 {\n \n@@ -42,19 +43,35 @@ static AsyncHooksWrap* UnwrapHook(\n   Isolate* isolate = args.GetIsolate();\n   HandleScope scope(isolate);\n   Local<Object> hook = args.This();\n+\n+  AsyncHooks* hooks = PerIsolateData::Get(isolate)->GetAsyncHooks();\n+\n+  if (!hooks->async_hook_ctor.Get(isolate)->HasInstance(hook)) {\n+    isolate->ThrowException(\n+        String::NewFromUtf8(\n+            isolate, \"Invalid 'this' passed instead of AsyncHooks instance\",\n+            NewStringType::kNormal)\n+            .ToLocalChecked());\n+    return nullptr;\n+  }\n+\n   Local<External> wrap = Local<External>::Cast(hook->GetInternalField(0));\n   void* ptr = wrap->Value();\n   return static_cast<AsyncHooksWrap*>(ptr);\n }\n \n static void EnableHook(const v8::FunctionCallbackInfo<v8::Value>& args) {\n   AsyncHooksWrap* wrap = UnwrapHook(args);\n-  wrap->Enable();\n+  if (wrap) {\n+    wrap->Enable();\n+  }\n }\n \n static void DisableHook(const v8::FunctionCallbackInfo<v8::Value>& args) {\n   AsyncHooksWrap* wrap = UnwrapHook(args);\n-  wrap->Disable();\n+  if (wrap) {\n+    wrap->Disable();\n+  }\n }\n \n async_id_t AsyncHooks::GetExecutionAsyncId() const {\n@@ -182,10 +199,12 @@ void AsyncHooks::Initialize() {\n                           async_hook_ctor.Get(isolate_)->InstanceTemplate());\n   async_hooks_templ.Get(isolate_)->SetInternalFieldCount(1);\n   async_hooks_templ.Get(isolate_)->Set(\n-      String::NewFromUtf8(isolate_, \"enable\"),\n+      String::NewFromUtf8(isolate_, \"enable\", v8::NewStringType::kNormal)\n+          .ToLocalChecked(),\n       FunctionTemplate::New(isolate_, EnableHook));\n   async_hooks_templ.Get(isolate_)->Set(\n-      String::NewFromUtf8(isolate_, \"disable\"),\n+      String::NewFromUtf8(isolate_, \"disable\", v8::NewStringType::kNormal)\n+          .ToLocalChecked(),\n       FunctionTemplate::New(isolate_, DisableHook));\n \n   async_id_smb.Reset(isolate_, Private::New(isolate_));\n@@ -214,14 +233,26 @@ void AsyncHooks::PromiseHookDispatch(PromiseHookType type,\n   TryCatch try_catch(hooks->isolate_);\n   try_catch.SetVerbose(true);\n \n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(hooks->isolate_);\n+  if (isolate->has_scheduled_exception()) {\n+    isolate->ScheduleThrow(isolate->scheduled_exception());\n+\n+    DCHECK(try_catch.HasCaught());\n+    Shell::ReportException(hooks->isolate_, &try_catch);\n+    return;\n+  }\n+\n   Local<Value> rcv = Undefined(hooks->isolate_);\n+  Local<Context> context = hooks->isolate_->GetCurrentContext();\n   Local<Value> async_id =\n-      promise\n-          ->GetPrivate(hooks->isolate_->GetCurrentContext(),\n-                       hooks->async_id_smb.Get(hooks->isolate_))\n+      promise->GetPrivate(context, hooks->async_id_smb.Get(hooks->isolate_))\n           .ToLocalChecked();\n   Local<Value> args[1] = {async_id};\n \n+  // This is unused. It's here to silence the warning about\n+  // not using the MaybeLocal return value from Call.\n+  MaybeLocal<Value> result;\n+\n   // Sacrifice the brevity for readability and debugfulness\n   if (type == PromiseHookType::kInit) {\n     if (!wrap->init_function().IsEmpty()) {\n@@ -231,23 +262,22 @@ void AsyncHooks::PromiseHookDispatch(PromiseHookType type,\n                               NewStringType::kNormal)\n               .ToLocalChecked(),\n           promise\n-              ->GetPrivate(hooks->isolate_->GetCurrentContext(),\n-                           hooks->trigger_id_smb.Get(hooks->isolate_))\n+              ->GetPrivate(context, hooks->trigger_id_smb.Get(hooks->isolate_))\n               .ToLocalChecked(),\n           promise};\n-      wrap->init_function()->Call(rcv, 4, initArgs);\n+      result = wrap->init_function()->Call(context, rcv, 4, initArgs);\n     }\n   } else if (type == PromiseHookType::kBefore) {\n     if (!wrap->before_function().IsEmpty()) {\n-      wrap->before_function()->Call(rcv, 1, args);\n+      result = wrap->before_function()->Call(context, rcv, 1, args);\n     }\n   } else if (type == PromiseHookType::kAfter) {\n     if (!wrap->after_function().IsEmpty()) {\n-      wrap->after_function()->Call(rcv, 1, args);\n+      result = wrap->after_function()->Call(context, rcv, 1, args);\n     }\n   } else if (type == PromiseHookType::kResolve) {\n     if (!wrap->promiseResolve_function().IsEmpty()) {\n-      wrap->promiseResolve_function()->Call(rcv, 1, args);\n+      result = wrap->promiseResolve_function()->Call(context, rcv, 1, args);\n     }\n   }\n "
        },
        {
            "sha": "68aafa52251dae94440c59936fdcb541abc1fd55",
            "filename": "deps/v8/src/async-hooks-wrapper.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fasync-hooks-wrapper.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fasync-hooks-wrapper.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fasync-hooks-wrapper.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -69,10 +69,11 @@ class AsyncHooks {\n \n   Local<Object> CreateHook(const v8::FunctionCallbackInfo<v8::Value>& args);\n \n+  Persistent<FunctionTemplate> async_hook_ctor;\n+\n  private:\n   std::vector<AsyncHooksWrap*> async_wraps_;\n   Isolate* isolate_;\n-  Persistent<FunctionTemplate> async_hook_ctor;\n   Persistent<ObjectTemplate> async_hooks_templ;\n   Persistent<Private> async_id_smb;\n   Persistent<Private> trigger_id_smb;"
        },
        {
            "sha": "54b3dbda54446aefafd1027ac14e178aa6f1ac88",
            "filename": "deps/v8/src/bailout-reason.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbailout-reason.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbailout-reason.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbailout-reason.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -26,6 +26,11 @@ const char* GetAbortReason(AbortReason reason) {\n   return error_messages_[static_cast<int>(reason)];\n }\n \n+bool IsValidAbortReason(int reason_id) {\n+  return reason_id >= static_cast<int>(AbortReason::kNoReason) &&\n+         reason_id < static_cast<int>(AbortReason::kLastErrorMessage);\n+}\n+\n #undef ERROR_MESSAGES_TEXTS\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "78f5665a381a271e3e5f6119a0f04fde8e9dc22b",
            "filename": "deps/v8/src/bailout-reason.h",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbailout-reason.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbailout-reason.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbailout-reason.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -5,6 +5,8 @@\n #ifndef V8_BAILOUT_REASON_H_\n #define V8_BAILOUT_REASON_H_\n \n+#include <cstdint>\n+\n namespace v8 {\n namespace internal {\n \n@@ -114,17 +116,18 @@ namespace internal {\n   V(kOptimizationDisabledForTest, \"Optimization disabled for test\")\n \n #define ERROR_MESSAGES_CONSTANTS(C, T) C,\n-enum class BailoutReason {\n+enum class BailoutReason : uint8_t {\n   BAILOUT_MESSAGES_LIST(ERROR_MESSAGES_CONSTANTS) kLastErrorMessage\n };\n \n-enum class AbortReason {\n+enum class AbortReason : uint8_t {\n   ABORT_MESSAGES_LIST(ERROR_MESSAGES_CONSTANTS) kLastErrorMessage\n };\n #undef ERROR_MESSAGES_CONSTANTS\n \n const char* GetBailoutReason(BailoutReason reason);\n const char* GetAbortReason(AbortReason reason);\n+bool IsValidAbortReason(int reason_id);\n \n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "8a5b9e6a605f49465c044f9ea23b5cad0f2196db",
            "filename": "deps/v8/src/base/compiler-specific.h",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fcompiler-specific.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fcompiler-specific.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fcompiler-specific.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -92,4 +92,15 @@\n \n #endif  // V8_CC_MSVC\n \n+// Allowing the use of noexcept by removing the keyword on older compilers that\n+// do not support adding noexcept to default members.\n+#if ((!defined(V8_CC_GNU) && !defined(V8_TARGET_ARCH_MIPS) &&        \\\n+      !defined(V8_TARGET_ARCH_MIPS64) && !defined(V8_TARGET_ARCH_PPC) && \\\n+      !defined(V8_TARGET_ARCH_PPC64)) ||                                 \\\n+     (defined(__clang__) && __cplusplus > 201300L))\n+#define V8_NOEXCEPT noexcept\n+#else\n+#define V8_NOEXCEPT\n+#endif\n+\n #endif  // V8_BASE_COMPILER_SPECIFIC_H_"
        },
        {
            "sha": "081018cc2e76b1704ab1e9363c15a5ca6247f4a7",
            "filename": "deps/v8/src/base/macros.h",
            "status": "modified",
            "additions": 35,
            "deletions": 3,
            "changes": 38,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -113,6 +113,12 @@ V8_INLINE Dest bit_cast(Source const& source) {\n   TypeName(const TypeName&) = delete;      \\\n   DISALLOW_ASSIGN(TypeName)\n \n+// Explicitly declare all copy/move constructors and assignments as deleted.\n+#define DISALLOW_COPY_AND_MOVE_AND_ASSIGN(TypeName) \\\n+  TypeName(TypeName&&) = delete;                    \\\n+  TypeName& operator=(TypeName&&) = delete;         \\\n+  DISALLOW_COPY_AND_ASSIGN(TypeName)\n+\n // Explicitly declare all implicit constructors as deleted, namely the\n // default constructor, copy constructor and operator= functions.\n // This is especially useful for classes containing only static methods.\n@@ -128,9 +134,9 @@ V8_INLINE Dest bit_cast(Source const& source) {\n \n // Disallow copying a type, and only provide move construction and move\n // assignment. Especially useful for move-only structs.\n-#define MOVE_ONLY_NO_DEFAULT_CONSTRUCTOR(TypeName) \\\n-  TypeName(TypeName&&) = default;                  \\\n-  TypeName& operator=(TypeName&&) = default;       \\\n+#define MOVE_ONLY_NO_DEFAULT_CONSTRUCTOR(TypeName)       \\\n+  TypeName(TypeName&&) V8_NOEXCEPT = default;            \\\n+  TypeName& operator=(TypeName&&) V8_NOEXCEPT = default; \\\n   DISALLOW_COPY_AND_ASSIGN(TypeName)\n \n // A macro to disallow the dynamic allocation.\n@@ -410,4 +416,30 @@ bool is_inbounds(float_t v) {\n          (kUpperBoundIsMax ? (v <= kUpperBound) : (v < kUpperBound));\n }\n \n+#ifdef V8_OS_WIN\n+\n+// Setup for Windows shared library export.\n+#ifdef BUILDING_V8_SHARED\n+#define V8_EXPORT_PRIVATE __declspec(dllexport)\n+#elif USING_V8_SHARED\n+#define V8_EXPORT_PRIVATE __declspec(dllimport)\n+#else\n+#define V8_EXPORT_PRIVATE\n+#endif  // BUILDING_V8_SHARED\n+\n+#else  // V8_OS_WIN\n+\n+// Setup for Linux shared library export.\n+#if V8_HAS_ATTRIBUTE_VISIBILITY\n+#ifdef BUILDING_V8_SHARED\n+#define V8_EXPORT_PRIVATE __attribute__((visibility(\"default\")))\n+#else\n+#define V8_EXPORT_PRIVATE\n+#endif\n+#else\n+#define V8_EXPORT_PRIVATE\n+#endif\n+\n+#endif  // V8_OS_WIN\n+\n #endif  // V8_BASE_MACROS_H_"
        },
        {
            "sha": "6f5276843d6398f0d61ea43bfc4bb519d225dd18",
            "filename": "deps/v8/src/base/optional.h",
            "status": "modified",
            "additions": 15,
            "deletions": 15,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Foptional.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Foptional.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Foptional.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -131,7 +131,7 @@ class Optional {\n     if (!other.storage_.is_null_) Init(other.value());\n   }\n \n-  Optional(Optional&& other) {\n+  Optional(Optional&& other) V8_NOEXCEPT {\n     if (!other.storage_.is_null_) Init(std::move(other.value()));\n   }\n \n@@ -164,7 +164,7 @@ class Optional {\n     return *this;\n   }\n \n-  Optional& operator=(Optional&& other) {\n+  Optional& operator=(Optional&& other) V8_NOEXCEPT {\n     if (other.storage_.is_null_) {\n       FreeIfNeeded();\n       return *this;\n@@ -182,16 +182,16 @@ class Optional {\n     return *this;\n   }\n \n-  // TODO(mlamouri): can't use 'constexpr' with DCHECK.\n+  // TODO(mlamouri): can't use 'constexpr' with CHECK.\n   const T* operator->() const {\n-    DCHECK(!storage_.is_null_);\n+    CHECK(!storage_.is_null_);\n     return &value();\n   }\n \n   // TODO(mlamouri): using 'constexpr' here breaks compiler that assume it was\n   // meant to be 'constexpr const'.\n   T* operator->() {\n-    DCHECK(!storage_.is_null_);\n+    CHECK(!storage_.is_null_);\n     return &value();\n   }\n \n@@ -214,26 +214,26 @@ class Optional {\n   // TODO(mlamouri): using 'constexpr' here breaks compiler that assume it was\n   // meant to be 'constexpr const'.\n   T& value() & {\n-    DCHECK(!storage_.is_null_);\n+    CHECK(!storage_.is_null_);\n     return storage_.value_;\n   }\n \n-  // TODO(mlamouri): can't use 'constexpr' with DCHECK.\n+  // TODO(mlamouri): can't use 'constexpr' with CHECK.\n   const T& value() const & {\n-    DCHECK(!storage_.is_null_);\n+    CHECK(!storage_.is_null_);\n     return storage_.value_;\n   }\n \n   // TODO(mlamouri): using 'constexpr' here breaks compiler that assume it was\n   // meant to be 'constexpr const'.\n   T&& value() && {\n-    DCHECK(!storage_.is_null_);\n+    CHECK(!storage_.is_null_);\n     return std::move(storage_.value_);\n   }\n \n-  // TODO(mlamouri): can't use 'constexpr' with DCHECK.\n+  // TODO(mlamouri): can't use 'constexpr' with CHECK.\n   const T&& value() const && {\n-    DCHECK(!storage_.is_null_);\n+    CHECK(!storage_.is_null_);\n     return std::move(storage_.value_);\n   }\n \n@@ -273,7 +273,7 @@ class Optional {\n       return;\n     }\n \n-    DCHECK(!storage_.is_null_ && !other.storage_.is_null_);\n+    CHECK(!storage_.is_null_ && !other.storage_.is_null_);\n     using std::swap;\n     swap(**this, *other);\n   }\n@@ -288,20 +288,20 @@ class Optional {\n \n  private:\n   void Init(const T& value) {\n-    DCHECK(storage_.is_null_);\n+    CHECK(storage_.is_null_);\n     new (&storage_.value_) T(value);\n     storage_.is_null_ = false;\n   }\n \n   void Init(T&& value) {\n-    DCHECK(storage_.is_null_);\n+    CHECK(storage_.is_null_);\n     new (&storage_.value_) T(std::move(value));\n     storage_.is_null_ = false;\n   }\n \n   template <class... Args>\n   void Init(Args&&... args) {\n-    DCHECK(storage_.is_null_);\n+    CHECK(storage_.is_null_);\n     new (&storage_.value_) T(std::forward<Args>(args)...);\n     storage_.is_null_ = false;\n   }"
        },
        {
            "sha": "d1979fb9d880847aa5edd862075a6a6ca19a14d7",
            "filename": "deps/v8/src/base/platform/platform-fuchsia.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -57,8 +57,8 @@ void* OS::Allocate(void* address, size_t size, size_t alignment,\n                          strlen(kVirtualMemoryName));\n   uintptr_t reservation;\n   uint32_t prot = GetProtectionFromMemoryPermission(access);\n-  zx_status_t status = zx_vmar_map(zx_vmar_root_self(), 0, vmo, 0, request_size,\n-                                   prot, &reservation);\n+  zx_status_t status = zx_vmar_map_old(zx_vmar_root_self(), 0, vmo, 0,\n+                                       request_size, prot, &reservation);\n   // Either the vmo is now referenced by the vmar, or we failed and are bailing,\n   // so close the vmo either way.\n   zx_handle_close(vmo);\n@@ -114,9 +114,9 @@ bool OS::SetPermissions(void* address, size_t size, MemoryPermission access) {\n   DCHECK_EQ(0, reinterpret_cast<uintptr_t>(address) % CommitPageSize());\n   DCHECK_EQ(0, size % CommitPageSize());\n   uint32_t prot = GetProtectionFromMemoryPermission(access);\n-  return zx_vmar_protect(zx_vmar_root_self(),\n-                         reinterpret_cast<uintptr_t>(address), size,\n-                         prot) == ZX_OK;\n+  return zx_vmar_protect_old(zx_vmar_root_self(),\n+                             reinterpret_cast<uintptr_t>(address), size,\n+                             prot) == ZX_OK;\n }\n \n // static"
        },
        {
            "sha": "cb25196970629d21ea5e33addf9fe6cd6dbbc314",
            "filename": "deps/v8/src/base/platform/platform-posix.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -248,11 +248,11 @@ void* OS::GetRandomMmapAddr() {\n   // Use extra address space to isolate the mmap regions.\n   raw_addr += uint64_t{0x400000000000};\n #elif V8_TARGET_BIG_ENDIAN\n-  // Big-endian Linux: 44 bits of virtual addressing.\n+  // Big-endian Linux: 42 bits of virtual addressing.\n   raw_addr &= uint64_t{0x03FFFFFFF000};\n #else\n-  // Little-endian Linux: 48 bits of virtual addressing.\n-  raw_addr &= uint64_t{0x3FFFFFFFF000};\n+  // Little-endian Linux: 46 bits of virtual addressing.\n+  raw_addr &= uint64_t{0x3FFFFFFF0000};\n #endif\n #elif V8_TARGET_ARCH_MIPS64\n   // We allocate code in 256 MB aligned segments because of optimizations using\n@@ -354,7 +354,8 @@ bool OS::SetPermissions(void* address, size_t size, MemoryPermission access) {\n   int prot = GetProtectionFromMemoryPermission(access);\n   int ret = mprotect(address, size, prot);\n   if (ret == 0 && access == OS::MemoryPermission::kNoAccess) {\n-    ret = ReclaimInaccessibleMemory(address, size);\n+    // This is advisory; ignore errors and continue execution.\n+    ReclaimInaccessibleMemory(address, size);\n   }\n \n // For accounting purposes, we want to call MADV_FREE_REUSE on macOS after"
        },
        {
            "sha": "2e56ac5df145024a0ecb53395bb18fb61f953bba",
            "filename": "deps/v8/src/base/platform/platform-win32.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -27,6 +27,8 @@\n #include \"src/base/timezone-cache.h\"\n #include \"src/base/utils/random-number-generator.h\"\n \n+#include <VersionHelpers.h>\n+\n #if defined(_MSC_VER)\n #include <crtdbg.h>  // NOLINT\n #endif               // defined(_MSC_VER)\n@@ -763,8 +765,12 @@ DWORD GetProtectionFromMemoryPermission(OS::MemoryPermission access) {\n     case OS::MemoryPermission::kReadWrite:\n       return PAGE_READWRITE;\n     case OS::MemoryPermission::kReadWriteExecute:\n+      if (IsWindows10OrGreater())\n+        return PAGE_EXECUTE_READWRITE | PAGE_TARGETS_INVALID;\n       return PAGE_EXECUTE_READWRITE;\n     case OS::MemoryPermission::kReadExecute:\n+      if (IsWindows10OrGreater())\n+        return PAGE_EXECUTE_READ | PAGE_TARGETS_INVALID;\n       return PAGE_EXECUTE_READ;\n   }\n   UNREACHABLE();"
        },
        {
            "sha": "530114a8e2faa51e0ab2df283716648104ffff1f",
            "filename": "deps/v8/src/base/template-utils.h",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -114,6 +114,16 @@ constexpr auto fold(Func func, Ts&&... more) ->\n                                                 std::forward<Ts>(more)...);\n }\n \n+// {is_same<Ts...>::value} is true if all Ts are the same, false otherwise.\n+template <typename... Ts>\n+struct is_same : public std::false_type {};\n+template <>\n+struct is_same<> : public std::true_type {};\n+template <typename T>\n+struct is_same<T> : public std::true_type {};\n+template <typename T, typename... Ts>\n+struct is_same<T, T, Ts...> : public is_same<T, Ts...> {};\n+\n }  // namespace base\n }  // namespace v8\n "
        },
        {
            "sha": "eaecd5dc6889edc3c2636092c9ba3010cbec566c",
            "filename": "deps/v8/src/basic-block-profiler.cc",
            "status": "modified",
            "additions": 45,
            "deletions": 14,
            "changes": 59,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -4,14 +4,28 @@\n \n #include \"src/basic-block-profiler.h\"\n \n+#include <algorithm>\n+#include <numeric>\n #include <sstream>\n \n+#include \"src/base/lazy-instance.h\"\n+\n namespace v8 {\n namespace internal {\n \n-BasicBlockProfiler::Data::Data(size_t n_blocks)\n-    : n_blocks_(n_blocks), block_ids_(n_blocks_), counts_(n_blocks_, 0) {}\n+namespace {\n+base::LazyInstance<BasicBlockProfiler>::type kBasicBlockProfiler =\n+    LAZY_INSTANCE_INITIALIZER;\n+}\n \n+BasicBlockProfiler* BasicBlockProfiler::Get() {\n+  return kBasicBlockProfiler.Pointer();\n+}\n+\n+BasicBlockProfiler::Data::Data(size_t n_blocks)\n+    : n_blocks_(n_blocks),\n+      block_rpo_numbers_(n_blocks_),\n+      counts_(n_blocks_, 0) {}\n \n BasicBlockProfiler::Data::~Data() {}\n \n@@ -20,31 +34,31 @@ static void InsertIntoString(std::ostringstream* os, std::string* string) {\n   string->insert(0, os->str());\n }\n \n+static void InsertIntoString(const char* data, std::string* string) {\n+  string->insert(0, data);\n+}\n \n void BasicBlockProfiler::Data::SetCode(std::ostringstream* os) {\n   InsertIntoString(os, &code_);\n }\n \n-\n-void BasicBlockProfiler::Data::SetFunctionName(std::ostringstream* os) {\n-  InsertIntoString(os, &function_name_);\n+void BasicBlockProfiler::Data::SetFunctionName(std::unique_ptr<char[]> name) {\n+  InsertIntoString(name.get(), &function_name_);\n }\n \n-\n void BasicBlockProfiler::Data::SetSchedule(std::ostringstream* os) {\n   InsertIntoString(os, &schedule_);\n }\n \n-\n-void BasicBlockProfiler::Data::SetBlockId(size_t offset, size_t block_id) {\n+void BasicBlockProfiler::Data::SetBlockRpoNumber(size_t offset,\n+                                                 int32_t block_rpo) {\n   DCHECK(offset < n_blocks_);\n-  block_ids_[offset] = block_id;\n+  block_rpo_numbers_[offset] = block_rpo;\n }\n \n-\n-uint32_t* BasicBlockProfiler::Data::GetCounterAddress(size_t offset) {\n+intptr_t BasicBlockProfiler::Data::GetCounterAddress(size_t offset) {\n   DCHECK(offset < n_blocks_);\n-  return &counts_[offset];\n+  return reinterpret_cast<intptr_t>(&(counts_[offset]));\n }\n \n \n@@ -59,6 +73,7 @@ BasicBlockProfiler::BasicBlockProfiler() {}\n \n \n BasicBlockProfiler::Data* BasicBlockProfiler::NewData(size_t n_blocks) {\n+  base::LockGuard<base::Mutex> lock(&data_list_mutex_);\n   Data* data = new Data(n_blocks);\n   data_list_.push_back(data);\n   return data;\n@@ -91,17 +106,33 @@ std::ostream& operator<<(std::ostream& os, const BasicBlockProfiler& p) {\n \n \n std::ostream& operator<<(std::ostream& os, const BasicBlockProfiler::Data& d) {\n+  int block_count_sum = std::accumulate(d.counts_.begin(), d.counts_.end(), 0);\n+  if (block_count_sum == 0) return os;\n   const char* name = \"unknown function\";\n   if (!d.function_name_.empty()) {\n     name = d.function_name_.c_str();\n   }\n   if (!d.schedule_.empty()) {\n-    os << \"schedule for \" << name << std::endl;\n+    os << \"schedule for \" << name << \" (B0 entered \" << d.counts_[0]\n+       << \" times)\" << std::endl;\n     os << d.schedule_.c_str() << std::endl;\n   }\n   os << \"block counts for \" << name << \":\" << std::endl;\n+  std::vector<std::pair<int32_t, uint32_t>> pairs;\n+  pairs.reserve(d.n_blocks_);\n   for (size_t i = 0; i < d.n_blocks_; ++i) {\n-    os << \"block \" << d.block_ids_[i] << \" : \" << d.counts_[i] << std::endl;\n+    pairs.push_back(std::make_pair(d.block_rpo_numbers_[i], d.counts_[i]));\n+  }\n+  std::sort(pairs.begin(), pairs.end(),\n+            [=](std::pair<int32_t, uint32_t> left,\n+                std::pair<int32_t, uint32_t> right) {\n+              if (right.second == left.second)\n+                return left.first < right.first;\n+              return right.second < left.second;\n+            });\n+  for (auto it : pairs) {\n+    if (it.second == 0) break;\n+    os << \"block B\" << it.first << \" : \" << it.second << std::endl;\n   }\n   os << std::endl;\n   if (!d.code_.empty()) {"
        },
        {
            "sha": "975840e46e569d23384be4ede8fd8190423e9777",
            "filename": "deps/v8/src/basic-block-profiler.h",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -11,6 +11,7 @@\n #include <vector>\n \n #include \"src/base/macros.h\"\n+#include \"src/base/platform/mutex.h\"\n #include \"src/globals.h\"\n \n namespace v8 {\n@@ -24,10 +25,10 @@ class BasicBlockProfiler {\n     const uint32_t* counts() const { return &counts_[0]; }\n \n     void SetCode(std::ostringstream* os);\n-    void SetFunctionName(std::ostringstream* os);\n+    void SetFunctionName(std::unique_ptr<char[]> name);\n     void SetSchedule(std::ostringstream* os);\n-    void SetBlockId(size_t offset, size_t block_id);\n-    uint32_t* GetCounterAddress(size_t offset);\n+    void SetBlockRpoNumber(size_t offset, int32_t block_rpo);\n+    intptr_t GetCounterAddress(size_t offset);\n \n    private:\n     friend class BasicBlockProfiler;\n@@ -40,7 +41,7 @@ class BasicBlockProfiler {\n     void ResetCounts();\n \n     const size_t n_blocks_;\n-    std::vector<size_t> block_ids_;\n+    std::vector<int32_t> block_rpo_numbers_;\n     std::vector<uint32_t> counts_;\n     std::string function_name_;\n     std::string schedule_;\n@@ -53,6 +54,7 @@ class BasicBlockProfiler {\n   BasicBlockProfiler();\n   ~BasicBlockProfiler();\n \n+  V8_EXPORT_PRIVATE static BasicBlockProfiler* Get();\n   Data* NewData(size_t n_blocks);\n   void ResetCounts();\n \n@@ -63,6 +65,7 @@ class BasicBlockProfiler {\n       std::ostream& os, const BasicBlockProfiler& s);\n \n   DataList data_list_;\n+  base::Mutex data_list_mutex_;\n \n   DISALLOW_COPY_AND_ASSIGN(BasicBlockProfiler);\n };"
        },
        {
            "sha": "30450b133b0ad5af074ddc16ccfcbfe10f576611",
            "filename": "deps/v8/src/bootstrapper.cc",
            "status": "modified",
            "additions": 249,
            "deletions": 129,
            "changes": 378,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbootstrapper.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -5,8 +5,8 @@\n #include \"src/bootstrapper.h\"\n \n #include \"src/accessors.h\"\n+#include \"src/api-inl.h\"\n #include \"src/api-natives.h\"\n-#include \"src/api.h\"\n #include \"src/base/ieee754.h\"\n #include \"src/code-stubs.h\"\n #include \"src/compiler.h\"\n@@ -24,11 +24,16 @@\n #include \"src/objects/hash-table-inl.h\"\n #ifdef V8_INTL_SUPPORT\n #include \"src/objects/intl-objects.h\"\n+#include \"src/objects/js-collator.h\"\n+#include \"src/objects/js-list-format.h\"\n #include \"src/objects/js-locale.h\"\n #endif  // V8_INTL_SUPPORT\n+#include \"src/objects/js-array-buffer-inl.h\"\n+#include \"src/objects/js-array-inl.h\"\n #include \"src/objects/js-regexp-string-iterator.h\"\n #include \"src/objects/js-regexp.h\"\n #ifdef V8_INTL_SUPPORT\n+#include \"src/objects/js-plural-rules.h\"\n #include \"src/objects/js-relative-time-format.h\"\n #endif  // V8_INTL_SUPPORT\n #include \"src/objects/templates.h\"\n@@ -163,7 +168,7 @@ class Genesis BASE_EMBEDDED {\n   Handle<JSGlobalProxy> global_proxy() { return global_proxy_; }\n \n  private:\n-  Handle<Context> native_context() { return native_context_; }\n+  Handle<NativeContext> native_context() { return native_context_; }\n \n   // Creates some basic objects. Used for creating a context from scratch.\n   void CreateRoots();\n@@ -292,7 +297,7 @@ class Genesis BASE_EMBEDDED {\n \n   Isolate* isolate_;\n   Handle<Context> result_;\n-  Handle<Context> native_context_;\n+  Handle<NativeContext> native_context_;\n   Handle<JSGlobalProxy> global_proxy_;\n \n   // Temporary function maps needed only during bootstrapping.\n@@ -474,10 +479,10 @@ V8_NOINLINE Handle<JSFunction> SimpleInstallFunction(\n     Isolate* isolate, Handle<JSObject> base, Handle<Name> property_name,\n     Handle<String> function_name, Builtins::Name call, int len, bool adapt,\n     PropertyAttributes attrs = DONT_ENUM,\n-    BuiltinFunctionId id = kInvalidBuiltinFunctionId) {\n+    BuiltinFunctionId id = BuiltinFunctionId::kInvalidBuiltinFunctionId) {\n   Handle<JSFunction> fun =\n       SimpleCreateFunction(isolate, function_name, call, len, adapt);\n-  if (id != kInvalidBuiltinFunctionId) {\n+  if (id != BuiltinFunctionId::kInvalidBuiltinFunctionId) {\n     fun->shared()->set_builtin_function_id(id);\n   }\n   InstallFunction(isolate, base, fun, property_name, attrs);\n@@ -488,7 +493,7 @@ V8_NOINLINE Handle<JSFunction> SimpleInstallFunction(\n     Isolate* isolate, Handle<JSObject> base, Handle<String> name,\n     Builtins::Name call, int len, bool adapt,\n     PropertyAttributes attrs = DONT_ENUM,\n-    BuiltinFunctionId id = kInvalidBuiltinFunctionId) {\n+    BuiltinFunctionId id = BuiltinFunctionId::kInvalidBuiltinFunctionId) {\n   return SimpleInstallFunction(isolate, base, name, name, call, len, adapt,\n                                attrs, id);\n }\n@@ -497,7 +502,7 @@ V8_NOINLINE Handle<JSFunction> SimpleInstallFunction(\n     Isolate* isolate, Handle<JSObject> base, Handle<Name> property_name,\n     const char* function_name, Builtins::Name call, int len, bool adapt,\n     PropertyAttributes attrs = DONT_ENUM,\n-    BuiltinFunctionId id = kInvalidBuiltinFunctionId) {\n+    BuiltinFunctionId id = BuiltinFunctionId::kInvalidBuiltinFunctionId) {\n   // Function name does not have to be internalized.\n   return SimpleInstallFunction(\n       isolate, base, property_name,\n@@ -509,7 +514,7 @@ V8_NOINLINE Handle<JSFunction> SimpleInstallFunction(\n     Isolate* isolate, Handle<JSObject> base, const char* name,\n     Builtins::Name call, int len, bool adapt,\n     PropertyAttributes attrs = DONT_ENUM,\n-    BuiltinFunctionId id = kInvalidBuiltinFunctionId) {\n+    BuiltinFunctionId id = BuiltinFunctionId::kInvalidBuiltinFunctionId) {\n   // Although function name does not have to be internalized the property name\n   // will be internalized during property addition anyway, so do it here now.\n   return SimpleInstallFunction(isolate, base,\n@@ -1104,15 +1109,15 @@ void Genesis::CreateJSProxyMaps() {\n     Map::EnsureDescriptorSlack(isolate_, map, 2);\n \n     {  // proxy\n-      Descriptor d = Descriptor::DataField(factory()->proxy_string(),\n+      Descriptor d = Descriptor::DataField(isolate(), factory()->proxy_string(),\n                                            JSProxyRevocableResult::kProxyIndex,\n                                            NONE, Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // revoke\n-      Descriptor d = Descriptor::DataField(factory()->revoke_string(),\n-                                           JSProxyRevocableResult::kRevokeIndex,\n-                                           NONE, Representation::Tagged());\n+      Descriptor d = Descriptor::DataField(\n+          isolate(), factory()->revoke_string(),\n+          JSProxyRevocableResult::kRevokeIndex, NONE, Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n \n@@ -1586,7 +1591,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         \"[Symbol.hasInstance]\", Builtins::kFunctionPrototypeHasInstance, 1,\n         true,\n         static_cast<PropertyAttributes>(DONT_ENUM | DONT_DELETE | READ_ONLY),\n-        kFunctionHasInstance);\n+        BuiltinFunctionId::kFunctionHasInstance);\n     native_context()->set_function_has_instance(*has_instance);\n \n     // Complete setting up function maps.\n@@ -1664,7 +1669,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         isolate_, global, \"Array\", JS_ARRAY_TYPE, JSArray::kSize, 0,\n         isolate_->initial_object_prototype(), Builtins::kArrayConstructor);\n     array_function->shared()->DontAdaptArguments();\n-    array_function->shared()->set_builtin_function_id(kArrayConstructor);\n+    array_function->shared()->set_builtin_function_id(\n+        BuiltinFunctionId::kArrayConstructor);\n \n     // This seems a bit hackish, but we need to make sure Array.length\n     // is 1.\n@@ -1717,6 +1723,10 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     SimpleInstallFunction(isolate_, proto, \"concat\", Builtins::kArrayConcat, 1,\n                           false);\n+    SimpleInstallFunction(isolate_, proto, \"copyWithin\",\n+                          Builtins::kArrayPrototypeCopyWithin, 2, false);\n+    SimpleInstallFunction(isolate_, proto, \"fill\",\n+                          Builtins::kArrayPrototypeFill, 1, false);\n     SimpleInstallFunction(isolate_, proto, \"find\",\n                           Builtins::kArrayPrototypeFind, 1, false);\n     SimpleInstallFunction(isolate_, proto, \"findIndex\",\n@@ -1725,12 +1735,16 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           0, false);\n     SimpleInstallFunction(isolate_, proto, \"push\",\n                           Builtins::kArrayPrototypePush, 1, false);\n+    SimpleInstallFunction(isolate_, proto, \"reverse\",\n+                          Builtins::kArrayPrototypeReverse, 0, false);\n     SimpleInstallFunction(isolate_, proto, \"shift\",\n                           Builtins::kArrayPrototypeShift, 0, false);\n     SimpleInstallFunction(isolate_, proto, \"unshift\", Builtins::kArrayUnshift,\n                           1, false);\n     SimpleInstallFunction(isolate_, proto, \"slice\",\n                           Builtins::kArrayPrototypeSlice, 2, false);\n+    SimpleInstallFunction(isolate_, proto, \"sort\",\n+                          Builtins::kArrayPrototypeSort, 1, false);\n     if (FLAG_enable_experimental_builtins) {\n       SimpleInstallFunction(isolate_, proto, \"splice\",\n                             Builtins::kArraySpliceTorque, 2, false);\n@@ -1743,13 +1757,14 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     SimpleInstallFunction(isolate_, proto, \"indexOf\", Builtins::kArrayIndexOf,\n                           1, false);\n     SimpleInstallFunction(isolate_, proto, \"keys\",\n-                          Builtins::kArrayPrototypeKeys, 0, true, kArrayKeys);\n+                          Builtins::kArrayPrototypeKeys, 0, true,\n+                          BuiltinFunctionId::kArrayKeys);\n     SimpleInstallFunction(isolate_, proto, \"entries\",\n                           Builtins::kArrayPrototypeEntries, 0, true,\n-                          kArrayEntries);\n+                          BuiltinFunctionId::kArrayEntries);\n     SimpleInstallFunction(isolate_, proto, factory->iterator_symbol(), \"values\",\n                           Builtins::kArrayPrototypeValues, 0, true, DONT_ENUM,\n-                          kArrayValues);\n+                          BuiltinFunctionId::kArrayValues);\n     SimpleInstallFunction(isolate_, proto, \"forEach\", Builtins::kArrayForEach,\n                           1, false);\n     SimpleInstallFunction(isolate_, proto, \"filter\", Builtins::kArrayFilter, 1,\n@@ -1781,7 +1796,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     SimpleInstallFunction(isolate_, array_iterator_prototype, \"next\",\n                           Builtins::kArrayIteratorPrototypeNext, 0, true,\n-                          kArrayIteratorNext);\n+                          BuiltinFunctionId::kArrayIteratorNext);\n \n     Handle<JSFunction> array_iterator_function =\n         CreateFunction(isolate_, factory->ArrayIterator_string(),\n@@ -1799,7 +1814,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     Handle<JSFunction> number_fun = InstallFunction(\n         isolate_, global, \"Number\", JS_VALUE_TYPE, JSValue::kSize, 0,\n         isolate_->initial_object_prototype(), Builtins::kNumberConstructor);\n-    number_fun->shared()->set_builtin_function_id(kNumberConstructor);\n+    number_fun->shared()->set_builtin_function_id(\n+        BuiltinFunctionId::kNumberConstructor);\n     number_fun->shared()->DontAdaptArguments();\n     number_fun->shared()->set_length(1);\n     InstallWithIntrinsicDefaultProto(isolate_, number_fun,\n@@ -1827,7 +1843,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     SimpleInstallFunction(isolate_, prototype, \"valueOf\",\n                           Builtins::kNumberPrototypeValueOf, 0, true);\n \n-    // Install Intl fallback functions.\n     SimpleInstallFunction(isolate_, prototype, \"toLocaleString\",\n                           Builtins::kNumberPrototypeToLocaleString, 0, false);\n \n@@ -1944,7 +1959,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     Handle<JSFunction> string_fun = InstallFunction(\n         isolate_, global, \"String\", JS_VALUE_TYPE, JSValue::kSize, 0,\n         isolate_->initial_object_prototype(), Builtins::kStringConstructor);\n-    string_fun->shared()->set_builtin_function_id(kStringConstructor);\n+    string_fun->shared()->set_builtin_function_id(\n+        BuiltinFunctionId::kStringConstructor);\n     string_fun->shared()->DontAdaptArguments();\n     string_fun->shared()->set_length(1);\n     InstallWithIntrinsicDefaultProto(isolate_, string_fun,\n@@ -2022,8 +2038,13 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kStringPrototypeLastIndexOf, 1, false);\n     SimpleInstallFunction(isolate_, prototype, \"link\",\n                           Builtins::kStringPrototypeLink, 1, true);\n+#ifdef V8_INTL_SUPPORT\n+    SimpleInstallFunction(isolate_, prototype, \"localeCompare\",\n+                          Builtins::kStringPrototypeLocaleCompare, 1, false);\n+#else\n     SimpleInstallFunction(isolate_, prototype, \"localeCompare\",\n                           Builtins::kStringPrototypeLocaleCompare, 1, true);\n+#endif  // V8_INTL_SUPPORT\n     SimpleInstallFunction(isolate_, prototype, \"match\",\n                           Builtins::kStringPrototypeMatch, 1, true);\n #ifdef V8_INTL_SUPPORT\n@@ -2069,18 +2090,18 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kStringPrototypeTrimStart, 0, false);\n     SimpleInstallFunction(isolate_, prototype, \"trimRight\",\n                           Builtins::kStringPrototypeTrimEnd, 0, false);\n-#ifdef V8_INTL_SUPPORT\n-    SimpleInstallFunction(isolate_, prototype, \"toLowerCase\",\n-                          Builtins::kStringPrototypeToLowerCaseIntl, 0, true);\n-    SimpleInstallFunction(isolate_, prototype, \"toUpperCase\",\n-                          Builtins::kStringPrototypeToUpperCaseIntl, 0, false);\n-#else\n     SimpleInstallFunction(isolate_, prototype, \"toLocaleLowerCase\",\n                           Builtins::kStringPrototypeToLocaleLowerCase, 0,\n                           false);\n     SimpleInstallFunction(isolate_, prototype, \"toLocaleUpperCase\",\n                           Builtins::kStringPrototypeToLocaleUpperCase, 0,\n                           false);\n+#ifdef V8_INTL_SUPPORT\n+    SimpleInstallFunction(isolate_, prototype, \"toLowerCase\",\n+                          Builtins::kStringPrototypeToLowerCaseIntl, 0, true);\n+    SimpleInstallFunction(isolate_, prototype, \"toUpperCase\",\n+                          Builtins::kStringPrototypeToUpperCaseIntl, 0, false);\n+#else\n     SimpleInstallFunction(isolate_, prototype, \"toLowerCase\",\n                           Builtins::kStringPrototypeToLowerCase, 0, false);\n     SimpleInstallFunction(isolate_, prototype, \"toUpperCase\",\n@@ -2092,7 +2113,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     SimpleInstallFunction(isolate_, prototype, factory->iterator_symbol(),\n                           \"[Symbol.iterator]\",\n                           Builtins::kStringPrototypeIterator, 0, true,\n-                          DONT_ENUM, kStringIterator);\n+                          DONT_ENUM, BuiltinFunctionId::kStringIterator);\n   }\n \n   {  // --- S t r i n g I t e r a t o r ---\n@@ -2110,7 +2131,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     SimpleInstallFunction(isolate_, string_iterator_prototype, \"next\",\n                           Builtins::kStringIteratorPrototypeNext, 0, true,\n-                          kStringIteratorNext);\n+                          BuiltinFunctionId::kStringIteratorNext);\n \n     Handle<JSFunction> string_iterator_function = CreateFunction(\n         isolate_, factory->NewStringFromAsciiChecked(\"StringIterator\"),\n@@ -2125,7 +2146,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     Handle<JSFunction> symbol_fun = InstallFunction(\n         isolate_, global, \"Symbol\", JS_VALUE_TYPE, JSValue::kSize, 0,\n         factory->the_hole_value(), Builtins::kSymbolConstructor);\n-    symbol_fun->shared()->set_builtin_function_id(kSymbolConstructor);\n+    symbol_fun->shared()->set_builtin_function_id(\n+        BuiltinFunctionId::kSymbolConstructor);\n     symbol_fun->shared()->set_length(0);\n     symbol_fun->shared()->DontAdaptArguments();\n     native_context()->set_symbol_function(*symbol_fun);\n@@ -2611,7 +2633,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     // ECMA-262, section 15.10.7.5.\n     PropertyAttributes writable =\n         static_cast<PropertyAttributes>(DONT_ENUM | DONT_DELETE);\n-    Descriptor d = Descriptor::DataField(factory->lastIndex_string(),\n+    Descriptor d = Descriptor::DataField(isolate(), factory->lastIndex_string(),\n                                          JSRegExp::kLastIndexFieldIndex,\n                                          writable, Representation::Tagged());\n     initial_map->AppendDescriptor(&d);\n@@ -2885,6 +2907,17 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n       SimpleInstallFunction(isolate_, prototype, \"formatToParts\",\n                             Builtins::kDateTimeFormatPrototypeFormatToParts, 1,\n                             false);\n+\n+      SimpleInstallGetter(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"format\"),\n+                          Builtins::kDateTimeFormatPrototypeFormat, false);\n+\n+      {\n+        Handle<SharedFunctionInfo> info = SimpleCreateBuiltinSharedFunctionInfo(\n+            isolate_, Builtins::kDateTimeFormatInternalFormat,\n+            factory->empty_string(), 1);\n+        native_context()->set_date_format_internal_format_shared_fun(*info);\n+      }\n     }\n \n     {\n@@ -2921,9 +2954,11 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     {\n       Handle<JSFunction> collator_constructor = InstallFunction(\n-          isolate_, intl, \"Collator\", JS_OBJECT_TYPE, Collator::kSize, 0,\n-          factory->the_hole_value(), Builtins::kIllegal);\n-      native_context()->set_intl_collator_function(*collator_constructor);\n+          isolate_, intl, \"Collator\", JS_INTL_COLLATOR_TYPE, JSCollator::kSize,\n+          0, factory->the_hole_value(), Builtins::kCollatorConstructor);\n+      collator_constructor->shared()->DontAdaptArguments();\n+      InstallWithIntrinsicDefaultProto(isolate_, collator_constructor,\n+                                       Context::INTL_COLLATOR_FUNCTION_INDEX);\n \n       Handle<JSObject> prototype(\n           JSObject::cast(collator_constructor->prototype()), isolate_);\n@@ -2933,6 +2968,17 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           isolate_, prototype, factory->to_string_tag_symbol(),\n           factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+      SimpleInstallGetter(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"compare\"),\n+                          Builtins::kCollatorPrototypeCompare, false);\n+\n+      {\n+        Handle<SharedFunctionInfo> info = SimpleCreateBuiltinSharedFunctionInfo(\n+            isolate_, Builtins::kCollatorInternalCompare,\n+            factory->empty_string(), 2);\n+        native_context()->set_collator_internal_compare_shared_fun(*info);\n+      }\n     }\n \n     {\n@@ -2951,14 +2997,29 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           isolate_, prototype, factory->to_string_tag_symbol(),\n           factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+      SimpleInstallGetter(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"adoptText\"),\n+                          Builtins::kBreakIteratorPrototypeAdoptText, false);\n+\n+      {\n+        Handle<SharedFunctionInfo> info = SimpleCreateBuiltinSharedFunctionInfo(\n+            isolate_, Builtins::kBreakIteratorInternalAdoptText,\n+            factory->empty_string(), 1);\n+        native_context()->set_break_iterator_internal_adopt_text_shared_fun(\n+            *info);\n+      }\n     }\n \n     {\n       Handle<JSFunction> plural_rules_constructor = InstallFunction(\n-          isolate_, intl, \"PluralRules\", JS_OBJECT_TYPE, PluralRules::kSize, 0,\n-          factory->the_hole_value(), Builtins::kIllegal);\n-      native_context()->set_intl_plural_rules_function(\n-          *plural_rules_constructor);\n+          isolate_, intl, \"PluralRules\", JS_INTL_PLURAL_RULES_TYPE,\n+          JSPluralRules::kSize, 0, factory->the_hole_value(),\n+          Builtins::kPluralRulesConstructor);\n+      plural_rules_constructor->shared()->DontAdaptArguments();\n+      InstallWithIntrinsicDefaultProto(\n+          isolate_, plural_rules_constructor,\n+          Context::INTL_PLURAL_RULES_FUNCTION_INDEX);\n \n       Handle<JSObject> prototype(\n           JSObject::cast(plural_rules_constructor->prototype()), isolate_);\n@@ -3056,29 +3117,29 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                         Builtins::kTypedArrayPrototypeBuffer, false);\n     SimpleInstallGetter(isolate_, prototype, factory->byte_length_string(),\n                         Builtins::kTypedArrayPrototypeByteLength, true,\n-                        kTypedArrayByteLength);\n+                        BuiltinFunctionId::kTypedArrayByteLength);\n     SimpleInstallGetter(isolate_, prototype, factory->byte_offset_string(),\n                         Builtins::kTypedArrayPrototypeByteOffset, true,\n-                        kTypedArrayByteOffset);\n+                        BuiltinFunctionId::kTypedArrayByteOffset);\n     SimpleInstallGetter(isolate_, prototype, factory->length_string(),\n                         Builtins::kTypedArrayPrototypeLength, true,\n-                        kTypedArrayLength);\n+                        BuiltinFunctionId::kTypedArrayLength);\n     SimpleInstallGetter(isolate_, prototype, factory->to_string_tag_symbol(),\n                         Builtins::kTypedArrayPrototypeToStringTag, true,\n-                        kTypedArrayToStringTag);\n+                        BuiltinFunctionId::kTypedArrayToStringTag);\n \n     // Install \"keys\", \"values\" and \"entries\" methods on the {prototype}.\n     SimpleInstallFunction(isolate_, prototype, \"entries\",\n                           Builtins::kTypedArrayPrototypeEntries, 0, true,\n-                          kTypedArrayEntries);\n+                          BuiltinFunctionId::kTypedArrayEntries);\n \n     SimpleInstallFunction(isolate_, prototype, \"keys\",\n                           Builtins::kTypedArrayPrototypeKeys, 0, true,\n-                          kTypedArrayKeys);\n+                          BuiltinFunctionId::kTypedArrayKeys);\n \n     Handle<JSFunction> values = SimpleInstallFunction(\n         isolate_, prototype, \"values\", Builtins::kTypedArrayPrototypeValues, 0,\n-        true, kTypedArrayValues);\n+        true, BuiltinFunctionId::kTypedArrayValues);\n     JSObject::AddProperty(isolate_, prototype, factory->iterator_symbol(),\n                           values, DONT_ENUM);\n \n@@ -3124,7 +3185,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n   }\n \n   {  // -- T y p e d A r r a y s\n-#define INSTALL_TYPED_ARRAY(Type, type, TYPE, ctype, size)             \\\n+#define INSTALL_TYPED_ARRAY(Type, type, TYPE, ctype)                   \\\n   {                                                                    \\\n     Handle<JSFunction> fun =                                           \\\n         InstallTypedArray(#Type \"Array\", TYPE##_ELEMENTS);             \\\n@@ -3159,13 +3220,13 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     // on the {prototype}.\n     SimpleInstallGetter(isolate_, prototype, factory->buffer_string(),\n                         Builtins::kDataViewPrototypeGetBuffer, false,\n-                        kDataViewBuffer);\n+                        BuiltinFunctionId::kDataViewBuffer);\n     SimpleInstallGetter(isolate_, prototype, factory->byte_length_string(),\n                         Builtins::kDataViewPrototypeGetByteLength, false,\n-                        kDataViewByteLength);\n+                        BuiltinFunctionId::kDataViewByteLength);\n     SimpleInstallGetter(isolate_, prototype, factory->byte_offset_string(),\n                         Builtins::kDataViewPrototypeGetByteOffset, false,\n-                        kDataViewByteOffset);\n+                        BuiltinFunctionId::kDataViewByteOffset);\n \n     SimpleInstallFunction(isolate_, prototype, \"getInt8\",\n                           Builtins::kDataViewPrototypeGetInt8, 1, false);\n@@ -3326,7 +3387,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n       PropertyAttributes attribs =\n           static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY);\n       Descriptor d =\n-          Descriptor::DataField(factory->to_string_tag_symbol(),\n+          Descriptor::DataField(isolate(), factory->to_string_tag_symbol(),\n                                 JSModuleNamespace::kToStringTagFieldIndex,\n                                 attribs, Representation::Tagged());\n       map->AppendDescriptor(&d);\n@@ -3340,14 +3401,14 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     Map::EnsureDescriptorSlack(isolate_, map, 2);\n \n     {  // value\n-      Descriptor d = Descriptor::DataField(factory->value_string(),\n+      Descriptor d = Descriptor::DataField(isolate(), factory->value_string(),\n                                            JSIteratorResult::kValueIndex, NONE,\n                                            Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n \n     {  // done\n-      Descriptor d = Descriptor::DataField(factory->done_string(),\n+      Descriptor d = Descriptor::DataField(isolate(), factory->done_string(),\n                                            JSIteratorResult::kDoneIndex, NONE,\n                                            Representation::Tagged());\n       map->AppendDescriptor(&d);\n@@ -3423,30 +3484,19 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n   {  // -- P r o x y\n     CreateJSProxyMaps();\n-\n     // Proxy function map has prototype slot for storing initial map but does\n     // not have a prototype property.\n     Handle<Map> proxy_function_map = Map::Copy(\n         isolate_, isolate_->strict_function_without_prototype_map(), \"Proxy\");\n-    // Re-set the unused property fields after changing the instance size.\n-    // TODO(ulan): Do not change instance size after map creation.\n-    int unused_property_fields = proxy_function_map->UnusedPropertyFields();\n-    proxy_function_map->set_instance_size(JSFunction::kSizeWithPrototype);\n-    // The prototype slot shifts the in-object properties area by one slot.\n-    proxy_function_map->SetInObjectPropertiesStartInWords(\n-        proxy_function_map->GetInObjectPropertiesStartInWords() + 1);\n-    proxy_function_map->set_has_prototype_slot(true);\n     proxy_function_map->set_is_constructor(true);\n-    proxy_function_map->SetInObjectUnusedPropertyFields(unused_property_fields);\n \n     Handle<String> name = factory->Proxy_string();\n \n     NewFunctionArgs args = NewFunctionArgs::ForBuiltin(\n         name, proxy_function_map, Builtins::kProxyConstructor);\n     Handle<JSFunction> proxy_function = factory->NewFunction(args);\n \n-    JSFunction::SetInitialMap(proxy_function, isolate_->proxy_map(),\n-                              factory->null_value());\n+    isolate_->proxy_map()->SetConstructor(*proxy_function);\n \n     proxy_function->shared()->set_internal_formal_parameter_count(2);\n     proxy_function->shared()->set_length(2);\n@@ -3455,6 +3505,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     InstallFunction(isolate_, global, name, proxy_function,\n                     factory->Object_string());\n \n+    DCHECK(!proxy_function->has_prototype_property());\n+\n     SimpleInstallFunction(isolate_, proxy_function, \"revocable\",\n                           Builtins::kProxyRevocable, 2, true);\n \n@@ -3558,15 +3610,17 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     Map::EnsureDescriptorSlack(isolate_, map, 2);\n \n     {  // length\n-      Descriptor d = Descriptor::DataField(\n-          factory->length_string(), JSSloppyArgumentsObject::kLengthIndex,\n-          DONT_ENUM, Representation::Tagged());\n+      Descriptor d =\n+          Descriptor::DataField(isolate(), factory->length_string(),\n+                                JSSloppyArgumentsObject::kLengthIndex,\n+                                DONT_ENUM, Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // callee\n-      Descriptor d = Descriptor::DataField(\n-          factory->callee_string(), JSSloppyArgumentsObject::kCalleeIndex,\n-          DONT_ENUM, Representation::Tagged());\n+      Descriptor d =\n+          Descriptor::DataField(isolate(), factory->callee_string(),\n+                                JSSloppyArgumentsObject::kCalleeIndex,\n+                                DONT_ENUM, Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     // @@iterator method is added later.\n@@ -3610,9 +3664,10 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     Map::EnsureDescriptorSlack(isolate_, map, 2);\n \n     {  // length\n-      Descriptor d = Descriptor::DataField(\n-          factory->length_string(), JSStrictArgumentsObject::kLengthIndex,\n-          DONT_ENUM, Representation::Tagged());\n+      Descriptor d =\n+          Descriptor::DataField(isolate(), factory->length_string(),\n+                                JSStrictArgumentsObject::kLengthIndex,\n+                                DONT_ENUM, Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // callee\n@@ -3765,9 +3820,10 @@ bool Bootstrapper::CompileNative(Isolate* isolate, Vector<const char> name,\n       isolate->factory()->NewStringFromUtf8(name).ToHandleChecked();\n   MaybeHandle<SharedFunctionInfo> maybe_function_info =\n       Compiler::GetSharedFunctionInfoForScript(\n-          source, Compiler::ScriptDetails(script_name), ScriptOriginOptions(),\n-          nullptr, nullptr, ScriptCompiler::kNoCompileOptions,\n-          ScriptCompiler::kNoCacheNoReason, natives_flag);\n+          isolate, source, Compiler::ScriptDetails(script_name),\n+          ScriptOriginOptions(), nullptr, nullptr,\n+          ScriptCompiler::kNoCompileOptions, ScriptCompiler::kNoCacheNoReason,\n+          natives_flag);\n   Handle<SharedFunctionInfo> function_info;\n   if (!maybe_function_info.ToHandle(&function_info)) return false;\n \n@@ -3830,8 +3886,9 @@ bool Genesis::CompileExtension(Isolate* isolate, v8::Extension* extension) {\n         factory->NewStringFromUtf8(name).ToHandleChecked();\n     MaybeHandle<SharedFunctionInfo> maybe_function_info =\n         Compiler::GetSharedFunctionInfoForScript(\n-            source, Compiler::ScriptDetails(script_name), ScriptOriginOptions(),\n-            extension, nullptr, ScriptCompiler::kNoCompileOptions,\n+            isolate, source, Compiler::ScriptDetails(script_name),\n+            ScriptOriginOptions(), extension, nullptr,\n+            ScriptCompiler::kNoCompileOptions,\n             ScriptCompiler::kNoCacheBecauseV8Extension, EXTENSION_CODE);\n     if (!maybe_function_info.ToHandle(&function_info)) return false;\n     cache->Add(isolate, name, function_info);\n@@ -3917,7 +3974,7 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n                                      Handle<JSObject> container) {\n   Factory* factory = isolate->factory();\n   HandleScope scope(isolate);\n-  Handle<Context> native_context = isolate->native_context();\n+  Handle<NativeContext> native_context = isolate->native_context();\n #define EXPORT_PRIVATE_SYMBOL(NAME)                                       \\\n   Handle<String> NAME##_name = factory->NewStringFromAsciiChecked(#NAME); \\\n   JSObject::AddProperty(isolate, container, NAME##_name, factory->NAME(), NONE);\n@@ -4017,7 +4074,7 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n     // Install the next function on the {prototype}.\n     SimpleInstallFunction(isolate, prototype, \"next\",\n                           Builtins::kSetIteratorPrototypeNext, 0, true,\n-                          kSetIteratorNext);\n+                          BuiltinFunctionId::kSetIteratorNext);\n \n     // Setup SetIterator constructor.\n     Handle<JSFunction> set_iterator_function = InstallFunction(\n@@ -4052,7 +4109,7 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n     // Install the next function on the {prototype}.\n     SimpleInstallFunction(isolate, prototype, \"next\",\n                           Builtins::kMapIteratorPrototypeNext, 0, true,\n-                          kMapIteratorNext);\n+                          BuiltinFunctionId::kMapIteratorNext);\n \n     // Setup MapIterator constructor.\n     Handle<JSFunction> map_iterator_function = InstallFunction(\n@@ -4215,6 +4272,17 @@ EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_numeric_separator)\n \n #undef EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE\n \n+void Genesis::InitializeGlobal_harmony_global() {\n+  if (!FLAG_harmony_global) return;\n+\n+  Factory* factory = isolate()->factory();\n+  Handle<JSGlobalObject> global(native_context()->global_object(), isolate());\n+  Handle<JSGlobalProxy> global_proxy(native_context()->global_proxy(),\n+                                     isolate());\n+  JSObject::AddProperty(isolate_, global, factory->globalThis_string(),\n+                        global_proxy, DONT_ENUM);\n+}\n+\n void Genesis::InitializeGlobal_harmony_sharedarraybuffer() {\n   if (!FLAG_harmony_sharedarraybuffer) return;\n \n@@ -4369,7 +4437,7 @@ void Genesis::InitializeGlobal_harmony_string_matchall() {\n         JS_REGEXP_STRING_ITERATOR_TYPE, JSRegExpStringIterator::kSize, 0,\n         regexp_string_iterator_prototype, Builtins::kIllegal);\n     regexp_string_iterator_function->shared()->set_native(false);\n-    native_context()->set_initial_regexp_string_iterator_prototype_map_index(\n+    native_context()->set_initial_regexp_string_iterator_prototype_map(\n         regexp_string_iterator_function->initial_map());\n   }\n \n@@ -4398,7 +4466,8 @@ void Genesis::InitializeGlobal_harmony_bigint() {\n   Handle<JSFunction> bigint_fun = InstallFunction(\n       isolate(), global, \"BigInt\", JS_VALUE_TYPE, JSValue::kSize, 0,\n       factory->the_hole_value(), Builtins::kBigIntConstructor);\n-  bigint_fun->shared()->set_builtin_function_id(kBigIntConstructor);\n+  bigint_fun->shared()->set_builtin_function_id(\n+      BuiltinFunctionId::kBigIntConstructor);\n   bigint_fun->shared()->DontAdaptArguments();\n   bigint_fun->shared()->set_length(1);\n   InstallWithIntrinsicDefaultProto(isolate(), bigint_fun,\n@@ -4501,6 +4570,39 @@ void Genesis::InitializeGlobal_harmony_await_optimization() {\n }\n \n #ifdef V8_INTL_SUPPORT\n+void Genesis::InitializeGlobal_harmony_intl_list_format() {\n+  if (!FLAG_harmony_intl_list_format) return;\n+  Handle<JSObject> intl = Handle<JSObject>::cast(\n+      JSReceiver::GetProperty(\n+          isolate(),\n+          Handle<JSReceiver>(native_context()->global_object(), isolate()),\n+          factory()->InternalizeUtf8String(\"Intl\"))\n+          .ToHandleChecked());\n+\n+  Handle<JSFunction> list_format_fun =\n+      InstallFunction(isolate(), intl, \"ListFormat\", JS_INTL_LIST_FORMAT_TYPE,\n+                      JSListFormat::kSize, 0, factory()->the_hole_value(),\n+                      Builtins::kListFormatConstructor);\n+  list_format_fun->shared()->set_length(0);\n+  list_format_fun->shared()->DontAdaptArguments();\n+\n+  // Setup %ListFormatPrototype%.\n+  Handle<JSObject> prototype(\n+      JSObject::cast(list_format_fun->instance_prototype()), isolate());\n+\n+  // Install the @@toStringTag property on the {prototype}.\n+  JSObject::AddProperty(isolate(), prototype, factory()->to_string_tag_symbol(),\n+                        factory()->NewStringFromStaticChars(\"Intl.ListFormat\"),\n+                        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+  SimpleInstallFunction(isolate(), prototype, \"resolvedOptions\",\n+                        Builtins::kListFormatPrototypeResolvedOptions, 0,\n+                        false);\n+  SimpleInstallFunction(isolate(), prototype, \"format\",\n+                        Builtins::kListFormatPrototypeFormat, 1, false);\n+  SimpleInstallFunction(isolate(), prototype, \"formatToParts\",\n+                        Builtins::kListFormatPrototypeFormatToParts, 1, false);\n+}\n \n void Genesis::InitializeGlobal_harmony_locale() {\n   if (!FLAG_harmony_locale) return;\n@@ -4531,6 +4633,10 @@ void Genesis::InitializeGlobal_harmony_locale() {\n \n   SimpleInstallFunction(isolate(), prototype, \"toString\",\n                         Builtins::kLocalePrototypeToString, 0, false);\n+  SimpleInstallFunction(isolate(), prototype, \"maximize\",\n+                        Builtins::kLocalePrototypeMaximize, 0, false);\n+  SimpleInstallFunction(isolate(), prototype, \"minimize\",\n+                        Builtins::kLocalePrototypeMinimize, 0, false);\n   // Base locale getters.\n   SimpleInstallGetter(isolate(), prototype,\n                       factory()->InternalizeUtf8String(\"language\"),\n@@ -4587,13 +4693,19 @@ void Genesis::InitializeGlobal_harmony_intl_relative_time_format() {\n       isolate());\n \n   // Install the @@toStringTag property on the {prototype}.\n-  JSObject::AddProperty(isolate(), prototype, factory()->to_string_tag_symbol(),\n-                        factory()->Object_string(),\n-                        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+  JSObject::AddProperty(\n+      isolate(), prototype, factory()->to_string_tag_symbol(),\n+      factory()->NewStringFromStaticChars(\"Intl.RelativeTimeFormat\"),\n+      static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n   SimpleInstallFunction(isolate(), prototype, \"resolvedOptions\",\n                         Builtins::kRelativeTimeFormatPrototypeResolvedOptions,\n                         0, false);\n+  SimpleInstallFunction(isolate(), prototype, \"format\",\n+                        Builtins::kRelativeTimeFormatPrototypeFormat, 2, false);\n+  SimpleInstallFunction(isolate(), prototype, \"formatToParts\",\n+                        Builtins::kRelativeTimeFormatPrototypeFormatToParts, 2,\n+                        false);\n }\n \n #endif  // V8_INTL_SUPPORT\n@@ -4622,9 +4734,10 @@ Handle<JSFunction> Genesis::CreateArrayBuffer(\n \n   switch (array_buffer_kind) {\n     case ARRAY_BUFFER:\n-      SimpleInstallFunction(\n-          isolate(), array_buffer_fun, factory()->isView_string(),\n-          Builtins::kArrayBufferIsView, 1, true, DONT_ENUM, kArrayBufferIsView);\n+      SimpleInstallFunction(isolate(), array_buffer_fun,\n+                            factory()->isView_string(),\n+                            Builtins::kArrayBufferIsView, 1, true, DONT_ENUM,\n+                            BuiltinFunctionId::kArrayBufferIsView);\n \n       // Install the \"byteLength\" getter on the {prototype}.\n       SimpleInstallGetter(isolate(), prototype, factory()->byte_length_string(),\n@@ -4807,29 +4920,33 @@ bool Genesis::InstallNatives(GlobalContextType context_type) {\n \n   // Install Global.decodeURI.\n   SimpleInstallFunction(isolate(), global_object, \"decodeURI\",\n-                        Builtins::kGlobalDecodeURI, 1, false, kGlobalDecodeURI);\n+                        Builtins::kGlobalDecodeURI, 1, false,\n+                        BuiltinFunctionId::kGlobalDecodeURI);\n \n   // Install Global.decodeURIComponent.\n   SimpleInstallFunction(isolate(), global_object, \"decodeURIComponent\",\n                         Builtins::kGlobalDecodeURIComponent, 1, false,\n-                        kGlobalDecodeURIComponent);\n+                        BuiltinFunctionId::kGlobalDecodeURIComponent);\n \n   // Install Global.encodeURI.\n   SimpleInstallFunction(isolate(), global_object, \"encodeURI\",\n-                        Builtins::kGlobalEncodeURI, 1, false, kGlobalEncodeURI);\n+                        Builtins::kGlobalEncodeURI, 1, false,\n+                        BuiltinFunctionId::kGlobalEncodeURI);\n \n   // Install Global.encodeURIComponent.\n   SimpleInstallFunction(isolate(), global_object, \"encodeURIComponent\",\n                         Builtins::kGlobalEncodeURIComponent, 1, false,\n-                        kGlobalEncodeURIComponent);\n+                        BuiltinFunctionId::kGlobalEncodeURIComponent);\n \n   // Install Global.escape.\n   SimpleInstallFunction(isolate(), global_object, \"escape\",\n-                        Builtins::kGlobalEscape, 1, false, kGlobalEscape);\n+                        Builtins::kGlobalEscape, 1, false,\n+                        BuiltinFunctionId::kGlobalEscape);\n \n   // Install Global.unescape.\n   SimpleInstallFunction(isolate(), global_object, \"unescape\",\n-                        Builtins::kGlobalUnescape, 1, false, kGlobalUnescape);\n+                        Builtins::kGlobalUnescape, 1, false,\n+                        BuiltinFunctionId::kGlobalUnescape);\n \n   // Install Global.eval.\n   {\n@@ -4841,11 +4958,13 @@ bool Genesis::InstallNatives(GlobalContextType context_type) {\n \n   // Install Global.isFinite\n   SimpleInstallFunction(isolate(), global_object, \"isFinite\",\n-                        Builtins::kGlobalIsFinite, 1, true, kGlobalIsFinite);\n+                        Builtins::kGlobalIsFinite, 1, true,\n+                        BuiltinFunctionId::kGlobalIsFinite);\n \n   // Install Global.isNaN\n   SimpleInstallFunction(isolate(), global_object, \"isNaN\",\n-                        Builtins::kGlobalIsNaN, 1, true, kGlobalIsNaN);\n+                        Builtins::kGlobalIsNaN, 1, true,\n+                        BuiltinFunctionId::kGlobalIsNaN);\n \n   // Install Array builtin functions.\n   {\n@@ -4887,27 +5006,29 @@ bool Genesis::InstallNatives(GlobalContextType context_type) {\n     Map::EnsureDescriptorSlack(isolate(), map, 4);\n \n     {  // get\n-      Descriptor d = Descriptor::DataField(\n-          factory()->get_string(), JSAccessorPropertyDescriptor::kGetIndex,\n-          NONE, Representation::Tagged());\n+      Descriptor d =\n+          Descriptor::DataField(isolate(), factory()->get_string(),\n+                                JSAccessorPropertyDescriptor::kGetIndex, NONE,\n+                                Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // set\n-      Descriptor d = Descriptor::DataField(\n-          factory()->set_string(), JSAccessorPropertyDescriptor::kSetIndex,\n-          NONE, Representation::Tagged());\n+      Descriptor d =\n+          Descriptor::DataField(isolate(), factory()->set_string(),\n+                                JSAccessorPropertyDescriptor::kSetIndex, NONE,\n+                                Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // enumerable\n       Descriptor d =\n-          Descriptor::DataField(factory()->enumerable_string(),\n+          Descriptor::DataField(isolate(), factory()->enumerable_string(),\n                                 JSAccessorPropertyDescriptor::kEnumerableIndex,\n                                 NONE, Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // configurable\n       Descriptor d = Descriptor::DataField(\n-          factory()->configurable_string(),\n+          isolate(), factory()->configurable_string(),\n           JSAccessorPropertyDescriptor::kConfigurableIndex, NONE,\n           Representation::Tagged());\n       map->AppendDescriptor(&d);\n@@ -4931,28 +5052,29 @@ bool Genesis::InstallNatives(GlobalContextType context_type) {\n     Map::EnsureDescriptorSlack(isolate(), map, 4);\n \n     {  // value\n-      Descriptor d = Descriptor::DataField(\n-          factory()->value_string(), JSDataPropertyDescriptor::kValueIndex,\n-          NONE, Representation::Tagged());\n+      Descriptor d =\n+          Descriptor::DataField(isolate(), factory()->value_string(),\n+                                JSDataPropertyDescriptor::kValueIndex, NONE,\n+                                Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // writable\n       Descriptor d =\n-          Descriptor::DataField(factory()->writable_string(),\n+          Descriptor::DataField(isolate(), factory()->writable_string(),\n                                 JSDataPropertyDescriptor::kWritableIndex, NONE,\n                                 Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // enumerable\n       Descriptor d =\n-          Descriptor::DataField(factory()->enumerable_string(),\n+          Descriptor::DataField(isolate(), factory()->enumerable_string(),\n                                 JSDataPropertyDescriptor::kEnumerableIndex,\n                                 NONE, Representation::Tagged());\n       map->AppendDescriptor(&d);\n     }\n     {  // configurable\n       Descriptor d =\n-          Descriptor::DataField(factory()->configurable_string(),\n+          Descriptor::DataField(isolate(), factory()->configurable_string(),\n                                 JSDataPropertyDescriptor::kConfigurableIndex,\n                                 NONE, Representation::Tagged());\n       map->AppendDescriptor(&d);\n@@ -5007,25 +5129,25 @@ bool Genesis::InstallNatives(GlobalContextType context_type) {\n \n     // index descriptor.\n     {\n-      Descriptor d = Descriptor::DataField(factory()->index_string(),\n+      Descriptor d = Descriptor::DataField(isolate(), factory()->index_string(),\n                                            JSRegExpResult::kIndexIndex, NONE,\n                                            Representation::Tagged());\n       initial_map->AppendDescriptor(&d);\n     }\n \n     // input descriptor.\n     {\n-      Descriptor d = Descriptor::DataField(factory()->input_string(),\n+      Descriptor d = Descriptor::DataField(isolate(), factory()->input_string(),\n                                            JSRegExpResult::kInputIndex, NONE,\n                                            Representation::Tagged());\n       initial_map->AppendDescriptor(&d);\n     }\n \n     // groups descriptor.\n     {\n-      Descriptor d = Descriptor::DataField(factory()->groups_string(),\n-                                           JSRegExpResult::kGroupsIndex, NONE,\n-                                           Representation::Tagged());\n+      Descriptor d = Descriptor::DataField(\n+          isolate(), factory()->groups_string(), JSRegExpResult::kGroupsIndex,\n+          NONE, Representation::Tagged());\n       initial_map->AppendDescriptor(&d);\n     }\n \n@@ -5124,11 +5246,8 @@ static void InstallBuiltinFunctionId(Isolate* isolate, Handle<JSObject> holder,\n   function->shared()->set_builtin_function_id(id);\n }\n \n-\n #define INSTALL_BUILTIN_ID(holder_expr, fun_name, name) \\\n-  { #holder_expr, #fun_name, k##name }                  \\\n-  ,\n-\n+  {#holder_expr, #fun_name, BuiltinFunctionId::k##name},\n \n void Genesis::InstallBuiltinFunctionIds() {\n   HandleScope scope(isolate());\n@@ -5170,12 +5289,10 @@ bool Bootstrapper::InstallExtensions(Handle<Context> native_context,\n \n bool Genesis::InstallSpecialObjects(Isolate* isolate,\n                                     Handle<Context> native_context) {\n-  Factory* factory = isolate->factory();\n   HandleScope scope(isolate);\n \n   Handle<JSObject> Error = isolate->error_function();\n-  Handle<String> name =\n-      factory->InternalizeOneByteString(STATIC_CHAR_VECTOR(\"stackTraceLimit\"));\n+  Handle<String> name = isolate->factory()->stackTraceLimit_string();\n   Handle<Smi> stack_trace_limit(Smi::FromInt(FLAG_stack_trace_limit), isolate);\n   JSObject::AddProperty(isolate, Error, name, stack_trace_limit, NONE);\n \n@@ -5558,12 +5675,15 @@ Genesis::Genesis(\n   // We can only de-serialize a context if the isolate was initialized from\n   // a snapshot. Otherwise we have to build the context from scratch.\n   // Also create a context from scratch to expose natives, if required by flag.\n-  if (!isolate->initialized_from_snapshot() ||\n-      !Snapshot::NewContextFromSnapshot(isolate, global_proxy,\n-                                        context_snapshot_index,\n-                                        embedder_fields_deserializer)\n-           .ToHandle(&native_context_)) {\n-    native_context_ = Handle<Context>();\n+  DCHECK(native_context_.is_null());\n+  if (isolate->initialized_from_snapshot()) {\n+    Handle<Context> context;\n+    if (Snapshot::NewContextFromSnapshot(isolate, global_proxy,\n+                                         context_snapshot_index,\n+                                         embedder_fields_deserializer)\n+            .ToHandle(&context)) {\n+      native_context_ = Handle<NativeContext>::cast(context);\n+    }\n   }\n \n   if (!native_context().is_null()) {"
        },
        {
            "sha": "c18811a4b6c26fde2e29775227b3beb7d085d670",
            "filename": "deps/v8/src/builtins/arm/builtins-arm.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -13,7 +13,9 @@\n #include \"src/frame-constants.h\"\n #include \"src/frames.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/js-generator.h\"\n #include \"src/runtime/runtime.h\"\n+#include \"src/wasm/wasm-objects.h\"\n \n namespace v8 {\n namespace internal {\n@@ -2217,7 +2219,7 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   // Convert to Smi for the runtime call.\n   __ SmiTag(r4, r4);\n   {\n-    TrapOnAbortScope trap_on_abort_scope(masm);  // Avoid calls to Abort.\n+    HardAbortScope hard_abort(masm);  // Avoid calls to Abort.\n     FrameAndConstantPoolScope scope(masm, StackFrame::WASM_COMPILE_LAZY);\n \n     // Save all parameter registers (see wasm-linkage.cc). They might be\n@@ -2414,7 +2416,7 @@ void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n void Builtins::Generate_DoubleToI(MacroAssembler* masm) {\n   Label negate, done;\n \n-  TrapOnAbortScope trap_on_abort_scope(masm);  // Avoid calls to Abort.\n+  HardAbortScope hard_abort(masm);  // Avoid calls to Abort.\n   UseScratchRegisterScope temps(masm);\n   Register result_reg = r7;\n   Register double_low = GetRegisterThatIsNotOneOf(result_reg);"
        },
        {
            "sha": "61fee9013ba81e2b48a5b758d06f4e9e6789eec4",
            "filename": "deps/v8/src/builtins/arm64/builtins-arm64.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -13,7 +13,9 @@\n #include \"src/frame-constants.h\"\n #include \"src/frames.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/js-generator.h\"\n #include \"src/runtime/runtime.h\"\n+#include \"src/wasm/wasm-objects.h\"\n \n namespace v8 {\n namespace internal {\n@@ -74,7 +76,7 @@ static void GenerateTailCallToReturnedCode(MacroAssembler* masm,\n     __ PushArgument(x1);\n \n     __ CallRuntime(function_id, 1);\n-    __ Move(x2, x0);\n+    __ Mov(x2, x0);\n \n     // Restore target function and new target.\n     __ Pop(padreg, x3, x1, x0);\n@@ -494,8 +496,8 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n     // We abuse new.target both to indicate that this is a resume call and to\n     // pass in the generator object.  In ordinary calls, new.target is always\n     // undefined because generator functions are non-constructable.\n-    __ Move(x3, x1);\n-    __ Move(x1, x4);\n+    __ Mov(x3, x1);\n+    __ Mov(x1, x4);\n     static_assert(kJavaScriptCallCodeStartRegister == x2, \"ABI mismatch\");\n     __ Ldr(x2, FieldMemOperand(x1, JSFunction::kCodeOffset));\n     __ Add(x2, x2, Code::kHeaderSize - kHeapObjectTag);\n@@ -2675,7 +2677,7 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   __ sxtw(x8, w8);\n   __ SmiTag(x8, x8);\n   {\n-    TrapOnAbortScope trap_on_abort_scope(masm);  // Avoid calls to Abort.\n+    HardAbortScope hard_abort(masm);  // Avoid calls to Abort.\n     FrameScope scope(masm, StackFrame::WASM_COMPILE_LAZY);\n \n     // Save all parameter registers (see wasm-linkage.cc). They might be\n@@ -2696,7 +2698,7 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n                                WasmInstanceObject::kCEntryStubOffset));\n     // Initialize the JavaScript context with 0. CEntry will use it to\n     // set the current context on the isolate.\n-    __ Move(cp, Smi::kZero);\n+    __ Mov(cp, Smi::kZero);\n     __ CallRuntimeWithCEntry(Runtime::kWasmCompileLazy, x2);\n     // The entrypoint address is the return value.\n     __ mov(x8, kReturnRegister0);\n@@ -2717,7 +2719,7 @@ void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n   // fall-back Abort mechanism.\n   //\n   // Note that this stub must be generated before any use of Abort.\n-  MacroAssembler::NoUseRealAbortsScope no_use_real_aborts(masm);\n+  HardAbortScope hard_aborts(masm);\n \n   ASM_LOCATION(\"CEntry::Generate entry\");\n   ProfileEntryHookStub::MaybeCallEntryHook(masm);\n@@ -2937,7 +2939,7 @@ void Builtins::Generate_DoubleToI(MacroAssembler* masm) {\n \n   DCHECK(result.Is64Bits());\n \n-  TrapOnAbortScope trap_on_abort_scope(masm);  // Avoid calls to Abort.\n+  HardAbortScope hard_abort(masm);  // Avoid calls to Abort.\n   UseScratchRegisterScope temps(masm);\n   Register scratch1 = temps.AcquireX();\n   Register scratch2 = temps.AcquireX();"
        },
        {
            "sha": "8406123b2028348aa59846c18fb6f59a93c15be4",
            "filename": "deps/v8/src/builtins/array-copywithin.tq",
            "status": "added",
            "additions": 93,
            "deletions": 0,
            "changes": 93,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-copywithin.tq",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-copywithin.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-copywithin.tq?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -0,0 +1,93 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+module array {\n+  macro ConvertToRelativeIndex(index: Number, length: Number): Number {\n+    return index < 0 ? max(index + length, 0) : min(index, length);\n+  }\n+\n+  // https://tc39.github.io/ecma262/#sec-array.prototype.copyWithin\n+  javascript builtin ArrayPrototypeCopyWithin(\n+      context: Context, receiver: Object, ...arguments): Object {\n+    // 1. Let O be ? ToObject(this value).\n+    const object: JSReceiver = ToObject_Inline(context, receiver);\n+\n+    // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+    const length: Number = GetLengthProperty(context, object);\n+\n+    // 3. Let relativeTarget be ? ToInteger(target).\n+    const relative_target: Number = ToInteger_Inline(context, arguments[0]);\n+\n+    // 4. If relativeTarget < 0, let to be max((len + relativeTarget), 0);\n+    //    else let to be min(relativeTarget, len).\n+    let to: Number = ConvertToRelativeIndex(relative_target, length);\n+\n+    // 5. Let relativeStart be ? ToInteger(start).\n+    const relative_start: Number = ToInteger_Inline(context, arguments[1]);\n+\n+    // 6. If relativeStart < 0, let from be max((len + relativeStart), 0);\n+    //    else let from be min(relativeStart, len).\n+    let from: Number = ConvertToRelativeIndex(relative_start, length);\n+\n+    // 7. If end is undefined, let relativeEnd be len;\n+    //    else let relativeEnd be ? ToInteger(end).\n+    let relative_end: Number = length;\n+    if (arguments[2] != Undefined) {\n+      relative_end = ToInteger_Inline(context, arguments[2]);\n+    }\n+\n+    // 8. If relativeEnd < 0, let final be max((len + relativeEnd), 0);\n+    //    else let final be min(relativeEnd, len).\n+    const final: Number = ConvertToRelativeIndex(relative_end, length);\n+\n+    // 9. Let count be min(final-from, len-to).\n+    let count: Number = min(final - from, length - to);\n+\n+    // 10. If from<to and to<from+count, then.\n+    let direction: Number = 1;\n+\n+    if (from < to && to < (from + count)) {\n+      // a. Let direction be -1.\n+      direction = -1;\n+\n+      // b. Let from be from + count - 1.\n+      from = from + count - 1;\n+\n+      // c. Let to be to + count - 1.\n+      to = to + count - 1;\n+    }\n+\n+    // 12. Repeat, while count > 0.\n+    while (count > 0) {\n+      // a. Let fromKey be ! ToString(from).\n+      // b. Let toKey be ! ToString(to).\n+      // c. Let fromPresent be ? HasProperty(O, fromKey).\n+      const from_present: Boolean = HasProperty(context, object, from);\n+\n+      // d. If fromPresent is true, then.\n+      if (from_present == True) {\n+        // i. Let fromVal be ? Get(O, fromKey).\n+        const from_val: Object = GetProperty(context, object, from);\n+\n+        // ii. Perform ? Set(O, toKey, fromVal, true).\n+        SetProperty(context, object, to, from_val);\n+      } else {\n+        // i. Perform ? DeletePropertyOrThrow(O, toKey).\n+        DeleteProperty(context, object, to, kStrict);\n+      }\n+\n+      // f. Let from be from + direction.\n+      from = from + direction;\n+\n+      // g. Let to be to + direction.\n+      to = to + direction;\n+\n+      // h. Let count be count - 1.\n+      --count;\n+    }\n+\n+    // 13. Return O.\n+    return object;\n+  }\n+}"
        },
        {
            "sha": "c0e19c08037da4927cc026316d27b29184e07581",
            "filename": "deps/v8/src/builtins/array-foreach.tq",
            "status": "modified",
            "additions": 31,
            "deletions": 22,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-foreach.tq",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-foreach.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-foreach.tq?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -4,21 +4,21 @@\n \n module array {\n   macro ArrayForEachTorqueContinuation(\n-      context: Context, o: Object, len: Number, callbackfn: Callable,\n+      context: Context, o: JSReceiver, len: Number, callbackfn: Callable,\n       thisArg: Object, initial_k: Smi): Object {\n     // 5. Let k be 0.\n     // 6. Repeat, while k < len\n     for (let k: Smi = initial_k; k < len; k = k + 1) {\n       // 6a. Let Pk be ! ToString(k).\n-      let pK: String = ToString_Inline(context, k);\n+      const pK: String = ToString_Inline(context, k);\n \n       // 6b. Let kPresent be ? HasProperty(O, Pk).\n-      let kPresent: Oddball = HasPropertyObject(o, pK, context, kHasProperty);\n+      const kPresent: Boolean = HasProperty(context, o, pK);\n \n       // 6c. If kPresent is true, then\n       if (kPresent == True) {\n         // 6c. i. Let kValue be ? Get(O, Pk).\n-        let kValue: Object = GetProperty(context, o, pK);\n+        const kValue: Object = GetProperty(context, o, pK);\n \n         // 6c. ii. Perform ? Call(callbackfn, T, <kValue, k, O>).\n         Call(context, callbackfn, thisArg, kValue, k, o);\n@@ -32,30 +32,39 @@ module array {\n   javascript builtin ArrayForEachLoopEagerDeoptContinuation(\n       context: Context, receiver: Object, callback: Object, thisArg: Object,\n       initialK: Object, length: Object): Object {\n+    // The unsafe cast is safe because all continuation points in forEach are\n+    // after the ToObject(O) call that ensures we are dealing with a\n+    // JSReceiver.\n+    const jsreceiver: JSReceiver = unsafe_cast<JSReceiver>(receiver);\n     return ArrayForEachLoopContinuation(\n-        context, receiver, callback, thisArg, Undefined, receiver, initialK,\n+        context, jsreceiver, callback, thisArg, Undefined, jsreceiver, initialK,\n         length, Undefined);\n   }\n \n   javascript builtin ArrayForEachLoopLazyDeoptContinuation(\n       context: Context, receiver: Object, callback: Object, thisArg: Object,\n       initialK: Object, length: Object, result: Object): Object {\n+    // The unsafe cast is safe because all continuation points in forEach are\n+    // after the ToObject(O) call that ensures we are dealing with a\n+    // JSReceiver.\n+    const jsreceiver: JSReceiver = unsafe_cast<JSReceiver>(receiver);\n     return ArrayForEachLoopContinuation(\n-        context, receiver, callback, thisArg, Undefined, receiver, initialK,\n+        context, jsreceiver, callback, thisArg, Undefined, jsreceiver, initialK,\n         length, Undefined);\n   }\n \n   builtin ArrayForEachLoopContinuation(\n-      context: Context, receiver: Object, callback: Object, thisArg: Object,\n+      context: Context, receiver: JSReceiver, callback: Object, thisArg: Object,\n       array: Object, object: Object, initialK: Object, length: Object,\n       to: Object): Object {\n     try {\n-      let callbackfn: Callable = cast<Callable>(callback) otherwise Unexpected;\n-      let k: Smi = cast<Smi>(initialK) otherwise Unexpected;\n-      let number_length: Number = cast<Number>(length) otherwise Unexpected;\n+      const callbackfn: Callable =\n+          cast<Callable>(callback) otherwise Unexpected;\n+      const k: Smi = cast<Smi>(initialK) otherwise Unexpected;\n+      const number_length: Number = cast<Number>(length) otherwise Unexpected;\n \n       return ArrayForEachTorqueContinuation(\n-          context, object, number_length, callbackfn, thisArg, k);\n+          context, receiver, number_length, callbackfn, thisArg, k);\n     }\n     label Unexpected {\n       unreachable;\n@@ -67,7 +76,7 @@ module array {\n       thisArg: Object): void labels\n   Bailout(Smi) {\n     let k: Smi = 0;\n-    let map: Map = a.map;\n+    const map: Map = a.map;\n \n     try {\n       // Build a fast loop over the smi array.\n@@ -78,7 +87,7 @@ module array {\n         if (k >= a.length) goto Slow;\n \n         try {\n-          let value: Object =\n+          const value: Object =\n               LoadElementNoHole<FixedArrayType>(a, k) otherwise FoundHole;\n           Call(context, callbackfn, thisArg, value, k, a);\n         }\n@@ -97,17 +106,17 @@ module array {\n   }\n \n   macro FastArrayForEach(\n-      context: Context, o: Object, len: Number, callbackfn: Callable,\n+      context: Context, o: JSReceiver, len: Number, callbackfn: Callable,\n       thisArg: Object): Object labels\n   Bailout(Smi) {\n     let k: Smi = 0;\n     try {\n-      let smi_len: Smi = cast<Smi>(len) otherwise Slow;\n-      let a: JSArray = cast<JSArray>(o) otherwise Slow;\n-      let map: Map = a.map;\n+      const smi_len: Smi = cast<Smi>(len) otherwise Slow;\n+      const a: JSArray = cast<JSArray>(o) otherwise Slow;\n+      const map: Map = a.map;\n \n       if (!IsPrototypeInitialArrayPrototype(context, map)) goto Slow;\n-      let elementsKind: ElementsKind = map.elements_kind;\n+      const elementsKind: ElementsKind = map.elements_kind;\n       if (!IsFastElementsKind(elementsKind)) goto Slow;\n \n       if (IsElementsKindGreaterThan(elementsKind, HOLEY_ELEMENTS)) {\n@@ -134,20 +143,20 @@ module array {\n       }\n \n       // 1. Let O be ? ToObject(this value).\n-      let o: Object = ToObject(context, receiver);\n+      const o: JSReceiver = ToObject_Inline(context, receiver);\n \n       // 2. Let len be ? ToLength(? Get(O, \"length\")).\n-      let len: Number = GetLengthProperty(context, o);\n+      const len: Number = GetLengthProperty(context, o);\n \n       // 3. If IsCallable(callbackfn) is false, throw a TypeError exception.\n       if (arguments.length == 0) {\n         goto TypeError;\n       }\n-      let callbackfn: Callable =\n+      const callbackfn: Callable =\n           cast<Callable>(arguments[0]) otherwise TypeError;\n \n       // 4. If thisArg is present, let T be thisArg; else let T be undefined.\n-      let thisArg: Object = arguments.length > 1 ? arguments[1] : Undefined;\n+      const thisArg: Object = arguments.length > 1 ? arguments[1] : Undefined;\n \n       // Special cases.\n       let k: Smi = 0;"
        },
        {
            "sha": "8db542ddefb7c4f389b2471133090c5cd2e47bd6",
            "filename": "deps/v8/src/builtins/array-reverse.tq",
            "status": "added",
            "additions": 190,
            "deletions": 0,
            "changes": 190,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-reverse.tq",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-reverse.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-reverse.tq?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -0,0 +1,190 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+module array {\n+  macro LoadElement<ElementsAccessor : type, T : type>(\n+      elements: FixedArrayBase, index: Smi): T;\n+\n+  LoadElement<FastPackedSmiElements, Smi>(\n+      elements: FixedArrayBase, index: Smi): Smi {\n+    const elems: FixedArray = unsafe_cast<FixedArray>(elements);\n+    return unsafe_cast<Smi>(elems[index]);\n+  }\n+\n+  LoadElement<FastPackedObjectElements, Object>(\n+      elements: FixedArrayBase, index: Smi): Object {\n+    const elems: FixedArray = unsafe_cast<FixedArray>(elements);\n+    return elems[index];\n+  }\n+\n+  LoadElement<FastPackedDoubleElements, float64>(\n+      elements: FixedArrayBase, index: Smi): float64 {\n+    try {\n+      const elems: FixedDoubleArray = unsafe_cast<FixedDoubleArray>(elements);\n+      return LoadDoubleWithHoleCheck(elems, index) otherwise Hole;\n+    }\n+    label Hole {\n+      // This macro is only used for PACKED_DOUBLE, loading the hole should\n+      // be impossible.\n+      unreachable;\n+    }\n+  }\n+\n+  macro StoreElement<ElementsAccessor : type, T : type>(\n+      elements: FixedArrayBase, index: Smi, value: T);\n+\n+  StoreElement<FastPackedSmiElements, Smi>(\n+      elements: FixedArrayBase, index: Smi, value: Smi) {\n+    const elems: FixedArray = unsafe_cast<FixedArray>(elements);\n+    StoreFixedArrayElementSmi(elems, index, value, SKIP_WRITE_BARRIER);\n+  }\n+\n+  StoreElement<FastPackedObjectElements, Object>(\n+      elements: FixedArrayBase, index: Smi, value: Object) {\n+    const elems: FixedArray = unsafe_cast<FixedArray>(elements);\n+    elems[index] = value;\n+  }\n+\n+  StoreElement<FastPackedDoubleElements, float64>(\n+      elements: FixedArrayBase, index: Smi, value: float64) {\n+    const elems: FixedDoubleArray = unsafe_cast<FixedDoubleArray>(elements);\n+\n+    assert(value == Float64SilenceNaN(value));\n+    StoreFixedDoubleArrayElementWithSmiIndex(elems, index, value);\n+  }\n+\n+  // Fast-path for all PACKED_* elements kinds. These do not need to check\n+  // whether a property is present, so we can simply swap them using fast\n+  // FixedArray loads/stores.\n+  macro FastPackedArrayReverse<Accessor : type, T : type>(\n+      elements: FixedArrayBase, length: Smi) {\n+    let lower: Smi = 0;\n+    let upper: Smi = length - 1;\n+\n+    while (lower < upper) {\n+      const lower_value: T = LoadElement<Accessor, T>(elements, lower);\n+      const upper_value: T = LoadElement<Accessor, T>(elements, upper);\n+      StoreElement<Accessor, T>(elements, lower, upper_value);\n+      StoreElement<Accessor, T>(elements, upper, lower_value);\n+      ++lower;\n+      --upper;\n+    }\n+  }\n+\n+  macro GenericArrayReverse(context: Context, receiver: Object): Object {\n+    // 1. Let O be ? ToObject(this value).\n+    const object: JSReceiver = ToObject_Inline(context, receiver);\n+\n+    // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+    const length: Number = GetLengthProperty(context, object);\n+\n+    // 3. Let middle be floor(len / 2).\n+    // 4. Let lower be 0.\n+    // 5. Repeat, while lower != middle.\n+    //   a. Let upper be len - lower - 1.\n+\n+    // Instead of calculating the middle value, we simply initialize upper\n+    // with len - 1 and decrement it after each iteration.\n+    let lower: Number = 0;\n+    let upper: Number = length - 1;\n+\n+    while (lower < upper) {\n+      let lower_value: Object = Undefined;\n+      let upper_value: Object = Undefined;\n+\n+      // b. Let upperP be ! ToString(upper).\n+      // c. Let lowerP be ! ToString(lower).\n+      // d. Let lowerExists be ? HasProperty(O, lowerP).\n+      const lower_exists: Boolean = HasProperty(context, object, lower);\n+\n+      // e. If lowerExists is true, then.\n+      if (lower_exists == True) {\n+        // i. Let lowerValue be ? Get(O, lowerP).\n+        lower_value = GetProperty(context, object, lower);\n+      }\n+\n+      // f. Let upperExists be ? HasProperty(O, upperP).\n+      const upper_exists: Boolean = HasProperty(context, object, upper);\n+\n+      // g. If upperExists is true, then.\n+      if (upper_exists == True) {\n+        // i. Let upperValue be ? Get(O, upperP).\n+        upper_value = GetProperty(context, object, upper);\n+      }\n+\n+      // h. If lowerExists is true and upperExists is true, then\n+      if (lower_exists == True && upper_exists == True) {\n+        // i. Perform ? Set(O, lowerP, upperValue, true).\n+        SetProperty(context, object, lower, upper_value);\n+\n+        // ii. Perform ? Set(O, upperP, lowerValue, true).\n+        SetProperty(context, object, upper, lower_value);\n+      } else if (lower_exists == False && upper_exists == True) {\n+        // i. Perform ? Set(O, lowerP, upperValue, true).\n+        SetProperty(context, object, lower, upper_value);\n+\n+        // ii. Perform ? DeletePropertyOrThrow(O, upperP).\n+        DeleteProperty(context, object, upper, kStrict);\n+      } else if (lower_exists == True && upper_exists == False) {\n+        // i. Perform ? DeletePropertyOrThrow(O, lowerP).\n+        DeleteProperty(context, object, lower, kStrict);\n+\n+        // ii. Perform ? Set(O, upperP, lowerValue, true).\n+        SetProperty(context, object, upper, lower_value);\n+      }\n+\n+      // l. Increase lower by 1.\n+      ++lower;\n+      --upper;\n+    }\n+\n+    // 6. Return O.\n+    return object;\n+  }\n+\n+  macro EnsureWriteableFastElements(array: JSArray) {\n+    const elements: FixedArrayBase = array.elements;\n+    if (elements.map != kCOWMap) return;\n+\n+    // There are no COW *_DOUBLE_ELEMENTS arrays, so we are allowed to always\n+    // extract FixedArrays and don't have to worry about FixedDoubleArrays.\n+    assert(IsFastSmiOrTaggedElementsKind(array.map.elements_kind));\n+\n+    const length: Smi = array.length_fast;\n+    array.elements = ExtractFixedArray(\n+        unsafe_cast<FixedArray>(elements), 0, length, length, kFixedArrays);\n+  }\n+\n+  macro TryFastPackedArrayReverse(receiver: Object) labels Slow {\n+    const array: JSArray = cast<JSArray>(receiver) otherwise Slow;\n+    EnsureWriteableFastElements(array);\n+    assert(array.elements.map != kCOWMap);\n+\n+    const kind: ElementsKind = array.map.elements_kind;\n+    if (kind == PACKED_SMI_ELEMENTS) {\n+      FastPackedArrayReverse<FastPackedSmiElements, Smi>(\n+          array.elements, array.length_fast);\n+    } else if (kind == PACKED_ELEMENTS) {\n+      FastPackedArrayReverse<FastPackedObjectElements, Object>(\n+          array.elements, array.length_fast);\n+    } else if (kind == PACKED_DOUBLE_ELEMENTS) {\n+      FastPackedArrayReverse<FastPackedDoubleElements, float64>(\n+          array.elements, array.length_fast);\n+    } else {\n+      goto Slow;\n+    }\n+  }\n+\n+  // https://tc39.github.io/ecma262/#sec-array.prototype.reverse\n+  javascript builtin ArrayPrototypeReverse(\n+      context: Context, receiver: Object, ...arguments): Object {\n+    try {\n+      TryFastPackedArrayReverse(receiver) otherwise Baseline;\n+      return receiver;\n+    }\n+    label Baseline {\n+      return GenericArrayReverse(context, receiver);\n+    }\n+  }\n+}"
        },
        {
            "sha": "30bbf5ef7467951906bc24ca97d8a3af8d628ac8",
            "filename": "deps/v8/src/builtins/array-sort.tq",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/13245dc50da4cb7443c39ef6c68d419d5e6336d4/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-sort.tq",
            "raw_url": "https://github.com/nodejs/node/raw/13245dc50da4cb7443c39ef6c68d419d5e6336d4/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-sort.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-sort.tq?ref=13245dc50da4cb7443c39ef6c68d419d5e6336d4",
            "patch": "@@ -1,8 +0,0 @@\n-// Copyright 2018 the V8 project authors. All rights reserved.\n-// Use of this source code is governed by a BSD-style license that can be\n-// found in the LICENSE file.\n-\n-module array {\n-  // TODO(szuend): TimSort implementation will go here. Keeping the file around\n-  //               after removing the QuickSort Torque implementation.\n-}"
        },
        {
            "sha": "590947dd44160134cd5300546d60ddc265e9674e",
            "filename": "deps/v8/src/builtins/array.tq",
            "status": "modified",
            "additions": 20,
            "deletions": 13,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -3,6 +3,17 @@\n // found in the LICENSE file.\n \n module array {\n+  // Naming convention from elements.cc. We have a similar intent but implement\n+  // fastpaths using generics instead of using a class hierarchy for elements\n+  // kinds specific implementations.\n+  type GenericElementsAccessor;\n+  type FastPackedSmiElements;\n+  type FastPackedObjectElements;\n+  type FastPackedDoubleElements;\n+  type FastSmiOrObjectElements;\n+  type FastDoubleElements;\n+  type DictionaryElements;\n+\n   macro GetLengthProperty(context: Context, o: Object): Number {\n     if (BranchIfFastJSArray(o, context)) {\n       let a: JSArray = unsafe_cast<JSArray>(o);\n@@ -110,7 +121,7 @@ module array {\n   javascript builtin ArraySpliceTorque(\n       context: Context, receiver: Object, ...arguments): Object {\n     // 1. Let O be ? ToObject(this value).\n-    let o: Object = ToObject(context, receiver);\n+    let o: JSReceiver = ToObject(context, receiver);\n \n     // 2. Let len be ? ToLength(? Get(O, \"length\")).\n     let len: Number = GetLengthProperty(context, o);\n@@ -178,8 +189,7 @@ module array {\n       let from: String = ToString_Inline(context, actualStart + k);\n \n       // b. Let fromPresent be ? HasProperty(O, from).\n-      let fromPresent: Oddball =\n-          HasPropertyObject(o, from, context, kHasProperty);\n+      let fromPresent: Oddball = HasProperty(context, o, from);\n \n       // c. If fromPresent is true, then\n       if (fromPresent == True) {\n@@ -195,7 +205,7 @@ module array {\n     }\n \n     // 12. Perform ? Set(A, \"length\", actualDeleteCount, true).\n-    SetProperty(context, a, 'length', actualDeleteCount, kStrict);\n+    SetProperty(context, a, 'length', actualDeleteCount);\n \n     // 13. Let items be a List whose elements are, in left-to-right order,\n     //     the portion of the actual argument list starting with the third\n@@ -217,16 +227,15 @@ module array {\n         let to: String = ToString_Inline(context, k + itemCount);\n \n         // iii. Let fromPresent be ? HasProperty(O, from).\n-        let fromPresent: Oddball =\n-            HasPropertyObject(o, from, context, kHasProperty);\n+        let fromPresent: Oddball = HasProperty(context, o, from);\n \n         // iv. If fromPresent is true, then\n         if (fromPresent == True) {\n           // 1. Let fromValue be ? Get(O, from).\n           let fromValue: Object = GetProperty(context, o, from);\n \n           // 2. Perform ? Set(O, to, fromValue, true).\n-          SetProperty(context, o, to, fromValue, kStrict);\n+          SetProperty(context, o, to, fromValue);\n \n           // v. Else fromPresent is false,\n         } else {\n@@ -261,16 +270,15 @@ module array {\n         let to: String = ToString_Inline(context, k + itemCount - 1);\n \n         // iii. Let fromPresent be ? HasProperty(O, from).\n-        let fromPresent: Oddball =\n-            HasPropertyObject(o, from, context, kHasProperty);\n+        let fromPresent: Oddball = HasProperty(context, o, from);\n \n         // iv. If fromPresent is true, then\n         if (fromPresent == True) {\n           // 1. Let fromValue be ? Get(O, from).\n           let fromValue: Object = GetProperty(context, o, from);\n \n           // 2. Perform ? Set(O, to, fromValue, true).\n-          SetProperty(context, o, to, fromValue, kStrict);\n+          SetProperty(context, o, to, fromValue);\n \n           // v. Else fromPresent is false,\n         } else {\n@@ -292,7 +300,7 @@ module array {\n     if (arguments.length > 2) {\n       for (let e: Object of arguments [2: ]) {\n         // b. Perform ? Set(O, ! ToString(k), E, true).\n-        SetProperty(context, o, ToString_Inline(context, k), e, kStrict);\n+        SetProperty(context, o, ToString_Inline(context, k), e);\n \n         // c. Increase k by 1.\n         k = k + 1;\n@@ -301,8 +309,7 @@ module array {\n \n     // 19. Perform ? Set(O, \"length\", len - actualDeleteCount + itemCount,\n     // true).\n-    SetProperty(\n-        context, o, 'length', len - actualDeleteCount + itemCount, kStrict);\n+    SetProperty(context, o, 'length', len - actualDeleteCount + itemCount);\n \n     return a;\n   }"
        },
        {
            "sha": "1b9d577f10170f87b6ed3a51246909e8213a63f1",
            "filename": "deps/v8/src/builtins/base.tq",
            "status": "modified",
            "additions": 94,
            "deletions": 64,
            "changes": 158,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -62,25 +62,25 @@ type ExtractFixedArrayFlags generates\n 'TNode<Smi>' constexpr 'ExtractFixedArrayFlags';\n type ParameterMode generates 'TNode<Int32T>' constexpr 'ParameterMode';\n type RootListIndex generates 'TNode<Int32T>' constexpr 'Heap::RootListIndex';\n+type WriteBarrierMode generates 'TNode<Int32T>' constexpr 'WriteBarrierMode';\n \n-type MessageTemplate constexpr 'MessageTemplate';\n-type HasPropertyLookupMode constexpr 'HasPropertyLookupMode';\n+type MessageTemplate constexpr 'MessageTemplate::Template';\n \n type ToIntegerTruncationMode constexpr 'ToIntegerTruncationMode';\n \n const NO_ELEMENTS: constexpr ElementsKind generates 'NO_ELEMENTS';\n \n const PACKED_SMI_ELEMENTS: constexpr ElementsKind generates\n-    'PACKED_SMI_ELEMENTS';\n+'PACKED_SMI_ELEMENTS';\n const HOLEY_SMI_ELEMENTS: constexpr ElementsKind generates 'HOLEY_SMI_ELEMENTS';\n const PACKED_ELEMENTS: constexpr ElementsKind generates 'PACKED_ELEMENTS';\n const HOLEY_ELEMENTS: constexpr ElementsKind generates 'HOLEY_ELEMENTS';\n const PACKED_DOUBLE_ELEMENTS: constexpr ElementsKind generates\n-    'PACKED_DOUBLE_ELEMENTS';\n+'PACKED_DOUBLE_ELEMENTS';\n const HOLEY_DOUBLE_ELEMENTS: constexpr ElementsKind generates\n-    'HOLEY_DOUBLE_ELEMENTS';\n+'HOLEY_DOUBLE_ELEMENTS';\n const DICTIONARY_ELEMENTS: constexpr ElementsKind generates\n-    'DICTIONARY_ELEMENTS';\n+'DICTIONARY_ELEMENTS';\n \n const UINT8_ELEMENTS: constexpr ElementsKind generates 'UINT8_ELEMENTS';\n const INT8_ELEMENTS: constexpr ElementsKind generates 'INT8_ELEMENTS';\n@@ -91,7 +91,7 @@ const INT32_ELEMENTS: constexpr ElementsKind generates 'INT32_ELEMENTS';\n const FLOAT32_ELEMENTS: constexpr ElementsKind generates 'FLOAT32_ELEMENTS';\n const FLOAT64_ELEMENTS: constexpr ElementsKind generates 'FLOAT64_ELEMENTS';\n const UINT8_CLAMPED_ELEMENTS: constexpr ElementsKind generates\n-    'UINT8_CLAMPED_ELEMENTS';\n+'UINT8_CLAMPED_ELEMENTS';\n const BIGUINT64_ELEMENTS: constexpr ElementsKind generates 'BIGUINT64_ELEMENTS';\n const BIGINT64_ELEMENTS: constexpr ElementsKind generates 'BIGINT64_ELEMENTS';\n \n@@ -109,6 +109,8 @@ type FixedBigInt64Array extends FixedTypedArray;\n \n const kAllFixedArrays: constexpr ExtractFixedArrayFlags generates\n 'ExtractFixedArrayFlag::kAllFixedArrays';\n+const kFixedArrays: constexpr ExtractFixedArrayFlags generates\n+'ExtractFixedArrayFlag::kFixedArrays';\n \n const kFixedCOWArrayMapRootIndex: constexpr RootListIndex generates\n 'Heap::kFixedCOWArrayMapRootIndex';\n@@ -122,8 +124,6 @@ const kCalledNonCallable: constexpr MessageTemplate generates\n const kCalledOnNullOrUndefined: constexpr MessageTemplate generates\n 'MessageTemplate::kCalledOnNullOrUndefined';\n \n-const kHasProperty: constexpr HasPropertyLookupMode generates 'kHasProperty';\n-\n const kMaxSafeInteger: constexpr float64 generates 'kMaxSafeInteger';\n \n const kTruncateMinusZero: constexpr ToIntegerTruncationMode generates\n@@ -147,6 +147,8 @@ extern macro NullConstant(): Oddball;\n extern macro UndefinedConstant(): Oddball;\n extern macro TrueConstant(): Boolean;\n extern macro FalseConstant(): Boolean;\n+extern macro Int32TrueConstant(): bool;\n+extern macro Int32FalseConstant(): bool;\n \n const Hole: Oddball = TheHoleConstant();\n const Null: Oddball = NullConstant();\n@@ -163,8 +165,14 @@ const kSloppy: constexpr LanguageMode generates 'LanguageMode::kSloppy';\n const SMI_PARAMETERS: constexpr ParameterMode generates 'SMI_PARAMETERS';\n const INTPTR_PARAMETERS: constexpr ParameterMode generates 'INTPTR_PARAMETERS';\n \n+\n+const SKIP_WRITE_BARRIER: constexpr WriteBarrierMode\n+    generates 'SKIP_WRITE_BARRIER';\n+\n extern macro Is64(): constexpr bool;\n \n+extern macro SelectBooleanConstant(bool): Boolean;\n+\n extern macro Print(constexpr string);\n extern macro Print(constexpr string, Object);\n extern macro Print(Object);\n@@ -176,25 +184,26 @@ extern macro ToLength_Inline(Context, Object): Number;\n extern macro ToNumber_Inline(Context, Object): Number;\n extern macro ToString_Inline(Context, Object): String;\n extern macro GetProperty(Context, Object, Object): Object;\n-extern macro HasProperty(\n-    HeapObject, Object, Context, constexpr HasPropertyLookupMode): Oddball;\n+extern builtin SetProperty(Context, Object, Object, Object);\n+extern builtin DeleteProperty(Context, Object, Object, LanguageMode);\n+extern builtin HasProperty(Context, JSReceiver, Object): Boolean;\n+\n extern macro ThrowRangeError(Context, constexpr MessageTemplate): never;\n extern macro ThrowTypeError(Context, constexpr MessageTemplate): never;\n extern macro ThrowTypeError(Context, constexpr MessageTemplate, Object): never;\n-extern macro ThrowTypeError(Context, constexpr MessageTemplate, Object, Object,\n-    Object): never;\n+extern macro ThrowTypeError(\n+    Context, constexpr MessageTemplate, Object, Object, Object): never;\n extern macro ArraySpeciesCreate(Context, Object, Number): Object;\n extern macro EnsureArrayPushable(Map): ElementsKind labels Bailout;\n \n extern builtin ToObject(Context, Object): JSReceiver;\n+extern macro ToObject_Inline(Context, Object): JSReceiver;\n extern macro IsNullOrUndefined(Object): bool;\n extern macro IsTheHole(Object): bool;\n extern macro IsString(HeapObject): bool;\n extern builtin ToString(Context, Object): String;\n \n extern runtime CreateDataProperty(Context, Object, Object, Object);\n-extern runtime SetProperty(Context, Object, Object, Object, LanguageMode);\n-extern runtime DeleteProperty(Context, Object, Object, LanguageMode);\n \n extern macro LoadRoot(constexpr RootListIndex): Object;\n extern macro StoreRoot(constexpr RootListIndex, Object): Object;\n@@ -257,7 +266,9 @@ extern operator '!=' macro WordNotEqual(Object, Object): bool;\n extern operator '+' macro SmiAdd(Smi, Smi): Smi;\n extern operator '-' macro SmiSub(Smi, Smi): Smi;\n extern operator '&' macro SmiAnd(Smi, Smi): Smi;\n+extern operator '|' macro SmiOr(Smi, Smi): Smi;\n extern operator '>>>' macro SmiShr(Smi, constexpr int31): Smi;\n+extern operator '<<' macro SmiShl(Smi, constexpr int31): Smi;\n \n extern operator '+' macro IntPtrAdd(intptr, intptr): intptr;\n extern operator '-' macro IntPtrSub(intptr, intptr): intptr;\n@@ -287,11 +298,21 @@ extern operator '|' macro Word32Or(uint32, uint32): uint32;\n \n extern operator '+' macro NumberAdd(Number, Number): Number;\n extern operator '-' macro NumberSub(Number, Number): Number;\n-extern operator 'min' macro NumberMin(Number, Number): Number;\n-extern operator 'max' macro NumberMax(Number, Number): Number;\n+extern macro NumberMin(Number, Number): Number;\n+extern macro NumberMax(Number, Number): Number;\n+macro min(x: Number, y: Number): Number {\n+  return NumberMin(x, y);\n+}\n+macro max(x: Number, y: Number): Number {\n+  return NumberMax(x, y);\n+}\n+\n+extern macro SmiMax(Smi, Smi): Smi;\n+extern macro SmiMin(Smi, Smi): Smi;\n \n extern operator '!' macro ConstexprBoolNot(constexpr bool): constexpr bool;\n extern operator '!' macro Word32BinaryNot(bool): bool;\n+extern operator '!' macro IsFalse(Boolean): bool;\n \n extern operator '.map' macro LoadMap(HeapObject): Map;\n extern operator '.map=' macro StoreMap(HeapObject, Map);\n@@ -308,42 +329,50 @@ extern operator 'is<Smi>' macro TaggedIsSmi(Object): bool;\n extern operator 'isnt<Smi>' macro TaggedIsNotSmi(Object): bool;\n extern macro TaggedIsPositiveSmi(Object): bool;\n \n-extern macro TaggedToJSDataView(Object): JSDataView labels CastError;\n+extern macro HeapObjectToJSDataView(HeapObject): JSDataView labels CastError;\n extern macro TaggedToHeapObject(Object): HeapObject labels CastError;\n extern macro TaggedToSmi(Object): Smi labels CastError;\n-extern macro TaggedToJSArray(Object): JSArray labels CastError;\n-extern macro TaggedToCallable(Object): Callable labels CastError;\n-extern macro ConvertFixedArrayBaseToFixedArray(FixedArrayBase):\n+extern macro HeapObjectToJSArray(HeapObject): JSArray labels CastError;\n+extern macro HeapObjectToCallable(HeapObject): Callable labels CastError;\n+extern macro HeapObjectToFixedArray(HeapObject):\n     FixedArray labels CastError;\n-extern macro ConvertFixedArrayBaseToFixedDoubleArray(FixedArrayBase):\n+extern macro HeapObjectToFixedDoubleArray(HeapObject):\n     FixedDoubleArray labels CastError;\n extern macro TaggedToNumber(Object): Number labels CastError;\n \n-macro cast<A : type>(o: Object): A labels CastError;\n-cast<Number>(o: Object): Number labels CastError {\n-  return TaggedToNumber(o) otherwise CastError;\n+macro cast_HeapObject<A : type>(o : HeapObject) : A labels CastError;\n+cast_HeapObject<HeapObject>(o : HeapObject) : HeapObject labels CastError { return o; }\n+cast_HeapObject<FixedArray>(o: HeapObject): FixedArray labels CastError {\n+  return HeapObjectToFixedArray(o) otherwise CastError;\n }\n-cast<HeapObject>(o: Object): HeapObject labels CastError {\n-  return TaggedToHeapObject(o) otherwise CastError;\n+cast_HeapObject<FixedDoubleArray>(o: HeapObject): FixedDoubleArray labels CastError {\n+  return HeapObjectToFixedDoubleArray(o) otherwise CastError;\n }\n-cast<Smi>(o: Object): Smi labels CastError {\n-  return TaggedToSmi(o) otherwise CastError;\n+cast_HeapObject<JSDataView>(o: HeapObject): JSDataView labels CastError {\n+  return HeapObjectToJSDataView(o) otherwise CastError;\n+}\n+cast_HeapObject<Callable>(o: HeapObject): Callable labels CastError {\n+  return HeapObjectToCallable(o) otherwise CastError;\n }\n-cast<JSDataView>(o: Object): JSDataView labels CastError {\n-  return TaggedToJSDataView(o) otherwise CastError;\n+cast_HeapObject<JSArray>(o: HeapObject): JSArray labels CastError {\n+  return HeapObjectToJSArray(o) otherwise CastError;\n }\n-cast<Callable>(o: Object): Callable labels CastError {\n-  return TaggedToCallable(o) otherwise CastError;\n+\n+macro cast<A : type>(o: HeapObject): A labels CastError {\n+  return cast_HeapObject<A>(o) otherwise CastError;\n }\n-cast<JSArray>(o: Object): JSArray labels CastError {\n-  return TaggedToJSArray(o) otherwise CastError;\n+\n+// cast_HeapObject allows this default-implementation to be non-recursive.\n+// Otherwise the generated CSA code might run into infinite recursion.\n+macro cast<A : type>(o: Object): A labels CastError {\n+  return cast_HeapObject<A>(\n+    TaggedToHeapObject(o) otherwise CastError) otherwise CastError;\n }\n-macro cast<A : type>(o: FixedArrayBase): A labels CastError;\n-cast<FixedArray>(o: FixedArrayBase): FixedArray labels CastError {\n-  return ConvertFixedArrayBaseToFixedArray(o) otherwise CastError;\n+cast<Smi>(o: Object): Smi labels CastError {\n+  return TaggedToSmi(o) otherwise CastError;\n }\n-cast<FixedDoubleArray>(o: FixedArrayBase): FixedDoubleArray labels CastError {\n-  return ConvertFixedArrayBaseToFixedDoubleArray(o) otherwise CastError;\n+cast<Number>(o: Object): Number labels CastError {\n+  return TaggedToNumber(o) otherwise CastError;\n }\n \n extern macro AllocateHeapNumberWithValue(float64): HeapNumber;\n@@ -365,7 +394,7 @@ extern macro LoadHeapNumberValue(HeapNumber): float64;\n extern macro ChangeFloat32ToFloat64(float32): float64;\n extern macro ChangeNumberToFloat64(Number): float64;\n extern macro ChangeFloat64ToUintPtr(float64): uintptr;\n-extern macro ChangeInt32ToIntPtr(int32): intptr;  // Sign-extends.\n+extern macro ChangeInt32ToIntPtr(int32): intptr;   // Sign-extends.\n extern macro ChangeUint32ToWord(uint32): uintptr;  // Doesn't sign-extend.\n \n extern macro NumberConstant(constexpr float64): Number;\n@@ -573,8 +602,8 @@ unsafe_cast<FixedArrayBase>(o: Object): FixedArrayBase {\n }\n \n const kCOWMap: Map = unsafe_cast<Map>(LoadRoot(kFixedCOWArrayMapRootIndex));\n-const kEmptyFixedArray: FixedArrayBase = unsafe_cast<FixedArrayBase>(\n-    LoadRoot(kEmptyFixedArrayRootIndex));\n+const kEmptyFixedArray: FixedArrayBase =\n+    unsafe_cast<FixedArrayBase>(LoadRoot(kEmptyFixedArrayRootIndex));\n \n extern macro BranchIfFastJSArray(Object, Context): never labels Taken, NotTaken;\n extern macro BranchIfNotFastJSArray(Object, Context): never labels Taken,\n@@ -607,15 +636,18 @@ extern operator '.length' macro LoadFixedArrayBaseLength(FixedArrayBase): Smi;\n extern operator '[]' macro LoadFixedArrayElement(FixedArray, intptr): Object;\n extern operator '[]' macro LoadFixedArrayElement(FixedArray, Smi): Object;\n extern operator\n-'[]' macro LoadFixedArrayElementInt(FixedArray, constexpr int31): Object;\n+'[]' macro LoadFixedArrayElement(FixedArray, constexpr int31): Object;\n extern operator\n '[]=' macro StoreFixedArrayElement(FixedArray, intptr, Object): void;\n extern operator\n-'[]=' macro StoreFixedArrayElementInt(\n+'[]=' macro StoreFixedArrayElement(\n     FixedArray, constexpr int31, Object): void;\n extern operator\n '[]=' macro StoreFixedArrayElementSmi(FixedArray, Smi, Object): void;\n \n+extern macro StoreFixedArrayElementSmi(FixedArray, Smi, Object,\n+  constexpr WriteBarrierMode): void;\n+\n extern operator '.instance_type' macro LoadMapInstanceType(Map): int32;\n \n extern macro LoadFixedDoubleArrayElement(FixedDoubleArray, Smi): float64;\n@@ -629,7 +661,8 @@ macro StoreFixedDoubleArrayElementWithSmiIndex(\n }\n \n extern macro BasicLoadNumberDictionaryElement(NumberDictionary, intptr):\n-    Object labels NotData, IfHole;\n+    Object labels NotData,\n+    IfHole;\n extern macro BasicStoreNumberDictionaryElement(NumberDictionary, intptr, Object)\n labels NotData, IfHole, ReadOnly;\n \n@@ -639,7 +672,8 @@ extern macro IsFastSmiOrTaggedElementsKind(ElementsKind): bool;\n extern macro IsFastSmiElementsKind(ElementsKind): bool;\n extern macro IsHoleyFastElementsKind(ElementsKind): bool;\n \n-extern macro AllocateFixedArray(constexpr ElementsKind, intptr): FixedArray;\n+extern macro AllocateZeroedFixedArray(intptr): FixedArray;\n+extern macro AllocateZeroedFixedDoubleArray(intptr): FixedDoubleArray;\n \n extern macro CopyFixedArrayElements(\n     constexpr ElementsKind, FixedArray, constexpr ElementsKind, FixedArray,\n@@ -660,8 +694,10 @@ extern macro Call(Context, Callable, Object): Object;\n extern macro Call(Context, Callable, Object, Object): Object;\n extern macro Call(Context, Callable, Object, Object, Object): Object;\n extern macro Call(Context, Callable, Object, Object, Object, Object): Object;\n-extern macro Call(Context, Callable, Object, Object, Object, Object, Object): Object;\n-extern macro Call(Context, Callable, Object, Object, Object, Object, Object, Object): Object;\n+extern macro Call(\n+    Context, Callable, Object, Object, Object, Object, Object): Object;\n+extern macro Call(\n+    Context, Callable, Object, Object, Object, Object, Object, Object): Object;\n \n extern macro ExtractFixedArray(\n     FixedArray, Smi, Smi, Smi, constexpr ExtractFixedArrayFlags): FixedArray;\n@@ -699,32 +735,26 @@ labels IfHole {\n   }\n }\n \n-macro HasPropertyObject(\n-    o: Object, p: Object, c: Context,\n-    f: constexpr HasPropertyLookupMode): Oddball {\n-  try {\n-    return HasProperty((cast<HeapObject>(o) otherwise CastError), p, c, f);\n-  }\n-  label CastError {\n-    return False;\n-  }\n-}\n-\n extern macro IsCallable(HeapObject): bool;\n extern macro IsJSArray(HeapObject): bool;\n extern macro TaggedIsCallable(Object): bool;\n extern macro IsDetachedBuffer(JSArrayBuffer): bool;\n extern macro IsHeapNumber(HeapObject): bool;\n+extern macro IsFixedArray(HeapObject): bool;\n extern macro IsExtensibleMap(Map): bool;\n extern macro IsCustomElementsReceiverInstanceType(int32): bool;\n extern macro Typeof(Object): Object;\n \n // Return true iff number is NaN.\n macro NumberIsNaN(number: Number): bool {\n-  if (TaggedIsSmi(number)) return false;\n-\n-  let value: float64 = convert<float64>(unsafe_cast<HeapNumber>(number));\n-  return value != value;\n+  typeswitch(number) {\n+    case (Smi) {\n+      return false;\n+    } case (hn : HeapNumber) {\n+      let value: float64 = convert<float64>(hn);\n+      return value != value;\n+    }\n+  }\n }\n \n extern macro BranchIfToBooleanIsTrue(Object): never labels Taken, NotTaken;"
        },
        {
            "sha": "95f5f2ebbd38f5d4ccc2640a47e2159f606be740",
            "filename": "deps/v8/src/builtins/builtins-api.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,11 +2,10 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins.h\"\n-\n #include \"src/api-arguments-inl.h\"\n #include \"src/api-natives.h\"\n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n+#include \"src/builtins/builtins.h\"\n #include \"src/counters.h\"\n #include \"src/log.h\"\n #include \"src/objects-inl.h\""
        },
        {
            "sha": "c82cef391940c025c195d073649bf7368ceb3d85",
            "filename": "deps/v8/src/builtins/builtins-arguments-gen.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -305,8 +305,8 @@ Node* ArgumentsBuiltinsAssembler::EmitFastNewSloppyArguments(Node* context,\n                                 JSSloppyArgumentsObject::kSize);\n     StoreObjectFieldNoWriteBarrier(\n         argument_object, JSSloppyArgumentsObject::kCalleeOffset, function);\n-    StoreFixedArrayElement(map_array, 0, context, SKIP_WRITE_BARRIER);\n-    StoreFixedArrayElement(map_array, 1, elements, SKIP_WRITE_BARRIER);\n+    StoreFixedArrayElement(CAST(map_array), 0, context, SKIP_WRITE_BARRIER);\n+    StoreFixedArrayElement(CAST(map_array), 1, elements, SKIP_WRITE_BARRIER);\n \n     Comment(\"Fill in non-mapped parameters\");\n     Node* argument_offset ="
        },
        {
            "sha": "d61a5164228c7aa5de7eccc45daac584681e69a7",
            "filename": "deps/v8/src/builtins/builtins-array-gen.cc",
            "status": "modified",
            "additions": 185,
            "deletions": 261,
            "changes": 446,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -366,8 +366,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     Goto(&done);\n \n     BIND(&slow);\n-    CallRuntime(Runtime::kSetProperty, context(), a(), k, mapped_value,\n-                SmiConstant(LanguageMode::kStrict));\n+    SetPropertyStrict(context(), CAST(a()), CAST(k), CAST(mapped_value));\n     Goto(&done);\n \n     BIND(&detached);\n@@ -381,6 +380,28 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n   void ArrayBuiltinsAssembler::NullPostLoopAction() {}\n \n+  void ArrayBuiltinsAssembler::FillFixedArrayWithSmiZero(\n+      TNode<FixedArray> array, TNode<Smi> smi_length) {\n+    CSA_ASSERT(this, Word32BinaryNot(IsFixedDoubleArray(array)));\n+\n+    TNode<IntPtrT> length = SmiToIntPtr(smi_length);\n+    TNode<WordT> byte_length = TimesPointerSize(length);\n+    CSA_ASSERT(this, UintPtrLessThan(length, byte_length));\n+\n+    static const int32_t fa_base_data_offset =\n+        FixedArray::kHeaderSize - kHeapObjectTag;\n+    TNode<IntPtrT> backing_store = IntPtrAdd(\n+        BitcastTaggedToWord(array), IntPtrConstant(fa_base_data_offset));\n+\n+    // Call out to memset to perform initialization.\n+    TNode<ExternalReference> memset =\n+        ExternalConstant(ExternalReference::libc_memset_function());\n+    STATIC_ASSERT(kSizetSize == kIntptrSize);\n+    CallCFunction3(MachineType::Pointer(), MachineType::Pointer(),\n+                   MachineType::IntPtr(), MachineType::UintPtr(), memset,\n+                   backing_store, IntPtrConstant(0), byte_length);\n+  }\n+\n   void ArrayBuiltinsAssembler::ReturnFromBuiltin(Node* value) {\n     if (argc_ == nullptr) {\n       Return(value);\n@@ -417,7 +438,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n     // 1. Let O be ToObject(this value).\n     // 2. ReturnIfAbrupt(O)\n-    o_ = ToObject(context(), receiver());\n+    o_ = ToObject_Inline(context(), receiver());\n \n     // 3. Let len be ToLength(Get(O, \"length\")).\n     // 4. ReturnIfAbrupt(len).\n@@ -500,8 +521,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n     // ValidateTypedArray: tc39.github.io/ecma262/#sec-validatetypedarray\n \n-    Label throw_not_typed_array(this, Label::kDeferred),\n-        throw_detached(this, Label::kDeferred);\n+    Label throw_not_typed_array(this, Label::kDeferred);\n \n     GotoIf(TaggedIsSmi(receiver_), &throw_not_typed_array);\n     GotoIfNot(HasInstanceType(CAST(receiver_), JS_TYPED_ARRAY_TYPE),\n@@ -510,9 +530,8 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     TNode<JSTypedArray> typed_array = CAST(receiver_);\n     o_ = typed_array;\n \n-    Node* array_buffer =\n-        LoadObjectField(typed_array, JSTypedArray::kBufferOffset);\n-    GotoIf(IsDetachedBuffer(array_buffer), &throw_detached);\n+    TNode<JSArrayBuffer> array_buffer = LoadArrayBufferViewBuffer(typed_array);\n+    ThrowIfArrayBufferIsDetached(context_, array_buffer, name_);\n \n     len_ = LoadTypedArrayLength(typed_array);\n \n@@ -525,9 +544,6 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     BIND(&throw_not_typed_array);\n     ThrowTypeError(context_, MessageTemplate::kNotTypedArray);\n \n-    BIND(&throw_detached);\n-    ThrowTypeError(context_, MessageTemplate::kDetachedOperation, name_);\n-\n     BIND(&throw_not_callable);\n     ThrowTypeError(context_, MessageTemplate::kCalledNonCallable, callbackfn_);\n \n@@ -536,7 +552,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     Unreachable();\n \n     std::vector<int32_t> instance_types = {\n-#define INSTANCE_TYPE(Type, type, TYPE, ctype, size) FIXED_##TYPE##_ARRAY_TYPE,\n+#define INSTANCE_TYPE(Type, type, TYPE, ctype) FIXED_##TYPE##_ARRAY_TYPE,\n         TYPED_ARRAYS(INSTANCE_TYPE)\n #undef INSTANCE_TYPE\n     };\n@@ -608,7 +624,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n         // b. Let kPresent be HasProperty(O, Pk).\n         // c. ReturnIfAbrupt(kPresent).\n         TNode<Oddball> k_present =\n-            HasProperty(o(), k(), context(), kHasProperty);\n+            HasProperty(context(), o(), k(), kHasProperty);\n \n         // d. If kPresent is true, then\n         GotoIf(IsFalse(k_present), &done_element);\n@@ -643,8 +659,8 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n   ElementsKind ArrayBuiltinsAssembler::ElementsKindForInstanceType(\n       InstanceType type) {\n     switch (type) {\n-#define INSTANCE_TYPE_TO_ELEMENTS_KIND(Type, type, TYPE, ctype, size) \\\n-  case FIXED_##TYPE##_ARRAY_TYPE:                                     \\\n+#define INSTANCE_TYPE_TO_ELEMENTS_KIND(Type, type, TYPE, ctype) \\\n+  case FIXED_##TYPE##_ARRAY_TYPE:                               \\\n     return TYPE##_ELEMENTS;\n \n       TYPED_ARRAYS(INSTANCE_TYPE_TO_ELEMENTS_KIND)\n@@ -995,8 +1011,8 @@ TF_BUILTIN(ArrayPrototypePop, CodeStubAssembler) {\n \n     BIND(&fast_elements);\n     {\n-      Node* value = LoadFixedArrayElement(elements, new_length);\n-      StoreFixedArrayElement(elements, new_length, TheHoleConstant());\n+      Node* value = LoadFixedArrayElement(CAST(elements), new_length);\n+      StoreFixedArrayElement(CAST(elements), new_length, TheHoleConstant());\n       GotoIf(WordEqual(value, TheHoleConstant()), &return_undefined);\n       args.PopAndReturn(value);\n     }\n@@ -1065,8 +1081,7 @@ TF_BUILTIN(ArrayPrototypePush, CodeStubAssembler) {\n     Node* length = LoadJSArrayLength(array_receiver);\n     // TODO(danno): Use the KeyedStoreGeneric stub here when possible,\n     // calling into the runtime to do the elements transition is overkill.\n-    CallRuntime(Runtime::kSetProperty, context, array_receiver, length, arg,\n-                SmiConstant(LanguageMode::kStrict));\n+    SetPropertyStrict(context, array_receiver, CAST(length), CAST(arg));\n     Increment(&arg_index);\n     // The runtime SetProperty call could have converted the array to dictionary\n     // mode, which must be detected to abort the fast-path.\n@@ -1112,8 +1127,7 @@ TF_BUILTIN(ArrayPrototypePush, CodeStubAssembler) {\n     Node* length = LoadJSArrayLength(array_receiver);\n     // TODO(danno): Use the KeyedStoreGeneric stub here when possible,\n     // calling into the runtime to do the elements transition is overkill.\n-    CallRuntime(Runtime::kSetProperty, context, array_receiver, length, arg,\n-                SmiConstant(LanguageMode::kStrict));\n+    SetPropertyStrict(context, array_receiver, CAST(length), CAST(arg));\n     Increment(&arg_index);\n     // The runtime SetProperty call could have converted the array to dictionary\n     // mode, which must be detected to abort the fast-path.\n@@ -1132,8 +1146,7 @@ TF_BUILTIN(ArrayPrototypePush, CodeStubAssembler) {\n     args.ForEach(\n         [this, array_receiver, context](Node* arg) {\n           Node* length = LoadJSArrayLength(array_receiver);\n-          CallRuntime(Runtime::kSetProperty, context, array_receiver, length,\n-                      arg, SmiConstant(LanguageMode::kStrict));\n+          SetPropertyStrict(context, array_receiver, CAST(length), CAST(arg));\n         },\n         arg_index.value());\n     args.PopAndReturn(LoadJSArrayLength(array_receiver));\n@@ -1198,7 +1211,7 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n         native_context, Context::FAST_ALIASED_ARGUMENTS_MAP_INDEX);\n     GotoIf(WordNotEqual(map, fast_aliasted_arguments_map), &try_simple_slice);\n \n-    Node* sloppy_elements = LoadElements(array);\n+    TNode<SloppyArgumentsElements> sloppy_elements = CAST(LoadElements(array));\n     TNode<Smi> sloppy_elements_length =\n         LoadFixedArrayBaseLength(sloppy_elements);\n     TNode<Smi> parameter_map_length =\n@@ -1217,8 +1230,8 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n \n     TNode<Smi> end = SmiAdd(CAST(from), CAST(count));\n \n-    Node* unmapped_elements = LoadFixedArrayElement(\n-        sloppy_elements, SloppyArgumentsElements::kArgumentsIndex);\n+    TNode<FixedArray> unmapped_elements = CAST(LoadFixedArrayElement(\n+        sloppy_elements, SloppyArgumentsElements::kArgumentsIndex));\n     TNode<Smi> unmapped_elements_length =\n         LoadFixedArrayBaseLength(unmapped_elements);\n \n@@ -1229,7 +1242,7 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n                                 nullptr, SMI_PARAMETERS));\n \n     index_out.Bind(IntPtrConstant(0));\n-    Node* result_elements = LoadElements(result.value());\n+    TNode<FixedArray> result_elements = CAST(LoadElements(result.value()));\n     TNode<Smi> from_mapped = SmiMin(parameter_map_length, CAST(from));\n     TNode<Smi> to = SmiMin(parameter_map_length, end);\n     Node* arguments_context = LoadFixedArrayElement(\n@@ -1293,7 +1306,7 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n                       Variable& n) {\n     // b. Let kPresent be HasProperty(O, Pk).\n     // c. ReturnIfAbrupt(kPresent).\n-    TNode<Oddball> k_present = HasProperty(o, p_k, context, kHasProperty);\n+    TNode<Oddball> k_present = HasProperty(context, o, p_k, kHasProperty);\n \n     // d. If kPresent is true, then\n     Label done_element(this);\n@@ -1375,7 +1388,7 @@ TF_BUILTIN(ArrayPrototypeSlice, ArrayPrototypeSliceCodeStubAssembler) {\n   BIND(&generic_length);\n   // 1. Let O be ToObject(this value).\n   // 2. ReturnIfAbrupt(O).\n-  o = ToObject(context, receiver);\n+  o = ToObject_Inline(context, receiver);\n \n   // 3. Let len be ToLength(Get(O, \"length\")).\n   // 4. ReturnIfAbrupt(len).\n@@ -1480,10 +1493,8 @@ TF_BUILTIN(ArrayPrototypeSlice, ArrayPrototypeSliceCodeStubAssembler) {\n \n   // 16. Let setStatus be Set(A, \"length\", n, true).\n   // 17. ReturnIfAbrupt(setStatus).\n-  CallRuntime(Runtime::kSetProperty, context, a,\n-              HeapConstant(isolate()->factory()->length_string()), n.value(),\n-              SmiConstant(static_cast<int>(LanguageMode::kStrict)));\n-\n+  SetPropertyStrict(context, CAST(a), CodeStubAssembler::LengthStringConstant(),\n+                    CAST(n.value()));\n   args.PopAndReturn(a);\n }\n \n@@ -1601,35 +1612,39 @@ TF_BUILTIN(ArrayPrototypeShift, CodeStubAssembler) {\n \n     BIND(&fast_elements_tagged);\n     {\n-      Node* value = LoadFixedArrayElement(elements, 0);\n-      BuildFastLoop(IntPtrConstant(0), new_length,\n-                    [&](Node* index) {\n-                      StoreFixedArrayElement(\n-                          elements, index,\n-                          LoadFixedArrayElement(\n-                              elements, IntPtrAdd(index, IntPtrConstant(1))));\n-                    },\n-                    1, ParameterMode::INTPTR_PARAMETERS,\n-                    IndexAdvanceMode::kPost);\n-      StoreFixedArrayElement(elements, new_length, TheHoleConstant());\n+      TNode<FixedArray> elements_fixed_array = CAST(elements);\n+      Node* value = LoadFixedArrayElement(elements_fixed_array, 0);\n+      BuildFastLoop(\n+          IntPtrConstant(0), new_length,\n+          [&](Node* index) {\n+            StoreFixedArrayElement(\n+                elements_fixed_array, index,\n+                LoadFixedArrayElement(elements_fixed_array,\n+                                      IntPtrAdd(index, IntPtrConstant(1))));\n+          },\n+          1, ParameterMode::INTPTR_PARAMETERS, IndexAdvanceMode::kPost);\n+      StoreFixedArrayElement(elements_fixed_array, new_length,\n+                             TheHoleConstant());\n       GotoIf(WordEqual(value, TheHoleConstant()), &return_undefined);\n       args.PopAndReturn(value);\n     }\n \n     BIND(&fast_elements_smi);\n     {\n-      Node* value = LoadFixedArrayElement(elements, 0);\n-      BuildFastLoop(IntPtrConstant(0), new_length,\n-                    [&](Node* index) {\n-                      StoreFixedArrayElement(\n-                          elements, index,\n-                          LoadFixedArrayElement(\n-                              elements, IntPtrAdd(index, IntPtrConstant(1))),\n-                          SKIP_WRITE_BARRIER);\n-                    },\n-                    1, ParameterMode::INTPTR_PARAMETERS,\n-                    IndexAdvanceMode::kPost);\n-      StoreFixedArrayElement(elements, new_length, TheHoleConstant());\n+      TNode<FixedArray> elements_fixed_array = CAST(elements);\n+      Node* value = LoadFixedArrayElement(elements_fixed_array, 0);\n+      BuildFastLoop(\n+          IntPtrConstant(0), new_length,\n+          [&](Node* index) {\n+            StoreFixedArrayElement(\n+                elements_fixed_array, index,\n+                LoadFixedArrayElement(elements_fixed_array,\n+                                      IntPtrAdd(index, IntPtrConstant(1))),\n+                SKIP_WRITE_BARRIER);\n+          },\n+          1, ParameterMode::INTPTR_PARAMETERS, IndexAdvanceMode::kPost);\n+      StoreFixedArrayElement(elements_fixed_array, new_length,\n+                             TheHoleConstant());\n       GotoIf(WordEqual(value, TheHoleConstant()), &return_undefined);\n       args.PopAndReturn(value);\n     }\n@@ -1995,9 +2010,8 @@ class ArrayPopulatorAssembler : public CodeStubAssembler {\n \n     BIND(&runtime);\n     {\n-      CallRuntime(Runtime::kSetProperty, context, static_cast<Node*>(array),\n-                  CodeStubAssembler::LengthStringConstant(), length,\n-                  SmiConstant(LanguageMode::kStrict));\n+      SetPropertyStrict(context, array,\n+                        CodeStubAssembler::LengthStringConstant(), length);\n       Goto(&done);\n     }\n \n@@ -2034,7 +2048,7 @@ TF_BUILTIN(ArrayFrom, ArrayPopulatorAssembler) {\n   TNode<Object> items = args.GetOptionalArgumentValue(0);\n   // The spec doesn't require ToObject to be called directly on the iterable\n   // branch, but it's part of GetMethod that is in the spec.\n-  TNode<JSReceiver> array_like = ToObject(context, items);\n+  TNode<JSReceiver> array_like = ToObject_Inline(context, items);\n \n   TVARIABLE(Object, array);\n   TVARIABLE(Number, length);\n@@ -3097,7 +3111,7 @@ void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n   {\n     GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n               &return_not_found);\n-    Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+    Node* element_k = LoadFixedArrayElement(CAST(elements), index_var.value());\n     GotoIf(WordEqual(element_k, search_element), &return_found);\n \n     Increment(&index_var);\n@@ -3109,7 +3123,7 @@ void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n \n     GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n               &return_not_found);\n-    Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+    Node* element_k = LoadFixedArrayElement(CAST(elements), index_var.value());\n     GotoIf(IsUndefined(element_k), &return_found);\n     GotoIf(IsTheHole(element_k), &return_found);\n \n@@ -3128,7 +3142,8 @@ void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n       Label continue_loop(this), not_smi(this);\n       GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n                 &return_not_found);\n-      Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+      Node* element_k =\n+          LoadFixedArrayElement(CAST(elements), index_var.value());\n       GotoIfNot(TaggedIsSmi(element_k), &not_smi);\n       Branch(Float64Equal(search_num.value(), SmiToFloat64(element_k)),\n              &return_found, &continue_loop);\n@@ -3149,7 +3164,8 @@ void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n       Label continue_loop(this);\n       GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n                 &return_not_found);\n-      Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+      Node* element_k =\n+          LoadFixedArrayElement(CAST(elements), index_var.value());\n       GotoIf(TaggedIsSmi(element_k), &continue_loop);\n       GotoIfNot(IsHeapNumber(CAST(element_k)), &continue_loop);\n       BranchIfFloat64IsNaN(LoadHeapNumberValue(element_k), &return_found,\n@@ -3172,7 +3188,7 @@ void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n     BIND(&next_iteration);\n     GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n               &return_not_found);\n-    Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+    Node* element_k = LoadFixedArrayElement(CAST(elements), index_var.value());\n     GotoIf(TaggedIsSmi(element_k), &continue_loop);\n     GotoIf(WordEqual(search_element_string, element_k), &return_found);\n     Node* element_k_type = LoadInstanceType(element_k);\n@@ -3200,7 +3216,7 @@ void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n     GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n               &return_not_found);\n \n-    Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+    Node* element_k = LoadFixedArrayElement(CAST(elements), index_var.value());\n     Label continue_loop(this);\n     GotoIf(TaggedIsSmi(element_k), &continue_loop);\n     GotoIfNot(IsBigInt(CAST(element_k)), &continue_loop);\n@@ -3475,23 +3491,23 @@ TF_BUILTIN(ArrayIndexOfHoleyDoubles, ArrayIncludesIndexofAssembler) {\n TF_BUILTIN(ArrayPrototypeValues, CodeStubAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Return(CreateArrayIterator(context, ToObject(context, receiver),\n+  Return(CreateArrayIterator(context, ToObject_Inline(context, receiver),\n                              IterationKind::kValues));\n }\n \n // ES #sec-array.prototype.entries\n TF_BUILTIN(ArrayPrototypeEntries, CodeStubAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Return(CreateArrayIterator(context, ToObject(context, receiver),\n+  Return(CreateArrayIterator(context, ToObject_Inline(context, receiver),\n                              IterationKind::kEntries));\n }\n \n // ES #sec-array.prototype.keys\n TF_BUILTIN(ArrayPrototypeKeys, CodeStubAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Return(CreateArrayIterator(context, ToObject(context, receiver),\n+  Return(CreateArrayIterator(context, ToObject_Inline(context, receiver),\n                              IterationKind::kKeys));\n }\n \n@@ -3502,147 +3518,122 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   Node* iterator = Parameter(Descriptor::kReceiver);\n \n-  VARIABLE(var_value, MachineRepresentation::kTagged);\n-  VARIABLE(var_done, MachineRepresentation::kTagged);\n+  VARIABLE(var_done, MachineRepresentation::kTagged, TrueConstant());\n+  VARIABLE(var_value, MachineRepresentation::kTagged, UndefinedConstant());\n \n-  // Required, or else `throw_bad_receiver` fails a DCHECK due to these\n-  // variables not being bound along all paths, despite not being used.\n-  var_done.Bind(TrueConstant());\n-  var_value.Bind(UndefinedConstant());\n-\n-  Label throw_bad_receiver(this, Label::kDeferred);\n-  Label set_done(this);\n   Label allocate_entry_if_needed(this);\n   Label allocate_iterator_result(this);\n+  Label if_typedarray(this), if_other(this, Label::kDeferred), if_array(this),\n+      if_generic(this, Label::kDeferred);\n+  Label set_done(this, Label::kDeferred);\n \n   // If O does not have all of the internal slots of an Array Iterator Instance\n   // (22.1.5.3), throw a TypeError exception\n-  GotoIf(TaggedIsSmi(iterator), &throw_bad_receiver);\n-  GotoIfNot(IsJSArrayIterator(CAST(iterator)), &throw_bad_receiver);\n+  ThrowIfNotInstanceType(context, iterator, JS_ARRAY_ITERATOR_TYPE,\n+                         method_name);\n \n   // Let a be O.[[IteratedObject]].\n-  Node* array =\n-      LoadObjectField(iterator, JSArrayIterator::kIteratedObjectOffset);\n+  TNode<JSReceiver> array =\n+      CAST(LoadObjectField(iterator, JSArrayIterator::kIteratedObjectOffset));\n \n   // Let index be O.[[ArrayIteratorNextIndex]].\n-  Node* index = LoadObjectField(iterator, JSArrayIterator::kNextIndexOffset);\n-  Node* array_map = LoadMap(array);\n-\n-  Label if_detached(this, Label::kDeferred);\n-\n-  Label if_typedarray(this), if_other(this, Label::kDeferred), if_array(this),\n-      if_generic(this, Label::kDeferred);\n+  TNode<Number> index =\n+      CAST(LoadObjectField(iterator, JSArrayIterator::kNextIndexOffset));\n+  CSA_ASSERT(this, IsNumberNonNegativeSafeInteger(index));\n \n-  Node* array_type = LoadInstanceType(array);\n+  // Dispatch based on the type of the {array}.\n+  TNode<Map> array_map = LoadMap(array);\n+  TNode<Int32T> array_type = LoadMapInstanceType(array_map);\n   GotoIf(InstanceTypeEqual(array_type, JS_ARRAY_TYPE), &if_array);\n   Branch(InstanceTypeEqual(array_type, JS_TYPED_ARRAY_TYPE), &if_typedarray,\n          &if_other);\n \n   BIND(&if_array);\n   {\n-    // We can only handle fast elements here.\n-    Node* elements_kind = LoadMapElementsKind(array_map);\n-    GotoIfNot(IsFastElementsKind(elements_kind), &if_other);\n-\n-    TNode<Smi> length = CAST(LoadJSArrayLength(array));\n+    // If {array} is a JSArray, then the {index} must be in Unsigned32 range.\n+    CSA_ASSERT(this, IsNumberArrayIndex(index));\n+\n+    // Check that the {index} is within range for the {array}. We handle all\n+    // kinds of JSArray's here, so we do the computation on Uint32.\n+    TNode<Uint32T> index32 = ChangeNumberToUint32(index);\n+    TNode<Uint32T> length32 =\n+        ChangeNumberToUint32(LoadJSArrayLength(CAST(array)));\n+    GotoIfNot(Uint32LessThan(index32, length32), &set_done);\n+    StoreObjectField(\n+        iterator, JSArrayIterator::kNextIndexOffset,\n+        ChangeUint32ToTagged(Unsigned(Int32Add(index32, Int32Constant(1)))));\n \n-    GotoIfNot(SmiBelow(CAST(index), length), &set_done);\n-\n-    var_value.Bind(index);\n-    TNode<Smi> one = SmiConstant(1);\n-    StoreObjectFieldNoWriteBarrier(iterator, JSArrayIterator::kNextIndexOffset,\n-                                   SmiAdd(CAST(index), one));\n     var_done.Bind(FalseConstant());\n+    var_value.Bind(index);\n \n     GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n                            iterator, JSArrayIterator::kKindOffset),\n                        Int32Constant(static_cast<int>(IterationKind::kKeys))),\n            &allocate_iterator_result);\n \n-    Node* elements = LoadElements(array);\n-    Label if_packed(this), if_holey(this), if_packed_double(this),\n-        if_holey_double(this), if_unknown_kind(this, Label::kDeferred);\n-    int32_t kinds[] = {// Handled by if_packed.\n-                       PACKED_SMI_ELEMENTS, PACKED_ELEMENTS,\n-                       // Handled by if_holey.\n-                       HOLEY_SMI_ELEMENTS, HOLEY_ELEMENTS,\n-                       // Handled by if_packed_double.\n-                       PACKED_DOUBLE_ELEMENTS,\n-                       // Handled by if_holey_double.\n-                       HOLEY_DOUBLE_ELEMENTS};\n-    Label* labels[] = {// PACKED_{SMI,}_ELEMENTS\n-                       &if_packed, &if_packed,\n-                       // HOLEY_{SMI,}_ELEMENTS\n-                       &if_holey, &if_holey,\n-                       // PACKED_DOUBLE_ELEMENTS\n-                       &if_packed_double,\n-                       // HOLEY_DOUBLE_ELEMENTS\n-                       &if_holey_double};\n-    Switch(elements_kind, &if_unknown_kind, kinds, labels, arraysize(kinds));\n-\n-    BIND(&if_packed);\n-    {\n-      var_value.Bind(LoadFixedArrayElement(elements, index, 0, SMI_PARAMETERS));\n-      Goto(&allocate_entry_if_needed);\n-    }\n-\n-    BIND(&if_holey);\n-    {\n-      Node* element = LoadFixedArrayElement(elements, index, 0, SMI_PARAMETERS);\n-      var_value.Bind(element);\n-      GotoIfNot(WordEqual(element, TheHoleConstant()),\n-                &allocate_entry_if_needed);\n-      GotoIf(IsNoElementsProtectorCellInvalid(), &if_generic);\n-      var_value.Bind(UndefinedConstant());\n-      Goto(&allocate_entry_if_needed);\n-    }\n-\n-    BIND(&if_packed_double);\n-    {\n-      Node* value = LoadFixedDoubleArrayElement(\n-          elements, index, MachineType::Float64(), 0, SMI_PARAMETERS);\n-      var_value.Bind(AllocateHeapNumberWithValue(value));\n-      Goto(&allocate_entry_if_needed);\n-    }\n+    Label if_hole(this, Label::kDeferred);\n+    TNode<Int32T> elements_kind = LoadMapElementsKind(array_map);\n+    TNode<FixedArrayBase> elements = LoadElements(CAST(array));\n+    var_value.Bind(LoadFixedArrayBaseElementAsTagged(\n+        elements, Signed(ChangeUint32ToWord(index32)), elements_kind,\n+        &if_generic, &if_hole));\n+    Goto(&allocate_entry_if_needed);\n \n-    BIND(&if_holey_double);\n+    BIND(&if_hole);\n     {\n-      Label if_hole(this, Label::kDeferred);\n-      Node* value = LoadFixedDoubleArrayElement(\n-          elements, index, MachineType::Float64(), 0, SMI_PARAMETERS, &if_hole);\n-      var_value.Bind(AllocateHeapNumberWithValue(value));\n-      Goto(&allocate_entry_if_needed);\n-      BIND(&if_hole);\n       GotoIf(IsNoElementsProtectorCellInvalid(), &if_generic);\n       var_value.Bind(UndefinedConstant());\n       Goto(&allocate_entry_if_needed);\n     }\n-\n-    BIND(&if_unknown_kind);\n-    Unreachable();\n   }\n \n   BIND(&if_other);\n   {\n-    // If a is undefined, return CreateIterResultObject(undefined, true)\n-    GotoIf(IsUndefined(array), &allocate_iterator_result);\n+    // We cannot enter here with either JSArray's or JSTypedArray's.\n+    CSA_ASSERT(this, Word32BinaryNot(IsJSArray(array)));\n+    CSA_ASSERT(this, Word32BinaryNot(IsJSTypedArray(array)));\n \n-    Node* length =\n+    // Check that the {index} is within the bounds of the {array}s \"length\".\n+    TNode<Number> length = CAST(\n         CallBuiltin(Builtins::kToLength, context,\n-                    GetProperty(context, array, factory()->length_string()));\n-\n+                    GetProperty(context, array, factory()->length_string())));\n     GotoIfNumberGreaterThanOrEqual(index, length, &set_done);\n-\n-    var_value.Bind(index);\n     StoreObjectField(iterator, JSArrayIterator::kNextIndexOffset,\n                      NumberInc(index));\n+\n     var_done.Bind(FalseConstant());\n+    var_value.Bind(index);\n \n-    GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n+    Branch(Word32Equal(LoadAndUntagToWord32ObjectField(\n                            iterator, JSArrayIterator::kKindOffset),\n                        Int32Constant(static_cast<int>(IterationKind::kKeys))),\n-           &allocate_iterator_result);\n-    Goto(&if_generic);\n+           &allocate_iterator_result, &if_generic);\n+  }\n+\n+  BIND(&set_done);\n+  {\n+    // Change the [[ArrayIteratorNextIndex]] such that the {iterator} will\n+    // never produce values anymore, because it will always fail the bounds\n+    // check. Note that this is different from what the specification does,\n+    // which is changing the [[IteratedObject]] to undefined, because leaving\n+    // [[IteratedObject]] alone helps TurboFan to generate better code with\n+    // the inlining in JSCallReducer::ReduceArrayIteratorPrototypeNext().\n+    //\n+    // The terminal value we chose here depends on the type of the {array},\n+    // for JSArray's we use kMaxUInt32 so that TurboFan can always use\n+    // Word32 representation for fast-path indices (and this is safe since\n+    // the \"length\" of JSArray's is limited to Unsigned32 range). For other\n+    // JSReceiver's we have to use kMaxSafeInteger, since the \"length\" can\n+    // be any arbitrary value in the safe integer range.\n+    //\n+    // Note specifically that JSTypedArray's will never take this path, so\n+    // we don't need to worry about their maximum value.\n+    CSA_ASSERT(this, Word32BinaryNot(IsJSTypedArray(array)));\n+    TNode<Number> max_length =\n+        SelectConstant(IsJSArray(array), NumberConstant(kMaxUInt32),\n+                       NumberConstant(kMaxSafeInteger));\n+    StoreObjectField(iterator, JSArrayIterator::kNextIndexOffset, max_length);\n+    Goto(&allocate_iterator_result);\n   }\n \n   BIND(&if_generic);\n@@ -3653,77 +3644,41 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n \n   BIND(&if_typedarray);\n   {\n-    Node* buffer = LoadObjectField(array, JSTypedArray::kBufferOffset);\n-    GotoIf(IsDetachedBuffer(buffer), &if_detached);\n+    // If {array} is a JSTypedArray, the {index} must always be a Smi.\n+    CSA_ASSERT(this, TaggedIsSmi(index));\n \n-    TNode<Smi> length = LoadTypedArrayLength(CAST(array));\n+    // Check that the {array}s buffer wasn't neutered.\n+    ThrowIfArrayBufferViewBufferIsDetached(context, CAST(array), method_name);\n \n-    GotoIfNot(SmiBelow(CAST(index), length), &set_done);\n-\n-    var_value.Bind(index);\n-    TNode<Smi> one = SmiConstant(1);\n+    // If we go outside of the {length}, we don't need to update the\n+    // [[ArrayIteratorNextIndex]] anymore, since a JSTypedArray's\n+    // length cannot change anymore, so this {iterator} will never\n+    // produce values again anyways.\n+    TNode<Smi> length = LoadTypedArrayLength(CAST(array));\n+    GotoIfNot(SmiBelow(CAST(index), length), &allocate_iterator_result);\n     StoreObjectFieldNoWriteBarrier(iterator, JSArrayIterator::kNextIndexOffset,\n-                                   SmiAdd(CAST(index), one));\n+                                   SmiInc(CAST(index)));\n+\n     var_done.Bind(FalseConstant());\n+    var_value.Bind(index);\n \n     GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n                            iterator, JSArrayIterator::kKindOffset),\n                        Int32Constant(static_cast<int>(IterationKind::kKeys))),\n            &allocate_iterator_result);\n \n-    Node* elements_kind = LoadMapElementsKind(array_map);\n-    Node* elements = LoadElements(array);\n+    TNode<Int32T> elements_kind = LoadMapElementsKind(array_map);\n+    Node* elements = LoadElements(CAST(array));\n     Node* base_ptr =\n         LoadObjectField(elements, FixedTypedArrayBase::kBasePointerOffset);\n     Node* external_ptr =\n         LoadObjectField(elements, FixedTypedArrayBase::kExternalPointerOffset,\n                         MachineType::Pointer());\n-    Node* data_ptr = IntPtrAdd(BitcastTaggedToWord(base_ptr), external_ptr);\n-\n-    Label if_unknown_type(this, Label::kDeferred);\n-    int32_t elements_kinds[] = {\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) TYPE##_ELEMENTS,\n-        TYPED_ARRAYS(TYPED_ARRAY_CASE)\n-#undef TYPED_ARRAY_CASE\n-    };\n-\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) \\\n-  Label if_##type##array(this);\n-    TYPED_ARRAYS(TYPED_ARRAY_CASE)\n-#undef TYPED_ARRAY_CASE\n-\n-    Label* elements_kind_labels[] = {\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) &if_##type##array,\n-        TYPED_ARRAYS(TYPED_ARRAY_CASE)\n-#undef TYPED_ARRAY_CASE\n-    };\n-    STATIC_ASSERT(arraysize(elements_kinds) == arraysize(elements_kind_labels));\n-\n-    Switch(elements_kind, &if_unknown_type, elements_kinds,\n-           elements_kind_labels, arraysize(elements_kinds));\n-\n-    BIND(&if_unknown_type);\n-    Unreachable();\n-\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size)     \\\n-  BIND(&if_##type##array);                                  \\\n-  {                                                         \\\n-    var_value.Bind(LoadFixedTypedArrayElementAsTagged(      \\\n-        data_ptr, index, TYPE##_ELEMENTS, SMI_PARAMETERS)); \\\n-    Goto(&allocate_entry_if_needed);                        \\\n-  }\n-    TYPED_ARRAYS(TYPED_ARRAY_CASE)\n-#undef TYPED_ARRAY_CASE\n-\n-    BIND(&if_detached);\n-    ThrowTypeError(context, MessageTemplate::kDetachedOperation, method_name);\n-  }\n-\n-  BIND(&set_done);\n-  {\n-    StoreObjectFieldNoWriteBarrier(\n-        iterator, JSArrayIterator::kIteratedObjectOffset, UndefinedConstant());\n-    Goto(&allocate_iterator_result);\n+    TNode<WordT> data_ptr =\n+        IntPtrAdd(BitcastTaggedToWord(base_ptr), external_ptr);\n+    var_value.Bind(LoadFixedTypedArrayElementAsTagged(data_ptr, CAST(index),\n+                                                      elements_kind));\n+    Goto(&allocate_entry_if_needed);\n   }\n \n   BIND(&allocate_entry_if_needed);\n@@ -3733,48 +3688,17 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n                        Int32Constant(static_cast<int>(IterationKind::kValues))),\n            &allocate_iterator_result);\n \n-    Node* elements = AllocateFixedArray(PACKED_ELEMENTS, IntPtrConstant(2));\n-    StoreFixedArrayElement(elements, 0, index, SKIP_WRITE_BARRIER);\n-    StoreFixedArrayElement(elements, 1, var_value.value(), SKIP_WRITE_BARRIER);\n-\n-    Node* entry = Allocate(JSArray::kSize);\n-    Node* map = LoadContextElement(LoadNativeContext(context),\n-                                   Context::JS_ARRAY_PACKED_ELEMENTS_MAP_INDEX);\n-\n-    StoreMapNoWriteBarrier(entry, map);\n-    StoreObjectFieldRoot(entry, JSArray::kPropertiesOrHashOffset,\n-                         Heap::kEmptyFixedArrayRootIndex);\n-    StoreObjectFieldNoWriteBarrier(entry, JSArray::kElementsOffset, elements);\n-    StoreObjectFieldNoWriteBarrier(entry, JSArray::kLengthOffset,\n-                                   SmiConstant(2));\n-\n-    var_value.Bind(entry);\n-    Goto(&allocate_iterator_result);\n+    Node* result =\n+        AllocateJSIteratorResultForEntry(context, index, var_value.value());\n+    Return(result);\n   }\n \n   BIND(&allocate_iterator_result);\n   {\n-    Node* result = Allocate(JSIteratorResult::kSize);\n-    Node* map = LoadContextElement(LoadNativeContext(context),\n-                                   Context::ITERATOR_RESULT_MAP_INDEX);\n-    StoreMapNoWriteBarrier(result, map);\n-    StoreObjectFieldRoot(result, JSIteratorResult::kPropertiesOrHashOffset,\n-                         Heap::kEmptyFixedArrayRootIndex);\n-    StoreObjectFieldRoot(result, JSIteratorResult::kElementsOffset,\n-                         Heap::kEmptyFixedArrayRootIndex);\n-    StoreObjectFieldNoWriteBarrier(result, JSIteratorResult::kValueOffset,\n-                                   var_value.value());\n-    StoreObjectFieldNoWriteBarrier(result, JSIteratorResult::kDoneOffset,\n-                                   var_done.value());\n+    Node* result =\n+        AllocateJSIteratorResult(context, var_value.value(), var_done.value());\n     Return(result);\n   }\n-\n-  BIND(&throw_bad_receiver);\n-  {\n-    // The {receiver} is not a valid JSArrayIterator.\n-    ThrowTypeError(context, MessageTemplate::kIncompatibleMethodReceiver,\n-                   StringConstant(method_name), iterator);\n-  }\n }\n \n namespace {\n@@ -3817,7 +3741,7 @@ class ArrayFlattenAssembler : public CodeStubAssembler {\n       CSA_ASSERT(this,\n                  SmiGreaterThanOrEqual(CAST(source_index), SmiConstant(0)));\n       Node* const exists =\n-          HasProperty(source, source_index, context, kHasProperty);\n+          HasProperty(context, source, source_index, kHasProperty);\n \n       // c. If exists is true, then\n       Label next(this);\n@@ -3959,7 +3883,7 @@ TF_BUILTIN(ArrayPrototypeFlat, CodeStubAssembler) {\n   Node* const depth = args.GetOptionalArgumentValue(0);\n \n   // 1. Let O be ? ToObject(this value).\n-  Node* const o = ToObject(context, receiver);\n+  Node* const o = ToObject_Inline(CAST(context), CAST(receiver));\n \n   // 2. Let sourceLen be ? ToLength(? Get(O, \"length\")).\n   Node* const source_length =\n@@ -4002,7 +3926,7 @@ TF_BUILTIN(ArrayPrototypeFlatMap, CodeStubAssembler) {\n   Node* const mapper_function = args.GetOptionalArgumentValue(0);\n \n   // 1. Let O be ? ToObject(this value).\n-  Node* const o = ToObject(context, receiver);\n+  Node* const o = ToObject_Inline(CAST(context), CAST(receiver));\n \n   // 2. Let sourceLen be ? ToLength(? Get(O, \"length\")).\n   Node* const source_length ="
        },
        {
            "sha": "a73c072cee6ef2c43c26901c865fabc10173100e",
            "filename": "deps/v8/src/builtins/builtins-array-gen.h",
            "status": "modified",
            "additions": 3,
            "deletions": 8,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -68,14 +68,9 @@ class ArrayBuiltinsAssembler : public BaseBuiltinsFromDSLAssembler {\n \n   void NullPostLoopAction();\n \n-  // TODO(szuend): Remove once overload resolution is fixed in Torque.\n-  TNode<Object> LoadFixedArrayElementInt(TNode<FixedArray> array, int index) {\n-    return LoadFixedArrayElement(array, index);\n-  }\n-  Node* StoreFixedArrayElementInt(TNode<FixedArray> array, int index,\n-                                  TNode<Object> value) {\n-    return StoreFixedArrayElement(array, index, value);\n-  }\n+  // Uses memset to effectively initialize the given FixedArray with Smi zeroes.\n+  void FillFixedArrayWithSmiZero(TNode<FixedArray> array,\n+                                 TNode<Smi> smi_length);\n \n  protected:\n   TNode<Context> context() { return context_; }"
        },
        {
            "sha": "ceeee5f37db86e4158cc0b302135b026ec6b52cd",
            "filename": "deps/v8/src/builtins/builtins-array.cc",
            "status": "modified",
            "additions": 183,
            "deletions": 15,
            "changes": 198,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,19 +2,20 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n-#include \"src/builtins/builtins-utils.h\"\n-\n #include \"src/code-factory.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/contexts.h\"\n #include \"src/counters.h\"\n-#include \"src/elements.h\"\n+#include \"src/debug/debug.h\"\n+#include \"src/elements-inl.h\"\n #include \"src/global-handles.h\"\n #include \"src/isolate.h\"\n #include \"src/lookup.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects/hash-table-inl.h\"\n+#include \"src/objects/js-array-inl.h\"\n #include \"src/prototype.h\"\n \n namespace v8 {\n@@ -79,11 +80,14 @@ inline bool HasOnlySimpleElements(Isolate* isolate, JSReceiver* receiver) {\n }\n \n // Returns |false| if not applicable.\n+// TODO(szuend): Refactor this function because it is getting hard to\n+//               understand what each call-site actually checks.\n V8_WARN_UNUSED_RESULT\n inline bool EnsureJSArrayWithWritableFastElements(Isolate* isolate,\n                                                   Handle<Object> receiver,\n                                                   BuiltinArguments* args,\n-                                                  int first_added_arg) {\n+                                                  int first_arg_index,\n+                                                  int num_arguments) {\n   if (!receiver->IsJSArray()) return false;\n   Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n   ElementsKind origin_kind = array->GetElementsKind();\n@@ -102,13 +106,14 @@ inline bool EnsureJSArrayWithWritableFastElements(Isolate* isolate,\n   // Need to ensure that the arguments passed in args can be contained in\n   // the array.\n   int args_length = args->length();\n-  if (first_added_arg >= args_length) return true;\n+  if (first_arg_index >= args_length) return true;\n \n   if (IsObjectElementsKind(origin_kind)) return true;\n   ElementsKind target_kind = origin_kind;\n   {\n     DisallowHeapAllocation no_gc;\n-    for (int i = first_added_arg; i < args_length; i++) {\n+    int last_arg_index = std::min(first_arg_index + num_arguments, args_length);\n+    for (int i = first_arg_index; i < last_arg_index; i++) {\n       Object* arg = (*args)[i];\n       if (arg->IsHeapObject()) {\n         if (arg->IsHeapNumber()) {\n@@ -142,6 +147,164 @@ V8_WARN_UNUSED_RESULT static Object* CallJsIntrinsic(\n       Execution::Call(isolate, function, args.receiver(), argc, argv.start()));\n }\n \n+// If |index| is Undefined, returns init_if_undefined.\n+// If |index| is negative, returns length + index.\n+// If |index| is positive, returns index.\n+// Returned value is guaranteed to be in the interval of [0, length].\n+V8_WARN_UNUSED_RESULT Maybe<double> GetRelativeIndex(Isolate* isolate,\n+                                                     double length,\n+                                                     Handle<Object> index,\n+                                                     double init_if_undefined) {\n+  double relative_index = init_if_undefined;\n+  if (!index->IsUndefined()) {\n+    Handle<Object> relative_index_obj;\n+    ASSIGN_RETURN_ON_EXCEPTION_VALUE(isolate, relative_index_obj,\n+                                     Object::ToInteger(isolate, index),\n+                                     Nothing<double>());\n+    relative_index = relative_index_obj->Number();\n+  }\n+\n+  if (relative_index < 0) {\n+    return Just(std::max(length + relative_index, 0.0));\n+  }\n+\n+  return Just(std::min(relative_index, length));\n+}\n+\n+// Returns \"length\", has \"fast-path\" for JSArrays.\n+V8_WARN_UNUSED_RESULT Maybe<double> GetLengthProperty(\n+    Isolate* isolate, Handle<JSReceiver> receiver) {\n+  if (receiver->IsJSArray()) {\n+    Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n+    double length = array->length()->Number();\n+    DCHECK(0 <= length && length <= kMaxSafeInteger);\n+\n+    return Just(length);\n+  }\n+\n+  Handle<Object> raw_length_number;\n+  ASSIGN_RETURN_ON_EXCEPTION_VALUE(\n+      isolate, raw_length_number,\n+      Object::GetLengthFromArrayLike(isolate, receiver), Nothing<double>());\n+  return Just(raw_length_number->Number());\n+}\n+\n+V8_WARN_UNUSED_RESULT Object* GenericArrayFill(Isolate* isolate,\n+                                               Handle<JSReceiver> receiver,\n+                                               Handle<Object> value,\n+                                               double start, double end) {\n+  // 7. Repeat, while k < final.\n+  while (start < end) {\n+    // a. Let Pk be ! ToString(k).\n+    Handle<String> index = isolate->factory()->NumberToString(\n+        isolate->factory()->NewNumber(start));\n+\n+    // b. Perform ? Set(O, Pk, value, true).\n+    RETURN_FAILURE_ON_EXCEPTION(\n+        isolate, Object::SetPropertyOrElement(isolate, receiver, index, value,\n+                                              LanguageMode::kStrict));\n+\n+    // c. Increase k by 1.\n+    ++start;\n+  }\n+\n+  // 8. Return O.\n+  return *receiver;\n+}\n+\n+V8_WARN_UNUSED_RESULT bool TryFastArrayFill(\n+    Isolate* isolate, BuiltinArguments* args, Handle<JSReceiver> receiver,\n+    Handle<Object> value, double start_index, double end_index) {\n+  // If indices are too large, use generic path since they are stored as\n+  // properties, not in the element backing store.\n+  if (end_index > kMaxUInt32) return false;\n+  if (!receiver->IsJSObject()) return false;\n+\n+  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, args, 1, 1)) {\n+    return false;\n+  }\n+\n+  Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n+\n+  // If no argument was provided, we fill the array with 'undefined'.\n+  // EnsureJSArrayWith... does not handle that case so we do it here.\n+  // TODO(szuend): Pass target elements kind to EnsureJSArrayWith... when\n+  //               it gets refactored.\n+  if (args->length() == 1 && array->GetElementsKind() != PACKED_ELEMENTS) {\n+    // Use a short-lived HandleScope to avoid creating several copies of the\n+    // elements handle which would cause issues when left-trimming later-on.\n+    HandleScope scope(isolate);\n+    JSObject::TransitionElementsKind(array, PACKED_ELEMENTS);\n+  }\n+\n+  DCHECK_LE(start_index, kMaxUInt32);\n+  DCHECK_LE(end_index, kMaxUInt32);\n+\n+  uint32_t start, end;\n+  CHECK(DoubleToUint32IfEqualToSelf(start_index, &start));\n+  CHECK(DoubleToUint32IfEqualToSelf(end_index, &end));\n+\n+  ElementsAccessor* accessor = array->GetElementsAccessor();\n+  accessor->Fill(array, value, start, end);\n+  return true;\n+}\n+}  // namespace\n+\n+BUILTIN(ArrayPrototypeFill) {\n+  HandleScope scope(isolate);\n+\n+  if (isolate->debug_execution_mode() == DebugInfo::kSideEffects) {\n+    if (!isolate->debug()->PerformSideEffectCheckForObject(args.receiver())) {\n+      return ReadOnlyRoots(isolate).exception();\n+    }\n+  }\n+\n+  // 1. Let O be ? ToObject(this value).\n+  Handle<JSReceiver> receiver;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, receiver, Object::ToObject(isolate, args.receiver()));\n+\n+  // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+  double length;\n+  MAYBE_ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, length, GetLengthProperty(isolate, receiver));\n+\n+  // 3. Let relativeStart be ? ToInteger(start).\n+  // 4. If relativeStart < 0, let k be max((len + relativeStart), 0);\n+  //    else let k be min(relativeStart, len).\n+  Handle<Object> start = args.atOrUndefined(isolate, 2);\n+\n+  double start_index;\n+  MAYBE_ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, start_index, GetRelativeIndex(isolate, length, start, 0));\n+\n+  // 5. If end is undefined, let relativeEnd be len;\n+  //    else let relativeEnd be ? ToInteger(end).\n+  // 6. If relativeEnd < 0, let final be max((len + relativeEnd), 0);\n+  //    else let final be min(relativeEnd, len).\n+  Handle<Object> end = args.atOrUndefined(isolate, 3);\n+\n+  double end_index;\n+  MAYBE_ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, end_index, GetRelativeIndex(isolate, length, end, length));\n+\n+  if (start_index >= end_index) return *receiver;\n+\n+  // Ensure indexes are within array bounds\n+  DCHECK_LE(0, start_index);\n+  DCHECK_LE(start_index, end_index);\n+  DCHECK_LE(end_index, length);\n+\n+  Handle<Object> value = args.atOrUndefined(isolate, 1);\n+\n+  if (TryFastArrayFill(isolate, &args, receiver, value, start_index,\n+                       end_index)) {\n+    return *receiver;\n+  }\n+  return GenericArrayFill(isolate, receiver, value, start_index, end_index);\n+}\n+\n+namespace {\n V8_WARN_UNUSED_RESULT Object* GenericArrayPush(Isolate* isolate,\n                                                BuiltinArguments* args) {\n   // 1. Let O be ? ToObject(this value).\n@@ -153,7 +316,7 @@ V8_WARN_UNUSED_RESULT Object* GenericArrayPush(Isolate* isolate,\n   Handle<Object> raw_length_number;\n   ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n       isolate, raw_length_number,\n-      Object::GetLengthFromArrayLike(isolate, Handle<Object>::cast(receiver)));\n+      Object::GetLengthFromArrayLike(isolate, receiver));\n \n   // 3. Let args be a List whose elements are, in left to right order,\n   //    the arguments that were passed to this function invocation.\n@@ -210,7 +373,8 @@ V8_WARN_UNUSED_RESULT Object* GenericArrayPush(Isolate* isolate,\n BUILTIN(ArrayPush) {\n   HandleScope scope(isolate);\n   Handle<Object> receiver = args.receiver();\n-  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, &args, 1)) {\n+  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, &args, 1,\n+                                             args.length() - 1)) {\n     return GenericArrayPush(isolate, &args);\n   }\n \n@@ -293,7 +457,8 @@ V8_WARN_UNUSED_RESULT Object* GenericArrayPop(Isolate* isolate,\n BUILTIN(ArrayPop) {\n   HandleScope scope(isolate);\n   Handle<Object> receiver = args.receiver();\n-  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, nullptr, 0)) {\n+  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, nullptr, 0,\n+                                             0)) {\n     return GenericArrayPop(isolate, &args);\n   }\n   Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n@@ -324,7 +489,8 @@ BUILTIN(ArrayShift) {\n   HandleScope scope(isolate);\n   Heap* heap = isolate->heap();\n   Handle<Object> receiver = args.receiver();\n-  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, nullptr, 0) ||\n+  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, nullptr, 0,\n+                                             0) ||\n       !IsJSArrayFastElementMovingAllowed(isolate, JSArray::cast(*receiver))) {\n     return CallJsIntrinsic(isolate, isolate->array_shift(), args);\n   }\n@@ -344,7 +510,8 @@ BUILTIN(ArrayShift) {\n BUILTIN(ArrayUnshift) {\n   HandleScope scope(isolate);\n   Handle<Object> receiver = args.receiver();\n-  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, &args, 1)) {\n+  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, &args, 1,\n+                                             args.length() - 1)) {\n     return CallJsIntrinsic(isolate, isolate->array_unshift(), args);\n   }\n   Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n@@ -367,7 +534,8 @@ BUILTIN(ArraySplice) {\n   HandleScope scope(isolate);\n   Handle<Object> receiver = args.receiver();\n   if (V8_UNLIKELY(\n-          !EnsureJSArrayWithWritableFastElements(isolate, receiver, &args, 3) ||\n+          !EnsureJSArrayWithWritableFastElements(isolate, receiver, &args, 3,\n+                                                 args.length() - 3) ||\n           // If this is a subclass of Array, then call out to JS.\n           !Handle<JSArray>::cast(receiver)->HasArrayPrototype(isolate) ||\n           // If anything with @@species has been messed with, call out to JS.\n@@ -662,7 +830,7 @@ uint32_t EstimateElementCount(Isolate* isolate, Handle<JSArray> array) {\n       }\n       break;\n     }\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) case TYPE##_ELEMENTS:\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) case TYPE##_ELEMENTS:\n \n       TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n@@ -733,7 +901,7 @@ void CollectElementIndices(Isolate* isolate, Handle<JSObject> object,\n       });\n       break;\n     }\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) case TYPE##_ELEMENTS:\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) case TYPE##_ELEMENTS:\n \n       TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n@@ -958,7 +1126,7 @@ bool IterateElements(Isolate* isolate, Handle<JSReceiver> receiver,\n     }\n     case NO_ELEMENTS:\n       break;\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) case TYPE##_ELEMENTS:\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) case TYPE##_ELEMENTS:\n       TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n       return IterateElementsSlow(isolate, receiver, length, visitor);"
        },
        {
            "sha": "808c34e43b941928c2ca53a2a3155583213d07f9",
            "filename": "deps/v8/src/builtins/builtins-arraybuffer.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 12,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,11 +2,13 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/conversions.h\"\n #include \"src/counters.h\"\n+#include \"src/maybe-handles-inl.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/js-array-buffer-inl.h\"\n \n namespace v8 {\n namespace internal {\n@@ -61,20 +63,20 @@ BUILTIN(ArrayBufferConstructor) {\n     THROW_NEW_ERROR_RETURN_FAILURE(\n         isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n                               handle(target->shared()->Name(), isolate)));\n-  } else {  // [[Construct]]\n-    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n-    Handle<Object> length = args.atOrUndefined(isolate, 1);\n-\n-    Handle<Object> number_length;\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, number_length,\n-                                       Object::ToInteger(isolate, length));\n-    if (number_length->Number() < 0.0) {\n-      THROW_NEW_ERROR_RETURN_FAILURE(\n-          isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferLength));\n+  }\n+  // [[Construct]]\n+  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+  Handle<Object> length = args.atOrUndefined(isolate, 1);\n+\n+  Handle<Object> number_length;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, number_length,\n+                                     Object::ToInteger(isolate, length));\n+  if (number_length->Number() < 0.0) {\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferLength));\n     }\n \n     return ConstructBuffer(isolate, target, new_target, number_length, true);\n-  }\n }\n \n // This is a helper to construct an ArrayBuffer with uinitialized memory."
        },
        {
            "sha": "cf5e18f6a0888be326dfb1f1dea6b18b679eae40",
            "filename": "deps/v8/src/builtins/builtins-async-function-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -7,6 +7,7 @@\n #include \"src/builtins/builtins.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/js-generator.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "4568507a9f37d1758bb96b0b1c04b12c66b7691e",
            "filename": "deps/v8/src/builtins/builtins-async-gen.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -123,8 +123,8 @@ Node* AsyncBuiltinsAssembler::Await(\n       // than a meaningful catch handler\n       Node* const key =\n           HeapConstant(factory()->promise_forwarding_handler_symbol());\n-      CallRuntime(Runtime::kSetProperty, context, on_reject, key,\n-                  TrueConstant(), SmiConstant(LanguageMode::kStrict));\n+      SetPropertyStrict(CAST(context), CAST(on_reject), CAST(key),\n+                        TrueConstant());\n \n       GotoIf(IsFalse(is_predicted_as_caught), &common);\n       PromiseSetHandledHint(value);\n@@ -137,8 +137,8 @@ Node* AsyncBuiltinsAssembler::Await(\n     CSA_SLOW_ASSERT(this, HasInstanceType(outer_promise, JS_PROMISE_TYPE));\n \n     Node* const key = HeapConstant(factory()->promise_handled_by_symbol());\n-    CallRuntime(Runtime::kSetProperty, context, throwaway, key, outer_promise,\n-                SmiConstant(LanguageMode::kStrict));\n+    SetPropertyStrict(CAST(context), CAST(throwaway), CAST(key),\n+                      CAST(outer_promise));\n   }\n \n   Goto(&do_perform_promise_then);\n@@ -237,8 +237,8 @@ Node* AsyncBuiltinsAssembler::AwaitOptimized(\n       // than a meaningful catch handler\n       Node* const key =\n           HeapConstant(factory()->promise_forwarding_handler_symbol());\n-      CallRuntime(Runtime::kSetProperty, context, on_reject, key,\n-                  TrueConstant(), SmiConstant(LanguageMode::kStrict));\n+      SetPropertyStrict(CAST(context), CAST(on_reject), CAST(key),\n+                        TrueConstant());\n \n       GotoIf(IsFalse(is_predicted_as_caught), &common);\n       PromiseSetHandledHint(value);\n@@ -251,8 +251,8 @@ Node* AsyncBuiltinsAssembler::AwaitOptimized(\n     CSA_SLOW_ASSERT(this, HasInstanceType(outer_promise, JS_PROMISE_TYPE));\n \n     Node* const key = HeapConstant(factory()->promise_handled_by_symbol());\n-    CallRuntime(Runtime::kSetProperty, context, throwaway, key, outer_promise,\n-                SmiConstant(LanguageMode::kStrict));\n+    SetPropertyStrict(CAST(context), CAST(throwaway), CAST(key),\n+                      CAST(outer_promise));\n   }\n \n   Goto(&do_perform_promise_then);"
        },
        {
            "sha": "bbb25716912036d49478da217f89454d18a7db9f",
            "filename": "deps/v8/src/builtins/builtins-async-generator-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,6 +8,7 @@\n #include \"src/code-factory.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/frames-inl.h\"\n+#include \"src/objects/js-generator.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "2800441ffcef540c4550f066d37e708a5793df95",
            "filename": "deps/v8/src/builtins/builtins-bigint.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-bigint.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-bigint.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-bigint.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/conversions.h\"\n #include \"src/counters.h\"\n@@ -13,26 +13,26 @@ namespace internal {\n \n BUILTIN(BigIntConstructor) {\n   HandleScope scope(isolate);\n-  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n-    Handle<Object> value = args.atOrUndefined(isolate, 1);\n-\n-    if (value->IsJSReceiver()) {\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-          isolate, value,\n-          JSReceiver::ToPrimitive(Handle<JSReceiver>::cast(value),\n-                                  ToPrimitiveHint::kNumber));\n-    }\n-\n-    if (value->IsNumber()) {\n-      RETURN_RESULT_OR_FAILURE(isolate, BigInt::FromNumber(isolate, value));\n-    } else {\n-      RETURN_RESULT_OR_FAILURE(isolate, BigInt::FromObject(isolate, value));\n-    }\n-  } else {  // [[Construct]]\n+  if (!args.new_target()->IsUndefined(isolate)) {  // [[Construct]]\n     THROW_NEW_ERROR_RETURN_FAILURE(\n         isolate, NewTypeError(MessageTemplate::kNotConstructor,\n                               isolate->factory()->BigInt_string()));\n   }\n+  // [[Call]]\n+  Handle<Object> value = args.atOrUndefined(isolate, 1);\n+\n+  if (value->IsJSReceiver()) {\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+        isolate, value,\n+        JSReceiver::ToPrimitive(Handle<JSReceiver>::cast(value),\n+                                ToPrimitiveHint::kNumber));\n+  }\n+\n+  if (value->IsNumber()) {\n+    RETURN_RESULT_OR_FAILURE(isolate, BigInt::FromNumber(isolate, value));\n+  } else {\n+    RETURN_RESULT_OR_FAILURE(isolate, BigInt::FromObject(isolate, value));\n+  }\n }\n \n BUILTIN(BigIntAsUintN) {"
        },
        {
            "sha": "52645cbaa02b92f8501fd165bc3bd0f9a24653f4",
            "filename": "deps/v8/src/builtins/builtins-boolean.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 13,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/counters.h\"\n #include \"src/objects-inl.h\"\n@@ -19,19 +19,18 @@ BUILTIN(BooleanConstructor) {\n   if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n     Handle<Object> value = args.atOrUndefined(isolate, 1);\n     return isolate->heap()->ToBoolean(value->BooleanValue(isolate));\n-  } else {  // [[Construct]]\n-    HandleScope scope(isolate);\n-    Handle<Object> value = args.atOrUndefined(isolate, 1);\n-    Handle<JSFunction> target = args.target();\n-    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n-    DCHECK(*target == target->native_context()->boolean_function());\n-    Handle<JSObject> result;\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n-                                       JSObject::New(target, new_target));\n-    Handle<JSValue>::cast(result)->set_value(\n-        isolate->heap()->ToBoolean(value->BooleanValue(isolate)));\n-    return *result;\n   }\n+  // [[Construct]]\n+  Handle<Object> value = args.atOrUndefined(isolate, 1);\n+  Handle<JSFunction> target = args.target();\n+  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+  DCHECK(*target == target->native_context()->boolean_function());\n+  Handle<JSObject> result;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n+                                     JSObject::New(target, new_target));\n+  Handle<JSValue>::cast(result)->set_value(\n+      isolate->heap()->ToBoolean(value->BooleanValue(isolate)));\n+  return *result;\n }\n \n }  // namespace internal"
        },
        {
            "sha": "4defe28cb7c4acd2a0d575a78dd2596345d71624",
            "filename": "deps/v8/src/builtins/builtins-call-gen.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 21,
            "changes": 37,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -237,35 +237,30 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructDoubleVarargs(\n     TNode<Object> target, SloppyTNode<Object> new_target,\n     TNode<FixedDoubleArray> elements, TNode<Int32T> length,\n     TNode<Int32T> args_count, TNode<Context> context, TNode<Int32T> kind) {\n-  Label if_holey_double(this), if_packed_double(this), if_done(this);\n+  Label if_done(this);\n \n   const ElementsKind new_kind = PACKED_ELEMENTS;\n   const WriteBarrierMode barrier_mode = UPDATE_WRITE_BARRIER;\n   TNode<IntPtrT> intptr_length = ChangeInt32ToIntPtr(length);\n   CSA_ASSERT(this, WordNotEqual(intptr_length, IntPtrConstant(0)));\n \n   // Allocate a new FixedArray of Objects.\n-  TNode<FixedArray> new_elements = AllocateFixedArray(\n-      new_kind, intptr_length, CodeStubAssembler::kAllowLargeObjectAllocation);\n+  TNode<FixedArray> new_elements = CAST(AllocateFixedArray(\n+      new_kind, intptr_length, CodeStubAssembler::kAllowLargeObjectAllocation));\n   Branch(Word32Equal(kind, Int32Constant(HOLEY_DOUBLE_ELEMENTS)),\n-         &if_holey_double, &if_packed_double);\n-\n-  BIND(&if_holey_double);\n-  {\n-    // Fill the FixedArray with pointers to HeapObjects.\n-    CopyFixedArrayElements(HOLEY_DOUBLE_ELEMENTS, elements, new_kind,\n-                           new_elements, intptr_length, intptr_length,\n-                           barrier_mode);\n-    Goto(&if_done);\n-  }\n-\n-  BIND(&if_packed_double);\n-  {\n-    CopyFixedArrayElements(PACKED_DOUBLE_ELEMENTS, elements, new_kind,\n-                           new_elements, intptr_length, intptr_length,\n-                           barrier_mode);\n-    Goto(&if_done);\n-  }\n+         [&] {\n+           // Fill the FixedArray with pointers to HeapObjects.\n+           CopyFixedArrayElements(HOLEY_DOUBLE_ELEMENTS, elements, new_kind,\n+                                  new_elements, intptr_length, intptr_length,\n+                                  barrier_mode);\n+           Goto(&if_done);\n+         },\n+         [&] {\n+           CopyFixedArrayElements(PACKED_DOUBLE_ELEMENTS, elements, new_kind,\n+                                  new_elements, intptr_length, intptr_length,\n+                                  barrier_mode);\n+           Goto(&if_done);\n+         });\n \n   BIND(&if_done);\n   {"
        },
        {
            "sha": "c41626dfd41451e9f5431002b63172591cb616a3",
            "filename": "deps/v8/src/builtins/builtins-callsite.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-callsite.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-callsite.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-callsite.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,13 +2,11 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n-#include \"src/builtins/builtins-utils.h\"\n-\n #include \"src/counters.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects/frame-array-inl.h\"\n-#include \"src/string-builder.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "5808d2a98caacd404960b0ae5e146c96c7b520e4",
            "filename": "deps/v8/src/builtins/builtins-collections-gen.cc",
            "status": "modified",
            "additions": 126,
            "deletions": 110,
            "changes": 236,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -119,7 +119,7 @@ class BaseCollectionsAssembler : public CodeStubAssembler {\n \n   // Loads an element from a fixed array.  If the element is the hole, returns\n   // `undefined`.\n-  TNode<Object> LoadAndNormalizeFixedArrayElement(TNode<HeapObject> elements,\n+  TNode<Object> LoadAndNormalizeFixedArrayElement(TNode<FixedArray> elements,\n                                                   TNode<IntPtrT> index);\n \n   // Loads an element from a fixed double array.  If the element is the hole,\n@@ -164,8 +164,7 @@ void BaseCollectionsAssembler::AddConstructorEntries(\n     Variant variant, TNode<Context> context, TNode<Context> native_context,\n     TNode<Object> collection, TNode<Object> initial_entries) {\n   TVARIABLE(BoolT, use_fast_loop,\n-            IsFastJSArrayWithNoCustomIteration(initial_entries, context,\n-                                               native_context));\n+            IsFastJSArrayWithNoCustomIteration(initial_entries, context));\n   TNode<IntPtrT> at_least_space_for =\n       EstimatedInitialSize(initial_entries, use_fast_loop.value());\n   Label allocate_table(this, &use_fast_loop), exit(this), fast_loop(this),\n@@ -186,8 +185,8 @@ void BaseCollectionsAssembler::AddConstructorEntries(\n     TNode<JSArray> initial_entries_jsarray =\n         UncheckedCast<JSArray>(initial_entries);\n #if DEBUG\n-    CSA_ASSERT(this, IsFastJSArrayWithNoCustomIteration(\n-                         initial_entries_jsarray, context, native_context));\n+    CSA_ASSERT(this, IsFastJSArrayWithNoCustomIteration(initial_entries_jsarray,\n+                                                        context));\n     TNode<Map> original_initial_entries_map = LoadMap(initial_entries_jsarray);\n #endif\n \n@@ -228,8 +227,7 @@ void BaseCollectionsAssembler::AddConstructorEntriesFromFastJSArray(\n   CSA_ASSERT(\n       this,\n       WordEqual(GetAddFunction(variant, native_context, collection), add_func));\n-  CSA_ASSERT(this, IsFastJSArrayWithNoCustomIteration(fast_jsarray, context,\n-                                                      native_context));\n+  CSA_ASSERT(this, IsFastJSArrayWithNoCustomIteration(fast_jsarray, context));\n   TNode<IntPtrT> length = SmiUntag(LoadFastJSArrayLength(fast_jsarray));\n   CSA_ASSERT(this, IntPtrGreaterThanOrEqual(length, IntPtrConstant(0)));\n   CSA_ASSERT(\n@@ -247,7 +245,7 @@ void BaseCollectionsAssembler::AddConstructorEntriesFromFastJSArray(\n   {\n     auto set_entry = [&](Node* index) {\n       TNode<Object> element = LoadAndNormalizeFixedArrayElement(\n-          elements, UncheckedCast<IntPtrT>(index));\n+          CAST(elements), UncheckedCast<IntPtrT>(index));\n       AddConstructorEntry(variant, context, collection, add_func, element,\n                           if_may_have_side_effects);\n     };\n@@ -491,7 +489,7 @@ TNode<BoolT> BaseCollectionsAssembler::HasInitialCollectionPrototype(\n }\n \n TNode<Object> BaseCollectionsAssembler::LoadAndNormalizeFixedArrayElement(\n-    TNode<HeapObject> elements, TNode<IntPtrT> index) {\n+    TNode<FixedArray> elements, TNode<IntPtrT> index) {\n   TNode<Object> element = LoadFixedArrayElement(elements, index);\n   return Select<Object>(IsTheHole(element), [=] { return UndefinedConstant(); },\n                         [=] { return element; });\n@@ -547,14 +545,18 @@ void BaseCollectionsAssembler::LoadKeyValue(\n       }\n       BIND(&if_one);\n       {\n-        *key = LoadAndNormalizeFixedArrayElement(elements, IntPtrConstant(0));\n+        *key = LoadAndNormalizeFixedArrayElement(CAST(elements),\n+                                                 IntPtrConstant(0));\n         *value = UndefinedConstant();\n         Goto(&exit);\n       }\n       BIND(&if_two);\n       {\n-        *key = LoadAndNormalizeFixedArrayElement(elements, IntPtrConstant(0));\n-        *value = LoadAndNormalizeFixedArrayElement(elements, IntPtrConstant(1));\n+        TNode<FixedArray> elements_fixed_array = CAST(elements);\n+        *key = LoadAndNormalizeFixedArrayElement(elements_fixed_array,\n+                                                 IntPtrConstant(0));\n+        *value = LoadAndNormalizeFixedArrayElement(elements_fixed_array,\n+                                                   IntPtrConstant(1));\n         Goto(&exit);\n       }\n     }\n@@ -636,14 +638,15 @@ class CollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n   typedef std::function<void(Node* const table, Node* const index)>\n       UpdateInTransition;\n   template <typename TableType>\n-  std::tuple<Node*, Node*> Transition(\n-      Node* const table, Node* const index,\n+  std::pair<TNode<TableType>, TNode<IntPtrT>> Transition(\n+      TNode<TableType> const table, TNode<IntPtrT> const index,\n       UpdateInTransition const& update_in_transition);\n   template <typename IteratorType, typename TableType>\n-  std::tuple<Node*, Node*> TransitionAndUpdate(Node* const iterator);\n+  std::pair<TNode<TableType>, TNode<IntPtrT>> TransitionAndUpdate(\n+      TNode<IteratorType> const iterator);\n   template <typename TableType>\n-  std::tuple<Node*, Node*, Node*> NextSkipHoles(Node* table, Node* index,\n-                                                Label* if_end);\n+  std::tuple<TNode<Object>, TNode<IntPtrT>, TNode<IntPtrT>> NextSkipHoles(\n+      TNode<TableType> table, TNode<IntPtrT> index, Label* if_end);\n \n   // Specialization for Smi.\n   // The {result} variable will contain the entry index if the key was found,\n@@ -708,12 +711,13 @@ class CollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n                                       Label* if_not_found);\n \n   Node* NormalizeNumberKey(Node* key);\n-  void StoreOrderedHashMapNewEntry(Node* const table, Node* const key,\n-                                   Node* const value, Node* const hash,\n+  void StoreOrderedHashMapNewEntry(TNode<OrderedHashMap> const table,\n+                                   Node* const key, Node* const value,\n+                                   Node* const hash,\n                                    Node* const number_of_buckets,\n                                    Node* const occupancy);\n-  void StoreOrderedHashSetNewEntry(Node* const table, Node* const key,\n-                                   Node* const hash,\n+  void StoreOrderedHashSetNewEntry(TNode<OrderedHashSet> const table,\n+                                   Node* const key, Node* const hash,\n                                    Node* const number_of_buckets,\n                                    Node* const occupancy);\n };\n@@ -1020,7 +1024,8 @@ TF_BUILTIN(OrderedHashTableHealIndex, CollectionsBuiltinsAssembler) {\n     Node* i = var_i.value();\n     GotoIfNot(IntPtrLessThan(i, number_of_deleted_elements), &return_index);\n     TNode<Smi> removed_index = CAST(LoadFixedArrayElement(\n-        table, i, OrderedHashTableBase::kRemovedHolesIndex * kPointerSize));\n+        CAST(table), i,\n+        OrderedHashTableBase::kRemovedHolesIndex * kPointerSize));\n     GotoIf(SmiGreaterThanOrEqual(removed_index, index), &return_index);\n     Decrement(&var_index, 1, SMI_PARAMETERS);\n     Increment(&var_i);\n@@ -1035,11 +1040,12 @@ TF_BUILTIN(OrderedHashTableHealIndex, CollectionsBuiltinsAssembler) {\n }\n \n template <typename TableType>\n-std::tuple<Node*, Node*> CollectionsBuiltinsAssembler::Transition(\n-    Node* const table, Node* const index,\n+std::pair<TNode<TableType>, TNode<IntPtrT>>\n+CollectionsBuiltinsAssembler::Transition(\n+    TNode<TableType> const table, TNode<IntPtrT> const index,\n     UpdateInTransition const& update_in_transition) {\n-  VARIABLE(var_index, MachineType::PointerRepresentation(), index);\n-  VARIABLE(var_table, MachineRepresentation::kTagged, table);\n+  TVARIABLE(IntPtrT, var_index, index);\n+  TVARIABLE(TableType, var_table, table);\n   Label if_done(this), if_transition(this, Label::kDeferred);\n   Branch(TaggedIsSmi(\n              LoadObjectField(var_table.value(), TableType::kNextTableOffset)),\n@@ -1051,16 +1057,17 @@ std::tuple<Node*, Node*> CollectionsBuiltinsAssembler::Transition(\n     Goto(&loop);\n     BIND(&loop);\n     {\n-      Node* table = var_table.value();\n-      Node* index = var_index.value();\n+      TNode<TableType> table = var_table.value();\n+      TNode<IntPtrT> index = var_index.value();\n \n-      Node* next_table = LoadObjectField(table, TableType::kNextTableOffset);\n+      TNode<Object> next_table =\n+          LoadObjectField(table, TableType::kNextTableOffset);\n       GotoIf(TaggedIsSmi(next_table), &done_loop);\n \n-      var_table.Bind(next_table);\n-      var_index.Bind(SmiUntag(\n+      var_table = CAST(next_table);\n+      var_index = SmiUntag(\n           CAST(CallBuiltin(Builtins::kOrderedHashTableHealIndex,\n-                           NoContextConstant(), table, SmiTag(index)))));\n+                           NoContextConstant(), table, SmiTag(index))));\n       Goto(&loop);\n     }\n     BIND(&done_loop);\n@@ -1071,14 +1078,15 @@ std::tuple<Node*, Node*> CollectionsBuiltinsAssembler::Transition(\n   }\n \n   BIND(&if_done);\n-  return std::tuple<Node*, Node*>(var_table.value(), var_index.value());\n+  return {var_table.value(), var_index.value()};\n }\n \n template <typename IteratorType, typename TableType>\n-std::tuple<Node*, Node*> CollectionsBuiltinsAssembler::TransitionAndUpdate(\n-    Node* const iterator) {\n+std::pair<TNode<TableType>, TNode<IntPtrT>>\n+CollectionsBuiltinsAssembler::TransitionAndUpdate(\n+    TNode<IteratorType> const iterator) {\n   return Transition<TableType>(\n-      LoadObjectField(iterator, IteratorType::kTableOffset),\n+      CAST(LoadObjectField(iterator, IteratorType::kTableOffset)),\n       LoadAndUntagObjectField(iterator, IteratorType::kIndexOffset),\n       [this, iterator](Node* const table, Node* const index) {\n         // Update the {iterator} with the new state.\n@@ -1089,21 +1097,23 @@ std::tuple<Node*, Node*> CollectionsBuiltinsAssembler::TransitionAndUpdate(\n }\n \n template <typename TableType>\n-std::tuple<Node*, Node*, Node*> CollectionsBuiltinsAssembler::NextSkipHoles(\n-    Node* table, Node* index, Label* if_end) {\n+std::tuple<TNode<Object>, TNode<IntPtrT>, TNode<IntPtrT>>\n+CollectionsBuiltinsAssembler::NextSkipHoles(TNode<TableType> table,\n+                                            TNode<IntPtrT> index,\n+                                            Label* if_end) {\n   // Compute the used capacity for the {table}.\n-  Node* number_of_buckets =\n+  TNode<IntPtrT> number_of_buckets =\n       LoadAndUntagObjectField(table, TableType::kNumberOfBucketsOffset);\n-  Node* number_of_elements =\n+  TNode<IntPtrT> number_of_elements =\n       LoadAndUntagObjectField(table, TableType::kNumberOfElementsOffset);\n-  Node* number_of_deleted_elements =\n+  TNode<IntPtrT> number_of_deleted_elements =\n       LoadAndUntagObjectField(table, TableType::kNumberOfDeletedElementsOffset);\n-  Node* used_capacity =\n+  TNode<IntPtrT> used_capacity =\n       IntPtrAdd(number_of_elements, number_of_deleted_elements);\n \n-  Node* entry_key;\n-  Node* entry_start_position;\n-  VARIABLE(var_index, MachineType::PointerRepresentation(), index);\n+  TNode<Object> entry_key;\n+  TNode<IntPtrT> entry_start_position;\n+  TVARIABLE(IntPtrT, var_index, index);\n   Label loop(this, &var_index), done_loop(this);\n   Goto(&loop);\n   BIND(&loop);\n@@ -1120,8 +1130,8 @@ std::tuple<Node*, Node*, Node*> CollectionsBuiltinsAssembler::NextSkipHoles(\n   }\n \n   BIND(&done_loop);\n-  return std::tuple<Node*, Node*, Node*>(entry_key, entry_start_position,\n-                                         var_index.value());\n+  return std::tuple<TNode<Object>, TNode<IntPtrT>, TNode<IntPtrT>>{\n+      entry_key, entry_start_position, var_index.value()};\n }\n \n TF_BUILTIN(MapPrototypeGet, CollectionsBuiltinsAssembler) {\n@@ -1141,7 +1151,7 @@ TF_BUILTIN(MapPrototypeGet, CollectionsBuiltinsAssembler) {\n \n   BIND(&if_found);\n   Return(LoadFixedArrayElement(\n-      table, SmiUntag(index),\n+      CAST(table), SmiUntag(index),\n       (OrderedHashMap::kHashTableStartIndex + OrderedHashMap::kValueOffset) *\n           kPointerSize));\n \n@@ -1198,7 +1208,8 @@ TF_BUILTIN(MapPrototypeSet, CollectionsBuiltinsAssembler) {\n \n   key = NormalizeNumberKey(key);\n \n-  Node* const table = LoadObjectField(receiver, JSMap::kTableOffset);\n+  TNode<OrderedHashMap> const table =\n+      CAST(LoadObjectField(receiver, JSMap::kTableOffset));\n \n   VARIABLE(entry_start_position_or_hash, MachineType::PointerRepresentation(),\n            IntPtrConstant(0));\n@@ -1232,7 +1243,7 @@ TF_BUILTIN(MapPrototypeSet, CollectionsBuiltinsAssembler) {\n   BIND(&add_entry);\n   VARIABLE(number_of_buckets, MachineType::PointerRepresentation());\n   VARIABLE(occupancy, MachineType::PointerRepresentation());\n-  VARIABLE(table_var, MachineRepresentation::kTaggedPointer, table);\n+  TVARIABLE(OrderedHashMap, table_var, table);\n   {\n     // Check we have enough space for the entry.\n     number_of_buckets.Bind(SmiUntag(CAST(\n@@ -1250,7 +1261,7 @@ TF_BUILTIN(MapPrototypeSet, CollectionsBuiltinsAssembler) {\n     // We do not have enough space, grow the table and reload the relevant\n     // fields.\n     CallRuntime(Runtime::kMapGrow, context, receiver);\n-    table_var.Bind(LoadObjectField(receiver, JSMap::kTableOffset));\n+    table_var = CAST(LoadObjectField(receiver, JSMap::kTableOffset));\n     number_of_buckets.Bind(SmiUntag(CAST(LoadFixedArrayElement(\n         table_var.value(), OrderedHashMap::kNumberOfBucketsIndex))));\n     Node* const new_number_of_elements = SmiUntag(CAST(LoadObjectField(\n@@ -1269,8 +1280,8 @@ TF_BUILTIN(MapPrototypeSet, CollectionsBuiltinsAssembler) {\n }\n \n void CollectionsBuiltinsAssembler::StoreOrderedHashMapNewEntry(\n-    Node* const table, Node* const key, Node* const value, Node* const hash,\n-    Node* const number_of_buckets, Node* const occupancy) {\n+    TNode<OrderedHashMap> const table, Node* const key, Node* const value,\n+    Node* const hash, Node* const number_of_buckets, Node* const occupancy) {\n   Node* const bucket =\n       WordAnd(hash, IntPtrSub(number_of_buckets, IntPtrConstant(1)));\n   Node* const bucket_entry = LoadFixedArrayElement(\n@@ -1308,7 +1319,8 @@ TF_BUILTIN(MapPrototypeDelete, CollectionsBuiltinsAssembler) {\n   ThrowIfNotInstanceType(context, receiver, JS_MAP_TYPE,\n                          \"Map.prototype.delete\");\n \n-  Node* const table = LoadObjectField(receiver, JSMap::kTableOffset);\n+  TNode<OrderedHashMap> const table =\n+      CAST(LoadObjectField(receiver, JSMap::kTableOffset));\n \n   VARIABLE(entry_start_position_or_hash, MachineType::PointerRepresentation(),\n            IntPtrConstant(0));\n@@ -1368,7 +1380,8 @@ TF_BUILTIN(SetPrototypeAdd, CollectionsBuiltinsAssembler) {\n \n   key = NormalizeNumberKey(key);\n \n-  Node* const table = LoadObjectField(receiver, JSMap::kTableOffset);\n+  TNode<OrderedHashSet> const table =\n+      CAST(LoadObjectField(receiver, JSMap::kTableOffset));\n \n   VARIABLE(entry_start_position_or_hash, MachineType::PointerRepresentation(),\n            IntPtrConstant(0));\n@@ -1398,7 +1411,7 @@ TF_BUILTIN(SetPrototypeAdd, CollectionsBuiltinsAssembler) {\n   BIND(&add_entry);\n   VARIABLE(number_of_buckets, MachineType::PointerRepresentation());\n   VARIABLE(occupancy, MachineType::PointerRepresentation());\n-  VARIABLE(table_var, MachineRepresentation::kTaggedPointer, table);\n+  TVARIABLE(OrderedHashSet, table_var, table);\n   {\n     // Check we have enough space for the entry.\n     number_of_buckets.Bind(SmiUntag(CAST(\n@@ -1416,7 +1429,7 @@ TF_BUILTIN(SetPrototypeAdd, CollectionsBuiltinsAssembler) {\n     // We do not have enough space, grow the table and reload the relevant\n     // fields.\n     CallRuntime(Runtime::kSetGrow, context, receiver);\n-    table_var.Bind(LoadObjectField(receiver, JSMap::kTableOffset));\n+    table_var = CAST(LoadObjectField(receiver, JSMap::kTableOffset));\n     number_of_buckets.Bind(SmiUntag(CAST(LoadFixedArrayElement(\n         table_var.value(), OrderedHashSet::kNumberOfBucketsIndex))));\n     Node* const new_number_of_elements = SmiUntag(CAST(LoadObjectField(\n@@ -1435,7 +1448,7 @@ TF_BUILTIN(SetPrototypeAdd, CollectionsBuiltinsAssembler) {\n }\n \n void CollectionsBuiltinsAssembler::StoreOrderedHashSetNewEntry(\n-    Node* const table, Node* const key, Node* const hash,\n+    TNode<OrderedHashSet> const table, Node* const key, Node* const hash,\n     Node* const number_of_buckets, Node* const occupancy) {\n   Node* const bucket =\n       WordAnd(hash, IntPtrSub(number_of_buckets, IntPtrConstant(1)));\n@@ -1471,7 +1484,8 @@ TF_BUILTIN(SetPrototypeDelete, CollectionsBuiltinsAssembler) {\n   ThrowIfNotInstanceType(context, receiver, JS_SET_TYPE,\n                          \"Set.prototype.delete\");\n \n-  Node* const table = LoadObjectField(receiver, JSMap::kTableOffset);\n+  TNode<OrderedHashSet> const table =\n+      CAST(LoadObjectField(receiver, JSMap::kTableOffset));\n \n   VARIABLE(entry_start_position_or_hash, MachineType::PointerRepresentation(),\n            IntPtrConstant(0));\n@@ -1552,23 +1566,23 @@ TF_BUILTIN(MapPrototypeForEach, CollectionsBuiltinsAssembler) {\n   GotoIf(TaggedIsSmi(callback), &callback_not_callable);\n   GotoIfNot(IsCallable(callback), &callback_not_callable);\n \n-  VARIABLE(var_index, MachineType::PointerRepresentation(), IntPtrConstant(0));\n-  VARIABLE(var_table, MachineRepresentation::kTagged,\n-           LoadObjectField(receiver, JSMap::kTableOffset));\n+  TVARIABLE(IntPtrT, var_index, IntPtrConstant(0));\n+  TVARIABLE(OrderedHashMap, var_table,\n+            CAST(LoadObjectField(receiver, JSMap::kTableOffset)));\n   Label loop(this, {&var_index, &var_table}), done_loop(this);\n   Goto(&loop);\n   BIND(&loop);\n   {\n     // Transition {table} and {index} if there was any modification to\n     // the {receiver} while we're iterating.\n-    Node* index = var_index.value();\n-    Node* table = var_table.value();\n+    TNode<IntPtrT> index = var_index.value();\n+    TNode<OrderedHashMap> table = var_table.value();\n     std::tie(table, index) =\n         Transition<OrderedHashMap>(table, index, [](Node*, Node*) {});\n \n     // Read the next entry from the {table}, skipping holes.\n-    Node* entry_key;\n-    Node* entry_start_position;\n+    TNode<Object> entry_key;\n+    TNode<IntPtrT> entry_start_position;\n     std::tie(entry_key, entry_start_position, index) =\n         NextSkipHoles<OrderedHashMap>(table, index, &done_loop);\n \n@@ -1584,8 +1598,8 @@ TF_BUILTIN(MapPrototypeForEach, CollectionsBuiltinsAssembler) {\n            entry_value, entry_key, receiver);\n \n     // Continue with the next entry.\n-    var_index.Bind(index);\n-    var_table.Bind(table);\n+    var_index = index;\n+    var_table = table;\n     Goto(&loop);\n   }\n \n@@ -1644,14 +1658,14 @@ TF_BUILTIN(MapIteratorPrototypeNext, CollectionsBuiltinsAssembler) {\n       return_end(this, Label::kDeferred);\n \n   // Transition the {receiver} table if necessary.\n-  Node* table;\n-  Node* index;\n+  TNode<OrderedHashMap> table;\n+  TNode<IntPtrT> index;\n   std::tie(table, index) =\n-      TransitionAndUpdate<JSMapIterator, OrderedHashMap>(receiver);\n+      TransitionAndUpdate<JSMapIterator, OrderedHashMap>(CAST(receiver));\n \n   // Read the next entry from the {table}, skipping holes.\n-  Node* entry_key;\n-  Node* entry_start_position;\n+  TNode<Object> entry_key;\n+  TNode<IntPtrT> entry_start_position;\n   std::tie(entry_key, entry_start_position, index) =\n       NextSkipHoles<OrderedHashMap>(table, index, &return_end);\n   StoreObjectFieldNoWriteBarrier(receiver, JSMapIterator::kIndexOffset,\n@@ -1783,17 +1797,17 @@ TF_BUILTIN(SetPrototypeForEach, CollectionsBuiltinsAssembler) {\n   GotoIf(TaggedIsSmi(callback), &callback_not_callable);\n   GotoIfNot(IsCallable(callback), &callback_not_callable);\n \n-  VARIABLE(var_index, MachineType::PointerRepresentation(), IntPtrConstant(0));\n-  VARIABLE(var_table, MachineRepresentation::kTagged,\n-           LoadObjectField(receiver, JSSet::kTableOffset));\n+  TVARIABLE(IntPtrT, var_index, IntPtrConstant(0));\n+  TVARIABLE(OrderedHashSet, var_table,\n+            CAST(LoadObjectField(receiver, JSSet::kTableOffset)));\n   Label loop(this, {&var_index, &var_table}), done_loop(this);\n   Goto(&loop);\n   BIND(&loop);\n   {\n     // Transition {table} and {index} if there was any modification to\n     // the {receiver} while we're iterating.\n-    Node* index = var_index.value();\n-    Node* table = var_table.value();\n+    TNode<IntPtrT> index = var_index.value();\n+    TNode<OrderedHashSet> table = var_table.value();\n     std::tie(table, index) =\n         Transition<OrderedHashSet>(table, index, [](Node*, Node*) {});\n \n@@ -1808,8 +1822,8 @@ TF_BUILTIN(SetPrototypeForEach, CollectionsBuiltinsAssembler) {\n            entry_key, receiver);\n \n     // Continue with the next entry.\n-    var_index.Bind(index);\n-    var_table.Bind(table);\n+    var_index = index;\n+    var_table = table;\n     Goto(&loop);\n   }\n \n@@ -1858,10 +1872,10 @@ TF_BUILTIN(SetIteratorPrototypeNext, CollectionsBuiltinsAssembler) {\n       return_end(this, Label::kDeferred);\n \n   // Transition the {receiver} table if necessary.\n-  Node* table;\n-  Node* index;\n+  TNode<OrderedHashSet> table;\n+  TNode<IntPtrT> index;\n   std::tie(table, index) =\n-      TransitionAndUpdate<JSSetIterator, OrderedHashSet>(receiver);\n+      TransitionAndUpdate<JSSetIterator, OrderedHashSet>(CAST(receiver));\n \n   // Read the next entry from the {table}, skipping holes.\n   Node* entry_key;\n@@ -1968,7 +1982,7 @@ class WeakCollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n       : BaseCollectionsAssembler(state) {}\n \n  protected:\n-  void AddEntry(TNode<HeapObject> table, TNode<IntPtrT> key_index,\n+  void AddEntry(TNode<EphemeronHashTable> table, TNode<IntPtrT> key_index,\n                 TNode<Object> key, TNode<Object> value,\n                 TNode<IntPtrT> number_of_elements);\n \n@@ -2007,12 +2021,14 @@ class WeakCollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n                                            TNode<IntPtrT> number_of_deleted);\n   TNode<IntPtrT> KeyIndexFromEntry(TNode<IntPtrT> entry);\n \n-  TNode<IntPtrT> LoadNumberOfElements(TNode<HeapObject> table, int offset);\n-  TNode<IntPtrT> LoadNumberOfDeleted(TNode<HeapObject> table, int offset = 0);\n-  TNode<HeapObject> LoadTable(SloppyTNode<HeapObject> collection);\n-  TNode<IntPtrT> LoadTableCapacity(TNode<HeapObject> table);\n+  TNode<IntPtrT> LoadNumberOfElements(TNode<EphemeronHashTable> table,\n+                                      int offset);\n+  TNode<IntPtrT> LoadNumberOfDeleted(TNode<EphemeronHashTable> table,\n+                                     int offset = 0);\n+  TNode<EphemeronHashTable> LoadTable(TNode<JSWeakCollection> collection);\n+  TNode<IntPtrT> LoadTableCapacity(TNode<EphemeronHashTable> table);\n \n-  void RemoveEntry(TNode<HeapObject> table, TNode<IntPtrT> key_index,\n+  void RemoveEntry(TNode<EphemeronHashTable> table, TNode<IntPtrT> key_index,\n                    TNode<IntPtrT> number_of_elements);\n   TNode<BoolT> ShouldRehash(TNode<IntPtrT> number_of_elements,\n                             TNode<IntPtrT> number_of_deleted);\n@@ -2022,8 +2038,8 @@ class WeakCollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n };\n \n void WeakCollectionsBuiltinsAssembler::AddEntry(\n-    TNode<HeapObject> table, TNode<IntPtrT> key_index, TNode<Object> key,\n-    TNode<Object> value, TNode<IntPtrT> number_of_elements) {\n+    TNode<EphemeronHashTable> table, TNode<IntPtrT> key_index,\n+    TNode<Object> key, TNode<Object> value, TNode<IntPtrT> number_of_elements) {\n   // See EphemeronHashTable::AddEntry().\n   TNode<IntPtrT> value_index = ValueIndexFromKeyIndex(key_index);\n   StoreFixedArrayElement(table, key_index, key);\n@@ -2044,8 +2060,8 @@ TNode<Object> WeakCollectionsBuiltinsAssembler::AllocateTable(\n \n   // See HashTable::NewInternal().\n   TNode<IntPtrT> length = KeyIndexFromEntry(capacity);\n-  TNode<FixedArray> table =\n-      AllocateFixedArray(HOLEY_ELEMENTS, length, kAllowLargeObjectAllocation);\n+  TNode<FixedArray> table = CAST(\n+      AllocateFixedArray(HOLEY_ELEMENTS, length, kAllowLargeObjectAllocation));\n \n   Heap::RootListIndex map_root_index = static_cast<Heap::RootListIndex>(\n       EphemeronHashTableShape::GetMapRootIndex());\n@@ -2097,7 +2113,7 @@ TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::FindKeyIndex(\n   TNode<IntPtrT> key_index;\n   {\n     key_index = KeyIndexFromEntry(var_entry.value());\n-    TNode<Object> entry_key = LoadFixedArrayElement(table, key_index);\n+    TNode<Object> entry_key = LoadFixedArrayElement(CAST(table), key_index);\n \n     key_compare(entry_key, &if_found);\n \n@@ -2146,26 +2162,26 @@ TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::KeyIndexFromEntry(\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadNumberOfElements(\n-    TNode<HeapObject> table, int offset) {\n+    TNode<EphemeronHashTable> table, int offset) {\n   TNode<IntPtrT> number_of_elements = SmiUntag(CAST(LoadFixedArrayElement(\n       table, EphemeronHashTable::kNumberOfElementsIndex)));\n   return IntPtrAdd(number_of_elements, IntPtrConstant(offset));\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadNumberOfDeleted(\n-    TNode<HeapObject> table, int offset) {\n+    TNode<EphemeronHashTable> table, int offset) {\n   TNode<IntPtrT> number_of_deleted = SmiUntag(CAST(LoadFixedArrayElement(\n       table, EphemeronHashTable::kNumberOfDeletedElementsIndex)));\n   return IntPtrAdd(number_of_deleted, IntPtrConstant(offset));\n }\n \n-TNode<HeapObject> WeakCollectionsBuiltinsAssembler::LoadTable(\n-    SloppyTNode<HeapObject> collection) {\n+TNode<EphemeronHashTable> WeakCollectionsBuiltinsAssembler::LoadTable(\n+    TNode<JSWeakCollection> collection) {\n   return CAST(LoadObjectField(collection, JSWeakCollection::kTableOffset));\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadTableCapacity(\n-    TNode<HeapObject> table) {\n+    TNode<EphemeronHashTable> table) {\n   return SmiUntag(\n       CAST(LoadFixedArrayElement(table, EphemeronHashTable::kCapacityIndex)));\n }\n@@ -2189,7 +2205,7 @@ TNode<Word32T> WeakCollectionsBuiltinsAssembler::InsufficientCapacityToAdd(\n }\n \n void WeakCollectionsBuiltinsAssembler::RemoveEntry(\n-    TNode<HeapObject> table, TNode<IntPtrT> key_index,\n+    TNode<EphemeronHashTable> table, TNode<IntPtrT> key_index,\n     TNode<IntPtrT> number_of_elements) {\n   // See EphemeronHashTable::RemoveEntry().\n   TNode<IntPtrT> value_index = ValueIndexFromKeyIndex(key_index);\n@@ -2256,7 +2272,7 @@ TF_BUILTIN(WeakSetConstructor, WeakCollectionsBuiltinsAssembler) {\n }\n \n TF_BUILTIN(WeakMapLookupHashIndex, WeakCollectionsBuiltinsAssembler) {\n-  TNode<HeapObject> table = CAST(Parameter(Descriptor::kTable));\n+  TNode<EphemeronHashTable> table = CAST(Parameter(Descriptor::kTable));\n   TNode<Object> key = CAST(Parameter(Descriptor::kKey));\n \n   Label if_not_found(this);\n@@ -2283,9 +2299,9 @@ TF_BUILTIN(WeakMapGet, WeakCollectionsBuiltinsAssembler) {\n   ThrowIfNotInstanceType(context, receiver, JS_WEAK_MAP_TYPE,\n                          \"WeakMap.prototype.get\");\n \n-  Node* const table = LoadTable(receiver);\n-  Node* const index =\n-      CallBuiltin(Builtins::kWeakMapLookupHashIndex, context, table, key);\n+  TNode<EphemeronHashTable> const table = LoadTable(CAST(receiver));\n+  TNode<Smi> const index =\n+      CAST(CallBuiltin(Builtins::kWeakMapLookupHashIndex, context, table, key));\n \n   GotoIf(WordEqual(index, SmiConstant(-1)), &return_undefined);\n \n@@ -2305,7 +2321,7 @@ TF_BUILTIN(WeakMapHas, WeakCollectionsBuiltinsAssembler) {\n   ThrowIfNotInstanceType(context, receiver, JS_WEAK_MAP_TYPE,\n                          \"WeakMap.prototype.has\");\n \n-  Node* const table = LoadTable(receiver);\n+  TNode<EphemeronHashTable> const table = LoadTable(CAST(receiver));\n   Node* const index =\n       CallBuiltin(Builtins::kWeakMapLookupHashIndex, context, table, key);\n \n@@ -2321,15 +2337,15 @@ TF_BUILTIN(WeakMapHas, WeakCollectionsBuiltinsAssembler) {\n // (EphemeronHashTable) of a WeakMap or WeakSet.\n TF_BUILTIN(WeakCollectionDelete, WeakCollectionsBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n-  TNode<HeapObject> collection = CAST(Parameter(Descriptor::kCollection));\n+  TNode<JSWeakCollection> collection = CAST(Parameter(Descriptor::kCollection));\n   TNode<Object> key = CAST(Parameter(Descriptor::kKey));\n \n   Label call_runtime(this), if_not_found(this);\n \n   GotoIfNotJSReceiver(key, &if_not_found);\n \n   TNode<IntPtrT> hash = LoadJSReceiverIdentityHash(key, &if_not_found);\n-  TNode<HeapObject> table = LoadTable(collection);\n+  TNode<EphemeronHashTable> table = LoadTable(collection);\n   TNode<IntPtrT> capacity = LoadTableCapacity(table);\n   TNode<IntPtrT> key_index =\n       FindKeyIndexForKey(table, key, hash, EntryMask(capacity), &if_not_found);\n@@ -2351,15 +2367,15 @@ TF_BUILTIN(WeakCollectionDelete, WeakCollectionsBuiltinsAssembler) {\n // of a WeakMap or WeakSet.\n TF_BUILTIN(WeakCollectionSet, WeakCollectionsBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n-  TNode<HeapObject> collection = CAST(Parameter(Descriptor::kCollection));\n+  TNode<JSWeakCollection> collection = CAST(Parameter(Descriptor::kCollection));\n   TNode<JSReceiver> key = CAST(Parameter(Descriptor::kKey));\n   TNode<Object> value = CAST(Parameter(Descriptor::kValue));\n \n   CSA_ASSERT(this, IsJSReceiver(key));\n \n   Label call_runtime(this), if_no_hash(this), if_not_found(this);\n \n-  TNode<HeapObject> table = LoadTable(collection);\n+  TNode<EphemeronHashTable> table = LoadTable(collection);\n   TNode<IntPtrT> capacity = LoadTableCapacity(table);\n   TNode<IntPtrT> entry_mask = EntryMask(capacity);\n \n@@ -2469,7 +2485,7 @@ TF_BUILTIN(WeakSetHas, WeakCollectionsBuiltinsAssembler) {\n   ThrowIfNotInstanceType(context, receiver, JS_WEAK_SET_TYPE,\n                          \"WeakSet.prototype.has\");\n \n-  Node* const table = LoadTable(receiver);\n+  Node* const table = LoadTable(CAST(receiver));\n   Node* const index =\n       CallBuiltin(Builtins::kWeakMapLookupHashIndex, context, table, key);\n "
        },
        {
            "sha": "f9b1ebc0ac15cfa40a5d2a4a4a05f754c6160f67",
            "filename": "deps/v8/src/builtins/builtins-collections.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects/js-collection-inl.h\""
        },
        {
            "sha": "e9f252cb6a6bd842a4ad292ece2c854fc281247c",
            "filename": "deps/v8/src/builtins/builtins-console.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,10 +2,9 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/api-inl.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n-\n-#include \"src/api.h\"\n #include \"src/debug/interface-types.h\"\n #include \"src/objects-inl.h\"\n "
        },
        {
            "sha": "8e54c4c36961a7b6b3280b89731f570b00211b36",
            "filename": "deps/v8/src/builtins/builtins-constructor-gen.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -233,7 +233,8 @@ Node* ConstructorBuiltinsAssembler::EmitFastNewFunctionContext(\n   Node* size = GetFixedArrayAllocationSize(length, PACKED_ELEMENTS, mode);\n \n   // Create a new closure from the given function info in new space\n-  Node* function_context = AllocateInNewSpace(size);\n+  TNode<Context> function_context =\n+      UncheckedCast<Context>(AllocateInNewSpace(size));\n \n   Heap::RootListIndex context_type;\n   switch (scope_type) {\n@@ -730,6 +731,12 @@ TF_BUILTIN(NumberConstructor, ConstructorBuiltinsAssembler) {\n   }\n }\n \n+TF_BUILTIN(GenericConstructorLazyDeoptContinuation,\n+           ConstructorBuiltinsAssembler) {\n+  Node* result = Parameter(Descriptor::kResult);\n+  Return(result);\n+}\n+\n // https://tc39.github.io/ecma262/#sec-string-constructor\n TF_BUILTIN(StringConstructor, ConstructorBuiltinsAssembler) {\n   Node* context = Parameter(Descriptor::kContext);"
        },
        {
            "sha": "0978bf324563263019d3b6d5f22c54b5443e3ce7",
            "filename": "deps/v8/src/builtins/builtins-constructor.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,6 +8,7 @@\n #include \"src/contexts.h\"\n #include \"src/objects.h\"\n #include \"src/objects/dictionary.h\"\n+#include \"src/objects/js-array.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "7bdc2759c4ed5f1c84249f1f7e63b53e97359ef4",
            "filename": "deps/v8/src/builtins/builtins-conversion-gen.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -142,6 +142,14 @@ TF_BUILTIN(ToNumber, CodeStubAssembler) {\n   Return(ToNumber(context, input));\n }\n \n+// Like ToNumber, but also converts BigInts.\n+TF_BUILTIN(ToNumberConvertBigInt, CodeStubAssembler) {\n+  Node* context = Parameter(Descriptor::kContext);\n+  Node* input = Parameter(Descriptor::kArgument);\n+\n+  Return(ToNumber(context, input, BigIntHandling::kConvertToNumber));\n+}\n+\n // ES section #sec-tostring-applied-to-the-number-type\n TF_BUILTIN(NumberToString, CodeStubAssembler) {\n   TNode<Number> input = CAST(Parameter(Descriptor::kArgument));\n@@ -368,7 +376,7 @@ TF_BUILTIN(ToObject, CodeStubAssembler) {\n   Goto(&if_wrapjsvalue);\n \n   BIND(&if_wrapjsvalue);\n-  Node* native_context = LoadNativeContext(context);\n+  TNode<Context> native_context = LoadNativeContext(context);\n   Node* constructor = LoadFixedArrayElement(\n       native_context, constructor_function_index_var.value());\n   Node* initial_map ="
        },
        {
            "sha": "72ea68598257d228da1bea0772bf454c4a3bcfa3",
            "filename": "deps/v8/src/builtins/builtins-dataview.cc",
            "status": "modified",
            "additions": 69,
            "deletions": 68,
            "changes": 137,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,13 +2,14 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/conversions.h\"\n #include \"src/counters.h\"\n #include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/js-array-buffer-inl.h\"\n \n namespace v8 {\n namespace internal {\n@@ -24,84 +25,84 @@ BUILTIN(DataViewConstructor) {\n         isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n                               isolate->factory()->NewStringFromAsciiChecked(\n                                   \"DataView\")));\n-  } else {  // [[Construct]]\n-    Handle<JSFunction> target = args.target();\n-    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n-    Handle<Object> buffer = args.atOrUndefined(isolate, 1);\n-    Handle<Object> byte_offset = args.atOrUndefined(isolate, 2);\n-    Handle<Object> byte_length = args.atOrUndefined(isolate, 3);\n-\n-    // 2. If Type(buffer) is not Object, throw a TypeError exception.\n-    // 3. If buffer does not have an [[ArrayBufferData]] internal slot, throw a\n-    //    TypeError exception.\n-    if (!buffer->IsJSArrayBuffer()) {\n-      THROW_NEW_ERROR_RETURN_FAILURE(\n-          isolate, NewTypeError(MessageTemplate::kDataViewNotArrayBuffer));\n-    }\n-    Handle<JSArrayBuffer> array_buffer = Handle<JSArrayBuffer>::cast(buffer);\n+  }\n+  // [[Construct]]\n+  Handle<JSFunction> target = args.target();\n+  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+  Handle<Object> buffer = args.atOrUndefined(isolate, 1);\n+  Handle<Object> byte_offset = args.atOrUndefined(isolate, 2);\n+  Handle<Object> byte_length = args.atOrUndefined(isolate, 3);\n+\n+  // 2. If Type(buffer) is not Object, throw a TypeError exception.\n+  // 3. If buffer does not have an [[ArrayBufferData]] internal slot, throw a\n+  //    TypeError exception.\n+  if (!buffer->IsJSArrayBuffer()) {\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewTypeError(MessageTemplate::kDataViewNotArrayBuffer));\n+  }\n+  Handle<JSArrayBuffer> array_buffer = Handle<JSArrayBuffer>::cast(buffer);\n \n-    // 4. Let offset be ? ToIndex(byteOffset).\n-    Handle<Object> offset;\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-        isolate, offset,\n-        Object::ToIndex(isolate, byte_offset, MessageTemplate::kInvalidOffset));\n+  // 4. Let offset be ? ToIndex(byteOffset).\n+  Handle<Object> offset;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, offset,\n+      Object::ToIndex(isolate, byte_offset, MessageTemplate::kInvalidOffset));\n \n-    // 5. If IsDetachedBuffer(buffer) is true, throw a TypeError exception.\n-    //    We currently violate the specification at this point. TODO: Fix that.\n+  // 5. If IsDetachedBuffer(buffer) is true, throw a TypeError exception.\n+  //    We currently violate the specification at this point. TODO: Fix that.\n \n-    // 6. Let bufferByteLength be the value of buffer's\n-    // [[ArrayBufferByteLength]] internal slot.\n-    double const buffer_byte_length = array_buffer->byte_length()->Number();\n+  // 6. Let bufferByteLength be the value of buffer's\n+  // [[ArrayBufferByteLength]] internal slot.\n+  double const buffer_byte_length = array_buffer->byte_length()->Number();\n \n-    // 7. If offset > bufferByteLength, throw a RangeError exception.\n-    if (offset->Number() > buffer_byte_length) {\n-      THROW_NEW_ERROR_RETURN_FAILURE(\n-          isolate, NewRangeError(MessageTemplate::kInvalidOffset, offset));\n-    }\n+  // 7. If offset > bufferByteLength, throw a RangeError exception.\n+  if (offset->Number() > buffer_byte_length) {\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewRangeError(MessageTemplate::kInvalidOffset, offset));\n+  }\n \n-    Handle<Object> view_byte_length;\n-    if (byte_length->IsUndefined(isolate)) {\n-      // 8. If byteLength is either not present or undefined, then\n-      //       a. Let viewByteLength be bufferByteLength - offset.\n-      view_byte_length =\n-          isolate->factory()->NewNumber(buffer_byte_length - offset->Number());\n-    } else {\n-      // 9. Else,\n-      //       a. Let viewByteLength be ? ToIndex(byteLength).\n-      //       b. If offset+viewByteLength > bufferByteLength, throw a\n-      //          RangeError exception.\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-          isolate, view_byte_length,\n-          Object::ToIndex(isolate, byte_length,\n-                          MessageTemplate::kInvalidDataViewLength));\n-      if (offset->Number() + view_byte_length->Number() > buffer_byte_length) {\n-        THROW_NEW_ERROR_RETURN_FAILURE(\n-            isolate, NewRangeError(MessageTemplate::kInvalidDataViewLength));\n-      }\n+  Handle<Object> view_byte_length;\n+  if (byte_length->IsUndefined(isolate)) {\n+    // 8. If byteLength is either not present or undefined, then\n+    //       a. Let viewByteLength be bufferByteLength - offset.\n+    view_byte_length =\n+        isolate->factory()->NewNumber(buffer_byte_length - offset->Number());\n+  } else {\n+    // 9. Else,\n+    //       a. Let viewByteLength be ? ToIndex(byteLength).\n+    //       b. If offset+viewByteLength > bufferByteLength, throw a\n+    //          RangeError exception.\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+        isolate, view_byte_length,\n+        Object::ToIndex(isolate, byte_length,\n+                        MessageTemplate::kInvalidDataViewLength));\n+    if (offset->Number() + view_byte_length->Number() > buffer_byte_length) {\n+      THROW_NEW_ERROR_RETURN_FAILURE(\n+          isolate, NewRangeError(MessageTemplate::kInvalidDataViewLength));\n     }\n+  }\n \n-    // 10. Let O be ? OrdinaryCreateFromConstructor(NewTarget,\n-    //     \"%DataViewPrototype%\", [[DataView]], [[ViewedArrayBuffer]],\n-    //     [[ByteLength]], [[ByteOffset]]).\n-    Handle<JSObject> result;\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n-                                       JSObject::New(target, new_target));\n-    for (int i = 0; i < ArrayBufferView::kEmbedderFieldCount; ++i) {\n-      Handle<JSDataView>::cast(result)->SetEmbedderField(i, Smi::kZero);\n-    }\n+  // 10. Let O be ? OrdinaryCreateFromConstructor(NewTarget,\n+  //     \"%DataViewPrototype%\", [[DataView]], [[ViewedArrayBuffer]],\n+  //     [[ByteLength]], [[ByteOffset]]).\n+  Handle<JSObject> result;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n+                                     JSObject::New(target, new_target));\n+  for (int i = 0; i < ArrayBufferView::kEmbedderFieldCount; ++i) {\n+    Handle<JSDataView>::cast(result)->SetEmbedderField(i, Smi::kZero);\n+  }\n \n-    // 11. Set O's [[ViewedArrayBuffer]] internal slot to buffer.\n-    Handle<JSDataView>::cast(result)->set_buffer(*array_buffer);\n+  // 11. Set O's [[ViewedArrayBuffer]] internal slot to buffer.\n+  Handle<JSDataView>::cast(result)->set_buffer(*array_buffer);\n \n-    // 12. Set O's [[ByteLength]] internal slot to viewByteLength.\n-    Handle<JSDataView>::cast(result)->set_byte_length(*view_byte_length);\n+  // 12. Set O's [[ByteLength]] internal slot to viewByteLength.\n+  Handle<JSDataView>::cast(result)->set_byte_length(*view_byte_length);\n \n-    // 13. Set O's [[ByteOffset]] internal slot to offset.\n-    Handle<JSDataView>::cast(result)->set_byte_offset(*offset);\n+  // 13. Set O's [[ByteOffset]] internal slot to offset.\n+  Handle<JSDataView>::cast(result)->set_byte_offset(*offset);\n \n-    // 14. Return O.\n-    return *result;\n-  }\n+  // 14. Return O.\n+  return *result;\n }\n \n }  // namespace internal"
        },
        {
            "sha": "569a5807e22c2a8bc91177196b8844db5d3c3952",
            "filename": "deps/v8/src/builtins/builtins-date.cc",
            "status": "modified",
            "additions": 66,
            "deletions": 68,
            "changes": 134,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-factory.h\"\n #include \"src/code-stub-assembler.h\"\n@@ -195,86 +195,84 @@ BUILTIN(DateConstructor) {\n     ToDateString(time_val, ArrayVector(buffer), isolate->date_cache());\n     RETURN_RESULT_OR_FAILURE(\n         isolate, isolate->factory()->NewStringFromUtf8(CStrVector(buffer)));\n-  } else {\n-    int const argc = args.length() - 1;\n-    Handle<JSFunction> target = args.target();\n-    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n-    double time_val;\n-    if (argc == 0) {\n-      time_val = JSDate::CurrentTimeValue(isolate);\n-    } else if (argc == 1) {\n-      Handle<Object> value = args.at(1);\n-      if (value->IsJSDate()) {\n-        time_val = Handle<JSDate>::cast(value)->value()->Number();\n+  }\n+  // [Construct]\n+  int const argc = args.length() - 1;\n+  Handle<JSFunction> target = args.target();\n+  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+  double time_val;\n+  if (argc == 0) {\n+    time_val = JSDate::CurrentTimeValue(isolate);\n+  } else if (argc == 1) {\n+    Handle<Object> value = args.at(1);\n+    if (value->IsJSDate()) {\n+      time_val = Handle<JSDate>::cast(value)->value()->Number();\n+    } else {\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, value,\n+                                         Object::ToPrimitive(value));\n+      if (value->IsString()) {\n+        time_val = ParseDateTimeString(isolate, Handle<String>::cast(value));\n       } else {\n         ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, value,\n-                                           Object::ToPrimitive(value));\n-        if (value->IsString()) {\n-          time_val = ParseDateTimeString(isolate, Handle<String>::cast(value));\n-        } else {\n-          ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, value,\n-                                             Object::ToNumber(isolate, value));\n-          time_val = value->Number();\n-        }\n+                                           Object::ToNumber(isolate, value));\n+        time_val = value->Number();\n       }\n-    } else {\n-      Handle<Object> year_object;\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, year_object,\n-                                         Object::ToNumber(isolate, args.at(1)));\n-      Handle<Object> month_object;\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, month_object,\n-                                         Object::ToNumber(isolate, args.at(2)));\n-      double year = year_object->Number();\n-      double month = month_object->Number();\n-      double date = 1.0, hours = 0.0, minutes = 0.0, seconds = 0.0, ms = 0.0;\n-      if (argc >= 3) {\n-        Handle<Object> date_object;\n+    }\n+  } else {\n+    Handle<Object> year_object;\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, year_object,\n+                                       Object::ToNumber(isolate, args.at(1)));\n+    Handle<Object> month_object;\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, month_object,\n+                                       Object::ToNumber(isolate, args.at(2)));\n+    double year = year_object->Number();\n+    double month = month_object->Number();\n+    double date = 1.0, hours = 0.0, minutes = 0.0, seconds = 0.0, ms = 0.0;\n+    if (argc >= 3) {\n+      Handle<Object> date_object;\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, date_object,\n+                                         Object::ToNumber(isolate, args.at(3)));\n+      date = date_object->Number();\n+      if (argc >= 4) {\n+        Handle<Object> hours_object;\n         ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-            isolate, date_object, Object::ToNumber(isolate, args.at(3)));\n-        date = date_object->Number();\n-        if (argc >= 4) {\n-          Handle<Object> hours_object;\n+            isolate, hours_object, Object::ToNumber(isolate, args.at(4)));\n+        hours = hours_object->Number();\n+        if (argc >= 5) {\n+          Handle<Object> minutes_object;\n           ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-              isolate, hours_object, Object::ToNumber(isolate, args.at(4)));\n-          hours = hours_object->Number();\n-          if (argc >= 5) {\n-            Handle<Object> minutes_object;\n+              isolate, minutes_object, Object::ToNumber(isolate, args.at(5)));\n+          minutes = minutes_object->Number();\n+          if (argc >= 6) {\n+            Handle<Object> seconds_object;\n             ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-                isolate, minutes_object, Object::ToNumber(isolate, args.at(5)));\n-            minutes = minutes_object->Number();\n-            if (argc >= 6) {\n-              Handle<Object> seconds_object;\n+                isolate, seconds_object, Object::ToNumber(isolate, args.at(6)));\n+            seconds = seconds_object->Number();\n+            if (argc >= 7) {\n+              Handle<Object> ms_object;\n               ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-                  isolate, seconds_object,\n-                  Object::ToNumber(isolate, args.at(6)));\n-              seconds = seconds_object->Number();\n-              if (argc >= 7) {\n-                Handle<Object> ms_object;\n-                ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-                    isolate, ms_object, Object::ToNumber(isolate, args.at(7)));\n-                ms = ms_object->Number();\n-              }\n+                  isolate, ms_object, Object::ToNumber(isolate, args.at(7)));\n+              ms = ms_object->Number();\n             }\n           }\n         }\n       }\n-      if (!std::isnan(year)) {\n-        double const y = DoubleToInteger(year);\n-        if (0.0 <= y && y <= 99) year = 1900 + y;\n-      }\n-      double const day = MakeDay(year, month, date);\n-      double const time = MakeTime(hours, minutes, seconds, ms);\n-      time_val = MakeDate(day, time);\n-      if (time_val >= -DateCache::kMaxTimeBeforeUTCInMs &&\n-          time_val <= DateCache::kMaxTimeBeforeUTCInMs) {\n-        time_val = isolate->date_cache()->ToUTC(static_cast<int64_t>(time_val));\n-      } else {\n-        time_val = std::numeric_limits<double>::quiet_NaN();\n-      }\n     }\n-    RETURN_RESULT_OR_FAILURE(isolate,\n-                             JSDate::New(target, new_target, time_val));\n+    if (!std::isnan(year)) {\n+      double const y = DoubleToInteger(year);\n+      if (0.0 <= y && y <= 99) year = 1900 + y;\n+    }\n+    double const day = MakeDay(year, month, date);\n+    double const time = MakeTime(hours, minutes, seconds, ms);\n+    time_val = MakeDate(day, time);\n+    if (time_val >= -DateCache::kMaxTimeBeforeUTCInMs &&\n+        time_val <= DateCache::kMaxTimeBeforeUTCInMs) {\n+      time_val = isolate->date_cache()->ToUTC(static_cast<int64_t>(time_val));\n+    } else {\n+      time_val = std::numeric_limits<double>::quiet_NaN();\n+    }\n   }\n+  RETURN_RESULT_OR_FAILURE(isolate, JSDate::New(target, new_target, time_val));\n }\n \n // ES6 section 20.3.3.1 Date.now ( )"
        },
        {
            "sha": "62765b802fd17e899f103efabfb58dcec02df15b",
            "filename": "deps/v8/src/builtins/builtins-definitions.h",
            "status": "modified",
            "additions": 91,
            "deletions": 29,
            "changes": 120,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -5,6 +5,8 @@\n #ifndef V8_BUILTINS_BUILTINS_DEFINITIONS_H_\n #define V8_BUILTINS_BUILTINS_DEFINITIONS_H_\n \n+#include \"src/interpreter/bytecodes.h\"\n+\n // include generated header\n #include \"torque-generated/builtin-definitions-from-dsl.h\"\n \n@@ -23,6 +25,8 @@ namespace internal {\n //      Args: name, interface descriptor, return_size\n // TFH: Handlers in Turbofan, with CodeStub linkage.\n //      Args: name, interface descriptor\n+// BCH: Bytecode Handlers, with bytecode dispatch linkage.\n+//      Args: name\n // ASM: Builtin in platform-dependent assembly.\n //      Args: name\n \n@@ -186,6 +190,7 @@ namespace internal {\n   TFC(NonNumberToNumber, TypeConversion, 1)                                    \\\n   TFC(NonNumberToNumeric, TypeConversion, 1)                                   \\\n   TFC(ToNumber, TypeConversion, 1)                                             \\\n+  TFC(ToNumberConvertBigInt, TypeConversion, 1)                                \\\n   TFC(ToNumeric, TypeConversion, 1)                                            \\\n   TFC(NumberToString, TypeConversion, 1)                                       \\\n   TFC(ToString, TypeConversion, 1)                                             \\\n@@ -219,7 +224,7 @@ namespace internal {\n   TFC(RunMicrotasks, RunMicrotasks, 1)                                         \\\n                                                                                \\\n   /* Object property helpers */                                                \\\n-  TFS(HasProperty, kKey, kObject)                                              \\\n+  TFS(HasProperty, kObject, kKey)                                              \\\n   TFS(DeleteProperty, kObject, kKey, kLanguageMode)                            \\\n                                                                                \\\n   /* Abort */                                                                  \\\n@@ -282,6 +287,8 @@ namespace internal {\n   CPP(ArrayConcat)                                                             \\\n   /* ES6 #sec-array.isarray */                                                 \\\n   TFJ(ArrayIsArray, 1, kReceiver, kArg)                                        \\\n+  /* ES6 #sec-array.prototype.fill */                                          \\\n+  CPP(ArrayPrototypeFill)                                                      \\\n   /* ES6 #sec-array.from */                                                    \\\n   TFJ(ArrayFrom, SharedFunctionInfo::kDontAdaptArgumentsSentinel)              \\\n   /* ES6 #sec-array.of */                                                      \\\n@@ -637,6 +644,7 @@ namespace internal {\n   TFH(LoadGlobalICInsideTypeof, LoadGlobalWithVector)                          \\\n   TFH(LoadGlobalICTrampoline, LoadGlobal)                                      \\\n   TFH(LoadGlobalICInsideTypeofTrampoline, LoadGlobal)                          \\\n+  TFH(CloneObjectIC, CloneObjectWithVector)                                    \\\n                                                                                \\\n   /* Map */                                                                    \\\n   TFS(FindOrderedHashMapEntry, kTable, kKey)                                   \\\n@@ -1129,7 +1137,7 @@ namespace internal {\n   /* ES #sec-typedarray-constructors */                                        \\\n   TFS(CreateTypedArray, kTarget, kNewTarget, kArg1, kArg2, kArg3)              \\\n   TFJ(TypedArrayBaseConstructor, 0, kReceiver)                                 \\\n-  TFJ(TypedArrayConstructorLazyDeoptContinuation, 1, kReceiver, kResult)       \\\n+  TFJ(GenericConstructorLazyDeoptContinuation, 1, kReceiver, kResult)          \\\n   TFJ(TypedArrayConstructor, SharedFunctionInfo::kDontAdaptArgumentsSentinel)  \\\n   CPP(TypedArrayPrototypeBuffer)                                               \\\n   /* ES6 #sec-get-%typedarray%.prototype.bytelength */                         \\\n@@ -1207,6 +1215,7 @@ namespace internal {\n   TFC(WasmToNumber, TypeConversion, 1)                                         \\\n   TFS(ThrowWasmTrapUnreachable)                                                \\\n   TFS(ThrowWasmTrapMemOutOfBounds)                                             \\\n+  TFS(ThrowWasmTrapUnalignedAccess)                                            \\\n   TFS(ThrowWasmTrapDivByZero)                                                  \\\n   TFS(ThrowWasmTrapDivUnrepresentable)                                         \\\n   TFS(ThrowWasmTrapRemByZero)                                                  \\\n@@ -1308,17 +1317,17 @@ namespace internal {\n   ASM(CallApiGetter)                                                           \\\n   ASM(DoubleToI)                                                               \\\n   TFC(GetProperty, GetProperty, 1)                                             \\\n+  TFS(SetProperty, kReceiver, kKey, kValue)                                    \\\n   ASM(MathPowInternal)                                                         \\\n                                                                                \\\n   /* Trace */                                                                  \\\n   CPP(IsTraceCategoryEnabled)                                                  \\\n   CPP(Trace)\n \n #ifdef V8_INTL_SUPPORT\n-#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, ASM)                \\\n-  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)                 \\\n-  BUILTIN_LIST_FROM_DSL(CPP, API, TFJ, TFC, TFS, TFH, ASM)             \\\n-                                                                       \\\n+#define BUILTIN_LIST_INTL(CPP, TFJ, TFS)                               \\\n+  /* ecma402 #sec-intl.collator */                                     \\\n+  CPP(CollatorConstructor)                                             \\\n   TFS(StringToLowerCaseIntl, kString)                                  \\\n   /* ES #sec-string.prototype.tolowercase */                           \\\n   TFJ(StringPrototypeToLowerCaseIntl, 0, kReceiver)                    \\\n@@ -1331,6 +1340,16 @@ namespace internal {\n   /* ecma402 #sec-intl.datetimeformat.prototype.formattoparts */       \\\n   CPP(DateTimeFormatPrototypeFormatToParts)                            \\\n   /* ecma402 #new proposal */                                          \\\n+  /* ecma402 #sec-intl-listformat-constructor */                       \\\n+  CPP(ListFormatConstructor)                                           \\\n+  /* ecma402 #sec-intl.listformat.prototype.resolvedoptions */         \\\n+  CPP(ListFormatPrototypeResolvedOptions)                              \\\n+  /* ecma402 #sec-intl-list-format.prototype.format */                 \\\n+  TFJ(ListFormatPrototypeFormat,                                       \\\n+      SharedFunctionInfo::kDontAdaptArgumentsSentinel)                 \\\n+  /* ecma402 #sec-intl-list-format.prototype.formattoparts */          \\\n+  TFJ(ListFormatPrototypeFormatToParts,                                \\\n+      SharedFunctionInfo::kDontAdaptArgumentsSentinel)                 \\\n   /* ecma402 #sec-intl-locale-constructor */                           \\\n   CPP(LocaleConstructor)                                               \\\n   CPP(LocalePrototypeLanguage)                                         \\\n@@ -1344,31 +1363,64 @@ namespace internal {\n   CPP(LocalePrototypeNumeric)                                          \\\n   CPP(LocalePrototypeNumberingSystem)                                  \\\n   CPP(LocalePrototypeToString)                                         \\\n+  /* ecma402 #sec-Intl.Locale.prototype.maximize */                    \\\n+  CPP(LocalePrototypeMaximize)                                         \\\n+  /* ecma402 #sec-Intl.Locale.prototype.minimize */                    \\\n+  CPP(LocalePrototypeMinimize)                                         \\\n   /* ecma402 #sec-number-format-functions */                           \\\n   CPP(NumberFormatInternalFormatNumber)                                \\\n   /* ecma402 #sec-intl.numberformat.prototype.format */                \\\n   CPP(NumberFormatPrototypeFormatNumber)                               \\\n-  /* ecma402 #sec-intl-relativetimeformat-constructor */               \\\n+  /* ecma402 #sec-datetime-format-functions */                         \\\n+  CPP(DateTimeFormatInternalFormat)                                    \\\n+  /* ecma402 #sec-intl.datetimeformat.prototype.format */              \\\n+  CPP(DateTimeFormatPrototypeFormat)                                   \\\n+  /* ecma402 #sec-intl.pluralrules */                                  \\\n+  CPP(PluralRulesConstructor)                                          \\\n+  /* ecma402 #sec-intl.RelativeTimeFormat.constructor */               \\\n   CPP(RelativeTimeFormatConstructor)                                   \\\n-  /* ecma402 #sec-intl.relativetimeformat.prototype.resolvedoptions */ \\\n-  CPP(RelativeTimeFormatPrototypeResolvedOptions)\n+  /* ecma402 #sec-intl.RelativeTimeFormat.prototype.resolvedOptions */ \\\n+  CPP(RelativeTimeFormatPrototypeResolvedOptions)                      \\\n+  /* ecma402 #sec-intl.RelativeTimeFormat.prototype.format */          \\\n+  CPP(RelativeTimeFormatPrototypeFormat)                               \\\n+  /* ecma402 #sec-intl.RelativeTimeFormat.prototype.formatToParts */   \\\n+  CPP(RelativeTimeFormatPrototypeFormatToParts)                        \\\n+  /* ecma402 #sup-string.prototype.tolocalelowercase */                \\\n+  CPP(StringPrototypeToLocaleLowerCase)                                \\\n+  /* ecma402 #sup-string.prototype.tolocaleuppercase */                \\\n+  CPP(StringPrototypeToLocaleUpperCase)                                \\\n+  /* ecma402 #sec-intl.collator.prototype.compare */                   \\\n+  CPP(CollatorPrototypeCompare)                                        \\\n+  /* ecma 402 #sec-collator-compare-functions*/                        \\\n+  CPP(CollatorInternalCompare)                                         \\\n+  CPP(BreakIteratorInternalAdoptText)                                  \\\n+  CPP(BreakIteratorPrototypeAdoptText)\n #else\n-#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, ASM)    \\\n-  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)     \\\n-  BUILTIN_LIST_FROM_DSL(CPP, API, TFJ, TFC, TFS, TFH, ASM) \\\n-                                                           \\\n-  /* no-op fallback version */                             \\\n-  CPP(StringPrototypeNormalize)                            \\\n-  /* same as toLowercase; fallback version */              \\\n-  CPP(StringPrototypeToLocaleLowerCase)                    \\\n-  /* same as toUppercase; fallback version */              \\\n-  CPP(StringPrototypeToLocaleUpperCase)                    \\\n-  /* (obsolete) Unibrow version */                         \\\n-  CPP(StringPrototypeToLowerCase)                          \\\n-  /* (obsolete) Unibrow version */                         \\\n+#define BUILTIN_LIST_INTL(CPP, TFJ, TFS)      \\\n+  /* no-op fallback version */                \\\n+  CPP(StringPrototypeNormalize)               \\\n+  /* same as toLowercase; fallback version */ \\\n+  CPP(StringPrototypeToLocaleLowerCase)       \\\n+  /* same as toUppercase; fallback version */ \\\n+  CPP(StringPrototypeToLocaleUpperCase)       \\\n+  /* (obsolete) Unibrow version */            \\\n+  CPP(StringPrototypeToLowerCase)             \\\n+  /* (obsolete) Unibrow version */            \\\n   CPP(StringPrototypeToUpperCase)\n #endif  // V8_INTL_SUPPORT\n \n+#ifdef V8_EMBEDDED_BYTECODE_HANDLERS\n+#define BUILTIN_LIST_BYTECODE_HANDLERS(BCH) BYTECODE_LIST(BCH)\n+#else\n+#define BUILTIN_LIST_BYTECODE_HANDLERS(BCH)\n+#endif  // V8_EMBEDDED_BYTECODE_HANDLERS\n+\n+#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, BCH, ASM) \\\n+  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)       \\\n+  BUILTIN_LIST_FROM_DSL(CPP, API, TFJ, TFC, TFS, TFH, ASM)   \\\n+  BUILTIN_LIST_INTL(CPP, TFJ, TFS)                           \\\n+  BUILTIN_LIST_BYTECODE_HANDLERS(BCH)\n+\n // The exception thrown in the following builtins are caught\n // internally and result in a promise rejection.\n #define BUILTIN_PROMISE_REJECTION_PREDICTION_LIST(V) \\\n@@ -1392,33 +1444,43 @@ namespace internal {\n   V(PromiseRace)                                     \\\n   V(ResolvePromise)\n \n+// Convenience macro listing all wasm runtime stubs. Note that the first few\n+// elements of the list coincide with {compiler::TrapId}, order matters.\n+#define WASM_RUNTIME_STUB_LIST(V, VTRAP) \\\n+  FOREACH_WASM_TRAPREASON(VTRAP)         \\\n+  V(WasmAllocateHeapNumber)              \\\n+  V(WasmArgumentsAdaptor)                \\\n+  V(WasmCallJavaScript)                  \\\n+  V(WasmGrowMemory)                      \\\n+  V(WasmStackGuard)                      \\\n+  V(WasmToNumber)                        \\\n+  V(DoubleToI)\n+\n // The exception thrown in the following builtins are caught internally and will\n // not be propagated further or re-thrown\n #define BUILTIN_EXCEPTION_CAUGHT_PREDICTION_LIST(V) V(PromiseRejectReactionJob)\n \n #define IGNORE_BUILTIN(...)\n \n-#define BUILTIN_LIST_ALL(V) BUILTIN_LIST(V, V, V, V, V, V, V)\n-\n #define BUILTIN_LIST_C(V)                                            \\\n   BUILTIN_LIST(V, V, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n-               IGNORE_BUILTIN, IGNORE_BUILTIN)\n+               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n \n #define BUILTIN_LIST_A(V)                                                      \\\n   BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n-               IGNORE_BUILTIN, IGNORE_BUILTIN, V)\n+               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, V)\n \n #define BUILTIN_LIST_TFS(V)                                                    \\\n   BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n-               V, IGNORE_BUILTIN, IGNORE_BUILTIN)\n+               V, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n \n #define BUILTIN_LIST_TFJ(V)                                       \\\n   BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, V, IGNORE_BUILTIN, \\\n-               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n+               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n \n #define BUILTIN_LIST_TFC(V)                                       \\\n   BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, V, \\\n-               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n+               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n \n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "97b85bc2952affc97ba1599ffd5c1857dbb4b77c",
            "filename": "deps/v8/src/builtins/builtins-descriptors.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-descriptors.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-descriptors.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-descriptors.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -43,7 +43,7 @@ namespace internal {\n \n BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, DEFINE_TFJ_INTERFACE_DESCRIPTOR,\n              DEFINE_TFC_INTERFACE_DESCRIPTOR, DEFINE_TFS_INTERFACE_DESCRIPTOR,\n-             DEFINE_TFH_INTERFACE_DESCRIPTOR, IGNORE_BUILTIN)\n+             DEFINE_TFH_INTERFACE_DESCRIPTOR, IGNORE_BUILTIN, IGNORE_BUILTIN)\n \n #undef DEFINE_TFJ_INTERFACE_DESCRIPTOR\n #undef DEFINE_TFC_INTERFACE_DESCRIPTOR"
        },
        {
            "sha": "6f07618172db63ea9065a40aa25c1edc5188b1c1",
            "filename": "deps/v8/src/builtins/builtins-error.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-error.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-error.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-error.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,16 +2,14 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins.h\"\n-#include \"src/builtins/builtins-utils.h\"\n-\n #include \"src/accessors.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n+#include \"src/builtins/builtins.h\"\n #include \"src/counters.h\"\n #include \"src/messages.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects/api-callbacks.h\"\n #include \"src/property-descriptor.h\"\n-#include \"src/string-builder.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "eb4ace31e4c1a2e29c2a1a07fb9df60d50b12f4b",
            "filename": "deps/v8/src/builtins/builtins-function-gen.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -123,8 +123,8 @@ TF_BUILTIN(FastFunctionPrototypeBind, CodeStubAssembler) {\n     GotoIf(Uint32LessThanOrEqual(argc, Int32Constant(1)), &empty_arguments);\n     TNode<IntPtrT> elements_length =\n         Signed(ChangeUint32ToWord(Unsigned(Int32Sub(argc, Int32Constant(1)))));\n-    Node* elements = AllocateFixedArray(PACKED_ELEMENTS, elements_length,\n-                                        kAllowLargeObjectAllocation);\n+    TNode<FixedArray> elements = CAST(AllocateFixedArray(\n+        PACKED_ELEMENTS, elements_length, kAllowLargeObjectAllocation));\n     VARIABLE(index, MachineType::PointerRepresentation());\n     index.Bind(IntPtrConstant(0));\n     VariableList foreach_vars({&index}, zone());"
        },
        {
            "sha": "c97bd8a587f95e73657ba6ae6d5be05934ba947d",
            "filename": "deps/v8/src/builtins/builtins-function.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-factory.h\"\n #include \"src/compiler.h\"\n@@ -11,7 +11,7 @@\n #include \"src/lookup.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects/api-callbacks.h\"\n-#include \"src/string-builder.h\"\n+#include \"src/string-builder-inl.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "04b378db3aa0c4e793d1121f16a95c36586da2f7",
            "filename": "deps/v8/src/builtins/builtins-generator-gen.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 12,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-generator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-generator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-generator-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,6 +8,7 @@\n #include \"src/code-stub-assembler.h\"\n #include \"src/isolate.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/js-generator.h\"\n \n namespace v8 {\n namespace internal {\n@@ -28,11 +29,8 @@ void GeneratorBuiltinsAssembler::GeneratorPrototypeResume(\n     CodeStubArguments* args, Node* receiver, Node* value, Node* context,\n     JSGeneratorObject::ResumeMode resume_mode, char const* const method_name) {\n   // Check if the {receiver} is actually a JSGeneratorObject.\n-  Label if_receiverisincompatible(this, Label::kDeferred);\n-  GotoIf(TaggedIsSmi(receiver), &if_receiverisincompatible);\n-  Node* receiver_instance_type = LoadInstanceType(receiver);\n-  GotoIfNot(InstanceTypeEqual(receiver_instance_type, JS_GENERATOR_OBJECT_TYPE),\n-            &if_receiverisincompatible);\n+  ThrowIfNotInstanceType(context, receiver, JS_GENERATOR_OBJECT_TYPE,\n+                         method_name);\n \n   // Check if the {receiver} is running or already closed.\n   TNode<Smi> receiver_continuation =\n@@ -81,13 +79,6 @@ void GeneratorBuiltinsAssembler::GeneratorPrototypeResume(\n                                    result, TrueConstant()));\n   }\n \n-  BIND(&if_receiverisincompatible);\n-  {\n-    // The {receiver} is not a valid JSGeneratorObject.\n-    ThrowTypeError(context, MessageTemplate::kIncompatibleMethodReceiver,\n-                   StringConstant(method_name), receiver);\n-  }\n-\n   BIND(&if_receiverisclosed);\n   {\n     // The {receiver} is closed already."
        },
        {
            "sha": "83820de13580fddda8e39bc814315833375d61e7",
            "filename": "deps/v8/src/builtins/builtins-global.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-global.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-global.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-global.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-factory.h\"\n #include \"src/compiler.h\""
        },
        {
            "sha": "bbfabc7a0dd54052cce3dbc9a9b37ee78b66b1ed",
            "filename": "deps/v8/src/builtins/builtins-ic-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -35,6 +35,7 @@ IC_BUILTIN(StoreICTrampoline)\n IC_BUILTIN(KeyedStoreIC)\n IC_BUILTIN(KeyedStoreICTrampoline)\n IC_BUILTIN(StoreInArrayLiteralIC)\n+IC_BUILTIN(CloneObjectIC)\n \n IC_BUILTIN_PARAM(LoadGlobalIC, LoadGlobalIC, NOT_INSIDE_TYPEOF)\n IC_BUILTIN_PARAM(LoadGlobalICInsideTypeof, LoadGlobalIC, INSIDE_TYPEOF)"
        },
        {
            "sha": "7ff88c5a538519ec99e08b3c4ad6aa04cf4a61c8",
            "filename": "deps/v8/src/builtins/builtins-internal-gen.cc",
            "status": "modified",
            "additions": 32,
            "deletions": 20,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,6 +8,7 @@\n #include \"src/code-stub-assembler.h\"\n #include \"src/heap/heap-inl.h\"\n #include \"src/ic/accessor-assembler.h\"\n+#include \"src/ic/keyed-store-generic.h\"\n #include \"src/macro-assembler.h\"\n #include \"src/objects/debug-objects.h\"\n #include \"src/objects/shared-function-info.h\"\n@@ -100,7 +101,7 @@ TF_BUILTIN(NewArgumentsElements, CodeStubAssembler) {\n     BIND(&if_notempty);\n     {\n       // Allocate a FixedArray in new space.\n-      Node* result = AllocateFixedArray(kind, length);\n+      TNode<FixedArray> result = CAST(AllocateFixedArray(kind, length));\n \n       // The elements might be used to back mapped arguments. In that case fill\n       // the mapped elements (i.e. the first {mapped_count}) with the hole, but\n@@ -109,14 +110,13 @@ TF_BUILTIN(NewArgumentsElements, CodeStubAssembler) {\n       Node* the_hole = TheHoleConstant();\n \n       // Fill the first elements up to {number_of_holes} with the hole.\n-      VARIABLE(var_index, MachineType::PointerRepresentation());\n+      TVARIABLE(IntPtrT, var_index, IntPtrConstant(0));\n       Label loop1(this, &var_index), done_loop1(this);\n-      var_index.Bind(IntPtrConstant(0));\n       Goto(&loop1);\n       BIND(&loop1);\n       {\n         // Load the current {index}.\n-        Node* index = var_index.value();\n+        TNode<IntPtrT> index = var_index.value();\n \n         // Check if we are done.\n         GotoIf(WordEqual(index, number_of_holes), &done_loop1);\n@@ -125,34 +125,35 @@ TF_BUILTIN(NewArgumentsElements, CodeStubAssembler) {\n         StoreFixedArrayElement(result, index, the_hole, SKIP_WRITE_BARRIER);\n \n         // Continue with next {index}.\n-        var_index.Bind(IntPtrAdd(index, IntPtrConstant(1)));\n+        var_index = IntPtrAdd(index, IntPtrConstant(1));\n         Goto(&loop1);\n       }\n       BIND(&done_loop1);\n \n       // Compute the effective {offset} into the {frame}.\n-      Node* offset = IntPtrAdd(length, IntPtrConstant(1));\n+      TNode<IntPtrT> offset = IntPtrAdd(length, IntPtrConstant(1));\n \n       // Copy the parameters from {frame} (starting at {offset}) to {result}.\n       Label loop2(this, &var_index), done_loop2(this);\n       Goto(&loop2);\n       BIND(&loop2);\n       {\n         // Load the current {index}.\n-        Node* index = var_index.value();\n+        TNode<IntPtrT> index = var_index.value();\n \n         // Check if we are done.\n         GotoIf(WordEqual(index, length), &done_loop2);\n \n         // Load the parameter at the given {index}.\n-        Node* value = Load(MachineType::AnyTagged(), frame,\n-                           TimesPointerSize(IntPtrSub(offset, index)));\n+        TNode<Object> value =\n+            CAST(Load(MachineType::AnyTagged(), frame,\n+                      TimesPointerSize(IntPtrSub(offset, index))));\n \n         // Store the {value} into the {result}.\n         StoreFixedArrayElement(result, index, value, SKIP_WRITE_BARRIER);\n \n         // Continue with next {index}.\n-        var_index.Bind(IntPtrAdd(index, IntPtrConstant(1)));\n+        var_index = IntPtrAdd(index, IntPtrConstant(1));\n         Goto(&loop2);\n       }\n       BIND(&done_loop2);\n@@ -185,8 +186,8 @@ TF_BUILTIN(DebugBreakTrampoline, CodeStubAssembler) {\n   // Check break-at-entry flag on the debug info.\n   TNode<SharedFunctionInfo> shared =\n       CAST(LoadObjectField(function, JSFunction::kSharedFunctionInfoOffset));\n-  TNode<Object> maybe_heap_object_or_smi = LoadObjectField(\n-      shared, SharedFunctionInfo::kFunctionIdentifierOrDebugInfoOffset);\n+  TNode<Object> maybe_heap_object_or_smi =\n+      LoadObjectField(shared, SharedFunctionInfo::kScriptOrDebugInfoOffset);\n   TNode<HeapObject> maybe_debug_info =\n       TaggedToHeapObject(maybe_heap_object_or_smi, &tailcall_to_shared);\n   GotoIfNot(HasInstanceType(maybe_debug_info, InstanceType::DEBUG_INFO_TYPE),\n@@ -221,7 +222,7 @@ class RecordWriteCodeStubAssembler : public CodeStubAssembler {\n   }\n \n   Node* IsPageFlagSet(Node* object, int mask) {\n-    Node* page = WordAnd(object, IntPtrConstant(~Page::kPageAlignmentMask));\n+    Node* page = WordAnd(object, IntPtrConstant(~kPageAlignmentMask));\n     Node* flags = Load(MachineType::Pointer(), page,\n                        IntPtrConstant(MemoryChunk::kFlagsOffset));\n     return WordNotEqual(WordAnd(flags, IntPtrConstant(mask)),\n@@ -241,15 +242,15 @@ class RecordWriteCodeStubAssembler : public CodeStubAssembler {\n   }\n \n   void GetMarkBit(Node* object, Node** cell, Node** mask) {\n-    Node* page = WordAnd(object, IntPtrConstant(~Page::kPageAlignmentMask));\n+    Node* page = WordAnd(object, IntPtrConstant(~kPageAlignmentMask));\n \n     {\n       // Temp variable to calculate cell offset in bitmap.\n       Node* r0;\n       int shift = Bitmap::kBitsPerCellLog2 + kPointerSizeLog2 -\n                   Bitmap::kBytesPerCellLog2;\n       r0 = WordShr(object, IntPtrConstant(shift));\n-      r0 = WordAnd(r0, IntPtrConstant((Page::kPageAlignmentMask >> shift) &\n+      r0 = WordAnd(r0, IntPtrConstant((kPageAlignmentMask >> shift) &\n                                       ~(Bitmap::kBytesPerCell - 1)));\n       *cell = IntPtrAdd(IntPtrAdd(page, r0),\n                         IntPtrConstant(MemoryChunk::kHeaderSize));\n@@ -332,7 +333,7 @@ class RecordWriteCodeStubAssembler : public CodeStubAssembler {\n                         store_buffer_top_addr, new_store_buffer_top);\n \n     Node* test = WordAnd(new_store_buffer_top,\n-                         IntPtrConstant(StoreBuffer::kStoreBufferMask));\n+                         IntPtrConstant(Heap::store_buffer_mask_constant()));\n \n     Label overflow(this);\n     Branch(WordEqual(test, IntPtrConstant(0)), &overflow, next);\n@@ -579,7 +580,7 @@ TF_BUILTIN(ForInFilter, CodeStubAssembler) {\n   CSA_ASSERT(this, IsString(key));\n \n   Label if_true(this), if_false(this);\n-  TNode<Oddball> result = HasProperty(object, key, context, kForInHasProperty);\n+  TNode<Oddball> result = HasProperty(context, object, key, kForInHasProperty);\n   Branch(IsTrue(result), &if_true, &if_false);\n \n   BIND(&if_true);\n@@ -844,7 +845,7 @@ TF_BUILTIN(EnqueueMicrotask, InternalBuiltinsAssembler) {\n       // This is the likely case where the new queue fits into new space,\n       // and thus we don't need any write barriers for initializing it.\n       TNode<FixedArray> new_queue =\n-          AllocateFixedArray(PACKED_ELEMENTS, new_queue_length);\n+          CAST(AllocateFixedArray(PACKED_ELEMENTS, new_queue_length));\n       CopyFixedArrayElements(PACKED_ELEMENTS, queue, new_queue, num_tasks,\n                              SKIP_WRITE_BARRIER);\n       StoreFixedArrayElement(new_queue, num_tasks, microtask,\n@@ -858,9 +859,9 @@ TF_BUILTIN(EnqueueMicrotask, InternalBuiltinsAssembler) {\n     BIND(&if_lospace);\n     {\n       // The fallback case where the new queue ends up in large object space.\n-      TNode<FixedArray> new_queue = AllocateFixedArray(\n+      TNode<FixedArray> new_queue = CAST(AllocateFixedArray(\n           PACKED_ELEMENTS, new_queue_length, INTPTR_PARAMETERS,\n-          AllocationFlag::kAllowLargeObjectAllocation);\n+          AllocationFlag::kAllowLargeObjectAllocation));\n       CopyFixedArrayElements(PACKED_ELEMENTS, queue, new_queue, num_tasks);\n       StoreFixedArrayElement(new_queue, num_tasks, microtask);\n       FillFixedArrayWithValue(PACKED_ELEMENTS, new_queue, new_num_tasks,\n@@ -1258,5 +1259,16 @@ TF_BUILTIN(GetProperty, CodeStubAssembler) {\n   Return(var_result.value());\n }\n \n+// ES6 [[Set]] operation.\n+TF_BUILTIN(SetProperty, CodeStubAssembler) {\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> key = CAST(Parameter(Descriptor::kKey));\n+  TNode<Object> value = CAST(Parameter(Descriptor::kValue));\n+\n+  KeyedStoreGenericGenerator::SetProperty(state(), context, receiver, key,\n+                                          value, LanguageMode::kStrict);\n+}\n+\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "77e2e81a6c91966180fa0e2f8750c024ac472c40",
            "filename": "deps/v8/src/builtins/builtins-intl-gen.cc",
            "status": "modified",
            "additions": 80,
            "deletions": 0,
            "changes": 80,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -6,16 +6,30 @@\n #error Internationalization is expected to be enabled.\n #endif  // V8_INTL_SUPPORT\n \n+#include \"src/builtins/builtins-iterator-gen.h\"\n #include \"src/builtins/builtins-utils-gen.h\"\n #include \"src/code-stub-assembler.h\"\n+#include \"src/objects-inl.h\"\n+#include \"src/objects.h\"\n+#include \"src/objects/js-list-format-inl.h\"\n+#include \"src/objects/js-list-format.h\"\n \n namespace v8 {\n namespace internal {\n \n+template <class T>\n+using TNode = compiler::TNode<T>;\n+\n class IntlBuiltinsAssembler : public CodeStubAssembler {\n  public:\n   explicit IntlBuiltinsAssembler(compiler::CodeAssemblerState* state)\n       : CodeStubAssembler(state) {}\n+\n+  void ListFormatCommon(TNode<Context> context, TNode<Int32T> argc,\n+                        Runtime::FunctionId format_func_id,\n+                        const char* method_name);\n+\n+  TNode<JSArray> AllocateEmptyJSArray(TNode<Context> context);\n };\n \n TF_BUILTIN(StringToLowerCaseIntl, IntlBuiltinsAssembler) {\n@@ -129,5 +143,71 @@ TF_BUILTIN(StringPrototypeToLowerCaseIntl, IntlBuiltinsAssembler) {\n   Return(CallBuiltin(Builtins::kStringToLowerCaseIntl, context, string));\n }\n \n+void IntlBuiltinsAssembler::ListFormatCommon(TNode<Context> context,\n+                                             TNode<Int32T> argc,\n+                                             Runtime::FunctionId format_func_id,\n+                                             const char* method_name) {\n+  CodeStubArguments args(this, ChangeInt32ToIntPtr(argc));\n+\n+  // Label has_list(this);\n+  // 1. Let lf be this value.\n+  // 2. If Type(lf) is not Object, throw a TypeError exception.\n+  TNode<Object> receiver = args.GetReceiver();\n+\n+  // 3. If lf does not have an [[InitializedListFormat]] internal slot, throw a\n+  // TypeError exception.\n+  ThrowIfNotInstanceType(context, receiver, JS_INTL_LIST_FORMAT_TYPE,\n+                         method_name);\n+  TNode<JSListFormat> list_format = CAST(receiver);\n+\n+  // 4. If list is not provided or is undefined, then\n+  TNode<Object> list = args.GetOptionalArgumentValue(0);\n+  Label has_list(this);\n+  {\n+    GotoIfNot(IsUndefined(list), &has_list);\n+    if (format_func_id == Runtime::kFormatList) {\n+      // a. Return an empty String.\n+      args.PopAndReturn(EmptyStringConstant());\n+    } else {\n+      DCHECK_EQ(format_func_id, Runtime::kFormatListToParts);\n+      // a. Return an empty Array.\n+      args.PopAndReturn(AllocateEmptyJSArray(context));\n+    }\n+  }\n+  BIND(&has_list);\n+  {\n+    // 5. Let x be ? IterableToList(list).\n+    IteratorBuiltinsAssembler iterator_assembler(state());\n+    // TODO(adamk): Consider exposing IterableToList as a buitin and calling\n+    // it from here instead of inlining the operation.\n+    TNode<JSArray> x = iterator_assembler.IterableToList(context, list);\n+\n+    // 6. Return ? FormatList(lf, x).\n+    args.PopAndReturn(CallRuntime(format_func_id, context, list_format, x));\n+  }\n+}\n+\n+TNode<JSArray> IntlBuiltinsAssembler::AllocateEmptyJSArray(\n+    TNode<Context> context) {\n+  return CAST(CodeStubAssembler::AllocateJSArray(\n+      PACKED_ELEMENTS,\n+      LoadJSArrayElementsMap(PACKED_ELEMENTS, LoadNativeContext(context)),\n+      SmiConstant(0), SmiConstant(0)));\n+}\n+\n+TF_BUILTIN(ListFormatPrototypeFormat, IntlBuiltinsAssembler) {\n+  ListFormatCommon(\n+      CAST(Parameter(Descriptor::kContext)),\n+      UncheckedCast<Int32T>(Parameter(Descriptor::kJSActualArgumentsCount)),\n+      Runtime::kFormatList, \"Intl.ListFormat.prototype.format\");\n+}\n+\n+TF_BUILTIN(ListFormatPrototypeFormatToParts, IntlBuiltinsAssembler) {\n+  ListFormatCommon(\n+      CAST(Parameter(Descriptor::kContext)),\n+      UncheckedCast<Int32T>(Parameter(Descriptor::kJSActualArgumentsCount)),\n+      Runtime::kFormatListToParts, \"Intl.ListFormat.prototype.formatToParts\");\n+}\n+\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "1d54d0da80d18a8ae357959b3127532038b1f8bd",
            "filename": "deps/v8/src/builtins/builtins-intl.cc",
            "status": "modified",
            "additions": 683,
            "deletions": 116,
            "changes": 799,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -6,26 +6,38 @@\n #error Internationalization is expected to be enabled.\n #endif  // V8_INTL_SUPPORT\n \n+#include <cmath>\n+#include <list>\n+#include <memory>\n+\n #include \"src/builtins/builtins-intl.h\"\n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/date.h\"\n+#include \"src/elements.h\"\n #include \"src/intl.h\"\n #include \"src/objects-inl.h\"\n #include \"src/objects/intl-objects.h\"\n+#include \"src/objects/js-array-inl.h\"\n+#include \"src/objects/js-collator-inl.h\"\n+#include \"src/objects/js-list-format-inl.h\"\n #include \"src/objects/js-locale-inl.h\"\n+#include \"src/objects/js-plural-rules-inl.h\"\n #include \"src/objects/js-relative-time-format-inl.h\"\n \n #include \"unicode/datefmt.h\"\n #include \"unicode/decimfmt.h\"\n #include \"unicode/fieldpos.h\"\n #include \"unicode/fpositer.h\"\n+#include \"unicode/listformatter.h\"\n #include \"unicode/normalizer2.h\"\n #include \"unicode/numfmt.h\"\n+#include \"unicode/reldatefmt.h\"\n #include \"unicode/smpdtfmt.h\"\n #include \"unicode/udat.h\"\n #include \"unicode/ufieldpositer.h\"\n #include \"unicode/unistr.h\"\n+#include \"unicode/ureldatefmt.h\"\n #include \"unicode/ustring.h\"\n \n namespace v8 {\n@@ -35,7 +47,7 @@ BUILTIN(StringPrototypeToUpperCaseIntl) {\n   HandleScope scope(isolate);\n   TO_THIS_STRING(string, \"String.prototype.toUpperCase\");\n   string = String::Flatten(isolate, string);\n-  return ConvertCase(string, true, isolate);\n+  RETURN_RESULT_OR_FAILURE(isolate, ConvertCase(string, true, isolate));\n }\n \n BUILTIN(StringPrototypeNormalizeIntl) {\n@@ -106,7 +118,8 @@ BUILTIN(StringPrototypeNormalizeIntl) {\n   }\n \n   if (U_FAILURE(status)) {\n-    return ReadOnlyRoots(isolate).undefined_value();\n+    THROW_NEW_ERROR_RETURN_FAILURE(isolate,\n+                                   NewTypeError(MessageTemplate::kIcuError));\n   }\n \n   RETURN_RESULT_OR_FAILURE(\n@@ -212,30 +225,6 @@ Handle<String> IcuDateFieldIdToDateType(int32_t field_id, Isolate* isolate) {\n   }\n }\n \n-bool AddElement(Handle<JSArray> array, int index,\n-                Handle<String> field_type_string,\n-                const icu::UnicodeString& formatted, int32_t begin, int32_t end,\n-                Isolate* isolate) {\n-  HandleScope scope(isolate);\n-  Factory* factory = isolate->factory();\n-  Handle<JSObject> element = factory->NewJSObject(isolate->object_function());\n-  Handle<String> value;\n-  JSObject::AddProperty(isolate, element, factory->type_string(),\n-                        field_type_string, NONE);\n-\n-  icu::UnicodeString field(formatted.tempSubStringBetween(begin, end));\n-  ASSIGN_RETURN_ON_EXCEPTION_VALUE(\n-      isolate, value,\n-      factory->NewStringFromTwoByte(Vector<const uint16_t>(\n-          reinterpret_cast<const uint16_t*>(field.getBuffer()),\n-          field.length())),\n-      false);\n-\n-  JSObject::AddProperty(isolate, element, factory->value_string(), value, NONE);\n-  JSObject::AddDataElement(array, index, element, NONE);\n-  return true;\n-}\n-\n bool cmp_NumberFormatSpan(const NumberFormatSpan& a,\n                           const NumberFormatSpan& b) {\n   // Regions that start earlier should be encountered earlier.\n@@ -251,19 +240,21 @@ bool cmp_NumberFormatSpan(const NumberFormatSpan& a,\n   return a.field_id < b.field_id;\n }\n \n-Object* FormatNumberToParts(Isolate* isolate, icu::NumberFormat* fmt,\n-                            double number) {\n+MaybeHandle<Object> FormatNumberToParts(Isolate* isolate,\n+                                        icu::NumberFormat* fmt, double number) {\n   Factory* factory = isolate->factory();\n \n   icu::UnicodeString formatted;\n   icu::FieldPositionIterator fp_iter;\n   UErrorCode status = U_ZERO_ERROR;\n   fmt->format(number, formatted, &fp_iter, status);\n-  if (U_FAILURE(status)) return ReadOnlyRoots(isolate).undefined_value();\n+  if (U_FAILURE(status)) {\n+    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), Object);\n+  }\n \n   Handle<JSArray> result = factory->NewJSArray(0);\n   int32_t length = formatted.length();\n-  if (length == 0) return *result;\n+  if (length == 0) return result;\n \n   std::vector<NumberFormatSpan> regions;\n   // Add a \"literal\" backdrop for the entire string. This will be used if no\n@@ -289,61 +280,70 @@ Object* FormatNumberToParts(Isolate* isolate, icu::NumberFormat* fmt,\n         part.field_id == -1\n             ? isolate->factory()->literal_string()\n             : IcuNumberFieldIdToNumberType(part.field_id, number, isolate);\n-    if (!AddElement(result, index, field_type_string, formatted, part.begin_pos,\n-                    part.end_pos, isolate)) {\n-      return ReadOnlyRoots(isolate).undefined_value();\n-    }\n+    Handle<String> substring;\n+    ASSIGN_RETURN_ON_EXCEPTION(\n+        isolate, substring,\n+        Intl::ToString(isolate, formatted, part.begin_pos, part.end_pos),\n+        Object);\n+    Intl::AddElement(isolate, result, index, field_type_string, substring);\n     ++index;\n   }\n   JSObject::ValidateElements(*result);\n \n-  return *result;\n+  return result;\n }\n \n-Object* FormatDateToParts(Isolate* isolate, icu::DateFormat* format,\n-                          double date_value) {\n+MaybeHandle<Object> FormatDateToParts(Isolate* isolate, icu::DateFormat* format,\n+                                      double date_value) {\n   Factory* factory = isolate->factory();\n \n   icu::UnicodeString formatted;\n   icu::FieldPositionIterator fp_iter;\n   icu::FieldPosition fp;\n   UErrorCode status = U_ZERO_ERROR;\n   format->format(date_value, formatted, &fp_iter, status);\n-  if (U_FAILURE(status)) return ReadOnlyRoots(isolate).undefined_value();\n+  if (U_FAILURE(status)) {\n+    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), Object);\n+  }\n \n   Handle<JSArray> result = factory->NewJSArray(0);\n   int32_t length = formatted.length();\n-  if (length == 0) return *result;\n+  if (length == 0) return result;\n \n   int index = 0;\n   int32_t previous_end_pos = 0;\n+  Handle<String> substring;\n   while (fp_iter.next(fp)) {\n     int32_t begin_pos = fp.getBeginIndex();\n     int32_t end_pos = fp.getEndIndex();\n \n     if (previous_end_pos < begin_pos) {\n-      if (!AddElement(result, index, IcuDateFieldIdToDateType(-1, isolate),\n-                      formatted, previous_end_pos, begin_pos, isolate)) {\n-        return ReadOnlyRoots(isolate).undefined_value();\n-      }\n+      ASSIGN_RETURN_ON_EXCEPTION(\n+          isolate, substring,\n+          Intl::ToString(isolate, formatted, previous_end_pos, begin_pos),\n+          Object);\n+      Intl::AddElement(isolate, result, index,\n+                       IcuDateFieldIdToDateType(-1, isolate), substring);\n       ++index;\n     }\n-    if (!AddElement(result, index,\n-                    IcuDateFieldIdToDateType(fp.getField(), isolate), formatted,\n-                    begin_pos, end_pos, isolate)) {\n-      return ReadOnlyRoots(isolate).undefined_value();\n-    }\n+    ASSIGN_RETURN_ON_EXCEPTION(\n+        isolate, substring,\n+        Intl::ToString(isolate, formatted, begin_pos, end_pos), Object);\n+    Intl::AddElement(isolate, result, index,\n+                     IcuDateFieldIdToDateType(fp.getField(), isolate),\n+                     substring);\n     previous_end_pos = end_pos;\n     ++index;\n   }\n   if (previous_end_pos < length) {\n-    if (!AddElement(result, index, IcuDateFieldIdToDateType(-1, isolate),\n-                    formatted, previous_end_pos, length, isolate)) {\n-      return ReadOnlyRoots(isolate).undefined_value();\n-    }\n+    ASSIGN_RETURN_ON_EXCEPTION(\n+        isolate, substring,\n+        Intl::ToString(isolate, formatted, previous_end_pos, length), Object);\n+    Intl::AddElement(isolate, result, index,\n+                     IcuDateFieldIdToDateType(-1, isolate), substring);\n   }\n   JSObject::ValidateElements(*result);\n-  return *result;\n+  return result;\n }\n \n }  // namespace\n@@ -461,11 +461,11 @@ BUILTIN(NumberFormatPrototypeFormatToParts) {\n   }\n \n   icu::DecimalFormat* number_format =\n-      NumberFormat::UnpackNumberFormat(isolate, number_format_holder);\n+      NumberFormat::UnpackNumberFormat(number_format_holder);\n   CHECK_NOT_NULL(number_format);\n \n-  Object* result = FormatNumberToParts(isolate, number_format, x->Number());\n-  return result;\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, FormatNumberToParts(isolate, number_format, x->Number()));\n }\n \n BUILTIN(DateTimeFormatPrototypeFormatToParts) {\n@@ -497,10 +497,11 @@ BUILTIN(DateTimeFormatPrototypeFormatToParts) {\n   }\n \n   icu::SimpleDateFormat* date_format =\n-      DateFormat::UnpackDateFormat(isolate, date_format_holder);\n+      DateFormat::UnpackDateFormat(date_format_holder);\n   CHECK_NOT_NULL(date_format);\n \n-  return FormatDateToParts(isolate, date_format, date_value);\n+  RETURN_RESULT_OR_FAILURE(isolate,\n+                           FormatDateToParts(isolate, date_format, date_value));\n }\n \n BUILTIN(NumberFormatPrototypeFormatNumber) {\n@@ -531,8 +532,8 @@ BUILTIN(NumberFormatPrototypeFormatNumber) {\n     return *bound_format;\n   }\n \n-  Handle<Context> native_context =\n-      Handle<Context>(isolate->context()->native_context(), isolate);\n+  Handle<NativeContext> native_context(isolate->context()->native_context(),\n+                                       isolate);\n \n   Handle<Context> context = isolate->factory()->NewBuiltinContext(\n       native_context, NumberFormat::ContextSlot::kLength);\n@@ -593,93 +594,402 @@ BUILTIN(NumberFormatInternalFormatNumber) {\n                                         isolate, number_format_holder, number));\n }\n \n-// Intl.Locale implementation\n-BUILTIN(LocaleConstructor) {\n+BUILTIN(DateTimeFormatPrototypeFormat) {\n+  const char* const method = \"get Intl.DateTimeFormat.prototype.format\";\n   HandleScope scope(isolate);\n-  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n-    THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n-                              isolate->factory()->NewStringFromAsciiChecked(\n-                                  \"Intl.Locale\")));\n-  } else {  // [[Construct]]\n-    Handle<JSFunction> target = args.target();\n-    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n \n-    Handle<JSObject> result;\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n-                                       JSObject::New(target, new_target));\n+  // 1. Let dtf be this value.\n+  // 2. If Type(dtf) is not Object, throw a TypeError exception.\n+  CHECK_RECEIVER(JSReceiver, receiver, method);\n \n-    Handle<Object> tag = args.atOrUndefined(isolate, 1);\n-    Handle<Object> options = args.atOrUndefined(isolate, 2);\n+  // 3. Let dtf be ? UnwrapDateTimeFormat(dtf).\n+  Handle<JSObject> date_format_holder;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, date_format_holder,\n+      DateFormat::Unwrap(isolate, receiver, method));\n+  DCHECK(Intl::IsObjectOfType(isolate, date_format_holder,\n+                              Intl::Type::kDateTimeFormat));\n \n-    // First parameter is a locale, as a string/object. Can't be empty.\n-    if (!tag->IsName() && !tag->IsJSReceiver()) {\n-      THROW_NEW_ERROR_RETURN_FAILURE(\n-          isolate, NewTypeError(MessageTemplate::kLocaleNotEmpty));\n-    }\n+  Handle<Object> bound_format = Handle<Object>(\n+      date_format_holder->GetEmbedderField(DateFormat::kBoundFormatIndex),\n+      isolate);\n \n-    Handle<String> locale_string;\n-    if (tag->IsJSLocale() &&\n-        Handle<JSLocale>::cast(tag)->locale()->IsString()) {\n-      locale_string =\n-          Handle<String>(Handle<JSLocale>::cast(tag)->locale(), isolate);\n-    } else {\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, locale_string,\n-                                         Object::ToString(isolate, tag));\n-    }\n+  // 4. If dtf.[[BoundFormat]] is undefined, then\n+  if (!bound_format->IsUndefined(isolate)) {\n+    DCHECK(bound_format->IsJSFunction());\n+    // 5. Return dtf.[[BoundFormat]].\n+    return *bound_format;\n+  }\n \n-    Handle<JSReceiver> options_object;\n-    if (options->IsNullOrUndefined(isolate)) {\n-      // Make empty options bag.\n-      options_object = isolate->factory()->NewJSObjectWithNullProto();\n-    } else {\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, options_object,\n-                                         Object::ToObject(isolate, options));\n-    }\n+  Handle<NativeContext> native_context(isolate->context()->native_context(),\n+                                       isolate);\n+  Handle<Context> context = isolate->factory()->NewBuiltinContext(\n+      native_context, DateFormat::ContextSlot::kLength);\n \n-    RETURN_RESULT_OR_FAILURE(\n-        isolate,\n-        JSLocale::InitializeLocale(isolate, Handle<JSLocale>::cast(result),\n-                                   locale_string, options_object));\n-  }\n+  // 4.b. Set F.[[DateTimeFormat]] to dtf.\n+  context->set(DateFormat::ContextSlot::kDateFormat, *date_format_holder);\n+\n+  Handle<SharedFunctionInfo> info = Handle<SharedFunctionInfo>(\n+      native_context->date_format_internal_format_shared_fun(), isolate);\n+  Handle<Map> map = isolate->strict_function_without_prototype_map();\n+\n+  // 4.a. Let F be a new built-in function object as defined in DateTime Format\n+  // Functions (12.1.5).\n+  Handle<JSFunction> new_bound_format_function =\n+      isolate->factory()->NewFunctionFromSharedFunctionInfo(map, info, context);\n+\n+  // 4.c. Set dtf.[[BoundFormat]] to F.\n+  date_format_holder->SetEmbedderField(DateFormat::kBoundFormatIndex,\n+                                       *new_bound_format_function);\n+\n+  // 5. Return dtf.[[BoundFormat]].\n+  return *new_bound_format_function;\n }\n \n-BUILTIN(RelativeTimeFormatConstructor) {\n+BUILTIN(DateTimeFormatInternalFormat) {\n+  HandleScope scope(isolate);\n+  Handle<Context> context = Handle<Context>(isolate->context(), isolate);\n+\n+  // 1. Let dtf be F.[[DateTimeFormat]].\n+  Handle<JSObject> date_format_holder = Handle<JSObject>(\n+      JSObject::cast(context->get(DateFormat::ContextSlot::kDateFormat)),\n+      isolate);\n+\n+  // 2. Assert: Type(dtf) is Object and dtf has an [[InitializedDateTimeFormat]]\n+  // internal slot.\n+  DCHECK(Intl::IsObjectOfType(isolate, date_format_holder,\n+                              Intl::Type::kDateTimeFormat));\n+\n+  Handle<Object> date = args.atOrUndefined(isolate, 1);\n+\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, DateFormat::DateTimeFormat(isolate, date_format_holder, date));\n+}\n+\n+BUILTIN(ListFormatConstructor) {\n   HandleScope scope(isolate);\n   // 1. If NewTarget is undefined, throw a TypeError exception.\n   if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n     THROW_NEW_ERROR_RETURN_FAILURE(\n         isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n                               isolate->factory()->NewStringFromStaticChars(\n-                                  \"Intl.RelativeTimeFormat\")));\n+                                  \"Intl.ListFormat\")));\n   }\n   // [[Construct]]\n   Handle<JSFunction> target = args.target();\n   Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n \n   Handle<JSObject> result;\n-  // 2. Let relativeTimeFormat be\n-  //    ! OrdinaryCreateFromConstructor(NewTarget,\n-  //                                    \"%RelativeTimeFormatPrototype%\").\n+  // 2. Let listFormat be OrdinaryCreateFromConstructor(NewTarget,\n+  //    \"%ListFormatPrototype%\").\n   ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n                                      JSObject::New(target, new_target));\n+  Handle<JSListFormat> format = Handle<JSListFormat>::cast(result);\n+  format->set_flags(0);\n \n   Handle<Object> locales = args.atOrUndefined(isolate, 1);\n   Handle<Object> options = args.atOrUndefined(isolate, 2);\n \n-  // 3. Return ? InitializeRelativeTimeFormat(relativeTimeFormat, locales,\n-  //                                          options).\n+  // 3. Return InitializeListFormat(listFormat, locales, options).\n+  RETURN_RESULT_OR_FAILURE(isolate, JSListFormat::InitializeListFormat(\n+                                        isolate, format, locales, options));\n+}\n+\n+BUILTIN(ListFormatPrototypeResolvedOptions) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSListFormat, format_holder,\n+                 \"Intl.ListFormat.prototype.resolvedOptions\");\n+  return *JSListFormat::ResolvedOptions(isolate, format_holder);\n+}\n+\n+namespace {\n+\n+MaybeHandle<JSLocale> CreateLocale(Isolate* isolate,\n+                                   Handle<JSFunction> constructor,\n+                                   Handle<JSReceiver> new_target,\n+                                   Handle<Object> tag, Handle<Object> options) {\n+  Handle<JSObject> result;\n+  ASSIGN_RETURN_ON_EXCEPTION(isolate, result,\n+                             JSObject::New(constructor, new_target), JSLocale);\n+\n+  // First parameter is a locale, as a string/object. Can't be empty.\n+  if (!tag->IsString() && !tag->IsJSReceiver()) {\n+    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kLocaleNotEmpty),\n+                    JSLocale);\n+  }\n+\n+  Handle<String> locale_string;\n+  if (tag->IsJSLocale() && Handle<JSLocale>::cast(tag)->locale()->IsString()) {\n+    locale_string =\n+        Handle<String>(Handle<JSLocale>::cast(tag)->locale(), isolate);\n+  } else {\n+    ASSIGN_RETURN_ON_EXCEPTION(isolate, locale_string,\n+                               Object::ToString(isolate, tag), JSLocale);\n+  }\n+\n+  Handle<JSReceiver> options_object;\n+  if (options->IsNullOrUndefined(isolate)) {\n+    // Make empty options bag.\n+    options_object = isolate->factory()->NewJSObjectWithNullProto();\n+  } else {\n+    ASSIGN_RETURN_ON_EXCEPTION(isolate, options_object,\n+                               Object::ToObject(isolate, options), JSLocale);\n+  }\n+\n+  return JSLocale::InitializeLocale(isolate, Handle<JSLocale>::cast(result),\n+                                    locale_string, options_object);\n+}\n+\n+}  // namespace\n+\n+// Intl.Locale implementation\n+BUILTIN(LocaleConstructor) {\n+  HandleScope scope(isolate);\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n+                              isolate->factory()->NewStringFromAsciiChecked(\n+                                  \"Intl.Locale\")));\n+  }\n+  // [[Construct]]\n+  Handle<JSFunction> target = args.target();\n+  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+\n+  Handle<Object> tag = args.atOrUndefined(isolate, 1);\n+  Handle<Object> options = args.atOrUndefined(isolate, 2);\n+\n   RETURN_RESULT_OR_FAILURE(\n-      isolate, JSRelativeTimeFormat::InitializeRelativeTimeFormat(\n-                   isolate, Handle<JSRelativeTimeFormat>::cast(result), locales,\n-                   options));\n+      isolate, CreateLocale(isolate, target, new_target, tag, options));\n }\n \n-BUILTIN(RelativeTimeFormatPrototypeResolvedOptions) {\n+BUILTIN(LocalePrototypeMaximize) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.maximize\");\n+  Handle<JSFunction> constructor(\n+      isolate->native_context()->intl_locale_function(), isolate);\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate,\n+      CreateLocale(isolate, constructor, constructor,\n+                   JSLocale::Maximize(isolate, locale_holder->locale()),\n+                   isolate->factory()->NewJSObjectWithNullProto()));\n+}\n+\n+BUILTIN(LocalePrototypeMinimize) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSLocale, locale_holder, \"Intl.Locale.prototype.minimize\");\n+  Handle<JSFunction> constructor(\n+      isolate->native_context()->intl_locale_function(), isolate);\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate,\n+      CreateLocale(isolate, constructor, constructor,\n+                   JSLocale::Minimize(isolate, locale_holder->locale()),\n+                   isolate->factory()->NewJSObjectWithNullProto()));\n+}\n+\n+namespace {\n+\n+MaybeHandle<JSArray> GenerateRelativeTimeFormatParts(\n+    Isolate* isolate, icu::UnicodeString formatted,\n+    icu::UnicodeString integer_part, Handle<String> unit) {\n+  Factory* factory = isolate->factory();\n+  Handle<JSArray> array = factory->NewJSArray(0);\n+  int32_t found = formatted.indexOf(integer_part);\n+\n+  Handle<String> substring;\n+  if (found < 0) {\n+    // Cannot find the integer_part in the formatted.\n+    // Return [{'type': 'literal', 'value': formatted}]\n+    ASSIGN_RETURN_ON_EXCEPTION(isolate, substring,\n+                               Intl::ToString(isolate, formatted), JSArray);\n+    Intl::AddElement(isolate, array,\n+                     0,                          // index\n+                     factory->literal_string(),  // field_type_string\n+                     substring);\n+  } else {\n+    // Found the formatted integer in the result.\n+    int index = 0;\n+\n+    // array.push({\n+    //     'type': 'literal',\n+    //     'value': formatted.substring(0, found)})\n+    if (found > 0) {\n+      ASSIGN_RETURN_ON_EXCEPTION(isolate, substring,\n+                                 Intl::ToString(isolate, formatted, 0, found),\n+                                 JSArray);\n+      Intl::AddElement(isolate, array, index++,\n+                       factory->literal_string(),  // field_type_string\n+                       substring);\n+    }\n+\n+    // array.push({\n+    //     'type': 'integer',\n+    //     'value': formatted.substring(found, found + integer_part.length),\n+    //     'unit': unit})\n+    ASSIGN_RETURN_ON_EXCEPTION(isolate, substring,\n+                               Intl::ToString(isolate, formatted, found,\n+                                              found + integer_part.length()),\n+                               JSArray);\n+    Intl::AddElement(isolate, array, index++,\n+                     factory->integer_string(),  // field_type_string\n+                     substring, factory->unit_string(), unit);\n+\n+    // array.push({\n+    //     'type': 'literal',\n+    //     'value': formatted.substring(\n+    //         found + integer_part.length, formatted.length)})\n+    if (found + integer_part.length() < formatted.length()) {\n+      ASSIGN_RETURN_ON_EXCEPTION(\n+          isolate, substring,\n+          Intl::ToString(isolate, formatted, found + integer_part.length(),\n+                         formatted.length()),\n+          JSArray);\n+      Intl::AddElement(isolate, array, index,\n+                       factory->literal_string(),  // field_type_string\n+                       substring);\n+    }\n+  }\n+  return array;\n+}\n+\n+bool GetURelativeDateTimeUnit(Handle<String> unit,\n+                              URelativeDateTimeUnit* unit_enum) {\n+  std::unique_ptr<char[]> unit_str = unit->ToCString();\n+  if ((strcmp(\"second\", unit_str.get()) == 0) ||\n+      (strcmp(\"seconds\", unit_str.get()) == 0)) {\n+    *unit_enum = UDAT_REL_UNIT_SECOND;\n+  } else if ((strcmp(\"minute\", unit_str.get()) == 0) ||\n+             (strcmp(\"minutes\", unit_str.get()) == 0)) {\n+    *unit_enum = UDAT_REL_UNIT_MINUTE;\n+  } else if ((strcmp(\"hour\", unit_str.get()) == 0) ||\n+             (strcmp(\"hours\", unit_str.get()) == 0)) {\n+    *unit_enum = UDAT_REL_UNIT_HOUR;\n+  } else if ((strcmp(\"day\", unit_str.get()) == 0) ||\n+             (strcmp(\"days\", unit_str.get()) == 0)) {\n+    *unit_enum = UDAT_REL_UNIT_DAY;\n+  } else if ((strcmp(\"week\", unit_str.get()) == 0) ||\n+             (strcmp(\"weeks\", unit_str.get()) == 0)) {\n+    *unit_enum = UDAT_REL_UNIT_WEEK;\n+  } else if ((strcmp(\"month\", unit_str.get()) == 0) ||\n+             (strcmp(\"months\", unit_str.get()) == 0)) {\n+    *unit_enum = UDAT_REL_UNIT_MONTH;\n+  } else if ((strcmp(\"quarter\", unit_str.get()) == 0) ||\n+             (strcmp(\"quarters\", unit_str.get()) == 0)) {\n+    *unit_enum = UDAT_REL_UNIT_QUARTER;\n+  } else if ((strcmp(\"year\", unit_str.get()) == 0) ||\n+             (strcmp(\"years\", unit_str.get()) == 0)) {\n+    *unit_enum = UDAT_REL_UNIT_YEAR;\n+  } else {\n+    return false;\n+  }\n+  return true;\n+}\n+\n+MaybeHandle<Object> RelativeTimeFormatPrototypeFormatCommon(\n+    BuiltinArguments args, Isolate* isolate,\n+    Handle<JSRelativeTimeFormat> format_holder, const char* func_name,\n+    bool to_parts) {\n+  Factory* factory = isolate->factory();\n+  Handle<Object> value_obj = args.atOrUndefined(isolate, 1);\n+  Handle<Object> unit_obj = args.atOrUndefined(isolate, 2);\n+\n+  // 3. Let value be ? ToNumber(value).\n+  Handle<Object> value;\n+  ASSIGN_RETURN_ON_EXCEPTION(isolate, value,\n+                             Object::ToNumber(isolate, value_obj), Object);\n+  double number = value->Number();\n+  // 4. Let unit be ? ToString(unit).\n+  Handle<String> unit;\n+  ASSIGN_RETURN_ON_EXCEPTION(isolate, unit, Object::ToString(isolate, unit_obj),\n+                             Object);\n+\n+  // 4. If isFinite(value) is false, then throw a RangeError exception.\n+  if (!std::isfinite(number)) {\n+    THROW_NEW_ERROR(\n+        isolate,\n+        NewRangeError(MessageTemplate::kNotFiniteNumber,\n+                      isolate->factory()->NewStringFromAsciiChecked(func_name)),\n+        Object);\n+  }\n+\n+  icu::RelativeDateTimeFormatter* formatter =\n+      JSRelativeTimeFormat::UnpackFormatter(format_holder);\n+  CHECK_NOT_NULL(formatter);\n+\n+  URelativeDateTimeUnit unit_enum;\n+  if (!GetURelativeDateTimeUnit(unit, &unit_enum)) {\n+    THROW_NEW_ERROR(\n+        isolate,\n+        NewRangeError(MessageTemplate::kInvalidUnit,\n+                      isolate->factory()->NewStringFromAsciiChecked(func_name),\n+                      unit),\n+        Object);\n+  }\n+\n+  UErrorCode status = U_ZERO_ERROR;\n+  icu::UnicodeString formatted;\n+  if (unit_enum == UDAT_REL_UNIT_QUARTER) {\n+    // ICU have not yet implement UDAT_REL_UNIT_QUARTER.\n+  } else {\n+    if (format_holder->numeric() == JSRelativeTimeFormat::Numeric::ALWAYS) {\n+      formatter->formatNumeric(number, unit_enum, formatted, status);\n+    } else {\n+      DCHECK_EQ(JSRelativeTimeFormat::Numeric::AUTO, format_holder->numeric());\n+      formatter->format(number, unit_enum, formatted, status);\n+    }\n+  }\n+\n+  if (U_FAILURE(status)) {\n+    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), Object);\n+  }\n+\n+  if (to_parts) {\n+    icu::UnicodeString integer;\n+    icu::FieldPosition pos;\n+    formatter->getNumberFormat().format(std::abs(number), integer, pos, status);\n+    if (U_FAILURE(status)) {\n+      THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError),\n+                      Object);\n+    }\n+\n+    Handle<JSArray> elements;\n+    ASSIGN_RETURN_ON_EXCEPTION(\n+        isolate, elements,\n+        GenerateRelativeTimeFormatParts(isolate, formatted, integer, unit),\n+        Object);\n+    return elements;\n+  }\n+\n+  return factory->NewStringFromTwoByte(Vector<const uint16_t>(\n+      reinterpret_cast<const uint16_t*>(formatted.getBuffer()),\n+      formatted.length()));\n+}\n+\n+}  // namespace\n+\n+BUILTIN(RelativeTimeFormatPrototypeFormat) {\n   HandleScope scope(isolate);\n+  // 1. Let relativeTimeFormat be the this value.\n+  // 2. If Type(relativeTimeFormat) is not Object or relativeTimeFormat does not\n+  //    have an [[InitializedRelativeTimeFormat]] internal slot whose value is\n+  //    true, throw a TypeError exception.\n   CHECK_RECEIVER(JSRelativeTimeFormat, format_holder,\n-                 \"Intl.RelativeTimeFormat.prototype.resolvedOptions\");\n-  return *JSRelativeTimeFormat::ResolvedOptions(isolate, format_holder);\n+                 \"Intl.RelativeTimeFormat.prototype.format\");\n+  RETURN_RESULT_OR_FAILURE(isolate,\n+                           RelativeTimeFormatPrototypeFormatCommon(\n+                               args, isolate, format_holder, \"format\", false));\n+}\n+\n+BUILTIN(RelativeTimeFormatPrototypeFormatToParts) {\n+  HandleScope scope(isolate);\n+  // 1. Let relativeTimeFormat be the this value.\n+  // 2. If Type(relativeTimeFormat) is not Object or relativeTimeFormat does not\n+  //    have an [[InitializedRelativeTimeFormat]] internal slot whose value is\n+  //    true, throw a TypeError exception.\n+  CHECK_RECEIVER(JSRelativeTimeFormat, format_holder,\n+                 \"Intl.RelativeTimeFormat.prototype.formatToParts\");\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, RelativeTimeFormatPrototypeFormatCommon(\n+                   args, isolate, format_holder, \"formatToParts\", true));\n }\n \n // Locale getters.\n@@ -762,5 +1072,262 @@ BUILTIN(LocalePrototypeToString) {\n   return locale_holder->locale();\n }\n \n+BUILTIN(RelativeTimeFormatConstructor) {\n+  HandleScope scope(isolate);\n+  // 1. If NewTarget is undefined, throw a TypeError exception.\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n+                              isolate->factory()->NewStringFromStaticChars(\n+                                  \"Intl.RelativeTimeFormat\")));\n+  }\n+  // [[Construct]]\n+  Handle<JSFunction> target = args.target();\n+  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+\n+  Handle<JSObject> result;\n+  // 2. Let relativeTimeFormat be\n+  //    ! OrdinaryCreateFromConstructor(NewTarget,\n+  //                                    \"%RelativeTimeFormatPrototype%\").\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n+                                     JSObject::New(target, new_target));\n+  Handle<JSRelativeTimeFormat> format =\n+      Handle<JSRelativeTimeFormat>::cast(result);\n+  format->set_flags(0);\n+\n+  Handle<Object> locales = args.atOrUndefined(isolate, 1);\n+  Handle<Object> options = args.atOrUndefined(isolate, 2);\n+\n+  // 3. Return ? InitializeRelativeTimeFormat(relativeTimeFormat, locales,\n+  //                                          options).\n+  RETURN_RESULT_OR_FAILURE(isolate,\n+                           JSRelativeTimeFormat::InitializeRelativeTimeFormat(\n+                               isolate, format, locales, options));\n+}\n+\n+BUILTIN(RelativeTimeFormatPrototypeResolvedOptions) {\n+  HandleScope scope(isolate);\n+  CHECK_RECEIVER(JSRelativeTimeFormat, format_holder,\n+                 \"Intl.RelativeTimeFormat.prototype.resolvedOptions\");\n+  return *JSRelativeTimeFormat::ResolvedOptions(isolate, format_holder);\n+}\n+\n+BUILTIN(StringPrototypeToLocaleLowerCase) {\n+  HandleScope scope(isolate);\n+  TO_THIS_STRING(string, \"String.prototype.toLocaleLowerCase\");\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, Intl::StringLocaleConvertCase(isolate, string, false,\n+                                             args.atOrUndefined(isolate, 1)));\n+}\n+\n+BUILTIN(StringPrototypeToLocaleUpperCase) {\n+  HandleScope scope(isolate);\n+  TO_THIS_STRING(string, \"String.prototype.toLocaleUpperCase\");\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, Intl::StringLocaleConvertCase(isolate, string, true,\n+                                             args.atOrUndefined(isolate, 1)));\n+}\n+\n+BUILTIN(PluralRulesConstructor) {\n+  HandleScope scope(isolate);\n+\n+  // 1. If NewTarget is undefined, throw a TypeError exception.\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n+                              isolate->factory()->NewStringFromStaticChars(\n+                                  \"Intl.PluralRules\")));\n+  }\n+\n+  // [[Construct]]\n+  Handle<JSFunction> target = args.target();\n+  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+\n+  Handle<Object> locales = args.atOrUndefined(isolate, 1);\n+  Handle<Object> options = args.atOrUndefined(isolate, 2);\n+\n+  // 2. Let pluralRules be ? OrdinaryCreateFromConstructor(newTarget,\n+  // \"%PluralRulesPrototype%\",  [[InitializedPluralRules]],\n+  // [[Locale]], [[Type]], [[MinimumIntegerDigits]],\n+  // [[MinimumFractionDigits]], [[MaximumFractionDigits]],\n+  // [[MinimumSignificantDigits]], [[MaximumSignificantDigits]] ).\n+  Handle<JSObject> plural_rules_obj;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, plural_rules_obj,\n+                                     JSObject::New(target, new_target));\n+  Handle<JSPluralRules> plural_rules =\n+      Handle<JSPluralRules>::cast(plural_rules_obj);\n+\n+  // 3. Return ? InitializePluralRules(pluralRules, locales, options).\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, JSPluralRules::InitializePluralRules(isolate, plural_rules,\n+                                                    locales, options));\n+}\n+\n+BUILTIN(CollatorConstructor) {\n+  HandleScope scope(isolate);\n+  Handle<JSReceiver> new_target;\n+  // 1. If NewTarget is undefined, let newTarget be the active\n+  // function object, else let newTarget be NewTarget.\n+  if (args.new_target()->IsUndefined(isolate)) {\n+    new_target = args.target();\n+  } else {\n+    new_target = Handle<JSReceiver>::cast(args.new_target());\n+  }\n+\n+  // [[Construct]]\n+  Handle<JSFunction> target = args.target();\n+\n+  Handle<Object> locales = args.atOrUndefined(isolate, 1);\n+  Handle<Object> options = args.atOrUndefined(isolate, 2);\n+\n+  // 5. Let collator be ? OrdinaryCreateFromConstructor(newTarget,\n+  // \"%CollatorPrototype%\", internalSlotsList).\n+  Handle<JSObject> collator_obj;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, collator_obj,\n+                                     JSObject::New(target, new_target));\n+  Handle<JSCollator> collator = Handle<JSCollator>::cast(collator_obj);\n+  collator->set_flags(0);\n+\n+  // 6. Return ? InitializeCollator(collator, locales, options).\n+  RETURN_RESULT_OR_FAILURE(isolate, JSCollator::InitializeCollator(\n+                                        isolate, collator, locales, options));\n+}\n+\n+BUILTIN(CollatorPrototypeCompare) {\n+  const char* const method = \"get Intl.Collator.prototype.compare\";\n+  HandleScope scope(isolate);\n+\n+  // 1. Let collator be this value.\n+  // 2. If Type(collator) is not Object, throw a TypeError exception.\n+  // 3. If collator does not have an [[InitializedCollator]] internal slot,\n+  // throw a TypeError exception.\n+  CHECK_RECEIVER(JSCollator, collator, method);\n+\n+  // 4. If collator.[[BoundCompare]] is undefined, then\n+  Handle<Object> bound_compare(collator->bound_compare(), isolate);\n+  if (!bound_compare->IsUndefined(isolate)) {\n+    DCHECK(bound_compare->IsJSFunction());\n+    // 5. Return collator.[[BoundCompare]].\n+    return *bound_compare;\n+  }\n+\n+  Handle<NativeContext> native_context(isolate->context()->native_context(),\n+                                       isolate);\n+  Handle<Context> context = isolate->factory()->NewBuiltinContext(\n+      native_context, JSCollator::ContextSlot::kLength);\n+\n+  // 4.b. Set F.[[Collator]] to collator.\n+  context->set(JSCollator::ContextSlot::kCollator, *collator);\n+\n+  Handle<SharedFunctionInfo> info = Handle<SharedFunctionInfo>(\n+      native_context->collator_internal_compare_shared_fun(), isolate);\n+  Handle<Map> map = isolate->strict_function_without_prototype_map();\n+\n+  // 4.a. Let F be a new built-in function object as defined in 10.3.3.1.\n+  Handle<JSFunction> new_bound_compare_function =\n+      isolate->factory()->NewFunctionFromSharedFunctionInfo(map, info, context);\n+\n+  // 4.c. Set collator.[[BoundCompare]] to F.\n+  collator->set_bound_compare(*new_bound_compare_function);\n+\n+  // 5. Return collator.[[BoundCompare]].\n+  return *new_bound_compare_function;\n+}\n+\n+BUILTIN(CollatorInternalCompare) {\n+  HandleScope scope(isolate);\n+  Handle<Context> context = Handle<Context>(isolate->context(), isolate);\n+\n+  // 1. Let collator be F.[[Collator]].\n+  // 2. Assert: Type(collator) is Object and collator has an\n+  // [[InitializedCollator]] internal slot.\n+  Handle<JSCollator> collator_holder = Handle<JSCollator>(\n+      JSCollator::cast(context->get(JSCollator::ContextSlot::kCollator)),\n+      isolate);\n+\n+  // 3. If x is not provided, let x be undefined.\n+  Handle<Object> x = args.atOrUndefined(isolate, 1);\n+  // 4. If y is not provided, let y be undefined.\n+  Handle<Object> y = args.atOrUndefined(isolate, 2);\n+\n+  // 5. Let X be ? ToString(x).\n+  Handle<String> string_x;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, string_x,\n+                                     Object::ToString(isolate, x));\n+  // 6. Let Y be ? ToString(y).\n+  Handle<String> string_y;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, string_y,\n+                                     Object::ToString(isolate, y));\n+\n+  // 7. Return CompareStrings(collator, X, Y).\n+  return *Intl::CompareStrings(isolate, collator_holder, string_x, string_y);\n+}\n+\n+BUILTIN(BreakIteratorPrototypeAdoptText) {\n+  const char* const method = \"get Intl.v8BreakIterator.prototype.adoptText\";\n+  HandleScope scope(isolate);\n+\n+  CHECK_RECEIVER(JSObject, break_iterator_holder, method);\n+  if (!Intl::IsObjectOfType(isolate, break_iterator_holder,\n+                            Intl::Type::kBreakIterator)) {\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate,\n+        NewTypeError(MessageTemplate::kIncompatibleMethodReceiver,\n+                     isolate->factory()->NewStringFromAsciiChecked(method),\n+                     break_iterator_holder));\n+  }\n+\n+  Handle<Object> bound_adopt_text =\n+      Handle<Object>(break_iterator_holder->GetEmbedderField(\n+                         V8BreakIterator::kBoundAdoptTextIndex),\n+                     isolate);\n+\n+  if (!bound_adopt_text->IsUndefined(isolate)) {\n+    DCHECK(bound_adopt_text->IsJSFunction());\n+    return *bound_adopt_text;\n+  }\n+\n+  Handle<NativeContext> native_context(isolate->context()->native_context(),\n+                                       isolate);\n+  Handle<Context> context = isolate->factory()->NewBuiltinContext(\n+      native_context, static_cast<int>(V8BreakIterator::ContextSlot::kLength));\n+\n+  context->set(static_cast<int>(V8BreakIterator::ContextSlot::kV8BreakIterator),\n+               *break_iterator_holder);\n+\n+  Handle<SharedFunctionInfo> info = Handle<SharedFunctionInfo>(\n+      native_context->break_iterator_internal_adopt_text_shared_fun(), isolate);\n+  Handle<Map> map = isolate->strict_function_without_prototype_map();\n+\n+  Handle<JSFunction> new_bound_adopt_text_function =\n+      isolate->factory()->NewFunctionFromSharedFunctionInfo(map, info, context);\n+\n+  break_iterator_holder->SetEmbedderField(V8BreakIterator::kBoundAdoptTextIndex,\n+                                          *new_bound_adopt_text_function);\n+\n+  return *new_bound_adopt_text_function;\n+}\n+\n+BUILTIN(BreakIteratorInternalAdoptText) {\n+  HandleScope scope(isolate);\n+  Handle<Context> context = Handle<Context>(isolate->context(), isolate);\n+\n+  Handle<JSObject> break_iterator_holder = Handle<JSObject>(\n+      JSObject::cast(context->get(\n+          static_cast<int>(V8BreakIterator::ContextSlot::kV8BreakIterator))),\n+      isolate);\n+\n+  DCHECK(Intl::IsObjectOfType(isolate, break_iterator_holder,\n+                              Intl::Type::kBreakIterator));\n+\n+  Handle<Object> input_text = args.atOrUndefined(isolate, 1);\n+  Handle<String> text;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, text,\n+                                     Object::ToString(isolate, input_text));\n+\n+  V8BreakIterator::AdoptText(isolate, break_iterator_holder, text);\n+  return ReadOnlyRoots(isolate).undefined_value();\n+}\n+\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "1e16a6b1ded3cab29d1c03e85e302767bbae8d55",
            "filename": "deps/v8/src/builtins/builtins-iterator-gen.cc",
            "status": "modified",
            "additions": 63,
            "deletions": 2,
            "changes": 65,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -3,6 +3,7 @@\n // found in the LICENSE file.\n \n #include \"src/builtins/builtins-iterator-gen.h\"\n+#include \"src/builtins/growable-fixed-array-gen.h\"\n \n #include \"src/heap/factory-inl.h\"\n \n@@ -11,8 +12,8 @@ namespace internal {\n \n using compiler::Node;\n \n-Node* IteratorBuiltinsAssembler::GetIteratorMethod(Node* context,\n-                                                   Node* object) {\n+TNode<Object> IteratorBuiltinsAssembler::GetIteratorMethod(Node* context,\n+                                                           Node* object) {\n   return GetProperty(context, object, factory()->iterator_symbol());\n }\n \n@@ -194,5 +195,65 @@ void IteratorBuiltinsAssembler::IteratorCloseOnException(\n   Unreachable();\n }\n \n+TNode<JSArray> IteratorBuiltinsAssembler::IterableToList(\n+    TNode<Context> context, TNode<Object> iterable, TNode<Object> iterator_fn) {\n+  Label fast_path(this), slow_path(this), done(this);\n+\n+  TVARIABLE(JSArray, created_list);\n+\n+  Branch(IsFastJSArrayWithNoCustomIteration(iterable, context), &fast_path,\n+         &slow_path);\n+\n+  // This is a fast-path for ignoring the iterator.\n+  BIND(&fast_path);\n+  {\n+    TNode<JSArray> input_array = CAST(iterable);\n+    created_list = CAST(CloneFastJSArray(context, input_array));\n+    Goto(&done);\n+  }\n+\n+  BIND(&slow_path);\n+  {\n+    // 1. Let iteratorRecord be ? GetIterator(items, method).\n+    IteratorRecord iterator_record =\n+        GetIterator(context, iterable, iterator_fn);\n+\n+    // 2. Let values be a new empty List.\n+    GrowableFixedArray values(state());\n+\n+    Variable* vars[] = {values.var_array(), values.var_length(),\n+                        values.var_capacity()};\n+    Label loop_start(this, 3, vars), loop_end(this);\n+    Goto(&loop_start);\n+    // 3. Let next be true.\n+    // 4. Repeat, while next is not false\n+    BIND(&loop_start);\n+    {\n+      //  a. Set next to ? IteratorStep(iteratorRecord).\n+      TNode<Object> next =\n+          CAST(IteratorStep(context, iterator_record, &loop_end));\n+      //  b. If next is not false, then\n+      //   i. Let nextValue be ? IteratorValue(next).\n+      TNode<Object> next_value = CAST(IteratorValue(context, next));\n+      //   ii. Append nextValue to the end of the List values.\n+      values.Push(next_value);\n+      Goto(&loop_start);\n+    }\n+    BIND(&loop_end);\n+\n+    created_list = values.ToJSArray(context);\n+    Goto(&done);\n+  }\n+\n+  BIND(&done);\n+  return created_list.value();\n+}\n+\n+TNode<JSArray> IteratorBuiltinsAssembler::IterableToList(\n+    TNode<Context> context, TNode<Object> iterable) {\n+  TNode<Object> method = GetIteratorMethod(context, iterable);\n+  return IterableToList(context, iterable, method);\n+}\n+\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "71d4b9753cc1ad0302c7c38c0e64b5e62ba17cc3",
            "filename": "deps/v8/src/builtins/builtins-iterator-gen.h",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -18,7 +18,7 @@ class IteratorBuiltinsAssembler : public CodeStubAssembler {\n       : CodeStubAssembler(state) {}\n \n   // Returns object[Symbol.iterator].\n-  Node* GetIteratorMethod(Node* context, Node* object);\n+  TNode<Object> GetIteratorMethod(Node* context, Node* object);\n \n   // https://tc39.github.io/ecma262/#sec-getiterator --- never used for\n   // @@asyncIterator.\n@@ -53,6 +53,11 @@ class IteratorBuiltinsAssembler : public CodeStubAssembler {\n                                 Label* if_exception, Variable* exception);\n   void IteratorCloseOnException(Node* context, const IteratorRecord& iterator,\n                                 Variable* exception);\n+\n+  // /#sec-iterabletolist\n+  TNode<JSArray> IterableToList(TNode<Context> context, TNode<Object> iterable,\n+                                TNode<Object> iterator_fn);\n+  TNode<JSArray> IterableToList(TNode<Context> context, TNode<Object> iterable);\n };\n \n }  // namespace internal"
        },
        {
            "sha": "c3f6672b0f13d0c8c5a09cc1794c9a6b0af8c560",
            "filename": "deps/v8/src/builtins/builtins-json.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-json.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-json.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-json.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,9 +2,8 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n-#include \"src/builtins/builtins-utils.h\"\n-\n #include \"src/counters.h\"\n #include \"src/json-parser.h\"\n #include \"src/json-stringifier.h\"\n@@ -31,12 +30,11 @@ BUILTIN(JsonParse) {\n // ES6 section 24.3.2 JSON.stringify.\n BUILTIN(JsonStringify) {\n   HandleScope scope(isolate);\n-  JsonStringifier stringifier(isolate);\n   Handle<Object> object = args.atOrUndefined(isolate, 1);\n   Handle<Object> replacer = args.atOrUndefined(isolate, 2);\n   Handle<Object> indent = args.atOrUndefined(isolate, 3);\n   RETURN_RESULT_OR_FAILURE(isolate,\n-                           stringifier.Stringify(object, replacer, indent));\n+                           JsonStringify(isolate, object, replacer, indent));\n }\n \n }  // namespace internal"
        },
        {
            "sha": "2f21c2d4b1c805db02f0ab6429ac429b4caaadcd",
            "filename": "deps/v8/src/builtins/builtins-number.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,12 +2,15 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-factory.h\"\n #include \"src/conversions.h\"\n #include \"src/counters.h\"\n #include \"src/objects-inl.h\"\n+#ifdef V8_INTL_SUPPORT\n+#include \"src/objects/intl-objects.h\"\n+#endif\n \n namespace v8 {\n namespace internal {\n@@ -114,6 +117,7 @@ BUILTIN(NumberPrototypeToLocaleString) {\n   if (value->IsJSValue()) {\n     value = handle(Handle<JSValue>::cast(value)->value(), isolate);\n   }\n+  // 1. Let x be ? thisNumberValue(this value)\n   if (!value->IsNumber()) {\n     THROW_NEW_ERROR_RETURN_FAILURE(\n         isolate, NewTypeError(MessageTemplate::kNotGeneric,\n@@ -122,8 +126,15 @@ BUILTIN(NumberPrototypeToLocaleString) {\n                               isolate->factory()->Number_string()));\n   }\n \n+#ifdef V8_INTL_SUPPORT\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate,\n+      Intl::NumberToLocaleString(isolate, value, args.atOrUndefined(isolate, 1),\n+                                 args.atOrUndefined(isolate, 2)));\n+#else\n   // Turn the {value} into a String.\n   return *isolate->factory()->NumberToString(value);\n+#endif  // V8_INTL_SUPPORT\n }\n \n // ES6 section 20.1.3.5 Number.prototype.toPrecision ( precision )"
        },
        {
            "sha": "a8d83e641ffb9ab9945522a634b482e991e204de",
            "filename": "deps/v8/src/builtins/builtins-object-gen.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -8,6 +8,7 @@\n #include \"src/heap/factory-inl.h\"\n #include \"src/ic/accessor-assembler.h\"\n #include \"src/ic/keyed-store-generic.h\"\n+#include \"src/objects/js-generator.h\"\n #include \"src/objects/property-descriptor-object.h\"\n #include \"src/objects/shared-function-info.h\"\n \n@@ -199,7 +200,7 @@ TNode<Uint32T> ObjectEntriesValuesBuiltinsAssembler::HasHiddenPrototype(\n void ObjectEntriesValuesBuiltinsAssembler::GetOwnValuesOrEntries(\n     TNode<Context> context, TNode<Object> maybe_object,\n     CollectType collect_type) {\n-  TNode<JSReceiver> receiver = ToObject(context, maybe_object);\n+  TNode<JSReceiver> receiver = ToObject_Inline(context, maybe_object);\n \n   Label if_call_runtime_with_fast_path(this, Label::kDeferred),\n       if_call_runtime(this, Label::kDeferred),\n@@ -292,8 +293,8 @@ TNode<JSArray> ObjectEntriesValuesBuiltinsAssembler::FastGetOwnValuesOrEntries(\n   BIND(&if_has_enum_cache);\n   {\n     GotoIf(WordEqual(object_enum_length, IntPtrConstant(0)), if_no_properties);\n-    TNode<FixedArray> values_or_entries = AllocateFixedArray(\n-        PACKED_ELEMENTS, object_enum_length, kAllowLargeObjectAllocation);\n+    TNode<FixedArray> values_or_entries = CAST(AllocateFixedArray(\n+        PACKED_ELEMENTS, object_enum_length, kAllowLargeObjectAllocation));\n \n     // If in case we have enum_cache,\n     // we can't detect accessor of object until loop through descriptors.\n@@ -360,8 +361,8 @@ TNode<JSArray> ObjectEntriesValuesBuiltinsAssembler::FastGetOwnValuesOrEntries(\n         std::tie(array, elements) = AllocateUninitializedJSArrayWithElements(\n             PACKED_ELEMENTS, array_map, SmiConstant(2), nullptr,\n             IntPtrConstant(2));\n-        StoreFixedArrayElement(elements, 0, next_key, SKIP_WRITE_BARRIER);\n-        StoreFixedArrayElement(elements, 1, value, SKIP_WRITE_BARRIER);\n+        StoreFixedArrayElement(CAST(elements), 0, next_key, SKIP_WRITE_BARRIER);\n+        StoreFixedArrayElement(CAST(elements), 1, value, SKIP_WRITE_BARRIER);\n         value = TNode<JSArray>::UncheckedCast(array);\n       }\n \n@@ -492,7 +493,7 @@ TF_BUILTIN(ObjectAssign, ObjectBuiltinsAssembler) {\n   TNode<Object> target = args.GetOptionalArgumentValue(0);\n \n   // 1. Let to be ? ToObject(target).\n-  TNode<JSReceiver> to = ToObject(context, target);\n+  TNode<JSReceiver> to = ToObject_Inline(context, target);\n \n   Label done(this);\n   // 2. If only one argument was passed, return to.\n@@ -1221,10 +1222,10 @@ TF_BUILTIN(ObjectPrototypeToString, ObjectBuiltinsAssembler) {\n \n // ES6 #sec-object.prototype.valueof\n TF_BUILTIN(ObjectPrototypeValueOf, CodeStubAssembler) {\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n-  Node* context = Parameter(Descriptor::kContext);\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n-  Return(ToObject(context, receiver));\n+  Return(ToObject_Inline(context, receiver));\n }\n \n // ES #sec-object.create\n@@ -1422,7 +1423,7 @@ TF_BUILTIN(HasProperty, ObjectBuiltinsAssembler) {\n   Node* object = Parameter(Descriptor::kObject);\n   Node* context = Parameter(Descriptor::kContext);\n \n-  Return(HasProperty(object, key, context, kHasProperty));\n+  Return(HasProperty(context, object, key, kHasProperty));\n }\n \n TF_BUILTIN(InstanceOf, ObjectBuiltinsAssembler) {\n@@ -1518,7 +1519,7 @@ TF_BUILTIN(ObjectGetOwnPropertyDescriptor, ObjectBuiltinsAssembler) {\n   Node* key = args.GetOptionalArgumentValue(1);\n \n   // 1. Let obj be ? ToObject(O).\n-  object = ToObject(context, object);\n+  object = ToObject_Inline(CAST(context), CAST(object));\n \n   // 2. Let key be ? ToPropertyKey(P).\n   key = ToName(context, key);"
        },
        {
            "sha": "7513f60095688d42d1155edc363cd7dddd36dfee",
            "filename": "deps/v8/src/builtins/builtins-object.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-factory.h\"\n #include \"src/code-stub-assembler.h\"\n@@ -394,10 +394,8 @@ BUILTIN(ObjectGetOwnPropertyDescriptors) {\n     if (!did_get_descriptor.FromJust()) continue;\n     Handle<Object> from_descriptor = descriptor.ToObject(isolate);\n \n-    LookupIterator it = LookupIterator::PropertyOrElement(\n-        isolate, descriptors, key, descriptors, LookupIterator::OWN);\n-    Maybe<bool> success =\n-        JSReceiver::CreateDataProperty(&it, from_descriptor, kDontThrow);\n+    Maybe<bool> success = JSReceiver::CreateDataProperty(\n+        isolate, descriptors, key, from_descriptor, kDontThrow);\n     CHECK(success.FromJust());\n   }\n "
        },
        {
            "sha": "241a2041bdf24587a60ed10edbf588fe1ae48a10",
            "filename": "deps/v8/src/builtins/builtins-promise-gen.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -709,9 +709,10 @@ void PromiseBuiltinsAssembler::SetForwardingHandlerIfTrue(\n     Node* context, Node* condition, const NodeGenerator& object) {\n   Label done(this);\n   GotoIfNot(condition, &done);\n-  CallRuntime(Runtime::kSetProperty, context, object(),\n-              HeapConstant(factory()->promise_forwarding_handler_symbol()),\n-              TrueConstant(), SmiConstant(LanguageMode::kStrict));\n+  SetPropertyStrict(\n+      CAST(context), CAST(object()),\n+      HeapConstant(factory()->promise_forwarding_handler_symbol()),\n+      TrueConstant());\n   Goto(&done);\n   BIND(&done);\n }\n@@ -723,9 +724,9 @@ void PromiseBuiltinsAssembler::SetPromiseHandledByIfTrue(\n   GotoIfNot(condition, &done);\n   GotoIf(TaggedIsSmi(promise), &done);\n   GotoIfNot(HasInstanceType(promise, JS_PROMISE_TYPE), &done);\n-  CallRuntime(Runtime::kSetProperty, context, promise,\n-              HeapConstant(factory()->promise_handled_by_symbol()),\n-              handled_by(), SmiConstant(LanguageMode::kStrict));\n+  SetPropertyStrict(CAST(context), CAST(promise),\n+                    HeapConstant(factory()->promise_handled_by_symbol()),\n+                    CAST(handled_by()));\n   Goto(&done);\n   BIND(&done);\n }\n@@ -2118,8 +2119,8 @@ TF_BUILTIN(PromiseAllResolveElementClosure, PromiseBuiltinsAssembler) {\n       CSA_ASSERT(this, IntPtrLessThan(index, new_elements_length));\n       CSA_ASSERT(this, IntPtrLessThan(elements_length, new_elements_length));\n       TNode<FixedArray> new_elements =\n-          AllocateFixedArray(PACKED_ELEMENTS, new_elements_length,\n-                             AllocationFlag::kAllowLargeObjectAllocation);\n+          CAST(AllocateFixedArray(PACKED_ELEMENTS, new_elements_length,\n+                                  AllocationFlag::kAllowLargeObjectAllocation));\n       CopyFixedArrayElements(PACKED_ELEMENTS, elements, PACKED_ELEMENTS,\n                              new_elements, elements_length,\n                              new_elements_length);"
        },
        {
            "sha": "88c0632c15ec4c525315d930174b7949439306cd",
            "filename": "deps/v8/src/builtins/builtins-promise.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/objects-inl.h\"\n "
        },
        {
            "sha": "34caf586885cc641a61781bd5fab4a32e89e37fb",
            "filename": "deps/v8/src/builtins/builtins-proxy-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -460,7 +460,7 @@ TF_BUILTIN(ProxyHasProperty, ProxiesCodeStubAssembler) {\n   BIND(&trap_undefined);\n   {\n     // 7.a. Return ? target.[[HasProperty]](P).\n-    TailCallBuiltin(Builtins::kHasProperty, context, name, target);\n+    TailCallBuiltin(Builtins::kHasProperty, context, target, name);\n   }\n \n   BIND(&return_false);"
        },
        {
            "sha": "95845fca4ef03a23a4acca6cae2a7950612c1a51",
            "filename": "deps/v8/src/builtins/builtins-proxy-gen.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -6,6 +6,7 @@\n #define V8_BUILTINS_BUILTINS_PROXY_GEN_H_\n \n #include \"src/code-stub-assembler.h\"\n+#include \"src/objects/js-proxy.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "52e08275c7350ea8e1472113bcbe6049df737a32",
            "filename": "deps/v8/src/builtins/builtins-reflect-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -18,7 +18,7 @@ TF_BUILTIN(ReflectHas, CodeStubAssembler) {\n   ThrowIfNotJSReceiver(context, target, MessageTemplate::kCalledOnNonObject,\n                        \"Reflect.has\");\n \n-  Return(CallBuiltin(Builtins::kHasProperty, context, key, target));\n+  Return(CallBuiltin(Builtins::kHasProperty, context, target, key));\n }\n \n }  // namespace internal"
        },
        {
            "sha": "3dd07a796a18daeafe052b9e83c0dc207b862985",
            "filename": "deps/v8/src/builtins/builtins-reflect.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,9 +2,8 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n-#include \"src/builtins/builtins-utils.h\"\n-\n #include \"src/counters.h\"\n #include \"src/keys.h\"\n #include \"src/lookup.h\""
        },
        {
            "sha": "206602aaa7d32ab508a5207d6e60a71ed367b9b1",
            "filename": "deps/v8/src/builtins/builtins-regexp-gen.cc",
            "status": "modified",
            "additions": 405,
            "deletions": 450,
            "changes": 855,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -24,31 +24,32 @@ using compiler::Node;\n template <class T>\n using TNode = compiler::TNode<T>;\n \n+TNode<Smi> RegExpBuiltinsAssembler::SmiZero() { return SmiConstant(0); }\n+\n+TNode<IntPtrT> RegExpBuiltinsAssembler::IntPtrZero() {\n+  return IntPtrConstant(0);\n+}\n+\n // -----------------------------------------------------------------------------\n // ES6 section 21.2 RegExp Objects\n \n-Node* RegExpBuiltinsAssembler::AllocateRegExpResult(Node* context, Node* length,\n-                                                    Node* index, Node* input) {\n-  CSA_ASSERT(this, IsContext(context));\n-  CSA_ASSERT(this, TaggedIsSmi(index));\n-  CSA_ASSERT(this, TaggedIsSmi(length));\n-  CSA_ASSERT(this, IsString(input));\n-\n+TNode<JSRegExpResult> RegExpBuiltinsAssembler::AllocateRegExpResult(\n+    TNode<Context> context, TNode<Smi> length, TNode<Smi> index,\n+    TNode<String> input) {\n #ifdef DEBUG\n-  TNode<Smi> const max_length =\n-      SmiConstant(JSArray::kInitialMaxFastElementArray);\n-  CSA_ASSERT(this, SmiLessThanOrEqual(CAST(length), max_length));\n+  TNode<Smi> max_length = SmiConstant(JSArray::kInitialMaxFastElementArray);\n+  CSA_ASSERT(this, SmiLessThanOrEqual(length, max_length));\n #endif  // DEBUG\n \n   // Allocate the JSRegExpResult together with its elements fixed array.\n   // Initial preparations first.\n \n-  Node* const length_intptr = SmiUntag(length);\n+  TNode<IntPtrT> length_intptr = SmiUntag(length);\n   const ElementsKind elements_kind = PACKED_ELEMENTS;\n \n-  Node* const elements_size = GetFixedArrayAllocationSize(\n+  TNode<IntPtrT> elements_size = GetFixedArrayAllocationSize(\n       length_intptr, elements_kind, INTPTR_PARAMETERS);\n-  Node* const total_size =\n+  TNode<IntPtrT> total_size =\n       IntPtrAdd(elements_size, IntPtrConstant(JSRegExpResult::kSize));\n \n   static const int kRegExpResultOffset = 0;\n@@ -57,14 +58,14 @@ Node* RegExpBuiltinsAssembler::AllocateRegExpResult(Node* context, Node* length,\n \n   // The folded allocation.\n \n-  Node* const result = Allocate(total_size);\n-  Node* const elements = InnerAllocate(result, kElementsOffset);\n+  Node* result = Allocate(total_size);\n+  Node* elements = InnerAllocate(result, kElementsOffset);\n \n   // Initialize the JSRegExpResult.\n \n-  Node* const native_context = LoadNativeContext(context);\n-  Node* const map =\n-      LoadContextElement(native_context, Context::REGEXP_RESULT_MAP_INDEX);\n+  TNode<Context> native_context = LoadNativeContext(context);\n+  TNode<Map> map = CAST(\n+      LoadContextElement(native_context, Context::REGEXP_RESULT_MAP_INDEX));\n   StoreMapNoWriteBarrier(result, map);\n \n   StoreObjectFieldNoWriteBarrier(result, JSArray::kPropertiesOrHashOffset,\n@@ -85,11 +86,10 @@ Node* RegExpBuiltinsAssembler::AllocateRegExpResult(Node* context, Node* length,\n   StoreMapNoWriteBarrier(elements, map_index);\n   StoreObjectFieldNoWriteBarrier(elements, FixedArray::kLengthOffset, length);\n \n-  Node* const zero = IntPtrConstant(0);\n-  FillFixedArrayWithValue(elements_kind, elements, zero, length_intptr,\n+  FillFixedArrayWithValue(elements_kind, elements, IntPtrZero(), length_intptr,\n                           Heap::kUndefinedValueRootIndex);\n \n-  return result;\n+  return CAST(result);\n }\n \n TNode<Object> RegExpBuiltinsAssembler::RegExpCreate(\n@@ -114,21 +114,23 @@ TNode<Object> RegExpBuiltinsAssembler::RegExpCreate(TNode<Context> context,\n                      pattern, flags);\n }\n \n-TNode<Object> RegExpBuiltinsAssembler::FastLoadLastIndex(Node* regexp) {\n+TNode<Object> RegExpBuiltinsAssembler::FastLoadLastIndex(\n+    TNode<JSRegExp> regexp) {\n   // Load the in-object field.\n   static const int field_offset =\n       JSRegExp::kSize + JSRegExp::kLastIndexFieldIndex * kPointerSize;\n   return LoadObjectField(regexp, field_offset);\n }\n \n-Node* RegExpBuiltinsAssembler::SlowLoadLastIndex(Node* context, Node* regexp) {\n-  // Load through the GetProperty stub.\n+TNode<Object> RegExpBuiltinsAssembler::SlowLoadLastIndex(TNode<Context> context,\n+                                                         TNode<Object> regexp) {\n   return GetProperty(context, regexp, isolate()->factory()->lastIndex_string());\n }\n \n-Node* RegExpBuiltinsAssembler::LoadLastIndex(Node* context, Node* regexp,\n-                                             bool is_fastpath) {\n-  return is_fastpath ? FastLoadLastIndex(regexp)\n+TNode<Object> RegExpBuiltinsAssembler::LoadLastIndex(TNode<Context> context,\n+                                                     TNode<Object> regexp,\n+                                                     bool is_fastpath) {\n+  return is_fastpath ? FastLoadLastIndex(CAST(regexp))\n                      : SlowLoadLastIndex(context, regexp);\n }\n \n@@ -143,12 +145,8 @@ void RegExpBuiltinsAssembler::FastStoreLastIndex(Node* regexp, Node* value) {\n \n void RegExpBuiltinsAssembler::SlowStoreLastIndex(Node* context, Node* regexp,\n                                                  Node* value) {\n-  // Store through runtime.\n-  // TODO(ishell): Use SetPropertyStub here once available.\n   Node* const name = HeapConstant(isolate()->factory()->lastIndex_string());\n-  Node* const language_mode = SmiConstant(LanguageMode::kStrict);\n-  CallRuntime(Runtime::kSetProperty, context, regexp, name, value,\n-              language_mode);\n+  SetPropertyStrict(CAST(context), CAST(regexp), CAST(name), CAST(value));\n }\n \n void RegExpBuiltinsAssembler::StoreLastIndex(Node* context, Node* regexp,\n@@ -160,118 +158,116 @@ void RegExpBuiltinsAssembler::StoreLastIndex(Node* context, Node* regexp,\n   }\n }\n \n-Node* RegExpBuiltinsAssembler::ConstructNewResultFromMatchInfo(\n-    Node* const context, Node* const regexp, Node* const match_info,\n-    TNode<String> const string) {\n-  CSA_ASSERT(this, IsFixedArrayMap(LoadMap(match_info)));\n-  CSA_ASSERT(this, IsJSRegExp(regexp));\n-\n+TNode<JSRegExpResult> RegExpBuiltinsAssembler::ConstructNewResultFromMatchInfo(\n+    TNode<Context> context, TNode<JSReceiver> maybe_regexp,\n+    TNode<RegExpMatchInfo> match_info, TNode<String> string) {\n   Label named_captures(this), out(this);\n \n   TNode<IntPtrT> num_indices = SmiUntag(CAST(LoadFixedArrayElement(\n       match_info, RegExpMatchInfo::kNumberOfCapturesIndex)));\n-  TNode<Smi> const num_results = SmiTag(WordShr(num_indices, 1));\n-  Node* const start =\n-      LoadFixedArrayElement(match_info, RegExpMatchInfo::kFirstCaptureIndex);\n-  Node* const end = LoadFixedArrayElement(\n-      match_info, RegExpMatchInfo::kFirstCaptureIndex + 1);\n+  TNode<Smi> num_results = SmiTag(WordShr(num_indices, 1));\n+  TNode<Smi> start = CAST(\n+      LoadFixedArrayElement(match_info, RegExpMatchInfo::kFirstCaptureIndex));\n+  TNode<Smi> end = CAST(LoadFixedArrayElement(\n+      match_info, RegExpMatchInfo::kFirstCaptureIndex + 1));\n \n   // Calculate the substring of the first match before creating the result array\n   // to avoid an unnecessary write barrier storing the first result.\n \n   TNode<String> first =\n       CAST(CallBuiltin(Builtins::kSubString, context, string, start, end));\n \n-  Node* const result =\n+  TNode<JSRegExpResult> result =\n       AllocateRegExpResult(context, num_results, start, string);\n-  Node* const result_elements = LoadElements(result);\n+  TNode<FixedArray> result_elements = CAST(LoadElements(result));\n \n   StoreFixedArrayElement(result_elements, 0, first, SKIP_WRITE_BARRIER);\n \n   // If no captures exist we can skip named capture handling as well.\n   GotoIf(SmiEqual(num_results, SmiConstant(1)), &out);\n \n   // Store all remaining captures.\n-  Node* const limit = IntPtrAdd(\n+  TNode<IntPtrT> limit = IntPtrAdd(\n       IntPtrConstant(RegExpMatchInfo::kFirstCaptureIndex), num_indices);\n \n-  VARIABLE(var_from_cursor, MachineType::PointerRepresentation(),\n-           IntPtrConstant(RegExpMatchInfo::kFirstCaptureIndex + 2));\n-  VARIABLE(var_to_cursor, MachineType::PointerRepresentation(),\n-           IntPtrConstant(1));\n+  TVARIABLE(IntPtrT, var_from_cursor,\n+            IntPtrConstant(RegExpMatchInfo::kFirstCaptureIndex + 2));\n+  TVARIABLE(IntPtrT, var_to_cursor, IntPtrConstant(1));\n \n   Variable* vars[] = {&var_from_cursor, &var_to_cursor};\n   Label loop(this, 2, vars);\n \n   Goto(&loop);\n   BIND(&loop);\n   {\n-    Node* const from_cursor = var_from_cursor.value();\n-    Node* const to_cursor = var_to_cursor.value();\n-    TNode<Smi> const start =\n-        CAST(LoadFixedArrayElement(match_info, from_cursor));\n+    TNode<IntPtrT> from_cursor = var_from_cursor.value();\n+    TNode<IntPtrT> to_cursor = var_to_cursor.value();\n+    TNode<Smi> start = CAST(LoadFixedArrayElement(match_info, from_cursor));\n \n     Label next_iter(this);\n     GotoIf(SmiEqual(start, SmiConstant(-1)), &next_iter);\n \n-    Node* const from_cursor_plus1 = IntPtrAdd(from_cursor, IntPtrConstant(1));\n-    Node* const end = LoadFixedArrayElement(match_info, from_cursor_plus1);\n+    TNode<IntPtrT> from_cursor_plus1 =\n+        IntPtrAdd(from_cursor, IntPtrConstant(1));\n+    TNode<Smi> end = CAST(LoadFixedArrayElement(match_info, from_cursor_plus1));\n \n-    TNode<String> const capture =\n+    TNode<String> capture =\n         CAST(CallBuiltin(Builtins::kSubString, context, string, start, end));\n     StoreFixedArrayElement(result_elements, to_cursor, capture);\n     Goto(&next_iter);\n \n     BIND(&next_iter);\n-    var_from_cursor.Bind(IntPtrAdd(from_cursor, IntPtrConstant(2)));\n-    var_to_cursor.Bind(IntPtrAdd(to_cursor, IntPtrConstant(1)));\n+    var_from_cursor = IntPtrAdd(from_cursor, IntPtrConstant(2));\n+    var_to_cursor = IntPtrAdd(to_cursor, IntPtrConstant(1));\n     Branch(UintPtrLessThan(var_from_cursor.value(), limit), &loop,\n            &named_captures);\n   }\n \n   BIND(&named_captures);\n   {\n+    CSA_ASSERT(this, SmiGreaterThan(num_results, SmiConstant(1)));\n+\n     // We reach this point only if captures exist, implying that this is an\n     // IRREGEXP JSRegExp.\n \n-    CSA_ASSERT(this, IsJSRegExp(regexp));\n-    CSA_ASSERT(this, SmiGreaterThan(num_results, SmiConstant(1)));\n+    TNode<JSRegExp> regexp = CAST(maybe_regexp);\n \n     // Preparations for named capture properties. Exit early if the result does\n     // not have any named captures to minimize performance impact.\n \n-    Node* const data = LoadObjectField(regexp, JSRegExp::kDataOffset);\n+    TNode<FixedArray> data =\n+        CAST(LoadObjectField(regexp, JSRegExp::kDataOffset));\n     CSA_ASSERT(this,\n                SmiEqual(CAST(LoadFixedArrayElement(data, JSRegExp::kTagIndex)),\n                         SmiConstant(JSRegExp::IRREGEXP)));\n \n     // The names fixed array associates names at even indices with a capture\n     // index at odd indices.\n-    TNode<Object> const maybe_names =\n+    TNode<Object> maybe_names =\n         LoadFixedArrayElement(data, JSRegExp::kIrregexpCaptureNameMapIndex);\n-    GotoIf(WordEqual(maybe_names, SmiConstant(0)), &out);\n+    GotoIf(WordEqual(maybe_names, SmiZero()), &out);\n \n     // Allocate a new object to store the named capture properties.\n     // TODO(jgruber): Could be optimized by adding the object map to the heap\n     // root list.\n \n-    Node* const native_context = LoadNativeContext(context);\n-    Node* const map = LoadContextElement(\n-        native_context, Context::SLOW_OBJECT_WITH_NULL_PROTOTYPE_MAP);\n-    Node* const properties =\n+    TNode<Context> native_context = LoadNativeContext(context);\n+    TNode<Map> map = CAST(LoadContextElement(\n+        native_context, Context::SLOW_OBJECT_WITH_NULL_PROTOTYPE_MAP));\n+    TNode<NameDictionary> properties =\n         AllocateNameDictionary(NameDictionary::kInitialCapacity);\n \n-    Node* const group_object = AllocateJSObjectFromMap(map, properties);\n+    TNode<JSObject> group_object =\n+        CAST(AllocateJSObjectFromMap(map, properties));\n     StoreObjectField(result, JSRegExpResult::kGroupsOffset, group_object);\n \n     // One or more named captures exist, add a property for each one.\n \n     TNode<FixedArray> names = CAST(maybe_names);\n-    TNode<IntPtrT> const names_length = LoadAndUntagFixedArrayBaseLength(names);\n-    CSA_ASSERT(this, IntPtrGreaterThan(names_length, IntPtrConstant(0)));\n+    TNode<IntPtrT> names_length = LoadAndUntagFixedArrayBaseLength(names);\n+    CSA_ASSERT(this, IntPtrGreaterThan(names_length, IntPtrZero()));\n \n-    VARIABLE(var_i, MachineType::PointerRepresentation());\n-    var_i.Bind(IntPtrConstant(0));\n+    TVARIABLE(IntPtrT, var_i, IntPtrZero());\n \n     Variable* vars[] = {&var_i};\n     const int vars_count = sizeof(vars) / sizeof(vars[0]);\n@@ -280,22 +276,22 @@ Node* RegExpBuiltinsAssembler::ConstructNewResultFromMatchInfo(\n     Goto(&loop);\n     BIND(&loop);\n     {\n-      Node* const i = var_i.value();\n-      Node* const i_plus_1 = IntPtrAdd(i, IntPtrConstant(1));\n-      Node* const i_plus_2 = IntPtrAdd(i_plus_1, IntPtrConstant(1));\n+      TNode<IntPtrT> i = var_i.value();\n+      TNode<IntPtrT> i_plus_1 = IntPtrAdd(i, IntPtrConstant(1));\n+      TNode<IntPtrT> i_plus_2 = IntPtrAdd(i_plus_1, IntPtrConstant(1));\n \n-      Node* const name = LoadFixedArrayElement(names, i);\n-      Node* const index = LoadFixedArrayElement(names, i_plus_1);\n-      Node* const capture =\n-          LoadFixedArrayElement(result_elements, SmiUntag(index));\n+      TNode<String> name = CAST(LoadFixedArrayElement(names, i));\n+      TNode<Smi> index = CAST(LoadFixedArrayElement(names, i_plus_1));\n+      TNode<HeapObject> capture =\n+          CAST(LoadFixedArrayElement(result_elements, SmiUntag(index)));\n \n       // TODO(jgruber): Calling into runtime to create each property is slow.\n       // Either we should create properties entirely in CSA (should be doable),\n       // or only call runtime once and loop there.\n       CallRuntime(Runtime::kCreateDataProperty, context, group_object, name,\n                   capture);\n \n-      var_i.Bind(i_plus_2);\n+      var_i = i_plus_2;\n       Branch(IntPtrGreaterThanOrEqual(var_i.value(), names_length), &out,\n              &loop);\n     }\n@@ -325,42 +321,30 @@ void RegExpBuiltinsAssembler::GetStringPointers(\n   var_string_end->Bind(IntPtrAdd(string_data, to_offset));\n }\n \n-Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n-                                                  Node* const regexp,\n-                                                  Node* const string,\n-                                                  Node* const last_index,\n-                                                  Node* const match_info) {\n+TNode<HeapObject> RegExpBuiltinsAssembler::RegExpExecInternal(\n+    TNode<Context> context, TNode<JSRegExp> regexp, TNode<String> string,\n+    TNode<Number> last_index, TNode<RegExpMatchInfo> match_info) {\n // Just jump directly to runtime if native RegExp is not selected at compile\n // time or if regexp entry in generated code is turned off runtime switch or\n // at compilation.\n #ifdef V8_INTERPRETED_REGEXP\n-  return CallRuntime(Runtime::kRegExpExec, context, regexp, string, last_index,\n-                     match_info);\n+  return CAST(CallRuntime(Runtime::kRegExpExec, context, regexp, string,\n+                          last_index, match_info));\n #else  // V8_INTERPRETED_REGEXP\n-  CSA_ASSERT(this, TaggedIsNotSmi(regexp));\n-  CSA_ASSERT(this, IsJSRegExp(regexp));\n-\n-  CSA_ASSERT(this, TaggedIsNotSmi(string));\n-  CSA_ASSERT(this, IsString(string));\n-\n-  CSA_ASSERT(this, IsNumber(last_index));\n-  CSA_ASSERT(this, IsFixedArrayMap(LoadReceiverMap(match_info)));\n-\n-  Node* const int_zero = IntPtrConstant(0);\n-\n   ToDirectStringAssembler to_direct(state(), string);\n \n-  VARIABLE(var_result, MachineRepresentation::kTagged);\n+  TVARIABLE(HeapObject, var_result);\n   Label out(this), atom(this), runtime(this, Label::kDeferred);\n \n   // External constants.\n-  Node* const isolate_address =\n+  TNode<ExternalReference> isolate_address =\n       ExternalConstant(ExternalReference::isolate_address(isolate()));\n-  Node* const regexp_stack_memory_address_address = ExternalConstant(\n-      ExternalReference::address_of_regexp_stack_memory_address(isolate()));\n-  Node* const regexp_stack_memory_size_address = ExternalConstant(\n+  TNode<ExternalReference> regexp_stack_memory_address_address =\n+      ExternalConstant(\n+          ExternalReference::address_of_regexp_stack_memory_address(isolate()));\n+  TNode<ExternalReference> regexp_stack_memory_size_address = ExternalConstant(\n       ExternalReference::address_of_regexp_stack_memory_size(isolate()));\n-  Node* const static_offsets_vector_address = ExternalConstant(\n+  TNode<ExternalReference> static_offsets_vector_address = ExternalConstant(\n       ExternalReference::address_of_static_offsets_vector(isolate()));\n \n   // At this point, last_index is definitely a canonicalized non-negative\n@@ -374,21 +358,18 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n   CSA_ASSERT(this, IsNumberPositive(last_index));\n   GotoIf(TaggedIsNotSmi(last_index), &if_failure);\n \n-  Node* const int_string_length = LoadStringLengthAsWord(string);\n-  Node* const int_last_index = SmiUntag(last_index);\n+  TNode<IntPtrT> int_string_length = LoadStringLengthAsWord(string);\n+  TNode<IntPtrT> int_last_index = SmiUntag(CAST(last_index));\n \n   GotoIf(UintPtrGreaterThan(int_last_index, int_string_length), &if_failure);\n \n-  Node* const data = LoadObjectField(regexp, JSRegExp::kDataOffset);\n+  // Since the RegExp has been compiled, data contains a fixed array.\n+  TNode<FixedArray> data = CAST(LoadObjectField(regexp, JSRegExp::kDataOffset));\n   {\n-    // Check that the RegExp has been compiled (data contains a fixed array).\n-    CSA_ASSERT(this, TaggedIsNotSmi(data));\n-    CSA_ASSERT(this, HasInstanceType(data, FIXED_ARRAY_TYPE));\n-\n     // Dispatch on the type of the RegExp.\n     {\n       Label next(this), unreachable(this, Label::kDeferred);\n-      Node* const tag = LoadAndUntagToWord32FixedArrayElement(\n+      TNode<Int32T> tag = LoadAndUntagToWord32FixedArrayElement(\n           data, IntPtrConstant(JSRegExp::kTagIndex));\n \n       int32_t values[] = {\n@@ -407,22 +388,21 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n \n     // Check (number_of_captures + 1) * 2 <= offsets vector size\n     // Or              number_of_captures <= offsets vector size / 2 - 1\n-    TNode<Smi> const capture_count =\n+    TNode<Smi> capture_count =\n         CAST(LoadFixedArrayElement(data, JSRegExp::kIrregexpCaptureCountIndex));\n \n-    STATIC_ASSERT(Isolate::kJSRegexpStaticOffsetsVectorSize >= 2);\n-    GotoIf(SmiAbove(\n-               capture_count,\n-               SmiConstant(Isolate::kJSRegexpStaticOffsetsVectorSize / 2 - 1)),\n+    const int kOffsetsSize = Isolate::kJSRegexpStaticOffsetsVectorSize;\n+    STATIC_ASSERT(kOffsetsSize >= 2);\n+    GotoIf(SmiAbove(capture_count, SmiConstant(kOffsetsSize / 2 - 1)),\n            &runtime);\n   }\n \n   // Ensure that a RegExp stack is allocated. This check is after branching off\n   // for ATOM regexps to avoid unnecessary trips to runtime.\n   {\n-    Node* const stack_size =\n-        Load(MachineType::IntPtr(), regexp_stack_memory_size_address);\n-    GotoIf(IntPtrEqual(stack_size, int_zero), &runtime);\n+    TNode<IntPtrT> stack_size = UncheckedCast<IntPtrT>(\n+        Load(MachineType::IntPtr(), regexp_stack_memory_size_address));\n+    GotoIf(IntPtrEqual(stack_size, IntPtrZero()), &runtime);\n   }\n \n   // Unpack the string if possible.\n@@ -432,12 +412,12 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n   // Load the irregexp code object and offsets into the subject string. Both\n   // depend on whether the string is one- or two-byte.\n \n-  VARIABLE(var_string_start, MachineType::PointerRepresentation());\n-  VARIABLE(var_string_end, MachineType::PointerRepresentation());\n-  VARIABLE(var_code, MachineRepresentation::kTagged);\n+  TVARIABLE(RawPtrT, var_string_start);\n+  TVARIABLE(RawPtrT, var_string_end);\n+  TVARIABLE(Object, var_code);\n \n   {\n-    Node* const direct_string_data = to_direct.PointerToData(&runtime);\n+    TNode<RawPtrT> direct_string_data = to_direct.PointerToData(&runtime);\n \n     Label next(this), if_isonebyte(this), if_istwobyte(this, Label::kDeferred);\n     Branch(IsOneByteStringInstanceType(to_direct.instance_type()),\n@@ -448,8 +428,8 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n       GetStringPointers(direct_string_data, to_direct.offset(), int_last_index,\n                         int_string_length, String::ONE_BYTE_ENCODING,\n                         &var_string_start, &var_string_end);\n-      var_code.Bind(\n-          LoadFixedArrayElement(data, JSRegExp::kIrregexpLatin1CodeIndex));\n+      var_code =\n+          LoadFixedArrayElement(data, JSRegExp::kIrregexpLatin1CodeIndex);\n       Goto(&next);\n     }\n \n@@ -458,8 +438,7 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n       GetStringPointers(direct_string_data, to_direct.offset(), int_last_index,\n                         int_string_length, String::TWO_BYTE_ENCODING,\n                         &var_string_start, &var_string_end);\n-      var_code.Bind(\n-          LoadFixedArrayElement(data, JSRegExp::kIrregexpUC16CodeIndex));\n+      var_code = LoadFixedArrayElement(data, JSRegExp::kIrregexpUC16CodeIndex);\n       Goto(&next);\n     }\n \n@@ -469,15 +448,19 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n   // Check that the irregexp code has been generated for the actual string\n   // encoding. If it has, the field contains a code object; and otherwise it\n   // contains the uninitialized sentinel as a smi.\n+#ifdef DEBUG\n+  {\n+    Label next(this);\n+    GotoIfNot(TaggedIsSmi(var_code.value()), &next);\n+    CSA_ASSERT(this, SmiEqual(CAST(var_code.value()),\n+                              SmiConstant(JSRegExp::kUninitializedValue)));\n+    Goto(&next);\n+    BIND(&next);\n+  }\n+#endif\n \n-  Node* const code = var_code.value();\n-  CSA_ASSERT_BRANCH(this, [=](Label* ok, Label* not_ok) {\n-    GotoIfNot(TaggedIsSmi(code), ok);\n-    Branch(SmiEqual(CAST(code), SmiConstant(JSRegExp::kUninitializedValue)), ok,\n-           not_ok);\n-  });\n-  GotoIf(TaggedIsSmi(code), &runtime);\n-  CSA_ASSERT(this, HasInstanceType(code, CODE_TYPE));\n+  GotoIf(TaggedIsSmi(var_code.value()), &runtime);\n+  TNode<Code> code = CAST(var_code.value());\n \n   Label if_success(this), if_exception(this, Label::kDeferred);\n   {\n@@ -494,61 +477,62 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n \n     // Argument 0: Original subject string.\n     MachineType arg0_type = type_tagged;\n-    Node* const arg0 = string;\n+    TNode<String> arg0 = string;\n \n     // Argument 1: Previous index.\n     MachineType arg1_type = type_int32;\n-    Node* const arg1 = TruncateIntPtrToInt32(int_last_index);\n+    TNode<Int32T> arg1 = TruncateIntPtrToInt32(int_last_index);\n \n     // Argument 2: Start of string data.\n     MachineType arg2_type = type_ptr;\n-    Node* const arg2 = var_string_start.value();\n+    TNode<RawPtrT> arg2 = var_string_start.value();\n \n     // Argument 3: End of string data.\n     MachineType arg3_type = type_ptr;\n-    Node* const arg3 = var_string_end.value();\n+    TNode<RawPtrT> arg3 = var_string_end.value();\n \n     // Argument 4: static offsets vector buffer.\n     MachineType arg4_type = type_ptr;\n-    Node* const arg4 = static_offsets_vector_address;\n+    TNode<ExternalReference> arg4 = static_offsets_vector_address;\n \n     // Argument 5: Set the number of capture registers to zero to force global\n     // regexps to behave as non-global.  This does not affect non-global\n     // regexps.\n     MachineType arg5_type = type_int32;\n-    Node* const arg5 = Int32Constant(0);\n+    TNode<Int32T> arg5 = Int32Constant(0);\n \n     // Argument 6: Start (high end) of backtracking stack memory area.\n-    Node* const stack_start =\n-        Load(MachineType::Pointer(), regexp_stack_memory_address_address);\n-    Node* const stack_size =\n-        Load(MachineType::IntPtr(), regexp_stack_memory_size_address);\n-    Node* const stack_end = IntPtrAdd(stack_start, stack_size);\n+    TNode<RawPtrT> stack_start = UncheckedCast<RawPtrT>(\n+        Load(MachineType::Pointer(), regexp_stack_memory_address_address));\n+    TNode<IntPtrT> stack_size = UncheckedCast<IntPtrT>(\n+        Load(MachineType::IntPtr(), regexp_stack_memory_size_address));\n+    TNode<RawPtrT> stack_end =\n+        ReinterpretCast<RawPtrT>(IntPtrAdd(stack_start, stack_size));\n \n     MachineType arg6_type = type_ptr;\n-    Node* const arg6 = stack_end;\n+    TNode<RawPtrT> arg6 = stack_end;\n \n     // Argument 7: Indicate that this is a direct call from JavaScript.\n     MachineType arg7_type = type_int32;\n-    Node* const arg7 = Int32Constant(1);\n+    TNode<Int32T> arg7 = Int32Constant(1);\n \n     // Argument 8: Pass current isolate address.\n     MachineType arg8_type = type_ptr;\n-    Node* const arg8 = isolate_address;\n+    TNode<ExternalReference> arg8 = isolate_address;\n \n-    Node* const code_entry =\n+    TNode<RawPtrT> code_entry = ReinterpretCast<RawPtrT>(\n         IntPtrAdd(BitcastTaggedToWord(code),\n-                  IntPtrConstant(Code::kHeaderSize - kHeapObjectTag));\n+                  IntPtrConstant(Code::kHeaderSize - kHeapObjectTag)));\n \n-    Node* const result = CallCFunction9(\n+    TNode<Int32T> result = UncheckedCast<Int32T>(CallCFunction9(\n         retval_type, arg0_type, arg1_type, arg2_type, arg3_type, arg4_type,\n         arg5_type, arg6_type, arg7_type, arg8_type, code_entry, arg0, arg1,\n-        arg2, arg3, arg4, arg5, arg6, arg7, arg8);\n+        arg2, arg3, arg4, arg5, arg6, arg7, arg8));\n \n     // Check the result.\n     // We expect exactly one result since we force the called regexp to behave\n     // as non-global.\n-    Node* const int_result = ChangeInt32ToIntPtr(result);\n+    TNode<IntPtrT> int_result = ChangeInt32ToIntPtr(result);\n     GotoIf(IntPtrEqual(int_result,\n                        IntPtrConstant(NativeRegExpMacroAssembler::SUCCESS)),\n            &if_success);\n@@ -570,13 +554,13 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n     // Check that the last match info has space for the capture registers and\n     // the additional information. Ensure no overflow in add.\n     STATIC_ASSERT(FixedArray::kMaxLength < kMaxInt - FixedArray::kLengthOffset);\n-    TNode<Smi> const available_slots =\n+    TNode<Smi> available_slots =\n         SmiSub(LoadFixedArrayBaseLength(match_info),\n                SmiConstant(RegExpMatchInfo::kLastMatchOverhead));\n-    TNode<Smi> const capture_count =\n+    TNode<Smi> capture_count =\n         CAST(LoadFixedArrayElement(data, JSRegExp::kIrregexpCaptureCountIndex));\n     // Calculate number of register_count = (capture_count + 1) * 2.\n-    TNode<Smi> const register_count =\n+    TNode<Smi> register_count =\n         SmiShl(SmiAdd(capture_count, SmiConstant(1)), 1);\n     GotoIf(SmiGreaterThan(register_count, available_slots), &runtime);\n \n@@ -591,43 +575,43 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n \n     // Fill match and capture offsets in match_info.\n     {\n-      Node* const limit_offset = ElementOffsetFromIndex(\n+      TNode<IntPtrT> limit_offset = ElementOffsetFromIndex(\n           register_count, INT32_ELEMENTS, SMI_PARAMETERS, 0);\n \n-      Node* const to_offset = ElementOffsetFromIndex(\n+      TNode<IntPtrT> to_offset = ElementOffsetFromIndex(\n           IntPtrConstant(RegExpMatchInfo::kFirstCaptureIndex), PACKED_ELEMENTS,\n           INTPTR_PARAMETERS, RegExpMatchInfo::kHeaderSize - kHeapObjectTag);\n-      VARIABLE(var_to_offset, MachineType::PointerRepresentation(), to_offset);\n+      TVARIABLE(IntPtrT, var_to_offset, to_offset);\n \n       VariableList vars({&var_to_offset}, zone());\n       BuildFastLoop(\n-          vars, int_zero, limit_offset,\n+          vars, IntPtrZero(), limit_offset,\n           [=, &var_to_offset](Node* offset) {\n-            Node* const value = Load(MachineType::Int32(),\n-                                     static_offsets_vector_address, offset);\n-            Node* const smi_value = SmiFromInt32(value);\n+            TNode<Int32T> value = UncheckedCast<Int32T>(Load(\n+                MachineType::Int32(), static_offsets_vector_address, offset));\n+            TNode<Smi> smi_value = SmiFromInt32(value);\n             StoreNoWriteBarrier(MachineRepresentation::kTagged, match_info,\n                                 var_to_offset.value(), smi_value);\n             Increment(&var_to_offset, kPointerSize);\n           },\n           kInt32Size, INTPTR_PARAMETERS, IndexAdvanceMode::kPost);\n     }\n \n-    var_result.Bind(match_info);\n+    var_result = match_info;\n     Goto(&out);\n   }\n \n   BIND(&if_failure);\n   {\n-    var_result.Bind(NullConstant());\n+    var_result = NullConstant();\n     Goto(&out);\n   }\n \n   BIND(&if_exception);\n   {\n // A stack overflow was detected in RegExp code.\n #ifdef DEBUG\n-    Node* const pending_exception_address =\n+    TNode<ExternalReference> pending_exception_address =\n         ExternalConstant(ExternalReference::Create(\n             IsolateAddressId::kPendingExceptionAddress, isolate()));\n     CSA_ASSERT(this, IsTheHole(Load(MachineType::AnyTagged(),\n@@ -639,19 +623,17 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n \n   BIND(&runtime);\n   {\n-    Node* const result = CallRuntime(Runtime::kRegExpExec, context, regexp,\n-                                     string, last_index, match_info);\n-    var_result.Bind(result);\n+    var_result = CAST(CallRuntime(Runtime::kRegExpExec, context, regexp, string,\n+                                  last_index, match_info));\n     Goto(&out);\n   }\n \n   BIND(&atom);\n   {\n     // TODO(jgruber): A call with 4 args stresses register allocation, this\n     // should probably just be inlined.\n-    Node* const result = CallBuiltin(Builtins::kRegExpExecAtom, context, regexp,\n-                                     string, last_index, match_info);\n-    var_result.Bind(result);\n+    var_result = CAST(CallBuiltin(Builtins::kRegExpExecAtom, context, regexp,\n+                                  string, last_index, match_info));\n     Goto(&out);\n   }\n \n@@ -663,59 +645,57 @@ Node* RegExpBuiltinsAssembler::RegExpExecInternal(Node* const context,\n // ES#sec-regexp.prototype.exec\n // RegExp.prototype.exec ( string )\n // Implements the core of RegExp.prototype.exec but without actually\n-// constructing the JSRegExpResult. Returns either null (if the RegExp did not\n-// match) or a fixed array containing match indices as returned by\n-// RegExpExecStub.\n-Node* RegExpBuiltinsAssembler::RegExpPrototypeExecBodyWithoutResult(\n-    Node* const context, Node* const regexp, Node* const string,\n-    Label* if_didnotmatch, const bool is_fastpath) {\n-  Node* const int_zero = IntPtrConstant(0);\n-  Node* const smi_zero = SmiConstant(0);\n-\n-  if (is_fastpath) {\n-    CSA_ASSERT(this, HasInstanceType(regexp, JS_REGEXP_TYPE));\n-  } else {\n-    ThrowIfNotInstanceType(context, regexp, JS_REGEXP_TYPE,\n+// constructing the JSRegExpResult. Returns a fixed array containing match\n+// indices as returned by RegExpExecStub on successful match, and jumps to\n+// if_didnotmatch otherwise.\n+TNode<RegExpMatchInfo>\n+RegExpBuiltinsAssembler::RegExpPrototypeExecBodyWithoutResult(\n+    TNode<Context> context, TNode<JSReceiver> maybe_regexp,\n+    TNode<String> string, Label* if_didnotmatch, const bool is_fastpath) {\n+  if (!is_fastpath) {\n+    ThrowIfNotInstanceType(context, maybe_regexp, JS_REGEXP_TYPE,\n                            \"RegExp.prototype.exec\");\n   }\n \n-  CSA_ASSERT(this, IsString(string));\n-  CSA_ASSERT(this, IsJSRegExp(regexp));\n+  TNode<JSRegExp> regexp = CAST(maybe_regexp);\n \n-  VARIABLE(var_result, MachineRepresentation::kTagged);\n+  TVARIABLE(HeapObject, var_result);\n   Label out(this);\n \n   // Load lastIndex.\n-  VARIABLE(var_lastindex, MachineRepresentation::kTagged);\n+  TVARIABLE(Number, var_lastindex);\n   {\n-    Node* const regexp_lastindex = LoadLastIndex(context, regexp, is_fastpath);\n-    var_lastindex.Bind(regexp_lastindex);\n+    TNode<Object> regexp_lastindex =\n+        LoadLastIndex(context, regexp, is_fastpath);\n \n     if (is_fastpath) {\n       // ToLength on a positive smi is a nop and can be skipped.\n       CSA_ASSERT(this, TaggedIsPositiveSmi(regexp_lastindex));\n+      var_lastindex = CAST(regexp_lastindex);\n     } else {\n       // Omit ToLength if lastindex is a non-negative smi.\n-      Label call_tolength(this, Label::kDeferred), next(this);\n-      Branch(TaggedIsPositiveSmi(regexp_lastindex), &next, &call_tolength);\n+      Label call_tolength(this, Label::kDeferred), is_smi(this), next(this);\n+      Branch(TaggedIsPositiveSmi(regexp_lastindex), &is_smi, &call_tolength);\n \n       BIND(&call_tolength);\n-      {\n-        var_lastindex.Bind(ToLength_Inline(context, regexp_lastindex));\n-        Goto(&next);\n-      }\n+      var_lastindex = ToLength_Inline(context, regexp_lastindex);\n+      Goto(&next);\n+\n+      BIND(&is_smi);\n+      var_lastindex = CAST(regexp_lastindex);\n+      Goto(&next);\n \n       BIND(&next);\n     }\n   }\n \n   // Check whether the regexp is global or sticky, which determines whether we\n   // update last index later on.\n-  Node* const flags = LoadObjectField(regexp, JSRegExp::kFlagsOffset);\n-  Node* const is_global_or_sticky = WordAnd(\n+  TNode<Smi> flags = CAST(LoadObjectField(regexp, JSRegExp::kFlagsOffset));\n+  TNode<IntPtrT> is_global_or_sticky = WordAnd(\n       SmiUntag(flags), IntPtrConstant(JSRegExp::kGlobal | JSRegExp::kSticky));\n-  Node* const should_update_last_index =\n-      WordNotEqual(is_global_or_sticky, int_zero);\n+  TNode<BoolT> should_update_last_index =\n+      WordNotEqual(is_global_or_sticky, IntPtrZero());\n \n   // Grab and possibly update last index.\n   Label run_exec(this);\n@@ -725,50 +705,48 @@ Node* RegExpBuiltinsAssembler::RegExpPrototypeExecBodyWithoutResult(\n \n     BIND(&if_doupdate);\n     {\n-      Node* const lastindex = var_lastindex.value();\n-\n       Label if_isoob(this, Label::kDeferred);\n-      GotoIfNot(TaggedIsSmi(lastindex), &if_isoob);\n-      TNode<Smi> const string_length = LoadStringLengthAsSmi(string);\n-      GotoIfNot(SmiLessThanOrEqual(CAST(lastindex), string_length), &if_isoob);\n+      GotoIfNot(TaggedIsSmi(var_lastindex.value()), &if_isoob);\n+      TNode<Smi> string_length = LoadStringLengthAsSmi(string);\n+      GotoIfNot(SmiLessThanOrEqual(CAST(var_lastindex.value()), string_length),\n+                &if_isoob);\n       Goto(&run_exec);\n \n       BIND(&if_isoob);\n       {\n-        StoreLastIndex(context, regexp, smi_zero, is_fastpath);\n-        var_result.Bind(NullConstant());\n+        StoreLastIndex(context, regexp, SmiZero(), is_fastpath);\n         Goto(if_didnotmatch);\n       }\n     }\n \n     BIND(&if_dontupdate);\n     {\n-      var_lastindex.Bind(smi_zero);\n+      var_lastindex = SmiZero();\n       Goto(&run_exec);\n     }\n   }\n \n-  Node* match_indices;\n+  TNode<HeapObject> match_indices;\n   Label successful_match(this);\n   BIND(&run_exec);\n   {\n     // Get last match info from the context.\n-    Node* const native_context = LoadNativeContext(context);\n-    Node* const last_match_info = LoadContextElement(\n-        native_context, Context::REGEXP_LAST_MATCH_INFO_INDEX);\n+    TNode<Context> native_context = LoadNativeContext(context);\n+    TNode<RegExpMatchInfo> last_match_info = CAST(LoadContextElement(\n+        native_context, Context::REGEXP_LAST_MATCH_INFO_INDEX));\n \n     // Call the exec stub.\n     match_indices = RegExpExecInternal(context, regexp, string,\n                                        var_lastindex.value(), last_match_info);\n-    var_result.Bind(match_indices);\n+    var_result = match_indices;\n \n     // {match_indices} is either null or the RegExpMatchInfo array.\n     // Return early if exec failed, possibly updating last index.\n     GotoIfNot(IsNull(match_indices), &successful_match);\n \n     GotoIfNot(should_update_last_index, if_didnotmatch);\n \n-    StoreLastIndex(context, regexp, smi_zero, is_fastpath);\n+    StoreLastIndex(context, regexp, SmiZero(), is_fastpath);\n     Goto(if_didnotmatch);\n   }\n \n@@ -777,40 +755,38 @@ Node* RegExpBuiltinsAssembler::RegExpPrototypeExecBodyWithoutResult(\n     GotoIfNot(should_update_last_index, &out);\n \n     // Update the new last index from {match_indices}.\n-    Node* const new_lastindex = LoadFixedArrayElement(\n-        match_indices, RegExpMatchInfo::kFirstCaptureIndex + 1);\n+    TNode<Number> new_lastindex = CAST(LoadFixedArrayElement(\n+        CAST(match_indices), RegExpMatchInfo::kFirstCaptureIndex + 1));\n \n     StoreLastIndex(context, regexp, new_lastindex, is_fastpath);\n     Goto(&out);\n   }\n \n   BIND(&out);\n-  return var_result.value();\n+  return CAST(var_result.value());\n }\n \n // ES#sec-regexp.prototype.exec\n // RegExp.prototype.exec ( string )\n-Node* RegExpBuiltinsAssembler::RegExpPrototypeExecBody(\n-    Node* const context, Node* const regexp, TNode<String> const string,\n-    const bool is_fastpath) {\n-  VARIABLE(var_result, MachineRepresentation::kTagged);\n+TNode<HeapObject> RegExpBuiltinsAssembler::RegExpPrototypeExecBody(\n+    TNode<Context> context, TNode<JSReceiver> maybe_regexp,\n+    TNode<String> string, const bool is_fastpath) {\n+  TVARIABLE(HeapObject, var_result);\n \n   Label if_didnotmatch(this), out(this);\n-  Node* const indices_or_null = RegExpPrototypeExecBodyWithoutResult(\n-      context, regexp, string, &if_didnotmatch, is_fastpath);\n+  TNode<RegExpMatchInfo> match_indices = RegExpPrototypeExecBodyWithoutResult(\n+      context, maybe_regexp, string, &if_didnotmatch, is_fastpath);\n \n   // Successful match.\n   {\n-    Node* const match_indices = indices_or_null;\n-    Node* const result =\n-        ConstructNewResultFromMatchInfo(context, regexp, match_indices, string);\n-    var_result.Bind(result);\n+    var_result = ConstructNewResultFromMatchInfo(context, maybe_regexp,\n+                                                 match_indices, string);\n     Goto(&out);\n   }\n \n   BIND(&if_didnotmatch);\n   {\n-    var_result.Bind(NullConstant());\n+    var_result = NullConstant();\n     Goto(&out);\n   }\n \n@@ -868,7 +844,7 @@ Node* RegExpBuiltinsAssembler::IsFastRegExpNoPrototype(Node* const context,\n \n   // The smi check is required to omit ToLength(lastIndex) calls with possible\n   // user-code execution on the fast path.\n-  Node* const last_index = FastLoadLastIndex(object);\n+  Node* const last_index = FastLoadLastIndex(CAST(object));\n   var_result.Bind(TaggedIsPositiveSmi(last_index));\n   Goto(&out);\n \n@@ -962,7 +938,7 @@ void RegExpBuiltinsAssembler::BranchIfFastRegExp(Node* const context,\n \n   // The smi check is required to omit ToLength(lastIndex) calls with possible\n   // user-code execution on the fast path.\n-  Node* const last_index = FastLoadLastIndex(object);\n+  Node* const last_index = FastLoadLastIndex(CAST(object));\n   Branch(TaggedIsPositiveSmi(last_index), if_isunmodified, if_ismodified);\n }\n \n@@ -1011,9 +987,9 @@ void RegExpBuiltinsAssembler::BranchIfFastRegExpResult(Node* const context,\n \n // Slow path stub for RegExpPrototypeExec to decrease code size.\n TF_BUILTIN(RegExpPrototypeExecSlow, RegExpBuiltinsAssembler) {\n-  Node* const regexp = Parameter(Descriptor::kReceiver);\n-  TNode<String> const string = CAST(Parameter(Descriptor::kString));\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<JSRegExp> regexp = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<String> string = CAST(Parameter(Descriptor::kString));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   Return(RegExpPrototypeExecBody(context, regexp, string, false));\n }\n@@ -1022,19 +998,15 @@ TF_BUILTIN(RegExpPrototypeExecSlow, RegExpBuiltinsAssembler) {\n // and {match_info} is updated on success.\n // The slow path is implemented in RegExpImpl::AtomExec.\n TF_BUILTIN(RegExpExecAtom, RegExpBuiltinsAssembler) {\n-  Node* const regexp = Parameter(Descriptor::kRegExp);\n-  Node* const subject_string = Parameter(Descriptor::kString);\n-  Node* const last_index = Parameter(Descriptor::kLastIndex);\n-  Node* const match_info = Parameter(Descriptor::kMatchInfo);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<JSRegExp> regexp = CAST(Parameter(Descriptor::kRegExp));\n+  TNode<String> subject_string = CAST(Parameter(Descriptor::kString));\n+  TNode<Smi> last_index = CAST(Parameter(Descriptor::kLastIndex));\n+  TNode<FixedArray> match_info = CAST(Parameter(Descriptor::kMatchInfo));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n-  CSA_ASSERT(this, IsJSRegExp(regexp));\n-  CSA_ASSERT(this, IsString(subject_string));\n   CSA_ASSERT(this, TaggedIsPositiveSmi(last_index));\n-  CSA_ASSERT(this, IsFixedArray(match_info));\n \n-  Node* const data = LoadObjectField(regexp, JSRegExp::kDataOffset);\n-  CSA_ASSERT(this, IsFixedArray(data));\n+  TNode<FixedArray> data = CAST(LoadObjectField(regexp, JSRegExp::kDataOffset));\n   CSA_ASSERT(this,\n              SmiEqual(CAST(LoadFixedArrayElement(data, JSRegExp::kTagIndex)),\n                       SmiConstant(JSRegExp::ATOM)));\n@@ -1089,7 +1061,7 @@ TF_BUILTIN(RegExpExecInternal, RegExpBuiltinsAssembler) {\n   TNode<JSRegExp> regexp = CAST(Parameter(Descriptor::kRegExp));\n   TNode<String> string = CAST(Parameter(Descriptor::kString));\n   TNode<Number> last_index = CAST(Parameter(Descriptor::kLastIndex));\n-  TNode<FixedArray> match_info = CAST(Parameter(Descriptor::kMatchInfo));\n+  TNode<RegExpMatchInfo> match_info = CAST(Parameter(Descriptor::kMatchInfo));\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   CSA_ASSERT(this, IsNumberNormalized(last_index));\n@@ -1101,35 +1073,28 @@ TF_BUILTIN(RegExpExecInternal, RegExpBuiltinsAssembler) {\n // ES#sec-regexp.prototype.exec\n // RegExp.prototype.exec ( string )\n TF_BUILTIN(RegExpPrototypeExec, RegExpBuiltinsAssembler) {\n-  Node* const maybe_receiver = Parameter(Descriptor::kReceiver);\n-  Node* const maybe_string = Parameter(Descriptor::kString);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> maybe_receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> maybe_string = CAST(Parameter(Descriptor::kString));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   // Ensure {maybe_receiver} is a JSRegExp.\n   ThrowIfNotInstanceType(context, maybe_receiver, JS_REGEXP_TYPE,\n                          \"RegExp.prototype.exec\");\n-  Node* const receiver = maybe_receiver;\n+  TNode<JSRegExp> receiver = CAST(maybe_receiver);\n \n   // Convert {maybe_string} to a String.\n-  TNode<String> const string = ToString_Inline(context, maybe_string);\n+  TNode<String> string = ToString_Inline(context, maybe_string);\n \n   Label if_isfastpath(this), if_isslowpath(this);\n   Branch(IsFastRegExpNoPrototype(context, receiver), &if_isfastpath,\n          &if_isslowpath);\n \n   BIND(&if_isfastpath);\n-  {\n-    Node* const result =\n-        RegExpPrototypeExecBody(context, receiver, string, true);\n-    Return(result);\n-  }\n+  Return(RegExpPrototypeExecBody(context, receiver, string, true));\n \n   BIND(&if_isslowpath);\n-  {\n-    Node* const result = CallBuiltin(Builtins::kRegExpPrototypeExecSlow,\n-                                     context, receiver, string);\n-    Return(result);\n-  }\n+  Return(CallBuiltin(Builtins::kRegExpPrototypeExecSlow, context, receiver,\n+                     string));\n }\n \n Node* RegExpBuiltinsAssembler::FlagsGetter(Node* const context,\n@@ -1138,7 +1103,7 @@ Node* RegExpBuiltinsAssembler::FlagsGetter(Node* const context,\n   Isolate* isolate = this->isolate();\n \n   TNode<IntPtrT> const int_one = IntPtrConstant(1);\n-  TVARIABLE(Smi, var_length, SmiConstant(0));\n+  TVARIABLE(Smi, var_length, SmiZero());\n   TVARIABLE(IntPtrT, var_flags);\n \n   // First, count the number of characters we will need and check which flags\n@@ -1170,7 +1135,7 @@ Node* RegExpBuiltinsAssembler::FlagsGetter(Node* const context,\n     DCHECK(!is_fastpath);\n \n     // Fall back to GetProperty stub on the slow-path.\n-    var_flags = IntPtrConstant(0);\n+    var_flags = IntPtrZero();\n \n #define CASE_FOR_FLAG(NAME, FLAG)                                          \\\n   do {                                                                     \\\n@@ -1289,13 +1254,13 @@ Node* RegExpBuiltinsAssembler::RegExpInitialize(Node* const context,\n \n // ES #sec-get-regexp.prototype.flags\n TF_BUILTIN(RegExpPrototypeFlagsGetter, RegExpBuiltinsAssembler) {\n-  Node* const maybe_receiver = Parameter(Descriptor::kReceiver);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> maybe_receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n-  Node* const map = ThrowIfNotJSReceiver(context, maybe_receiver,\n-                                         MessageTemplate::kRegExpNonObject,\n-                                         \"RegExp.prototype.flags\");\n-  Node* const receiver = maybe_receiver;\n+  TNode<Map> map = CAST(ThrowIfNotJSReceiver(context, maybe_receiver,\n+                                             MessageTemplate::kRegExpNonObject,\n+                                             \"RegExp.prototype.flags\"));\n+  TNode<JSReceiver> receiver = CAST(maybe_receiver);\n \n   Label if_isfastpath(this), if_isslowpath(this, Label::kDeferred);\n   BranchIfFastRegExp(context, receiver, map, &if_isfastpath, &if_isslowpath);\n@@ -1310,10 +1275,10 @@ TF_BUILTIN(RegExpPrototypeFlagsGetter, RegExpBuiltinsAssembler) {\n // ES#sec-regexp-pattern-flags\n // RegExp ( pattern, flags )\n TF_BUILTIN(RegExpConstructor, RegExpBuiltinsAssembler) {\n-  Node* const pattern = Parameter(Descriptor::kPattern);\n-  Node* const flags = Parameter(Descriptor::kFlags);\n-  Node* const new_target = Parameter(Descriptor::kJSNewTarget);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> pattern = CAST(Parameter(Descriptor::kPattern));\n+  TNode<Object> flags = CAST(Parameter(Descriptor::kFlags));\n+  TNode<Object> new_target = CAST(Parameter(Descriptor::kJSNewTarget));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   Isolate* isolate = this->isolate();\n \n@@ -1350,13 +1315,14 @@ TF_BUILTIN(RegExpConstructor, RegExpBuiltinsAssembler) {\n         if_patternisslowregexp(this);\n     GotoIf(TaggedIsSmi(pattern), &next);\n \n-    GotoIf(IsJSRegExp(pattern), &if_patternisfastregexp);\n+    GotoIf(IsJSRegExp(CAST(pattern)), &if_patternisfastregexp);\n \n     Branch(pattern_is_regexp, &if_patternisslowregexp, &next);\n \n     BIND(&if_patternisfastregexp);\n     {\n-      Node* const source = LoadObjectField(pattern, JSRegExp::kSourceOffset);\n+      Node* const source =\n+          LoadObjectField(CAST(pattern), JSRegExp::kSourceOffset);\n       var_pattern.Bind(source);\n \n       {\n@@ -1437,10 +1403,10 @@ TF_BUILTIN(RegExpConstructor, RegExpBuiltinsAssembler) {\n // ES#sec-regexp.prototype.compile\n // RegExp.prototype.compile ( pattern, flags )\n TF_BUILTIN(RegExpPrototypeCompile, RegExpBuiltinsAssembler) {\n-  Node* const maybe_receiver = Parameter(Descriptor::kReceiver);\n-  Node* const maybe_pattern = Parameter(Descriptor::kPattern);\n-  Node* const maybe_flags = Parameter(Descriptor::kFlags);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> maybe_receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> maybe_pattern = CAST(Parameter(Descriptor::kPattern));\n+  TNode<Object> maybe_flags = CAST(Parameter(Descriptor::kFlags));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   ThrowIfNotInstanceType(context, maybe_receiver, JS_REGEXP_TYPE,\n                          \"RegExp.prototype.compile\");\n@@ -1454,7 +1420,7 @@ TF_BUILTIN(RegExpPrototypeCompile, RegExpBuiltinsAssembler) {\n     Label next(this);\n \n     GotoIf(TaggedIsSmi(maybe_pattern), &next);\n-    GotoIfNot(IsJSRegExp(maybe_pattern), &next);\n+    GotoIfNot(IsJSRegExp(CAST(maybe_pattern)), &next);\n \n     Node* const pattern = maybe_pattern;\n \n@@ -1486,20 +1452,17 @@ TF_BUILTIN(RegExpPrototypeCompile, RegExpBuiltinsAssembler) {\n // ES6 21.2.5.10.\n // ES #sec-get-regexp.prototype.source\n TF_BUILTIN(RegExpPrototypeSourceGetter, RegExpBuiltinsAssembler) {\n-  Node* const receiver = Parameter(Descriptor::kReceiver);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   // Check whether we have an unmodified regexp instance.\n   Label if_isjsregexp(this), if_isnotjsregexp(this, Label::kDeferred);\n \n   GotoIf(TaggedIsSmi(receiver), &if_isnotjsregexp);\n-  Branch(IsJSRegExp(receiver), &if_isjsregexp, &if_isnotjsregexp);\n+  Branch(IsJSRegExp(CAST(receiver)), &if_isjsregexp, &if_isnotjsregexp);\n \n   BIND(&if_isjsregexp);\n-  {\n-    Node* const source = LoadObjectField(receiver, JSRegExp::kSourceOffset);\n-    Return(source);\n-  }\n+  Return(LoadObjectField(CAST(receiver), JSRegExp::kSourceOffset));\n \n   BIND(&if_isnotjsregexp);\n   {\n@@ -1653,8 +1616,8 @@ void RegExpBuiltinsAssembler::FlagGetter(Node* context, Node* receiver,\n // ES6 21.2.5.4.\n // ES #sec-get-regexp.prototype.global\n TF_BUILTIN(RegExpPrototypeGlobalGetter, RegExpBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   FlagGetter(context, receiver, JSRegExp::kGlobal,\n              v8::Isolate::kRegExpPrototypeOldFlagGetter,\n              \"RegExp.prototype.global\");\n@@ -1663,8 +1626,8 @@ TF_BUILTIN(RegExpPrototypeGlobalGetter, RegExpBuiltinsAssembler) {\n // ES6 21.2.5.5.\n // ES #sec-get-regexp.prototype.ignorecase\n TF_BUILTIN(RegExpPrototypeIgnoreCaseGetter, RegExpBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   FlagGetter(context, receiver, JSRegExp::kIgnoreCase,\n              v8::Isolate::kRegExpPrototypeOldFlagGetter,\n              \"RegExp.prototype.ignoreCase\");\n@@ -1673,17 +1636,17 @@ TF_BUILTIN(RegExpPrototypeIgnoreCaseGetter, RegExpBuiltinsAssembler) {\n // ES6 21.2.5.7.\n // ES #sec-get-regexp.prototype.multiline\n TF_BUILTIN(RegExpPrototypeMultilineGetter, RegExpBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   FlagGetter(context, receiver, JSRegExp::kMultiline,\n              v8::Isolate::kRegExpPrototypeOldFlagGetter,\n              \"RegExp.prototype.multiline\");\n }\n \n // ES #sec-get-regexp.prototype.dotAll\n TF_BUILTIN(RegExpPrototypeDotAllGetter, RegExpBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   static const int kNoCounter = -1;\n   FlagGetter(context, receiver, JSRegExp::kDotAll, kNoCounter,\n              \"RegExp.prototype.dotAll\");\n@@ -1692,8 +1655,8 @@ TF_BUILTIN(RegExpPrototypeDotAllGetter, RegExpBuiltinsAssembler) {\n // ES6 21.2.5.12.\n // ES #sec-get-regexp.prototype.sticky\n TF_BUILTIN(RegExpPrototypeStickyGetter, RegExpBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   FlagGetter(context, receiver, JSRegExp::kSticky,\n              v8::Isolate::kRegExpPrototypeStickyGetter,\n              \"RegExp.prototype.sticky\");\n@@ -1702,8 +1665,8 @@ TF_BUILTIN(RegExpPrototypeStickyGetter, RegExpBuiltinsAssembler) {\n // ES6 21.2.5.15.\n // ES #sec-get-regexp.prototype.unicode\n TF_BUILTIN(RegExpPrototypeUnicodeGetter, RegExpBuiltinsAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* receiver = Parameter(Descriptor::kReceiver);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   FlagGetter(context, receiver, JSRegExp::kUnicode,\n              v8::Isolate::kRegExpPrototypeUnicodeGetter,\n              \"RegExp.prototype.unicode\");\n@@ -1762,18 +1725,18 @@ Node* RegExpBuiltinsAssembler::RegExpExec(Node* context, Node* regexp,\n // ES#sec-regexp.prototype.test\n // RegExp.prototype.test ( S )\n TF_BUILTIN(RegExpPrototypeTest, RegExpBuiltinsAssembler) {\n-  Node* const maybe_receiver = Parameter(Descriptor::kReceiver);\n-  Node* const maybe_string = Parameter(Descriptor::kString);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> maybe_receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> maybe_string = CAST(Parameter(Descriptor::kString));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   // Ensure {maybe_receiver} is a JSReceiver.\n   ThrowIfNotJSReceiver(context, maybe_receiver,\n                        MessageTemplate::kIncompatibleMethodReceiver,\n                        \"RegExp.prototype.test\");\n-  Node* const receiver = maybe_receiver;\n+  TNode<JSReceiver> receiver = CAST(maybe_receiver);\n \n   // Convert {maybe_string} to a String.\n-  TNode<String> const string = ToString_Inline(context, maybe_string);\n+  TNode<String> string = ToString_Inline(context, maybe_string);\n \n   Label fast_path(this), slow_path(this);\n   BranchIfFastRegExp(context, receiver, &fast_path, &slow_path);\n@@ -1792,18 +1755,19 @@ TF_BUILTIN(RegExpPrototypeTest, RegExpBuiltinsAssembler) {\n   BIND(&slow_path);\n   {\n     // Call exec.\n-    Node* const match_indices = RegExpExec(context, receiver, string);\n+    TNode<HeapObject> match_indices =\n+        CAST(RegExpExec(context, receiver, string));\n \n     // Return true iff exec matched successfully.\n-    Node* const result = SelectBooleanConstant(IsNotNull(match_indices));\n-    Return(result);\n+    Return(SelectBooleanConstant(IsNotNull(match_indices)));\n   }\n }\n \n TF_BUILTIN(RegExpPrototypeTestFast, RegExpBuiltinsAssembler) {\n-  TNode<JSRegExp> const regexp = CAST(Parameter(Descriptor::kReceiver));\n-  TNode<String> const string = CAST(Parameter(Descriptor::kString));\n-  TNode<Context> const context = CAST(Parameter(Descriptor::kContext));\n+  TNode<JSRegExp> regexp = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<String> string = CAST(Parameter(Descriptor::kString));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+\n   Label if_didnotmatch(this);\n   CSA_ASSERT(this, IsFastRegExpWithOriginalExec(context, regexp));\n   RegExpPrototypeExecBodyWithoutResult(context, regexp, string, &if_didnotmatch,\n@@ -1881,8 +1845,6 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n                                                        const bool is_fastpath) {\n   if (is_fastpath) CSA_ASSERT(this, IsFastRegExp(context, regexp));\n \n-  Node* const int_zero = IntPtrConstant(0);\n-  Node* const smi_zero = SmiConstant(0);\n   Node* const is_global =\n       FlagGetter(context, regexp, JSRegExp::kGlobal, is_fastpath);\n \n@@ -1892,8 +1854,9 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n   BIND(&if_isnotglobal);\n   {\n     Node* const result =\n-        is_fastpath ? RegExpPrototypeExecBody(context, regexp, string, true)\n-                    : RegExpExec(context, regexp, string);\n+        is_fastpath\n+            ? RegExpPrototypeExecBody(CAST(context), CAST(regexp), string, true)\n+            : RegExpExec(context, regexp, string);\n     Return(result);\n   }\n \n@@ -1902,7 +1865,7 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n     Node* const is_unicode =\n         FlagGetter(context, regexp, JSRegExp::kUnicode, is_fastpath);\n \n-    StoreLastIndex(context, regexp, smi_zero, is_fastpath);\n+    StoreLastIndex(context, regexp, SmiZero(), is_fastpath);\n \n     // Allocate an array to store the resulting match strings.\n \n@@ -1924,8 +1887,9 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n       if (is_fastpath) {\n         // On the fast path, grab the matching string from the raw match index\n         // array.\n-        Node* const match_indices = RegExpPrototypeExecBodyWithoutResult(\n-            context, regexp, string, &if_didnotmatch, true);\n+        TNode<RegExpMatchInfo> match_indices =\n+            RegExpPrototypeExecBodyWithoutResult(CAST(context), CAST(regexp),\n+                                                 string, &if_didnotmatch, true);\n \n         Node* const match_from = LoadFixedArrayElement(\n             match_indices, RegExpMatchInfo::kFirstCaptureIndex);\n@@ -1944,14 +1908,14 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n \n         BIND(&load_match);\n         var_match.Bind(\n-            ToString_Inline(context, GetProperty(context, result, smi_zero)));\n+            ToString_Inline(context, GetProperty(context, result, SmiZero())));\n         Goto(&if_didmatch);\n       }\n \n       BIND(&if_didnotmatch);\n       {\n         // Return null if there were no matches, otherwise just exit the loop.\n-        GotoIfNot(IntPtrEqual(array.length(), int_zero), &out);\n+        GotoIfNot(IntPtrEqual(array.length(), IntPtrZero()), &out);\n         Return(NullConstant());\n       }\n \n@@ -1966,9 +1930,10 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n         // Advance last index if the match is the empty string.\n \n         TNode<Smi> const match_length = LoadStringLengthAsSmi(match);\n-        GotoIfNot(SmiEqual(match_length, SmiConstant(0)), &loop);\n+        GotoIfNot(SmiEqual(match_length, SmiZero()), &loop);\n \n-        Node* last_index = LoadLastIndex(context, regexp, is_fastpath);\n+        Node* last_index =\n+            LoadLastIndex(CAST(context), CAST(regexp), is_fastpath);\n         if (is_fastpath) {\n           CSA_ASSERT(this, TaggedIsPositiveSmi(last_index));\n         } else {\n@@ -2005,9 +1970,9 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n // ES#sec-regexp.prototype-@@match\n // RegExp.prototype [ @@match ] ( string )\n TF_BUILTIN(RegExpPrototypeMatch, RegExpBuiltinsAssembler) {\n-  Node* const maybe_receiver = Parameter(Descriptor::kReceiver);\n-  Node* const maybe_string = Parameter(Descriptor::kString);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> maybe_receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> maybe_string = CAST(Parameter(Descriptor::kString));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   // Ensure {maybe_receiver} is a JSReceiver.\n   ThrowIfNotJSReceiver(context, maybe_receiver,\n@@ -2124,9 +2089,8 @@ TNode<Object> RegExpBuiltinsAssembler::MatchAllIterator(\n \n #ifdef DEBUG\n     // Assert: ! Get(matcher, \"lastIndex\") is 0.\n-    TNode<Object> last_index =\n-        CAST(LoadLastIndex(context, var_matcher.value(), false));\n-    CSA_ASSERT(this, WordEqual(SmiConstant(0), last_index));\n+    TNode<Object> last_index = SlowLoadLastIndex(context, var_matcher.value());\n+    CSA_ASSERT(this, WordEqual(SmiZero(), last_index));\n #endif  // DEBUG\n \n     Goto(&create_iterator);\n@@ -2209,9 +2173,9 @@ TF_BUILTIN(RegExpPrototypeMatchAll, RegExpBuiltinsAssembler) {\n // 1) receiver is a \"fast\" RegExp\n // 2) pattern is a string\n TF_BUILTIN(RegExpMatchFast, RegExpBuiltinsAssembler) {\n-  Node* const receiver = Parameter(Descriptor::kReceiver);\n-  TNode<String> const string = CAST(Parameter(Descriptor::kPattern));\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<String> string = CAST(Parameter(Descriptor::kPattern));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   RegExpPrototypeMatchBody(context, receiver, string, true);\n }\n@@ -2222,15 +2186,15 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSearchBodyFast(\n   CSA_ASSERT(this, IsString(string));\n \n   // Grab the initial value of last index.\n-  Node* const previous_last_index = FastLoadLastIndex(regexp);\n+  Node* const previous_last_index = FastLoadLastIndex(CAST(regexp));\n \n   // Ensure last index is 0.\n-  FastStoreLastIndex(regexp, SmiConstant(0));\n+  FastStoreLastIndex(regexp, SmiZero());\n \n   // Call exec.\n   Label if_didnotmatch(this);\n-  Node* const match_indices = RegExpPrototypeExecBodyWithoutResult(\n-      context, regexp, string, &if_didnotmatch, true);\n+  TNode<RegExpMatchInfo> match_indices = RegExpPrototypeExecBodyWithoutResult(\n+      CAST(context), CAST(regexp), CAST(string), &if_didnotmatch, true);\n \n   // Successful match.\n   {\n@@ -2258,10 +2222,11 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSearchBodySlow(\n \n   Isolate* const isolate = this->isolate();\n \n-  Node* const smi_zero = SmiConstant(0);\n+  Node* const smi_zero = SmiZero();\n \n   // Grab the initial value of last index.\n-  Node* const previous_last_index = SlowLoadLastIndex(context, regexp);\n+  Node* const previous_last_index =\n+      SlowLoadLastIndex(CAST(context), CAST(regexp));\n \n   // Ensure last index is 0.\n   {\n@@ -2280,7 +2245,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSearchBodySlow(\n   // Reset last index if necessary.\n   {\n     Label next(this), slow(this, Label::kDeferred);\n-    Node* const current_last_index = SlowLoadLastIndex(context, regexp);\n+    Node* const current_last_index =\n+        SlowLoadLastIndex(CAST(context), CAST(regexp));\n \n     BranchIfSameValue(current_last_index, previous_last_index, &next, &slow);\n \n@@ -2321,9 +2287,9 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSearchBodySlow(\n // ES#sec-regexp.prototype-@@search\n // RegExp.prototype [ @@search ] ( string )\n TF_BUILTIN(RegExpPrototypeSearch, RegExpBuiltinsAssembler) {\n-  Node* const maybe_receiver = Parameter(Descriptor::kReceiver);\n-  Node* const maybe_string = Parameter(Descriptor::kString);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> maybe_receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> maybe_string = CAST(Parameter(Descriptor::kString));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   // Ensure {maybe_receiver} is a JSReceiver.\n   ThrowIfNotJSReceiver(context, maybe_receiver,\n@@ -2350,9 +2316,9 @@ TF_BUILTIN(RegExpPrototypeSearch, RegExpBuiltinsAssembler) {\n // 1) receiver is a \"fast\" RegExp\n // 2) pattern is a string\n TF_BUILTIN(RegExpSearchFast, RegExpBuiltinsAssembler) {\n-  Node* const receiver = Parameter(Descriptor::kReceiver);\n-  Node* const string = Parameter(Descriptor::kPattern);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<JSRegExp> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<String> string = CAST(Parameter(Descriptor::kPattern));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   RegExpPrototypeSearchBodyFast(context, receiver, string);\n }\n@@ -2366,8 +2332,6 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n   CSA_ASSERT(this, IsFastRegExp(context, regexp));\n   CSA_ASSERT(this, Word32BinaryNot(FastFlagGetter(regexp, JSRegExp::kSticky)));\n \n-  TNode<Smi> const smi_zero = SmiConstant(0);\n-  TNode<IntPtrT> const int_zero = IntPtrConstant(0);\n   TNode<IntPtrT> const int_limit = SmiUntag(limit);\n \n   const ElementsKind kind = PACKED_ELEMENTS;\n@@ -2382,7 +2346,7 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n   // If limit is zero, return an empty array.\n   {\n     Label next(this), if_limitiszero(this, Label::kDeferred);\n-    Branch(SmiEqual(limit, smi_zero), &return_empty_array, &next);\n+    Branch(SmiEqual(limit, SmiZero()), &return_empty_array, &next);\n     BIND(&next);\n   }\n \n@@ -2392,7 +2356,7 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n   // array depending on whether the {regexp} matches.\n   {\n     Label next(this), if_stringisempty(this, Label::kDeferred);\n-    Branch(SmiEqual(string_length, smi_zero), &if_stringisempty, &next);\n+    Branch(SmiEqual(string_length, SmiZero()), &if_stringisempty, &next);\n \n     BIND(&if_stringisempty);\n     {\n@@ -2401,7 +2365,7 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n \n       Node* const match_indices =\n           CallBuiltin(Builtins::kRegExpExecInternal, context, regexp, string,\n-                      smi_zero, last_match_info);\n+                      SmiZero(), last_match_info);\n \n       Label return_singleton_array(this);\n       Branch(IsNull(match_indices), &return_singleton_array,\n@@ -2414,7 +2378,7 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n         Node* const result = AllocateJSArray(kind, array_map, capacity, length,\n                                              allocation_site, mode);\n \n-        Node* const fixed_array = LoadElements(result);\n+        TNode<FixedArray> const fixed_array = CAST(LoadElements(result));\n         StoreFixedArrayElement(fixed_array, 0, string);\n \n         Return(result);\n@@ -2428,8 +2392,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n \n   GrowableFixedArray array(state());\n \n-  TVARIABLE(Smi, var_last_matched_until, smi_zero);\n-  TVARIABLE(Smi, var_next_search_from, smi_zero);\n+  TVARIABLE(Smi, var_last_matched_until, SmiZero());\n+  TVARIABLE(Smi, var_next_search_from, SmiZero());\n \n   Variable* vars[] = {array.var_array(), array.var_length(),\n                       array.var_capacity(), &var_last_matched_until,\n@@ -2456,17 +2420,18 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n     Node* const last_match_info = LoadContextElement(\n         native_context, Context::REGEXP_LAST_MATCH_INFO_INDEX);\n \n-    Node* const match_indices =\n-        CallBuiltin(Builtins::kRegExpExecInternal, context, regexp, string,\n-                    next_search_from, last_match_info);\n+    TNode<HeapObject> const match_indices_ho =\n+        CAST(CallBuiltin(Builtins::kRegExpExecInternal, context, regexp, string,\n+                         next_search_from, last_match_info));\n \n     // We're done if no match was found.\n     {\n       Label next(this);\n-      Branch(IsNull(match_indices), &push_suffix_and_out, &next);\n+      Branch(IsNull(match_indices_ho), &push_suffix_and_out, &next);\n       BIND(&next);\n     }\n \n+    TNode<FixedArray> match_indices = CAST(match_indices_ho);\n     TNode<Smi> const match_from = CAST(LoadFixedArrayElement(\n         match_indices, RegExpMatchInfo::kFirstCaptureIndex));\n \n@@ -2585,8 +2550,8 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n \n   BIND(&return_empty_array);\n   {\n-    Node* const length = smi_zero;\n-    Node* const capacity = int_zero;\n+    Node* const length = SmiZero();\n+    Node* const capacity = IntPtrZero();\n     Node* const result = AllocateJSArray(kind, array_map, capacity, length,\n                                          allocation_site, mode);\n     Return(result);\n@@ -2595,10 +2560,10 @@ void RegExpBuiltinsAssembler::RegExpPrototypeSplitBody(Node* const context,\n \n // Helper that skips a few initial checks.\n TF_BUILTIN(RegExpSplit, RegExpBuiltinsAssembler) {\n-  Node* const regexp = Parameter(Descriptor::kRegExp);\n-  TNode<String> const string = CAST(Parameter(Descriptor::kString));\n-  Node* const maybe_limit = Parameter(Descriptor::kLimit);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<JSRegExp> regexp = CAST(Parameter(Descriptor::kRegExp));\n+  TNode<String> string = CAST(Parameter(Descriptor::kString));\n+  TNode<Object> maybe_limit = CAST(Parameter(Descriptor::kLimit));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   CSA_ASSERT(this, IsFastRegExp(context, regexp));\n \n@@ -2654,14 +2619,14 @@ TF_BUILTIN(RegExpPrototypeSplit, RegExpBuiltinsAssembler) {\n   const int kStringArg = 0;\n   const int kLimitArg = 1;\n \n-  Node* argc =\n+  TNode<IntPtrT> argc =\n       ChangeInt32ToIntPtr(Parameter(Descriptor::kJSActualArgumentsCount));\n   CodeStubArguments args(this, argc);\n \n-  Node* const maybe_receiver = args.GetReceiver();\n-  Node* const maybe_string = args.GetOptionalArgumentValue(kStringArg);\n-  Node* const maybe_limit = args.GetOptionalArgumentValue(kLimitArg);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> maybe_receiver = args.GetReceiver();\n+  TNode<Object> maybe_string = args.GetOptionalArgumentValue(kStringArg);\n+  TNode<Object> maybe_limit = args.GetOptionalArgumentValue(kLimitArg);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   // Ensure {maybe_receiver} is a JSReceiver.\n   ThrowIfNotJSReceiver(context, maybe_receiver,\n@@ -2696,25 +2661,23 @@ Node* RegExpBuiltinsAssembler::ReplaceGlobalCallableFastPath(\n   Isolate* const isolate = this->isolate();\n \n   Node* const undefined = UndefinedConstant();\n-  TNode<IntPtrT> const int_zero = IntPtrConstant(0);\n-  TNode<IntPtrT> const int_one = IntPtrConstant(1);\n-  TNode<Smi> const smi_zero = SmiConstant(0);\n+  TNode<IntPtrT> int_one = IntPtrConstant(1);\n \n   Node* const native_context = LoadNativeContext(context);\n \n   Label out(this);\n   VARIABLE(var_result, MachineRepresentation::kTagged);\n \n   // Set last index to 0.\n-  FastStoreLastIndex(regexp, smi_zero);\n+  FastStoreLastIndex(regexp, SmiZero());\n \n   // Allocate {result_array}.\n   Node* result_array;\n   {\n     ElementsKind kind = PACKED_ELEMENTS;\n     Node* const array_map = LoadJSArrayElementsMap(kind, native_context);\n-    TNode<IntPtrT> const capacity = IntPtrConstant(16);\n-    TNode<Smi> const length = smi_zero;\n+    TNode<IntPtrT> capacity = IntPtrConstant(16);\n+    TNode<Smi> length = SmiZero();\n     Node* const allocation_site = nullptr;\n     ParameterMode capacity_mode = CodeStubAssembler::INTPTR_PARAMETERS;\n \n@@ -2723,25 +2686,24 @@ Node* RegExpBuiltinsAssembler::ReplaceGlobalCallableFastPath(\n   }\n \n   // Call into runtime for RegExpExecMultiple.\n-  Node* last_match_info =\n-      LoadContextElement(native_context, Context::REGEXP_LAST_MATCH_INFO_INDEX);\n+  TNode<FixedArray> last_match_info = CAST(LoadContextElement(\n+      native_context, Context::REGEXP_LAST_MATCH_INFO_INDEX));\n   Node* const res = CallRuntime(Runtime::kRegExpExecMultiple, context, regexp,\n                                 string, last_match_info, result_array);\n \n   // Reset last index to 0.\n-  FastStoreLastIndex(regexp, smi_zero);\n+  FastStoreLastIndex(regexp, SmiZero());\n \n   // If no matches, return the subject string.\n   var_result.Bind(string);\n   GotoIf(IsNull(res), &out);\n \n   // Reload last match info since it might have changed.\n-  last_match_info =\n-      LoadContextElement(native_context, Context::REGEXP_LAST_MATCH_INFO_INDEX);\n+  last_match_info = CAST(LoadContextElement(\n+      native_context, Context::REGEXP_LAST_MATCH_INFO_INDEX));\n \n   Node* const res_length = LoadJSArrayLength(res);\n-  Node* const res_elems = LoadElements(res);\n-  CSA_ASSERT(this, HasInstanceType(res_elems, FIXED_ARRAY_TYPE));\n+  TNode<FixedArray> const res_elems = CAST(LoadElements(res));\n \n   TNode<Smi> const num_capture_registers = CAST(LoadFixedArrayElement(\n       last_match_info, RegExpMatchInfo::kNumberOfCapturesIndex));\n@@ -2760,10 +2722,10 @@ Node* RegExpBuiltinsAssembler::ReplaceGlobalCallableFastPath(\n     // input string and some replacements that were returned from the replace\n     // function.\n \n-    TVARIABLE(Smi, var_match_start, smi_zero);\n+    TVARIABLE(Smi, var_match_start, SmiZero());\n \n     TNode<IntPtrT> const end = SmiUntag(res_length);\n-    TVARIABLE(IntPtrT, var_i, int_zero);\n+    TVARIABLE(IntPtrT, var_i, IntPtrZero());\n \n     Variable* vars[] = {&var_i, &var_match_start};\n     Label loop(this, 2, vars);\n@@ -2782,7 +2744,7 @@ Node* RegExpBuiltinsAssembler::ReplaceGlobalCallableFastPath(\n         TNode<Smi> smi_elem = CAST(elem);\n         // Integers represent slices of the original string.\n         Label if_isnegativeorzero(this), if_ispositive(this);\n-        BranchIfSmiLessThanOrEqual(smi_elem, smi_zero, &if_isnegativeorzero,\n+        BranchIfSmiLessThanOrEqual(smi_elem, SmiZero(), &if_isnegativeorzero,\n                                    &if_ispositive);\n \n         BIND(&if_ispositive);\n@@ -2837,7 +2799,7 @@ Node* RegExpBuiltinsAssembler::ReplaceGlobalCallableFastPath(\n \n   BIND(&if_hasexplicitcaptures);\n   {\n-    Node* const from = int_zero;\n+    Node* const from = IntPtrZero();\n     Node* const to = SmiUntag(res_length);\n     const int increment = 1;\n \n@@ -2903,12 +2865,10 @@ Node* RegExpBuiltinsAssembler::ReplaceSimpleStringFastPath(\n \n   CSA_ASSERT(this, IsFastRegExp(context, regexp));\n \n-  TNode<Smi> const smi_zero = SmiConstant(0);\n   const bool kIsFastPath = true;\n \n   TVARIABLE(String, var_result, EmptyStringConstant());\n-  VARIABLE(var_match_indices, MachineRepresentation::kTagged);\n-  VARIABLE(var_last_match_end, MachineRepresentation::kTagged, smi_zero);\n+  VARIABLE(var_last_match_end, MachineRepresentation::kTagged, SmiZero());\n   VARIABLE(var_is_unicode, MachineRepresentation::kWord32, Int32Constant(0));\n   Variable* vars[] = {&var_result, &var_last_match_end};\n   Label out(this), loop(this, 2, vars), loop_end(this),\n@@ -2919,20 +2879,22 @@ Node* RegExpBuiltinsAssembler::ReplaceSimpleStringFastPath(\n   GotoIfNot(is_global, &loop);\n \n   var_is_unicode.Bind(FastFlagGetter(regexp, JSRegExp::kUnicode));\n-  FastStoreLastIndex(regexp, smi_zero);\n+  FastStoreLastIndex(regexp, SmiZero());\n   Goto(&loop);\n \n   BIND(&loop);\n   {\n-    var_match_indices.Bind(RegExpPrototypeExecBodyWithoutResult(\n-        context, regexp, string, &if_nofurthermatches, kIsFastPath));\n+    TNode<RegExpMatchInfo> var_match_indices =\n+        RegExpPrototypeExecBodyWithoutResult(CAST(context), CAST(regexp),\n+                                             string, &if_nofurthermatches,\n+                                             kIsFastPath);\n \n     // Successful match.\n     {\n       TNode<Smi> const match_start = CAST(LoadFixedArrayElement(\n-          var_match_indices.value(), RegExpMatchInfo::kFirstCaptureIndex));\n+          var_match_indices, RegExpMatchInfo::kFirstCaptureIndex));\n       TNode<Smi> const match_end = CAST(LoadFixedArrayElement(\n-          var_match_indices.value(), RegExpMatchInfo::kFirstCaptureIndex + 1));\n+          var_match_indices, RegExpMatchInfo::kFirstCaptureIndex + 1));\n \n       TNode<Smi> const replace_length = LoadStringLengthAsSmi(replace_string);\n \n@@ -2944,7 +2906,7 @@ Node* RegExpBuiltinsAssembler::ReplaceSimpleStringFastPath(\n       var_result = CAST(CallBuiltin(Builtins::kStringAdd_CheckNone_NotTenured,\n                                     context, var_result.value(), first_part));\n \n-      GotoIf(SmiEqual(replace_length, smi_zero), &loop_end);\n+      GotoIf(SmiEqual(replace_length, SmiZero()), &loop_end);\n \n       var_result =\n           CAST(CallBuiltin(Builtins::kStringAdd_CheckNone_NotTenured, context,\n@@ -2959,7 +2921,7 @@ Node* RegExpBuiltinsAssembler::ReplaceSimpleStringFastPath(\n \n         GotoIf(SmiNotEqual(match_end, match_start), &loop);\n         // If match is the empty string, we have to increment lastIndex.\n-        Node* const this_index = FastLoadLastIndex(regexp);\n+        Node* const this_index = FastLoadLastIndex(CAST(regexp));\n         Node* const next_index = AdvanceStringIndex(\n             string, this_index, var_is_unicode.value(), kIsFastPath);\n         FastStoreLastIndex(regexp, next_index);\n@@ -2985,10 +2947,10 @@ Node* RegExpBuiltinsAssembler::ReplaceSimpleStringFastPath(\n \n // Helper that skips a few initial checks.\n TF_BUILTIN(RegExpReplace, RegExpBuiltinsAssembler) {\n-  Node* const regexp = Parameter(Descriptor::kRegExp);\n-  TNode<String> const string = CAST(Parameter(Descriptor::kString));\n-  Node* const replace_value = Parameter(Descriptor::kReplaceValue);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<JSRegExp> regexp = CAST(Parameter(Descriptor::kRegExp));\n+  TNode<String> string = CAST(Parameter(Descriptor::kString));\n+  TNode<Object> replace_value = CAST(Parameter(Descriptor::kReplaceValue));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   CSA_ASSERT(this, IsFastRegExp(context, regexp));\n \n@@ -2997,7 +2959,7 @@ TF_BUILTIN(RegExpReplace, RegExpBuiltinsAssembler) {\n \n   // 2. Is {replace_value} callable?\n   GotoIf(TaggedIsSmi(replace_value), &checkreplacestring);\n-  Branch(IsCallableMap(LoadMap(replace_value)), &if_iscallable,\n+  Branch(IsCallableMap(LoadMap(CAST(replace_value))), &if_iscallable,\n          &checkreplacestring);\n \n   // 3. Does ToString({replace_value}) contain '$'?\n@@ -3019,7 +2981,7 @@ TF_BUILTIN(RegExpReplace, RegExpBuiltinsAssembler) {\n         isolate()->factory()->LookupSingleCharacterStringFromCode('$'));\n     TNode<Smi> const dollar_ix =\n         CAST(CallBuiltin(Builtins::kStringIndexOf, context, replace_string,\n-                         dollar_string, SmiConstant(0)));\n+                         dollar_string, SmiZero()));\n     GotoIfNot(SmiEqual(dollar_ix, SmiConstant(-1)), &runtime);\n \n     Return(\n@@ -3056,14 +3018,14 @@ TF_BUILTIN(RegExpPrototypeReplace, RegExpBuiltinsAssembler) {\n   const int kStringArg = 0;\n   const int kReplaceValueArg = 1;\n \n-  Node* argc =\n+  TNode<IntPtrT> argc =\n       ChangeInt32ToIntPtr(Parameter(Descriptor::kJSActualArgumentsCount));\n   CodeStubArguments args(this, argc);\n \n-  Node* const maybe_receiver = args.GetReceiver();\n-  Node* const maybe_string = args.GetOptionalArgumentValue(kStringArg);\n-  Node* const replace_value = args.GetOptionalArgumentValue(kReplaceValueArg);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> maybe_receiver = args.GetReceiver();\n+  TNode<Object> maybe_string = args.GetOptionalArgumentValue(kStringArg);\n+  TNode<Object> replace_value = args.GetOptionalArgumentValue(kReplaceValueArg);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   // RegExpPrototypeReplace is a bit of a beast - a summary of dispatch logic:\n   //\n@@ -3108,28 +3070,25 @@ TF_BUILTIN(RegExpPrototypeReplace, RegExpBuiltinsAssembler) {\n // Simple string matching functionality for internal use which does not modify\n // the last match info.\n TF_BUILTIN(RegExpInternalMatch, RegExpBuiltinsAssembler) {\n-  TNode<JSRegExp> const regexp = CAST(Parameter(Descriptor::kRegExp));\n-  TNode<String> const string = CAST(Parameter(Descriptor::kString));\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<JSRegExp> regexp = CAST(Parameter(Descriptor::kRegExp));\n+  TNode<String> string = CAST(Parameter(Descriptor::kString));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n-  Node* const smi_zero = SmiConstant(0);\n-  Node* const native_context = LoadNativeContext(context);\n-  Node* const internal_match_info = LoadContextElement(\n-      native_context, Context::REGEXP_INTERNAL_MATCH_INFO_INDEX);\n-  Node* const match_indices =\n-      CallBuiltin(Builtins::kRegExpExecInternal, context, regexp, string,\n-                  smi_zero, internal_match_info);\n-  Node* const null = NullConstant();\n+  TNode<Context> native_context = LoadNativeContext(context);\n+  TNode<RegExpMatchInfo> internal_match_info = CAST(LoadContextElement(\n+      native_context, Context::REGEXP_INTERNAL_MATCH_INFO_INDEX));\n+  TNode<HeapObject> maybe_match_indices =\n+      CAST(CallBuiltin(Builtins::kRegExpExecInternal, context, regexp, string,\n+                       SmiZero(), internal_match_info));\n+  TNode<Oddball> null = NullConstant();\n   Label if_matched(this);\n-  GotoIfNot(WordEqual(match_indices, null), &if_matched);\n+  GotoIfNot(WordEqual(maybe_match_indices, null), &if_matched);\n   Return(null);\n \n   BIND(&if_matched);\n-  {\n-    Node* result =\n-        ConstructNewResultFromMatchInfo(context, regexp, match_indices, string);\n-    Return(result);\n-  }\n+  TNode<RegExpMatchInfo> match_indices = CAST(maybe_match_indices);\n+  Return(\n+      ConstructNewResultFromMatchInfo(context, regexp, match_indices, string));\n }\n \n class RegExpStringIteratorAssembler : public RegExpBuiltinsAssembler {\n@@ -3168,24 +3127,20 @@ class RegExpStringIteratorAssembler : public RegExpBuiltinsAssembler {\n // https://tc39.github.io/proposal-string-matchall/\n // %RegExpStringIteratorPrototype%.next ( )\n TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n+  const char* method_name = \"%RegExpStringIterator%.prototype.next\";\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> maybe_receiver = CAST(Parameter(Descriptor::kReceiver));\n \n   Label if_match(this), if_no_match(this, Label::kDeferred),\n-      return_empty_done_result(this, Label::kDeferred),\n-      throw_bad_receiver(this, Label::kDeferred);\n+      return_empty_done_result(this, Label::kDeferred);\n \n   // 1. Let O be the this value.\n   // 2. If Type(O) is not Object, throw a TypeError exception.\n-  GotoIf(TaggedIsSmi(maybe_receiver), &throw_bad_receiver);\n-  TNode<HeapObject> receiver = CAST(maybe_receiver);\n-  GotoIfNot(IsJSReceiver(receiver), &throw_bad_receiver);\n-\n   // 3. If O does not have all of the internal slots of a RegExp String Iterator\n   // Object Instance (see 5.3), throw a TypeError exception.\n-  GotoIfNot(InstanceTypeEqual(LoadInstanceType(receiver),\n-                              JS_REGEXP_STRING_ITERATOR_TYPE),\n-            &throw_bad_receiver);\n+  ThrowIfNotInstanceType(context, maybe_receiver,\n+                         JS_REGEXP_STRING_ITERATOR_TYPE, method_name);\n+  TNode<HeapObject> receiver = CAST(maybe_receiver);\n \n   // 4. If O.[[Done]] is true, then\n   //   a. Return ! CreateIterResultObject(undefined, true).\n@@ -3196,6 +3151,10 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n   TNode<Object> iterating_regexp =\n       LoadObjectField(receiver, JSRegExpStringIterator::kIteratingRegExpOffset);\n \n+  // TODO(jgruber): Verify that this is guaranteed.\n+  CSA_CHECK(this, TaggedIsNotSmi(iterating_regexp));\n+  CSA_CHECK(this, IsJSReceiver(CAST(iterating_regexp)));\n+\n   // 6. Let S be O.[[IteratedString]].\n   TNode<String> iterating_string = CAST(\n       LoadObjectField(receiver, JSRegExpStringIterator::kIteratedStringOffset));\n@@ -3212,15 +3171,19 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n   {\n     Label if_fast(this), if_slow(this, Label::kDeferred);\n     BranchIfFastRegExp(context, iterating_regexp, &if_fast, &if_slow);\n+\n     BIND(&if_fast);\n     {\n-      TNode<Object> indices_or_null = CAST(RegExpPrototypeExecBodyWithoutResult(\n-          context, iterating_regexp, iterating_string, &if_no_match, true));\n-      var_match = CAST(ConstructNewResultFromMatchInfo(\n-          context, iterating_regexp, indices_or_null, iterating_string));\n+      TNode<RegExpMatchInfo> match_indices =\n+          RegExpPrototypeExecBodyWithoutResult(context, CAST(iterating_regexp),\n+                                               iterating_string, &if_no_match,\n+                                               true);\n+      var_match = ConstructNewResultFromMatchInfo(\n+          context, CAST(iterating_regexp), match_indices, iterating_string);\n       var_is_fast_regexp = Int32TrueConstant();\n       Goto(&if_match);\n     }\n+\n     BIND(&if_slow);\n     {\n       var_match = CAST(RegExpExec(context, iterating_regexp, iterating_string));\n@@ -3260,9 +3223,9 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n         });\n         CSA_ASSERT(this,\n                    SmiNotEqual(LoadFastJSArrayLength(CAST(var_match.value())),\n-                               SmiConstant(0)));\n-        TNode<FixedArrayBase> result_fixed_array =\n-            LoadElements(CAST(var_match.value()));\n+                               SmiZero()));\n+        TNode<FixedArray> result_fixed_array =\n+            CAST(LoadElements(CAST(var_match.value())));\n         TNode<String> match_str =\n             CAST(LoadFixedArrayElement(result_fixed_array, 0));\n \n@@ -3272,7 +3235,7 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n         GotoIfNot(IsEmptyString(match_str), &return_result);\n \n         // 1. Let thisIndex be ? ToLength(? Get(R, \"lastIndex\")).\n-        TNode<Smi> this_index = CAST(FastLoadLastIndex(iterating_regexp));\n+        TNode<Smi> this_index = CAST(FastLoadLastIndex(CAST(iterating_regexp)));\n         CSA_ASSERT(this, TaggedIsSmi(this_index));\n \n         // 2. Let nextIndex be ! AdvanceStringIndex(S, thisIndex, fullUnicode).\n@@ -3290,13 +3253,12 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n       {\n         // i. Let matchStr be ? ToString(? Get(match, \"0\")).\n         TNode<String> match_str = ToString_Inline(\n-            context, GetProperty(context, var_match.value(), SmiConstant(0)));\n+            context, GetProperty(context, var_match.value(), SmiZero()));\n \n         GotoIfNot(IsEmptyString(match_str), &return_result);\n \n         // 1. Let thisIndex be ? ToLength(? Get(R, \"lastIndex\")).\n-        TNode<Object> last_index =\n-            CAST(SlowLoadLastIndex(context, iterating_regexp));\n+        TNode<Object> last_index = SlowLoadLastIndex(context, iterating_regexp);\n         TNode<Number> this_index = ToLength_Inline(context, last_index);\n \n         // 2. Let nextIndex be ! AdvanceStringIndex(S, thisIndex, fullUnicode).\n@@ -3328,13 +3290,6 @@ TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n   BIND(&return_empty_done_result);\n   Return(\n       AllocateJSIteratorResult(context, UndefinedConstant(), TrueConstant()));\n-\n-  BIND(&throw_bad_receiver);\n-  {\n-    ThrowTypeError(context, MessageTemplate::kIncompatibleMethodReceiver,\n-                   StringConstant(\"%RegExpStringIterator%.prototype.next\"),\n-                   receiver);\n-  }\n }\n \n }  // namespace internal"
        },
        {
            "sha": "fd0e4b67550984d9064534ebcb8205b7ae44ab8a",
            "filename": "deps/v8/src/builtins/builtins-regexp-gen.h",
            "status": "modified",
            "additions": 29,
            "deletions": 22,
            "changes": 51,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -34,16 +34,21 @@ class RegExpBuiltinsAssembler : public CodeStubAssembler {\n                                  char const* method_name);\n \n  protected:\n+  TNode<Smi> SmiZero();\n+  TNode<IntPtrT> IntPtrZero();\n+\n   // Allocate a RegExpResult with the given length (the number of captures,\n   // including the match itself), index (the index where the match starts),\n-  // and input string. |length| and |index| are expected to be tagged, and\n-  // |input| must be a string.\n-  Node* AllocateRegExpResult(Node* context, Node* length, Node* index,\n-                             Node* input);\n+  // and input string.\n+  TNode<JSRegExpResult> AllocateRegExpResult(TNode<Context> context,\n+                                             TNode<Smi> length,\n+                                             TNode<Smi> index,\n+                                             TNode<String> input);\n \n-  TNode<Object> FastLoadLastIndex(Node* regexp);\n-  Node* SlowLoadLastIndex(Node* context, Node* regexp);\n-  Node* LoadLastIndex(Node* context, Node* regexp, bool is_fastpath);\n+  TNode<Object> FastLoadLastIndex(TNode<JSRegExp> regexp);\n+  TNode<Object> SlowLoadLastIndex(TNode<Context> context, TNode<Object> regexp);\n+  TNode<Object> LoadLastIndex(TNode<Context> context, TNode<Object> regexp,\n+                              bool is_fastpath);\n \n   void FastStoreLastIndex(Node* regexp, Node* value);\n   void SlowStoreLastIndex(Node* context, Node* regexp, Node* value);\n@@ -58,21 +63,23 @@ class RegExpBuiltinsAssembler : public CodeStubAssembler {\n                          Variable* var_string_end);\n \n   // Low level logic around the actual call into pattern matching code.\n-  Node* RegExpExecInternal(Node* const context, Node* const regexp,\n-                           Node* const string, Node* const last_index,\n-                           Node* const match_info);\n-\n-  Node* ConstructNewResultFromMatchInfo(Node* const context, Node* const regexp,\n-                                        Node* const match_info,\n-                                        TNode<String> const string);\n-\n-  Node* RegExpPrototypeExecBodyWithoutResult(Node* const context,\n-                                             Node* const regexp,\n-                                             Node* const string,\n-                                             Label* if_didnotmatch,\n-                                             const bool is_fastpath);\n-  Node* RegExpPrototypeExecBody(Node* const context, Node* const regexp,\n-                                TNode<String> string, const bool is_fastpath);\n+  TNode<HeapObject> RegExpExecInternal(TNode<Context> context,\n+                                       TNode<JSRegExp> regexp,\n+                                       TNode<String> string,\n+                                       TNode<Number> last_index,\n+                                       TNode<RegExpMatchInfo> match_info);\n+\n+  TNode<JSRegExpResult> ConstructNewResultFromMatchInfo(\n+      TNode<Context> context, TNode<JSReceiver> maybe_regexp,\n+      TNode<RegExpMatchInfo> match_info, TNode<String> string);\n+\n+  TNode<RegExpMatchInfo> RegExpPrototypeExecBodyWithoutResult(\n+      TNode<Context> context, TNode<JSReceiver> maybe_regexp,\n+      TNode<String> string, Label* if_didnotmatch, const bool is_fastpath);\n+  TNode<HeapObject> RegExpPrototypeExecBody(TNode<Context> context,\n+                                            TNode<JSReceiver> maybe_regexp,\n+                                            TNode<String> string,\n+                                            const bool is_fastpath);\n \n   Node* ThrowIfNotJSReceiver(Node* context, Node* maybe_receiver,\n                              MessageTemplate::Template msg_template,"
        },
        {
            "sha": "e763ab10ea1ee7642da711f56bfa04c479198d4c",
            "filename": "deps/v8/src/builtins/builtins-regexp.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,13 +2,13 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/counters.h\"\n #include \"src/objects-inl.h\"\n #include \"src/regexp/jsregexp.h\"\n #include \"src/regexp/regexp-utils.h\"\n-#include \"src/string-builder.h\"\n+#include \"src/string-builder-inl.h\"\n \n namespace v8 {\n namespace internal {"
        },
        {
            "sha": "92c1c65d1f762b55deafc94e51e35fdf3503114e",
            "filename": "deps/v8/src/builtins/builtins-sharedarraybuffer.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -5,7 +5,7 @@\n #include \"src/base/macros.h\"\n #include \"src/base/platform/mutex.h\"\n #include \"src/base/platform/time.h\"\n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-factory.h\"\n #include \"src/conversions-inl.h\"\n@@ -14,6 +14,7 @@\n #include \"src/globals.h\"\n #include \"src/heap/factory.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/js-array-buffer-inl.h\"\n \n namespace v8 {\n namespace internal {\n@@ -114,7 +115,7 @@ BUILTIN(AtomicsWake) {\n   Handle<JSArrayBuffer> array_buffer = sta->GetBuffer();\n   size_t addr = (i << 2) + NumberToSize(sta->byte_offset());\n \n-  return FutexEmulation::Wake(isolate, array_buffer, addr, c);\n+  return FutexEmulation::Wake(array_buffer, addr, c);\n }\n \n // ES #sec-atomics.wait"
        },
        {
            "sha": "c46a3fd35d761b10f890a031defeb761a23ba7e6",
            "filename": "deps/v8/src/builtins/builtins-string-gen.cc",
            "status": "modified",
            "additions": 22,
            "deletions": 21,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -1640,7 +1640,8 @@ class StringPadAssembler : public StringBuiltinsAssembler {\n     TVARIABLE(String, var_fill_string, StringConstant(\" \"));\n     TVARIABLE(IntPtrT, var_fill_length, IntPtrConstant(1));\n \n-    Label argc_2(this), dont_pad(this), invalid_string_length(this), pad(this);\n+    Label check_fill(this), dont_pad(this), invalid_string_length(this),\n+        pad(this);\n \n     // If no max_length was provided, return the string.\n     GotoIf(IntPtrEqual(argc, IntPtrConstant(0)), &dont_pad);\n@@ -1649,41 +1650,41 @@ class StringPadAssembler : public StringBuiltinsAssembler {\n         ToLength_Inline(context, arguments.AtIndex(0));\n     CSA_ASSERT(this, IsNumberNormalized(max_length));\n \n-    // Throw if max_length is not a smi or greater than the max string length.\n-    GotoIfNot(TaggedIsSmi(max_length), &invalid_string_length);\n-    TNode<Smi> smi_max_length = CAST(max_length);\n-    GotoIfNot(\n-        SmiLessThanOrEqual(smi_max_length, SmiConstant(String::kMaxLength)),\n-        &invalid_string_length);\n+    // If max_length <= string_length, return the string.\n+    GotoIfNot(TaggedIsSmi(max_length), &check_fill);\n+    Branch(SmiLessThanOrEqual(CAST(max_length), string_length), &dont_pad,\n+           &check_fill);\n \n-    // If the max_length is less than length of the string, return the string.\n-    CSA_ASSERT(this, TaggedIsPositiveSmi(smi_max_length));\n-    GotoIf(SmiLessThanOrEqual(smi_max_length, string_length), &dont_pad);\n-\n-    Branch(IntPtrEqual(argc, IntPtrConstant(1)), &pad, &argc_2);\n-    BIND(&argc_2);\n+    BIND(&check_fill);\n     {\n+      GotoIf(IntPtrEqual(argc, IntPtrConstant(1)), &pad);\n       Node* const fill = arguments.AtIndex(1);\n       GotoIf(IsUndefined(fill), &pad);\n \n       var_fill_string = ToString_Inline(context, fill);\n       var_fill_length = LoadStringLengthAsWord(var_fill_string.value());\n-\n-      Branch(IntPtrGreaterThan(var_fill_length.value(), IntPtrConstant(0)),\n-             &pad, &dont_pad);\n+      Branch(WordEqual(var_fill_length.value(), IntPtrConstant(0)), &dont_pad,\n+             &pad);\n     }\n+\n     BIND(&pad);\n     {\n       CSA_ASSERT(this,\n                  IntPtrGreaterThan(var_fill_length.value(), IntPtrConstant(0)));\n-      CSA_ASSERT(this, SmiGreaterThan(smi_max_length, string_length));\n+\n+      // Throw if max_length is greater than String::kMaxLength.\n+      GotoIfNot(TaggedIsSmi(max_length), &invalid_string_length);\n+      TNode<Smi> smi_max_length = CAST(max_length);\n+      GotoIfNot(\n+          SmiLessThanOrEqual(smi_max_length, SmiConstant(String::kMaxLength)),\n+          &invalid_string_length);\n \n       Callable stringadd_callable =\n           CodeFactory::StringAdd(isolate(), STRING_ADD_CHECK_NONE, NOT_TENURED);\n+      CSA_ASSERT(this, SmiGreaterThan(smi_max_length, string_length));\n       TNode<Smi> const pad_length = SmiSub(smi_max_length, string_length);\n \n       VARIABLE(var_pad, MachineRepresentation::kTagged);\n-\n       Label single_char_fill(this), multi_char_fill(this), return_result(this);\n       Branch(IntPtrEqual(var_fill_length.value(), IntPtrConstant(1)),\n              &single_char_fill, &multi_char_fill);\n@@ -1837,8 +1838,8 @@ TNode<JSArray> StringBuiltinsAssembler::StringToArray(\n \n     ToDirectStringAssembler to_direct(state(), subject_string);\n     to_direct.TryToDirect(&call_runtime);\n-    TNode<FixedArray> elements = AllocateFixedArray(\n-        PACKED_ELEMENTS, length, AllocationFlag::kAllowLargeObjectAllocation);\n+    TNode<FixedArray> elements = CAST(AllocateFixedArray(\n+        PACKED_ELEMENTS, length, AllocationFlag::kAllowLargeObjectAllocation));\n     // Don't allocate anything while {string_data} is live!\n     TNode<RawPtrT> string_data = UncheckedCast<RawPtrT>(\n         to_direct.PointerToData(&fill_thehole_and_call_runtime));\n@@ -1951,7 +1952,7 @@ TF_BUILTIN(StringPrototypeSplit, StringBuiltinsAssembler) {\n     Node* const capacity = IntPtrConstant(1);\n     Node* const result = AllocateJSArray(kind, array_map, capacity, length);\n \n-    Node* const fixed_array = LoadElements(result);\n+    TNode<FixedArray> const fixed_array = CAST(LoadElements(result));\n     StoreFixedArrayElement(fixed_array, 0, subject_string);\n \n     args.PopAndReturn(result);"
        },
        {
            "sha": "0dafa230b50d10ca6f93105497f64decfa2f54e7",
            "filename": "deps/v8/src/builtins/builtins-string.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 4,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,13 +2,16 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/conversions.h\"\n #include \"src/counters.h\"\n #include \"src/objects-inl.h\"\n+#ifdef V8_INTL_SUPPORT\n+#include \"src/objects/intl-objects.h\"\n+#endif\n #include \"src/regexp/regexp-utils.h\"\n-#include \"src/string-builder.h\"\n+#include \"src/string-builder-inl.h\"\n #include \"src/string-case.h\"\n #include \"src/unicode-inl.h\"\n #include \"src/unicode.h\"\n@@ -190,10 +193,18 @@ BUILTIN(StringPrototypeLastIndexOf) {\n //\n // This function is implementation specific.  For now, we do not\n // do anything locale specific.\n-// If internationalization is enabled, then intl.js will override this function\n-// and provide the proper functionality, so this is just a fallback.\n BUILTIN(StringPrototypeLocaleCompare) {\n   HandleScope handle_scope(isolate);\n+#ifdef V8_INTL_SUPPORT\n+  TO_THIS_STRING(str1, \"String.prototype.localeCompare\");\n+  Handle<String> str2;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, str2, Object::ToString(isolate, args.atOrUndefined(isolate, 1)));\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, Intl::StringLocaleCompare(isolate, str1, str2,\n+                                         args.atOrUndefined(isolate, 2),\n+                                         args.atOrUndefined(isolate, 3)));\n+#else\n   DCHECK_EQ(2, args.length());\n \n   TO_THIS_STRING(str1, \"String.prototype.localeCompare\");\n@@ -235,6 +246,7 @@ BUILTIN(StringPrototypeLocaleCompare) {\n   }\n \n   return Smi::FromInt(str1_length - str2_length);\n+#endif  // !V8_INTL_SUPPORT\n }\n \n #ifndef V8_INTL_SUPPORT"
        },
        {
            "sha": "55c030748446e8f768d5a86dd6cc58f09184f88a",
            "filename": "deps/v8/src/builtins/builtins-symbol.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/counters.h\"\n #include \"src/objects-inl.h\"\n@@ -16,20 +16,20 @@ namespace internal {\n // ES #sec-symbol-constructor\n BUILTIN(SymbolConstructor) {\n   HandleScope scope(isolate);\n-  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n-    Handle<Symbol> result = isolate->factory()->NewSymbol();\n-    Handle<Object> description = args.atOrUndefined(isolate, 1);\n-    if (!description->IsUndefined(isolate)) {\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-          isolate, description, Object::ToString(isolate, description));\n-      result->set_name(*description);\n-    }\n-    return *result;\n-  } else {  // [[Construct]]\n+  if (!args.new_target()->IsUndefined(isolate)) {  // [[Construct]]\n     THROW_NEW_ERROR_RETURN_FAILURE(\n         isolate, NewTypeError(MessageTemplate::kNotConstructor,\n                               isolate->factory()->Symbol_string()));\n   }\n+  // [[Call]]\n+  Handle<Symbol> result = isolate->factory()->NewSymbol();\n+  Handle<Object> description = args.atOrUndefined(isolate, 1);\n+  if (!description->IsUndefined(isolate)) {\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, description,\n+                                       Object::ToString(isolate, description));\n+    result->set_name(*description);\n+  }\n+  return *result;\n }\n \n // ES6 section 19.4.2.1 Symbol.for."
        },
        {
            "sha": "c2b799412f974971a743a371aa1e46bbbad29f59",
            "filename": "deps/v8/src/builtins/builtins-trace.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-trace.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-trace.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-trace.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,8 +2,8 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/api.h\"\n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/api-inl.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/counters.h\"\n #include \"src/json-stringifier.h\"\n@@ -38,10 +38,11 @@ class MaybeUtf8 {\n       }\n     } else {\n       Local<v8::String> local = Utils::ToLocal(string);\n-      len = local->Utf8Length();\n+      auto* v8_isolate = reinterpret_cast<v8::Isolate*>(isolate);\n+      len = local->Utf8Length(v8_isolate);\n       AllocateSufficientSpace(len);\n       if (len > 0) {\n-        local->WriteUtf8(reinterpret_cast<char*>(buf_));\n+        local->WriteUtf8(v8_isolate, reinterpret_cast<char*>(buf_));\n       }\n     }\n     buf_[len] = 0;\n@@ -166,12 +167,11 @@ BUILTIN(Trace) {\n     // could have perf costs. It is also subject to all the same\n     // limitations as JSON.stringify() as it relates to circular\n     // references and value limitations (e.g. BigInt is not supported).\n-    JsonStringifier stringifier(isolate);\n     Handle<Object> result;\n     ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n         isolate, result,\n-        stringifier.Stringify(data_arg, isolate->factory()->undefined_value(),\n-                              isolate->factory()->undefined_value()));\n+        JsonStringify(isolate, data_arg, isolate->factory()->undefined_value(),\n+                      isolate->factory()->undefined_value()));\n     std::unique_ptr<JsonTraceValue> traced_value;\n     traced_value.reset(\n         new JsonTraceValue(isolate, Handle<String>::cast(result)));"
        },
        {
            "sha": "c7c416d924e942576eef5d89545cd6ffdf104753",
            "filename": "deps/v8/src/builtins/builtins-typed-array-gen.cc",
            "status": "modified",
            "additions": 37,
            "deletions": 143,
            "changes": 180,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -10,6 +10,7 @@\n #include \"src/builtins/builtins.h\"\n #include \"src/builtins/growable-fixed-array-gen.h\"\n #include \"src/handles-inl.h\"\n+#include \"src/heap/factory-inl.h\"\n \n namespace v8 {\n namespace internal {\n@@ -312,6 +313,7 @@ void TypedArrayBuiltinsAssembler::ConstructByLength(TNode<Context> context,\n                                                     TNode<JSTypedArray> holder,\n                                                     TNode<Object> length,\n                                                     TNode<Smi> element_size) {\n+  // TODO(7881): support larger-than-smi typed array lengths\n   CSA_ASSERT(this, TaggedIsPositiveSmi(element_size));\n \n   Label invalid_length(this, Label::kDeferred), done(this);\n@@ -322,6 +324,7 @@ void TypedArrayBuiltinsAssembler::ConstructByLength(TNode<Context> context,\n   // The maximum length of a TypedArray is MaxSmi().\n   // Note: this is not per spec, but rather a constraint of our current\n   // representation (which uses Smis).\n+  // TODO(7881): support larger-than-smi typed array lengths\n   GotoIf(TaggedIsNotSmi(converted_length), &invalid_length);\n   // The goto above ensures that byte_length is a Smi.\n   TNode<Smi> smi_converted_length = CAST(converted_length);\n@@ -358,8 +361,7 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayBuffer(\n       invalid_offset_error(this, Label::kDeferred);\n   Label offset_is_smi(this), offset_not_smi(this, Label::kDeferred),\n       check_length(this), call_init(this), invalid_length(this),\n-      length_undefined(this), length_defined(this), detached_error(this),\n-      done(this);\n+      length_undefined(this), length_defined(this), done(this);\n \n   GotoIf(IsUndefined(byte_offset), &check_length);\n \n@@ -396,7 +398,7 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayBuffer(\n \n   BIND(&length_undefined);\n   {\n-    GotoIf(IsDetachedBuffer(buffer), &detached_error);\n+    ThrowIfArrayBufferIsDetached(context, buffer, \"Construct\");\n     Node* buffer_byte_length =\n         LoadObjectField(buffer, JSArrayBuffer::kByteLengthOffset);\n \n@@ -418,7 +420,7 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayBuffer(\n   BIND(&length_defined);\n   {\n     TNode<Smi> new_length = ToSmiIndex(length, context, &invalid_length);\n-    GotoIf(IsDetachedBuffer(buffer), &detached_error);\n+    ThrowIfArrayBufferIsDetached(context, buffer, \"Construct\");\n     new_byte_length.Bind(SmiMul(new_length, element_size));\n     // Reading the byte length must come after the ToIndex operation, which\n     // could cause the buffer to become detached.\n@@ -473,9 +475,6 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayBuffer(\n     ThrowRangeError(context, MessageTemplate::kInvalidTypedArrayLength, length);\n   }\n \n-  BIND(&detached_error);\n-  { ThrowTypeError(context, MessageTemplate::kDetachedOperation, \"Construct\"); }\n-\n   BIND(&done);\n }\n \n@@ -570,7 +569,7 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayLike(\n     TNode<HeapObject> array_like, TNode<Object> initial_length,\n     TNode<Smi> element_size, TNode<JSReceiver> buffer_constructor) {\n   Label invalid_length(this, Label::kDeferred), fill(this), fast_copy(this),\n-      detached_check(this), done(this), detached_error(this, Label::kDeferred);\n+      detached_check(this), done(this);\n \n   // The caller has looked up length on array_like, which is observable.\n   TNode<Smi> length = ToSmiLength(initial_length, context, &invalid_length);\n@@ -583,9 +582,8 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayLike(\n   Goto(&fill);\n \n   BIND(&detached_check);\n-  GotoIf(IsDetachedBuffer(\n-             LoadObjectField(array_like, JSTypedArray::kBufferOffset)),\n-         &detached_error);\n+  ThrowIfArrayBufferViewBufferIsDetached(context, CAST(array_like),\n+                                         \"Construct\");\n   Goto(&fill);\n \n   BIND(&fill);\n@@ -626,9 +624,6 @@ void TypedArrayBuiltinsAssembler::ConstructByArrayLike(\n     Goto(&done);\n   }\n \n-  BIND(&detached_error);\n-  { ThrowTypeError(context, MessageTemplate::kDetachedOperation, \"Construct\"); }\n-\n   BIND(&invalid_length);\n   {\n     ThrowRangeError(context, MessageTemplate::kInvalidTypedArrayLength,\n@@ -750,12 +745,6 @@ TF_BUILTIN(CreateTypedArray, TypedArrayBuiltinsAssembler) {\n   Return(result);\n }\n \n-TF_BUILTIN(TypedArrayConstructorLazyDeoptContinuation,\n-           TypedArrayBuiltinsAssembler) {\n-  Node* result = Parameter(Descriptor::kResult);\n-  Return(result);\n-}\n-\n // ES #sec-typedarray-constructors\n TF_BUILTIN(TypedArrayConstructor, TypedArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n@@ -789,10 +778,7 @@ TF_BUILTIN(TypedArrayConstructor, TypedArrayBuiltinsAssembler) {\n void TypedArrayBuiltinsAssembler::GenerateTypedArrayPrototypeGetter(\n     Node* context, Node* receiver, const char* method_name, int object_offset) {\n   // Check if the {receiver} is actually a JSTypedArray.\n-  Label receiver_is_incompatible(this, Label::kDeferred);\n-  GotoIf(TaggedIsSmi(receiver), &receiver_is_incompatible);\n-  GotoIfNot(HasInstanceType(receiver, JS_TYPED_ARRAY_TYPE),\n-            &receiver_is_incompatible);\n+  ThrowIfNotInstanceType(context, receiver, JS_TYPED_ARRAY_TYPE, method_name);\n \n   // Check if the {receiver}'s JSArrayBuffer was neutered.\n   Node* receiver_buffer =\n@@ -806,13 +792,6 @@ void TypedArrayBuiltinsAssembler::GenerateTypedArrayPrototypeGetter(\n     // The {receiver}s buffer was neutered, default to zero.\n     Return(SmiConstant(0));\n   }\n-\n-  BIND(&receiver_is_incompatible);\n-  {\n-    // The {receiver} is not a valid JSTypedArray.\n-    ThrowTypeError(context, MessageTemplate::kIncompatibleMethodReceiver,\n-                   StringConstant(method_name), receiver);\n-  }\n }\n \n // ES6 #sec-get-%typedarray%.prototype.bytelength\n@@ -977,18 +956,12 @@ TNode<JSArrayBuffer> TypedArrayBuiltinsAssembler::GetBuffer(\n \n TNode<JSTypedArray> TypedArrayBuiltinsAssembler::ValidateTypedArray(\n     TNode<Context> context, TNode<Object> obj, const char* method_name) {\n-  Label validation_done(this);\n-\n   // If it is not a typed array, throw\n   ThrowIfNotInstanceType(context, obj, JS_TYPED_ARRAY_TYPE, method_name);\n \n   // If the typed array's buffer is detached, throw\n-  TNode<Object> buffer =\n-      LoadObjectField(CAST(obj), JSTypedArray::kBufferOffset);\n-  GotoIfNot(IsDetachedBuffer(buffer), &validation_done);\n-  ThrowTypeError(context, MessageTemplate::kDetachedOperation, method_name);\n+  ThrowIfArrayBufferViewBufferIsDetached(context, CAST(obj), method_name);\n \n-  BIND(&validation_done);\n   return CAST(obj);\n }\n \n@@ -1129,7 +1102,8 @@ void TypedArrayBuiltinsAssembler::\n                                                    TNode<JSTypedArray> dest,\n                                                    TNode<IntPtrT> source_length,\n                                                    TNode<IntPtrT> offset) {\n-  CSA_ASSERT(this, Word32Not(IsBigInt64ElementsKind(LoadElementsKind(dest))));\n+  CSA_ASSERT(this,\n+             Word32BinaryNot(IsBigInt64ElementsKind(LoadElementsKind(dest))));\n   TNode<ExternalReference> f = ExternalConstant(\n       ExternalReference::copy_fast_number_jsarray_elements_to_typed_array());\n   CallCFunction5(MachineType::AnyTagged(), MachineType::AnyTagged(),\n@@ -1164,18 +1138,17 @@ void TypedArrayBuiltinsAssembler::DispatchTypedArrayByElementsKind(\n   Label next(this), if_unknown_type(this, Label::kDeferred);\n \n   int32_t elements_kinds[] = {\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) TYPE##_ELEMENTS,\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) TYPE##_ELEMENTS,\n       TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n   };\n \n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) \\\n-  Label if_##type##array(this);\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) Label if_##type##array(this);\n   TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n \n   Label* elements_kind_labels[] = {\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) &if_##type##array,\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) &if_##type##array,\n       TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n   };\n@@ -1184,11 +1157,12 @@ void TypedArrayBuiltinsAssembler::DispatchTypedArrayByElementsKind(\n   Switch(elements_kind, &if_unknown_type, elements_kinds, elements_kind_labels,\n          arraysize(elements_kinds));\n \n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size)                    \\\n-  BIND(&if_##type##array);                                                 \\\n-  {                                                                        \\\n-    case_function(TYPE##_ELEMENTS, size, Context::TYPE##_ARRAY_FUN_INDEX); \\\n-    Goto(&next);                                                           \\\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype)   \\\n+  BIND(&if_##type##array);                          \\\n+  {                                                 \\\n+    case_function(TYPE##_ELEMENTS, sizeof(ctype),   \\\n+                  Context::TYPE##_ARRAY_FUN_INDEX); \\\n+    Goto(&next);                                    \\\n   }\n   TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n@@ -1201,6 +1175,7 @@ void TypedArrayBuiltinsAssembler::DispatchTypedArrayByElementsKind(\n \n // ES #sec-get-%typedarray%.prototype.set\n TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n+  const char* method_name = \"%TypedArray%.prototype.set\";\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   CodeStubArguments args(\n       this,\n@@ -1209,7 +1184,6 @@ TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n   Label if_source_is_typed_array(this), if_source_is_fast_jsarray(this),\n       if_offset_is_out_of_bounds(this, Label::kDeferred),\n       if_source_too_large(this, Label::kDeferred),\n-      if_typed_array_is_neutered(this, Label::kDeferred),\n       if_receiver_is_not_typedarray(this, Label::kDeferred);\n \n   // Check the receiver is a typed array.\n@@ -1233,9 +1207,7 @@ TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n   TNode<Smi> offset_smi = CAST(offset_num);\n \n   // Check the receiver is not neutered.\n-  TNode<Object> receiver_buffer =\n-      LoadObjectField(CAST(receiver), JSTypedArray::kBufferOffset);\n-  GotoIf(IsDetachedBuffer(receiver_buffer), &if_typed_array_is_neutered);\n+  ThrowIfArrayBufferViewBufferIsDetached(context, CAST(receiver), method_name);\n \n   // Check the source argument is valid and whether a fast path can be taken.\n   Label call_runtime(this);\n@@ -1249,9 +1221,7 @@ TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n   BIND(&if_source_is_typed_array);\n   {\n     // Check the source argument is not neutered.\n-    TNode<Object> source_buffer =\n-        LoadObjectField(CAST(source), JSTypedArray::kBufferOffset);\n-    GotoIf(IsDetachedBuffer(source_buffer), &if_typed_array_is_neutered);\n+    ThrowIfArrayBufferViewBufferIsDetached(context, CAST(source), method_name);\n \n     SetTypedArraySource(context, CAST(source), CAST(receiver),\n                         SmiUntag(offset_smi), &call_runtime,\n@@ -1277,10 +1247,6 @@ TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n   BIND(&if_source_too_large);\n   ThrowRangeError(context, MessageTemplate::kTypedArraySetSourceTooLarge);\n \n-  BIND(&if_typed_array_is_neutered);\n-  ThrowTypeError(context, MessageTemplate::kDetachedOperation,\n-                 \"%TypedArray%.prototype.set\");\n-\n   BIND(&if_receiver_is_not_typedarray);\n   ThrowTypeError(context, MessageTemplate::kNotTypedArray);\n }\n@@ -1289,7 +1255,6 @@ TF_BUILTIN(TypedArrayPrototypeSet, TypedArrayBuiltinsAssembler) {\n TF_BUILTIN(TypedArrayPrototypeSlice, TypedArrayBuiltinsAssembler) {\n   const char* method_name = \"%TypedArray%.prototype.slice\";\n   Label call_c(this), call_memmove(this), if_count_is_not_zero(this),\n-      if_typed_array_is_neutered(this, Label::kDeferred),\n       if_bigint_mixed_types(this, Label::kDeferred);\n \n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n@@ -1333,9 +1298,9 @@ TF_BUILTIN(TypedArrayPrototypeSlice, TypedArrayBuiltinsAssembler) {\n   // result array is neutered or not since TypedArraySpeciesCreate checked it.\n   CSA_ASSERT(this, Word32BinaryNot(IsDetachedBuffer(LoadObjectField(\n                        result_array, JSTypedArray::kBufferOffset))));\n-  TNode<Object> receiver_buffer =\n-      LoadObjectField(CAST(receiver), JSTypedArray::kBufferOffset);\n-  GotoIf(IsDetachedBuffer(receiver_buffer), &if_typed_array_is_neutered);\n+  TNode<JSArrayBuffer> receiver_buffer =\n+      LoadArrayBufferViewBuffer(CAST(receiver));\n+  ThrowIfArrayBufferIsDetached(context, receiver_buffer, method_name);\n \n   // result_array could be a different type from source or share the same\n   // buffer with the source because of custom species constructor.\n@@ -1402,9 +1367,6 @@ TF_BUILTIN(TypedArrayPrototypeSlice, TypedArrayBuiltinsAssembler) {\n     args.PopAndReturn(result_array);\n   }\n \n-  BIND(&if_typed_array_is_neutered);\n-  ThrowTypeError(context, MessageTemplate::kDetachedOperation, method_name);\n-\n   BIND(&if_bigint_mixed_types);\n   ThrowTypeError(context, MessageTemplate::kBigIntMixedTypes);\n }\n@@ -1491,19 +1453,19 @@ TF_BUILTIN(TypedArrayPrototypeToStringTag, TypedArrayBuiltinsAssembler) {\n   size_t const kTypedElementsKindCount = LAST_FIXED_TYPED_ARRAY_ELEMENTS_KIND -\n                                          FIRST_FIXED_TYPED_ARRAY_ELEMENTS_KIND +\n                                          1;\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) \\\n-  Label return_##type##array(this);                     \\\n-  BIND(&return_##type##array);                          \\\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) \\\n+  Label return_##type##array(this);               \\\n+  BIND(&return_##type##array);                    \\\n   Return(StringConstant(#Type \"Array\"));\n   TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n   Label* elements_kind_labels[kTypedElementsKindCount] = {\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) &return_##type##array,\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) &return_##type##array,\n       TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n   };\n   int32_t elements_kinds[kTypedElementsKindCount] = {\n-#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) \\\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype) \\\n   TYPE##_ELEMENTS - FIRST_FIXED_TYPED_ARRAY_ELEMENTS_KIND,\n       TYPED_ARRAYS(TYPED_ARRAY_CASE)\n #undef TYPED_ARRAY_CASE\n@@ -1532,18 +1494,12 @@ void TypedArrayBuiltinsAssembler::GenerateTypedArrayPrototypeIterationMethod(\n   GotoIfNot(IsJSTypedArray(CAST(receiver)), &throw_bad_receiver);\n \n   // Check if the {receiver}'s JSArrayBuffer was neutered.\n-  TNode<JSArrayBuffer> receiver_buffer = LoadObjectField<JSArrayBuffer>(\n-      CAST(receiver), JSTypedArray::kBufferOffset);\n-  Label if_receiverisneutered(this, Label::kDeferred);\n-  GotoIf(IsDetachedBuffer(receiver_buffer), &if_receiverisneutered);\n+  ThrowIfArrayBufferViewBufferIsDetached(context, CAST(receiver), method_name);\n \n   Return(CreateArrayIterator(context, receiver, kind));\n \n   BIND(&throw_bad_receiver);\n   ThrowTypeError(context, MessageTemplate::kNotTypedArray, method_name);\n-\n-  BIND(&if_receiverisneutered);\n-  ThrowTypeError(context, MessageTemplate::kDetachedOperation, method_name);\n }\n \n // ES #sec-%typedarray%.prototype.values\n@@ -1650,78 +1606,15 @@ TF_BUILTIN(TypedArrayOf, TypedArrayBuiltinsAssembler) {\n                  \"%TypedArray%.of\");\n }\n \n-void TypedArrayBuiltinsAssembler::IterableToListSlowPath(\n-    TNode<Context> context, TNode<Object> iterable, TNode<Object> iterator_fn,\n-    Variable* created_list) {\n-  IteratorBuiltinsAssembler iterator_assembler(state());\n-\n-  // 1. Let iteratorRecord be ? GetIterator(items, method).\n-  IteratorRecord iterator_record =\n-      iterator_assembler.GetIterator(context, iterable, iterator_fn);\n-\n-  // 2. Let values be a new empty List.\n-  GrowableFixedArray values(state());\n-\n-  Variable* vars[] = {values.var_array(), values.var_length(),\n-                      values.var_capacity()};\n-  Label loop_start(this, 3, vars), loop_end(this);\n-  Goto(&loop_start);\n-  // 3. Let next be true.\n-  // 4. Repeat, while next is not false\n-  BIND(&loop_start);\n-  {\n-    //  a. Set next to ? IteratorStep(iteratorRecord).\n-    TNode<Object> next = CAST(\n-        iterator_assembler.IteratorStep(context, iterator_record, &loop_end));\n-    //  b. If next is not false, then\n-    //   i. Let nextValue be ? IteratorValue(next).\n-    TNode<Object> next_value =\n-        CAST(iterator_assembler.IteratorValue(context, next));\n-    //   ii. Append nextValue to the end of the List values.\n-    values.Push(next_value);\n-    Goto(&loop_start);\n-  }\n-  BIND(&loop_end);\n-\n-  // 5. Return values.\n-  TNode<JSArray> js_array_values = values.ToJSArray(context);\n-  created_list->Bind(js_array_values);\n-}\n-\n // This builtin always returns a new JSArray and is thus safe to use even in the\n // presence of code that may call back into user-JS.\n TF_BUILTIN(IterableToList, TypedArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> iterable = CAST(Parameter(Descriptor::kIterable));\n   TNode<Object> iterator_fn = CAST(Parameter(Descriptor::kIteratorFn));\n \n-  Label fast_path(this), slow_path(this), done(this);\n-\n-  TVARIABLE(JSArray, created_list);\n-\n-  // This is a fast-path for ignoring the iterator.\n-  // TODO(petermarshall): Port IterableToListCanBeElided to CSA.\n-  Node* elided =\n-      CallRuntime(Runtime::kIterableToListCanBeElided, context, iterable);\n-  CSA_ASSERT(this, IsBoolean(elided));\n-  Branch(IsTrue(elided), &fast_path, &slow_path);\n-\n-  BIND(&fast_path);\n-  {\n-    TNode<JSArray> input_array = CAST(iterable);\n-    TNode<JSArray> new_array = CAST(CloneFastJSArray(context, input_array));\n-    created_list = new_array;\n-    Goto(&done);\n-  }\n-\n-  BIND(&slow_path);\n-  {\n-    IterableToListSlowPath(context, iterable, iterator_fn, &created_list);\n-    Goto(&done);\n-  }\n-\n-  BIND(&done);\n-  Return(created_list.value());\n+  IteratorBuiltinsAssembler iterator_assembler(state());\n+  Return(iterator_assembler.IterableToList(context, iterable, iterator_fn));\n }\n \n // ES6 #sec-%typedarray%.from\n@@ -1807,6 +1700,7 @@ TF_BUILTIN(TypedArrayFrom, TypedArrayBuiltinsAssembler) {\n \n   BIND(&from_array_like);\n   {\n+    // TODO(7881): support larger-than-smi typed array lengths\n     Label if_length_not_smi(this, Label::kDeferred);\n     final_source = source;\n "
        },
        {
            "sha": "11768d660a0b4995a849c187222b9e57e329026f",
            "filename": "deps/v8/src/builtins/builtins-typed-array-gen.h",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -55,10 +55,6 @@ class TypedArrayBuiltinsAssembler : public BaseBuiltinsFromDSLAssembler {\n                     TNode<Map> map, TNode<Smi> length,\n                     TNode<Number> byte_offset);\n \n-  void IterableToListSlowPath(TNode<Context> context, TNode<Object> iterable,\n-                              TNode<Object> iterator_fn,\n-                              Variable* created_list);\n-\n   TNode<Map> LoadMapForType(TNode<JSTypedArray> array);\n   TNode<UintPtrT> CalculateExternalPointer(TNode<UintPtrT> backing_store,\n                                            TNode<Number> byte_offset);"
        },
        {
            "sha": "34993faf0109a4b0ebdad16dd8deddacc5d70350",
            "filename": "deps/v8/src/builtins/builtins-typed-array.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -2,11 +2,12 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n-#include \"src/builtins/builtins-utils.h\"\n+#include \"src/builtins/builtins-utils-inl.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/counters.h\"\n #include \"src/elements.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/js-array-buffer-inl.h\"\n \n namespace v8 {\n namespace internal {\n@@ -157,7 +158,7 @@ BUILTIN(TypedArrayPrototypeFill) {\n   DCHECK_LE(end, len);\n   DCHECK_LE(count, len);\n \n-  return ElementsAccessor::ForKind(kind)->Fill(isolate, array, obj_value,\n+  return ElementsAccessor::ForKind(kind)->Fill(array, obj_value,\n                                                static_cast<uint32_t>(start),\n                                                static_cast<uint32_t>(end));\n }\n@@ -256,7 +257,7 @@ BUILTIN(TypedArrayPrototypeLastIndexOf) {\n   Handle<Object> search_element = args.atOrUndefined(isolate, 1);\n   ElementsAccessor* elements = array->GetElementsAccessor();\n   Maybe<int64_t> result = elements->LastIndexOfValue(\n-      isolate, array, search_element, static_cast<uint32_t>(index));\n+      array, search_element, static_cast<uint32_t>(index));\n   MAYBE_RETURN(result, ReadOnlyRoots(isolate).exception());\n   return *isolate->factory()->NewNumberFromInt64(result.FromJust());\n }"
        },
        {
            "sha": "6696324dbd7233fdc537be0ae47401fcb5cd4d0c",
            "filename": "deps/v8/src/builtins/builtins-utils-inl.h",
            "status": "added",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -0,0 +1,35 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_BUILTINS_BUILTINS_UTILS_INL_H_\n+#define V8_BUILTINS_BUILTINS_UTILS_INL_H_\n+\n+#include \"src/builtins/builtins-utils.h\"\n+\n+#include \"src/arguments-inl.h\"\n+\n+namespace v8 {\n+namespace internal {\n+\n+Handle<Object> BuiltinArguments::atOrUndefined(Isolate* isolate, int index) {\n+  if (index >= length()) {\n+    return isolate->factory()->undefined_value();\n+  }\n+  return at<Object>(index);\n+}\n+\n+Handle<Object> BuiltinArguments::receiver() { return at<Object>(0); }\n+\n+Handle<JSFunction> BuiltinArguments::target() {\n+  return Arguments::at<JSFunction>(Arguments::length() - 1 - kTargetOffset);\n+}\n+\n+Handle<HeapObject> BuiltinArguments::new_target() {\n+  return Arguments::at<HeapObject>(Arguments::length() - 1 - kNewTargetOffset);\n+}\n+\n+}  // namespace internal\n+}  // namespace v8\n+\n+#endif  // V8_BUILTINS_BUILTINS_UTILS_INL_H_"
        },
        {
            "sha": "1ea20937029bfbc06535835b7d1100019582d3ad",
            "filename": "deps/v8/src/builtins/builtins-utils.h",
            "status": "modified",
            "additions": 12,
            "deletions": 24,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82",
            "patch": "@@ -34,30 +34,18 @@ class BuiltinArguments : public Arguments {\n     return Arguments::at<S>(index);\n   }\n \n-  Handle<Object> atOrUndefined(Isolate* isolate, int index) {\n-    if (index >= length()) {\n-      return isolate->factory()->undefined_value();\n-    }\n-    return at<Object>(index);\n-  }\n-\n-  Handle<Object> receiver() { return Arguments::at<Object>(0); }\n-\n-  static const int kNewTargetOffset = 0;\n-  static const int kTargetOffset = 1;\n-  static const int kArgcOffset = 2;\n-  static const int kPaddingOffset = 3;\n-\n-  static const int kNumExtraArgs = 4;\n-  static const int kNumExtraArgsWithReceiver = 5;\n-\n-  Handle<JSFunction> target() {\n-    return Arguments::at<JSFunction>(Arguments::length() - 1 - kTargetOffset);\n-  }\n-  Handle<HeapObject> new_target() {\n-    return Arguments::at<HeapObject>(Arguments::length() - 1 -\n-                                     kNewTargetOffset);\n-  }\n+  static constexpr int kNewTargetOffset = 0;\n+  static constexpr int kTargetOffset = 1;\n+  static constexpr int kArgcOffset = 2;\n+  static constexpr int kPaddingOffset = 3;\n+\n+  static constexpr int kNumExtraArgs = 4;\n+  static constexpr int kNumExtraArgsWithReceiver = 5;\n+\n+  inline Handle<Object> atOrUndefined(Isolate* isolate, int index);\n+  inline Handle<Object> receiver();\n+  inline Handle<JSFunction> target();\n+  inline Handle<HeapObject> new_target();\n \n   // Gets the total number of arguments including the receiver (but\n   // excluding extra arguments)."
        },
        {
            "sha": "facfaf93f814e11de2f47b24a4e68a5e86c19ee5",
            "filename": "deps/v8/src/builtins/builtins-wasm-gen.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-wasm-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-wasm-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-wasm-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b2c7433e8d6a10bae8642b7ad57609d96f82391a",
            "filename": "deps/v8/src/builtins/builtins.cc",
            "status": "modified",
            "additions": 65,
            "deletions": 22,
            "changes": 87,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "0bd3c317bfe5fd8641e6cedd09c9254a1948347a",
            "filename": "deps/v8/src/builtins/builtins.h",
            "status": "modified",
            "additions": 13,
            "deletions": 4,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "04c0655bf73d4b1a1c1a9ec9cd3a78eaf45c8418",
            "filename": "deps/v8/src/builtins/constants-table-builder.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "874c122995991f88c51849aca2a34b5c691fee88",
            "filename": "deps/v8/src/builtins/data-view.tq",
            "status": "modified",
            "additions": 120,
            "deletions": 84,
            "changes": 204,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fdata-view.tq",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fdata-view.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fdata-view.tq?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "3a155e26f9a2ac93ed40befa22dccbd0f1e3e4e4",
            "filename": "deps/v8/src/builtins/growable-fixed-array-gen.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgrowable-fixed-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgrowable-fixed-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgrowable-fixed-array-gen.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "4707667bbfdac8ed1508792b2cb45a8274ad9e32",
            "filename": "deps/v8/src/builtins/ia32/builtins-ia32.cc",
            "status": "modified",
            "additions": 34,
            "deletions": 16,
            "changes": 50,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "c653ce404d6bf3d52e41155e0be628e2bcb2cac3",
            "filename": "deps/v8/src/builtins/mips/OWNERS",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2FOWNERS?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "0c892c960f0fd3a5558036249109e630ff4b4973",
            "filename": "deps/v8/src/builtins/mips/builtins-mips.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "8bbcab4c2d0fd4786b50a17697908b7c0534f485",
            "filename": "deps/v8/src/builtins/mips64/OWNERS",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2FOWNERS?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "d59f7c0ce5c37d4dfc2eb5d476e2e9bd32ddbf91",
            "filename": "deps/v8/src/builtins/mips64/builtins-mips64.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "01a0e4e371f37d686ae74244fb442cd3eff0568b",
            "filename": "deps/v8/src/builtins/ppc/builtins-ppc.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b92011c38ba6a7be6c0777942d22bd9e9cc5a16e",
            "filename": "deps/v8/src/builtins/s390/builtins-s390.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "93a2b8b5f3f08cb2ce1f14f6d3225a5dfa3aa6d3",
            "filename": "deps/v8/src/builtins/setup-builtins-internal.cc",
            "status": "modified",
            "additions": 56,
            "deletions": 7,
            "changes": 63,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "7552b094e7da385850d4af234e7f5e9eacd4f0aa",
            "filename": "deps/v8/src/builtins/typed-array.tq",
            "status": "modified",
            "additions": 21,
            "deletions": 20,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "5c2094105c3c0cee73d436c1e99b2a4c0ec7bf2c",
            "filename": "deps/v8/src/builtins/x64/builtins-x64.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "cba6136a386f82485e7330a411986e87bdbe8141",
            "filename": "deps/v8/src/code-factory.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcode-factory.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcode-factory.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-factory.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "2527e89a25061e913d5b7a3d80134bb2d3bcf7d4",
            "filename": "deps/v8/src/code-stub-assembler.cc",
            "status": "modified",
            "additions": 651,
            "deletions": 360,
            "changes": 1011,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "51ed647412b97f42e09cb6bc717a05d0a4c14cb6",
            "filename": "deps/v8/src/code-stub-assembler.h",
            "status": "modified",
            "additions": 175,
            "deletions": 64,
            "changes": 239,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "6bbcefa781be147a754a523661825c01348f30f4",
            "filename": "deps/v8/src/compiler-dispatcher/compiler-dispatcher.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 18,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "58c109913560686fb386a285fee23b6d41efa5c6",
            "filename": "deps/v8/src/compiler.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 32,
            "changes": 50,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b3a5b739979d0075d52512f1349eed69836ff052",
            "filename": "deps/v8/src/compiler.h",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "0342a9c950c93ab6bb6f5e06730b1a7fc7462b5a",
            "filename": "deps/v8/src/compiler/access-builder.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "0b7d1a18a1195ca0a98fcfd7be6a2b75e34c5295",
            "filename": "deps/v8/src/compiler/access-info.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 12,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "e9890bbb7a80e8fe3fcf9fd33d7703771f6a135f",
            "filename": "deps/v8/src/compiler/access-info.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "8e1c1ab8f4fce3cadead00afdef5ebb4469dc9a7",
            "filename": "deps/v8/src/compiler/arm/code-generator-arm.cc",
            "status": "modified",
            "additions": 135,
            "deletions": 1,
            "changes": 136,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "ca8684a375fc109ad715d8b0c7c6e8305a2ca45a",
            "filename": "deps/v8/src/compiler/arm/instruction-codes-arm.h",
            "status": "modified",
            "additions": 289,
            "deletions": 258,
            "changes": 547,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-codes-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-codes-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-codes-arm.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "56ff02689ab2aef6b5ddbec581e4089ec6fd8714",
            "filename": "deps/v8/src/compiler/arm/instruction-scheduler-arm.cc",
            "status": "modified",
            "additions": 31,
            "deletions": 0,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-scheduler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-scheduler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-scheduler-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "277d9779c08e9e5b78543e17d6d206ddcd9e9a77",
            "filename": "deps/v8/src/compiler/arm/instruction-selector-arm.cc",
            "status": "modified",
            "additions": 230,
            "deletions": 4,
            "changes": 234,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "867c3687a104a0a27afa92f775dc65a9b2337056",
            "filename": "deps/v8/src/compiler/arm64/code-generator-arm64.cc",
            "status": "modified",
            "additions": 22,
            "deletions": 22,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "7b119c8fe72cb983ebcaaf633899daff6df2e082",
            "filename": "deps/v8/src/compiler/arm64/instruction-codes-arm64.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "d443bd7641c0689f5194f62367bfdc5cbba2c850",
            "filename": "deps/v8/src/compiler/arm64/instruction-scheduler-arm64.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b2e8b4b20538d0cdebb7a067fbdfa0d97af7bcb4",
            "filename": "deps/v8/src/compiler/arm64/instruction-selector-arm64.cc",
            "status": "modified",
            "additions": 95,
            "deletions": 40,
            "changes": 135,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "77f88502c342724238405e061a8681331b7d9fc5",
            "filename": "deps/v8/src/compiler/basic-block-instrumentor.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 13,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "bd8b551f4f3269e6787b896438e9b937952b38a1",
            "filename": "deps/v8/src/compiler/bytecode-graph-builder.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 8,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "57127142def497fd96fd660f78bea848bbdec44f",
            "filename": "deps/v8/src/compiler/bytecode-graph-builder.h",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "4f400846d425c7f26002e170b30e92d5238cceed",
            "filename": "deps/v8/src/compiler/code-assembler.cc",
            "status": "modified",
            "additions": 53,
            "deletions": 2,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "6b9089da6b193e83f14a6c000eeef4e19d913723",
            "filename": "deps/v8/src/compiler/code-assembler.h",
            "status": "modified",
            "additions": 21,
            "deletions": 13,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "83060f9e38df79f069261e08e77bfe9ae729ca02",
            "filename": "deps/v8/src/compiler/code-generator.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 13,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "5d4941f8258d6c15699b0e04f661cca319d6f3a6",
            "filename": "deps/v8/src/compiler/code-generator.h",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "16a9096079896b04e449429c0e18716f29ae5160",
            "filename": "deps/v8/src/compiler/common-operator-reducer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "f1b29eaf769ada301fbb778290659cd7773f8989",
            "filename": "deps/v8/src/compiler/common-operator-reducer.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "9bdaedea20a7c00bda8afb3eb4078a4ef93cca5b",
            "filename": "deps/v8/src/compiler/common-operator.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b67adbd7cae798cb42c6de127b1302e7575fbf73",
            "filename": "deps/v8/src/compiler/compilation-dependencies.cc",
            "status": "modified",
            "additions": 156,
            "deletions": 93,
            "changes": 249,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "5d4cd221df7632e15ed0fa717a8287930ac915ab",
            "filename": "deps/v8/src/compiler/compilation-dependencies.h",
            "status": "modified",
            "additions": 26,
            "deletions": 2,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "a447b2a07cdb3eb63182dd451c77cb089893bef7",
            "filename": "deps/v8/src/compiler/constant-folding-reducer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "3fbe5c4c2e647a0a7c00765fb0273300fa0dc185",
            "filename": "deps/v8/src/compiler/constant-folding-reducer.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "9b12c022c49e3bfbfa0c58b0ee95b4db4b410623",
            "filename": "deps/v8/src/compiler/effect-control-linearizer.cc",
            "status": "modified",
            "additions": 161,
            "deletions": 340,
            "changes": 501,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "aa174ed45e80e2987ab658a715962ce2dce90aa2",
            "filename": "deps/v8/src/compiler/effect-control-linearizer.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "1434a4b98a487766eeef55552c9e40e7d551a861",
            "filename": "deps/v8/src/compiler/escape-analysis-reducer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "496f322106f5ee20c6d44b3b26a23b7120caf671",
            "filename": "deps/v8/src/compiler/graph-assembler.cc",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "79eb4936088c03d51719386dec4a814294800d40",
            "filename": "deps/v8/src/compiler/graph-assembler.h",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "5573c346eeeaab7909c1eae164cd1fcd412036bd",
            "filename": "deps/v8/src/compiler/graph-visualizer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "9d54eaeb90980d6e5fbec1cd7b0b29ef0286ddc3",
            "filename": "deps/v8/src/compiler/ia32/code-generator-ia32.cc",
            "status": "modified",
            "additions": 183,
            "deletions": 25,
            "changes": 208,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "97f3763cf5ddbddf2200f12eeec5582e3ae1789e",
            "filename": "deps/v8/src/compiler/ia32/instruction-codes-ia32.h",
            "status": "modified",
            "additions": 371,
            "deletions": 340,
            "changes": 711,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "07d42bc6143887ed63ed085811264ea0ea87b617",
            "filename": "deps/v8/src/compiler/ia32/instruction-scheduler-ia32.cc",
            "status": "modified",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "ce2f14e97f67ebec81bccc3c9911ad093efb97fc",
            "filename": "deps/v8/src/compiler/ia32/instruction-selector-ia32.cc",
            "status": "modified",
            "additions": 299,
            "deletions": 85,
            "changes": 384,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "d15a633257dfffa107a8c721024e548a0fff2e9c",
            "filename": "deps/v8/src/compiler/instruction-selector.cc",
            "status": "modified",
            "additions": 108,
            "deletions": 6,
            "changes": 114,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "435b7185a6811853a7ec22fae1c81a8910a69266",
            "filename": "deps/v8/src/compiler/instruction-selector.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "1991e309d341ab0273c94473532969250e3ae5cf",
            "filename": "deps/v8/src/compiler/instruction.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "8066ce5dcaae05c8e190ea229fcef57d537fd9eb",
            "filename": "deps/v8/src/compiler/int64-lowering.cc",
            "status": "modified",
            "additions": 98,
            "deletions": 38,
            "changes": 136,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "ab403f904a8d9036ec73ae1233940ba370e1a22c",
            "filename": "deps/v8/src/compiler/int64-lowering.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "a06f4490a6745e9e83aa73e2448e2b0cbbca220c",
            "filename": "deps/v8/src/compiler/js-call-reducer.cc",
            "status": "modified",
            "additions": 392,
            "deletions": 297,
            "changes": 689,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "e04870ed2fdd93101a7d5bce17da412f942536f3",
            "filename": "deps/v8/src/compiler/js-call-reducer.h",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "ef2297c9d69be753969cb55115e785c3bfd5dccb",
            "filename": "deps/v8/src/compiler/js-context-specialization.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "7324c5aaf066ab41f94dc70f58b3dc595482037e",
            "filename": "deps/v8/src/compiler/js-context-specialization.h",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "6484e050617a7eb5446e52aa990b7a24da7ce643",
            "filename": "deps/v8/src/compiler/js-create-lowering.cc",
            "status": "modified",
            "additions": 127,
            "deletions": 160,
            "changes": 287,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "151be1b35cbf68f7014b607dab1aba0a89ae6741",
            "filename": "deps/v8/src/compiler/js-create-lowering.h",
            "status": "modified",
            "additions": 17,
            "deletions": 11,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "0903f181b9fdb8e00f4cbfedb86e7834d28cb8e9",
            "filename": "deps/v8/src/compiler/js-generic-lowering.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 3,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "949dca377d7812a728b46dce241711d70b04e0f1",
            "filename": "deps/v8/src/compiler/js-heap-broker.cc",
            "status": "modified",
            "additions": 880,
            "deletions": 530,
            "changes": 1410,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "7ea12ee733b148be80b2039f318dc6d4d9a82fdf",
            "filename": "deps/v8/src/compiler/js-heap-broker.h",
            "status": "modified",
            "additions": 160,
            "deletions": 90,
            "changes": 250,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "0bcc662771eed5d88485c0e161bf7de0999b49ca",
            "filename": "deps/v8/src/compiler/js-heap-copy-reducer.cc",
            "status": "added",
            "additions": 85,
            "deletions": 0,
            "changes": 85,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b94b930d78f66ed058cf4b0eb6b1163ce305ec01",
            "filename": "deps/v8/src/compiler/js-heap-copy-reducer.h",
            "status": "added",
            "additions": 38,
            "deletions": 0,
            "changes": 38,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "68919c9aec615e53e167b0d44968cd8de31d5f28",
            "filename": "deps/v8/src/compiler/js-inlining-heuristic.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "194e876849b09d89d65e7186fa69cd792b1e6ce1",
            "filename": "deps/v8/src/compiler/js-intrinsic-lowering.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 77,
            "changes": 78,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "e0a55d7b0673b4f61d17f8cbafcfc407d3cc47f6",
            "filename": "deps/v8/src/compiler/js-intrinsic-lowering.h",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "e35a860be0f59e59da3f7975b7c347c5187e9ec7",
            "filename": "deps/v8/src/compiler/js-native-context-specialization.cc",
            "status": "modified",
            "additions": 51,
            "deletions": 29,
            "changes": 80,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "413e3c191f7f320ce01a96b04440c22d73c4a41b",
            "filename": "deps/v8/src/compiler/js-native-context-specialization.h",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "57f9950d55faab524e7d6d16846076e771ea4dba",
            "filename": "deps/v8/src/compiler/js-operator.cc",
            "status": "modified",
            "additions": 41,
            "deletions": 5,
            "changes": 46,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b10d89cdb9099fd56fbda078e4b7cca47255c98c",
            "filename": "deps/v8/src/compiler/js-operator.h",
            "status": "modified",
            "additions": 30,
            "deletions": 5,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "56b1f224c7d2336ee9615b15b74e01ac89ce8f7d",
            "filename": "deps/v8/src/compiler/js-typed-lowering.cc",
            "status": "modified",
            "additions": 52,
            "deletions": 8,
            "changes": 60,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "c3bef9aeed8bdb4763598a7f9babcd1e7f25836e",
            "filename": "deps/v8/src/compiler/js-typed-lowering.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "99c52b1ade657e91d9b01ff35bad20268f13aa8a",
            "filename": "deps/v8/src/compiler/linkage.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "6d6cfafdbf29589c0aa93e84ce99245274d788d6",
            "filename": "deps/v8/src/compiler/load-elimination.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 30,
            "changes": 63,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "2ce5a04397702e45c8319b014eaffec4aef92a2f",
            "filename": "deps/v8/src/compiler/load-elimination.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "5a0fc9dbfbe01eab6135443b4c4af6824992583a",
            "filename": "deps/v8/src/compiler/loop-variable-optimizer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "f3a5fb9023b714c729612d6c711a62faa5fdc819",
            "filename": "deps/v8/src/compiler/machine-graph-verifier.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b81ad03d838b0768a9b0d4a42d405d1577563a6e",
            "filename": "deps/v8/src/compiler/machine-graph.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "83d27e03b966a5cac52eb800b78c4c3f80ea9486",
            "filename": "deps/v8/src/compiler/machine-graph.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "241651254b16ca9117fece5f6835f376c12208c3",
            "filename": "deps/v8/src/compiler/machine-operator.cc",
            "status": "modified",
            "additions": 285,
            "deletions": 92,
            "changes": 377,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "261891dcdcc1d878a3b1ff35c20b041cc73d1319",
            "filename": "deps/v8/src/compiler/machine-operator.h",
            "status": "modified",
            "additions": 50,
            "deletions": 20,
            "changes": 70,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "3ba3dcc6b876ea11bff4e3320636b573844bcc09",
            "filename": "deps/v8/src/compiler/memory-optimizer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "8bbcab4c2d0fd4786b50a17697908b7c0534f485",
            "filename": "deps/v8/src/compiler/mips/OWNERS",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2FOWNERS?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "66f38dc28366507b09367d50336424927e8dbbad",
            "filename": "deps/v8/src/compiler/mips/instruction-selector-mips.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 9,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "8bbcab4c2d0fd4786b50a17697908b7c0534f485",
            "filename": "deps/v8/src/compiler/mips64/OWNERS",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2FOWNERS?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "9f9aebc145905e6993f5594f39cfe18ed0999cde",
            "filename": "deps/v8/src/compiler/mips64/instruction-selector-mips64.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 12,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "cbefb0ac3568d4c87b6bcbcc43d5bd979abec6eb",
            "filename": "deps/v8/src/compiler/node-matchers.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-matchers.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-matchers.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-matchers.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "22cdd0b091209f12aa891d00a908a559c599d275",
            "filename": "deps/v8/src/compiler/node-properties.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "d6ea247fbc456682abeb75c04b5d53965efc7cb9",
            "filename": "deps/v8/src/compiler/opcodes.h",
            "status": "modified",
            "additions": 121,
            "deletions": 100,
            "changes": 221,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "67a7b138a548070bdf7b894fd8711c31efc95e6e",
            "filename": "deps/v8/src/compiler/operation-typer.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 3,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "fb5997485c2c5a77aebe3ed387a32b4ee1f32fe3",
            "filename": "deps/v8/src/compiler/operation-typer.h",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "a5d16053d2378a68927c261cc8a60ef876e492d9",
            "filename": "deps/v8/src/compiler/operator-properties.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "5717c70348e407a9cb093af0291e531ac1c42c13",
            "filename": "deps/v8/src/compiler/pipeline.cc",
            "status": "modified",
            "additions": 57,
            "deletions": 23,
            "changes": 80,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "5e4ae8671b111d8078c9ad0826c9b549fc0343a1",
            "filename": "deps/v8/src/compiler/pipeline.h",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "45cd95a9e00fa744c2825e0b31a8880de09522be",
            "filename": "deps/v8/src/compiler/ppc/code-generator-ppc.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 7,
            "changes": 40,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "3f3270028cbe175b1b4e5caf62eeaee63b6a79c6",
            "filename": "deps/v8/src/compiler/ppc/instruction-codes-ppc.h",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-codes-ppc.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-codes-ppc.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-codes-ppc.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "51c92e8e84cc6d5a2b09a3288882e33c9fc4e6aa",
            "filename": "deps/v8/src/compiler/ppc/instruction-scheduler-ppc.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-scheduler-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-scheduler-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-scheduler-ppc.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "6cb98c4f958b704603478e2b72e9acdcb6d82444",
            "filename": "deps/v8/src/compiler/ppc/instruction-selector-ppc.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 5,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "42b28cfa76a9d62f2e1a2f0a0433fdcf0d879bac",
            "filename": "deps/v8/src/compiler/property-access-builder.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "6a073be65d7dae07d4d14d2a831ca0e6e7475620",
            "filename": "deps/v8/src/compiler/property-access-builder.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "304d0e4ff1e5e1b69604b4b14ab6b8cb470beb96",
            "filename": "deps/v8/src/compiler/raw-machine-assembler.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "ab9bd16e81723d706214e3bbd1eabab69738c199",
            "filename": "deps/v8/src/compiler/s390/code-generator-s390.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "81745517771bd72060ee928b21549388bd5b5d6d",
            "filename": "deps/v8/src/compiler/s390/instruction-selector-s390.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 11,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "882e3b9d6e9325db5fa104f6f3e674571d1d782e",
            "filename": "deps/v8/src/compiler/simd-scalar-lowering.cc",
            "status": "modified",
            "additions": 65,
            "deletions": 31,
            "changes": 96,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "01ea195bdc8bf7d8a9287f34c2c6e9d503b37399",
            "filename": "deps/v8/src/compiler/simd-scalar-lowering.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "2d82fc99bc4db3d1c8fedce44c9261e53b725807",
            "filename": "deps/v8/src/compiler/simplified-lowering.cc",
            "status": "modified",
            "additions": 52,
            "deletions": 14,
            "changes": 66,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "7b21b07813f10e66f7000cff40d3d64e4f512607",
            "filename": "deps/v8/src/compiler/simplified-lowering.h",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "ce7d18f34a785388d58d63f290c818858b7a79d8",
            "filename": "deps/v8/src/compiler/simplified-operator-reducer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator-reducer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "93104e31b0a55fafe7408935124ddc0fface510b",
            "filename": "deps/v8/src/compiler/simplified-operator-reducer.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator-reducer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "0c331bce5e0a1d32718332f30de91bd270fc88b8",
            "filename": "deps/v8/src/compiler/simplified-operator.cc",
            "status": "modified",
            "additions": 41,
            "deletions": 12,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "df44e899cd587805f37981e0611f4c62488f4507",
            "filename": "deps/v8/src/compiler/simplified-operator.h",
            "status": "modified",
            "additions": 27,
            "deletions": 3,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "01afdcb91157197ad02846bf0c4da285df8d1087",
            "filename": "deps/v8/src/compiler/type-narrowing-reducer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "62237ccce342f1b6cc94abbb811df26d17524730",
            "filename": "deps/v8/src/compiler/type-narrowing-reducer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-narrowing-reducer.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b77fc9785942f656e68130732be97b170527221e",
            "filename": "deps/v8/src/compiler/typed-optimization.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "baee65dd4e472d9b9e0355093900a70340743edc",
            "filename": "deps/v8/src/compiler/typed-optimization.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "7627d27b08dbcc86d7bfba66fce84de013ea039f",
            "filename": "deps/v8/src/compiler/typer.cc",
            "status": "modified",
            "additions": 168,
            "deletions": 155,
            "changes": 323,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "741ca481c284a5428147665bf3cbe103b8f73764",
            "filename": "deps/v8/src/compiler/typer.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "968d788fcc8a95b8bd4b65f54ac2eff53f2ceec7",
            "filename": "deps/v8/src/compiler/types.cc",
            "status": "modified",
            "additions": 21,
            "deletions": 17,
            "changes": 38,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "d27f6e3e7535136d6704d66b2619bb67e369a355",
            "filename": "deps/v8/src/compiler/types.h",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "55eaf07711424242d44932cf8b6e399d23646667",
            "filename": "deps/v8/src/compiler/verifier.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "f544c2eb10d75e24ca1842a75d15de7f88804560",
            "filename": "deps/v8/src/compiler/wasm-compiler.cc",
            "status": "modified",
            "additions": 395,
            "deletions": 435,
            "changes": 830,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "775c81724231f18575248c8b3f1bcd192cb7c3c0",
            "filename": "deps/v8/src/compiler/wasm-compiler.h",
            "status": "modified",
            "additions": 22,
            "deletions": 37,
            "changes": 59,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "2ccb56907d0d4e2492ae7d0c9be37950f5e7ed58",
            "filename": "deps/v8/src/compiler/x64/code-generator-x64.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "6a9e313f4e8d8711735da9cda3b78964c3843af9",
            "filename": "deps/v8/src/compiler/x64/instruction-codes-x64.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-codes-x64.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-codes-x64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-codes-x64.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b1f380badf3ac91f7907ec63682ce9d799dc9fae",
            "filename": "deps/v8/src/compiler/x64/instruction-scheduler-x64.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-scheduler-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-scheduler-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-scheduler-x64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "b5d7fa6d5524033ca63ad6f5ff02b2a5b3850273",
            "filename": "deps/v8/src/compiler/x64/instruction-selector-x64.cc",
            "status": "modified",
            "additions": 40,
            "deletions": 52,
            "changes": 92,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "3470ff99d7845f26d42ee534a9922468be8313a7",
            "filename": "deps/v8/src/contexts-inl.h",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcontexts-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcontexts-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcontexts-inl.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "21171792196e2af9833df3ec136e755228a55f6b",
            "filename": "deps/v8/src/contexts.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcontexts.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcontexts.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcontexts.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "709ae6164af6f1dfdc08e078147dbe2399fcc159",
            "filename": "deps/v8/src/contexts.h",
            "status": "modified",
            "additions": 71,
            "deletions": 55,
            "changes": 126,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcontexts.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcontexts.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcontexts.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "fed7edb44a5878694af81aba38d3c8804dda860a",
            "filename": "deps/v8/src/counters.h",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcounters.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fcounters.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcounters.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "a1fc3b5782d1569c0138d029f841172725293e60",
            "filename": "deps/v8/src/d8-posix.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fd8-posix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fd8-posix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8-posix.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "349021d38c6128e2efec7b464c5f6cfba4b392b6",
            "filename": "deps/v8/src/d8.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 37,
            "changes": 70,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fd8.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fd8.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "2d60cb8327c5980b702e05f8bdf911de321260c6",
            "filename": "deps/v8/src/d8.h",
            "status": "modified",
            "additions": 37,
            "deletions": 25,
            "changes": 62,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fd8.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fd8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "906a5ce64186024a07fd71b98141230baba5e5fa",
            "filename": "deps/v8/src/debug/arm/OWNERS",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/13245dc50da4cb7443c39ef6c68d419d5e6336d4/deps%2Fv8%2Fsrc%2Fdebug%2Farm%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/13245dc50da4cb7443c39ef6c68d419d5e6336d4/deps%2Fv8%2Fsrc%2Fdebug%2Farm%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Farm%2FOWNERS?ref=13245dc50da4cb7443c39ef6c68d419d5e6336d4"
        },
        {
            "sha": "906a5ce64186024a07fd71b98141230baba5e5fa",
            "filename": "deps/v8/src/debug/arm64/OWNERS",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/13245dc50da4cb7443c39ef6c68d419d5e6336d4/deps%2Fv8%2Fsrc%2Fdebug%2Farm64%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/13245dc50da4cb7443c39ef6c68d419d5e6336d4/deps%2Fv8%2Fsrc%2Fdebug%2Farm64%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Farm64%2FOWNERS?ref=13245dc50da4cb7443c39ef6c68d419d5e6336d4"
        },
        {
            "sha": "a71c9e572b4ed89d33526c1101220f6d80d3d180",
            "filename": "deps/v8/src/debug/debug-coverage.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-coverage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-coverage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-coverage.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "5466ca050b3efbafde1e7b80a9b7845d3cccd7b8",
            "filename": "deps/v8/src/debug/debug-evaluate.cc",
            "status": "modified",
            "additions": 111,
            "deletions": 106,
            "changes": 217,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "e71c1c07b3c7156b49784ddc9a49736c3c67bf4d",
            "filename": "deps/v8/src/debug/debug-scope-iterator.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scope-iterator.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "01cd017eb220ac808c552bd8dc57e81b400530e2",
            "filename": "deps/v8/src/debug/debug-scopes.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-scopes.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "14d2850b69cfdd56c24345a7124cb5d373415f89",
            "filename": "deps/v8/src/debug/debug-stack-trace-iterator.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-stack-trace-iterator.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "a7114b14347c6b3c181107171d7ce4a352b8d725",
            "filename": "deps/v8/src/debug/debug.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 20,
            "changes": 38,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.cc?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        },
        {
            "sha": "a6ad7bd4daac0471eda34e63c54c19a0c42e504b",
            "filename": "deps/v8/src/debug/debug.h",
            "status": "modified",
            "additions": 5,
            "deletions": 23,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.h",
            "raw_url": "https://github.com/nodejs/node/raw/0e7ddbd3d7e9439c67573b854c49cf82c398ae82/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug.h?ref=0e7ddbd3d7e9439c67573b854c49cf82c398ae82"
        }
    ],
    "stats": {
        "total": 125393,
        "additions": 52278,
        "deletions": 73115
    }
}