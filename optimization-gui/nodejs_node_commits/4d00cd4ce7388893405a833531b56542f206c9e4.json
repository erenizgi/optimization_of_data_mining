{
    "author": "jasnell",
    "message": "tls: move convertNPNProtocols to End-of-Life\n\nThis was deprecated in 10.0.0 because NPN support was removed.\nIt does not make sense to keep this around longer than 10.x\n\nPR-URL: https://github.com/nodejs/node/pull/20736\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Yuta Hiroto <hello@hiroppy.me>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Tobias Nießen <tniessen@tnie.de>\nReviewed-By: Michaël Zasso <targos@protonmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>",
    "sha": "4d00cd4ce7388893405a833531b56542f206c9e4",
    "files": [
        {
            "sha": "0ba6c6dd0873b52a2e5d976bf0a9f554fc786191",
            "filename": "benchmark/tls/convertprotocols.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/4d00cd4ce7388893405a833531b56542f206c9e4/benchmark%2Ftls%2Fconvertprotocols.js",
            "raw_url": "https://github.com/nodejs/node/raw/4d00cd4ce7388893405a833531b56542f206c9e4/benchmark%2Ftls%2Fconvertprotocols.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Ftls%2Fconvertprotocols.js?ref=4d00cd4ce7388893405a833531b56542f206c9e4",
            "patch": "@@ -12,11 +12,11 @@ function main({ n }) {\n   var m = {};\n   // First call dominates results\n   if (n > 1) {\n-    tls.convertNPNProtocols(input, m);\n+    tls.convertALPNProtocols(input, m);\n     m = {};\n   }\n   bench.start();\n   for (var i = 0; i < n; i++)\n-    tls.convertNPNProtocols(input, m);\n+    tls.convertALPNProtocols(input, m);\n   bench.end(n);\n }"
        },
        {
            "sha": "4b922045556695f7c1aab4cf6bd60fac6783fc2e",
            "filename": "doc/api/deprecations.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/4d00cd4ce7388893405a833531b56542f206c9e4/doc%2Fapi%2Fdeprecations.md",
            "raw_url": "https://github.com/nodejs/node/raw/4d00cd4ce7388893405a833531b56542f206c9e4/doc%2Fapi%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fdeprecations.md?ref=4d00cd4ce7388893405a833531b56542f206c9e4",
            "patch": "@@ -977,7 +977,7 @@ objects respectively.\n <a id=\"DEP0107\"></a>\n ### DEP0107: tls.convertNPNProtocols()\n \n-Type: Runtime\n+Type: End-of-Life\n \n This was an undocumented helper function not intended for use outside Node.js\n core and obsoleted by the removal of NPN (Next Protocol Negotiation) support."
        },
        {
            "sha": "dc8a6a29c71b76c20fe8ecb18537440262afb71f",
            "filename": "lib/tls.js",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/4d00cd4ce7388893405a833531b56542f206c9e4/lib%2Ftls.js",
            "raw_url": "https://github.com/nodejs/node/raw/4d00cd4ce7388893405a833531b56542f206c9e4/lib%2Ftls.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ftls.js?ref=4d00cd4ce7388893405a833531b56542f206c9e4",
            "patch": "@@ -76,16 +76,6 @@ function convertProtocols(protocols) {\n   return buff;\n }\n \n-exports.convertNPNProtocols = internalUtil.deprecate(function(protocols, out) {\n-  // If protocols is Array - translate it into buffer\n-  if (Array.isArray(protocols)) {\n-    out.NPNProtocols = convertProtocols(protocols);\n-  } else if (isUint8Array(protocols)) {\n-    // Copy new buffer not to be modified by user.\n-    out.NPNProtocols = Buffer.from(protocols);\n-  }\n-}, 'tls.convertNPNProtocols() is deprecated.', 'DEP0107');\n-\n exports.convertALPNProtocols = function(protocols, out) {\n   // If protocols is Array - translate it into buffer\n   if (Array.isArray(protocols)) {"
        },
        {
            "sha": "f2cf82b859dd0af62f33b199e1a4e5bf69604ef8",
            "filename": "test/parallel/test-tls-basic-validations.js",
            "status": "modified",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/4d00cd4ce7388893405a833531b56542f206c9e4/test%2Fparallel%2Ftest-tls-basic-validations.js",
            "raw_url": "https://github.com/nodejs/node/raw/4d00cd4ce7388893405a833531b56542f206c9e4/test%2Fparallel%2Ftest-tls-basic-validations.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-basic-validations.js?ref=4d00cd4ce7388893405a833531b56542f206c9e4",
            "patch": "@@ -93,25 +93,9 @@ common.expectsError(\n   assert(out.ALPNProtocols.equals(Buffer.from('efgh')));\n }\n \n-{\n-  const buffer = Buffer.from('abcd');\n-  const out = {};\n-  tls.convertNPNProtocols(buffer, out);\n-  out.NPNProtocols.write('efgh');\n-  assert(buffer.equals(Buffer.from('abcd')));\n-  assert(out.NPNProtocols.equals(Buffer.from('efgh')));\n-}\n-\n {\n   const buffer = new Uint8Array(Buffer.from('abcd'));\n   const out = {};\n   tls.convertALPNProtocols(buffer, out);\n   assert(out.ALPNProtocols.equals(Buffer.from('abcd')));\n }\n-\n-{\n-  const buffer = new Uint8Array(Buffer.from('abcd'));\n-  const out = {};\n-  tls.convertNPNProtocols(buffer, out);\n-  assert(out.NPNProtocols.equals(Buffer.from('abcd')));\n-}"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 3,
        "deletions": 29
    }
}