{
    "author": "BridgeAR",
    "message": "assert: remove `errorDiff` property\n\nThe property is not necessary as it is possible to check for the\noperator instead.\n\nPR-URL: https://github.com/nodejs/node/pull/19467\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "2b0825e77feb262cf862982cabf7a67bf58f4d5b",
    "files": [
        {
            "sha": "2164c22958df6db422af4775d735429ef5690295",
            "filename": "lib/assert.js",
            "status": "modified",
            "additions": 5,
            "deletions": 13,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/2b0825e77feb262cf862982cabf7a67bf58f4d5b/lib%2Fassert.js",
            "raw_url": "https://github.com/nodejs/node/raw/2b0825e77feb262cf862982cabf7a67bf58f4d5b/lib%2Fassert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fassert.js?ref=2b0825e77feb262cf862982cabf7a67bf58f4d5b",
            "patch": "@@ -54,9 +54,6 @@ const meta = [\n \n const escapeFn = (str) => meta[str.charCodeAt(0)];\n \n-const ERR_DIFF_NOT_EQUAL = 1;\n-const ERR_DIFF_EQUAL = 2;\n-\n let warned = false;\n \n // The assert module provides functions that throw\n@@ -321,8 +318,7 @@ assert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n       expected,\n       message,\n       operator: 'deepStrictEqual',\n-      stackStartFn: deepStrictEqual,\n-      errorDiff: ERR_DIFF_EQUAL\n+      stackStartFn: deepStrictEqual\n     });\n   }\n };\n@@ -335,8 +331,7 @@ function notDeepStrictEqual(actual, expected, message) {\n       expected,\n       message,\n       operator: 'notDeepStrictEqual',\n-      stackStartFn: notDeepStrictEqual,\n-      errorDiff: ERR_DIFF_NOT_EQUAL\n+      stackStartFn: notDeepStrictEqual\n     });\n   }\n }\n@@ -348,8 +343,7 @@ assert.strictEqual = function strictEqual(actual, expected, message) {\n       expected,\n       message,\n       operator: 'strictEqual',\n-      stackStartFn: strictEqual,\n-      errorDiff: ERR_DIFF_EQUAL\n+      stackStartFn: strictEqual\n     });\n   }\n };\n@@ -361,8 +355,7 @@ assert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n       expected,\n       message,\n       operator: 'notStrictEqual',\n-      stackStartFn: notStrictEqual,\n-      errorDiff: ERR_DIFF_NOT_EQUAL\n+      stackStartFn: notStrictEqual\n     });\n   }\n };\n@@ -389,8 +382,7 @@ function compareExceptionKey(actual, expected, key, message, keys) {\n         actual: a,\n         expected: b,\n         operator: 'deepStrictEqual',\n-        stackStartFn: assert.throws,\n-        errorDiff: ERR_DIFF_EQUAL\n+        stackStartFn: assert.throws\n       });\n       Error.stackTraceLimit = tmpLimit;\n       message = err.message;"
        },
        {
            "sha": "eff720f090587408c85ceff533fdc641d6ae6445",
            "filename": "lib/internal/errors.js",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/2b0825e77feb262cf862982cabf7a67bf58f4d5b/lib%2Finternal%2Ferrors.js",
            "raw_url": "https://github.com/nodejs/node/raw/2b0825e77feb262cf862982cabf7a67bf58f4d5b/lib%2Finternal%2Ferrors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ferrors.js?ref=2b0825e77feb262cf862982cabf7a67bf58f4d5b",
            "patch": "@@ -395,8 +395,7 @@ class AssertionError extends Error {\n       expected,\n       message,\n       operator,\n-      stackStartFn,\n-      errorDiff = 0\n+      stackStartFn\n     } = options;\n \n     if (message != null) {\n@@ -427,15 +426,10 @@ class AssertionError extends Error {\n         expected = copyError(expected);\n       }\n \n-      if (errorDiff === 0) {\n-        let res = util.inspect(actual);\n-        let other = util.inspect(expected);\n-        if (res.length > 128)\n-          res = `${res.slice(0, 125)}...`;\n-        if (other.length > 128)\n-          other = `${other.slice(0, 125)}...`;\n-        super(`${res} ${operator} ${other}`);\n-      } else if (errorDiff === 1) {\n+      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n+        super(createErrDiff(actual, expected, operator));\n+      } else if (operator === 'notDeepStrictEqual' ||\n+        operator === 'notStrictEqual') {\n         // In case the objects are equal but the operator requires unequal, show\n         // the first object and say A equals B\n         const res = inspectValue(actual);\n@@ -457,7 +451,13 @@ class AssertionError extends Error {\n           super(`${base}\\n\\n  ${res.join('\\n  ')}\\n`);\n         }\n       } else {\n-        super(createErrDiff(actual, expected, operator));\n+        let res = util.inspect(actual);\n+        let other = util.inspect(expected);\n+        if (res.length > 128)\n+          res = `${res.slice(0, 125)}...`;\n+        if (other.length > 128)\n+          other = `${other.slice(0, 125)}...`;\n+        super(`${res} ${operator} ${other}`);\n       }\n     }\n "
        }
    ],
    "stats": {
        "total": 42,
        "additions": 17,
        "deletions": 25
    }
}