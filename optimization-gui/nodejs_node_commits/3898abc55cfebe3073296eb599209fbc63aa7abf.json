{
    "author": "kakts",
    "message": "test: add test for dns.promises.resolve .\n\nPR-URL: https://github.com/nodejs/node/pull/21691\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "3898abc55cfebe3073296eb599209fbc63aa7abf",
    "files": [
        {
            "sha": "fcaa8977a5ba1856c952754f9df3e874a2f15946",
            "filename": "test/parallel/test-dns-promises-resolve.js",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/3898abc55cfebe3073296eb599209fbc63aa7abf/test%2Fparallel%2Ftest-dns-promises-resolve.js",
            "raw_url": "https://github.com/nodejs/node/raw/3898abc55cfebe3073296eb599209fbc63aa7abf/test%2Fparallel%2Ftest-dns-promises-resolve.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-dns-promises-resolve.js?ref=3898abc55cfebe3073296eb599209fbc63aa7abf",
            "patch": "@@ -0,0 +1,44 @@\n+'use strict';\n+const common = require('../common');\n+const assert = require('assert');\n+\n+const dnsPromises = require('dns').promises;\n+\n+common.crashOnUnhandledRejection();\n+\n+// Error when rrtype is invalid.\n+{\n+  const rrtype = 'DUMMY';\n+  common.expectsError(\n+    () => dnsPromises.resolve('example.org', rrtype),\n+    {\n+      code: 'ERR_INVALID_OPT_VALUE',\n+      type: TypeError,\n+      message: `The value \"${rrtype}\" is invalid for option \"rrtype\"`\n+    }\n+  );\n+}\n+\n+// Error when rrtype is a number.\n+{\n+  const rrtype = 0;\n+  common.expectsError(\n+    () => dnsPromises.resolve('example.org', rrtype),\n+    {\n+      code: 'ERR_INVALID_ARG_TYPE',\n+      type: TypeError,\n+      message: 'The \"rrtype\" argument must be of type string. ' +\n+               `Received type ${typeof rrtype}`\n+    }\n+  );\n+}\n+\n+// rrtype is undefined, it's same as resolve4\n+{\n+  (async function() {\n+    const rrtype = undefined;\n+    const result = await dnsPromises.resolve('example.org', rrtype);\n+    assert.ok(result !== undefined);\n+    assert.ok(result.length > 0);\n+  })();\n+}"
        }
    ],
    "stats": {
        "total": 44,
        "additions": 44,
        "deletions": 0
    }
}