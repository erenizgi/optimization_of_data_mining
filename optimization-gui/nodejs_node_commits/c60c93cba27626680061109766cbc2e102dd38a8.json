{
    "author": "chrismilleruk",
    "message": "doc, http2: add sections for server.close()\n\nClarify current behavior of http2server.close() and\nhttp2secureServer.close() w.r.t. perceived differences\nwhen compared with httpServer.close().\n\nFixes: https://github.com/nodejs/node/issues/19711\n\nPR-URL: https://github.com/nodejs/node/pull/19802\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>",
    "sha": "c60c93cba27626680061109766cbc2e102dd38a8",
    "files": [
        {
            "sha": "6eea4d8f0b98c615109379950c8dc0eb921b1145",
            "filename": "doc/api/http2.md",
            "status": "modified",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/c60c93cba27626680061109766cbc2e102dd38a8/doc%2Fapi%2Fhttp2.md",
            "raw_url": "https://github.com/nodejs/node/raw/c60c93cba27626680061109766cbc2e102dd38a8/doc%2Fapi%2Fhttp2.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fhttp2.md?ref=c60c93cba27626680061109766cbc2e102dd38a8",
            "patch": "@@ -1538,6 +1538,18 @@ added: v8.4.0\n The `'timeout'` event is emitted when there is no activity on the Server for\n a given number of milliseconds set using `http2server.setTimeout()`.\n \n+#### server.close([callback])\n+<!-- YAML\n+added: v8.4.0\n+-->\n+- `callback` {Function}\n+\n+Stops the server from accepting new connections.  See [`net.Server.close()`][].\n+\n+Note that this is not analogous to restricting new requests since HTTP/2\n+connections are persistent. To achieve a similar graceful shutdown behavior,\n+consider also using [`http2session.close()`] on active sessions.\n+\n ### Class: Http2SecureServer\n <!-- YAML\n added: v8.4.0\n@@ -1645,6 +1657,18 @@ negotiate an allowed protocol (i.e. HTTP/2 or HTTP/1.1). The event handler\n receives the socket for handling. If no listener is registered for this event,\n the connection is terminated. See the [Compatibility API][].\n \n+#### server.close([callback])\n+<!-- YAML\n+added: v8.4.0\n+-->\n+- `callback` {Function}\n+\n+Stops the server from accepting new connections.  See [`tls.Server.close()`][].\n+\n+Note that this is not analogous to restricting new requests since HTTP/2\n+connections are persistent. To achieve a similar graceful shutdown behavior,\n+consider also using [`http2session.close()`] on active sessions.\n+\n ### http2.createServer(options[, onRequestHandler])\n <!-- YAML\n added: v8.4.0\n@@ -3121,7 +3145,9 @@ following additional properties:\n [`http2.createSecureServer()`]: #http2_http2_createsecureserver_options_onrequesthandler\n [`http2.Server`]: #http2_class_http2server\n [`http2.createServer()`]: #http2_http2_createserver_options_onrequesthandler\n+[`http2session.close()`]: #http2_http2session_close_callback\n [`http2stream.pushStream()`]: #http2_http2stream_pushstream_headers_options_callback\n+[`net.Server.close()`]: net.html#net_server_close_callback\n [`net.Socket`]: net.html#net_class_net_socket\n [`net.Socket.prototype.ref`]: net.html#net_socket_ref\n [`net.Socket.prototype.unref`]: net.html#net_socket_unref\n@@ -3134,6 +3160,7 @@ following additional properties:\n [`response.write(data, encoding)`]: http.html#http_response_write_chunk_encoding_callback\n [`response.writeContinue()`]: #http2_response_writecontinue\n [`response.writeHead()`]: #http2_response_writehead_statuscode_statusmessage_headers\n+[`tls.Server.close()`]: tls.html#tls_server_close_callback\n [`tls.TLSSocket`]: tls.html#tls_class_tls_tlssocket\n [`tls.connect()`]: tls.html#tls_tls_connect_options_callback\n [`tls.createServer()`]: tls.html#tls_tls_createserver_options_secureconnectionlistener"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 27,
        "deletions": 0
    }
}