{
    "author": "unknown",
    "message": "n-api: remove idle_running from TsFn\n\nThe idle_running member variable in TsFn is always false and can\ntherefore be removed.\n\nPR-URL: https://github.com/nodejs/node/pull/22520\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Gabriel Schulhof <gabriel.schulhof@intel.com>\nReviewed-By: Gus Caplan <me@gus.host>",
    "sha": "5081d9663f1ce50d733762b64278d99baa810c04",
    "files": [
        {
            "sha": "7b6e43d0ce2e8be4046c6999410b25b8b3d9b890",
            "filename": "src/node_api.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 12,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/5081d9663f1ce50d733762b64278d99baa810c04/src%2Fnode_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/5081d9663f1ce50d733762b64278d99baa810c04/src%2Fnode_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_api.cc?ref=5081d9663f1ce50d733762b64278d99baa810c04",
            "patch": "@@ -3717,7 +3717,6 @@ class TsFn: public node::AsyncResource {\n       env(env_),\n       finalize_data(finalize_data_),\n       finalize_cb(finalize_cb_),\n-      idle_running(false),\n       call_js_cb(call_js_cb_ == nullptr ? CallJs : call_js_cb_),\n       handles_closing(false) {\n     ref.Reset(env->isolate, func);\n@@ -3879,8 +3878,6 @@ class TsFn: public node::AsyncResource {\n           } else {\n             if (uv_idle_stop(&idle) != 0) {\n               idle_stop_failed = true;\n-            } else {\n-              idle_running = false;\n             }\n           }\n         }\n@@ -3913,14 +3910,12 @@ class TsFn: public node::AsyncResource {\n   }\n \n   void MaybeStartIdle() {\n-    if (!idle_running) {\n-      if (uv_idle_start(&idle, IdleCb) != 0) {\n-        v8::HandleScope scope(env->isolate);\n-        CallbackScope cb_scope(this);\n-        CHECK(napi_throw_error(env,\n-                               \"ERR_NAPI_TSFN_START_IDLE_LOOP\",\n-                               \"Failed to start the idle loop\") == napi_ok);\n-      }\n+    if (uv_idle_start(&idle, IdleCb) != 0) {\n+      v8::HandleScope scope(env->isolate);\n+      CallbackScope cb_scope(this);\n+      CHECK(napi_throw_error(env,\n+                             \"ERR_NAPI_TSFN_START_IDLE_LOOP\",\n+                             \"Failed to start the idle loop\") == napi_ok);\n     }\n   }\n \n@@ -4023,7 +4018,6 @@ class TsFn: public node::AsyncResource {\n   napi_env env;\n   void* finalize_data;\n   napi_finalize finalize_cb;\n-  bool idle_running;\n   napi_threadsafe_function_call_js call_js_cb;\n   bool handles_closing;\n };"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 6,
        "deletions": 12
    }
}