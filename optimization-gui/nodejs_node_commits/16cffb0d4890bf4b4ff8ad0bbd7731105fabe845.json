{
    "author": "ryzokuken",
    "message": "gyp: muffle xcodebuild warnings\n\nMuffle xcodebuild warnings by introducing an alternative quieter\nalternative to GetStdout, called GetStdoutQuiet, and call it selectively\nin particularly noisy xcodebuild commands.\n\nCo-authored-by: Gibson Fahnestock <gibfahn@gmail.com>\n\nPR-URL: https://github.com/nodejs/node/pull/21999\nOriginal-PR-URL: https://github.com/nodejs/node-gyp/pull/1370\nReviewed-By: Gibson Fahnestock <gibfahn@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "16cffb0d4890bf4b4ff8ad0bbd7731105fabe845",
    "files": [
        {
            "sha": "9481423228ab476b738a6b71abdd5a5b04f6821f",
            "filename": "tools/gyp/pylib/gyp/xcode_emulation.py",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/16cffb0d4890bf4b4ff8ad0bbd7731105fabe845/tools%2Fgyp%2Fpylib%2Fgyp%2Fxcode_emulation.py",
            "raw_url": "https://github.com/nodejs/node/raw/16cffb0d4890bf4b4ff8ad0bbd7731105fabe845/tools%2Fgyp%2Fpylib%2Fgyp%2Fxcode_emulation.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fgyp%2Fpylib%2Fgyp%2Fxcode_emulation.py?ref=16cffb0d4890bf4b4ff8ad0bbd7731105fabe845",
            "patch": "@@ -495,7 +495,7 @@ def _GetSdkVersionInfoItem(self, sdk, infoitem):\n     # Since the CLT has no SDK paths anyway, returning None is the\n     # most sensible route and should still do the right thing.\n     try:\n-      return GetStdout(['xcrun', '--sdk', sdk, infoitem])\n+      return GetStdoutQuiet(['xcrun', '--sdk', sdk, infoitem])\n     except:\n       pass\n \n@@ -1394,7 +1394,7 @@ def XcodeVersion():\n   if XCODE_VERSION_CACHE:\n     return XCODE_VERSION_CACHE\n   try:\n-    version_list = GetStdout(['xcodebuild', '-version']).splitlines()\n+    version_list = GetStdoutQuiet(['xcodebuild', '-version']).splitlines()\n     # In some circumstances xcodebuild exits 0 but doesn't return\n     # the right results; for example, a user on 10.7 or 10.8 with\n     # a bogus path set via xcode-select\n@@ -1444,6 +1444,18 @@ def CLTVersion():\n       continue\n \n \n+def GetStdoutQuiet(cmdlist):\n+  \"\"\"Returns the content of standard output returned by invoking |cmdlist|.\n+  Ignores the stderr.\n+  Raises |GypError| if the command return with a non-zero return code.\"\"\"\n+  job = subprocess.Popen(cmdlist, stdout=subprocess.PIPE,\n+                         stderr=subprocess.PIPE)\n+  out = job.communicate()[0]\n+  if job.returncode != 0:\n+    raise GypError('Error %d running %s' % (job.returncode, cmdlist[0]))\n+  return out.rstrip('\\n')\n+\n+\n def GetStdout(cmdlist):\n   \"\"\"Returns the content of standard output returned by invoking |cmdlist|.\n   Raises |GypError| if the command return with a non-zero return code.\"\"\""
        }
    ],
    "stats": {
        "total": 16,
        "additions": 14,
        "deletions": 2
    }
}