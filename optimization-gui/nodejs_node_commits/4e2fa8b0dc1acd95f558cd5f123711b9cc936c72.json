{
    "author": "danbev",
    "message": "build: extract common code from NODE_EXE/_G_EXE\n\nThis commit extracts common parts of the NODE_EXE, and NODE_G_EXE\nrecipes into a canned reciepe to reduce some code duplication.\n\nPR-URL: https://github.com/nodejs/node/pull/22310\nReviewed-By: Jon Moss <me@jonathanmoss.me>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>",
    "sha": "4e2fa8b0dc1acd95f558cd5f123711b9cc936c72",
    "files": [
        {
            "sha": "f3372b096316af704589f6eae7ac3adbb9fec3c4",
            "filename": "Makefile",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/4e2fa8b0dc1acd95f558cd5f123711b9cc936c72/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/4e2fa8b0dc1acd95f558cd5f123711b9cc936c72/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=4e2fa8b0dc1acd95f558cd5f123711b9cc936c72",
            "patch": "@@ -90,18 +90,20 @@ help: ## Print help for targets with comments.\n # to check for changes.\n .PHONY: $(NODE_EXE) $(NODE_G_EXE)\n \n+define build_node_exe\n+$(MAKE) -C out BUILDTYPE=$1 V=$(V)\n # The -r/-L check stops it recreating the link if it is already in place,\n # otherwise $(NODE_EXE) being a .PHONY target means it is always re-run.\n # Without the check there is a race condition between the link being deleted\n # and recreated which can break the addons build when running test-ci\n # See comments on the build-addons target for some more info\n+if [ ! -r $@ -o ! -L $@ ]; then ln -fs out/$1/$(NODE_EXE) $@; fi\n+endef\n $(NODE_EXE): config.gypi out/Makefile\n-\t$(MAKE) -C out BUILDTYPE=Release V=$(V)\n-\tif [ ! -r $@ -o ! -L $@ ]; then ln -fs out/Release/$(NODE_EXE) $@; fi\n+\t@$(call build_node_exe,\"Release\")\n \n $(NODE_G_EXE): config.gypi out/Makefile\n-\t$(MAKE) -C out BUILDTYPE=Debug V=$(V)\n-\tif [ ! -r $@ -o ! -L $@ ]; then ln -fs out/Debug/$(NODE_EXE) $@; fi\n+\t@$(call build_node_exe,\"Debug\")\n \n CODE_CACHE_DIR ?= out/$(BUILDTYPE)/obj/gen\n CODE_CACHE_FILE ?= $(CODE_CACHE_DIR)/node_code_cache.cc"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 6,
        "deletions": 4
    }
}