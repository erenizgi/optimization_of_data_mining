{
    "author": "addaleax",
    "message": "src: pass along MaybeLocal<> state from `URL::ToObject()`\n\nPR-URL: https://github.com/nodejs/node/pull/25141\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>",
    "sha": "0043c6f5482993f7d91d6a78edeb310147895fb5",
    "files": [
        {
            "sha": "243352fe644e409620f775f4ce4d47fcf4fb88e3",
            "filename": "src/module_wrap.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0043c6f5482993f7d91d6a78edeb310147895fb5/src%2Fmodule_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0043c6f5482993f7d91d6a78edeb310147895fb5/src%2Fmodule_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fmodule_wrap.cc?ref=0043c6f5482993f7d91d6a78edeb310147895fb5",
            "patch": "@@ -708,7 +708,9 @@ void ModuleWrap::Resolve(const FunctionCallbackInfo<Value>& args) {\n     return node::THROW_ERR_MISSING_MODULE(env, msg.c_str());\n   }\n \n-  args.GetReturnValue().Set(result.FromJust().ToObject(env));\n+  MaybeLocal<Value> obj = result.FromJust().ToObject(env);\n+  if (!obj.IsEmpty())\n+    args.GetReturnValue().Set(obj.ToLocalChecked());\n }\n \n static MaybeLocal<Promise> ImportModuleDynamically("
        },
        {
            "sha": "d028a66dbea542808ede8a1722018458e99d23eb",
            "filename": "src/node_url.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0043c6f5482993f7d91d6a78edeb310147895fb5/src%2Fnode_url.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0043c6f5482993f7d91d6a78edeb310147895fb5/src%2Fnode_url.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_url.cc?ref=0043c6f5482993f7d91d6a78edeb310147895fb5",
            "patch": "@@ -2381,7 +2381,7 @@ URL URL::FromFilePath(const std::string& file_path) {\n // This function works by calling out to a JS function that creates and\n // returns the JS URL object. Be mindful of the JS<->Native boundary\n // crossing that is required.\n-const Local<Value> URL::ToObject(Environment* env) const {\n+MaybeLocal<Value> URL::ToObject(Environment* env) const {\n   Isolate* isolate = env->isolate();\n   Local<Context> context = env->context();\n   Context::Scope context_scope(context);\n@@ -2417,7 +2417,7 @@ const Local<Value> URL::ToObject(Environment* env) const {\n         ->Call(env->context(), undef, arraysize(argv), argv);\n   }\n \n-  return ret.ToLocalChecked();\n+  return ret;\n }\n \n static void SetURLConstructor(const FunctionCallbackInfo<Value>& args) {"
        },
        {
            "sha": "47b859b879bca46d2bcae22ac368c03e6309bdaf",
            "filename": "src/node_url.h",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/0043c6f5482993f7d91d6a78edeb310147895fb5/src%2Fnode_url.h",
            "raw_url": "https://github.com/nodejs/node/raw/0043c6f5482993f7d91d6a78edeb310147895fb5/src%2Fnode_url.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_url.h?ref=0043c6f5482993f7d91d6a78edeb310147895fb5",
            "patch": "@@ -11,10 +11,6 @@\n namespace node {\n namespace url {\n \n-using v8::Local;\n-using v8::Value;\n-\n-\n #define PARSESTATES(XX)                                                       \\\n   XX(kSchemeStart)                                                            \\\n   XX(kScheme)                                                                 \\\n@@ -171,7 +167,7 @@ class URL {\n   // Get the file URL from native file system path.\n   static URL FromFilePath(const std::string& file_path);\n \n-  const Local<Value> ToObject(Environment* env) const;\n+  v8::MaybeLocal<v8::Value> ToObject(Environment* env) const;\n \n   URL(const URL&) = default;\n   URL& operator=(const URL&) = default;"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 6,
        "deletions": 8
    }
}