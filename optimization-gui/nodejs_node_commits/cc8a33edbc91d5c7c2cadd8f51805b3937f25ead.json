{
    "author": "dsinecos",
    "message": "test: resolve process.setgid() error on Ubuntu\n\nWhen the tests are run as root in Ubuntu, process.setgid() is called\nwith 'nobody' as an argument. This throws an error in Ubuntu and is\nbecause, in Ubuntu, the equivalent of 'nobody' group is named as\n'nogroup'.\n\nThis commit sets gid to 'nobody' first and if it throws a \"group id\ndoes not exist\" error, it attempts to set gid to 'nogroup'. If it still\ncauses an error, the error is thrown.\n\nPR-URL: https://github.com/nodejs/node/pull/19755\nRefs: https://github.com/nodejs/node/issues/19594\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "cc8a33edbc91d5c7c2cadd8f51805b3937f25ead",
    "files": [
        {
            "sha": "d044c45a32783d33bf76e6da9bcb776e12f27ffa",
            "filename": "test/parallel/test-process-uid-gid.js",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/cc8a33edbc91d5c7c2cadd8f51805b3937f25ead/test%2Fparallel%2Ftest-process-uid-gid.js",
            "raw_url": "https://github.com/nodejs/node/raw/cc8a33edbc91d5c7c2cadd8f51805b3937f25ead/test%2Fparallel%2Ftest-process-uid-gid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-uid-gid.js?ref=cc8a33edbc91d5c7c2cadd8f51805b3937f25ead",
            "patch": "@@ -61,7 +61,14 @@ if (process.getuid() !== 0) {\n \n // If we are running as super user...\n const oldgid = process.getgid();\n-process.setgid('nobody');\n+try {\n+  process.setgid('nobody');\n+} catch (err) {\n+  if (err.message !== 'setgid group id does not exist') {\n+    throw err;\n+  }\n+  process.setgid('nogroup');\n+}\n const newgid = process.getgid();\n assert.notStrictEqual(newgid, oldgid);\n "
        }
    ],
    "stats": {
        "total": 9,
        "additions": 8,
        "deletions": 1
    }
}