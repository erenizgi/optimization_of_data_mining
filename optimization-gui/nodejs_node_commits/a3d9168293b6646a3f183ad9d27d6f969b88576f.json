{
    "author": "ZYSzys",
    "message": "events: extract listener check as a function\n\nPR-URL: https://github.com/nodejs/node/pull/24303\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Denys Otrishko <shishugi@gmail.com>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "a3d9168293b6646a3f183ad9d27d6f969b88576f",
    "files": [
        {
            "sha": "5dfa34469b09af9c84db859b01f715a2bbd5b160",
            "filename": "lib/events.js",
            "status": "modified",
            "additions": 13,
            "deletions": 16,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/a3d9168293b6646a3f183ad9d27d6f969b88576f/lib%2Fevents.js",
            "raw_url": "https://github.com/nodejs/node/raw/a3d9168293b6646a3f183ad9d27d6f969b88576f/lib%2Fevents.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fevents.js?ref=a3d9168293b6646a3f183ad9d27d6f969b88576f",
            "patch": "@@ -48,6 +48,13 @@ function lazyErrors() {\n   return errors;\n }\n \n+function checkListener(listener) {\n+  if (typeof listener !== 'function') {\n+    const errors = lazyErrors();\n+    throw new errors.ERR_INVALID_ARG_TYPE('listener', 'Function', listener);\n+  }\n+}\n+\n Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\n   enumerable: true,\n   get: function() {\n@@ -195,10 +202,7 @@ function _addListener(target, type, listener, prepend) {\n   var events;\n   var existing;\n \n-  if (typeof listener !== 'function') {\n-    const errors = lazyErrors();\n-    throw new errors.ERR_INVALID_ARG_TYPE('listener', 'Function', listener);\n-  }\n+  checkListener(listener);\n \n   events = target._events;\n   if (events === undefined) {\n@@ -283,20 +287,16 @@ function _onceWrap(target, type, listener) {\n }\n \n EventEmitter.prototype.once = function once(type, listener) {\n-  if (typeof listener !== 'function') {\n-    const errors = lazyErrors();\n-    throw new errors.ERR_INVALID_ARG_TYPE('listener', 'Function', listener);\n-  }\n+  checkListener(listener);\n+\n   this.on(type, _onceWrap(this, type, listener));\n   return this;\n };\n \n EventEmitter.prototype.prependOnceListener =\n     function prependOnceListener(type, listener) {\n-      if (typeof listener !== 'function') {\n-        const errors = lazyErrors();\n-        throw new errors.ERR_INVALID_ARG_TYPE('listener', 'Function', listener);\n-      }\n+      checkListener(listener);\n+\n       this.prependListener(type, _onceWrap(this, type, listener));\n       return this;\n     };\n@@ -306,10 +306,7 @@ EventEmitter.prototype.removeListener =\n     function removeListener(type, listener) {\n       var list, events, position, i, originalListener;\n \n-      if (typeof listener !== 'function') {\n-        const errors = lazyErrors();\n-        throw new errors.ERR_INVALID_ARG_TYPE('listener', 'Function', listener);\n-      }\n+      checkListener(listener);\n \n       events = this._events;\n       if (events === undefined)"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 13,
        "deletions": 16
    }
}