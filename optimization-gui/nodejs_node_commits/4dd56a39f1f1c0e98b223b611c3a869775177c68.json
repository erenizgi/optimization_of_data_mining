{
    "author": "BridgeAR",
    "message": "assert,util: fix sparse array comparison\n\nComparing sparse arrays did not work properly. That is fixed and\ntests were added to verify that everything works as expected.\n\nThis had an impact on `util.isDeepStrictEqual()` and\n`assert.deepStrictEqual()` and their counterpart\n`assert.notDeepStrictEqual()`.\n\nPR-URL: https://github.com/nodejs/node/pull/24749\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>",
    "sha": "4dd56a39f1f1c0e98b223b611c3a869775177c68",
    "files": [
        {
            "sha": "905946fdee3f441611900cfa11226e99b6cc064f",
            "filename": "lib/internal/util/comparisons.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/4dd56a39f1f1c0e98b223b611c3a869775177c68/lib%2Finternal%2Futil%2Fcomparisons.js",
            "raw_url": "https://github.com/nodejs/node/raw/4dd56a39f1f1c0e98b223b611c3a869775177c68/lib%2Finternal%2Futil%2Fcomparisons.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil%2Fcomparisons.js?ref=4dd56a39f1f1c0e98b223b611c3a869775177c68",
            "patch": "@@ -558,11 +558,10 @@ function objEquiv(a, b, strict, keys, memos, iterationType) {\n       } else {\n         // Array is sparse.\n         const keysA = objectKeys(a);\n-        i++;\n         for (; i < keysA.length; i++) {\n           const key = keysA[i];\n           if (!hasOwnProperty(b, key) ||\n-              !innerDeepEqual(a[key], b[i], strict, memos)) {\n+              !innerDeepEqual(a[key], b[key], strict, memos)) {\n             return false;\n           }\n         }"
        },
        {
            "sha": "38f3179d404c54c4b32831631ad8d80252a6c6b5",
            "filename": "test/parallel/test-assert-deep.js",
            "status": "modified",
            "additions": 14,
            "deletions": 3,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/4dd56a39f1f1c0e98b223b611c3a869775177c68/test%2Fparallel%2Ftest-assert-deep.js",
            "raw_url": "https://github.com/nodejs/node/raw/4dd56a39f1f1c0e98b223b611c3a869775177c68/test%2Fparallel%2Ftest-assert-deep.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert-deep.js?ref=4dd56a39f1f1c0e98b223b611c3a869775177c68",
            "patch": "@@ -571,9 +571,20 @@ assertNotDeepOrStrict(\n   assertDeepAndStrictEqual(m3, m4);\n }\n \n-// Handle sparse arrays\n-assertDeepAndStrictEqual([1, , , 3], [1, , , 3]);\n-assertOnlyDeepEqual([1, , , 3], [1, , , 3, , , ]);\n+// Handle sparse arrays.\n+{\n+  assertDeepAndStrictEqual([1, , , 3], [1, , , 3]);\n+  assertOnlyDeepEqual([1, , , 3], [1, , , 3, , , ]);\n+  const a = new Array(3);\n+  const b = new Array(3);\n+  a[2] = true;\n+  b[1] = true;\n+  assertNotDeepOrStrict(a, b);\n+  b[2] = true;\n+  assertNotDeepOrStrict(a, b);\n+  a[0] = true;\n+  assertNotDeepOrStrict(a, b);\n+}\n \n // Handle different error messages\n {"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 15,
        "deletions": 5
    }
}