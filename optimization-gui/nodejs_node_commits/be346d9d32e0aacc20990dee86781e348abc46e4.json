{
    "author": "refack",
    "message": "tools,icu: read full ICU version info from file\n\n* ATM on every ICU version bump we need to update these data. Reading\n  it from a file makes it independant of `configre.py` changes.\n* Update guide.\n\nPR-URL: https://github.com/nodejs/node/pull/23269\nRefs: https://github.com/nodejs/node/issues/23245\nReviewed-By: Steven R Loomis <srloomis@us.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "be346d9d32e0aacc20990dee86781e348abc46e4",
    "files": [
        {
            "sha": "ae44051edf4ff6c435064897f0d17654a19d7029",
            "filename": "configure.py",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/be346d9d32e0aacc20990dee86781e348abc46e4/configure.py",
            "raw_url": "https://github.com/nodejs/node/raw/be346d9d32e0aacc20990dee86781e348abc46e4/configure.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/configure.py?ref=be346d9d32e0aacc20990dee86781e348abc46e4",
            "patch": "@@ -1,3 +1,4 @@\n+import json\n import sys\n import errno\n import optparse\n@@ -1234,13 +1235,9 @@ def glob_to_var(dir_base, dir_sub, patch_dir):\n   return list\n \n def configure_intl(o):\n-  icus = [\n-    {\n-      'url': 'https://sourceforge.net/projects/icu/files/ICU4C/62.1/icu4c-62_1-src.zip',\n-      'md5': '408854f7b9b58311b68fab4b4dfc80be',\n-    },\n-  ]\n   def icu_download(path):\n+    with open('tools/icu/current_ver.dep') as f:\n+      icus = json.load(f)\n     # download ICU, if needed\n     if not os.access(options.download_path, os.W_OK):\n       error('''Cannot write to desired download path."
        },
        {
            "sha": "a2613544241b8e6b6d26d722e28f5dae23c8fd93",
            "filename": "tools/icu/README.md",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/be346d9d32e0aacc20990dee86781e348abc46e4/tools%2Ficu%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/be346d9d32e0aacc20990dee86781e348abc46e4/tools%2Ficu%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Ficu%2FREADME.md?ref=be346d9d32e0aacc20990dee86781e348abc46e4",
            "patch": "@@ -92,9 +92,9 @@ make clean\n tools/license-builder.sh\n ```\n \n-- Now, fix the default URL for the `full-icu` build in `/configure.py`, in\n-the `configure_intl()` function. It should match the ICU URL used in the\n-first step.  When this is done, the following should build with full ICU.\n+- Update the URL and hash for the full ICU file in `tools/icu/current_ver.dep`.\n+It should match the ICU URL used in the first step.  When this is done, the\n+following should build with full ICU.\n \n ```shell\n # clean up\n@@ -104,7 +104,7 @@ make\n make test-ci\n ```\n \n-- commit the change to `configure.py` along with the updated `LICENSE` file.\n+- commit the change to `tools/icu/current_ver.dep` and `LICENSE` files.\n \n   - Note: To simplify review, I often will “pre-land” this patch, meaning that\n   I run the patch through `curl -L https://github.com/nodejs/node/pull/xxx.patch"
        },
        {
            "sha": "5e439928ebb540c62e434c25fc2362078da3fcf2",
            "filename": "tools/icu/current_ver.dep",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/be346d9d32e0aacc20990dee86781e348abc46e4/tools%2Ficu%2Fcurrent_ver.dep",
            "raw_url": "https://github.com/nodejs/node/raw/be346d9d32e0aacc20990dee86781e348abc46e4/tools%2Ficu%2Fcurrent_ver.dep",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Ficu%2Fcurrent_ver.dep?ref=be346d9d32e0aacc20990dee86781e348abc46e4",
            "patch": "@@ -0,0 +1,6 @@\n+[\n+  {\n+    \"url\": \"https://sourceforge.net/projects/icu/files/ICU4C/62.1/icu4c-62_1-src.zip\",\n+    \"md5\": \"408854f7b9b58311b68fab4b4dfc80be\"\n+  }\n+]"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 13,
        "deletions": 10
    }
}