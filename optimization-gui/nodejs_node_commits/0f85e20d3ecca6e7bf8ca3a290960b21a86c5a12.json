{
    "author": "targos",
    "message": "deps: patch V8 to 6.8.275.30\n\nRefs: https://github.com/v8/v8/compare/6.8.275.24...6.8.275.30\n\nPR-URL: https://github.com/nodejs/node/pull/22125\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>",
    "sha": "0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12",
    "files": [
        {
            "sha": "e52b5742f595ac66ee93766223d40983468afc77",
            "filename": "deps/v8/include/v8-version.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Finclude%2Fv8-version.h",
            "raw_url": "https://github.com/nodejs/node/raw/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Finclude%2Fv8-version.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-version.h?ref=0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12",
            "patch": "@@ -11,7 +11,7 @@\n #define V8_MAJOR_VERSION 6\n #define V8_MINOR_VERSION 8\n #define V8_BUILD_NUMBER 275\n-#define V8_PATCH_LEVEL 24\n+#define V8_PATCH_LEVEL 30\n \n // Use 1 for candidates and 0 otherwise.\n // (Boolean macro values are not supported by all preprocessors.)"
        },
        {
            "sha": "9a51017899dc97397bbefec1791612c3f80d88cb",
            "filename": "deps/v8/src/code-stub-assembler.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc?ref=0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12",
            "patch": "@@ -8816,13 +8816,14 @@ void CodeStubAssembler::EmitBigTypedArrayElementStore(\n     TNode<JSTypedArray> object, TNode<FixedTypedArrayBase> elements,\n     TNode<IntPtrT> intptr_key, TNode<Object> value, TNode<Context> context,\n     Label* opt_if_neutered) {\n+  TNode<BigInt> bigint_value = ToBigInt(context, value);\n+\n   if (opt_if_neutered != nullptr) {\n-    // Check if buffer has been neutered.\n+    // Check if buffer has been neutered. Must happen after {ToBigInt}!\n     Node* buffer = LoadObjectField(object, JSArrayBufferView::kBufferOffset);\n     GotoIf(IsDetachedBuffer(buffer), opt_if_neutered);\n   }\n \n-  TNode<BigInt> bigint_value = ToBigInt(context, value);\n   TNode<RawPtrT> backing_store = LoadFixedTypedArrayBackingStore(elements);\n   TNode<IntPtrT> offset = ElementOffsetFromIndex(intptr_key, BIGINT64_ELEMENTS,\n                                                  INTPTR_PARAMETERS, 0);"
        },
        {
            "sha": "f25fae6dfed8542ea97beb653bb988ded17cd8b8",
            "filename": "deps/v8/src/compiler/ppc/code-generator-ppc.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc?ref=0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12",
            "patch": "@@ -1053,11 +1053,13 @@ CodeGenerator::CodeGenResult CodeGenerator::AssembleArchInstruction(\n     case kArchPrepareTailCall:\n       AssemblePrepareTailCall();\n       break;\n-    case kArchComment: {\n-      Address comment_string = i.InputExternalReference(0).address();\n-      __ RecordComment(reinterpret_cast<const char*>(comment_string));\n+    case kArchComment:\n+#ifdef V8_TARGET_ARCH_PPC64\n+      __ RecordComment(reinterpret_cast<const char*>(i.InputInt64(0)));\n+#else\n+      __ RecordComment(reinterpret_cast<const char*>(i.InputInt32(0)));\n+#endif\n       break;\n-    }\n     case kArchCallCFunction: {\n       int const num_parameters = MiscField::decode(instr->opcode());\n       if (instr->InputAt(0)->IsImmediate()) {"
        },
        {
            "sha": "7ecbc405cd1bad5c1138eab474ada5aedb66e984",
            "filename": "deps/v8/src/compiler/s390/code-generator-s390.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc?ref=0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12",
            "patch": "@@ -1357,11 +1357,13 @@ CodeGenerator::CodeGenResult CodeGenerator::AssembleArchInstruction(\n   ArchOpcode opcode = ArchOpcodeField::decode(instr->opcode());\n \n   switch (opcode) {\n-    case kArchComment: {\n-      Address comment_string = i.InputExternalReference(0).address();\n-      __ RecordComment(reinterpret_cast<const char*>(comment_string));\n+    case kArchComment:\n+#ifdef V8_TARGET_ARCH_S390X\n+      __ RecordComment(reinterpret_cast<const char*>(i.InputInt64(0)));\n+#else\n+      __ RecordComment(reinterpret_cast<const char*>(i.InputInt32(0)));\n+#endif\n       break;\n-    }\n     case kArchCallCodeObject: {\n       if (HasRegisterInput(instr, 0)) {\n         __ AddP(ip, i.InputRegister(0),"
        },
        {
            "sha": "f108f2acc463ce5bf005122866d3d068c86549db",
            "filename": "deps/v8/test/mjsunit/regress/regress-crbug-867776.js",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Ftest%2Fmjsunit%2Fregress%2Fregress-crbug-867776.js",
            "raw_url": "https://github.com/nodejs/node/raw/0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12/deps%2Fv8%2Ftest%2Fmjsunit%2Fregress%2Fregress-crbug-867776.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fmjsunit%2Fregress%2Fregress-crbug-867776.js?ref=0f85e20d3ecca6e7bf8ca3a290960b21a86c5a12",
            "patch": "@@ -0,0 +1,22 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+// Flags: --allow-natives-syntax --expose-gc\n+\n+for (var i = 0; i < 3; i++) {\n+  var array = new BigInt64Array(200);\n+\n+  function evil_callback() {\n+    %ArrayBufferNeuter(array.buffer);\n+    gc();\n+    return 1094795585n;\n+  }\n+\n+  var evil_object = {valueOf: evil_callback};\n+  var root;\n+  try {\n+    root = BigInt64Array.of.call(function() { return array }, evil_object);\n+  } catch(e) {}\n+  gc();\n+}"
        }
    ],
    "stats": {
        "total": 49,
        "additions": 38,
        "deletions": 11
    }
}