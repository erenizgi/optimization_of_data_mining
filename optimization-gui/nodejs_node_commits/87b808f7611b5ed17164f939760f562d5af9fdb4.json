{
    "author": "addaleax",
    "message": "src,lib: move `natives` and `constants` to `internalBinding()`\n\nRefs: https://github.com/nodejs/node/issues/22160\n\nPR-URL: https://github.com/nodejs/node/pull/23663\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Denys Otrishko <shishugi@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "87b808f7611b5ed17164f939760f562d5af9fdb4",
    "files": [
        {
            "sha": "2a880450677258e4670275258f76e0de1301a39f",
            "filename": "lib/_tls_common.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2F_tls_common.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2F_tls_common.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_tls_common.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -29,7 +29,7 @@ const {\n   ERR_INVALID_ARG_TYPE\n } = require('internal/errors').codes;\n \n-const { SSL_OP_CIPHER_SERVER_PREFERENCE } = process.binding('constants').crypto;\n+const { SSL_OP_CIPHER_SERVER_PREFERENCE } = internalBinding('constants').crypto;\n \n // Lazily loaded from internal/crypto/util.\n let toBuf = null;"
        },
        {
            "sha": "44c7388580d4401900d69868b4066e9568ea258e",
            "filename": "lib/constants.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fconstants.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fconstants.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fconstants.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -25,7 +25,7 @@\n // towards using the specific constants exposed by the individual modules on\n // which they are most relevant.\n // Deprecation Code: DEP0008\n-const constants = process.binding('constants');\n+const constants = internalBinding('constants');\n Object.assign(exports,\n               constants.os.dlopen,\n               constants.os.errno,"
        },
        {
            "sha": "13987f9e03e23081fad1d85fd8fd2613c1fd7fb8",
            "filename": "lib/crypto.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fcrypto.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fcrypto.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fcrypto.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -34,7 +34,7 @@ const {\n   ERR_CRYPTO_FIPS_FORCED,\n   ERR_CRYPTO_FIPS_UNAVAILABLE\n } = require('internal/errors').codes;\n-const constants = process.binding('constants').crypto;\n+const constants = internalBinding('constants').crypto;\n const { getOptions } = internalBinding('options');\n const pendingDeprecation = getOptions('--pending-deprecation');\n const {"
        },
        {
            "sha": "549b6dd738d0fea2157d3be41a8d097ecfecf2cd",
            "filename": "lib/dgram.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fdgram.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fdgram.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fdgram.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -52,7 +52,7 @@ const {\n   defaultTriggerAsyncIdScope,\n   symbols: { async_id_symbol, owner_symbol }\n } = require('internal/async_hooks');\n-const { UV_UDP_REUSEADDR } = process.binding('constants').os;\n+const { UV_UDP_REUSEADDR } = internalBinding('constants').os;\n \n const { UDP, SendWrap } = internalBinding('udp_wrap');\n "
        },
        {
            "sha": "bf964f5e9930cad8de98b6a33ef4951bb51805f1",
            "filename": "lib/fs.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Ffs.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Ffs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ffs.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -24,7 +24,7 @@\n \n 'use strict';\n \n-const { fs: constants } = process.binding('constants');\n+const { fs: constants } = internalBinding('constants');\n const {\n   S_IFIFO,\n   S_IFLNK,"
        },
        {
            "sha": "dff6ce661a4640028dea16ddf3750fb6f041a3f8",
            "filename": "lib/internal/bootstrap/loaders.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fbootstrap%2Floaders.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fbootstrap%2Floaders.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Floaders.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -123,7 +123,7 @@\n     this.script = null;  // The ContextifyScript of the module\n   }\n \n-  NativeModule._source = getBinding('natives');\n+  NativeModule._source = getInternalBinding('natives');\n   NativeModule._cache = {};\n \n   const config = getBinding('config');\n@@ -256,12 +256,12 @@\n       // 1. `internalBinding('code_cache_hash')` must be in sync with\n       //    `internalBinding('code_cache')` (same C++ file)\n       // 2. `internalBinding('natives_hash')` must be in sync with\n-      //    `process.binding('natives')` (same C++ file)\n+      //    `internalBinding('natives')` (same C++ file)\n       // 3. If `internalBinding('natives_hash')` is in sync with\n       //    `internalBinding('natives_hash')`, then the (unwrapped)\n       //    code used to generate `internalBinding('code_cache')`\n       //    should be in sync with the (unwrapped) code in\n-      //    `process.binding('natives')`\n+      //    `internalBinding('natives')`\n       // There will be, however, false positives if the wrapper used\n       // to generate the cache is different from the one used at run time,\n       // and the length of the wrapper somehow stays the same."
        },
        {
            "sha": "f0ca57afd4a7589219c1d5d9541eef3e7af9465e",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -414,7 +414,9 @@\n         'spawn_sync',\n         'js_stream',\n         'zlib',\n-        'buffer']);\n+        'buffer',\n+        'natives',\n+        'constants']);\n     process.binding = function binding(name) {\n       return internalBindingWhitelist.has(name) ?\n         internalBinding(name) :"
        },
        {
            "sha": "a2e973ed849f100a73e06e6d692dea687f322756",
            "filename": "lib/internal/crypto/cipher.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fcrypto%2Fcipher.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fcrypto%2Fcipher.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fcrypto%2Fcipher.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -3,7 +3,7 @@\n const {\n   RSA_PKCS1_OAEP_PADDING,\n   RSA_PKCS1_PADDING\n-} = process.binding('constants').crypto;\n+} = internalBinding('constants').crypto;\n \n const {\n   ERR_CRYPTO_INVALID_STATE,"
        },
        {
            "sha": "4f5bcbad972b2685c535c8a001cfc47db0f98313",
            "filename": "lib/internal/crypto/diffiehellman.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fcrypto%2Fdiffiehellman.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fcrypto%2Fdiffiehellman.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fcrypto%2Fdiffiehellman.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -24,7 +24,7 @@ const {\n   POINT_CONVERSION_COMPRESSED,\n   POINT_CONVERSION_HYBRID,\n   POINT_CONVERSION_UNCOMPRESSED\n-} = process.binding('constants').crypto;\n+} = internalBinding('constants').crypto;\n \n const DH_GENERATOR = 2;\n "
        },
        {
            "sha": "43033345afa545cd61aae4ad7f6f84f8d642d93d",
            "filename": "lib/internal/crypto/sig.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fcrypto%2Fsig.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fcrypto%2Fsig.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fcrypto%2Fsig.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -9,7 +9,7 @@ const { Sign: _Sign, Verify: _Verify } = internalBinding('crypto');\n const {\n   RSA_PSS_SALTLEN_AUTO,\n   RSA_PKCS1_PADDING\n-} = process.binding('constants').crypto;\n+} = internalBinding('constants').crypto;\n const {\n   getDefaultEncoding,\n   kHandle,"
        },
        {
            "sha": "ff5bfce4a76a49b4c4f5fd6bdf3de8233dd84c97",
            "filename": "lib/internal/crypto/util.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fcrypto%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fcrypto%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fcrypto%2Futil.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -10,7 +10,7 @@ const {\n \n const {\n   ENGINE_METHOD_ALL\n-} = process.binding('constants').crypto;\n+} = internalBinding('constants').crypto;\n \n const {\n   ERR_CRYPTO_ENGINE_UNKNOWN,"
        },
        {
            "sha": "0fecb2062371004d2eea06af52eff8409c92abe1",
            "filename": "lib/internal/fs/promises.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Ffs%2Fpromises.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Ffs%2Fpromises.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ffs%2Fpromises.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -6,7 +6,7 @@ const {\n   O_WRONLY,\n   S_IFMT,\n   S_IFREG\n-} = process.binding('constants').fs;\n+} = internalBinding('constants').fs;\n const binding = process.binding('fs');\n const { Buffer, kMaxLength } = require('buffer');\n const {"
        },
        {
            "sha": "0df13354acc628c92edfc3964a4b48e616173372",
            "filename": "lib/internal/fs/utils.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Ffs%2Futils.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Ffs%2Futils.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ffs%2Futils.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -43,7 +43,7 @@ const {\n   UV_DIRENT_SOCKET,\n   UV_DIRENT_CHAR,\n   UV_DIRENT_BLOCK\n-} = process.binding('constants').fs;\n+} = internalBinding('constants').fs;\n \n const isWindows = process.platform === 'win32';\n "
        },
        {
            "sha": "b8e518f6a1d3889de64ce119054c7f9ce49251f2",
            "filename": "lib/internal/process/main_thread_only.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fprocess%2Fmain_thread_only.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fprocess%2Fmain_thread_only.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprocess%2Fmain_thread_only.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -118,7 +118,7 @@ function setupPosixMethods(_initgroups, _setegid, _seteuid,\n \n // Worker threads don't receive signals.\n function setupSignalHandlers(internalBinding) {\n-  const constants = process.binding('constants').os.signals;\n+  const constants = internalBinding('constants').os.signals;\n   const signalWraps = Object.create(null);\n   let Signal;\n "
        },
        {
            "sha": "fa3421a3a32e1d2d7c8d9666a007ee24641e6fdb",
            "filename": "lib/internal/process/per_thread.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fprocess%2Fper_thread.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fprocess%2Fper_thread.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprocess%2Fper_thread.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -17,7 +17,7 @@ const {\n   }\n } = require('internal/errors');\n const util = require('util');\n-const constants = process.binding('constants').os.signals;\n+const constants = internalBinding('constants').os.signals;\n const { deprecate } = require('internal/util');\n \n function setupAssert() {"
        },
        {
            "sha": "3524b9e1d62112cc795c79a046ed1ff1c89f8c0a",
            "filename": "lib/internal/util.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -5,7 +5,7 @@ const {\n   ERR_NO_CRYPTO,\n   ERR_UNKNOWN_SIGNAL\n } = require('internal/errors').codes;\n-const { signals } = process.binding('constants').os;\n+const { signals } = internalBinding('constants').os;\n const {\n   getHiddenValue,\n   setHiddenValue,"
        },
        {
            "sha": "572b8074c46f1e67af646bcf85357e13c4ab8dfd",
            "filename": "lib/internal/v8_prof_processor.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fv8_prof_processor.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Finternal%2Fv8_prof_processor.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fv8_prof_processor.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -19,7 +19,7 @@ const scriptFiles = [\n var script = '';\n \n scriptFiles.forEach(function(s) {\n-  script += process.binding('natives')[s] + '\\n';\n+  script += internalBinding('natives')[s] + '\\n';\n });\n \n const tickArguments = [];"
        },
        {
            "sha": "797201c4b5e7323e72e47b90f87c0c71c87bfc5d",
            "filename": "lib/os.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fos.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fos.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fos.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -22,7 +22,7 @@\n 'use strict';\n \n const { pushValToArrayMax, safeGetenv } = internalBinding('util');\n-const constants = process.binding('constants').os;\n+const constants = internalBinding('constants').os;\n const { deprecate } = require('internal/util');\n const isWindows = process.platform === 'win32';\n "
        },
        {
            "sha": "3335632c933e1f89dd4f59af87d310328a352052",
            "filename": "lib/tls.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Ftls.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Ftls.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ftls.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -46,7 +46,7 @@ exports.CLIENT_RENEG_LIMIT = 3;\n exports.CLIENT_RENEG_WINDOW = 600;\n \n exports.DEFAULT_CIPHERS =\n-    process.binding('constants').crypto.defaultCipherList;\n+    internalBinding('constants').crypto.defaultCipherList;\n \n exports.DEFAULT_ECDH_CURVE = 'auto';\n "
        },
        {
            "sha": "61f57429d63586934ad24f6e09f9387b619bc974",
            "filename": "lib/zlib.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fzlib.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/lib%2Fzlib.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fzlib.js?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -45,7 +45,7 @@ const {\n } = require('buffer');\n const { owner_symbol } = require('internal/async_hooks').symbols;\n \n-const constants = process.binding('constants').zlib;\n+const constants = internalBinding('constants').zlib;\n const {\n   Z_NO_FLUSH, Z_BLOCK, Z_PARTIAL_FLUSH, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH,\n   Z_MIN_CHUNK, Z_MIN_WINDOWBITS, Z_MAX_WINDOWBITS, Z_MIN_LEVEL, Z_MAX_LEVEL,"
        },
        {
            "sha": "c24dfce0abd0f4b8ea4f83bc2aebc700ceb64f94",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/87b808f7611b5ed17164f939760f562d5af9fdb4/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/87b808f7611b5ed17164f939760f562d5af9fdb4/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=87b808f7611b5ed17164f939760f562d5af9fdb4",
            "patch": "@@ -1542,14 +1542,6 @@ static void GetBinding(const FunctionCallbackInfo<Value>& args) {\n   Local<Object> exports;\n   if (mod != nullptr) {\n     exports = InitModule(env, mod, module);\n-  } else if (!strcmp(*module_v, \"constants\")) {\n-    exports = Object::New(env->isolate());\n-    CHECK(exports->SetPrototype(env->context(),\n-                                Null(env->isolate())).FromJust());\n-    DefineConstants(env->isolate(), exports);\n-  } else if (!strcmp(*module_v, \"natives\")) {\n-    exports = Object::New(env->isolate());\n-    DefineJavaScript(env, exports);\n   } else {\n     return ThrowIfNoSuchModule(env, *module_v);\n   }\n@@ -1569,6 +1561,14 @@ static void GetInternalBinding(const FunctionCallbackInfo<Value>& args) {\n   node_module* mod = get_internal_module(*module_v);\n   if (mod != nullptr) {\n     exports = InitModule(env, mod, module);\n+  } else if (!strcmp(*module_v, \"constants\")) {\n+    exports = Object::New(env->isolate());\n+    CHECK(exports->SetPrototype(env->context(),\n+                                Null(env->isolate())).FromJust());\n+    DefineConstants(env->isolate(), exports);\n+  } else if (!strcmp(*module_v, \"natives\")) {\n+    exports = Object::New(env->isolate());\n+    DefineJavaScript(env, exports);\n   } else if (!strcmp(*module_v, \"code_cache\")) {\n     // internalBinding('code_cache')\n     exports = Object::New(env->isolate());"
        }
    ],
    "stats": {
        "total": 62,
        "additions": 32,
        "deletions": 30
    }
}