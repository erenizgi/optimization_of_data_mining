{
    "author": "addaleax",
    "message": "console: allow `options` object as constructor arg\n\nPR-URL: https://github.com/nodejs/node/pull/19372\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "ce58df58d0360779d16d60ce3bb0e9979ec5fdf4",
    "files": [
        {
            "sha": "99c31df242a19bd5267813079f578dd0177ac044",
            "filename": "doc/api/console.md",
            "status": "modified",
            "additions": 11,
            "deletions": 6,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/ce58df58d0360779d16d60ce3bb0e9979ec5fdf4/doc%2Fapi%2Fconsole.md",
            "raw_url": "https://github.com/nodejs/node/raw/ce58df58d0360779d16d60ce3bb0e9979ec5fdf4/doc%2Fapi%2Fconsole.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fconsole.md?ref=ce58df58d0360779d16d60ce3bb0e9979ec5fdf4",
            "patch": "@@ -79,17 +79,22 @@ const { Console } = console;\n ```\n \n ### new Console(stdout[, stderr][, ignoreErrors])\n+### new Console(options)\n <!-- YAML\n changes:\n   - version: v8.0.0\n     pr-url: https://github.com/nodejs/node/pull/9744\n     description: The `ignoreErrors` option was introduced.\n+  - version: REPLACEME\n+    pr-url: https://github.com/nodejs/node/pull/19372\n+    description: The `Console` constructor now supports an `options` argument.\n -->\n \n-* `stdout` {stream.Writable}\n-* `stderr` {stream.Writable}\n-* `ignoreErrors` {boolean} Ignore errors when writing to the underlying streams.\n-                           Defaults to `true`.\n+* `options` {Object}\n+  * `stdout` {stream.Writable}\n+  * `stderr` {stream.Writable}\n+  * `ignoreErrors` {boolean} Ignore errors when writing to the underlying\n+                             streams. **Default:** `true`.\n \n Creates a new `Console` with one or two writable stream instances. `stdout` is a\n writable stream to print log or info output. `stderr` is used for warning or\n@@ -99,7 +104,7 @@ error output. If `stderr` is not provided, `stdout` is used for `stderr`.\n const output = fs.createWriteStream('./stdout.log');\n const errorOutput = fs.createWriteStream('./stderr.log');\n // custom simple logger\n-const logger = new Console(output, errorOutput);\n+const logger = new Console({ stdout: output, stderr: errorOutput });\n // use it like console\n const count = 5;\n logger.log('count: %d', count);\n@@ -110,7 +115,7 @@ The global `console` is a special `Console` whose output is sent to\n [`process.stdout`][] and [`process.stderr`][]. It is equivalent to calling:\n \n ```js\n-new Console(process.stdout, process.stderr);\n+new Console({ stdout: process.stdout, stderr: process.stderr });\n ```\n \n ### console.assert(value[, ...message])"
        },
        {
            "sha": "9557b27fbcabf9af2f8a62bfb60a14f03bc4af52",
            "filename": "lib/console.js",
            "status": "modified",
            "additions": 21,
            "deletions": 6,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/ce58df58d0360779d16d60ce3bb0e9979ec5fdf4/lib%2Fconsole.js",
            "raw_url": "https://github.com/nodejs/node/raw/ce58df58d0360779d16d60ce3bb0e9979ec5fdf4/lib%2Fconsole.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fconsole.js?ref=ce58df58d0360779d16d60ce3bb0e9979ec5fdf4",
            "patch": "@@ -51,16 +51,28 @@ const {\n // Track amount of indentation required via `console.group()`.\n const kGroupIndent = Symbol('groupIndent');\n \n-function Console(stdout, stderr, ignoreErrors = true) {\n+function Console(options /* or: stdout, stderr, ignoreErrors = true */) {\n   if (!(this instanceof Console)) {\n-    return new Console(stdout, stderr, ignoreErrors);\n+    return new Console(...arguments);\n   }\n+\n+  let stdout, stderr, ignoreErrors;\n+  if (options && typeof options.write !== 'function') {\n+    ({\n+      stdout,\n+      stderr = stdout,\n+      ignoreErrors = true\n+    } = options);\n+  } else {\n+    stdout = options;\n+    stderr = arguments[1];\n+    ignoreErrors = arguments[2] === undefined ? true : arguments[2];\n+  }\n+\n   if (!stdout || typeof stdout.write !== 'function') {\n     throw new ERR_CONSOLE_WRITABLE_STREAM('stdout');\n   }\n-  if (!stderr) {\n-    stderr = stdout;\n-  } else if (typeof stderr.write !== 'function') {\n+  if (!stderr || typeof stderr.write !== 'function') {\n     throw new ERR_CONSOLE_WRITABLE_STREAM('stderr');\n   }\n \n@@ -369,7 +381,10 @@ Console.prototype.table = function(tabularData, properties) {\n   return final(keys, values);\n };\n \n-module.exports = new Console(process.stdout, process.stderr);\n+module.exports = new Console({\n+  stdout: process.stdout,\n+  stderr: process.stderr\n+});\n module.exports.Console = Console;\n \n function noop() {}"
        }
    ],
    "stats": {
        "total": 44,
        "additions": 32,
        "deletions": 12
    }
}