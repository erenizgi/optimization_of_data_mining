{
    "author": "vsemozhetbyt",
    "message": "tools: fix nits in tools/doc/preprocess.js\n\nPR-URL: https://github.com/nodejs/node/pull/19473\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>",
    "sha": "1d42b2018fe87bbf4e032d398d24e9279279a480",
    "files": [
        {
            "sha": "5b6901153dc61f9d92d017aeb77e7cf06cb47137",
            "filename": "tools/doc/preprocess.js",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/1d42b2018fe87bbf4e032d398d24e9279279a480/tools%2Fdoc%2Fpreprocess.js",
            "raw_url": "https://github.com/nodejs/node/raw/1d42b2018fe87bbf4e032d398d24e9279279a480/tools%2Fdoc%2Fpreprocess.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fpreprocess.js?ref=1d42b2018fe87bbf4e032d398d24e9279279a480",
            "patch": "@@ -5,7 +5,7 @@ module.exports = preprocess;\n const path = require('path');\n const fs = require('fs');\n \n-const includeExpr = /^@include\\s+([A-Za-z0-9-_]+)(?:\\.)?([a-zA-Z]*)$/gmi;\n+const includeExpr = /^@include\\s+[\\w-]+\\.?[a-zA-Z]*$/gmi;\n const includeData = {};\n \n function preprocess(inputFile, input, cb) {\n@@ -20,12 +20,12 @@ function stripComments(input) {\n function processIncludes(inputFile, input, cb) {\n   const includes = input.match(includeExpr);\n   if (includes === null) return cb(null, input);\n-  var errState = null;\n-  var incCount = includes.length;\n-  if (incCount === 0) cb(null, input);\n-  includes.forEach(function(include) {\n-    var fname = include.replace(/^@include\\s+/, '');\n-    if (!fname.match(/\\.md$/)) fname = `${fname}.md`;\n+  let errState = null;\n+  let incCount = includes.length;\n+\n+  includes.forEach((include) => {\n+    let fname = include.replace(/^@include\\s+/, '');\n+    if (!/\\.md$/.test(fname)) fname = `${fname}.md`;\n \n     if (includeData.hasOwnProperty(fname)) {\n       input = input.split(include).join(includeData[fname]);"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 7,
        "deletions": 7
    }
}