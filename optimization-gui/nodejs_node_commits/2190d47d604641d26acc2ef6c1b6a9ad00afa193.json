{
    "author": "joyeecheung",
    "message": "src: remove unused `internalBinding('config')` properties\n\nRemove the following properties:\n\n- `preserveSymlinks`\n- `preserveSymlinksMain`\n- `experimentalModules`\n- `userLoader`\n- `experimentalVMModules`\n- `experimentalREPLAwait`\n- `exposeInternals`\n\nWe used to use them to pass cli option values from C++ into\nJS, but now the values are obtained in JS land using\n`require('internal/options').getOptionValue` instead so they\nare unused.\n\nAlso removes `test/parallel/test-internal-modules-expose.js`\nwhich tests `--expose-internals`.\nWe already have hundreds of tests depending on `--expose-internals`,\nthey are more than enough to test the functionality of the flag.\n\nPR-URL: https://github.com/nodejs/node/pull/25463\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "2190d47d604641d26acc2ef6c1b6a9ad00afa193",
    "files": [
        {
            "sha": "555685dd457ad212cece99215aa0a9fe2759cd08",
            "filename": "src/node_config.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/2190d47d604641d26acc2ef6c1b6a9ad00afa193/src%2Fnode_config.cc",
            "raw_url": "https://github.com/nodejs/node/raw/2190d47d604641d26acc2ef6c1b6a9ad00afa193/src%2Fnode_config.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_config.cc?ref=2190d47d604641d26acc2ef6c1b6a9ad00afa193",
            "patch": "@@ -69,28 +69,6 @@ static void Initialize(Local<Object> target,\n \n #endif  // NODE_HAVE_I18N_SUPPORT\n \n-  if (env->options()->preserve_symlinks)\n-    READONLY_TRUE_PROPERTY(target, \"preserveSymlinks\");\n-  if (env->options()->preserve_symlinks_main)\n-    READONLY_TRUE_PROPERTY(target, \"preserveSymlinksMain\");\n-\n-  if (env->options()->experimental_modules) {\n-    READONLY_TRUE_PROPERTY(target, \"experimentalModules\");\n-    const std::string& userland_loader = env->options()->userland_loader;\n-    if (!userland_loader.empty()) {\n-      READONLY_STRING_PROPERTY(target, \"userLoader\",  userland_loader);\n-    }\n-  }\n-\n-  if (env->options()->experimental_vm_modules)\n-    READONLY_TRUE_PROPERTY(target, \"experimentalVMModules\");\n-\n-  if (env->options()->experimental_repl_await)\n-    READONLY_TRUE_PROPERTY(target, \"experimentalREPLAwait\");\n-\n-  if (env->options()->expose_internals)\n-    READONLY_TRUE_PROPERTY(target, \"exposeInternals\");\n-\n   if (env->abort_on_uncaught_exception())\n     READONLY_TRUE_PROPERTY(target, \"shouldAbortOnUncaughtException\");\n "
        },
        {
            "sha": "5229032573088ed54381945747a9716486d98c5a",
            "filename": "test/parallel/test-internal-modules-expose.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/cd70cbcbddfe1a577d5cf3f2c1c754359a04b9a2/test%2Fparallel%2Ftest-internal-modules-expose.js",
            "raw_url": "https://github.com/nodejs/node/raw/cd70cbcbddfe1a577d5cf3f2c1c754359a04b9a2/test%2Fparallel%2Ftest-internal-modules-expose.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-modules-expose.js?ref=cd70cbcbddfe1a577d5cf3f2c1c754359a04b9a2",
            "patch": "@@ -1,12 +0,0 @@\n-'use strict';\n-// Flags: --expose_internals\n-\n-require('../common');\n-const assert = require('assert');\n-const { internalBinding } = require('internal/test/binding');\n-const config = internalBinding('config');\n-\n-console.log(config, process.argv);\n-\n-assert.strictEqual(typeof require('internal/freelist').FreeList, 'function');\n-assert.strictEqual(config.exposeInternals, true);"
        }
    ],
    "stats": {
        "total": 34,
        "additions": 0,
        "deletions": 34
    }
}