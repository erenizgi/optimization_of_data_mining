{
    "author": "BridgeAR",
    "message": "assert: fix loose assert with map and set\n\nThere was an oversight when checking the possible loose comparisons.\nThis is now fixed by also accepting `''` instead of `0` or `false`.\n\nPR-URL: https://github.com/nodejs/node/pull/22145\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "85bfd71312ef7e3ac3aa1306ab2d2ff1c9dab9e3",
    "files": [
        {
            "sha": "5b29ccf561c71b6e120cfd193682d1b1efd565f7",
            "filename": "lib/internal/util/comparisons.js",
            "status": "modified",
            "additions": 21,
            "deletions": 12,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/85bfd71312ef7e3ac3aa1306ab2d2ff1c9dab9e3/lib%2Finternal%2Futil%2Fcomparisons.js",
            "raw_url": "https://github.com/nodejs/node/raw/85bfd71312ef7e3ac3aa1306ab2d2ff1c9dab9e3/lib%2Finternal%2Futil%2Fcomparisons.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil%2Fcomparisons.js?ref=85bfd71312ef7e3ac3aa1306ab2d2ff1c9dab9e3",
            "patch": "@@ -354,29 +354,38 @@ function setEquiv(a, b, strict, memo) {\n   return true;\n }\n \n+// See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Loose_equality_using\n function findLooseMatchingPrimitives(prim) {\n-  var values, number;\n   switch (typeof prim) {\n     case 'number':\n-      values = ['' + prim];\n-      if (prim === 1 || prim === 0)\n-        values.push(Boolean(prim));\n-      return values;\n+      if (prim === 0) {\n+        return ['', '0', false];\n+      }\n+      if (prim === 1) {\n+        return ['1', true];\n+      }\n+      return ['' + prim];\n     case 'string':\n-      number = +prim;\n+      if (prim === '' || prim === '0') {\n+        return [0, false];\n+      }\n+      if (prim === '1') {\n+        return [1, true];\n+      }\n+      const number = +prim;\n       if ('' + number === prim) {\n-        values = [number];\n-        if (number === 1 || number === 0)\n-          values.push(Boolean(number));\n+        return [number];\n       }\n-      return values;\n+      return;\n     case 'undefined':\n       return [null];\n     case 'object': // Only pass in null as object!\n       return [undefined];\n     case 'boolean':\n-      number = +prim;\n-      return [number, '' + number];\n+      if (prim === false) {\n+        return ['', '0', 0];\n+      }\n+      return ['1', 1];\n   }\n }\n "
        },
        {
            "sha": "b335f95a51127efca8f9203c1aa1d61bae626d6c",
            "filename": "test/parallel/test-assert-deep.js",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/85bfd71312ef7e3ac3aa1306ab2d2ff1c9dab9e3/test%2Fparallel%2Ftest-assert-deep.js",
            "raw_url": "https://github.com/nodejs/node/raw/85bfd71312ef7e3ac3aa1306ab2d2ff1c9dab9e3/test%2Fparallel%2Ftest-assert-deep.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert-deep.js?ref=85bfd71312ef7e3ac3aa1306ab2d2ff1c9dab9e3",
            "patch": "@@ -355,8 +355,8 @@ assertDeepAndStrictEqual(\n   new Map([[1, undefined]])\n );\n assertOnlyDeepEqual(\n-  new Map([[1, null]]),\n-  new Map([['1', undefined]])\n+  new Map([[1, null], ['', '0']]),\n+  new Map([['1', undefined], [false, 0]])\n );\n assertNotDeepOrStrict(\n   new Map([[1, undefined]]),\n@@ -373,8 +373,12 @@ assertOnlyDeepEqual(\n   new Map([[undefined, null]])\n );\n assertOnlyDeepEqual(\n-  new Set([null]),\n-  new Set([undefined])\n+  new Set([null, '']),\n+  new Set([undefined, 0])\n+);\n+assertNotDeepOrStrict(\n+  new Set(['']),\n+  new Set(['0'])\n );\n \n // GH-6416. Make sure circular refs don't throw."
        }
    ],
    "stats": {
        "total": 45,
        "additions": 29,
        "deletions": 16
    }
}