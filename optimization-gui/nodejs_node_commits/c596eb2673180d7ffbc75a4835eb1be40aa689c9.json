{
    "author": "Shagamii",
    "message": "test: add test of fs.promises write for non-string buffers\n\nPR-URL: https://github.com/nodejs/node/pull/21708\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\nReviewed-By: Shingo Inoue <leko.noor@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "c596eb2673180d7ffbc75a4835eb1be40aa689c9",
    "files": [
        {
            "sha": "3cff69f48dfb72efae56438a11b3c93d71495770",
            "filename": "test/parallel/test-fs-promises-file-handle-write.js",
            "status": "modified",
            "additions": 15,
            "deletions": 1,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/c596eb2673180d7ffbc75a4835eb1be40aa689c9/test%2Fparallel%2Ftest-fs-promises-file-handle-write.js",
            "raw_url": "https://github.com/nodejs/node/raw/c596eb2673180d7ffbc75a4835eb1be40aa689c9/test%2Fparallel%2Ftest-fs-promises-file-handle-write.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-promises-file-handle-write.js?ref=c596eb2673180d7ffbc75a4835eb1be40aa689c9",
            "patch": "@@ -45,8 +45,22 @@ async function validateNonUint8ArrayWrite() {\n   assert.deepStrictEqual(Buffer.from(buffer, 'utf8'), readFileData);\n }\n \n+async function validateNonStringValuesWrite() {\n+  const filePathForHandle = path.resolve(tmpDir, 'tmp-non-string-write.txt');\n+  const fileHandle = await open(filePathForHandle, 'w+');\n+  const nonStringValues = [123, {}, new Map()];\n+  for (const nonStringValue of nonStringValues) {\n+    await fileHandle.write(nonStringValue);\n+  }\n+\n+  const readFileData = fs.readFileSync(filePathForHandle);\n+  const expected = ['123', '[object Object]', '[object Map]'].join('');\n+  assert.deepStrictEqual(Buffer.from(expected, 'utf8'), readFileData);\n+}\n+\n Promise.all([\n   validateWrite(),\n   validateEmptyWrite(),\n-  validateNonUint8ArrayWrite()\n+  validateNonUint8ArrayWrite(),\n+  validateNonStringValuesWrite()\n ]).then(common.mustCall());"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 15,
        "deletions": 1
    }
}