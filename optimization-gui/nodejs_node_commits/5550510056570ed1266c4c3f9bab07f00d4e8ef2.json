{
    "author": "addaleax",
    "message": "doc: formalize non-const reference usage in C++ style guide\n\nWe generally avoid using non-const references if not necessary. This\nformalizes this rules by writing them down in the C++ style guide.\n\n(Note: Some reviews are from the original PR.)\n\nRefs: https://github.com/nodejs/node/pull/23028\nPR-URL: https://github.com/nodejs/node/pull/23155\nReviewed-By: Tobias Nießen <tniessen@tnie.de>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Michaël Zasso <targos@protonmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>",
    "sha": "5550510056570ed1266c4c3f9bab07f00d4e8ef2",
    "files": [
        {
            "sha": "e14de6cc48b1e39ce0a05ac9303e14c4fe7e9939",
            "filename": "CPP_STYLE_GUIDE.md",
            "status": "modified",
            "additions": 38,
            "deletions": 0,
            "changes": 38,
            "blob_url": "https://github.com/nodejs/node/blob/5550510056570ed1266c4c3f9bab07f00d4e8ef2/CPP_STYLE_GUIDE.md",
            "raw_url": "https://github.com/nodejs/node/raw/5550510056570ed1266c4c3f9bab07f00d4e8ef2/CPP_STYLE_GUIDE.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/CPP_STYLE_GUIDE.md?ref=5550510056570ed1266c4c3f9bab07f00d4e8ef2",
            "patch": "@@ -19,6 +19,7 @@\n   * [Memory allocation](#memory-allocation)\n   * [Use `nullptr` instead of `NULL` or `0`](#use-nullptr-instead-of-null-or-0)\n   * [Ownership and Smart Pointers](#ownership-and-smart-pointers)\n+  * [Avoid non-const references](#avoid-non-const-references)\n * [Others](#others)\n   * [Type casting](#type-casting)\n   * [Using `auto`](#using-auto)\n@@ -212,6 +213,43 @@ ownership to the callee and invalidates the caller's instance.\n \n Don't use `std::auto_ptr`, it is deprecated ([Reference][cppref_auto_ptr]).\n \n+### Avoid non-const references\n+\n+Using non-const references often obscures which values are changed by an\n+assignment. Consider using a pointer instead, which requires more explicit\n+syntax to indicate that modifications take place.\n+\n+```c++\n+class ExampleClass {\n+ public:\n+  explicit ExampleClass(OtherClass* other_ptr) : pointer_to_other_(other_ptr) {}\n+\n+  void SomeMethod(const std::string& input_param,\n+                  std::string* in_out_param);  // Pointer instead of reference\n+\n+  const std::string& get_foo() const { return foo_string_; }\n+  void set_foo(const std::string& new_value) { foo_string_ = new_value; }\n+\n+  void ReplaceCharacterInFoo(char from, char to) {\n+    // A non-const reference is okay here, because the method name already tells\n+    // users that this modifies 'foo_string_' -- if that is not the case,\n+    // it can still be better to use an indexed for loop, or leave appropriate\n+    // comments.\n+    for (char& character : foo_string_) {\n+      if (character == from)\n+        character = to;\n+    }\n+  }\n+\n+ private:\n+  std::string foo_string_;\n+  // Pointer instead of reference. If this object 'owns' the other object,\n+  // this should be a `std::unique_ptr<OtherClass>`; a\n+  // `std::shared_ptr<OtherClass>` can also be a better choice.\n+  OtherClass* pointer_to_other_;\n+};\n+```\n+\n ## Others\n \n ### Type casting"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 38,
        "deletions": 0
    }
}