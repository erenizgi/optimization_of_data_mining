{
    "author": "gireeshpunathil",
    "message": "src: make watchdog async callback a lambda\n\n`Watchdog::Async` features only once for the\nasync callback, so make it a lambda.\n\nPR-URL: https://github.com/nodejs/node/pull/25945\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "7182aca108fac7a7e464e9450461975e6ef4a4e3",
    "files": [
        {
            "sha": "482d590a52141761c2226eb44ff586f76acf23b8",
            "filename": "src/node_watchdog.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 8,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/7182aca108fac7a7e464e9450461975e6ef4a4e3/src%2Fnode_watchdog.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7182aca108fac7a7e464e9450461975e6ef4a4e3/src%2Fnode_watchdog.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_watchdog.cc?ref=7182aca108fac7a7e464e9450461975e6ef4a4e3",
            "patch": "@@ -39,7 +39,11 @@ Watchdog::Watchdog(v8::Isolate* isolate, uint64_t ms, bool* timed_out)\n                \"Failed to initialize uv loop.\");\n   }\n \n-  rc = uv_async_init(loop_, &async_, &Watchdog::Async);\n+  rc = uv_async_init(loop_, &async_, [](uv_async_t* signal) {\n+    Watchdog* w = ContainerOf(&Watchdog::async_, signal);\n+    uv_stop(w->loop_);\n+  });\n+\n   CHECK_EQ(0, rc);\n \n   rc = uv_timer_init(loop_, &timer_);\n@@ -80,13 +84,6 @@ void Watchdog::Run(void* arg) {\n   uv_close(reinterpret_cast<uv_handle_t*>(&wd->timer_), nullptr);\n }\n \n-\n-void Watchdog::Async(uv_async_t* async) {\n-  Watchdog* w = ContainerOf(&Watchdog::async_, async);\n-  uv_stop(w->loop_);\n-}\n-\n-\n void Watchdog::Timer(uv_timer_t* timer) {\n   Watchdog* w = ContainerOf(&Watchdog::timer_, timer);\n   *w->timed_out_ = true;"
        },
        {
            "sha": "9c56b90e9ee43158f64e7e75987ebfb467a34dbf",
            "filename": "src/node_watchdog.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/7182aca108fac7a7e464e9450461975e6ef4a4e3/src%2Fnode_watchdog.h",
            "raw_url": "https://github.com/nodejs/node/raw/7182aca108fac7a7e464e9450461975e6ef4a4e3/src%2Fnode_watchdog.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_watchdog.h?ref=7182aca108fac7a7e464e9450461975e6ef4a4e3",
            "patch": "@@ -45,7 +45,6 @@ class Watchdog {\n \n  private:\n   static void Run(void* arg);\n-  static void Async(uv_async_t* async);\n   static void Timer(uv_timer_t* timer);\n \n   v8::Isolate* isolate_;"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 5,
        "deletions": 9
    }
}