{
    "author": "nornagon",
    "message": "build: make --shared-[...]-path work on Windows\n\nThe `-L<path>` syntax isn't recognized by link.exe, and gyp\ndoesn't translate it properly. Without this, link.exe generates\nthe following warning and fails to link:\n\n```\nLINK : warning LNK4044: unrecognized option '/LC:/Users/nornagon/...'; ignored\n```\n\nPR-URL: https://github.com/nodejs/node/pull/21530\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Jo√£o Reis <reis@janeasystems.com>",
    "sha": "83ab3bfedaedb13e16b8499c1d61dd21b2956e99",
    "files": [
        {
            "sha": "c9d598b799204bbdf5b99951fb40a63908c8a491",
            "filename": "configure",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/83ab3bfedaedb13e16b8499c1d61dd21b2956e99/configure",
            "raw_url": "https://github.com/nodejs/node/raw/83ab3bfedaedb13e16b8499c1d61dd21b2956e99/configure",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/configure?ref=83ab3bfedaedb13e16b8499c1d61dd21b2956e99",
            "patch": "@@ -1074,8 +1074,14 @@ def configure_library(lib, output):\n \n     # libpath needs to be provided ahead libraries\n     if options.__dict__[shared_lib + '_libpath']:\n-      output['libraries'] += [\n-          '-L%s' % options.__dict__[shared_lib + '_libpath']]\n+      if flavor == 'win':\n+        if 'msvs_settings' not in output:\n+          output['msvs_settings'] = { 'VCLinkerTool': { 'AdditionalOptions': [] } }\n+        output['msvs_settings']['VCLinkerTool']['AdditionalOptions'] += [\n+          '/LIBPATH:%s' % options.__dict__[shared_lib + '_libpath']]\n+      else:\n+        output['libraries'] += [\n+            '-L%s' % options.__dict__[shared_lib + '_libpath']]\n     elif pkg_libpath:\n       output['libraries'] += [pkg_libpath]\n "
        }
    ],
    "stats": {
        "total": 10,
        "additions": 8,
        "deletions": 2
    }
}