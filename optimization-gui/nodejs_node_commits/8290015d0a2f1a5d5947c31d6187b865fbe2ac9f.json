{
    "author": "jasnell",
    "message": "deps: update nghttp2 to 1.34.0\n\nKey new feature: RFC 8441 `:protocol` support\n\nPR-URL: https://github.com/nodejs/node/pull/23284\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
    "files": [
        {
            "sha": "e7198b3d27314d5f6ca925da60bb52aa5d218d9b",
            "filename": "deps/nghttp2/lib/includes/nghttp2/nghttp2.h",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fincludes%2Fnghttp2%2Fnghttp2.h",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fincludes%2Fnghttp2%2Fnghttp2.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fincludes%2Fnghttp2%2Fnghttp2.h?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -680,7 +680,12 @@ typedef enum {\n   /**\n    * SETTINGS_MAX_HEADER_LIST_SIZE\n    */\n-  NGHTTP2_SETTINGS_MAX_HEADER_LIST_SIZE = 0x06\n+  NGHTTP2_SETTINGS_MAX_HEADER_LIST_SIZE = 0x06,\n+  /**\n+   * SETTINGS_ENABLE_CONNECT_PROTOCOL\n+   * (`RFC 8441 <https://tools.ietf.org/html/rfc8441>`_)\n+   */\n+  NGHTTP2_SETTINGS_ENABLE_CONNECT_PROTOCOL = 0x08\n } nghttp2_settings_id;\n /* Note: If we add SETTINGS, update the capacity of\n    NGHTTP2_INBOUND_NUM_IV as well */"
        },
        {
            "sha": "420adbd53dddcef2a4cf5870bbc8ed44d88bce17",
            "filename": "deps/nghttp2/lib/includes/nghttp2/nghttp2ver.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fincludes%2Fnghttp2%2Fnghttp2ver.h",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fincludes%2Fnghttp2%2Fnghttp2ver.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fincludes%2Fnghttp2%2Fnghttp2ver.h?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -29,14 +29,14 @@\n  * @macro\n  * Version number of the nghttp2 library release\n  */\n-#define NGHTTP2_VERSION \"1.33.0\"\n+#define NGHTTP2_VERSION \"1.34.0\"\n \n /**\n  * @macro\n  * Numerical representation of the version number of the nghttp2 library\n  * release. This is a 24 bit number with 8 bits for major number, 8 bits\n  * for minor and 8 bits for patch. Version 1.2.3 becomes 0x010203.\n  */\n-#define NGHTTP2_VERSION_NUM 0x012100\n+#define NGHTTP2_VERSION_NUM 0x012200\n \n #endif /* NGHTTP2VER_H */"
        },
        {
            "sha": "4821de40885736e5a6b312b388b07978cbb811b6",
            "filename": "deps/nghttp2/lib/nghttp2_frame.c",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_frame.c",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_frame.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fnghttp2_frame.c?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -1050,6 +1050,11 @@ int nghttp2_iv_check(const nghttp2_settings_entry *iv, size_t niv) {\n       break;\n     case NGHTTP2_SETTINGS_MAX_HEADER_LIST_SIZE:\n       break;\n+    case NGHTTP2_SETTINGS_ENABLE_CONNECT_PROTOCOL:\n+      if (iv[i].value != 0 && iv[i].value != 1) {\n+        return 0;\n+      }\n+      break;\n     }\n   }\n   return 1;"
        },
        {
            "sha": "a61f0d47a6f79d6e39dc7574a5bba3147bd6dc35",
            "filename": "deps/nghttp2/lib/nghttp2_hd.c",
            "status": "modified",
            "additions": 15,
            "deletions": 5,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_hd.c",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_hd.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fnghttp2_hd.c?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -45,7 +45,7 @@\n /* 3rd parameter is nghttp2_token value for header field name.  We use\n    first enum value if same header names are repeated (e.g.,\n    :status). */\n-static nghttp2_hd_static_entry static_table[] = {\n+static const nghttp2_hd_static_entry static_table[] = {\n     MAKE_STATIC_ENT(\":authority\", \"\", 0, 3153725150u),\n     MAKE_STATIC_ENT(\":method\", \"GET\", 1, 695666056u),\n     MAKE_STATIC_ENT(\":method\", \"POST\", 1, 695666056u),\n@@ -271,6 +271,15 @@ static int32_t lookup_token(const uint8_t *name, size_t namelen) {\n       break;\n     }\n     break;\n+  case 9:\n+    switch (name[8]) {\n+    case 'l':\n+      if (memeq(\":protoco\", name, 8)) {\n+        return NGHTTP2_TOKEN__PROTOCOL;\n+      }\n+      break;\n+    }\n+    break;\n   case 10:\n     switch (name[9]) {\n     case 'e':\n@@ -1159,7 +1168,7 @@ static search_result search_static_table(const nghttp2_nv *nv, int32_t token,\n                                          int name_only) {\n   search_result res = {token, 0};\n   int i;\n-  nghttp2_hd_static_entry *ent;\n+  const nghttp2_hd_static_entry *ent;\n \n   if (name_only) {\n     return res;\n@@ -1184,7 +1193,7 @@ static search_result search_hd_table(nghttp2_hd_context *context,\n                                      int indexing_mode, nghttp2_hd_map *map,\n                                      uint32_t hash) {\n   search_result res = {-1, 0};\n-  nghttp2_hd_entry *ent;\n+  const nghttp2_hd_entry *ent;\n   int exact_match;\n   int name_only = indexing_mode == NGHTTP2_HD_NEVER_INDEXING;\n \n@@ -1289,8 +1298,9 @@ nghttp2_hd_nv nghttp2_hd_table_get(nghttp2_hd_context *context, size_t idx) {\n     return hd_ringbuf_get(&context->hd_table, idx - NGHTTP2_STATIC_TABLE_LENGTH)\n         ->nv;\n   } else {\n-    nghttp2_hd_static_entry *ent = &static_table[idx];\n-    nghttp2_hd_nv nv = {&ent->name, &ent->value, ent->token,\n+    const nghttp2_hd_static_entry *ent = &static_table[idx];\n+    nghttp2_hd_nv nv = {(nghttp2_rcbuf *)&ent->name,\n+                        (nghttp2_rcbuf *)&ent->value, ent->token,\n                         NGHTTP2_NV_FLAG_NONE};\n     return nv;\n   }"
        },
        {
            "sha": "14ae98078957af2eecfb643acb0c3eb137fd0e31",
            "filename": "deps/nghttp2/lib/nghttp2_hd.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_hd.h",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_hd.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fnghttp2_hd.h?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -111,6 +111,7 @@ typedef enum {\n   NGHTTP2_TOKEN_KEEP_ALIVE,\n   NGHTTP2_TOKEN_PROXY_CONNECTION,\n   NGHTTP2_TOKEN_UPGRADE,\n+  NGHTTP2_TOKEN__PROTOCOL,\n } nghttp2_token;\n \n struct nghttp2_hd_entry;"
        },
        {
            "sha": "81a8a0cf99971aba00eae4451c2215684577b785",
            "filename": "deps/nghttp2/lib/nghttp2_helper.c",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_helper.c",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_helper.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fnghttp2_helper.c?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -340,7 +340,7 @@ const char *nghttp2_strerror(int error_code) {\n }\n \n /* Generated by gennmchartbl.py */\n-static int VALID_HD_NAME_CHARS[] = {\n+static const int VALID_HD_NAME_CHARS[] = {\n     0 /* NUL  */, 0 /* SOH  */, 0 /* STX  */, 0 /* ETX  */,\n     0 /* EOT  */, 0 /* ENQ  */, 0 /* ACK  */, 0 /* BEL  */,\n     0 /* BS   */, 0 /* HT   */, 0 /* LF   */, 0 /* VT   */,\n@@ -428,7 +428,7 @@ int nghttp2_check_header_name(const uint8_t *name, size_t len) {\n }\n \n /* Generated by genvchartbl.py */\n-static int VALID_HD_VALUE_CHARS[] = {\n+static const int VALID_HD_VALUE_CHARS[] = {\n     0 /* NUL  */, 0 /* SOH  */, 0 /* STX  */, 0 /* ETX  */,\n     0 /* EOT  */, 0 /* ENQ  */, 0 /* ACK  */, 0 /* BEL  */,\n     0 /* BS   */, 1 /* HT   */, 0 /* LF   */, 0 /* VT   */,"
        },
        {
            "sha": "6e8acfdcc141af998cfb43c70db876c045ed3b42",
            "filename": "deps/nghttp2/lib/nghttp2_http.c",
            "status": "modified",
            "additions": 24,
            "deletions": 15,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_http.c",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_http.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fnghttp2_http.c?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -113,7 +113,7 @@ static int check_path(nghttp2_stream *stream) {\n }\n \n static int http_request_on_header(nghttp2_stream *stream, nghttp2_hd_nv *nv,\n-                                  int trailer) {\n+                                  int trailer, int connect_protocol) {\n   if (nv->name->base[0] == ':') {\n     if (trailer ||\n         (stream->http_flags & NGHTTP2_HTTP_FLAG_PSEUDO_HEADER_DISALLOWED)) {\n@@ -146,10 +146,6 @@ static int http_request_on_header(nghttp2_stream *stream, nghttp2_hd_nv *nv,\n             return NGHTTP2_ERR_HTTP_HEADER;\n           }\n           stream->http_flags |= NGHTTP2_HTTP_FLAG_METH_CONNECT;\n-          if (stream->http_flags &\n-              (NGHTTP2_HTTP_FLAG__PATH | NGHTTP2_HTTP_FLAG__SCHEME)) {\n-            return NGHTTP2_ERR_HTTP_HEADER;\n-          }\n         }\n         break;\n       case 'S':\n@@ -162,9 +158,6 @@ static int http_request_on_header(nghttp2_stream *stream, nghttp2_hd_nv *nv,\n     }\n     break;\n   case NGHTTP2_TOKEN__PATH:\n-    if (stream->http_flags & NGHTTP2_HTTP_FLAG_METH_CONNECT) {\n-      return NGHTTP2_ERR_HTTP_HEADER;\n-    }\n     if (!check_pseudo_header(stream, nv, NGHTTP2_HTTP_FLAG__PATH)) {\n       return NGHTTP2_ERR_HTTP_HEADER;\n     }\n@@ -175,9 +168,6 @@ static int http_request_on_header(nghttp2_stream *stream, nghttp2_hd_nv *nv,\n     }\n     break;\n   case NGHTTP2_TOKEN__SCHEME:\n-    if (stream->http_flags & NGHTTP2_HTTP_FLAG_METH_CONNECT) {\n-      return NGHTTP2_ERR_HTTP_HEADER;\n-    }\n     if (!check_pseudo_header(stream, nv, NGHTTP2_HTTP_FLAG__SCHEME)) {\n       return NGHTTP2_ERR_HTTP_HEADER;\n     }\n@@ -186,6 +176,15 @@ static int http_request_on_header(nghttp2_stream *stream, nghttp2_hd_nv *nv,\n       stream->http_flags |= NGHTTP2_HTTP_FLAG_SCHEME_HTTP;\n     }\n     break;\n+  case NGHTTP2_TOKEN__PROTOCOL:\n+    if (!connect_protocol) {\n+      return NGHTTP2_ERR_HTTP_HEADER;\n+    }\n+\n+    if (!check_pseudo_header(stream, nv, NGHTTP2_HTTP_FLAG__PROTOCOL)) {\n+      return NGHTTP2_ERR_HTTP_HEADER;\n+    }\n+    break;\n   case NGHTTP2_TOKEN_HOST:\n     if (!check_pseudo_header(stream, nv, NGHTTP2_HTTP_FLAG_HOST)) {\n       return NGHTTP2_ERR_HTTP_HEADER;\n@@ -265,7 +264,7 @@ static int http_response_on_header(nghttp2_stream *stream, nghttp2_hd_nv *nv,\n       return NGHTTP2_ERR_REMOVE_HTTP_HEADER;\n     }\n     if (stream->status_code / 100 == 1 ||\n-        (stream->status_code == 200 &&\n+        (stream->status_code / 100 == 2 &&\n          (stream->http_flags & NGHTTP2_HTTP_FLAG_METH_CONNECT))) {\n       return NGHTTP2_ERR_HTTP_HEADER;\n     }\n@@ -458,16 +457,21 @@ int nghttp2_http_on_header(nghttp2_session *session, nghttp2_stream *stream,\n   }\n \n   if (session->server || frame->hd.type == NGHTTP2_PUSH_PROMISE) {\n-    return http_request_on_header(stream, nv, trailer);\n+    return http_request_on_header(stream, nv, trailer,\n+                                  session->server &&\n+                                      session->pending_enable_connect_protocol);\n   }\n \n   return http_response_on_header(stream, nv, trailer);\n }\n \n int nghttp2_http_on_request_headers(nghttp2_stream *stream,\n                                     nghttp2_frame *frame) {\n-  if (stream->http_flags & NGHTTP2_HTTP_FLAG_METH_CONNECT) {\n-    if ((stream->http_flags & NGHTTP2_HTTP_FLAG__AUTHORITY) == 0) {\n+  if (!(stream->http_flags & NGHTTP2_HTTP_FLAG__PROTOCOL) &&\n+      (stream->http_flags & NGHTTP2_HTTP_FLAG_METH_CONNECT)) {\n+    if ((stream->http_flags &\n+         (NGHTTP2_HTTP_FLAG__SCHEME | NGHTTP2_HTTP_FLAG__PATH)) ||\n+        (stream->http_flags & NGHTTP2_HTTP_FLAG__AUTHORITY) == 0) {\n       return -1;\n     }\n     stream->content_length = -1;\n@@ -478,6 +482,11 @@ int nghttp2_http_on_request_headers(nghttp2_stream *stream,\n          (NGHTTP2_HTTP_FLAG__AUTHORITY | NGHTTP2_HTTP_FLAG_HOST)) == 0) {\n       return -1;\n     }\n+    if ((stream->http_flags & NGHTTP2_HTTP_FLAG__PROTOCOL) &&\n+        ((stream->http_flags & NGHTTP2_HTTP_FLAG_METH_CONNECT) == 0 ||\n+         (stream->http_flags & NGHTTP2_HTTP_FLAG__AUTHORITY) == 0)) {\n+      return -1;\n+    }\n     if (!check_path(stream)) {\n       return -1;\n     }"
        },
        {
            "sha": "ef4932af4e4f58635a940f0edd4b44de9bf0639c",
            "filename": "deps/nghttp2/lib/nghttp2_session.c",
            "status": "modified",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_session.c",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_session.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fnghttp2_session.c?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -4361,6 +4361,9 @@ int nghttp2_session_update_local_settings(nghttp2_session *session,\n     case NGHTTP2_SETTINGS_MAX_HEADER_LIST_SIZE:\n       session->local_settings.max_header_list_size = iv[i].value;\n       break;\n+    case NGHTTP2_SETTINGS_ENABLE_CONNECT_PROTOCOL:\n+      session->local_settings.enable_connect_protocol = iv[i].value;\n+      break;\n     }\n   }\n \n@@ -4499,6 +4502,26 @@ int nghttp2_session_on_settings_received(nghttp2_session *session,\n \n       session->remote_settings.max_header_list_size = entry->value;\n \n+      break;\n+    case NGHTTP2_SETTINGS_ENABLE_CONNECT_PROTOCOL:\n+\n+      if (entry->value != 0 && entry->value != 1) {\n+        return session_handle_invalid_connection(\n+            session, frame, NGHTTP2_ERR_PROTO,\n+            \"SETTINGS: invalid SETTINGS_ENABLE_CONNECT_PROTOCOL\");\n+      }\n+\n+      if (!session->server &&\n+          session->remote_settings.enable_connect_protocol &&\n+          entry->value == 0) {\n+        return session_handle_invalid_connection(\n+            session, frame, NGHTTP2_ERR_PROTO,\n+            \"SETTINGS: server attempted to disable \"\n+            \"SETTINGS_ENABLE_CONNECT_PROTOCOL\");\n+      }\n+\n+      session->remote_settings.enable_connect_protocol = entry->value;\n+\n       break;\n     }\n   }\n@@ -5250,6 +5273,7 @@ static void inbound_frame_set_settings_entry(nghttp2_inbound_frame *iframe) {\n   case NGHTTP2_SETTINGS_INITIAL_WINDOW_SIZE:\n   case NGHTTP2_SETTINGS_MAX_FRAME_SIZE:\n   case NGHTTP2_SETTINGS_MAX_HEADER_LIST_SIZE:\n+  case NGHTTP2_SETTINGS_ENABLE_CONNECT_PROTOCOL:\n     break;\n   default:\n     DEBUGF(\"recv: unknown settings id=0x%02x\\n\", iv.settings_id);\n@@ -7052,6 +7076,13 @@ int nghttp2_session_add_settings(nghttp2_session *session, uint8_t flags,\n     }\n   }\n \n+  for (i = niv; i > 0; --i) {\n+    if (iv[i - 1].settings_id == NGHTTP2_SETTINGS_ENABLE_CONNECT_PROTOCOL) {\n+      session->pending_enable_connect_protocol = (uint8_t)iv[i - 1].value;\n+      break;\n+    }\n+  }\n+\n   return 0;\n }\n \n@@ -7360,6 +7391,8 @@ uint32_t nghttp2_session_get_remote_settings(nghttp2_session *session,\n     return session->remote_settings.max_frame_size;\n   case NGHTTP2_SETTINGS_MAX_HEADER_LIST_SIZE:\n     return session->remote_settings.max_header_list_size;\n+  case NGHTTP2_SETTINGS_ENABLE_CONNECT_PROTOCOL:\n+    return session->remote_settings.enable_connect_protocol;\n   }\n \n   assert(0);\n@@ -7381,6 +7414,8 @@ uint32_t nghttp2_session_get_local_settings(nghttp2_session *session,\n     return session->local_settings.max_frame_size;\n   case NGHTTP2_SETTINGS_MAX_HEADER_LIST_SIZE:\n     return session->local_settings.max_header_list_size;\n+  case NGHTTP2_SETTINGS_ENABLE_CONNECT_PROTOCOL:\n+    return session->local_settings.enable_connect_protocol;\n   }\n \n   assert(0);"
        },
        {
            "sha": "40a8865a04b12f71c78e70f083da43043a0a1875",
            "filename": "deps/nghttp2/lib/nghttp2_session.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_session.h",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_session.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fnghttp2_session.h?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -164,6 +164,7 @@ typedef struct {\n   uint32_t initial_window_size;\n   uint32_t max_frame_size;\n   uint32_t max_header_list_size;\n+  uint32_t enable_connect_protocol;\n } nghttp2_settings_storage;\n \n typedef enum {\n@@ -321,6 +322,9 @@ struct nghttp2_session {\n   /* Unacked local ENABLE_PUSH value.  We use this to refuse\n      PUSH_PROMISE before SETTINGS ACK is received. */\n   uint8_t pending_enable_push;\n+  /* Unacked local ENABLE_CONNECT_PROTOCOL value.  We use this to\n+     accept :protocol header field before SETTINGS_ACK is received. */\n+  uint8_t pending_enable_connect_protocol;\n   /* Nonzero if the session is server side. */\n   uint8_t server;\n   /* Flags indicating GOAWAY is sent and/or received. The flags are"
        },
        {
            "sha": "fb8dc14d67be6d1e032f7a9a3d1a2baa2201d2c2",
            "filename": "deps/nghttp2/lib/nghttp2_stream.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_stream.h",
            "raw_url": "https://github.com/nodejs/node/raw/8290015d0a2f1a5d5947c31d6187b865fbe2ac9f/deps%2Fnghttp2%2Flib%2Fnghttp2_stream.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fnghttp2%2Flib%2Fnghttp2_stream.h?ref=8290015d0a2f1a5d5947c31d6187b865fbe2ac9f",
            "patch": "@@ -130,7 +130,8 @@ typedef enum {\n   /* \"http\" or \"https\" scheme */\n   NGHTTP2_HTTP_FLAG_SCHEME_HTTP = 1 << 13,\n   /* set if final response is expected */\n-  NGHTTP2_HTTP_FLAG_EXPECT_FINAL_RESPONSE = 1 << 14\n+  NGHTTP2_HTTP_FLAG_EXPECT_FINAL_RESPONSE = 1 << 14,\n+  NGHTTP2_HTTP_FLAG__PROTOCOL = 1 << 15,\n } nghttp2_http_flag;\n \n struct nghttp2_stream {"
        }
    ],
    "stats": {
        "total": 122,
        "additions": 96,
        "deletions": 26
    }
}