{
    "author": "joyeecheung",
    "message": "test: use WPT runner to run encoding tests\n\nPR-URL: https://github.com/nodejs/node/pull/25321\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "16dfa0f3097d9d30632e257ba588dce4b555d244",
    "files": [
        {
            "sha": "5cf387e554844ed46fcdd525126fdf58c11e48f7",
            "filename": "test/wpt/status/encoding.json",
            "status": "modified",
            "additions": 51,
            "deletions": 1,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/16dfa0f3097d9d30632e257ba588dce4b555d244/test%2Fwpt%2Fstatus%2Fencoding.json",
            "raw_url": "https://github.com/nodejs/node/raw/16dfa0f3097d9d30632e257ba588dce4b555d244/test%2Fwpt%2Fstatus%2Fencoding.json",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fwpt%2Fstatus%2Fencoding.json?ref=16dfa0f3097d9d30632e257ba588dce4b555d244",
            "patch": "@@ -1 +1,51 @@\n-{}\n+{\n+  \"api-basics.any.js\": {\n+    \"requires\": [\"small-icu\"]\n+  },\n+  \"textdecoder-fatal-streaming.any.js\": {\n+    \"requires\": [\"small-icu\"]\n+  },\n+  \"textdecoder-fatal.any.js\": {\n+    \"requires\": [\"small-icu\"]\n+  },\n+  \"textdecoder-ignorebom.any.js\": {\n+    \"requires\": [\"small-icu\"]\n+  },\n+  \"textdecoder-streaming.any.js\": {\n+    \"requires\": [\"small-icu\"]\n+  },\n+  \"textdecoder-utf16-surrogates.any.js\": {\n+    \"requires\": [\"small-icu\"]\n+  },\n+  \"iso-2022-jp-decoder.any.js\": {\n+    \"requires\": [\"full-icu\"],\n+    \"fail\": \"iso-2022-jp decoder state handling bug: https://encoding.spec.whatwg.org/#iso-2022-jp-decoder\"\n+  },\n+  \"textdecoder-byte-order-marks.any.js\": {\n+    \"fail\": \"Mismatching BOM should not be ignored\"\n+  },\n+  \"textdecoder-copy.any.js\": {\n+    \"fail\": \"Should not have output BOM: https://encoding.spec.whatwg.org/#concept-td-serialize\"\n+  },\n+  \"textdecoder-fatal-single-byte.any.js\": {\n+    \"requires\": [\"full-icu\"],\n+    \"fail\": \"The iso-8859-16 encoding is not supported\"\n+  },\n+  \"textdecoder-labels.any.js\": {\n+    \"requires\": [\"full-icu\"],\n+    \"fail\": \"The iso-8859-16 encoding is not supported\"\n+  },\n+  \"textencoder-constructor-non-utf.any.js\": {\n+    \"requires\": [\"full-icu\"],\n+    \"fail\": \"The iso-8859-16 encoding is not supported\"\n+  },\n+  \"idlharness.any.js\": {\n+    \"fail\": \"No implementation of TextDecoderStream and TextEncoderStream\"\n+  },\n+  \"replacement-encodings.any.js\": {\n+    \"skip\": \"decoding-helpers.js needs XMLHttpRequest\"\n+  },\n+  \"unsupported-encodings.any.js\": {\n+    \"skip\": \"decoding-helpers.js needs XMLHttpRequest\"\n+  }\n+}"
        },
        {
            "sha": "f868a7bac3998789bed5b2c83f9c81db93c2ad99",
            "filename": "test/wpt/test-encoding.js",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/16dfa0f3097d9d30632e257ba588dce4b555d244/test%2Fwpt%2Ftest-encoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/16dfa0f3097d9d30632e257ba588dce4b555d244/test%2Fwpt%2Ftest-encoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fwpt%2Ftest-encoding.js?ref=16dfa0f3097d9d30632e257ba588dce4b555d244",
            "patch": "@@ -0,0 +1,12 @@\n+'use strict';\n+\n+// Flags: --expose-internals\n+\n+require('../common');\n+const { WPTRunner } = require('../common/wpt');\n+const runner = new WPTRunner('encoding');\n+\n+// Copy global descriptors from the global object\n+runner.copyGlobalsFromObject(global, ['TextDecoder', 'TextEncoder']);\n+\n+runner.runJsTests();"
        }
    ],
    "stats": {
        "total": 64,
        "additions": 63,
        "deletions": 1
    }
}