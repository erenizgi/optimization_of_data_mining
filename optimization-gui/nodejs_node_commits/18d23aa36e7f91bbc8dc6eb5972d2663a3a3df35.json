{
    "author": "joyeecheung",
    "message": "src: do not redefine private for GenDebugSymbols\n\nRedefining private breaks any private inheritance in the\nincluded files. We can simply declare GenDebugSymbols()\nas friends in related classes to gain the access that we need.\n\nPR-URL: https://github.com/nodejs/node/pull/18653\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35",
    "files": [
        {
            "sha": "965683d029e43e26b73cf5b5e7eb0e7b1ee3b029",
            "filename": "src/base_object.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Fbase_object.h",
            "raw_url": "https://github.com/nodejs/node/raw/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Fbase_object.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fbase_object.h?ref=18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35",
            "patch": "@@ -70,6 +70,7 @@ class BaseObject {\n   // offsets and generate debug symbols for BaseObject, which assumes that the\n   // position of members in memory are predictable. For more information please\n   // refer to `doc/guides/node-postmortem-support.md`\n+  friend int GenDebugSymbols();\n   v8::Persistent<v8::Object> persistent_handle_;\n   Environment* env_;\n };"
        },
        {
            "sha": "0c3cfe2cedcf2a79fa2cd48c0a9a7f3c43b33f6c",
            "filename": "src/env.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Fenv.h",
            "raw_url": "https://github.com/nodejs/node/raw/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Fenv.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.h?ref=18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35",
            "patch": "@@ -782,6 +782,7 @@ class Environment {\n   // symbols for Environment, which assumes that the position of members in\n   // memory are predictable. For more information please refer to\n   // `doc/guides/node-postmortem-support.md`\n+  friend int GenDebugSymbols();\n   HandleWrapQueue handle_wrap_queue_;\n   ReqWrapQueue req_wrap_queue_;\n   ListHead<HandleCleanup,"
        },
        {
            "sha": "19fd36891a2fed45ab95cb05358cb5f697a48c4b",
            "filename": "src/handle_wrap.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Fhandle_wrap.h",
            "raw_url": "https://github.com/nodejs/node/raw/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Fhandle_wrap.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fhandle_wrap.h?ref=18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35",
            "patch": "@@ -81,11 +81,13 @@ class HandleWrap : public AsyncWrap {\n   friend class Environment;\n   friend void GetActiveHandles(const v8::FunctionCallbackInfo<v8::Value>&);\n   static void OnClose(uv_handle_t* handle);\n+\n   // handle_wrap_queue_ needs to be at a fixed offset from the start of the\n   // class because it is used by src/node_postmortem_metadata.cc to calculate\n   // offsets and generate debug symbols for HandleWrap, which assumes that the\n   // position of members in memory are predictable. For more information please\n   // refer to `doc/guides/node-postmortem-support.md`\n+  friend int GenDebugSymbols();\n   ListNode<HandleWrap> handle_wrap_queue_;\n   enum { kInitialized, kClosing, kClosingWithCallback, kClosed } state_;\n   uv_handle_t* const handle_;"
        },
        {
            "sha": "b335e7fbf818c6ab4fec5e4be02ca0e394bc8209",
            "filename": "src/node_postmortem_metadata.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 54,
            "changes": 54,
            "blob_url": "https://github.com/nodejs/node/blob/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Fnode_postmortem_metadata.cc",
            "raw_url": "https://github.com/nodejs/node/raw/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Fnode_postmortem_metadata.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_postmortem_metadata.cc?ref=18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35",
            "patch": "@@ -1,57 +1,3 @@\n-// Need to import standard headers before redefining private, otherwise it\n-// won't compile.\n-#include <algorithm>\n-#include <array>\n-#include <atomic>\n-#include <bitset>\n-#include <cctype>\n-#include <climits>\n-#include <cmath>\n-#include <cstdarg>\n-#include <cstddef>\n-#include <cstdint>\n-#include <cstdio>\n-#include <cstdlib>\n-#include <cstring>\n-#include <ctime>\n-#include <deque>\n-#include <exception>\n-#include <forward_list>\n-#include <fstream>\n-#include <functional>\n-#include <iomanip>\n-#include <iosfwd>\n-#include <iostream>\n-#include <istream>\n-#include <iterator>\n-#include <limits>\n-#include <list>\n-#include <map>\n-#include <memory>\n-#include <new>\n-#include <ostream>\n-#include <queue>\n-#include <set>\n-#include <sstream>\n-#include <stack>\n-#include <streambuf>\n-#include <string>\n-#include <tuple>\n-#include <type_traits>\n-#include <typeinfo>\n-#include <unordered_map>\n-#include <unordered_set>\n-#include <utility>\n-#include <vector>\n-\n-namespace node {\n-// Forward declaration needed before redefining private.\n-int GenDebugSymbols();\n-}  // namespace node\n-\n-\n-#define private friend int GenDebugSymbols(); private\n-\n #include \"env.h\"\n #include \"base_object-inl.h\"\n #include \"handle_wrap.h\""
        },
        {
            "sha": "ddd0840aad2ab6034c37d2900232162d62e3a884",
            "filename": "src/req_wrap.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Freq_wrap.h",
            "raw_url": "https://github.com/nodejs/node/raw/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Freq_wrap.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Freq_wrap.h?ref=18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35",
            "patch": "@@ -22,6 +22,7 @@ class ReqWrap : public AsyncWrap {\n \n  private:\n   friend class Environment;\n+  friend int GenDebugSymbols();\n   ListNode<ReqWrap> req_wrap_queue_;\n \n  protected:"
        },
        {
            "sha": "21c566a4ca6cd62f64cb552c5a8397c86f3baa87",
            "filename": "src/util.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Futil.h",
            "raw_url": "https://github.com/nodejs/node/raw/18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35/src%2Futil.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Futil.h?ref=18d23aa36e7f91bbc8dc6eb5972d2663a3a3df35",
            "patch": "@@ -159,6 +159,7 @@ class ListNode {\n \n  private:\n   template <typename U, ListNode<U> (U::*M)> friend class ListHead;\n+  friend int GenDebugSymbols();\n   ListNode* prev_;\n   ListNode* next_;\n   DISALLOW_COPY_AND_ASSIGN(ListNode);\n@@ -189,6 +190,7 @@ class ListHead {\n   inline Iterator end() const;\n \n  private:\n+  friend int GenDebugSymbols();\n   ListNode<T> head_;\n   DISALLOW_COPY_AND_ASSIGN(ListHead);\n };"
        }
    ],
    "stats": {
        "total": 61,
        "additions": 7,
        "deletions": 54
    }
}