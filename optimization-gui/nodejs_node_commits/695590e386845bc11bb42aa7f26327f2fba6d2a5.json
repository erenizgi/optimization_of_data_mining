{
    "author": "danbev",
    "message": "test: fix compiler warnings in callback-scope\n\nCurrently there are two compiler warnings generated from the addons test\ncallback-scope:\n\n../binding.cc:44:10:\nwarning: 'Resolve' is deprecated [-Wdeprecated-declarations]\n  local->Resolve(v8::Undefined(isolate));\n         ^\n../../../../deps/v8/include/v8.h:3893:45:\nnote: 'Resolve' has been explicitly marked deprecated here\nV8_DEPRECATED(\"Use maybe version\", void Resolve(Local<Value> value));\n         ^\n\n../binding.cc:52:54:\nwarning: 'New' is deprecated [-Wdeprecated-declarations]\n    persistent.Reset(isolate, v8::Promise::Resolver::New(isolate));\n                                                     ^\n../../../../deps/v8/include/v8.h:3880:42:\nnote: 'New' has been explicitly marked deprecated here\nLocal<Resolver> New(Isolate* isolate));\n\nThis commit updates the test to use non-deprecated functions.\n\nPR-URL: https://github.com/nodejs/node/pull/19252\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>",
    "sha": "695590e386845bc11bb42aa7f26327f2fba6d2a5",
    "files": [
        {
            "sha": "94d5ec91d7f3a28e4f9bb0b1357b287229071329",
            "filename": "test/addons/callback-scope/binding.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/695590e386845bc11bb42aa7f26327f2fba6d2a5/test%2Faddons%2Fcallback-scope%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/695590e386845bc11bb42aa7f26327f2fba6d2a5/test%2Faddons%2Fcallback-scope%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fcallback-scope%2Fbinding.cc?ref=695590e386845bc11bb42aa7f26327f2fba6d2a5",
            "patch": "@@ -41,15 +41,17 @@ static void Callback(uv_work_t* req, int ignored) {\n \n   v8::Local<v8::Promise::Resolver> local =\n       v8::Local<v8::Promise::Resolver>::New(isolate, persistent);\n-  local->Resolve(v8::Undefined(isolate));\n+  local->Resolve(isolate->GetCurrentContext(),\n+                 v8::Undefined(isolate)).ToChecked();\n   delete req;\n }\n \n static void TestResolveAsync(const v8::FunctionCallbackInfo<v8::Value>& args) {\n   v8::Isolate* isolate = args.GetIsolate();\n \n   if (persistent.IsEmpty()) {\n-    persistent.Reset(isolate, v8::Promise::Resolver::New(isolate));\n+    persistent.Reset(isolate, v8::Promise::Resolver::New(\n+        isolate->GetCurrentContext()).ToLocalChecked());\n \n     uv_work_t* req = new uv_work_t;\n "
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}