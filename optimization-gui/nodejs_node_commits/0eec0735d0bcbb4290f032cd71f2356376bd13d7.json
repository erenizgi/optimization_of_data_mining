{
    "author": "targos",
    "message": "doc: update internal errors documentation\n\nPR-URL: https://github.com/nodejs/node/pull/19203\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>",
    "sha": "0eec0735d0bcbb4290f032cd71f2356376bd13d7",
    "files": [
        {
            "sha": "edc5f0f12e212c718d4873c7dc88becfe887c3bc",
            "filename": "CPP_STYLE_GUIDE.md",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0eec0735d0bcbb4290f032cd71f2356376bd13d7/CPP_STYLE_GUIDE.md",
            "raw_url": "https://github.com/nodejs/node/raw/0eec0735d0bcbb4290f032cd71f2356376bd13d7/CPP_STYLE_GUIDE.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/CPP_STYLE_GUIDE.md?ref=0eec0735d0bcbb4290f032cd71f2356376bd13d7",
            "patch": "@@ -256,13 +256,13 @@ env->SetMethod(target, \"foo\", Foo);\n exports.foo = function(str) {\n   // Prefer doing the type-checks in JavaScript\n   if (typeof str !== 'string') {\n-    throw new errors.TypeError('ERR_INVALID_ARG_TYPE', 'str', 'string');\n+    throw new errors.codes.ERR_INVALID_ARG_TYPE('str', 'string');\n   }\n \n   const ctx = {};\n   const result = binding.foo(str, ctx);\n   if (ctx.code !== undefined) {\n-    throw new errors.Error('ERR_ERROR_NAME', ctx.code);\n+    throw new errors.codes.ERR_ERROR_NAME(ctx.code);\n   }\n   return result;\n };"
        },
        {
            "sha": "d22fc68e0f34c46b344b5c7c424ecf640ef14a5a",
            "filename": "doc/guides/using-internal-errors.md",
            "status": "modified",
            "additions": 27,
            "deletions": 66,
            "changes": 93,
            "blob_url": "https://github.com/nodejs/node/blob/0eec0735d0bcbb4290f032cd71f2356376bd13d7/doc%2Fguides%2Fusing-internal-errors.md",
            "raw_url": "https://github.com/nodejs/node/raw/0eec0735d0bcbb4290f032cd71f2356376bd13d7/doc%2Fguides%2Fusing-internal-errors.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fguides%2Fusing-internal-errors.md?ref=0eec0735d0bcbb4290f032cd71f2356376bd13d7",
            "patch": "@@ -19,8 +19,8 @@ considered a `semver-major` change.\n \n ## Using internal/errors.js\n \n-The `internal/errors` module exposes three custom `Error` classes that\n-are intended to replace existing `Error` objects within the Node.js source.\n+The `internal/errors` module exposes all custom errors as subclasses of the\n+builtin errors. After being added, an error can be found in the `codes` object.\n \n For instance, an existing `Error` such as:\n \n@@ -32,15 +32,15 @@ Can be replaced by first adding a new error key into the `internal/errors.js`\n file:\n \n ```js\n-E('FOO', 'Expected string received %s');\n+E('FOO', 'Expected string received %s', TypeError);\n ```\n \n Then replacing the existing `new TypeError` in the code:\n \n ```js\n-const errors = require('internal/errors');\n+const { FOO } = require('internal/errors').codes;\n // ...\n-const err = new errors.TypeError('FOO', type);\n+const err = new FOO(type);\n ```\n \n ## Adding new errors\n@@ -49,16 +49,33 @@ New static error codes are added by modifying the `internal/errors.js` file\n and appending the new error codes to the end using the utility `E()` method.\n \n ```js\n-E('EXAMPLE_KEY1', 'This is the error value');\n-E('EXAMPLE_KEY2', (a, b) => `${a} ${b}`);\n+E('EXAMPLE_KEY1', 'This is the error value', TypeError);\n+E('EXAMPLE_KEY2', (a, b) => `${a} ${b}`, RangeError);\n ```\n \n The first argument passed to `E()` is the static identifier. The second\n argument is either a String with optional `util.format()` style replacement\n tags (e.g. `%s`, `%d`), or a function returning a String. The optional\n additional arguments passed to the `errors.message()` function (which is\n used by the `errors.Error`, `errors.TypeError` and `errors.RangeError` classes),\n-will be used to format the error message.\n+will be used to format the error message. The third argument is the base class\n+that the new error will extend.\n+\n+It is possible to create multiple derived\n+classes by providing additional arguments. The other ones will be exposed as\n+properties of the main class:\n+\n+<!-- eslint-disable no-unreachable -->\n+```js\n+E('EXAMPLE_KEY', 'Error message', TypeError, RangeError);\n+\n+// In another module\n+const { EXAMPLE_KEY } = require('internal/errors').codes;\n+// TypeError\n+throw new EXAMPLE_KEY();\n+// RangeError\n+throw new EXAMPLE_KEY.RangeError();\n+```\n \n ## Documenting new errors\n \n@@ -115,65 +132,9 @@ likely be required.\n \n ## API\n \n-### Class: errors.Error(key[, args...])\n-\n-* `key` {string} The static error identifier\n-* `args...` {any} Zero or more optional arguments\n-\n-```js\n-const errors = require('internal/errors');\n-\n-const arg1 = 'foo';\n-const arg2 = 'bar';\n-const myError = new errors.Error('KEY', arg1, arg2);\n-throw myError;\n-```\n-\n-The specific error message for the `myError` instance will depend on the\n-associated value of `KEY` (see \"Adding new errors\").\n-\n-The `myError` object will have a `code` property equal to the `key` and a\n-`name` property equal to `` `Error [${key}]` ``.\n-\n-### Class: errors.TypeError(key[, args...])\n-\n-* `key` {string} The static error identifier\n-* `args...` {any} Zero or more optional arguments\n-\n-```js\n-const errors = require('internal/errors');\n-\n-const arg1 = 'foo';\n-const arg2 = 'bar';\n-const myError = new errors.TypeError('KEY', arg1, arg2);\n-throw myError;\n-```\n-\n-The specific error message for the `myError` instance will depend on the\n-associated value of `KEY` (see \"Adding new errors\").\n-\n-The `myError` object will have a `code` property equal to the `key` and a\n-`name` property equal to `` `TypeError [${key}]` ``.\n-\n-### Class: errors.RangeError(key[, args...])\n-\n-* `key` {string} The static error identifier\n-* `args...` {any} Zero or more optional arguments\n-\n-```js\n-const errors = require('internal/errors');\n-\n-const arg1 = 'foo';\n-const arg2 = 'bar';\n-const myError = new errors.RangeError('KEY', arg1, arg2);\n-throw myError;\n-```\n-\n-The specific error message for the `myError` instance will depend on the\n-associated value of `KEY` (see \"Adding new errors\").\n+### Object: errors.codes\n \n-The `myError` object will have a `code` property equal to the `key` and a\n-`name` property equal to `` `RangeError [${key}]` ``.\n+Exposes all internal error classes to be used by Node.js APIs.\n \n ### Method: errors.message(key, args)\n "
        }
    ],
    "stats": {
        "total": 97,
        "additions": 29,
        "deletions": 68
    }
}