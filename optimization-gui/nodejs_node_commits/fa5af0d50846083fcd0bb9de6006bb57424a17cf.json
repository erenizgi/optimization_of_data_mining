{
    "author": "Trott",
    "message": "test: refactor test-fs-watch-non-recursive\n\nThe test was duplicating some functionality in the `tmpdir` module.\n\nPR-URL: https://github.com/nodejs/node/pull/25386\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "fa5af0d50846083fcd0bb9de6006bb57424a17cf",
    "files": [
        {
            "sha": "b9a6cd6dcfb1d00eeb9b6d9c5a8a9e2e9da468e8",
            "filename": "test/pummel/test-fs-watch-non-recursive.js",
            "status": "modified",
            "additions": 2,
            "deletions": 8,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/fa5af0d50846083fcd0bb9de6006bb57424a17cf/test%2Fpummel%2Ftest-fs-watch-non-recursive.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa5af0d50846083fcd0bb9de6006bb57424a17cf/test%2Fpummel%2Ftest-fs-watch-non-recursive.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-fs-watch-non-recursive.js?ref=fa5af0d50846083fcd0bb9de6006bb57424a17cf",
            "patch": "@@ -25,19 +25,13 @@ const path = require('path');\n const fs = require('fs');\n \n const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const testDir = tmpdir.path;\n const testsubdir = path.join(testDir, 'testsubdir');\n const filepath = path.join(testsubdir, 'watch.txt');\n \n-function cleanup() {\n-  try { fs.unlinkSync(filepath); } catch { }\n-  try { fs.rmdirSync(testsubdir); } catch { }\n-}\n-process.on('exit', cleanup);\n-cleanup();\n-\n-try { fs.mkdirSync(testsubdir, 0o700); } catch {}\n+fs.mkdirSync(testsubdir, 0o700);\n \n // Need a grace period, else the mkdirSync() above fires off an event.\n setTimeout(function() {"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 2,
        "deletions": 8
    }
}