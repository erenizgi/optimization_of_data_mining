{
    "author": "TimothyGu",
    "message": "Revert \"url: make the context non-enumerable\"\n\nThis reverts commit 5e1bf058f4906c0a49c34c6a1353d0b34784c80a, as it\ncauses major performance regressions during object construction.\n\nRefs: https://github.com/nodejs/node/pull/24218\n\nPR-URL: https://github.com/nodejs/node/pull/24495\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\nReviewed-By: Daijiro Wachi <daijiro.wachi@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "e1438025edaf18d490548ba0f75f7ba702493c22",
    "files": [
        {
            "sha": "310e9ff9e2d8274c318b2e6cb8245d515c19eefc",
            "filename": "lib/internal/url.js",
            "status": "modified",
            "additions": 2,
            "deletions": 13,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/e1438025edaf18d490548ba0f75f7ba702493c22/lib%2Finternal%2Furl.js",
            "raw_url": "https://github.com/nodejs/node/raw/e1438025edaf18d490548ba0f75f7ba702493c22/lib%2Finternal%2Furl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Furl.js?ref=e1438025edaf18d490548ba0f75f7ba702493c22",
            "patch": "@@ -246,14 +246,7 @@ function onParseError(flags, input) {\n // Reused by URL constructor and URL#href setter.\n function parse(url, input, base) {\n   const base_context = base ? base[context] : undefined;\n-  // In the URL#href setter\n-  if (!url[context]) {\n-    Object.defineProperty(url, context, {\n-      enumerable: false,\n-      configurable: false,\n-      value: new URLContext()\n-    });\n-  }\n+  url[context] = new URLContext();\n   _parse(input.trim(), -1, base_context, undefined,\n          onParseComplete.bind(url), onParseError);\n }\n@@ -1381,11 +1374,7 @@ function toPathIfFileURL(fileURLOrPath) {\n }\n \n function NativeURL(ctx) {\n-  Object.defineProperty(this, context, {\n-    enumerable: false,\n-    configurable: false,\n-    value: ctx\n-  });\n+  this[context] = ctx;\n }\n NativeURL.prototype = URL.prototype;\n "
        },
        {
            "sha": "f24a47b6d5c8f047c9f1f6e1fb5950dd295625d6",
            "filename": "test/parallel/test-whatwg-url-custom-no-enumerable-context.js",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/e9de43549843da9f4f081cce917945878967df7e/test%2Fparallel%2Ftest-whatwg-url-custom-no-enumerable-context.js",
            "raw_url": "https://github.com/nodejs/node/raw/e9de43549843da9f4f081cce917945878967df7e/test%2Fparallel%2Ftest-whatwg-url-custom-no-enumerable-context.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-whatwg-url-custom-no-enumerable-context.js?ref=e9de43549843da9f4f081cce917945878967df7e",
            "patch": "@@ -1,14 +0,0 @@\n-'use strict';\n-// This tests that the context of URL objects are not\n-// enumerable and thus considered by assert libraries.\n-// See https://github.com/nodejs/node/issues/24211\n-\n-// Tests below are not from WPT.\n-\n-require('../common');\n-const assert = require('assert');\n-\n-assert.deepStrictEqual(\n-  new URL('./foo', 'https://example.com/'),\n-  new URL('https://example.com/foo')\n-);"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 2,
        "deletions": 27
    }
}