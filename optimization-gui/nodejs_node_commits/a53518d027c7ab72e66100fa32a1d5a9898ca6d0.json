{
    "author": "Trott",
    "message": "test: set umask for tests\n\nhttps://github.com/nodejs/node/pull/25213 proposes setting umask in the\nPython test runner to avoid spurious test failures when running from a\nshell with a restrictive umask. This is a good idea, but will only fix\nthe issue for tests run with the Python runner. Set it in\n`common/index.js` as well so that it fixes it even when tests are run\ndirectly with a `node` binary, bypassing the Python test runner.\n\nPR-URL: https://github.com/nodejs/node/pull/25229\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "a53518d027c7ab72e66100fa32a1d5a9898ca6d0",
    "files": [
        {
            "sha": "eff5f47e8977cd6c253db5e863e9764cebcf088e",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/a53518d027c7ab72e66100fa32a1d5a9898ca6d0/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/a53518d027c7ab72e66100fa32a1d5a9898ca6d0/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=a53518d027c7ab72e66100fa32a1d5a9898ca6d0",
            "patch": "@@ -34,6 +34,14 @@ const {\n   hasIntl\n } = process.binding('config');\n \n+// Some tests assume a umask of 0o022 so set that up front. Tests that need a\n+// different umask will set it themselves.\n+//\n+// process.umask() is not available in workers so we need to check for its\n+// existence.\n+if (process.umask)\n+  process.umask(0o022);\n+\n const noop = () => {};\n \n const hasCrypto = Boolean(process.versions.openssl);"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 8,
        "deletions": 0
    }
}