{
    "author": "Trott",
    "message": "http2: replace unreachable error with assertion\n\n\"That particular `emit('error', ...)` is largely defensively coded and\nshould not ever actually happen.\" Sounds like an assertion rather than\nan error event. The code in question has no test coverage because it is\nbelieved to be unreachable.\n\nFixes: https://github.com/nodejs/node/issues/20673\n\nPR-URL: https://github.com/nodejs/node/pull/24407\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "566a694bbc67219d8765921c9b7d494b8a18a50c",
    "files": [
        {
            "sha": "145e77410494b604a12d464a5b8e4e635aa5f633",
            "filename": "lib/internal/http2/compat.js",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/566a694bbc67219d8765921c9b7d494b8a18a50c/lib%2Finternal%2Fhttp2%2Fcompat.js",
            "raw_url": "https://github.com/nodejs/node/raw/566a694bbc67219d8765921c9b7d494b8a18a50c/lib%2Finternal%2Fhttp2%2Fcompat.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fhttp2%2Fcompat.js?ref=566a694bbc67219d8765921c9b7d494b8a18a50c",
            "patch": "@@ -1,5 +1,6 @@\n 'use strict';\n \n+const assert = require('assert');\n const Stream = require('stream');\n const Readable = Stream.Readable;\n const binding = internalBinding('http2');\n@@ -331,15 +332,12 @@ class Http2ServerRequest extends Readable {\n \n   _read(nread) {\n     const state = this[kState];\n-    if (!state.closed) {\n-      if (!state.didRead) {\n-        state.didRead = true;\n-        this[kStream].on('data', onStreamData);\n-      } else {\n-        process.nextTick(resumeStream, this[kStream]);\n-      }\n+    assert(!state.closed);\n+    if (!state.didRead) {\n+      state.didRead = true;\n+      this[kStream].on('data', onStreamData);\n     } else {\n-      this.emit('error', new ERR_HTTP2_INVALID_STREAM());\n+      process.nextTick(resumeStream, this[kStream]);\n     }\n   }\n "
        }
    ],
    "stats": {
        "total": 14,
        "additions": 6,
        "deletions": 8
    }
}