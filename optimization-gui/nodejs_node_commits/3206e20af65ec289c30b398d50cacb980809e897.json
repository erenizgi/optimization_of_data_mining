{
    "author": "addaleax",
    "message": "test: speed up parallel/test-tls-session-cache\n\nThis test had some unnecessary timeouts that made it run for a\nmuch longer time than necessary (about 9 s rather than 0.2 s).\n\nPR-URL: https://github.com/nodejs/node/pull/18424\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "3206e20af65ec289c30b398d50cacb980809e897",
    "files": [
        {
            "sha": "7778dd031008571c71f233480e612c4b97e1fb24",
            "filename": "test/parallel/test-tls-session-cache.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/3206e20af65ec289c30b398d50cacb980809e897/test%2Fparallel%2Ftest-tls-session-cache.js",
            "raw_url": "https://github.com/nodejs/node/raw/3206e20af65ec289c30b398d50cacb980809e897/test%2Fparallel%2Ftest-tls-session-cache.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-session-cache.js?ref=3206e20af65ec289c30b398d50cacb980809e897",
            "patch": "@@ -69,11 +69,11 @@ function doTest(testOptions, callback) {\n   server.on('newSession', function(id, data, cb) {\n     ++newSessionCount;\n     // Emulate asynchronous store\n-    setTimeout(function() {\n+    setImmediate(() => {\n       assert.ok(!session);\n       session = { id, data };\n       cb();\n-    }, 1000);\n+    });\n   });\n   server.on('resumeSession', function(id, callback) {\n     ++resumeCount;\n@@ -89,9 +89,9 @@ function doTest(testOptions, callback) {\n     }\n \n     // Just to check that async really works there\n-    setTimeout(function() {\n+    setImmediate(() => {\n       callback(null, data);\n-    }, 100);\n+    });\n   });\n \n   server.listen(0, function() {\n@@ -132,7 +132,7 @@ function doTest(testOptions, callback) {\n         }\n         assert.strictEqual(code, 0);\n         server.close(common.mustCall(function() {\n-          setTimeout(callback, 100);\n+          setImmediate(callback);\n         }));\n       }));\n     }"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 5,
        "deletions": 5
    }
}