{
    "author": "Trott",
    "message": "test: refactor cluster-net-listen-relative-path\n\nRefactor test-cluster-net-listen-relative-path:\n\n* Use arrow funcitons for callbacks.\n* Move skip-test code closer to start of file.\n* Use assert.ok() where appropriate.\n* Capitalize and punctuate comments.\n\nPR-URL: https://github.com/nodejs/node/pull/21863\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Jon Moss <me@jonathanmoss.me>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "c3f8dd6f98328a9a47814f1856bc0914859c6e19",
    "files": [
        {
            "sha": "0e1c3f7cf7cf4adc3dc7953a7618dc6e0b691a38",
            "filename": "test/parallel/test-cluster-net-listen-relative-path.js",
            "status": "modified",
            "additions": 17,
            "deletions": 19,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/c3f8dd6f98328a9a47814f1856bc0914859c6e19/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/c3f8dd6f98328a9a47814f1856bc0914859c6e19/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js?ref=c3f8dd6f98328a9a47814f1856bc0914859c6e19",
            "patch": "@@ -1,48 +1,46 @@\n 'use strict';\n const common = require('../common');\n-const assert = require('assert');\n-const cluster = require('cluster');\n-const net = require('net');\n-const path = require('path');\n-const fs = require('fs');\n-\n-const tmpdir = require('../common/tmpdir');\n \n if (common.isWindows)\n   common.skip('On Windows named pipes live in their own ' +\n               'filesystem and don\\'t have a ~100 byte limit');\n if (!common.isMainThread)\n   common.skip('process.chdir is not available in Workers');\n \n+const assert = require('assert');\n+const cluster = require('cluster');\n+const fs = require('fs');\n+const net = require('net');\n+const path = require('path');\n+\n+const tmpdir = require('../common/tmpdir');\n+\n // Choose a socket name such that the absolute path would exceed 100 bytes.\n const socketDir = './unix-socket-dir';\n const socketName = 'A'.repeat(100 - socketDir.length - 1);\n \n-// Make sure we're not in a weird environment\n-assert.strictEqual(path.resolve(socketDir, socketName).length > 100, true,\n-                   'absolute socket path should be longer than 100 bytes');\n+// Make sure we're not in a weird environment.\n+assert.ok(path.resolve(socketDir, socketName).length > 100,\n+          'absolute socket path should be longer than 100 bytes');\n \n if (cluster.isMaster) {\n-  // ensure that the worker exits peacefully\n+  // Ensure that the worker exits peacefully.\n   tmpdir.refresh();\n   process.chdir(tmpdir.path);\n   fs.mkdirSync(socketDir);\n-  cluster.fork().on('exit', common.mustCall(function(statusCode) {\n+  cluster.fork().on('exit', common.mustCall((statusCode) => {\n     assert.strictEqual(statusCode, 0);\n \n-    assert.strictEqual(\n-      fs.existsSync(path.join(socketDir, socketName)), false,\n-      'Socket should be removed when the worker exits');\n+    assert.ok(!fs.existsSync(path.join(socketDir, socketName)),\n+              'Socket should be removed when the worker exits');\n   }));\n } else {\n   process.chdir(socketDir);\n \n   const server = net.createServer(common.mustNotCall());\n \n-  server.listen(socketName, common.mustCall(function() {\n-    assert.strictEqual(\n-      fs.existsSync(socketName), true,\n-      'Socket created in CWD');\n+  server.listen(socketName, common.mustCall(() => {\n+    assert.ok(fs.existsSync(socketName), 'Socket created in CWD');\n \n     process.disconnect();\n   }));"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 17,
        "deletions": 19
    }
}