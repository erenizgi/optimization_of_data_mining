{
    "author": "joyeecheung",
    "message": "process: delay setup of global exception handlers\n\nSince bootstrap/node.js performs the setup synchronously,\nthe process exception handlers do not have to setup so early in\nthe bootstrap process - any fatal errors thrown before user code\nexecution should simply crash the process, and we do not care\nabout any clean up at that point. We don't care about emitting any\nevents if the process crash upon bootstrap either.\n\nPR-URL: https://github.com/nodejs/node/pull/26061\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Gus Caplan <me@gus.host>",
    "sha": "0eb71d42130b4ec72b1c81ec575488c3377c05eb",
    "files": [
        {
            "sha": "2cd13a2891068caa0c3ed6eb8f5f177512fb8425",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 14,
            "deletions": 18,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/0eb71d42130b4ec72b1c81ec575488c3377c05eb/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/0eb71d42130b4ec72b1c81ec575488c3377c05eb/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=0eb71d42130b4ec72b1c81ec575488c3377c05eb",
            "patch": "@@ -46,24 +46,6 @@ setupTraceCategoryState();\n \n setupProcessObject();\n \n-// TODO(joyeecheung): this does not have to done so early, any fatal errors\n-// thrown before user code execution should simply crash the process\n-// and we do not care about any clean up at that point. We don't care\n-// about emitting any events if the process crash upon bootstrap either.\n-{\n-  const {\n-    fatalException,\n-    setUncaughtExceptionCaptureCallback,\n-    hasUncaughtExceptionCaptureCallback\n-  } = NativeModule.require('internal/process/execution');\n-\n-  process._fatalException = fatalException;\n-  process.setUncaughtExceptionCaptureCallback =\n-    setUncaughtExceptionCaptureCallback;\n-  process.hasUncaughtExceptionCaptureCallback =\n-    hasUncaughtExceptionCaptureCallback;\n-}\n-\n setupGlobalProxy();\n setupBuffer();\n \n@@ -265,6 +247,20 @@ Object.defineProperty(process, 'features', {\n   }\n });\n \n+{\n+  const {\n+    fatalException,\n+    setUncaughtExceptionCaptureCallback,\n+    hasUncaughtExceptionCaptureCallback\n+  } = NativeModule.require('internal/process/execution');\n+\n+  process._fatalException = fatalException;\n+  process.setUncaughtExceptionCaptureCallback =\n+    setUncaughtExceptionCaptureCallback;\n+  process.hasUncaughtExceptionCaptureCallback =\n+    hasUncaughtExceptionCaptureCallback;\n+}\n+\n // User-facing NODE_V8_COVERAGE environment variable that writes\n // ScriptCoverage to a specified file.\n if (process.env.NODE_V8_COVERAGE) {"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 14,
        "deletions": 18
    }
}