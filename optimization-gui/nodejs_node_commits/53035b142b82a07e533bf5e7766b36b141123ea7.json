{
    "author": "refack",
    "message": "build,windows: make vcbuild fail if upload fails\n\nRefs: https://github.com/nodejs/build/issues/1211",
    "sha": "53035b142b82a07e533bf5e7766b36b141123ea7",
    "files": [
        {
            "sha": "f1353d114ac4f882179d17d9736c21a6725efcfb",
            "filename": "vcbuild.bat",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/53035b142b82a07e533bf5e7766b36b141123ea7/vcbuild.bat",
            "raw_url": "https://github.com/nodejs/node/raw/53035b142b82a07e533bf5e7766b36b141123ea7/vcbuild.bat",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/vcbuild.bat?ref=53035b142b82a07e533bf5e7766b36b141123ea7",
            "patch": "@@ -361,14 +361,24 @@ if not defined SSHCONFIG (\n \n if not defined STAGINGSERVER set STAGINGSERVER=node-www\n ssh -F %SSHCONFIG% %STAGINGSERVER% \"mkdir -p nodejs/%DISTTYPEDIR%/v%FULLVERSION%/win-%target_arch%\"\n+if errorlevel 1 goto exit\n scp -F %SSHCONFIG% Release\\node.exe %STAGINGSERVER%:nodejs/%DISTTYPEDIR%/v%FULLVERSION%/win-%target_arch%/node.exe\n+if errorlevel 1 goto exit\n scp -F %SSHCONFIG% Release\\node.lib %STAGINGSERVER%:nodejs/%DISTTYPEDIR%/v%FULLVERSION%/win-%target_arch%/node.lib\n+if errorlevel 1 goto exit\n scp -F %SSHCONFIG% Release\\node_pdb.zip %STAGINGSERVER%:nodejs/%DISTTYPEDIR%/v%FULLVERSION%/win-%target_arch%/node_pdb.zip\n+if errorlevel 1 goto exit\n scp -F %SSHCONFIG% Release\\node_pdb.7z %STAGINGSERVER%:nodejs/%DISTTYPEDIR%/v%FULLVERSION%/win-%target_arch%/node_pdb.7z\n+if errorlevel 1 goto exit\n scp -F %SSHCONFIG% Release\\node-v%FULLVERSION%-win-%target_arch%.7z %STAGINGSERVER%:nodejs/%DISTTYPEDIR%/v%FULLVERSION%/node-v%FULLVERSION%-win-%target_arch%.7z\n+if errorlevel 1 goto exit\n scp -F %SSHCONFIG% Release\\node-v%FULLVERSION%-win-%target_arch%.zip %STAGINGSERVER%:nodejs/%DISTTYPEDIR%/v%FULLVERSION%/node-v%FULLVERSION%-win-%target_arch%.zip\n+if errorlevel 1 goto exit\n scp -F %SSHCONFIG% node-v%FULLVERSION%-%target_arch%.msi %STAGINGSERVER%:nodejs/%DISTTYPEDIR%/v%FULLVERSION%/\n+if errorlevel 1 goto exit\n ssh -F %SSHCONFIG% %STAGINGSERVER% \"touch nodejs/%DISTTYPEDIR%/v%FULLVERSION%/node-v%FULLVERSION%-%target_arch%.msi.done nodejs/%DISTTYPEDIR%/v%FULLVERSION%/node-v%FULLVERSION%-win-%target_arch%.zip.done nodejs/%DISTTYPEDIR%/v%FULLVERSION%/node-v%FULLVERSION%-win-%target_arch%.7z.done nodejs/%DISTTYPEDIR%/v%FULLVERSION%/win-%target_arch%.done && chmod -R ug=rw-x+X,o=r+X nodejs/%DISTTYPEDIR%/v%FULLVERSION%/node-v%FULLVERSION%-%target_arch%.* nodejs/%DISTTYPEDIR%/v%FULLVERSION%/win-%target_arch%*\"\n+if errorlevel 1 goto exit\n+\n \n :run\n @rem Run tests if requested."
        }
    ],
    "stats": {
        "total": 10,
        "additions": 10,
        "deletions": 0
    }
}