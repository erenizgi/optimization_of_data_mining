{
    "author": "mayankasthana",
    "message": "doc: update crypto examples to not use deprecated api\n\nUpdated Cipher and Decipher examples to not use deprecated\n`crypto.createCipher` and `crypto.createDecipher` in examples and\ninstead use `createCipheriv` and `createDecipheriv`.\n\nFixes: https://github.com/nodejs/node/issues/24046\n\nPR-URL: https://github.com/nodejs/node/pull/24107\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: Ujjwal Sharma <usharma1998@gmail.com>",
    "sha": "97309030effe5d01f1f99197b1f581f4e4d36091",
    "files": [
        {
            "sha": "985f3a95a5c8971e22effebbab935a068601c289",
            "filename": "doc/api/crypto.md",
            "status": "modified",
            "additions": 67,
            "deletions": 10,
            "changes": 77,
            "blob_url": "https://github.com/nodejs/node/blob/97309030effe5d01f1f99197b1f581f4e4d36091/doc%2Fapi%2Fcrypto.md",
            "raw_url": "https://github.com/nodejs/node/raw/97309030effe5d01f1f99197b1f581f4e4d36091/doc%2Fapi%2Fcrypto.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fcrypto.md?ref=97309030effe5d01f1f99197b1f581f4e4d36091",
            "patch": "@@ -185,7 +185,18 @@ Example: Using `Cipher` objects as streams:\n \n ```js\n const crypto = require('crypto');\n-const cipher = crypto.createCipher('aes192', 'a password');\n+\n+const algorithm = 'aes-192-cbc';\n+const password = 'Password used to generate key';\n+// Key length is dependent on the algorithm. In this case for aes192, it is\n+// 24 bytes (192 bits).\n+// Use async `crypto.scrypt()` instead.\n+const key = crypto.scryptSync(password, 'salt', 24);\n+// Use `crypto.randomBytes()` to generate a random iv instead of the static iv\n+// shown here.\n+const iv = Buffer.alloc(16, 0); // Initialization vector.\n+\n+const cipher = crypto.createCipheriv(algorithm, key, iv);\n \n let encrypted = '';\n cipher.on('readable', () => {\n@@ -195,7 +206,7 @@ cipher.on('readable', () => {\n });\n cipher.on('end', () => {\n   console.log(encrypted);\n-  // Prints: ca981be48e90867604588e75d04feabb63cc007a8f8ad89b10616ed84d815504\n+  // Prints: e5f79c5915c02171eec6b212d5520d44480993d7d622a7c4c2da32f6efda0ffa\n });\n \n cipher.write('some clear text data');\n@@ -207,7 +218,16 @@ Example: Using `Cipher` and piped streams:\n ```js\n const crypto = require('crypto');\n const fs = require('fs');\n-const cipher = crypto.createCipher('aes192', 'a password');\n+\n+const algorithm = 'aes-192-cbc';\n+const password = 'Password used to generate key';\n+// Use the async `crypto.scrypt()` instead.\n+const key = crypto.scryptSync(password, 'salt', 24);\n+// Use `crypto.randomBytes()` to generate a random iv instead of the static iv\n+// shown here.\n+const iv = Buffer.alloc(16, 0); // Initialization vector.\n+\n+const cipher = crypto.createCipheriv(algorithm, key, iv);\n \n const input = fs.createReadStream('test.js');\n const output = fs.createWriteStream('test.enc');\n@@ -219,12 +239,21 @@ Example: Using the [`cipher.update()`][] and [`cipher.final()`][] methods:\n \n ```js\n const crypto = require('crypto');\n-const cipher = crypto.createCipher('aes192', 'a password');\n+\n+const algorithm = 'aes-192-cbc';\n+const password = 'Password used to generate key';\n+// Use the async `crypto.scrypt()` instead.\n+const key = crypto.scryptSync(password, 'salt', 24);\n+// Use `crypto.randomBytes` to generate a random iv instead of the static iv\n+// shown here.\n+const iv = Buffer.alloc(16, 0); // Initialization vector.\n+\n+const cipher = crypto.createCipheriv(algorithm, key, iv);\n \n let encrypted = cipher.update('some clear text data', 'utf8', 'hex');\n encrypted += cipher.final('hex');\n console.log(encrypted);\n-// Prints: ca981be48e90867604588e75d04feabb63cc007a8f8ad89b10616ed84d815504\n+// Prints: e5f79c5915c02171eec6b212d5520d44480993d7d622a7c4c2da32f6efda0ffa\n ```\n \n ### cipher.final([outputEncoding])\n@@ -340,7 +369,17 @@ Example: Using `Decipher` objects as streams:\n \n ```js\n const crypto = require('crypto');\n-const decipher = crypto.createDecipher('aes192', 'a password');\n+\n+const algorithm = 'aes-192-cbc';\n+const password = 'Password used to generate key';\n+// Key length is dependent on the algorithm. In this case for aes192, it is\n+// 24 bytes (192 bits).\n+// Use the async `crypto.scrypt()` instead.\n+const key = crypto.scryptSync(password, 'salt', 24);\n+// The IV is usually passed along with the ciphertext.\n+const iv = Buffer.alloc(16, 0); // Initialization vector.\n+\n+const decipher = crypto.createDecipheriv(algorithm, key, iv);\n \n let decrypted = '';\n decipher.on('readable', () => {\n@@ -353,8 +392,9 @@ decipher.on('end', () => {\n   // Prints: some clear text data\n });\n \n+// Encrypted with same algorithm, key and iv.\n const encrypted =\n-    'ca981be48e90867604588e75d04feabb63cc007a8f8ad89b10616ed84d815504';\n+  'e5f79c5915c02171eec6b212d5520d44480993d7d622a7c4c2da32f6efda0ffa';\n decipher.write(encrypted, 'hex');\n decipher.end();\n ```\n@@ -364,7 +404,15 @@ Example: Using `Decipher` and piped streams:\n ```js\n const crypto = require('crypto');\n const fs = require('fs');\n-const decipher = crypto.createDecipher('aes192', 'a password');\n+\n+const algorithm = 'aes-192-cbc';\n+const password = 'Password used to generate key';\n+// Use the async `crypto.scrypt()` instead.\n+const key = crypto.scryptSync(password, 'salt', 24);\n+// The IV is usually passed along with the ciphertext.\n+const iv = Buffer.alloc(16, 0); // Initialization vector.\n+\n+const decipher = crypto.createDecipheriv(algorithm, key, iv);\n \n const input = fs.createReadStream('test.enc');\n const output = fs.createWriteStream('test.js');\n@@ -376,10 +424,19 @@ Example: Using the [`decipher.update()`][] and [`decipher.final()`][] methods:\n \n ```js\n const crypto = require('crypto');\n-const decipher = crypto.createDecipher('aes192', 'a password');\n \n+const algorithm = 'aes-192-cbc';\n+const password = 'Password used to generate key';\n+// Use the async `crypto.scrypt()` instead.\n+const key = crypto.scryptSync(password, 'salt', 24);\n+// The IV is usually passed along with the ciphertext.\n+const iv = Buffer.alloc(16, 0); // Initialization vector.\n+\n+const decipher = crypto.createDecipheriv(algorithm, key, iv);\n+\n+// Encrypted using same algorithm, key and iv.\n const encrypted =\n-    'ca981be48e90867604588e75d04feabb63cc007a8f8ad89b10616ed84d815504';\n+  'e5f79c5915c02171eec6b212d5520d44480993d7d622a7c4c2da32f6efda0ffa';\n let decrypted = decipher.update(encrypted, 'hex', 'utf8');\n decrypted += decipher.final('utf8');\n console.log(decrypted);"
        }
    ],
    "stats": {
        "total": 77,
        "additions": 67,
        "deletions": 10
    }
}