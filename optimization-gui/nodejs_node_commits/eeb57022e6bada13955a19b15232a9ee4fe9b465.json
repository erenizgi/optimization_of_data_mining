{
    "author": "ryzokuken",
    "message": "test: rename regression tests more expressively\n\nPR-URL: https://github.com/nodejs/node/pull/19495\nRefs: https://github.com/nodejs/node/issues/19105\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "eeb57022e6bada13955a19b15232a9ee4fe9b465",
    "files": [
        {
            "sha": "2c4cdd263018a06a880afcda3d51fa1507361601",
            "filename": "test/parallel/test-arm-math-illegal-instruction.js",
            "status": "renamed",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-arm-math-illegal-instruction.js",
            "raw_url": "https://github.com/nodejs/node/raw/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-arm-math-illegal-instruction.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-arm-math-illegal-instruction.js?ref=eeb57022e6bada13955a19b15232a9ee4fe9b465",
            "patch": "@@ -1,8 +1,11 @@\n 'use strict';\n+require('../common');\n+\n+// This test ensures Math functions don't fail with an \"illegal instruction\"\n+// error on ARM devices (primarily on the Raspberry Pi 1)\n // See https://github.com/nodejs/node/issues/1376\n // and https://code.google.com/p/v8/issues/detail?id=4019\n \n-require('../common');\n Math.abs(-0.5);\n Math.acos(-0.5);\n Math.acosh(-0.5);",
            "previous_filename": "test/parallel/test-arm-math-exp-regress-1376.js"
        },
        {
            "sha": "ccfb40bee75a40bad175f0a5e0bfc7d7071c8931",
            "filename": "test/parallel/test-buffer-tostring-rangeerror.js",
            "status": "renamed",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-buffer-tostring-rangeerror.js",
            "raw_url": "https://github.com/nodejs/node/raw/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-buffer-tostring-rangeerror.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-buffer-tostring-rangeerror.js?ref=eeb57022e6bada13955a19b15232a9ee4fe9b465",
            "patch": "@@ -1,10 +1,13 @@\n 'use strict';\n-\n const common = require('../common');\n+\n+// This test ensures that Node.js throws a RangeError when trying to convert a\n+// gigantic buffer into a string.\n+// Regression test for https://github.com/nodejs/node/issues/649.\n+\n const assert = require('assert');\n const SlowBuffer = require('buffer').SlowBuffer;\n \n-// Regression test for https://github.com/nodejs/node/issues/649.\n const len = 1422561062959;\n const message = common.expectsError({\n   code: 'ERR_INVALID_OPT_VALUE',",
            "previous_filename": "test/parallel/test-buffer-regression-649.js"
        },
        {
            "sha": "7a85455ce9646430a93df22da92df21a29054b0b",
            "filename": "test/parallel/test-dgram-send-invalid-msg-type.js",
            "status": "renamed",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-dgram-send-invalid-msg-type.js",
            "raw_url": "https://github.com/nodejs/node/raw/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-dgram-send-invalid-msg-type.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-dgram-send-invalid-msg-type.js?ref=eeb57022e6bada13955a19b15232a9ee4fe9b465",
            "patch": "@@ -20,9 +20,12 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-// Remove this test once we support sending strings.\n-\n require('../common');\n+\n+// This test ensures that a TypeError is raised when the argument to `send()`\n+// or `sendto()` is anything but a Buffer.\n+// https://github.com/nodejs/node-v0.x-archive/issues/4496\n+\n const assert = require('assert');\n const dgram = require('dgram');\n ",
            "previous_filename": "test/parallel/test-dgram-regress-4496.js"
        },
        {
            "sha": "8da7d3a489da23f370fd84cd7a98be7174c221d1",
            "filename": "test/parallel/test-dns-resolvens-typeerror.js",
            "status": "renamed",
            "additions": 20,
            "deletions": 13,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-dns-resolvens-typeerror.js",
            "raw_url": "https://github.com/nodejs/node/raw/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-dns-resolvens-typeerror.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-dns-resolvens-typeerror.js?ref=eeb57022e6bada13955a19b15232a9ee4fe9b465",
            "patch": "@@ -21,18 +21,25 @@\n \n 'use strict';\n const common = require('../common');\n-const dns = require('dns');\n \n-// Should not raise assertion error.\n+// This test ensures `dns.resolveNs()` does not raise a C++-land assertion error\n+// and throw a JavaScript TypeError instead.\n // Issue https://github.com/nodejs/node-v0.x-archive/issues/7070\n-common.expectsError(() => dns.resolveNs([]), // bad name\n-                    {\n-                      code: 'ERR_INVALID_ARG_TYPE',\n-                      type: TypeError,\n-                      message: /^The \"name\" argument must be of type string/\n-                    });\n-common.expectsError(() => dns.resolveNs(''), // bad callback\n-                    {\n-                      code: 'ERR_INVALID_CALLBACK',\n-                      type: TypeError\n-                    });\n+\n+const dns = require('dns');\n+\n+common.expectsError(\n+  () => dns.resolveNs([]), // bad name\n+  {\n+    code: 'ERR_INVALID_ARG_TYPE',\n+    type: TypeError,\n+    message: /^The \"name\" argument must be of type string/\n+  }\n+);\n+common.expectsError(\n+  () => dns.resolveNs(''), // bad callback\n+  {\n+    code: 'ERR_INVALID_CALLBACK',\n+    type: TypeError\n+  }\n+);",
            "previous_filename": "test/parallel/test-dns-regress-7070.js"
        },
        {
            "sha": "eb1c95d5200694d05c8bd3869cba21ca515395f9",
            "filename": "test/parallel/test-http-agent-maxsockets-regress-4050.js",
            "status": "removed",
            "additions": 0,
            "deletions": 41,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/ca22c96f1607f5f561e4a1a091bbd494a038ec6a/test%2Fparallel%2Ftest-http-agent-maxsockets-regress-4050.js",
            "raw_url": "https://github.com/nodejs/node/raw/ca22c96f1607f5f561e4a1a091bbd494a038ec6a/test%2Fparallel%2Ftest-http-agent-maxsockets-regress-4050.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-agent-maxsockets-regress-4050.js?ref=ca22c96f1607f5f561e4a1a091bbd494a038ec6a",
            "patch": "@@ -1,41 +0,0 @@\n-'use strict';\n-const common = require('../common');\n-const assert = require('assert');\n-const http = require('http');\n-const Countdown = require('../common/countdown');\n-\n-const MAX_SOCKETS = 2;\n-\n-const agent = new http.Agent({\n-  keepAlive: true,\n-  keepAliveMsecs: 1000,\n-  maxSockets: MAX_SOCKETS,\n-  maxFreeSockets: 2\n-});\n-\n-const server = http.createServer(common.mustCall((req, res) => {\n-  res.end('hello world');\n-}, 6));\n-\n-const countdown = new Countdown(6, () => server.close());\n-\n-function get(path, callback) {\n-  return http.get({\n-    host: 'localhost',\n-    port: server.address().port,\n-    agent: agent,\n-    path: path\n-  }, callback);\n-}\n-\n-server.listen(0, common.mustCall(() => {\n-  for (let i = 0; i < 6; i++) {\n-    const request = get('/1', common.mustCall());\n-    request.on('response', common.mustCall(() => {\n-      request.abort();\n-      const sockets = agent.sockets[Object.keys(agent.sockets)[0]];\n-      assert(sockets.length <= MAX_SOCKETS);\n-      countdown.dec();\n-    }));\n-  }\n-}));"
        },
        {
            "sha": "51db7e2f492362500fe887873311cf1c9646a1a9",
            "filename": "test/parallel/test-http-agent-maxsockets-respected.js",
            "status": "added",
            "additions": 56,
            "deletions": 0,
            "changes": 56,
            "blob_url": "https://github.com/nodejs/node/blob/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-http-agent-maxsockets-respected.js",
            "raw_url": "https://github.com/nodejs/node/raw/eeb57022e6bada13955a19b15232a9ee4fe9b465/test%2Fparallel%2Ftest-http-agent-maxsockets-respected.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-agent-maxsockets-respected.js?ref=eeb57022e6bada13955a19b15232a9ee4fe9b465",
            "patch": "@@ -0,0 +1,56 @@\n+'use strict';\n+const common = require('../common');\n+const Countdown = require('../common/countdown');\n+\n+// This test ensures that the `maxSockets` value for `http.Agent` is respected.\n+// https://github.com/nodejs/node/issues/4050\n+\n+const assert = require('assert');\n+const http = require('http');\n+\n+const MAX_SOCKETS = 2;\n+\n+const agent = new http.Agent({\n+  keepAlive: true,\n+  keepAliveMsecs: 1000,\n+  maxSockets: MAX_SOCKETS,\n+  maxFreeSockets: 2\n+});\n+\n+const server = http.createServer(\n+  common.mustCall((req, res) => {\n+    res.end('hello world');\n+  }, 6)\n+);\n+\n+const countdown = new Countdown(6, () => server.close());\n+\n+function get(path, callback) {\n+  return http.get(\n+    {\n+      host: 'localhost',\n+      port: server.address().port,\n+      agent: agent,\n+      path: path\n+    },\n+    callback\n+  );\n+}\n+\n+server.listen(\n+  0,\n+  common.mustCall(() => {\n+    for (let i = 0; i < 6; i++) {\n+      const request = get('/1', common.mustCall());\n+      request.on(\n+        'response',\n+        common.mustCall(() => {\n+          request.abort();\n+          const sockets = agent.sockets[Object.keys(agent.sockets)[0]];\n+          assert(sockets.length <= MAX_SOCKETS);\n+          countdown.dec();\n+        })\n+      );\n+    }\n+  })\n+);"
        }
    ],
    "stats": {
        "total": 149,
        "additions": 90,
        "deletions": 59
    }
}