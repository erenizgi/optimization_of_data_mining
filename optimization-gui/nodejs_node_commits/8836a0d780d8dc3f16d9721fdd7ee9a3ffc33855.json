{
    "author": "TimothyGu",
    "message": "inspector: add debugging for WebSocket messages\n\nPR-URL: https://github.com/nodejs/node/pull/21473\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Eugene Ostroukhov <eostroukhov@google.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "8836a0d780d8dc3f16d9721fdd7ee9a3ffc33855",
    "files": [
        {
            "sha": "a0670db3ed28cc410e021d5519fced61c713f574",
            "filename": "src/env.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/8836a0d780d8dc3f16d9721fdd7ee9a3ffc33855/src%2Fenv.h",
            "raw_url": "https://github.com/nodejs/node/raw/8836a0d780d8dc3f16d9721fdd7ee9a3ffc33855/src%2Fenv.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.h?ref=8836a0d780d8dc3f16d9721fdd7ee9a3ffc33855",
            "patch": "@@ -415,10 +415,10 @@ struct ContextInfo {\n };\n \n // Listing the AsyncWrap provider types first enables us to cast directly\n-// from a provider type to a debug category. Currently no other debug\n-// categories are available.\n+// from a provider type to a debug category.\n #define DEBUG_CATEGORY_NAMES(V) \\\n-    NODE_ASYNC_PROVIDER_TYPES(V)\n+    NODE_ASYNC_PROVIDER_TYPES(V) \\\n+    V(INSPECTOR_SERVER)\n \n enum class DebugCategory {\n #define V(name) name,"
        },
        {
            "sha": "78ecce7398bd5900fa619bda8ccc44bcbe87b8ea",
            "filename": "src/inspector_io.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/8836a0d780d8dc3f16d9721fdd7ee9a3ffc33855/src%2Finspector_io.cc",
            "raw_url": "https://github.com/nodejs/node/raw/8836a0d780d8dc3f16d9721fdd7ee9a3ffc33855/src%2Finspector_io.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_io.cc?ref=8836a0d780d8dc3f16d9721fdd7ee9a3ffc33855",
            "patch": "@@ -314,6 +314,8 @@ void InspectorIo::SwapBehindLock(MessageQueue<ActionType>* vector1,\n \n void InspectorIo::PostIncomingMessage(InspectorAction action, int session_id,\n                                       const std::string& message) {\n+  Debug(parent_env_, DebugCategory::INSPECTOR_SERVER,\n+        \">>> %s\\n\", message.c_str());\n   if (AppendMessage(&incoming_message_queue_, action, session_id,\n                     Utf8ToStringView(message))) {\n     Agent* agent = main_thread_req_->second;\n@@ -395,6 +397,10 @@ void InspectorIo::MainThreadReqAsyncCb(uv_async_t* req) {\n \n void InspectorIo::Write(TransportAction action, int session_id,\n                         const StringView& inspector_message) {\n+  std::string message_str =\n+      protocol::StringUtil::StringViewToUtf8(inspector_message);\n+  Debug(parent_env_, DebugCategory::INSPECTOR_SERVER,\n+        \"<<< %s\\n\", message_str.c_str());\n   AppendMessage(&outgoing_message_queue_, action, session_id,\n                 StringBuffer::create(inspector_message));\n   int err = uv_async_send(&thread_req_);"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 9,
        "deletions": 3
    }
}