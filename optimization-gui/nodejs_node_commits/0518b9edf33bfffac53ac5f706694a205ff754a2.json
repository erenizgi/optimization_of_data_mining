{
    "author": "BridgeAR",
    "message": "assert: multiple improvements\n\n1) Switched + / - and red / green in diffs. It seems like that style\n   is more natural to most people.\n\n2) Short primitives do not use the diff anymore. Especially short\n   numbers can be read well like 1 !== 2. Cases that can not be\n   displayed like that (e.g., -0 and +0) use the regular diff output.\n\n3) Improved error descriptions. It was not always clear what the\n   messages stood for. That should now be resolved.\n\n4) Added a position indicator for single lines in case a tty is used\n   and the line is shorter than the visual columns.\n\n5) Color detection is now done by checking stderr instead of stdout.\n\nPR-URL: https://github.com/nodejs/node/pull/21628\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>",
    "sha": "0518b9edf33bfffac53ac5f706694a205ff754a2",
    "files": [
        {
            "sha": "96800217f68074c05d6806af69d7f69cf640e979",
            "filename": "doc/api/assert.md",
            "status": "modified",
            "additions": 56,
            "deletions": 44,
            "changes": 100,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/doc%2Fapi%2Fassert.md",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/doc%2Fapi%2Fassert.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fassert.md?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -108,15 +108,15 @@ Example error diff:\n const assert = require('assert').strict;\n \n assert.deepEqual([[[1, 2, 3]], 4, 5], [[[1, 2, '3']], 4, 5]);\n-// AssertionError: Input A expected to strictly deep-equal input B:\n-// + expected - actual ... Lines skipped\n+// AssertionError: Expected inputs to be strictly deep-equal:\n+// + actual - expected ... Lines skipped\n //\n //   [\n //     [\n // ...\n //       2,\n-// -     3\n-// +     '3'\n+// +     3\n+// -     '3'\n //     ],\n // ...\n //     5\n@@ -315,11 +315,12 @@ const assert = require('assert').strict;\n \n // This fails because 1 !== '1'.\n assert.deepStrictEqual({ a: 1 }, { a: '1' });\n-// AssertionError: Input A expected to strictly deep-equal input B:\n-// + expected - actual\n+// AssertionError: Expected inputs to be strictly deep-equal:\n+// + actual - expected\n+//\n //   {\n-// -   a: 1\n-// +   a: '1'\n+// +   a: 1\n+// -   a: '1'\n //   }\n \n // The following objects don't have own properties\n@@ -330,27 +331,30 @@ Object.setPrototypeOf(fakeDate, Date.prototype);\n \n // Different [[Prototype]]:\n assert.deepStrictEqual(object, fakeDate);\n-// AssertionError: Input A expected to strictly deep-equal input B:\n-// + expected - actual\n-// - {}\n-// + Date {}\n+// AssertionError: Expected inputs to be strictly deep-equal:\n+// + actual - expected\n+//\n+// + {}\n+// - Date {}\n \n // Different type tags:\n assert.deepStrictEqual(date, fakeDate);\n-// AssertionError: Input A expected to strictly deep-equal input B:\n-// + expected - actual\n-// - 2018-04-26T00:49:08.604Z\n-// + Date {}\n+// AssertionError: Expected inputs to be strictly deep-equal:\n+// + actual - expected\n+//\n+// + 2018-04-26T00:49:08.604Z\n+// - Date {}\n \n assert.deepStrictEqual(NaN, NaN);\n // OK, because of the SameValue comparison\n \n // Different unwrapped numbers:\n assert.deepStrictEqual(new Number(1), new Number(2));\n-// AssertionError: Input A expected to strictly deep-equal input B:\n-// + expected - actual\n-// - [Number: 1]\n-// + [Number: 2]\n+// AssertionError: Expected inputs to be strictly deep-equal:\n+// + actual - expected\n+//\n+// + [Number: 1]\n+// - [Number: 2]\n \n assert.deepStrictEqual(new String('foo'), Object('foo'));\n // OK because the object and the string are identical when unwrapped.\n@@ -360,17 +364,20 @@ assert.deepStrictEqual(-0, -0);\n \n // Different zeros using the SameValue Comparison:\n assert.deepStrictEqual(0, -0);\n-// AssertionError: Input A expected to strictly deep-equal input B:\n-// + expected - actual\n-// - 0\n-// + -0\n+// AssertionError: Expected inputs to be strictly deep-equal:\n+// + actual - expected\n+//\n+// + 0\n+// - -0\n \n const symbol1 = Symbol();\n const symbol2 = Symbol();\n assert.deepStrictEqual({ [symbol1]: 1 }, { [symbol1]: 1 });\n // OK, because it is the same symbol on both objects.\n+\n assert.deepStrictEqual({ [symbol1]: 1 }, { [symbol2]: 1 });\n-// AssertionError [ERR_ASSERTION]: Input objects not identical:\n+// AssertionError [ERR_ASSERTION]: Inputs identical but not reference equal:\n+//\n // {\n //   [Symbol()]: 1\n // }\n@@ -385,12 +392,13 @@ assert.deepStrictEqual(weakMap1, weakMap2);\n \n // Fails because weakMap3 has a property that weakMap1 does not contain:\n assert.deepStrictEqual(weakMap1, weakMap3);\n-// AssertionError: Input A expected to strictly deep-equal input B:\n-// + expected - actual\n+// AssertionError: Expected inputs to be strictly deep-equal:\n+// + actual - expected\n+//\n //   WeakMap {\n-// -   [items unknown]\n-// +   [items unknown],\n-// +   unequal: true\n+// +   [items unknown]\n+// -   [items unknown],\n+// -   unequal: true\n //   }\n ```\n \n@@ -875,7 +883,9 @@ assert.notStrictEqual(1, 2);\n // OK\n \n assert.notStrictEqual(1, 1);\n-// AssertionError [ERR_ASSERTION]: Identical input passed to notStrictEqual: 1\n+// AssertionError [ERR_ASSERTION]: Expected \"actual\" to be strictly unequal to:\n+//\n+// 1\n \n assert.notStrictEqual(1, '1');\n // OK\n@@ -1031,19 +1041,20 @@ determined by the [SameValue Comparison][].\n const assert = require('assert').strict;\n \n assert.strictEqual(1, 2);\n-// AssertionError [ERR_ASSERTION]: Input A expected to strictly equal input B:\n-// + expected - actual\n-// - 1\n-// + 2\n+// AssertionError [ERR_ASSERTION]: Expected inputs to be strictly equal:\n+//\n+// 1 !== 2\n \n assert.strictEqual(1, 1);\n // OK\n \n-assert.strictEqual(1, '1');\n-// AssertionError [ERR_ASSERTION]: Input A expected to strictly equal input B:\n-// + expected - actual\n-// - 1\n-// + '1'\n+assert.strictEqual('Hello foobar', 'Hello World!');\n+// AssertionError [ERR_ASSERTION]: Expected inputs to be strictly equal:\n+// + actual - expected\n+//\n+// + 'Hello foobar'\n+// - 'Hello World!'\n+//          ^\n ```\n \n If the values are not strictly equal, an `AssertionError` is thrown with a\n@@ -1211,20 +1222,21 @@ function notThrowing() {}\n assert.throws(throwingFirst, 'Second');\n // In the next example the message has no benefit over the message from the\n // error and since it is not clear if the user intended to actually match\n-// against the error message, Node.js thrown an `ERR_AMBIGUOUS_ARGUMENT` error.\n+// against the error message, Node.js throws an `ERR_AMBIGUOUS_ARGUMENT` error.\n assert.throws(throwingSecond, 'Second');\n-// Throws an error:\n // TypeError [ERR_AMBIGUOUS_ARGUMENT]\n \n // The string is only used (as message) in case the function does not throw:\n assert.throws(notThrowing, 'Second');\n // AssertionError [ERR_ASSERTION]: Missing expected exception: Second\n \n // If it was intended to match for the error message do this instead:\n+// It does not throw because the error messages match.\n assert.throws(throwingSecond, /Second$/);\n-// Does not throw because the error messages match.\n+\n+// If the error message does not match, the error from within the function is\n+// not caught.\n assert.throws(throwingFirst, /Second$/);\n-// Throws an error:\n // Error: First\n //     at throwingFirst (repl:2:9)\n ```"
        },
        {
            "sha": "894b36d17fadab974e5bb7ae0c2f916d003cf9c8",
            "filename": "lib/internal/assert.js",
            "status": "modified",
            "additions": 86,
            "deletions": 48,
            "changes": 134,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/lib%2Finternal%2Fassert.js",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/lib%2Finternal%2Fassert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fassert.js?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -10,13 +10,18 @@ let green = '';\n let red = '';\n let white = '';\n \n-const READABLE_OPERATOR = {\n-  deepStrictEqual: 'Input A expected to strictly deep-equal input B',\n-  notDeepStrictEqual: 'Input A expected to strictly not deep-equal input B',\n-  strictEqual: 'Input A expected to strictly equal input B',\n-  notStrictEqual: 'Input A expected to strictly not equal input B'\n+const kReadableOperator = {\n+  deepStrictEqual: 'Expected inputs to be strictly deep-equal:',\n+  notDeepStrictEqual: 'Expected \"actual\" not to be strictly deep-equal to:',\n+  strictEqual: 'Expected inputs to be strictly equal:',\n+  notStrictEqual: 'Expected \"actual\" to be strictly unequal to:',\n+  notIdentical: 'Inputs identical but not reference equal:',\n };\n \n+// Comparing short primitives should just show === / !== instead of using the\n+// diff.\n+const kMaxShortLength = 10;\n+\n function copyError(source) {\n   const keys = Object.keys(source);\n   const target = Object.create(Object.getPrototypeOf(source));\n@@ -49,22 +54,59 @@ function inspectValue(val) {\n }\n \n function createErrDiff(actual, expected, operator) {\n-  var other = '';\n-  var res = '';\n-  var lastPos = 0;\n-  var end = '';\n-  var skipped = false;\n+  let other = '';\n+  let res = '';\n+  let lastPos = 0;\n+  let end = '';\n+  let skipped = false;\n   const actualLines = inspectValue(actual);\n   const expectedLines = inspectValue(expected);\n-  const msg = READABLE_OPERATOR[operator] +\n-        `:\\n${green}+ expected${white} ${red}- actual${white}`;\n+  const msg = kReadableOperator[operator] +\n+        `\\n${green}+ actual${white} ${red}- expected${white}`;\n   const skippedMsg = ` ${blue}...${white} Lines skipped`;\n \n+  let i = 0;\n+  let indicator = '';\n+\n+  // If \"actual\" and \"expected\" fit on a single line and they are not strictly\n+  // equal, check further special handling.\n+  if (actualLines.length === 1 && expectedLines.length === 1 &&\n+    actualLines[0] !== expectedLines[0]) {\n+    const inputLength = actualLines[0].length + expectedLines[0].length;\n+    // If the character length of \"actual\" and \"expected\" together is less than\n+    // kMaxShortLength and if neither is an object and at least one of them is\n+    // not `zero`, use the strict equal comparison to visualize the output.\n+    if (inputLength <= kMaxShortLength) {\n+      if ((typeof actual !== 'object' || actual === null) &&\n+          (typeof expected !== 'object' || expected === null) &&\n+          (actual !== 0 || expected !== 0)) { // -0 === +0\n+        return `${kReadableOperator[operator]}\\n\\n` +\n+            `${actualLines[0]} !== ${expectedLines[0]}\\n`;\n+      }\n+    } else {\n+      // If the stderr is a tty and the input length is lower than the current\n+      // columns per line, add a mismatch indicator below the output. If it is\n+      // not a tty, use a default value of 80 characters.\n+      const maxLength = process.stderr.isTTY ? process.stderr.columns : 80;\n+      if (inputLength < maxLength) {\n+        while (actualLines[0][i] === expectedLines[0][i]) {\n+          i++;\n+        }\n+        // Ignore the first characters.\n+        if (i > 2) {\n+          // Add position indicator for the first mismatch in case it is a\n+          // single line and the input length is less than the column length.\n+          indicator = `\\n  ${' '.repeat(i)}^`;\n+          i = 0;\n+        }\n+      }\n+    }\n+  }\n+\n   // Remove all ending lines that match (this optimizes the output for\n   // readability by reducing the number of total changed lines).\n-  var a = actualLines[actualLines.length - 1];\n-  var b = expectedLines[expectedLines.length - 1];\n-  var i = 0;\n+  let a = actualLines[actualLines.length - 1];\n+  let b = expectedLines[expectedLines.length - 1];\n   while (a === b) {\n     if (i++ < 2) {\n       end = `\\n  ${a}${end}`;\n@@ -78,6 +120,26 @@ function createErrDiff(actual, expected, operator) {\n     a = actualLines[actualLines.length - 1];\n     b = expectedLines[expectedLines.length - 1];\n   }\n+\n+  const maxLines = Math.max(actualLines.length, expectedLines.length);\n+  // Strict equal with identical objects that are not identical by reference.\n+  // E.g., assert.deepStrictEqual({ a: Symbol() }, { a: Symbol() })\n+  if (maxLines === 0) {\n+    // We have to get the result again. The lines were all removed before.\n+    const actualLines = inspectValue(actual);\n+\n+    // Only remove lines in case it makes sense to collapse those.\n+    // TODO: Accept env to always show the full error.\n+    if (actualLines.length > 30) {\n+      actualLines[26] = `${blue}...${white}`;\n+      while (actualLines.length > 27) {\n+        actualLines.pop();\n+      }\n+    }\n+\n+    return `${kReadableOperator.notIdentical}\\n\\n${actualLines.join('\\n')}\\n`;\n+  }\n+\n   if (i > 3) {\n     end = `\\n${blue}...${white}${end}`;\n     skipped = true;\n@@ -87,9 +149,7 @@ function createErrDiff(actual, expected, operator) {\n     other = '';\n   }\n \n-  const maxLines = Math.max(actualLines.length, expectedLines.length);\n-  var printedLines = 0;\n-  var identical = 0;\n+  let printedLines = 0;\n   for (i = 0; i < maxLines; i++) {\n     // Only extra expected lines exist\n     const cur = i - lastPos;\n@@ -106,7 +166,7 @@ function createErrDiff(actual, expected, operator) {\n         printedLines++;\n       }\n       lastPos = i;\n-      other += `\\n${green}+${white} ${expectedLines[i]}`;\n+      other += `\\n${red}-${white} ${expectedLines[i]}`;\n       printedLines++;\n     // Only extra actual lines exist\n     } else if (expectedLines.length < i + 1) {\n@@ -122,7 +182,7 @@ function createErrDiff(actual, expected, operator) {\n         printedLines++;\n       }\n       lastPos = i;\n-      res += `\\n${red}-${white} ${actualLines[i]}`;\n+      res += `\\n${green}+${white} ${actualLines[i]}`;\n       printedLines++;\n     // Lines diverge\n     } else if (actualLines[i] !== expectedLines[i]) {\n@@ -138,8 +198,8 @@ function createErrDiff(actual, expected, operator) {\n         printedLines++;\n       }\n       lastPos = i;\n-      res += `\\n${red}-${white} ${actualLines[i]}`;\n-      other += `\\n${green}+${white} ${expectedLines[i]}`;\n+      res += `\\n${green}+${white} ${actualLines[i]}`;\n+      other += `\\n${red}-${white} ${expectedLines[i]}`;\n       printedLines += 2;\n     // Lines are identical\n     } else {\n@@ -149,7 +209,6 @@ function createErrDiff(actual, expected, operator) {\n         res += `\\n  ${actualLines[i]}`;\n         printedLines++;\n       }\n-      identical++;\n     }\n     // Inspected object to big (Show ~20 rows max)\n     if (printedLines > 20 && i < maxLines - 2) {\n@@ -158,28 +217,7 @@ function createErrDiff(actual, expected, operator) {\n     }\n   }\n \n-  // Strict equal with identical objects that are not identical by reference.\n-  if (identical === maxLines) {\n-    // E.g., assert.deepStrictEqual(Symbol(), Symbol())\n-    const base = operator === 'strictEqual' ?\n-      'Input objects identical but not reference equal:' :\n-      'Input objects not identical:';\n-\n-    // We have to get the result again. The lines were all removed before.\n-    const actualLines = inspectValue(actual);\n-\n-    // Only remove lines in case it makes sense to collapse those.\n-    // TODO: Accept env to always show the full error.\n-    if (actualLines.length > 30) {\n-      actualLines[26] = `${blue}...${white}`;\n-      while (actualLines.length > 27) {\n-        actualLines.pop();\n-      }\n-    }\n-\n-    return `${base}\\n\\n${actualLines.join('\\n')}\\n`;\n-  }\n-  return `${msg}${skipped ? skippedMsg : ''}\\n${res}${other}${end}`;\n+  return `${msg}${skipped ? skippedMsg : ''}\\n${res}${other}${end}${indicator}`;\n }\n \n class AssertionError extends Error {\n@@ -198,10 +236,10 @@ class AssertionError extends Error {\n     if (message != null) {\n       super(String(message));\n     } else {\n-      if (process.stdout.isTTY) {\n+      if (process.stderr.isTTY) {\n         // Reset on each call to make sure we handle dynamically set environment\n         // variables correct.\n-        if (process.stdout.getColorDepth() !== 1) {\n+        if (process.stderr.getColorDepth() !== 1) {\n           blue = '\\u001b[34m';\n           green = '\\u001b[32m';\n           white = '\\u001b[39m';\n@@ -231,7 +269,7 @@ class AssertionError extends Error {\n         // In case the objects are equal but the operator requires unequal, show\n         // the first object and say A equals B\n         const res = inspectValue(actual);\n-        const base = `Identical input passed to ${operator}:`;\n+        const base = kReadableOperator[operator];\n \n         // Only remove lines in case it makes sense to collapse those.\n         // TODO: Accept env to always show the full error."
        },
        {
            "sha": "3013dbc0286bb29c68c55b92003b7d98bef080dd",
            "filename": "test/message/assert_throws_stack.out",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fmessage%2Fassert_throws_stack.out",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fmessage%2Fassert_throws_stack.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fassert_throws_stack.out?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -2,13 +2,13 @@ assert.js:*\n       throw err;\n       ^\n \n-AssertionError [ERR_ASSERTION]: Input A expected to strictly deep-equal input B:\n-+ expected - actual\n+AssertionError [ERR_ASSERTION]: Expected inputs to be strictly deep-equal:\n++ actual - expected\n \n-- Comparison {}\n-+ Comparison {\n-+   bar: true\n-+ }\n++ Comparison {}\n+- Comparison {\n+-   bar: true\n+- }\n     at Object.<anonymous> (*assert_throws_stack.js:*:*)\n     at *\n     at *"
        },
        {
            "sha": "fc647e41b92d6b83e3582b194f2ab89fc26775ee",
            "filename": "test/message/core_line_numbers.out",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fmessage%2Fcore_line_numbers.out",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fmessage%2Fcore_line_numbers.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fcore_line_numbers.out?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -3,7 +3,7 @@ punycode.js:42\n \t^\n \n RangeError: Invalid input\n-    at error (punycode.js:42:*)\n+    at error (punycode.js:42:8)\n     at Object.decode (punycode.js:*:*)\n     at Object.<anonymous> (*test*message*core_line_numbers.js:*:*)\n     at Module._compile (internal/modules/cjs/loader.js:*:*)"
        },
        {
            "sha": "cc1edf46cb0001ad472d729adbdbe91ae41527af",
            "filename": "test/message/error_exit.out",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fmessage%2Ferror_exit.out",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fmessage%2Ferror_exit.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Ferror_exit.out?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -3,11 +3,10 @@ assert.js:*\n   throw new AssertionError(obj);\n   ^\n \n-AssertionError [ERR_ASSERTION]: Input A expected to strictly equal input B:\n-+ expected - actual\n+AssertionError [ERR_ASSERTION]: Expected inputs to be strictly equal:\n+\n+1 !== 2\n \n-- 1\n-+ 2\n     at Object.<anonymous> (*test*message*error_exit.js:*:*)\n     at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at Object.Module._extensions..js (internal/modules/cjs/loader.js:*:*)"
        },
        {
            "sha": "754e5649145f17a8ce8d32b083a3bb8eeb1c5da9",
            "filename": "test/parallel/test-assert-checktag.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fparallel%2Ftest-assert-checktag.js",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fparallel%2Ftest-assert-checktag.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert-checktag.js?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -26,15 +26,15 @@ if (process.stdout.isTTY)\n   assert.throws(\n     () => assert.deepStrictEqual(date, fake),\n     {\n-      message: 'Input A expected to strictly deep-equal input B:\\n' +\n-               '+ expected - actual\\n\\n- 2016-01-01T00:00:00.000Z\\n+ Date {}'\n+      message: 'Expected inputs to be strictly deep-equal:\\n' +\n+               '+ actual - expected\\n\\n+ 2016-01-01T00:00:00.000Z\\n- Date {}'\n     }\n   );\n   assert.throws(\n     () => assert.deepStrictEqual(fake, date),\n     {\n-      message: 'Input A expected to strictly deep-equal input B:\\n' +\n-               '+ expected - actual\\n\\n- Date {}\\n+ 2016-01-01T00:00:00.000Z'\n+      message: 'Expected inputs to be strictly deep-equal:\\n' +\n+               '+ actual - expected\\n\\n+ Date {}\\n- 2016-01-01T00:00:00.000Z'\n     }\n   );\n }"
        },
        {
            "sha": "4536b6d535f70391199b1ee4f3dbfdf553033bc8",
            "filename": "test/parallel/test-assert-deep.js",
            "status": "modified",
            "additions": 36,
            "deletions": 34,
            "changes": 70,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fparallel%2Ftest-assert-deep.js",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fparallel%2Ftest-assert-deep.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert-deep.js?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -4,8 +4,8 @@ const common = require('../common');\n const assert = require('assert');\n const util = require('util');\n const { AssertionError } = assert;\n-const defaultMsgStart = 'Input A expected to strictly deep-equal input B:\\n' +\n-                        '+ expected - actual';\n+const defaultMsgStart = 'Expected inputs to be strictly deep-equal:\\n';\n+const defaultMsgStartFull = `${defaultMsgStart}+ actual - expected`;\n \n // Disable colored output to prevent color codes from breaking assertion\n // message comparisons. This should only be an issue when process.stdout\n@@ -44,9 +44,9 @@ assert.throws(\n   () => assert.deepStrictEqual(arr, buf),\n   {\n     code: 'ERR_ASSERTION',\n-    message: `${defaultMsgStart} ... Lines skipped\\n\\n` +\n-             '- Uint8Array [\\n' +\n-             '+ Buffer [Uint8Array] [\\n    120,\\n...\\n    10\\n  ]'\n+    message: `${defaultMsgStartFull} ... Lines skipped\\n\\n` +\n+             '+ Uint8Array [\\n' +\n+             '- Buffer [Uint8Array] [\\n    120,\\n...\\n    10\\n  ]'\n   }\n );\n assert.deepEqual(arr, buf);\n@@ -59,9 +59,9 @@ assert.deepEqual(arr, buf);\n     () => assert.deepStrictEqual(buf2, buf),\n     {\n       code: 'ERR_ASSERTION',\n-      message: `${defaultMsgStart}\\n\\n` +\n+      message: `${defaultMsgStartFull}\\n\\n` +\n                '  Buffer [Uint8Array] [\\n    120,\\n    121,\\n    122,\\n' +\n-               '-   10,\\n-   prop: 1\\n+   10\\n  ]'\n+               '+   10,\\n+   prop: 1\\n-   10\\n  ]'\n     }\n   );\n   assert.deepEqual(buf2, buf);\n@@ -74,9 +74,9 @@ assert.deepEqual(arr, buf);\n     () => assert.deepStrictEqual(arr, arr2),\n     {\n       code: 'ERR_ASSERTION',\n-      message: `${defaultMsgStart}\\n\\n` +\n+      message: `${defaultMsgStartFull}\\n\\n` +\n                '  Uint8Array [\\n    120,\\n    121,\\n    122,\\n' +\n-               '-   10\\n+   10,\\n+   prop: 5\\n  ]'\n+               '+   10\\n-   10,\\n-   prop: 5\\n  ]'\n     }\n   );\n   assert.deepEqual(arr, arr2);\n@@ -101,18 +101,18 @@ assert.throws(\n   () => assert.deepStrictEqual(date, date2),\n   {\n     code: 'ERR_ASSERTION',\n-    message: `${defaultMsgStart}\\n\\n` +\n-             '- 2016-01-01T00:00:00.000Z\\n+ 2016-01-01T00:00:00.000Z {\\n' +\n-             \"+   '0': '1'\\n+ }\"\n+    message: `${defaultMsgStartFull}\\n\\n` +\n+             '+ 2016-01-01T00:00:00.000Z\\n- 2016-01-01T00:00:00.000Z {\\n' +\n+             \"-   '0': '1'\\n- }\"\n   }\n );\n assert.throws(\n   () => assert.deepStrictEqual(date2, date),\n   {\n     code: 'ERR_ASSERTION',\n-    message: `${defaultMsgStart}\\n\\n` +\n-             '- 2016-01-01T00:00:00.000Z {\\n' +\n-             \"-   '0': '1'\\n- }\\n+ 2016-01-01T00:00:00.000Z\"\n+    message: `${defaultMsgStartFull}\\n\\n` +\n+             '+ 2016-01-01T00:00:00.000Z {\\n' +\n+             \"+   '0': '1'\\n+ }\\n- 2016-01-01T00:00:00.000Z\"\n   }\n );\n \n@@ -133,8 +133,8 @@ assert.throws(\n   () => assert.deepStrictEqual(re1, re2),\n   {\n     code: 'ERR_ASSERTION',\n-    message: `${defaultMsgStart}\\n\\n` +\n-             \"- /test/\\n+ /test/ {\\n+   '0': '1'\\n+ }\"\n+    message: `${defaultMsgStartFull}\\n\\n` +\n+             \"+ /test/\\n- /test/ {\\n-   '0': '1'\\n- }\"\n   }\n );\n \n@@ -498,8 +498,8 @@ assertOnlyDeepEqual(\n     () => assert.deepStrictEqual(map1, map2),\n     {\n       code: 'ERR_ASSERTION',\n-      message: `${defaultMsgStart}\\n\\n` +\n-               \"  Map {\\n-   1 => 1\\n+   1 => '1'\\n  }\"\n+      message: `${defaultMsgStartFull}\\n\\n` +\n+               \"  Map {\\n+   1 => 1\\n-   1 => '1'\\n  }\"\n     }\n   );\n }\n@@ -750,7 +750,7 @@ assert.throws(\n   () => assert.notDeepStrictEqual(new Date(2000, 3, 14), new Date(2000, 3, 14)),\n   {\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: 'Identical input passed to notDeepStrictEqual: ' +\n+    message: 'Expected \"actual\" not to be strictly deep-equal to: ' +\n              util.inspect(new Date(2000, 3, 14))\n   }\n );\n@@ -767,35 +767,35 @@ assert.throws(\n   {\n     code: 'ERR_ASSERTION',\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: `${defaultMsgStart}\\n\\n- /ab/\\n+ /a/`\n+    message: `${defaultMsgStartFull}\\n\\n+ /ab/\\n- /a/`\n   });\n assert.throws(\n   () => assert.deepStrictEqual(/a/g, /a/),\n   {\n     code: 'ERR_ASSERTION',\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: `${defaultMsgStart}\\n\\n- /a/g\\n+ /a/`\n+    message: `${defaultMsgStartFull}\\n\\n+ /a/g\\n- /a/`\n   });\n assert.throws(\n   () => assert.deepStrictEqual(/a/i, /a/),\n   {\n     code: 'ERR_ASSERTION',\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: `${defaultMsgStart}\\n\\n- /a/i\\n+ /a/`\n+    message: `${defaultMsgStartFull}\\n\\n+ /a/i\\n- /a/`\n   });\n assert.throws(\n   () => assert.deepStrictEqual(/a/m, /a/),\n   {\n     code: 'ERR_ASSERTION',\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: `${defaultMsgStart}\\n\\n- /a/m\\n+ /a/`\n+    message: `${defaultMsgStartFull}\\n\\n+ /a/m\\n- /a/`\n   });\n assert.throws(\n   () => assert.deepStrictEqual(/a/igm, /a/im),\n   {\n     code: 'ERR_ASSERTION',\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: `${defaultMsgStart}\\n\\n- /a/gim\\n+ /a/im`\n+    message: `${defaultMsgStartFull}\\n\\n+ /a/gim\\n- /a/im\\n     ^`\n   });\n \n {\n@@ -806,12 +806,12 @@ assert.throws(\n \n assert.throws(\n   () => assert.deepStrictEqual(4, '4'),\n-  { message: `${defaultMsgStart}\\n\\n- 4\\n+ '4'` }\n+  { message: `${defaultMsgStart}\\n4 !== '4'\\n` }\n );\n \n assert.throws(\n   () => assert.deepStrictEqual(true, 1),\n-  { message: `${defaultMsgStart}\\n\\n- true\\n+ 1` }\n+  { message: `${defaultMsgStart}\\ntrue !== 1\\n` }\n );\n \n // Having the same number of owned properties && the same set of keys.\n@@ -821,21 +821,23 @@ assert.throws(() => assert.deepStrictEqual([4], ['4']),\n               {\n                 code: 'ERR_ASSERTION',\n                 name: 'AssertionError [ERR_ASSERTION]',\n-                message: `${defaultMsgStart}\\n\\n  [\\n-   4\\n+   '4'\\n  ]`\n+                message: `${defaultMsgStartFull}\\n\\n  [\\n+   4\\n-   '4'\\n  ]`\n               });\n assert.throws(\n   () => assert.deepStrictEqual({ a: 4 }, { a: 4, b: true }),\n   {\n     code: 'ERR_ASSERTION',\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: `${defaultMsgStart}\\n\\n  {\\n-   a: 4\\n+   a: 4,\\n+   b: true\\n  }`\n+    message: `${defaultMsgStartFull}\\n\\n  ` +\n+             '{\\n+   a: 4\\n-   a: 4,\\n-   b: true\\n  }'\n   });\n assert.throws(\n   () => assert.deepStrictEqual(['a'], { 0: 'a' }),\n   {\n     code: 'ERR_ASSERTION',\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: `${defaultMsgStart}\\n\\n- [\\n-   'a'\\n- ]\\n+ {\\n+   '0': 'a'\\n+ }`\n+    message: `${defaultMsgStartFull}\\n\\n` +\n+             \"+ [\\n+   'a'\\n+ ]\\n- {\\n-   '0': 'a'\\n- }\"\n   });\n \n /* eslint-enable */\n@@ -906,8 +908,8 @@ assert.throws(() => assert.deepStrictEqual(new Boolean(true), {}),\n   assert.throws(\n     () => assert.deepStrictEqual(a, b),\n     {\n-      message: `${defaultMsgStart}\\n\\n` +\n-               '  [TypeError: foo] {\\n-   foo: \\'bar\\'\\n+   foo: \\'baz\\'\\n  }'\n+      message: `${defaultMsgStartFull}\\n\\n` +\n+               '  [TypeError: foo] {\\n+   foo: \\'bar\\'\\n-   foo: \\'baz\\'\\n  }'\n     }\n   );\n }\n@@ -922,8 +924,8 @@ assert.throws(() => assert.deepStrictEqual(new Boolean(true), {}),\n   util.inspect.defaultOptions = { showProxy: true };\n   assert.throws(\n     () => assert.deepStrictEqual(arrProxy, [1, 2, 3]),\n-    { message: `${defaultMsgStart}\\n\\n` +\n-               '  [\\n    1,\\n-   2\\n+   2,\\n+   3\\n  ]' }\n+    { message: `${defaultMsgStartFull}\\n\\n` +\n+               '  [\\n    1,\\n+   2\\n-   2,\\n-   3\\n  ]' }\n   );\n   util.inspect.defaultOptions = tmp;\n }"
        },
        {
            "sha": "6aecfc0fe6bf3f9b675cfd603c562ad079572631",
            "filename": "test/parallel/test-assert.js",
            "status": "modified",
            "additions": 83,
            "deletions": 71,
            "changes": 154,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fparallel%2Ftest-assert.js",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fparallel%2Ftest-assert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert.js?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -34,8 +34,9 @@ const a = assert;\n if (process.stdout.isTTY)\n   process.env.NODE_DISABLE_COLORS = '1';\n \n-const start = 'Input A expected to strictly deep-equal input B:';\n-const actExp = '+ expected - actual';\n+const strictEqualMessageStart = 'Expected inputs to be strictly equal:\\n';\n+const start = 'Expected inputs to be strictly deep-equal:';\n+const actExp = '+ actual - expected';\n \n assert.ok(a.AssertionError.prototype instanceof Error,\n           'a.AssertionError instanceof Error');\n@@ -70,15 +71,16 @@ assert.throws(() => a.strictEqual(null, undefined),\n assert.throws(\n   () => a.notStrictEqual(2, 2),\n   {\n-    message: 'Identical input passed to notStrictEqual: 2',\n+    message: 'Expected \"actual\" to be strictly unequal to: 2',\n     name: 'AssertionError [ERR_ASSERTION]'\n   }\n );\n \n assert.throws(\n   () => a.notStrictEqual('a '.repeat(30), 'a '.repeat(30)),\n   {\n-    message: `Identical input passed to notStrictEqual: '${'a '.repeat(30)}'`,\n+    message: 'Expected \"actual\" to be strictly unequal to: ' +\n+             `'${'a '.repeat(30)}'`,\n     name: 'AssertionError [ERR_ASSERTION]'\n   }\n );\n@@ -254,51 +256,56 @@ a.throws(() => thrower(TypeError), (err) => {\n const circular = { y: 1 };\n circular.x = circular;\n \n-function testAssertionMessage(actual, expected) {\n+function testAssertionMessage(actual, expected, msg) {\n   try {\n     assert.strictEqual(actual, '');\n   } catch (e) {\n     assert.strictEqual(\n       e.message,\n-      'Input A expected to strictly equal input B:\\n+ expected - actual\\n\\n' +\n-        `- ${expected}\\n+ ''`\n+      msg || strictEqualMessageStart +\n+             `+ actual - expected\\n\\n+ ${expected}\\n- ''`\n     );\n     assert.ok(e.generatedMessage, 'Message not marked as generated');\n   }\n }\n \n-testAssertionMessage(undefined, 'undefined');\n-testAssertionMessage(null, 'null');\n-testAssertionMessage(true, 'true');\n-testAssertionMessage(false, 'false');\n-testAssertionMessage(0, '0');\n-testAssertionMessage(100, '100');\n-testAssertionMessage(NaN, 'NaN');\n-testAssertionMessage(Infinity, 'Infinity');\n-testAssertionMessage(-Infinity, '-Infinity');\n-testAssertionMessage('', '\"\"');\n-testAssertionMessage('foo', '\\'foo\\'');\n+function testShortAssertionMessage(actual, expected) {\n+  testAssertionMessage(actual, expected, strictEqualMessageStart +\n+                                         `\\n${inspect(actual)} !== ''\\n`);\n+}\n+\n+testShortAssertionMessage(null, 'null');\n+testShortAssertionMessage(true, 'true');\n+testShortAssertionMessage(false, 'false');\n+testShortAssertionMessage(100, '100');\n+testShortAssertionMessage(NaN, 'NaN');\n+testShortAssertionMessage(Infinity, 'Infinity');\n+testShortAssertionMessage('', '\"\"');\n+testShortAssertionMessage('foo', '\\'foo\\'');\n+testShortAssertionMessage(0, '0');\n+testShortAssertionMessage(Symbol(), 'Symbol()');\n testAssertionMessage([], '[]');\n-testAssertionMessage([1, 2, 3], '[\\n-   1,\\n-   2,\\n-   3\\n- ]');\n testAssertionMessage(/a/, '/a/');\n testAssertionMessage(/abc/gim, '/abc/gim');\n+testAssertionMessage({}, '{}');\n+testAssertionMessage(undefined, 'undefined');\n+testAssertionMessage(-Infinity, '-Infinity');\n+testAssertionMessage([1, 2, 3], '[\\n+   1,\\n+   2,\\n+   3\\n+ ]');\n testAssertionMessage(function f() {}, '[Function: f]');\n testAssertionMessage(function() {}, '[Function]');\n-testAssertionMessage({}, '{}');\n-testAssertionMessage(circular, '{\\n-   y: 1,\\n-   x: [Circular]\\n- }');\n+testAssertionMessage(circular, '{\\n+   y: 1,\\n+   x: [Circular]\\n+ }');\n testAssertionMessage({ a: undefined, b: null },\n-                     '{\\n-   a: undefined,\\n-   b: null\\n- }');\n+                     '{\\n+   a: undefined,\\n+   b: null\\n+ }');\n testAssertionMessage({ a: NaN, b: Infinity, c: -Infinity },\n-                     '{\\n-   a: NaN,\\n-   b: Infinity,\\n-   c: -Infinity\\n- }');\n+                     '{\\n+   a: NaN,\\n+   b: Infinity,\\n+   c: -Infinity\\n+ }');\n \n // https://github.com/nodejs/node-v0.x-archive/issues/5292\n try {\n   assert.strictEqual(1, 2);\n } catch (e) {\n   assert.strictEqual(\n     e.message,\n-    'Input A expected to strictly equal input B:\\n' +\n-      '+ expected - actual\\n\\n- 1\\n+ 2'\n+    `${strictEqualMessageStart}\\n1 !== 2\\n`\n   );\n   assert.ok(e.generatedMessage, 'Message not marked as generated');\n }\n@@ -384,8 +391,8 @@ assert.throws(() => {\n   assert.strictEqual('A'.repeat(1000), '');\n }, {\n   code: 'ERR_ASSERTION',\n-  message: 'Input A expected to strictly equal input B:\\n' +\n-           `+ expected - actual\\n\\n- '${'A'.repeat(1000)}'\\n+ ''`\n+  message: `${strictEqualMessageStart}+ actual - expected\\n\\n` +\n+           `+ '${'A'.repeat(1000)}'\\n- ''`\n });\n \n {\n@@ -408,8 +415,9 @@ assert.throws(\n   {\n     code: 'ERR_ASSERTION',\n     name: 'AssertionError [ERR_ASSERTION]',\n-    message: 'Input A expected to strictly equal input B:\\n' +\n-             '+ expected - actual\\n\\n- [Error: foo]\\n+ [Error: foobar]'\n+    message: strictEqualMessageStart +\n+             '+ actual - expected\\n\\n' +\n+             '+ [Error: foo]\\n- [Error: foobar]\\n             ^'\n   }\n );\n \n@@ -433,7 +441,8 @@ assert.throws(\n     () => assert(...[]),\n     {\n       message: 'No value argument passed to `assert.ok()`',\n-      name: 'AssertionError [ERR_ASSERTION]'\n+      name: 'AssertionError [ERR_ASSERTION]',\n+      generatedMessage: true\n     }\n   );\n   assert.throws(\n@@ -471,8 +480,8 @@ assert.throws(\n     '    [',\n     '...',\n     '        2,',\n-    '-       3',\n-    \"+       '3'\",\n+    '+       3',\n+    \"-       '3'\",\n     '      ]',\n     '...',\n     '    5',\n@@ -489,7 +498,7 @@ assert.throws(\n     '    1,',\n     '...',\n     '    0,',\n-    '+   1,',\n+    '-   1,',\n     '    1,',\n     '...',\n     '    1',\n@@ -509,7 +518,7 @@ assert.throws(\n     '    1,',\n     '...',\n     '    0,',\n-    '-   1,',\n+    '+   1,',\n     '    1,',\n     '...',\n     '    1',\n@@ -527,12 +536,12 @@ assert.throws(\n     '',\n     '  [',\n     '    1,',\n-    '-   2,',\n-    '+   1,',\n+    '+   2,',\n+    '-   1,',\n     '    1,',\n     '    1,',\n     '    0,',\n-    '-   1,',\n+    '+   1,',\n     '    1',\n     '  ]'\n   ].join('\\n');\n@@ -546,12 +555,12 @@ assert.throws(\n     start,\n     actExp,\n     '',\n-    '- [',\n-    '-   1,',\n-    '-   2,',\n-    '-   1',\n-    '- ]',\n-    '+ undefined',\n+    '+ [',\n+    '+   1,',\n+    '+   2,',\n+    '+   1',\n+    '+ ]',\n+    '- undefined',\n   ].join('\\n');\n   assert.throws(\n     () => assert.deepEqual([1, 2, 1]),\n@@ -562,7 +571,7 @@ assert.throws(\n     actExp,\n     '',\n     '  [',\n-    '-   1,',\n+    '+   1,',\n     '    2,',\n     '    1',\n     '  ]'\n@@ -575,9 +584,9 @@ assert.throws(\n     `${actExp} ... Lines skipped\\n` +\n     '\\n' +\n     '  [\\n' +\n-    '-   1,\\n'.repeat(10) +\n+    '+   1,\\n'.repeat(10) +\n     '...\\n' +\n-    '+   2,\\n'.repeat(10) +\n+    '-   2,\\n'.repeat(10) +\n     '...';\n   assert.throws(\n     () => assert.deepEqual(Array(12).fill(1), Array(12).fill(2)),\n@@ -591,21 +600,24 @@ assert.throws(\n     message: `${start}\\n` +\n     `${actExp}\\n` +\n     '\\n' +\n-    '- {}\\n' +\n-    '+ {\\n' +\n-    \"+   loop: 'forever',\\n\" +\n-    '+   [Symbol(util.inspect.custom)]: [Function]\\n' +\n-    '+ }'\n+    '+ {}\\n' +\n+    '- {\\n' +\n+    \"-   loop: 'forever',\\n\" +\n+    '-   [Symbol(util.inspect.custom)]: [Function]\\n' +\n+    '- }'\n   });\n \n   // notDeepEqual tests\n-  message = 'Identical input passed to notDeepStrictEqual:\\n\\n[\\n  1\\n]\\n';\n   assert.throws(\n     () => assert.notDeepEqual([1], [1]),\n-    { message });\n+    {\n+      message: 'Expected \"actual\" not to be strictly deep-equal to:\\n\\n' +\n+               '[\\n  1\\n]\\n'\n+    }\n+  );\n \n-  message = 'Identical input passed to notDeepStrictEqual:' +\n-        `\\n\\n[${'\\n  1,'.repeat(25)}\\n...\\n`;\n+  message = 'Expected \"actual\" not to be strictly deep-equal to:' +\n+            `\\n\\n[${'\\n  1,'.repeat(25)}\\n...\\n`;\n   const data = Array(31).fill(1);\n   assert.throws(\n     () => assert.notDeepEqual(data, data),\n@@ -874,8 +886,8 @@ common.expectsError(\n       name: 'AssertionError [ERR_ASSERTION]',\n       message: `${start}\\n${actExp}\\n\\n` +\n                \"  Comparison {\\n    name: 'TypeError',\\n\" +\n-               \"    message: 'Wrong value',\\n-   code: 404\\n\" +\n-               '+   code: 404,\\n+   foo: undefined\\n  }'\n+               \"    message: 'Wrong value',\\n+   code: 404\\n\" +\n+               '-   code: 404,\\n-   foo: undefined\\n  }'\n     }\n   );\n \n@@ -888,8 +900,8 @@ common.expectsError(\n       name: 'AssertionError [ERR_ASSERTION]',\n       message: `${start}\\n${actExp}\\n\\n` +\n                \"  Comparison {\\n    name: 'TypeError',\\n\" +\n-               \"    message: 'Wrong value',\\n-   code: 404\\n\" +\n-               \"+   code: '404',\\n+   foo: undefined\\n  }\"\n+               \"    message: 'Wrong value',\\n+   code: 404\\n\" +\n+               \"-   code: '404',\\n-   foo: undefined\\n  }\"\n     }\n   );\n \n@@ -919,7 +931,7 @@ common.expectsError(\n       name: 'AssertionError [ERR_ASSERTION]',\n       code: 'ERR_ASSERTION',\n       message: `${start}\\n${actExp}\\n\\n` +\n-               \"  Comparison {\\n-   name: 'TypeError',\\n+   name: 'Error',\" +\n+               \"  Comparison {\\n+   name: 'TypeError',\\n-   name: 'Error',\" +\n                \"\\n    message: 'e'\\n  }\"\n     }\n   );\n@@ -930,8 +942,8 @@ common.expectsError(\n       code: 'ERR_ASSERTION',\n       generatedMessage: true,\n       message: `${start}\\n${actExp}\\n\\n` +\n-               \"  Comparison {\\n    name: 'Error',\\n-   message: 'foo'\" +\n-               \"\\n+   message: ''\\n  }\"\n+               \"  Comparison {\\n    name: 'Error',\\n+   message: 'foo'\" +\n+               \"\\n-   message: ''\\n  }\"\n     }\n   );\n \n@@ -988,7 +1000,7 @@ assert.throws(() => { throw null; }, 'foo');\n assert.throws(\n   () => assert.strictEqual([], []),\n   {\n-    message: 'Input objects identical but not reference equal:\\n\\n[]\\n'\n+    message: 'Inputs identical but not reference equal:\\n\\n[]\\n'\n   }\n );\n \n@@ -997,8 +1009,8 @@ assert.throws(\n   assert.throws(\n     () => assert.strictEqual(args, { 0: 'a' }),\n     {\n-      message: 'Input A expected to strictly equal input B:\\n+ expected' +\n-               \" - actual\\n\\n- [Arguments] {\\n+ {\\n    '0': 'a'\\n  }\"\n+      message: `${strictEqualMessageStart}+ actual - expected\\n\\n` +\n+               \"+ [Arguments] {\\n- {\\n    '0': 'a'\\n  }\"\n     }\n   );\n }\n@@ -1022,8 +1034,8 @@ assert.throws(\n   {\n     message: `${start}\\n${actExp}\\n\\n` +\n              '  Comparison {\\n' +\n-             \"-   message: 'foobar',\\n\" +\n-             '+   message: /fooa/,\\n' +\n+             \"+   message: 'foobar',\\n\" +\n+             '-   message: /fooa/,\\n' +\n              \"    name: 'TypeError'\\n\" +\n              '  }'\n   }\n@@ -1043,10 +1055,10 @@ assert.throws(\n       expected,\n       generatedMessage: true,\n       message: `${start}\\n${actExp}\\n\\n` +\n-              '- null\\n' +\n-              '+ {\\n' +\n-              \"+   message: 'foo'\\n\" +\n-              '+ }'\n+              '+ null\\n' +\n+              '- {\\n' +\n+              \"-   message: 'foo'\\n\" +\n+              '- }'\n     }\n   );\n "
        },
        {
            "sha": "6e648aeae721f0feec3c573746abe190cea74f7c",
            "filename": "test/parallel/test-internal-errors.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fparallel%2Ftest-internal-errors.js",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fparallel%2Ftest-internal-errors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-errors.js?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -77,7 +77,7 @@ common.expectsError(() => {\n   }, { code: 'TEST_ERROR_1', type: RangeError });\n }, {\n   code: 'ERR_ASSERTION',\n-  message: /-   type: \\[Function: TypeError]\\n\\+   type: \\[Function: RangeError]/\n+  message: /\\+   type: \\[Function: TypeError]\\n-   type: \\[Function: RangeError]/\n });\n \n common.expectsError(() => {\n@@ -89,7 +89,7 @@ common.expectsError(() => {\n }, {\n   code: 'ERR_ASSERTION',\n   type: assert.AssertionError,\n-  message: /-   message: 'Error for testing purposes: a'\\n\\+   message: \\/\\^Error/\n+  message: /\\+   message: 'Error for testing purposes: a'\\n-   message: \\/\\^Error/\n });\n \n // Test ERR_INVALID_FD_TYPE"
        },
        {
            "sha": "cd855dc06eac27c2c23c62dfe256b023f314ad89",
            "filename": "test/pseudo-tty/test-assert-colors.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fpseudo-tty%2Ftest-assert-colors.js",
            "raw_url": "https://github.com/nodejs/node/raw/0518b9edf33bfffac53ac5f706694a205ff754a2/test%2Fpseudo-tty%2Ftest-assert-colors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpseudo-tty%2Ftest-assert-colors.js?ref=0518b9edf33bfffac53ac5f706694a205ff754a2",
            "patch": "@@ -7,12 +7,12 @@ try {\n   process.env.COLORTERM = '1';\n   assert.deepStrictEqual([1, 2, 2, 2], [2, 2, 2, 2]);\n } catch (err) {\n-  const expected = 'Input A expected to strictly deep-equal input B:\\n' +\n-    '\\u001b[32m+ expected\\u001b[39m \\u001b[31m- actual\\u001b[39m' +\n+  const expected = 'Expected inputs to be strictly deep-equal:\\n' +\n+    '\\u001b[32m+ actual\\u001b[39m \\u001b[31m- expected\\u001b[39m' +\n       ' \\u001b[34m...\\u001b[39m Lines skipped\\n\\n' +\n     '  [\\n' +\n-    '\\u001b[31m-\\u001b[39m   1,\\n' +\n-    '\\u001b[32m+\\u001b[39m   2,\\n' +\n+    '\\u001b[32m+\\u001b[39m   1,\\n' +\n+    '\\u001b[31m-\\u001b[39m   2,\\n' +\n     '    2,\\n' +\n     '\\u001b[34m...\\u001b[39m\\n' +\n     '    2\\n' +"
        }
    ],
    "stats": {
        "total": 499,
        "additions": 281,
        "deletions": 218
    }
}