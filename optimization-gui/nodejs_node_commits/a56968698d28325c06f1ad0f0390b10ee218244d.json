{
    "author": "mhdawson",
    "message": "doc: better linkage to node-addon-api\n\nOne of the comments we got at the N-API workshop\nat NodeConfEU was that we should have a better link to\nnode-addon-api and the docs in the main API docs for\nN-API. The goal being to help people find node-addon-api\nand potentially start with the node-addon-api docs\ninstead if they are using C++.\n\nThis expands and strengthens the link along with a\nrecommendation that starting with the node-addon-api\ndocs might make sense.\n\nPR-URL: https://github.com/nodejs/node/pull/24371\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>",
    "sha": "a56968698d28325c06f1ad0f0390b10ee218244d",
    "files": [
        {
            "sha": "27ebefb4b56b3e362591daadd9f521d86ed364d5",
            "filename": "doc/api/n-api.md",
            "status": "modified",
            "additions": 45,
            "deletions": 7,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/a56968698d28325c06f1ad0f0390b10ee218244d/doc%2Fapi%2Fn-api.md",
            "raw_url": "https://github.com/nodejs/node/raw/a56968698d28325c06f1ad0f0390b10ee218244d/doc%2Fapi%2Fn-api.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fn-api.md?ref=a56968698d28325c06f1ad0f0390b10ee218244d",
            "patch": "@@ -34,13 +34,51 @@ properties:\n   handling section [Error Handling][].\n \n The N-API is a C API that ensures ABI stability across Node.js versions\n-and different compiler levels. However, we also understand that a C++\n-API can be easier to use in many cases. To support these cases we expect\n-there to be one or more C++ wrapper modules that provide an inlineable C++\n-API. Binaries built with these wrapper modules will depend on the symbols\n-for the N-API C based functions exported by Node.js. These wrappers are not\n-part of N-API, nor will they be maintained as part of Node.js. One such\n-example is: [node-addon-api](https://github.com/nodejs/node-addon-api).\n+and different compiler levels. A C++ API can be easier to use.\n+To support using C++, the project maintains a\n+C++ wrapper module called\n+[node-addon-api](https://github.com/nodejs/node-addon-api).\n+This wrapper provides an inlineable C++ API. Binaries built\n+with `node-addon-api` will depend on the symbols for the N-API C-based\n+functions exported by Node.js. `node-addon-api` is a more\n+efficient way to write code that calls N-API. Take, for example, the\n+following `node-addon-api` code. The first section shows the\n+`node-addon-api` code and the second section shows what actually gets\n+used in the addon.\n+\n+```C++\n+Object obj = Object::New(env);\n+obj[\"foo\"] = String::New(env, \"bar\");\n+```\n+\n+```C++\n+napi_status status;\n+napi_value object, string;\n+status = napi_create_object(env, &object);\n+if (status != napi_ok) {\n+  napi_throw_error(env, ...);\n+  return;\n+}\n+\n+status = napi_crate_string_utf8(env, \"bar\", NAPI_AUTO_LENGTH, &string);\n+if (status != napi_ok) {\n+  napi_throw_error(env, ...);\n+  return;\n+}\n+\n+status = napi_set_named_property(env, object, \"foo\", string);\n+if (status != napi_ok) {\n+  napi_throw_error(env, ...);\n+  return;\n+}\n+```\n+\n+The end result is that the addon only uses the exported C APIs. As a result,\n+it still gets the benefits of the ABI stability provided by the C API.\n+\n+When using `node-addon-api` instead of the C APIs, start with the API\n+[docs](https://github.com/nodejs/node-addon-api#api-documentation)\n+for `node-addon-api`.\n \n ## Implications of ABI Stability\n "
        }
    ],
    "stats": {
        "total": 52,
        "additions": 45,
        "deletions": 7
    }
}