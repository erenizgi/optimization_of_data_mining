{
    "author": "blacksun1",
    "message": "test: remove unused function arguments in async-hooks tests\n\nRemove unused function arguments in three async-hooks tests and\nimprove test consistancy.\n\nPR-URL: https://github.com/nodejs/node/pull/24406\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "738e076556f68bf9bca36f447d8a7cc64769b48e",
    "files": [
        {
            "sha": "341b7b4c5dfd89d325e5d8b759ebe9e0613c2768",
            "filename": "test/async-hooks/test-promise.chain-promise-before-init-hooks.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/738e076556f68bf9bca36f447d8a7cc64769b48e/test%2Fasync-hooks%2Ftest-promise.chain-promise-before-init-hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/738e076556f68bf9bca36f447d8a7cc64769b48e/test%2Fasync-hooks%2Ftest-promise.chain-promise-before-init-hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-promise.chain-promise-before-init-hooks.js?ref=738e076556f68bf9bca36f447d8a7cc64769b48e",
            "patch": "@@ -8,11 +8,11 @@ const { checkInvocations } = require('./hook-checks');\n if (!common.isMainThread)\n   common.skip('Worker bootstrapping works differently -> different async IDs');\n \n-const p = new Promise(common.mustCall(function executor(resolve, reject) {\n+const p = new Promise(common.mustCall(function executor(resolve) {\n   resolve(5);\n }));\n \n-p.then(function afterresolution(val) {\n+p.then(function afterResolution(val) {\n   assert.strictEqual(val, 5);\n   return val;\n });"
        },
        {
            "sha": "417cb3c80d629898a07c938fce0213d3eb8dee51",
            "filename": "test/async-hooks/test-promise.js",
            "status": "modified",
            "additions": 10,
            "deletions": 12,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/738e076556f68bf9bca36f447d8a7cc64769b48e/test%2Fasync-hooks%2Ftest-promise.js",
            "raw_url": "https://github.com/nodejs/node/raw/738e076556f68bf9bca36f447d8a7cc64769b48e/test%2Fasync-hooks%2Ftest-promise.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-promise.js?ref=738e076556f68bf9bca36f447d8a7cc64769b48e",
            "patch": "@@ -13,24 +13,22 @@ const hooks = initHooks();\n \n hooks.enable();\n \n-const p = (new Promise(common.mustCall(executor)));\n-p.then(afterresolution);\n-\n-function executor(resolve, reject) {\n-  const as = hooks.activitiesOfTypes('PROMISE');\n-  assert.strictEqual(as.length, 1);\n-  const a = as[0];\n-  checkInvocations(a, { init: 1 }, 'while in promise executor');\n-  resolve(5);\n-}\n-\n-function afterresolution(val) {\n+const p = new Promise(common.mustCall(executor));\n+p.then(function afterResolution(val) {\n   assert.strictEqual(val, 5);\n   const as = hooks.activitiesOfTypes('PROMISE');\n   assert.strictEqual(as.length, 2);\n   checkInvocations(as[0], { init: 1 }, 'after resolution parent promise');\n   checkInvocations(as[1], { init: 1, before: 1 },\n                    'after resolution child promise');\n+});\n+\n+function executor(resolve) {\n+  const as = hooks.activitiesOfTypes('PROMISE');\n+  assert.strictEqual(as.length, 1);\n+  const a = as[0];\n+  checkInvocations(a, { init: 1 }, 'while in promise executor');\n+  resolve(5);\n }\n \n process.on('exit', onexit);"
        },
        {
            "sha": "f9ba24c044298ff4674c2b050b73b1b222a037b6",
            "filename": "test/async-hooks/test-promise.promise-before-init-hooks.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/738e076556f68bf9bca36f447d8a7cc64769b48e/test%2Fasync-hooks%2Ftest-promise.promise-before-init-hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/738e076556f68bf9bca36f447d8a7cc64769b48e/test%2Fasync-hooks%2Ftest-promise.promise-before-init-hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-promise.promise-before-init-hooks.js?ref=738e076556f68bf9bca36f447d8a7cc64769b48e",
            "patch": "@@ -5,15 +5,15 @@ const assert = require('assert');\n const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n \n-const p = new Promise(common.mustCall(function executor(resolve, reject) {\n+const p = new Promise(common.mustCall(function executor(resolve) {\n   resolve(5);\n }));\n \n // init hooks after promise was created\n const hooks = initHooks({ allowNoInit: true });\n hooks.enable();\n \n-p.then(function afterresolution(val) {\n+p.then(function afterResolution(val) {\n   assert.strictEqual(val, 5);\n   const as = hooks.activitiesOfTypes('PROMISE');\n   assert.strictEqual(as.length, 1);"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 14,
        "deletions": 16
    }
}