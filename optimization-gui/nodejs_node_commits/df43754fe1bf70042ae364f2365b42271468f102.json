{
    "author": "BridgeAR",
    "message": "repl: hide editor mode if not used in a terminal\n\nThe editor mode is only useable when used as terminal. Hide it from\nthe user in case the repl terminal option is not set.\n\nPR-URL: https://github.com/nodejs/node/pull/26240\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Anto Aravinth <anto.aravinth.cse@gmail.com>\nReviewed-By: Roman Reiss <me@silverwind.io>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>",
    "sha": "df43754fe1bf70042ae364f2365b42271468f102",
    "files": [
        {
            "sha": "5db94641a3c3d193088cf3b01118a8ea32d4ef6c",
            "filename": "lib/repl.js",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/df43754fe1bf70042ae364f2365b42271468f102/lib%2Frepl.js",
            "raw_url": "https://github.com/nodejs/node/raw/df43754fe1bf70042ae364f2365b42271468f102/lib%2Frepl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Frepl.js?ref=df43754fe1bf70042ae364f2365b42271468f102",
            "patch": "@@ -1479,16 +1479,16 @@ function defineDefaultCommands(repl) {\n       this.displayPrompt();\n     }\n   });\n-\n-  repl.defineCommand('editor', {\n-    help: 'Enter editor mode',\n-    action() {\n-      if (!this.terminal) return;\n-      _turnOnEditorMode(this);\n-      this.outputStream.write(\n-        '// Entering editor mode (^D to finish, ^C to cancel)\\n');\n-    }\n-  });\n+  if (repl.terminal) {\n+    repl.defineCommand('editor', {\n+      help: 'Enter editor mode',\n+      action() {\n+        _turnOnEditorMode(this);\n+        this.outputStream.write(\n+          '// Entering editor mode (^D to finish, ^C to cancel)\\n');\n+      }\n+    });\n+  }\n }\n \n function regexpEscape(s) {"
        },
        {
            "sha": "eff05a39203acd13e3f54965ab05eb02a98b6ec7",
            "filename": "test/parallel/test-repl-save-load.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/df43754fe1bf70042ae364f2365b42271468f102/test%2Fparallel%2Ftest-repl-save-load.js",
            "raw_url": "https://github.com/nodejs/node/raw/df43754fe1bf70042ae364f2365b42271468f102/test%2Fparallel%2Ftest-repl-save-load.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-save-load.js?ref=df43754fe1bf70042ae364f2365b42271468f102",
            "patch": "@@ -61,7 +61,7 @@ assert.strictEqual(fs.readFileSync(saveFileName, 'utf8'),\n     '}'\n   ];\n   const putIn = new ArrayStream();\n-  const replServer = repl.start('', putIn);\n+  const replServer = repl.start({ terminal: true, stream: putIn });\n \n   putIn.run(['.editor']);\n   putIn.run(cmds);"
        },
        {
            "sha": "bcaa39f6aa8215e616fad33df0b5d5c5e2f2de5b",
            "filename": "test/parallel/test-repl.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/df43754fe1bf70042ae364f2365b42271468f102/test%2Fparallel%2Ftest-repl.js",
            "raw_url": "https://github.com/nodejs/node/raw/df43754fe1bf70042ae364f2365b42271468f102/test%2Fparallel%2Ftest-repl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl.js?ref=df43754fe1bf70042ae364f2365b42271468f102",
            "patch": "@@ -439,7 +439,6 @@ const errorTests = [\n     expect: [\n       /\\.break/,\n       /\\.clear/,\n-      /\\.editor/,\n       /\\.exit/,\n       /\\.help/,\n       /\\.load/,"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 11,
        "deletions": 12
    }
}