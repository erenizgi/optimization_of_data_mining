{
    "author": "devsnek",
    "message": "loader: remove unused error code in module_job\n\nPR-URL: https://github.com/nodejs/node/pull/21354\nReviewed-By: Bradley Farias <bradley.meck@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Guy Bedford <guybedford@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "8fa640e2db60e74d24b15de95f51fd9b55f5e793",
    "files": [
        {
            "sha": "9735eae8b50c9ca16ab6e2365e24988b2d58e150",
            "filename": "lib/internal/modules/esm/module_job.js",
            "status": "modified",
            "additions": 2,
            "deletions": 18,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/8fa640e2db60e74d24b15de95f51fd9b55f5e793/lib%2Finternal%2Fmodules%2Fesm%2Fmodule_job.js",
            "raw_url": "https://github.com/nodejs/node/raw/8fa640e2db60e74d24b15de95f51fd9b55f5e793/lib%2Finternal%2Fmodules%2Fesm%2Fmodule_job.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2Fmodule_job.js?ref=8fa640e2db60e74d24b15de95f51fd9b55f5e793",
            "patch": "@@ -14,8 +14,6 @@ class ModuleJob {\n   // `moduleProvider` is a function\n   constructor(loader, url, moduleProvider, isMain) {\n     this.loader = loader;\n-    this.error = null;\n-    this.hadError = false;\n     this.isMain = isMain;\n \n     // This is a Promise<{ module, reflect }>, whose fields will be copied\n@@ -72,15 +70,7 @@ class ModuleJob {\n       const dependencyJobs = await moduleJob.linked;\n       return Promise.all(dependencyJobs.map(addJobsToDependencyGraph));\n     };\n-    try {\n-      await addJobsToDependencyGraph(this);\n-    } catch (e) {\n-      if (!this.hadError) {\n-        this.error = e;\n-        this.hadError = true;\n-      }\n-      throw e;\n-    }\n+    await addJobsToDependencyGraph(this);\n     try {\n       if (this.isMain && process._breakFirstLine) {\n         delete process._breakFirstLine;\n@@ -103,13 +93,7 @@ class ModuleJob {\n \n   async run() {\n     const module = await this.instantiate();\n-    try {\n-      module.evaluate(-1, false);\n-    } catch (e) {\n-      this.hadError = true;\n-      this.error = e;\n-      throw e;\n-    }\n+    module.evaluate(-1, false);\n     return module;\n   }\n }"
        },
        {
            "sha": "80431512d75773f0877cd24317ed28e11f4a0c32",
            "filename": "test/es-module/test-esm-error-cache.js",
            "status": "added",
            "additions": 28,
            "deletions": 0,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/8fa640e2db60e74d24b15de95f51fd9b55f5e793/test%2Fes-module%2Ftest-esm-error-cache.js",
            "raw_url": "https://github.com/nodejs/node/raw/8fa640e2db60e74d24b15de95f51fd9b55f5e793/test%2Fes-module%2Ftest-esm-error-cache.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fes-module%2Ftest-esm-error-cache.js?ref=8fa640e2db60e74d24b15de95f51fd9b55f5e793",
            "patch": "@@ -0,0 +1,28 @@\n+'use strict';\n+\n+// Flags: --experimental-modules\n+\n+const common = require('../common');\n+const assert = require('assert');\n+\n+common.crashOnUnhandledRejection();\n+\n+const file = '../../fixtures/syntax/bad_syntax.js';\n+\n+let error;\n+(async () => {\n+  try {\n+    await import(file);\n+  } catch (e) {\n+    assert.strictEqual(e.name, 'SyntaxError');\n+    error = e;\n+  }\n+\n+  assert(error);\n+\n+  try {\n+    await import(file);\n+  } catch (e) {\n+    assert.strictEqual(error, e);\n+  }\n+})();"
        }
    ],
    "stats": {
        "total": 48,
        "additions": 30,
        "deletions": 18
    }
}