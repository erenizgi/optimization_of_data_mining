{
    "author": "bzoz",
    "message": "child_process: better spawn error message\n\nThrow ERR_INVALID_ARG_VALUE when filename passed to spawn is empty.\n\nFixes: https://github.com/nodejs/node/issues/19235\n\nPR-URL: https://github.com/nodejs/node/pull/19305\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "9bfe55e18419ae9e67f6dc80b42943d2f7d3e9e8",
    "files": [
        {
            "sha": "97b436cc0761c8bb634574974a044e44bb5bde2a",
            "filename": "lib/child_process.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9bfe55e18419ae9e67f6dc80b42943d2f7d3e9e8/lib%2Fchild_process.js",
            "raw_url": "https://github.com/nodejs/node/raw/9bfe55e18419ae9e67f6dc80b42943d2f7d3e9e8/lib%2Fchild_process.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fchild_process.js?ref=9bfe55e18419ae9e67f6dc80b42943d2f7d3e9e8",
            "patch": "@@ -386,9 +386,12 @@ function _convertCustomFds(options) {\n }\n \n function normalizeSpawnArguments(file, args, options) {\n-  if (typeof file !== 'string' || file.length === 0)\n+  if (typeof file !== 'string')\n     throw new ERR_INVALID_ARG_TYPE('file', 'string', file);\n \n+  if (file.length === 0)\n+    throw new ERR_INVALID_ARG_VALUE('file', file, 'cannot be empty');\n+\n   if (Array.isArray(args)) {\n     args = args.slice(0);\n   } else if (args !== undefined &&"
        },
        {
            "sha": "791cf02280a3cbd6daa8e8c61d729b84a03cd859",
            "filename": "test/parallel/test-child-process-spawn-typeerror.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9bfe55e18419ae9e67f6dc80b42943d2f7d3e9e8/test%2Fparallel%2Ftest-child-process-spawn-typeerror.js",
            "raw_url": "https://github.com/nodejs/node/raw/9bfe55e18419ae9e67f6dc80b42943d2f7d3e9e8/test%2Fparallel%2Ftest-child-process-spawn-typeerror.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-child-process-spawn-typeerror.js?ref=9bfe55e18419ae9e67f6dc80b42943d2f7d3e9e8",
            "patch": "@@ -30,10 +30,10 @@ const invalidcmd = 'hopefully_you_dont_have_this_on_your_machine';\n const empty = fixtures.path('empty.js');\n \n const invalidArgValueError =\n-  common.expectsError({ code: 'ERR_INVALID_ARG_VALUE', type: TypeError }, 13);\n+  common.expectsError({ code: 'ERR_INVALID_ARG_VALUE', type: TypeError }, 14);\n \n const invalidArgTypeError =\n-  common.expectsError({ code: 'ERR_INVALID_ARG_TYPE', type: TypeError }, 11);\n+  common.expectsError({ code: 'ERR_INVALID_ARG_TYPE', type: TypeError }, 10);\n \n assert.throws(function() {\n   const child = spawn(invalidcmd, 'this is not an array');\n@@ -53,7 +53,7 @@ assert.throws(function() {\n \n assert.throws(function() {\n   spawn('');\n-}, invalidArgTypeError);\n+}, invalidArgValueError);\n \n assert.throws(function() {\n   const file = { toString() { return null; } };"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 7,
        "deletions": 4
    }
}