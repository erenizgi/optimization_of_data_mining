{
    "author": "BridgeAR",
    "message": "stream: improve buffer list inspection\n\nThis makes sure the indentation level is correct, no matter if the\ninspected buffer list is inspected on a deeper level and custom\ninspect options are now passed through to the actual inspection.\n\nPR-URL: https://github.com/nodejs/node/pull/23109\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "9c3c0f42739137e7f3b52f659427233ceb735b54",
    "files": [
        {
            "sha": "aa254309a03a5c91758b48d16942bbf6547cb84c",
            "filename": "lib/internal/streams/buffer_list.js",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/9c3c0f42739137e7f3b52f659427233ceb735b54/lib%2Finternal%2Fstreams%2Fbuffer_list.js",
            "raw_url": "https://github.com/nodejs/node/raw/9c3c0f42739137e7f3b52f659427233ceb735b54/lib%2Finternal%2Fstreams%2Fbuffer_list.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fstreams%2Fbuffer_list.js?ref=9c3c0f42739137e7f3b52f659427233ceb735b54",
            "patch": "@@ -158,8 +158,14 @@ module.exports = class BufferList {\n     return ret;\n   }\n \n-  [inspect.custom]() {\n-    const obj = inspect({ length: this.length });\n-    return `${this.constructor.name} ${obj}`;\n+  // Make sure the linked list only shows the minimal necessary information.\n+  [inspect.custom](_, options) {\n+    return inspect(this, {\n+      ...options,\n+      // Only inspect one level.\n+      depth: 0,\n+      // It should not recurse.\n+      customInspect: false\n+    });\n   }\n };"
        },
        {
            "sha": "00024b91200fffeb7b7ec8dafd2fc563fd926d1b",
            "filename": "test/parallel/test-stream2-readable-from-list.js",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9c3c0f42739137e7f3b52f659427233ceb735b54/test%2Fparallel%2Ftest-stream2-readable-from-list.js",
            "raw_url": "https://github.com/nodejs/node/raw/9c3c0f42739137e7f3b52f659427233ceb735b54/test%2Fparallel%2Ftest-stream2-readable-from-list.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stream2-readable-from-list.js?ref=9c3c0f42739137e7f3b52f659427233ceb735b54",
            "patch": "@@ -25,6 +25,7 @@ require('../common');\n const assert = require('assert');\n const fromList = require('_stream_readable')._fromList;\n const BufferList = require('internal/streams/buffer_list');\n+const util = require('util');\n \n function bufferListFromArray(arr) {\n   const bl = new BufferList();\n@@ -41,6 +42,16 @@ function bufferListFromArray(arr) {\n                Buffer.from('kuel') ];\n   list = bufferListFromArray(list);\n \n+  assert.strictEqual(\n+    util.inspect([ list ], { compact: false }),\n+    `[\n+  BufferList {\n+    head: [Object],\n+    tail: [Object],\n+    length: 4\n+  }\n+]`);\n+\n   // read more than the first element.\n   let ret = fromList(6, { buffer: list, length: 16 });\n   assert.strictEqual(ret.toString(), 'foogba');"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 20,
        "deletions": 3
    }
}