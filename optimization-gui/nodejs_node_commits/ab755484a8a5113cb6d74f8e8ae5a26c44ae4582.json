{
    "author": "jasnell",
    "message": "http2: remove some unnecessary next ticks\n\nPR-URL: https://github.com/nodejs/node/pull/19451\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>",
    "sha": "ab755484a8a5113cb6d74f8e8ae5a26c44ae4582",
    "files": [
        {
            "sha": "fc73eccdad92c9e2ad5f32e99a3de91b6cbe579d",
            "filename": "lib/internal/http2/core.js",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/ab755484a8a5113cb6d74f8e8ae5a26c44ae4582/lib%2Finternal%2Fhttp2%2Fcore.js",
            "raw_url": "https://github.com/nodejs/node/raw/ab755484a8a5113cb6d74f8e8ae5a26c44ae4582/lib%2Finternal%2Fhttp2%2Fcore.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fhttp2%2Fcore.js?ref=ab755484a8a5113cb6d74f8e8ae5a26c44ae4582",
            "patch": "@@ -409,7 +409,7 @@ function onSettings() {\n   session[kUpdateTimer]();\n   debug(`Http2Session ${sessionName(session[kType])}: new settings received`);\n   session[kRemoteSettings] = undefined;\n-  process.nextTick(emit, session, 'remoteSettings', session.remoteSettings);\n+  session.emit('remoteSettings', session.remoteSettings);\n }\n \n // If the stream exists, an attempt will be made to emit an event\n@@ -425,7 +425,7 @@ function onPriority(id, parent, weight, exclusive) {\n   const emitter = session[kState].streams.get(id) || session;\n   if (!emitter.destroyed) {\n     emitter[kUpdateTimer]();\n-    process.nextTick(emit, emitter, 'priority', id, parent, weight, exclusive);\n+    emitter.emit('priority', id, parent, weight, exclusive);\n   }\n }\n \n@@ -439,7 +439,7 @@ function onFrameError(id, type, code) {\n         `type ${type} on stream ${id}, code: ${code}`);\n   const emitter = session[kState].streams.get(id) || session;\n   emitter[kUpdateTimer]();\n-  process.nextTick(emit, emitter, 'frameError', type, code, id);\n+  emitter.emit('frameError', type, code, id);\n }\n \n function onAltSvc(stream, origin, alt) {\n@@ -449,7 +449,7 @@ function onAltSvc(stream, origin, alt) {\n   debug(`Http2Session ${sessionName(session[kType])}: altsvc received: ` +\n         `stream: ${stream}, origin: ${origin}, alt: ${alt}`);\n   session[kUpdateTimer]();\n-  process.nextTick(emit, session, 'altsvc', alt, origin, stream);\n+  session.emit('altsvc', alt, origin, stream);\n }\n \n // Receiving a GOAWAY frame from the connected peer is a signal that no\n@@ -771,7 +771,7 @@ function setupHandle(socket, type, options) {\n   // core will check for session.destroyed before progressing, this\n   // ensures that those at l`east get cleared out.\n   if (this.destroyed) {\n-    process.nextTick(emit, this, 'connect', this, socket);\n+    this.emit('connect', this, socket);\n     return;\n   }\n   debug(`Http2Session ${sessionName(type)}: setting up session handle`);\n@@ -813,7 +813,7 @@ function setupHandle(socket, type, options) {\n     options.settings : {};\n \n   this.settings(settings);\n-  process.nextTick(emit, this, 'connect', this, socket);\n+  this.emit('connect', this, socket);\n }\n \n // Emits a close event followed by an error event if err is truthy. Used\n@@ -1262,7 +1262,7 @@ class Http2Session extends EventEmitter {\n       }\n     }\n \n-    process.nextTick(emit, this, 'timeout');\n+    this.emit('timeout');\n   }\n \n   ref() {\n@@ -1485,8 +1485,8 @@ function streamOnPause() {\n function abort(stream) {\n   if (!stream.aborted &&\n       !(stream._writableState.ended || stream._writableState.ending)) {\n-    process.nextTick(emit, stream, 'aborted');\n     stream[kState].flags |= STREAM_FLAGS_ABORTED;\n+    stream.emit('aborted');\n   }\n }\n \n@@ -1612,7 +1612,7 @@ class Http2Stream extends Duplex {\n       }\n     }\n \n-    process.nextTick(emit, this, 'timeout');\n+    this.emit('timeout');\n   }\n \n   // true if the HEADERS frame has been sent"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 9,
        "deletions": 9
    }
}