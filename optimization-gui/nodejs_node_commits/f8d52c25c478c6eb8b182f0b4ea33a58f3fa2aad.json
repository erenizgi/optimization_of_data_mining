{
    "author": "addaleax",
    "message": "src: remove has_experimental_policy option\n\nThis would be set when `--experimental-policy` was set,\nbut since an empty string does not refer to a valid file,\nwe can just check the value of `--experimental-policy`\ndirectly.\n\nPR-URL: https://github.com/nodejs/node/pull/25628\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>",
    "sha": "f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad",
    "files": [
        {
            "sha": "86c0cf7aaf5fa381d7411ff332122ef46bd4bbc3",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad",
            "patch": "@@ -180,10 +180,10 @@ function startup() {\n   }\n \n   // TODO(joyeecheung): move this down further to get better snapshotting\n-  if (getOptionValue('[has_experimental_policy]')) {\n+  const experimentalPolicy = getOptionValue('--experimental-policy');\n+  if (experimentalPolicy) {\n     process.emitWarning('Policies are experimental.',\n                         'ExperimentalWarning');\n-    const experimentalPolicy = getOptionValue('--experimental-policy');\n     const { pathToFileURL, URL } = NativeModule.require('url');\n     // URL here as it is slightly different parsing\n     // no bare specifiers for now"
        },
        {
            "sha": "8b357e5254ce4bc8bd21e1fb7f726643cc5035b3",
            "filename": "lib/internal/modules/cjs/loader.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js",
            "raw_url": "https://github.com/nodejs/node/raw/f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js?ref=f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad",
            "patch": "@@ -45,7 +45,7 @@ const { getOptionValue } = require('internal/options');\n const preserveSymlinks = getOptionValue('--preserve-symlinks');\n const preserveSymlinksMain = getOptionValue('--preserve-symlinks-main');\n const experimentalModules = getOptionValue('--experimental-modules');\n-const manifest = getOptionValue('[has_experimental_policy]') ?\n+const manifest = getOptionValue('--experimental-policy') ?\n   require('internal/process/policy').manifest :\n   null;\n "
        },
        {
            "sha": "9abd6c870a589e777f5a1027536958d5757dc0fe",
            "filename": "src/node_options.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad/src%2Fnode_options.cc",
            "raw_url": "https://github.com/nodejs/node/raw/f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad/src%2Fnode_options.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_options.cc?ref=f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad",
            "patch": "@@ -143,15 +143,11 @@ EnvironmentOptionsParser::EnvironmentOptionsParser() {\n             \"experimental ES Module support and caching modules\",\n             &EnvironmentOptions::experimental_modules,\n             kAllowedInEnvironment);\n-  AddOption(\"[has_experimental_policy]\",\n-            \"\",\n-            &EnvironmentOptions::has_experimental_policy);\n   AddOption(\"--experimental-policy\",\n             \"use the specified file as a \"\n             \"security policy\",\n             &EnvironmentOptions::experimental_policy,\n             kAllowedInEnvironment);\n-  Implies(\"--experimental-policy\", \"[has_experimental_policy]\");\n   AddOption(\"--experimental-repl-await\",\n             \"experimental await keyword support in REPL\",\n             &EnvironmentOptions::experimental_repl_await,"
        },
        {
            "sha": "82c2b6e385275a6ad61bd837e0a196accf5451c3",
            "filename": "src/node_options.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad/src%2Fnode_options.h",
            "raw_url": "https://github.com/nodejs/node/raw/f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad/src%2Fnode_options.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_options.h?ref=f8d52c25c478c6eb8b182f0b4ea33a58f3fa2aad",
            "patch": "@@ -95,7 +95,6 @@ class EnvironmentOptions : public Options {\n   bool abort_on_uncaught_exception = false;\n   bool experimental_modules = false;\n   std::string experimental_policy;\n-  bool has_experimental_policy;\n   bool experimental_repl_await = false;\n   bool experimental_vm_modules = false;\n   bool expose_internals = false;"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 3,
        "deletions": 8
    }
}