{
    "author": "rvagg",
    "message": "build: fix check-xz for platforms defaulting to sh\n\n5e80a9a160 introduced check-xz, using `[[ .. ]]` syntax, but this is a\nbash builtin and some platforms default to `sh` when doing\n`$(shell ...)` in Makefiles.\n\nFix is to make it sh friendly.\n\nRef: https://github.com/nodejs/node/pull/24551\n\nPR-URL: https://github.com/nodejs/node/pull/24841\nRefs: https://github.com/nodejs/node/pull/24551\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>",
    "sha": "6ccc80c82a7e21bc9315d6fdccea62ce8e2712a7",
    "files": [
        {
            "sha": "6fdd9b8d4b285035e686714e72eaa7b2e2008682",
            "filename": "Makefile",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6ccc80c82a7e21bc9315d6fdccea62ce8e2712a7/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/6ccc80c82a7e21bc9315d6fdccea62ce8e2712a7/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=6ccc80c82a7e21bc9315d6fdccea62ce8e2712a7",
            "patch": "@@ -851,10 +851,10 @@ BINARYNAME=$(TARNAME)-$(PLATFORM)-$(ARCH)\n endif\n BINARYTAR=$(BINARYNAME).tar\n # OSX doesn't have xz installed by default, http://macpkg.sourceforge.net/\n-HAS_XZ ?= $(shell which xz > /dev/null 2>&1; [[ $$? = 0 ]] && echo 1 || echo 0)\n+HAS_XZ ?= $(shell which xz > /dev/null 2>&1; [ $$? -eq 0 ] && echo 1 || echo 0)\n # Supply SKIP_XZ=1 to explicitly skip .tar.xz creation\n SKIP_XZ ?= 0\n-XZ = $(shell [[ $(HAS_XZ) = 1 && $(SKIP_XZ) = 0 ]] && echo 1 || echo 0)\n+XZ = $(shell [ $(HAS_XZ) -eq 1 -a $(SKIP_XZ) -eq 0 ] && echo 1 || echo 0)\n XZ_COMPRESSION ?= 9e\n PKG=$(TARNAME).pkg\n MACOSOUTDIR=out/macos"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}