{
    "author": "danbev",
    "message": "tls: specify options.name in validateKeyCert\n\nThis commit addresses a TODO added by Ruben Bridgewater in commit\nc6b6c92185316e13738e6fa931fdd5303e381e46 (\"lib: always show\nERR_INVALID_ARG_TYPE received part\") which was to prefix the name of\nthe invalid argument with 'options.'.\n\nThis commit also switches the order of the parameters to validateKeyCert\nto be consistent with other validators.\n\nPR-URL: https://github.com/nodejs/node/pull/20284\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "e10cb7fdda85bdf3204ae40843d64e56cf07e5a8",
    "files": [
        {
            "sha": "d8f6afed0bd8fb1101ae4375d9f4e36eb19a59f2",
            "filename": "lib/_tls_common.js",
            "status": "modified",
            "additions": 8,
            "deletions": 9,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/e10cb7fdda85bdf3204ae40843d64e56cf07e5a8/lib%2F_tls_common.js",
            "raw_url": "https://github.com/nodejs/node/raw/e10cb7fdda85bdf3204ae40843d64e56cf07e5a8/lib%2F_tls_common.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_tls_common.js?ref=e10cb7fdda85bdf3204ae40843d64e56cf07e5a8",
            "patch": "@@ -56,11 +56,10 @@ function SecureContext(secureProtocol, secureOptions, context) {\n   if (secureOptions) this.context.setOptions(secureOptions);\n }\n \n-function validateKeyCert(value, type) {\n+function validateKeyCert(name, value) {\n   if (typeof value !== 'string' && !isArrayBufferView(value)) {\n     throw new ERR_INVALID_ARG_TYPE(\n-      // TODO(BridgeAR): Change this to `options.${type}`\n-      type,\n+      `options.${name}`,\n       ['string', 'Buffer', 'TypedArray', 'DataView'],\n       value\n     );\n@@ -100,11 +99,11 @@ exports.createSecureContext = function createSecureContext(options, context) {\n     if (Array.isArray(ca)) {\n       for (i = 0; i < ca.length; ++i) {\n         val = ca[i];\n-        validateKeyCert(val, 'ca');\n+        validateKeyCert('ca', val);\n         c.context.addCACert(val);\n       }\n     } else {\n-      validateKeyCert(ca, 'ca');\n+      validateKeyCert('ca', ca);\n       c.context.addCACert(ca);\n     }\n   } else {\n@@ -116,11 +115,11 @@ exports.createSecureContext = function createSecureContext(options, context) {\n     if (Array.isArray(cert)) {\n       for (i = 0; i < cert.length; ++i) {\n         val = cert[i];\n-        validateKeyCert(val, 'cert');\n+        validateKeyCert('cert', val);\n         c.context.setCert(val);\n       }\n     } else {\n-      validateKeyCert(cert, 'cert');\n+      validateKeyCert('cert', cert);\n       c.context.setCert(cert);\n     }\n   }\n@@ -137,11 +136,11 @@ exports.createSecureContext = function createSecureContext(options, context) {\n         val = key[i];\n         // eslint-disable-next-line eqeqeq\n         const pem = (val != undefined && val.pem !== undefined ? val.pem : val);\n-        validateKeyCert(pem, 'key');\n+        validateKeyCert('key', pem);\n         c.context.setKey(pem, val.passphrase || passphrase);\n       }\n     } else {\n-      validateKeyCert(key, 'key');\n+      validateKeyCert('key', key);\n       c.context.setKey(key, passphrase);\n     }\n   }"
        },
        {
            "sha": "bed5fb03253f7f81b2106f4bde29d9fe35c967b3",
            "filename": "test/parallel/test-https-options-boolean-check.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/e10cb7fdda85bdf3204ae40843d64e56cf07e5a8/test%2Fparallel%2Ftest-https-options-boolean-check.js",
            "raw_url": "https://github.com/nodejs/node/raw/e10cb7fdda85bdf3204ae40843d64e56cf07e5a8/test%2Fparallel%2Ftest-https-options-boolean-check.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-https-options-boolean-check.js?ref=e10cb7fdda85bdf3204ae40843d64e56cf07e5a8",
            "patch": "@@ -88,7 +88,7 @@ const caArrDataView = toDataView(caCert);\n   }, {\n     code: 'ERR_INVALID_ARG_TYPE',\n     name: 'TypeError [ERR_INVALID_ARG_TYPE]',\n-    message: 'The \"key\" argument must be one of type string, Buffer, ' +\n+    message: 'The \"options.key\" property must be one of type string, Buffer, ' +\n              `TypedArray, or DataView. Received type ${type}`\n   });\n });\n@@ -113,8 +113,8 @@ const caArrDataView = toDataView(caCert);\n   }, {\n     code: 'ERR_INVALID_ARG_TYPE',\n     name: 'TypeError [ERR_INVALID_ARG_TYPE]',\n-    message: 'The \"cert\" argument must be one of type string, Buffer, ' +\n-             `TypedArray, or DataView. Received type ${type}`\n+    message: 'The \"options.cert\" property must be one of type string, Buffer,' +\n+             ` TypedArray, or DataView. Received type ${type}`\n   });\n });\n \n@@ -147,7 +147,7 @@ const caArrDataView = toDataView(caCert);\n   }, {\n     code: 'ERR_INVALID_ARG_TYPE',\n     name: 'TypeError [ERR_INVALID_ARG_TYPE]',\n-    message: 'The \"ca\" argument must be one of type string, Buffer, ' +\n+    message: 'The \"options.ca\" property must be one of type string, Buffer, ' +\n              `TypedArray, or DataView. Received type ${type}`\n   });\n });"
        },
        {
            "sha": "242df1140e41c27ea85292d6ce0299ec2097ddae",
            "filename": "test/parallel/test-tls-options-boolean-check.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/e10cb7fdda85bdf3204ae40843d64e56cf07e5a8/test%2Fparallel%2Ftest-tls-options-boolean-check.js",
            "raw_url": "https://github.com/nodejs/node/raw/e10cb7fdda85bdf3204ae40843d64e56cf07e5a8/test%2Fparallel%2Ftest-tls-options-boolean-check.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-options-boolean-check.js?ref=e10cb7fdda85bdf3204ae40843d64e56cf07e5a8",
            "patch": "@@ -86,7 +86,7 @@ const caArrDataView = toDataView(caCert);\n   }, {\n     code: 'ERR_INVALID_ARG_TYPE',\n     type: TypeError,\n-    message: 'The \"key\" argument must be one of type string, Buffer, ' +\n+    message: 'The \"options.key\" property must be one of type string, Buffer, ' +\n              `TypedArray, or DataView. Received type ${type}`\n   });\n });\n@@ -111,8 +111,8 @@ const caArrDataView = toDataView(caCert);\n   }, {\n     code: 'ERR_INVALID_ARG_TYPE',\n     type: TypeError,\n-    message: 'The \"cert\" argument must be one of type string, Buffer, ' +\n-             `TypedArray, or DataView. Received type ${type}`\n+    message: 'The \"options.cert\" property must be one of type string, Buffer,' +\n+             ` TypedArray, or DataView. Received type ${type}`\n   });\n });\n \n@@ -145,7 +145,7 @@ const caArrDataView = toDataView(caCert);\n   }, {\n     code: 'ERR_INVALID_ARG_TYPE',\n     type: TypeError,\n-    message: 'The \"ca\" argument must be one of type string, Buffer, ' +\n+    message: 'The \"options.ca\" property must be one of type string, Buffer, ' +\n              `TypedArray, or DataView. Received type ${type}`\n   });\n });"
        }
    ],
    "stats": {
        "total": 33,
        "additions": 16,
        "deletions": 17
    }
}