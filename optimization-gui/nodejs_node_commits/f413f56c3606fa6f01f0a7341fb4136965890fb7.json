{
    "author": "BridgeAR",
    "message": "util: fix inspect performance bug\n\nIn case an object contained a circular reference `Object.keys` was\ncalled even though it was not necessary at all. This caused a\nsignificant overhead for objects that contained a lot of such entries.\n\nPR-URL: https://github.com/nodejs/node/pull/20007\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "f413f56c3606fa6f01f0a7341fb4136965890fb7",
    "files": [
        {
            "sha": "762461402e99c79d5fd0d78027df7eea96d95229",
            "filename": "lib/util.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/f413f56c3606fa6f01f0a7341fb4136965890fb7/lib%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/f413f56c3606fa6f01f0a7341fb4136965890fb7/lib%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Futil.js?ref=f413f56c3606fa6f01f0a7341fb4136965890fb7",
            "patch": "@@ -456,6 +456,11 @@ function formatValue(ctx, value, recurseTimes, ln) {\n     }\n   }\n \n+  // Using an array here is actually better for the average case than using\n+  // a Set. `seen` will only check for the depth and will never grow too large.\n+  if (ctx.seen.indexOf(value) !== -1)\n+    return ctx.stylize('[Circular]', 'special');\n+\n   let keys;\n   let symbols = Object.getOwnPropertySymbols(value);\n \n@@ -640,11 +645,6 @@ function formatValue(ctx, value, recurseTimes, ln) {\n     }\n   }\n \n-  // Using an array here is actually better for the average case than using\n-  // a Set. `seen` will only check for the depth and will never grow too large.\n-  if (ctx.seen.indexOf(value) !== -1)\n-    return ctx.stylize('[Circular]', 'special');\n-\n   if (recurseTimes != null) {\n     if (recurseTimes < 0)\n       return ctx.stylize(`[${constructor || tag || 'Object'}]`, 'special');"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 5,
        "deletions": 5
    }
}