{
    "author": "juanarbol",
    "message": "src: elevate v8 namespaces referenced\n\nPR-URL: https://github.com/nodejs/node/pull/24657\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>",
    "sha": "d4273c4e74b923deb258c8f760e915eb3b25e18d",
    "files": [
        {
            "sha": "6a354c0aec898cb65509fa39b4f56a6f97a0a177",
            "filename": "src/async_wrap.cc",
            "status": "modified",
            "additions": 22,
            "deletions": 16,
            "changes": 38,
            "blob_url": "https://github.com/nodejs/node/blob/d4273c4e74b923deb258c8f760e915eb3b25e18d/src%2Fasync_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/d4273c4e74b923deb258c8f760e915eb3b25e18d/src%2Fasync_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fasync_wrap.cc?ref=d4273c4e74b923deb258c8f760e915eb3b25e18d",
            "patch": "@@ -30,6 +30,8 @@\n #include \"v8-profiler.h\"\n \n using v8::Context;\n+using v8::DontDelete;\n+using v8::EscapableHandleScope;\n using v8::Function;\n using v8::FunctionCallbackInfo;\n using v8::FunctionTemplate;\n@@ -38,16 +40,22 @@ using v8::Integer;\n using v8::Isolate;\n using v8::Local;\n using v8::MaybeLocal;\n+using v8::NewStringType;\n using v8::Number;\n using v8::Object;\n using v8::ObjectTemplate;\n using v8::Promise;\n using v8::PromiseHookType;\n+using v8::PropertyAttribute;\n using v8::PropertyCallbackInfo;\n+using v8::ReadOnly;\n using v8::String;\n+using v8::TryCatch;\n using v8::Uint32;\n using v8::Undefined;\n using v8::Value;\n+using v8::WeakCallbackInfo;\n+using v8::WeakCallbackType;\n \n using AsyncHooks = node::Environment::AsyncHooks;\n \n@@ -117,7 +125,7 @@ void Emit(Environment* env, double async_id, AsyncHooks::Fields type,\n   if (async_hooks->fields()[type] == 0 || !env->can_call_into_js())\n     return;\n \n-  v8::HandleScope handle_scope(env->isolate());\n+  HandleScope handle_scope(env->isolate());\n   Local<Value> async_id_value = Number::New(env->isolate(), async_id);\n   FatalTryCatch try_catch(env);\n   USE(fn->Call(env->context(), Undefined(env->isolate()), 1, &async_id_value));\n@@ -341,8 +349,7 @@ class DestroyParam {\n   Persistent<Object> propBag;\n };\n \n-\n-void AsyncWrap::WeakCallback(const v8::WeakCallbackInfo<DestroyParam>& info) {\n+void AsyncWrap::WeakCallback(const WeakCallbackInfo<DestroyParam>& info) {\n   HandleScope scope(info.GetIsolate());\n \n   std::unique_ptr<DestroyParam> p{info.GetParameter()};\n@@ -373,8 +380,7 @@ static void RegisterDestroyHook(const FunctionCallbackInfo<Value>& args) {\n   p->env = Environment::GetCurrent(args);\n   p->target.Reset(isolate, args[0].As<Object>());\n   p->propBag.Reset(isolate, args[2].As<Object>());\n-  p->target.SetWeak(\n-    p, AsyncWrap::WeakCallback, v8::WeakCallbackType::kParameter);\n+  p->target.SetWeak(p, AsyncWrap::WeakCallback, WeakCallbackType::kParameter);\n }\n \n \n@@ -448,8 +454,8 @@ void AsyncWrap::Initialize(Local<Object> target,\n   env->SetMethod(target, \"disablePromiseHook\", DisablePromiseHook);\n   env->SetMethod(target, \"registerDestroyHook\", RegisterDestroyHook);\n \n-  v8::PropertyAttribute ReadOnlyDontDelete =\n-      static_cast<v8::PropertyAttribute>(v8::ReadOnly | v8::DontDelete);\n+  PropertyAttribute ReadOnlyDontDelete =\n+      static_cast<PropertyAttribute>(ReadOnly | DontDelete);\n \n #define FORCE_SET_TARGET_FIELD(obj, str, field)                               \\\n   (obj)->DefineOwnProperty(context,                                           \\\n@@ -695,7 +701,7 @@ MaybeLocal<Value> AsyncWrap::MakeCallback(const Local<Function> cb,\n \n async_id AsyncHooksGetExecutionAsyncId(Isolate* isolate) {\n   // Environment::GetCurrent() allocates a Local<> handle.\n-  v8::HandleScope handle_scope(isolate);\n+  HandleScope handle_scope(isolate);\n   Environment* env = Environment::GetCurrent(isolate);\n   if (env == nullptr) return -1;\n   return env->execution_async_id();\n@@ -704,7 +710,7 @@ async_id AsyncHooksGetExecutionAsyncId(Isolate* isolate) {\n \n async_id AsyncHooksGetTriggerAsyncId(Isolate* isolate) {\n   // Environment::GetCurrent() allocates a Local<> handle.\n-  v8::HandleScope handle_scope(isolate);\n+  HandleScope handle_scope(isolate);\n   Environment* env = Environment::GetCurrent(isolate);\n   if (env == nullptr) return -1;\n   return env->trigger_async_id();\n@@ -715,18 +721,18 @@ async_context EmitAsyncInit(Isolate* isolate,\n                             Local<Object> resource,\n                             const char* name,\n                             async_id trigger_async_id) {\n-  v8::HandleScope handle_scope(isolate);\n+  HandleScope handle_scope(isolate);\n   Local<String> type =\n-      String::NewFromUtf8(isolate, name, v8::NewStringType::kInternalized)\n+      String::NewFromUtf8(isolate, name, NewStringType::kInternalized)\n           .ToLocalChecked();\n   return EmitAsyncInit(isolate, resource, type, trigger_async_id);\n }\n \n async_context EmitAsyncInit(Isolate* isolate,\n                             Local<Object> resource,\n-                            v8::Local<v8::String> name,\n+                            Local<String> name,\n                             async_id trigger_async_id) {\n-  v8::HandleScope handle_scope(isolate);\n+  HandleScope handle_scope(isolate);\n   Environment* env = Environment::GetCurrent(isolate);\n   CHECK_NOT_NULL(env);\n \n@@ -748,7 +754,7 @@ async_context EmitAsyncInit(Isolate* isolate,\n \n void EmitAsyncDestroy(Isolate* isolate, async_context asyncContext) {\n   // Environment::GetCurrent() allocates a Local<> handle.\n-  v8::HandleScope handle_scope(isolate);\n+  HandleScope handle_scope(isolate);\n   AsyncWrap::EmitDestroy(\n       Environment::GetCurrent(isolate), asyncContext.async_id);\n }\n@@ -767,10 +773,10 @@ Local<Object> AsyncWrap::GetOwner() {\n }\n \n Local<Object> AsyncWrap::GetOwner(Environment* env, Local<Object> obj) {\n-  v8::EscapableHandleScope handle_scope(env->isolate());\n+  EscapableHandleScope handle_scope(env->isolate());\n   CHECK(!obj.IsEmpty());\n \n-  v8::TryCatch ignore_exceptions(env->isolate());\n+  TryCatch ignore_exceptions(env->isolate());\n   while (true) {\n     Local<Value> owner;\n     if (!obj->Get(env->context(),"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 22,
        "deletions": 16
    }
}