{
    "author": "BridgeAR",
    "message": "repl: remove magic mode\n\nThe magic mode is long deprecated and works the same as the sloppy\nmode. Since the sloppy mode is the default, removing the magic mode\nshould be safe.\n\nPR-URL: https://github.com/nodejs/node/pull/19187\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Michaël Zasso <targos@protonmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>",
    "sha": "4893f70d12691208abf8c668d8347240df561f14",
    "files": [
        {
            "sha": "02822b5396ac22b8962981025316d8540dbdf095",
            "filename": "doc/api/deprecations.md",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/4893f70d12691208abf8c668d8347240df561f14/doc%2Fapi%2Fdeprecations.md",
            "raw_url": "https://github.com/nodejs/node/raw/4893f70d12691208abf8c668d8347240df561f14/doc%2Fapi%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fdeprecations.md?ref=4893f70d12691208abf8c668d8347240df561f14",
            "patch": "@@ -560,16 +560,16 @@ The `tls.createSecurePair()` API was deprecated in documentation in Node.js\n <a id=\"DEP0065\"></a>\n ### DEP0065: repl.REPL_MODE_MAGIC and NODE_REPL_MODE=magic\n \n-Type: Documentation-only\n+Type: End-of-Life\n \n The `repl` module's `REPL_MODE_MAGIC` constant, used for `replMode` option, has\n-been deprecated. Its behavior has been functionally identical to that of\n+been removed. Its behavior has been functionally identical to that of\n `REPL_MODE_SLOPPY` since Node.js v6.0.0, when V8 5.0 was imported. Please use\n `REPL_MODE_SLOPPY` instead.\n \n The `NODE_REPL_MODE` environment variable is used to set the underlying\n-`replMode` of an interactive `node` session. Its default value, `magic`, is\n-similarly deprecated in favor of `sloppy`.\n+`replMode` of an interactive `node` session. Its value, `magic`, is also\n+removed. Please use `sloppy` instead.\n \n <a id=\"DEP0066\"></a>\n ### DEP0066: outgoingMessage.\\_headers, outgoingMessage.\\_headerNames"
        },
        {
            "sha": "9e6d1e8a1ed2736cef6a509913054efdddc5599a",
            "filename": "doc/api/repl.md",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/4893f70d12691208abf8c668d8347240df561f14/doc%2Fapi%2Frepl.md",
            "raw_url": "https://github.com/nodejs/node/raw/4893f70d12691208abf8c668d8347240df561f14/doc%2Fapi%2Frepl.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Frepl.md?ref=4893f70d12691208abf8c668d8347240df561f14",
            "patch": "@@ -421,6 +421,9 @@ Returns `true` if `keyword` is a valid keyword, otherwise `false`.\n <!-- YAML\n added: v0.1.91\n changes:\n+  - version: REPLACEME\n+    pr-url: https://github.com/nodejs/node/pull/REPLACEME\n+    description: The `REPL_MAGIC_MODE` replMode was removed.\n   - version: v5.8.0\n     pr-url: https://github.com/nodejs/node/pull/5388\n     description: The `options` parameter is optional now.\n@@ -462,9 +465,6 @@ changes:\n     * `repl.REPL_MODE_SLOPPY` - evaluates expressions in sloppy mode.\n     * `repl.REPL_MODE_STRICT` - evaluates expressions in strict mode. This is\n       equivalent to prefacing every repl statement with `'use strict'`.\n-    * `repl.REPL_MODE_MAGIC` - This value is **deprecated**, since enhanced\n-      spec compliance in V8 has rendered magic mode unnecessary. It is now\n-      equivalent to `repl.REPL_MODE_SLOPPY` (documented above).\n   * `breakEvalOnSigint` - Stop evaluating the current piece of code when\n     `SIGINT` is received, i.e. `Ctrl+C` is pressed. This cannot be used together\n     with a custom `eval` function. Defaults to `false`.\n@@ -512,9 +512,8 @@ environment variables:\n    REPL history. Whitespace will be trimmed from the value.\n  - `NODE_REPL_HISTORY_SIZE` - Defaults to `1000`. Controls how many lines of\n    history will be persisted if history is available. Must be a positive number.\n- - `NODE_REPL_MODE` - May be any of `sloppy`, `strict`, or `magic`. Defaults\n-   to `sloppy`, which will allow non-strict mode code to be run. `magic` is\n-   **deprecated** and treated as an alias of `sloppy`.\n+ - `NODE_REPL_MODE` - May be either `sloppy` or `strict`. Defaults\n+   to `sloppy`, which will allow non-strict mode code to be run.\n \n ### Persistent History\n "
        },
        {
            "sha": "3cfa1996d8c36162a6bef0ba0cc0c26b45741efe",
            "filename": "lib/repl.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/4893f70d12691208abf8c668d8347240df561f14/lib%2Frepl.js",
            "raw_url": "https://github.com/nodejs/node/raw/4893f70d12691208abf8c668d8347240df561f14/lib%2Frepl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Frepl.js?ref=4893f70d12691208abf8c668d8347240df561f14",
            "patch": "@@ -716,7 +716,6 @@ exports.REPLServer = REPLServer;\n \n exports.REPL_MODE_SLOPPY = Symbol('repl-sloppy');\n exports.REPL_MODE_STRICT = Symbol('repl-strict');\n-exports.REPL_MODE_MAGIC = exports.REPL_MODE_SLOPPY;\n \n // prompt is a string to print on each line for the prompt,\n // source is a stream to use for I/O, defaulting to stdin/stdout."
        },
        {
            "sha": "3b373669ed60bb43ad492909191ada7e2528cf5c",
            "filename": "test/parallel/test-repl-options.js",
            "status": "modified",
            "additions": 3,
            "deletions": 13,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/4893f70d12691208abf8c668d8347240df561f14/test%2Fparallel%2Ftest-repl-options.js",
            "raw_url": "https://github.com/nodejs/node/raw/4893f70d12691208abf8c668d8347240df561f14/test%2Fparallel%2Ftest-repl-options.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-options.js?ref=4893f70d12691208abf8c668d8347240df561f14",
            "patch": "@@ -67,7 +67,8 @@ const r2 = repl.start({\n   ignoreUndefined: true,\n   eval: evaler,\n   writer: writer,\n-  replMode: repl.REPL_MODE_STRICT\n+  replMode: repl.REPL_MODE_STRICT,\n+  historySize: 50\n });\n assert.strictEqual(r2.input, stream);\n assert.strictEqual(r2.output, stream);\n@@ -79,6 +80,7 @@ assert.strictEqual(r2.useGlobal, true);\n assert.strictEqual(r2.ignoreUndefined, true);\n assert.strictEqual(r2.writer, writer);\n assert.strictEqual(r2.replMode, repl.REPL_MODE_STRICT);\n+assert.strictEqual(r2.historySize, 50);\n \n // test r2 for backwards compact\n assert.strictEqual(r2.rli.input, stream);\n@@ -87,18 +89,6 @@ assert.strictEqual(r2.rli.input, r2.inputStream);\n assert.strictEqual(r2.rli.output, r2.outputStream);\n assert.strictEqual(r2.rli.terminal, false);\n \n-// testing out \"magic\" replMode\n-const r3 = repl.start({\n-  input: stream,\n-  output: stream,\n-  writer: writer,\n-  replMode: repl.REPL_MODE_MAGIC,\n-  historySize: 50\n-});\n-\n-assert.strictEqual(r3.replMode, repl.REPL_MODE_MAGIC);\n-assert.strictEqual(r3.historySize, 50);\n-\n // Verify that defaults are used when no arguments are provided\n const r4 = repl.start();\n "
        }
    ],
    "stats": {
        "total": 36,
        "additions": 12,
        "deletions": 24
    }
}