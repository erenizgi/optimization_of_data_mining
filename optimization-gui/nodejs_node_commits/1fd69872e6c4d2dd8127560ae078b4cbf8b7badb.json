{
    "author": "MylesBorins",
    "message": "test: add common.skipIfEslintMissing\n\nWe've added a number of tests that hook into ESLint which can error\nwhen running the test suite with the distributed tarball. This PR\nadds a new test helper `common.skipIfEslintMissing` and will skip\nremaining tests in a file when `ESLint` is not available at\n`tools/node_modules/eslint`\n\nPR-URL: https://github.com/nodejs/node/pull/18807\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Yuta Hiroto <hello@about-hiroppy.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
    "files": [
        {
            "sha": "18f0e4915b19d20dfa8564b0701e72d6a94da7b2",
            "filename": "test/common/README.md",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fcommon%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fcommon%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2FREADME.md?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -353,6 +353,11 @@ Path to the 'root' directory. either `/` or `c:\\\\` (windows)\n \n Logs '1..0 # Skipped: ' + `msg` and exits with exit code `0`.\n \n+### skipIfEslintMissing()\n+\n+Skip the rest of the tests in the current file when `ESLint` is not available\n+at `tools/node_modules/eslint`\n+\n ### skipIfInspectorDisabled()\n \n Skip the rest of the tests in the current file when the Inspector"
        },
        {
            "sha": "a38b9852086f2fcdf4c9a0ced061b55c864102e8",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -494,6 +494,14 @@ exports.fileExists = function(pathname) {\n   }\n };\n \n+exports.skipIfEslintMissing = function() {\n+  if (!exports.fileExists(\n+    path.join('..', '..', 'tools', 'node_modules', 'eslint')\n+  )) {\n+    exports.skip('missing ESLint');\n+  }\n+};\n+\n exports.canCreateSymLink = function() {\n   // On Windows, creating symlinks requires admin privileges.\n   // We'll only try to run symlink test if we have enough privileges."
        },
        {
            "sha": "f7549f171d6afdb41788d425a23669d1fe8eb17e",
            "filename": "test/parallel/test-eslint-crypto-check.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-crypto-check.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-crypto-check.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-crypto-check.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/crypto-check');"
        },
        {
            "sha": "929ff03c656cd61ba07bf1f91d5b32d81d9d0c24",
            "filename": "test/parallel/test-eslint-lowercase-name-for-primitive.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-lowercase-name-for-primitive.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-lowercase-name-for-primitive.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-lowercase-name-for-primitive.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/lowercase-name-for-primitive');"
        },
        {
            "sha": "ed8f306eea8ad56e0bd8da9e7233adf0dc356cfa",
            "filename": "test/parallel/test-eslint-no-let-in-for-declaration.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-no-let-in-for-declaration.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-no-let-in-for-declaration.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-no-let-in-for-declaration.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/no-let-in-for-declaration');"
        },
        {
            "sha": "e6f09291b0838da4d77dec2c7535dd61c224d071",
            "filename": "test/parallel/test-eslint-no-unescaped-regexp-dot.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-no-unescaped-regexp-dot.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-no-unescaped-regexp-dot.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-no-unescaped-regexp-dot.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/no-unescaped-regexp-dot');"
        },
        {
            "sha": "b290a48a8957e7b4325b848de0e58bb8ff70287b",
            "filename": "test/parallel/test-eslint-number-isnan.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-number-isnan.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-number-isnan.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-number-isnan.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/number-isnan');"
        },
        {
            "sha": "7dc3bbe7bcda4dbffce32018aed8989a0234d584",
            "filename": "test/parallel/test-eslint-prefer-assert-iferror.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-assert-iferror.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-assert-iferror.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-assert-iferror.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/prefer-assert-iferror');"
        },
        {
            "sha": "3ad1cd5c376e9beccd5e53e84b9860f32458bb3b",
            "filename": "test/parallel/test-eslint-prefer-assert-methods.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-assert-methods.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-assert-methods.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-assert-methods.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/prefer-assert-methods');"
        },
        {
            "sha": "e0d208b68bb74328ef344e1192f2d9a98164ab8d",
            "filename": "test/parallel/test-eslint-prefer-common-expectserror.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-common-expectserror.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-common-expectserror.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-common-expectserror.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/prefer-common-expectserror');"
        },
        {
            "sha": "e6e9d1d2f883326734e6eb2fd9ac041fa0750362",
            "filename": "test/parallel/test-eslint-prefer-common-mustnotcall.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-common-mustnotcall.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-common-mustnotcall.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-common-mustnotcall.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/prefer-common-mustnotcall');"
        },
        {
            "sha": "560222438b9aee21ea14662565a5524a1ffc5ae1",
            "filename": "test/parallel/test-eslint-prefer-util-format-errors.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-util-format-errors.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-prefer-util-format-errors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-prefer-util-format-errors.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -2,7 +2,9 @@\n \n /* eslint-disable no-template-curly-in-string */\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/prefer-util-format-errors');"
        },
        {
            "sha": "ca2c44cb322515425ef83023f1496723546c5c49",
            "filename": "test/parallel/test-eslint-require-buffer.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-require-buffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-require-buffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-require-buffer.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/require-buffer');"
        },
        {
            "sha": "dbdc135ccf633fbdfd443c0a783e34e68b99a628",
            "filename": "test/parallel/test-eslint-required-modules.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-required-modules.js",
            "raw_url": "https://github.com/nodejs/node/raw/1fd69872e6c4d2dd8127560ae078b4cbf8b7badb/test%2Fparallel%2Ftest-eslint-required-modules.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-eslint-required-modules.js?ref=1fd69872e6c4d2dd8127560ae078b4cbf8b7badb",
            "patch": "@@ -1,6 +1,8 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n+\n+common.skipIfEslintMissing();\n \n const RuleTester = require('../../tools/node_modules/eslint').RuleTester;\n const rule = require('../../tools/eslint-rules/required-modules');"
        }
    ],
    "stats": {
        "total": 61,
        "additions": 49,
        "deletions": 12
    }
}