{
    "author": "cjihrig",
    "message": "src: use isolate version of BooleanValue()\n\nThis fixes deprecation warnings.\n\nPR-URL: https://github.com/nodejs/node/pull/24883\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "24e6b709eadd320ae39fd942261ac111446bb3c9",
    "files": [
        {
            "sha": "ede398772648b101d6a3b8f80f9bfb760a7b9c7d",
            "filename": "src/inspector_js_api.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Finspector_js_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Finspector_js_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_js_api.cc?ref=24e6b709eadd320ae39fd942261ac111446bb3c9",
            "patch": "@@ -215,7 +215,7 @@ static void AsyncTaskScheduledWrapper(const FunctionCallbackInfo<Value>& args) {\n   void* task = GetAsyncTask(task_id);\n \n   CHECK(args[2]->IsBoolean());\n-  bool recurring = args[2]->BooleanValue(env->context()).FromJust();\n+  bool recurring = args[2]->BooleanValue(args.GetIsolate());\n \n   env->inspector_agent()->AsyncTaskScheduled(task_name_view, task, recurring);\n }\n@@ -252,7 +252,7 @@ void Open(const FunctionCallbackInfo<Value>& args) {\n   }\n \n   if (args.Length() > 2 && args[2]->IsBoolean()) {\n-    wait_for_connect = args[2]->BooleanValue(env->context()).FromJust();\n+    wait_for_connect = args[2]->BooleanValue(args.GetIsolate());\n   }\n   agent->StartIoThread();\n   if (wait_for_connect)"
        },
        {
            "sha": "16d958ea88959922889d5e61345b9d759f732950",
            "filename": "src/node_crypto.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fnode_crypto.cc",
            "raw_url": "https://github.com/nodejs/node/raw/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fnode_crypto.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.cc?ref=24e6b709eadd320ae39fd942261ac111446bb3c9",
            "patch": "@@ -5751,8 +5751,8 @@ void SetFipsCrypto(const FunctionCallbackInfo<Value>& args) {\n   CHECK(!per_process_opts->force_fips_crypto);\n   Environment* env = Environment::GetCurrent(args);\n   const bool enabled = FIPS_mode();\n-  bool enable;\n-  if (!args[0]->BooleanValue(env->context()).To(&enable)) return;\n+  bool enable = args[0]->BooleanValue(env->isolate());\n+\n   if (enable == enabled)\n     return;  // No action needed.\n   if (!FIPS_mode_set(enable)) {"
        },
        {
            "sha": "1489d8b6f88b0045863accf4a2acd704a67f280e",
            "filename": "src/node_http2.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fnode_http2.cc",
            "raw_url": "https://github.com/nodejs/node/raw/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fnode_http2.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http2.cc?ref=24e6b709eadd320ae39fd942261ac111446bb3c9",
            "patch": "@@ -341,7 +341,7 @@ Http2Priority::Http2Priority(Environment* env,\n   Local<Context> context = env->context();\n   int32_t parent_ = parent->Int32Value(context).ToChecked();\n   int32_t weight_ = weight->Int32Value(context).ToChecked();\n-  bool exclusive_ = exclusive->BooleanValue(context).ToChecked();\n+  bool exclusive_ = exclusive->BooleanValue(env->isolate());\n   Debug(env, DebugCategory::HTTP2STREAM,\n         \"Http2Priority: parent: %d, weight: %d, exclusive: %d\\n\",\n         parent_, weight_, exclusive_);\n@@ -1096,7 +1096,7 @@ int Http2Session::OnStreamClose(nghttp2_session* handle,\n     stream->MakeCallback(env->http2session_on_stream_close_function(),\n                           1, &arg);\n   if (answer.IsEmpty() ||\n-      !(answer.ToLocalChecked()->BooleanValue(env->context()).FromJust())) {\n+      !(answer.ToLocalChecked()->BooleanValue(env->isolate()))) {\n     // Skip to destroy\n     stream->Destroy();\n   }\n@@ -2436,7 +2436,7 @@ void Http2Session::Destroy(const FunctionCallbackInfo<Value>& args) {\n   Local<Context> context = env->context();\n \n   uint32_t code = args[0]->Uint32Value(context).ToChecked();\n-  bool socketDestroyed = args[1]->BooleanValue(context).ToChecked();\n+  bool socketDestroyed = args[1]->BooleanValue(env->isolate());\n \n   session->Close(code, socketDestroyed);\n }\n@@ -2647,12 +2647,11 @@ void Http2Stream::PushPromise(const FunctionCallbackInfo<Value>& args) {\n // Send a PRIORITY frame\n void Http2Stream::Priority(const FunctionCallbackInfo<Value>& args) {\n   Environment* env = Environment::GetCurrent(args);\n-  Local<Context> context = env->context();\n   Http2Stream* stream;\n   ASSIGN_OR_RETURN_UNWRAP(&stream, args.Holder());\n \n   Http2Priority priority(env, args[0], args[1], args[2]);\n-  bool silent = args[3]->BooleanValue(context).ToChecked();\n+  bool silent = args[3]->BooleanValue(env->isolate());\n \n   CHECK_EQ(stream->SubmitPriority(*priority, silent), 0);\n   Debug(stream, \"priority submitted\");"
        },
        {
            "sha": "d3e1b96616b5a1fcf879e219dd943ba93cc949ca",
            "filename": "src/node_i18n.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fnode_i18n.cc",
            "raw_url": "https://github.com/nodejs/node/raw/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fnode_i18n.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_i18n.cc?ref=24e6b709eadd320ae39fd942261ac111446bb3c9",
            "patch": "@@ -733,7 +733,7 @@ static void ToASCII(const FunctionCallbackInfo<Value>& args) {\n   CHECK(args[0]->IsString());\n   Utf8Value val(env->isolate(), args[0]);\n   // optional arg\n-  bool lenient = args[1]->BooleanValue(env->context()).FromJust();\n+  bool lenient = args[1]->BooleanValue(env->isolate());\n   enum idna_mode mode = lenient ? IDNA_LENIENT : IDNA_DEFAULT;\n \n   MaybeStackBuffer<char> buf;"
        },
        {
            "sha": "27b4e9e8b49e6b75a226c7bc1b80fcfc7151fdc9",
            "filename": "src/node_serdes.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fnode_serdes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fnode_serdes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_serdes.cc?ref=24e6b709eadd320ae39fd942261ac111446bb3c9",
            "patch": "@@ -192,9 +192,8 @@ void SerializerContext::SetTreatArrayBufferViewsAsHostObjects(\n   SerializerContext* ctx;\n   ASSIGN_OR_RETURN_UNWRAP(&ctx, args.Holder());\n \n-  Maybe<bool> value = args[0]->BooleanValue(ctx->env()->context());\n-  if (value.IsNothing()) return;\n-  ctx->serializer_.SetTreatArrayBufferViewsAsHostObjects(value.FromJust());\n+  bool value = args[0]->BooleanValue(ctx->env()->isolate());\n+  ctx->serializer_.SetTreatArrayBufferViewsAsHostObjects(value);\n }\n \n void SerializerContext::ReleaseBuffer(const FunctionCallbackInfo<Value>& args) {"
        },
        {
            "sha": "eb16719b0517eeb89f7799c636cc87e7668da17d",
            "filename": "src/spawn_sync.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fspawn_sync.cc",
            "raw_url": "https://github.com/nodejs/node/raw/24e6b709eadd320ae39fd942261ac111446bb3c9/src%2Fspawn_sync.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fspawn_sync.cc?ref=24e6b709eadd320ae39fd942261ac111446bb3c9",
            "patch": "@@ -740,7 +740,8 @@ Local<Array> SyncProcessRunner::BuildOutputArray() {\n }\n \n Maybe<int> SyncProcessRunner::ParseOptions(Local<Value> js_value) {\n-  HandleScope scope(env()->isolate());\n+  Isolate* isolate = env()->isolate();\n+  HandleScope scope(isolate);\n   int r;\n \n   if (!js_value->IsObject()) return Just<int>(UV_EINVAL);\n@@ -797,19 +798,19 @@ Maybe<int> SyncProcessRunner::ParseOptions(Local<Value> js_value) {\n \n   Local<Value> js_detached =\n       js_options->Get(context, env()->detached_string()).ToLocalChecked();\n-  if (js_detached->BooleanValue(context).FromJust())\n+  if (js_detached->BooleanValue(isolate))\n     uv_process_options_.flags |= UV_PROCESS_DETACHED;\n \n   Local<Value> js_win_hide =\n       js_options->Get(context, env()->windows_hide_string()).ToLocalChecked();\n-  if (js_win_hide->BooleanValue(context).FromJust())\n+  if (js_win_hide->BooleanValue(isolate))\n     uv_process_options_.flags |= UV_PROCESS_WINDOWS_HIDE;\n \n   Local<Value> js_wva =\n       js_options->Get(context, env()->windows_verbatim_arguments_string())\n           .ToLocalChecked();\n \n-  if (js_wva->BooleanValue(context).FromJust())\n+  if (js_wva->BooleanValue(isolate))\n     uv_process_options_.flags |= UV_PROCESS_WINDOWS_VERBATIM_ARGUMENTS;\n \n   Local<Value> js_timeout =\n@@ -889,14 +890,15 @@ int SyncProcessRunner::ParseStdioOption(int child_fd,\n     return AddStdioIgnore(child_fd);\n \n   } else if (js_type->StrictEquals(env()->pipe_string())) {\n+    Isolate* isolate = env()->isolate();\n     Local<String> rs = env()->readable_string();\n     Local<String> ws = env()->writable_string();\n \n     bool readable = js_stdio_option->Get(context, rs)\n-        .ToLocalChecked()->BooleanValue(context).FromJust();\n+        .ToLocalChecked()->BooleanValue(isolate);\n     bool writable =\n         js_stdio_option->Get(context, ws)\n-        .ToLocalChecked()->BooleanValue(context).FromJust();\n+        .ToLocalChecked()->BooleanValue(isolate);\n \n     uv_buf_t buf = uv_buf_init(nullptr, 0);\n "
        }
    ],
    "stats": {
        "total": 38,
        "additions": 19,
        "deletions": 19
    }
}