{
    "author": "danbev",
    "message": "build: add CONFIG_FLAGS to with-code-cache target\n\nThis commit adds CONFIG_FLAGS to allow the with-code-cache target to be\nused with a debug build. The motivation for this is to make it easier to\ndebug a build with the code cache enabled.\n\nThe suggested usage:\n$ make BUILDTYPE=Debug with-code-cache\n\nThe BUILDTYPE option is not needed if ./configure was already\nconfigured with --debug.\n\nPR-URL: https://github.com/nodejs/node/pull/22207\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Jon Moss <me@jonathanmoss.me>",
    "sha": "ec8f31dacead7cabf334132f289961caea7033ec",
    "files": [
        {
            "sha": "e769a6e574d6fce9ffdcaae437ebc96b5bf086be",
            "filename": "Makefile",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/ec8f31dacead7cabf334132f289961caea7033ec/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/ec8f31dacead7cabf334132f289961caea7033ec/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=ec8f31dacead7cabf334132f289961caea7033ec",
            "patch": "@@ -94,13 +94,17 @@ $(NODE_G_EXE): config.gypi out/Makefile\n CODE_CACHE_DIR ?= out/$(BUILDTYPE)/obj/gen\n CODE_CACHE_FILE ?= $(CODE_CACHE_DIR)/node_code_cache.cc\n \n+ifeq ($(BUILDTYPE),Debug)\n+CONFIG_FLAGS += --debug\n+endif\n .PHONY: with-code-cache\n with-code-cache:\n-\t$(PYTHON) ./configure\n+\t@echo $(CONFIG_FLAGS)\n+\t$(PYTHON) ./configure $(CONFIG_FLAGS)\n \t$(MAKE)\n \tmkdir -p $(CODE_CACHE_DIR)\n \tout/$(BUILDTYPE)/$(NODE_EXE) --expose-internals tools/generate_code_cache.js $(CODE_CACHE_FILE)\n-\t$(PYTHON) ./configure --code-cache-path $(CODE_CACHE_FILE)\n+\t$(PYTHON) ./configure --code-cache-path $(CODE_CACHE_FILE) $(CONFIG_FLAGS)\n \t$(MAKE)\n \n .PHONY: test-code-cache"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    }
}