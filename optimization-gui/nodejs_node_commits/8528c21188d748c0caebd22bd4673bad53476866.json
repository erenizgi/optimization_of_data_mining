{
    "author": "addaleax",
    "message": "src: call `Environment::Exit()` for fatal exceptions\n\nCall `Environment::Exit()` rather than the process-wide\n`exit()` function, since JS exceptions generally only affect\nthe current JS engine instance.\n\nPR-URL: https://github.com/nodejs/node/pull/25472\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>",
    "sha": "8528c21188d748c0caebd22bd4673bad53476866",
    "files": [
        {
            "sha": "9b55a0b92187ac1732bc4d919184c13a9403bb50",
            "filename": "src/node_errors.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/8528c21188d748c0caebd22bd4673bad53476866/src%2Fnode_errors.cc",
            "raw_url": "https://github.com/nodejs/node/raw/8528c21188d748c0caebd22bd4673bad53476866/src%2Fnode_errors.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_errors.cc?ref=8528c21188d748c0caebd22bd4673bad53476866",
            "patch": "@@ -324,7 +324,7 @@ TryCatchScope::~TryCatchScope() {\n   if (HasCaught() && !HasTerminated() && mode_ == CatchMode::kFatal) {\n     HandleScope scope(env_->isolate());\n     ReportException(env_, Exception(), Message());\n-    exit(7);\n+    env_->Exit(7);\n   }\n }\n \n@@ -711,7 +711,7 @@ void FatalException(Isolate* isolate,\n     // Failed before the process._fatalException function was added!\n     // this is probably pretty bad.  Nothing to do but report and exit.\n     ReportException(env, error, message);\n-    exit(6);\n+    env->Exit(6);\n   } else {\n     errors::TryCatchScope fatal_try_catch(env);\n \n@@ -727,7 +727,7 @@ void FatalException(Isolate* isolate,\n     if (fatal_try_catch.HasCaught()) {\n       // The fatal exception function threw, so we must exit\n       ReportException(env, fatal_try_catch);\n-      exit(7);\n+      env->Exit(7);\n \n     } else if (caught.ToLocalChecked()->IsFalse()) {\n       ReportException(env, error, message);\n@@ -738,9 +738,9 @@ void FatalException(Isolate* isolate,\n       Local<Value> code;\n       if (!process_object->Get(env->context(), exit_code).ToLocal(&code) ||\n           !code->IsInt32()) {\n-        exit(1);\n+        env->Exit(1);\n       }\n-      exit(code.As<Int32>()->Value());\n+      env->Exit(code.As<Int32>()->Value());\n     }\n   }\n }"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 5,
        "deletions": 5
    }
}