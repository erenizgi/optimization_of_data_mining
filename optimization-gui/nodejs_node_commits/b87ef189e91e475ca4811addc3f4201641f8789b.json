{
    "author": "BridgeAR",
    "message": "src: improve fatal exception\n\nThis is just some code cleanup.\n\nPR-URL: https://github.com/nodejs/node/pull/20294\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "b87ef189e91e475ca4811addc3f4201641f8789b",
    "files": [
        {
            "sha": "ee114257d5d126648d6c3cbad5983a9722e9aa75",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 17,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/b87ef189e91e475ca4811addc3f4201641f8789b/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/b87ef189e91e475ca4811addc3f4201641f8789b/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=b87ef189e91e475ca4811addc3f4201641f8789b",
            "patch": "@@ -2374,39 +2374,30 @@ void FatalException(Isolate* isolate,\n   Local<Function> fatal_exception_function =\n       process_object->Get(fatal_exception_string).As<Function>();\n \n-  int exit_code = 0;\n   if (!fatal_exception_function->IsFunction()) {\n-    // failed before the process._fatalException function was added!\n+    // Failed before the process._fatalException function was added!\n     // this is probably pretty bad.  Nothing to do but report and exit.\n     ReportException(env, error, message);\n-    exit_code = 6;\n-  }\n-\n-  if (exit_code == 0) {\n+    exit(6);\n+  } else {\n     TryCatch fatal_try_catch(isolate);\n \n     // Do not call FatalException when _fatalException handler throws\n     fatal_try_catch.SetVerbose(false);\n \n-    // this will return true if the JS layer handled it, false otherwise\n+    // This will return true if the JS layer handled it, false otherwise\n     Local<Value> caught =\n         fatal_exception_function->Call(process_object, 1, &error);\n \n     if (fatal_try_catch.HasCaught()) {\n-      // the fatal exception function threw, so we must exit\n+      // The fatal exception function threw, so we must exit\n       ReportException(env, fatal_try_catch);\n-      exit_code = 7;\n-    }\n-\n-    if (exit_code == 0 && false == caught->BooleanValue()) {\n+      exit(7);\n+    } else if (caught->IsFalse()) {\n       ReportException(env, error, message);\n-      exit_code = 1;\n+      exit(1);\n     }\n   }\n-\n-  if (exit_code) {\n-    exit(exit_code);\n-  }\n }\n \n "
        }
    ],
    "stats": {
        "total": 25,
        "additions": 8,
        "deletions": 17
    }
}