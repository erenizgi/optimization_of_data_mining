{
    "author": "joaocgreis",
    "message": "build, tools, win: add nasm detection for OpenSSL\n\nOpenSSL-1.1.0 requires the nasm assembler for building asm files on\nWindows. This finds nasm at \\Program Files\\NASM\\nasm.exe or\n\\ProgramFiles(x86)\\NASM\\nasm.exe in vcbuild.bat for users who did not\nadd its path in their enviroments.\n\nFixes: https://github.com/nodejs/build/issues/1190\nFixes: https://github.com/nodejs/node/issues/4270\nPR-URL: https://github.com/nodejs/node/pull/19794\nReviewed-By: Shigeki Ohtsu <ohtsu@ohtsu.org>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Rod Vagg <rod@vagg.org>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>",
    "sha": "eec659c138f3afcd51a25cd8b197d715a47baa65",
    "files": [
        {
            "sha": "4a93b37efa4b0f9ae0be56cd5c97708ff4a3e53d",
            "filename": "BUILDING.md",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/eec659c138f3afcd51a25cd8b197d715a47baa65/BUILDING.md",
            "raw_url": "https://github.com/nodejs/node/raw/eec659c138f3afcd51a25cd8b197d715a47baa65/BUILDING.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/BUILDING.md?ref=eec659c138f3afcd51a25cd8b197d715a47baa65",
            "patch": "@@ -258,6 +258,9 @@ Prerequisites:\n * Basic Unix tools required for some tests,\n   [Git for Windows](http://git-scm.com/download/win) includes Git Bash\n   and tools which can be included in the global `PATH`.\n+* **Optional** (for OpenSSL assembler modules): the [NetWide Assembler](http://www.nasm.us/),\n+  if not installed in the default location it needs to be manually added\n+  to `PATH`.\n * **Optional** (to build the MSI): the [WiX Toolset v3.11](http://wixtoolset.org/releases/)\n   and the [Wix Toolset Visual Studio 2017 Extension](https://marketplace.visualstudio.com/items?itemName=RobMensching.WixToolsetVisualStudio2017Extension).\n "
        },
        {
            "sha": "d30d2131166caa46e68b4ebc51aaa710752c156a",
            "filename": "tools/msvs/find_nasm.cmd",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/eec659c138f3afcd51a25cd8b197d715a47baa65/tools%2Fmsvs%2Ffind_nasm.cmd",
            "raw_url": "https://github.com/nodejs/node/raw/eec659c138f3afcd51a25cd8b197d715a47baa65/tools%2Fmsvs%2Ffind_nasm.cmd",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fmsvs%2Ffind_nasm.cmd?ref=eec659c138f3afcd51a25cd8b197d715a47baa65",
            "patch": "@@ -0,0 +1,19 @@\n+@IF NOT DEFINED DEBUG_HELPER @ECHO OFF\n+\n+ECHO Looking for NASM\n+\n+FOR /F \"delims=\" %%a IN ('where nasm 2^> NUL') DO (\n+  EXIT /B 0\n+)\n+\n+IF EXIST \"%ProgramFiles%\\NASM\\nasm.exe\" (\n+  SET \"Path=%Path%;%ProgramFiles%\\NASM\"\n+  EXIT /B 0\n+)\n+\n+IF EXIST \"%ProgramFiles(x86)%\\NASM\\nasm.exe\" (\n+  SET \"Path=%Path%;%ProgramFiles(x86)%\\NASM\"\n+  EXIT /B 0\n+)\n+\n+EXIT /B 1"
        },
        {
            "sha": "19e3d1881cc99c3d8cc06ad02d3e88f9ca644bac",
            "filename": "vcbuild.bat",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/eec659c138f3afcd51a25cd8b197d715a47baa65/vcbuild.bat",
            "raw_url": "https://github.com/nodejs/node/raw/eec659c138f3afcd51a25cd8b197d715a47baa65/vcbuild.bat",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/vcbuild.bat?ref=eec659c138f3afcd51a25cd8b197d715a47baa65",
            "patch": "@@ -170,6 +170,9 @@ if \"%target%\"==\"Clean\" rmdir /S /Q %~dp0deps\\icu\n call tools\\msvs\\find_python.cmd\n if errorlevel 1 goto :exit\n \n+call tools\\msvs\\find_nasm.cmd\n+if errorlevel 1 echo Could not find NASM, it will not be used.\n+\n call :getnodeversion || exit /b 1\n \n if defined TAG set configure_flags=%configure_flags% --tag=%TAG%"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 25,
        "deletions": 0
    }
}