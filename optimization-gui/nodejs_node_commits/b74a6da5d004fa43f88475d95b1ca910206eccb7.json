{
    "author": "santigimeno",
    "message": "child_process: fix stdio sockets creation\n\n`readable` and `writable` properties can be passed directly to the\n`net.Socket` constructor. This change also avoids an unnecessary call\nto `read(0)` on the `stdin` socket. This behavior was disclosed when\ntrying to merge `libuv@1.19.0` and specifically this commit:\nhttps://github.com/libuv/libuv/commit/fd049399aa4ed8495928e375466970d98cb42e17.\n\nPR-URL: https://github.com/nodejs/node/pull/18701\nRefs: https://github.com/libuv/libuv/pull/1655\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "b74a6da5d004fa43f88475d95b1ca910206eccb7",
    "files": [
        {
            "sha": "58bb46e8a27a0e20976c87690a6ea938c3aa8fc0",
            "filename": "lib/internal/child_process.js",
            "status": "modified",
            "additions": 1,
            "deletions": 11,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/b74a6da5d004fa43f88475d95b1ca910206eccb7/lib%2Finternal%2Fchild_process.js",
            "raw_url": "https://github.com/nodejs/node/raw/b74a6da5d004fa43f88475d95b1ca910206eccb7/lib%2Finternal%2Fchild_process.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fchild_process.js?ref=b74a6da5d004fa43f88475d95b1ca910206eccb7",
            "patch": "@@ -238,17 +238,7 @@ function flushStdio(subprocess) {\n \n \n function createSocket(pipe, readable) {\n-  var s = new net.Socket({ handle: pipe });\n-\n-  if (readable) {\n-    s.writable = false;\n-    s.readable = true;\n-  } else {\n-    s.writable = true;\n-    s.readable = false;\n-  }\n-\n-  return s;\n+  return net.Socket({ handle: pipe, readable, writable: !readable });\n }\n \n "
        },
        {
            "sha": "066458841fabab542d63851c94d802e3c96648d7",
            "filename": "test/async-hooks/test-pipewrap.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/b74a6da5d004fa43f88475d95b1ca910206eccb7/test%2Fasync-hooks%2Ftest-pipewrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/b74a6da5d004fa43f88475d95b1ca910206eccb7/test%2Fasync-hooks%2Ftest-pipewrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-pipewrap.js?ref=b74a6da5d004fa43f88475d95b1ca910206eccb7",
            "patch": "@@ -78,7 +78,7 @@ function onexit() {\n   // Usually it is just one event, but it can be more.\n   assert.ok(ioEvents >= 3, `at least 3 stdout io events, got ${ioEvents}`);\n \n-  checkInvocations(pipe1, { init: 1, before: 2, after: 2 },\n+  checkInvocations(pipe1, { init: 1, before: 1, after: 1 },\n                    'pipe wrap when sleep.spawn was called');\n   checkInvocations(pipe2, { init: 1, before: ioEvents, after: ioEvents },\n                    'pipe wrap when sleep.spawn was called');"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 2,
        "deletions": 12
    }
}