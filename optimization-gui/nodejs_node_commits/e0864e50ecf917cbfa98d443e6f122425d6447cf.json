{
    "author": "cjihrig",
    "message": "cluster: add cwd to cluster.settings\n\nThis commit allows cluster workers to be created with\nconfigurable working directories.\n\nFixes: https://github.com/nodejs/node/issues/16388\nPR-URL: https://github.com/nodejs/node/pull/18399\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "e0864e50ecf917cbfa98d443e6f122425d6447cf",
    "files": [
        {
            "sha": "1817ac82027afbbaeca60cf0337763813993697b",
            "filename": "doc/api/cluster.md",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/e0864e50ecf917cbfa98d443e6f122425d6447cf/doc%2Fapi%2Fcluster.md",
            "raw_url": "https://github.com/nodejs/node/raw/e0864e50ecf917cbfa98d443e6f122425d6447cf/doc%2Fapi%2Fcluster.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fcluster.md?ref=e0864e50ecf917cbfa98d443e6f122425d6447cf",
            "patch": "@@ -711,6 +711,8 @@ changes:\n   * `exec` {string} File path to worker file. **Default:** `process.argv[1]`\n   * `args` {Array} String arguments passed to worker.\n     **Default:** `process.argv.slice(2)`\n+  * `cwd` {string} Current working directory of the worker process. **Default:**\n+    `undefined` (inherits from parent process)\n   * `silent` {boolean} Whether or not to send output to parent's stdio.\n     **Default:** `false`\n   * `stdio` {Array} Configures the stdio of forked processes. Because the"
        },
        {
            "sha": "570cf7bc6f93d473bfd9c0330c7b5b18aa76ade2",
            "filename": "lib/internal/cluster/master.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/e0864e50ecf917cbfa98d443e6f122425d6447cf/lib%2Finternal%2Fcluster%2Fmaster.js",
            "raw_url": "https://github.com/nodejs/node/raw/e0864e50ecf917cbfa98d443e6f122425d6447cf/lib%2Finternal%2Fcluster%2Fmaster.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fcluster%2Fmaster.js?ref=e0864e50ecf917cbfa98d443e6f122425d6447cf",
            "patch": "@@ -126,6 +126,7 @@ function createWorkerProcess(id, env) {\n   }\n \n   return fork(cluster.settings.exec, cluster.settings.args, {\n+    cwd: cluster.settings.cwd,\n     env: workerEnv,\n     silent: cluster.settings.silent,\n     windowsHide: cluster.settings.windowsHide,"
        },
        {
            "sha": "ce3fdca51e907c74303b39e55ed57459e176aabe",
            "filename": "test/parallel/test-cluster-cwd.js",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/e0864e50ecf917cbfa98d443e6f122425d6447cf/test%2Fparallel%2Ftest-cluster-cwd.js",
            "raw_url": "https://github.com/nodejs/node/raw/e0864e50ecf917cbfa98d443e6f122425d6447cf/test%2Fparallel%2Ftest-cluster-cwd.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-cwd.js?ref=e0864e50ecf917cbfa98d443e6f122425d6447cf",
            "patch": "@@ -0,0 +1,22 @@\n+'use strict';\n+const common = require('../common');\n+const assert = require('assert');\n+const cluster = require('cluster');\n+\n+if (cluster.isMaster) {\n+  common.refreshTmpDir();\n+\n+  assert.strictEqual(cluster.settings.cwd, undefined);\n+  cluster.fork().on('message', common.mustCall((msg) => {\n+    assert.strictEqual(msg, process.cwd());\n+  }));\n+\n+  cluster.setupMaster({ cwd: common.tmpDir });\n+  assert.strictEqual(cluster.settings.cwd, common.tmpDir);\n+  cluster.fork().on('message', common.mustCall((msg) => {\n+    assert.strictEqual(msg, common.tmpDir);\n+  }));\n+} else {\n+  process.send(process.cwd());\n+  process.disconnect();\n+}"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 25,
        "deletions": 0
    }
}