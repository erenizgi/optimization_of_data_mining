{
    "author": "addaleax",
    "message": "report: include information about event loop itself\n\nPR-URL: https://github.com/nodejs/node/pull/25906\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "91adbe14b4490483785e1cd094c1130278cd25f3",
    "files": [
        {
            "sha": "3937f88cc1be4a486db4882010fb17f80ca57ed8",
            "filename": "doc/api/report.md",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/91adbe14b4490483785e1cd094c1130278cd25f3/doc%2Fapi%2Freport.md",
            "raw_url": "https://github.com/nodejs/node/raw/91adbe14b4490483785e1cd094c1130278cd25f3/doc%2Fapi%2Freport.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Freport.md?ref=91adbe14b4490483785e1cd094c1130278cd25f3",
            "patch": "@@ -215,6 +215,11 @@ is provided below for reference.\n       \"is_referenced\": false,\n       \"address\": \"0x000000010188f2e0\",\n       \"details\": \"\"\n+    },\n+    {\n+      \"type\": \"loop\",\n+      \"is_active\": true,\n+      \"address\": \"0x000055fc7b2cb180\"\n     }\n   ],\n   \"environmentVariables\": {"
        },
        {
            "sha": "7477a2fd2405139cee2068cb0f08e400315f7abd",
            "filename": "src/node_report.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/91adbe14b4490483785e1cd094c1130278cd25f3/src%2Fnode_report.cc",
            "raw_url": "https://github.com/nodejs/node/raw/91adbe14b4490483785e1cd094c1130278cd25f3/src%2Fnode_report.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_report.cc?ref=91adbe14b4490483785e1cd094c1130278cd25f3",
            "patch": "@@ -311,9 +311,18 @@ static void WriteNodeReport(Isolate* isolate,\n #endif\n \n   writer.json_arraystart(\"libuv\");\n-  if (env != nullptr)\n+  if (env != nullptr) {\n     uv_walk(env->event_loop(), WalkHandle, static_cast<void*>(&writer));\n \n+    writer.json_start();\n+    writer.json_keyvalue(\"type\", \"loop\");\n+    writer.json_keyvalue(\"is_active\",\n+        static_cast<bool>(uv_loop_alive(env->event_loop())));\n+    writer.json_keyvalue(\"address\",\n+        ValueToHexString(reinterpret_cast<int64_t>(env->event_loop())));\n+    writer.json_end();\n+  }\n+\n   writer.json_arrayend();\n \n   // Report operating system information"
        },
        {
            "sha": "eb38bee8c697f5878e382113295cad86c5edbb48",
            "filename": "src/node_report.h",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/91adbe14b4490483785e1cd094c1130278cd25f3/src%2Fnode_report.h",
            "raw_url": "https://github.com/nodejs/node/raw/91adbe14b4490483785e1cd094c1130278cd25f3/src%2Fnode_report.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_report.h?ref=91adbe14b4490483785e1cd094c1130278cd25f3",
            "patch": "@@ -57,8 +57,15 @@ void GetNodeReport(v8::Isolate* isolate,\n void ReportEndpoints(uv_handle_t* h, std::ostringstream& out);\n void WalkHandle(uv_handle_t* h, void* arg);\n std::string EscapeJsonChars(const std::string& str);\n+\n template <typename T>\n-std::string ValueToHexString(T value);\n+std::string ValueToHexString(T value) {\n+  std::stringstream hex;\n+\n+  hex << \"0x\" << std::setfill('0') << std::setw(sizeof(T) * 2) << std::hex <<\n+    value;\n+  return hex.str();\n+}\n \n // Function declarations - export functions in src/node_report_module.cc\n void TriggerReport(const v8::FunctionCallbackInfo<v8::Value>& info);"
        },
        {
            "sha": "2a454fc37154f8db234859e42e42a51834d68572",
            "filename": "src/node_report_utils.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/91adbe14b4490483785e1cd094c1130278cd25f3/src%2Fnode_report_utils.cc",
            "raw_url": "https://github.com/nodejs/node/raw/91adbe14b4490483785e1cd094c1130278cd25f3/src%2Fnode_report_utils.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_report_utils.cc?ref=91adbe14b4490483785e1cd094c1130278cd25f3",
            "patch": "@@ -214,15 +214,6 @@ void WalkHandle(uv_handle_t* h, void* arg) {\n   writer->json_end();\n }\n \n-template <typename T>\n-std::string ValueToHexString(T value) {\n-  std::stringstream hex;\n-\n-  hex << \"0x\" << std::setfill('0') << std::setw(sizeof(T) * 2) << std::hex <<\n-    value;\n-  return hex.str();\n-}\n-\n std::string EscapeJsonChars(const std::string& str) {\n   const std::string control_symbols[0x20] = {\n       \"\\\\u0000\", \"\\\\u0001\", \"\\\\u0002\", \"\\\\u0003\", \"\\\\u0004\", \"\\\\u0005\","
        }
    ],
    "stats": {
        "total": 34,
        "additions": 23,
        "deletions": 11
    }
}