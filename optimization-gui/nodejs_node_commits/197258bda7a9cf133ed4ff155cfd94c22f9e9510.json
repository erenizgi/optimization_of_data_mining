{
    "author": "MSLaguana",
    "message": "src: changing node_file's usage of v8::Resolver\n\nnode_file was casting back and forth between v8::Resolver and\nv8::Promise. This is unnecessary; most of the time it just wants the\nv8::Resolver, converting to the v8::Promise only as a return value.\n\nPR-URL: https://github.com/nodejs/node/pull/18765\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Kyle Farnung <kfarnung@microsoft.com>",
    "sha": "197258bda7a9cf133ed4ff155cfd94c22f9e9510",
    "files": [
        {
            "sha": "37b0b4e3b9c0bd2be75278cf0728c69e7141bee6",
            "filename": "src/node_file.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/197258bda7a9cf133ed4ff155cfd94c22f9e9510/src%2Fnode_file.cc",
            "raw_url": "https://github.com/nodejs/node/raw/197258bda7a9cf133ed4ff155cfd94c22f9e9510/src%2Fnode_file.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_file.cc?ref=197258bda7a9cf133ed4ff155cfd94c22f9e9510",
            "patch": "@@ -283,7 +283,8 @@ void FSReqWrap::SetReturnValue(const FunctionCallbackInfo<Value>& args) {\n void FSReqPromise::SetReturnValue(const FunctionCallbackInfo<Value>& args) {\n   Local<Context> context = env()->context();\n   args.GetReturnValue().Set(\n-    object()->Get(context, env()->promise_string()).ToLocalChecked());\n+    object()->Get(context, env()->promise_string()).ToLocalChecked()\n+      .As<Promise::Resolver>()->GetPromise());\n }\n \n void NewFSReqWrap(const FunctionCallbackInfo<Value>& args) {\n@@ -300,7 +301,7 @@ FSReqPromise::FSReqPromise(Environment* env)\n       stats_field_array_(env->isolate(), 14) {\n   auto resolver = Promise::Resolver::New(env->context()).ToLocalChecked();\n   object()->Set(env->context(), env->promise_string(),\n-                resolver.As<Promise>()).FromJust();\n+                resolver).FromJust();\n }\n \n FSReqPromise::~FSReqPromise() {\n@@ -315,9 +316,7 @@ void FSReqPromise::Reject(Local<Value> reject) {\n   Local<Value> value =\n       object()->Get(env()->context(),\n                     env()->promise_string()).ToLocalChecked();\n-  CHECK(value->IsPromise());\n-  Local<Promise> promise = value.As<Promise>();\n-  Local<Promise::Resolver> resolver = promise.As<Promise::Resolver>();\n+  Local<Promise::Resolver> resolver = value.As<Promise::Resolver>();\n   resolver->Reject(env()->context(), reject).FromJust();\n }\n \n@@ -336,7 +335,6 @@ void FSReqPromise::Resolve(Local<Value> value) {\n   Local<Value> val =\n       object()->Get(env()->context(),\n                     env()->promise_string()).ToLocalChecked();\n-  CHECK(val->IsPromise());\n   Local<Promise::Resolver> resolver = val.As<Promise::Resolver>();\n   resolver->Resolve(env()->context(), value).FromJust();\n }"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 4,
        "deletions": 6
    }
}