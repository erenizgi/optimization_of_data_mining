{
    "author": "joyeecheung",
    "message": "process: move --help and --bash-completeion handling to startExecution\n\nBecause they are similar to `--prof-process` and are part of\nthe execution instead of initialization.\nAlso move the `getOptionValue` initialization to top scope since\nit's used everywhere and add comments about the flags.\n\nPR-URL: https://github.com/nodejs/node/pull/25262\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "ee12607c1cc12f6b366de563004d984a929297b5",
    "files": [
        {
            "sha": "db593e597d403e303867180b03f5380cb0d42ffb",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/ee12607c1cc12f6b366de563004d984a929297b5/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/ee12607c1cc12f6b366de563004d984a929297b5/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=ee12607c1cc12f6b366de563004d984a929297b5",
            "patch": "@@ -18,7 +18,7 @@\n \n const { internalBinding, NativeModule } = loaderExports;\n \n-let getOptionValue;\n+const { getOptionValue } = NativeModule.require('internal/options');\n \n function startup() {\n   setupTraceCategoryState();\n@@ -168,18 +168,6 @@ function startup() {\n     NativeModule.require('internal/inspector_async_hook').setup();\n   }\n \n-  getOptionValue = NativeModule.require('internal/options').getOptionValue;\n-\n-  if (getOptionValue('--help')) {\n-    NativeModule.require('internal/print_help').print(process.stdout);\n-    return;\n-  }\n-\n-  if (getOptionValue('--completion-bash')) {\n-    NativeModule.require('internal/bash_completion').print(process.stdout);\n-    return;\n-  }\n-\n   // If the process is spawned with env NODE_CHANNEL_FD, it's probably\n   // spawned by our child_process module, then initialize IPC.\n   // This attaches some internal event listeners and creates:\n@@ -360,6 +348,18 @@ function startExecution() {\n     return;\n   }\n \n+  // node --help\n+  if (getOptionValue('--help')) {\n+    NativeModule.require('internal/print_help').print(process.stdout);\n+    return;\n+  }\n+\n+  // e.g. node --completion-bash >> ~/.bashrc\n+  if (getOptionValue('--completion-bash')) {\n+    NativeModule.require('internal/bash_completion').print(process.stdout);\n+    return;\n+  }\n+\n   // `node --prof-process`\n   if (getOptionValue('--prof-process')) {\n     NativeModule.require('internal/v8_prof_processor');"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 13,
        "deletions": 13
    }
}