{
    "author": "mscdex",
    "message": "assert: improve assert()/assert.ok() performance\n\nPR-URL: https://github.com/nodejs/node/pull/19292\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Yuta Hiroto <hello@hiroppy.me>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "3c61b87e5918441c9d14641e328584e3ce184c98",
    "files": [
        {
            "sha": "849be65539aef7db4253b6e77fa634cf7687c1d7",
            "filename": "benchmark/assert/ok.js",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/3c61b87e5918441c9d14641e328584e3ce184c98/benchmark%2Fassert%2Fok.js",
            "raw_url": "https://github.com/nodejs/node/raw/3c61b87e5918441c9d14641e328584e3ce184c98/benchmark%2Fassert%2Fok.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fassert%2Fok.js?ref=3c61b87e5918441c9d14641e328584e3ce184c98",
            "patch": "@@ -0,0 +1,20 @@\n+'use strict';\n+\n+const common = require('../common.js');\n+const assert = require('assert');\n+\n+const bench = common.createBenchmark(main, {\n+  n: [1e9]\n+});\n+\n+function main({ n }) {\n+  var i;\n+  bench.start();\n+  for (i = 0; i < n; ++i) {\n+    if (i % 2 === 0)\n+      assert(true);\n+    else\n+      assert(true, 'foo bar baz');\n+  }\n+  bench.end(n);\n+}"
        },
        {
            "sha": "ccc1de3a25d06a27a7875d0b39b7bf9cba45a584",
            "filename": "lib/assert.js",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/3c61b87e5918441c9d14641e328584e3ce184c98/lib%2Fassert.js",
            "raw_url": "https://github.com/nodejs/node/raw/3c61b87e5918441c9d14641e328584e3ce184c98/lib%2Fassert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fassert.js?ref=3c61b87e5918441c9d14641e328584e3ce184c98",
            "patch": "@@ -206,13 +206,11 @@ function getErrMessage(call) {\n   }\n }\n \n-function innerOk(args, fn) {\n-  var [value, message] = args;\n-\n+function innerOk(fn, argLen, value, message) {\n   if (!value) {\n     let generatedMessage = false;\n \n-    if (args.length === 0) {\n+    if (argLen === 0) {\n       generatedMessage = true;\n       message = 'No value argument passed to `assert.ok()`';\n     } else if (message == null) {\n@@ -253,7 +251,7 @@ function innerOk(args, fn) {\n // Pure assertion tests whether a value is truthy, as determined\n // by !!value.\n function ok(...args) {\n-  innerOk(args, ok);\n+  innerOk(ok, args.length, ...args);\n }\n assert.ok = ok;\n \n@@ -563,7 +561,7 @@ assert.ifError = function ifError(err) {\n \n // Expose a strict only variant of assert\n function strict(...args) {\n-  innerOk(args, strict);\n+  innerOk(strict, args.length, ...args);\n }\n assert.strict = Object.assign(strict, assert, {\n   equal: assert.strictEqual,"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 24,
        "deletions": 6
    }
}