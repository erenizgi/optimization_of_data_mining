{
    "author": "unknown",
    "message": "n-api: throw when entry point is null\n\nPR-URL: https://github.com/nodejs/node/pull/20779\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "9a02de7084e3f3c959d1c7e32bda67cc1d7002bd",
    "files": [
        {
            "sha": "a83244131ff5a8aa89d39f50882ac995a28c097c",
            "filename": "src/node_api.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9a02de7084e3f3c959d1c7e32bda67cc1d7002bd/src%2Fnode_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9a02de7084e3f3c959d1c7e32bda67cc1d7002bd/src%2Fnode_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_api.cc?ref=9a02de7084e3f3c959d1c7e32bda67cc1d7002bd",
            "patch": "@@ -868,6 +868,12 @@ void napi_module_register_by_symbol(v8::Local<v8::Object> exports,\n                                     v8::Local<v8::Value> module,\n                                     v8::Local<v8::Context> context,\n                                     napi_addon_register_func init) {\n+  if (init == nullptr) {\n+    node::Environment::GetCurrent(context)->ThrowError(\n+        \"Module has no declared entry point.\");\n+    return;\n+  }\n+\n   // Create a new napi_env for this module or reference one if a pre-existing\n   // one is found.\n   napi_env env = v8impl::GetEnv(context);"
        },
        {
            "sha": "27701616e338db655c0f4ad67e7ed55067873bfe",
            "filename": "test/addons-napi/test_null_init/binding.gyp",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9a02de7084e3f3c959d1c7e32bda67cc1d7002bd/test%2Faddons-napi%2Ftest_null_init%2Fbinding.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/9a02de7084e3f3c959d1c7e32bda67cc1d7002bd/test%2Faddons-napi%2Ftest_null_init%2Fbinding.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons-napi%2Ftest_null_init%2Fbinding.gyp?ref=9a02de7084e3f3c959d1c7e32bda67cc1d7002bd",
            "patch": "@@ -0,0 +1,8 @@\n+{\n+  'targets': [\n+    {\n+      'target_name': 'test_null_init',\n+      'sources': [ 'test_null_init.c' ]\n+    }\n+  ]\n+}"
        },
        {
            "sha": "6e6bf51839bed075c46e7f2f5ec1d5d2df8ebc58",
            "filename": "test/addons-napi/test_null_init/test.js",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/9a02de7084e3f3c959d1c7e32bda67cc1d7002bd/test%2Faddons-napi%2Ftest_null_init%2Ftest.js",
            "raw_url": "https://github.com/nodejs/node/raw/9a02de7084e3f3c959d1c7e32bda67cc1d7002bd/test%2Faddons-napi%2Ftest_null_init%2Ftest.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons-napi%2Ftest_null_init%2Ftest.js?ref=9a02de7084e3f3c959d1c7e32bda67cc1d7002bd",
            "patch": "@@ -0,0 +1,7 @@\n+'use strict';\n+const common = require('../../common');\n+const assert = require('assert');\n+\n+assert.throws(\n+  () => require(`./build/${common.buildType}/test_null_init`),\n+  /Module has no declared entry point[.]/);"
        },
        {
            "sha": "d9d2200488ce4140e9db5614ff2582799f44dd01",
            "filename": "test/addons-napi/test_null_init/test_null_init.c",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9a02de7084e3f3c959d1c7e32bda67cc1d7002bd/test%2Faddons-napi%2Ftest_null_init%2Ftest_null_init.c",
            "raw_url": "https://github.com/nodejs/node/raw/9a02de7084e3f3c959d1c7e32bda67cc1d7002bd/test%2Faddons-napi%2Ftest_null_init%2Ftest_null_init.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons-napi%2Ftest_null_init%2Ftest_null_init.c?ref=9a02de7084e3f3c959d1c7e32bda67cc1d7002bd",
            "patch": "@@ -0,0 +1,3 @@\n+#include <node_api.h>\n+\n+NAPI_MODULE(NODE_GYP_MODULE_NAME, NULL)"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 24,
        "deletions": 0
    }
}