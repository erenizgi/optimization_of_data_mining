{
    "author": "addaleax",
    "message": "src: make `FIXED_ONE_BYTE_STRING` an inline fn\n\nThis prevents accidental usage on non-fixed strings.\n\nPR-URL: https://github.com/nodejs/node/pull/22725\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "932a74ae747b9260ce95f401b8d58f9f791a357b",
    "files": [
        {
            "sha": "ef4ec29708c0d4b024d5861500b030e5c885f208",
            "filename": "src/node_api.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/932a74ae747b9260ce95f401b8d58f9f791a357b/src%2Fnode_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/932a74ae747b9260ce95f401b8d58f9f791a357b/src%2Fnode_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_api.cc?ref=932a74ae747b9260ce95f401b8d58f9f791a357b",
            "patch": "@@ -2173,11 +2173,11 @@ static napi_status set_error_code(napi_env env,\n       }\n     }\n     name_string = v8::String::Concat(\n-        isolate, name_string, FIXED_ONE_BYTE_STRING(isolate, \" [\"));\n+        isolate, name_string, node::FIXED_ONE_BYTE_STRING(isolate, \" [\"));\n     name_string =\n         v8::String::Concat(isolate, name_string, code_value.As<v8::String>());\n     name_string = v8::String::Concat(\n-        isolate, name_string, FIXED_ONE_BYTE_STRING(isolate, \"]\"));\n+        isolate, name_string, node::FIXED_ONE_BYTE_STRING(isolate, \"]\"));\n \n     set_maybe = err_object->Set(context, name_key, name_string);\n     RETURN_STATUS_IF_FALSE(env,"
        },
        {
            "sha": "4036383dee92def7b14632c22d5148edcd2a319d",
            "filename": "src/util.h",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/932a74ae747b9260ce95f401b8d58f9f791a357b/src%2Futil.h",
            "raw_url": "https://github.com/nodejs/node/raw/932a74ae747b9260ce95f401b8d58f9f791a357b/src%2Futil.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Futil.h?ref=932a74ae747b9260ce95f401b8d58f9f791a357b",
            "patch": "@@ -89,9 +89,6 @@ NO_RETURN void Abort();\n NO_RETURN void Assert(const char* const (*args)[4]);\n void DumpBacktrace(FILE* fp);\n \n-#define FIXED_ONE_BYTE_STRING(isolate, string)                                \\\n-  (node::OneByteString((isolate), (string), sizeof(string) - 1))\n-\n #define DISALLOW_COPY_AND_ASSIGN(TypeName)                                    \\\n   void operator=(const TypeName&) = delete;                                   \\\n   void operator=(TypeName&&) = delete;                                        \\\n@@ -248,6 +245,15 @@ inline v8::Local<v8::String> OneByteString(v8::Isolate* isolate,\n                                            const unsigned char* data,\n                                            int length = -1);\n \n+// Used to be a macro, hence the uppercase name.\n+template <int N>\n+inline v8::Local<v8::String> FIXED_ONE_BYTE_STRING(\n+    v8::Isolate* isolate,\n+    const char(&data)[N]) {\n+  return OneByteString(isolate, data, N - 1);\n+}\n+\n+\n // Swaps bytes in place. nbytes is the number of bytes to swap and must be a\n // multiple of the word size (checked by function).\n inline void SwapBytes16(char* data, size_t nbytes);"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 11,
        "deletions": 5
    }
}