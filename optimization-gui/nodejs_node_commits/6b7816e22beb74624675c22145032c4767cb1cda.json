{
    "author": "addaleax",
    "message": "src: mark options parsers as const\n\nThese do not change their contents after being constructed.\n\nPR-URL: https://github.com/nodejs/node/pull/25065\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "6b7816e22beb74624675c22145032c4767cb1cda",
    "files": [
        {
            "sha": "d25557e6a50637038efba36943b69bb718130fa1",
            "filename": "src/node_options-inl.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/6b7816e22beb74624675c22145032c4767cb1cda/src%2Fnode_options-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/6b7816e22beb74624675c22145032c4767cb1cda/src%2Fnode_options-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_options-inl.h?ref=6b7816e22beb74624675c22145032c4767cb1cda",
            "patch": "@@ -201,7 +201,7 @@ auto OptionsParser<Options>::Convert(\n template <typename Options>\n template <typename ChildOptions>\n void OptionsParser<Options>::Insert(\n-    OptionsParser<ChildOptions>* child_options_parser,\n+    const OptionsParser<ChildOptions>* child_options_parser,\n     ChildOptions* (Options::* get_child)()) {\n   aliases_.insert(child_options_parser->aliases_.begin(),\n                   child_options_parser->aliases_.end());\n@@ -274,7 +274,7 @@ void OptionsParser<Options>::Parse(\n     std::vector<std::string>* const v8_args,\n     Options* const options,\n     OptionEnvvarSettings required_env_settings,\n-    std::vector<std::string>* const errors) {\n+    std::vector<std::string>* const errors) const {\n   ArgsInfo args(orig_args, exec_args);\n \n   // The first entry is the process name. Make sure it ends up in the V8 argv,"
        },
        {
            "sha": "d665bc40400071c2bce8cbb5bd44778f2718e5c6",
            "filename": "src/node_options.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6b7816e22beb74624675c22145032c4767cb1cda/src%2Fnode_options.cc",
            "raw_url": "https://github.com/nodejs/node/raw/6b7816e22beb74624675c22145032c4767cb1cda/src%2Fnode_options.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_options.cc?ref=6b7816e22beb74624675c22145032c4767cb1cda",
            "patch": "@@ -88,7 +88,7 @@ DebugOptionsParser::DebugOptionsParser() {\n }\n \n #if HAVE_INSPECTOR\n-DebugOptionsParser DebugOptionsParser::instance;\n+const DebugOptionsParser DebugOptionsParser::instance;\n #endif  // HAVE_INSPECTOR\n \n EnvironmentOptionsParser::EnvironmentOptionsParser() {\n@@ -218,7 +218,7 @@ EnvironmentOptionsParser::EnvironmentOptionsParser() {\n #endif  // HAVE_INSPECTOR\n }\n \n-EnvironmentOptionsParser EnvironmentOptionsParser::instance;\n+const EnvironmentOptionsParser EnvironmentOptionsParser::instance;\n \n PerIsolateOptionsParser::PerIsolateOptionsParser() {\n   AddOption(\"--track-heap-objects\",\n@@ -241,7 +241,7 @@ PerIsolateOptionsParser::PerIsolateOptionsParser() {\n          &PerIsolateOptions::get_per_env_options);\n }\n \n-PerIsolateOptionsParser PerIsolateOptionsParser::instance;\n+const PerIsolateOptionsParser PerIsolateOptionsParser::instance;\n \n PerProcessOptionsParser::PerProcessOptionsParser() {\n   AddOption(\"--title\",\n@@ -345,7 +345,7 @@ PerProcessOptionsParser::PerProcessOptionsParser() {\n          &PerProcessOptions::get_per_isolate_options);\n }\n \n-PerProcessOptionsParser PerProcessOptionsParser::instance;\n+const PerProcessOptionsParser PerProcessOptionsParser::instance;\n \n inline std::string RemoveBrackets(const std::string& host) {\n   if (!host.empty() && host.front() == '[' && host.back() == ']')"
        },
        {
            "sha": "d317e12b6f0db8636152815aef4e8ef2a5cdbd72",
            "filename": "src/node_options.h",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/6b7816e22beb74624675c22145032c4767cb1cda/src%2Fnode_options.h",
            "raw_url": "https://github.com/nodejs/node/raw/6b7816e22beb74624675c22145032c4767cb1cda/src%2Fnode_options.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_options.h?ref=6b7816e22beb74624675c22145032c4767cb1cda",
            "patch": "@@ -275,7 +275,7 @@ class OptionsParser {\n   // a method that yields the target options type from this parser's options\n   // type.\n   template <typename ChildOptions>\n-  void Insert(OptionsParser<ChildOptions>* child_options_parser,\n+  void Insert(const OptionsParser<ChildOptions>* child_options_parser,\n               ChildOptions* (Options::* get_child)());\n \n   // Parse a sequence of options into an options struct, a list of\n@@ -300,7 +300,7 @@ class OptionsParser {\n                      std::vector<std::string>* const v8_args,\n                      Options* const options,\n                      OptionEnvvarSettings required_env_settings,\n-                     std::vector<std::string>* const errors);\n+                     std::vector<std::string>* const errors) const;\n \n  private:\n   // We support the wide variety of different option types by remembering\n@@ -391,28 +391,28 @@ class DebugOptionsParser : public OptionsParser<DebugOptions> {\n  public:\n   DebugOptionsParser();\n \n-  static DebugOptionsParser instance;\n+  static const DebugOptionsParser instance;\n };\n \n class EnvironmentOptionsParser : public OptionsParser<EnvironmentOptions> {\n  public:\n   EnvironmentOptionsParser();\n \n-  static EnvironmentOptionsParser instance;\n+  static const EnvironmentOptionsParser instance;\n };\n \n class PerIsolateOptionsParser : public OptionsParser<PerIsolateOptions> {\n  public:\n   PerIsolateOptionsParser();\n \n-  static PerIsolateOptionsParser instance;\n+  static const PerIsolateOptionsParser instance;\n };\n \n class PerProcessOptionsParser : public OptionsParser<PerProcessOptions> {\n  public:\n   PerProcessOptionsParser();\n \n-  static PerProcessOptionsParser instance;\n+  static const PerProcessOptionsParser instance;\n };\n \n }  // namespace options_parser"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 12,
        "deletions": 12
    }
}