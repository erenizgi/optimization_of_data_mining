{
    "author": "jasnell",
    "message": "test: move common.ArrayStream to separate module\n\nIn a continuing effort to de-monolithize `require('../common')`,\nmove `common.ArrayStream` out to a separate module that is\nimported only when it is needed.\n\nPR-URL: https://github.com/nodejs/node/pull/22447\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
    "files": [
        {
            "sha": "e44dcd299c4caa29ffb5c66eb3002633abeda6bd",
            "filename": "test/common/README.md",
            "status": "modified",
            "additions": 14,
            "deletions": 3,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fcommon%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fcommon%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2FREADME.md?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -38,9 +38,6 @@ tasks.\n \n Takes `whitelist` and concats that with predefined `knownGlobals`.\n \n-### arrayStream\n-A stream to push an array into a REPL\n-\n ### busyLoop(time)\n * `time` [&lt;number>]\n \n@@ -413,6 +410,20 @@ Platform normalizes the `pwd` command.\n \n Synchronous version of `spawnPwd`.\n \n+## ArrayStream Module\n+\n+The `ArrayStream` module provides a simple `Stream` that pushes elements from\n+a given array.\n+\n+<!-- eslint-disable no-undef, node-core/required-modules -->\n+```js\n+const ArrayStream = require('../common/arraystream');\n+const stream = new ArrayStream();\n+stream.run(['a', 'b', 'c']);\n+```\n+\n+It can be used within tests as a simple mock stream.\n+\n ## Countdown Module\n \n The `Countdown` module provides a simple countdown mechanism for tests that"
        },
        {
            "sha": "dadd6ff0481c60380505413e2e22282c41a8c1c1",
            "filename": "test/common/arraystream.js",
            "status": "added",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fcommon%2Farraystream.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fcommon%2Farraystream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Farraystream.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -0,0 +1,24 @@\n+/* eslint-disable node-core/required-modules */\n+'use strict';\n+\n+const { Stream } = require('stream');\n+const { inherits } = require('util');\n+function noop() {}\n+\n+// A stream to push an array into a REPL\n+function ArrayStream() {\n+  this.run = function(data) {\n+    data.forEach((line) => {\n+      this.emit('data', `${line}\\n`);\n+    });\n+  };\n+}\n+\n+inherits(ArrayStream, Stream);\n+ArrayStream.prototype.readable = true;\n+ArrayStream.prototype.writable = true;\n+ArrayStream.prototype.pause = noop;\n+ArrayStream.prototype.resume = noop;\n+ArrayStream.prototype.write = noop;\n+\n+module.exports = ArrayStream;"
        },
        {
            "sha": "369f23f790c5f4d19c9f2b8ae671664c18e29682",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 0,
            "deletions": 18,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -27,7 +27,6 @@ const fs = require('fs');\n const assert = require('assert');\n const os = require('os');\n const { exec, execSync, spawn, spawnSync } = require('child_process');\n-const stream = require('stream');\n const util = require('util');\n const { fixturesDir } = require('./fixtures');\n const tmpdir = require('./tmpdir');\n@@ -511,23 +510,6 @@ exports.skip = function(msg) {\n   process.exit(0);\n };\n \n-// A stream to push an array into a REPL\n-function ArrayStream() {\n-  this.run = function(data) {\n-    data.forEach((line) => {\n-      this.emit('data', `${line}\\n`);\n-    });\n-  };\n-}\n-\n-util.inherits(ArrayStream, stream.Stream);\n-exports.ArrayStream = ArrayStream;\n-ArrayStream.prototype.readable = true;\n-ArrayStream.prototype.writable = true;\n-ArrayStream.prototype.pause = noop;\n-ArrayStream.prototype.resume = noop;\n-ArrayStream.prototype.write = noop;\n-\n // Returns true if the exit code \"exitCode\" and/or signal name \"signal\"\n // represent the exit code and/or signal name of a node process that aborted,\n // false otherwise."
        },
        {
            "sha": "f069d8bf4097997bdce7487acd6758b653480fd5",
            "filename": "test/parallel/test-repl-autolibs.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-autolibs.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-autolibs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-autolibs.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -21,11 +21,12 @@\n \n 'use strict';\n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const util = require('util');\n const repl = require('repl');\n \n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n repl.start('', putIn, null, true);\n \n test1();"
        },
        {
            "sha": "0394129d45df19ed829097bf8f0d1a93bf35dfe7",
            "filename": "test/parallel/test-repl-context.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-context.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-context.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-context.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,11 +1,12 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n const vm = require('vm');\n \n // Create a dummy stream that does nothing.\n-const stream = new common.ArrayStream();\n+const stream = new ArrayStream();\n \n // Test context when useGlobal is false.\n {"
        },
        {
            "sha": "ce6da4bedb9e2806942f924884e440ee15f26d57",
            "filename": "test/parallel/test-repl-domain.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-domain.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-domain.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-domain.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -20,11 +20,12 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n \n const repl = require('repl');\n \n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n repl.start('', putIn);\n \n putIn.write = function(data) {"
        },
        {
            "sha": "8db7789f029a104b4a0e36f0ac01cb63d4b876eb",
            "filename": "test/parallel/test-repl-editor.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-editor.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-editor.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-editor.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,8 +1,9 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n const repl = require('repl');\n+const ArrayStream = require('../common/arraystream');\n \n // \\u001b[1G - Moves the cursor to 1st column\n // \\u001b[0J - Clear screen\n@@ -11,7 +12,7 @@ const terminalCode = '\\u001b[1G\\u001b[0J> \\u001b[3G';\n const terminalCodeRegex = new RegExp(terminalCode.replace(/\\[/g, '\\\\['), 'g');\n \n function run({ input, output, event, checkTerminalCodes = true }) {\n-  const stream = new common.ArrayStream();\n+  const stream = new ArrayStream();\n   let found = '';\n \n   stream.write = (msg) => found += msg.replace('\\r', '');\n@@ -74,8 +75,8 @@ tests.forEach(run);\n \n // Auto code alignment for .editor mode\n function testCodeAligment({ input, cursor = 0, line = '' }) {\n-  const stream = new common.ArrayStream();\n-  const outputStream = new common.ArrayStream();\n+  const stream = new ArrayStream();\n+  const outputStream = new ArrayStream();\n \n   stream.write = () => { throw new Error('Writing not allowed!'); };\n "
        },
        {
            "sha": "d01be957d3990b84740f57bea330d2c92433a411",
            "filename": "test/parallel/test-repl-end-emits-exit.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-end-emits-exit.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-end-emits-exit.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-end-emits-exit.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -20,14 +20,15 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n let terminalExit = 0;\n let regularExit = 0;\n \n // Create a dummy stream that does nothing\n-const stream = new common.ArrayStream();\n+const stream = new ArrayStream();\n \n function testTerminalMode() {\n   const r1 = repl.start({"
        },
        {
            "sha": "702b6056f101a59ed4bdb2307922bb2378bc7f91",
            "filename": "test/parallel/test-repl-eval-scope.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-eval-scope.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-eval-scope.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-eval-scope.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,10 +1,11 @@\n 'use strict';\n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n \n {\n-  const stream = new common.ArrayStream();\n+  const stream = new ArrayStream();\n   const options = {\n     eval: common.mustCall((cmd, context) => {\n       assert.strictEqual(cmd, '.scope\\n');"
        },
        {
            "sha": "acec99208bcf028d2e62b5993ac82ba396ee090c",
            "filename": "test/parallel/test-repl-inspector.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-inspector.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-inspector.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-inspector.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,14 +1,15 @@\n 'use strict';\n \n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n \n common.skipIfInspectorDisabled();\n \n // This test verifies that the V8 inspector API is usable in the REPL.\n \n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n let output = '';\n putIn.write = function(data) {\n   output += data;"
        },
        {
            "sha": "d0524953d74650479f1fadda25b3b0a2c854206f",
            "filename": "test/parallel/test-repl-let-process.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-let-process.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-let-process.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-let-process.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,8 +1,9 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const repl = require('repl');\n \n // Regression test for https://github.com/nodejs/node/issues/6802\n-const input = new common.ArrayStream();\n+const input = new ArrayStream();\n repl.start({ input, output: process.stdout, useGlobal: true });\n input.run(['let process']);"
        },
        {
            "sha": "87b866c01be165d081b56386e495702c86ed423c",
            "filename": "test/parallel/test-repl-load-multiline.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-load-multiline.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-load-multiline.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-load-multiline.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,5 +1,6 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const fixtures = require('../common/fixtures');\n const assert = require('assert');\n const repl = require('repl');\n@@ -20,8 +21,8 @@ undefined\n \n let accum = '';\n \n-const inputStream = new common.ArrayStream();\n-const outputStream = new common.ArrayStream();\n+const inputStream = new ArrayStream();\n+const outputStream = new ArrayStream();\n \n outputStream.write = (data) => accum += data.replace('\\r', '');\n "
        },
        {
            "sha": "f789c06bf39378bd98ab16ed58f4c49bf686d7ea",
            "filename": "test/parallel/test-repl-multiline.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-multiline.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-multiline.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-multiline.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,9 +1,10 @@\n 'use strict';\n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n-const inputStream = new common.ArrayStream();\n-const outputStream = new common.ArrayStream();\n+const inputStream = new ArrayStream();\n+const outputStream = new ArrayStream();\n const input = ['var foo = {', '};', 'foo;'];\n let output = '';\n "
        },
        {
            "sha": "8d9f8e5b0703c46d66210f92e830bc5574b443cf",
            "filename": "test/parallel/test-repl-options.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-options.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-options.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-options.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -21,11 +21,12 @@\n \n 'use strict';\n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n \n // Create a dummy stream that does nothing\n-const stream = new common.ArrayStream();\n+const stream = new ArrayStream();\n \n // 1, mostly defaults\n const r1 = repl.start({"
        },
        {
            "sha": "3c758fb2f2ef13f205d23744dace570fc0437388",
            "filename": "test/parallel/test-repl-pretty-custom-stack.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-pretty-custom-stack.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-pretty-custom-stack.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-pretty-custom-stack.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,5 +1,6 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const fixtures = require('../common/fixtures');\n const assert = require('assert');\n const repl = require('repl');\n@@ -8,8 +9,8 @@ const repl = require('repl');\n function run({ command, expected }) {\n   let accum = '';\n \n-  const inputStream = new common.ArrayStream();\n-  const outputStream = new common.ArrayStream();\n+  const inputStream = new ArrayStream();\n+  const outputStream = new ArrayStream();\n \n   outputStream.write = (data) => accum += data.replace('\\r', '');\n "
        },
        {
            "sha": "f4754d315df44fc0d06a361b70bae7ec5764b22f",
            "filename": "test/parallel/test-repl-pretty-stack.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-pretty-stack.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-pretty-stack.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-pretty-stack.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,5 +1,6 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const fixtures = require('../common/fixtures');\n const assert = require('assert');\n const repl = require('repl');\n@@ -8,8 +9,8 @@ const repl = require('repl');\n function run({ command, expected }) {\n   let accum = '';\n \n-  const inputStream = new common.ArrayStream();\n-  const outputStream = new common.ArrayStream();\n+  const inputStream = new ArrayStream();\n+  const outputStream = new ArrayStream();\n \n   outputStream.write = (data) => accum += data.replace('\\r', '');\n "
        },
        {
            "sha": "a975dac782cfe4305dc3981d271dd0d6e8572f0d",
            "filename": "test/parallel/test-repl-recoverable.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-recoverable.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-recoverable.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-recoverable.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,6 +1,7 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n \n@@ -14,7 +15,7 @@ function customEval(code, context, file, cb) {\n   return cb(evalCount === 1 ? new repl.Recoverable() : null, true);\n }\n \n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n \n putIn.write = function(msg) {\n   if (msg === '... ') {"
        },
        {
            "sha": "1f1347547e95f8a8f7d907a942edc4bd7e58ae81",
            "filename": "test/parallel/test-repl-reset-event.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-reset-event.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-reset-event.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-reset-event.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -21,15 +21,15 @@\n \n 'use strict';\n const common = require('../common');\n-\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n const util = require('util');\n \n common.allowGlobals(42);\n \n // Create a dummy stream that does nothing\n-const dummy = new common.ArrayStream();\n+const dummy = new ArrayStream();\n \n function testReset(cb) {\n   const r = repl.start({"
        },
        {
            "sha": "7ca0e9c016405631656477a2265c33466621cb77",
            "filename": "test/parallel/test-repl-save-load.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-save-load.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-save-load.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-save-load.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -20,7 +20,8 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const join = require('path').join;\n const fs = require('fs');\n@@ -32,7 +33,7 @@ const repl = require('repl');\n \n const works = [['inner.one'], 'inner.o'];\n \n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n const testMe = repl.start('', putIn);\n \n \n@@ -59,7 +60,7 @@ assert.strictEqual(fs.readFileSync(saveFileName, 'utf8'),\n     'return \"saved\";',\n     '}'\n   ];\n-  const putIn = new common.ArrayStream();\n+  const putIn = new ArrayStream();\n   const replServer = repl.start('', putIn);\n \n   putIn.run(['.editor']);"
        },
        {
            "sha": "2794ded4924a97b89329dc82051f44234bc27b69",
            "filename": "test/parallel/test-repl-syntax-error-stack.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-syntax-error-stack.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-syntax-error-stack.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-syntax-error-stack.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,6 +1,7 @@\n 'use strict';\n \n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const fixtures = require('../common/fixtures');\n const assert = require('assert');\n const repl = require('repl');\n@@ -10,7 +11,7 @@ process.on('exit', () => {\n   assert.strictEqual(found, true);\n });\n \n-common.ArrayStream.prototype.write = function(output) {\n+ArrayStream.prototype.write = function(output) {\n   // Matching only on a minimal piece of the stack because the string will vary\n   // greatly depending on the JavaScript engine. V8 includes `;` because it\n   // displays the line of code (`var foo bar;`) that is causing a problem.\n@@ -20,7 +21,7 @@ common.ArrayStream.prototype.write = function(output) {\n     found = true;\n };\n \n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n repl.start('', putIn);\n let file = fixtures.path('syntax', 'bad_syntax');\n "
        },
        {
            "sha": "95dfe0bd4c4e139c17bd734527b0a43b52dc09d4",
            "filename": "test/parallel/test-repl-tab-complete-crash.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-tab-complete-crash.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-tab-complete-crash.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-tab-complete-crash.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,12 +1,13 @@\n 'use strict';\n \n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const repl = require('repl');\n \n-common.ArrayStream.prototype.write = () => {};\n+ArrayStream.prototype.write = () => {};\n \n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n const testMe = repl.start('', putIn);\n \n // https://github.com/nodejs/node/issues/3346"
        },
        {
            "sha": "cef2026dfba85348828dcdb3ed51f7addf53876e",
            "filename": "test/parallel/test-repl-tab-complete-no-warn.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-tab-complete-no-warn.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-tab-complete-no-warn.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-tab-complete-no-warn.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,13 +1,14 @@\n 'use strict';\n \n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const repl = require('repl');\n const DEFAULT_MAX_LISTENERS = require('events').defaultMaxListeners;\n \n-common.ArrayStream.prototype.write = () => {\n+ArrayStream.prototype.write = () => {\n };\n \n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n const testMe = repl.start('', putIn);\n \n // https://github.com/nodejs/node/issues/18284"
        },
        {
            "sha": "a336058fa16d01d4747e34f8b7e3a07d4995f38e",
            "filename": "test/parallel/test-repl-tab-complete.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-tab-complete.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-tab-complete.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-tab-complete.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -22,6 +22,7 @@\n 'use strict';\n \n const common = require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const fixtures = require('../common/fixtures');\n const hasInspector = process.config.variables.v8_enable_inspector === 1;\n@@ -44,7 +45,7 @@ function getNoResultsFunction() {\n }\n \n const works = [['inner.one'], 'inner.o'];\n-const putIn = new common.ArrayStream();\n+const putIn = new ArrayStream();\n const testMe = repl.start('', putIn);\n \n // Some errors are passed to the domain, but do not callback\n@@ -525,7 +526,7 @@ testCustomCompleterAsyncMode.complete('a', common.mustCall((error, data) => {\n }));\n \n // tab completion in editor mode\n-const editorStream = new common.ArrayStream();\n+const editorStream = new ArrayStream();\n const editor = repl.start({\n   stream: editorStream,\n   terminal: true,\n@@ -548,7 +549,7 @@ editor.completer('var log = console.l', common.mustCall((error, data) => {\n \n {\n   // tab completion of lexically scoped variables\n-  const stream = new common.ArrayStream();\n+  const stream = new ArrayStream();\n   const testRepl = repl.start({ stream });\n \n   stream.run([`"
        },
        {
            "sha": "662adeb2e9f80c94f1d511d98b7bc6e4f068ee5e",
            "filename": "test/parallel/test-repl-top-level-await.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-top-level-await.js",
            "raw_url": "https://github.com/nodejs/node/raw/fa543c00cdaca6a6c68d1df4c68c061e2b82ca21/test%2Fparallel%2Ftest-repl-top-level-await.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-top-level-await.js?ref=fa543c00cdaca6a6c68d1df4c68c061e2b82ca21",
            "patch": "@@ -1,6 +1,7 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n+const ArrayStream = require('../common/arraystream');\n const assert = require('assert');\n const { stripVTControlCharacters } = require('internal/readline');\n const repl = require('repl');\n@@ -9,7 +10,7 @@ const repl = require('repl');\n \n const PROMPT = 'await repl > ';\n \n-class REPLStream extends common.ArrayStream {\n+class REPLStream extends ArrayStream {\n   constructor() {\n     super();\n     this.waitingForResponse = false;"
        }
    ],
    "stats": {
        "total": 169,
        "additions": 103,
        "deletions": 66
    }
}