{
    "author": "apapirovski",
    "message": "test: fix long-running http benchmarks\n\nPR-URL: https://github.com/nodejs/node/pull/20125\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Rich Trott <rtrott@gmail.com>",
    "sha": "957532ec6122a093ac024183f615604ba11a8d40",
    "files": [
        {
            "sha": "667e826f163ba6522eae05058e2d3df297be0e6b",
            "filename": "benchmark/http/cluster.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/957532ec6122a093ac024183f615604ba11a8d40/benchmark%2Fhttp%2Fcluster.js",
            "raw_url": "https://github.com/nodejs/node/raw/957532ec6122a093ac024183f615604ba11a8d40/benchmark%2Fhttp%2Fcluster.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fhttp%2Fcluster.js?ref=957532ec6122a093ac024183f615604ba11a8d40",
            "patch": "@@ -26,7 +26,7 @@ function main({ type, len, c }) {\n     if (workers < 2)\n       return;\n \n-    setTimeout(function() {\n+    setImmediate(function() {\n       const path = `/${type}/${len}`;\n \n       bench.http({\n@@ -36,6 +36,6 @@ function main({ type, len, c }) {\n         w1.destroy();\n         w2.destroy();\n       });\n-    }, 100);\n+    });\n   });\n }"
        },
        {
            "sha": "13d0e4d16aaf8f480f33c33e3be2fb23b63ccc88",
            "filename": "test/sequential/test-benchmark-http.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/957532ec6122a093ac024183f615604ba11a8d40/test%2Fsequential%2Ftest-benchmark-http.js",
            "raw_url": "https://github.com/nodejs/node/raw/957532ec6122a093ac024183f615604ba11a8d40/test%2Fsequential%2Ftest-benchmark-http.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-benchmark-http.js?ref=957532ec6122a093ac024183f615604ba11a8d40",
            "patch": "@@ -18,12 +18,14 @@ runBenchmark('http',\n                'chunkedEnc=true',\n                'chunks=0',\n                'dur=0.1',\n+               'input=keep-alive',\n                'key=\"\"',\n                'len=1',\n                'method=write',\n                'n=1',\n                'res=normal',\n-               'type=asc'\n+               'type=asc',\n+               'value=X-Powered-By'\n              ],\n              {\n                NODEJS_BENCHMARK_ZERO_ALLOWED: 1,"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 5,
        "deletions": 3
    }
}