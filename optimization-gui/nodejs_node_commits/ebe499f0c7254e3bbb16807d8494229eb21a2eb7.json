{
    "author": "devsnek",
    "message": "deps: cherry-pick 39d546a from upstream V8\n\nOriginal commit message:\n\n    [api] introduce v8::Value::IsModuleNamespaceObject\n\n    This allows an embedder to check if a Value is a module namespace object.\n\n    Cq-Include-Trybots: luci.chromium.try:linux_chromium_rel_ng\n    Change-Id: Idffceff451dd5f5c6a53d4cb3ce02c1c2c5b653c\n    Reviewed-on: https://chromium-review.googlesource.com/1011762\n    Reviewed-by: Georg Neis <neis@chromium.org>\n    Commit-Queue: Georg Neis <neis@chromium.org>\n    Cr-Commit-Position: refs/heads/master@{#52597}\n\nRefs: https://github.com/v8/v8/commit/39d546a24022b62b00aedf7b556ac6c9e2306aab\n\nPR-URL: https://github.com/nodejs/node/pull/20016\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Guy Bedford <guybedford@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "ebe499f0c7254e3bbb16807d8494229eb21a2eb7",
    "files": [
        {
            "sha": "76a27ac1952ace9e537532aae65e75650d4ed04d",
            "filename": "deps/v8/AUTHORS",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/ebe499f0c7254e3bbb16807d8494229eb21a2eb7/deps%2Fv8%2FAUTHORS",
            "raw_url": "https://github.com/nodejs/node/raw/ebe499f0c7254e3bbb16807d8494229eb21a2eb7/deps%2Fv8%2FAUTHORS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FAUTHORS?ref=ebe499f0c7254e3bbb16807d8494229eb21a2eb7",
            "patch": "@@ -70,6 +70,7 @@ Felix Geisend√∂rfer <haimuiba@gmail.com>\n Filipe David Manana <fdmanana@gmail.com>\n Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\n Geoffrey Garside <ggarside@gmail.com>\n+Gus Caplan <me@gus.host>\n Gwang Yoon Hwang <ryumiel@company100.net>\n Henrique Ferreiro <henrique.ferreiro@gmail.com>\n Hirofumi Mako <mkhrfm@gmail.com>"
        },
        {
            "sha": "0149ed3ca2406e50748f67e9e7b497cb02b0204d",
            "filename": "deps/v8/include/v8.h",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/ebe499f0c7254e3bbb16807d8494229eb21a2eb7/deps%2Fv8%2Finclude%2Fv8.h",
            "raw_url": "https://github.com/nodejs/node/raw/ebe499f0c7254e3bbb16807d8494229eb21a2eb7/deps%2Fv8%2Finclude%2Fv8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8.h?ref=ebe499f0c7254e3bbb16807d8494229eb21a2eb7",
            "patch": "@@ -2354,6 +2354,11 @@ class V8_EXPORT Value : public Data {\n \n   bool IsWebAssemblyCompiledModule() const;\n \n+  /**\n+   * Returns true if the value is a Module Namespace Object.\n+   */\n+  bool IsModuleNamespaceObject() const;\n+\n   V8_WARN_UNUSED_RESULT MaybeLocal<Boolean> ToBoolean(\n       Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT MaybeLocal<Number> ToNumber("
        },
        {
            "sha": "ffe9bef52056be8e5481e8215906ac585ba8c2e3",
            "filename": "deps/v8/src/api.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/ebe499f0c7254e3bbb16807d8494229eb21a2eb7/deps%2Fv8%2Fsrc%2Fapi.cc",
            "raw_url": "https://github.com/nodejs/node/raw/ebe499f0c7254e3bbb16807d8494229eb21a2eb7/deps%2Fv8%2Fsrc%2Fapi.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.cc?ref=ebe499f0c7254e3bbb16807d8494229eb21a2eb7",
            "patch": "@@ -3584,6 +3584,10 @@ bool Value::IsSetIterator() const {\n \n bool Value::IsPromise() const { return Utils::OpenHandle(this)->IsJSPromise(); }\n \n+bool Value::IsModuleNamespaceObject() const {\n+  return Utils::OpenHandle(this)->IsJSModuleNamespace();\n+}\n+\n MaybeLocal<String> Value::ToString(Local<Context> context) const {\n   auto obj = Utils::OpenHandle(this);\n   if (obj->IsString()) return ToApiHandle<String>(obj);"
        },
        {
            "sha": "fe1aca5a0fb440a33494646ab8dd5176a89b37c5",
            "filename": "deps/v8/test/cctest/test-api.cc",
            "status": "modified",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/ebe499f0c7254e3bbb16807d8494229eb21a2eb7/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/ebe499f0c7254e3bbb16807d8494229eb21a2eb7/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc?ref=ebe499f0c7254e3bbb16807d8494229eb21a2eb7",
            "patch": "@@ -27041,6 +27041,35 @@ TEST(ImportMeta) {\n   CHECK(result->StrictEquals(Local<v8::Value>::Cast(v8::Utils::ToLocal(meta))));\n }\n \n+TEST(GetModuleNamespace) {\n+  LocalContext context;\n+  v8::Isolate* isolate = context->GetIsolate();\n+  v8::HandleScope scope(isolate);\n+\n+  Local<String> url = v8_str(\"www.google.com\");\n+  Local<String> source_text = v8_str(\"export default 5; export const a = 10;\");\n+  v8::ScriptOrigin origin(url, Local<v8::Integer>(), Local<v8::Integer>(),\n+                          Local<v8::Boolean>(), Local<v8::Integer>(),\n+                          Local<v8::Value>(), Local<v8::Boolean>(),\n+                          Local<v8::Boolean>(), True(isolate));\n+  v8::ScriptCompiler::Source source(source_text, origin);\n+  Local<Module> module =\n+      v8::ScriptCompiler::CompileModule(isolate, &source).ToLocalChecked();\n+  module->InstantiateModule(context.local(), UnexpectedModuleResolveCallback)\n+      .ToChecked();\n+  module->Evaluate(context.local()).ToLocalChecked();\n+\n+  Local<Value> ns_val = module->GetModuleNamespace();\n+  CHECK(ns_val->IsModuleNamespaceObject());\n+  Local<Object> ns = ns_val.As<Object>();\n+  CHECK(ns->Get(context.local(), v8_str(\"default\"))\n+            .ToLocalChecked()\n+            ->StrictEquals(v8::Number::New(isolate, 5)));\n+  CHECK(ns->Get(context.local(), v8_str(\"a\"))\n+            .ToLocalChecked()\n+            ->StrictEquals(v8::Number::New(isolate, 10)));\n+}\n+\n TEST(GlobalTemplateWithDoubleProperty) {\n   v8::Isolate* isolate = CcTest::isolate();\n   v8::HandleScope handle_scope(isolate);"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 39,
        "deletions": 0
    }
}