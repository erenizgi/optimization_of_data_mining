{
    "author": "blairwilcox",
    "message": "test: show pending exception error in napi tests\n\nShows the result of the wasPending in the error message if the\nassertion fails.\n\nPR-URL: https://github.com/nodejs/node/pull/18413\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "0c16b1804302046082ce5322b65e09a30172d606",
    "files": [
        {
            "sha": "787b7d78b1c72bf5cef9a9078a18843d0d9dde6b",
            "filename": "test/addons-napi/test_exception/test.js",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/0c16b1804302046082ce5322b65e09a30172d606/test%2Faddons-napi%2Ftest_exception%2Ftest.js",
            "raw_url": "https://github.com/nodejs/node/raw/0c16b1804302046082ce5322b65e09a30172d606/test%2Faddons-napi%2Ftest_exception%2Ftest.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons-napi%2Ftest_exception%2Ftest.js?ref=0c16b1804302046082ce5322b65e09a30172d606",
            "patch": "@@ -20,9 +20,10 @@ const theError = new Error('Some error');\n \n   // Test that the exception thrown above was marked as pending\n   // before it was handled on the JS side\n-  assert.strictEqual(test_exception.wasPending(), true,\n-                     'VM was marked as having an exception pending' +\n-                     ' when it was allowed through');\n+  const exception_pending = test_exception.wasPending();\n+  assert.strictEqual(exception_pending, true,\n+                     'Exception not pending as expected,' +\n+                     ` .wasPending() returned ${exception_pending}`);\n \n   // Test that the native side does not capture a non-existing exception\n   returnedError = test_exception.returnException(common.mustCall());\n@@ -44,7 +45,8 @@ const theError = new Error('Some error');\n                      ` ${caughtError} was passed`);\n \n   // Test that the exception state remains clear when no exception is thrown\n-  assert.strictEqual(test_exception.wasPending(), false,\n-                     'VM was not marked as having an exception pending' +\n-                     ' when none was allowed through');\n+  const exception_pending = test_exception.wasPending();\n+  assert.strictEqual(exception_pending, false,\n+                     'Exception state did not remain clear as expected,' +\n+                     ` .wasPending() returned ${exception_pending}`);\n }"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 8,
        "deletions": 6
    }
}