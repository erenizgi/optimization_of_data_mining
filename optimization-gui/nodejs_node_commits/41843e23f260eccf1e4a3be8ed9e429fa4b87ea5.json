{
    "author": "tniessen",
    "message": "test: make handling of noWarnCode stricter\n\nThis change requires all expected warnings to be specified along with\ntheir respective code and will raise an error if the code does not\nmatch. This also kind of fixes the behavior when the expected warning\ncode was noWarnCode and there is an actual warning code.\n\nPR-URL: https://github.com/nodejs/node/pull/21075\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "41843e23f260eccf1e4a3be8ed9e429fa4b87ea5",
    "files": [
        {
            "sha": "f76e1cd38cf460eb72f45ae18594f5b5324d08a0",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 2,
            "deletions": 9,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/41843e23f260eccf1e4a3be8ed9e429fa4b87ea5/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/41843e23f260eccf1e4a3be8ed9e429fa4b87ea5/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=41843e23f260eccf1e4a3be8ed9e429fa4b87ea5",
            "patch": "@@ -589,7 +589,7 @@ exports.isAlive = function isAlive(pid) {\n   }\n };\n \n-exports.noWarnCode = 'no_expected_warning_code';\n+exports.noWarnCode = undefined;\n \n function expectWarning(name, expected) {\n   const map = new Map(expected);\n@@ -598,14 +598,7 @@ function expectWarning(name, expected) {\n     assert.ok(map.has(warning.message),\n               `unexpected error message: \"${warning.message}\"`);\n     const code = map.get(warning.message);\n-    if (code === undefined) {\n-      throw new Error('An error code must be specified or use ' +\n-      'common.noWarnCode if there is no error code. The error  ' +\n-      `code for this warning was ${warning.code}`);\n-    }\n-    if (code !== exports.noWarnCode) {\n-      assert.strictEqual(warning.code, code);\n-    }\n+    assert.strictEqual(warning.code, code);\n     // Remove a warning message after it is seen so that we guarantee that we\n     // get each message only once.\n     map.delete(expected);"
        },
        {
            "sha": "e5084b50c189fd8525b3d7b7c84dd68bdb1090e3",
            "filename": "test/parallel/test-promises-unhandled-symbol-rejections.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/41843e23f260eccf1e4a3be8ed9e429fa4b87ea5/test%2Fparallel%2Ftest-promises-unhandled-symbol-rejections.js",
            "raw_url": "https://github.com/nodejs/node/raw/41843e23f260eccf1e4a3be8ed9e429fa4b87ea5/test%2Fparallel%2Ftest-promises-unhandled-symbol-rejections.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-promises-unhandled-symbol-rejections.js?ref=41843e23f260eccf1e4a3be8ed9e429fa4b87ea5",
            "patch": "@@ -6,7 +6,7 @@ const expectedDeprecationWarning = ['Unhandled promise rejections are ' +\n                                    'deprecated. In the future, promise ' +\n                                    'rejections that are not handled will ' +\n                                    'terminate the Node.js process with a ' +\n-                                   'non-zero exit code.', common.noWarnCode];\n+                                   'non-zero exit code.', 'DEP0018'];\n const expectedPromiseWarning = ['Unhandled promise rejection. ' +\n   'This error originated either by throwing ' +\n   'inside of an async function without a catch ' +"
        },
        {
            "sha": "337cb789f73656f837f26c4fb22a91aa6aec7e17",
            "filename": "test/parallel/test-util.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/41843e23f260eccf1e4a3be8ed9e429fa4b87ea5/test%2Fparallel%2Ftest-util.js",
            "raw_url": "https://github.com/nodejs/node/raw/41843e23f260eccf1e4a3be8ed9e429fa4b87ea5/test%2Fparallel%2Ftest-util.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util.js?ref=41843e23f260eccf1e4a3be8ed9e429fa4b87ea5",
            "patch": "@@ -142,10 +142,10 @@ assert.strictEqual(util.isFunction(), false);\n assert.strictEqual(util.isFunction('string'), false);\n \n common.expectWarning('DeprecationWarning', [\n-  ['util.print is deprecated. Use console.log instead.', common.noWarnCode],\n-  ['util.puts is deprecated. Use console.log instead.', common.noWarnCode],\n-  ['util.debug is deprecated. Use console.error instead.', common.noWarnCode],\n-  ['util.error is deprecated. Use console.error instead.', common.noWarnCode]\n+  ['util.print is deprecated. Use console.log instead.', 'DEP0026'],\n+  ['util.puts is deprecated. Use console.log instead.', 'DEP0027'],\n+  ['util.debug is deprecated. Use console.error instead.', 'DEP0028'],\n+  ['util.error is deprecated. Use console.error instead.', 'DEP0029']\n ]);\n \n util.print('test');"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 7,
        "deletions": 14
    }
}