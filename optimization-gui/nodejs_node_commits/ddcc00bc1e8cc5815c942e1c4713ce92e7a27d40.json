{
    "author": "danbev",
    "message": "async_hooks: don't set hook_fields[kTotals] to 0\n\nThis commit removes the setting of hook_field[kTotals] to szero in\nAsyncHook's enable function.\n\nAs far as I can tell this would not be required if the setting of\nthis field is done with the assignment operator instead of using the\naddition assignment operator.\n\nPR-URL: https://github.com/nodejs/node/pull/19219\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "ddcc00bc1e8cc5815c942e1c4713ce92e7a27d40",
    "files": [
        {
            "sha": "f32c9131850c78399c8e14ab805c6d8ca423693e",
            "filename": "lib/async_hooks.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/ddcc00bc1e8cc5815c942e1c4713ce92e7a27d40/lib%2Fasync_hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/ddcc00bc1e8cc5815c942e1c4713ce92e7a27d40/lib%2Fasync_hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fasync_hooks.js?ref=ddcc00bc1e8cc5815c942e1c4713ce92e7a27d40",
            "patch": "@@ -74,12 +74,11 @@ class AsyncHook {\n       return this;\n \n     const prev_kTotals = hook_fields[kTotals];\n-    hook_fields[kTotals] = 0;\n \n     // createHook() has already enforced that the callbacks are all functions,\n     // so here simply increment the count of whether each callbacks exists or\n     // not.\n-    hook_fields[kTotals] += hook_fields[kInit] += +!!this[init_symbol];\n+    hook_fields[kTotals] = hook_fields[kInit] += +!!this[init_symbol];\n     hook_fields[kTotals] += hook_fields[kBefore] += +!!this[before_symbol];\n     hook_fields[kTotals] += hook_fields[kAfter] += +!!this[after_symbol];\n     hook_fields[kTotals] += hook_fields[kDestroy] += +!!this[destroy_symbol];\n@@ -102,9 +101,8 @@ class AsyncHook {\n       return this;\n \n     const prev_kTotals = hook_fields[kTotals];\n-    hook_fields[kTotals] = 0;\n \n-    hook_fields[kTotals] += hook_fields[kInit] -= +!!this[init_symbol];\n+    hook_fields[kTotals] = hook_fields[kInit] -= +!!this[init_symbol];\n     hook_fields[kTotals] += hook_fields[kBefore] -= +!!this[before_symbol];\n     hook_fields[kTotals] += hook_fields[kAfter] -= +!!this[after_symbol];\n     hook_fields[kTotals] += hook_fields[kDestroy] -= +!!this[destroy_symbol];"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 2,
        "deletions": 4
    }
}