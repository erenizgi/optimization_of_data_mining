{
    "author": "jeysal",
    "message": "assert: handle undefined filename in getErrMessage\n\nWhen generating an assertion error message,\n`filename` might be undefined,\ne.g. if `assert` is called in `eval`.\n\nHandle this case gracefully instead of failing with\n`Cannot read property 'endsWith' of undefined`.\n\nFixes: https://github.com/nodejs/node/issues/20847\n\nPR-URL: https://github.com/nodejs/node/pull/20848\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Khaidi Chu <i@2333.moe>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "a5d86f8c4ebf201092a7a155691856e13639f0cb",
    "files": [
        {
            "sha": "a528e768747eb436a041a8c252f4472531322e99",
            "filename": "lib/assert.js",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/a5d86f8c4ebf201092a7a155691856e13639f0cb/lib%2Fassert.js",
            "raw_url": "https://github.com/nodejs/node/raw/a5d86f8c4ebf201092a7a155691856e13639f0cb/lib%2Fassert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fassert.js?ref=a5d86f8c4ebf201092a7a155691856e13639f0cb",
            "patch": "@@ -154,6 +154,10 @@ function getBuffer(fd, assertLine) {\n \n function getErrMessage(call) {\n   const filename = call.getFileName();\n+  if (!filename) {\n+    return;\n+  }\n+\n   const line = call.getLineNumber() - 1;\n   const column = call.getColumnNumber() - 1;\n   const identifier = `${filename}${line}${column}`;"
        },
        {
            "sha": "56489b9e6e8b1cb30f7beaca6fe248e495a6cb87",
            "filename": "test/parallel/test-assert.js",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/a5d86f8c4ebf201092a7a155691856e13639f0cb/test%2Fparallel%2Ftest-assert.js",
            "raw_url": "https://github.com/nodejs/node/raw/a5d86f8c4ebf201092a7a155691856e13639f0cb/test%2Fparallel%2Ftest-assert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert.js?ref=a5d86f8c4ebf201092a7a155691856e13639f0cb",
            "patch": "@@ -783,6 +783,16 @@ common.expectsError(\n   }\n );\n \n+// works in eval\n+common.expectsError(\n+  () => new Function('assert', 'assert(1 === 2);')(assert),\n+  {\n+    code: 'ERR_ASSERTION',\n+    type: assert.AssertionError,\n+    message: 'false == true'\n+  }\n+);\n+\n // Do not try to check Node.js modules.\n {\n   const e = new EventEmitter();"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 14,
        "deletions": 0
    }
}