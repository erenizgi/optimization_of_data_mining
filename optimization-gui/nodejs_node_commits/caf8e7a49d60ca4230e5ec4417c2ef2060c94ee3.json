{
    "author": "addaleax",
    "message": "worker: display MessagePort status in util.inspect()\n\nPR-URL: https://github.com/nodejs/node/pull/22658\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Denys Otrishko <shishugi@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "caf8e7a49d60ca4230e5ec4417c2ef2060c94ee3",
    "files": [
        {
            "sha": "402fc30b591d2d61376e027068eea5b96205aec7",
            "filename": "lib/internal/worker.js",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/caf8e7a49d60ca4230e5ec4417c2ef2060c94ee3/lib%2Finternal%2Fworker.js",
            "raw_url": "https://github.com/nodejs/node/raw/caf8e7a49d60ca4230e5ec4417c2ef2060c94ee3/lib%2Finternal%2Fworker.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fworker.js?ref=caf8e7a49d60ca4230e5ec4417c2ef2060c94ee3",
            "patch": "@@ -125,6 +125,27 @@ MessagePort.prototype.close = function(cb) {\n const drainMessagePort = MessagePort.prototype.drain;\n delete MessagePort.prototype.drain;\n \n+Object.defineProperty(MessagePort.prototype, util.inspect.custom, {\n+  enumerable: false,\n+  writable: false,\n+  value: function inspect() {  // eslint-disable-line func-name-matching\n+    let ref;\n+    try {\n+      // This may throw when `this` does not refer to a native object,\n+      // e.g. when accessing the prototype directly.\n+      ref = this.hasRef();\n+    } catch { return this; }\n+    return Object.assign(Object.create(MessagePort.prototype),\n+                         ref === undefined ? {\n+                           active: false,\n+                         } : {\n+                           active: true,\n+                           refed: ref\n+                         },\n+                         this);\n+  }\n+});\n+\n function setupPortReferencing(port, eventEmitter, eventName) {\n   // Keep track of whether there are any workerMessage listeners:\n   // If there are some, ref() the channel so it keeps the event loop alive."
        }
    ],
    "stats": {
        "total": 21,
        "additions": 21,
        "deletions": 0
    }
}