{
    "author": "BridgeAR",
    "message": "assert: make skipping indicator blue\n\nIf lines gets skipped, they are marked with three dots. This makes\nsure they are better visualized to distinguish them from everything\nelse.\n\nPR-URL: https://github.com/nodejs/node/pull/20315\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>",
    "sha": "8a0fb137d887db56337a7206804affcbc8e18304",
    "files": [
        {
            "sha": "5299b66c831061ddd83d572308f5cd9031e4a107",
            "filename": "lib/internal/errors.js",
            "status": "modified",
            "additions": 12,
            "deletions": 8,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/8a0fb137d887db56337a7206804affcbc8e18304/lib%2Finternal%2Ferrors.js",
            "raw_url": "https://github.com/nodejs/node/raw/8a0fb137d887db56337a7206804affcbc8e18304/lib%2Finternal%2Ferrors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ferrors.js?ref=8a0fb137d887db56337a7206804affcbc8e18304",
            "patch": "@@ -15,6 +15,7 @@ const kInfo = Symbol('info');\n const messages = new Map();\n const codes = {};\n \n+let blue = '';\n let green = '';\n let red = '';\n let white = '';\n@@ -259,7 +260,7 @@ function createErrDiff(actual, expected, operator) {\n   const expectedLines = inspectValue(expected);\n   const msg = READABLE_OPERATOR[operator] +\n         `:\\n${green}+ expected${white} ${red}- actual${white}`;\n-  const skippedMsg = ' ... Lines skipped';\n+  const skippedMsg = ` ${blue}...${white} Lines skipped`;\n \n   // Remove all ending lines that match (this optimizes the output for\n   // readability by reducing the number of total changed lines).\n@@ -280,7 +281,7 @@ function createErrDiff(actual, expected, operator) {\n     b = expectedLines[expectedLines.length - 1];\n   }\n   if (i > 3) {\n-    end = `\\n...${end}`;\n+    end = `\\n${blue}...${white}${end}`;\n     skipped = true;\n   }\n   if (other !== '') {\n@@ -297,7 +298,7 @@ function createErrDiff(actual, expected, operator) {\n     if (actualLines.length < i + 1) {\n       if (cur > 1 && i > 2) {\n         if (cur > 4) {\n-          res += '\\n...';\n+          res += `\\n${blue}...${white}`;\n           skipped = true;\n         } else if (cur > 3) {\n           res += `\\n  ${expectedLines[i - 2]}`;\n@@ -313,7 +314,7 @@ function createErrDiff(actual, expected, operator) {\n     } else if (expectedLines.length < i + 1) {\n       if (cur > 1 && i > 2) {\n         if (cur > 4) {\n-          res += '\\n...';\n+          res += `\\n${blue}...${white}`;\n           skipped = true;\n         } else if (cur > 3) {\n           res += `\\n  ${actualLines[i - 2]}`;\n@@ -329,7 +330,7 @@ function createErrDiff(actual, expected, operator) {\n     } else if (actualLines[i] !== expectedLines[i]) {\n       if (cur > 1 && i > 2) {\n         if (cur > 4) {\n-          res += '\\n...';\n+          res += `\\n${blue}...${white}`;\n           skipped = true;\n         } else if (cur > 3) {\n           res += `\\n  ${actualLines[i - 2]}`;\n@@ -354,7 +355,8 @@ function createErrDiff(actual, expected, operator) {\n     }\n     // Inspected object to big (Show ~20 rows max)\n     if (printedLines > 20 && i < maxLines - 2) {\n-      return `${msg}${skippedMsg}\\n${res}\\n...${other}\\n...`;\n+      return `${msg}${skippedMsg}\\n${res}\\n${blue}...${white}${other}\\n` +\n+        `${blue}...${white}`;\n     }\n   }\n \n@@ -371,7 +373,7 @@ function createErrDiff(actual, expected, operator) {\n     // Only remove lines in case it makes sense to collapse those.\n     // TODO: Accept env to always show the full error.\n     if (actualLines.length > 30) {\n-      actualLines[26] = '...';\n+      actualLines[26] = `${blue}...${white}`;\n       while (actualLines.length > 27) {\n         actualLines.pop();\n       }\n@@ -402,10 +404,12 @@ class AssertionError extends Error {\n         // Reset on each call to make sure we handle dynamically set environment\n         // variables correct.\n         if (process.stdout.getColorDepth() !== 1) {\n+          blue = '\\u001b[34m';\n           green = '\\u001b[32m';\n           white = '\\u001b[39m';\n           red = '\\u001b[31m';\n         } else {\n+          blue = '';\n           green = '';\n           white = '';\n           red = '';\n@@ -435,7 +439,7 @@ class AssertionError extends Error {\n         // Only remove lines in case it makes sense to collapse those.\n         // TODO: Accept env to always show the full error.\n         if (res.length > 30) {\n-          res[26] = '...';\n+          res[26] = `${blue}...${white}`;\n           while (res.length > 27) {\n             res.pop();\n           }"
        },
        {
            "sha": "75d3af55796e1bc0b2e3177c3ab5e0d3776cfbd4",
            "filename": "test/pseudo-tty/test-assert-colors.js",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/8a0fb137d887db56337a7206804affcbc8e18304/test%2Fpseudo-tty%2Ftest-assert-colors.js",
            "raw_url": "https://github.com/nodejs/node/raw/8a0fb137d887db56337a7206804affcbc8e18304/test%2Fpseudo-tty%2Ftest-assert-colors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpseudo-tty%2Ftest-assert-colors.js?ref=8a0fb137d887db56337a7206804affcbc8e18304",
            "patch": "@@ -5,13 +5,16 @@ const assert = require('assert').strict;\n try {\n   // Activate colors even if the tty does not support colors.\n   process.env.COLORTERM = '1';\n-  assert.deepStrictEqual([1, 2], [2, 2]);\n+  assert.deepStrictEqual([1, 2, 2, 2], [2, 2, 2, 2]);\n } catch (err) {\n   const expected = 'Input A expected to strictly deep-equal input B:\\n' +\n-    '\\u001b[32m+ expected\\u001b[39m \\u001b[31m- actual\\u001b[39m\\n\\n' +\n+    '\\u001b[32m+ expected\\u001b[39m \\u001b[31m- actual\\u001b[39m' +\n+      ' \\u001b[34m...\\u001b[39m Lines skipped\\n\\n' +\n     '  [\\n' +\n     '\\u001b[31m-\\u001b[39m   1,\\n' +\n     '\\u001b[32m+\\u001b[39m   2,\\n' +\n+    '    2,\\n' +\n+    '\\u001b[34m...\\u001b[39m\\n' +\n     '    2\\n' +\n     '  ]';\n   assert.strictEqual(err.message, expected);"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 17,
        "deletions": 10
    }
}