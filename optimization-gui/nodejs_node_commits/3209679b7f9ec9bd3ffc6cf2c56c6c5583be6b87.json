{
    "author": "BridgeAR",
    "message": "util: add util.types.isBoxedPrimitive\n\nChecking all boxed primitives individually requires to cross the C++\nbarrier multiple times besides being more complicated than just a\nsingle check.\n\nPR-URL: https://github.com/nodejs/node/pull/22620\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: John-David Dalton <john.david.dalton@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87",
    "files": [
        {
            "sha": "44495e977d13c3b3200c9bd71c096bdfe1aa875f",
            "filename": "doc/api/util.md",
            "status": "modified",
            "additions": 24,
            "deletions": 3,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87/doc%2Fapi%2Futil.md",
            "raw_url": "https://github.com/nodejs/node/raw/3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87/doc%2Fapi%2Futil.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Futil.md?ref=3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87",
            "patch": "@@ -1049,10 +1049,31 @@ by `new Boolean()`.\n ```js\n util.types.isBooleanObject(false);  // Returns false\n util.types.isBooleanObject(true);   // Returns false\n-util.types.isBooleanObject(new Boolean(false));   // Returns true\n-util.types.isBooleanObject(new Boolean(true));    // Returns true\n+util.types.isBooleanObject(new Boolean(false)); // Returns true\n+util.types.isBooleanObject(new Boolean(true));  // Returns true\n util.types.isBooleanObject(Boolean(false)); // Returns false\n-util.types.isBooleanObject(Boolean(true)); // Returns false\n+util.types.isBooleanObject(Boolean(true));  // Returns false\n+```\n+\n+### util.types.isBoxedPrimitive(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+* `value` {any}\n+* Returns: {boolean}\n+\n+Returns `true` if the value is any boxed primitive object, e.g. created\n+by `new Boolean()`, `new String()` or `Object(Symbol())`.\n+\n+For example:\n+\n+```js\n+util.types.isBoxedPrimitive(false); // Returns false\n+util.types.isBoxedPrimitive(new Boolean(false)); // Returns true\n+util.types.isBoxedPrimitive(Symbol('foo')); // Returns false\n+util.types.isBoxedPrimitive(Object(Symbol('foo'))); // Returns true\n+util.types.isBoxedPrimitive(Object(BigInt(5))); // Returns true\n ```\n \n ### util.types.isDataView(value)"
        },
        {
            "sha": "97f6ef4e28c13c4b96c03feb8fd4eb551d9c625d",
            "filename": "src/node_types.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87/src%2Fnode_types.cc",
            "raw_url": "https://github.com/nodejs/node/raw/3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87/src%2Fnode_types.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_types.cc?ref=3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87",
            "patch": "@@ -51,6 +51,15 @@ static void IsAnyArrayBuffer(const FunctionCallbackInfo<Value>& args) {\n     args[0]->IsArrayBuffer() || args[0]->IsSharedArrayBuffer());\n }\n \n+static void IsBoxedPrimitive(const FunctionCallbackInfo<Value>& args) {\n+  args.GetReturnValue().Set(\n+    args[0]->IsNumberObject() ||\n+    args[0]->IsStringObject() ||\n+    args[0]->IsBooleanObject() ||\n+    args[0]->IsBigIntObject() ||\n+    args[0]->IsSymbolObject());\n+}\n+\n void InitializeTypes(Local<Object> target,\n                      Local<Value> unused,\n                      Local<Context> context) {\n@@ -63,6 +72,7 @@ void InitializeTypes(Local<Object> target,\n #undef V\n \n   env->SetMethodNoSideEffect(target, \"isAnyArrayBuffer\", IsAnyArrayBuffer);\n+  env->SetMethodNoSideEffect(target, \"isBoxedPrimitive\", IsBoxedPrimitive);\n }\n \n }  // anonymous namespace"
        },
        {
            "sha": "2978cbf98deb0cf20ba9158fd21748b7a0b4a520",
            "filename": "test/parallel/test-util-types.js",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87/test%2Fparallel%2Ftest-util-types.js",
            "raw_url": "https://github.com/nodejs/node/raw/3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87/test%2Fparallel%2Ftest-util-types.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util-types.js?ref=3209679b7f9ec9bd3ffc6cf2c56c6c5583be6b87",
            "patch": "@@ -57,7 +57,8 @@ for (const [ value, _method ] of [\n \n   for (const key of Object.keys(types)) {\n     if ((types.isArrayBufferView(value) ||\n-         types.isAnyArrayBuffer(value)) && key.includes('Array')) {\n+         types.isAnyArrayBuffer(value)) && key.includes('Array') ||\n+         key === 'isBoxedPrimitive') {\n       continue;\n     }\n \n@@ -68,6 +69,15 @@ for (const [ value, _method ] of [\n   }\n }\n \n+// Check boxed primitives.\n+[\n+  new Boolean(),\n+  new Number(),\n+  new String(),\n+  Object(Symbol()),\n+  Object(BigInt(0))\n+].forEach((entry) => assert(types.isBoxedPrimitive(entry)));\n+\n {\n   assert(!types.isUint8Array({ [Symbol.toStringTag]: 'Uint8Array' }));\n   assert(types.isUint8Array(vm.runInNewContext('new Uint8Array')));"
        }
    ],
    "stats": {
        "total": 49,
        "additions": 45,
        "deletions": 4
    }
}