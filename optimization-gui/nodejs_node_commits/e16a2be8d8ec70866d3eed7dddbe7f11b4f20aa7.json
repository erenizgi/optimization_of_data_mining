{
    "author": "danbev",
    "message": "src: avoid duplicate Before/AtExitCallback structs\n\nCurrently, BeforeExitCallback and AtExitCallback are identical apart for\nthe name of the struct. This commit introduces an ExitCallback struct\nwith can be used in both cases to avoid the duplication.\n\nPR-URL: https://github.com/nodejs/node/pull/19226\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "e16a2be8d8ec70866d3eed7dddbe7f11b4f20aa7",
    "files": [
        {
            "sha": "913f0e865beb1d7c824bf834350403006c16aeeb",
            "filename": "src/env.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/e16a2be8d8ec70866d3eed7dddbe7f11b4f20aa7/src%2Fenv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/e16a2be8d8ec70866d3eed7dddbe7f11b4f20aa7/src%2Fenv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.cc?ref=e16a2be8d8ec70866d3eed7dddbe7f11b4f20aa7",
            "patch": "@@ -293,25 +293,25 @@ void Environment::PrintSyncTrace() const {\n }\n \n void Environment::RunBeforeExitCallbacks() {\n-  for (BeforeExitCallback before_exit : before_exit_functions_) {\n+  for (ExitCallback before_exit : before_exit_functions_) {\n     before_exit.cb_(before_exit.arg_);\n   }\n   before_exit_functions_.clear();\n }\n \n void Environment::BeforeExit(void (*cb)(void* arg), void* arg) {\n-  before_exit_functions_.push_back(BeforeExitCallback{cb, arg});\n+  before_exit_functions_.push_back(ExitCallback{cb, arg});\n }\n \n void Environment::RunAtExitCallbacks() {\n-  for (AtExitCallback at_exit : at_exit_functions_) {\n+  for (ExitCallback at_exit : at_exit_functions_) {\n     at_exit.cb_(at_exit.arg_);\n   }\n   at_exit_functions_.clear();\n }\n \n void Environment::AtExit(void (*cb)(void* arg), void* arg) {\n-  at_exit_functions_.push_back(AtExitCallback{cb, arg});\n+  at_exit_functions_.push_back(ExitCallback{cb, arg});\n }\n \n void Environment::AddPromiseHook(promise_hook_func fn, void* arg) {"
        },
        {
            "sha": "2fd3254ed72efb726f9f7e8fd1ee16bde05d04b7",
            "filename": "src/env.h",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/e16a2be8d8ec70866d3eed7dddbe7f11b4f20aa7/src%2Fenv.h",
            "raw_url": "https://github.com/nodejs/node/raw/e16a2be8d8ec70866d3eed7dddbe7f11b4f20aa7/src%2Fenv.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.h?ref=e16a2be8d8ec70866d3eed7dddbe7f11b4f20aa7",
            "patch": "@@ -823,17 +823,13 @@ class Environment {\n   static const int kFsStatsFieldsLength = 2 * 14;\n   AliasedBuffer<double, v8::Float64Array> fs_stats_field_array_;\n \n-  struct BeforeExitCallback {\n+  struct ExitCallback {\n     void (*cb_)(void* arg);\n     void* arg_;\n   };\n-  std::list<BeforeExitCallback> before_exit_functions_;\n+  std::list<ExitCallback> before_exit_functions_;\n \n-  struct AtExitCallback {\n-    void (*cb_)(void* arg);\n-    void* arg_;\n-  };\n-  std::list<AtExitCallback> at_exit_functions_;\n+  std::list<ExitCallback> at_exit_functions_;\n \n   struct PromiseHookCallback {\n     promise_hook_func cb_;"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 7,
        "deletions": 11
    }
}