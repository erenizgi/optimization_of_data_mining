{
    "author": "LakshmiSwethaG",
    "message": "test: refactor to block-scope\n\nPR-URL: https://github.com/nodejs/node/pull/25532\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "0f0e7f55f86d065b77de5e9d6a91637aac09372a",
    "files": [
        {
            "sha": "13b4dc340e43cf7900f48ac25def72f2d3d57017",
            "filename": "test/parallel/test-fs-watch-encoding.js",
            "status": "modified",
            "additions": 37,
            "deletions": 28,
            "changes": 65,
            "blob_url": "https://github.com/nodejs/node/blob/0f0e7f55f86d065b77de5e9d6a91637aac09372a/test%2Fparallel%2Ftest-fs-watch-encoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/0f0e7f55f86d065b77de5e9d6a91637aac09372a/test%2Fparallel%2Ftest-fs-watch-encoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-watch-encoding.js?ref=0f0e7f55f86d065b77de5e9d6a91637aac09372a",
            "patch": "@@ -42,36 +42,45 @@ function unregisterWatcher(watcher) {\n   }\n }\n \n-const watcher1 = fs.watch(\n-  tmpdir.path,\n-  { encoding: 'hex' },\n-  (event, filename) => {\n-    if (['e696b0e5bbbae69687e5a4b9e4bbb62e747874', null].includes(filename))\n-      done(watcher1);\n-  }\n-);\n-registerWatcher(watcher1);\n+{\n+  // Test that using the `encoding` option has the expected result.\n+  const watcher = fs.watch(\n+    tmpdir.path,\n+    { encoding: 'hex' },\n+    (event, filename) => {\n+      if (['e696b0e5bbbae69687e5a4b9e4bbb62e747874', null].includes(filename))\n+        done(watcher);\n+    }\n+  );\n+  registerWatcher(watcher);\n+}\n \n-const watcher2 = fs.watch(\n-  tmpdir.path,\n-  (event, filename) => {\n-    if ([fn, null].includes(filename))\n-      done(watcher2);\n-  }\n-);\n-registerWatcher(watcher2);\n+{\n+  // Test that in absence of `encoding` option has the expected result.\n+  const watcher = fs.watch(\n+    tmpdir.path,\n+    (event, filename) => {\n+      if ([fn, null].includes(filename))\n+        done(watcher);\n+    }\n+  );\n+  registerWatcher(watcher);\n+}\n \n-const watcher3 = fs.watch(\n-  tmpdir.path,\n-  { encoding: 'buffer' },\n-  (event, filename) => {\n-    if (filename instanceof Buffer && filename.toString('utf8') === fn)\n-      done(watcher3);\n-    else if (filename === null)\n-      done(watcher3);\n-  }\n-);\n-registerWatcher(watcher3);\n+{\n+  // Test that using the `encoding` option has the expected result.\n+  const watcher = fs.watch(\n+    tmpdir.path,\n+    { encoding: 'buffer' },\n+    (event, filename) => {\n+      if (filename instanceof Buffer && filename.toString('utf8') === fn)\n+        done(watcher);\n+      else if (filename === null)\n+        done(watcher);\n+    }\n+  );\n+  registerWatcher(watcher);\n+}\n \n const done = common.mustCall(unregisterWatcher, watchers.size);\n "
        }
    ],
    "stats": {
        "total": 65,
        "additions": 37,
        "deletions": 28
    }
}