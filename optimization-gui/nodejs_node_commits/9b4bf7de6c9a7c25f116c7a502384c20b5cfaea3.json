{
    "author": "targos",
    "message": "deps: update V8 to 7.1.302.28\n\nPR-URL: https://github.com/nodejs/node/pull/23423\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Myles Borins <myles.borins@gmail.com>",
    "sha": "9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
    "files": [
        {
            "sha": "31d7ddc750011f04fc4d784612143559ddd3031f",
            "filename": "deps/v8/.clang-tidy",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2F.clang-tidy",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2F.clang-tidy",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.clang-tidy?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,20 @@\n+---\n+---\n+  Checks:          '-*,\n+                    modernize-redundant-void-arg,\n+                    modernize-replace-random-shuffle,\n+                    modernize-shrink-to-fit,\n+                    modernize-use-auto,\n+                    modernize-use-bool-literals,\n+                    modernize-use-equals-default,\n+                    modernize-use-equals-delete,\n+                    modernize-use-nullptr,\n+                    modernize-use-override,\n+                    google-build-explicit-make-pair,\n+                    google-explicit-constructor,\n+                    google-readability-casting'\n+WarningsAsErrors: ''\n+HeaderFilterRegex: ''\n+AnalyzeTemporaryDtors: false\n+...\n+"
        },
        {
            "sha": "b3e9762a9392a153e69ea9e7b89a0f3a028f1600",
            "filename": "deps/v8/.gitattributes",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2F.gitattributes",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2F.gitattributes",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.gitattributes?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -3,3 +3,5 @@\n # Do not modify line endings for binary files (which are sometimes auto\n # detected as text files by git).\n *.png binary\n+# Don't include minified JS in git grep/diff output\n+test/mjsunit/asm/sqlite3/*.js -diff"
        },
        {
            "sha": "7f09c89e360f8edae03f5fbcf369457dad1ce2a4",
            "filename": "deps/v8/.gitignore",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2F.gitignore",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2F.gitignore",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.gitignore?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -73,7 +73,6 @@\n /tools/clang\n /tools/gcmole/gcmole-tools\n /tools/gcmole/gcmole-tools.tar.gz\n-/tools/gyp\n /tools/jsfunfuzz/jsfunfuzz\n /tools/jsfunfuzz/jsfunfuzz.tar.gz\n /tools/luci-go"
        },
        {
            "sha": "b935565945dad71c1b8aec12b7bc471fbd99be7c",
            "filename": "deps/v8/AUTHORS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FAUTHORS",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FAUTHORS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FAUTHORS?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -132,6 +132,7 @@ Peter Rybin <peter.rybin@gmail.com>\n Peter Varga <pvarga@inf.u-szeged.hu>\n Peter Wong <peter.wm.wong@gmail.com>\n Paul Lind <plind44@gmail.com>\n+PhistucK <phistuck@gmail.com>\n Qingyan Li <qingyan.liqy@alibaba-inc.com>\n Qiuyi Zhang <qiuyi.zqy@alibaba-inc.com>\n Rafal Krypa <rafal@krypa.net>\n@@ -162,6 +163,7 @@ Vladimir Krivosheev <develar@gmail.com>\n Vladimir Shutoff <vovan@shutoff.ru>\n Wiktor Garbacz <wiktor.garbacz@gmail.com>\n Xiaoyin Liu <xiaoyin.l@outlook.com>\n+Yannic Bonenberger <contact@yannic-bonenberger.com>\n Yong Wang <ccyongwang@tencent.com>\n Yu Yin <xwafish@gmail.com>\n Zac Hansen <xaxxon@gmail.com>"
        },
        {
            "sha": "83f1fdb0bf75dd5f7efa490cd5bd1221e31748ed",
            "filename": "deps/v8/BUILD.gn",
            "status": "modified",
            "additions": 170,
            "deletions": 28,
            "changes": 198,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FBUILD.gn",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FBUILD.gn",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FBUILD.gn?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -76,9 +76,6 @@ declare_args() {\n   v8_enable_embedded_builtins = v8_use_snapshot && v8_current_cpu != \"x86\" &&\n                                 !is_aix && (!is_win || is_clang)\n \n-  # Enable embedded bytecode handlers.\n-  v8_enable_embedded_bytecode_handlers = false\n-\n   # Enable code-generation-time checking of types in the CodeStubAssembler.\n   v8_enable_verify_csa = false\n \n@@ -164,6 +161,17 @@ declare_args() {\n   # setting the \"check_v8_header_includes\" gclient variable to run a\n   # specific hook).\n   v8_check_header_includes = false\n+\n+  # We reuse the snapshot toolchain for building torque and other generators to\n+  # avoid building v8_libbase on the host more than once. On mips with big\n+  # endian, the snapshot toolchain is the target toolchain and, hence, can't be\n+  # used.\n+}\n+\n+v8_generator_toolchain = v8_snapshot_toolchain\n+if (host_cpu == \"x64\" &&\n+    (v8_current_cpu == \"mips\" || v8_current_cpu == \"mips64\")) {\n+  v8_generator_toolchain = \"//build/toolchain/linux:clang_x64\"\n }\n \n # Derived defaults.\n@@ -197,9 +205,6 @@ assert(\n         !v8_untrusted_code_mitigations,\n     \"Embedded builtins on ia32 and untrusted code mitigations are incompatible\")\n \n-assert(!v8_enable_embedded_bytecode_handlers || v8_enable_embedded_builtins,\n-       \"Embedded bytecode handlers only work with embedded builtins\")\n-\n # Specifies if the target build is a simulator build. Comparing target cpu\n # with v8 target cpu to not affect simulator builds for making cross-compile\n # snapshots.\n@@ -377,10 +382,10 @@ config(\"features\") {\n     defines += [ \"V8_CHECK_MICROTASKS_SCOPES_CONSISTENCY\" ]\n   }\n   if (v8_enable_embedded_builtins) {\n-    defines += [ \"V8_EMBEDDED_BUILTINS\" ]\n-  }\n-  if (v8_enable_embedded_bytecode_handlers) {\n-    defines += [ \"V8_EMBEDDED_BYTECODE_HANDLERS\" ]\n+    defines += [\n+      \"V8_EMBEDDED_BUILTINS\",\n+      \"V8_EMBEDDED_BYTECODE_HANDLERS\",\n+    ]\n   }\n   if (v8_use_multi_snapshots) {\n     defines += [ \"V8_MULTI_SNAPSHOTS\" ]\n@@ -849,6 +854,8 @@ action(\"postmortem-metadata\") {\n   sources = [\n     \"src/objects.h\",\n     \"src/objects-inl.h\",\n+    \"src/objects/allocation-site-inl.h\",\n+    \"src/objects/allocation-site.h\",\n     \"src/objects/code-inl.h\",\n     \"src/objects/code.h\",\n     \"src/objects/data-handler.h\",\n@@ -859,6 +866,8 @@ action(\"postmortem-metadata\") {\n     \"src/objects/js-array.h\",\n     \"src/objects/js-array-buffer-inl.h\",\n     \"src/objects/js-array-buffer.h\",\n+    \"src/objects/js-objects-inl.h\",\n+    \"src/objects/js-objects.h\",\n     \"src/objects/js-regexp-inl.h\",\n     \"src/objects/js-regexp.h\",\n     \"src/objects/js-regexp-string-iterator-inl.h\",\n@@ -889,7 +898,10 @@ torque_files = [\n   \"src/builtins/array.tq\",\n   \"src/builtins/array-copywithin.tq\",\n   \"src/builtins/array-foreach.tq\",\n+  \"src/builtins/array-lastindexof.tq\",\n   \"src/builtins/array-reverse.tq\",\n+  \"src/builtins/array-splice.tq\",\n+  \"src/builtins/array-unshift.tq\",\n   \"src/builtins/typed-array.tq\",\n   \"src/builtins/data-view.tq\",\n   \"test/torque/test-torque.tq\",\n@@ -911,17 +923,8 @@ action(\"run_torque\") {\n     \"test/cctest/:*\",\n   ]\n \n-  # We reuse the snapshot toolchain for building torque to not build v8_libbase\n-  # on the host more than once. On mips with big endian, the snapshot toolchain\n-  # is the target toolchain and, hence, can't be used.\n-  v8_torque_toolchain = v8_snapshot_toolchain\n-  if (host_cpu == \"x64\" &&\n-      (v8_current_cpu == \"mips\" || v8_current_cpu == \"mips64\")) {\n-    v8_torque_toolchain = \"//build/toolchain/linux:clang_x64\"\n-  }\n-\n   deps = [\n-    \":torque($v8_torque_toolchain)\",\n+    \":torque($v8_generator_toolchain)\",\n   ]\n \n   script = \"tools/run.py\"\n@@ -939,7 +942,7 @@ action(\"run_torque\") {\n   }\n \n   args = [\n-    \"./\" + rebase_path(get_label_info(\":torque($v8_torque_toolchain)\",\n+    \"./\" + rebase_path(get_label_info(\":torque($v8_generator_toolchain)\",\n                                       \"root_out_dir\") + \"/torque\",\n                        root_build_dir),\n     \"-o\",\n@@ -969,6 +972,7 @@ v8_source_set(\"torque_generated_initializers\") {\n   visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n \n   deps = [\n+    \":generate_bytecode_builtins_list\",\n     \":run_torque\",\n   ]\n \n@@ -989,6 +993,24 @@ v8_source_set(\"torque_generated_initializers\") {\n   configs = [ \":internal_config\" ]\n }\n \n+action(\"generate_bytecode_builtins_list\") {\n+  script = \"tools/run.py\"\n+  outputs = [\n+    \"$target_gen_dir/builtins-generated/bytecodes-builtins-list.h\",\n+  ]\n+  deps = [\n+    \":bytecode_builtins_list_generator($v8_generator_toolchain)\",\n+  ]\n+  args = [\n+    \"./\" + rebase_path(\n+            get_label_info(\n+                    \":bytecode_builtins_list_generator($v8_generator_toolchain)\",\n+                    \"root_out_dir\") + \"/bytecode_builtins_list_generator\",\n+            root_build_dir),\n+    rebase_path(\"$target_gen_dir/builtins-generated/bytecodes-builtins-list.h\"),\n+  ]\n+}\n+\n # Template to generate different V8 snapshots based on different runtime flags.\n # Can be invoked with run_mksnapshot(<name>). The target will resolve to\n # run_mksnapshot_<name>. If <name> is \"default\", no file suffixes will be used.\n@@ -1382,8 +1404,6 @@ v8_source_set(\"v8_initializers\") {\n     \"src/interpreter/interpreter-generator.h\",\n     \"src/interpreter/interpreter-intrinsics-generator.cc\",\n     \"src/interpreter/interpreter-intrinsics-generator.h\",\n-    \"src/interpreter/setup-interpreter-internal.cc\",\n-    \"src/interpreter/setup-interpreter.h\",\n   ]\n \n   if (use_jumbo_build == true) {\n@@ -1485,6 +1505,7 @@ v8_header_set(\"v8_headers\") {\n   configs = [ \":internal_config\" ]\n \n   sources = [\n+    \"include/v8-internal.h\",\n     \"include/v8.h\",\n     \"include/v8config.h\",\n   ]\n@@ -1504,8 +1525,10 @@ v8_source_set(\"v8_base\") {\n     \"//base/trace_event/common/trace_event_common.h\",\n \n     ### gcmole(all) ###\n+    \"$target_gen_dir/builtins-generated/bytecodes-builtins-list.h\",\n     \"include/v8-inspector-protocol.h\",\n     \"include/v8-inspector.h\",\n+    \"include/v8-internal.h\",\n     \"include/v8-platform.h\",\n     \"include/v8-profiler.h\",\n     \"include/v8-testing.h\",\n@@ -1516,6 +1539,7 @@ v8_source_set(\"v8_base\") {\n     \"src/accessors.h\",\n     \"src/address-map.cc\",\n     \"src/address-map.h\",\n+    \"src/allocation-site-scopes-inl.h\",\n     \"src/allocation-site-scopes.h\",\n     \"src/allocation.cc\",\n     \"src/allocation.h\",\n@@ -1562,6 +1586,7 @@ v8_source_set(\"v8_base\") {\n     \"src/ast/modules.h\",\n     \"src/ast/prettyprinter.cc\",\n     \"src/ast/prettyprinter.h\",\n+    \"src/ast/scopes-inl.h\",\n     \"src/ast/scopes.cc\",\n     \"src/ast/scopes.h\",\n     \"src/ast/variables.cc\",\n@@ -1599,7 +1624,6 @@ v8_source_set(\"v8_base\") {\n     \"src/builtins/builtins-internal.cc\",\n     \"src/builtins/builtins-interpreter.cc\",\n     \"src/builtins/builtins-intl.cc\",\n-    \"src/builtins/builtins-intl.h\",\n     \"src/builtins/builtins-json.cc\",\n     \"src/builtins/builtins-math.cc\",\n     \"src/builtins/builtins-number.cc\",\n@@ -1813,6 +1837,7 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/operator.h\",\n     \"src/compiler/osr.cc\",\n     \"src/compiler/osr.h\",\n+    \"src/compiler/per-isolate-compiler-cache.h\",\n     \"src/compiler/persistent-map.h\",\n     \"src/compiler/pipeline-statistics.cc\",\n     \"src/compiler/pipeline-statistics.h\",\n@@ -1824,6 +1849,8 @@ v8_source_set(\"v8_base\") {\n     \"src/compiler/raw-machine-assembler.h\",\n     \"src/compiler/redundancy-elimination.cc\",\n     \"src/compiler/redundancy-elimination.h\",\n+    \"src/compiler/refs-map.cc\",\n+    \"src/compiler/refs-map.h\",\n     \"src/compiler/register-allocator-verifier.cc\",\n     \"src/compiler/register-allocator-verifier.h\",\n     \"src/compiler/register-allocator.cc\",\n@@ -2140,6 +2167,8 @@ v8_source_set(\"v8_base\") {\n     \"src/macro-assembler.h\",\n     \"src/map-updater.cc\",\n     \"src/map-updater.h\",\n+    \"src/math-random.cc\",\n+    \"src/math-random.h\",\n     \"src/maybe-handles-inl.h\",\n     \"src/maybe-handles.h\",\n     \"src/messages.cc\",\n@@ -2158,6 +2187,7 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/arguments.h\",\n     \"src/objects/bigint.cc\",\n     \"src/objects/bigint.h\",\n+    \"src/objects/builtin-function-id.h\",\n     \"src/objects/code-inl.h\",\n     \"src/objects/code.h\",\n     \"src/objects/compilation-cache-inl.h\",\n@@ -2181,11 +2211,17 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/js-array-buffer.h\",\n     \"src/objects/js-array-inl.h\",\n     \"src/objects/js-array.h\",\n+    \"src/objects/js-break-iterator-inl.h\",\n+    \"src/objects/js-break-iterator.cc\",\n+    \"src/objects/js-break-iterator.h\",\n     \"src/objects/js-collator-inl.h\",\n     \"src/objects/js-collator.cc\",\n     \"src/objects/js-collator.h\",\n     \"src/objects/js-collection-inl.h\",\n     \"src/objects/js-collection.h\",\n+    \"src/objects/js-date-time-format-inl.h\",\n+    \"src/objects/js-date-time-format.cc\",\n+    \"src/objects/js-date-time-format.h\",\n     \"src/objects/js-generator-inl.h\",\n     \"src/objects/js-generator.h\",\n     \"src/objects/js-list-format-inl.h\",\n@@ -2194,6 +2230,11 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/js-locale-inl.h\",\n     \"src/objects/js-locale.cc\",\n     \"src/objects/js-locale.h\",\n+    \"src/objects/js-number-format-inl.h\",\n+    \"src/objects/js-number-format.cc\",\n+    \"src/objects/js-number-format.h\",\n+    \"src/objects/js-objects-inl.h\",\n+    \"src/objects/js-objects.h\",\n     \"src/objects/js-plural-rules-inl.h\",\n     \"src/objects/js-plural-rules.cc\",\n     \"src/objects/js-plural-rules.h\",\n@@ -2208,6 +2249,9 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/js-relative-time-format-inl.h\",\n     \"src/objects/js-relative-time-format.cc\",\n     \"src/objects/js-relative-time-format.h\",\n+    \"src/objects/js-segmenter-inl.h\",\n+    \"src/objects/js-segmenter.cc\",\n+    \"src/objects/js-segmenter.h\",\n     \"src/objects/literal-objects-inl.h\",\n     \"src/objects/literal-objects.cc\",\n     \"src/objects/literal-objects.h\",\n@@ -2218,6 +2262,9 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/maybe-object-inl.h\",\n     \"src/objects/maybe-object.h\",\n     \"src/objects/microtask-inl.h\",\n+    \"src/objects/microtask-queue-inl.h\",\n+    \"src/objects/microtask-queue.cc\",\n+    \"src/objects/microtask-queue.h\",\n     \"src/objects/microtask.h\",\n     \"src/objects/module-inl.h\",\n     \"src/objects/module.cc\",\n@@ -2231,6 +2278,8 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/ordered-hash-table.h\",\n     \"src/objects/promise-inl.h\",\n     \"src/objects/promise.h\",\n+    \"src/objects/property-array-inl.h\",\n+    \"src/objects/property-array.h\",\n     \"src/objects/property-descriptor-object-inl.h\",\n     \"src/objects/property-descriptor-object.h\",\n     \"src/objects/prototype-info-inl.h\",\n@@ -2242,6 +2291,8 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/script.h\",\n     \"src/objects/shared-function-info-inl.h\",\n     \"src/objects/shared-function-info.h\",\n+    \"src/objects/stack-frame-info-inl.h\",\n+    \"src/objects/stack-frame-info.h\",\n     \"src/objects/string-inl.h\",\n     \"src/objects/string-table.h\",\n     \"src/objects/string.h\",\n@@ -2267,6 +2318,7 @@ v8_source_set(\"v8_base\") {\n     \"src/parsing/parsing.cc\",\n     \"src/parsing/parsing.h\",\n     \"src/parsing/pattern-rewriter.cc\",\n+    \"src/parsing/preparsed-scope-data-impl.h\",\n     \"src/parsing/preparsed-scope-data.cc\",\n     \"src/parsing/preparsed-scope-data.h\",\n     \"src/parsing/preparser-logger.h\",\n@@ -2323,6 +2375,8 @@ v8_source_set(\"v8_base\") {\n     \"src/regexp/jsregexp-inl.h\",\n     \"src/regexp/jsregexp.cc\",\n     \"src/regexp/jsregexp.h\",\n+    \"src/regexp/property-sequences.cc\",\n+    \"src/regexp/property-sequences.h\",\n     \"src/regexp/regexp-ast.cc\",\n     \"src/regexp/regexp-ast.h\",\n     \"src/regexp/regexp-macro-assembler-irregexp-inl.h\",\n@@ -2344,6 +2398,7 @@ v8_source_set(\"v8_base\") {\n     \"src/reloc-info.cc\",\n     \"src/reloc-info.h\",\n     \"src/roots-inl.h\",\n+    \"src/roots.cc\",\n     \"src/roots.h\",\n     \"src/runtime-profiler.cc\",\n     \"src/runtime-profiler.h\",\n@@ -2363,7 +2418,6 @@ v8_source_set(\"v8_base\") {\n     \"src/runtime/runtime-interpreter.cc\",\n     \"src/runtime/runtime-intl.cc\",\n     \"src/runtime/runtime-literals.cc\",\n-    \"src/runtime/runtime-maths.cc\",\n     \"src/runtime/runtime-module.cc\",\n     \"src/runtime/runtime-numbers.cc\",\n     \"src/runtime/runtime-object.cc\",\n@@ -2395,8 +2449,6 @@ v8_source_set(\"v8_base\") {\n     \"src/snapshot/builtin-serializer-allocator.h\",\n     \"src/snapshot/builtin-serializer.cc\",\n     \"src/snapshot/builtin-serializer.h\",\n-    \"src/snapshot/builtin-snapshot-utils.cc\",\n-    \"src/snapshot/builtin-snapshot-utils.h\",\n     \"src/snapshot/code-serializer.cc\",\n     \"src/snapshot/code-serializer.h\",\n     \"src/snapshot/default-deserializer-allocator.cc\",\n@@ -2439,6 +2491,8 @@ v8_source_set(\"v8_base\") {\n     \"src/string-builder.cc\",\n     \"src/string-case.cc\",\n     \"src/string-case.h\",\n+    \"src/string-constants.cc\",\n+    \"src/string-constants.h\",\n     \"src/string-hasher-inl.h\",\n     \"src/string-hasher.h\",\n     \"src/string-search.h\",\n@@ -2447,6 +2501,7 @@ v8_source_set(\"v8_base\") {\n     \"src/strtod.cc\",\n     \"src/strtod.h\",\n     \"src/third_party/utf8-decoder/utf8-decoder.h\",\n+    \"src/torque-assembler.h\",\n     \"src/tracing/trace-event.cc\",\n     \"src/tracing/trace-event.h\",\n     \"src/tracing/traced-value.cc\",\n@@ -2518,6 +2573,7 @@ v8_source_set(\"v8_base\") {\n     \"src/wasm/module-compiler.h\",\n     \"src/wasm/module-decoder.cc\",\n     \"src/wasm/module-decoder.h\",\n+    \"src/wasm/object-access.h\",\n     \"src/wasm/signature-map.cc\",\n     \"src/wasm/signature-map.h\",\n     \"src/wasm/streaming-decoder.cc\",\n@@ -2869,6 +2925,7 @@ v8_source_set(\"v8_base\") {\n \n   defines = []\n   deps = [\n+    \":generate_bytecode_builtins_list\",\n     \":torque_generated_core\",\n     \":v8_headers\",\n     \":v8_libbase\",\n@@ -2886,28 +2943,39 @@ v8_source_set(\"v8_base\") {\n   } else {\n     sources -= [\n       \"src/builtins/builtins-intl.cc\",\n-      \"src/builtins/builtins-intl.h\",\n       \"src/char-predicates.cc\",\n       \"src/intl.cc\",\n       \"src/intl.h\",\n       \"src/objects/intl-objects-inl.h\",\n       \"src/objects/intl-objects.cc\",\n       \"src/objects/intl-objects.h\",\n+      \"src/objects/js-break-iterator-inl.h\",\n+      \"src/objects/js-break-iterator.cc\",\n+      \"src/objects/js-break-iterator.h\",\n       \"src/objects/js-collator-inl.h\",\n       \"src/objects/js-collator.cc\",\n       \"src/objects/js-collator.h\",\n+      \"src/objects/js-date-time-format-inl.h\",\n+      \"src/objects/js-date-time-format.cc\",\n+      \"src/objects/js-date-time-format.h\",\n       \"src/objects/js-list-format-inl.h\",\n       \"src/objects/js-list-format.cc\",\n       \"src/objects/js-list-format.h\",\n       \"src/objects/js-locale-inl.h\",\n       \"src/objects/js-locale.cc\",\n       \"src/objects/js-locale.h\",\n+      \"src/objects/js-number-format-inl.h\",\n+      \"src/objects/js-number-format.cc\",\n+      \"src/objects/js-number-format.h\",\n       \"src/objects/js-plural-rules-inl.h\",\n       \"src/objects/js-plural-rules.cc\",\n       \"src/objects/js-plural-rules.h\",\n       \"src/objects/js-relative-time-format-inl.h\",\n       \"src/objects/js-relative-time-format.cc\",\n       \"src/objects/js-relative-time-format.h\",\n+      \"src/objects/js-segmenter-inl.h\",\n+      \"src/objects/js-segmenter.cc\",\n+      \"src/objects/js-segmenter.h\",\n       \"src/runtime/runtime-intl.cc\",\n     ]\n   }\n@@ -2916,14 +2984,27 @@ v8_source_set(\"v8_base\") {\n     sources += [ \"$target_gen_dir/debug-support.cc\" ]\n     deps += [ \":postmortem-metadata\" ]\n   }\n+\n+  # Platforms that don't have CAS support need to link atomic library\n+  # to implement atomic memory access\n+  if (v8_current_cpu == \"mips\" || v8_current_cpu == \"mipsel\" ||\n+      v8_current_cpu == \"mips64\" || v8_current_cpu == \"mips64el\" ||\n+      v8_current_cpu == \"ppc\" || v8_current_cpu == \"ppc64\" ||\n+      v8_current_cpu == \"s390\" || v8_current_cpu == \"s390x\") {\n+    libs = [ \"atomic\" ]\n+  }\n }\n \n v8_source_set(\"torque_base\") {\n   visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n \n   sources = [\n     \"src/torque/ast.h\",\n+    \"src/torque/cfg.cc\",\n+    \"src/torque/cfg.h\",\n     \"src/torque/contextual.h\",\n+    \"src/torque/csa-generator.cc\",\n+    \"src/torque/csa-generator.h\",\n     \"src/torque/declarable.cc\",\n     \"src/torque/declarable.h\",\n     \"src/torque/declaration-visitor.cc\",\n@@ -2937,6 +3018,8 @@ v8_source_set(\"torque_base\") {\n     \"src/torque/global-context.h\",\n     \"src/torque/implementation-visitor.cc\",\n     \"src/torque/implementation-visitor.h\",\n+    \"src/torque/instructions.cc\",\n+    \"src/torque/instructions.h\",\n     \"src/torque/scope.cc\",\n     \"src/torque/scope.h\",\n     \"src/torque/source-positions.cc\",\n@@ -2956,11 +3039,15 @@ v8_source_set(\"torque_base\") {\n   ]\n \n   configs = [ \":internal_config\" ]\n+  if (is_win && is_asan) {\n+    remove_configs = [ \"//build/config/sanitizers:default_sanitizer_flags\" ]\n+  }\n }\n \n v8_component(\"v8_libbase\") {\n   sources = [\n     \"src/base/adapters.h\",\n+    \"src/base/address-region.h\",\n     \"src/base/atomic-utils.h\",\n     \"src/base/atomicops.h\",\n     \"src/base/atomicops_internals_atomicword_compat.h\",\n@@ -2969,6 +3056,8 @@ v8_component(\"v8_libbase\") {\n     \"src/base/base-export.h\",\n     \"src/base/bits.cc\",\n     \"src/base/bits.h\",\n+    \"src/base/bounded-page-allocator.cc\",\n+    \"src/base/bounded-page-allocator.h\",\n     \"src/base/build_config.h\",\n     \"src/base/compiler-specific.h\",\n     \"src/base/cpu.cc\",\n@@ -2994,6 +3083,8 @@ v8_component(\"v8_libbase\") {\n     \"src/base/list.h\",\n     \"src/base/logging.cc\",\n     \"src/base/logging.h\",\n+    \"src/base/lsan-page-allocator.cc\",\n+    \"src/base/lsan-page-allocator.h\",\n     \"src/base/macros.h\",\n     \"src/base/once.cc\",\n     \"src/base/once.h\",\n@@ -3010,6 +3101,8 @@ v8_component(\"v8_libbase\") {\n     \"src/base/platform/semaphore.h\",\n     \"src/base/platform/time.cc\",\n     \"src/base/platform/time.h\",\n+    \"src/base/region-allocator.cc\",\n+    \"src/base/region-allocator.h\",\n     \"src/base/ring-buffer.h\",\n     \"src/base/safe_conversions.h\",\n     \"src/base/safe_conversions_impl.h\",\n@@ -3237,6 +3330,29 @@ if (v8_monolithic) {\n # Executables\n #\n \n+if (current_toolchain == v8_generator_toolchain) {\n+  v8_executable(\"bytecode_builtins_list_generator\") {\n+    visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n+\n+    include_dirs = [ \".\" ]\n+\n+    sources = [\n+      \"src/builtins/generate-bytecodes-builtins-list.cc\",\n+      \"src/interpreter/bytecode-operands.cc\",\n+      \"src/interpreter/bytecode-operands.h\",\n+      \"src/interpreter/bytecodes.cc\",\n+      \"src/interpreter/bytecodes.h\",\n+    ]\n+\n+    configs = [ \":internal_config\" ]\n+\n+    deps = [\n+      \":v8_libbase\",\n+      \"//build/win:default_exe_manifest\",\n+    ]\n+  }\n+}\n+\n if (v8_use_snapshot && current_toolchain == v8_snapshot_toolchain) {\n   v8_executable(\"mksnapshot\") {\n     visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n@@ -3272,6 +3388,9 @@ if (current_toolchain == v8_snapshot_toolchain) {\n     ]\n \n     configs = [ \":internal_config\" ]\n+    if (is_win && is_asan) {\n+      remove_configs = [ \"//build/config/sanitizers:default_sanitizer_flags\" ]\n+    }\n   }\n }\n \n@@ -3325,11 +3444,32 @@ group(\"v8_clusterfuzz\") {\n }\n \n group(\"v8_archive\") {\n+  testonly = true\n+\n   deps = [\n     \":d8\",\n+    \"test/cctest:cctest\",\n   ]\n }\n \n+# TODO(dglazkov): Remove the \"!build_with_chromium\" condition once this clause\n+# is removed from Chromium.\n+if (is_fuchsia && !build_with_chromium) {\n+  import(\"//build/config/fuchsia/rules.gni\")\n+\n+  fuchsia_package(\"d8_fuchsia_pkg\") {\n+    testonly = true\n+    binary = \":d8\"\n+    package_name_override = \"d8\"\n+  }\n+\n+  fuchsia_package_runner(\"d8_fuchsia\") {\n+    testonly = true\n+    package = \":d8_fuchsia_pkg\"\n+    package_name_override = \"d8\"\n+  }\n+}\n+\n group(\"v8_fuzzers\") {\n   testonly = true\n   data_deps = [\n@@ -3636,6 +3776,7 @@ v8_source_set(\"wasm_module_runner\") {\n   ]\n \n   deps = [\n+    \":generate_bytecode_builtins_list\",\n     \":torque_generated_core\",\n   ]\n \n@@ -3719,6 +3860,7 @@ v8_source_set(\"lib_wasm_fuzzer_common\") {\n   ]\n \n   deps = [\n+    \":generate_bytecode_builtins_list\",\n     \":torque_generated_core\",\n   ]\n "
        },
        {
            "sha": "a3377ab473cdf47430e1837f30e19fdfcbd0f499",
            "filename": "deps/v8/ChangeLog",
            "status": "modified",
            "additions": 1640,
            "deletions": 0,
            "changes": 1640,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FChangeLog",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FChangeLog",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FChangeLog?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -1,3 +1,1643 @@\n+2018-10-09: Version 7.1.302\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-09: Version 7.1.301\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.300\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.299\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.298\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.297\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.296\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.295\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.294\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.293\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.292\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.291\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.290\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.289\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.288\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.287\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.286\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.285\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.284\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-08: Version 7.1.283\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-07: Version 7.1.282\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-07: Version 7.1.281\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-07: Version 7.1.280\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-06: Version 7.1.279\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-06: Version 7.1.278\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-06: Version 7.1.277\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-06: Version 7.1.276\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-06: Version 7.1.275\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.274\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.273\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.272\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.271\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.270\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.269\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.268\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.267\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.266\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.265\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.264\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.263\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.262\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.261\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-05: Version 7.1.260\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.259\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.258\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.257\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.256\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.255\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.254\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.253\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.252\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.251\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.250\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.249\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.248\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.247\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-04: Version 7.1.246\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.245\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.244\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.243\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.242\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.241\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.240\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.239\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.238\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.237\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.236\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-03: Version 7.1.235\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-02: Version 7.1.234\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-02: Version 7.1.233\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-02: Version 7.1.232\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-02: Version 7.1.231\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-02: Version 7.1.230\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-02: Version 7.1.229\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-02: Version 7.1.228\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-02: Version 7.1.227\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-01: Version 7.1.226\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-01: Version 7.1.225\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-01: Version 7.1.224\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-01: Version 7.1.223\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-01: Version 7.1.222\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-01: Version 7.1.221\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-01: Version 7.1.220\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-10-01: Version 7.1.219\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-30: Version 7.1.218\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-29: Version 7.1.217\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-29: Version 7.1.216\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-29: Version 7.1.215\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.214\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.213\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.212\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.211\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.210\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.209\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.208\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.207\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.206\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.205\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.204\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.203\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-28: Version 7.1.202\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.201\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.200\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.199\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.198\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.197\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.196\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.195\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.194\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.193\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.192\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.191\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.190\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.189\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.188\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.187\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-27: Version 7.1.186\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-26: Version 7.1.185\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-26: Version 7.1.184\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-26: Version 7.1.183\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-26: Version 7.1.182\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-26: Version 7.1.181\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-26: Version 7.1.180\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-26: Version 7.1.179\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-25: Version 7.1.178\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-25: Version 7.1.177\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-25: Version 7.1.176\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-25: Version 7.1.175\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-25: Version 7.1.174\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-25: Version 7.1.173\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-25: Version 7.1.172\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-24: Version 7.1.171\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-24: Version 7.1.170\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-24: Version 7.1.169\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-24: Version 7.1.168\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-24: Version 7.1.167\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-24: Version 7.1.166\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-24: Version 7.1.165\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-24: Version 7.1.164\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.163\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.162\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.161\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.160\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.159\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.158\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.157\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.156\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.155\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.154\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.153\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.152\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.151\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.150\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-21: Version 7.1.149\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-20: Version 7.1.148\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.147\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.146\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.145\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.144\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.143\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.142\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.141\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.140\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.139\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.138\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.137\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.136\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.135\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.134\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-19: Version 7.1.133\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.132\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.131\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.130\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.129\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.128\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.127\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.126\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.125\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.124\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.123\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.122\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-18: Version 7.1.121\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-17: Version 7.1.120\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-17: Version 7.1.119\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-17: Version 7.1.118\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-17: Version 7.1.117\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-17: Version 7.1.116\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-17: Version 7.1.115\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-17: Version 7.1.114\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.113\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.112\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.111\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.110\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.109\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.108\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.107\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.106\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.105\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.104\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.103\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.102\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.101\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.100\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-14: Version 7.1.99\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-13: Version 7.1.98\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-13: Version 7.1.97\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-13: Version 7.1.96\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-13: Version 7.1.95\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-13: Version 7.1.94\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-13: Version 7.1.93\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-13: Version 7.1.92\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-12: Version 7.1.91\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-12: Version 7.1.90\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-12: Version 7.1.89\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-12: Version 7.1.88\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-12: Version 7.1.87\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-12: Version 7.1.86\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-11: Version 7.1.85\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-11: Version 7.1.84\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-11: Version 7.1.83\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-11: Version 7.1.82\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-11: Version 7.1.81\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-11: Version 7.1.80\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.79\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.78\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.77\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.76\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.75\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.74\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.73\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.72\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-10: Version 7.1.71\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-09: Version 7.1.70\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-08: Version 7.1.69\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.68\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.67\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.66\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.65\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.64\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.63\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.62\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.61\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.60\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.59\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.58\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.57\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-07: Version 7.1.56\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.55\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.54\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.53\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.52\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.51\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.50\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.49\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.48\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.47\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.46\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.45\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.44\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.43\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.42\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-06: Version 7.1.41\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.40\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.39\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.38\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.37\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.36\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.35\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.34\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.33\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.32\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.31\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.30\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.29\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.28\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-05: Version 7.1.27\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.26\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.25\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.24\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.23\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.22\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.21\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.20\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.19\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.18\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.17\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-04: Version 7.1.16\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-03: Version 7.1.15\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-03: Version 7.1.14\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-03: Version 7.1.13\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-03: Version 7.1.12\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-03: Version 7.1.11\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-03: Version 7.1.10\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-02: Version 7.1.9\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-02: Version 7.1.8\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-02: Version 7.1.7\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-09-01: Version 7.1.6\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-31: Version 7.1.5\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-31: Version 7.1.4\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-31: Version 7.1.3\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-31: Version 7.1.2\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-31: Version 7.1.1\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.302\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.301\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.300\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.299\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.298\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.297\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.296\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.295\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.294\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.293\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.292\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.291\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.290\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.289\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-29: Version 7.0.288\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.287\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.286\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.285\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.284\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.283\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.282\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.281\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.280\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.279\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.278\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-08-28: Version 7.0.277\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n 2018-08-27: Version 7.0.276\n \n         Performance and stability improvements on all platforms."
        },
        {
            "sha": "fdd96f9b820f3d157de663c96616867c950872c3",
            "filename": "deps/v8/DEPS",
            "status": "modified",
            "additions": 39,
            "deletions": 23,
            "changes": 62,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FDEPS",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FDEPS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FDEPS?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -13,15 +13,13 @@ vars = {\n \n deps = {\n   'v8/build':\n-    Var('chromium_url') + '/chromium/src/build.git' + '@' + 'dd6b994b32b498e9e766ce60c44da0aec3a2a188',\n-  'v8/tools/gyp':\n-    Var('chromium_url') + '/external/gyp.git' + '@' + 'd61a9397e668fa9843c4aa7da9e79460fe590bfb',\n+    Var('chromium_url') + '/chromium/src/build.git' + '@' + 'a7674eacc34947257c78fe6ba5cf0da17f60696c',\n   'v8/third_party/depot_tools':\n-    Var('chromium_url') + '/chromium/tools/depot_tools.git' + '@' + 'aaf2cc09c6874e394c6c1e4692360cc400d6b388',\n+    Var('chromium_url') + '/chromium/tools/depot_tools.git' + '@' + '71e3be7a50c21faeee91ed99a8d5addfb7594e7c',\n   'v8/third_party/icu':\n-    Var('chromium_url') + '/chromium/deps/icu.git' + '@' + 'a191af9d025859e8368b8b469120d78006e9f5f6',\n+    Var('chromium_url') + '/chromium/deps/icu.git' + '@' + 'c52a2a250d6c5f5cbdd015dff36af7c5d0ae1150',\n   'v8/third_party/instrumented_libraries':\n-    Var('chromium_url') + '/chromium/src/third_party/instrumented_libraries.git' + '@' + 'd8cf40c4592dcec7fb01fcbdf1f6d4958b3fbf11',\n+    Var('chromium_url') + '/chromium/src/third_party/instrumented_libraries.git' + '@' + 'a90cbf3b4216430a437991fb53ede8e048dea454',\n   'v8/buildtools':\n     Var('chromium_url') + '/chromium/buildtools.git' + '@' + '2dff9c9c74e9d732e6fe57c84ef7fd044cc45d96',\n   'v8/base/trace_event/common':\n@@ -35,51 +33,59 @@ deps = {\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/catapult': {\n-    'url': Var('chromium_url') + '/catapult.git' + '@' + 'bc2c0a9307285fa36e03e7cdb6bf8623390ff855',\n+    'url': Var('chromium_url') + '/catapult.git' + '@' + '9ec8468cfde0868ce5f3893e819087278c5af988',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/colorama/src': {\n     'url': Var('chromium_url') + '/external/colorama.git' + '@' + '799604a1041e9b3bc5d2789ecbd7e8db2e18e6b8',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/fuchsia-sdk': {\n-    'url': Var('chromium_url') + '/chromium/src/third_party/fuchsia-sdk.git' + '@' + '3ec92c896bcbddc46e2a073ebfdd25aa1194656e',\n+    'url': Var('chromium_url') + '/chromium/src/third_party/fuchsia-sdk.git' + '@' + '6e1868c9083769d489d3fc25657339d50c22b1d8',\n     'condition': 'checkout_fuchsia',\n   },\n   'v8/third_party/googletest/src':\n-    Var('chromium_url') + '/external/github.com/google/googletest.git' + '@' + 'd5266326752f0a1dadbd310932d8f4fd8c3c5e7d',\n+    Var('chromium_url') + '/external/github.com/google/googletest.git' + '@' + '2e68926a9d4929e9289373cd49e40ddcb9a628f7',\n   'v8/third_party/jinja2':\n     Var('chromium_url') + '/chromium/src/third_party/jinja2.git' + '@' + 'b41863e42637544c2941b574c7877d3e1f663e25',\n   'v8/third_party/markupsafe':\n     Var('chromium_url') + '/chromium/src/third_party/markupsafe.git' + '@' + '8f45f5cfa0009d2a70589bcda0349b8cb2b72783',\n-  'v8/third_party/proguard':\n-    Var('chromium_url') + '/chromium/src/third_party/proguard.git' + '@' + 'a3729bea473bb5ffc5eaf289f5733bc5e2861c07',\n   'v8/tools/swarming_client':\n     Var('chromium_url') + '/infra/luci/client-py.git' + '@' + '486c9b53c4d54dd4b95bb6ce0e31160e600dfc11',\n   'v8/test/benchmarks/data':\n     Var('chromium_url') + '/v8/deps/third_party/benchmarks.git' + '@' + '05d7188267b4560491ff9155c5ee13e207ecd65f',\n   'v8/test/mozilla/data':\n     Var('chromium_url') + '/v8/deps/third_party/mozilla-tests.git' + '@' + 'f6c578a10ea707b1a8ab0b88943fe5115ce2b9be',\n   'v8/test/test262/data':\n-    Var('chromium_url') + '/external/github.com/tc39/test262.git' + '@' + 'a6c1d05ac4fed084fa047e4c52ab2a8c9c2a8aef',\n+    Var('chromium_url') + '/external/github.com/tc39/test262.git' + '@' + '00cfe1628cc03164dcf03f01ba9c84376e9be735',\n   'v8/test/test262/harness':\n     Var('chromium_url') + '/external/github.com/test262-utils/test262-harness-py.git' + '@' + '0f2acdd882c84cff43b9d60df7574a1901e2cdcd',\n-  'v8/third_party/qemu': {\n+  'v8/third_party/qemu-linux-x64': {\n       'packages': [\n           {\n               'package': 'fuchsia/qemu/linux-amd64',\n               'version': '9cc486c5b18a0be515c39a280ca9a309c54cf994'\n           },\n       ],\n-      'condition': 'checkout_fuchsia',\n+      'condition': 'host_os == \"linux\" and checkout_fuchsia',\n+      'dep_type': 'cipd',\n+  },\n+  'v8/third_party/qemu-mac-x64': {\n+      'packages': [\n+          {\n+              'package': 'fuchsia/qemu/mac-amd64',\n+              'version': '2d3358ae9a569b2d4a474f498b32b202a152134f'\n+          },\n+      ],\n+      'condition': 'host_os == \"mac\" and checkout_fuchsia',\n       'dep_type': 'cipd',\n   },\n   'v8/tools/clang':\n-    Var('chromium_url') + '/chromium/src/tools/clang.git' + '@' + 'bb4146fb8a9dde405b71914657bb461dc93912ab',\n+    Var('chromium_url') + '/chromium/src/tools/clang.git' + '@' + '7792d28b069af6dd3a86d1ba83b7f5c4ede605dc',\n   'v8/tools/luci-go':\n     Var('chromium_url') + '/chromium/src/tools/luci-go.git' + '@' + '445d7c4b6a4f10e188edb395b132e3996b127691',\n   'v8/test/wasm-js':\n-    Var('chromium_url') + '/external/github.com/WebAssembly/spec.git' + '@' + '240ea673de6e75d78ae472f66127301ecab22a99',\n+    Var('chromium_url') + '/external/github.com/WebAssembly/spec.git' + '@' + 'db9cd40808a90ecc5f4a23e88fb375c8f60b8d52',\n }\n \n recursedeps = [\n@@ -344,13 +350,6 @@ hooks = [\n     'condition': 'checkout_win',\n     'action': ['python', 'v8/build/vs_toolchain.py', 'update'],\n   },\n-  {\n-    # Update the Mac toolchain if necessary.\n-    'name': 'mac_toolchain',\n-    'pattern': '.',\n-    'condition': 'checkout_mac',\n-    'action': ['python', 'v8/build/mac_toolchain.py'],\n-  },\n   # Pull binutils for linux, enabled debug fission for faster linking /\n   # debugging when used with clang on Ubuntu Precise.\n   # https://code.google.com/p/chromium/issues/detail?id=352046\n@@ -387,6 +386,23 @@ hooks = [\n       'v8/build/fuchsia/update_sdk.py',\n     ],\n   },\n+  {\n+    # Mac doesn't use lld so it's not included in the default clang bundle\n+    # there. However, lld is need in Fuchsia cross builds, so\n+    # download it there.\n+    # Should run after the clang hook.\n+    'name': 'lld/mac',\n+    'pattern': '.',\n+    'condition': 'host_os == \"mac\" and checkout_fuchsia',\n+    'action': ['python', 'v8/tools/clang/scripts/download_lld_mac.py'],\n+  },\n+  {\n+      # Mac does not have llvm-objdump, download it for cross builds in Fuchsia.\n+    'name': 'llvm-objdump',\n+    'pattern': '.',\n+    'condition': 'host_os == \"mac\" and checkout_fuchsia',\n+    'action': ['python', 'v8/tools/clang/scripts/download_objdump.py'],\n+  },\n   {\n     'name': 'mips_toolchain',\n     'pattern': '.',"
        },
        {
            "sha": "88a64e727b2b8c38f0c35718d833df58e0b4e0c2",
            "filename": "deps/v8/PRESUBMIT.py",
            "status": "modified",
            "additions": 13,
            "deletions": 3,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FPRESUBMIT.py",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2FPRESUBMIT.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FPRESUBMIT.py?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -73,20 +73,30 @@ def _V8PresubmitChecks(input_api, output_api):\n   import sys\n   sys.path.append(input_api.os_path.join(\n         input_api.PresubmitLocalPath(), 'tools'))\n-  from presubmit import CppLintProcessor\n-  from presubmit import SourceProcessor\n-  from presubmit import StatusFilesProcessor\n+  from v8_presubmit import CppLintProcessor\n+  from v8_presubmit import TorqueFormatProcessor\n+  from v8_presubmit import SourceProcessor\n+  from v8_presubmit import StatusFilesProcessor\n \n   def FilterFile(affected_file):\n     return input_api.FilterSourceFile(\n       affected_file,\n       white_list=None,\n       black_list=_NO_LINT_PATHS)\n \n+  def FilterTorqueFile(affected_file):\n+    return input_api.FilterSourceFile(\n+      affected_file,\n+      white_list=(r'.+\\.tq'))\n+\n   results = []\n   if not CppLintProcessor().RunOnFiles(\n       input_api.AffectedFiles(file_filter=FilterFile, include_deletes=False)):\n     results.append(output_api.PresubmitError(\"C++ lint check failed\"))\n+  if not TorqueFormatProcessor().RunOnFiles(\n+      input_api.AffectedFiles(file_filter=FilterTorqueFile,\n+                              include_deletes=False)):\n+    results.append(output_api.PresubmitError(\"Torque format check failed\"))\n   if not SourceProcessor().RunOnFiles(\n       input_api.AffectedFiles(include_deletes=False)):\n     results.append(output_api.PresubmitError("
        },
        {
            "sha": "6cb248f160dbd61b2ce1709ddff4d5cad4660dda",
            "filename": "deps/v8/gni/v8.gni",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fgni%2Fv8.gni",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fgni%2Fv8.gni",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fgni%2Fv8.gni?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -143,7 +143,15 @@ template(\"v8_source_set\") {\n     }\n   }\n   target(link_target_type, target_name) {\n-    forward_variables_from(invoker, \"*\", [ \"configs\" ])\n+    forward_variables_from(invoker,\n+                           \"*\",\n+                           [\n+                             \"configs\",\n+                             \"remove_configs\",\n+                           ])\n+    if (defined(invoker.remove_configs)) {\n+      configs -= invoker.remove_configs\n+    }\n     configs += invoker.configs\n     configs -= v8_remove_configs\n     configs += v8_add_configs"
        },
        {
            "sha": "250d5fbdb9f07fbb74e8b4a13aa6916022d27168",
            "filename": "deps/v8/include/libplatform/v8-tracing.h",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Flibplatform%2Fv8-tracing.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Flibplatform%2Fv8-tracing.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Flibplatform%2Fv8-tracing.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -35,7 +35,7 @@ class V8_PLATFORM_EXPORT TraceObject {\n     const char* as_string;\n   };\n \n-  TraceObject() {}\n+  TraceObject() = default;\n   ~TraceObject();\n   void Initialize(\n       char phase, const uint8_t* category_enabled_flag, const char* name,\n@@ -106,8 +106,8 @@ class V8_PLATFORM_EXPORT TraceObject {\n \n class V8_PLATFORM_EXPORT TraceWriter {\n  public:\n-  TraceWriter() {}\n-  virtual ~TraceWriter() {}\n+  TraceWriter() = default;\n+  virtual ~TraceWriter() = default;\n   virtual void AppendTraceEvent(TraceObject* trace_event) = 0;\n   virtual void Flush() = 0;\n \n@@ -147,8 +147,8 @@ class V8_PLATFORM_EXPORT TraceBufferChunk {\n \n class V8_PLATFORM_EXPORT TraceBuffer {\n  public:\n-  TraceBuffer() {}\n-  virtual ~TraceBuffer() {}\n+  TraceBuffer() = default;\n+  virtual ~TraceBuffer() = default;\n \n   virtual TraceObject* AddTraceEvent(uint64_t* handle) = 0;\n   virtual TraceObject* GetEventByHandle(uint64_t handle) = 0;"
        },
        {
            "sha": "f0a8b5f1635adf33cddfdc82d91a862a4ee3fb8f",
            "filename": "deps/v8/include/v8-inspector.h",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-inspector.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-inspector.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-inspector.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -62,7 +62,7 @@ class V8_EXPORT StringView {\n \n class V8_EXPORT StringBuffer {\n  public:\n-  virtual ~StringBuffer() {}\n+  virtual ~StringBuffer() = default;\n   virtual const StringView& string() = 0;\n   // This method copies contents.\n   static std::unique_ptr<StringBuffer> create(const StringView&);\n@@ -107,7 +107,7 @@ class V8_EXPORT V8StackTrace {\n   virtual StringView topScriptId() const = 0;\n   virtual StringView topFunctionName() const = 0;\n \n-  virtual ~V8StackTrace() {}\n+  virtual ~V8StackTrace() = default;\n   virtual std::unique_ptr<protocol::Runtime::API::StackTrace>\n   buildInspectorObject() const = 0;\n   virtual std::unique_ptr<StringBuffer> toString() const = 0;\n@@ -118,13 +118,13 @@ class V8_EXPORT V8StackTrace {\n \n class V8_EXPORT V8InspectorSession {\n  public:\n-  virtual ~V8InspectorSession() {}\n+  virtual ~V8InspectorSession() = default;\n \n   // Cross-context inspectable values (DOM nodes in different worlds, etc.).\n   class V8_EXPORT Inspectable {\n    public:\n     virtual v8::Local<v8::Value> get(v8::Local<v8::Context>) = 0;\n-    virtual ~Inspectable() {}\n+    virtual ~Inspectable() = default;\n   };\n   virtual void addInspectedObject(std::unique_ptr<Inspectable>) = 0;\n \n@@ -162,7 +162,7 @@ class V8_EXPORT V8InspectorSession {\n \n class V8_EXPORT V8InspectorClient {\n  public:\n-  virtual ~V8InspectorClient() {}\n+  virtual ~V8InspectorClient() = default;\n \n   virtual void runMessageLoopOnPause(int contextGroupId) {}\n   virtual void quitMessageLoopOnPause() {}\n@@ -239,7 +239,7 @@ struct V8_EXPORT V8StackTraceId {\n class V8_EXPORT V8Inspector {\n  public:\n   static std::unique_ptr<V8Inspector> create(v8::Isolate*, V8InspectorClient*);\n-  virtual ~V8Inspector() {}\n+  virtual ~V8Inspector() = default;\n \n   // Contexts instrumentation.\n   virtual void contextCreated(const V8ContextInfo&) = 0;\n@@ -277,7 +277,7 @@ class V8_EXPORT V8Inspector {\n   // Connection.\n   class V8_EXPORT Channel {\n    public:\n-    virtual ~Channel() {}\n+    virtual ~Channel() = default;\n     virtual void sendResponse(int callId,\n                               std::unique_ptr<StringBuffer> message) = 0;\n     virtual void sendNotification(std::unique_ptr<StringBuffer> message) = 0;"
        },
        {
            "sha": "80f7367bfee3e62d321df9e201fede4a0382701f",
            "filename": "deps/v8/include/v8-internal.h",
            "status": "added",
            "additions": 316,
            "deletions": 0,
            "changes": 316,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-internal.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-internal.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-internal.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,316 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef INCLUDE_V8_INTERNAL_H_\n+#define INCLUDE_V8_INTERNAL_H_\n+\n+#include <stddef.h>\n+#include <stdint.h>\n+#include <type_traits>\n+\n+#include \"v8-version.h\"  // NOLINT(build/include)\n+#include \"v8config.h\"    // NOLINT(build/include)\n+\n+namespace v8 {\n+\n+class Context;\n+class Data;\n+class Isolate;\n+\n+namespace internal {\n+\n+class Object;\n+\n+/**\n+ * Configuration of tagging scheme.\n+ */\n+const int kApiPointerSize = sizeof(void*);  // NOLINT\n+const int kApiDoubleSize = sizeof(double);  // NOLINT\n+const int kApiIntSize = sizeof(int);        // NOLINT\n+const int kApiInt64Size = sizeof(int64_t);  // NOLINT\n+\n+// Tag information for HeapObject.\n+const int kHeapObjectTag = 1;\n+const int kWeakHeapObjectTag = 3;\n+const int kHeapObjectTagSize = 2;\n+const intptr_t kHeapObjectTagMask = (1 << kHeapObjectTagSize) - 1;\n+\n+// Tag information for Smi.\n+const int kSmiTag = 0;\n+const int kSmiTagSize = 1;\n+const intptr_t kSmiTagMask = (1 << kSmiTagSize) - 1;\n+\n+template <size_t tagged_ptr_size>\n+struct SmiTagging;\n+\n+template <int kSmiShiftSize>\n+V8_INLINE internal::Object* IntToSmi(int value) {\n+  int smi_shift_bits = kSmiTagSize + kSmiShiftSize;\n+  intptr_t tagged_value =\n+      (static_cast<intptr_t>(value) << smi_shift_bits) | kSmiTag;\n+  return reinterpret_cast<internal::Object*>(tagged_value);\n+}\n+\n+// Smi constants for systems where tagged pointer is a 32-bit value.\n+template <>\n+struct SmiTagging<4> {\n+  enum { kSmiShiftSize = 0, kSmiValueSize = 31 };\n+  static int SmiShiftSize() { return kSmiShiftSize; }\n+  static int SmiValueSize() { return kSmiValueSize; }\n+  V8_INLINE static int SmiToInt(const internal::Object* value) {\n+    int shift_bits = kSmiTagSize + kSmiShiftSize;\n+    // Throw away top 32 bits and shift down (requires >> to be sign extending).\n+    return static_cast<int>(reinterpret_cast<intptr_t>(value)) >> shift_bits;\n+  }\n+  V8_INLINE static internal::Object* IntToSmi(int value) {\n+    return internal::IntToSmi<kSmiShiftSize>(value);\n+  }\n+  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n+    // To be representable as an tagged small integer, the two\n+    // most-significant bits of 'value' must be either 00 or 11 due to\n+    // sign-extension. To check this we add 01 to the two\n+    // most-significant bits, and check if the most-significant bit is 0\n+    //\n+    // CAUTION: The original code below:\n+    // bool result = ((value + 0x40000000) & 0x80000000) == 0;\n+    // may lead to incorrect results according to the C language spec, and\n+    // in fact doesn't work correctly with gcc4.1.1 in some cases: The\n+    // compiler may produce undefined results in case of signed integer\n+    // overflow. The computation must be done w/ unsigned ints.\n+    return static_cast<uintptr_t>(value) + 0x40000000U < 0x80000000U;\n+  }\n+};\n+\n+// Smi constants for systems where tagged pointer is a 64-bit value.\n+template <>\n+struct SmiTagging<8> {\n+  enum { kSmiShiftSize = 31, kSmiValueSize = 32 };\n+  static int SmiShiftSize() { return kSmiShiftSize; }\n+  static int SmiValueSize() { return kSmiValueSize; }\n+  V8_INLINE static int SmiToInt(const internal::Object* value) {\n+    int shift_bits = kSmiTagSize + kSmiShiftSize;\n+    // Shift down and throw away top 32 bits.\n+    return static_cast<int>(reinterpret_cast<intptr_t>(value) >> shift_bits);\n+  }\n+  V8_INLINE static internal::Object* IntToSmi(int value) {\n+    return internal::IntToSmi<kSmiShiftSize>(value);\n+  }\n+  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n+    // To be representable as a long smi, the value must be a 32-bit integer.\n+    return (value == static_cast<int32_t>(value));\n+  }\n+};\n+\n+#if V8_COMPRESS_POINTERS\n+static_assert(\n+    kApiPointerSize == kApiInt64Size,\n+    \"Pointer compression can be enabled only for 64-bit architectures\");\n+typedef SmiTagging<4> PlatformSmiTagging;\n+#else\n+typedef SmiTagging<kApiPointerSize> PlatformSmiTagging;\n+#endif\n+\n+const int kSmiShiftSize = PlatformSmiTagging::kSmiShiftSize;\n+const int kSmiValueSize = PlatformSmiTagging::kSmiValueSize;\n+const int kSmiMinValue = (static_cast<unsigned int>(-1)) << (kSmiValueSize - 1);\n+const int kSmiMaxValue = -(kSmiMinValue + 1);\n+constexpr bool SmiValuesAre31Bits() { return kSmiValueSize == 31; }\n+constexpr bool SmiValuesAre32Bits() { return kSmiValueSize == 32; }\n+\n+/**\n+ * This class exports constants and functionality from within v8 that\n+ * is necessary to implement inline functions in the v8 api.  Don't\n+ * depend on functions and constants defined here.\n+ */\n+class Internals {\n+ public:\n+  // These values match non-compiler-dependent values defined within\n+  // the implementation of v8.\n+  static const int kHeapObjectMapOffset = 0;\n+  static const int kMapInstanceTypeOffset = 1 * kApiPointerSize + kApiIntSize;\n+  static const int kStringResourceOffset =\n+      1 * kApiPointerSize + 2 * kApiIntSize;\n+\n+  static const int kOddballKindOffset = 4 * kApiPointerSize + kApiDoubleSize;\n+  static const int kForeignAddressOffset = kApiPointerSize;\n+  static const int kJSObjectHeaderSize = 3 * kApiPointerSize;\n+  static const int kFixedArrayHeaderSize = 2 * kApiPointerSize;\n+  static const int kContextHeaderSize = 2 * kApiPointerSize;\n+  static const int kContextEmbedderDataIndex = 5;\n+  static const int kFullStringRepresentationMask = 0x0f;\n+  static const int kStringEncodingMask = 0x8;\n+  static const int kExternalTwoByteRepresentationTag = 0x02;\n+  static const int kExternalOneByteRepresentationTag = 0x0a;\n+\n+  static const int kIsolateEmbedderDataOffset = 0 * kApiPointerSize;\n+  static const int kExternalMemoryOffset = 4 * kApiPointerSize;\n+  static const int kExternalMemoryLimitOffset =\n+      kExternalMemoryOffset + kApiInt64Size;\n+  static const int kExternalMemoryAtLastMarkCompactOffset =\n+      kExternalMemoryLimitOffset + kApiInt64Size;\n+  static const int kIsolateRootsOffset = kExternalMemoryLimitOffset +\n+                                         kApiInt64Size + kApiInt64Size +\n+                                         kApiPointerSize + kApiPointerSize;\n+  static const int kUndefinedValueRootIndex = 4;\n+  static const int kTheHoleValueRootIndex = 5;\n+  static const int kNullValueRootIndex = 6;\n+  static const int kTrueValueRootIndex = 7;\n+  static const int kFalseValueRootIndex = 8;\n+  static const int kEmptyStringRootIndex = 9;\n+\n+  static const int kNodeClassIdOffset = 1 * kApiPointerSize;\n+  static const int kNodeFlagsOffset = 1 * kApiPointerSize + 3;\n+  static const int kNodeStateMask = 0x7;\n+  static const int kNodeStateIsWeakValue = 2;\n+  static const int kNodeStateIsPendingValue = 3;\n+  static const int kNodeStateIsNearDeathValue = 4;\n+  static const int kNodeIsIndependentShift = 3;\n+  static const int kNodeIsActiveShift = 4;\n+\n+  static const int kFirstNonstringType = 0x80;\n+  static const int kOddballType = 0x83;\n+  static const int kForeignType = 0x87;\n+  static const int kJSSpecialApiObjectType = 0x410;\n+  static const int kJSApiObjectType = 0x420;\n+  static const int kJSObjectType = 0x421;\n+\n+  static const int kUndefinedOddballKind = 5;\n+  static const int kNullOddballKind = 3;\n+\n+  static const uint32_t kNumIsolateDataSlots = 4;\n+\n+  // Soft limit for AdjustAmountofExternalAllocatedMemory. Trigger an\n+  // incremental GC once the external memory reaches this limit.\n+  static constexpr int kExternalAllocationSoftLimit = 64 * 1024 * 1024;\n+\n+  V8_EXPORT static void CheckInitializedImpl(v8::Isolate* isolate);\n+  V8_INLINE static void CheckInitialized(v8::Isolate* isolate) {\n+#ifdef V8_ENABLE_CHECKS\n+    CheckInitializedImpl(isolate);\n+#endif\n+  }\n+\n+  V8_INLINE static bool HasHeapObjectTag(const internal::Object* value) {\n+    return ((reinterpret_cast<intptr_t>(value) & kHeapObjectTagMask) ==\n+            kHeapObjectTag);\n+  }\n+\n+  V8_INLINE static int SmiValue(const internal::Object* value) {\n+    return PlatformSmiTagging::SmiToInt(value);\n+  }\n+\n+  V8_INLINE static internal::Object* IntToSmi(int value) {\n+    return PlatformSmiTagging::IntToSmi(value);\n+  }\n+\n+  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n+    return PlatformSmiTagging::IsValidSmi(value);\n+  }\n+\n+  V8_INLINE static int GetInstanceType(const internal::Object* obj) {\n+    typedef internal::Object O;\n+    O* map = ReadField<O*>(obj, kHeapObjectMapOffset);\n+    return ReadField<uint16_t>(map, kMapInstanceTypeOffset);\n+  }\n+\n+  V8_INLINE static int GetOddballKind(const internal::Object* obj) {\n+    typedef internal::Object O;\n+    return SmiValue(ReadField<O*>(obj, kOddballKindOffset));\n+  }\n+\n+  V8_INLINE static bool IsExternalTwoByteString(int instance_type) {\n+    int representation = (instance_type & kFullStringRepresentationMask);\n+    return representation == kExternalTwoByteRepresentationTag;\n+  }\n+\n+  V8_INLINE static uint8_t GetNodeFlag(internal::Object** obj, int shift) {\n+    uint8_t* addr = reinterpret_cast<uint8_t*>(obj) + kNodeFlagsOffset;\n+    return *addr & static_cast<uint8_t>(1U << shift);\n+  }\n+\n+  V8_INLINE static void UpdateNodeFlag(internal::Object** obj, bool value,\n+                                       int shift) {\n+    uint8_t* addr = reinterpret_cast<uint8_t*>(obj) + kNodeFlagsOffset;\n+    uint8_t mask = static_cast<uint8_t>(1U << shift);\n+    *addr = static_cast<uint8_t>((*addr & ~mask) | (value << shift));\n+  }\n+\n+  V8_INLINE static uint8_t GetNodeState(internal::Object** obj) {\n+    uint8_t* addr = reinterpret_cast<uint8_t*>(obj) + kNodeFlagsOffset;\n+    return *addr & kNodeStateMask;\n+  }\n+\n+  V8_INLINE static void UpdateNodeState(internal::Object** obj, uint8_t value) {\n+    uint8_t* addr = reinterpret_cast<uint8_t*>(obj) + kNodeFlagsOffset;\n+    *addr = static_cast<uint8_t>((*addr & ~kNodeStateMask) | value);\n+  }\n+\n+  V8_INLINE static void SetEmbedderData(v8::Isolate* isolate, uint32_t slot,\n+                                        void* data) {\n+    uint8_t* addr = reinterpret_cast<uint8_t*>(isolate) +\n+                    kIsolateEmbedderDataOffset + slot * kApiPointerSize;\n+    *reinterpret_cast<void**>(addr) = data;\n+  }\n+\n+  V8_INLINE static void* GetEmbedderData(const v8::Isolate* isolate,\n+                                         uint32_t slot) {\n+    const uint8_t* addr = reinterpret_cast<const uint8_t*>(isolate) +\n+                          kIsolateEmbedderDataOffset + slot * kApiPointerSize;\n+    return *reinterpret_cast<void* const*>(addr);\n+  }\n+\n+  V8_INLINE static internal::Object** GetRoot(v8::Isolate* isolate, int index) {\n+    uint8_t* addr = reinterpret_cast<uint8_t*>(isolate) + kIsolateRootsOffset;\n+    return reinterpret_cast<internal::Object**>(addr + index * kApiPointerSize);\n+  }\n+\n+  template <typename T>\n+  V8_INLINE static T ReadField(const internal::Object* ptr, int offset) {\n+    const uint8_t* addr =\n+        reinterpret_cast<const uint8_t*>(ptr) + offset - kHeapObjectTag;\n+    return *reinterpret_cast<const T*>(addr);\n+  }\n+\n+  template <typename T>\n+  V8_INLINE static T ReadEmbedderData(const v8::Context* context, int index) {\n+    typedef internal::Object O;\n+    typedef internal::Internals I;\n+    O* ctx = *reinterpret_cast<O* const*>(context);\n+    int embedder_data_offset =\n+        I::kContextHeaderSize +\n+        (internal::kApiPointerSize * I::kContextEmbedderDataIndex);\n+    O* embedder_data = I::ReadField<O*>(ctx, embedder_data_offset);\n+    int value_offset =\n+        I::kFixedArrayHeaderSize + (internal::kApiPointerSize * index);\n+    return I::ReadField<T>(embedder_data, value_offset);\n+  }\n+};\n+\n+// Only perform cast check for types derived from v8::Data since\n+// other types do not implement the Cast method.\n+template <bool PerformCheck>\n+struct CastCheck {\n+  template <class T>\n+  static void Perform(T* data);\n+};\n+\n+template <>\n+template <class T>\n+void CastCheck<true>::Perform(T* data) {\n+  T::Cast(data);\n+}\n+\n+template <>\n+template <class T>\n+void CastCheck<false>::Perform(T* data) {}\n+\n+template <class T>\n+V8_INLINE void PerformCastCheck(T* data) {\n+  CastCheck<std::is_base_of<Data, T>::value>::Perform(data);\n+}\n+\n+}  // namespace internal\n+}  // namespace v8\n+\n+#endif  // INCLUDE_V8_INTERNAL_H_"
        },
        {
            "sha": "d983c30249591bd05b760dbae6a1afb413c7d021",
            "filename": "deps/v8/include/v8-platform.h",
            "status": "modified",
            "additions": 11,
            "deletions": 4,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-platform.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-platform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-platform.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -322,16 +322,20 @@ class Platform {\n    * |isolate|. Tasks posted for the same isolate should be execute in order of\n    * scheduling. The definition of \"foreground\" is opaque to V8.\n    */\n-  virtual void CallOnForegroundThread(Isolate* isolate, Task* task) = 0;\n+  V8_DEPRECATE_SOON(\n+      \"Use a taskrunner acquired by GetForegroundTaskRunner instead.\",\n+      virtual void CallOnForegroundThread(Isolate* isolate, Task* task)) = 0;\n \n   /**\n    * Schedules a task to be invoked on a foreground thread wrt a specific\n    * |isolate| after the given number of seconds |delay_in_seconds|.\n    * Tasks posted for the same isolate should be execute in order of\n    * scheduling. The definition of \"foreground\" is opaque to V8.\n    */\n-  virtual void CallDelayedOnForegroundThread(Isolate* isolate, Task* task,\n-                                             double delay_in_seconds) = 0;\n+  V8_DEPRECATE_SOON(\n+      \"Use a taskrunner acquired by GetForegroundTaskRunner instead.\",\n+      virtual void CallDelayedOnForegroundThread(Isolate* isolate, Task* task,\n+                                                 double delay_in_seconds)) = 0;\n \n   /**\n    * Schedules a task to be invoked on a foreground thread wrt a specific\n@@ -341,7 +345,10 @@ class Platform {\n    * starved for an arbitrarily long time if no idle time is available.\n    * The definition of \"foreground\" is opaque to V8.\n    */\n-  virtual void CallIdleOnForegroundThread(Isolate* isolate, IdleTask* task) {\n+  V8_DEPRECATE_SOON(\n+      \"Use a taskrunner acquired by GetForegroundTaskRunner instead.\",\n+      virtual void CallIdleOnForegroundThread(Isolate* isolate,\n+                                              IdleTask* task)) {\n     // This must be overriden if |IdleTasksEnabled()|.\n     abort();\n   }"
        },
        {
            "sha": "c034518defdd962347cf88f0e71fe5b470b50303",
            "filename": "deps/v8/include/v8-profiler.h",
            "status": "modified",
            "additions": 9,
            "deletions": 15,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-profiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-profiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-profiler.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -341,12 +341,6 @@ class V8_EXPORT CpuProfiler {\n   V8_DEPRECATED(\"Use Isolate::SetIdle(bool) instead.\",\n                 void SetIdle(bool is_idle));\n \n-  /**\n-   * Generate more detailed source positions to code objects. This results in\n-   * better results when mapping profiling samples to script source.\n-   */\n-  static void UseDetailedSourcePositionsForProfiling(Isolate* isolate);\n-\n  private:\n   CpuProfiler();\n   ~CpuProfiler();\n@@ -451,7 +445,7 @@ class V8_EXPORT OutputStream {  // NOLINT\n     kContinue = 0,\n     kAbort = 1\n   };\n-  virtual ~OutputStream() {}\n+  virtual ~OutputStream() = default;\n   /** Notify about the end of stream. */\n   virtual void EndOfStream() = 0;\n   /** Get preferred output chunk size. Called only once. */\n@@ -545,7 +539,7 @@ class V8_EXPORT ActivityControl {  // NOLINT\n     kContinue = 0,\n     kAbort = 1\n   };\n-  virtual ~ActivityControl() {}\n+  virtual ~ActivityControl() = default;\n   /**\n    * Notify about current progress. The activity can be stopped by\n    * returning kAbort as the callback result.\n@@ -631,7 +625,7 @@ class V8_EXPORT AllocationProfile {\n    */\n   virtual Node* GetRootNode() = 0;\n \n-  virtual ~AllocationProfile() {}\n+  virtual ~AllocationProfile() = default;\n \n   static const int kNoLineNumberInfo = Message::kNoLineNumberInfo;\n   static const int kNoColumnNumberInfo = Message::kNoColumnInfo;\n@@ -799,15 +793,15 @@ class V8_EXPORT HeapProfiler {\n     virtual const char* GetName(Local<Object> object) = 0;\n \n    protected:\n-    virtual ~ObjectNameResolver() {}\n+    virtual ~ObjectNameResolver() = default;\n   };\n \n   /**\n    * Takes a heap snapshot and returns it.\n    */\n   const HeapSnapshot* TakeHeapSnapshot(\n-      ActivityControl* control = NULL,\n-      ObjectNameResolver* global_object_name_resolver = NULL);\n+      ActivityControl* control = nullptr,\n+      ObjectNameResolver* global_object_name_resolver = nullptr);\n \n   /**\n    * Starts tracking of heap objects population statistics. After calling\n@@ -834,7 +828,7 @@ class V8_EXPORT HeapProfiler {\n    * method.\n    */\n   SnapshotObjectId GetHeapStats(OutputStream* stream,\n-                                int64_t* timestamp_us = NULL);\n+                                int64_t* timestamp_us = nullptr);\n \n   /**\n    * Stops tracking of heap objects population statistics, cleans up all\n@@ -991,8 +985,8 @@ class V8_EXPORT RetainedObjectInfo {  // NOLINT\n   virtual intptr_t GetSizeInBytes() { return -1; }\n \n  protected:\n-  RetainedObjectInfo() {}\n-  virtual ~RetainedObjectInfo() {}\n+  RetainedObjectInfo() = default;\n+  virtual ~RetainedObjectInfo() = default;\n \n  private:\n   RetainedObjectInfo(const RetainedObjectInfo&);"
        },
        {
            "sha": "96c9acbbdc2b29bd88f557ae2ce31792312d229b",
            "filename": "deps/v8/include/v8-util.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-util.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-util.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-util.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -94,11 +94,11 @@ class DefaultPersistentValueMapTraits : public StdMapTraits<K, V> {\n \n   static WeakCallbackDataType* WeakCallbackParameter(\n       MapType* map, const K& key, Local<V> value) {\n-    return NULL;\n+    return nullptr;\n   }\n   static MapType* MapFromWeakCallbackInfo(\n       const WeakCallbackInfo<WeakCallbackDataType>& data) {\n-    return NULL;\n+    return nullptr;\n   }\n   static K KeyFromWeakCallbackInfo(\n       const WeakCallbackInfo<WeakCallbackDataType>& data) {\n@@ -302,7 +302,7 @@ class PersistentValueMapBase {\n \n   static PersistentContainerValue ClearAndLeak(Global<V>* persistent) {\n     V* v = persistent->val_;\n-    persistent->val_ = 0;\n+    persistent->val_ = nullptr;\n     return reinterpret_cast<PersistentContainerValue>(v);\n   }\n \n@@ -633,7 +633,7 @@ class PersistentValueVector {\n  private:\n   static PersistentContainerValue ClearAndLeak(Global<V>* persistent) {\n     V* v = persistent->val_;\n-    persistent->val_ = 0;\n+    persistent->val_ = nullptr;\n     return reinterpret_cast<PersistentContainerValue>(v);\n   }\n "
        },
        {
            "sha": "8624767047c2f141be961d304f4f4e8792273544",
            "filename": "deps/v8/include/v8-version.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-version.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8-version.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-version.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -9,9 +9,9 @@\n // NOTE these macros are used by some of the tool scripts and the build\n // system so their names cannot be changed without changing the scripts.\n #define V8_MAJOR_VERSION 7\n-#define V8_MINOR_VERSION 0\n-#define V8_BUILD_NUMBER 276\n-#define V8_PATCH_LEVEL 38\n+#define V8_MINOR_VERSION 1\n+#define V8_BUILD_NUMBER 302\n+#define V8_PATCH_LEVEL 28\n \n // Use 1 for candidates and 0 otherwise.\n // (Boolean macro values are not supported by all preprocessors.)"
        },
        {
            "sha": "a4bbe1b0c43d665a6b6c4e6c46205c32eac9548b",
            "filename": "deps/v8/include/v8.h",
            "status": "modified",
            "additions": 245,
            "deletions": 519,
            "changes": 764,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -22,42 +22,13 @@\n #include <utility>\n #include <vector>\n \n-#include \"v8-version.h\"  // NOLINT(build/include)\n-#include \"v8config.h\"    // NOLINT(build/include)\n+#include \"v8-internal.h\"  // NOLINT(build/include)\n+#include \"v8-version.h\"   // NOLINT(build/include)\n+#include \"v8config.h\"     // NOLINT(build/include)\n \n // We reserve the V8_* prefix for macros defined in V8 public API and\n // assume there are no name conflicts with the embedder's code.\n \n-#ifdef V8_OS_WIN\n-\n-// Setup for Windows DLL export/import. When building the V8 DLL the\n-// BUILDING_V8_SHARED needs to be defined. When building a program which uses\n-// the V8 DLL USING_V8_SHARED needs to be defined. When either building the V8\n-// static library or building a program which uses the V8 static library neither\n-// BUILDING_V8_SHARED nor USING_V8_SHARED should be defined.\n-#ifdef BUILDING_V8_SHARED\n-# define V8_EXPORT __declspec(dllexport)\n-#elif USING_V8_SHARED\n-# define V8_EXPORT __declspec(dllimport)\n-#else\n-# define V8_EXPORT\n-#endif  // BUILDING_V8_SHARED\n-\n-#else  // V8_OS_WIN\n-\n-// Setup for Linux shared library export.\n-#if V8_HAS_ATTRIBUTE_VISIBILITY\n-# ifdef BUILDING_V8_SHARED\n-#  define V8_EXPORT __attribute__ ((visibility(\"default\")))\n-# else\n-#  define V8_EXPORT\n-# endif\n-#else\n-# define V8_EXPORT\n-#endif\n-\n-#endif  // V8_OS_WIN\n-\n /**\n  * The v8 JavaScript engine.\n  */\n@@ -153,108 +124,13 @@ template<typename T> class CustomArguments;\n class PropertyCallbackArguments;\n class FunctionCallbackArguments;\n class GlobalHandles;\n+class ScopedExternalStringLock;\n \n namespace wasm {\n class NativeModule;\n class StreamingDecoder;\n }  // namespace wasm\n \n-/**\n- * Configuration of tagging scheme.\n- */\n-const int kApiPointerSize = sizeof(void*);  // NOLINT\n-const int kApiDoubleSize = sizeof(double);  // NOLINT\n-const int kApiIntSize = sizeof(int);        // NOLINT\n-const int kApiInt64Size = sizeof(int64_t);  // NOLINT\n-\n-// Tag information for HeapObject.\n-const int kHeapObjectTag = 1;\n-const int kWeakHeapObjectTag = 3;\n-const int kHeapObjectTagSize = 2;\n-const intptr_t kHeapObjectTagMask = (1 << kHeapObjectTagSize) - 1;\n-\n-// Tag information for Smi.\n-const int kSmiTag = 0;\n-const int kSmiTagSize = 1;\n-const intptr_t kSmiTagMask = (1 << kSmiTagSize) - 1;\n-\n-template <size_t tagged_ptr_size>\n-struct SmiTagging;\n-\n-template <int kSmiShiftSize>\n-V8_INLINE internal::Object* IntToSmi(int value) {\n-  int smi_shift_bits = kSmiTagSize + kSmiShiftSize;\n-  intptr_t tagged_value =\n-      (static_cast<intptr_t>(value) << smi_shift_bits) | kSmiTag;\n-  return reinterpret_cast<internal::Object*>(tagged_value);\n-}\n-\n-// Smi constants for systems where tagged pointer is a 32-bit value.\n-template <>\n-struct SmiTagging<4> {\n-  enum { kSmiShiftSize = 0, kSmiValueSize = 31 };\n-  static int SmiShiftSize() { return kSmiShiftSize; }\n-  static int SmiValueSize() { return kSmiValueSize; }\n-  V8_INLINE static int SmiToInt(const internal::Object* value) {\n-    int shift_bits = kSmiTagSize + kSmiShiftSize;\n-    // Throw away top 32 bits and shift down (requires >> to be sign extending).\n-    return static_cast<int>(reinterpret_cast<intptr_t>(value)) >> shift_bits;\n-  }\n-  V8_INLINE static internal::Object* IntToSmi(int value) {\n-    return internal::IntToSmi<kSmiShiftSize>(value);\n-  }\n-  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n-    // To be representable as an tagged small integer, the two\n-    // most-significant bits of 'value' must be either 00 or 11 due to\n-    // sign-extension. To check this we add 01 to the two\n-    // most-significant bits, and check if the most-significant bit is 0\n-    //\n-    // CAUTION: The original code below:\n-    // bool result = ((value + 0x40000000) & 0x80000000) == 0;\n-    // may lead to incorrect results according to the C language spec, and\n-    // in fact doesn't work correctly with gcc4.1.1 in some cases: The\n-    // compiler may produce undefined results in case of signed integer\n-    // overflow. The computation must be done w/ unsigned ints.\n-    return static_cast<uintptr_t>(value) + 0x40000000U < 0x80000000U;\n-  }\n-};\n-\n-// Smi constants for systems where tagged pointer is a 64-bit value.\n-template <>\n-struct SmiTagging<8> {\n-  enum { kSmiShiftSize = 31, kSmiValueSize = 32 };\n-  static int SmiShiftSize() { return kSmiShiftSize; }\n-  static int SmiValueSize() { return kSmiValueSize; }\n-  V8_INLINE static int SmiToInt(const internal::Object* value) {\n-    int shift_bits = kSmiTagSize + kSmiShiftSize;\n-    // Shift down and throw away top 32 bits.\n-    return static_cast<int>(reinterpret_cast<intptr_t>(value) >> shift_bits);\n-  }\n-  V8_INLINE static internal::Object* IntToSmi(int value) {\n-    return internal::IntToSmi<kSmiShiftSize>(value);\n-  }\n-  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n-    // To be representable as a long smi, the value must be a 32-bit integer.\n-    return (value == static_cast<int32_t>(value));\n-  }\n-};\n-\n-#if V8_COMPRESS_POINTERS\n-static_assert(\n-    kApiPointerSize == kApiInt64Size,\n-    \"Pointer compression can be enabled only for 64-bit architectures\");\n-typedef SmiTagging<4> PlatformSmiTagging;\n-#else\n-typedef SmiTagging<kApiPointerSize> PlatformSmiTagging;\n-#endif\n-\n-const int kSmiShiftSize = PlatformSmiTagging::kSmiShiftSize;\n-const int kSmiValueSize = PlatformSmiTagging::kSmiValueSize;\n-const int kSmiMinValue = (static_cast<unsigned int>(-1)) << (kSmiValueSize - 1);\n-const int kSmiMaxValue = -(kSmiMinValue + 1);\n-constexpr bool SmiValuesAre31Bits() { return kSmiValueSize == 31; }\n-constexpr bool SmiValuesAre32Bits() { return kSmiValueSize == 32; }\n-\n }  // namespace internal\n \n namespace debug {\n@@ -302,7 +178,7 @@ class ConsoleCallArguments;\n template <class T>\n class Local {\n  public:\n-  V8_INLINE Local() : val_(0) {}\n+  V8_INLINE Local() : val_(nullptr) {}\n   template <class S>\n   V8_INLINE Local(Local<S> that)\n       : val_(reinterpret_cast<T*>(*that)) {\n@@ -317,12 +193,12 @@ class Local {\n   /**\n    * Returns true if the handle is empty.\n    */\n-  V8_INLINE bool IsEmpty() const { return val_ == 0; }\n+  V8_INLINE bool IsEmpty() const { return val_ == nullptr; }\n \n   /**\n    * Sets the handle to be empty. IsEmpty() will then return true.\n    */\n-  V8_INLINE void Clear() { val_ = 0; }\n+  V8_INLINE void Clear() { val_ = nullptr; }\n \n   V8_INLINE T* operator->() const { return val_; }\n \n@@ -338,17 +214,17 @@ class Local {\n   V8_INLINE bool operator==(const Local<S>& that) const {\n     internal::Object** a = reinterpret_cast<internal::Object**>(this->val_);\n     internal::Object** b = reinterpret_cast<internal::Object**>(that.val_);\n-    if (a == 0) return b == 0;\n-    if (b == 0) return false;\n+    if (a == nullptr) return b == nullptr;\n+    if (b == nullptr) return false;\n     return *a == *b;\n   }\n \n   template <class S> V8_INLINE bool operator==(\n       const PersistentBase<S>& that) const {\n     internal::Object** a = reinterpret_cast<internal::Object**>(this->val_);\n     internal::Object** b = reinterpret_cast<internal::Object**>(that.val_);\n-    if (a == 0) return b == 0;\n-    if (b == 0) return false;\n+    if (a == nullptr) return b == nullptr;\n+    if (b == nullptr) return false;\n     return *a == *b;\n   }\n \n@@ -592,7 +468,7 @@ template <class T> class PersistentBase {\n   template <class S>\n   V8_INLINE void Reset(Isolate* isolate, const PersistentBase<S>& other);\n \n-  V8_INLINE bool IsEmpty() const { return val_ == NULL; }\n+  V8_INLINE bool IsEmpty() const { return val_ == nullptr; }\n   V8_INLINE void Empty() { val_ = 0; }\n \n   V8_INLINE Local<T> Get(Isolate* isolate) const {\n@@ -603,17 +479,17 @@ template <class T> class PersistentBase {\n   V8_INLINE bool operator==(const PersistentBase<S>& that) const {\n     internal::Object** a = reinterpret_cast<internal::Object**>(this->val_);\n     internal::Object** b = reinterpret_cast<internal::Object**>(that.val_);\n-    if (a == NULL) return b == NULL;\n-    if (b == NULL) return false;\n+    if (a == nullptr) return b == nullptr;\n+    if (b == nullptr) return false;\n     return *a == *b;\n   }\n \n   template <class S>\n   V8_INLINE bool operator==(const Local<S>& that) const {\n     internal::Object** a = reinterpret_cast<internal::Object**>(this->val_);\n     internal::Object** b = reinterpret_cast<internal::Object**>(that.val_);\n-    if (a == NULL) return b == NULL;\n-    if (b == NULL) return false;\n+    if (a == nullptr) return b == nullptr;\n+    if (b == nullptr) return false;\n     return *a == *b;\n   }\n \n@@ -786,7 +662,7 @@ template <class T, class M> class Persistent : public PersistentBase<T> {\n   /**\n    * A Persistent with no storage cell.\n    */\n-  V8_INLINE Persistent() : PersistentBase<T>(0) { }\n+  V8_INLINE Persistent() : PersistentBase<T>(nullptr) {}\n   /**\n    * Construct a Persistent from a Local.\n    * When the Local is non-empty, a new storage cell is created\n@@ -813,7 +689,7 @@ template <class T, class M> class Persistent : public PersistentBase<T> {\n    * traits class is called, allowing the setting of flags based on the\n    * copied Persistent.\n    */\n-  V8_INLINE Persistent(const Persistent& that) : PersistentBase<T>(0) {\n+  V8_INLINE Persistent(const Persistent& that) : PersistentBase<T>(nullptr) {\n     Copy(that);\n   }\n   template <class S, class M2>\n@@ -979,7 +855,7 @@ class V8_EXPORT HandleScope {\n   void operator=(const HandleScope&) = delete;\n \n  protected:\n-  V8_INLINE HandleScope() {}\n+  V8_INLINE HandleScope() = default;\n \n   void Initialize(Isolate* isolate);\n \n@@ -1019,7 +895,7 @@ class V8_EXPORT HandleScope {\n class V8_EXPORT EscapableHandleScope : public HandleScope {\n  public:\n   explicit EscapableHandleScope(Isolate* isolate);\n-  V8_INLINE ~EscapableHandleScope() {}\n+  V8_INLINE ~EscapableHandleScope() = default;\n \n   /**\n    * Pushes the value into the previous scope and returns a handle to it.\n@@ -1123,10 +999,6 @@ class V8_EXPORT PrimitiveArray {\n  public:\n   static Local<PrimitiveArray> New(Isolate* isolate, int length);\n   int Length() const;\n-  V8_DEPRECATED(\"Use Isolate* version\",\n-      void Set(int index, Local<Primitive> item));\n-  V8_DEPRECATED(\"Use Isolate* version\",\n-      Local<Primitive> Get(int index));\n   void Set(Isolate* isolate, int index, Local<Primitive> item);\n   Local<Primitive> Get(Isolate* isolate, int index);\n };\n@@ -1393,7 +1265,7 @@ class V8_EXPORT ScriptCompiler {\n     };\n \n     CachedData()\n-        : data(NULL),\n+        : data(nullptr),\n           length(0),\n           rejected(false),\n           buffer_policy(BufferNotOwned) {}\n@@ -1424,9 +1296,9 @@ class V8_EXPORT ScriptCompiler {\n    public:\n     // Source takes ownership of CachedData.\n     V8_INLINE Source(Local<String> source_string, const ScriptOrigin& origin,\n-           CachedData* cached_data = NULL);\n+                     CachedData* cached_data = nullptr);\n     V8_INLINE Source(Local<String> source_string,\n-                     CachedData* cached_data = NULL);\n+                     CachedData* cached_data = nullptr);\n     V8_INLINE ~Source();\n \n     // Ownership of the CachedData or its buffers is *not* transferred to the\n@@ -1465,7 +1337,7 @@ class V8_EXPORT ScriptCompiler {\n    */\n   class V8_EXPORT ExternalSourceStream {\n    public:\n-    virtual ~ExternalSourceStream() {}\n+    virtual ~ExternalSourceStream() = default;\n \n     /**\n      * V8 calls this to request the next chunk of data from the embedder. This\n@@ -1508,12 +1380,11 @@ class V8_EXPORT ScriptCompiler {\n     virtual void ResetToBookmark();\n   };\n \n-\n   /**\n    * Source code which can be streamed into V8 in pieces. It will be parsed\n-   * while streaming. It can be compiled after the streaming is complete.\n-   * StreamedSource must be kept alive while the streaming task is ran (see\n-   * ScriptStreamingTask below).\n+   * while streaming and compiled after parsing has completed. StreamedSource\n+   * must be kept alive while the streaming task is run (see ScriptStreamingTask\n+   * below).\n    */\n   class V8_EXPORT StreamedSource {\n    public:\n@@ -1522,29 +1393,35 @@ class V8_EXPORT ScriptCompiler {\n     StreamedSource(ExternalSourceStream* source_stream, Encoding encoding);\n     ~StreamedSource();\n \n-    // Ownership of the CachedData or its buffers is *not* transferred to the\n-    // caller. The CachedData object is alive as long as the StreamedSource\n-    // object is alive.\n-    const CachedData* GetCachedData() const;\n+    V8_DEPRECATED(\"No longer used\", const CachedData* GetCachedData() const) {\n+      return nullptr;\n+    }\n \n-    internal::ScriptStreamingData* impl() const { return impl_; }\n+    internal::ScriptStreamingData* impl() const { return impl_.get(); }\n \n     // Prevent copying.\n     StreamedSource(const StreamedSource&) = delete;\n     StreamedSource& operator=(const StreamedSource&) = delete;\n \n    private:\n-    internal::ScriptStreamingData* impl_;\n+    std::unique_ptr<internal::ScriptStreamingData> impl_;\n   };\n \n   /**\n    * A streaming task which the embedder must run on a background thread to\n    * stream scripts into V8. Returned by ScriptCompiler::StartStreamingScript.\n    */\n-  class ScriptStreamingTask {\n+  class V8_EXPORT ScriptStreamingTask final {\n    public:\n-    virtual ~ScriptStreamingTask() {}\n-    virtual void Run() = 0;\n+    void Run();\n+\n+   private:\n+    friend class ScriptCompiler;\n+\n+    explicit ScriptStreamingTask(internal::ScriptStreamingData* data)\n+        : data_(data) {}\n+\n+    internal::ScriptStreamingData* data_;\n   };\n \n   enum CompileOptions {\n@@ -1833,8 +1710,6 @@ class V8_EXPORT StackTrace {\n   /**\n    * Returns a StackFrame at a particular index.\n    */\n-  V8_DEPRECATED(\"Use Isolate version\",\n-                Local<StackFrame> GetFrame(uint32_t index) const);\n   Local<StackFrame> GetFrame(Isolate* isolate, uint32_t index) const;\n \n   /**\n@@ -1951,6 +1826,11 @@ struct SampleInfo {\n                                   // executing an external callback.\n };\n \n+struct MemoryRange {\n+  const void* start;\n+  size_t length_in_bytes;\n+};\n+\n /**\n  * A JSON Parser and Stringifier.\n  */\n@@ -1993,7 +1873,7 @@ class V8_EXPORT ValueSerializer {\n  public:\n   class V8_EXPORT Delegate {\n    public:\n-    virtual ~Delegate() {}\n+    virtual ~Delegate() = default;\n \n     /**\n      * Handles the case where a DataCloneError would be thrown in the structured\n@@ -2130,7 +2010,7 @@ class V8_EXPORT ValueDeserializer {\n  public:\n   class V8_EXPORT Delegate {\n    public:\n-    virtual ~Delegate() {}\n+    virtual ~Delegate() = default;\n \n     /**\n      * The embedder overrides this method to read some kind of host object, if\n@@ -2514,8 +2394,9 @@ class V8_EXPORT Value : public Data {\n \n   V8_WARN_UNUSED_RESULT MaybeLocal<BigInt> ToBigInt(\n       Local<Context> context) const;\n-  V8_WARN_UNUSED_RESULT MaybeLocal<Boolean> ToBoolean(\n-      Local<Context> context) const;\n+  V8_DEPRECATE_SOON(\"ToBoolean can never throw. Use Local version.\",\n+                    V8_WARN_UNUSED_RESULT MaybeLocal<Boolean> ToBoolean(\n+                        Local<Context> context) const);\n   V8_WARN_UNUSED_RESULT MaybeLocal<Number> ToNumber(\n       Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT MaybeLocal<String> ToString(\n@@ -2530,25 +2411,17 @@ class V8_EXPORT Value : public Data {\n       Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT MaybeLocal<Int32> ToInt32(Local<Context> context) const;\n \n-  V8_DEPRECATED(\"Use maybe version\",\n-                Local<Boolean> ToBoolean(Isolate* isolate) const);\n-  V8_DEPRECATED(\"Use maybe version\",\n-                Local<Number> ToNumber(Isolate* isolate) const);\n-  V8_DEPRECATED(\"Use maybe version\",\n-                Local<String> ToString(Isolate* isolate) const);\n-  V8_DEPRECATED(\"Use maybe version\",\n-                Local<Object> ToObject(Isolate* isolate) const);\n-  V8_DEPRECATED(\"Use maybe version\",\n-                Local<Integer> ToInteger(Isolate* isolate) const);\n-  V8_DEPRECATED(\"Use maybe version\",\n-                Local<Int32> ToInt32(Isolate* isolate) const);\n-\n-  inline V8_DEPRECATED(\"Use maybe version\",\n-                       Local<Boolean> ToBoolean() const);\n-  inline V8_DEPRECATED(\"Use maybe version\", Local<String> ToString() const);\n-  inline V8_DEPRECATED(\"Use maybe version\", Local<Object> ToObject() const);\n-  inline V8_DEPRECATED(\"Use maybe version\",\n-                       Local<Integer> ToInteger() const);\n+  Local<Boolean> ToBoolean(Isolate* isolate) const;\n+  V8_DEPRECATE_SOON(\"Use maybe version\",\n+                    Local<Number> ToNumber(Isolate* isolate) const);\n+  V8_DEPRECATE_SOON(\"Use maybe version\",\n+                    Local<String> ToString(Isolate* isolate) const);\n+  V8_DEPRECATE_SOON(\"Use maybe version\",\n+                    Local<Object> ToObject(Isolate* isolate) const);\n+  V8_DEPRECATE_SOON(\"Use maybe version\",\n+                    Local<Integer> ToInteger(Isolate* isolate) const);\n+  V8_DEPRECATE_SOON(\"Use maybe version\",\n+                    Local<Int32> ToInt32(Isolate* isolate) const);\n \n   /**\n    * Attempts to convert a string to an array index.\n@@ -2557,22 +2430,19 @@ class V8_EXPORT Value : public Data {\n   V8_WARN_UNUSED_RESULT MaybeLocal<Uint32> ToArrayIndex(\n       Local<Context> context) const;\n \n-  V8_WARN_UNUSED_RESULT Maybe<bool> BooleanValue(Local<Context> context) const;\n+  bool BooleanValue(Isolate* isolate) const;\n+\n+  V8_DEPRECATE_SOON(\"BooleanValue can never throw. Use Isolate version.\",\n+                    V8_WARN_UNUSED_RESULT Maybe<bool> BooleanValue(\n+                        Local<Context> context) const);\n   V8_WARN_UNUSED_RESULT Maybe<double> NumberValue(Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT Maybe<int64_t> IntegerValue(\n       Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT Maybe<uint32_t> Uint32Value(\n       Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT Maybe<int32_t> Int32Value(Local<Context> context) const;\n \n-  V8_DEPRECATED(\"Use maybe version\", bool BooleanValue() const);\n-  V8_DEPRECATED(\"Use maybe version\", double NumberValue() const);\n-  V8_DEPRECATED(\"Use maybe version\", int64_t IntegerValue() const);\n-  V8_DEPRECATED(\"Use maybe version\", uint32_t Uint32Value() const);\n-  V8_DEPRECATED(\"Use maybe version\", int32_t Int32Value() const);\n-\n   /** JS == */\n-  V8_DEPRECATED(\"Use maybe version\", bool Equals(Local<Value> that) const);\n   V8_WARN_UNUSED_RESULT Maybe<bool> Equals(Local<Context> context,\n                                            Local<Value> that) const;\n   bool StrictEquals(Local<Value> that) const;\n@@ -2679,8 +2549,6 @@ class V8_EXPORT String : public Name {\n    * Returns the number of bytes in the UTF-8 encoded\n    * representation of this string.\n    */\n-  V8_DEPRECATED(\"Use Isolate version instead\", int Utf8Length() const);\n-\n   int Utf8Length(Isolate* isolate) const;\n \n   /**\n@@ -2737,23 +2605,12 @@ class V8_EXPORT String : public Name {\n   // 16-bit character codes.\n   int Write(Isolate* isolate, uint16_t* buffer, int start = 0, int length = -1,\n             int options = NO_OPTIONS) const;\n-  V8_DEPRECATED(\"Use Isolate* version\",\n-                int Write(uint16_t* buffer, int start = 0, int length = -1,\n-                          int options = NO_OPTIONS) const);\n   // One byte characters.\n   int WriteOneByte(Isolate* isolate, uint8_t* buffer, int start = 0,\n                    int length = -1, int options = NO_OPTIONS) const;\n-  V8_DEPRECATED(\"Use Isolate* version\",\n-                int WriteOneByte(uint8_t* buffer, int start = 0,\n-                                 int length = -1, int options = NO_OPTIONS)\n-                    const);\n   // UTF-8 encoded characters.\n   int WriteUtf8(Isolate* isolate, char* buffer, int length = -1,\n-                int* nchars_ref = NULL, int options = NO_OPTIONS) const;\n-  V8_DEPRECATED(\"Use Isolate* version\",\n-                int WriteUtf8(char* buffer, int length = -1,\n-                              int* nchars_ref = NULL,\n-                              int options = NO_OPTIONS) const);\n+                int* nchars_ref = nullptr, int options = NO_OPTIONS) const;\n \n   /**\n    * A zero length string.\n@@ -2772,12 +2629,31 @@ class V8_EXPORT String : public Name {\n \n   class V8_EXPORT ExternalStringResourceBase {  // NOLINT\n    public:\n-    virtual ~ExternalStringResourceBase() {}\n+    virtual ~ExternalStringResourceBase() = default;\n \n-    virtual bool IsCompressible() const { return false; }\n+    V8_DEPRECATE_SOON(\"Use IsCacheable().\",\n+                      virtual bool IsCompressible() const) {\n+      return false;\n+    }\n+\n+    /**\n+     * If a string is cacheable, the value returned by\n+     * ExternalStringResource::data() may be cached, otherwise it is not\n+     * expected to be stable beyond the current top-level task.\n+     */\n+    virtual bool IsCacheable() const {\n+#if __clang__\n+#pragma clang diagnostic push\n+#pragma clang diagnostic ignored \"-Wdeprecated-declarations\"\n+#endif\n+      return !IsCompressible();\n+#if __clang__\n+#pragma clang diagnostic pop\n+#endif\n+    }\n \n    protected:\n-    ExternalStringResourceBase() {}\n+    ExternalStringResourceBase() = default;\n \n     /**\n      * Internally V8 will call this Dispose method when the external string\n@@ -2787,13 +2663,32 @@ class V8_EXPORT String : public Name {\n      */\n     virtual void Dispose() { delete this; }\n \n+    /**\n+     * For a non-cacheable string, the value returned by\n+     * |ExternalStringResource::data()| has to be stable between |Lock()| and\n+     * |Unlock()|, that is the string must behave as is |IsCacheable()| returned\n+     * true.\n+     *\n+     * These two functions must be thread-safe, and can be called from anywhere.\n+     * They also must handle lock depth, in the sense that each can be called\n+     * several times, from different threads, and unlocking should only happen\n+     * when the balance of Lock() and Unlock() calls is 0.\n+     */\n+    virtual void Lock() const {}\n+\n+    /**\n+     * Unlocks the string.\n+     */\n+    virtual void Unlock() const {}\n+\n     // Disallow copying and assigning.\n     ExternalStringResourceBase(const ExternalStringResourceBase&) = delete;\n     void operator=(const ExternalStringResourceBase&) = delete;\n \n    private:\n     friend class internal::Heap;\n     friend class v8::String;\n+    friend class internal::ScopedExternalStringLock;\n   };\n \n   /**\n@@ -2809,7 +2704,7 @@ class V8_EXPORT String : public Name {\n      * Override the destructor to manage the life cycle of the underlying\n      * buffer.\n      */\n-    virtual ~ExternalStringResource() {}\n+    ~ExternalStringResource() override = default;\n \n     /**\n      * The string data from the underlying buffer.\n@@ -2822,7 +2717,7 @@ class V8_EXPORT String : public Name {\n     virtual size_t length() const = 0;\n \n    protected:\n-    ExternalStringResource() {}\n+    ExternalStringResource() = default;\n   };\n \n   /**\n@@ -2842,13 +2737,13 @@ class V8_EXPORT String : public Name {\n      * Override the destructor to manage the life cycle of the underlying\n      * buffer.\n      */\n-    virtual ~ExternalOneByteStringResource() {}\n+    ~ExternalOneByteStringResource() override = default;\n     /** The string data from the underlying buffer.*/\n     virtual const char* data() const = 0;\n     /** The number of Latin-1 characters in the string.*/\n     virtual size_t length() const = 0;\n    protected:\n-    ExternalOneByteStringResource() {}\n+    ExternalOneByteStringResource() = default;\n   };\n \n   /**\n@@ -2917,9 +2812,6 @@ class V8_EXPORT String : public Name {\n    */\n   static Local<String> Concat(Isolate* isolate, Local<String> left,\n                               Local<String> right);\n-  static V8_DEPRECATED(\"Use Isolate* version\",\n-                       Local<String> Concat(Local<String> left,\n-                                            Local<String> right));\n \n   /**\n    * Creates a new external string using the data defined in the given\n@@ -2988,8 +2880,6 @@ class V8_EXPORT String : public Name {\n    */\n   class V8_EXPORT Utf8Value {\n    public:\n-    V8_DEPRECATED(\"Use Isolate version\",\n-                  explicit Utf8Value(Local<v8::Value> obj));\n     Utf8Value(Isolate* isolate, Local<v8::Value> obj);\n     ~Utf8Value();\n     char* operator*() { return str_; }\n@@ -3013,7 +2903,6 @@ class V8_EXPORT String : public Name {\n    */\n   class V8_EXPORT Value {\n    public:\n-    V8_DEPRECATED(\"Use Isolate version\", explicit Value(Local<v8::Value> obj));\n     Value(Isolate* isolate, Local<v8::Value> obj);\n     ~Value();\n     uint16_t* operator*() { return str_; }\n@@ -3075,6 +2964,7 @@ class V8_EXPORT Symbol : public Name {\n   static Local<Symbol> ForApi(Isolate *isolate, Local<String> name);\n \n   // Well-known symbols\n+  static Local<Symbol> GetAsyncIterator(Isolate* isolate);\n   static Local<Symbol> GetHasInstance(Isolate* isolate);\n   static Local<Symbol> GetIsConcatSpreadable(Isolate* isolate);\n   static Local<Symbol> GetIterator(Isolate* isolate);\n@@ -3312,10 +3202,17 @@ enum PropertyFilter {\n  * Options for marking whether callbacks may trigger JS-observable side effects.\n  * Side-effect-free callbacks are whitelisted during debug evaluation with\n  * throwOnSideEffect. It applies when calling a Function, FunctionTemplate,\n- * or an Accessor's getter callback. For Interceptors, please see\n+ * or an Accessor callback. For Interceptors, please see\n  * PropertyHandlerFlags's kHasNoSideEffect.\n+ * Callbacks that only cause side effects to the receiver are whitelisted if\n+ * invoked on receiver objects that are created within the same debug-evaluate\n+ * call, as these objects are temporary and the side effect does not escape.\n  */\n-enum class SideEffectType { kHasSideEffect, kHasNoSideEffect };\n+enum class SideEffectType {\n+  kHasSideEffect,\n+  kHasNoSideEffect,\n+  kHasSideEffectToReceiver\n+};\n \n /**\n  * Keys/Properties filter enums:\n@@ -3439,7 +3336,7 @@ class V8_EXPORT Object : public Value {\n   V8_WARN_UNUSED_RESULT Maybe<bool> Has(Local<Context> context,\n                                         Local<Value> key);\n \n-  V8_DEPRECATED(\"Use maybe version\", bool Delete(Local<Value> key));\n+  V8_DEPRECATE_SOON(\"Use maybe version\", bool Delete(Local<Value> key));\n   V8_WARN_UNUSED_RESULT Maybe<bool> Delete(Local<Context> context,\n                                            Local<Value> key);\n \n@@ -3453,10 +3350,12 @@ class V8_EXPORT Object : public Value {\n    */\n   V8_WARN_UNUSED_RESULT Maybe<bool> SetAccessor(\n       Local<Context> context, Local<Name> name,\n-      AccessorNameGetterCallback getter, AccessorNameSetterCallback setter = 0,\n+      AccessorNameGetterCallback getter,\n+      AccessorNameSetterCallback setter = nullptr,\n       MaybeLocal<Value> data = MaybeLocal<Value>(),\n       AccessControl settings = DEFAULT, PropertyAttribute attribute = None,\n-      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect,\n+      SideEffectType setter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   void SetAccessorProperty(Local<Name> name, Local<Function> getter,\n                            Local<Function> setter = Local<Function>(),\n@@ -3472,7 +3371,8 @@ class V8_EXPORT Object : public Value {\n       AccessorNameGetterCallback getter,\n       AccessorNameSetterCallback setter = nullptr,\n       Local<Value> data = Local<Value>(), PropertyAttribute attributes = None,\n-      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect,\n+      SideEffectType setter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   /**\n    * Attempts to create a property with the given name which behaves like a data\n@@ -3486,7 +3386,8 @@ class V8_EXPORT Object : public Value {\n       Local<Context> context, Local<Name> name,\n       AccessorNameGetterCallback getter, Local<Value> data = Local<Value>(),\n       PropertyAttribute attributes = None,\n-      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect,\n+      SideEffectType setter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   /**\n    * Functionality for private properties.\n@@ -3779,12 +3680,6 @@ class V8_EXPORT Array : public Object {\n    */\n   static Local<Array> New(Isolate* isolate, int length = 0);\n \n-  /**\n-   * Creates a JavaScript array out of a Local<Value> array in C++\n-   * with a known length.\n-   */\n-  static Local<Array> New(Isolate* isolate, Local<Value>* elements,\n-                          size_t length);\n   V8_INLINE static Array* Cast(Value* obj);\n  private:\n   Array();\n@@ -4518,7 +4413,7 @@ class V8_EXPORT WasmModuleObjectBuilderStreaming final {\n   void Abort(MaybeLocal<Value> exception);\n   Local<Promise> GetPromise();\n \n-  ~WasmModuleObjectBuilderStreaming();\n+  ~WasmModuleObjectBuilderStreaming() = default;\n \n  private:\n   WasmModuleObjectBuilderStreaming(const WasmModuleObjectBuilderStreaming&) =\n@@ -4577,7 +4472,7 @@ class V8_EXPORT ArrayBuffer : public Object {\n    */\n   class V8_EXPORT Allocator { // NOLINT\n    public:\n-    virtual ~Allocator() {}\n+    virtual ~Allocator() = default;\n \n     /**\n      * Allocate |length| bytes. Return NULL if allocation is not successful.\n@@ -5238,8 +5133,6 @@ class V8_EXPORT BooleanObject : public Object {\n class V8_EXPORT StringObject : public Object {\n  public:\n   static Local<Value> New(Isolate* isolate, Local<String> value);\n-  V8_DEPRECATED(\"Use Isolate* version\",\n-                static Local<Value> New(Local<String> value));\n \n   Local<String> ValueOf() const;\n \n@@ -5400,20 +5293,22 @@ class V8_EXPORT Template : public Data {\n    */\n   void SetNativeDataProperty(\n       Local<String> name, AccessorGetterCallback getter,\n-      AccessorSetterCallback setter = 0,\n+      AccessorSetterCallback setter = nullptr,\n       // TODO(dcarney): gcc can't handle Local below\n       Local<Value> data = Local<Value>(), PropertyAttribute attribute = None,\n       Local<AccessorSignature> signature = Local<AccessorSignature>(),\n       AccessControl settings = DEFAULT,\n-      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect,\n+      SideEffectType setter_side_effect_type = SideEffectType::kHasSideEffect);\n   void SetNativeDataProperty(\n       Local<Name> name, AccessorNameGetterCallback getter,\n-      AccessorNameSetterCallback setter = 0,\n+      AccessorNameSetterCallback setter = nullptr,\n       // TODO(dcarney): gcc can't handle Local below\n       Local<Value> data = Local<Value>(), PropertyAttribute attribute = None,\n       Local<AccessorSignature> signature = Local<AccessorSignature>(),\n       AccessControl settings = DEFAULT,\n-      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect,\n+      SideEffectType setter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   /**\n    * Like SetNativeDataProperty, but V8 will replace the native data property\n@@ -5422,7 +5317,8 @@ class V8_EXPORT Template : public Data {\n   void SetLazyDataProperty(\n       Local<Name> name, AccessorNameGetterCallback getter,\n       Local<Value> data = Local<Value>(), PropertyAttribute attribute = None,\n-      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect,\n+      SideEffectType setter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   /**\n    * During template instantiation, sets the value with the intrinsic property\n@@ -5783,7 +5679,7 @@ class V8_EXPORT FunctionTemplate : public Template {\n  public:\n   /** Creates a function template.*/\n   static Local<FunctionTemplate> New(\n-      Isolate* isolate, FunctionCallback callback = 0,\n+      Isolate* isolate, FunctionCallback callback = nullptr,\n       Local<Value> data = Local<Value>(),\n       Local<Signature> signature = Local<Signature>(), int length = 0,\n       ConstructorBehavior behavior = ConstructorBehavior::kAllow,\n@@ -5964,20 +5860,20 @@ struct NamedPropertyHandlerConfiguration {\n \n   NamedPropertyHandlerConfiguration(\n       /** Note: getter is required */\n-      GenericNamedPropertyGetterCallback getter = 0,\n-      GenericNamedPropertySetterCallback setter = 0,\n-      GenericNamedPropertyQueryCallback query = 0,\n-      GenericNamedPropertyDeleterCallback deleter = 0,\n-      GenericNamedPropertyEnumeratorCallback enumerator = 0,\n+      GenericNamedPropertyGetterCallback getter = nullptr,\n+      GenericNamedPropertySetterCallback setter = nullptr,\n+      GenericNamedPropertyQueryCallback query = nullptr,\n+      GenericNamedPropertyDeleterCallback deleter = nullptr,\n+      GenericNamedPropertyEnumeratorCallback enumerator = nullptr,\n       Local<Value> data = Local<Value>(),\n       PropertyHandlerFlags flags = PropertyHandlerFlags::kNone)\n       : getter(getter),\n         setter(setter),\n         query(query),\n         deleter(deleter),\n         enumerator(enumerator),\n-        definer(0),\n-        descriptor(0),\n+        definer(nullptr),\n+        descriptor(nullptr),\n         data(data),\n         flags(flags) {}\n \n@@ -5992,7 +5888,7 @@ struct NamedPropertyHandlerConfiguration {\n       PropertyHandlerFlags flags = PropertyHandlerFlags::kNone)\n       : getter(getter),\n         setter(setter),\n-        query(0),\n+        query(nullptr),\n         deleter(deleter),\n         enumerator(enumerator),\n         definer(definer),\n@@ -6034,20 +5930,20 @@ struct IndexedPropertyHandlerConfiguration {\n \n   IndexedPropertyHandlerConfiguration(\n       /** Note: getter is required */\n-      IndexedPropertyGetterCallback getter = 0,\n-      IndexedPropertySetterCallback setter = 0,\n-      IndexedPropertyQueryCallback query = 0,\n-      IndexedPropertyDeleterCallback deleter = 0,\n-      IndexedPropertyEnumeratorCallback enumerator = 0,\n+      IndexedPropertyGetterCallback getter = nullptr,\n+      IndexedPropertySetterCallback setter = nullptr,\n+      IndexedPropertyQueryCallback query = nullptr,\n+      IndexedPropertyDeleterCallback deleter = nullptr,\n+      IndexedPropertyEnumeratorCallback enumerator = nullptr,\n       Local<Value> data = Local<Value>(),\n       PropertyHandlerFlags flags = PropertyHandlerFlags::kNone)\n       : getter(getter),\n         setter(setter),\n         query(query),\n         deleter(deleter),\n         enumerator(enumerator),\n-        definer(0),\n-        descriptor(0),\n+        definer(nullptr),\n+        descriptor(nullptr),\n         data(data),\n         flags(flags) {}\n \n@@ -6062,7 +5958,7 @@ struct IndexedPropertyHandlerConfiguration {\n       PropertyHandlerFlags flags = PropertyHandlerFlags::kNone)\n       : getter(getter),\n         setter(setter),\n-        query(0),\n+        query(nullptr),\n         deleter(deleter),\n         enumerator(enumerator),\n         definer(definer),\n@@ -6134,16 +6030,20 @@ class V8_EXPORT ObjectTemplate : public Template {\n    */\n   void SetAccessor(\n       Local<String> name, AccessorGetterCallback getter,\n-      AccessorSetterCallback setter = 0, Local<Value> data = Local<Value>(),\n-      AccessControl settings = DEFAULT, PropertyAttribute attribute = None,\n+      AccessorSetterCallback setter = nullptr,\n+      Local<Value> data = Local<Value>(), AccessControl settings = DEFAULT,\n+      PropertyAttribute attribute = None,\n       Local<AccessorSignature> signature = Local<AccessorSignature>(),\n-      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect,\n+      SideEffectType setter_side_effect_type = SideEffectType::kHasSideEffect);\n   void SetAccessor(\n       Local<Name> name, AccessorNameGetterCallback getter,\n-      AccessorNameSetterCallback setter = 0, Local<Value> data = Local<Value>(),\n-      AccessControl settings = DEFAULT, PropertyAttribute attribute = None,\n+      AccessorNameSetterCallback setter = nullptr,\n+      Local<Value> data = Local<Value>(), AccessControl settings = DEFAULT,\n+      PropertyAttribute attribute = None,\n       Local<AccessorSignature> signature = Local<AccessorSignature>(),\n-      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect);\n+      SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect,\n+      SideEffectType setter_side_effect_type = SideEffectType::kHasSideEffect);\n \n   /**\n    * Sets a named property handler on the object template.\n@@ -6177,10 +6077,10 @@ class V8_EXPORT ObjectTemplate : public Template {\n   // TODO(dcarney): deprecate\n   void SetIndexedPropertyHandler(\n       IndexedPropertyGetterCallback getter,\n-      IndexedPropertySetterCallback setter = 0,\n-      IndexedPropertyQueryCallback query = 0,\n-      IndexedPropertyDeleterCallback deleter = 0,\n-      IndexedPropertyEnumeratorCallback enumerator = 0,\n+      IndexedPropertySetterCallback setter = nullptr,\n+      IndexedPropertyQueryCallback query = nullptr,\n+      IndexedPropertyDeleterCallback deleter = nullptr,\n+      IndexedPropertyEnumeratorCallback enumerator = nullptr,\n       Local<Value> data = Local<Value>()) {\n     SetHandler(IndexedPropertyHandlerConfiguration(getter, setter, query,\n                                                    deleter, enumerator, data));\n@@ -6320,11 +6220,11 @@ V8_DEPRECATE_SOON(\"Implementation detail\", class)\n V8_EXPORT ExternalOneByteStringResourceImpl\n     : public String::ExternalOneByteStringResource {\n  public:\n-  ExternalOneByteStringResourceImpl() : data_(0), length_(0) {}\n+  ExternalOneByteStringResourceImpl() : data_(nullptr), length_(0) {}\n   ExternalOneByteStringResourceImpl(const char* data, size_t length)\n       : data_(data), length_(length) {}\n-  const char* data() const { return data_; }\n-  size_t length() const { return length_; }\n+  const char* data() const override { return data_; }\n+  size_t length() const override { return length_; }\n \n  private:\n   const char* data_;\n@@ -6338,11 +6238,8 @@ class V8_EXPORT Extension {  // NOLINT\n  public:\n   // Note that the strings passed into this constructor must live as long\n   // as the Extension itself.\n-  Extension(const char* name,\n-            const char* source = 0,\n-            int dep_count = 0,\n-            const char** deps = 0,\n-            int source_length = -1);\n+  Extension(const char* name, const char* source = nullptr, int dep_count = 0,\n+            const char** deps = nullptr, int source_length = -1);\n   virtual ~Extension() { delete source_; }\n   virtual Local<FunctionTemplate> GetNativeFunctionTemplate(\n       Isolate* isolate, Local<String> name) {\n@@ -6566,6 +6463,15 @@ typedef void (*HostInitializeImportMetaObjectCallback)(Local<Context> context,\n                                                        Local<Module> module,\n                                                        Local<Object> meta);\n \n+/**\n+ * PrepareStackTraceCallback is called when the stack property of an error is\n+ * first accessed. The return value will be used as the stack value. If this\n+ * callback is registed, the |Error.prepareStackTrace| API will be disabled.\n+ */\n+typedef MaybeLocal<Value> (*PrepareStackTraceCallback)(Local<Context> context,\n+                                                       Local<Value> error,\n+                                                       Local<StackTrace> trace);\n+\n /**\n  * PromiseHook with type kInit is called when a new promise is\n  * created. When a new promise is created as part of the chain in the\n@@ -6994,7 +6900,7 @@ typedef void (*JitCodeEventHandler)(const JitCodeEvent* event);\n  */\n class V8_EXPORT ExternalResourceVisitor {  // NOLINT\n  public:\n-  virtual ~ExternalResourceVisitor() {}\n+  virtual ~ExternalResourceVisitor() = default;\n   virtual void VisitExternalString(Local<String> string) {}\n };\n \n@@ -7004,7 +6910,7 @@ class V8_EXPORT ExternalResourceVisitor {  // NOLINT\n  */\n class V8_EXPORT PersistentHandleVisitor {  // NOLINT\n  public:\n-  virtual ~PersistentHandleVisitor() {}\n+  virtual ~PersistentHandleVisitor() = default;\n   virtual void VisitPersistentHandle(Persistent<Value>* value,\n                                      uint16_t class_id) {}\n };\n@@ -7074,8 +6980,8 @@ class V8_EXPORT EmbedderHeapTracer {\n    * embedder.\n    */\n   V8_DEPRECATED(\"Use void AdvanceTracing(deadline_in_ms)\",\n-                virtual bool AdvanceTracing(\n-                    double deadline_in_ms, AdvanceTracingActions actions)) {\n+                virtual bool AdvanceTracing(double deadline_in_ms,\n+                                            AdvanceTracingActions actions)) {\n     return false;\n   }\n \n@@ -7124,7 +7030,8 @@ class V8_EXPORT EmbedderHeapTracer {\n    * The embedder is expected to throw away all intermediate data and reset to\n    * the initial state.\n    */\n-  virtual void AbortTracing() = 0;\n+  V8_DEPRECATE_SOON(\"Obsolete as V8 will not abort tracing anymore.\",\n+                    virtual void AbortTracing()) {}\n \n   /*\n    * Called by the embedder to request immediate finalization of the currently\n@@ -7153,8 +7060,7 @@ class V8_EXPORT EmbedderHeapTracer {\n   /**\n    * Returns the number of wrappers that are still to be traced by the embedder.\n    */\n-  V8_DEPRECATE_SOON(\"Use IsTracingDone\",\n-                    virtual size_t NumberOfWrappersToTrace()) {\n+  V8_DEPRECATED(\"Use IsTracingDone\", virtual size_t NumberOfWrappersToTrace()) {\n     return 0;\n   }\n \n@@ -7458,6 +7364,23 @@ class V8_EXPORT Isolate {\n     kFunctionTokenOffsetTooLongForToString = 49,\n     kWasmSharedMemory = 50,\n     kWasmThreadOpcodes = 51,\n+    kAtomicsNotify = 52,\n+    kAtomicsWake = 53,\n+    kCollator = 54,\n+    kNumberFormat = 55,\n+    kDateTimeFormat = 56,\n+    kPluralRules = 57,\n+    kRelativeTimeFormat = 58,\n+    kLocale = 59,\n+    kListFormat = 60,\n+    kSegmenter = 61,\n+    kStringLocaleCompare = 62,\n+    kStringToLocaleUpperCase = 63,\n+    kStringToLocaleLowerCase = 64,\n+    kNumberToLocaleString = 65,\n+    kDateToLocaleString = 66,\n+    kDateToLocaleDateString = 67,\n+    kDateToLocaleTimeString = 68,\n \n     // If you add new values here, you'll also need to update Chromium's:\n     // web_feature.mojom, UseCounterCallback.cpp, and enums.xml. V8 changes to\n@@ -7545,6 +7468,12 @@ class V8_EXPORT Isolate {\n   void SetHostInitializeImportMetaObjectCallback(\n       HostInitializeImportMetaObjectCallback callback);\n \n+  /**\n+   * This specifies the callback called when the stack property of Error\n+   * is accessed.\n+   */\n+  void SetPrepareStackTraceCallback(PrepareStackTraceCallback callback);\n+\n   /**\n    * Optional notification that the system is running low on memory.\n    * V8 uses these notifications to guide heuristics.\n@@ -7782,6 +7711,11 @@ class V8_EXPORT Isolate {\n    */\n   void SetEmbedderHeapTracer(EmbedderHeapTracer* tracer);\n \n+  /*\n+   * Gets the currently active heap tracer for the isolate.\n+   */\n+  EmbedderHeapTracer* GetEmbedderHeapTracer();\n+\n   /**\n    * Use for |AtomicsWaitCallback| to indicate the type of event it receives.\n    */\n@@ -8180,7 +8114,9 @@ class V8_EXPORT Isolate {\n   void SetStackLimit(uintptr_t stack_limit);\n \n   /**\n-   * Returns a memory range that can potentially contain jitted code.\n+   * Returns a memory range that can potentially contain jitted code. Code for\n+   * V8's 'builtins' will not be in this range if embedded builtins is enabled.\n+   * Instead, see GetEmbeddedCodeRange.\n    *\n    * On Win64, embedders are advised to install function table callbacks for\n    * these ranges, as default SEH won't be able to unwind through jitted code.\n@@ -8194,6 +8130,15 @@ class V8_EXPORT Isolate {\n    */\n   void GetCodeRange(void** start, size_t* length_in_bytes);\n \n+  /**\n+   * Returns a memory range containing the code for V8's embedded functions\n+   * (e.g. builtins) which are shared across isolates.\n+   *\n+   * If embedded builtins are disabled, then the memory range will be a null\n+   * pointer with 0 length.\n+   */\n+  MemoryRange GetEmbeddedCodeRange();\n+\n   /** Set the callback to invoke in case of fatal errors. */\n   void SetFatalErrorHandler(FatalErrorCallback that);\n \n@@ -8933,7 +8878,7 @@ class V8_EXPORT TryCatch {\n    * of the C++ try catch handler itself.\n    */\n   static void* JSStackComparableAddress(TryCatch* handler) {\n-    if (handler == NULL) return NULL;\n+    if (handler == nullptr) return nullptr;\n     return handler->js_stack_comparable_address_;\n   }\n \n@@ -8973,7 +8918,7 @@ class V8_EXPORT TryCatch {\n  */\n class V8_EXPORT ExtensionConfiguration {\n  public:\n-  ExtensionConfiguration() : name_count_(0), names_(NULL) { }\n+  ExtensionConfiguration() : name_count_(0), names_(nullptr) {}\n   ExtensionConfiguration(int name_count, const char* names[])\n       : name_count_(name_count), names_(names) { }\n \n@@ -9030,7 +8975,7 @@ class V8_EXPORT Context {\n    * and only object identify will remain.\n    */\n   static Local<Context> New(\n-      Isolate* isolate, ExtensionConfiguration* extensions = NULL,\n+      Isolate* isolate, ExtensionConfiguration* extensions = nullptr,\n       MaybeLocal<ObjectTemplate> global_template = MaybeLocal<ObjectTemplate>(),\n       MaybeLocal<Value> global_object = MaybeLocal<Value>(),\n       DeserializeInternalFieldsCallback internal_fields_deserializer =\n@@ -9369,201 +9314,6 @@ class V8_EXPORT Locker {\n \n // --- Implementation ---\n \n-\n-namespace internal {\n-\n-/**\n- * This class exports constants and functionality from within v8 that\n- * is necessary to implement inline functions in the v8 api.  Don't\n- * depend on functions and constants defined here.\n- */\n-class Internals {\n- public:\n-  // These values match non-compiler-dependent values defined within\n-  // the implementation of v8.\n-  static const int kHeapObjectMapOffset = 0;\n-  static const int kMapInstanceTypeOffset = 1 * kApiPointerSize + kApiIntSize;\n-  static const int kStringResourceOffset = 3 * kApiPointerSize;\n-\n-  static const int kOddballKindOffset = 4 * kApiPointerSize + kApiDoubleSize;\n-  static const int kForeignAddressOffset = kApiPointerSize;\n-  static const int kJSObjectHeaderSize = 3 * kApiPointerSize;\n-  static const int kFixedArrayHeaderSize = 2 * kApiPointerSize;\n-  static const int kContextHeaderSize = 2 * kApiPointerSize;\n-  static const int kContextEmbedderDataIndex = 5;\n-  static const int kFullStringRepresentationMask = 0x0f;\n-  static const int kStringEncodingMask = 0x8;\n-  static const int kExternalTwoByteRepresentationTag = 0x02;\n-  static const int kExternalOneByteRepresentationTag = 0x0a;\n-\n-  static const int kIsolateEmbedderDataOffset = 0 * kApiPointerSize;\n-  static const int kExternalMemoryOffset = 4 * kApiPointerSize;\n-  static const int kExternalMemoryLimitOffset =\n-      kExternalMemoryOffset + kApiInt64Size;\n-  static const int kExternalMemoryAtLastMarkCompactOffset =\n-      kExternalMemoryLimitOffset + kApiInt64Size;\n-  static const int kIsolateRootsOffset = kExternalMemoryLimitOffset +\n-                                         kApiInt64Size + kApiInt64Size +\n-                                         kApiPointerSize + kApiPointerSize;\n-  static const int kUndefinedValueRootIndex = 4;\n-  static const int kTheHoleValueRootIndex = 5;\n-  static const int kNullValueRootIndex = 6;\n-  static const int kTrueValueRootIndex = 7;\n-  static const int kFalseValueRootIndex = 8;\n-  static const int kEmptyStringRootIndex = 9;\n-\n-  static const int kNodeClassIdOffset = 1 * kApiPointerSize;\n-  static const int kNodeFlagsOffset = 1 * kApiPointerSize + 3;\n-  static const int kNodeStateMask = 0x7;\n-  static const int kNodeStateIsWeakValue = 2;\n-  static const int kNodeStateIsPendingValue = 3;\n-  static const int kNodeStateIsNearDeathValue = 4;\n-  static const int kNodeIsIndependentShift = 3;\n-  static const int kNodeIsActiveShift = 4;\n-\n-  static const int kFirstNonstringType = 0x80;\n-  static const int kOddballType = 0x83;\n-  static const int kForeignType = 0x87;\n-  static const int kJSSpecialApiObjectType = 0x410;\n-  static const int kJSApiObjectType = 0x420;\n-  static const int kJSObjectType = 0x421;\n-\n-  static const int kUndefinedOddballKind = 5;\n-  static const int kNullOddballKind = 3;\n-\n-  static const uint32_t kNumIsolateDataSlots = 4;\n-\n-  V8_EXPORT static void CheckInitializedImpl(v8::Isolate* isolate);\n-  V8_INLINE static void CheckInitialized(v8::Isolate* isolate) {\n-#ifdef V8_ENABLE_CHECKS\n-    CheckInitializedImpl(isolate);\n-#endif\n-  }\n-\n-  V8_INLINE static bool HasHeapObjectTag(const internal::Object* value) {\n-    return ((reinterpret_cast<intptr_t>(value) & kHeapObjectTagMask) ==\n-            kHeapObjectTag);\n-  }\n-\n-  V8_INLINE static int SmiValue(const internal::Object* value) {\n-    return PlatformSmiTagging::SmiToInt(value);\n-  }\n-\n-  V8_INLINE static internal::Object* IntToSmi(int value) {\n-    return PlatformSmiTagging::IntToSmi(value);\n-  }\n-\n-  V8_INLINE static constexpr bool IsValidSmi(intptr_t value) {\n-    return PlatformSmiTagging::IsValidSmi(value);\n-  }\n-\n-  V8_INLINE static int GetInstanceType(const internal::Object* obj) {\n-    typedef internal::Object O;\n-    O* map = ReadField<O*>(obj, kHeapObjectMapOffset);\n-    return ReadField<uint16_t>(map, kMapInstanceTypeOffset);\n-  }\n-\n-  V8_INLINE static int GetOddballKind(const internal::Object* obj) {\n-    typedef internal::Object O;\n-    return SmiValue(ReadField<O*>(obj, kOddballKindOffset));\n-  }\n-\n-  V8_INLINE static bool IsExternalTwoByteString(int instance_type) {\n-    int representation = (instance_type & kFullStringRepresentationMask);\n-    return representation == kExternalTwoByteRepresentationTag;\n-  }\n-\n-  V8_INLINE static uint8_t GetNodeFlag(internal::Object** obj, int shift) {\n-      uint8_t* addr = reinterpret_cast<uint8_t*>(obj) + kNodeFlagsOffset;\n-      return *addr & static_cast<uint8_t>(1U << shift);\n-  }\n-\n-  V8_INLINE static void UpdateNodeFlag(internal::Object** obj,\n-                                       bool value, int shift) {\n-      uint8_t* addr = reinterpret_cast<uint8_t*>(obj) + kNodeFlagsOffset;\n-      uint8_t mask = static_cast<uint8_t>(1U << shift);\n-      *addr = static_cast<uint8_t>((*addr & ~mask) | (value << shift));\n-  }\n-\n-  V8_INLINE static uint8_t GetNodeState(internal::Object** obj) {\n-    uint8_t* addr = reinterpret_cast<uint8_t*>(obj) + kNodeFlagsOffset;\n-    return *addr & kNodeStateMask;\n-  }\n-\n-  V8_INLINE static void UpdateNodeState(internal::Object** obj,\n-                                        uint8_t value) {\n-    uint8_t* addr = reinterpret_cast<uint8_t*>(obj) + kNodeFlagsOffset;\n-    *addr = static_cast<uint8_t>((*addr & ~kNodeStateMask) | value);\n-  }\n-\n-  V8_INLINE static void SetEmbedderData(v8::Isolate* isolate,\n-                                        uint32_t slot,\n-                                        void* data) {\n-    uint8_t* addr = reinterpret_cast<uint8_t*>(isolate) +\n-                    kIsolateEmbedderDataOffset + slot * kApiPointerSize;\n-    *reinterpret_cast<void**>(addr) = data;\n-  }\n-\n-  V8_INLINE static void* GetEmbedderData(const v8::Isolate* isolate,\n-                                         uint32_t slot) {\n-    const uint8_t* addr = reinterpret_cast<const uint8_t*>(isolate) +\n-        kIsolateEmbedderDataOffset + slot * kApiPointerSize;\n-    return *reinterpret_cast<void* const*>(addr);\n-  }\n-\n-  V8_INLINE static internal::Object** GetRoot(v8::Isolate* isolate,\n-                                              int index) {\n-    uint8_t* addr = reinterpret_cast<uint8_t*>(isolate) + kIsolateRootsOffset;\n-    return reinterpret_cast<internal::Object**>(addr + index * kApiPointerSize);\n-  }\n-\n-  template <typename T>\n-  V8_INLINE static T ReadField(const internal::Object* ptr, int offset) {\n-    const uint8_t* addr =\n-        reinterpret_cast<const uint8_t*>(ptr) + offset - kHeapObjectTag;\n-    return *reinterpret_cast<const T*>(addr);\n-  }\n-\n-  template <typename T>\n-  V8_INLINE static T ReadEmbedderData(const v8::Context* context, int index) {\n-    typedef internal::Object O;\n-    typedef internal::Internals I;\n-    O* ctx = *reinterpret_cast<O* const*>(context);\n-    int embedder_data_offset = I::kContextHeaderSize +\n-        (internal::kApiPointerSize * I::kContextEmbedderDataIndex);\n-    O* embedder_data = I::ReadField<O*>(ctx, embedder_data_offset);\n-    int value_offset =\n-        I::kFixedArrayHeaderSize + (internal::kApiPointerSize * index);\n-    return I::ReadField<T>(embedder_data, value_offset);\n-  }\n-};\n-\n-// Only perform cast check for types derived from v8::Data since\n-// other types do not implement the Cast method.\n-template <bool PerformCheck>\n-struct CastCheck {\n-  template <class T>\n-  static void Perform(T* data);\n-};\n-\n-template <>\n-template <class T>\n-void CastCheck<true>::Perform(T* data) {\n-  T::Cast(data);\n-}\n-\n-template <>\n-template <class T>\n-void CastCheck<false>::Perform(T* data) {}\n-\n-template <class T>\n-V8_INLINE void PerformCastCheck(T* data) {\n-  CastCheck<std::is_base_of<Data, T>::value>::Perform(data);\n-}\n-\n-}  // namespace internal\n-\n-\n template <class T>\n Local<T> Local<T>::New(Isolate* isolate, Local<T> that) {\n   return New(isolate, that.val_);\n@@ -9577,7 +9327,7 @@ Local<T> Local<T>::New(Isolate* isolate, const PersistentBase<T>& that) {\n \n template <class T>\n Local<T> Local<T>::New(Isolate* isolate, T* that) {\n-  if (that == NULL) return Local<T>();\n+  if (that == nullptr) return Local<T>();\n   T* that_ptr = that;\n   internal::Object** p = reinterpret_cast<internal::Object**>(that_ptr);\n   return Local<T>(reinterpret_cast<T*>(HandleScope::CreateHandle(\n@@ -9621,7 +9371,7 @@ void* WeakCallbackInfo<T>::GetInternalField(int index) const {\n \n template <class T>\n T* PersistentBase<T>::New(Isolate* isolate, T* that) {\n-  if (that == NULL) return NULL;\n+  if (that == nullptr) return nullptr;\n   internal::Object** p = reinterpret_cast<internal::Object**>(that);\n   return reinterpret_cast<T*>(\n       V8::GlobalizeReference(reinterpret_cast<internal::Isolate*>(isolate),\n@@ -9672,7 +9422,7 @@ template <class T>\n void PersistentBase<T>::Reset() {\n   if (this->IsEmpty()) return;\n   V8::DisposeGlobal(reinterpret_cast<internal::Object**>(this->val_));\n-  val_ = 0;\n+  val_ = nullptr;\n }\n \n \n@@ -10239,30 +9989,6 @@ template <class T> Value* Value::Cast(T* value) {\n }\n \n \n-Local<Boolean> Value::ToBoolean() const {\n-  return ToBoolean(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(Local<Boolean>());\n-}\n-\n-\n-Local<String> Value::ToString() const {\n-  return ToString(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(Local<String>());\n-}\n-\n-\n-Local<Object> Value::ToObject() const {\n-  return ToObject(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(Local<Object>());\n-}\n-\n-\n-Local<Integer> Value::ToInteger() const {\n-  return ToInteger(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(Local<Integer>());\n-}\n-\n-\n Boolean* Boolean::Cast(v8::Value* value) {\n #ifdef V8_ENABLE_CHECKS\n   CheckCast(value);\n@@ -10711,10 +10437,10 @@ int64_t Isolate::AdjustAmountOfExternalAllocatedMemory(\n   }\n \n   if (change_in_bytes < 0) {\n-    *external_memory_limit += change_in_bytes;\n-  }\n-\n-  if (change_in_bytes > 0 && amount > *external_memory_limit) {\n+    const int64_t lower_limit = *external_memory_limit + change_in_bytes;\n+    if (lower_limit > I::kExternalAllocationSoftLimit)\n+      *external_memory_limit = lower_limit;\n+  } else if (change_in_bytes > 0 && amount > *external_memory_limit) {\n     ReportExternalAllocationLimitReached();\n   }\n   return *external_memory;"
        },
        {
            "sha": "93c4629825b255e7e73657a38f47d715b3c5b603",
            "filename": "deps/v8/include/v8config.h",
            "status": "modified",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8config.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finclude%2Fv8config.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8config.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -420,6 +420,36 @@ namespace v8 { template <typename T> class AlignOfHelper { char c; T t; }; }\n #define V8_WARN_UNUSED_RESULT /* NOT SUPPORTED */\n #endif\n \n+#ifdef V8_OS_WIN\n+\n+// Setup for Windows DLL export/import. When building the V8 DLL the\n+// BUILDING_V8_SHARED needs to be defined. When building a program which uses\n+// the V8 DLL USING_V8_SHARED needs to be defined. When either building the V8\n+// static library or building a program which uses the V8 static library neither\n+// BUILDING_V8_SHARED nor USING_V8_SHARED should be defined.\n+#ifdef BUILDING_V8_SHARED\n+# define V8_EXPORT __declspec(dllexport)\n+#elif USING_V8_SHARED\n+# define V8_EXPORT __declspec(dllimport)\n+#else\n+# define V8_EXPORT\n+#endif  // BUILDING_V8_SHARED\n+\n+#else  // V8_OS_WIN\n+\n+// Setup for Linux shared library export.\n+#if V8_HAS_ATTRIBUTE_VISIBILITY\n+# ifdef BUILDING_V8_SHARED\n+#  define V8_EXPORT __attribute__ ((visibility(\"default\")))\n+# else\n+#  define V8_EXPORT\n+# endif\n+#else\n+# define V8_EXPORT\n+#endif\n+\n+#endif  // V8_OS_WIN\n+\n // clang-format on\n \n #endif  // V8CONFIG_H_"
        },
        {
            "sha": "53ea0cdd44182de1049919cdf97bc5e041c3c181",
            "filename": "deps/v8/infra/config/cq.cfg",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -108,6 +108,23 @@ verifiers {\n         triggered_by: \"v8_win_rel_ng\"\n       }\n     }\n+    # TODO(machenbach): Remove after testing in practice and migrate to\n+    # PRESUBMIT.py scripts.\n+    buckets {\n+      name: \"luci.chromium.try\"\n+      builders {\n+        name: \"cast_shell_android\"\n+        experiment_percentage: 20\n+      }\n+      builders {\n+        name: \"cast_shell_linux\"\n+        experiment_percentage: 20\n+      }\n+      builders {\n+        name: \"linux-chromeos-rel\"\n+        experiment_percentage: 20\n+      }\n+    }\n   }\n }\n "
        },
        {
            "sha": "124524c552f3c38d6a6dd2a3ab68541ce0403045",
            "filename": "deps/v8/infra/mb/mb_config.pyl",
            "status": "modified",
            "additions": 43,
            "deletions": 78,
            "changes": 121,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -27,24 +27,12 @@\n       'mips64el.debug': 'default_debug_mips64el',\n       'mips64el.optdebug': 'default_optdebug_mips64el',\n       'mips64el.release': 'default_release_mips64el',\n-      'ppc.debug': 'default_debug_ppc',\n-      'ppc.optdebug': 'default_optdebug_ppc',\n-      'ppc.release': 'default_release_ppc',\n-      'ppc.debug.sim': 'default_debug_ppc_sim',\n-      'ppc.optdebug.sim': 'default_optdebug_ppc_sim',\n-      'ppc.release.sim': 'default_release_ppc_sim',\n       'ppc64.debug': 'default_debug_ppc64',\n       'ppc64.optdebug': 'default_optdebug_ppc64',\n       'ppc64.release': 'default_release_ppc64',\n       'ppc64.debug.sim': 'default_debug_ppc64_sim',\n       'ppc64.optdebug.sim': 'default_optdebug_ppc64_sim',\n       'ppc64.release.sim': 'default_release_ppc64_sim',\n-      's390.debug': 'default_debug_s390',\n-      's390.optdebug': 'default_optdebug_s390',\n-      's390.release': 'default_release_s390',\n-      's390.debug.sim': 'default_debug_s390_sim',\n-      's390.optdebug.sim': 'default_optdebug_s390_sim',\n-      's390.release.sim': 'default_release_s390_sim',\n       's390x.debug': 'default_debug_s390x',\n       's390x.optdebug': 'default_optdebug_s390x',\n       's390x.release': 'default_release_s390x',\n@@ -54,6 +42,7 @@\n       'x64.debug': 'default_debug_x64',\n       'x64.optdebug': 'default_optdebug_x64',\n       'x64.release': 'default_release_x64',\n+      'x64.release.sample': 'release_x64_sample',\n     },\n     'client.dynamorio': {\n       'linux-v8-dr': 'release_x64',\n@@ -102,6 +91,8 @@\n       'V8 Linux gcc 4.8': 'release_x86_gcc',\n       'V8 Linux64 gcc 4.8 - debug': 'debug_x64_gcc',\n       # FYI.\n+      'V8 Linux - embedded builtins': 'release_x86_embedded_builtins',\n+      'V8 Linux - embedded builtins - debug': 'debug_x86_embedded_builtins',\n       'V8 Fuchsia': 'release_x64_fuchsia',\n       'V8 Fuchsia - debug': 'debug_x64_fuchsia',\n       'V8 Linux64 - cfi': 'release_x64_cfi',\n@@ -138,8 +129,6 @@\n           'debug_simulate_arm64_asan_edge',\n       'V8 Clusterfuzz Linux ASAN arm - debug builder':\n           'debug_simulate_arm_asan_edge',\n-      'V8 Clusterfuzz Linux ASAN mipsel - debug builder':\n-          'debug_simulate_mipsel_asan_edge',\n       'V8 Clusterfuzz Linux64 CFI - release builder':\n           'release_x64_cfi_clusterfuzz',\n       'V8 Clusterfuzz Linux MSAN no origins':\n@@ -169,11 +158,8 @@\n       'V8 Mips - builder': 'release_mips_no_snap_no_i18n',\n       'V8 Linux - mipsel - sim - builder': 'release_simulate_mipsel',\n       'V8 Linux - mips64el - sim - builder': 'release_simulate_mips64el',\n-      # PPC.\n-      'V8 Linux - ppc - sim': 'release_simulate_ppc',\n+      # IBM.\n       'V8 Linux - ppc64 - sim': 'release_simulate_ppc64',\n-      # S390.\n-      'V8 Linux - s390 - sim': 'release_simulate_s390',\n       'V8 Linux - s390x - sim': 'release_simulate_s390x',\n     },\n     'client.v8.branches': {\n@@ -193,12 +179,8 @@\n       'V8 mips64el - sim - stable branch': 'release_simulate_mips64el',\n       'V8 mipsel - sim - beta branch': 'release_simulate_mipsel',\n       'V8 mipsel - sim - stable branch': 'release_simulate_mipsel',\n-      'V8 ppc - sim - beta branch': 'release_simulate_ppc',\n-      'V8 ppc - sim - stable branch': 'release_simulate_ppc',\n       'V8 ppc64 - sim - beta branch': 'release_simulate_ppc64',\n       'V8 ppc64 - sim - stable branch': 'release_simulate_ppc64',\n-      'V8 s390 - sim - beta branch': 'release_simulate_s390',\n-      'V8 s390 - sim - stable branch': 'release_simulate_s390',\n       'V8 s390x - sim - beta branch': 'release_simulate_s390x',\n       'V8 s390x - sim - stable branch': 'release_simulate_s390x',\n     },\n@@ -207,7 +189,9 @@\n       'v8_android_arm64_compile_dbg': 'debug_android_arm64',\n       'v8_android_arm64_n5x_rel_ng': 'release_android_arm64',\n       'v8_fuchsia_rel_ng': 'release_x64_fuchsia_trybot',\n+      'v8_linux_embedded_builtins_rel_ng': 'release_x86_embedded_builtins_trybot',\n       'v8_linux_rel_ng': 'release_x86_gcmole_trybot',\n+      'v8_linux_optional_rel_ng': 'release_x86_trybot',\n       'v8_linux_verify_csa_rel_ng': 'release_x86_verify_csa',\n       'v8_linux_nodcheck_rel_ng': 'release_x86_minimal_symbols',\n       'v8_linux_dbg_ng': 'debug_x86_trybot',\n@@ -218,6 +202,7 @@\n       'v8_linux_gcc_compile_rel': 'release_x86_gcc_minimal_symbols',\n       'v8_linux_gcc_rel': 'release_x86_gcc_minimal_symbols',\n       'v8_linux_shared_compile_rel': 'release_x86_shared_verify_heap',\n+      'v8_linux64_compile_rel_xg': 'release_x64_test_features_trybot',\n       'v8_linux64_dbg_ng': 'debug_x64_trybot',\n       'v8_linux64_gcc_compile_dbg': 'debug_x64_gcc',\n       'v8_linux64_header_includes_dbg': 'debug_x64_header_includes',\n@@ -235,6 +220,7 @@\n       'v8_linux64_tsan_isolates_rel_ng':\n           'release_x64_tsan_minimal_symbols',\n       'v8_linux64_ubsan_rel_ng': 'release_x64_ubsan_vptr_minimal_symbols',\n+      'v8_odroid_arm_rel_ng': 'release_arm',\n       # TODO(machenbach): Remove after switching to x64 on infra side.\n       'v8_win_dbg': 'debug_x86_trybot',\n       'v8_win_compile_dbg': 'debug_x86_trybot',\n@@ -280,7 +266,7 @@\n     'default_optdebug_android_arm': [\n       'debug', 'arm', 'android', 'v8_enable_slow_dchecks' ],\n     'default_release_android_arm': [\n-      'release', 'arm', 'android'],\n+      'release', 'arm', 'android', 'android_strip_outputs'],\n     'default_debug_arm64': [\n       'debug', 'simulate_arm64', 'v8_enable_slow_dchecks', 'v8_full_debug'],\n     'default_optdebug_arm64': [\n@@ -299,18 +285,6 @@\n       'debug', 'simulate_mips64el', 'v8_enable_slow_dchecks'],\n     'default_release_mips64el': [\n       'release', 'simulate_mips64el'],\n-    'default_debug_ppc': [\n-      'debug', 'ppc', 'v8_enable_slow_dchecks', 'v8_full_debug'],\n-    'default_optdebug_ppc': [\n-      'debug', 'ppc', 'v8_enable_slow_dchecks'],\n-    'default_release_ppc': [\n-      'release', 'ppc'],\n-    'default_debug_ppc_sim': [\n-      'debug', 'simulate_ppc', 'v8_enable_slow_dchecks', 'v8_full_debug'],\n-    'default_optdebug_ppc_sim': [\n-      'debug', 'simulate_ppc', 'v8_enable_slow_dchecks'],\n-    'default_release_ppc_sim': [\n-      'release', 'simulate_ppc'],\n     'default_debug_ppc64': [\n       'debug', 'ppc64', 'gcc', 'v8_enable_slow_dchecks', 'v8_full_debug'],\n     'default_optdebug_ppc64': [\n@@ -323,18 +297,6 @@\n       'debug', 'simulate_ppc64', 'v8_enable_slow_dchecks'],\n     'default_release_ppc64_sim': [\n       'release', 'simulate_ppc64'],\n-    'default_debug_s390': [\n-      'debug', 's390', 'v8_enable_slow_dchecks', 'v8_full_debug'],\n-    'default_optdebug_s390': [\n-      'debug', 's390', 'v8_enable_slow_dchecks'],\n-    'default_release_s390': [\n-      'release', 's390'],\n-    'default_debug_s390_sim': [\n-      'debug', 'simulate_s390', 'v8_enable_slow_dchecks', 'v8_full_debug'],\n-    'default_optdebug_s390_sim': [\n-      'debug', 'simulate_s390', 'v8_enable_slow_dchecks'],\n-    'default_release_s390_sim': [\n-      'release', 'simulate_s390'],\n     'default_debug_s390x': [\n       'debug', 's390x', 'v8_enable_slow_dchecks', 'v8_full_debug'],\n     'default_optdebug_s390x': [\n@@ -353,6 +315,8 @@\n       'debug', 'x64', 'v8_enable_slow_dchecks'],\n     'default_release_x64': [\n       'release', 'x64'],\n+    'release_x64_sample': [\n+      'release', 'x64', 'sample'],\n     'default_debug_x86': [\n       'debug', 'x86', 'v8_enable_slow_dchecks', 'v8_full_debug'],\n     'default_optdebug_x86': [\n@@ -373,8 +337,6 @@\n     'debug_simulate_arm64_no_snap': [\n       'debug', 'simulate_arm64', 'shared', 'goma', 'v8_optimized_debug',\n       'v8_snapshot_none'],\n-    'debug_simulate_mipsel_asan_edge': [\n-      'debug_bot', 'simulate_mipsel', 'asan', 'edge'],\n \n     # Release configs for simulators.\n     'release_simulate_arm': [\n@@ -397,12 +359,8 @@\n       'release_bot', 'simulate_mipsel'],\n     'release_simulate_mips64el': [\n       'release_bot', 'simulate_mips64el'],\n-    'release_simulate_ppc': [\n-      'release_bot', 'simulate_ppc'],\n     'release_simulate_ppc64': [\n       'release_bot', 'simulate_ppc64'],\n-    'release_simulate_s390': [\n-      'release_bot', 'simulate_s390'],\n     'release_simulate_s390x': [\n       'release_bot', 'simulate_s390x'],\n \n@@ -416,9 +374,11 @@\n     'release_arm': [\n       'release_bot', 'arm', 'hard_float'],\n     'release_android_arm': [\n-      'release_bot', 'arm', 'android', 'minimal_symbols'],\n+      'release_bot', 'arm', 'android', 'minimal_symbols',\n+      'android_strip_outputs'],\n     'release_android_arm64': [\n-      'release_bot', 'arm64', 'android', 'minimal_symbols'],\n+      'release_bot', 'arm64', 'android', 'minimal_symbols',\n+      'android_strip_outputs'],\n \n     # Release configs for x64.\n     'release_x64': [\n@@ -519,6 +479,9 @@\n     # Debug configs for x86.\n     'debug_x86': [\n       'debug_bot', 'x86'],\n+    'debug_x86_embedded_builtins': [\n+      'debug_bot', 'x86', 'v8_enable_embedded_builtins',\n+      'v8_no_untrusted_code_mitigations'],\n     'debug_x86_minimal_symbols': [\n       'debug_bot', 'x86', 'minimal_symbols'],\n     'debug_x86_no_i18n': [\n@@ -538,6 +501,12 @@\n     # Release configs for x86.\n     'release_x86': [\n       'release_bot', 'x86'],\n+    'release_x86_embedded_builtins': [\n+      'release_bot', 'x86', 'v8_enable_embedded_builtins',\n+      'v8_no_untrusted_code_mitigations'],\n+    'release_x86_embedded_builtins_trybot': [\n+      'release_trybot', 'x86', 'v8_enable_embedded_builtins',\n+      'v8_no_untrusted_code_mitigations'],\n     'release_x86_gcc': [\n       'release_bot', 'x86', 'gcc'],\n     'release_x86_gcc_minimal_symbols': [\n@@ -580,6 +549,10 @@\n       'gn_args': 'target_os=\"android\" v8_android_log_stdout=true',\n     },\n \n+    'android_strip_outputs': {\n+      'gn_args': 'android_unstripped_runtime_outputs=false',\n+    },\n+\n     'arm': {\n       'gn_args': 'target_cpu=\"arm\"',\n     },\n@@ -625,14 +598,10 @@\n       'gn_args': 'is_debug=true v8_enable_backtrace=true',\n     },\n \n-    'v8_use_multi_snapshots': {\n-      'gn_args': 'v8_use_multi_snapshots=true',\n-    },\n-\n     'debug_bot': {\n       'mixins': [\n         'debug', 'shared', 'goma', 'v8_enable_slow_dchecks',\n-        'v8_use_multi_snapshots', 'v8_optimized_debug'],\n+        'v8_optimized_debug'],\n     },\n \n     'debug_trybot': {\n@@ -715,11 +684,11 @@\n     },\n \n     'release': {\n-      'gn_args': 'is_debug=false android_unstripped_runtime_outputs=false',\n+      'gn_args': 'is_debug=false',\n     },\n \n     'release_bot': {\n-      'mixins': ['release', 'static', 'goma', 'v8_use_multi_snapshots'],\n+      'mixins': ['release', 'static', 'goma'],\n     },\n \n     'release_trybot': {\n@@ -747,18 +716,10 @@\n       'gn_args': 'target_cpu=\"x64\" v8_target_cpu=\"mips64el\"',\n     },\n \n-    'simulate_ppc': {\n-      'gn_args': 'target_cpu=\"x86\" v8_target_cpu=\"ppc\"',\n-    },\n-\n     'simulate_ppc64': {\n       'gn_args': 'target_cpu=\"x64\" v8_target_cpu=\"ppc64\"',\n     },\n \n-    'simulate_s390': {\n-      'gn_args': 'target_cpu=\"x86\" v8_target_cpu=\"s390\"',\n-    },\n-\n     'simulate_s390x': {\n       'gn_args': 'target_cpu=\"x64\" v8_target_cpu=\"s390x\"',\n     },\n@@ -808,6 +769,10 @@\n       'gn_args': 'v8_correctness_fuzzer=true v8_multi_arch_build=true',\n     },\n \n+    'v8_enable_embedded_builtins': {\n+      'gn_args': 'v8_enable_embedded_builtins=true',\n+    },\n+\n     'v8_enable_slow_dchecks': {\n       'gn_args': 'v8_enable_slow_dchecks=true',\n     },\n@@ -853,6 +818,10 @@\n       'gn_args': 'v8_use_snapshot=false',\n     },\n \n+    'v8_no_untrusted_code_mitigations': {\n+      'gn_args': 'v8_untrusted_code_mitigations=false',\n+    },\n+\n     'v8_verify_heap': {\n       'gn_args': 'v8_enable_verify_heap=true',\n     },\n@@ -861,18 +830,10 @@\n       'gn_args': 'v8_enable_verify_csa=true',\n     },\n \n-    's390': {\n-      'gn_args': 'target_cpu=\"s390x\" v8_target_cpu=\"s390\"',\n-    },\n-\n     's390x': {\n       'gn_args': 'target_cpu=\"s390x\" v8_target_cpu=\"s390x\"',\n     },\n \n-    'ppc': {\n-      'gn_args': 'target_cpu=\"ppc\"',\n-    },\n-\n     'ppc64': {\n       'gn_args': 'target_cpu=\"ppc64\" use_custom_libcxx=false',\n     },\n@@ -885,5 +846,9 @@\n       'gn_args': 'target_cpu=\"x86\"',\n     },\n \n+    'sample': {\n+      'gn_args': 'v8_monolithic=true is_component_build=false '\n+                 'v8_use_external_startup_data=false use_custom_libcxx=false',\n+    },\n   },\n }"
        },
        {
            "sha": "99873803c99fc1be90b03f91882bac919802cce5",
            "filename": "deps/v8/src/DEPS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2FDEPS",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2FDEPS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2FDEPS?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -13,6 +13,7 @@ include_rules = [\n   \"+src/heap/heap.h\",\n   \"+src/heap/heap-inl.h\",\n   \"+src/heap/heap-write-barrier-inl.h\",\n+  \"+src/heap/heap-write-barrier.h\",\n   \"-src/inspector\",\n   \"-src/interpreter\",\n   \"+src/interpreter/bytecode-array-accessor.h\",\n@@ -30,6 +31,7 @@ include_rules = [\n   \"+testing/gtest/include/gtest/gtest_prod.h\",\n   \"-src/libplatform\",\n   \"-include/libplatform\",\n+  \"+builtins-generated\",\n   \"+torque-generated\"\n ]\n "
        },
        {
            "sha": "226178394db1bff97069fff8786727bc10269c23",
            "filename": "deps/v8/src/accessors.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Faccessors.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Faccessors.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faccessors.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -31,7 +31,8 @@ Handle<AccessorInfo> Accessors::MakeAccessor(\n   info->set_is_special_data_property(true);\n   info->set_is_sloppy(false);\n   info->set_replace_on_access(false);\n-  info->set_has_no_side_effect(false);\n+  info->set_getter_side_effect_type(SideEffectType::kHasSideEffect);\n+  info->set_setter_side_effect_type(SideEffectType::kHasSideEffect);\n   name = factory->InternalizeName(name);\n   info->set_name(*name);\n   Handle<Object> get = v8::FromCData(isolate, getter);\n@@ -70,7 +71,7 @@ bool Accessors::IsJSObjectFieldAccessor(Isolate* isolate, Handle<Map> map,\n     default:\n       if (map->instance_type() < FIRST_NONSTRING_TYPE) {\n         return CheckForName(isolate, name, isolate->factory()->length_string(),\n-                            String::kLengthOffset, FieldIndex::kTagged, index);\n+                            String::kLengthOffset, FieldIndex::kWord32, index);\n       }\n \n       return false;"
        },
        {
            "sha": "15c4773ec3cc3de8b34089b32f12c6c8eead36bf",
            "filename": "deps/v8/src/accessors.h",
            "status": "modified",
            "additions": 29,
            "deletions": 28,
            "changes": 57,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Faccessors.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Faccessors.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faccessors.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -22,27 +22,28 @@ class JavaScriptFrame;\n \n // The list of accessor descriptors. This is a second-order macro\n // taking a macro to be applied to all accessor descriptor names.\n-#define ACCESSOR_INFO_LIST(V)                                       \\\n-  V(arguments_iterator, ArgumentsIterator)                          \\\n-  V(array_length, ArrayLength)                                      \\\n-  V(bound_function_length, BoundFunctionLength)                     \\\n-  V(bound_function_name, BoundFunctionName)                         \\\n-  V(error_stack, ErrorStack)                                        \\\n-  V(function_arguments, FunctionArguments)                          \\\n-  V(function_caller, FunctionCaller)                                \\\n-  V(function_name, FunctionName)                                    \\\n-  V(function_length, FunctionLength)                                \\\n-  V(function_prototype, FunctionPrototype)                          \\\n-  V(string_length, StringLength)\n-\n-#define SIDE_EFFECT_FREE_ACCESSOR_INFO_LIST(V) \\\n-  V(ArrayLength)                               \\\n-  V(BoundFunctionLength)                       \\\n-  V(BoundFunctionName)                         \\\n-  V(FunctionName)                              \\\n-  V(FunctionLength)                            \\\n-  V(FunctionPrototype)                         \\\n-  V(StringLength)\n+// V(accessor_name, AccessorName, GetterSideEffectType, SetterSideEffectType)\n+#define ACCESSOR_INFO_LIST_GENERATOR(V, _)                                    \\\n+  V(_, arguments_iterator, ArgumentsIterator, kHasNoSideEffect,               \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, array_length, ArrayLength, kHasNoSideEffect, kHasSideEffectToReceiver) \\\n+  V(_, bound_function_length, BoundFunctionLength, kHasNoSideEffect,          \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, bound_function_name, BoundFunctionName, kHasNoSideEffect,              \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, error_stack, ErrorStack, kHasSideEffectToReceiver,                     \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, function_arguments, FunctionArguments, kHasNoSideEffect,               \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, function_caller, FunctionCaller, kHasNoSideEffect,                     \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, function_name, FunctionName, kHasNoSideEffect,                         \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, function_length, FunctionLength, kHasNoSideEffect,                     \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, function_prototype, FunctionPrototype, kHasNoSideEffect,               \\\n+    kHasSideEffectToReceiver)                                                 \\\n+  V(_, string_length, StringLength, kHasNoSideEffect, kHasSideEffectToReceiver)\n \n #define ACCESSOR_SETTER_LIST(V) \\\n   V(ArrayLengthSetter)          \\\n@@ -55,11 +56,11 @@ class JavaScriptFrame;\n \n class Accessors : public AllStatic {\n  public:\n-#define ACCESSOR_GETTER_DECLARATION(accessor_name, AccessorName) \\\n-  static void AccessorName##Getter(                              \\\n-      v8::Local<v8::Name> name,                                  \\\n+#define ACCESSOR_GETTER_DECLARATION(_, accessor_name, AccessorName, ...) \\\n+  static void AccessorName##Getter(                                      \\\n+      v8::Local<v8::Name> name,                                          \\\n       const v8::PropertyCallbackInfo<v8::Value>& info);\n-  ACCESSOR_INFO_LIST(ACCESSOR_GETTER_DECLARATION)\n+  ACCESSOR_INFO_LIST_GENERATOR(ACCESSOR_GETTER_DECLARATION, /* not used */)\n #undef ACCESSOR_GETTER_DECLARATION\n \n #define ACCESSOR_SETTER_DECLARATION(accessor_name)          \\\n@@ -71,7 +72,7 @@ class Accessors : public AllStatic {\n \n   static constexpr int kAccessorInfoCount =\n #define COUNT_ACCESSOR(...) +1\n-      ACCESSOR_INFO_LIST(COUNT_ACCESSOR);\n+      ACCESSOR_INFO_LIST_GENERATOR(COUNT_ACCESSOR, /* not used */);\n #undef COUNT_ACCESSOR\n \n   static constexpr int kAccessorSetterCount =\n@@ -118,9 +119,9 @@ class Accessors : public AllStatic {\n       AccessorNameBooleanSetterCallback setter);\n \n  private:\n-#define ACCESSOR_INFO_DECLARATION(accessor_name, AccessorName) \\\n+#define ACCESSOR_INFO_DECLARATION(_, accessor_name, AccessorName, ...) \\\n   static Handle<AccessorInfo> Make##AccessorName##Info(Isolate* isolate);\n-  ACCESSOR_INFO_LIST(ACCESSOR_INFO_DECLARATION)\n+  ACCESSOR_INFO_LIST_GENERATOR(ACCESSOR_INFO_DECLARATION, /* not used */)\n #undef ACCESSOR_INFO_DECLARATION\n \n   friend class Heap;"
        },
        {
            "sha": "ad71a25a99de0cc221be5e55cce60f9918740639",
            "filename": "deps/v8/src/address-map.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Faddress-map.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Faddress-map.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faddress-map.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -14,8 +14,8 @@ RootIndexMap::RootIndexMap(Isolate* isolate) {\n   map_ = isolate->root_index_map();\n   if (map_ != nullptr) return;\n   map_ = new HeapObjectToIndexHashMap();\n-  for (uint32_t i = 0; i < Heap::kStrongRootListLength; i++) {\n-    Heap::RootListIndex root_index = static_cast<Heap::RootListIndex>(i);\n+  for (RootIndex root_index = RootIndex::kFirstStrongRoot;\n+       root_index <= RootIndex::kLastStrongRoot; ++root_index) {\n     Object* root = isolate->heap()->root(root_index);\n     if (!root->IsHeapObject()) continue;\n     // Omit root entries that can be written after initialization. They must\n@@ -25,11 +25,12 @@ RootIndexMap::RootIndexMap(Isolate* isolate) {\n     if (isolate->heap()->RootCanBeTreatedAsConstant(root_index)) {\n       HeapObject* heap_object = HeapObject::cast(root);\n       Maybe<uint32_t> maybe_index = map_->Get(heap_object);\n+      uint32_t index = static_cast<uint32_t>(root_index);\n       if (maybe_index.IsJust()) {\n         // Some are initialized to a previous value in the root list.\n-        DCHECK_LT(maybe_index.FromJust(), i);\n+        DCHECK_LT(maybe_index.FromJust(), index);\n       } else {\n-        map_->Set(heap_object, i);\n+        map_->Set(heap_object, index);\n       }\n     } else {\n       // Immortal immovable root objects are constant and allocated on the first"
        },
        {
            "sha": "f7a1cc2ad9aabdd8fbf429d2c149a2b92c1119b3",
            "filename": "deps/v8/src/address-map.h",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Faddress-map.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Faddress-map.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faddress-map.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -56,11 +56,14 @@ class RootIndexMap {\n  public:\n   explicit RootIndexMap(Isolate* isolate);\n \n-  static const int kInvalidRootIndex = -1;\n-\n-  int Lookup(HeapObject* obj) {\n+  // Returns true on successful lookup and sets *|out_root_list|.\n+  bool Lookup(HeapObject* obj, RootIndex* out_root_list) {\n     Maybe<uint32_t> maybe_index = map_->Get(obj);\n-    return maybe_index.IsJust() ? maybe_index.FromJust() : kInvalidRootIndex;\n+    if (maybe_index.IsJust()) {\n+      *out_root_list = static_cast<RootIndex>(maybe_index.FromJust());\n+      return true;\n+    }\n+    return false;\n   }\n \n  private:"
        },
        {
            "sha": "e114bb3885c202106f263484e80883d19d62e49f",
            "filename": "deps/v8/src/allocation-site-scopes-inl.h",
            "status": "added",
            "additions": 52,
            "deletions": 0,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fallocation-site-scopes-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fallocation-site-scopes-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fallocation-site-scopes-inl.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,52 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_ALLOCATION_SITE_SCOPES_INL_H_\n+#define V8_ALLOCATION_SITE_SCOPES_INL_H_\n+\n+#include \"src/allocation-site-scopes.h\"\n+\n+#include \"src/objects/allocation-site-inl.h\"\n+\n+namespace v8 {\n+namespace internal {\n+\n+Handle<AllocationSite> AllocationSiteUsageContext::EnterNewScope() {\n+  if (top().is_null()) {\n+    InitializeTraversal(top_site_);\n+  } else {\n+    // Advance current site\n+    Object* nested_site = current()->nested_site();\n+    // Something is wrong if we advance to the end of the list here.\n+    update_current_site(AllocationSite::cast(nested_site));\n+  }\n+  return Handle<AllocationSite>(*current(), isolate());\n+}\n+\n+void AllocationSiteUsageContext::ExitScope(Handle<AllocationSite> scope_site,\n+                                           Handle<JSObject> object) {\n+  // This assert ensures that we are pointing at the right sub-object in a\n+  // recursive walk of a nested literal.\n+  DCHECK(object.is_null() || *object == scope_site->boilerplate());\n+}\n+\n+bool AllocationSiteUsageContext::ShouldCreateMemento(Handle<JSObject> object) {\n+  if (activated_ && AllocationSite::CanTrack(object->map()->instance_type())) {\n+    if (FLAG_allocation_site_pretenuring ||\n+        AllocationSite::ShouldTrack(object->GetElementsKind())) {\n+      if (FLAG_trace_creation_allocation_sites) {\n+        PrintF(\"*** Creating Memento for %s %p\\n\",\n+               object->IsJSArray() ? \"JSArray\" : \"JSObject\",\n+               static_cast<void*>(*object));\n+      }\n+      return true;\n+    }\n+  }\n+  return false;\n+}\n+\n+}  // namespace internal\n+}  // namespace v8\n+\n+#endif  // V8_ALLOCATION_SITE_SCOPES_INL_H_"
        },
        {
            "sha": "0a729948db2f596d9d57c8357d102091bf6fb083",
            "filename": "deps/v8/src/allocation-site-scopes.h",
            "status": "modified",
            "additions": 3,
            "deletions": 31,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fallocation-site-scopes.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fallocation-site-scopes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fallocation-site-scopes.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -56,40 +56,12 @@ class AllocationSiteUsageContext : public AllocationSiteContext {\n         top_site_(site),\n         activated_(activated) { }\n \n-  inline Handle<AllocationSite> EnterNewScope() {\n-    if (top().is_null()) {\n-      InitializeTraversal(top_site_);\n-    } else {\n-      // Advance current site\n-      Object* nested_site = current()->nested_site();\n-      // Something is wrong if we advance to the end of the list here.\n-      update_current_site(AllocationSite::cast(nested_site));\n-    }\n-    return Handle<AllocationSite>(*current(), isolate());\n-  }\n+  inline Handle<AllocationSite> EnterNewScope();\n \n   inline void ExitScope(Handle<AllocationSite> scope_site,\n-                        Handle<JSObject> object) {\n-    // This assert ensures that we are pointing at the right sub-object in a\n-    // recursive walk of a nested literal.\n-    DCHECK(object.is_null() || *object == scope_site->boilerplate());\n-  }\n+                        Handle<JSObject> object);\n \n-  bool ShouldCreateMemento(Handle<JSObject> object) {\n-    if (activated_ &&\n-        AllocationSite::CanTrack(object->map()->instance_type())) {\n-      if (FLAG_allocation_site_pretenuring ||\n-          AllocationSite::ShouldTrack(object->GetElementsKind())) {\n-        if (FLAG_trace_creation_allocation_sites) {\n-          PrintF(\"*** Creating Memento for %s %p\\n\",\n-                 object->IsJSArray() ? \"JSArray\" : \"JSObject\",\n-                 static_cast<void*>(*object));\n-        }\n-        return true;\n-      }\n-    }\n-    return false;\n-  }\n+  inline bool ShouldCreateMemento(Handle<JSObject> object);\n \n   static const bool kCopying = true;\n "
        },
        {
            "sha": "6327a9c965abe7177ffc80d18469a6c1877e2bf4",
            "filename": "deps/v8/src/allocation.cc",
            "status": "modified",
            "additions": 75,
            "deletions": 94,
            "changes": 169,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fallocation.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fallocation.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fallocation.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -8,6 +8,7 @@\n #include \"src/base/bits.h\"\n #include \"src/base/lazy-instance.h\"\n #include \"src/base/logging.h\"\n+#include \"src/base/lsan-page-allocator.h\"\n #include \"src/base/page-allocator.h\"\n #include \"src/base/platform/platform.h\"\n #include \"src/utils.h\"\n@@ -17,10 +18,6 @@\n #include <malloc.h>  // NOLINT\n #endif\n \n-#if defined(LEAK_SANITIZER)\n-#include <sanitizer/lsan_interface.h>\n-#endif\n-\n namespace v8 {\n namespace internal {\n \n@@ -51,21 +48,29 @@ struct InitializePageAllocator {\n       static v8::base::PageAllocator default_allocator;\n       page_allocator = &default_allocator;\n     }\n+#if defined(LEAK_SANITIZER)\n+    {\n+      static v8::base::LsanPageAllocator lsan_allocator(page_allocator);\n+      page_allocator = &lsan_allocator;\n+    }\n+#endif\n     *page_allocator_ptr = page_allocator;\n   }\n };\n \n static base::LazyInstance<v8::PageAllocator*, InitializePageAllocator>::type\n     page_allocator = LAZY_INSTANCE_INITIALIZER;\n-\n-v8::PageAllocator* GetPageAllocator() { return page_allocator.Get(); }\n-\n // We will attempt allocation this many times. After each failure, we call\n // OnCriticalMemoryPressure to try to free some memory.\n const int kAllocationTries = 2;\n \n }  // namespace\n \n+v8::PageAllocator* GetPlatformPageAllocator() {\n+  DCHECK_NOT_NULL(page_allocator.Get());\n+  return page_allocator.Get();\n+}\n+\n void* Malloced::New(size_t size) {\n   void* result = AllocWithRetry(size);\n   if (result == nullptr) {\n@@ -131,68 +136,62 @@ void AlignedFree(void *ptr) {\n #endif\n }\n \n-size_t AllocatePageSize() { return GetPageAllocator()->AllocatePageSize(); }\n+size_t AllocatePageSize() {\n+  return GetPlatformPageAllocator()->AllocatePageSize();\n+}\n \n-size_t CommitPageSize() { return GetPageAllocator()->CommitPageSize(); }\n+size_t CommitPageSize() { return GetPlatformPageAllocator()->CommitPageSize(); }\n \n void SetRandomMmapSeed(int64_t seed) {\n-  GetPageAllocator()->SetRandomMmapSeed(seed);\n+  GetPlatformPageAllocator()->SetRandomMmapSeed(seed);\n }\n \n-void* GetRandomMmapAddr() { return GetPageAllocator()->GetRandomMmapAddr(); }\n+void* GetRandomMmapAddr() {\n+  return GetPlatformPageAllocator()->GetRandomMmapAddr();\n+}\n \n-void* AllocatePages(void* address, size_t size, size_t alignment,\n+void* AllocatePages(v8::PageAllocator* page_allocator, void* address,\n+                    size_t size, size_t alignment,\n                     PageAllocator::Permission access) {\n+  DCHECK_NOT_NULL(page_allocator);\n   DCHECK_EQ(address, AlignedAddress(address, alignment));\n-  DCHECK_EQ(0UL, size & (GetPageAllocator()->AllocatePageSize() - 1));\n+  DCHECK_EQ(0UL, size & (page_allocator->AllocatePageSize() - 1));\n   void* result = nullptr;\n   for (int i = 0; i < kAllocationTries; ++i) {\n-    result =\n-        GetPageAllocator()->AllocatePages(address, size, alignment, access);\n+    result = page_allocator->AllocatePages(address, size, alignment, access);\n     if (result != nullptr) break;\n-    size_t request_size = size + alignment - AllocatePageSize();\n+    size_t request_size = size + alignment - page_allocator->AllocatePageSize();\n     if (!OnCriticalMemoryPressure(request_size)) break;\n   }\n-#if defined(LEAK_SANITIZER)\n-  if (result != nullptr) {\n-    __lsan_register_root_region(result, size);\n-  }\n-#endif\n   return result;\n }\n \n-bool FreePages(void* address, const size_t size) {\n-  DCHECK_EQ(0UL, size & (GetPageAllocator()->AllocatePageSize() - 1));\n-  bool result = GetPageAllocator()->FreePages(address, size);\n-#if defined(LEAK_SANITIZER)\n-  if (result) {\n-    __lsan_unregister_root_region(address, size);\n-  }\n-#endif\n-  return result;\n+bool FreePages(v8::PageAllocator* page_allocator, void* address,\n+               const size_t size) {\n+  DCHECK_NOT_NULL(page_allocator);\n+  DCHECK_EQ(0UL, size & (page_allocator->AllocatePageSize() - 1));\n+  return page_allocator->FreePages(address, size);\n }\n \n-bool ReleasePages(void* address, size_t size, size_t new_size) {\n+bool ReleasePages(v8::PageAllocator* page_allocator, void* address, size_t size,\n+                  size_t new_size) {\n+  DCHECK_NOT_NULL(page_allocator);\n   DCHECK_LT(new_size, size);\n-  bool result = GetPageAllocator()->ReleasePages(address, size, new_size);\n-#if defined(LEAK_SANITIZER)\n-  if (result) {\n-    __lsan_unregister_root_region(address, size);\n-    __lsan_register_root_region(address, new_size);\n-  }\n-#endif\n-  return result;\n+  return page_allocator->ReleasePages(address, size, new_size);\n }\n \n-bool SetPermissions(void* address, size_t size,\n-                    PageAllocator::Permission access) {\n-  return GetPageAllocator()->SetPermissions(address, size, access);\n+bool SetPermissions(v8::PageAllocator* page_allocator, void* address,\n+                    size_t size, PageAllocator::Permission access) {\n+  DCHECK_NOT_NULL(page_allocator);\n+  return page_allocator->SetPermissions(address, size, access);\n }\n \n-byte* AllocatePage(void* address, size_t* allocated) {\n-  size_t page_size = AllocatePageSize();\n-  void* result =\n-      AllocatePages(address, page_size, page_size, PageAllocator::kReadWrite);\n+byte* AllocatePage(v8::PageAllocator* page_allocator, void* address,\n+                   size_t* allocated) {\n+  DCHECK_NOT_NULL(page_allocator);\n+  size_t page_size = page_allocator->AllocatePageSize();\n+  void* result = AllocatePages(page_allocator, address, page_size, page_size,\n+                               PageAllocator::kReadWrite);\n   if (result != nullptr) *allocated = page_size;\n   return static_cast<byte*>(result);\n }\n@@ -206,16 +205,17 @@ bool OnCriticalMemoryPressure(size_t length) {\n   return true;\n }\n \n-VirtualMemory::VirtualMemory() : address_(kNullAddress), size_(0) {}\n-\n-VirtualMemory::VirtualMemory(size_t size, void* hint, size_t alignment)\n-    : address_(kNullAddress), size_(0) {\n-  size_t page_size = AllocatePageSize();\n-  size_t alloc_size = RoundUp(size, page_size);\n-  address_ = reinterpret_cast<Address>(\n-      AllocatePages(hint, alloc_size, alignment, PageAllocator::kNoAccess));\n-  if (address_ != kNullAddress) {\n-    size_ = alloc_size;\n+VirtualMemory::VirtualMemory(v8::PageAllocator* page_allocator, size_t size,\n+                             void* hint, size_t alignment)\n+    : page_allocator_(page_allocator) {\n+  DCHECK_NOT_NULL(page_allocator);\n+  size_t page_size = page_allocator_->AllocatePageSize();\n+  alignment = RoundUp(alignment, page_size);\n+  size = RoundUp(size, page_size);\n+  Address address = reinterpret_cast<Address>(AllocatePages(\n+      page_allocator_, hint, size, alignment, PageAllocator::kNoAccess));\n+  if (address != kNullAddress) {\n+    region_ = base::AddressRegion(address, size);\n   }\n }\n \n@@ -226,72 +226,53 @@ VirtualMemory::~VirtualMemory() {\n }\n \n void VirtualMemory::Reset() {\n-  address_ = kNullAddress;\n-  size_ = 0;\n+  page_allocator_ = nullptr;\n+  region_ = base::AddressRegion();\n }\n \n bool VirtualMemory::SetPermissions(Address address, size_t size,\n                                    PageAllocator::Permission access) {\n   CHECK(InVM(address, size));\n-  bool result = v8::internal::SetPermissions(address, size, access);\n+  bool result =\n+      v8::internal::SetPermissions(page_allocator_, address, size, access);\n   DCHECK(result);\n   return result;\n }\n \n size_t VirtualMemory::Release(Address free_start) {\n   DCHECK(IsReserved());\n-  DCHECK(IsAddressAligned(free_start, CommitPageSize()));\n+  DCHECK(IsAddressAligned(free_start, page_allocator_->CommitPageSize()));\n   // Notice: Order is important here. The VirtualMemory object might live\n   // inside the allocated region.\n-  const size_t free_size = size_ - (free_start - address_);\n+\n+  const size_t old_size = region_.size();\n+  const size_t free_size = old_size - (free_start - region_.begin());\n   CHECK(InVM(free_start, free_size));\n-  DCHECK_LT(address_, free_start);\n-  DCHECK_LT(free_start, address_ + size_);\n-  CHECK(ReleasePages(reinterpret_cast<void*>(address_), size_,\n-                     size_ - free_size));\n-  size_ -= free_size;\n+  region_.set_size(old_size - free_size);\n+  CHECK(ReleasePages(page_allocator_, reinterpret_cast<void*>(region_.begin()),\n+                     old_size, region_.size()));\n   return free_size;\n }\n \n void VirtualMemory::Free() {\n   DCHECK(IsReserved());\n   // Notice: Order is important here. The VirtualMemory object might live\n   // inside the allocated region.\n-  Address address = address_;\n-  size_t size = size_;\n-  CHECK(InVM(address, size));\n+  v8::PageAllocator* page_allocator = page_allocator_;\n+  base::AddressRegion region = region_;\n   Reset();\n-  // FreePages expects size to be aligned to allocation granularity. Trimming\n-  // may leave size at only commit granularity. Align it here.\n-  CHECK(FreePages(reinterpret_cast<void*>(address),\n-                  RoundUp(size, AllocatePageSize())));\n+  // FreePages expects size to be aligned to allocation granularity however\n+  // ReleasePages may leave size at only commit granularity. Align it here.\n+  CHECK(FreePages(page_allocator, reinterpret_cast<void*>(region.begin()),\n+                  RoundUp(region.size(), page_allocator->AllocatePageSize())));\n }\n \n void VirtualMemory::TakeControl(VirtualMemory* from) {\n   DCHECK(!IsReserved());\n-  address_ = from->address_;\n-  size_ = from->size_;\n+  page_allocator_ = from->page_allocator_;\n+  region_ = from->region_;\n   from->Reset();\n }\n \n-bool AllocVirtualMemory(size_t size, void* hint, VirtualMemory* result) {\n-  VirtualMemory vm(size, hint);\n-  if (vm.IsReserved()) {\n-    result->TakeControl(&vm);\n-    return true;\n-  }\n-  return false;\n-}\n-\n-bool AlignedAllocVirtualMemory(size_t size, size_t alignment, void* hint,\n-                               VirtualMemory* result) {\n-  VirtualMemory vm(size, hint, alignment);\n-  if (vm.IsReserved()) {\n-    result->TakeControl(&vm);\n-    return true;\n-  }\n-  return false;\n-}\n-\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "3a21310af8e698907266bf58f3ac95717e387c09",
            "filename": "deps/v8/src/allocation.h",
            "status": "modified",
            "additions": 52,
            "deletions": 26,
            "changes": 78,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fallocation.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fallocation.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fallocation.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -6,6 +6,7 @@\n #define V8_ALLOCATION_H_\n \n #include \"include/v8-platform.h\"\n+#include \"src/base/address-region.h\"\n #include \"src/base/compiler-specific.h\"\n #include \"src/base/platform/platform.h\"\n #include \"src/globals.h\"\n@@ -82,6 +83,9 @@ void* AllocWithRetry(size_t size);\n void* AlignedAlloc(size_t size, size_t alignment);\n void AlignedFree(void *ptr);\n \n+// Returns platfrom page allocator instance. Guaranteed to be a valid pointer.\n+V8_EXPORT_PRIVATE v8::PageAllocator* GetPlatformPageAllocator();\n+\n // Gets the page granularity for AllocatePages and FreePages. Addresses returned\n // by AllocatePages and AllocatePage are aligned to this size.\n V8_EXPORT_PRIVATE size_t AllocatePageSize();\n@@ -101,92 +105,115 @@ V8_EXPORT_PRIVATE void* GetRandomMmapAddr();\n // AllocatePageSize(). Returns the address of the allocated memory, with the\n // specified size and alignment, or nullptr on failure.\n V8_EXPORT_PRIVATE\n-V8_WARN_UNUSED_RESULT void* AllocatePages(void* address, size_t size,\n+V8_WARN_UNUSED_RESULT void* AllocatePages(v8::PageAllocator* page_allocator,\n+                                          void* address, size_t size,\n                                           size_t alignment,\n                                           PageAllocator::Permission access);\n \n // Frees memory allocated by a call to AllocatePages. |address| and |size| must\n // be multiples of AllocatePageSize(). Returns true on success, otherwise false.\n V8_EXPORT_PRIVATE\n-V8_WARN_UNUSED_RESULT bool FreePages(void* address, const size_t size);\n+V8_WARN_UNUSED_RESULT bool FreePages(v8::PageAllocator* page_allocator,\n+                                     void* address, const size_t size);\n \n // Releases memory that is no longer needed. The range specified by |address|\n // and |size| must be an allocated memory region. |size| and |new_size| must be\n // multiples of CommitPageSize(). Memory from |new_size| to |size| is released.\n // Released memory is left in an undefined state, so it should not be accessed.\n // Returns true on success, otherwise false.\n V8_EXPORT_PRIVATE\n-V8_WARN_UNUSED_RESULT bool ReleasePages(void* address, size_t size,\n+V8_WARN_UNUSED_RESULT bool ReleasePages(v8::PageAllocator* page_allocator,\n+                                        void* address, size_t size,\n                                         size_t new_size);\n \n // Sets permissions according to |access|. |address| and |size| must be\n // multiples of CommitPageSize(). Setting permission to kNoAccess may\n // cause the memory contents to be lost. Returns true on success, otherwise\n // false.\n V8_EXPORT_PRIVATE\n-V8_WARN_UNUSED_RESULT bool SetPermissions(void* address, size_t size,\n+V8_WARN_UNUSED_RESULT bool SetPermissions(v8::PageAllocator* page_allocator,\n+                                          void* address, size_t size,\n                                           PageAllocator::Permission access);\n-inline bool SetPermissions(Address address, size_t size,\n-                           PageAllocator::Permission access) {\n-  return SetPermissions(reinterpret_cast<void*>(address), size, access);\n+inline bool SetPermissions(v8::PageAllocator* page_allocator, Address address,\n+                           size_t size, PageAllocator::Permission access) {\n+  return SetPermissions(page_allocator, reinterpret_cast<void*>(address), size,\n+                        access);\n }\n \n // Convenience function that allocates a single system page with read and write\n // permissions. |address| is a hint. Returns the base address of the memory and\n // the page size via |allocated| on success. Returns nullptr on failure.\n V8_EXPORT_PRIVATE\n-V8_WARN_UNUSED_RESULT byte* AllocatePage(void* address, size_t* allocated);\n+V8_WARN_UNUSED_RESULT byte* AllocatePage(v8::PageAllocator* page_allocator,\n+                                         void* address, size_t* allocated);\n \n // Function that may release reserved memory regions to allow failed allocations\n // to succeed. |length| is the amount of memory needed. Returns |true| if memory\n // could be released, false otherwise.\n V8_EXPORT_PRIVATE bool OnCriticalMemoryPressure(size_t length);\n \n // Represents and controls an area of reserved memory.\n-class V8_EXPORT_PRIVATE VirtualMemory {\n+class V8_EXPORT_PRIVATE VirtualMemory final {\n  public:\n   // Empty VirtualMemory object, controlling no reserved memory.\n-  VirtualMemory();\n+  VirtualMemory() = default;\n \n   // Reserves virtual memory containing an area of the given size that is\n-  // aligned per alignment. This may not be at the position returned by\n-  // address().\n-  VirtualMemory(size_t size, void* hint, size_t alignment = AllocatePageSize());\n+  // aligned per |alignment| rounded up to the |page_allocator|'s allocate page\n+  // size.\n+  // This may not be at the position returned by address().\n+  VirtualMemory(v8::PageAllocator* page_allocator, size_t size, void* hint,\n+                size_t alignment = 1);\n \n   // Construct a virtual memory by assigning it some already mapped address\n   // and size.\n-  VirtualMemory(Address address, size_t size)\n-      : address_(address), size_(size) {}\n+  VirtualMemory(v8::PageAllocator* page_allocator, Address address, size_t size)\n+      : page_allocator_(page_allocator), region_(address, size) {\n+    DCHECK_NOT_NULL(page_allocator);\n+  }\n \n   // Releases the reserved memory, if any, controlled by this VirtualMemory\n   // object.\n   ~VirtualMemory();\n \n+  // Move constructor.\n+  VirtualMemory(VirtualMemory&& other) V8_NOEXCEPT { TakeControl(&other); }\n+\n+  // Move assignment operator.\n+  VirtualMemory& operator=(VirtualMemory&& other) V8_NOEXCEPT {\n+    TakeControl(&other);\n+    return *this;\n+  }\n+\n   // Returns whether the memory has been reserved.\n-  bool IsReserved() const { return address_ != kNullAddress; }\n+  bool IsReserved() const { return region_.begin() != kNullAddress; }\n \n   // Initialize or resets an embedded VirtualMemory object.\n   void Reset();\n \n+  v8::PageAllocator* page_allocator() { return page_allocator_; }\n+\n+  const base::AddressRegion& region() const { return region_; }\n+\n   // Returns the start address of the reserved memory.\n   // If the memory was reserved with an alignment, this address is not\n   // necessarily aligned. The user might need to round it up to a multiple of\n   // the alignment to get the start of the aligned block.\n   Address address() const {\n     DCHECK(IsReserved());\n-    return address_;\n+    return region_.begin();\n   }\n \n   Address end() const {\n     DCHECK(IsReserved());\n-    return address_ + size_;\n+    return region_.end();\n   }\n \n   // Returns the size of the reserved memory. The returned value is only\n   // meaningful when IsReserved() returns true.\n   // If the memory was reserved with an alignment, this size may be larger\n   // than the requested size.\n-  size_t size() const { return size_; }\n+  size_t size() const { return region_.size(); }\n \n   // Sets permissions according to the access argument. address and size must be\n   // multiples of CommitPageSize(). Returns true on success, otherwise false.\n@@ -204,17 +231,16 @@ class V8_EXPORT_PRIVATE VirtualMemory {\n   void TakeControl(VirtualMemory* from);\n \n   bool InVM(Address address, size_t size) {\n-    return (address_ <= address) && ((address_ + size_) >= (address + size));\n+    return region_.contains(address, size);\n   }\n \n  private:\n-  Address address_;  // Start address of the virtual memory.\n-  size_t size_;    // Size of the virtual memory.\n-};\n+  // Page allocator that controls the virtual memory.\n+  v8::PageAllocator* page_allocator_ = nullptr;\n+  base::AddressRegion region_;\n \n-bool AllocVirtualMemory(size_t size, void* hint, VirtualMemory* result);\n-bool AlignedAllocVirtualMemory(size_t size, size_t alignment, void* hint,\n-                               VirtualMemory* result);\n+  DISALLOW_COPY_AND_ASSIGN(VirtualMemory);\n+};\n \n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "1e5d6b2aaa7ceb19eed0ae9b2bd2c6d84803ad09",
            "filename": "deps/v8/src/api-arguments-inl.h",
            "status": "modified",
            "additions": 54,
            "deletions": 31,
            "changes": 85,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -8,6 +8,7 @@\n #include \"src/api-arguments.h\"\n \n #include \"src/api-inl.h\"\n+#include \"src/debug/debug.h\"\n #include \"src/objects/api-callbacks.h\"\n #include \"src/tracing/trace-event.h\"\n #include \"src/vm-state-inl.h\"\n@@ -34,6 +35,10 @@ inline JSObject* PropertyCallbackArguments::holder() {\n   return JSObject::cast(this->begin()[T::kHolderIndex]);\n }\n \n+inline Object* PropertyCallbackArguments::receiver() {\n+  return Object::cast(this->begin()[T::kThisIndex]);\n+}\n+\n inline JSObject* FunctionCallbackArguments::holder() {\n   return JSObject::cast(this->begin()[T::kHolderIndex]);\n }\n@@ -47,14 +52,24 @@ inline JSObject* FunctionCallbackArguments::holder() {\n   DCHECK(!name->IsPrivate());                     \\\n   DCHECK_IMPLIES(name->IsSymbol(), interceptor->can_intercept_symbols());\n \n-#define PREPARE_CALLBACK_INFO(ISOLATE, F, RETURN_VALUE, API_RETURN_TYPE,     \\\n-                              CALLBACK_INFO)                                 \\\n-  if (ISOLATE->debug_execution_mode() == DebugInfo::kSideEffects &&          \\\n-      !ISOLATE->debug()->PerformSideEffectCheckForCallback(CALLBACK_INFO)) { \\\n-    return RETURN_VALUE();                                                   \\\n-  }                                                                          \\\n-  VMState<EXTERNAL> state(ISOLATE);                                          \\\n-  ExternalCallbackScope call_scope(ISOLATE, FUNCTION_ADDR(F));               \\\n+#define PREPARE_CALLBACK_INFO(ISOLATE, F, RETURN_VALUE, API_RETURN_TYPE, \\\n+                              CALLBACK_INFO, RECEIVER, ACCESSOR_KIND)    \\\n+  if (ISOLATE->debug_execution_mode() == DebugInfo::kSideEffects &&      \\\n+      !ISOLATE->debug()->PerformSideEffectCheckForCallback(              \\\n+          CALLBACK_INFO, RECEIVER, Debug::k##ACCESSOR_KIND)) {           \\\n+    return RETURN_VALUE();                                               \\\n+  }                                                                      \\\n+  VMState<EXTERNAL> state(ISOLATE);                                      \\\n+  ExternalCallbackScope call_scope(ISOLATE, FUNCTION_ADDR(F));           \\\n+  PropertyCallbackInfo<API_RETURN_TYPE> callback_info(begin());\n+\n+#define PREPARE_CALLBACK_INFO_FAIL_SIDE_EFFECT_CHECK(ISOLATE, F, RETURN_VALUE, \\\n+                                                     API_RETURN_TYPE)          \\\n+  if (ISOLATE->debug_execution_mode() == DebugInfo::kSideEffects) {            \\\n+    return RETURN_VALUE();                                                     \\\n+  }                                                                            \\\n+  VMState<EXTERNAL> state(ISOLATE);                                            \\\n+  ExternalCallbackScope call_scope(ISOLATE, FUNCTION_ADDR(F));                 \\\n   PropertyCallbackInfo<API_RETURN_TYPE> callback_info(begin());\n \n #define CREATE_NAMED_CALLBACK(FUNCTION, TYPE, RETURN_TYPE, API_RETURN_TYPE,   \\\n@@ -65,11 +80,13 @@ inline JSObject* FunctionCallbackArguments::holder() {\n     Isolate* isolate = this->isolate();                                       \\\n     RuntimeCallTimerScope timer(                                              \\\n         isolate, RuntimeCallCounterId::kNamed##FUNCTION##Callback);           \\\n+    Handle<Object> receiver_check_unsupported;                                \\\n     GenericNamedProperty##FUNCTION##Callback f =                              \\\n         ToCData<GenericNamedProperty##FUNCTION##Callback>(                    \\\n             interceptor->TYPE());                                             \\\n     PREPARE_CALLBACK_INFO(isolate, f, Handle<RETURN_TYPE>, API_RETURN_TYPE,   \\\n-                          INFO_FOR_SIDE_EFFECT);                              \\\n+                          INFO_FOR_SIDE_EFFECT, receiver_check_unsupported,   \\\n+                          NotAccessor);                                       \\\n     LOG(isolate,                                                              \\\n         ApiNamedPropertyAccess(\"interceptor-named-\" #TYPE, holder(), *name)); \\\n     f(v8::Utils::ToLocal(name), callback_info);                               \\\n@@ -87,10 +104,12 @@ FOR_EACH_CALLBACK(CREATE_NAMED_CALLBACK)\n     Isolate* isolate = this->isolate();                                       \\\n     RuntimeCallTimerScope timer(                                              \\\n         isolate, RuntimeCallCounterId::kIndexed##FUNCTION##Callback);         \\\n+    Handle<Object> receiver_check_unsupported;                                \\\n     IndexedProperty##FUNCTION##Callback f =                                   \\\n         ToCData<IndexedProperty##FUNCTION##Callback>(interceptor->TYPE());    \\\n     PREPARE_CALLBACK_INFO(isolate, f, Handle<RETURN_TYPE>, API_RETURN_TYPE,   \\\n-                          INFO_FOR_SIDE_EFFECT);                              \\\n+                          INFO_FOR_SIDE_EFFECT, receiver_check_unsupported,   \\\n+                          NotAccessor);                                       \\\n     LOG(isolate, ApiIndexedPropertyAccess(\"interceptor-indexed-\" #TYPE,       \\\n                                           holder(), index));                  \\\n     f(index, callback_info);                                                  \\\n@@ -108,9 +127,11 @@ Handle<Object> FunctionCallbackArguments::Call(CallHandlerInfo* handler) {\n   RuntimeCallTimerScope timer(isolate, RuntimeCallCounterId::kFunctionCallback);\n   v8::FunctionCallback f =\n       v8::ToCData<v8::FunctionCallback>(handler->callback());\n+  Handle<Object> receiver_check_unsupported;\n   if (isolate->debug_execution_mode() == DebugInfo::kSideEffects &&\n       !isolate->debug()->PerformSideEffectCheckForCallback(\n-          handle(handler, isolate))) {\n+          handle(handler, isolate), receiver_check_unsupported,\n+          Debug::kNotAccessor)) {\n     return Handle<Object>();\n   }\n   VMState<EXTERNAL> state(isolate);\n@@ -167,10 +188,11 @@ Handle<Object> PropertyCallbackArguments::CallNamedDescriptor(\n \n Handle<Object> PropertyCallbackArguments::BasicCallNamedGetterCallback(\n     GenericNamedPropertyGetterCallback f, Handle<Name> name,\n-    Handle<Object> info) {\n+    Handle<Object> info, Handle<Object> receiver) {\n   DCHECK(!name->IsPrivate());\n   Isolate* isolate = this->isolate();\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value, info);\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value, info, receiver,\n+                        Getter);\n   f(v8::Utils::ToLocal(name), callback_info);\n   return GetReturnValue<Object>(isolate);\n }\n@@ -184,9 +206,8 @@ Handle<Object> PropertyCallbackArguments::CallNamedSetter(\n   Isolate* isolate = this->isolate();\n   RuntimeCallTimerScope timer(isolate,\n                               RuntimeCallCounterId::kNamedSetterCallback);\n-  Handle<Object> side_effect_check_not_supported;\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value,\n-                        side_effect_check_not_supported);\n+  PREPARE_CALLBACK_INFO_FAIL_SIDE_EFFECT_CHECK(isolate, f, Handle<Object>,\n+                                               v8::Value);\n   LOG(isolate,\n       ApiNamedPropertyAccess(\"interceptor-named-set\", holder(), *name));\n   f(v8::Utils::ToLocal(name), v8::Utils::ToLocal(value), callback_info);\n@@ -202,9 +223,8 @@ Handle<Object> PropertyCallbackArguments::CallNamedDefiner(\n                               RuntimeCallCounterId::kNamedDefinerCallback);\n   GenericNamedPropertyDefinerCallback f =\n       ToCData<GenericNamedPropertyDefinerCallback>(interceptor->definer());\n-  Handle<Object> side_effect_check_not_supported;\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value,\n-                        side_effect_check_not_supported);\n+  PREPARE_CALLBACK_INFO_FAIL_SIDE_EFFECT_CHECK(isolate, f, Handle<Object>,\n+                                               v8::Value);\n   LOG(isolate,\n       ApiNamedPropertyAccess(\"interceptor-named-define\", holder(), *name));\n   f(v8::Utils::ToLocal(name), desc, callback_info);\n@@ -219,9 +239,8 @@ Handle<Object> PropertyCallbackArguments::CallIndexedSetter(\n                               RuntimeCallCounterId::kIndexedSetterCallback);\n   IndexedPropertySetterCallback f =\n       ToCData<IndexedPropertySetterCallback>(interceptor->setter());\n-  Handle<Object> side_effect_check_not_supported;\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value,\n-                        side_effect_check_not_supported);\n+  PREPARE_CALLBACK_INFO_FAIL_SIDE_EFFECT_CHECK(isolate, f, Handle<Object>,\n+                                               v8::Value);\n   LOG(isolate,\n       ApiIndexedPropertyAccess(\"interceptor-indexed-set\", holder(), index));\n   f(index, v8::Utils::ToLocal(value), callback_info);\n@@ -237,9 +256,8 @@ Handle<Object> PropertyCallbackArguments::CallIndexedDefiner(\n                               RuntimeCallCounterId::kIndexedDefinerCallback);\n   IndexedPropertyDefinerCallback f =\n       ToCData<IndexedPropertyDefinerCallback>(interceptor->definer());\n-  Handle<Object> side_effect_check_not_supported;\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value,\n-                        side_effect_check_not_supported);\n+  PREPARE_CALLBACK_INFO_FAIL_SIDE_EFFECT_CHECK(isolate, f, Handle<Object>,\n+                                               v8::Value);\n   LOG(isolate,\n       ApiIndexedPropertyAccess(\"interceptor-indexed-define\", holder(), index));\n   f(index, desc, callback_info);\n@@ -275,7 +293,9 @@ Handle<Object> PropertyCallbackArguments::CallIndexedDescriptor(\n Handle<Object> PropertyCallbackArguments::BasicCallIndexedGetterCallback(\n     IndexedPropertyGetterCallback f, uint32_t index, Handle<Object> info) {\n   Isolate* isolate = this->isolate();\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value, info);\n+  Handle<Object> receiver_check_unsupported;\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value, info,\n+                        receiver_check_unsupported, Getter);\n   f(index, callback_info);\n   return GetReturnValue<Object>(isolate);\n }\n@@ -287,7 +307,9 @@ Handle<JSObject> PropertyCallbackArguments::CallPropertyEnumerator(\n       v8::ToCData<IndexedPropertyEnumeratorCallback>(interceptor->enumerator());\n   // TODO(cbruni): assert same type for indexed and named callback.\n   Isolate* isolate = this->isolate();\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<JSObject>, v8::Array, interceptor);\n+  Handle<Object> receiver_check_unsupported;\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<JSObject>, v8::Array, interceptor,\n+                        receiver_check_unsupported, NotAccessor);\n   f(callback_info);\n   return GetReturnValue<JSObject>(isolate);\n }\n@@ -303,7 +325,8 @@ Handle<Object> PropertyCallbackArguments::CallAccessorGetter(\n   LOG(isolate, ApiNamedPropertyAccess(\"accessor-getter\", holder(), *name));\n   AccessorNameGetterCallback f =\n       ToCData<AccessorNameGetterCallback>(info->getter());\n-  return BasicCallNamedGetterCallback(f, name, info);\n+  return BasicCallNamedGetterCallback(f, name, info,\n+                                      handle(receiver(), isolate));\n }\n \n Handle<Object> PropertyCallbackArguments::CallAccessorSetter(\n@@ -314,15 +337,15 @@ Handle<Object> PropertyCallbackArguments::CallAccessorSetter(\n                               RuntimeCallCounterId::kAccessorSetterCallback);\n   AccessorNameSetterCallback f =\n       ToCData<AccessorNameSetterCallback>(accessor_info->setter());\n-  Handle<Object> side_effect_check_not_supported;\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, void,\n-                        side_effect_check_not_supported);\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, void, accessor_info,\n+                        handle(receiver(), isolate), Setter);\n   LOG(isolate, ApiNamedPropertyAccess(\"accessor-setter\", holder(), *name));\n   f(v8::Utils::ToLocal(name), v8::Utils::ToLocal(value), callback_info);\n   return GetReturnValue<Object>(isolate);\n }\n \n #undef PREPARE_CALLBACK_INFO\n+#undef PREPARE_CALLBACK_INFO_FAIL_SIDE_EFFECT_CHECK\n \n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "d8fc2b49ab2824e929520b5f51917a5eae62c1d7",
            "filename": "deps/v8/src/api-arguments.h",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-arguments.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-arguments.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -26,12 +26,12 @@ class CustomArguments : public CustomArgumentsBase {\n  public:\n   static const int kReturnValueOffset = T::kReturnValueIndex;\n \n-  ~CustomArguments() {\n+  ~CustomArguments() override {\n     this->begin()[kReturnValueOffset] =\n         reinterpret_cast<Object*>(kHandleZapValue);\n   }\n \n-  virtual inline void IterateInstance(RootVisitor* v) {\n+  inline void IterateInstance(RootVisitor* v) override {\n     v->VisitRootPointers(Root::kRelocatable, nullptr, values_,\n                          values_ + T::kArgsLength);\n   }\n@@ -133,9 +133,10 @@ class PropertyCallbackArguments\n       IndexedPropertyGetterCallback f, uint32_t index, Handle<Object> info);\n   inline Handle<Object> BasicCallNamedGetterCallback(\n       GenericNamedPropertyGetterCallback f, Handle<Name> name,\n-      Handle<Object> info);\n+      Handle<Object> info, Handle<Object> receiver = Handle<Object>());\n \n   inline JSObject* holder();\n+  inline Object* receiver();\n \n   // Don't copy PropertyCallbackArguments, because they would both have the\n   // same prev_ pointer."
        },
        {
            "sha": "5758729dd32e7fff1e023bda15e56e685ee61751",
            "filename": "deps/v8/src/api-inl.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-inl.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -7,6 +7,7 @@\n \n #include \"src/api.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/objects/stack-frame-info.h\"\n \n namespace v8 {\n "
        },
        {
            "sha": "11b63d56d8da2c6638808d25e719f6939c24ee47",
            "filename": "deps/v8/src/api-natives.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 35,
            "changes": 54,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-natives.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-natives.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-natives.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -114,9 +114,8 @@ MaybeHandle<Object> DefineDataProperty(Isolate* isolate,\n   }\n #endif\n \n-  MAYBE_RETURN_NULL(\n-      Object::AddDataProperty(&it, value, attributes, kThrowOnError,\n-                              Object::CERTAINLY_NOT_STORE_FROM_KEYED));\n+  MAYBE_RETURN_NULL(Object::AddDataProperty(\n+      &it, value, attributes, kThrowOnError, StoreOrigin::kNamed));\n   return value;\n }\n \n@@ -403,8 +402,10 @@ MaybeHandle<JSObject> InstantiateObject(Isolate* isolate,\n   }\n \n   Handle<JSObject> object;\n-  ASSIGN_RETURN_ON_EXCEPTION(isolate, object,\n-                             JSObject::New(constructor, new_target), JSObject);\n+  ASSIGN_RETURN_ON_EXCEPTION(\n+      isolate, object,\n+      JSObject::New(constructor, new_target, Handle<AllocationSite>::null()),\n+      JSObject);\n \n   if (is_prototype) JSObject::OptimizeAsPrototype(object);\n \n@@ -495,8 +496,15 @@ MaybeHandle<JSFunction> InstantiateFunction(Isolate* isolate,\n                                   parent_prototype);\n     }\n   }\n+  InstanceType function_type =\n+      (!data->needs_access_check() &&\n+       data->named_property_handler()->IsUndefined(isolate) &&\n+       data->indexed_property_handler()->IsUndefined(isolate))\n+          ? JS_API_OBJECT_TYPE\n+          : JS_SPECIAL_API_OBJECT_TYPE;\n+\n   Handle<JSFunction> function = ApiNatives::CreateApiFunction(\n-      isolate, data, prototype, ApiNatives::JavaScriptObjectType, maybe_name);\n+      isolate, data, prototype, function_type, maybe_name);\n   if (serial_number) {\n     // Cache the function.\n     CacheTemplateInstantiation(isolate, serial_number, CachingMode::kUnlimited,\n@@ -625,8 +633,7 @@ void ApiNatives::AddNativeDataProperty(Isolate* isolate,\n \n Handle<JSFunction> ApiNatives::CreateApiFunction(\n     Isolate* isolate, Handle<FunctionTemplateInfo> obj,\n-    Handle<Object> prototype, ApiInstanceType instance_type,\n-    MaybeHandle<Name> maybe_name) {\n+    Handle<Object> prototype, InstanceType type, MaybeHandle<Name> maybe_name) {\n   Handle<SharedFunctionInfo> shared =\n       FunctionTemplateInfo::GetOrCreateSharedFunctionInfo(isolate, obj,\n                                                           maybe_name);\n@@ -670,33 +677,10 @@ Handle<JSFunction> ApiNatives::CreateApiFunction(\n     immutable_proto = instance_template->immutable_proto();\n   }\n \n-  // TODO(svenpanne) Kill ApiInstanceType and refactor things by generalizing\n-  // JSObject::GetHeaderSize.\n-  int instance_size = kPointerSize * embedder_field_count;\n-  InstanceType type;\n-  switch (instance_type) {\n-    case JavaScriptObjectType:\n-      if (!obj->needs_access_check() &&\n-          obj->named_property_handler()->IsUndefined(isolate) &&\n-          obj->indexed_property_handler()->IsUndefined(isolate)) {\n-        type = JS_API_OBJECT_TYPE;\n-      } else {\n-        type = JS_SPECIAL_API_OBJECT_TYPE;\n-      }\n-      instance_size += JSObject::kHeaderSize;\n-      break;\n-    case GlobalObjectType:\n-      type = JS_GLOBAL_OBJECT_TYPE;\n-      instance_size += JSGlobalObject::kSize;\n-      break;\n-    case GlobalProxyType:\n-      type = JS_GLOBAL_PROXY_TYPE;\n-      instance_size += JSGlobalProxy::kSize;\n-      break;\n-    default:\n-      UNREACHABLE();\n-      break;\n-  }\n+  // JS_FUNCTION_TYPE requires information about the prototype slot.\n+  DCHECK_NE(JS_FUNCTION_TYPE, type);\n+  int instance_size =\n+      JSObject::GetHeaderSize(type) + kPointerSize * embedder_field_count;\n \n   Handle<Map> map = isolate->factory()->NewMap(type, instance_size,\n                                                TERMINAL_FAST_ELEMENTS_KIND);"
        },
        {
            "sha": "ff6cdc6c86453767fc580afe06a2929f3c9ea27b",
            "filename": "deps/v8/src/api-natives.h",
            "status": "modified",
            "additions": 2,
            "deletions": 7,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-natives.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi-natives.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-natives.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -9,6 +9,7 @@\n #include \"src/base/macros.h\"\n #include \"src/handles.h\"\n #include \"src/maybe-handles.h\"\n+#include \"src/objects.h\"\n #include \"src/property-details.h\"\n \n namespace v8 {\n@@ -33,15 +34,9 @@ class ApiNatives {\n   V8_WARN_UNUSED_RESULT static MaybeHandle<JSObject> InstantiateRemoteObject(\n       Handle<ObjectTemplateInfo> data);\n \n-  enum ApiInstanceType {\n-    JavaScriptObjectType,\n-    GlobalObjectType,\n-    GlobalProxyType\n-  };\n-\n   static Handle<JSFunction> CreateApiFunction(\n       Isolate* isolate, Handle<FunctionTemplateInfo> obj,\n-      Handle<Object> prototype, ApiInstanceType instance_type,\n+      Handle<Object> prototype, InstanceType type,\n       MaybeHandle<Name> name = MaybeHandle<Name>());\n \n   static void AddDataProperty(Isolate* isolate, Handle<TemplateInfo> info,"
        },
        {
            "sha": "3f62a23d43c1c82c273e379e78fd0a4292cf4a20",
            "filename": "deps/v8/src/api.cc",
            "status": "modified",
            "additions": 206,
            "deletions": 250,
            "changes": 456,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -58,7 +58,9 @@\n #include \"src/objects/js-regexp-inl.h\"\n #include \"src/objects/module-inl.h\"\n #include \"src/objects/ordered-hash-table-inl.h\"\n+#include \"src/objects/stack-frame-info-inl.h\"\n #include \"src/objects/templates.h\"\n+#include \"src/parsing/parse-info.h\"\n #include \"src/parsing/parser.h\"\n #include \"src/parsing/scanner-character-streams.h\"\n #include \"src/pending-compilation-error-handler.h\"\n@@ -834,6 +836,7 @@ StartupData SnapshotCreator::CreateBlob(\n   }\n   data->created_ = true;\n \n+  DCHECK(i::Snapshot::VerifyChecksum(&result));\n   return result;\n }\n \n@@ -876,12 +879,12 @@ void RegisteredExtension::UnregisterAll() {\n namespace {\n class ExtensionResource : public String::ExternalOneByteStringResource {\n  public:\n-  ExtensionResource() : data_(0), length_(0) {}\n+  ExtensionResource() : data_(nullptr), length_(0) {}\n   ExtensionResource(const char* data, size_t length)\n       : data_(data), length_(length) {}\n-  const char* data() const { return data_; }\n-  size_t length() const { return length_; }\n-  virtual void Dispose() {}\n+  const char* data() const override { return data_; }\n+  size_t length() const override { return length_; }\n+  void Dispose() override {}\n \n  private:\n   const char* data_;\n@@ -1391,7 +1394,7 @@ static Local<FunctionTemplate> FunctionTemplateNew(\n     next_serial_number = isolate->heap()->GetNextTemplateSerialNumber();\n   }\n   obj->set_serial_number(i::Smi::FromInt(next_serial_number));\n-  if (callback != 0) {\n+  if (callback != nullptr) {\n     Utils::ToLocal(obj)->SetCallHandler(callback, data, side_effect_type);\n   }\n   obj->set_length(length);\n@@ -1676,7 +1679,8 @@ static void TemplateSetAccessor(\n     Template* template_obj, v8::Local<Name> name, Getter getter, Setter setter,\n     Data data, AccessControl settings, PropertyAttribute attribute,\n     v8::Local<AccessorSignature> signature, bool is_special_data_property,\n-    bool replace_on_access, SideEffectType getter_side_effect_type) {\n+    bool replace_on_access, SideEffectType getter_side_effect_type,\n+    SideEffectType setter_side_effect_type) {\n   auto info = Utils::OpenHandle(template_obj);\n   auto isolate = info->GetIsolate();\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n@@ -1686,38 +1690,43 @@ static void TemplateSetAccessor(\n                        is_special_data_property, replace_on_access);\n   accessor_info->set_initial_property_attributes(\n       static_cast<i::PropertyAttributes>(attribute));\n-  accessor_info->set_has_no_side_effect(getter_side_effect_type ==\n-                                        SideEffectType::kHasNoSideEffect);\n+  accessor_info->set_getter_side_effect_type(getter_side_effect_type);\n+  accessor_info->set_setter_side_effect_type(setter_side_effect_type);\n   i::ApiNatives::AddNativeDataProperty(isolate, info, accessor_info);\n }\n \n void Template::SetNativeDataProperty(\n     v8::Local<String> name, AccessorGetterCallback getter,\n     AccessorSetterCallback setter, v8::Local<Value> data,\n     PropertyAttribute attribute, v8::Local<AccessorSignature> signature,\n-    AccessControl settings, SideEffectType getter_side_effect_type) {\n+    AccessControl settings, SideEffectType getter_side_effect_type,\n+    SideEffectType setter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter, setter, data, settings, attribute,\n-                      signature, true, false, getter_side_effect_type);\n+                      signature, true, false, getter_side_effect_type,\n+                      setter_side_effect_type);\n }\n \n void Template::SetNativeDataProperty(\n     v8::Local<Name> name, AccessorNameGetterCallback getter,\n     AccessorNameSetterCallback setter, v8::Local<Value> data,\n     PropertyAttribute attribute, v8::Local<AccessorSignature> signature,\n-    AccessControl settings, SideEffectType getter_side_effect_type) {\n+    AccessControl settings, SideEffectType getter_side_effect_type,\n+    SideEffectType setter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter, setter, data, settings, attribute,\n-                      signature, true, false, getter_side_effect_type);\n+                      signature, true, false, getter_side_effect_type,\n+                      setter_side_effect_type);\n }\n \n void Template::SetLazyDataProperty(v8::Local<Name> name,\n                                    AccessorNameGetterCallback getter,\n                                    v8::Local<Value> data,\n                                    PropertyAttribute attribute,\n-                                   SideEffectType getter_side_effect_type) {\n+                                   SideEffectType getter_side_effect_type,\n+                                   SideEffectType setter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter,\n                       static_cast<AccessorNameSetterCallback>(nullptr), data,\n                       DEFAULT, attribute, Local<AccessorSignature>(), true,\n-                      true, getter_side_effect_type);\n+                      true, getter_side_effect_type, setter_side_effect_type);\n }\n \n void Template::SetIntrinsicDataProperty(Local<Name> name, Intrinsic intrinsic,\n@@ -1737,10 +1746,11 @@ void ObjectTemplate::SetAccessor(v8::Local<String> name,\n                                  v8::Local<Value> data, AccessControl settings,\n                                  PropertyAttribute attribute,\n                                  v8::Local<AccessorSignature> signature,\n-                                 SideEffectType getter_side_effect_type) {\n+                                 SideEffectType getter_side_effect_type,\n+                                 SideEffectType setter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter, setter, data, settings, attribute,\n                       signature, i::FLAG_disable_old_api_accessors, false,\n-                      getter_side_effect_type);\n+                      getter_side_effect_type, setter_side_effect_type);\n }\n \n void ObjectTemplate::SetAccessor(v8::Local<Name> name,\n@@ -1749,10 +1759,11 @@ void ObjectTemplate::SetAccessor(v8::Local<Name> name,\n                                  v8::Local<Value> data, AccessControl settings,\n                                  PropertyAttribute attribute,\n                                  v8::Local<AccessorSignature> signature,\n-                                 SideEffectType getter_side_effect_type) {\n+                                 SideEffectType getter_side_effect_type,\n+                                 SideEffectType setter_side_effect_type) {\n   TemplateSetAccessor(this, name, getter, setter, data, settings, attribute,\n                       signature, i::FLAG_disable_old_api_accessors, false,\n-                      getter_side_effect_type);\n+                      getter_side_effect_type, setter_side_effect_type);\n }\n \n template <typename Getter, typename Setter, typename Query, typename Descriptor,\n@@ -1765,15 +1776,15 @@ static i::Handle<i::InterceptorInfo> CreateInterceptorInfo(\n       isolate->factory()->NewStruct(i::INTERCEPTOR_INFO_TYPE, i::TENURED));\n   obj->set_flags(0);\n \n-  if (getter != 0) SET_FIELD_WRAPPED(isolate, obj, set_getter, getter);\n-  if (setter != 0) SET_FIELD_WRAPPED(isolate, obj, set_setter, setter);\n-  if (query != 0) SET_FIELD_WRAPPED(isolate, obj, set_query, query);\n-  if (descriptor != 0)\n+  if (getter != nullptr) SET_FIELD_WRAPPED(isolate, obj, set_getter, getter);\n+  if (setter != nullptr) SET_FIELD_WRAPPED(isolate, obj, set_setter, setter);\n+  if (query != nullptr) SET_FIELD_WRAPPED(isolate, obj, set_query, query);\n+  if (descriptor != nullptr)\n     SET_FIELD_WRAPPED(isolate, obj, set_descriptor, descriptor);\n-  if (remover != 0) SET_FIELD_WRAPPED(isolate, obj, set_deleter, remover);\n-  if (enumerator != 0)\n+  if (remover != nullptr) SET_FIELD_WRAPPED(isolate, obj, set_deleter, remover);\n+  if (enumerator != nullptr)\n     SET_FIELD_WRAPPED(isolate, obj, set_enumerator, enumerator);\n-  if (definer != 0) SET_FIELD_WRAPPED(isolate, obj, set_definer, definer);\n+  if (definer != nullptr) SET_FIELD_WRAPPED(isolate, obj, set_definer, definer);\n   obj->set_can_intercept_symbols(\n       !(static_cast<int>(flags) &\n         static_cast<int>(PropertyHandlerFlags::kOnlyInterceptStrings)));\n@@ -2001,24 +2012,15 @@ ScriptCompiler::CachedData::~CachedData() {\n   }\n }\n \n-\n bool ScriptCompiler::ExternalSourceStream::SetBookmark() { return false; }\n \n-\n void ScriptCompiler::ExternalSourceStream::ResetToBookmark() { UNREACHABLE(); }\n \n ScriptCompiler::StreamedSource::StreamedSource(ExternalSourceStream* stream,\n                                                Encoding encoding)\n     : impl_(new i::ScriptStreamingData(stream, encoding)) {}\n \n-ScriptCompiler::StreamedSource::~StreamedSource() { delete impl_; }\n-\n-\n-const ScriptCompiler::CachedData*\n-ScriptCompiler::StreamedSource::GetCachedData() const {\n-  return impl_->cached_data.get();\n-}\n-\n+ScriptCompiler::StreamedSource::~StreamedSource() = default;\n \n Local<Script> UnboundScript::BindToCurrentContext() {\n   auto function_info =\n@@ -2030,7 +2032,6 @@ Local<Script> UnboundScript::BindToCurrentContext() {\n   return ToApiHandle<Script>(function);\n }\n \n-\n int UnboundScript::GetId() {\n   auto function_info =\n       i::Handle<i::SharedFunctionInfo>::cast(Utils::OpenHandle(this));\n@@ -2157,10 +2158,6 @@ int PrimitiveArray::Length() const {\n   return array->length();\n }\n \n-void PrimitiveArray::Set(int index, Local<Primitive> item) {\n-  return Set(Isolate::GetCurrent(), index, item);\n-}\n-\n void PrimitiveArray::Set(Isolate* v8_isolate, int index,\n                          Local<Primitive> item) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n@@ -2174,10 +2171,6 @@ void PrimitiveArray::Set(Isolate* v8_isolate, int index,\n   array->set(index, *i_item);\n }\n \n-Local<Primitive> PrimitiveArray::Get(int index) {\n-  return Get(Isolate::GetCurrent(), index);\n-}\n-\n Local<Primitive> PrimitiveArray::Get(Isolate* v8_isolate, int index) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n   i::Handle<i::FixedArray> array = Utils::OpenHandle(this);\n@@ -2534,6 +2527,7 @@ MaybeLocal<Function> ScriptCompiler::CompileFunctionInContext(\n   RETURN_ESCAPED(Utils::CallableToLocal(result));\n }\n \n+void ScriptCompiler::ScriptStreamingTask::Run() { data_->task->Run(); }\n \n ScriptCompiler::ScriptStreamingTask* ScriptCompiler::StartStreamingScript(\n     Isolate* v8_isolate, StreamedSource* source, CompileOptions options) {\n@@ -2544,10 +2538,13 @@ ScriptCompiler::ScriptStreamingTask* ScriptCompiler::StartStreamingScript(\n   // TODO(rmcilroy): remove CompileOptions from the API.\n   CHECK(options == ScriptCompiler::kNoCompileOptions);\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n-  return i::Compiler::NewBackgroundCompileTask(source->impl(), isolate);\n+  i::ScriptStreamingData* data = source->impl();\n+  std::unique_ptr<i::BackgroundCompileTask> task =\n+      base::make_unique<i::BackgroundCompileTask>(data, isolate);\n+  data->task = std::move(task);\n+  return new ScriptCompiler::ScriptStreamingTask(data);\n }\n \n-\n MaybeLocal<Script> ScriptCompiler::Compile(Local<Context> context,\n                                            StreamedSource* v8_source,\n                                            Local<String> full_source_string,\n@@ -2562,11 +2559,11 @@ MaybeLocal<Script> ScriptCompiler::Compile(Local<Context> context,\n       isolate, origin.ResourceName(), origin.ResourceLineOffset(),\n       origin.ResourceColumnOffset(), origin.SourceMapUrl(),\n       origin.HostDefinedOptions());\n-  i::ScriptStreamingData* streaming_data = v8_source->impl();\n+  i::ScriptStreamingData* data = v8_source->impl();\n \n   i::MaybeHandle<i::SharedFunctionInfo> maybe_function_info =\n       i::Compiler::GetSharedFunctionInfoForStreamedScript(\n-          isolate, str, script_details, origin.Options(), streaming_data);\n+          isolate, str, script_details, origin.Options(), data);\n \n   i::Handle<i::SharedFunctionInfo> result;\n   has_pending_exception = !maybe_function_info.ToHandle(&result);\n@@ -2908,10 +2905,6 @@ void Message::PrintCurrentStackTrace(Isolate* isolate, FILE* out) {\n \n // --- S t a c k T r a c e ---\n \n-Local<StackFrame> StackTrace::GetFrame(uint32_t index) const {\n-  return GetFrame(Isolate::GetCurrent(), index);\n-}\n-\n Local<StackFrame> StackTrace::GetFrame(Isolate* v8_isolate,\n                                        uint32_t index) const {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n@@ -3572,17 +3565,20 @@ MaybeLocal<BigInt> Value::ToBigInt(Local<Context> context) const {\n   RETURN_ESCAPED(result);\n }\n \n+bool Value::BooleanValue(Isolate* v8_isolate) const {\n+  return Utils::OpenHandle(this)->BooleanValue(\n+      reinterpret_cast<i::Isolate*>(v8_isolate));\n+}\n+\n MaybeLocal<Boolean> Value::ToBoolean(Local<Context> context) const {\n-  auto obj = Utils::OpenHandle(this);\n-  if (obj->IsBoolean()) return ToApiHandle<Boolean>(obj);\n-  auto isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n-  auto val = isolate->factory()->ToBoolean(obj->BooleanValue(isolate));\n-  return ToApiHandle<Boolean>(val);\n+  return ToBoolean(context->GetIsolate());\n }\n \n \n Local<Boolean> Value::ToBoolean(Isolate* v8_isolate) const {\n-  return ToBoolean(v8_isolate->GetCurrentContext()).ToLocalChecked();\n+  auto isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n+  return ToApiHandle<Boolean>(\n+      isolate->factory()->ToBoolean(BooleanValue(v8_isolate)));\n }\n \n \n@@ -3888,36 +3884,6 @@ void v8::RegExp::CheckCast(v8::Value* that) {\n }\n \n \n-bool Value::BooleanValue() const {\n-  return BooleanValue(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromJust();\n-}\n-\n-\n-double Value::NumberValue() const {\n-  return NumberValue(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(std::numeric_limits<double>::quiet_NaN());\n-}\n-\n-\n-int64_t Value::IntegerValue() const {\n-  return IntegerValue(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(0);\n-}\n-\n-\n-uint32_t Value::Uint32Value() const {\n-  return Uint32Value(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(0);\n-}\n-\n-\n-int32_t Value::Int32Value() const {\n-  return Int32Value(Isolate::GetCurrent()->GetCurrentContext())\n-      .FromMaybe(0);\n-}\n-\n-\n Maybe<bool> Value::BooleanValue(Local<Context> context) const {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n   return Just(Utils::OpenHandle(this)->BooleanValue(isolate));\n@@ -4006,12 +3972,6 @@ MaybeLocal<Uint32> Value::ToArrayIndex(Local<Context> context) const {\n }\n \n \n-bool Value::Equals(Local<Value> that) const {\n-  return Equals(Isolate::GetCurrent()->GetCurrentContext(), that)\n-      .FromMaybe(false);\n-}\n-\n-\n Maybe<bool> Value::Equals(Local<Context> context, Local<Value> that) const {\n   i::Isolate* isolate = Utils::OpenHandle(*context)->GetIsolate();\n   auto self = Utils::OpenHandle(this);\n@@ -4063,7 +4023,8 @@ Maybe<bool> v8::Object::Set(v8::Local<v8::Context> context,\n   auto value_obj = Utils::OpenHandle(*value);\n   has_pending_exception =\n       i::Runtime::SetObjectProperty(isolate, self, key_obj, value_obj,\n-                                    i::LanguageMode::kSloppy)\n+                                    i::LanguageMode::kSloppy,\n+                                    i::StoreOrigin::kMaybeKeyed)\n           .is_null();\n   RETURN_ON_FAILED_EXECUTION_PRIMITIVE(bool);\n   return Just(true);\n@@ -4617,8 +4578,8 @@ static Maybe<bool> ObjectSetAccessor(\n     Local<Context> context, Object* self, Local<Name> name, Getter getter,\n     Setter setter, Data data, AccessControl settings,\n     PropertyAttribute attributes, bool is_special_data_property,\n-    bool replace_on_access,\n-    SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect) {\n+    bool replace_on_access, SideEffectType getter_side_effect_type,\n+    SideEffectType setter_side_effect_type) {\n   auto isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n   ENTER_V8_NO_SCRIPT(isolate, context, Object, SetAccessor, Nothing<bool>(),\n                      i::HandleScope);\n@@ -4629,8 +4590,8 @@ static Maybe<bool> ObjectSetAccessor(\n   i::Handle<i::AccessorInfo> info =\n       MakeAccessorInfo(isolate, name, getter, setter, data, settings, signature,\n                        is_special_data_property, replace_on_access);\n-  info->set_has_no_side_effect(getter_side_effect_type ==\n-                               SideEffectType::kHasNoSideEffect);\n+  info->set_getter_side_effect_type(getter_side_effect_type);\n+  info->set_setter_side_effect_type(setter_side_effect_type);\n   if (info.is_null()) return Nothing<bool>();\n   bool fast = obj->HasFastProperties();\n   i::Handle<i::Object> result;\n@@ -4653,11 +4614,12 @@ Maybe<bool> Object::SetAccessor(Local<Context> context, Local<Name> name,\n                                 AccessorNameSetterCallback setter,\n                                 MaybeLocal<Value> data, AccessControl settings,\n                                 PropertyAttribute attribute,\n-                                SideEffectType getter_side_effect_type) {\n+                                SideEffectType getter_side_effect_type,\n+                                SideEffectType setter_side_effect_type) {\n   return ObjectSetAccessor(context, this, name, getter, setter,\n                            data.FromMaybe(Local<Value>()), settings, attribute,\n                            i::FLAG_disable_old_api_accessors, false,\n-                           getter_side_effect_type);\n+                           getter_side_effect_type, setter_side_effect_type);\n }\n \n \n@@ -4684,19 +4646,22 @@ Maybe<bool> Object::SetNativeDataProperty(\n     v8::Local<v8::Context> context, v8::Local<Name> name,\n     AccessorNameGetterCallback getter, AccessorNameSetterCallback setter,\n     v8::Local<Value> data, PropertyAttribute attributes,\n-    SideEffectType getter_side_effect_type) {\n+    SideEffectType getter_side_effect_type,\n+    SideEffectType setter_side_effect_type) {\n   return ObjectSetAccessor(context, this, name, getter, setter, data, DEFAULT,\n-                           attributes, true, false, getter_side_effect_type);\n+                           attributes, true, false, getter_side_effect_type,\n+                           setter_side_effect_type);\n }\n \n Maybe<bool> Object::SetLazyDataProperty(\n     v8::Local<v8::Context> context, v8::Local<Name> name,\n     AccessorNameGetterCallback getter, v8::Local<Value> data,\n-    PropertyAttribute attributes, SideEffectType getter_side_effect_type) {\n+    PropertyAttribute attributes, SideEffectType getter_side_effect_type,\n+    SideEffectType setter_side_effect_type) {\n   return ObjectSetAccessor(context, this, name, getter,\n                            static_cast<AccessorNameSetterCallback>(nullptr),\n                            data, DEFAULT, attributes, true, true,\n-                           getter_side_effect_type);\n+                           getter_side_effect_type, setter_side_effect_type);\n }\n \n Maybe<bool> v8::Object::HasOwnProperty(Local<Context> context,\n@@ -5343,10 +5308,6 @@ bool String::ContainsOnlyOneByte() const {\n   return helper.Check(*str);\n }\n \n-int String::Utf8Length() const {\n-  return Utf8Length(Isolate::GetCurrent());\n-}\n-\n int String::Utf8Length(Isolate* isolate) const {\n   i::Handle<i::String> str = Utils::OpenHandle(this);\n   str = i::String::Flatten(reinterpret_cast<i::Isolate*>(isolate), str);\n@@ -5570,14 +5531,6 @@ static bool RecursivelySerializeToUtf8(i::String* current,\n   return true;\n }\n \n-\n-int String::WriteUtf8(char* buffer, int capacity,\n-                      int* nchars_ref, int options) const {\n-  return WriteUtf8(Isolate::GetCurrent(),\n-                   buffer, capacity, nchars_ref, options);\n-}\n-\n-\n int String::WriteUtf8(Isolate* v8_isolate, char* buffer, int capacity,\n                       int* nchars_ref, int options) const {\n   i::Handle<i::String> str = Utils::OpenHandle(this);\n@@ -5645,18 +5598,6 @@ static inline int WriteHelper(i::Isolate* isolate, const String* string,\n }\n \n \n-int String::WriteOneByte(uint8_t* buffer, int start,\n-                         int length, int options) const {\n-  return WriteOneByte(Isolate::GetCurrent(), buffer, start, length, options);\n-}\n-\n-\n-int String::Write(uint16_t* buffer, int start, int length,\n-                  int options) const {\n-  return Write(Isolate::GetCurrent(), buffer, start, length, options);\n-}\n-\n-\n int String::WriteOneByte(Isolate* isolate, uint8_t* buffer, int start,\n                          int length, int options) const {\n   return WriteHelper(reinterpret_cast<i::Isolate*>(isolate), this, buffer,\n@@ -6010,16 +5951,16 @@ HeapStatistics::HeapStatistics()\n       malloced_memory_(0),\n       external_memory_(0),\n       peak_malloced_memory_(0),\n-      does_zap_garbage_(0),\n+      does_zap_garbage_(false),\n       number_of_native_contexts_(0),\n       number_of_detached_contexts_(0) {}\n \n-HeapSpaceStatistics::HeapSpaceStatistics(): space_name_(0),\n-                                            space_size_(0),\n-                                            space_used_size_(0),\n-                                            space_available_size_(0),\n-                                            physical_space_size_(0) { }\n-\n+HeapSpaceStatistics::HeapSpaceStatistics()\n+    : space_name_(nullptr),\n+      space_size_(0),\n+      space_used_size_(0),\n+      space_available_size_(0),\n+      physical_space_size_(0) {}\n \n HeapObjectStatistics::HeapObjectStatistics()\n     : object_type_(nullptr),\n@@ -6604,11 +6545,6 @@ MaybeLocal<String> String::NewFromTwoByte(Isolate* isolate,\n   return result;\n }\n \n-Local<String> v8::String::Concat(Local<String> left,\n-                                 Local<String> right) {\n-  return Concat(Isolate::GetCurrent(), left, right);\n-}\n-\n Local<String> v8::String::Concat(Isolate* v8_isolate, Local<String> left,\n                                  Local<String> right) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n@@ -6793,7 +6729,6 @@ double v8::NumberObject::ValueOf() const {\n }\n \n Local<v8::Value> v8::BigIntObject::New(Isolate* isolate, int64_t value) {\n-  CHECK(i::FLAG_harmony_bigint);\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   LOG_API(i_isolate, BigIntObject, New);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n@@ -6835,11 +6770,6 @@ bool v8::BooleanObject::ValueOf() const {\n }\n \n \n-Local<v8::Value> v8::StringObject::New(Local<String> value) {\n-  return New(Isolate::GetCurrent(), value);\n-}\n-\n-\n Local<v8::Value> v8::StringObject::New(Isolate* v8_isolate,\n                                        Local<String> value) {\n   i::Handle<i::String> string = Utils::OpenHandle(*value);\n@@ -6981,23 +6911,6 @@ Local<v8::Array> v8::Array::New(Isolate* isolate, int length) {\n   return Utils::ToLocal(obj);\n }\n \n-Local<v8::Array> v8::Array::New(Isolate* isolate, Local<Value>* elements,\n-                                size_t length) {\n-  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n-  i::Factory* factory = i_isolate->factory();\n-  LOG_API(i_isolate, Array, New);\n-  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n-  int len = static_cast<int>(length);\n-\n-  i::Handle<i::FixedArray> result = factory->NewFixedArray(len);\n-  for (int i = 0; i < len; i++) {\n-    i::Handle<i::Object> element = Utils::OpenHandle(*elements[i]);\n-    result->set(i, *element);\n-  }\n-\n-  return Utils::ToLocal(\n-      factory->NewJSArrayWithElements(result, i::PACKED_ELEMENTS, len));\n-}\n \n uint32_t v8::Array::Length() const {\n   i::Handle<i::JSArray> obj = Utils::OpenHandle(this);\n@@ -7103,30 +7016,30 @@ i::Handle<i::JSArray> MapAsArray(i::Isolate* isolate, i::Object* table_obj,\n   i::Factory* factory = isolate->factory();\n   i::Handle<i::OrderedHashMap> table(i::OrderedHashMap::cast(table_obj),\n                                      isolate);\n-  const bool collect_keys =\n-      kind == MapAsArrayKind::kEntries || kind == MapAsArrayKind::kKeys;\n-  const bool collect_values =\n-      kind == MapAsArrayKind::kEntries || kind == MapAsArrayKind::kValues;\n-  int capacity = table->UsedCapacity();\n-  int max_length =\n-      (capacity - offset) * ((collect_keys && collect_values) ? 2 : 1);\n-  i::Handle<i::FixedArray> result = factory->NewFixedArray(max_length);\n+  if (offset >= table->NumberOfElements()) return factory->NewJSArray(0);\n+  int length = (table->NumberOfElements() - offset) *\n+               (kind == MapAsArrayKind::kEntries ? 2 : 1);\n+  i::Handle<i::FixedArray> result = factory->NewFixedArray(length);\n   int result_index = 0;\n   {\n     i::DisallowHeapAllocation no_gc;\n+    int capacity = table->UsedCapacity();\n     i::Oddball* the_hole = i::ReadOnlyRoots(isolate).the_hole_value();\n-    for (int i = offset; i < capacity; ++i) {\n+    for (int i = 0; i < capacity; ++i) {\n       i::Object* key = table->KeyAt(i);\n       if (key == the_hole) continue;\n-      if (collect_keys) result->set(result_index++, key);\n-      if (collect_values) result->set(result_index++, table->ValueAt(i));\n+      if (offset-- > 0) continue;\n+      if (kind == MapAsArrayKind::kEntries || kind == MapAsArrayKind::kKeys) {\n+        result->set(result_index++, key);\n+      }\n+      if (kind == MapAsArrayKind::kEntries || kind == MapAsArrayKind::kValues) {\n+        result->set(result_index++, table->ValueAt(i));\n+      }\n     }\n   }\n-  DCHECK_GE(max_length, result_index);\n-  if (result_index == 0) return factory->NewJSArray(0);\n-  result->Shrink(isolate, result_index);\n-  return factory->NewJSArrayWithElements(result, i::PACKED_ELEMENTS,\n-                                         result_index);\n+  DCHECK_EQ(result_index, result->length());\n+  DCHECK_EQ(result_index, length);\n+  return factory->NewJSArrayWithElements(result, i::PACKED_ELEMENTS, length);\n }\n \n }  // namespace\n@@ -7211,26 +7124,24 @@ i::Handle<i::JSArray> SetAsArray(i::Isolate* isolate, i::Object* table_obj,\n   i::Factory* factory = isolate->factory();\n   i::Handle<i::OrderedHashSet> table(i::OrderedHashSet::cast(table_obj),\n                                      isolate);\n-  // Elements skipped by |offset| may already be deleted.\n-  int capacity = table->UsedCapacity();\n-  int max_length = capacity - offset;\n-  if (max_length == 0) return factory->NewJSArray(0);\n-  i::Handle<i::FixedArray> result = factory->NewFixedArray(max_length);\n+  int length = table->NumberOfElements() - offset;\n+  if (length <= 0) return factory->NewJSArray(0);\n+  i::Handle<i::FixedArray> result = factory->NewFixedArray(length);\n   int result_index = 0;\n   {\n     i::DisallowHeapAllocation no_gc;\n+    int capacity = table->UsedCapacity();\n     i::Oddball* the_hole = i::ReadOnlyRoots(isolate).the_hole_value();\n-    for (int i = offset; i < capacity; ++i) {\n+    for (int i = 0; i < capacity; ++i) {\n       i::Object* key = table->KeyAt(i);\n       if (key == the_hole) continue;\n+      if (offset-- > 0) continue;\n       result->set(result_index++, key);\n     }\n   }\n-  DCHECK_GE(max_length, result_index);\n-  if (result_index == 0) return factory->NewJSArray(0);\n-  result->Shrink(isolate, result_index);\n-  return factory->NewJSArrayWithElements(result, i::PACKED_ELEMENTS,\n-                                         result_index);\n+  DCHECK_EQ(result_index, result->length());\n+  DCHECK_EQ(result_index, length);\n+  return factory->NewJSArrayWithElements(result, i::PACKED_ELEMENTS, length);\n }\n }  // namespace\n \n@@ -7501,7 +7412,7 @@ class AsyncCompilationResolver : public i::wasm::CompilationResultResolver {\n             reinterpret_cast<i::Isolate*>(isolate)->global_handles()->Create(\n                 *Utils::OpenHandle(*promise))) {}\n \n-  ~AsyncCompilationResolver() {\n+  ~AsyncCompilationResolver() override {\n     i::GlobalHandles::Destroy(i::Handle<i::Object>::cast(promise_).location());\n   }\n \n@@ -7540,9 +7451,6 @@ void WasmModuleObjectBuilderStreaming::Finish() {\n void WasmModuleObjectBuilderStreaming::Abort(MaybeLocal<Value> exception) {\n }\n \n-WasmModuleObjectBuilderStreaming::~WasmModuleObjectBuilderStreaming() {\n-}\n-\n // static\n v8::ArrayBuffer::Allocator* v8::ArrayBuffer::Allocator::NewDefaultAllocator() {\n   return new ArrayBufferAllocator();\n@@ -7602,9 +7510,8 @@ void ArrayBufferDeleter(void* buffer, size_t length, void* info) {\n \n v8::ArrayBuffer::Contents v8::ArrayBuffer::GetContents() {\n   i::Handle<i::JSArrayBuffer> self = Utils::OpenHandle(this);\n-  size_t byte_length = static_cast<size_t>(self->byte_length()->Number());\n   Contents contents(\n-      self->backing_store(), byte_length, self->allocation_base(),\n+      self->backing_store(), self->byte_length(), self->allocation_base(),\n       self->allocation_length(),\n       self->is_wasm_memory() ? Allocator::AllocationMode::kReservation\n                              : Allocator::AllocationMode::kNormal,\n@@ -7632,7 +7539,7 @@ void v8::ArrayBuffer::Neuter() {\n \n size_t v8::ArrayBuffer::ByteLength() const {\n   i::Handle<i::JSArrayBuffer> obj = Utils::OpenHandle(this);\n-  return static_cast<size_t>(obj->byte_length()->Number());\n+  return obj->byte_length();\n }\n \n \n@@ -7656,6 +7563,7 @@ Local<ArrayBuffer> v8::ArrayBuffer::New(Isolate* isolate, void* data,\n                                         ArrayBufferCreationMode mode) {\n   // Embedders must guarantee that the external backing store is valid.\n   CHECK(byte_length == 0 || data != nullptr);\n+  CHECK_LE(byte_length, i::JSArrayBuffer::kMaxByteLength);\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   LOG_API(i_isolate, ArrayBuffer, New);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n@@ -7687,9 +7595,8 @@ Local<ArrayBuffer> v8::ArrayBufferView::Buffer() {\n \n size_t v8::ArrayBufferView::CopyContents(void* dest, size_t byte_length) {\n   i::Handle<i::JSArrayBufferView> self = Utils::OpenHandle(this);\n-  size_t byte_offset = i::NumberToSize(self->byte_offset());\n-  size_t bytes_to_copy =\n-      i::Min(byte_length, i::NumberToSize(self->byte_length()));\n+  size_t byte_offset = self->byte_offset();\n+  size_t bytes_to_copy = i::Min(byte_length, self->byte_length());\n   if (bytes_to_copy) {\n     i::DisallowHeapAllocation no_gc;\n     i::Isolate* isolate = self->GetIsolate();\n@@ -7720,19 +7627,19 @@ bool v8::ArrayBufferView::HasBuffer() const {\n \n size_t v8::ArrayBufferView::ByteOffset() {\n   i::Handle<i::JSArrayBufferView> obj = Utils::OpenHandle(this);\n-  return static_cast<size_t>(obj->byte_offset()->Number());\n+  return obj->WasNeutered() ? 0 : obj->byte_offset();\n }\n \n \n size_t v8::ArrayBufferView::ByteLength() {\n   i::Handle<i::JSArrayBufferView> obj = Utils::OpenHandle(this);\n-  return static_cast<size_t>(obj->byte_length()->Number());\n+  return obj->WasNeutered() ? 0 : obj->byte_length();\n }\n \n \n size_t v8::TypedArray::Length() {\n   i::Handle<i::JSTypedArray> obj = Utils::OpenHandle(this);\n-  return obj->length_value();\n+  return obj->WasNeutered() ? 0 : obj->length_value();\n }\n \n static_assert(v8::TypedArray::kMaxLength == i::Smi::kMaxValue,\n@@ -7840,9 +7747,8 @@ v8::SharedArrayBuffer::Contents::Contents(\n \n v8::SharedArrayBuffer::Contents v8::SharedArrayBuffer::GetContents() {\n   i::Handle<i::JSArrayBuffer> self = Utils::OpenHandle(this);\n-  size_t byte_length = static_cast<size_t>(self->byte_length()->Number());\n   Contents contents(\n-      self->backing_store(), byte_length, self->allocation_base(),\n+      self->backing_store(), self->byte_length(), self->allocation_base(),\n       self->allocation_length(),\n       self->is_wasm_memory()\n           ? ArrayBuffer::Allocator::AllocationMode::kReservation\n@@ -7858,7 +7764,7 @@ v8::SharedArrayBuffer::Contents v8::SharedArrayBuffer::GetContents() {\n \n size_t v8::SharedArrayBuffer::ByteLength() const {\n   i::Handle<i::JSArrayBuffer> obj = Utils::OpenHandle(this);\n-  return static_cast<size_t>(obj->byte_length()->Number());\n+  return obj->byte_length();\n }\n \n Local<SharedArrayBuffer> v8::SharedArrayBuffer::New(Isolate* isolate,\n@@ -7912,19 +7818,20 @@ Local<Symbol> v8::Symbol::New(Isolate* isolate, Local<String> name) {\n Local<Symbol> v8::Symbol::For(Isolate* isolate, Local<String> name) {\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   i::Handle<i::String> i_name = Utils::OpenHandle(*name);\n-  return Utils::ToLocal(i_isolate->SymbolFor(\n-      i::Heap::kPublicSymbolTableRootIndex, i_name, false));\n+  return Utils::ToLocal(\n+      i_isolate->SymbolFor(i::RootIndex::kPublicSymbolTable, i_name, false));\n }\n \n \n Local<Symbol> v8::Symbol::ForApi(Isolate* isolate, Local<String> name) {\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   i::Handle<i::String> i_name = Utils::OpenHandle(*name);\n   return Utils::ToLocal(\n-      i_isolate->SymbolFor(i::Heap::kApiSymbolTableRootIndex, i_name, false));\n+      i_isolate->SymbolFor(i::RootIndex::kApiSymbolTable, i_name, false));\n }\n \n #define WELL_KNOWN_SYMBOLS(V)                 \\\n+  V(AsyncIterator, async_iterator)            \\\n   V(HasInstance, has_instance)                \\\n   V(IsConcatSpreadable, is_concat_spreadable) \\\n   V(Iterator, iterator)                       \\\n@@ -7961,8 +7868,8 @@ Local<Private> v8::Private::New(Isolate* isolate, Local<String> name) {\n Local<Private> v8::Private::ForApi(Isolate* isolate, Local<String> name) {\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   i::Handle<i::String> i_name = Utils::OpenHandle(*name);\n-  Local<Symbol> result = Utils::ToLocal(i_isolate->SymbolFor(\n-      i::Heap::kApiPrivateSymbolTableRootIndex, i_name, true));\n+  Local<Symbol> result = Utils::ToLocal(\n+      i_isolate->SymbolFor(i::RootIndex::kApiPrivateSymbolTable, i_name, true));\n   return v8::Local<Private>(reinterpret_cast<Private*>(*result));\n }\n \n@@ -8003,15 +7910,13 @@ Local<Integer> v8::Integer::NewFromUnsigned(Isolate* isolate, uint32_t value) {\n }\n \n Local<BigInt> v8::BigInt::New(Isolate* isolate, int64_t value) {\n-  CHECK(i::FLAG_harmony_bigint);\n   i::Isolate* internal_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(internal_isolate);\n   i::Handle<i::BigInt> result = i::BigInt::FromInt64(internal_isolate, value);\n   return Utils::ToLocal(result);\n }\n \n Local<BigInt> v8::BigInt::NewFromUnsigned(Isolate* isolate, uint64_t value) {\n-  CHECK(i::FLAG_harmony_bigint);\n   i::Isolate* internal_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(internal_isolate);\n   i::Handle<i::BigInt> result = i::BigInt::FromUint64(internal_isolate, value);\n@@ -8021,7 +7926,6 @@ Local<BigInt> v8::BigInt::NewFromUnsigned(Isolate* isolate, uint64_t value) {\n MaybeLocal<BigInt> v8::BigInt::NewFromWords(Local<Context> context,\n                                             int sign_bit, int word_count,\n                                             const uint64_t* words) {\n-  CHECK(i::FLAG_harmony_bigint);\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n   ENTER_V8_NO_SCRIPT(isolate, context, BigInt, NewFromWords,\n                      MaybeLocal<BigInt>(), InternalEscapableScope);\n@@ -8186,6 +8090,11 @@ void Isolate::SetEmbedderHeapTracer(EmbedderHeapTracer* tracer) {\n   isolate->heap()->SetEmbedderHeapTracer(tracer);\n }\n \n+EmbedderHeapTracer* Isolate::GetEmbedderHeapTracer() {\n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n+  return isolate->heap()->GetEmbedderHeapTracer();\n+}\n+\n void Isolate::SetGetExternallyAllocatedMemoryInBytesCallback(\n     GetExternallyAllocatedMemoryInBytesCallback callback) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n@@ -8225,9 +8134,9 @@ void Isolate::RequestGarbageCollectionForTesting(GarbageCollectionType type) {\n         kGCCallbackFlagForced);\n   } else {\n     DCHECK_EQ(kFullGarbageCollection, type);\n-    reinterpret_cast<i::Isolate*>(this)->heap()->CollectAllGarbage(\n-        i::Heap::kAbortIncrementalMarkingMask,\n-        i::GarbageCollectionReason::kTesting, kGCCallbackFlagForced);\n+    reinterpret_cast<i::Isolate*>(this)->heap()->PreciseCollectAllGarbage(\n+        i::Heap::kNoGCFlags, i::GarbageCollectionReason::kTesting,\n+        kGCCallbackFlagForced);\n   }\n }\n \n@@ -8296,7 +8205,11 @@ void Isolate::Initialize(Isolate* isolate,\n   if (params.entry_hook || !i::Snapshot::Initialize(i_isolate)) {\n     // If snapshot data was provided and we failed to deserialize it must\n     // have been corrupted.\n-    CHECK_NULL(i_isolate->snapshot_blob());\n+    if (i_isolate->snapshot_blob() != nullptr) {\n+      FATAL(\n+          \"Failed to deserialize the V8 snapshot blob. This can mean that the \"\n+          \"snapshot blob file is corrupted or missing.\");\n+    }\n     base::ElapsedTimer timer;\n     if (i::FLAG_profile_deserialization) timer.Start();\n     i_isolate->Init(nullptr);\n@@ -8366,6 +8279,11 @@ void Isolate::SetHostInitializeImportMetaObjectCallback(\n   isolate->SetHostInitializeImportMetaObjectCallback(callback);\n }\n \n+void Isolate::SetPrepareStackTraceCallback(PrepareStackTraceCallback callback) {\n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n+  isolate->SetPrepareStackTraceCallback(callback);\n+}\n+\n Isolate::DisallowJavascriptExecutionScope::DisallowJavascriptExecutionScope(\n     Isolate* isolate,\n     Isolate::DisallowJavascriptExecutionScope::OnFailure on_failure)\n@@ -8791,17 +8709,17 @@ void Isolate::SetStackLimit(uintptr_t stack_limit) {\n \n void Isolate::GetCodeRange(void** start, size_t* length_in_bytes) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n-  if (isolate->heap()->memory_allocator()->code_range()->valid()) {\n-    *start = reinterpret_cast<void*>(\n-        isolate->heap()->memory_allocator()->code_range()->start());\n-    *length_in_bytes =\n-        isolate->heap()->memory_allocator()->code_range()->size();\n-  } else {\n-    *start = nullptr;\n-    *length_in_bytes = 0;\n-  }\n+  const base::AddressRegion& code_range =\n+      isolate->heap()->memory_allocator()->code_range();\n+  *start = reinterpret_cast<void*>(code_range.begin());\n+  *length_in_bytes = code_range.size();\n }\n \n+MemoryRange Isolate::GetEmbeddedCodeRange() {\n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n+  return {reinterpret_cast<const void*>(isolate->embedded_blob()),\n+          isolate->embedded_blob_size()};\n+}\n \n #define CALLBACK_SETTER(ExternalName, Type, InternalName)      \\\n   void Isolate::Set##ExternalName(Type callback) {             \\\n@@ -8986,9 +8904,6 @@ bool MicrotasksScope::IsRunningMicrotasks(Isolate* v8Isolate) {\n   return isolate->IsRunningMicrotasks();\n }\n \n-String::Utf8Value::Utf8Value(v8::Local<v8::Value> obj)\n-  : Utf8Value(Isolate::GetCurrent(), obj) {}\n-\n String::Utf8Value::Utf8Value(v8::Isolate* isolate, v8::Local<v8::Value> obj)\n     : str_(nullptr), length_(0) {\n   if (obj.IsEmpty()) return;\n@@ -9008,9 +8923,6 @@ String::Utf8Value::~Utf8Value() {\n   i::DeleteArray(str_);\n }\n \n-String::Value::Value(v8::Local<v8::Value> obj)\n-  : Value(Isolate::GetCurrent(), obj) {}\n-\n String::Value::Value(v8::Isolate* isolate, v8::Local<v8::Value> obj)\n     : str_(nullptr), length_(0) {\n   if (obj.IsEmpty()) return;\n@@ -9192,7 +9104,10 @@ int debug::Script::ColumnOffset() const {\n \n std::vector<int> debug::Script::LineEnds() const {\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n-  if (script->type() == i::Script::TYPE_WASM) return std::vector<int>();\n+  if (script->type() == i::Script::TYPE_WASM &&\n+      this->SourceMappingURL().IsEmpty()) {\n+    return std::vector<int>();\n+  }\n   i::Isolate* isolate = script->GetIsolate();\n   i::HandleScope scope(isolate);\n   i::Script::InitLineEnds(script);\n@@ -9281,7 +9196,8 @@ bool debug::Script::GetPossibleBreakpoints(\n     std::vector<debug::BreakLocation>* locations) const {\n   CHECK(!start.IsEmpty());\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n-  if (script->type() == i::Script::TYPE_WASM) {\n+  if (script->type() == i::Script::TYPE_WASM &&\n+      this->SourceMappingURL().IsEmpty()) {\n     i::WasmModuleObject* module_object =\n         i::WasmModuleObject::cast(script->wasm_module_object());\n     return module_object->GetPossibleBreakpoints(start, end, locations);\n@@ -9332,9 +9248,13 @@ bool debug::Script::GetPossibleBreakpoints(\n int debug::Script::GetSourceOffset(const debug::Location& location) const {\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   if (script->type() == i::Script::TYPE_WASM) {\n-    return i::WasmModuleObject::cast(script->wasm_module_object())\n-               ->GetFunctionOffset(location.GetLineNumber()) +\n-           location.GetColumnNumber();\n+    if (this->SourceMappingURL().IsEmpty()) {\n+      return i::WasmModuleObject::cast(script->wasm_module_object())\n+                 ->GetFunctionOffset(location.GetLineNumber()) +\n+             location.GetColumnNumber();\n+    }\n+    DCHECK_EQ(0, location.GetLineNumber());\n+    return location.GetColumnNumber();\n   }\n \n   int line = std::max(location.GetLineNumber() - script->line_offset(), 0);\n@@ -9777,10 +9697,10 @@ int debug::GetNativeAccessorDescriptor(v8::Local<v8::Context> context,\n   }\n   auto isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n   int result = 0;\n-#define IS_BUILTIN_ACESSOR(name, _)                         \\\n+#define IS_BUILTIN_ACESSOR(_, name, ...)                    \\\n   if (*structure == *isolate->factory()->name##_accessor()) \\\n     result |= static_cast<int>(debug::NativeAccessorType::IsBuiltin);\n-  ACCESSOR_INFO_LIST(IS_BUILTIN_ACESSOR)\n+  ACCESSOR_INFO_LIST_GENERATOR(IS_BUILTIN_ACESSOR, /* not used */)\n #undef IS_BUILTIN_ACESSOR\n   i::Handle<i::AccessorInfo> accessor_info =\n       i::Handle<i::AccessorInfo>::cast(structure);\n@@ -9826,7 +9746,7 @@ debug::PostponeInterruptsScope::PostponeInterruptsScope(v8::Isolate* isolate)\n           new i::PostponeInterruptsScope(reinterpret_cast<i::Isolate*>(isolate),\n                                          i::StackGuard::API_INTERRUPT)) {}\n \n-debug::PostponeInterruptsScope::~PostponeInterruptsScope() {}\n+debug::PostponeInterruptsScope::~PostponeInterruptsScope() = default;\n \n Local<String> CpuProfileNode::GetFunctionName() const {\n   const i::ProfileNode* node = reinterpret_cast<const i::ProfileNode*>(this);\n@@ -9950,6 +9870,47 @@ debug::TypeProfile::ScriptData debug::TypeProfile::GetScriptData(\n   return ScriptData(i, type_profile_);\n }\n \n+v8::MaybeLocal<v8::Value> debug::WeakMap::Get(v8::Local<v8::Context> context,\n+                                              v8::Local<v8::Value> key) {\n+  PREPARE_FOR_EXECUTION(context, WeakMap, Get, Value);\n+  auto self = Utils::OpenHandle(this);\n+  Local<Value> result;\n+  i::Handle<i::Object> argv[] = {Utils::OpenHandle(*key)};\n+  has_pending_exception =\n+      !ToLocal<Value>(i::Execution::Call(isolate, isolate->weakmap_get(), self,\n+                                         arraysize(argv), argv),\n+                      &result);\n+  RETURN_ON_FAILED_EXECUTION(Value);\n+  RETURN_ESCAPED(result);\n+}\n+\n+v8::MaybeLocal<debug::WeakMap> debug::WeakMap::Set(\n+    v8::Local<v8::Context> context, v8::Local<v8::Value> key,\n+    v8::Local<v8::Value> value) {\n+  PREPARE_FOR_EXECUTION(context, WeakMap, Set, WeakMap);\n+  auto self = Utils::OpenHandle(this);\n+  i::Handle<i::Object> result;\n+  i::Handle<i::Object> argv[] = {Utils::OpenHandle(*key),\n+                                 Utils::OpenHandle(*value)};\n+  has_pending_exception = !i::Execution::Call(isolate, isolate->weakmap_set(),\n+                                              self, arraysize(argv), argv)\n+                               .ToHandle(&result);\n+  RETURN_ON_FAILED_EXECUTION(WeakMap);\n+  RETURN_ESCAPED(Local<WeakMap>::Cast(Utils::ToLocal(result)));\n+}\n+\n+Local<debug::WeakMap> debug::WeakMap::New(v8::Isolate* isolate) {\n+  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n+  LOG_API(i_isolate, WeakMap, New);\n+  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n+  i::Handle<i::JSWeakMap> obj = i_isolate->factory()->NewJSWeakMap();\n+  return ToApiHandle<debug::WeakMap>(obj);\n+}\n+\n+debug::WeakMap* debug::WeakMap::Cast(v8::Value* value) {\n+  return static_cast<debug::WeakMap*>(value);\n+}\n+\n const char* CpuProfileNode::GetFunctionNameStr() const {\n   const i::ProfileNode* node = reinterpret_cast<const i::ProfileNode*>(this);\n   return node->entry()->name();\n@@ -10134,11 +10095,6 @@ void CpuProfiler::SetIdle(bool is_idle) {\n   isolate->SetIdle(is_idle);\n }\n \n-void CpuProfiler::UseDetailedSourcePositionsForProfiling(Isolate* isolate) {\n-  reinterpret_cast<i::Isolate*>(isolate)\n-      ->set_detailed_source_positions_for_profiling(true);\n-}\n-\n uintptr_t CodeEvent::GetCodeStartAddress() {\n   return reinterpret_cast<i::CodeEvent*>(this)->code_start_address;\n }\n@@ -10546,9 +10502,9 @@ void EmbedderHeapTracer::GarbageCollectionForTesting(\n   CHECK(i::FLAG_expose_gc);\n   i::Heap* const heap = reinterpret_cast<i::Isolate*>(isolate_)->heap();\n   heap->SetEmbedderStackStateForNextFinalizaton(stack_state);\n-  heap->CollectAllGarbage(i::Heap::kAbortIncrementalMarkingMask,\n-                          i::GarbageCollectionReason::kTesting,\n-                          kGCCallbackFlagForced);\n+  heap->PreciseCollectAllGarbage(i::Heap::kNoGCFlags,\n+                                 i::GarbageCollectionReason::kTesting,\n+                                 kGCCallbackFlagForced);\n }\n \n bool EmbedderHeapTracer::AdvanceTracing(double deadline_in_ms) {"
        },
        {
            "sha": "e5f5c7da70f9e0a94f807d6ba87fd4aee755e108",
            "filename": "deps/v8/src/api.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fapi.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -116,6 +116,7 @@ class RegisteredExtension {\n   V(Proxy, JSProxy)                            \\\n   V(debug::GeneratorObject, JSGeneratorObject) \\\n   V(debug::Script, Script)                     \\\n+  V(debug::WeakMap, JSWeakMap)                 \\\n   V(Promise, JSPromise)                        \\\n   V(Primitive, Object)                         \\\n   V(PrimitiveArray, FixedArray)                \\"
        },
        {
            "sha": "db1ee5467c99c8275052970b9bd6886513b5eb0f",
            "filename": "deps/v8/src/arguments.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farguments.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farguments.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farguments.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -27,7 +27,7 @@ namespace internal {\n // Note that length_ (whose value is in the integer range) is defined\n // as intptr_t to provide endian-neutrality on 64-bit archs.\n \n-class Arguments BASE_EMBEDDED {\n+class Arguments {\n  public:\n   Arguments(int length, Object** arguments)\n       : length_(length), arguments_(arguments) {"
        },
        {
            "sha": "758fcd1a68be11ca1073c935b91a9e4ecb67abf6",
            "filename": "deps/v8/src/arm/assembler-arm.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 9,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -46,6 +46,7 @@\n #include \"src/deoptimizer.h\"\n #include \"src/macro-assembler.h\"\n #include \"src/objects-inl.h\"\n+#include \"src/string-constants.h\"\n \n namespace v8 {\n namespace internal {\n@@ -417,6 +418,13 @@ Operand Operand::EmbeddedCode(CodeStub* stub) {\n   return result;\n }\n \n+Operand Operand::EmbeddedStringConstant(const StringConstantBase* str) {\n+  Operand result(0, RelocInfo::EMBEDDED_OBJECT);\n+  result.is_heap_object_request_ = true;\n+  result.value_.heap_object_request = HeapObjectRequest(str);\n+  return result;\n+}\n+\n MemOperand::MemOperand(Register rn, int32_t offset, AddrMode am)\n     : rn_(rn), rm_(no_reg), offset_(offset), am_(am) {\n   // Accesses below the stack pointer are not safe, and are prohibited by the\n@@ -472,6 +480,7 @@ void NeonMemOperand::SetAlignment(int align) {\n }\n \n void Assembler::AllocateAndInstallRequestedHeapObjects(Isolate* isolate) {\n+  DCHECK_IMPLIES(isolate == nullptr, heap_object_requests_.empty());\n   for (auto& request : heap_object_requests_) {\n     Handle<HeapObject> object;\n     switch (request.kind()) {\n@@ -483,6 +492,12 @@ void Assembler::AllocateAndInstallRequestedHeapObjects(Isolate* isolate) {\n         request.code_stub()->set_isolate(isolate);\n         object = request.code_stub()->GetCode();\n         break;\n+      case HeapObjectRequest::kStringConstant: {\n+        const StringConstantBase* str = request.string();\n+        CHECK_NOT_NULL(str);\n+        object = str->AllocateStringConstant(isolate);\n+        break;\n+      }\n     }\n     Address pc = reinterpret_cast<Address>(buffer_) + request.offset();\n     Memory<Address>(constant_pool_entry_address(pc, 0 /* unused */)) =\n@@ -1418,7 +1433,7 @@ int Assembler::branch_offset(Label* L) {\n \n // Branch instructions.\n void Assembler::b(int branch_offset, Condition cond, RelocInfo::Mode rmode) {\n-  RecordRelocInfo(rmode);\n+  if (!RelocInfo::IsNone(rmode)) RecordRelocInfo(rmode);\n   DCHECK_EQ(branch_offset & 3, 0);\n   int imm24 = branch_offset >> 2;\n   const bool b_imm_check = is_int24(imm24);\n@@ -1432,7 +1447,7 @@ void Assembler::b(int branch_offset, Condition cond, RelocInfo::Mode rmode) {\n }\n \n void Assembler::bl(int branch_offset, Condition cond, RelocInfo::Mode rmode) {\n-  RecordRelocInfo(rmode);\n+  if (!RelocInfo::IsNone(rmode)) RecordRelocInfo(rmode);\n   DCHECK_EQ(branch_offset & 3, 0);\n   int imm24 = branch_offset >> 2;\n   const bool bl_imm_check = is_int24(imm24);\n@@ -5103,13 +5118,7 @@ void Assembler::dq(uint64_t value) {\n }\n \n void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data) {\n-  if (options().disable_reloc_info_for_patching) return;\n-  if (RelocInfo::IsNone(rmode) ||\n-      // Don't record external references unless the heap will be serialized.\n-      (RelocInfo::IsOnlyForSerializer(rmode) &&\n-       !options().record_reloc_info_for_serialization && !emit_debug_code())) {\n-    return;\n-  }\n+  if (!ShouldRecordRelocInfo(rmode)) return;\n   DCHECK_GE(buffer_space(), kMaxRelocSize);  // too late to grow buffer here\n   RelocInfo rinfo(reinterpret_cast<Address>(pc_), rmode, data, nullptr);\n   reloc_info_writer.Write(&rinfo);"
        },
        {
            "sha": "1bfa58b85344664c200b210bdb76187dea5222fb",
            "filename": "deps/v8/src/arm/assembler-arm.h",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -393,7 +393,7 @@ enum Coprocessor {\n // Machine instruction Operands\n \n // Class Operand represents a shifter operand in data processing instructions\n-class Operand BASE_EMBEDDED {\n+class Operand {\n  public:\n   // immediate\n   V8_INLINE explicit Operand(int32_t immediate,\n@@ -425,6 +425,7 @@ class Operand BASE_EMBEDDED {\n \n   static Operand EmbeddedNumber(double number);  // Smi or HeapNumber.\n   static Operand EmbeddedCode(CodeStub* stub);\n+  static Operand EmbeddedStringConstant(const StringConstantBase* str);\n \n   // Return true if this is a register operand.\n   bool IsRegister() const {\n@@ -498,7 +499,7 @@ class Operand BASE_EMBEDDED {\n \n \n // Class MemOperand represents a memory operand in load and store instructions\n-class MemOperand BASE_EMBEDDED {\n+class MemOperand {\n  public:\n   // [rn +/- offset]      Offset/NegOffset\n   // [rn +/- offset]!     PreIndex/NegPreIndex\n@@ -557,7 +558,7 @@ class MemOperand BASE_EMBEDDED {\n \n // Class NeonMemOperand represents a memory operand in load and\n // store NEON instructions\n-class NeonMemOperand BASE_EMBEDDED {\n+class NeonMemOperand {\n  public:\n   // [rn {:align}]       Offset\n   // [rn {:align}]!      PostIndex\n@@ -580,7 +581,7 @@ class NeonMemOperand BASE_EMBEDDED {\n \n \n // Class NeonListOperand represents a list of NEON registers\n-class NeonListOperand BASE_EMBEDDED {\n+class NeonListOperand {\n  public:\n   explicit NeonListOperand(DoubleRegister base, int register_count = 1)\n     : base_(base), register_count_(register_count) {}\n@@ -1693,7 +1694,7 @@ class V8_EXPORT_PRIVATE Assembler : public AssemblerBase {\n   friend class UseScratchRegisterScope;\n };\n \n-class EnsureSpace BASE_EMBEDDED {\n+class EnsureSpace {\n  public:\n   V8_INLINE explicit EnsureSpace(Assembler* assembler);\n };"
        },
        {
            "sha": "c7eaef1325aa8ec36788901f8e44f0dc54212a87",
            "filename": "deps/v8/src/arm/code-stubs-arm.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -131,7 +131,7 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n                IsolateAddressId::kPendingExceptionAddress, isolate())));\n   }\n   __ str(r0, MemOperand(scratch));\n-  __ LoadRoot(r0, Heap::kExceptionRootIndex);\n+  __ LoadRoot(r0, RootIndex::kException);\n   __ b(&exit);\n \n   // Invoke: Link this frame into the handler chain.\n@@ -418,7 +418,7 @@ static void CallApiFunctionAndReturn(MacroAssembler* masm,\n   __ LeaveExitFrame(false, r4, stack_space_operand != nullptr);\n \n   // Check if the function scheduled an exception.\n-  __ LoadRoot(r4, Heap::kTheHoleValueRootIndex);\n+  __ LoadRoot(r4, RootIndex::kTheHoleValue);\n   __ Move(r6, ExternalReference::scheduled_exception_address(isolate));\n   __ ldr(r5, MemOperand(r6));\n   __ cmp(r4, r5);\n@@ -469,14 +469,14 @@ void CallApiCallbackStub::Generate(MacroAssembler* masm) {\n   STATIC_ASSERT(FCA::kHolderIndex == 0);\n \n   // new target\n-  __ PushRoot(Heap::kUndefinedValueRootIndex);\n+  __ PushRoot(RootIndex::kUndefinedValue);\n \n   // call data\n   __ push(call_data);\n \n   Register scratch0 = call_data;\n   Register scratch1 = r5;\n-  __ LoadRoot(scratch0, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(scratch0, RootIndex::kUndefinedValue);\n   // return value\n   __ push(scratch0);\n   // return value default\n@@ -549,7 +549,7 @@ void CallApiGetterStub::Generate(MacroAssembler* masm) {\n   // Push data from AccessorInfo.\n   __ ldr(scratch, FieldMemOperand(callback, AccessorInfo::kDataOffset));\n   __ push(scratch);\n-  __ LoadRoot(scratch, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(scratch, RootIndex::kUndefinedValue);\n   __ Push(scratch, scratch);\n   __ Move(scratch, ExternalReference::isolate_address(isolate()));\n   __ Push(scratch, holder);"
        },
        {
            "sha": "7dc4ced32129d78fffa9c97600c306f9df3439f6",
            "filename": "deps/v8/src/arm/codegen-arm.cc",
            "status": "modified",
            "additions": 25,
            "deletions": 21,
            "changes": 46,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -9,7 +9,6 @@\n #include \"src/arm/assembler-arm-inl.h\"\n #include \"src/arm/simulator-arm.h\"\n #include \"src/codegen.h\"\n-#include \"src/isolate.h\"\n #include \"src/macro-assembler.h\"\n \n namespace v8 {\n@@ -19,17 +18,17 @@ namespace internal {\n \n #if defined(V8_HOST_ARCH_ARM)\n \n-MemCopyUint8Function CreateMemCopyUint8Function(Isolate* isolate,\n-                                                MemCopyUint8Function stub) {\n+MemCopyUint8Function CreateMemCopyUint8Function(MemCopyUint8Function stub) {\n #if defined(USE_SIMULATOR)\n   return stub;\n #else\n+  v8::PageAllocator* page_allocator = GetPlatformPageAllocator();\n   size_t allocated = 0;\n-  byte* buffer = AllocatePage(isolate->heap()->GetRandomMmapAddr(), &allocated);\n+  byte* buffer = AllocatePage(page_allocator,\n+                              page_allocator->GetRandomMmapAddr(), &allocated);\n   if (buffer == nullptr) return stub;\n \n-  MacroAssembler masm(isolate, buffer, static_cast<int>(allocated),\n-                      CodeObjectRequired::kNo);\n+  MacroAssembler masm(AssemblerOptions{}, buffer, static_cast<int>(allocated));\n \n   Register dest = r0;\n   Register src = r1;\n@@ -166,28 +165,30 @@ MemCopyUint8Function CreateMemCopyUint8Function(Isolate* isolate,\n   __ Ret();\n \n   CodeDesc desc;\n-  masm.GetCode(isolate, &desc);\n+  masm.GetCode(nullptr, &desc);\n   DCHECK(!RelocInfo::RequiresRelocationAfterCodegen(desc));\n \n   Assembler::FlushICache(buffer, allocated);\n-  CHECK(SetPermissions(buffer, allocated, PageAllocator::kReadExecute));\n+  CHECK(SetPermissions(page_allocator, buffer, allocated,\n+                       PageAllocator::kReadExecute));\n   return FUNCTION_CAST<MemCopyUint8Function>(buffer);\n #endif\n }\n \n \n // Convert 8 to 16. The number of character to copy must be at least 8.\n MemCopyUint16Uint8Function CreateMemCopyUint16Uint8Function(\n-    Isolate* isolate, MemCopyUint16Uint8Function stub) {\n+    MemCopyUint16Uint8Function stub) {\n #if defined(USE_SIMULATOR)\n   return stub;\n #else\n+  v8::PageAllocator* page_allocator = GetPlatformPageAllocator();\n   size_t allocated = 0;\n-  byte* buffer = AllocatePage(isolate->heap()->GetRandomMmapAddr(), &allocated);\n+  byte* buffer = AllocatePage(page_allocator,\n+                              page_allocator->GetRandomMmapAddr(), &allocated);\n   if (buffer == nullptr) return stub;\n \n-  MacroAssembler masm(isolate, buffer, static_cast<int>(allocated),\n-                      CodeObjectRequired::kNo);\n+  MacroAssembler masm(AssemblerOptions{}, buffer, static_cast<int>(allocated));\n \n   Register dest = r0;\n   Register src = r1;\n@@ -256,38 +257,41 @@ MemCopyUint16Uint8Function CreateMemCopyUint16Uint8Function(\n   }\n \n   CodeDesc desc;\n-  masm.GetCode(isolate, &desc);\n+  masm.GetCode(nullptr, &desc);\n \n   Assembler::FlushICache(buffer, allocated);\n-  CHECK(SetPermissions(buffer, allocated, PageAllocator::kReadExecute));\n+  CHECK(SetPermissions(page_allocator, buffer, allocated,\n+                       PageAllocator::kReadExecute));\n   return FUNCTION_CAST<MemCopyUint16Uint8Function>(buffer);\n #endif\n }\n #endif\n \n-UnaryMathFunctionWithIsolate CreateSqrtFunction(Isolate* isolate) {\n+UnaryMathFunction CreateSqrtFunction() {\n #if defined(USE_SIMULATOR)\n   return nullptr;\n #else\n+  v8::PageAllocator* page_allocator = GetPlatformPageAllocator();\n   size_t allocated = 0;\n-  byte* buffer = AllocatePage(isolate->heap()->GetRandomMmapAddr(), &allocated);\n+  byte* buffer = AllocatePage(page_allocator,\n+                              page_allocator->GetRandomMmapAddr(), &allocated);\n   if (buffer == nullptr) return nullptr;\n \n-  MacroAssembler masm(isolate, buffer, static_cast<int>(allocated),\n-                      CodeObjectRequired::kNo);\n+  MacroAssembler masm(AssemblerOptions{}, buffer, static_cast<int>(allocated));\n \n   __ MovFromFloatParameter(d0);\n   __ vsqrt(d0, d0);\n   __ MovToFloatResult(d0);\n   __ Ret();\n \n   CodeDesc desc;\n-  masm.GetCode(isolate, &desc);\n+  masm.GetCode(nullptr, &desc);\n   DCHECK(!RelocInfo::RequiresRelocationAfterCodegen(desc));\n \n   Assembler::FlushICache(buffer, allocated);\n-  CHECK(SetPermissions(buffer, allocated, PageAllocator::kReadExecute));\n-  return FUNCTION_CAST<UnaryMathFunctionWithIsolate>(buffer);\n+  CHECK(SetPermissions(page_allocator, buffer, allocated,\n+                       PageAllocator::kReadExecute));\n+  return FUNCTION_CAST<UnaryMathFunction>(buffer);\n #endif\n }\n "
        },
        {
            "sha": "f3be7a7c4ae5c33dce4d3b10df7bdd39cfc15a98",
            "filename": "deps/v8/src/arm/interface-descriptors-arm.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Finterface-descriptors-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -88,9 +88,9 @@ void CallVarargsDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   // r0 : number of arguments (on the stack, not including receiver)\n   // r1 : the target to call\n-  // r2 : arguments list (FixedArray)\n   // r4 : arguments list length (untagged)\n-  Register registers[] = {r1, r0, r2, r4};\n+  // r2 : arguments list (FixedArray)\n+  Register registers[] = {r1, r0, r4, r2};\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n@@ -125,9 +125,9 @@ void ConstructVarargsDescriptor::InitializePlatformSpecific(\n   // r0 : number of arguments (on the stack, not including receiver)\n   // r1 : the target to call\n   // r3 : the new target\n-  // r2 : arguments list (FixedArray)\n   // r4 : arguments list length (untagged)\n-  Register registers[] = {r1, r3, r0, r2, r4};\n+  // r2 : arguments list (FixedArray)\n+  Register registers[] = {r1, r3, r0, r4, r2};\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n@@ -193,7 +193,7 @@ void BinaryOpDescriptor::InitializePlatformSpecific(\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n-void ArgumentAdaptorDescriptor::InitializePlatformSpecific(\n+void ArgumentsAdaptorDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   Register registers[] = {\n       r1,  // JSFunction\n@@ -237,10 +237,10 @@ void InterpreterPushArgsThenConstructDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   Register registers[] = {\n       r0,  // argument count (not including receiver)\n-      r3,  // new target\n+      r4,  // address of the first argument\n       r1,  // constructor to call\n+      r3,  // new target\n       r2,  // allocation site feedback if available, undefined otherwise\n-      r4   // address of the first argument\n   };\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }"
        },
        {
            "sha": "cdf9dad1d90e74a22869c5512502c97a01b9b26e",
            "filename": "deps/v8/src/arm/macro-assembler-arm.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 11,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -130,7 +130,7 @@ int TurboAssembler::PopCallerSaved(SaveFPRegsMode fp_mode, Register exclusion1,\n void TurboAssembler::LoadFromConstantsTable(Register destination,\n                                             int constant_index) {\n   DCHECK(isolate()->heap()->RootCanBeTreatedAsConstant(\n-      Heap::kBuiltinsConstantsTableRootIndex));\n+      RootIndex::kBuiltinsConstantsTable));\n \n   // The ldr call below could end up clobbering ip when the offset does not fit\n   // into 12 bits (and thus needs to be loaded from the constant pool). In that\n@@ -147,7 +147,7 @@ void TurboAssembler::LoadFromConstantsTable(Register destination,\n     reg = r7;\n   }\n \n-  LoadRoot(reg, Heap::kBuiltinsConstantsTableRootIndex);\n+  LoadRoot(reg, RootIndex::kBuiltinsConstantsTable);\n   ldr(destination, MemOperand(reg, offset));\n \n   if (could_clobber_ip) {\n@@ -527,7 +527,7 @@ void MacroAssembler::Store(Register src,\n   }\n }\n \n-void TurboAssembler::LoadRoot(Register destination, Heap::RootListIndex index,\n+void TurboAssembler::LoadRoot(Register destination, RootIndex index,\n                               Condition cond) {\n   ldr(destination, MemOperand(kRootRegister, RootRegisterOffset(index)), cond);\n }\n@@ -615,8 +615,6 @@ void TurboAssembler::CallRecordWriteStub(\n       RecordWriteDescriptor::kObject));\n   Register slot_parameter(\n       callable.descriptor().GetRegisterParameter(RecordWriteDescriptor::kSlot));\n-  Register isolate_parameter(callable.descriptor().GetRegisterParameter(\n-      RecordWriteDescriptor::kIsolate));\n   Register remembered_set_parameter(callable.descriptor().GetRegisterParameter(\n       RecordWriteDescriptor::kRememberedSet));\n   Register fp_mode_parameter(callable.descriptor().GetRegisterParameter(\n@@ -628,7 +626,6 @@ void TurboAssembler::CallRecordWriteStub(\n   Pop(slot_parameter);\n   Pop(object_parameter);\n \n-  Move(isolate_parameter, ExternalReference::isolate_address(isolate()));\n   Move(remembered_set_parameter, Smi::FromEnum(remembered_set_action));\n   Move(fp_mode_parameter, Smi::FromEnum(fp_mode));\n   Call(callable.code(), RelocInfo::CODE_TARGET);\n@@ -1520,7 +1517,7 @@ void MacroAssembler::InvokeFunctionCode(Register function, Register new_target,\n \n   // Clear the new.target register if not given.\n   if (!new_target.is_valid()) {\n-    LoadRoot(r3, Heap::kUndefinedValueRootIndex);\n+    LoadRoot(r3, RootIndex::kUndefinedValue);\n   }\n \n   Label done;\n@@ -1642,9 +1639,7 @@ void MacroAssembler::CompareInstanceType(Register map,\n   cmp(type_reg, Operand(type));\n }\n \n-\n-void MacroAssembler::CompareRoot(Register obj,\n-                                 Heap::RootListIndex index) {\n+void MacroAssembler::CompareRoot(Register obj, RootIndex index) {\n   UseScratchRegisterScope temps(this);\n   Register scratch = temps.Acquire();\n   DCHECK(obj != scratch);\n@@ -2053,7 +2048,7 @@ void MacroAssembler::AssertUndefinedOrAllocationSite(Register object,\n   if (emit_debug_code()) {\n     Label done_checking;\n     AssertNotSmi(object);\n-    CompareRoot(object, Heap::kUndefinedValueRootIndex);\n+    CompareRoot(object, RootIndex::kUndefinedValue);\n     b(eq, &done_checking);\n     ldr(scratch, FieldMemOperand(object, HeapObject::kMapOffset));\n     CompareInstanceType(scratch, scratch, ALLOCATION_SITE_TYPE);"
        },
        {
            "sha": "ef75c3fe4ca2816b7c3fe8b89637fd6f965892a9",
            "filename": "deps/v8/src/arm/macro-assembler-arm.h",
            "status": "modified",
            "additions": 13,
            "deletions": 8,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -71,6 +71,9 @@ enum TargetAddressStorageMode {\n \n class V8_EXPORT_PRIVATE TurboAssembler : public TurboAssemblerBase {\n  public:\n+  TurboAssembler(const AssemblerOptions& options, void* buffer, int buffer_size)\n+      : TurboAssemblerBase(options, buffer, buffer_size) {}\n+\n   TurboAssembler(Isolate* isolate, const AssemblerOptions& options,\n                  void* buffer, int buffer_size,\n                  CodeObjectRequired create_code_object)\n@@ -481,11 +484,10 @@ class V8_EXPORT_PRIVATE TurboAssembler : public TurboAssemblerBase {\n   }\n \n   // Load an object from the root table.\n-  void LoadRoot(Register destination, Heap::RootListIndex index) override {\n+  void LoadRoot(Register destination, RootIndex index) override {\n     LoadRoot(destination, index, al);\n   }\n-  void LoadRoot(Register destination, Heap::RootListIndex index,\n-                Condition cond);\n+  void LoadRoot(Register destination, RootIndex index, Condition cond);\n \n   // Jump if the register contains a smi.\n   void JumpIfSmi(Register value, Label* smi_label);\n@@ -566,10 +568,14 @@ class V8_EXPORT_PRIVATE TurboAssembler : public TurboAssemblerBase {\n // MacroAssembler implements a collection of frequently used macros.\n class MacroAssembler : public TurboAssembler {\n  public:\n+  MacroAssembler(const AssemblerOptions& options, void* buffer, int size)\n+      : TurboAssembler(options, buffer, size) {}\n+\n   MacroAssembler(Isolate* isolate, void* buffer, int size,\n                  CodeObjectRequired create_code_object)\n       : MacroAssembler(isolate, AssemblerOptions::Default(isolate), buffer,\n                        size, create_code_object) {}\n+\n   MacroAssembler(Isolate* isolate, const AssemblerOptions& options,\n                  void* buffer, int size, CodeObjectRequired create_code_object);\n \n@@ -713,23 +719,22 @@ class MacroAssembler : public TurboAssembler {\n \n   // Compare the object in a register to a value from the root list.\n   // Acquires a scratch register.\n-  void CompareRoot(Register obj, Heap::RootListIndex index);\n-  void PushRoot(Heap::RootListIndex index) {\n+  void CompareRoot(Register obj, RootIndex index);\n+  void PushRoot(RootIndex index) {\n     UseScratchRegisterScope temps(this);\n     Register scratch = temps.Acquire();\n     LoadRoot(scratch, index);\n     Push(scratch);\n   }\n \n   // Compare the object in a register to a value and jump if they are equal.\n-  void JumpIfRoot(Register with, Heap::RootListIndex index, Label* if_equal) {\n+  void JumpIfRoot(Register with, RootIndex index, Label* if_equal) {\n     CompareRoot(with, index);\n     b(eq, if_equal);\n   }\n \n   // Compare the object in a register to a value and jump if they are not equal.\n-  void JumpIfNotRoot(Register with, Heap::RootListIndex index,\n-                     Label* if_not_equal) {\n+  void JumpIfNotRoot(Register with, RootIndex index, Label* if_not_equal) {\n     CompareRoot(with, index);\n     b(ne, if_not_equal);\n   }"
        },
        {
            "sha": "e9d74104d3b030abf0434fa732a4006f09cc8f6d",
            "filename": "deps/v8/src/arm/simulator-arm.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fsimulator-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -3212,15 +3212,15 @@ void Simulator::DecodeTypeVFP(Instruction* instr) {\n         DecodeVCMP(instr);\n       } else if (((instr->Opc2Value() == 0x1)) && (instr->Opc3Value() == 0x3)) {\n         // vsqrt\n-        lazily_initialize_fast_sqrt(isolate_);\n+        lazily_initialize_fast_sqrt();\n         if (instr->SzValue() == 0x1) {\n           double dm_value = get_double_from_d_register(vm).get_scalar();\n-          double dd_value = fast_sqrt(dm_value, isolate_);\n+          double dd_value = fast_sqrt(dm_value);\n           dd_value = canonicalizeNaN(dd_value);\n           set_d_register_from_double(vd, dd_value);\n         } else {\n           float sm_value = get_float_from_s_register(m).get_scalar();\n-          float sd_value = fast_sqrt(sm_value, isolate_);\n+          float sd_value = fast_sqrt(sm_value);\n           sd_value = canonicalizeNaN(sd_value);\n           set_s_register_from_float(d, sd_value);\n         }\n@@ -5282,10 +5282,10 @@ void Simulator::DecodeSpecialCondition(Instruction* instr) {\n               src[i] = bit_cast<uint32_t>(result);\n             }\n           } else {\n-            lazily_initialize_fast_sqrt(isolate_);\n+            lazily_initialize_fast_sqrt();\n             for (int i = 0; i < 4; i++) {\n               float radicand = bit_cast<float>(src[i]);\n-              float result = 1.0f / fast_sqrt(radicand, isolate_);\n+              float result = 1.0f / fast_sqrt(radicand);\n               result = canonicalizeNaN(result);\n               src[i] = bit_cast<uint32_t>(result);\n             }"
        },
        {
            "sha": "5a163b06fdc9ed7deac1ad3c953e39c90e2f4893",
            "filename": "deps/v8/src/arm64/assembler-arm64-inl.h",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -341,7 +341,9 @@ Immediate Operand::immediate_for_heap_object_request() const {\n   DCHECK((heap_object_request().kind() == HeapObjectRequest::kHeapNumber &&\n           immediate_.rmode() == RelocInfo::EMBEDDED_OBJECT) ||\n          (heap_object_request().kind() == HeapObjectRequest::kCodeStub &&\n-          immediate_.rmode() == RelocInfo::CODE_TARGET));\n+          immediate_.rmode() == RelocInfo::CODE_TARGET) ||\n+         (heap_object_request().kind() == HeapObjectRequest::kStringConstant &&\n+          immediate_.rmode() == RelocInfo::EMBEDDED_OBJECT));\n   return immediate_;\n }\n "
        },
        {
            "sha": "eb581b472b29ead281a931cf027f5725b66614d5",
            "filename": "deps/v8/src/arm64/assembler-arm64.cc",
            "status": "modified",
            "additions": 25,
            "deletions": 18,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -36,6 +36,7 @@\n #include \"src/code-stubs.h\"\n #include \"src/frame-constants.h\"\n #include \"src/register-configuration.h\"\n+#include \"src/string-constants.h\"\n \n namespace v8 {\n namespace internal {\n@@ -583,6 +584,7 @@ void Assembler::Reset() {\n }\n \n void Assembler::AllocateAndInstallRequestedHeapObjects(Isolate* isolate) {\n+  DCHECK_IMPLIES(isolate == nullptr, heap_object_requests_.empty());\n   for (auto& request : heap_object_requests_) {\n     Address pc = reinterpret_cast<Address>(buffer_) + request.offset();\n     switch (request.kind()) {\n@@ -601,6 +603,13 @@ void Assembler::AllocateAndInstallRequestedHeapObjects(Isolate* isolate) {\n                          request.code_stub()->GetCode());\n         break;\n       }\n+      case HeapObjectRequest::kStringConstant: {\n+        const StringConstantBase* str = request.string();\n+        CHECK_NOT_NULL(str);\n+        set_target_address_at(pc, 0 /* unused */,\n+                              str->AllocateStringConstant(isolate).address());\n+        break;\n+      }\n     }\n   }\n }\n@@ -1717,6 +1726,13 @@ Operand Operand::EmbeddedCode(CodeStub* stub) {\n   return result;\n }\n \n+Operand Operand::EmbeddedStringConstant(const StringConstantBase* str) {\n+  Operand result(0, RelocInfo::EMBEDDED_OBJECT);\n+  result.heap_object_request_.emplace(str);\n+  DCHECK(result.IsHeapObjectRequest());\n+  return result;\n+}\n+\n void Assembler::ldr(const CPURegister& rt, const Operand& operand) {\n   if (operand.IsHeapObjectRequest()) {\n     RequestHeapObject(operand.heap_object_request());\n@@ -4751,14 +4767,6 @@ void Assembler::GrowBuffer() {\n \n void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data,\n                                 ConstantPoolMode constant_pool_mode) {\n-  // Non-relocatable constants should not end up in the literal pool.\n-  DCHECK(!RelocInfo::IsNone(rmode));\n-  if (options().disable_reloc_info_for_patching) return;\n-\n-  // We do not try to reuse pool constants.\n-  RelocInfo rinfo(reinterpret_cast<Address>(pc_), rmode, data, nullptr);\n-  bool write_reloc_info = true;\n-\n   if ((rmode == RelocInfo::COMMENT) ||\n       (rmode == RelocInfo::INTERNAL_REFERENCE) ||\n       (rmode == RelocInfo::CONST_POOL) || (rmode == RelocInfo::VENEER_POOL) ||\n@@ -4772,23 +4780,22 @@ void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data,\n            RelocInfo::IsConstPool(rmode) || RelocInfo::IsVeneerPool(rmode));\n     // These modes do not need an entry in the constant pool.\n   } else if (constant_pool_mode == NEEDS_POOL_ENTRY) {\n-    write_reloc_info = constpool_.RecordEntry(data, rmode);\n+    bool new_constpool_entry = constpool_.RecordEntry(data, rmode);\n     // Make sure the constant pool is not emitted in place of the next\n     // instruction for which we just recorded relocation info.\n     BlockConstPoolFor(1);\n+    if (!new_constpool_entry) return;\n   }\n   // For modes that cannot use the constant pool, a different sequence of\n   // instructions will be emitted by this function's caller.\n \n-  if (write_reloc_info) {\n-    // Don't record external references unless the heap will be serialized.\n-    if (RelocInfo::IsOnlyForSerializer(rmode) &&\n-        !options().record_reloc_info_for_serialization && !emit_debug_code()) {\n-      return;\n-    }\n-    DCHECK_GE(buffer_space(), kMaxRelocSize);  // too late to grow buffer here\n-    reloc_info_writer.Write(&rinfo);\n-  }\n+  if (!ShouldRecordRelocInfo(rmode)) return;\n+\n+  // We do not try to reuse pool constants.\n+  RelocInfo rinfo(reinterpret_cast<Address>(pc_), rmode, data, nullptr);\n+\n+  DCHECK_GE(buffer_space(), kMaxRelocSize);  // too late to grow buffer here\n+  reloc_info_writer.Write(&rinfo);\n }\n \n void Assembler::near_jump(int offset, RelocInfo::Mode rmode) {"
        },
        {
            "sha": "0432708fd12f6a6eed015d99e55d737ec4c1035f",
            "filename": "deps/v8/src/arm64/assembler-arm64.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -718,6 +718,7 @@ class Operand {\n \n   static Operand EmbeddedNumber(double number);  // Smi or HeapNumber.\n   static Operand EmbeddedCode(CodeStub* stub);\n+  static Operand EmbeddedStringConstant(const StringConstantBase* str);\n \n   inline bool IsHeapObjectRequest() const;\n   inline HeapObjectRequest heap_object_request() const;\n@@ -3624,8 +3625,7 @@ class PatchingAssembler : public Assembler {\n   void PatchSubSp(uint32_t immediate);\n };\n \n-\n-class EnsureSpace BASE_EMBEDDED {\n+class EnsureSpace {\n  public:\n   explicit EnsureSpace(Assembler* assembler) {\n     assembler->CheckBufferSpace();"
        },
        {
            "sha": "9b8114c9bfc1c08700a280b19a8b652921e96532",
            "filename": "deps/v8/src/arm64/code-stubs-arm64.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -124,7 +124,7 @@ void JSEntryStub::Generate(MacroAssembler* masm) {\n                     IsolateAddressId::kPendingExceptionAddress, isolate())));\n   }\n   __ Str(code_entry, MemOperand(x10));\n-  __ LoadRoot(x0, Heap::kExceptionRootIndex);\n+  __ LoadRoot(x0, RootIndex::kException);\n   __ B(&exit);\n \n   // Invoke: Link this frame into the handler chain.\n@@ -434,8 +434,7 @@ static void CallApiFunctionAndReturn(MacroAssembler* masm,\n   // Check if the function scheduled an exception.\n   __ Mov(x5, ExternalReference::scheduled_exception_address(isolate));\n   __ Ldr(x5, MemOperand(x5));\n-  __ JumpIfNotRoot(x5, Heap::kTheHoleValueRootIndex,\n-                   &promote_scheduled_exception);\n+  __ JumpIfNotRoot(x5, RootIndex::kTheHoleValue, &promote_scheduled_exception);\n \n   __ DropSlots(stack_space);\n   __ Ret();\n@@ -484,7 +483,7 @@ void CallApiCallbackStub::Generate(MacroAssembler* masm) {\n   STATIC_ASSERT(FCA::kHolderIndex == 0);\n \n   Register undef = x7;\n-  __ LoadRoot(undef, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(undef, RootIndex::kUndefinedValue);\n \n   // Push new target, call data.\n   __ Push(undef, call_data);\n@@ -562,7 +561,7 @@ void CallApiGetterStub::Generate(MacroAssembler* masm) {\n                      name));\n \n   __ Ldr(data, FieldMemOperand(callback, AccessorInfo::kDataOffset));\n-  __ LoadRoot(undef, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(undef, RootIndex::kUndefinedValue);\n   __ Mov(isolate_address, ExternalReference::isolate_address(isolate()));\n   __ Ldr(name, FieldMemOperand(callback, AccessorInfo::kNameOffset));\n "
        },
        {
            "sha": "180e3f54b73803069a970b401ee8e54cced171ae",
            "filename": "deps/v8/src/arm64/codegen-arm64.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fcodegen-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fcodegen-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fcodegen-arm64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -8,17 +8,14 @@\n #include \"src/arm64/macro-assembler-arm64-inl.h\"\n #include \"src/arm64/simulator-arm64.h\"\n #include \"src/codegen.h\"\n-#include \"src/isolate.h\"\n #include \"src/macro-assembler.h\"\n \n namespace v8 {\n namespace internal {\n \n #define __ ACCESS_MASM(masm)\n \n-UnaryMathFunctionWithIsolate CreateSqrtFunction(Isolate* isolate) {\n-  return nullptr;\n-}\n+UnaryMathFunction CreateSqrtFunction() { return nullptr; }\n \n #undef __\n "
        },
        {
            "sha": "1d238e2d32cfd3088ddbe0a98098fd9d7dd43775",
            "filename": "deps/v8/src/arm64/constants-arm64.h",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fconstants-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fconstants-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fconstants-arm64.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -291,10 +291,8 @@ M_(FPCR, AHP_mask | DN_mask | FZ_mask | RMode_mask)\n   const uint32_t Name##_mask = ((1 << Name##_width) - 1) << LowBit;\n #define DECLARE_INSTRUCTION_FIELDS_OFFSETS(Name, HighBit, LowBit, unused_1)    \\\n   DECLARE_FIELDS_OFFSETS(Name, HighBit, LowBit, unused_1, unused_2)\n-#define NOTHING(A, B)\n INSTRUCTION_FIELDS_LIST(DECLARE_INSTRUCTION_FIELDS_OFFSETS)\n SYSTEM_REGISTER_FIELDS_LIST(DECLARE_FIELDS_OFFSETS, NOTHING)\n-#undef NOTHING\n #undef DECLARE_FIELDS_OFFSETS\n #undef DECLARE_INSTRUCTION_FIELDS_OFFSETS\n "
        },
        {
            "sha": "905cc51a5705f2df8b0275babdb7449cc89d6831",
            "filename": "deps/v8/src/arm64/interface-descriptors-arm64.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Finterface-descriptors-arm64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -89,9 +89,9 @@ void CallVarargsDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   // x0 : number of arguments (on the stack, not including receiver)\n   // x1 : the target to call\n-  // x2 : arguments list (FixedArray)\n   // x4 : arguments list length (untagged)\n-  Register registers[] = {x1, x0, x2, x4};\n+  // x2 : arguments list (FixedArray)\n+  Register registers[] = {x1, x0, x4, x2};\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n@@ -126,9 +126,9 @@ void ConstructVarargsDescriptor::InitializePlatformSpecific(\n   // x0 : number of arguments (on the stack, not including receiver)\n   // x1 : the target to call\n   // x3 : the new target\n-  // x2 : arguments list (FixedArray)\n   // x4 : arguments list length (untagged)\n-  Register registers[] = {x1, x3, x0, x2, x4};\n+  // x2 : arguments list (FixedArray)\n+  Register registers[] = {x1, x3, x0, x4, x2};\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n@@ -198,7 +198,7 @@ void BinaryOpDescriptor::InitializePlatformSpecific(\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }\n \n-void ArgumentAdaptorDescriptor::InitializePlatformSpecific(\n+void ArgumentsAdaptorDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   Register registers[] = {\n       x1,  // JSFunction\n@@ -242,10 +242,10 @@ void InterpreterPushArgsThenConstructDescriptor::InitializePlatformSpecific(\n     CallInterfaceDescriptorData* data) {\n   Register registers[] = {\n       x0,  // argument count (not including receiver)\n-      x3,  // new target\n+      x4,  // address of the first argument\n       x1,  // constructor to call\n+      x3,  // new target\n       x2,  // allocation site feedback if available, undefined otherwise\n-      x4   // address of the first argument\n   };\n   data->InitializePlatformSpecific(arraysize(registers), registers);\n }"
        },
        {
            "sha": "97a75e575887810a9536a076ee3f246b34df5bf0",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 21,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -1516,7 +1516,7 @@ void TurboAssembler::CanonicalizeNaN(const VRegister& dst,\n   Fsub(dst, src, fp_zero);\n }\n \n-void TurboAssembler::LoadRoot(Register destination, Heap::RootListIndex index) {\n+void TurboAssembler::LoadRoot(Register destination, RootIndex index) {\n   // TODO(jbramley): Most root values are constants, and can be synthesized\n   // without a load. Refer to the ARM back end for details.\n   Ldr(destination, MemOperand(kRootRegister, RootRegisterOffset(index)));\n@@ -1646,7 +1646,7 @@ void MacroAssembler::AssertUndefinedOrAllocationSite(Register object) {\n     Register scratch = temps.AcquireX();\n     Label done_checking;\n     AssertNotSmi(object);\n-    JumpIfRoot(object, Heap::kUndefinedValueRootIndex, &done_checking);\n+    JumpIfRoot(object, RootIndex::kUndefinedValue, &done_checking);\n     Ldr(scratch, FieldMemOperand(object, HeapObject::kMapOffset));\n     CompareInstanceType(scratch, scratch, ALLOCATION_SITE_TYPE);\n     Assert(eq, AbortReason::kExpectedUndefinedOrCell);\n@@ -1727,7 +1727,7 @@ void MacroAssembler::JumpToExternalReference(const ExternalReference& builtin,\n }\n \n void MacroAssembler::JumpToInstructionStream(Address entry) {\n-  Mov(kOffHeapTrampolineRegister, Operand(entry, RelocInfo::OFF_HEAP_TARGET));\n+  Ldr(kOffHeapTrampolineRegister, Operand(entry, RelocInfo::OFF_HEAP_TARGET));\n   Br(kOffHeapTrampolineRegister);\n }\n \n@@ -1806,8 +1806,8 @@ void TurboAssembler::CallCFunction(Register function, int num_of_reg_args,\n void TurboAssembler::LoadFromConstantsTable(Register destination,\n                                             int constant_index) {\n   DCHECK(isolate()->heap()->RootCanBeTreatedAsConstant(\n-      Heap::kBuiltinsConstantsTableRootIndex));\n-  LoadRoot(destination, Heap::kBuiltinsConstantsTableRootIndex);\n+      RootIndex::kBuiltinsConstantsTable));\n+  LoadRoot(destination, RootIndex::kBuiltinsConstantsTable);\n   Ldr(destination,\n       FieldMemOperand(destination,\n                       FixedArray::kHeaderSize + constant_index * kPointerSize));\n@@ -1905,7 +1905,7 @@ void TurboAssembler::Jump(Handle<Code> code, RelocInfo::Mode rmode,\n         Register scratch = temps.AcquireX();\n         EmbeddedData d = EmbeddedData::FromBlob();\n         Address entry = d.InstructionStartOfBuiltin(builtin_index);\n-        Mov(scratch, Operand(entry, RelocInfo::OFF_HEAP_TARGET));\n+        Ldr(scratch, Operand(entry, RelocInfo::OFF_HEAP_TARGET));\n         Jump(scratch, cond);\n         return;\n       }\n@@ -1963,7 +1963,7 @@ void TurboAssembler::Call(Handle<Code> code, RelocInfo::Mode rmode) {\n         Register scratch = temps.AcquireX();\n         EmbeddedData d = EmbeddedData::FromBlob();\n         Address entry = d.InstructionStartOfBuiltin(builtin_index);\n-        Mov(scratch, Operand(entry, RelocInfo::OFF_HEAP_TARGET));\n+        Ldr(scratch, Operand(entry, RelocInfo::OFF_HEAP_TARGET));\n         Call(scratch);\n         return;\n       }\n@@ -2225,7 +2225,7 @@ void MacroAssembler::InvokeFunctionCode(Register function, Register new_target,\n \n   // Clear the new.target register if not given.\n   if (!new_target.is_valid()) {\n-    LoadRoot(x3, Heap::kUndefinedValueRootIndex);\n+    LoadRoot(x3, RootIndex::kUndefinedValue);\n   }\n \n   Label done;\n@@ -2597,26 +2597,21 @@ void MacroAssembler::LoadElementsKindFromMap(Register result, Register map) {\n   DecodeField<Map::ElementsKindBits>(result);\n }\n \n-void MacroAssembler::CompareRoot(const Register& obj,\n-                                 Heap::RootListIndex index) {\n+void MacroAssembler::CompareRoot(const Register& obj, RootIndex index) {\n   UseScratchRegisterScope temps(this);\n   Register temp = temps.AcquireX();\n   DCHECK(!AreAliased(obj, temp));\n   LoadRoot(temp, index);\n   Cmp(obj, temp);\n }\n \n-\n-void MacroAssembler::JumpIfRoot(const Register& obj,\n-                                Heap::RootListIndex index,\n+void MacroAssembler::JumpIfRoot(const Register& obj, RootIndex index,\n                                 Label* if_equal) {\n   CompareRoot(obj, index);\n   B(eq, if_equal);\n }\n \n-\n-void MacroAssembler::JumpIfNotRoot(const Register& obj,\n-                                   Heap::RootListIndex index,\n+void MacroAssembler::JumpIfNotRoot(const Register& obj, RootIndex index,\n                                    Label* if_not_equal) {\n   CompareRoot(obj, index);\n   B(ne, if_not_equal);\n@@ -2823,8 +2818,6 @@ void TurboAssembler::CallRecordWriteStub(\n       RecordWriteDescriptor::kObject));\n   Register slot_parameter(\n       callable.descriptor().GetRegisterParameter(RecordWriteDescriptor::kSlot));\n-  Register isolate_parameter(callable.descriptor().GetRegisterParameter(\n-      RecordWriteDescriptor::kIsolate));\n   Register remembered_set_parameter(callable.descriptor().GetRegisterParameter(\n       RecordWriteDescriptor::kRememberedSet));\n   Register fp_mode_parameter(callable.descriptor().GetRegisterParameter(\n@@ -2834,7 +2827,6 @@ void TurboAssembler::CallRecordWriteStub(\n \n   Pop(slot_parameter, object_parameter);\n \n-  Mov(isolate_parameter, ExternalReference::isolate_address(isolate()));\n   Mov(remembered_set_parameter, Smi::FromEnum(remembered_set_action));\n   Mov(fp_mode_parameter, Smi::FromEnum(fp_mode));\n   Call(callable.code(), RelocInfo::CODE_TARGET);\n@@ -2915,8 +2907,7 @@ void TurboAssembler::AssertUnreachable(AbortReason reason) {\n   if (emit_debug_code()) Abort(reason);\n }\n \n-void MacroAssembler::AssertRegisterIsRoot(Register reg,\n-                                          Heap::RootListIndex index,\n+void MacroAssembler::AssertRegisterIsRoot(Register reg, RootIndex index,\n                                           AbortReason reason) {\n   if (emit_debug_code()) {\n     CompareRoot(reg, index);"
        },
        {
            "sha": "8648ff04398c81254e442ca1f6d6eb83a091569b",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64.h",
            "status": "modified",
            "additions": 13,
            "deletions": 10,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -180,6 +180,9 @@ enum PreShiftImmMode {\n \n class V8_EXPORT_PRIVATE TurboAssembler : public TurboAssemblerBase {\n  public:\n+  TurboAssembler(const AssemblerOptions& options, void* buffer, int buffer_size)\n+      : TurboAssemblerBase(options, buffer, buffer_size) {}\n+\n   TurboAssembler(Isolate* isolate, const AssemblerOptions& options,\n                  void* buffer, int buffer_size,\n                  CodeObjectRequired create_code_object)\n@@ -1126,7 +1129,7 @@ class V8_EXPORT_PRIVATE TurboAssembler : public TurboAssemblerBase {\n #undef DECLARE_FUNCTION\n \n   // Load an object from the root table.\n-  void LoadRoot(Register destination, Heap::RootListIndex index) override;\n+  void LoadRoot(Register destination, RootIndex index) override;\n \n   inline void Ret(const Register& xn = lr);\n \n@@ -1262,10 +1265,14 @@ class V8_EXPORT_PRIVATE TurboAssembler : public TurboAssemblerBase {\n \n class MacroAssembler : public TurboAssembler {\n  public:\n+  MacroAssembler(const AssemblerOptions& options, void* buffer, int size)\n+      : TurboAssembler(options, buffer, size) {}\n+\n   MacroAssembler(Isolate* isolate, void* buffer, int size,\n                  CodeObjectRequired create_code_object)\n       : MacroAssembler(isolate, AssemblerOptions::Default(isolate), buffer,\n                        size, create_code_object) {}\n+\n   MacroAssembler(Isolate* isolate, const AssemblerOptions& options,\n                  void* buffer, int size, CodeObjectRequired create_code_object);\n \n@@ -1821,17 +1828,13 @@ class MacroAssembler : public TurboAssembler {\n   void LoadElementsKindFromMap(Register result, Register map);\n \n   // Compare the object in a register to a value from the root list.\n-  void CompareRoot(const Register& obj, Heap::RootListIndex index);\n+  void CompareRoot(const Register& obj, RootIndex index);\n \n   // Compare the object in a register to a value and jump if they are equal.\n-  void JumpIfRoot(const Register& obj,\n-                  Heap::RootListIndex index,\n-                  Label* if_equal);\n+  void JumpIfRoot(const Register& obj, RootIndex index, Label* if_equal);\n \n   // Compare the object in a register to a value and jump if they are not equal.\n-  void JumpIfNotRoot(const Register& obj,\n-                     Heap::RootListIndex index,\n-                     Label* if_not_equal);\n+  void JumpIfNotRoot(const Register& obj, RootIndex index, Label* if_not_equal);\n \n   // Compare the contents of a register with an operand, and branch to true,\n   // false or fall through, depending on condition.\n@@ -1944,7 +1947,7 @@ class MacroAssembler : public TurboAssembler {\n   // Debugging.\n \n   void AssertRegisterIsRoot(\n-      Register reg, Heap::RootListIndex index,\n+      Register reg, RootIndex index,\n       AbortReason reason = AbortReason::kRegisterDidNotMatchExpectedRoot);\n \n   // Abort if the specified register contains the invalid color bit pattern.\n@@ -2025,7 +2028,7 @@ class MacroAssembler : public TurboAssembler {\n // instructions. This scope prevents the MacroAssembler from being called and\n // literal pools from being emitted. It also asserts the number of instructions\n // emitted is what you specified when creating the scope.\n-class InstructionAccurateScope BASE_EMBEDDED {\n+class InstructionAccurateScope {\n  public:\n   explicit InstructionAccurateScope(TurboAssembler* tasm, size_t count = 0)\n       : tasm_(tasm)"
        },
        {
            "sha": "aea4c0a21b07f49f79a27ae8dd0f1eca092b957a",
            "filename": "deps/v8/src/asmjs/asm-js.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -391,7 +391,7 @@ MaybeHandle<Object> AsmJs::InstantiateAsmWasm(Isolate* isolate,\n       return MaybeHandle<Object>();\n     }\n     memory->set_is_growable(false);\n-    size_t size = NumberToSize(memory->byte_length());\n+    size_t size = memory->byte_length();\n     // Check the asm.js heap size against the valid limits.\n     if (!IsValidAsmjsMemorySize(size)) {\n       ReportInstantiationFailure(script, position, \"Invalid heap size\");"
        },
        {
            "sha": "2037a0ec8fbcdf9d5dee4c70e0b80437e5c24b41",
            "filename": "deps/v8/src/assembler.cc",
            "status": "modified",
            "additions": 30,
            "deletions": 2,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fassembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fassembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -44,10 +44,24 @@\n #include \"src/simulator.h\"  // For flushing instruction cache.\n #include \"src/snapshot/serializer-common.h\"\n #include \"src/snapshot/snapshot.h\"\n+#include \"src/string-constants.h\"\n \n namespace v8 {\n namespace internal {\n \n+AssemblerOptions AssemblerOptions::EnableV8AgnosticCode() const {\n+  AssemblerOptions options = *this;\n+  options.v8_agnostic_code = true;\n+  options.record_reloc_info_for_serialization = false;\n+  options.enable_root_array_delta_access = false;\n+  // Inherit |enable_simulator_code| value.\n+  options.isolate_independent_code = false;\n+  options.inline_offheap_trampolines = false;\n+  // Inherit |code_range_start| value.\n+  // Inherit |use_pc_relative_calls_and_jumps| value.\n+  return options;\n+}\n+\n AssemblerOptions AssemblerOptions::Default(\n     Isolate* isolate, bool explicitly_support_serialization) {\n   AssemblerOptions options;\n@@ -61,9 +75,12 @@ AssemblerOptions AssemblerOptions::Default(\n   options.enable_simulator_code = !serializer;\n #endif\n   options.inline_offheap_trampolines = !serializer;\n+\n #if V8_TARGET_ARCH_X64 || V8_TARGET_ARCH_ARM64\n-  options.code_range_start =\n-      isolate->heap()->memory_allocator()->code_range()->start();\n+  const base::AddressRegion& code_range =\n+      isolate->heap()->memory_allocator()->code_range();\n+  DCHECK_IMPLIES(code_range.begin() != kNullAddress, !code_range.is_empty());\n+  options.code_range_start = code_range.begin();\n #endif\n   return options;\n }\n@@ -355,6 +372,13 @@ HeapObjectRequest::HeapObjectRequest(CodeStub* code_stub, int offset)\n   DCHECK_NOT_NULL(value_.code_stub);\n }\n \n+HeapObjectRequest::HeapObjectRequest(const StringConstantBase* string,\n+                                     int offset)\n+    : kind_(kStringConstant), offset_(offset) {\n+  value_.string = string;\n+  DCHECK_NOT_NULL(value_.string);\n+}\n+\n // Platform specific but identical code for all the platforms.\n \n void Assembler::RecordDeoptReason(DeoptimizeReason reason,\n@@ -381,11 +405,13 @@ void Assembler::DataAlign(int m) {\n }\n \n void AssemblerBase::RequestHeapObject(HeapObjectRequest request) {\n+  DCHECK(!options().v8_agnostic_code);\n   request.set_offset(pc_offset());\n   heap_object_requests_.push_front(request);\n }\n \n int AssemblerBase::AddCodeTarget(Handle<Code> target) {\n+  DCHECK(!options().v8_agnostic_code);\n   int current = static_cast<int>(code_targets_.size());\n   if (current > 0 && !target.is_null() &&\n       code_targets_.back().address() == target.address()) {\n@@ -398,13 +424,15 @@ int AssemblerBase::AddCodeTarget(Handle<Code> target) {\n }\n \n Handle<Code> AssemblerBase::GetCodeTarget(intptr_t code_target_index) const {\n+  DCHECK(!options().v8_agnostic_code);\n   DCHECK_LE(0, code_target_index);\n   DCHECK_LT(code_target_index, code_targets_.size());\n   return code_targets_[code_target_index];\n }\n \n void AssemblerBase::UpdateCodeTarget(intptr_t code_target_index,\n                                      Handle<Code> code) {\n+  DCHECK(!options().v8_agnostic_code);\n   DCHECK_LE(0, code_target_index);\n   DCHECK_LT(code_target_index, code_targets_.size());\n   code_targets_[code_target_index] = code;"
        },
        {
            "sha": "a2a1c7319139473ceebe72415aef00734b97462d",
            "filename": "deps/v8/src/assembler.h",
            "status": "modified",
            "additions": 40,
            "deletions": 16,
            "changes": 56,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fassembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fassembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -67,6 +67,7 @@ class Isolate;\n class SCTableReference;\n class SourcePosition;\n class StatsCounter;\n+class StringConstantBase;\n \n // -----------------------------------------------------------------------------\n // Optimization for far-jmp like instructions that can be replaced by shorter.\n@@ -97,8 +98,9 @@ class HeapObjectRequest {\n  public:\n   explicit HeapObjectRequest(double heap_number, int offset = -1);\n   explicit HeapObjectRequest(CodeStub* code_stub, int offset = -1);\n+  explicit HeapObjectRequest(const StringConstantBase* string, int offset = -1);\n \n-  enum Kind { kHeapNumber, kCodeStub };\n+  enum Kind { kHeapNumber, kCodeStub, kStringConstant };\n   Kind kind() const { return kind_; }\n \n   double heap_number() const {\n@@ -111,6 +113,11 @@ class HeapObjectRequest {\n     return value_.code_stub;\n   }\n \n+  const StringConstantBase* string() const {\n+    DCHECK_EQ(kind(), kStringConstant);\n+    return value_.string;\n+  }\n+\n   // The code buffer offset at the time of the request.\n   int offset() const {\n     DCHECK_GE(offset_, 0);\n@@ -128,6 +135,7 @@ class HeapObjectRequest {\n   union {\n     double heap_number;\n     CodeStub* code_stub;\n+    const StringConstantBase* string;\n   } value_;\n \n   int offset_;\n@@ -139,6 +147,9 @@ class HeapObjectRequest {\n enum class CodeObjectRequired { kNo, kYes };\n \n struct V8_EXPORT_PRIVATE AssemblerOptions {\n+  // Prohibits using any V8-specific features of assembler like (isolates,\n+  // heap objects, external references, etc.).\n+  bool v8_agnostic_code = false;\n   // Recording reloc info for external references and off-heap targets is\n   // needed whenever code is serialized, e.g. into the snapshot or as a WASM\n   // module. This flag allows this reloc info to be disabled for code that\n@@ -168,6 +179,9 @@ struct V8_EXPORT_PRIVATE AssemblerOptions {\n   // the instruction immediates.\n   bool use_pc_relative_calls_and_jumps = false;\n \n+  // Constructs V8-agnostic set of options from current state.\n+  AssemblerOptions EnableV8AgnosticCode() const;\n+\n   static AssemblerOptions Default(\n       Isolate* isolate, bool explicitly_support_serialization = false);\n };\n@@ -268,13 +282,23 @@ class V8_EXPORT_PRIVATE AssemblerBase : public Malloced {\n     }\n   }\n \n-  // {RequestHeapObject} records the need for a future heap number allocation or\n-  // code stub generation. After code assembly, each platform's\n-  // {Assembler::AllocateAndInstallRequestedHeapObjects} will allocate these\n-  // objects and place them where they are expected (determined by the pc offset\n-  // associated with each request).\n+  // {RequestHeapObject} records the need for a future heap number allocation,\n+  // code stub generation or string allocation. After code assembly, each\n+  // platform's {Assembler::AllocateAndInstallRequestedHeapObjects} will\n+  // allocate these objects and place them where they are expected (determined\n+  // by the pc offset associated with each request).\n   void RequestHeapObject(HeapObjectRequest request);\n \n+  bool ShouldRecordRelocInfo(RelocInfo::Mode rmode) const {\n+    DCHECK(!RelocInfo::IsNone(rmode));\n+    if (options().disable_reloc_info_for_patching) return false;\n+    if (RelocInfo::IsOnlyForSerializer(rmode) &&\n+        !options().record_reloc_info_for_serialization && !emit_debug_code()) {\n+      return false;\n+    }\n+    return true;\n+  }\n+\n  private:\n   // Before we copy code into the code space, we sometimes cannot encode\n   // call/jump code targets as we normally would, as the difference between the\n@@ -301,7 +325,7 @@ class V8_EXPORT_PRIVATE AssemblerBase : public Malloced {\n };\n \n // Avoids emitting debug code during the lifetime of this scope object.\n-class DontEmitDebugCodeScope BASE_EMBEDDED {\n+class DontEmitDebugCodeScope {\n  public:\n   explicit DontEmitDebugCodeScope(AssemblerBase* assembler)\n       : assembler_(assembler), old_value_(assembler->emit_debug_code()) {\n@@ -332,7 +356,7 @@ class PredictableCodeSizeScope {\n \n \n // Enable a specified feature within a scope.\n-class CpuFeatureScope BASE_EMBEDDED {\n+class CpuFeatureScope {\n  public:\n   enum CheckPolicy {\n     kCheckSupported,\n@@ -350,12 +374,12 @@ class CpuFeatureScope BASE_EMBEDDED {\n #else\n   CpuFeatureScope(AssemblerBase* assembler, CpuFeature f,\n                   CheckPolicy check = kCheckSupported) {}\n-  // Define a destructor to avoid unused variable warnings.\n-  ~CpuFeatureScope() {}\n+  ~CpuFeatureScope() {  // NOLINT (modernize-use-equals-default)\n+    // Define a destructor to avoid unused variable warnings.\n+  }\n #endif\n };\n \n-\n // CpuFeatures keeps track of which features are supported by the target CPU.\n // Supported features must be enabled by a CpuFeatureScope before use.\n // Example:\n@@ -420,7 +444,7 @@ class CpuFeatures : public AllStatic {\n // Utility functions\n \n // Computes pow(x, y) with the special cases in the spec for Math.pow.\n-double power_helper(Isolate* isolate, double x, double y);\n+double power_helper(double x, double y);\n double power_double_int(double x, int y);\n double power_double_double(double x, double y);\n \n@@ -430,7 +454,7 @@ double power_double_double(double x, double y);\n \n class ConstantPoolEntry {\n  public:\n-  ConstantPoolEntry() {}\n+  ConstantPoolEntry() = default;\n   ConstantPoolEntry(int position, intptr_t value, bool sharing_ok,\n                     RelocInfo::Mode rmode = RelocInfo::NONE)\n       : position_(position),\n@@ -447,7 +471,7 @@ class ConstantPoolEntry {\n   int position() const { return position_; }\n   bool sharing_ok() const { return merged_index_ != SHARING_PROHIBITED; }\n   bool is_merged() const { return merged_index_ >= 0; }\n-  int merged_index(void) const {\n+  int merged_index() const {\n     DCHECK(is_merged());\n     return merged_index_;\n   }\n@@ -456,7 +480,7 @@ class ConstantPoolEntry {\n     merged_index_ = index;\n     DCHECK(is_merged());\n   }\n-  int offset(void) const {\n+  int offset() const {\n     DCHECK_GE(merged_index_, 0);\n     return merged_index_;\n   }\n@@ -493,7 +517,7 @@ class ConstantPoolEntry {\n // -----------------------------------------------------------------------------\n // Embedded constant pool support\n \n-class ConstantPoolBuilder BASE_EMBEDDED {\n+class ConstantPoolBuilder {\n  public:\n   ConstantPoolBuilder(int ptr_reach_bits, int double_reach_bits);\n "
        },
        {
            "sha": "b64f95dfa5722400555526bfa7b5f9f39fe7e82c",
            "filename": "deps/v8/src/assert-scope.h",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fassert-scope.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fassert-scope.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassert-scope.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -77,7 +77,9 @@ class PerThreadAssertScopeDebugOnly : public\n #else\n class PerThreadAssertScopeDebugOnly {\n  public:\n-  PerThreadAssertScopeDebugOnly() { }\n+  PerThreadAssertScopeDebugOnly() {  // NOLINT (modernize-use-equals-default)\n+    // Define a constructor to avoid unused variable warnings.\n+  }\n   void Release() {}\n #endif\n };"
        },
        {
            "sha": "7e3a25890b5c84eb236cdbc4bbafbe963fa7e686",
            "filename": "deps/v8/src/ast/ast-function-literal-id-reindexer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast-function-literal-id-reindexer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast-function-literal-id-reindexer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast-function-literal-id-reindexer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -14,7 +14,7 @@ AstFunctionLiteralIdReindexer::AstFunctionLiteralIdReindexer(size_t stack_limit,\n                                                              int delta)\n     : AstTraversalVisitor(stack_limit), delta_(delta) {}\n \n-AstFunctionLiteralIdReindexer::~AstFunctionLiteralIdReindexer() {}\n+AstFunctionLiteralIdReindexer::~AstFunctionLiteralIdReindexer() = default;\n \n void AstFunctionLiteralIdReindexer::Reindex(Expression* pattern) {\n   Visit(pattern);"
        },
        {
            "sha": "60222a403555f25293aa7f2a09f7d4c25fef637a",
            "filename": "deps/v8/src/ast/ast-source-ranges.h",
            "status": "modified",
            "additions": 13,
            "deletions": 12,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast-source-ranges.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast-source-ranges.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast-source-ranges.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -21,8 +21,9 @@ struct SourceRange {\n   static SourceRange OpenEnded(int32_t start) {\n     return SourceRange(start, kNoSourcePosition);\n   }\n-  static SourceRange ContinuationOf(const SourceRange& that) {\n-    return that.IsEmpty() ? Empty() : OpenEnded(that.end);\n+  static SourceRange ContinuationOf(const SourceRange& that,\n+                                    int end = kNoSourcePosition) {\n+    return that.IsEmpty() ? Empty() : SourceRange(that.end, end);\n   }\n   int32_t start, end;\n };\n@@ -56,7 +57,7 @@ enum class SourceRangeKind {\n \n class AstNodeSourceRanges : public ZoneObject {\n  public:\n-  virtual ~AstNodeSourceRanges() {}\n+  virtual ~AstNodeSourceRanges() = default;\n   virtual SourceRange GetRange(SourceRangeKind kind) = 0;\n };\n \n@@ -65,7 +66,7 @@ class BinaryOperationSourceRanges final : public AstNodeSourceRanges {\n   explicit BinaryOperationSourceRanges(const SourceRange& right_range)\n       : right_range_(right_range) {}\n \n-  SourceRange GetRange(SourceRangeKind kind) {\n+  SourceRange GetRange(SourceRangeKind kind) override {\n     DCHECK_EQ(kind, SourceRangeKind::kRight);\n     return right_range_;\n   }\n@@ -79,7 +80,7 @@ class ContinuationSourceRanges : public AstNodeSourceRanges {\n   explicit ContinuationSourceRanges(int32_t continuation_position)\n       : continuation_position_(continuation_position) {}\n \n-  SourceRange GetRange(SourceRangeKind kind) {\n+  SourceRange GetRange(SourceRangeKind kind) override {\n     DCHECK_EQ(kind, SourceRangeKind::kContinuation);\n     return SourceRange::OpenEnded(continuation_position_);\n   }\n@@ -99,7 +100,7 @@ class CaseClauseSourceRanges final : public AstNodeSourceRanges {\n   explicit CaseClauseSourceRanges(const SourceRange& body_range)\n       : body_range_(body_range) {}\n \n-  SourceRange GetRange(SourceRangeKind kind) {\n+  SourceRange GetRange(SourceRangeKind kind) override {\n     DCHECK_EQ(kind, SourceRangeKind::kBody);\n     return body_range_;\n   }\n@@ -114,7 +115,7 @@ class ConditionalSourceRanges final : public AstNodeSourceRanges {\n                                    const SourceRange& else_range)\n       : then_range_(then_range), else_range_(else_range) {}\n \n-  SourceRange GetRange(SourceRangeKind kind) {\n+  SourceRange GetRange(SourceRangeKind kind) override {\n     switch (kind) {\n       case SourceRangeKind::kThen:\n         return then_range_;\n@@ -136,7 +137,7 @@ class IfStatementSourceRanges final : public AstNodeSourceRanges {\n                                    const SourceRange& else_range)\n       : then_range_(then_range), else_range_(else_range) {}\n \n-  SourceRange GetRange(SourceRangeKind kind) {\n+  SourceRange GetRange(SourceRangeKind kind) override {\n     switch (kind) {\n       case SourceRangeKind::kElse:\n         return else_range_;\n@@ -162,7 +163,7 @@ class IterationStatementSourceRanges final : public AstNodeSourceRanges {\n   explicit IterationStatementSourceRanges(const SourceRange& body_range)\n       : body_range_(body_range) {}\n \n-  SourceRange GetRange(SourceRangeKind kind) {\n+  SourceRange GetRange(SourceRangeKind kind) override {\n     switch (kind) {\n       case SourceRangeKind::kBody:\n         return body_range_;\n@@ -198,7 +199,7 @@ class NaryOperationSourceRanges final : public AstNodeSourceRanges {\n   void AddRange(const SourceRange& range) { ranges_.push_back(range); }\n   size_t RangeCount() const { return ranges_.size(); }\n \n-  SourceRange GetRange(SourceRangeKind kind) { UNREACHABLE(); }\n+  SourceRange GetRange(SourceRangeKind kind) override { UNREACHABLE(); }\n \n  private:\n   ZoneVector<SourceRange> ranges_;\n@@ -227,7 +228,7 @@ class TryCatchStatementSourceRanges final : public AstNodeSourceRanges {\n   explicit TryCatchStatementSourceRanges(const SourceRange& catch_range)\n       : catch_range_(catch_range) {}\n \n-  SourceRange GetRange(SourceRangeKind kind) {\n+  SourceRange GetRange(SourceRangeKind kind) override {\n     switch (kind) {\n       case SourceRangeKind::kCatch:\n         return catch_range_;\n@@ -247,7 +248,7 @@ class TryFinallyStatementSourceRanges final : public AstNodeSourceRanges {\n   explicit TryFinallyStatementSourceRanges(const SourceRange& finally_range)\n       : finally_range_(finally_range) {}\n \n-  SourceRange GetRange(SourceRangeKind kind) {\n+  SourceRange GetRange(SourceRangeKind kind) override {\n     switch (kind) {\n       case SourceRangeKind::kFinally:\n         return finally_range_;"
        },
        {
            "sha": "67ea77bfbf78878e20cec49238044591e7d0ed62",
            "filename": "deps/v8/src/ast/ast-value-factory.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -242,6 +242,17 @@ const AstRawString* AstValueFactory::GetString(Handle<String> literal) {\n   return result;\n }\n \n+const AstRawString* AstValueFactory::CloneFromOtherFactory(\n+    const AstRawString* raw_string) {\n+  const AstRawString* result = GetString(\n+      raw_string->hash_field(), raw_string->is_one_byte(),\n+      Vector<const byte>(raw_string->raw_data(), raw_string->byte_length()));\n+  // Check we weren't trying to clone a string that was already in this\n+  // ast-value-factory.\n+  DCHECK_NE(result, raw_string);\n+  return result;\n+}\n+\n AstConsString* AstValueFactory::NewConsString() {\n   AstConsString* new_string = new (zone_) AstConsString;\n   DCHECK_NOT_NULL(new_string);"
        },
        {
            "sha": "726d961362dbc7a34720d7f29e79778a705247d4",
            "filename": "deps/v8/src/ast/ast-value-factory.h",
            "status": "modified",
            "additions": 51,
            "deletions": 45,
            "changes": 96,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -194,48 +194,49 @@ class AstBigInt {\n };\n \n // For generating constants.\n-#define AST_STRING_CONSTANTS(F)                                      \\\n-  F(anonymous_function, \"(anonymous function)\")                      \\\n-  F(arguments, \"arguments\")                                          \\\n-  F(async, \"async\")                                                  \\\n-  F(await, \"await\")                                                  \\\n-  F(bigint, \"bigint\")                                                \\\n-  F(boolean, \"boolean\")                                              \\\n-  F(constructor, \"constructor\")                                      \\\n-  F(default, \"default\")                                              \\\n-  F(done, \"done\")                                                    \\\n-  F(dot, \".\")                                                        \\\n-  F(dot_for, \".for\")                                                 \\\n-  F(dot_generator_object, \".generator_object\")                       \\\n-  F(dot_iterator, \".iterator\")                                       \\\n-  F(dot_result, \".result\")                                           \\\n-  F(dot_switch_tag, \".switch_tag\")                                   \\\n-  F(dot_catch, \".catch\")                                             \\\n-  F(empty, \"\")                                                       \\\n-  F(eval, \"eval\")                                                    \\\n-  F(function, \"function\")                                            \\\n-  F(get_space, \"get \")                                               \\\n-  F(length, \"length\")                                                \\\n-  F(let, \"let\")                                                      \\\n-  F(name, \"name\")                                                    \\\n-  F(native, \"native\")                                                \\\n-  F(new_target, \".new.target\")                                       \\\n-  F(next, \"next\")                                                    \\\n-  F(number, \"number\")                                                \\\n-  F(object, \"object\")                                                \\\n-  F(proto, \"__proto__\")                                              \\\n-  F(prototype, \"prototype\")                                          \\\n-  F(return, \"return\")                                                \\\n-  F(set_space, \"set \")                                               \\\n-  F(star_default_star, \"*default*\")                                  \\\n-  F(string, \"string\")                                                \\\n-  F(symbol, \"symbol\")                                                \\\n-  F(this, \"this\")                                                    \\\n-  F(this_function, \".this_function\")                                 \\\n-  F(throw, \"throw\")                                                  \\\n-  F(undefined, \"undefined\")                                          \\\n-  F(use_asm, \"use asm\")                                              \\\n-  F(use_strict, \"use strict\")                                        \\\n+#define AST_STRING_CONSTANTS(F)                 \\\n+  F(anonymous_function, \"(anonymous function)\") \\\n+  F(arguments, \"arguments\")                     \\\n+  F(async, \"async\")                             \\\n+  F(await, \"await\")                             \\\n+  F(bigint, \"bigint\")                           \\\n+  F(boolean, \"boolean\")                         \\\n+  F(constructor, \"constructor\")                 \\\n+  F(default, \"default\")                         \\\n+  F(done, \"done\")                               \\\n+  F(dot, \".\")                                   \\\n+  F(dot_for, \".for\")                            \\\n+  F(dot_generator_object, \".generator_object\")  \\\n+  F(dot_iterator, \".iterator\")                  \\\n+  F(dot_promise, \".promise\")                    \\\n+  F(dot_result, \".result\")                      \\\n+  F(dot_switch_tag, \".switch_tag\")              \\\n+  F(dot_catch, \".catch\")                        \\\n+  F(empty, \"\")                                  \\\n+  F(eval, \"eval\")                               \\\n+  F(function, \"function\")                       \\\n+  F(get_space, \"get \")                          \\\n+  F(length, \"length\")                           \\\n+  F(let, \"let\")                                 \\\n+  F(name, \"name\")                               \\\n+  F(native, \"native\")                           \\\n+  F(new_target, \".new.target\")                  \\\n+  F(next, \"next\")                               \\\n+  F(number, \"number\")                           \\\n+  F(object, \"object\")                           \\\n+  F(proto, \"__proto__\")                         \\\n+  F(prototype, \"prototype\")                     \\\n+  F(return, \"return\")                           \\\n+  F(set_space, \"set \")                          \\\n+  F(star_default_star, \"*default*\")             \\\n+  F(string, \"string\")                           \\\n+  F(symbol, \"symbol\")                           \\\n+  F(this, \"this\")                               \\\n+  F(this_function, \".this_function\")            \\\n+  F(throw, \"throw\")                             \\\n+  F(undefined, \"undefined\")                     \\\n+  F(use_asm, \"use asm\")                         \\\n+  F(use_strict, \"use strict\")                   \\\n   F(value, \"value\")\n \n class AstStringConstants final {\n@@ -297,10 +298,15 @@ class AstValueFactory {\n     return GetTwoByteStringInternal(literal);\n   }\n   const AstRawString* GetString(Handle<String> literal);\n+\n+  // Clones an AstRawString from another ast value factory, adding it to this\n+  // factory and returning the clone.\n+  const AstRawString* CloneFromOtherFactory(const AstRawString* raw_string);\n+\n   V8_EXPORT_PRIVATE AstConsString* NewConsString();\n-  AstConsString* NewConsString(const AstRawString* str);\n-  AstConsString* NewConsString(const AstRawString* str1,\n-                               const AstRawString* str2);\n+  V8_EXPORT_PRIVATE AstConsString* NewConsString(const AstRawString* str);\n+  V8_EXPORT_PRIVATE AstConsString* NewConsString(const AstRawString* str1,\n+                                                 const AstRawString* str2);\n \n   V8_EXPORT_PRIVATE void Internalize(Isolate* isolate);\n "
        },
        {
            "sha": "617a26b9377912344499ee8ebaaa0525ac3f271b",
            "filename": "deps/v8/src/ast/ast.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -551,12 +551,6 @@ bool ObjectLiteral::IsFastCloningSupported() const {\n              ConstructorBuiltins::kMaximumClonedShallowObjectProperties;\n }\n \n-bool ArrayLiteral::is_empty() const {\n-  DCHECK(is_initialized());\n-  return values()->is_empty() && (boilerplate_description().is_null() ||\n-                                  boilerplate_description()->is_empty());\n-}\n-\n int ArrayLiteral::InitDepthAndFlags() {\n   if (is_initialized()) return depth();\n "
        },
        {
            "sha": "6cc2cbc8ec9ebfaecca9c8fb6e23d58f033be6cf",
            "filename": "deps/v8/src/ast/ast.h",
            "status": "modified",
            "additions": 24,
            "deletions": 12,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fast.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -383,7 +383,7 @@ class DoExpression final : public Expression {\n \n class Declaration : public AstNode {\n  public:\n-  typedef ThreadedList<Declaration> List;\n+  typedef base::ThreadedList<Declaration> List;\n \n   VariableProxy* proxy() const { return proxy_; }\n \n@@ -397,6 +397,7 @@ class Declaration : public AstNode {\n   Declaration** next() { return &next_; }\n   Declaration* next_;\n   friend List;\n+  friend base::ThreadedListTraits<Declaration>;\n };\n \n class VariableDeclaration : public Declaration {\n@@ -1477,8 +1478,6 @@ class ArrayLiteral final : public AggregateLiteral {\n \n   int first_spread_index() const { return first_spread_index_; }\n \n-  bool is_empty() const;\n-\n   // Populate the depth field and flags, returns the depth.\n   int InitDepthAndFlags();\n \n@@ -1578,8 +1577,15 @@ class VariableProxy final : public Expression {\n   // Bind this proxy to the variable var.\n   void BindTo(Variable* var);\n \n-  void set_next_unresolved(VariableProxy* next) { next_unresolved_ = next; }\n-  VariableProxy* next_unresolved() { return next_unresolved_; }\n+  V8_INLINE VariableProxy* next_unresolved() { return next_unresolved_; }\n+\n+  // Provides an access type for the ThreadedList used by the PreParsers\n+  // expressions, lists, and formal parameters.\n+  struct PreParserNext {\n+    static VariableProxy** next(VariableProxy* t) {\n+      return t->pre_parser_expr_next();\n+    }\n+  };\n \n  private:\n   friend class AstNodeFactory;\n@@ -1590,7 +1596,8 @@ class VariableProxy final : public Expression {\n                 int start_position)\n       : Expression(start_position, kVariableProxy),\n         raw_name_(name),\n-        next_unresolved_(nullptr) {\n+        next_unresolved_(nullptr),\n+        pre_parser_expr_next_(nullptr) {\n     bit_field_ |= IsThisField::encode(variable_kind == THIS_VARIABLE) |\n                   IsAssignedField::encode(false) |\n                   IsResolvedField::encode(false) |\n@@ -1613,9 +1620,15 @@ class VariableProxy final : public Expression {\n     const AstRawString* raw_name_;  // if !is_resolved_\n     Variable* var_;                 // if is_resolved_\n   };\n+\n+  V8_INLINE VariableProxy** next() { return &next_unresolved_; }\n   VariableProxy* next_unresolved_;\n-};\n \n+  VariableProxy** pre_parser_expr_next() { return &pre_parser_expr_next_; }\n+  VariableProxy* pre_parser_expr_next_;\n+\n+  friend base::ThreadedListTraits<VariableProxy>;\n+};\n \n // Left-hand side can only be a property, a global or a (parameter or local)\n // slot.\n@@ -2248,7 +2261,7 @@ class FunctionLiteral final : public Expression {\n \n   void mark_as_iife() { bit_field_ = IIFEBit::update(bit_field_, true); }\n   bool is_iife() const { return IIFEBit::decode(bit_field_); }\n-  bool is_top_level() const {\n+  bool is_toplevel() const {\n     return function_literal_id() == FunctionLiteral::kIdTypeTopLevel;\n   }\n   bool is_wrapped() const { return function_type() == kWrapped; }\n@@ -2308,7 +2321,7 @@ class FunctionLiteral final : public Expression {\n   // - (function() { ... })();\n   // - var x = function() { ... }();\n   bool ShouldEagerCompile() const;\n-  void SetShouldEagerCompile();\n+  V8_EXPORT_PRIVATE void SetShouldEagerCompile();\n \n   FunctionType function_type() const {\n     return FunctionTypeBits::decode(bit_field_);\n@@ -2736,7 +2749,7 @@ class TemplateLiteral final : public Expression {\n //   class SpecificVisitor : public AstVisitor<SpecificVisitor> { ... }\n \n template <class Subclass>\n-class AstVisitor BASE_EMBEDDED {\n+class AstVisitor {\n  public:\n   void Visit(AstNode* node) { impl()->Visit(node); }\n \n@@ -2823,7 +2836,7 @@ class AstVisitor BASE_EMBEDDED {\n // ----------------------------------------------------------------------------\n // AstNode factory\n \n-class AstNodeFactory final BASE_EMBEDDED {\n+class AstNodeFactory final {\n  public:\n   AstNodeFactory(AstValueFactory* ast_value_factory, Zone* zone)\n       : zone_(zone), ast_value_factory_(ast_value_factory) {}\n@@ -3330,7 +3343,6 @@ class AstNodeFactory final BASE_EMBEDDED {\n   }\n \n   Zone* zone() const { return zone_; }\n-  void set_zone(Zone* zone) { zone_ = zone; }\n \n  private:\n   // This zone may be deallocated upon returning from parsing a function body"
        },
        {
            "sha": "f9c2243099cae082fd60a315e4d8c3306d08b29c",
            "filename": "deps/v8/src/ast/prettyprinter.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -31,7 +31,7 @@ CallPrinter::CallPrinter(Isolate* isolate, bool is_user_js)\n   InitializeAstVisitor(isolate);\n }\n \n-CallPrinter::~CallPrinter() {}\n+CallPrinter::~CallPrinter() = default;\n \n CallPrinter::ErrorHint CallPrinter::GetErrorHint() const {\n   if (is_call_error_) {\n@@ -666,7 +666,7 @@ void AstPrinter::PrintLiteral(const AstConsString* value, bool quote) {\n \n //-----------------------------------------------------------------------------\n \n-class IndentedScope BASE_EMBEDDED {\n+class IndentedScope {\n  public:\n   IndentedScope(AstPrinter* printer, const char* txt)\n       : ast_printer_(printer) {"
        },
        {
            "sha": "a70166c5ca61aaf4088e18d2d5faa5fc5e532002",
            "filename": "deps/v8/src/ast/scopes-inl.h",
            "status": "added",
            "additions": 66,
            "deletions": 0,
            "changes": 66,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fscopes-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fscopes-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fscopes-inl.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,66 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_AST_SCOPES_INL_H_\n+#define V8_AST_SCOPES_INL_H_\n+\n+#include \"src/ast/scopes.h\"\n+\n+namespace v8 {\n+namespace internal {\n+\n+template <typename T>\n+void Scope::ResolveScopesThenForEachVariable(DeclarationScope* max_outer_scope,\n+                                             T variable_proxy_stackvisitor,\n+                                             ParseInfo* info) {\n+  // Module variables must be allocated before variable resolution\n+  // to ensure that UpdateNeedsHoleCheck() can detect import variables.\n+  if (info != nullptr && is_module_scope()) {\n+    AsModuleScope()->AllocateModuleVariables();\n+  }\n+  // Lazy parsed declaration scopes are already partially analyzed. If there are\n+  // unresolved references remaining, they just need to be resolved in outer\n+  // scopes.\n+  Scope* lookup =\n+      is_declaration_scope() && AsDeclarationScope()->was_lazily_parsed()\n+          ? outer_scope()\n+          : this;\n+\n+  for (VariableProxy *proxy = unresolved_list_.first(), *next = nullptr;\n+       proxy != nullptr; proxy = next) {\n+    next = proxy->next_unresolved();\n+\n+    DCHECK(!proxy->is_resolved());\n+    Variable* var =\n+        lookup->LookupRecursive(info, proxy, max_outer_scope->outer_scope());\n+    if (var == nullptr) {\n+      variable_proxy_stackvisitor(proxy);\n+    } else if (var != Scope::kDummyPreParserVariable &&\n+               var != Scope::kDummyPreParserLexicalVariable) {\n+      if (info != nullptr) {\n+        // In this case we need to leave scopes in a way that they can be\n+        // allocated. If we resolved variables from lazy parsed scopes, we need\n+        // to context allocate the var.\n+        ResolveTo(info, proxy, var);\n+        if (!var->is_dynamic() && lookup != this) var->ForceContextAllocation();\n+      } else {\n+        var->set_is_used();\n+        if (proxy->is_assigned()) var->set_maybe_assigned();\n+      }\n+    }\n+  }\n+\n+  // Clear unresolved_list_ as it's in an inconsistent state.\n+  unresolved_list_.Clear();\n+\n+  for (Scope* scope = inner_scope_; scope != nullptr; scope = scope->sibling_) {\n+    scope->ResolveScopesThenForEachVariable(max_outer_scope,\n+                                            variable_proxy_stackvisitor, info);\n+  }\n+}\n+\n+}  // namespace internal\n+}  // namespace v8\n+\n+#endif  // V8_AST_SCOPES_INL_H_"
        },
        {
            "sha": "e9fb195609b135f0e04442467ddf9e0ba0a9cf7f",
            "filename": "deps/v8/src/ast/scopes.cc",
            "status": "modified",
            "additions": 104,
            "deletions": 127,
            "changes": 231,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -8,6 +8,7 @@\n \n #include \"src/accessors.h\"\n #include \"src/ast/ast.h\"\n+#include \"src/ast/scopes-inl.h\"\n #include \"src/base/optional.h\"\n #include \"src/bootstrapper.h\"\n #include \"src/counters.h\"\n@@ -23,15 +24,11 @@ namespace v8 {\n namespace internal {\n \n namespace {\n-void* kDummyPreParserVariable = reinterpret_cast<void*>(0x1);\n-void* kDummyPreParserLexicalVariable = reinterpret_cast<void*>(0x2);\n-\n bool IsLexical(Variable* variable) {\n-  if (variable == kDummyPreParserLexicalVariable) return true;\n-  if (variable == kDummyPreParserVariable) return false;\n+  if (variable == Scope::kDummyPreParserLexicalVariable) return true;\n+  if (variable == Scope::kDummyPreParserVariable) return false;\n   return IsLexicalVariableMode(variable->mode());\n }\n-\n }  // namespace\n \n // ----------------------------------------------------------------------------\n@@ -76,8 +73,9 @@ Variable* VariableMap::DeclareName(Zone* zone, const AstRawString* name,\n   if (p->value == nullptr) {\n     // The variable has not been declared yet -> insert it.\n     DCHECK_EQ(name, p->key);\n-    p->value = mode == VariableMode::kVar ? kDummyPreParserVariable\n-                                          : kDummyPreParserLexicalVariable;\n+    p->value = mode == VariableMode::kVar\n+                   ? Scope::kDummyPreParserVariable\n+                   : Scope::kDummyPreParserLexicalVariable;\n   }\n   return reinterpret_cast<Variable*>(p->value);\n }\n@@ -154,7 +152,7 @@ Scope::Scope(Zone* zone, Scope* outer_scope, ScopeType scope_type)\n Scope::Snapshot::Snapshot(Scope* scope)\n     : outer_scope_(scope),\n       top_inner_scope_(scope->inner_scope_),\n-      top_unresolved_(scope->unresolved_),\n+      top_unresolved_(scope->unresolved_list_.first()),\n       top_local_(scope->GetClosureScope()->locals_.end()),\n       top_decl_(scope->GetClosureScope()->decls_.end()),\n       outer_scope_calls_eval_(scope->scope_calls_eval_) {\n@@ -310,6 +308,8 @@ void DeclarationScope::SetDefaults() {\n   has_arguments_parameter_ = false;\n   scope_uses_super_property_ = false;\n   has_rest_ = false;\n+  has_promise_ = false;\n+  has_generator_object_ = false;\n   sloppy_block_function_map_ = nullptr;\n   receiver_ = nullptr;\n   new_target_ = nullptr;\n@@ -319,7 +319,7 @@ void DeclarationScope::SetDefaults() {\n   should_eager_compile_ = false;\n   was_lazily_parsed_ = false;\n   is_skipped_function_ = false;\n-  produced_preparsed_scope_data_ = nullptr;\n+  preparsed_scope_data_builder_ = nullptr;\n #ifdef DEBUG\n   DeclarationScope* outer_declaration_scope =\n       outer_scope_ ? outer_scope_->GetDeclarationScope() : nullptr;\n@@ -337,7 +337,7 @@ void Scope::SetDefaults() {\n #endif\n   inner_scope_ = nullptr;\n   sibling_ = nullptr;\n-  unresolved_ = nullptr;\n+  unresolved_list_.Clear();\n \n   start_position_ = kNoSourcePosition;\n   end_position_ = kNoSourcePosition;\n@@ -779,6 +779,7 @@ Variable* DeclarationScope::DeclareGeneratorObjectVar(\n   Variable* result = EnsureRareData()->generator_object =\n       NewTemporary(name, kNotAssigned);\n   result->set_is_used();\n+  has_generator_object_ = true;\n   return result;\n }\n \n@@ -787,6 +788,7 @@ Variable* DeclarationScope::DeclarePromiseVar(const AstRawString* name) {\n   DCHECK_NULL(promise_var());\n   Variable* result = EnsureRareData()->promise = NewTemporary(name);\n   result->set_is_used();\n+  has_promise_ = true;\n   return result;\n }\n \n@@ -834,16 +836,9 @@ Scope* Scope::FinalizeBlockScope() {\n   }\n \n   // Move unresolved variables\n-  if (unresolved_ != nullptr) {\n-    if (outer_scope()->unresolved_ != nullptr) {\n-      VariableProxy* unresolved = unresolved_;\n-      while (unresolved->next_unresolved() != nullptr) {\n-        unresolved = unresolved->next_unresolved();\n-      }\n-      unresolved->set_next_unresolved(outer_scope()->unresolved_);\n-    }\n-    outer_scope()->unresolved_ = unresolved_;\n-    unresolved_ = nullptr;\n+  if (!unresolved_list_.is_empty()) {\n+    outer_scope()->unresolved_list_.Prepend(std::move(unresolved_list_));\n+    unresolved_list_.Clear();\n   }\n \n   if (inner_scope_calls_eval_) outer_scope()->inner_scope_calls_eval_ = true;\n@@ -887,7 +882,7 @@ void Scope::Snapshot::Reparent(DeclarationScope* new_parent) const {\n   DCHECK_EQ(new_parent->outer_scope_, outer_scope_);\n   DCHECK_EQ(new_parent, new_parent->GetClosureScope());\n   DCHECK_NULL(new_parent->inner_scope_);\n-  DCHECK_NULL(new_parent->unresolved_);\n+  DCHECK(new_parent->unresolved_list_.is_empty());\n   DCHECK(new_parent->locals_.is_empty());\n   Scope* inner_scope = new_parent->sibling_;\n   if (inner_scope != top_inner_scope_) {\n@@ -910,14 +905,21 @@ void Scope::Snapshot::Reparent(DeclarationScope* new_parent) const {\n     new_parent->sibling_ = top_inner_scope_;\n   }\n \n-  if (outer_scope_->unresolved_ != top_unresolved_) {\n-    VariableProxy* last = outer_scope_->unresolved_;\n-    while (last->next_unresolved() != top_unresolved_) {\n-      last = last->next_unresolved();\n+  if (outer_scope_->unresolved_list_.first() != top_unresolved_) {\n+    // If the marked VariableProxy (snapshoted) is not the first, we need to\n+    // find it and move all VariableProxys up to that point into the new_parent,\n+    // then we restore the snapshoted state by reinitializing the outer_scope\n+    // list.\n+    {\n+      auto iter = outer_scope_->unresolved_list_.begin();\n+      while (*iter != top_unresolved_) {\n+        ++iter;\n+      }\n+      outer_scope_->unresolved_list_.Rewind(iter);\n     }\n-    last->set_next_unresolved(nullptr);\n-    new_parent->unresolved_ = outer_scope_->unresolved_;\n-    outer_scope_->unresolved_ = top_unresolved_;\n+\n+    new_parent->unresolved_list_ = std::move(outer_scope_->unresolved_list_);\n+    outer_scope_->unresolved_list_.ReinitializeHead(top_unresolved_);\n   }\n \n   // TODO(verwaest): This currently only moves do-expression declared variables\n@@ -1261,8 +1263,7 @@ void Scope::DeclareCatchVariableName(const AstRawString* name) {\n void Scope::AddUnresolved(VariableProxy* proxy) {\n   DCHECK(!already_resolved_);\n   DCHECK(!proxy->is_resolved());\n-  proxy->set_next_unresolved(unresolved_);\n-  unresolved_ = proxy;\n+  unresolved_list_.AddFront(proxy);\n }\n \n Variable* DeclarationScope::DeclareDynamicGlobal(const AstRawString* name,\n@@ -1274,22 +1275,7 @@ Variable* DeclarationScope::DeclareDynamicGlobal(const AstRawString* name,\n }\n \n bool Scope::RemoveUnresolved(VariableProxy* var) {\n-  if (unresolved_ == var) {\n-    unresolved_ = var->next_unresolved();\n-    var->set_next_unresolved(nullptr);\n-    return true;\n-  }\n-  VariableProxy* current = unresolved_;\n-  while (current != nullptr) {\n-    VariableProxy* next = current->next_unresolved();\n-    if (var == next) {\n-      current->set_next_unresolved(next->next_unresolved());\n-      var->set_next_unresolved(nullptr);\n-      return true;\n-    }\n-    current = next;\n-  }\n-  return false;\n+  return unresolved_list_.Remove(var);\n }\n \n Variable* Scope::NewTemporary(const AstRawString* name) {\n@@ -1483,11 +1469,12 @@ Scope* Scope::GetOuterScopeWithContext() {\n \n Handle<StringSet> DeclarationScope::CollectNonLocals(\n     Isolate* isolate, ParseInfo* info, Handle<StringSet> non_locals) {\n-  VariableProxy* free_variables = FetchFreeVariables(this, info);\n-  for (VariableProxy* proxy = free_variables; proxy != nullptr;\n-       proxy = proxy->next_unresolved()) {\n-    non_locals = StringSet::Add(isolate, non_locals, proxy->name());\n-  }\n+  ResolveScopesThenForEachVariable(this,\n+                                   [=, &non_locals](VariableProxy* proxy) {\n+                                     non_locals = StringSet::Add(\n+                                         isolate, non_locals, proxy->name());\n+                                   },\n+                                   info);\n   return non_locals;\n }\n \n@@ -1504,10 +1491,15 @@ void DeclarationScope::ResetAfterPreparsing(AstValueFactory* ast_value_factory,\n   decls_.Clear();\n   locals_.Clear();\n   inner_scope_ = nullptr;\n-  unresolved_ = nullptr;\n+  unresolved_list_.Clear();\n   sloppy_block_function_map_ = nullptr;\n   rare_data_ = nullptr;\n   has_rest_ = false;\n+  has_promise_ = false;\n+  has_generator_object_ = false;\n+\n+  DCHECK_NE(zone_, ast_value_factory->zone());\n+  zone_->ReleaseMemory();\n \n   if (aborted) {\n     // Prepare scope for use in the outer zone.\n@@ -1532,7 +1524,7 @@ void DeclarationScope::ResetAfterPreparsing(AstValueFactory* ast_value_factory,\n \n void Scope::SavePreParsedScopeData() {\n   DCHECK(FLAG_preparser_scope_analysis);\n-  if (ProducedPreParsedScopeData::ScopeIsSkippableFunctionScope(this)) {\n+  if (PreParsedScopeDataBuilder::ScopeIsSkippableFunctionScope(this)) {\n     AsDeclarationScope()->SavePreParsedScopeDataForDeclarationScope();\n   }\n \n@@ -1542,30 +1534,33 @@ void Scope::SavePreParsedScopeData() {\n }\n \n void DeclarationScope::SavePreParsedScopeDataForDeclarationScope() {\n-  if (produced_preparsed_scope_data_ != nullptr) {\n+  if (preparsed_scope_data_builder_ != nullptr) {\n     DCHECK(FLAG_preparser_scope_analysis);\n-    produced_preparsed_scope_data_->SaveScopeAllocationData(this);\n+    preparsed_scope_data_builder_->SaveScopeAllocationData(this);\n   }\n }\n \n void DeclarationScope::AnalyzePartially(AstNodeFactory* ast_node_factory) {\n   DCHECK(!force_eager_compilation_);\n-  VariableProxy* unresolved = nullptr;\n-\n-  if (!outer_scope_->is_script_scope() ||\n-      (FLAG_preparser_scope_analysis &&\n-       produced_preparsed_scope_data_ != nullptr &&\n-       produced_preparsed_scope_data_->ContainsInnerFunctions())) {\n+  base::ThreadedList<VariableProxy> new_unresolved_list;\n+  if (!IsArrowFunction(function_kind_) &&\n+      (!outer_scope_->is_script_scope() ||\n+       (FLAG_preparser_scope_analysis &&\n+        preparsed_scope_data_builder_ != nullptr &&\n+        preparsed_scope_data_builder_->ContainsInnerFunctions()))) {\n     // Try to resolve unresolved variables for this Scope and migrate those\n     // which cannot be resolved inside. It doesn't make sense to try to resolve\n     // them in the outer Scopes here, because they are incomplete.\n-    for (VariableProxy* proxy = FetchFreeVariables(this); proxy != nullptr;\n-         proxy = proxy->next_unresolved()) {\n-      DCHECK(!proxy->is_resolved());\n-      VariableProxy* copy = ast_node_factory->CopyVariableProxy(proxy);\n-      copy->set_next_unresolved(unresolved);\n-      unresolved = copy;\n-    }\n+    ResolveScopesThenForEachVariable(\n+        this, [=, &new_unresolved_list](VariableProxy* proxy) {\n+          // Don't copy unresolved references to the script scope, unless it's a\n+          // reference to a private field. In that case keep it so we can fail\n+          // later.\n+          if (!outer_scope_->is_script_scope() || proxy->is_private_field()) {\n+            VariableProxy* copy = ast_node_factory->CopyVariableProxy(proxy);\n+            new_unresolved_list.AddFront(copy);\n+          }\n+        });\n \n     // Migrate function_ to the right Zone.\n     if (function_ != nullptr) {\n@@ -1586,7 +1581,7 @@ void DeclarationScope::AnalyzePartially(AstNodeFactory* ast_node_factory) {\n \n   ResetAfterPreparsing(ast_node_factory->ast_value_factory(), false);\n \n-  unresolved_ = unresolved;\n+  unresolved_list_ = std::move(new_unresolved_list);\n }\n \n #ifdef DEBUG\n@@ -1673,8 +1668,8 @@ void PrintMap(int indent, const char* label, VariableMap* map, bool locals,\n   for (VariableMap::Entry* p = map->Start(); p != nullptr; p = map->Next(p)) {\n     Variable* var = reinterpret_cast<Variable*>(p->value);\n     if (var == function_var) continue;\n-    if (var == kDummyPreParserVariable ||\n-        var == kDummyPreParserLexicalVariable) {\n+    if (var == Scope::kDummyPreParserVariable ||\n+        var == Scope::kDummyPreParserLexicalVariable) {\n       continue;\n     }\n     bool local = !IsDynamicVariableMode(var->mode());\n@@ -2045,8 +2040,7 @@ bool Scope::ResolveVariablesRecursively(ParseInfo* info) {\n   // scopes.\n   if (is_declaration_scope() && AsDeclarationScope()->was_lazily_parsed()) {\n     DCHECK_EQ(variables_.occupancy(), 0);\n-    for (VariableProxy* proxy = unresolved_; proxy != nullptr;\n-         proxy = proxy->next_unresolved()) {\n+    for (VariableProxy* proxy : unresolved_list_) {\n       Variable* var = outer_scope()->LookupRecursive(info, proxy, nullptr);\n       if (var == nullptr) {\n         DCHECK(proxy->is_private_field());\n@@ -2060,8 +2054,7 @@ bool Scope::ResolveVariablesRecursively(ParseInfo* info) {\n     }\n   } else {\n     // Resolve unresolved variables for this scope.\n-    for (VariableProxy* proxy = unresolved_; proxy != nullptr;\n-         proxy = proxy->next_unresolved()) {\n+    for (VariableProxy* proxy : unresolved_list_) {\n       if (!ResolveVariable(info, proxy)) return false;\n     }\n \n@@ -2074,57 +2067,6 @@ bool Scope::ResolveVariablesRecursively(ParseInfo* info) {\n   return true;\n }\n \n-VariableProxy* Scope::FetchFreeVariables(DeclarationScope* max_outer_scope,\n-                                         ParseInfo* info,\n-                                         VariableProxy* stack) {\n-  // Module variables must be allocated before variable resolution\n-  // to ensure that UpdateNeedsHoleCheck() can detect import variables.\n-  if (info != nullptr && is_module_scope()) {\n-    AsModuleScope()->AllocateModuleVariables();\n-  }\n-  // Lazy parsed declaration scopes are already partially analyzed. If there are\n-  // unresolved references remaining, they just need to be resolved in outer\n-  // scopes.\n-  Scope* lookup =\n-      is_declaration_scope() && AsDeclarationScope()->was_lazily_parsed()\n-          ? outer_scope()\n-          : this;\n-  for (VariableProxy *proxy = unresolved_, *next = nullptr; proxy != nullptr;\n-       proxy = next) {\n-    next = proxy->next_unresolved();\n-    DCHECK(!proxy->is_resolved());\n-    Variable* var =\n-        lookup->LookupRecursive(info, proxy, max_outer_scope->outer_scope());\n-    if (var == nullptr) {\n-      proxy->set_next_unresolved(stack);\n-      stack = proxy;\n-    } else if (var != kDummyPreParserVariable &&\n-               var != kDummyPreParserLexicalVariable) {\n-      if (info != nullptr) {\n-        // In this case we need to leave scopes in a way that they can be\n-        // allocated. If we resolved variables from lazy parsed scopes, we need\n-        // to context allocate the var.\n-        ResolveTo(info, proxy, var);\n-        if (!var->is_dynamic() && lookup != this) var->ForceContextAllocation();\n-      } else {\n-        var->set_is_used();\n-        if (proxy->is_assigned()) {\n-          var->set_maybe_assigned();\n-        }\n-      }\n-    }\n-  }\n-\n-  // Clear unresolved_ as it's in an inconsistent state.\n-  unresolved_ = nullptr;\n-\n-  for (Scope* scope = inner_scope_; scope != nullptr; scope = scope->sibling_) {\n-    stack = scope->FetchFreeVariables(max_outer_scope, info, stack);\n-  }\n-\n-  return stack;\n-}\n-\n bool Scope::MustAllocate(Variable* var) {\n   if (var == kDummyPreParserLexicalVariable || var == kDummyPreParserVariable) {\n     return true;\n@@ -2236,6 +2178,24 @@ void DeclarationScope::AllocateReceiver() {\n   AllocateParameter(receiver(), -1);\n }\n \n+void DeclarationScope::AllocatePromise() {\n+  if (!has_promise_) return;\n+  DCHECK_NOT_NULL(promise_var());\n+  DCHECK_EQ(this, promise_var()->scope());\n+  AllocateStackSlot(promise_var());\n+  DCHECK_EQ(VariableLocation::LOCAL, promise_var()->location());\n+  DCHECK_EQ(kPromiseVarIndex, promise_var()->index());\n+}\n+\n+void DeclarationScope::AllocateGeneratorObject() {\n+  if (!has_generator_object_) return;\n+  DCHECK_NOT_NULL(generator_object_var());\n+  DCHECK_EQ(this, generator_object_var()->scope());\n+  AllocateStackSlot(generator_object_var());\n+  DCHECK_EQ(VariableLocation::LOCAL, generator_object_var()->location());\n+  DCHECK_EQ(kGeneratorObjectVarIndex, generator_object_var()->index());\n+}\n+\n void Scope::AllocateNonParameterLocal(Variable* var) {\n   DCHECK(var->scope() == this);\n   if (var->IsUnallocated() && MustAllocate(var)) {\n@@ -2304,6 +2264,19 @@ void Scope::AllocateVariablesRecursively() {\n     return;\n   }\n \n+  // Make sure to allocate the .promise (for async functions) or\n+  // .generator_object (for async generators) first, so that it\n+  // get's the required stack slot 0 in case it's needed. See\n+  // http://bit.ly/v8-zero-cost-async-stack-traces for details.\n+  if (is_function_scope()) {\n+    FunctionKind kind = GetClosureScope()->function_kind();\n+    if (IsAsyncGeneratorFunction(kind)) {\n+      AsDeclarationScope()->AllocateGeneratorObject();\n+    } else if (IsAsyncFunction(kind)) {\n+      AsDeclarationScope()->AllocatePromise();\n+    }\n+  }\n+\n   // Allocate variables for inner scopes.\n   for (Scope* scope = inner_scope_; scope != nullptr; scope = scope->sibling_) {\n     scope->AllocateVariablesRecursively();\n@@ -2410,5 +2383,9 @@ int Scope::ContextLocalCount() const {\n          (is_function_var_in_context ? 1 : 0);\n }\n \n+void* const Scope::kDummyPreParserVariable = reinterpret_cast<void*>(0x1);\n+void* const Scope::kDummyPreParserLexicalVariable =\n+    reinterpret_cast<void*>(0x2);\n+\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "0b88cc027ce1cad2ba90d581efb798369002c19d",
            "filename": "deps/v8/src/ast/scopes.h",
            "status": "modified",
            "additions": 51,
            "deletions": 22,
            "changes": 73,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -20,8 +20,7 @@ class AstValueFactory;\n class AstRawString;\n class Declaration;\n class ParseInfo;\n-class PreParsedScopeData;\n-class ProducedPreParsedScopeData;\n+class PreParsedScopeDataBuilder;\n class SloppyBlockFunctionStatement;\n class Statement;\n class StringSet;\n@@ -103,7 +102,6 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n   void SetScopeName(const AstRawString* scope_name) {\n     scope_name_ = scope_name;\n   }\n-  void set_needs_migration() { needs_migration_ = true; }\n #endif\n \n   // TODO(verwaest): Is this needed on Scope?\n@@ -114,7 +112,7 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n   ModuleScope* AsModuleScope();\n   const ModuleScope* AsModuleScope() const;\n \n-  class Snapshot final BASE_EMBEDDED {\n+  class Snapshot final {\n    public:\n     explicit Snapshot(Scope* scope);\n     ~Snapshot();\n@@ -125,8 +123,8 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n     Scope* outer_scope_;\n     Scope* top_inner_scope_;\n     VariableProxy* top_unresolved_;\n-    ThreadedList<Variable>::Iterator top_local_;\n-    ThreadedList<Declaration>::Iterator top_decl_;\n+    base::ThreadedList<Variable>::Iterator top_local_;\n+    base::ThreadedList<Declaration>::Iterator top_decl_;\n     const bool outer_scope_calls_eval_;\n   };\n \n@@ -203,9 +201,9 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n   void DeclareCatchVariableName(const AstRawString* name);\n \n   // Declarations list.\n-  ThreadedList<Declaration>* declarations() { return &decls_; }\n+  base::ThreadedList<Declaration>* declarations() { return &decls_; }\n \n-  ThreadedList<Variable>* locals() { return &locals_; }\n+  base::ThreadedList<Variable>* locals() { return &locals_; }\n \n   // Create a new unresolved variable.\n   VariableProxy* NewUnresolved(AstNodeFactory* factory,\n@@ -218,8 +216,7 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n     DCHECK(!already_resolved_);\n     DCHECK_EQ(factory->zone(), zone());\n     VariableProxy* proxy = factory->NewVariableProxy(name, kind, start_pos);\n-    proxy->set_next_unresolved(unresolved_);\n-    unresolved_ = proxy;\n+    AddUnresolved(proxy);\n     return proxy;\n   }\n \n@@ -480,6 +477,9 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n     return false;\n   }\n \n+  static void* const kDummyPreParserVariable;\n+  static void* const kDummyPreParserLexicalVariable;\n+\n  protected:\n   explicit Scope(Zone* zone);\n \n@@ -522,12 +522,12 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n   VariableMap variables_;\n   // In case of non-scopeinfo-backed scopes, this contains the variables of the\n   // map above in order of addition.\n-  ThreadedList<Variable> locals_;\n+  base::ThreadedList<Variable> locals_;\n   // Unresolved variables referred to from this scope. The proxies themselves\n   // form a linked list of all unresolved proxies.\n-  VariableProxy* unresolved_;\n+  base::ThreadedList<VariableProxy> unresolved_list_;\n   // Declarations.\n-  ThreadedList<Declaration> decls_;\n+  base::ThreadedList<Declaration> decls_;\n \n   // Serialized scope info support.\n   Handle<ScopeInfo> scope_info_;\n@@ -597,9 +597,10 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n   // Finds free variables of this scope. This mutates the unresolved variables\n   // list along the way, so full resolution cannot be done afterwards.\n   // If a ParseInfo* is passed, non-free variables will be resolved.\n-  VariableProxy* FetchFreeVariables(DeclarationScope* max_outer_scope,\n-                                    ParseInfo* info = nullptr,\n-                                    VariableProxy* stack = nullptr);\n+  template <typename T>\n+  void ResolveScopesThenForEachVariable(DeclarationScope* max_outer_scope,\n+                                        T variable_proxy_stackvisitor,\n+                                        ParseInfo* info = nullptr);\n \n   // Predicates.\n   bool MustAllocate(Variable* var);\n@@ -682,6 +683,12 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n   }\n   bool is_being_lazily_parsed() const { return is_being_lazily_parsed_; }\n #endif\n+  void set_zone(Zone* zone) {\n+#ifdef DEBUG\n+    needs_migration_ = true;\n+#endif\n+    zone_ = zone;\n+  }\n \n   bool ShouldEagerCompile() const;\n   void set_should_eager_compile();\n@@ -759,18 +766,34 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n   // literals, or nullptr.  Only valid for function scopes.\n   Variable* function_var() const { return function_; }\n \n+  // The variable holding the JSGeneratorObject for generator, async\n+  // and async generator functions, and modules. Only valid for\n+  // function and module scopes.\n   Variable* generator_object_var() const {\n     DCHECK(is_function_scope() || is_module_scope());\n     return GetRareVariable(RareVariable::kGeneratorObject);\n   }\n \n+  // For async generators, the .generator_object variable is always\n+  // allocated to a fixed stack slot, such that the stack trace\n+  // construction logic can access it.\n+  static constexpr int kGeneratorObjectVarIndex = 0;\n+\n+  // The variable holding the promise returned from async functions.\n+  // Only valid for function scopes in async functions (i.e. not\n+  // for async generators).\n   Variable* promise_var() const {\n     DCHECK(is_function_scope());\n     DCHECK(IsAsyncFunction(function_kind_));\n     if (IsAsyncGeneratorFunction(function_kind_)) return nullptr;\n     return GetRareVariable(RareVariable::kPromise);\n   }\n \n+  // For async functions, the .promise variable is always allocated\n+  // to a fixed stack slot, such that the stack trace construction\n+  // logic can access it.\n+  static constexpr int kPromiseVarIndex = 0;\n+\n   // Parameters. The left-most parameter has index 0.\n   // Only valid for function and module scopes.\n   Variable* parameter(int index) const {\n@@ -898,6 +921,8 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n   void AllocateLocals();\n   void AllocateParameterLocals();\n   void AllocateReceiver();\n+  void AllocatePromise();\n+  void AllocateGeneratorObject();\n \n   void ResetAfterPreparsing(AstValueFactory* ast_value_factory, bool aborted);\n \n@@ -919,13 +944,13 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n   // saved in produced_preparsed_scope_data_.\n   void SavePreParsedScopeDataForDeclarationScope();\n \n-  void set_produced_preparsed_scope_data(\n-      ProducedPreParsedScopeData* produced_preparsed_scope_data) {\n-    produced_preparsed_scope_data_ = produced_preparsed_scope_data;\n+  void set_preparsed_scope_data_builder(\n+      PreParsedScopeDataBuilder* preparsed_scope_data_builder) {\n+    preparsed_scope_data_builder_ = preparsed_scope_data_builder;\n   }\n \n-  ProducedPreParsedScopeData* produced_preparsed_scope_data() const {\n-    return produced_preparsed_scope_data_;\n+  PreParsedScopeDataBuilder* preparsed_scope_data_builder() const {\n+    return preparsed_scope_data_builder_;\n   }\n \n  private:\n@@ -954,6 +979,10 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n   bool force_eager_compilation_ : 1;\n   // This function scope has a rest parameter.\n   bool has_rest_ : 1;\n+  // This function scope has a .promise variable.\n+  bool has_promise_ : 1;\n+  // This function scope has a .generator_object variable.\n+  bool has_generator_object_ : 1;\n   // This scope has a parameter called \"arguments\".\n   bool has_arguments_parameter_ : 1;\n   // This scope uses \"super\" property ('super.foo').\n@@ -981,7 +1010,7 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n   Variable* arguments_;\n \n   // For producing the scope allocation data during preparsing.\n-  ProducedPreParsedScopeData* produced_preparsed_scope_data_;\n+  PreParsedScopeDataBuilder* preparsed_scope_data_builder_;\n \n   struct RareData : public ZoneObject {\n     // Convenience variable; Subclass constructor only"
        },
        {
            "sha": "d33062973b37d9bd24851df6245ab2b8d999c00d",
            "filename": "deps/v8/src/ast/variables.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fvariables.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fast%2Fvariables.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fvariables.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -181,7 +181,7 @@ class Variable final : public ZoneObject {\n                                       : kNeedsInitialization;\n   }\n \n-  typedef ThreadedList<Variable> List;\n+  typedef base::ThreadedList<Variable> List;\n \n  private:\n   Scope* scope_;\n@@ -215,6 +215,7 @@ class Variable final : public ZoneObject {\n                           ForceHoleInitializationField::kNext, 1> {};\n   Variable** next() { return &next_; }\n   friend List;\n+  friend base::ThreadedListTraits<Variable>;\n };\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "6b733cfe4d81973f39db56d0a7fb1b8bd785b107",
            "filename": "deps/v8/src/base/address-region.h",
            "status": "added",
            "additions": 70,
            "deletions": 0,
            "changes": 70,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Faddress-region.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Faddress-region.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Faddress-region.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,70 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_BASE_ADDRESS_REGION_H_\n+#define V8_BASE_ADDRESS_REGION_H_\n+\n+#include <iostream>\n+\n+#include \"src/base/macros.h\"\n+\n+namespace v8 {\n+namespace base {\n+\n+// Helper class representing an address region of certain size.\n+class AddressRegion {\n+ public:\n+  typedef uintptr_t Address;\n+\n+  AddressRegion() = default;\n+\n+  AddressRegion(Address address, size_t size)\n+      : address_(address), size_(size) {}\n+\n+  Address begin() const { return address_; }\n+  Address end() const { return address_ + size_; }\n+\n+  size_t size() const { return size_; }\n+  void set_size(size_t size) { size_ = size; }\n+\n+  bool is_empty() const { return size_ == 0; }\n+\n+  bool contains(Address address) const {\n+    STATIC_ASSERT(std::is_unsigned<Address>::value);\n+    return (address - begin()) < size();\n+  }\n+\n+  bool contains(Address address, size_t size) const {\n+    STATIC_ASSERT(std::is_unsigned<Address>::value);\n+    Address offset = address - begin();\n+    return (offset < size_) && (offset + size <= size_);\n+  }\n+\n+  bool contains(AddressRegion region) const {\n+    return contains(region.address_, region.size_);\n+  }\n+\n+  bool operator==(AddressRegion other) const {\n+    return address_ == other.address_ && size_ == other.size_;\n+  }\n+\n+  bool operator!=(AddressRegion other) const {\n+    return address_ != other.address_ || size_ != other.size_;\n+  }\n+\n+ private:\n+  Address address_ = 0;\n+  size_t size_ = 0;\n+};\n+ASSERT_TRIVIALLY_COPYABLE(AddressRegion);\n+\n+inline std::ostream& operator<<(std::ostream& out, AddressRegion region) {\n+  return out << \"[\" << reinterpret_cast<void*>(region.begin()) << \"+\"\n+             << region.size() << \"]\";\n+}\n+\n+}  // namespace base\n+}  // namespace v8\n+\n+#endif  // V8_BASE_ADDRESS_REGION_H_"
        },
        {
            "sha": "90681b8a352a31bd0f47a234883d654ffb522aef",
            "filename": "deps/v8/src/base/atomic-utils.h",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fatomic-utils.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fatomic-utils.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fatomic-utils.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -377,6 +377,22 @@ class AtomicElement {\n   T value_;\n };\n \n+template <typename T,\n+          typename = typename std::enable_if<std::is_unsigned<T>::value>::type>\n+inline void CheckedIncrement(std::atomic<T>* number, T amount) {\n+  const T old = number->fetch_add(amount);\n+  DCHECK_GE(old + amount, old);\n+  USE(old);\n+}\n+\n+template <typename T,\n+          typename = typename std::enable_if<std::is_unsigned<T>::value>::type>\n+inline void CheckedDecrement(std::atomic<T>* number, T amount) {\n+  const T old = number->fetch_sub(amount);\n+  DCHECK_GE(old, amount);\n+  USE(old);\n+}\n+\n }  // namespace base\n }  // namespace v8\n "
        },
        {
            "sha": "147a1730b2829606cdb9043b59d2ae0e6555b780",
            "filename": "deps/v8/src/base/bits.h",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fbits.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fbits.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fbits.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -146,6 +146,14 @@ constexpr inline bool IsPowerOfTwo(T value) {\n V8_BASE_EXPORT uint32_t RoundUpToPowerOfTwo32(uint32_t value);\n // Same for 64 bit integers. |value| must be <= 2^63\n V8_BASE_EXPORT uint64_t RoundUpToPowerOfTwo64(uint64_t value);\n+// Same for size_t integers.\n+inline size_t RoundUpToPowerOfTwo(size_t value) {\n+  if (sizeof(size_t) == sizeof(uint64_t)) {\n+    return RoundUpToPowerOfTwo64(value);\n+  } else {\n+    return RoundUpToPowerOfTwo32(value);\n+  }\n+}\n \n // RoundDownToPowerOfTwo32(value) returns the greatest power of two which is\n // less than or equal to |value|. If you pass in a |value| that is already a"
        },
        {
            "sha": "ca9dde25f797b88381f9ea5c893fd4e0f35acea6",
            "filename": "deps/v8/src/base/bounded-page-allocator.cc",
            "status": "added",
            "additions": 101,
            "deletions": 0,
            "changes": 101,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fbounded-page-allocator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fbounded-page-allocator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fbounded-page-allocator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,101 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#include \"src/base/bounded-page-allocator.h\"\n+\n+namespace v8 {\n+namespace base {\n+\n+BoundedPageAllocator::BoundedPageAllocator(v8::PageAllocator* page_allocator,\n+                                           Address start, size_t size,\n+                                           size_t allocate_page_size)\n+    : allocate_page_size_(allocate_page_size),\n+      commit_page_size_(page_allocator->CommitPageSize()),\n+      page_allocator_(page_allocator),\n+      region_allocator_(start, size, allocate_page_size_) {\n+  CHECK_NOT_NULL(page_allocator);\n+  CHECK(IsAligned(allocate_page_size, page_allocator->AllocatePageSize()));\n+  CHECK(IsAligned(allocate_page_size_, commit_page_size_));\n+}\n+\n+BoundedPageAllocator::Address BoundedPageAllocator::begin() const {\n+  return region_allocator_.begin();\n+}\n+\n+size_t BoundedPageAllocator::size() const { return region_allocator_.size(); }\n+\n+void* BoundedPageAllocator::AllocatePages(void* hint, size_t size,\n+                                          size_t alignment,\n+                                          PageAllocator::Permission access) {\n+  LockGuard<Mutex> guard(&mutex_);\n+  CHECK(IsAligned(alignment, region_allocator_.page_size()));\n+\n+  // Region allocator does not support alignments bigger than it's own\n+  // allocation alignment.\n+  CHECK_LE(alignment, allocate_page_size_);\n+\n+  // TODO(ishell): Consider using randomized version here.\n+  Address address = region_allocator_.AllocateRegion(size);\n+  if (address == RegionAllocator::kAllocationFailure) {\n+    return nullptr;\n+  }\n+  CHECK(page_allocator_->SetPermissions(reinterpret_cast<void*>(address), size,\n+                                        access));\n+  return reinterpret_cast<void*>(address);\n+}\n+\n+bool BoundedPageAllocator::FreePages(void* raw_address, size_t size) {\n+  LockGuard<Mutex> guard(&mutex_);\n+\n+  Address address = reinterpret_cast<Address>(raw_address);\n+  size_t freed_size = region_allocator_.FreeRegion(address);\n+  if (freed_size != size) return false;\n+  CHECK(page_allocator_->SetPermissions(raw_address, size,\n+                                        PageAllocator::kNoAccess));\n+  return true;\n+}\n+\n+bool BoundedPageAllocator::ReleasePages(void* raw_address, size_t size,\n+                                        size_t new_size) {\n+  Address address = reinterpret_cast<Address>(raw_address);\n+  CHECK(IsAligned(address, allocate_page_size_));\n+\n+  DCHECK_LT(new_size, size);\n+  DCHECK(IsAligned(size - new_size, commit_page_size_));\n+\n+  // Check if we freed any allocatable pages by this release.\n+  size_t allocated_size = RoundUp(size, allocate_page_size_);\n+  size_t new_allocated_size = RoundUp(new_size, allocate_page_size_);\n+\n+#ifdef DEBUG\n+  {\n+    // There must be an allocated region at given |address| of a size not\n+    // smaller than |size|.\n+    LockGuard<Mutex> guard(&mutex_);\n+    CHECK_EQ(allocated_size, region_allocator_.CheckRegion(address));\n+  }\n+#endif\n+\n+  if (new_allocated_size < allocated_size) {\n+    LockGuard<Mutex> guard(&mutex_);\n+    region_allocator_.TrimRegion(address, new_allocated_size);\n+  }\n+\n+  // Keep the region in \"used\" state just uncommit some pages.\n+  Address free_address = address + new_size;\n+  size_t free_size = size - new_size;\n+  return page_allocator_->SetPermissions(reinterpret_cast<void*>(free_address),\n+                                         free_size, PageAllocator::kNoAccess);\n+}\n+\n+bool BoundedPageAllocator::SetPermissions(void* address, size_t size,\n+                                          PageAllocator::Permission access) {\n+  DCHECK(IsAligned(reinterpret_cast<Address>(address), commit_page_size_));\n+  DCHECK(IsAligned(size, commit_page_size_));\n+  DCHECK(region_allocator_.contains(reinterpret_cast<Address>(address), size));\n+  return page_allocator_->SetPermissions(address, size, access);\n+}\n+\n+}  // namespace base\n+}  // namespace v8"
        },
        {
            "sha": "e3d928618b4fd919cea920d750e2bafc926a7409",
            "filename": "deps/v8/src/base/bounded-page-allocator.h",
            "status": "added",
            "additions": 79,
            "deletions": 0,
            "changes": 79,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fbounded-page-allocator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fbounded-page-allocator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fbounded-page-allocator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,79 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_BASE_BOUNDED_PAGE_ALLOCATOR_H_\n+#define V8_BASE_BOUNDED_PAGE_ALLOCATOR_H_\n+\n+#include \"include/v8-platform.h\"\n+#include \"src/base/platform/mutex.h\"\n+#include \"src/base/region-allocator.h\"\n+\n+namespace v8 {\n+namespace base {\n+\n+// This is a v8::PageAllocator implementation that allocates pages within the\n+// pre-reserved region of virtual space. This class requires the virtual space\n+// to be kept reserved during the lifetime of this object.\n+// The main application of bounded page allocator are\n+//  - V8 heap pointer compression which requires the whole V8 heap to be\n+//    allocated within a contiguous range of virtual address space,\n+//  - executable page allocation, which allows to use PC-relative 32-bit code\n+//    displacement on certain 64-bit platforms.\n+// Bounded page allocator uses other page allocator instance for doing actual\n+// page allocations.\n+// The implementation is thread-safe.\n+class V8_BASE_EXPORT BoundedPageAllocator : public v8::PageAllocator {\n+ public:\n+  typedef uintptr_t Address;\n+\n+  BoundedPageAllocator(v8::PageAllocator* page_allocator, Address start,\n+                       size_t size, size_t allocate_page_size);\n+  ~BoundedPageAllocator() override = default;\n+\n+  // These functions are not inlined to avoid https://crbug.com/v8/8275.\n+  Address begin() const;\n+  size_t size() const;\n+\n+  // Returns true if given address is in the range controlled by the bounded\n+  // page allocator instance.\n+  bool contains(Address address) const {\n+    return region_allocator_.contains(address);\n+  }\n+\n+  size_t AllocatePageSize() override { return allocate_page_size_; }\n+\n+  size_t CommitPageSize() override { return commit_page_size_; }\n+\n+  void SetRandomMmapSeed(int64_t seed) override {\n+    page_allocator_->SetRandomMmapSeed(seed);\n+  }\n+\n+  void* GetRandomMmapAddr() override {\n+    return page_allocator_->GetRandomMmapAddr();\n+  }\n+\n+  void* AllocatePages(void* address, size_t size, size_t alignment,\n+                      PageAllocator::Permission access) override;\n+\n+  bool FreePages(void* address, size_t size) override;\n+\n+  bool ReleasePages(void* address, size_t size, size_t new_size) override;\n+\n+  bool SetPermissions(void* address, size_t size,\n+                      PageAllocator::Permission access) override;\n+\n+ private:\n+  v8::base::Mutex mutex_;\n+  const size_t allocate_page_size_;\n+  const size_t commit_page_size_;\n+  v8::PageAllocator* const page_allocator_;\n+  v8::base::RegionAllocator region_allocator_;\n+\n+  DISALLOW_COPY_AND_ASSIGN(BoundedPageAllocator);\n+};\n+\n+}  // namespace base\n+}  // namespace v8\n+\n+#endif  // V8_BASE_BOUNDED_PAGE_ALLOCATOR_H_"
        },
        {
            "sha": "695e67a6187d37f329f0994d74c264793f1bf9de",
            "filename": "deps/v8/src/base/build_config.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fbuild_config.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fbuild_config.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fbuild_config.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -196,9 +196,9 @@\n #endif\n \n #if defined(V8_TARGET_ARCH_IA32) || defined(V8_TARGET_ARCH_X64)\n-#define V8_TARGET_ARCH_STORES_RETURN_ADDRESS_ON_STACK 1\n+#define V8_TARGET_ARCH_STORES_RETURN_ADDRESS_ON_STACK true\n #else\n-#define V8_TARGET_ARCH_STORES_RETURN_ADDRESS_ON_STACK 0\n+#define V8_TARGET_ARCH_STORES_RETURN_ADDRESS_ON_STACK false\n #endif\n \n // Number of bits to represent the page size for paged spaces. The value of 19"
        },
        {
            "sha": "cbf00ad17c7df5d74c49533c79616c78112218a8",
            "filename": "deps/v8/src/base/debug/stack_trace.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -21,7 +21,7 @@ StackTrace::StackTrace(const void* const* trace, size_t count) {\n   count_ = count;\n }\n \n-StackTrace::~StackTrace() {}\n+StackTrace::~StackTrace() = default;\n \n const void* const* StackTrace::Addresses(size_t* count) const {\n   *count = count_;"
        },
        {
            "sha": "ed602af547d2f97c16de45f3dbbc8fe090bad3c2",
            "filename": "deps/v8/src/base/debug/stack_trace_posix.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_posix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_posix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_posix.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -61,7 +61,7 @@ char* itoa_r(intptr_t i, char* buf, size_t sz, int base, size_t padding);\n namespace {\n \n volatile sig_atomic_t in_signal_handler = 0;\n-bool dump_stack_in_signal_handler = 1;\n+bool dump_stack_in_signal_handler = true;\n \n // The prefix used for mangled symbols, per the Itanium C++ ABI:\n // http://www.codesourcery.com/cxx-abi/abi.html#mangling\n@@ -104,7 +104,7 @@ void DemangleSymbols(std::string* text) {\n     // Try to demangle the mangled symbol candidate.\n     int status = 0;\n     std::unique_ptr<char, FreeDeleter> demangled_symbol(\n-        abi::__cxa_demangle(mangled_symbol.c_str(), nullptr, 0, &status));\n+        abi::__cxa_demangle(mangled_symbol.c_str(), nullptr, nullptr, &status));\n     if (status == 0) {  // Demangling is successful.\n       // Remove the mangled symbol.\n       text->erase(mangled_start, mangled_end - mangled_start);\n@@ -125,7 +125,7 @@ class BacktraceOutputHandler {\n   virtual void HandleOutput(const char* output) = 0;\n \n  protected:\n-  virtual ~BacktraceOutputHandler() {}\n+  virtual ~BacktraceOutputHandler() = default;\n };\n \n #if HAVE_EXECINFO_H\n@@ -266,7 +266,7 @@ void StackDumpSignalHandler(int signal, siginfo_t* info, void* void_context) {\n \n class PrintBacktraceOutputHandler : public BacktraceOutputHandler {\n  public:\n-  PrintBacktraceOutputHandler() {}\n+  PrintBacktraceOutputHandler() = default;\n \n   void HandleOutput(const char* output) override {\n     // NOTE: This code MUST be async-signal safe (it's used by in-process"
        },
        {
            "sha": "6b2213123324113a0516e14a75eed5f7c246b70a",
            "filename": "deps/v8/src/base/debug/stack_trace_win.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_win.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_win.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_win.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -7,13 +7,6 @@\n \n #include \"src/base/debug/stack_trace.h\"\n \n-// This file can't use \"src/base/win32-headers.h\" because it defines symbols\n-// that lead to compilation errors. But `NOMINMAX` should be defined to disable\n-// defining of the `min` and `max` MACROS.\n-#ifndef NOMINMAX\n-#define NOMINMAX\n-#endif\n-\n #include <windows.h>\n #include <dbghelp.h>\n #include <Shlwapi.h>"
        },
        {
            "sha": "8c5641569def84f9899b2d475a414944850565da",
            "filename": "deps/v8/src/base/ieee754.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -90,15 +90,15 @@ typedef union {\n     ew_u.value = (d);              \\\n     (ix0) = ew_u.parts.msw;        \\\n     (ix1) = ew_u.parts.lsw;        \\\n-  } while (0)\n+  } while (false)\n \n /* Get a 64-bit int from a double. */\n #define EXTRACT_WORD64(ix, d)    \\\n   do {                           \\\n     ieee_double_shape_type ew_u; \\\n     ew_u.value = (d);            \\\n     (ix) = ew_u.xparts.w;        \\\n-  } while (0)\n+  } while (false)\n \n /* Get the more significant 32 bit int from a double.  */\n \n@@ -107,7 +107,7 @@ typedef union {\n     ieee_double_shape_type gh_u; \\\n     gh_u.value = (d);            \\\n     (i) = gh_u.parts.msw;        \\\n-  } while (0)\n+  } while (false)\n \n /* Get the less significant 32 bit int from a double.  */\n \n@@ -116,7 +116,7 @@ typedef union {\n     ieee_double_shape_type gl_u; \\\n     gl_u.value = (d);            \\\n     (i) = gl_u.parts.lsw;        \\\n-  } while (0)\n+  } while (false)\n \n /* Set a double from two 32 bit ints.  */\n \n@@ -126,15 +126,15 @@ typedef union {\n     iw_u.parts.msw = (ix0);       \\\n     iw_u.parts.lsw = (ix1);       \\\n     (d) = iw_u.value;             \\\n-  } while (0)\n+  } while (false)\n \n /* Set a double from a 64-bit int. */\n #define INSERT_WORD64(d, ix)     \\\n   do {                           \\\n     ieee_double_shape_type iw_u; \\\n     iw_u.xparts.w = (ix);        \\\n     (d) = iw_u.value;            \\\n-  } while (0)\n+  } while (false)\n \n /* Set the more significant 32 bits of a double from an int.  */\n \n@@ -144,7 +144,7 @@ typedef union {\n     sh_u.value = (d);            \\\n     sh_u.parts.msw = (v);        \\\n     (d) = sh_u.value;            \\\n-  } while (0)\n+  } while (false)\n \n /* Set the less significant 32 bits of a double from an int.  */\n \n@@ -154,7 +154,7 @@ typedef union {\n     sl_u.value = (d);            \\\n     sl_u.parts.lsw = (v);        \\\n     (d) = sl_u.value;            \\\n-  } while (0)\n+  } while (false)\n \n /* Support macro. */\n \n@@ -1210,9 +1210,9 @@ double atan(double x) {\n     if (ix > 0x7FF00000 || (ix == 0x7FF00000 && (low != 0)))\n       return x + x; /* NaN */\n     if (hx > 0)\n-      return atanhi[3] + *(volatile double *)&atanlo[3];\n+      return atanhi[3] + *const_cast<volatile double*>(&atanlo[3]);\n     else\n-      return -atanhi[3] - *(volatile double *)&atanlo[3];\n+      return -atanhi[3] - *const_cast<volatile double*>(&atanlo[3]);\n   }\n   if (ix < 0x3FDC0000) {            /* |x| < 0.4375 */\n     if (ix < 0x3E400000) {          /* |x| < 2^-27 */"
        },
        {
            "sha": "9a9538d06574bd0921728cdc46d8d6f834c1b1ff",
            "filename": "deps/v8/src/base/logging.h",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Flogging.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Flogging.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Flogging.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -49,7 +49,7 @@ V8_BASE_EXPORT void SetDcheckFunction(void (*dcheck_Function)(const char*, int,\n     if (V8_UNLIKELY(!(condition))) {       \\\n       FATAL(\"Check failed: %s.\", message); \\\n     }                                      \\\n-  } while (0)\n+  } while (false)\n #define CHECK(condition) CHECK_WITH_MSG(condition, #condition)\n \n #ifdef DEBUG\n@@ -59,7 +59,7 @@ V8_BASE_EXPORT void SetDcheckFunction(void (*dcheck_Function)(const char*, int,\n     if (V8_UNLIKELY(!(condition))) {          \\\n       V8_Dcheck(__FILE__, __LINE__, message); \\\n     }                                         \\\n-  } while (0)\n+  } while (false)\n #define DCHECK(condition) DCHECK_WITH_MSG(condition, #condition)\n \n // Helper macro for binary operators.\n@@ -73,7 +73,7 @@ V8_BASE_EXPORT void SetDcheckFunction(void (*dcheck_Function)(const char*, int,\n       FATAL(\"Check failed: %s.\", _msg->c_str());                          \\\n       delete _msg;                                                        \\\n     }                                                                     \\\n-  } while (0)\n+  } while (false)\n \n #define DCHECK_OP(name, op, lhs, rhs)                                     \\\n   do {                                                                    \\\n@@ -84,7 +84,7 @@ V8_BASE_EXPORT void SetDcheckFunction(void (*dcheck_Function)(const char*, int,\n       V8_Dcheck(__FILE__, __LINE__, _msg->c_str());                       \\\n       delete _msg;                                                        \\\n     }                                                                     \\\n-  } while (0)\n+  } while (false)\n \n #else\n \n@@ -98,7 +98,7 @@ V8_BASE_EXPORT void SetDcheckFunction(void (*dcheck_Function)(const char*, int,\n         typename ::v8::base::pass_value_or_ref<decltype(rhs)>::type>((lhs),  \\\n                                                                      (rhs)); \\\n     CHECK_WITH_MSG(_cmp, #lhs \" \" #op \" \" #rhs);                             \\\n-  } while (0)\n+  } while (false)\n \n #define DCHECK_WITH_MSG(condition, msg) void(0);\n "
        },
        {
            "sha": "4840c7ea80e91aa3d5cc36bf908601f6642a1dd5",
            "filename": "deps/v8/src/base/lsan-page-allocator.cc",
            "status": "added",
            "additions": 59,
            "deletions": 0,
            "changes": 59,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Flsan-page-allocator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Flsan-page-allocator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Flsan-page-allocator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,59 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#include \"src/base/lsan-page-allocator.h\"\n+\n+#include \"src/base/logging.h\"\n+\n+#if defined(LEAK_SANITIZER)\n+#include <sanitizer/lsan_interface.h>\n+#endif\n+\n+namespace v8 {\n+namespace base {\n+\n+LsanPageAllocator::LsanPageAllocator(v8::PageAllocator* page_allocator)\n+    : page_allocator_(page_allocator),\n+      allocate_page_size_(page_allocator_->AllocatePageSize()),\n+      commit_page_size_(page_allocator_->CommitPageSize()) {\n+  DCHECK_NOT_NULL(page_allocator);\n+}\n+\n+void* LsanPageAllocator::AllocatePages(void* address, size_t size,\n+                                       size_t alignment,\n+                                       PageAllocator::Permission access) {\n+  void* result =\n+      page_allocator_->AllocatePages(address, size, alignment, access);\n+#if defined(LEAK_SANITIZER)\n+  if (result != nullptr) {\n+    __lsan_register_root_region(result, size);\n+  }\n+#endif\n+  return result;\n+}\n+\n+bool LsanPageAllocator::FreePages(void* address, size_t size) {\n+  bool result = page_allocator_->FreePages(address, size);\n+#if defined(LEAK_SANITIZER)\n+  if (result) {\n+    __lsan_unregister_root_region(address, size);\n+  }\n+#endif\n+  return result;\n+}\n+\n+bool LsanPageAllocator::ReleasePages(void* address, size_t size,\n+                                     size_t new_size) {\n+  bool result = page_allocator_->ReleasePages(address, size, new_size);\n+#if defined(LEAK_SANITIZER)\n+  if (result) {\n+    __lsan_unregister_root_region(address, size);\n+    __lsan_register_root_region(address, new_size);\n+  }\n+#endif\n+  return result;\n+}\n+\n+}  // namespace base\n+}  // namespace v8"
        },
        {
            "sha": "d95c7fbf1ed2080a33bdd0af2bbf6416204ba811",
            "filename": "deps/v8/src/base/lsan-page-allocator.h",
            "status": "added",
            "additions": 56,
            "deletions": 0,
            "changes": 56,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Flsan-page-allocator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Flsan-page-allocator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Flsan-page-allocator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,56 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_BASE_LSAN_PAGE_ALLOCATOR_H_\n+#define V8_BASE_LSAN_PAGE_ALLOCATOR_H_\n+\n+#include \"include/v8-platform.h\"\n+#include \"src/base/base-export.h\"\n+#include \"src/base/compiler-specific.h\"\n+\n+namespace v8 {\n+namespace base {\n+\n+// This is a v8::PageAllocator implementation that decorates provided page\n+// allocator object with leak sanitizer notifications when LEAK_SANITIZER\n+// is defined.\n+class V8_BASE_EXPORT LsanPageAllocator\n+    : public NON_EXPORTED_BASE(::v8::PageAllocator) {\n+ public:\n+  LsanPageAllocator(v8::PageAllocator* page_allocator);\n+  ~LsanPageAllocator() override = default;\n+\n+  size_t AllocatePageSize() override { return allocate_page_size_; }\n+\n+  size_t CommitPageSize() override { return commit_page_size_; }\n+\n+  void SetRandomMmapSeed(int64_t seed) override {\n+    return page_allocator_->SetRandomMmapSeed(seed);\n+  }\n+\n+  void* GetRandomMmapAddr() override {\n+    return page_allocator_->GetRandomMmapAddr();\n+  }\n+\n+  void* AllocatePages(void* address, size_t size, size_t alignment,\n+                      PageAllocator::Permission access) override;\n+\n+  bool FreePages(void* address, size_t size) override;\n+\n+  bool ReleasePages(void* address, size_t size, size_t new_size) override;\n+\n+  bool SetPermissions(void* address, size_t size,\n+                      PageAllocator::Permission access) override {\n+    return page_allocator_->SetPermissions(address, size, access);\n+  }\n+\n+ private:\n+  v8::PageAllocator* const page_allocator_;\n+  const size_t allocate_page_size_;\n+  const size_t commit_page_size_;\n+};\n+\n+}  // namespace base\n+}  // namespace v8\n+#endif  // V8_BASE_LSAN_PAGE_ALLOCATOR_H_"
        },
        {
            "sha": "8a2efe61a901684a74bda0d05e25bd152466140e",
            "filename": "deps/v8/src/base/macros.h",
            "status": "modified",
            "additions": 24,
            "deletions": 24,
            "changes": 48,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -14,6 +14,9 @@\n // No-op macro which is used to work around MSVC's funky VA_ARGS support.\n #define EXPAND(x) x\n \n+// This macro does nothing. That's all.\n+#define NOTHING(...)\n+\n // TODO(all) Replace all uses of this macro with C++'s offsetof. To do that, we\n // have to make sure that only standard-layout types and simple field\n // designators are used.\n@@ -195,8 +198,9 @@ V8_INLINE Dest bit_cast(Source const& source) {\n #define V8_IMMEDIATE_CRASH() ((void(*)())0)()\n #endif\n \n-\n-// TODO(all) Replace all uses of this macro with static_assert, remove macro.\n+// A convenience wrapper around static_assert without a string message argument.\n+// Once C++17 becomes the default, this macro can be removed in favor of the\n+// new static_assert(condition) overload.\n #define STATIC_ASSERT(test) static_assert(test, #test)\n \n namespace v8 {\n@@ -276,6 +280,12 @@ struct Use {\n     (void)unused_tmp_array_for_use_macro;                          \\\n   } while (false)\n \n+// Evaluate the instantiations of an expression with parameter packs.\n+// Since USE has left-to-right evaluation order of it's arguments,\n+// the parameter pack is iterated from left to right and side effects\n+// have defined behavior.\n+#define ITERATE_PACK(...) USE(0, ((__VA_ARGS__), 0)...)\n+\n }  // namespace base\n }  // namespace v8\n \n@@ -346,47 +356,37 @@ V8_INLINE A implicit_cast(A x) {\n //      write V8_2PART_UINT64_C(0x12345678,90123456);\n #define V8_2PART_UINT64_C(a, b) (((static_cast<uint64_t>(a) << 32) + 0x##b##u))\n \n-\n-// Compute the 0-relative offset of some absolute value x of type T.\n-// This allows conversion of Addresses and integral types into\n-// 0-relative int offsets.\n-template <typename T>\n-constexpr inline intptr_t OffsetFrom(T x) {\n-  return x - static_cast<T>(0);\n-}\n-\n-\n-// Compute the absolute value of type T for some 0-relative offset x.\n-// This allows conversion of 0-relative int offsets into Addresses and\n-// integral types.\n-template <typename T>\n-constexpr inline T AddressFrom(intptr_t x) {\n-  return static_cast<T>(static_cast<T>(0) + x);\n-}\n-\n-\n // Return the largest multiple of m which is <= x.\n template <typename T>\n inline T RoundDown(T x, intptr_t m) {\n+  STATIC_ASSERT(std::is_integral<T>::value);\n   // m must be a power of two.\n   DCHECK(m != 0 && ((m & (m - 1)) == 0));\n-  return AddressFrom<T>(OffsetFrom(x) & -m);\n+  return x & -m;\n }\n template <intptr_t m, typename T>\n constexpr inline T RoundDown(T x) {\n+  STATIC_ASSERT(std::is_integral<T>::value);\n   // m must be a power of two.\n   STATIC_ASSERT(m != 0 && ((m & (m - 1)) == 0));\n-  return AddressFrom<T>(OffsetFrom(x) & -m);\n+  return x & -m;\n }\n \n // Return the smallest multiple of m which is >= x.\n template <typename T>\n inline T RoundUp(T x, intptr_t m) {\n+  STATIC_ASSERT(std::is_integral<T>::value);\n   return RoundDown<T>(static_cast<T>(x + m - 1), m);\n }\n template <intptr_t m, typename T>\n constexpr inline T RoundUp(T x) {\n-  return RoundDown<m, T>(static_cast<T>(x + m - 1));\n+  STATIC_ASSERT(std::is_integral<T>::value);\n+  return RoundDown<m, T>(static_cast<T>(x + (m - 1)));\n+}\n+\n+template <typename T, typename U>\n+inline bool IsAligned(T value, U alignment) {\n+  return (value & (alignment - 1)) == 0;\n }\n \n inline void* AlignedAddress(void* address, size_t alignment) {"
        },
        {
            "sha": "7dfef2d31f6c998feb6b2c4f940b7c6f9007ade4",
            "filename": "deps/v8/src/base/optional.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Foptional.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Foptional.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Foptional.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -123,7 +123,7 @@ class Optional {\n  public:\n   using value_type = T;\n \n-  constexpr Optional() {}\n+  constexpr Optional() = default;\n \n   constexpr Optional(base::nullopt_t) {}  // NOLINT(runtime/explicit)\n "
        },
        {
            "sha": "c25104739d03076e7f08cb33550cb141ec4b7bc9",
            "filename": "deps/v8/src/base/page-allocator.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fpage-allocator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fpage-allocator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fpage-allocator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -24,11 +24,9 @@ STATIC_ASSERT_ENUM(PageAllocator::kReadExecute,\n \n #undef STATIC_ASSERT_ENUM\n \n-size_t PageAllocator::AllocatePageSize() {\n-  return base::OS::AllocatePageSize();\n-}\n-\n-size_t PageAllocator::CommitPageSize() { return base::OS::CommitPageSize(); }\n+PageAllocator::PageAllocator()\n+    : allocate_page_size_(base::OS::AllocatePageSize()),\n+      commit_page_size_(base::OS::CommitPageSize()) {}\n \n void PageAllocator::SetRandomMmapSeed(int64_t seed) {\n   base::OS::SetRandomMmapSeed(seed);"
        },
        {
            "sha": "68e17db49456bedf2dcbd7998763d5ee5c217c9b",
            "filename": "deps/v8/src/base/page-allocator.h",
            "status": "modified",
            "additions": 8,
            "deletions": 3,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fpage-allocator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fpage-allocator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fpage-allocator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -15,11 +15,12 @@ namespace base {\n class V8_BASE_EXPORT PageAllocator\n     : public NON_EXPORTED_BASE(::v8::PageAllocator) {\n  public:\n-  virtual ~PageAllocator() = default;\n+  PageAllocator();\n+  ~PageAllocator() override = default;\n \n-  size_t AllocatePageSize() override;\n+  size_t AllocatePageSize() override { return allocate_page_size_; }\n \n-  size_t CommitPageSize() override;\n+  size_t CommitPageSize() override { return commit_page_size_; }\n \n   void SetRandomMmapSeed(int64_t seed) override;\n \n@@ -34,6 +35,10 @@ class V8_BASE_EXPORT PageAllocator\n \n   bool SetPermissions(void* address, size_t size,\n                       PageAllocator::Permission access) override;\n+\n+ private:\n+  const size_t allocate_page_size_;\n+  const size_t commit_page_size_;\n };\n \n }  // namespace base"
        },
        {
            "sha": "cbaed6105d65b8beac9e6601259cf3436d48b61c",
            "filename": "deps/v8/src/base/platform/OWNERS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2FOWNERS?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -3,4 +3,6 @@ set noparent\n hpayer@chromium.org\n mlippautz@chromium.org\n \n+per-file platform-fuchsia.cc=wez@chromium.org\n+\n # COMPONENT: Blink>JavaScript"
        },
        {
            "sha": "713ee404bd741ae416ee777ed1439a2f5474e35b",
            "filename": "deps/v8/src/base/platform/platform-fuchsia.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-fuchsia.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -57,8 +57,8 @@ void* OS::Allocate(void* address, size_t size, size_t alignment,\n                          strlen(kVirtualMemoryName));\n   uintptr_t reservation;\n   uint32_t prot = GetProtectionFromMemoryPermission(access);\n-  zx_status_t status = zx_vmar_map_old(zx_vmar_root_self(), 0, vmo, 0,\n-                                       request_size, prot, &reservation);\n+  zx_status_t status = zx_vmar_map(zx_vmar_root_self(), prot, 0, vmo, 0,\n+                                   request_size, &reservation);\n   // Either the vmo is now referenced by the vmar, or we failed and are bailing,\n   // so close the vmo either way.\n   zx_handle_close(vmo);\n@@ -67,7 +67,8 @@ void* OS::Allocate(void* address, size_t size, size_t alignment,\n   }\n \n   uint8_t* base = reinterpret_cast<uint8_t*>(reservation);\n-  uint8_t* aligned_base = RoundUp(base, alignment);\n+  uint8_t* aligned_base = reinterpret_cast<uint8_t*>(\n+      RoundUp(reinterpret_cast<uintptr_t>(base), alignment));\n \n   // Unmap extra memory reserved before and after the desired block.\n   if (aligned_base != base) {\n@@ -114,9 +115,8 @@ bool OS::SetPermissions(void* address, size_t size, MemoryPermission access) {\n   DCHECK_EQ(0, reinterpret_cast<uintptr_t>(address) % CommitPageSize());\n   DCHECK_EQ(0, size % CommitPageSize());\n   uint32_t prot = GetProtectionFromMemoryPermission(access);\n-  return zx_vmar_protect_old(zx_vmar_root_self(),\n-                             reinterpret_cast<uintptr_t>(address), size,\n-                             prot) == ZX_OK;\n+  return zx_vmar_protect(zx_vmar_root_self(), prot,\n+                         reinterpret_cast<uintptr_t>(address), size) == ZX_OK;\n }\n \n // static"
        },
        {
            "sha": "10815f29c577ba37cac991e7a9b49a299d792b50",
            "filename": "deps/v8/src/base/platform/platform-linux.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-linux.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-linux.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-linux.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -27,14 +27,6 @@\n #include <sys/types.h>  // mmap & munmap\n #include <unistd.h>     // sysconf\n \n-// GLibc on ARM defines mcontext_t has a typedef for 'struct sigcontext'.\n-// Old versions of the C library <signal.h> didn't define the type.\n-#if defined(__ANDROID__) && !defined(__BIONIC_HAVE_UCONTEXT_T) && \\\n-    (defined(__arm__) || defined(__aarch64__)) &&                 \\\n-    !defined(__BIONIC_HAVE_STRUCT_SIGCONTEXT)\n-#include <asm/sigcontext.h>  // NOLINT\n-#endif\n-\n #include <cmath>\n \n #undef MAP_TYPE"
        },
        {
            "sha": "7814296b83bc3337194dccb913fd37f17222e1b2",
            "filename": "deps/v8/src/base/platform/platform-posix-time.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -15,7 +15,7 @@ class PosixDefaultTimezoneCache : public PosixTimezoneCache {\n   const char* LocalTimezone(double time_ms) override;\n   double LocalTimeOffset(double time_ms, bool is_utc) override;\n \n-  ~PosixDefaultTimezoneCache() override {}\n+  ~PosixDefaultTimezoneCache() override = default;\n };\n \n }  // namespace base"
        },
        {
            "sha": "c93974bcfc8e901d2a6f830c8e138a7dbbe6594b",
            "filename": "deps/v8/src/base/platform/platform-posix.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -86,7 +86,7 @@ namespace base {\n namespace {\n \n // 0 is never a valid thread id.\n-const pthread_t kNoThread = (pthread_t) 0;\n+const pthread_t kNoThread = static_cast<pthread_t>(0);\n \n bool g_hard_abort = false;\n \n@@ -254,10 +254,6 @@ void* OS::GetRandomMmapAddr() {\n   // Little-endian Linux: 46 bits of virtual addressing.\n   raw_addr &= uint64_t{0x3FFFFFFF0000};\n #endif\n-#elif V8_TARGET_ARCH_MIPS64\n-  // We allocate code in 256 MB aligned segments because of optimizations using\n-  // J instruction that require that all code is within a single 256 MB segment\n-  raw_addr &= uint64_t{0x3FFFE0000000};\n #elif V8_TARGET_ARCH_S390X\n   // Linux on Z uses bits 22-32 for Region Indexing, which translates to 42 bits\n   // of virtual addressing.  Truncate to 40 bits to allow kernel chance to\n@@ -267,6 +263,10 @@ void* OS::GetRandomMmapAddr() {\n   // 31 bits of virtual addressing.  Truncate to 29 bits to allow kernel chance\n   // to fulfill request.\n   raw_addr &= 0x1FFFF000;\n+#elif V8_TARGET_ARCH_MIPS64\n+  // 42 bits of virtual addressing. Truncate to 40 bits to allow kernel chance\n+  // to fulfill request.\n+  raw_addr &= uint64_t{0xFFFFFF0000};\n #else\n   raw_addr &= 0x3FFFF000;\n \n@@ -313,7 +313,8 @@ void* OS::Allocate(void* address, size_t size, size_t alignment,\n \n   // Unmap memory allocated before the aligned base address.\n   uint8_t* base = static_cast<uint8_t*>(result);\n-  uint8_t* aligned_base = RoundUp(base, alignment);\n+  uint8_t* aligned_base = reinterpret_cast<uint8_t*>(\n+      RoundUp(reinterpret_cast<uintptr_t>(base), alignment));\n   if (aligned_base != base) {\n     DCHECK_LT(base, aligned_base);\n     size_t prefix_size = static_cast<size_t>(aligned_base - base);"
        },
        {
            "sha": "8cf5e54604f897d06c7dea2f9228a8c24bb5fc38",
            "filename": "deps/v8/src/base/platform/platform-posix.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -15,7 +15,7 @@ class PosixTimezoneCache : public TimezoneCache {\n  public:\n   double DaylightSavingsOffset(double time_ms) override;\n   void Clear() override {}\n-  ~PosixTimezoneCache() override {}\n+  ~PosixTimezoneCache() override = default;\n \n  protected:\n   static const int msPerSecond = 1000;"
        },
        {
            "sha": "11a008e6c697874ac4ff160eebe798f60a388201",
            "filename": "deps/v8/src/base/platform/platform-win32.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -822,7 +822,8 @@ void* OS::Allocate(void* address, size_t size, size_t alignment,\n   if (base == nullptr) return nullptr;  // Can't allocate, we're OOM.\n \n   // If address is suitably aligned, we're done.\n-  uint8_t* aligned_base = RoundUp(base, alignment);\n+  uint8_t* aligned_base = reinterpret_cast<uint8_t*>(\n+      RoundUp(reinterpret_cast<uintptr_t>(base), alignment));\n   if (base == aligned_base) return reinterpret_cast<void*>(base);\n \n   // Otherwise, free it and try a larger allocation.\n@@ -843,7 +844,8 @@ void* OS::Allocate(void* address, size_t size, size_t alignment,\n     // Try to trim the allocation by freeing the padded allocation and then\n     // calling VirtualAlloc at the aligned base.\n     CHECK(Free(base, padded_size));\n-    aligned_base = RoundUp(base, alignment);\n+    aligned_base = reinterpret_cast<uint8_t*>(\n+        RoundUp(reinterpret_cast<uintptr_t>(base), alignment));\n     base = reinterpret_cast<uint8_t*>(\n         VirtualAlloc(aligned_base, size, flags, protect));\n     // We might not get the reduced allocation due to a race. In that case,"
        },
        {
            "sha": "f9d01edf00aa2d995123dc7c595ad3b7224475f4",
            "filename": "deps/v8/src/base/platform/platform.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -188,7 +188,7 @@ class V8_BASE_EXPORT OS {\n \n   class V8_BASE_EXPORT MemoryMappedFile {\n    public:\n-    virtual ~MemoryMappedFile() {}\n+    virtual ~MemoryMappedFile() = default;\n     virtual void* memory() const = 0;\n     virtual size_t size() const = 0;\n "
        },
        {
            "sha": "a7e50f5880467bf5a2a0ccbb733661f9fa9c3c89",
            "filename": "deps/v8/src/base/platform/semaphore.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fsemaphore.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fsemaphore.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fsemaphore.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -91,7 +91,9 @@ void Semaphore::Signal() {\n   // This check may fail with <libc-2.21, which we use on the try bots, if the\n   // semaphore is destroyed while sem_post is still executed. A work around is\n   // to extend the lifetime of the semaphore.\n-  CHECK_EQ(0, result);\n+  if (result != 0) {\n+    FATAL(\"Error when signaling semaphore, errno: %d\", errno);\n+  }\n }\n \n "
        },
        {
            "sha": "9e991664870a0bc47d88d3ef052e9149be56f4c8",
            "filename": "deps/v8/src/base/platform/time.h",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Ftime.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Ftime.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Ftime.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -105,10 +105,7 @@ class V8_BASE_EXPORT TimeDelta final {\n   static TimeDelta FromTimespec(struct timespec ts);\n   struct timespec ToTimespec() const;\n \n-  TimeDelta& operator=(const TimeDelta& other) {\n-    delta_ = other.delta_;\n-    return *this;\n-  }\n+  TimeDelta& operator=(const TimeDelta& other) = default;\n \n   // Computations with other deltas.\n   TimeDelta operator+(const TimeDelta& other) const {"
        },
        {
            "sha": "46ceca1857352dc2bba00aaaf5bfdf4a46700bd0",
            "filename": "deps/v8/src/base/region-allocator.cc",
            "status": "added",
            "additions": 291,
            "deletions": 0,
            "changes": 291,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fregion-allocator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fregion-allocator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fregion-allocator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,291 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#include \"src/base/region-allocator.h\"\n+#include \"src/base/bits.h\"\n+#include \"src/base/macros.h\"\n+\n+namespace v8 {\n+namespace base {\n+\n+// If |free_size| < |region_size| * |kMaxLoadFactorForRandomization| stop trying\n+// to randomize region allocation.\n+constexpr double kMaxLoadFactorForRandomization = 0.40;\n+\n+// Max number of attempts to allocate page at random address.\n+constexpr int kMaxRandomizationAttempts = 3;\n+\n+RegionAllocator::RegionAllocator(Address memory_region_begin,\n+                                 size_t memory_region_size, size_t page_size)\n+    : whole_region_(memory_region_begin, memory_region_size, false),\n+      region_size_in_pages_(size() / page_size),\n+      max_load_for_randomization_(\n+          static_cast<size_t>(size() * kMaxLoadFactorForRandomization)),\n+      free_size_(0),\n+      page_size_(page_size) {\n+  CHECK_LT(begin(), end());\n+  CHECK(base::bits::IsPowerOfTwo(page_size_));\n+  CHECK(IsAligned(size(), page_size_));\n+  CHECK(IsAligned(begin(), page_size_));\n+\n+  // Initial region.\n+  Region* region = new Region(whole_region_);\n+\n+  all_regions_.insert(region);\n+\n+  FreeListAddRegion(region);\n+}\n+\n+RegionAllocator::~RegionAllocator() {\n+  for (Region* region : all_regions_) {\n+    delete region;\n+  }\n+}\n+\n+RegionAllocator::AllRegionsSet::iterator RegionAllocator::FindRegion(\n+    Address address) {\n+  if (!whole_region_.contains(address)) return all_regions_.end();\n+\n+  Region key(address, 0, false);\n+  AllRegionsSet::iterator iter = all_regions_.upper_bound(&key);\n+  // Regions in |all_regions_| are compared by end() values and key's end()\n+  // points exactly to the address we are querying, so the upper_bound will\n+  // find the region whose |end()| is greater than the requested address.\n+  DCHECK_NE(iter, all_regions_.end());\n+  DCHECK((*iter)->contains(address));\n+  return iter;\n+}\n+\n+void RegionAllocator::FreeListAddRegion(Region* region) {\n+  free_size_ += region->size();\n+  free_regions_.insert(region);\n+}\n+\n+RegionAllocator::Region* RegionAllocator::FreeListFindRegion(size_t size) {\n+  Region key(0, size, false);\n+  auto iter = free_regions_.lower_bound(&key);\n+  return iter == free_regions_.end() ? nullptr : *iter;\n+}\n+\n+void RegionAllocator::FreeListRemoveRegion(Region* region) {\n+  DCHECK(!region->is_used());\n+  auto iter = free_regions_.find(region);\n+  DCHECK_NE(iter, free_regions_.end());\n+  DCHECK_EQ(region, *iter);\n+  DCHECK_LE(region->size(), free_size_);\n+  free_size_ -= region->size();\n+  free_regions_.erase(iter);\n+}\n+\n+RegionAllocator::Region* RegionAllocator::Split(Region* region,\n+                                                size_t new_size) {\n+  DCHECK(IsAligned(new_size, page_size_));\n+  DCHECK_NE(new_size, 0);\n+  DCHECK_GT(region->size(), new_size);\n+\n+  // Create new region and put it to the lists after the |region|.\n+  bool used = region->is_used();\n+  Region* new_region =\n+      new Region(region->begin() + new_size, region->size() - new_size, used);\n+  if (!used) {\n+    // Remove region from the free list before updating it's size.\n+    FreeListRemoveRegion(region);\n+  }\n+  region->set_size(new_size);\n+\n+  all_regions_.insert(new_region);\n+\n+  if (!used) {\n+    FreeListAddRegion(region);\n+    FreeListAddRegion(new_region);\n+  }\n+  return new_region;\n+}\n+\n+void RegionAllocator::Merge(AllRegionsSet::iterator prev_iter,\n+                            AllRegionsSet::iterator next_iter) {\n+  Region* prev = *prev_iter;\n+  Region* next = *next_iter;\n+  DCHECK_EQ(prev->end(), next->begin());\n+  prev->set_size(prev->size() + next->size());\n+\n+  all_regions_.erase(next_iter);  // prev_iter stays valid.\n+\n+  // The |next| region must already not be in the free list.\n+  DCHECK_EQ(free_regions_.find(next), free_regions_.end());\n+  delete next;\n+}\n+\n+RegionAllocator::Address RegionAllocator::AllocateRegion(size_t size) {\n+  DCHECK_NE(size, 0);\n+  DCHECK(IsAligned(size, page_size_));\n+\n+  Region* region = FreeListFindRegion(size);\n+  if (region == nullptr) return kAllocationFailure;\n+\n+  if (region->size() != size) {\n+    Split(region, size);\n+  }\n+  DCHECK(IsAligned(region->begin(), page_size_));\n+  DCHECK_EQ(region->size(), size);\n+\n+  // Mark region as used.\n+  FreeListRemoveRegion(region);\n+  region->set_is_used(true);\n+  return region->begin();\n+}\n+\n+RegionAllocator::Address RegionAllocator::AllocateRegion(\n+    RandomNumberGenerator* rng, size_t size) {\n+  if (free_size() >= max_load_for_randomization_) {\n+    // There is enough free space for trying to randomize the address.\n+    size_t random = 0;\n+\n+    for (int i = 0; i < kMaxRandomizationAttempts; i++) {\n+      rng->NextBytes(&random, sizeof(random));\n+      size_t random_offset = page_size_ * (random % region_size_in_pages_);\n+      Address address = begin() + random_offset;\n+      if (AllocateRegionAt(address, size)) {\n+        return address;\n+      }\n+    }\n+    // Fall back to free list allocation.\n+  }\n+  return AllocateRegion(size);\n+}\n+\n+bool RegionAllocator::AllocateRegionAt(Address requested_address, size_t size) {\n+  DCHECK(IsAligned(requested_address, page_size_));\n+  DCHECK_NE(size, 0);\n+  DCHECK(IsAligned(size, page_size_));\n+\n+  Address requested_end = requested_address + size;\n+  DCHECK_LE(requested_end, end());\n+\n+  Region* region;\n+  {\n+    AllRegionsSet::iterator region_iter = FindRegion(requested_address);\n+    if (region_iter == all_regions_.end()) {\n+      return false;\n+    }\n+    region = *region_iter;\n+  }\n+  if (region->is_used() || region->end() < requested_end) {\n+    return false;\n+  }\n+  // Found free region that includes the requested one.\n+  if (region->begin() != requested_address) {\n+    // Split the region at the |requested_address| boundary.\n+    size_t new_size = requested_address - region->begin();\n+    DCHECK(IsAligned(new_size, page_size_));\n+    region = Split(region, new_size);\n+  }\n+  if (region->end() != requested_end) {\n+    // Split the region at the |requested_end| boundary.\n+    Split(region, size);\n+  }\n+  DCHECK_EQ(region->begin(), requested_address);\n+  DCHECK_EQ(region->size(), size);\n+\n+  // Mark region as used.\n+  FreeListRemoveRegion(region);\n+  region->set_is_used(true);\n+  return true;\n+}\n+\n+size_t RegionAllocator::TrimRegion(Address address, size_t new_size) {\n+  DCHECK(IsAligned(new_size, page_size_));\n+\n+  AllRegionsSet::iterator region_iter = FindRegion(address);\n+  if (region_iter == all_regions_.end()) {\n+    return 0;\n+  }\n+  Region* region = *region_iter;\n+  if (region->begin() != address || !region->is_used()) {\n+    return 0;\n+  }\n+\n+  // The region must not be in the free list.\n+  DCHECK_EQ(free_regions_.find(*region_iter), free_regions_.end());\n+\n+  if (new_size > 0) {\n+    region = Split(region, new_size);\n+    ++region_iter;\n+  }\n+  size_t size = region->size();\n+  region->set_is_used(false);\n+\n+  // Merge current region with the surrounding ones if they are free.\n+  if (region->end() != whole_region_.end()) {\n+    // There must be a range after the current one.\n+    AllRegionsSet::iterator next_iter = std::next(region_iter);\n+    DCHECK_NE(next_iter, all_regions_.end());\n+    if (!(*next_iter)->is_used()) {\n+      // |next| region object will be deleted during merge, remove it from\n+      // the free list.\n+      FreeListRemoveRegion(*next_iter);\n+      Merge(region_iter, next_iter);\n+    }\n+  }\n+  if (new_size == 0 && region->begin() != whole_region_.begin()) {\n+    // There must be a range before the current one.\n+    AllRegionsSet::iterator prev_iter = std::prev(region_iter);\n+    DCHECK_NE(prev_iter, all_regions_.end());\n+    if (!(*prev_iter)->is_used()) {\n+      // |prev| region's size will change, we'll have to re-insert it into\n+      // the proper place of the free list.\n+      FreeListRemoveRegion(*prev_iter);\n+      Merge(prev_iter, region_iter);\n+      // |prev| region becomes the current region.\n+      region_iter = prev_iter;\n+      region = *region_iter;\n+    }\n+  }\n+  FreeListAddRegion(region);\n+  return size;\n+}\n+\n+size_t RegionAllocator::CheckRegion(Address address) {\n+  AllRegionsSet::iterator region_iter = FindRegion(address);\n+  if (region_iter == all_regions_.end()) {\n+    return 0;\n+  }\n+  Region* region = *region_iter;\n+  if (region->begin() != address || !region->is_used()) {\n+    return 0;\n+  }\n+  return region->size();\n+}\n+\n+void RegionAllocator::Region::Print(std::ostream& os) const {\n+  std::ios::fmtflags flags = os.flags(std::ios::hex | std::ios::showbase);\n+  os << \"[\" << begin() << \", \" << end() << \"), size: \" << size();\n+  os << \", \" << (is_used() ? \"used\" : \"free\");\n+  os.flags(flags);\n+}\n+\n+void RegionAllocator::Print(std::ostream& os) const {\n+  std::ios::fmtflags flags = os.flags(std::ios::hex | std::ios::showbase);\n+  os << \"RegionAllocator: [\" << begin() << \", \" << end() << \")\";\n+  os << \"\\nsize: \" << size();\n+  os << \"\\nfree_size: \" << free_size();\n+  os << \"\\npage_size: \" << page_size_;\n+\n+  os << \"\\nall regions: \";\n+  for (const Region* region : all_regions_) {\n+    os << \"\\n  \";\n+    region->Print(os);\n+  }\n+\n+  os << \"\\nfree regions: \";\n+  for (const Region* region : free_regions_) {\n+    os << \"\\n  \";\n+    region->Print(os);\n+  }\n+  os << \"\\n\";\n+  os.flags(flags);\n+}\n+\n+}  // namespace base\n+}  // namespace v8"
        },
        {
            "sha": "fb51472fa929914e2b2fdf394d8fc3371f7e0107",
            "filename": "deps/v8/src/base/region-allocator.h",
            "status": "added",
            "additions": 164,
            "deletions": 0,
            "changes": 164,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fregion-allocator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fregion-allocator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fregion-allocator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,164 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_BASE_REGION_ALLOCATOR_H_\n+#define V8_BASE_REGION_ALLOCATOR_H_\n+\n+#include <set>\n+\n+#include \"src/base/address-region.h\"\n+#include \"src/base/utils/random-number-generator.h\"\n+#include \"testing/gtest/include/gtest/gtest_prod.h\"  // nogncheck\n+\n+namespace v8 {\n+namespace base {\n+\n+// Helper class for managing used/free regions within [address, address+size)\n+// region. Minimum allocation unit is |page_size|. Requested allocation size\n+// is rounded up to |page_size|.\n+// The region allocation algorithm implements best-fit with coalescing strategy:\n+// it tries to find a smallest suitable free region upon allocation and tries\n+// to merge region with its neighbors upon freeing.\n+//\n+// This class does not perform any actual region reservation.\n+// Not thread-safe.\n+class V8_BASE_EXPORT RegionAllocator final {\n+ public:\n+  typedef uintptr_t Address;\n+\n+  static constexpr Address kAllocationFailure = static_cast<Address>(-1);\n+\n+  RegionAllocator(Address address, size_t size, size_t page_size);\n+  ~RegionAllocator();\n+\n+  // Allocates region of |size| (must be |page_size|-aligned). Returns\n+  // the address of the region on success or kAllocationFailure.\n+  Address AllocateRegion(size_t size);\n+  // Same as above but tries to randomize the region displacement.\n+  Address AllocateRegion(RandomNumberGenerator* rng, size_t size);\n+\n+  // Allocates region of |size| at |requested_address| if it's free. Both the\n+  // address and the size must be |page_size|-aligned. On success returns\n+  // true.\n+  // This kind of allocation is supposed to be used during setup phase to mark\n+  // certain regions as used or for randomizing regions displacement.\n+  bool AllocateRegionAt(Address requested_address, size_t size);\n+\n+  // Frees region at given |address|, returns the size of the region.\n+  // There must be a used region starting at given address otherwise nothing\n+  // will be freed and 0 will be returned.\n+  size_t FreeRegion(Address address) { return TrimRegion(address, 0); }\n+\n+  // Decreases size of the previously allocated region at |address|, returns\n+  // freed size. |new_size| must be |page_size|-aligned and\n+  // less than or equal to current region's size. Setting new size to zero\n+  // frees the region.\n+  size_t TrimRegion(Address address, size_t new_size);\n+\n+  // If there is a used region starting at given address returns its size\n+  // otherwise 0.\n+  size_t CheckRegion(Address address);\n+\n+  Address begin() const { return whole_region_.begin(); }\n+  Address end() const { return whole_region_.end(); }\n+  size_t size() const { return whole_region_.size(); }\n+\n+  bool contains(Address address) const {\n+    return whole_region_.contains(address);\n+  }\n+\n+  bool contains(Address address, size_t size) const {\n+    return whole_region_.contains(address, size);\n+  }\n+\n+  // Total size of not yet aquired regions.\n+  size_t free_size() const { return free_size_; }\n+\n+  // The alignment of the allocated region's addresses and granularity of\n+  // the allocated region's sizes.\n+  size_t page_size() const { return page_size_; }\n+\n+  void Print(std::ostream& os) const;\n+\n+ private:\n+  class Region : public AddressRegion {\n+   public:\n+    Region(Address address, size_t size, bool is_used)\n+        : AddressRegion(address, size), is_used_(is_used) {}\n+\n+    bool is_used() const { return is_used_; }\n+    void set_is_used(bool used) { is_used_ = used; }\n+\n+    void Print(std::ostream& os) const;\n+\n+   private:\n+    bool is_used_;\n+  };\n+\n+  // The whole region.\n+  const Region whole_region_;\n+\n+  // Number of |page_size_| in the whole region.\n+  const size_t region_size_in_pages_;\n+\n+  // If the free size is less than this value - stop trying to randomize the\n+  // allocation addresses.\n+  const size_t max_load_for_randomization_;\n+\n+  // Size of all free regions.\n+  size_t free_size_;\n+\n+  // Minimum region size. Must be a pow of 2.\n+  const size_t page_size_;\n+\n+  struct AddressEndOrder {\n+    bool operator()(const Region* a, const Region* b) const {\n+      return a->end() < b->end();\n+    }\n+  };\n+  // All regions ordered by addresses.\n+  typedef std::set<Region*, AddressEndOrder> AllRegionsSet;\n+  AllRegionsSet all_regions_;\n+\n+  struct SizeAddressOrder {\n+    bool operator()(const Region* a, const Region* b) const {\n+      if (a->size() != b->size()) return a->size() < b->size();\n+      return a->begin() < b->begin();\n+    }\n+  };\n+  // Free regions ordered by sizes and addresses.\n+  std::set<Region*, SizeAddressOrder> free_regions_;\n+\n+  // Returns region containing given address or nullptr.\n+  AllRegionsSet::iterator FindRegion(Address address);\n+\n+  // Adds given region to the set of free regions.\n+  void FreeListAddRegion(Region* region);\n+\n+  // Finds best-fit free region for given size.\n+  Region* FreeListFindRegion(size_t size);\n+\n+  // Removes given region from the set of free regions.\n+  void FreeListRemoveRegion(Region* region);\n+\n+  // Splits given |region| into two: one of |new_size| size and a new one\n+  // having the rest. The new region is returned.\n+  Region* Split(Region* region, size_t new_size);\n+\n+  // For two coalescing regions merges |next| to |prev| and deletes |next|.\n+  void Merge(AllRegionsSet::iterator prev_iter,\n+             AllRegionsSet::iterator next_iter);\n+\n+  FRIEND_TEST(RegionAllocatorTest, AllocateRegionRandom);\n+  FRIEND_TEST(RegionAllocatorTest, Fragmentation);\n+  FRIEND_TEST(RegionAllocatorTest, FindRegion);\n+  FRIEND_TEST(RegionAllocatorTest, Contains);\n+\n+  DISALLOW_COPY_AND_ASSIGN(RegionAllocator);\n+};\n+\n+}  // namespace base\n+}  // namespace v8\n+\n+#endif  // V8_BASE_REGION_ALLOCATOR_H_"
        },
        {
            "sha": "700bc3387f19ef4bddc2f6208e5cd39b3cc406bf",
            "filename": "deps/v8/src/base/safe_math.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fsafe_math.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fsafe_math.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fsafe_math.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -49,7 +49,7 @@ class CheckedNumeric {\n  public:\n   typedef T type;\n \n-  CheckedNumeric() {}\n+  CheckedNumeric() = default;\n \n   // Copy constructor.\n   template <typename Src>"
        },
        {
            "sha": "d54bcb8f706b5bd8742f5544233abbabe9652653",
            "filename": "deps/v8/src/base/threaded-list.h",
            "status": "added",
            "additions": 267,
            "deletions": 0,
            "changes": 267,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fthreaded-list.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Fthreaded-list.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fthreaded-list.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,267 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+#ifndef V8_BASE_THREADED_LIST_H_\n+#define V8_BASE_THREADED_LIST_H_\n+\n+#include <iterator>\n+\n+#include \"src/base/compiler-specific.h\"\n+#include \"src/base/macros.h\"\n+\n+namespace v8 {\n+namespace base {\n+\n+template <typename T>\n+struct ThreadedListTraits {\n+  static T** next(T* t) { return t->next(); }\n+};\n+\n+// Represents a linked list that threads through the nodes in the linked list.\n+// Entries in the list are pointers to nodes. By default nodes need to have a\n+// T** next() method that returns the location where the next value is stored.\n+// The default can be overwritten by providing a ThreadedTraits class.\n+template <typename T, typename BaseClass,\n+          typename TLTraits = ThreadedListTraits<T>>\n+class ThreadedListBase final : public BaseClass {\n+ public:\n+  ThreadedListBase() : head_(nullptr), tail_(&head_) {}\n+  void Add(T* v) {\n+    DCHECK_NULL(*tail_);\n+    DCHECK_NULL(*TLTraits::next(v));\n+    *tail_ = v;\n+    tail_ = TLTraits::next(v);\n+  }\n+\n+  void AddFront(T* v) {\n+    DCHECK_NULL(*TLTraits::next(v));\n+    DCHECK_NOT_NULL(v);\n+    T** const next = TLTraits::next(v);\n+\n+    *next = head_;\n+    if (head_ == nullptr) tail_ = next;\n+    head_ = v;\n+  }\n+\n+  // Reinitializing the head to a new node, this costs O(n).\n+  void ReinitializeHead(T* v) {\n+    head_ = v;\n+    T* current = v;\n+    if (current != nullptr) {  // Find tail\n+      T* tmp;\n+      while ((tmp = *TLTraits::next(current))) {\n+        current = tmp;\n+      }\n+      tail_ = TLTraits::next(current);\n+    } else {\n+      tail_ = &head_;\n+    }\n+  }\n+\n+  void DropHead() {\n+    DCHECK_NOT_NULL(head_);\n+\n+    T* old_head = head_;\n+    head_ = *TLTraits::next(head_);\n+    if (head_ == nullptr) tail_ = &head_;\n+    *TLTraits::next(old_head) = nullptr;\n+  }\n+\n+  void Append(ThreadedListBase&& list) {\n+    *tail_ = list.head_;\n+    tail_ = list.tail_;\n+    list.Clear();\n+  }\n+\n+  void Prepend(ThreadedListBase&& list) {\n+    if (list.head_ == nullptr) return;\n+\n+    T* new_head = list.head_;\n+    *list.tail_ = head_;\n+    if (head_ == nullptr) {\n+      tail_ = list.tail_;\n+    }\n+    head_ = new_head;\n+    list.Clear();\n+  }\n+\n+  void Clear() {\n+    head_ = nullptr;\n+    tail_ = &head_;\n+  }\n+\n+  ThreadedListBase& operator=(ThreadedListBase&& other) V8_NOEXCEPT {\n+    head_ = other.head_;\n+    tail_ = other.head_ ? other.tail_ : &head_;\n+#ifdef DEBUG\n+    other.Clear();\n+#endif\n+    return *this;\n+  }\n+\n+  ThreadedListBase(ThreadedListBase&& other) V8_NOEXCEPT\n+      : head_(other.head_),\n+        tail_(other.head_ ? other.tail_ : &head_) {\n+#ifdef DEBUG\n+    other.Clear();\n+#endif\n+  }\n+\n+  bool Remove(T* v) {\n+    T* current = first();\n+    if (current == v) {\n+      DropHead();\n+      return true;\n+    }\n+\n+    while (current != nullptr) {\n+      T* next = *TLTraits::next(current);\n+      if (next == v) {\n+        *TLTraits::next(current) = *TLTraits::next(next);\n+        *TLTraits::next(next) = nullptr;\n+\n+        if (TLTraits::next(next) == tail_) {\n+          tail_ = TLTraits::next(current);\n+        }\n+        return true;\n+      }\n+      current = next;\n+    }\n+    return false;\n+  }\n+\n+  class Iterator final {\n+   public:\n+    using iterator_category = std::forward_iterator_tag;\n+    using difference_type = std::ptrdiff_t;\n+    using value_type = T*;\n+    using reference = value_type;\n+    using pointer = value_type*;\n+\n+   public:\n+    Iterator& operator++() {\n+      entry_ = TLTraits::next(*entry_);\n+      return *this;\n+    }\n+    bool operator==(const Iterator& other) const {\n+      return entry_ == other.entry_;\n+    }\n+    bool operator!=(const Iterator& other) const {\n+      return entry_ != other.entry_;\n+    }\n+    T* operator*() { return *entry_; }\n+    T* operator->() { return *entry_; }\n+    Iterator& operator=(T* entry) {\n+      T* next = *TLTraits::next(*entry_);\n+      *TLTraits::next(entry) = next;\n+      *entry_ = entry;\n+      return *this;\n+    }\n+\n+   private:\n+    explicit Iterator(T** entry) : entry_(entry) {}\n+\n+    T** entry_;\n+\n+    friend class ThreadedListBase;\n+  };\n+\n+  class ConstIterator final {\n+   public:\n+    using iterator_category = std::forward_iterator_tag;\n+    using difference_type = std::ptrdiff_t;\n+    using value_type = T*;\n+    using reference = const value_type;\n+    using pointer = const value_type*;\n+\n+   public:\n+    ConstIterator& operator++() {\n+      entry_ = TLTraits::next(*entry_);\n+      return *this;\n+    }\n+    bool operator==(const ConstIterator& other) const {\n+      return entry_ == other.entry_;\n+    }\n+    bool operator!=(const ConstIterator& other) const {\n+      return entry_ != other.entry_;\n+    }\n+    const T* operator*() const { return *entry_; }\n+\n+   private:\n+    explicit ConstIterator(T* const* entry) : entry_(entry) {}\n+\n+    T* const* entry_;\n+\n+    friend class ThreadedListBase;\n+  };\n+\n+  Iterator begin() { return Iterator(&head_); }\n+  Iterator end() { return Iterator(tail_); }\n+\n+  ConstIterator begin() const { return ConstIterator(&head_); }\n+  ConstIterator end() const { return ConstIterator(tail_); }\n+\n+  // Rewinds the list's tail to the reset point, i.e., cutting of the rest of\n+  // the list, including the reset_point.\n+  void Rewind(Iterator reset_point) {\n+    tail_ = reset_point.entry_;\n+    *tail_ = nullptr;\n+  }\n+\n+  // Moves the tail of the from_list, starting at the from_location, to the end\n+  // of this list.\n+  void MoveTail(ThreadedListBase* from_list, Iterator from_location) {\n+    if (from_list->end() != from_location) {\n+      DCHECK_NULL(*tail_);\n+      *tail_ = *from_location;\n+      tail_ = from_list->tail_;\n+      from_list->Rewind(from_location);\n+    }\n+  }\n+\n+  bool is_empty() const { return head_ == nullptr; }\n+\n+  T* first() const { return head_; }\n+\n+  // Slow. For testing purposes.\n+  int LengthForTest() {\n+    int result = 0;\n+    for (Iterator t = begin(); t != end(); ++t) ++result;\n+    return result;\n+  }\n+\n+  T* AtForTest(int i) {\n+    Iterator t = begin();\n+    while (i-- > 0) ++t;\n+    return *t;\n+  }\n+\n+  bool Verify() {\n+    T* last = this->first();\n+    if (last == nullptr) {\n+      CHECK_EQ(&head_, tail_);\n+    } else {\n+      while (*TLTraits::next(last) != nullptr) {\n+        last = *TLTraits::next(last);\n+      }\n+      CHECK_EQ(TLTraits::next(last), tail_);\n+    }\n+    return true;\n+  }\n+\n+ private:\n+  T* head_;\n+  T** tail_;\n+  DISALLOW_COPY_AND_ASSIGN(ThreadedListBase);\n+};\n+\n+struct EmptyBase {};\n+\n+template <typename T, typename TLTraits = ThreadedListTraits<T>>\n+using ThreadedList = ThreadedListBase<T, EmptyBase, TLTraits>;\n+\n+}  // namespace base\n+}  // namespace v8\n+\n+#endif  // V8_BASE_THREADED_LIST_H_"
        },
        {
            "sha": "3d97eee126936df7be0a9e5886f4bbafae9a579e",
            "filename": "deps/v8/src/base/timezone-cache.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Ftimezone-cache.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Ftimezone-cache.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Ftimezone-cache.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -27,7 +27,7 @@ class TimezoneCache {\n   virtual void Clear() = 0;\n \n   // Called when tearing down the isolate\n-  virtual ~TimezoneCache() {}\n+  virtual ~TimezoneCache() = default;\n };\n \n }  // namespace base"
        },
        {
            "sha": "a3313f4e8872c945693389f0264a986f5496ac54",
            "filename": "deps/v8/src/base/utils/random-number-generator.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -99,7 +99,7 @@ int RandomNumberGenerator::NextInt(int max) {\n \n double RandomNumberGenerator::NextDouble() {\n   XorShift128(&state0_, &state1_);\n-  return ToDouble(state0_, state1_);\n+  return ToDouble(state0_);\n }\n \n "
        },
        {
            "sha": "45ec259305924419ebc8470a1897b65fcc1c98fe",
            "filename": "deps/v8/src/base/utils/random-number-generator.h",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -108,11 +108,10 @@ class V8_BASE_EXPORT RandomNumberGenerator final {\n   int64_t initial_seed() const { return initial_seed_; }\n \n   // Static and exposed for external use.\n-  static inline double ToDouble(uint64_t state0, uint64_t state1) {\n+  static inline double ToDouble(uint64_t state0) {\n     // Exponent for double values for [1.0 .. 2.0)\n     static const uint64_t kExponentBits = uint64_t{0x3FF0000000000000};\n-    static const uint64_t kMantissaMask = uint64_t{0x000FFFFFFFFFFFFF};\n-    uint64_t random = ((state0 + state1) & kMantissaMask) | kExponentBits;\n+    uint64_t random = (state0 >> 12) | kExponentBits;\n     return bit_cast<double>(random) - 1;\n   }\n \n@@ -128,15 +127,15 @@ class V8_BASE_EXPORT RandomNumberGenerator final {\n     *state1 = s1;\n   }\n \n+  static uint64_t MurmurHash3(uint64_t);\n+\n  private:\n   static const int64_t kMultiplier = V8_2PART_UINT64_C(0x5, deece66d);\n   static const int64_t kAddend = 0xb;\n   static const int64_t kMask = V8_2PART_UINT64_C(0xffff, ffffffff);\n \n   int Next(int bits) V8_WARN_UNUSED_RESULT;\n \n-  static uint64_t MurmurHash3(uint64_t);\n-\n   int64_t initial_seed_;\n   uint64_t state0_;\n   uint64_t state1_;"
        },
        {
            "sha": "d79dbcdfa8cbb81e8ea4cd2112b4979144fa6974",
            "filename": "deps/v8/src/basic-block-profiler.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -27,9 +27,6 @@ BasicBlockProfiler::Data::Data(size_t n_blocks)\n       block_rpo_numbers_(n_blocks_),\n       counts_(n_blocks_, 0) {}\n \n-BasicBlockProfiler::Data::~Data() {}\n-\n-\n static void InsertIntoString(std::ostringstream* os, std::string* string) {\n   string->insert(0, os->str());\n }\n@@ -68,10 +65,6 @@ void BasicBlockProfiler::Data::ResetCounts() {\n   }\n }\n \n-\n-BasicBlockProfiler::BasicBlockProfiler() {}\n-\n-\n BasicBlockProfiler::Data* BasicBlockProfiler::NewData(size_t n_blocks) {\n   base::LockGuard<base::Mutex> lock(&data_list_mutex_);\n   Data* data = new Data(n_blocks);"
        },
        {
            "sha": "835dda5356a2db0b0495f7cb5d601bb418ef218e",
            "filename": "deps/v8/src/basic-block-profiler.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbasic-block-profiler.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -36,7 +36,7 @@ class BasicBlockProfiler {\n                                     const BasicBlockProfiler::Data& s);\n \n     explicit Data(size_t n_blocks);\n-    ~Data();\n+    ~Data() = default;\n \n     void ResetCounts();\n \n@@ -51,7 +51,7 @@ class BasicBlockProfiler {\n \n   typedef std::list<Data*> DataList;\n \n-  BasicBlockProfiler();\n+  BasicBlockProfiler() = default;\n   ~BasicBlockProfiler();\n \n   V8_EXPORT_PRIVATE static BasicBlockProfiler* Get();"
        },
        {
            "sha": "5be3198cc642d6bd180876b4801d6df3f1b81536",
            "filename": "deps/v8/src/bit-vector.h",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbit-vector.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbit-vector.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbit-vector.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -21,7 +21,7 @@ class BitVector : public ZoneObject {\n   };\n \n   // Iterator for the elements of this BitVector.\n-  class Iterator BASE_EMBEDDED {\n+  class Iterator {\n    public:\n     explicit Iterator(BitVector* target)\n         : target_(target),\n@@ -31,7 +31,7 @@ class BitVector : public ZoneObject {\n           current_(-1) {\n       Advance();\n     }\n-    ~Iterator() {}\n+    ~Iterator() = default;\n \n     bool Done() const { return current_index_ >= target_->data_length_; }\n     void Advance();\n@@ -305,10 +305,9 @@ class BitVector : public ZoneObject {\n   DISALLOW_COPY_AND_ASSIGN(BitVector);\n };\n \n-\n-class GrowableBitVector BASE_EMBEDDED {\n+class GrowableBitVector {\n  public:\n-  class Iterator BASE_EMBEDDED {\n+  class Iterator {\n    public:\n     Iterator(const GrowableBitVector* target, Zone* zone)\n         : it_(target->bits_ == nullptr ? new (zone) BitVector(1, zone)"
        },
        {
            "sha": "d9104863aa285f290b1542d7b3ca3fa4f865ed42",
            "filename": "deps/v8/src/bootstrapper.cc",
            "status": "modified",
            "additions": 287,
            "deletions": 279,
            "changes": 566,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbootstrapper.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -19,22 +19,30 @@\n #include \"src/extensions/trigger-failure-extension.h\"\n #include \"src/heap/heap.h\"\n #include \"src/isolate-inl.h\"\n+#include \"src/math-random.h\"\n #include \"src/objects/api-callbacks.h\"\n #include \"src/objects/arguments.h\"\n+#include \"src/objects/builtin-function-id.h\"\n #include \"src/objects/hash-table-inl.h\"\n #ifdef V8_INTL_SUPPORT\n #include \"src/objects/intl-objects.h\"\n+#endif  // V8_INTL_SUPPORT\n+#include \"src/objects/js-array-buffer-inl.h\"\n+#include \"src/objects/js-array-inl.h\"\n+#ifdef V8_INTL_SUPPORT\n+#include \"src/objects/js-break-iterator.h\"\n #include \"src/objects/js-collator.h\"\n+#include \"src/objects/js-date-time-format.h\"\n #include \"src/objects/js-list-format.h\"\n #include \"src/objects/js-locale.h\"\n+#include \"src/objects/js-number-format.h\"\n+#include \"src/objects/js-plural-rules.h\"\n #endif  // V8_INTL_SUPPORT\n-#include \"src/objects/js-array-buffer-inl.h\"\n-#include \"src/objects/js-array-inl.h\"\n #include \"src/objects/js-regexp-string-iterator.h\"\n #include \"src/objects/js-regexp.h\"\n #ifdef V8_INTL_SUPPORT\n-#include \"src/objects/js-plural-rules.h\"\n #include \"src/objects/js-relative-time-format.h\"\n+#include \"src/objects/js-segmenter.h\"\n #endif  // V8_INTL_SUPPORT\n #include \"src/objects/templates.h\"\n #include \"src/snapshot/natives.h\"\n@@ -89,7 +97,7 @@ Handle<String> Bootstrapper::GetNativeSource(NativeType type, int index) {\n       new NativesExternalStringResource(type, index);\n   Handle<ExternalOneByteString> source_code =\n       isolate_->factory()->NewNativeSourceString(resource);\n-  DCHECK(source_code->is_short());\n+  DCHECK(source_code->is_uncached());\n   return source_code;\n }\n \n@@ -146,8 +154,7 @@ void Bootstrapper::TearDown() {\n   extensions_cache_.Initialize(isolate_, false);  // Yes, symmetrical\n }\n \n-\n-class Genesis BASE_EMBEDDED {\n+class Genesis {\n  public:\n   Genesis(Isolate* isolate, MaybeHandle<JSGlobalProxy> maybe_global_proxy,\n           v8::Local<v8::ObjectTemplate> global_proxy_template,\n@@ -156,7 +163,7 @@ class Genesis BASE_EMBEDDED {\n           GlobalContextType context_type);\n   Genesis(Isolate* isolate, MaybeHandle<JSGlobalProxy> maybe_global_proxy,\n           v8::Local<v8::ObjectTemplate> global_proxy_template);\n-  ~Genesis() { }\n+  ~Genesis() = default;\n \n   Isolate* isolate() const { return isolate_; }\n   Factory* factory() const { return isolate_->factory(); }\n@@ -503,10 +510,9 @@ V8_NOINLINE Handle<JSFunction> SimpleInstallFunction(\n     const char* function_name, Builtins::Name call, int len, bool adapt,\n     PropertyAttributes attrs = DONT_ENUM,\n     BuiltinFunctionId id = BuiltinFunctionId::kInvalidBuiltinFunctionId) {\n-  // Function name does not have to be internalized.\n   return SimpleInstallFunction(\n       isolate, base, property_name,\n-      isolate->factory()->NewStringFromAsciiChecked(function_name), call, len,\n+      isolate->factory()->InternalizeUtf8String(function_name), call, len,\n       adapt, attrs, id);\n }\n \n@@ -587,8 +593,7 @@ V8_NOINLINE Handle<JSFunction> SimpleInstallGetter(\n V8_NOINLINE void InstallConstant(Isolate* isolate, Handle<JSObject> holder,\n                                  const char* name, Handle<Object> value) {\n   JSObject::AddProperty(\n-      isolate, holder, isolate->factory()->NewStringFromAsciiChecked(name),\n-      value,\n+      isolate, holder, isolate->factory()->InternalizeUtf8String(name), value,\n       static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n }\n \n@@ -855,11 +860,10 @@ void Genesis::CreateIteratorMaps(Handle<JSFunction> empty) {\n       factory()->NewJSObject(isolate()->object_function(), TENURED);\n   JSObject::ForceSetPrototype(generator_function_prototype, empty);\n \n-  JSObject::AddProperty(\n-      isolate(), generator_function_prototype,\n-      factory()->to_string_tag_symbol(),\n-      factory()->NewStringFromAsciiChecked(\"GeneratorFunction\"),\n-      static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+  JSObject::AddProperty(isolate(), generator_function_prototype,\n+                        factory()->to_string_tag_symbol(),\n+                        factory()->InternalizeUtf8String(\"GeneratorFunction\"),\n+                        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n   JSObject::AddProperty(isolate(), generator_function_prototype,\n                         factory()->prototype_string(),\n                         generator_object_prototype,\n@@ -871,7 +875,7 @@ void Genesis::CreateIteratorMaps(Handle<JSFunction> empty) {\n                         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n   JSObject::AddProperty(isolate(), generator_object_prototype,\n                         factory()->to_string_tag_symbol(),\n-                        factory()->NewStringFromAsciiChecked(\"Generator\"),\n+                        factory()->InternalizeUtf8String(\"Generator\"),\n                         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n   SimpleInstallFunction(isolate(), generator_object_prototype, \"next\",\n                         Builtins::kGeneratorPrototypeNext, 1, false);\n@@ -951,7 +955,7 @@ void Genesis::CreateAsyncIteratorMaps(Handle<JSFunction> empty) {\n   JSObject::AddProperty(\n       isolate(), async_from_sync_iterator_prototype,\n       factory()->to_string_tag_symbol(),\n-      factory()->NewStringFromAsciiChecked(\"Async-from-Sync Iterator\"),\n+      factory()->InternalizeUtf8String(\"Async-from-Sync Iterator\"),\n       static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n   JSObject::ForceSetPrototype(async_from_sync_iterator_prototype,\n@@ -1001,7 +1005,7 @@ void Genesis::CreateAsyncIteratorMaps(Handle<JSFunction> empty) {\n \n   JSObject::AddProperty(isolate(), async_generator_object_prototype,\n                         factory()->to_string_tag_symbol(),\n-                        factory()->NewStringFromAsciiChecked(\"AsyncGenerator\"),\n+                        factory()->InternalizeUtf8String(\"AsyncGenerator\"),\n                         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n   SimpleInstallFunction(isolate(), async_generator_object_prototype, \"next\",\n                         Builtins::kAsyncGeneratorPrototypeNext, 1, false);\n@@ -1056,7 +1060,7 @@ void Genesis::CreateAsyncFunctionMaps(Handle<JSFunction> empty) {\n \n   JSObject::AddProperty(isolate(), async_function_prototype,\n                         factory()->to_string_tag_symbol(),\n-                        factory()->NewStringFromAsciiChecked(\"AsyncFunction\"),\n+                        factory()->InternalizeUtf8String(\"AsyncFunction\"),\n                         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n   Handle<Map> map;\n@@ -1263,7 +1267,7 @@ Handle<JSGlobalObject> Genesis::CreateNewGlobals(\n         isolate());\n     js_global_object_function = ApiNatives::CreateApiFunction(\n         isolate(), js_global_object_constructor, factory()->the_hole_value(),\n-        ApiNatives::GlobalObjectType);\n+        JS_GLOBAL_OBJECT_TYPE);\n   }\n \n   js_global_object_function->initial_map()->set_is_prototype_map(true);\n@@ -1289,7 +1293,7 @@ Handle<JSGlobalObject> Genesis::CreateNewGlobals(\n         FunctionTemplateInfo::cast(data->constructor()), isolate());\n     global_proxy_function = ApiNatives::CreateApiFunction(\n         isolate(), global_constructor, factory()->the_hole_value(),\n-        ApiNatives::GlobalProxyType);\n+        JS_GLOBAL_PROXY_TYPE);\n   }\n   global_proxy_function->initial_map()->set_is_access_check_needed(true);\n   global_proxy_function->initial_map()->set_has_hidden_prototype(true);\n@@ -1731,6 +1735,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kArrayPrototypeFind, 1, false);\n     SimpleInstallFunction(isolate_, proto, \"findIndex\",\n                           Builtins::kArrayPrototypeFindIndex, 1, false);\n+    SimpleInstallFunction(isolate_, proto, \"lastIndexOf\",\n+                          Builtins::kArrayPrototypeLastIndexOf, 1, false);\n     SimpleInstallFunction(isolate_, proto, \"pop\", Builtins::kArrayPrototypePop,\n                           0, false);\n     SimpleInstallFunction(isolate_, proto, \"push\",\n@@ -1739,19 +1745,14 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kArrayPrototypeReverse, 0, false);\n     SimpleInstallFunction(isolate_, proto, \"shift\",\n                           Builtins::kArrayPrototypeShift, 0, false);\n-    SimpleInstallFunction(isolate_, proto, \"unshift\", Builtins::kArrayUnshift,\n-                          1, false);\n+    SimpleInstallFunction(isolate_, proto, \"unshift\",\n+                          Builtins::kArrayPrototypeUnshift, 1, false);\n     SimpleInstallFunction(isolate_, proto, \"slice\",\n                           Builtins::kArrayPrototypeSlice, 2, false);\n     SimpleInstallFunction(isolate_, proto, \"sort\",\n                           Builtins::kArrayPrototypeSort, 1, false);\n-    if (FLAG_enable_experimental_builtins) {\n-      SimpleInstallFunction(isolate_, proto, \"splice\",\n-                            Builtins::kArraySpliceTorque, 2, false);\n-    } else {\n-      SimpleInstallFunction(isolate_, proto, \"splice\", Builtins::kArraySplice,\n-                            2, false);\n-    }\n+    SimpleInstallFunction(isolate_, proto, \"splice\", Builtins::kArraySplice, 2,\n+                          false);\n     SimpleInstallFunction(isolate_, proto, \"includes\", Builtins::kArrayIncludes,\n                           1, false);\n     SimpleInstallFunction(isolate_, proto, \"indexOf\", Builtins::kArrayIndexOf,\n@@ -1861,14 +1862,14 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         SimpleInstallFunction(isolate_, number_fun, \"parseFloat\",\n                               Builtins::kNumberParseFloat, 1, true);\n     JSObject::AddProperty(isolate_, global_object,\n-                          factory->NewStringFromAsciiChecked(\"parseFloat\"),\n+                          factory->InternalizeUtf8String(\"parseFloat\"),\n                           parse_float_fun, DONT_ENUM);\n \n     // Install Number.parseInt and Global.parseInt.\n     Handle<JSFunction> parse_int_fun = SimpleInstallFunction(\n         isolate_, number_fun, \"parseInt\", Builtins::kNumberParseInt, 2, true);\n     JSObject::AddProperty(isolate_, global_object,\n-                          factory->NewStringFromAsciiChecked(\"parseInt\"),\n+                          factory->InternalizeUtf8String(\"parseInt\"),\n                           parse_int_fun, DONT_ENUM);\n \n     // Install Number constants\n@@ -1879,52 +1880,51 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     Handle<Object> infinity = factory->infinity_value();\n     Handle<Object> nan = factory->nan_value();\n-    Handle<String> nan_name = factory->NewStringFromAsciiChecked(\"NaN\");\n+    Handle<String> nan_name = factory->InternalizeUtf8String(\"NaN\");\n \n     JSObject::AddProperty(\n-        isolate_, number_fun, factory->NewStringFromAsciiChecked(\"MAX_VALUE\"),\n+        isolate_, number_fun, factory->InternalizeUtf8String(\"MAX_VALUE\"),\n         factory->NewNumber(kMaxValue),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n-        isolate_, number_fun, factory->NewStringFromAsciiChecked(\"MIN_VALUE\"),\n+        isolate_, number_fun, factory->InternalizeUtf8String(\"MIN_VALUE\"),\n         factory->NewNumber(kMinValue),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         isolate_, number_fun, nan_name, nan,\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         isolate_, number_fun,\n-        factory->NewStringFromAsciiChecked(\"NEGATIVE_INFINITY\"),\n+        factory->InternalizeUtf8String(\"NEGATIVE_INFINITY\"),\n         factory->NewNumber(-V8_INFINITY),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         isolate_, number_fun,\n-        factory->NewStringFromAsciiChecked(\"POSITIVE_INFINITY\"), infinity,\n+        factory->InternalizeUtf8String(\"POSITIVE_INFINITY\"), infinity,\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         isolate_, number_fun,\n-        factory->NewStringFromAsciiChecked(\"MAX_SAFE_INTEGER\"),\n+        factory->InternalizeUtf8String(\"MAX_SAFE_INTEGER\"),\n         factory->NewNumber(kMaxSafeInteger),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         isolate_, number_fun,\n-        factory->NewStringFromAsciiChecked(\"MIN_SAFE_INTEGER\"),\n+        factory->InternalizeUtf8String(\"MIN_SAFE_INTEGER\"),\n         factory->NewNumber(kMinSafeInteger),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n-        isolate_, number_fun, factory->NewStringFromAsciiChecked(\"EPSILON\"),\n+        isolate_, number_fun, factory->InternalizeUtf8String(\"EPSILON\"),\n         factory->NewNumber(kEPS),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n \n     JSObject::AddProperty(\n-        isolate_, global, factory->NewStringFromAsciiChecked(\"Infinity\"),\n-        infinity,\n+        isolate_, global, factory->InternalizeUtf8String(\"Infinity\"), infinity,\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n         isolate_, global, nan_name, nan,\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n     JSObject::AddProperty(\n-        isolate_, global, factory->NewStringFromAsciiChecked(\"undefined\"),\n+        isolate_, global, factory->InternalizeUtf8String(\"undefined\"),\n         factory->undefined_value(),\n         static_cast<PropertyAttributes>(DONT_DELETE | DONT_ENUM | READ_ONLY));\n   }\n@@ -2086,10 +2086,23 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kStringPrototypeToString, 0, true);\n     SimpleInstallFunction(isolate_, prototype, \"trim\",\n                           Builtins::kStringPrototypeTrim, 0, false);\n-    SimpleInstallFunction(isolate_, prototype, \"trimLeft\",\n-                          Builtins::kStringPrototypeTrimStart, 0, false);\n-    SimpleInstallFunction(isolate_, prototype, \"trimRight\",\n-                          Builtins::kStringPrototypeTrimEnd, 0, false);\n+\n+    // Install `String.prototype.trimStart` with `trimLeft` alias.\n+    Handle<JSFunction> trim_start_fun =\n+        SimpleInstallFunction(isolate_, prototype, \"trimStart\",\n+                              Builtins::kStringPrototypeTrimStart, 0, false);\n+    JSObject::AddProperty(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"trimLeft\"),\n+                          trim_start_fun, DONT_ENUM);\n+\n+    // Install `String.prototype.trimEnd` with `trimRight` alias.\n+    Handle<JSFunction> trim_end_fun =\n+        SimpleInstallFunction(isolate_, prototype, \"trimEnd\",\n+                              Builtins::kStringPrototypeTrimEnd, 0, false);\n+    JSObject::AddProperty(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"trimRight\"),\n+                          trim_end_fun, DONT_ENUM);\n+\n     SimpleInstallFunction(isolate_, prototype, \"toLocaleLowerCase\",\n                           Builtins::kStringPrototypeToLocaleLowerCase, 0,\n                           false);\n@@ -2126,20 +2139,22 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     JSObject::AddProperty(\n         isolate_, string_iterator_prototype, factory->to_string_tag_symbol(),\n-        factory->NewStringFromAsciiChecked(\"String Iterator\"),\n+        factory->InternalizeUtf8String(\"String Iterator\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n     SimpleInstallFunction(isolate_, string_iterator_prototype, \"next\",\n                           Builtins::kStringIteratorPrototypeNext, 0, true,\n                           BuiltinFunctionId::kStringIteratorNext);\n \n     Handle<JSFunction> string_iterator_function = CreateFunction(\n-        isolate_, factory->NewStringFromAsciiChecked(\"StringIterator\"),\n+        isolate_, factory->InternalizeUtf8String(\"StringIterator\"),\n         JS_STRING_ITERATOR_TYPE, JSStringIterator::kSize, 0,\n         string_iterator_prototype, Builtins::kIllegal);\n     string_iterator_function->shared()->set_native(false);\n-    native_context()->set_string_iterator_map(\n+    native_context()->set_initial_string_iterator_map(\n         string_iterator_function->initial_map());\n+    native_context()->set_initial_string_iterator_prototype(\n+        *string_iterator_prototype);\n   }\n \n   {  // --- S y m b o l ---\n@@ -2186,14 +2201,16 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     // Install the @@toStringTag property on the {prototype}.\n     JSObject::AddProperty(\n         isolate_, prototype, factory->to_string_tag_symbol(),\n-        factory->NewStringFromAsciiChecked(\"Symbol\"),\n+        factory->InternalizeUtf8String(\"Symbol\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n     // Install the Symbol.prototype methods.\n     SimpleInstallFunction(isolate_, prototype, \"toString\",\n-                          Builtins::kSymbolPrototypeToString, 0, true);\n+                          Builtins::kSymbolPrototypeToString, 0, true,\n+                          BuiltinFunctionId::kSymbolPrototypeToString);\n     SimpleInstallFunction(isolate_, prototype, \"valueOf\",\n-                          Builtins::kSymbolPrototypeValueOf, 0, true);\n+                          Builtins::kSymbolPrototypeValueOf, 0, true,\n+                          BuiltinFunctionId::kSymbolPrototypeValueOf);\n \n     // Install the @@toPrimitive function.\n     Handle<JSFunction> to_primitive = InstallFunction(\n@@ -2319,13 +2336,22 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     SimpleInstallFunction(isolate_, prototype, \"toJSON\",\n                           Builtins::kDatePrototypeToJson, 1, false);\n \n+#ifdef V8_INTL_SUPPORT\n+    SimpleInstallFunction(isolate_, prototype, \"toLocaleString\",\n+                          Builtins::kDatePrototypeToLocaleString, 0, false);\n+    SimpleInstallFunction(isolate_, prototype, \"toLocaleDateString\",\n+                          Builtins::kDatePrototypeToLocaleDateString, 0, false);\n+    SimpleInstallFunction(isolate_, prototype, \"toLocaleTimeString\",\n+                          Builtins::kDatePrototypeToLocaleTimeString, 0, false);\n+#else\n     // Install Intl fallback functions.\n     SimpleInstallFunction(isolate_, prototype, \"toLocaleString\",\n                           Builtins::kDatePrototypeToString, 0, false);\n     SimpleInstallFunction(isolate_, prototype, \"toLocaleDateString\",\n                           Builtins::kDatePrototypeToDateString, 0, false);\n     SimpleInstallFunction(isolate_, prototype, \"toLocaleTimeString\",\n                           Builtins::kDatePrototypeToTimeString, 0, false);\n+#endif  // V8_INTL_SUPPORT\n \n     // Install the @@toPrimitive function.\n     Handle<JSFunction> to_primitive = InstallFunction(\n@@ -2734,7 +2760,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kJsonStringify, 3, true);\n     JSObject::AddProperty(\n         isolate_, json_object, factory->to_string_tag_symbol(),\n-        factory->NewStringFromAsciiChecked(\"JSON\"),\n+        factory->InternalizeUtf8String(\"JSON\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n   }\n \n@@ -2815,7 +2841,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                     factory->NewNumber(std::sqrt(2.0)));\n     JSObject::AddProperty(\n         isolate_, math, factory->to_string_tag_symbol(),\n-        factory->NewStringFromAsciiChecked(\"Math\"),\n+        factory->InternalizeUtf8String(\"Math\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n   }\n \n@@ -2869,6 +2895,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kConsoleProfileEnd, 1, false, NONE);\n     SimpleInstallFunction(isolate_, console, \"time\", Builtins::kConsoleTime, 1,\n                           false, NONE);\n+    SimpleInstallFunction(isolate_, console, \"timeLog\",\n+                          Builtins::kConsoleTimeLog, 1, false, NONE);\n     SimpleInstallFunction(isolate_, console, \"timeEnd\",\n                           Builtins::kConsoleTimeEnd, 1, false, NONE);\n     SimpleInstallFunction(isolate_, console, \"timeStamp\",\n@@ -2877,7 +2905,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kConsoleContext, 1, true, NONE);\n     JSObject::AddProperty(\n         isolate_, console, factory->to_string_tag_symbol(),\n-        factory->NewStringFromAsciiChecked(\"Object\"),\n+        factory->InternalizeUtf8String(\"Object\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n   }\n \n@@ -2890,11 +2918,22 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     {\n       Handle<JSFunction> date_time_format_constructor = InstallFunction(\n-          isolate_, intl, \"DateTimeFormat\", JS_OBJECT_TYPE, DateFormat::kSize,\n-          0, factory->the_hole_value(), Builtins::kIllegal);\n+          isolate_, intl, \"DateTimeFormat\", JS_INTL_DATE_TIME_FORMAT_TYPE,\n+          JSDateTimeFormat::kSize, 0, factory->the_hole_value(),\n+          Builtins::kDateTimeFormatConstructor);\n+      date_time_format_constructor->shared()->set_length(0);\n+      date_time_format_constructor->shared()->DontAdaptArguments();\n+      InstallWithIntrinsicDefaultProto(\n+          isolate_, date_time_format_constructor,\n+          Context::INTL_DATE_TIME_FORMAT_FUNCTION_INDEX);\n+\n       native_context()->set_intl_date_time_format_function(\n           *date_time_format_constructor);\n \n+      SimpleInstallFunction(\n+          isolate(), date_time_format_constructor, \"supportedLocalesOf\",\n+          Builtins::kDateTimeFormatSupportedLocalesOf, 1, false);\n+\n       Handle<JSObject> prototype(\n           JSObject::cast(date_time_format_constructor->prototype()), isolate_);\n \n@@ -2904,28 +2943,33 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n+      SimpleInstallFunction(isolate_, prototype, \"resolvedOptions\",\n+                            Builtins::kDateTimeFormatPrototypeResolvedOptions,\n+                            0, false);\n+\n       SimpleInstallFunction(isolate_, prototype, \"formatToParts\",\n                             Builtins::kDateTimeFormatPrototypeFormatToParts, 1,\n                             false);\n \n       SimpleInstallGetter(isolate_, prototype,\n                           factory->InternalizeUtf8String(\"format\"),\n                           Builtins::kDateTimeFormatPrototypeFormat, false);\n-\n-      {\n-        Handle<SharedFunctionInfo> info = SimpleCreateBuiltinSharedFunctionInfo(\n-            isolate_, Builtins::kDateTimeFormatInternalFormat,\n-            factory->empty_string(), 1);\n-        native_context()->set_date_format_internal_format_shared_fun(*info);\n-      }\n     }\n \n     {\n       Handle<JSFunction> number_format_constructor = InstallFunction(\n-          isolate_, intl, \"NumberFormat\", JS_OBJECT_TYPE, NumberFormat::kSize,\n-          0, factory->the_hole_value(), Builtins::kIllegal);\n-      native_context()->set_intl_number_format_function(\n-          *number_format_constructor);\n+          isolate_, intl, \"NumberFormat\", JS_INTL_NUMBER_FORMAT_TYPE,\n+          JSNumberFormat::kSize, 0, factory->the_hole_value(),\n+          Builtins::kNumberFormatConstructor);\n+      number_format_constructor->shared()->set_length(0);\n+      number_format_constructor->shared()->DontAdaptArguments();\n+      InstallWithIntrinsicDefaultProto(\n+          isolate_, number_format_constructor,\n+          Context::INTL_NUMBER_FORMAT_FUNCTION_INDEX);\n+\n+      SimpleInstallFunction(\n+          isolate(), number_format_constructor, \"supportedLocalesOf\",\n+          Builtins::kNumberFormatSupportedLocalesOf, 1, false);\n \n       Handle<JSObject> prototype(\n           JSObject::cast(number_format_constructor->prototype()), isolate_);\n@@ -2936,20 +2980,16 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n+      SimpleInstallFunction(isolate_, prototype, \"resolvedOptions\",\n+                            Builtins::kNumberFormatPrototypeResolvedOptions, 0,\n+                            false);\n+\n       SimpleInstallFunction(isolate_, prototype, \"formatToParts\",\n                             Builtins::kNumberFormatPrototypeFormatToParts, 1,\n                             false);\n       SimpleInstallGetter(isolate_, prototype,\n                           factory->InternalizeUtf8String(\"format\"),\n                           Builtins::kNumberFormatPrototypeFormatNumber, false);\n-\n-      {\n-        Handle<SharedFunctionInfo> info = SimpleCreateBuiltinSharedFunctionInfo(\n-            isolate_, Builtins::kNumberFormatInternalFormatNumber,\n-            factory->empty_string(), 1);\n-        native_context()->set_number_format_internal_format_number_shared_fun(\n-            *info);\n-      }\n     }\n \n     {\n@@ -2960,6 +3000,10 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n       InstallWithIntrinsicDefaultProto(isolate_, collator_constructor,\n                                        Context::INTL_COLLATOR_FUNCTION_INDEX);\n \n+      SimpleInstallFunction(isolate(), collator_constructor,\n+                            \"supportedLocalesOf\",\n+                            Builtins::kCollatorSupportedLocalesOf, 1, false);\n+\n       Handle<JSObject> prototype(\n           JSObject::cast(collator_constructor->prototype()), isolate_);\n \n@@ -2969,25 +3013,28 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n+      SimpleInstallFunction(isolate_, prototype, \"resolvedOptions\",\n+                            Builtins::kCollatorPrototypeResolvedOptions, 0,\n+                            false);\n+\n       SimpleInstallGetter(isolate_, prototype,\n                           factory->InternalizeUtf8String(\"compare\"),\n                           Builtins::kCollatorPrototypeCompare, false);\n-\n-      {\n-        Handle<SharedFunctionInfo> info = SimpleCreateBuiltinSharedFunctionInfo(\n-            isolate_, Builtins::kCollatorInternalCompare,\n-            factory->empty_string(), 2);\n-        native_context()->set_collator_internal_compare_shared_fun(*info);\n-      }\n     }\n \n     {\n-      Handle<JSFunction> v8_break_iterator_constructor =\n-          InstallFunction(isolate_, intl, \"v8BreakIterator\", JS_OBJECT_TYPE,\n-                          V8BreakIterator::kSize, 0, factory->the_hole_value(),\n-                          Builtins::kIllegal);\n-      native_context()->set_intl_v8_break_iterator_function(\n-          *v8_break_iterator_constructor);\n+      Handle<JSFunction> v8_break_iterator_constructor = InstallFunction(\n+          isolate_, intl, \"v8BreakIterator\", JS_INTL_V8_BREAK_ITERATOR_TYPE,\n+          JSV8BreakIterator::kSize, 0, factory->the_hole_value(),\n+          Builtins::kV8BreakIteratorConstructor);\n+      v8_break_iterator_constructor->shared()->DontAdaptArguments();\n+      InstallWithIntrinsicDefaultProto(\n+          isolate_, v8_break_iterator_constructor,\n+          Context::INTL_V8_BREAK_ITERATOR_FUNCTION_INDEX);\n+\n+      SimpleInstallFunction(\n+          isolate_, v8_break_iterator_constructor, \"supportedLocalesOf\",\n+          Builtins::kV8BreakIteratorSupportedLocalesOf, 1, false);\n \n       Handle<JSObject> prototype(\n           JSObject::cast(v8_break_iterator_constructor->prototype()), isolate_);\n@@ -2998,17 +3045,29 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n+      SimpleInstallFunction(isolate_, prototype, \"resolvedOptions\",\n+                            Builtins::kV8BreakIteratorPrototypeResolvedOptions,\n+                            0, false);\n+\n       SimpleInstallGetter(isolate_, prototype,\n                           factory->InternalizeUtf8String(\"adoptText\"),\n-                          Builtins::kBreakIteratorPrototypeAdoptText, false);\n+                          Builtins::kV8BreakIteratorPrototypeAdoptText, false);\n \n-      {\n-        Handle<SharedFunctionInfo> info = SimpleCreateBuiltinSharedFunctionInfo(\n-            isolate_, Builtins::kBreakIteratorInternalAdoptText,\n-            factory->empty_string(), 1);\n-        native_context()->set_break_iterator_internal_adopt_text_shared_fun(\n-            *info);\n-      }\n+      SimpleInstallGetter(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"first\"),\n+                          Builtins::kV8BreakIteratorPrototypeFirst, false);\n+\n+      SimpleInstallGetter(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"next\"),\n+                          Builtins::kV8BreakIteratorPrototypeNext, false);\n+\n+      SimpleInstallGetter(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"current\"),\n+                          Builtins::kV8BreakIteratorPrototypeCurrent, false);\n+\n+      SimpleInstallGetter(isolate_, prototype,\n+                          factory->InternalizeUtf8String(\"breakType\"),\n+                          Builtins::kV8BreakIteratorPrototypeBreakType, false);\n     }\n \n     {\n@@ -3021,6 +3080,10 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           isolate_, plural_rules_constructor,\n           Context::INTL_PLURAL_RULES_FUNCTION_INDEX);\n \n+      SimpleInstallFunction(isolate(), plural_rules_constructor,\n+                            \"supportedLocalesOf\",\n+                            Builtins::kPluralRulesSupportedLocalesOf, 1, false);\n+\n       Handle<JSObject> prototype(\n           JSObject::cast(plural_rules_constructor->prototype()), isolate_);\n \n@@ -3029,6 +3092,13 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n           isolate_, prototype, factory->to_string_tag_symbol(),\n           factory->Object_string(),\n           static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+      SimpleInstallFunction(isolate_, prototype, \"resolvedOptions\",\n+                            Builtins::kPluralRulesPrototypeResolvedOptions, 0,\n+                            false);\n+\n+      SimpleInstallFunction(isolate_, prototype, \"select\",\n+                            Builtins::kPluralRulesPrototypeSelect, 1, false);\n     }\n   }\n #endif  // V8_INTL_SUPPORT\n@@ -3043,7 +3113,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     Handle<JSFunction> array_buffer_noinit_fun = SimpleCreateFunction(\n         isolate_,\n-        factory->NewStringFromAsciiChecked(\n+        factory->InternalizeUtf8String(\n             \"arrayBufferConstructor_DoNotInitialize\"),\n         Builtins::kArrayBufferConstructor_DoNotInitialize, 1, false);\n     native_context()->set_array_buffer_noinit_fun(*array_buffer_noinit_fun);\n@@ -3088,7 +3158,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     SimpleInstallFunction(isolate_, atomics_object, \"wake\",\n                           Builtins::kAtomicsWake, 3, true);\n     SimpleInstallFunction(isolate_, atomics_object, \"notify\",\n-                          Builtins::kAtomicsWake, 3, true);\n+                          Builtins::kAtomicsNotify, 3, true);\n   }\n \n   {  // -- T y p e d A r r a y\n@@ -3213,7 +3283,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     // Install the @@toStringTag property on the {prototype}.\n     JSObject::AddProperty(\n         isolate_, prototype, factory->to_string_tag_symbol(),\n-        factory->NewStringFromAsciiChecked(\"DataView\"),\n+        factory->InternalizeUtf8String(\"DataView\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n     // Install the \"buffer\", \"byteOffset\" and \"byteLength\" getters\n@@ -3260,6 +3330,14 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kDataViewPrototypeGetFloat64, 1, false);\n     SimpleInstallFunction(isolate_, prototype, \"setFloat64\",\n                           Builtins::kDataViewPrototypeSetFloat64, 2, false);\n+    SimpleInstallFunction(isolate_, prototype, \"getBigInt64\",\n+                          Builtins::kDataViewPrototypeGetBigInt64, 1, false);\n+    SimpleInstallFunction(isolate_, prototype, \"setBigInt64\",\n+                          Builtins::kDataViewPrototypeSetBigInt64, 2, false);\n+    SimpleInstallFunction(isolate_, prototype, \"getBigUint64\",\n+                          Builtins::kDataViewPrototypeGetBigUint64, 1, false);\n+    SimpleInstallFunction(isolate_, prototype, \"setBigUint64\",\n+                          Builtins::kDataViewPrototypeSetBigUint64, 2, false);\n   }\n \n   {  // -- M a p\n@@ -3321,6 +3399,48 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     InstallSpeciesGetter(isolate_, js_map_fun);\n   }\n \n+  {  // -- B i g I n t\n+    Handle<JSFunction> bigint_fun = InstallFunction(\n+        isolate_, global, \"BigInt\", JS_VALUE_TYPE, JSValue::kSize, 0,\n+        factory->the_hole_value(), Builtins::kBigIntConstructor);\n+    bigint_fun->shared()->set_builtin_function_id(\n+        BuiltinFunctionId::kBigIntConstructor);\n+    bigint_fun->shared()->DontAdaptArguments();\n+    bigint_fun->shared()->set_length(1);\n+    InstallWithIntrinsicDefaultProto(isolate_, bigint_fun,\n+                                     Context::BIGINT_FUNCTION_INDEX);\n+\n+    // Install the properties of the BigInt constructor.\n+    // asUintN(bits, bigint)\n+    SimpleInstallFunction(isolate_, bigint_fun, \"asUintN\",\n+                          Builtins::kBigIntAsUintN, 2, false);\n+    // asIntN(bits, bigint)\n+    SimpleInstallFunction(isolate_, bigint_fun, \"asIntN\",\n+                          Builtins::kBigIntAsIntN, 2, false);\n+\n+    // Set up the %BigIntPrototype%.\n+    Handle<JSObject> prototype(JSObject::cast(bigint_fun->instance_prototype()),\n+                               isolate_);\n+    JSFunction::SetPrototype(bigint_fun, prototype);\n+\n+    // Install the properties of the BigInt.prototype.\n+    // \"constructor\" is created implicitly by InstallFunction() above.\n+    // toLocaleString([reserved1 [, reserved2]])\n+    SimpleInstallFunction(isolate_, prototype, \"toLocaleString\",\n+                          Builtins::kBigIntPrototypeToLocaleString, 0, false);\n+    // toString([radix])\n+    SimpleInstallFunction(isolate_, prototype, \"toString\",\n+                          Builtins::kBigIntPrototypeToString, 0, false);\n+    // valueOf()\n+    SimpleInstallFunction(isolate_, prototype, \"valueOf\",\n+                          Builtins::kBigIntPrototypeValueOf, 0, false);\n+    // @@toStringTag\n+    JSObject::AddProperty(\n+        isolate_, prototype, factory->to_string_tag_symbol(),\n+        factory->BigInt_string(),\n+        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+  }\n+\n   {  // -- S e t\n     Handle<JSFunction> js_set_fun =\n         InstallFunction(isolate_, global, \"Set\", JS_SET_TYPE, JSSet::kSize, 0,\n@@ -3435,8 +3555,9 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     SimpleInstallFunction(isolate_, prototype, \"delete\",\n                           Builtins::kWeakMapPrototypeDelete, 1, true);\n-    SimpleInstallFunction(isolate_, prototype, \"get\", Builtins::kWeakMapGet, 1,\n-                          true);\n+    Handle<JSFunction> weakmap_get = SimpleInstallFunction(\n+        isolate_, prototype, \"get\", Builtins::kWeakMapGet, 1, true);\n+    native_context()->set_weakmap_get(*weakmap_get);\n     SimpleInstallFunction(isolate_, prototype, \"has\", Builtins::kWeakMapHas, 1,\n                           true);\n     Handle<JSFunction> weakmap_set = SimpleInstallFunction(\n@@ -3445,7 +3566,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     JSObject::AddProperty(\n         isolate_, prototype, factory->to_string_tag_symbol(),\n-        factory->NewStringFromAsciiChecked(\"WeakMap\"),\n+        factory->InternalizeUtf8String(\"WeakMap\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n     native_context()->set_initial_weakmap_prototype_map(prototype->map());\n@@ -3476,7 +3597,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     JSObject::AddProperty(\n         isolate_, prototype, factory->to_string_tag_symbol(),\n-        factory->NewStringFromAsciiChecked(\"WeakSet\"),\n+        factory->InternalizeUtf8String(\"WeakSet\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n     native_context()->set_initial_weakset_prototype_map(prototype->map());\n@@ -3852,8 +3973,7 @@ bool Bootstrapper::CompileNative(Isolate* isolate, Vector<const char> name,\n bool Genesis::CallUtilsFunction(Isolate* isolate, const char* name) {\n   Handle<JSObject> utils =\n       Handle<JSObject>::cast(isolate->natives_utils_object());\n-  Handle<String> name_string =\n-      isolate->factory()->NewStringFromAsciiChecked(name);\n+  Handle<String> name_string = isolate->factory()->InternalizeUtf8String(name);\n   Handle<Object> fun = JSObject::GetDataProperty(utils, name_string);\n   Handle<Object> receiver = isolate->factory()->undefined_value();\n   Handle<Object> args[] = {utils};\n@@ -3975,17 +4095,17 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n   Factory* factory = isolate->factory();\n   HandleScope scope(isolate);\n   Handle<NativeContext> native_context = isolate->native_context();\n-#define EXPORT_PRIVATE_SYMBOL(NAME)                                       \\\n-  Handle<String> NAME##_name = factory->NewStringFromAsciiChecked(#NAME); \\\n+#define EXPORT_PRIVATE_SYMBOL(_, NAME)                                \\\n+  Handle<String> NAME##_name = factory->InternalizeUtf8String(#NAME); \\\n   JSObject::AddProperty(isolate, container, NAME##_name, factory->NAME(), NONE);\n-  PRIVATE_SYMBOL_LIST(EXPORT_PRIVATE_SYMBOL)\n+  PRIVATE_SYMBOL_LIST_GENERATOR(EXPORT_PRIVATE_SYMBOL, /* not used */)\n #undef EXPORT_PRIVATE_SYMBOL\n \n-#define EXPORT_PUBLIC_SYMBOL(NAME, DESCRIPTION)                           \\\n-  Handle<String> NAME##_name = factory->NewStringFromAsciiChecked(#NAME); \\\n+#define EXPORT_PUBLIC_SYMBOL(_, NAME, DESCRIPTION)                    \\\n+  Handle<String> NAME##_name = factory->InternalizeUtf8String(#NAME); \\\n   JSObject::AddProperty(isolate, container, NAME##_name, factory->NAME(), NONE);\n-  PUBLIC_SYMBOL_LIST(EXPORT_PUBLIC_SYMBOL)\n-  WELL_KNOWN_SYMBOL_LIST(EXPORT_PUBLIC_SYMBOL)\n+  PUBLIC_SYMBOL_LIST_GENERATOR(EXPORT_PUBLIC_SYMBOL, /* not used */)\n+  WELL_KNOWN_SYMBOL_LIST_GENERATOR(EXPORT_PUBLIC_SYMBOL, /* not used */)\n #undef EXPORT_PUBLIC_SYMBOL\n \n   Handle<JSObject> iterator_prototype(\n@@ -4238,6 +4358,7 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n            Builtins::kCallSitePrototypeGetScriptNameOrSourceURL},\n           {\"getThis\", Builtins::kCallSitePrototypeGetThis},\n           {\"getTypeName\", Builtins::kCallSitePrototypeGetTypeName},\n+          {\"isAsync\", Builtins::kCallSitePrototypeIsAsync},\n           {\"isConstructor\", Builtins::kCallSitePrototypeIsConstructor},\n           {\"isEval\", Builtins::kCallSitePrototypeIsEval},\n           {\"isNative\", Builtins::kCallSitePrototypeIsNative},\n@@ -4261,14 +4382,16 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n   void Genesis::InitializeGlobal_##id() {}\n \n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_do_expressions)\n-EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_function_tostring)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_public_fields)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_private_fields)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_static_fields)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_class_fields)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_dynamic_import)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_import_meta)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_numeric_separator)\n+EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_json_stringify)\n+EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_regexp_sequence)\n+EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_await_optimization)\n \n #undef EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE\n \n@@ -4305,40 +4428,6 @@ void Genesis::InitializeGlobal_harmony_sharedarraybuffer() {\n   }\n }\n \n-void Genesis::InitializeGlobal_harmony_string_trimming() {\n-  if (!FLAG_harmony_string_trimming) return;\n-\n-  Handle<JSGlobalObject> global(native_context()->global_object(), isolate());\n-  Factory* factory = isolate()->factory();\n-\n-  Handle<JSObject> string_prototype(\n-      native_context()->initial_string_prototype(), isolate());\n-\n-  {\n-    Handle<String> trim_left_name = factory->InternalizeUtf8String(\"trimLeft\");\n-    Handle<String> trim_start_name =\n-        factory->InternalizeUtf8String(\"trimStart\");\n-    Handle<JSFunction> trim_left_fun = Handle<JSFunction>::cast(\n-        JSObject::GetProperty(isolate_, string_prototype, trim_left_name)\n-            .ToHandleChecked());\n-    JSObject::AddProperty(isolate_, string_prototype, trim_start_name,\n-                          trim_left_fun, DONT_ENUM);\n-    trim_left_fun->shared()->SetName(*trim_start_name);\n-  }\n-\n-  {\n-    Handle<String> trim_right_name =\n-        factory->InternalizeUtf8String(\"trimRight\");\n-    Handle<String> trim_end_name = factory->InternalizeUtf8String(\"trimEnd\");\n-    Handle<JSFunction> trim_right_fun = Handle<JSFunction>::cast(\n-        JSObject::GetProperty(isolate_, string_prototype, trim_right_name)\n-            .ToHandleChecked());\n-    JSObject::AddProperty(isolate_, string_prototype, trim_end_name,\n-                          trim_right_fun, DONT_ENUM);\n-    trim_right_fun->shared()->SetName(*trim_end_name);\n-  }\n-}\n-\n void Genesis::InitializeGlobal_harmony_array_prototype_values() {\n   if (!FLAG_harmony_array_prototype_values) return;\n   Handle<JSFunction> array_constructor(native_context()->array_function(),\n@@ -4425,15 +4514,15 @@ void Genesis::InitializeGlobal_harmony_string_matchall() {\n     JSObject::AddProperty(\n         isolate(), regexp_string_iterator_prototype,\n         factory()->to_string_tag_symbol(),\n-        factory()->NewStringFromAsciiChecked(\"RegExp String Iterator\"),\n+        factory()->InternalizeUtf8String(\"RegExp String Iterator\"),\n         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n     SimpleInstallFunction(isolate(), regexp_string_iterator_prototype, \"next\",\n                           Builtins::kRegExpStringIteratorPrototypeNext, 0,\n                           true);\n \n     Handle<JSFunction> regexp_string_iterator_function = CreateFunction(\n-        isolate(), factory()->NewStringFromAsciiChecked(\"RegExpStringIterator\"),\n+        isolate(), factory()->InternalizeUtf8String(\"RegExpStringIterator\"),\n         JS_REGEXP_STRING_ITERATOR_TYPE, JSRegExpStringIterator::kSize, 0,\n         regexp_string_iterator_prototype, Builtins::kIllegal);\n     regexp_string_iterator_function->shared()->set_native(false);\n@@ -4449,126 +4538,6 @@ void Genesis::InitializeGlobal_harmony_string_matchall() {\n   }\n }\n \n-void Genesis::InitializeGlobal_harmony_bigint() {\n-  Factory* factory = isolate()->factory();\n-  Handle<JSGlobalObject> global(native_context()->global_object(), isolate());\n-  if (!FLAG_harmony_bigint) {\n-    // Typed arrays are installed by default; remove them if the flag is off.\n-    CHECK(JSObject::DeleteProperty(\n-              global, factory->InternalizeUtf8String(\"BigInt64Array\"))\n-              .ToChecked());\n-    CHECK(JSObject::DeleteProperty(\n-              global, factory->InternalizeUtf8String(\"BigUint64Array\"))\n-              .ToChecked());\n-    return;\n-  }\n-\n-  Handle<JSFunction> bigint_fun = InstallFunction(\n-      isolate(), global, \"BigInt\", JS_VALUE_TYPE, JSValue::kSize, 0,\n-      factory->the_hole_value(), Builtins::kBigIntConstructor);\n-  bigint_fun->shared()->set_builtin_function_id(\n-      BuiltinFunctionId::kBigIntConstructor);\n-  bigint_fun->shared()->DontAdaptArguments();\n-  bigint_fun->shared()->set_length(1);\n-  InstallWithIntrinsicDefaultProto(isolate(), bigint_fun,\n-                                   Context::BIGINT_FUNCTION_INDEX);\n-\n-  // Install the properties of the BigInt constructor.\n-  // asUintN(bits, bigint)\n-  SimpleInstallFunction(isolate(), bigint_fun, \"asUintN\",\n-                        Builtins::kBigIntAsUintN, 2, false);\n-  // asIntN(bits, bigint)\n-  SimpleInstallFunction(isolate(), bigint_fun, \"asIntN\",\n-                        Builtins::kBigIntAsIntN, 2, false);\n-\n-  // Set up the %BigIntPrototype%.\n-  Handle<JSObject> prototype(JSObject::cast(bigint_fun->instance_prototype()),\n-                             isolate());\n-  JSFunction::SetPrototype(bigint_fun, prototype);\n-\n-  // Install the properties of the BigInt.prototype.\n-  // \"constructor\" is created implicitly by InstallFunction() above.\n-  // toLocaleString([reserved1 [, reserved2]])\n-  SimpleInstallFunction(isolate(), prototype, \"toLocaleString\",\n-                        Builtins::kBigIntPrototypeToLocaleString, 0, false);\n-  // toString([radix])\n-  SimpleInstallFunction(isolate(), prototype, \"toString\",\n-                        Builtins::kBigIntPrototypeToString, 0, false);\n-  // valueOf()\n-  SimpleInstallFunction(isolate(), prototype, \"valueOf\",\n-                        Builtins::kBigIntPrototypeValueOf, 0, false);\n-  // @@toStringTag\n-  JSObject::AddProperty(isolate(), prototype, factory->to_string_tag_symbol(),\n-                        factory->BigInt_string(),\n-                        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n-\n-  // Install 64-bit DataView accessors.\n-  // TODO(jkummerow): Move these to the \"DataView\" section when dropping the\n-  // FLAG_harmony_bigint.\n-  Handle<JSObject> dataview_prototype(\n-      JSObject::cast(native_context()->data_view_fun()->instance_prototype()),\n-      isolate());\n-  SimpleInstallFunction(isolate(), dataview_prototype, \"getBigInt64\",\n-                        Builtins::kDataViewPrototypeGetBigInt64, 1, false);\n-  SimpleInstallFunction(isolate(), dataview_prototype, \"setBigInt64\",\n-                        Builtins::kDataViewPrototypeSetBigInt64, 2, false);\n-  SimpleInstallFunction(isolate(), dataview_prototype, \"getBigUint64\",\n-                        Builtins::kDataViewPrototypeGetBigUint64, 1, false);\n-  SimpleInstallFunction(isolate(), dataview_prototype, \"setBigUint64\",\n-                        Builtins::kDataViewPrototypeSetBigUint64, 2, false);\n-}\n-\n-void Genesis::InitializeGlobal_harmony_await_optimization() {\n-  if (!FLAG_harmony_await_optimization) return;\n-\n-  // async/await\n-  Handle<JSFunction> await_caught_function = SimpleCreateFunction(\n-      isolate(), factory()->empty_string(),\n-      Builtins::kAsyncFunctionAwaitCaughtOptimized, 2, false);\n-  native_context()->set_async_function_await_caught(*await_caught_function);\n-\n-  Handle<JSFunction> await_uncaught_function = SimpleCreateFunction(\n-      isolate(), factory()->empty_string(),\n-      Builtins::kAsyncFunctionAwaitUncaughtOptimized, 2, false);\n-  native_context()->set_async_function_await_uncaught(*await_uncaught_function);\n-\n-  // async generators\n-  Handle<JSObject> async_iterator_prototype =\n-      factory()->NewJSObject(isolate()->object_function(), TENURED);\n-\n-  SimpleInstallFunction(\n-      isolate(), async_iterator_prototype, factory()->async_iterator_symbol(),\n-      \"[Symbol.asyncIterator]\", Builtins::kReturnReceiver, 0, true);\n-\n-  Handle<JSObject> async_from_sync_iterator_prototype =\n-      factory()->NewJSObject(isolate()->object_function(), TENURED);\n-  SimpleInstallFunction(\n-      isolate(), async_from_sync_iterator_prototype, factory()->next_string(),\n-      Builtins::kAsyncFromSyncIteratorPrototypeNextOptimized, 1, true);\n-  SimpleInstallFunction(\n-      isolate(), async_from_sync_iterator_prototype, factory()->return_string(),\n-      Builtins::kAsyncFromSyncIteratorPrototypeReturnOptimized, 1, true);\n-  SimpleInstallFunction(\n-      isolate(), async_from_sync_iterator_prototype, factory()->throw_string(),\n-      Builtins::kAsyncFromSyncIteratorPrototypeThrowOptimized, 1, true);\n-\n-  JSObject::AddProperty(\n-      isolate(), async_from_sync_iterator_prototype,\n-      factory()->to_string_tag_symbol(),\n-      factory()->NewStringFromAsciiChecked(\"Async-from-Sync Iterator\"),\n-      static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n-\n-  JSObject::ForceSetPrototype(async_from_sync_iterator_prototype,\n-                              async_iterator_prototype);\n-\n-  Handle<Map> async_from_sync_iterator_map = factory()->NewMap(\n-      JS_ASYNC_FROM_SYNC_ITERATOR_TYPE, JSAsyncFromSyncIterator::kSize);\n-  Map::SetPrototype(isolate(), async_from_sync_iterator_map,\n-                    async_from_sync_iterator_prototype);\n-  native_context()->set_async_from_sync_iterator_map(\n-      *async_from_sync_iterator_map);\n-}\n-\n #ifdef V8_INTL_SUPPORT\n void Genesis::InitializeGlobal_harmony_intl_list_format() {\n   if (!FLAG_harmony_intl_list_format) return;\n@@ -4586,13 +4555,16 @@ void Genesis::InitializeGlobal_harmony_intl_list_format() {\n   list_format_fun->shared()->set_length(0);\n   list_format_fun->shared()->DontAdaptArguments();\n \n+  SimpleInstallFunction(isolate(), list_format_fun, \"supportedLocalesOf\",\n+                        Builtins::kListFormatSupportedLocalesOf, 1, false);\n+\n   // Setup %ListFormatPrototype%.\n   Handle<JSObject> prototype(\n       JSObject::cast(list_format_fun->instance_prototype()), isolate());\n \n   // Install the @@toStringTag property on the {prototype}.\n   JSObject::AddProperty(isolate(), prototype, factory()->to_string_tag_symbol(),\n-                        factory()->NewStringFromStaticChars(\"Intl.ListFormat\"),\n+                        factory()->InternalizeUtf8String(\"Intl.ListFormat\"),\n                         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n   SimpleInstallFunction(isolate(), prototype, \"resolvedOptions\",\n@@ -4628,7 +4600,7 @@ void Genesis::InitializeGlobal_harmony_locale() {\n \n   // Install the @@toStringTag property on the {prototype}.\n   JSObject::AddProperty(isolate(), prototype, factory()->to_string_tag_symbol(),\n-                        factory()->NewStringFromAsciiChecked(\"Locale\"),\n+                        factory()->InternalizeUtf8String(\"Intl.Locale\"),\n                         static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n   SimpleInstallFunction(isolate(), prototype, \"toString\",\n@@ -4687,6 +4659,10 @@ void Genesis::InitializeGlobal_harmony_intl_relative_time_format() {\n   relative_time_format_fun->shared()->set_length(0);\n   relative_time_format_fun->shared()->DontAdaptArguments();\n \n+  SimpleInstallFunction(\n+      isolate(), relative_time_format_fun, \"supportedLocalesOf\",\n+      Builtins::kRelativeTimeFormatSupportedLocalesOf, 1, false);\n+\n   // Setup %RelativeTimeFormatPrototype%.\n   Handle<JSObject> prototype(\n       JSObject::cast(relative_time_format_fun->instance_prototype()),\n@@ -4695,7 +4671,7 @@ void Genesis::InitializeGlobal_harmony_intl_relative_time_format() {\n   // Install the @@toStringTag property on the {prototype}.\n   JSObject::AddProperty(\n       isolate(), prototype, factory()->to_string_tag_symbol(),\n-      factory()->NewStringFromStaticChars(\"Intl.RelativeTimeFormat\"),\n+      factory()->InternalizeUtf8String(\"Intl.RelativeTimeFormat\"),\n       static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n \n   SimpleInstallFunction(isolate(), prototype, \"resolvedOptions\",\n@@ -4708,6 +4684,37 @@ void Genesis::InitializeGlobal_harmony_intl_relative_time_format() {\n                         false);\n }\n \n+void Genesis::InitializeGlobal_harmony_intl_segmenter() {\n+  if (!FLAG_harmony_intl_segmenter) return;\n+  Handle<JSObject> intl = Handle<JSObject>::cast(\n+      JSReceiver::GetProperty(\n+          isolate(),\n+          Handle<JSReceiver>(native_context()->global_object(), isolate()),\n+          factory()->InternalizeUtf8String(\"Intl\"))\n+          .ToHandleChecked());\n+\n+  Handle<JSFunction> segmenter_fun = InstallFunction(\n+      isolate(), intl, \"Segmenter\", JS_INTL_SEGMENTER_TYPE, JSSegmenter::kSize,\n+      0, factory()->the_hole_value(), Builtins::kSegmenterConstructor);\n+  segmenter_fun->shared()->set_length(0);\n+  segmenter_fun->shared()->DontAdaptArguments();\n+\n+  SimpleInstallFunction(isolate(), segmenter_fun, \"supportedLocalesOf\",\n+                        Builtins::kSegmenterSupportedLocalesOf, 1, false);\n+\n+  // Setup %SegmenterPrototype%.\n+  Handle<JSObject> prototype(\n+      JSObject::cast(segmenter_fun->instance_prototype()), isolate());\n+\n+  // Install the @@toStringTag property on the {prototype}.\n+  JSObject::AddProperty(isolate(), prototype, factory()->to_string_tag_symbol(),\n+                        factory()->NewStringFromStaticChars(\"Intl.Segmenter\"),\n+                        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+  SimpleInstallFunction(isolate(), prototype, \"resolvedOptions\",\n+                        Builtins::kSegmenterPrototypeResolvedOptions, 0, false);\n+}\n+\n #endif  // V8_INTL_SUPPORT\n \n Handle<JSFunction> Genesis::CreateArrayBuffer(\n@@ -4826,26 +4833,26 @@ bool Genesis::InstallNatives(GlobalContextType context_type) {\n                            Builtins::kPromiseInternalConstructor, 1, true);\n   promise_internal_constructor->shared()->set_native(false);\n   InstallFunction(isolate(), extras_utils, promise_internal_constructor,\n-                  factory()->NewStringFromAsciiChecked(\"createPromise\"));\n+                  factory()->InternalizeUtf8String(\"createPromise\"));\n \n   // v8.rejectPromise(promise, reason)\n   Handle<JSFunction> promise_internal_reject =\n       SimpleCreateFunction(isolate(), factory()->empty_string(),\n                            Builtins::kPromiseInternalReject, 2, true);\n   promise_internal_reject->shared()->set_native(false);\n   InstallFunction(isolate(), extras_utils, promise_internal_reject,\n-                  factory()->NewStringFromAsciiChecked(\"rejectPromise\"));\n+                  factory()->InternalizeUtf8String(\"rejectPromise\"));\n \n   // v8.resolvePromise(promise, resolution)\n   Handle<JSFunction> promise_internal_resolve =\n       SimpleCreateFunction(isolate(), factory()->empty_string(),\n                            Builtins::kPromiseInternalResolve, 2, true);\n   promise_internal_resolve->shared()->set_native(false);\n   InstallFunction(isolate(), extras_utils, promise_internal_resolve,\n-                  factory()->NewStringFromAsciiChecked(\"resolvePromise\"));\n+                  factory()->InternalizeUtf8String(\"resolvePromise\"));\n \n   InstallFunction(isolate(), extras_utils, isolate()->is_promise(),\n-                  factory()->NewStringFromAsciiChecked(\"isPromise\"));\n+                  factory()->InternalizeUtf8String(\"isPromise\"));\n \n   int builtin_index = Natives::GetDebuggerCount();\n   // Only run prologue.js at this point.\n@@ -5708,6 +5715,7 @@ Genesis::Genesis(\n     DCHECK_EQ(0u, context_snapshot_index);\n     // We get here if there was no context snapshot.\n     CreateRoots();\n+    MathRandom::InitializeContext(isolate, native_context());\n     Handle<JSFunction> empty_function = CreateEmptyFunction();\n     CreateSloppyModeFunctionMaps(empty_function);\n     CreateStrictModeFunctionMaps(empty_function);"
        },
        {
            "sha": "4ad02eb83631643b75872ddf0efa1b421ff3a34d",
            "filename": "deps/v8/src/bootstrapper.h",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbootstrapper.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbootstrapper.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbootstrapper.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -18,7 +18,7 @@ namespace internal {\n // (array.js, etc.) to precompiled functions. Instead of mapping\n // names to functions it might make sense to let the JS2C tool\n // generate an index for each native JS file.\n-class SourceCodeCache final BASE_EMBEDDED {\n+class SourceCodeCache final {\n  public:\n   explicit SourceCodeCache(Script::Type type) : type_(type), cache_(nullptr) {}\n \n@@ -122,8 +122,7 @@ class Bootstrapper final {\n   DISALLOW_COPY_AND_ASSIGN(Bootstrapper);\n };\n \n-\n-class BootstrapperActive final BASE_EMBEDDED {\n+class BootstrapperActive final {\n  public:\n   explicit BootstrapperActive(Bootstrapper* bootstrapper)\n       : bootstrapper_(bootstrapper) {"
        },
        {
            "sha": "92cb6df45d9da06c319dad8682658d111237283f",
            "filename": "deps/v8/src/builtins/arm/builtins-arm.cc",
            "status": "modified",
            "additions": 73,
            "deletions": 85,
            "changes": 158,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -60,8 +60,6 @@ void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n \n   // Run the native code for the InternalArray function called as a normal\n   // function.\n-  // tail call a stub\n-  __ LoadRoot(r2, Heap::kUndefinedValueRootIndex);\n   __ Jump(BUILTIN_CODE(masm->isolate(), InternalArrayConstructorImpl),\n           RelocInfo::CODE_TARGET);\n }\n@@ -122,7 +120,7 @@ void Generate_JSBuiltinsConstructStubHelper(MacroAssembler* masm) {\n     __ SmiUntag(r0);\n \n     // The receiver for the builtin/api call.\n-    __ PushRoot(Heap::kTheHoleValueRootIndex);\n+    __ PushRoot(RootIndex::kTheHoleValue);\n \n     // Set up pointer to last argument.\n     __ add(r4, fp, Operand(StandardFrameConstants::kCallerSPOffset));\n@@ -169,6 +167,20 @@ void Generate_JSBuiltinsConstructStubHelper(MacroAssembler* masm) {\n   __ Jump(lr);\n }\n \n+void Generate_StackOverflowCheck(MacroAssembler* masm, Register num_args,\n+                                 Register scratch, Label* stack_overflow) {\n+  // Check the stack for overflow. We are not trying to catch\n+  // interruptions (e.g. debug break and preemption) here, so the \"real stack\n+  // limit\" is checked.\n+  __ LoadRoot(scratch, RootIndex::kRealStackLimit);\n+  // Make scratch the space we have left. The stack might already be overflowed\n+  // here which will cause scratch to become negative.\n+  __ sub(scratch, sp, scratch);\n+  // Check if the arguments will overflow the stack.\n+  __ cmp(scratch, Operand(num_args, LSL, kPointerSizeLog2));\n+  __ b(le, stack_overflow);  // Signed comparison.\n+}\n+\n }  // namespace\n \n // The construct stub for ES5 constructor functions and ES6 class constructors.\n@@ -188,7 +200,7 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n     Label post_instantiation_deopt_entry, not_create_implicit_receiver;\n \n     // Preserve the incoming parameters on the stack.\n-    __ LoadRoot(r4, Heap::kTheHoleValueRootIndex);\n+    __ LoadRoot(r4, RootIndex::kTheHoleValue);\n     __ SmiTag(r0);\n     __ Push(cp, r0, r1, r4, r3);\n \n@@ -214,7 +226,7 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n \n     // Else: use TheHoleValue as receiver for constructor call\n     __ bind(&not_create_implicit_receiver);\n-    __ LoadRoot(r0, Heap::kTheHoleValueRootIndex);\n+    __ LoadRoot(r0, RootIndex::kTheHoleValue);\n \n     // ----------- S t a t e -------------\n     //  --                          r0: receiver\n@@ -253,6 +265,19 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n     // Set up pointer to last argument.\n     __ add(r4, fp, Operand(StandardFrameConstants::kCallerSPOffset));\n \n+    Label enough_stack_space, stack_overflow;\n+    Generate_StackOverflowCheck(masm, r0, r5, &stack_overflow);\n+    __ b(&enough_stack_space);\n+\n+    __ bind(&stack_overflow);\n+    // Restore the context from the frame.\n+    __ ldr(cp, MemOperand(fp, ConstructFrameConstants::kContextOffset));\n+    __ CallRuntime(Runtime::kThrowStackOverflow);\n+    // Unreachable code.\n+    __ bkpt(0);\n+\n+    __ bind(&enough_stack_space);\n+\n     // Copy arguments and receiver to the expression stack.\n     Label loop, entry;\n     __ mov(r5, r0);\n@@ -303,7 +328,7 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n     Label use_receiver, do_throw, leave_frame;\n \n     // If the result is undefined, we jump out to using the implicit receiver.\n-    __ JumpIfRoot(r0, Heap::kUndefinedValueRootIndex, &use_receiver);\n+    __ JumpIfRoot(r0, RootIndex::kUndefinedValue, &use_receiver);\n \n     // Otherwise we do a smi check and fall through to check if the return value\n     // is a valid receiver.\n@@ -325,7 +350,7 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n     // on-stack receiver as the result.\n     __ bind(&use_receiver);\n     __ ldr(r0, MemOperand(sp, 0 * kPointerSize));\n-    __ JumpIfRoot(r0, Heap::kTheHoleValueRootIndex, &do_throw);\n+    __ JumpIfRoot(r0, RootIndex::kTheHoleValue, &do_throw);\n \n     __ bind(&leave_frame);\n     // Restore smi-tagged arguments count from the frame.\n@@ -399,7 +424,7 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   // Check the stack for overflow. We are not trying to catch interruptions\n   // (i.e. debug break and preemption) here, so check the \"real stack limit\".\n   Label stack_overflow;\n-  __ CompareRoot(sp, Heap::kRealStackLimitRootIndex);\n+  __ CompareRoot(sp, RootIndex::kRealStackLimit);\n   __ b(lo, &stack_overflow);\n \n   // Push receiver.\n@@ -466,7 +491,7 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n     FrameAndConstantPoolScope scope(masm, StackFrame::INTERNAL);\n     __ Push(r1, r4);\n     // Push hole as receiver since we do not use it for stepping.\n-    __ PushRoot(Heap::kTheHoleValueRootIndex);\n+    __ PushRoot(RootIndex::kTheHoleValue);\n     __ CallRuntime(Runtime::kDebugOnFunctionCall);\n     __ Pop(r1);\n     __ ldr(r4, FieldMemOperand(r1, JSGeneratorObject::kFunctionOffset));\n@@ -497,21 +522,6 @@ void Builtins::Generate_ConstructedNonConstructable(MacroAssembler* masm) {\n   __ CallRuntime(Runtime::kThrowConstructedNonConstructable);\n }\n \n-static void Generate_StackOverflowCheck(MacroAssembler* masm, Register num_args,\n-                                        Register scratch,\n-                                        Label* stack_overflow) {\n-  // Check the stack for overflow. We are not trying to catch\n-  // interruptions (e.g. debug break and preemption) here, so the \"real stack\n-  // limit\" is checked.\n-  __ LoadRoot(scratch, Heap::kRealStackLimitRootIndex);\n-  // Make scratch the space we have left. The stack might already be overflowed\n-  // here which will cause scratch to become negative.\n-  __ sub(scratch, sp, scratch);\n-  // Check if the arguments will overflow the stack.\n-  __ cmp(scratch, Operand(num_args, LSL, kPointerSizeLog2));\n-  __ b(le, stack_overflow);  // Signed comparison.\n-}\n-\n static void Generate_JSEntryTrampolineHelper(MacroAssembler* masm,\n                                              bool is_construct) {\n   // Called from Generate_JS_Entry\n@@ -573,7 +583,7 @@ static void Generate_JSEntryTrampolineHelper(MacroAssembler* masm,\n \n     // Initialize all JavaScript callee-saved registers, since they will be seen\n     // by the garbage collector as part of handlers.\n-    __ LoadRoot(r4, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(r4, RootIndex::kUndefinedValue);\n     __ mov(r5, Operand(r4));\n     __ mov(r6, Operand(r4));\n     __ mov(r8, Operand(r4));\n@@ -878,7 +888,7 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n     // Do a stack check to ensure we don't go over the limit.\n     Label ok;\n     __ sub(r9, sp, Operand(r4));\n-    __ LoadRoot(r2, Heap::kRealStackLimitRootIndex);\n+    __ LoadRoot(r2, RootIndex::kRealStackLimit);\n     __ cmp(r9, Operand(r2));\n     __ b(hs, &ok);\n     __ CallRuntime(Runtime::kThrowStackOverflow);\n@@ -887,7 +897,7 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n     // If ok, push undefined as the initial value for all register file entries.\n     Label loop_header;\n     Label loop_check;\n-    __ LoadRoot(r9, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(r9, RootIndex::kUndefinedValue);\n     __ b(&loop_check, al);\n     __ bind(&loop_header);\n     // TODO(rmcilroy): Consider doing more than one push per loop iteration.\n@@ -907,7 +917,7 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n   __ str(r3, MemOperand(fp, r9, LSL, kPointerSizeLog2), ne);\n \n   // Load accumulator with undefined.\n-  __ LoadRoot(kInterpreterAccumulatorRegister, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(kInterpreterAccumulatorRegister, RootIndex::kUndefinedValue);\n \n   // Load the dispatch table into a register and dispatch to the bytecode\n   // handler at the current bytecode offset.\n@@ -987,7 +997,7 @@ void Builtins::Generate_InterpreterPushArgsThenCallImpl(\n \n   // Push \"undefined\" as the receiver arg if we need to.\n   if (receiver_mode == ConvertReceiverMode::kNullOrUndefined) {\n-    __ PushRoot(Heap::kUndefinedValueRootIndex);\n+    __ PushRoot(RootIndex::kUndefinedValue);\n     __ mov(r3, r0);  // Argument count is correct.\n   }\n \n@@ -1201,7 +1211,7 @@ void Builtins::Generate_InstantiateAsmJs(MacroAssembler* masm) {\n         __ push(r4);\n       }\n       for (int i = 0; i < 3 - j; ++i) {\n-        __ PushRoot(Heap::kUndefinedValueRootIndex);\n+        __ PushRoot(RootIndex::kUndefinedValue);\n       }\n       if (j < 3) {\n         __ jmp(&args_done);\n@@ -1302,15 +1312,10 @@ void Builtins::Generate_NotifyDeoptimized(MacroAssembler* masm) {\n   __ Ret();\n }\n \n-static void Generate_OnStackReplacementHelper(MacroAssembler* masm,\n-                                              bool has_handler_frame) {\n+void Builtins::Generate_InterpreterOnStackReplacement(MacroAssembler* masm) {\n   // Lookup the function in the JavaScript frame.\n-  if (has_handler_frame) {\n-    __ ldr(r0, MemOperand(fp, StandardFrameConstants::kCallerFPOffset));\n-    __ ldr(r0, MemOperand(r0, JavaScriptFrameConstants::kFunctionOffset));\n-  } else {\n-    __ ldr(r0, MemOperand(fp, JavaScriptFrameConstants::kFunctionOffset));\n-  }\n+  __ ldr(r0, MemOperand(fp, StandardFrameConstants::kCallerFPOffset));\n+  __ ldr(r0, MemOperand(r0, JavaScriptFrameConstants::kFunctionOffset));\n \n   {\n     FrameAndConstantPoolScope scope(masm, StackFrame::INTERNAL);\n@@ -1327,11 +1332,9 @@ static void Generate_OnStackReplacementHelper(MacroAssembler* masm,\n \n   __ bind(&skip);\n \n-  // Drop any potential handler frame that is be sitting on top of the actual\n+  // Drop the handler frame that is be sitting on top of the actual\n   // JavaScript frame. This is the case then OSR is triggered from bytecode.\n-  if (has_handler_frame) {\n-    __ LeaveFrame(StackFrame::STUB);\n-  }\n+  __ LeaveFrame(StackFrame::STUB);\n \n   // Load deoptimization data from the code object.\n   // <deopt_data> = <code>[#deoptimization_data_offset]\n@@ -1354,14 +1357,6 @@ static void Generate_OnStackReplacementHelper(MacroAssembler* masm,\n   }\n }\n \n-void Builtins::Generate_OnStackReplacement(MacroAssembler* masm) {\n-  Generate_OnStackReplacementHelper(masm, false);\n-}\n-\n-void Builtins::Generate_InterpreterOnStackReplacement(MacroAssembler* masm) {\n-  Generate_OnStackReplacementHelper(masm, true);\n-}\n-\n // static\n void Builtins::Generate_FunctionPrototypeApply(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n@@ -1375,7 +1370,7 @@ void Builtins::Generate_FunctionPrototypeApply(MacroAssembler* masm) {\n   // arguments from the stack (including the receiver), and push thisArg (if\n   // present) instead.\n   {\n-    __ LoadRoot(r5, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(r5, RootIndex::kUndefinedValue);\n     __ mov(r2, r5);\n     __ ldr(r1, MemOperand(sp, r0, LSL, kPointerSizeLog2));  // receiver\n     __ sub(r4, r0, Operand(1), SetCC);\n@@ -1398,8 +1393,8 @@ void Builtins::Generate_FunctionPrototypeApply(MacroAssembler* masm) {\n \n   // 3. Tail call with no arguments if argArray is null or undefined.\n   Label no_arguments;\n-  __ JumpIfRoot(r2, Heap::kNullValueRootIndex, &no_arguments);\n-  __ JumpIfRoot(r2, Heap::kUndefinedValueRootIndex, &no_arguments);\n+  __ JumpIfRoot(r2, RootIndex::kNullValue, &no_arguments);\n+  __ JumpIfRoot(r2, RootIndex::kUndefinedValue, &no_arguments);\n \n   // 4a. Apply the receiver to the given argArray.\n   __ Jump(BUILTIN_CODE(masm->isolate(), CallWithArrayLike),\n@@ -1422,7 +1417,7 @@ void Builtins::Generate_FunctionPrototypeCall(MacroAssembler* masm) {\n     Label done;\n     __ cmp(r0, Operand::Zero());\n     __ b(ne, &done);\n-    __ PushRoot(Heap::kUndefinedValueRootIndex);\n+    __ PushRoot(RootIndex::kUndefinedValue);\n     __ add(r0, r0, Operand(1));\n     __ bind(&done);\n   }\n@@ -1471,7 +1466,7 @@ void Builtins::Generate_ReflectApply(MacroAssembler* masm) {\n   // remove all arguments from the stack (including the receiver), and push\n   // thisArgument (if present) instead.\n   {\n-    __ LoadRoot(r1, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(r1, RootIndex::kUndefinedValue);\n     __ mov(r5, r1);\n     __ mov(r2, r1);\n     __ sub(r4, r0, Operand(1), SetCC);\n@@ -1513,7 +1508,7 @@ void Builtins::Generate_ReflectConstruct(MacroAssembler* masm) {\n   // arguments from the stack (including the receiver), and push thisArgument\n   // (if present) instead.\n   {\n-    __ LoadRoot(r1, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(r1, RootIndex::kUndefinedValue);\n     __ mov(r2, r1);\n     __ str(r2, MemOperand(sp, r0, LSL, kPointerSizeLog2));  // receiver\n     __ sub(r4, r0, Operand(1), SetCC);\n@@ -1600,34 +1595,21 @@ void Builtins::Generate_CallOrConstructVarargs(MacroAssembler* masm,\n     __ bind(&ok);\n   }\n \n-  // Check for stack overflow.\n-  {\n-    // Check the stack for overflow. We are not trying to catch interruptions\n-    // (i.e. debug break and preemption) here, so check the \"real stack limit\".\n-    Label done;\n-    __ LoadRoot(scratch, Heap::kRealStackLimitRootIndex);\n-    // The stack might already be overflowed here which will cause 'scratch' to\n-    // become negative.\n-    __ sub(scratch, sp, scratch);\n-    // Check if the arguments will overflow the stack.\n-    __ cmp(scratch, Operand(r4, LSL, kPointerSizeLog2));\n-    __ b(gt, &done);  // Signed comparison.\n-    __ TailCallRuntime(Runtime::kThrowStackOverflow);\n-    __ bind(&done);\n-  }\n+  Label stack_overflow;\n+  Generate_StackOverflowCheck(masm, r4, scratch, &stack_overflow);\n \n   // Push arguments onto the stack (thisArgument is already on the stack).\n   {\n     __ mov(r6, Operand(0));\n-    __ LoadRoot(r5, Heap::kTheHoleValueRootIndex);\n+    __ LoadRoot(r5, RootIndex::kTheHoleValue);\n     Label done, loop;\n     __ bind(&loop);\n     __ cmp(r6, r4);\n     __ b(eq, &done);\n     __ add(scratch, r2, Operand(r6, LSL, kPointerSizeLog2));\n     __ ldr(scratch, FieldMemOperand(scratch, FixedArray::kHeaderSize));\n     __ cmp(scratch, r5);\n-    __ LoadRoot(scratch, Heap::kUndefinedValueRootIndex, eq);\n+    __ LoadRoot(scratch, RootIndex::kUndefinedValue, eq);\n     __ Push(scratch);\n     __ add(r6, r6, Operand(1));\n     __ b(&loop);\n@@ -1637,6 +1619,9 @@ void Builtins::Generate_CallOrConstructVarargs(MacroAssembler* masm,\n \n   // Tail-call to the actual Call or Construct builtin.\n   __ Jump(code, RelocInfo::CODE_TARGET);\n+\n+  __ bind(&stack_overflow);\n+  __ TailCallRuntime(Runtime::kThrowStackOverflow);\n }\n \n // static\n@@ -1771,9 +1756,8 @@ void Builtins::Generate_CallFunction(MacroAssembler* masm,\n       __ b(hs, &done_convert);\n       if (mode != ConvertReceiverMode::kNotNullOrUndefined) {\n         Label convert_global_proxy;\n-        __ JumpIfRoot(r3, Heap::kUndefinedValueRootIndex,\n-                      &convert_global_proxy);\n-        __ JumpIfNotRoot(r3, Heap::kNullValueRootIndex, &convert_to_object);\n+        __ JumpIfRoot(r3, RootIndex::kUndefinedValue, &convert_global_proxy);\n+        __ JumpIfNotRoot(r3, RootIndex::kNullValue, &convert_to_object);\n         __ bind(&convert_global_proxy);\n         {\n           // Patch receiver to global proxy.\n@@ -1859,8 +1843,8 @@ void Generate_PushBoundArguments(MacroAssembler* masm) {\n       // Check the stack for overflow. We are not trying to catch interruptions\n       // (i.e. debug break and preemption) here, so check the \"real stack\n       // limit\".\n-      __ CompareRoot(sp, Heap::kRealStackLimitRootIndex);\n-      __ b(gt, &done);  // Signed comparison.\n+      __ CompareRoot(sp, RootIndex::kRealStackLimit);\n+      __ b(hs, &done);\n       // Restore the stack pointer.\n       __ add(sp, sp, Operand(r4, LSL, kPointerSizeLog2));\n       {\n@@ -1987,7 +1971,7 @@ void Builtins::Generate_ConstructFunction(MacroAssembler* masm) {\n \n   // Calling convention for function specific ConstructStubs require\n   // r2 to contain either an AllocationSite or undefined.\n-  __ LoadRoot(r2, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(r2, RootIndex::kUndefinedValue);\n \n   Label call_generic_stub;\n \n@@ -2165,7 +2149,7 @@ void Builtins::Generate_ArgumentsAdaptorTrampoline(MacroAssembler* masm) {\n     // r1: function\n     // r2: expected number of arguments\n     // r3: new target (passed through to callee)\n-    __ LoadRoot(scratch, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(scratch, RootIndex::kUndefinedValue);\n     __ sub(r4, fp, Operand(r2, LSL, kPointerSizeLog2));\n     // Adjust for frame.\n     __ sub(r4, r4,\n@@ -2331,7 +2315,7 @@ void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n \n   // Check result for exception sentinel.\n   Label exception_returned;\n-  __ CompareRoot(r0, Heap::kExceptionRootIndex);\n+  __ CompareRoot(r0, RootIndex::kException);\n   __ b(eq, &exception_returned);\n \n   // Check that there is no pending exception, otherwise we\n@@ -2342,7 +2326,7 @@ void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n         IsolateAddressId::kPendingExceptionAddress, masm->isolate());\n     __ Move(r3, pending_exception_address);\n     __ ldr(r3, MemOperand(r3));\n-    __ CompareRoot(r3, Heap::kTheHoleValueRootIndex);\n+    __ CompareRoot(r3, RootIndex::kTheHoleValue);\n     // Cannot use check here as it attempts to generate call into runtime.\n     __ b(eq, &okay);\n     __ stop(\"Unexpected pending exception\");\n@@ -2401,9 +2385,9 @@ void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n   __ str(cp, MemOperand(fp, StandardFrameConstants::kContextOffset), ne);\n \n   // Reset the masking register. This is done independent of the underlying\n-  // feature flag {FLAG_branch_load_poisoning} to make the snapshot work with\n-  // both configurations. It is safe to always do this, because the underlying\n-  // register is caller-saved and can be arbitrarily clobbered.\n+  // feature flag {FLAG_untrusted_code_mitigations} to make the snapshot work\n+  // with both configurations. It is safe to always do this, because the\n+  // underlying register is caller-saved and can be arbitrarily clobbered.\n   __ ResetSpeculationPoisonRegister();\n \n   // Compute the handler entry address and jump to it.\n@@ -2585,6 +2569,10 @@ namespace {\n \n void GenerateInternalArrayConstructorCase(MacroAssembler* masm,\n                                           ElementsKind kind) {\n+  // Load undefined into the allocation site parameter as required by\n+  // ArrayNArgumentsConstructor.\n+  __ LoadRoot(kJavaScriptCallExtraArg1Register, RootIndex::kUndefinedValue);\n+\n   __ cmp(r0, Operand(1));\n \n   __ Jump(CodeFactory::InternalArrayNoArgumentConstructor(masm->isolate(), kind)"
        },
        {
            "sha": "0d51d9decf478d1016570a9e50aea37a54a7a4f6",
            "filename": "deps/v8/src/builtins/arm64/builtins-arm64.cc",
            "status": "modified",
            "additions": 73,
            "deletions": 84,
            "changes": 157,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -55,7 +55,6 @@ void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n \n   // Run the native code for the InternalArray function called as a normal\n   // function.\n-  __ LoadRoot(x2, Heap::kUndefinedValueRootIndex);\n   __ Jump(BUILTIN_CODE(masm->isolate(), InternalArrayConstructorImpl),\n           RelocInfo::CODE_TARGET);\n }\n@@ -129,7 +128,7 @@ void Generate_JSBuiltinsConstructStubHelper(MacroAssembler* masm) {\n     __ Claim(slot_count);\n \n     // Preserve the incoming parameters on the stack.\n-    __ LoadRoot(x10, Heap::kTheHoleValueRootIndex);\n+    __ LoadRoot(x10, RootIndex::kTheHoleValue);\n \n     // Compute a pointer to the slot immediately above the location on the\n     // stack to which arguments will be later copied.\n@@ -195,6 +194,24 @@ void Generate_JSBuiltinsConstructStubHelper(MacroAssembler* masm) {\n   __ Ret();\n }\n \n+static void Generate_StackOverflowCheck(MacroAssembler* masm, Register num_args,\n+                                        Label* stack_overflow) {\n+  UseScratchRegisterScope temps(masm);\n+  Register scratch = temps.AcquireX();\n+\n+  // Check the stack for overflow.\n+  // We are not trying to catch interruptions (e.g. debug break and\n+  // preemption) here, so the \"real stack limit\" is checked.\n+  Label enough_stack_space;\n+  __ LoadRoot(scratch, RootIndex::kRealStackLimit);\n+  // Make scratch the space we have left. The stack might already be overflowed\n+  // here which will cause scratch to become negative.\n+  __ Sub(scratch, sp, scratch);\n+  // Check if the arguments will overflow the stack.\n+  __ Cmp(scratch, Operand(num_args, LSL, kPointerSizeLog2));\n+  __ B(le, stack_overflow);\n+}\n+\n }  // namespace\n \n // The construct stub for ES5 constructor functions and ES6 class constructors.\n@@ -249,7 +266,7 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n \n     // Else: use TheHoleValue as receiver for constructor call\n     __ Bind(&not_create_implicit_receiver);\n-    __ LoadRoot(x0, Heap::kTheHoleValueRootIndex);\n+    __ LoadRoot(x0, RootIndex::kTheHoleValue);\n \n     // ----------- S t a t e -------------\n     //  --                          x0: receiver\n@@ -303,6 +320,19 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n     // slots for the arguments. If the number of arguments was odd, the last\n     // argument will overwrite one of the receivers pushed above.\n     __ Bic(x10, x12, 1);\n+\n+    // Check if we have enough stack space to push all arguments.\n+    Label enough_stack_space, stack_overflow;\n+    Generate_StackOverflowCheck(masm, x10, &stack_overflow);\n+    __ B(&enough_stack_space);\n+\n+    __ Bind(&stack_overflow);\n+    // Restore the context from the frame.\n+    __ Ldr(cp, MemOperand(fp, ConstructFrameConstants::kContextOffset));\n+    __ CallRuntime(Runtime::kThrowStackOverflow);\n+    __ Unreachable();\n+\n+    __ Bind(&enough_stack_space);\n     __ Claim(x10);\n \n     // Copy the arguments.\n@@ -342,7 +372,7 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n     Label use_receiver, do_throw, leave_frame;\n \n     // If the result is undefined, we jump out to using the implicit receiver.\n-    __ CompareRoot(x0, Heap::kUndefinedValueRootIndex);\n+    __ CompareRoot(x0, RootIndex::kUndefinedValue);\n     __ B(eq, &use_receiver);\n \n     // Otherwise we do a smi check and fall through to check if the return value\n@@ -364,7 +394,7 @@ void Builtins::Generate_JSConstructStubGeneric(MacroAssembler* masm) {\n     // on-stack receiver as the result.\n     __ Bind(&use_receiver);\n     __ Peek(x0, 0 * kPointerSize);\n-    __ CompareRoot(x0, Heap::kTheHoleValueRootIndex);\n+    __ CompareRoot(x0, RootIndex::kTheHoleValue);\n     __ B(eq, &do_throw);\n \n     __ Bind(&leave_frame);\n@@ -425,7 +455,7 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   // Check the stack for overflow. We are not trying to catch interruptions\n   // (i.e. debug break and preemption) here, so check the \"real stack limit\".\n   Label stack_overflow;\n-  __ CompareRoot(sp, Heap::kRealStackLimitRootIndex);\n+  __ CompareRoot(sp, RootIndex::kRealStackLimit);\n   __ B(lo, &stack_overflow);\n \n   // Get number of arguments for generator function.\n@@ -508,7 +538,7 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   {\n     FrameScope scope(masm, StackFrame::INTERNAL);\n     // Push hole as receiver since we do not use it for stepping.\n-    __ LoadRoot(x5, Heap::kTheHoleValueRootIndex);\n+    __ LoadRoot(x5, RootIndex::kTheHoleValue);\n     __ Push(x1, padreg, x4, x5);\n     __ CallRuntime(Runtime::kDebugOnFunctionCall);\n     __ Pop(padreg, x1);\n@@ -534,24 +564,6 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   }\n }\n \n-static void Generate_StackOverflowCheck(MacroAssembler* masm, Register num_args,\n-                                        Label* stack_overflow) {\n-  UseScratchRegisterScope temps(masm);\n-  Register scratch = temps.AcquireX();\n-\n-  // Check the stack for overflow.\n-  // We are not trying to catch interruptions (e.g. debug break and\n-  // preemption) here, so the \"real stack limit\" is checked.\n-  Label enough_stack_space;\n-  __ LoadRoot(scratch, Heap::kRealStackLimitRootIndex);\n-  // Make scratch the space we have left. The stack might already be overflowed\n-  // here which will cause scratch to become negative.\n-  __ Sub(scratch, sp, scratch);\n-  // Check if the arguments will overflow the stack.\n-  __ Cmp(scratch, Operand(num_args, LSL, kPointerSizeLog2));\n-  __ B(le, stack_overflow);\n-}\n-\n // Input:\n //   x0: new.target.\n //   x1: function.\n@@ -639,7 +651,7 @@ static void Generate_JSEntryTrampolineHelper(MacroAssembler* masm,\n     // Initialize all JavaScript callee-saved registers, since they will be seen\n     // by the garbage collector as part of handlers.\n     // The original values have been saved in JSEntryStub::GenerateBody().\n-    __ LoadRoot(x19, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(x19, RootIndex::kUndefinedValue);\n     __ Mov(x20, x19);\n     __ Mov(x21, x19);\n     __ Mov(x22, x19);\n@@ -957,7 +969,7 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n     // Do a stack check to ensure we don't go over the limit.\n     Label ok;\n     __ Sub(x10, sp, Operand(x11));\n-    __ CompareRoot(x10, Heap::kRealStackLimitRootIndex);\n+    __ CompareRoot(x10, RootIndex::kRealStackLimit);\n     __ B(hs, &ok);\n     __ CallRuntime(Runtime::kThrowStackOverflow);\n     __ Bind(&ok);\n@@ -966,7 +978,7 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n     // Note: there should always be at least one stack slot for the return\n     // register in the register file.\n     Label loop_header;\n-    __ LoadRoot(x10, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(x10, RootIndex::kUndefinedValue);\n     __ Lsr(x11, x11, kPointerSizeLog2);\n     // Round up the number of registers to a multiple of 2, to align the stack\n     // to 16 bytes.\n@@ -988,7 +1000,7 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n   __ Bind(&no_incoming_new_target_or_generator_register);\n \n   // Load accumulator with undefined.\n-  __ LoadRoot(kInterpreterAccumulatorRegister, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(kInterpreterAccumulatorRegister, RootIndex::kUndefinedValue);\n \n   // Load the dispatch table into a register and dispatch to the bytecode\n   // handler at the current bytecode offset.\n@@ -1081,7 +1093,7 @@ static void Generate_InterpreterPushArgs(MacroAssembler* masm,\n   if (receiver_mode == ConvertReceiverMode::kNullOrUndefined) {\n     // Store \"undefined\" as the receiver arg if we need to.\n     Register receiver = x14;\n-    __ LoadRoot(receiver, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(receiver, RootIndex::kUndefinedValue);\n     __ SlotAddress(stack_addr, num_args);\n     __ Str(receiver, MemOperand(stack_addr));\n     __ Mov(slots_to_copy, num_args);\n@@ -1300,7 +1312,7 @@ void Builtins::Generate_InstantiateAsmJs(MacroAssembler* masm) {\n     Register scratch1 = x12;\n     Register scratch2 = x13;\n     Register scratch3 = x14;\n-    __ LoadRoot(undef, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(undef, RootIndex::kUndefinedValue);\n \n     Label at_least_one_arg;\n     Label three_args;\n@@ -1452,15 +1464,10 @@ void Builtins::Generate_NotifyDeoptimized(MacroAssembler* masm) {\n   __ Ret();\n }\n \n-static void Generate_OnStackReplacementHelper(MacroAssembler* masm,\n-                                              bool has_handler_frame) {\n+void Builtins::Generate_InterpreterOnStackReplacement(MacroAssembler* masm) {\n   // Lookup the function in the JavaScript frame.\n-  if (has_handler_frame) {\n-    __ Ldr(x0, MemOperand(fp, StandardFrameConstants::kCallerFPOffset));\n-    __ Ldr(x0, MemOperand(x0, JavaScriptFrameConstants::kFunctionOffset));\n-  } else {\n-    __ Ldr(x0, MemOperand(fp, JavaScriptFrameConstants::kFunctionOffset));\n-  }\n+  __ Ldr(x0, MemOperand(fp, StandardFrameConstants::kCallerFPOffset));\n+  __ Ldr(x0, MemOperand(x0, JavaScriptFrameConstants::kFunctionOffset));\n \n   {\n     FrameScope scope(masm, StackFrame::INTERNAL);\n@@ -1476,11 +1483,9 @@ static void Generate_OnStackReplacementHelper(MacroAssembler* masm,\n \n   __ Bind(&skip);\n \n-  // Drop any potential handler frame that is be sitting on top of the actual\n+  // Drop the handler frame that is be sitting on top of the actual\n   // JavaScript frame. This is the case then OSR is triggered from bytecode.\n-  if (has_handler_frame) {\n-    __ LeaveFrame(StackFrame::STUB);\n-  }\n+  __ LeaveFrame(StackFrame::STUB);\n \n   // Load deoptimization data from the code object.\n   // <deopt_data> = <code>[#deoptimization_data_offset]\n@@ -1501,14 +1506,6 @@ static void Generate_OnStackReplacementHelper(MacroAssembler* masm,\n   __ Ret();\n }\n \n-void Builtins::Generate_OnStackReplacement(MacroAssembler* masm) {\n-  Generate_OnStackReplacementHelper(masm, false);\n-}\n-\n-void Builtins::Generate_InterpreterOnStackReplacement(MacroAssembler* masm) {\n-  Generate_OnStackReplacementHelper(masm, true);\n-}\n-\n // static\n void Builtins::Generate_FunctionPrototypeApply(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n@@ -1526,8 +1523,8 @@ void Builtins::Generate_FunctionPrototypeApply(MacroAssembler* masm) {\n   Register undefined_value = x3;\n   Register null_value = x4;\n \n-  __ LoadRoot(undefined_value, Heap::kUndefinedValueRootIndex);\n-  __ LoadRoot(null_value, Heap::kNullValueRootIndex);\n+  __ LoadRoot(undefined_value, RootIndex::kUndefinedValue);\n+  __ LoadRoot(null_value, RootIndex::kNullValue);\n \n   // 1. Load receiver into x1, argArray into x2 (if present), remove all\n   // arguments from the stack (including the receiver), and push thisArg (if\n@@ -1609,7 +1606,7 @@ void Builtins::Generate_FunctionPrototypeCall(MacroAssembler* masm) {\n     Label non_zero;\n     Register scratch = x10;\n     __ Cbnz(argc, &non_zero);\n-    __ LoadRoot(scratch, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(scratch, RootIndex::kUndefinedValue);\n     // Overwrite receiver with undefined, which will be the new receiver.\n     // We do not need to overwrite the padding slot above it with anything.\n     __ Poke(scratch, 0);\n@@ -1666,7 +1663,7 @@ void Builtins::Generate_ReflectApply(MacroAssembler* masm) {\n   Register this_argument = x4;\n   Register undefined_value = x3;\n \n-  __ LoadRoot(undefined_value, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(undefined_value, RootIndex::kUndefinedValue);\n \n   // 1. Load target into x1 (if present), argumentsList into x2 (if present),\n   // remove all arguments from the stack (including the receiver), and push\n@@ -1743,7 +1740,7 @@ void Builtins::Generate_ReflectConstruct(MacroAssembler* masm) {\n   Register new_target = x3;\n   Register undefined_value = x4;\n \n-  __ LoadRoot(undefined_value, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(undefined_value, RootIndex::kUndefinedValue);\n \n   // 1. Load target into x1 (if present), argumentsList into x2 (if present),\n   // new.target into x3 (if present, otherwise use target), remove all\n@@ -1933,21 +1930,8 @@ void Builtins::Generate_CallOrConstructVarargs(MacroAssembler* masm,\n   Register argc = x0;\n   Register len = x4;\n \n-  // Check for stack overflow.\n-  {\n-    // Check the stack for overflow. We are not trying to catch interruptions\n-    // (i.e. debug break and preemption) here, so check the \"real stack limit\".\n-    Label done;\n-    __ LoadRoot(x10, Heap::kRealStackLimitRootIndex);\n-    // Make x10 the space we have left. The stack might already be overflowed\n-    // here which will cause x10 to become negative.\n-    __ Sub(x10, sp, x10);\n-    // Check if the arguments will overflow the stack.\n-    __ Cmp(x10, Operand(len, LSL, kPointerSizeLog2));\n-    __ B(gt, &done);  // Signed comparison.\n-    __ TailCallRuntime(Runtime::kThrowStackOverflow);\n-    __ Bind(&done);\n-  }\n+  Label stack_overflow;\n+  Generate_StackOverflowCheck(masm, len, &stack_overflow);\n \n   // Skip argument setup if we don't need to push any varargs.\n   Label done;\n@@ -1963,8 +1947,8 @@ void Builtins::Generate_CallOrConstructVarargs(MacroAssembler* masm,\n     Register undefined_value = x12;\n     Register scratch = x13;\n     __ Add(src, arguments_list, FixedArray::kHeaderSize - kHeapObjectTag);\n-    __ LoadRoot(the_hole_value, Heap::kTheHoleValueRootIndex);\n-    __ LoadRoot(undefined_value, Heap::kUndefinedValueRootIndex);\n+    __ LoadRoot(the_hole_value, RootIndex::kTheHoleValue);\n+    __ LoadRoot(undefined_value, RootIndex::kUndefinedValue);\n     // We do not use the CompareRoot macro as it would do a LoadRoot behind the\n     // scenes and we want to avoid that in a loop.\n     // TODO(all): Consider using Ldp and Stp.\n@@ -1980,6 +1964,9 @@ void Builtins::Generate_CallOrConstructVarargs(MacroAssembler* masm,\n \n   // Tail-call to the actual Call or Construct builtin.\n   __ Jump(code, RelocInfo::CODE_TARGET);\n+\n+  __ bind(&stack_overflow);\n+  __ TailCallRuntime(Runtime::kThrowStackOverflow);\n }\n \n // static\n@@ -2121,9 +2108,8 @@ void Builtins::Generate_CallFunction(MacroAssembler* masm,\n       __ B(hs, &done_convert);\n       if (mode != ConvertReceiverMode::kNotNullOrUndefined) {\n         Label convert_global_proxy;\n-        __ JumpIfRoot(x3, Heap::kUndefinedValueRootIndex,\n-                      &convert_global_proxy);\n-        __ JumpIfNotRoot(x3, Heap::kNullValueRootIndex, &convert_to_object);\n+        __ JumpIfRoot(x3, RootIndex::kUndefinedValue, &convert_global_proxy);\n+        __ JumpIfNotRoot(x3, RootIndex::kNullValue, &convert_to_object);\n         __ Bind(&convert_global_proxy);\n         {\n           // Patch receiver to global proxy.\n@@ -2211,13 +2197,13 @@ void Generate_PushBoundArguments(MacroAssembler* masm) {\n       // (i.e. debug break and preemption) here, so check the \"real stack\n       // limit\".\n       Label done;\n-      __ LoadRoot(x10, Heap::kRealStackLimitRootIndex);\n+      __ LoadRoot(x10, RootIndex::kRealStackLimit);\n       // Make x10 the space we have left. The stack might already be overflowed\n       // here which will cause x10 to become negative.\n       __ Sub(x10, sp, x10);\n       // Check if the arguments will overflow the stack.\n       __ Cmp(x10, Operand(bound_argc, LSL, kPointerSizeLog2));\n-      __ B(gt, &done);  // Signed comparison.\n+      __ B(hs, &done);\n       __ TailCallRuntime(Runtime::kThrowStackOverflow);\n       __ Bind(&done);\n     }\n@@ -2379,7 +2365,7 @@ void Builtins::Generate_ConstructFunction(MacroAssembler* masm) {\n \n   // Calling convention for function specific ConstructStubs require\n   // x2 to contain either an AllocationSite or undefined.\n-  __ LoadRoot(x2, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(x2, RootIndex::kUndefinedValue);\n \n   Label call_generic_stub;\n \n@@ -2586,7 +2572,7 @@ void Builtins::Generate_ArgumentsAdaptorTrampoline(MacroAssembler* masm) {\n   // Fill the remaining expected arguments with undefined.\n   __ RecordComment(\"-- Fill slots with undefined --\");\n   __ Sub(copy_end, copy_to, Operand(scratch1, LSL, kPointerSizeLog2));\n-  __ LoadRoot(scratch1, Heap::kUndefinedValueRootIndex);\n+  __ LoadRoot(scratch1, RootIndex::kUndefinedValue);\n \n   Label fill;\n   __ Bind(&fill);\n@@ -2856,7 +2842,7 @@ void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n \n   // Check result for exception sentinel.\n   Label exception_returned;\n-  __ CompareRoot(result, Heap::kExceptionRootIndex);\n+  __ CompareRoot(result, RootIndex::kException);\n   __ B(eq, &exception_returned);\n \n   // The call succeeded, so unwind the stack and return.\n@@ -2922,9 +2908,9 @@ void Builtins::Generate_CEntry(MacroAssembler* masm, int result_size,\n   __ Bind(&not_js_frame);\n \n   // Reset the masking register. This is done independent of the underlying\n-  // feature flag {FLAG_branch_load_poisoning} to make the snapshot work with\n-  // both configurations. It is safe to always do this, because the underlying\n-  // register is caller-saved and can be arbitrarily clobbered.\n+  // feature flag {FLAG_untrusted_code_mitigations} to make the snapshot work\n+  // with both configurations. It is safe to always do this, because the\n+  // underlying register is caller-saved and can be arbitrarily clobbered.\n   __ ResetSpeculationPoisonRegister();\n \n   // Compute the handler entry address and jump to it.\n@@ -3131,6 +3117,9 @@ void GenerateInternalArrayConstructorCase(MacroAssembler* masm,\n \n   __ Bind(&n_case);\n   // N arguments.\n+  // Load undefined into the allocation site parameter as required by\n+  // ArrayNArgumentsConstructor.\n+  __ LoadRoot(kJavaScriptCallExtraArg1Register, RootIndex::kUndefinedValue);\n   Handle<Code> code = BUILTIN_CODE(masm->isolate(), ArrayNArgumentsConstructor);\n   __ Jump(code, RelocInfo::CODE_TARGET);\n }"
        },
        {
            "sha": "6b9ba934a48b072d0fde9a601413c251c5981a6f",
            "filename": "deps/v8/src/builtins/array-copywithin.tq",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-copywithin.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-copywithin.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-copywithin.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -4,7 +4,7 @@\n \n module array {\n   macro ConvertToRelativeIndex(index: Number, length: Number): Number {\n-    return index < 0 ? max(index + length, 0) : min(index, length);\n+    return index < 0 ? Max(index + length, 0) : Min(index, length);\n   }\n \n   // https://tc39.github.io/ecma262/#sec-array.prototype.copyWithin\n@@ -17,32 +17,32 @@ module array {\n     const length: Number = GetLengthProperty(context, object);\n \n     // 3. Let relativeTarget be ? ToInteger(target).\n-    const relative_target: Number = ToInteger_Inline(context, arguments[0]);\n+    const relativeTarget: Number = ToInteger_Inline(context, arguments[0]);\n \n     // 4. If relativeTarget < 0, let to be max((len + relativeTarget), 0);\n     //    else let to be min(relativeTarget, len).\n-    let to: Number = ConvertToRelativeIndex(relative_target, length);\n+    let to: Number = ConvertToRelativeIndex(relativeTarget, length);\n \n     // 5. Let relativeStart be ? ToInteger(start).\n-    const relative_start: Number = ToInteger_Inline(context, arguments[1]);\n+    const relativeStart: Number = ToInteger_Inline(context, arguments[1]);\n \n     // 6. If relativeStart < 0, let from be max((len + relativeStart), 0);\n     //    else let from be min(relativeStart, len).\n-    let from: Number = ConvertToRelativeIndex(relative_start, length);\n+    let from: Number = ConvertToRelativeIndex(relativeStart, length);\n \n     // 7. If end is undefined, let relativeEnd be len;\n     //    else let relativeEnd be ? ToInteger(end).\n-    let relative_end: Number = length;\n+    let relativeEnd: Number = length;\n     if (arguments[2] != Undefined) {\n-      relative_end = ToInteger_Inline(context, arguments[2]);\n+      relativeEnd = ToInteger_Inline(context, arguments[2]);\n     }\n \n     // 8. If relativeEnd < 0, let final be max((len + relativeEnd), 0);\n     //    else let final be min(relativeEnd, len).\n-    const final: Number = ConvertToRelativeIndex(relative_end, length);\n+    const final: Number = ConvertToRelativeIndex(relativeEnd, length);\n \n     // 9. Let count be min(final-from, len-to).\n-    let count: Number = min(final - from, length - to);\n+    let count: Number = Min(final - from, length - to);\n \n     // 10. If from<to and to<from+count, then.\n     let direction: Number = 1;\n@@ -63,15 +63,15 @@ module array {\n       // a. Let fromKey be ! ToString(from).\n       // b. Let toKey be ! ToString(to).\n       // c. Let fromPresent be ? HasProperty(O, fromKey).\n-      const from_present: Boolean = HasProperty(context, object, from);\n+      const fromPresent: Boolean = HasProperty(context, object, from);\n \n       // d. If fromPresent is true, then.\n-      if (from_present == True) {\n+      if (fromPresent == True) {\n         // i. Let fromVal be ? Get(O, fromKey).\n-        const from_val: Object = GetProperty(context, object, from);\n+        const fromVal: Object = GetProperty(context, object, from);\n \n         // ii. Perform ? Set(O, toKey, fromVal, true).\n-        SetProperty(context, object, to, from_val);\n+        SetProperty(context, object, to, fromVal);\n       } else {\n         // i. Perform ? DeletePropertyOrThrow(O, toKey).\n         DeleteProperty(context, object, to, kStrict);"
        },
        {
            "sha": "5a189a517f5b95c01e85d06adff239f824448257",
            "filename": "deps/v8/src/builtins/array-foreach.tq",
            "status": "modified",
            "additions": 35,
            "deletions": 34,
            "changes": 69,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-foreach.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-foreach.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-foreach.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -5,20 +5,21 @@\n module array {\n   macro ArrayForEachTorqueContinuation(\n       context: Context, o: JSReceiver, len: Number, callbackfn: Callable,\n-      thisArg: Object, initial_k: Smi): Object {\n+      thisArg: Object, initialK: Number): Object {\n     // 5. Let k be 0.\n     // 6. Repeat, while k < len\n-    for (let k: Smi = initial_k; k < len; k = k + 1) {\n+    for (let k: Number = initialK; k < len; k = k + 1) {\n       // 6a. Let Pk be ! ToString(k).\n-      const pK: String = ToString_Inline(context, k);\n+      // k is guaranteed to be a positive integer, hence ToString is\n+      // side-effect free and HasProperty/GetProperty do the conversion inline.\n \n       // 6b. Let kPresent be ? HasProperty(O, Pk).\n-      const kPresent: Boolean = HasProperty(context, o, pK);\n+      const kPresent: Boolean = HasProperty_Inline(context, o, k);\n \n       // 6c. If kPresent is true, then\n       if (kPresent == True) {\n         // 6c. i. Let kValue be ? Get(O, Pk).\n-        const kValue: Object = GetProperty(context, o, pK);\n+        const kValue: Object = GetProperty(context, o, k);\n \n         // 6c. ii. Perform ? Call(callbackfn, T, <kValue, k, O>).\n         Call(context, callbackfn, thisArg, kValue, k, o);\n@@ -32,10 +33,10 @@ module array {\n   javascript builtin ArrayForEachLoopEagerDeoptContinuation(\n       context: Context, receiver: Object, callback: Object, thisArg: Object,\n       initialK: Object, length: Object): Object {\n-    // The unsafe cast is safe because all continuation points in forEach are\n+    // The unsafe Cast is safe because all continuation points in forEach are\n     // after the ToObject(O) call that ensures we are dealing with a\n     // JSReceiver.\n-    const jsreceiver: JSReceiver = unsafe_cast<JSReceiver>(receiver);\n+    const jsreceiver: JSReceiver = UnsafeCast<JSReceiver>(receiver);\n     return ArrayForEachLoopContinuation(\n         context, jsreceiver, callback, thisArg, Undefined, jsreceiver, initialK,\n         length, Undefined);\n@@ -44,10 +45,10 @@ module array {\n   javascript builtin ArrayForEachLoopLazyDeoptContinuation(\n       context: Context, receiver: Object, callback: Object, thisArg: Object,\n       initialK: Object, length: Object, result: Object): Object {\n-    // The unsafe cast is safe because all continuation points in forEach are\n+    // The unsafe Cast is safe because all continuation points in forEach are\n     // after the ToObject(O) call that ensures we are dealing with a\n     // JSReceiver.\n-    const jsreceiver: JSReceiver = unsafe_cast<JSReceiver>(receiver);\n+    const jsreceiver: JSReceiver = UnsafeCast<JSReceiver>(receiver);\n     return ArrayForEachLoopContinuation(\n         context, jsreceiver, callback, thisArg, Undefined, jsreceiver, initialK,\n         length, Undefined);\n@@ -59,22 +60,22 @@ module array {\n       to: Object): Object {\n     try {\n       const callbackfn: Callable =\n-          cast<Callable>(callback) otherwise Unexpected;\n-      const k: Smi = cast<Smi>(initialK) otherwise Unexpected;\n-      const number_length: Number = cast<Number>(length) otherwise Unexpected;\n+          Cast<Callable>(callback) otherwise Unexpected;\n+      const k: Number = Cast<Number>(initialK) otherwise Unexpected;\n+      const numberLength: Number = Cast<Number>(length) otherwise Unexpected;\n \n       return ArrayForEachTorqueContinuation(\n-          context, receiver, number_length, callbackfn, thisArg, k);\n+          context, receiver, numberLength, callbackfn, thisArg, k);\n     }\n-    label Unexpected {\n+    label Unexpected deferred {\n       unreachable;\n     }\n   }\n \n-  macro VisitAllElements<FixedArrayType : type>(\n+  macro VisitAllElements<FixedArrayType: type>(\n       context: Context, a: JSArray, len: Smi, callbackfn: Callable,\n-      thisArg: Object): void labels\n-  Bailout(Smi) {\n+      thisArg: Object): void\n+      labels Bailout(Smi) {\n     let k: Smi = 0;\n     const map: Map = a.map;\n \n@@ -100,19 +101,19 @@ module array {\n         }\n       }\n     }\n-    label Slow {\n+    label Slow deferred {\n       goto Bailout(k);\n     }\n   }\n \n   macro FastArrayForEach(\n       context: Context, o: JSReceiver, len: Number, callbackfn: Callable,\n-      thisArg: Object): Object labels\n-  Bailout(Smi) {\n+      thisArg: Object): Object\n+      labels Bailout(Smi) {\n     let k: Smi = 0;\n     try {\n-      const smi_len: Smi = cast<Smi>(len) otherwise Slow;\n-      const a: JSArray = cast<JSArray>(o) otherwise Slow;\n+      const smiLen: Smi = Cast<Smi>(len) otherwise Slow;\n+      const a: JSArray = Cast<JSArray>(o) otherwise Slow;\n       const map: Map = a.map;\n \n       if (!IsPrototypeInitialArrayPrototype(context, map)) goto Slow;\n@@ -121,14 +122,14 @@ module array {\n \n       if (IsElementsKindGreaterThan(elementsKind, HOLEY_ELEMENTS)) {\n         VisitAllElements<FixedDoubleArray>(\n-            context, a, smi_len, callbackfn, thisArg)\n-        otherwise Bailout;\n+            context, a, smiLen, callbackfn, thisArg)\n+            otherwise Bailout;\n       } else {\n-        VisitAllElements<FixedArray>(context, a, smi_len, callbackfn, thisArg)\n-        otherwise Bailout;\n+        VisitAllElements<FixedArray>(context, a, smiLen, callbackfn, thisArg)\n+            otherwise Bailout;\n       }\n     }\n-    label Slow {\n+    label Slow deferred {\n       goto Bailout(k);\n     }\n     return Undefined;\n@@ -153,28 +154,28 @@ module array {\n         goto TypeError;\n       }\n       const callbackfn: Callable =\n-          cast<Callable>(arguments[0]) otherwise TypeError;\n+          Cast<Callable>(arguments[0]) otherwise TypeError;\n \n       // 4. If thisArg is present, let T be thisArg; else let T be undefined.\n       const thisArg: Object = arguments.length > 1 ? arguments[1] : Undefined;\n \n       // Special cases.\n-      let k: Smi = 0;\n+      let k: Number = 0;\n       try {\n         return FastArrayForEach(context, o, len, callbackfn, thisArg)\n-        otherwise Bailout;\n+            otherwise Bailout;\n       }\n-      label Bailout(k_value: Smi) {\n-        k = k_value;\n+      label Bailout(kValue: Smi) deferred {\n+        k = kValue;\n       }\n \n       return ArrayForEachTorqueContinuation(\n           context, o, len, callbackfn, thisArg, k);\n     }\n-    label TypeError {\n+    label TypeError deferred {\n       ThrowTypeError(context, kCalledNonCallable, arguments[0]);\n     }\n-    label NullOrUndefinedError {\n+    label NullOrUndefinedError deferred {\n       ThrowTypeError(\n           context, kCalledOnNullOrUndefined, 'Array.prototype.forEach');\n     }"
        },
        {
            "sha": "056220092e95d528ce6d270e90198c2c1e45ef8f",
            "filename": "deps/v8/src/builtins/array-lastindexof.tq",
            "status": "added",
            "additions": 159,
            "deletions": 0,
            "changes": 159,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-lastindexof.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-lastindexof.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-lastindexof.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,159 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+module array {\n+  macro LoadWithHoleCheck<Elements: type>(\n+      elements: FixedArrayBase, index: Smi): Object\n+      labels IfHole;\n+\n+  LoadWithHoleCheck<FixedArray>(elements: FixedArrayBase, index: Smi): Object\n+      labels IfHole {\n+    const elements: FixedArray = UnsafeCast<FixedArray>(elements);\n+    const element: Object = elements[index];\n+    if (element == Hole) goto IfHole;\n+    return element;\n+  }\n+\n+  LoadWithHoleCheck<FixedDoubleArray>(elements: FixedArrayBase, index: Smi):\n+      Object\n+      labels IfHole {\n+    const elements: FixedDoubleArray = UnsafeCast<FixedDoubleArray>(elements);\n+    const element: float64 = LoadDoubleWithHoleCheck(elements, index)\n+        otherwise IfHole;\n+    return AllocateHeapNumberWithValue(element);\n+  }\n+\n+  macro FastArrayLastIndexOf<Elements: type>(\n+      context: Context, array: JSArray, from: Smi, searchElement: Object): Smi {\n+    const elements: FixedArrayBase = array.elements;\n+    let k: Smi = from;\n+\n+    // Bug(898785): Due to side-effects in the evaluation of `fromIndex`\n+    // the {from} can be out-of-bounds here, so we need to clamp {k} to\n+    // the {elements} length. We might be reading holes / hole NaNs still\n+    // due to that, but those will be ignored below.\n+    if (k >= elements.length) {\n+      k = elements.length - 1;\n+    }\n+\n+    while (k >= 0) {\n+      try {\n+        const element: Object = LoadWithHoleCheck<Elements>(elements, k)\n+            otherwise Hole;\n+\n+        const same: Boolean = StrictEqual(searchElement, element);\n+        if (same == True) {\n+          assert(IsFastJSArray(array, context));\n+          return k;\n+        }\n+      }\n+      label Hole {}  // Do nothing for holes.\n+\n+      --k;\n+    }\n+\n+    assert(IsFastJSArray(array, context));\n+    return -1;\n+  }\n+\n+  macro GetFromIndex(\n+      context: Context, length: Number,\n+      arguments: constexpr Arguments): Number {\n+    // 4. If fromIndex is present, let n be ? ToInteger(fromIndex);\n+    //    else let n be len - 1.\n+    const n: Number = arguments.length < 2 ?\n+        length - 1 :\n+        ToInteger_Inline(context, arguments[1], kTruncateMinusZero);\n+\n+    // 5. If n >= 0, then.\n+    let k: Number = SmiConstant(0);\n+    if (n >= 0) {\n+      // a. If n is -0, let k be +0; else let k be min(n, len - 1).\n+      // If n was -0 it got truncated to 0.0, so taking the minimum is fine.\n+      k = Min(n, length - 1);\n+    } else {\n+      // a. Let k be len + n.\n+      k = length + n;\n+    }\n+    return k;\n+  }\n+\n+  macro TryFastArrayLastIndexOf(\n+      context: Context, receiver: JSReceiver, searchElement: Object,\n+      from: Number): Object\n+      labels Slow {\n+    EnsureFastJSArray(context, receiver) otherwise Slow;\n+    const array: JSArray = UnsafeCast<JSArray>(receiver);\n+\n+    const length: Smi = array.length_fast;\n+    if (length == 0) return SmiConstant(-1);\n+\n+    const fromSmi: Smi = Cast<Smi>(from) otherwise Slow;\n+    const kind: ElementsKind = array.map.elements_kind;\n+    if (IsFastSmiOrTaggedElementsKind(kind)) {\n+      return FastArrayLastIndexOf<FixedArray>(\n+          context, array, fromSmi, searchElement);\n+    }\n+    assert(IsDoubleElementsKind(kind));\n+    return FastArrayLastIndexOf<FixedDoubleArray>(\n+        context, array, fromSmi, searchElement);\n+  }\n+\n+  macro GenericArrayLastIndexOf(\n+      context: Context, object: JSReceiver, searchElement: Object,\n+      from: Number): Object {\n+    let k: Number = from;\n+\n+    // 7. Repeat, while k >= 0.\n+    while (k >= 0) {\n+      // a. Let kPresent be ? HasProperty(O, ! ToString(k)).\n+      const kPresent: Boolean = HasProperty(context, object, k);\n+\n+      // b. If kPresent is true, then.\n+      if (kPresent == True) {\n+        // i. Let elementK be ? Get(O, ! ToString(k)).\n+        const element: Object = GetProperty(context, object, k);\n+\n+        // ii. Let same be the result of performing Strict Equality Comparison\n+        //     searchElement === elementK.\n+        const same: Boolean = StrictEqual(searchElement, element);\n+\n+        // iii. If same is true, return k.\n+        if (same == True) return k;\n+      }\n+\n+      // c. Decrease k by 1.\n+      --k;\n+    }\n+\n+    // 8. Return -1.\n+    return SmiConstant(-1);\n+  }\n+\n+  // https://tc39.github.io/ecma262/#sec-array.prototype.lastIndexOf\n+  javascript builtin ArrayPrototypeLastIndexOf(\n+      context: Context, receiver: Object, ...arguments): Object {\n+    // 1. Let O be ? ToObject(this value).\n+    const object: JSReceiver = ToObject_Inline(context, receiver);\n+\n+    // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+    const length: Number = GetLengthProperty(context, object);\n+\n+    // 3. If len is 0, return -1.\n+    if (length == SmiConstant(0)) return SmiConstant(-1);\n+\n+    // Step 4 - 6.\n+    const from: Number = GetFromIndex(context, length, arguments);\n+\n+    const searchElement: Object = arguments[0];\n+\n+    try {\n+      return TryFastArrayLastIndexOf(context, object, searchElement, from)\n+          otherwise Baseline;\n+    }\n+    label Baseline {\n+      return GenericArrayLastIndexOf(context, object, searchElement, from);\n+    }\n+  }\n+}"
        },
        {
            "sha": "327ef124027abbc76a4f96f805ab87349b009c7d",
            "filename": "deps/v8/src/builtins/array-reverse.tq",
            "status": "modified",
            "additions": 32,
            "deletions": 45,
            "changes": 77,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-reverse.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-reverse.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-reverse.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -3,25 +3,25 @@\n // found in the LICENSE file.\n \n module array {\n-  macro LoadElement<ElementsAccessor : type, T : type>(\n+  macro LoadElement<ElementsAccessor: type, T: type>(\n       elements: FixedArrayBase, index: Smi): T;\n \n   LoadElement<FastPackedSmiElements, Smi>(\n       elements: FixedArrayBase, index: Smi): Smi {\n-    const elems: FixedArray = unsafe_cast<FixedArray>(elements);\n-    return unsafe_cast<Smi>(elems[index]);\n+    const elems: FixedArray = UnsafeCast<FixedArray>(elements);\n+    return UnsafeCast<Smi>(elems[index]);\n   }\n \n   LoadElement<FastPackedObjectElements, Object>(\n       elements: FixedArrayBase, index: Smi): Object {\n-    const elems: FixedArray = unsafe_cast<FixedArray>(elements);\n+    const elems: FixedArray = UnsafeCast<FixedArray>(elements);\n     return elems[index];\n   }\n \n   LoadElement<FastPackedDoubleElements, float64>(\n       elements: FixedArrayBase, index: Smi): float64 {\n     try {\n-      const elems: FixedDoubleArray = unsafe_cast<FixedDoubleArray>(elements);\n+      const elems: FixedDoubleArray = UnsafeCast<FixedDoubleArray>(elements);\n       return LoadDoubleWithHoleCheck(elems, index) otherwise Hole;\n     }\n     label Hole {\n@@ -31,24 +31,24 @@ module array {\n     }\n   }\n \n-  macro StoreElement<ElementsAccessor : type, T : type>(\n+  macro StoreElement<ElementsAccessor: type, T: type>(\n       elements: FixedArrayBase, index: Smi, value: T);\n \n   StoreElement<FastPackedSmiElements, Smi>(\n       elements: FixedArrayBase, index: Smi, value: Smi) {\n-    const elems: FixedArray = unsafe_cast<FixedArray>(elements);\n+    const elems: FixedArray = UnsafeCast<FixedArray>(elements);\n     StoreFixedArrayElementSmi(elems, index, value, SKIP_WRITE_BARRIER);\n   }\n \n   StoreElement<FastPackedObjectElements, Object>(\n       elements: FixedArrayBase, index: Smi, value: Object) {\n-    const elems: FixedArray = unsafe_cast<FixedArray>(elements);\n+    const elems: FixedArray = UnsafeCast<FixedArray>(elements);\n     elems[index] = value;\n   }\n \n   StoreElement<FastPackedDoubleElements, float64>(\n       elements: FixedArrayBase, index: Smi, value: float64) {\n-    const elems: FixedDoubleArray = unsafe_cast<FixedDoubleArray>(elements);\n+    const elems: FixedDoubleArray = UnsafeCast<FixedDoubleArray>(elements);\n \n     assert(value == Float64SilenceNaN(value));\n     StoreFixedDoubleArrayElementWithSmiIndex(elems, index, value);\n@@ -57,16 +57,16 @@ module array {\n   // Fast-path for all PACKED_* elements kinds. These do not need to check\n   // whether a property is present, so we can simply swap them using fast\n   // FixedArray loads/stores.\n-  macro FastPackedArrayReverse<Accessor : type, T : type>(\n+  macro FastPackedArrayReverse<Accessor: type, T: type>(\n       elements: FixedArrayBase, length: Smi) {\n     let lower: Smi = 0;\n     let upper: Smi = length - 1;\n \n     while (lower < upper) {\n-      const lower_value: T = LoadElement<Accessor, T>(elements, lower);\n-      const upper_value: T = LoadElement<Accessor, T>(elements, upper);\n-      StoreElement<Accessor, T>(elements, lower, upper_value);\n-      StoreElement<Accessor, T>(elements, upper, lower_value);\n+      const lowerValue: T = LoadElement<Accessor, T>(elements, lower);\n+      const upperValue: T = LoadElement<Accessor, T>(elements, upper);\n+      StoreElement<Accessor, T>(elements, lower, upperValue);\n+      StoreElement<Accessor, T>(elements, upper, lowerValue);\n       ++lower;\n       --upper;\n     }\n@@ -90,48 +90,48 @@ module array {\n     let upper: Number = length - 1;\n \n     while (lower < upper) {\n-      let lower_value: Object = Undefined;\n-      let upper_value: Object = Undefined;\n+      let lowerValue: Object = Undefined;\n+      let upperValue: Object = Undefined;\n \n       // b. Let upperP be ! ToString(upper).\n       // c. Let lowerP be ! ToString(lower).\n       // d. Let lowerExists be ? HasProperty(O, lowerP).\n-      const lower_exists: Boolean = HasProperty(context, object, lower);\n+      const lowerExists: Boolean = HasProperty(context, object, lower);\n \n       // e. If lowerExists is true, then.\n-      if (lower_exists == True) {\n+      if (lowerExists == True) {\n         // i. Let lowerValue be ? Get(O, lowerP).\n-        lower_value = GetProperty(context, object, lower);\n+        lowerValue = GetProperty(context, object, lower);\n       }\n \n       // f. Let upperExists be ? HasProperty(O, upperP).\n-      const upper_exists: Boolean = HasProperty(context, object, upper);\n+      const upperExists: Boolean = HasProperty(context, object, upper);\n \n       // g. If upperExists is true, then.\n-      if (upper_exists == True) {\n+      if (upperExists == True) {\n         // i. Let upperValue be ? Get(O, upperP).\n-        upper_value = GetProperty(context, object, upper);\n+        upperValue = GetProperty(context, object, upper);\n       }\n \n       // h. If lowerExists is true and upperExists is true, then\n-      if (lower_exists == True && upper_exists == True) {\n+      if (lowerExists == True && upperExists == True) {\n         // i. Perform ? Set(O, lowerP, upperValue, true).\n-        SetProperty(context, object, lower, upper_value);\n+        SetProperty(context, object, lower, upperValue);\n \n         // ii. Perform ? Set(O, upperP, lowerValue, true).\n-        SetProperty(context, object, upper, lower_value);\n-      } else if (lower_exists == False && upper_exists == True) {\n+        SetProperty(context, object, upper, lowerValue);\n+      } else if (lowerExists == False && upperExists == True) {\n         // i. Perform ? Set(O, lowerP, upperValue, true).\n-        SetProperty(context, object, lower, upper_value);\n+        SetProperty(context, object, lower, upperValue);\n \n         // ii. Perform ? DeletePropertyOrThrow(O, upperP).\n         DeleteProperty(context, object, upper, kStrict);\n-      } else if (lower_exists == True && upper_exists == False) {\n+      } else if (lowerExists == True && upperExists == False) {\n         // i. Perform ? DeletePropertyOrThrow(O, lowerP).\n         DeleteProperty(context, object, lower, kStrict);\n \n         // ii. Perform ? Set(O, upperP, lowerValue, true).\n-        SetProperty(context, object, upper, lower_value);\n+        SetProperty(context, object, upper, lowerValue);\n       }\n \n       // l. Increase lower by 1.\n@@ -143,29 +143,16 @@ module array {\n     return object;\n   }\n \n-  macro EnsureWriteableFastElements(array: JSArray) {\n-    const elements: FixedArrayBase = array.elements;\n-    if (elements.map != kCOWMap) return;\n-\n-    // There are no COW *_DOUBLE_ELEMENTS arrays, so we are allowed to always\n-    // extract FixedArrays and don't have to worry about FixedDoubleArrays.\n-    assert(IsFastSmiOrTaggedElementsKind(array.map.elements_kind));\n-\n-    const length: Smi = array.length_fast;\n-    array.elements = ExtractFixedArray(\n-        unsafe_cast<FixedArray>(elements), 0, length, length, kFixedArrays);\n-  }\n-\n   macro TryFastPackedArrayReverse(receiver: Object) labels Slow {\n-    const array: JSArray = cast<JSArray>(receiver) otherwise Slow;\n-    EnsureWriteableFastElements(array);\n-    assert(array.elements.map != kCOWMap);\n+    const array: JSArray = Cast<JSArray>(receiver) otherwise Slow;\n \n     const kind: ElementsKind = array.map.elements_kind;\n     if (kind == PACKED_SMI_ELEMENTS) {\n+      EnsureWriteableFastElements(array);\n       FastPackedArrayReverse<FastPackedSmiElements, Smi>(\n           array.elements, array.length_fast);\n     } else if (kind == PACKED_ELEMENTS) {\n+      EnsureWriteableFastElements(array);\n       FastPackedArrayReverse<FastPackedObjectElements, Object>(\n           array.elements, array.length_fast);\n     } else if (kind == PACKED_DOUBLE_ELEMENTS) {"
        },
        {
            "sha": "16a192d2c001c983ebecc12049169ceb65935aba",
            "filename": "deps/v8/src/builtins/array-splice.tq",
            "status": "added",
            "additions": 395,
            "deletions": 0,
            "changes": 395,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-splice.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-splice.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-splice.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,395 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+module array {\n+  // Given {elements}, we want to create a non-zero length array of type\n+  // FixedArrayType. Most of this behavior is outsourced to ExtractFixedArray(),\n+  // but the special case of wanting to have a FixedDoubleArray when given a\n+  // zero-length input FixedArray is handled here.\n+  macro Extract<FixedArrayType: type>(\n+      elements: FixedArrayBase, first: Smi, count: Smi,\n+      capacity: Smi): FixedArrayType {\n+    return UnsafeCast<FixedArrayType>(\n+        ExtractFixedArray(elements, first, count, capacity));\n+  }\n+\n+  Extract<FixedDoubleArray>(\n+      elements: FixedArrayBase, first: Smi, count: Smi,\n+      capacity: Smi): FixedDoubleArray {\n+    if (elements == kEmptyFixedArray) {\n+      return AllocateZeroedFixedDoubleArray(Convert<intptr>(capacity));\n+    }\n+    return UnsafeCast<FixedDoubleArray>(\n+        ExtractFixedArray(elements, first, count, capacity));\n+  }\n+\n+  macro FastSplice<FixedArrayType: type, ElementType: type>(\n+      args: constexpr Arguments, a: JSArray, length: Smi, newLength: Smi,\n+      lengthDelta: Smi, actualStart: Smi, insertCount: Smi,\n+      actualDeleteCount: Smi): void\n+      labels Bailout {\n+    const elements: FixedArrayBase = a.elements;\n+    const elementsMap: Map = elements.map;\n+\n+    // If the spliced array is larger then the\n+    // source array, then allocate a new FixedArrayType to hold the result.\n+    let newElements: FixedArrayBase = elements;\n+    if (elementsMap == kCOWMap || lengthDelta > 0) {\n+      newElements =\n+          Extract<FixedArrayType>(elements, 0, actualStart, newLength);\n+      if (elementsMap == kCOWMap) {\n+        newElements.map = elementsMap;\n+      }\n+      a.elements = newElements;\n+    }\n+\n+    // Copy over inserted elements.\n+    let k: Smi = actualStart;\n+    if (insertCount > 0) {\n+      const typedNewElements: FixedArrayType =\n+          UnsafeCast<FixedArrayType>(newElements);\n+      for (let e: Object of args [2: ]) {\n+        // The argument elements were already validated to be an appropriate\n+        // {ElementType} to store in {FixedArrayType}.\n+        typedNewElements[k++] = UnsafeCast<ElementType>(e);\n+      }\n+    }\n+\n+    // Copy over elements after deleted elements.\n+    let count: Smi = length - actualStart - actualDeleteCount;\n+    while (count > 0) {\n+      const typedElements: FixedArrayType =\n+          UnsafeCast<FixedArrayType>(elements);\n+      const typedNewElements: FixedArrayType =\n+          UnsafeCast<FixedArrayType>(newElements);\n+      CopyArrayElement(typedElements, typedNewElements, k - lengthDelta, k);\n+      k++;\n+      count--;\n+    }\n+\n+    // Fill rest of spliced FixedArray with the hole, but only if the\n+    // destination FixedArray is the original array's, since otherwise the array\n+    // is pre-filled with holes.\n+    if (elements == newElements) {\n+      const typedNewElements: FixedArrayType =\n+          UnsafeCast<FixedArrayType>(newElements);\n+      const limit: Smi = elements.length;\n+      while (k < limit) {\n+        StoreArrayHole(typedNewElements, k);\n+        k++;\n+      }\n+    }\n+\n+    // Update the array's length after all the FixedArray shuffling is done.\n+    a.length = newLength;\n+  }\n+\n+  macro FastArraySplice(\n+      context: Context, args: constexpr Arguments, o: JSReceiver,\n+      originalLengthNumber: Number, actualStartNumber: Number, insertCount: Smi,\n+      actualDeleteCountNumber: Number): Object\n+      labels Bailout {\n+    const originalLength: Smi =\n+        Cast<Smi>(originalLengthNumber) otherwise Bailout;\n+    const actualStart: Smi = Cast<Smi>(actualStartNumber) otherwise Bailout;\n+    const actualDeleteCount: Smi =\n+        Cast<Smi>(actualDeleteCountNumber) otherwise Bailout;\n+    const lengthDelta: Smi = insertCount - actualDeleteCount;\n+    const newLength: Smi = originalLength + lengthDelta;\n+\n+    const a: JSArray = Cast<JSArray>(o) otherwise Bailout;\n+\n+    const map: Map = a.map;\n+    if (!IsPrototypeInitialArrayPrototype(context, map)) goto Bailout;\n+    if (IsNoElementsProtectorCellInvalid()) goto Bailout;\n+    if (IsArraySpeciesProtectorCellInvalid()) goto Bailout;\n+\n+    // Fast path only works on fast elements kind and with writable length.\n+    let elementsKind: ElementsKind = EnsureArrayPushable(map) otherwise Bailout;\n+    if (!IsFastElementsKind(elementsKind)) goto Bailout;\n+\n+    const oldElementsKind: ElementsKind = elementsKind;\n+    for (let e: Object of args [2: ]) {\n+      if (IsFastSmiElementsKind(elementsKind)) {\n+        if (TaggedIsNotSmi(e)) {\n+          const heapObject: HeapObject = UnsafeCast<HeapObject>(e);\n+          elementsKind = IsHeapNumber(heapObject) ?\n+              AllowDoubleElements(elementsKind) :\n+              AllowNonNumberElements(elementsKind);\n+        }\n+      } else if (IsDoubleElementsKind(elementsKind)) {\n+        if (!IsNumber(e)) {\n+          elementsKind = AllowNonNumberElements(elementsKind);\n+        }\n+      }\n+    }\n+\n+    if (elementsKind != oldElementsKind) {\n+      const smiElementsKind: Smi = Convert<Smi>(Convert<int32>(elementsKind));\n+      TransitionElementsKindWithKind(context, a, smiElementsKind);\n+    }\n+\n+    // Make sure that the length hasn't been changed by side-effect.\n+    const length: Smi = Cast<Smi>(a.length) otherwise Bailout;\n+    if (originalLength != length) goto Bailout;\n+\n+    const deletedResult: JSArray =\n+        ExtractFastJSArray(context, a, actualStart, actualDeleteCount);\n+\n+    if (newLength == 0) {\n+      a.elements = kEmptyFixedArray;\n+      a.length = 0;\n+      return deletedResult;\n+    }\n+\n+    if (IsFastSmiOrTaggedElementsKind(elementsKind)) {\n+      FastSplice<FixedArray, Object>(\n+          args, a, length, newLength, lengthDelta, actualStart, insertCount,\n+          actualDeleteCount) otherwise Bailout;\n+    } else {\n+      FastSplice<FixedDoubleArray, Number>(\n+          args, a, length, newLength, lengthDelta, actualStart, insertCount,\n+          actualDeleteCount) otherwise Bailout;\n+    }\n+\n+    return deletedResult;\n+  }\n+\n+  macro FillDeletedElementsArray(\n+      context: Context, o: JSReceiver, actualStart: Number,\n+      actualDeleteCount: Number, a: JSReceiver): Object {\n+    // 10. Let k be 0.\n+    let k: Number = 0;\n+\n+    // 11. Repeat, while k < actualDeleteCount\n+    while (k < actualDeleteCount) {\n+      // a. Let from be ! ToString(actualStart + k).\n+      const from: Number = actualStart + k;\n+\n+      // b. Let fromPresent be ? HasProperty(O, from).\n+      const fromPresent: Boolean = HasProperty(context, o, from);\n+\n+      // c. If fromPresent is true, then\n+      if (fromPresent == True) {\n+        // i. Let fromValue be ? Get(O, from).\n+        const fromValue: Object = GetProperty(context, o, from);\n+\n+        // ii. Perform ? CreateDataPropertyOrThrow(A, ! ToString(k), fromValue).\n+        CreateDataProperty(context, a, k, fromValue);\n+      }\n+\n+      // d. Increment k by 1.\n+      k++;\n+    }\n+    // 12. Perform ? Set(A, \"length\", actualDeleteCount, true).\n+    SetProperty(context, a, kLengthString, actualDeleteCount);\n+    return a;\n+  }\n+\n+  // HandleForwardCase implements step 15. \"If itemCount < actualDeleteCount,\n+  // then...\"\"\n+  macro HandleForwardCase(\n+      context: Context, o: JSReceiver, len: Number, itemCount: Number,\n+      actualStart: Number, actualDeleteCount: Number): void {\n+    // 15. If itemCount < actualDeleteCount, then\n+    // a. Let k be actualStart.\n+    let k: Number = actualStart;\n+\n+    // b. Repeat, while k < (len - actualDeleteCount)\n+    while (k < (len - actualDeleteCount)) {\n+      // i. Let from be ! ToString(k + actualDeleteCount).\n+      const from: Number = k + actualDeleteCount;\n+      // ii. Let to be ! ToString(k + itemCount).\n+      const to: Number = k + itemCount;\n+\n+      // iii. Let fromPresent be ? HasProperty(O, from).\n+      const fromPresent: Boolean = HasProperty(context, o, from);\n+\n+      // iv. If fromPresent is true, then\n+      if (fromPresent == True) {\n+        // 1. Let fromValue be ? Get(O, from).\n+        const fromValue: Object = GetProperty(context, o, from);\n+\n+        // 2. Perform ? Set(O, to, fromValue, true).\n+        SetProperty(context, o, to, fromValue);\n+\n+        // v. Else fromPresent is false,\n+      } else {\n+        // 1. Perform ? DeletePropertyOrThrow(O, to).\n+        DeleteProperty(context, o, to, kStrict);\n+      }\n+      // vi. Increase k by 1.\n+      k++;\n+    }\n+\n+    // c. Let k be len.\n+    k = len;\n+\n+    // d. Repeat, while k > (len - actualDeleteCount + itemCount)\n+    while (k > (len - actualDeleteCount + itemCount)) {\n+      // i. Perform ? DeletePropertyOrThrow(O, ! ToString(k - 1)).\n+      DeleteProperty(context, o, k - 1, kStrict);\n+      // ii. Decrease k by 1.\n+      k--;\n+    }\n+  }\n+\n+  // HandleBackwardCase implements step 16. \"Else if itemCount >\n+  // actualDeleteCount, then...\"\n+  macro HandleBackwardCase(\n+      context: Context, o: JSReceiver, len: Number, itemCount: Number,\n+      actualStart: Number, actualDeleteCount: Number): void {\n+    // 16. Else if itemCount > actualDeleteCount, then\n+    // a. Let k be (len - actualDeleteCount).\n+    let k: Number = len - actualDeleteCount;\n+\n+    // b. Repeat, while k > actualStart\n+    while (k > actualStart) {\n+      // i. Let from be ! ToString(k + actualDeleteCount - 1).\n+      const from: Number = k + actualDeleteCount - 1;\n+\n+      // ii. Let to be ! ToString(k + itemCount - 1).\n+      const to: Number = k + itemCount - 1;\n+\n+      // iii. Let fromPresent be ? HasProperty(O, from).\n+      const fromPresent: Boolean = HasProperty(context, o, from);\n+\n+      // iv. If fromPresent is true, then\n+      if (fromPresent == True) {\n+        // 1. Let fromValue be ? Get(O, from).\n+        const fromValue: Object = GetProperty(context, o, from);\n+\n+        // 2. Perform ? Set(O, to, fromValue, true).\n+        SetProperty(context, o, to, fromValue);\n+\n+        // v. Else fromPresent is false,\n+      } else {\n+        // 1. Perform ? DeletePropertyOrThrow(O, to).\n+        DeleteProperty(context, o, to, kStrict);\n+      }\n+\n+      // vi. Decrease k by 1.\n+      k--;\n+    }\n+  }\n+\n+  macro SlowSplice(\n+      context: Context, arguments: constexpr Arguments, o: JSReceiver,\n+      len: Number, actualStart: Number, insertCount: Smi,\n+      actualDeleteCount: Number): Object {\n+    const affected: Number = len - actualStart - actualDeleteCount;\n+\n+    // 9. Let A be ? ArraySpeciesCreate(O, actualDeleteCount).\n+    const a: JSReceiver = ArraySpeciesCreate(context, o, actualDeleteCount);\n+    const itemCount: Number = insertCount;\n+\n+    // Steps 9 through 12: creating the array of deleted elements.\n+    FillDeletedElementsArray(context, o, actualStart, actualDeleteCount, a);\n+\n+    // 13. Let items be a List whose elements are, in left-to-right order,\n+    //     the portion of the actual argument list starting with the third\n+    //     argument. The list is empty if fewer than three arguments were\n+    //     passed.\n+    // 14. Let itemCount be the Number of elements in items.\n+    // (done above).\n+\n+    // 15. If itemCount < actualDeleteCount, then\n+    if (itemCount < actualDeleteCount) {\n+      HandleForwardCase(\n+          context, o, len, itemCount, actualStart, actualDeleteCount);\n+      // 16. Else if itemCount > actualDeleteCount, then\n+    } else if (itemCount > actualDeleteCount) {\n+      HandleBackwardCase(\n+          context, o, len, itemCount, actualStart, actualDeleteCount);\n+    }\n+\n+    // 17. Let k be actualStart.\n+    let k: Number = actualStart;\n+\n+    // 18. Repeat, while items is not empty\n+    //   a. Remove the first element from items and let E be the value of that\n+    //   element.\n+    if (arguments.length > 2) {\n+      for (let e: Object of arguments [2: ]) {\n+        // b. Perform ? Set(O, ! ToString(k), E, true).\n+        SetProperty(context, o, k, e);\n+\n+        // c. Increase k by 1.\n+        k = k + 1;\n+      }\n+    }\n+\n+    // 19. Perform ? Set(O, \"length\", len - actualDeleteCount + itemCount,\n+    // true).\n+    SetProperty(context, o, kLengthString, len - actualDeleteCount + itemCount);\n+\n+    return a;\n+  }\n+\n+  // https://tc39.github.io/ecma262/#sec-array.prototype.splice\n+  javascript builtin ArraySplice(\n+      context: Context, receiver: Object, ...arguments): Object {\n+    // 1. Let O be ? ToObject(this value).\n+    const o: JSReceiver = ToObject(context, receiver);\n+\n+    // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+    const len: Number = GetLengthProperty(context, o);\n+\n+    // 3. Let relativeStart be ? ToInteger(start).\n+    const start: Object = arguments[0];\n+    const relativeStart: Number = ToInteger_Inline(context, start);\n+\n+    // 4. If relativeStart < 0, let actualStart be max((len + relativeStart),\n+    // 0);\n+    //    else let actualStart be min(relativeStart, len).\n+    const actualStart: Number = relativeStart < 0 ?\n+        Max((len + relativeStart), 0) :\n+        Min(relativeStart, len);\n+\n+    let insertCount: Smi;\n+    let actualDeleteCount: Number;\n+    // 5. If the Number of actual arguments is 0, then\n+    if (arguments.length == 0) {\n+      // a. Let insertCount be 0.\n+      insertCount = 0;\n+      // b. Let actualDeleteCount be 0.\n+      actualDeleteCount = 0;\n+      // 6. Else if the Number of actual arguments is 1, then\n+    } else if (arguments.length == 1) {\n+      // a. Let insertCount be 0.\n+      insertCount = 0;\n+      // b. Let actualDeleteCount be len - actualStart.\n+      actualDeleteCount = len - actualStart;\n+      // 7. Else,\n+    } else {\n+      // a. Let insertCount be the Number of actual arguments minus 2.\n+      insertCount = Convert<Smi>(arguments.length) - 2;\n+      // b. Let dc be ? ToInteger(deleteCount).\n+      const deleteCount: Object = arguments[1];\n+      const dc: Number = ToInteger_Inline(context, deleteCount);\n+      // c. Let actualDeleteCount be min(max(dc, 0), len - actualStart).\n+      actualDeleteCount = Min(Max(dc, 0), len - actualStart);\n+    }\n+\n+    // 8. If len + insertCount - actualDeleteCount > 2^53-1, throw a\n+    //    Bailout exception.\n+    const newLength: Number = len + insertCount - actualDeleteCount;\n+    if (newLength > kMaxSafeInteger) {\n+      ThrowTypeError(context, kInvalidArrayLength, start);\n+    }\n+\n+    try {\n+      return FastArraySplice(\n+          context, arguments, o, len, actualStart, insertCount,\n+          actualDeleteCount) otherwise Bailout;\n+    }\n+    label Bailout {}\n+\n+    // If the fast case fails, just continue with the slow, correct,\n+    // spec-compliant case.\n+    return SlowSplice(\n+        context, arguments, o, len, actualStart, insertCount,\n+        actualDeleteCount);\n+  }\n+}"
        },
        {
            "sha": "3595b139a43b03a00ca7c4de15989c7973d64eef",
            "filename": "deps/v8/src/builtins/array-unshift.tq",
            "status": "added",
            "additions": 107,
            "deletions": 0,
            "changes": 107,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-unshift.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-unshift.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray-unshift.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -0,0 +1,107 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+module array {\n+  extern builtin ArrayUnshift(Context, JSFunction, Object, int32);\n+\n+  macro TryFastArrayUnshift(\n+      context: Context, receiver: Object, arguments: constexpr Arguments):\n+      never\n+      labels Slow {\n+    EnsureFastJSArray(context, receiver) otherwise Slow;\n+    const array: JSArray = UnsafeCast<JSArray>(receiver);\n+    EnsureWriteableFastElements(array);\n+\n+    const map: Map = array.map;\n+    if (!IsExtensibleMap(map)) goto Slow;\n+    EnsureArrayLengthWritable(map) otherwise Slow;\n+\n+    tail ArrayUnshift(\n+        context, LoadTargetFromFrame(), Undefined,\n+        Convert<int32>(arguments.length));\n+  }\n+\n+  macro GenericArrayUnshift(\n+      context: Context, receiver: Object,\n+      arguments: constexpr Arguments): Number {\n+    // 1. Let O be ? ToObject(this value).\n+    const object: JSReceiver = ToObject_Inline(context, receiver);\n+\n+    // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+    const length: Number = GetLengthProperty(context, object);\n+\n+    // 3. Let argCount be the number of actual arguments.\n+    const argCount: Smi = Convert<Smi>(arguments.length);\n+\n+    // 4. If argCount > 0, then.\n+    if (argCount > 0) {\n+      // a. If len + argCount > 2**53 - 1, throw a TypeError exception.\n+      if (length + argCount > kMaxSafeInteger) {\n+        ThrowTypeError(context, kInvalidArrayLength);\n+      }\n+\n+      // b. Let k be len.\n+      let k: Number = length;\n+\n+      // c. Repeat, while k > 0.\n+      while (k > 0) {\n+        // i. Let from be ! ToString(k - 1).\n+        const from: Number = k - 1;\n+\n+        // ii. Let to be ! ToString(k + argCount - 1).\n+        const to: Number = k + argCount - 1;\n+\n+        // iii. Let fromPresent be ? HasProperty(O, from).\n+        const fromPresent: Boolean = HasProperty(context, object, from);\n+\n+        // iv. If fromPresent is true, then\n+        if (fromPresent == True) {\n+          // 1. Let fromValue be ? Get(O, from).\n+          const fromValue: Object = GetProperty(context, object, from);\n+\n+          // 2. Perform ? Set(O, to, fromValue, true).\n+          SetProperty(context, object, to, fromValue);\n+        } else {\n+          // 1. Perform ? DeletePropertyOrThrow(O, to).\n+          DeleteProperty(context, object, to, kStrict);\n+        }\n+\n+        // vi. Decrease k by 1.\n+        --k;\n+      }\n+\n+      // d. Let j be 0.\n+      let j: Smi = 0;\n+\n+      // e. Let items be a List whose elements are, in left to right order,\n+      //    the arguments that were passed to this function invocation.\n+      // f. Repeat, while items is not empty\n+      while (j < argCount) {\n+        // ii .Perform ? Set(O, ! ToString(j), E, true).\n+        SetProperty(context, object, j, arguments[Convert<intptr>(j)]);\n+\n+        // iii. Increase j by 1.\n+        ++j;\n+      }\n+    }\n+\n+    // 5. Perform ? Set(O, \"length\", len + argCount, true).\n+    const newLength: Number = length + argCount;\n+    SetProperty(context, object, kLengthString, newLength);\n+\n+    // 6. Return length + argCount.\n+    return newLength;\n+  }\n+\n+  // https://tc39.github.io/ecma262/#sec-array.prototype.unshift\n+  javascript builtin ArrayPrototypeUnshift(\n+      context: Context, receiver: Object, ...arguments): Object {\n+    try {\n+      TryFastArrayUnshift(context, receiver, arguments) otherwise Baseline;\n+    }\n+    label Baseline {\n+      return GenericArrayUnshift(context, receiver, arguments);\n+    }\n+  }\n+}"
        },
        {
            "sha": "df4387878dcc2080d7c1c2f7c0a13a4ca5825a0a",
            "filename": "deps/v8/src/builtins/array.tq",
            "status": "modified",
            "additions": 37,
            "deletions": 284,
            "changes": 321,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farray.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -14,303 +14,56 @@ module array {\n   type FastDoubleElements;\n   type DictionaryElements;\n \n-  macro GetLengthProperty(context: Context, o: Object): Number {\n-    if (BranchIfFastJSArray(o, context)) {\n-      let a: JSArray = unsafe_cast<JSArray>(o);\n-      return a.length_fast;\n-    } else\n-      deferred {\n-        return ToLength_Inline(context, GetProperty(context, o, 'length'));\n-      }\n-  }\n-\n-  macro FastArraySplice(\n-      context: Context, args: constexpr Arguments, o: Object,\n-      originalLengthNumber: Number, actualStartNumber: Number, insertCount: Smi,\n-      actualDeleteCountNumber: Number): Object\n-  labels Bailout {\n-    let originalLength: Smi = cast<Smi>(originalLengthNumber) otherwise Bailout;\n-    let actualStart: Smi = cast<Smi>(actualStartNumber) otherwise Bailout;\n-    let actualDeleteCount: Smi =\n-        cast<Smi>(actualDeleteCountNumber) otherwise Bailout;\n-    let lengthDelta: Smi = insertCount - actualDeleteCount;\n-    let newLength: Smi = originalLength + lengthDelta;\n-\n-    let a: JSArray = cast<JSArray>(o) otherwise Bailout;\n-\n-    let map: Map = a.map;\n-    if (!IsPrototypeInitialArrayPrototype(context, map)) goto Bailout;\n-    if (IsNoElementsProtectorCellInvalid()) goto Bailout;\n-    if (IsArraySpeciesProtectorCellInvalid()) goto Bailout;\n-\n-    // Fast path only works on fast elements kind and with writable length.\n-    let elementsKind: ElementsKind = EnsureArrayPushable(map) otherwise Bailout;\n-    if (!IsFastElementsKind(elementsKind)) goto Bailout;\n-\n-    // For now, only support non-double fast elements\n-    if (!IsFastSmiOrTaggedElementsKind(elementsKind)) goto Bailout;\n-\n-    if (IsFastSmiElementsKind(elementsKind)) {\n-      for (let e: Object of args [2: ]) {\n-        if (TaggedIsNotSmi(e)) goto Bailout;\n-      }\n-    }\n-\n-    // Make sure that the length hasn't been changed by side-effect.\n-    let length: Smi = cast<Smi>(a.length) otherwise Bailout;\n-    if (originalLength != length) goto Bailout;\n-\n-    let deletedResult: JSArray =\n-        ExtractFastJSArray(context, a, actualStart, actualDeleteCount);\n-\n-    if (newLength == 0) {\n-      a.elements = kEmptyFixedArray;\n-      a.length = 0;\n-      return deletedResult;\n-    }\n-\n-    let elements: FixedArray = cast<FixedArray>(a.elements) otherwise Bailout;\n-    let elementsMap: Map = elements.map;\n-\n-    // If the source is a COW array or the spliced array is larger then the\n-    // source array, then allocate a new FixedArray to hold the result.\n-    let newElements: FixedArray = elements;\n-    if ((elementsMap == kCOWMap) || (lengthDelta > 0)) {\n-      newElements = ExtractFixedArray(\n-          elements, 0, actualStart, newLength, kAllFixedArrays);\n-      newElements.map = elementsMap;\n-      a.elements = newElements;\n-    }\n+  macro EnsureWriteableFastElements(array: JSArray) {\n+    assert(IsFastElementsKind(array.map.elements_kind));\n \n-    // Double check that the array is still in fast elements mode\n-    assert(IsFastSmiElementsKind(a.map.elements_kind));\n+    const elements: FixedArrayBase = array.elements;\n+    if (elements.map != kCOWMap) return;\n \n-    // Copy over inserted elements.\n-    let k: Smi = actualStart;\n-    if (insertCount > 0) {\n-      for (let e: Object of args [2: ]) {\n-        newElements[k++] = e;\n-      }\n-    }\n-\n-    // Copy over elements after deleted elements.\n-    let count: Smi = length - actualStart - actualDeleteCount;\n-    while (count > 0) {\n-      let e: Object = elements[k - lengthDelta];\n-      newElements[k++] = e;\n-      count--;\n-    }\n-\n-    // Fill rest of spliced FixedArray with the hole, but only if the\n-    // destination FixedArray is the original array's, since otherwise the array\n-    // is pre-filled with holes.\n-    if (elements == newElements) {\n-      let limit: Smi = elements.length;\n-      while (k < limit) {\n-        newElements[k++] = Hole;\n-      }\n-    }\n-\n-    // Update the array's length after all the FixedArray shuffling is done.\n-    a.length = newLength;\n+    // There are no COW *_DOUBLE_ELEMENTS arrays, so we are allowed to always\n+    // extract FixedArrays and don't have to worry about FixedDoubleArrays.\n+    assert(IsFastSmiOrTaggedElementsKind(array.map.elements_kind));\n \n-    return deletedResult;\n+    const length: Smi = array.length_fast;\n+    array.elements =\n+        ExtractFixedArray(elements, 0, length, length, kFixedArrays);\n+    assert(array.elements.map != kCOWMap);\n   }\n \n-  // https://tc39.github.io/ecma262/#sec-array.prototype.splice\n-  javascript builtin ArraySpliceTorque(\n-      context: Context, receiver: Object, ...arguments): Object {\n-    // 1. Let O be ? ToObject(this value).\n-    let o: JSReceiver = ToObject(context, receiver);\n-\n-    // 2. Let len be ? ToLength(? Get(O, \"length\")).\n-    let len: Number = GetLengthProperty(context, o);\n-\n-    // 3. Let relativeStart be ? ToInteger(start).\n-    let start: Object = arguments[0];\n-    let relativeStart: Number = ToInteger_Inline(context, start);\n-\n-    // 4. If relativeStart < 0, let actualStart be max((len + relativeStart),\n-    // 0);\n-    //    else let actualStart be min(relativeStart, len).\n-    let actualStart: Number = relativeStart < 0 ?\n-        max((len + relativeStart), 0) :\n-        min(relativeStart, len);\n-\n-    let insertCount: Smi;\n-    let actualDeleteCount: Number;\n-    // 5. If the Number of actual arguments is 0, then\n-    if (arguments.length == 0) {\n-      // a. Let insertCount be 0.\n-      insertCount = 0;\n-      // b. Let actualDeleteCount be 0.\n-      actualDeleteCount = 0;\n-      // 6. Else if the Number of actual arguments is 1, then\n-    } else if (arguments.length == 1) {\n-      // a. Let insertCount be 0.\n-      insertCount = 0;\n-      // b. Let actualDeleteCount be len - actualStart.\n-      actualDeleteCount = len - actualStart;\n-      // 7. Else,\n-    } else {\n-      // a. Let insertCount be the Number of actual arguments minus 2.\n-      insertCount = convert<Smi>(arguments.length) - 2;\n-      // b. Let dc be ? ToInteger(deleteCount).\n-      let deleteCount: Object = arguments[1];\n-      let dc: Number = ToInteger_Inline(context, deleteCount);\n-      // c. Let actualDeleteCount be min(max(dc, 0), len - actualStart).\n-      actualDeleteCount = min(max(dc, 0), len - actualStart);\n-    }\n-\n-    // 8. If len + insertCount - actualDeleteCount > 2^53-1, throw a\n-    //    Bailout exception.\n-    if (len + insertCount - actualDeleteCount > kMaxSafeInteger) {\n-      ThrowRangeError(context, kInvalidArrayLength);\n-    }\n-\n+  macro IsJSArray(o: Object): bool {\n     try {\n-      return FastArraySplice(\n-          context, arguments, o, len, actualStart, insertCount,\n-          actualDeleteCount) otherwise Bailout;\n+      const array: JSArray = Cast<JSArray>(o) otherwise NotArray;\n+      return true;\n     }\n-    label Bailout {}\n-    // If the fast case fails, just continue with the slow, correct,\n-    // spec-compliant case.\n-\n-    // 9. Let A be ? ArraySpeciesCreate(O, actualDeleteCount).\n-    let a: Object = ArraySpeciesCreate(context, o, actualDeleteCount);\n-\n-    // 10. Let k be 0.\n-    let k: Number = 0;\n-\n-    // 11. Repeat, while k < actualDeleteCount\n-    while (k < actualDeleteCount) {\n-      // a. Let from be ! ToString(actualStart + k).\n-      let from: String = ToString_Inline(context, actualStart + k);\n-\n-      // b. Let fromPresent be ? HasProperty(O, from).\n-      let fromPresent: Oddball = HasProperty(context, o, from);\n-\n-      // c. If fromPresent is true, then\n-      if (fromPresent == True) {\n-        // i. Let fromValue be ? Get(O, from).\n-        let fromValue: Object = GetProperty(context, o, from);\n-\n-        // ii. Perform ? CreateDataPropertyOrThrow(A, ! ToString(k), fromValue).\n-        CreateDataProperty(context, a, ToString_Inline(context, k), fromValue);\n-      }\n-\n-      // d. Increment k by 1.\n-      k = k + 1;\n+    label NotArray {\n+      return false;\n     }\n+  }\n \n-    // 12. Perform ? Set(A, \"length\", actualDeleteCount, true).\n-    SetProperty(context, a, 'length', actualDeleteCount);\n-\n-    // 13. Let items be a List whose elements are, in left-to-right order,\n-    //     the portion of the actual argument list starting with the third\n-    //     argument. The list is empty if fewer than three arguments were\n-    //     passed.\n-    // 14. Let itemCount be the Number of elements in items.\n-    let itemCount: Number = insertCount;\n-\n-    // 15. If itemCount < actualDeleteCount, then\n-    if (itemCount < actualDeleteCount) {\n-      // a. Let k be actualStart.\n-      let k: Number = actualStart;\n-\n-      // b. Repeat, while k < (len - actualDeleteCount)\n-      while (k < (len - actualDeleteCount)) {\n-        // i. Let from be ! ToString(k + actualDeleteCount).\n-        let from: String = ToString_Inline(context, k + actualDeleteCount);\n-        // ii. Let to be ! ToString(k + itemCount).\n-        let to: String = ToString_Inline(context, k + itemCount);\n-\n-        // iii. Let fromPresent be ? HasProperty(O, from).\n-        let fromPresent: Oddball = HasProperty(context, o, from);\n-\n-        // iv. If fromPresent is true, then\n-        if (fromPresent == True) {\n-          // 1. Let fromValue be ? Get(O, from).\n-          let fromValue: Object = GetProperty(context, o, from);\n-\n-          // 2. Perform ? Set(O, to, fromValue, true).\n-          SetProperty(context, o, to, fromValue);\n-\n-          // v. Else fromPresent is false,\n-        } else {\n-          // 1. Perform ? DeletePropertyOrThrow(O, to).\n-          DeleteProperty(context, o, to, kStrict);\n-        }\n-        // vi. Increase k by 1.\n-        k = k + 1;\n-      }\n-\n-      // c. Let k be len.\n-      k = len;\n-      // d. Repeat, while k > (len - actualDeleteCount + itemCount)\n-      while (k > (len - actualDeleteCount + itemCount)) {\n-        // i. Perform ? DeletePropertyOrThrow(O, ! ToString(k - 1)).\n-        DeleteProperty(context, o, ToString_Inline(context, k - 1), kStrict);\n-\n-        // ii. Decrease k by 1.\n-        k = k - 1;\n-      }\n-      // 16. Else if itemCount > actualDeleteCount, then\n-    } else if (itemCount > actualDeleteCount) {\n-      // a. Let k be (len - actualDeleteCount).\n-      let k: Number = len - actualDeleteCount;\n-\n-      // b. Repeat, while k > actualStart\n-      while (k > actualStart) {\n-        // i. Let from be ! ToString(k + actualDeleteCount - 1).\n-        let from: String = ToString_Inline(context, k + actualDeleteCount - 1);\n-\n-        // ii. Let to be ! ToString(k + itemCount - 1).\n-        let to: String = ToString_Inline(context, k + itemCount - 1);\n-\n-        // iii. Let fromPresent be ? HasProperty(O, from).\n-        let fromPresent: Oddball = HasProperty(context, o, from);\n-\n-        // iv. If fromPresent is true, then\n-        if (fromPresent == True) {\n-          // 1. Let fromValue be ? Get(O, from).\n-          let fromValue: Object = GetProperty(context, o, from);\n+  macro StoreArrayHole(elements: FixedDoubleArray, k: Smi): void {\n+    StoreFixedDoubleArrayHoleSmi(elements, k);\n+  }\n \n-          // 2. Perform ? Set(O, to, fromValue, true).\n-          SetProperty(context, o, to, fromValue);\n+  macro StoreArrayHole(elements: FixedArray, k: Smi): void {\n+    elements[k] = Hole;\n+  }\n \n-          // v. Else fromPresent is false,\n-        } else {\n-          // 1. Perform ? DeletePropertyOrThrow(O, to).\n-          DeleteProperty(context, o, to, kStrict);\n-        }\n+  macro CopyArrayElement(\n+      elements: FixedArray, newElements: FixedArray, from: Smi, to: Smi): void {\n+    const e: Object = elements[from];\n+    newElements[to] = e;\n+  }\n \n-        // vi. Decrease k by 1.\n-        k = k - 1;\n-      }\n+  macro CopyArrayElement(\n+      elements: FixedDoubleArray, newElements: FixedDoubleArray, from: Smi,\n+      to: Smi): void {\n+    try {\n+      const floatValue: float64 = LoadDoubleWithHoleCheck(elements, from)\n+          otherwise FoundHole;\n+      newElements[to] = floatValue;\n     }\n-\n-    // 17. Let k be actualStart.\n-    k = actualStart;\n-\n-    // 18. Repeat, while items is not empty\n-    //   a. Remove the first element from items and let E be the value of that\n-    //   element.\n-    if (arguments.length > 2) {\n-      for (let e: Object of arguments [2: ]) {\n-        // b. Perform ? Set(O, ! ToString(k), E, true).\n-        SetProperty(context, o, ToString_Inline(context, k), e);\n-\n-        // c. Increase k by 1.\n-        k = k + 1;\n-      }\n+    label FoundHole {\n+      StoreArrayHole(newElements, to);\n     }\n-\n-    // 19. Perform ? Set(O, \"length\", len - actualDeleteCount + itemCount,\n-    // true).\n-    SetProperty(context, o, 'length', len - actualDeleteCount + itemCount);\n-\n-    return a;\n   }\n }"
        },
        {
            "sha": "20c4f4b9e03dd83d3e928a28b229225ea951ed0f",
            "filename": "deps/v8/src/builtins/base.tq",
            "status": "modified",
            "additions": 429,
            "deletions": 224,
            "changes": 653,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbase.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -26,6 +26,7 @@ type AbstractCode extends HeapObject generates 'TNode<AbstractCode>';\n type Code extends AbstractCode generates 'TNode<Code>';\n type JSReceiver extends HeapObject generates 'TNode<JSReceiver>';\n type Context extends HeapObject generates 'TNode<Context>';\n+type NativeContext extends Context generates 'TNode<Context>';\n type String extends HeapObject generates 'TNode<String>';\n type Oddball extends HeapObject generates 'TNode<Oddball>';\n type HeapNumber extends HeapObject generates 'TNode<HeapNumber>';\n@@ -35,65 +36,95 @@ type Numeric = Number|BigInt;\n type Boolean extends Oddball generates 'TNode<Oddball>';\n type JSProxy extends JSReceiver generates 'TNode<JSProxy>';\n type JSObject extends JSReceiver generates 'TNode<JSObject>';\n-type JSArray extends JSObject generates 'TNode<JSArray>';\n+type JSArgumentsObjectWithLength extends JSObject\n+    generates 'TNode<JSArgumentsObjectWithLength>';\n+type JSArray extends JSArgumentsObjectWithLength\n+    generates 'TNode<JSArray>';\n type JSFunction extends JSObject generates 'TNode<JSFunction>';\n type JSBoundFunction extends JSObject generates 'TNode<JSBoundFunction>';\n type Callable = JSFunction|JSBoundFunction|JSProxy;\n type Map extends HeapObject generates 'TNode<Map>';\n type FixedArrayBase extends HeapObject generates 'TNode<FixedArrayBase>';\n type FixedArray extends FixedArrayBase generates 'TNode<FixedArray>';\n-type FixedDoubleArray extends FixedArrayBase generates\n-'TNode<FixedDoubleArray>';\n-type FixedTypedArrayBase extends FixedArrayBase generates\n-'TNode<FixedTypedArrayBase>';\n-type FixedTypedArray extends FixedTypedArrayBase generates\n-'TNode<FixedTypedArray>';\n-type NumberDictionary extends HeapObject generates 'TNode<NumberDictionary>';\n+type FixedDoubleArray extends FixedArrayBase\n+    generates 'TNode<FixedDoubleArray>';\n+type FixedTypedArrayBase extends FixedArrayBase\n+    generates 'TNode<FixedTypedArrayBase>';\n+type FixedTypedArray extends FixedTypedArrayBase\n+    generates 'TNode<FixedTypedArray>';\n+type NumberDictionary extends HeapObject\n+    generates 'TNode<NumberDictionary>';\n+\n+type NativeContextSlot generates 'TNode<IntPtrT>' constexpr 'int32_t';\n+const FAST_ALIASED_ARGUMENTS_MAP_INDEX: constexpr NativeContextSlot\n+    generates 'Context::FAST_ALIASED_ARGUMENTS_MAP_INDEX';\n+const SLOW_ALIASED_ARGUMENTS_MAP_INDEX: constexpr NativeContextSlot\n+    generates 'Context::SLOW_ALIASED_ARGUMENTS_MAP_INDEX';\n+const STRICT_ARGUMENTS_MAP_INDEX: constexpr NativeContextSlot\n+    generates 'Context::STRICT_ARGUMENTS_MAP_INDEX';\n+const SLOPPY_ARGUMENTS_MAP_INDEX: constexpr NativeContextSlot\n+    generates 'Context::SLOPPY_ARGUMENTS_MAP_INDEX';\n+extern operator '[]' macro LoadContextElement(\n+    NativeContext, NativeContextSlot): Object;\n+\n+extern operator '[]' macro LoadContextElement(Context, intptr): Object;\n+extern operator '[]' macro LoadContextElement(Context, Smi): Object;\n \n type JSArrayBuffer extends JSObject generates 'TNode<JSArrayBuffer>';\n-type JSArrayBufferView extends JSObject generates 'TNode<JSArrayBufferView>';\n-type JSTypedArray extends JSArrayBufferView generates 'TNode<JSTypedArray>';\n+type JSArrayBufferView extends JSObject\n+    generates 'TNode<JSArrayBufferView>';\n+type JSTypedArray extends JSArrayBufferView\n+    generates 'TNode<JSTypedArray>';\n type JSDataView extends JSArrayBufferView generates 'TNode<JSDataView>';\n \n type InstanceType generates 'TNode<Int32T>' constexpr 'InstanceType';\n type ElementsKind generates 'TNode<Int32T>' constexpr 'ElementsKind';\n type LanguageMode generates 'TNode<Smi>' constexpr 'LanguageMode';\n-type ExtractFixedArrayFlags generates\n-'TNode<Smi>' constexpr 'ExtractFixedArrayFlags';\n+type ExtractFixedArrayFlags\n+    generates 'TNode<Smi>' constexpr 'ExtractFixedArrayFlags';\n type ParameterMode generates 'TNode<Int32T>' constexpr 'ParameterMode';\n-type RootListIndex generates 'TNode<Int32T>' constexpr 'Heap::RootListIndex';\n-type WriteBarrierMode generates 'TNode<Int32T>' constexpr 'WriteBarrierMode';\n+type RootIndex generates 'TNode<Int32T>' constexpr 'RootIndex';\n+type WriteBarrierMode\n+    generates 'TNode<Int32T>' constexpr 'WriteBarrierMode';\n \n type MessageTemplate constexpr 'MessageTemplate::Template';\n \n type ToIntegerTruncationMode constexpr 'ToIntegerTruncationMode';\n \n const NO_ELEMENTS: constexpr ElementsKind generates 'NO_ELEMENTS';\n \n-const PACKED_SMI_ELEMENTS: constexpr ElementsKind generates\n-'PACKED_SMI_ELEMENTS';\n-const HOLEY_SMI_ELEMENTS: constexpr ElementsKind generates 'HOLEY_SMI_ELEMENTS';\n-const PACKED_ELEMENTS: constexpr ElementsKind generates 'PACKED_ELEMENTS';\n+const PACKED_SMI_ELEMENTS:\n+    constexpr ElementsKind generates 'PACKED_SMI_ELEMENTS';\n+const HOLEY_SMI_ELEMENTS:\n+    constexpr ElementsKind generates 'HOLEY_SMI_ELEMENTS';\n+const PACKED_ELEMENTS:\n+    constexpr ElementsKind generates 'PACKED_ELEMENTS';\n const HOLEY_ELEMENTS: constexpr ElementsKind generates 'HOLEY_ELEMENTS';\n-const PACKED_DOUBLE_ELEMENTS: constexpr ElementsKind generates\n-'PACKED_DOUBLE_ELEMENTS';\n-const HOLEY_DOUBLE_ELEMENTS: constexpr ElementsKind generates\n-'HOLEY_DOUBLE_ELEMENTS';\n-const DICTIONARY_ELEMENTS: constexpr ElementsKind generates\n-'DICTIONARY_ELEMENTS';\n+const PACKED_DOUBLE_ELEMENTS:\n+    constexpr ElementsKind generates 'PACKED_DOUBLE_ELEMENTS';\n+const HOLEY_DOUBLE_ELEMENTS:\n+    constexpr ElementsKind generates 'HOLEY_DOUBLE_ELEMENTS';\n+const DICTIONARY_ELEMENTS:\n+    constexpr ElementsKind generates 'DICTIONARY_ELEMENTS';\n \n const UINT8_ELEMENTS: constexpr ElementsKind generates 'UINT8_ELEMENTS';\n const INT8_ELEMENTS: constexpr ElementsKind generates 'INT8_ELEMENTS';\n-const UINT16_ELEMENTS: constexpr ElementsKind generates 'UINT16_ELEMENTS';\n+const UINT16_ELEMENTS:\n+    constexpr ElementsKind generates 'UINT16_ELEMENTS';\n const INT16_ELEMENTS: constexpr ElementsKind generates 'INT16_ELEMENTS';\n-const UINT32_ELEMENTS: constexpr ElementsKind generates 'UINT32_ELEMENTS';\n+const UINT32_ELEMENTS:\n+    constexpr ElementsKind generates 'UINT32_ELEMENTS';\n const INT32_ELEMENTS: constexpr ElementsKind generates 'INT32_ELEMENTS';\n-const FLOAT32_ELEMENTS: constexpr ElementsKind generates 'FLOAT32_ELEMENTS';\n-const FLOAT64_ELEMENTS: constexpr ElementsKind generates 'FLOAT64_ELEMENTS';\n-const UINT8_CLAMPED_ELEMENTS: constexpr ElementsKind generates\n-'UINT8_CLAMPED_ELEMENTS';\n-const BIGUINT64_ELEMENTS: constexpr ElementsKind generates 'BIGUINT64_ELEMENTS';\n-const BIGINT64_ELEMENTS: constexpr ElementsKind generates 'BIGINT64_ELEMENTS';\n+const FLOAT32_ELEMENTS:\n+    constexpr ElementsKind generates 'FLOAT32_ELEMENTS';\n+const FLOAT64_ELEMENTS:\n+    constexpr ElementsKind generates 'FLOAT64_ELEMENTS';\n+const UINT8_CLAMPED_ELEMENTS:\n+    constexpr ElementsKind generates 'UINT8_CLAMPED_ELEMENTS';\n+const BIGUINT64_ELEMENTS:\n+    constexpr ElementsKind generates 'BIGUINT64_ELEMENTS';\n+const BIGINT64_ELEMENTS:\n+    constexpr ElementsKind generates 'BIGINT64_ELEMENTS';\n \n type FixedUint8Array extends FixedTypedArray;\n type FixedInt8Array extends FixedTypedArray;\n@@ -107,40 +138,42 @@ type FixedUint8ClampedArray extends FixedTypedArray;\n type FixedBigUint64Array extends FixedTypedArray;\n type FixedBigInt64Array extends FixedTypedArray;\n \n-const kAllFixedArrays: constexpr ExtractFixedArrayFlags generates\n-'ExtractFixedArrayFlag::kAllFixedArrays';\n-const kFixedArrays: constexpr ExtractFixedArrayFlags generates\n-'ExtractFixedArrayFlag::kFixedArrays';\n-\n-const kFixedCOWArrayMapRootIndex: constexpr RootListIndex generates\n-'Heap::kFixedCOWArrayMapRootIndex';\n-const kEmptyFixedArrayRootIndex: constexpr RootListIndex generates\n-'Heap::kEmptyFixedArrayRootIndex';\n-\n-const kInvalidArrayLength: constexpr MessageTemplate generates\n-'MessageTemplate::kInvalidArrayLength';\n-const kCalledNonCallable: constexpr MessageTemplate generates\n-'MessageTemplate::kCalledNonCallable';\n-const kCalledOnNullOrUndefined: constexpr MessageTemplate generates\n-'MessageTemplate::kCalledOnNullOrUndefined';\n+const kFixedDoubleArrays: constexpr ExtractFixedArrayFlags\n+    generates 'ExtractFixedArrayFlag::kFixedDoubleArrays';\n+const kAllFixedArrays: constexpr ExtractFixedArrayFlags\n+    generates 'ExtractFixedArrayFlag::kAllFixedArrays';\n+const kFixedArrays: constexpr ExtractFixedArrayFlags\n+    generates 'ExtractFixedArrayFlag::kFixedArrays';\n+\n+const kFixedCOWArrayMapRootIndex:\n+    constexpr RootIndex generates 'RootIndex::kFixedCOWArrayMap';\n+const kEmptyFixedArrayRootIndex:\n+    constexpr RootIndex generates 'RootIndex::kEmptyFixedArray';\n+\n+const kInvalidArrayLength: constexpr MessageTemplate\n+    generates 'MessageTemplate::kInvalidArrayLength';\n+const kCalledNonCallable: constexpr MessageTemplate\n+    generates 'MessageTemplate::kCalledNonCallable';\n+const kCalledOnNullOrUndefined: constexpr MessageTemplate\n+    generates 'MessageTemplate::kCalledOnNullOrUndefined';\n \n const kMaxSafeInteger: constexpr float64 generates 'kMaxSafeInteger';\n \n-const kTruncateMinusZero: constexpr ToIntegerTruncationMode generates\n-'ToIntegerTruncationMode::kTruncateMinusZero';\n-\n-const kNotTypedArray: constexpr MessageTemplate generates\n-'MessageTemplate::kNotTypedArray';\n-const kDetachedOperation: constexpr MessageTemplate generates\n-'MessageTemplate::kDetachedOperation';\n-const kBadSortComparisonFunction: constexpr MessageTemplate generates\n-'MessageTemplate::kBadSortComparisonFunction';\n-const kIncompatibleMethodReceiver: constexpr MessageTemplate generates\n-'MessageTemplate::kIncompatibleMethodReceiver';\n-const kInvalidDataViewAccessorOffset: constexpr MessageTemplate generates\n-'MessageTemplate::kInvalidDataViewAccessorOffset';\n-const kStrictReadOnlyProperty: constexpr MessageTemplate generates\n-'MessageTemplate::kStrictReadOnlyProperty';\n+const kTruncateMinusZero: constexpr ToIntegerTruncationMode\n+    generates 'ToIntegerTruncationMode::kTruncateMinusZero';\n+\n+const kNotTypedArray: constexpr MessageTemplate\n+    generates 'MessageTemplate::kNotTypedArray';\n+const kDetachedOperation: constexpr MessageTemplate\n+    generates 'MessageTemplate::kDetachedOperation';\n+const kBadSortComparisonFunction: constexpr MessageTemplate\n+    generates 'MessageTemplate::kBadSortComparisonFunction';\n+const kIncompatibleMethodReceiver: constexpr MessageTemplate\n+    generates 'MessageTemplate::kIncompatibleMethodReceiver';\n+const kInvalidDataViewAccessorOffset: constexpr MessageTemplate\n+    generates 'MessageTemplate::kInvalidDataViewAccessorOffset';\n+const kStrictReadOnlyProperty: constexpr MessageTemplate\n+    generates 'MessageTemplate::kStrictReadOnlyProperty';\n \n extern macro TheHoleConstant(): Oddball;\n extern macro NullConstant(): Oddball;\n@@ -149,12 +182,14 @@ extern macro TrueConstant(): Boolean;\n extern macro FalseConstant(): Boolean;\n extern macro Int32TrueConstant(): bool;\n extern macro Int32FalseConstant(): bool;\n+extern macro LengthStringConstant(): String;\n \n const Hole: Oddball = TheHoleConstant();\n const Null: Oddball = NullConstant();\n const Undefined: Oddball = UndefinedConstant();\n const True: Boolean = TrueConstant();\n const False: Boolean = FalseConstant();\n+const kLengthString: String = LengthStringConstant();\n \n const true: constexpr bool generates 'true';\n const false: constexpr bool generates 'false';\n@@ -163,18 +198,19 @@ const kStrict: constexpr LanguageMode generates 'LanguageMode::kStrict';\n const kSloppy: constexpr LanguageMode generates 'LanguageMode::kSloppy';\n \n const SMI_PARAMETERS: constexpr ParameterMode generates 'SMI_PARAMETERS';\n-const INTPTR_PARAMETERS: constexpr ParameterMode generates 'INTPTR_PARAMETERS';\n-\n+const INTPTR_PARAMETERS:\n+    constexpr ParameterMode generates 'INTPTR_PARAMETERS';\n \n-const SKIP_WRITE_BARRIER: constexpr WriteBarrierMode\n-    generates 'SKIP_WRITE_BARRIER';\n+const SKIP_WRITE_BARRIER:\n+    constexpr WriteBarrierMode generates 'SKIP_WRITE_BARRIER';\n \n extern macro Is64(): constexpr bool;\n \n extern macro SelectBooleanConstant(bool): Boolean;\n \n extern macro Print(constexpr string);\n extern macro Print(constexpr string, Object);\n+extern macro Comment(constexpr string);\n extern macro Print(Object);\n extern macro DebugBreak();\n extern macro ToInteger_Inline(Context, Object): Number;\n@@ -187,14 +223,18 @@ extern macro GetProperty(Context, Object, Object): Object;\n extern builtin SetProperty(Context, Object, Object, Object);\n extern builtin DeleteProperty(Context, Object, Object, LanguageMode);\n extern builtin HasProperty(Context, JSReceiver, Object): Boolean;\n+extern macro HasProperty_Inline(Context, JSReceiver, Object): Boolean;\n \n extern macro ThrowRangeError(Context, constexpr MessageTemplate): never;\n extern macro ThrowTypeError(Context, constexpr MessageTemplate): never;\n extern macro ThrowTypeError(Context, constexpr MessageTemplate, Object): never;\n extern macro ThrowTypeError(\n     Context, constexpr MessageTemplate, Object, Object, Object): never;\n-extern macro ArraySpeciesCreate(Context, Object, Number): Object;\n-extern macro EnsureArrayPushable(Map): ElementsKind labels Bailout;\n+extern macro ArraySpeciesCreate(Context, Object, Number): JSReceiver;\n+extern macro InternalArrayCreate(Context, Number): JSArray;\n+extern macro EnsureArrayPushable(Map): ElementsKind\n+    labels Bailout;\n+extern macro EnsureArrayLengthWritable(Map) labels Bailout;\n \n extern builtin ToObject(Context, Object): JSReceiver;\n extern macro ToObject_Inline(Context, Object): JSReceiver;\n@@ -203,17 +243,19 @@ extern macro IsTheHole(Object): bool;\n extern macro IsString(HeapObject): bool;\n extern builtin ToString(Context, Object): String;\n \n-extern runtime CreateDataProperty(Context, Object, Object, Object);\n+extern runtime NormalizeElements(Context, JSObject);\n+extern runtime TransitionElementsKindWithKind(Context, JSObject, Smi);\n+extern runtime CreateDataProperty(Context, JSReceiver, Object, Object);\n \n-extern macro LoadRoot(constexpr RootListIndex): Object;\n-extern macro StoreRoot(constexpr RootListIndex, Object): Object;\n-extern macro LoadAndUntagToWord32Root(constexpr RootListIndex): int32;\n+extern macro LoadRoot(constexpr RootIndex): Object;\n+extern macro StoreRoot(constexpr RootIndex, Object): Object;\n+extern macro LoadAndUntagToWord32Root(constexpr RootIndex): int32;\n \n extern runtime StringEqual(Context, String, String): Oddball;\n extern builtin StringLessThan(Context, String, String): Boolean;\n \n extern macro StrictEqual(Object, Object): Boolean;\n-extern runtime SmiLexicographicCompare(Context, Object, Object): Number;\n+extern macro SmiLexicographicCompare(Smi, Smi): Smi;\n \n extern operator '<' macro Int32LessThan(int32, int32): bool;\n extern operator '>' macro Int32GreaterThan(int32, int32): bool;\n@@ -230,6 +272,10 @@ extern operator '>=' macro SmiGreaterThanOrEqual(Smi, Smi): bool;\n extern operator '==' macro ElementsKindEqual(\n     constexpr ElementsKind, constexpr ElementsKind): constexpr bool;\n extern operator '==' macro ElementsKindEqual(ElementsKind, ElementsKind): bool;\n+operator '!=' macro ElementsKindNotEqual(\n+    k1: ElementsKind, k2: ElementsKind): bool {\n+  return !ElementsKindEqual(k1, k2);\n+}\n extern macro IsFastElementsKind(constexpr ElementsKind): constexpr bool;\n extern macro IsDoubleElementsKind(constexpr ElementsKind): constexpr bool;\n \n@@ -243,22 +289,25 @@ extern operator '<' macro IntPtrLessThan(intptr, intptr): bool;\n extern operator '>' macro IntPtrGreaterThan(intptr, intptr): bool;\n extern operator '<=' macro IntPtrLessThanOrEqual(intptr, intptr): bool;\n extern operator '>=' macro IntPtrGreaterThanOrEqual(intptr, intptr): bool;\n+extern operator '>' macro UintPtrGreaterThan(uintptr, uintptr): bool;\n extern operator '>=' macro UintPtrGreaterThanOrEqual(uintptr, uintptr): bool;\n \n extern operator '==' macro Float64Equal(float64, float64): bool;\n extern operator '!=' macro Float64NotEqual(float64, float64): bool;\n+extern operator '>' macro Float64GreaterThan(float64, float64): bool;\n+\n+extern operator '==' macro BranchIfNumberEqual(Number, Number): never\n+    labels Taken, NotTaken;\n+extern operator '<' macro BranchIfNumberLessThan(Number, Number): never\n+    labels Taken, NotTaken;\n+extern operator '<=' macro BranchIfNumberLessThanOrEqual(Number, Number): never\n+    labels Taken, NotTaken;\n \n-extern operator\n-'<' macro BranchIfNumberLessThan(Number, Number): never labels Taken, NotTaken;\n-extern operator\n-'<=' macro BranchIfNumberLessThanOrEqual(Number, Number): never labels Taken,\n-    NotTaken;\n-extern operator\n-'>' macro BranchIfNumberGreaterThan(Number, Number): never labels Taken,\n-    NotTaken;\n+extern operator '>' macro BranchIfNumberGreaterThan(Number, Number): never\n+    labels Taken, NotTaken;\n extern operator '>=' macro BranchIfNumberGreaterThanOrEqual(Number, Number):\n-    never labels Taken,\n-    NotTaken;\n+    never\n+    labels Taken, NotTaken;\n \n extern operator '==' macro WordEqual(Object, Object): bool;\n extern operator '!=' macro WordNotEqual(Object, Object): bool;\n@@ -271,6 +320,7 @@ extern operator '>>>' macro SmiShr(Smi, constexpr int31): Smi;\n extern operator '<<' macro SmiShl(Smi, constexpr int31): Smi;\n \n extern operator '+' macro IntPtrAdd(intptr, intptr): intptr;\n+extern operator '+' macro UintPtrAdd(uintptr, uintptr): uintptr;\n extern operator '-' macro IntPtrSub(intptr, intptr): intptr;\n extern operator '>>>' macro WordShr(uintptr, uintptr): uintptr;\n extern operator '<<' macro WordShl(intptr, intptr): intptr;\n@@ -296,14 +346,16 @@ extern operator '<<' macro Word32Shl(uint32, uint32): uint32;\n extern operator '|' macro Word32Or(int32, int32): int32;\n extern operator '|' macro Word32Or(uint32, uint32): uint32;\n \n+extern operator '+' macro Float64Add(float64, float64): float64;\n+\n extern operator '+' macro NumberAdd(Number, Number): Number;\n extern operator '-' macro NumberSub(Number, Number): Number;\n extern macro NumberMin(Number, Number): Number;\n extern macro NumberMax(Number, Number): Number;\n-macro min(x: Number, y: Number): Number {\n+macro Min(x: Number, y: Number): Number {\n   return NumberMin(x, y);\n }\n-macro max(x: Number, y: Number): Number {\n+macro Max(x: Number, y: Number): Number {\n   return NumberMax(x, y);\n }\n \n@@ -316,68 +368,89 @@ extern operator '!' macro IsFalse(Boolean): bool;\n \n extern operator '.map' macro LoadMap(HeapObject): Map;\n extern operator '.map=' macro StoreMap(HeapObject, Map);\n-extern operator\n-'.instanceType' macro LoadInstanceType(HeapObject): InstanceType;\n+extern operator '.instanceType' macro LoadInstanceType(HeapObject):\n+    InstanceType;\n \n extern operator '.length' macro LoadStringLengthAsWord(String): intptr;\n \n extern operator '.length' macro GetArgumentsLength(constexpr Arguments): intptr;\n-extern operator\n-'[]' macro GetArgumentValue(constexpr Arguments, intptr): Object;\n+extern operator '[]' macro GetArgumentValue(\n+    constexpr Arguments, intptr): Object;\n \n-extern operator 'is<Smi>' macro TaggedIsSmi(Object): bool;\n-extern operator 'isnt<Smi>' macro TaggedIsNotSmi(Object): bool;\n+extern macro TaggedIsSmi(Object): bool;\n+extern macro TaggedIsNotSmi(Object): bool;\n extern macro TaggedIsPositiveSmi(Object): bool;\n \n-extern macro HeapObjectToJSDataView(HeapObject): JSDataView labels CastError;\n-extern macro TaggedToHeapObject(Object): HeapObject labels CastError;\n-extern macro TaggedToSmi(Object): Smi labels CastError;\n-extern macro HeapObjectToJSArray(HeapObject): JSArray labels CastError;\n-extern macro HeapObjectToCallable(HeapObject): Callable labels CastError;\n-extern macro HeapObjectToFixedArray(HeapObject):\n-    FixedArray labels CastError;\n-extern macro HeapObjectToFixedDoubleArray(HeapObject):\n-    FixedDoubleArray labels CastError;\n-extern macro TaggedToNumber(Object): Number labels CastError;\n-\n-macro cast_HeapObject<A : type>(o : HeapObject) : A labels CastError;\n-cast_HeapObject<HeapObject>(o : HeapObject) : HeapObject labels CastError { return o; }\n-cast_HeapObject<FixedArray>(o: HeapObject): FixedArray labels CastError {\n+extern macro HeapObjectToJSDataView(HeapObject): JSDataView\n+    labels CastError;\n+extern macro TaggedToHeapObject(Object): HeapObject\n+    labels CastError;\n+extern macro TaggedToSmi(Object): Smi\n+    labels CastError;\n+extern macro HeapObjectToJSArray(HeapObject): JSArray\n+    labels CastError;\n+extern macro HeapObjectToCallable(HeapObject): Callable\n+    labels CastError;\n+extern macro HeapObjectToFixedArray(HeapObject): FixedArray\n+    labels CastError;\n+extern macro HeapObjectToFixedDoubleArray(HeapObject): FixedDoubleArray\n+    labels CastError;\n+extern macro TaggedToNumber(Object): Number\n+    labels CastError;\n+\n+macro CastHeapObject<A: type>(o: HeapObject): A\n+    labels CastError;\n+CastHeapObject<HeapObject>(o: HeapObject): HeapObject\n+    labels CastError {\n+  return o;\n+}\n+CastHeapObject<FixedArray>(o: HeapObject): FixedArray\n+    labels CastError {\n   return HeapObjectToFixedArray(o) otherwise CastError;\n }\n-cast_HeapObject<FixedDoubleArray>(o: HeapObject): FixedDoubleArray labels CastError {\n+CastHeapObject<FixedDoubleArray>(o: HeapObject): FixedDoubleArray\n+    labels CastError {\n   return HeapObjectToFixedDoubleArray(o) otherwise CastError;\n }\n-cast_HeapObject<JSDataView>(o: HeapObject): JSDataView labels CastError {\n+CastHeapObject<JSDataView>(o: HeapObject): JSDataView\n+    labels CastError {\n   return HeapObjectToJSDataView(o) otherwise CastError;\n }\n-cast_HeapObject<Callable>(o: HeapObject): Callable labels CastError {\n+CastHeapObject<Callable>(o: HeapObject): Callable\n+    labels CastError {\n   return HeapObjectToCallable(o) otherwise CastError;\n }\n-cast_HeapObject<JSArray>(o: HeapObject): JSArray labels CastError {\n+CastHeapObject<JSArray>(o: HeapObject): JSArray\n+    labels CastError {\n   return HeapObjectToJSArray(o) otherwise CastError;\n }\n \n-macro cast<A : type>(o: HeapObject): A labels CastError {\n-  return cast_HeapObject<A>(o) otherwise CastError;\n+macro Cast<A: type>(o: HeapObject): A\n+    labels CastError {\n+  return CastHeapObject<A>(o) otherwise CastError;\n }\n \n-// cast_HeapObject allows this default-implementation to be non-recursive.\n+// CastHeapObject allows this default-implementation to be non-recursive.\n // Otherwise the generated CSA code might run into infinite recursion.\n-macro cast<A : type>(o: Object): A labels CastError {\n-  return cast_HeapObject<A>(\n-    TaggedToHeapObject(o) otherwise CastError) otherwise CastError;\n+macro Cast<A: type>(o: Object): A\n+    labels CastError {\n+  return CastHeapObject<A>(TaggedToHeapObject(o) otherwise CastError)\n+      otherwise CastError;\n }\n-cast<Smi>(o: Object): Smi labels CastError {\n+Cast<Smi>(o: Object): Smi\n+    labels CastError {\n   return TaggedToSmi(o) otherwise CastError;\n }\n-cast<Number>(o: Object): Number labels CastError {\n+Cast<Number>(o: Object): Number\n+    labels CastError {\n   return TaggedToNumber(o) otherwise CastError;\n }\n \n extern macro AllocateHeapNumberWithValue(float64): HeapNumber;\n extern macro ChangeInt32ToTagged(int32): Number;\n extern macro ChangeUint32ToTagged(uint32): Number;\n+extern macro ChangeUintPtrToFloat64(uintptr): float64;\n+extern macro ChangeUintPtrToTagged(uintptr): Number;\n extern macro Unsigned(int32): uint32;\n extern macro Unsigned(intptr): uintptr;\n extern macro Unsigned(RawPtr): uintptr;\n@@ -396,6 +469,8 @@ extern macro ChangeNumberToFloat64(Number): float64;\n extern macro ChangeFloat64ToUintPtr(float64): uintptr;\n extern macro ChangeInt32ToIntPtr(int32): intptr;   // Sign-extends.\n extern macro ChangeUint32ToWord(uint32): uintptr;  // Doesn't sign-extend.\n+extern macro LoadNativeContext(Context): NativeContext;\n+extern macro LoadJSArrayElementsMap(constexpr ElementsKind, Context): Map;\n \n extern macro NumberConstant(constexpr float64): Number;\n extern macro NumberConstant(constexpr int32): Number;\n@@ -409,137 +484,157 @@ extern macro BoolConstant(constexpr bool): bool;\n extern macro StringConstant(constexpr string): String;\n extern macro LanguageModeConstant(constexpr LanguageMode): LanguageMode;\n extern macro Int32Constant(constexpr ElementsKind): ElementsKind;\n+extern macro IntPtrConstant(constexpr NativeContextSlot): NativeContextSlot;\n \n-macro from_constexpr<A : type>(o: constexpr int31): A;\n-from_constexpr<intptr>(i: constexpr int31): intptr {\n+macro FromConstexpr<A: type>(o: constexpr int31): A;\n+FromConstexpr<intptr>(i: constexpr int31): intptr {\n   return IntPtrConstant(i);\n }\n-from_constexpr<int31>(i: constexpr int31): int31 {\n+FromConstexpr<int31>(i: constexpr int31): int31 {\n   return Int32Constant(i);\n }\n-from_constexpr<int32>(i: constexpr int31): int32 {\n+FromConstexpr<int32>(i: constexpr int31): int32 {\n   return Int32Constant(i);\n }\n-from_constexpr<uint32>(i: constexpr int31): uint32 {\n+FromConstexpr<uint32>(i: constexpr int31): uint32 {\n   return Unsigned(Int32Constant(i));\n }\n-from_constexpr<uintptr>(i: constexpr int31): uintptr {\n+FromConstexpr<uintptr>(i: constexpr int31): uintptr {\n   return ChangeUint32ToWord(i);\n }\n-from_constexpr<Smi>(i: constexpr int31): Smi {\n+FromConstexpr<Smi>(i: constexpr int31): Smi {\n   return SmiConstant(i);\n }\n-from_constexpr<Number>(i: constexpr int31): Number {\n+FromConstexpr<Number>(i: constexpr int31): Number {\n   return SmiConstant(i);\n }\n-from_constexpr<float64>(i: constexpr int31): float64 {\n+FromConstexpr<float64>(i: constexpr int31): float64 {\n   return Float64Constant(i);\n }\n-macro from_constexpr<A : type>(o: constexpr int32): A;\n-from_constexpr<intptr>(i: constexpr int32): intptr {\n+macro FromConstexpr<A: type>(o: constexpr int32): A;\n+FromConstexpr<intptr>(i: constexpr int32): intptr {\n   return IntPtrConstant(i);\n }\n-from_constexpr<int32>(i: constexpr int32): int32 {\n+FromConstexpr<int32>(i: constexpr int32): int32 {\n   return Int32Constant(i);\n }\n-from_constexpr<Number>(i: constexpr int32): Number {\n+FromConstexpr<Number>(i: constexpr int32): Number {\n   return NumberConstant(i);\n }\n-macro from_constexpr<A : type>(o: constexpr float64): A;\n-from_constexpr<Number>(f: constexpr float64): Number {\n+macro FromConstexpr<A: type>(o: constexpr float64): A;\n+FromConstexpr<Number>(f: constexpr float64): Number {\n   return NumberConstant(f);\n }\n-macro from_constexpr<A : type>(b: constexpr bool): A;\n-from_constexpr<bool>(b: constexpr bool): bool {\n+macro FromConstexpr<A: type>(b: constexpr bool): A;\n+FromConstexpr<bool>(b: constexpr bool): bool {\n   return BoolConstant(b);\n }\n-macro from_constexpr<A : type>(l: constexpr LanguageMode): A;\n-from_constexpr<LanguageMode>(b: constexpr LanguageMode): LanguageMode {\n+macro FromConstexpr<A: type>(l: constexpr LanguageMode): A;\n+FromConstexpr<LanguageMode>(b: constexpr LanguageMode): LanguageMode {\n   return LanguageModeConstant(b);\n }\n-macro from_constexpr<A : type>(e: constexpr ElementsKind): A;\n-from_constexpr<ElementsKind>(e: constexpr ElementsKind): ElementsKind {\n+macro FromConstexpr<A: type>(e: constexpr ElementsKind): A;\n+FromConstexpr<ElementsKind>(e: constexpr ElementsKind): ElementsKind {\n   return Int32Constant(e);\n }\n-macro from_constexpr<A : type>(s: constexpr string): A;\n-from_constexpr<String>(s: constexpr string): String {\n+macro FromConstexpr<A: type>(s: constexpr string): A;\n+FromConstexpr<String>(s: constexpr string): String {\n   return StringConstant(s);\n }\n-from_constexpr<Object>(s: constexpr string): Object {\n+FromConstexpr<Object>(s: constexpr string): Object {\n   return StringConstant(s);\n }\n+macro FromConstexpr<A: type>(e: constexpr NativeContextSlot): A;\n+FromConstexpr<NativeContextSlot>(c: constexpr NativeContextSlot):\n+    NativeContextSlot {\n+  return IntPtrConstant(c);\n+}\n \n-macro convert<A : type>(i: constexpr int31): A {\n+macro Convert<A: type>(i: constexpr int31): A {\n   return i;\n }\n-macro convert<A : type>(i: int32): A;\n-convert<Number>(i: int32): Number {\n+extern macro ConvertElementsKindToInt(ElementsKind): int32;\n+\n+macro Convert<A: type>(elementsKind: ElementsKind): A;\n+Convert<int32>(elementsKind: ElementsKind): int32 {\n+  return ConvertElementsKindToInt(elementsKind);\n+}\n+\n+macro Convert<A: type>(i: int32): A;\n+Convert<Number>(i: int32): Number {\n   return ChangeInt32ToTagged(i);\n }\n-convert<intptr>(i: int32): intptr {\n+Convert<intptr>(i: int32): intptr {\n   return ChangeInt32ToIntPtr(i);\n }\n-convert<Smi>(i: int32): Smi {\n+Convert<Smi>(i: int32): Smi {\n   return SmiFromInt32(i);\n }\n-macro convert<A : type>(ui: uint32): A;\n-convert<Number>(ui: uint32): Number {\n+macro Convert<A: type>(ui: uint32): A;\n+Convert<Number>(ui: uint32): Number {\n   return ChangeUint32ToTagged(ui);\n }\n-convert<Smi>(ui: uint32): Smi {\n+Convert<Smi>(ui: uint32): Smi {\n   return SmiFromInt32(Signed(ui));\n }\n-convert<uintptr>(ui: uint32): uintptr {\n+Convert<uintptr>(ui: uint32): uintptr {\n   return ChangeUint32ToWord(ui);\n }\n-macro convert<A : type>(i: intptr): A;\n-convert<int32>(i: intptr): int32 {\n+macro Convert<A: type>(i: intptr): A;\n+Convert<int32>(i: intptr): int32 {\n   return TruncateIntPtrToInt32(i);\n }\n-convert<Smi>(i: intptr): Smi {\n+Convert<Smi>(i: intptr): Smi {\n   return SmiTag(i);\n }\n-macro convert<A : type>(ui: uintptr): A;\n-convert<uint32>(ui: uintptr): uint32 {\n+macro Convert<A: type>(ui: uintptr): A;\n+Convert<uint32>(ui: uintptr): uint32 {\n   return Unsigned(TruncateIntPtrToInt32(Signed(ui)));\n }\n-macro convert<A : type>(s: Smi): A;\n-convert<intptr>(s: Smi): intptr {\n+macro Convert<A: type>(s: Smi): A;\n+Convert<intptr>(s: Smi): intptr {\n   return SmiUntag(s);\n }\n-convert<int32>(s: Smi): int32 {\n+Convert<int32>(s: Smi): int32 {\n   return SmiToInt32(s);\n }\n-macro convert<A : type>(h: HeapNumber): A;\n-convert<float64>(h: HeapNumber): float64 {\n+macro Convert<A: type>(h: HeapNumber): A;\n+Convert<float64>(h: HeapNumber): float64 {\n   return LoadHeapNumberValue(h);\n }\n-macro convert<A : type>(n: Number): A;\n-convert<float64>(n: Number): float64 {\n+macro Convert<A: type>(n: Number): A;\n+Convert<float64>(n: Number): float64 {\n   return ChangeNumberToFloat64(n);\n }\n-macro convert<A : type>(f: float32): A;\n-convert<float64>(f: float32): float64 {\n+macro Convert<A: type>(f: float32): A;\n+Convert<float64>(f: float32): float64 {\n   return ChangeFloat32ToFloat64(f);\n }\n-macro convert<A : type>(d: float64): A;\n-convert<Number>(d: float64): Number {\n+macro Convert<A: type>(d: float64): A;\n+Convert<Number>(d: float64): Number {\n   return AllocateHeapNumberWithValue(d);\n }\n-convert<uintptr>(d: float64): uintptr {\n+Convert<float64>(ui: uintptr): float64 {\n+  return ChangeUintPtrToFloat64(ui);\n+}\n+Convert<Number>(ui: uintptr): Number {\n+  return ChangeUintPtrToTagged(ui);\n+}\n+Convert<uintptr>(d: float64): uintptr {\n   return ChangeFloat64ToUintPtr(d);\n }\n-macro convert<A : type>(r: RawPtr): A;\n-convert<uintptr>(r: RawPtr): uintptr {\n+macro Convert<A: type>(r: RawPtr): A;\n+Convert<uintptr>(r: RawPtr): uintptr {\n   return Unsigned(r);\n }\n-convert<intptr>(r: RawPtr): intptr {\n+Convert<intptr>(r: RawPtr): intptr {\n   return Signed(r);\n }\n \n extern macro UnsafeCastNumberToHeapNumber(Number): HeapNumber;\n extern macro UnsafeCastObjectToFixedArrayBase(Object): FixedArrayBase;\n extern macro UnsafeCastObjectToFixedArray(Object): FixedArray;\n+extern macro UnsafeCastObjectToContext(Object): Context;\n extern macro UnsafeCastObjectToFixedDoubleArray(Object): FixedDoubleArray;\n extern macro UnsafeCastObjectToHeapNumber(Object): HeapNumber;\n extern macro UnsafeCastObjectToCallable(Object): Callable;\n@@ -553,100 +648,153 @@ extern macro UnsafeCastObjectToJSReceiver(Object): JSReceiver;\n extern macro UnsafeCastObjectToJSObject(Object): JSObject;\n extern macro UnsafeCastObjectToMap(Object): Map;\n \n-macro unsafe_cast<A : type>(n: Number): A;\n-unsafe_cast<HeapNumber>(n: Number): HeapNumber {\n+macro UnsafeCast<A: type>(n: Number): A;\n+UnsafeCast<HeapNumber>(n: Number): HeapNumber {\n   return UnsafeCastNumberToHeapNumber(n);\n }\n-macro unsafe_cast<A : type>(o: Object): A;\n-unsafe_cast<FixedArray>(o: Object): FixedArray {\n+macro UnsafeCast<A: type>(o: Object): A;\n+UnsafeCast<Object>(o: Object): Object {\n+  return o;\n+}\n+UnsafeCast<FixedArray>(o: Object): FixedArray {\n   return UnsafeCastObjectToFixedArray(o);\n }\n-unsafe_cast<FixedDoubleArray>(o: Object): FixedDoubleArray {\n+UnsafeCast<FixedDoubleArray>(o: Object): FixedDoubleArray {\n   return UnsafeCastObjectToFixedDoubleArray(o);\n }\n-unsafe_cast<HeapNumber>(o: Object): HeapNumber {\n+UnsafeCast<HeapNumber>(o: Object): HeapNumber {\n   return UnsafeCastObjectToHeapNumber(o);\n }\n-unsafe_cast<Callable>(o: Object): Callable {\n+UnsafeCast<Callable>(o: Object): Callable {\n   return UnsafeCastObjectToCallable(o);\n }\n-unsafe_cast<Smi>(o: Object): Smi {\n+UnsafeCast<Smi>(o: Object): Smi {\n   return UnsafeCastObjectToSmi(o);\n }\n-unsafe_cast<Number>(o: Object): Number {\n+UnsafeCast<Number>(o: Object): Number {\n   return UnsafeCastObjectToNumber(o);\n }\n-unsafe_cast<HeapObject>(o: Object): HeapObject {\n+UnsafeCast<HeapObject>(o: Object): HeapObject {\n   return UnsafeCastObjectToHeapObject(o);\n }\n-unsafe_cast<JSArray>(o: Object): JSArray {\n+UnsafeCast<JSArray>(o: Object): JSArray {\n   return UnsafeCastObjectToJSArray(o);\n }\n-unsafe_cast<FixedTypedArrayBase>(o: Object): FixedTypedArrayBase {\n+UnsafeCast<FixedTypedArrayBase>(o: Object): FixedTypedArrayBase {\n   return UnsafeCastObjectToFixedTypedArrayBase(o);\n }\n-unsafe_cast<NumberDictionary>(o: Object): NumberDictionary {\n+UnsafeCast<NumberDictionary>(o: Object): NumberDictionary {\n   return UnsafeCastObjectToNumberDictionary(o);\n }\n-unsafe_cast<JSReceiver>(o: Object): JSReceiver {\n+UnsafeCast<JSReceiver>(o: Object): JSReceiver {\n   return UnsafeCastObjectToJSReceiver(o);\n }\n-unsafe_cast<JSObject>(o: Object): JSObject {\n+UnsafeCast<JSObject>(o: Object): JSObject {\n   return UnsafeCastObjectToJSObject(o);\n }\n-unsafe_cast<Map>(o: Object): Map {\n+UnsafeCast<Map>(o: Object): Map {\n   return UnsafeCastObjectToMap(o);\n }\n-unsafe_cast<FixedArrayBase>(o: Object): FixedArrayBase {\n+UnsafeCast<FixedArrayBase>(o: Object): FixedArrayBase {\n   return UnsafeCastObjectToFixedArrayBase(o);\n }\n+UnsafeCast<Context>(o: Object): Context {\n+  return UnsafeCastObjectToContext(o);\n+}\n+\n+// RawCasts should *never* be used anywhere in Torque code except for\n+// in Torque-based UnsafeCast operators preceeded by an appropriate\n+// type check().\n+extern macro RawCastObjectToJSArgumentsObjectWithLength(Object):\n+    JSArgumentsObjectWithLength;\n+\n+macro BranchIfJSArgumentsObjectWithLength(context: Context, o: Object): never\n+    labels True, False {\n+  const heapObject: HeapObject = Cast<HeapObject>(o) otherwise False;\n+  const map: Map = heapObject.map;\n+  const nativeContext: NativeContext = LoadNativeContext(context);\n+  if (map == nativeContext[FAST_ALIASED_ARGUMENTS_MAP_INDEX]) goto True;\n+  if (map == nativeContext[SLOW_ALIASED_ARGUMENTS_MAP_INDEX]) goto True;\n+  if (map == nativeContext[STRICT_ARGUMENTS_MAP_INDEX]) goto True;\n+  if (map != nativeContext[SLOPPY_ARGUMENTS_MAP_INDEX]) goto False;\n+  goto True;\n+}\n+\n+macro UnsafeCast<A: type>(context: Context, o: Object): A;\n+UnsafeCast<JSArgumentsObjectWithLength>(\n+    context: Context, o: Object): JSArgumentsObjectWithLength {\n+  assert(BranchIfJSArgumentsObjectWithLength(context, o));\n+  return RawCastObjectToJSArgumentsObjectWithLength(o);\n+}\n+\n+macro Cast<A: type>(context: Context, o: Object): A\n+    labels CastError;\n+Cast<JSArgumentsObjectWithLength>(context: Context, o: Object):\n+    JSArgumentsObjectWithLength\n+    labels CastError {\n+  if (BranchIfJSArgumentsObjectWithLength(context, o)) {\n+    return UnsafeCast<JSArgumentsObjectWithLength>(context, o);\n+  } else {\n+    goto CastError;\n+  }\n+}\n \n-const kCOWMap: Map = unsafe_cast<Map>(LoadRoot(kFixedCOWArrayMapRootIndex));\n+const kCOWMap: Map = UnsafeCast<Map>(LoadRoot(kFixedCOWArrayMapRootIndex));\n const kEmptyFixedArray: FixedArrayBase =\n-    unsafe_cast<FixedArrayBase>(LoadRoot(kEmptyFixedArrayRootIndex));\n+    UnsafeCast<FixedArrayBase>(LoadRoot(kEmptyFixedArrayRootIndex));\n \n-extern macro BranchIfFastJSArray(Object, Context): never labels Taken, NotTaken;\n-extern macro BranchIfNotFastJSArray(Object, Context): never labels Taken,\n-    NotTaken;\n+extern macro BranchIfFastJSArray(Object, Context): never\n+    labels Taken, NotTaken;\n+extern macro BranchIfNotFastJSArray(Object, Context): never\n+    labels Taken, NotTaken;\n+\n+macro EnsureFastJSArray(context: Context, object: Object) labels Bailout {\n+  if (BranchIfNotFastJSArray(object, context)) goto Bailout;\n+}\n \n extern macro IsPrototypeInitialArrayPrototype(Context, Map): bool;\n extern macro IsNoElementsProtectorCellInvalid(): bool;\n extern macro IsArraySpeciesProtectorCellInvalid(): bool;\n extern macro IsTypedArraySpeciesProtectorCellInvalid(): bool;\n extern macro IsPromiseSpeciesProtectorCellInvalid(): bool;\n \n-extern operator\n-'.buffer' macro LoadTypedArrayBuffer(JSTypedArray): JSArrayBuffer;\n+extern operator '.buffer' macro LoadTypedArrayBuffer(JSTypedArray):\n+    JSArrayBuffer;\n \n extern operator '.data_ptr' macro LoadDataPtr(JSTypedArray): RawPtr;\n \n extern operator '.elements_kind' macro LoadMapElementsKind(Map): ElementsKind;\n-extern operator\n-'.elements_kind' macro LoadElementsKind(JSTypedArray): ElementsKind;\n+extern operator '.elements_kind' macro LoadElementsKind(JSTypedArray):\n+    ElementsKind;\n \n extern operator '.elements' macro LoadElements(JSObject): FixedArrayBase;\n extern operator '.elements=' macro StoreElements(JSObject, FixedArrayBase);\n \n-extern operator '.length' macro LoadTypedArrayLength(JSTypedArray): Smi;\n+extern operator '.length' macro LoadJSTypedArrayLength(JSTypedArray): Smi;\n extern operator '.length' macro LoadJSArrayLength(JSArray): Number;\n+extern operator '.length' macro LoadJSArgumentsObjectWithLength(\n+    JSArgumentsObjectWithLength): Object;\n extern operator '.length_fast' macro LoadFastJSArrayLength(JSArray): Smi;\n extern operator '.length=' macro StoreJSArrayLength(JSArray, Smi);\n \n extern operator '.length' macro LoadFixedArrayBaseLength(FixedArrayBase): Smi;\n extern operator '[]' macro LoadFixedArrayElement(FixedArray, intptr): Object;\n extern operator '[]' macro LoadFixedArrayElement(FixedArray, Smi): Object;\n-extern operator\n-'[]' macro LoadFixedArrayElement(FixedArray, constexpr int31): Object;\n-extern operator\n-'[]=' macro StoreFixedArrayElement(FixedArray, intptr, Object): void;\n-extern operator\n-'[]=' macro StoreFixedArrayElement(\n+extern operator '[]' macro LoadFixedArrayElement(\n+    FixedArray, constexpr int31): Object;\n+extern operator '[]=' macro StoreFixedArrayElement(\n+    FixedArray, intptr, Object): void;\n+extern operator '[]=' macro StoreFixedArrayElement(\n     FixedArray, constexpr int31, Object): void;\n-extern operator\n-'[]=' macro StoreFixedArrayElementSmi(FixedArray, Smi, Object): void;\n+extern operator '[]=' macro StoreFixedArrayElementSmi(\n+    FixedArray, Smi, Object): void;\n+operator '[]=' macro StoreFixedDoubleArrayNumber(\n+    a: FixedDoubleArray, index: Smi, value: Number): void {\n+  a[index] = Convert<float64>(value);\n+}\n \n-extern macro StoreFixedArrayElementSmi(FixedArray, Smi, Object,\n-  constexpr WriteBarrierMode): void;\n+extern macro StoreFixedArrayElementSmi(\n+    FixedArray, Smi, Object, constexpr WriteBarrierMode): void;\n \n extern operator '.instance_type' macro LoadMapInstanceType(Map): int32;\n \n@@ -660,9 +808,8 @@ macro StoreFixedDoubleArrayElementWithSmiIndex(\n   StoreFixedDoubleArrayElement(array, index, value, SMI_PARAMETERS);\n }\n \n-extern macro BasicLoadNumberDictionaryElement(NumberDictionary, intptr):\n-    Object labels NotData,\n-    IfHole;\n+extern macro BasicLoadNumberDictionaryElement(NumberDictionary, intptr): Object\n+    labels NotData, IfHole;\n extern macro BasicStoreNumberDictionaryElement(NumberDictionary, intptr, Object)\n labels NotData, IfHole, ReadOnly;\n \n@@ -672,6 +819,28 @@ extern macro IsFastSmiOrTaggedElementsKind(ElementsKind): bool;\n extern macro IsFastSmiElementsKind(ElementsKind): bool;\n extern macro IsHoleyFastElementsKind(ElementsKind): bool;\n \n+macro AllowDoubleElements(kind: ElementsKind): ElementsKind {\n+  if (kind == PACKED_SMI_ELEMENTS) {\n+    return PACKED_DOUBLE_ELEMENTS;\n+  } else if (kind == HOLEY_SMI_ELEMENTS) {\n+    return HOLEY_DOUBLE_ELEMENTS;\n+  }\n+  return kind;\n+}\n+\n+macro AllowNonNumberElements(kind: ElementsKind): ElementsKind {\n+  if (kind == PACKED_SMI_ELEMENTS) {\n+    return PACKED_ELEMENTS;\n+  } else if (kind == HOLEY_SMI_ELEMENTS) {\n+    return HOLEY_ELEMENTS;\n+  } else if (kind == PACKED_DOUBLE_ELEMENTS) {\n+    return PACKED_ELEMENTS;\n+  } else if (kind == HOLEY_DOUBLE_ELEMENTS) {\n+    return HOLEY_ELEMENTS;\n+  }\n+  return kind;\n+}\n+\n extern macro AllocateZeroedFixedArray(intptr): FixedArray;\n extern macro AllocateZeroedFixedDoubleArray(intptr): FixedDoubleArray;\n \n@@ -687,8 +856,12 @@ extern macro AllocateJSArray(constexpr ElementsKind, Map, Smi, Smi): JSArray;\n extern macro IsElementsKindGreaterThan(\n     ElementsKind, constexpr ElementsKind): bool;\n \n+extern operator '[]=' macro StoreFixedDoubleArrayElementSmi(\n+    FixedDoubleArray, Smi, float64): void;\n+\n extern macro LoadDoubleWithHoleCheck(FixedDoubleArray, Smi): float64\n-labels IfHole;\n+    labels IfHole;\n+extern macro StoreFixedDoubleArrayHoleSmi(FixedDoubleArray, Smi): void;\n \n extern macro Call(Context, Callable, Object): Object;\n extern macro Call(Context, Callable, Object, Object): Object;\n@@ -699,18 +872,21 @@ extern macro Call(\n extern macro Call(\n     Context, Callable, Object, Object, Object, Object, Object, Object): Object;\n \n+extern macro ExtractFixedArray(FixedArrayBase, Smi, Smi, Smi): FixedArrayBase;\n extern macro ExtractFixedArray(\n-    FixedArray, Smi, Smi, Smi, constexpr ExtractFixedArrayFlags): FixedArray;\n+    FixedArrayBase, Smi, Smi, Smi,\n+    constexpr ExtractFixedArrayFlags): FixedArrayBase;\n \n extern builtin ExtractFastJSArray(Context, JSArray, Smi, Smi): JSArray;\n \n-macro LoadElementNoHole<T : type>(a: JSArray, index: Smi): Object labels IfHole;\n+macro LoadElementNoHole<T: type>(a: JSArray, index: Smi): Object\n+    labels IfHole;\n \n LoadElementNoHole<FixedArray>(a: JSArray, index: Smi): Object\n-labels IfHole {\n+    labels IfHole {\n   try {\n     let elements: FixedArray =\n-        cast<FixedArray>(a.elements) otherwise Unexpected;\n+        Cast<FixedArray>(a.elements) otherwise Unexpected;\n     let e: Object = elements[index];\n     if (e == Hole) {\n       goto IfHole;\n@@ -723,10 +899,10 @@ labels IfHole {\n }\n \n LoadElementNoHole<FixedDoubleArray>(a: JSArray, index: Smi): Object\n-labels IfHole {\n+    labels IfHole {\n   try {\n     let elements: FixedDoubleArray =\n-        cast<FixedDoubleArray>(a.elements) otherwise Unexpected;\n+        Cast<FixedDoubleArray>(a.elements) otherwise Unexpected;\n     let e: float64 = LoadDoubleWithHoleCheck(elements, index) otherwise IfHole;\n     return AllocateHeapNumberWithValue(e);\n   }\n@@ -735,29 +911,39 @@ labels IfHole {\n   }\n }\n \n+extern macro TransitionElementsKind(JSObject, Map, ElementsKind, ElementsKind):\n+    void\n+    labels Bailout;\n+\n extern macro IsCallable(HeapObject): bool;\n extern macro IsJSArray(HeapObject): bool;\n+extern macro IsJSReceiver(HeapObject): bool;\n extern macro TaggedIsCallable(Object): bool;\n extern macro IsDetachedBuffer(JSArrayBuffer): bool;\n extern macro IsHeapNumber(HeapObject): bool;\n extern macro IsFixedArray(HeapObject): bool;\n+extern macro IsNumber(Object): bool;\n extern macro IsExtensibleMap(Map): bool;\n extern macro IsCustomElementsReceiverInstanceType(int32): bool;\n+extern macro IsFastJSArray(Object, Context): bool;\n extern macro Typeof(Object): Object;\n+extern macro LoadTargetFromFrame(): JSFunction;\n \n // Return true iff number is NaN.\n macro NumberIsNaN(number: Number): bool {\n-  typeswitch(number) {\n-    case (Smi) {\n+  typeswitch (number) {\n+    case (Smi): {\n       return false;\n-    } case (hn : HeapNumber) {\n-      let value: float64 = convert<float64>(hn);\n+    }\n+    case (hn: HeapNumber): {\n+      let value: float64 = Convert<float64>(hn);\n       return value != value;\n     }\n   }\n }\n \n-extern macro BranchIfToBooleanIsTrue(Object): never labels Taken, NotTaken;\n+extern macro BranchIfToBooleanIsTrue(Object): never\n+    labels Taken, NotTaken;\n \n macro ToBoolean(obj: Object): bool {\n   if (BranchIfToBooleanIsTrue(obj)) {\n@@ -767,7 +953,8 @@ macro ToBoolean(obj: Object): bool {\n   }\n }\n \n-macro ToIndex(input: Object, context: Context): Number labels RangeError {\n+macro ToIndex(input: Object, context: Context): Number\n+    labels RangeError {\n   if (input == Undefined) {\n     return 0;\n   }\n@@ -779,3 +966,21 @@ macro ToIndex(input: Object, context: Context): Number labels RangeError {\n \n   return value;\n }\n+\n+macro GetLengthProperty(context: Context, o: Object): Number {\n+  try {\n+    return (Cast<JSArray>(o) otherwise CheckArgs).length;\n+  }\n+  label CheckArgs {\n+    const a: JSArgumentsObjectWithLength =\n+        Cast<JSArgumentsObjectWithLength>(context, o) otherwise Slow;\n+    const length: Object = a.length;\n+    return Cast<Smi>(length) otherwise goto ToLength(length);\n+  }\n+  label Slow deferred {\n+    goto ToLength(GetProperty(context, o, kLengthString));\n+  }\n+  label ToLength(length: Object) deferred {\n+    return ToLength_Inline(context, length);\n+  }\n+}"
        },
        {
            "sha": "8bc5c0b5ac200facf28e81cc98c859338d054ea9",
            "filename": "deps/v8/src/builtins/builtins-api.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -149,7 +149,7 @@ class RelocatableArguments : public BuiltinArguments, public Relocatable {\n   RelocatableArguments(Isolate* isolate, int length, Object** arguments)\n       : BuiltinArguments(length, arguments), Relocatable(isolate) {}\n \n-  virtual inline void IterateInstance(RootVisitor* v) {\n+  inline void IterateInstance(RootVisitor* v) override {\n     if (length() == 0) return;\n     v->VisitRootPointers(Root::kRelocatable, nullptr, lowest_address(),\n                          highest_address() + 1);"
        },
        {
            "sha": "0e22db2598d0cb83b4980746c3c53a87211836f0",
            "filename": "deps/v8/src/builtins/builtins-arguments-gen.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arguments-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -89,7 +89,7 @@ ArgumentsBuiltinsAssembler::AllocateArgumentsObject(Node* map,\n   Node* result = Allocate(size);\n   Comment(\"Initialize arguments object\");\n   StoreMapNoWriteBarrier(result, map);\n-  Node* empty_fixed_array = LoadRoot(Heap::kEmptyFixedArrayRootIndex);\n+  Node* empty_fixed_array = LoadRoot(RootIndex::kEmptyFixedArray);\n   StoreObjectField(result, JSArray::kPropertiesOrHashOffset, empty_fixed_array);\n   Node* smi_arguments_count = ParameterToTagged(arguments_count, mode);\n   StoreObjectFieldNoWriteBarrier(result, JSArray::kLengthOffset,\n@@ -99,7 +99,7 @@ ArgumentsBuiltinsAssembler::AllocateArgumentsObject(Node* map,\n     arguments = InnerAllocate(result, elements_offset);\n     StoreObjectFieldNoWriteBarrier(arguments, FixedArray::kLengthOffset,\n                                    smi_arguments_count);\n-    Node* fixed_array_map = LoadRoot(Heap::kFixedArrayMapRootIndex);\n+    Node* fixed_array_map = LoadRoot(RootIndex::kFixedArrayMap);\n     StoreMapNoWriteBarrier(arguments, fixed_array_map);\n   }\n   Node* parameter_map = nullptr;\n@@ -110,7 +110,7 @@ ArgumentsBuiltinsAssembler::AllocateArgumentsObject(Node* map,\n     StoreObjectFieldNoWriteBarrier(result, JSArray::kElementsOffset,\n                                    parameter_map);\n     Node* sloppy_elements_map =\n-        LoadRoot(Heap::kSloppyArgumentsElementsMapRootIndex);\n+        LoadRoot(RootIndex::kSloppyArgumentsElementsMap);\n     StoreMapNoWriteBarrier(parameter_map, sloppy_elements_map);\n     parameter_map_count = ParameterToTagged(parameter_map_count, mode);\n     StoreObjectFieldNoWriteBarrier(parameter_map, FixedArray::kLengthOffset,"
        },
        {
            "sha": "4aebe2e02b106cf3588efed7b1eb8e4b2e76a090",
            "filename": "deps/v8/src/builtins/builtins-array-gen.cc",
            "status": "modified",
            "additions": 45,
            "deletions": 20,
            "changes": 65,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -212,7 +212,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n         context(), original_array, length, method_name);\n     // In the Spec and our current implementation, the length check is already\n     // performed in TypedArraySpeciesCreate.\n-    CSA_ASSERT(this, SmiLessThanOrEqual(CAST(len_), LoadTypedArrayLength(a)));\n+    CSA_ASSERT(this, SmiLessThanOrEqual(CAST(len_), LoadJSTypedArrayLength(a)));\n     fast_typed_array_target_ =\n         Word32Equal(LoadInstanceType(LoadElements(original_array)),\n                     LoadInstanceType(LoadElements(a)));\n@@ -530,10 +530,11 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     TNode<JSTypedArray> typed_array = CAST(receiver_);\n     o_ = typed_array;\n \n-    TNode<JSArrayBuffer> array_buffer = LoadArrayBufferViewBuffer(typed_array);\n+    TNode<JSArrayBuffer> array_buffer =\n+        LoadJSArrayBufferViewBuffer(typed_array);\n     ThrowIfArrayBufferIsDetached(context_, array_buffer, name_);\n \n-    len_ = LoadTypedArrayLength(typed_array);\n+    len_ = LoadJSTypedArrayLength(typed_array);\n \n     Label throw_not_callable(this, Label::kDeferred);\n     Label distinguish_types(this);\n@@ -964,8 +965,7 @@ TF_BUILTIN(ArrayPrototypePop, CodeStubAssembler) {\n \n     // 3) Check that the elements backing store isn't copy-on-write.\n     Node* elements = LoadElements(array_receiver);\n-    GotoIf(WordEqual(LoadMap(elements),\n-                     LoadRoot(Heap::kFixedCOWArrayMapRootIndex)),\n+    GotoIf(WordEqual(LoadMap(elements), LoadRoot(RootIndex::kFixedCOWArrayMap)),\n            &runtime);\n \n     Node* new_length = IntPtrSub(length, IntPtrConstant(1));\n@@ -1378,8 +1378,8 @@ TF_BUILTIN(ArrayPrototypeSlice, ArrayPrototypeSliceCodeStubAssembler) {\n   Goto(&generic_length);\n \n   BIND(&load_arguments_length);\n-  Node* arguments_length =\n-      LoadObjectField(array_receiver, JSArgumentsObject::kLengthOffset);\n+  Node* arguments_length = LoadObjectField(\n+      array_receiver, JSArgumentsObjectWithLength::kLengthOffset);\n   GotoIf(TaggedIsNotSmi(arguments_length), &generic_length);\n   o = CAST(receiver);\n   len.Bind(arguments_length);\n@@ -1524,19 +1524,23 @@ TF_BUILTIN(ArrayPrototypeShift, CodeStubAssembler) {\n   {\n     TNode<JSArray> array_receiver = CAST(receiver);\n     CSA_ASSERT(this, TaggedIsPositiveSmi(LoadJSArrayLength(array_receiver)));\n+\n+    // 2) Ensure that the length is writable.\n+    //    This check needs to happen before the check for length zero.\n+    //    The spec requires a \"SetProperty(array, 'length', 0)\" call when\n+    //    the length is zero. This must throw an exception in the case of a\n+    //    read-only length.\n+    EnsureArrayLengthWritable(LoadMap(array_receiver), &runtime);\n+\n     Node* length =\n         LoadAndUntagObjectField(array_receiver, JSArray::kLengthOffset);\n     Label return_undefined(this), fast_elements_tagged(this),\n         fast_elements_smi(this);\n     GotoIf(IntPtrEqual(length, IntPtrConstant(0)), &return_undefined);\n \n-    // 2) Ensure that the length is writable.\n-    EnsureArrayLengthWritable(LoadMap(array_receiver), &runtime);\n-\n     // 3) Check that the elements backing store isn't copy-on-write.\n     Node* elements = LoadElements(array_receiver);\n-    GotoIf(WordEqual(LoadMap(elements),\n-                     LoadRoot(Heap::kFixedCOWArrayMapRootIndex)),\n+    GotoIf(WordEqual(LoadMap(elements), LoadRoot(RootIndex::kFixedCOWArrayMap)),\n            &runtime);\n \n     Node* new_length = IntPtrSub(length, IntPtrConstant(1));\n@@ -1679,15 +1683,38 @@ TF_BUILTIN(ExtractFastJSArray, ArrayBuiltinsAssembler) {\n \n TF_BUILTIN(CloneFastJSArray, ArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n-  Node* array = Parameter(Descriptor::kSource);\n+  TNode<JSArray> array = CAST(Parameter(Descriptor::kSource));\n \n-  CSA_ASSERT(this, IsJSArray(array));\n-  CSA_ASSERT(this, Word32BinaryNot(IsNoElementsProtectorCellInvalid()));\n+  CSA_ASSERT(this,\n+             Word32Or(Word32BinaryNot(IsHoleyFastElementsKind(\n+                          LoadMapElementsKind(LoadMap(array)))),\n+                      Word32BinaryNot(IsNoElementsProtectorCellInvalid())));\n \n   ParameterMode mode = OptimalParameterMode();\n   Return(CloneFastJSArray(context, array, mode));\n }\n \n+// This builtin copies the backing store of fast arrays, while converting any\n+// holes to undefined.\n+// - If there are no holes in the source, its ElementsKind will be preserved. In\n+// that case, this builtin should perform as fast as CloneFastJSArray. (In fact,\n+// for fast packed arrays, the behavior is equivalent to CloneFastJSArray.)\n+// - If there are holes in the source, the ElementsKind of the \"copy\" will be\n+// PACKED_ELEMENTS (such that undefined can be stored).\n+TF_BUILTIN(CloneFastJSArrayFillingHoles, ArrayBuiltinsAssembler) {\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<JSArray> array = CAST(Parameter(Descriptor::kSource));\n+\n+  CSA_ASSERT(this,\n+             Word32Or(Word32BinaryNot(IsHoleyFastElementsKind(\n+                          LoadMapElementsKind(LoadMap(array)))),\n+                      Word32BinaryNot(IsNoElementsProtectorCellInvalid())));\n+\n+  ParameterMode mode = OptimalParameterMode();\n+  Return(CloneFastJSArray(context, array, mode, nullptr,\n+                          HoleConversionMode::kConvertToUndefined));\n+}\n+\n TF_BUILTIN(ArrayFindLoopContinuation, ArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n@@ -3582,6 +3609,8 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n     BIND(&if_hole);\n     {\n       GotoIf(IsNoElementsProtectorCellInvalid(), &if_generic);\n+      GotoIfNot(IsPrototypeInitialArrayPrototype(context, array_map),\n+                &if_generic);\n       var_value.Bind(UndefinedConstant());\n       Goto(&allocate_entry_if_needed);\n     }\n@@ -3654,7 +3683,7 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n     // [[ArrayIteratorNextIndex]] anymore, since a JSTypedArray's\n     // length cannot change anymore, so this {iterator} will never\n     // produce values again anyways.\n-    TNode<Smi> length = LoadTypedArrayLength(CAST(array));\n+    TNode<Smi> length = LoadJSTypedArrayLength(CAST(array));\n     GotoIfNot(SmiBelow(CAST(index), length), &allocate_iterator_result);\n     StoreObjectFieldNoWriteBarrier(iterator, JSArrayIterator::kNextIndexOffset,\n                                    SmiInc(CAST(index)));\n@@ -3701,8 +3730,6 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n   }\n }\n \n-namespace {\n-\n class ArrayFlattenAssembler : public CodeStubAssembler {\n  public:\n   explicit ArrayFlattenAssembler(compiler::CodeAssemblerState* state)\n@@ -3843,8 +3870,6 @@ class ArrayFlattenAssembler : public CodeStubAssembler {\n   }\n };\n \n-}  // namespace\n-\n // https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\n TF_BUILTIN(FlattenIntoArray, ArrayFlattenAssembler) {\n   Node* const context = Parameter(Descriptor::kContext);"
        },
        {
            "sha": "1e9de3dbe3df742895f94f5db88a17677aec6adc",
            "filename": "deps/v8/src/builtins/builtins-array.cc",
            "status": "modified",
            "additions": 170,
            "deletions": 148,
            "changes": 318,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -23,34 +23,6 @@ namespace internal {\n \n namespace {\n \n-inline bool ClampedToInteger(Isolate* isolate, Object* object, int* out) {\n-  // This is an extended version of ECMA-262 7.1.11 handling signed values\n-  // Try to convert object to a number and clamp values to [kMinInt, kMaxInt]\n-  if (object->IsSmi()) {\n-    *out = Smi::ToInt(object);\n-    return true;\n-  } else if (object->IsHeapNumber()) {\n-    double value = HeapNumber::cast(object)->value();\n-    if (std::isnan(value)) {\n-      *out = 0;\n-    } else if (value > kMaxInt) {\n-      *out = kMaxInt;\n-    } else if (value < kMinInt) {\n-      *out = kMinInt;\n-    } else {\n-      *out = static_cast<int>(value);\n-    }\n-    return true;\n-  } else if (object->IsNullOrUndefined(isolate)) {\n-    *out = 0;\n-    return true;\n-  } else if (object->IsBoolean()) {\n-    *out = object->IsTrue(isolate);\n-    return true;\n-  }\n-  return false;\n-}\n-\n inline bool IsJSArrayFastElementMovingAllowed(Isolate* isolate,\n                                               JSArray* receiver) {\n   return JSObject::PrototypeHasNoElements(isolate, receiver);\n@@ -79,36 +51,20 @@ inline bool HasOnlySimpleElements(Isolate* isolate, JSReceiver* receiver) {\n   return true;\n }\n \n-// Returns |false| if not applicable.\n-// TODO(szuend): Refactor this function because it is getting hard to\n-//               understand what each call-site actually checks.\n-V8_WARN_UNUSED_RESULT\n-inline bool EnsureJSArrayWithWritableFastElements(Isolate* isolate,\n-                                                  Handle<Object> receiver,\n-                                                  BuiltinArguments* args,\n-                                                  int first_arg_index,\n-                                                  int num_arguments) {\n-  if (!receiver->IsJSArray()) return false;\n-  Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n-  ElementsKind origin_kind = array->GetElementsKind();\n-  if (IsDictionaryElementsKind(origin_kind)) return false;\n-  if (!array->map()->is_extensible()) return false;\n-  if (args == nullptr) return true;\n-\n-  // If there may be elements accessors in the prototype chain, the fast path\n-  // cannot be used if there arguments to add to the array.\n-  if (!IsJSArrayFastElementMovingAllowed(isolate, *array)) return false;\n+// This method may transition the elements kind of the JSArray once, to make\n+// sure that all elements provided as arguments in the specified range can be\n+// added without further elements kinds transitions.\n+void MatchArrayElementsKindToArguments(Isolate* isolate, Handle<JSArray> array,\n+                                       BuiltinArguments* args,\n+                                       int first_arg_index, int num_arguments) {\n+  int args_length = args->length();\n+  if (first_arg_index >= args_length) return;\n \n-  // Adding elements to the array prototype would break code that makes sure\n-  // it has no elements. Handle that elsewhere.\n-  if (isolate->IsAnyInitialArrayPrototype(array)) return false;\n+  ElementsKind origin_kind = array->GetElementsKind();\n \n-  // Need to ensure that the arguments passed in args can be contained in\n-  // the array.\n-  int args_length = args->length();\n-  if (first_arg_index >= args_length) return true;\n+  // We do not need to transition for PACKED/HOLEY_ELEMENTS.\n+  if (IsObjectElementsKind(origin_kind)) return;\n \n-  if (IsObjectElementsKind(origin_kind)) return true;\n   ElementsKind target_kind = origin_kind;\n   {\n     DisallowHeapAllocation no_gc;\n@@ -131,20 +87,37 @@ inline bool EnsureJSArrayWithWritableFastElements(Isolate* isolate,\n     HandleScope scope(isolate);\n     JSObject::TransitionElementsKind(array, target_kind);\n   }\n-  return true;\n }\n \n-V8_WARN_UNUSED_RESULT static Object* CallJsIntrinsic(\n-    Isolate* isolate, Handle<JSFunction> function, BuiltinArguments args) {\n-  HandleScope handleScope(isolate);\n-  int argc = args.length() - 1;\n-  ScopedVector<Handle<Object>> argv(argc);\n-  for (int i = 0; i < argc; ++i) {\n-    argv[i] = args.at(i + 1);\n-  }\n-  RETURN_RESULT_OR_FAILURE(\n-      isolate,\n-      Execution::Call(isolate, function, args.receiver(), argc, argv.start()));\n+// Returns |false| if not applicable.\n+// TODO(szuend): Refactor this function because it is getting hard to\n+//               understand what each call-site actually checks.\n+V8_WARN_UNUSED_RESULT\n+inline bool EnsureJSArrayWithWritableFastElements(Isolate* isolate,\n+                                                  Handle<Object> receiver,\n+                                                  BuiltinArguments* args,\n+                                                  int first_arg_index,\n+                                                  int num_arguments) {\n+  if (!receiver->IsJSArray()) return false;\n+  Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n+  ElementsKind origin_kind = array->GetElementsKind();\n+  if (IsDictionaryElementsKind(origin_kind)) return false;\n+  if (!array->map()->is_extensible()) return false;\n+  if (args == nullptr) return true;\n+\n+  // If there may be elements accessors in the prototype chain, the fast path\n+  // cannot be used if there arguments to add to the array.\n+  if (!IsJSArrayFastElementMovingAllowed(isolate, *array)) return false;\n+\n+  // Adding elements to the array prototype would break code that makes sure\n+  // it has no elements. Handle that elsewhere.\n+  if (isolate->IsAnyInitialArrayPrototype(array)) return false;\n+\n+  // Need to ensure that the arguments passed in args can be contained in\n+  // the array.\n+  MatchArrayElementsKindToArguments(isolate, array, args, first_arg_index,\n+                                    num_arguments);\n+  return true;\n }\n \n // If |index| is Undefined, returns init_if_undefined.\n@@ -189,6 +162,24 @@ V8_WARN_UNUSED_RESULT Maybe<double> GetLengthProperty(\n   return Just(raw_length_number->Number());\n }\n \n+// Set \"length\" property, has \"fast-path\" for JSArrays.\n+// Returns Nothing if something went wrong.\n+V8_WARN_UNUSED_RESULT MaybeHandle<Object> SetLengthProperty(\n+    Isolate* isolate, Handle<JSReceiver> receiver, double length) {\n+  if (receiver->IsJSArray()) {\n+    Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n+    if (!JSArray::HasReadOnlyLength(array)) {\n+      DCHECK_LE(length, kMaxUInt32);\n+      JSArray::SetLength(array, static_cast<uint32_t>(length));\n+      return receiver;\n+    }\n+  }\n+\n+  return Object::SetProperty(\n+      isolate, receiver, isolate->factory()->length_string(),\n+      isolate->factory()->NewNumber(length), LanguageMode::kStrict);\n+}\n+\n V8_WARN_UNUSED_RESULT Object* GenericArrayFill(Isolate* isolate,\n                                                Handle<JSReceiver> receiver,\n                                                Handle<Object> value,\n@@ -350,7 +341,7 @@ V8_WARN_UNUSED_RESULT Object* GenericArrayPush(Isolate* isolate,\n       // Must succeed since we always pass a valid key.\n       DCHECK(success);\n       MAYBE_RETURN(Object::SetProperty(&it, element, LanguageMode::kStrict,\n-                                       Object::MAY_BE_STORE_FROM_KEYED),\n+                                       StoreOrigin::kMaybeKeyed),\n                    ReadOnlyRoots(isolate).exception());\n     }\n \n@@ -485,110 +476,141 @@ BUILTIN(ArrayPop) {\n   return *result;\n }\n \n-BUILTIN(ArrayShift) {\n-  HandleScope scope(isolate);\n-  Heap* heap = isolate->heap();\n-  Handle<Object> receiver = args.receiver();\n+namespace {\n+\n+// Returns true, iff we can use ElementsAccessor for shifting.\n+V8_WARN_UNUSED_RESULT bool CanUseFastArrayShift(Isolate* isolate,\n+                                                Handle<JSReceiver> receiver) {\n   if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, nullptr, 0,\n                                              0) ||\n       !IsJSArrayFastElementMovingAllowed(isolate, JSArray::cast(*receiver))) {\n-    return CallJsIntrinsic(isolate, isolate->array_shift(), args);\n+    return false;\n   }\n+\n   Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n+  return !JSArray::HasReadOnlyLength(array);\n+}\n \n-  int len = Smi::ToInt(array->length());\n-  if (len == 0) return ReadOnlyRoots(heap).undefined_value();\n+V8_WARN_UNUSED_RESULT Object* GenericArrayShift(Isolate* isolate,\n+                                                Handle<JSReceiver> receiver,\n+                                                double length) {\n+  // 4. Let first be ? Get(O, \"0\").\n+  Handle<Object> first;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, first,\n+                                     Object::GetElement(isolate, receiver, 0));\n+\n+  // 5. Let k be 1.\n+  double k = 1;\n+\n+  // 6. Repeat, while k < len.\n+  while (k < length) {\n+    // a. Let from be ! ToString(k).\n+    Handle<String> from =\n+        isolate->factory()->NumberToString(isolate->factory()->NewNumber(k));\n+\n+    // b. Let to be ! ToString(k-1).\n+    Handle<String> to = isolate->factory()->NumberToString(\n+        isolate->factory()->NewNumber(k - 1));\n+\n+    // c. Let fromPresent be ? HasProperty(O, from).\n+    bool from_present;\n+    MAYBE_ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+        isolate, from_present, JSReceiver::HasProperty(receiver, from));\n+\n+    // d. If fromPresent is true, then.\n+    if (from_present) {\n+      // i. Let fromVal be ? Get(O, from).\n+      Handle<Object> from_val;\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+          isolate, from_val,\n+          Object::GetPropertyOrElement(isolate, receiver, from));\n+\n+      // ii. Perform ? Set(O, to, fromVal, true).\n+      RETURN_FAILURE_ON_EXCEPTION(\n+          isolate, Object::SetPropertyOrElement(isolate, receiver, to, from_val,\n+                                                LanguageMode::kStrict));\n+    } else {  // e. Else fromPresent is false,\n+      // i. Perform ? DeletePropertyOrThrow(O, to).\n+      MAYBE_RETURN(JSReceiver::DeletePropertyOrElement(receiver, to,\n+                                                       LanguageMode::kStrict),\n+                   ReadOnlyRoots(isolate).exception());\n+    }\n \n-  if (JSArray::HasReadOnlyLength(array)) {\n-    return CallJsIntrinsic(isolate, isolate->array_shift(), args);\n+    // f. Increase k by 1.\n+    ++k;\n   }\n \n-  Handle<Object> first = array->GetElementsAccessor()->Shift(array);\n+  // 7. Perform ? DeletePropertyOrThrow(O, ! ToString(len-1)).\n+  Handle<String> new_length = isolate->factory()->NumberToString(\n+      isolate->factory()->NewNumber(length - 1));\n+  MAYBE_RETURN(JSReceiver::DeletePropertyOrElement(receiver, new_length,\n+                                                   LanguageMode::kStrict),\n+               ReadOnlyRoots(isolate).exception());\n+\n+  // 8. Perform ? Set(O, \"length\", len-1, true).\n+  RETURN_FAILURE_ON_EXCEPTION(isolate,\n+                              SetLengthProperty(isolate, receiver, length - 1));\n+\n+  // 9. Return first.\n   return *first;\n }\n+}  // namespace\n \n-BUILTIN(ArrayUnshift) {\n+BUILTIN(ArrayShift) {\n   HandleScope scope(isolate);\n-  Handle<Object> receiver = args.receiver();\n-  if (!EnsureJSArrayWithWritableFastElements(isolate, receiver, &args, 1,\n-                                             args.length() - 1)) {\n-    return CallJsIntrinsic(isolate, isolate->array_unshift(), args);\n-  }\n-  Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n-  int to_add = args.length() - 1;\n-  if (to_add == 0) return array->length();\n \n-  // Currently fixed arrays cannot grow too big, so we should never hit this.\n-  DCHECK_LE(to_add, Smi::kMaxValue - Smi::ToInt(array->length()));\n+  // 1. Let O be ? ToObject(this value).\n+  Handle<JSReceiver> receiver;\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, receiver, Object::ToObject(isolate, args.receiver()));\n \n-  if (JSArray::HasReadOnlyLength(array)) {\n-    return CallJsIntrinsic(isolate, isolate->array_unshift(), args);\n+  // 2. Let len be ? ToLength(? Get(O, \"length\")).\n+  double length;\n+  MAYBE_ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, length, GetLengthProperty(isolate, receiver));\n+\n+  // 3. If len is zero, then.\n+  if (length == 0) {\n+    // a. Perform ? Set(O, \"length\", 0, true).\n+    RETURN_FAILURE_ON_EXCEPTION(isolate,\n+                                SetLengthProperty(isolate, receiver, length));\n+\n+    // b. Return undefined.\n+    return ReadOnlyRoots(isolate).undefined_value();\n   }\n \n-  ElementsAccessor* accessor = array->GetElementsAccessor();\n-  int new_length = accessor->Unshift(array, &args, to_add);\n-  return Smi::FromInt(new_length);\n+  if (CanUseFastArrayShift(isolate, receiver)) {\n+    Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n+    return *array->GetElementsAccessor()->Shift(array);\n+  }\n+\n+  return GenericArrayShift(isolate, receiver, length);\n }\n \n-BUILTIN(ArraySplice) {\n+BUILTIN(ArrayUnshift) {\n   HandleScope scope(isolate);\n-  Handle<Object> receiver = args.receiver();\n-  if (V8_UNLIKELY(\n-          !EnsureJSArrayWithWritableFastElements(isolate, receiver, &args, 3,\n-                                                 args.length() - 3) ||\n-          // If this is a subclass of Array, then call out to JS.\n-          !Handle<JSArray>::cast(receiver)->HasArrayPrototype(isolate) ||\n-          // If anything with @@species has been messed with, call out to JS.\n-          !isolate->IsArraySpeciesLookupChainIntact())) {\n-    return CallJsIntrinsic(isolate, isolate->array_splice(), args);\n-  }\n-  Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n+  DCHECK(args.receiver()->IsJSArray());\n+  Handle<JSArray> array = Handle<JSArray>::cast(args.receiver());\n \n-  int argument_count = args.length() - 1;\n-  int relative_start = 0;\n-  if (argument_count > 0) {\n-    DisallowHeapAllocation no_gc;\n-    if (!ClampedToInteger(isolate, args[1], &relative_start)) {\n-      AllowHeapAllocation allow_allocation;\n-      return CallJsIntrinsic(isolate, isolate->array_splice(), args);\n-    }\n-  }\n-  int len = Smi::ToInt(array->length());\n-  // clip relative start to [0, len]\n-  int actual_start = (relative_start < 0) ? Max(len + relative_start, 0)\n-                                          : Min(relative_start, len);\n-\n-  int actual_delete_count;\n-  if (argument_count == 1) {\n-    // SpiderMonkey, TraceMonkey and JSC treat the case where no delete count is\n-    // given as a request to delete all the elements from the start.\n-    // And it differs from the case of undefined delete count.\n-    // This does not follow ECMA-262, but we do the same for compatibility.\n-    DCHECK_GE(len - actual_start, 0);\n-    actual_delete_count = len - actual_start;\n-  } else {\n-    int delete_count = 0;\n-    DisallowHeapAllocation no_gc;\n-    if (argument_count > 1) {\n-      if (!ClampedToInteger(isolate, args[2], &delete_count)) {\n-        AllowHeapAllocation allow_allocation;\n-        return CallJsIntrinsic(isolate, isolate->array_splice(), args);\n-      }\n-    }\n-    actual_delete_count = Min(Max(delete_count, 0), len - actual_start);\n-  }\n+  // These are checked in the Torque builtin.\n+  DCHECK(array->map()->is_extensible());\n+  DCHECK(!IsDictionaryElementsKind(array->GetElementsKind()));\n+  DCHECK(IsJSArrayFastElementMovingAllowed(isolate, *array));\n+  DCHECK(!isolate->IsAnyInitialArrayPrototype(array));\n \n-  int add_count = (argument_count > 1) ? (argument_count - 2) : 0;\n-  int new_length = len - actual_delete_count + add_count;\n+  MatchArrayElementsKindToArguments(isolate, array, &args, 1,\n+                                    args.length() - 1);\n+\n+  int to_add = args.length() - 1;\n+  if (to_add == 0) return array->length();\n+\n+  // Currently fixed arrays cannot grow too big, so we should never hit this.\n+  DCHECK_LE(to_add, Smi::kMaxValue - Smi::ToInt(array->length()));\n+  DCHECK(!JSArray::HasReadOnlyLength(array));\n \n-  if (new_length != len && JSArray::HasReadOnlyLength(array)) {\n-    AllowHeapAllocation allow_allocation;\n-    return CallJsIntrinsic(isolate, isolate->array_splice(), args);\n-  }\n   ElementsAccessor* accessor = array->GetElementsAccessor();\n-  Handle<JSArray> result_array = accessor->Splice(\n-      array, actual_start, actual_delete_count, &args, add_count);\n-  return *result_array;\n+  int new_length = accessor->Unshift(array, &args, to_add);\n+  return Smi::FromInt(new_length);\n }\n \n // Array Concat -------------------------------------------------------------"
        },
        {
            "sha": "a4de98eb97b011478af9f65dcc87b81a1e8377a0",
            "filename": "deps/v8/src/builtins/builtins-arraybuffer.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 9,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -31,10 +31,12 @@ Object* ConstructBuffer(Isolate* isolate, Handle<JSFunction> target,\n                         Handle<JSReceiver> new_target, Handle<Object> length,\n                         bool initialize) {\n   Handle<JSObject> result;\n-  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n-                                     JSObject::New(target, new_target));\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, result,\n+      JSObject::New(target, new_target, Handle<AllocationSite>::null()));\n   size_t byte_length;\n-  if (!TryNumberToSize(*length, &byte_length)) {\n+  if (!TryNumberToSize(*length, &byte_length) ||\n+      byte_length > JSArrayBuffer::kMaxByteLength) {\n     THROW_NEW_ERROR_RETURN_FAILURE(\n         isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferLength));\n   }\n@@ -98,7 +100,7 @@ BUILTIN(ArrayBufferPrototypeGetByteLength) {\n   CHECK_SHARED(false, array_buffer, kMethodName);\n   // TODO(franzih): According to the ES6 spec, we should throw a TypeError\n   // here if the JSArrayBuffer is detached.\n-  return array_buffer->byte_length();\n+  return *isolate->factory()->NewNumberFromSize(array_buffer->byte_length());\n }\n \n // ES7 sharedmem 6.3.4.1 get SharedArrayBuffer.prototype.byteLength\n@@ -108,7 +110,7 @@ BUILTIN(SharedArrayBufferPrototypeGetByteLength) {\n   CHECK_RECEIVER(JSArrayBuffer, array_buffer,\n                  \"get SharedArrayBuffer.prototype.byteLength\");\n   CHECK_SHARED(true, array_buffer, kMethodName);\n-  return array_buffer->byte_length();\n+  return *isolate->factory()->NewNumberFromSize(array_buffer->byte_length());\n }\n \n // ES6 section 24.1.3.1 ArrayBuffer.isView ( arg )\n@@ -143,7 +145,7 @@ static Object* SliceHelper(BuiltinArguments args, Isolate* isolate,\n \n   // * [AB] Let len be O.[[ArrayBufferByteLength]].\n   // * [SAB] Let len be O.[[ArrayBufferByteLength]].\n-  double const len = array_buffer->byte_length()->Number();\n+  double const len = array_buffer->byte_length();\n \n   // * Let relativeStart be ? ToInteger(start).\n   Handle<Object> relative_start;\n@@ -242,7 +244,7 @@ static Object* SliceHelper(BuiltinArguments args, Isolate* isolate,\n   }\n \n   // * If new.[[ArrayBufferByteLength]] < newLen, throw a TypeError exception.\n-  if (new_array_buffer->byte_length()->Number() < new_len) {\n+  if (new_array_buffer->byte_length() < new_len) {\n     THROW_NEW_ERROR_RETURN_FAILURE(\n         isolate,\n         NewTypeError(is_shared ? MessageTemplate::kSharedArrayBufferTooShort\n@@ -264,10 +266,10 @@ static Object* SliceHelper(BuiltinArguments args, Isolate* isolate,\n   size_t first_size = 0, new_len_size = 0;\n   CHECK(TryNumberToSize(*first_obj, &first_size));\n   CHECK(TryNumberToSize(*new_len_obj, &new_len_size));\n-  DCHECK(NumberToSize(new_array_buffer->byte_length()) >= new_len_size);\n+  DCHECK(new_array_buffer->byte_length() >= new_len_size);\n \n   if (new_len_size != 0) {\n-    size_t from_byte_length = NumberToSize(array_buffer->byte_length());\n+    size_t from_byte_length = array_buffer->byte_length();\n     USE(from_byte_length);\n     DCHECK(first_size <= from_byte_length);\n     DCHECK(from_byte_length - first_size >= new_len_size);"
        },
        {
            "sha": "74d607776454e243f36758beebf02c5ea420ee5b",
            "filename": "deps/v8/src/builtins/builtins-async-function-gen.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 89,
            "changes": 92,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-function-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -21,36 +21,19 @@ class AsyncFunctionBuiltinsAssembler : public AsyncBuiltinsAssembler {\n   void AsyncFunctionAwait(Node* const context, Node* const generator,\n                           Node* const awaited, Node* const outer_promise,\n                           const bool is_predicted_as_caught);\n-  void AsyncFunctionAwaitOptimized(Node* const context, Node* const generator,\n-                                   Node* const awaited,\n-                                   Node* const outer_promise,\n-                                   const bool is_predicted_as_caught);\n \n   void AsyncFunctionAwaitResumeClosure(\n       Node* const context, Node* const sent_value,\n       JSGeneratorObject::ResumeMode resume_mode);\n };\n \n-namespace {\n-\n-// Describe fields of Context associated with AsyncFunctionAwait resume\n-// closures.\n-// TODO(jgruber): Refactor to reuse code for upcoming async-generators.\n-class AwaitContext {\n- public:\n-  enum Fields { kGeneratorSlot = Context::MIN_CONTEXT_SLOTS, kLength };\n-};\n-\n-}  // anonymous namespace\n-\n void AsyncFunctionBuiltinsAssembler::AsyncFunctionAwaitResumeClosure(\n     Node* context, Node* sent_value,\n     JSGeneratorObject::ResumeMode resume_mode) {\n   DCHECK(resume_mode == JSGeneratorObject::kNext ||\n          resume_mode == JSGeneratorObject::kThrow);\n \n-  Node* const generator =\n-      LoadContextElement(context, AwaitContext::kGeneratorSlot);\n+  Node* const generator = LoadContextElement(context, Context::EXTENSION_INDEX);\n   CSA_SLOW_ASSERT(this, HasInstanceType(generator, JS_GENERATOR_OBJECT_TYPE));\n \n   // Inline version of GeneratorPrototypeNext / GeneratorPrototypeReturn with\n@@ -113,11 +96,6 @@ void AsyncFunctionBuiltinsAssembler::AsyncFunctionAwait(\n   CSA_SLOW_ASSERT(this, HasInstanceType(generator, JS_GENERATOR_OBJECT_TYPE));\n   CSA_SLOW_ASSERT(this, HasInstanceType(outer_promise, JS_PROMISE_TYPE));\n \n-  ContextInitializer init_closure_context = [&](Node* context) {\n-    StoreContextElementNoWriteBarrier(context, AwaitContext::kGeneratorSlot,\n-                                      generator);\n-  };\n-\n   // TODO(jgruber): AsyncBuiltinsAssembler::Await currently does not reuse\n   // the awaited promise if it is already a promise. Reuse is non-spec compliant\n   // but part of our old behavior gives us a couple of percent\n@@ -130,8 +108,8 @@ void AsyncFunctionBuiltinsAssembler::AsyncFunctionAwait(\n   Goto(&after_debug_hook);\n   BIND(&after_debug_hook);\n \n-  Await(context, generator, awaited, outer_promise, AwaitContext::kLength,\n-        init_closure_context, Context::ASYNC_FUNCTION_AWAIT_RESOLVE_SHARED_FUN,\n+  Await(context, generator, awaited, outer_promise,\n+        Context::ASYNC_FUNCTION_AWAIT_RESOLVE_SHARED_FUN,\n         Context::ASYNC_FUNCTION_AWAIT_REJECT_SHARED_FUN,\n         is_predicted_as_caught);\n \n@@ -144,43 +122,6 @@ void AsyncFunctionBuiltinsAssembler::AsyncFunctionAwait(\n   Goto(&after_debug_hook);\n }\n \n-void AsyncFunctionBuiltinsAssembler::AsyncFunctionAwaitOptimized(\n-    Node* const context, Node* const generator, Node* const awaited,\n-    Node* const outer_promise, const bool is_predicted_as_caught) {\n-  CSA_SLOW_ASSERT(this, HasInstanceType(generator, JS_GENERATOR_OBJECT_TYPE));\n-  CSA_SLOW_ASSERT(this, HasInstanceType(outer_promise, JS_PROMISE_TYPE));\n-\n-  ContextInitializer init_closure_context = [&](Node* context) {\n-    StoreContextElementNoWriteBarrier(context, AwaitContext::kGeneratorSlot,\n-                                      generator);\n-  };\n-\n-  // TODO(jgruber): AsyncBuiltinsAssembler::Await currently does not reuse\n-  // the awaited promise if it is already a promise. Reuse is non-spec compliant\n-  // but part of our old behavior gives us a couple of percent\n-  // performance boost.\n-  // TODO(jgruber): Use a faster specialized version of\n-  // InternalPerformPromiseThen.\n-\n-  Label after_debug_hook(this), call_debug_hook(this, Label::kDeferred);\n-  GotoIf(HasAsyncEventDelegate(), &call_debug_hook);\n-  Goto(&after_debug_hook);\n-  BIND(&after_debug_hook);\n-\n-  AwaitOptimized(\n-      context, generator, awaited, outer_promise, AwaitContext::kLength,\n-      init_closure_context, Context::ASYNC_FUNCTION_AWAIT_RESOLVE_SHARED_FUN,\n-      Context::ASYNC_FUNCTION_AWAIT_REJECT_SHARED_FUN, is_predicted_as_caught);\n-\n-  // Return outer promise to avoid adding an load of the outer promise before\n-  // suspending in BytecodeGenerator.\n-  Return(outer_promise);\n-\n-  BIND(&call_debug_hook);\n-  CallRuntime(Runtime::kDebugAsyncFunctionSuspended, context, outer_promise);\n-  Goto(&after_debug_hook);\n-}\n-\n // Called by the parser from the desugaring of 'await' when catch\n // prediction indicates that there is a locally surrounding catch block.\n TF_BUILTIN(AsyncFunctionAwaitCaught, AsyncFunctionBuiltinsAssembler) {\n@@ -196,19 +137,6 @@ TF_BUILTIN(AsyncFunctionAwaitCaught, AsyncFunctionBuiltinsAssembler) {\n                      kIsPredictedAsCaught);\n }\n \n-TF_BUILTIN(AsyncFunctionAwaitCaughtOptimized, AsyncFunctionBuiltinsAssembler) {\n-  CSA_ASSERT_JS_ARGC_EQ(this, 3);\n-  Node* const generator = Parameter(Descriptor::kGenerator);\n-  Node* const awaited = Parameter(Descriptor::kAwaited);\n-  Node* const outer_promise = Parameter(Descriptor::kOuterPromise);\n-  Node* const context = Parameter(Descriptor::kContext);\n-\n-  static const bool kIsPredictedAsCaught = true;\n-\n-  AsyncFunctionAwaitOptimized(context, generator, awaited, outer_promise,\n-                              kIsPredictedAsCaught);\n-}\n-\n // Called by the parser from the desugaring of 'await' when catch\n // prediction indicates no locally surrounding catch block.\n TF_BUILTIN(AsyncFunctionAwaitUncaught, AsyncFunctionBuiltinsAssembler) {\n@@ -224,20 +152,6 @@ TF_BUILTIN(AsyncFunctionAwaitUncaught, AsyncFunctionBuiltinsAssembler) {\n                      kIsPredictedAsCaught);\n }\n \n-TF_BUILTIN(AsyncFunctionAwaitUncaughtOptimized,\n-           AsyncFunctionBuiltinsAssembler) {\n-  CSA_ASSERT_JS_ARGC_EQ(this, 3);\n-  Node* const generator = Parameter(Descriptor::kGenerator);\n-  Node* const awaited = Parameter(Descriptor::kAwaited);\n-  Node* const outer_promise = Parameter(Descriptor::kOuterPromise);\n-  Node* const context = Parameter(Descriptor::kContext);\n-\n-  static const bool kIsPredictedAsCaught = false;\n-\n-  AsyncFunctionAwaitOptimized(context, generator, awaited, outer_promise,\n-                              kIsPredictedAsCaught);\n-}\n-\n TF_BUILTIN(AsyncFunctionPromiseCreate, AsyncFunctionBuiltinsAssembler) {\n   CSA_ASSERT_JS_ARGC_EQ(this, 0);\n   Node* const context = Parameter(Descriptor::kContext);"
        },
        {
            "sha": "dda781b1a8e7993ecd2220f72d8aefe44662b00e",
            "filename": "deps/v8/src/builtins/builtins-async-gen.cc",
            "status": "modified",
            "additions": 72,
            "deletions": 21,
            "changes": 93,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -23,16 +23,15 @@ class ValueUnwrapContext {\n \n }  // namespace\n \n-Node* AsyncBuiltinsAssembler::Await(\n-    Node* context, Node* generator, Node* value, Node* outer_promise,\n-    int context_length, const ContextInitializer& init_closure_context,\n-    Node* on_resolve_context_index, Node* on_reject_context_index,\n-    Node* is_predicted_as_caught) {\n-  DCHECK_GE(context_length, Context::MIN_CONTEXT_SLOTS);\n-\n+Node* AsyncBuiltinsAssembler::AwaitOld(Node* context, Node* generator,\n+                                       Node* value, Node* outer_promise,\n+                                       Node* on_resolve_context_index,\n+                                       Node* on_reject_context_index,\n+                                       Node* is_predicted_as_caught) {\n   Node* const native_context = LoadNativeContext(context);\n \n-  static const int kWrappedPromiseOffset = FixedArray::SizeFor(context_length);\n+  static const int kWrappedPromiseOffset =\n+      FixedArray::SizeFor(Context::MIN_CONTEXT_SLOTS);\n   static const int kThrowawayPromiseOffset =\n       kWrappedPromiseOffset + JSPromise::kSizeWithEmbedderFields;\n   static const int kResolveClosureOffset =\n@@ -45,9 +44,20 @@ Node* AsyncBuiltinsAssembler::Await(\n   Node* const base = AllocateInNewSpace(kTotalSize);\n   Node* const closure_context = base;\n   {\n-    // Initialize closure context\n-    InitializeFunctionContext(native_context, closure_context, context_length);\n-    init_closure_context(closure_context);\n+    // Initialize the await context, storing the {generator} as extension.\n+    StoreMapNoWriteBarrier(closure_context, RootIndex::kAwaitContextMap);\n+    StoreObjectFieldNoWriteBarrier(closure_context, Context::kLengthOffset,\n+                                   SmiConstant(Context::MIN_CONTEXT_SLOTS));\n+    Node* const empty_scope_info =\n+        LoadContextElement(native_context, Context::SCOPE_INFO_INDEX);\n+    StoreContextElementNoWriteBarrier(\n+        closure_context, Context::SCOPE_INFO_INDEX, empty_scope_info);\n+    StoreContextElementNoWriteBarrier(closure_context, Context::PREVIOUS_INDEX,\n+                                      native_context);\n+    StoreContextElementNoWriteBarrier(closure_context, Context::EXTENSION_INDEX,\n+                                      generator);\n+    StoreContextElementNoWriteBarrier(\n+        closure_context, Context::NATIVE_CONTEXT_INDEX, native_context);\n   }\n \n   // Let promiseCapability be ! NewPromiseCapability(%Promise%).\n@@ -149,19 +159,16 @@ Node* AsyncBuiltinsAssembler::Await(\n \n Node* AsyncBuiltinsAssembler::AwaitOptimized(\n     Node* context, Node* generator, Node* value, Node* outer_promise,\n-    int context_length, const ContextInitializer& init_closure_context,\n     Node* on_resolve_context_index, Node* on_reject_context_index,\n     Node* is_predicted_as_caught) {\n-  DCHECK_GE(context_length, Context::MIN_CONTEXT_SLOTS);\n-\n   Node* const native_context = LoadNativeContext(context);\n   Node* const promise_fun =\n       LoadContextElement(native_context, Context::PROMISE_FUNCTION_INDEX);\n   CSA_ASSERT(this, IsFunctionWithPrototypeSlotMap(LoadMap(promise_fun)));\n   CSA_ASSERT(this, IsConstructor(promise_fun));\n \n   static const int kThrowawayPromiseOffset =\n-      FixedArray::SizeFor(context_length);\n+      FixedArray::SizeFor(Context::MIN_CONTEXT_SLOTS);\n   static const int kResolveClosureOffset =\n       kThrowawayPromiseOffset + JSPromise::kSizeWithEmbedderFields;\n   static const int kRejectClosureOffset =\n@@ -176,9 +183,20 @@ Node* AsyncBuiltinsAssembler::AwaitOptimized(\n   Node* const base = AllocateInNewSpace(kTotalSize);\n   Node* const closure_context = base;\n   {\n-    // Initialize closure context\n-    InitializeFunctionContext(native_context, closure_context, context_length);\n-    init_closure_context(closure_context);\n+    // Initialize the await context, storing the {generator} as extension.\n+    StoreMapNoWriteBarrier(closure_context, RootIndex::kAwaitContextMap);\n+    StoreObjectFieldNoWriteBarrier(closure_context, Context::kLengthOffset,\n+                                   SmiConstant(Context::MIN_CONTEXT_SLOTS));\n+    Node* const empty_scope_info =\n+        LoadContextElement(native_context, Context::SCOPE_INFO_INDEX);\n+    StoreContextElementNoWriteBarrier(\n+        closure_context, Context::SCOPE_INFO_INDEX, empty_scope_info);\n+    StoreContextElementNoWriteBarrier(closure_context, Context::PREVIOUS_INDEX,\n+                                      native_context);\n+    StoreContextElementNoWriteBarrier(closure_context, Context::EXTENSION_INDEX,\n+                                      generator);\n+    StoreContextElementNoWriteBarrier(\n+        closure_context, Context::NATIVE_CONTEXT_INDEX, native_context);\n   }\n \n   Node* const promise_map =\n@@ -261,6 +279,39 @@ Node* AsyncBuiltinsAssembler::AwaitOptimized(\n                      on_resolve, on_reject, throwaway);\n }\n \n+Node* AsyncBuiltinsAssembler::Await(Node* context, Node* generator, Node* value,\n+                                    Node* outer_promise,\n+                                    Node* on_resolve_context_index,\n+                                    Node* on_reject_context_index,\n+                                    Node* is_predicted_as_caught) {\n+  VARIABLE(result, MachineRepresentation::kTagged);\n+  Label if_old(this), if_new(this), done(this);\n+\n+  STATIC_ASSERT(sizeof(FLAG_harmony_await_optimization) == 1);\n+\n+  TNode<Word32T> flag_value = UncheckedCast<Word32T>(Load(\n+      MachineType::Uint8(),\n+      ExternalConstant(\n+          ExternalReference::address_of_harmony_await_optimization_flag())));\n+\n+  Branch(Word32Equal(flag_value, Int32Constant(0)), &if_old, &if_new);\n+\n+  BIND(&if_old);\n+  result.Bind(AwaitOld(context, generator, value, outer_promise,\n+                       on_resolve_context_index, on_reject_context_index,\n+                       is_predicted_as_caught));\n+  Goto(&done);\n+\n+  BIND(&if_new);\n+  result.Bind(AwaitOptimized(context, generator, value, outer_promise,\n+                             on_resolve_context_index, on_reject_context_index,\n+                             is_predicted_as_caught));\n+  Goto(&done);\n+\n+  BIND(&done);\n+  return result.value();\n+}\n+\n void AsyncBuiltinsAssembler::InitializeNativeClosure(Node* context,\n                                                      Node* native_context,\n                                                      Node* function,\n@@ -275,11 +326,11 @@ void AsyncBuiltinsAssembler::InitializeNativeClosure(Node* context,\n   STATIC_ASSERT(JSFunction::kSizeWithoutPrototype == 7 * kPointerSize);\n   StoreMapNoWriteBarrier(function, function_map);\n   StoreObjectFieldRoot(function, JSObject::kPropertiesOrHashOffset,\n-                       Heap::kEmptyFixedArrayRootIndex);\n+                       RootIndex::kEmptyFixedArray);\n   StoreObjectFieldRoot(function, JSObject::kElementsOffset,\n-                       Heap::kEmptyFixedArrayRootIndex);\n+                       RootIndex::kEmptyFixedArray);\n   StoreObjectFieldRoot(function, JSFunction::kFeedbackCellOffset,\n-                       Heap::kManyClosuresCellRootIndex);\n+                       RootIndex::kManyClosuresCell);\n \n   Node* shared_info = LoadContextElement(native_context, context_index);\n   CSA_ASSERT(this, IsSharedFunctionInfo(shared_info));"
        },
        {
            "sha": "9dafddef2102a6f1ba2031e205d45356b4603238",
            "filename": "deps/v8/src/builtins/builtins-async-gen.h",
            "status": "modified",
            "additions": 12,
            "deletions": 41,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -16,66 +16,29 @@ class AsyncBuiltinsAssembler : public PromiseBuiltinsAssembler {\n       : PromiseBuiltinsAssembler(state) {}\n \n  protected:\n-  typedef std::function<void(Node*)> ContextInitializer;\n-\n   // Perform steps to resume generator after `value` is resolved.\n   // `on_reject_context_index` is an index into the Native Context, which should\n   // point to a SharedFunctioninfo instance used to create the closure. The\n   // value following the reject index should be a similar value for the resolve\n   // closure. Returns the Promise-wrapped `value`.\n   Node* Await(Node* context, Node* generator, Node* value, Node* outer_promise,\n-              int context_length,\n-              const ContextInitializer& init_closure_context,\n               Node* on_resolve_context_index, Node* on_reject_context_index,\n               Node* is_predicted_as_caught);\n-  Node* AwaitOptimized(Node* context, Node* generator, Node* value,\n-                       Node* outer_promise, int context_length,\n-                       const ContextInitializer& init_closure_context,\n-                       Node* on_resolve_context_index,\n-                       Node* on_reject_context_index,\n-                       Node* is_predicted_as_caught);\n   Node* Await(Node* context, Node* generator, Node* value, Node* outer_promise,\n-              int context_length,\n-              const ContextInitializer& init_closure_context,\n               int on_resolve_context_index, int on_reject_context_index,\n               Node* is_predicted_as_caught) {\n-    return Await(context, generator, value, outer_promise, context_length,\n-                 init_closure_context, IntPtrConstant(on_resolve_context_index),\n+    return Await(context, generator, value, outer_promise,\n+                 IntPtrConstant(on_resolve_context_index),\n                  IntPtrConstant(on_reject_context_index),\n                  is_predicted_as_caught);\n   }\n-  Node* AwaitOptimized(Node* context, Node* generator, Node* value,\n-                       Node* outer_promise, int context_length,\n-                       const ContextInitializer& init_closure_context,\n-                       int on_resolve_context_index,\n-                       int on_reject_context_index,\n-                       Node* is_predicted_as_caught) {\n-    return AwaitOptimized(\n-        context, generator, value, outer_promise, context_length,\n-        init_closure_context, IntPtrConstant(on_resolve_context_index),\n-        IntPtrConstant(on_reject_context_index), is_predicted_as_caught);\n-  }\n   Node* Await(Node* context, Node* generator, Node* value, Node* outer_promise,\n-              int context_length,\n-              const ContextInitializer& init_closure_context,\n               int on_resolve_context_index, int on_reject_context_index,\n               bool is_predicted_as_caught) {\n-    return Await(context, generator, value, outer_promise, context_length,\n-                 init_closure_context, on_resolve_context_index,\n-                 on_reject_context_index,\n+    return Await(context, generator, value, outer_promise,\n+                 on_resolve_context_index, on_reject_context_index,\n                  BooleanConstant(is_predicted_as_caught));\n   }\n-  Node* AwaitOptimized(Node* context, Node* generator, Node* value,\n-                       Node* outer_promise, int context_length,\n-                       const ContextInitializer& init_closure_context,\n-                       int on_resolve_context_index,\n-                       int on_reject_context_index,\n-                       bool is_predicted_as_caught) {\n-    return AwaitOptimized(context, generator, value, outer_promise,\n-                          context_length, init_closure_context,\n-                          on_resolve_context_index, on_reject_context_index,\n-                          BooleanConstant(is_predicted_as_caught));\n-  }\n \n   // Return a new built-in function object as defined in\n   // Async Iterator Value Unwrap Functions\n@@ -86,6 +49,14 @@ class AsyncBuiltinsAssembler : public PromiseBuiltinsAssembler {\n                                Node* function, Node* context_index);\n   Node* AllocateAsyncIteratorValueUnwrapContext(Node* native_context,\n                                                 Node* done);\n+\n+  Node* AwaitOld(Node* context, Node* generator, Node* value,\n+                 Node* outer_promise, Node* on_resolve_context_index,\n+                 Node* on_reject_context_index, Node* is_predicted_as_caught);\n+  Node* AwaitOptimized(Node* context, Node* generator, Node* value,\n+                       Node* outer_promise, Node* on_resolve_context_index,\n+                       Node* on_reject_context_index,\n+                       Node* is_predicted_as_caught);\n };\n \n }  // namespace internal"
        },
        {
            "sha": "bff2de486ab23adc0cbf4378ebac6c94e6ae48e1",
            "filename": "deps/v8/src/builtins/builtins-async-generator-gen.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 41,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -17,13 +17,6 @@ using compiler::Node;\n \n namespace {\n \n-// Describe fields of Context associated with AsyncGeneratorAwait resume\n-// closures.\n-class AwaitContext {\n- public:\n-  enum Fields { kGeneratorSlot = Context::MIN_CONTEXT_SLOTS, kLength };\n-};\n-\n class AsyncGeneratorBuiltinsAssembler : public AsyncBuiltinsAssembler {\n  public:\n   explicit AsyncGeneratorBuiltinsAssembler(CodeAssemblerState* state)\n@@ -207,7 +200,7 @@ Node* AsyncGeneratorBuiltinsAssembler::AllocateAsyncGeneratorRequest(\n     Node* promise) {\n   CSA_SLOW_ASSERT(this, HasInstanceType(promise, JS_PROMISE_TYPE));\n   Node* request = Allocate(AsyncGeneratorRequest::kSize);\n-  StoreMapNoWriteBarrier(request, Heap::kAsyncGeneratorRequestMapRootIndex);\n+  StoreMapNoWriteBarrier(request, RootIndex::kAsyncGeneratorRequestMap);\n   StoreObjectFieldNoWriteBarrier(request, AsyncGeneratorRequest::kNextOffset,\n                                  UndefinedConstant());\n   StoreObjectFieldNoWriteBarrier(request,\n@@ -218,15 +211,14 @@ Node* AsyncGeneratorBuiltinsAssembler::AllocateAsyncGeneratorRequest(\n   StoreObjectFieldNoWriteBarrier(request, AsyncGeneratorRequest::kPromiseOffset,\n                                  promise);\n   StoreObjectFieldRoot(request, AsyncGeneratorRequest::kNextOffset,\n-                       Heap::kUndefinedValueRootIndex);\n+                       RootIndex::kUndefinedValue);\n   return request;\n }\n \n void AsyncGeneratorBuiltinsAssembler::AsyncGeneratorAwaitResumeClosure(\n     Node* context, Node* value,\n     JSAsyncGeneratorObject::ResumeMode resume_mode) {\n-  Node* const generator =\n-      LoadContextElement(context, AwaitContext::kGeneratorSlot);\n+  Node* const generator = LoadContextElement(context, Context::EXTENSION_INDEX);\n   CSA_SLOW_ASSERT(this, TaggedIsAsyncGenerator(generator));\n \n   SetGeneratorNotAwaiting(generator);\n@@ -254,20 +246,15 @@ void AsyncGeneratorBuiltinsAssembler::AsyncGeneratorAwait(bool is_catchable) {\n   Node* const request = LoadFirstAsyncGeneratorRequestFromQueue(generator);\n   CSA_ASSERT(this, IsNotUndefined(request));\n \n-  ContextInitializer init_closure_context = [&](Node* context) {\n-    StoreContextElementNoWriteBarrier(context, AwaitContext::kGeneratorSlot,\n-                                      generator);\n-  };\n-\n   Node* outer_promise =\n       LoadObjectField(request, AsyncGeneratorRequest::kPromiseOffset);\n \n   const int resolve_index = Context::ASYNC_GENERATOR_AWAIT_RESOLVE_SHARED_FUN;\n   const int reject_index = Context::ASYNC_GENERATOR_AWAIT_REJECT_SHARED_FUN;\n \n   SetGeneratorAwaiting(generator);\n-  Await(context, generator, value, outer_promise, AwaitContext::kLength,\n-        init_closure_context, resolve_index, reject_index, is_catchable);\n+  Await(context, generator, value, outer_promise, resolve_index, reject_index,\n+        is_catchable);\n   Return(UndefinedConstant());\n }\n \n@@ -519,9 +506,9 @@ TF_BUILTIN(AsyncGeneratorResolve, AsyncGeneratorBuiltinsAssembler) {\n                                    Context::ITERATOR_RESULT_MAP_INDEX);\n     StoreMapNoWriteBarrier(iter_result, map);\n     StoreObjectFieldRoot(iter_result, JSIteratorResult::kPropertiesOrHashOffset,\n-                         Heap::kEmptyFixedArrayRootIndex);\n+                         RootIndex::kEmptyFixedArray);\n     StoreObjectFieldRoot(iter_result, JSIteratorResult::kElementsOffset,\n-                         Heap::kEmptyFixedArrayRootIndex);\n+                         RootIndex::kEmptyFixedArray);\n     StoreObjectFieldNoWriteBarrier(iter_result, JSIteratorResult::kValueOffset,\n                                    value);\n     StoreObjectFieldNoWriteBarrier(iter_result, JSIteratorResult::kDoneOffset,\n@@ -585,25 +572,19 @@ TF_BUILTIN(AsyncGeneratorYield, AsyncGeneratorBuiltinsAssembler) {\n   Node* const request = LoadFirstAsyncGeneratorRequestFromQueue(generator);\n   Node* const outer_promise = LoadPromiseFromAsyncGeneratorRequest(request);\n \n-  ContextInitializer init_closure_context = [&](Node* context) {\n-    StoreContextElementNoWriteBarrier(context, AwaitContext::kGeneratorSlot,\n-                                      generator);\n-  };\n-\n   const int on_resolve = Context::ASYNC_GENERATOR_YIELD_RESOLVE_SHARED_FUN;\n   const int on_reject = Context::ASYNC_GENERATOR_AWAIT_REJECT_SHARED_FUN;\n \n   SetGeneratorAwaiting(generator);\n-  Await(context, generator, value, outer_promise, AwaitContext::kLength,\n-        init_closure_context, on_resolve, on_reject, is_caught);\n+  Await(context, generator, value, outer_promise, on_resolve, on_reject,\n+        is_caught);\n   Return(UndefinedConstant());\n }\n \n TF_BUILTIN(AsyncGeneratorYieldResolveClosure, AsyncGeneratorBuiltinsAssembler) {\n   Node* const context = Parameter(Descriptor::kContext);\n   Node* const value = Parameter(Descriptor::kValue);\n-  Node* const generator =\n-      LoadContextElement(context, AwaitContext::kGeneratorSlot);\n+  Node* const generator = LoadContextElement(context, Context::EXTENSION_INDEX);\n \n   SetGeneratorNotAwaiting(generator);\n \n@@ -656,17 +637,11 @@ TF_BUILTIN(AsyncGeneratorReturn, AsyncGeneratorBuiltinsAssembler) {\n \n   BIND(&perform_await);\n \n-  ContextInitializer init_closure_context = [&](Node* context) {\n-    StoreContextElementNoWriteBarrier(context, AwaitContext::kGeneratorSlot,\n-                                      generator);\n-  };\n-\n   SetGeneratorAwaiting(generator);\n   Node* const context = Parameter(Descriptor::kContext);\n   Node* const outer_promise = LoadPromiseFromAsyncGeneratorRequest(req);\n-  Await(context, generator, value, outer_promise, AwaitContext::kLength,\n-        init_closure_context, var_on_resolve.value(), var_on_reject.value(),\n-        is_caught);\n+  Await(context, generator, value, outer_promise, var_on_resolve.value(),\n+        var_on_reject.value(), is_caught);\n \n   Return(UndefinedConstant());\n }\n@@ -689,8 +664,7 @@ TF_BUILTIN(AsyncGeneratorReturnClosedResolveClosure,\n            AsyncGeneratorBuiltinsAssembler) {\n   Node* const context = Parameter(Descriptor::kContext);\n   Node* const value = Parameter(Descriptor::kValue);\n-  Node* const generator =\n-      LoadContextElement(context, AwaitContext::kGeneratorSlot);\n+  Node* const generator = LoadContextElement(context, Context::EXTENSION_INDEX);\n \n   SetGeneratorNotAwaiting(generator);\n \n@@ -707,8 +681,7 @@ TF_BUILTIN(AsyncGeneratorReturnClosedRejectClosure,\n            AsyncGeneratorBuiltinsAssembler) {\n   Node* const context = Parameter(Descriptor::kContext);\n   Node* const value = Parameter(Descriptor::kValue);\n-  Node* const generator =\n-      LoadContextElement(context, AwaitContext::kGeneratorSlot);\n+  Node* const generator = LoadContextElement(context, Context::EXTENSION_INDEX);\n \n   SetGeneratorNotAwaiting(generator);\n "
        },
        {
            "sha": "3672bda9d13620fadf431af96e92ad126ad83590",
            "filename": "deps/v8/src/builtins/builtins-async-iterator-gen.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 54,
            "changes": 54,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-iterator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-iterator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-iterator-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -333,20 +333,6 @@ TF_BUILTIN(AsyncFromSyncIteratorPrototypeNext, AsyncFromSyncBuiltinsAssembler) {\n       \"[Async-from-Sync Iterator].prototype.next\");\n }\n \n-TF_BUILTIN(AsyncFromSyncIteratorPrototypeNextOptimized,\n-           AsyncFromSyncBuiltinsAssembler) {\n-  Node* const iterator = Parameter(Descriptor::kReceiver);\n-  Node* const value = Parameter(Descriptor::kValue);\n-  Node* const context = Parameter(Descriptor::kContext);\n-\n-  auto get_method = [=](Node* const unused) {\n-    return LoadObjectField(iterator, JSAsyncFromSyncIterator::kNextOffset);\n-  };\n-  Generate_AsyncFromSyncIteratorMethodOptimized(\n-      context, iterator, value, get_method, UndefinedMethodHandler(),\n-      \"[Async-from-Sync Iterator].prototype.next\");\n-}\n-\n // https://tc39.github.io/proposal-async-iteration/\n // Section #sec-%asyncfromsynciteratorprototype%.return\n TF_BUILTIN(AsyncFromSyncIteratorPrototypeReturn,\n@@ -374,31 +360,6 @@ TF_BUILTIN(AsyncFromSyncIteratorPrototypeReturn,\n       \"[Async-from-Sync Iterator].prototype.return\");\n }\n \n-TF_BUILTIN(AsyncFromSyncIteratorPrototypeReturnOptimized,\n-           AsyncFromSyncBuiltinsAssembler) {\n-  Node* const iterator = Parameter(Descriptor::kReceiver);\n-  Node* const value = Parameter(Descriptor::kValue);\n-  Node* const context = Parameter(Descriptor::kContext);\n-\n-  auto if_return_undefined = [=](Node* const native_context,\n-                                 Node* const promise, Label* if_exception) {\n-    // If return is undefined, then\n-    // Let iterResult be ! CreateIterResultObject(value, true)\n-    Node* const iter_result = CallBuiltin(Builtins::kCreateIterResultObject,\n-                                          context, value, TrueConstant());\n-\n-    // Perform ! Call(promiseCapability.[[Resolve]], undefined,  iterResult ).\n-    // IfAbruptRejectPromise(nextDone, promiseCapability).\n-    // Return promiseCapability.[[Promise]].\n-    CallBuiltin(Builtins::kResolvePromise, context, promise, iter_result);\n-    Return(promise);\n-  };\n-\n-  Generate_AsyncFromSyncIteratorMethodOptimized(\n-      context, iterator, value, factory()->return_string(), if_return_undefined,\n-      \"[Async-from-Sync Iterator].prototype.return\");\n-}\n-\n // https://tc39.github.io/proposal-async-iteration/\n // Section #sec-%asyncfromsynciteratorprototype%.throw\n TF_BUILTIN(AsyncFromSyncIteratorPrototypeThrow,\n@@ -416,20 +377,5 @@ TF_BUILTIN(AsyncFromSyncIteratorPrototypeThrow,\n       reason);\n }\n \n-TF_BUILTIN(AsyncFromSyncIteratorPrototypeThrowOptimized,\n-           AsyncFromSyncBuiltinsAssembler) {\n-  Node* const iterator = Parameter(Descriptor::kReceiver);\n-  Node* const reason = Parameter(Descriptor::kReason);\n-  Node* const context = Parameter(Descriptor::kContext);\n-\n-  auto if_throw_undefined = [=](Node* const native_context, Node* const promise,\n-                                Label* if_exception) { Goto(if_exception); };\n-\n-  Generate_AsyncFromSyncIteratorMethodOptimized(\n-      context, iterator, reason, factory()->throw_string(), if_throw_undefined,\n-      \"[Async-from-Sync Iterator].prototype.throw\", Label::kNonDeferred,\n-      reason);\n-}\n-\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "52ed0563c651ae6bb0304b38bf0b422d9c334d63",
            "filename": "deps/v8/src/builtins/builtins-boolean.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -26,8 +26,9 @@ BUILTIN(BooleanConstructor) {\n   Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n   DCHECK(*target == target->native_context()->boolean_function());\n   Handle<JSObject> result;\n-  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n-                                     JSObject::New(target, new_target));\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, result,\n+      JSObject::New(target, new_target, Handle<AllocationSite>::null()));\n   Handle<JSValue>::cast(result)->set_value(\n       isolate->heap()->ToBoolean(value->BooleanValue(isolate)));\n   return *result;"
        },
        {
            "sha": "e23f13d2b3633a74d959fabcf1ce26ca215b5174",
            "filename": "deps/v8/src/builtins/builtins-call-gen.cc",
            "status": "modified",
            "additions": 46,
            "deletions": 15,
            "changes": 61,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -17,45 +17,75 @@ namespace internal {\n \n void Builtins::Generate_CallFunction_ReceiverIsNullOrUndefined(\n     MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallFunction(masm, ConvertReceiverMode::kNullOrUndefined);\n }\n \n void Builtins::Generate_CallFunction_ReceiverIsNotNullOrUndefined(\n     MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallFunction(masm, ConvertReceiverMode::kNotNullOrUndefined);\n }\n \n void Builtins::Generate_CallFunction_ReceiverIsAny(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallFunction(masm, ConvertReceiverMode::kAny);\n }\n \n void Builtins::Generate_CallBoundFunction(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallBoundFunctionImpl(masm);\n }\n \n void Builtins::Generate_Call_ReceiverIsNullOrUndefined(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_Call(masm, ConvertReceiverMode::kNullOrUndefined);\n }\n \n void Builtins::Generate_Call_ReceiverIsNotNullOrUndefined(\n     MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_Call(masm, ConvertReceiverMode::kNotNullOrUndefined);\n }\n \n void Builtins::Generate_Call_ReceiverIsAny(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_Call(masm, ConvertReceiverMode::kAny);\n }\n \n void Builtins::Generate_CallVarargs(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallOrConstructVarargs(masm, masm->isolate()->builtins()->Call());\n }\n \n void Builtins::Generate_CallForwardVarargs(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallOrConstructForwardVarargs(masm, CallOrConstructMode::kCall,\n                                          masm->isolate()->builtins()->Call());\n }\n \n void Builtins::Generate_CallFunctionForwardVarargs(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallOrConstructForwardVarargs(\n       masm, CallOrConstructMode::kCall,\n       masm->isolate()->builtins()->CallFunction());\n@@ -163,9 +193,9 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructWithArrayLike(\n   BIND(&if_arguments);\n   {\n     TNode<JSArgumentsObject> js_arguments = CAST(arguments_list);\n-    // Try to extract the elements from an JSArgumentsObject.\n-    TNode<Object> length =\n-        LoadObjectField(js_arguments, JSArgumentsObject::kLengthOffset);\n+    // Try to extract the elements from an JSArgumentsObjectWithLength.\n+    TNode<Object> length = LoadObjectField(\n+        js_arguments, JSArgumentsObjectWithLength::kLengthOffset);\n     TNode<FixedArrayBase> elements = LoadElements(js_arguments);\n     TNode<Smi> elements_length = LoadFixedArrayBaseLength(elements);\n     GotoIfNot(WordEqual(length, elements_length), &if_runtime);\n@@ -211,11 +241,11 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructWithArrayLike(\n     {\n       if (new_target == nullptr) {\n         Callable callable = CodeFactory::CallVarargs(isolate());\n-        TailCallStub(callable, context, target, args_count, elements, length);\n+        TailCallStub(callable, context, target, args_count, length, elements);\n       } else {\n         Callable callable = CodeFactory::ConstructVarargs(isolate());\n-        TailCallStub(callable, context, target, new_target, args_count,\n-                     elements, length);\n+        TailCallStub(callable, context, target, new_target, args_count, length,\n+                     elements);\n       }\n     }\n \n@@ -266,11 +296,11 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructDoubleVarargs(\n   {\n     if (new_target == nullptr) {\n       Callable callable = CodeFactory::CallVarargs(isolate());\n-      TailCallStub(callable, context, target, args_count, new_elements, length);\n+      TailCallStub(callable, context, target, args_count, length, new_elements);\n     } else {\n       Callable callable = CodeFactory::ConstructVarargs(isolate());\n-      TailCallStub(callable, context, target, new_target, args_count,\n-                   new_elements, length);\n+      TailCallStub(callable, context, target, new_target, args_count, length,\n+                   new_elements);\n     }\n   }\n }\n@@ -299,7 +329,7 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructWithSpread(\n   // Check that the Array.prototype hasn't been modified in a way that would\n   // affect iteration.\n   TNode<PropertyCell> protector_cell =\n-      CAST(LoadRoot(Heap::kArrayIteratorProtectorRootIndex));\n+      CAST(LoadRoot(RootIndex::kArrayIteratorProtector));\n   GotoIf(WordEqual(LoadObjectField(protector_cell, PropertyCell::kValueOffset),\n                    SmiConstant(Isolate::kProtectorInvalid)),\n          &if_generic);\n@@ -325,8 +355,9 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructWithSpread(\n     TNode<Object> iterator_fn =\n         GetProperty(context, spread, IteratorSymbolConstant());\n     GotoIfNot(TaggedIsCallable(iterator_fn), &if_iterator_fn_not_callable);\n-    TNode<JSArray> list = CAST(\n-        CallBuiltin(Builtins::kIterableToList, context, spread, iterator_fn));\n+    TNode<JSArray> list =\n+        CAST(CallBuiltin(Builtins::kIterableToListMayPreserveHoles, context,\n+                         spread, iterator_fn));\n     var_length = LoadAndUntagToWord32ObjectField(list, JSArray::kLengthOffset);\n \n     var_elements = LoadElements(list);\n@@ -346,11 +377,11 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructWithSpread(\n \n     if (new_target == nullptr) {\n       Callable callable = CodeFactory::CallVarargs(isolate());\n-      TailCallStub(callable, context, target, args_count, elements, length);\n+      TailCallStub(callable, context, target, args_count, length, elements);\n     } else {\n       Callable callable = CodeFactory::ConstructVarargs(isolate());\n-      TailCallStub(callable, context, target, new_target, args_count, elements,\n-                   length);\n+      TailCallStub(callable, context, target, new_target, args_count, length,\n+                   elements);\n     }\n   }\n "
        },
        {
            "sha": "b580bb181f25507e0e394bf4fc3868a91a76b6b7",
            "filename": "deps/v8/src/builtins/builtins-callsite.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-callsite.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-callsite.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-callsite.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -137,6 +137,14 @@ BUILTIN(CallSitePrototypeGetTypeName) {\n   return *it.Frame()->GetTypeName();\n }\n \n+BUILTIN(CallSitePrototypeIsAsync) {\n+  HandleScope scope(isolate);\n+  CHECK_CALLSITE(recv, \"isAsync\");\n+  FrameArrayIterator it(isolate, GetFrameArray(isolate, recv),\n+                        GetFrameIndex(isolate, recv));\n+  return isolate->heap()->ToBoolean(it.Frame()->IsAsync());\n+}\n+\n BUILTIN(CallSitePrototypeIsConstructor) {\n   HandleScope scope(isolate);\n   CHECK_CALLSITE(recv, \"isConstructor\");"
        },
        {
            "sha": "1ff64b08773ed2c47f9872179e0c246ed82912ea",
            "filename": "deps/v8/src/builtins/builtins-collections-gen.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 13,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -24,7 +24,7 @@ class BaseCollectionsAssembler : public CodeStubAssembler {\n   explicit BaseCollectionsAssembler(compiler::CodeAssemblerState* state)\n       : CodeStubAssembler(state) {}\n \n-  virtual ~BaseCollectionsAssembler() {}\n+  virtual ~BaseCollectionsAssembler() = default;\n \n  protected:\n   enum Variant { kMap, kSet, kWeakMap, kWeakSet };\n@@ -628,7 +628,7 @@ class CollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n   Node* AllocateJSCollectionIterator(Node* context, int map_index,\n                                      Node* collection);\n   TNode<Object> AllocateTable(Variant variant, TNode<Context> context,\n-                              TNode<IntPtrT> at_least_space_for);\n+                              TNode<IntPtrT> at_least_space_for) override;\n   Node* GetHash(Node* const key);\n   Node* CallGetHashRaw(Node* const key);\n   Node* CallGetOrCreateHashRaw(Node* const key);\n@@ -731,9 +731,9 @@ Node* CollectionsBuiltinsAssembler::AllocateJSCollectionIterator(\n   Node* const iterator = AllocateInNewSpace(IteratorType::kSize);\n   StoreMapNoWriteBarrier(iterator, iterator_map);\n   StoreObjectFieldRoot(iterator, IteratorType::kPropertiesOrHashOffset,\n-                       Heap::kEmptyFixedArrayRootIndex);\n+                       RootIndex::kEmptyFixedArray);\n   StoreObjectFieldRoot(iterator, IteratorType::kElementsOffset,\n-                       Heap::kEmptyFixedArrayRootIndex);\n+                       RootIndex::kEmptyFixedArray);\n   StoreObjectFieldNoWriteBarrier(iterator, IteratorType::kTableOffset, table);\n   StoreObjectFieldNoWriteBarrier(iterator, IteratorType::kIndexOffset,\n                                  SmiConstant(0));\n@@ -770,7 +770,7 @@ TF_BUILTIN(SetConstructor, CollectionsBuiltinsAssembler) {\n \n Node* CollectionsBuiltinsAssembler::CallGetOrCreateHashRaw(Node* const key) {\n   Node* const function_addr =\n-      ExternalConstant(ExternalReference::get_or_create_hash_raw(isolate()));\n+      ExternalConstant(ExternalReference::get_or_create_hash_raw());\n   Node* const isolate_ptr =\n       ExternalConstant(ExternalReference::isolate_address(isolate()));\n \n@@ -1699,7 +1699,7 @@ TF_BUILTIN(MapIteratorPrototypeNext, CollectionsBuiltinsAssembler) {\n   BIND(&return_end);\n   {\n     StoreObjectFieldRoot(receiver, JSMapIterator::kTableOffset,\n-                         Heap::kEmptyOrderedHashMapRootIndex);\n+                         RootIndex::kEmptyOrderedHashMap);\n     Goto(&return_value);\n   }\n }\n@@ -1907,7 +1907,7 @@ TF_BUILTIN(SetIteratorPrototypeNext, CollectionsBuiltinsAssembler) {\n   BIND(&return_end);\n   {\n     StoreObjectFieldRoot(receiver, JSSetIterator::kTableOffset,\n-                         Heap::kEmptyOrderedHashSetRootIndex);\n+                         RootIndex::kEmptyOrderedHashSet);\n     Goto(&return_value);\n   }\n }\n@@ -1986,7 +1986,7 @@ class WeakCollectionsBuiltinsAssembler : public BaseCollectionsAssembler {\n                 TNode<IntPtrT> number_of_elements);\n \n   TNode<Object> AllocateTable(Variant variant, TNode<Context> context,\n-                              TNode<IntPtrT> at_least_space_for);\n+                              TNode<IntPtrT> at_least_space_for) override;\n \n   // Generates and sets the identity for a JSRececiver.\n   TNode<Smi> CreateIdentityHash(TNode<Object> receiver);\n@@ -2062,8 +2062,7 @@ TNode<Object> WeakCollectionsBuiltinsAssembler::AllocateTable(\n   TNode<FixedArray> table = CAST(\n       AllocateFixedArray(HOLEY_ELEMENTS, length, kAllowLargeObjectAllocation));\n \n-  Heap::RootListIndex map_root_index = static_cast<Heap::RootListIndex>(\n-      EphemeronHashTableShape::GetMapRootIndex());\n+  RootIndex map_root_index = EphemeronHashTableShape::GetMapRootIndex();\n   StoreMapNoWriteBarrier(table, map_root_index);\n   StoreFixedArrayElement(table, EphemeronHashTable::kNumberOfElementsIndex,\n                          SmiConstant(0), SKIP_WRITE_BARRIER);\n@@ -2075,14 +2074,14 @@ TNode<Object> WeakCollectionsBuiltinsAssembler::AllocateTable(\n \n   TNode<IntPtrT> start = KeyIndexFromEntry(IntPtrConstant(0));\n   FillFixedArrayWithValue(HOLEY_ELEMENTS, table, start, length,\n-                          Heap::kUndefinedValueRootIndex);\n+                          RootIndex::kUndefinedValue);\n   return table;\n }\n \n TNode<Smi> WeakCollectionsBuiltinsAssembler::CreateIdentityHash(\n     TNode<Object> key) {\n-  TNode<ExternalReference> function_addr = ExternalConstant(\n-      ExternalReference::jsreceiver_create_identity_hash(isolate()));\n+  TNode<ExternalReference> function_addr =\n+      ExternalConstant(ExternalReference::jsreceiver_create_identity_hash());\n   TNode<ExternalReference> isolate_ptr =\n       ExternalConstant(ExternalReference::isolate_address(isolate()));\n "
        },
        {
            "sha": "d6819d8f667c0304def5954486e9efe360891afe",
            "filename": "deps/v8/src/builtins/builtins-console.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -32,7 +32,8 @@ namespace internal {\n   V(CountReset, countReset)         \\\n   V(Assert, assert)                 \\\n   V(Profile, profile)               \\\n-  V(ProfileEnd, profileEnd)\n+  V(ProfileEnd, profileEnd)         \\\n+  V(TimeLog, timeLog)\n \n namespace {\n void ConsoleCall("
        },
        {
            "sha": "26c97ba6813f6954d981b8b3b8ff451581b2fe9f",
            "filename": "deps/v8/src/builtins/builtins-constructor-gen.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 8,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -19,17 +19,26 @@ namespace v8 {\n namespace internal {\n \n void Builtins::Generate_ConstructVarargs(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallOrConstructVarargs(masm,\n                                   BUILTIN_CODE(masm->isolate(), Construct));\n }\n \n void Builtins::Generate_ConstructForwardVarargs(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallOrConstructForwardVarargs(\n       masm, CallOrConstructMode::kConstruct,\n       BUILTIN_CODE(masm->isolate(), Construct));\n }\n \n void Builtins::Generate_ConstructFunctionForwardVarargs(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   Generate_CallOrConstructForwardVarargs(\n       masm, CallOrConstructMode::kConstruct,\n       BUILTIN_CODE(masm->isolate(), ConstructFunction));\n@@ -77,11 +86,11 @@ TF_BUILTIN(FastNewClosure, ConstructorBuiltinsAssembler) {\n     Goto(&cell_done);\n \n     BIND(&no_closures);\n-    StoreMapNoWriteBarrier(feedback_cell, Heap::kOneClosureCellMapRootIndex);\n+    StoreMapNoWriteBarrier(feedback_cell, RootIndex::kOneClosureCellMap);\n     Goto(&cell_done);\n \n     BIND(&one_closure);\n-    StoreMapNoWriteBarrier(feedback_cell, Heap::kManyClosuresCellMapRootIndex);\n+    StoreMapNoWriteBarrier(feedback_cell, RootIndex::kManyClosuresCellMap);\n     Goto(&cell_done);\n \n     BIND(&cell_done);\n@@ -116,9 +125,9 @@ TF_BUILTIN(FastNewClosure, ConstructorBuiltinsAssembler) {\n \n   // Initialize the rest of the function.\n   StoreObjectFieldRoot(result, JSObject::kPropertiesOrHashOffset,\n-                       Heap::kEmptyFixedArrayRootIndex);\n+                       RootIndex::kEmptyFixedArray);\n   StoreObjectFieldRoot(result, JSObject::kElementsOffset,\n-                       Heap::kEmptyFixedArrayRootIndex);\n+                       RootIndex::kEmptyFixedArray);\n   {\n     // Set function prototype if necessary.\n     Label done(this), init_prototype(this);\n@@ -127,7 +136,7 @@ TF_BUILTIN(FastNewClosure, ConstructorBuiltinsAssembler) {\n \n     BIND(&init_prototype);\n     StoreObjectFieldRoot(result, JSFunction::kPrototypeOrInitialMapOffset,\n-                         Heap::kTheHoleValueRootIndex);\n+                         RootIndex::kTheHoleValue);\n     Goto(&done);\n     BIND(&done);\n   }\n@@ -236,13 +245,13 @@ Node* ConstructorBuiltinsAssembler::EmitFastNewFunctionContext(\n   TNode<Context> function_context =\n       UncheckedCast<Context>(AllocateInNewSpace(size));\n \n-  Heap::RootListIndex context_type;\n+  RootIndex context_type;\n   switch (scope_type) {\n     case EVAL_SCOPE:\n-      context_type = Heap::kEvalContextMapRootIndex;\n+      context_type = RootIndex::kEvalContextMap;\n       break;\n     case FUNCTION_SCOPE:\n-      context_type = Heap::kFunctionContextMapRootIndex;\n+      context_type = RootIndex::kFunctionContextMap;\n       break;\n     default:\n       UNREACHABLE();"
        },
        {
            "sha": "b8980566583391a4c161c5e380e0e9ffc4959d0a",
            "filename": "deps/v8/src/builtins/builtins-conversion-gen.cc",
            "status": "modified",
            "additions": 61,
            "deletions": 11,
            "changes": 72,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -48,10 +48,8 @@ void ConversionBuiltinsAssembler::Generate_NonPrimitiveToPrimitive(\n         if_resultisnotprimitive(this, Label::kDeferred);\n     GotoIf(TaggedIsSmi(result), &if_resultisprimitive);\n     Node* result_instance_type = LoadInstanceType(result);\n-    STATIC_ASSERT(FIRST_PRIMITIVE_TYPE == FIRST_TYPE);\n-    Branch(Int32LessThanOrEqual(result_instance_type,\n-                                Int32Constant(LAST_PRIMITIVE_TYPE)),\n-           &if_resultisprimitive, &if_resultisnotprimitive);\n+    Branch(IsPrimitiveInstanceType(result_instance_type), &if_resultisprimitive,\n+           &if_resultisnotprimitive);\n \n     BIND(&if_resultisprimitive);\n     {\n@@ -108,7 +106,62 @@ TF_BUILTIN(ToName, CodeStubAssembler) {\n   Node* context = Parameter(Descriptor::kContext);\n   Node* input = Parameter(Descriptor::kArgument);\n \n-  Return(ToName(context, input));\n+  VARIABLE(var_input, MachineRepresentation::kTagged, input);\n+  Label loop(this, &var_input);\n+  Goto(&loop);\n+  BIND(&loop);\n+  {\n+    // Load the current {input} value.\n+    Node* input = var_input.value();\n+\n+    // Dispatch based on the type of the {input.}\n+    Label if_inputisbigint(this), if_inputisname(this), if_inputisnumber(this),\n+        if_inputisoddball(this), if_inputisreceiver(this, Label::kDeferred);\n+    GotoIf(TaggedIsSmi(input), &if_inputisnumber);\n+    Node* input_instance_type = LoadInstanceType(input);\n+    STATIC_ASSERT(FIRST_NAME_TYPE == FIRST_TYPE);\n+    GotoIf(IsNameInstanceType(input_instance_type), &if_inputisname);\n+    GotoIf(IsJSReceiverInstanceType(input_instance_type), &if_inputisreceiver);\n+    GotoIf(IsHeapNumberInstanceType(input_instance_type), &if_inputisnumber);\n+    Branch(IsBigIntInstanceType(input_instance_type), &if_inputisbigint,\n+           &if_inputisoddball);\n+\n+    BIND(&if_inputisbigint);\n+    {\n+      // We don't have a fast-path for BigInt currently, so just\n+      // tail call to the %ToString runtime function here for now.\n+      TailCallRuntime(Runtime::kToString, context, input);\n+    }\n+\n+    BIND(&if_inputisname);\n+    {\n+      // The {input} is already a Name.\n+      Return(input);\n+    }\n+\n+    BIND(&if_inputisnumber);\n+    {\n+      // Convert the String {input} to a Number.\n+      TailCallBuiltin(Builtins::kNumberToString, context, input);\n+    }\n+\n+    BIND(&if_inputisoddball);\n+    {\n+      // Just return the {input}'s string representation.\n+      CSA_ASSERT(this, IsOddballInstanceType(input_instance_type));\n+      Return(LoadObjectField(input, Oddball::kToStringOffset));\n+    }\n+\n+    BIND(&if_inputisreceiver);\n+    {\n+      // Convert the JSReceiver {input} to a primitive first,\n+      // and then run the loop again with the new {input},\n+      // which is then a primitive value.\n+      var_input.Bind(CallBuiltin(Builtins::kNonPrimitiveToPrimitive_String,\n+                                 context, input));\n+      Goto(&loop);\n+    }\n+  }\n }\n \n TF_BUILTIN(NonNumberToNumber, CodeStubAssembler) {\n@@ -205,10 +258,7 @@ void ConversionBuiltinsAssembler::Generate_OrdinaryToPrimitive(\n       // Return the {result} if it is a primitive.\n       GotoIf(TaggedIsSmi(result), &return_result);\n       Node* result_instance_type = LoadInstanceType(result);\n-      STATIC_ASSERT(FIRST_PRIMITIVE_TYPE == FIRST_TYPE);\n-      GotoIf(Int32LessThanOrEqual(result_instance_type,\n-                                  Int32Constant(LAST_PRIMITIVE_TYPE)),\n-             &return_result);\n+      GotoIf(IsPrimitiveInstanceType(result_instance_type), &return_result);\n     }\n \n     // Just continue with the next {name} if the {method} is not callable.\n@@ -384,9 +434,9 @@ TF_BUILTIN(ToObject, CodeStubAssembler) {\n   Node* js_value = Allocate(JSValue::kSize);\n   StoreMapNoWriteBarrier(js_value, initial_map);\n   StoreObjectFieldRoot(js_value, JSValue::kPropertiesOrHashOffset,\n-                       Heap::kEmptyFixedArrayRootIndex);\n+                       RootIndex::kEmptyFixedArray);\n   StoreObjectFieldRoot(js_value, JSObject::kElementsOffset,\n-                       Heap::kEmptyFixedArrayRootIndex);\n+                       RootIndex::kEmptyFixedArray);\n   StoreObjectField(js_value, JSValue::kValueOffset, object);\n   Return(js_value);\n "
        },
        {
            "sha": "4a55a90eef3eec8de0d5392ad92bbb85b0b40c4d",
            "filename": "deps/v8/src/builtins/builtins-data-view-gen.h",
            "status": "modified",
            "additions": 3,
            "deletions": 11,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-data-view-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-data-view-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-data-view-gen.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -17,25 +17,17 @@ class DataViewBuiltinsAssembler : public BaseBuiltinsFromDSLAssembler {\n   explicit DataViewBuiltinsAssembler(compiler::CodeAssemblerState* state)\n       : BaseBuiltinsFromDSLAssembler(state) {}\n \n-  TNode<Number> LoadDataViewByteOffset(TNode<JSDataView> data_view) {\n-    return CAST(LoadObjectField(data_view, JSDataView::kByteOffsetOffset));\n-  }\n-\n-  TNode<Number> LoadDataViewByteLength(TNode<JSDataView> data_view) {\n-    return CAST(LoadObjectField(data_view, JSDataView::kByteLengthOffset));\n-  }\n-\n-  TNode<Int32T> LoadUint8(TNode<RawPtrT> data_pointer, TNode<IntPtrT> offset) {\n+  TNode<Int32T> LoadUint8(TNode<RawPtrT> data_pointer, TNode<UintPtrT> offset) {\n     return UncheckedCast<Int32T>(\n         Load(MachineType::Uint8(), data_pointer, offset));\n   }\n \n-  TNode<Int32T> LoadInt8(TNode<RawPtrT> data_pointer, TNode<IntPtrT> offset) {\n+  TNode<Int32T> LoadInt8(TNode<RawPtrT> data_pointer, TNode<UintPtrT> offset) {\n     return UncheckedCast<Int32T>(\n         Load(MachineType::Int8(), data_pointer, offset));\n   }\n \n-  void StoreWord8(TNode<RawPtrT> data_pointer, TNode<IntPtrT> offset,\n+  void StoreWord8(TNode<RawPtrT> data_pointer, TNode<UintPtrT> offset,\n                   TNode<Word32T> value) {\n     StoreNoWriteBarrier(MachineRepresentation::kWord8, data_pointer, offset,\n                         value);"
        },
        {
            "sha": "f40cd0f68e2f6fec661d6c90341b4624b55657ec",
            "filename": "deps/v8/src/builtins/builtins-dataview.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 14,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -43,51 +43,52 @@ BUILTIN(DataViewConstructor) {\n   Handle<JSArrayBuffer> array_buffer = Handle<JSArrayBuffer>::cast(buffer);\n \n   // 4. Let offset be ? ToIndex(byteOffset).\n-  Handle<Object> offset;\n   ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-      isolate, offset,\n+      isolate, byte_offset,\n       Object::ToIndex(isolate, byte_offset, MessageTemplate::kInvalidOffset));\n+  size_t view_byte_offset = byte_offset->Number();\n \n   // 5. If IsDetachedBuffer(buffer) is true, throw a TypeError exception.\n   //    We currently violate the specification at this point. TODO: Fix that.\n \n   // 6. Let bufferByteLength be the value of buffer's\n   // [[ArrayBufferByteLength]] internal slot.\n-  double const buffer_byte_length = array_buffer->byte_length()->Number();\n+  size_t const buffer_byte_length = array_buffer->byte_length();\n \n   // 7. If offset > bufferByteLength, throw a RangeError exception.\n-  if (offset->Number() > buffer_byte_length) {\n+  if (view_byte_offset > buffer_byte_length) {\n     THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewRangeError(MessageTemplate::kInvalidOffset, offset));\n+        isolate, NewRangeError(MessageTemplate::kInvalidOffset, byte_offset));\n   }\n \n-  Handle<Object> view_byte_length;\n+  size_t view_byte_length;\n   if (byte_length->IsUndefined(isolate)) {\n     // 8. If byteLength is either not present or undefined, then\n     //       a. Let viewByteLength be bufferByteLength - offset.\n-    view_byte_length =\n-        isolate->factory()->NewNumber(buffer_byte_length - offset->Number());\n+    view_byte_length = buffer_byte_length - view_byte_offset;\n   } else {\n     // 9. Else,\n     //       a. Let viewByteLength be ? ToIndex(byteLength).\n     //       b. If offset+viewByteLength > bufferByteLength, throw a\n     //          RangeError exception.\n     ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-        isolate, view_byte_length,\n+        isolate, byte_length,\n         Object::ToIndex(isolate, byte_length,\n                         MessageTemplate::kInvalidDataViewLength));\n-    if (offset->Number() + view_byte_length->Number() > buffer_byte_length) {\n+    if (view_byte_offset + byte_length->Number() > buffer_byte_length) {\n       THROW_NEW_ERROR_RETURN_FAILURE(\n           isolate, NewRangeError(MessageTemplate::kInvalidDataViewLength));\n     }\n+    view_byte_length = byte_length->Number();\n   }\n \n   // 10. Let O be ? OrdinaryCreateFromConstructor(NewTarget,\n   //     \"%DataViewPrototype%\", [[DataView]], [[ViewedArrayBuffer]],\n   //     [[ByteLength]], [[ByteOffset]]).\n   Handle<JSObject> result;\n-  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n-                                     JSObject::New(target, new_target));\n+  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+      isolate, result,\n+      JSObject::New(target, new_target, Handle<AllocationSite>::null()));\n   for (int i = 0; i < ArrayBufferView::kEmbedderFieldCount; ++i) {\n     Handle<JSDataView>::cast(result)->SetEmbedderField(i, Smi::kZero);\n   }\n@@ -96,10 +97,10 @@ BUILTIN(DataViewConstructor) {\n   Handle<JSDataView>::cast(result)->set_buffer(*array_buffer);\n \n   // 12. Set O's [[ByteLength]] internal slot to viewByteLength.\n-  Handle<JSDataView>::cast(result)->set_byte_length(*view_byte_length);\n+  Handle<JSDataView>::cast(result)->set_byte_length(view_byte_length);\n \n   // 13. Set O's [[ByteOffset]] internal slot to offset.\n-  Handle<JSDataView>::cast(result)->set_byte_offset(*offset);\n+  Handle<JSDataView>::cast(result)->set_byte_offset(view_byte_offset);\n \n   // 14. Return O.\n   return *result;"
        },
        {
            "sha": "e0cb199920bfb8b2eb4e78366bed4ddaedd6d4ba",
            "filename": "deps/v8/src/builtins/builtins-date-gen.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -193,11 +193,11 @@ TF_BUILTIN(DatePrototypeToPrimitive, CodeStubAssembler) {\n       hint_is_invalid(this, Label::kDeferred);\n \n   // Fast cases for internalized strings.\n-  Node* number_string = LoadRoot(Heap::knumber_stringRootIndex);\n+  Node* number_string = LoadRoot(RootIndex::knumber_string);\n   GotoIf(WordEqual(hint, number_string), &hint_is_number);\n-  Node* default_string = LoadRoot(Heap::kdefault_stringRootIndex);\n+  Node* default_string = LoadRoot(RootIndex::kdefault_string);\n   GotoIf(WordEqual(hint, default_string), &hint_is_string);\n-  Node* string_string = LoadRoot(Heap::kstring_stringRootIndex);\n+  Node* string_string = LoadRoot(RootIndex::kstring_string);\n   GotoIf(WordEqual(hint, string_string), &hint_is_string);\n \n   // Slow-case with actual string comparisons."
        },
        {
            "sha": "91da4d6d7d7d9b847eca4c2906097406c850d44d",
            "filename": "deps/v8/src/builtins/builtins-date.cc",
            "status": "modified",
            "additions": 63,
            "deletions": 0,
            "changes": 63,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -10,6 +10,10 @@\n #include \"src/counters.h\"\n #include \"src/dateparser-inl.h\"\n #include \"src/objects-inl.h\"\n+#ifdef V8_INTL_SUPPORT\n+#include \"src/objects/intl-objects.h\"\n+#include \"src/objects/js-date-time-format.h\"\n+#endif\n \n namespace v8 {\n namespace internal {\n@@ -835,6 +839,65 @@ BUILTIN(DatePrototypeToTimeString) {\n       isolate, isolate->factory()->NewStringFromUtf8(CStrVector(buffer)));\n }\n \n+#ifdef V8_INTL_SUPPORT\n+// ecma402 #sup-date.prototype.tolocaledatestring\n+BUILTIN(DatePrototypeToLocaleDateString) {\n+  HandleScope scope(isolate);\n+\n+  isolate->CountUsage(v8::Isolate::UseCounterFeature::kDateToLocaleDateString);\n+\n+  CHECK_RECEIVER(JSDate, date, \"Date.prototype.toLocaleDateString\");\n+\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, JSDateTimeFormat::ToLocaleDateTime(\n+                   isolate,\n+                   date,                                     // date\n+                   args.atOrUndefined(isolate, 1),           // locales\n+                   args.atOrUndefined(isolate, 2),           // options\n+                   JSDateTimeFormat::RequiredOption::kDate,  // required\n+                   JSDateTimeFormat::DefaultsOption::kDate,  // defaults\n+                   \"dateformatdate\"));                       // service\n+}\n+\n+// ecma402 #sup-date.prototype.tolocalestring\n+BUILTIN(DatePrototypeToLocaleString) {\n+  HandleScope scope(isolate);\n+\n+  isolate->CountUsage(v8::Isolate::UseCounterFeature::kDateToLocaleString);\n+\n+  CHECK_RECEIVER(JSDate, date, \"Date.prototype.toLocaleString\");\n+\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, JSDateTimeFormat::ToLocaleDateTime(\n+                   isolate,\n+                   date,                                    // date\n+                   args.atOrUndefined(isolate, 1),          // locales\n+                   args.atOrUndefined(isolate, 2),          // options\n+                   JSDateTimeFormat::RequiredOption::kAny,  // required\n+                   JSDateTimeFormat::DefaultsOption::kAll,  // defaults\n+                   \"dateformatall\"));                       // service\n+}\n+\n+// ecma402 #sup-date.prototype.tolocaletimestring\n+BUILTIN(DatePrototypeToLocaleTimeString) {\n+  HandleScope scope(isolate);\n+\n+  isolate->CountUsage(v8::Isolate::UseCounterFeature::kDateToLocaleTimeString);\n+\n+  CHECK_RECEIVER(JSDate, date, \"Date.prototype.toLocaleTimeString\");\n+\n+  RETURN_RESULT_OR_FAILURE(\n+      isolate, JSDateTimeFormat::ToLocaleDateTime(\n+                   isolate,\n+                   date,                                     // date\n+                   args.atOrUndefined(isolate, 1),           // locales\n+                   args.atOrUndefined(isolate, 2),           // options\n+                   JSDateTimeFormat::RequiredOption::kTime,  // required\n+                   JSDateTimeFormat::DefaultsOption::kTime,  // defaults\n+                   \"dateformattime\"));                       // service\n+}\n+#endif  // V8_INTL_SUPPORT\n+\n // ES6 section 20.3.4.43 Date.prototype.toUTCString ( )\n BUILTIN(DatePrototypeToUTCString) {\n   HandleScope scope(isolate);"
        },
        {
            "sha": "c47fa7b19b655a9e55faa1ce5afe0e930495e80f",
            "filename": "deps/v8/src/builtins/builtins-definitions.h",
            "status": "modified",
            "additions": 123,
            "deletions": 76,
            "changes": 199,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -5,7 +5,7 @@\n #ifndef V8_BUILTINS_BUILTINS_DEFINITIONS_H_\n #define V8_BUILTINS_BUILTINS_DEFINITIONS_H_\n \n-#include \"src/interpreter/bytecodes.h\"\n+#include \"builtins-generated/bytecodes-builtins-list.h\"\n \n // include generated header\n #include \"torque-generated/builtin-definitions-from-dsl.h\"\n@@ -26,11 +26,13 @@ namespace internal {\n // TFH: Handlers in Turbofan, with CodeStub linkage.\n //      Args: name, interface descriptor\n // BCH: Bytecode Handlers, with bytecode dispatch linkage.\n-//      Args: name\n+//      Args: name, OperandScale, Bytecode\n+// DLH: Deserialize Lazy Handlers, with bytecode dispatch linkage.\n+//      Args: name, OperandScale\n // ASM: Builtin in platform-dependent assembly.\n //      Args: name\n \n-#define BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)                   \\\n+#define BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, DLH, ASM)              \\\n   /* GC write barrirer */                                                      \\\n   TFC(RecordWrite, RecordWrite, 1)                                             \\\n                                                                                \\\n@@ -127,6 +129,10 @@ namespace internal {\n   TFC(CompileLazy, JSTrampoline, 1)                                            \\\n   TFC(CompileLazyDeoptimizedCode, JSTrampoline, 1)                             \\\n   TFC(DeserializeLazy, JSTrampoline, 1)                                        \\\n+  /* The three lazy bytecode handlers do not declare a bytecode. */            \\\n+  DLH(DeserializeLazyHandler, interpreter::OperandScale::kSingle)              \\\n+  DLH(DeserializeLazyWideHandler, interpreter::OperandScale::kDouble)          \\\n+  DLH(DeserializeLazyExtraWideHandler, interpreter::OperandScale::kQuadruple)  \\\n   ASM(InstantiateAsmJs)                                                        \\\n   ASM(NotifyDeoptimized)                                                       \\\n                                                                                \\\n@@ -155,8 +161,6 @@ namespace internal {\n   ASM(ContinueToJavaScriptBuiltin)                                             \\\n   ASM(ContinueToJavaScriptBuiltinWithResult)                                   \\\n                                                                                \\\n-  ASM(OnStackReplacement)                                                      \\\n-                                                                               \\\n   /* API callback handling */                                                  \\\n   API(HandleApiCall)                                                           \\\n   API(HandleApiCallAsFunction)                                                 \\\n@@ -204,7 +208,6 @@ namespace internal {\n   TFC(ToBooleanLazyDeoptContinuation, TypeConversionStackParameter, 1)         \\\n                                                                                \\\n   /* Handlers */                                                               \\\n-  TFH(KeyedLoadIC_Megamorphic, LoadWithVector)                                 \\\n   TFH(KeyedLoadIC_PolymorphicName, LoadWithVector)                             \\\n   TFH(KeyedLoadIC_Slow, LoadWithVector)                                        \\\n   TFH(KeyedStoreIC_Megamorphic, StoreWithVector)                               \\\n@@ -319,12 +322,11 @@ namespace internal {\n   TFJ(ArrayPrototypeShift, SharedFunctionInfo::kDontAdaptArgumentsSentinel)    \\\n   /* ES6 #sec-array.prototype.slice */                                         \\\n   TFJ(ArrayPrototypeSlice, SharedFunctionInfo::kDontAdaptArgumentsSentinel)    \\\n-  /* ES6 #sec-array.prototype.splice */                                        \\\n-  CPP(ArraySplice)                                                             \\\n   /* ES6 #sec-array.prototype.unshift */                                       \\\n   CPP(ArrayUnshift)                                                            \\\n   /* Support for Array.from and other array-copying idioms */                  \\\n   TFS(CloneFastJSArray, kSource)                                               \\\n+  TFS(CloneFastJSArrayFillingHoles, kSource)                                   \\\n   TFS(ExtractFastJSArray, kSource, kBegin, kCount)                             \\\n   /* ES6 #sec-array.prototype.every */                                         \\\n   TFS(ArrayEveryLoopContinuation, kReceiver, kCallbackFn, kThisArg, kArray,    \\\n@@ -427,12 +429,8 @@ namespace internal {\n   /* AsyncFunction */                                                          \\\n   TFJ(AsyncFunctionAwaitCaught, 3, kReceiver, kGenerator, kAwaited,            \\\n       kOuterPromise)                                                           \\\n-  TFJ(AsyncFunctionAwaitCaughtOptimized, 3, kReceiver, kGenerator, kAwaited,   \\\n-      kOuterPromise)                                                           \\\n   TFJ(AsyncFunctionAwaitUncaught, 3, kReceiver, kGenerator, kAwaited,          \\\n       kOuterPromise)                                                           \\\n-  TFJ(AsyncFunctionAwaitUncaughtOptimized, 3, kReceiver, kGenerator, kAwaited, \\\n-      kOuterPromise)                                                           \\\n   TFJ(AsyncFunctionAwaitRejectClosure, 1, kReceiver, kSentError)               \\\n   TFJ(AsyncFunctionAwaitResolveClosure, 1, kReceiver, kSentValue)              \\\n   TFJ(AsyncFunctionPromiseCreate, 0, kReceiver)                                \\\n@@ -466,6 +464,7 @@ namespace internal {\n   CPP(CallSitePrototypeGetScriptNameOrSourceURL)                               \\\n   CPP(CallSitePrototypeGetThis)                                                \\\n   CPP(CallSitePrototypeGetTypeName)                                            \\\n+  CPP(CallSitePrototypeIsAsync)                                                \\\n   CPP(CallSitePrototypeIsConstructor)                                          \\\n   CPP(CallSitePrototypeIsEval)                                                 \\\n   CPP(CallSitePrototypeIsNative)                                               \\\n@@ -493,6 +492,7 @@ namespace internal {\n   CPP(ConsoleProfile)                                                          \\\n   CPP(ConsoleProfileEnd)                                                       \\\n   CPP(ConsoleTime)                                                             \\\n+  CPP(ConsoleTimeLog)                                                          \\\n   CPP(ConsoleTimeEnd)                                                          \\\n   CPP(ConsoleTimeStamp)                                                        \\\n   CPP(ConsoleContext)                                                          \\\n@@ -629,10 +629,14 @@ namespace internal {\n                                                                                \\\n   /* ICs */                                                                    \\\n   TFH(LoadIC, LoadWithVector)                                                  \\\n+  TFH(LoadIC_Megamorphic, LoadWithVector)                                      \\\n   TFH(LoadIC_Noninlined, LoadWithVector)                                       \\\n   TFH(LoadICTrampoline, Load)                                                  \\\n+  TFH(LoadICTrampoline_Megamorphic, Load)                                      \\\n   TFH(KeyedLoadIC, LoadWithVector)                                             \\\n+  TFH(KeyedLoadIC_Megamorphic, LoadWithVector)                                 \\\n   TFH(KeyedLoadICTrampoline, Load)                                             \\\n+  TFH(KeyedLoadICTrampoline_Megamorphic, Load)                                 \\\n   TFH(StoreGlobalIC, StoreGlobalWithVector)                                    \\\n   TFH(StoreGlobalICTrampoline, StoreGlobal)                                    \\\n   TFH(StoreIC, StoreWithVector)                                                \\\n@@ -645,6 +649,13 @@ namespace internal {\n   TFH(LoadGlobalICTrampoline, LoadGlobal)                                      \\\n   TFH(LoadGlobalICInsideTypeofTrampoline, LoadGlobal)                          \\\n   TFH(CloneObjectIC, CloneObjectWithVector)                                    \\\n+  TFH(CloneObjectIC_Slow, CloneObjectWithVector)                               \\\n+                                                                               \\\n+  /* IterableToList */                                                         \\\n+  /* ES #sec-iterabletolist */                                                 \\\n+  TFS(IterableToList, kIterable, kIteratorFn)                                  \\\n+  TFS(IterableToListWithSymbolLookup, kIterable)                               \\\n+  TFS(IterableToListMayPreserveHoles, kIterable, kIteratorFn)                  \\\n                                                                                \\\n   /* Map */                                                                    \\\n   TFS(FindOrderedHashMapEntry, kTable, kKey)                                   \\\n@@ -1013,6 +1024,7 @@ namespace internal {\n   TFJ(AtomicsAnd, 3, kReceiver, kArray, kIndex, kValue)                        \\\n   TFJ(AtomicsOr, 3, kReceiver, kArray, kIndex, kValue)                         \\\n   TFJ(AtomicsXor, 3, kReceiver, kArray, kIndex, kValue)                        \\\n+  CPP(AtomicsNotify)                                                           \\\n   CPP(AtomicsIsLockFree)                                                       \\\n   CPP(AtomicsWait)                                                             \\\n   CPP(AtomicsWake)                                                             \\\n@@ -1111,6 +1123,7 @@ namespace internal {\n   /* StringIterator */                                                         \\\n   /* ES6 #sec-%stringiteratorprototype%.next */                                \\\n   TFJ(StringIteratorPrototypeNext, 0, kReceiver)                               \\\n+  TFS(StringToList, kSource)                                                   \\\n                                                                                \\\n   /* Symbol */                                                                 \\\n   /* ES #sec-symbol-constructor */                                             \\\n@@ -1129,7 +1142,6 @@ namespace internal {\n   TFJ(SymbolPrototypeValueOf, 0, kReceiver)                                    \\\n                                                                                \\\n   /* TypedArray */                                                             \\\n-  TFS(IterableToList, kIterable, kIteratorFn)                                  \\\n   TFS(TypedArrayInitialize, kHolder, kLength, kElementSize, kInitialize,       \\\n       kBufferConstructor)                                                      \\\n   TFS(TypedArrayInitializeWithBuffer, kHolder, kLength, kBuffer, kElementSize, \\\n@@ -1208,11 +1220,11 @@ namespace internal {\n   /* Wasm */                                                                   \\\n   ASM(WasmCompileLazy)                                                         \\\n   TFC(WasmAllocateHeapNumber, AllocateHeapNumber, 1)                           \\\n-  TFC(WasmArgumentsAdaptor, ArgumentAdaptor, 1)                                \\\n   TFC(WasmCallJavaScript, CallTrampoline, 1)                                   \\\n   TFC(WasmGrowMemory, WasmGrowMemory, 1)                                       \\\n   TFC(WasmStackGuard, NoContext, 1)                                            \\\n   TFC(WasmToNumber, TypeConversion, 1)                                         \\\n+  TFC(WasmThrow, WasmThrow, 1)                                                 \\\n   TFS(ThrowWasmTrapUnreachable)                                                \\\n   TFS(ThrowWasmTrapMemOutOfBounds)                                             \\\n   TFS(ThrowWasmTrapUnalignedAccess)                                            \\\n@@ -1282,13 +1294,10 @@ namespace internal {\n   /* See tc39.github.io/proposal-async-iteration/ */                           \\\n   /* #sec-%asyncfromsynciteratorprototype%-object) */                          \\\n   TFJ(AsyncFromSyncIteratorPrototypeNext, 1, kReceiver, kValue)                \\\n-  TFJ(AsyncFromSyncIteratorPrototypeNextOptimized, 1, kReceiver, kValue)       \\\n   /* #sec-%asyncfromsynciteratorprototype%.throw */                            \\\n   TFJ(AsyncFromSyncIteratorPrototypeThrow, 1, kReceiver, kReason)              \\\n-  TFJ(AsyncFromSyncIteratorPrototypeThrowOptimized, 1, kReceiver, kReason)     \\\n   /* #sec-%asyncfromsynciteratorprototype%.return */                           \\\n   TFJ(AsyncFromSyncIteratorPrototypeReturn, 1, kReceiver, kValue)              \\\n-  TFJ(AsyncFromSyncIteratorPrototypeReturnOptimized, 1, kReceiver, kValue)     \\\n   /* #sec-async-iterator-value-unwrap-functions */                             \\\n   TFJ(AsyncIteratorValueUnwrap, 1, kReceiver, kValue)                          \\\n                                                                                \\\n@@ -1305,10 +1314,9 @@ namespace internal {\n   ASM(CEntry_Return2_SaveFPRegs_ArgvOnStack_BuiltinExit)                       \\\n                                                                                \\\n   /* String helpers */                                                         \\\n-  TFS(StringAdd_CheckNone_NotTenured, kLeft, kRight)                           \\\n-  TFS(StringAdd_CheckNone_Tenured, kLeft, kRight)                              \\\n-  TFS(StringAdd_ConvertLeft_NotTenured, kLeft, kRight)                         \\\n-  TFS(StringAdd_ConvertRight_NotTenured, kLeft, kRight)                        \\\n+  TFS(StringAdd_CheckNone, kLeft, kRight)                                      \\\n+  TFS(StringAdd_ConvertLeft, kLeft, kRight)                                    \\\n+  TFS(StringAdd_ConvertRight, kLeft, kRight)                                   \\\n   TFS(SubString, kString, kFrom, kTo)                                          \\\n                                                                                \\\n   /* Miscellaneous */                                                          \\\n@@ -1328,73 +1336,119 @@ namespace internal {\n #define BUILTIN_LIST_INTL(CPP, TFJ, TFS)                               \\\n   /* ecma402 #sec-intl.collator */                                     \\\n   CPP(CollatorConstructor)                                             \\\n-  TFS(StringToLowerCaseIntl, kString)                                  \\\n-  /* ES #sec-string.prototype.tolowercase */                           \\\n-  TFJ(StringPrototypeToLowerCaseIntl, 0, kReceiver)                    \\\n-  /* ES #sec-string.prototype.touppercase */                           \\\n-  CPP(StringPrototypeToUpperCaseIntl)                                  \\\n-  /* ES #sec-string.prototype.normalize */                             \\\n-  CPP(StringPrototypeNormalizeIntl)                                    \\\n-  /* ecma402 #sec-intl.numberformat.prototype.formattoparts */         \\\n-  CPP(NumberFormatPrototypeFormatToParts)                              \\\n+  /* ecma 402 #sec-collator-compare-functions*/                        \\\n+  CPP(CollatorInternalCompare)                                         \\\n+  /* ecma402 #sec-intl.collator.prototype.compare */                   \\\n+  CPP(CollatorPrototypeCompare)                                        \\\n+  /* ecma402 #sec-intl.collator.supportedlocalesof */                  \\\n+  CPP(CollatorSupportedLocalesOf)                                      \\\n+  CPP(CollatorPrototypeResolvedOptions)                                \\\n+  /* ecma402 #sup-date.prototype.tolocaledatestring */                 \\\n+  CPP(DatePrototypeToLocaleDateString)                                 \\\n+  /* ecma402 #sup-date.prototype.tolocalestring */                     \\\n+  CPP(DatePrototypeToLocaleString)                                     \\\n+  /* ecma402 #sup-date.prototype.tolocaletimestring */                 \\\n+  CPP(DatePrototypeToLocaleTimeString)                                 \\\n+  /* ecma402 #sec-intl.datetimeformat */                               \\\n+  CPP(DateTimeFormatConstructor)                                       \\\n+  /* ecma402 #sec-datetime-format-functions */                         \\\n+  CPP(DateTimeFormatInternalFormat)                                    \\\n+  /* ecma402 #sec-intl.datetimeformat.prototype.format */              \\\n+  CPP(DateTimeFormatPrototypeFormat)                                   \\\n   /* ecma402 #sec-intl.datetimeformat.prototype.formattoparts */       \\\n   CPP(DateTimeFormatPrototypeFormatToParts)                            \\\n-  /* ecma402 #new proposal */                                          \\\n+  /* ecma402 #sec-intl.datetimeformat.prototype.resolvedoptions */     \\\n+  CPP(DateTimeFormatPrototypeResolvedOptions)                          \\\n+  /* ecma402 #sec-intl.datetimeformat.supportedlocalesof */            \\\n+  CPP(DateTimeFormatSupportedLocalesOf)                                \\\n   /* ecma402 #sec-intl-listformat-constructor */                       \\\n   CPP(ListFormatConstructor)                                           \\\n-  /* ecma402 #sec-intl.listformat.prototype.resolvedoptions */         \\\n-  CPP(ListFormatPrototypeResolvedOptions)                              \\\n   /* ecma402 #sec-intl-list-format.prototype.format */                 \\\n   TFJ(ListFormatPrototypeFormat,                                       \\\n       SharedFunctionInfo::kDontAdaptArgumentsSentinel)                 \\\n   /* ecma402 #sec-intl-list-format.prototype.formattoparts */          \\\n   TFJ(ListFormatPrototypeFormatToParts,                                \\\n       SharedFunctionInfo::kDontAdaptArgumentsSentinel)                 \\\n+  /* ecma402 #sec-intl.listformat.prototype.resolvedoptions */         \\\n+  CPP(ListFormatPrototypeResolvedOptions)                              \\\n+  /* ecma402 #sec-intl.ListFormat.supportedlocalesof */                \\\n+  CPP(ListFormatSupportedLocalesOf)                                    \\\n   /* ecma402 #sec-intl-locale-constructor */                           \\\n   CPP(LocaleConstructor)                                               \\\n-  CPP(LocalePrototypeLanguage)                                         \\\n-  CPP(LocalePrototypeScript)                                           \\\n-  CPP(LocalePrototypeRegion)                                           \\\n   CPP(LocalePrototypeBaseName)                                         \\\n   CPP(LocalePrototypeCalendar)                                         \\\n   CPP(LocalePrototypeCaseFirst)                                        \\\n   CPP(LocalePrototypeCollation)                                        \\\n   CPP(LocalePrototypeHourCycle)                                        \\\n-  CPP(LocalePrototypeNumeric)                                          \\\n-  CPP(LocalePrototypeNumberingSystem)                                  \\\n-  CPP(LocalePrototypeToString)                                         \\\n+  CPP(LocalePrototypeLanguage)                                         \\\n   /* ecma402 #sec-Intl.Locale.prototype.maximize */                    \\\n   CPP(LocalePrototypeMaximize)                                         \\\n   /* ecma402 #sec-Intl.Locale.prototype.minimize */                    \\\n   CPP(LocalePrototypeMinimize)                                         \\\n+  CPP(LocalePrototypeNumeric)                                          \\\n+  CPP(LocalePrototypeNumberingSystem)                                  \\\n+  CPP(LocalePrototypeRegion)                                           \\\n+  CPP(LocalePrototypeScript)                                           \\\n+  CPP(LocalePrototypeToString)                                         \\\n+  /* ecma402 #sec-intl.numberformat */                                 \\\n+  CPP(NumberFormatConstructor)                                         \\\n   /* ecma402 #sec-number-format-functions */                           \\\n   CPP(NumberFormatInternalFormatNumber)                                \\\n   /* ecma402 #sec-intl.numberformat.prototype.format */                \\\n   CPP(NumberFormatPrototypeFormatNumber)                               \\\n-  /* ecma402 #sec-datetime-format-functions */                         \\\n-  CPP(DateTimeFormatInternalFormat)                                    \\\n-  /* ecma402 #sec-intl.datetimeformat.prototype.format */              \\\n-  CPP(DateTimeFormatPrototypeFormat)                                   \\\n+  /* ecma402 #sec-intl.numberformat.prototype.formattoparts */         \\\n+  CPP(NumberFormatPrototypeFormatToParts)                              \\\n+  /* ecma402 #sec-intl.numberformat.prototype.resolvedoptions */       \\\n+  CPP(NumberFormatPrototypeResolvedOptions)                            \\\n+  /* ecma402 #sec-intl.numberformat.supportedlocalesof */              \\\n+  CPP(NumberFormatSupportedLocalesOf)                                  \\\n   /* ecma402 #sec-intl.pluralrules */                                  \\\n   CPP(PluralRulesConstructor)                                          \\\n+  CPP(PluralRulesPrototypeResolvedOptions)                             \\\n+  /* ecma402 #sec-intl.pluralrules.prototype.select */                 \\\n+  CPP(PluralRulesPrototypeSelect)                                      \\\n+  /* ecma402 #sec-intl.pluralrules.supportedlocalesof */               \\\n+  CPP(PluralRulesSupportedLocalesOf)                                   \\\n   /* ecma402 #sec-intl.RelativeTimeFormat.constructor */               \\\n   CPP(RelativeTimeFormatConstructor)                                   \\\n-  /* ecma402 #sec-intl.RelativeTimeFormat.prototype.resolvedOptions */ \\\n-  CPP(RelativeTimeFormatPrototypeResolvedOptions)                      \\\n   /* ecma402 #sec-intl.RelativeTimeFormat.prototype.format */          \\\n   CPP(RelativeTimeFormatPrototypeFormat)                               \\\n   /* ecma402 #sec-intl.RelativeTimeFormat.prototype.formatToParts */   \\\n   CPP(RelativeTimeFormatPrototypeFormatToParts)                        \\\n+  /* ecma402 #sec-intl.RelativeTimeFormat.prototype.resolvedOptions */ \\\n+  CPP(RelativeTimeFormatPrototypeResolvedOptions)                      \\\n+  /* ecma402 #sec-intl.RelativeTimeFormat.supportedlocalesof */        \\\n+  CPP(RelativeTimeFormatSupportedLocalesOf)                            \\\n+  /* ES #sec-string.prototype.normalize */                             \\\n+  CPP(StringPrototypeNormalizeIntl)                                    \\\n   /* ecma402 #sup-string.prototype.tolocalelowercase */                \\\n   CPP(StringPrototypeToLocaleLowerCase)                                \\\n   /* ecma402 #sup-string.prototype.tolocaleuppercase */                \\\n   CPP(StringPrototypeToLocaleUpperCase)                                \\\n-  /* ecma402 #sec-intl.collator.prototype.compare */                   \\\n-  CPP(CollatorPrototypeCompare)                                        \\\n-  /* ecma 402 #sec-collator-compare-functions*/                        \\\n-  CPP(CollatorInternalCompare)                                         \\\n-  CPP(BreakIteratorInternalAdoptText)                                  \\\n-  CPP(BreakIteratorPrototypeAdoptText)\n+  /* ES #sec-string.prototype.tolowercase */                           \\\n+  TFJ(StringPrototypeToLowerCaseIntl, 0, kReceiver)                    \\\n+  /* ES #sec-string.prototype.touppercase */                           \\\n+  CPP(StringPrototypeToUpperCaseIntl)                                  \\\n+  TFS(StringToLowerCaseIntl, kString)                                  \\\n+  /* ecma402 #sec-Intl.Segmenter */                                    \\\n+  CPP(SegmenterConstructor)                                            \\\n+  /* ecma402 #sec-Intl.Segmenter.prototype.resolvedOptions */          \\\n+  CPP(SegmenterPrototypeResolvedOptions)                               \\\n+  /* ecma402  #sec-Intl.Segmenter.supportedLocalesOf */                \\\n+  CPP(SegmenterSupportedLocalesOf)                                     \\\n+  CPP(V8BreakIteratorConstructor)                                      \\\n+  CPP(V8BreakIteratorInternalAdoptText)                                \\\n+  CPP(V8BreakIteratorInternalBreakType)                                \\\n+  CPP(V8BreakIteratorInternalCurrent)                                  \\\n+  CPP(V8BreakIteratorInternalFirst)                                    \\\n+  CPP(V8BreakIteratorInternalNext)                                     \\\n+  CPP(V8BreakIteratorPrototypeAdoptText)                               \\\n+  CPP(V8BreakIteratorPrototypeBreakType)                               \\\n+  CPP(V8BreakIteratorPrototypeCurrent)                                 \\\n+  CPP(V8BreakIteratorPrototypeFirst)                                   \\\n+  CPP(V8BreakIteratorPrototypeNext)                                    \\\n+  CPP(V8BreakIteratorPrototypeResolvedOptions)                         \\\n+  CPP(V8BreakIteratorSupportedLocalesOf)\n #else\n #define BUILTIN_LIST_INTL(CPP, TFJ, TFS)      \\\n   /* no-op fallback version */                \\\n@@ -1409,31 +1463,20 @@ namespace internal {\n   CPP(StringPrototypeToUpperCase)\n #endif  // V8_INTL_SUPPORT\n \n-#ifdef V8_EMBEDDED_BYTECODE_HANDLERS\n-#define BUILTIN_LIST_BYTECODE_HANDLERS(BCH) BYTECODE_LIST(BCH)\n-#else\n-#define BUILTIN_LIST_BYTECODE_HANDLERS(BCH)\n-#endif  // V8_EMBEDDED_BYTECODE_HANDLERS\n-\n-#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, BCH, ASM) \\\n-  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, ASM)       \\\n-  BUILTIN_LIST_FROM_DSL(CPP, API, TFJ, TFC, TFS, TFH, ASM)   \\\n-  BUILTIN_LIST_INTL(CPP, TFJ, TFS)                           \\\n+#define BUILTIN_LIST(CPP, API, TFJ, TFC, TFS, TFH, BCH, DLH, ASM) \\\n+  BUILTIN_LIST_BASE(CPP, API, TFJ, TFC, TFS, TFH, DLH, ASM)       \\\n+  BUILTIN_LIST_FROM_DSL(CPP, API, TFJ, TFC, TFS, TFH, ASM)        \\\n+  BUILTIN_LIST_INTL(CPP, TFJ, TFS)                                \\\n   BUILTIN_LIST_BYTECODE_HANDLERS(BCH)\n \n // The exception thrown in the following builtins are caught\n // internally and result in a promise rejection.\n #define BUILTIN_PROMISE_REJECTION_PREDICTION_LIST(V) \\\n   V(AsyncFromSyncIteratorPrototypeNext)              \\\n   V(AsyncFromSyncIteratorPrototypeReturn)            \\\n-  V(AsyncFromSyncIteratorPrototypeNextOptimized)     \\\n-  V(AsyncFromSyncIteratorPrototypeThrowOptimized)    \\\n-  V(AsyncFromSyncIteratorPrototypeReturnOptimized)   \\\n   V(AsyncFromSyncIteratorPrototypeThrow)             \\\n   V(AsyncFunctionAwaitCaught)                        \\\n-  V(AsyncFunctionAwaitCaughtOptimized)               \\\n   V(AsyncFunctionAwaitUncaught)                      \\\n-  V(AsyncFunctionAwaitUncaughtOptimized)             \\\n   V(AsyncGeneratorResolve)                           \\\n   V(AsyncGeneratorAwaitCaught)                       \\\n   V(AsyncGeneratorAwaitUncaught)                     \\\n@@ -1449,11 +1492,11 @@ namespace internal {\n #define WASM_RUNTIME_STUB_LIST(V, VTRAP) \\\n   FOREACH_WASM_TRAPREASON(VTRAP)         \\\n   V(WasmAllocateHeapNumber)              \\\n-  V(WasmArgumentsAdaptor)                \\\n   V(WasmCallJavaScript)                  \\\n   V(WasmGrowMemory)                      \\\n   V(WasmStackGuard)                      \\\n   V(WasmToNumber)                        \\\n+  V(WasmThrow)                           \\\n   V(DoubleToI)\n \n // The exception thrown in the following builtins are caught internally and will\n@@ -1464,23 +1507,27 @@ namespace internal {\n \n #define BUILTIN_LIST_C(V)                                            \\\n   BUILTIN_LIST(V, V, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n-               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n+               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n \n #define BUILTIN_LIST_A(V)                                                      \\\n   BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n-               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, V)\n+               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n+               V)\n \n #define BUILTIN_LIST_TFS(V)                                                    \\\n   BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n-               V, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n+               V, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN,              \\\n+               IGNORE_BUILTIN)\n \n-#define BUILTIN_LIST_TFJ(V)                                       \\\n-  BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, V, IGNORE_BUILTIN, \\\n-               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n+#define BUILTIN_LIST_TFJ(V)                                                    \\\n+  BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, V, IGNORE_BUILTIN,              \\\n+               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n+               IGNORE_BUILTIN)\n \n-#define BUILTIN_LIST_TFC(V)                                       \\\n-  BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, V, \\\n-               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n+#define BUILTIN_LIST_TFC(V)                                                    \\\n+  BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, V,              \\\n+               IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, \\\n+               IGNORE_BUILTIN)\n \n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "2961a61f6356a8d755a62f7b6522869710a89214",
            "filename": "deps/v8/src/builtins/builtins-descriptors.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-descriptors.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-descriptors.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-descriptors.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -43,7 +43,8 @@ namespace internal {\n \n BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, DEFINE_TFJ_INTERFACE_DESCRIPTOR,\n              DEFINE_TFC_INTERFACE_DESCRIPTOR, DEFINE_TFS_INTERFACE_DESCRIPTOR,\n-             DEFINE_TFH_INTERFACE_DESCRIPTOR, IGNORE_BUILTIN, IGNORE_BUILTIN)\n+             DEFINE_TFH_INTERFACE_DESCRIPTOR, IGNORE_BUILTIN, IGNORE_BUILTIN,\n+             IGNORE_BUILTIN)\n \n #undef DEFINE_TFJ_INTERFACE_DESCRIPTOR\n #undef DEFINE_TFC_INTERFACE_DESCRIPTOR"
        },
        {
            "sha": "2f3c876852ddbacc74c1f4c58be19c247ad921ac",
            "filename": "deps/v8/src/builtins/builtins-function-gen.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -62,7 +62,7 @@ TF_BUILTIN(FastFunctionPrototypeBind, CodeStubAssembler) {\n     const int length_index = JSFunction::kLengthDescriptorIndex;\n     TNode<Name> maybe_length = CAST(LoadWeakFixedArrayElement(\n         descriptors, DescriptorArray::ToKeyIndex(length_index)));\n-    GotoIf(WordNotEqual(maybe_length, LoadRoot(Heap::klength_stringRootIndex)),\n+    GotoIf(WordNotEqual(maybe_length, LoadRoot(RootIndex::klength_string)),\n            &slow);\n \n     TNode<Object> maybe_length_accessor = CAST(LoadWeakFixedArrayElement(\n@@ -74,8 +74,7 @@ TF_BUILTIN(FastFunctionPrototypeBind, CodeStubAssembler) {\n     const int name_index = JSFunction::kNameDescriptorIndex;\n     TNode<Name> maybe_name = CAST(LoadWeakFixedArrayElement(\n         descriptors, DescriptorArray::ToKeyIndex(name_index)));\n-    GotoIf(WordNotEqual(maybe_name, LoadRoot(Heap::kname_stringRootIndex)),\n-           &slow);\n+    GotoIf(WordNotEqual(maybe_name, LoadRoot(RootIndex::kname_string)), &slow);\n \n     TNode<Object> maybe_name_accessor = CAST(LoadWeakFixedArrayElement(\n         descriptors, DescriptorArray::ToValueIndex(name_index)));"
        },
        {
            "sha": "43a3853715eab686d0214ca69ad283ffac7789f4",
            "filename": "deps/v8/src/builtins/builtins-function.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 29,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -41,11 +41,7 @@ MaybeHandle<Object> CreateDynamicFunction(Isolate* isolate,\n     IncrementalStringBuilder builder(isolate);\n     builder.AppendCharacter('(');\n     builder.AppendCString(token);\n-    if (FLAG_harmony_function_tostring) {\n-      builder.AppendCString(\" anonymous(\");\n-    } else {\n-      builder.AppendCharacter('(');\n-    }\n+    builder.AppendCString(\" anonymous(\");\n     bool parenthesis_in_arg_string = false;\n     if (argc > 1) {\n       for (int i = 1; i < argc; ++i) {\n@@ -55,31 +51,10 @@ MaybeHandle<Object> CreateDynamicFunction(Isolate* isolate,\n             isolate, param, Object::ToString(isolate, args.at(i)), Object);\n         param = String::Flatten(isolate, param);\n         builder.AppendString(param);\n-        if (!FLAG_harmony_function_tostring) {\n-          // If the formal parameters string include ) - an illegal\n-          // character - it may make the combined function expression\n-          // compile. We avoid this problem by checking for this early on.\n-          DisallowHeapAllocation no_gc;  // Ensure vectors stay valid.\n-          String::FlatContent param_content = param->GetFlatContent();\n-          for (int i = 0, length = param->length(); i < length; ++i) {\n-            if (param_content.Get(i) == ')') {\n-              parenthesis_in_arg_string = true;\n-              break;\n-            }\n-          }\n-        }\n       }\n-      if (!FLAG_harmony_function_tostring) {\n-        // If the formal parameters include an unbalanced block comment, the\n-        // function must be rejected. Since JavaScript does not allow nested\n-        // comments we can include a trailing block comment to catch this.\n-        builder.AppendCString(\"\\n/*``*/\");\n-      }\n-    }\n-    if (FLAG_harmony_function_tostring) {\n-      builder.AppendCharacter('\\n');\n-      parameters_end_pos = builder.Length();\n     }\n+    builder.AppendCharacter('\\n');\n+    parameters_end_pos = builder.Length();\n     builder.AppendCString(\") {\\n\");\n     if (argc > 0) {\n       Handle<String> body;\n@@ -303,7 +278,7 @@ BUILTIN(FunctionPrototypeToString) {\n   }\n   // With the revised toString behavior, all callable objects are valid\n   // receivers for this method.\n-  if (FLAG_harmony_function_tostring && receiver->IsJSReceiver() &&\n+  if (receiver->IsJSReceiver() &&\n       JSReceiver::cast(*receiver)->map()->is_callable()) {\n     return ReadOnlyRoots(isolate).function_native_code_string();\n   }"
        },
        {
            "sha": "8b5dc182cf1fa19b90ba55d12dae4361189f335b",
            "filename": "deps/v8/src/builtins/builtins-handler-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-handler-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-handler-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-handler-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -28,7 +28,7 @@ TF_BUILTIN(KeyedLoadIC_Slow, CodeStubAssembler) {\n   Node* name = Parameter(Descriptor::kName);\n   Node* context = Parameter(Descriptor::kContext);\n \n-  TailCallRuntime(Runtime::kKeyedGetProperty, context, receiver, name);\n+  TailCallRuntime(Runtime::kGetProperty, context, receiver, name);\n }\n \n void Builtins::Generate_KeyedStoreIC_Megamorphic("
        },
        {
            "sha": "94d75a8f327eca5d611fec4a4f23e0a05aa7e45b",
            "filename": "deps/v8/src/builtins/builtins-ic-gen.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -21,13 +21,16 @@ namespace internal {\n   }\n \n IC_BUILTIN(LoadIC)\n+IC_BUILTIN(LoadIC_Megamorphic)\n IC_BUILTIN(LoadIC_Noninlined)\n IC_BUILTIN(LoadIC_Uninitialized)\n-IC_BUILTIN(KeyedLoadIC)\n IC_BUILTIN(LoadICTrampoline)\n-IC_BUILTIN(KeyedLoadICTrampoline)\n+IC_BUILTIN(LoadICTrampoline_Megamorphic)\n+IC_BUILTIN(KeyedLoadIC)\n IC_BUILTIN(KeyedLoadIC_Megamorphic)\n IC_BUILTIN(KeyedLoadIC_PolymorphicName)\n+IC_BUILTIN(KeyedLoadICTrampoline)\n+IC_BUILTIN(KeyedLoadICTrampoline_Megamorphic)\n IC_BUILTIN(StoreGlobalIC)\n IC_BUILTIN(StoreGlobalICTrampoline)\n IC_BUILTIN(StoreIC)\n@@ -36,6 +39,7 @@ IC_BUILTIN(KeyedStoreIC)\n IC_BUILTIN(KeyedStoreICTrampoline)\n IC_BUILTIN(StoreInArrayLiteralIC)\n IC_BUILTIN(CloneObjectIC)\n+IC_BUILTIN(CloneObjectIC_Slow)\n \n IC_BUILTIN_PARAM(LoadGlobalIC, LoadGlobalIC, NOT_INSIDE_TYPEOF)\n IC_BUILTIN_PARAM(LoadGlobalICInsideTypeof, LoadGlobalIC, INSIDE_TYPEOF)"
        },
        {
            "sha": "44a18099bf4c005467650352d9ee940ffaaf5c54",
            "filename": "deps/v8/src/builtins/builtins-internal-gen.cc",
            "status": "modified",
            "additions": 120,
            "deletions": 90,
            "changes": 210,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -24,10 +24,16 @@ using TNode = compiler::TNode<T>;\n // Interrupt and stack checks.\n \n void Builtins::Generate_InterruptCheck(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   masm->TailCallRuntime(Runtime::kInterrupt);\n }\n \n void Builtins::Generate_StackCheck(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   masm->TailCallRuntime(Runtime::kStackGuard);\n }\n \n@@ -350,59 +356,70 @@ class RecordWriteCodeStubAssembler : public CodeStubAssembler {\n };\n \n TF_BUILTIN(RecordWrite, RecordWriteCodeStubAssembler) {\n-  Node* object = BitcastTaggedToWord(Parameter(Descriptor::kObject));\n-  Node* slot = Parameter(Descriptor::kSlot);\n-  Node* isolate = Parameter(Descriptor::kIsolate);\n-  Node* remembered_set = Parameter(Descriptor::kRememberedSet);\n-  Node* fp_mode = Parameter(Descriptor::kFPMode);\n-\n-  Node* value = Load(MachineType::Pointer(), slot);\n-\n   Label generational_wb(this);\n   Label incremental_wb(this);\n   Label exit(this);\n \n+  Node* remembered_set = Parameter(Descriptor::kRememberedSet);\n   Branch(ShouldEmitRememberSet(remembered_set), &generational_wb,\n          &incremental_wb);\n \n   BIND(&generational_wb);\n   {\n     Label test_old_to_new_flags(this);\n     Label store_buffer_exit(this), store_buffer_incremental_wb(this);\n+\n     // When incremental marking is not on, we skip cross generation pointer\n     // checking here, because there are checks for\n     // `kPointersFromHereAreInterestingMask` and\n     // `kPointersToHereAreInterestingMask` in\n     // `src/compiler/<arch>/code-generator-<arch>.cc` before calling this stub,\n     // which serves as the cross generation checking.\n+    Node* slot = Parameter(Descriptor::kSlot);\n     Branch(IsMarking(), &test_old_to_new_flags, &store_buffer_exit);\n \n     BIND(&test_old_to_new_flags);\n     {\n+      Node* value = Load(MachineType::Pointer(), slot);\n+\n       // TODO(albertnetymk): Try to cache the page flag for value and object,\n       // instead of calling IsPageFlagSet each time.\n       Node* value_in_new_space =\n           IsPageFlagSet(value, MemoryChunk::kIsInNewSpaceMask);\n       GotoIfNot(value_in_new_space, &incremental_wb);\n \n+      Node* object = BitcastTaggedToWord(Parameter(Descriptor::kObject));\n       Node* object_in_new_space =\n           IsPageFlagSet(object, MemoryChunk::kIsInNewSpaceMask);\n-      GotoIf(object_in_new_space, &incremental_wb);\n-\n-      Goto(&store_buffer_incremental_wb);\n+      Branch(object_in_new_space, &incremental_wb,\n+             &store_buffer_incremental_wb);\n     }\n \n     BIND(&store_buffer_exit);\n-    { InsertToStoreBufferAndGoto(isolate, slot, fp_mode, &exit); }\n+    {\n+      Node* isolate_constant =\n+          ExternalConstant(ExternalReference::isolate_address(isolate()));\n+      Node* fp_mode = Parameter(Descriptor::kFPMode);\n+      InsertToStoreBufferAndGoto(isolate_constant, slot, fp_mode, &exit);\n+    }\n \n     BIND(&store_buffer_incremental_wb);\n-    { InsertToStoreBufferAndGoto(isolate, slot, fp_mode, &incremental_wb); }\n+    {\n+      Node* isolate_constant =\n+          ExternalConstant(ExternalReference::isolate_address(isolate()));\n+      Node* fp_mode = Parameter(Descriptor::kFPMode);\n+      InsertToStoreBufferAndGoto(isolate_constant, slot, fp_mode,\n+                                 &incremental_wb);\n+    }\n   }\n \n   BIND(&incremental_wb);\n   {\n     Label call_incremental_wb(this);\n \n+    Node* slot = Parameter(Descriptor::kSlot);\n+    Node* value = Load(MachineType::Pointer(), slot);\n+\n     // There are two cases we need to call incremental write barrier.\n     // 1) value_is_white\n     GotoIf(IsWhite(value), &call_incremental_wb);\n@@ -411,20 +428,23 @@ TF_BUILTIN(RecordWrite, RecordWriteCodeStubAssembler) {\n     // is_compacting = true when is_marking = true\n     GotoIfNot(IsPageFlagSet(value, MemoryChunk::kEvacuationCandidateMask),\n               &exit);\n-    GotoIf(\n-        IsPageFlagSet(object, MemoryChunk::kSkipEvacuationSlotsRecordingMask),\n-        &exit);\n \n-    Goto(&call_incremental_wb);\n+    Node* object = BitcastTaggedToWord(Parameter(Descriptor::kObject));\n+    Branch(\n+        IsPageFlagSet(object, MemoryChunk::kSkipEvacuationSlotsRecordingMask),\n+        &exit, &call_incremental_wb);\n \n     BIND(&call_incremental_wb);\n     {\n       Node* function = ExternalConstant(\n           ExternalReference::incremental_marking_record_write_function());\n+      Node* isolate_constant =\n+          ExternalConstant(ExternalReference::isolate_address(isolate()));\n+      Node* fp_mode = Parameter(Descriptor::kFPMode);\n       CallCFunction3WithCallerSavedRegistersMode(\n           MachineType::Int32(), MachineType::Pointer(), MachineType::Pointer(),\n-          MachineType::Pointer(), function, object, slot, isolate, fp_mode,\n-          &exit);\n+          MachineType::Pointer(), function, object, slot, isolate_constant,\n+          fp_mode, &exit);\n     }\n   }\n \n@@ -454,7 +474,7 @@ class DeletePropertyBaseAssembler : public AccessorAssembler {\n            dont_delete);\n     // Overwrite the entry itself (see NameDictionary::SetEntry).\n     TNode<HeapObject> filler = TheHoleConstant();\n-    DCHECK(Heap::RootIsImmortalImmovable(Heap::kTheHoleValueRootIndex));\n+    DCHECK(Heap::RootIsImmortalImmovable(RootIndex::kTheHoleValue));\n     StoreFixedArrayElement(properties, key_index, filler, SKIP_WRITE_BARRIER);\n     StoreValueByKeyIndex<NameDictionary>(properties, key_index, filler,\n                                          SKIP_WRITE_BARRIER);\n@@ -609,11 +629,14 @@ class InternalBuiltinsAssembler : public CodeStubAssembler {\n   explicit InternalBuiltinsAssembler(compiler::CodeAssemblerState* state)\n       : CodeStubAssembler(state) {}\n \n-  TNode<IntPtrT> GetPendingMicrotaskCount();\n-  void SetPendingMicrotaskCount(TNode<IntPtrT> count);\n-\n-  TNode<FixedArray> GetMicrotaskQueue();\n-  void SetMicrotaskQueue(TNode<FixedArray> queue);\n+  TNode<MicrotaskQueue> GetDefaultMicrotaskQueue();\n+  TNode<IntPtrT> GetPendingMicrotaskCount(\n+      TNode<MicrotaskQueue> microtask_queue);\n+  void SetPendingMicrotaskCount(TNode<MicrotaskQueue> microtask_queue,\n+                                TNode<IntPtrT> new_num_tasks);\n+  TNode<FixedArray> GetQueuedMicrotasks(TNode<MicrotaskQueue> microtask_queue);\n+  void SetQueuedMicrotasks(TNode<MicrotaskQueue> microtask_queue,\n+                           TNode<FixedArray> new_queue);\n \n   TNode<Context> GetCurrentContext();\n   void SetCurrentContext(TNode<Context> context);\n@@ -700,37 +723,34 @@ TF_BUILTIN(AdaptorWithBuiltinExitFrame, InternalBuiltinsAssembler) {\n   GenerateAdaptorWithExitFrameType<Descriptor>(Builtins::BUILTIN_EXIT);\n }\n \n-TNode<IntPtrT> InternalBuiltinsAssembler::GetPendingMicrotaskCount() {\n-  auto ref = ExternalReference::pending_microtask_count_address(isolate());\n-  if (kIntSize == 8) {\n-    return TNode<IntPtrT>::UncheckedCast(\n-        Load(MachineType::Int64(), ExternalConstant(ref)));\n-  } else {\n-    Node* const value = Load(MachineType::Int32(), ExternalConstant(ref));\n-    return ChangeInt32ToIntPtr(value);\n-  }\n+TNode<MicrotaskQueue> InternalBuiltinsAssembler::GetDefaultMicrotaskQueue() {\n+  return TNode<MicrotaskQueue>::UncheckedCast(\n+      LoadRoot(RootIndex::kDefaultMicrotaskQueue));\n }\n \n-void InternalBuiltinsAssembler::SetPendingMicrotaskCount(TNode<IntPtrT> count) {\n-  auto ref = ExternalReference::pending_microtask_count_address(isolate());\n-  auto rep = kIntSize == 8 ? MachineRepresentation::kWord64\n-                           : MachineRepresentation::kWord32;\n-  if (kIntSize == 4 && kPointerSize == 8) {\n-    Node* const truncated_count =\n-        TruncateInt64ToInt32(TNode<Int64T>::UncheckedCast(count));\n-    StoreNoWriteBarrier(rep, ExternalConstant(ref), truncated_count);\n-  } else {\n-    StoreNoWriteBarrier(rep, ExternalConstant(ref), count);\n-  }\n+TNode<IntPtrT> InternalBuiltinsAssembler::GetPendingMicrotaskCount(\n+    TNode<MicrotaskQueue> microtask_queue) {\n+  TNode<IntPtrT> result = LoadAndUntagObjectField(\n+      microtask_queue, MicrotaskQueue::kPendingMicrotaskCountOffset);\n+  return result;\n }\n \n-TNode<FixedArray> InternalBuiltinsAssembler::GetMicrotaskQueue() {\n-  return TNode<FixedArray>::UncheckedCast(\n-      LoadRoot(Heap::kMicrotaskQueueRootIndex));\n+void InternalBuiltinsAssembler::SetPendingMicrotaskCount(\n+    TNode<MicrotaskQueue> microtask_queue, TNode<IntPtrT> new_num_tasks) {\n+  StoreObjectField(microtask_queue,\n+                   MicrotaskQueue::kPendingMicrotaskCountOffset,\n+                   SmiFromIntPtr(new_num_tasks));\n }\n \n-void InternalBuiltinsAssembler::SetMicrotaskQueue(TNode<FixedArray> queue) {\n-  StoreRoot(Heap::kMicrotaskQueueRootIndex, queue);\n+TNode<FixedArray> InternalBuiltinsAssembler::GetQueuedMicrotasks(\n+    TNode<MicrotaskQueue> microtask_queue) {\n+  return LoadObjectField<FixedArray>(microtask_queue,\n+                                     MicrotaskQueue::kQueueOffset);\n+}\n+\n+void InternalBuiltinsAssembler::SetQueuedMicrotasks(\n+    TNode<MicrotaskQueue> microtask_queue, TNode<FixedArray> new_queue) {\n+  StoreObjectField(microtask_queue, MicrotaskQueue::kQueueOffset, new_queue);\n }\n \n TNode<Context> InternalBuiltinsAssembler::GetCurrentContext() {\n@@ -819,9 +839,10 @@ void InternalBuiltinsAssembler::RunPromiseHook(\n TF_BUILTIN(EnqueueMicrotask, InternalBuiltinsAssembler) {\n   Node* microtask = Parameter(Descriptor::kMicrotask);\n \n-  TNode<IntPtrT> num_tasks = GetPendingMicrotaskCount();\n+  TNode<MicrotaskQueue> microtask_queue = GetDefaultMicrotaskQueue();\n+  TNode<IntPtrT> num_tasks = GetPendingMicrotaskCount(microtask_queue);\n   TNode<IntPtrT> new_num_tasks = IntPtrAdd(num_tasks, IntPtrConstant(1));\n-  TNode<FixedArray> queue = GetMicrotaskQueue();\n+  TNode<FixedArray> queue = GetQueuedMicrotasks(microtask_queue);\n   TNode<IntPtrT> queue_length = LoadAndUntagFixedArrayBaseLength(queue);\n \n   Label if_append(this), if_grow(this), done(this);\n@@ -851,8 +872,8 @@ TF_BUILTIN(EnqueueMicrotask, InternalBuiltinsAssembler) {\n       StoreFixedArrayElement(new_queue, num_tasks, microtask,\n                              SKIP_WRITE_BARRIER);\n       FillFixedArrayWithValue(PACKED_ELEMENTS, new_queue, new_num_tasks,\n-                              new_queue_length, Heap::kUndefinedValueRootIndex);\n-      SetMicrotaskQueue(new_queue);\n+                              new_queue_length, RootIndex::kUndefinedValue);\n+      SetQueuedMicrotasks(microtask_queue, new_queue);\n       Goto(&done);\n     }\n \n@@ -865,8 +886,8 @@ TF_BUILTIN(EnqueueMicrotask, InternalBuiltinsAssembler) {\n       CopyFixedArrayElements(PACKED_ELEMENTS, queue, new_queue, num_tasks);\n       StoreFixedArrayElement(new_queue, num_tasks, microtask);\n       FillFixedArrayWithValue(PACKED_ELEMENTS, new_queue, new_num_tasks,\n-                              new_queue_length, Heap::kUndefinedValueRootIndex);\n-      SetMicrotaskQueue(new_queue);\n+                              new_queue_length, RootIndex::kUndefinedValue);\n+      SetQueuedMicrotasks(microtask_queue, new_queue);\n       Goto(&done);\n     }\n   }\n@@ -878,13 +899,14 @@ TF_BUILTIN(EnqueueMicrotask, InternalBuiltinsAssembler) {\n   }\n \n   BIND(&done);\n-  SetPendingMicrotaskCount(new_num_tasks);\n+  SetPendingMicrotaskCount(microtask_queue, new_num_tasks);\n   Return(UndefinedConstant());\n }\n \n TF_BUILTIN(RunMicrotasks, InternalBuiltinsAssembler) {\n   // Load the current context from the isolate.\n   TNode<Context> current_context = GetCurrentContext();\n+  TNode<MicrotaskQueue> microtask_queue = GetDefaultMicrotaskQueue();\n \n   Label init_queue_loop(this);\n   Goto(&init_queue_loop);\n@@ -893,17 +915,17 @@ TF_BUILTIN(RunMicrotasks, InternalBuiltinsAssembler) {\n     TVARIABLE(IntPtrT, index, IntPtrConstant(0));\n     Label loop(this, &index), loop_next(this);\n \n-    TNode<IntPtrT> num_tasks = GetPendingMicrotaskCount();\n+    TNode<IntPtrT> num_tasks = GetPendingMicrotaskCount(microtask_queue);\n     ReturnIf(IntPtrEqual(num_tasks, IntPtrConstant(0)), UndefinedConstant());\n \n-    TNode<FixedArray> queue = GetMicrotaskQueue();\n+    TNode<FixedArray> queue = GetQueuedMicrotasks(microtask_queue);\n \n     CSA_ASSERT(this, IntPtrGreaterThanOrEqual(\n                          LoadAndUntagFixedArrayBaseLength(queue), num_tasks));\n     CSA_ASSERT(this, IntPtrGreaterThan(num_tasks, IntPtrConstant(0)));\n \n-    SetPendingMicrotaskCount(IntPtrConstant(0));\n-    SetMicrotaskQueue(EmptyFixedArrayConstant());\n+    SetQueuedMicrotasks(microtask_queue, EmptyFixedArrayConstant());\n+    SetPendingMicrotaskCount(microtask_queue, IntPtrConstant(0));\n \n     Goto(&loop);\n     BIND(&loop);\n@@ -1099,20 +1121,20 @@ TF_BUILTIN(RunMicrotasks, InternalBuiltinsAssembler) {\n }\n \n TF_BUILTIN(AllocateInNewSpace, CodeStubAssembler) {\n-  TNode<Int32T> requested_size =\n-      UncheckedCast<Int32T>(Parameter(Descriptor::kRequestedSize));\n+  TNode<IntPtrT> requested_size =\n+      UncheckedCast<IntPtrT>(Parameter(Descriptor::kRequestedSize));\n \n   TailCallRuntime(Runtime::kAllocateInNewSpace, NoContextConstant(),\n-                  SmiFromInt32(requested_size));\n+                  SmiFromIntPtr(requested_size));\n }\n \n TF_BUILTIN(AllocateInOldSpace, CodeStubAssembler) {\n-  TNode<Int32T> requested_size =\n-      UncheckedCast<Int32T>(Parameter(Descriptor::kRequestedSize));\n+  TNode<IntPtrT> requested_size =\n+      UncheckedCast<IntPtrT>(Parameter(Descriptor::kRequestedSize));\n \n   int flags = AllocateTargetSpace::encode(OLD_SPACE);\n   TailCallRuntime(Runtime::kAllocateInTargetSpace, NoContextConstant(),\n-                  SmiFromInt32(requested_size), SmiConstant(flags));\n+                  SmiFromIntPtr(requested_size), SmiConstant(flags));\n }\n \n TF_BUILTIN(Abort, CodeStubAssembler) {\n@@ -1178,6 +1200,9 @@ void Builtins::Generate_CEntry_Return2_SaveFPRegs_ArgvOnStack_BuiltinExit(\n }\n \n void Builtins::Generate_CallApiGetter(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   // CallApiGetterStub only exists as a stub to avoid duplicating code between\n   // here and code-stubs-<arch>.cc. For example, see CallApiFunctionAndReturn.\n   // Here we abuse the instantiated stub to generate code.\n@@ -1186,6 +1211,9 @@ void Builtins::Generate_CallApiGetter(MacroAssembler* masm) {\n }\n \n void Builtins::Generate_CallApiCallback_Argc0(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   // The common variants of CallApiCallbackStub (i.e. all that are embedded into\n   // the snapshot) are generated as builtins. The rest remain available as code\n   // stubs. Here we abuse the instantiated stub to generate code and avoid\n@@ -1196,6 +1224,9 @@ void Builtins::Generate_CallApiCallback_Argc0(MacroAssembler* masm) {\n }\n \n void Builtins::Generate_CallApiCallback_Argc1(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   // The common variants of CallApiCallbackStub (i.e. all that are embedded into\n   // the snapshot) are generated as builtins. The rest remain available as code\n   // stubs. Here we abuse the instantiated stub to generate code and avoid\n@@ -1207,27 +1238,23 @@ void Builtins::Generate_CallApiCallback_Argc1(MacroAssembler* masm) {\n \n // ES6 [[Get]] operation.\n TF_BUILTIN(GetProperty, CodeStubAssembler) {\n-  Label call_runtime(this, Label::kDeferred), return_undefined(this), end(this);\n-\n   Node* object = Parameter(Descriptor::kObject);\n   Node* key = Parameter(Descriptor::kKey);\n   Node* context = Parameter(Descriptor::kContext);\n-  VARIABLE(var_result, MachineRepresentation::kTagged);\n+  Label if_notfound(this), if_proxy(this, Label::kDeferred),\n+      if_slow(this, Label::kDeferred);\n \n   CodeStubAssembler::LookupInHolder lookup_property_in_holder =\n-      [=, &var_result, &end](Node* receiver, Node* holder, Node* holder_map,\n-                             Node* holder_instance_type, Node* unique_name,\n-                             Label* next_holder, Label* if_bailout) {\n+      [=](Node* receiver, Node* holder, Node* holder_map,\n+          Node* holder_instance_type, Node* unique_name, Label* next_holder,\n+          Label* if_bailout) {\n         VARIABLE(var_value, MachineRepresentation::kTagged);\n         Label if_found(this);\n         TryGetOwnProperty(context, receiver, holder, holder_map,\n                           holder_instance_type, unique_name, &if_found,\n                           &var_value, next_holder, if_bailout);\n         BIND(&if_found);\n-        {\n-          var_result.Bind(var_value.value());\n-          Goto(&end);\n-        }\n+        Return(var_value.value());\n       };\n \n   CodeStubAssembler::LookupInHolder lookup_element_in_holder =\n@@ -1240,23 +1267,26 @@ TF_BUILTIN(GetProperty, CodeStubAssembler) {\n       };\n \n   TryPrototypeChainLookup(object, key, lookup_property_in_holder,\n-                          lookup_element_in_holder, &return_undefined,\n-                          &call_runtime);\n+                          lookup_element_in_holder, &if_notfound, &if_slow,\n+                          &if_proxy);\n \n-  BIND(&return_undefined);\n-  {\n-    var_result.Bind(UndefinedConstant());\n-    Goto(&end);\n-  }\n+  BIND(&if_notfound);\n+  Return(UndefinedConstant());\n+\n+  BIND(&if_slow);\n+  TailCallRuntime(Runtime::kGetProperty, context, object, key);\n \n-  BIND(&call_runtime);\n+  BIND(&if_proxy);\n   {\n-    var_result.Bind(CallRuntime(Runtime::kGetProperty, context, object, key));\n-    Goto(&end);\n+    // Convert the {key} to a Name first.\n+    Node* name = CallBuiltin(Builtins::kToName, context, key);\n+\n+    // The {object} is a JSProxy instance, look up the {name} on it, passing\n+    // {object} both as receiver and holder. If {name} is absent we can safely\n+    // return undefined from here.\n+    TailCallBuiltin(Builtins::kProxyGetProperty, context, object, name, object,\n+                    SmiConstant(OnNonExistent::kReturnUndefined));\n   }\n-\n-  BIND(&end);\n-  Return(var_result.value());\n }\n \n // ES6 [[Set]] operation."
        },
        {
            "sha": "fa1684c54b677f070e8a0fadf60f3e8cc626fa3a",
            "filename": "deps/v8/src/builtins/builtins-interpreter-gen.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -10,37 +10,55 @@ namespace v8 {\n namespace internal {\n \n void Builtins::Generate_InterpreterPushArgsThenCall(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   return Generate_InterpreterPushArgsThenCallImpl(\n       masm, ConvertReceiverMode::kAny, InterpreterPushArgsMode::kOther);\n }\n \n void Builtins::Generate_InterpreterPushUndefinedAndArgsThenCall(\n     MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   return Generate_InterpreterPushArgsThenCallImpl(\n       masm, ConvertReceiverMode::kNullOrUndefined,\n       InterpreterPushArgsMode::kOther);\n }\n \n void Builtins::Generate_InterpreterPushArgsThenCallWithFinalSpread(\n     MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   return Generate_InterpreterPushArgsThenCallImpl(\n       masm, ConvertReceiverMode::kAny,\n       InterpreterPushArgsMode::kWithFinalSpread);\n }\n \n void Builtins::Generate_InterpreterPushArgsThenConstruct(MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   return Generate_InterpreterPushArgsThenConstructImpl(\n       masm, InterpreterPushArgsMode::kOther);\n }\n \n void Builtins::Generate_InterpreterPushArgsThenConstructWithFinalSpread(\n     MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   return Generate_InterpreterPushArgsThenConstructImpl(\n       masm, InterpreterPushArgsMode::kWithFinalSpread);\n }\n \n void Builtins::Generate_InterpreterPushArgsThenConstructArrayFunction(\n     MacroAssembler* masm) {\n+#ifdef V8_TARGET_ARCH_IA32\n+  Assembler::SupportsRootRegisterScope supports_root_register(masm);\n+#endif\n   return Generate_InterpreterPushArgsThenConstructImpl(\n       masm, InterpreterPushArgsMode::kArrayFunction);\n }"
        },
        {
            "sha": "49405141c1086c250c345baf3207d2309d676dba",
            "filename": "deps/v8/src/builtins/builtins-intl-gen.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 8,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3",
            "patch": "@@ -41,8 +41,8 @@ TF_BUILTIN(StringToLowerCaseIntl, IntlBuiltinsAssembler) {\n   Label call_c(this), return_string(this), runtime(this, Label::kDeferred);\n \n   // Early exit on empty strings.\n-  TNode<Smi> const length = LoadStringLengthAsSmi(string);\n-  GotoIf(SmiEqual(length, SmiConstant(0)), &return_string);\n+  TNode<Uint32T> const length = LoadStringLengthAsWord32(string);\n+  GotoIf(Word32Equal(length, Uint32Constant(0)), &return_string);\n \n   // Unpack strings if possible, and bail to runtime unless we get a one-byte\n   // flat string.\n@@ -60,7 +60,8 @@ TF_BUILTIN(StringToLowerCaseIntl, IntlBuiltinsAssembler) {\n   Node* const dst = AllocateSeqOneByteString(context, length);\n \n   const int kMaxShortStringLength = 24;  // Determined empirically.\n-  GotoIf(SmiGreaterThan(length, SmiConstant(kMaxShortStringLength)), &call_c);\n+  GotoIf(Uint32GreaterThan(length, Uint32Constant(kMaxShortStringLength)),\n+         &call_c);\n \n   {\n     Node* const dst_ptr = PointerToSeqStringData(dst);\n@@ -69,7 +70,7 @@ TF_BUILTIN(StringToLowerCaseIntl, IntlBuiltinsAssembler) {\n \n     Node* const start_address = to_direct.PointerToData(&call_c);\n     TNode<IntPtrT> const end_address =\n-        Signed(IntPtrAdd(start_address, SmiUntag(length)));\n+        Signed(IntPtrAdd(start_address, ChangeUint32ToWord(length)));\n \n     Node* const to_lower_table_addr =\n         ExternalConstant(ExternalReference::intl_to_latin1_lower_table());\n@@ -177,10 +178,8 @@ void IntlBuiltinsAssembler::ListFormatCommon(TNode<Context> context,\n   BIND(&has_list);\n   {\n     // 5. Let x be ? IterableToList(list).\n-    IteratorBuiltinsAssembler iterator_assembler(state());\n-    // TODO(adamk): Consider exposing IterableToList as a buitin and calling\n-    // it from here instead of inlining the operation.\n-    TNode<JSArray> x = iterator_assembler.IterableToList(context, list);\n+    TNode<Object> x =\n+        CallBuiltin(Builtins::kIterableToListWithSymbolLookup, context, list);\n \n     // 6. Return ? FormatList(lf, x).\n     args.PopAndReturn(CallRuntime(format_func_id, context, list_format, x));"
        },
        {
            "sha": "01c8a9ddcda16c8a32806acaa8127e820b410f4e",
            "filename": "deps/v8/src/builtins/builtins-intl.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "419ff14db10cf9234d92ec435e39f7278b885c7f",
            "filename": "deps/v8/src/builtins/builtins-intl.h",
            "status": "removed",
            "additions": 0,
            "deletions": 30,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/b8fbe69db1292307adb2c2b2e0d5ef48c4ab2faf/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.h",
            "raw_url": "https://github.com/nodejs/node/raw/b8fbe69db1292307adb2c2b2e0d5ef48c4ab2faf/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-intl.h?ref=b8fbe69db1292307adb2c2b2e0d5ef48c4ab2faf"
        },
        {
            "sha": "802ed2edb2124eb78a3cbf46e4fa7ded25bc35b8",
            "filename": "deps/v8/src/builtins/builtins-iterator-gen.cc",
            "status": "modified",
            "additions": 93,
            "deletions": 48,
            "changes": 141,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "f61f7f52c0ffd8f0c8290a9b88e8532439a35a16",
            "filename": "deps/v8/src/builtins/builtins-iterator-gen.h",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "c11722ec6b192f12fe6846c9b8faeeb166df3587",
            "filename": "deps/v8/src/builtins/builtins-lazy-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-lazy-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-lazy-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-lazy-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "36b0d309396199781843a2179d6c9c3f7bcbcc53",
            "filename": "deps/v8/src/builtins/builtins-math-gen.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-math-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-math-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-math-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "582f6242ad56c30cdc0b37888e468179a2550565",
            "filename": "deps/v8/src/builtins/builtins-number-gen.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "d15c41105d38b1476d6a17954841de5ab6038b73",
            "filename": "deps/v8/src/builtins/builtins-number.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-number.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "fbac2e1abc5e75df6d70cf7a1d10ce2d43cce16d",
            "filename": "deps/v8/src/builtins/builtins-object-gen.cc",
            "status": "modified",
            "additions": 36,
            "deletions": 168,
            "changes": 204,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "1d43217999d4b3ace296c1ad05553050a223b119",
            "filename": "deps/v8/src/builtins/builtins-promise-gen.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 18,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "39b2a246834e502b5021bbfec90bb8a42453af3f",
            "filename": "deps/v8/src/builtins/builtins-promise-gen.h",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "f0d891910affe91bdae65b471f330d59e702f1b3",
            "filename": "deps/v8/src/builtins/builtins-proxy-gen.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "cd3f2b4bedbff04f18a7bf5abc3faee691d34204",
            "filename": "deps/v8/src/builtins/builtins-reflect.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-reflect.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "30717f41deebce88d46fcca05342b9ca50021780",
            "filename": "deps/v8/src/builtins/builtins-regexp-gen.cc",
            "status": "modified",
            "additions": 20,
            "deletions": 21,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4befb13d7c7a674efebbf654ae9a96ab138c86cb",
            "filename": "deps/v8/src/builtins/builtins-sharedarraybuffer-gen.cc",
            "status": "modified",
            "additions": 233,
            "deletions": 65,
            "changes": 298,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "859d634cc98fb3bf794a57824e5f477777adb868",
            "filename": "deps/v8/src/builtins/builtins-sharedarraybuffer.cc",
            "status": "modified",
            "additions": 39,
            "deletions": 16,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "574f425a0af1bd35f833c14133956ed12824fa7b",
            "filename": "deps/v8/src/builtins/builtins-string-gen.cc",
            "status": "modified",
            "additions": 154,
            "deletions": 119,
            "changes": 273,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "2420ad301404b1e7406249df2d72f99475bbe69e",
            "filename": "deps/v8/src/builtins/builtins-string-gen.h",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "7aba998aa4c0c5e2e7f5e9eabd4e7bfab75a7088",
            "filename": "deps/v8/src/builtins/builtins-string.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "97e0def67cc0b6983c950faa3893b5cdd66321dc",
            "filename": "deps/v8/src/builtins/builtins-symbol.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "99979b0283209a81fa3f3f0d9ce816c08569db8e",
            "filename": "deps/v8/src/builtins/builtins-typed-array-gen.cc",
            "status": "modified",
            "additions": 95,
            "deletions": 89,
            "changes": 184,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "1e35ae69a96bcee7496dd09e5f1e1a9fbc93349e",
            "filename": "deps/v8/src/builtins/builtins-typed-array-gen.h",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typed-array-gen.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "60be33de2019c93076813de4586f2c1308396a7c",
            "filename": "deps/v8/src/builtins/builtins-wasm-gen.cc",
            "status": "modified",
            "additions": 27,
            "deletions": 25,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-wasm-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-wasm-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-wasm-gen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "103f00c56e3ab9bd121e1c8e762b0f031eed56ec",
            "filename": "deps/v8/src/builtins/builtins.cc",
            "status": "modified",
            "additions": 23,
            "deletions": 20,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "9f404a0ac00b5a936d1989c968b80169367f8925",
            "filename": "deps/v8/src/builtins/builtins.h",
            "status": "modified",
            "additions": 45,
            "deletions": 7,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "26995453dd9e4600557420e769d527a6ba8ecdeb",
            "filename": "deps/v8/src/builtins/constants-table-builder.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "1e86f88d83cb9b69c4ee59629af903f816568209",
            "filename": "deps/v8/src/builtins/data-view.tq",
            "status": "modified",
            "additions": 427,
            "deletions": 524,
            "changes": 951,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fdata-view.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fdata-view.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fdata-view.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "8266807b43481d2ddb2ae04b24ee5aa7642e819e",
            "filename": "deps/v8/src/builtins/generate-bytecodes-builtins-list.cc",
            "status": "added",
            "additions": 97,
            "deletions": 0,
            "changes": 97,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgenerate-bytecodes-builtins-list.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgenerate-bytecodes-builtins-list.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgenerate-bytecodes-builtins-list.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "063daed5e305b7e9ded47d642b11297cfe4d4d31",
            "filename": "deps/v8/src/builtins/ia32/builtins-ia32.cc",
            "status": "modified",
            "additions": 554,
            "deletions": 419,
            "changes": 973,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "a2a335c70ff399a1cefa069df061dba2b7ac9d50",
            "filename": "deps/v8/src/builtins/mips/builtins-mips.cc",
            "status": "modified",
            "additions": 50,
            "deletions": 72,
            "changes": 122,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4f1ba93a992a98ce4c9169d5b9a8c05936b1002f",
            "filename": "deps/v8/src/builtins/mips64/builtins-mips64.cc",
            "status": "modified",
            "additions": 49,
            "deletions": 71,
            "changes": 120,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4446f81e5874638e373e8ae2c5894d3894ce5643",
            "filename": "deps/v8/src/builtins/ppc/builtins-ppc.cc",
            "status": "modified",
            "additions": 49,
            "deletions": 72,
            "changes": 121,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "198ba0971dfc6aae2ddc0b0c3f46243259ed72b8",
            "filename": "deps/v8/src/builtins/s390/builtins-s390.cc",
            "status": "modified",
            "additions": 53,
            "deletions": 72,
            "changes": 125,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "630473f407ad67ef8f14d84cae05a17bcaa4a993",
            "filename": "deps/v8/src/builtins/setup-builtins-internal.cc",
            "status": "modified",
            "additions": 37,
            "deletions": 27,
            "changes": 64,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "b3ff7dbca1c387daa2309c5d809a72f25e520b3e",
            "filename": "deps/v8/src/builtins/typed-array.tq",
            "status": "modified",
            "additions": 82,
            "deletions": 80,
            "changes": 162,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Ftyped-array.tq?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "2bc7768417c238712ca312305dea52f07b2bb5c6",
            "filename": "deps/v8/src/builtins/x64/builtins-x64.cc",
            "status": "modified",
            "additions": 81,
            "deletions": 92,
            "changes": 173,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "c24c9ae5549387957f3a50fd67e07cc23c52aa09",
            "filename": "deps/v8/src/callable.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcallable.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcallable.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcallable.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "0ef3ca5a152b350b27df4c9e4087cd5fcd4821ee",
            "filename": "deps/v8/src/cancelable-task.h",
            "status": "modified",
            "additions": 53,
            "deletions": 1,
            "changes": 54,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcancelable-task.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcancelable-task.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcancelable-task.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "3662514bcae0178da51f80890b163cafeb38ed94",
            "filename": "deps/v8/src/char-predicates-inl.h",
            "status": "modified",
            "additions": 2,
            "deletions": 9,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fchar-predicates-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fchar-predicates-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fchar-predicates-inl.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4a0afa4f571a03195b9e313d8555653835d93fed",
            "filename": "deps/v8/src/checks.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fchecks.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fchecks.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fchecks.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "07a883be0db7d9189eaeccb60ca3b9c907746637",
            "filename": "deps/v8/src/code-events.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-events.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-events.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-events.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "cffb16b7d4e1e5745b1e2ad0bff066023f79e268",
            "filename": "deps/v8/src/code-factory.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 21,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-factory.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-factory.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-factory.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "3e8bc3790ca15374c685195251daa3b2bff87bba",
            "filename": "deps/v8/src/code-factory.h",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-factory.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-factory.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-factory.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "e307ca5cc3796bdf41745b0f04e7c0b3cb25e9ad",
            "filename": "deps/v8/src/code-stub-assembler.cc",
            "status": "modified",
            "additions": 1016,
            "deletions": 540,
            "changes": 1556,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "69ac5e27bb2fb30649155eff9d5e1de1d6af2feb",
            "filename": "deps/v8/src/code-stub-assembler.h",
            "status": "modified",
            "additions": 256,
            "deletions": 70,
            "changes": 326,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4630fe76391ecf9569781725907697ac8afa3abb",
            "filename": "deps/v8/src/code-stubs.h",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-stubs.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcode-stubs.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stubs.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "198ee8f57265e7137345d9745d90191cc0de4150",
            "filename": "deps/v8/src/codegen.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 13,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcodegen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcodegen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcodegen.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "3e07c86fc28e3b421d5edca29131b672583663ca",
            "filename": "deps/v8/src/codegen.h",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcodegen.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcodegen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcodegen.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "bfaa9d42ce340a6bc61b24d45e31a425c88fea47",
            "filename": "deps/v8/src/collector.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcollector.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcollector.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcollector.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "0068c833622303162cdfcc7ca70796bf858725a5",
            "filename": "deps/v8/src/compilation-cache.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "ed3f1986b6adf4f34726ae29ac657745b8f3e919",
            "filename": "deps/v8/src/compilation-cache.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompilation-cache.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompilation-cache.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompilation-cache.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "bfd9a5c66a3bbffe973db5f6cfb753584c8b2334",
            "filename": "deps/v8/src/compilation-statistics.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompilation-statistics.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompilation-statistics.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompilation-statistics.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "827a2aa18d6703c2c14afc20059fa239b070010b",
            "filename": "deps/v8/src/compiler-dispatcher/compiler-dispatcher-job.h",
            "status": "modified",
            "additions": 8,
            "deletions": 20,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher-job.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher-job.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher-job.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "ab8bc5adec15bf05f71f53b7bfac8cfe573ec9b3",
            "filename": "deps/v8/src/compiler-dispatcher/compiler-dispatcher-tracer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher-tracer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher-tracer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher-tracer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "614877038528343660cfea9a0ea338a67bee5566",
            "filename": "deps/v8/src/compiler-dispatcher/compiler-dispatcher.cc",
            "status": "modified",
            "additions": 151,
            "deletions": 299,
            "changes": 450,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "dd024e297acf0975f355d35e860e74773d4a6297",
            "filename": "deps/v8/src/compiler-dispatcher/compiler-dispatcher.h",
            "status": "modified",
            "additions": 22,
            "deletions": 15,
            "changes": 37,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "492e80abe08a061c30a8ae6d2bd1bce26fc7ce8f",
            "filename": "deps/v8/src/compiler-dispatcher/optimizing-compile-dispatcher.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 4,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "59f4c3e8ff10a09d39b61d8c351933e1cfefaecc",
            "filename": "deps/v8/src/compiler-dispatcher/unoptimized-compile-job.cc",
            "status": "modified",
            "additions": 27,
            "deletions": 315,
            "changes": 342,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "31a66e4eb495ba26ded79862bc0268a7d53a3118",
            "filename": "deps/v8/src/compiler-dispatcher/unoptimized-compile-job.h",
            "status": "modified",
            "additions": 16,
            "deletions": 33,
            "changes": 49,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "7cb8a456964f23a8fa5fb05b24d7c27a13f9ab5c",
            "filename": "deps/v8/src/compiler.cc",
            "status": "modified",
            "additions": 237,
            "deletions": 181,
            "changes": 418,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "f32d771266ff98194f67fca8ca5f33aaa263796a",
            "filename": "deps/v8/src/compiler.h",
            "status": "modified",
            "additions": 66,
            "deletions": 27,
            "changes": 93,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "a0648d0257bb9505477c2a1bb53f820e3c391af6",
            "filename": "deps/v8/src/compiler/access-builder.cc",
            "status": "modified",
            "additions": 27,
            "deletions": 25,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "889a139a3846c6fafa6d6754b84b1f5278f11f15",
            "filename": "deps/v8/src/compiler/access-builder.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "5bf515f654f84dcaaf1e52e85a0a31c6118d613e",
            "filename": "deps/v8/src/compiler/access-info.cc",
            "status": "modified",
            "additions": 31,
            "deletions": 18,
            "changes": 49,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "9d6828ee69a1d072aeb62e193f17cbc727d8cff6",
            "filename": "deps/v8/src/compiler/access-info.h",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "6943e3ae78394592548852e5cc1e6a367ddf87cc",
            "filename": "deps/v8/src/compiler/allocation-builder.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "718272b2cc7eec4c06aaef7e9179ad312ef768b9",
            "filename": "deps/v8/src/compiler/arm/code-generator-arm.cc",
            "status": "modified",
            "additions": 67,
            "deletions": 73,
            "changes": 140,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "751530e2063f74a7eec96c5530ce46c7c196586d",
            "filename": "deps/v8/src/compiler/arm/instruction-codes-arm.h",
            "status": "modified",
            "additions": 268,
            "deletions": 289,
            "changes": 557,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-codes-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-codes-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-codes-arm.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "3de063b3fe75790dba969bcfb5fa07671559fe3a",
            "filename": "deps/v8/src/compiler/arm/instruction-scheduler-arm.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 21,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-scheduler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-scheduler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-scheduler-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "28d7a7fcd0ddfb4f0393865e0a1b3b10d06c9a9d",
            "filename": "deps/v8/src/compiler/arm/instruction-selector-arm.cc",
            "status": "modified",
            "additions": 90,
            "deletions": 145,
            "changes": 235,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "128ed9ffee6033a18d8c3d47a82d2d70eda5faa1",
            "filename": "deps/v8/src/compiler/arm64/code-generator-arm64.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "dd9914b8bc4146fe9c8197dcab564833627fb403",
            "filename": "deps/v8/src/compiler/arm64/instruction-selector-arm64.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "90ad85fb5094ffe0226b007f22c0364e88cb0a15",
            "filename": "deps/v8/src/compiler/branch-elimination.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fbranch-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fbranch-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbranch-elimination.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "255a4f39262c126b4e8ee358a5f56da29dfa2446",
            "filename": "deps/v8/src/compiler/bytecode-analysis.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-analysis.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-analysis.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-analysis.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "bc788943d7d16d58bd9b6f8138031f28e9f5af81",
            "filename": "deps/v8/src/compiler/bytecode-analysis.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-analysis.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-analysis.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-analysis.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4405aff207e83aec7317e116cc43628b495da3c1",
            "filename": "deps/v8/src/compiler/bytecode-graph-builder.cc",
            "status": "modified",
            "additions": 72,
            "deletions": 5,
            "changes": 77,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "1300cd258d176bf8399c80fed06b43d5d09298a3",
            "filename": "deps/v8/src/compiler/c-linkage.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 10,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fc-linkage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fc-linkage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fc-linkage.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "97e05c130daf816e17358aac7a839659bb0c9192",
            "filename": "deps/v8/src/compiler/checkpoint-elimination.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcheckpoint-elimination.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcheckpoint-elimination.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcheckpoint-elimination.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "93e384444e5a380bfae0c7e9a55a43afda634f76",
            "filename": "deps/v8/src/compiler/code-assembler.cc",
            "status": "modified",
            "additions": 80,
            "deletions": 24,
            "changes": 104,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "3a5f06bb955cd75a04e22c7f73f89e1db2bc661b",
            "filename": "deps/v8/src/compiler/code-assembler.h",
            "status": "modified",
            "additions": 116,
            "deletions": 18,
            "changes": 134,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "b6d782d96a168c8b20d2e2edb37ac7e16e8c7b06",
            "filename": "deps/v8/src/compiler/code-generator.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 11,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "1ba0e32ce6f8d0f922f6b3a8108de728e1931ff5",
            "filename": "deps/v8/src/compiler/code-generator.h",
            "status": "modified",
            "additions": 20,
            "deletions": 8,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "6a36c979a1755c3d384a3d4bad512616e3873fda",
            "filename": "deps/v8/src/compiler/common-node-cache.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-node-cache.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-node-cache.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-node-cache.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "32b3181b7ab3eeb287c6ba9771da8cefcaec611a",
            "filename": "deps/v8/src/compiler/common-operator-reducer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "9ed694336766febcae467a0e5fbb2a6208944060",
            "filename": "deps/v8/src/compiler/common-operator.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 3,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "609dfc8c1bc88600c67ed63e216fbf7d97607e38",
            "filename": "deps/v8/src/compiler/common-operator.h",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "d5eb8b54beda539c7ef7041151965de186c4461a",
            "filename": "deps/v8/src/compiler/compilation-dependencies.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcompilation-dependencies.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4508d90b716ab182830a88783882415569d6aa68",
            "filename": "deps/v8/src/compiler/constant-folding-reducer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fconstant-folding-reducer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "a1cab2f0f0c316847807b6a1bb6fd93ac759d71f",
            "filename": "deps/v8/src/compiler/dead-code-elimination.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fdead-code-elimination.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fdead-code-elimination.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fdead-code-elimination.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "97f78418d01df8122171bd1ad34c405a3af5001a",
            "filename": "deps/v8/src/compiler/effect-control-linearizer.cc",
            "status": "modified",
            "additions": 398,
            "deletions": 151,
            "changes": 549,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "fcc4cad728e709ce3656be89523d6bc6d3ba6089",
            "filename": "deps/v8/src/compiler/effect-control-linearizer.h",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "9b1ef8d90786f1c3b4d8e6d10518dc5fdeda6923",
            "filename": "deps/v8/src/compiler/escape-analysis.cc",
            "status": "modified",
            "additions": 69,
            "deletions": 9,
            "changes": 78,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "c3d4e5978d9735799a8d88003c777725a7736872",
            "filename": "deps/v8/src/compiler/escape-analysis.h",
            "status": "modified",
            "additions": 1,
            "deletions": 7,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "bd210d714d083e9743b2c2c11a26efec8dfde389",
            "filename": "deps/v8/src/compiler/frame-states.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "c102c62ad4ed03c0a1d866884f78178b25ab8c71",
            "filename": "deps/v8/src/compiler/gap-resolver.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 9,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgap-resolver.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgap-resolver.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgap-resolver.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "9a4fe4e6d6036e53d1f6baa928722608f55583bc",
            "filename": "deps/v8/src/compiler/gap-resolver.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgap-resolver.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgap-resolver.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgap-resolver.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "de02f941be93b7fcdc2de71ac819c073d67f25f1",
            "filename": "deps/v8/src/compiler/graph-assembler.cc",
            "status": "modified",
            "additions": 20,
            "deletions": 10,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "fa527a8bb09b70ec38f55a740c17f9a5e082872b",
            "filename": "deps/v8/src/compiler/graph-assembler.h",
            "status": "modified",
            "additions": 14,
            "deletions": 5,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "fafa322d87cb8189ceb57b4863a3eb27e5a8db77",
            "filename": "deps/v8/src/compiler/graph-reducer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-reducer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "b9fd455b9b27670ab28692bf99edaff30f066fd7",
            "filename": "deps/v8/src/compiler/graph-reducer.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-reducer.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "e1dbfffff591519c84d0ea762ceae7e5f6604a41",
            "filename": "deps/v8/src/compiler/graph-trimmer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-trimmer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-trimmer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-trimmer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "cbb71889932e87030e4f40f0db613126328a46cb",
            "filename": "deps/v8/src/compiler/graph-visualizer.cc",
            "status": "modified",
            "additions": 302,
            "deletions": 5,
            "changes": 307,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "93524d74cdf670c2f039ed6920a294f2194a0282",
            "filename": "deps/v8/src/compiler/graph-visualizer.h",
            "status": "modified",
            "additions": 40,
            "deletions": 1,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "eafb043992fe3f9448ce152b0c63114ff1209840",
            "filename": "deps/v8/src/compiler/graph.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "c73ad99ad119a3c82db3ded4d968ef724aaa2bab",
            "filename": "deps/v8/src/compiler/ia32/code-generator-ia32.cc",
            "status": "modified",
            "additions": 118,
            "deletions": 97,
            "changes": 215,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "e157a29e1312d44393884599df74ad19f851b9d7",
            "filename": "deps/v8/src/compiler/ia32/instruction-codes-ia32.h",
            "status": "modified",
            "additions": 350,
            "deletions": 371,
            "changes": 721,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "54454e41cb543abb7419e9ee94b066cdefc61cd8",
            "filename": "deps/v8/src/compiler/ia32/instruction-scheduler-ia32.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 21,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "43b572170ff903c8ce31cb6c9af4467269f7ca41",
            "filename": "deps/v8/src/compiler/ia32/instruction-selector-ia32.cc",
            "status": "modified",
            "additions": 87,
            "deletions": 148,
            "changes": 235,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "bff70d5edfe66cf5c0b58adaeae2be70138c2a90",
            "filename": "deps/v8/src/compiler/instruction-selector-impl.h",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4bd4dc18fe2c5ad5bbf6f244e79e3a31b74a5580",
            "filename": "deps/v8/src/compiler/instruction-selector.cc",
            "status": "modified",
            "additions": 24,
            "deletions": 129,
            "changes": 153,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "04a2bd9581691f83433856ff6c300bc46209dd7b",
            "filename": "deps/v8/src/compiler/instruction.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "39d083c2de4bfd2122faae3fb527a549a2d862b4",
            "filename": "deps/v8/src/compiler/instruction.h",
            "status": "modified",
            "additions": 18,
            "deletions": 6,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "41a509808191a44c2358240a98bd201c192e1565",
            "filename": "deps/v8/src/compiler/int64-lowering.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 6,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "5b04731a6462d4d59161aebf28d9fb5b45342ef4",
            "filename": "deps/v8/src/compiler/js-call-reducer.cc",
            "status": "modified",
            "additions": 178,
            "deletions": 292,
            "changes": 470,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "6683a0b18e93dba46ae26b8c0cd4c7a4cba8eef7",
            "filename": "deps/v8/src/compiler/js-call-reducer.h",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "1b2f3c3a7c8bedcdae18967a155ac3b94bc17606",
            "filename": "deps/v8/src/compiler/js-context-specialization.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "3848e1f8146fcd74394e73d19cac4a147bf4854f",
            "filename": "deps/v8/src/compiler/js-create-lowering.cc",
            "status": "modified",
            "additions": 111,
            "deletions": 151,
            "changes": 262,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4099edb7b68d12b53cdbcb6ecd948bc939f42cc4",
            "filename": "deps/v8/src/compiler/js-create-lowering.h",
            "status": "modified",
            "additions": 7,
            "deletions": 13,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "731159f3d12eb12428443c8d3dedea1a872d6eab",
            "filename": "deps/v8/src/compiler/js-generic-lowering.cc",
            "status": "modified",
            "additions": 40,
            "deletions": 12,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "7b74c2a32c6d75bf0bb4aee6bca349dfe9cea568",
            "filename": "deps/v8/src/compiler/js-graph.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 14,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "774b8e74333ff50d4d3ffa5e66884ad9c6ace530",
            "filename": "deps/v8/src/compiler/js-graph.h",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-graph.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "a95bfaad212a4d5d209a755e26c15e4d10f7ce3c",
            "filename": "deps/v8/src/compiler/js-heap-broker.cc",
            "status": "modified",
            "additions": 1722,
            "deletions": 558,
            "changes": 2280,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "89f3ee871ebf7ba8b2934ee31d6542cca722e10c",
            "filename": "deps/v8/src/compiler/js-heap-broker.h",
            "status": "modified",
            "additions": 151,
            "deletions": 100,
            "changes": 251,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-broker.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "ca510d50545b4c99749f3943627457f8d73f0951",
            "filename": "deps/v8/src/compiler/js-heap-copy-reducer.cc",
            "status": "modified",
            "additions": 34,
            "deletions": 9,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "1041a00fab8a07103d57731eaf741c30a7db6926",
            "filename": "deps/v8/src/compiler/js-heap-copy-reducer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-heap-copy-reducer.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "3c5b1b8046b941aaa2c289fa73379629c30c6ebb",
            "filename": "deps/v8/src/compiler/js-inlining.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 10,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "baca345f27c2e39137e8a6448cc03fd659e2c9d0",
            "filename": "deps/v8/src/compiler/js-inlining.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "b132cfa6e927dbdce6ac904201a90367b93aea09",
            "filename": "deps/v8/src/compiler/js-intrinsic-lowering.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 46,
            "changes": 46,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "f71af1156c3e2138266c4c7c780ea832403e6964",
            "filename": "deps/v8/src/compiler/js-intrinsic-lowering.h",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-intrinsic-lowering.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "d449e723678873eb1918e640f3d0a7371bd513b8",
            "filename": "deps/v8/src/compiler/js-native-context-specialization.cc",
            "status": "modified",
            "additions": 199,
            "deletions": 70,
            "changes": 269,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "0bd62e07c90df705e9621cf8d5350da6fd8cee9a",
            "filename": "deps/v8/src/compiler/js-native-context-specialization.h",
            "status": "modified",
            "additions": 17,
            "deletions": 2,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "a30b4ddcddd86ebc45404c4b9e17458f25c9c98f",
            "filename": "deps/v8/src/compiler/js-operator.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "db389412193ca79e6c02e4f8c59959fa953bcf6b",
            "filename": "deps/v8/src/compiler/js-operator.h",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "7b3728428bb44cc1001f7be060a6ff5410eab0c3",
            "filename": "deps/v8/src/compiler/js-typed-lowering.cc",
            "status": "modified",
            "additions": 157,
            "deletions": 213,
            "changes": 370,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "e25e092453218dbf2268f39beb7ca5f7fe15fe72",
            "filename": "deps/v8/src/compiler/js-typed-lowering.h",
            "status": "modified",
            "additions": 4,
            "deletions": 8,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "9bba09329d914c61f4eac4ed5ee2263f87203b04",
            "filename": "deps/v8/src/compiler/linkage.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 5,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "46966b552f6e31737301320ec993c2b9daab4952",
            "filename": "deps/v8/src/compiler/load-elimination.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 115,
            "changes": 117,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "8fa31be0748de9d4a9290c8713d32bec2013d95a",
            "filename": "deps/v8/src/compiler/load-elimination.h",
            "status": "modified",
            "additions": 3,
            "deletions": 41,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "a3408ec81de9d98b7b12481e750b022402dd2d31",
            "filename": "deps/v8/src/compiler/loop-peeling.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-peeling.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "9fe7fdc4f9dbc646cb28b8a88ed2a4e4aa79128c",
            "filename": "deps/v8/src/compiler/loop-variable-optimizer.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "c5769c2542b99169e8eee824bc665a3113126011",
            "filename": "deps/v8/src/compiler/machine-graph-verifier.cc",
            "status": "modified",
            "additions": 57,
            "deletions": 0,
            "changes": 57,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "8ef7e7ce08a82845eefd557b00ea57c0ff4c3ea0",
            "filename": "deps/v8/src/compiler/machine-operator-reducer.cc",
            "status": "modified",
            "additions": 39,
            "deletions": 16,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "c44ec5f55171f55d8bf8d4e512a70dc200327a6a",
            "filename": "deps/v8/src/compiler/machine-operator-reducer.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator-reducer.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "f3fcd7758c879d26ff522d6394c52ad0798040ab",
            "filename": "deps/v8/src/compiler/machine-operator.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 113,
            "changes": 118,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "a34360a3754182aef58932974028ca59003c4b8f",
            "filename": "deps/v8/src/compiler/machine-operator.h",
            "status": "modified",
            "additions": 2,
            "deletions": 14,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "298a5037714bd8ca32c77479be24a2b1c08906e0",
            "filename": "deps/v8/src/compiler/memory-optimizer.cc",
            "status": "modified",
            "additions": 25,
            "deletions": 31,
            "changes": 56,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "31c04e5f2f3796ba4db2da19c48e085b480651a2",
            "filename": "deps/v8/src/compiler/memory-optimizer.h",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "e44ffee34b512abd41dd1d43823ae1e77927a8b6",
            "filename": "deps/v8/src/compiler/mips/code-generator-mips.cc",
            "status": "modified",
            "additions": 97,
            "deletions": 1,
            "changes": 98,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "4b49de36b43e419cd05d5692551c6697db00c739",
            "filename": "deps/v8/src/compiler/mips/instruction-codes-mips.h",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-codes-mips.h",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-codes-mips.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-codes-mips.h?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "26f543d838ab268ca2ce2789e81656684ae48873",
            "filename": "deps/v8/src/compiler/mips/instruction-scheduler-mips.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-scheduler-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-scheduler-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-scheduler-mips.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "954942c9af9576d1cd2eba278c4ddcc178e6dcb5",
            "filename": "deps/v8/src/compiler/mips/instruction-selector-mips.cc",
            "status": "modified",
            "additions": 136,
            "deletions": 0,
            "changes": 136,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        },
        {
            "sha": "0e2b508a2979ef5d6ec4d773218015d388d66032",
            "filename": "deps/v8/src/compiler/mips64/code-generator-mips64.cc",
            "status": "modified",
            "additions": 223,
            "deletions": 131,
            "changes": 354,
            "blob_url": "https://github.com/nodejs/node/blob/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc?ref=9b4bf7de6c9a7c25f116c7a502384c20b5cfaea3"
        }
    ],
    "stats": {
        "total": 120119,
        "additions": 78425,
        "deletions": 41694
    }
}