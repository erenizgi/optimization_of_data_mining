{
    "author": "addaleax",
    "message": "util: introduce `util.types.is[…]` type checks\n\nProvide public APIs for native typechecking that is actually useful.\nThe motivation for this is providing alternatives to userland\nmodules that would currently rely on `process.binding('util')`.\n\nPR-URL: https://github.com/nodejs/node/pull/18415\nReviewed-By: Evan Lucas <evanlucas@me.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>",
    "sha": "b20af8088a4d5cccb1901d42107f6d9ca82d306f",
    "files": [
        {
            "sha": "b1cad2d701fbdeb3962df231ab2c88547bfe541e",
            "filename": "doc/api/deprecations.md",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/doc%2Fapi%2Fdeprecations.md",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/doc%2Fapi%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fdeprecations.md?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -932,6 +932,14 @@ Using the `noAssert` argument has no functionality anymore. All input is going\n to be verified, no matter if it is set to true or not. Skipping the verification\n could lead to hard to find errors and crashes.\n \n+<a id=\"DEP0XXX\"></a>\n+### DEP0XXX: process.binding('util').is[...] typechecks\n+\n+Type: Documentation-only (supports [`--pending-deprecation`][])\n+\n+Using `process.binding()` in general should be avoided. The type checking\n+methods in particular can be replaced by using [`util.types`][].\n+\n [`--pending-deprecation`]: cli.html#cli_pending_deprecation\n [`Buffer.allocUnsafeSlow(size)`]: buffer.html#buffer_class_method_buffer_allocunsafeslow_size\n [`Buffer.from(array)`]: buffer.html#buffer_class_method_buffer_from_array\n@@ -1000,6 +1008,7 @@ could lead to hard to find errors and crashes.\n [`util.log()`]: util.html#util_util_log_string\n [`util.print()`]: util.html#util_util_print_strings\n [`util.puts()`]: util.html#util_util_puts_strings\n+[`util.types`]: util.html#util_util_types\n [`util`]: util.html\n [`worker.exitedAfterDisconnect`]: cluster.html#cluster_worker_exitedafterdisconnect\n [alloc]: buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding"
        },
        {
            "sha": "524372a6fe29c91b86106ff2324c15e2d0ee8858",
            "filename": "doc/api/util.md",
            "status": "modified",
            "additions": 582,
            "deletions": 5,
            "changes": 587,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/doc%2Fapi%2Futil.md",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/doc%2Fapi%2Futil.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Futil.md?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -891,6 +891,555 @@ encoded bytes.\n \n The encoding supported by the `TextEncoder` instance. Always set to `'utf-8'`.\n \n+## util.types\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+`util.types` provides a number of type checks for different kinds of built-in\n+objects. Unlike `instanceof` or `Object.prototype.toString.call(value)`,\n+these checks do not inspect properties of the object that are accessible from\n+JavaScript (like their prototype), and usually have the overhead of\n+calling into C++.\n+\n+The result generally does not make any guarantees about what kinds of\n+properties or behavior a value exposes in JavaScript. They are primarily\n+useful for addon developers who prefer to do type checking in JavaScript.\n+\n+### util.types.isAnyArrayBuffer(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`ArrayBuffer`][] or\n+[`SharedArrayBuffer`][] instance.\n+\n+See also [`util.types.isArrayBuffer()`][] and\n+[`util.types.isSharedArrayBuffer()`][].\n+\n+For example:\n+\n+```js\n+util.types.isAnyArrayBuffer(new ArrayBuffer());  // Returns true\n+util.types.isAnyArrayBuffer(new SharedArrayBuffer());  // Returns true\n+```\n+\n+### util.types.isArgumentsObject(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is an `arguments` object.\n+\n+For example:\n+\n+<!-- eslint-disable prefer-rest-params -->\n+```js\n+function foo() {\n+  util.types.isArgumentsObject(arguments);  // Returns true\n+}\n+```\n+\n+### util.types.isArrayBuffer(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`ArrayBuffer`][] instance.\n+This does *not* include [`SharedArrayBuffer`][] instances. Usually, it is\n+desirable to test for both; See [`util.types.isAnyArrayBuffer()`][] for that.\n+\n+For example:\n+\n+```js\n+util.types.isArrayBuffer(new ArrayBuffer());  // Returns true\n+util.types.isArrayBuffer(new SharedArrayBuffer());  // Returns false\n+```\n+\n+### util.types.isAsyncFunction(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is an [async function][].\n+Note that this only reports back what the JavaScript engine is seeing;\n+in particular, the return value may not match the original source code if\n+a transpilation tool was used.\n+\n+For example:\n+\n+```js\n+util.types.isAsyncFunction(function foo() {});  // Returns false\n+util.types.isAsyncFunction(async function foo() {});  // Returns true\n+```\n+\n+### util.types.isBooleanObject(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a boolean object, e.g. created\n+by `new Boolean()`.\n+\n+For example:\n+\n+```js\n+util.types.isBooleanObject(false);  // Returns false\n+util.types.isBooleanObject(true);   // Returns false\n+util.types.isBooleanObject(new Boolean(false));   // Returns true\n+util.types.isBooleanObject(new Boolean(true));    // Returns true\n+util.types.isBooleanObject(Boolean(false)); // Returns false\n+util.types.isBooleanObject(Boolean(true)); // Returns false\n+```\n+\n+### util.types.isDataView(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`DataView`][] instance.\n+\n+For example:\n+\n+```js\n+const ab = new ArrayBuffer(20);\n+util.types.isDataView(new DataView(ab));  // Returns true\n+util.types.isDataView(new Float64Array());  // Returns false\n+```\n+\n+See also [`ArrayBuffer.isView()`][].\n+\n+### util.types.isDate(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Date`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isDate(new Date());  // Returns true\n+```\n+\n+### util.types.isExternal(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a native `External` value.\n+\n+### util.types.isFloat32Array(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Float32Array`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isFloat32Array(new ArrayBuffer());  // Returns false\n+util.types.isFloat32Array(new Float32Array());  // Returns true\n+util.types.isFloat32Array(new Float64Array());  // Returns false\n+```\n+\n+### util.types.isFloat64Array(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Float64Array`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isFloat64Array(new ArrayBuffer());  // Returns false\n+util.types.isFloat64Array(new Uint8Array());  // Returns false\n+util.types.isFloat64Array(new Float64Array());  // Returns true\n+```\n+\n+### util.types.isGeneratorFunction(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a generator function.\n+Note that this only reports back what the JavaScript engine is seeing;\n+in particular, the return value may not match the original source code if\n+a transpilation tool was used.\n+\n+For example:\n+\n+```js\n+util.types.isGeneratorFunction(function foo() {});  // Returns false\n+util.types.isGeneratorFunction(function* foo() {});  // Returns true\n+```\n+\n+### util.types.isGeneratorObject(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a generator object as returned from a\n+built-in generator function.\n+Note that this only reports back what the JavaScript engine is seeing;\n+in particular, the return value may not match the original source code if\n+a transpilation tool was used.\n+\n+For example:\n+\n+```js\n+function* foo() {}\n+const generator = foo();\n+util.types.isGeneratorObject(generator);  // Returns true\n+```\n+\n+### util.types.isInt8Array(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Int8Array`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isInt8Array(new ArrayBuffer());  // Returns false\n+util.types.isInt8Array(new Int8Array());  // Returns true\n+util.types.isInt8Array(new Float64Array());  // Returns false\n+```\n+\n+### util.types.isInt16Array(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Int16Array`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isInt16Array(new ArrayBuffer());  // Returns false\n+util.types.isInt16Array(new Int16Array());  // Returns true\n+util.types.isInt16Array(new Float64Array());  // Returns false\n+```\n+\n+### util.types.isInt32Array(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Int32Array`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isInt32Array(new ArrayBuffer());  // Returns false\n+util.types.isInt32Array(new Int32Array());  // Returns true\n+util.types.isInt32Array(new Float64Array());  // Returns false\n+```\n+\n+### util.types.isMap(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Map`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isMap(new Map());  // Returns true\n+```\n+\n+### util.types.isMapIterator(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is an iterator returned for a built-in\n+[`Map`][] instance.\n+\n+For example:\n+\n+```js\n+const map = new Map();\n+util.types.isMapIterator(map.keys());  // Returns true\n+util.types.isMapIterator(map.values());  // Returns true\n+util.types.isMapIterator(map.entries());  // Returns true\n+util.types.isMapIterator(map[Symbol.iterator]());  // Returns true\n+```\n+\n+### util.types.isNativeError(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is an instance of a built-in [`Error`][] type.\n+\n+For example:\n+\n+```js\n+util.types.isNativeError(new Error());  // Returns true\n+util.types.isNativeError(new TypeError());  // Returns true\n+util.types.isNativeError(new RangeError());  // Returns true\n+```\n+\n+### util.types.isNumberObject(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a number object, e.g. created\n+by `new Number()`.\n+\n+For example:\n+\n+```js\n+util.types.isNumberObject(0);  // Returns false\n+util.types.isNumberObject(new Number(0));   // Returns true\n+```\n+\n+### util.types.isPromise(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Promise`][].\n+\n+For example:\n+\n+```js\n+util.types.isPromise(Promise.resolve(42));  // Returns true\n+```\n+\n+### util.types.isProxy(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a [`Proxy`][] instance.\n+\n+For example:\n+\n+```js\n+const target = {};\n+const proxy = new Proxy(target, {});\n+util.types.isProxy(target);  // Returns false\n+util.types.isProxy(proxy);  // Returns true\n+```\n+\n+### util.types.isRegExp(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a regular expression object.\n+\n+For example:\n+\n+```js\n+util.types.isRegExp(/abc/);  // Returns true\n+util.types.isRegExp(new RegExp('abc'));  // Returns true\n+```\n+\n+### util.types.isSet(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Set`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isSet(new Set());  // Returns true\n+```\n+\n+### util.types.isSetIterator(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is an iterator returned for a built-in\n+[`Set`][] instance.\n+\n+For example:\n+\n+```js\n+const set = new Set();\n+util.types.isSetIterator(set.keys());  // Returns true\n+util.types.isSetIterator(set.values());  // Returns true\n+util.types.isSetIterator(set.entries());  // Returns true\n+util.types.isSetIterator(set[Symbol.iterator]());  // Returns true\n+```\n+\n+### util.types.isSharedArrayBuffer(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`SharedArrayBuffer`][] instance.\n+This does *not* include [`ArrayBuffer`][] instances. Usually, it is\n+desirable to test for both; See [`util.types.isAnyArrayBuffer()`][] for that.\n+\n+For example:\n+\n+```js\n+util.types.isSharedArrayBuffer(new ArrayBuffer());  // Returns false\n+util.types.isSharedArrayBuffer(new SharedArrayBuffer());  // Returns true\n+```\n+\n+### util.types.isStringObject(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a string object, e.g. created\n+by `new String()`.\n+\n+For example:\n+\n+```js\n+util.types.isStringObject('foo');  // Returns false\n+util.types.isStringObject(new String('foo'));   // Returns true\n+```\n+\n+### util.types.isSymbolObject(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a symbol object, created\n+by calling `Object()` on a `Symbol` primitive.\n+\n+For example:\n+\n+```js\n+const symbol = Symbol('foo');\n+util.types.isSymbolObject(symbol);  // Returns false\n+util.types.isSymbolObject(Object(symbol));   // Returns true\n+```\n+\n+### util.types.isTypedArray(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`TypedArray`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isTypedArray(new ArrayBuffer());  // Returns false\n+util.types.isTypedArray(new Uint8Array());  // Returns true\n+util.types.isTypedArray(new Float64Array());  // Returns true\n+```\n+\n+See also [`ArrayBuffer.isView()`][].\n+\n+### util.types.isUint8Array(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Uint8Array`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isUint8Array(new ArrayBuffer());  // Returns false\n+util.types.isUint8Array(new Uint8Array());  // Returns true\n+util.types.isUint8Array(new Float64Array());  // Returns false\n+```\n+\n+### util.types.isUint8ClampedArray(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Uint8ClampedArray`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isUint8ClampedArray(new ArrayBuffer());  // Returns false\n+util.types.isUint8ClampedArray(new Uint8ClampedArray());  // Returns true\n+util.types.isUint8ClampedArray(new Float64Array());  // Returns false\n+```\n+\n+### util.types.isUint16Array(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Uint16Array`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isUint16Array(new ArrayBuffer());  // Returns false\n+util.types.isUint16Array(new Uint16Array());  // Returns true\n+util.types.isUint16Array(new Float64Array());  // Returns false\n+```\n+\n+### util.types.isUint32Array(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`Uint32Array`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isUint32Array(new ArrayBuffer());  // Returns false\n+util.types.isUint32Array(new Uint32Array());  // Returns true\n+util.types.isUint32Array(new Float64Array());  // Returns false\n+```\n+\n+### util.types.isWeakMap(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`WeakMap`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isWeakMap(new WeakMap());  // Returns true\n+```\n+\n+### util.types.isWeakSet(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`WeakSet`][] instance.\n+\n+For example:\n+\n+```js\n+util.types.isWeakSet(new WeakSet());  // Returns true\n+```\n+\n+### util.types.isWebAssemblyCompiledModule(value)\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+Returns `true` if the value is a built-in [`WebAssembly.Module`][] instance.\n+\n+For example:\n+\n+```js\n+const module = new WebAssembly.Module(wasmBuffer);\n+util.types.isWebAssemblyCompiledModule(module);  // Returns true\n+```\n+\n+\n ## Deprecated APIs\n \n The following APIs have been deprecated and should no longer be used. Existing\n@@ -1014,7 +1563,7 @@ added: v0.6.0\n deprecated: v4.0.0\n -->\n \n-> Stability: 0 - Deprecated\n+> Stability: 0 - Deprecated: Use [`util.types.isDate()`][] instead.\n \n * `object` {any}\n * Returns: {boolean}\n@@ -1038,7 +1587,7 @@ added: v0.6.0\n deprecated: v4.0.0\n -->\n \n-> Stability: 0 - Deprecated\n+> Stability: 0 - Deprecated: Use [`util.types.isNativeError()`][] instead.\n \n * `object` {any}\n * Returns: {boolean}\n@@ -1385,14 +1934,42 @@ Deprecated predecessor of `console.log`.\n \n [`'uncaughtException'`]: process.html#process_event_uncaughtexception\n [`Array.isArray()`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\n-[`Buffer.isBuffer()`]: buffer.html#buffer_class_method_buffer_isbuffer_obj\n-[`Error`]: errors.html#errors_class_error\n-[`Object.assign()`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n+[`ArrayBuffer`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\n+[`ArrayBuffer.isView()`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/isView\n+[async function]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\n [`assert.deepStrictEqual()`]: assert.html#assert_assert_deepstrictequal_actual_expected_message\n+[`Buffer.isBuffer()`]: buffer.html#buffer_class_method_buffer_isbuffer_obj\n [`console.error()`]: console.html#console_console_error_data_args\n [`console.log()`]: console.html#console_console_log_data_args\n+[`DataView`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView\n+[`Date`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date\n+[`Error`]: errors.html#errors_class_error\n+[`Float32Array`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array\n+[`Float64Array`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array\n+[`Int8Array`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array\n+[`Int16Array`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array\n+[`Int32Array`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array\n+[`Map`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\n+[`Object.assign()`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n+[`Promise`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n+[`Proxy`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\n+[`Set`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\n+[`SharedArrayBuffer`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer\n+[`TypedArray`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\n [`util.inspect()`]: #util_util_inspect_object_options\n [`util.promisify()`]: #util_util_promisify_original\n+[`util.types.isAnyArrayBuffer()`]: #util_util_types_isanyarraybuffer_value\n+[`util.types.isArrayBuffer()`]: #util_util_types_isarraybuffer_value\n+[`util.types.isDate()`]: #util_util_types_isdate_value\n+[`util.types.isNativeError()`]: #util_util_types_isnativeerror_value\n+[`util.types.isSharedArrayBuffer()`]: #util_util_types_issharedarraybuffer_value\n+[`Uint8Array`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\n+[`Uint8ClampedArray`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray\n+[`Uint16Array`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array\n+[`Uint32Array`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array\n+[`WeakMap`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\n+[`WeakSet`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet\n+[`WebAssembly.Module`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Module\n [Custom inspection functions on Objects]: #util_custom_inspection_functions_on_objects\n [Custom promisified functions]: #util_custom_promisified_functions\n [Customizing `util.inspect` colors]: #util_customizing_util_inspect_colors"
        },
        {
            "sha": "add3303824b6870e52dc09e04bfe5c454af8260d",
            "filename": "lib/buffer.js",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Fbuffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Fbuffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fbuffer.js?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -37,7 +37,14 @@ const {\n   kMaxLength,\n   kStringMaxLength\n } = process.binding('buffer');\n-const { isAnyArrayBuffer } = process.binding('util');\n+// We cannot use internalBinding unconditionally here because of the way\n+// that test/parallel/test-buffer-bindingobj-no-zerofill.js is written.\n+let isAnyArrayBuffer;\n+try {\n+  isAnyArrayBuffer = internalBinding('types').isAnyArrayBuffer;\n+} catch (e) {\n+  isAnyArrayBuffer = require('util').types.isAnyArrayBuffer;\n+}\n const {\n   customInspectSymbol,\n   normalizeEncoding,"
        },
        {
            "sha": "2444c117816ed4cd26747b7fa0d98c0a6809ff0b",
            "filename": "lib/internal/bootstrap_node.js",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Finternal%2Fbootstrap_node.js",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Finternal%2Fbootstrap_node.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap_node.js?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -110,6 +110,28 @@\n       NativeModule.require('internal/process/modules').setup();\n     }\n \n+    {\n+      // Install legacy getters on the `util` binding for typechecking.\n+      // TODO(addaleax): Turn into a full runtime deprecation.\n+      const { pendingDeprecation } = process.binding('config');\n+      const { deprecate } = NativeModule.require('internal/util');\n+      const utilBinding = process.binding('util');\n+      const types = internalBinding('types');\n+      for (const name of [\n+        'isArrayBuffer', 'isArrayBufferView', 'isAsyncFunction',\n+        'isDataView', 'isDate', 'isExternal', 'isMap', 'isMapIterator',\n+        'isNativeError', 'isPromise', 'isRegExp', 'isSet', 'isSetIterator',\n+        'isTypedArray', 'isUint8Array', 'isAnyArrayBuffer'\n+      ]) {\n+        utilBinding[name] = pendingDeprecation ?\n+          deprecate(types[name],\n+                    'Accessing native typechecking bindings of Node ' +\n+                    'directly is deprecated. ' +\n+                    `Please use \\`util.types.${name}\\` instead.`,\n+                    'DEP0XXX') :\n+          types[name];\n+      }\n+    }\n \n     // There are various modes that Node can run in. The most common two\n     // are running from a script and running the REPL - but there are a few"
        },
        {
            "sha": "f80bdcdf2b49dfaba94465e82df3b2123cc1f6d6",
            "filename": "lib/internal/encoding.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Finternal%2Fencoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Finternal%2Fencoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fencoding.js?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -19,7 +19,7 @@ const { isArrayBufferView } = require('internal/util/types');\n \n const {\n   isArrayBuffer\n-} = process.binding('util');\n+} = internalBinding('types');\n \n const {\n   encodeUtf8String"
        },
        {
            "sha": "23d8488fbdbb2cd845a391850623a79f950da8dc",
            "filename": "lib/internal/util/comparisons.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Finternal%2Futil%2Fcomparisons.js",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Finternal%2Futil%2Fcomparisons.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil%2Fcomparisons.js?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -2,7 +2,7 @@\n \n const { compare } = process.binding('buffer');\n const { isArrayBufferView } = require('internal/util/types');\n-const { isDate, isMap, isRegExp, isSet } = process.binding('util');\n+const { isDate, isMap, isRegExp, isSet } = internalBinding('types');\n \n function objectToString(o) {\n   return Object.prototype.toString.call(o);"
        },
        {
            "sha": "4df62554d134ed5905e322b945c7cd17234a7859",
            "filename": "lib/internal/util/types.js",
            "status": "modified",
            "additions": 41,
            "deletions": 1,
            "changes": 42,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Finternal%2Futil%2Ftypes.js",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Finternal%2Futil%2Ftypes.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil%2Ftypes.js?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -29,8 +29,48 @@ function isUint8Array(value) {\n   return TypedArrayProto_toStringTag(value) === 'Uint8Array';\n }\n \n+function isUint8ClampedArray(value) {\n+  return TypedArrayProto_toStringTag(value) === 'Uint8ClampedArray';\n+}\n+\n+function isUint16Array(value) {\n+  return TypedArrayProto_toStringTag(value) === 'Uint16Array';\n+}\n+\n+function isUint32Array(value) {\n+  return TypedArrayProto_toStringTag(value) === 'Uint32Array';\n+}\n+\n+function isInt8Array(value) {\n+  return TypedArrayProto_toStringTag(value) === 'Int8Array';\n+}\n+\n+function isInt16Array(value) {\n+  return TypedArrayProto_toStringTag(value) === 'Int16Array';\n+}\n+\n+function isInt32Array(value) {\n+  return TypedArrayProto_toStringTag(value) === 'Int32Array';\n+}\n+\n+function isFloat32Array(value) {\n+  return TypedArrayProto_toStringTag(value) === 'Float32Array';\n+}\n+\n+function isFloat64Array(value) {\n+  return TypedArrayProto_toStringTag(value) === 'Float64Array';\n+}\n+\n module.exports = {\n   isArrayBufferView,\n   isTypedArray,\n-  isUint8Array\n+  isUint8Array,\n+  isUint8ClampedArray,\n+  isUint16Array,\n+  isUint32Array,\n+  isInt8Array,\n+  isInt16Array,\n+  isInt32Array,\n+  isFloat32Array,\n+  isFloat64Array\n };"
        },
        {
            "sha": "888c005f2f60efc186f0737b558a5b63009bd067",
            "filename": "lib/util.js",
            "status": "modified",
            "additions": 9,
            "deletions": 6,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/lib%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Futil.js?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -30,6 +30,13 @@ const { previewMapIterator, previewSetIterator } = require('internal/v8');\n const {\n   getPromiseDetails,\n   getProxyDetails,\n+  kPending,\n+  kRejected,\n+} = process.binding('util');\n+\n+const types = internalBinding('types');\n+Object.assign(types, require('internal/util/types'));\n+const {\n   isAnyArrayBuffer,\n   isDataView,\n   isExternal,\n@@ -40,13 +47,8 @@ const {\n   isSetIterator,\n   isRegExp,\n   isDate,\n-  kPending,\n-  kRejected,\n-} = process.binding('util');\n-\n-const {\n   isTypedArray\n-} = require('internal/util/types');\n+} = types;\n \n const {\n   isDeepStrictEqual\n@@ -1149,6 +1151,7 @@ module.exports = exports = {\n   promisify,\n   TextDecoder,\n   TextEncoder,\n+  types,\n \n   // Deprecated Old Stuff\n   debug: deprecate(debug,"
        },
        {
            "sha": "977cef33ffbbbb1ca9416df7c805a0605466c1be",
            "filename": "node.gyp",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/node.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/node.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/node.gyp?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -320,6 +320,7 @@\n         'src/node_postmortem_metadata.cc',\n         'src/node_serdes.cc',\n         'src/node_trace_events.cc',\n+        'src/node_types.cc',\n         'src/node_url.cc',\n         'src/node_util.cc',\n         'src/node_v8.cc',"
        },
        {
            "sha": "43c2b5f112bac7d19df4d9a07bc4b3200bf068d5",
            "filename": "src/node_internals.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/src%2Fnode_internals.h",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/src%2Fnode_internals.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_internals.h?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -126,6 +126,7 @@ struct sockaddr;\n     V(timer_wrap)                                                             \\\n     V(trace_events)                                                           \\\n     V(tty_wrap)                                                               \\\n+    V(types)                                                                  \\\n     V(udp_wrap)                                                               \\\n     V(url)                                                                    \\\n     V(util)                                                                   \\"
        },
        {
            "sha": "4b9f86f0d54d8cb774f5d03b253b91c21ec96d76",
            "filename": "src/node_types.cc",
            "status": "added",
            "additions": 69,
            "deletions": 0,
            "changes": 69,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/src%2Fnode_types.cc",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/src%2Fnode_types.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_types.cc?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -0,0 +1,69 @@\n+#include \"node_internals.h\"\n+\n+using v8::Context;\n+using v8::FunctionCallbackInfo;\n+using v8::Local;\n+using v8::Object;\n+using v8::Value;\n+\n+namespace node {\n+namespace {\n+\n+#define VALUE_METHOD_MAP(V)                                                   \\\n+  V(External)                                                                 \\\n+  V(Date)                                                                     \\\n+  V(ArgumentsObject)                                                          \\\n+  V(BooleanObject)                                                            \\\n+  V(NumberObject)                                                             \\\n+  V(StringObject)                                                             \\\n+  V(SymbolObject)                                                             \\\n+  V(NativeError)                                                              \\\n+  V(RegExp)                                                                   \\\n+  V(AsyncFunction)                                                            \\\n+  V(GeneratorFunction)                                                        \\\n+  V(GeneratorObject)                                                          \\\n+  V(Promise)                                                                  \\\n+  V(Map)                                                                      \\\n+  V(Set)                                                                      \\\n+  V(MapIterator)                                                              \\\n+  V(SetIterator)                                                              \\\n+  V(WeakMap)                                                                  \\\n+  V(WeakSet)                                                                  \\\n+  V(ArrayBuffer)                                                              \\\n+  V(DataView)                                                                 \\\n+  V(SharedArrayBuffer)                                                        \\\n+  V(Proxy)                                                                    \\\n+  V(WebAssemblyCompiledModule)                                                \\\n+\n+\n+#define V(type) \\\n+  static void Is##type(const FunctionCallbackInfo<Value>& args) {             \\\n+    args.GetReturnValue().Set(args[0]->Is##type());                           \\\n+  }\n+\n+  VALUE_METHOD_MAP(V)\n+#undef V\n+\n+static void IsAnyArrayBuffer(const FunctionCallbackInfo<Value>& args) {\n+  args.GetReturnValue().Set(\n+    args[0]->IsArrayBuffer() || args[0]->IsSharedArrayBuffer());\n+}\n+\n+void InitializeTypes(Local<Object> target,\n+                     Local<Value> unused,\n+                     Local<Context> context) {\n+  Environment* env = Environment::GetCurrent(context);\n+\n+#define V(type) env->SetMethod(target,     \\\n+                               \"is\" #type, \\\n+                               Is##type);\n+  VALUE_METHOD_MAP(V)\n+#undef V\n+\n+  env->SetMethod(target, \"isAnyArrayBuffer\", IsAnyArrayBuffer);\n+}\n+\n+}  // anonymous namespace\n+}  // namespace node\n+\n+NODE_MODULE_CONTEXT_AWARE_INTERNAL(types, node::InitializeTypes)"
        },
        {
            "sha": "662809fb851a98b4e3f1ea2b9e1de0f0b7865760",
            "filename": "src/node_util.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 40,
            "changes": 40,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/src%2Fnode_util.cc",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/src%2Fnode_util.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_util.cc?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -17,40 +17,6 @@ using v8::Proxy;\n using v8::String;\n using v8::Value;\n \n-\n-#define VALUE_METHOD_MAP(V)                                                   \\\n-  V(isArrayBuffer, IsArrayBuffer)                                             \\\n-  V(isArrayBufferView, IsArrayBufferView)                                     \\\n-  V(isAsyncFunction, IsAsyncFunction)                                         \\\n-  V(isDataView, IsDataView)                                                   \\\n-  V(isDate, IsDate)                                                           \\\n-  V(isExternal, IsExternal)                                                   \\\n-  V(isMap, IsMap)                                                             \\\n-  V(isMapIterator, IsMapIterator)                                             \\\n-  V(isNativeError, IsNativeError)                                             \\\n-  V(isPromise, IsPromise)                                                     \\\n-  V(isRegExp, IsRegExp)                                                       \\\n-  V(isSet, IsSet)                                                             \\\n-  V(isSetIterator, IsSetIterator)                                             \\\n-  V(isTypedArray, IsTypedArray)                                               \\\n-  V(isUint8Array, IsUint8Array)\n-\n-\n-#define V(_, ucname) \\\n-  static void ucname(const FunctionCallbackInfo<Value>& args) {               \\\n-    CHECK_EQ(1, args.Length());                                               \\\n-    args.GetReturnValue().Set(args[0]->ucname());                             \\\n-  }\n-\n-  VALUE_METHOD_MAP(V)\n-#undef V\n-\n-static void IsAnyArrayBuffer(const FunctionCallbackInfo<Value>& args) {\n-  CHECK_EQ(1, args.Length());\n-  args.GetReturnValue().Set(\n-    args[0]->IsArrayBuffer() || args[0]->IsSharedArrayBuffer());\n-}\n-\n static void GetPromiseDetails(const FunctionCallbackInfo<Value>& args) {\n   // Return undefined if it's not a Promise.\n   if (!args[0]->IsPromise())\n@@ -191,12 +157,6 @@ void Initialize(Local<Object> target,\n                 Local<Context> context) {\n   Environment* env = Environment::GetCurrent(context);\n \n-#define V(lcname, ucname) env->SetMethod(target, #lcname, ucname);\n-  VALUE_METHOD_MAP(V)\n-#undef V\n-\n-  env->SetMethod(target, \"isAnyArrayBuffer\", IsAnyArrayBuffer);\n-\n #define V(name, _)                                                            \\\n   target->Set(context,                                                        \\\n               FIXED_ONE_BYTE_STRING(env->isolate(), #name),                   \\"
        },
        {
            "sha": "ea8adc6cb17d3a3da62504439b5823f4bfc5bfd3",
            "filename": "test/parallel/test-types.js",
            "status": "removed",
            "additions": 0,
            "deletions": 57,
            "changes": 57,
            "blob_url": "https://github.com/nodejs/node/blob/bd6e0be0dfbbf6d10f1f054c43b0b82f25c60b16/test%2Fparallel%2Ftest-types.js",
            "raw_url": "https://github.com/nodejs/node/raw/bd6e0be0dfbbf6d10f1f054c43b0b82f25c60b16/test%2Fparallel%2Ftest-types.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-types.js?ref=bd6e0be0dfbbf6d10f1f054c43b0b82f25c60b16",
            "patch": "@@ -1,57 +0,0 @@\n-'use strict';\n-\n-// Flags: --expose-internals\n-\n-require('../common');\n-const assert = require('assert');\n-const types = require('internal/util/types');\n-\n-const primitive = true;\n-const arrayBuffer = new ArrayBuffer();\n-const dataView = new DataView(arrayBuffer);\n-const int32Array = new Int32Array(arrayBuffer);\n-const uint8Array = new Uint8Array(arrayBuffer);\n-const buffer = Buffer.from(arrayBuffer);\n-\n-const fakeDataView = Object.create(DataView.prototype);\n-const fakeInt32Array = Object.create(Int32Array.prototype);\n-const fakeUint8Array = Object.create(Uint8Array.prototype);\n-const fakeBuffer = Object.create(Buffer.prototype);\n-\n-const stealthyDataView =\n-    Object.setPrototypeOf(new DataView(arrayBuffer), Uint8Array.prototype);\n-const stealthyInt32Array =\n-    Object.setPrototypeOf(new Int32Array(arrayBuffer), uint8Array);\n-const stealthyUint8Array =\n-    Object.setPrototypeOf(new Uint8Array(arrayBuffer), ArrayBuffer.prototype);\n-\n-const all = [\n-  primitive, arrayBuffer, dataView, int32Array, uint8Array, buffer,\n-  fakeDataView, fakeInt32Array, fakeUint8Array, fakeBuffer,\n-  stealthyDataView, stealthyInt32Array, stealthyUint8Array\n-];\n-\n-const expected = {\n-  isArrayBufferView: [\n-    dataView, int32Array, uint8Array, buffer,\n-    stealthyDataView, stealthyInt32Array, stealthyUint8Array\n-  ],\n-  isTypedArray: [\n-    int32Array, uint8Array, buffer, stealthyInt32Array, stealthyUint8Array\n-  ],\n-  isUint8Array: [\n-    uint8Array, buffer, stealthyUint8Array\n-  ]\n-};\n-\n-for (const testedFunc of Object.keys(expected)) {\n-  const func = types[testedFunc];\n-  const yup = [];\n-  for (const value of all) {\n-    if (func(value)) {\n-      yup.push(value);\n-    }\n-  }\n-  console.log('Testing', testedFunc);\n-  assert.deepStrictEqual(yup, expected[testedFunc]);\n-}"
        },
        {
            "sha": "f9211ddf4209b441b7b5a56f3d1eb85e9c8cf26e",
            "filename": "test/parallel/test-util-types.js",
            "status": "added",
            "additions": 162,
            "deletions": 0,
            "changes": 162,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/test%2Fparallel%2Ftest-util-types.js",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/test%2Fparallel%2Ftest-util-types.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util-types.js?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -0,0 +1,162 @@\n+/*global SharedArrayBuffer*/\n+'use strict';\n+const common = require('../common');\n+const fixtures = require('../common/fixtures');\n+const assert = require('assert');\n+const { types, inspect } = require('util');\n+const path = require('path');\n+const fs = require('fs');\n+const vm = require('vm');\n+const { JSStream } = process.binding('js_stream');\n+\n+common.crashOnUnhandledRejection();\n+\n+const external = (new JSStream())._externalStream;\n+const wasmBuffer = fixtures.readSync('test.wasm');\n+\n+for (const [ value, _method ] of [\n+  [ external, 'isExternal' ],\n+  [ new Date() ],\n+  [ (function() { return arguments; })(), 'isArgumentsObject' ],\n+  [ new Boolean(), 'isBooleanObject' ],\n+  [ new Number(), 'isNumberObject' ],\n+  [ new String(), 'isStringObject' ],\n+  [ Object(Symbol()), 'isSymbolObject' ],\n+  [ new Error(), 'isNativeError' ],\n+  [ new RegExp() ],\n+  [ async function() {}, 'isAsyncFunction' ],\n+  [ function*() {}, 'isGeneratorFunction' ],\n+  [ (function*() {})(), 'isGeneratorObject' ],\n+  [ Promise.resolve() ],\n+  [ new Map() ],\n+  [ new Set() ],\n+  [ (new Map())[Symbol.iterator](), 'isMapIterator' ],\n+  [ (new Set())[Symbol.iterator](), 'isSetIterator' ],\n+  [ new WeakMap() ],\n+  [ new WeakSet() ],\n+  [ new ArrayBuffer() ],\n+  [ new Uint8Array() ],\n+  [ new Uint8ClampedArray() ],\n+  [ new Uint16Array() ],\n+  [ new Uint32Array() ],\n+  [ new Int8Array() ],\n+  [ new Int16Array() ],\n+  [ new Int32Array() ],\n+  [ new Float32Array() ],\n+  [ new Float64Array() ],\n+  [ Object.defineProperty(new Uint8Array(),\n+                          Symbol.toStringTag,\n+                          { value: 'foo' }) ],\n+  [ new DataView(new ArrayBuffer()) ],\n+  [ new SharedArrayBuffer() ],\n+  [ new Proxy({}, {}), 'isProxy' ],\n+  [ new WebAssembly.Module(wasmBuffer), 'isWebAssemblyCompiledModule' ],\n+]) {\n+  const method = _method || `is${value.constructor.name}`;\n+  assert(method in types, `Missing ${method} for ${inspect(value)}`);\n+  assert(types[method](value), `Want ${inspect(value)} to match ${method}`);\n+\n+  for (const key of Object.keys(types)) {\n+    if ((types.isArrayBufferView(value) ||\n+         types.isAnyArrayBuffer(value)) && key.includes('Array')) {\n+      continue;\n+    }\n+\n+    assert.strictEqual(types[key](value),\n+                       key === method,\n+                       `${inspect(value)}: ${key}, ` +\n+                       `${method}, ${types[key](value)}`);\n+  }\n+}\n+\n+{\n+  assert(!types.isUint8Array({ [Symbol.toStringTag]: 'Uint8Array' }));\n+  assert(types.isUint8Array(vm.runInNewContext('new Uint8Array')));\n+}\n+\n+{\n+  const primitive = true;\n+  const arrayBuffer = new ArrayBuffer();\n+  const dataView = new DataView(arrayBuffer);\n+  const int32Array = new Int32Array(arrayBuffer);\n+  const uint8Array = new Uint8Array(arrayBuffer);\n+  const buffer = Buffer.from(arrayBuffer);\n+\n+  const fakeDataView = Object.create(DataView.prototype);\n+  const fakeInt32Array = Object.create(Int32Array.prototype);\n+  const fakeUint8Array = Object.create(Uint8Array.prototype);\n+  const fakeBuffer = Object.create(Buffer.prototype);\n+\n+  const stealthyDataView =\n+      Object.setPrototypeOf(new DataView(arrayBuffer), Uint8Array.prototype);\n+  const stealthyInt32Array =\n+      Object.setPrototypeOf(new Int32Array(arrayBuffer), uint8Array);\n+  const stealthyUint8Array =\n+      Object.setPrototypeOf(new Uint8Array(arrayBuffer), ArrayBuffer.prototype);\n+\n+  const all = [\n+    primitive, arrayBuffer, dataView, int32Array, uint8Array, buffer,\n+    fakeDataView, fakeInt32Array, fakeUint8Array, fakeBuffer,\n+    stealthyDataView, stealthyInt32Array, stealthyUint8Array\n+  ];\n+\n+  const expected = {\n+    isArrayBufferView: [\n+      dataView, int32Array, uint8Array, buffer,\n+      stealthyDataView, stealthyInt32Array, stealthyUint8Array\n+    ],\n+    isTypedArray: [\n+      int32Array, uint8Array, buffer, stealthyInt32Array, stealthyUint8Array\n+    ],\n+    isUint8Array: [\n+      uint8Array, buffer, stealthyUint8Array\n+    ]\n+  };\n+\n+  for (const testedFunc of Object.keys(expected)) {\n+    const func = types[testedFunc];\n+    const yup = [];\n+    for (const value of all) {\n+      if (func(value)) {\n+        yup.push(value);\n+      }\n+    }\n+    console.log('Testing', testedFunc);\n+    assert.deepStrictEqual(yup, expected[testedFunc]);\n+  }\n+}\n+\n+\n+// Try reading the v8.h header to verify completeness.\n+\n+let v8_h;\n+try {\n+  v8_h = fs.readFileSync(path.resolve(\n+    __dirname, '..', '..', 'deps', 'v8', 'include', 'v8.h'), 'utf8');\n+} catch (e) {\n+  // If loading the header fails, it should fail because we did not find it.\n+  assert.strictEqual(e.code, 'ENOENT');\n+  common.skip('Could not read v8.h');\n+  return;\n+}\n+\n+// Exclude a number of checks that make sense on the C++ side but have\n+// much faster/better JS equivalents, so they should not be exposed.\n+const exclude = [\n+  'Undefined', 'Null', 'NullOrUndefined', 'True', 'False', 'Name', 'String',\n+  'Symbol', 'Function', 'Array', 'Object', 'Boolean', 'Number', 'Int32',\n+  'Uint32'\n+];\n+\n+const start = v8_h.indexOf('Value : public Data');\n+const end = v8_h.indexOf('};', start);\n+const valueDefinition = v8_h.substr(start, end - start);\n+\n+const re = /bool Is(\\w+)\\(\\)/g;\n+let match;\n+while (match = re.exec(valueDefinition)) {\n+  if (exclude.includes(match[1]))\n+    continue;\n+  assert(`is${match[1]}` in types,\n+         `util.types should provide check for Is${match[1]}`);\n+}"
        },
        {
            "sha": "72d4b16b353102e7e9df8cc9e725cbb889afa62e",
            "filename": "test/parallel/test-util.js",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/b20af8088a4d5cccb1901d42107f6d9ca82d306f/test%2Fparallel%2Ftest-util.js",
            "raw_url": "https://github.com/nodejs/node/raw/b20af8088a4d5cccb1901d42107f6d9ca82d306f/test%2Fparallel%2Ftest-util.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util.js?ref=b20af8088a4d5cccb1901d42107f6d9ca82d306f",
            "patch": "@@ -25,7 +25,6 @@ const common = require('../common');\n const assert = require('assert');\n const util = require('util');\n const errors = require('internal/errors');\n-const binding = process.binding('util');\n const context = require('vm').runInNewContext;\n \n // isArray\n@@ -155,22 +154,23 @@ util.debug('test');\n util.error('test');\n \n {\n-  // binding.isNativeError()\n-  assert.strictEqual(binding.isNativeError(new Error()), true);\n-  assert.strictEqual(binding.isNativeError(new TypeError()), true);\n-  assert.strictEqual(binding.isNativeError(new SyntaxError()), true);\n-  assert.strictEqual(binding.isNativeError(new (context('Error'))()), true);\n-  assert.strictEqual(binding.isNativeError(new (context('TypeError'))()), true);\n-  assert.strictEqual(binding.isNativeError(new (context('SyntaxError'))()),\n+  assert.strictEqual(util.types.isNativeError(new Error()), true);\n+  assert.strictEqual(util.types.isNativeError(new TypeError()), true);\n+  assert.strictEqual(util.types.isNativeError(new SyntaxError()), true);\n+  assert.strictEqual(util.types.isNativeError(new (context('Error'))()),\n                      true);\n-  assert.strictEqual(binding.isNativeError({}), false);\n-  assert.strictEqual(binding.isNativeError({ name: 'Error', message: '' }),\n+  assert.strictEqual(util.types.isNativeError(new (context('TypeError'))()),\n+                     true);\n+  assert.strictEqual(util.types.isNativeError(new (context('SyntaxError'))()),\n+                     true);\n+  assert.strictEqual(util.types.isNativeError({}), false);\n+  assert.strictEqual(util.types.isNativeError({ name: 'Error', message: '' }),\n                      false);\n-  assert.strictEqual(binding.isNativeError([]), false);\n-  assert.strictEqual(binding.isNativeError(Object.create(Error.prototype)),\n+  assert.strictEqual(util.types.isNativeError([]), false);\n+  assert.strictEqual(util.types.isNativeError(Object.create(Error.prototype)),\n                      false);\n   assert.strictEqual(\n-    binding.isNativeError(new errors.Error('ERR_IPC_CHANNEL_CLOSED')),\n+    util.types.isNativeError(new errors.Error('ERR_IPC_CHANNEL_CLOSED')),\n     true\n   );\n }"
        }
    ],
    "stats": {
        "total": 1044,
        "additions": 919,
        "deletions": 125
    }
}