{
    "author": "BridgeAR",
    "message": "test: check all properties in common.expectsError\n\nThis makes sure all properties that are meant to be checked will\nactually be tested for.\n\nPR-URL: https://github.com/nodejs/node/pull/19722\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "2fef227a614a16f894b574ba9bfe84fc56b64681",
    "files": [
        {
            "sha": "4c4f0342f2f6ca017d2faf665ad2512b7427d572",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 10,
            "deletions": 13,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/2fef227a614a16f894b574ba9bfe84fc56b64681/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/2fef227a614a16f894b574ba9bfe84fc56b64681/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=2fef227a614a16f894b574ba9bfe84fc56b64681",
            "patch": "@@ -691,7 +691,6 @@ exports.expectsError = function expectsError(fn, settings, exact) {\n     fn = undefined;\n   }\n   function innerFn(error) {\n-    assert.strictEqual(error.code, settings.code);\n     if ('type' in settings) {\n       const type = settings.type;\n       if (type !== Error && !Error.isPrototypeOf(type)) {\n@@ -714,18 +713,16 @@ exports.expectsError = function expectsError(fn, settings, exact) {\n                `${error.message} does not match ${message}`);\n       }\n     }\n-    if ('name' in settings) {\n-      assert.strictEqual(error.name, settings.name);\n-    }\n-    if (error.constructor.name === 'AssertionError') {\n-      ['generatedMessage', 'actual', 'expected', 'operator'].forEach((key) => {\n-        if (key in settings) {\n-          const actual = error[key];\n-          const expected = settings[key];\n-          assert.strictEqual(actual, expected,\n-                             `${key}: expected ${expected}, not ${actual}`);\n-        }\n-      });\n+\n+    // Check all error properties.\n+    const keys = Object.keys(settings);\n+    for (const key of keys) {\n+      if (key === 'message' || key === 'type')\n+        continue;\n+      const actual = error[key];\n+      const expected = settings[key];\n+      assert.strictEqual(actual, expected,\n+                         `${key}: expected ${expected}, not ${actual}`);\n     }\n     return true;\n   }"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 10,
        "deletions": 13
    }
}