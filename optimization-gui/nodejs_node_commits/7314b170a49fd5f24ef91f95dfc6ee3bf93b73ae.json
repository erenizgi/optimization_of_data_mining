{
    "author": "devsnek",
    "message": "tools,bootstrap: preprocess gypi files to json\n\nPR-URL: https://github.com/nodejs/node/pull/19140\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>",
    "sha": "7314b170a49fd5f24ef91f95dfc6ee3bf93b73ae",
    "files": [
        {
            "sha": "d64fe9877198b8c8409d35ab90b8eb0b8100909e",
            "filename": "lib/internal/process.js",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/7314b170a49fd5f24ef91f95dfc6ee3bf93b73ae/lib%2Finternal%2Fprocess.js",
            "raw_url": "https://github.com/nodejs/node/raw/7314b170a49fd5f24ef91f95dfc6ee3bf93b73ae/lib%2Finternal%2Fprocess.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprocess.js?ref=7314b170a49fd5f24ef91f95dfc6ee3bf93b73ae",
            "patch": "@@ -128,16 +128,9 @@ function setupMemoryUsage() {\n function setupConfig(_source) {\n   // NativeModule._source\n   // used for `process.config`, but not a real module\n-  var config = _source.config;\n+  const config = _source.config;\n   delete _source.config;\n \n-  // strip the gyp comment line at the beginning\n-  config = config.split('\\n')\n-      .slice(1)\n-      .join('\\n')\n-      .replace(/\"/g, '\\\\\"')\n-      .replace(/'/g, '\"');\n-\n   process.config = JSON.parse(config, function(key, value) {\n     if (value === 'true') return true;\n     if (value === 'false') return false;"
        },
        {
            "sha": "bcfc4764a97df55bb9216ae2dd2502925d948177",
            "filename": "tools/js2c.py",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/7314b170a49fd5f24ef91f95dfc6ee3bf93b73ae/tools%2Fjs2c.py",
            "raw_url": "https://github.com/nodejs/node/raw/7314b170a49fd5f24ef91f95dfc6ee3bf93b73ae/tools%2Fjs2c.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fjs2c.py?ref=7314b170a49fd5f24ef91f95dfc6ee3bf93b73ae",
            "patch": "@@ -292,6 +292,11 @@ def JS2C(source, target):\n         split = split[1:]\n       name = '/'.join(split)\n \n+    # if its a gypi file we're going to want it as json\n+    # later on anyway, so get it out of the way now\n+    if name.endswith(\".gypi\"):\n+      lines = re.sub(r'#.*?\\n', '', lines)\n+      lines = re.sub(r'\\'', '\"', lines)\n     name = name.split('.', 1)[0]\n     var = name.replace('-', '_').replace('/', '_')\n     key = '%s_key' % var"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 6,
        "deletions": 8
    }
}