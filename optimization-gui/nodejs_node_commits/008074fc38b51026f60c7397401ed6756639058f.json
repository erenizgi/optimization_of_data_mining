{
    "author": "joyeecheung",
    "message": "process: document the bootstrap process in node.js\n\nPR-URL: https://github.com/nodejs/node/pull/26033\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "008074fc38b51026f60c7397401ed6756639058f",
    "files": [
        {
            "sha": "a8bc57cd1b30e89e4ae133074242926ecf87dc71",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 29,
            "deletions": 10,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/008074fc38b51026f60c7397401ed6756639058f/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/008074fc38b51026f60c7397401ed6756639058f/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=008074fc38b51026f60c7397401ed6756639058f",
            "patch": "@@ -1,19 +1,38 @@\n // Hello, and welcome to hacking node.js!\n //\n-// This file is invoked by node::LoadEnvironment in src/node.cc, and is\n-// responsible for bootstrapping the node.js core. As special caution is given\n-// to the performance of the startup process, many dependencies are invoked\n-// lazily.\n+// This file is invoked by `node::RunBootstrapping()` in `src/node.cc`, and is\n+// responsible for setting up node.js core before executing main scripts\n+// under `lib/internal/main/`.\n+// This file is currently run to bootstrap both the main thread and the worker\n+// threads. Some setups are conditional, controlled with isMainThread and\n+// ownsProcessState.\n+// This file is expected not to perform any asynchronous operations itself\n+// when being executed - those should be done in either\n+// `lib/internal/bootstrap/pre_execution.js` or in main scripts. The majority\n+// of the code here focus on setting up the global proxy and the process\n+// object in a synchronous manner.\n+// As special caution is given to the performance of the startup process,\n+// many dependencies are invoked lazily.\n //\n-// Before this file is run, lib/internal/bootstrap/loaders.js gets run first\n-// to bootstrap the internal binding and module loaders, including\n-// process.binding(), process._linkedBinding(), internalBinding() and\n-// NativeModule. And then { internalBinding, NativeModule } will be passed\n-// into this bootstrapper to bootstrap Node.js core.\n+// Scripts run before this file:\n+// - `lib/internal/bootstrap/context.js`: to setup the v8::Context with\n+//   Node.js-specific tweaks - this is also done in vm contexts.\n+// - `lib/internal/bootstrap/primordials.js`: to save copies of JavaScript\n+//   builtins that won't be affected by user land monkey-patching for internal\n+//   modules to use.\n+// - `lib/internal/bootstrap/loaders.js`: to setup internal binding and\n+//   module loaders, including `process.binding()`, `process._linkedBinding()`,\n+//   `internalBinding()` and `NativeModule`.\n+//\n+// After this file is run, one of the main scripts under `lib/internal/main/`\n+// will be selected by C++ to start the actual execution. The main scripts may\n+// run additional setups exported by `lib/internal/bootstrap/pre_execution.js`,\n+// depending on the execution mode.\n+\n 'use strict';\n \n // This file is compiled as if it's wrapped in a function with arguments\n-// passed by node::LoadEnvironment()\n+// passed by node::RunBootstrapping()\n /* global process, loaderExports, isMainThread, ownsProcessState */\n \n const { internalBinding, NativeModule } = loaderExports;"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 29,
        "deletions": 10
    }
}