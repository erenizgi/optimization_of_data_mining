{
    "author": "kakts",
    "message": "test: add some test cases for validateOffsetLengthWrite\n\nPR-URL: https://github.com/nodejs/node/pull/21195\nReviewed-By: Ujjwal Sharma <usharma1998@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>",
    "sha": "a9d9d7689d326d363c8d9546a80ba76f4cd0decb",
    "files": [
        {
            "sha": "9aca956bd505bf921fe2d66db92065928dadc251",
            "filename": "test/parallel/test-fs-util-validateoffsetlengthwrite.js",
            "status": "added",
            "additions": 55,
            "deletions": 0,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/a9d9d7689d326d363c8d9546a80ba76f4cd0decb/test%2Fparallel%2Ftest-fs-util-validateoffsetlengthwrite.js",
            "raw_url": "https://github.com/nodejs/node/raw/a9d9d7689d326d363c8d9546a80ba76f4cd0decb/test%2Fparallel%2Ftest-fs-util-validateoffsetlengthwrite.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-util-validateoffsetlengthwrite.js?ref=a9d9d7689d326d363c8d9546a80ba76f4cd0decb",
            "patch": "@@ -0,0 +1,55 @@\n+// Flags: --expose-internals\n+'use strict';\n+\n+const common = require('../common');\n+\n+const { validateOffsetLengthWrite } = require('internal/fs/utils');\n+const { kMaxLength } = require('buffer');\n+\n+// RangeError when offset > byteLength\n+{\n+  const offset = 100;\n+  const length = 100;\n+  const byteLength = 50;\n+  common.expectsError(\n+    () => validateOffsetLengthWrite(offset, length, byteLength),\n+    {\n+      code: 'ERR_OUT_OF_RANGE',\n+      type: RangeError,\n+      message: 'The value of \"offset\" is out of range. ' +\n+               `It must be <= ${byteLength}. Received ${offset}`\n+    }\n+  );\n+}\n+\n+// RangeError when byteLength > kMaxLength, and length > kMaxLength - offset .\n+{\n+  const offset = kMaxLength;\n+  const length = 100;\n+  const byteLength = kMaxLength + 1;\n+  common.expectsError(\n+    () => validateOffsetLengthWrite(offset, length, byteLength),\n+    {\n+      code: 'ERR_OUT_OF_RANGE',\n+      type: RangeError,\n+      message: 'The value of \"length\" is out of range. ' +\n+               `It must be <= ${kMaxLength - offset}. Received ${length}`\n+    }\n+  );\n+}\n+\n+// RangeError when byteLength < kMaxLength, and length > byteLength - offset .\n+{\n+  const offset = kMaxLength - 150;\n+  const length = 200;\n+  const byteLength = kMaxLength - 100;\n+  common.expectsError(\n+    () => validateOffsetLengthWrite(offset, length, byteLength),\n+    {\n+      code: 'ERR_OUT_OF_RANGE',\n+      type: RangeError,\n+      message: 'The value of \"length\" is out of range. ' +\n+               `It must be <= ${byteLength - offset}. Received ${length}`\n+    }\n+  );\n+}"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 55,
        "deletions": 0
    }
}