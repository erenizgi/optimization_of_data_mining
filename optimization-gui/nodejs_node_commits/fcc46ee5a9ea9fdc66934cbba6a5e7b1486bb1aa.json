{
    "author": "humphd",
    "message": "test: increase test coverage for fs/promises.js\n\nPR-URL: https://github.com/nodejs/node/pull/19811\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>",
    "sha": "fcc46ee5a9ea9fdc66934cbba6a5e7b1486bb1aa",
    "files": [
        {
            "sha": "992f30afec233efd3016977a33be1ee54c3495ad",
            "filename": "test/parallel/test-fs-promises.js",
            "status": "modified",
            "additions": 50,
            "deletions": 5,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/fcc46ee5a9ea9fdc66934cbba6a5e7b1486bb1aa/test%2Fparallel%2Ftest-fs-promises.js",
            "raw_url": "https://github.com/nodejs/node/raw/fcc46ee5a9ea9fdc66934cbba6a5e7b1486bb1aa/test%2Fparallel%2Ftest-fs-promises.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-promises.js?ref=fcc46ee5a9ea9fdc66934cbba6a5e7b1486bb1aa",
            "patch": "@@ -87,24 +87,60 @@ function verifyStatObject(stat) {\n     stats = await stat(dest);\n     verifyStatObject(stats);\n \n+    stats = await handle.stat();\n+    verifyStatObject(stats);\n+\n     await fdatasync(handle);\n+    await handle.datasync();\n     await fsync(handle);\n+    await handle.sync();\n \n-    const buf = Buffer.from('hello world');\n-\n+    const buf = Buffer.from('hello fsPromises');\n+    const bufLen = buf.length;\n     await write(handle, buf);\n-\n-    const ret = await read(handle, Buffer.alloc(11), 0, 11, 0);\n-    assert.strictEqual(ret.bytesRead, 11);\n+    const ret = await read(handle, Buffer.alloc(bufLen), 0, bufLen, 0);\n+    assert.strictEqual(ret.bytesRead, bufLen);\n     assert.deepStrictEqual(ret.buffer, buf);\n \n+    const buf2 = Buffer.from('hello FileHandle');\n+    const buf2Len = buf2.length;\n+    await handle.write(buf2, 0, buf2Len, 0);\n+    const ret2 = await handle.read(Buffer.alloc(buf2Len), 0, buf2Len, 0);\n+    assert.strictEqual(ret2.bytesRead, buf2Len);\n+    assert.deepStrictEqual(ret2.buffer, buf2);\n+\n     await chmod(dest, 0o666);\n     await fchmod(handle, 0o666);\n+    await handle.chmod(0o666);\n+\n+    // `mode` can't be > 0o777\n+    assert.rejects(\n+      async () => chmod(handle, (0o777 + 1)),\n+      {\n+        code: 'ERR_INVALID_ARG_TYPE',\n+        name: 'TypeError [ERR_INVALID_ARG_TYPE]'\n+      }\n+    );\n+    assert.rejects(\n+      async () => fchmod(handle, (0o777 + 1)),\n+      {\n+        code: 'ERR_OUT_OF_RANGE',\n+        name: 'RangeError [ERR_OUT_OF_RANGE]'\n+      }\n+    );\n+    assert.rejects(\n+      async () => handle.chmod(handle, (0o777 + 1)),\n+      {\n+        code: 'ERR_INVALID_ARG_TYPE',\n+        name: 'TypeError [ERR_INVALID_ARG_TYPE]'\n+      }\n+    );\n \n     await utimes(dest, new Date(), new Date());\n \n     try {\n       await futimes(handle, new Date(), new Date());\n+      await handle.utimes(new Date(), new Date());\n     } catch (err) {\n       // Some systems do not have futimes. If there is an error,\n       // expect it to be ENOSYS\n@@ -152,6 +188,15 @@ function verifyStatObject(stat) {\n     await rmdir(newdir);\n \n     await mkdtemp(path.resolve(tmpDir, 'FOO'));\n+    assert.rejects(\n+      // mkdtemp() expects to get a string prefix.\n+      async () => mkdtemp(1),\n+      {\n+        code: 'ERR_INVALID_ARG_TYPE',\n+        name: 'TypeError [ERR_INVALID_ARG_TYPE]'\n+      }\n+    );\n+\n   }\n \n   doTest().then(common.mustCall());"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 50,
        "deletions": 5
    }
}