{
    "author": "targos",
    "message": "build: disable V8 untrusted code mitigations\n\nRefs: https://github.com/v8/v8/wiki/Untrusted-code-mitigations\n\nPR-URL: https://github.com/nodejs/node/pull/19222\nReviewed-By: Fedor Indutny <fedor.indutny@gmail.com>\nReviewed-By: Yang Guo <yangguo@chromium.org>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Benedikt Meurer <benedikt.meurer@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Gibson Fahnestock <gibfahn@gmail.com>",
    "sha": "c6ae8a28109fc19ea30a5d785b2215345564c0bb",
    "files": [
        {
            "sha": "2d2bc4f5d5664e021b7e9dc8f6c35c61573b2ed6",
            "filename": "common.gypi",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/c6ae8a28109fc19ea30a5d785b2215345564c0bb/common.gypi",
            "raw_url": "https://github.com/nodejs/node/raw/c6ae8a28109fc19ea30a5d785b2215345564c0bb/common.gypi",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/common.gypi?ref=c6ae8a28109fc19ea30a5d785b2215345564c0bb",
            "patch": "@@ -35,6 +35,10 @@\n     # Don't bake anything extra into the snapshot.\n     'v8_use_external_startup_data%': 0,\n \n+    # Disable V8 untrusted code mitigations.\n+    # See https://github.com/v8/v8/wiki/Untrusted-code-mitigations\n+    'v8_untrusted_code_mitigations': 'false',\n+\n     # Some STL containers (e.g. std::vector) do not preserve ABI compatibility\n     # between debug and non-debug mode.\n     'disable_glibcxx_debug': 1,"
        },
        {
            "sha": "c9d89cd5a66e18f44be7f8e5834f2c997351dba0",
            "filename": "test/parallel/test-v8-untrusted-code-mitigations.js",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/c6ae8a28109fc19ea30a5d785b2215345564c0bb/test%2Fparallel%2Ftest-v8-untrusted-code-mitigations.js",
            "raw_url": "https://github.com/nodejs/node/raw/c6ae8a28109fc19ea30a5d785b2215345564c0bb/test%2Fparallel%2Ftest-v8-untrusted-code-mitigations.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-v8-untrusted-code-mitigations.js?ref=c6ae8a28109fc19ea30a5d785b2215345564c0bb",
            "patch": "@@ -0,0 +1,18 @@\n+'use strict';\n+\n+require('../common');\n+const assert = require('assert');\n+const { execFileSync } = require('child_process');\n+\n+// This test checks that untrusted code mitigations in V8 are disabled\n+// by default.\n+\n+const v8Options = execFileSync(process.execPath, ['--v8-options']).toString();\n+\n+const untrustedFlag = v8Options.indexOf('--untrusted-code-mitigations');\n+assert.notStrictEqual(untrustedFlag, -1);\n+\n+const nextFlag = v8Options.indexOf('--', untrustedFlag + 2);\n+const slice = v8Options.substring(untrustedFlag, nextFlag);\n+\n+assert(slice.match(/type: bool  default: false/));"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 22,
        "deletions": 0
    }
}