{
    "author": "gahaas",
    "message": "src: replace deprecated uses of FunctionTemplate::GetFunction\n\nPR-URL: https://github.com/nodejs/node/pull/22993\nReviewed-By: Michaël Zasso <targos@protonmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ujjwal Sharma <usharma1998@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Eugene Ostroukhov <eostroukhov@google.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "7dde560beb736e82b7867130a2d5824544122a60",
    "files": [
        {
            "sha": "b2c52d5128b5bccf0af6daea6482186f7bdf4fff",
            "filename": "doc/api/addons.md",
            "status": "modified",
            "additions": 10,
            "deletions": 5,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/doc%2Fapi%2Faddons.md",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/doc%2Fapi%2Faddons.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Faddons.md?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -635,6 +635,7 @@ functions and returning those back to JavaScript:\n \n namespace demo {\n \n+using v8::Context;\n using v8::Function;\n using v8::FunctionCallbackInfo;\n using v8::FunctionTemplate;\n@@ -652,8 +653,9 @@ void MyFunction(const FunctionCallbackInfo<Value>& args) {\n void CreateFunction(const FunctionCallbackInfo<Value>& args) {\n   Isolate* isolate = args.GetIsolate();\n \n+  Local<Context> context = isolate->GetCurrentContext();\n   Local<FunctionTemplate> tpl = FunctionTemplate::New(isolate, MyFunction);\n-  Local<Function> fn = tpl->GetFunction();\n+  Local<Function> fn = tpl->GetFunction(context).ToLocalChecked();\n \n   // omit this to make it anonymous\n   fn->SetName(String::NewFromUtf8(isolate, \"theFunction\"));\n@@ -777,9 +779,10 @@ void MyObject::Init(Local<Object> exports) {\n   // Prototype\n   NODE_SET_PROTOTYPE_METHOD(tpl, \"plusOne\", PlusOne);\n \n-  constructor.Reset(isolate, tpl->GetFunction());\n+  Local<Context> context = isolate->GetCurrentContext();\n+  constructor.Reset(isolate, tpl->GetFunction(context).ToLocalChecked());\n   exports->Set(String::NewFromUtf8(isolate, \"MyObject\"),\n-               tpl->GetFunction());\n+               tpl->GetFunction(context).ToLocalChecked());\n }\n \n void MyObject::New(const FunctionCallbackInfo<Value>& args) {\n@@ -969,7 +972,8 @@ void MyObject::Init(Isolate* isolate) {\n   // Prototype\n   NODE_SET_PROTOTYPE_METHOD(tpl, \"plusOne\", PlusOne);\n \n-  constructor.Reset(isolate, tpl->GetFunction());\n+  Local<Context> context = isolate->GetCurrentContext();\n+  constructor.Reset(isolate, tpl->GetFunction(context).ToLocalChecked());\n }\n \n void MyObject::New(const FunctionCallbackInfo<Value>& args) {\n@@ -1177,7 +1181,8 @@ void MyObject::Init(Isolate* isolate) {\n   tpl->SetClassName(String::NewFromUtf8(isolate, \"MyObject\"));\n   tpl->InstanceTemplate()->SetInternalFieldCount(1);\n \n-  constructor.Reset(isolate, tpl->GetFunction());\n+  Local<Context> context = isolate->GetCurrentContext();\n+  constructor.Reset(isolate, tpl->GetFunction(context).ToLocalChecked());\n }\n \n void MyObject::New(const FunctionCallbackInfo<Value>& args) {"
        },
        {
            "sha": "a967414aecdec269c4508426a3849fdd370f67b9",
            "filename": "src/cares_wrap.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fcares_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fcares_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fcares_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -2224,23 +2224,23 @@ void Initialize(Local<Object> target,\n   Local<String> addrInfoWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"GetAddrInfoReqWrap\");\n   aiw->SetClassName(addrInfoWrapString);\n-  target->Set(addrInfoWrapString, aiw->GetFunction());\n+  target->Set(addrInfoWrapString, aiw->GetFunction(context).ToLocalChecked());\n \n   Local<FunctionTemplate> niw =\n       BaseObject::MakeLazilyInitializedJSTemplate(env);\n   AsyncWrap::AddWrapMethods(env, niw);\n   Local<String> nameInfoWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"GetNameInfoReqWrap\");\n   niw->SetClassName(nameInfoWrapString);\n-  target->Set(nameInfoWrapString, niw->GetFunction());\n+  target->Set(nameInfoWrapString, niw->GetFunction(context).ToLocalChecked());\n \n   Local<FunctionTemplate> qrw =\n       BaseObject::MakeLazilyInitializedJSTemplate(env);\n   AsyncWrap::AddWrapMethods(env, qrw);\n   Local<String> queryWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"QueryReqWrap\");\n   qrw->SetClassName(queryWrapString);\n-  target->Set(queryWrapString, qrw->GetFunction());\n+  target->Set(queryWrapString, qrw->GetFunction(context).ToLocalChecked());\n \n   Local<FunctionTemplate> channel_wrap =\n       env->NewFunctionTemplate(ChannelWrap::New);\n@@ -2267,7 +2267,8 @@ void Initialize(Local<Object> target,\n   Local<String> channelWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"ChannelWrap\");\n   channel_wrap->SetClassName(channelWrapString);\n-  target->Set(channelWrapString, channel_wrap->GetFunction());\n+  target->Set(channelWrapString,\n+              channel_wrap->GetFunction(context).ToLocalChecked());\n }\n \n }  // anonymous namespace"
        },
        {
            "sha": "e4a635c84d3a180c052ba9f095af0dea51affcad",
            "filename": "src/env-inl.h",
            "status": "modified",
            "additions": 10,
            "deletions": 6,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fenv-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fenv-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv-inl.h?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -715,13 +715,15 @@ inline v8::Local<v8::FunctionTemplate>\n inline void Environment::SetMethod(v8::Local<v8::Object> that,\n                                    const char* name,\n                                    v8::FunctionCallback callback) {\n+  v8::Local<v8::Context> context = isolate()->GetCurrentContext();\n   v8::Local<v8::Function> function =\n-      NewFunctionTemplate(callback,\n-                          v8::Local<v8::Signature>(),\n+      NewFunctionTemplate(callback, v8::Local<v8::Signature>(),\n                           // TODO(TimothyGu): Investigate if SetMethod is ever\n                           // used for constructors.\n                           v8::ConstructorBehavior::kAllow,\n-                          v8::SideEffectType::kHasSideEffect)->GetFunction();\n+                          v8::SideEffectType::kHasSideEffect)\n+          ->GetFunction(context)\n+          .ToLocalChecked();\n   // kInternalized strings are created in the old space.\n   const v8::NewStringType type = v8::NewStringType::kInternalized;\n   v8::Local<v8::String> name_string =\n@@ -733,13 +735,15 @@ inline void Environment::SetMethod(v8::Local<v8::Object> that,\n inline void Environment::SetMethodNoSideEffect(v8::Local<v8::Object> that,\n                                                const char* name,\n                                                v8::FunctionCallback callback) {\n+  v8::Local<v8::Context> context = isolate()->GetCurrentContext();\n   v8::Local<v8::Function> function =\n-      NewFunctionTemplate(callback,\n-                          v8::Local<v8::Signature>(),\n+      NewFunctionTemplate(callback, v8::Local<v8::Signature>(),\n                           // TODO(TimothyGu): Investigate if SetMethod is ever\n                           // used for constructors.\n                           v8::ConstructorBehavior::kAllow,\n-                          v8::SideEffectType::kHasNoSideEffect)->GetFunction();\n+                          v8::SideEffectType::kHasNoSideEffect)\n+          ->GetFunction(context)\n+          .ToLocalChecked();\n   // kInternalized strings are created in the old space.\n   const v8::NewStringType type = v8::NewStringType::kInternalized;\n   v8::Local<v8::String> name_string ="
        },
        {
            "sha": "9efeaadff14de8e1491b80d42f2b45ab93a2d342",
            "filename": "src/env.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fenv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fenv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -268,8 +268,10 @@ void Environment::Start(const std::vector<std::string>& args,\n   auto process_template = FunctionTemplate::New(isolate());\n   process_template->SetClassName(FIXED_ONE_BYTE_STRING(isolate(), \"process\"));\n \n-  auto process_object =\n-      process_template->GetFunction()->NewInstance(context()).ToLocalChecked();\n+  auto process_object = process_template->GetFunction(context())\n+                            .ToLocalChecked()\n+                            ->NewInstance(context())\n+                            .ToLocalChecked();\n   set_process_object(process_object);\n \n   SetupProcessObject(this, args, exec_args);"
        },
        {
            "sha": "c51054819f7c013b8a2880f916e8e7ad009890a7",
            "filename": "src/fs_event_wrap.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Ffs_event_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Ffs_event_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ffs_event_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -121,7 +121,7 @@ void FSEventWrap::Initialize(Local<Object> target,\n       Local<FunctionTemplate>(),\n       static_cast<PropertyAttribute>(ReadOnly | DontDelete | v8::DontEnum));\n \n-  target->Set(fsevent_string, t->GetFunction());\n+  target->Set(fsevent_string, t->GetFunction(context).ToLocalChecked());\n }\n \n "
        },
        {
            "sha": "52184111f5527a440056e4a6b138ab1066c083a4",
            "filename": "src/inspector_js_api.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Finspector_js_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Finspector_js_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_js_api.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -310,7 +310,10 @@ void Initialize(Local<Object> target, Local<Value> unused,\n   AsyncWrap::AddWrapMethods(env, tmpl);\n   env->SetProtoMethod(tmpl, \"dispatch\", JSBindingsConnection::Dispatch);\n   env->SetProtoMethod(tmpl, \"disconnect\", JSBindingsConnection::Disconnect);\n-  target->Set(env->context(), conn_str, tmpl->GetFunction()).ToChecked();\n+  target\n+      ->Set(env->context(), conn_str,\n+            tmpl->GetFunction(env->context()).ToLocalChecked())\n+      .ToChecked();\n }\n \n }  // namespace"
        },
        {
            "sha": "9aca2f1d4b588448d87f4ad22ee688358e59ee09",
            "filename": "src/js_stream.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fjs_stream.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fjs_stream.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fjs_stream.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -211,7 +211,7 @@ void JSStream::Initialize(Local<Object> target,\n   env->SetProtoMethod(t, \"emitEOF\", EmitEOF);\n \n   StreamBase::AddMethods<JSStream>(env, t);\n-  target->Set(jsStreamString, t->GetFunction());\n+  target->Set(jsStreamString, t->GetFunction(context).ToLocalChecked());\n }\n \n }  // namespace node"
        },
        {
            "sha": "1ef22b270d1230da527973166068818763eb44c9",
            "filename": "src/module_wrap.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fmodule_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fmodule_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fmodule_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -801,7 +801,8 @@ void ModuleWrap::Initialize(Local<Object> target,\n   env->SetProtoMethodNoSideEffect(tpl, \"getStaticDependencySpecifiers\",\n                                   GetStaticDependencySpecifiers);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(isolate, \"ModuleWrap\"), tpl->GetFunction());\n+  target->Set(FIXED_ONE_BYTE_STRING(isolate, \"ModuleWrap\"),\n+              tpl->GetFunction(context).ToLocalChecked());\n   env->SetMethod(target, \"resolve\", Resolve);\n   env->SetMethod(target,\n                  \"setImportModuleDynamicallyCallback\","
        },
        {
            "sha": "d9b070d14ad469a014273083bff83d5a8470f069",
            "filename": "src/node.h",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode.h",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.h?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -366,9 +366,10 @@ inline void NODE_SET_METHOD(v8::Local<v8::Object> recv,\n                             v8::FunctionCallback callback) {\n   v8::Isolate* isolate = v8::Isolate::GetCurrent();\n   v8::HandleScope handle_scope(isolate);\n+  v8::Local<v8::Context> context = isolate->GetCurrentContext();\n   v8::Local<v8::FunctionTemplate> t = v8::FunctionTemplate::New(isolate,\n                                                                 callback);\n-  v8::Local<v8::Function> fn = t->GetFunction();\n+  v8::Local<v8::Function> fn = t->GetFunction(context).ToLocalChecked();\n   v8::Local<v8::String> fn_name = v8::String::NewFromUtf8(isolate, name,\n       v8::NewStringType::kInternalized).ToLocalChecked();\n   fn->SetName(fn_name);"
        },
        {
            "sha": "83eef0ff2eea4712555752bc99347f2281a5aef4",
            "filename": "src/node_api.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_api.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -1518,7 +1518,9 @@ napi_status napi_define_class(napi_env env,\n     }\n   }\n \n-  *result = v8impl::JsValueFromV8LocalValue(scope.Escape(tpl->GetFunction()));\n+  v8::Local<v8::Context> context = isolate->GetCurrentContext();\n+  *result = v8impl::JsValueFromV8LocalValue(\n+      scope.Escape(tpl->GetFunction(context).ToLocalChecked()));\n \n   if (static_property_count > 0) {\n     std::vector<napi_property_descriptor> static_descriptors;"
        },
        {
            "sha": "bbbbd272921f98f3e748cec48db936d245e6b904",
            "filename": "src/node_contextify.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_contextify.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_contextify.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_contextify.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -203,7 +203,8 @@ void ContextifyContext::Init(Environment* env, Local<Object> target) {\n   Local<FunctionTemplate> function_template =\n       FunctionTemplate::New(env->isolate());\n   function_template->InstanceTemplate()->SetInternalFieldCount(1);\n-  env->set_script_data_constructor_function(function_template->GetFunction());\n+  env->set_script_data_constructor_function(\n+      function_template->GetFunction(env->context()).ToLocalChecked());\n \n   env->SetMethod(target, \"makeContext\", MakeContext);\n   env->SetMethod(target, \"isContext\", IsContext);\n@@ -608,7 +609,8 @@ class ContextifyScript : public BaseObject {\n     env->SetProtoMethod(script_tmpl, \"runInContext\", RunInContext);\n     env->SetProtoMethod(script_tmpl, \"runInThisContext\", RunInThisContext);\n \n-    target->Set(class_name, script_tmpl->GetFunction());\n+    target->Set(class_name,\n+                script_tmpl->GetFunction(env->context()).ToLocalChecked());\n     env->set_script_context_constructor_template(script_tmpl);\n   }\n "
        },
        {
            "sha": "75f0ecb264a910cafd3414a46e21260f0cebd469",
            "filename": "src/node_crypto.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_crypto.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_crypto.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -366,7 +366,8 @@ void SecureContext::Initialize(Environment* env, Local<Object> target) {\n   t->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"kTicketKeyIVIndex\"),\n          Integer::NewFromUnsigned(env->isolate(), kTicketKeyIVIndex));\n \n-  target->Set(secureContextString, t->GetFunction());\n+  target->Set(secureContextString,\n+              t->GetFunction(env->context()).ToLocalChecked());\n   env->set_secure_context_constructor_template(t);\n }\n \n@@ -2561,7 +2562,7 @@ void CipherBase::Initialize(Environment* env, Local<Object> target) {\n   env->SetProtoMethod(t, \"setAAD\", SetAAD);\n \n   target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"CipherBase\"),\n-              t->GetFunction());\n+              t->GetFunction(env->context()).ToLocalChecked());\n }\n \n \n@@ -3195,7 +3196,8 @@ void Hmac::Initialize(Environment* env, v8::Local<Object> target) {\n   env->SetProtoMethod(t, \"update\", HmacUpdate);\n   env->SetProtoMethod(t, \"digest\", HmacDigest);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Hmac\"), t->GetFunction());\n+  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Hmac\"),\n+              t->GetFunction(env->context()).ToLocalChecked());\n }\n \n \n@@ -3314,7 +3316,8 @@ void Hash::Initialize(Environment* env, v8::Local<Object> target) {\n   env->SetProtoMethod(t, \"update\", HashUpdate);\n   env->SetProtoMethod(t, \"digest\", HashDigest);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Hash\"), t->GetFunction());\n+  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Hash\"),\n+              t->GetFunction(env->context()).ToLocalChecked());\n }\n \n \n@@ -3508,7 +3511,8 @@ void Sign::Initialize(Environment* env, v8::Local<Object> target) {\n   env->SetProtoMethod(t, \"update\", SignUpdate);\n   env->SetProtoMethod(t, \"sign\", SignFinal);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Sign\"), t->GetFunction());\n+  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Sign\"),\n+              t->GetFunction(env->context()).ToLocalChecked());\n }\n \n \n@@ -3710,7 +3714,7 @@ void Verify::Initialize(Environment* env, v8::Local<Object> target) {\n   env->SetProtoMethod(t, \"verify\", VerifyFinal);\n \n   target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Verify\"),\n-              t->GetFunction());\n+              t->GetFunction(env->context()).ToLocalChecked());\n }\n \n \n@@ -3948,7 +3952,7 @@ void DiffieHellman::Initialize(Environment* env, Local<Object> target) {\n       attributes);\n \n   target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"DiffieHellman\"),\n-              t->GetFunction());\n+              t->GetFunction(env->context()).ToLocalChecked());\n \n   Local<FunctionTemplate> t2 = env->NewFunctionTemplate(DiffieHellmanGroup);\n   t2->InstanceTemplate()->SetInternalFieldCount(1);\n@@ -3977,7 +3981,7 @@ void DiffieHellman::Initialize(Environment* env, Local<Object> target) {\n       attributes);\n \n   target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"DiffieHellmanGroup\"),\n-              t2->GetFunction());\n+              t2->GetFunction(env->context()).ToLocalChecked());\n }\n \n \n@@ -4326,7 +4330,7 @@ void ECDH::Initialize(Environment* env, Local<Object> target) {\n   env->SetProtoMethod(t, \"setPrivateKey\", SetPrivateKey);\n \n   target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"ECDH\"),\n-              t->GetFunction());\n+              t->GetFunction(env->context()).ToLocalChecked());\n }\n \n "
        },
        {
            "sha": "164a602fb62a094a4d98f1b8715dddbd7f0bbec9",
            "filename": "src/node_dtrace.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_dtrace.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_dtrace.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_dtrace.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -276,7 +276,9 @@ void InitDTrace(Environment* env, Local<Object> target) {\n \n   for (size_t i = 0; i < arraysize(tab); i++) {\n     Local<String> key = OneByteString(env->isolate(), tab[i].name);\n-    Local<Value> val = env->NewFunctionTemplate(tab[i].func)->GetFunction();\n+    Local<Value> val = env->NewFunctionTemplate(tab[i].func)\n+                           ->GetFunction(env->context())\n+                           .ToLocalChecked();\n     target->Set(key, val);\n   }\n "
        },
        {
            "sha": "c073c28b2e164066ae9d30a0612c10354e176e69",
            "filename": "src/node_file.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_file.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_file.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_file.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -2240,7 +2240,10 @@ void Initialize(Local<Object> target,\n   Local<String> wrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"FSReqCallback\");\n   fst->SetClassName(wrapString);\n-  target->Set(context, wrapString, fst->GetFunction()).FromJust();\n+  target\n+      ->Set(context, wrapString,\n+            fst->GetFunction(env->context()).ToLocalChecked())\n+      .FromJust();\n \n   // Create FunctionTemplate for FileHandleReadWrap. There’s no need\n   // to do anything in the constructor, so we only store the instance template.\n@@ -2274,7 +2277,10 @@ void Initialize(Local<Object> target,\n        FIXED_ONE_BYTE_STRING(env->isolate(), \"FileHandle\");\n   fd->SetClassName(handleString);\n   StreamBase::AddMethods<FileHandle>(env, fd);\n-  target->Set(context, handleString, fd->GetFunction()).FromJust();\n+  target\n+      ->Set(context, handleString,\n+            fd->GetFunction(env->context()).ToLocalChecked())\n+      .FromJust();\n   env->set_fd_constructor_template(fdt);\n \n   // Create FunctionTemplate for FileHandle::CloseReq"
        },
        {
            "sha": "9a0cc4ae191ed09c326a465a63f5dfe3287dd8ef",
            "filename": "src/node_http2.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_http2.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_http2.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http2.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -2987,7 +2987,7 @@ void Initialize(Local<Object> target,\n   env->set_http2stream_constructor_template(streamt);\n   target->Set(context,\n               FIXED_ONE_BYTE_STRING(env->isolate(), \"Http2Stream\"),\n-              stream->GetFunction()).FromJust();\n+              stream->GetFunction(env->context()).ToLocalChecked()).FromJust();\n \n   Local<FunctionTemplate> session =\n       env->NewFunctionTemplate(Http2Session::New);\n@@ -3015,7 +3015,7 @@ void Initialize(Local<Object> target,\n       Http2Session::RefreshSettings<nghttp2_session_get_remote_settings>);\n   target->Set(context,\n               http2SessionClassName,\n-              session->GetFunction()).FromJust();\n+              session->GetFunction(env->context()).ToLocalChecked()).FromJust();\n \n   Local<Object> constants = Object::New(isolate);\n   Local<Array> name_for_error_code = Array::New(isolate);"
        },
        {
            "sha": "3236dd4f9f8b1e255db77f9c36aee493e22bb8a5",
            "filename": "src/node_http_parser.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_http_parser.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_http_parser.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http_parser.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -776,7 +776,7 @@ void Initialize(Local<Object> target,\n   env->SetProtoMethod(t, \"getCurrentBuffer\", Parser::GetCurrentBuffer);\n \n   target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"HTTPParser\"),\n-              t->GetFunction());\n+              t->GetFunction(env->context()).ToLocalChecked());\n }\n \n }  // anonymous namespace"
        },
        {
            "sha": "1e1fe13d938566c03044994df2165eeff3efa3af",
            "filename": "src/node_perf.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_perf.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_perf.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_perf.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -405,7 +405,7 @@ void Initialize(Local<Object> target,\n \n   Local<FunctionTemplate> pe = FunctionTemplate::New(isolate);\n   pe->SetClassName(performanceEntryString);\n-  Local<Function> fn = pe->GetFunction();\n+  Local<Function> fn = pe->GetFunction(context).ToLocalChecked();\n   target->Set(context, performanceEntryString, fn).FromJust();\n   env->set_performance_entry_template(fn);\n "
        },
        {
            "sha": "91333714b28623418637e6ea87066a365cbfb648",
            "filename": "src/node_stat_watcher.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_stat_watcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_stat_watcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_stat_watcher.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -56,7 +56,8 @@ void StatWatcher::Initialize(Environment* env, Local<Object> target) {\n \n   env->SetProtoMethod(t, \"start\", StatWatcher::Start);\n \n-  target->Set(statWatcherString, t->GetFunction());\n+  target->Set(statWatcherString,\n+              t->GetFunction(env->context()).ToLocalChecked());\n }\n \n "
        },
        {
            "sha": "f60c5cd9b5075e40ebda510a98da802e3bcc72e9",
            "filename": "src/node_trace_events.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_trace_events.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_trace_events.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_trace_events.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -113,7 +113,7 @@ void Initialize(Local<Object> target,\n   env->SetProtoMethod(category_set, \"disable\", NodeCategorySet::Disable);\n \n   target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"CategorySet\"),\n-              category_set->GetFunction());\n+              category_set->GetFunction(env->context()).ToLocalChecked());\n \n   Local<String> isTraceCategoryEnabled =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"isTraceCategoryEnabled\");"
        },
        {
            "sha": "aee97095a436b8b4d1d33110b7e3beb9916d64e8",
            "filename": "src/node_worker.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_worker.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_worker.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_worker.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -492,7 +492,7 @@ void InitWorker(Local<Object> target,\n     Local<String> workerString =\n         FIXED_ONE_BYTE_STRING(env->isolate(), \"Worker\");\n     w->SetClassName(workerString);\n-    target->Set(workerString, w->GetFunction());\n+    target->Set(workerString, w->GetFunction(env->context()).ToLocalChecked());\n   }\n \n   env->SetMethod(target, \"getEnvMessagePort\", GetEnvMessagePort);"
        },
        {
            "sha": "1591538172169ac23ecfd273671aa9420ce1dc3a",
            "filename": "src/node_zlib.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_zlib.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fnode_zlib.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_zlib.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -773,7 +773,7 @@ void Initialize(Local<Object> target,\n \n   Local<String> zlibString = FIXED_ONE_BYTE_STRING(env->isolate(), \"Zlib\");\n   z->SetClassName(zlibString);\n-  target->Set(zlibString, z->GetFunction());\n+  target->Set(zlibString, z->GetFunction(env->context()).ToLocalChecked());\n \n   target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"ZLIB_VERSION\"),\n               FIXED_ONE_BYTE_STRING(env->isolate(), ZLIB_VERSION));"
        },
        {
            "sha": "f3317ecc8c29970ff86391a4e00426adb59ed3ad",
            "filename": "src/pipe_wrap.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fpipe_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fpipe_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fpipe_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -57,7 +57,9 @@ Local<Object> PipeWrap::Instantiate(Environment* env,\n   EscapableHandleScope handle_scope(env->isolate());\n   AsyncHooks::DefaultTriggerAsyncIdScope trigger_scope(parent);\n   CHECK_EQ(false, env->pipe_constructor_template().IsEmpty());\n-  Local<Function> constructor = env->pipe_constructor_template()->GetFunction();\n+  Local<Function> constructor = env->pipe_constructor_template()\n+                                    ->GetFunction(env->context())\n+                                    .ToLocalChecked();\n   CHECK_EQ(false, constructor.IsEmpty());\n   Local<Value> type_value = Int32::New(env->isolate(), type);\n   Local<Object> instance =\n@@ -91,7 +93,7 @@ void PipeWrap::Initialize(Local<Object> target,\n \n   env->SetProtoMethod(t, \"fchmod\", Fchmod);\n \n-  target->Set(pipeString, t->GetFunction());\n+  target->Set(pipeString, t->GetFunction(env->context()).ToLocalChecked());\n   env->set_pipe_constructor_template(t);\n \n   // Create FunctionTemplate for PipeConnectWrap.\n@@ -100,7 +102,7 @@ void PipeWrap::Initialize(Local<Object> target,\n   Local<String> wrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"PipeConnectWrap\");\n   cwt->SetClassName(wrapString);\n-  target->Set(wrapString, cwt->GetFunction());\n+  target->Set(wrapString, cwt->GetFunction(env->context()).ToLocalChecked());\n \n   // Define constants\n   Local<Object> constants = Object::New(env->isolate());"
        },
        {
            "sha": "1daa437b296b396b1a935fe11c29b020ce8d4ebb",
            "filename": "src/process_wrap.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fprocess_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fprocess_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fprocess_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -64,7 +64,8 @@ class ProcessWrap : public HandleWrap {\n     env->SetProtoMethod(constructor, \"spawn\", Spawn);\n     env->SetProtoMethod(constructor, \"kill\", Kill);\n \n-    target->Set(processString, constructor->GetFunction());\n+    target->Set(processString,\n+                constructor->GetFunction(context).ToLocalChecked());\n   }\n \n   void MemoryInfo(MemoryTracker* tracker) const override {"
        },
        {
            "sha": "b9ec037b453d915d5c5a19b74b770cc8eb3c4e3d",
            "filename": "src/signal_wrap.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fsignal_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fsignal_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fsignal_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -57,7 +57,8 @@ class SignalWrap : public HandleWrap {\n     env->SetProtoMethod(constructor, \"start\", Start);\n     env->SetProtoMethod(constructor, \"stop\", Stop);\n \n-    target->Set(signalString, constructor->GetFunction());\n+    target->Set(signalString,\n+                constructor->GetFunction(env->context()).ToLocalChecked());\n   }\n \n   void MemoryInfo(MemoryTracker* tracker) const override {"
        },
        {
            "sha": "90da2043af9c26ddc33c7b527af20563c8f18097",
            "filename": "src/stream_pipe.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fstream_pipe.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fstream_pipe.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstream_pipe.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -260,7 +260,10 @@ void InitializeStreamPipe(Local<Object> target,\n   AsyncWrap::AddWrapMethods(env, pipe);\n   pipe->SetClassName(stream_pipe_string);\n   pipe->InstanceTemplate()->SetInternalFieldCount(1);\n-  target->Set(context, stream_pipe_string, pipe->GetFunction()).FromJust();\n+  target\n+      ->Set(context, stream_pipe_string,\n+            pipe->GetFunction(context).ToLocalChecked())\n+      .FromJust();\n }\n \n }  // anonymous namespace"
        },
        {
            "sha": "9738d2a53bddadfb3c98a5d6fdcb3727002b5e18",
            "filename": "src/stream_wrap.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fstream_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fstream_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstream_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -67,7 +67,7 @@ void LibuvStreamWrap::Initialize(Local<Object> target,\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"ShutdownWrap\");\n   sw->SetClassName(wrapString);\n   AsyncWrap::AddWrapMethods(env, sw);\n-  target->Set(wrapString, sw->GetFunction());\n+  target->Set(wrapString, sw->GetFunction(env->context()).ToLocalChecked());\n   env->set_shutdown_wrap_template(sw->InstanceTemplate());\n \n   Local<FunctionTemplate> ww =\n@@ -77,7 +77,8 @@ void LibuvStreamWrap::Initialize(Local<Object> target,\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"WriteWrap\");\n   ww->SetClassName(writeWrapString);\n   AsyncWrap::AddWrapMethods(env, ww);\n-  target->Set(writeWrapString, ww->GetFunction());\n+  target->Set(writeWrapString,\n+              ww->GetFunction(env->context()).ToLocalChecked());\n   env->set_write_wrap_template(ww->InstanceTemplate());\n }\n "
        },
        {
            "sha": "554b0216fa78e45f1fed7322a689492795769749",
            "filename": "src/tcp_wrap.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Ftcp_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Ftcp_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftcp_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -60,7 +60,9 @@ Local<Object> TCPWrap::Instantiate(Environment* env,\n   EscapableHandleScope handle_scope(env->isolate());\n   AsyncHooks::DefaultTriggerAsyncIdScope trigger_scope(parent);\n   CHECK_EQ(env->tcp_constructor_template().IsEmpty(), false);\n-  Local<Function> constructor = env->tcp_constructor_template()->GetFunction();\n+  Local<Function> constructor = env->tcp_constructor_template()\n+                                    ->GetFunction(env->context())\n+                                    .ToLocalChecked();\n   CHECK_EQ(constructor.IsEmpty(), false);\n   Local<Value> type_value = Int32::New(env->isolate(), type);\n   Local<Object> instance =\n@@ -107,7 +109,7 @@ void TCPWrap::Initialize(Local<Object> target,\n   env->SetProtoMethod(t, \"setSimultaneousAccepts\", SetSimultaneousAccepts);\n #endif\n \n-  target->Set(tcpString, t->GetFunction());\n+  target->Set(tcpString, t->GetFunction(env->context()).ToLocalChecked());\n   env->set_tcp_constructor_template(t);\n \n   // Create FunctionTemplate for TCPConnectWrap.\n@@ -117,7 +119,7 @@ void TCPWrap::Initialize(Local<Object> target,\n   Local<String> wrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"TCPConnectWrap\");\n   cwt->SetClassName(wrapString);\n-  target->Set(wrapString, cwt->GetFunction());\n+  target->Set(wrapString, cwt->GetFunction(env->context()).ToLocalChecked());\n \n   // Define constants\n   Local<Object> constants = Object::New(env->isolate());"
        },
        {
            "sha": "27bedd08cec9748e14de43e881c62ab9bea0e34c",
            "filename": "src/tls_wrap.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Ftls_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Ftls_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftls_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -905,9 +905,10 @@ void TLSWrap::Initialize(Local<Object> target,\n   env->SetProtoMethod(t, \"getServername\", GetServername);\n   env->SetProtoMethod(t, \"setServername\", SetServername);\n \n-  env->set_tls_wrap_constructor_function(t->GetFunction());\n+  env->set_tls_wrap_constructor_function(\n+      t->GetFunction(env->context()).ToLocalChecked());\n \n-  target->Set(tlsWrapString, t->GetFunction());\n+  target->Set(tlsWrapString, t->GetFunction(env->context()).ToLocalChecked());\n }\n \n }  // namespace node"
        },
        {
            "sha": "e7b684a7eebc02259fdae9ae79fc522f37fcb46c",
            "filename": "src/tty_wrap.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Ftty_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Ftty_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftty_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -63,7 +63,7 @@ void TTYWrap::Initialize(Local<Object> target,\n   env->SetMethodNoSideEffect(target, \"isTTY\", IsTTY);\n   env->SetMethodNoSideEffect(target, \"guessHandleType\", GuessHandleType);\n \n-  target->Set(ttyString, t->GetFunction());\n+  target->Set(ttyString, t->GetFunction(env->context()).ToLocalChecked());\n   env->set_tty_constructor_template(t);\n }\n "
        },
        {
            "sha": "510926abde25844177484949431329373ae97f3e",
            "filename": "src/udp_wrap.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fudp_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fudp_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fudp_wrap.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -138,8 +138,9 @@ void UDPWrap::Initialize(Local<Object> target,\n   AsyncWrap::AddWrapMethods(env, t);\n   HandleWrap::AddWrapMethods(env, t);\n \n-  target->Set(udpString, t->GetFunction());\n-  env->set_udp_constructor_function(t->GetFunction());\n+  target->Set(udpString, t->GetFunction(env->context()).ToLocalChecked());\n+  env->set_udp_constructor_function(\n+      t->GetFunction(env->context()).ToLocalChecked());\n \n   // Create FunctionTemplate for SendWrap\n   Local<FunctionTemplate> swt =\n@@ -148,7 +149,8 @@ void UDPWrap::Initialize(Local<Object> target,\n   Local<String> sendWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"SendWrap\");\n   swt->SetClassName(sendWrapString);\n-  target->Set(sendWrapString, swt->GetFunction());\n+  target->Set(sendWrapString,\n+              swt->GetFunction(env->context()).ToLocalChecked());\n }\n \n "
        },
        {
            "sha": "3d070a32bdb3b41239456786671677fc958d3a93",
            "filename": "src/uv.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/src%2Fuv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/src%2Fuv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fuv.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -57,7 +57,9 @@ void Initialize(Local<Object> target,\n   Environment* env = Environment::GetCurrent(context);\n   Isolate* isolate = env->isolate();\n   target->Set(FIXED_ONE_BYTE_STRING(isolate, \"errname\"),\n-              env->NewFunctionTemplate(ErrName)->GetFunction());\n+              env->NewFunctionTemplate(ErrName)\n+                  ->GetFunction(env->context())\n+                  .ToLocalChecked());\n \n #define V(name, _) NODE_DEFINE_CONSTANT(target, UV_##name);\n   UV_ERRNO_MAP(V)"
        },
        {
            "sha": "861fb5a80c465150248b8c2c8dcab19977ca2df3",
            "filename": "test/addons/heap-profiler/binding.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/test%2Faddons%2Fheap-profiler%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/test%2Faddons%2Fheap-profiler%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fheap-profiler%2Fbinding.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -18,8 +18,11 @@ inline void Test(const v8::FunctionCallbackInfo<v8::Value>& args) {\n \n inline void Initialize(v8::Local<v8::Object> binding) {\n   v8::Isolate* const isolate = binding->GetIsolate();\n+  v8::Local<v8::Context> context = isolate->GetCurrentContext();\n   binding->Set(v8::String::NewFromUtf8(isolate, \"test\"),\n-               v8::FunctionTemplate::New(isolate, Test)->GetFunction());\n+               v8::FunctionTemplate::New(isolate, Test)\n+                   ->GetFunction(context)\n+                   .ToLocalChecked());\n }\n \n NODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)"
        },
        {
            "sha": "21b932ae018dfdb9face70ce47997e5dc6443c3b",
            "filename": "test/addons/new-target/binding.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/test%2Faddons%2Fnew-target%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/test%2Faddons%2Fnew-target%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fnew-target%2Fbinding.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -11,8 +11,11 @@ inline void NewClass(const v8::FunctionCallbackInfo<v8::Value>& args) {\n \n inline void Initialize(v8::Local<v8::Object> binding) {\n   auto isolate = binding->GetIsolate();\n+  auto context = isolate->GetCurrentContext();\n   binding->Set(v8::String::NewFromUtf8(isolate, \"Class\"),\n-               v8::FunctionTemplate::New(isolate, NewClass)->GetFunction());\n+               v8::FunctionTemplate::New(isolate, NewClass)\n+                   ->GetFunction(context)\n+                   .ToLocalChecked());\n }\n \n NODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)"
        },
        {
            "sha": "bb00f1e176d7ce5c4dd9e5483dfb5c6b2ee26e40",
            "filename": "test/addons/openssl-binding/binding.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/test%2Faddons%2Fopenssl-binding%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/test%2Faddons%2Fopenssl-binding%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fopenssl-binding%2Fbinding.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -23,7 +23,9 @@ inline void Initialize(v8::Local<v8::Object> exports,\n                        v8::Local<v8::Context> context) {\n   auto isolate = context->GetIsolate();\n   auto key = v8::String::NewFromUtf8(isolate, \"randomBytes\");\n-  auto value = v8::FunctionTemplate::New(isolate, RandomBytes)->GetFunction();\n+  auto value = v8::FunctionTemplate::New(isolate, RandomBytes)\n+                   ->GetFunction(context)\n+                   .ToLocalChecked();\n   assert(exports->Set(context, key, value).IsJust());\n }\n "
        },
        {
            "sha": "1d0af91111535938e2e19e4dfb9c90694c4dc1c9",
            "filename": "test/addons/zlib-binding/binding.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/test%2Faddons%2Fzlib-binding%2Fbinding.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/test%2Faddons%2Fzlib-binding%2Fbinding.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fzlib-binding%2Fbinding.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -46,7 +46,9 @@ inline void Initialize(v8::Local<v8::Object> exports,\n                        v8::Local<v8::Context> context) {\n   auto isolate = context->GetIsolate();\n   auto key = v8::String::NewFromUtf8(isolate, \"compressBytes\");\n-  auto value = v8::FunctionTemplate::New(isolate, CompressBytes)->GetFunction();\n+  auto value = v8::FunctionTemplate::New(isolate, CompressBytes)\n+                   ->GetFunction(context)\n+                   .ToLocalChecked();\n   assert(exports->Set(context, key, value).IsJust());\n }\n "
        },
        {
            "sha": "f0a93f3185464ca629b56905aee9ed9125e890b1",
            "filename": "test/cctest/test_node_postmortem_metadata.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/7dde560beb736e82b7867130a2d5824544122a60/test%2Fcctest%2Ftest_node_postmortem_metadata.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7dde560beb736e82b7867130a2d5824544122a60/test%2Fcctest%2Ftest_node_postmortem_metadata.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcctest%2Ftest_node_postmortem_metadata.cc?ref=7dde560beb736e82b7867130a2d5824544122a60",
            "patch": "@@ -134,8 +134,10 @@ TEST_F(DebugSymbolsTest, HandleWrapList) {\n   auto obj_template = v8::FunctionTemplate::New(isolate_);\n   obj_template->InstanceTemplate()->SetInternalFieldCount(1);\n \n-  v8::Local<v8::Object> object =\n-      obj_template->GetFunction()->NewInstance(env.context()).ToLocalChecked();\n+  v8::Local<v8::Object> object = obj_template->GetFunction(env.context())\n+                                     .ToLocalChecked()\n+                                     ->NewInstance(env.context())\n+                                     .ToLocalChecked();\n   TestHandleWrap obj(*env, object, &handle);\n \n   auto queue = reinterpret_cast<uintptr_t>((*env)->handle_wrap_queue());\n@@ -161,8 +163,10 @@ TEST_F(DebugSymbolsTest, ReqWrapList) {\n   auto obj_template = v8::FunctionTemplate::New(isolate_);\n   obj_template->InstanceTemplate()->SetInternalFieldCount(1);\n \n-  v8::Local<v8::Object> object =\n-      obj_template->GetFunction()->NewInstance(env.context()).ToLocalChecked();\n+  v8::Local<v8::Object> object = obj_template->GetFunction(env.context())\n+                                     .ToLocalChecked()\n+                                     ->NewInstance(env.context())\n+                                     .ToLocalChecked();\n   TestReqWrap obj(*env, object);\n \n   // NOTE (mmarchini): Workaround to fix failing tests on ARM64 machines with"
        }
    ],
    "stats": {
        "total": 205,
        "additions": 134,
        "deletions": 71
    }
}