{
    "author": "jasnell",
    "message": "perf_hooks: set bootstrap complete in only one place\n\nPR-URL: https://github.com/nodejs/node/pull/21247\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>",
    "sha": "17e378b51a4e35533b43bae66e7aa76faaad17b3",
    "files": [
        {
            "sha": "7b836b466f5d9c2e99709537aeb37ac05469de5b",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 2,
            "deletions": 8,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/17e378b51a4e35533b43bae66e7aa76faaad17b3/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/17e378b51a4e35533b43bae66e7aa76faaad17b3/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=17e378b51a4e35533b43bae66e7aa76faaad17b3",
            "patch": "@@ -174,6 +174,8 @@\n       }\n     }\n \n+    perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n+\n     // There are various modes that Node can run in. The most common two\n     // are running from a script and running the REPL - but there are a few\n     // others like the debugger or running --eval arguments. Here we decide\n@@ -186,7 +188,6 @@\n       // To allow people to extend Node in different ways, this hook allows\n       // one to drop a file lib/_third_party_main.js into the build\n       // directory which will be executed instead of Node's normal loading.\n-      perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n       process.nextTick(function() {\n         perf.markMilestone(NODE_PERFORMANCE_MILESTONE_THIRD_PARTY_MAIN_START);\n         NativeModule.require('_third_party_main');\n@@ -200,13 +201,11 @@\n       }\n \n       // Start the debugger agent.\n-      perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n       process.nextTick(function() {\n         NativeModule.require('internal/deps/node-inspect/lib/_inspect').start();\n       });\n \n     } else if (process.profProcess) {\n-      perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n       NativeModule.require('internal/v8_prof_processor');\n     } else {\n       // There is user code to be run.\n@@ -238,7 +237,6 @@\n           addBuiltinLibsToObject\n         } = NativeModule.require('internal/modules/cjs/helpers');\n         addBuiltinLibsToObject(global);\n-        perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n         evalScript('[eval]');\n       } else if (process.argv[1] && process.argv[1] !== '-') {\n         perf.markMilestone(NODE_PERFORMANCE_MILESTONE_MODULE_LOAD_START);\n@@ -263,7 +261,6 @@\n           checkScriptSyntax(source, filename);\n           process.exit(0);\n         }\n-        perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n         CJSModule.runMain();\n       } else {\n         perf.markMilestone(NODE_PERFORMANCE_MILESTONE_MODULE_LOAD_START);\n@@ -294,7 +291,6 @@\n \n           if (process._eval != null) {\n             // User passed '-e' or '--eval'\n-            perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n             evalScript('[eval]');\n           }\n         } else {\n@@ -311,14 +307,12 @@\n               checkScriptSyntax(code, '[stdin]');\n             } else {\n               process._eval = code;\n-              perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n               evalScript('[stdin]');\n             }\n           });\n         }\n       }\n     }\n-    perf.markMilestone(NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE);\n   }\n \n   function setupProcessObject() {"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 2,
        "deletions": 8
    }
}