{
    "author": "bnoordhuis",
    "message": "lib,src: remove openssl feature conditionals\n\nRemove compile-time and run-time conditionals for features that\nOpenSSL 1.0.0 and 1.0.1 didn't support: ALPN, OCSP and/or SNI.\nThey are no longer necessary since our baseline is OpenSSL 1.0.2.\n\nPR-URL: https://github.com/nodejs/node/pull/21094\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "a76f0298184115971bac56dd369418786569f76d",
    "files": [
        {
            "sha": "7b16abab87bdc01948538a123b4384c1b73de3e3",
            "filename": "lib/_tls_wrap.js",
            "status": "modified",
            "additions": 4,
            "deletions": 11,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/lib%2F_tls_wrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/lib%2F_tls_wrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_tls_wrap.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -512,8 +512,7 @@ TLSSocket.prototype._init = function(socket, wrap) {\n   // If custom SNICallback was given, or if\n   // there're SNI contexts to perform match against -\n   // set `.onsniselect` callback.\n-  if (process.features.tls_sni &&\n-      options.isServer &&\n+  if (options.isServer &&\n       options.SNICallback &&\n       (options.SNICallback !== SNICallback ||\n        (options.server && options.server._contexts.length))) {\n@@ -522,7 +521,7 @@ TLSSocket.prototype._init = function(socket, wrap) {\n     ssl.enableCertCb();\n   }\n \n-  if (process.features.tls_alpn && options.ALPNProtocols) {\n+  if (options.ALPNProtocols) {\n     // keep reference in secureContext not to be GC-ed\n     ssl._secureContext.alpnBuffer = options.ALPNProtocols;\n     ssl.setALPNProtocols(ssl._secureContext.alpnBuffer);\n@@ -620,15 +619,9 @@ TLSSocket.prototype._releaseControl = function() {\n };\n \n TLSSocket.prototype._finishInit = function() {\n-  if (process.features.tls_alpn) {\n-    this.alpnProtocol = this._handle.getALPNNegotiatedProtocol();\n-  }\n-\n-  if (process.features.tls_sni) {\n-    this.servername = this._handle.getServername();\n-  }\n-\n   debug('secure established');\n+  this.alpnProtocol = this._handle.getALPNNegotiatedProtocol();\n+  this.servername = this._handle.getServername();\n   this._secureEstablished = true;\n   if (this._tlsOptions.handshakeTimeout > 0)\n     this.setTimeout(0, this._handleTimeout);"
        },
        {
            "sha": "43bd6ee06c775c7cf5a764d3197fe97c2915e24f",
            "filename": "lib/https.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/lib%2Fhttps.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/lib%2Fhttps.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fhttps.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -48,7 +48,7 @@ function Server(opts, requestListener) {\n   }\n   opts = util._extend({}, opts);\n \n-  if (process.features.tls_alpn && !opts.ALPNProtocols) {\n+  if (!opts.ALPNProtocols) {\n     // http/1.0 is not defined as Protocol IDs in IANA\n     // http://www.iana.org/assignments/tls-extensiontype-values\n     //       /tls-extensiontype-values.xhtml#alpn-protocol-ids"
        },
        {
            "sha": "75dbafa1ab48f6eb99da5e8cbc152fa93de22ef5",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 21,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -2373,30 +2373,16 @@ static Local<Object> GetFeatures(Environment* env) {\n   // TODO(bnoordhuis) ping libuv\n   obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"ipv6\"), True(env->isolate()));\n \n-#ifdef TLSEXT_TYPE_application_layer_protocol_negotiation\n-  Local<Boolean> tls_alpn = True(env->isolate());\n+#ifdef HAVE_OPENSSL\n+  Local<Boolean> have_openssl = True(env->isolate());\n #else\n-  Local<Boolean> tls_alpn = False(env->isolate());\n+  Local<Boolean> have_openssl = False(env->isolate());\n #endif\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_alpn\"), tls_alpn);\n \n-#ifdef SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n-  Local<Boolean> tls_sni = True(env->isolate());\n-#else\n-  Local<Boolean> tls_sni = False(env->isolate());\n-#endif\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_sni\"), tls_sni);\n-\n-#if !defined(OPENSSL_NO_TLSEXT) && defined(SSL_CTX_set_tlsext_status_cb)\n-  Local<Boolean> tls_ocsp = True(env->isolate());\n-#else\n-  Local<Boolean> tls_ocsp = False(env->isolate());\n-#endif  // !defined(OPENSSL_NO_TLSEXT) && defined(SSL_CTX_set_tlsext_status_cb)\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_ocsp\"), tls_ocsp);\n-\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls\"),\n-           Boolean::New(env->isolate(),\n-                        get_builtin_module(\"crypto\") != nullptr));\n+  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_alpn\"), have_openssl);\n+  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_sni\"), have_openssl);\n+  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_ocsp\"), have_openssl);\n+  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls\"), have_openssl);\n \n   return scope.Escape(obj);\n }"
        },
        {
            "sha": "2339dc833590d200afb0c0542fba99be3fd0df86",
            "filename": "src/node_crypto.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 26,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/src%2Fnode_crypto.cc",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/src%2Fnode_crypto.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.cc?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -133,24 +133,17 @@ template int SSLWrap<TLSWrap>::NewSessionCallback(SSL* s,\n template void SSLWrap<TLSWrap>::OnClientHello(\n     void* arg,\n     const ClientHelloParser::ClientHello& hello);\n-\n-#ifdef NODE__HAVE_TLSEXT_STATUS_CB\n template int SSLWrap<TLSWrap>::TLSExtStatusCallback(SSL* s, void* arg);\n-#endif\n-\n template void SSLWrap<TLSWrap>::DestroySSL();\n template int SSLWrap<TLSWrap>::SSLCertCallback(SSL* s, void* arg);\n template void SSLWrap<TLSWrap>::WaitForCertCb(CertCb cb, void* arg);\n-\n-#ifdef TLSEXT_TYPE_application_layer_protocol_negotiation\n template int SSLWrap<TLSWrap>::SelectALPNCallback(\n     SSL* s,\n     const unsigned char** out,\n     unsigned char* outlen,\n     const unsigned char* in,\n     unsigned int inlen,\n     void* arg);\n-#endif  // TLSEXT_TYPE_application_layer_protocol_negotiation\n \n \n static int PasswordCallback(char* buf, int size, int rwflag, void* u) {\n@@ -1387,11 +1380,9 @@ void SSLWrap<Base>::AddMethods(Environment* env, Local<FunctionTemplate> t) {\n \n template <class Base>\n void SSLWrap<Base>::ConfigureSecureContext(SecureContext* sc) {\n-#ifdef NODE__HAVE_TLSEXT_STATUS_CB\n   // OCSP stapling\n   SSL_CTX_set_tlsext_status_cb(sc->ctx_.get(), TLSExtStatusCallback);\n   SSL_CTX_set_tlsext_status_arg(sc->ctx_.get(), nullptr);\n-#endif  // NODE__HAVE_TLSEXT_STATUS_CB\n }\n \n \n@@ -2019,7 +2010,6 @@ void SSLWrap<Base>::NewSessionDone(const FunctionCallbackInfo<Value>& args) {\n \n template <class Base>\n void SSLWrap<Base>::SetOCSPResponse(const FunctionCallbackInfo<Value>& args) {\n-#ifdef NODE__HAVE_TLSEXT_STATUS_CB\n   Base* w;\n   ASSIGN_OR_RETURN_UNWRAP(&w, args.Holder());\n   Environment* env = w->env();\n@@ -2030,18 +2020,15 @@ void SSLWrap<Base>::SetOCSPResponse(const FunctionCallbackInfo<Value>& args) {\n   THROW_AND_RETURN_IF_NOT_BUFFER(env, args[0], \"OCSP response\");\n \n   w->ocsp_response_.Reset(args.GetIsolate(), args[0].As<Object>());\n-#endif  // NODE__HAVE_TLSEXT_STATUS_CB\n }\n \n \n template <class Base>\n void SSLWrap<Base>::RequestOCSP(const FunctionCallbackInfo<Value>& args) {\n-#ifdef NODE__HAVE_TLSEXT_STATUS_CB\n   Base* w;\n   ASSIGN_OR_RETURN_UNWRAP(&w, args.Holder());\n \n   SSL_set_tlsext_status_type(w->ssl_.get(), TLSEXT_STATUSTYPE_ocsp);\n-#endif  // NODE__HAVE_TLSEXT_STATUS_CB\n }\n \n \n@@ -2226,7 +2213,6 @@ void SSLWrap<Base>::GetProtocol(const FunctionCallbackInfo<Value>& args) {\n }\n \n \n-#ifdef TLSEXT_TYPE_application_layer_protocol_negotiation\n template <class Base>\n int SSLWrap<Base>::SelectALPNCallback(SSL* s,\n                                       const unsigned char** out,\n@@ -2256,13 +2242,11 @@ int SSLWrap<Base>::SelectALPNCallback(SSL* s,\n   return status == OPENSSL_NPN_NEGOTIATED ? SSL_TLSEXT_ERR_OK\n                                           : SSL_TLSEXT_ERR_NOACK;\n }\n-#endif  // TLSEXT_TYPE_application_layer_protocol_negotiation\n \n \n template <class Base>\n void SSLWrap<Base>::GetALPNNegotiatedProto(\n     const FunctionCallbackInfo<Value>& args) {\n-#ifdef TLSEXT_TYPE_application_layer_protocol_negotiation\n   Base* w;\n   ASSIGN_OR_RETURN_UNWRAP(&w, args.Holder());\n \n@@ -2276,13 +2260,11 @@ void SSLWrap<Base>::GetALPNNegotiatedProto(\n \n   args.GetReturnValue().Set(\n       OneByteString(args.GetIsolate(), alpn_proto, alpn_proto_len));\n-#endif  // TLSEXT_TYPE_application_layer_protocol_negotiation\n }\n \n \n template <class Base>\n void SSLWrap<Base>::SetALPNProtocols(const FunctionCallbackInfo<Value>& args) {\n-#ifdef TLSEXT_TYPE_application_layer_protocol_negotiation\n   Base* w;\n   ASSIGN_OR_RETURN_UNWRAP(&w, args.Holder());\n   Environment* env = w->env();\n@@ -2306,11 +2288,9 @@ void SSLWrap<Base>::SetALPNProtocols(const FunctionCallbackInfo<Value>& args) {\n                                SelectALPNCallback,\n                                nullptr);\n   }\n-#endif  // TLSEXT_TYPE_application_layer_protocol_negotiation\n }\n \n \n-#ifdef NODE__HAVE_TLSEXT_STATUS_CB\n template <class Base>\n int SSLWrap<Base>::TLSExtStatusCallback(SSL* s, void* arg) {\n   Base* w = static_cast<Base*>(SSL_get_app_data(s));\n@@ -2354,7 +2334,6 @@ int SSLWrap<Base>::TLSExtStatusCallback(SSL* s, void* arg) {\n     return SSL_TLSEXT_ERR_OK;\n   }\n }\n-#endif  // NODE__HAVE_TLSEXT_STATUS_CB\n \n \n template <class Base>\n@@ -2396,11 +2375,7 @@ int SSLWrap<Base>::SSLCertCallback(SSL* s, void* arg) {\n     info->Set(context, env->servername_string(), str).FromJust();\n   }\n \n-  bool ocsp = false;\n-#ifdef NODE__HAVE_TLSEXT_STATUS_CB\n-  ocsp = SSL_get_tlsext_status_type(s) == TLSEXT_STATUSTYPE_ocsp;\n-#endif\n-\n+  const bool ocsp = (SSL_get_tlsext_status_type(s) == TLSEXT_STATUSTYPE_ocsp);\n   info->Set(context, env->ocsp_request_string(),\n             Boolean::New(env->isolate(), ocsp)).FromJust();\n "
        },
        {
            "sha": "4587a96e725f86f697cd9f5806782d667e3a88f5",
            "filename": "src/node_crypto.h",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/src%2Fnode_crypto.h",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/src%2Fnode_crypto.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.h?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -53,10 +53,6 @@\n #include <openssl/rand.h>\n #include <openssl/pkcs12.h>\n \n-#if !defined(OPENSSL_NO_TLSEXT) && defined(SSL_CTX_set_tlsext_status_cb)\n-# define NODE__HAVE_TLSEXT_STATUS_CB\n-#endif  // !defined(OPENSSL_NO_TLSEXT) && defined(SSL_CTX_set_tlsext_status_cb)\n-\n namespace node {\n namespace crypto {\n \n@@ -331,13 +327,8 @@ class SSLWrap {\n \n   ClientHelloParser hello_parser_;\n \n-#ifdef NODE__HAVE_TLSEXT_STATUS_CB\n   Persistent<v8::Object> ocsp_response_;\n-#endif  // NODE__HAVE_TLSEXT_STATUS_CB\n-\n-#ifdef SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n   Persistent<v8::Value> sni_context_;\n-#endif\n \n   friend class SecureContext;\n };"
        },
        {
            "sha": "65615e3a11e9688ef8d1b7b4973c9eaf891729e3",
            "filename": "src/tls_wrap.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/src%2Ftls_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/src%2Ftls_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftls_wrap.cc?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -131,12 +131,10 @@ void TLSWrap::InitSSL() {\n   SSL_set_app_data(ssl_.get(), this);\n   SSL_set_info_callback(ssl_.get(), SSLInfoCallback);\n \n-#ifdef SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n   if (is_server()) {\n     SSL_CTX_set_tlsext_servername_callback(sc_->ctx_.get(),\n                                            SelectSNIContextCallback);\n   }\n-#endif  // SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n \n   ConfigureSecureContext(sc_);\n \n@@ -777,7 +775,6 @@ void TLSWrap::OnClientHelloParseEnd(void* arg) {\n }\n \n \n-#ifdef SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n void TLSWrap::GetServername(const FunctionCallbackInfo<Value>& args) {\n   Environment* env = Environment::GetCurrent(args);\n \n@@ -809,10 +806,8 @@ void TLSWrap::SetServername(const FunctionCallbackInfo<Value>& args) {\n \n   CHECK_NOT_NULL(wrap->ssl_);\n \n-#ifdef SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n   node::Utf8Value servername(env->isolate(), args[0].As<String>());\n   SSL_set_tlsext_host_name(wrap->ssl_.get(), *servername);\n-#endif  // SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n }\n \n \n@@ -851,7 +846,6 @@ int TLSWrap::SelectSNIContextCallback(SSL* s, int* ad, void* arg) {\n   p->SetSNIContext(sc);\n   return SSL_TLSEXT_ERR_OK;\n }\n-#endif  // SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n \n \n void TLSWrap::GetWriteQueueSize(const FunctionCallbackInfo<Value>& info) {\n@@ -902,10 +896,8 @@ void TLSWrap::Initialize(Local<Object> target,\n   StreamBase::AddMethods<TLSWrap>(env, t, StreamBase::kFlagHasWritev);\n   SSLWrap<TLSWrap>::AddMethods(env, t);\n \n-#ifdef SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n   env->SetProtoMethod(t, \"getServername\", GetServername);\n   env->SetProtoMethod(t, \"setServername\", SetServername);\n-#endif  // SSL_CRT_SET_TLSEXT_SERVERNAME_CB\n \n   env->set_tls_wrap_constructor_function(t->GetFunction());\n "
        },
        {
            "sha": "1603d8919a472cfda73080b89fe35b9b135d5a17",
            "filename": "src/tls_wrap.h",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/src%2Ftls_wrap.h",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/src%2Ftls_wrap.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftls_wrap.h?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -138,12 +138,9 @@ class TLSWrap : public AsyncWrap,\n   static void EnableCertCb(\n       const v8::FunctionCallbackInfo<v8::Value>& args);\n   static void DestroySSL(const v8::FunctionCallbackInfo<v8::Value>& args);\n-\n-#ifdef SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n   static void GetServername(const v8::FunctionCallbackInfo<v8::Value>& args);\n   static void SetServername(const v8::FunctionCallbackInfo<v8::Value>& args);\n   static int SelectSNIContextCallback(SSL* s, int* ad, void* arg);\n-#endif  // SSL_CTRL_SET_TLSEXT_SERVERNAME_CB\n \n   crypto::SecureContext* sc_;\n   BIO* enc_in_;"
        },
        {
            "sha": "2540831a38f25c836f6ae3f1301607dbfb5d7b51",
            "filename": "test/parallel/test-tls-alpn-server-client.js",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-alpn-server-client.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-alpn-server-client.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-alpn-server-client.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -4,11 +4,6 @@ const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n-if (!process.features.tls_alpn) {\n-  common.skip(\n-    'Skipping because node compiled without ALPN feature of OpenSSL.');\n-}\n-\n const assert = require('assert');\n const tls = require('tls');\n const fixtures = require('../common/fixtures');"
        },
        {
            "sha": "9b963e66294c320b8e1d7891a7cab191b608ad79",
            "filename": "test/parallel/test-tls-empty-sni-context.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-empty-sni-context.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-empty-sni-context.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-empty-sni-context.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -4,9 +4,6 @@ const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n-if (!process.features.tls_sni)\n-  common.skip('node compiled without OpenSSL or with old OpenSSL version.');\n-\n const assert = require('assert');\n const tls = require('tls');\n "
        },
        {
            "sha": "cf05f6967a967b2297193858d3ac920c474bf6b6",
            "filename": "test/parallel/test-tls-ocsp-callback.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-ocsp-callback.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-ocsp-callback.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-ocsp-callback.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -22,9 +22,6 @@\n 'use strict';\n const common = require('../common');\n \n-if (!process.features.tls_ocsp)\n-  common.skip('node compiled without OpenSSL or with old OpenSSL version.');\n-\n if (!common.opensslCli)\n   common.skip('node compiled without OpenSSL CLI.');\n "
        },
        {
            "sha": "375575c78ab635600720ffae45504284ee4b2a8f",
            "filename": "test/parallel/test-tls-sni-option.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-sni-option.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-sni-option.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-sni-option.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -24,9 +24,6 @@ const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n-if (!process.features.tls_sni)\n-  common.skip('node compiled without OpenSSL or with old OpenSSL version.');\n-\n const assert = require('assert');\n const tls = require('tls');\n const fixtures = require('../common/fixtures');"
        },
        {
            "sha": "073e95988a3a08996e2eac2b33b7fa5583c45475",
            "filename": "test/parallel/test-tls-sni-server-client.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-sni-server-client.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-sni-server-client.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-sni-server-client.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -24,9 +24,6 @@ const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n-if (!process.features.tls_sni)\n-  common.skip('node compiled without OpenSSL or with old OpenSSL version.');\n-\n const assert = require('assert');\n const tls = require('tls');\n const fixtures = require('../common/fixtures');"
        },
        {
            "sha": "1e1c82225309b4cedda3548506ad00609b66d5da",
            "filename": "test/parallel/test-tls-snicallback-error.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-snicallback-error.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-snicallback-error.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-snicallback-error.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -3,9 +3,6 @@ const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n-if (!process.features.tls_sni)\n-  common.skip('compiled without OpenSSL or with old OpenSSL version');\n-\n const assert = require('assert');\n const tls = require('tls');\n "
        },
        {
            "sha": "6b0a23f31b6eeba4b3cb424cffe749aba6261f54",
            "filename": "test/parallel/test-tls-socket-constructor-alpn-options-parsing.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-socket-constructor-alpn-options-parsing.js",
            "raw_url": "https://github.com/nodejs/node/raw/a76f0298184115971bac56dd369418786569f76d/test%2Fparallel%2Ftest-tls-socket-constructor-alpn-options-parsing.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-socket-constructor-alpn-options-parsing.js?ref=a76f0298184115971bac56dd369418786569f76d",
            "patch": "@@ -13,9 +13,6 @@ new tls.TLSSocket(null, {\n   ALPNProtocols: ['http/1.1'],\n });\n \n-if (!process.features.tls_alpn)\n-  common.skip('node compiled without ALPN feature of OpenSSL');\n-\n const assert = require('assert');\n const net = require('net');\n const fixtures = require('../common/fixtures');"
        }
    ],
    "stats": {
        "total": 115,
        "additions": 13,
        "deletions": 102
    }
}