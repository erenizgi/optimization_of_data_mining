{
    "author": "BridgeAR",
    "message": "os: lazy loaded\n\nPR-URL: https://github.com/nodejs/node/pull/20567\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>",
    "sha": "d478e52fe0bc396c8e65baf0861553a0d3de99db",
    "files": [
        {
            "sha": "91205af09ea88be2b845ed52a0a0ead41a7c76ee",
            "filename": "lib/assert.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/d478e52fe0bc396c8e65baf0861553a0d3de99db/lib%2Fassert.js",
            "raw_url": "https://github.com/nodejs/node/raw/d478e52fe0bc396c8e65baf0861553a0d3de99db/lib%2Fassert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fassert.js?ref=d478e52fe0bc396c8e65baf0861553a0d3de99db",
            "patch": "@@ -34,7 +34,7 @@ const { codes: {\n const { AssertionError, errorCache } = require('internal/assert');\n const { openSync, closeSync, readSync } = require('fs');\n const { inspect, types: { isPromise, isRegExp } } = require('util');\n-const { EOL } = require('os');\n+const { EOL } = require('internal/constants');\n const { NativeModule } = require('internal/bootstrap/loaders');\n \n // Escape control characters but not \\n and \\t to keep the line breaks and"
        },
        {
            "sha": "dfa30bea306e65a7480963b136ef3fc9a3d964ed",
            "filename": "lib/internal/constants.js",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/d478e52fe0bc396c8e65baf0861553a0d3de99db/lib%2Finternal%2Fconstants.js",
            "raw_url": "https://github.com/nodejs/node/raw/d478e52fe0bc396c8e65baf0861553a0d3de99db/lib%2Finternal%2Fconstants.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fconstants.js?ref=d478e52fe0bc396c8e65baf0861553a0d3de99db",
            "patch": "@@ -1,5 +1,7 @@\n 'use strict';\n \n+const isWindows = process.platform === 'win32';\n+\n module.exports = {\n   // Alphabet chars.\n   CHAR_UPPERCASE_A: 65, /* A */\n@@ -45,4 +47,6 @@ module.exports = {\n   // Digits\n   CHAR_0: 48, /* 0 */\n   CHAR_9: 57, /* 9 */\n+\n+  EOL: isWindows ? '\\r\\n' : '\\n'\n };"
        },
        {
            "sha": "1e60909f66a6365a23b1ff56f05f1c352f04a9e1",
            "filename": "lib/internal/tty.js",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/d478e52fe0bc396c8e65baf0861553a0d3de99db/lib%2Finternal%2Ftty.js",
            "raw_url": "https://github.com/nodejs/node/raw/d478e52fe0bc396c8e65baf0861553a0d3de99db/lib%2Finternal%2Ftty.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ftty.js?ref=d478e52fe0bc396c8e65baf0861553a0d3de99db",
            "patch": "@@ -22,9 +22,7 @@\n \n 'use strict';\n \n-const { release } = require('os');\n-\n-const OSRelease = release().split('.');\n+let OSRelease;\n \n const COLORS_2 = 1;\n const COLORS_16 = 4;\n@@ -75,6 +73,11 @@ function getColorDepth(env = process.env) {\n   }\n \n   if (process.platform === 'win32') {\n+    // Lazy load for startup performance.\n+    if (OSRelease === undefined) {\n+      const { release } = require('os');\n+      OSRelease = release().split('.');\n+    }\n     // Windows 10 build 10586 is the first Windows release that supports 256\n     // colors. Windows 10 build 14931 is the first release that supports\n     // 16m/TrueColor."
        }
    ],
    "stats": {
        "total": 15,
        "additions": 11,
        "deletions": 4
    }
}