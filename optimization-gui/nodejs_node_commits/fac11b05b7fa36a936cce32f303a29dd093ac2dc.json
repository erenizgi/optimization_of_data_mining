{
    "author": "dgholz",
    "message": "doc: reword stream docs to clarify that decodeStrings encodes strings\n\nI was implementing a Writable stream and misunderstood `decodeStrings`\nto mean 'will decode `Buffer`s into `string`s before calling `_write`'.\nThis change adds a little more detail to the description of\n`decodeStrings` to clarify its effect on a Writable stream & what gets\npassed to `_write`.\n\nChanging the name of the option to `encodeStrings` would make it much\neasier to understand, but the name was chosen in 2012 and the option\nused in many projects (22k mentions of 'decodeStringsr in JS projects in\nGitHub). Deprecating the old name & rolling out a replacement is beyond\nmy capabilities as a first-time contributor.\n\nPR-URL: https://github.com/nodejs/node/pull/25468\nFixes: https://github.com/nodejs/node/issues/25464\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "fac11b05b7fa36a936cce32f303a29dd093ac2dc",
    "files": [
        {
            "sha": "9e20370528f20061e2654cf071247318c808d0a2",
            "filename": "doc/api/stream.md",
            "status": "modified",
            "additions": 16,
            "deletions": 10,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/fac11b05b7fa36a936cce32f303a29dd093ac2dc/doc%2Fapi%2Fstream.md",
            "raw_url": "https://github.com/nodejs/node/raw/fac11b05b7fa36a936cce32f303a29dd093ac2dc/doc%2Fapi%2Fstream.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fstream.md?ref=fac11b05b7fa36a936cce32f303a29dd093ac2dc",
            "patch": "@@ -1537,10 +1537,12 @@ changes:\n   * `highWaterMark` {number} Buffer level when\n     [`stream.write()`][stream-write] starts returning `false`. **Default:**\n     `16384` (16kb), or `16` for `objectMode` streams.\n-  * `decodeStrings` {boolean} Whether or not to encode strings as\n-    `Buffer`s before passing them to [`stream._write()`][stream-_write],\n-    using the encoding specified in the [`stream.write()`][stream-write] call.\n-    **Default:** `true`.\n+  * `decodeStrings` {boolean} Whether to encode `string`s passed to\n+    [`stream.write()`][stream-write] to `Buffer`s (with the encoding\n+    specified in the [`stream.write()`][stream-write] call) before passing\n+    them to [`stream._write()`][stream-_write]. Other types of data are not\n+    converted (i.e. `Buffer`s are not decoded into `string`s). Setting to\n+    false will prevent `string`s from being converted.  **Default:** `true`.\n   * `defaultEncoding` {string} The default encoding that is used when no\n     encoding is specified as an argument to [`stream.write()`][stream-write].\n     **Default:** `'utf8'`.\n@@ -1606,9 +1608,11 @@ const myWritable = new Writable({\n \n #### writable.\\_write(chunk, encoding, callback)\n \n-* `chunk` {Buffer|string|any} The chunk to be written. Will **always**\n-  be a buffer unless the `decodeStrings` option was set to `false`\n-  or the stream is operating in object mode.\n+* `chunk` {Buffer|string|any} The `Buffer` to be written, converted from the\n+  `string` passed to [`stream.write()`][stream-write]. If the stream's\n+  `decodeStrings` option is `false` or the stream is operating in object mode,\n+  the chunk will not be converted & will be whatever was passed to\n+  [`stream.write()`][stream-write].\n * `encoding` {string} If the chunk is a string, then `encoding` is the\n   character encoding of that string. If chunk is a `Buffer`, or if the\n   stream is operating in object mode, `encoding` may be ignored.\n@@ -2301,9 +2305,11 @@ user programs.\n \n #### transform.\\_transform(chunk, encoding, callback)\n \n-* `chunk` {Buffer|string|any} The chunk to be transformed. Will **always**\n-  be a buffer unless the `decodeStrings` option was set to `false`\n-  or the stream is operating in object mode.\n+* `chunk` {Buffer|string|any} The `Buffer` to be transformed, converted from\n+  the `string` passed to [`stream.write()`][stream-write]. If the stream's\n+  `decodeStrings` option is `false` or the stream is operating in object mode,\n+  the chunk will not be converted & will be whatever was passed to\n+  [`stream.write()`][stream-write].\n * `encoding` {string} If the chunk is a string, then this is the\n   encoding type. If chunk is a buffer, then this is the special\n   value - 'buffer', ignore it in this case."
        }
    ],
    "stats": {
        "total": 26,
        "additions": 16,
        "deletions": 10
    }
}