{
    "author": "targos",
    "message": "deps: update V8 to 6.7.288.43\n\nPR-URL: https://github.com/nodejs/node/pull/19989\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Matheus Marchini <matheus@sthima.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Myles Borins <myles.borins@gmail.com>",
    "sha": "352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
    "files": [
        {
            "sha": "630c3f2a09d3f88b7a787ca4ff4766a8bdc7ee63",
            "filename": "deps/v8/.gitignore",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2F.gitignore",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2F.gitignore",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.gitignore?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -49,24 +49,25 @@\n /test/fuzzer/wasm_corpus.tar.gz\n /test/mozilla/data\n /test/test262/data\n-/test/test262/data.tar\n /test/test262/harness\n /test/wasm-js\n /test/wasm-spec-tests/tests\n /test/wasm-spec-tests/tests.tar.gz\n-/testing/gmock\n-/testing/gtest/*\n-!/testing/gtest/include\n-/testing/gtest/include/*\n-!/testing/gtest/include/gtest\n-/testing/gtest/include/gtest/*\n-!/testing/gtest/include/gtest/gtest_prod.h\n /third_party/*\n+!/third_party/antlr4\n !/third_party/binutils\n-!/third_party/eu-strip\n !/third_party/inspector_protocol\n !/third_party/colorama\n /third_party/colorama/src\n+!/third_party/googletest\n+/third_party/googletest/src/*\n+!/third_party/googletest/src/googletest\n+/third_party/googletest/src/googletest/*\n+!/third_party/googletest/src/googletest/include\n+/third_party/googletest/src/googletest/include/*\n+!/third_party/googletest/src/googletest/include/gtest\n+/third_party/googletest/src/googletest/include/gtest/*\n+!/third_party/googletest/src/googletest/include/gtest/gtest_prod.h\n /tools/clang\n /tools/gcmole/gcmole-tools\n /tools/gcmole/gcmole-tools.tar.gz"
        },
        {
            "sha": "573fd030d80cf1a787e5eb3f8dbd653117f18336",
            "filename": "deps/v8/.gn",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2F.gn",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2F.gn",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.gn?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -21,5 +21,4 @@ check_targets = []\n # These are the list of GN files that run exec_script. This whitelist exists\n # to force additional review for new uses of exec_script, which is strongly\n # discouraged except for gypi_to_gn calls.\n-exec_script_whitelist =\n-    build_dotfile_settings.exec_script_whitelist + [ \"//test/test262/BUILD.gn\" ]\n+exec_script_whitelist = build_dotfile_settings.exec_script_whitelist + []"
        },
        {
            "sha": "6a9ce3f693ef112cee4d8a9da50aaf77497dd3a7",
            "filename": "deps/v8/.vpython",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2F.vpython",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2F.vpython",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2F.vpython?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -30,3 +30,16 @@ wheel: <\n   name: \"infra/python/wheels/psutil/${vpython_platform}\"\n   version: \"version:5.2.2\"\n >\n+\n+# Used by:\n+#   build/toolchain/win\n+wheel: <\n+  name: \"infra/python/wheels/pypiwin32/${vpython_platform}\"\n+  version: \"version:219\"\n+  match_tag: <\n+    platform: \"win32\"\n+  >\n+  match_tag: <\n+    platform: \"win_amd64\"\n+  >\n+>"
        },
        {
            "sha": "3251716f2a55f584e8300b03a001ad4ef826b7a2",
            "filename": "deps/v8/AUTHORS",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FAUTHORS",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FAUTHORS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FAUTHORS?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -70,7 +70,6 @@ Felix Geisendörfer <haimuiba@gmail.com>\n Filipe David Manana <fdmanana@gmail.com>\n Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\n Geoffrey Garside <ggarside@gmail.com>\n-Gus Caplan <me@gus.host>\n Gwang Yoon Hwang <ryumiel@company100.net>\n Henrique Ferreiro <henrique.ferreiro@gmail.com>\n Hirofumi Mako <mkhrfm@gmail.com>\n@@ -99,6 +98,7 @@ Maciej Małecki <me@mmalecki.com>\n Marcin Cieślak <saper@marcincieslak.com>\n Marcin Wiącek <marcin@mwiacek.com>\n Mateusz Czeladka <mateusz.szczap@gmail.com>\n+Matheus Marchini <matheus@sthima.com.br>\n Mathias Bynens <mathias@qiwi.be>\n Matt Hanselman <mjhanselman@gmail.com>\n Matthew Sporleder <msporleder@gmail.com>\n@@ -138,13 +138,15 @@ Seo Sanghyeon <sanxiyn@gmail.com>\n Stefan Penner <stefan.penner@gmail.com>\n Sylvestre Ledru <sledru@mozilla.com>\n Taketoshi Aono <brn@b6n.ch>\n+Teddy Katz <teddy.katz@gmail.com>\n Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\n Tobias Burnus <burnus@net-b.de>\n Victor Costan <costan@gmail.com>\n Vlad Burlik <vladbph@gmail.com>\n Vladimir Krivosheev <develar@gmail.com>\n Vladimir Shutoff <vovan@shutoff.ru>\n Wiktor Garbacz <wiktor.garbacz@gmail.com>\n+Xiaoyin Liu <xiaoyin.l@outlook.com>\n Yong Wang <ccyongwang@tencent.com>\n Yu Yin <xwafish@gmail.com>\n Zac Hansen <xaxxon@gmail.com>"
        },
        {
            "sha": "4b48f7d6874df9617aedf59ee40bb5a1b2737ca2",
            "filename": "deps/v8/BUILD.gn",
            "status": "modified",
            "additions": 162,
            "deletions": 65,
            "changes": 227,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FBUILD.gn",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FBUILD.gn",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FBUILD.gn?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -9,19 +9,23 @@ import(\"//build/config/host_byteorder.gni\")\n import(\"//build/config/jumbo.gni\")\n import(\"//build/config/mips.gni\")\n import(\"//build/config/sanitizers/sanitizers.gni\")\n+import(\"//build_overrides/build.gni\")\n \n if (is_android) {\n   import(\"//build/config/android/rules.gni\")\n }\n \n import(\"gni/v8.gni\")\n-import(\"gni/isolate.gni\")\n import(\"snapshot_toolchain.gni\")\n \n declare_args() {\n   # Print to stdout on Android.\n   v8_android_log_stdout = false\n \n+  # Turns on all V8 debug features. Enables running V8 in a pseudo debug mode\n+  # within a release Chrome.\n+  v8_enable_debugging_features = is_debug\n+\n   # Sets -DV8_ENABLE_FUTURE.\n   v8_enable_future = false\n \n@@ -65,7 +69,8 @@ declare_args() {\n   v8_enable_fast_mksnapshot = false\n \n   # Enable embedded builtins.\n-  # TODO(jgruber,v8:6666): Support ia32.\n+  # TODO(jgruber,v8:6666): Support ia32 and maybe MSVC.\n+  # TODO(jgruber,v8:6666): Re-enable after the M67 branch point.\n   v8_enable_embedded_builtins = false\n \n   # Enable code-generation-time checking of types in the CodeStubAssembler.\n@@ -142,29 +147,33 @@ declare_args() {\n \n   # Enable mitigations for executing untrusted code.\n   v8_untrusted_code_mitigations = true\n+\n+  # Enable minor mark compact.\n+  v8_enable_minor_mc = true\n }\n \n # Derived defaults.\n if (v8_enable_verify_heap == \"\") {\n-  v8_enable_verify_heap = is_debug\n+  v8_enable_verify_heap = v8_enable_debugging_features\n }\n if (v8_enable_object_print == \"\") {\n-  v8_enable_object_print = is_debug\n+  v8_enable_object_print = v8_enable_debugging_features\n }\n if (v8_enable_disassembler == \"\") {\n-  v8_enable_disassembler = is_debug\n+  v8_enable_disassembler = v8_enable_debugging_features\n }\n if (v8_enable_trace_maps == \"\") {\n-  v8_enable_trace_maps = is_debug\n+  v8_enable_trace_maps = v8_enable_debugging_features\n }\n if (v8_enable_test_features == \"\") {\n-  v8_enable_test_features = is_debug || dcheck_always_on\n+  v8_enable_test_features = v8_enable_debugging_features || dcheck_always_on\n }\n if (v8_enable_v8_checks == \"\") {\n-  v8_enable_v8_checks = is_debug\n+  v8_enable_v8_checks = v8_enable_debugging_features\n }\n if (v8_check_microtasks_scopes_consistency == \"\") {\n-  v8_check_microtasks_scopes_consistency = is_debug || dcheck_always_on\n+  v8_check_microtasks_scopes_consistency =\n+      v8_enable_debugging_features || dcheck_always_on\n }\n \n # Specifies if the target build is a simulator build. Comparing target cpu\n@@ -268,6 +277,9 @@ config(\"features\") {\n   if (v8_enable_vtunejit) {\n     defines += [ \"ENABLE_VTUNE_JIT_INTERFACE\" ]\n   }\n+  if (v8_enable_minor_mc) {\n+    defines += [ \"ENABLE_MINOR_MC\" ]\n+  }\n   if (v8_enable_object_print) {\n     defines += [ \"OBJECT_PRINT\" ]\n   }\n@@ -326,6 +338,9 @@ config(\"features\") {\n   if (v8_enable_embedded_builtins) {\n     defines += [ \"V8_EMBEDDED_BUILTINS\" ]\n   }\n+  if (v8_use_multi_snapshots) {\n+    defines += [ \"V8_MULTI_SNAPSHOTS\" ]\n+  }\n }\n \n config(\"toolchain\") {\n@@ -497,7 +512,7 @@ config(\"toolchain\") {\n   # TODO(jochen): Support v8_enable_prof on Windows.\n   # TODO(jochen): Add support for compiling with simulators.\n \n-  if (is_debug) {\n+  if (v8_enable_debugging_features) {\n     if (is_linux && v8_enable_backtrace) {\n       ldflags += [ \"-rdynamic\" ]\n     }\n@@ -527,6 +542,8 @@ config(\"toolchain\") {\n \n   if (is_clang) {\n     cflags += [\n+      \"-Wmissing-field-initializers\",\n+\n       # TODO(hans): Remove once http://crbug.com/428099 is resolved.\n       \"-Winconsistent-missing-override\",\n     ]\n@@ -602,8 +619,6 @@ action(\"js2c\") {\n     \"src/js/prologue.js\",\n     \"src/js/array.js\",\n     \"src/js/typedarray.js\",\n-    \"src/js/messages.js\",\n-    \"src/js/spread.js\",\n     \"src/debug/mirrors.js\",\n     \"src/debug/debug.js\",\n     \"src/debug/liveedit.js\",\n@@ -717,6 +732,8 @@ action(\"d8_js2c\") {\n if (is_android && enable_java_templates) {\n   android_assets(\"v8_external_startup_data_assets\") {\n     if (v8_use_external_startup_data) {\n+      # We don't support side-by-side snapshots on Android within Chromium.\n+      assert(!v8_use_multi_snapshots)\n       deps = [\n         \"//v8\",\n       ]\n@@ -756,6 +773,10 @@ if (v8_use_external_startup_data) {\n       \"$root_out_dir/natives_blob.bin\",\n     ]\n \n+    data = [\n+      \"$root_out_dir/natives_blob.bin\",\n+    ]\n+\n     script = \"tools/concatenate-files.py\"\n \n     args = rebase_path(sources + outputs, root_build_dir)\n@@ -786,6 +807,8 @@ action(\"postmortem-metadata\") {\n     \"src/objects/js-array.h\",\n     \"src/objects/js-regexp-inl.h\",\n     \"src/objects/js-regexp.h\",\n+    \"src/objects/js-regexp-string-iterator-inl.h\",\n+    \"src/objects/js-regexp-string-iterator.h\",\n     \"src/objects/map.h\",\n     \"src/objects/map-inl.h\",\n     \"src/objects/script.h\",\n@@ -804,8 +827,24 @@ action(\"postmortem-metadata\") {\n          rebase_path(sources, root_build_dir)\n }\n \n-if (v8_use_snapshot) {\n-  action(\"run_mksnapshot\") {\n+# Template to generate different V8 snapshots based on different runtime flags.\n+# Can be invoked with run_mksnapshot(<name>). The target will resolve to\n+# run_mksnapshot_<name>. If <name> is \"default\", no file suffixes will be used.\n+# Otherwise files are suffixed, e.g. embedded_<name>.cc and\n+# snapshot_blob_<name>.bin.\n+#\n+# The template exposes the variables:\n+#   args: additional flags for mksnapshots\n+#   embedded_suffix: a camel case suffix for method names in the embedded\n+#       snapshot.\n+template(\"run_mksnapshot\") {\n+  name = target_name\n+  if (name == \"default\") {\n+    suffix = \"\"\n+  } else {\n+    suffix = \"_$name\"\n+  }\n+  action(\"run_mksnapshot_\" + name) {\n     visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n \n     deps = [\n@@ -816,19 +855,33 @@ if (v8_use_snapshot) {\n \n     sources = []\n \n-    outputs = [\n-      \"$target_gen_dir/snapshot.cc\",\n-    ]\n+    outputs = []\n+\n+    data = []\n \n     args = [\n       \"./\" + rebase_path(get_label_info(\":mksnapshot($v8_snapshot_toolchain)\",\n                                         \"root_out_dir\") + \"/mksnapshot\",\n                          root_build_dir),\n       \"--turbo_instruction_scheduling\",\n-      \"--startup_src\",\n-      rebase_path(\"$target_gen_dir/snapshot.cc\", root_build_dir),\n     ]\n \n+    args += invoker.args\n+\n+    if (v8_enable_embedded_builtins) {\n+      outputs += [ \"$target_gen_dir/embedded${suffix}.cc\" ]\n+      args += [\n+        \"--embedded_src\",\n+        rebase_path(\"$target_gen_dir/embedded${suffix}.cc\", root_build_dir),\n+      ]\n+      if (invoker.embedded_variant != \"\") {\n+        args += [\n+          \"--embedded_variant\",\n+          invoker.embedded_variant,\n+        ]\n+      }\n+    }\n+\n     if (v8_random_seed != \"0\") {\n       args += [\n         \"--random-seed\",\n@@ -848,10 +901,17 @@ if (v8_use_snapshot) {\n     }\n \n     if (v8_use_external_startup_data) {\n-      outputs += [ \"$root_out_dir/snapshot_blob.bin\" ]\n+      outputs += [ \"$root_out_dir/snapshot_blob${suffix}.bin\" ]\n+      data += [ \"$root_out_dir/snapshot_blob${suffix}.bin\" ]\n       args += [\n         \"--startup_blob\",\n-        rebase_path(\"$root_out_dir/snapshot_blob.bin\", root_build_dir),\n+        rebase_path(\"$root_out_dir/snapshot_blob${suffix}.bin\", root_build_dir),\n+      ]\n+    } else {\n+      outputs += [ \"$target_gen_dir/snapshot${suffix}.cc\" ]\n+      args += [\n+        \"--startup_src\",\n+        rebase_path(\"$target_gen_dir/snapshot${suffix}.cc\", root_build_dir),\n       ]\n     }\n \n@@ -869,6 +929,23 @@ if (v8_use_snapshot) {\n   }\n }\n \n+if (v8_use_snapshot) {\n+  run_mksnapshot(\"default\") {\n+    args = []\n+    if (v8_enable_embedded_builtins) {\n+      embedded_variant = \"Default\"\n+    }\n+  }\n+  if (v8_use_multi_snapshots) {\n+    run_mksnapshot(\"trusted\") {\n+      args = [ \"--no-untrusted-code-mitigations\" ]\n+      if (v8_enable_embedded_builtins) {\n+        embedded_variant = \"Trusted\"\n+      }\n+    }\n+  }\n+}\n+\n action(\"v8_dump_build_config\") {\n   script = \"tools/testrunner/utils/dump_build_config.py\"\n   outputs = [\n@@ -882,7 +959,7 @@ action(\"v8_dump_build_config\") {\n     \"is_asan=$is_asan\",\n     \"is_cfi=$is_cfi\",\n     \"is_component_build=$is_component_build\",\n-    \"is_debug=$is_debug\",\n+    \"is_debug=$v8_enable_debugging_features\",\n     \"is_gcov_coverage=$is_gcov_coverage\",\n     \"is_msan=$is_msan\",\n     \"is_tsan=$is_tsan\",\n@@ -940,12 +1017,13 @@ v8_source_set(\"v8_nosnapshot\") {\n     \"$target_gen_dir/experimental-extras-libraries.cc\",\n     \"$target_gen_dir/extras-libraries.cc\",\n     \"$target_gen_dir/libraries.cc\",\n+    \"src/snapshot/embedded-empty.cc\",\n     \"src/snapshot/snapshot-empty.cc\",\n   ]\n \n   if (use_jumbo_build == true) {\n     jumbo_excluded_sources = [\n-      # TODO(mostynb@opera.com): don't exclude these http://crbug.com/752428\n+      # TODO(mostynb@vewd.com): don't exclude these http://crbug.com/752428\n       # Generated source, contains same variable names as libraries.cc\n       \"$target_gen_dir/experimental-extras-libraries.cc\",\n       \"$target_gen_dir/libraries.cc\",\n@@ -955,7 +1033,7 @@ v8_source_set(\"v8_nosnapshot\") {\n   configs = [ \":internal_config\" ]\n }\n \n-if (v8_use_snapshot) {\n+if (v8_use_snapshot && !v8_use_external_startup_data) {\n   v8_source_set(\"v8_snapshot\") {\n     # Only targets in this file and the top-level visibility target can\n     # depend on this.\n@@ -973,7 +1051,7 @@ if (v8_use_snapshot) {\n     public_deps = [\n       # This should be public so downstream targets can declare the snapshot\n       # output file as their inputs.\n-      \":run_mksnapshot\",\n+      \":run_mksnapshot_default\",\n     ]\n \n     sources = [\n@@ -984,9 +1062,13 @@ if (v8_use_snapshot) {\n       \"src/setup-isolate-deserialize.cc\",\n     ]\n \n+    if (v8_enable_embedded_builtins) {\n+      sources += [ \"$target_gen_dir/embedded.cc\" ]\n+    }\n+\n     if (use_jumbo_build == true) {\n       jumbo_excluded_sources = [\n-        # TODO(mostynb@opera.com): don't exclude these http://crbug.com/752428\n+        # TODO(mostynb@vewd.com): don't exclude these http://crbug.com/752428\n         # Generated source, contains same variable names as libraries.cc\n         \"$target_gen_dir/experimental-extras-libraries.cc\",\n         \"$target_gen_dir/libraries.cc\",\n@@ -997,7 +1079,7 @@ if (v8_use_snapshot) {\n   }\n }\n \n-if (v8_use_external_startup_data) {\n+if (v8_use_snapshot && v8_use_external_startup_data) {\n   v8_source_set(\"v8_external_snapshot\") {\n     visibility = [ \":*\" ]  # Only targets in this file can depend on this.\n \n@@ -1009,15 +1091,34 @@ if (v8_use_external_startup_data) {\n     ]\n     public_deps = [\n       \":natives_blob\",\n-      \":run_mksnapshot\",\n+      \":run_mksnapshot_default\",\n     ]\n \n+    if (v8_use_multi_snapshots) {\n+      public_deps += [ \":run_mksnapshot_trusted\" ]\n+    }\n+\n     sources = [\n       \"src/setup-isolate-deserialize.cc\",\n       \"src/snapshot/natives-external.cc\",\n       \"src/snapshot/snapshot-external.cc\",\n     ]\n \n+    if (v8_enable_embedded_builtins) {\n+      sources += [ \"$target_gen_dir/embedded.cc\" ]\n+\n+      if (v8_use_multi_snapshots) {\n+        sources += [ \"$target_gen_dir/embedded_trusted.cc\" ]\n+\n+        if (use_jumbo_build == true) {\n+          jumbo_excluded_sources = [\n+            # Duplicated symbols with embedded.cc\n+            \"$target_gen_dir/embedded_trusted.cc\",\n+          ]\n+        }\n+      }\n+    }\n+\n     configs = [ \":internal_config\" ]\n   }\n }\n@@ -1105,7 +1206,7 @@ v8_source_set(\"v8_initializers\") {\n \n   if (use_jumbo_build == true) {\n     jumbo_excluded_sources = [\n-      # TODO(mostynb@opera.com): don't exclude these http://crbug.com/752428\n+      # TODO(mostynb@vewd.com): don't exclude these http://crbug.com/752428\n       \"src/builtins/builtins-async-iterator-gen.cc\",\n       \"src/builtins/builtins-async-generator-gen.cc\",\n \n@@ -1232,7 +1333,6 @@ v8_source_set(\"v8_base\") {\n     \"src/allocation.cc\",\n     \"src/allocation.h\",\n     \"src/api-arguments-inl.h\",\n-    \"src/api-arguments.cc\",\n     \"src/api-arguments.h\",\n     \"src/api-natives.cc\",\n     \"src/api-natives.h\",\n@@ -1350,8 +1450,6 @@ v8_source_set(\"v8_base\") {\n     \"src/compilation-cache.h\",\n     \"src/compilation-dependencies.cc\",\n     \"src/compilation-dependencies.h\",\n-    \"src/compilation-info.cc\",\n-    \"src/compilation-info.h\",\n     \"src/compilation-statistics.cc\",\n     \"src/compilation-statistics.h\",\n     \"src/compiler-dispatcher/compiler-dispatcher-job.cc\",\n@@ -1634,9 +1732,8 @@ v8_source_set(\"v8_base\") {\n     \"src/extensions/trigger-failure-extension.h\",\n     \"src/external-reference-table.cc\",\n     \"src/external-reference-table.h\",\n-    \"src/factory-inl.h\",\n-    \"src/factory.cc\",\n-    \"src/factory.h\",\n+    \"src/external-reference.cc\",\n+    \"src/external-reference.h\",\n     \"src/fast-dtoa.cc\",\n     \"src/fast-dtoa.h\",\n     \"src/feedback-vector-inl.h\",\n@@ -1680,6 +1777,9 @@ v8_source_set(\"v8_base\") {\n     \"src/heap/concurrent-marking.h\",\n     \"src/heap/embedder-tracing.cc\",\n     \"src/heap/embedder-tracing.h\",\n+    \"src/heap/factory-inl.h\",\n+    \"src/heap/factory.cc\",\n+    \"src/heap/factory.h\",\n     \"src/heap/gc-idle-time-handler.cc\",\n     \"src/heap/gc-idle-time-handler.h\",\n     \"src/heap/gc-tracer.cc\",\n@@ -1866,12 +1966,16 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/js-promise-inl.h\",\n     \"src/objects/js-promise.h\",\n     \"src/objects/js-regexp-inl.h\",\n+    \"src/objects/js-regexp-string-iterator-inl.h\",\n+    \"src/objects/js-regexp-string-iterator.h\",\n     \"src/objects/js-regexp.h\",\n     \"src/objects/literal-objects-inl.h\",\n     \"src/objects/literal-objects.cc\",\n     \"src/objects/literal-objects.h\",\n     \"src/objects/map-inl.h\",\n     \"src/objects/map.h\",\n+    \"src/objects/maybe-object-inl.h\",\n+    \"src/objects/maybe-object.h\",\n     \"src/objects/microtask-inl.h\",\n     \"src/objects/microtask.h\",\n     \"src/objects/module-inl.h\",\n@@ -1897,6 +2001,8 @@ v8_source_set(\"v8_base\") {\n     \"src/objects/string.h\",\n     \"src/objects/template-objects.cc\",\n     \"src/objects/template-objects.h\",\n+    \"src/optimized-compilation-info.cc\",\n+    \"src/optimized-compilation-info.h\",\n     \"src/ostreams.cc\",\n     \"src/ostreams.h\",\n     \"src/parsing/duplicate-finder.h\",\n@@ -2051,6 +2157,7 @@ v8_source_set(\"v8_base\") {\n     \"src/snapshot/default-serializer-allocator.h\",\n     \"src/snapshot/deserializer.cc\",\n     \"src/snapshot/deserializer.h\",\n+    \"src/snapshot/macros.h\",\n     \"src/snapshot/natives-common.cc\",\n     \"src/snapshot/natives.h\",\n     \"src/snapshot/object-deserializer.cc\",\n@@ -2113,6 +2220,8 @@ v8_source_set(\"v8_base\") {\n     \"src/unicode-inl.h\",\n     \"src/unicode.cc\",\n     \"src/unicode.h\",\n+    \"src/unoptimized-compilation-info.cc\",\n+    \"src/unoptimized-compilation-info.h\",\n     \"src/uri.cc\",\n     \"src/uri.h\",\n     \"src/utils-inl.h\",\n@@ -2162,8 +2271,6 @@ v8_source_set(\"v8_base\") {\n     \"src/wasm/wasm-code-manager.h\",\n     \"src/wasm/wasm-code-specialization.cc\",\n     \"src/wasm/wasm-code-specialization.h\",\n-    \"src/wasm/wasm-code-wrapper.cc\",\n-    \"src/wasm/wasm-code-wrapper.h\",\n     \"src/wasm/wasm-constants.h\",\n     \"src/wasm/wasm-debug.cc\",\n     \"src/wasm/wasm-engine.cc\",\n@@ -2196,7 +2303,6 @@ v8_source_set(\"v8_base\") {\n     \"src/zone/accounting-allocator.cc\",\n     \"src/zone/accounting-allocator.h\",\n     \"src/zone/zone-allocator.h\",\n-    \"src/zone/zone-allocator.h\",\n     \"src/zone/zone-chunk-list.h\",\n     \"src/zone/zone-containers.h\",\n     \"src/zone/zone-handle-set.h\",\n@@ -2209,7 +2315,7 @@ v8_source_set(\"v8_base\") {\n \n   if (use_jumbo_build == true) {\n     jumbo_excluded_sources = [\n-      # TODO(mostynb@opera.com): don't exclude these http://crbug.com/752428\n+      # TODO(mostynb@vewd.com): don't exclude these http://crbug.com/752428\n       \"src/profiler/heap-snapshot-generator.cc\",  # Macro clash in mman-linux.h\n \n       # These source files take an unusually large amount of time to\n@@ -2364,7 +2470,7 @@ v8_source_set(\"v8_base\") {\n     ]\n     if (use_jumbo_build) {\n       jumbo_excluded_sources += [\n-        # TODO(mostynb@opera.com): fix this code so it doesn't need\n+        # TODO(mostynb@vewd.com): fix this code so it doesn't need\n         # to be excluded, see the comments inside.\n         \"src/arm64/instructions-arm64-constants.cc\",\n       ]\n@@ -2592,13 +2698,17 @@ v8_component(\"v8_libbase\") {\n \n   public_configs = [ \":libbase_config\" ]\n \n+  data = []\n+\n+  data_deps = []\n+\n   defines = []\n \n   if (is_component_build) {\n     defines = [ \"BUILDING_V8_BASE_SHARED\" ]\n   }\n \n-  if (is_posix) {\n+  if (is_posix || is_fuchsia) {\n     sources += [\n       \"src/base/platform/platform-posix.cc\",\n       \"src/base/platform/platform-posix.h\",\n@@ -2680,6 +2790,12 @@ v8_component(\"v8_libbase\") {\n       \"winmm.lib\",\n       \"ws2_32.lib\",\n     ]\n+\n+    data_deps += [ \"//build/win:runtime_libs\" ]\n+  }\n+\n+  if (is_tsan && !build_with_chromium) {\n+    data += [ \"tools/sanitizers/tsan_suppressions.txt\" ]\n   }\n \n   # TODO(jochen): Add support for qnx, freebsd, openbsd, netbsd, and solaris.\n@@ -2691,12 +2807,12 @@ v8_component(\"v8_libplatform\") {\n     \"include/libplatform/libplatform-export.h\",\n     \"include/libplatform/libplatform.h\",\n     \"include/libplatform/v8-tracing.h\",\n-    \"src/libplatform/default-background-task-runner.cc\",\n-    \"src/libplatform/default-background-task-runner.h\",\n     \"src/libplatform/default-foreground-task-runner.cc\",\n     \"src/libplatform/default-foreground-task-runner.h\",\n     \"src/libplatform/default-platform.cc\",\n     \"src/libplatform/default-platform.h\",\n+    \"src/libplatform/default-worker-threads-task-runner.cc\",\n+    \"src/libplatform/default-worker-threads-task-runner.h\",\n     \"src/libplatform/task-queue.cc\",\n     \"src/libplatform/task-queue.h\",\n     \"src/libplatform/tracing/trace-buffer.cc\",\n@@ -2834,10 +2950,6 @@ group(\"gn_all\") {\n   if (want_v8_shell) {\n     deps += [ \":v8_shell\" ]\n   }\n-\n-  if (v8_test_isolation_mode != \"noop\") {\n-    deps += [ \":d8_run\" ]\n-  }\n }\n \n group(\"v8_clusterfuzz\") {\n@@ -2855,13 +2967,6 @@ group(\"v8_clusterfuzz\") {\n       \":d8(//build/toolchain/linux:clang_x86_v8_arm)\",\n     ]\n   }\n-\n-  if (v8_test_isolation_mode != \"noop\") {\n-    deps += [\n-      \"test:d8_default_run\",\n-      \"tools:run-num-fuzzer_run\",\n-    ]\n-  }\n }\n \n group(\"v8_archive\") {\n@@ -2872,7 +2977,7 @@ group(\"v8_archive\") {\n \n group(\"v8_fuzzers\") {\n   testonly = true\n-  deps = [\n+  data_deps = [\n     \":v8_simple_json_fuzzer\",\n     \":v8_simple_multi_return_fuzzer\",\n     \":v8_simple_parser_fuzzer\",\n@@ -2979,7 +3084,7 @@ v8_executable(\"d8\") {\n     \"//build/win:default_exe_manifest\",\n   ]\n \n-  if (is_posix) {\n+  if (is_posix || is_fuchsia) {\n     sources += [ \"src/d8-posix.cc\" ]\n   } else if (is_win) {\n     sources += [ \"src/d8-windows.cc\" ]\n@@ -2992,18 +3097,10 @@ v8_executable(\"d8\") {\n   defines = []\n \n   if (v8_enable_vtunejit) {\n-    deps += [ \"//src/third_party/vtune:v8_vtune\" ]\n+    deps += [ \"src/third_party/vtune:v8_vtune\" ]\n   }\n }\n \n-v8_isolate_run(\"d8\") {\n-  deps = [\n-    \":d8\",\n-  ]\n-\n-  isolate = \"//src/d8.isolate\"\n-}\n-\n v8_executable(\"v8_hello_world\") {\n   sources = [\n     \"samples/hello-world.cc\","
        },
        {
            "sha": "e6b825092c4a1d9e4703ece0361b5007e8cef727",
            "filename": "deps/v8/ChangeLog",
            "status": "modified",
            "additions": 1490,
            "deletions": 0,
            "changes": 1490,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FChangeLog",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FChangeLog",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FChangeLog?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -1,3 +1,1493 @@\n+2018-04-11: Version 6.7.288\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-11: Version 6.7.287\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-11: Version 6.7.286\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-11: Version 6.7.285\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-11: Version 6.7.284\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.283\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.282\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.281\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.280\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.279\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.278\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.277\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.276\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.275\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.274\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.273\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.272\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.271\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.270\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-10: Version 6.7.269\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.268\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.267\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.266\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.265\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.264\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.263\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.262\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.261\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.260\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.259\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.258\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.257\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.256\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.255\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.254\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.253\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.252\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-09: Version 6.7.251\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.250\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.249\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.248\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.247\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.246\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.245\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.244\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.243\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.242\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-06: Version 6.7.241\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.240\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.239\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.238\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.237\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.236\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.235\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.234\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.233\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.232\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.231\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.230\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.229\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-05: Version 6.7.228\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.227\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.226\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.225\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.224\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.223\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.222\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.221\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.220\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.219\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.218\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.217\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-04: Version 6.7.216\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-03: Version 6.7.215\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-04-03: Version 6.7.214\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-30: Version 6.7.213\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-30: Version 6.7.212\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-29: Version 6.7.211\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-29: Version 6.7.210\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-29: Version 6.7.209\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-29: Version 6.7.208\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-29: Version 6.7.207\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-29: Version 6.7.206\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-29: Version 6.7.205\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-29: Version 6.7.204\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.203\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.202\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.201\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.200\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.199\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.198\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.197\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.196\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.195\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-28: Version 6.7.194\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.193\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.192\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.191\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.190\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.189\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.188\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.187\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.186\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.185\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-27: Version 6.7.184\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.183\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.182\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.181\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.180\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.179\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.178\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.177\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.176\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.175\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.174\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.173\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.172\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.171\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.170\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.169\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.168\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.167\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-26: Version 6.7.166\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-24: Version 6.7.165\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-24: Version 6.7.164\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-24: Version 6.7.163\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.162\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.161\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.160\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.159\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.158\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.157\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.156\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.155\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.154\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.153\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.152\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.151\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.150\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.149\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.148\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-23: Version 6.7.147\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-22: Version 6.7.146\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-22: Version 6.7.145\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-22: Version 6.7.144\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-22: Version 6.7.143\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-22: Version 6.7.142\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-22: Version 6.7.141\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-22: Version 6.7.140\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.139\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.138\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.137\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.136\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.135\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.134\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.133\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.132\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.131\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.130\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.129\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.128\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.127\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.126\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.125\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.124\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-21: Version 6.7.123\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.122\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.121\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.120\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.119\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.118\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.117\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.116\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.115\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.114\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.113\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.112\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.111\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-20: Version 6.7.110\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-19: Version 6.7.109\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-19: Version 6.7.108\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-19: Version 6.7.107\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-19: Version 6.7.106\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-19: Version 6.7.105\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-19: Version 6.7.104\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-19: Version 6.7.103\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-17: Version 6.7.102\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.101\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.100\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.99\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.98\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.97\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.96\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.95\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.94\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.93\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.92\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.91\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.90\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-16: Version 6.7.89\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.88\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.87\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.86\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.85\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.84\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.83\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.82\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.81\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.80\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.79\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.78\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.77\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.76\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.75\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.74\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-15: Version 6.7.73\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.72\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.71\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.70\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.69\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.68\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.67\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.66\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.65\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.64\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.63\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.62\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.61\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.60\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.59\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.58\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.57\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.56\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.55\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-14: Version 6.7.54\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.53\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.52\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.51\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.50\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.49\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.48\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.47\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.46\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-13: Version 6.7.45\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.44\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.43\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.42\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.41\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.40\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.39\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.38\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.37\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.36\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.35\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.34\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.33\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-12: Version 6.7.32\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-10: Version 6.7.31\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-09: Version 6.7.30\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-09: Version 6.7.29\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-08: Version 6.7.28\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-08: Version 6.7.27\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-08: Version 6.7.26\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-07: Version 6.7.25\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-07: Version 6.7.24\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-07: Version 6.7.23\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-06: Version 6.7.22\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-06: Version 6.7.21\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-06: Version 6.7.20\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-06: Version 6.7.19\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-06: Version 6.7.18\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-06: Version 6.7.17\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-06: Version 6.7.16\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-05: Version 6.7.15\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-05: Version 6.7.14\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-05: Version 6.7.13\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-05: Version 6.7.12\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-05: Version 6.7.11\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-05: Version 6.7.10\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-05: Version 6.7.9\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-02: Version 6.7.8\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-02: Version 6.7.7\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-02: Version 6.7.6\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-02: Version 6.7.5\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-02: Version 6.7.4\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-02: Version 6.7.3\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-02: Version 6.7.2\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-02: Version 6.7.1\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-03-01: Version 6.6.356\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.355\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.354\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.353\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.352\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.351\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.350\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.349\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.348\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n+2018-02-28: Version 6.6.347\n+\n+        Performance and stability improvements on all platforms.\n+\n+\n 2018-02-28: Version 6.6.346\n \n         Performance and stability improvements on all platforms."
        },
        {
            "sha": "4a00478633793d08078868c25a5a760b737d232a",
            "filename": "deps/v8/DEPS",
            "status": "modified",
            "additions": 17,
            "deletions": 19,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FDEPS",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FDEPS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FDEPS?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -12,57 +12,55 @@ vars = {\n \n deps = {\n   'v8/build':\n-    Var('chromium_url') + '/chromium/src/build.git' + '@' + 'b1d6c28b4a64128ad856d9da458afda2861fddab',\n+    Var('chromium_url') + '/chromium/src/build.git' + '@' + '73e352e758d90603e23bdc84734c12aa5817ab5f',\n   'v8/tools/gyp':\n     Var('chromium_url') + '/external/gyp.git' + '@' + 'd61a9397e668fa9843c4aa7da9e79460fe590bfb',\n   'v8/third_party/icu':\n     Var('chromium_url') + '/chromium/deps/icu.git' + '@' + 'd888fd2a1be890f4d35e43f68d6d79f42519a357',\n   'v8/third_party/instrumented_libraries':\n-    Var('chromium_url') + '/chromium/src/third_party/instrumented_libraries.git' + '@' + 'b745ddca2c63719167c0f2008ae19e667c5e9952',\n+    Var('chromium_url') + '/chromium/src/third_party/instrumented_libraries.git' + '@' + '323cf32193caecbf074d1a0cb5b02b905f163e0f',\n   'v8/buildtools':\n-    Var('chromium_url') + '/chromium/buildtools.git' + '@' + '2888931260f2a32bc583f005bd807a561b2fa6af',\n+    Var('chromium_url') + '/chromium/buildtools.git' + '@' + 'e8aa02ea839e087f2db66100d02c3b5d47993852',\n   'v8/base/trace_event/common':\n-    Var('chromium_url') + '/chromium/src/base/trace_event/common.git' + '@' + '0e9a47d74970bee1bbfc063c47215406f8918699',\n+    Var('chromium_url') + '/chromium/src/base/trace_event/common.git' + '@' + '211b3ed9d0481b4caddbee1322321b86a483ca1f',\n   'v8/third_party/android_ndk': {\n-    'url': Var('chromium_url') + '/android_ndk.git' + '@' + 'e951c37287c7d8cd915bf8d4149fd4a06d808b55',\n+    'url': Var('chromium_url') + '/android_ndk.git' + '@' + '635bc380968a76f6948fee65f80a0b28db53ae81',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/android_tools': {\n-    'url': Var('chromium_url') + '/android_tools.git' + '@' + '9a70d48fcdd68cd0e7e968f342bd767ee6323bd1',\n+    'url': Var('chromium_url') + '/android_tools.git' + '@' + 'c22a664c39af72dd8f89200220713dcad811300a',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/catapult': {\n-    'url': Var('chromium_url') + '/catapult.git' + '@' + '8a42ad3cb185e340c32b20f657980fd057e3769f',\n+    'url': Var('chromium_url') + '/catapult.git' + '@' + '2c59f678c7ede8a844fb687525d594b71aabe3dd',\n     'condition': 'checkout_android',\n   },\n   'v8/third_party/colorama/src': {\n     'url': Var('chromium_url') + '/external/colorama.git' + '@' + '799604a1041e9b3bc5d2789ecbd7e8db2e18e6b8',\n     'condition': 'checkout_android',\n   },\n+  'v8/third_party/googletest/src':\n+    Var('chromium_url') + '/external/github.com/google/googletest.git' + '@' + '7e5f90d3780d553cb86771141fb81349f3a63508',\n   'v8/third_party/jinja2':\n-    Var('chromium_url') + '/chromium/src/third_party/jinja2.git' + '@' + 'd34383206fa42d52faa10bb9931d6d538f3a57e0',\n+    Var('chromium_url') + '/chromium/src/third_party/jinja2.git' + '@' + '45571de473282bd1d8b63a8dfcb1fd268d0635d2',\n   'v8/third_party/markupsafe':\n     Var('chromium_url') + '/chromium/src/third_party/markupsafe.git' + '@' + '8f45f5cfa0009d2a70589bcda0349b8cb2b72783',\n   'v8/tools/swarming_client':\n     Var('chromium_url') + '/infra/luci/client-py.git' + '@' + '88229872dd17e71658fe96763feaa77915d8cbd6',\n-  'v8/testing/gtest':\n-    Var('chromium_url') + '/external/github.com/google/googletest.git' + '@' + '6f8a66431cb592dad629028a50b3dd418a408c87',\n-  'v8/testing/gmock':\n-    Var('chromium_url') + '/external/googlemock.git' + '@' + '0421b6f358139f02e102c9c332ce19a33faf75be',\n   'v8/test/benchmarks/data':\n     Var('chromium_url') + '/v8/deps/third_party/benchmarks.git' + '@' + '05d7188267b4560491ff9155c5ee13e207ecd65f',\n   'v8/test/mozilla/data':\n     Var('chromium_url') + '/v8/deps/third_party/mozilla-tests.git' + '@' + 'f6c578a10ea707b1a8ab0b88943fe5115ce2b9be',\n   'v8/test/test262/data':\n-    Var('chromium_url') + '/external/github.com/tc39/test262.git' + '@' + 'b59d956b3c268abd0875aeb87d6688f4c7aafc9b',\n+    Var('chromium_url') + '/external/github.com/tc39/test262.git' + '@' + '0192e0d70e2295fb590f14865da42f0f9dfa64bd',\n   'v8/test/test262/harness':\n     Var('chromium_url') + '/external/github.com/test262-utils/test262-harness-py.git' + '@' + '0f2acdd882c84cff43b9d60df7574a1901e2cdcd',\n   'v8/tools/clang':\n-    Var('chromium_url') + '/chromium/src/tools/clang.git' + '@' + 'b3d3f5920b161f95f1a8ffe08b75c695e0edf350',\n+    Var('chromium_url') + '/chromium/src/tools/clang.git' + '@' + 'd7c36b0ae001a5cc31f2da79a430154916a3def2',\n   'v8/tools/luci-go':\n     Var('chromium_url') + '/chromium/src/tools/luci-go.git' + '@' + 'ff0709d4283b1f233dcf0c9fec1672c6ecaed2f1',\n   'v8/test/wasm-js':\n-    Var('chromium_url') + '/external/github.com/WebAssembly/spec.git' + '@' + '4653fc002a510b4f207af07f2c7c61b13dba78d9',\n+    Var('chromium_url') + '/external/github.com/WebAssembly/spec.git' + '@' + '586d34770c6445bfb93c9bae8ac50baade7ee168',\n }\n \n recursedeps = [\n@@ -255,28 +253,28 @@ hooks = [\n   {\n     'name': 'sysroot_arm',\n     'pattern': '.',\n-    'condition': 'checkout_linux and checkout_arm',\n+    'condition': '(checkout_linux and checkout_arm)',\n     'action': ['python', 'v8/build/linux/sysroot_scripts/install-sysroot.py',\n                '--arch=arm'],\n   },\n   {\n     'name': 'sysroot_arm64',\n     'pattern': '.',\n-    'condition': 'checkout_linux and checkout_arm64',\n+    'condition': '(checkout_linux and checkout_arm64)',\n     'action': ['python', 'v8/build/linux/sysroot_scripts/install-sysroot.py',\n                '--arch=arm64'],\n   },\n   {\n     'name': 'sysroot_x86',\n     'pattern': '.',\n-    'condition': 'checkout_linux and (checkout_x86 or checkout_x64)',\n+    'condition': '(checkout_linux and (checkout_x86 or checkout_x64))',\n     'action': ['python', 'v8/build/linux/sysroot_scripts/install-sysroot.py',\n                '--arch=x86'],\n   },\n   {\n     'name': 'sysroot_mips',\n     'pattern': '.',\n-    'condition': 'checkout_linux and checkout_mips',\n+    'condition': '(checkout_linux and checkout_mips)',\n     'action': ['python', 'v8/build/linux/sysroot_scripts/install-sysroot.py',\n                '--arch=mips'],\n   },"
        },
        {
            "sha": "a1e403f82bac6bcb0bc25b3028e7c41ba858b5de",
            "filename": "deps/v8/LICENSE",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FLICENSE",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FLICENSE",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FLICENSE?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -23,6 +23,9 @@ are:\n   - Valgrind client API header, located at third_party/valgrind/valgrind.h\n     This is release under the BSD license.\n \n+  - antlr4 parser generator Cpp library located in third_party/antlr4\n+    This is release under the BSD license.\n+\n These libraries have their own licenses; we recommend you read them,\n as their terms may differ from the terms below.\n "
        },
        {
            "sha": "f6726316f2af95d4d9910ad696d118caa27bfd86",
            "filename": "deps/v8/OWNERS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2FOWNERS?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -1,5 +1,6 @@\n adamk@chromium.org\n ahaas@chromium.org\n+aseemgarg@chromium.org\n bbudge@chromium.org\n binji@chromium.org\n bmeurer@chromium.org\n@@ -18,6 +19,7 @@ ishell@chromium.org\n jarin@chromium.org\n jgruber@chromium.org\n jkummerow@chromium.org\n+kschimpf@chromium.org\n leszeks@chromium.org\n machenbach@chromium.org\n marja@chromium.org"
        },
        {
            "sha": "e2a5ca0c8d491ba0274fc74b10018e346a7370f9",
            "filename": "deps/v8/base/trace_event/common/trace_event_common.h",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fbase%2Ftrace_event%2Fcommon%2Ftrace_event_common.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fbase%2Ftrace_event%2Fcommon%2Ftrace_event_common.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fbase%2Ftrace_event%2Fcommon%2Ftrace_event_common.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -2,6 +2,9 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n+#ifndef BASE_TRACE_EVENT_COMMON_TRACE_EVENT_COMMON_H_\n+#define BASE_TRACE_EVENT_COMMON_TRACE_EVENT_COMMON_H_\n+\n // This header file defines the set of trace_event macros without specifying\n // how the events actually get collected and stored. If you need to expose trace\n // events to some other universe, you can copy-and-paste this file as well as\n@@ -687,6 +690,11 @@\n       TRACE_EVENT_PHASE_ASYNC_END, category_group, name, id,                  \\\n       TRACE_EVENT_API_CURRENT_THREAD_ID, timestamp, TRACE_EVENT_FLAG_NONE,    \\\n       arg1_name, arg1_val, arg2_name, arg2_val)\n+#define TRACE_EVENT_COPY_ASYNC_END_WITH_TIMESTAMP0(category_group, name, id, \\\n+                                                   timestamp)                \\\n+  INTERNAL_TRACE_EVENT_ADD_WITH_ID_TID_AND_TIMESTAMP(                        \\\n+      TRACE_EVENT_PHASE_ASYNC_END, category_group, name, id,                 \\\n+      TRACE_EVENT_API_CURRENT_THREAD_ID, timestamp, TRACE_EVENT_FLAG_COPY)\n \n // NESTABLE_ASYNC_* APIs are used to describe an async operation, which can\n // be nested within a NESTABLE_ASYNC event and/or have inner NESTABLE_ASYNC\n@@ -1020,6 +1028,14 @@\n     }                                                                      \\\n   } while (0)\n \n+// Macro for getting the real base::TimeTicks::Now() which can be overridden in\n+// headless when VirtualTime is enabled.\n+#define TRACE_TIME_TICKS_NOW() INTERNAL_TRACE_TIME_TICKS_NOW()\n+\n+// Macro for getting the real base::Time::Now() which can be overridden in\n+// headless when VirtualTime is enabled.\n+#define TRACE_TIME_NOW() INTERNAL_TRACE_TIME_NOW()\n+\n // Notes regarding the following definitions:\n // New values can be added and propagated to third party libraries, but existing\n // definitions must never be changed, because third party libraries may use old\n@@ -1094,3 +1110,5 @@\n #define TRACE_EVENT_SCOPE_NAME_GLOBAL ('g')\n #define TRACE_EVENT_SCOPE_NAME_PROCESS ('p')\n #define TRACE_EVENT_SCOPE_NAME_THREAD ('t')\n+\n+#endif  // BASE_TRACE_EVENT_COMMON_TRACE_EVENT_COMMON_H_"
        },
        {
            "sha": "6ad25c27749cc529855a670732b40a7639d0fdcb",
            "filename": "deps/v8/gni/isolate.gni",
            "status": "removed",
            "additions": 0,
            "deletions": 196,
            "changes": 196,
            "blob_url": "https://github.com/nodejs/node/blob/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fgni%2Fisolate.gni",
            "raw_url": "https://github.com/nodejs/node/raw/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fgni%2Fisolate.gni",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fgni%2Fisolate.gni?ref=faf449ca0490f5371dc6cbbc94a87eb697b00fcc",
            "patch": "@@ -1,196 +0,0 @@\n-# Copyright 2016 the V8 project authors. All rights reserved.\n-# Use of this source code is governed by a BSD-style license that can be\n-# found in the LICENSE file.\n-\n-import(\"//build/config/sanitizers/sanitizers.gni\")\n-import(\"//third_party/icu/config.gni\")\n-import(\"v8.gni\")\n-\n-declare_args() {\n-  # Sets the test isolation mode (noop|prepare|check).\n-  v8_test_isolation_mode = \"noop\"\n-}\n-\n-template(\"v8_isolate_run\") {\n-  forward_variables_from(invoker,\n-                         \"*\",\n-                         [\n-                           \"deps\",\n-                           \"isolate\",\n-                         ])\n-\n-  # Remember target name as within the action scope the target name will be\n-  # different.\n-  name = target_name\n-\n-  assert(defined(invoker.deps))\n-  assert(defined(invoker.isolate))\n-\n-  if (name != \"\" && v8_test_isolation_mode != \"noop\") {\n-    action(name + \"_run\") {\n-      testonly = true\n-\n-      deps = invoker.deps\n-\n-      script = \"//tools/isolate_driver.py\"\n-\n-      sources = [\n-        invoker.isolate,\n-      ]\n-\n-      inputs = [\n-        # Files that are known to be involved in this step.\n-        \"//tools/swarming_client/isolate.py\",\n-        \"//tools/swarming_client/run_isolated.py\",\n-      ]\n-\n-      if (v8_test_isolation_mode == \"prepare\") {\n-        outputs = [\n-          \"$root_out_dir/$name.isolated.gen.json\",\n-        ]\n-      } else if (v8_test_isolation_mode == \"check\") {\n-        outputs = [\n-          \"$root_out_dir/$name.isolated\",\n-          \"$root_out_dir/$name.isolated.state\",\n-        ]\n-      }\n-\n-      # Translate gn to gyp variables.\n-      if (v8_code_coverage) {\n-        coverage = \"1\"\n-      } else {\n-        coverage = \"0\"\n-      }\n-      if (is_asan) {\n-        asan = \"1\"\n-      } else {\n-        asan = \"0\"\n-      }\n-      if (is_msan) {\n-        msan = \"1\"\n-      } else {\n-        msan = \"0\"\n-      }\n-      if (is_tsan) {\n-        tsan = \"1\"\n-      } else {\n-        tsan = \"0\"\n-      }\n-      if (is_cfi) {\n-        cfi_vptr = \"1\"\n-      } else {\n-        cfi_vptr = \"0\"\n-      }\n-      if (target_cpu == \"x86\") {\n-        target_arch = \"ia32\"\n-      } else {\n-        target_arch = target_cpu\n-      }\n-      if (is_debug) {\n-        configuration_name = \"Debug\"\n-      } else {\n-        configuration_name = \"Release\"\n-      }\n-      if (is_component_build) {\n-        component = \"shared_library\"\n-      } else {\n-        component = \"static_library\"\n-      }\n-      if (icu_use_data_file) {\n-        icu_use_data_file_flag = \"1\"\n-      } else {\n-        icu_use_data_file_flag = \"0\"\n-      }\n-      if (v8_use_external_startup_data) {\n-        use_external_startup_data = \"1\"\n-      } else {\n-        use_external_startup_data = \"0\"\n-      }\n-      if (is_ubsan_vptr) {\n-        ubsan_vptr = \"1\"\n-      } else {\n-        ubsan_vptr = \"0\"\n-      }\n-      if (v8_use_snapshot) {\n-        use_snapshot = \"true\"\n-      } else {\n-        use_snapshot = \"false\"\n-      }\n-      if (v8_has_valgrind) {\n-        has_valgrind = \"1\"\n-      } else {\n-        has_valgrind = \"0\"\n-      }\n-      if (v8_gcmole) {\n-        gcmole = \"1\"\n-      } else {\n-        gcmole = \"0\"\n-      }\n-\n-      # Note, all paths will be rebased in isolate_driver.py to be relative to\n-      # the isolate file.\n-      args = [\n-        v8_test_isolation_mode,\n-        \"--isolated\",\n-        rebase_path(\"$root_out_dir/$name.isolated\", root_build_dir),\n-        \"--isolate\",\n-        rebase_path(invoker.isolate, root_build_dir),\n-\n-        # Path variables are used to replace file paths when loading a .isolate\n-        # file\n-        \"--path-variable\",\n-        \"DEPTH\",\n-        rebase_path(\"//\", root_build_dir),\n-        \"--path-variable\",\n-        \"PRODUCT_DIR\",\n-        rebase_path(root_out_dir, root_build_dir),\n-\n-        # TODO(machenbach): Set variables for remaining features.\n-        \"--config-variable\",\n-        \"CONFIGURATION_NAME=$configuration_name\",\n-        \"--config-variable\",\n-        \"OS=$target_os\",\n-        \"--config-variable\",\n-        \"asan=$asan\",\n-        \"--config-variable\",\n-        \"cfi_vptr=$cfi_vptr\",\n-        \"--config-variable\",\n-        \"gcmole=$gcmole\",\n-        \"--config-variable\",\n-        \"has_valgrind=$has_valgrind\",\n-        \"--config-variable\",\n-        \"icu_use_data_file_flag=$icu_use_data_file_flag\",\n-        \"--config-variable\",\n-        \"msan=$msan\",\n-        \"--config-variable\",\n-        \"tsan=$tsan\",\n-        \"--config-variable\",\n-        \"coverage=$coverage\",\n-        \"--config-variable\",\n-        \"sanitizer_coverage=$sanitizer_coverage_flags\",\n-        \"--config-variable\",\n-        \"component=$component\",\n-        \"--config-variable\",\n-        \"target_arch=$target_arch\",\n-        \"--config-variable\",\n-        \"ubsan_vptr=$ubsan_vptr\",\n-        \"--config-variable\",\n-        \"v8_use_external_startup_data=$use_external_startup_data\",\n-        \"--config-variable\",\n-        \"v8_use_snapshot=$use_snapshot\",\n-      ]\n-\n-      if (is_win) {\n-        args += [\n-          \"--config-variable\",\n-          \"msvs_version=2017\",\n-        ]\n-      } else {\n-        args += [\n-          \"--config-variable\",\n-          \"msvs_version=0\",\n-        ]\n-      }\n-    }\n-  }\n-}"
        },
        {
            "sha": "285912665916e8803ecf5362ec24558baee3e321",
            "filename": "deps/v8/gni/msvs_dependencies.isolate",
            "status": "removed",
            "additions": 0,
            "deletions": 97,
            "changes": 97,
            "blob_url": "https://github.com/nodejs/node/blob/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fgni%2Fmsvs_dependencies.isolate",
            "raw_url": "https://github.com/nodejs/node/raw/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fgni%2Fmsvs_dependencies.isolate",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fgni%2Fmsvs_dependencies.isolate?ref=faf449ca0490f5371dc6cbbc94a87eb697b00fcc",
            "patch": "@@ -1,97 +0,0 @@\n-# Copyright 2016 The Chromium Authors. All rights reserved.\n-# Use of this source code is governed by a BSD-style license that can be\n-# found in the LICENSE file.\n-\n-# TODO(machenbach): Remove this when crbug.com/669910 is resolved.\n-{\n-  'conditions': [\n-    # Copy the VS runtime DLLs into the isolate so that they\n-    # don't have to be preinstalled on the target machine.\n-    #\n-    # VS2013 runtimes\n-    ['OS==\"win\" and msvs_version==2013 and component==\"shared_library\" and (CONFIGURATION_NAME==\"Debug\" or CONFIGURATION_NAME==\"Debug_x64\")', {\n-      'variables': {\n-        'files': [\n-          '<(PRODUCT_DIR)/msvcp120d.dll',\n-          '<(PRODUCT_DIR)/msvcr120d.dll',\n-        ],\n-      },\n-    }],\n-    ['OS==\"win\" and msvs_version==2013 and component==\"shared_library\" and (CONFIGURATION_NAME==\"Release\" or CONFIGURATION_NAME==\"Release_x64\")', {\n-      'variables': {\n-        'files': [\n-          '<(PRODUCT_DIR)/msvcp120.dll',\n-          '<(PRODUCT_DIR)/msvcr120.dll',\n-        ],\n-      },\n-    }],\n-    # VS2015/2017 runtimes\n-    ['OS==\"win\" and (msvs_version==2015 or msvs_version==2017) and component==\"shared_library\" and (CONFIGURATION_NAME==\"Debug\" or CONFIGURATION_NAME==\"Debug_x64\")', {\n-      'variables': {\n-        'files': [\n-          '<(PRODUCT_DIR)/msvcp140d.dll',\n-          '<(PRODUCT_DIR)/vccorlib140d.dll',\n-          '<(PRODUCT_DIR)/vcruntime140d.dll',\n-          '<(PRODUCT_DIR)/ucrtbased.dll',\n-        ],\n-      },\n-    }],\n-    ['OS==\"win\" and (msvs_version==2015 or msvs_version==2017) and component==\"shared_library\" and (CONFIGURATION_NAME==\"Release\" or CONFIGURATION_NAME==\"Release_x64\")', {\n-      'variables': {\n-        'files': [\n-          '<(PRODUCT_DIR)/msvcp140.dll',\n-          '<(PRODUCT_DIR)/vccorlib140.dll',\n-          '<(PRODUCT_DIR)/vcruntime140.dll',\n-          '<(PRODUCT_DIR)/ucrtbase.dll',\n-        ],\n-      },\n-    }],\n-    ['OS==\"win\" and (msvs_version==2015 or msvs_version==2017) and component==\"shared_library\"', {\n-      # Windows 10 Universal C Runtime binaries.\n-      'variables': {\n-        'files': [\n-          '<(PRODUCT_DIR)/api-ms-win-core-console-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-datetime-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-debug-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-errorhandling-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-file-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-file-l1-2-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-file-l2-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-handle-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-heap-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-interlocked-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-libraryloader-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-localization-l1-2-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-memory-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-namedpipe-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-processenvironment-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-processthreads-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-processthreads-l1-1-1.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-profile-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-rtlsupport-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-string-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-synch-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-synch-l1-2-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-sysinfo-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-timezone-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-core-util-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-conio-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-convert-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-environment-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-filesystem-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-heap-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-locale-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-math-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-multibyte-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-private-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-process-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-runtime-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-stdio-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-string-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-time-l1-1-0.dll',\n-          '<(PRODUCT_DIR)/api-ms-win-crt-utility-l1-1-0.dll',\n-        ],\n-      },\n-    }],\n-  ],\n-}"
        },
        {
            "sha": "211f15aab944d41e2a42ee158aa2d6eae2af028d",
            "filename": "deps/v8/gni/v8.gni",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fgni%2Fv8.gni",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fgni%2Fv8.gni",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fgni%2Fv8.gni?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -37,6 +37,9 @@ declare_args() {\n   # https://803591\n   v8_use_snapshot = !(is_win && host_os != \"win\" && target_cpu == \"x64\")\n \n+  # Enable several snapshots side-by-side (e.g. default and for trusted code).\n+  v8_use_multi_snapshots = \"\"\n+\n   # Use external files for startup data blobs:\n   # the JS builtins sources and the start snapshot.\n   v8_use_external_startup_data = \"\"\n@@ -58,6 +61,11 @@ if (v8_use_external_startup_data == \"\") {\n   v8_use_external_startup_data = v8_use_snapshot && !is_ios\n }\n \n+if (v8_use_multi_snapshots == \"\") {\n+  v8_use_multi_snapshots =\n+      v8_use_external_startup_data && !build_with_chromium && !use_jumbo_build\n+}\n+\n if (v8_enable_backtrace == \"\") {\n   v8_enable_backtrace = is_debug && !v8_optimized_debug\n }\n@@ -113,6 +121,10 @@ if (target_cpu == \"mipsel\" || target_cpu == \"mips64el\" ||\n   v8_add_configs += [ \"//build/config/gcc:rpath_for_built_shared_libraries\" ]\n }\n \n+if (!build_with_chromium && is_clang) {\n+  v8_remove_configs += [ \"//build/config/clang:find_bad_constructs\" ]\n+}\n+\n # All templates should be kept in sync.\n template(\"v8_source_set\") {\n   if (defined(invoker.split_count) && invoker.split_count > 1 &&\n@@ -192,6 +204,7 @@ template(\"v8_static_library\") {\n     forward_variables_from(invoker, \"*\", [ \"configs\" ])\n     configs += invoker.configs\n     configs -= v8_remove_configs\n+    configs -= [ \"//build/config/compiler:thin_archive\" ]\n     configs += v8_add_configs\n   }\n }"
        },
        {
            "sha": "a7ac912c0ab4a9abd07aeb35fe42d8c50b41b285",
            "filename": "deps/v8/include/OWNERS",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2FOWNERS?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -1,5 +1,9 @@\n+set noparent\n+\n adamk@chromium.org\n danno@chromium.org\n+ulan@chromium.org\n+yangguo@chromium.org\n \n per-file v8-inspector.h=dgozman@chromium.org\n per-file v8-inspector.h=pfeldman@chromium.org"
        },
        {
            "sha": "2c830bf834b78612945ec904835fe5432a0eab7f",
            "filename": "deps/v8/include/libplatform/libplatform.h",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Flibplatform%2Flibplatform.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -62,8 +62,10 @@ V8_PLATFORM_EXPORT bool PumpMessageLoop(\n     v8::Platform* platform, v8::Isolate* isolate,\n     MessageLoopBehavior behavior = MessageLoopBehavior::kDoNotWait);\n \n-V8_PLATFORM_EXPORT void EnsureEventLoopInitialized(v8::Platform* platform,\n-                                                   v8::Isolate* isolate);\n+V8_PLATFORM_EXPORT V8_DEPRECATE_SOON(\n+    \"This function has become obsolete and is essentially a nop\",\n+    void EnsureEventLoopInitialized(v8::Platform* platform,\n+                                    v8::Isolate* isolate));\n \n /**\n  * Runs pending idle tasks for at most |idle_time_in_seconds| seconds."
        },
        {
            "sha": "9dcf3d7bca760a7a025853b97cc591152e4b5792",
            "filename": "deps/v8/include/libplatform/v8-tracing.h",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Flibplatform%2Fv8-tracing.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Flibplatform%2Fv8-tracing.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Flibplatform%2Fv8-tracing.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -112,8 +112,6 @@ class V8_PLATFORM_EXPORT TraceWriter {\n   virtual void Flush() = 0;\n \n   static TraceWriter* CreateJSONTraceWriter(std::ostream& stream);\n-  static TraceWriter* CreateJSONTraceWriter(std::ostream& stream,\n-                                            const std::string& tag);\n \n  private:\n   // Disallow copy and assign"
        },
        {
            "sha": "ddc200abab0dd94d85df69881f8d1e52609151eb",
            "filename": "deps/v8/include/v8-platform.h",
            "status": "modified",
            "additions": 26,
            "deletions": 6,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8-platform.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8-platform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-platform.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -5,9 +5,9 @@\n #ifndef V8_V8_PLATFORM_H_\n #define V8_V8_PLATFORM_H_\n \n-#include <cstdlib>\n #include <stddef.h>\n #include <stdint.h>\n+#include <stdlib.h>  // For abort.\n #include <memory>\n #include <string>\n \n@@ -288,16 +288,21 @@ class Platform {\n    */\n   virtual bool OnCriticalMemoryPressure(size_t length) { return false; }\n \n+  /**\n+   * Gets the number of worker threads used by GetWorkerThreadsTaskRunner() and\n+   * CallOnWorkerThread(). This can be used to estimate the number of tasks a\n+   * work package should be split into. A return value of 0 means that there are\n+   * no worker threads available. Note that a value of 0 won't prohibit V8 from\n+   * posting tasks using |CallOnWorkerThread|.\n+   */\n   virtual int NumberOfWorkerThreads() {\n     return static_cast<int>(NumberOfAvailableBackgroundThreads());\n   }\n \n   /**\n-   * Gets the number of threads that are used to execute background tasks. Is\n-   * used to estimate the number of tasks a work package should be split into.\n-   * A return value of 0 means that there are no background threads available.\n-   * Note that a value of 0 won't prohibit V8 from posting tasks using\n-   * |CallOnBackgroundThread|.\n+   * Deprecated. Use NumberOfWorkerThreads() instead.\n+   * TODO(gab): Remove this when all embedders override\n+   * NumberOfWorkerThreads() instead.\n    */\n   V8_DEPRECATE_SOON(\n       \"NumberOfAvailableBackgroundThreads() is deprecated, use \"\n@@ -340,8 +345,14 @@ class Platform {\n     abort();\n   }\n \n+  /**\n+   * Returns a TaskRunner which can be used to post async tasks on a worker.\n+   * This function should only be called from a foreground thread.\n+   */\n   virtual std::shared_ptr<v8::TaskRunner> GetWorkerThreadsTaskRunner(\n       Isolate* isolate) {\n+    // TODO(gab): Make this function abstract after it got implemented on all\n+    // platforms.\n     return GetBackgroundTaskRunner(isolate);\n   }\n \n@@ -365,10 +376,19 @@ class Platform {\n     abort();\n   }\n \n+  /**\n+   * Schedules a task to be invoked on a worker thread.\n+   * TODO(gab): Make pure virtual when all embedders override this instead of\n+   * CallOnBackgroundThread().\n+   */\n   virtual void CallOnWorkerThread(std::unique_ptr<Task> task) {\n     CallOnBackgroundThread(task.release(), kShortRunningTask);\n   }\n \n+  /**\n+   * Schedules a task that blocks the main thread to be invoked with\n+   * high-priority on a worker thread.\n+   */\n   virtual void CallBlockingTaskOnWorkerThread(std::unique_ptr<Task> task) {\n     // Embedders may optionally override this to process these tasks in a high\n     // priority pool."
        },
        {
            "sha": "afa40d25f30fdc5bb8b569dc4322583d90fde9bd",
            "filename": "deps/v8/include/v8-profiler.h",
            "status": "modified",
            "additions": 12,
            "deletions": 6,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8-profiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8-profiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-profiler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -335,7 +335,8 @@ class V8_EXPORT CpuProfiler {\n   /**\n    * Tells the profiler whether the embedder is idle.\n    */\n-  void SetIdle(bool is_idle);\n+  V8_DEPRECATED(\"Use Isolate::SetIdle(bool) instead.\",\n+                void SetIdle(bool is_idle));\n \n  private:\n   CpuProfiler();\n@@ -401,7 +402,8 @@ class V8_EXPORT HeapGraphNode {\n                          // snapshot items together.\n     kConsString = 10,    // Concatenated string. A pair of pointers to strings.\n     kSlicedString = 11,  // Sliced string. A fragment of another string.\n-    kSymbol = 12         // A Symbol (ES6).\n+    kSymbol = 12,        // A Symbol (ES6).\n+    kBigInt = 13         // BigInt.\n   };\n \n   /** Returns node type (see HeapGraphNode::Type). */\n@@ -875,11 +877,15 @@ class V8_EXPORT HeapProfiler {\n   void DeleteAllHeapSnapshots();\n \n   /** Binds a callback to embedder's class ID. */\n-  void SetWrapperClassInfoProvider(\n-      uint16_t class_id,\n-      WrapperInfoCallback callback);\n+  V8_DEPRECATED(\n+      \"Use SetBuildEmbedderGraphCallback to provide info about embedder nodes\",\n+      void SetWrapperClassInfoProvider(uint16_t class_id,\n+                                       WrapperInfoCallback callback));\n+\n+  V8_DEPRECATED(\n+      \"Use SetBuildEmbedderGraphCallback to provide info about embedder nodes\",\n+      void SetGetRetainerInfosCallback(GetRetainerInfosCallback callback));\n \n-  void SetGetRetainerInfosCallback(GetRetainerInfosCallback callback);\n   void SetBuildEmbedderGraphCallback(BuildEmbedderGraphCallback callback);\n \n   /**"
        },
        {
            "sha": "f871c8fa67696838d0ed6216b633026c89af4a6c",
            "filename": "deps/v8/include/v8-version.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8-version.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8-version.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-version.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -9,9 +9,9 @@\n // NOTE these macros are used by some of the tool scripts and the build\n // system so their names cannot be changed without changing the scripts.\n #define V8_MAJOR_VERSION 6\n-#define V8_MINOR_VERSION 6\n-#define V8_BUILD_NUMBER 346\n-#define V8_PATCH_LEVEL 32\n+#define V8_MINOR_VERSION 7\n+#define V8_BUILD_NUMBER 288\n+#define V8_PATCH_LEVEL 43\n \n // Use 1 for candidates and 0 otherwise.\n // (Boolean macro values are not supported by all preprocessors.)"
        },
        {
            "sha": "d520c866042a7a7bfbd49463dec6b07c6d5fdd18",
            "filename": "deps/v8/include/v8.h",
            "status": "modified",
            "additions": 159,
            "deletions": 38,
            "changes": 197,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -66,6 +66,8 @@ namespace v8 {\n class AccessorSignature;\n class Array;\n class ArrayBuffer;\n+class BigInt;\n+class BigIntObject;\n class Boolean;\n class BooleanObject;\n class Context;\n@@ -1579,6 +1581,15 @@ class V8_EXPORT ScriptCompiler {\n   static CachedData* CreateCodeCache(Local<UnboundScript> unbound_script,\n                                      Local<String> source);\n \n+  /**\n+   * Creates and returns code cache for the specified function that was\n+   * previously produced by CompileFunctionInContext.\n+   * This will return nullptr if the script cannot be serialized. The\n+   * CachedData returned by this function should be owned by the caller.\n+   */\n+  static CachedData* CreateCodeCacheForFunction(Local<Function> function,\n+                                                Local<String> source);\n+\n  private:\n   static V8_WARN_UNUSED_RESULT MaybeLocal<UnboundScript> CompileUnboundInternal(\n       Isolate* isolate, Source* source, CompileOptions options,\n@@ -1650,6 +1661,7 @@ class V8_EXPORT Message {\n    * Returns the index within the line of the last character where\n    * the error occurred.\n    */\n+  int GetEndColumn() const;\n   V8_WARN_UNUSED_RESULT Maybe<int> GetEndColumn(Local<Context> context) const;\n \n   /**\n@@ -2153,6 +2165,11 @@ class V8_EXPORT Value : public Data {\n    */\n   bool IsObject() const;\n \n+  /**\n+   * Returns true if this value is a bigint.\n+   */\n+  bool IsBigInt() const;\n+\n   /**\n    * Returns true if this value is boolean.\n    */\n@@ -2188,6 +2205,11 @@ class V8_EXPORT Value : public Data {\n    */\n   bool IsArgumentsObject() const;\n \n+  /**\n+   * Returns true if this value is a BigInt object.\n+   */\n+  bool IsBigIntObject() const;\n+\n   /**\n    * Returns true if this value is a Boolean object.\n    */\n@@ -2356,11 +2378,8 @@ class V8_EXPORT Value : public Data {\n \n   bool IsWebAssemblyCompiledModule() const;\n \n-  /**\n-   * Returns true if the value is a Module Namespace Object.\n-   */\n-  bool IsModuleNamespaceObject() const;\n-\n+  V8_WARN_UNUSED_RESULT MaybeLocal<BigInt> ToBigInt(\n+      Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT MaybeLocal<Boolean> ToBoolean(\n       Local<Context> context) const;\n   V8_WARN_UNUSED_RESULT MaybeLocal<Number> ToNumber(\n@@ -3012,6 +3031,19 @@ class V8_EXPORT Uint32 : public Integer {\n   static void CheckCast(v8::Value* obj);\n };\n \n+/**\n+ * A JavaScript BigInt value (https://tc39.github.io/proposal-bigint)\n+ */\n+class V8_EXPORT BigInt : public Primitive {\n+ public:\n+  static Local<BigInt> New(Isolate* isolate, int64_t value);\n+  V8_INLINE static BigInt* Cast(v8::Value* obj);\n+\n+ private:\n+  BigInt();\n+  static void CheckCast(v8::Value* obj);\n+};\n+\n /**\n  * PropertyAttribute.\n  */\n@@ -3077,6 +3109,13 @@ enum PropertyFilter {\n   SKIP_SYMBOLS = 16\n };\n \n+/**\n+ * Options for marking whether callbacks may trigger JS-observable side effects.\n+ * Side-effect-free callbacks are whitelisted during debug evaluation with\n+ * throwOnSideEffect. It applies when calling a Function, FunctionTemplate,\n+ * or an Accessor's getter callback. For Interceptors, please see\n+ * PropertyHandlerFlags's kHasNoSideEffect.\n+ */\n enum class SideEffectType { kHasSideEffect, kHasNoSideEffect };\n \n /**\n@@ -3090,7 +3129,7 @@ enum class KeyCollectionMode { kOwnOnly, kIncludePrototypes };\n \n /**\n  * kIncludesIndices allows for integer indices to be collected, while\n- * kSkipIndices will exclude integer indicies from being collected.\n+ * kSkipIndices will exclude integer indices from being collected.\n  */\n enum class IndexFilter { kIncludeIndices, kSkipIndices };\n \n@@ -3205,12 +3244,14 @@ class V8_EXPORT Object : public Value {\n   V8_WARN_UNUSED_RESULT Maybe<bool> Delete(Local<Context> context,\n                                            Local<Value> key);\n \n-  V8_WARN_UNUSED_RESULT Maybe<bool> Has(Local<Context> context,\n-                                        uint32_t index);\n+  V8_WARN_UNUSED_RESULT Maybe<bool> Has(Local<Context> context, uint32_t index);\n \n   V8_WARN_UNUSED_RESULT Maybe<bool> Delete(Local<Context> context,\n                                            uint32_t index);\n \n+  /**\n+   * Note: SideEffectType affects the getter only, not the setter.\n+   */\n   V8_WARN_UNUSED_RESULT Maybe<bool> SetAccessor(\n       Local<Context> context, Local<Name> name,\n       AccessorNameGetterCallback getter, AccessorNameSetterCallback setter = 0,\n@@ -3503,17 +3544,6 @@ class V8_EXPORT Object : public Value {\n    */\n   Isolate* GetIsolate();\n \n-  /**\n-   * If this object is a Set, Map, WeakSet or WeakMap, this returns a\n-   * representation of the elements of this object as an array.\n-   * If this object is a SetIterator or MapIterator, this returns all\n-   * elements of the underlying collection, starting at the iterator's current\n-   * position.\n-   * For other types, this will return an empty MaybeLocal<Array> (without\n-   * scheduling an exception).\n-   */\n-  MaybeLocal<Array> PreviewEntries(bool* is_key_value);\n-\n   static Local<Object> New(Isolate* isolate);\n \n   V8_INLINE static Object* Cast(Value* obj);\n@@ -4294,6 +4324,11 @@ class V8_EXPORT ArrayBuffer : public Object {\n      */\n     virtual void Free(void* data, size_t length) = 0;\n \n+    /**\n+     * ArrayBuffer allocation mode. kNormal is a malloc/free style allocation,\n+     * while kReservation is for larger allocations with the ability to set\n+     * access permissions.\n+     */\n     enum class AllocationMode { kNormal, kReservation };\n \n     /**\n@@ -4868,6 +4903,20 @@ class V8_EXPORT NumberObject : public Object {\n   static void CheckCast(Value* obj);\n };\n \n+/**\n+ * A BigInt object (https://tc39.github.io/proposal-bigint)\n+ */\n+class V8_EXPORT BigIntObject : public Object {\n+ public:\n+  static Local<Value> New(Isolate* isolate, int64_t value);\n+\n+  Local<BigInt> ValueOf() const;\n+\n+  V8_INLINE static BigIntObject* Cast(Value* obj);\n+\n+ private:\n+  static void CheckCast(Value* obj);\n+};\n \n /**\n  * A Boolean object (ECMA-262, 4.3.15).\n@@ -5532,7 +5581,7 @@ class V8_EXPORT FunctionTemplate : public Template {\n \n   /**\n    * Causes the function template to inherit from a parent function template.\n-   * This means the the function's prototype.__proto__ is set to the parent\n+   * This means the function's prototype.__proto__ is set to the parent\n    * function's prototype.\n    **/\n   void Inherit(Local<FunctionTemplate> parent);\n@@ -5633,6 +5682,11 @@ enum class PropertyHandlerFlags {\n    * named interceptors.\n    */\n   kOnlyInterceptStrings = 1 << 2,\n+\n+  /**\n+   * The getter, query, enumerator callbacks do not produce side effects.\n+   */\n+  kHasNoSideEffect = 1 << 3,\n };\n \n struct NamedPropertyHandlerConfiguration {\n@@ -6209,24 +6263,6 @@ typedef void* (*CreateHistogramCallback)(const char* name,\n \n typedef void (*AddHistogramSampleCallback)(void* histogram, int sample);\n \n-// --- Memory Allocation Callback ---\n-enum ObjectSpace {\n-  kObjectSpaceNewSpace = 1 << 0,\n-  kObjectSpaceOldSpace = 1 << 1,\n-  kObjectSpaceCodeSpace = 1 << 2,\n-  kObjectSpaceMapSpace = 1 << 3,\n-  kObjectSpaceLoSpace = 1 << 4,\n-  kObjectSpaceAll = kObjectSpaceNewSpace | kObjectSpaceOldSpace |\n-                    kObjectSpaceCodeSpace | kObjectSpaceMapSpace |\n-                    kObjectSpaceLoSpace\n-};\n-\n-  enum AllocationAction {\n-    kAllocationActionAllocate = 1 << 0,\n-    kAllocationActionFree = 1 << 1,\n-    kAllocationActionAll = kAllocationActionAllocate | kAllocationActionFree\n-  };\n-\n // --- Enter/Leave Script Callback ---\n typedef void (*BeforeCallEnteredCallback)(Isolate*);\n typedef void (*CallCompletedCallback)(Isolate*);\n@@ -6445,6 +6481,15 @@ typedef void (*GCCallback)(GCType type, GCCallbackFlags flags);\n \n typedef void (*InterruptCallback)(Isolate* isolate, void* data);\n \n+/**\n+ * This callback is invoked when the heap size is close to the heap limit and\n+ * V8 is likely to abort with out-of-memory error.\n+ * The callback can extend the heap limit by returning a value that is greater\n+ * than the current_heap_limit. The initial heap limit is the limit that was\n+ * set after heap setup.\n+ */\n+typedef size_t (*NearHeapLimitCallback)(void* data, size_t current_heap_limit,\n+                                        size_t initial_heap_limit);\n \n /**\n  * Collection of V8 heap information.\n@@ -6578,6 +6623,12 @@ struct JitCodeEvent {\n   // statement, and is used to indicate possible break locations.\n   enum PositionType { POSITION, STATEMENT_POSITION };\n \n+  // There are two different kinds of JitCodeEvents, one for JIT code generated\n+  // by the optimizing compiler, and one for byte code generated for the\n+  // interpreter.  For JIT_CODE events, the |code_start| member of the event\n+  // points to the beginning of jitted assembly code, while for BYTE_CODE\n+  // events, |code_start| points to the first bytecode of the interpreted\n+  // function.\n   enum CodeType { BYTE_CODE, JIT_CODE };\n \n   // Type of event.\n@@ -7281,6 +7332,11 @@ class V8_EXPORT Isolate {\n   V8_DEPRECATED(\"CpuProfiler should be created with CpuProfiler::New call.\",\n                 CpuProfiler* GetCpuProfiler());\n \n+  /**\n+   * Tells the CPU profiler whether the embedder is idle.\n+   */\n+  void SetIdle(bool is_idle);\n+\n   /** Returns true if this isolate has a current context. */\n   bool InContext();\n \n@@ -7692,6 +7748,23 @@ class V8_EXPORT Isolate {\n   /** Set the callback to invoke in case of OOM errors. */\n   void SetOOMErrorHandler(OOMErrorCallback that);\n \n+  /**\n+   * Add a callback to invoke in case the heap size is close to the heap limit.\n+   * If multiple callbacks are added, only the most recently added callback is\n+   * invoked.\n+   */\n+  void AddNearHeapLimitCallback(NearHeapLimitCallback callback, void* data);\n+\n+  /**\n+   * Remove the given callback and restore the heap limit to the\n+   * given limit. If the given limit is zero, then it is ignored.\n+   * If the current heap size is greater than the given limit,\n+   * then the heap limit is restored to the minimal limit that\n+   * is possible for the current heap size.\n+   */\n+  void RemoveNearHeapLimitCallback(NearHeapLimitCallback callback,\n+                                   size_t heap_limit);\n+\n   /**\n    * Set the callback to invoke to check if code generation from\n    * strings should be allowed.\n@@ -7947,6 +8020,15 @@ class V8_EXPORT V8 {\n    */\n   static bool Dispose();\n \n+  /**\n+   * Initialize the ICU library bundled with V8. The embedder should only\n+   * invoke this method when using the bundled ICU. Returns true on success.\n+   *\n+   * If V8 was compiled with the ICU data in an external file, the location\n+   * of the data file has to be provided.\n+   */\n+  static bool InitializeICU(const char* icu_data_file = nullptr);\n+\n   /**\n    * Initialize the ICU library bundled with V8. The embedder should only\n    * invoke this method when using the bundled ICU. If V8 was compiled with\n@@ -8023,6 +8105,14 @@ class V8_EXPORT V8 {\n   V8_DEPRECATE_SOON(\"Use EnableWebAssemblyTrapHandler\",\n                     static bool RegisterDefaultSignalHandler());\n \n+  /**\n+   * Activate trap-based bounds checking for WebAssembly.\n+   *\n+   * \\param use_v8_signal_handler Whether V8 should install its own signal\n+   * handler or rely on the embedder's.\n+   */\n+  static bool EnableWebAssemblyTrapHandler(bool use_v8_signal_handler);\n+\n  private:\n   V8();\n \n@@ -8580,6 +8670,11 @@ class V8_EXPORT Context {\n    */\n   enum EmbedderDataFields { kDebugIdIndex = 0 };\n \n+  /**\n+   * Return the number of fields allocated for embedder data.\n+   */\n+  uint32_t GetNumberOfEmbedderDataFields();\n+\n   /**\n    * Gets the embedder data with the given index, which must have been set by a\n    * previous call to SetEmbedderData with the same index.\n@@ -8835,6 +8930,7 @@ const int kApiInt64Size = sizeof(int64_t);  // NOLINT\n \n // Tag information for HeapObject.\n const int kHeapObjectTag = 1;\n+const int kWeakHeapObjectTag = 3;\n const int kHeapObjectTagSize = 2;\n const intptr_t kHeapObjectTagMask = (1 << kHeapObjectTagSize) - 1;\n \n@@ -9849,6 +9945,12 @@ Uint32* Uint32::Cast(v8::Value* value) {\n   return static_cast<Uint32*>(value);\n }\n \n+BigInt* BigInt::Cast(v8::Value* value) {\n+#ifdef V8_ENABLE_CHECKS\n+  CheckCast(value);\n+#endif\n+  return static_cast<BigInt*>(value);\n+}\n \n Date* Date::Cast(v8::Value* value) {\n #ifdef V8_ENABLE_CHECKS\n@@ -9881,6 +9983,12 @@ NumberObject* NumberObject::Cast(v8::Value* value) {\n   return static_cast<NumberObject*>(value);\n }\n \n+BigIntObject* BigIntObject::Cast(v8::Value* value) {\n+#ifdef V8_ENABLE_CHECKS\n+  CheckCast(value);\n+#endif\n+  return static_cast<BigIntObject*>(value);\n+}\n \n BooleanObject* BooleanObject::Cast(v8::Value* value) {\n #ifdef V8_ENABLE_CHECKS\n@@ -10047,6 +10155,19 @@ Float64Array* Float64Array::Cast(v8::Value* value) {\n   return static_cast<Float64Array*>(value);\n }\n \n+BigInt64Array* BigInt64Array::Cast(v8::Value* value) {\n+#ifdef V8_ENABLE_CHECKS\n+  CheckCast(value);\n+#endif\n+  return static_cast<BigInt64Array*>(value);\n+}\n+\n+BigUint64Array* BigUint64Array::Cast(v8::Value* value) {\n+#ifdef V8_ENABLE_CHECKS\n+  CheckCast(value);\n+#endif\n+  return static_cast<BigUint64Array*>(value);\n+}\n \n Uint8ClampedArray* Uint8ClampedArray::Cast(v8::Value* value) {\n #ifdef V8_ENABLE_CHECKS"
        },
        {
            "sha": "d8e1f36c128d1e1f103e6447a631b835a6f25f42",
            "filename": "deps/v8/include/v8config.h",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8config.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finclude%2Fv8config.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8config.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -177,6 +177,9 @@\n //  V8_HAS_ATTRIBUTE_VISIBILITY         - __attribute__((visibility)) supported\n //  V8_HAS_ATTRIBUTE_WARN_UNUSED_RESULT - __attribute__((warn_unused_result))\n //                                        supported\n+//  V8_HAS_BUILTIN_BSWAP16              - __builtin_bswap16() supported\n+//  V8_HAS_BUILTIN_BSWAP32              - __builtin_bswap32() supported\n+//  V8_HAS_BUILTIN_BSWAP64              - __builtin_bswap64() supported\n //  V8_HAS_BUILTIN_CLZ                  - __builtin_clz() supported\n //  V8_HAS_BUILTIN_CTZ                  - __builtin_ctz() supported\n //  V8_HAS_BUILTIN_EXPECT               - __builtin_expect() supported\n@@ -217,6 +220,9 @@\n # define V8_HAS_ATTRIBUTE_WARN_UNUSED_RESULT \\\n     (__has_attribute(warn_unused_result))\n \n+# define V8_HAS_BUILTIN_BSWAP16 (__has_builtin(__builtin_bswap16))\n+# define V8_HAS_BUILTIN_BSWAP32 (__has_builtin(__builtin_bswap32))\n+# define V8_HAS_BUILTIN_BSWAP64 (__has_builtin(__builtin_bswap64))\n # define V8_HAS_BUILTIN_CLZ (__has_builtin(__builtin_clz))\n # define V8_HAS_BUILTIN_CTZ (__has_builtin(__builtin_ctz))\n # define V8_HAS_BUILTIN_EXPECT (__has_builtin(__builtin_expect))\n@@ -405,7 +411,7 @@ namespace v8 { template <typename T> class AlignOfHelper { char c; T t; }; }\n \n // Annotate a function indicating the caller must examine the return value.\n // Use like:\n-//   int foo() WARN_UNUSED_RESULT;\n+//   int foo() V8_WARN_UNUSED_RESULT;\n #if V8_HAS_ATTRIBUTE_WARN_UNUSED_RESULT\n #define V8_WARN_UNUSED_RESULT __attribute__((warn_unused_result))\n #else"
        },
        {
            "sha": "6159b3f1cdeca427f85042647e3cfdd6d03c1680",
            "filename": "deps/v8/infra/config/cq.cfg",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fconfig%2Fcq.cfg?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -31,6 +31,7 @@ verifiers {\n         triggered_by: \"v8_linux64_asan_rel_ng\"\n       }\n       builders { name: \"v8_linux64_gcc_compile_dbg\" }\n+      builders { name: \"v8_linux64_jumbo_compile_rel\" }\n       builders { name: \"v8_linux64_rel_ng\" }\n       builders {\n         name: \"v8_linux64_rel_ng_triggered\"\n@@ -84,10 +85,10 @@ verifiers {\n         name: \"v8_linux_verify_csa_rel_ng_triggered\"\n         triggered_by: \"v8_linux_verify_csa_rel_ng\"\n       }\n-      builders { name: \"v8_mac_rel_ng\" }\n+      builders { name: \"v8_mac64_rel_ng\" }\n       builders {\n-        name: \"v8_mac_rel_ng_triggered\"\n-        triggered_by: \"v8_mac_rel_ng\"\n+        name: \"v8_mac64_rel_ng_triggered\"\n+        triggered_by: \"v8_mac64_rel_ng\"\n       }\n       builders { name: \"v8_node_linux64_rel\" }\n       builders { name: \"v8_presubmit\" }"
        },
        {
            "sha": "8f13079ea3d3b44b805243397b0367c44954e491",
            "filename": "deps/v8/infra/mb/gn_isolate_map.pyl",
            "status": "added",
            "additions": 74,
            "deletions": 0,
            "changes": 74,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finfra%2Fmb%2Fgn_isolate_map.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finfra%2Fmb%2Fgn_isolate_map.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fmb%2Fgn_isolate_map.pyl?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -0,0 +1,74 @@\n+# Copyright 2018 the V8 project authors. All rights reserved.\n+# Use of this source code is governed by a BSD-style license that can be\n+# found in the LICENSE file.\n+\n+# gn_isolate_map.pyl - A mapping of Ninja build target names to GN labels and\n+# test type classifications for the tests that are run on the bots.\n+#\n+# This file is based on testing/buildbot/gn_isolate_map.pyl for Chromium, but\n+# is covering V8 stand-alone tests instead.\n+# See https://cs.chromium.org/chromium/src/testing/buildbot/gn_isolate_map.pyl\n+# for more detailed documentation.\n+\n+{\n+  \"All\": {\n+    \"label\": \"//:All\",\n+    \"type\": \"script\",\n+  },\n+  \"benchmarks\": {\n+    \"label\": \"//test/benchmarks:v8_benchmarks\",\n+    \"type\": \"script\",\n+  },\n+  \"bot_default\": {\n+    \"label\": \"//test:v8_bot_default\",\n+    \"type\": \"script\",\n+  },\n+  \"check-static-initializers\": {\n+    \"label\": \"//tools:v8_check_static_initializers\",\n+    \"type\": \"script\",\n+  },\n+  \"d8_default\": {\n+    \"label\": \"//test:v8_d8_default\",\n+    \"type\": \"script\",\n+  },\n+  \"mjsunit\": {\n+    \"label\": \"//test/mjsunit:v8_mjsunit\",\n+    \"type\": \"script\",\n+  },\n+  \"mozilla\": {\n+    \"label\": \"//test/mozilla:v8_mozilla\",\n+    \"type\": \"script\",\n+  },\n+  \"optimize_for_size\": {\n+    \"label\": \"//test:v8_optimize_for_size\",\n+    \"type\": \"script\",\n+  },\n+  \"perf\": {\n+    \"label\": \"//test:v8_perf\",\n+    \"type\": \"script\",\n+  },\n+  \"jsfunfuzz\": {\n+    \"label\": \"//tools/jsfunfuzz:v8_jsfunfuzz\",\n+    \"type\": \"script\",\n+  },\n+  \"run-gcmole\": {\n+    \"label\": \"//tools/gcmole:v8_run_gcmole\",\n+    \"type\": \"script\",\n+  },\n+  \"run-num-fuzzer\": {\n+    \"label\": \"//test:v8_run_num_fuzzer\",\n+    \"type\": \"script\",\n+  },\n+  \"test262\": {\n+    \"label\": \"//test/test262:v8_test262\",\n+    \"type\": \"script\",\n+  },\n+  \"unittests\": {\n+    \"label\": \"//test/unittests:unittests\",\n+    \"type\": \"script\",\n+  },\n+  \"webkit\": {\n+    \"label\": \"//test/webkit:v8_webkit\",\n+    \"type\": \"script\",\n+  },\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "70a7ad5754e0cb5340d89d20e2de00135724ca66",
            "filename": "deps/v8/infra/mb/mb_config.pyl",
            "status": "modified",
            "additions": 111,
            "deletions": 84,
            "changes": 195,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finfra%2Fmb%2Fmb_config.pyl?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -68,6 +68,11 @@\n       'V8 Linux64 - custom snapshot - debug builder': 'debug_x64_custom',\n       'V8 Linux64 - internal snapshot': 'release_x64_internal',\n       'V8 Linux64 - verify csa': 'release_x64_verify_csa',\n+      # Jumbo.\n+      'V8 Linux64 Jumbo': 'release_x64_jumbo',\n+      'V8 Linux64 Jumbo - debug': 'debug_x64_jumbo',\n+      'V8 Linux64 Jumbo - limited': 'release_x64_jumbo_limited',\n+      'V8 Linux64 Jumbo - limited - debug': 'debug_x64_jumbo_limited',\n       # Windows.\n       'V8 Win32 - builder': 'release_x86_minimal_symbols',\n       'V8 Win32 - debug builder': 'debug_x86_minimal_symbols',\n@@ -79,11 +84,9 @@\n       'V8 Win64 - debug': 'debug_x64_minimal_symbols',\n       'V8 Win64 - msvc': 'release_x64_msvc',\n       # Mac.\n-      'V8 Mac': 'release_x86',\n-      'V8 Mac - debug': 'debug_x86',\n       'V8 Mac64': 'release_x64',\n       'V8 Mac64 - debug': 'debug_x64',\n-      'V8 Mac GC Stress': 'debug_x86',\n+      'V8 Mac64 GC Stress': 'debug_x64',\n       'V8 Mac64 ASAN': 'release_x64_asan_no_lsan',\n       # Sanitizers.\n       'V8 Linux64 ASAN': 'release_x64_asan',\n@@ -97,7 +100,6 @@\n       # FYI.\n       'V8 Fuchsia': 'release_x64_fuchsia',\n       'V8 Fuchsia - debug': 'debug_x64_fuchsia',\n-      'V8 Linux - swarming staging': 'release_x64',\n       'V8 Linux64 - cfi': 'release_x64_cfi',\n       'V8 Linux64 UBSanVptr': 'release_x64_ubsan_vptr',\n       'V8 Linux - vtunejit': 'debug_x86_vtunejit',\n@@ -210,9 +212,12 @@\n       'v8_linux64_rel_ng': 'release_x64_test_features_trybot',\n       'v8_linux64_verify_csa_rel_ng': 'release_x64_verify_csa',\n       'v8_linux64_asan_rel_ng': 'release_x64_asan_minimal_symbols',\n+      'v8_linux64_cfi_rel_ng': 'release_x64_cfi',\n       'v8_linux64_msan_rel': 'release_simulate_arm64_msan_minimal_symbols',\n       'v8_linux64_sanitizer_coverage_rel':\n           'release_x64_asan_minimal_symbols_coverage',\n+      'v8_linux64_jumbo_compile_rel': 'release_x64_jumbo_trybot',\n+      'v8_linux64_jumbo_limited_compile_rel': 'release_x64_jumbo_limited_trybot',\n       'v8_linux64_tsan_rel': 'release_x64_tsan_minimal_symbols',\n       'v8_linux64_tsan_concurrent_marking_rel_ng':\n           'release_x64_tsan_concurrent_marking_minimal_symbols',\n@@ -226,12 +231,12 @@\n       'v8_win64_asan_rel_ng': 'release_x64_asan_no_lsan',\n       'v8_win64_msvc_compile_rel': 'release_x64_msvc',\n       'v8_win64_dbg': 'debug_x64_minimal_symbols',\n+      'v8_win64_msvc_rel_ng': 'release_x64_msvc',\n       'v8_win64_rel_ng': 'release_x64_trybot',\n-      'v8_mac_rel_ng': 'release_x86_trybot',\n-      'v8_mac_dbg': 'debug_x86_trybot',\n-      'v8_mac_gc_stress_dbg': 'debug_x86_trybot',\n-      'v8_mac64_rel': 'release_x64_trybot',\n-      'v8_mac64_dbg': 'debug_x64_minimal_symbols',\n+      'v8_mac64_gc_stress_dbg': 'debug_x64_trybot',\n+      'v8_mac64_rel_ng': 'release_x64_trybot',\n+      'v8_mac64_dbg': 'debug_x64',\n+      'v8_mac64_dbg_ng': 'debug_x64',\n       'v8_mac64_asan_rel': 'release_x64_asan_no_lsan',\n       'v8_linux_arm_rel_ng': 'release_simulate_arm_trybot',\n       'v8_linux_arm_dbg': 'debug_simulate_arm',\n@@ -321,160 +326,174 @@\n \n     # Debug configs for simulators.\n     'debug_simulate_arm': [\n-      'debug_bot', 'simulate_arm', 'swarming'],\n+      'debug_bot', 'simulate_arm'],\n     'debug_simulate_arm_asan_edge': [\n       'debug_bot', 'simulate_arm', 'asan', 'edge'],\n     'debug_simulate_arm64': [\n-      'debug_bot', 'simulate_arm64', 'swarming'],\n+      'debug_bot', 'simulate_arm64'],\n     'debug_simulate_arm64_asan_edge': [\n       'debug_bot', 'simulate_arm64', 'asan', 'lsan', 'edge'],\n     'debug_simulate_arm64_no_snap': [\n       'debug', 'simulate_arm64', 'shared', 'goma', 'v8_optimized_debug',\n-      'swarming', 'v8_snapshot_none'],\n+      'v8_snapshot_none'],\n     'debug_simulate_mipsel_asan_edge': [\n       'debug_bot', 'simulate_mipsel', 'asan', 'edge'],\n \n     # Release configs for simulators.\n     'release_simulate_arm': [\n-      'release_bot', 'simulate_arm', 'swarming'],\n+      'release_bot', 'simulate_arm'],\n     'release_simulate_arm_trybot': [\n-      'release_trybot', 'simulate_arm', 'swarming'],\n+      'release_trybot', 'simulate_arm'],\n     'release_simulate_arm64': [\n-      'release_bot', 'simulate_arm64', 'swarming'],\n+      'release_bot', 'simulate_arm64'],\n     'release_simulate_arm64_msan': [\n-      'release_bot', 'simulate_arm64', 'msan', 'swarming'],\n+      'release_bot', 'simulate_arm64', 'msan'],\n     'release_simulate_arm64_msan_minimal_symbols': [\n-      'release_bot', 'simulate_arm64', 'msan', 'minimal_symbols', 'swarming'],\n+      'release_bot', 'simulate_arm64', 'msan', 'minimal_symbols'],\n     'release_simulate_arm64_msan_edge': [\n       'release_bot', 'simulate_arm64', 'edge', 'msan'],\n     'release_simulate_arm64_msan_no_origins_edge': [\n       'release_bot', 'simulate_arm64', 'edge', 'msan_no_origins'],\n     'release_simulate_arm64_trybot': [\n-      'release_trybot', 'simulate_arm64', 'swarming'],\n+      'release_trybot', 'simulate_arm64'],\n     'release_simulate_mipsel': [\n-      'release_bot', 'simulate_mipsel', 'swarming'],\n+      'release_bot', 'simulate_mipsel'],\n     'release_simulate_mips64el': [\n-      'release_bot', 'simulate_mips64el', 'swarming'],\n+      'release_bot', 'simulate_mips64el'],\n     'release_simulate_ppc': [\n-      'release_bot', 'simulate_ppc', 'swarming'],\n+      'release_bot', 'simulate_ppc'],\n     'release_simulate_ppc64': [\n-      'release_bot', 'simulate_ppc64', 'swarming'],\n+      'release_bot', 'simulate_ppc64'],\n     'release_simulate_s390': [\n-      'release_bot', 'simulate_s390', 'swarming'],\n+      'release_bot', 'simulate_s390'],\n     'release_simulate_s390x': [\n-      'release_bot', 'simulate_s390x', 'swarming'],\n+      'release_bot', 'simulate_s390x'],\n \n     # Debug configs for arm.\n     'debug_arm': [\n-      'debug_bot', 'arm', 'hard_float', 'swarming'],\n+      'debug_bot', 'arm', 'hard_float'],\n \n     # Release configs for arm.\n     'release_arm': [\n-      'release_bot', 'arm', 'hard_float', 'swarming'],\n+      'release_bot', 'arm', 'hard_float'],\n     'release_android_arm': [\n-      'release_bot', 'arm', 'android', 'minimal_symbols', 'swarming'],\n+      'release_bot', 'arm', 'android', 'minimal_symbols'],\n     'release_android_arm64': [\n-      'release_bot', 'arm64', 'android', 'minimal_symbols', 'swarming'],\n+      'release_bot', 'arm64', 'android', 'minimal_symbols'],\n \n     # Release configs for x64.\n     'release_x64': [\n-      'release_bot', 'x64', 'swarming'],\n+      'release_bot', 'x64'],\n     'release_x64_asan': [\n-      'release_bot', 'x64', 'asan', 'lsan', 'swarming'],\n+      'release_bot', 'x64', 'asan', 'lsan'],\n     'release_x64_asan_minimal_symbols': [\n-      'release_bot', 'x64', 'asan', 'lsan', 'minimal_symbols', 'swarming'],\n+      'release_bot', 'x64', 'asan', 'lsan', 'minimal_symbols'],\n     'release_x64_asan_minimal_symbols_coverage': [\n-      'release_bot', 'x64', 'asan', 'bb', 'coverage', 'lsan', 'minimal_symbols',\n-      'swarming'],\n+      'release_bot', 'x64', 'asan', 'bb', 'coverage', 'lsan', 'minimal_symbols'],\n     'release_x64_asan_no_lsan': [\n-      'release_bot', 'x64', 'asan', 'swarming'],\n+      'release_bot', 'x64', 'asan'],\n     'release_x64_asan_no_lsan_edge_verify_heap': [\n-      'release_bot', 'x64', 'asan', 'edge', 'swarming', 'v8_verify_heap'],\n+      'release_bot', 'x64', 'asan', 'edge', 'v8_verify_heap'],\n     'release_x64_asan_no_lsan_verify_heap': [\n-      'release_bot', 'x64', 'asan', 'swarming', 'v8_verify_heap'],\n+      'release_bot', 'x64', 'asan', 'v8_verify_heap'],\n     'release_x64_asan_no_lsan_verify_heap_dchecks': [\n-      'release_bot', 'x64', 'asan', 'swarming', 'dcheck_always_on',\n+      'release_bot', 'x64', 'asan', 'dcheck_always_on',\n       'v8_enable_slow_dchecks', 'v8_verify_heap'],\n     'release_x64_asan_symbolized_edge_verify_heap': [\n       'release_bot', 'x64', 'asan', 'edge', 'lsan', 'symbolized',\n       'v8_verify_heap'],\n     'release_x64_cfi': [\n-      'release_bot', 'x64', 'cfi', 'swarming'],\n+      'release_bot', 'x64', 'cfi'],\n     'release_x64_cfi_clusterfuzz': [\n       'release_bot', 'x64', 'cfi_clusterfuzz'],\n     'release_x64_msvc': [\n-      'release_bot', 'x64', 'msvc', 'swarming'],\n+      'release_bot', 'x64', 'msvc'],\n     'release_x64_concurrent_marking': [\n-      'release_bot', 'x64', 'v8_enable_concurrent_marking', 'swarming'],\n+      'release_bot', 'x64', 'v8_enable_concurrent_marking'],\n     'release_x64_correctness_fuzzer' : [\n-      'release_bot', 'x64', 'v8_correctness_fuzzer', 'swarming'],\n+      'release_bot', 'x64', 'v8_correctness_fuzzer'],\n     'release_x64_fuchsia': [\n-      'release_bot', 'x64', 'fuchsia', 'swarming'],\n+      'release_bot', 'x64', 'fuchsia'],\n     'release_x64_fuchsia_trybot': [\n-      'release_trybot', 'x64', 'fuchsia', 'swarming'],\n+      'release_trybot', 'x64', 'fuchsia'],\n     'release_x64_gcc_coverage': [\n       'release_bot', 'x64', 'coverage', 'gcc'],\n     'release_x64_internal': [\n-      'release_bot', 'x64', 'swarming', 'v8_snapshot_internal'],\n+      'release_bot', 'x64', 'v8_enable_embedded_builtins',\n+      'v8_snapshot_internal'],\n+    'release_x64_jumbo': [\n+      'release_bot', 'x64', 'jumbo'],\n+    'release_x64_jumbo_trybot': [\n+      'release_trybot', 'x64', 'jumbo'],\n+    'release_x64_jumbo_limited': [\n+      'release_bot', 'x64', 'jumbo_limited'],\n+    'release_x64_jumbo_limited_trybot': [\n+      'release_trybot', 'x64', 'jumbo_limited'],\n     'release_x64_minimal_symbols': [\n-      'release_bot', 'x64', 'minimal_symbols', 'swarming'],\n+      'release_bot', 'x64', 'minimal_symbols'],\n     'release_x64_no_snap': [\n-      'release_bot', 'x64', 'swarming', 'v8_snapshot_none'],\n+      'release_bot', 'x64', 'v8_snapshot_none'],\n     'release_x64_trybot': [\n-      'release_trybot', 'x64', 'swarming'],\n+      'release_trybot', 'x64'],\n     'release_x64_test_features_trybot': [\n-      'release_trybot', 'x64', 'swarming', 'v8_enable_test_features'],\n+      'release_trybot', 'x64', 'v8_enable_test_features'],\n     'release_x64_tsan': [\n-      'release_bot', 'x64', 'tsan', 'swarming'],\n+      'release_bot', 'x64', 'tsan'],\n     'release_x64_tsan_concurrent_marking': [\n-      'release_bot', 'x64', 'v8_enable_concurrent_marking', 'tsan', 'swarming'],\n+      'release_bot', 'x64', 'v8_enable_concurrent_marking', 'tsan'],\n     'release_x64_tsan_concurrent_marking_minimal_symbols': [\n       'release_bot', 'x64', 'v8_enable_concurrent_marking', 'tsan',\n-      'minimal_symbols', 'swarming'],\n+      'minimal_symbols'],\n     'release_x64_tsan_minimal_symbols': [\n-      'release_bot', 'x64', 'tsan', 'minimal_symbols', 'swarming'],\n+      'release_bot', 'x64', 'tsan', 'minimal_symbols'],\n     'release_x64_ubsan_vptr': [\n-      'release_bot', 'x64', 'ubsan_vptr', 'swarming'],\n+      'release_bot', 'x64', 'ubsan_vptr'],\n     'release_x64_ubsan_vptr_recover_edge': [\n-      'release_bot', 'x64', 'edge', 'ubsan_vptr_recover', 'swarming'],\n+      'release_bot', 'x64', 'edge', 'ubsan_vptr_recover'],\n     'release_x64_ubsan_vptr_minimal_symbols': [\n-      'release_bot', 'x64', 'ubsan_vptr', 'minimal_symbols', 'swarming'],\n+      'release_bot', 'x64', 'ubsan_vptr', 'minimal_symbols'],\n     'release_x64_verify_csa': [\n-      'release_bot', 'x64', 'swarming', 'dcheck_always_on',\n-      'v8_enable_slow_dchecks', 'v8_verify_csa'],\n+      'release_bot', 'x64', 'dcheck_always_on',\n+      'v8_enable_slow_dchecks', 'v8_enable_embedded_builtins', 'v8_verify_csa'],\n \n     # Debug configs for x64.\n     'debug_x64': [\n-      'debug_bot', 'x64', 'swarming'],\n+      'debug_bot', 'x64'],\n     'debug_x64_asan_edge': [\n       'debug_bot', 'x64', 'asan', 'lsan', 'edge'],\n     'debug_x64_asan_no_lsan_static_edge': [\n       'debug', 'static', 'goma', 'v8_enable_slow_dchecks', 'v8_optimized_debug',\n-      'x64', 'asan', 'edge', 'swarming'],\n+      'x64', 'asan', 'edge'],\n     'debug_x64_custom': [\n-      'debug_bot', 'x64', 'swarming', 'v8_snapshot_custom'],\n+      'debug_bot', 'x64', 'v8_snapshot_custom'],\n     'debug_x64_fuchsia': [\n-      'debug_bot', 'x64', 'fuchsia', 'swarming'],\n+      'debug_bot', 'x64', 'fuchsia'],\n     'debug_x64_gcc': [\n       'debug_bot', 'x64', 'gcc'],\n+    'debug_x64_jumbo': [\n+      'debug_bot', 'x64', 'jumbo'],\n+    'debug_x64_jumbo_limited': [\n+      'debug_bot', 'x64', 'jumbo_limited'],\n     'debug_x64_minimal_symbols': [\n-      'debug_bot', 'x64', 'minimal_symbols', 'swarming'],\n+      'debug_bot', 'x64', 'minimal_symbols'],\n     'debug_x64_no_snap': [\n-      'debug_bot', 'x64', 'swarming', 'v8_snapshot_none'],\n+      'debug_bot', 'x64', 'v8_snapshot_none'],\n+    'debug_x64_trybot': [\n+      'debug_trybot', 'x64'],\n \n     # Debug configs for x86.\n     'debug_x86': [\n-      'debug_bot', 'x86', 'swarming'],\n+      'debug_bot', 'x86'],\n     'debug_x86_minimal_symbols': [\n-      'debug_bot', 'x86', 'minimal_symbols', 'swarming'],\n+      'debug_bot', 'x86', 'minimal_symbols'],\n     'debug_x86_no_i18n': [\n-      'debug_bot', 'x86', 'swarming', 'v8_no_i18n'],\n+      'debug_bot', 'x86', 'v8_no_i18n'],\n     'debug_x86_no_snap': [\n-      'debug_bot', 'x86', 'swarming', 'v8_snapshot_none'],\n+      'debug_bot', 'x86', 'v8_snapshot_none'],\n     'debug_x86_no_snap_trybot': [\n-      'debug_trybot', 'x86', 'swarming', 'v8_snapshot_none'],\n+      'debug_trybot', 'x86', 'v8_snapshot_none'],\n     'debug_x86_trybot': [\n-      'debug_trybot', 'x86', 'swarming'],\n+      'debug_trybot', 'x86'],\n     'debug_x86_vtunejit': [\n       'debug_bot', 'x86', 'v8_enable_vtunejit'],\n     'full_debug_x86': [\n@@ -483,38 +502,38 @@\n \n     # Release configs for x86.\n     'release_x86': [\n-      'release_bot', 'x86', 'swarming'],\n+      'release_bot', 'x86'],\n     'release_x86_disassembler': [\n       'release_bot', 'x86', 'v8_enable_disassembler'],\n     'release_x86_gcc': [\n       'release_bot', 'x86', 'gcc'],\n     'release_x86_gcc_minimal_symbols': [\n       'release_bot', 'x86', 'gcc', 'minimal_symbols'],\n     'release_x86_gcmole': [\n-      'release_bot', 'x86', 'gcmole', 'swarming'],\n+      'release_bot', 'x86', 'gcmole'],\n     'release_x86_gcmole_trybot': [\n-      'release_trybot', 'x86', 'gcmole', 'swarming'],\n+      'release_trybot', 'x86', 'gcmole'],\n     'release_x86_interpreted_regexp': [\n       'release_bot', 'x86', 'v8_interpreted_regexp'],\n     'release_x86_minimal_symbols': [\n-      'release_bot', 'x86', 'minimal_symbols', 'swarming'],\n+      'release_bot', 'x86', 'minimal_symbols'],\n     'release_x86_no_i18n_trybot': [\n-      'release_trybot', 'x86', 'swarming', 'v8_no_i18n'],\n+      'release_trybot', 'x86', 'v8_no_i18n'],\n     'release_x86_no_snap': [\n-      'release_bot', 'x86', 'swarming', 'v8_snapshot_none'],\n+      'release_bot', 'x86', 'v8_snapshot_none'],\n     'release_x86_no_snap_shared_minimal_symbols': [\n-      'release', 'x86', 'goma', 'minimal_symbols', 'shared', 'swarming',\n+      'release', 'x86', 'goma', 'minimal_symbols', 'shared',\n       'v8_snapshot_none'],\n     'release_x86_no_snap_trybot': [\n-      'release_trybot', 'x86', 'swarming', 'v8_snapshot_none'],\n+      'release_trybot', 'x86', 'v8_snapshot_none'],\n     'release_x86_predictable': [\n       'release_bot', 'x86', 'v8_enable_verify_predictable'],\n     'release_x86_shared_verify_heap': [\n-      'release', 'x86', 'goma', 'shared', 'swarming', 'v8_verify_heap'],\n+      'release', 'x86', 'goma', 'shared', 'v8_verify_heap'],\n     'release_x86_trybot': [\n-      'release_trybot', 'x86', 'swarming'],\n+      'release_trybot', 'x86'],\n     'release_x86_verify_csa': [\n-      'release_bot', 'x86', 'swarming', 'dcheck_always_on',\n+      'release_bot', 'x86', 'dcheck_always_on',\n       'v8_enable_slow_dchecks', 'v8_verify_csa'],\n \n     # Release configs for mips.\n@@ -608,6 +627,14 @@\n       'gn_args': 'arm_float_abi=\"hard\"',\n     },\n \n+    'jumbo': {\n+      'gn_args': 'use_jumbo_build=true',\n+    },\n+\n+    'jumbo_limited': {\n+      'gn_args': 'use_jumbo_build=true jumbo_file_merge_limit=50',\n+    },\n+\n     'lsan': {\n       'mixins': ['v8_enable_test_features'],\n       'gn_args': 'is_lsan=true',\n@@ -699,10 +726,6 @@\n       'gn_args': 'is_component_build=false',\n     },\n \n-    'swarming': {\n-      'gn_args': 'v8_test_isolation_mode=\"prepare\"',\n-    },\n-\n     # TODO(machenbach): Remove the symbolized config after the bots are gone.\n     'symbolized': {\n       'gn_args': 'v8_no_inline=true',\n@@ -744,6 +767,10 @@\n       'gn_args': 'v8_enable_disassembler=true',\n     },\n \n+    'v8_enable_embedded_builtins': {\n+      'gn_args': 'v8_enable_embedded_builtins=true',\n+    },\n+\n     'v8_enable_slow_dchecks': {\n       'gn_args': 'v8_enable_slow_dchecks=true',\n     },"
        },
        {
            "sha": "050f91d6d6d99003fc70f0facb4587f97ddf36a3",
            "filename": "deps/v8/src/DEPS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2FDEPS",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2FDEPS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2FDEPS?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -8,6 +8,8 @@ include_rules = [\n   \"+src/compiler/code-assembler.h\",\n   \"+src/compiler/wasm-compiler.h\",\n   \"-src/heap\",\n+  \"+src/heap/factory.h\",\n+  \"+src/heap/factory-inl.h\",\n   \"+src/heap/heap.h\",\n   \"+src/heap/heap-inl.h\",\n   \"-src/inspector\","
        },
        {
            "sha": "f292988b8e1e5dc130b9e8d07c37fb6fe69aece7",
            "filename": "deps/v8/src/accessors.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 4,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Faccessors.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Faccessors.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faccessors.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -8,8 +8,8 @@\n #include \"src/contexts.h\"\n #include \"src/deoptimizer.h\"\n #include \"src/execution.h\"\n-#include \"src/factory.h\"\n #include \"src/frames-inl.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/isolate-inl.h\"\n #include \"src/messages.h\"\n #include \"src/property-details.h\"\n@@ -28,6 +28,7 @@ Handle<AccessorInfo> Accessors::MakeAccessor(\n   info->set_is_special_data_property(true);\n   info->set_is_sloppy(false);\n   info->set_replace_on_access(false);\n+  info->set_has_no_side_effect(false);\n   name = factory->InternalizeName(name);\n   info->set_name(*name);\n   Handle<Object> get = v8::FromCData(isolate, getter);\n@@ -78,7 +79,7 @@ bool Accessors::IsJSObjectFieldAccessor(Handle<Map> map, Handle<Name> name,\n \n namespace {\n \n-MUST_USE_RESULT MaybeHandle<Object> ReplaceAccessorWithDataProperty(\n+V8_WARN_UNUSED_RESULT MaybeHandle<Object> ReplaceAccessorWithDataProperty(\n     Isolate* isolate, Handle<Object> receiver, Handle<JSObject> holder,\n     Handle<Name> name, Handle<Object> value) {\n   LookupIterator it(receiver, name, holder,\n@@ -97,6 +98,9 @@ MUST_USE_RESULT MaybeHandle<Object> ReplaceAccessorWithDataProperty(\n \n }  // namespace\n \n+//\n+// Accessors::ReconfigureToDataProperty\n+//\n void Accessors::ReconfigureToDataProperty(\n     v8::Local<v8::Name> key, v8::Local<v8::Value> val,\n     const v8::PropertyCallbackInfo<v8::Boolean>& info) {\n@@ -118,6 +122,18 @@ void Accessors::ReconfigureToDataProperty(\n   }\n }\n \n+void Accessors::ReconfigureToDataPropertyGetter(\n+    v8::Local<v8::Name> name, const v8::PropertyCallbackInfo<v8::Value>& info) {\n+  UNREACHABLE();\n+}\n+\n+Handle<AccessorInfo> Accessors::MakeReconfigureToDataPropertyInfo(\n+    Isolate* isolate) {\n+  Handle<Name> name = isolate->factory()->ReconfigureToDataProperty_string();\n+  return MakeAccessor(isolate, name, &ReconfigureToDataPropertyGetter,\n+                      &ReconfigureToDataProperty);\n+}\n+\n //\n // Accessors::ArgumentsIterator\n //\n@@ -299,7 +315,6 @@ Handle<AccessorInfo> Accessors::MakeStringLengthInfo(Isolate* isolate) {\n                       &StringLengthGetter, nullptr);\n }\n \n-\n //\n // Accessors::ScriptColumnOffset\n //\n@@ -613,7 +628,7 @@ void Accessors::ScriptEvalFromFunctionNameGetter(\n   if (script->has_eval_from_shared()) {\n     Handle<SharedFunctionInfo> shared(script->eval_from_shared());\n     // Find the name of the function calling eval.\n-    result = Handle<Object>(shared->name(), isolate);\n+    result = Handle<Object>(shared->Name(), isolate);\n   }\n   info.GetReturnValue().Set(Utils::ToLocal(result));\n }"
        },
        {
            "sha": "1911f92dbf93ddeedebb9a90ea643a2ce3a6cca9",
            "filename": "deps/v8/src/accessors.h",
            "status": "modified",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Faccessors.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Faccessors.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Faccessors.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -33,6 +33,7 @@ class JavaScriptFrame;\n   V(function_name, FunctionName)                                    \\\n   V(function_length, FunctionLength)                                \\\n   V(function_prototype, FunctionPrototype)                          \\\n+  V(reconfigure_to_data_property, ReconfigureToDataProperty)        \\\n   V(script_column_offset, ScriptColumnOffset)                       \\\n   V(script_compilation_type, ScriptCompilationType)                 \\\n   V(script_context_data, ScriptContextData)                         \\\n@@ -48,6 +49,15 @@ class JavaScriptFrame;\n   V(script_source_mapping_url, ScriptSourceMappingUrl)              \\\n   V(string_length, StringLength)\n \n+#define SIDE_EFFECT_FREE_ACCESSOR_INFO_LIST(V) \\\n+  V(ArrayLength)                               \\\n+  V(BoundFunctionLength)                       \\\n+  V(BoundFunctionName)                         \\\n+  V(FunctionName)                              \\\n+  V(FunctionLength)                            \\\n+  V(FunctionPrototype)                         \\\n+  V(StringLength)\n+\n #define ACCESSOR_SETTER_LIST(V) \\\n   V(ArrayLengthSetter)          \\\n   V(ErrorStackSetter)           \\\n@@ -73,6 +83,16 @@ class Accessors : public AllStatic {\n   ACCESSOR_SETTER_LIST(ACCESSOR_SETTER_DECLARATION)\n #undef ACCESSOR_SETTER_DECLARATION\n \n+  static constexpr int kAccessorInfoCount =\n+#define COUNT_ACCESSOR(...) +1\n+      ACCESSOR_INFO_LIST(COUNT_ACCESSOR);\n+#undef COUNT_ACCESSOR\n+\n+  static constexpr int kAccessorSetterCount =\n+#define COUNT_ACCESSOR(...) +1\n+      ACCESSOR_SETTER_LIST(COUNT_ACCESSOR);\n+#undef COUNT_ACCESSOR\n+\n   static void ModuleNamespaceEntryGetter(\n       v8::Local<v8::Name> name,\n       const v8::PropertyCallbackInfo<v8::Value>& info);"
        },
        {
            "sha": "f63c2f292f5b000371098493a8eca13ac40ed2c8",
            "filename": "deps/v8/src/allocation.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fallocation.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fallocation.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fallocation.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -69,7 +69,7 @@ const int kAllocationTries = 2;\n void* Malloced::New(size_t size) {\n   void* result = AllocWithRetry(size);\n   if (result == nullptr) {\n-    V8::FatalProcessOutOfMemory(\"Malloced operator new\");\n+    V8::FatalProcessOutOfMemory(nullptr, \"Malloced operator new\");\n   }\n   return result;\n }\n@@ -115,7 +115,7 @@ void* AlignedAlloc(size_t size, size_t alignment) {\n     if (!OnCriticalMemoryPressure(size + alignment)) break;\n   }\n   if (result == nullptr) {\n-    V8::FatalProcessOutOfMemory(\"AlignedAlloc\");\n+    V8::FatalProcessOutOfMemory(nullptr, \"AlignedAlloc\");\n   }\n   return result;\n }"
        },
        {
            "sha": "13dc3e508f3d3c45f9c56d0f1e478ea674daef59",
            "filename": "deps/v8/src/allocation.h",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fallocation.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fallocation.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fallocation.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -14,13 +14,16 @@\n namespace v8 {\n namespace internal {\n \n+class Isolate;\n+\n // This file defines memory allocation functions. If a first attempt at an\n // allocation fails, these functions call back into the embedder, then attempt\n // the allocation a second time. The embedder callback must not reenter V8.\n \n // Called when allocation routines fail to allocate, even with a possible retry.\n // This function should not return, but should terminate the current processing.\n-V8_EXPORT_PRIVATE void FatalProcessOutOfMemory(const char* message);\n+[[noreturn]] V8_EXPORT_PRIVATE void FatalProcessOutOfMemory(\n+    Isolate* isolate, const char* message);\n \n // Superclass for classes managed with new & delete.\n class V8_EXPORT_PRIVATE Malloced {\n@@ -38,13 +41,13 @@ T* NewArray(size_t size) {\n   if (result == nullptr) {\n     V8::GetCurrentPlatform()->OnCriticalMemoryPressure();\n     result = new (std::nothrow) T[size];\n-    if (result == nullptr) FatalProcessOutOfMemory(\"NewArray\");\n+    if (result == nullptr) FatalProcessOutOfMemory(nullptr, \"NewArray\");\n   }\n   return result;\n }\n \n-template <typename T,\n-          typename = typename std::enable_if<IS_TRIVIALLY_COPYABLE(T)>::type>\n+template <typename T, typename = typename std::enable_if<\n+                          base::is_trivially_copyable<T>::value>::type>\n T* NewArray(size_t size, T default_val) {\n   T* result = reinterpret_cast<T*>(NewArray<uint8_t>(sizeof(T) * size));\n   for (size_t i = 0; i < size; ++i) result[i] = default_val;"
        },
        {
            "sha": "1cf9662b94997bb428e0b8199200f6a568474a1e",
            "filename": "deps/v8/src/api-arguments-inl.h",
            "status": "modified",
            "additions": 112,
            "deletions": 70,
            "changes": 182,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments-inl.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -13,82 +13,121 @@\n namespace v8 {\n namespace internal {\n \n-#define FOR_EACH_CALLBACK(F)           \\\n-  F(Query, query, Object, v8::Integer) \\\n-  F(Deleter, deleter, Object, v8::Boolean)\n-\n-#define PREPARE_CALLBACK_INFO(ISOLATE, F, RETURN_VALUE, API_RETURN_TYPE) \\\n-  if (ISOLATE->needs_side_effect_check() &&                              \\\n-      !PerformSideEffectCheck(ISOLATE, FUNCTION_ADDR(F))) {              \\\n-    return RETURN_VALUE();                                               \\\n-  }                                                                      \\\n-  VMState<EXTERNAL> state(ISOLATE);                                      \\\n-  ExternalCallbackScope call_scope(ISOLATE, FUNCTION_ADDR(F));           \\\n+#define FOR_EACH_CALLBACK(F)                        \\\n+  F(Query, query, Object, v8::Integer, interceptor) \\\n+  F(Deleter, deleter, Object, v8::Boolean, Handle<Object>())\n+\n+#define DCHECK_NAME_COMPATIBLE(interceptor, name) \\\n+  DCHECK(interceptor->is_named());                \\\n+  DCHECK(!name->IsPrivate());                     \\\n+  DCHECK_IMPLIES(name->IsSymbol(), interceptor->can_intercept_symbols());\n+\n+#define PREPARE_CALLBACK_INFO(ISOLATE, F, RETURN_VALUE, API_RETURN_TYPE,     \\\n+                              CALLBACK_INFO)                                 \\\n+  if (ISOLATE->debug_execution_mode() == DebugInfo::kSideEffects &&          \\\n+      !ISOLATE->debug()->PerformSideEffectCheckForCallback(CALLBACK_INFO)) { \\\n+    return RETURN_VALUE();                                                   \\\n+  }                                                                          \\\n+  VMState<EXTERNAL> state(ISOLATE);                                          \\\n+  ExternalCallbackScope call_scope(ISOLATE, FUNCTION_ADDR(F));               \\\n   PropertyCallbackInfo<API_RETURN_TYPE> callback_info(begin());\n \n-#define CREATE_NAMED_CALLBACK(Function, type, ReturnType, ApiReturnType)      \\\n-  Handle<ReturnType> PropertyCallbackArguments::CallNamed##Function(          \\\n+#define CREATE_NAMED_CALLBACK(FUNCTION, TYPE, RETURN_TYPE, API_RETURN_TYPE,   \\\n+                              INFO_FOR_SIDE_EFFECT)                           \\\n+  Handle<RETURN_TYPE> PropertyCallbackArguments::CallNamed##FUNCTION(         \\\n       Handle<InterceptorInfo> interceptor, Handle<Name> name) {               \\\n-    DCHECK(interceptor->is_named());                                          \\\n-    DCHECK(!name->IsPrivate());                                               \\\n-    DCHECK_IMPLIES(name->IsSymbol(), interceptor->can_intercept_symbols());   \\\n+    DCHECK_NAME_COMPATIBLE(interceptor, name);                                \\\n     Isolate* isolate = this->isolate();                                       \\\n     RuntimeCallTimerScope timer(                                              \\\n-        isolate, RuntimeCallCounterId::kNamed##Function##Callback);           \\\n-    DCHECK(!name->IsPrivate());                                               \\\n-    GenericNamedProperty##Function##Callback f =                              \\\n-        ToCData<GenericNamedProperty##Function##Callback>(                    \\\n-            interceptor->type());                                             \\\n-    PREPARE_CALLBACK_INFO(isolate, f, Handle<ReturnType>, ApiReturnType);     \\\n+        isolate, RuntimeCallCounterId::kNamed##FUNCTION##Callback);           \\\n+    GenericNamedProperty##FUNCTION##Callback f =                              \\\n+        ToCData<GenericNamedProperty##FUNCTION##Callback>(                    \\\n+            interceptor->TYPE());                                             \\\n+    PREPARE_CALLBACK_INFO(isolate, f, Handle<RETURN_TYPE>, API_RETURN_TYPE,   \\\n+                          INFO_FOR_SIDE_EFFECT);                              \\\n     LOG(isolate,                                                              \\\n-        ApiNamedPropertyAccess(\"interceptor-named-\" #type, holder(), *name)); \\\n+        ApiNamedPropertyAccess(\"interceptor-named-\" #TYPE, holder(), *name)); \\\n     f(v8::Utils::ToLocal(name), callback_info);                               \\\n-    return GetReturnValue<ReturnType>(isolate);                               \\\n+    return GetReturnValue<RETURN_TYPE>(isolate);                              \\\n   }\n \n FOR_EACH_CALLBACK(CREATE_NAMED_CALLBACK)\n #undef CREATE_NAMED_CALLBACK\n \n-#define CREATE_INDEXED_CALLBACK(Function, type, ReturnType, ApiReturnType) \\\n-  Handle<ReturnType> PropertyCallbackArguments::CallIndexed##Function(     \\\n-      Handle<InterceptorInfo> interceptor, uint32_t index) {               \\\n-    DCHECK(!interceptor->is_named());                                      \\\n-    Isolate* isolate = this->isolate();                                    \\\n-    RuntimeCallTimerScope timer(                                           \\\n-        isolate, RuntimeCallCounterId::kIndexed##Function##Callback);      \\\n-    IndexedProperty##Function##Callback f =                                \\\n-        ToCData<IndexedProperty##Function##Callback>(interceptor->type()); \\\n-    PREPARE_CALLBACK_INFO(isolate, f, Handle<ReturnType>, ApiReturnType);  \\\n-    LOG(isolate, ApiIndexedPropertyAccess(\"interceptor-indexed-\" #type,    \\\n-                                          holder(), index));               \\\n-    f(index, callback_info);                                               \\\n-    return GetReturnValue<ReturnType>(isolate);                            \\\n+#define CREATE_INDEXED_CALLBACK(FUNCTION, TYPE, RETURN_TYPE, API_RETURN_TYPE, \\\n+                                INFO_FOR_SIDE_EFFECT)                         \\\n+  Handle<RETURN_TYPE> PropertyCallbackArguments::CallIndexed##FUNCTION(       \\\n+      Handle<InterceptorInfo> interceptor, uint32_t index) {                  \\\n+    DCHECK(!interceptor->is_named());                                         \\\n+    Isolate* isolate = this->isolate();                                       \\\n+    RuntimeCallTimerScope timer(                                              \\\n+        isolate, RuntimeCallCounterId::kIndexed##FUNCTION##Callback);         \\\n+    IndexedProperty##FUNCTION##Callback f =                                   \\\n+        ToCData<IndexedProperty##FUNCTION##Callback>(interceptor->TYPE());    \\\n+    PREPARE_CALLBACK_INFO(isolate, f, Handle<RETURN_TYPE>, API_RETURN_TYPE,   \\\n+                          INFO_FOR_SIDE_EFFECT);                              \\\n+    LOG(isolate, ApiIndexedPropertyAccess(\"interceptor-indexed-\" #TYPE,       \\\n+                                          holder(), index));                  \\\n+    f(index, callback_info);                                                  \\\n+    return GetReturnValue<RETURN_TYPE>(isolate);                              \\\n   }\n \n FOR_EACH_CALLBACK(CREATE_INDEXED_CALLBACK)\n \n #undef FOR_EACH_CALLBACK\n #undef CREATE_INDEXED_CALLBACK\n \n+Handle<Object> FunctionCallbackArguments::Call(CallHandlerInfo* handler) {\n+  Isolate* isolate = this->isolate();\n+  LOG(isolate, ApiObjectAccess(\"call\", holder()));\n+  RuntimeCallTimerScope timer(isolate, RuntimeCallCounterId::kFunctionCallback);\n+  v8::FunctionCallback f =\n+      v8::ToCData<v8::FunctionCallback>(handler->callback());\n+  if (isolate->debug_execution_mode() == DebugInfo::kSideEffects &&\n+      !isolate->debug()->PerformSideEffectCheckForCallback(handle(handler))) {\n+    return Handle<Object>();\n+  }\n+  VMState<EXTERNAL> state(isolate);\n+  ExternalCallbackScope call_scope(isolate, FUNCTION_ADDR(f));\n+  FunctionCallbackInfo<v8::Value> info(begin(), argv_, argc_);\n+  f(info);\n+  return GetReturnValue<Object>(isolate);\n+}\n+\n+Handle<JSObject> PropertyCallbackArguments::CallNamedEnumerator(\n+    Handle<InterceptorInfo> interceptor) {\n+  DCHECK(interceptor->is_named());\n+  LOG(isolate(), ApiObjectAccess(\"interceptor-named-enumerator\", holder()));\n+  RuntimeCallTimerScope timer(isolate(),\n+                              RuntimeCallCounterId::kNamedEnumeratorCallback);\n+  return CallPropertyEnumerator(interceptor);\n+}\n+\n+Handle<JSObject> PropertyCallbackArguments::CallIndexedEnumerator(\n+    Handle<InterceptorInfo> interceptor) {\n+  DCHECK(!interceptor->is_named());\n+  LOG(isolate(), ApiObjectAccess(\"interceptor-indexed-enumerator\", holder()));\n+  RuntimeCallTimerScope timer(isolate(),\n+                              RuntimeCallCounterId::kIndexedEnumeratorCallback);\n+  return CallPropertyEnumerator(interceptor);\n+}\n+\n Handle<Object> PropertyCallbackArguments::CallNamedGetter(\n     Handle<InterceptorInfo> interceptor, Handle<Name> name) {\n-  DCHECK(interceptor->is_named());\n-  DCHECK_IMPLIES(name->IsSymbol(), interceptor->can_intercept_symbols());\n-  DCHECK(!name->IsPrivate());\n+  DCHECK_NAME_COMPATIBLE(interceptor, name);\n   Isolate* isolate = this->isolate();\n   RuntimeCallTimerScope timer(isolate,\n                               RuntimeCallCounterId::kNamedGetterCallback);\n   LOG(isolate,\n       ApiNamedPropertyAccess(\"interceptor-named-getter\", holder(), *name));\n   GenericNamedPropertyGetterCallback f =\n       ToCData<GenericNamedPropertyGetterCallback>(interceptor->getter());\n-  return BasicCallNamedGetterCallback(f, name);\n+  return BasicCallNamedGetterCallback(f, name, interceptor);\n }\n \n Handle<Object> PropertyCallbackArguments::CallNamedDescriptor(\n     Handle<InterceptorInfo> interceptor, Handle<Name> name) {\n-  DCHECK(interceptor->is_named());\n-  DCHECK_IMPLIES(name->IsSymbol(), interceptor->can_intercept_symbols());\n+  DCHECK_NAME_COMPATIBLE(interceptor, name);\n   Isolate* isolate = this->isolate();\n   RuntimeCallTimerScope timer(isolate,\n                               RuntimeCallCounterId::kNamedDescriptorCallback);\n@@ -97,35 +136,31 @@ Handle<Object> PropertyCallbackArguments::CallNamedDescriptor(\n   GenericNamedPropertyDescriptorCallback f =\n       ToCData<GenericNamedPropertyDescriptorCallback>(\n           interceptor->descriptor());\n-  return BasicCallNamedGetterCallback(f, name);\n+  return BasicCallNamedGetterCallback(f, name, interceptor);\n }\n \n Handle<Object> PropertyCallbackArguments::BasicCallNamedGetterCallback(\n-    GenericNamedPropertyGetterCallback f, Handle<Name> name) {\n+    GenericNamedPropertyGetterCallback f, Handle<Name> name,\n+    Handle<Object> info) {\n   DCHECK(!name->IsPrivate());\n   Isolate* isolate = this->isolate();\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value);\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value, info);\n   f(v8::Utils::ToLocal(name), callback_info);\n   return GetReturnValue<Object>(isolate);\n }\n \n Handle<Object> PropertyCallbackArguments::CallNamedSetter(\n     Handle<InterceptorInfo> interceptor, Handle<Name> name,\n     Handle<Object> value) {\n-  DCHECK_IMPLIES(name->IsSymbol(), interceptor->can_intercept_symbols());\n+  DCHECK_NAME_COMPATIBLE(interceptor, name);\n   GenericNamedPropertySetterCallback f =\n       ToCData<GenericNamedPropertySetterCallback>(interceptor->setter());\n-  return CallNamedSetterCallback(f, name, value);\n-}\n-\n-Handle<Object> PropertyCallbackArguments::CallNamedSetterCallback(\n-    GenericNamedPropertySetterCallback f, Handle<Name> name,\n-    Handle<Object> value) {\n-  DCHECK(!name->IsPrivate());\n   Isolate* isolate = this->isolate();\n   RuntimeCallTimerScope timer(isolate,\n                               RuntimeCallCounterId::kNamedSetterCallback);\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value);\n+  Handle<Object> side_effect_check_not_supported;\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value,\n+                        side_effect_check_not_supported);\n   LOG(isolate,\n       ApiNamedPropertyAccess(\"interceptor-named-set\", holder(), *name));\n   f(v8::Utils::ToLocal(name), v8::Utils::ToLocal(value), callback_info);\n@@ -135,15 +170,15 @@ Handle<Object> PropertyCallbackArguments::CallNamedSetterCallback(\n Handle<Object> PropertyCallbackArguments::CallNamedDefiner(\n     Handle<InterceptorInfo> interceptor, Handle<Name> name,\n     const v8::PropertyDescriptor& desc) {\n-  DCHECK(interceptor->is_named());\n-  DCHECK(!name->IsPrivate());\n-  DCHECK_IMPLIES(name->IsSymbol(), interceptor->can_intercept_symbols());\n+  DCHECK_NAME_COMPATIBLE(interceptor, name);\n   Isolate* isolate = this->isolate();\n   RuntimeCallTimerScope timer(isolate,\n                               RuntimeCallCounterId::kNamedDefinerCallback);\n   GenericNamedPropertyDefinerCallback f =\n       ToCData<GenericNamedPropertyDefinerCallback>(interceptor->definer());\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value);\n+  Handle<Object> side_effect_check_not_supported;\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value,\n+                        side_effect_check_not_supported);\n   LOG(isolate,\n       ApiNamedPropertyAccess(\"interceptor-named-define\", holder(), *name));\n   f(v8::Utils::ToLocal(name), desc, callback_info);\n@@ -158,7 +193,9 @@ Handle<Object> PropertyCallbackArguments::CallIndexedSetter(\n                               RuntimeCallCounterId::kIndexedSetterCallback);\n   IndexedPropertySetterCallback f =\n       ToCData<IndexedPropertySetterCallback>(interceptor->setter());\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value);\n+  Handle<Object> side_effect_check_not_supported;\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value,\n+                        side_effect_check_not_supported);\n   LOG(isolate,\n       ApiIndexedPropertyAccess(\"interceptor-indexed-set\", holder(), index));\n   f(index, v8::Utils::ToLocal(value), callback_info);\n@@ -174,7 +211,9 @@ Handle<Object> PropertyCallbackArguments::CallIndexedDefiner(\n                               RuntimeCallCounterId::kIndexedDefinerCallback);\n   IndexedPropertyDefinerCallback f =\n       ToCData<IndexedPropertyDefinerCallback>(interceptor->definer());\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value);\n+  Handle<Object> side_effect_check_not_supported;\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value,\n+                        side_effect_check_not_supported);\n   LOG(isolate,\n       ApiIndexedPropertyAccess(\"interceptor-indexed-define\", holder(), index));\n   f(index, desc, callback_info);\n@@ -191,7 +230,7 @@ Handle<Object> PropertyCallbackArguments::CallIndexedGetter(\n       ApiIndexedPropertyAccess(\"interceptor-indexed-getter\", holder(), index));\n   IndexedPropertyGetterCallback f =\n       ToCData<IndexedPropertyGetterCallback>(interceptor->getter());\n-  return BasicCallIndexedGetterCallback(f, index);\n+  return BasicCallIndexedGetterCallback(f, index, interceptor);\n }\n \n Handle<Object> PropertyCallbackArguments::CallIndexedDescriptor(\n@@ -204,13 +243,13 @@ Handle<Object> PropertyCallbackArguments::CallIndexedDescriptor(\n                                         holder(), index));\n   IndexedPropertyDescriptorCallback f =\n       ToCData<IndexedPropertyDescriptorCallback>(interceptor->descriptor());\n-  return BasicCallIndexedGetterCallback(f, index);\n+  return BasicCallIndexedGetterCallback(f, index, interceptor);\n }\n \n Handle<Object> PropertyCallbackArguments::BasicCallIndexedGetterCallback(\n-    IndexedPropertyGetterCallback f, uint32_t index) {\n+    IndexedPropertyGetterCallback f, uint32_t index, Handle<Object> info) {\n   Isolate* isolate = this->isolate();\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value);\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, v8::Value, info);\n   f(index, callback_info);\n   return GetReturnValue<Object>(isolate);\n }\n@@ -222,7 +261,7 @@ Handle<JSObject> PropertyCallbackArguments::CallPropertyEnumerator(\n       v8::ToCData<IndexedPropertyEnumeratorCallback>(interceptor->enumerator());\n   // TODO(cbruni): assert same type for indexed and named callback.\n   Isolate* isolate = this->isolate();\n-  PREPARE_CALLBACK_INFO(isolate, f, Handle<JSObject>, v8::Array);\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<JSObject>, v8::Array, interceptor);\n   f(callback_info);\n   return GetReturnValue<JSObject>(isolate);\n }\n@@ -238,20 +277,23 @@ Handle<Object> PropertyCallbackArguments::CallAccessorGetter(\n   LOG(isolate, ApiNamedPropertyAccess(\"accessor-getter\", holder(), *name));\n   AccessorNameGetterCallback f =\n       ToCData<AccessorNameGetterCallback>(info->getter());\n-  return BasicCallNamedGetterCallback(f, name);\n+  return BasicCallNamedGetterCallback(f, name, info);\n }\n \n-void PropertyCallbackArguments::CallAccessorSetter(\n+Handle<Object> PropertyCallbackArguments::CallAccessorSetter(\n     Handle<AccessorInfo> accessor_info, Handle<Name> name,\n     Handle<Object> value) {\n   Isolate* isolate = this->isolate();\n   RuntimeCallTimerScope timer(isolate,\n                               RuntimeCallCounterId::kAccessorSetterCallback);\n   AccessorNameSetterCallback f =\n       ToCData<AccessorNameSetterCallback>(accessor_info->setter());\n-  PREPARE_CALLBACK_INFO(isolate, f, void, void);\n+  Handle<Object> side_effect_check_not_supported;\n+  PREPARE_CALLBACK_INFO(isolate, f, Handle<Object>, void,\n+                        side_effect_check_not_supported);\n   LOG(isolate, ApiNamedPropertyAccess(\"accessor-setter\", holder(), *name));\n   f(v8::Utils::ToLocal(name), v8::Utils::ToLocal(value), callback_info);\n+  return GetReturnValue<Object>(isolate);\n }\n \n #undef PREPARE_CALLBACK_INFO"
        },
        {
            "sha": "502b8cbdca2dc4102dd5a465306768c49b393562",
            "filename": "deps/v8/src/api-arguments.cc",
            "status": "removed",
            "additions": 0,
            "deletions": 57,
            "changes": 57,
            "blob_url": "https://github.com/nodejs/node/blob/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fsrc%2Fapi-arguments.cc",
            "raw_url": "https://github.com/nodejs/node/raw/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fsrc%2Fapi-arguments.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments.cc?ref=faf449ca0490f5371dc6cbbc94a87eb697b00fcc",
            "patch": "@@ -1,57 +0,0 @@\n-// Copyright 2016 the V8 project authors. All rights reserved.\n-// Use of this source code is governed by a BSD-style license that can be\n-// found in the LICENSE file.\n-\n-#include \"src/api-arguments.h\"\n-#include \"src/api-arguments-inl.h\"\n-\n-#include \"src/debug/debug.h\"\n-#include \"src/objects-inl.h\"\n-#include \"src/tracing/trace-event.h\"\n-#include \"src/vm-state-inl.h\"\n-\n-namespace v8 {\n-namespace internal {\n-\n-Handle<Object> FunctionCallbackArguments::Call(CallHandlerInfo* handler) {\n-  Isolate* isolate = this->isolate();\n-  LOG(isolate, ApiObjectAccess(\"call\", holder()));\n-  RuntimeCallTimerScope timer(isolate, RuntimeCallCounterId::kFunctionCallback);\n-  v8::FunctionCallback f =\n-      v8::ToCData<v8::FunctionCallback>(handler->callback());\n-  if (isolate->needs_side_effect_check() &&\n-      !isolate->debug()->PerformSideEffectCheckForCallback(FUNCTION_ADDR(f))) {\n-    return Handle<Object>();\n-  }\n-  VMState<EXTERNAL> state(isolate);\n-  ExternalCallbackScope call_scope(isolate, FUNCTION_ADDR(f));\n-  FunctionCallbackInfo<v8::Value> info(begin(), argv_, argc_);\n-  f(info);\n-  return GetReturnValue<Object>(isolate);\n-}\n-\n-Handle<JSObject> PropertyCallbackArguments::CallNamedEnumerator(\n-    Handle<InterceptorInfo> interceptor) {\n-  DCHECK(interceptor->is_named());\n-  LOG(isolate(), ApiObjectAccess(\"interceptor-named-enumerator\", holder()));\n-  RuntimeCallTimerScope timer(isolate(),\n-                              RuntimeCallCounterId::kNamedEnumeratorCallback);\n-  return CallPropertyEnumerator(interceptor);\n-}\n-\n-Handle<JSObject> PropertyCallbackArguments::CallIndexedEnumerator(\n-    Handle<InterceptorInfo> interceptor) {\n-  DCHECK(!interceptor->is_named());\n-  LOG(isolate(), ApiObjectAccess(\"interceptor-indexed-enumerator\", holder()));\n-  RuntimeCallTimerScope timer(isolate(),\n-                              RuntimeCallCounterId::kIndexedEnumeratorCallback);\n-  return CallPropertyEnumerator(interceptor);\n-}\n-\n-bool PropertyCallbackArguments::PerformSideEffectCheck(Isolate* isolate,\n-                                                       Address function) {\n-  return isolate->debug()->PerformSideEffectCheckForCallback(function);\n-}\n-\n-}  // namespace internal\n-}  // namespace v8"
        },
        {
            "sha": "0abbcdcafa091d2edf3a493a4d6a7bb97bf98619",
            "filename": "deps/v8/src/api-arguments.h",
            "status": "modified",
            "additions": 23,
            "deletions": 24,
            "changes": 47,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi-arguments.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi-arguments.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-arguments.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -6,6 +6,7 @@\n #define V8_API_ARGUMENTS_H_\n \n #include \"src/api.h\"\n+#include \"src/debug/debug.h\"\n #include \"src/isolate.h\"\n #include \"src/visitors.h\"\n \n@@ -15,41 +16,40 @@ namespace internal {\n // Custom arguments replicate a small segment of stack that can be\n // accessed through an Arguments object the same way the actual stack\n // can.\n-template <int kArrayLength>\n class CustomArgumentsBase : public Relocatable {\n- public:\n-  virtual inline void IterateInstance(RootVisitor* v) {\n-    v->VisitRootPointers(Root::kRelocatable, nullptr, values_,\n-                         values_ + kArrayLength);\n-  }\n-\n  protected:\n-  inline Object** begin() { return values_; }\n   explicit inline CustomArgumentsBase(Isolate* isolate)\n       : Relocatable(isolate) {}\n-  Object* values_[kArrayLength];\n };\n \n template <typename T>\n-class CustomArguments : public CustomArgumentsBase<T::kArgsLength> {\n+class CustomArguments : public CustomArgumentsBase {\n  public:\n   static const int kReturnValueOffset = T::kReturnValueIndex;\n \n-  typedef CustomArgumentsBase<T::kArgsLength> Super;\n   ~CustomArguments() {\n     this->begin()[kReturnValueOffset] =\n         reinterpret_cast<Object*>(kHandleZapValue);\n   }\n \n+  virtual inline void IterateInstance(RootVisitor* v) {\n+    v->VisitRootPointers(Root::kRelocatable, nullptr, values_,\n+                         values_ + T::kArgsLength);\n+  }\n+\n  protected:\n-  explicit inline CustomArguments(Isolate* isolate) : Super(isolate) {}\n+  explicit inline CustomArguments(Isolate* isolate)\n+      : CustomArgumentsBase(isolate) {}\n \n   template <typename V>\n   Handle<V> GetReturnValue(Isolate* isolate);\n \n   inline Isolate* isolate() {\n     return reinterpret_cast<Isolate*>(this->begin()[T::kIsolateIndex]);\n   }\n+\n+  inline Object** begin() { return values_; }\n+  Object* values_[T::kArgsLength];\n };\n \n template <typename T>\n@@ -103,8 +103,9 @@ class PropertyCallbackArguments\n   // -------------------------------------------------------------------------\n   // Accessor Callbacks\n   // Also used for AccessorSetterCallback.\n-  inline void CallAccessorSetter(Handle<AccessorInfo> info, Handle<Name> name,\n-                                 Handle<Object> value);\n+  inline Handle<Object> CallAccessorSetter(Handle<AccessorInfo> info,\n+                                           Handle<Name> name,\n+                                           Handle<Object> value);\n   // Also used for AccessorGetterCallback, AccessorNameGetterCallback.\n   inline Handle<Object> CallAccessorGetter(Handle<AccessorInfo> info,\n                                            Handle<Name> name);\n@@ -118,17 +119,15 @@ class PropertyCallbackArguments\n   inline Handle<Object> CallNamedSetter(Handle<InterceptorInfo> interceptor,\n                                         Handle<Name> name,\n                                         Handle<Object> value);\n-  inline Handle<Object> CallNamedSetterCallback(\n-      GenericNamedPropertySetterCallback callback, Handle<Name> name,\n-      Handle<Object> value);\n   inline Handle<Object> CallNamedDefiner(Handle<InterceptorInfo> interceptor,\n                                          Handle<Name> name,\n                                          const v8::PropertyDescriptor& desc);\n   inline Handle<Object> CallNamedDeleter(Handle<InterceptorInfo> interceptor,\n                                          Handle<Name> name);\n   inline Handle<Object> CallNamedDescriptor(Handle<InterceptorInfo> interceptor,\n                                             Handle<Name> name);\n-  Handle<JSObject> CallNamedEnumerator(Handle<InterceptorInfo> interceptor);\n+  inline Handle<JSObject> CallNamedEnumerator(\n+      Handle<InterceptorInfo> interceptor);\n \n   // -------------------------------------------------------------------------\n   // Indexed Interceptor Callbacks\n@@ -145,7 +144,8 @@ class PropertyCallbackArguments\n                                            uint32_t index);\n   inline Handle<Object> CallIndexedDescriptor(\n       Handle<InterceptorInfo> interceptor, uint32_t index);\n-  Handle<JSObject> CallIndexedEnumerator(Handle<InterceptorInfo> interceptor);\n+  inline Handle<JSObject> CallIndexedEnumerator(\n+      Handle<InterceptorInfo> interceptor);\n \n  private:\n   /*\n@@ -160,16 +160,15 @@ class PropertyCallbackArguments\n       Handle<InterceptorInfo> interceptor);\n \n   inline Handle<Object> BasicCallIndexedGetterCallback(\n-      IndexedPropertyGetterCallback f, uint32_t index);\n+      IndexedPropertyGetterCallback f, uint32_t index, Handle<Object> info);\n   inline Handle<Object> BasicCallNamedGetterCallback(\n-      GenericNamedPropertyGetterCallback f, Handle<Name> name);\n+      GenericNamedPropertyGetterCallback f, Handle<Name> name,\n+      Handle<Object> info);\n \n   inline JSObject* holder() {\n     return JSObject::cast(this->begin()[T::kHolderIndex]);\n   }\n \n-  bool PerformSideEffectCheck(Isolate* isolate, Address function);\n-\n   // Don't copy PropertyCallbackArguments, because they would both have the\n   // same prev_ pointer.\n   DISALLOW_COPY_AND_ASSIGN(PropertyCallbackArguments);\n@@ -216,7 +215,7 @@ class FunctionCallbackArguments\n    * and used if it's been set to anything inside the callback.\n    * New style callbacks always use the return value.\n    */\n-  Handle<Object> Call(CallHandlerInfo* handler);\n+  inline Handle<Object> Call(CallHandlerInfo* handler);\n \n  private:\n   inline JSObject* holder() {"
        },
        {
            "sha": "981f592f5a08edd067e8f0175fdddc5940ca5173",
            "filename": "deps/v8/src/api-natives.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi-natives.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi-natives.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-natives.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -626,7 +626,7 @@ Handle<JSFunction> ApiNatives::CreateApiFunction(\n       FunctionTemplateInfo::GetOrCreateSharedFunctionInfo(isolate, obj,\n                                                           maybe_name);\n   // To simplify things, API functions always have shared name.\n-  DCHECK(shared->has_shared_name());\n+  DCHECK(shared->HasSharedName());\n \n   Handle<JSFunction> result =\n       isolate->factory()->NewFunctionFromSharedFunctionInfo("
        },
        {
            "sha": "f73e7cee7ea28f08f4d52b8cb2bb7488a2222ce5",
            "filename": "deps/v8/src/api-natives.h",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi-natives.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi-natives.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi-natives.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -21,15 +21,15 @@ class ApiNatives {\n  public:\n   static const int kInitialFunctionCacheSize = 256;\n \n-  MUST_USE_RESULT static MaybeHandle<JSFunction> InstantiateFunction(\n+  V8_WARN_UNUSED_RESULT static MaybeHandle<JSFunction> InstantiateFunction(\n       Handle<FunctionTemplateInfo> data,\n       MaybeHandle<Name> maybe_name = MaybeHandle<Name>());\n \n-  MUST_USE_RESULT static MaybeHandle<JSObject> InstantiateObject(\n+  V8_WARN_UNUSED_RESULT static MaybeHandle<JSObject> InstantiateObject(\n       Handle<ObjectTemplateInfo> data,\n       Handle<JSReceiver> new_target = Handle<JSReceiver>());\n \n-  MUST_USE_RESULT static MaybeHandle<JSObject> InstantiateRemoteObject(\n+  V8_WARN_UNUSED_RESULT static MaybeHandle<JSObject> InstantiateRemoteObject(\n       Handle<ObjectTemplateInfo> data);\n \n   enum ApiInstanceType {\n@@ -41,7 +41,7 @@ class ApiNatives {\n   static Handle<JSFunction> CreateApiFunction(\n       Isolate* isolate, Handle<FunctionTemplateInfo> obj,\n       Handle<Object> prototype, ApiInstanceType instance_type,\n-      MaybeHandle<Name> maybe_name = MaybeHandle<Name>());\n+      MaybeHandle<Name> name = MaybeHandle<Name>());\n \n   static void AddDataProperty(Isolate* isolate, Handle<TemplateInfo> info,\n                               Handle<Name> name, Handle<Object> value,"
        },
        {
            "sha": "8b177d041d447fb5241a15aa3e9bf7b2e8cfcf55",
            "filename": "deps/v8/src/api.cc",
            "status": "modified",
            "additions": 304,
            "deletions": 176,
            "changes": 480,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -69,6 +69,7 @@\n #include \"src/snapshot/natives.h\"\n #include \"src/snapshot/snapshot.h\"\n #include \"src/startup-data-util.h\"\n+#include \"src/string-hasher.h\"\n #include \"src/tracing/trace-event.h\"\n #include \"src/trap-handler/trap-handler.h\"\n #include \"src/unicode-cache-inl.h\"\n@@ -307,19 +308,22 @@ static ScriptOrigin GetScriptOriginForScript(i::Isolate* isolate,\n \n // --- E x c e p t i o n   B e h a v i o r ---\n \n-\n-void i::FatalProcessOutOfMemory(const char* location) {\n-  i::V8::FatalProcessOutOfMemory(location, false);\n+void i::FatalProcessOutOfMemory(i::Isolate* isolate, const char* location) {\n+  i::V8::FatalProcessOutOfMemory(isolate, location, false);\n }\n \n // When V8 cannot allocate memory FatalProcessOutOfMemory is called. The default\n // OOM error handler is called and execution is stopped.\n-void i::V8::FatalProcessOutOfMemory(const char* location, bool is_heap_oom) {\n-  i::Isolate* isolate = i::Isolate::Current();\n+void i::V8::FatalProcessOutOfMemory(i::Isolate* isolate, const char* location,\n+                                    bool is_heap_oom) {\n   char last_few_messages[Heap::kTraceRingBufferSize + 1];\n   char js_stacktrace[Heap::kStacktraceBufferSize + 1];\n   i::HeapStats heap_stats;\n \n+  if (isolate == nullptr) {\n+    isolate = Isolate::Current();\n+  }\n+\n   if (isolate == nullptr) {\n     // On a background thread -> we cannot retrieve memory information from the\n     // Isolate. Write easy-to-recognize values on the stack.\n@@ -329,7 +333,7 @@ void i::V8::FatalProcessOutOfMemory(const char* location, bool is_heap_oom) {\n     // Note that the embedder's oom handler won't be called in this case. We\n     // just crash.\n     FATAL(\"API fatal error handler returned after process out of memory\");\n-    return;\n+    UNREACHABLE();\n   }\n \n   memset(last_few_messages, 0, Heap::kTraceRingBufferSize + 1);\n@@ -393,7 +397,7 @@ void i::V8::FatalProcessOutOfMemory(const char* location, bool is_heap_oom) {\n     PrintF(\"\\n<--- Last few GCs --->\\n%s\\n\", first_newline);\n     PrintF(\"\\n<--- JS stacktrace --->\\n%s\\n\", js_stacktrace);\n   }\n-  Utils::ReportOOMFailure(location, is_heap_oom);\n+  Utils::ReportOOMFailure(isolate, location, is_heap_oom);\n   // If the fatal error handler returns, we stop execution.\n   FATAL(\"API fatal error handler returned after process out of memory\");\n }\n@@ -415,8 +419,8 @@ void Utils::ReportApiFailure(const char* location, const char* message) {\n   isolate->SignalFatalError();\n }\n \n-void Utils::ReportOOMFailure(const char* location, bool is_heap_oom) {\n-  i::Isolate* isolate = i::Isolate::Current();\n+void Utils::ReportOOMFailure(i::Isolate* isolate, const char* location,\n+                             bool is_heap_oom) {\n   OOMErrorCallback oom_callback = isolate->oom_behavior();\n   if (oom_callback == nullptr) {\n     // TODO(wfh): Remove this fallback once Blink is setting OOM handler. See\n@@ -704,7 +708,7 @@ StartupData SnapshotCreator::CreateBlob(\n   // context even after we have disposed of the context.\n   isolate->heap()->CollectAllAvailableGarbage(\n       i::GarbageCollectionReason::kSnapshotCreator);\n-  isolate->heap()->CompactWeakFixedArrays();\n+  isolate->heap()->CompactFixedArraysOfWeakCells();\n \n   i::DisallowHeapAllocation no_gc_from_here_on;\n \n@@ -728,15 +732,33 @@ StartupData SnapshotCreator::CreateBlob(\n   i::SerializedHandleChecker handle_checker(isolate, &contexts);\n   CHECK(handle_checker.CheckGlobalAndEternalHandles());\n \n-  // Complete in-object slack tracking for all functions.\n   i::HeapIterator heap_iterator(isolate->heap());\n   while (i::HeapObject* current_obj = heap_iterator.next()) {\n-    if (!current_obj->IsJSFunction()) continue;\n-    i::JSFunction* fun = i::JSFunction::cast(current_obj);\n-    fun->CompleteInobjectSlackTrackingIfActive();\n+    if (current_obj->IsJSFunction()) {\n+      i::JSFunction* fun = i::JSFunction::cast(current_obj);\n+\n+      // Complete in-object slack tracking for all functions.\n+      fun->CompleteInobjectSlackTrackingIfActive();\n+\n+      // Also, clear out feedback vectors.\n+      fun->feedback_cell()->set_value(isolate->heap()->undefined_value());\n+    }\n+\n+    // Clear out re-compilable data from all shared function infos. Any\n+    // JSFunctions using these SFIs will have their code pointers reset by the\n+    // partial serializer.\n+    if (current_obj->IsSharedFunctionInfo() &&\n+        function_code_handling == FunctionCodeHandling::kClear) {\n+      i::SharedFunctionInfo* shared = i::SharedFunctionInfo::cast(current_obj);\n+      if (shared->CanFlushCompiled()) {\n+        shared->FlushCompiled();\n+      }\n+      DCHECK(shared->HasCodeObject() || shared->HasBuiltinId() ||\n+             shared->IsApiFunction());\n+    }\n   }\n \n-  i::StartupSerializer startup_serializer(isolate, function_code_handling);\n+  i::StartupSerializer startup_serializer(isolate);\n   startup_serializer.SerializeStrongReferences();\n \n   // Serialize each context with a new partial serializer.\n@@ -1221,13 +1243,18 @@ static i::Handle<i::FixedArray> EmbedderDataFor(Context* context,\n   if (!Utils::ApiCheck(can_grow, location, \"Index too large\")) {\n     return i::Handle<i::FixedArray>();\n   }\n-  int new_size = i::Max(index, data->length() << 1) + 1;\n+  int new_size = index + 1;\n   int grow_by = new_size - data->length();\n   data = isolate->factory()->CopyFixedArrayAndGrow(data, grow_by);\n   env->set_embedder_data(*data);\n   return data;\n }\n \n+uint32_t Context::GetNumberOfEmbedderDataFields() {\n+  i::Handle<i::Context> context = Utils::OpenHandle(this);\n+  CHECK(context->IsNativeContext());\n+  return static_cast<uint32_t>(context->embedder_data()->length());\n+}\n \n v8::Local<v8::Value> Context::SlowGetEmbedderData(int index) {\n   const char* location = \"v8::Context::GetEmbedderData()\";\n@@ -1375,7 +1402,8 @@ void FunctionTemplate::Inherit(v8::Local<FunctionTemplate> value) {\n static Local<FunctionTemplate> FunctionTemplateNew(\n     i::Isolate* isolate, FunctionCallback callback, v8::Local<Value> data,\n     v8::Local<Signature> signature, int length, bool do_not_cache,\n-    v8::Local<Private> cached_property_name = v8::Local<Private>()) {\n+    v8::Local<Private> cached_property_name = v8::Local<Private>(),\n+    SideEffectType side_effect_type = SideEffectType::kHasSideEffect) {\n   i::Handle<i::Struct> struct_obj =\n       isolate->factory()->NewStruct(i::FUNCTION_TEMPLATE_INFO_TYPE, i::TENURED);\n   i::Handle<i::FunctionTemplateInfo> obj =\n@@ -1388,7 +1416,7 @@ static Local<FunctionTemplate> FunctionTemplateNew(\n   }\n   obj->set_serial_number(i::Smi::FromInt(next_serial_number));\n   if (callback != 0) {\n-    Utils::ToLocal(obj)->SetCallHandler(callback, data);\n+    Utils::ToLocal(obj)->SetCallHandler(callback, data, side_effect_type);\n   }\n   obj->set_length(length);\n   obj->set_undetectable(false);\n@@ -1413,8 +1441,8 @@ Local<FunctionTemplate> FunctionTemplate::New(\n   // function templates when the isolate is created for serialization.\n   LOG_API(i_isolate, FunctionTemplate, New);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n-  auto templ =\n-      FunctionTemplateNew(i_isolate, callback, data, signature, length, false);\n+  auto templ = FunctionTemplateNew(i_isolate, callback, data, signature, length,\n+                                   false, Local<Private>(), side_effect_type);\n   if (behavior == ConstructorBehavior::kThrow) templ->RemovePrototype();\n   return templ;\n }\n@@ -1442,7 +1470,7 @@ Local<FunctionTemplate> FunctionTemplate::NewWithCache(\n   LOG_API(i_isolate, FunctionTemplate, NewWithCache);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n   return FunctionTemplateNew(i_isolate, callback, data, signature, length,\n-                             false, cache_property);\n+                             false, cache_property, side_effect_type);\n }\n \n Local<Signature> Signature::New(Isolate* isolate,\n@@ -1470,10 +1498,8 @@ void FunctionTemplate::SetCallHandler(FunctionCallback callback,\n   i::Isolate* isolate = info->GetIsolate();\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n   i::HandleScope scope(isolate);\n-  i::Handle<i::Struct> struct_obj =\n-      isolate->factory()->NewStruct(i::TUPLE3_TYPE, i::TENURED);\n-  i::Handle<i::CallHandlerInfo> obj =\n-      i::Handle<i::CallHandlerInfo>::cast(struct_obj);\n+  i::Handle<i::CallHandlerInfo> obj = isolate->factory()->NewCallHandlerInfo(\n+      side_effect_type == SideEffectType::kHasNoSideEffect);\n   SET_FIELD_WRAPPED(obj, set_callback, callback);\n   SET_FIELD_WRAPPED(obj, set_js_callback, obj->redirected_callback());\n   if (data.IsEmpty()) {\n@@ -1781,6 +1807,9 @@ static i::Handle<i::InterceptorInfo> CreateInterceptorInfo(\n                         static_cast<int>(PropertyHandlerFlags::kAllCanRead));\n   obj->set_non_masking(static_cast<int>(flags) &\n                        static_cast<int>(PropertyHandlerFlags::kNonMasking));\n+  obj->set_has_no_side_effect(\n+      static_cast<int>(flags) &\n+      static_cast<int>(PropertyHandlerFlags::kHasNoSideEffect));\n \n   if (data.IsEmpty()) {\n     data = v8::Undefined(reinterpret_cast<v8::Isolate*>(isolate));\n@@ -1940,18 +1969,14 @@ void ObjectTemplate::SetHandler(\n   cons->set_indexed_property_handler(*obj);\n }\n \n-\n void ObjectTemplate::SetCallAsFunctionHandler(FunctionCallback callback,\n                                               Local<Value> data) {\n   i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n   i::HandleScope scope(isolate);\n   auto cons = EnsureConstructor(isolate, this);\n   EnsureNotInstantiated(cons, \"v8::ObjectTemplate::SetCallAsFunctionHandler\");\n-  i::Handle<i::Struct> struct_obj =\n-      isolate->factory()->NewStruct(i::TUPLE3_TYPE, i::TENURED);\n-  i::Handle<i::CallHandlerInfo> obj =\n-      i::Handle<i::CallHandlerInfo>::cast(struct_obj);\n+  i::Handle<i::CallHandlerInfo> obj = isolate->factory()->NewCallHandlerInfo();\n   SET_FIELD_WRAPPED(obj, set_callback, callback);\n   SET_FIELD_WRAPPED(obj, set_js_callback, obj->redirected_callback());\n   if (data.IsEmpty()) {\n@@ -2374,22 +2399,14 @@ MaybeLocal<UnboundScript> ScriptCompiler::CompileUnboundInternal(\n       source->host_defined_options);\n   i::MaybeHandle<i::SharedFunctionInfo> maybe_function_info =\n       i::Compiler::GetSharedFunctionInfoForScript(\n-          str, script_details, source->resource_options, nullptr, &script_data,\n+          str, script_details, source->resource_options, nullptr, script_data,\n           options, no_cache_reason, i::NOT_NATIVES_CODE);\n-  has_pending_exception = !maybe_function_info.ToHandle(&result);\n-  if (has_pending_exception && script_data != nullptr) {\n-    // This case won't happen during normal operation; we have compiled\n-    // successfully and produced cached data, and but the second compilation\n-    // of the same source code fails.\n-    delete script_data;\n-    script_data = nullptr;\n-  }\n-  RETURN_ON_FAILED_EXECUTION(UnboundScript);\n-\n   if (options == kConsumeCodeCache) {\n     source->cached_data->rejected = script_data->rejected();\n   }\n   delete script_data;\n+  has_pending_exception = !maybe_function_info.ToHandle(&result);\n+  RETURN_ON_FAILED_EXECUTION(UnboundScript);\n   RETURN_ESCAPED(ToApiHandle<UnboundScript>(result));\n }\n \n@@ -2483,6 +2500,10 @@ MaybeLocal<Function> ScriptCompiler::CompileFunctionInContext(\n                         Function);\n   TRACE_EVENT_CALL_STATS_SCOPED(isolate, \"v8\", \"V8.ScriptCompiler\");\n \n+  DCHECK(options == CompileOptions::kConsumeCodeCache ||\n+         options == CompileOptions::kEagerCompile ||\n+         options == CompileOptions::kNoCompileOptions);\n+\n   i::Handle<i::Context> context = Utils::OpenHandle(*v8_context);\n   i::Handle<i::SharedFunctionInfo> outer_info(context->closure()->shared(),\n                                               isolate);\n@@ -2511,25 +2532,30 @@ MaybeLocal<Function> ScriptCompiler::CompileFunctionInContext(\n         extension);\n   }\n \n-  i::Handle<i::Object> name_obj;\n-  int line_offset = 0;\n-  int column_offset = 0;\n-  if (!source->resource_name.IsEmpty()) {\n-    name_obj = Utils::OpenHandle(*(source->resource_name));\n-  }\n-  if (!source->resource_line_offset.IsEmpty()) {\n-    line_offset = static_cast<int>(source->resource_line_offset->Value());\n-  }\n-  if (!source->resource_column_offset.IsEmpty()) {\n-    column_offset = static_cast<int>(source->resource_column_offset->Value());\n+  i::Compiler::ScriptDetails script_details = GetScriptDetails(\n+      isolate, source->resource_name, source->resource_line_offset,\n+      source->resource_column_offset, source->source_map_url,\n+      source->host_defined_options);\n+\n+  i::ScriptData* script_data = nullptr;\n+  if (options == kConsumeCodeCache) {\n+    DCHECK(source->cached_data);\n+    // ScriptData takes care of pointer-aligning the data.\n+    script_data = new i::ScriptData(source->cached_data->data,\n+                                    source->cached_data->length);\n   }\n \n   i::Handle<i::JSFunction> result;\n   has_pending_exception =\n       !i::Compiler::GetWrappedFunction(\n            Utils::OpenHandle(*source->source_string), arguments_list, context,\n-           line_offset, column_offset, name_obj, source->resource_options)\n+           script_details, source->resource_options, script_data, options,\n+           no_cache_reason)\n            .ToHandle(&result);\n+  if (options == kConsumeCodeCache) {\n+    source->cached_data->rejected = script_data->rejected();\n+  }\n+  delete script_data;\n   RETURN_ON_FAILED_EXECUTION(Function);\n   RETURN_ESCAPED(Utils::CallableToLocal(result));\n }\n@@ -2603,37 +2629,18 @@ ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCache(\n   i::Handle<i::SharedFunctionInfo> shared =\n       i::Handle<i::SharedFunctionInfo>::cast(\n           Utils::OpenHandle(*unbound_script));\n-  i::Isolate* isolate = shared->GetIsolate();\n-  TRACE_EVENT_CALL_STATS_SCOPED(isolate, \"v8\", \"V8.Execute\");\n-  base::ElapsedTimer timer;\n-  if (i::FLAG_profile_deserialization) {\n-    timer.Start();\n-  }\n-  i::HistogramTimerScope histogram_timer(\n-      isolate->counters()->compile_serialize());\n-  i::RuntimeCallTimerScope runtimeTimer(\n-      isolate, i::RuntimeCallCounterId::kCompileSerialize);\n-  TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.compile\"), \"V8.CompileSerialize\");\n-\n+  i::Handle<i::String> source_str = Utils::OpenHandle(*source);\n   DCHECK(shared->is_toplevel());\n-  i::Handle<i::Script> script(i::Script::cast(shared->script()));\n-  // TODO(7110): Enable serialization of Asm modules once the AsmWasmData is\n-  // context independent.\n-  if (script->ContainsAsmModule()) return nullptr;\n-  if (isolate->debug()->is_loaded()) return nullptr;\n-\n-  i::ScriptData* script_data =\n-      i::CodeSerializer::Serialize(isolate, shared, Utils::OpenHandle(*source));\n-  CachedData* result = new CachedData(\n-      script_data->data(), script_data->length(), CachedData::BufferOwned);\n-  script_data->ReleaseDataOwnership();\n-  delete script_data;\n+  return i::CodeSerializer::Serialize(shared, source_str);\n+}\n \n-  if (i::FLAG_profile_deserialization) {\n-    i::PrintF(\"[Serializing took %0.3f ms]\\n\",\n-              timer.Elapsed().InMillisecondsF());\n-  }\n-  return result;\n+ScriptCompiler::CachedData* ScriptCompiler::CreateCodeCacheForFunction(\n+    Local<Function> function, Local<String> source) {\n+  i::Handle<i::SharedFunctionInfo> shared(\n+      i::Handle<i::JSFunction>::cast(Utils::OpenHandle(*function))->shared());\n+  i::Handle<i::String> source_str = Utils::OpenHandle(*source);\n+  CHECK(shared->is_wrapped());\n+  return i::CodeSerializer::Serialize(shared, source_str);\n }\n \n MaybeLocal<Script> Script::Compile(Local<Context> context, Local<String> source,\n@@ -2889,34 +2896,34 @@ int Message::ErrorLevel() const {\n   return self->error_level();\n }\n \n-Maybe<int> Message::GetStartColumn(Local<Context> context) const {\n+int Message::GetStartColumn() const {\n   auto self = Utils::OpenHandle(this);\n   i::Isolate* isolate = self->GetIsolate();\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n   EscapableHandleScope handle_scope(reinterpret_cast<Isolate*>(isolate));\n   auto msg = i::Handle<i::JSMessageObject>::cast(self);\n-  return Just(msg->GetColumnNumber());\n+  return msg->GetColumnNumber();\n }\n \n-\n-int Message::GetStartColumn() const {\n-  auto context = ContextFromHeapObject(Utils::OpenHandle(this));\n-  const int default_value = kNoColumnInfo;\n-  return GetStartColumn(context).FromMaybe(default_value);\n+Maybe<int> Message::GetStartColumn(Local<Context> context) const {\n+  return Just(GetStartColumn());\n }\n \n-\n-Maybe<int> Message::GetEndColumn(Local<Context> context) const {\n+int Message::GetEndColumn() const {\n   auto self = Utils::OpenHandle(this);\n   i::Isolate* isolate = self->GetIsolate();\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n   EscapableHandleScope handle_scope(reinterpret_cast<Isolate*>(isolate));\n   auto msg = i::Handle<i::JSMessageObject>::cast(self);\n   const int column_number = msg->GetColumnNumber();\n-  if (column_number == -1) return Just(-1);\n+  if (column_number == -1) return -1;\n   const int start = self->start_position();\n   const int end = self->end_position();\n-  return Just(column_number + (end - start));\n+  return column_number + (end - start);\n+}\n+\n+Maybe<int> Message::GetEndColumn(Local<Context> context) const {\n+  return Just(GetEndColumn());\n }\n \n \n@@ -3468,6 +3475,7 @@ bool Value::IsNumber() const {\n   return Utils::OpenHandle(this)->IsNumber();\n }\n \n+bool Value::IsBigInt() const { return Utils::OpenHandle(this)->IsBigInt(); }\n \n bool Value::IsProxy() const { return Utils::OpenHandle(this)->IsJSProxy(); }\n \n@@ -3486,6 +3494,7 @@ bool Value::IsWebAssemblyCompiledModule() const {\n   }\n \n VALUE_IS_SPECIFIC_TYPE(ArgumentsObject, JSArgumentsObject)\n+VALUE_IS_SPECIFIC_TYPE(BigIntObject, BigIntWrapper)\n VALUE_IS_SPECIFIC_TYPE(BooleanObject, BooleanWrapper)\n VALUE_IS_SPECIFIC_TYPE(NumberObject, NumberWrapper)\n VALUE_IS_SPECIFIC_TYPE(StringObject, StringWrapper)\n@@ -3574,10 +3583,6 @@ bool Value::IsSetIterator() const {\n \n bool Value::IsPromise() const { return Utils::OpenHandle(this)->IsJSPromise(); }\n \n-bool Value::IsModuleNamespaceObject() const {\n-  return Utils::OpenHandle(this)->IsJSModuleNamespace();\n-}\n-\n MaybeLocal<String> Value::ToString(Local<Context> context) const {\n   auto obj = Utils::OpenHandle(this);\n   if (obj->IsString()) return ToApiHandle<String>(obj);\n@@ -3622,6 +3627,16 @@ Local<v8::Object> Value::ToObject(Isolate* isolate) const {\n   RETURN_TO_LOCAL_UNCHECKED(ToObject(isolate->GetCurrentContext()), Object);\n }\n \n+MaybeLocal<BigInt> Value::ToBigInt(Local<Context> context) const {\n+  i::Handle<i::Object> obj = Utils::OpenHandle(this);\n+  if (obj->IsBigInt()) return ToApiHandle<BigInt>(obj);\n+  PREPARE_FOR_EXECUTION(context, Object, ToBigInt, BigInt);\n+  Local<BigInt> result;\n+  has_pending_exception =\n+      !ToLocal<BigInt>(i::BigInt::FromObject(isolate, obj), &result);\n+  RETURN_ON_FAILED_EXECUTION(BigInt);\n+  RETURN_ESCAPED(result);\n+}\n \n MaybeLocal<Boolean> Value::ToBoolean(Local<Context> context) const {\n   auto obj = Utils::OpenHandle(this);\n@@ -3789,6 +3804,10 @@ void v8::Uint32::CheckCast(v8::Value* that) {\n                   \"Could not convert to 32-bit unsigned integer\");\n }\n \n+void v8::BigInt::CheckCast(v8::Value* that) {\n+  Utils::ApiCheck(that->IsBigInt(), \"v8::BigInt::Cast\",\n+                  \"Could not convert to BigInt\");\n+}\n \n void v8::Array::CheckCast(Value* that) {\n   i::Handle<i::Object> obj = Utils::OpenHandle(that);\n@@ -3915,6 +3934,11 @@ void v8::NumberObject::CheckCast(v8::Value* that) {\n                   \"Could not convert to NumberObject\");\n }\n \n+void v8::BigIntObject::CheckCast(v8::Value* that) {\n+  i::Handle<i::Object> obj = Utils::OpenHandle(that);\n+  Utils::ApiCheck(obj->IsBigIntWrapper(), \"v8::BigIntObject::Cast()\",\n+                  \"Could not convert to BigIntObject\");\n+}\n \n void v8::BooleanObject::CheckCast(v8::Value* that) {\n   i::Handle<i::Object> obj = Utils::OpenHandle(that);\n@@ -4675,13 +4699,12 @@ Maybe<bool> v8::Object::Has(Local<Context> context, uint32_t index) {\n }\n \n template <typename Getter, typename Setter, typename Data>\n-static Maybe<bool> ObjectSetAccessor(Local<Context> context, Object* self,\n-                                     Local<Name> name, Getter getter,\n-                                     Setter setter, Data data,\n-                                     AccessControl settings,\n-                                     PropertyAttribute attributes,\n-                                     bool is_special_data_property,\n-                                     bool replace_on_access) {\n+static Maybe<bool> ObjectSetAccessor(\n+    Local<Context> context, Object* self, Local<Name> name, Getter getter,\n+    Setter setter, Data data, AccessControl settings,\n+    PropertyAttribute attributes, bool is_special_data_property,\n+    bool replace_on_access,\n+    SideEffectType getter_side_effect_type = SideEffectType::kHasSideEffect) {\n   auto isolate = reinterpret_cast<i::Isolate*>(context->GetIsolate());\n   ENTER_V8_NO_SCRIPT(isolate, context, Object, SetAccessor, Nothing<bool>(),\n                      i::HandleScope);\n@@ -4692,6 +4715,8 @@ static Maybe<bool> ObjectSetAccessor(Local<Context> context, Object* self,\n   i::Handle<i::AccessorInfo> info =\n       MakeAccessorInfo(isolate, name, getter, setter, data, settings, signature,\n                        is_special_data_property, replace_on_access);\n+  info->set_has_no_side_effect(getter_side_effect_type ==\n+                               SideEffectType::kHasNoSideEffect);\n   if (info.is_null()) return Nothing<bool>();\n   bool fast = obj->HasFastProperties();\n   i::Handle<i::Object> result;\n@@ -4717,7 +4742,8 @@ Maybe<bool> Object::SetAccessor(Local<Context> context, Local<Name> name,\n                                 SideEffectType getter_side_effect_type) {\n   return ObjectSetAccessor(context, this, name, getter, setter,\n                            data.FromMaybe(Local<Value>()), settings, attribute,\n-                           i::FLAG_disable_old_api_accessors, false);\n+                           i::FLAG_disable_old_api_accessors, false,\n+                           getter_side_effect_type);\n }\n \n \n@@ -4746,7 +4772,7 @@ Maybe<bool> Object::SetNativeDataProperty(\n     v8::Local<Value> data, PropertyAttribute attributes,\n     SideEffectType getter_side_effect_type) {\n   return ObjectSetAccessor(context, this, name, getter, setter, data, DEFAULT,\n-                           attributes, true, false);\n+                           attributes, true, false, getter_side_effect_type);\n }\n \n Maybe<bool> Object::SetLazyDataProperty(\n@@ -4755,7 +4781,8 @@ Maybe<bool> Object::SetLazyDataProperty(\n     PropertyAttribute attributes, SideEffectType getter_side_effect_type) {\n   return ObjectSetAccessor(context, this, name, getter,\n                            static_cast<AccessorNameSetterCallback>(nullptr),\n-                           data, DEFAULT, attributes, true, true);\n+                           data, DEFAULT, attributes, true, true,\n+                           getter_side_effect_type);\n }\n \n Maybe<bool> v8::Object::HasOwnProperty(Local<Context> context,\n@@ -5025,8 +5052,9 @@ MaybeLocal<Function> Function::New(Local<Context> context,\n   i::Isolate* isolate = Utils::OpenHandle(*context)->GetIsolate();\n   LOG_API(isolate, Function, New);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n-  auto templ = FunctionTemplateNew(isolate, callback, data, Local<Signature>(),\n-                                   length, true);\n+  auto templ =\n+      FunctionTemplateNew(isolate, callback, data, Local<Signature>(), length,\n+                          true, Local<Private>(), side_effect_type);\n   if (behavior == ConstructorBehavior::kThrow) templ->RemovePrototype();\n   return templ->GetFunction(context);\n }\n@@ -5091,7 +5119,7 @@ void Function::SetName(v8::Local<v8::String> name) {\n   auto self = Utils::OpenHandle(this);\n   if (!self->IsJSFunction()) return;\n   auto func = i::Handle<i::JSFunction>::cast(self);\n-  func->shared()->set_name(*Utils::OpenHandle(*name));\n+  func->shared()->SetName(*Utils::OpenHandle(*name));\n }\n \n \n@@ -5108,7 +5136,7 @@ Local<Value> Function::GetName() const {\n   }\n   if (self->IsJSFunction()) {\n     auto func = i::Handle<i::JSFunction>::cast(self);\n-    return Utils::ToLocal(handle(func->shared()->name(), isolate));\n+    return Utils::ToLocal(handle(func->shared()->Name(), isolate));\n   }\n   return ToApiHandle<Primitive>(isolate->factory()->undefined_value());\n }\n@@ -5183,7 +5211,7 @@ int Function::GetScriptLineNumber() const {\n   auto func = i::Handle<i::JSFunction>::cast(self);\n   if (func->shared()->script()->IsScript()) {\n     i::Handle<i::Script> script(i::Script::cast(func->shared()->script()));\n-    return i::Script::GetLineNumber(script, func->shared()->start_position());\n+    return i::Script::GetLineNumber(script, func->shared()->StartPosition());\n   }\n   return kLineOffsetNotFound;\n }\n@@ -5197,7 +5225,7 @@ int Function::GetScriptColumnNumber() const {\n   auto func = i::Handle<i::JSFunction>::cast(self);\n   if (func->shared()->script()->IsScript()) {\n     i::Handle<i::Script> script(i::Script::cast(func->shared()->script()));\n-    return i::Script::GetColumnNumber(script, func->shared()->start_position());\n+    return i::Script::GetColumnNumber(script, func->shared()->StartPosition());\n   }\n   return kLineOffsetNotFound;\n }\n@@ -5556,6 +5584,7 @@ static int Utf8Length(i::String* str, i::Isolate* isolate) {\n \n int String::Utf8Length() const {\n   i::Handle<i::String> str = Utils::OpenHandle(this);\n+  str = i::String::Flatten(str);\n   i::Isolate* isolate = str->GetIsolate();\n   return v8::Utf8Length(*str, isolate);\n }\n@@ -5769,9 +5798,7 @@ int String::WriteUtf8(char* buffer,\n   i::Isolate* isolate = str->GetIsolate();\n   LOG_API(isolate, String, WriteUtf8);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n-  if (options & HINT_MANY_WRITES_EXPECTED) {\n-    str = i::String::Flatten(str);  // Flatten the string for efficiency.\n-  }\n+  str = i::String::Flatten(str);  // Flatten the string for efficiency.\n   const int string_length = str->length();\n   bool write_null = !(options & NO_NULL_TERMINATION);\n   bool replace_invalid_utf8 = (options & REPLACE_INVALID_UTF8);\n@@ -5823,11 +5850,7 @@ static inline int WriteHelper(const String* string,\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n   DCHECK(start >= 0 && length >= -1);\n   i::Handle<i::String> str = Utils::OpenHandle(string);\n-  if (options & String::HINT_MANY_WRITES_EXPECTED) {\n-    // Flatten the string for efficiency.  This applies whether we are\n-    // using StringCharacterStream or Get(i) to access the characters.\n-    str = i::String::Flatten(str);\n-  }\n+  str = i::String::Flatten(str);\n   int end = start + length;\n   if ((length == -1) || (length > str->length() - start) )\n     end = str->length();\n@@ -6088,6 +6111,10 @@ bool V8::RegisterDefaultSignalHandler() {\n   return v8::internal::trap_handler::RegisterDefaultSignalHandler();\n }\n \n+bool V8::EnableWebAssemblyTrapHandler(bool use_v8_signal_handler) {\n+  return v8::internal::trap_handler::EnableTrapHandler(use_v8_signal_handler);\n+}\n+\n void v8::V8::SetEntropySource(EntropySource entropy_source) {\n   base::RandomNumberGenerator::SetEntropySource(entropy_source);\n }\n@@ -6136,6 +6163,10 @@ HeapObjectStatistics::HeapObjectStatistics()\n HeapCodeStatistics::HeapCodeStatistics()\n     : code_and_metadata_size_(0), bytecode_and_metadata_size_(0) {}\n \n+bool v8::V8::InitializeICU(const char* icu_data_file) {\n+  return i::InitializeICU(icu_data_file);\n+}\n+\n bool v8::V8::InitializeICUDefaultLocation(const char* exec_path,\n                                           const char* icu_data_file) {\n   return i::InitializeICUDefaultLocation(exec_path, icu_data_file);\n@@ -6604,8 +6635,7 @@ inline int StringLength(const uint16_t* string) {\n   return length;\n }\n \n-\n-MUST_USE_RESULT\n+V8_WARN_UNUSED_RESULT\n inline i::MaybeHandle<i::String> NewString(i::Factory* factory,\n                                            v8::NewStringType type,\n                                            i::Vector<const char> string) {\n@@ -6615,8 +6645,7 @@ inline i::MaybeHandle<i::String> NewString(i::Factory* factory,\n   return factory->NewStringFromUtf8(string);\n }\n \n-\n-MUST_USE_RESULT\n+V8_WARN_UNUSED_RESULT\n inline i::MaybeHandle<i::String> NewString(i::Factory* factory,\n                                            v8::NewStringType type,\n                                            i::Vector<const uint8_t> string) {\n@@ -6626,8 +6655,7 @@ inline i::MaybeHandle<i::String> NewString(i::Factory* factory,\n   return factory->NewStringFromOneByte(string);\n }\n \n-\n-MUST_USE_RESULT\n+V8_WARN_UNUSED_RESULT\n inline i::MaybeHandle<i::String> NewString(i::Factory* factory,\n                                            v8::NewStringType type,\n                                            i::Vector<const uint16_t> string) {\n@@ -6867,6 +6895,25 @@ double v8::NumberObject::ValueOf() const {\n   return jsvalue->value()->Number();\n }\n \n+Local<v8::Value> v8::BigIntObject::New(Isolate* isolate, int64_t value) {\n+  CHECK(i::FLAG_harmony_bigint);\n+  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n+  LOG_API(i_isolate, BigIntObject, New);\n+  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n+  i::Handle<i::Object> bigint = i::BigInt::FromInt64(i_isolate, value);\n+  i::Handle<i::Object> obj =\n+      i::Object::ToObject(i_isolate, bigint).ToHandleChecked();\n+  return Utils::ToLocal(obj);\n+}\n+\n+Local<v8::BigInt> v8::BigIntObject::ValueOf() const {\n+  i::Handle<i::Object> obj = Utils::OpenHandle(this);\n+  i::Handle<i::JSValue> jsvalue = i::Handle<i::JSValue>::cast(obj);\n+  i::Isolate* isolate = jsvalue->GetIsolate();\n+  LOG_API(isolate, BigIntObject, BigIntValue);\n+  return Utils::ToLocal(\n+      i::Handle<i::BigInt>(i::BigInt::cast(jsvalue->value())));\n+}\n \n Local<v8::Value> v8::BooleanObject::New(Isolate* isolate, bool value) {\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n@@ -7644,17 +7691,23 @@ v8::ArrayBuffer::Contents v8::ArrayBuffer::Externalize() {\n   Utils::ApiCheck(!self->is_external(), \"v8_ArrayBuffer_Externalize\",\n                   \"ArrayBuffer already externalized\");\n   self->set_is_external(true);\n-  if (self->has_guard_region()) {\n+\n+  // We need to capture the contents before releasing the allocation from the\n+  // Wasm tracker, because otherwise we will not correctly capture the\n+  // allocation data.\n+  const v8::ArrayBuffer::Contents contents = GetContents();\n+  if (self->is_wasm_memory()) {\n     // Since this is being externalized, the Wasm Allocation Tracker can no\n     // longer track it.\n     //\n     // TODO(eholk): Find a way to track this across externalization\n-    isolate->wasm_engine()->allocation_tracker()->ReleaseAddressSpace(\n-        self->allocation_length());\n+    isolate->wasm_engine()->memory_tracker()->ReleaseAllocation(\n+        self->backing_store());\n   }\n   isolate->heap()->UnregisterArrayBuffer(*self);\n \n-  return GetContents();\n+  // A regular copy is good enough. No move semantics needed.\n+  return contents;\n }\n \n \n@@ -7664,7 +7717,7 @@ v8::ArrayBuffer::Contents v8::ArrayBuffer::GetContents() {\n   Contents contents;\n   contents.allocation_base_ = self->allocation_base();\n   contents.allocation_length_ = self->allocation_length();\n-  contents.allocation_mode_ = self->has_guard_region()\n+  contents.allocation_mode_ = self->is_wasm_memory()\n                                   ? Allocator::AllocationMode::kReservation\n                                   : Allocator::AllocationMode::kNormal;\n   contents.data_ = self->backing_store();\n@@ -7702,7 +7755,7 @@ Local<ArrayBuffer> v8::ArrayBuffer::New(Isolate* isolate, size_t byte_length) {\n   // TODO(jbroman): It may be useful in the future to provide a MaybeLocal\n   // version that throws an exception or otherwise does not crash.\n   if (!i::JSArrayBuffer::SetupAllocatingData(obj, i_isolate, byte_length)) {\n-    i::FatalProcessOutOfMemory(\"v8::ArrayBuffer::New\");\n+    i::FatalProcessOutOfMemory(i_isolate, \"v8::ArrayBuffer::New\");\n   }\n   return Utils::ToLocal(obj);\n }\n@@ -7867,16 +7920,23 @@ v8::SharedArrayBuffer::Contents v8::SharedArrayBuffer::Externalize() {\n   Utils::ApiCheck(!self->is_external(), \"v8_SharedArrayBuffer_Externalize\",\n                   \"SharedArrayBuffer already externalized\");\n   self->set_is_external(true);\n-  if (self->has_guard_region()) {\n+\n+  // We need to capture the contents before releasing the allocation from the\n+  // Wasm tracker, because otherwise we will not correctly capture the\n+  // allocation data.\n+  const v8::SharedArrayBuffer::Contents contents = GetContents();\n+  if (self->is_wasm_memory()) {\n     // Since this is being externalized, the Wasm Allocation Tracker can no\n     // longer track it.\n     //\n     // TODO(eholk): Find a way to track this across externalization\n-    isolate->wasm_engine()->allocation_tracker()->ReleaseAddressSpace(\n-        self->allocation_length());\n+    isolate->wasm_engine()->memory_tracker()->ReleaseAllocation(\n+        self->backing_store());\n   }\n   isolate->heap()->UnregisterArrayBuffer(*self);\n-  return GetContents();\n+\n+  // A regular copy is good enough. No move semantics needed.\n+  return contents;\n }\n \n \n@@ -7887,7 +7947,7 @@ v8::SharedArrayBuffer::Contents v8::SharedArrayBuffer::GetContents() {\n   contents.allocation_base_ = self->allocation_base();\n   contents.allocation_length_ = self->allocation_length();\n   contents.allocation_mode_ =\n-      self->has_guard_region()\n+      self->is_wasm_memory()\n           ? ArrayBufferAllocator::Allocator::AllocationMode::kReservation\n           : ArrayBufferAllocator::Allocator::AllocationMode::kNormal;\n   contents.data_ = self->backing_store();\n@@ -7914,7 +7974,7 @@ Local<SharedArrayBuffer> v8::SharedArrayBuffer::New(Isolate* isolate,\n   // version that throws an exception or otherwise does not crash.\n   if (!i::JSArrayBuffer::SetupAllocatingData(obj, i_isolate, byte_length, true,\n                                              i::SharedFlag::kShared)) {\n-    i::FatalProcessOutOfMemory(\"v8::SharedArrayBuffer::New\");\n+    i::FatalProcessOutOfMemory(i_isolate, \"v8::SharedArrayBuffer::New\");\n   }\n   return Utils::ToLocalShared(obj);\n }\n@@ -8041,6 +8101,13 @@ Local<Integer> v8::Integer::NewFromUnsigned(Isolate* isolate, uint32_t value) {\n   return Utils::IntegerToLocal(result);\n }\n \n+Local<BigInt> v8::BigInt::New(Isolate* isolate, int64_t value) {\n+  CHECK(i::FLAG_harmony_bigint);\n+  i::Isolate* internal_isolate = reinterpret_cast<i::Isolate*>(isolate);\n+  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(internal_isolate);\n+  i::Handle<i::BigInt> result = i::BigInt::FromInt64(internal_isolate, value);\n+  return Utils::ToLocal(result);\n+}\n \n void Isolate::ReportExternalAllocationLimitReached() {\n   i::Heap* heap = reinterpret_cast<i::Isolate*>(this)->heap();\n@@ -8067,6 +8134,10 @@ CpuProfiler* Isolate::GetCpuProfiler() {\n   return reinterpret_cast<CpuProfiler*>(cpu_profiler);\n }\n \n+void Isolate::SetIdle(bool is_idle) {\n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n+  isolate->SetIdle(is_idle);\n+}\n \n bool Isolate::InContext() {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n@@ -8745,19 +8816,14 @@ void Isolate::SetRAILMode(RAILMode rail_mode) {\n }\n \n void Isolate::IncreaseHeapLimitForDebugging() {\n-  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n-  isolate->heap()->IncreaseHeapLimitForDebugging();\n+  // No-op.\n }\n \n void Isolate::RestoreOriginalHeapLimit() {\n-  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n-  isolate->heap()->RestoreOriginalHeapLimit();\n+  // No-op.\n }\n \n-bool Isolate::IsHeapLimitIncreasedForDebugging() {\n-  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n-  return isolate->heap()->IsHeapLimitIncreasedForDebugging();\n-}\n+bool Isolate::IsHeapLimitIncreasedForDebugging() { return false; }\n \n void Isolate::SetJitCodeEventHandler(JitCodeEventOptions options,\n                                      JitCodeEventHandler event_handler) {\n@@ -8806,6 +8872,18 @@ CALLBACK_SETTER(WasmInstanceCallback, ExtensionCallback, wasm_instance_callback)\n CALLBACK_SETTER(WasmCompileStreamingCallback, ApiImplementationCallback,\n                 wasm_compile_streaming_callback)\n \n+void Isolate::AddNearHeapLimitCallback(v8::NearHeapLimitCallback callback,\n+                                       void* data) {\n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n+  isolate->heap()->AddNearHeapLimitCallback(callback, data);\n+}\n+\n+void Isolate::RemoveNearHeapLimitCallback(v8::NearHeapLimitCallback callback,\n+                                          size_t heap_limit) {\n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n+  isolate->heap()->RemoveNearHeapLimitCallback(callback, heap_limit);\n+}\n+\n bool Isolate::IsDead() {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(this);\n   return isolate->IsDead();\n@@ -9054,6 +9132,16 @@ int debug::GetContextId(Local<Context> context) {\n   return (value->IsSmi()) ? i::Smi::ToInt(value) : 0;\n }\n \n+void debug::SetInspector(Isolate* isolate,\n+                         v8_inspector::V8Inspector* inspector) {\n+  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n+  i_isolate->set_inspector(inspector);\n+}\n+\n+v8_inspector::V8Inspector* debug::GetInspector(Isolate* isolate) {\n+  return reinterpret_cast<i::Isolate*>(isolate)->inspector();\n+}\n+\n Local<Context> debug::GetDebugContext(Isolate* isolate) {\n   i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n@@ -9118,9 +9206,7 @@ void debug::SetBreakPointsActive(Isolate* v8_isolate, bool is_active) {\n \n void debug::SetOutOfMemoryCallback(Isolate* isolate,\n                                    OutOfMemoryCallback callback, void* data) {\n-  i::Isolate* i_isolate = reinterpret_cast<i::Isolate*>(isolate);\n-  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(i_isolate);\n-  i_isolate->heap()->SetOutOfMemoryCallback(callback, data);\n+  // No-op.\n }\n \n void debug::PrepareStep(Isolate* v8_isolate, StepAction action) {\n@@ -9367,8 +9453,8 @@ bool debug::Script::SetBreakpoint(v8::Local<v8::String> condition,\n   i::Handle<i::Script> script = Utils::OpenHandle(this);\n   i::Isolate* isolate = script->GetIsolate();\n   int offset = GetSourceOffset(*location);\n-  if (!isolate->debug()->SetBreakpoint(script, Utils::OpenHandle(*condition),\n-                                       &offset, id)) {\n+  if (!isolate->debug()->SetBreakPointForScript(\n+          script, Utils::OpenHandle(*condition), &offset, id)) {\n     return false;\n   }\n   *location = GetSourceLocation(offset);\n@@ -9425,6 +9511,25 @@ std::pair<int, int> debug::WasmScript::GetFunctionRange(\n                         static_cast<int>(func.code.end_offset()));\n }\n \n+uint32_t debug::WasmScript::GetFunctionHash(int function_index) {\n+  i::DisallowHeapAllocation no_gc;\n+  i::Handle<i::Script> script = Utils::OpenHandle(this);\n+  DCHECK_EQ(i::Script::TYPE_WASM, script->type());\n+  i::WasmCompiledModule* compiled_module =\n+      i::WasmCompiledModule::cast(script->wasm_compiled_module());\n+  i::wasm::WasmModule* module = compiled_module->shared()->module();\n+  DCHECK_LE(0, function_index);\n+  DCHECK_GT(module->functions.size(), function_index);\n+  i::wasm::WasmFunction& func = module->functions[function_index];\n+  i::SeqOneByteString* module_bytes = compiled_module->shared()->module_bytes();\n+  i::wasm::ModuleWireBytes wire_bytes(\n+      module_bytes->GetFlatContent().ToOneByteVector());\n+  i::Vector<const i::byte> function_bytes = wire_bytes.GetFunctionBytes(&func);\n+  // TODO(herhut): Maybe also take module, name and signature into account.\n+  return i::StringHasher::HashSequentialString(function_bytes.start(),\n+                                               function_bytes.length(), 0);\n+}\n+\n debug::WasmDisassembly debug::WasmScript::DisassembleFunction(\n     int function_index) const {\n   i::DisallowHeapAllocation no_gc;\n@@ -9480,15 +9585,15 @@ MaybeLocal<UnboundScript> debug::CompileInspectorScript(Isolate* v8_isolate,\n                                                         Local<String> source) {\n   i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n   PREPARE_FOR_DEBUG_INTERFACE_EXECUTION_WITH_ISOLATE(isolate, UnboundScript);\n-  i::ScriptData* script_data = nullptr;\n   i::Handle<i::String> str = Utils::OpenHandle(*source);\n   i::Handle<i::SharedFunctionInfo> result;\n   {\n     ScriptOriginOptions origin_options;\n+    i::ScriptData* script_data = nullptr;\n     i::MaybeHandle<i::SharedFunctionInfo> maybe_function_info =\n         i::Compiler::GetSharedFunctionInfoForScript(\n             str, i::Compiler::ScriptDetails(), origin_options, nullptr,\n-            &script_data, ScriptCompiler::kNoCompileOptions,\n+            script_data, ScriptCompiler::kNoCompileOptions,\n             ScriptCompiler::kNoCacheBecauseInspector,\n             i::FLAG_expose_inspector_scripts ? i::NOT_NATIVES_CODE\n                                              : i::INSPECTOR_CODE);\n@@ -9526,20 +9631,21 @@ int debug::EstimatedValueSize(Isolate* v8_isolate, v8::Local<v8::Value> value) {\n   return i::Handle<i::HeapObject>::cast(object)->Size();\n }\n \n-v8::MaybeLocal<v8::Array> v8::Object::PreviewEntries(bool* is_key_value) {\n-  if (IsMap()) {\n+v8::MaybeLocal<v8::Array> debug::EntriesPreview(Isolate* v8_isolate,\n+                                                v8::Local<v8::Value> value,\n+                                                bool* is_key_value) {\n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n+  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n+  if (value->IsMap()) {\n     *is_key_value = true;\n-    return Map::Cast(this)->AsArray();\n+    return value.As<Map>()->AsArray();\n   }\n-  if (IsSet()) {\n+  if (value->IsSet()) {\n     *is_key_value = false;\n-    return Set::Cast(this)->AsArray();\n+    return value.As<Set>()->AsArray();\n   }\n \n-  i::Handle<i::JSReceiver> object = Utils::OpenHandle(this);\n-  i::Isolate* isolate = object->GetIsolate();\n-  Isolate* v8_isolate = reinterpret_cast<Isolate*>(isolate);\n-  ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n+  i::Handle<i::Object> object = Utils::OpenHandle(*value);\n   if (object->IsJSWeakCollection()) {\n     *is_key_value = object->IsJSWeakMap();\n     return Utils::ToLocal(i::JSWeakCollection::GetEntries(\n@@ -9591,9 +9697,8 @@ Local<Function> debug::GetBuiltin(Isolate* v8_isolate, Builtin builtin) {\n   }\n \n   i::Handle<i::String> name = isolate->factory()->empty_string();\n-  i::Handle<i::Code> code(isolate->builtins()->builtin(builtin_id));\n   i::NewFunctionArgs args = i::NewFunctionArgs::ForBuiltinWithoutPrototype(\n-      name, code, builtin_id, i::LanguageMode::kSloppy);\n+      name, builtin_id, i::LanguageMode::kSloppy);\n   i::Handle<i::JSFunction> fun = isolate->factory()->NewFunction(args);\n \n   fun->shared()->DontAdaptArguments();\n@@ -9668,12 +9773,14 @@ v8::Local<debug::GeneratorObject> debug::GeneratorObject::Cast(\n }\n \n MaybeLocal<v8::Value> debug::EvaluateGlobal(v8::Isolate* isolate,\n-                                            v8::Local<v8::String> source) {\n+                                            v8::Local<v8::String> source,\n+                                            bool throw_on_side_effect) {\n   i::Isolate* internal_isolate = reinterpret_cast<i::Isolate*>(isolate);\n   PREPARE_FOR_DEBUG_INTERFACE_EXECUTION_WITH_ISOLATE(internal_isolate, Value);\n   Local<Value> result;\n   has_pending_exception = !ToLocal<Value>(\n-      i::DebugEvaluate::Global(internal_isolate, Utils::OpenHandle(*source)),\n+      i::DebugEvaluate::Global(internal_isolate, Utils::OpenHandle(*source),\n+                               throw_on_side_effect),\n       &result);\n   RETURN_ON_FAILED_EXECUTION(Value);\n   RETURN_ESCAPED(result);\n@@ -9755,6 +9862,35 @@ int64_t debug::GetNextRandomInt64(v8::Isolate* v8_isolate) {\n       ->NextInt64();\n }\n \n+int debug::GetDebuggingId(v8::Local<v8::Function> function) {\n+  i::JSReceiver* callable = *v8::Utils::OpenHandle(*function);\n+  if (!callable->IsJSFunction()) return i::SharedFunctionInfo::kNoDebuggingId;\n+  i::JSFunction* fun = i::JSFunction::cast(callable);\n+  i::SharedFunctionInfo* shared = fun->shared();\n+  int id = shared->debugging_id();\n+  if (id == i::SharedFunctionInfo::kNoDebuggingId) {\n+    id = shared->GetHeap()->NextDebuggingId();\n+    shared->set_debugging_id(id);\n+  }\n+  DCHECK_NE(i::SharedFunctionInfo::kNoDebuggingId, id);\n+  return id;\n+}\n+\n+bool debug::SetFunctionBreakpoint(v8::Local<v8::Function> function,\n+                                  v8::Local<v8::String> condition,\n+                                  BreakpointId* id) {\n+  i::Handle<i::JSReceiver> callable = Utils::OpenHandle(*function);\n+  if (!callable->IsJSFunction()) return false;\n+  i::Handle<i::JSFunction> jsfunction =\n+      i::Handle<i::JSFunction>::cast(callable);\n+  i::Isolate* isolate = jsfunction->GetIsolate();\n+  i::Handle<i::String> condition_string =\n+      condition.IsEmpty() ? isolate->factory()->empty_string()\n+                          : Utils::OpenHandle(*condition);\n+  return isolate->debug()->SetBreakpointForFunction(jsfunction,\n+                                                    condition_string, id);\n+}\n+\n Local<String> CpuProfileNode::GetFunctionName() const {\n   const i::ProfileNode* node = reinterpret_cast<const i::ProfileNode*>(this);\n   i::Isolate* isolate = node->isolate();\n@@ -10061,15 +10197,7 @@ CpuProfile* CpuProfiler::StopProfiling(Local<String> title) {\n void CpuProfiler::SetIdle(bool is_idle) {\n   i::CpuProfiler* profiler = reinterpret_cast<i::CpuProfiler*>(this);\n   i::Isolate* isolate = profiler->isolate();\n-  if (!isolate->is_profiling()) return;\n-  v8::StateTag state = isolate->current_vm_state();\n-  DCHECK(state == v8::EXTERNAL || state == v8::IDLE);\n-  if (isolate->js_entry_sp() != nullptr) return;\n-  if (is_idle) {\n-    isolate->set_current_vm_state(v8::IDLE);\n-  } else if (state == v8::IDLE) {\n-    isolate->set_current_vm_state(v8::EXTERNAL);\n-  }\n+  isolate->SetIdle(is_idle);\n }\n \n "
        },
        {
            "sha": "d2e25ae4f723328b896e7c9b4127bbd8c19a814d",
            "filename": "deps/v8/src/api.h",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fapi.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -9,7 +9,7 @@\n #include \"src/contexts.h\"\n #include \"src/debug/debug-interface.h\"\n #include \"src/detachable-vector.h\"\n-#include \"src/factory.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n #include \"src/objects/js-collection.h\"\n \n@@ -124,7 +124,8 @@ class Utils {\n     if (!condition) Utils::ReportApiFailure(location, message);\n     return condition;\n   }\n-  static void ReportOOMFailure(const char* location, bool is_heap_oom);\n+  static void ReportOOMFailure(v8::internal::Isolate* isolate,\n+                               const char* location, bool is_heap_oom);\n \n   static inline Local<Context> ToLocal(\n       v8::internal::Handle<v8::internal::Context> obj);\n@@ -202,6 +203,8 @@ class Utils {\n       v8::internal::Handle<v8::internal::Object> obj);\n   static inline Local<Uint32> Uint32ToLocal(\n       v8::internal::Handle<v8::internal::Object> obj);\n+  static inline Local<BigInt> ToLocal(\n+      v8::internal::Handle<v8::internal::BigInt> obj);\n   static inline Local<FunctionTemplate> ToLocal(\n       v8::internal::Handle<v8::internal::FunctionTemplateInfo> obj);\n   static inline Local<ObjectTemplate> ToLocal(\n@@ -333,6 +336,7 @@ MAKE_TO_LOCAL(StackFrameToLocal, StackFrameInfo, StackFrame)\n MAKE_TO_LOCAL(NumberToLocal, Object, Number)\n MAKE_TO_LOCAL(IntegerToLocal, Object, Integer)\n MAKE_TO_LOCAL(Uint32ToLocal, Object, Uint32)\n+MAKE_TO_LOCAL(ToLocal, BigInt, BigInt);\n MAKE_TO_LOCAL(ExternalToLocal, JSObject, External)\n MAKE_TO_LOCAL(CallableToLocal, JSReceiver, Function)\n MAKE_TO_LOCAL(ToLocalPrimitive, Object, Primitive)\n@@ -630,7 +634,6 @@ void HandleScopeImplementer::EnterMicrotaskContext(Handle<Context> context) {\n }\n \n void HandleScopeImplementer::LeaveMicrotaskContext() {\n-  DCHECK(microtask_context_);\n   microtask_context_ = nullptr;\n   entered_context_count_during_microtasks_ = 0;\n }"
        },
        {
            "sha": "280e4ddfae7444c9aff4b4529a023f9ccbb21868",
            "filename": "deps/v8/src/arm/assembler-arm-inl.h",
            "status": "modified",
            "additions": 21,
            "deletions": 1,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm-inl.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -73,7 +73,8 @@ Address RelocInfo::target_address() {\n \n Address RelocInfo::target_address_address() {\n   DCHECK(IsCodeTarget(rmode_) || IsRuntimeEntry(rmode_) || IsWasmCall(rmode_) ||\n-         rmode_ == EMBEDDED_OBJECT || rmode_ == EXTERNAL_REFERENCE);\n+         IsEmbeddedObject(rmode_) || IsExternalReference(rmode_) ||\n+         IsOffHeapTarget(rmode_));\n   if (Assembler::IsMovW(Memory::int32_at(pc_))) {\n     return reinterpret_cast<Address>(pc_);\n   } else {\n@@ -125,6 +126,12 @@ Address RelocInfo::target_external_reference() {\n   return Assembler::target_address_at(pc_, constant_pool_);\n }\n \n+void RelocInfo::set_target_external_reference(\n+    Address target, ICacheFlushMode icache_flush_mode) {\n+  DCHECK(rmode_ == RelocInfo::EXTERNAL_REFERENCE);\n+  Assembler::set_target_address_at(pc_, constant_pool_, target,\n+                                   icache_flush_mode);\n+}\n \n Address RelocInfo::target_internal_reference() {\n   DCHECK(rmode_ == INTERNAL_REFERENCE);\n@@ -137,6 +144,12 @@ Address RelocInfo::target_internal_reference_address() {\n   return reinterpret_cast<Address>(pc_);\n }\n \n+void RelocInfo::set_wasm_code_table_entry(Address target,\n+                                          ICacheFlushMode icache_flush_mode) {\n+  DCHECK(rmode_ == RelocInfo::WASM_CODE_TABLE_ENTRY);\n+  Assembler::set_target_address_at(pc_, constant_pool_, target,\n+                                   icache_flush_mode);\n+}\n \n Address RelocInfo::target_runtime_entry(Assembler* origin) {\n   DCHECK(IsRuntimeEntry(rmode_));\n@@ -151,6 +164,11 @@ void RelocInfo::set_target_runtime_entry(Address target,\n     set_target_address(target, write_barrier_mode, icache_flush_mode);\n }\n \n+Address RelocInfo::target_off_heap_target() {\n+  DCHECK(IsOffHeapTarget(rmode_));\n+  return Assembler::target_address_at(pc_, constant_pool_);\n+}\n+\n void RelocInfo::WipeOut() {\n   DCHECK(IsEmbeddedObject(rmode_) || IsCodeTarget(rmode_) ||\n          IsRuntimeEntry(rmode_) || IsExternalReference(rmode_) ||\n@@ -175,6 +193,8 @@ void RelocInfo::Visit(ObjectVisitor* visitor) {\n     visitor->VisitInternalReference(host(), this);\n   } else if (RelocInfo::IsRuntimeEntry(mode)) {\n     visitor->VisitRuntimeEntry(host(), this);\n+  } else if (RelocInfo::IsOffHeapTarget(mode)) {\n+    visitor->VisitOffHeapTarget(host(), this);\n   }\n }\n "
        },
        {
            "sha": "87acd59e84e997352f9f6fd99172784e8d51f5a5",
            "filename": "deps/v8/src/arm/assembler-arm.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 11,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -5081,7 +5081,7 @@ void Assembler::GrowBuffer() {\n   // Some internal data structures overflow for very large buffers,\n   // they must ensure that kMaximalBufferSize is not too large.\n   if (desc.buffer_size > kMaximalBufferSize) {\n-    V8::FatalProcessOutOfMemory(\"Assembler::GrowBuffer\");\n+    V8::FatalProcessOutOfMemory(nullptr, \"Assembler::GrowBuffer\");\n   }\n \n   // Set up new buffer.\n@@ -5144,14 +5144,6 @@ void Assembler::dq(uint64_t value) {\n   pc_ += sizeof(uint64_t);\n }\n \n-\n-void Assembler::emit_code_stub_address(Code* stub) {\n-  CheckBuffer();\n-  *reinterpret_cast<uint32_t*>(pc_) =\n-      reinterpret_cast<uint32_t>(stub->instruction_start());\n-  pc_ += sizeof(uint32_t);\n-}\n-\n void Assembler::RecordRelocInfo(RelocInfo::Mode rmode, intptr_t data) {\n   if (RelocInfo::IsNone(rmode) ||\n       // Don't record external references unless the heap will be serialized.\n@@ -5175,15 +5167,17 @@ void Assembler::ConstantPoolAddEntry(int position, RelocInfo::Mode rmode,\n   }\n   ConstantPoolEntry entry(position, value,\n                           sharing_ok || (rmode == RelocInfo::CODE_TARGET &&\n-                                         IsCodeTargetSharingAllowed()));\n+                                         IsCodeTargetSharingAllowed()),\n+                          rmode);\n \n   bool shared = false;\n   if (sharing_ok) {\n     // Merge the constant, if possible.\n     for (size_t i = 0; i < pending_32_bit_constants_.size(); i++) {\n       ConstantPoolEntry& current_entry = pending_32_bit_constants_[i];\n       if (!current_entry.sharing_ok()) continue;\n-      if (entry.value() == current_entry.value()) {\n+      if (entry.value() == current_entry.value() &&\n+          entry.rmode() == current_entry.rmode()) {\n         entry.set_merged_index(i);\n         shared = true;\n         break;"
        },
        {
            "sha": "bbe0ba753e8639265504e87a7d039c994bccd634",
            "filename": "deps/v8/src/arm/assembler-arm.h",
            "status": "modified",
            "additions": 10,
            "deletions": 14,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fassembler-arm.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -162,8 +162,8 @@ class Register : public RegisterBase<Register, kRegAfterLast> {\n   explicit constexpr Register(int code) : RegisterBase(code) {}\n };\n \n-static_assert(IS_TRIVIALLY_COPYABLE(Register) &&\n-                  sizeof(Register) == sizeof(int),\n+ASSERT_TRIVIALLY_COPYABLE(Register);\n+static_assert(sizeof(Register) == sizeof(int),\n               \"Register can efficiently be passed by value\");\n \n // r7: context register\n@@ -218,8 +218,8 @@ class SwVfpRegister : public RegisterBase<SwVfpRegister, kSwVfpAfterLast> {\n   explicit constexpr SwVfpRegister(int code) : RegisterBase(code) {}\n };\n \n-static_assert(IS_TRIVIALLY_COPYABLE(SwVfpRegister) &&\n-                  sizeof(SwVfpRegister) == sizeof(int),\n+ASSERT_TRIVIALLY_COPYABLE(SwVfpRegister);\n+static_assert(sizeof(SwVfpRegister) == sizeof(int),\n               \"SwVfpRegister can efficiently be passed by value\");\n \n typedef SwVfpRegister FloatRegister;\n@@ -256,8 +256,8 @@ class DwVfpRegister : public RegisterBase<DwVfpRegister, kDoubleAfterLast> {\n   explicit constexpr DwVfpRegister(int code) : RegisterBase(code) {}\n };\n \n-static_assert(IS_TRIVIALLY_COPYABLE(DwVfpRegister) &&\n-                  sizeof(DwVfpRegister) == sizeof(int),\n+ASSERT_TRIVIALLY_COPYABLE(DwVfpRegister);\n+static_assert(sizeof(DwVfpRegister) == sizeof(int),\n               \"DwVfpRegister can efficiently be passed by value\");\n \n typedef DwVfpRegister DoubleRegister;\n@@ -1491,9 +1491,6 @@ class Assembler : public AssemblerBase {\n   void dq(uint64_t data);\n   void dp(uintptr_t data) { dd(data); }\n \n-  // Emits the address of the code stub's first instruction.\n-  void emit_code_stub_address(Code* stub);\n-\n   // Read/patch instructions\n   Instr instr_at(int pos) { return *reinterpret_cast<Instr*>(buffer_ + pos); }\n   void instr_at_put(int pos, Instr instr) {\n@@ -1820,15 +1817,14 @@ class UseScratchRegisterScope {\n     return reg;\n   }\n \n+  // Check if we have registers available to acquire.\n+  bool CanAcquire() const { return *assembler_->GetScratchRegisterList() != 0; }\n+  bool CanAcquireD() const { return CanAcquireVfp<DwVfpRegister>(); }\n+\n  private:\n   friend class Assembler;\n   friend class TurboAssembler;\n \n-  // Check if we have registers available to acquire.\n-  // These methods are kept private intentionally to restrict their usage to the\n-  // assemblers. Choosing to emit a difference instruction sequence depending on\n-  // the availability of scratch registers is generally their job.\n-  bool CanAcquire() const { return *assembler_->GetScratchRegisterList() != 0; }\n   template <typename T>\n   bool CanAcquireVfp() const;\n "
        },
        {
            "sha": "814d341f7e55dbb1a6286d2ee56b6396d471ca6e",
            "filename": "deps/v8/src/arm/code-stubs-arm.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 28,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fcode-stubs-arm.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -141,42 +141,30 @@ void MathPowStub::Generate(MacroAssembler* masm) {\n   const Register scratch2 = r4;\n \n   Label call_runtime, done, int_exponent;\n-  if (exponent_type() == TAGGED) {\n-    // Base is already in double_base.\n-    __ UntagAndJumpIfSmi(scratch, exponent, &int_exponent);\n \n-    __ vldr(double_exponent,\n-            FieldMemOperand(exponent, HeapNumber::kValueOffset));\n-  }\n-\n-  if (exponent_type() != INTEGER) {\n-    // Detect integer exponents stored as double.\n-    __ TryDoubleToInt32Exact(scratch, double_exponent, double_scratch);\n-    __ b(eq, &int_exponent);\n+  // Detect integer exponents stored as double.\n+  __ TryDoubleToInt32Exact(scratch, double_exponent, double_scratch);\n+  __ b(eq, &int_exponent);\n \n-    __ push(lr);\n-    {\n-      AllowExternalCallThatCantCauseGC scope(masm);\n-      __ PrepareCallCFunction(0, 2);\n-      __ MovToFloatParameters(double_base, double_exponent);\n-      __ CallCFunction(\n-          ExternalReference::power_double_double_function(isolate()), 0, 2);\n-    }\n-    __ pop(lr);\n-    __ MovFromFloatResult(double_result);\n-    __ b(&done);\n+  __ push(lr);\n+  {\n+    AllowExternalCallThatCantCauseGC scope(masm);\n+    __ PrepareCallCFunction(0, 2);\n+    __ MovToFloatParameters(double_base, double_exponent);\n+    __ CallCFunction(ExternalReference::power_double_double_function(isolate()),\n+                     0, 2);\n   }\n+  __ pop(lr);\n+  __ MovFromFloatResult(double_result);\n+  __ b(&done);\n \n   // Calculate power with integer exponent.\n   __ bind(&int_exponent);\n \n   // Get two copies of exponent in the registers scratch and exponent.\n-  if (exponent_type() == INTEGER) {\n-    __ mov(scratch, exponent);\n-  } else {\n-    // Exponent has previously been stored into scratch as untagged integer.\n-    __ mov(exponent, scratch);\n-  }\n+  // Exponent has previously been stored into scratch as untagged integer.\n+  __ mov(exponent, scratch);\n+\n   __ vmov(double_scratch, double_base);  // Back up base.\n   __ vmov(double_result, Double(1.0), scratch2);\n "
        },
        {
            "sha": "ff439f82595bd9cd6bca90465681401fdca36d13",
            "filename": "deps/v8/src/arm/codegen-arm.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fcodegen-arm.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -9,6 +9,7 @@\n #include \"src/arm/assembler-arm-inl.h\"\n #include \"src/arm/simulator-arm.h\"\n #include \"src/codegen.h\"\n+#include \"src/isolate.h\"\n #include \"src/macro-assembler.h\"\n \n namespace v8 {"
        },
        {
            "sha": "3d69f6dfd1d4bfab63522faadc4db5f337b5d99e",
            "filename": "deps/v8/src/arm/frame-constants-arm.h",
            "status": "modified",
            "additions": 13,
            "deletions": 11,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fframe-constants-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fframe-constants-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fframe-constants-arm.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -10,36 +10,38 @@ namespace internal {\n \n class EntryFrameConstants : public AllStatic {\n  public:\n-  static const int kCallerFPOffset =\n+  static constexpr int kCallerFPOffset =\n       -(StandardFrameConstants::kFixedFrameSizeFromFp + kPointerSize);\n };\n \n class ExitFrameConstants : public TypedFrameConstants {\n  public:\n-  static const int kSPOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(0);\n-  static const int kCodeOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(1);\n+  static constexpr int kSPOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(0);\n+  static constexpr int kCodeOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(1);\n   DEFINE_TYPED_FRAME_SIZES(2);\n \n   // The caller fields are below the frame pointer on the stack.\n-  static const int kCallerFPOffset = 0 * kPointerSize;\n+  static constexpr int kCallerFPOffset = 0 * kPointerSize;\n   // The calling JS function is below FP.\n-  static const int kCallerPCOffset = 1 * kPointerSize;\n+  static constexpr int kCallerPCOffset = 1 * kPointerSize;\n \n   // FP-relative displacement of the caller's SP.  It points just\n   // below the saved PC.\n-  static const int kCallerSPDisplacement = 2 * kPointerSize;\n+  static constexpr int kCallerSPDisplacement = 2 * kPointerSize;\n };\n \n class JavaScriptFrameConstants : public AllStatic {\n  public:\n   // FP-relative.\n-  static const int kLocal0Offset = StandardFrameConstants::kExpressionsOffset;\n-  static const int kLastParameterOffset = +2 * kPointerSize;\n-  static const int kFunctionOffset = StandardFrameConstants::kFunctionOffset;\n+  static constexpr int kLocal0Offset =\n+      StandardFrameConstants::kExpressionsOffset;\n+  static constexpr int kLastParameterOffset = +2 * kPointerSize;\n+  static constexpr int kFunctionOffset =\n+      StandardFrameConstants::kFunctionOffset;\n \n   // Caller SP-relative.\n-  static const int kParam0Offset = -2 * kPointerSize;\n-  static const int kReceiverOffset = -1 * kPointerSize;\n+  static constexpr int kParam0Offset = -2 * kPointerSize;\n+  static constexpr int kReceiverOffset = -1 * kPointerSize;\n };\n \n }  // namespace internal"
        },
        {
            "sha": "e363e0ecfe93135194b4d4cae2d5448611b3dfa6",
            "filename": "deps/v8/src/arm/macro-assembler-arm.cc",
            "status": "modified",
            "additions": 27,
            "deletions": 20,
            "changes": 47,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -1370,30 +1370,15 @@ void MacroAssembler::InvokePrologue(const ParameterCount& expected,\n void MacroAssembler::CheckDebugHook(Register fun, Register new_target,\n                                     const ParameterCount& expected,\n                                     const ParameterCount& actual) {\n-  Label skip_hook, call_hook;\n-\n-  ExternalReference debug_is_active =\n-      ExternalReference::debug_is_active_address(isolate());\n-  mov(r4, Operand(debug_is_active));\n-  ldrsb(r4, MemOperand(r4));\n-  cmp(r4, Operand(0));\n-  b(eq, &skip_hook);\n+  Label skip_hook;\n \n   ExternalReference debug_hook_avtive =\n       ExternalReference::debug_hook_on_function_call_address(isolate());\n   mov(r4, Operand(debug_hook_avtive));\n   ldrsb(r4, MemOperand(r4));\n   cmp(r4, Operand(0));\n-  b(ne, &call_hook);\n-\n-  ldr(r4, FieldMemOperand(fun, JSFunction::kSharedFunctionInfoOffset));\n-  ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kDebugInfoOffset));\n-  JumpIfSmi(r4, &skip_hook);\n-  ldr(r4, FieldMemOperand(r4, DebugInfo::kFlagsOffset));\n-  tst(r4, Operand(Smi::FromInt(DebugInfo::kBreakAtEntry)));\n   b(eq, &skip_hook);\n \n-  bind(&call_hook);\n   {\n     FrameScope frame(this,\n                      has_frame() ? StackFrame::NONE : StackFrame::INTERNAL);\n@@ -1730,12 +1715,20 @@ void MacroAssembler::JumpToExternalReference(const ExternalReference& builtin,\n   Jump(stub.GetCode(), RelocInfo::CODE_TARGET);\n }\n \n-void MacroAssembler::JumpToInstructionStream(const InstructionStream* stream) {\n-  int32_t bytes_address = reinterpret_cast<int32_t>(stream->bytes());\n-  mov(kOffHeapTrampolineRegister, Operand(bytes_address, RelocInfo::NONE));\n+void MacroAssembler::JumpToInstructionStream(Address entry) {\n+  mov(kOffHeapTrampolineRegister,\n+      Operand(reinterpret_cast<int32_t>(entry), RelocInfo::OFF_HEAP_TARGET));\n   Jump(kOffHeapTrampolineRegister);\n }\n \n+void MacroAssembler::LoadWeakValue(Register out, Register in,\n+                                   Label* target_if_cleared) {\n+  cmp(in, Operand(kClearedWeakHeapObject));\n+  b(eq, target_if_cleared);\n+\n+  and_(out, in, Operand(~kWeakHeapObjectMask));\n+}\n+\n void MacroAssembler::IncrementCounter(StatsCounter* counter, int value,\n                                       Register scratch1, Register scratch2) {\n   DCHECK_GT(value, 0);\n@@ -1892,6 +1885,20 @@ void MacroAssembler::AssertFixedArray(Register object) {\n   }\n }\n \n+void MacroAssembler::AssertConstructor(Register object) {\n+  if (emit_debug_code()) {\n+    STATIC_ASSERT(kSmiTag == 0);\n+    tst(object, Operand(kSmiTagMask));\n+    Check(ne, AbortReason::kOperandIsASmiAndNotAConstructor);\n+    push(object);\n+    ldr(object, FieldMemOperand(object, HeapObject::kMapOffset));\n+    ldrb(object, FieldMemOperand(object, Map::kBitFieldOffset));\n+    tst(object, Operand(Map::IsConstructorBit::kMask));\n+    pop(object);\n+    Check(ne, AbortReason::kOperandIsNotAConstructor);\n+  }\n+}\n+\n void MacroAssembler::AssertFunction(Register object) {\n   if (emit_debug_code()) {\n     STATIC_ASSERT(kSmiTag == 0);\n@@ -1958,7 +1965,7 @@ void MacroAssembler::AssertUndefinedOrAllocationSite(Register object,\n \n \n void TurboAssembler::CheckFor32DRegs(Register scratch) {\n-  mov(scratch, Operand(ExternalReference::cpu_features()));\n+  mov(scratch, Operand(ExternalReference::cpu_features(isolate())));\n   ldr(scratch, MemOperand(scratch));\n   tst(scratch, Operand(1u << VFP32DREGS));\n }"
        },
        {
            "sha": "af8b449de6dbe7f6319261564ec07b598fd24969",
            "filename": "deps/v8/src/arm/macro-assembler-arm.h",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm%2Fmacro-assembler-arm.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -28,7 +28,7 @@ constexpr Register kInterpreterDispatchTableRegister = r8;\n constexpr Register kJavaScriptCallArgCountRegister = r0;\n constexpr Register kJavaScriptCallCodeStartRegister = r2;\n constexpr Register kJavaScriptCallNewTargetRegister = r3;\n-constexpr Register kOffHeapTrampolineRegister = r4;\n+constexpr Register kOffHeapTrampolineRegister = r6;\n constexpr Register kRuntimeCallFunctionRegister = r1;\n constexpr Register kRuntimeCallArgCountRegister = r0;\n \n@@ -799,7 +799,11 @@ class MacroAssembler : public TurboAssembler {\n                                bool builtin_exit_frame = false);\n \n   // Generates a trampoline to jump to the off-heap instruction stream.\n-  void JumpToInstructionStream(const InstructionStream* stream);\n+  void JumpToInstructionStream(Address entry);\n+\n+  // ---------------------------------------------------------------------------\n+  // In-place weak references.\n+  void LoadWeakValue(Register out, Register in, Label* target_if_cleared);\n \n   // ---------------------------------------------------------------------------\n   // StatsCounter support\n@@ -833,6 +837,9 @@ class MacroAssembler : public TurboAssembler {\n   // Abort execution if argument is not a FixedArray, enabled via --debug-code.\n   void AssertFixedArray(Register object);\n \n+  // Abort execution if argument is not a Constructor, enabled via --debug-code.\n+  void AssertConstructor(Register object);\n+\n   // Abort execution if argument is not a JSFunction, enabled via --debug-code.\n   void AssertFunction(Register object);\n "
        },
        {
            "sha": "52f552270a7d9c25b3104979d2fb5e2f56f8cd37",
            "filename": "deps/v8/src/arm64/assembler-arm64-inl.h",
            "status": "modified",
            "additions": 21,
            "deletions": 1,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64-inl.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -613,7 +613,8 @@ Address RelocInfo::target_address() {\n \n Address RelocInfo::target_address_address() {\n   DCHECK(IsCodeTarget(rmode_) || IsRuntimeEntry(rmode_) || IsWasmCall(rmode_) ||\n-         rmode_ == EMBEDDED_OBJECT || rmode_ == EXTERNAL_REFERENCE);\n+         IsEmbeddedObject(rmode_) || IsExternalReference(rmode_) ||\n+         IsOffHeapTarget(rmode_));\n   return Assembler::target_pointer_address_at(pc_);\n }\n \n@@ -655,6 +656,12 @@ Address RelocInfo::target_external_reference() {\n   return Assembler::target_address_at(pc_, constant_pool_);\n }\n \n+void RelocInfo::set_target_external_reference(\n+    Address target, ICacheFlushMode icache_flush_mode) {\n+  DCHECK(rmode_ == RelocInfo::EXTERNAL_REFERENCE);\n+  Assembler::set_target_address_at(pc_, constant_pool_, target,\n+                                   icache_flush_mode);\n+}\n \n Address RelocInfo::target_internal_reference() {\n   DCHECK(rmode_ == INTERNAL_REFERENCE);\n@@ -667,6 +674,12 @@ Address RelocInfo::target_internal_reference_address() {\n   return reinterpret_cast<Address>(pc_);\n }\n \n+void RelocInfo::set_wasm_code_table_entry(Address target,\n+                                          ICacheFlushMode icache_flush_mode) {\n+  DCHECK(rmode_ == RelocInfo::WASM_CODE_TABLE_ENTRY);\n+  Assembler::set_target_address_at(pc_, constant_pool_, target,\n+                                   icache_flush_mode);\n+}\n \n Address RelocInfo::target_runtime_entry(Assembler* origin) {\n   DCHECK(IsRuntimeEntry(rmode_));\n@@ -682,6 +695,11 @@ void RelocInfo::set_target_runtime_entry(Address target,\n   }\n }\n \n+Address RelocInfo::target_off_heap_target() {\n+  DCHECK(IsOffHeapTarget(rmode_));\n+  return Assembler::target_address_at(pc_, constant_pool_);\n+}\n+\n void RelocInfo::WipeOut() {\n   DCHECK(IsEmbeddedObject(rmode_) || IsCodeTarget(rmode_) ||\n          IsRuntimeEntry(rmode_) || IsExternalReference(rmode_) ||\n@@ -706,6 +724,8 @@ void RelocInfo::Visit(ObjectVisitor* visitor) {\n     visitor->VisitInternalReference(host(), this);\n   } else if (RelocInfo::IsRuntimeEntry(mode)) {\n     visitor->VisitRuntimeEntry(host(), this);\n+  } else if (RelocInfo::IsOffHeapTarget(mode)) {\n+    visitor->VisitOffHeapTarget(host(), this);\n   }\n }\n "
        },
        {
            "sha": "fe81147d768ad52eaede23890b5cf69d3248a082",
            "filename": "deps/v8/src/arm64/assembler-arm64.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -1749,7 +1749,6 @@ void Assembler::stlr(const Register& rt, const Register& rn) {\n \n void Assembler::stlxr(const Register& rs, const Register& rt,\n                       const Register& rn) {\n-  DCHECK(rs.Is32Bits());\n   DCHECK(rn.Is64Bits());\n   DCHECK(!rs.Is(rt) && !rs.Is(rn));\n   LoadStoreAcquireReleaseOp op = rt.Is32Bits() ? STLXR_w : STLXR_x;\n@@ -4698,7 +4697,7 @@ void Assembler::GrowBuffer() {\n   // Some internal data structures overflow for very large buffers,\n   // they must ensure that kMaximalBufferSize is not too large.\n   if (desc.buffer_size > kMaximalBufferSize) {\n-    V8::FatalProcessOutOfMemory(\"Assembler::GrowBuffer\");\n+    V8::FatalProcessOutOfMemory(nullptr, \"Assembler::GrowBuffer\");\n   }\n \n   byte* buffer = reinterpret_cast<byte*>(buffer_);"
        },
        {
            "sha": "94122e3939119d1a1fcef555ec4f015f0a1cfd55",
            "filename": "deps/v8/src/arm64/assembler-arm64.h",
            "status": "modified",
            "additions": 10,
            "deletions": 43,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fassembler-arm64.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -39,8 +39,8 @@ namespace internal {\n #define ALLOCATABLE_GENERAL_REGISTERS(R)                  \\\n   R(x0)  R(x1)  R(x2)  R(x3)  R(x4)  R(x5)  R(x6)  R(x7)  \\\n   R(x8)  R(x9)  R(x10) R(x11) R(x12) R(x13) R(x14) R(x15) \\\n-  R(x18) R(x19) R(x20) R(x21) R(x22) R(x23) R(x24) R(x27) \\\n-  R(x28)\n+  R(x18) R(x19) R(x20) R(x21) R(x22) R(x23) R(x24) R(x25) \\\n+  R(x27) R(x28)\n \n #define FLOAT_REGISTERS(V)                                \\\n   V(s0)  V(s1)  V(s2)  V(s3)  V(s4)  V(s5)  V(s6)  V(s7)  \\\n@@ -60,6 +60,8 @@ namespace internal {\n   V(q16) V(q17) V(q18) V(q19) V(q20) V(q21) V(q22) V(q23) \\\n   V(q24) V(q25) V(q26) V(q27) V(q28) V(q29) V(q30) V(q31)\n \n+// Register d29 could be allocated, but we keep an even length list here, in\n+// order to make stack alignment easier for save and restore.\n #define ALLOCATABLE_DOUBLE_REGISTERS(R)                   \\\n   R(d0)  R(d1)  R(d2)  R(d3)  R(d4)  R(d5)  R(d6)  R(d7)  \\\n   R(d8)  R(d9)  R(d10) R(d11) R(d12) R(d13) R(d14) R(d16) \\\n@@ -202,7 +204,6 @@ class CPURegister : public RegisterBase<CPURegister, kRegAfterLast> {\n \n   bool IsSameSizeAndType(const CPURegister& other) const;\n \n-  // V8 compatibility.\n   bool is(const CPURegister& other) const { return Is(other); }\n   bool is_valid() const { return IsValid(); }\n \n@@ -237,8 +238,7 @@ class CPURegister : public RegisterBase<CPURegister, kRegAfterLast> {\n   }\n };\n \n-static_assert(IS_TRIVIALLY_COPYABLE(CPURegister),\n-              \"CPURegister can efficiently be passed by value\");\n+ASSERT_TRIVIALLY_COPYABLE(CPURegister);\n \n class Register : public CPURegister {\n  public:\n@@ -256,25 +256,6 @@ class Register : public CPURegister {\n   static Register XRegFromCode(unsigned code);\n   static Register WRegFromCode(unsigned code);\n \n-  // Start of V8 compatibility section ---------------------\n-  // These memebers are necessary for compilation.\n-  // A few of them may be unused for now.\n-\n-  // We allow crankshaft to use the following registers:\n-  //   - x0 to x15\n-  //   - x18 to x24\n-  //   - x27 (also context)\n-  //\n-  // TODO(all): Register x25 is currently free and could be available for\n-  // crankshaft, but we don't use it as we might use it as a per function\n-  // literal pool pointer in the future.\n-  //\n-  // TODO(all): Consider storing cp in x25 to have only two ranges.\n-  // We split allocatable registers in three ranges called\n-  //   - \"low range\"\n-  //   - \"high range\"\n-  //   - \"context\"\n-\n   static Register from_code(int code) {\n     // Always return an X register.\n     return Register::Create(code, kXRegSizeInBits);\n@@ -286,14 +267,11 @@ class Register : public CPURegister {\n     return Register::Create<code, kXRegSizeInBits>();\n   }\n \n-  // End of V8 compatibility section -----------------------\n-  //\n  private:\n   constexpr explicit Register(const CPURegister& r) : CPURegister(r) {}\n };\n \n-static_assert(IS_TRIVIALLY_COPYABLE(Register),\n-              \"Register can efficiently be passed by value\");\n+ASSERT_TRIVIALLY_COPYABLE(Register);\n \n constexpr bool kPadArguments = true;\n constexpr bool kSimpleFPAliasing = true;\n@@ -405,19 +383,13 @@ class VRegister : public CPURegister {\n \n   unsigned LaneSizeInBits() const { return LaneSizeInBytes() * 8; }\n \n-  // Start of V8 compatibility section ---------------------\n   static constexpr int kMaxNumRegisters = kNumberOfVRegisters;\n   STATIC_ASSERT(kMaxNumRegisters == kDoubleAfterLast);\n \n-  // Crankshaft can use all the V registers except:\n-  //   - d15 which is used to keep the 0 double value\n-  //   - d30 which is used in crankshaft as a double scratch register\n-  //   - d31 which is used in the MacroAssembler as a double scratch register\n   static VRegister from_code(int code) {\n     // Always return a D register.\n     return VRegister::Create(code, kDRegSizeInBits);\n   }\n-  // End of V8 compatibility section -----------------------\n \n  private:\n   int lane_count_;\n@@ -430,17 +402,14 @@ class VRegister : public CPURegister {\n   }\n };\n \n-static_assert(IS_TRIVIALLY_COPYABLE(VRegister),\n-              \"VRegister can efficiently be passed by value\");\n+ASSERT_TRIVIALLY_COPYABLE(VRegister);\n \n // No*Reg is used to indicate an unused argument, or an error case. Note that\n // these all compare equal (using the Is() method). The Register and VRegister\n // variants are provided for convenience.\n constexpr Register NoReg = Register::no_reg();\n constexpr VRegister NoVReg = VRegister::no_reg();\n constexpr CPURegister NoCPUReg = CPURegister::no_reg();\n-\n-// v8 compatibility.\n constexpr Register no_reg = NoReg;\n \n #define DEFINE_REGISTER(register_class, name, ...) \\\n@@ -491,11 +460,9 @@ ALIAS_REGISTER(Register, padreg, x31);\n // Keeps the 0 double value.\n ALIAS_REGISTER(VRegister, fp_zero, d15);\n // MacroAssembler fixed V Registers.\n-ALIAS_REGISTER(VRegister, fp_fixed1, d27);\n-ALIAS_REGISTER(VRegister, fp_fixed2, d28);\n-ALIAS_REGISTER(VRegister, fp_fixed3, d29);  // same as Crankshaft scratch.\n-// Crankshaft double scratch register.\n-ALIAS_REGISTER(VRegister, crankshaft_fp_scratch, d29);\n+ALIAS_REGISTER(VRegister, fp_fixed1, d28);\n+ALIAS_REGISTER(VRegister, fp_fixed2, d29);\n+\n // MacroAssembler scratch V registers.\n ALIAS_REGISTER(VRegister, fp_scratch, d30);\n ALIAS_REGISTER(VRegister, fp_scratch1, d30);"
        },
        {
            "sha": "c1cb3025a1fcef529533ab6a6c701d0b0e4fff9c",
            "filename": "deps/v8/src/arm64/code-stubs-arm64.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 25,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fcode-stubs-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -122,36 +122,29 @@ void MathPowStub::Generate(MacroAssembler* masm) {\n   Label done;\n \n   // Unpack the inputs.\n-  if (exponent_type() == TAGGED) {\n-    __ JumpIfSmi(exponent_tagged, &exponent_is_smi);\n-    __ Ldr(exponent_double,\n-           FieldMemOperand(exponent_tagged, HeapNumber::kValueOffset));\n-  }\n \n   // Handle double (heap number) exponents.\n-  if (exponent_type() != INTEGER) {\n-    // Detect integer exponents stored as doubles and handle those in the\n-    // integer fast-path.\n-    __ TryRepresentDoubleAsInt64(exponent_integer, exponent_double,\n-                                 scratch0_double, &exponent_is_integer);\n-\n-    {\n-      AllowExternalCallThatCantCauseGC scope(masm);\n-      __ Mov(saved_lr, lr);\n-      __ CallCFunction(\n-          ExternalReference::power_double_double_function(isolate()), 0, 2);\n-      __ Mov(lr, saved_lr);\n-      __ B(&done);\n-    }\n+  // Detect integer exponents stored as doubles and handle those in the\n+  // integer fast-path.\n+  __ TryRepresentDoubleAsInt64(exponent_integer, exponent_double,\n+                               scratch0_double, &exponent_is_integer);\n \n-    // Handle SMI exponents.\n-    __ Bind(&exponent_is_smi);\n-    //  x10   base_tagged       The tagged base (input).\n-    //  x11   exponent_tagged   The tagged exponent (input).\n-    //  d1    base_double       The base as a double.\n-    __ SmiUntag(exponent_integer, exponent_tagged);\n+  {\n+    AllowExternalCallThatCantCauseGC scope(masm);\n+    __ Mov(saved_lr, lr);\n+    __ CallCFunction(ExternalReference::power_double_double_function(isolate()),\n+                     0, 2);\n+    __ Mov(lr, saved_lr);\n+    __ B(&done);\n   }\n \n+  // Handle SMI exponents.\n+  __ Bind(&exponent_is_smi);\n+  //  x10   base_tagged       The tagged base (input).\n+  //  x11   exponent_tagged   The tagged exponent (input).\n+  //  d1    base_double       The base as a double.\n+  __ SmiUntag(exponent_integer, exponent_tagged);\n+\n   __ Bind(&exponent_is_integer);\n   //  x10   base_tagged       The tagged base (input).\n   //  x11   exponent_tagged   The tagged exponent (input)."
        },
        {
            "sha": "ad7703328007d9c95a92cb36479ea27251238f8f",
            "filename": "deps/v8/src/arm64/codegen-arm64.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fcodegen-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fcodegen-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fcodegen-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -8,6 +8,7 @@\n #include \"src/arm64/macro-assembler-arm64-inl.h\"\n #include \"src/arm64/simulator-arm64.h\"\n #include \"src/codegen.h\"\n+#include \"src/isolate.h\"\n #include \"src/macro-assembler.h\"\n \n namespace v8 {"
        },
        {
            "sha": "662f4260339a45d7d467e1c999e8840a9b2a1a0b",
            "filename": "deps/v8/src/arm64/frame-constants-arm64.h",
            "status": "modified",
            "additions": 12,
            "deletions": 10,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fframe-constants-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fframe-constants-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fframe-constants-arm64.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -31,31 +31,33 @@ namespace internal {\n //\n class EntryFrameConstants : public AllStatic {\n  public:\n-  static const int kCallerFPOffset = -3 * kPointerSize;\n-  static const int kFixedFrameSize = 6 * kPointerSize;\n+  static constexpr int kCallerFPOffset = -3 * kPointerSize;\n+  static constexpr int kFixedFrameSize = 6 * kPointerSize;\n };\n \n class ExitFrameConstants : public TypedFrameConstants {\n  public:\n-  static const int kSPOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(0);\n-  static const int kCodeOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(1);\n-  static const int kPaddingOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(2);\n+  static constexpr int kSPOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(0);\n+  static constexpr int kCodeOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(1);\n+  static constexpr int kPaddingOffset = TYPED_FRAME_PUSHED_VALUE_OFFSET(2);\n   DEFINE_TYPED_FRAME_SIZES(3);\n-  static const int kLastExitFrameField = kPaddingOffset;\n+  static constexpr int kLastExitFrameField = kPaddingOffset;\n \n-  static const int kConstantPoolOffset = 0;  // Not used\n+  static constexpr int kConstantPoolOffset = 0;  // Not used\n };\n \n class JavaScriptFrameConstants : public AllStatic {\n  public:\n   // FP-relative.\n-  static const int kLocal0Offset = StandardFrameConstants::kExpressionsOffset;\n+  static constexpr int kLocal0Offset =\n+      StandardFrameConstants::kExpressionsOffset;\n \n   // There are two words on the stack (saved fp and saved lr) between fp and\n   // the arguments.\n-  static const int kLastParameterOffset = 2 * kPointerSize;\n+  static constexpr int kLastParameterOffset = 2 * kPointerSize;\n \n-  static const int kFunctionOffset = StandardFrameConstants::kFunctionOffset;\n+  static constexpr int kFunctionOffset =\n+      StandardFrameConstants::kFunctionOffset;\n };\n \n }  // namespace internal"
        },
        {
            "sha": "5bbf71e28cf03009d7d8fd6a2fa6444bd9dc9435",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64.cc",
            "status": "modified",
            "additions": 26,
            "deletions": 19,
            "changes": 45,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -1625,6 +1625,21 @@ void MacroAssembler::AssertFixedArray(Register object) {\n   }\n }\n \n+void MacroAssembler::AssertConstructor(Register object) {\n+  if (emit_debug_code()) {\n+    AssertNotSmi(object, AbortReason::kOperandIsASmiAndNotAConstructor);\n+\n+    UseScratchRegisterScope temps(this);\n+    Register temp = temps.AcquireX();\n+\n+    Ldr(temp, FieldMemOperand(object, HeapObject::kMapOffset));\n+    Ldrb(temp, FieldMemOperand(temp, Map::kBitFieldOffset));\n+    Tst(temp, Operand(Map::IsConstructorBit::kMask));\n+\n+    Check(ne, AbortReason::kOperandIsNotAConstructor);\n+  }\n+}\n+\n void MacroAssembler::AssertFunction(Register object) {\n   if (emit_debug_code()) {\n     AssertNotSmi(object, AbortReason::kOperandIsASmiAndNotAFunction);\n@@ -1759,9 +1774,9 @@ void MacroAssembler::JumpToExternalReference(const ExternalReference& builtin,\n   Jump(stub.GetCode(), RelocInfo::CODE_TARGET);\n }\n \n-void MacroAssembler::JumpToInstructionStream(const InstructionStream* stream) {\n-  uint64_t bytes_address = reinterpret_cast<uint64_t>(stream->bytes());\n-  Mov(kOffHeapTrampolineRegister, bytes_address);\n+void MacroAssembler::JumpToInstructionStream(Address entry) {\n+  Mov(kOffHeapTrampolineRegister,\n+      Operand(reinterpret_cast<uint64_t>(entry), RelocInfo::OFF_HEAP_TARGET));\n   Br(kOffHeapTrampolineRegister);\n }\n \n@@ -2144,28 +2159,14 @@ void MacroAssembler::InvokePrologue(const ParameterCount& expected,\n void MacroAssembler::CheckDebugHook(Register fun, Register new_target,\n                                     const ParameterCount& expected,\n                                     const ParameterCount& actual) {\n-  Label skip_hook, call_hook;\n-\n-  ExternalReference debug_is_active =\n-      ExternalReference::debug_is_active_address(isolate());\n-  Mov(x4, Operand(debug_is_active));\n-  Ldrsb(x4, MemOperand(x4));\n-  Cbz(x4, &skip_hook);\n+  Label skip_hook;\n \n   ExternalReference debug_hook_active =\n       ExternalReference::debug_hook_on_function_call_address(isolate());\n   Mov(x4, Operand(debug_hook_active));\n   Ldrsb(x4, MemOperand(x4));\n-  Cbnz(x4, &call_hook);\n-\n-  Ldr(x4, FieldMemOperand(fun, JSFunction::kSharedFunctionInfoOffset));\n-  Ldr(x4, FieldMemOperand(x4, SharedFunctionInfo::kDebugInfoOffset));\n-  JumpIfSmi(x4, &skip_hook);\n-  Ldr(x4, FieldMemOperand(x4, DebugInfo::kFlagsOffset));\n-  Tst(x4, Operand(Smi::FromInt(DebugInfo::kBreakAtEntry)));\n-  B(eq, &skip_hook);\n+  Cbz(x4, &skip_hook);\n \n-  bind(&call_hook);\n   {\n     FrameScope frame(this,\n                      has_frame() ? StackFrame::NONE : StackFrame::INTERNAL);\n@@ -2503,6 +2504,12 @@ void MacroAssembler::LeaveExitFrame(bool restore_doubles,\n   Pop(fp, lr);\n }\n \n+void MacroAssembler::LoadWeakValue(Register out, Register in,\n+                                   Label* target_if_cleared) {\n+  CompareAndBranch(in, Operand(kClearedWeakHeapObject), eq, target_if_cleared);\n+\n+  and_(out, in, Operand(~kWeakHeapObjectMask));\n+}\n \n void MacroAssembler::IncrementCounter(StatsCounter* counter, int value,\n                                       Register scratch1, Register scratch2) {"
        },
        {
            "sha": "6b1b8957cb5dcf00458553d29e879bc46d8c4ce6",
            "filename": "deps/v8/src/arm64/macro-assembler-arm64.h",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fmacro-assembler-arm64.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -1713,6 +1713,9 @@ class MacroAssembler : public TurboAssembler {\n   // Abort execution if argument is not a FixedArray, enabled via --debug-code.\n   void AssertFixedArray(Register object);\n \n+  // Abort execution if argument is not a Constructor, enabled via --debug-code.\n+  void AssertConstructor(Register object);\n+\n   // Abort execution if argument is not a JSFunction, enabled via --debug-code.\n   void AssertFunction(Register object);\n \n@@ -1771,7 +1774,7 @@ class MacroAssembler : public TurboAssembler {\n                                bool builtin_exit_frame = false);\n \n   // Generates a trampoline to jump to the off-heap instruction stream.\n-  void JumpToInstructionStream(const InstructionStream* stream);\n+  void JumpToInstructionStream(Address entry);\n \n   // Registers used through the invocation chain are hard-coded.\n   // We force passing the parameters to ensure the contracts are correctly\n@@ -1921,6 +1924,10 @@ class MacroAssembler : public TurboAssembler {\n     LoadNativeContextSlot(Context::GLOBAL_PROXY_INDEX, dst);\n   }\n \n+  // ---------------------------------------------------------------------------\n+  // In-place weak references.\n+  void LoadWeakValue(Register out, Register in, Label* target_if_cleared);\n+\n   // ---------------------------------------------------------------------------\n   // StatsCounter support\n "
        },
        {
            "sha": "290be13cd6a86e691d7a69843e9101647a0c66ec",
            "filename": "deps/v8/src/arm64/simulator-arm64.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -2083,6 +2083,8 @@ Simulator::TransactionSize Simulator::get_transaction_size(unsigned size) {\n       return TransactionSize::HalfWord;\n     case 4:\n       return TransactionSize::Word;\n+    case 8:\n+      return TransactionSize::DoubleWord;\n     default:\n       UNREACHABLE();\n   }\n@@ -2127,6 +2129,10 @@ void Simulator::VisitLoadStoreAcquireRelease(Instruction* instr) {\n       case LDAXR_w:\n         set_wreg_no_log(rt, MemoryRead<uint32_t>(address));\n         break;\n+      case LDAR_x:\n+      case LDAXR_x:\n+        set_xreg_no_log(rt, MemoryRead<uint64_t>(address));\n+        break;\n       default:\n         UNIMPLEMENTED();\n     }\n@@ -2150,6 +2156,9 @@ void Simulator::VisitLoadStoreAcquireRelease(Instruction* instr) {\n           case STLXR_w:\n             MemoryWrite<uint32_t>(address, wreg(rt));\n             break;\n+          case STLXR_x:\n+            MemoryWrite<uint64_t>(address, xreg(rt));\n+            break;\n           default:\n             UNIMPLEMENTED();\n         }\n@@ -2171,6 +2180,9 @@ void Simulator::VisitLoadStoreAcquireRelease(Instruction* instr) {\n         case STLR_w:\n           MemoryWrite<uint32_t>(address, wreg(rt));\n           break;\n+        case STLR_x:\n+          MemoryWrite<uint64_t>(address, xreg(rt));\n+          break;\n         default:\n           UNIMPLEMENTED();\n       }"
        },
        {
            "sha": "8cd1e02b6f8723e08529e7ae4605bdd55cbe129a",
            "filename": "deps/v8/src/arm64/simulator-arm64.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Farm64%2Fsimulator-arm64.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -2196,6 +2196,7 @@ class Simulator : public DecoderVisitor, public SimulatorBase {\n     Byte = 1,\n     HalfWord = 2,\n     Word = 4,\n+    DoubleWord = 8,\n   };\n \n   TransactionSize get_transaction_size(unsigned size);"
        },
        {
            "sha": "3d835fb2cb854139962d3355932b44a877cd5767",
            "filename": "deps/v8/src/asmjs/asm-js.cc",
            "status": "modified",
            "additions": 29,
            "deletions": 35,
            "changes": 64,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -10,16 +10,16 @@\n #include \"src/ast/ast.h\"\n #include \"src/base/optional.h\"\n #include \"src/base/platform/elapsed-timer.h\"\n-#include \"src/compilation-info.h\"\n #include \"src/compiler.h\"\n #include \"src/execution.h\"\n-#include \"src/factory.h\"\n #include \"src/handles.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n #include \"src/objects-inl.h\"\n #include \"src/parsing/parse-info.h\"\n #include \"src/parsing/scanner-character-streams.h\"\n #include \"src/parsing/scanner.h\"\n+#include \"src/unoptimized-compilation-info.h\"\n \n #include \"src/wasm/wasm-engine.h\"\n #include \"src/wasm/wasm-js.h\"\n@@ -65,21 +65,20 @@ bool AreStdlibMembersValid(Isolate* isolate, Handle<JSReceiver> stdlib,\n     Handle<Object> value = JSReceiver::GetDataProperty(stdlib, name);\n     if (!value->IsNaN()) return false;\n   }\n-#define STDLIB_MATH_FUNC(fname, FName, ignore1, ignore2)                       \\\n-  if (members.Contains(wasm::AsmJsParser::StandardMember::kMath##FName)) {     \\\n-    members.Remove(wasm::AsmJsParser::StandardMember::kMath##FName);           \\\n-    Handle<Name> name(isolate->factory()->InternalizeOneByteString(            \\\n-        STATIC_CHAR_VECTOR(#fname)));                                          \\\n-    Handle<Object> value = StdlibMathMember(isolate, stdlib, name);            \\\n-    if (!value->IsJSFunction()) return false;                                  \\\n-    SharedFunctionInfo* shared = Handle<JSFunction>::cast(value)->shared();    \\\n-    if (shared->HasLazyDeserializationBuiltinId()) {                           \\\n-      if (shared->lazy_deserialization_builtin_id() != Builtins::kMath##FName) \\\n-        return false;                                                          \\\n-    } else if (shared->code() !=                                               \\\n-               isolate->builtins()->builtin(Builtins::kMath##FName)) {         \\\n-      return false;                                                            \\\n-    }                                                                          \\\n+#define STDLIB_MATH_FUNC(fname, FName, ignore1, ignore2)                    \\\n+  if (members.Contains(wasm::AsmJsParser::StandardMember::kMath##FName)) {  \\\n+    members.Remove(wasm::AsmJsParser::StandardMember::kMath##FName);        \\\n+    Handle<Name> name(isolate->factory()->InternalizeOneByteString(         \\\n+        STATIC_CHAR_VECTOR(#fname)));                                       \\\n+    Handle<Object> value = StdlibMathMember(isolate, stdlib, name);         \\\n+    if (!value->IsJSFunction()) return false;                               \\\n+    SharedFunctionInfo* shared = Handle<JSFunction>::cast(value)->shared(); \\\n+    if (!shared->HasBuiltinId() ||                                          \\\n+        shared->builtin_id() != Builtins::kMath##FName) {                   \\\n+      return false;                                                         \\\n+    }                                                                       \\\n+    DCHECK_EQ(shared->GetCode(),                                            \\\n+              isolate->builtins()->builtin(Builtins::kMath##FName));        \\\n   }\n   STDLIB_MATH_FUNCTION_LIST(STDLIB_MATH_FUNC)\n #undef STDLIB_MATH_FUNC\n@@ -185,12 +184,12 @@ void ReportInstantiationFailure(Handle<Script> script, int position,\n //  [2] FinalizeJobImpl: The module is handed to WebAssembly which decodes it\n //      into an internal representation and eventually compiles it to machine\n //      code.\n-class AsmJsCompilationJob final : public CompilationJob {\n+class AsmJsCompilationJob final : public UnoptimizedCompilationJob {\n  public:\n   explicit AsmJsCompilationJob(ParseInfo* parse_info, FunctionLiteral* literal,\n                                AccountingAllocator* allocator)\n-      : CompilationJob(parse_info->stack_limit(), parse_info,\n-                       &compilation_info_, \"AsmJs\", State::kReadyToExecute),\n+      : UnoptimizedCompilationJob(parse_info->stack_limit(), parse_info,\n+                                  &compilation_info_),\n         allocator_(allocator),\n         zone_(allocator, ZONE_NAME),\n         compilation_info_(&zone_, parse_info, literal),\n@@ -203,16 +202,16 @@ class AsmJsCompilationJob final : public CompilationJob {\n         translate_zone_size_(0) {}\n \n  protected:\n-  Status PrepareJobImpl(Isolate* isolate) final;\n   Status ExecuteJobImpl() final;\n-  Status FinalizeJobImpl(Isolate* isolate) final;\n+  Status FinalizeJobImpl(Handle<SharedFunctionInfo> shared_info,\n+                         Isolate* isolate) final;\n \n  private:\n   void RecordHistograms(Isolate* isolate);\n \n   AccountingAllocator* allocator_;\n   Zone zone_;\n-  CompilationInfo compilation_info_;\n+  UnoptimizedCompilationInfo compilation_info_;\n   wasm::ZoneBuffer* module_;\n   wasm::ZoneBuffer* asm_offsets_;\n   wasm::AsmJsParser::StdlibSet stdlib_uses_;\n@@ -226,12 +225,7 @@ class AsmJsCompilationJob final : public CompilationJob {\n   DISALLOW_COPY_AND_ASSIGN(AsmJsCompilationJob);\n };\n \n-CompilationJob::Status AsmJsCompilationJob::PrepareJobImpl(Isolate* isolate) {\n-  UNREACHABLE();  // Prepare should always be skipped.\n-  return SUCCEEDED;\n-}\n-\n-CompilationJob::Status AsmJsCompilationJob::ExecuteJobImpl() {\n+UnoptimizedCompilationJob::Status AsmJsCompilationJob::ExecuteJobImpl() {\n   // Step 1: Translate asm.js module to WebAssembly module.\n   size_t compile_zone_start = compilation_info()->zone()->allocation_size();\n   base::ElapsedTimer translate_timer;\n@@ -276,7 +270,8 @@ CompilationJob::Status AsmJsCompilationJob::ExecuteJobImpl() {\n   return SUCCEEDED;\n }\n \n-CompilationJob::Status AsmJsCompilationJob::FinalizeJobImpl(Isolate* isolate) {\n+UnoptimizedCompilationJob::Status AsmJsCompilationJob::FinalizeJobImpl(\n+    Handle<SharedFunctionInfo> shared_info, Isolate* isolate) {\n   // Step 2: Compile and decode the WebAssembly module.\n   base::ElapsedTimer compile_timer;\n   compile_timer.Start();\n@@ -302,7 +297,6 @@ CompilationJob::Status AsmJsCompilationJob::FinalizeJobImpl(Isolate* isolate) {\n   result->set(kWasmDataCompiledModule, *compiled);\n   result->set(kWasmDataUsesBitSet, *uses_bitset);\n   compilation_info()->SetAsmWasmData(result);\n-  compilation_info()->SetCode(BUILTIN_CODE(isolate, InstantiateAsmJs));\n \n   RecordHistograms(isolate);\n   ReportCompilationSuccess(parse_info()->script(),\n@@ -329,9 +323,9 @@ void AsmJsCompilationJob::RecordHistograms(Isolate* isolate) {\n       translation_throughput);\n }\n \n-CompilationJob* AsmJs::NewCompilationJob(ParseInfo* parse_info,\n-                                         FunctionLiteral* literal,\n-                                         AccountingAllocator* allocator) {\n+UnoptimizedCompilationJob* AsmJs::NewCompilationJob(\n+    ParseInfo* parse_info, FunctionLiteral* literal,\n+    AccountingAllocator* allocator) {\n   return new AsmJsCompilationJob(parse_info, literal, allocator);\n }\n \n@@ -350,7 +344,7 @@ MaybeHandle<Object> AsmJs::InstantiateAsmWasm(Isolate* isolate,\n   Handle<Script> script(Script::cast(shared->script()));\n   // TODO(mstarzinger): The position currently points to the module definition\n   // but should instead point to the instantiation site (more intuitive).\n-  int position = shared->start_position();\n+  int position = shared->StartPosition();\n \n   // Check that all used stdlib members are valid.\n   bool stdlib_use_of_typed_array_present = false;"
        },
        {
            "sha": "1a87ce99b49dce7d99cc01204206d5aaa2fac478",
            "filename": "deps/v8/src/asmjs/asm-js.h",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fasmjs%2Fasm-js.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -13,19 +13,18 @@ namespace v8 {\n namespace internal {\n \n class AccountingAllocator;\n-class CompilationInfo;\n-class CompilationJob;\n class FunctionLiteral;\n class JSArrayBuffer;\n class ParseInfo;\n class SharedFunctionInfo;\n+class UnoptimizedCompilationJob;\n \n // Interface to compile and instantiate for asm.js modules.\n class AsmJs {\n  public:\n-  static CompilationJob* NewCompilationJob(ParseInfo* parse_info,\n-                                           FunctionLiteral* literal,\n-                                           AccountingAllocator* allocator);\n+  static UnoptimizedCompilationJob* NewCompilationJob(\n+      ParseInfo* parse_info, FunctionLiteral* literal,\n+      AccountingAllocator* allocator);\n   static MaybeHandle<Object> InstantiateAsmWasm(Isolate* isolate,\n                                                 Handle<SharedFunctionInfo>,\n                                                 Handle<FixedArray> wasm_data,"
        },
        {
            "sha": "48d10418c0ac18351f633484db8be21ae3b297eb",
            "filename": "deps/v8/src/assembler.cc",
            "status": "modified",
            "additions": 25,
            "deletions": 1014,
            "changes": 1039,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fassembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fassembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -34,112 +34,19 @@\n \n #include \"src/assembler.h\"\n \n-#include <math.h>\n-#include <string.h>\n-#include <cmath>\n-\n-#include \"src/api.h\"\n #include \"src/assembler-inl.h\"\n-#include \"src/base/cpu.h\"\n-#include \"src/base/functional.h\"\n-#include \"src/base/ieee754.h\"\n-#include \"src/base/lazy-instance.h\"\n-#include \"src/base/platform/platform.h\"\n-#include \"src/base/utils/random-number-generator.h\"\n-#include \"src/codegen.h\"\n-#include \"src/compiler/code-assembler.h\"\n-#include \"src/counters.h\"\n-#include \"src/debug/debug.h\"\n+#include \"src/code-stubs.h\"\n #include \"src/deoptimizer.h\"\n #include \"src/disassembler.h\"\n-#include \"src/elements.h\"\n-#include \"src/execution.h\"\n-#include \"src/ic/ic.h\"\n-#include \"src/ic/stub-cache.h\"\n-#include \"src/interpreter/bytecodes.h\"\n-#include \"src/interpreter/interpreter.h\"\n+#include \"src/instruction-stream.h\"\n #include \"src/isolate.h\"\n #include \"src/ostreams.h\"\n-#include \"src/regexp/jsregexp.h\"\n-#include \"src/regexp/regexp-macro-assembler.h\"\n-#include \"src/regexp/regexp-stack.h\"\n-#include \"src/register-configuration.h\"\n-#include \"src/runtime/runtime.h\"\n #include \"src/simulator.h\"  // For flushing instruction cache.\n #include \"src/snapshot/serializer-common.h\"\n-#include \"src/string-search.h\"\n-#include \"src/wasm/wasm-external-refs.h\"\n-\n-// Include native regexp-macro-assembler.\n-#ifndef V8_INTERPRETED_REGEXP\n-#if V8_TARGET_ARCH_IA32\n-#include \"src/regexp/ia32/regexp-macro-assembler-ia32.h\"  // NOLINT\n-#elif V8_TARGET_ARCH_X64\n-#include \"src/regexp/x64/regexp-macro-assembler-x64.h\"  // NOLINT\n-#elif V8_TARGET_ARCH_ARM64\n-#include \"src/regexp/arm64/regexp-macro-assembler-arm64.h\"  // NOLINT\n-#elif V8_TARGET_ARCH_ARM\n-#include \"src/regexp/arm/regexp-macro-assembler-arm.h\"  // NOLINT\n-#elif V8_TARGET_ARCH_PPC\n-#include \"src/regexp/ppc/regexp-macro-assembler-ppc.h\"  // NOLINT\n-#elif V8_TARGET_ARCH_MIPS\n-#include \"src/regexp/mips/regexp-macro-assembler-mips.h\"  // NOLINT\n-#elif V8_TARGET_ARCH_MIPS64\n-#include \"src/regexp/mips64/regexp-macro-assembler-mips64.h\"  // NOLINT\n-#elif V8_TARGET_ARCH_S390\n-#include \"src/regexp/s390/regexp-macro-assembler-s390.h\"  // NOLINT\n-#else  // Unknown architecture.\n-#error \"Unknown architecture.\"\n-#endif  // Target architecture.\n-#endif  // V8_INTERPRETED_REGEXP\n-\n-#ifdef V8_INTL_SUPPORT\n-#include \"src/intl.h\"\n-#endif  // V8_INTL_SUPPORT\n \n namespace v8 {\n namespace internal {\n \n-// -----------------------------------------------------------------------------\n-// Common double constants.\n-\n-struct DoubleConstant BASE_EMBEDDED {\n-double min_int;\n-double one_half;\n-double minus_one_half;\n-double negative_infinity;\n-uint64_t the_hole_nan;\n-double uint32_bias;\n-};\n-\n-static DoubleConstant double_constants;\n-\n-static struct V8_ALIGNED(16) {\n-  uint32_t a;\n-  uint32_t b;\n-  uint32_t c;\n-  uint32_t d;\n-} float_absolute_constant = {0x7FFFFFFF, 0x7FFFFFFF, 0x7FFFFFFF, 0x7FFFFFFF};\n-\n-static struct V8_ALIGNED(16) {\n-  uint32_t a;\n-  uint32_t b;\n-  uint32_t c;\n-  uint32_t d;\n-} float_negate_constant = {0x80000000, 0x80000000, 0x80000000, 0x80000000};\n-\n-static struct V8_ALIGNED(16) {\n-  uint64_t a;\n-  uint64_t b;\n-} double_absolute_constant = {uint64_t{0x7FFFFFFFFFFFFFFF},\n-                              uint64_t{0x7FFFFFFFFFFFFFFF}};\n-\n-static struct V8_ALIGNED(16) {\n-  uint64_t a;\n-  uint64_t b;\n-} double_negate_constant = {uint64_t{0x8000000000000000},\n-                            uint64_t{0x8000000000000000}};\n-\n const char* const RelocInfo::kFillerCommentString = \"DEOPTIMIZATION PADDING\";\n \n // -----------------------------------------------------------------------------\n@@ -295,10 +202,15 @@ const int kLastChunkTagBits = 1;\n const int kLastChunkTagMask = 1;\n const int kLastChunkTag = 1;\n \n-void RelocInfo::set_wasm_context_reference(Address address,\n-                                           ICacheFlushMode icache_flush_mode) {\n-  DCHECK(IsWasmContextReference(rmode_));\n-  set_embedded_address(address, icache_flush_mode);\n+// static\n+bool RelocInfo::OffHeapTargetIsCodedSpecially() {\n+#if defined(V8_TARGET_ARCH_ARM) || defined(V8_TARGET_ARCH_ARM64) || \\\n+    defined(V8_TARGET_ARCH_X64) || defined(V8_TARGET_ARCH_IA32)\n+  return false;\n+#elif defined(V8_TARGET_ARCH_MIPS) || defined(V8_TARGET_ARCH_MIPS64) || \\\n+    defined(V8_TARGET_ARCH_PPC) || defined(V8_TARGET_ARCH_S390)\n+  return true;\n+#endif\n }\n \n void RelocInfo::set_global_handle(Address address,\n@@ -324,22 +236,6 @@ Address RelocInfo::global_handle() const {\n   return embedded_address();\n }\n \n-uint32_t RelocInfo::wasm_function_table_size_reference() const {\n-  DCHECK(IsWasmFunctionTableSizeReference(rmode_));\n-  return embedded_size();\n-}\n-\n-Address RelocInfo::wasm_context_reference() const {\n-  DCHECK(IsWasmContextReference(rmode_));\n-  return embedded_address();\n-}\n-\n-void RelocInfo::update_wasm_function_table_size_reference(\n-    uint32_t old_size, uint32_t new_size, ICacheFlushMode icache_flush_mode) {\n-  DCHECK(IsWasmFunctionTableSizeReference(rmode_));\n-  set_embedded_size(new_size, icache_flush_mode);\n-}\n-\n void RelocInfo::set_target_address(Address target,\n                                    WriteBarrierMode write_barrier_mode,\n                                    ICacheFlushMode icache_flush_mode) {\n@@ -556,7 +452,7 @@ void RelocIterator::next() {\n RelocIterator::RelocIterator(Code* code, int mode_mask)\n     : mode_mask_(mode_mask) {\n   rinfo_.host_ = code;\n-  rinfo_.pc_ = code->instruction_start();\n+  rinfo_.pc_ = code->raw_instruction_start();\n   rinfo_.data_ = 0;\n   rinfo_.constant_pool_ = code->constant_pool();\n   // Relocation info is read backwards.\n@@ -625,6 +521,8 @@ const char* RelocInfo::RelocModeName(RelocInfo::Mode rmode) {\n       return \"internal reference\";\n     case INTERNAL_REFERENCE_ENCODED:\n       return \"encoded internal reference\";\n+    case OFF_HEAP_TARGET:\n+      return \"off heap target\";\n     case DEOPT_SCRIPT_OFFSET:\n       return \"deopt script offset\";\n     case DEOPT_INLINING_ID:\n@@ -637,14 +535,12 @@ const char* RelocInfo::RelocModeName(RelocInfo::Mode rmode) {\n       return \"constant pool\";\n     case VENEER_POOL:\n       return \"veneer pool\";\n-    case WASM_CONTEXT_REFERENCE:\n-      return \"wasm context reference\";\n-    case WASM_FUNCTION_TABLE_SIZE_REFERENCE:\n-      return \"wasm function table size reference\";\n     case WASM_GLOBAL_HANDLE:\n       return \"global handle\";\n     case WASM_CALL:\n       return \"internal wasm call\";\n+    case WASM_CODE_TABLE_ENTRY:\n+      return \"wasm code table entry\";\n     case JS_TO_WASM_CALL:\n       return \"js to wasm call\";\n     case NUMBER_OF_MODES:\n@@ -724,8 +620,14 @@ void RelocInfo::Verify(Isolate* isolate) {\n       Address target = target_internal_reference();\n       Address pc = target_internal_reference_address();\n       Code* code = Code::cast(isolate->FindCodeObject(pc));\n-      CHECK(target >= code->instruction_start());\n-      CHECK(target <= code->instruction_end());\n+      CHECK(target >= code->InstructionStart());\n+      CHECK(target <= code->InstructionEnd());\n+      break;\n+    }\n+    case OFF_HEAP_TARGET: {\n+      Address addr = target_off_heap_target();\n+      CHECK_NOT_NULL(addr);\n+      CHECK_NOT_NULL(InstructionStream::TryLookupCode(isolate, addr));\n       break;\n     }\n     case RUNTIME_ENTRY:\n@@ -737,11 +639,10 @@ void RelocInfo::Verify(Isolate* isolate) {\n     case DEOPT_ID:\n     case CONST_POOL:\n     case VENEER_POOL:\n-    case WASM_CONTEXT_REFERENCE:\n-    case WASM_FUNCTION_TABLE_SIZE_REFERENCE:\n     case WASM_GLOBAL_HANDLE:\n     case WASM_CALL:\n     case JS_TO_WASM_CALL:\n+    case WASM_CODE_TABLE_ENTRY:\n     case NONE:\n       break;\n     case NUMBER_OF_MODES:\n@@ -752,896 +653,6 @@ void RelocInfo::Verify(Isolate* isolate) {\n }\n #endif  // VERIFY_HEAP\n \n-// Implementation of ExternalReference\n-\n-static ExternalReference::Type BuiltinCallTypeForResultSize(int result_size) {\n-  switch (result_size) {\n-    case 1:\n-      return ExternalReference::BUILTIN_CALL;\n-    case 2:\n-      return ExternalReference::BUILTIN_CALL_PAIR;\n-  }\n-  UNREACHABLE();\n-}\n-\n-void ExternalReference::SetUp() {\n-  double_constants.min_int = kMinInt;\n-  double_constants.one_half = 0.5;\n-  double_constants.minus_one_half = -0.5;\n-  double_constants.the_hole_nan = kHoleNanInt64;\n-  double_constants.negative_infinity = -V8_INFINITY;\n-  double_constants.uint32_bias =\n-    static_cast<double>(static_cast<uint32_t>(0xFFFFFFFF)) + 1;\n-}\n-\n-ExternalReference::ExternalReference(Address address, Isolate* isolate)\n-    : address_(Redirect(isolate, address)) {}\n-\n-ExternalReference::ExternalReference(\n-    ApiFunction* fun, Type type = ExternalReference::BUILTIN_CALL,\n-    Isolate* isolate = nullptr)\n-    : address_(Redirect(isolate, fun->address(), type)) {}\n-\n-ExternalReference::ExternalReference(Runtime::FunctionId id, Isolate* isolate)\n-    : ExternalReference(Runtime::FunctionForId(id), isolate) {}\n-\n-ExternalReference::ExternalReference(const Runtime::Function* f,\n-                                     Isolate* isolate)\n-    : address_(Redirect(isolate, f->entry,\n-                        BuiltinCallTypeForResultSize(f->result_size))) {}\n-\n-ExternalReference ExternalReference::isolate_address(Isolate* isolate) {\n-  return ExternalReference(isolate);\n-}\n-\n-ExternalReference ExternalReference::builtins_address(Isolate* isolate) {\n-  return ExternalReference(isolate->builtins()->builtins_table_address());\n-}\n-\n-ExternalReference ExternalReference::handle_scope_implementer_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->handle_scope_implementer_address());\n-}\n-\n-ExternalReference ExternalReference::pending_microtask_count_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->pending_microtask_count_address());\n-}\n-\n-ExternalReference ExternalReference::interpreter_dispatch_table_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->interpreter()->dispatch_table_address());\n-}\n-\n-ExternalReference ExternalReference::interpreter_dispatch_counters(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      isolate->interpreter()->bytecode_dispatch_counters_table());\n-}\n-\n-ExternalReference ExternalReference::bytecode_size_table_address(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      interpreter::Bytecodes::bytecode_size_table_address());\n-}\n-\n-ExternalReference::ExternalReference(StatsCounter* counter)\n-  : address_(reinterpret_cast<Address>(counter->GetInternalPointer())) {}\n-\n-ExternalReference::ExternalReference(IsolateAddressId id, Isolate* isolate)\n-    : address_(isolate->get_address_from_id(id)) {}\n-\n-ExternalReference::ExternalReference(const SCTableReference& table_ref)\n-  : address_(table_ref.address()) {}\n-\n-ExternalReference ExternalReference::\n-    incremental_marking_record_write_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate,\n-      FUNCTION_ADDR(IncrementalMarking::RecordWriteFromCode)));\n-}\n-\n-ExternalReference ExternalReference::store_buffer_overflow_function(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate,\n-      FUNCTION_ADDR(StoreBuffer::StoreBufferOverflow)));\n-}\n-\n-ExternalReference ExternalReference::delete_handle_scope_extensions(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate,\n-      FUNCTION_ADDR(HandleScope::DeleteExtensions)));\n-}\n-\n-ExternalReference ExternalReference::get_date_field_function(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(JSDate::GetField)));\n-}\n-\n-ExternalReference ExternalReference::date_cache_stamp(Isolate* isolate) {\n-  return ExternalReference(isolate->date_cache()->stamp_address());\n-}\n-\n-void ExternalReference::set_redirector(\n-    Isolate* isolate, ExternalReferenceRedirector* redirector) {\n-  // We can't stack them.\n-  DCHECK_NULL(isolate->external_reference_redirector());\n-  isolate->set_external_reference_redirector(\n-      reinterpret_cast<ExternalReferenceRedirectorPointer*>(redirector));\n-}\n-\n-ExternalReference ExternalReference::stress_deopt_count(Isolate* isolate) {\n-  return ExternalReference(isolate->stress_deopt_count_address());\n-}\n-\n-ExternalReference ExternalReference::force_slow_path(Isolate* isolate) {\n-  return ExternalReference(isolate->force_slow_path_address());\n-}\n-\n-ExternalReference ExternalReference::new_deoptimizer_function(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(Deoptimizer::New)));\n-}\n-\n-ExternalReference ExternalReference::compute_output_frames_function(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(Deoptimizer::ComputeOutputFrames)));\n-}\n-\n-ExternalReference ExternalReference::wasm_f32_trunc(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::f32_trunc_wrapper)));\n-}\n-ExternalReference ExternalReference::wasm_f32_floor(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::f32_floor_wrapper)));\n-}\n-ExternalReference ExternalReference::wasm_f32_ceil(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::f32_ceil_wrapper)));\n-}\n-ExternalReference ExternalReference::wasm_f32_nearest_int(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::f32_nearest_int_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_f64_trunc(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::f64_trunc_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_f64_floor(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::f64_floor_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_f64_ceil(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::f64_ceil_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_f64_nearest_int(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::f64_nearest_int_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_int64_to_float32(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::int64_to_float32_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_uint64_to_float32(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::uint64_to_float32_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_int64_to_float64(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::int64_to_float64_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_uint64_to_float64(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::uint64_to_float64_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_float32_to_int64(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::float32_to_int64_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_float32_to_uint64(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::float32_to_uint64_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_float64_to_int64(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::float64_to_int64_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_float64_to_uint64(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::float64_to_uint64_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_int64_div(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::int64_div_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_int64_mod(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::int64_mod_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_uint64_div(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::uint64_div_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_uint64_mod(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::uint64_mod_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_word32_ctz(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::word32_ctz_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_word64_ctz(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::word64_ctz_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_word32_popcnt(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::word32_popcnt_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_word64_popcnt(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::word64_popcnt_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_word32_rol(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::word32_rol_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_word32_ror(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::word32_ror_wrapper)));\n-}\n-\n-static void f64_acos_wrapper(double* param) {\n-  WriteDoubleValue(param, base::ieee754::acos(ReadDoubleValue(param)));\n-}\n-\n-ExternalReference ExternalReference::f64_acos_wrapper_function(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(f64_acos_wrapper)));\n-}\n-\n-static void f64_asin_wrapper(double* param) {\n-  WriteDoubleValue(param, base::ieee754::asin(ReadDoubleValue(param)));\n-}\n-\n-ExternalReference ExternalReference::f64_asin_wrapper_function(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(f64_asin_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_float64_pow(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::float64_pow_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_set_thread_in_wasm_flag(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::set_thread_in_wasm_flag)));\n-}\n-\n-ExternalReference ExternalReference::wasm_clear_thread_in_wasm_flag(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::clear_thread_in_wasm_flag)));\n-}\n-\n-static void f64_mod_wrapper(double* param0, double* param1) {\n-  WriteDoubleValue(param0,\n-                   Modulo(ReadDoubleValue(param0), ReadDoubleValue(param1)));\n-}\n-\n-ExternalReference ExternalReference::f64_mod_wrapper_function(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(f64_mod_wrapper)));\n-}\n-\n-ExternalReference ExternalReference::wasm_call_trap_callback_for_testing(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(wasm::call_trap_callback_for_testing)));\n-}\n-\n-ExternalReference ExternalReference::log_enter_external_function(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(Logger::EnterExternal)));\n-}\n-\n-ExternalReference ExternalReference::log_leave_external_function(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(Logger::LeaveExternal)));\n-}\n-\n-ExternalReference ExternalReference::roots_array_start(Isolate* isolate) {\n-  return ExternalReference(isolate->heap()->roots_array_start());\n-}\n-\n-ExternalReference ExternalReference::allocation_sites_list_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->heap()->allocation_sites_list_address());\n-}\n-\n-ExternalReference ExternalReference::address_of_stack_limit(Isolate* isolate) {\n-  return ExternalReference(isolate->stack_guard()->address_of_jslimit());\n-}\n-\n-ExternalReference ExternalReference::address_of_real_stack_limit(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->stack_guard()->address_of_real_jslimit());\n-}\n-\n-ExternalReference ExternalReference::address_of_regexp_stack_limit(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->regexp_stack()->limit_address());\n-}\n-\n-ExternalReference ExternalReference::store_buffer_top(Isolate* isolate) {\n-  return ExternalReference(isolate->heap()->store_buffer_top_address());\n-}\n-\n-ExternalReference ExternalReference::heap_is_marking_flag_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->heap()->IsMarkingFlagAddress());\n-}\n-\n-ExternalReference ExternalReference::new_space_allocation_top_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->heap()->NewSpaceAllocationTopAddress());\n-}\n-\n-ExternalReference ExternalReference::new_space_allocation_limit_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->heap()->NewSpaceAllocationLimitAddress());\n-}\n-\n-ExternalReference ExternalReference::old_space_allocation_top_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->heap()->OldSpaceAllocationTopAddress());\n-}\n-\n-ExternalReference ExternalReference::old_space_allocation_limit_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->heap()->OldSpaceAllocationLimitAddress());\n-}\n-\n-ExternalReference ExternalReference::handle_scope_level_address(\n-    Isolate* isolate) {\n-  return ExternalReference(HandleScope::current_level_address(isolate));\n-}\n-\n-ExternalReference ExternalReference::handle_scope_next_address(\n-    Isolate* isolate) {\n-  return ExternalReference(HandleScope::current_next_address(isolate));\n-}\n-\n-ExternalReference ExternalReference::handle_scope_limit_address(\n-    Isolate* isolate) {\n-  return ExternalReference(HandleScope::current_limit_address(isolate));\n-}\n-\n-ExternalReference ExternalReference::scheduled_exception_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->scheduled_exception_address());\n-}\n-\n-ExternalReference ExternalReference::address_of_pending_message_obj(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->pending_message_obj_address());\n-}\n-\n-ExternalReference ExternalReference::address_of_min_int() {\n-  return ExternalReference(reinterpret_cast<void*>(&double_constants.min_int));\n-}\n-\n-ExternalReference ExternalReference::address_of_one_half() {\n-  return ExternalReference(reinterpret_cast<void*>(&double_constants.one_half));\n-}\n-\n-ExternalReference ExternalReference::address_of_minus_one_half() {\n-  return ExternalReference(\n-      reinterpret_cast<void*>(&double_constants.minus_one_half));\n-}\n-\n-ExternalReference ExternalReference::address_of_negative_infinity() {\n-  return ExternalReference(\n-      reinterpret_cast<void*>(&double_constants.negative_infinity));\n-}\n-\n-ExternalReference ExternalReference::address_of_the_hole_nan() {\n-  return ExternalReference(\n-      reinterpret_cast<void*>(&double_constants.the_hole_nan));\n-}\n-\n-ExternalReference ExternalReference::address_of_uint32_bias() {\n-  return ExternalReference(\n-      reinterpret_cast<void*>(&double_constants.uint32_bias));\n-}\n-\n-ExternalReference ExternalReference::address_of_float_abs_constant() {\n-  return ExternalReference(reinterpret_cast<void*>(&float_absolute_constant));\n-}\n-\n-ExternalReference ExternalReference::address_of_float_neg_constant() {\n-  return ExternalReference(reinterpret_cast<void*>(&float_negate_constant));\n-}\n-\n-ExternalReference ExternalReference::address_of_double_abs_constant() {\n-  return ExternalReference(reinterpret_cast<void*>(&double_absolute_constant));\n-}\n-\n-ExternalReference ExternalReference::address_of_double_neg_constant() {\n-  return ExternalReference(reinterpret_cast<void*>(&double_negate_constant));\n-}\n-\n-ExternalReference ExternalReference::is_profiling_address(Isolate* isolate) {\n-  return ExternalReference(isolate->is_profiling_address());\n-}\n-\n-ExternalReference ExternalReference::invoke_function_callback(\n-    Isolate* isolate) {\n-  Address thunk_address = FUNCTION_ADDR(&InvokeFunctionCallback);\n-  ExternalReference::Type thunk_type = ExternalReference::PROFILING_API_CALL;\n-  ApiFunction thunk_fun(thunk_address);\n-  return ExternalReference(&thunk_fun, thunk_type, isolate);\n-}\n-\n-ExternalReference ExternalReference::invoke_accessor_getter_callback(\n-    Isolate* isolate) {\n-  Address thunk_address = FUNCTION_ADDR(&InvokeAccessorGetterCallback);\n-  ExternalReference::Type thunk_type =\n-      ExternalReference::PROFILING_GETTER_CALL;\n-  ApiFunction thunk_fun(thunk_address);\n-  return ExternalReference(&thunk_fun, thunk_type, isolate);\n-}\n-\n-#ifndef V8_INTERPRETED_REGEXP\n-\n-ExternalReference ExternalReference::re_check_stack_guard_state(\n-    Isolate* isolate) {\n-  Address function;\n-#if V8_TARGET_ARCH_X64\n-  function = FUNCTION_ADDR(RegExpMacroAssemblerX64::CheckStackGuardState);\n-#elif V8_TARGET_ARCH_IA32\n-  function = FUNCTION_ADDR(RegExpMacroAssemblerIA32::CheckStackGuardState);\n-#elif V8_TARGET_ARCH_ARM64\n-  function = FUNCTION_ADDR(RegExpMacroAssemblerARM64::CheckStackGuardState);\n-#elif V8_TARGET_ARCH_ARM\n-  function = FUNCTION_ADDR(RegExpMacroAssemblerARM::CheckStackGuardState);\n-#elif V8_TARGET_ARCH_PPC\n-  function = FUNCTION_ADDR(RegExpMacroAssemblerPPC::CheckStackGuardState);\n-#elif V8_TARGET_ARCH_MIPS\n-  function = FUNCTION_ADDR(RegExpMacroAssemblerMIPS::CheckStackGuardState);\n-#elif V8_TARGET_ARCH_MIPS64\n-  function = FUNCTION_ADDR(RegExpMacroAssemblerMIPS::CheckStackGuardState);\n-#elif V8_TARGET_ARCH_S390\n-  function = FUNCTION_ADDR(RegExpMacroAssemblerS390::CheckStackGuardState);\n-#else\n-  UNREACHABLE();\n-#endif\n-  return ExternalReference(Redirect(isolate, function));\n-}\n-\n-ExternalReference ExternalReference::re_grow_stack(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(NativeRegExpMacroAssembler::GrowStack)));\n-}\n-\n-ExternalReference ExternalReference::re_case_insensitive_compare_uc16(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate,\n-      FUNCTION_ADDR(NativeRegExpMacroAssembler::CaseInsensitiveCompareUC16)));\n-}\n-\n-ExternalReference ExternalReference::re_word_character_map() {\n-  return ExternalReference(\n-      NativeRegExpMacroAssembler::word_character_map_address());\n-}\n-\n-ExternalReference ExternalReference::address_of_static_offsets_vector(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      reinterpret_cast<Address>(isolate->jsregexp_static_offsets_vector()));\n-}\n-\n-ExternalReference ExternalReference::address_of_regexp_stack_memory_address(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      isolate->regexp_stack()->memory_address());\n-}\n-\n-ExternalReference ExternalReference::address_of_regexp_stack_memory_size(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->regexp_stack()->memory_size_address());\n-}\n-\n-#endif  // V8_INTERPRETED_REGEXP\n-\n-ExternalReference ExternalReference::ieee754_acos_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::acos), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_acosh_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate, FUNCTION_ADDR(base::ieee754::acosh), BUILTIN_FP_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_asin_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::asin), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_asinh_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate, FUNCTION_ADDR(base::ieee754::asinh), BUILTIN_FP_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_atan_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::atan), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_atanh_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate, FUNCTION_ADDR(base::ieee754::atanh), BUILTIN_FP_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_atan2_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate, FUNCTION_ADDR(base::ieee754::atan2), BUILTIN_FP_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_cbrt_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(base::ieee754::cbrt),\n-                                    BUILTIN_FP_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_cos_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::cos), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_cosh_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::cosh), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_exp_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::exp), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_expm1_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate, FUNCTION_ADDR(base::ieee754::expm1), BUILTIN_FP_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_log_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::log), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_log1p_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::log1p), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_log10_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::log10), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_log2_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::log2), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_sin_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::sin), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_sinh_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::sinh), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_tan_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::tan), BUILTIN_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::ieee754_tanh_function(Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(base::ieee754::tanh), BUILTIN_FP_CALL));\n-}\n-\n-void* libc_memchr(void* string, int character, size_t search_length) {\n-  return memchr(string, character, search_length);\n-}\n-\n-ExternalReference ExternalReference::libc_memchr_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(libc_memchr)));\n-}\n-\n-void* libc_memcpy(void* dest, const void* src, size_t n) {\n-  return memcpy(dest, src, n);\n-}\n-\n-ExternalReference ExternalReference::libc_memcpy_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(libc_memcpy)));\n-}\n-\n-void* libc_memmove(void* dest, const void* src, size_t n) {\n-  return memmove(dest, src, n);\n-}\n-\n-ExternalReference ExternalReference::libc_memmove_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(libc_memmove)));\n-}\n-\n-void* libc_memset(void* dest, int byte, size_t n) {\n-  DCHECK_EQ(static_cast<char>(byte), byte);\n-  return memset(dest, byte, n);\n-}\n-\n-ExternalReference ExternalReference::libc_memset_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(libc_memset)));\n-}\n-\n-ExternalReference ExternalReference::printf_function(Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(std::printf)));\n-}\n-\n-template <typename SubjectChar, typename PatternChar>\n-ExternalReference ExternalReference::search_string_raw(Isolate* isolate) {\n-  auto f = SearchStringRaw<SubjectChar, PatternChar>;\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(f)));\n-}\n-\n-ExternalReference ExternalReference::orderedhashmap_gethash_raw(\n-    Isolate* isolate) {\n-  auto f = OrderedHashMap::GetHash;\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(f)));\n-}\n-\n-ExternalReference ExternalReference::get_or_create_hash_raw(Isolate* isolate) {\n-  typedef Smi* (*GetOrCreateHash)(Isolate * isolate, Object * key);\n-  GetOrCreateHash f = Object::GetOrCreateHash;\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(f)));\n-}\n-\n-ExternalReference ExternalReference::jsreceiver_create_identity_hash(\n-    Isolate* isolate) {\n-  typedef Smi* (*CreateIdentityHash)(Isolate * isolate, JSReceiver * key);\n-  CreateIdentityHash f = JSReceiver::CreateIdentityHash;\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(f)));\n-}\n-\n-ExternalReference\n-ExternalReference::copy_fast_number_jsarray_elements_to_typed_array(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate, FUNCTION_ADDR(CopyFastNumberJSArrayElementsToTypedArray)));\n-}\n-\n-ExternalReference ExternalReference::copy_typed_array_elements_to_typed_array(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(CopyTypedArrayElementsToTypedArray)));\n-}\n-\n-ExternalReference ExternalReference::copy_typed_array_elements_slice(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(CopyTypedArrayElementsSlice)));\n-}\n-\n-ExternalReference ExternalReference::try_internalize_string_function(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate, FUNCTION_ADDR(StringTable::LookupStringIfExists_NoAllocate)));\n-}\n-\n-ExternalReference ExternalReference::check_object_type(Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate, FUNCTION_ADDR(CheckObjectType)));\n-}\n-\n-#ifdef V8_INTL_SUPPORT\n-ExternalReference ExternalReference::intl_convert_one_byte_to_lower(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(ConvertOneByteToLower)));\n-}\n-\n-ExternalReference ExternalReference::intl_to_latin1_lower_table(\n-    Isolate* isolate) {\n-  uint8_t* ptr = const_cast<uint8_t*>(ToLatin1LowerTable());\n-  return ExternalReference(reinterpret_cast<Address>(ptr));\n-}\n-#endif  // V8_INTL_SUPPORT\n-\n-// Explicit instantiations for all combinations of 1- and 2-byte strings.\n-template ExternalReference\n-ExternalReference::search_string_raw<const uint8_t, const uint8_t>(Isolate*);\n-template ExternalReference\n-ExternalReference::search_string_raw<const uint8_t, const uc16>(Isolate*);\n-template ExternalReference\n-ExternalReference::search_string_raw<const uc16, const uint8_t>(Isolate*);\n-template ExternalReference\n-ExternalReference::search_string_raw<const uc16, const uc16>(Isolate*);\n-\n-ExternalReference ExternalReference::page_flags(Page* page) {\n-  return ExternalReference(reinterpret_cast<Address>(page) +\n-                           MemoryChunk::kFlagsOffset);\n-}\n-\n-ExternalReference ExternalReference::ForDeoptEntry(Address entry) {\n-  return ExternalReference(entry);\n-}\n-\n-ExternalReference ExternalReference::cpu_features() {\n-  DCHECK(CpuFeatures::initialized_);\n-  return ExternalReference(&CpuFeatures::supported_);\n-}\n-\n-ExternalReference ExternalReference::promise_hook_or_debug_is_active_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->promise_hook_or_debug_is_active_address());\n-}\n-\n-ExternalReference ExternalReference::debug_is_active_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->debug()->is_active_address());\n-}\n-\n-ExternalReference ExternalReference::debug_hook_on_function_call_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->debug()->hook_on_function_call_address());\n-}\n-\n-ExternalReference ExternalReference::runtime_function_table_address(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      const_cast<Runtime::Function*>(Runtime::RuntimeFunctionTable(isolate)));\n-}\n-\n-ExternalReference ExternalReference::invalidate_prototype_chains_function(\n-    Isolate* isolate) {\n-  return ExternalReference(\n-      Redirect(isolate, FUNCTION_ADDR(JSObject::InvalidatePrototypeChains)));\n-}\n-\n-double power_helper(Isolate* isolate, double x, double y) {\n-  int y_int = static_cast<int>(y);\n-  if (y == y_int) {\n-    return power_double_int(x, y_int);  // Returns 1 if exponent is 0.\n-  }\n-  if (y == 0.5) {\n-    lazily_initialize_fast_sqrt(isolate);\n-    return (std::isinf(x)) ? V8_INFINITY\n-                           : fast_sqrt(x + 0.0, isolate);  // Convert -0 to +0.\n-  }\n-  if (y == -0.5) {\n-    lazily_initialize_fast_sqrt(isolate);\n-    return (std::isinf(x)) ? 0 : 1.0 / fast_sqrt(x + 0.0,\n-                                                 isolate);  // Convert -0 to +0.\n-  }\n-  return power_double_double(x, y);\n-}\n-\n-// Helper function to compute x^y, where y is known to be an\n-// integer. Uses binary decomposition to limit the number of\n-// multiplications; see the discussion in \"Hacker's Delight\" by Henry\n-// S. Warren, Jr., figure 11-6, page 213.\n-double power_double_int(double x, int y) {\n-  double m = (y < 0) ? 1 / x : x;\n-  unsigned n = (y < 0) ? -y : y;\n-  double p = 1;\n-  while (n != 0) {\n-    if ((n & 1) != 0) p *= m;\n-    m *= m;\n-    if ((n & 2) != 0) p *= m;\n-    m *= m;\n-    n >>= 2;\n-  }\n-  return p;\n-}\n-\n-double power_double_double(double x, double y) {\n-  // The checks for special cases can be dropped in ia32 because it has already\n-  // been done in generated code before bailing out here.\n-  if (std::isnan(y) || ((x == 1 || x == -1) && std::isinf(y))) {\n-    return std::numeric_limits<double>::quiet_NaN();\n-  }\n-  return Pow(x, y);\n-}\n-\n-double modulo_double_double(double x, double y) { return Modulo(x, y); }\n-\n-ExternalReference ExternalReference::power_double_double_function(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(isolate,\n-                                    FUNCTION_ADDR(power_double_double),\n-                                    BUILTIN_FP_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::mod_two_doubles_operation(\n-    Isolate* isolate) {\n-  return ExternalReference(Redirect(\n-      isolate, FUNCTION_ADDR(modulo_double_double), BUILTIN_FP_FP_CALL));\n-}\n-\n-ExternalReference ExternalReference::debug_last_step_action_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->debug()->last_step_action_address());\n-}\n-\n-ExternalReference ExternalReference::debug_suspended_generator_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->debug()->suspended_generator_address());\n-}\n-\n-ExternalReference ExternalReference::debug_restart_fp_address(\n-    Isolate* isolate) {\n-  return ExternalReference(isolate->debug()->restart_fp_address());\n-}\n-\n-ExternalReference ExternalReference::fixed_typed_array_base_data_offset() {\n-  return ExternalReference(reinterpret_cast<void*>(\n-      FixedTypedArrayBase::kDataOffset - kHeapObjectTag));\n-}\n-\n-bool operator==(ExternalReference lhs, ExternalReference rhs) {\n-  return lhs.address() == rhs.address();\n-}\n-\n-bool operator!=(ExternalReference lhs, ExternalReference rhs) {\n-  return !(lhs == rhs);\n-}\n-\n-size_t hash_value(ExternalReference reference) {\n-  return base::hash<Address>()(reference.address());\n-}\n-\n-std::ostream& operator<<(std::ostream& os, ExternalReference reference) {\n-  os << static_cast<const void*>(reference.address());\n-  const Runtime::Function* fn = Runtime::FunctionForEntry(reference.address());\n-  if (fn) os << \"<\" << fn->name << \".entry>\";\n-  return os;\n-}\n-\n ConstantPoolBuilder::ConstantPoolBuilder(int ptr_reach_bits,\n                                          int double_reach_bits) {\n   info_[ConstantPoolEntry::INTPTR].entries.reserve(64);"
        },
        {
            "sha": "e79f4cc869333295f9528d747f3353cc4b313c94",
            "filename": "deps/v8/src/assembler.h",
            "status": "modified",
            "additions": 38,
            "deletions": 375,
            "changes": 413,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fassembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fassembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fassembler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -37,17 +37,19 @@\n \n #include <forward_list>\n #include <iosfwd>\n+#include <map>\n \n #include \"src/allocation.h\"\n-#include \"src/builtins/builtins.h\"\n+#include \"src/contexts.h\"\n #include \"src/deoptimize-reason.h\"\n #include \"src/double.h\"\n+#include \"src/external-reference.h\"\n+#include \"src/flags.h\"\n #include \"src/globals.h\"\n #include \"src/label.h\"\n-#include \"src/log.h\"\n+#include \"src/objects.h\"\n #include \"src/register-configuration.h\"\n #include \"src/reglist.h\"\n-#include \"src/runtime/runtime.h\"\n \n namespace v8 {\n \n@@ -364,11 +366,6 @@ class RelocInfo {\n     // Please note the order is important (see IsCodeTarget, IsGCRelocMode).\n     CODE_TARGET,\n     EMBEDDED_OBJECT,\n-    // Wasm entries are to relocate pointers into the wasm memory embedded in\n-    // wasm code. Everything after WASM_CONTEXT_REFERENCE (inclusive) is not\n-    // GC'ed.\n-    WASM_CONTEXT_REFERENCE,\n-    WASM_FUNCTION_TABLE_SIZE_REFERENCE,\n     WASM_GLOBAL_HANDLE,\n     WASM_CALL,\n     JS_TO_WASM_CALL,\n@@ -382,6 +379,9 @@ class RelocInfo {\n     // Encoded internal reference, used only on MIPS, MIPS64 and PPC.\n     INTERNAL_REFERENCE_ENCODED,\n \n+    // An off-heap instruction stream target. See http://goo.gl/Z2HUiM.\n+    OFF_HEAP_TARGET,\n+\n     // Marks constant and veneer pools. Only used on ARM and ARM64.\n     // They use a custom noncompact encoding.\n     CONST_POOL,\n@@ -396,6 +396,9 @@ class RelocInfo {\n     // cannot be encoded as part of another record.\n     PC_JUMP,\n \n+    // Points to a wasm code table entry.\n+    WASM_CODE_TABLE_ENTRY,\n+\n     // Pseudo-types\n     NUMBER_OF_MODES,\n     NONE,  // never recorded value\n@@ -458,22 +461,16 @@ class RelocInfo {\n   static inline bool IsInternalReferenceEncoded(Mode mode) {\n     return mode == INTERNAL_REFERENCE_ENCODED;\n   }\n-  static inline bool IsNone(Mode mode) { return mode == NONE; }\n-  static inline bool IsWasmContextReference(Mode mode) {\n-    return mode == WASM_CONTEXT_REFERENCE;\n-  }\n-  static inline bool IsWasmFunctionTableSizeReference(Mode mode) {\n-    return mode == WASM_FUNCTION_TABLE_SIZE_REFERENCE;\n+  static inline bool IsOffHeapTarget(Mode mode) {\n+    return mode == OFF_HEAP_TARGET;\n   }\n+  static inline bool IsNone(Mode mode) { return mode == NONE; }\n   static inline bool IsWasmReference(Mode mode) {\n-    return IsWasmPtrReference(mode) || IsWasmSizeReference(mode);\n-  }\n-  static inline bool IsWasmSizeReference(Mode mode) {\n-    return IsWasmFunctionTableSizeReference(mode);\n+    return IsWasmPtrReference(mode);\n   }\n   static inline bool IsWasmPtrReference(Mode mode) {\n-    return mode == WASM_CONTEXT_REFERENCE || mode == WASM_GLOBAL_HANDLE ||\n-           mode == WASM_CALL || mode == JS_TO_WASM_CALL;\n+    return mode == WASM_GLOBAL_HANDLE || mode == WASM_CALL ||\n+           mode == JS_TO_WASM_CALL;\n   }\n \n   static constexpr int ModeMask(Mode mode) { return 1 << mode; }\n@@ -500,22 +497,18 @@ class RelocInfo {\n   // instructions).\n   bool IsCodedSpecially();\n \n+  // The static pendant to IsCodedSpecially, just for off-heap targets. Used\n+  // during deserialization, when we don't actually have a RelocInfo handy.\n+  static bool OffHeapTargetIsCodedSpecially();\n+\n   // If true, the pointer this relocation info refers to is an entry in the\n   // constant pool, otherwise the pointer is embedded in the instruction stream.\n   bool IsInConstantPool();\n \n-  Address wasm_context_reference() const;\n-  uint32_t wasm_function_table_size_reference() const;\n   Address global_handle() const;\n   Address js_to_wasm_address() const;\n   Address wasm_call_address() const;\n \n-  void set_wasm_context_reference(\n-      Address address,\n-      ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n-  void update_wasm_function_table_size_reference(\n-      uint32_t old_base, uint32_t new_base,\n-      ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED);\n   void set_target_address(\n       Address target,\n       WriteBarrierMode write_barrier_mode = UPDATE_WRITE_BARRIER,\n@@ -542,11 +535,16 @@ class RelocInfo {\n       Address target,\n       WriteBarrierMode write_barrier_mode = UPDATE_WRITE_BARRIER,\n       ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED));\n+  INLINE(Address target_off_heap_target());\n   INLINE(Cell* target_cell());\n   INLINE(Handle<Cell> target_cell_handle());\n   INLINE(void set_target_cell(\n       Cell* cell, WriteBarrierMode write_barrier_mode = UPDATE_WRITE_BARRIER,\n       ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED));\n+  INLINE(void set_wasm_code_table_entry(\n+      Address, ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED));\n+  INLINE(void set_target_external_reference(\n+      Address, ICacheFlushMode icache_flush_mode = FLUSH_ICACHE_IF_NEEDED));\n \n   // Returns the address of the constant pool entry where the target address\n   // is held.  This should only be called if IsInConstantPool returns true.\n@@ -733,349 +731,6 @@ class RelocIterator: public Malloced {\n   DISALLOW_COPY_AND_ASSIGN(RelocIterator);\n };\n \n-//------------------------------------------------------------------------------\n-// External references\n-\n-// An ExternalReference represents a C++ address used in the generated\n-// code. All references to C++ functions and variables must be encapsulated in\n-// an ExternalReference instance. This is done in order to track the origin of\n-// all external references in the code so that they can be bound to the correct\n-// addresses when deserializing a heap.\n-class ExternalReference BASE_EMBEDDED {\n- public:\n-  // Used in the simulator to support different native api calls.\n-  enum Type {\n-    // Builtin call.\n-    // Object* f(v8::internal::Arguments).\n-    BUILTIN_CALL,  // default\n-\n-    // Builtin call returning object pair.\n-    // ObjectPair f(v8::internal::Arguments).\n-    BUILTIN_CALL_PAIR,\n-\n-    // Builtin that takes float arguments and returns an int.\n-    // int f(double, double).\n-    BUILTIN_COMPARE_CALL,\n-\n-    // Builtin call that returns floating point.\n-    // double f(double, double).\n-    BUILTIN_FP_FP_CALL,\n-\n-    // Builtin call that returns floating point.\n-    // double f(double).\n-    BUILTIN_FP_CALL,\n-\n-    // Builtin call that returns floating point.\n-    // double f(double, int).\n-    BUILTIN_FP_INT_CALL,\n-\n-    // Direct call to API function callback.\n-    // void f(v8::FunctionCallbackInfo&)\n-    DIRECT_API_CALL,\n-\n-    // Call to function callback via InvokeFunctionCallback.\n-    // void f(v8::FunctionCallbackInfo&, v8::FunctionCallback)\n-    PROFILING_API_CALL,\n-\n-    // Direct call to accessor getter callback.\n-    // void f(Local<Name> property, PropertyCallbackInfo& info)\n-    DIRECT_GETTER_CALL,\n-\n-    // Call to accessor getter callback via InvokeAccessorGetterCallback.\n-    // void f(Local<Name> property, PropertyCallbackInfo& info,\n-    //     AccessorNameGetterCallback callback)\n-    PROFILING_GETTER_CALL\n-  };\n-\n-  static void SetUp();\n-\n-  typedef void* ExternalReferenceRedirector(void* original, Type type);\n-\n-  ExternalReference() : address_(nullptr) {}\n-\n-  ExternalReference(Address address, Isolate* isolate);\n-\n-  ExternalReference(ApiFunction* ptr, Type type, Isolate* isolate);\n-\n-  ExternalReference(Runtime::FunctionId id, Isolate* isolate);\n-\n-  ExternalReference(const Runtime::Function* f, Isolate* isolate);\n-\n-  explicit ExternalReference(StatsCounter* counter);\n-\n-  ExternalReference(IsolateAddressId id, Isolate* isolate);\n-\n-  explicit ExternalReference(const SCTableReference& table_ref);\n-\n-  // Isolate as an external reference.\n-  static ExternalReference isolate_address(Isolate* isolate);\n-\n-  // The builtins table as an external reference, used by lazy deserialization.\n-  static ExternalReference builtins_address(Isolate* isolate);\n-\n-  static ExternalReference handle_scope_implementer_address(Isolate* isolate);\n-  static ExternalReference pending_microtask_count_address(Isolate* isolate);\n-\n-  // One-of-a-kind references. These references are not part of a general\n-  // pattern. This means that they have to be added to the\n-  // ExternalReferenceTable in serialize.cc manually.\n-\n-  static ExternalReference interpreter_dispatch_table_address(Isolate* isolate);\n-  static ExternalReference interpreter_dispatch_counters(Isolate* isolate);\n-  static ExternalReference bytecode_size_table_address(Isolate* isolate);\n-\n-  static ExternalReference incremental_marking_record_write_function(\n-      Isolate* isolate);\n-  static ExternalReference store_buffer_overflow_function(\n-      Isolate* isolate);\n-  static ExternalReference delete_handle_scope_extensions(Isolate* isolate);\n-\n-  static ExternalReference get_date_field_function(Isolate* isolate);\n-  static ExternalReference date_cache_stamp(Isolate* isolate);\n-\n-  // Deoptimization support.\n-  static ExternalReference new_deoptimizer_function(Isolate* isolate);\n-  static ExternalReference compute_output_frames_function(Isolate* isolate);\n-\n-  static ExternalReference wasm_f32_trunc(Isolate* isolate);\n-  static ExternalReference wasm_f32_floor(Isolate* isolate);\n-  static ExternalReference wasm_f32_ceil(Isolate* isolate);\n-  static ExternalReference wasm_f32_nearest_int(Isolate* isolate);\n-  static ExternalReference wasm_f64_trunc(Isolate* isolate);\n-  static ExternalReference wasm_f64_floor(Isolate* isolate);\n-  static ExternalReference wasm_f64_ceil(Isolate* isolate);\n-  static ExternalReference wasm_f64_nearest_int(Isolate* isolate);\n-  static ExternalReference wasm_int64_to_float32(Isolate* isolate);\n-  static ExternalReference wasm_uint64_to_float32(Isolate* isolate);\n-  static ExternalReference wasm_int64_to_float64(Isolate* isolate);\n-  static ExternalReference wasm_uint64_to_float64(Isolate* isolate);\n-  static ExternalReference wasm_float32_to_int64(Isolate* isolate);\n-  static ExternalReference wasm_float32_to_uint64(Isolate* isolate);\n-  static ExternalReference wasm_float64_to_int64(Isolate* isolate);\n-  static ExternalReference wasm_float64_to_uint64(Isolate* isolate);\n-  static ExternalReference wasm_int64_div(Isolate* isolate);\n-  static ExternalReference wasm_int64_mod(Isolate* isolate);\n-  static ExternalReference wasm_uint64_div(Isolate* isolate);\n-  static ExternalReference wasm_uint64_mod(Isolate* isolate);\n-  static ExternalReference wasm_word32_ctz(Isolate* isolate);\n-  static ExternalReference wasm_word64_ctz(Isolate* isolate);\n-  static ExternalReference wasm_word32_popcnt(Isolate* isolate);\n-  static ExternalReference wasm_word64_popcnt(Isolate* isolate);\n-  static ExternalReference wasm_word32_rol(Isolate* isolate);\n-  static ExternalReference wasm_word32_ror(Isolate* isolate);\n-  static ExternalReference wasm_float64_pow(Isolate* isolate);\n-  static ExternalReference wasm_set_thread_in_wasm_flag(Isolate* isolate);\n-  static ExternalReference wasm_clear_thread_in_wasm_flag(Isolate* isolate);\n-\n-  static ExternalReference f64_acos_wrapper_function(Isolate* isolate);\n-  static ExternalReference f64_asin_wrapper_function(Isolate* isolate);\n-  static ExternalReference f64_mod_wrapper_function(Isolate* isolate);\n-\n-  // Trap callback function for cctest/wasm/wasm-run-utils.h\n-  static ExternalReference wasm_call_trap_callback_for_testing(\n-      Isolate* isolate);\n-\n-  // Log support.\n-  static ExternalReference log_enter_external_function(Isolate* isolate);\n-  static ExternalReference log_leave_external_function(Isolate* isolate);\n-\n-  // Static variable Heap::roots_array_start()\n-  static ExternalReference roots_array_start(Isolate* isolate);\n-\n-  // Static variable Heap::allocation_sites_list_address()\n-  static ExternalReference allocation_sites_list_address(Isolate* isolate);\n-\n-  // Static variable StackGuard::address_of_jslimit()\n-  V8_EXPORT_PRIVATE static ExternalReference address_of_stack_limit(\n-      Isolate* isolate);\n-\n-  // Static variable StackGuard::address_of_real_jslimit()\n-  static ExternalReference address_of_real_stack_limit(Isolate* isolate);\n-\n-  // Static variable RegExpStack::limit_address()\n-  static ExternalReference address_of_regexp_stack_limit(Isolate* isolate);\n-\n-  // Static variables for RegExp.\n-  static ExternalReference address_of_static_offsets_vector(Isolate* isolate);\n-  static ExternalReference address_of_regexp_stack_memory_address(\n-      Isolate* isolate);\n-  static ExternalReference address_of_regexp_stack_memory_size(\n-      Isolate* isolate);\n-\n-  // Write barrier.\n-  static ExternalReference store_buffer_top(Isolate* isolate);\n-  static ExternalReference heap_is_marking_flag_address(Isolate* isolate);\n-\n-  // Used for fast allocation in generated code.\n-  static ExternalReference new_space_allocation_top_address(Isolate* isolate);\n-  static ExternalReference new_space_allocation_limit_address(Isolate* isolate);\n-  static ExternalReference old_space_allocation_top_address(Isolate* isolate);\n-  static ExternalReference old_space_allocation_limit_address(Isolate* isolate);\n-\n-  static ExternalReference mod_two_doubles_operation(Isolate* isolate);\n-  static ExternalReference power_double_double_function(Isolate* isolate);\n-\n-  static ExternalReference handle_scope_next_address(Isolate* isolate);\n-  static ExternalReference handle_scope_limit_address(Isolate* isolate);\n-  static ExternalReference handle_scope_level_address(Isolate* isolate);\n-\n-  static ExternalReference scheduled_exception_address(Isolate* isolate);\n-  static ExternalReference address_of_pending_message_obj(Isolate* isolate);\n-\n-  // Static variables containing common double constants.\n-  static ExternalReference address_of_min_int();\n-  static ExternalReference address_of_one_half();\n-  static ExternalReference address_of_minus_one_half();\n-  static ExternalReference address_of_negative_infinity();\n-  static ExternalReference address_of_the_hole_nan();\n-  static ExternalReference address_of_uint32_bias();\n-\n-  // Static variables containing simd constants.\n-  static ExternalReference address_of_float_abs_constant();\n-  static ExternalReference address_of_float_neg_constant();\n-  static ExternalReference address_of_double_abs_constant();\n-  static ExternalReference address_of_double_neg_constant();\n-\n-  // IEEE 754 functions.\n-  static ExternalReference ieee754_acos_function(Isolate* isolate);\n-  static ExternalReference ieee754_acosh_function(Isolate* isolate);\n-  static ExternalReference ieee754_asin_function(Isolate* isolate);\n-  static ExternalReference ieee754_asinh_function(Isolate* isolate);\n-  static ExternalReference ieee754_atan_function(Isolate* isolate);\n-  static ExternalReference ieee754_atanh_function(Isolate* isolate);\n-  static ExternalReference ieee754_atan2_function(Isolate* isolate);\n-  static ExternalReference ieee754_cbrt_function(Isolate* isolate);\n-  static ExternalReference ieee754_cos_function(Isolate* isolate);\n-  static ExternalReference ieee754_cosh_function(Isolate* isolate);\n-  static ExternalReference ieee754_exp_function(Isolate* isolate);\n-  static ExternalReference ieee754_expm1_function(Isolate* isolate);\n-  static ExternalReference ieee754_log_function(Isolate* isolate);\n-  static ExternalReference ieee754_log1p_function(Isolate* isolate);\n-  static ExternalReference ieee754_log10_function(Isolate* isolate);\n-  static ExternalReference ieee754_log2_function(Isolate* isolate);\n-  static ExternalReference ieee754_sin_function(Isolate* isolate);\n-  static ExternalReference ieee754_sinh_function(Isolate* isolate);\n-  static ExternalReference ieee754_tan_function(Isolate* isolate);\n-  static ExternalReference ieee754_tanh_function(Isolate* isolate);\n-\n-  static ExternalReference libc_memchr_function(Isolate* isolate);\n-  static ExternalReference libc_memcpy_function(Isolate* isolate);\n-  static ExternalReference libc_memmove_function(Isolate* isolate);\n-  static ExternalReference libc_memset_function(Isolate* isolate);\n-\n-  static ExternalReference printf_function(Isolate* isolate);\n-\n-  static ExternalReference try_internalize_string_function(Isolate* isolate);\n-\n-  static ExternalReference check_object_type(Isolate* isolate);\n-\n-#ifdef V8_INTL_SUPPORT\n-  static ExternalReference intl_convert_one_byte_to_lower(Isolate* isolate);\n-  static ExternalReference intl_to_latin1_lower_table(Isolate* isolate);\n-#endif  // V8_INTL_SUPPORT\n-\n-  template <typename SubjectChar, typename PatternChar>\n-  static ExternalReference search_string_raw(Isolate* isolate);\n-\n-  static ExternalReference orderedhashmap_gethash_raw(Isolate* isolate);\n-\n-  static ExternalReference get_or_create_hash_raw(Isolate* isolate);\n-  static ExternalReference jsreceiver_create_identity_hash(Isolate* isolate);\n-\n-  static ExternalReference copy_fast_number_jsarray_elements_to_typed_array(\n-      Isolate* isolate);\n-  static ExternalReference copy_typed_array_elements_to_typed_array(\n-      Isolate* isolate);\n-  static ExternalReference copy_typed_array_elements_slice(Isolate* isolate);\n-\n-  static ExternalReference page_flags(Page* page);\n-\n-  static ExternalReference ForDeoptEntry(Address entry);\n-\n-  static ExternalReference cpu_features();\n-\n-  static ExternalReference debug_is_active_address(Isolate* isolate);\n-  static ExternalReference debug_hook_on_function_call_address(\n-      Isolate* isolate);\n-\n-  static ExternalReference is_profiling_address(Isolate* isolate);\n-  static ExternalReference invoke_function_callback(Isolate* isolate);\n-  static ExternalReference invoke_accessor_getter_callback(Isolate* isolate);\n-\n-  static ExternalReference promise_hook_or_debug_is_active_address(\n-      Isolate* isolate);\n-\n-  V8_EXPORT_PRIVATE static ExternalReference runtime_function_table_address(\n-      Isolate* isolate);\n-\n-  static ExternalReference invalidate_prototype_chains_function(\n-      Isolate* isolate);\n-\n-  Address address() const { return reinterpret_cast<Address>(address_); }\n-\n-  // Used to read out the last step action of the debugger.\n-  static ExternalReference debug_last_step_action_address(Isolate* isolate);\n-\n-  // Used to check for suspended generator, used for stepping across await call.\n-  static ExternalReference debug_suspended_generator_address(Isolate* isolate);\n-\n-  // Used to store the frame pointer to drop to when restarting a frame.\n-  static ExternalReference debug_restart_fp_address(Isolate* isolate);\n-\n-#ifndef V8_INTERPRETED_REGEXP\n-  // C functions called from RegExp generated code.\n-\n-  // Function NativeRegExpMacroAssembler::CaseInsensitiveCompareUC16()\n-  static ExternalReference re_case_insensitive_compare_uc16(Isolate* isolate);\n-\n-  // Function RegExpMacroAssembler*::CheckStackGuardState()\n-  static ExternalReference re_check_stack_guard_state(Isolate* isolate);\n-\n-  // Function NativeRegExpMacroAssembler::GrowStack()\n-  static ExternalReference re_grow_stack(Isolate* isolate);\n-\n-  // byte NativeRegExpMacroAssembler::word_character_bitmap\n-  static ExternalReference re_word_character_map();\n-\n-#endif\n-\n-  // This lets you register a function that rewrites all external references.\n-  // Used by the ARM simulator to catch calls to external references.\n-  static void set_redirector(Isolate* isolate,\n-                             ExternalReferenceRedirector* redirector);\n-\n-  static ExternalReference stress_deopt_count(Isolate* isolate);\n-\n-  static ExternalReference force_slow_path(Isolate* isolate);\n-\n-  static ExternalReference fixed_typed_array_base_data_offset();\n-\n- private:\n-  explicit ExternalReference(void* address)\n-      : address_(address) {}\n-\n-  static void* Redirect(Isolate* isolate,\n-                        Address address_arg,\n-                        Type type = ExternalReference::BUILTIN_CALL) {\n-    ExternalReferenceRedirector* redirector =\n-        reinterpret_cast<ExternalReferenceRedirector*>(\n-            isolate->external_reference_redirector());\n-    void* address = reinterpret_cast<void*>(address_arg);\n-    void* answer =\n-        (redirector == nullptr) ? address : (*redirector)(address, type);\n-    return answer;\n-  }\n-\n-  void* address_;\n-};\n-\n-V8_EXPORT_PRIVATE bool operator==(ExternalReference, ExternalReference);\n-bool operator!=(ExternalReference, ExternalReference);\n-\n-size_t hash_value(ExternalReference);\n-\n-V8_EXPORT_PRIVATE std::ostream& operator<<(std::ostream&, ExternalReference);\n-\n // -----------------------------------------------------------------------------\n // Utility functions\n \n@@ -1091,14 +746,18 @@ double power_double_double(double x, double y);\n class ConstantPoolEntry {\n  public:\n   ConstantPoolEntry() {}\n-  ConstantPoolEntry(int position, intptr_t value, bool sharing_ok)\n+  ConstantPoolEntry(int position, intptr_t value, bool sharing_ok,\n+                    RelocInfo::Mode rmode = RelocInfo::NONE)\n       : position_(position),\n         merged_index_(sharing_ok ? SHARING_ALLOWED : SHARING_PROHIBITED),\n-        value_(value) {}\n-  ConstantPoolEntry(int position, Double value)\n+        value_(value),\n+        rmode_(rmode) {}\n+  ConstantPoolEntry(int position, Double value,\n+                    RelocInfo::Mode rmode = RelocInfo::NONE)\n       : position_(position),\n         merged_index_(SHARING_ALLOWED),\n-        value64_(value.AsUint64()) {}\n+        value64_(value.AsUint64()),\n+        rmode_(rmode) {}\n \n   int position() const { return position_; }\n   bool sharing_ok() const { return merged_index_ != SHARING_PROHIBITED; }\n@@ -1122,6 +781,7 @@ class ConstantPoolEntry {\n   }\n   intptr_t value() const { return value_; }\n   uint64_t value64() const { return value64_; }\n+  RelocInfo::Mode rmode() const { return rmode_; }\n \n   enum Type { INTPTR, DOUBLE, NUMBER_OF_TYPES };\n \n@@ -1138,6 +798,9 @@ class ConstantPoolEntry {\n     intptr_t value_;\n     uint64_t value64_;\n   };\n+  // TODO(leszeks): The way we use this, it could probably be packed into\n+  // merged_index_ if size is a concern.\n+  RelocInfo::Mode rmode_;\n   enum { SHARING_PROHIBITED = -2, SHARING_ALLOWED = -1 };\n };\n "
        },
        {
            "sha": "35432fa6476ea30abaae1fd759278c86c7fabb9d",
            "filename": "deps/v8/src/ast/ast-traversal-visitor.h",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fast-traversal-visitor.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fast-traversal-visitor.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast-traversal-visitor.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -517,6 +517,15 @@ void AstTraversalVisitor<Subclass>::VisitSpread(Spread* expr) {\n   RECURSE_EXPRESSION(Visit(expr->expression()));\n }\n \n+template <class Subclass>\n+void AstTraversalVisitor<Subclass>::VisitStoreInArrayLiteral(\n+    StoreInArrayLiteral* expr) {\n+  PROCESS_EXPRESSION(expr);\n+  RECURSE_EXPRESSION(Visit(expr->array()));\n+  RECURSE_EXPRESSION(Visit(expr->index()));\n+  RECURSE_EXPRESSION(Visit(expr->value()));\n+}\n+\n template <class Subclass>\n void AstTraversalVisitor<Subclass>::VisitEmptyParentheses(\n     EmptyParentheses* expr) {\n@@ -535,6 +544,15 @@ void AstTraversalVisitor<Subclass>::VisitGetTemplateObject(\n   PROCESS_EXPRESSION(expr);\n }\n \n+template <class Subclass>\n+void AstTraversalVisitor<Subclass>::VisitTemplateLiteral(\n+    TemplateLiteral* expr) {\n+  PROCESS_EXPRESSION(expr);\n+  for (Expression* sub : *expr->substitutions()) {\n+    RECURSE_EXPRESSION(Visit(sub));\n+  }\n+}\n+\n template <class Subclass>\n void AstTraversalVisitor<Subclass>::VisitImportCallExpression(\n     ImportCallExpression* expr) {"
        },
        {
            "sha": "a453455dd015b3c3514a469bbc520b101fc43b24",
            "filename": "deps/v8/src/ast/ast-value-factory.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast-value-factory.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -32,8 +32,8 @@\n \n #include \"src/base/hashmap.h\"\n #include \"src/conversions.h\"\n-#include \"src/factory.h\"\n #include \"src/globals.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n #include \"src/utils.h\"\n "
        },
        {
            "sha": "392af8a5013afbb7266dcf029bd2da64aa717403",
            "filename": "deps/v8/src/ast/ast.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fast.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fast.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -211,6 +211,23 @@ Assignment::Assignment(NodeType node_type, Token::Value op, Expression* target,\n   bit_field_ |= TokenField::encode(op);\n }\n \n+void FunctionLiteral::set_inferred_name(Handle<String> inferred_name) {\n+  DCHECK(!inferred_name.is_null());\n+  inferred_name_ = inferred_name;\n+  DCHECK(raw_inferred_name_ == nullptr || raw_inferred_name_->IsEmpty());\n+  raw_inferred_name_ = nullptr;\n+  scope()->set_has_inferred_function_name(true);\n+}\n+\n+void FunctionLiteral::set_raw_inferred_name(\n+    const AstConsString* raw_inferred_name) {\n+  DCHECK_NOT_NULL(raw_inferred_name);\n+  raw_inferred_name_ = raw_inferred_name;\n+  DCHECK(inferred_name_.is_null());\n+  inferred_name_ = Handle<String>();\n+  scope()->set_has_inferred_function_name(true);\n+}\n+\n bool FunctionLiteral::ShouldEagerCompile() const {\n   return scope()->ShouldEagerCompile();\n }"
        },
        {
            "sha": "b95d54abb9bd933556a5b2d9001aadfa688993ed",
            "filename": "deps/v8/src/ast/ast.h",
            "status": "modified",
            "additions": 70,
            "deletions": 22,
            "changes": 92,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fast.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fast.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fast.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -11,8 +11,8 @@\n #include \"src/ast/modules.h\"\n #include \"src/ast/variables.h\"\n #include \"src/bailout-reason.h\"\n-#include \"src/factory.h\"\n #include \"src/globals.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n #include \"src/label.h\"\n #include \"src/objects/literal-objects.h\"\n@@ -97,8 +97,10 @@ namespace internal {\n   V(ResolvedProperty)           \\\n   V(RewritableExpression)       \\\n   V(Spread)                     \\\n+  V(StoreInArrayLiteral)        \\\n   V(SuperCallReference)         \\\n   V(SuperPropertyReference)     \\\n+  V(TemplateLiteral)            \\\n   V(ThisFunction)               \\\n   V(Throw)                      \\\n   V(UnaryOperation)             \\\n@@ -1946,6 +1948,29 @@ class Spread final : public Expression {\n   Expression* expression_;\n };\n \n+// The StoreInArrayLiteral node corresponds to the StaInArrayLiteral bytecode.\n+// It is used in the rewriting of destructuring assignments that contain an\n+// array rest pattern.\n+class StoreInArrayLiteral final : public Expression {\n+ public:\n+  Expression* array() const { return array_; }\n+  Expression* index() const { return index_; }\n+  Expression* value() const { return value_; }\n+\n+ private:\n+  friend class AstNodeFactory;\n+\n+  StoreInArrayLiteral(Expression* array, Expression* index, Expression* value,\n+                      int position)\n+      : Expression(position, kStoreInArrayLiteral),\n+        array_(array),\n+        index_(index),\n+        value_(value) {}\n+\n+  Expression* array_;\n+  Expression* index_;\n+  Expression* value_;\n+};\n \n class Conditional final : public Expression {\n  public:\n@@ -2221,23 +2246,11 @@ class FunctionLiteral final : public Expression {\n     }\n     UNREACHABLE();\n   }\n-\n-  // Only one of {set_inferred_name, set_raw_inferred_name} should be called.\n-  void set_inferred_name(Handle<String> inferred_name) {\n-    DCHECK(!inferred_name.is_null());\n-    inferred_name_ = inferred_name;\n-    DCHECK(raw_inferred_name_ == nullptr || raw_inferred_name_->IsEmpty());\n-    raw_inferred_name_ = nullptr;\n-  }\n-\n   const AstConsString* raw_inferred_name() { return raw_inferred_name_; }\n \n-  void set_raw_inferred_name(const AstConsString* raw_inferred_name) {\n-    DCHECK_NOT_NULL(raw_inferred_name);\n-    raw_inferred_name_ = raw_inferred_name;\n-    DCHECK(inferred_name_.is_null());\n-    inferred_name_ = Handle<String>();\n-  }\n+  // Only one of {set_inferred_name, set_raw_inferred_name} should be called.\n+  void set_inferred_name(Handle<String> inferred_name);\n+  void set_raw_inferred_name(const AstConsString* raw_inferred_name);\n \n   bool pretenure() const { return Pretenure::decode(bit_field_); }\n   void set_pretenure() { bit_field_ = Pretenure::update(bit_field_, true); }\n@@ -2279,7 +2292,9 @@ class FunctionLiteral final : public Expression {\n   void set_suspend_count(int suspend_count) { suspend_count_ = suspend_count; }\n \n   int return_position() {\n-    return std::max(start_position(), end_position() - (has_braces_ ? 1 : 0));\n+    return std::max(\n+        start_position(),\n+        end_position() - (HasBracesField::decode(bit_field_) ? 1 : 0));\n   }\n \n   int function_literal_id() const { return function_literal_id_; }\n@@ -2315,19 +2330,19 @@ class FunctionLiteral final : public Expression {\n         function_length_(function_length),\n         function_token_position_(kNoSourcePosition),\n         suspend_count_(0),\n-        has_braces_(has_braces),\n+        function_literal_id_(function_literal_id),\n         raw_name_(name ? ast_value_factory->NewConsString(name) : nullptr),\n         scope_(scope),\n         body_(body),\n         raw_inferred_name_(ast_value_factory->empty_cons_string()),\n-        function_literal_id_(function_literal_id),\n         produced_preparsed_scope_data_(produced_preparsed_scope_data) {\n     bit_field_ |= FunctionTypeBits::encode(function_type) |\n                   Pretenure::encode(false) |\n                   HasDuplicateParameters::encode(has_duplicate_parameters ==\n                                                  kHasDuplicateParameters) |\n                   DontOptimizeReasonField::encode(BailoutReason::kNoReason) |\n-                  RequiresInstanceFieldsInitializer::encode(false);\n+                  RequiresInstanceFieldsInitializer::encode(false) |\n+                  HasBracesField::encode(has_braces);\n     if (eager_compile_hint == kShouldEagerCompile) SetShouldEagerCompile();\n     DCHECK_EQ(body == nullptr, expected_property_count < 0);\n   }\n@@ -2340,20 +2355,21 @@ class FunctionLiteral final : public Expression {\n       : public BitField<BailoutReason, HasDuplicateParameters::kNext, 8> {};\n   class RequiresInstanceFieldsInitializer\n       : public BitField<bool, DontOptimizeReasonField::kNext, 1> {};\n+  class HasBracesField\n+      : public BitField<bool, RequiresInstanceFieldsInitializer::kNext, 1> {};\n \n   int expected_property_count_;\n   int parameter_count_;\n   int function_length_;\n   int function_token_position_;\n   int suspend_count_;\n-  bool has_braces_;\n+  int function_literal_id_;\n \n   const AstConsString* raw_name_;\n   DeclarationScope* scope_;\n   ZoneList<Statement*>* body_;\n   const AstConsString* raw_inferred_name_;\n   Handle<String> inferred_name_;\n-  int function_literal_id_;\n   ProducedPreParsedScopeData* produced_preparsed_scope_data_;\n };\n \n@@ -2650,6 +2666,26 @@ class GetTemplateObject final : public Expression {\n   const ZoneList<const AstRawString*>* raw_strings_;\n };\n \n+class TemplateLiteral final : public Expression {\n+ public:\n+  using StringList = ZoneList<const AstRawString*>;\n+  using ExpressionList = ZoneList<Expression*>;\n+\n+  const StringList* string_parts() const { return string_parts_; }\n+  const ExpressionList* substitutions() const { return substitutions_; }\n+\n+ private:\n+  friend class AstNodeFactory;\n+  TemplateLiteral(const StringList* parts, const ExpressionList* substitutions,\n+                  int pos)\n+      : Expression(pos, kTemplateLiteral),\n+        string_parts_(parts),\n+        substitutions_(substitutions) {}\n+\n+  const StringList* string_parts_;\n+  const ExpressionList* substitutions_;\n+};\n+\n // ----------------------------------------------------------------------------\n // Basic visitor\n // Sub-class should parametrize AstVisitor with itself, e.g.:\n@@ -3067,6 +3103,12 @@ class AstNodeFactory final BASE_EMBEDDED {\n     return new (zone_) Spread(expression, pos, expr_pos);\n   }\n \n+  StoreInArrayLiteral* NewStoreInArrayLiteral(Expression* array,\n+                                              Expression* index,\n+                                              Expression* value, int pos) {\n+    return new (zone_) StoreInArrayLiteral(array, index, value, pos);\n+  }\n+\n   Conditional* NewConditional(Expression* condition,\n                               Expression* then_expression,\n                               Expression* else_expression,\n@@ -3226,6 +3268,12 @@ class AstNodeFactory final BASE_EMBEDDED {\n     return new (zone_) GetTemplateObject(cooked_strings, raw_strings, pos);\n   }\n \n+  TemplateLiteral* NewTemplateLiteral(\n+      const ZoneList<const AstRawString*>* string_parts,\n+      const ZoneList<Expression*>* substitutions, int pos) {\n+    return new (zone_) TemplateLiteral(string_parts, substitutions, pos);\n+  }\n+\n   ImportCallExpression* NewImportCallExpression(Expression* args, int pos) {\n     return new (zone_) ImportCallExpression(args, pos);\n   }"
        },
        {
            "sha": "f21759ab7da80e1a5555dd707ddbed8a36fec08e",
            "filename": "deps/v8/src/ast/compile-time-value.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fcompile-time-value.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fcompile-time-value.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fcompile-time-value.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -5,8 +5,8 @@\n #include \"src/ast/compile-time-value.h\"\n \n #include \"src/ast/ast.h\"\n-#include \"src/factory.h\"\n #include \"src/handles-inl.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n #include \"src/objects-inl.h\"\n "
        },
        {
            "sha": "2ca75e3c31e8eab740241894b671e4d7f68dc571",
            "filename": "deps/v8/src/ast/prettyprinter.cc",
            "status": "modified",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fprettyprinter.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -442,6 +442,11 @@ void CallPrinter::VisitSpread(Spread* node) {\n   Print(\")\");\n }\n \n+void CallPrinter::VisitStoreInArrayLiteral(StoreInArrayLiteral* node) {\n+  Find(node->array());\n+  Find(node->index());\n+  Find(node->value());\n+}\n \n void CallPrinter::VisitEmptyParentheses(EmptyParentheses* node) {\n   UNREACHABLE();\n@@ -466,6 +471,12 @@ void CallPrinter::VisitGetIterator(GetIterator* node) {\n \n void CallPrinter::VisitGetTemplateObject(GetTemplateObject* node) {}\n \n+void CallPrinter::VisitTemplateLiteral(TemplateLiteral* node) {\n+  for (Expression* substitution : *node->substitutions()) {\n+    Find(substitution, true);\n+  }\n+}\n+\n void CallPrinter::VisitImportCallExpression(ImportCallExpression* node) {\n   Print(\"ImportCall(\");\n   Find(node->argument(), true);\n@@ -1318,6 +1329,12 @@ void AstPrinter::VisitSpread(Spread* node) {\n   Visit(node->expression());\n }\n \n+void AstPrinter::VisitStoreInArrayLiteral(StoreInArrayLiteral* node) {\n+  IndentedScope indent(this, \"STORE IN ARRAY LITERAL\", node->position());\n+  PrintIndentedVisit(\"ARRAY\", node->array());\n+  PrintIndentedVisit(\"INDEX\", node->index());\n+  PrintIndentedVisit(\"VALUE\", node->value());\n+}\n \n void AstPrinter::VisitEmptyParentheses(EmptyParentheses* node) {\n   IndentedScope indent(this, \"()\", node->position());\n@@ -1332,6 +1349,19 @@ void AstPrinter::VisitGetTemplateObject(GetTemplateObject* node) {\n   IndentedScope indent(this, \"GET-TEMPLATE-OBJECT\", node->position());\n }\n \n+void AstPrinter::VisitTemplateLiteral(TemplateLiteral* node) {\n+  IndentedScope indent(this, \"TEMPLATE-LITERAL\", node->position());\n+  const AstRawString* string = node->string_parts()->first();\n+  if (!string->IsEmpty()) PrintLiteralIndented(\"SPAN\", string, true);\n+  for (int i = 0; i < node->substitutions()->length();) {\n+    PrintIndentedVisit(\"EXPR\", node->substitutions()->at(i++));\n+    if (i < node->string_parts()->length()) {\n+      string = node->string_parts()->at(i);\n+      if (!string->IsEmpty()) PrintLiteralIndented(\"SPAN\", string, true);\n+    }\n+  }\n+}\n+\n void AstPrinter::VisitImportCallExpression(ImportCallExpression* node) {\n   IndentedScope indent(this, \"IMPORT-CALL\", node->position());\n   Visit(node->argument());"
        },
        {
            "sha": "2c1355ead1416ba3595b65eba809dde2b20795a4",
            "filename": "deps/v8/src/ast/scopes.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fscopes.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -1492,6 +1492,7 @@ void DeclarationScope::ResetAfterPreparsing(AstValueFactory* ast_value_factory,\n   unresolved_ = nullptr;\n   sloppy_block_function_map_ = nullptr;\n   rare_data_ = nullptr;\n+  has_rest_ = false;\n \n   if (aborted) {\n     // Prepare scope for use in the outer zone."
        },
        {
            "sha": "c95e3a380a660c6aa54522d1be8f0331015ce13b",
            "filename": "deps/v8/src/ast/scopes.h",
            "status": "modified",
            "additions": 13,
            "deletions": 3,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fast%2Fscopes.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -590,8 +590,9 @@ class V8_EXPORT_PRIVATE Scope : public NON_EXPORTED_BASE(ZoneObject) {\n   Variable* LookupRecursive(ParseInfo* info, VariableProxy* proxy,\n                             Scope* outer_scope_end);\n   void ResolveTo(ParseInfo* info, VariableProxy* proxy, Variable* var);\n-  MUST_USE_RESULT bool ResolveVariable(ParseInfo* info, VariableProxy* proxy);\n-  MUST_USE_RESULT bool ResolveVariablesRecursively(ParseInfo* info);\n+  V8_WARN_UNUSED_RESULT bool ResolveVariable(ParseInfo* info,\n+                                             VariableProxy* proxy);\n+  V8_WARN_UNUSED_RESULT bool ResolveVariablesRecursively(ParseInfo* info);\n \n   // Finds free variables of this scope. This mutates the unresolved variables\n   // list along the way, so full resolution cannot be done afterwards.\n@@ -854,7 +855,7 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n   // Returns false if private fields can not be resolved and\n   // ParseInfo's pending_error_handler will be populated with an\n   // error. Otherwise, returns true.\n-  MUST_USE_RESULT\n+  V8_WARN_UNUSED_RESULT\n   static bool Analyze(ParseInfo* info);\n \n   // To be called during parsing. Do just enough scope analysis that we can\n@@ -901,6 +902,14 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n     is_skipped_function_ = is_skipped_function;\n   }\n \n+  bool has_inferred_function_name() const {\n+    return has_inferred_function_name_;\n+  }\n+  void set_has_inferred_function_name(bool value) {\n+    DCHECK(is_function_scope());\n+    has_inferred_function_name_ = value;\n+  }\n+\n   // Save data describing the context allocation of the variables in this scope\n   // and its subscopes (except scopes at the laziness boundary). The data is\n   // saved in produced_preparsed_scope_data_.\n@@ -952,6 +961,7 @@ class V8_EXPORT_PRIVATE DeclarationScope : public Scope {\n   bool is_being_lazily_parsed_ : 1;\n #endif\n   bool is_skipped_function_ : 1;\n+  bool has_inferred_function_name_ : 1;\n \n   // Parameter list in source order.\n   ZoneList<Variable*> params_;"
        },
        {
            "sha": "d29693e3f8a042c1ece9fc253099b82fca9387ad",
            "filename": "deps/v8/src/bailout-reason.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbailout-reason.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbailout-reason.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbailout-reason.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -32,18 +32,22 @@ namespace internal {\n   V(kInvalidHandleScopeLevel, \"Invalid HandleScope level\")                     \\\n   V(kInvalidJumpTableIndex, \"Invalid jump table index\")                        \\\n   V(kInvalidRegisterFileInGenerator, \"invalid register file in generator\")     \\\n+  V(kInvalidSharedFunctionInfoData, \"Invalid SharedFunctionInfo data\")         \\\n   V(kMissingBytecodeArray, \"Missing bytecode array from function\")             \\\n   V(kObjectNotTagged, \"The object is not tagged\")                              \\\n   V(kObjectTagged, \"The object is tagged\")                                     \\\n   V(kOffsetOutOfRange, \"Offset out of range\")                                  \\\n   V(kOperandIsASmi, \"Operand is a smi\")                                        \\\n   V(kOperandIsASmiAndNotABoundFunction,                                        \\\n     \"Operand is a smi and not a bound function\")                               \\\n+  V(kOperandIsASmiAndNotAConstructor,                                          \\\n+    \"Operand is a smi and not a constructor\")                                  \\\n   V(kOperandIsASmiAndNotAFixedArray, \"Operand is a smi and not a fixed array\") \\\n   V(kOperandIsASmiAndNotAFunction, \"Operand is a smi and not a function\")      \\\n   V(kOperandIsASmiAndNotAGeneratorObject,                                      \\\n     \"Operand is a smi and not a generator object\")                             \\\n   V(kOperandIsNotABoundFunction, \"Operand is not a bound function\")            \\\n+  V(kOperandIsNotAConstructor, \"Operand is not a constructor\")                 \\\n   V(kOperandIsNotAFixedArray, \"Operand is not a fixed array\")                  \\\n   V(kOperandIsNotAFunction, \"Operand is not a function\")                       \\\n   V(kOperandIsNotAGeneratorObject, \"Operand is not a generator object\")        \\"
        },
        {
            "sha": "0fcf8180696838d176838bd2240989ab495daf81",
            "filename": "deps/v8/src/base.isolate",
            "status": "removed",
            "additions": 0,
            "deletions": 39,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fsrc%2Fbase.isolate",
            "raw_url": "https://github.com/nodejs/node/raw/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fsrc%2Fbase.isolate",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase.isolate?ref=faf449ca0490f5371dc6cbbc94a87eb697b00fcc",
            "patch": "@@ -1,39 +0,0 @@\n-# Copyright 2015 the V8 project authors. All rights reserved.\n-# Use of this source code is governed by a BSD-style license that can be\n-# found in the LICENSE file.\n-{\n-  'includes': [\n-    '../third_party/icu/icu.isolate',\n-\n-    # MSVS runtime libraries.\n-    '../gni/msvs_dependencies.isolate',\n-  ],\n-  'conditions': [\n-    ['v8_use_snapshot==\"true\" and v8_use_external_startup_data==1', {\n-      'variables': {\n-        'files': [\n-          '<(PRODUCT_DIR)/natives_blob.bin',\n-          '<(PRODUCT_DIR)/snapshot_blob.bin',\n-        ],\n-      },\n-    }],\n-    ['tsan==1', {\n-      'variables': {\n-        'files': [\n-          '../tools/sanitizers/tsan_suppressions.txt',\n-        ],\n-      },\n-    }],\n-    ['asan==1 or cfi_vptr==1 or msan==1 or tsan==1 or ubsan_vptr==1', {\n-      'variables': {\n-        'files': [\n-          '../third_party/llvm-build/Release+Asserts/bin/llvm-symbolizer<(EXECUTABLE_SUFFIX)',\n-        ],\n-      },\n-    }],\n-    # Workaround for https://code.google.com/p/swarming/issues/detail?id=211\n-    ['asan==0 or cfi_vptr==0 or msan==0 or tsan==0 or ubsan_vptr==0 ', {\n-      'variables': {},\n-    }],\n-  ],\n-}"
        },
        {
            "sha": "75f89298f1d44db5b311d28c940b8abd3e40ab43",
            "filename": "deps/v8/src/base/compiler-specific.h",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fcompiler-specific.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fcompiler-specific.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fcompiler-specific.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -16,16 +16,6 @@\n #define ALLOW_UNUSED_TYPE\n #endif\n \n-\n-// Annotate a function indicating the caller must examine the return value.\n-// Use like:\n-//   int foo() WARN_UNUSED_RESULT;\n-#if V8_HAS_ATTRIBUTE_WARN_UNUSED_RESULT\n-#define WARN_UNUSED_RESULT __attribute__((warn_unused_result))\n-#else\n-#define WARN_UNUSED_RESULT /* NOT SUPPORTED */\n-#endif\n-\n // Tell the compiler a function is using a printf-style format string.\n // |format_param| is the one-based index of the format string parameter;\n // |dots_param| is the one-based index of the \"...\" parameter."
        },
        {
            "sha": "51b821bdd13a3ec3e295c47ce7aa36da599d07d6",
            "filename": "deps/v8/src/base/debug/stack_trace_posix.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_posix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_posix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_posix.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -72,6 +72,7 @@ const char kMangledSymbolPrefix[] = \"_Z\";\n const char kSymbolCharacters[] =\n     \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_\";\n \n+#if HAVE_EXECINFO_H\n // Demangles C++ symbols in the given text. Example:\n //\n // \"out/Debug/base_unittests(_ZN10StackTraceC1Ev+0x20) [0x817778c]\"\n@@ -81,7 +82,6 @@ void DemangleSymbols(std::string* text) {\n   // Note: code in this function is NOT async-signal safe (std::string uses\n   // malloc internally).\n \n-#if HAVE_EXECINFO_H\n \n   std::string::size_type search_from = 0;\n   while (search_from < text->size()) {\n@@ -117,9 +117,8 @@ void DemangleSymbols(std::string* text) {\n       search_from = mangled_start + 2;\n     }\n   }\n-\n-#endif  // HAVE_EXECINFO_H\n }\n+#endif  // HAVE_EXECINFO_H\n \n class BacktraceOutputHandler {\n  public:\n@@ -129,6 +128,7 @@ class BacktraceOutputHandler {\n   virtual ~BacktraceOutputHandler() {}\n };\n \n+#if HAVE_EXECINFO_H\n void OutputPointer(void* pointer, BacktraceOutputHandler* handler) {\n   // This should be more than enough to store a 64-bit number in hex:\n   // 16 hex digits + 1 for null-terminator.\n@@ -139,7 +139,6 @@ void OutputPointer(void* pointer, BacktraceOutputHandler* handler) {\n   handler->HandleOutput(buf);\n }\n \n-#if HAVE_EXECINFO_H\n void ProcessBacktrace(void* const* trace, size_t size,\n                       BacktraceOutputHandler* handler) {\n   // NOTE: This code MUST be async-signal safe (it's used by in-process"
        },
        {
            "sha": "6b2213123324113a0516e14a75eed5f7c246b70a",
            "filename": "deps/v8/src/base/debug/stack_trace_win.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_win.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_win.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fdebug%2Fstack_trace_win.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -163,24 +163,11 @@ void DisableSignalStackDump() {\n   g_dump_stack_in_signal_handler = false;\n }\n \n-// Disable optimizations for the StackTrace::StackTrace function. It is\n-// important to disable at least frame pointer optimization (\"y\"), since\n-// that breaks CaptureStackBackTrace() and prevents StackTrace from working\n-// in Release builds (it may still be janky if other frames are using FPO,\n-// but at least it will make it further).\n-#if defined(V8_CC_MSVC)\n-#pragma optimize(\"\", off)\n-#endif\n-\n StackTrace::StackTrace() {\n   // When walking our own stack, use CaptureStackBackTrace().\n   count_ = CaptureStackBackTrace(0, arraysize(trace_), trace_, nullptr);\n }\n \n-#if defined(V8_CC_MSVC)\n-#pragma optimize(\"\", on)\n-#endif\n-\n StackTrace::StackTrace(EXCEPTION_POINTERS* exception_pointers) {\n   InitTrace(exception_pointers->ContextRecord);\n }"
        },
        {
            "sha": "3bec12cb88eff2d38a54a0efd333ded896395b0f",
            "filename": "deps/v8/src/base/flags.h",
            "status": "modified",
            "additions": 43,
            "deletions": 43,
            "changes": 86,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fflags.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fflags.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fflags.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -75,49 +75,49 @@ class Flags final {\n   mask_type mask_;\n };\n \n-\n-#define DEFINE_OPERATORS_FOR_FLAGS(Type)                                      \\\n-  inline Type operator&(                                                      \\\n-      Type::flag_type lhs,                                                    \\\n-      Type::flag_type rhs)ALLOW_UNUSED_TYPE WARN_UNUSED_RESULT;               \\\n-  inline Type operator&(Type::flag_type lhs, Type::flag_type rhs) {           \\\n-    return Type(lhs) & rhs;                                                   \\\n-  }                                                                           \\\n-  inline Type operator&(Type::flag_type lhs,                                  \\\n-                        const Type& rhs)ALLOW_UNUSED_TYPE WARN_UNUSED_RESULT; \\\n-  inline Type operator&(Type::flag_type lhs, const Type& rhs) {               \\\n-    return rhs & lhs;                                                         \\\n-  }                                                                           \\\n-  inline void operator&(Type::flag_type lhs,                                  \\\n-                        Type::mask_type rhs)ALLOW_UNUSED_TYPE;                \\\n-  inline void operator&(Type::flag_type lhs, Type::mask_type rhs) {}          \\\n-  inline Type operator|(Type::flag_type lhs, Type::flag_type rhs)             \\\n-      ALLOW_UNUSED_TYPE WARN_UNUSED_RESULT;                                   \\\n-  inline Type operator|(Type::flag_type lhs, Type::flag_type rhs) {           \\\n-    return Type(lhs) | rhs;                                                   \\\n-  }                                                                           \\\n-  inline Type operator|(Type::flag_type lhs, const Type& rhs)                 \\\n-      ALLOW_UNUSED_TYPE WARN_UNUSED_RESULT;                                   \\\n-  inline Type operator|(Type::flag_type lhs, const Type& rhs) {               \\\n-    return rhs | lhs;                                                         \\\n-  }                                                                           \\\n-  inline void operator|(Type::flag_type lhs, Type::mask_type rhs)             \\\n-      ALLOW_UNUSED_TYPE;                                                      \\\n-  inline void operator|(Type::flag_type lhs, Type::mask_type rhs) {}          \\\n-  inline Type operator^(Type::flag_type lhs, Type::flag_type rhs)             \\\n-      ALLOW_UNUSED_TYPE WARN_UNUSED_RESULT;                                   \\\n-  inline Type operator^(Type::flag_type lhs, Type::flag_type rhs) {           \\\n-    return Type(lhs) ^ rhs;                                                   \\\n-  } inline Type                                                               \\\n-  operator^(Type::flag_type lhs, const Type& rhs)                             \\\n-      ALLOW_UNUSED_TYPE WARN_UNUSED_RESULT;                                   \\\n-  inline Type operator^(Type::flag_type lhs, const Type& rhs) {               \\\n-    return rhs ^ lhs;                                                         \\\n-  } inline void                                                               \\\n-  operator^(Type::flag_type lhs, Type::mask_type rhs) ALLOW_UNUSED_TYPE;      \\\n-  inline void operator^(Type::flag_type lhs, Type::mask_type rhs) {           \\\n-  } inline Type                                                               \\\n-  operator~(Type::flag_type val)ALLOW_UNUSED_TYPE;                            \\\n+#define DEFINE_OPERATORS_FOR_FLAGS(Type)                             \\\n+  inline Type operator&(                                             \\\n+      Type::flag_type lhs,                                           \\\n+      Type::flag_type rhs)ALLOW_UNUSED_TYPE V8_WARN_UNUSED_RESULT;   \\\n+  inline Type operator&(Type::flag_type lhs, Type::flag_type rhs) {  \\\n+    return Type(lhs) & rhs;                                          \\\n+  }                                                                  \\\n+  inline Type operator&(                                             \\\n+      Type::flag_type lhs,                                           \\\n+      const Type& rhs)ALLOW_UNUSED_TYPE V8_WARN_UNUSED_RESULT;       \\\n+  inline Type operator&(Type::flag_type lhs, const Type& rhs) {      \\\n+    return rhs & lhs;                                                \\\n+  }                                                                  \\\n+  inline void operator&(Type::flag_type lhs,                         \\\n+                        Type::mask_type rhs)ALLOW_UNUSED_TYPE;       \\\n+  inline void operator&(Type::flag_type lhs, Type::mask_type rhs) {} \\\n+  inline Type operator|(Type::flag_type lhs, Type::flag_type rhs)    \\\n+      ALLOW_UNUSED_TYPE V8_WARN_UNUSED_RESULT;                       \\\n+  inline Type operator|(Type::flag_type lhs, Type::flag_type rhs) {  \\\n+    return Type(lhs) | rhs;                                          \\\n+  }                                                                  \\\n+  inline Type operator|(Type::flag_type lhs, const Type& rhs)        \\\n+      ALLOW_UNUSED_TYPE V8_WARN_UNUSED_RESULT;                       \\\n+  inline Type operator|(Type::flag_type lhs, const Type& rhs) {      \\\n+    return rhs | lhs;                                                \\\n+  }                                                                  \\\n+  inline void operator|(Type::flag_type lhs, Type::mask_type rhs)    \\\n+      ALLOW_UNUSED_TYPE;                                             \\\n+  inline void operator|(Type::flag_type lhs, Type::mask_type rhs) {} \\\n+  inline Type operator^(Type::flag_type lhs, Type::flag_type rhs)    \\\n+      ALLOW_UNUSED_TYPE V8_WARN_UNUSED_RESULT;                       \\\n+  inline Type operator^(Type::flag_type lhs, Type::flag_type rhs) {  \\\n+    return Type(lhs) ^ rhs;                                          \\\n+  }                                                                  \\\n+  inline Type operator^(Type::flag_type lhs, const Type& rhs)        \\\n+      ALLOW_UNUSED_TYPE V8_WARN_UNUSED_RESULT;                       \\\n+  inline Type operator^(Type::flag_type lhs, const Type& rhs) {      \\\n+    return rhs ^ lhs;                                                \\\n+  }                                                                  \\\n+  inline void operator^(Type::flag_type lhs, Type::mask_type rhs)    \\\n+      ALLOW_UNUSED_TYPE;                                             \\\n+  inline void operator^(Type::flag_type lhs, Type::mask_type rhs) {} \\\n+  inline Type operator~(Type::flag_type val)ALLOW_UNUSED_TYPE;       \\\n   inline Type operator~(Type::flag_type val) { return ~Type(val); }\n \n }  // namespace base"
        },
        {
            "sha": "95b84cf328021b917078df8287fd32f34a79b475",
            "filename": "deps/v8/src/base/ieee754.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fieee754.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -159,11 +159,11 @@ typedef union {\n \n #define STRICT_ASSIGN(type, lval, rval) ((lval) = (rval))\n \n-int32_t __ieee754_rem_pio2(double x, double *y) WARN_UNUSED_RESULT;\n-double __kernel_cos(double x, double y) WARN_UNUSED_RESULT;\n-int __kernel_rem_pio2(double *x, double *y, int e0, int nx, int prec,\n-                      const int32_t *ipio2) WARN_UNUSED_RESULT;\n-double __kernel_sin(double x, double y, int iy) WARN_UNUSED_RESULT;\n+int32_t __ieee754_rem_pio2(double x, double* y) V8_WARN_UNUSED_RESULT;\n+double __kernel_cos(double x, double y) V8_WARN_UNUSED_RESULT;\n+int __kernel_rem_pio2(double* x, double* y, int e0, int nx, int prec,\n+                      const int32_t* ipio2) V8_WARN_UNUSED_RESULT;\n+double __kernel_sin(double x, double y, int iy) V8_WARN_UNUSED_RESULT;\n \n /* __ieee754_rem_pio2(x,y)\n  *"
        },
        {
            "sha": "baf6b12ccbbb28dfe9282defbd65b5a40cadee6b",
            "filename": "deps/v8/src/base/logging.h",
            "status": "modified",
            "additions": 16,
            "deletions": 2,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Flogging.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Flogging.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Flogging.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -106,11 +106,25 @@ V8_BASE_EXPORT void SetDcheckFunction(void (*dcheck_Function)(const char*, int,\n \n // Define PrintCheckOperand<T> for each T which defines operator<< for ostream.\n template <typename T>\n-typename std::enable_if<has_output_operator<T>::value>::type PrintCheckOperand(\n-    std::ostream& os, T val) {\n+typename std::enable_if<\n+    !std::is_function<typename std::remove_pointer<T>::type>::value &&\n+    has_output_operator<T>::value>::type\n+PrintCheckOperand(std::ostream& os, T val) {\n   os << std::forward<T>(val);\n }\n \n+// Provide an overload for functions and function pointers. Function pointers\n+// don't implicitly convert to void* but do implicitly convert to bool, so\n+// without this function pointers are always printed as 1 or 0. (MSVC isn't\n+// standards-conforming here and converts function pointers to regular\n+// pointers, so this is a no-op for MSVC.)\n+template <typename T>\n+typename std::enable_if<\n+    std::is_function<typename std::remove_pointer<T>::type>::value>::type\n+PrintCheckOperand(std::ostream& os, T val) {\n+  os << reinterpret_cast<const void*>(val);\n+}\n+\n // Define PrintCheckOperand<T> for enums which have no operator<<.\n template <typename T>\n typename std::enable_if<std::is_enum<T>::value &&"
        },
        {
            "sha": "db2f19459168f0d63bbf7ef85b785bbde15c30da",
            "filename": "deps/v8/src/base/macros.h",
            "status": "modified",
            "additions": 68,
            "deletions": 14,
            "changes": 82,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fmacros.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -150,11 +150,6 @@ V8_INLINE Dest bit_cast(Source const& source) {\n #define INLINE(declarator)    V8_INLINE declarator\n #define NO_INLINE(declarator) V8_NOINLINE declarator\n \n-\n-// Newly written code should use WARN_UNUSED_RESULT.\n-#define MUST_USE_RESULT WARN_UNUSED_RESULT\n-\n-\n // Define V8_USE_ADDRESS_SANITIZER macros.\n #if defined(__has_feature)\n #if __has_feature(address_sanitizer)\n@@ -196,12 +191,68 @@ V8_INLINE Dest bit_cast(Source const& source) {\n // TODO(all) Replace all uses of this macro with static_assert, remove macro.\n #define STATIC_ASSERT(test) static_assert(test, #test)\n \n-// TODO(rongjie) Remove this workaround once we require gcc >= 5.0\n-#if __GNUG__ && __GNUC__ < 5\n-#define IS_TRIVIALLY_COPYABLE(T) \\\n-  (__has_trivial_copy(T) && __has_trivial_destructor(T))\n+namespace v8 {\n+namespace base {\n+\n+// Note that some implementations of std::is_trivially_copyable mandate that at\n+// least one of the copy constructor, move constructor, copy assignment or move\n+// assignment is non-deleted, while others do not. Be aware that also\n+// base::is_trivially_copyable will differ for these cases.\n+template <typename T>\n+struct is_trivially_copyable {\n+#if V8_CC_MSVC\n+  // Unfortunately, MSVC 2015 is broken in that std::is_trivially_copyable can\n+  // be false even though it should be true according to the standard.\n+  // (status at 2018-02-26, observed on the msvc waterfall bot).\n+  // Interestingly, the lower-level primitives used below are working as\n+  // intended, so we reimplement this according to the standard.\n+  // See also https://developercommunity.visualstudio.com/content/problem/\n+  //          170883/msvc-type-traits-stdis-trivial-is-bugged.html.\n+  static constexpr bool value =\n+      // Copy constructor is trivial or deleted.\n+      (std::is_trivially_copy_constructible<T>::value ||\n+       !std::is_copy_constructible<T>::value) &&\n+      // Copy assignment operator is trivial or deleted.\n+      (std::is_trivially_copy_assignable<T>::value ||\n+       !std::is_copy_assignable<T>::value) &&\n+      // Move constructor is trivial or deleted.\n+      (std::is_trivially_move_constructible<T>::value ||\n+       !std::is_move_constructible<T>::value) &&\n+      // Move assignment operator is trivial or deleted.\n+      (std::is_trivially_move_assignable<T>::value ||\n+       !std::is_move_assignable<T>::value) &&\n+      // (Some implementations mandate that one of the above is non-deleted, but\n+      // the standard does not, so let's skip this check.)\n+      // Trivial non-deleted destructor.\n+      std::is_trivially_destructible<T>::value;\n+\n+#elif defined(__GNUC__) && __GNUC__ < 5\n+  // WARNING:\n+  // On older libstdc++ versions, there is no way to correctly implement\n+  // is_trivially_copyable. The workaround below is an approximation (neither\n+  // over- nor underapproximation). E.g. it wrongly returns true if the move\n+  // constructor is non-trivial, and it wrongly returns false if the copy\n+  // constructor is deleted, but copy assignment is trivial.\n+  // TODO(rongjie) Remove this workaround once we require gcc >= 5.0\n+  static constexpr bool value =\n+      __has_trivial_copy(T) && __has_trivial_destructor(T);\n+\n #else\n-#define IS_TRIVIALLY_COPYABLE(T) std::is_trivially_copyable<T>::value\n+  static constexpr bool value = std::is_trivially_copyable<T>::value;\n+#endif\n+};\n+#if defined(__GNUC__) && __GNUC__ < 5\n+// On older libstdc++ versions, base::is_trivially_copyable<T>::value is only an\n+// approximation (see above), so make ASSERT_{NOT_,}TRIVIALLY_COPYABLE a noop.\n+#define ASSERT_TRIVIALLY_COPYABLE(T) static_assert(true, \"check disabled\")\n+#define ASSERT_NOT_TRIVIALLY_COPYABLE(T) static_assert(true, \"check disabled\")\n+#else\n+#define ASSERT_TRIVIALLY_COPYABLE(T)                         \\\n+  static_assert(::v8::base::is_trivially_copyable<T>::value, \\\n+                #T \" should be trivially copyable\")\n+#define ASSERT_NOT_TRIVIALLY_COPYABLE(T)                      \\\n+  static_assert(!::v8::base::is_trivially_copyable<T>::value, \\\n+                #T \" should not be trivially copyable\")\n #endif\n \n // The USE(x, ...) template is used to silence C++ compiler warnings\n@@ -211,12 +262,15 @@ struct Use {\n   template <typename T>\n   Use(T&&) {}  // NOLINT(runtime/explicit)\n };\n-#define USE(...)                                         \\\n-  do {                                                   \\\n-    ::Use unused_tmp_array_for_use_macro[]{__VA_ARGS__}; \\\n-    (void)unused_tmp_array_for_use_macro;                \\\n+#define USE(...)                                                   \\\n+  do {                                                             \\\n+    ::v8::base::Use unused_tmp_array_for_use_macro[]{__VA_ARGS__}; \\\n+    (void)unused_tmp_array_for_use_macro;                          \\\n   } while (false)\n \n+}  // namespace base\n+}  // namespace v8\n+\n // Define our own macros for writing 64-bit constants.  This is less fragile\n // than defining __STDC_CONSTANT_MACROS before including <stdint.h>, and it\n // works on compilers that don't have it (like MSVC)."
        },
        {
            "sha": "af00c6e5d55faada5188f6475c9cbc1cc7b1ee76",
            "filename": "deps/v8/src/base/platform/condition-variable.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fcondition-variable.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fcondition-variable.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fcondition-variable.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -57,7 +57,7 @@ class V8_BASE_EXPORT ConditionVariable final {\n   // spuriously. When unblocked, regardless of the reason, the lock on the mutex\n   // is reacquired and |WaitFor()| exits. Returns true if the condition variable\n   // was notified prior to the timeout.\n-  bool WaitFor(Mutex* mutex, const TimeDelta& rel_time) WARN_UNUSED_RESULT;\n+  bool WaitFor(Mutex* mutex, const TimeDelta& rel_time) V8_WARN_UNUSED_RESULT;\n \n   // The implementation-defined native handle type.\n #if V8_OS_POSIX"
        },
        {
            "sha": "59b653d6cd90602aee15a63dcdc28c3c50e1365a",
            "filename": "deps/v8/src/base/platform/mutex.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fmutex.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fmutex.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fmutex.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -51,7 +51,7 @@ class V8_BASE_EXPORT Mutex final {\n \n   // Tries to lock the given mutex. Returns whether the mutex was\n   // successfully locked.\n-  bool TryLock() WARN_UNUSED_RESULT;\n+  bool TryLock() V8_WARN_UNUSED_RESULT;\n \n   // The implementation-defined native handle type.\n #if V8_OS_POSIX\n@@ -150,7 +150,7 @@ class V8_BASE_EXPORT RecursiveMutex final {\n \n   // Tries to lock the given mutex. Returns whether the mutex was\n   // successfully locked.\n-  bool TryLock() WARN_UNUSED_RESULT;\n+  bool TryLock() V8_WARN_UNUSED_RESULT;\n \n   // The implementation-defined native handle type.\n #if V8_OS_POSIX"
        },
        {
            "sha": "b4bba251aacd099c2d397ddd89f62ea222165298",
            "filename": "deps/v8/src/base/platform/platform-aix.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-aix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-aix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-aix.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -39,21 +39,21 @@ namespace base {\n class AIXTimezoneCache : public PosixTimezoneCache {\n   const char* LocalTimezone(double time) override;\n \n-  double LocalTimeOffset() override;\n+  double LocalTimeOffset(double time_ms, bool is_utc) override;\n \n   ~AIXTimezoneCache() override {}\n };\n \n-const char* AIXTimezoneCache::LocalTimezone(double time) {\n-  if (std::isnan(time)) return \"\";\n-  time_t tv = static_cast<time_t>(floor(time / msPerSecond));\n+const char* AIXTimezoneCache::LocalTimezone(double time_ms) {\n+  if (std::isnan(time_ms)) return \"\";\n+  time_t tv = static_cast<time_t>(floor(time_ms / msPerSecond));\n   struct tm tm;\n   struct tm* t = localtime_r(&tv, &tm);\n   if (nullptr == t) return \"\";\n   return tzname[0];  // The location of the timezone string on AIX.\n }\n \n-double AIXTimezoneCache::LocalTimeOffset() {\n+double AIXTimezoneCache::LocalTimeOffset(double time_ms, bool is_utc) {\n   // On AIX, struct tm does not contain a tm_gmtoff field.\n   time_t utc = time(nullptr);\n   DCHECK_NE(utc, -1);"
        },
        {
            "sha": "ddcdc1a2d38078e2666e0bcf8ccc087848a40cbf",
            "filename": "deps/v8/src/base/platform/platform-cygwin.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-cygwin.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-cygwin.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-cygwin.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -66,7 +66,7 @@ uint8_t* RandomizedVirtualAlloc(size_t size, DWORD flags, DWORD protect,\n class CygwinTimezoneCache : public PosixTimezoneCache {\n   const char* LocalTimezone(double time) override;\n \n-  double LocalTimeOffset() override;\n+  double LocalTimeOffset(double time_ms, bool is_utc) override;\n \n   ~CygwinTimezoneCache() override {}\n };\n@@ -80,7 +80,7 @@ const char* CygwinTimezoneCache::LocalTimezone(double time) {\n   return tzname[0];  // The location of the timezone string on Cygwin.\n }\n \n-double CygwinTimezoneCache::LocalTimeOffset() {\n+double LocalTimeOffset(double time_ms, bool is_utc) {\n   // On Cygwin, struct tm does not contain a tm_gmtoff field.\n   time_t utc = time(nullptr);\n   DCHECK_NE(utc, -1);"
        },
        {
            "sha": "28e6431bafa3d5de5d7db9b429ae2ebf45856c80",
            "filename": "deps/v8/src/base/platform/platform-posix-time.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -18,7 +18,9 @@ const char* PosixDefaultTimezoneCache::LocalTimezone(double time) {\n   return t->tm_zone;\n }\n \n-double PosixDefaultTimezoneCache::LocalTimeOffset() {\n+double PosixDefaultTimezoneCache::LocalTimeOffset(double time_ms, bool is_utc) {\n+  // Preserve the old behavior for non-ICU implementation by ignoring both\n+  // time_ms and is_utc.\n   time_t tv = time(nullptr);\n   struct tm tm;\n   struct tm* t = localtime_r(&tv, &tm);"
        },
        {
            "sha": "4d3373715bb1b939ef387ce1291fe1c044a473c0",
            "filename": "deps/v8/src/base/platform/platform-posix-time.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix-time.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -13,7 +13,7 @@ namespace base {\n class PosixDefaultTimezoneCache : public PosixTimezoneCache {\n  public:\n   const char* LocalTimezone(double time_ms) override;\n-  double LocalTimeOffset() override;\n+  double LocalTimeOffset(double time_ms, bool is_utc) override;\n \n   ~PosixDefaultTimezoneCache() override {}\n };"
        },
        {
            "sha": "fee67589b6b45b387ed3fbed1f89d4971dc77981",
            "filename": "deps/v8/src/base/platform/platform-posix.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-posix.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -491,6 +491,13 @@ int OS::GetCurrentThreadId() {\n #endif\n }\n \n+void OS::ExitProcess(int exit_code) {\n+  // Use _exit instead of exit to avoid races between isolate\n+  // threads and static destructors.\n+  fflush(stdout);\n+  fflush(stderr);\n+  _exit(exit_code);\n+}\n \n // ----------------------------------------------------------------------------\n // POSIX date/time support."
        },
        {
            "sha": "477149db1b72e170521be11cb27aa9c0ef96d825",
            "filename": "deps/v8/src/base/platform/platform-solaris.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-solaris.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-solaris.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-solaris.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -37,8 +37,7 @@ namespace base {\n class SolarisTimezoneCache : public PosixTimezoneCache {\n   const char* LocalTimezone(double time) override;\n \n-  double LocalTimeOffset() override;\n-\n+  double LocalTimeOffset(double time, bool is_utc) override;\n   ~SolarisTimezoneCache() override {}\n };\n \n@@ -51,7 +50,7 @@ const char* SolarisTimezoneCache::LocalTimezone(double time) {\n   return tzname[0];  // The location of the timezone string on Solaris.\n }\n \n-double SolarisTimezoneCache::LocalTimeOffset() {\n+double SolarisTimezoneCache::LocalTimeOffset(double time, bool is_utc) {\n   tzset();\n   return -static_cast<double>(timezone * msPerSecond);\n }"
        },
        {
            "sha": "d4aa44f8a7d96faeedf03fb82622239bc500a69a",
            "filename": "deps/v8/src/base/platform/platform-win32.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 2,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform-win32.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -27,6 +27,10 @@\n #include \"src/base/timezone-cache.h\"\n #include \"src/base/utils/random-number-generator.h\"\n \n+#if defined(_MSC_VER)\n+#include <crtdbg.h>  // NOLINT\n+#endif               // defined(_MSC_VER)\n+\n // Extra functions for MinGW. Most of these are the _s functions which are in\n // the Microsoft Visual Studio C++ CRT.\n #ifdef __MINGW32__\n@@ -111,7 +115,7 @@ class WindowsTimezoneCache : public TimezoneCache {\n \n   const char* LocalTimezone(double time) override;\n \n-  double LocalTimeOffset() override;\n+  double LocalTimeOffset(double time, bool is_utc) override;\n \n   double DaylightSavingsOffset(double time) override;\n \n@@ -462,7 +466,9 @@ const char* WindowsTimezoneCache::LocalTimezone(double time) {\n \n // Returns the local time offset in milliseconds east of UTC without\n // taking daylight savings time into account.\n-double WindowsTimezoneCache::LocalTimeOffset() {\n+double WindowsTimezoneCache::LocalTimeOffset(double time_ms, bool is_utc) {\n+  // Ignore is_utc and time_ms for now. That way, the behavior wouldn't\n+  // change with icu_timezone_data disabled.\n   // Use current time, rounded to the millisecond.\n   Win32Time t(OS::TimeCurrentMillis());\n   // Time::LocalOffset inlcudes any daylight savings offset, so subtract it.\n@@ -493,6 +499,13 @@ int OS::GetCurrentThreadId() {\n   return static_cast<int>(::GetCurrentThreadId());\n }\n \n+void OS::ExitProcess(int exit_code) {\n+  // Use TerminateProcess avoid races between isolate threads and\n+  // static destructors.\n+  fflush(stdout);\n+  fflush(stderr);\n+  TerminateProcess(GetCurrentProcess(), exit_code);\n+}\n \n // ----------------------------------------------------------------------------\n // Win32 console output.\n@@ -1239,6 +1252,24 @@ int OS::ActivationFrameAlignment() {\n #endif\n }\n \n+#if (defined(_WIN32) || defined(_WIN64))\n+void EnsureConsoleOutputWin32() {\n+  UINT new_flags =\n+      SEM_FAILCRITICALERRORS | SEM_NOGPFAULTERRORBOX | SEM_NOOPENFILEERRORBOX;\n+  UINT existing_flags = SetErrorMode(new_flags);\n+  SetErrorMode(existing_flags | new_flags);\n+#if defined(_MSC_VER)\n+  _CrtSetReportMode(_CRT_WARN, _CRTDBG_MODE_DEBUG | _CRTDBG_MODE_FILE);\n+  _CrtSetReportFile(_CRT_WARN, _CRTDBG_FILE_STDERR);\n+  _CrtSetReportMode(_CRT_ASSERT, _CRTDBG_MODE_DEBUG | _CRTDBG_MODE_FILE);\n+  _CrtSetReportFile(_CRT_ASSERT, _CRTDBG_FILE_STDERR);\n+  _CrtSetReportMode(_CRT_ERROR, _CRTDBG_MODE_DEBUG | _CRTDBG_MODE_FILE);\n+  _CrtSetReportFile(_CRT_ERROR, _CRTDBG_FILE_STDERR);\n+  _set_error_mode(_OUT_TO_STDERR);\n+#endif  // defined(_MSC_VER)\n+}\n+#endif  // (defined(_WIN32) || defined(_WIN64))\n+\n // ----------------------------------------------------------------------------\n // Win32 thread support.\n "
        },
        {
            "sha": "4fbc87c4aaa58ce648ff95b6010159ec3452d2f7",
            "filename": "deps/v8/src/base/platform/platform.h",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fplatform.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -245,6 +245,8 @@ class V8_BASE_EXPORT OS {\n \n   static int GetCurrentThreadId();\n \n+  static void ExitProcess(int exit_code);\n+\n  private:\n   // These classes use the private memory management API below.\n   friend class MemoryMappedFile;\n@@ -279,6 +281,18 @@ class V8_BASE_EXPORT OS {\n   DISALLOW_IMPLICIT_CONSTRUCTORS(OS);\n };\n \n+#if (defined(_WIN32) || defined(_WIN64))\n+V8_BASE_EXPORT void EnsureConsoleOutputWin32();\n+#endif  // (defined(_WIN32) || defined(_WIN64))\n+\n+inline void EnsureConsoleOutput() {\n+#if (defined(_WIN32) || defined(_WIN64))\n+  // Windows requires extra calls to send assert output to the console\n+  // rather than a dialog box.\n+  EnsureConsoleOutputWin32();\n+#endif  // (defined(_WIN32) || defined(_WIN64))\n+}\n+\n // ----------------------------------------------------------------------------\n // Thread\n //"
        },
        {
            "sha": "62c9c939884da03d6b618775d67297d48efb72a4",
            "filename": "deps/v8/src/base/platform/semaphore.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fsemaphore.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fsemaphore.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Fplatform%2Fsemaphore.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -47,7 +47,7 @@ class V8_BASE_EXPORT Semaphore final {\n   // Like Wait() but returns after rel_time time has passed. If the timeout\n   // happens the return value is false and the counter is unchanged. Otherwise\n   // the semaphore counter is decremented and true is returned.\n-  bool WaitFor(const TimeDelta& rel_time) WARN_UNUSED_RESULT;\n+  bool WaitFor(const TimeDelta& rel_time) V8_WARN_UNUSED_RESULT;\n \n #if V8_OS_MACOSX\n   typedef semaphore_t NativeHandle;"
        },
        {
            "sha": "07356346ec80eb6387d58281900c525f339e9efa",
            "filename": "deps/v8/src/base/template-utils.h",
            "status": "modified",
            "additions": 6,
            "deletions": 13,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Ftemplate-utils.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -79,20 +79,13 @@ struct pass_value_or_ref {\n                                          decay_t, const decay_t&>::type;\n };\n \n+// Uses expression SFINAE to detect whether using operator<< would work.\n+template <typename T, typename = void>\n+struct has_output_operator : std::false_type {};\n template <typename T>\n-struct has_output_operator {\n-  // This template is only instantiable if U provides operator<< with ostream.\n-  // Its return type is uint8_t.\n-  template <typename U>\n-  static auto __check_operator(U u)\n-      -> decltype(*(std::ostream*)nullptr << *u, uint8_t{0});\n-  // This is a fallback implementation, returning uint16_t. If the template\n-  // above is instantiable, is has precedence over this varargs function.\n-  static uint16_t __check_operator(...);\n-\n-  using ptr_t = typename std::add_pointer<T>::type;\n-  static constexpr bool value = sizeof(__check_operator(ptr_t{nullptr})) == 1;\n-};\n+struct has_output_operator<T, decltype(void(std::declval<std::ostream&>()\n+                                            << std::declval<T>()))>\n+    : std::true_type {};\n \n namespace detail {\n "
        },
        {
            "sha": "96ad7bb41f893645f64e3b2292a7a3912afb63a2",
            "filename": "deps/v8/src/base/timezone-cache.h",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Ftimezone-cache.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Ftimezone-cache.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Ftimezone-cache.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -20,10 +20,8 @@ class TimezoneCache {\n   // ES #sec-local-time-zone-adjustment\n   // Local Time Zone Adjustment\n   //\n-  // TODO(littledan): Make more accurate with another parameter along the\n-  // lines of this spec change:\n   // https://github.com/tc39/ecma262/pull/778\n-  virtual double LocalTimeOffset() = 0;\n+  virtual double LocalTimeOffset(double time_ms, bool is_utc) = 0;\n \n   // Called when the local timezone changes\n   virtual void Clear() = 0;"
        },
        {
            "sha": "b4b67970c7e477d2b378d1b63a63e5e251a87fd2",
            "filename": "deps/v8/src/base/utils/random-number-generator.h",
            "status": "modified",
            "additions": 9,
            "deletions": 12,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbase%2Futils%2Frandom-number-generator.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -50,48 +50,45 @@ class V8_BASE_EXPORT RandomNumberGenerator final {\n   // that one int value is pseudorandomly generated and returned.\n   // All 2^32 possible integer values are produced with (approximately) equal\n   // probability.\n-  V8_INLINE int NextInt() WARN_UNUSED_RESULT {\n-    return Next(32);\n-  }\n+  V8_INLINE int NextInt() V8_WARN_UNUSED_RESULT { return Next(32); }\n \n   // Returns a pseudorandom, uniformly distributed int value between 0\n   // (inclusive) and the specified max value (exclusive), drawn from this random\n   // number generator's sequence. The general contract of |NextInt(int)| is that\n   // one int value in the specified range is pseudorandomly generated and\n   // returned. All max possible int values are produced with (approximately)\n   // equal probability.\n-  int NextInt(int max) WARN_UNUSED_RESULT;\n+  int NextInt(int max) V8_WARN_UNUSED_RESULT;\n \n   // Returns the next pseudorandom, uniformly distributed boolean value from\n   // this random number generator's sequence. The general contract of\n   // |NextBoolean()| is that one boolean value is pseudorandomly generated and\n   // returned. The values true and false are produced with (approximately) equal\n   // probability.\n-  V8_INLINE bool NextBool() WARN_UNUSED_RESULT {\n-    return Next(1) != 0;\n-  }\n+  V8_INLINE bool NextBool() V8_WARN_UNUSED_RESULT { return Next(1) != 0; }\n \n   // Returns the next pseudorandom, uniformly distributed double value between\n   // 0.0 and 1.0 from this random number generator's sequence.\n   // The general contract of |NextDouble()| is that one double value, chosen\n   // (approximately) uniformly from the range 0.0 (inclusive) to 1.0\n   // (exclusive), is pseudorandomly generated and returned.\n-  double NextDouble() WARN_UNUSED_RESULT;\n+  double NextDouble() V8_WARN_UNUSED_RESULT;\n \n   // Returns the next pseudorandom, uniformly distributed int64 value from this\n   // random number generator's sequence. The general contract of |NextInt64()|\n   // is that one 64-bit int value is pseudorandomly generated and returned.\n   // All 2^64 possible integer values are produced with (approximately) equal\n   // probability.\n-  int64_t NextInt64() WARN_UNUSED_RESULT;\n+  int64_t NextInt64() V8_WARN_UNUSED_RESULT;\n \n   // Fills the elements of a specified array of bytes with random numbers.\n   void NextBytes(void* buffer, size_t buflen);\n \n   // Returns the next pseudorandom set of n unique uint64 values smaller than\n   // max.\n   // n must be less or equal to max.\n-  std::vector<uint64_t> NextSample(uint64_t max, size_t n) WARN_UNUSED_RESULT;\n+  std::vector<uint64_t> NextSample(uint64_t max,\n+                                   size_t n) V8_WARN_UNUSED_RESULT;\n \n   // Returns the next pseudorandom set of n unique uint64 values smaller than\n   // max.\n@@ -103,7 +100,7 @@ class V8_BASE_EXPORT RandomNumberGenerator final {\n   std::vector<uint64_t> NextSampleSlow(\n       uint64_t max, size_t n,\n       const std::unordered_set<uint64_t>& excluded =\n-          std::unordered_set<uint64_t>{}) WARN_UNUSED_RESULT;\n+          std::unordered_set<uint64_t>{}) V8_WARN_UNUSED_RESULT;\n \n   // Override the current ssed.\n   void SetSeed(int64_t seed);\n@@ -136,7 +133,7 @@ class V8_BASE_EXPORT RandomNumberGenerator final {\n   static const int64_t kAddend = 0xb;\n   static const int64_t kMask = V8_2PART_UINT64_C(0xffff, ffffffff);\n \n-  int Next(int bits) WARN_UNUSED_RESULT;\n+  int Next(int bits) V8_WARN_UNUSED_RESULT;\n \n   static uint64_t MurmurHash3(uint64_t);\n "
        },
        {
            "sha": "43c7527de9892aab77c9e3f38333c86f93cb8236",
            "filename": "deps/v8/src/bootstrapper.cc",
            "status": "modified",
            "additions": 120,
            "deletions": 164,
            "changes": 284,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbootstrapper.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -356,28 +356,21 @@ void Bootstrapper::DetachGlobal(Handle<Context> env) {\n \n namespace {\n \n-// Non-construct case.\n V8_NOINLINE Handle<SharedFunctionInfo> SimpleCreateSharedFunctionInfo(\n     Isolate* isolate, Builtins::Name builtin_id, Handle<String> name, int len) {\n-  Handle<Code> code = isolate->builtins()->builtin_handle(builtin_id);\n-  const bool kNotConstructor = false;\n-  Handle<SharedFunctionInfo> shared = isolate->factory()->NewSharedFunctionInfo(\n-      name, code, kNotConstructor, kNormalFunction, builtin_id);\n+  Handle<SharedFunctionInfo> shared =\n+      isolate->factory()->NewSharedFunctionInfoForBuiltin(name, builtin_id,\n+                                                          kNormalFunction);\n   shared->set_internal_formal_parameter_count(len);\n   shared->set_length(len);\n   return shared;\n }\n \n-// Construct case.\n-V8_NOINLINE Handle<SharedFunctionInfo>\n-SimpleCreateConstructorSharedFunctionInfo(Isolate* isolate,\n-                                          Builtins::Name builtin_id,\n-                                          Handle<String> name, int len) {\n-  Handle<Code> code = isolate->builtins()->builtin_handle(builtin_id);\n-  const bool kIsConstructor = true;\n-  Handle<SharedFunctionInfo> shared = isolate->factory()->NewSharedFunctionInfo(\n-      name, code, kIsConstructor, kNormalFunction, builtin_id);\n-  shared->SetConstructStub(*BUILTIN_CODE(isolate, JSBuiltinsConstructStub));\n+V8_NOINLINE Handle<SharedFunctionInfo> SimpleCreateBuiltinSharedFunctionInfo(\n+    Isolate* isolate, Builtins::Name builtin_id, Handle<String> name, int len) {\n+  Handle<SharedFunctionInfo> shared =\n+      isolate->factory()->NewSharedFunctionInfoForBuiltin(name, builtin_id,\n+                                                          kNormalFunction);\n   shared->set_internal_formal_parameter_count(len);\n   shared->set_length(len);\n   return shared;\n@@ -402,22 +395,21 @@ V8_NOINLINE Handle<JSFunction> CreateFunction(\n     Isolate* isolate, Handle<String> name, InstanceType type, int instance_size,\n     int inobject_properties, MaybeHandle<Object> maybe_prototype,\n     Builtins::Name builtin_id) {\n-  Handle<Code> code(isolate->builtins()->builtin(builtin_id));\n   Handle<Object> prototype;\n   Handle<JSFunction> result;\n \n   if (maybe_prototype.ToHandle(&prototype)) {\n     NewFunctionArgs args = NewFunctionArgs::ForBuiltinWithPrototype(\n-        name, code, prototype, type, instance_size, inobject_properties,\n-        builtin_id, IMMUTABLE);\n+        name, prototype, type, instance_size, inobject_properties, builtin_id,\n+        IMMUTABLE);\n \n     result = isolate->factory()->NewFunction(args);\n     // Make the JSFunction's prototype object fast.\n     JSObject::MakePrototypesFast(handle(result->prototype(), isolate),\n                                  kStartAtReceiver, isolate);\n   } else {\n     NewFunctionArgs args = NewFunctionArgs::ForBuiltinWithoutPrototype(\n-        name, code, builtin_id, LanguageMode::kStrict);\n+        name, builtin_id, LanguageMode::kStrict);\n     result = isolate->factory()->NewFunction(args);\n   }\n \n@@ -608,20 +600,18 @@ Handle<JSFunction> Genesis::CreateEmptyFunction(Isolate* isolate) {\n \n   // Allocate the empty function as the prototype for function according to\n   // ES#sec-properties-of-the-function-prototype-object\n-  Handle<Code> code(BUILTIN_CODE(isolate, EmptyFunction));\n-  NewFunctionArgs args =\n-      NewFunctionArgs::ForBuiltin(factory->empty_string(), code,\n-                                  empty_function_map, Builtins::kEmptyFunction);\n+  NewFunctionArgs args = NewFunctionArgs::ForBuiltin(\n+      factory->empty_string(), empty_function_map, Builtins::kEmptyFunction);\n   Handle<JSFunction> empty_function = factory->NewFunction(args);\n \n   // --- E m p t y ---\n   Handle<String> source = factory->NewStringFromStaticChars(\"() {}\");\n   Handle<Script> script = factory->NewScript(source);\n   script->set_type(Script::TYPE_NATIVE);\n-  Handle<FixedArray> infos = factory->NewFixedArray(2);\n+  Handle<WeakFixedArray> infos = factory->NewWeakFixedArray(2);\n   script->set_shared_function_infos(*infos);\n-  empty_function->shared()->set_start_position(0);\n-  empty_function->shared()->set_end_position(source->length());\n+  empty_function->shared()->set_raw_start_position(0);\n+  empty_function->shared()->set_raw_end_position(source->length());\n   empty_function->shared()->set_function_literal_id(1);\n   empty_function->shared()->DontAdaptArguments();\n   SharedFunctionInfo::SetScript(handle(empty_function->shared()), script);\n@@ -663,9 +653,8 @@ Handle<JSFunction> Genesis::GetThrowTypeErrorIntrinsic() {\n     return restricted_properties_thrower_;\n   }\n   Handle<String> name(factory()->empty_string());\n-  Handle<Code> code = BUILTIN_CODE(isolate(), StrictPoisonPillThrower);\n   NewFunctionArgs args = NewFunctionArgs::ForBuiltinWithoutPrototype(\n-      name, code, Builtins::kStrictPoisonPillThrower, i::LanguageMode::kStrict);\n+      name, Builtins::kStrictPoisonPillThrower, i::LanguageMode::kStrict);\n   Handle<JSFunction> function = factory()->NewFunction(args);\n   function->shared()->DontAdaptArguments();\n \n@@ -761,8 +750,6 @@ void Genesis::CreateObjectFunction(Handle<JSFunction> empty_function) {\n       inobject_properties, factory->null_value(), Builtins::kObjectConstructor);\n   object_fun->shared()->set_length(1);\n   object_fun->shared()->DontAdaptArguments();\n-  object_fun->shared()->SetConstructStub(\n-      *BUILTIN_CODE(isolate_, ObjectConstructor_ConstructStub));\n   native_context()->set_object_function(*object_fun);\n \n   {\n@@ -1228,11 +1215,10 @@ Handle<JSGlobalObject> Genesis::CreateNewGlobals(\n \n   if (js_global_object_template.is_null()) {\n     Handle<String> name(factory()->empty_string());\n-    Handle<Code> code = BUILTIN_CODE(isolate(), Illegal);\n     Handle<JSObject> prototype =\n         factory()->NewFunctionPrototype(isolate()->object_function());\n     NewFunctionArgs args = NewFunctionArgs::ForBuiltinWithPrototype(\n-        name, code, prototype, JS_GLOBAL_OBJECT_TYPE, JSGlobalObject::kSize, 0,\n+        name, prototype, JS_GLOBAL_OBJECT_TYPE, JSGlobalObject::kSize, 0,\n         Builtins::kIllegal, MUTABLE);\n     js_global_object_function = factory()->NewFunction(args);\n #ifdef DEBUG\n@@ -1261,9 +1247,8 @@ Handle<JSGlobalObject> Genesis::CreateNewGlobals(\n   Handle<JSFunction> global_proxy_function;\n   if (global_proxy_template.IsEmpty()) {\n     Handle<String> name(factory()->empty_string());\n-    Handle<Code> code = BUILTIN_CODE(isolate(), Illegal);\n     NewFunctionArgs args = NewFunctionArgs::ForBuiltinWithPrototype(\n-        name, code, factory()->the_hole_value(), JS_GLOBAL_PROXY_TYPE,\n+        name, factory()->the_hole_value(), JS_GLOBAL_PROXY_TYPE,\n         JSGlobalProxy::SizeWithEmbedderFields(0), 0, Builtins::kIllegal,\n         MUTABLE);\n     global_proxy_function = factory()->NewFunction(args);\n@@ -1343,8 +1328,6 @@ static void InstallError(Isolate* isolate, Handle<JSObject> global,\n       global, name, JS_ERROR_TYPE, JSObject::kHeaderSize, 0,\n       factory->the_hole_value(), Builtins::kErrorConstructor, DONT_ENUM);\n   error_fun->shared()->DontAdaptArguments();\n-  error_fun->shared()->SetConstructStub(\n-      *BUILTIN_CODE(isolate, ErrorConstructor));\n   error_fun->shared()->set_length(1);\n \n   if (context_index == Context::ERROR_FUNCTION_INDEX) {\n@@ -1399,11 +1382,9 @@ static void InstallError(Isolate* isolate, Handle<JSObject> global,\n namespace {\n \n void InstallMakeError(Isolate* isolate, int builtin_id, int context_index) {\n-  Handle<Code> code(isolate->builtins()->builtin(builtin_id));\n   NewFunctionArgs args = NewFunctionArgs::ForBuiltinWithPrototype(\n-      isolate->factory()->empty_string(), code,\n-      isolate->factory()->the_hole_value(), JS_OBJECT_TYPE,\n-      JSObject::kHeaderSize, 0, builtin_id, MUTABLE);\n+      isolate->factory()->empty_string(), isolate->factory()->the_hole_value(),\n+      JS_OBJECT_TYPE, JSObject::kHeaderSize, 0, builtin_id, MUTABLE);\n \n   Handle<JSFunction> function = isolate->factory()->NewFunction(args);\n   function->shared()->DontAdaptArguments();\n@@ -1553,8 +1534,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     // Function instances are sloppy by default.\n     function_fun->set_prototype_or_initial_map(*isolate->sloppy_function_map());\n     function_fun->shared()->DontAdaptArguments();\n-    function_fun->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, FunctionConstructor));\n     function_fun->shared()->set_length(1);\n     InstallWithIntrinsicDefaultProto(isolate, function_fun,\n                                      Context::FUNCTION_FUNCTION_INDEX);\n@@ -1626,6 +1605,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     PropertyAttributes attribs = static_cast<PropertyAttributes>(\n         DONT_ENUM | DONT_DELETE);\n \n+    STATIC_ASSERT(JSArray::kLengthDescriptorIndex == 0);\n     {  // Add length.\n       Descriptor d = Descriptor::AccessorConstant(\n           factory->length_string(), factory->array_length_accessor(), attribs);\n@@ -1638,9 +1618,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n \n     // Cache the array maps, needed by ArrayConstructorStub\n     CacheInitialJSArrayMaps(native_context(), initial_map);\n-    ArrayConstructorStub array_constructor_stub(isolate);\n-    Handle<Code> code = array_constructor_stub.GetCode();\n-    array_function->shared()->SetConstructStub(*code);\n \n     // Set up %ArrayPrototype%.\n     // The %ArrayPrototype% has TERMINAL_FAST_ELEMENTS_KIND in order to ensure\n@@ -1673,12 +1650,8 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     SimpleInstallFunction(proto, \"shift\", Builtins::kArrayPrototypeShift, 0,\n                           false);\n     SimpleInstallFunction(proto, \"unshift\", Builtins::kArrayUnshift, 1, false);\n-    if (FLAG_enable_experimental_builtins) {\n-      SimpleInstallFunction(proto, \"slice\", Builtins::kArrayPrototypeSlice, 2,\n-                            false);\n-    } else {\n-      SimpleInstallFunction(proto, \"slice\", Builtins::kArraySlice, 2, false);\n-    }\n+    SimpleInstallFunction(proto, \"slice\", Builtins::kArrayPrototypeSlice, 2,\n+                          false);\n     SimpleInstallFunction(proto, \"splice\", Builtins::kArraySplice, 2, false);\n     SimpleInstallFunction(proto, \"includes\", Builtins::kArrayIncludes, 1,\n                           false);\n@@ -1717,73 +1690,16 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                           Builtins::kArrayIteratorPrototypeNext, 0, true,\n                           kArrayIteratorNext);\n \n-    Handle<JSFunction> array_iterator_function = CreateFunction(\n-        isolate, factory->ArrayIterator_string(),\n-        JS_FAST_ARRAY_VALUE_ITERATOR_TYPE, JSArrayIterator::kSize, 0,\n-        array_iterator_prototype, Builtins::kIllegal);\n+    Handle<JSFunction> array_iterator_function =\n+        CreateFunction(isolate, factory->ArrayIterator_string(),\n+                       JS_ARRAY_ITERATOR_TYPE, JSArrayIterator::kSize, 0,\n+                       array_iterator_prototype, Builtins::kIllegal);\n     array_iterator_function->shared()->set_native(false);\n \n+    native_context()->set_initial_array_iterator_map(\n+        array_iterator_function->initial_map());\n     native_context()->set_initial_array_iterator_prototype(\n         *array_iterator_prototype);\n-    native_context()->set_initial_array_iterator_prototype_map(\n-        array_iterator_prototype->map());\n-\n-    Handle<Map> initial_map(array_iterator_function->initial_map(), isolate);\n-\n-#define ARRAY_ITERATOR_LIST(V)                                              \\\n-  V(TYPED_ARRAY, KEY, typed_array, key)                                     \\\n-  V(FAST_ARRAY, KEY, fast_array, key)                                       \\\n-  V(GENERIC_ARRAY, KEY, array, key)                                         \\\n-  V(UINT8_ARRAY, KEY_VALUE, uint8_array, key_value)                         \\\n-  V(INT8_ARRAY, KEY_VALUE, int8_array, key_value)                           \\\n-  V(UINT16_ARRAY, KEY_VALUE, uint16_array, key_value)                       \\\n-  V(INT16_ARRAY, KEY_VALUE, int16_array, key_value)                         \\\n-  V(UINT32_ARRAY, KEY_VALUE, uint32_array, key_value)                       \\\n-  V(INT32_ARRAY, KEY_VALUE, int32_array, key_value)                         \\\n-  V(FLOAT32_ARRAY, KEY_VALUE, float32_array, key_value)                     \\\n-  V(FLOAT64_ARRAY, KEY_VALUE, float64_array, key_value)                     \\\n-  V(UINT8_CLAMPED_ARRAY, KEY_VALUE, uint8_clamped_array, key_value)         \\\n-  V(BIGUINT64_ARRAY, KEY_VALUE, biguint64_array, key_value)                 \\\n-  V(BIGINT64_ARRAY, KEY_VALUE, bigint64_array, key_value)                   \\\n-  V(FAST_SMI_ARRAY, KEY_VALUE, fast_smi_array, key_value)                   \\\n-  V(FAST_HOLEY_SMI_ARRAY, KEY_VALUE, fast_holey_smi_array, key_value)       \\\n-  V(FAST_ARRAY, KEY_VALUE, fast_array, key_value)                           \\\n-  V(FAST_HOLEY_ARRAY, KEY_VALUE, fast_holey_array, key_value)               \\\n-  V(FAST_DOUBLE_ARRAY, KEY_VALUE, fast_double_array, key_value)             \\\n-  V(FAST_HOLEY_DOUBLE_ARRAY, KEY_VALUE, fast_holey_double_array, key_value) \\\n-  V(GENERIC_ARRAY, KEY_VALUE, array, key_value)                             \\\n-  V(UINT8_ARRAY, VALUE, uint8_array, value)                                 \\\n-  V(INT8_ARRAY, VALUE, int8_array, value)                                   \\\n-  V(UINT16_ARRAY, VALUE, uint16_array, value)                               \\\n-  V(INT16_ARRAY, VALUE, int16_array, value)                                 \\\n-  V(UINT32_ARRAY, VALUE, uint32_array, value)                               \\\n-  V(INT32_ARRAY, VALUE, int32_array, value)                                 \\\n-  V(FLOAT32_ARRAY, VALUE, float32_array, value)                             \\\n-  V(FLOAT64_ARRAY, VALUE, float64_array, value)                             \\\n-  V(UINT8_CLAMPED_ARRAY, VALUE, uint8_clamped_array, value)                 \\\n-  V(BIGUINT64_ARRAY, VALUE, biguint64_array, value)                         \\\n-  V(BIGINT64_ARRAY, VALUE, bigint64_array, value)                           \\\n-  V(FAST_SMI_ARRAY, VALUE, fast_smi_array, value)                           \\\n-  V(FAST_HOLEY_SMI_ARRAY, VALUE, fast_holey_smi_array, value)               \\\n-  V(FAST_ARRAY, VALUE, fast_array, value)                                   \\\n-  V(FAST_HOLEY_ARRAY, VALUE, fast_holey_array, value)                       \\\n-  V(FAST_DOUBLE_ARRAY, VALUE, fast_double_array, value)                     \\\n-  V(FAST_HOLEY_DOUBLE_ARRAY, VALUE, fast_holey_double_array, value)         \\\n-  V(GENERIC_ARRAY, VALUE, array, value)\n-\n-#define CREATE_ARRAY_ITERATOR_MAP(PREFIX, SUFFIX, prefix, suffix)           \\\n-  do {                                                                      \\\n-    const InstanceType type = JS_##PREFIX##_##SUFFIX##_ITERATOR_TYPE;       \\\n-    Handle<Map> map =                                                       \\\n-        Map::Copy(initial_map, \"JS_\" #PREFIX \"_\" #SUFFIX \"_ITERATOR_TYPE\"); \\\n-    map->set_instance_type(type);                                           \\\n-    native_context()->set_##prefix##_##suffix##_iterator_map(*map);         \\\n-  } while (0);\n-\n-    ARRAY_ITERATOR_LIST(CREATE_ARRAY_ITERATOR_MAP)\n-\n-#undef CREATE_ARRAY_ITERATOR_MAP\n-#undef ARRAY_ITERATOR_LIST\n   }\n \n   {  // --- N u m b e r ---\n@@ -1792,8 +1708,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         isolate->initial_object_prototype(), Builtins::kNumberConstructor);\n     number_fun->shared()->set_builtin_function_id(kNumberConstructor);\n     number_fun->shared()->DontAdaptArguments();\n-    number_fun->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, NumberConstructor_ConstructStub));\n     number_fun->shared()->set_length(1);\n     InstallWithIntrinsicDefaultProto(isolate, number_fun,\n                                      Context::NUMBER_FUNCTION_INDEX);\n@@ -1908,8 +1822,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         global, \"Boolean\", JS_VALUE_TYPE, JSValue::kSize, 0,\n         isolate->initial_object_prototype(), Builtins::kBooleanConstructor);\n     boolean_fun->shared()->DontAdaptArguments();\n-    boolean_fun->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, BooleanConstructor_ConstructStub));\n     boolean_fun->shared()->set_length(1);\n     InstallWithIntrinsicDefaultProto(isolate, boolean_fun,\n                                      Context::BOOLEAN_FUNCTION_INDEX);\n@@ -1936,8 +1848,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         global, \"String\", JS_VALUE_TYPE, JSValue::kSize, 0,\n         isolate->initial_object_prototype(), Builtins::kStringConstructor);\n     string_fun->shared()->set_builtin_function_id(kStringConstructor);\n-    string_fun->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, StringConstructor_ConstructStub));\n     string_fun->shared()->DontAdaptArguments();\n     string_fun->shared()->set_length(1);\n     InstallWithIntrinsicDefaultProto(isolate, string_fun,\n@@ -2118,8 +2028,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         global, \"Symbol\", JS_VALUE_TYPE, JSValue::kSize, 0,\n         factory->the_hole_value(), Builtins::kSymbolConstructor);\n     symbol_fun->shared()->set_builtin_function_id(kSymbolConstructor);\n-    symbol_fun->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, SymbolConstructor_ConstructStub));\n     symbol_fun->shared()->set_length(0);\n     symbol_fun->shared()->DontAdaptArguments();\n     native_context()->set_symbol_function(*symbol_fun);\n@@ -2186,8 +2094,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                         factory->the_hole_value(), Builtins::kDateConstructor);\n     InstallWithIntrinsicDefaultProto(isolate, date_fun,\n                                      Context::DATE_FUNCTION_INDEX);\n-    date_fun->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, DateConstructor_ConstructStub));\n     date_fun->shared()->set_length(7);\n     date_fun->shared()->DontAdaptArguments();\n \n@@ -2311,7 +2217,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n   }\n \n   {\n-    Handle<SharedFunctionInfo> info = SimpleCreateConstructorSharedFunctionInfo(\n+    Handle<SharedFunctionInfo> info = SimpleCreateBuiltinSharedFunctionInfo(\n         isolate, Builtins::kPromiseGetCapabilitiesExecutor,\n         factory->empty_string(), 2);\n     native_context()->set_promise_get_capabilities_executor_shared_fun(*info);\n@@ -2325,7 +2231,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                                      Context::PROMISE_FUNCTION_INDEX);\n \n     Handle<SharedFunctionInfo> shared(promise_fun->shared(), isolate);\n-    shared->SetConstructStub(*BUILTIN_CODE(isolate, JSBuiltinsConstructStub));\n     shared->set_internal_formal_parameter_count(1);\n     shared->set_length(1);\n \n@@ -2422,7 +2327,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                                      Context::REGEXP_FUNCTION_INDEX);\n \n     Handle<SharedFunctionInfo> shared(regexp_fun->shared(), isolate);\n-    shared->SetConstructStub(*BUILTIN_CODE(isolate, JSBuiltinsConstructStub));\n     shared->set_internal_formal_parameter_count(2);\n     shared->set_length(2);\n \n@@ -2649,8 +2553,7 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n   }\n \n   // Initialize the embedder data slot.\n-  Handle<FixedArray> embedder_data = factory->NewFixedArray(3);\n-  native_context()->set_embedder_data(*embedder_data);\n+  native_context()->set_embedder_data(*factory->empty_fixed_array());\n \n   {  // -- J S O N\n     Handle<String> name = factory->InternalizeUtf8String(\"JSON\");\n@@ -2927,11 +2830,12 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n   }\n \n   {  // -- T y p e d A r r a y\n-    Handle<JSFunction> typed_array_fun =\n-        CreateFunction(isolate, factory->InternalizeUtf8String(\"TypedArray\"),\n-                       JS_TYPED_ARRAY_TYPE, JSTypedArray::kSize, 0,\n-                       factory->the_hole_value(), Builtins::kIllegal);\n+    Handle<JSFunction> typed_array_fun = CreateFunction(\n+        isolate, factory->InternalizeUtf8String(\"TypedArray\"),\n+        JS_TYPED_ARRAY_TYPE, JSTypedArray::kSize, 0, factory->the_hole_value(),\n+        Builtins::kTypedArrayBaseConstructor);\n     typed_array_fun->shared()->set_native(false);\n+    typed_array_fun->shared()->set_length(0);\n     InstallSpeciesGetter(typed_array_fun);\n     native_context()->set_typed_array_function(*typed_array_fun);\n \n@@ -3034,8 +2938,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n         Builtins::kDataViewConstructor);\n     InstallWithIntrinsicDefaultProto(isolate, data_view_fun,\n                                      Context::DATA_VIEW_FUN_INDEX);\n-    data_view_fun->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, DataViewConstructor_ConstructStub));\n     data_view_fun->shared()->set_length(3);\n     data_view_fun->shared()->DontAdaptArguments();\n \n@@ -3114,7 +3016,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                                      Context::JS_MAP_FUN_INDEX);\n \n     Handle<SharedFunctionInfo> shared(js_map_fun->shared(), isolate);\n-    shared->SetConstructStub(*BUILTIN_CODE(isolate, JSBuiltinsConstructStub));\n     shared->DontAdaptArguments();\n     shared->set_length(0);\n \n@@ -3172,7 +3073,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                                      Context::JS_SET_FUN_INDEX);\n \n     Handle<SharedFunctionInfo> shared(js_set_fun->shared(), isolate);\n-    shared->SetConstructStub(*BUILTIN_CODE(isolate, JSBuiltinsConstructStub));\n     shared->DontAdaptArguments();\n     shared->set_length(0);\n \n@@ -3268,7 +3168,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                                      Context::JS_WEAK_MAP_FUN_INDEX);\n \n     Handle<SharedFunctionInfo> shared(cons->shared(), isolate);\n-    shared->SetConstructStub(*BUILTIN_CODE(isolate, JSBuiltinsConstructStub));\n     shared->DontAdaptArguments();\n     shared->set_length(0);\n \n@@ -3299,7 +3198,6 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n                                      Context::JS_WEAK_SET_FUN_INDEX);\n \n     Handle<SharedFunctionInfo> shared(cons->shared(), isolate);\n-    shared->SetConstructStub(*BUILTIN_CODE(isolate, JSBuiltinsConstructStub));\n     shared->DontAdaptArguments();\n     shared->set_length(0);\n \n@@ -3340,17 +3238,14 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n     proxy_function_map->SetInObjectUnusedPropertyFields(unused_property_fields);\n \n     Handle<String> name = factory->Proxy_string();\n-    Handle<Code> code(BUILTIN_CODE(isolate, ProxyConstructor));\n \n     NewFunctionArgs args = NewFunctionArgs::ForBuiltin(\n-        name, code, proxy_function_map, Builtins::kProxyConstructor);\n+        name, proxy_function_map, Builtins::kProxyConstructor);\n     Handle<JSFunction> proxy_function = factory->NewFunction(args);\n \n     JSFunction::SetInitialMap(proxy_function, isolate->proxy_map(),\n                               factory->null_value());\n \n-    proxy_function->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, ProxyConstructor_ConstructStub));\n     proxy_function->shared()->set_internal_formal_parameter_count(2);\n     proxy_function->shared()->set_length(2);\n \n@@ -3447,9 +3342,9 @@ void Genesis::InitializeGlobal(Handle<JSGlobalObject> global_object,\n   {  // --- sloppy arguments map\n     Handle<String> arguments_string = factory->Arguments_string();\n     NewFunctionArgs args = NewFunctionArgs::ForBuiltinWithPrototype(\n-        arguments_string, BUILTIN_CODE(isolate, Illegal),\n-        isolate->initial_object_prototype(), JS_ARGUMENTS_TYPE,\n-        JSSloppyArgumentsObject::kSize, 2, Builtins::kIllegal, MUTABLE);\n+        arguments_string, isolate->initial_object_prototype(),\n+        JS_ARGUMENTS_TYPE, JSSloppyArgumentsObject::kSize, 2,\n+        Builtins::kIllegal, MUTABLE);\n     Handle<JSFunction> function = factory->NewFunction(args);\n     Handle<Map> map(function->initial_map());\n \n@@ -3577,8 +3472,6 @@ Handle<JSFunction> Genesis::InstallTypedArray(const char* name,\n \n   result->shared()->DontAdaptArguments();\n   result->shared()->set_length(3);\n-  result->shared()->SetConstructStub(\n-      *BUILTIN_CODE(isolate_, TypedArrayConstructor_ConstructStub));\n \n   CHECK(JSObject::SetPrototype(result, typed_array_function, false, kDontThrow)\n             .FromJust());\n@@ -3853,8 +3746,6 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n     generator_function_function->set_prototype_or_initial_map(\n         native_context->generator_function_map());\n     generator_function_function->shared()->DontAdaptArguments();\n-    generator_function_function->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, GeneratorFunctionConstructor));\n     generator_function_function->shared()->set_length(1);\n     InstallWithIntrinsicDefaultProto(\n         isolate, generator_function_function,\n@@ -3883,8 +3774,6 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n     async_generator_function_function->set_prototype_or_initial_map(\n         native_context->async_generator_function_map());\n     async_generator_function_function->shared()->DontAdaptArguments();\n-    async_generator_function_function->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, AsyncGeneratorFunctionConstructor));\n     async_generator_function_function->shared()->set_length(1);\n     InstallWithIntrinsicDefaultProto(\n         isolate, async_generator_function_function,\n@@ -4096,8 +3985,6 @@ void Bootstrapper::ExportFromRuntime(Isolate* isolate,\n     async_function_constructor->set_prototype_or_initial_map(\n         native_context->async_function_map());\n     async_function_constructor->shared()->DontAdaptArguments();\n-    async_function_constructor->shared()->SetConstructStub(\n-        *BUILTIN_CODE(isolate, AsyncFunctionConstructor));\n     async_function_constructor->shared()->set_length(1);\n     native_context->set_async_function_constructor(*async_function_constructor);\n     JSObject::ForceSetPrototype(async_function_constructor,\n@@ -4214,6 +4101,9 @@ EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_import_meta)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_restrict_constructor_return)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_optional_catch_binding)\n EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_subsume_json)\n+EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE(harmony_numeric_separator)\n+\n+#undef EMPTY_INITIALIZE_GLOBAL_FOR_FEATURE\n \n void InstallPublicSymbol(Factory* factory, Handle<Context> native_context,\n                          const char* name, Handle<Symbol> value) {\n@@ -4269,7 +4159,7 @@ void Genesis::InitializeGlobal_harmony_string_trimming() {\n             .ToHandleChecked());\n     JSObject::AddProperty(string_prototype, trim_start_name, trim_left_fun,\n                           DONT_ENUM);\n-    trim_left_fun->shared()->set_name(*trim_start_name);\n+    trim_left_fun->shared()->SetName(*trim_start_name);\n   }\n \n   {\n@@ -4281,7 +4171,7 @@ void Genesis::InitializeGlobal_harmony_string_trimming() {\n             .ToHandleChecked());\n     JSObject::AddProperty(string_prototype, trim_end_name, trim_right_fun,\n                           DONT_ENUM);\n-    trim_right_fun->shared()->set_name(*trim_end_name);\n+    trim_right_fun->shared()->SetName(*trim_end_name);\n   }\n }\n \n@@ -4306,6 +4196,75 @@ void Genesis::InitializeGlobal_harmony_array_prototype_values() {\n                         NONE);\n }\n \n+void Genesis::InitializeGlobal_harmony_array_flatten() {\n+  if (!FLAG_harmony_array_flatten) return;\n+  Handle<JSFunction> array_constructor(native_context()->array_function());\n+  Handle<JSObject> array_prototype(\n+      JSObject::cast(array_constructor->instance_prototype()));\n+  SimpleInstallFunction(array_prototype, \"flatten\",\n+                        Builtins::kArrayPrototypeFlatten, 0, false, DONT_ENUM);\n+  SimpleInstallFunction(array_prototype, \"flatMap\",\n+                        Builtins::kArrayPrototypeFlatMap, 1, false, DONT_ENUM);\n+}\n+\n+void Genesis::InitializeGlobal_harmony_string_matchall() {\n+  if (!FLAG_harmony_string_matchall) return;\n+\n+  {  // String.prototype.matchAll\n+    Handle<JSFunction> string_fun(native_context()->string_function());\n+    Handle<JSObject> string_prototype(\n+        JSObject::cast(string_fun->instance_prototype()));\n+\n+    SimpleInstallFunction(string_prototype, \"matchAll\",\n+                          Builtins::kStringPrototypeMatchAll, 1, true);\n+  }\n+\n+  {  // RegExp.prototype[@@matchAll]\n+    Handle<JSFunction> regexp_fun(native_context()->regexp_function());\n+    Handle<JSObject> regexp_prototype(\n+        JSObject::cast(regexp_fun->instance_prototype()));\n+    SimpleInstallFunction(regexp_prototype, factory()->match_all_symbol(),\n+                          \"[Symbol.matchAll]\",\n+                          Builtins::kRegExpPrototypeMatchAll, 1, true);\n+    Handle<Map> regexp_prototype_map(regexp_prototype->map());\n+    Map::SetShouldBeFastPrototypeMap(regexp_prototype_map, true, isolate());\n+    native_context()->set_regexp_prototype_map(*regexp_prototype_map);\n+  }\n+\n+  {  // --- R e g E x p S t r i n g  I t e r a t o r ---\n+    Handle<JSObject> iterator_prototype(\n+        native_context()->initial_iterator_prototype());\n+\n+    Handle<JSObject> regexp_string_iterator_prototype =\n+        factory()->NewJSObject(isolate()->object_function(), TENURED);\n+    JSObject::ForceSetPrototype(regexp_string_iterator_prototype,\n+                                iterator_prototype);\n+\n+    JSObject::AddProperty(\n+        regexp_string_iterator_prototype, factory()->to_string_tag_symbol(),\n+        factory()->NewStringFromAsciiChecked(\"RegExp String Iterator\"),\n+        static_cast<PropertyAttributes>(DONT_ENUM | READ_ONLY));\n+\n+    SimpleInstallFunction(regexp_string_iterator_prototype, \"next\",\n+                          Builtins::kRegExpStringIteratorPrototypeNext, 0,\n+                          true);\n+\n+    Handle<JSFunction> regexp_string_iterator_function = CreateFunction(\n+        isolate(), factory()->NewStringFromAsciiChecked(\"RegExpStringIterator\"),\n+        JS_REGEXP_STRING_ITERATOR_TYPE, JSRegExpStringIterator::kSize, 0,\n+        regexp_string_iterator_prototype, Builtins::kIllegal);\n+    regexp_string_iterator_function->shared()->set_native(false);\n+    native_context()->set_initial_regexp_string_iterator_prototype_map_index(\n+        regexp_string_iterator_function->initial_map());\n+  }\n+\n+  {  // @@matchAll Symbol\n+    Handle<JSFunction> symbol_fun(native_context()->symbol_function());\n+    InstallConstant(isolate(), symbol_fun, \"matchAll\",\n+                    factory()->match_all_symbol());\n+  }\n+}\n+\n void Genesis::InitializeGlobal_harmony_promise_finally() {\n   if (!FLAG_harmony_promise_finally) return;\n \n@@ -4368,8 +4327,6 @@ void Genesis::InitializeGlobal_harmony_bigint() {\n                       factory->the_hole_value(), Builtins::kBigIntConstructor);\n   bigint_fun->shared()->set_builtin_function_id(kBigIntConstructor);\n   bigint_fun->shared()->DontAdaptArguments();\n-  bigint_fun->shared()->SetConstructStub(\n-      *BUILTIN_CODE(isolate(), BigIntConstructor_ConstructStub));\n   bigint_fun->shared()->set_length(1);\n   InstallWithIntrinsicDefaultProto(isolate(), bigint_fun,\n                                    Context::BIGINT_FUNCTION_INDEX);\n@@ -4463,9 +4420,6 @@ Handle<JSFunction> Genesis::CreateArrayBuffer(\n       CreateFunction(isolate(), name, JS_ARRAY_BUFFER_TYPE,\n                      JSArrayBuffer::kSizeWithEmbedderFields, 0, prototype,\n                      Builtins::kArrayBufferConstructor);\n-  Handle<Code> code =\n-      BUILTIN_CODE(isolate(), ArrayBufferConstructor_ConstructStub);\n-  array_buffer_fun->shared()->SetConstructStub(*code);\n   array_buffer_fun->shared()->DontAdaptArguments();\n   array_buffer_fun->shared()->set_length(1);\n \n@@ -4520,9 +4474,6 @@ Handle<JSFunction> Genesis::InstallInternalArray(Handle<JSObject> target,\n       InstallFunction(target, name, JS_ARRAY_TYPE, JSArray::kSize, 0, prototype,\n                       Builtins::kInternalArrayConstructor);\n \n-  InternalArrayConstructorStub internal_array_constructor_stub(isolate());\n-  Handle<Code> code = internal_array_constructor_stub.GetCode();\n-  array_function->shared()->SetConstructStub(*code);\n   array_function->shared()->DontAdaptArguments();\n \n   Handle<Map> original_map(array_function->initial_map());\n@@ -5485,6 +5436,11 @@ Genesis::Genesis(\n \n   ConfigureUtilsObject(context_type);\n \n+  // We created new functions, which may require debug instrumentation.\n+  if (isolate->debug()->is_active()) {\n+    isolate->debug()->InstallDebugBreakTrampoline();\n+  }\n+\n   native_context()->ResetErrorsThrown();\n   result_ = native_context();\n }"
        },
        {
            "sha": "8902ce252952d7b6af8691e6ab55a7339b5704cc",
            "filename": "deps/v8/src/bootstrapper.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbootstrapper.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbootstrapper.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbootstrapper.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -5,7 +5,7 @@\n #ifndef V8_BOOTSTRAPPER_H_\n #define V8_BOOTSTRAPPER_H_\n \n-#include \"src/factory.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/objects/shared-function-info.h\"\n #include \"src/snapshot/natives.h\"\n #include \"src/visitors.h\""
        },
        {
            "sha": "cdcc8fdad7741f47c7b8ab4894c9b0b0effa6e48",
            "filename": "deps/v8/src/boxed-float.h",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fboxed-float.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fboxed-float.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fboxed-float.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -51,8 +51,7 @@ class Float32 {\n       : bit_pattern_(bit_pattern) {}\n };\n \n-static_assert(IS_TRIVIALLY_COPYABLE(Float32),\n-              \"Float32 should be trivially copyable\");\n+ASSERT_TRIVIALLY_COPYABLE(Float32);\n \n // Safety wrapper for a 64-bit floating-point value to make sure we don't lose\n // the exact bit pattern during deoptimization when passing this value.\n@@ -91,8 +90,7 @@ class Float64 {\n       : bit_pattern_(bit_pattern) {}\n };\n \n-static_assert(IS_TRIVIALLY_COPYABLE(Float64),\n-              \"Float64 should be trivially copyable\");\n+ASSERT_TRIVIALLY_COPYABLE(Float64);\n \n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "de372a6453b4c95e18b777d4cb1c9dec6c06be9b",
            "filename": "deps/v8/src/builtins/arm/builtins-arm.cc",
            "status": "modified",
            "additions": 196,
            "deletions": 123,
            "changes": 319,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -88,19 +88,6 @@ void Builtins::Generate_AdaptorWithBuiltinExitFrame(MacroAssembler* masm) {\n   AdaptorWithExitFrameType(masm, BUILTIN_EXIT);\n }\n \n-// Load the built-in InternalArray function from the current context.\n-static void GenerateLoadInternalArrayFunction(MacroAssembler* masm,\n-                                              Register result) {\n-  // Load the InternalArray function from the current native context.\n-  __ LoadNativeContextSlot(Context::INTERNAL_ARRAY_FUNCTION_INDEX, result);\n-}\n-\n-// Load the built-in Array function from the current context.\n-static void GenerateLoadArrayFunction(MacroAssembler* masm, Register result) {\n-  // Load the Array function from the current native context.\n-  __ LoadNativeContextSlot(Context::ARRAY_FUNCTION_INDEX, result);\n-}\n-\n void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- r0     : number of arguments\n@@ -109,9 +96,6 @@ void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n   // -----------------------------------\n   Label generic_array_code, one_or_more_arguments, two_or_more_arguments;\n \n-  // Get the InternalArray function.\n-  GenerateLoadInternalArrayFunction(masm, r1);\n-\n   if (FLAG_debug_code) {\n     // Initial map for the builtin InternalArray functions should be maps.\n     __ ldr(r2, FieldMemOperand(r1, JSFunction::kPrototypeOrInitialMapOffset));\n@@ -124,34 +108,38 @@ void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n   // Run the native code for the InternalArray function called as a normal\n   // function.\n   // tail call a stub\n+  __ LoadRoot(r2, Heap::kUndefinedValueRootIndex);\n   InternalArrayConstructorStub stub(masm->isolate());\n   __ TailCallStub(&stub);\n }\n \n void Builtins::Generate_ArrayConstructor(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- r0     : number of arguments\n+  //  -- r1     : array function\n   //  -- lr     : return address\n   //  -- sp[...]: constructor arguments\n   // -----------------------------------\n   Label generic_array_code, one_or_more_arguments, two_or_more_arguments;\n \n-  // Get the Array function.\n-  GenerateLoadArrayFunction(masm, r1);\n-\n   if (FLAG_debug_code) {\n     // Initial map for the builtin Array functions should be maps.\n-    __ ldr(r2, FieldMemOperand(r1, JSFunction::kPrototypeOrInitialMapOffset));\n-    __ SmiTst(r2);\n+    __ ldr(r7, FieldMemOperand(r1, JSFunction::kPrototypeOrInitialMapOffset));\n+    __ SmiTst(r7);\n     __ Assert(ne, AbortReason::kUnexpectedInitialMapForArrayFunction);\n-    __ CompareObjectType(r2, r3, r4, MAP_TYPE);\n+    __ CompareObjectType(r7, r8, r9, MAP_TYPE);\n     __ Assert(eq, AbortReason::kUnexpectedInitialMapForArrayFunction);\n   }\n \n-  __ mov(r3, r1);\n+  // r2 is the AllocationSite - here undefined.\n+  __ LoadRoot(r2, Heap::kUndefinedValueRootIndex);\n+  // If r3 (new target) is undefined, then this is the 'Call' case, so move\n+  // r1 (the constructor) to r3.\n+  __ cmp(r3, r2);\n+  __ mov(r3, r1, LeaveCC, eq);\n+\n   // Run the native code for the Array function called as a normal function.\n   // tail call a stub\n-  __ LoadRoot(r2, Heap::kUndefinedValueRootIndex);\n   ArrayConstructorStub stub(masm->isolate());\n   __ TailCallStub(&stub);\n }\n@@ -290,7 +278,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // -----------------------------------\n \n     __ ldr(r4, FieldMemOperand(r1, JSFunction::kSharedFunctionInfoOffset));\n-    __ ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kCompilerHintsOffset));\n+    __ ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kFlagsOffset));\n     __ tst(r4, Operand(SharedFunctionInfo::IsDerivedConstructorBit::kMask));\n     __ b(ne, &not_create_implicit_receiver);\n \n@@ -410,7 +398,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     __ bind(&other_result);\n     __ ldr(r4, MemOperand(fp, ConstructFrameConstants::kConstructorOffset));\n     __ ldr(r4, FieldMemOperand(r4, JSFunction::kSharedFunctionInfoOffset));\n-    __ ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kCompilerHintsOffset));\n+    __ ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kFlagsOffset));\n     __ tst(r4, Operand(SharedFunctionInfo::IsClassConstructorBit::kMask));\n \n     if (restrict_constructor_return) {\n@@ -453,13 +441,23 @@ void Builtins::Generate_JSConstructStubGenericUnrestrictedReturn(\n     MacroAssembler* masm) {\n   Generate_JSConstructStubGeneric(masm, false);\n }\n-void Builtins::Generate_JSConstructStubApi(MacroAssembler* masm) {\n-  Generate_JSBuiltinsConstructStubHelper(masm);\n-}\n void Builtins::Generate_JSBuiltinsConstructStub(MacroAssembler* masm) {\n   Generate_JSBuiltinsConstructStubHelper(masm);\n }\n \n+static void GetSharedFunctionInfoBytecode(MacroAssembler* masm,\n+                                          Register sfi_data,\n+                                          Register scratch1) {\n+  Label done;\n+\n+  __ CompareObjectType(sfi_data, scratch1, scratch1, INTERPRETER_DATA_TYPE);\n+  __ b(ne, &done);\n+  __ ldr(sfi_data,\n+         FieldMemOperand(sfi_data, InterpreterData::kBytecodeArrayOffset));\n+\n+  __ bind(&done);\n+}\n+\n // static\n void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n@@ -539,6 +537,7 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   if (FLAG_debug_code) {\n     __ ldr(r3, FieldMemOperand(r4, JSFunction::kSharedFunctionInfoOffset));\n     __ ldr(r3, FieldMemOperand(r3, SharedFunctionInfo::kFunctionDataOffset));\n+    GetSharedFunctionInfoBytecode(masm, r3, r0);\n     __ CompareObjectType(r3, r3, r3, BYTECODE_ARRAY_TYPE);\n     __ Assert(eq, AbortReason::kMissingBytecodeArray);\n   }\n@@ -752,7 +751,7 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n   DCHECK(\n       !AreAliased(feedback_vector, r0, r1, r3, scratch1, scratch2, scratch3));\n \n-  Label optimized_code_slot_is_cell, fallthrough;\n+  Label optimized_code_slot_is_weak_ref, fallthrough;\n \n   Register closure = r1;\n   Register optimized_code_entry = scratch1;\n@@ -762,9 +761,9 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n       FieldMemOperand(feedback_vector, FeedbackVector::kOptimizedCodeOffset));\n \n   // Check if the code entry is a Smi. If yes, we interpret it as an\n-  // optimisation marker. Otherwise, interpret is as a weak cell to a code\n+  // optimisation marker. Otherwise, interpret it as a weak reference to a code\n   // object.\n-  __ JumpIfNotSmi(optimized_code_entry, &optimized_code_slot_is_cell);\n+  __ JumpIfNotSmi(optimized_code_entry, &optimized_code_slot_is_weak_ref);\n \n   {\n     // Optimized code slot is a Smi optimization marker.\n@@ -799,12 +798,10 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n   }\n \n   {\n-    // Optimized code slot is a WeakCell.\n-    __ bind(&optimized_code_slot_is_cell);\n+    // Optimized code slot is a weak reference.\n+    __ bind(&optimized_code_slot_is_weak_ref);\n \n-    __ ldr(optimized_code_entry,\n-           FieldMemOperand(optimized_code_entry, WeakCell::kValueOffset));\n-    __ JumpIfSmi(optimized_code_entry, &fallthrough);\n+    __ LoadWeakValue(optimized_code_entry, optimized_code_entry, &fallthrough);\n \n     // Check if the optimized code is marked for deopt. If it is, call the\n     // runtime to clear it.\n@@ -936,6 +933,7 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n   __ ldr(r0, FieldMemOperand(closure, JSFunction::kSharedFunctionInfoOffset));\n   __ ldr(kInterpreterBytecodeArrayRegister,\n          FieldMemOperand(r0, SharedFunctionInfo::kFunctionDataOffset));\n+  GetSharedFunctionInfoBytecode(masm, kInterpreterBytecodeArrayRegister, r4);\n   __ ldr(r4, FieldMemOperand(r0, SharedFunctionInfo::kDebugInfoOffset));\n   __ SmiTst(r4);\n   __ b(ne, &maybe_load_debug_bytecode_array);\n@@ -1055,11 +1053,31 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n   // kInterpreterBytecodeArrayRegister is already loaded with\n   // SharedFunctionInfo::kFunctionDataOffset.\n   __ bind(&maybe_load_debug_bytecode_array);\n+  __ ldr(r9, FieldMemOperand(r4, DebugInfo::kDebugBytecodeArrayOffset), ne);\n+  __ JumpIfRoot(r9, Heap::kUndefinedValueRootIndex, &bytecode_array_loaded);\n+\n+  __ mov(kInterpreterBytecodeArrayRegister, r9);\n   __ ldr(r9, FieldMemOperand(r4, DebugInfo::kFlagsOffset));\n   __ SmiUntag(r9);\n-  __ tst(r9, Operand(DebugInfo::kHasBreakInfo));\n-  __ ldr(kInterpreterBytecodeArrayRegister,\n-         FieldMemOperand(r4, DebugInfo::kDebugBytecodeArrayOffset), ne);\n+  __ And(r9, r9, Operand(DebugInfo::kDebugExecutionMode));\n+\n+  ExternalReference debug_execution_mode =\n+      ExternalReference::debug_execution_mode_address(masm->isolate());\n+  __ mov(r4, Operand(debug_execution_mode));\n+  __ ldrsb(r4, MemOperand(r4));\n+  STATIC_ASSERT(static_cast<int>(DebugInfo::kDebugExecutionMode) ==\n+                static_cast<int>(DebugInfo::kSideEffects));\n+  __ cmp(r4, r9);\n+  __ b(eq, &bytecode_array_loaded);\n+\n+  __ push(closure);\n+  __ push(feedback_vector);\n+  __ push(kInterpreterBytecodeArrayRegister);\n+  __ push(closure);\n+  __ CallRuntime(Runtime::kDebugApplyInstrumentation);\n+  __ pop(kInterpreterBytecodeArrayRegister);\n+  __ pop(feedback_vector);\n+  __ pop(closure);\n   __ b(&bytecode_array_loaded);\n }\n \n@@ -1085,6 +1103,7 @@ static void Generate_InterpreterPushArgs(MacroAssembler* masm,\n void Builtins::Generate_InterpreterPushArgsThenCallImpl(\n     MacroAssembler* masm, ConvertReceiverMode receiver_mode,\n     InterpreterPushArgsMode mode) {\n+  DCHECK(mode != InterpreterPushArgsMode::kArrayFunction);\n   // ----------- S t a t e -------------\n   //  -- r0 : the number of arguments (not including the receiver)\n   //  -- r2 : the address of the first argument to be pushed. Subsequent\n@@ -1113,11 +1132,7 @@ void Builtins::Generate_InterpreterPushArgsThenCallImpl(\n   }\n \n   // Call the target.\n-  if (mode == InterpreterPushArgsMode::kJSFunction) {\n-    __ Jump(\n-        masm->isolate()->builtins()->CallFunction(ConvertReceiverMode::kAny),\n-        RelocInfo::CODE_TARGET);\n-  } else if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n+  if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n     __ Jump(BUILTIN_CODE(masm->isolate(), CallWithSpread),\n             RelocInfo::CODE_TARGET);\n   } else {\n@@ -1161,15 +1176,13 @@ void Builtins::Generate_InterpreterPushArgsThenConstructImpl(\n     __ AssertUndefinedOrAllocationSite(r2, r5);\n   }\n \n-  if (mode == InterpreterPushArgsMode::kJSFunction) {\n+  if (mode == InterpreterPushArgsMode::kArrayFunction) {\n     __ AssertFunction(r1);\n \n-    // Tail call to the function-specific construct stub (still in the caller\n+    // Tail call to the array construct stub (still in the caller\n     // context at this point).\n-    __ ldr(r4, FieldMemOperand(r1, JSFunction::kSharedFunctionInfoOffset));\n-    __ ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kConstructStubOffset));\n-    // Jump to the construct function.\n-    __ add(pc, r4, Operand(Code::kHeaderSize - kHeapObjectTag));\n+    ArrayConstructorStub array_constructor_stub(masm->isolate());\n+    __ Jump(array_constructor_stub.GetCode(), RelocInfo::CODE_TARGET);\n   } else if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n     // Call the constructor with r0, r1, and r3 unmodified.\n     __ Jump(BUILTIN_CODE(masm->isolate(), ConstructWithSpread),\n@@ -1191,10 +1204,29 @@ void Builtins::Generate_InterpreterPushArgsThenConstructImpl(\n static void Generate_InterpreterEnterBytecode(MacroAssembler* masm) {\n   // Set the return address to the correct point in the interpreter entry\n   // trampoline.\n+  Label builtin_trampoline, trampoline_loaded;\n   Smi* interpreter_entry_return_pc_offset(\n       masm->isolate()->heap()->interpreter_entry_return_pc_offset());\n   DCHECK_NE(interpreter_entry_return_pc_offset, Smi::kZero);\n+\n+  // If the SFI function_data is an InterpreterData, get the trampoline stored\n+  // in it, otherwise get the trampoline from the builtins list.\n+  __ ldr(r2, MemOperand(fp, StandardFrameConstants::kFunctionOffset));\n+  __ ldr(r2, FieldMemOperand(r2, JSFunction::kSharedFunctionInfoOffset));\n+  __ ldr(r2, FieldMemOperand(r2, SharedFunctionInfo::kFunctionDataOffset));\n+  __ CompareObjectType(r2, kInterpreterDispatchTableRegister,\n+                       kInterpreterDispatchTableRegister,\n+                       INTERPRETER_DATA_TYPE);\n+  __ b(ne, &builtin_trampoline);\n+\n+  __ ldr(r2,\n+         FieldMemOperand(r2, InterpreterData::kInterpreterTrampolineOffset));\n+  __ b(&trampoline_loaded);\n+\n+  __ bind(&builtin_trampoline);\n   __ Move(r2, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n+\n+  __ bind(&trampoline_loaded);\n   __ add(lr, r2, Operand(interpreter_entry_return_pc_offset->value() +\n                          Code::kHeaderSize - kHeapObjectTag));\n \n@@ -1267,49 +1299,86 @@ void Builtins::Generate_InterpreterEnterBytecodeDispatch(MacroAssembler* masm) {\n   Generate_InterpreterEnterBytecode(masm);\n }\n \n-void Builtins::Generate_CheckOptimizationMarker(MacroAssembler* masm) {\n-  // ----------- S t a t e -------------\n-  //  -- r0 : argument count (preserved for callee)\n-  //  -- r3 : new target (preserved for callee)\n-  //  -- r1 : target function (preserved for callee)\n-  // -----------------------------------\n-  Register closure = r1;\n-\n-  // Get the feedback vector.\n-  Register feedback_vector = r2;\n-  __ ldr(feedback_vector,\n-         FieldMemOperand(closure, JSFunction::kFeedbackCellOffset));\n-  __ ldr(feedback_vector, FieldMemOperand(feedback_vector, Cell::kValueOffset));\n-\n-  // The feedback vector must be defined.\n-  if (FLAG_debug_code) {\n-    __ CompareRoot(feedback_vector, Heap::kUndefinedValueRootIndex);\n-    __ Assert(ne, AbortReason::kExpectedFeedbackVector);\n-  }\n-\n-  // Is there an optimization marker or optimized code in the feedback vector?\n-  MaybeTailCallOptimizedCodeSlot(masm, feedback_vector, r4, r6, r5);\n-\n-  // Otherwise, tail call the SFI code.\n-  static_assert(kJavaScriptCallCodeStartRegister == r2, \"ABI mismatch\");\n-  __ ldr(r2, FieldMemOperand(r1, JSFunction::kSharedFunctionInfoOffset));\n-  __ ldr(r2, FieldMemOperand(r2, SharedFunctionInfo::kCodeOffset));\n-  __ add(r2, r2, Operand(Code::kHeaderSize - kHeapObjectTag));\n-  __ Jump(r2);\n-}\n-\n void Builtins::Generate_CompileLazyDeoptimizedCode(MacroAssembler* masm) {\n-  // Set the code slot inside the JSFunction to the trampoline to the\n-  // interpreter entry.\n-  __ ldr(r2, FieldMemOperand(r1, JSFunction::kSharedFunctionInfoOffset));\n-  __ ldr(r2, FieldMemOperand(r2, SharedFunctionInfo::kCodeOffset));\n+  // Set the code slot inside the JSFunction to CompileLazy.\n+  __ Move(r2, BUILTIN_CODE(masm->isolate(), CompileLazy));\n   __ str(r2, FieldMemOperand(r1, JSFunction::kCodeOffset));\n   __ RecordWriteField(r1, JSFunction::kCodeOffset, r2, r4, kLRHasNotBeenSaved,\n                       kDontSaveFPRegs, OMIT_REMEMBERED_SET, OMIT_SMI_CHECK);\n   // Jump to compile lazy.\n   Generate_CompileLazy(masm);\n }\n \n+static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n+                                      Register scratch1) {\n+  // Figure out the SFI's code object.\n+  Label done;\n+  Label check_is_bytecode_array;\n+  Label check_is_code;\n+  Label check_is_fixed_array;\n+  Label check_is_pre_parsed_scope_data;\n+  Label check_is_function_template_info;\n+  Label check_is_interpreter_data;\n+\n+  Register data_type = scratch1;\n+\n+  // IsSmi: Is builtin\n+  __ JumpIfNotSmi(sfi_data, &check_is_bytecode_array);\n+  __ Move(scratch1,\n+          Operand(ExternalReference::builtins_address(masm->isolate())));\n+  __ ldr(sfi_data, MemOperand::PointerAddressFromSmiKey(scratch1, sfi_data));\n+  __ b(&done);\n+\n+  // Get map for subsequent checks.\n+  __ bind(&check_is_bytecode_array);\n+  __ ldr(data_type, FieldMemOperand(sfi_data, HeapObject::kMapOffset));\n+  __ ldrh(data_type, FieldMemOperand(data_type, Map::kInstanceTypeOffset));\n+\n+  // IsBytecodeArray: Interpret bytecode\n+  __ cmp(data_type, Operand(BYTECODE_ARRAY_TYPE));\n+  __ b(ne, &check_is_code);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n+  __ b(&done);\n+\n+  // IsCode: Run code\n+  __ bind(&check_is_code);\n+  __ cmp(data_type, Operand(CODE_TYPE));\n+  __ b(eq, &done);\n+\n+  // IsFixedArray: Instantiate using AsmWasmData,\n+  __ bind(&check_is_fixed_array);\n+  __ cmp(data_type, Operand(FIXED_ARRAY_TYPE));\n+  __ b(ne, &check_is_pre_parsed_scope_data);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InstantiateAsmJs));\n+  __ b(&done);\n+\n+  // IsPreParsedScopeData: Compile lazy\n+  __ bind(&check_is_pre_parsed_scope_data);\n+  __ cmp(data_type, Operand(TUPLE2_TYPE));\n+  __ b(ne, &check_is_function_template_info);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), CompileLazy));\n+  __ b(&done);\n+\n+  // IsFunctionTemplateInfo: API call\n+  __ bind(&check_is_function_template_info);\n+  __ cmp(data_type, Operand(FUNCTION_TEMPLATE_INFO_TYPE));\n+  __ b(ne, &check_is_interpreter_data);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), HandleApiCall));\n+  __ b(&done);\n+\n+  // IsInterpreterData: Interpret bytecode\n+  __ bind(&check_is_interpreter_data);\n+  if (FLAG_debug_code) {\n+    __ cmp(data_type, Operand(INTERPRETER_DATA_TYPE));\n+    __ Assert(eq, AbortReason::kInvalidSharedFunctionInfoData);\n+  }\n+  __ ldr(\n+      sfi_data,\n+      FieldMemOperand(sfi_data, InterpreterData::kInterpreterTrampolineOffset));\n+\n+  __ bind(&done);\n+}\n+\n void Builtins::Generate_CompileLazy(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- r0 : argument count (preserved for callee)\n@@ -1332,13 +1401,15 @@ void Builtins::Generate_CompileLazy(MacroAssembler* masm) {\n   // Is there an optimization marker or optimized code in the feedback vector?\n   MaybeTailCallOptimizedCodeSlot(masm, feedback_vector, r4, r6, r5);\n \n-  // We found no optimized code.\n+  // We found no optimized code. Infer the code object needed for the SFI.\n   Register entry = r4;\n   __ ldr(entry,\n          FieldMemOperand(closure, JSFunction::kSharedFunctionInfoOffset));\n+  __ ldr(entry,\n+         FieldMemOperand(entry, SharedFunctionInfo::kFunctionDataOffset));\n+  GetSharedFunctionInfoCode(masm, entry, r5);\n \n-  // If SFI points to anything other than CompileLazy, install that.\n-  __ ldr(entry, FieldMemOperand(entry, SharedFunctionInfo::kCodeOffset));\n+  // If code entry points to anything other than CompileLazy, install that.\n   __ Move(r5, masm->CodeObject());\n   __ cmp(entry, r5);\n   __ b(eq, &gotta_call_runtime);\n@@ -1408,25 +1479,9 @@ void Builtins::Generate_DeserializeLazy(MacroAssembler* masm) {\n \n   {\n     // If we've reached this spot, the target builtin has been deserialized and\n-    // we simply need to copy it over. First to the shared function info.\n+    // we simply need to copy it over to the target function.\n \n     Register target_builtin = scratch1;\n-    Register shared = scratch0;\n-\n-    __ ldr(shared,\n-           FieldMemOperand(target, JSFunction::kSharedFunctionInfoOffset));\n-\n-    CHECK(r5 != target && r5 != scratch0 && r5 != scratch1);\n-    CHECK(r9 != target && r9 != scratch0 && r9 != scratch1);\n-\n-    __ str(target_builtin,\n-           FieldMemOperand(shared, SharedFunctionInfo::kCodeOffset));\n-    __ mov(r9, target_builtin);  // Write barrier clobbers r9 below.\n-    __ RecordWriteField(shared, SharedFunctionInfo::kCodeOffset, r9, r5,\n-                        kLRHasNotBeenSaved, kDontSaveFPRegs,\n-                        OMIT_REMEMBERED_SET, OMIT_SMI_CHECK);\n-\n-    // And second to the target function.\n \n     __ str(target_builtin, FieldMemOperand(target, JSFunction::kCodeOffset));\n     __ mov(r9, target_builtin);  // Write barrier clobbers r9 below.\n@@ -1998,7 +2053,7 @@ void Builtins::Generate_CallFunction(MacroAssembler* masm,\n   // Check that the function is not a \"classConstructor\".\n   Label class_constructor;\n   __ ldr(r2, FieldMemOperand(r1, JSFunction::kSharedFunctionInfoOffset));\n-  __ ldr(r3, FieldMemOperand(r2, SharedFunctionInfo::kCompilerHintsOffset));\n+  __ ldr(r3, FieldMemOperand(r2, SharedFunctionInfo::kFlagsOffset));\n   __ tst(r3, Operand(SharedFunctionInfo::IsClassConstructorBit::kMask));\n   __ b(ne, &class_constructor);\n \n@@ -2008,7 +2063,7 @@ void Builtins::Generate_CallFunction(MacroAssembler* masm,\n   __ ldr(cp, FieldMemOperand(r1, JSFunction::kContextOffset));\n   // We need to convert the receiver for non-native sloppy mode functions.\n   Label done_convert;\n-  __ ldr(r3, FieldMemOperand(r2, SharedFunctionInfo::kCompilerHintsOffset));\n+  __ ldr(r3, FieldMemOperand(r2, SharedFunctionInfo::kFlagsOffset));\n   __ tst(r3, Operand(SharedFunctionInfo::IsNativeBit::kMask |\n                      SharedFunctionInfo::IsStrictBit::kMask));\n   __ b(ne, &done_convert);\n@@ -2243,17 +2298,27 @@ void Builtins::Generate_ConstructFunction(MacroAssembler* masm) {\n   //  -- r1 : the constructor to call (checked to be a JSFunction)\n   //  -- r3 : the new target (checked to be a constructor)\n   // -----------------------------------\n+  __ AssertConstructor(r1);\n   __ AssertFunction(r1);\n \n   // Calling convention for function specific ConstructStubs require\n   // r2 to contain either an AllocationSite or undefined.\n   __ LoadRoot(r2, Heap::kUndefinedValueRootIndex);\n \n-  // Tail call to the function-specific construct stub (still in the caller\n-  // context at this point).\n+  Label call_generic_stub;\n+\n+  // Jump to JSBuiltinsConstructStub or JSConstructStubGeneric.\n   __ ldr(r4, FieldMemOperand(r1, JSFunction::kSharedFunctionInfoOffset));\n-  __ ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kConstructStubOffset));\n-  __ add(pc, r4, Operand(Code::kHeaderSize - kHeapObjectTag));\n+  __ ldr(r4, FieldMemOperand(r4, SharedFunctionInfo::kFlagsOffset));\n+  __ tst(r4, Operand(SharedFunctionInfo::ConstructAsBuiltinBit::kMask));\n+  __ b(eq, &call_generic_stub);\n+\n+  __ Jump(BUILTIN_CODE(masm->isolate(), JSBuiltinsConstructStub),\n+          RelocInfo::CODE_TARGET);\n+\n+  __ bind(&call_generic_stub);\n+  __ Jump(masm->isolate()->builtins()->JSConstructStubGeneric(),\n+          RelocInfo::CODE_TARGET);\n }\n \n // static\n@@ -2263,6 +2328,7 @@ void Builtins::Generate_ConstructBoundFunction(MacroAssembler* masm) {\n   //  -- r1 : the function to call (checked to be a JSBoundFunction)\n   //  -- r3 : the new target (checked to be a constructor)\n   // -----------------------------------\n+  __ AssertConstructor(r1);\n   __ AssertBoundFunction(r1);\n \n   // Push the [[BoundArguments]] onto the stack.\n@@ -2291,16 +2357,17 @@ void Builtins::Generate_Construct(MacroAssembler* masm) {\n   Label non_constructor, non_proxy;\n   __ JumpIfSmi(r1, &non_constructor);\n \n-  // Dispatch based on instance type.\n-  __ CompareObjectType(r1, r4, r5, JS_FUNCTION_TYPE);\n-  __ Jump(BUILTIN_CODE(masm->isolate(), ConstructFunction),\n-          RelocInfo::CODE_TARGET, eq);\n-\n   // Check if target has a [[Construct]] internal method.\n+  __ ldr(r4, FieldMemOperand(r1, HeapObject::kMapOffset));\n   __ ldrb(r2, FieldMemOperand(r4, Map::kBitFieldOffset));\n   __ tst(r2, Operand(Map::IsConstructorBit::kMask));\n   __ b(eq, &non_constructor);\n \n+  // Dispatch based on instance type.\n+  __ CompareInstanceType(r4, r5, JS_FUNCTION_TYPE);\n+  __ Jump(BUILTIN_CODE(masm->isolate(), ConstructFunction),\n+          RelocInfo::CODE_TARGET, eq);\n+\n   // Only dispatch to bound functions after checking whether they are\n   // constructors.\n   __ cmp(r5, Operand(JS_BOUND_FUNCTION_TYPE));\n@@ -2503,28 +2570,34 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   {\n     FrameAndConstantPoolScope scope(masm, StackFrame::INTERNAL);\n \n+    auto wasm_instance_reg = r3;  // TODO(titzer): put in a common place.\n+\n     // Save all parameter registers (see wasm-linkage.cc). They might be\n     // overwritten in the runtime call below. We don't have any callee-saved\n     // registers in wasm, so no need to store anything else.\n-    constexpr RegList gp_regs = Register::ListOf<r0, r1, r2, r3>();\n+    constexpr RegList gp_regs = Register::ListOf<r0, r1, r2>();\n     constexpr DwVfpRegister lowest_fp_reg = d0;\n     constexpr DwVfpRegister highest_fp_reg = d7;\n \n     __ stm(db_w, sp, gp_regs);\n     __ vstm(db_w, sp, lowest_fp_reg, highest_fp_reg);\n \n-    // Initialize cp register with kZero, CEntryStub will use it to set the\n-    // current context on the isolate.\n+    // Pass the WASM instance as an explicit argument to WasmCompileLazy.\n+    __ push(wasm_instance_reg);\n+    // Initialize the JavaScript context with 0. CEntryStub will use it to\n+    // set the current context on the isolate.\n     __ Move(cp, Smi::kZero);\n     __ CallRuntime(Runtime::kWasmCompileLazy);\n-    // Store returned instruction start in r8.\n-    __ add(r8, r0, Operand(Code::kHeaderSize - kHeapObjectTag));\n+    // The entrypoint address is the first return value.\n+    __ mov(r8, kReturnRegister0);\n+    // The WASM instance is the second return value.\n+    __ mov(wasm_instance_reg, kReturnRegister1);\n \n     // Restore registers.\n     __ vldm(ia_w, sp, lowest_fp_reg, highest_fp_reg);\n     __ ldm(ia_w, sp, gp_regs);\n   }\n-  // Now jump to the instructions of the returned code object.\n+  // Finally, jump to the entrypoint.\n   __ Jump(r8);\n }\n #undef __"
        },
        {
            "sha": "aae189f19bd1ebe85bf10898d3ab19773db40973",
            "filename": "deps/v8/src/builtins/arm64/builtins-arm64.cc",
            "status": "modified",
            "additions": 190,
            "deletions": 125,
            "changes": 315,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -19,19 +19,6 @@ namespace internal {\n \n #define __ ACCESS_MASM(masm)\n \n-// Load the built-in Array function from the current context.\n-static void GenerateLoadArrayFunction(MacroAssembler* masm, Register result) {\n-  // Load the InternalArray function from the native context.\n-  __ LoadNativeContextSlot(Context::ARRAY_FUNCTION_INDEX, result);\n-}\n-\n-// Load the built-in InternalArray function from the current context.\n-static void GenerateLoadInternalArrayFunction(MacroAssembler* masm,\n-                                              Register result) {\n-  // Load the InternalArray function from the native context.\n-  __ LoadNativeContextSlot(Context::INTERNAL_ARRAY_FUNCTION_INDEX, result);\n-}\n-\n void Builtins::Generate_Adaptor(MacroAssembler* masm, Address address,\n                                 ExitFrameType exit_frame_type) {\n   __ Mov(x5, ExternalReference(address, masm->isolate()));\n@@ -104,9 +91,6 @@ void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n   ASM_LOCATION(\"Builtins::Generate_InternalArrayConstructor\");\n   Label generic_array_code;\n \n-  // Get the InternalArray function.\n-  GenerateLoadInternalArrayFunction(masm, x1);\n-\n   if (FLAG_debug_code) {\n     // Initial map for the builtin InternalArray functions should be maps.\n     __ Ldr(x10, FieldMemOperand(x1, JSFunction::kPrototypeOrInitialMapOffset));\n@@ -118,22 +102,21 @@ void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n \n   // Run the native code for the InternalArray function called as a normal\n   // function.\n+  __ LoadRoot(x2, Heap::kUndefinedValueRootIndex);\n   InternalArrayConstructorStub stub(masm->isolate());\n   __ TailCallStub(&stub);\n }\n \n void Builtins::Generate_ArrayConstructor(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- x0     : number of arguments\n+  //  -- x1     : array function\n   //  -- lr     : return address\n   //  -- sp[...]: constructor arguments\n   // -----------------------------------\n   ASM_LOCATION(\"Builtins::Generate_ArrayConstructor\");\n   Label generic_array_code, one_or_more_arguments, two_or_more_arguments;\n \n-  // Get the Array function.\n-  GenerateLoadArrayFunction(masm, x1);\n-\n   if (FLAG_debug_code) {\n     // Initial map for the builtin Array functions should be maps.\n     __ Ldr(x10, FieldMemOperand(x1, JSFunction::kPrototypeOrInitialMapOffset));\n@@ -143,9 +126,14 @@ void Builtins::Generate_ArrayConstructor(MacroAssembler* masm) {\n     __ Assert(eq, AbortReason::kUnexpectedInitialMapForArrayFunction);\n   }\n \n-  // Run the native code for the Array function called as a normal function.\n+  // x2 is the AllocationSite - here undefined.\n   __ LoadRoot(x2, Heap::kUndefinedValueRootIndex);\n-  __ Mov(x3, x1);\n+  // If x3 (new target) is undefined, then this is the 'Call' case, so move\n+  // x1 (the constructor) to x3.\n+  __ Cmp(x3, x2);\n+  __ CmovX(x3, x1, eq);\n+\n+  // Run the native code for the Array function called as a normal function.\n   ArrayConstructorStub stub(masm->isolate());\n   __ TailCallStub(&stub);\n }\n@@ -325,7 +313,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // -----------------------------------\n \n     __ Ldr(x4, FieldMemOperand(x1, JSFunction::kSharedFunctionInfoOffset));\n-    __ Ldr(w4, FieldMemOperand(x4, SharedFunctionInfo::kCompilerHintsOffset));\n+    __ Ldr(w4, FieldMemOperand(x4, SharedFunctionInfo::kFlagsOffset));\n     __ TestAndBranchIfAnySet(w4,\n                              SharedFunctionInfo::IsDerivedConstructorBit::kMask,\n                              &not_create_implicit_receiver);\n@@ -451,7 +439,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     __ Bind(&other_result);\n     __ Ldr(x4, MemOperand(fp, ConstructFrameConstants::kConstructorOffset));\n     __ Ldr(x4, FieldMemOperand(x4, JSFunction::kSharedFunctionInfoOffset));\n-    __ Ldr(w4, FieldMemOperand(x4, SharedFunctionInfo::kCompilerHintsOffset));\n+    __ Ldr(w4, FieldMemOperand(x4, SharedFunctionInfo::kFlagsOffset));\n \n     if (restrict_constructor_return) {\n       // Throw if constructor function is a class constructor\n@@ -495,9 +483,6 @@ void Builtins::Generate_JSConstructStubGenericUnrestrictedReturn(\n     MacroAssembler* masm) {\n   Generate_JSConstructStubGeneric(masm, false);\n }\n-void Builtins::Generate_JSConstructStubApi(MacroAssembler* masm) {\n-  Generate_JSBuiltinsConstructStubHelper(masm);\n-}\n void Builtins::Generate_JSBuiltinsConstructStub(MacroAssembler* masm) {\n   Generate_JSBuiltinsConstructStubHelper(masm);\n }\n@@ -596,8 +581,13 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n \n   // Underlying function needs to have bytecode available.\n   if (FLAG_debug_code) {\n+    Label check_has_bytecode_array;\n     __ Ldr(x3, FieldMemOperand(x4, JSFunction::kSharedFunctionInfoOffset));\n     __ Ldr(x3, FieldMemOperand(x3, SharedFunctionInfo::kFunctionDataOffset));\n+    __ CompareObjectType(x3, x0, x0, INTERPRETER_DATA_TYPE);\n+    __ B(ne, &check_has_bytecode_array);\n+    __ Ldr(x3, FieldMemOperand(x3, InterpreterData::kBytecodeArrayOffset));\n+    __ Bind(&check_has_bytecode_array);\n     __ CompareObjectType(x3, x3, x3, BYTECODE_ARRAY_TYPE);\n     __ Assert(eq, AbortReason::kMissingBytecodeArray);\n   }\n@@ -845,7 +835,7 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n   DCHECK(\n       !AreAliased(feedback_vector, x0, x1, x3, scratch1, scratch2, scratch3));\n \n-  Label optimized_code_slot_is_cell, fallthrough;\n+  Label optimized_code_slot_is_weak_ref, fallthrough;\n \n   Register closure = x1;\n   Register optimized_code_entry = scratch1;\n@@ -855,9 +845,9 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n       FieldMemOperand(feedback_vector, FeedbackVector::kOptimizedCodeOffset));\n \n   // Check if the code entry is a Smi. If yes, we interpret it as an\n-  // optimisation marker. Otherwise, interpret is as a weak cell to a code\n+  // optimisation marker. Otherwise, interpret is at a weak reference to a code\n   // object.\n-  __ JumpIfNotSmi(optimized_code_entry, &optimized_code_slot_is_cell);\n+  __ JumpIfNotSmi(optimized_code_entry, &optimized_code_slot_is_weak_ref);\n \n   {\n     // Optimized code slot is a Smi optimization marker.\n@@ -892,12 +882,10 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n   }\n \n   {\n-    // Optimized code slot is a WeakCell.\n-    __ bind(&optimized_code_slot_is_cell);\n+    // Optimized code slot is a weak reference.\n+    __ bind(&optimized_code_slot_is_weak_ref);\n \n-    __ Ldr(optimized_code_entry,\n-           FieldMemOperand(optimized_code_entry, WeakCell::kValueOffset));\n-    __ JumpIfSmi(optimized_code_entry, &fallthrough);\n+    __ LoadWeakValue(optimized_code_entry, optimized_code_entry, &fallthrough);\n \n     // Check if the optimized code is marked for deopt. If it is, call the\n     // runtime to clear it.\n@@ -1025,10 +1013,18 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n \n   // Get the bytecode array from the function object (or from the DebugInfo if\n   // it is present) and load it into kInterpreterBytecodeArrayRegister.\n-  Label maybe_load_debug_bytecode_array, bytecode_array_loaded;\n+  Label maybe_load_debug_bytecode_array, bytecode_array_loaded,\n+      has_bytecode_array;\n   __ Ldr(x0, FieldMemOperand(closure, JSFunction::kSharedFunctionInfoOffset));\n   __ Ldr(kInterpreterBytecodeArrayRegister,\n          FieldMemOperand(x0, SharedFunctionInfo::kFunctionDataOffset));\n+  __ CompareObjectType(kInterpreterBytecodeArrayRegister, x11, x11,\n+                       INTERPRETER_DATA_TYPE);\n+  __ B(ne, &has_bytecode_array);\n+  __ Ldr(kInterpreterBytecodeArrayRegister,\n+         FieldMemOperand(kInterpreterBytecodeArrayRegister,\n+                         InterpreterData::kBytecodeArrayOffset));\n+  __ Bind(&has_bytecode_array);\n   __ Ldr(x11, FieldMemOperand(x0, SharedFunctionInfo::kDebugInfoOffset));\n   __ JumpIfNotSmi(x11, &maybe_load_debug_bytecode_array);\n   __ Bind(&bytecode_array_loaded);\n@@ -1149,12 +1145,26 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n   // kInterpreterBytecodeArrayRegister is already loaded with\n   // SharedFunctionInfo::kFunctionDataOffset.\n   __ Bind(&maybe_load_debug_bytecode_array);\n-  __ Ldrsw(x10, UntagSmiFieldMemOperand(x11, DebugInfo::kFlagsOffset));\n-  __ TestAndBranchIfAllClear(x10, DebugInfo::kHasBreakInfo,\n-                             &bytecode_array_loaded);\n-  __ Ldr(kInterpreterBytecodeArrayRegister,\n-         FieldMemOperand(x11, DebugInfo::kDebugBytecodeArrayOffset));\n-  __ B(&bytecode_array_loaded);\n+  __ Ldr(x10, FieldMemOperand(x11, DebugInfo::kDebugBytecodeArrayOffset));\n+  __ JumpIfRoot(x10, Heap::kUndefinedValueRootIndex, &bytecode_array_loaded);\n+\n+  __ Mov(kInterpreterBytecodeArrayRegister, x10);\n+  __ Ldr(x10, UntagSmiFieldMemOperand(x11, DebugInfo::kFlagsOffset));\n+  __ And(x10, x10, Immediate(DebugInfo::kDebugExecutionMode));\n+\n+  STATIC_ASSERT(static_cast<int>(DebugInfo::kDebugExecutionMode) ==\n+                static_cast<int>(DebugInfo::kSideEffects));\n+  ExternalReference debug_execution_mode =\n+      ExternalReference::debug_execution_mode_address(masm->isolate());\n+  __ Mov(x11, Operand(debug_execution_mode));\n+  __ Ldrsb(x11, MemOperand(x11));\n+  __ CompareAndBranch(x10, x11, eq, &bytecode_array_loaded);\n+\n+  __ Push(closure, feedback_vector);\n+  __ PushArgument(closure);\n+  __ CallRuntime(Runtime::kDebugApplyInstrumentation);\n+  __ Pop(feedback_vector, closure);\n+  __ jmp(&bytecode_array_loaded);\n }\n \n static void Generate_InterpreterPushArgs(MacroAssembler* masm,\n@@ -1236,6 +1246,7 @@ static void Generate_InterpreterPushArgs(MacroAssembler* masm,\n void Builtins::Generate_InterpreterPushArgsThenCallImpl(\n     MacroAssembler* masm, ConvertReceiverMode receiver_mode,\n     InterpreterPushArgsMode mode) {\n+  DCHECK(mode != InterpreterPushArgsMode::kArrayFunction);\n   // ----------- S t a t e -------------\n   //  -- x0 : the number of arguments (not including the receiver)\n   //  -- x2 : the address of the first argument to be pushed. Subsequent\n@@ -1255,11 +1266,7 @@ void Builtins::Generate_InterpreterPushArgsThenCallImpl(\n                                receiver_mode, mode);\n \n   // Call the target.\n-  if (mode == InterpreterPushArgsMode::kJSFunction) {\n-    __ Jump(\n-        masm->isolate()->builtins()->CallFunction(ConvertReceiverMode::kAny),\n-        RelocInfo::CODE_TARGET);\n-  } else if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n+  if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n     __ Jump(BUILTIN_CODE(masm->isolate(), CallWithSpread),\n             RelocInfo::CODE_TARGET);\n   } else {\n@@ -1290,15 +1297,13 @@ void Builtins::Generate_InterpreterPushArgsThenConstructImpl(\n   Generate_InterpreterPushArgs(masm, num_args, first_arg_index, spread_arg_out,\n                                ConvertReceiverMode::kNullOrUndefined, mode);\n \n-  if (mode == InterpreterPushArgsMode::kJSFunction) {\n+  if (mode == InterpreterPushArgsMode::kArrayFunction) {\n     __ AssertFunction(x1);\n \n-    // Tail call to the function-specific construct stub (still in the caller\n+    // Tail call to the array construct stub (still in the caller\n     // context at this point).\n-    __ Ldr(x4, FieldMemOperand(x1, JSFunction::kSharedFunctionInfoOffset));\n-    __ Ldr(x4, FieldMemOperand(x4, SharedFunctionInfo::kConstructStubOffset));\n-    __ Add(x4, x4, Code::kHeaderSize - kHeapObjectTag);\n-    __ Br(x4);\n+    ArrayConstructorStub array_constructor_stub(masm->isolate());\n+    __ Jump(array_constructor_stub.GetCode(), RelocInfo::CODE_TARGET);\n   } else if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n     // Call the constructor with x0, x1, and x3 unmodified.\n     __ Jump(BUILTIN_CODE(masm->isolate(), ConstructWithSpread),\n@@ -1313,10 +1318,29 @@ void Builtins::Generate_InterpreterPushArgsThenConstructImpl(\n static void Generate_InterpreterEnterBytecode(MacroAssembler* masm) {\n   // Set the return address to the correct point in the interpreter entry\n   // trampoline.\n+  Label builtin_trampoline, trampoline_loaded;\n   Smi* interpreter_entry_return_pc_offset(\n       masm->isolate()->heap()->interpreter_entry_return_pc_offset());\n   DCHECK_NE(interpreter_entry_return_pc_offset, Smi::kZero);\n+\n+  // If the SFI function_data is an InterpreterData, get the trampoline stored\n+  // in it, otherwise get the trampoline from the builtins list.\n+  __ Ldr(x1, MemOperand(fp, StandardFrameConstants::kFunctionOffset));\n+  __ Ldr(x1, FieldMemOperand(x1, JSFunction::kSharedFunctionInfoOffset));\n+  __ Ldr(x1, FieldMemOperand(x1, SharedFunctionInfo::kFunctionDataOffset));\n+  __ CompareObjectType(x1, kInterpreterDispatchTableRegister,\n+                       kInterpreterDispatchTableRegister,\n+                       INTERPRETER_DATA_TYPE);\n+  __ B(ne, &builtin_trampoline);\n+\n+  __ Ldr(x1,\n+         FieldMemOperand(x1, InterpreterData::kInterpreterTrampolineOffset));\n+  __ B(&trampoline_loaded);\n+\n+  __ Bind(&builtin_trampoline);\n   __ LoadObject(x1, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n+\n+  __ Bind(&trampoline_loaded);\n   __ Add(lr, x1, Operand(interpreter_entry_return_pc_offset->value() +\n                          Code::kHeaderSize - kHeapObjectTag));\n \n@@ -1387,49 +1411,86 @@ void Builtins::Generate_InterpreterEnterBytecodeDispatch(MacroAssembler* masm) {\n   Generate_InterpreterEnterBytecode(masm);\n }\n \n-void Builtins::Generate_CheckOptimizationMarker(MacroAssembler* masm) {\n-  // ----------- S t a t e -------------\n-  //  -- x0 : argument count (preserved for callee)\n-  //  -- x3 : new target (preserved for callee)\n-  //  -- x1 : target function (preserved for callee)\n-  // -----------------------------------\n-  Register closure = x1;\n-\n-  // Get the feedback vector.\n-  Register feedback_vector = x2;\n-  __ Ldr(feedback_vector,\n-         FieldMemOperand(closure, JSFunction::kFeedbackCellOffset));\n-  __ Ldr(feedback_vector, FieldMemOperand(feedback_vector, Cell::kValueOffset));\n-\n-  // The feedback vector must be defined.\n-  if (FLAG_debug_code) {\n-    __ CompareRoot(feedback_vector, Heap::kUndefinedValueRootIndex);\n-    __ Assert(ne, AbortReason::kExpectedFeedbackVector);\n-  }\n-\n-  // Is there an optimization marker or optimized code in the feedback vector?\n-  MaybeTailCallOptimizedCodeSlot(masm, feedback_vector, x7, x4, x5);\n-\n-  // Otherwise, tail call the SFI code.\n-  static_assert(kJavaScriptCallCodeStartRegister == x2, \"ABI mismatch\");\n-  __ Ldr(x2, FieldMemOperand(x1, JSFunction::kSharedFunctionInfoOffset));\n-  __ Ldr(x2, FieldMemOperand(x2, SharedFunctionInfo::kCodeOffset));\n-  __ Add(x2, x2, Code::kHeaderSize - kHeapObjectTag);\n-  __ Br(x2);\n-}\n-\n void Builtins::Generate_CompileLazyDeoptimizedCode(MacroAssembler* masm) {\n-  // Set the code slot inside the JSFunction to the trampoline to the\n-  // interpreter entry.\n-  __ Ldr(x2, FieldMemOperand(x1, JSFunction::kSharedFunctionInfoOffset));\n-  __ Ldr(x2, FieldMemOperand(x2, SharedFunctionInfo::kCodeOffset));\n+  // Set the code slot inside the JSFunction to CompileLazy.\n+  __ Mov(x2, BUILTIN_CODE(masm->isolate(), CompileLazy));\n   __ Str(x2, FieldMemOperand(x1, JSFunction::kCodeOffset));\n   __ RecordWriteField(x1, JSFunction::kCodeOffset, x2, x5, kLRHasNotBeenSaved,\n                       kDontSaveFPRegs, OMIT_REMEMBERED_SET, OMIT_SMI_CHECK);\n   // Jump to compile lazy.\n   Generate_CompileLazy(masm);\n }\n \n+static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n+                                      Register scratch1) {\n+  // Figure out the SFI's code object.\n+  Label done;\n+  Label check_is_bytecode_array;\n+  Label check_is_code;\n+  Label check_is_fixed_array;\n+  Label check_is_pre_parsed_scope_data;\n+  Label check_is_function_template_info;\n+  Label check_is_interpreter_data;\n+\n+  Register data_type = scratch1;\n+\n+  // IsSmi: Is builtin\n+  __ JumpIfNotSmi(sfi_data, &check_is_bytecode_array);\n+  __ Mov(scratch1, ExternalReference::builtins_address(masm->isolate()));\n+  __ Mov(sfi_data, Operand::UntagSmiAndScale(sfi_data, kPointerSizeLog2));\n+  __ Ldr(sfi_data, MemOperand(scratch1, sfi_data));\n+  __ B(&done);\n+\n+  // Get map for subsequent checks.\n+  __ Bind(&check_is_bytecode_array);\n+  __ Ldr(data_type, FieldMemOperand(sfi_data, HeapObject::kMapOffset));\n+  __ Ldrh(data_type, FieldMemOperand(data_type, Map::kInstanceTypeOffset));\n+\n+  // IsBytecodeArray: Interpret bytecode\n+  __ Cmp(data_type, Operand(BYTECODE_ARRAY_TYPE));\n+  __ B(ne, &check_is_code);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n+  __ B(&done);\n+\n+  // IsCode: Run code\n+  __ Bind(&check_is_code);\n+  __ Cmp(data_type, Operand(CODE_TYPE));\n+  __ B(eq, &done);\n+\n+  // IsFixedArray: Instantiate using AsmWasmData,\n+  __ Bind(&check_is_fixed_array);\n+  __ Cmp(data_type, Operand(FIXED_ARRAY_TYPE));\n+  __ B(ne, &check_is_pre_parsed_scope_data);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InstantiateAsmJs));\n+  __ B(&done);\n+\n+  // IsPreParsedScopeData: Compile lazy\n+  __ Bind(&check_is_pre_parsed_scope_data);\n+  __ Cmp(data_type, Operand(TUPLE2_TYPE));\n+  __ B(ne, &check_is_function_template_info);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), CompileLazy));\n+  __ B(&done);\n+\n+  // IsFunctionTemplateInfo: API call\n+  __ Bind(&check_is_function_template_info);\n+  __ Cmp(data_type, Operand(FUNCTION_TEMPLATE_INFO_TYPE));\n+  __ B(ne, &check_is_interpreter_data);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), HandleApiCall));\n+  __ B(&done);\n+\n+  // IsInterpreterData: Interpret bytecode\n+  __ Bind(&check_is_interpreter_data);\n+  if (FLAG_debug_code) {\n+    __ Cmp(data_type, Operand(INTERPRETER_DATA_TYPE));\n+    __ Assert(eq, AbortReason::kInvalidSharedFunctionInfoData);\n+  }\n+  __ Ldr(\n+      sfi_data,\n+      FieldMemOperand(sfi_data, InterpreterData::kInterpreterTrampolineOffset));\n+\n+  __ Bind(&done);\n+}\n+\n void Builtins::Generate_CompileLazy(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- x0 : argument count (preserved for callee)\n@@ -1452,13 +1513,15 @@ void Builtins::Generate_CompileLazy(MacroAssembler* masm) {\n   // Is there an optimization marker or optimized code in the feedback vector?\n   MaybeTailCallOptimizedCodeSlot(masm, feedback_vector, x7, x4, x5);\n \n-  // We found no optimized code.\n+  // We found no optimized code. Infer the code object needed for the SFI.\n   Register entry = x7;\n   __ Ldr(entry,\n          FieldMemOperand(closure, JSFunction::kSharedFunctionInfoOffset));\n+  __ Ldr(entry,\n+         FieldMemOperand(entry, SharedFunctionInfo::kFunctionDataOffset));\n+  GetSharedFunctionInfoCode(masm, entry, x5);\n \n-  // If SFI points to anything other than CompileLazy, install that.\n-  __ Ldr(entry, FieldMemOperand(entry, SharedFunctionInfo::kCodeOffset));\n+  // If code entry points to anything other than CompileLazy, install that.\n   __ Move(x5, masm->CodeObject());\n   __ Cmp(entry, x5);\n   __ B(eq, &gotta_call_runtime);\n@@ -1527,25 +1590,9 @@ void Builtins::Generate_DeserializeLazy(MacroAssembler* masm) {\n \n   {\n     // If we've reached this spot, the target builtin has been deserialized and\n-    // we simply need to copy it over. First to the shared function info.\n+    // we simply need to copy it over to the target function.\n \n     Register target_builtin = scratch1;\n-    Register shared = scratch0;\n-\n-    __ Ldr(shared,\n-           FieldMemOperand(target, JSFunction::kSharedFunctionInfoOffset));\n-\n-    CHECK(!x5.is(target) && !x5.is(scratch0) && !x5.is(scratch1));\n-    CHECK(!x9.is(target) && !x9.is(scratch0) && !x9.is(scratch1));\n-\n-    __ Str(target_builtin,\n-           FieldMemOperand(shared, SharedFunctionInfo::kCodeOffset));\n-    __ Mov(x9, target_builtin);  // Write barrier clobbers x9 below.\n-    __ RecordWriteField(shared, SharedFunctionInfo::kCodeOffset, x9, x5,\n-                        kLRHasNotBeenSaved, kDontSaveFPRegs,\n-                        OMIT_REMEMBERED_SET, OMIT_SMI_CHECK);\n-\n-    // And second to the target function.\n \n     __ Str(target_builtin, FieldMemOperand(target, JSFunction::kCodeOffset));\n     __ Mov(x9, target_builtin);  // Write barrier clobbers x9 below.\n@@ -2360,7 +2407,7 @@ void Builtins::Generate_CallFunction(MacroAssembler* masm,\n   // Check that function is not a \"classConstructor\".\n   Label class_constructor;\n   __ Ldr(x2, FieldMemOperand(x1, JSFunction::kSharedFunctionInfoOffset));\n-  __ Ldr(w3, FieldMemOperand(x2, SharedFunctionInfo::kCompilerHintsOffset));\n+  __ Ldr(w3, FieldMemOperand(x2, SharedFunctionInfo::kFlagsOffset));\n   __ TestAndBranchIfAnySet(w3, SharedFunctionInfo::IsClassConstructorBit::kMask,\n                            &class_constructor);\n \n@@ -2647,18 +2694,27 @@ void Builtins::Generate_ConstructFunction(MacroAssembler* masm) {\n   //  -- x1 : the constructor to call (checked to be a JSFunction)\n   //  -- x3 : the new target (checked to be a constructor)\n   // -----------------------------------\n+  __ AssertConstructor(x1);\n   __ AssertFunction(x1);\n \n   // Calling convention for function specific ConstructStubs require\n   // x2 to contain either an AllocationSite or undefined.\n   __ LoadRoot(x2, Heap::kUndefinedValueRootIndex);\n \n-  // Tail call to the function-specific construct stub (still in the caller\n-  // context at this point).\n+  Label call_generic_stub;\n+\n+  // Jump to JSBuiltinsConstructStub or JSConstructStubGeneric.\n   __ Ldr(x4, FieldMemOperand(x1, JSFunction::kSharedFunctionInfoOffset));\n-  __ Ldr(x4, FieldMemOperand(x4, SharedFunctionInfo::kConstructStubOffset));\n-  __ Add(x4, x4, Code::kHeaderSize - kHeapObjectTag);\n-  __ Br(x4);\n+  __ Ldr(w4, FieldMemOperand(x4, SharedFunctionInfo::kFlagsOffset));\n+  __ TestAndBranchIfAllClear(\n+      w4, SharedFunctionInfo::ConstructAsBuiltinBit::kMask, &call_generic_stub);\n+\n+  __ Jump(BUILTIN_CODE(masm->isolate(), JSBuiltinsConstructStub),\n+          RelocInfo::CODE_TARGET);\n+\n+  __ bind(&call_generic_stub);\n+  __ Jump(masm->isolate()->builtins()->JSConstructStubGeneric(),\n+          RelocInfo::CODE_TARGET);\n }\n \n // static\n@@ -2668,6 +2724,7 @@ void Builtins::Generate_ConstructBoundFunction(MacroAssembler* masm) {\n   //  -- x1 : the function to call (checked to be a JSBoundFunction)\n   //  -- x3 : the new target (checked to be a constructor)\n   // -----------------------------------\n+  __ AssertConstructor(x1);\n   __ AssertBoundFunction(x1);\n \n   // Push the [[BoundArguments]] onto the stack.\n@@ -2701,16 +2758,17 @@ void Builtins::Generate_Construct(MacroAssembler* masm) {\n   Label non_constructor, non_proxy;\n   __ JumpIfSmi(x1, &non_constructor);\n \n-  // Dispatch based on instance type.\n-  __ CompareObjectType(x1, x4, x5, JS_FUNCTION_TYPE);\n-  __ Jump(BUILTIN_CODE(masm->isolate(), ConstructFunction),\n-          RelocInfo::CODE_TARGET, eq);\n-\n   // Check if target has a [[Construct]] internal method.\n+  __ Ldr(x4, FieldMemOperand(x1, HeapObject::kMapOffset));\n   __ Ldrb(x2, FieldMemOperand(x4, Map::kBitFieldOffset));\n   __ TestAndBranchIfAllClear(x2, Map::IsConstructorBit::kMask,\n                              &non_constructor);\n \n+  // Dispatch based on instance type.\n+  __ CompareInstanceType(x4, x5, JS_FUNCTION_TYPE);\n+  __ Jump(BUILTIN_CODE(masm->isolate(), ConstructFunction),\n+          RelocInfo::CODE_TARGET, eq);\n+\n   // Only dispatch to bound functions after checking whether they are\n   // constructors.\n   __ Cmp(x5, JS_BOUND_FUNCTION_TYPE);\n@@ -2977,28 +3035,35 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   {\n     FrameScope scope(masm, StackFrame::INTERNAL);\n \n+    auto wasm_instance_reg = x7;  // TODO(titzer): put in a common place.\n+\n     // Save all parameter registers (see wasm-linkage.cc). They might be\n     // overwritten in the runtime call below. We don't have any callee-saved\n     // registers in wasm, so no need to store anything else.\n-    constexpr RegList gp_regs =\n-        Register::ListOf<x0, x1, x2, x3, x4, x5, x6, x7>();\n+    constexpr RegList gp_regs = Register::ListOf<x0, x1, x2, x3, x4, x5>();\n     constexpr RegList fp_regs =\n         Register::ListOf<d0, d1, d2, d3, d4, d5, d6, d7>();\n     __ PushXRegList(gp_regs);\n     __ PushDRegList(fp_regs);\n+    __ Push(x5, x6);  // note: pushed twice because alignment required\n \n-    // Initialize cp register with kZero, CEntryStub will use it to set the\n-    // current context on the isolate.\n+    // Pass the WASM instance as an explicit argument to WasmCompileLazy.\n+    __ PushArgument(wasm_instance_reg);\n+    // Initialize the JavaScript context with 0. CEntryStub will use it to\n+    // set the current context on the isolate.\n     __ Move(cp, Smi::kZero);\n     __ CallRuntime(Runtime::kWasmCompileLazy);\n-    // Store returned instruction start in x8.\n-    __ Add(x8, x0, Code::kHeaderSize - kHeapObjectTag);\n+    // The entrypoint address is the first return value.\n+    __ mov(x8, kReturnRegister0);\n+    // The WASM instance is the second return value.\n+    __ mov(wasm_instance_reg, kReturnRegister1);\n \n     // Restore registers.\n+    __ Pop(x6, x5);  // note: pushed twice because alignment required\n     __ PopDRegList(fp_regs);\n     __ PopXRegList(gp_regs);\n   }\n-  // Now jump to the instructions of the returned code object.\n+  // Finally, jump to the entrypoint.\n   __ Jump(x8);\n }\n "
        },
        {
            "sha": "ce19bf86624ec59bf5feba63e6505ede14fb5743",
            "filename": "deps/v8/src/builtins/builtins-api.cc",
            "status": "modified",
            "additions": 42,
            "deletions": 25,
            "changes": 67,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-api.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -4,7 +4,7 @@\n \n #include \"src/builtins/builtins.h\"\n \n-#include \"src/api-arguments.h\"\n+#include \"src/api-arguments-inl.h\"\n #include \"src/api-natives.h\"\n #include \"src/builtins/builtins-utils.h\"\n #include \"src/counters.h\"\n@@ -21,21 +21,17 @@ namespace {\n // Returns the holder JSObject if the function can legally be called with this\n // receiver.  Returns nullptr if the call is illegal.\n // TODO(dcarney): CallOptimization duplicates this logic, merge.\n-JSReceiver* GetCompatibleReceiver(Isolate* isolate, FunctionTemplateInfo* info,\n-                                  JSReceiver* receiver) {\n+JSObject* GetCompatibleReceiver(Isolate* isolate, FunctionTemplateInfo* info,\n+                                JSObject* receiver) {\n   Object* recv_type = info->signature();\n   // No signature, return holder.\n   if (!recv_type->IsFunctionTemplateInfo()) return receiver;\n-  // A Proxy cannot have been created from the signature template.\n-  if (!receiver->IsJSObject()) return nullptr;\n-\n-  JSObject* js_obj_receiver = JSObject::cast(receiver);\n   FunctionTemplateInfo* signature = FunctionTemplateInfo::cast(recv_type);\n \n   // Check the receiver. Fast path for receivers with no hidden prototypes.\n-  if (signature->IsTemplateFor(js_obj_receiver)) return receiver;\n-  if (!js_obj_receiver->map()->has_hidden_prototype()) return nullptr;\n-  for (PrototypeIterator iter(isolate, js_obj_receiver, kStartAtPrototype,\n+  if (signature->IsTemplateFor(receiver)) return receiver;\n+  if (!receiver->map()->has_hidden_prototype()) return nullptr;\n+  for (PrototypeIterator iter(isolate, receiver, kStartAtPrototype,\n                               PrototypeIterator::END_AT_NON_HIDDEN);\n        !iter.IsAtEnd(); iter.Advance()) {\n     JSObject* current = iter.GetCurrent<JSObject>();\n@@ -45,12 +41,12 @@ JSReceiver* GetCompatibleReceiver(Isolate* isolate, FunctionTemplateInfo* info,\n }\n \n template <bool is_construct>\n-MUST_USE_RESULT MaybeHandle<Object> HandleApiCallHelper(\n+V8_WARN_UNUSED_RESULT MaybeHandle<Object> HandleApiCallHelper(\n     Isolate* isolate, Handle<HeapObject> function,\n     Handle<HeapObject> new_target, Handle<FunctionTemplateInfo> fun_data,\n     Handle<Object> receiver, BuiltinArguments args) {\n-  Handle<JSReceiver> js_receiver;\n-  JSReceiver* raw_holder;\n+  Handle<JSObject> js_receiver;\n+  JSObject* raw_holder;\n   if (is_construct) {\n     DCHECK(args.receiver()->IsTheHole(isolate));\n     if (fun_data->instance_template()->IsUndefined(isolate)) {\n@@ -72,18 +68,21 @@ MUST_USE_RESULT MaybeHandle<Object> HandleApiCallHelper(\n     raw_holder = *js_receiver;\n   } else {\n     DCHECK(receiver->IsJSReceiver());\n-    js_receiver = Handle<JSReceiver>::cast(receiver);\n+\n+    if (!receiver->IsJSObject()) {\n+      // This function cannot be called with the given receiver.  Abort!\n+      THROW_NEW_ERROR(\n+          isolate, NewTypeError(MessageTemplate::kIllegalInvocation), Object);\n+    }\n+\n+    js_receiver = Handle<JSObject>::cast(receiver);\n \n     if (!fun_data->accept_any_receiver() &&\n-        js_receiver->IsAccessCheckNeeded()) {\n-      // Proxies never need access checks.\n-      DCHECK(js_receiver->IsJSObject());\n-      Handle<JSObject> js_obj_receiver = Handle<JSObject>::cast(js_receiver);\n-      if (!isolate->MayAccess(handle(isolate->context()), js_obj_receiver)) {\n-        isolate->ReportFailedAccessCheck(js_obj_receiver);\n-        RETURN_EXCEPTION_IF_SCHEDULED_EXCEPTION(isolate, Object);\n-        return isolate->factory()->undefined_value();\n-      }\n+        js_receiver->IsAccessCheckNeeded() &&\n+        !isolate->MayAccess(handle(isolate->context()), js_receiver)) {\n+      isolate->ReportFailedAccessCheck(js_receiver);\n+      RETURN_EXCEPTION_IF_SCHEDULED_EXCEPTION(isolate, Object);\n+      return isolate->factory()->undefined_value();\n     }\n \n     raw_holder = GetCompatibleReceiver(isolate, *fun_data, *js_receiver);\n@@ -180,6 +179,25 @@ MaybeHandle<Object> Builtins::InvokeApiFunction(Isolate* isolate,\n     }\n   }\n \n+  if (function->IsFunctionTemplateInfo()) {\n+    Handle<FunctionTemplateInfo> info =\n+        Handle<FunctionTemplateInfo>::cast(function);\n+    // If we need to break at function entry, go the long way. Instantiate the\n+    // function, use the DebugBreakTrampoline, and call it through JS.\n+    if (info->BreakAtEntry()) {\n+      DCHECK(!is_construct);\n+      DCHECK(new_target->IsUndefined(isolate));\n+      Handle<JSFunction> function;\n+      ASSIGN_RETURN_ON_EXCEPTION(isolate, function,\n+                                 ApiNatives::InstantiateFunction(\n+                                     info, MaybeHandle<v8::internal::Name>()),\n+                                 Object);\n+      Handle<Code> trampoline = BUILTIN_CODE(isolate, DebugBreakTrampoline);\n+      function->set_code(*trampoline);\n+      return Execution::Call(isolate, function, receiver, argc, args);\n+    }\n+  }\n+\n   Handle<FunctionTemplateInfo> fun_data =\n       function->IsFunctionTemplateInfo()\n           ? Handle<FunctionTemplateInfo>::cast(function)\n@@ -224,7 +242,7 @@ MaybeHandle<Object> Builtins::InvokeApiFunction(Isolate* isolate,\n // Helper function to handle calls to non-function objects created through the\n // API. The object can be called as either a constructor (using new) or just as\n // a function (without new).\n-MUST_USE_RESULT static Object* HandleApiCallAsFunctionOrConstructor(\n+V8_WARN_UNUSED_RESULT static Object* HandleApiCallAsFunctionOrConstructor(\n     Isolate* isolate, bool is_construct_call, BuiltinArguments args) {\n   Handle<Object> receiver = args.receiver();\n \n@@ -259,7 +277,6 @@ MUST_USE_RESULT static Object* HandleApiCallAsFunctionOrConstructor(\n   {\n     HandleScope scope(isolate);\n     LOG(isolate, ApiObjectAccess(\"call non-function\", obj));\n-\n     FunctionCallbackArguments custom(isolate, call_data->data(), constructor,\n                                      obj, new_target, &args[0] - 1,\n                                      args.length() - 1);"
        },
        {
            "sha": "cca395b2ced3f2c9e770edff1ba57408ff35689f",
            "filename": "deps/v8/src/builtins/builtins-array-gen.cc",
            "status": "modified",
            "additions": 907,
            "deletions": 660,
            "changes": 1567,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -8,8 +8,8 @@\n #include \"src/builtins/builtins-utils-gen.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-stub-assembler.h\"\n-#include \"src/factory-inl.h\"\n #include \"src/frame-constants.h\"\n+#include \"src/heap/factory-inl.h\"\n \n #include \"src/builtins/builtins-array-gen.h\"\n \n@@ -151,7 +151,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n       BIND(&fast);\n       {\n         GotoIf(SmiNotEqual(LoadJSArrayLength(a()), to_.value()), &runtime);\n-        kind = EnsureArrayPushable(a(), &runtime);\n+        kind = EnsureArrayPushable(LoadMap(a()), &runtime);\n         GotoIf(IsElementsKindGreaterThan(kind, HOLEY_SMI_ELEMENTS),\n                &object_push_pre);\n \n@@ -214,8 +214,9 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     CSA_ASSERT(this,\n                SmiLessThanOrEqual(\n                    len_, LoadObjectField(a, JSTypedArray::kLengthOffset)));\n-    fast_typed_array_target_ = Word32Equal(LoadInstanceType(LoadElements(o_)),\n-                                           LoadInstanceType(LoadElements(a)));\n+    fast_typed_array_target_ =\n+        Word32Equal(LoadInstanceType(LoadElements(original_array)),\n+                    LoadInstanceType(LoadElements(a)));\n     a_.Bind(a);\n   }\n \n@@ -413,15 +414,15 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n     // 3. Let len be ToLength(Get(O, \"length\")).\n     // 4. ReturnIfAbrupt(len).\n-    VARIABLE(merged_length, MachineRepresentation::kTagged);\n+    TVARIABLE(Number, merged_length);\n     Label has_length(this, &merged_length), not_js_array(this);\n     GotoIf(DoesntHaveInstanceType(o(), JS_ARRAY_TYPE), &not_js_array);\n-    merged_length.Bind(LoadJSArrayLength(o()));\n+    merged_length = LoadJSArrayLength(CAST(o()));\n     Goto(&has_length);\n     BIND(&not_js_array);\n     Node* len_property =\n         GetProperty(context(), o(), isolate()->factory()->length_string());\n-    merged_length.Bind(ToLength_Inline(context(), len_property));\n+    merged_length = ToLength_Inline(context(), len_property);\n     Goto(&has_length);\n     BIND(&has_length);\n     len_ = merged_length.value();\n@@ -466,7 +467,8 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n   void ArrayBuiltinsAssembler::InitIteratingArrayBuiltinLoopContinuation(\n       TNode<Context> context, TNode<Object> receiver, Node* callbackfn,\n-      Node* this_arg, Node* a, Node* o, Node* initial_k, Node* len, Node* to) {\n+      Node* this_arg, Node* a, TNode<JSReceiver> o, Node* initial_k,\n+      TNode<Number> len, Node* to) {\n     context_ = context;\n     this_arg_ = this_arg;\n     callbackfn_ = callbackfn;\n@@ -489,14 +491,17 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n         throw_detached(this, Label::kDeferred);\n \n     GotoIf(TaggedIsSmi(receiver_), &throw_not_typed_array);\n-    GotoIfNot(HasInstanceType(receiver_, JS_TYPED_ARRAY_TYPE),\n+    GotoIfNot(HasInstanceType(CAST(receiver_), JS_TYPED_ARRAY_TYPE),\n               &throw_not_typed_array);\n \n-    o_ = receiver_;\n-    Node* array_buffer = LoadObjectField(o_, JSTypedArray::kBufferOffset);\n+    TNode<JSTypedArray> typed_array = CAST(receiver_);\n+    o_ = typed_array;\n+\n+    Node* array_buffer =\n+        LoadObjectField(typed_array, JSTypedArray::kBufferOffset);\n     GotoIf(IsDetachedBuffer(array_buffer), &throw_detached);\n \n-    len_ = LoadObjectField(o_, JSTypedArray::kLengthOffset);\n+    len_ = LoadObjectField<Smi>(typed_array, JSTypedArray::kLengthOffset);\n \n     Label throw_not_callable(this, Label::kDeferred);\n     Label distinguish_types(this);\n@@ -540,7 +545,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     } else {\n       k_.Bind(NumberDec(len()));\n     }\n-    Node* instance_type = LoadInstanceType(LoadElements(o_));\n+    Node* instance_type = LoadInstanceType(LoadElements(typed_array));\n     Switch(instance_type, &unexpected_instance_type, instance_types.data(),\n            label_ptrs.data(), labels.size());\n \n@@ -552,7 +557,8 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n       // TODO(tebbi): Silently cancelling the loop on buffer detachment is a\n       // spec violation. Should go to &throw_detached and throw a TypeError\n       // instead.\n-      VisitAllTypedArrayElements(array_buffer, processor, &done, direction);\n+      VisitAllTypedArrayElements(array_buffer, processor, &done, direction,\n+                                 typed_array);\n       Goto(&done);\n       // No exception, return success\n       BIND(&done);\n@@ -638,12 +644,12 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n \n   void ArrayBuiltinsAssembler::VisitAllTypedArrayElements(\n       Node* array_buffer, const CallResultProcessor& processor, Label* detached,\n-      ForEachDirection direction) {\n+      ForEachDirection direction, TNode<JSTypedArray> typed_array) {\n     VariableList list({&a_, &k_, &to_}, zone());\n \n     FastLoopBody body = [&](Node* index) {\n       GotoIf(IsDetachedBuffer(array_buffer), detached);\n-      Node* elements = LoadElements(o_);\n+      Node* elements = LoadElements(typed_array);\n       Node* base_ptr =\n           LoadObjectField(elements, FixedTypedArrayBase::kBasePointerOffset);\n       Node* external_ptr =\n@@ -671,13 +677,13 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n   void ArrayBuiltinsAssembler::VisitAllFastElementsOneKind(\n       ElementsKind kind, const CallResultProcessor& processor,\n       Label* array_changed, ParameterMode mode, ForEachDirection direction,\n-      MissingPropertyMode missing_property_mode) {\n+      MissingPropertyMode missing_property_mode, TNode<Smi> length) {\n     Comment(\"begin VisitAllFastElementsOneKind\");\n     VARIABLE(original_map, MachineRepresentation::kTagged);\n     original_map.Bind(LoadMap(o()));\n     VariableList list({&original_map, &a_, &k_, &to_}, zone());\n     Node* start = IntPtrOrSmiConstant(0, mode);\n-    Node* end = TaggedToParameter(len(), mode);\n+    Node* end = TaggedToParameter(length, mode);\n     IndexAdvanceMode advance_mode = direction == ForEachDirection::kReverse\n                                         ? IndexAdvanceMode::kPre\n                                         : IndexAdvanceMode::kPost;\n@@ -695,13 +701,14 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n           Node* o_map = LoadMap(o());\n           GotoIf(WordNotEqual(o_map, original_map.value()), array_changed);\n \n+          TNode<JSArray> o_array = CAST(o());\n           // Check if o's length has changed during the callback and if the\n           // index is now out of range of the new length.\n-          GotoIf(SmiGreaterThanOrEqual(k_.value(), LoadJSArrayLength(o())),\n+          GotoIf(SmiGreaterThanOrEqual(k_.value(), LoadJSArrayLength(o_array)),\n                  array_changed);\n \n           // Re-load the elements array. If may have been resized.\n-          Node* elements = LoadElements(o());\n+          Node* elements = LoadElements(o_array);\n \n           // Fast case: load the element directly from the elements FixedArray\n           // and call the callback if the element is not the hole.\n@@ -757,6 +764,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n                         &switch_on_elements_kind, slow);\n \n     BIND(&switch_on_elements_kind);\n+    TNode<Smi> smi_len = CAST(len());\n     // Select by ElementsKind\n     Node* o_map = LoadMap(o());\n     Node* bit_field2 = LoadMapBitField2(o_map);\n@@ -768,7 +776,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     BIND(&fast_elements);\n     {\n       VisitAllFastElementsOneKind(PACKED_ELEMENTS, processor, slow, mode,\n-                                  direction, missing_property_mode);\n+                                  direction, missing_property_mode, smi_len);\n \n       action(this);\n \n@@ -783,7 +791,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     BIND(&fast_double_elements);\n     {\n       VisitAllFastElementsOneKind(PACKED_DOUBLE_ELEMENTS, processor, slow, mode,\n-                                  direction, missing_property_mode);\n+                                  direction, missing_property_mode, smi_len);\n \n       action(this);\n \n@@ -807,7 +815,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     GotoIfNot(IsPrototypeInitialArrayPrototype(context(), original_map),\n               &runtime);\n \n-    Node* species_protector = SpeciesProtectorConstant();\n+    Node* species_protector = ArraySpeciesProtectorConstant();\n     Node* value =\n         LoadObjectField(species_protector, PropertyCell::kValueOffset);\n     TNode<Smi> const protector_invalid =\n@@ -841,8 +849,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n   }\n \n   // Perform ArraySpeciesCreate (ES6 #sec-arrayspeciescreate).\n-  void ArrayBuiltinsAssembler::GenerateArraySpeciesCreate(\n-      SloppyTNode<Smi> len) {\n+  void ArrayBuiltinsAssembler::GenerateArraySpeciesCreate(TNode<Number> len) {\n     Label runtime(this, Label::kDeferred), done(this);\n \n     Node* const original_map = LoadMap(o());\n@@ -853,7 +860,7 @@ Node* ArrayBuiltinsAssembler::FindProcessor(Node* k_value, Node* k) {\n     GotoIfNot(IsPrototypeInitialArrayPrototype(context(), original_map),\n               &runtime);\n \n-    Node* species_protector = SpeciesProtectorConstant();\n+    Node* species_protector = ArraySpeciesProtectorConstant();\n     Node* value =\n         LoadObjectField(species_protector, PropertyCell::kValueOffset);\n     Node* const protector_invalid = SmiConstant(Isolate::kProtectorInvalid);\n@@ -1019,7 +1026,7 @@ TF_BUILTIN(ArrayPrototypePush, CodeStubAssembler) {\n   {\n     array_receiver = CAST(receiver);\n     arg_index = IntPtrConstant(0);\n-    kind = EnsureArrayPushable(array_receiver, &runtime);\n+    kind = EnsureArrayPushable(LoadMap(array_receiver), &runtime);\n     GotoIf(IsElementsKindGreaterThan(kind, HOLEY_SMI_ELEMENTS),\n            &object_push_pre);\n \n@@ -1146,7 +1153,7 @@ class ArrayPrototypeSliceCodeStubAssembler : public CodeStubAssembler {\n \n     GotoIf(IsNoElementsProtectorCellInvalid(), slow);\n \n-    GotoIf(IsSpeciesProtectorCellInvalid(), slow);\n+    GotoIf(IsArraySpeciesProtectorCellInvalid(), slow);\n \n     // Bailout if receiver has slow elements.\n     Node* elements_kind = LoadMapElementsKind(map);\n@@ -1647,9 +1654,9 @@ TF_BUILTIN(ArrayFindLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -1670,7 +1677,7 @@ TF_BUILTIN(ArrayFindLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArrayFindLoopContinuation, context, receiver,\n                      callbackfn, this_arg, UndefinedConstant(), receiver,\n@@ -1685,7 +1692,7 @@ TF_BUILTIN(ArrayFindLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArrayFindLoopContinuation, context, receiver,\n                      callbackfn, this_arg, UndefinedConstant(), receiver,\n@@ -1702,7 +1709,7 @@ TF_BUILTIN(ArrayFindLoopAfterCallbackLazyDeoptContinuation,\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* found_value = Parameter(Descriptor::kFoundValue);\n   Node* is_found = Parameter(Descriptor::kIsFound);\n \n@@ -1748,9 +1755,9 @@ TF_BUILTIN(ArrayFindIndexLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -1769,7 +1776,7 @@ TF_BUILTIN(ArrayFindIndexLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArrayFindIndexLoopContinuation, context,\n                      receiver, callbackfn, this_arg, SmiConstant(-1), receiver,\n@@ -1782,7 +1789,7 @@ TF_BUILTIN(ArrayFindIndexLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArrayFindIndexLoopContinuation, context,\n                      receiver, callbackfn, this_arg, SmiConstant(-1), receiver,\n@@ -1796,7 +1803,7 @@ TF_BUILTIN(ArrayFindIndexLoopAfterCallbackLazyDeoptContinuation,\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* found_value = Parameter(Descriptor::kFoundValue);\n   Node* is_found = Parameter(Descriptor::kIsFound);\n \n@@ -1938,13 +1945,10 @@ class ArrayPopulatorAssembler : public CodeStubAssembler {\n   void GenerateSetLength(TNode<Context> context, TNode<Object> array,\n                          TNode<Number> length) {\n     Label fast(this), runtime(this), done(this);\n-    // TODO(delphick): We should be able to skip the fast set altogether, if the\n-    // length already equals the expected length, which it always is now on the\n-    // fast path.\n-    // Only set the length in this stub if\n-    // 1) the array has fast elements,\n-    // 2) the length is writable,\n-    // 3) the new length is equal to the old length.\n+    // There's no need to set the length, if\n+    // 1) the array is a fast JS array and\n+    // 2) the new length is equal to the old length.\n+    // as the set is not observable. Otherwise fall back to the run-time.\n \n     // 1) Check that the array has fast elements.\n     // TODO(delphick): Consider changing this since it does an an unnecessary\n@@ -1961,20 +1965,11 @@ class ArrayPopulatorAssembler : public CodeStubAssembler {\n       TNode<Smi> old_length = LoadFastJSArrayLength(fast_array);\n       CSA_ASSERT(this, TaggedIsPositiveSmi(old_length));\n \n-      // 2) Ensure that the length is writable.\n-      // TODO(delphick): This check may be redundant due to the\n-      // BranchIfFastJSArray above.\n-      EnsureArrayLengthWritable(LoadMap(fast_array), &runtime);\n-\n-      // 3) If the created array's length does not match the required length,\n-      //    then use the runtime to set the property as that will insert holes\n-      //    into excess elements or shrink the backing store as appropriate.\n-      GotoIf(SmiNotEqual(length_smi, old_length), &runtime);\n-\n-      StoreObjectFieldNoWriteBarrier(fast_array, JSArray::kLengthOffset,\n-                                     length_smi);\n-\n-      Goto(&done);\n+      // 2) If the created array's length matches the required length, then\n+      //    there's nothing else to do. Otherwise use the runtime to set the\n+      //    property as that will insert holes into excess elements or shrink\n+      //    the backing store as appropriate.\n+      Branch(SmiNotEqual(length_smi, old_length), &runtime, &done);\n     }\n \n     BIND(&runtime);\n@@ -2128,14 +2123,11 @@ TF_BUILTIN(ArrayFrom, ArrayPopulatorAssembler) {\n     }\n   }\n \n-  // Since there's no iterator, items cannot be a Fast JS Array.\n   BIND(&not_iterable);\n   {\n-    CSA_ASSERT(this, Word32BinaryNot(IsFastJSArray(array_like, context)));\n-\n     // Treat array_like as an array and try to get its length.\n-    length = CAST(ToLength_Inline(\n-        context, GetProperty(context, array_like, factory()->length_string())));\n+    length = ToLength_Inline(\n+        context, GetProperty(context, array_like, factory()->length_string()));\n \n     // Construct an array using the receiver as constructor with the same length\n     // as the input array.\n@@ -2257,9 +2249,9 @@ TF_BUILTIN(ArrayForEachLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -2277,7 +2269,7 @@ TF_BUILTIN(ArrayForEachLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArrayForEachLoopContinuation, context, receiver,\n                      callbackfn, this_arg, UndefinedConstant(), receiver,\n@@ -2290,7 +2282,7 @@ TF_BUILTIN(ArrayForEachLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArrayForEachLoopContinuation, context, receiver,\n                      callbackfn, this_arg, UndefinedConstant(), receiver,\n@@ -2345,7 +2337,7 @@ TF_BUILTIN(ArraySomeLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* result = Parameter(Descriptor::kResult);\n \n   // This custom lazy deopt point is right after the callback. every() needs\n@@ -2374,7 +2366,7 @@ TF_BUILTIN(ArraySomeLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArraySomeLoopContinuation, context, receiver,\n                      callbackfn, this_arg, FalseConstant(), receiver, initial_k,\n@@ -2387,9 +2379,9 @@ TF_BUILTIN(ArraySomeLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -2448,7 +2440,7 @@ TF_BUILTIN(ArrayEveryLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* result = Parameter(Descriptor::kResult);\n \n   // This custom lazy deopt point is right after the callback. every() needs\n@@ -2477,7 +2469,7 @@ TF_BUILTIN(ArrayEveryLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArrayEveryLoopContinuation, context, receiver,\n                      callbackfn, this_arg, TrueConstant(), receiver, initial_k,\n@@ -2490,9 +2482,9 @@ TF_BUILTIN(ArrayEveryLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -2551,9 +2543,9 @@ TF_BUILTIN(ArrayReduceLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* accumulator = Parameter(Descriptor::kAccumulator);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -2570,16 +2562,14 @@ TF_BUILTIN(ArrayReducePreLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n-  Callable stub(\n-      Builtins::CallableFor(isolate(), Builtins::kArrayReduceLoopContinuation));\n   // Simulate starting the loop at 0, but ensuring that the accumulator is\n   // the hole. The continuation stub will search for the initial non-hole\n   // element, rightly throwing an exception if not found.\n-  Return(CallStub(stub, context, receiver, callbackfn, UndefinedConstant(),\n-                  TheHoleConstant(), receiver, SmiConstant(0), len,\n-                  UndefinedConstant()));\n+  Return(CallBuiltin(Builtins::kArrayReduceLoopContinuation, context, receiver,\n+                     callbackfn, UndefinedConstant(), TheHoleConstant(),\n+                     receiver, SmiConstant(0), len, UndefinedConstant()));\n }\n \n TF_BUILTIN(ArrayReduceLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n@@ -2588,26 +2578,24 @@ TF_BUILTIN(ArrayReduceLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* accumulator = Parameter(Descriptor::kAccumulator);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n-  Callable stub(\n-      Builtins::CallableFor(isolate(), Builtins::kArrayReduceLoopContinuation));\n-  Return(CallStub(stub, context, receiver, callbackfn, UndefinedConstant(),\n-                  accumulator, receiver, initial_k, len, UndefinedConstant()));\n+  Return(CallBuiltin(Builtins::kArrayReduceLoopContinuation, context, receiver,\n+                     callbackfn, UndefinedConstant(), accumulator, receiver,\n+                     initial_k, len, UndefinedConstant()));\n }\n \n TF_BUILTIN(ArrayReduceLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* result = Parameter(Descriptor::kResult);\n \n-  Callable stub(\n-      Builtins::CallableFor(isolate(), Builtins::kArrayReduceLoopContinuation));\n-  Return(CallStub(stub, context, receiver, callbackfn, UndefinedConstant(),\n-                  result, receiver, initial_k, len, UndefinedConstant()));\n+  Return(CallBuiltin(Builtins::kArrayReduceLoopContinuation, context, receiver,\n+                     callbackfn, UndefinedConstant(), result, receiver,\n+                     initial_k, len, UndefinedConstant()));\n }\n \n TF_BUILTIN(ArrayReduce, ArrayBuiltinsAssembler) {\n@@ -2657,9 +2645,9 @@ TF_BUILTIN(ArrayReduceRightLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* accumulator = Parameter(Descriptor::kAccumulator);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -2677,16 +2665,15 @@ TF_BUILTIN(ArrayReduceRightPreLoopEagerDeoptContinuation,\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Smi> len = CAST(Parameter(Descriptor::kLength));\n \n-  Callable stub(Builtins::CallableFor(\n-      isolate(), Builtins::kArrayReduceRightLoopContinuation));\n   // Simulate starting the loop at 0, but ensuring that the accumulator is\n   // the hole. The continuation stub will search for the initial non-hole\n   // element, rightly throwing an exception if not found.\n-  Return(CallStub(stub, context, receiver, callbackfn, UndefinedConstant(),\n-                  TheHoleConstant(), receiver, SmiConstant(0), len,\n-                  UndefinedConstant()));\n+  Return(CallBuiltin(Builtins::kArrayReduceRightLoopContinuation, context,\n+                     receiver, callbackfn, UndefinedConstant(),\n+                     TheHoleConstant(), receiver, SmiSub(len, SmiConstant(1)),\n+                     len, UndefinedConstant()));\n }\n \n TF_BUILTIN(ArrayReduceRightLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n@@ -2695,26 +2682,24 @@ TF_BUILTIN(ArrayReduceRightLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* accumulator = Parameter(Descriptor::kAccumulator);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n-  Callable stub(Builtins::CallableFor(\n-      isolate(), Builtins::kArrayReduceRightLoopContinuation));\n-  Return(CallStub(stub, context, receiver, callbackfn, UndefinedConstant(),\n-                  accumulator, receiver, initial_k, len, UndefinedConstant()));\n+  Return(CallBuiltin(Builtins::kArrayReduceRightLoopContinuation, context,\n+                     receiver, callbackfn, UndefinedConstant(), accumulator,\n+                     receiver, initial_k, len, UndefinedConstant()));\n }\n \n TF_BUILTIN(ArrayReduceRightLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* result = Parameter(Descriptor::kResult);\n \n-  Callable stub(Builtins::CallableFor(\n-      isolate(), Builtins::kArrayReduceRightLoopContinuation));\n-  Return(CallStub(stub, context, receiver, callbackfn, UndefinedConstant(),\n-                  result, receiver, initial_k, len, UndefinedConstant()));\n+  Return(CallBuiltin(Builtins::kArrayReduceRightLoopContinuation, context,\n+                     receiver, callbackfn, UndefinedConstant(), result,\n+                     receiver, initial_k, len, UndefinedConstant()));\n }\n \n TF_BUILTIN(ArrayReduceRight, ArrayBuiltinsAssembler) {\n@@ -2767,9 +2752,9 @@ TF_BUILTIN(ArrayFilterLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -2788,7 +2773,7 @@ TF_BUILTIN(ArrayFilterLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   Return(CallBuiltin(Builtins::kArrayFilterLoopContinuation, context, receiver,\n@@ -2803,7 +2788,7 @@ TF_BUILTIN(ArrayFilterLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* value_k = Parameter(Descriptor::kValueK);\n   Node* result = Parameter(Descriptor::kResult);\n \n@@ -2864,9 +2849,9 @@ TF_BUILTIN(ArrayMapLoopContinuation, ArrayBuiltinsAssembler) {\n   Node* callbackfn = Parameter(Descriptor::kCallbackFn);\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n-  Node* object = Parameter(Descriptor::kObject);\n+  TNode<JSReceiver> object = CAST(Parameter(Descriptor::kObject));\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* to = Parameter(Descriptor::kTo);\n \n   InitIteratingArrayBuiltinLoopContinuation(context, receiver, callbackfn,\n@@ -2885,7 +2870,7 @@ TF_BUILTIN(ArrayMapLoopEagerDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n \n   Return(CallBuiltin(Builtins::kArrayMapLoopContinuation, context, receiver,\n                      callbackfn, this_arg, array, receiver, initial_k, len,\n@@ -2899,7 +2884,7 @@ TF_BUILTIN(ArrayMapLoopLazyDeoptContinuation, ArrayBuiltinsAssembler) {\n   Node* this_arg = Parameter(Descriptor::kThisArg);\n   Node* array = Parameter(Descriptor::kArray);\n   Node* initial_k = Parameter(Descriptor::kInitialK);\n-  Node* len = Parameter(Descriptor::kLength);\n+  TNode<Number> len = CAST(Parameter(Descriptor::kLength));\n   Node* result = Parameter(Descriptor::kResult);\n \n   // This custom lazy deopt point is right after the callback. map() needs\n@@ -2965,7 +2950,7 @@ TF_BUILTIN(ArrayIsArray, CodeStubAssembler) {\n   Label call_runtime(this), return_true(this), return_false(this);\n \n   GotoIf(TaggedIsSmi(object), &return_false);\n-  TNode<Word32T> instance_type = LoadInstanceType(CAST(object));\n+  TNode<Int32T> instance_type = LoadInstanceType(CAST(object));\n \n   GotoIf(InstanceTypeEqual(instance_type, JS_ARRAY_TYPE), &return_true);\n \n@@ -2991,6 +2976,15 @@ class ArrayIncludesIndexofAssembler : public CodeStubAssembler {\n   enum SearchVariant { kIncludes, kIndexOf };\n \n   void Generate(SearchVariant variant);\n+  void GenerateSmiOrObject(SearchVariant variant, Node* context, Node* elements,\n+                           Node* search_element, Node* array_length,\n+                           Node* from_index);\n+  void GeneratePackedDoubles(SearchVariant variant, Node* elements,\n+                             Node* search_element, Node* array_length,\n+                             Node* from_index);\n+  void GenerateHoleyDoubles(SearchVariant variant, Node* elements,\n+                            Node* search_element, Node* array_length,\n+                            Node* from_index);\n };\n \n void ArrayIncludesIndexofAssembler::Generate(SearchVariant variant) {\n@@ -3008,8 +3002,7 @@ void ArrayIncludesIndexofAssembler::Generate(SearchVariant variant) {\n \n   Node* intptr_zero = IntPtrConstant(0);\n \n-  Label init_index(this), return_found(this), return_not_found(this),\n-      call_runtime(this);\n+  Label init_index(this), return_not_found(this), call_runtime(this);\n \n   // Take slow path if not a JSArray, if retrieving elements requires\n   // traversing prototype, or if access checks are required.\n@@ -3021,7 +3014,8 @@ void ArrayIncludesIndexofAssembler::Generate(SearchVariant variant) {\n \n   // JSArray length is always a positive Smi for fast arrays.\n   CSA_ASSERT(this, TaggedIsPositiveSmi(LoadJSArrayLength(array)));\n-  Node* array_length = SmiUntag(LoadFastJSArrayLength(array));\n+  Node* array_length = LoadFastJSArrayLength(array);\n+  Node* array_length_untagged = SmiUntag(array_length);\n \n   {\n     // Initialize fromIndex.\n@@ -3049,7 +3043,7 @@ void ArrayIncludesIndexofAssembler::Generate(SearchVariant variant) {\n \n       GotoIf(IntPtrGreaterThanOrEqual(index_var.value(), intptr_zero), &done);\n       // The fromIndex is negative: add it to the array's length.\n-      index_var.Bind(IntPtrAdd(array_length, index_var.value()));\n+      index_var.Bind(IntPtrAdd(array_length_untagged, index_var.value()));\n       // Clamp negative results at zero.\n       GotoIf(IntPtrGreaterThanOrEqual(index_var.value(), intptr_zero), &done);\n       index_var.Bind(intptr_zero);\n@@ -3059,7 +3053,7 @@ void ArrayIncludesIndexofAssembler::Generate(SearchVariant variant) {\n   }\n \n   // Fail early if startIndex >= array.length.\n-  GotoIf(IntPtrGreaterThanOrEqual(index_var.value(), array_length),\n+  GotoIf(IntPtrGreaterThanOrEqual(index_var.value(), array_length_untagged),\n          &return_not_found);\n \n   Label if_smiorobjects(this), if_packed_doubles(this), if_holey_doubles(this);\n@@ -3080,179 +3074,139 @@ void ArrayIncludesIndexofAssembler::Generate(SearchVariant variant) {\n \n   BIND(&if_smiorobjects);\n   {\n-    VARIABLE(search_num, MachineRepresentation::kFloat64);\n-    Label ident_loop(this, &index_var), heap_num_loop(this, &search_num),\n-        string_loop(this), bigint_loop(this, &index_var),\n-        undef_loop(this, &index_var), not_smi(this), not_heap_num(this);\n-\n-    GotoIfNot(TaggedIsSmi(search_element), &not_smi);\n-    search_num.Bind(SmiToFloat64(CAST(search_element)));\n-    Goto(&heap_num_loop);\n-\n-    BIND(&not_smi);\n-    if (variant == kIncludes) {\n-      GotoIf(IsUndefined(search_element), &undef_loop);\n-    }\n-    Node* map = LoadMap(CAST(search_element));\n-    GotoIfNot(IsHeapNumberMap(map), &not_heap_num);\n-    search_num.Bind(LoadHeapNumberValue(CAST(search_element)));\n-    Goto(&heap_num_loop);\n-\n-    BIND(&not_heap_num);\n-    Node* search_type = LoadMapInstanceType(map);\n-    GotoIf(IsStringInstanceType(search_type), &string_loop);\n-    GotoIf(IsBigIntInstanceType(search_type), &bigint_loop);\n-    Goto(&ident_loop);\n-\n-    BIND(&ident_loop);\n-    {\n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                &return_not_found);\n-      Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n-      GotoIf(WordEqual(element_k, search_element), &return_found);\n+    Callable callable =\n+        (variant == kIncludes)\n+            ? Builtins::CallableFor(isolate(),\n+                                    Builtins::kArrayIncludesSmiOrObject)\n+            : Builtins::CallableFor(isolate(),\n+                                    Builtins::kArrayIndexOfSmiOrObject);\n+    Node* result = CallStub(callable, context, elements, search_element,\n+                            array_length, SmiTag(index_var.value()));\n+    args.PopAndReturn(result);\n+  }\n \n-      Increment(&index_var);\n-      Goto(&ident_loop);\n-    }\n+  BIND(&if_packed_doubles);\n+  {\n+    Callable callable =\n+        (variant == kIncludes)\n+            ? Builtins::CallableFor(isolate(),\n+                                    Builtins::kArrayIncludesPackedDoubles)\n+            : Builtins::CallableFor(isolate(),\n+                                    Builtins::kArrayIndexOfPackedDoubles);\n+    Node* result = CallStub(callable, context, elements, search_element,\n+                            array_length, SmiTag(index_var.value()));\n+    args.PopAndReturn(result);\n+  }\n \n-    if (variant == kIncludes) {\n-      BIND(&undef_loop);\n+  BIND(&if_holey_doubles);\n+  {\n+    Callable callable =\n+        (variant == kIncludes)\n+            ? Builtins::CallableFor(isolate(),\n+                                    Builtins::kArrayIncludesHoleyDoubles)\n+            : Builtins::CallableFor(isolate(),\n+                                    Builtins::kArrayIndexOfHoleyDoubles);\n+    Node* result = CallStub(callable, context, elements, search_element,\n+                            array_length, SmiTag(index_var.value()));\n+    args.PopAndReturn(result);\n+  }\n \n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                &return_not_found);\n-      Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n-      GotoIf(IsUndefined(element_k), &return_found);\n-      GotoIf(IsTheHole(element_k), &return_found);\n+  BIND(&return_not_found);\n+  if (variant == kIncludes) {\n+    args.PopAndReturn(FalseConstant());\n+  } else {\n+    args.PopAndReturn(NumberConstant(-1));\n+  }\n \n-      Increment(&index_var);\n-      Goto(&undef_loop);\n-    }\n+  BIND(&call_runtime);\n+  {\n+    Node* start_from =\n+        args.GetOptionalArgumentValue(kFromIndexArg, UndefinedConstant());\n+    Runtime::FunctionId function = variant == kIncludes\n+                                       ? Runtime::kArrayIncludes_Slow\n+                                       : Runtime::kArrayIndexOf;\n+    args.PopAndReturn(\n+        CallRuntime(function, context, array, search_element, start_from));\n+  }\n+}\n \n-    BIND(&heap_num_loop);\n-    {\n-      Label nan_loop(this, &index_var), not_nan_loop(this, &index_var);\n-      Label* nan_handling =\n-          variant == kIncludes ? &nan_loop : &return_not_found;\n-      BranchIfFloat64IsNaN(search_num.value(), nan_handling, &not_nan_loop);\n+void ArrayIncludesIndexofAssembler::GenerateSmiOrObject(\n+    SearchVariant variant, Node* context, Node* elements, Node* search_element,\n+    Node* array_length, Node* from_index) {\n+  VARIABLE(index_var, MachineType::PointerRepresentation(),\n+           SmiUntag(from_index));\n+  VARIABLE(search_num, MachineRepresentation::kFloat64);\n+  Node* array_length_untagged = SmiUntag(array_length);\n \n-      BIND(&not_nan_loop);\n-      {\n-        Label continue_loop(this), not_smi(this);\n-        GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                  &return_not_found);\n-        Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n-        GotoIfNot(TaggedIsSmi(element_k), &not_smi);\n-        Branch(Float64Equal(search_num.value(), SmiToFloat64(element_k)),\n-               &return_found, &continue_loop);\n-\n-        BIND(&not_smi);\n-        GotoIfNot(IsHeapNumber(element_k), &continue_loop);\n-        Branch(Float64Equal(search_num.value(), LoadHeapNumberValue(element_k)),\n-               &return_found, &continue_loop);\n-\n-        BIND(&continue_loop);\n-        Increment(&index_var);\n-        Goto(&not_nan_loop);\n-      }\n+  Label ident_loop(this, &index_var), heap_num_loop(this, &search_num),\n+      string_loop(this), bigint_loop(this, &index_var),\n+      undef_loop(this, &index_var), not_smi(this), not_heap_num(this),\n+      return_found(this), return_not_found(this);\n \n-      // Array.p.includes uses SameValueZero comparisons, where NaN == NaN.\n-      if (variant == kIncludes) {\n-        BIND(&nan_loop);\n-        Label continue_loop(this);\n-        GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                  &return_not_found);\n-        Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n-        GotoIf(TaggedIsSmi(element_k), &continue_loop);\n-        GotoIfNot(IsHeapNumber(element_k), &continue_loop);\n-        BranchIfFloat64IsNaN(LoadHeapNumberValue(element_k), &return_found,\n-                             &continue_loop);\n-\n-        BIND(&continue_loop);\n-        Increment(&index_var);\n-        Goto(&nan_loop);\n-      }\n-    }\n+  GotoIfNot(TaggedIsSmi(search_element), &not_smi);\n+  search_num.Bind(SmiToFloat64(search_element));\n+  Goto(&heap_num_loop);\n \n-    BIND(&string_loop);\n-    {\n-      TNode<String> search_element_string = CAST(search_element);\n-      Label continue_loop(this), next_iteration(this, &index_var),\n-          slow_compare(this), runtime(this, Label::kDeferred);\n-      TNode<IntPtrT> search_length =\n-          LoadStringLengthAsWord(search_element_string);\n-      Goto(&next_iteration);\n-      BIND(&next_iteration);\n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                &return_not_found);\n-      Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n-      GotoIf(TaggedIsSmi(element_k), &continue_loop);\n-      GotoIf(WordEqual(search_element_string, element_k), &return_found);\n-      Node* element_k_type = LoadInstanceType(element_k);\n-      GotoIfNot(IsStringInstanceType(element_k_type), &continue_loop);\n-      Branch(WordEqual(search_length, LoadStringLengthAsWord(element_k)),\n-             &slow_compare, &continue_loop);\n-\n-      BIND(&slow_compare);\n-      StringBuiltinsAssembler string_asm(state());\n-      string_asm.StringEqual_Core(context, search_element_string, search_type,\n-                                  element_k, element_k_type, search_length,\n-                                  &return_found, &continue_loop, &runtime);\n-      BIND(&runtime);\n-      TNode<Object> result = CallRuntime(Runtime::kStringEqual, context,\n-                                         search_element_string, element_k);\n-      Branch(WordEqual(result, TrueConstant()), &return_found, &continue_loop);\n+  BIND(&not_smi);\n+  if (variant == kIncludes) {\n+    GotoIf(IsUndefined(search_element), &undef_loop);\n+  }\n+  Node* map = LoadMap(search_element);\n+  GotoIfNot(IsHeapNumberMap(map), &not_heap_num);\n+  search_num.Bind(LoadHeapNumberValue(search_element));\n+  Goto(&heap_num_loop);\n+\n+  BIND(&not_heap_num);\n+  Node* search_type = LoadMapInstanceType(map);\n+  GotoIf(IsStringInstanceType(search_type), &string_loop);\n+  GotoIf(IsBigIntInstanceType(search_type), &bigint_loop);\n+  Goto(&ident_loop);\n+\n+  BIND(&ident_loop);\n+  {\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+    Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+    GotoIf(WordEqual(element_k, search_element), &return_found);\n \n-      BIND(&continue_loop);\n-      Increment(&index_var);\n-      Goto(&next_iteration);\n-    }\n+    Increment(&index_var);\n+    Goto(&ident_loop);\n+  }\n \n-    BIND(&bigint_loop);\n-    {\n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                &return_not_found);\n+  if (variant == kIncludes) {\n+    BIND(&undef_loop);\n \n-      Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n-      Label continue_loop(this);\n-      GotoIf(TaggedIsSmi(element_k), &continue_loop);\n-      GotoIfNot(IsBigInt(element_k), &continue_loop);\n-      TNode<Object> result = CallRuntime(Runtime::kBigIntEqualToBigInt, context,\n-                                         search_element, element_k);\n-      Branch(WordEqual(result, TrueConstant()), &return_found, &continue_loop);\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+    Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+    GotoIf(IsUndefined(element_k), &return_found);\n+    GotoIf(IsTheHole(element_k), &return_found);\n \n-      BIND(&continue_loop);\n-      Increment(&index_var);\n-      Goto(&bigint_loop);\n-    }\n+    Increment(&index_var);\n+    Goto(&undef_loop);\n   }\n \n-  BIND(&if_packed_doubles);\n+  BIND(&heap_num_loop);\n   {\n-    Label nan_loop(this, &index_var), not_nan_loop(this, &index_var),\n-        hole_loop(this, &index_var), search_notnan(this);\n-    VARIABLE(search_num, MachineRepresentation::kFloat64);\n-\n-    GotoIfNot(TaggedIsSmi(search_element), &search_notnan);\n-    search_num.Bind(SmiToFloat64(CAST(search_element)));\n-    Goto(&not_nan_loop);\n-\n-    BIND(&search_notnan);\n-    GotoIfNot(IsHeapNumber(search_element), &return_not_found);\n-\n-    search_num.Bind(LoadHeapNumberValue(CAST(search_element)));\n-\n+    Label nan_loop(this, &index_var), not_nan_loop(this, &index_var);\n     Label* nan_handling = variant == kIncludes ? &nan_loop : &return_not_found;\n     BranchIfFloat64IsNaN(search_num.value(), nan_handling, &not_nan_loop);\n \n     BIND(&not_nan_loop);\n     {\n-      Label continue_loop(this);\n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n+      Label continue_loop(this), not_smi(this);\n+      GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n                 &return_not_found);\n-      Node* element_k = LoadFixedDoubleArrayElement(elements, index_var.value(),\n-                                                    MachineType::Float64());\n-      Branch(Float64Equal(element_k, search_num.value()), &return_found,\n-             &continue_loop);\n+      Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+      GotoIfNot(TaggedIsSmi(element_k), &not_smi);\n+      Branch(Float64Equal(search_num.value(), SmiToFloat64(element_k)),\n+             &return_found, &continue_loop);\n+\n+      BIND(&not_smi);\n+      GotoIfNot(IsHeapNumber(element_k), &continue_loop);\n+      Branch(Float64Equal(search_num.value(), LoadHeapNumberValue(element_k)),\n+             &return_found, &continue_loop);\n+\n       BIND(&continue_loop);\n       Increment(&index_var);\n       Goto(&not_nan_loop);\n@@ -3262,182 +3216,345 @@ void ArrayIncludesIndexofAssembler::Generate(SearchVariant variant) {\n     if (variant == kIncludes) {\n       BIND(&nan_loop);\n       Label continue_loop(this);\n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n+      GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n                 &return_not_found);\n-      Node* element_k = LoadFixedDoubleArrayElement(elements, index_var.value(),\n-                                                    MachineType::Float64());\n-      BranchIfFloat64IsNaN(element_k, &return_found, &continue_loop);\n+      Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+      GotoIf(TaggedIsSmi(element_k), &continue_loop);\n+      GotoIfNot(IsHeapNumber(element_k), &continue_loop);\n+      BranchIfFloat64IsNaN(LoadHeapNumberValue(element_k), &return_found,\n+                           &continue_loop);\n+\n       BIND(&continue_loop);\n       Increment(&index_var);\n       Goto(&nan_loop);\n     }\n   }\n \n-  BIND(&if_holey_doubles);\n+  BIND(&string_loop);\n   {\n-    Label nan_loop(this, &index_var), not_nan_loop(this, &index_var),\n-        hole_loop(this, &index_var), search_notnan(this);\n-    VARIABLE(search_num, MachineRepresentation::kFloat64);\n-\n-    GotoIfNot(TaggedIsSmi(search_element), &search_notnan);\n-    search_num.Bind(SmiToFloat64(CAST(search_element)));\n-    Goto(&not_nan_loop);\n-\n-    BIND(&search_notnan);\n-    if (variant == kIncludes) {\n-      GotoIf(IsUndefined(search_element), &hole_loop);\n-    }\n-    GotoIfNot(IsHeapNumber(search_element), &return_not_found);\n+    TNode<String> search_element_string = CAST(search_element);\n+    Label continue_loop(this), next_iteration(this, &index_var),\n+        slow_compare(this), runtime(this, Label::kDeferred);\n+    TNode<IntPtrT> search_length =\n+        LoadStringLengthAsWord(search_element_string);\n+    Goto(&next_iteration);\n+    BIND(&next_iteration);\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+    Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+    GotoIf(TaggedIsSmi(element_k), &continue_loop);\n+    GotoIf(WordEqual(search_element_string, element_k), &return_found);\n+    Node* element_k_type = LoadInstanceType(element_k);\n+    GotoIfNot(IsStringInstanceType(element_k_type), &continue_loop);\n+    Branch(WordEqual(search_length, LoadStringLengthAsWord(element_k)),\n+           &slow_compare, &continue_loop);\n+\n+    BIND(&slow_compare);\n+    StringBuiltinsAssembler string_asm(state());\n+    string_asm.StringEqual_Core(context, search_element_string, search_type,\n+                                element_k, element_k_type, search_length,\n+                                &return_found, &continue_loop, &runtime);\n+    BIND(&runtime);\n+    TNode<Object> result = CallRuntime(Runtime::kStringEqual, context,\n+                                       search_element_string, element_k);\n+    Branch(WordEqual(result, TrueConstant()), &return_found, &continue_loop);\n \n-    search_num.Bind(LoadHeapNumberValue(CAST(search_element)));\n+    BIND(&continue_loop);\n+    Increment(&index_var);\n+    Goto(&next_iteration);\n+  }\n \n-    Label* nan_handling = variant == kIncludes ? &nan_loop : &return_not_found;\n-    BranchIfFloat64IsNaN(search_num.value(), nan_handling, &not_nan_loop);\n+  BIND(&bigint_loop);\n+  {\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+\n+    Node* element_k = LoadFixedArrayElement(elements, index_var.value());\n+    Label continue_loop(this);\n+    GotoIf(TaggedIsSmi(element_k), &continue_loop);\n+    GotoIfNot(IsBigInt(element_k), &continue_loop);\n+    TNode<Object> result = CallRuntime(Runtime::kBigIntEqualToBigInt, context,\n+                                       search_element, element_k);\n+    Branch(WordEqual(result, TrueConstant()), &return_found, &continue_loop);\n+\n+    BIND(&continue_loop);\n+    Increment(&index_var);\n+    Goto(&bigint_loop);\n+  }\n+  BIND(&return_found);\n+  if (variant == kIncludes) {\n+    Return(TrueConstant());\n+  } else {\n+    Return(SmiTag(index_var.value()));\n+  }\n \n-    BIND(&not_nan_loop);\n-    {\n-      Label continue_loop(this);\n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                &return_not_found);\n+  BIND(&return_not_found);\n+  if (variant == kIncludes) {\n+    Return(FalseConstant());\n+  } else {\n+    Return(NumberConstant(-1));\n+  }\n+}\n \n-      // No need for hole checking here; the following Float64Equal will\n-      // return 'not equal' for holes anyway.\n-      Node* element_k = LoadFixedDoubleArrayElement(elements, index_var.value(),\n-                                                    MachineType::Float64());\n+void ArrayIncludesIndexofAssembler::GeneratePackedDoubles(SearchVariant variant,\n+                                                          Node* elements,\n+                                                          Node* search_element,\n+                                                          Node* array_length,\n+                                                          Node* from_index) {\n+  VARIABLE(index_var, MachineType::PointerRepresentation(),\n+           SmiUntag(from_index));\n+  Node* array_length_untagged = SmiUntag(array_length);\n \n-      Branch(Float64Equal(element_k, search_num.value()), &return_found,\n-             &continue_loop);\n-      BIND(&continue_loop);\n-      Increment(&index_var);\n-      Goto(&not_nan_loop);\n-    }\n+  Label nan_loop(this, &index_var), not_nan_loop(this, &index_var),\n+      hole_loop(this, &index_var), search_notnan(this), return_found(this),\n+      return_not_found(this);\n+  VARIABLE(search_num, MachineRepresentation::kFloat64);\n+  search_num.Bind(Float64Constant(0));\n \n-    // Array.p.includes uses SameValueZero comparisons, where NaN == NaN.\n-    if (variant == kIncludes) {\n-      BIND(&nan_loop);\n-      Label continue_loop(this);\n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                &return_not_found);\n+  GotoIfNot(TaggedIsSmi(search_element), &search_notnan);\n+  search_num.Bind(SmiToFloat64(search_element));\n+  Goto(&not_nan_loop);\n \n-      // Load double value or continue if it's the hole NaN.\n-      Node* element_k = LoadFixedDoubleArrayElement(\n-          elements, index_var.value(), MachineType::Float64(), 0,\n-          INTPTR_PARAMETERS, &continue_loop);\n+  BIND(&search_notnan);\n+  GotoIfNot(IsHeapNumber(search_element), &return_not_found);\n \n-      BranchIfFloat64IsNaN(element_k, &return_found, &continue_loop);\n-      BIND(&continue_loop);\n-      Increment(&index_var);\n-      Goto(&nan_loop);\n-    }\n+  search_num.Bind(LoadHeapNumberValue(search_element));\n \n-    // Array.p.includes treats the hole as undefined.\n-    if (variant == kIncludes) {\n-      BIND(&hole_loop);\n-      GotoIfNot(UintPtrLessThan(index_var.value(), array_length),\n-                &return_not_found);\n+  Label* nan_handling = variant == kIncludes ? &nan_loop : &return_not_found;\n+  BranchIfFloat64IsNaN(search_num.value(), nan_handling, &not_nan_loop);\n \n-      // Check if the element is a double hole, but don't load it.\n-      LoadFixedDoubleArrayElement(elements, index_var.value(),\n-                                  MachineType::None(), 0, INTPTR_PARAMETERS,\n-                                  &return_found);\n+  BIND(&not_nan_loop);\n+  {\n+    Label continue_loop(this);\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+    Node* element_k = LoadFixedDoubleArrayElement(elements, index_var.value(),\n+                                                  MachineType::Float64());\n+    Branch(Float64Equal(element_k, search_num.value()), &return_found,\n+           &continue_loop);\n+    BIND(&continue_loop);\n+    Increment(&index_var);\n+    Goto(&not_nan_loop);\n+  }\n \n-      Increment(&index_var);\n-      Goto(&hole_loop);\n-    }\n+  // Array.p.includes uses SameValueZero comparisons, where NaN == NaN.\n+  if (variant == kIncludes) {\n+    BIND(&nan_loop);\n+    Label continue_loop(this);\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+    Node* element_k = LoadFixedDoubleArrayElement(elements, index_var.value(),\n+                                                  MachineType::Float64());\n+    BranchIfFloat64IsNaN(element_k, &return_found, &continue_loop);\n+    BIND(&continue_loop);\n+    Increment(&index_var);\n+    Goto(&nan_loop);\n   }\n \n   BIND(&return_found);\n   if (variant == kIncludes) {\n-    args.PopAndReturn(TrueConstant());\n+    Return(TrueConstant());\n   } else {\n-    args.PopAndReturn(SmiTag(index_var.value()));\n+    Return(SmiTag(index_var.value()));\n   }\n \n   BIND(&return_not_found);\n   if (variant == kIncludes) {\n-    args.PopAndReturn(FalseConstant());\n+    Return(FalseConstant());\n   } else {\n-    args.PopAndReturn(NumberConstant(-1));\n+    Return(NumberConstant(-1));\n   }\n+}\n \n-  BIND(&call_runtime);\n+void ArrayIncludesIndexofAssembler::GenerateHoleyDoubles(SearchVariant variant,\n+                                                         Node* elements,\n+                                                         Node* search_element,\n+                                                         Node* array_length,\n+                                                         Node* from_index) {\n+  VARIABLE(index_var, MachineType::PointerRepresentation(),\n+           SmiUntag(from_index));\n+  Node* array_length_untagged = SmiUntag(array_length);\n+\n+  Label nan_loop(this, &index_var), not_nan_loop(this, &index_var),\n+      hole_loop(this, &index_var), search_notnan(this), return_found(this),\n+      return_not_found(this);\n+  VARIABLE(search_num, MachineRepresentation::kFloat64);\n+  search_num.Bind(Float64Constant(0));\n+\n+  GotoIfNot(TaggedIsSmi(search_element), &search_notnan);\n+  search_num.Bind(SmiToFloat64(search_element));\n+  Goto(&not_nan_loop);\n+\n+  BIND(&search_notnan);\n+  if (variant == kIncludes) {\n+    GotoIf(IsUndefined(search_element), &hole_loop);\n+  }\n+  GotoIfNot(IsHeapNumber(search_element), &return_not_found);\n+\n+  search_num.Bind(LoadHeapNumberValue(search_element));\n+\n+  Label* nan_handling = variant == kIncludes ? &nan_loop : &return_not_found;\n+  BranchIfFloat64IsNaN(search_num.value(), nan_handling, &not_nan_loop);\n+\n+  BIND(&not_nan_loop);\n   {\n-    Node* start_from = args.GetOptionalArgumentValue(kFromIndexArg);\n-    Runtime::FunctionId function = variant == kIncludes\n-                                       ? Runtime::kArrayIncludes_Slow\n-                                       : Runtime::kArrayIndexOf;\n-    args.PopAndReturn(\n-        CallRuntime(function, context, array, search_element, start_from));\n+    Label continue_loop(this);\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+\n+    // No need for hole checking here; the following Float64Equal will\n+    // return 'not equal' for holes anyway.\n+    Node* element_k = LoadFixedDoubleArrayElement(elements, index_var.value(),\n+                                                  MachineType::Float64());\n+\n+    Branch(Float64Equal(element_k, search_num.value()), &return_found,\n+           &continue_loop);\n+    BIND(&continue_loop);\n+    Increment(&index_var);\n+    Goto(&not_nan_loop);\n+  }\n+\n+  // Array.p.includes uses SameValueZero comparisons, where NaN == NaN.\n+  if (variant == kIncludes) {\n+    BIND(&nan_loop);\n+    Label continue_loop(this);\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+\n+    // Load double value or continue if it's the hole NaN.\n+    Node* element_k = LoadFixedDoubleArrayElement(\n+        elements, index_var.value(), MachineType::Float64(), 0,\n+        INTPTR_PARAMETERS, &continue_loop);\n+\n+    BranchIfFloat64IsNaN(element_k, &return_found, &continue_loop);\n+    BIND(&continue_loop);\n+    Increment(&index_var);\n+    Goto(&nan_loop);\n+  }\n+\n+  // Array.p.includes treats the hole as undefined.\n+  if (variant == kIncludes) {\n+    BIND(&hole_loop);\n+    GotoIfNot(UintPtrLessThan(index_var.value(), array_length_untagged),\n+              &return_not_found);\n+\n+    // Check if the element is a double hole, but don't load it.\n+    LoadFixedDoubleArrayElement(elements, index_var.value(),\n+                                MachineType::None(), 0, INTPTR_PARAMETERS,\n+                                &return_found);\n+\n+    Increment(&index_var);\n+    Goto(&hole_loop);\n+  }\n+\n+  BIND(&return_found);\n+  if (variant == kIncludes) {\n+    Return(TrueConstant());\n+  } else {\n+    Return(SmiTag(index_var.value()));\n+  }\n+\n+  BIND(&return_not_found);\n+  if (variant == kIncludes) {\n+    Return(FalseConstant());\n+  } else {\n+    Return(NumberConstant(-1));\n   }\n }\n \n TF_BUILTIN(ArrayIncludes, ArrayIncludesIndexofAssembler) {\n   Generate(kIncludes);\n }\n \n-TF_BUILTIN(ArrayIndexOf, ArrayIncludesIndexofAssembler) { Generate(kIndexOf); }\n+TF_BUILTIN(ArrayIncludesSmiOrObject, ArrayIncludesIndexofAssembler) {\n+  Node* context = Parameter(Descriptor::kContext);\n+  Node* elements = Parameter(Descriptor::kElements);\n+  Node* search_element = Parameter(Descriptor::kSearchElement);\n+  Node* array_length = Parameter(Descriptor::kLength);\n+  Node* from_index = Parameter(Descriptor::kFromIndex);\n \n-class ArrayPrototypeIterationAssembler : public CodeStubAssembler {\n- public:\n-  explicit ArrayPrototypeIterationAssembler(compiler::CodeAssemblerState* state)\n-      : CodeStubAssembler(state) {}\n+  GenerateSmiOrObject(kIncludes, context, elements, search_element,\n+                      array_length, from_index);\n+}\n+\n+TF_BUILTIN(ArrayIncludesPackedDoubles, ArrayIncludesIndexofAssembler) {\n+  Node* elements = Parameter(Descriptor::kElements);\n+  Node* search_element = Parameter(Descriptor::kSearchElement);\n+  Node* array_length = Parameter(Descriptor::kLength);\n+  Node* from_index = Parameter(Descriptor::kFromIndex);\n+\n+  GeneratePackedDoubles(kIncludes, elements, search_element, array_length,\n+                        from_index);\n+}\n \n- protected:\n-  void Generate_ArrayPrototypeIterationMethod(TNode<Context> context,\n-                                              TNode<Object> receiver,\n-                                              IterationKind iteration_kind) {\n-    VARIABLE(var_array, MachineRepresentation::kTagged);\n-    VARIABLE(var_map, MachineRepresentation::kTagged);\n-    VARIABLE(var_type, MachineRepresentation::kWord32);\n+TF_BUILTIN(ArrayIncludesHoleyDoubles, ArrayIncludesIndexofAssembler) {\n+  Node* elements = Parameter(Descriptor::kElements);\n+  Node* search_element = Parameter(Descriptor::kSearchElement);\n+  Node* array_length = Parameter(Descriptor::kLength);\n+  Node* from_index = Parameter(Descriptor::kFromIndex);\n \n-    Label if_isnotobject(this, Label::kDeferred);\n-    Label create_array_iterator(this);\n+  GenerateHoleyDoubles(kIncludes, elements, search_element, array_length,\n+                       from_index);\n+}\n \n-    GotoIf(TaggedIsSmi(receiver), &if_isnotobject);\n+TF_BUILTIN(ArrayIndexOf, ArrayIncludesIndexofAssembler) { Generate(kIndexOf); }\n \n-    TNode<HeapObject> object_receiver = CAST(receiver);\n-    var_array.Bind(object_receiver);\n-    var_map.Bind(LoadMap(object_receiver));\n-    var_type.Bind(LoadMapInstanceType(var_map.value()));\n-    Branch(IsJSReceiverInstanceType(var_type.value()), &create_array_iterator,\n-           &if_isnotobject);\n+TF_BUILTIN(ArrayIndexOfSmiOrObject, ArrayIncludesIndexofAssembler) {\n+  Node* context = Parameter(Descriptor::kContext);\n+  Node* elements = Parameter(Descriptor::kElements);\n+  Node* search_element = Parameter(Descriptor::kSearchElement);\n+  Node* array_length = Parameter(Descriptor::kLength);\n+  Node* from_index = Parameter(Descriptor::kFromIndex);\n \n-    BIND(&if_isnotobject);\n-    {\n-      TNode<JSReceiver> result = ToObject(context, receiver);\n-      var_array.Bind(result);\n-      var_map.Bind(LoadMap(result));\n-      var_type.Bind(LoadMapInstanceType(var_map.value()));\n-      Goto(&create_array_iterator);\n-    }\n+  GenerateSmiOrObject(kIndexOf, context, elements, search_element, array_length,\n+                      from_index);\n+}\n \n-    BIND(&create_array_iterator);\n-    Return(CreateArrayIterator(var_array.value(), var_map.value(),\n-                               var_type.value(), context, iteration_kind));\n-  }\n-};\n+TF_BUILTIN(ArrayIndexOfPackedDoubles, ArrayIncludesIndexofAssembler) {\n+  Node* elements = Parameter(Descriptor::kElements);\n+  Node* search_element = Parameter(Descriptor::kSearchElement);\n+  Node* array_length = Parameter(Descriptor::kLength);\n+  Node* from_index = Parameter(Descriptor::kFromIndex);\n+\n+  GeneratePackedDoubles(kIndexOf, elements, search_element, array_length,\n+                        from_index);\n+}\n+\n+TF_BUILTIN(ArrayIndexOfHoleyDoubles, ArrayIncludesIndexofAssembler) {\n+  Node* elements = Parameter(Descriptor::kElements);\n+  Node* search_element = Parameter(Descriptor::kSearchElement);\n+  Node* array_length = Parameter(Descriptor::kLength);\n+  Node* from_index = Parameter(Descriptor::kFromIndex);\n \n-TF_BUILTIN(ArrayPrototypeValues, ArrayPrototypeIterationAssembler) {\n+  GenerateHoleyDoubles(kIndexOf, elements, search_element, array_length,\n+                       from_index);\n+}\n+\n+// ES #sec-array.prototype.values\n+TF_BUILTIN(ArrayPrototypeValues, CodeStubAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Generate_ArrayPrototypeIterationMethod(context, receiver,\n-                                         IterationKind::kValues);\n+  Return(CreateArrayIterator(context, ToObject(context, receiver),\n+                             IterationKind::kValues));\n }\n \n-TF_BUILTIN(ArrayPrototypeEntries, ArrayPrototypeIterationAssembler) {\n+// ES #sec-array.prototype.entries\n+TF_BUILTIN(ArrayPrototypeEntries, CodeStubAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Generate_ArrayPrototypeIterationMethod(context, receiver,\n-                                         IterationKind::kEntries);\n+  Return(CreateArrayIterator(context, ToObject(context, receiver),\n+                             IterationKind::kEntries));\n }\n \n-TF_BUILTIN(ArrayPrototypeKeys, ArrayPrototypeIterationAssembler) {\n+// ES #sec-array.prototype.keys\n+TF_BUILTIN(ArrayPrototypeKeys, CodeStubAssembler) {\n   TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n-  Generate_ArrayPrototypeIterationMethod(context, receiver,\n-                                         IterationKind::kKeys);\n+  Return(CreateArrayIterator(context, ToObject(context, receiver),\n+                             IterationKind::kKeys));\n }\n \n+// ES #sec-%arrayiteratorprototype%.next\n TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n   const char* method_name = \"Array Iterator.prototype.next\";\n \n@@ -3454,36 +3571,37 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n \n   Label throw_bad_receiver(this, Label::kDeferred);\n   Label set_done(this);\n-  Label allocate_key_result(this);\n   Label allocate_entry_if_needed(this);\n   Label allocate_iterator_result(this);\n-  Label generic_values(this);\n \n   // If O does not have all of the internal slots of an Array Iterator Instance\n   // (22.1.5.3), throw a TypeError exception\n   GotoIf(TaggedIsSmi(iterator), &throw_bad_receiver);\n-  TNode<Int32T> instance_type = LoadInstanceType(iterator);\n-  GotoIf(IsArrayIteratorInstanceType(instance_type), &throw_bad_receiver);\n+  GotoIfNot(IsJSArrayIterator(iterator), &throw_bad_receiver);\n \n   // Let a be O.[[IteratedObject]].\n   Node* array =\n       LoadObjectField(iterator, JSArrayIterator::kIteratedObjectOffset);\n \n   // Let index be O.[[ArrayIteratorNextIndex]].\n   Node* index = LoadObjectField(iterator, JSArrayIterator::kNextIndexOffset);\n-  Node* orig_map =\n-      LoadObjectField(iterator, JSArrayIterator::kIteratedObjectMapOffset);\n   Node* array_map = LoadMap(array);\n \n-  Label if_isfastarray(this), if_isnotfastarray(this),\n-      if_isdetached(this, Label::kDeferred);\n+  Label if_detached(this, Label::kDeferred);\n+\n+  Label if_typedarray(this), if_other(this, Label::kDeferred), if_array(this),\n+      if_generic(this, Label::kDeferred);\n \n-  Branch(WordEqual(orig_map, array_map), &if_isfastarray, &if_isnotfastarray);\n+  Node* array_type = LoadInstanceType(array);\n+  GotoIf(InstanceTypeEqual(array_type, JS_ARRAY_TYPE), &if_array);\n+  Branch(InstanceTypeEqual(array_type, JS_TYPED_ARRAY_TYPE), &if_typedarray,\n+         &if_other);\n \n-  BIND(&if_isfastarray);\n+  BIND(&if_array);\n   {\n-    CSA_ASSERT(\n-        this, InstanceTypeEqual(LoadMapInstanceType(array_map), JS_ARRAY_TYPE));\n+    // We can only handle fast elements here.\n+    Node* elements_kind = LoadMapElementsKind(array_map);\n+    GotoIfNot(IsFastElementsKind(elements_kind), &if_other);\n \n     Node* length = LoadJSArrayLength(array);\n \n@@ -3492,295 +3610,178 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n \n     GotoIfNot(SmiBelow(index, length), &set_done);\n \n+    var_value.Bind(index);\n     Node* one = SmiConstant(1);\n     StoreObjectFieldNoWriteBarrier(iterator, JSArrayIterator::kNextIndexOffset,\n                                    SmiAdd(index, one));\n-\n     var_done.Bind(FalseConstant());\n-    Node* elements = LoadElements(array);\n \n-    static int32_t kInstanceType[] = {\n-        JS_FAST_ARRAY_KEY_ITERATOR_TYPE,\n-        JS_FAST_SMI_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_HOLEY_SMI_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_HOLEY_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_DOUBLE_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_HOLEY_DOUBLE_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_SMI_ARRAY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_HOLEY_SMI_ARRAY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_ARRAY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_HOLEY_ARRAY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_DOUBLE_ARRAY_VALUE_ITERATOR_TYPE,\n-        JS_FAST_HOLEY_DOUBLE_ARRAY_VALUE_ITERATOR_TYPE,\n-    };\n-\n-    Label packed_object_values(this), holey_object_values(this),\n-        packed_double_values(this), holey_double_values(this);\n-    Label* kInstanceTypeHandlers[] = {\n-        &allocate_key_result,  &packed_object_values, &holey_object_values,\n-        &packed_object_values, &holey_object_values,  &packed_double_values,\n-        &holey_double_values,  &packed_object_values, &holey_object_values,\n-        &packed_object_values, &holey_object_values,  &packed_double_values,\n-        &holey_double_values};\n-\n-    Switch(instance_type, &throw_bad_receiver, kInstanceType,\n-           kInstanceTypeHandlers, arraysize(kInstanceType));\n+    GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n+                           iterator, JSArrayIterator::kKindOffset),\n+                       Int32Constant(static_cast<int>(IterationKind::kKeys))),\n+           &allocate_iterator_result);\n \n-    BIND(&packed_object_values);\n+    Node* elements = LoadElements(array);\n+    Label if_packed(this), if_holey(this), if_packed_double(this),\n+        if_holey_double(this), if_unknown_kind(this, Label::kDeferred);\n+    int32_t kinds[] = {// Handled by if_packed.\n+                       PACKED_SMI_ELEMENTS, PACKED_ELEMENTS,\n+                       // Handled by if_holey.\n+                       HOLEY_SMI_ELEMENTS, HOLEY_ELEMENTS,\n+                       // Handled by if_packed_double.\n+                       PACKED_DOUBLE_ELEMENTS,\n+                       // Handled by if_holey_double.\n+                       HOLEY_DOUBLE_ELEMENTS};\n+    Label* labels[] = {// PACKED_{SMI,}_ELEMENTS\n+                       &if_packed, &if_packed,\n+                       // HOLEY_{SMI,}_ELEMENTS\n+                       &if_holey, &if_holey,\n+                       // PACKED_DOUBLE_ELEMENTS\n+                       &if_packed_double,\n+                       // HOLEY_DOUBLE_ELEMENTS\n+                       &if_holey_double};\n+    Switch(elements_kind, &if_unknown_kind, kinds, labels, arraysize(kinds));\n+\n+    BIND(&if_packed);\n     {\n       var_value.Bind(LoadFixedArrayElement(elements, index, 0, SMI_PARAMETERS));\n       Goto(&allocate_entry_if_needed);\n     }\n \n-    BIND(&packed_double_values);\n+    BIND(&if_holey);\n     {\n-      Node* value = LoadFixedDoubleArrayElement(\n-          elements, index, MachineType::Float64(), 0, SMI_PARAMETERS);\n-      var_value.Bind(AllocateHeapNumberWithValue(value));\n+      Node* element = LoadFixedArrayElement(elements, index, 0, SMI_PARAMETERS);\n+      var_value.Bind(element);\n+      GotoIfNot(WordEqual(element, TheHoleConstant()),\n+                &allocate_entry_if_needed);\n+      GotoIf(IsNoElementsProtectorCellInvalid(), &if_generic);\n+      var_value.Bind(UndefinedConstant());\n       Goto(&allocate_entry_if_needed);\n     }\n \n-    BIND(&holey_object_values);\n+    BIND(&if_packed_double);\n     {\n-      // Check the no_elements_protector cell, and take the slow path if it's\n-      // invalid.\n-      GotoIf(IsNoElementsProtectorCellInvalid(), &generic_values);\n-\n-      var_value.Bind(UndefinedConstant());\n-      Node* value = LoadFixedArrayElement(elements, index, 0, SMI_PARAMETERS);\n-      GotoIf(WordEqual(value, TheHoleConstant()), &allocate_entry_if_needed);\n-      var_value.Bind(value);\n+      Node* value = LoadFixedDoubleArrayElement(\n+          elements, index, MachineType::Float64(), 0, SMI_PARAMETERS);\n+      var_value.Bind(AllocateHeapNumberWithValue(value));\n       Goto(&allocate_entry_if_needed);\n     }\n \n-    BIND(&holey_double_values);\n+    BIND(&if_holey_double);\n     {\n-      // Check the no_elements_protector cell, and take the slow path if it's\n-      // invalid.\n-      GotoIf(IsNoElementsProtectorCellInvalid(), &generic_values);\n-\n-      var_value.Bind(UndefinedConstant());\n+      Label if_hole(this, Label::kDeferred);\n       Node* value = LoadFixedDoubleArrayElement(\n-          elements, index, MachineType::Float64(), 0, SMI_PARAMETERS,\n-          &allocate_entry_if_needed);\n+          elements, index, MachineType::Float64(), 0, SMI_PARAMETERS, &if_hole);\n       var_value.Bind(AllocateHeapNumberWithValue(value));\n       Goto(&allocate_entry_if_needed);\n+      BIND(&if_hole);\n+      GotoIf(IsNoElementsProtectorCellInvalid(), &if_generic);\n+      var_value.Bind(UndefinedConstant());\n+      Goto(&allocate_entry_if_needed);\n     }\n+\n+    BIND(&if_unknown_kind);\n+    Unreachable();\n   }\n \n-  BIND(&if_isnotfastarray);\n+  BIND(&if_other);\n   {\n-    Label if_istypedarray(this), if_isgeneric(this);\n-\n     // If a is undefined, return CreateIterResultObject(undefined, true)\n     GotoIf(IsUndefined(array), &allocate_iterator_result);\n \n-    Node* array_type = LoadInstanceType(array);\n-    Branch(InstanceTypeEqual(array_type, JS_TYPED_ARRAY_TYPE), &if_istypedarray,\n-           &if_isgeneric);\n-\n-    BIND(&if_isgeneric);\n-    {\n-      Label if_wasfastarray(this);\n+    Node* length =\n+        CallBuiltin(Builtins::kToLength, context,\n+                    GetProperty(context, array, factory()->length_string()));\n \n-      Node* length = nullptr;\n-      {\n-        VARIABLE(var_length, MachineRepresentation::kTagged);\n-        Label if_isarray(this), if_isnotarray(this), done(this);\n-        Branch(InstanceTypeEqual(array_type, JS_ARRAY_TYPE), &if_isarray,\n-               &if_isnotarray);\n+    GotoIfNumberGreaterThanOrEqual(index, length, &set_done);\n \n-        BIND(&if_isarray);\n-        {\n-          var_length.Bind(LoadJSArrayLength(array));\n+    var_value.Bind(index);\n+    StoreObjectField(iterator, JSArrayIterator::kNextIndexOffset,\n+                     NumberInc(index));\n+    var_done.Bind(FalseConstant());\n \n-          // Invalidate protector cell if needed\n-          Branch(WordNotEqual(orig_map, UndefinedConstant()), &if_wasfastarray,\n-                 &done);\n+    GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n+                           iterator, JSArrayIterator::kKindOffset),\n+                       Int32Constant(static_cast<int>(IterationKind::kKeys))),\n+           &allocate_iterator_result);\n+    Goto(&if_generic);\n+  }\n \n-          BIND(&if_wasfastarray);\n-          {\n-            Label if_invalid(this, Label::kDeferred);\n-            // A fast array iterator transitioned to a slow iterator during\n-            // iteration. Invalidate fast_array_iteration_protector cell to\n-            // prevent potential deopt loops.\n-            StoreObjectFieldNoWriteBarrier(\n-                iterator, JSArrayIterator::kIteratedObjectMapOffset,\n-                UndefinedConstant());\n-            GotoIf(Uint32LessThanOrEqual(\n-                       instance_type,\n-                       Int32Constant(JS_GENERIC_ARRAY_KEY_ITERATOR_TYPE)),\n-                   &done);\n-\n-            Node* invalid = SmiConstant(Isolate::kProtectorInvalid);\n-            Node* cell = LoadRoot(Heap::kFastArrayIterationProtectorRootIndex);\n-            StoreObjectFieldNoWriteBarrier(cell, Cell::kValueOffset, invalid);\n-            Goto(&done);\n-          }\n-        }\n+  BIND(&if_generic);\n+  {\n+    var_value.Bind(GetProperty(context, array, index));\n+    Goto(&allocate_entry_if_needed);\n+  }\n \n-        BIND(&if_isnotarray);\n-        {\n-          Node* length =\n-              GetProperty(context, array, factory()->length_string());\n-          var_length.Bind(ToLength_Inline(context, length));\n-          Goto(&done);\n-        }\n+  BIND(&if_typedarray);\n+  {\n+    Node* buffer = LoadObjectField(array, JSTypedArray::kBufferOffset);\n+    GotoIf(IsDetachedBuffer(buffer), &if_detached);\n \n-        BIND(&done);\n-        length = var_length.value();\n-      }\n+    Node* length = LoadObjectField(array, JSTypedArray::kLengthOffset);\n \n-      GotoIfNumberGreaterThanOrEqual(index, length, &set_done);\n+    CSA_ASSERT(this, TaggedIsSmi(length));\n+    CSA_ASSERT(this, TaggedIsSmi(index));\n \n-      StoreObjectField(iterator, JSArrayIterator::kNextIndexOffset,\n-                       NumberInc(index));\n-      var_done.Bind(FalseConstant());\n+    GotoIfNot(SmiBelow(index, length), &set_done);\n \n-      Branch(\n-          Uint32LessThanOrEqual(\n-              instance_type, Int32Constant(JS_GENERIC_ARRAY_KEY_ITERATOR_TYPE)),\n-          &allocate_key_result, &generic_values);\n+    var_value.Bind(index);\n+    Node* one = SmiConstant(1);\n+    StoreObjectFieldNoWriteBarrier(iterator, JSArrayIterator::kNextIndexOffset,\n+                                   SmiAdd(index, one));\n+    var_done.Bind(FalseConstant());\n \n-      BIND(&generic_values);\n-      {\n-        var_value.Bind(GetProperty(context, array, index));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-    }\n+    GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n+                           iterator, JSArrayIterator::kKindOffset),\n+                       Int32Constant(static_cast<int>(IterationKind::kKeys))),\n+           &allocate_iterator_result);\n \n-    BIND(&if_istypedarray);\n-    {\n-      Node* buffer = LoadObjectField(array, JSTypedArray::kBufferOffset);\n-      GotoIf(IsDetachedBuffer(buffer), &if_isdetached);\n+    Node* elements_kind = LoadMapElementsKind(array_map);\n+    Node* elements = LoadElements(array);\n+    Node* base_ptr =\n+        LoadObjectField(elements, FixedTypedArrayBase::kBasePointerOffset);\n+    Node* external_ptr =\n+        LoadObjectField(elements, FixedTypedArrayBase::kExternalPointerOffset,\n+                        MachineType::Pointer());\n+    Node* data_ptr = IntPtrAdd(BitcastTaggedToWord(base_ptr), external_ptr);\n+\n+    Label if_unknown_type(this, Label::kDeferred);\n+    int32_t elements_kinds[] = {\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) TYPE##_ELEMENTS,\n+        TYPED_ARRAYS(TYPED_ARRAY_CASE)\n+#undef TYPED_ARRAY_CASE\n+    };\n \n-      Node* length = LoadObjectField(array, JSTypedArray::kLengthOffset);\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) \\\n+  Label if_##type##array(this);\n+    TYPED_ARRAYS(TYPED_ARRAY_CASE)\n+#undef TYPED_ARRAY_CASE\n \n-      CSA_ASSERT(this, TaggedIsSmi(length));\n-      CSA_ASSERT(this, TaggedIsSmi(index));\n+    Label* elements_kind_labels[] = {\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size) &if_##type##array,\n+        TYPED_ARRAYS(TYPED_ARRAY_CASE)\n+#undef TYPED_ARRAY_CASE\n+    };\n+    STATIC_ASSERT(arraysize(elements_kinds) == arraysize(elements_kind_labels));\n \n-      GotoIfNot(SmiBelow(index, length), &set_done);\n+    Switch(elements_kind, &if_unknown_type, elements_kinds,\n+           elements_kind_labels, arraysize(elements_kinds));\n \n-      Node* one = SmiConstant(1);\n-      StoreObjectFieldNoWriteBarrier(\n-          iterator, JSArrayIterator::kNextIndexOffset, SmiAdd(index, one));\n-      var_done.Bind(FalseConstant());\n+    BIND(&if_unknown_type);\n+    Unreachable();\n \n-      Node* elements = LoadElements(array);\n-      Node* base_ptr =\n-          LoadObjectField(elements, FixedTypedArrayBase::kBasePointerOffset);\n-      Node* external_ptr =\n-          LoadObjectField(elements, FixedTypedArrayBase::kExternalPointerOffset,\n-                          MachineType::Pointer());\n-      Node* data_ptr = IntPtrAdd(BitcastTaggedToWord(base_ptr), external_ptr);\n+#define TYPED_ARRAY_CASE(Type, type, TYPE, ctype, size)     \\\n+  BIND(&if_##type##array);                                  \\\n+  {                                                         \\\n+    var_value.Bind(LoadFixedTypedArrayElementAsTagged(      \\\n+        data_ptr, index, TYPE##_ELEMENTS, SMI_PARAMETERS)); \\\n+    Goto(&allocate_entry_if_needed);                        \\\n+  }\n+    TYPED_ARRAYS(TYPED_ARRAY_CASE)\n+#undef TYPED_ARRAY_CASE\n \n-      static int32_t kInstanceType[] = {\n-          JS_TYPED_ARRAY_KEY_ITERATOR_TYPE,\n-          JS_UINT8_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_UINT8_CLAMPED_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_INT8_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_UINT16_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_INT16_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_UINT32_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_INT32_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_FLOAT32_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_FLOAT64_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_BIGUINT64_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_BIGINT64_ARRAY_KEY_VALUE_ITERATOR_TYPE,\n-          JS_UINT8_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_UINT8_CLAMPED_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_INT8_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_UINT16_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_INT16_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_UINT32_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_INT32_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_FLOAT32_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_FLOAT64_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_BIGUINT64_ARRAY_VALUE_ITERATOR_TYPE,\n-          JS_BIGINT64_ARRAY_VALUE_ITERATOR_TYPE,\n-      };\n-\n-      Label uint8_values(this), int8_values(this), uint16_values(this),\n-          int16_values(this), uint32_values(this), int32_values(this),\n-          float32_values(this), float64_values(this), biguint64_values(this),\n-          bigint64_values(this);\n-      Label* kInstanceTypeHandlers[] = {\n-          &allocate_key_result, &uint8_values,     &uint8_values,\n-          &int8_values,         &uint16_values,    &int16_values,\n-          &uint32_values,       &int32_values,     &float32_values,\n-          &float64_values,      &biguint64_values, &bigint64_values,\n-          &uint8_values,        &uint8_values,     &int8_values,\n-          &uint16_values,       &int16_values,     &uint32_values,\n-          &int32_values,        &float32_values,   &float64_values,\n-          &biguint64_values,    &bigint64_values,\n-      };\n-\n-      var_done.Bind(FalseConstant());\n-      Switch(instance_type, &throw_bad_receiver, kInstanceType,\n-             kInstanceTypeHandlers, arraysize(kInstanceType));\n-\n-      BIND(&uint8_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, UINT8_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&int8_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, INT8_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&uint16_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, UINT16_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&int16_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, INT16_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&uint32_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, UINT32_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&int32_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, INT32_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&float32_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, FLOAT32_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&float64_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, FLOAT64_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&biguint64_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, BIGUINT64_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-      BIND(&bigint64_values);\n-      {\n-        var_value.Bind(LoadFixedTypedArrayElementAsTagged(\n-            data_ptr, index, BIGINT64_ELEMENTS, SMI_PARAMETERS));\n-        Goto(&allocate_entry_if_needed);\n-      }\n-    }\n+    BIND(&if_detached);\n+    ThrowTypeError(context, MessageTemplate::kDetachedOperation, method_name);\n   }\n \n   BIND(&set_done);\n@@ -3790,17 +3791,11 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n     Goto(&allocate_iterator_result);\n   }\n \n-  BIND(&allocate_key_result);\n-  {\n-    var_value.Bind(index);\n-    var_done.Bind(FalseConstant());\n-    Goto(&allocate_iterator_result);\n-  }\n-\n   BIND(&allocate_entry_if_needed);\n   {\n-    GotoIf(Uint32LessThan(Int32Constant(LAST_ARRAY_KEY_VALUE_ITERATOR_TYPE),\n-                          instance_type),\n+    GotoIf(Word32Equal(LoadAndUntagToWord32ObjectField(\n+                           iterator, JSArrayIterator::kKindOffset),\n+                       Int32Constant(static_cast<int>(IterationKind::kValues))),\n            &allocate_iterator_result);\n \n     Node* elements = AllocateFixedArray(PACKED_ELEMENTS, IntPtrConstant(2));\n@@ -3845,9 +3840,261 @@ TF_BUILTIN(ArrayIteratorPrototypeNext, CodeStubAssembler) {\n     ThrowTypeError(context, MessageTemplate::kIncompatibleMethodReceiver,\n                    StringConstant(method_name), iterator);\n   }\n+}\n+\n+namespace {\n+\n+class ArrayFlattenAssembler : public CodeStubAssembler {\n+ public:\n+  explicit ArrayFlattenAssembler(compiler::CodeAssemblerState* state)\n+      : CodeStubAssembler(state) {}\n+\n+  // https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\n+  Node* FlattenIntoArray(Node* context, Node* target, Node* source,\n+                         Node* source_length, Node* start, Node* depth,\n+                         Node* mapper_function = nullptr,\n+                         Node* this_arg = nullptr) {\n+    CSA_ASSERT(this, IsJSReceiver(target));\n+    CSA_ASSERT(this, IsJSReceiver(source));\n+    CSA_ASSERT(this, IsNumberPositive(source_length));\n+    CSA_ASSERT(this, IsNumberPositive(start));\n+    CSA_ASSERT(this, IsNumber(depth));\n+\n+    // 1. Let targetIndex be start.\n+    VARIABLE(var_target_index, MachineRepresentation::kTagged, start);\n+\n+    // 2. Let sourceIndex be 0.\n+    VARIABLE(var_source_index, MachineRepresentation::kTagged, SmiConstant(0));\n+\n+    // 3. Repeat...\n+    Label loop(this, {&var_target_index, &var_source_index}), done_loop(this);\n+    Goto(&loop);\n+    BIND(&loop);\n+    {\n+      Node* const source_index = var_source_index.value();\n+      Node* const target_index = var_target_index.value();\n+\n+      // ...while sourceIndex < sourceLen\n+      GotoIfNumberGreaterThanOrEqual(source_index, source_length, &done_loop);\n+\n+      // a. Let P be ! ToString(sourceIndex).\n+      // b. Let exists be ? HasProperty(source, P).\n+      CSA_ASSERT(this, SmiGreaterThanOrEqual(source_index, SmiConstant(0)));\n+      Node* const exists =\n+          HasProperty(source, source_index, context, kHasProperty);\n+\n+      // c. If exists is true, then\n+      Label next(this);\n+      GotoIfNot(IsTrue(exists), &next);\n+      {\n+        // i. Let element be ? Get(source, P).\n+        Node* element = GetProperty(context, source, source_index);\n+\n+        // ii. If mapperFunction is present, then\n+        if (mapper_function != nullptr) {\n+          CSA_ASSERT(this, Word32Or(IsUndefined(mapper_function),\n+                                    IsCallable(mapper_function)));\n+          DCHECK_NOT_NULL(this_arg);\n+\n+          // 1. Set element to ? Call(mapperFunction, thisArg , « element,\n+          //                          sourceIndex, source »).\n+          element =\n+              CallJS(CodeFactory::Call(isolate()), context, mapper_function,\n+                     this_arg, element, source_index, source);\n+        }\n+\n+        // iii. Let shouldFlatten be false.\n+        Label if_flatten_array(this), if_flatten_proxy(this, Label::kDeferred),\n+            if_noflatten(this);\n+        // iv. If depth > 0, then\n+        GotoIfNumberGreaterThanOrEqual(SmiConstant(0), depth, &if_noflatten);\n+        // 1. Set shouldFlatten to ? IsArray(element).\n+        GotoIf(TaggedIsSmi(element), &if_noflatten);\n+        GotoIf(IsJSArray(element), &if_flatten_array);\n+        GotoIfNot(IsJSProxy(element), &if_noflatten);\n+        Branch(IsTrue(CallRuntime(Runtime::kArrayIsArray, context, element)),\n+               &if_flatten_proxy, &if_noflatten);\n+\n+        BIND(&if_flatten_array);\n+        {\n+          CSA_ASSERT(this, IsJSArray(element));\n+\n+          // 1. Let elementLen be ? ToLength(? Get(element, \"length\")).\n+          Node* const element_length =\n+              LoadObjectField(element, JSArray::kLengthOffset);\n+\n+          // 2. Set targetIndex to ? FlattenIntoArray(target, element,\n+          //                                          elementLen, targetIndex,\n+          //                                          depth - 1).\n+          var_target_index.Bind(\n+              CallBuiltin(Builtins::kFlattenIntoArray, context, target, element,\n+                          element_length, target_index, NumberDec(depth)));\n+          Goto(&next);\n+        }\n+\n+        BIND(&if_flatten_proxy);\n+        {\n+          CSA_ASSERT(this, IsJSProxy(element));\n+\n+          // 1. Let elementLen be ? ToLength(? Get(element, \"length\")).\n+          Node* const element_length = ToLength_Inline(\n+              context, GetProperty(context, element, LengthStringConstant()));\n+\n+          // 2. Set targetIndex to ? FlattenIntoArray(target, element,\n+          //                                          elementLen, targetIndex,\n+          //                                          depth - 1).\n+          var_target_index.Bind(\n+              CallBuiltin(Builtins::kFlattenIntoArray, context, target, element,\n+                          element_length, target_index, NumberDec(depth)));\n+          Goto(&next);\n+        }\n+\n+        BIND(&if_noflatten);\n+        {\n+          // 1. If targetIndex >= 2^53-1, throw a TypeError exception.\n+          Label throw_error(this, Label::kDeferred);\n+          GotoIfNumberGreaterThanOrEqual(\n+              target_index, NumberConstant(kMaxSafeInteger), &throw_error);\n+\n+          // 2. Perform ? CreateDataPropertyOrThrow(target,\n+          //                                        ! ToString(targetIndex),\n+          //                                        element).\n+          CallRuntime(Runtime::kCreateDataProperty, context, target,\n+                      target_index, element);\n+\n+          // 3. Increase targetIndex by 1.\n+          var_target_index.Bind(NumberInc(target_index));\n+          Goto(&next);\n+\n+          BIND(&throw_error);\n+          ThrowTypeError(context, MessageTemplate::kFlattenPastSafeLength,\n+                         source_length, target_index);\n+        }\n+      }\n+      BIND(&next);\n+\n+      // d. Increase sourceIndex by 1.\n+      var_source_index.Bind(NumberInc(source_index));\n+      Goto(&loop);\n+    }\n+\n+    BIND(&done_loop);\n+    return var_target_index.value();\n+  }\n+};\n+\n+}  // namespace\n+\n+// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\n+TF_BUILTIN(FlattenIntoArray, ArrayFlattenAssembler) {\n+  Node* const context = Parameter(Descriptor::kContext);\n+  Node* const target = Parameter(Descriptor::kTarget);\n+  Node* const source = Parameter(Descriptor::kSource);\n+  Node* const source_length = Parameter(Descriptor::kSourceLength);\n+  Node* const start = Parameter(Descriptor::kStart);\n+  Node* const depth = Parameter(Descriptor::kDepth);\n+\n+  Return(\n+      FlattenIntoArray(context, target, source, source_length, start, depth));\n+}\n+\n+// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\n+TF_BUILTIN(FlatMapIntoArray, ArrayFlattenAssembler) {\n+  Node* const context = Parameter(Descriptor::kContext);\n+  Node* const target = Parameter(Descriptor::kTarget);\n+  Node* const source = Parameter(Descriptor::kSource);\n+  Node* const source_length = Parameter(Descriptor::kSourceLength);\n+  Node* const start = Parameter(Descriptor::kStart);\n+  Node* const depth = Parameter(Descriptor::kDepth);\n+  Node* const mapper_function = Parameter(Descriptor::kMapperFunction);\n+  Node* const this_arg = Parameter(Descriptor::kThisArg);\n+\n+  Return(FlattenIntoArray(context, target, source, source_length, start, depth,\n+                          mapper_function, this_arg));\n+}\n+\n+// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatten\n+TF_BUILTIN(ArrayPrototypeFlatten, CodeStubAssembler) {\n+  Node* const argc =\n+      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n+  CodeStubArguments args(this, argc);\n+  Node* const context = Parameter(BuiltinDescriptor::kContext);\n+  Node* const receiver = args.GetReceiver();\n+  Node* const depth = args.GetOptionalArgumentValue(0);\n+\n+  // 1. Let O be ? ToObject(this value).\n+  Node* const o = ToObject(context, receiver);\n+\n+  // 2. Let sourceLen be ? ToLength(? Get(O, \"length\")).\n+  Node* const source_length =\n+      ToLength_Inline(context, GetProperty(context, o, LengthStringConstant()));\n+\n+  // 3. Let depthNum be 1.\n+  VARIABLE(var_depth_num, MachineRepresentation::kTagged, SmiConstant(1));\n+\n+  // 4. If depth is not undefined, then\n+  Label done(this);\n+  GotoIf(IsUndefined(depth), &done);\n+  {\n+    // a. Set depthNum to ? ToInteger(depth).\n+    var_depth_num.Bind(ToInteger_Inline(context, depth));\n+    Goto(&done);\n+  }\n+  BIND(&done);\n+\n+  // 5. Let A be ? ArraySpeciesCreate(O, 0).\n+  Node* const constructor =\n+      CallRuntime(Runtime::kArraySpeciesConstructor, context, o);\n+  Node* const a = ConstructJS(CodeFactory::Construct(isolate()), context,\n+                              constructor, SmiConstant(0));\n+\n+  // 6. Perform ? FlattenIntoArray(A, O, sourceLen, 0, depthNum).\n+  CallBuiltin(Builtins::kFlattenIntoArray, context, a, o, source_length,\n+              SmiConstant(0), var_depth_num.value());\n+\n+  // 7. Return A.\n+  args.PopAndReturn(a);\n+}\n+\n+// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap\n+TF_BUILTIN(ArrayPrototypeFlatMap, CodeStubAssembler) {\n+  Node* const argc =\n+      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n+  CodeStubArguments args(this, argc);\n+  Node* const context = Parameter(BuiltinDescriptor::kContext);\n+  Node* const receiver = args.GetReceiver();\n+  Node* const mapper_function = args.GetOptionalArgumentValue(0);\n+\n+  // 1. Let O be ? ToObject(this value).\n+  Node* const o = ToObject(context, receiver);\n+\n+  // 2. Let sourceLen be ? ToLength(? Get(O, \"length\")).\n+  Node* const source_length =\n+      ToLength_Inline(context, GetProperty(context, o, LengthStringConstant()));\n+\n+  // 3. If IsCallable(mapperFunction) is false, throw a TypeError exception.\n+  Label if_not_callable(this, Label::kDeferred);\n+  GotoIf(TaggedIsSmi(mapper_function), &if_not_callable);\n+  GotoIfNot(IsCallable(mapper_function), &if_not_callable);\n+\n+  // 4. If thisArg is present, let T be thisArg; else let T be undefined.\n+  Node* const t = args.GetOptionalArgumentValue(1);\n+\n+  // 5. Let A be ? ArraySpeciesCreate(O, 0).\n+  Node* const constructor =\n+      CallRuntime(Runtime::kArraySpeciesConstructor, context, o);\n+  Node* const a = ConstructJS(CodeFactory::Construct(isolate()), context,\n+                              constructor, SmiConstant(0));\n+\n+  // 6. Perform ? FlattenIntoArray(A, O, sourceLen, 0, 1, mapperFunction, T).\n+  CallBuiltin(Builtins::kFlatMapIntoArray, context, a, o, source_length,\n+              SmiConstant(0), SmiConstant(1), mapper_function, t);\n+\n+  // 7. Return A.\n+  args.PopAndReturn(a);\n \n-  BIND(&if_isdetached);\n-  ThrowTypeError(context, MessageTemplate::kDetachedOperation, method_name);\n+  BIND(&if_not_callable);\n+  { ThrowTypeError(context, MessageTemplate::kMapperFunctionNonCallable); }\n }\n \n }  // namespace internal"
        },
        {
            "sha": "aabd4bab6ea700675385ede3f488dabc6cfb7fc4",
            "filename": "deps/v8/src/builtins/builtins-array-gen.h",
            "status": "modified",
            "additions": 11,
            "deletions": 8,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array-gen.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -73,8 +73,8 @@ class ArrayBuiltinsAssembler : public CodeStubAssembler {\n   TNode<Object> receiver() { return receiver_; }\n   Node* new_target() { return new_target_; }\n   TNode<IntPtrT> argc() { return argc_; }\n-  Node* o() { return o_; }\n-  Node* len() { return len_; }\n+  TNode<JSReceiver> o() { return o_; }\n+  TNode<Number> len() { return len_; }\n   Node* callbackfn() { return callbackfn_; }\n   Node* this_arg() { return this_arg_; }\n   Node* k() { return k_.value(); }\n@@ -95,7 +95,8 @@ class ArrayBuiltinsAssembler : public CodeStubAssembler {\n       ForEachDirection direction = ForEachDirection::kForward);\n   void InitIteratingArrayBuiltinLoopContinuation(\n       TNode<Context> context, TNode<Object> receiver, Node* callbackfn,\n-      Node* this_arg, Node* a, Node* o, Node* initial_k, Node* len, Node* to);\n+      Node* this_arg, Node* a, TNode<JSReceiver> o, Node* initial_k,\n+      TNode<Number> len, Node* to);\n \n   void GenerateIteratingTypedArrayBuiltinBody(\n       const char* name, const BuiltinResultGenerator& generator,\n@@ -112,13 +113,15 @@ class ArrayBuiltinsAssembler : public CodeStubAssembler {\n \n   void VisitAllTypedArrayElements(Node* array_buffer,\n                                   const CallResultProcessor& processor,\n-                                  Label* detached, ForEachDirection direction);\n+                                  Label* detached, ForEachDirection direction,\n+                                  TNode<JSTypedArray> typed_array);\n \n   void VisitAllFastElementsOneKind(ElementsKind kind,\n                                    const CallResultProcessor& processor,\n                                    Label* array_changed, ParameterMode mode,\n                                    ForEachDirection direction,\n-                                   MissingPropertyMode missing_property_mode);\n+                                   MissingPropertyMode missing_property_mode,\n+                                   TNode<Smi> length);\n \n   void HandleFastElements(const CallResultProcessor& processor,\n                           const PostLoopAction& action, Label* slow,\n@@ -131,12 +134,12 @@ class ArrayBuiltinsAssembler : public CodeStubAssembler {\n   void GenerateArraySpeciesCreate();\n \n   // Perform ArraySpeciesCreate (ES6 #sec-arrayspeciescreate).\n-  void GenerateArraySpeciesCreate(SloppyTNode<Smi> len);\n+  void GenerateArraySpeciesCreate(TNode<Number> len);\n \n   Node* callbackfn_ = nullptr;\n-  Node* o_ = nullptr;\n+  TNode<JSReceiver> o_;\n   Node* this_arg_ = nullptr;\n-  Node* len_ = nullptr;\n+  TNode<Number> len_;\n   TNode<Context> context_;\n   TNode<Object> receiver_;\n   Node* new_target_ = nullptr;"
        },
        {
            "sha": "f57c7d39ca846fb5ace3d1d66d759cea369618f7",
            "filename": "deps/v8/src/builtins/builtins-array.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 77,
            "changes": 84,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-array.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -78,7 +78,7 @@ inline bool HasOnlySimpleElements(Isolate* isolate, JSReceiver* receiver) {\n }\n \n // Returns |false| if not applicable.\n-MUST_USE_RESULT\n+V8_WARN_UNUSED_RESULT\n inline bool EnsureJSArrayWithWritableFastElements(Isolate* isolate,\n                                                   Handle<Object> receiver,\n                                                   BuiltinArguments* args,\n@@ -128,9 +128,8 @@ inline bool EnsureJSArrayWithWritableFastElements(Isolate* isolate,\n   return true;\n }\n \n-MUST_USE_RESULT static Object* CallJsIntrinsic(Isolate* isolate,\n-                                               Handle<JSFunction> function,\n-                                               BuiltinArguments args) {\n+V8_WARN_UNUSED_RESULT static Object* CallJsIntrinsic(\n+    Isolate* isolate, Handle<JSFunction> function, BuiltinArguments args) {\n   HandleScope handleScope(isolate);\n   int argc = args.length() - 1;\n   ScopedVector<Handle<Object>> argv(argc);\n@@ -240,75 +239,6 @@ BUILTIN(ArrayUnshift) {\n   return Smi::FromInt(new_length);\n }\n \n-BUILTIN(ArraySlice) {\n-  HandleScope scope(isolate);\n-  Handle<Object> receiver = args.receiver();\n-  int len = -1;\n-  int relative_start = 0;\n-  int relative_end = 0;\n-\n-  if (receiver->IsJSArray()) {\n-    DisallowHeapAllocation no_gc;\n-    JSArray* array = JSArray::cast(*receiver);\n-    if (V8_UNLIKELY(!array->HasFastElements() ||\n-                    !IsJSArrayFastElementMovingAllowed(isolate, array) ||\n-                    !isolate->IsSpeciesLookupChainIntact() ||\n-                    // If this is a subclass of Array, then call out to JS\n-                    !array->HasArrayPrototype(isolate))) {\n-      AllowHeapAllocation allow_allocation;\n-      return CallJsIntrinsic(isolate, isolate->array_slice(), args);\n-    }\n-    len = Smi::ToInt(array->length());\n-  } else if (receiver->IsJSObject() &&\n-             JSSloppyArgumentsObject::GetSloppyArgumentsLength(\n-                 isolate, Handle<JSObject>::cast(receiver), &len)) {\n-    // Array.prototype.slice.call(arguments, ...) is quite a common idiom\n-    // (notably more than 50% of invocations in Web apps).\n-    // Treat it in C++ as well.\n-    DCHECK(JSObject::cast(*receiver)->HasFastElements() ||\n-           JSObject::cast(*receiver)->HasFastArgumentsElements());\n-  } else {\n-    AllowHeapAllocation allow_allocation;\n-    return CallJsIntrinsic(isolate, isolate->array_slice(), args);\n-  }\n-  DCHECK_LE(0, len);\n-  int argument_count = args.length() - 1;\n-  // Note carefully chosen defaults---if argument is missing,\n-  // it's undefined which gets converted to 0 for relative_start\n-  // and to len for relative_end.\n-  relative_start = 0;\n-  relative_end = len;\n-  if (argument_count > 0) {\n-    DisallowHeapAllocation no_gc;\n-    if (!ClampedToInteger(isolate, args[1], &relative_start)) {\n-      AllowHeapAllocation allow_allocation;\n-      return CallJsIntrinsic(isolate, isolate->array_slice(), args);\n-    }\n-    if (argument_count > 1) {\n-      Object* end_arg = args[2];\n-      // slice handles the end_arg specially\n-      if (end_arg->IsUndefined(isolate)) {\n-        relative_end = len;\n-      } else if (!ClampedToInteger(isolate, end_arg, &relative_end)) {\n-        AllowHeapAllocation allow_allocation;\n-        return CallJsIntrinsic(isolate, isolate->array_slice(), args);\n-      }\n-    }\n-  }\n-\n-  // ECMAScript 232, 3rd Edition, Section 15.4.4.10, step 6.\n-  uint32_t actual_start = (relative_start < 0) ? Max(len + relative_start, 0)\n-                                               : Min(relative_start, len);\n-\n-  // ECMAScript 232, 3rd Edition, Section 15.4.4.10, step 8.\n-  uint32_t actual_end =\n-      (relative_end < 0) ? Max(len + relative_end, 0) : Min(relative_end, len);\n-\n-  Handle<JSObject> object = Handle<JSObject>::cast(receiver);\n-  ElementsAccessor* accessor = object->GetElementsAccessor();\n-  return *accessor->Slice(object, actual_start, actual_end);\n-}\n-\n BUILTIN(ArraySplice) {\n   HandleScope scope(isolate);\n   Handle<Object> receiver = args.receiver();\n@@ -317,7 +247,7 @@ BUILTIN(ArraySplice) {\n           // If this is a subclass of Array, then call out to JS.\n           !Handle<JSArray>::cast(receiver)->HasArrayPrototype(isolate) ||\n           // If anything with @@species has been messed with, call out to JS.\n-          !isolate->IsSpeciesLookupChainIntact())) {\n+          !isolate->IsArraySpeciesLookupChainIntact())) {\n     return CallJsIntrinsic(isolate, isolate->array_splice(), args);\n   }\n   Handle<JSArray> array = Handle<JSArray>::cast(receiver);\n@@ -403,7 +333,7 @@ class ArrayConcatVisitor {\n \n   ~ArrayConcatVisitor() { clear_storage(); }\n \n-  MUST_USE_RESULT bool visit(uint32_t i, Handle<Object> elm) {\n+  V8_WARN_UNUSED_RESULT bool visit(uint32_t i, Handle<Object> elm) {\n     uint32_t index = index_offset_ + i;\n \n     if (i >= JSObject::kMaxElementCount - index_offset_) {\n@@ -481,7 +411,7 @@ class ArrayConcatVisitor {\n     return array;\n   }\n \n-  MUST_USE_RESULT MaybeHandle<JSReceiver> ToJSReceiver() {\n+  V8_WARN_UNUSED_RESULT MaybeHandle<JSReceiver> ToJSReceiver() {\n     DCHECK(!is_fixed_array());\n     Handle<JSReceiver> result = Handle<JSReceiver>::cast(storage_);\n     Handle<Object> length =\n@@ -1187,7 +1117,7 @@ BUILTIN(ArrayConcat) {\n   // Avoid a real species read to avoid extra lookups to the array constructor\n   if (V8_LIKELY(receiver->IsJSArray() &&\n                 Handle<JSArray>::cast(receiver)->HasArrayPrototype(isolate) &&\n-                isolate->IsSpeciesLookupChainIntact())) {\n+                isolate->IsArraySpeciesLookupChainIntact())) {\n     if (Fast_ArrayConcat(isolate, &args).ToHandle(&result_array)) {\n       return *result_array;\n     }"
        },
        {
            "sha": "9c77a0047d77ece0d542e72152fb7c7320bf0e97",
            "filename": "deps/v8/src/builtins/builtins-arraybuffer.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 23,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-arraybuffer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -23,17 +23,6 @@ namespace internal {\n // -----------------------------------------------------------------------------\n // ES6 section 21.1 ArrayBuffer Objects\n \n-// ES6 section 24.1.2.1 ArrayBuffer ( length ) for the [[Call]] case.\n-BUILTIN(ArrayBufferConstructor) {\n-  HandleScope scope(isolate);\n-  Handle<JSFunction> target = args.target();\n-  DCHECK(*target == target->native_context()->array_buffer_fun() ||\n-         *target == target->native_context()->shared_array_buffer_fun());\n-  THROW_NEW_ERROR_RETURN_FAILURE(\n-      isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n-                            handle(target->shared()->name(), isolate)));\n-}\n-\n namespace {\n \n Object* ConstructBuffer(Isolate* isolate, Handle<JSFunction> target,\n@@ -62,24 +51,30 @@ Object* ConstructBuffer(Isolate* isolate, Handle<JSFunction> target,\n \n }  // namespace\n \n-// ES6 section 24.1.2.1 ArrayBuffer ( length ) for the [[Construct]] case.\n-BUILTIN(ArrayBufferConstructor_ConstructStub) {\n+// ES #sec-arraybuffer-constructor\n+BUILTIN(ArrayBufferConstructor) {\n   HandleScope scope(isolate);\n   Handle<JSFunction> target = args.target();\n-  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n-  Handle<Object> length = args.atOrUndefined(isolate, 1);\n   DCHECK(*target == target->native_context()->array_buffer_fun() ||\n          *target == target->native_context()->shared_array_buffer_fun());\n-\n-  Handle<Object> number_length;\n-  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, number_length,\n-                                     Object::ToInteger(isolate, length));\n-  if (number_length->Number() < 0.0) {\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n     THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferLength));\n+        isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n+                              handle(target->shared()->Name(), isolate)));\n+  } else {  // [[Construct]]\n+    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+    Handle<Object> length = args.atOrUndefined(isolate, 1);\n+\n+    Handle<Object> number_length;\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, number_length,\n+                                       Object::ToInteger(isolate, length));\n+    if (number_length->Number() < 0.0) {\n+      THROW_NEW_ERROR_RETURN_FAILURE(\n+          isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferLength));\n+    }\n+\n+    return ConstructBuffer(isolate, target, new_target, number_length, true);\n   }\n-\n-  return ConstructBuffer(isolate, target, new_target, number_length, true);\n }\n \n // This is a helper to construct an ArrayBuffer with uinitialized memory."
        },
        {
            "sha": "073c96a2e0994878653dc82386455cc7d0e9af26",
            "filename": "deps/v8/src/builtins/builtins-async-gen.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -5,7 +5,7 @@\n #include \"src/builtins/builtins-async-gen.h\"\n \n #include \"src/builtins/builtins-utils-gen.h\"\n-#include \"src/factory-inl.h\"\n+#include \"src/heap/factory-inl.h\"\n #include \"src/objects/shared-function-info.h\"\n \n namespace v8 {\n@@ -44,7 +44,7 @@ void AsyncBuiltinsAssembler::Await(Node* context, Node* generator, Node* value,\n   // When debugging, we need to link from the {generator} to the\n   // {outer_promise} of the async function/generator.\n   Label done(this);\n-  GotoIfNot(IsDebugActive(), &done);\n+  GotoIfNot(IsPromiseHookEnabledOrDebugIsActive(), &done);\n   CallRuntime(Runtime::kSetProperty, native_context, generator,\n               LoadRoot(Heap::kgenerator_outer_promise_symbolRootIndex),\n               outer_promise, SmiConstant(LanguageMode::kStrict));"
        },
        {
            "sha": "290252da6249401f8a512a357aea4a7e176cffa8",
            "filename": "deps/v8/src/builtins/builtins-async-generator-gen.cc",
            "status": "modified",
            "additions": 67,
            "deletions": 13,
            "changes": 80,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-async-generator-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -29,13 +29,13 @@ class AsyncGeneratorBuiltinsAssembler : public AsyncBuiltinsAssembler {\n       : AsyncBuiltinsAssembler(state) {}\n \n   inline Node* TaggedIsAsyncGenerator(Node* tagged_object) {\n-    Node* if_notsmi = TaggedIsNotSmi(tagged_object);\n-    return Select(if_notsmi,\n-                  [=]() {\n-                    return HasInstanceType(tagged_object,\n-                                           JS_ASYNC_GENERATOR_OBJECT_TYPE);\n-                  },\n-                  [=]() { return if_notsmi; }, MachineRepresentation::kBit);\n+    TNode<BoolT> if_notsmi = TaggedIsNotSmi(tagged_object);\n+    return Select<BoolT>(if_notsmi,\n+                         [=] {\n+                           return HasInstanceType(\n+                               tagged_object, JS_ASYNC_GENERATOR_OBJECT_TYPE);\n+                         },\n+                         [=] { return if_notsmi; });\n   }\n   inline Node* LoadGeneratorState(Node* const generator) {\n     return LoadObjectField(generator, JSGeneratorObject::kContinuationOffset);\n@@ -518,11 +518,34 @@ TF_BUILTIN(AsyncGeneratorResolve, AsyncGeneratorBuiltinsAssembler) {\n                                    done);\n   }\n \n-  // Perform Call(promiseCapability.[[Resolve]], undefined, «iteratorResult»).\n-  CallBuiltin(Builtins::kResolvePromise, context, promise, iter_result);\n+  // We know that {iter_result} itself doesn't have any \"then\" property and\n+  // we also know that the [[Prototype]] of {iter_result} is the intrinsic\n+  // %ObjectPrototype%. So we can skip the [[Resolve]] logic here completely\n+  // and directly call into the FulfillPromise operation if we can prove\n+  // that the %ObjectPrototype% also doesn't have any \"then\" property. This\n+  // is guarded by the Promise#then protector.\n+  Label if_fast(this), if_slow(this, Label::kDeferred), return_promise(this);\n+  GotoIfForceSlowPath(&if_slow);\n+  Branch(IsPromiseThenProtectorCellInvalid(), &if_slow, &if_fast);\n+\n+  BIND(&if_fast);\n+  {\n+    // Skip the \"then\" on {iter_result} and directly fulfill the {promise}\n+    // with the {iter_result}.\n+    CallBuiltin(Builtins::kFulfillPromise, context, promise, iter_result);\n+    Goto(&return_promise);\n+  }\n+\n+  BIND(&if_slow);\n+  {\n+    // Perform Call(promiseCapability.[[Resolve]], undefined, «iteratorResult»).\n+    CallBuiltin(Builtins::kResolvePromise, context, promise, iter_result);\n+    Goto(&return_promise);\n+  }\n \n   // Per spec, AsyncGeneratorResolve() returns undefined. However, for the\n   // benefit of %TraceExit(), return the Promise.\n+  BIND(&return_promise);\n   Return(promise);\n }\n \n@@ -548,11 +571,42 @@ TF_BUILTIN(AsyncGeneratorYield, AsyncGeneratorBuiltinsAssembler) {\n   Node* const request = LoadFirstAsyncGeneratorRequestFromQueue(generator);\n   Node* const outer_promise = LoadPromiseFromAsyncGeneratorRequest(request);\n \n+  // Mark the generator as \"awaiting\".\n   SetGeneratorAwaiting(generator);\n-  Await(context, generator, value, outer_promise,\n-        Builtins::kAsyncGeneratorYieldFulfill,\n-        Builtins::kAsyncGeneratorAwaitReject, is_caught);\n-  Return(UndefinedConstant());\n+\n+  // We can skip the creation of a temporary promise and the whole\n+  // [[Resolve]] logic if we already know that the {value} that's\n+  // being yielded is a primitive, as in that case we would immediately\n+  // fulfill the temporary promise anyways and schedule a fulfill\n+  // reaction job. This gives a nice performance boost for async\n+  // generators that yield only primitives, e.g. numbers or strings.\n+  Label if_primitive(this), if_generic(this);\n+  GotoIfForceSlowPath(&if_generic);\n+  GotoIf(IsPromiseHookEnabledOrDebugIsActive(), &if_generic);\n+  GotoIf(TaggedIsSmi(value), &if_primitive);\n+  Branch(IsJSReceiver(value), &if_generic, &if_primitive);\n+\n+  BIND(&if_generic);\n+  {\n+    Await(context, generator, value, outer_promise,\n+          Builtins::kAsyncGeneratorYieldFulfill,\n+          Builtins::kAsyncGeneratorAwaitReject, is_caught);\n+    Return(UndefinedConstant());\n+  }\n+\n+  BIND(&if_primitive);\n+  {\n+    // For primitive {value}s we can skip the allocation of the temporary\n+    // promise and the resolution of that, and directly allocate the fulfill\n+    // reaction job.\n+    Node* const microtask = AllocatePromiseReactionJobTask(\n+        Heap::kPromiseFulfillReactionJobTaskMapRootIndex, context, value,\n+        HeapConstant(Builtins::CallableFor(\n+                         isolate(), Builtins::kAsyncGeneratorYieldFulfill)\n+                         .code()),\n+        generator);\n+    TailCallBuiltin(Builtins::kEnqueueMicrotask, context, microtask);\n+  }\n }\n \n TF_BUILTIN(AsyncGeneratorYieldFulfill, AsyncGeneratorBuiltinsAssembler) {"
        },
        {
            "sha": "6c04c9dcb7199d29bc337d9cdeb0b958fb121f8e",
            "filename": "deps/v8/src/builtins/builtins-bigint.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 20,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-bigint.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-bigint.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-bigint.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -13,29 +13,28 @@ namespace internal {\n \n BUILTIN(BigIntConstructor) {\n   HandleScope scope(isolate);\n-  Handle<Object> value = args.atOrUndefined(isolate, 1);\n-\n-  if (value->IsJSReceiver()) {\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-        isolate, value,\n-        JSReceiver::ToPrimitive(Handle<JSReceiver>::cast(value),\n-                                ToPrimitiveHint::kNumber));\n-  }\n-\n-  if (value->IsNumber()) {\n-    RETURN_RESULT_OR_FAILURE(isolate, BigInt::FromNumber(isolate, value));\n-  } else {\n-    RETURN_RESULT_OR_FAILURE(isolate, BigInt::FromObject(isolate, value));\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n+    Handle<Object> value = args.atOrUndefined(isolate, 1);\n+\n+    if (value->IsJSReceiver()) {\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+          isolate, value,\n+          JSReceiver::ToPrimitive(Handle<JSReceiver>::cast(value),\n+                                  ToPrimitiveHint::kNumber));\n+    }\n+\n+    if (value->IsNumber()) {\n+      RETURN_RESULT_OR_FAILURE(isolate, BigInt::FromNumber(isolate, value));\n+    } else {\n+      RETURN_RESULT_OR_FAILURE(isolate, BigInt::FromObject(isolate, value));\n+    }\n+  } else {  // [[Construct]]\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewTypeError(MessageTemplate::kNotConstructor,\n+                              isolate->factory()->BigInt_string()));\n   }\n }\n \n-BUILTIN(BigIntConstructor_ConstructStub) {\n-  HandleScope scope(isolate);\n-  THROW_NEW_ERROR_RETURN_FAILURE(\n-      isolate, NewTypeError(MessageTemplate::kNotConstructor,\n-                            isolate->factory()->BigInt_string()));\n-}\n-\n BUILTIN(BigIntAsUintN) {\n   HandleScope scope(isolate);\n   Handle<Object> bits_obj = args.atOrUndefined(isolate, 1);"
        },
        {
            "sha": "5dc42d506f375406810cf613d5adc8388f2e78cd",
            "filename": "deps/v8/src/builtins/builtins-boolean.cc",
            "status": "modified",
            "additions": 18,
            "deletions": 19,
            "changes": 37,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-boolean.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -11,28 +11,27 @@ namespace v8 {\n namespace internal {\n \n // -----------------------------------------------------------------------------\n-// ES6 section 19.3 Boolean Objects\n+// ES #sec-boolean-objects\n \n-// ES6 section 19.3.1.1 Boolean ( value ) for the [[Call]] case.\n+// ES #sec-boolean-constructor\n BUILTIN(BooleanConstructor) {\n   HandleScope scope(isolate);\n-  Handle<Object> value = args.atOrUndefined(isolate, 1);\n-  return isolate->heap()->ToBoolean(value->BooleanValue());\n-}\n-\n-// ES6 section 19.3.1.1 Boolean ( value ) for the [[Construct]] case.\n-BUILTIN(BooleanConstructor_ConstructStub) {\n-  HandleScope scope(isolate);\n-  Handle<Object> value = args.atOrUndefined(isolate, 1);\n-  Handle<JSFunction> target = args.target();\n-  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n-  DCHECK(*target == target->native_context()->boolean_function());\n-  Handle<JSObject> result;\n-  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n-                                     JSObject::New(target, new_target));\n-  Handle<JSValue>::cast(result)->set_value(\n-      isolate->heap()->ToBoolean(value->BooleanValue()));\n-  return *result;\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n+    Handle<Object> value = args.atOrUndefined(isolate, 1);\n+    return isolate->heap()->ToBoolean(value->BooleanValue());\n+  } else {  // [[Construct]]\n+    HandleScope scope(isolate);\n+    Handle<Object> value = args.atOrUndefined(isolate, 1);\n+    Handle<JSFunction> target = args.target();\n+    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+    DCHECK(*target == target->native_context()->boolean_function());\n+    Handle<JSObject> result;\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n+                                       JSObject::New(target, new_target));\n+    Handle<JSValue>::cast(result)->set_value(\n+        isolate->heap()->ToBoolean(value->BooleanValue()));\n+    return *result;\n+  }\n }\n \n }  // namespace internal"
        },
        {
            "sha": "34c88670f46952014ce168202c58a5d41495266f",
            "filename": "deps/v8/src/builtins/builtins-call-gen.cc",
            "status": "modified",
            "additions": 67,
            "deletions": 70,
            "changes": 137,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-call-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -268,91 +268,88 @@ void CallOrConstructBuiltinsAssembler::CallOrConstructDoubleVarargs(\n void CallOrConstructBuiltinsAssembler::CallOrConstructWithSpread(\n     Node* target, Node* new_target, Node* spread, Node* args_count,\n     Node* context) {\n-  Label if_done(this), if_holey(this), if_runtime(this, Label::kDeferred);\n+  Label if_smiorobject(this), if_double(this),\n+      if_generic(this, Label::kDeferred);\n \n-  VARIABLE(spread_result, MachineRepresentation::kTagged, spread);\n+  VARIABLE(var_length, MachineRepresentation::kWord32);\n+  VARIABLE(var_elements, MachineRepresentation::kTagged);\n+  VARIABLE(var_elements_kind, MachineRepresentation::kWord32);\n \n-  GotoIf(TaggedIsSmi(spread), &if_runtime);\n+  GotoIf(TaggedIsSmi(spread), &if_generic);\n   Node* spread_map = LoadMap(spread);\n-  GotoIfNot(IsJSArrayMap(spread_map), &if_runtime);\n+  GotoIfNot(IsJSArrayMap(spread_map), &if_generic);\n+\n+  // Check that we have the original Array.prototype.\n+  GotoIfNot(IsPrototypeInitialArrayPrototype(context, spread_map), &if_generic);\n \n-  // Check that we have the original ArrayPrototype.\n-  GotoIfNot(IsPrototypeInitialArrayPrototype(context, spread_map), &if_runtime);\n+  // Check that there are no elements on the Array.prototype chain.\n+  GotoIf(IsNoElementsProtectorCellInvalid(), &if_generic);\n \n-  // Check that the ArrayPrototype hasn't been modified in a way that would\n+  // Check that the Array.prototype hasn't been modified in a way that would\n   // affect iteration.\n   Node* protector_cell = LoadRoot(Heap::kArrayIteratorProtectorRootIndex);\n   DCHECK(isolate()->heap()->array_iterator_protector()->IsPropertyCell());\n-  GotoIfNot(\n-      WordEqual(LoadObjectField(protector_cell, PropertyCell::kValueOffset),\n-                SmiConstant(Isolate::kProtectorValid)),\n-      &if_runtime);\n-\n-  // Check that the map of the initial array iterator hasn't changed.\n-  TNode<Context> native_context = LoadNativeContext(context);\n-  GotoIfNot(HasInitialArrayIteratorPrototypeMap(native_context), &if_runtime);\n-\n-  Node* kind = LoadMapElementsKind(spread_map);\n-\n-  STATIC_ASSERT(PACKED_SMI_ELEMENTS == 0);\n-  STATIC_ASSERT(HOLEY_SMI_ELEMENTS == 1);\n-  STATIC_ASSERT(PACKED_ELEMENTS == 2);\n-  STATIC_ASSERT(HOLEY_ELEMENTS == 3);\n-  STATIC_ASSERT(PACKED_DOUBLE_ELEMENTS == 4);\n-  STATIC_ASSERT(HOLEY_DOUBLE_ELEMENTS == 5);\n-  STATIC_ASSERT(LAST_FAST_ELEMENTS_KIND == HOLEY_DOUBLE_ELEMENTS);\n-\n-  GotoIf(Int32GreaterThan(kind, Int32Constant(LAST_FAST_ELEMENTS_KIND)),\n-         &if_runtime);\n-  Branch(Word32And(kind, Int32Constant(1)), &if_holey, &if_done);\n-\n-  // Check the NoElementsProtector cell for holey arrays.\n-  BIND(&if_holey);\n-  { Branch(IsNoElementsProtectorCellInvalid(), &if_runtime, &if_done); }\n-\n-  BIND(&if_runtime);\n+  GotoIf(WordEqual(LoadObjectField(protector_cell, PropertyCell::kValueOffset),\n+                   SmiConstant(Isolate::kProtectorInvalid)),\n+         &if_generic);\n+\n+  // The fast-path accesses the {spread} elements directly.\n+  Node* spread_kind = LoadMapElementsKind(spread_map);\n+  var_elements_kind.Bind(spread_kind);\n+  var_length.Bind(\n+      LoadAndUntagToWord32ObjectField(spread, JSArray::kLengthOffset));\n+  var_elements.Bind(LoadObjectField(spread, JSArray::kElementsOffset));\n+\n+  // Check elements kind of {spread}.\n+  GotoIf(Int32LessThan(spread_kind, Int32Constant(PACKED_DOUBLE_ELEMENTS)),\n+         &if_smiorobject);\n+  Branch(Int32GreaterThan(spread_kind, Int32Constant(LAST_FAST_ELEMENTS_KIND)),\n+         &if_generic, &if_double);\n+\n+  BIND(&if_generic);\n   {\n-    Node* spread_iterable = LoadContextElement(LoadNativeContext(context),\n-                                               Context::SPREAD_ITERABLE_INDEX);\n-    spread_result.Bind(CallJS(CodeFactory::Call(isolate()), context,\n-                              spread_iterable, UndefinedConstant(), spread));\n-    CSA_ASSERT(this, IsJSArray(spread_result.value()));\n-    Goto(&if_done);\n+    Label if_iterator_fn_not_callable(this, Label::kDeferred);\n+    Node* iterator_fn = GetProperty(context, spread, IteratorSymbolConstant());\n+    GotoIf(TaggedIsSmi(iterator_fn), &if_iterator_fn_not_callable);\n+    GotoIfNot(IsCallable(iterator_fn), &if_iterator_fn_not_callable);\n+    Node* list =\n+        CallBuiltin(Builtins::kIterableToList, context, spread, iterator_fn);\n+    CSA_ASSERT(this, IsJSArray(list));\n+    Node* list_kind = LoadMapElementsKind(LoadMap(list));\n+    var_length.Bind(\n+        LoadAndUntagToWord32ObjectField(list, JSArray::kLengthOffset));\n+    var_elements.Bind(LoadObjectField(list, JSArray::kElementsOffset));\n+    var_elements_kind.Bind(list_kind);\n+    Branch(Int32LessThan(list_kind, Int32Constant(PACKED_DOUBLE_ELEMENTS)),\n+           &if_smiorobject, &if_double);\n+\n+    BIND(&if_iterator_fn_not_callable);\n+    ThrowTypeError(context, MessageTemplate::kIteratorSymbolNonCallable);\n   }\n \n-  BIND(&if_done);\n+  BIND(&if_smiorobject);\n   {\n-    // The result from if_runtime can be an array of doubles.\n-    Label if_not_double(this), if_double(this);\n-    Node* elements =\n-        LoadObjectField(spread_result.value(), JSArray::kElementsOffset);\n-    Node* length = LoadAndUntagToWord32ObjectField(spread_result.value(),\n-                                                   JSArray::kLengthOffset);\n-\n-    Node* kind = LoadMapElementsKind(LoadMap(elements));\n-    CSA_ASSERT(this, Int32LessThanOrEqual(\n-                         kind, Int32Constant(LAST_FAST_ELEMENTS_KIND)));\n-\n-    Branch(Int32GreaterThan(kind, Int32Constant(HOLEY_ELEMENTS)), &if_double,\n-           &if_not_double);\n+    Node* const elements = var_elements.value();\n+    Node* const length = var_length.value();\n \n-    BIND(&if_not_double);\n-    {\n-      if (new_target == nullptr) {\n-        Callable callable = CodeFactory::CallVarargs(isolate());\n-        TailCallStub(callable, context, target, args_count, elements, length);\n-      } else {\n-        Callable callable = CodeFactory::ConstructVarargs(isolate());\n-        TailCallStub(callable, context, target, new_target, args_count,\n-                     elements, length);\n-      }\n+    if (new_target == nullptr) {\n+      Callable callable = CodeFactory::CallVarargs(isolate());\n+      TailCallStub(callable, context, target, args_count, elements, length);\n+    } else {\n+      Callable callable = CodeFactory::ConstructVarargs(isolate());\n+      TailCallStub(callable, context, target, new_target, args_count, elements,\n+                   length);\n     }\n+  }\n \n-    BIND(&if_double);\n-    {\n-      CallOrConstructDoubleVarargs(target, new_target, elements, length,\n-                                   args_count, context, kind);\n-    }\n+  BIND(&if_double);\n+  {\n+    Node* const elements_kind = var_elements_kind.value();\n+    Node* const elements = var_elements.value();\n+    Node* const length = var_length.value();\n+\n+    CallOrConstructDoubleVarargs(target, new_target, elements, length,\n+                                 args_count, context, elements_kind);\n   }\n }\n "
        },
        {
            "sha": "5c3f26374689dc54e972eb15070df81b04488c84",
            "filename": "deps/v8/src/builtins/builtins-collections-gen.cc",
            "status": "modified",
            "additions": 31,
            "deletions": 32,
            "changes": 63,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-collections-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -6,7 +6,7 @@\n #include \"src/builtins/builtins-iterator-gen.h\"\n #include \"src/builtins/builtins-utils-gen.h\"\n #include \"src/code-stub-assembler.h\"\n-#include \"src/factory-inl.h\"\n+#include \"src/heap/factory-inl.h\"\n #include \"src/objects/hash-table.h\"\n \n namespace v8 {\n@@ -237,6 +237,7 @@ void BaseCollectionsAssembler::AddConstructorEntriesFromFastJSArray(\n   TNode<Map> original_fast_js_array_map = LoadMap(fast_jsarray);\n #endif\n   Label exit(this), if_doubles(this), if_smiorobjects(this);\n+  GotoIf(IntPtrEqual(length, IntPtrConstant(0)), &exit);\n   Branch(IsFastSmiOrTaggedElementsKind(elements_kind), &if_smiorobjects,\n          &if_doubles);\n   BIND(&if_smiorobjects);\n@@ -333,8 +334,7 @@ TNode<Object> BaseCollectionsAssembler::AllocateJSCollection(\n                         [=] {\n                           return AllocateJSCollectionSlow(context, constructor,\n                                                           new_target);\n-                        },\n-                        MachineRepresentation::kTagged);\n+                        });\n }\n \n TNode<Object> BaseCollectionsAssembler::AllocateJSCollectionFast(\n@@ -456,7 +456,7 @@ TNode<IntPtrT> BaseCollectionsAssembler::EstimatedInitialSize(\n   return Select<IntPtrT>(\n       is_fast_jsarray,\n       [=] { return SmiUntag(LoadFastJSArrayLength(CAST(initial_entries))); },\n-      [=] { return IntPtrConstant(0); }, MachineType::PointerRepresentation());\n+      [=] { return IntPtrConstant(0); });\n }\n \n void BaseCollectionsAssembler::GotoIfNotJSReceiver(Node* const obj,\n@@ -492,10 +492,9 @@ TNode<BoolT> BaseCollectionsAssembler::HasInitialCollectionPrototype(\n \n TNode<Object> BaseCollectionsAssembler::LoadAndNormalizeFixedArrayElement(\n     TNode<Object> elements, TNode<IntPtrT> index) {\n-  TNode<Object> element = CAST(LoadFixedArrayElement(elements, index));\n+  TNode<Object> element = LoadFixedArrayElement(elements, index);\n   return Select<Object>(IsTheHole(element), [=] { return UndefinedConstant(); },\n-                        [=] { return element; },\n-                        MachineRepresentation::kTagged);\n+                        [=] { return element; });\n }\n \n TNode<Object> BaseCollectionsAssembler::LoadAndNormalizeFixedDoubleArrayElement(\n@@ -1060,12 +1059,12 @@ void CollectionsBuiltinsAssembler::FindOrderedHashTableEntry(\n     std::function<void(Node*, Label*, Label*)> key_compare,\n     Variable* entry_start_position, Label* entry_found, Label* not_found) {\n   // Get the index of the bucket.\n-  Node* const number_of_buckets = SmiUntag(\n-      LoadFixedArrayElement(table, CollectionType::kNumberOfBucketsIndex));\n+  Node* const number_of_buckets = SmiUntag(CAST(\n+      LoadFixedArrayElement(table, CollectionType::kNumberOfBucketsIndex)));\n   Node* const bucket =\n       WordAnd(hash, IntPtrSub(number_of_buckets, IntPtrConstant(1)));\n-  Node* const first_entry = SmiUntag(LoadFixedArrayElement(\n-      table, bucket, CollectionType::kHashTableStartIndex * kPointerSize));\n+  Node* const first_entry = SmiUntag(CAST(LoadFixedArrayElement(\n+      table, bucket, CollectionType::kHashTableStartIndex * kPointerSize)));\n \n   // Walk the bucket chain.\n   Node* entry_start;\n@@ -1088,10 +1087,10 @@ void CollectionsBuiltinsAssembler::FindOrderedHashTableEntry(\n         UintPtrLessThan(\n             var_entry.value(),\n             SmiUntag(SmiAdd(\n-                LoadFixedArrayElement(table,\n-                                      CollectionType::kNumberOfElementsIndex),\n-                LoadFixedArrayElement(\n-                    table, CollectionType::kNumberOfDeletedElementsIndex)))));\n+                CAST(LoadFixedArrayElement(\n+                    table, CollectionType::kNumberOfElementsIndex)),\n+                CAST(LoadFixedArrayElement(\n+                    table, CollectionType::kNumberOfDeletedElementsIndex))))));\n \n     // Compute the index of the entry relative to kHashTableStartIndex.\n     entry_start =\n@@ -1108,10 +1107,10 @@ void CollectionsBuiltinsAssembler::FindOrderedHashTableEntry(\n \n     BIND(&continue_next_entry);\n     // Load the index of the next entry in the bucket chain.\n-    var_entry.Bind(SmiUntag(LoadFixedArrayElement(\n+    var_entry.Bind(SmiUntag(CAST(LoadFixedArrayElement(\n         table, entry_start,\n         (CollectionType::kHashTableStartIndex + CollectionType::kChainOffset) *\n-            kPointerSize)));\n+            kPointerSize))));\n \n     Goto(&loop);\n   }\n@@ -1362,8 +1361,8 @@ TF_BUILTIN(MapPrototypeSet, CollectionsBuiltinsAssembler) {\n   VARIABLE(table_var, MachineRepresentation::kTaggedPointer, table);\n   {\n     // Check we have enough space for the entry.\n-    number_of_buckets.Bind(SmiUntag(\n-        LoadFixedArrayElement(table, OrderedHashMap::kNumberOfBucketsIndex)));\n+    number_of_buckets.Bind(SmiUntag(CAST(\n+        LoadFixedArrayElement(table, OrderedHashMap::kNumberOfBucketsIndex))));\n \n     STATIC_ASSERT(OrderedHashMap::kLoadFactor == 2);\n     Node* const capacity = WordShl(number_of_buckets.value(), 1);\n@@ -1378,8 +1377,8 @@ TF_BUILTIN(MapPrototypeSet, CollectionsBuiltinsAssembler) {\n     // fields.\n     CallRuntime(Runtime::kMapGrow, context, receiver);\n     table_var.Bind(LoadObjectField(receiver, JSMap::kTableOffset));\n-    number_of_buckets.Bind(SmiUntag(LoadFixedArrayElement(\n-        table_var.value(), OrderedHashMap::kNumberOfBucketsIndex)));\n+    number_of_buckets.Bind(SmiUntag(CAST(LoadFixedArrayElement(\n+        table_var.value(), OrderedHashMap::kNumberOfBucketsIndex))));\n     Node* const new_number_of_elements = SmiUntag(CAST(LoadObjectField(\n         table_var.value(), OrderedHashMap::kNumberOfElementsOffset)));\n     Node* const new_number_of_deleted = SmiUntag(CAST(LoadObjectField(\n@@ -1518,7 +1517,7 @@ TF_BUILTIN(SetPrototypeAdd, CollectionsBuiltinsAssembler) {\n            &add_entry);\n \n     // Otherwise, go to runtime to compute the hash code.\n-    entry_start_position_or_hash.Bind(SmiUntag((CallGetOrCreateHashRaw(key))));\n+    entry_start_position_or_hash.Bind(SmiUntag(CallGetOrCreateHashRaw(key)));\n     Goto(&add_entry);\n   }\n \n@@ -1528,8 +1527,8 @@ TF_BUILTIN(SetPrototypeAdd, CollectionsBuiltinsAssembler) {\n   VARIABLE(table_var, MachineRepresentation::kTaggedPointer, table);\n   {\n     // Check we have enough space for the entry.\n-    number_of_buckets.Bind(SmiUntag(\n-        LoadFixedArrayElement(table, OrderedHashSet::kNumberOfBucketsIndex)));\n+    number_of_buckets.Bind(SmiUntag(CAST(\n+        LoadFixedArrayElement(table, OrderedHashSet::kNumberOfBucketsIndex))));\n \n     STATIC_ASSERT(OrderedHashSet::kLoadFactor == 2);\n     Node* const capacity = WordShl(number_of_buckets.value(), 1);\n@@ -1544,8 +1543,8 @@ TF_BUILTIN(SetPrototypeAdd, CollectionsBuiltinsAssembler) {\n     // fields.\n     CallRuntime(Runtime::kSetGrow, context, receiver);\n     table_var.Bind(LoadObjectField(receiver, JSMap::kTableOffset));\n-    number_of_buckets.Bind(SmiUntag(LoadFixedArrayElement(\n-        table_var.value(), OrderedHashSet::kNumberOfBucketsIndex)));\n+    number_of_buckets.Bind(SmiUntag(CAST(LoadFixedArrayElement(\n+        table_var.value(), OrderedHashSet::kNumberOfBucketsIndex))));\n     Node* const new_number_of_elements = SmiUntag(CAST(LoadObjectField(\n         table_var.value(), OrderedHashSet::kNumberOfElementsOffset)));\n     Node* const new_number_of_deleted = SmiUntag(CAST(LoadObjectField(\n@@ -2222,7 +2221,7 @@ TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::FindKeyIndex(\n   TNode<IntPtrT> key_index;\n   {\n     key_index = KeyIndexFromEntry(var_entry.value());\n-    TNode<Object> entry_key = CAST(LoadFixedArrayElement(table, key_index));\n+    TNode<Object> entry_key = LoadFixedArrayElement(table, key_index);\n \n     key_compare(entry_key, &if_found);\n \n@@ -2271,15 +2270,15 @@ TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::KeyIndexFromEntry(\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadNumberOfElements(\n     TNode<Object> table, int offset) {\n-  TNode<IntPtrT> number_of_elements = SmiUntag(\n-      LoadFixedArrayElement(table, ObjectHashTable::kNumberOfElementsIndex));\n+  TNode<IntPtrT> number_of_elements = SmiUntag(CAST(\n+      LoadFixedArrayElement(table, ObjectHashTable::kNumberOfElementsIndex)));\n   return IntPtrAdd(number_of_elements, IntPtrConstant(offset));\n }\n \n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadNumberOfDeleted(\n     TNode<Object> table, int offset) {\n-  TNode<IntPtrT> number_of_deleted = SmiUntag(LoadFixedArrayElement(\n-      table, ObjectHashTable::kNumberOfDeletedElementsIndex));\n+  TNode<IntPtrT> number_of_deleted = SmiUntag(CAST(LoadFixedArrayElement(\n+      table, ObjectHashTable::kNumberOfDeletedElementsIndex)));\n   return IntPtrAdd(number_of_deleted, IntPtrConstant(offset));\n }\n \n@@ -2291,7 +2290,7 @@ TNode<Object> WeakCollectionsBuiltinsAssembler::LoadTable(\n TNode<IntPtrT> WeakCollectionsBuiltinsAssembler::LoadTableCapacity(\n     TNode<Object> table) {\n   return SmiUntag(\n-      LoadFixedArrayElement(table, ObjectHashTable::kCapacityIndex));\n+      CAST(LoadFixedArrayElement(table, ObjectHashTable::kCapacityIndex)));\n }\n \n TNode<Word32T> WeakCollectionsBuiltinsAssembler::InsufficientCapacityToAdd("
        },
        {
            "sha": "138db2a422b4b6901838bb1b750e23a8c31b9ae1",
            "filename": "deps/v8/src/builtins/builtins-console.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-console.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -112,13 +112,11 @@ void InstallContextFunction(Handle<JSObject> target, const char* name,\n                             Handle<Object> context_name) {\n   Factory* const factory = target->GetIsolate()->factory();\n \n-  Handle<Code> code(target->GetIsolate()->builtins()->builtin(builtin_id));\n-\n   Handle<String> name_string =\n       Name::ToFunctionName(factory->InternalizeUtf8String(name))\n           .ToHandleChecked();\n   NewFunctionArgs args = NewFunctionArgs::ForBuiltinWithoutPrototype(\n-      name_string, code, builtin_id, i::LanguageMode::kSloppy);\n+      name_string, builtin_id, i::LanguageMode::kSloppy);\n   Handle<JSFunction> fun = factory->NewFunction(args);\n \n   fun->shared()->set_native(true);"
        },
        {
            "sha": "e16945ba26d35471826c73554573669a5def2d0f",
            "filename": "deps/v8/src/builtins/builtins-constructor-gen.cc",
            "status": "modified",
            "additions": 121,
            "deletions": 125,
            "changes": 246,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -99,13 +99,12 @@ TF_BUILTIN(FastNewClosure, ConstructorBuiltinsAssembler) {\n \n   // The calculation of |function_map_index| must be in sync with\n   // SharedFunctionInfo::function_map_index().\n-  Node* const compiler_hints = LoadObjectField(\n-      shared_function_info, SharedFunctionInfo::kCompilerHintsOffset,\n-      MachineType::Uint32());\n-  Node* const function_map_index =\n-      IntPtrAdd(DecodeWordFromWord32<SharedFunctionInfo::FunctionMapIndexBits>(\n-                    compiler_hints),\n-                IntPtrConstant(Context::FIRST_FUNCTION_MAP_INDEX));\n+  Node* const flags =\n+      LoadObjectField(shared_function_info, SharedFunctionInfo::kFlagsOffset,\n+                      MachineType::Uint32());\n+  Node* const function_map_index = IntPtrAdd(\n+      DecodeWordFromWord32<SharedFunctionInfo::FunctionMapIndexBits>(flags),\n+      IntPtrConstant(Context::FIRST_FUNCTION_MAP_INDEX));\n   CSA_ASSERT(this, UintPtrLessThanOrEqual(\n                        function_map_index,\n                        IntPtrConstant(Context::LAST_FUNCTION_MAP_INDEX)));\n@@ -636,166 +635,163 @@ Node* ConstructorBuiltinsAssembler::EmitCreateEmptyObjectLiteral(\n   return result;\n }\n \n+// ES #sec-object-constructor\n TF_BUILTIN(ObjectConstructor, ConstructorBuiltinsAssembler) {\n   int const kValueArg = 0;\n   Node* argc =\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n-  Node* value = args.GetOptionalArgumentValue(kValueArg);\n   Node* context = Parameter(BuiltinDescriptor::kContext);\n+  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n \n-  CSA_ASSERT(this, IsUndefined(Parameter(BuiltinDescriptor::kNewTarget)));\n-\n-  Label return_to_object(this);\n-\n-  GotoIf(Word32And(IsNotUndefined(value), IsNotNull(value)), &return_to_object);\n-\n-  args.PopAndReturn(EmitCreateEmptyObjectLiteral(context));\n-\n-  BIND(&return_to_object);\n-  args.PopAndReturn(ToObject(context, value));\n-}\n-\n-TF_BUILTIN(ObjectConstructor_ConstructStub, ConstructorBuiltinsAssembler) {\n-  int const kValueArg = 0;\n-  Node* argc =\n-      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n-  CodeStubArguments args(this, argc);\n-  Node* value = args.GetOptionalArgumentValue(kValueArg);\n-\n+  VARIABLE(var_result, MachineRepresentation::kTagged);\n+  Label if_subclass(this, Label::kDeferred), if_notsubclass(this),\n+      return_result(this);\n+  GotoIf(IsUndefined(new_target), &if_notsubclass);\n   Node* target = LoadFromFrame(StandardFrameConstants::kFunctionOffset,\n                                MachineType::TaggedPointer());\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n-  Node* context = Parameter(BuiltinDescriptor::kContext);\n+  Branch(WordEqual(new_target, target), &if_notsubclass, &if_subclass);\n \n-  CSA_ASSERT(this, IsNotUndefined(new_target));\n+  BIND(&if_subclass);\n+  {\n+    Node* result =\n+        CallBuiltin(Builtins::kFastNewObject, context, target, new_target);\n+    var_result.Bind(result);\n+    Goto(&return_result);\n+  }\n \n-  Label return_to_object(this);\n+  BIND(&if_notsubclass);\n+  {\n+    Label if_newobject(this, Label::kDeferred), if_toobject(this);\n \n-  GotoIf(Word32And(WordEqual(target, new_target),\n-                   Word32And(IsNotUndefined(value), IsNotNull(value))),\n-         &return_to_object);\n-  args.PopAndReturn(EmitFastNewObject(context, target, new_target));\n+    Node* value_index = IntPtrConstant(kValueArg);\n+    GotoIf(UintPtrGreaterThanOrEqual(value_index, argc), &if_newobject);\n+    Node* value = args.AtIndex(value_index);\n+    GotoIf(IsNull(value), &if_newobject);\n+    Branch(IsUndefined(value), &if_newobject, &if_toobject);\n \n-  BIND(&return_to_object);\n-  args.PopAndReturn(ToObject(context, value));\n+    BIND(&if_newobject);\n+    {\n+      Node* result = EmitCreateEmptyObjectLiteral(context);\n+      var_result.Bind(result);\n+      Goto(&return_result);\n+    }\n+\n+    BIND(&if_toobject);\n+    {\n+      Node* result = CallBuiltin(Builtins::kToObject, context, value);\n+      var_result.Bind(result);\n+      Goto(&return_result);\n+    }\n+  }\n+\n+  BIND(&return_result);\n+  args.PopAndReturn(var_result.value());\n }\n \n+// ES #sec-number-constructor\n TF_BUILTIN(NumberConstructor, ConstructorBuiltinsAssembler) {\n+  Node* context = Parameter(BuiltinDescriptor::kContext);\n   Node* argc =\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n \n-  Label return_zero(this);\n+  // 1. If no arguments were passed to this function invocation, let n be +0.\n+  VARIABLE(var_n, MachineRepresentation::kTagged, SmiConstant(0));\n+  Label if_nloaded(this, &var_n);\n+  GotoIf(WordEqual(argc, IntPtrConstant(0)), &if_nloaded);\n \n-  GotoIf(IntPtrEqual(IntPtrConstant(0), argc), &return_zero);\n+  // 2. Else,\n+  //    a. Let prim be ? ToNumeric(value).\n+  //    b. If Type(prim) is BigInt, let n be the Number value for prim.\n+  //    c. Otherwise, let n be prim.\n+  Node* value = args.AtIndex(0);\n+  var_n.Bind(ToNumber(context, value, BigIntHandling::kConvertToNumber));\n+  Goto(&if_nloaded);\n \n-  Node* context = Parameter(BuiltinDescriptor::kContext);\n-  args.PopAndReturn(\n-      ToNumber(context, args.AtIndex(0), BigIntHandling::kConvertToNumber));\n+  BIND(&if_nloaded);\n+  {\n+    // 3. If NewTarget is undefined, return n.\n+    Node* n_value = var_n.value();\n+    Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n+    Label return_n(this), constructnumber(this, Label::kDeferred);\n+    Branch(IsUndefined(new_target), &return_n, &constructnumber);\n \n-  BIND(&return_zero);\n-  args.PopAndReturn(SmiConstant(0));\n+    BIND(&return_n);\n+    { args.PopAndReturn(n_value); }\n+\n+    BIND(&constructnumber);\n+    {\n+      // 4. Let O be ? OrdinaryCreateFromConstructor(NewTarget,\n+      //    \"%NumberPrototype%\", « [[NumberData]] »).\n+      // 5. Set O.[[NumberData]] to n.\n+      // 6. Return O.\n+      Node* target = LoadFromFrame(StandardFrameConstants::kFunctionOffset,\n+                                   MachineType::TaggedPointer());\n+      Node* result =\n+          CallBuiltin(Builtins::kFastNewObject, context, target, new_target);\n+      StoreObjectField(result, JSValue::kValueOffset, n_value);\n+      args.PopAndReturn(result);\n+    }\n+  }\n }\n \n-TF_BUILTIN(NumberConstructor_ConstructStub, ConstructorBuiltinsAssembler) {\n-  Node* target = LoadFromFrame(StandardFrameConstants::kFunctionOffset,\n-                               MachineType::TaggedPointer());\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n+// https://tc39.github.io/ecma262/#sec-string-constructor\n+TF_BUILTIN(StringConstructor, ConstructorBuiltinsAssembler) {\n   Node* context = Parameter(BuiltinDescriptor::kContext);\n-\n   Node* argc =\n       ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n   CodeStubArguments args(this, argc);\n \n-  Label wrap(this);\n-\n-  VARIABLE(var_result, MachineRepresentation::kTagged, SmiConstant(0));\n-\n-  GotoIf(IntPtrEqual(IntPtrConstant(0), argc), &wrap);\n-  var_result.Bind(\n-      ToNumber(context, args.AtIndex(0), BigIntHandling::kConvertToNumber));\n-  Goto(&wrap);\n-\n-  BIND(&wrap);\n-  Node* result = EmitFastNewObject(context, target, new_target);\n-  StoreObjectField(result, JSValue::kValueOffset, var_result.value());\n-  args.PopAndReturn(result);\n-}\n-\n-Node* ConstructorBuiltinsAssembler::EmitConstructString(Node* argc,\n-                                                        CodeStubArguments& args,\n-                                                        Node* context,\n-                                                        bool convert_symbol) {\n-  VARIABLE(var_result, MachineRepresentation::kTagged);\n-\n-  Label return_empty_string(this), to_string(this),\n-      check_symbol(this, Label::kDeferred), done(this);\n-\n-  GotoIf(IntPtrEqual(IntPtrConstant(0), argc), &return_empty_string);\n-\n-  Node* argument = args.AtIndex(0);\n+  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n+  Node* target = LoadFromFrame(StandardFrameConstants::kFunctionOffset,\n+                               MachineType::TaggedPointer());\n \n-  GotoIf(TaggedIsSmi(argument), &to_string);\n+  // 1. If no arguments were passed to this function invocation, let s be \"\".\n+  VARIABLE(var_s, MachineRepresentation::kTagged, EmptyStringConstant());\n+  Label if_sloaded(this, &var_s);\n+  GotoIf(WordEqual(argc, IntPtrConstant(0)), &if_sloaded);\n \n-  Node* instance_type = LoadInstanceType(argument);\n+  // 2. Else,\n+  //    a. If NewTarget is undefined [...]\n+  Node* value = args.AtIndex(0);\n+  Label if_tostring(this, &var_s);\n+  GotoIfNot(IsUndefined(new_target), &if_tostring);\n \n-  Label* non_string = convert_symbol ? &check_symbol : &to_string;\n-  GotoIfNot(IsStringInstanceType(instance_type), non_string);\n+  // 2a. [...] and Type(value) is Symbol, return SymbolDescriptiveString(value).\n+  GotoIf(TaggedIsSmi(value), &if_tostring);\n+  GotoIfNot(IsSymbol(value), &if_tostring);\n   {\n-    var_result.Bind(argument);\n-    Goto(&done);\n+    Node* result =\n+        CallRuntime(Runtime::kSymbolDescriptiveString, context, value);\n+    args.PopAndReturn(result);\n   }\n \n-  if (convert_symbol) {\n-    BIND(&check_symbol);\n-    GotoIfNot(IsSymbolInstanceType(instance_type), &to_string);\n-    {\n-      var_result.Bind(\n-          CallRuntime(Runtime::kSymbolDescriptiveString, context, argument));\n-      Goto(&done);\n-    }\n-  }\n-\n-  BIND(&to_string);\n+  // 2b. Let s be ? ToString(value).\n+  BIND(&if_tostring);\n   {\n-    var_result.Bind(ToString(context, argument));\n-    Goto(&done);\n+    var_s.Bind(CallBuiltin(Builtins::kToString, context, value));\n+    Goto(&if_sloaded);\n   }\n \n-  BIND(&return_empty_string);\n+  // 3. If NewTarget is undefined, return s.\n+  BIND(&if_sloaded);\n   {\n-    var_result.Bind(EmptyStringConstant());\n-    Goto(&done);\n-  }\n-\n-  BIND(&done);\n-  return var_result.value();\n-}\n-\n-TF_BUILTIN(StringConstructor, ConstructorBuiltinsAssembler) {\n-  Node* context = Parameter(BuiltinDescriptor::kContext);\n-  Node* argc =\n-      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n-  CodeStubArguments args(this, argc);\n-\n-  args.PopAndReturn(EmitConstructString(argc, args, context, true));\n-}\n-\n-TF_BUILTIN(StringConstructor_ConstructStub, ConstructorBuiltinsAssembler) {\n-  Node* target = LoadFromFrame(StandardFrameConstants::kFunctionOffset,\n-                               MachineType::TaggedPointer());\n-  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n-  Node* context = Parameter(BuiltinDescriptor::kContext);\n+    Node* s_value = var_s.value();\n+    Label return_s(this), constructstring(this, Label::kDeferred);\n+    Branch(IsUndefined(new_target), &return_s, &constructstring);\n \n-  Node* argc =\n-      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n-  CodeStubArguments args(this, argc);\n+    BIND(&return_s);\n+    { args.PopAndReturn(s_value); }\n \n-  Node* string = EmitConstructString(argc, args, context, false);\n-  Node* result = EmitFastNewObject(context, target, new_target);\n-  StoreObjectField(result, JSValue::kValueOffset, string);\n-  args.PopAndReturn(result);\n+    BIND(&constructstring);\n+    {\n+      Node* result =\n+          CallBuiltin(Builtins::kFastNewObject, context, target, new_target);\n+      StoreObjectField(result, JSValue::kValueOffset, s_value);\n+      args.PopAndReturn(result);\n+    }\n+  }\n }\n \n }  // namespace internal"
        },
        {
            "sha": "820970961bb6ae0d61b528a125b48256bc01a4bc",
            "filename": "deps/v8/src/builtins/builtins-constructor-gen.h",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-constructor-gen.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -36,9 +36,6 @@ class ConstructorBuiltinsAssembler : public CodeStubAssembler {\n   Node* EmitFastNewObject(Node* context, Node* target, Node* new_target,\n                           Label* call_runtime);\n \n-  Node* EmitConstructString(Node* argc, CodeStubArguments& args, Node* context,\n-                            bool convert_symbol);\n-\n  private:\n   Node* NotHasBoilerplate(Node* literal_site);\n   Node* LoadAllocationSiteBoilerplate(Node* allocation_site);"
        },
        {
            "sha": "63a6dc0a9134d337026c2c9b79eff633aec18467",
            "filename": "deps/v8/src/builtins/builtins-conversion-gen.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-conversion-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -126,12 +126,12 @@ TF_BUILTIN(NonNumberToNumeric, CodeStubAssembler) {\n }\n \n TF_BUILTIN(ToNumeric, CodeStubAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  Node* input = Parameter(Descriptor::kArgument);\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> input = CAST(Parameter(Descriptor::kArgument));\n \n-  Return(Select(IsNumber(input), [=] { return input; },\n-                [=] { return NonNumberToNumeric(context, input); },\n-                MachineRepresentation::kTagged));\n+  Return(Select<Numeric>(\n+      IsNumber(input), [=] { return CAST(input); },\n+      [=] { return NonNumberToNumeric(context, CAST(input)); }));\n }\n \n // ES6 section 7.1.3 ToNumber ( argument )"
        },
        {
            "sha": "49dcbe1e83ace26ddf3de00730e98db583c4d763",
            "filename": "deps/v8/src/builtins/builtins-dataview.cc",
            "status": "modified",
            "additions": 95,
            "deletions": 81,
            "changes": 176,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-dataview.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -6,105 +6,102 @@\n #include \"src/builtins/builtins.h\"\n #include \"src/conversions.h\"\n #include \"src/counters.h\"\n-#include \"src/factory.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n #include \"src/objects-inl.h\"\n \n namespace v8 {\n namespace internal {\n \n // -----------------------------------------------------------------------------\n-// ES6 section 24.2 DataView Objects\n+// ES #sec-dataview-objects\n \n-// ES6 section 24.2.2 The DataView Constructor for the [[Call]] case.\n+// ES #sec-dataview-constructor\n BUILTIN(DataViewConstructor) {\n   HandleScope scope(isolate);\n-  THROW_NEW_ERROR_RETURN_FAILURE(\n-      isolate,\n-      NewTypeError(MessageTemplate::kConstructorNotFunction,\n-                   isolate->factory()->NewStringFromAsciiChecked(\"DataView\")));\n-}\n-\n-// ES6 section 24.2.2 The DataView Constructor for the [[Construct]] case.\n-BUILTIN(DataViewConstructor_ConstructStub) {\n-  HandleScope scope(isolate);\n-  Handle<JSFunction> target = args.target();\n-  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n-  Handle<Object> buffer = args.atOrUndefined(isolate, 1);\n-  Handle<Object> byte_offset = args.atOrUndefined(isolate, 2);\n-  Handle<Object> byte_length = args.atOrUndefined(isolate, 3);\n-\n-  // 2. If Type(buffer) is not Object, throw a TypeError exception.\n-  // 3. If buffer does not have an [[ArrayBufferData]] internal slot, throw a\n-  //    TypeError exception.\n-  if (!buffer->IsJSArrayBuffer()) {\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n     THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewTypeError(MessageTemplate::kDataViewNotArrayBuffer));\n-  }\n-  Handle<JSArrayBuffer> array_buffer = Handle<JSArrayBuffer>::cast(buffer);\n-\n-  // 4. Let offset be ToIndex(byteOffset).\n-  Handle<Object> offset;\n-  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-      isolate, offset,\n-      Object::ToIndex(isolate, byte_offset, MessageTemplate::kInvalidOffset));\n+        isolate, NewTypeError(MessageTemplate::kConstructorNotFunction,\n+                              isolate->factory()->NewStringFromAsciiChecked(\n+                                  \"DataView\")));\n+  } else {  // [[Construct]]\n+    Handle<JSFunction> target = args.target();\n+    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+    Handle<Object> buffer = args.atOrUndefined(isolate, 1);\n+    Handle<Object> byte_offset = args.atOrUndefined(isolate, 2);\n+    Handle<Object> byte_length = args.atOrUndefined(isolate, 3);\n+\n+    // 2. If Type(buffer) is not Object, throw a TypeError exception.\n+    // 3. If buffer does not have an [[ArrayBufferData]] internal slot, throw a\n+    //    TypeError exception.\n+    if (!buffer->IsJSArrayBuffer()) {\n+      THROW_NEW_ERROR_RETURN_FAILURE(\n+          isolate, NewTypeError(MessageTemplate::kDataViewNotArrayBuffer));\n+    }\n+    Handle<JSArrayBuffer> array_buffer = Handle<JSArrayBuffer>::cast(buffer);\n \n-  // 5. If IsDetachedBuffer(buffer) is true, throw a TypeError exception.\n-  // We currently violate the specification at this point.\n+    // 4. Let offset be ? ToIndex(byteOffset).\n+    Handle<Object> offset;\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+        isolate, offset,\n+        Object::ToIndex(isolate, byte_offset, MessageTemplate::kInvalidOffset));\n \n-  // 6. Let bufferByteLength be the value of buffer's [[ArrayBufferByteLength]]\n-  // internal slot.\n-  double const buffer_byte_length = array_buffer->byte_length()->Number();\n+    // 5. If IsDetachedBuffer(buffer) is true, throw a TypeError exception.\n+    //    We currently violate the specification at this point. TODO: Fix that.\n \n-  // 7. If offset > bufferByteLength, throw a RangeError exception\n-  if (offset->Number() > buffer_byte_length) {\n-    THROW_NEW_ERROR_RETURN_FAILURE(\n-        isolate, NewRangeError(MessageTemplate::kInvalidOffset, offset));\n-  }\n+    // 6. Let bufferByteLength be the value of buffer's\n+    // [[ArrayBufferByteLength]] internal slot.\n+    double const buffer_byte_length = array_buffer->byte_length()->Number();\n \n-  Handle<Object> view_byte_length;\n-  if (byte_length->IsUndefined(isolate)) {\n-    // 8. If byteLength is undefined, then\n-    //       a. Let viewByteLength be bufferByteLength - offset.\n-    view_byte_length =\n-        isolate->factory()->NewNumber(buffer_byte_length - offset->Number());\n-  } else {\n-    // 9. Else,\n-    //       a. Let viewByteLength be ? ToIndex(byteLength).\n-    //       b. If offset+viewByteLength > bufferByteLength, throw a RangeError\n-    //          exception\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n-        isolate, view_byte_length,\n-        Object::ToIndex(isolate, byte_length,\n-                        MessageTemplate::kInvalidDataViewLength));\n-    if (offset->Number() + view_byte_length->Number() > buffer_byte_length) {\n+    // 7. If offset > bufferByteLength, throw a RangeError exception.\n+    if (offset->Number() > buffer_byte_length) {\n       THROW_NEW_ERROR_RETURN_FAILURE(\n-          isolate, NewRangeError(MessageTemplate::kInvalidDataViewLength));\n+          isolate, NewRangeError(MessageTemplate::kInvalidOffset, offset));\n     }\n-  }\n \n-  // 10. Let O be ? OrdinaryCreateFromConstructor(NewTarget,\n-  //     \"%DataViewPrototype%\", «[[DataView]], [[ViewedArrayBuffer]],\n-  //     [[ByteLength]], [[ByteOffset]]»).\n-  // 11. Set O's [[DataView]] internal slot to true.\n-  Handle<JSObject> result;\n-  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n-                                     JSObject::New(target, new_target));\n-  for (int i = 0; i < ArrayBufferView::kEmbedderFieldCount; ++i) {\n-    Handle<JSDataView>::cast(result)->SetEmbedderField(i, Smi::kZero);\n-  }\n+    Handle<Object> view_byte_length;\n+    if (byte_length->IsUndefined(isolate)) {\n+      // 8. If byteLength is either not present or undefined, then\n+      //       a. Let viewByteLength be bufferByteLength - offset.\n+      view_byte_length =\n+          isolate->factory()->NewNumber(buffer_byte_length - offset->Number());\n+    } else {\n+      // 9. Else,\n+      //       a. Let viewByteLength be ? ToIndex(byteLength).\n+      //       b. If offset+viewByteLength > bufferByteLength, throw a\n+      //          RangeError exception.\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+          isolate, view_byte_length,\n+          Object::ToIndex(isolate, byte_length,\n+                          MessageTemplate::kInvalidDataViewLength));\n+      if (offset->Number() + view_byte_length->Number() > buffer_byte_length) {\n+        THROW_NEW_ERROR_RETURN_FAILURE(\n+            isolate, NewRangeError(MessageTemplate::kInvalidDataViewLength));\n+      }\n+    }\n \n-  // 12. Set O's [[ViewedArrayBuffer]] internal slot to buffer.\n-  Handle<JSDataView>::cast(result)->set_buffer(*array_buffer);\n+    // 10. Let O be ? OrdinaryCreateFromConstructor(NewTarget,\n+    //     \"%DataViewPrototype%\", «[[DataView]], [[ViewedArrayBuffer]],\n+    //     [[ByteLength]], [[ByteOffset]]»).\n+    Handle<JSObject> result;\n+    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, result,\n+                                       JSObject::New(target, new_target));\n+    for (int i = 0; i < ArrayBufferView::kEmbedderFieldCount; ++i) {\n+      Handle<JSDataView>::cast(result)->SetEmbedderField(i, Smi::kZero);\n+    }\n+\n+    // 11. Set O's [[ViewedArrayBuffer]] internal slot to buffer.\n+    Handle<JSDataView>::cast(result)->set_buffer(*array_buffer);\n \n-  // 13. Set O's [[ByteLength]] internal slot to viewByteLength.\n-  Handle<JSDataView>::cast(result)->set_byte_length(*view_byte_length);\n+    // 12. Set O's [[ByteLength]] internal slot to viewByteLength.\n+    Handle<JSDataView>::cast(result)->set_byte_length(*view_byte_length);\n \n-  // 14. Set O's [[ByteOffset]] internal slot to offset.\n-  Handle<JSDataView>::cast(result)->set_byte_offset(*offset);\n+    // 13. Set O's [[ByteOffset]] internal slot to offset.\n+    Handle<JSDataView>::cast(result)->set_byte_offset(*offset);\n \n-  // 15. Return O.\n-  return *result;\n+    // 14. Return O.\n+    return *result;\n+  }\n }\n \n // ES6 section 24.2.4.1 get DataView.prototype.buffer\n@@ -176,7 +173,7 @@ MaybeHandle<Object> AllocateResult(Isolate* isolate, uint64_t value) {\n template <typename T>\n MaybeHandle<Object> GetViewValue(Isolate* isolate, Handle<JSDataView> data_view,\n                                  Handle<Object> request_index,\n-                                 bool is_little_endian) {\n+                                 bool is_little_endian, const char* method) {\n   ASSIGN_RETURN_ON_EXCEPTION(\n       isolate, request_index,\n       Object::ToIndex(isolate, request_index,\n@@ -190,6 +187,13 @@ MaybeHandle<Object> GetViewValue(Isolate* isolate, Handle<JSDataView> data_view,\n   }\n   Handle<JSArrayBuffer> buffer(JSArrayBuffer::cast(data_view->buffer()),\n                                isolate);\n+  if (buffer->was_neutered()) {\n+    Handle<String> operation =\n+        isolate->factory()->NewStringFromAsciiChecked(method);\n+    THROW_NEW_ERROR(\n+        isolate, NewTypeError(MessageTemplate::kDetachedOperation, operation),\n+        Object);\n+  }\n   size_t const data_view_byte_offset = NumberToSize(data_view->byte_offset());\n   size_t const data_view_byte_length = NumberToSize(data_view->byte_length());\n   if (get_index + sizeof(T) > data_view_byte_length ||\n@@ -290,7 +294,8 @@ uint64_t DataViewConvertValue<uint64_t>(Handle<Object> value) {\n template <typename T>\n MaybeHandle<Object> SetViewValue(Isolate* isolate, Handle<JSDataView> data_view,\n                                  Handle<Object> request_index,\n-                                 bool is_little_endian, Handle<Object> value) {\n+                                 bool is_little_endian, Handle<Object> value,\n+                                 const char* method) {\n   ASSIGN_RETURN_ON_EXCEPTION(\n       isolate, request_index,\n       Object::ToIndex(isolate, request_index,\n@@ -306,6 +311,13 @@ MaybeHandle<Object> SetViewValue(Isolate* isolate, Handle<JSDataView> data_view,\n   }\n   Handle<JSArrayBuffer> buffer(JSArrayBuffer::cast(data_view->buffer()),\n                                isolate);\n+  if (buffer->was_neutered()) {\n+    Handle<String> operation =\n+        isolate->factory()->NewStringFromAsciiChecked(method);\n+    THROW_NEW_ERROR(\n+        isolate, NewTypeError(MessageTemplate::kDetachedOperation, operation),\n+        Object);\n+  }\n   size_t const data_view_byte_offset = NumberToSize(data_view->byte_offset());\n   size_t const data_view_byte_length = NumberToSize(data_view->byte_length());\n   if (get_index + sizeof(T) > data_view_byte_length ||\n@@ -343,7 +355,8 @@ MaybeHandle<Object> SetViewValue(Isolate* isolate, Handle<JSDataView> data_view,\n     ASSIGN_RETURN_FAILURE_ON_EXCEPTION(                                    \\\n         isolate, result,                                                   \\\n         GetViewValue<type>(isolate, data_view, byte_offset,                \\\n-                           is_little_endian->BooleanValue()));             \\\n+                           is_little_endian->BooleanValue(),               \\\n+                           \"DataView.prototype.get\" #Type));               \\\n     return *result;                                                        \\\n   }\n DATA_VIEW_PROTOTYPE_GET(Int8, int8_t)\n@@ -369,7 +382,8 @@ DATA_VIEW_PROTOTYPE_GET(BigUint64, uint64_t)\n     ASSIGN_RETURN_FAILURE_ON_EXCEPTION(                                    \\\n         isolate, result,                                                   \\\n         SetViewValue<type>(isolate, data_view, byte_offset,                \\\n-                           is_little_endian->BooleanValue(), value));      \\\n+                           is_little_endian->BooleanValue(), value,        \\\n+                           \"DataView.prototype.get\" #Type));               \\\n     return *result;                                                        \\\n   }\n DATA_VIEW_PROTOTYPE_SET(Int8, int8_t)"
        },
        {
            "sha": "c60275d94eafee0c34752d1083bd0f76edb95080",
            "filename": "deps/v8/src/builtins/builtins-date.cc",
            "status": "modified",
            "additions": 77,
            "deletions": 78,
            "changes": 155,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-date.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -193,95 +193,94 @@ Object* SetLocalDateValue(Handle<JSDate> date, double time_val) {\n \n }  // namespace\n \n-// ES6 section 20.3.2 The Date Constructor for the [[Call]] case.\n+// ES #sec-date-constructor\n BUILTIN(DateConstructor) {\n   HandleScope scope(isolate);\n-  double const time_val = JSDate::CurrentTimeValue(isolate);\n-  char buffer[128];\n-  ToDateString(time_val, ArrayVector(buffer), isolate->date_cache());\n-  RETURN_RESULT_OR_FAILURE(\n-      isolate, isolate->factory()->NewStringFromUtf8(CStrVector(buffer)));\n-}\n-\n-// ES6 section 20.3.2 The Date Constructor for the [[Construct]] case.\n-BUILTIN(DateConstructor_ConstructStub) {\n-  HandleScope scope(isolate);\n-  int const argc = args.length() - 1;\n-  Handle<JSFunction> target = args.target();\n-  Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n-  double time_val;\n-  if (argc == 0) {\n-    time_val = JSDate::CurrentTimeValue(isolate);\n-  } else if (argc == 1) {\n-    Handle<Object> value = args.at(1);\n-    if (value->IsJSDate()) {\n-      time_val = Handle<JSDate>::cast(value)->value()->Number();\n-    } else {\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, value,\n-                                         Object::ToPrimitive(value));\n-      if (value->IsString()) {\n-        time_val = ParseDateTimeString(Handle<String>::cast(value));\n+  if (args.new_target()->IsUndefined(isolate)) {\n+    double const time_val = JSDate::CurrentTimeValue(isolate);\n+    char buffer[128];\n+    ToDateString(time_val, ArrayVector(buffer), isolate->date_cache());\n+    RETURN_RESULT_OR_FAILURE(\n+        isolate, isolate->factory()->NewStringFromUtf8(CStrVector(buffer)));\n+  } else {\n+    int const argc = args.length() - 1;\n+    Handle<JSFunction> target = args.target();\n+    Handle<JSReceiver> new_target = Handle<JSReceiver>::cast(args.new_target());\n+    double time_val;\n+    if (argc == 0) {\n+      time_val = JSDate::CurrentTimeValue(isolate);\n+    } else if (argc == 1) {\n+      Handle<Object> value = args.at(1);\n+      if (value->IsJSDate()) {\n+        time_val = Handle<JSDate>::cast(value)->value()->Number();\n       } else {\n         ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, value,\n-                                           Object::ToNumber(value));\n-        time_val = value->Number();\n+                                           Object::ToPrimitive(value));\n+        if (value->IsString()) {\n+          time_val = ParseDateTimeString(Handle<String>::cast(value));\n+        } else {\n+          ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, value,\n+                                             Object::ToNumber(value));\n+          time_val = value->Number();\n+        }\n       }\n-    }\n-  } else {\n-    Handle<Object> year_object;\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, year_object,\n-                                       Object::ToNumber(args.at(1)));\n-    Handle<Object> month_object;\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, month_object,\n-                                       Object::ToNumber(args.at(2)));\n-    double year = year_object->Number();\n-    double month = month_object->Number();\n-    double date = 1.0, hours = 0.0, minutes = 0.0, seconds = 0.0, ms = 0.0;\n-    if (argc >= 3) {\n-      Handle<Object> date_object;\n-      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, date_object,\n-                                         Object::ToNumber(args.at(3)));\n-      date = date_object->Number();\n-      if (argc >= 4) {\n-        Handle<Object> hours_object;\n-        ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, hours_object,\n-                                           Object::ToNumber(args.at(4)));\n-        hours = hours_object->Number();\n-        if (argc >= 5) {\n-          Handle<Object> minutes_object;\n-          ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, minutes_object,\n-                                             Object::ToNumber(args.at(5)));\n-          minutes = minutes_object->Number();\n-          if (argc >= 6) {\n-            Handle<Object> seconds_object;\n-            ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, seconds_object,\n-                                               Object::ToNumber(args.at(6)));\n-            seconds = seconds_object->Number();\n-            if (argc >= 7) {\n-              Handle<Object> ms_object;\n-              ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, ms_object,\n-                                                 Object::ToNumber(args.at(7)));\n-              ms = ms_object->Number();\n+    } else {\n+      Handle<Object> year_object;\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, year_object,\n+                                         Object::ToNumber(args.at(1)));\n+      Handle<Object> month_object;\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, month_object,\n+                                         Object::ToNumber(args.at(2)));\n+      double year = year_object->Number();\n+      double month = month_object->Number();\n+      double date = 1.0, hours = 0.0, minutes = 0.0, seconds = 0.0, ms = 0.0;\n+      if (argc >= 3) {\n+        Handle<Object> date_object;\n+        ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, date_object,\n+                                           Object::ToNumber(args.at(3)));\n+        date = date_object->Number();\n+        if (argc >= 4) {\n+          Handle<Object> hours_object;\n+          ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, hours_object,\n+                                             Object::ToNumber(args.at(4)));\n+          hours = hours_object->Number();\n+          if (argc >= 5) {\n+            Handle<Object> minutes_object;\n+            ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, minutes_object,\n+                                               Object::ToNumber(args.at(5)));\n+            minutes = minutes_object->Number();\n+            if (argc >= 6) {\n+              Handle<Object> seconds_object;\n+              ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, seconds_object,\n+                                                 Object::ToNumber(args.at(6)));\n+              seconds = seconds_object->Number();\n+              if (argc >= 7) {\n+                Handle<Object> ms_object;\n+                ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+                    isolate, ms_object, Object::ToNumber(args.at(7)));\n+                ms = ms_object->Number();\n+              }\n             }\n           }\n         }\n       }\n+      if (!std::isnan(year)) {\n+        double const y = DoubleToInteger(year);\n+        if (0.0 <= y && y <= 99) year = 1900 + y;\n+      }\n+      double const day = MakeDay(year, month, date);\n+      double const time = MakeTime(hours, minutes, seconds, ms);\n+      time_val = MakeDate(day, time);\n+      if (time_val >= -DateCache::kMaxTimeBeforeUTCInMs &&\n+          time_val <= DateCache::kMaxTimeBeforeUTCInMs) {\n+        time_val = isolate->date_cache()->ToUTC(static_cast<int64_t>(time_val));\n+      } else {\n+        time_val = std::numeric_limits<double>::quiet_NaN();\n+      }\n     }\n-    if (!std::isnan(year)) {\n-      double const y = DoubleToInteger(year);\n-      if (0.0 <= y && y <= 99) year = 1900 + y;\n-    }\n-    double const day = MakeDay(year, month, date);\n-    double const time = MakeTime(hours, minutes, seconds, ms);\n-    time_val = MakeDate(day, time);\n-    if (time_val >= -DateCache::kMaxTimeBeforeUTCInMs &&\n-        time_val <= DateCache::kMaxTimeBeforeUTCInMs) {\n-      time_val = isolate->date_cache()->ToUTC(static_cast<int64_t>(time_val));\n-    } else {\n-      time_val = std::numeric_limits<double>::quiet_NaN();\n-    }\n+    RETURN_RESULT_OR_FAILURE(isolate,\n+                             JSDate::New(target, new_target, time_val));\n   }\n-  RETURN_RESULT_OR_FAILURE(isolate, JSDate::New(target, new_target, time_val));\n }\n \n // ES6 section 20.3.3.1 Date.now ( )"
        },
        {
            "sha": "0f60dfd97e88881279b1d60a9cb1cff6ccc86e4f",
            "filename": "deps/v8/src/builtins/builtins-definitions.h",
            "status": "modified",
            "additions": 48,
            "deletions": 28,
            "changes": 76,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-definitions.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -65,7 +65,6 @@ namespace internal {\n   TFC(ConstructWithArrayLike, ConstructWithArrayLike, 1)                       \\\n   ASM(ConstructForwardVarargs)                                                 \\\n   ASM(ConstructFunctionForwardVarargs)                                         \\\n-  ASM(JSConstructStubApi)                                                      \\\n   ASM(JSConstructStubGenericRestrictedReturn)                                  \\\n   ASM(JSConstructStubGenericUnrestrictedReturn)                                \\\n   ASM(JSBuiltinsConstructStub)                                                 \\\n@@ -110,11 +109,9 @@ namespace internal {\n   ASM(InterpreterEntryTrampoline)                                              \\\n   ASM(InterpreterPushArgsThenCall)                                             \\\n   ASM(InterpreterPushUndefinedAndArgsThenCall)                                 \\\n-  ASM(InterpreterPushArgsThenCallFunction)                                     \\\n-  ASM(InterpreterPushUndefinedAndArgsThenCallFunction)                         \\\n   ASM(InterpreterPushArgsThenCallWithFinalSpread)                              \\\n   ASM(InterpreterPushArgsThenConstruct)                                        \\\n-  ASM(InterpreterPushArgsThenConstructFunction)                                \\\n+  ASM(InterpreterPushArgsThenConstructArrayFunction)                           \\\n   ASM(InterpreterPushArgsThenConstructWithFinalSpread)                         \\\n   ASM(InterpreterEnterBytecodeAdvance)                                         \\\n   ASM(InterpreterEnterBytecodeDispatch)                                        \\\n@@ -123,7 +120,6 @@ namespace internal {\n   /* Code life-cycle */                                                        \\\n   ASM(CompileLazy)                                                             \\\n   ASM(CompileLazyDeoptimizedCode)                                              \\\n-  ASM(CheckOptimizationMarker)                                                 \\\n   ASM(DeserializeLazy)                                                         \\\n   ASM(InstantiateAsmJs)                                                        \\\n   ASM(NotifyDeoptimized)                                                       \\\n@@ -171,6 +167,7 @@ namespace internal {\n   TFC(NewArgumentsElements, NewArgumentsElements, 1)                           \\\n                                                                                \\\n   /* Debugger */                                                               \\\n+  TFJ(DebugBreakTrampoline, SharedFunctionInfo::kDontAdaptArgumentsSentinel)   \\\n   ASM(FrameDropperTrampoline)                                                  \\\n   ASM(HandleDebuggerStatement)                                                 \\\n                                                                                \\\n@@ -214,6 +211,7 @@ namespace internal {\n   TFH(LoadIC_Uninitialized, LoadWithVector)                                    \\\n   TFH(StoreGlobalIC_Slow, StoreWithVector)                                     \\\n   TFH(StoreIC_Uninitialized, StoreWithVector)                                  \\\n+  TFH(StoreInArrayLiteralIC_Slow, StoreWithVector)                             \\\n                                                                                \\\n   /* Microtask helpers */                                                      \\\n   TFS(EnqueueMicrotask, kMicrotask)                                            \\\n@@ -246,8 +244,19 @@ namespace internal {\n   /* ES6 #sec-array.of */                                                      \\\n   TFJ(ArrayOf, SharedFunctionInfo::kDontAdaptArgumentsSentinel)                \\\n   /* ES7 #sec-array.prototype.includes */                                      \\\n+  TFS(ArrayIncludesSmiOrObject, kElements, kSearchElement, kLength,            \\\n+      kFromIndex)                                                              \\\n+  TFS(ArrayIncludesPackedDoubles, kElements, kSearchElement, kLength,          \\\n+      kFromIndex)                                                              \\\n+  TFS(ArrayIncludesHoleyDoubles, kElements, kSearchElement, kLength,           \\\n+      kFromIndex)                                                              \\\n   TFJ(ArrayIncludes, SharedFunctionInfo::kDontAdaptArgumentsSentinel)          \\\n   /* ES6 #sec-array.prototype.indexof */                                       \\\n+  TFS(ArrayIndexOfSmiOrObject, kElements, kSearchElement, kLength, kFromIndex) \\\n+  TFS(ArrayIndexOfPackedDoubles, kElements, kSearchElement, kLength,           \\\n+      kFromIndex)                                                              \\\n+  TFS(ArrayIndexOfHoleyDoubles, kElements, kSearchElement, kLength,            \\\n+      kFromIndex)                                                              \\\n   TFJ(ArrayIndexOf, SharedFunctionInfo::kDontAdaptArgumentsSentinel)           \\\n   /* ES6 #sec-array.prototype.pop */                                           \\\n   CPP(ArrayPop)                                                                \\\n@@ -259,7 +268,6 @@ namespace internal {\n   CPP(ArrayShift)                                                              \\\n   TFJ(ArrayPrototypeShift, SharedFunctionInfo::kDontAdaptArgumentsSentinel)    \\\n   /* ES6 #sec-array.prototype.slice */                                         \\\n-  CPP(ArraySlice)                                                              \\\n   TFJ(ArrayPrototypeSlice, SharedFunctionInfo::kDontAdaptArgumentsSentinel)    \\\n   /* ES6 #sec-array.prototype.splice */                                        \\\n   CPP(ArraySplice)                                                             \\\n@@ -355,10 +363,18 @@ namespace internal {\n   TFJ(ArrayPrototypeValues, 0)                                                 \\\n   /* ES6 #sec-%arrayiteratorprototype%.next */                                 \\\n   TFJ(ArrayIteratorPrototypeNext, 0)                                           \\\n+  /* https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray */          \\\n+  TFS(FlattenIntoArray, kTarget, kSource, kSourceLength, kStart, kDepth)       \\\n+  TFS(FlatMapIntoArray, kTarget, kSource, kSourceLength, kStart, kDepth,       \\\n+      kMapperFunction, kThisArg)                                               \\\n+  /* https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatten */   \\\n+  TFJ(ArrayPrototypeFlatten, SharedFunctionInfo::kDontAdaptArgumentsSentinel)  \\\n+  /* https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap */   \\\n+  TFJ(ArrayPrototypeFlatMap, SharedFunctionInfo::kDontAdaptArgumentsSentinel)  \\\n                                                                                \\\n   /* ArrayBuffer */                                                            \\\n+  /* ES #sec-arraybuffer-constructor */                                        \\\n   CPP(ArrayBufferConstructor)                                                  \\\n-  CPP(ArrayBufferConstructor_ConstructStub)                                    \\\n   CPP(ArrayBufferConstructor_DoNotInitialize)                                  \\\n   CPP(ArrayBufferPrototypeGetByteLength)                                       \\\n   CPP(ArrayBufferIsView)                                                       \\\n@@ -374,16 +390,15 @@ namespace internal {\n                                                                                \\\n   /* BigInt */                                                                 \\\n   CPP(BigIntConstructor)                                                       \\\n-  CPP(BigIntConstructor_ConstructStub)                                         \\\n   CPP(BigIntAsUintN)                                                           \\\n   CPP(BigIntAsIntN)                                                            \\\n   CPP(BigIntPrototypeToLocaleString)                                           \\\n   CPP(BigIntPrototypeToString)                                                 \\\n   CPP(BigIntPrototypeValueOf)                                                  \\\n                                                                                \\\n   /* Boolean */                                                                \\\n+  /* ES #sec-boolean-constructor */                                            \\\n   CPP(BooleanConstructor)                                                      \\\n-  CPP(BooleanConstructor_ConstructStub)                                        \\\n   /* ES6 #sec-boolean.prototype.tostring */                                    \\\n   TFJ(BooleanPrototypeToString, 0)                                             \\\n   /* ES6 #sec-boolean.prototype.valueof */                                     \\\n@@ -435,8 +450,8 @@ namespace internal {\n   CPP(ConsoleContext)                                                          \\\n                                                                                \\\n   /* DataView */                                                               \\\n+  /* ES #sec-dataview-constructor */                                           \\\n   CPP(DataViewConstructor)                                                     \\\n-  CPP(DataViewConstructor_ConstructStub)                                       \\\n   CPP(DataViewPrototypeGetBuffer)                                              \\\n   CPP(DataViewPrototypeGetByteLength)                                          \\\n   CPP(DataViewPrototypeGetByteOffset)                                          \\\n@@ -462,8 +477,8 @@ namespace internal {\n   CPP(DataViewPrototypeSetBigUint64)                                           \\\n                                                                                \\\n   /* Date */                                                                   \\\n+  /* ES #sec-date-constructor */                                               \\\n   CPP(DateConstructor)                                                         \\\n-  CPP(DateConstructor_ConstructStub)                                           \\\n   /* ES6 #sec-date.prototype.getdate */                                        \\\n   TFJ(DatePrototypeGetDate, 0)                                                 \\\n   /* ES6 #sec-date.prototype.getday */                                         \\\n@@ -599,6 +614,7 @@ namespace internal {\n   TFH(StoreICTrampoline, Store)                                                \\\n   TFH(KeyedStoreIC, StoreWithVector)                                           \\\n   TFH(KeyedStoreICTrampoline, Store)                                           \\\n+  TFH(StoreInArrayLiteralIC, StoreWithVector)                                  \\\n   TFH(LoadGlobalIC, LoadGlobalWithVector)                                      \\\n   TFH(LoadGlobalICInsideTypeof, LoadGlobalWithVector)                          \\\n   TFH(LoadGlobalICTrampoline, LoadGlobal)                                      \\\n@@ -699,11 +715,8 @@ namespace internal {\n                                                                                \\\n   /* Number */                                                                 \\\n   TFC(AllocateHeapNumber, AllocateHeapNumber, 1)                               \\\n-  /* ES6 section 20.1.1.1 Number ( [ value ] ) for the [[Call]] case */        \\\n+  /* ES #sec-number-constructor */                                             \\\n   TFJ(NumberConstructor, SharedFunctionInfo::kDontAdaptArgumentsSentinel)      \\\n-  /* ES6 section 20.1.1.1 Number ( [ value ] ) for the [[Construct]] case */   \\\n-  TFJ(NumberConstructor_ConstructStub,                                         \\\n-      SharedFunctionInfo::kDontAdaptArgumentsSentinel)                         \\\n   /* ES6 #sec-number.isfinite */                                               \\\n   TFJ(NumberIsFinite, 1, kNumber)                                              \\\n   /* ES6 #sec-number.isinteger */                                              \\\n@@ -748,9 +761,8 @@ namespace internal {\n   TFS(Negate, kValue)                                                          \\\n                                                                                \\\n   /* Object */                                                                 \\\n+  /* ES #sec-object-constructor */                                             \\\n   TFJ(ObjectConstructor, SharedFunctionInfo::kDontAdaptArgumentsSentinel)      \\\n-  TFJ(ObjectConstructor_ConstructStub,                                         \\\n-      SharedFunctionInfo::kDontAdaptArgumentsSentinel)                         \\\n   CPP(ObjectAssign)                                                            \\\n   /* ES #sec-object.create */                                                  \\\n   TFJ(ObjectCreate, SharedFunctionInfo::kDontAdaptArgumentsSentinel)           \\\n@@ -814,7 +826,8 @@ namespace internal {\n   TFJ(PromiseGetCapabilitiesExecutor, 2, kResolve, kReject)                    \\\n   /* ES6 #sec-newpromisecapability */                                          \\\n   TFS(NewPromiseCapability, kConstructor, kDebugEvent)                         \\\n-  TFJ(PromiseConstructorLazyDeoptContinuation, 2, kPromise, kResult)           \\\n+  TFJ(PromiseConstructorLazyDeoptContinuation, 4, kPromise, kReject,           \\\n+      kException, kResult)                                                     \\\n   /* ES6 #sec-promise-executor */                                              \\\n   TFJ(PromiseConstructor, 1, kExecutor)                                        \\\n   CPP(IsPromise)                                                               \\\n@@ -853,9 +866,7 @@ namespace internal {\n   TFJ(PromiseInternalResolve, 2, kPromise, kResolution)                        \\\n                                                                                \\\n   /* Proxy */                                                                  \\\n-  TFJ(ProxyConstructor, 0)                                                     \\\n-  TFJ(ProxyConstructor_ConstructStub,                                          \\\n-      SharedFunctionInfo::kDontAdaptArgumentsSentinel)                         \\\n+  TFJ(ProxyConstructor, 2, kTarget, kHandler)                                  \\\n   TFJ(ProxyRevocable, 2, kTarget, kHandler)                                    \\\n   TFJ(ProxyRevoke, 0)                                                          \\\n   TFS(ProxyGetProperty, kProxy, kName, kReceiverValue)                         \\\n@@ -909,6 +920,8 @@ namespace internal {\n   TFJ(RegExpPrototypeIgnoreCaseGetter, 0)                                      \\\n   /* ES #sec-regexp.prototype-@@match */                                       \\\n   TFJ(RegExpPrototypeMatch, 1, kString)                                        \\\n+  /* https://tc39.github.io/proposal-string-matchall/ */                       \\\n+  TFJ(RegExpPrototypeMatchAll, 1, kString)                                     \\\n   /* ES #sec-get-regexp.prototype.multiline */                                 \\\n   TFJ(RegExpPrototypeMultilineGetter, 0)                                       \\\n   /* ES #sec-regexp.prototype-@@search */                                      \\\n@@ -936,6 +949,10 @@ namespace internal {\n   TFS(RegExpSearchFast, kReceiver, kPattern)                                   \\\n   TFS(RegExpSplit, kRegExp, kString, kLimit)                                   \\\n                                                                                \\\n+  /* RegExp String Iterator */                                                 \\\n+  /* https://tc39.github.io/proposal-string-matchall/ */                       \\\n+  TFJ(RegExpStringIteratorPrototypeNext, 0)                                    \\\n+                                                                               \\\n   /* Set */                                                                    \\\n   TFJ(SetConstructor, SharedFunctionInfo::kDontAdaptArgumentsSentinel)         \\\n   TFJ(SetPrototypeHas, 1, kKey)                                                \\\n@@ -970,9 +987,9 @@ namespace internal {\n   CPP(AtomicsWake)                                                             \\\n                                                                                \\\n   /* String */                                                                 \\\n+  /* ES #sec-string-constructor */                                             \\\n   TFJ(StringConstructor, SharedFunctionInfo::kDontAdaptArgumentsSentinel)      \\\n-  TFJ(StringConstructor_ConstructStub,                                         \\\n-      SharedFunctionInfo::kDontAdaptArgumentsSentinel)                         \\\n+  /* ES #sec-string.fromcodepoint */                                           \\\n   CPP(StringFromCodePoint)                                                     \\\n   /* ES6 #sec-string.fromcharcode */                                           \\\n   TFJ(StringFromCharCode, SharedFunctionInfo::kDontAdaptArgumentsSentinel)     \\\n@@ -1013,6 +1030,8 @@ namespace internal {\n   TFJ(StringPrototypeLink, 1, kValue)                                          \\\n   /* ES6 #sec-string.prototype.match */                                        \\\n   TFJ(StringPrototypeMatch, 1, kRegexp)                                        \\\n+  /* ES #sec-string.prototype.matchAll */                                      \\\n+  TFJ(StringPrototypeMatchAll, 1, kRegexp)                                     \\\n   /* ES6 #sec-string.prototype.localecompare */                                \\\n   CPP(StringPrototypeLocaleCompare)                                            \\\n   /* ES6 #sec-string.prototype.padEnd */                                       \\\n@@ -1063,8 +1082,8 @@ namespace internal {\n   TFJ(StringIteratorPrototypeNext, 0)                                          \\\n                                                                                \\\n   /* Symbol */                                                                 \\\n+  /* ES #sec-symbol-constructor */                                             \\\n   CPP(SymbolConstructor)                                                       \\\n-  CPP(SymbolConstructor_ConstructStub)                                         \\\n   /* ES6 #sec-symbol.for */                                                    \\\n   CPP(SymbolFor)                                                               \\\n   /* ES6 #sec-symbol.keyfor */                                                 \\\n@@ -1081,9 +1100,11 @@ namespace internal {\n   TFS(TypedArrayInitialize, kHolder, kLength, kElementSize, kInitialize)       \\\n   TFS(TypedArrayInitializeWithBuffer, kHolder, kLength, kBuffer, kElementSize, \\\n       kByteOffset)                                                             \\\n+  /* ES #sec-typedarray-constructors */                                        \\\n+  TFS(CreateTypedArray, kTarget, kNewTarget, kArg1, kArg2, kArg3)              \\\n+  TFJ(TypedArrayBaseConstructor, 0)                                            \\\n+  TFJ(TypedArrayConstructorLazyDeoptContinuation, 1, kResult)                  \\\n   TFJ(TypedArrayConstructor, SharedFunctionInfo::kDontAdaptArgumentsSentinel)  \\\n-  TFJ(TypedArrayConstructor_ConstructStub,                                     \\\n-      SharedFunctionInfo::kDontAdaptArgumentsSentinel)                         \\\n   CPP(TypedArrayPrototypeBuffer)                                               \\\n   /* ES6 #sec-get-%typedarray%.prototype.bytelength */                         \\\n   TFJ(TypedArrayPrototypeByteLength, 0)                                        \\\n@@ -1266,6 +1287,7 @@ namespace internal {\n   V(AsyncGeneratorResolve)                           \\\n   V(PromiseAll)                                      \\\n   V(PromiseConstructor)                              \\\n+  V(PromiseConstructorLazyDeoptContinuation)         \\\n   V(PromiseFulfillReactionJob)                       \\\n   V(PromiseRace)                                     \\\n   V(ResolvePromise)\n@@ -1298,8 +1320,6 @@ namespace internal {\n   BUILTIN_LIST(IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN, V, \\\n                IGNORE_BUILTIN, IGNORE_BUILTIN, IGNORE_BUILTIN)\n \n-#define BUILTINS_WITH_UNTAGGED_PARAMS(V) V(WasmCompileLazy)\n-\n }  // namespace internal\n }  // namespace v8\n "
        },
        {
            "sha": "05b0fb9fcd826eaeab9eb26d8acf6a9527d22128",
            "filename": "deps/v8/src/builtins/builtins-function-gen.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 11,
            "changes": 28,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-function-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -6,6 +6,7 @@\n #include \"src/builtins/builtins.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/frame-constants.h\"\n+#include \"src/objects/descriptor-array.h\"\n \n namespace v8 {\n namespace internal {\n@@ -43,37 +44,42 @@ TF_BUILTIN(FastFunctionPrototypeBind, CodeStubAssembler) {\n   // AccessorInfo objects. In that case, their value can be recomputed even if\n   // the actual value on the object changes.\n   Comment(\"Check descriptor array length\");\n-  Node* descriptors = LoadMapDescriptors(receiver_map);\n-  Node* descriptors_length = LoadFixedArrayBaseLength(descriptors);\n-  GotoIf(SmiLessThanOrEqual(descriptors_length, SmiConstant(1)), &slow);\n+  TNode<DescriptorArray> descriptors = LoadMapDescriptors(receiver_map);\n+  // Minimum descriptor array length required for fast path.\n+  const int min_descriptors_length = DescriptorArray::LengthFor(Max(\n+      JSFunction::kLengthDescriptorIndex, JSFunction::kNameDescriptorIndex));\n+  TNode<Smi> descriptors_length = LoadFixedArrayBaseLength(descriptors);\n+  GotoIf(SmiLessThanOrEqual(descriptors_length,\n+                            SmiConstant(min_descriptors_length)),\n+         &slow);\n \n   // Check whether the length and name properties are still present as\n   // AccessorInfo objects. In that case, their value can be recomputed even if\n   // the actual value on the object changes.\n   Comment(\"Check name and length properties\");\n   {\n     const int length_index = JSFunction::kLengthDescriptorIndex;\n-    Node* maybe_length = LoadFixedArrayElement(\n-        descriptors, DescriptorArray::ToKeyIndex(length_index));\n+    TNode<Name> maybe_length = CAST(LoadFixedArrayElement(\n+        descriptors, DescriptorArray::ToKeyIndex(length_index)));\n     GotoIf(WordNotEqual(maybe_length, LoadRoot(Heap::klength_stringRootIndex)),\n            &slow);\n \n-    Node* maybe_length_accessor = LoadFixedArrayElement(\n+    TNode<Object> maybe_length_accessor = LoadFixedArrayElement(\n         descriptors, DescriptorArray::ToValueIndex(length_index));\n     GotoIf(TaggedIsSmi(maybe_length_accessor), &slow);\n-    Node* length_value_map = LoadMap(maybe_length_accessor);\n+    Node* length_value_map = LoadMap(CAST(maybe_length_accessor));\n     GotoIfNot(IsAccessorInfoMap(length_value_map), &slow);\n \n     const int name_index = JSFunction::kNameDescriptorIndex;\n-    Node* maybe_name = LoadFixedArrayElement(\n-        descriptors, DescriptorArray::ToKeyIndex(name_index));\n+    TNode<Name> maybe_name = CAST(LoadFixedArrayElement(\n+        descriptors, DescriptorArray::ToKeyIndex(name_index)));\n     GotoIf(WordNotEqual(maybe_name, LoadRoot(Heap::kname_stringRootIndex)),\n            &slow);\n \n-    Node* maybe_name_accessor = LoadFixedArrayElement(\n+    TNode<Object> maybe_name_accessor = LoadFixedArrayElement(\n         descriptors, DescriptorArray::ToValueIndex(name_index));\n     GotoIf(TaggedIsSmi(maybe_name_accessor), &slow);\n-    Node* name_value_map = LoadMap(maybe_name_accessor);\n+    TNode<Map> name_value_map = LoadMap(CAST(maybe_name_accessor));\n     GotoIfNot(IsAccessorInfoMap(name_value_map), &slow);\n   }\n "
        },
        {
            "sha": "29422ab72c277af1c0faeae459878e7f6ff39e59",
            "filename": "deps/v8/src/builtins/builtins-handler-gen.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-handler-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-handler-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-handler-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -55,6 +55,15 @@ TF_BUILTIN(KeyedStoreIC_Slow, CodeStubAssembler) {\n                   receiver, name);\n }\n \n+TF_BUILTIN(StoreInArrayLiteralIC_Slow, CodeStubAssembler) {\n+  Node* array = Parameter(Descriptor::kReceiver);\n+  Node* index = Parameter(Descriptor::kName);\n+  Node* value = Parameter(Descriptor::kValue);\n+  Node* context = Parameter(Descriptor::kContext);\n+  TailCallRuntime(Runtime::kStoreInArrayLiteralIC_Slow, context, value, array,\n+                  index);\n+}\n+\n TF_BUILTIN(LoadGlobalIC_Slow, CodeStubAssembler) {\n   Node* name = Parameter(Descriptor::kName);\n   Node* slot = Parameter(Descriptor::kSlot);"
        },
        {
            "sha": "2439cd9d7bd15da81941b5fe619af7c584324ffe",
            "filename": "deps/v8/src/builtins/builtins-ic-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-ic-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -35,6 +35,7 @@ IC_BUILTIN(StoreIC)\n IC_BUILTIN(StoreICTrampoline)\n IC_BUILTIN(KeyedStoreIC)\n IC_BUILTIN(KeyedStoreICTrampoline)\n+IC_BUILTIN(StoreInArrayLiteralIC)\n \n IC_BUILTIN_PARAM(LoadGlobalIC, LoadGlobalIC, NOT_INSIDE_TYPEOF)\n IC_BUILTIN_PARAM(LoadGlobalICInsideTypeof, LoadGlobalIC, INSIDE_TYPEOF)"
        },
        {
            "sha": "e1f4aea405254929c9ee4707bb58052d35892ec8",
            "filename": "deps/v8/src/builtins/builtins-internal-gen.cc",
            "status": "modified",
            "additions": 53,
            "deletions": 11,
            "changes": 64,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-internal-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -7,7 +7,9 @@\n #include \"src/builtins/builtins.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/heap/heap-inl.h\"\n+#include \"src/ic/accessor-assembler.h\"\n #include \"src/macro-assembler.h\"\n+#include \"src/objects/debug-objects.h\"\n #include \"src/objects/shared-function-info.h\"\n #include \"src/runtime/runtime.h\"\n \n@@ -73,8 +75,9 @@ TF_BUILTIN(GrowFastSmiOrObjectElements, CodeStubAssembler) {\n \n TF_BUILTIN(NewArgumentsElements, CodeStubAssembler) {\n   Node* frame = Parameter(Descriptor::kFrame);\n-  Node* length = SmiToIntPtr(Parameter(Descriptor::kLength));\n-  Node* mapped_count = SmiToIntPtr(Parameter(Descriptor::kMappedCount));\n+  TNode<IntPtrT> length = SmiToIntPtr(Parameter(Descriptor::kLength));\n+  TNode<IntPtrT> mapped_count =\n+      SmiToIntPtr(Parameter(Descriptor::kMappedCount));\n \n   // Check if we can allocate in new space.\n   ElementsKind kind = PACKED_ELEMENTS;\n@@ -102,9 +105,7 @@ TF_BUILTIN(NewArgumentsElements, CodeStubAssembler) {\n       // The elements might be used to back mapped arguments. In that case fill\n       // the mapped elements (i.e. the first {mapped_count}) with the hole, but\n       // make sure not to overshoot the {length} if some arguments are missing.\n-      Node* number_of_holes =\n-          SelectConstant(IntPtrLessThan(mapped_count, length), mapped_count,\n-                         length, MachineType::PointerRepresentation());\n+      TNode<IntPtrT> number_of_holes = IntPtrMin(mapped_count, length);\n       Node* the_hole = TheHoleConstant();\n \n       // Fill the first elements up to {number_of_holes} with the hole.\n@@ -173,6 +174,43 @@ TF_BUILTIN(ReturnReceiver, CodeStubAssembler) {\n   Return(Parameter(Descriptor::kReceiver));\n }\n \n+TF_BUILTIN(DebugBreakTrampoline, CodeStubAssembler) {\n+  Label tailcall_to_shared(this);\n+  TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n+  TNode<Object> new_target = CAST(Parameter(BuiltinDescriptor::kNewTarget));\n+  TNode<Int32T> arg_count =\n+      UncheckedCast<Int32T>(Parameter(BuiltinDescriptor::kArgumentsCount));\n+  TNode<JSFunction> function = CAST(LoadFromFrame(\n+      StandardFrameConstants::kFunctionOffset, MachineType::TaggedPointer()));\n+\n+  // Check break-at-entry flag on the debug info.\n+  TNode<SharedFunctionInfo> shared =\n+      CAST(LoadObjectField(function, JSFunction::kSharedFunctionInfoOffset));\n+  TNode<Object> maybe_debug_info =\n+      LoadObjectField(shared, SharedFunctionInfo::kDebugInfoOffset);\n+  GotoIf(TaggedIsSmi(maybe_debug_info), &tailcall_to_shared);\n+\n+  {\n+    TNode<DebugInfo> debug_info = CAST(maybe_debug_info);\n+    TNode<Smi> flags =\n+        CAST(LoadObjectField(debug_info, DebugInfo::kFlagsOffset));\n+    GotoIfNot(SmiToInt32(SmiAnd(flags, SmiConstant(DebugInfo::kBreakAtEntry))),\n+              &tailcall_to_shared);\n+\n+    CallRuntime(Runtime::kDebugBreakAtEntry, context, function);\n+    Goto(&tailcall_to_shared);\n+  }\n+\n+  BIND(&tailcall_to_shared);\n+  // Tail call into code object on the SharedFunctionInfo.\n+  TNode<Code> code = GetSharedFunctionInfoCode(shared);\n+  // Use the ConstructTrampolineDescriptor because it passes new.target too in\n+  // case this is called during construct.\n+  CSA_ASSERT(this, IsCode(code));\n+  ConstructTrampolineDescriptor descriptor(isolate());\n+  TailCallStub(descriptor, code, context, function, new_target, arg_count);\n+}\n+\n class RecordWriteCodeStubAssembler : public CodeStubAssembler {\n  public:\n   explicit RecordWriteCodeStubAssembler(compiler::CodeAssemblerState* state)\n@@ -442,10 +480,10 @@ TF_BUILTIN(RecordWrite, RecordWriteCodeStubAssembler) {\n   Return(TrueConstant());\n }\n \n-class DeletePropertyBaseAssembler : public CodeStubAssembler {\n+class DeletePropertyBaseAssembler : public AccessorAssembler {\n  public:\n   explicit DeletePropertyBaseAssembler(compiler::CodeAssemblerState* state)\n-      : CodeStubAssembler(state) {}\n+      : AccessorAssembler(state) {}\n \n   void DeleteDictionaryProperty(Node* receiver, Node* properties, Node* name,\n                                 Node* context, Label* dont_delete,\n@@ -532,6 +570,8 @@ TF_BUILTIN(DeleteProperty, DeletePropertyBaseAssembler) {\n \n     BIND(&dictionary);\n     {\n+      InvalidateValidityCellIfPrototype(receiver_map);\n+\n       Node* properties = LoadSlowProperties(receiver);\n       DeleteDictionaryProperty(receiver, properties, unique, context,\n                                &dont_delete, &if_notfound);\n@@ -853,8 +893,8 @@ TF_BUILTIN(RunMicrotasks, InternalBuiltinsAssembler) {\n     Goto(&loop);\n     BIND(&loop);\n     {\n-      TNode<HeapObject> microtask = TNode<HeapObject>::UncheckedCast(\n-          LoadFixedArrayElement(queue, index.value()));\n+      TNode<HeapObject> microtask =\n+          CAST(LoadFixedArrayElement(queue, index.value()));\n       index = IntPtrAdd(index.value(), IntPtrConstant(1));\n \n       CSA_ASSERT(this, TaggedIsNotSmi(microtask));\n@@ -921,8 +961,10 @@ TF_BUILTIN(RunMicrotasks, InternalBuiltinsAssembler) {\n         // But from our current measurements it doesn't seem to be a\n         // serious performance problem, even if the microtask is full\n         // of CallHandlerTasks (which is not a realistic use case anyways).\n-        CallRuntime(Runtime::kRunMicrotaskCallback, current_context,\n-                    microtask_callback, microtask_data);\n+        Node* const result =\n+            CallRuntime(Runtime::kRunMicrotaskCallback, current_context,\n+                        microtask_callback, microtask_data);\n+        GotoIfException(result, &if_exception, &var_exception);\n         Goto(&loop_next);\n       }\n "
        },
        {
            "sha": "f0d5160330e8dab7905c5ae2547fa27061ed050d",
            "filename": "deps/v8/src/builtins/builtins-interpreter-gen.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 15,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -14,26 +14,13 @@ void Builtins::Generate_InterpreterPushArgsThenCall(MacroAssembler* masm) {\n       masm, ConvertReceiverMode::kAny, InterpreterPushArgsMode::kOther);\n }\n \n-void Builtins::Generate_InterpreterPushArgsThenCallFunction(\n-    MacroAssembler* masm) {\n-  return Generate_InterpreterPushArgsThenCallImpl(\n-      masm, ConvertReceiverMode::kAny, InterpreterPushArgsMode::kJSFunction);\n-}\n-\n void Builtins::Generate_InterpreterPushUndefinedAndArgsThenCall(\n     MacroAssembler* masm) {\n   return Generate_InterpreterPushArgsThenCallImpl(\n       masm, ConvertReceiverMode::kNullOrUndefined,\n       InterpreterPushArgsMode::kOther);\n }\n \n-void Builtins::Generate_InterpreterPushUndefinedAndArgsThenCallFunction(\n-    MacroAssembler* masm) {\n-  return Generate_InterpreterPushArgsThenCallImpl(\n-      masm, ConvertReceiverMode::kNullOrUndefined,\n-      InterpreterPushArgsMode::kJSFunction);\n-}\n-\n void Builtins::Generate_InterpreterPushArgsThenCallWithFinalSpread(\n     MacroAssembler* masm) {\n   return Generate_InterpreterPushArgsThenCallImpl(\n@@ -52,10 +39,10 @@ void Builtins::Generate_InterpreterPushArgsThenConstructWithFinalSpread(\n       masm, InterpreterPushArgsMode::kWithFinalSpread);\n }\n \n-void Builtins::Generate_InterpreterPushArgsThenConstructFunction(\n+void Builtins::Generate_InterpreterPushArgsThenConstructArrayFunction(\n     MacroAssembler* masm) {\n   return Generate_InterpreterPushArgsThenConstructImpl(\n-      masm, InterpreterPushArgsMode::kJSFunction);\n+      masm, InterpreterPushArgsMode::kArrayFunction);\n }\n \n }  // namespace internal"
        },
        {
            "sha": "d05a8656dbc9ceedd53efd8a158435679e87a676",
            "filename": "deps/v8/src/builtins/builtins-interpreter.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 11,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-interpreter.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -14,15 +14,10 @@ namespace internal {\n Handle<Code> Builtins::InterpreterPushArgsThenCall(\n     ConvertReceiverMode receiver_mode, InterpreterPushArgsMode mode) {\n   switch (mode) {\n-    case InterpreterPushArgsMode::kJSFunction:\n-      switch (receiver_mode) {\n-        case ConvertReceiverMode::kNullOrUndefined:\n-          return builtin_handle(\n-              kInterpreterPushUndefinedAndArgsThenCallFunction);\n-        case ConvertReceiverMode::kNotNullOrUndefined:\n-        case ConvertReceiverMode::kAny:\n-          return builtin_handle(kInterpreterPushArgsThenCallFunction);\n-      }\n+    case InterpreterPushArgsMode::kArrayFunction:\n+      // There is no special-case handling of calls to Array. They will all go\n+      // through the kOther case below.\n+      UNREACHABLE();\n     case InterpreterPushArgsMode::kWithFinalSpread:\n       return builtin_handle(kInterpreterPushArgsThenCallWithFinalSpread);\n     case InterpreterPushArgsMode::kOther:\n@@ -40,8 +35,8 @@ Handle<Code> Builtins::InterpreterPushArgsThenCall(\n Handle<Code> Builtins::InterpreterPushArgsThenConstruct(\n     InterpreterPushArgsMode mode) {\n   switch (mode) {\n-    case InterpreterPushArgsMode::kJSFunction:\n-      return builtin_handle(kInterpreterPushArgsThenConstructFunction);\n+    case InterpreterPushArgsMode::kArrayFunction:\n+      return builtin_handle(kInterpreterPushArgsThenConstructArrayFunction);\n     case InterpreterPushArgsMode::kWithFinalSpread:\n       return builtin_handle(kInterpreterPushArgsThenConstructWithFinalSpread);\n     case InterpreterPushArgsMode::kOther:"
        },
        {
            "sha": "57702556a9ee0bd420e128ca3dcf7b0e123cd690",
            "filename": "deps/v8/src/builtins/builtins-iterator-gen.cc",
            "status": "modified",
            "additions": 35,
            "deletions": 16,
            "changes": 51,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-iterator-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -4,7 +4,7 @@\n \n #include \"src/builtins/builtins-iterator-gen.h\"\n \n-#include \"src/factory-inl.h\"\n+#include \"src/heap/factory-inl.h\"\n \n namespace v8 {\n namespace internal {\n@@ -31,23 +31,42 @@ IteratorRecord IteratorBuiltinsAssembler::GetIterator(Node* context,\n                                                       Variable* exception) {\n   GotoIfException(method, if_exception, exception);\n \n-  Callable callable = CodeFactory::Call(isolate());\n-  Node* iterator = CallJS(callable, context, method, object);\n-  GotoIfException(iterator, if_exception, exception);\n-\n-  Label get_next(this), if_notobject(this, Label::kDeferred);\n-  GotoIf(TaggedIsSmi(iterator), &if_notobject);\n-  Branch(IsJSReceiver(iterator), &get_next, &if_notobject);\n+  Label if_not_callable(this, Label::kDeferred), if_callable(this);\n+  GotoIf(TaggedIsSmi(method), &if_not_callable);\n+  Branch(IsCallable(method), &if_callable, &if_not_callable);\n \n-  BIND(&if_notobject);\n-  { ThrowTypeError(context, MessageTemplate::kNotAnIterator, iterator); }\n-\n-  BIND(&get_next);\n-  Node* const next = GetProperty(context, iterator, factory()->next_string());\n-  GotoIfException(next, if_exception, exception);\n+  BIND(&if_not_callable);\n+  {\n+    Node* ret = CallRuntime(Runtime::kThrowTypeError, context,\n+                            SmiConstant(MessageTemplate::kNotIterable), object);\n+    GotoIfException(ret, if_exception, exception);\n+    Unreachable();\n+  }\n \n-  return IteratorRecord{TNode<JSReceiver>::UncheckedCast(iterator),\n-                        TNode<Object>::UncheckedCast(next)};\n+  BIND(&if_callable);\n+  {\n+    Callable callable = CodeFactory::Call(isolate());\n+    Node* iterator = CallJS(callable, context, method, object);\n+    GotoIfException(iterator, if_exception, exception);\n+\n+    Label get_next(this), if_notobject(this, Label::kDeferred);\n+    GotoIf(TaggedIsSmi(iterator), &if_notobject);\n+    Branch(IsJSReceiver(iterator), &get_next, &if_notobject);\n+\n+    BIND(&if_notobject);\n+    {\n+      Node* ret = CallRuntime(Runtime::kThrowSymbolIteratorInvalid, context);\n+      GotoIfException(ret, if_exception, exception);\n+      Unreachable();\n+    }\n+\n+    BIND(&get_next);\n+    Node* const next = GetProperty(context, iterator, factory()->next_string());\n+    GotoIfException(next, if_exception, exception);\n+\n+    return IteratorRecord{TNode<JSReceiver>::UncheckedCast(iterator),\n+                          TNode<Object>::UncheckedCast(next)};\n+  }\n }\n \n Node* IteratorBuiltinsAssembler::IteratorStep("
        },
        {
            "sha": "20d9453aa74d416d4ba92e3d83fcf28be79180b3",
            "filename": "deps/v8/src/builtins/builtins-object-gen.cc",
            "status": "modified",
            "additions": 21,
            "deletions": 18,
            "changes": 39,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-object-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -5,7 +5,7 @@\n #include \"src/builtins/builtins-utils-gen.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-stub-assembler.h\"\n-#include \"src/factory-inl.h\"\n+#include \"src/heap/factory-inl.h\"\n #include \"src/objects/property-descriptor-object.h\"\n #include \"src/objects/shared-function-info.h\"\n \n@@ -141,14 +141,15 @@ Node* ObjectBuiltinsAssembler::ConstructDataDescriptor(Node* context,\n \n Node* ObjectBuiltinsAssembler::IsSpecialReceiverMap(SloppyTNode<Map> map) {\n   CSA_SLOW_ASSERT(this, IsMap(map));\n-  Node* is_special = IsSpecialReceiverInstanceType(LoadMapInstanceType(map));\n+  TNode<BoolT> is_special =\n+      IsSpecialReceiverInstanceType(LoadMapInstanceType(map));\n   uint32_t mask =\n       Map::HasNamedInterceptorBit::kMask | Map::IsAccessCheckNeededBit::kMask;\n   USE(mask);\n   // Interceptors or access checks imply special receiver.\n   CSA_ASSERT(this,\n-             SelectConstant(IsSetWord32(LoadMapBitField(map), mask), is_special,\n-                            Int32Constant(1), MachineRepresentation::kWord32));\n+             SelectConstant<BoolT>(IsSetWord32(LoadMapBitField(map), mask),\n+                                   is_special, Int32TrueConstant()));\n   return is_special;\n }\n \n@@ -313,7 +314,7 @@ TNode<JSArray> ObjectEntriesValuesBuiltinsAssembler::FastGetOwnValuesOrEntries(\n       CSA_ASSERT(this, WordEqual(map, LoadMap(object)));\n       TNode<Uint32T> descriptor_index = TNode<Uint32T>::UncheckedCast(\n           TruncateIntPtrToInt32(var_descriptor_number.value()));\n-      Node* next_key = DescriptorArrayGetKey(descriptors, descriptor_index);\n+      Node* next_key = GetKey(descriptors, descriptor_index);\n \n       // Skip Symbols.\n       GotoIf(IsSymbol(next_key), &next_descriptor);\n@@ -332,8 +333,8 @@ TNode<JSArray> ObjectEntriesValuesBuiltinsAssembler::FastGetOwnValuesOrEntries(\n \n       VARIABLE(var_property_value, MachineRepresentation::kTagged,\n                UndefinedConstant());\n-      Node* descriptor_name_index = DescriptorArrayToKeyIndex(\n-          TruncateIntPtrToInt32(var_descriptor_number.value()));\n+      TNode<IntPtrT> descriptor_name_index = ToKeyIndex<DescriptorArray>(\n+          Unsigned(TruncateIntPtrToInt32(var_descriptor_number.value())));\n \n       // Let value be ? Get(O, key).\n       LoadPropertyFromFastObject(object, map, descriptors,\n@@ -771,11 +772,15 @@ TF_BUILTIN(ObjectPrototypeToString, ObjectBuiltinsAssembler) {\n     // as the exception is observable.\n     Node* receiver_is_array =\n         CallRuntime(Runtime::kArrayIsArray, context, receiver);\n-    Node* builtin_tag = SelectTaggedConstant<Object>(\n-        IsTrue(receiver_is_array), LoadRoot(Heap::kArray_stringRootIndex),\n-        SelectTaggedConstant<Object>(IsCallableMap(receiver_map),\n-                                     LoadRoot(Heap::kFunction_stringRootIndex),\n-                                     LoadRoot(Heap::kObject_stringRootIndex)));\n+    TNode<String> builtin_tag = Select<String>(\n+        IsTrue(receiver_is_array),\n+        [=] { return CAST(LoadRoot(Heap::kArray_stringRootIndex)); },\n+        [=] {\n+          return Select<String>(\n+              IsCallableMap(receiver_map),\n+              [=] { return CAST(LoadRoot(Heap::kFunction_stringRootIndex)); },\n+              [=] { return CAST(LoadRoot(Heap::kObject_stringRootIndex)); });\n+        });\n \n     // Lookup the @@toStringTag property on the {receiver}.\n     VARIABLE(var_tag, MachineRepresentation::kTagged,\n@@ -1053,7 +1058,7 @@ TF_BUILTIN(GetSuperConstructor, ObjectBuiltinsAssembler) {\n   Node* object = Parameter(Descriptor::kObject);\n   Node* context = Parameter(Descriptor::kContext);\n \n-  Return(GetSuperConstructor(object, context));\n+  Return(GetSuperConstructor(context, object));\n }\n \n TF_BUILTIN(CreateGeneratorObject, ObjectBuiltinsAssembler) {\n@@ -1071,8 +1076,8 @@ TF_BUILTIN(CreateGeneratorObject, ObjectBuiltinsAssembler) {\n \n   Node* shared =\n       LoadObjectField(closure, JSFunction::kSharedFunctionInfoOffset);\n-  Node* bytecode_array =\n-      LoadObjectField(shared, SharedFunctionInfo::kFunctionDataOffset);\n+  Node* bytecode_array = LoadSharedFunctionInfoBytecodeArray(shared);\n+\n   Node* frame_size = ChangeInt32ToIntPtr(LoadObjectField(\n       bytecode_array, BytecodeArray::kFrameSizeOffset, MachineType::Int32()));\n   Node* size = WordSar(frame_size, IntPtrConstant(kPointerSizeLog2));\n@@ -1130,9 +1135,7 @@ TF_BUILTIN(ObjectGetOwnPropertyDescriptor, ObjectBuiltinsAssembler) {\n       return_undefined(this, Label::kDeferred), if_notunique_name(this);\n   Node* map = LoadMap(object);\n   Node* instance_type = LoadMapInstanceType(map);\n-  GotoIf(Int32LessThanOrEqual(instance_type,\n-                              Int32Constant(LAST_SPECIAL_RECEIVER_TYPE)),\n-         &call_runtime);\n+  GotoIf(IsSpecialReceiverInstanceType(instance_type), &call_runtime);\n   {\n     VARIABLE(var_index, MachineType::PointerRepresentation(),\n              IntPtrConstant(0));"
        },
        {
            "sha": "dd38dbc5435cab7d6128d14e73cdbd920832c779",
            "filename": "deps/v8/src/builtins/builtins-promise-gen.cc",
            "status": "modified",
            "additions": 325,
            "deletions": 164,
            "changes": 489,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -198,6 +198,50 @@ Node* PromiseBuiltinsAssembler::CreatePromiseContext(Node* native_context,\n   return context;\n }\n \n+Node* PromiseBuiltinsAssembler::CreatePromiseAllResolveElementContext(\n+    Node* promise_capability, Node* native_context) {\n+  CSA_ASSERT(this, IsNativeContext(native_context));\n+\n+  // TODO(bmeurer): Manually fold this into a single allocation.\n+  Node* const array_map = LoadContextElement(\n+      native_context, Context::JS_ARRAY_PACKED_ELEMENTS_MAP_INDEX);\n+  Node* const values_array = AllocateJSArray(PACKED_ELEMENTS, array_map,\n+                                             IntPtrConstant(0), SmiConstant(0));\n+\n+  Node* const context =\n+      CreatePromiseContext(native_context, kPromiseAllResolveElementLength);\n+  StoreContextElementNoWriteBarrier(\n+      context, kPromiseAllResolveElementRemainingSlot, SmiConstant(1));\n+  StoreContextElementNoWriteBarrier(\n+      context, kPromiseAllResolveElementCapabilitySlot, promise_capability);\n+  StoreContextElementNoWriteBarrier(\n+      context, kPromiseAllResolveElementValuesArraySlot, values_array);\n+\n+  return context;\n+}\n+\n+Node* PromiseBuiltinsAssembler::CreatePromiseAllResolveElementFunction(\n+    Node* context, Node* index, Node* native_context) {\n+  CSA_ASSERT(this, TaggedIsSmi(index));\n+  CSA_ASSERT(this, SmiGreaterThan(index, SmiConstant(0)));\n+  CSA_ASSERT(this, SmiLessThanOrEqual(\n+                       index, SmiConstant(PropertyArray::HashField::kMax)));\n+  CSA_ASSERT(this, IsNativeContext(native_context));\n+\n+  Node* const map = LoadContextElement(\n+      native_context, Context::STRICT_FUNCTION_WITHOUT_PROTOTYPE_MAP_INDEX);\n+  Node* const resolve_info = LoadContextElement(\n+      native_context, Context::PROMISE_ALL_RESOLVE_ELEMENT_SHARED_FUN);\n+  Node* const resolve =\n+      AllocateFunctionWithMapAndContext(map, resolve_info, context);\n+\n+  STATIC_ASSERT(PropertyArray::kNoHashSentinel == 0);\n+  StoreObjectFieldNoWriteBarrier(resolve, JSFunction::kPropertiesOrHashOffset,\n+                                 index);\n+\n+  return resolve;\n+}\n+\n Node* PromiseBuiltinsAssembler::CreatePromiseResolvingFunctionsContext(\n     Node* promise, Node* debug_event, Node* native_context) {\n   Node* const context =\n@@ -526,6 +570,61 @@ Node* PromiseBuiltinsAssembler::InvokeThen(Node* native_context, Node* receiver,\n   return var_result.value();\n }\n \n+Node* PromiseBuiltinsAssembler::InvokeResolve(Node* native_context,\n+                                              Node* constructor, Node* value,\n+                                              Label* if_exception,\n+                                              Variable* var_exception) {\n+  CSA_ASSERT(this, IsNativeContext(native_context));\n+\n+  VARIABLE(var_result, MachineRepresentation::kTagged);\n+  Label if_fast(this), if_slow(this, Label::kDeferred), done(this, &var_result);\n+  // We can skip the \"resolve\" lookup on {constructor} if it's the\n+  // Promise constructor and the Promise.resolve protector is intact,\n+  // as that guards the lookup path for the \"resolve\" property on the\n+  // Promise constructor.\n+  BranchIfPromiseResolveLookupChainIntact(native_context, constructor, &if_fast,\n+                                          &if_slow);\n+\n+  BIND(&if_fast);\n+  {\n+    Node* const result = CallBuiltin(Builtins::kPromiseResolve, native_context,\n+                                     constructor, value);\n+    GotoIfException(result, if_exception, var_exception);\n+\n+    var_result.Bind(result);\n+    Goto(&done);\n+  }\n+\n+  BIND(&if_slow);\n+  {\n+    Node* const resolve =\n+        GetProperty(native_context, constructor, factory()->resolve_string());\n+    GotoIfException(resolve, if_exception, var_exception);\n+\n+    Node* const result = CallJS(\n+        CodeFactory::Call(isolate(), ConvertReceiverMode::kNotNullOrUndefined),\n+        native_context, resolve, constructor, value);\n+    GotoIfException(result, if_exception, var_exception);\n+\n+    var_result.Bind(result);\n+    Goto(&done);\n+  }\n+\n+  BIND(&done);\n+  return var_result.value();\n+}\n+\n+void PromiseBuiltinsAssembler::BranchIfPromiseResolveLookupChainIntact(\n+    Node* native_context, Node* constructor, Label* if_fast, Label* if_slow) {\n+  CSA_ASSERT(this, IsNativeContext(native_context));\n+\n+  GotoIfForceSlowPath(if_slow);\n+  Node* const promise_fun =\n+      LoadContextElement(native_context, Context::PROMISE_FUNCTION_INDEX);\n+  GotoIfNot(WordEqual(promise_fun, constructor), if_slow);\n+  Branch(IsPromiseResolveProtectorCellInvalid(), if_slow, if_fast);\n+}\n+\n void PromiseBuiltinsAssembler::BranchIfPromiseSpeciesLookupChainIntact(\n     Node* native_context, Node* promise_map, Label* if_fast, Label* if_slow) {\n   CSA_ASSERT(this, IsNativeContext(native_context));\n@@ -536,7 +635,7 @@ void PromiseBuiltinsAssembler::BranchIfPromiseSpeciesLookupChainIntact(\n   GotoIfForceSlowPath(if_slow);\n   GotoIfNot(WordEqual(LoadMapPrototype(promise_map), promise_prototype),\n             if_slow);\n-  Branch(IsSpeciesProtectorCellInvalid(), if_slow, if_fast);\n+  Branch(IsPromiseSpeciesProtectorCellInvalid(), if_slow, if_fast);\n }\n \n void PromiseBuiltinsAssembler::BranchIfPromiseThenLookupChainIntact(\n@@ -668,6 +767,18 @@ TF_BUILTIN(PromiseCapabilityDefaultResolve, PromiseBuiltinsAssembler) {\n \n TF_BUILTIN(PromiseConstructorLazyDeoptContinuation, PromiseBuiltinsAssembler) {\n   Node* promise = Parameter(Descriptor::kPromise);\n+  Node* reject = Parameter(Descriptor::kReject);\n+  Node* exception = Parameter(Descriptor::kException);\n+  Node* const context = Parameter(Descriptor::kContext);\n+\n+  Label finally(this);\n+\n+  GotoIf(IsTheHole(exception), &finally);\n+  CallJS(CodeFactory::Call(isolate(), ConvertReceiverMode::kNotNullOrUndefined),\n+         context, reject, UndefinedConstant(), exception);\n+  Goto(&finally);\n+\n+  BIND(&finally);\n   Return(promise);\n }\n \n@@ -1171,10 +1282,10 @@ TF_BUILTIN(PromiseResolve, PromiseBuiltinsAssembler) {\n   // intact, as that guards the lookup path for \"constructor\" on\n   // JSPromise instances which have the (initial) Promise.prototype.\n   Node* const promise_prototype =\n-      LoadContextElement(native_context, Context::PROMISE_FUNCTION_INDEX);\n+      LoadContextElement(native_context, Context::PROMISE_PROTOTYPE_INDEX);\n   GotoIfNot(WordEqual(LoadMapPrototype(value_map), promise_prototype),\n             &if_slow_constructor);\n-  GotoIf(IsSpeciesProtectorCellInvalid(), &if_slow_constructor);\n+  GotoIf(IsPromiseSpeciesProtectorCellInvalid(), &if_slow_constructor);\n \n   // If the {constructor} is the Promise function, we just immediately\n   // return the {value} here and don't bother wrapping it into a\n@@ -1606,21 +1717,23 @@ TF_BUILTIN(ResolvePromise, PromiseBuiltinsAssembler) {\n \n   // 7. If Type(resolution) is not Object, then\n   GotoIf(TaggedIsSmi(resolution), &if_fulfill);\n-  Node* const result_map = LoadMap(resolution);\n-  GotoIfNot(IsJSReceiverMap(result_map), &if_fulfill);\n+  Node* const resolution_map = LoadMap(resolution);\n+  GotoIfNot(IsJSReceiverMap(resolution_map), &if_fulfill);\n \n   // We can skip the \"then\" lookup on {resolution} if its [[Prototype]]\n   // is the (initial) Promise.prototype and the Promise#then protector\n   // is intact, as that guards the lookup path for the \"then\" property\n   // on JSPromise instances which have the (initial) %PromisePrototype%.\n-  Label if_fast(this), if_slow(this, Label::kDeferred);\n+  Label if_fast(this), if_generic(this), if_slow(this, Label::kDeferred);\n   Node* const native_context = LoadNativeContext(context);\n-  BranchIfPromiseThenLookupChainIntact(native_context, result_map, &if_fast,\n-                                       &if_slow);\n+  GotoIfForceSlowPath(&if_slow);\n+  GotoIf(IsPromiseThenProtectorCellInvalid(), &if_slow);\n+  GotoIfNot(IsJSPromiseMap(resolution_map), &if_generic);\n+  Node* const promise_prototype =\n+      LoadContextElement(native_context, Context::PROMISE_PROTOTYPE_INDEX);\n+  Branch(WordEqual(LoadMapPrototype(resolution_map), promise_prototype),\n+         &if_fast, &if_slow);\n \n-  // Resolution is a native promise and if it's already resolved or\n-  // rejected, shortcircuit the resolution procedure by directly\n-  // reusing the value from the promise.\n   BIND(&if_fast);\n   {\n     Node* const then =\n@@ -1629,6 +1742,21 @@ TF_BUILTIN(ResolvePromise, PromiseBuiltinsAssembler) {\n     Goto(&do_enqueue);\n   }\n \n+  BIND(&if_generic);\n+  {\n+    // We can skip the lookup of \"then\" if the {resolution} is a (newly\n+    // created) IterResultObject, as the Promise#then protector also\n+    // ensures that the intrinsic %ObjectPrototype% doesn't contain any\n+    // \"then\" property. This helps to avoid negative lookups on iterator\n+    // results from async generators.\n+    CSA_ASSERT(this, IsJSReceiverMap(resolution_map));\n+    CSA_ASSERT(this, Word32BinaryNot(IsPromiseThenProtectorCellInvalid()));\n+    Node* const iterator_result_map =\n+        LoadContextElement(native_context, Context::ITERATOR_RESULT_MAP_INDEX);\n+    Branch(WordEqual(resolution_map, iterator_result_map), &if_fulfill,\n+           &if_slow);\n+  }\n+\n   BIND(&if_slow);\n   {\n     // 8. Let then be Get(resolution, \"then\").\n@@ -1677,26 +1805,23 @@ Node* PromiseBuiltinsAssembler::PerformPromiseAll(\n     const IteratorRecord& iterator, Label* if_exception,\n     Variable* var_exception) {\n   IteratorBuiltinsAssembler iter_assembler(state());\n-  Label close_iterator(this);\n \n   Node* const instrumenting = IsDebugActive();\n+  Node* const native_context = LoadNativeContext(context);\n \n   // For catch prediction, don't treat the .then calls as handling it;\n   // instead, recurse outwards.\n   SetForwardingHandlerIfTrue(\n-      context, instrumenting,\n+      native_context, instrumenting,\n       LoadObjectField(capability, PromiseCapability::kRejectOffset));\n \n-  Node* const native_context = LoadNativeContext(context);\n-  Node* const array_map = LoadContextElement(\n-      native_context, Context::JS_ARRAY_PACKED_ELEMENTS_MAP_INDEX);\n-  Node* const values_array = AllocateJSArray(PACKED_ELEMENTS, array_map,\n-                                             IntPtrConstant(0), SmiConstant(0));\n-  Node* const remaining_elements = AllocateSmiCell(1);\n+  Node* const resolve_element_context =\n+      CreatePromiseAllResolveElementContext(capability, native_context);\n \n-  VARIABLE(var_index, MachineRepresentation::kTagged, SmiConstant(0));\n-\n-  Label loop(this, &var_index), break_loop(this);\n+  VARIABLE(var_index, MachineRepresentation::kTagged, SmiConstant(1));\n+  Label loop(this, &var_index), done_loop(this),\n+      too_many_elements(this, Label::kDeferred),\n+      close_iterator(this, Label::kDeferred);\n   Goto(&loop);\n   BIND(&loop);\n   {\n@@ -1706,119 +1831,147 @@ Node* PromiseBuiltinsAssembler::PerformPromiseAll(\n     Node* const fast_iterator_result_map =\n         LoadContextElement(native_context, Context::ITERATOR_RESULT_MAP_INDEX);\n     Node* const next = iter_assembler.IteratorStep(\n-        context, iterator, &break_loop, fast_iterator_result_map, if_exception,\n-        var_exception);\n+        native_context, iterator, &done_loop, fast_iterator_result_map,\n+        if_exception, var_exception);\n \n     // Let nextValue be IteratorValue(next).\n     // If nextValue is an abrupt completion, set iteratorRecord.[[Done]] to\n     //     true.\n     // ReturnIfAbrupt(nextValue).\n     Node* const next_value = iter_assembler.IteratorValue(\n-        context, next, fast_iterator_result_map, if_exception, var_exception);\n+        native_context, next, fast_iterator_result_map, if_exception,\n+        var_exception);\n \n     // Let nextPromise be ? Invoke(constructor, \"resolve\", « nextValue »).\n-    Node* const promise_resolve =\n-        GetProperty(context, constructor, factory()->resolve_string());\n-    GotoIfException(promise_resolve, &close_iterator, var_exception);\n-\n-    Node* const next_promise = CallJS(\n-        CodeFactory::Call(isolate(), ConvertReceiverMode::kNotNullOrUndefined),\n-        context, promise_resolve, constructor, next_value);\n-    GotoIfException(next_promise, &close_iterator, var_exception);\n+    Node* const next_promise =\n+        InvokeResolve(native_context, constructor, next_value, &close_iterator,\n+                      var_exception);\n \n-    // Let resolveElement be a new built-in function object as defined in\n-    // Promise.all Resolve Element Functions.\n-    Node* const resolve_context =\n-        CreatePromiseContext(native_context, kPromiseAllResolveElementLength);\n-    StoreContextElementNoWriteBarrier(\n-        resolve_context, kPromiseAllResolveElementIndexSlot, var_index.value());\n-    StoreContextElementNoWriteBarrier(\n-        resolve_context, kPromiseAllResolveElementRemainingElementsSlot,\n-        remaining_elements);\n-    StoreContextElementNoWriteBarrier(\n-        resolve_context, kPromiseAllResolveElementCapabilitySlot, capability);\n-    StoreContextElementNoWriteBarrier(resolve_context,\n-                                      kPromiseAllResolveElementValuesArraySlot,\n-                                      values_array);\n-\n-    Node* const map = LoadContextElement(\n-        native_context, Context::STRICT_FUNCTION_WITHOUT_PROTOTYPE_MAP_INDEX);\n-    Node* const resolve_info = LoadContextElement(\n-        native_context, Context::PROMISE_ALL_RESOLVE_ELEMENT_SHARED_FUN);\n-    Node* const resolve =\n-        AllocateFunctionWithMapAndContext(map, resolve_info, resolve_context);\n+    // Check if we reached the limit.\n+    Node* const index = var_index.value();\n+    GotoIf(SmiEqual(index, SmiConstant(PropertyArray::HashField::kMax)),\n+           &too_many_elements);\n \n     // Set remainingElementsCount.[[Value]] to\n     //     remainingElementsCount.[[Value]] + 1.\n-    {\n-      Label if_outofrange(this, Label::kDeferred), done(this);\n-      IncrementSmiCell(remaining_elements, &if_outofrange);\n-      Goto(&done);\n-\n-      BIND(&if_outofrange);\n-      {\n-        // If the incremented value is out of Smi range, crash.\n-        Abort(AbortReason::kOffsetOutOfRange);\n-      }\n-\n-      BIND(&done);\n-    }\n+    Node* const remaining_elements_count = LoadContextElement(\n+        resolve_element_context, kPromiseAllResolveElementRemainingSlot);\n+    StoreContextElementNoWriteBarrier(\n+        resolve_element_context, kPromiseAllResolveElementRemainingSlot,\n+        SmiAdd(remaining_elements_count, SmiConstant(1)));\n+\n+    // Let resolveElement be CreateBuiltinFunction(steps,\n+    //                                             « [[AlreadyCalled]],\n+    //                                               [[Index]],\n+    //                                               [[Values]],\n+    //                                               [[Capability]],\n+    //                                               [[RemainingElements]] »).\n+    // Set resolveElement.[[AlreadyCalled]] to a Record { [[Value]]: false }.\n+    // Set resolveElement.[[Index]] to index.\n+    // Set resolveElement.[[Values]] to values.\n+    // Set resolveElement.[[Capability]] to resultCapability.\n+    // Set resolveElement.[[RemainingElements]] to remainingElementsCount.\n+    Node* const resolve_element_fun = CreatePromiseAllResolveElementFunction(\n+        resolve_element_context, index, native_context);\n \n     // Perform ? Invoke(nextPromise, \"then\", « resolveElement,\n     //                  resultCapability.[[Reject]] »).\n     Node* const then =\n-        GetProperty(context, next_promise, factory()->then_string());\n+        GetProperty(native_context, next_promise, factory()->then_string());\n     GotoIfException(then, &close_iterator, var_exception);\n \n     Node* const then_call = CallJS(\n         CodeFactory::Call(isolate(), ConvertReceiverMode::kNotNullOrUndefined),\n-        context, then, next_promise, resolve,\n+        native_context, then, next_promise, resolve_element_fun,\n         LoadObjectField(capability, PromiseCapability::kRejectOffset));\n     GotoIfException(then_call, &close_iterator, var_exception);\n \n     // For catch prediction, mark that rejections here are semantically\n     // handled by the combined Promise.\n-    SetPromiseHandledByIfTrue(context, instrumenting, then_call, [=]() {\n+    SetPromiseHandledByIfTrue(native_context, instrumenting, then_call, [=]() {\n       // Load promiseCapability.[[Promise]]\n       return LoadObjectField(capability, PromiseCapability::kPromiseOffset);\n     });\n \n-    // Set index to index + 1\n-    var_index.Bind(NumberInc(var_index.value()));\n+    // Set index to index + 1.\n+    var_index.Bind(SmiAdd(index, SmiConstant(1)));\n     Goto(&loop);\n   }\n \n+  BIND(&too_many_elements);\n+  {\n+    // If there are too many elements (currently more than 2**21-1), raise a\n+    // RangeError here (which is caught directly and turned into a rejection)\n+    // of the resulting promise. We could gracefully handle this case as well\n+    // and support more than this number of elements by going to a separate\n+    // function and pass the larger indices via a separate context, but it\n+    // doesn't seem likely that we need this, and it's unclear how the rest\n+    // of the system deals with 2**21 live Promises anyways.\n+    Node* const result =\n+        CallRuntime(Runtime::kThrowRangeError, native_context,\n+                    SmiConstant(MessageTemplate::kTooManyElementsInPromiseAll));\n+    GotoIfException(result, &close_iterator, var_exception);\n+    Unreachable();\n+  }\n+\n   BIND(&close_iterator);\n   {\n     // Exception must be bound to a JS value.\n     CSA_ASSERT(this, IsNotTheHole(var_exception->value()));\n-    iter_assembler.IteratorCloseOnException(context, iterator, if_exception,\n-                                            var_exception);\n+    iter_assembler.IteratorCloseOnException(native_context, iterator,\n+                                            if_exception, var_exception);\n   }\n \n-  BIND(&break_loop);\n+  BIND(&done_loop);\n   {\n-    Label resolve_promise(this), return_promise(this);\n+    Label resolve_promise(this, Label::kDeferred), return_promise(this);\n     // Set iteratorRecord.[[Done]] to true.\n     // Set remainingElementsCount.[[Value]] to\n     //    remainingElementsCount.[[Value]] - 1.\n-    Node* const remaining = DecrementSmiCell(remaining_elements);\n-    Branch(SmiEqual(remaining, SmiConstant(0)), &resolve_promise,\n-           &return_promise);\n+    Node* remaining_elements_count = LoadContextElement(\n+        resolve_element_context, kPromiseAllResolveElementRemainingSlot);\n+    remaining_elements_count = SmiSub(remaining_elements_count, SmiConstant(1));\n+    StoreContextElementNoWriteBarrier(resolve_element_context,\n+                                      kPromiseAllResolveElementRemainingSlot,\n+                                      remaining_elements_count);\n+    GotoIf(SmiEqual(remaining_elements_count, SmiConstant(0)),\n+           &resolve_promise);\n+\n+    // Pre-allocate the backing store for the {values_array} to the desired\n+    // capacity here. We may already have elements here in case of some\n+    // fancy Thenable that calls the resolve callback immediately, so we need\n+    // to handle that correctly here.\n+    Node* const values_array = LoadContextElement(\n+        resolve_element_context, kPromiseAllResolveElementValuesArraySlot);\n+    Node* const old_elements = LoadElements(values_array);\n+    Node* const old_capacity = LoadFixedArrayBaseLength(old_elements);\n+    Node* const new_capacity = var_index.value();\n+    GotoIf(SmiGreaterThanOrEqual(old_capacity, new_capacity), &return_promise);\n+    Node* const new_elements =\n+        AllocateFixedArray(PACKED_ELEMENTS, new_capacity, SMI_PARAMETERS,\n+                           AllocationFlag::kAllowLargeObjectAllocation);\n+    CopyFixedArrayElements(PACKED_ELEMENTS, old_elements, PACKED_ELEMENTS,\n+                           new_elements, SmiConstant(0), old_capacity,\n+                           new_capacity, UPDATE_WRITE_BARRIER, SMI_PARAMETERS);\n+    StoreObjectField(values_array, JSArray::kElementsOffset, new_elements);\n+    Goto(&return_promise);\n \n     // If remainingElementsCount.[[Value]] is 0, then\n     //     Let valuesArray be CreateArrayFromList(values).\n     //     Perform ? Call(resultCapability.[[Resolve]], undefined,\n     //                    « valuesArray »).\n     BIND(&resolve_promise);\n-\n-    Node* const resolve =\n-        LoadObjectField(capability, PromiseCapability::kResolveOffset);\n-    Node* const resolve_call = CallJS(\n-        CodeFactory::Call(isolate(), ConvertReceiverMode::kNullOrUndefined),\n-        context, resolve, UndefinedConstant(), values_array);\n-    GotoIfException(resolve_call, if_exception, var_exception);\n-    Goto(&return_promise);\n+    {\n+      Node* const resolve =\n+          LoadObjectField(capability, PromiseCapability::kResolveOffset);\n+      Node* const values_array = LoadContextElement(\n+          resolve_element_context, kPromiseAllResolveElementValuesArraySlot);\n+      Node* const resolve_call = CallJS(\n+          CodeFactory::Call(isolate(), ConvertReceiverMode::kNullOrUndefined),\n+          native_context, resolve, UndefinedConstant(), values_array);\n+      GotoIfException(resolve_call, if_exception, var_exception);\n+      Goto(&return_promise);\n+    }\n \n     // Return resultCapability.[[Promise]].\n     BIND(&return_promise);\n@@ -1829,31 +1982,6 @@ Node* PromiseBuiltinsAssembler::PerformPromiseAll(\n   return promise;\n }\n \n-Node* PromiseBuiltinsAssembler::IncrementSmiCell(Node* cell,\n-                                                 Label* if_overflow) {\n-  CSA_SLOW_ASSERT(this, HasInstanceType(cell, CELL_TYPE));\n-  Node* value = LoadCellValue(cell);\n-  CSA_SLOW_ASSERT(this, TaggedIsSmi(value));\n-\n-  if (if_overflow != nullptr) {\n-    GotoIf(SmiEqual(value, SmiConstant(Smi::kMaxValue)), if_overflow);\n-  }\n-\n-  Node* result = SmiAdd(value, SmiConstant(1));\n-  StoreCellValue(cell, result, SKIP_WRITE_BARRIER);\n-  return result;\n-}\n-\n-Node* PromiseBuiltinsAssembler::DecrementSmiCell(Node* cell) {\n-  CSA_SLOW_ASSERT(this, HasInstanceType(cell, CELL_TYPE));\n-  Node* value = LoadCellValue(cell);\n-  CSA_SLOW_ASSERT(this, TaggedIsSmi(value));\n-\n-  Node* result = SmiSub(value, SmiConstant(1));\n-  StoreCellValue(cell, result, SKIP_WRITE_BARRIER);\n-  return result;\n-}\n-\n // ES#sec-promise.all\n // Promise.all ( iterable )\n TF_BUILTIN(PromiseAll, PromiseBuiltinsAssembler) {\n@@ -1910,60 +2038,96 @@ TF_BUILTIN(PromiseAll, PromiseBuiltinsAssembler) {\n TF_BUILTIN(PromiseAllResolveElementClosure, PromiseBuiltinsAssembler) {\n   Node* const value = Parameter(Descriptor::kValue);\n   Node* const context = Parameter(Descriptor::kContext);\n+  Node* const function = LoadFromFrame(StandardFrameConstants::kFunctionOffset);\n \n+  Label already_called(this, Label::kDeferred), resolve_promise(this);\n+\n+  // We use the {function}s context as the marker to remember whether this\n+  // resolve element closure was already called. It points to the resolve\n+  // element context (which is a FunctionContext) until it was called the\n+  // first time, in which case we make it point to the native context here\n+  // to mark this resolve element closure as done.\n+  GotoIf(IsNativeContext(context), &already_called);\n   CSA_ASSERT(this, SmiEqual(LoadFixedArrayBaseLength(context),\n                             SmiConstant(kPromiseAllResolveElementLength)));\n+  Node* const native_context = LoadNativeContext(context);\n+  StoreObjectField(function, JSFunction::kContextOffset, native_context);\n \n-  Node* const index =\n-      LoadContextElement(context, kPromiseAllResolveElementIndexSlot);\n+  // Determine the index from the {function}.\n+  Label unreachable(this, Label::kDeferred);\n+  STATIC_ASSERT(PropertyArray::kNoHashSentinel == 0);\n+  Node* const identity_hash =\n+      LoadJSReceiverIdentityHash(function, &unreachable);\n+  CSA_ASSERT(this, IntPtrGreaterThan(identity_hash, IntPtrConstant(0)));\n+  Node* const index = IntPtrSub(identity_hash, IntPtrConstant(1));\n+\n+  // Check if we need to grow the [[ValuesArray]] to store {value} at {index}.\n   Node* const values_array =\n       LoadContextElement(context, kPromiseAllResolveElementValuesArraySlot);\n+  Node* const elements = LoadElements(values_array);\n+  Node* const values_length =\n+      LoadAndUntagObjectField(values_array, JSArray::kLengthOffset);\n+  Label if_inbounds(this), if_outofbounds(this), done(this);\n+  Branch(IntPtrLessThan(index, values_length), &if_inbounds, &if_outofbounds);\n \n-  Label already_called(this, Label::kDeferred), resolve_promise(this);\n-  GotoIf(SmiLessThan(index, SmiConstant(Smi::kZero)), &already_called);\n-  StoreContextElementNoWriteBarrier(context, kPromiseAllResolveElementIndexSlot,\n-                                    SmiConstant(-1));\n+  BIND(&if_outofbounds);\n+  {\n+    // Check if we need to grow the backing store.\n+    Node* const new_length = IntPtrAdd(index, IntPtrConstant(1));\n+    Node* const elements_length =\n+        LoadAndUntagObjectField(elements, FixedArray::kLengthOffset);\n+    Label if_grow(this, Label::kDeferred), if_nogrow(this);\n+    Branch(IntPtrLessThan(index, elements_length), &if_nogrow, &if_grow);\n+\n+    BIND(&if_grow);\n+    {\n+      // We need to grow the backing store to fit the {index} as well.\n+      Node* const new_elements_length =\n+          IntPtrMin(CalculateNewElementsCapacity(new_length),\n+                    IntPtrConstant(PropertyArray::HashField::kMax + 1));\n+      CSA_ASSERT(this, IntPtrLessThan(index, new_elements_length));\n+      CSA_ASSERT(this, IntPtrLessThan(elements_length, new_elements_length));\n+      Node* const new_elements = AllocateFixedArray(\n+          PACKED_ELEMENTS, new_elements_length, INTPTR_PARAMETERS,\n+          AllocationFlag::kAllowLargeObjectAllocation);\n+      CopyFixedArrayElements(PACKED_ELEMENTS, elements, PACKED_ELEMENTS,\n+                             new_elements, elements_length,\n+                             new_elements_length);\n+      StoreFixedArrayElement(new_elements, index, value);\n+\n+      // Update backing store and \"length\" on {values_array}.\n+      StoreObjectField(values_array, JSArray::kElementsOffset, new_elements);\n+      StoreObjectFieldNoWriteBarrier(values_array, JSArray::kLengthOffset,\n+                                     SmiTag(new_length));\n+      Goto(&done);\n+    }\n+\n+    BIND(&if_nogrow);\n+    {\n+      // The {index} is within bounds of the {elements} backing store, so\n+      // just store the {value} and update the \"length\" of the {values_array}.\n+      StoreObjectFieldNoWriteBarrier(values_array, JSArray::kLengthOffset,\n+                                     SmiTag(new_length));\n+      StoreFixedArrayElement(elements, index, value);\n+      Goto(&done);\n+    }\n+  }\n \n-  // Set element in FixedArray\n-  Label runtime_set_element(this), did_set_element(this);\n-  GotoIfNot(TaggedIsPositiveSmi(index), &runtime_set_element);\n+  BIND(&if_inbounds);\n   {\n-    VARIABLE(var_elements, MachineRepresentation::kTagged,\n-             LoadElements(values_array));\n-    PossiblyGrowElementsCapacity(SMI_PARAMETERS, PACKED_ELEMENTS, values_array,\n-                                 index, &var_elements, SmiConstant(1),\n-                                 &runtime_set_element);\n-    StoreFixedArrayElement(var_elements.value(), index, value,\n-                           UPDATE_WRITE_BARRIER, 0, SMI_PARAMETERS);\n-\n-    // Update array length\n-    Label did_set_length(this);\n-    Node* const length = LoadJSArrayLength(values_array);\n-    GotoIfNot(TaggedIsPositiveSmi(length), &did_set_length);\n-    Node* const new_length = SmiAdd(index, SmiConstant(1));\n-    GotoIfNot(SmiLessThan(length, new_length), &did_set_length);\n-    StoreObjectFieldNoWriteBarrier(values_array, JSArray::kLengthOffset,\n-                                   new_length);\n-    // Assert that valuesArray.[[Length]] is less than or equal to the\n-    // elements backing-store length.e\n-    CSA_SLOW_ASSERT(\n-        this, SmiAboveOrEqual(LoadFixedArrayBaseLength(var_elements.value()),\n-                              new_length));\n-    Goto(&did_set_length);\n-    BIND(&did_set_length);\n+    // The {index} is in bounds of the {values_array},\n+    // just store the {value} and continue.\n+    StoreFixedArrayElement(elements, index, value);\n+    Goto(&done);\n   }\n-  Goto(&did_set_element);\n-  BIND(&runtime_set_element);\n-  // New-space filled up or index too large, set element via runtime\n-  CallRuntime(Runtime::kCreateDataProperty, context, values_array, index,\n-              value);\n-  Goto(&did_set_element);\n-  BIND(&did_set_element);\n-\n-  Node* const remaining_elements = LoadContextElement(\n-      context, kPromiseAllResolveElementRemainingElementsSlot);\n-  Node* const result = DecrementSmiCell(remaining_elements);\n-  GotoIf(SmiEqual(result, SmiConstant(0)), &resolve_promise);\n+\n+  BIND(&done);\n+  Node* remaining_elements_count =\n+      LoadContextElement(context, kPromiseAllResolveElementRemainingSlot);\n+  remaining_elements_count = SmiSub(remaining_elements_count, SmiConstant(1));\n+  StoreContextElement(context, kPromiseAllResolveElementRemainingSlot,\n+                      remaining_elements_count);\n+  GotoIf(SmiEqual(remaining_elements_count, SmiConstant(0)), &resolve_promise);\n   Return(UndefinedConstant());\n \n   BIND(&resolve_promise);\n@@ -1977,6 +2141,9 @@ TF_BUILTIN(PromiseAllResolveElementClosure, PromiseBuiltinsAssembler) {\n \n   BIND(&already_called);\n   Return(UndefinedConstant());\n+\n+  BIND(&unreachable);\n+  Unreachable();\n }\n \n // ES#sec-promise.race\n@@ -2043,15 +2210,9 @@ TF_BUILTIN(PromiseRace, PromiseBuiltinsAssembler) {\n                                        &reject_promise, &var_exception);\n \n       // Let nextPromise be ? Invoke(constructor, \"resolve\", « nextValue »).\n-      Node* const promise_resolve =\n-          GetProperty(context, receiver, factory()->resolve_string());\n-      GotoIfException(promise_resolve, &close_iterator, &var_exception);\n-\n       Node* const next_promise =\n-          CallJS(CodeFactory::Call(isolate(),\n-                                   ConvertReceiverMode::kNotNullOrUndefined),\n-                 context, promise_resolve, receiver, next_value);\n-      GotoIfException(next_promise, &close_iterator, &var_exception);\n+          InvokeResolve(native_context, receiver, next_value, &close_iterator,\n+                        &var_exception);\n \n       // Perform ? Invoke(nextPromise, \"then\", « resolveElement,\n       //                  resultCapability.[[Reject]] »)."
        },
        {
            "sha": "f21d86a141a28d7540abb76fbbba3382d9009642",
            "filename": "deps/v8/src/builtins/builtins-promise-gen.h",
            "status": "modified",
            "additions": 24,
            "deletions": 8,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -30,11 +30,8 @@ class PromiseBuiltinsAssembler : public CodeStubAssembler {\n \n  protected:\n   enum PromiseAllResolveElementContextSlots {\n-    // Index into the values array, or -1 if the callback was already called\n-    kPromiseAllResolveElementIndexSlot = Context::MIN_CONTEXT_SLOTS,\n-\n-    // Remaining elements count (mutable HeapNumber)\n-    kPromiseAllResolveElementRemainingElementsSlot,\n+    // Remaining elements count\n+    kPromiseAllResolveElementRemainingSlot = Context::MIN_CONTEXT_SLOTS,\n \n     // Promise capability from Promise.all\n     kPromiseAllResolveElementCapabilitySlot,\n@@ -105,6 +102,18 @@ class PromiseBuiltinsAssembler : public CodeStubAssembler {\n \n   Node* PromiseHasHandler(Node* promise);\n \n+  // Creates the context used by all Promise.all resolve element closures,\n+  // together with the values array. Since all closures for a single Promise.all\n+  // call use the same context, we need to store the indices for the individual\n+  // closures somewhere else (we put them into the identity hash field of the\n+  // closures), and we also need to have a separate marker for when the closure\n+  // was called already (we slap the native context onto the closure in that\n+  // case to mark it's done).\n+  Node* CreatePromiseAllResolveElementContext(Node* promise_capability,\n+                                              Node* native_context);\n+  Node* CreatePromiseAllResolveElementFunction(Node* context, Node* index,\n+                                               Node* native_context);\n+\n   Node* CreatePromiseResolvingFunctionsContext(Node* promise, Node* debug_event,\n                                                Node* native_context);\n \n@@ -126,6 +135,14 @@ class PromiseBuiltinsAssembler : public CodeStubAssembler {\n   Node* TriggerPromiseReactions(Node* context, Node* promise, Node* result,\n                                 PromiseReaction::Type type);\n \n+  // We can skip the \"resolve\" lookup on {constructor} if it's the (initial)\n+  // Promise constructor and the Promise.resolve() protector is intact, as\n+  // that guards the lookup path for the \"resolve\" property on the %Promise%\n+  // intrinsic object.\n+  void BranchIfPromiseResolveLookupChainIntact(Node* native_context,\n+                                               Node* constructor,\n+                                               Label* if_fast, Label* if_slow);\n+\n   // We can shortcut the SpeciesConstructor on {promise_map} if it's\n   // [[Prototype]] is the (initial)  Promise.prototype and the @@species\n   // protector is intact, as that guards the lookup path for the \"constructor\"\n@@ -142,6 +159,8 @@ class PromiseBuiltinsAssembler : public CodeStubAssembler {\n                                             Node* receiver_map, Label* if_fast,\n                                             Label* if_slow);\n \n+  Node* InvokeResolve(Node* native_context, Node* constructor, Node* value,\n+                      Label* if_exception, Variable* var_exception);\n   template <typename... TArgs>\n   Node* InvokeThen(Node* native_context, Node* receiver, TArgs... args);\n \n@@ -160,9 +179,6 @@ class PromiseBuiltinsAssembler : public CodeStubAssembler {\n                           const IteratorRecord& record, Label* if_exception,\n                           Variable* var_exception);\n \n-  Node* IncrementSmiCell(Node* cell, Label* if_overflow = nullptr);\n-  Node* DecrementSmiCell(Node* cell);\n-\n   void SetForwardingHandlerIfTrue(Node* context, Node* condition,\n                                   const NodeGenerator& object);\n   inline void SetForwardingHandlerIfTrue(Node* context, Node* condition,"
        },
        {
            "sha": "a4c208ac4e6900ca46fd91bdf7e633458ddd4ee6",
            "filename": "deps/v8/src/builtins/builtins-proxy-gen.cc",
            "status": "modified",
            "additions": 60,
            "deletions": 42,
            "changes": 102,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-proxy-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -13,12 +13,6 @@\n namespace v8 {\n namespace internal {\n \n-// ES6 section 26.2.1.1 Proxy ( target, handler ) for the [[Call]] case.\n-TF_BUILTIN(ProxyConstructor, CodeStubAssembler) {\n-  Node* context = Parameter(Descriptor::kContext);\n-  ThrowTypeError(context, MessageTemplate::kConstructorNotFunction, \"Proxy\");\n-}\n-\n void ProxiesCodeStubAssembler::GotoIfRevokedProxy(Node* object,\n                                                   Label* if_proxy_revoked) {\n   Label proxy_not_revoked(this);\n@@ -127,40 +121,6 @@ Node* ProxiesCodeStubAssembler::AllocateJSArrayForCodeStubArguments(\n   return array;\n }\n \n-// ES6 section 26.2.1.1 Proxy ( target, handler ) for the [[Construct]] case.\n-TF_BUILTIN(ProxyConstructor_ConstructStub, ProxiesCodeStubAssembler) {\n-  int const kTargetArg = 0;\n-  int const kHandlerArg = 1;\n-\n-  Node* argc =\n-      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n-  CodeStubArguments args(this, argc);\n-\n-  Node* target = args.GetOptionalArgumentValue(kTargetArg);\n-  Node* handler = args.GetOptionalArgumentValue(kHandlerArg);\n-  Node* context = Parameter(BuiltinDescriptor::kContext);\n-\n-  Label throw_proxy_non_object(this, Label::kDeferred),\n-      throw_proxy_handler_or_target_revoked(this, Label::kDeferred),\n-      return_create_proxy(this);\n-\n-  GotoIf(TaggedIsSmi(target), &throw_proxy_non_object);\n-  GotoIfNot(IsJSReceiver(target), &throw_proxy_non_object);\n-  GotoIfRevokedProxy(target, &throw_proxy_handler_or_target_revoked);\n-\n-  GotoIf(TaggedIsSmi(handler), &throw_proxy_non_object);\n-  GotoIfNot(IsJSReceiver(handler), &throw_proxy_non_object);\n-  GotoIfRevokedProxy(handler, &throw_proxy_handler_or_target_revoked);\n-\n-  args.PopAndReturn(AllocateProxy(target, handler, context));\n-\n-  BIND(&throw_proxy_non_object);\n-  ThrowTypeError(context, MessageTemplate::kProxyNonObject);\n-\n-  BIND(&throw_proxy_handler_or_target_revoked);\n-  ThrowTypeError(context, MessageTemplate::kProxyHandlerOrTargetRevoked);\n-}\n-\n Node* ProxiesCodeStubAssembler::CreateProxyRevokeFunctionContext(\n     Node* proxy, Node* native_context) {\n   Node* const context = Allocate(FixedArray::SizeFor(kProxyContextLength));\n@@ -185,6 +145,65 @@ Node* ProxiesCodeStubAssembler::AllocateProxyRevokeFunction(Node* proxy,\n                                            proxy_context);\n }\n \n+// ES #sec-proxy-constructor\n+TF_BUILTIN(ProxyConstructor, ProxiesCodeStubAssembler) {\n+  Node* context = Parameter(Descriptor::kContext);\n+\n+  // 1. If NewTarget is undefined, throw a TypeError exception.\n+  Node* new_target = Parameter(Descriptor::kNewTarget);\n+  Label throwtypeerror(this, Label::kDeferred), createproxy(this);\n+  Branch(IsUndefined(new_target), &throwtypeerror, &createproxy);\n+\n+  BIND(&throwtypeerror);\n+  {\n+    ThrowTypeError(context, MessageTemplate::kConstructorNotFunction, \"Proxy\");\n+  }\n+\n+  // 2. Return ? ProxyCreate(target, handler).\n+  BIND(&createproxy);\n+  {\n+    // https://tc39.github.io/ecma262/#sec-proxycreate\n+    Node* target = Parameter(Descriptor::kTarget);\n+    Node* handler = Parameter(Descriptor::kHandler);\n+\n+    // 1. If Type(target) is not Object, throw a TypeError exception.\n+    // 2. If target is a Proxy exotic object and target.[[ProxyHandler]] is\n+    //    null, throw a TypeError exception.\n+    // 3. If Type(handler) is not Object, throw a TypeError exception.\n+    // 4. If handler is a Proxy exotic object and handler.[[ProxyHandler]]\n+    //    is null, throw a TypeError exception.\n+    Label throw_proxy_non_object(this, Label::kDeferred),\n+        throw_proxy_handler_or_target_revoked(this, Label::kDeferred),\n+        return_create_proxy(this);\n+\n+    GotoIf(TaggedIsSmi(target), &throw_proxy_non_object);\n+    GotoIfNot(IsJSReceiver(target), &throw_proxy_non_object);\n+    GotoIfRevokedProxy(target, &throw_proxy_handler_or_target_revoked);\n+\n+    GotoIf(TaggedIsSmi(handler), &throw_proxy_non_object);\n+    GotoIfNot(IsJSReceiver(handler), &throw_proxy_non_object);\n+    GotoIfRevokedProxy(handler, &throw_proxy_handler_or_target_revoked);\n+\n+    // 5. Let P be a newly created object.\n+    // 6. Set P's essential internal methods (except for [[Call]] and\n+    //    [[Construct]]) to the definitions specified in 9.5.\n+    // 7. If IsCallable(target) is true, then\n+    //    a. Set P.[[Call]] as specified in 9.5.12.\n+    //    b. If IsConstructor(target) is true, then\n+    //       1. Set P.[[Construct]] as specified in 9.5.13.\n+    // 8. Set P.[[ProxyTarget]] to target.\n+    // 9. Set P.[[ProxyHandler]] to handler.\n+    // 10. Return P.\n+    Return(AllocateProxy(target, handler, context));\n+\n+    BIND(&throw_proxy_non_object);\n+    ThrowTypeError(context, MessageTemplate::kProxyNonObject);\n+\n+    BIND(&throw_proxy_handler_or_target_revoked);\n+    ThrowTypeError(context, MessageTemplate::kProxyHandlerOrTargetRevoked);\n+  }\n+}\n+\n TF_BUILTIN(ProxyRevocable, ProxiesCodeStubAssembler) {\n   Node* const target = Parameter(Descriptor::kTarget);\n   Node* const handler = Parameter(Descriptor::kHandler);\n@@ -439,8 +458,7 @@ TF_BUILTIN(ProxyHasProperty, ProxiesCodeStubAssembler) {\n   BIND(&trap_undefined);\n   {\n     // 7.a. Return ? target.[[HasProperty]](P).\n-    TailCallStub(Builtins::CallableFor(isolate(), Builtins::kHasProperty),\n-                 context, name, target);\n+    TailCallBuiltin(Builtins::kHasProperty, context, name, target);\n   }\n \n   BIND(&return_false);"
        },
        {
            "sha": "2cc354cb945dc241ee599cca6bc532f2e3e6bae5",
            "filename": "deps/v8/src/builtins/builtins-regexp-gen.cc",
            "status": "modified",
            "additions": 362,
            "deletions": 34,
            "changes": 396,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -11,7 +11,8 @@\n #include \"src/code-factory.h\"\n #include \"src/code-stub-assembler.h\"\n #include \"src/counters.h\"\n-#include \"src/factory-inl.h\"\n+#include \"src/heap/factory-inl.h\"\n+#include \"src/objects/js-regexp-string-iterator.h\"\n #include \"src/objects/js-regexp.h\"\n #include \"src/objects/regexp-match-info.h\"\n #include \"src/regexp/regexp-macro-assembler.h\"\n@@ -20,13 +21,15 @@ namespace v8 {\n namespace internal {\n \n using compiler::Node;\n+template <class T>\n+using TNode = compiler::TNode<T>;\n \n // -----------------------------------------------------------------------------\n // ES6 section 21.2 RegExp Objects\n \n Node* RegExpBuiltinsAssembler::AllocateRegExpResult(Node* context, Node* length,\n                                                     Node* index, Node* input) {\n-  CSA_ASSERT(this, IsFixedArray(context));\n+  CSA_ASSERT(this, IsContext(context));\n   CSA_ASSERT(this, TaggedIsSmi(index));\n   CSA_ASSERT(this, TaggedIsSmi(length));\n   CSA_ASSERT(this, IsString(input));\n@@ -88,6 +91,28 @@ Node* RegExpBuiltinsAssembler::AllocateRegExpResult(Node* context, Node* length,\n   return result;\n }\n \n+TNode<Object> RegExpBuiltinsAssembler::RegExpCreate(\n+    TNode<Context> context, TNode<Context> native_context,\n+    TNode<Object> maybe_string, TNode<String> flags) {\n+  TNode<JSFunction> regexp_function =\n+      CAST(LoadContextElement(native_context, Context::REGEXP_FUNCTION_INDEX));\n+  TNode<Map> initial_map = CAST(LoadObjectField(\n+      regexp_function, JSFunction::kPrototypeOrInitialMapOffset));\n+  return RegExpCreate(context, initial_map, maybe_string, flags);\n+}\n+\n+TNode<Object> RegExpBuiltinsAssembler::RegExpCreate(TNode<Context> context,\n+                                                    TNode<Map> initial_map,\n+                                                    TNode<Object> maybe_string,\n+                                                    TNode<String> flags) {\n+  TNode<String> pattern = Select<String>(\n+      IsUndefined(maybe_string), [=] { return EmptyStringConstant(); },\n+      [=] { return ToString_Inline(context, maybe_string); });\n+  TNode<Object> regexp = CAST(AllocateJSObjectFromMap(initial_map));\n+  return CallRuntime(Runtime::kRegExpInitializeAndCompile, context, regexp,\n+                     pattern, flags);\n+}\n+\n Node* RegExpBuiltinsAssembler::FastLoadLastIndex(Node* regexp) {\n   // Load the in-object field.\n   static const int field_offset =\n@@ -142,8 +167,8 @@ Node* RegExpBuiltinsAssembler::ConstructNewResultFromMatchInfo(\n \n   Label named_captures(this), out(this);\n \n-  TNode<IntPtrT> num_indices = SmiUntag(LoadFixedArrayElement(\n-      match_info, RegExpMatchInfo::kNumberOfCapturesIndex));\n+  TNode<IntPtrT> num_indices = SmiUntag(CAST(LoadFixedArrayElement(\n+      match_info, RegExpMatchInfo::kNumberOfCapturesIndex)));\n   Node* const num_results = SmiTag(WordShr(num_indices, 1));\n   Node* const start =\n       LoadFixedArrayElement(match_info, RegExpMatchInfo::kFirstCaptureIndex);\n@@ -1185,16 +1210,14 @@ Node* RegExpBuiltinsAssembler::RegExpInitialize(Node* const context,\n   CSA_ASSERT(this, IsJSRegExp(regexp));\n \n   // Normalize pattern.\n-  Node* const pattern = Select<Object>(\n+  TNode<Object> const pattern = Select<Object>(\n       IsUndefined(maybe_pattern), [=] { return EmptyStringConstant(); },\n-      [=] { return ToString_Inline(context, maybe_pattern); },\n-      MachineRepresentation::kTagged);\n+      [=] { return ToString_Inline(context, maybe_pattern); });\n \n   // Normalize flags.\n-  Node* const flags = Select<Object>(\n+  TNode<Object> const flags = Select<Object>(\n       IsUndefined(maybe_flags), [=] { return EmptyStringConstant(); },\n-      [=] { return ToString_Inline(context, maybe_flags); },\n-      MachineRepresentation::kTagged);\n+      [=] { return ToString_Inline(context, maybe_flags); });\n \n   // Initialize.\n \n@@ -1843,30 +1866,9 @@ void RegExpBuiltinsAssembler::RegExpPrototypeMatchBody(Node* const context,\n         Branch(IsNull(result), &if_didnotmatch, &load_match);\n \n         BIND(&load_match);\n-        {\n-          Label fast_result(this), slow_result(this);\n-          BranchIfFastRegExpResult(context, result, &fast_result, &slow_result);\n-\n-          BIND(&fast_result);\n-          {\n-            Node* const result_fixed_array = LoadElements(result);\n-            Node* const match = LoadFixedArrayElement(result_fixed_array, 0);\n-\n-            // The match is guaranteed to be a string on the fast path.\n-            CSA_ASSERT(this, IsString(match));\n-\n-            var_match.Bind(match);\n-            Goto(&if_didmatch);\n-          }\n-\n-          BIND(&slow_result);\n-          {\n-            // TODO(ishell): Use GetElement stub once it's available.\n-            Node* const match = GetProperty(context, result, smi_zero);\n-            var_match.Bind(ToString_Inline(context, match));\n-            Goto(&if_didmatch);\n-          }\n-        }\n+        Node* const match = GetProperty(context, result, smi_zero);\n+        var_match.Bind(ToString_Inline(context, match));\n+        Goto(&if_didmatch);\n       }\n \n       BIND(&if_didnotmatch);\n@@ -1951,6 +1953,163 @@ TF_BUILTIN(RegExpPrototypeMatch, RegExpBuiltinsAssembler) {\n   RegExpPrototypeMatchBody(context, receiver, string, false);\n }\n \n+TNode<Object> RegExpBuiltinsAssembler::MatchAllIterator(\n+    TNode<Context> context, TNode<Context> native_context,\n+    TNode<Object> maybe_regexp, TNode<Object> maybe_string,\n+    char const* method_name) {\n+  Label create_iterator(this), if_regexp(this), if_not_regexp(this),\n+      throw_type_error(this, Label::kDeferred);\n+\n+  // 1. Let S be ? ToString(O).\n+  TNode<String> string = ToString_Inline(context, maybe_string);\n+  TVARIABLE(Object, var_matcher);\n+  TVARIABLE(Int32T, var_global);\n+  TVARIABLE(Int32T, var_unicode);\n+\n+  // 2. If ? IsRegExp(R) is true, then\n+  Branch(IsRegExp(context, maybe_regexp), &if_regexp, &if_not_regexp);\n+  BIND(&if_regexp);\n+  {\n+    // a. Let C be ? SpeciesConstructor(R, %RegExp%).\n+    TNode<Object> regexp_fun =\n+        LoadContextElement(native_context, Context::REGEXP_FUNCTION_INDEX);\n+    TNode<Object> species_constructor =\n+        SpeciesConstructor(native_context, maybe_regexp, regexp_fun);\n+\n+    // b. Let flags be ? ToString(? Get(R, \"flags\")).\n+    // TODO(pwong): Add fast path to avoid property lookup.\n+    TNode<Object> flags = GetProperty(context, maybe_regexp,\n+                                      isolate()->factory()->flags_string());\n+    TNode<Object> flags_string = ToString_Inline(context, flags);\n+\n+    // c. Let matcher be ? Construct(C, « R, flags »).\n+    var_matcher =\n+        CAST(ConstructJS(CodeFactory::Construct(isolate()), context,\n+                         species_constructor, maybe_regexp, flags_string));\n+\n+    // d. Let global be ? ToBoolean(? Get(matcher, \"global\")).\n+    // TODO(pwong): Add fast path for loading flags.\n+    var_global = UncheckedCast<Int32T>(\n+        SlowFlagGetter(context, var_matcher.value(), JSRegExp::kGlobal));\n+\n+    // e. Let fullUnicode be ? ToBoolean(? Get(matcher, \"unicode\").\n+    // TODO(pwong): Add fast path for loading flags.\n+    var_unicode = UncheckedCast<Int32T>(\n+        SlowFlagGetter(context, var_matcher.value(), JSRegExp::kUnicode));\n+\n+    // f. Let lastIndex be ? ToLength(? Get(R, \"lastIndex\")).\n+    // TODO(pwong): Add fast path for loading last index.\n+    TNode<Number> last_index = UncheckedCast<Number>(\n+        ToLength_Inline(context, SlowLoadLastIndex(context, maybe_regexp)));\n+\n+    // g. Perform ? Set(matcher, \"lastIndex\", lastIndex, true).\n+    // TODO(pwong): Add fast path for storing last index.\n+    SlowStoreLastIndex(context, var_matcher.value(), last_index);\n+\n+    Goto(&create_iterator);\n+  }\n+  // 3. Else,\n+  BIND(&if_not_regexp);\n+  {\n+    // a. Let flags be \"g\".\n+    // b. Let matcher be ? RegExpCreate(R, flags).\n+    var_matcher = RegExpCreate(context, native_context, maybe_regexp,\n+                               StringConstant(\"g\"));\n+\n+    // c. If ? IsRegExp(matcher) is not true, throw a TypeError exception.\n+    GotoIfNot(IsRegExp(context, var_matcher.value()), &throw_type_error);\n+\n+    // d. Let global be true.\n+    var_global = Int32Constant(1);\n+\n+    // e. Let fullUnicode be false.\n+    var_unicode = Int32Constant(0);\n+\n+    // f. If ? Get(matcher, \"lastIndex\") is not 0, throw a TypeError exception.\n+    TNode<Object> last_index =\n+        CAST(LoadLastIndex(context, var_matcher.value(), false));\n+    Branch(SmiEqual(SmiConstant(0), last_index), &create_iterator,\n+           &throw_type_error);\n+  }\n+  BIND(&throw_type_error);\n+  {\n+    ThrowTypeError(context, MessageTemplate::kIncompatibleMethodReceiver,\n+                   StringConstant(method_name), maybe_regexp);\n+  }\n+  // 4. Return ! CreateRegExpStringIterator(matcher, S, global, fullUnicode).\n+  // CreateRegExpStringIterator ( R, S, global, fullUnicode )\n+  BIND(&create_iterator);\n+  {\n+    TNode<Map> map = CAST(LoadContextElement(\n+        native_context,\n+        Context::INITIAL_REGEXP_STRING_ITERATOR_PROTOTYPE_MAP_INDEX));\n+\n+    // 4. Let iterator be ObjectCreate(%RegExpStringIteratorPrototype%, «\n+    // [[IteratingRegExp]], [[IteratedString]], [[Global]], [[Unicode]],\n+    // [[Done]] »).\n+    TNode<Object> iterator = CAST(Allocate(JSRegExpStringIterator::kSize));\n+    StoreMapNoWriteBarrier(iterator, map);\n+    StoreObjectFieldRoot(iterator,\n+                         JSRegExpStringIterator::kPropertiesOrHashOffset,\n+                         Heap::kEmptyFixedArrayRootIndex);\n+    StoreObjectFieldRoot(iterator, JSRegExpStringIterator::kElementsOffset,\n+                         Heap::kEmptyFixedArrayRootIndex);\n+\n+    // 5. Set iterator.[[IteratingRegExp]] to R.\n+    StoreObjectFieldNoWriteBarrier(\n+        iterator, JSRegExpStringIterator::kIteratingRegExpOffset,\n+        var_matcher.value());\n+\n+    // 6. Set iterator.[[IteratedString]] to S.\n+    StoreObjectFieldNoWriteBarrier(\n+        iterator, JSRegExpStringIterator::kIteratedStringOffset, string);\n+\n+#ifdef DEBUG\n+    // Verify global and unicode can be bitwise shifted without masking.\n+    TNode<Int32T> zero = Int32Constant(0);\n+    TNode<Int32T> one = Int32Constant(1);\n+    CSA_ASSERT(this, Word32Or(Word32Equal(var_global.value(), zero),\n+                              Word32Equal(var_global.value(), one)));\n+    CSA_ASSERT(this, Word32Or(Word32Equal(var_unicode.value(), zero),\n+                              Word32Equal(var_unicode.value(), one)));\n+#endif  // DEBUG\n+\n+    // 7. Set iterator.[[Global]] to global.\n+    // 8. Set iterator.[[Unicode]] to fullUnicode.\n+    // 9. Set iterator.[[Done]] to false.\n+    TNode<Word32T> global_flag = Word32Shl(\n+        var_global.value(), Int32Constant(JSRegExpStringIterator::kGlobalBit));\n+    TNode<Word32T> unicode_flag =\n+        Word32Shl(var_unicode.value(),\n+                  Int32Constant(JSRegExpStringIterator::kUnicodeBit));\n+    TNode<Word32T> iterator_flags = Word32Or(global_flag, unicode_flag);\n+    StoreObjectFieldNoWriteBarrier(iterator,\n+                                   JSRegExpStringIterator::kFlagsOffset,\n+                                   SmiFromInt32(Signed(iterator_flags)));\n+\n+    return iterator;\n+  }\n+}\n+\n+// https://tc39.github.io/proposal-string-matchall/\n+// RegExp.prototype [ @@matchAll ] ( string )\n+TF_BUILTIN(RegExpPrototypeMatchAll, RegExpBuiltinsAssembler) {\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Context> native_context = LoadNativeContext(context);\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> string = CAST(Parameter(Descriptor::kString));\n+\n+  // 1. Let R be the this value.\n+  // 2. If Type(R) is not Object, throw a TypeError exception.\n+  ThrowIfNotJSReceiver(context, receiver,\n+                       MessageTemplate::kIncompatibleMethodReceiver,\n+                       \"RegExp.prototype.@@matchAll\");\n+\n+  // 3. Return ? MatchAllIterator(R, string).\n+  Return(MatchAllIterator(context, native_context, receiver, string,\n+                          \"RegExp.prototype.@@matchAll\"));\n+}\n+\n // Helper that skips a few initial checks. and assumes...\n // 1) receiver is a \"fast\" RegExp\n // 2) pattern is a string\n@@ -2888,5 +3047,174 @@ TF_BUILTIN(RegExpInternalMatch, RegExpBuiltinsAssembler) {\n   }\n }\n \n+class RegExpStringIteratorAssembler : public RegExpBuiltinsAssembler {\n+ public:\n+  explicit RegExpStringIteratorAssembler(compiler::CodeAssemblerState* state)\n+      : RegExpBuiltinsAssembler(state) {}\n+\n+ protected:\n+  TNode<Smi> LoadFlags(TNode<HeapObject> iterator) {\n+    return LoadObjectField<Smi>(iterator, JSRegExpStringIterator::kFlagsOffset);\n+  }\n+\n+  TNode<BoolT> HasDoneFlag(TNode<Smi> flags) {\n+    return UncheckedCast<BoolT>(\n+        IsSetSmi(flags, 1 << JSRegExpStringIterator::kDoneBit));\n+  }\n+\n+  TNode<BoolT> HasGlobalFlag(TNode<Smi> flags) {\n+    return UncheckedCast<BoolT>(\n+        IsSetSmi(flags, 1 << JSRegExpStringIterator::kGlobalBit));\n+  }\n+\n+  TNode<BoolT> HasUnicodeFlag(TNode<Smi> flags) {\n+    return UncheckedCast<BoolT>(\n+        IsSetSmi(flags, 1 << JSRegExpStringIterator::kUnicodeBit));\n+  }\n+\n+  void SetDoneFlag(TNode<HeapObject> iterator, TNode<Smi> flags) {\n+    TNode<Smi> new_flags =\n+        SmiOr(flags, SmiConstant(1 << JSRegExpStringIterator::kDoneBit));\n+    StoreObjectFieldNoWriteBarrier(\n+        iterator, JSRegExpStringIterator::kFlagsOffset, new_flags);\n+  }\n+};\n+\n+// https://tc39.github.io/proposal-string-matchall/\n+// %RegExpStringIteratorPrototype%.next ( )\n+TF_BUILTIN(RegExpStringIteratorPrototypeNext, RegExpStringIteratorAssembler) {\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> maybe_receiver = CAST(Parameter(Descriptor::kReceiver));\n+\n+  Label if_match(this), if_no_match(this, Label::kDeferred),\n+      return_empty_done_result(this, Label::kDeferred),\n+      throw_bad_receiver(this, Label::kDeferred);\n+\n+  // 1. Let O be the this value.\n+  // 2. If Type(O) is not Object, throw a TypeError exception.\n+  GotoIf(TaggedIsSmi(maybe_receiver), &throw_bad_receiver);\n+  GotoIfNot(IsJSReceiver(maybe_receiver), &throw_bad_receiver);\n+  TNode<HeapObject> receiver = CAST(maybe_receiver);\n+\n+  // 3. If O does not have all of the internal slots of a RegExp String Iterator\n+  // Object Instance (see 5.3), throw a TypeError exception.\n+  GotoIfNot(InstanceTypeEqual(LoadInstanceType(receiver),\n+                              JS_REGEXP_STRING_ITERATOR_TYPE),\n+            &throw_bad_receiver);\n+\n+  // 4. If O.[[Done]] is true, then\n+  //   a. Return ! CreateIterResultObject(undefined, true).\n+  TNode<Smi> flags = LoadFlags(receiver);\n+  GotoIf(HasDoneFlag(flags), &return_empty_done_result);\n+\n+  // 5. Let R be O.[[IteratingRegExp]].\n+  TNode<Object> iterating_regexp =\n+      LoadObjectField(receiver, JSRegExpStringIterator::kIteratingRegExpOffset);\n+\n+  // 6. Let S be O.[[IteratedString]].\n+  TNode<String> iterating_string = CAST(\n+      LoadObjectField(receiver, JSRegExpStringIterator::kIteratedStringOffset));\n+\n+  // 7. Let global be O.[[Global]].\n+  // See if_match.\n+\n+  // 8. Let fullUnicode be O.[[Unicode]].\n+  // See if_global.\n+\n+  // 9. Let match be ? RegExpExec(R, S).\n+  TVARIABLE(Object, var_match);\n+  {\n+    Label if_fast(this), if_slow(this), next(this);\n+    BranchIfFastRegExp(context, iterating_regexp, &if_fast, &if_slow);\n+    BIND(&if_fast);\n+    {\n+      var_match = CAST(RegExpPrototypeExecBody(context, iterating_regexp,\n+                                               iterating_string, true));\n+      Goto(&next);\n+    }\n+    BIND(&if_slow);\n+    {\n+      var_match = CAST(RegExpExec(context, iterating_regexp, iterating_string));\n+      Goto(&next);\n+    }\n+    BIND(&next);\n+  }\n+\n+  // 10. If match is null, then\n+  Branch(IsNull(var_match.value()), &if_no_match, &if_match);\n+  BIND(&if_no_match);\n+  {\n+    // a. Set O.[[Done]] to true.\n+    SetDoneFlag(receiver, flags);\n+\n+    // b. Return ! CreateIterResultObject(undefined, true).\n+    Goto(&return_empty_done_result);\n+  }\n+  // 11. Else,\n+  BIND(&if_match);\n+  {\n+    Label if_global(this), if_not_global(this, Label::kDeferred);\n+\n+    // a. If global is true,\n+    Branch(HasGlobalFlag(flags), &if_global, &if_not_global);\n+    BIND(&if_global);\n+    {\n+      // i. Let matchStr be ? ToString(? Get(match, \"0\")).\n+      // TODO(pwong): Add fast path for fast regexp results. See\n+      // BranchIfFastRegExpResult().\n+      TNode<Object> match_str = ToString_Inline(\n+          context, GetProperty(context, var_match.value(),\n+                               isolate()->factory()->zero_string()));\n+\n+      // ii. If matchStr is the empty string,\n+      {\n+        Label next(this);\n+        GotoIfNot(IsEmptyString(match_str), &next);\n+\n+        // 1. Let thisIndex be ? ToLength(? Get(R, \"lastIndex\")).\n+        // TODO(pwong): Add fast path for loading last index.\n+        TNode<Object> last_index =\n+            CAST(SlowLoadLastIndex(context, iterating_regexp));\n+        TNode<Number> this_index = ToLength_Inline(context, last_index);\n+\n+        // 2. Let nextIndex be ! AdvanceStringIndex(S, thisIndex, fullUnicode).\n+        TNode<Object> next_index = CAST(AdvanceStringIndex(\n+            iterating_string, this_index, HasUnicodeFlag(flags), false));\n+\n+        // 3. Perform ? Set(R, \"lastIndex\", nextIndex, true).\n+        // TODO(pwong): Add fast path for storing last index.\n+        SlowStoreLastIndex(context, iterating_regexp, next_index);\n+\n+        Goto(&next);\n+        BIND(&next);\n+      }\n+\n+      // iii. Return ! CreateIterResultObject(match, false).\n+      Return(AllocateJSIteratorResult(context, var_match.value(),\n+                                      FalseConstant()));\n+    }\n+    // b. Else,\n+    BIND(&if_not_global);\n+    {\n+      // i. Set O.[[Done]] to true.\n+      SetDoneFlag(receiver, flags);\n+\n+      // ii. Return ! CreateIterResultObject(match, false).\n+      Return(AllocateJSIteratorResult(context, var_match.value(),\n+                                      FalseConstant()));\n+    }\n+  }\n+  BIND(&return_empty_done_result);\n+  Return(\n+      AllocateJSIteratorResult(context, UndefinedConstant(), TrueConstant()));\n+\n+  BIND(&throw_bad_receiver);\n+  {\n+    ThrowTypeError(context, MessageTemplate::kIncompatibleMethodReceiver,\n+                   StringConstant(\"%RegExpStringIterator%.prototype.next\"),\n+                   receiver);\n+  }\n+}\n+\n }  // namespace internal\n }  // namespace v8"
        },
        {
            "sha": "2146da5c0e66336b188e40407bb8209c877d5a5d",
            "filename": "deps/v8/src/builtins/builtins-regexp-gen.h",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-regexp-gen.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -19,6 +19,19 @@ class RegExpBuiltinsAssembler : public CodeStubAssembler {\n                           Node* const map, Label* const if_isunmodified,\n                           Label* const if_ismodified);\n \n+  // Create and initialize a RegExp object.\n+  TNode<Object> RegExpCreate(TNode<Context> context,\n+                             TNode<Context> native_context,\n+                             TNode<Object> regexp_string, TNode<String> flags);\n+\n+  TNode<Object> RegExpCreate(TNode<Context> context, TNode<Map> initial_map,\n+                             TNode<Object> regexp_string, TNode<String> flags);\n+\n+  TNode<Object> MatchAllIterator(TNode<Context> context,\n+                                 TNode<Context> native_context,\n+                                 TNode<Object> regexp, TNode<Object> string,\n+                                 char const* method_name);\n+\n  protected:\n   // Allocate a RegExpResult with the given length (the number of captures,\n   // including the match itself), index (the index where the match starts),"
        },
        {
            "sha": "a847a5d892cd66f600a7e9cb669e624f9c00ab44",
            "filename": "deps/v8/src/builtins/builtins-sharedarraybuffer.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-sharedarraybuffer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -10,9 +10,9 @@\n #include \"src/code-factory.h\"\n #include \"src/conversions-inl.h\"\n #include \"src/counters.h\"\n-#include \"src/factory.h\"\n #include \"src/futex-emulation.h\"\n #include \"src/globals.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/objects-inl.h\"\n \n namespace v8 {\n@@ -34,7 +34,7 @@ BUILTIN(AtomicsIsLockFree) {\n }\n \n // ES #sec-validatesharedintegertypedarray\n-MUST_USE_RESULT MaybeHandle<JSTypedArray> ValidateSharedIntegerTypedArray(\n+V8_WARN_UNUSED_RESULT MaybeHandle<JSTypedArray> ValidateSharedIntegerTypedArray(\n     Isolate* isolate, Handle<Object> object, bool only_int32 = false) {\n   if (object->IsJSTypedArray()) {\n     Handle<JSTypedArray> typed_array = Handle<JSTypedArray>::cast(object);\n@@ -60,7 +60,7 @@ MUST_USE_RESULT MaybeHandle<JSTypedArray> ValidateSharedIntegerTypedArray(\n \n // ES #sec-validateatomicaccess\n // ValidateAtomicAccess( typedArray, requestIndex )\n-MUST_USE_RESULT Maybe<size_t> ValidateAtomicAccess(\n+V8_WARN_UNUSED_RESULT Maybe<size_t> ValidateAtomicAccess(\n     Isolate* isolate, Handle<JSTypedArray> typed_array,\n     Handle<Object> request_index) {\n   Handle<Object> access_index_obj;"
        },
        {
            "sha": "bc9578514a28e5362bba08b0d080df2bb1bf59f8",
            "filename": "deps/v8/src/builtins/builtins-string-gen.cc",
            "status": "modified",
            "additions": 83,
            "deletions": 63,
            "changes": 146,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -8,7 +8,7 @@\n #include \"src/builtins/builtins-utils-gen.h\"\n #include \"src/builtins/builtins.h\"\n #include \"src/code-factory.h\"\n-#include \"src/factory-inl.h\"\n+#include \"src/heap/factory-inl.h\"\n #include \"src/objects.h\"\n \n namespace v8 {\n@@ -525,7 +525,7 @@ TF_BUILTIN(StringCharAt, StringBuiltinsAssembler) {\n   TNode<Int32T> code = StringCharCodeAt(receiver, position);\n \n   // And return the single character string with only that {code}\n-  TNode<String> result = StringFromCharCode(code);\n+  TNode<String> result = StringFromSingleCharCode(code);\n   Return(result);\n }\n \n@@ -586,7 +586,7 @@ TF_BUILTIN(StringFromCharCode, CodeStubAssembler) {\n     Node* code32 = TruncateTaggedToWord32(context, code);\n     TNode<Int32T> code16 =\n         Signed(Word32And(code32, Int32Constant(String::kMaxUtf16CodeUnit)));\n-    Node* result = StringFromCharCode(code16);\n+    Node* result = StringFromSingleCharCode(code16);\n     arguments.PopAndReturn(result);\n   }\n \n@@ -682,7 +682,7 @@ TF_BUILTIN(StringPrototypeCharAt, StringBuiltinsAssembler) {\n                    [this](TNode<String> string, TNode<IntPtrT> length,\n                           TNode<IntPtrT> index) {\n                      TNode<Int32T> code = StringCharCodeAt(string, index);\n-                     return StringFromCharCode(code);\n+                     return StringFromSingleCharCode(code);\n                    });\n }\n \n@@ -1024,7 +1024,7 @@ void StringBuiltinsAssembler::RequireObjectCoercible(Node* const context,\n void StringBuiltinsAssembler::MaybeCallFunctionAtSymbol(\n     Node* const context, Node* const object, Node* const maybe_string,\n     Handle<Symbol> symbol, const NodeFunction0& regexp_call,\n-    const NodeFunction1& generic_call, CodeStubArguments* args) {\n+    const NodeFunction1& generic_call) {\n   Label out(this);\n \n   // Smis definitely don't have an attached symbol.\n@@ -1069,12 +1069,7 @@ void StringBuiltinsAssembler::MaybeCallFunctionAtSymbol(\n \n     BIND(&stub_call);\n     // TODO(jgruber): Add a no-JS scope once it exists.\n-    Node* const result = regexp_call();\n-    if (args == nullptr) {\n-      Return(result);\n-    } else {\n-      args->PopAndReturn(result);\n-    }\n+    regexp_call();\n \n     BIND(&slow_lookup);\n   }\n@@ -1094,12 +1089,7 @@ void StringBuiltinsAssembler::MaybeCallFunctionAtSymbol(\n   GotoIf(IsNull(maybe_func), &out);\n \n   // Attempt to call the function.\n-  Node* const result = generic_call(maybe_func);\n-  if (args == nullptr) {\n-    Return(result);\n-  } else {\n-    args->PopAndReturn(result);\n-  }\n+  generic_call(maybe_func);\n \n   BIND(&out);\n }\n@@ -1294,12 +1284,12 @@ TF_BUILTIN(StringPrototypeReplace, StringBuiltinsAssembler) {\n   MaybeCallFunctionAtSymbol(\n       context, search, receiver, isolate()->factory()->replace_symbol(),\n       [=]() {\n-        return CallBuiltin(Builtins::kRegExpReplace, context, search, receiver,\n-                           replace);\n+        Return(CallBuiltin(Builtins::kRegExpReplace, context, search, receiver,\n+                           replace));\n       },\n       [=](Node* fn) {\n         Callable call_callable = CodeFactory::Call(isolate());\n-        return CallJS(call_callable, context, fn, search, receiver, replace);\n+        Return(CallJS(call_callable, context, fn, search, receiver, replace));\n       });\n \n   // Convert {receiver} and {search} to strings.\n@@ -1439,8 +1429,9 @@ class StringMatchSearchAssembler : public StringBuiltinsAssembler {\n  protected:\n   enum Variant { kMatch, kSearch };\n \n-  void Generate(Variant variant, const char* method_name, Node* const receiver,\n-                Node* maybe_regexp, Node* const context) {\n+  void Generate(Variant variant, const char* method_name,\n+                TNode<Object> receiver, TNode<Object> maybe_regexp,\n+                TNode<Context> context) {\n     Label call_regexp_match_search(this);\n \n     Builtins::Name builtin;\n@@ -1457,33 +1448,24 @@ class StringMatchSearchAssembler : public StringBuiltinsAssembler {\n \n     MaybeCallFunctionAtSymbol(\n         context, maybe_regexp, receiver, symbol,\n-        [=] { return CallBuiltin(builtin, context, maybe_regexp, receiver); },\n+        [=] { Return(CallBuiltin(builtin, context, maybe_regexp, receiver)); },\n         [=](Node* fn) {\n           Callable call_callable = CodeFactory::Call(isolate());\n-          return CallJS(call_callable, context, fn, maybe_regexp, receiver);\n+          Return(CallJS(call_callable, context, fn, maybe_regexp, receiver));\n         });\n \n     // maybe_regexp is not a RegExp nor has [@@match / @@search] property.\n     {\n       RegExpBuiltinsAssembler regexp_asm(state());\n \n-      Node* const receiver_string = ToString_Inline(context, receiver);\n-      Node* const pattern = Select(\n-          IsUndefined(maybe_regexp), [=] { return EmptyStringConstant(); },\n-          [=] { return ToString_Inline(context, maybe_regexp); },\n-          MachineRepresentation::kTagged);\n-\n-      // Create RegExp\n-      // TODO(pwong): This could be factored out as a helper (RegExpCreate) that\n-      // also does the \"is fast\" checks.\n-      Node* const native_context = LoadNativeContext(context);\n-      Node* const regexp_function =\n-          LoadContextElement(native_context, Context::REGEXP_FUNCTION_INDEX);\n-      Node* const initial_map = LoadObjectField(\n-          regexp_function, JSFunction::kPrototypeOrInitialMapOffset);\n-      Node* const regexp = CallRuntime(\n-          Runtime::kRegExpInitializeAndCompile, context,\n-          AllocateJSObjectFromMap(initial_map), pattern, EmptyStringConstant());\n+      TNode<String> receiver_string = ToString_Inline(context, receiver);\n+      TNode<Context> native_context = LoadNativeContext(context);\n+      TNode<HeapObject> regexp_function = CAST(\n+          LoadContextElement(native_context, Context::REGEXP_FUNCTION_INDEX));\n+      TNode<Map> initial_map = CAST(LoadObjectField(\n+          regexp_function, JSFunction::kPrototypeOrInitialMapOffset));\n+      TNode<Object> regexp = regexp_asm.RegExpCreate(\n+          context, initial_map, maybe_regexp, EmptyStringConstant());\n \n       Label fast_path(this), slow_path(this);\n       regexp_asm.BranchIfFastRegExp(context, regexp, initial_map, &fast_path,\n@@ -1494,7 +1476,7 @@ class StringMatchSearchAssembler : public StringBuiltinsAssembler {\n \n       BIND(&slow_path);\n       {\n-        Node* const maybe_func = GetProperty(context, regexp, symbol);\n+        TNode<Object> maybe_func = GetProperty(context, regexp, symbol);\n         Callable call_callable = CodeFactory::Call(isolate());\n         Return(CallJS(call_callable, context, maybe_func, regexp,\n                       receiver_string));\n@@ -1505,13 +1487,52 @@ class StringMatchSearchAssembler : public StringBuiltinsAssembler {\n \n // ES6 #sec-string.prototype.match\n TF_BUILTIN(StringPrototypeMatch, StringMatchSearchAssembler) {\n-  Node* const receiver = Parameter(Descriptor::kReceiver);\n-  Node* const maybe_regexp = Parameter(Descriptor::kRegexp);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> maybe_regexp = CAST(Parameter(Descriptor::kRegexp));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n \n   Generate(kMatch, \"String.prototype.match\", receiver, maybe_regexp, context);\n }\n \n+// ES #sec-string.prototype.matchAll\n+TF_BUILTIN(StringPrototypeMatchAll, StringBuiltinsAssembler) {\n+  char const* method_name = \"String.prototype.matchAll\";\n+\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<Object> maybe_regexp = CAST(Parameter(Descriptor::kRegexp));\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Context> native_context = LoadNativeContext(context);\n+\n+  // 1. Let O be ? RequireObjectCoercible(this value).\n+  RequireObjectCoercible(context, receiver, method_name);\n+\n+  // 2. If regexp is neither undefined nor null, then\n+  Label return_match_all_iterator(this);\n+  GotoIf(IsNullOrUndefined(maybe_regexp), &return_match_all_iterator);\n+  {\n+    // a. Let matcher be ? GetMethod(regexp, @@matchAll).\n+    // b. If matcher is not undefined, then\n+    //   i. Return ? Call(matcher, regexp, « O »).\n+    auto if_regexp_call = [&] { Goto(&return_match_all_iterator); };\n+    auto if_generic_call = [=](Node* fn) {\n+      Callable call_callable = CodeFactory::Call(isolate());\n+      Return(CallJS(call_callable, context, fn, maybe_regexp, receiver));\n+    };\n+    MaybeCallFunctionAtSymbol(context, maybe_regexp, receiver,\n+                              isolate()->factory()->match_all_symbol(),\n+                              if_regexp_call, if_generic_call);\n+    Goto(&return_match_all_iterator);\n+  }\n+  BIND(&return_match_all_iterator);\n+  {\n+    // 3. Return ? MatchAllIterator(regexp, O).\n+    RegExpBuiltinsAssembler regexp_asm(state());\n+    TNode<Object> iterator = regexp_asm.MatchAllIterator(\n+        context, native_context, maybe_regexp, receiver, method_name);\n+    Return(iterator);\n+  }\n+}\n+\n class StringPadAssembler : public StringBuiltinsAssembler {\n  public:\n   explicit StringPadAssembler(compiler::CodeAssemblerState* state)\n@@ -1640,9 +1661,9 @@ TF_BUILTIN(StringPrototypePadStart, StringPadAssembler) {\n \n // ES6 #sec-string.prototype.search\n TF_BUILTIN(StringPrototypeSearch, StringMatchSearchAssembler) {\n-  Node* const receiver = Parameter(Descriptor::kReceiver);\n-  Node* const maybe_regexp = Parameter(Descriptor::kRegexp);\n-  Node* const context = Parameter(Descriptor::kContext);\n+  TNode<Object> receiver = CAST(Parameter(Descriptor::kReceiver));\n+  TNode<Object> maybe_regexp = CAST(Parameter(Descriptor::kRegexp));\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n   Generate(kSearch, \"String.prototype.search\", receiver, maybe_regexp, context);\n }\n \n@@ -1719,23 +1740,22 @@ TF_BUILTIN(StringPrototypeSplit, StringBuiltinsAssembler) {\n \n   MaybeCallFunctionAtSymbol(\n       context, separator, receiver, isolate()->factory()->split_symbol(),\n-      [=]() {\n-        return CallBuiltin(Builtins::kRegExpSplit, context, separator, receiver,\n-                           limit);\n+      [&]() {\n+        args.PopAndReturn(CallBuiltin(Builtins::kRegExpSplit, context,\n+                                      separator, receiver, limit));\n       },\n-      [=](Node* fn) {\n+      [&](Node* fn) {\n         Callable call_callable = CodeFactory::Call(isolate());\n-        return CallJS(call_callable, context, fn, separator, receiver, limit);\n-      },\n-      &args);\n+        args.PopAndReturn(\n+            CallJS(call_callable, context, fn, separator, receiver, limit));\n+      });\n \n   // String and integer conversions.\n \n   Node* const subject_string = ToString_Inline(context, receiver);\n-  Node* const limit_number =\n-      Select(IsUndefined(limit), [=]() { return NumberConstant(kMaxUInt32); },\n-             [=]() { return ToUint32(context, limit); },\n-             MachineRepresentation::kTagged);\n+  TNode<Number> const limit_number = Select<Number>(\n+      IsUndefined(limit), [=] { return NumberConstant(kMaxUInt32); },\n+      [=] { return ToUint32(context, limit); });\n   Node* const separator_string = ToString_Inline(context, separator);\n \n   // Shortcut for {limit} == 0.\n@@ -1923,7 +1943,7 @@ TNode<Smi> StringBuiltinsAssembler::ToSmiBetweenZeroAnd(\n     {\n       TNode<Smi> const zero = SmiConstant(0);\n       var_result =\n-          SelectTaggedConstant(SmiLessThan(value_smi, zero), zero, limit);\n+          SelectConstant<Smi>(SmiLessThan(value_smi, zero), zero, limit);\n       Goto(&out);\n     }\n   }\n@@ -1936,8 +1956,8 @@ TNode<Smi> StringBuiltinsAssembler::ToSmiBetweenZeroAnd(\n     TNode<Float64T> const float_zero = Float64Constant(0.);\n     TNode<Smi> const smi_zero = SmiConstant(0);\n     TNode<Float64T> const value_float = LoadHeapNumberValue(value_int_hn);\n-    var_result = SelectTaggedConstant(Float64LessThan(value_float, float_zero),\n-                                      smi_zero, limit);\n+    var_result = SelectConstant<Smi>(Float64LessThan(value_float, float_zero),\n+                                     smi_zero, limit);\n     Goto(&out);\n   }\n \n@@ -2305,7 +2325,7 @@ TF_BUILTIN(StringIteratorPrototypeNext, StringBuiltinsAssembler) {\n   {\n     UnicodeEncoding encoding = UnicodeEncoding::UTF16;\n     TNode<Int32T> ch = LoadSurrogatePairAt(string, length, position, encoding);\n-    TNode<String> value = StringFromCodePoint(ch, encoding);\n+    TNode<String> value = StringFromSingleCodePoint(ch, encoding);\n     var_value.Bind(value);\n     TNode<IntPtrT> length = LoadStringLengthAsWord(value);\n     StoreObjectFieldNoWriteBarrier(iterator, JSStringIterator::kNextIndexOffset,"
        },
        {
            "sha": "4147b3fc0c5202d5655d1a5f821b7dcd0e9acf7c",
            "filename": "deps/v8/src/builtins/builtins-string-gen.h",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string-gen.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -95,14 +95,13 @@ class StringBuiltinsAssembler : public CodeStubAssembler {\n   //\n   // Contains fast paths for Smi and RegExp objects.\n   // Important: {regexp_call} may not contain any code that can call into JS.\n-  typedef std::function<Node*()> NodeFunction0;\n-  typedef std::function<Node*(Node* fn)> NodeFunction1;\n+  typedef std::function<void()> NodeFunction0;\n+  typedef std::function<void(Node* fn)> NodeFunction1;\n   void MaybeCallFunctionAtSymbol(Node* const context, Node* const object,\n                                  Node* const maybe_string,\n                                  Handle<Symbol> symbol,\n                                  const NodeFunction0& regexp_call,\n-                                 const NodeFunction1& generic_call,\n-                                 CodeStubArguments* args = nullptr);\n+                                 const NodeFunction1& generic_call);\n };\n \n class StringIncludesIndexOfAssembler : public StringBuiltinsAssembler {"
        },
        {
            "sha": "854bb5e58a0417b87a293a652b9b09f6968a48b7",
            "filename": "deps/v8/src/builtins/builtins-string.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-string.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -330,7 +330,7 @@ inline bool ToUpperOverflows(uc32 character) {\n }\n \n template <class Converter>\n-MUST_USE_RESULT static Object* ConvertCaseHelper(\n+V8_WARN_UNUSED_RESULT static Object* ConvertCaseHelper(\n     Isolate* isolate, String* string, SeqString* result, int result_length,\n     unibrow::Mapping<Converter, 128>* mapping) {\n   DisallowHeapAllocation no_gc;\n@@ -427,7 +427,7 @@ MUST_USE_RESULT static Object* ConvertCaseHelper(\n }\n \n template <class Converter>\n-MUST_USE_RESULT static Object* ConvertCase(\n+V8_WARN_UNUSED_RESULT static Object* ConvertCase(\n     Handle<String> s, Isolate* isolate,\n     unibrow::Mapping<Converter, 128>* mapping) {\n   s = String::Flatten(s);"
        },
        {
            "sha": "1343a293bd8df8ff9c5db996a85db6c10f66f1f7",
            "filename": "deps/v8/src/builtins/builtins-symbol.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 17,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-symbol.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -11,27 +11,25 @@ namespace v8 {\n namespace internal {\n \n // -----------------------------------------------------------------------------\n-// ES6 section 19.4 Symbol Objects\n+// ES #sec-symbol-objects\n \n-// ES6 section 19.4.1.1 Symbol ( [ description ] ) for the [[Call]] case.\n+// ES #sec-symbol-constructor\n BUILTIN(SymbolConstructor) {\n   HandleScope scope(isolate);\n-  Handle<Symbol> result = isolate->factory()->NewSymbol();\n-  Handle<Object> description = args.atOrUndefined(isolate, 1);\n-  if (!description->IsUndefined(isolate)) {\n-    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(isolate, description,\n-                                       Object::ToString(isolate, description));\n-    result->set_name(*description);\n+  if (args.new_target()->IsUndefined(isolate)) {  // [[Call]]\n+    Handle<Symbol> result = isolate->factory()->NewSymbol();\n+    Handle<Object> description = args.atOrUndefined(isolate, 1);\n+    if (!description->IsUndefined(isolate)) {\n+      ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n+          isolate, description, Object::ToString(isolate, description));\n+      result->set_name(*description);\n+    }\n+    return *result;\n+  } else {  // [[Construct]]\n+    THROW_NEW_ERROR_RETURN_FAILURE(\n+        isolate, NewTypeError(MessageTemplate::kNotConstructor,\n+                              isolate->factory()->Symbol_string()));\n   }\n-  return *result;\n-}\n-\n-// ES6 section 19.4.1.1 Symbol ( [ description ] ) for the [[Construct]] case.\n-BUILTIN(SymbolConstructor_ConstructStub) {\n-  HandleScope scope(isolate);\n-  THROW_NEW_ERROR_RETURN_FAILURE(\n-      isolate, NewTypeError(MessageTemplate::kNotConstructor,\n-                            isolate->factory()->Symbol_string()));\n }\n \n // ES6 section 19.4.2.1 Symbol.for."
        },
        {
            "sha": "e5ac615cca58d63506cbd06314b87f31ae727376",
            "filename": "deps/v8/src/builtins/builtins-typedarray-gen.cc",
            "status": "modified",
            "additions": 89,
            "deletions": 58,
            "changes": 147,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typedarray-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typedarray-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-typedarray-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -36,9 +36,7 @@ TNode<Map> TypedArrayBuiltinsAssembler::LoadMapForType(\n   DispatchTypedArrayByElementsKind(\n       elements_kind,\n       [&](ElementsKind kind, int size, int typed_array_fun_index) {\n-        ExternalArrayType type =\n-            isolate()->factory()->GetArrayTypeFromElementsKind(kind);\n-        Handle<Map> map(isolate()->heap()->MapForFixedTypedArray(type));\n+        Handle<Map> map(isolate()->heap()->MapForFixedTypedArray(kind));\n         var_typed_map = HeapConstant(map);\n       });\n \n@@ -630,56 +628,57 @@ void TypedArrayBuiltinsAssembler::ConstructByIterable(\n                        element_size);\n }\n \n-TF_BUILTIN(TypedArrayConstructor, TypedArrayBuiltinsAssembler) {\n-  TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n-\n-  // If NewTarget is undefined, throw a TypeError exception.\n-  Node* target = LoadFromFrame(StandardFrameConstants::kFunctionOffset,\n-                               MachineType::TaggedPointer());\n-  Node* shared = LoadObjectField(target, JSFunction::kSharedFunctionInfoOffset);\n-  Node* name = LoadObjectField(shared, SharedFunctionInfo::kNameOffset);\n-  ThrowTypeError(context, MessageTemplate::kConstructorNotFunction, name);\n+TF_BUILTIN(TypedArrayBaseConstructor, TypedArrayBuiltinsAssembler) {\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  ThrowTypeError(context, MessageTemplate::kConstructAbstractClass,\n+                 \"TypedArray\");\n }\n \n-TF_BUILTIN(TypedArrayConstructor_ConstructStub, TypedArrayBuiltinsAssembler) {\n-  Label if_arg1isbuffer(this), if_arg1istypedarray(this),\n-      if_arg1isreceiver(this), if_arg1isnumber(this), done(this);\n+// ES #sec-typedarray-constructors\n+TF_BUILTIN(CreateTypedArray, TypedArrayBuiltinsAssembler) {\n+  TNode<Context> context = CAST(Parameter(Descriptor::kContext));\n+  TNode<JSFunction> target = CAST(Parameter(Descriptor::kTarget));\n+  TNode<JSReceiver> new_target = CAST(Parameter(Descriptor::kNewTarget));\n+  TNode<Object> arg1 = CAST(Parameter(Descriptor::kArg1));\n+  TNode<Object> arg2 = CAST(Parameter(Descriptor::kArg2));\n+  TNode<Object> arg3 = CAST(Parameter(Descriptor::kArg3));\n \n-  TNode<Object> new_target = CAST(Parameter(BuiltinDescriptor::kNewTarget));\n-  CSA_ASSERT(this, IsNotUndefined(new_target));\n+  CSA_ASSERT(this, IsConstructor(target));\n+  CSA_ASSERT(this, IsJSReceiver(new_target));\n \n-  Node* argc =\n-      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n-  CodeStubArguments args(this, argc);\n-  TNode<Object> arg1 = args.GetOptionalArgumentValue(0);\n-  TNode<Object> arg2 = args.GetOptionalArgumentValue(1);\n-  TNode<Object> arg3 = args.GetOptionalArgumentValue(2);\n-  TNode<Context> context = CAST(Parameter(BuiltinDescriptor::kContext));\n+  Label if_arg1isbuffer(this), if_arg1istypedarray(this),\n+      if_arg1isreceiver(this), if_arg1isnumber(this), return_result(this);\n \n-  Node* target = LoadFromFrame(StandardFrameConstants::kFunctionOffset,\n-                               MachineType::TaggedPointer());\n   ConstructorBuiltinsAssembler constructor_assembler(this->state());\n-  TNode<JSTypedArray> holder = CAST(\n+  TNode<JSTypedArray> result = CAST(\n       constructor_assembler.EmitFastNewObject(context, target, new_target));\n \n   TNode<Smi> element_size =\n-      SmiTag(GetTypedArrayElementSize(LoadElementsKind(holder)));\n+      SmiTag(GetTypedArrayElementSize(LoadElementsKind(result)));\n \n   GotoIf(TaggedIsSmi(arg1), &if_arg1isnumber);\n   GotoIf(IsJSArrayBuffer(arg1), &if_arg1isbuffer);\n   GotoIf(IsJSTypedArray(arg1), &if_arg1istypedarray);\n   GotoIf(IsJSReceiver(arg1), &if_arg1isreceiver);\n   Goto(&if_arg1isnumber);\n \n+  // https://tc39.github.io/ecma262/#sec-typedarray-buffer-byteoffset-length\n   BIND(&if_arg1isbuffer);\n-  ConstructByArrayBuffer(context, holder, CAST(arg1), arg2, arg3, element_size);\n-  Goto(&done);\n+  {\n+    ConstructByArrayBuffer(context, result, CAST(arg1), arg2, arg3,\n+                           element_size);\n+    Goto(&return_result);\n+  }\n \n+  // https://tc39.github.io/ecma262/#sec-typedarray-typedarray\n   BIND(&if_arg1istypedarray);\n-  TNode<JSTypedArray> typed_array = CAST(arg1);\n-  ConstructByTypedArray(context, holder, typed_array, element_size);\n-  Goto(&done);\n+  {\n+    TNode<JSTypedArray> typed_array = CAST(arg1);\n+    ConstructByTypedArray(context, result, typed_array, element_size);\n+    Goto(&return_result);\n+  }\n \n+  // https://tc39.github.io/ecma262/#sec-typedarray-object\n   BIND(&if_arg1isreceiver);\n   {\n     Label if_iteratorundefined(this), if_iteratornotcallable(this);\n@@ -690,31 +689,70 @@ TF_BUILTIN(TypedArrayConstructor_ConstructStub, TypedArrayBuiltinsAssembler) {\n     GotoIf(TaggedIsSmi(iteratorFn), &if_iteratornotcallable);\n     GotoIfNot(IsCallable(iteratorFn), &if_iteratornotcallable);\n \n-    ConstructByIterable(context, holder, CAST(arg1), iteratorFn, element_size);\n-    Goto(&done);\n+    ConstructByIterable(context, result, CAST(arg1), iteratorFn, element_size);\n+    Goto(&return_result);\n \n     BIND(&if_iteratorundefined);\n     {\n       TNode<HeapObject> array_like = CAST(arg1);\n       TNode<Object> initial_length =\n           GetProperty(context, arg1, LengthStringConstant());\n \n-      ConstructByArrayLike(context, holder, array_like, initial_length,\n+      ConstructByArrayLike(context, result, array_like, initial_length,\n                            element_size);\n-      Goto(&done);\n+      Goto(&return_result);\n     }\n \n     BIND(&if_iteratornotcallable);\n     { ThrowTypeError(context, MessageTemplate::kIteratorSymbolNonCallable); }\n   }\n \n-  // First arg was a number or fell through and will be treated as a number.\n+  // The first argument was a number or fell through and is treated as\n+  // a number. https://tc39.github.io/ecma262/#sec-typedarray-length\n   BIND(&if_arg1isnumber);\n-  ConstructByLength(context, holder, arg1, element_size);\n-  Goto(&done);\n+  {\n+    ConstructByLength(context, result, arg1, element_size);\n+    Goto(&return_result);\n+  }\n \n-  BIND(&done);\n-  args.PopAndReturn(holder);\n+  BIND(&return_result);\n+  Return(result);\n+}\n+\n+TF_BUILTIN(TypedArrayConstructorLazyDeoptContinuation,\n+           TypedArrayBuiltinsAssembler) {\n+  Node* result = Parameter(Descriptor::kResult);\n+  Return(result);\n+}\n+\n+// ES #sec-typedarray-constructors\n+TF_BUILTIN(TypedArrayConstructor, TypedArrayBuiltinsAssembler) {\n+  Node* context = Parameter(BuiltinDescriptor::kContext);\n+  Node* target = LoadFromFrame(StandardFrameConstants::kFunctionOffset,\n+                               MachineType::TaggedPointer());\n+  Node* new_target = Parameter(BuiltinDescriptor::kNewTarget);\n+  Node* argc =\n+      ChangeInt32ToIntPtr(Parameter(BuiltinDescriptor::kArgumentsCount));\n+  CodeStubArguments args(this, argc);\n+  Node* arg1 = args.GetOptionalArgumentValue(0);\n+  Node* arg2 = args.GetOptionalArgumentValue(1);\n+  Node* arg3 = args.GetOptionalArgumentValue(2);\n+\n+  // If NewTarget is undefined, throw a TypeError exception.\n+  // All the TypedArray constructors have this as the first step:\n+  // https://tc39.github.io/ecma262/#sec-typedarray-constructors\n+  Label throwtypeerror(this, Label::kDeferred);\n+  GotoIf(IsUndefined(new_target), &throwtypeerror);\n+\n+  Node* result = CallBuiltin(Builtins::kCreateTypedArray, context, target,\n+                             new_target, arg1, arg2, arg3);\n+  args.PopAndReturn(result);\n+\n+  BIND(&throwtypeerror);\n+  {\n+    Node* name = CallRuntime(Runtime::kGetFunctionName, context, target);\n+    ThrowTypeError(context, MessageTemplate::kConstructorNotFunction, name);\n+  }\n }\n \n void TypedArrayBuiltinsAssembler::GenerateTypedArrayPrototypeGetter(\n@@ -829,11 +867,10 @@ TNode<Object> TypedArrayBuiltinsAssembler::TypedArraySpeciesConstructor(\n   var_constructor = default_constructor;\n   Node* map = LoadMap(exemplar);\n   GotoIfNot(IsPrototypeTypedArrayPrototype(context, map), &slow);\n-  Branch(IsSpeciesProtectorCellInvalid(), &slow, &done);\n+  Branch(IsTypedArraySpeciesProtectorCellInvalid(), &slow, &done);\n \n   BIND(&slow);\n-  var_constructor =\n-      CAST(SpeciesConstructor(context, exemplar, default_constructor));\n+  var_constructor = SpeciesConstructor(context, exemplar, default_constructor);\n   Goto(&done);\n \n   BIND(&done);\n@@ -1260,8 +1297,7 @@ TF_BUILTIN(TypedArrayPrototypeSlice, TypedArrayBuiltinsAssembler) {\n                   [=] {\n                     return SmiTag(ConvertToRelativeIndex(\n                         context, end, SmiUntag(source_length)));\n-                  },\n-                  MachineRepresentation::kTagged);\n+                  });\n \n   // Create a result array by invoking TypedArraySpeciesCreate.\n   TNode<Smi> count = SmiMax(SmiSub(end_index, start_index), SmiConstant(0));\n@@ -1460,24 +1496,19 @@ TF_BUILTIN(TypedArrayPrototypeToStringTag, TypedArrayBuiltinsAssembler) {\n \n void TypedArrayBuiltinsAssembler::GenerateTypedArrayPrototypeIterationMethod(\n     Node* context, Node* receiver, const char* method_name,\n-    IterationKind iteration_kind) {\n+    IterationKind kind) {\n   Label throw_bad_receiver(this, Label::kDeferred);\n \n   GotoIf(TaggedIsSmi(receiver), &throw_bad_receiver);\n-\n-  Node* map = LoadMap(receiver);\n-  Node* instance_type = LoadMapInstanceType(map);\n-  GotoIfNot(InstanceTypeEqual(instance_type, JS_TYPED_ARRAY_TYPE),\n-            &throw_bad_receiver);\n+  GotoIfNot(IsJSTypedArray(receiver), &throw_bad_receiver);\n \n   // Check if the {receiver}'s JSArrayBuffer was neutered.\n   Node* receiver_buffer =\n       LoadObjectField(receiver, JSTypedArray::kBufferOffset);\n   Label if_receiverisneutered(this, Label::kDeferred);\n   GotoIf(IsDetachedBuffer(receiver_buffer), &if_receiverisneutered);\n \n-  Return(CreateArrayIterator(receiver, map, instance_type, context,\n-                             iteration_kind));\n+  Return(CreateArrayIterator(context, receiver, kind));\n \n   BIND(&throw_bad_receiver);\n   ThrowTypeError(context, MessageTemplate::kNotTypedArray, method_name);\n@@ -1486,7 +1517,7 @@ void TypedArrayBuiltinsAssembler::GenerateTypedArrayPrototypeIterationMethod(\n   ThrowTypeError(context, MessageTemplate::kDetachedOperation, method_name);\n }\n \n-// ES6 #sec-%typedarray%.prototype.values\n+// ES #sec-%typedarray%.prototype.values\n TF_BUILTIN(TypedArrayPrototypeValues, TypedArrayBuiltinsAssembler) {\n   Node* context = Parameter(Descriptor::kContext);\n   Node* receiver = Parameter(Descriptor::kReceiver);\n@@ -1495,7 +1526,7 @@ TF_BUILTIN(TypedArrayPrototypeValues, TypedArrayBuiltinsAssembler) {\n                                              IterationKind::kValues);\n }\n \n-// ES6 #sec-%typedarray%.prototype.entries\n+// ES #sec-%typedarray%.prototype.entries\n TF_BUILTIN(TypedArrayPrototypeEntries, TypedArrayBuiltinsAssembler) {\n   Node* context = Parameter(Descriptor::kContext);\n   Node* receiver = Parameter(Descriptor::kReceiver);\n@@ -1504,7 +1535,7 @@ TF_BUILTIN(TypedArrayPrototypeEntries, TypedArrayBuiltinsAssembler) {\n                                              IterationKind::kEntries);\n }\n \n-// ES6 #sec-%typedarray%.prototype.keys\n+// ES #sec-%typedarray%.prototype.keys\n TF_BUILTIN(TypedArrayPrototypeKeys, TypedArrayBuiltinsAssembler) {\n   Node* context = Parameter(Descriptor::kContext);\n   Node* receiver = Parameter(Descriptor::kReceiver);"
        },
        {
            "sha": "35a77c7518c84d1bc4dce20d11750bde52749f04",
            "filename": "deps/v8/src/builtins/builtins-utils.h",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-utils.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -8,7 +8,7 @@\n #include \"src/arguments.h\"\n #include \"src/base/logging.h\"\n #include \"src/builtins/builtins.h\"\n-#include \"src/factory.h\"\n+#include \"src/heap/factory.h\"\n #include \"src/isolate.h\"\n \n namespace v8 {\n@@ -79,8 +79,8 @@ class BuiltinArguments : public Arguments {\n // TODO(cbruni): add global flag to check whether any tracing events have been\n // enabled.\n #define BUILTIN(name)                                                         \\\n-  MUST_USE_RESULT static Object* Builtin_Impl_##name(BuiltinArguments args,   \\\n-                                                     Isolate* isolate);       \\\n+  V8_WARN_UNUSED_RESULT static Object* Builtin_Impl_##name(                   \\\n+      BuiltinArguments args, Isolate* isolate);                               \\\n                                                                               \\\n   V8_NOINLINE static Object* Builtin_Impl_Stats_##name(                       \\\n       int args_length, Object** args_object, Isolate* isolate) {              \\\n@@ -92,7 +92,7 @@ class BuiltinArguments : public Arguments {\n     return Builtin_Impl_##name(args, isolate);                                \\\n   }                                                                           \\\n                                                                               \\\n-  MUST_USE_RESULT Object* Builtin_##name(                                     \\\n+  V8_WARN_UNUSED_RESULT Object* Builtin_##name(                               \\\n       int args_length, Object** args_object, Isolate* isolate) {              \\\n     DCHECK(isolate->context() == nullptr || isolate->context()->IsContext()); \\\n     if (V8_UNLIKELY(FLAG_runtime_stats)) {                                    \\\n@@ -102,8 +102,8 @@ class BuiltinArguments : public Arguments {\n     return Builtin_Impl_##name(args, isolate);                                \\\n   }                                                                           \\\n                                                                               \\\n-  MUST_USE_RESULT static Object* Builtin_Impl_##name(BuiltinArguments args,   \\\n-                                                     Isolate* isolate)\n+  V8_WARN_UNUSED_RESULT static Object* Builtin_Impl_##name(                   \\\n+      BuiltinArguments args, Isolate* isolate)\n \n // ----------------------------------------------------------------------------\n "
        },
        {
            "sha": "c348248fffb0d930e19b3a266355ec4b440c2e16",
            "filename": "deps/v8/src/builtins/builtins.cc",
            "status": "modified",
            "additions": 58,
            "deletions": 762,
            "changes": 820,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -195,16 +195,15 @@ Address Builtins::CppEntryOf(int index) {\n }\n \n // static\n-bool Builtins::IsBuiltin(Code* code) {\n+bool Builtins::IsBuiltin(const Code* code) {\n   return Builtins::IsBuiltinId(code->builtin_index());\n }\n \n // static\n-bool Builtins::IsOffHeapBuiltin(Code* code) {\n+bool Builtins::IsEmbeddedBuiltin(const Code* code) {\n #ifdef V8_EMBEDDED_BUILTINS\n-  return FLAG_stress_off_heap_code &&\n-         Builtins::IsBuiltinId(code->builtin_index()) &&\n-         Builtins::IsOffHeapSafe(code->builtin_index());\n+  return Builtins::IsBuiltinId(code->builtin_index()) &&\n+         Builtins::IsIsolateIndependent(code->builtin_index());\n #else\n   return false;\n #endif\n@@ -213,6 +212,12 @@ bool Builtins::IsOffHeapBuiltin(Code* code) {\n // static\n bool Builtins::IsLazy(int index) {\n   DCHECK(IsBuiltinId(index));\n+\n+#ifdef V8_EMBEDDED_BUILTINS\n+  // We don't want to lazy-deserialize off-heap builtins.\n+  if (Builtins::IsIsolateIndependent(index)) return false;\n+#endif\n+\n   // There are a couple of reasons that builtins can require eager-loading,\n   // i.e. deserialization at isolate creation instead of on-demand. For\n   // instance:\n@@ -225,50 +230,41 @@ bool Builtins::IsLazy(int index) {\n   // TODO(wasm): Remove wasm builtins once immovability is no longer required.\n   switch (index) {\n     case kAbort:  // Required by wasm.\n-    case kArrayFindLoopEagerDeoptContinuation:  // https://crbug.com/v8/6786.\n-    case kArrayFindLoopLazyDeoptContinuation:   // https://crbug.com/v8/6786.\n-    // https://crbug.com/v8/6786.\n-    case kArrayFindLoopAfterCallbackLazyDeoptContinuation:\n-    // https://crbug.com/v8/6786.\n+    case kArrayEveryLoopEagerDeoptContinuation:\n+    case kArrayEveryLoopLazyDeoptContinuation:\n+    case kArrayFilterLoopEagerDeoptContinuation:\n+    case kArrayFilterLoopLazyDeoptContinuation:\n+    case kArrayFindIndexLoopAfterCallbackLazyDeoptContinuation:\n     case kArrayFindIndexLoopEagerDeoptContinuation:\n-    // https://crbug.com/v8/6786.\n     case kArrayFindIndexLoopLazyDeoptContinuation:\n-    // https://crbug.com/v8/6786.\n-    case kArrayFindIndexLoopAfterCallbackLazyDeoptContinuation:\n-    case kArrayForEachLoopEagerDeoptContinuation:  // https://crbug.com/v8/6786.\n-    case kArrayForEachLoopLazyDeoptContinuation:   // https://crbug.com/v8/6786.\n-    case kArrayMapLoopEagerDeoptContinuation:      // https://crbug.com/v8/6786.\n-    case kArrayMapLoopLazyDeoptContinuation:       // https://crbug.com/v8/6786.\n-    case kArrayEveryLoopEagerDeoptContinuation:    // https://crbug.com/v8/6786.\n-    case kArrayEveryLoopLazyDeoptContinuation:     // https://crbug.com/v8/6786.\n-    case kArrayFilterLoopEagerDeoptContinuation:   // https://crbug.com/v8/6786.\n-    case kArrayFilterLoopLazyDeoptContinuation:    // https://crbug.com/v8/6786.\n+    case kArrayFindLoopAfterCallbackLazyDeoptContinuation:\n+    case kArrayFindLoopEagerDeoptContinuation:\n+    case kArrayFindLoopLazyDeoptContinuation:\n+    case kArrayForEachLoopEagerDeoptContinuation:\n+    case kArrayForEachLoopLazyDeoptContinuation:\n+    case kArrayMapLoopEagerDeoptContinuation:\n+    case kArrayMapLoopLazyDeoptContinuation:\n+    case kArrayReduceLoopEagerDeoptContinuation:\n+    case kArrayReduceLoopLazyDeoptContinuation:\n     case kArrayReducePreLoopEagerDeoptContinuation:\n-    case kArrayReduceLoopEagerDeoptContinuation:   // https://crbug.com/v8/6786.\n-    case kArrayReduceLoopLazyDeoptContinuation:    // https://crbug.com/v8/6786.\n-    case kArrayReduceRightPreLoopEagerDeoptContinuation:\n     case kArrayReduceRightLoopEagerDeoptContinuation:\n     case kArrayReduceRightLoopLazyDeoptContinuation:\n-    case kArraySomeLoopEagerDeoptContinuation:  // https://crbug.com/v8/6786.\n-    case kArraySomeLoopLazyDeoptContinuation:   // https://crbug.com/v8/6786.\n+    case kArrayReduceRightPreLoopEagerDeoptContinuation:\n+    case kArraySomeLoopEagerDeoptContinuation:\n+    case kArraySomeLoopLazyDeoptContinuation:\n     case kAsyncGeneratorAwaitCaught:            // https://crbug.com/v8/6786.\n     case kAsyncGeneratorAwaitUncaught:          // https://crbug.com/v8/6786.\n-    case kCheckOptimizationMarker:\n     case kCompileLazy:\n+    case kDebugBreakTrampoline:\n     case kDeserializeLazy:\n     case kFunctionPrototypeHasInstance:  // https://crbug.com/v8/6786.\n     case kHandleApiCall:\n     case kIllegal:\n+    case kInstantiateAsmJs:\n     case kInterpreterEnterBytecodeAdvance:\n     case kInterpreterEnterBytecodeDispatch:\n     case kInterpreterEntryTrampoline:\n-    case kObjectConstructor_ConstructStub:    // https://crbug.com/v8/6787.\n-    case kPromiseConstructorLazyDeoptContinuation:  // crbug/v8/6786.\n-    case kProxyConstructor_ConstructStub:     // https://crbug.com/v8/6787.\n-    case kNumberConstructor_ConstructStub:    // https://crbug.com/v8/6787.\n-    case kStringConstructor_ConstructStub:    // https://crbug.com/v8/6787.\n-    case kTypedArrayConstructor_ConstructStub:  // https://crbug.com/v8/6787.\n-    case kProxyConstructor:                   // https://crbug.com/v8/6787.\n+    case kPromiseConstructorLazyDeoptContinuation:\n     case kRecordWrite:  // https://crbug.com/chromium/765301.\n     case kThrowWasmTrapDivByZero:             // Required by wasm.\n     case kThrowWasmTrapDivUnrepresentable:    // Required by wasm.\n@@ -278,7 +274,9 @@ bool Builtins::IsLazy(int index) {\n     case kThrowWasmTrapMemOutOfBounds:        // Required by wasm.\n     case kThrowWasmTrapRemByZero:             // Required by wasm.\n     case kThrowWasmTrapUnreachable:           // Required by wasm.\n+    case kToBooleanLazyDeoptContinuation:\n     case kToNumber:                           // Required by wasm.\n+    case kTypedArrayConstructorLazyDeoptContinuation:\n     case kWasmCompileLazy:                    // Required by wasm.\n     case kWasmStackGuard:                     // Required by wasm.\n       return false;\n@@ -295,172 +293,24 @@ bool Builtins::IsIsolateIndependent(int index) {\n   switch (index) {\n #ifdef DEBUG\n     case kAbortJS:\n-    case kAllocateHeapNumber:\n-    case kArrayEveryLoopEagerDeoptContinuation:\n-    case kArrayFilterLoopEagerDeoptContinuation:\n-    case kArrayFindIndexLoopEagerDeoptContinuation:\n-    case kArrayFindIndexLoopLazyDeoptContinuation:\n-    case kArrayFindLoopEagerDeoptContinuation:\n-    case kArrayFindLoopLazyDeoptContinuation:\n-    case kArrayForEachLoopEagerDeoptContinuation:\n-    case kArrayForEachLoopLazyDeoptContinuation:\n-    case kArrayMapLoopEagerDeoptContinuation:\n-    case kArrayReduceLoopEagerDeoptContinuation:\n-    case kArrayReduceLoopLazyDeoptContinuation:\n-    case kArrayReducePreLoopEagerDeoptContinuation:\n-    case kArrayReduceRightLoopEagerDeoptContinuation:\n-    case kArrayReduceRightLoopLazyDeoptContinuation:\n-    case kArrayReduceRightPreLoopEagerDeoptContinuation:\n-    case kArraySomeLoopEagerDeoptContinuation:\n-    case kBitwiseNot:\n-    case kBooleanPrototypeToString:\n-    case kBooleanPrototypeValueOf:\n     case kContinueToCodeStubBuiltin:\n     case kContinueToCodeStubBuiltinWithResult:\n     case kContinueToJavaScriptBuiltin:\n     case kContinueToJavaScriptBuiltinWithResult:\n-    case kDatePrototypeGetDate:\n-    case kDatePrototypeGetDay:\n-    case kDatePrototypeGetFullYear:\n-    case kDatePrototypeGetHours:\n-    case kDatePrototypeGetMilliseconds:\n-    case kDatePrototypeGetMinutes:\n-    case kDatePrototypeGetMonth:\n-    case kDatePrototypeGetSeconds:\n-    case kDatePrototypeGetTime:\n-    case kDatePrototypeGetTimezoneOffset:\n-    case kDatePrototypeGetUTCDate:\n-    case kDatePrototypeGetUTCDay:\n-    case kDatePrototypeGetUTCFullYear:\n-    case kDatePrototypeGetUTCHours:\n-    case kDatePrototypeGetUTCMilliseconds:\n-    case kDatePrototypeGetUTCMinutes:\n-    case kDatePrototypeGetUTCMonth:\n-    case kDatePrototypeGetUTCSeconds:\n-    case kDatePrototypeToPrimitive:\n-    case kDatePrototypeValueOf:\n-    case kDecrement:\n-    case kDivide:\n-    case kGlobalIsFinite:\n-    case kGlobalIsNaN:\n-    case kIncrement:\n     case kKeyedLoadIC_Slow:\n-    case kKeyedLoadICTrampoline:\n     case kKeyedStoreIC_Slow:\n-    case kKeyedStoreICTrampoline:\n-    case kLoadField:\n-    case kLoadGlobalICInsideTypeofTrampoline:\n     case kLoadGlobalIC_Slow:\n-    case kLoadGlobalICTrampoline:\n     case kLoadIC_Slow:\n-    case kLoadICTrampoline:\n-    case kMapPrototypeEntries:\n-    case kMapPrototypeGet:\n-    case kMapPrototypeGetSize:\n-    case kMapPrototypeHas:\n-    case kMapPrototypeKeys:\n-    case kMapPrototypeValues:\n-    case kMathAcos:\n-    case kMathAcosh:\n-    case kMathAsin:\n-    case kMathAsinh:\n-    case kMathAtan:\n-    case kMathAtan2:\n-    case kMathAtanh:\n-    case kMathCbrt:\n-    case kMathCeil:\n-    case kMathCos:\n-    case kMathCosh:\n-    case kMathExp:\n-    case kMathExpm1:\n-    case kMathFloor:\n-    case kMathFround:\n-    case kMathLog:\n-    case kMathLog10:\n-    case kMathLog1p:\n-    case kMathLog2:\n-    case kMathMax:\n-    case kMathMin:\n-    case kMathRound:\n-    case kMathSign:\n-    case kMathSin:\n-    case kMathSinh:\n-    case kMathSqrt:\n-    case kMathTan:\n-    case kMathTanh:\n-    case kMathTrunc:\n-    case kModulus:\n-    case kMultiply:\n-    case kNonPrimitiveToPrimitive_Default:\n-    case kNonPrimitiveToPrimitive_Number:\n-    case kNonPrimitiveToPrimitive_String:\n-    case kNumberIsFinite:\n-    case kNumberIsInteger:\n-    case kNumberIsNaN:\n-    case kNumberIsSafeInteger:\n-    case kNumberPrototypeValueOf:\n-    case kObjectPrototypeToLocaleString:\n-    case kObjectPrototypeValueOf:\n-    case kPromiseCapabilityDefaultReject:\n-    case kPromiseCapabilityDefaultResolve:\n-    case kPromiseConstructorLazyDeoptContinuation:\n-    case kPromiseInternalReject:\n-    case kPromiseInternalResolve:\n-    case kPromiseResolveTrampoline:\n-    case kPromiseThrowerFinally:\n-    case kPromiseValueThunkFinally:\n-    case kProxyConstructor:\n-    case kReflectHas:\n-    case kRegExpPrototypeDotAllGetter:\n-    case kRegExpPrototypeGlobalGetter:\n-    case kRegExpPrototypeIgnoreCaseGetter:\n-    case kRegExpPrototypeMultilineGetter:\n-    case kRegExpPrototypeSourceGetter:\n-    case kRegExpPrototypeStickyGetter:\n-    case kRegExpPrototypeUnicodeGetter:\n-    case kReturnReceiver:\n-    case kSetPrototypeEntries:\n-    case kSetPrototypeGetSize:\n-    case kSetPrototypeValues:\n     case kStoreGlobalIC_Slow:\n-    case kStoreGlobalICTrampoline:\n-    case kStoreICTrampoline:\n-    case kStringPrototypeBig:\n-    case kStringPrototypeBlink:\n-    case kStringPrototypeBold:\n-    case kStringPrototypeConcat:\n-    case kStringPrototypeFixed:\n-    case kStringPrototypeItalics:\n-    case kStringPrototypeIterator:\n-    case kStringPrototypeSmall:\n-    case kStringPrototypeStrike:\n-    case kStringPrototypeSub:\n-    case kStringPrototypeSup:\n-#ifdef V8_INTL_SUPPORT\n-    case kStringPrototypeToLowerCaseIntl:\n-#endif\n-    case kSubtract:\n-    case kSymbolPrototypeToPrimitive:\n-    case kSymbolPrototypeToString:\n-    case kSymbolPrototypeValueOf:\n+    case kWasmStackGuard:\n+    case kThrowWasmTrapUnreachable:\n+    case kThrowWasmTrapMemOutOfBounds:\n     case kThrowWasmTrapDivByZero:\n     case kThrowWasmTrapDivUnrepresentable:\n+    case kThrowWasmTrapRemByZero:\n     case kThrowWasmTrapFloatUnrepresentable:\n     case kThrowWasmTrapFuncInvalid:\n     case kThrowWasmTrapFuncSigMismatch:\n-    case kThrowWasmTrapMemOutOfBounds:\n-    case kThrowWasmTrapRemByZero:\n-    case kThrowWasmTrapUnreachable:\n-    case kToInteger:\n-    case kTypedArrayConstructor:\n-    case kWasmStackGuard:\n-    case kWeakMapGet:\n-    case kWeakMapHas:\n-    case kWeakMapPrototypeDelete:\n-    case kWeakMapPrototypeSet:\n-    case kWeakSetHas:\n-    case kWeakSetPrototypeAdd:\n-    case kWeakSetPrototypeDelete:\n #else\n     case kAbortJS:\n     case kAdd:\n@@ -529,9 +379,6 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kBitwiseNot:\n     case kBooleanPrototypeToString:\n     case kBooleanPrototypeValueOf:\n-    case kCallProxy:\n-    case kConstructFunction:\n-    case kConstructProxy:\n     case kContinueToCodeStubBuiltin:\n     case kContinueToCodeStubBuiltinWithResult:\n     case kContinueToJavaScriptBuiltin:\n@@ -612,36 +459,15 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kMapPrototypeHas:\n     case kMapPrototypeKeys:\n     case kMapPrototypeValues:\n-    case kMathAcos:\n-    case kMathAcosh:\n-    case kMathAsin:\n-    case kMathAsinh:\n-    case kMathAtan:\n-    case kMathAtan2:\n-    case kMathAtanh:\n-    case kMathCbrt:\n     case kMathCeil:\n-    case kMathCos:\n-    case kMathCosh:\n-    case kMathExp:\n-    case kMathExpm1:\n     case kMathFloor:\n     case kMathFround:\n-    case kMathLog:\n-    case kMathLog10:\n-    case kMathLog1p:\n-    case kMathLog2:\n     case kMathMax:\n     case kMathMin:\n     case kMathRound:\n     case kMathSign:\n-    case kMathSin:\n-    case kMathSinh:\n     case kMathSqrt:\n-    case kMathTan:\n-    case kMathTanh:\n     case kMathTrunc:\n-    case kModulus:\n     case kMultiply:\n     case kNegate:\n     case kNewArgumentsElements:\n@@ -650,7 +476,6 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kNonPrimitiveToPrimitive_Default:\n     case kNonPrimitiveToPrimitive_Number:\n     case kNonPrimitiveToPrimitive_String:\n-    case kNumberConstructor:\n     case kNumberIsFinite:\n     case kNumberIsInteger:\n     case kNumberIsNaN:\n@@ -659,7 +484,6 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kNumberPrototypeValueOf:\n     case kNumberToString:\n     case kObjectConstructor:\n-    case kObjectConstructor_ConstructStub:\n     case kObjectCreate:\n     case kObjectIs:\n     case kObjectKeys:\n@@ -672,7 +496,6 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kOrdinaryHasInstance:\n     case kOrdinaryToPrimitive_Number:\n     case kOrdinaryToPrimitive_String:\n-    case kPromiseAll:\n     case kPromiseCapabilityDefaultReject:\n     case kPromiseCapabilityDefaultResolve:\n     case kPromiseCatchFinally:\n@@ -693,11 +516,9 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kPromiseThenFinally:\n     case kPromiseThrowerFinally:\n     case kPromiseValueThunkFinally:\n-    case kProxyConstructor:\n     case kProxyGetProperty:\n     case kProxyHasProperty:\n     case kProxySetProperty:\n-    case kRecordWrite:\n     case kReflectHas:\n     case kRegExpConstructor:\n     case kRegExpPrototypeCompile:\n@@ -727,7 +548,6 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kStrictEqual:\n     case kStringCodePointAtUTF16:\n     case kStringCodePointAtUTF32:\n-    case kStringConstructor:\n     case kStringEqual:\n     case kStringGreaterThan:\n     case kStringGreaterThanOrEqual:\n@@ -788,7 +608,6 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kToNumeric:\n     case kToString:\n     case kTypedArrayConstructor:\n-    case kTypedArrayConstructor_ConstructStub:\n     case kTypedArrayPrototypeByteLength:\n     case kTypedArrayPrototypeByteOffset:\n     case kTypedArrayPrototypeEntries:\n@@ -816,562 +635,39 @@ bool Builtins::IsIsolateIndependent(int index) {\n     case kWeakSetHas:\n     case kWeakSetPrototypeAdd:\n     case kWeakSetPrototypeDelete:\n-#endif\n+#endif  // !DEBUG\n       return true;\n     default:\n       return false;\n   }\n   UNREACHABLE();\n }\n \n+#ifdef V8_EMBEDDED_BUILTINS\n // static\n-bool Builtins::IsOffHeapSafe(int index) {\n-#ifndef V8_EMBEDDED_BUILTINS\n-  return false;\n-#else\n-  DCHECK(IsBuiltinId(index));\n-  if (IsTooShortForOffHeapTrampoline(index)) return false;\n-  switch (index) {\n-#ifdef DEBUG\n-    case kAbortJS:\n-    case kAllocateHeapNumber:\n-    case kArrayEveryLoopEagerDeoptContinuation:\n-    case kArrayFilterLoopEagerDeoptContinuation:\n-    case kArrayFindIndexLoopEagerDeoptContinuation:\n-    case kArrayFindIndexLoopLazyDeoptContinuation:\n-    case kArrayFindLoopEagerDeoptContinuation:\n-    case kArrayFindLoopLazyDeoptContinuation:\n-    case kArrayForEachLoopEagerDeoptContinuation:\n-    case kArrayForEachLoopLazyDeoptContinuation:\n-    case kArrayMapLoopEagerDeoptContinuation:\n-    case kArrayReduceLoopEagerDeoptContinuation:\n-    case kArrayReduceLoopLazyDeoptContinuation:\n-    case kArrayReducePreLoopEagerDeoptContinuation:\n-    case kArrayReduceRightLoopEagerDeoptContinuation:\n-    case kArrayReduceRightLoopLazyDeoptContinuation:\n-    case kArrayReduceRightPreLoopEagerDeoptContinuation:\n-    case kArraySomeLoopEagerDeoptContinuation:\n-    case kBitwiseNot:\n-    case kBooleanPrototypeToString:\n-    case kBooleanPrototypeValueOf:\n-    case kContinueToCodeStubBuiltin:\n-    case kContinueToCodeStubBuiltinWithResult:\n-    case kContinueToJavaScriptBuiltin:\n-    case kContinueToJavaScriptBuiltinWithResult:\n-    case kDatePrototypeGetDate:\n-    case kDatePrototypeGetDay:\n-    case kDatePrototypeGetFullYear:\n-    case kDatePrototypeGetHours:\n-    case kDatePrototypeGetMilliseconds:\n-    case kDatePrototypeGetMinutes:\n-    case kDatePrototypeGetMonth:\n-    case kDatePrototypeGetSeconds:\n-    case kDatePrototypeGetTime:\n-    case kDatePrototypeGetTimezoneOffset:\n-    case kDatePrototypeGetUTCDate:\n-    case kDatePrototypeGetUTCDay:\n-    case kDatePrototypeGetUTCFullYear:\n-    case kDatePrototypeGetUTCHours:\n-    case kDatePrototypeGetUTCMilliseconds:\n-    case kDatePrototypeGetUTCMinutes:\n-    case kDatePrototypeGetUTCMonth:\n-    case kDatePrototypeGetUTCSeconds:\n-    case kDatePrototypeToPrimitive:\n-    case kDatePrototypeValueOf:\n-    case kDecrement:\n-    case kDivide:\n-    case kGlobalIsFinite:\n-    case kGlobalIsNaN:\n-    case kIncrement:\n-    case kKeyedLoadIC_Slow:\n-    case kKeyedLoadICTrampoline:\n-    case kKeyedStoreIC_Slow:\n-    case kKeyedStoreICTrampoline:\n-    case kLoadField:\n-    case kLoadGlobalICInsideTypeofTrampoline:\n-    case kLoadGlobalIC_Slow:\n-    case kLoadGlobalICTrampoline:\n-    case kLoadIC_Slow:\n-    case kLoadICTrampoline:\n-    case kMapPrototypeEntries:\n-    case kMapPrototypeGet:\n-    case kMapPrototypeGetSize:\n-    case kMapPrototypeHas:\n-    case kMapPrototypeKeys:\n-    case kMapPrototypeValues:\n-    case kMathAcos:\n-    case kMathAcosh:\n-    case kMathAsin:\n-    case kMathAsinh:\n-    case kMathAtan:\n-    case kMathAtan2:\n-    case kMathAtanh:\n-    case kMathCbrt:\n-    case kMathCeil:\n-    case kMathCos:\n-    case kMathCosh:\n-    case kMathExp:\n-    case kMathExpm1:\n-    case kMathFloor:\n-    case kMathFround:\n-    case kMathLog:\n-    case kMathLog10:\n-    case kMathLog1p:\n-    case kMathLog2:\n-    case kMathMax:\n-    case kMathMin:\n-    case kMathRound:\n-    case kMathSign:\n-    case kMathSin:\n-    case kMathSinh:\n-    case kMathSqrt:\n-    case kMathTan:\n-    case kMathTanh:\n-    case kMathTrunc:\n-    case kModulus:\n-    case kMultiply:\n-    case kNonPrimitiveToPrimitive_Default:\n-    case kNonPrimitiveToPrimitive_Number:\n-    case kNonPrimitiveToPrimitive_String:\n-    case kNumberIsFinite:\n-    case kNumberIsInteger:\n-    case kNumberIsNaN:\n-    case kNumberIsSafeInteger:\n-    case kNumberPrototypeValueOf:\n-    case kObjectPrototypeToLocaleString:\n-    case kObjectPrototypeValueOf:\n-    case kPromiseCapabilityDefaultReject:\n-    case kPromiseCapabilityDefaultResolve:\n-    case kPromiseConstructorLazyDeoptContinuation:\n-    case kPromiseInternalReject:\n-    case kPromiseInternalResolve:\n-    case kPromiseResolveTrampoline:\n-    case kPromiseThrowerFinally:\n-    case kPromiseValueThunkFinally:\n-    case kProxyConstructor:\n-    case kReflectHas:\n-    case kRegExpPrototypeDotAllGetter:\n-    case kRegExpPrototypeGlobalGetter:\n-    case kRegExpPrototypeIgnoreCaseGetter:\n-    case kRegExpPrototypeMultilineGetter:\n-    case kRegExpPrototypeSourceGetter:\n-    case kRegExpPrototypeStickyGetter:\n-    case kRegExpPrototypeUnicodeGetter:\n-    case kReturnReceiver:\n-    case kSetPrototypeEntries:\n-    case kSetPrototypeGetSize:\n-    case kSetPrototypeValues:\n-    case kStoreGlobalIC_Slow:\n-    case kStoreGlobalICTrampoline:\n-    case kStoreICTrampoline:\n-    case kStringPrototypeBig:\n-    case kStringPrototypeBlink:\n-    case kStringPrototypeBold:\n-    case kStringPrototypeConcat:\n-    case kStringPrototypeFixed:\n-    case kStringPrototypeItalics:\n-    case kStringPrototypeIterator:\n-    case kStringPrototypeSmall:\n-    case kStringPrototypeStrike:\n-    case kStringPrototypeSub:\n-    case kStringPrototypeSup:\n-#ifdef V8_INTL_SUPPORT\n-    case kStringPrototypeToLowerCaseIntl:\n-#endif\n-    case kSubtract:\n-    case kSymbolPrototypeToPrimitive:\n-    case kSymbolPrototypeToString:\n-    case kSymbolPrototypeValueOf:\n-    case kThrowWasmTrapDivByZero:\n-    case kThrowWasmTrapDivUnrepresentable:\n-    case kThrowWasmTrapFloatUnrepresentable:\n-    case kThrowWasmTrapFuncInvalid:\n-    case kThrowWasmTrapFuncSigMismatch:\n-    case kThrowWasmTrapMemOutOfBounds:\n-    case kThrowWasmTrapRemByZero:\n-    case kThrowWasmTrapUnreachable:\n-    case kToInteger:\n-    case kTypedArrayConstructor:\n-    case kWasmStackGuard:\n-    case kWeakMapGet:\n-    case kWeakMapHas:\n-    case kWeakMapPrototypeDelete:\n-    case kWeakMapPrototypeSet:\n-    case kWeakSetHas:\n-    case kWeakSetPrototypeAdd:\n-    case kWeakSetPrototypeDelete:\n-#else\n-    case kAbortJS:\n-    case kAdd:\n-    case kAllocateHeapNumber:\n-    case kArrayEvery:\n-    case kArrayEveryLoopContinuation:\n-    case kArrayEveryLoopEagerDeoptContinuation:\n-    case kArrayEveryLoopLazyDeoptContinuation:\n-    case kArrayFilterLoopEagerDeoptContinuation:\n-    case kArrayFilterLoopLazyDeoptContinuation:\n-    case kArrayFindIndexLoopAfterCallbackLazyDeoptContinuation:\n-    case kArrayFindIndexLoopContinuation:\n-    case kArrayFindIndexLoopEagerDeoptContinuation:\n-    case kArrayFindIndexLoopLazyDeoptContinuation:\n-    case kArrayFindLoopAfterCallbackLazyDeoptContinuation:\n-    case kArrayFindLoopContinuation:\n-    case kArrayFindLoopEagerDeoptContinuation:\n-    case kArrayFindLoopLazyDeoptContinuation:\n-    case kArrayForEach:\n-    case kArrayForEachLoopContinuation:\n-    case kArrayForEachLoopEagerDeoptContinuation:\n-    case kArrayForEachLoopLazyDeoptContinuation:\n-    case kArrayFrom:\n-    case kArrayIncludes:\n-    case kArrayIndexOf:\n-    case kArrayIsArray:\n-    case kArrayMapLoopContinuation:\n-    case kArrayMapLoopEagerDeoptContinuation:\n-    case kArrayMapLoopLazyDeoptContinuation:\n-    case kArrayOf:\n-    case kArrayPrototypeEntries:\n-    case kArrayPrototypeFind:\n-    case kArrayPrototypeFindIndex:\n-    case kArrayPrototypeKeys:\n-    case kArrayPrototypeSlice:\n-    case kArrayPrototypeValues:\n-    case kArrayReduce:\n-    case kArrayReduceLoopContinuation:\n-    case kArrayReduceLoopEagerDeoptContinuation:\n-    case kArrayReduceLoopLazyDeoptContinuation:\n-    case kArrayReducePreLoopEagerDeoptContinuation:\n-    case kArrayReduceRight:\n-    case kArrayReduceRightLoopContinuation:\n-    case kArrayReduceRightLoopEagerDeoptContinuation:\n-    case kArrayReduceRightLoopLazyDeoptContinuation:\n-    case kArrayReduceRightPreLoopEagerDeoptContinuation:\n-    case kArraySome:\n-    case kArraySomeLoopContinuation:\n-    case kArraySomeLoopEagerDeoptContinuation:\n-    case kArraySomeLoopLazyDeoptContinuation:\n-    case kAsyncFromSyncIteratorPrototypeNext:\n-    case kAsyncFromSyncIteratorPrototypeReturn:\n-    case kAsyncFromSyncIteratorPrototypeThrow:\n-    case kAsyncFunctionAwaitFulfill:\n-    case kAsyncFunctionAwaitReject:\n-    case kAsyncFunctionPromiseCreate:\n-    case kAsyncFunctionPromiseRelease:\n-    case kAsyncGeneratorAwaitFulfill:\n-    case kAsyncGeneratorAwaitReject:\n-    case kAsyncGeneratorResumeNext:\n-    case kAsyncGeneratorReturnClosedFulfill:\n-    case kAsyncGeneratorReturnClosedReject:\n-    case kAsyncGeneratorReturnFulfill:\n-    case kAsyncGeneratorYieldFulfill:\n-    case kAsyncIteratorValueUnwrap:\n-    case kBitwiseNot:\n-    case kBooleanPrototypeToString:\n-    case kBooleanPrototypeValueOf:\n-    case kCallProxy:\n-    case kConstructFunction:\n-    case kConstructProxy:\n-    case kContinueToCodeStubBuiltin:\n-    case kContinueToCodeStubBuiltinWithResult:\n-    case kContinueToJavaScriptBuiltin:\n-    case kContinueToJavaScriptBuiltinWithResult:\n-    case kCreateGeneratorObject:\n-    case kCreateIterResultObject:\n-    case kCreateRegExpLiteral:\n-    case kDatePrototypeGetDate:\n-    case kDatePrototypeGetDay:\n-    case kDatePrototypeGetFullYear:\n-    case kDatePrototypeGetHours:\n-    case kDatePrototypeGetMilliseconds:\n-    case kDatePrototypeGetMinutes:\n-    case kDatePrototypeGetMonth:\n-    case kDatePrototypeGetSeconds:\n-    case kDatePrototypeGetTime:\n-    case kDatePrototypeGetTimezoneOffset:\n-    case kDatePrototypeGetUTCDate:\n-    case kDatePrototypeGetUTCDay:\n-    case kDatePrototypeGetUTCFullYear:\n-    case kDatePrototypeGetUTCHours:\n-    case kDatePrototypeGetUTCMilliseconds:\n-    case kDatePrototypeGetUTCMinutes:\n-    case kDatePrototypeGetUTCMonth:\n-    case kDatePrototypeGetUTCSeconds:\n-    case kDatePrototypeToPrimitive:\n-    case kDatePrototypeValueOf:\n-    case kDecrement:\n-    case kDeleteProperty:\n-    case kDivide:\n-    case kEqual:\n-    case kFastConsoleAssert:\n-    case kFastNewClosure:\n-    case kFastNewFunctionContextEval:\n-    case kFastNewFunctionContextFunction:\n-    case kFastNewObject:\n-    case kFindOrderedHashMapEntry:\n-    case kForInEnumerate:\n-    case kForInFilter:\n-    case kFunctionPrototypeHasInstance:\n-    case kGeneratorPrototypeNext:\n-    case kGeneratorPrototypeReturn:\n-    case kGeneratorPrototypeThrow:\n-    case kGetSuperConstructor:\n-    case kGlobalIsFinite:\n-    case kGlobalIsNaN:\n-    case kGreaterThan:\n-    case kGreaterThanOrEqual:\n-    case kHasProperty:\n-    case kIncrement:\n-    case kInstanceOf:\n-    case kKeyedLoadIC_Megamorphic:\n-    case kKeyedLoadIC_PolymorphicName:\n-    case kKeyedLoadIC_Slow:\n-    case kKeyedLoadICTrampoline:\n-    case kKeyedStoreIC_Slow:\n-    case kKeyedStoreICTrampoline:\n-    case kLessThan:\n-    case kLessThanOrEqual:\n-    case kLoadField:\n-    case kLoadGlobalIC:\n-    case kLoadGlobalICInsideTypeof:\n-    case kLoadGlobalICInsideTypeofTrampoline:\n-    case kLoadGlobalIC_Slow:\n-    case kLoadGlobalICTrampoline:\n-    case kLoadIC:\n-    case kLoadIC_FunctionPrototype:\n-    case kLoadIC_Noninlined:\n-    case kLoadIC_Slow:\n-    case kLoadICTrampoline:\n-    case kLoadIC_Uninitialized:\n-    case kMapPrototypeEntries:\n-    case kMapPrototypeForEach:\n-    case kMapPrototypeGet:\n-    case kMapPrototypeGetSize:\n-    case kMapPrototypeHas:\n-    case kMapPrototypeKeys:\n-    case kMapPrototypeValues:\n-    case kMathAcos:\n-    case kMathAcosh:\n-    case kMathAsin:\n-    case kMathAsinh:\n-    case kMathAtan:\n-    case kMathAtan2:\n-    case kMathAtanh:\n-    case kMathCbrt:\n-    case kMathCeil:\n-    case kMathCos:\n-    case kMathCosh:\n-    case kMathExp:\n-    case kMathExpm1:\n-    case kMathFloor:\n-    case kMathFround:\n-    case kMathLog:\n-    case kMathLog10:\n-    case kMathLog1p:\n-    case kMathLog2:\n-    case kMathMax:\n-    case kMathMin:\n-    case kMathRound:\n-    case kMathSign:\n-    case kMathSin:\n-    case kMathSinh:\n-    case kMathSqrt:\n-    case kMathTan:\n-    case kMathTanh:\n-    case kMathTrunc:\n-    case kModulus:\n-    case kMultiply:\n-    case kNegate:\n-    case kNewArgumentsElements:\n-    case kNonNumberToNumber:\n-    case kNonNumberToNumeric:\n-    case kNonPrimitiveToPrimitive_Default:\n-    case kNonPrimitiveToPrimitive_Number:\n-    case kNonPrimitiveToPrimitive_String:\n-    case kNumberConstructor:\n-    case kNumberIsFinite:\n-    case kNumberIsInteger:\n-    case kNumberIsNaN:\n-    case kNumberIsSafeInteger:\n-    case kNumberParseFloat:\n-    case kNumberPrototypeValueOf:\n-    case kNumberToString:\n-    case kObjectConstructor:\n-    case kObjectConstructor_ConstructStub:\n-    case kObjectCreate:\n-    case kObjectIs:\n-    case kObjectKeys:\n-    case kObjectPrototypeHasOwnProperty:\n-    case kObjectPrototypeIsPrototypeOf:\n-    case kObjectPrototypeToLocaleString:\n-    case kObjectPrototypeToString:\n-    case kObjectPrototypeValueOf:\n-    case kOrderedHashTableHealIndex:\n-    case kOrdinaryHasInstance:\n-    case kOrdinaryToPrimitive_Number:\n-    case kOrdinaryToPrimitive_String:\n-    case kPromiseAll:\n-    case kPromiseCapabilityDefaultReject:\n-    case kPromiseCapabilityDefaultResolve:\n-    case kPromiseCatchFinally:\n-    case kPromiseConstructor:\n-    case kPromiseConstructorLazyDeoptContinuation:\n-    case kPromiseFulfillReactionJob:\n-    case kPromiseInternalConstructor:\n-    case kPromiseInternalReject:\n-    case kPromiseInternalResolve:\n-    case kPromisePrototypeCatch:\n-    case kPromisePrototypeFinally:\n-    case kPromiseRace:\n-    case kPromiseReject:\n-    case kPromiseRejectReactionJob:\n-    case kPromiseResolve:\n-    case kPromiseResolveThenableJob:\n-    case kPromiseResolveTrampoline:\n-    case kPromiseThenFinally:\n-    case kPromiseThrowerFinally:\n-    case kPromiseValueThunkFinally:\n-    case kProxyConstructor:\n-    case kProxyGetProperty:\n-    case kProxyHasProperty:\n-    case kProxySetProperty:\n-    case kRecordWrite:\n-    case kReflectHas:\n-    case kRegExpConstructor:\n-    case kRegExpPrototypeCompile:\n-    case kRegExpPrototypeDotAllGetter:\n-    case kRegExpPrototypeFlagsGetter:\n-    case kRegExpPrototypeGlobalGetter:\n-    case kRegExpPrototypeIgnoreCaseGetter:\n-    case kRegExpPrototypeMultilineGetter:\n-    case kRegExpPrototypeReplace:\n-    case kRegExpPrototypeSearch:\n-    case kRegExpPrototypeSourceGetter:\n-    case kRegExpPrototypeSplit:\n-    case kRegExpPrototypeStickyGetter:\n-    case kRegExpPrototypeUnicodeGetter:\n-    case kResolvePromise:\n-    case kReturnReceiver:\n-    case kRunMicrotasks:\n-    case kSameValue:\n-    case kSetPrototypeEntries:\n-    case kSetPrototypeForEach:\n-    case kSetPrototypeGetSize:\n-    case kSetPrototypeHas:\n-    case kSetPrototypeValues:\n-    case kStoreGlobalIC_Slow:\n-    case kStoreGlobalICTrampoline:\n-    case kStoreICTrampoline:\n-    case kStrictEqual:\n-    case kStringCodePointAtUTF16:\n-    case kStringCodePointAtUTF32:\n-    case kStringConstructor:\n-    case kStringEqual:\n-    case kStringGreaterThan:\n-    case kStringGreaterThanOrEqual:\n-    case kStringIndexOf:\n-    case kStringLessThan:\n-    case kStringLessThanOrEqual:\n-    case kStringPrototypeAnchor:\n-    case kStringPrototypeBig:\n-    case kStringPrototypeBlink:\n-    case kStringPrototypeBold:\n-    case kStringPrototypeCharCodeAt:\n-    case kStringPrototypeCodePointAt:\n-    case kStringPrototypeConcat:\n-    case kStringPrototypeFixed:\n-    case kStringPrototypeFontcolor:\n-    case kStringPrototypeFontsize:\n-    case kStringPrototypeIncludes:\n-    case kStringPrototypeIndexOf:\n-    case kStringPrototypeItalics:\n-    case kStringPrototypeIterator:\n-    case kStringPrototypeLink:\n-    case kStringPrototypeMatch:\n-    case kStringPrototypePadEnd:\n-    case kStringPrototypePadStart:\n-    case kStringPrototypeRepeat:\n-    case kStringPrototypeReplace:\n-    case kStringPrototypeSearch:\n-    case kStringPrototypeSmall:\n-    case kStringPrototypeStrike:\n-    case kStringPrototypeSub:\n-    case kStringPrototypeSup:\n-#ifdef V8_INTL_SUPPORT\n-    case kStringPrototypeToLowerCaseIntl:\n-    case kStringToLowerCaseIntl:\n-#endif\n-    case kStringPrototypeToString:\n-    case kStringPrototypeValueOf:\n-    case kStringRepeat:\n-    case kStringToNumber:\n-    case kSubtract:\n-    case kSymbolPrototypeToPrimitive:\n-    case kSymbolPrototypeToString:\n-    case kSymbolPrototypeValueOf:\n-    case kThrowWasmTrapDivByZero:\n-    case kThrowWasmTrapDivUnrepresentable:\n-    case kThrowWasmTrapFloatUnrepresentable:\n-    case kThrowWasmTrapFuncInvalid:\n-    case kThrowWasmTrapFuncSigMismatch:\n-    case kThrowWasmTrapMemOutOfBounds:\n-    case kThrowWasmTrapRemByZero:\n-    case kThrowWasmTrapUnreachable:\n-    case kToBoolean:\n-    case kToBooleanLazyDeoptContinuation:\n-    case kToInteger:\n-    case kToInteger_TruncateMinusZero:\n-    case kToName:\n-    case kToNumber:\n-    case kToNumeric:\n-    case kToString:\n-    case kTypedArrayConstructor:\n-    case kTypedArrayConstructor_ConstructStub:\n-    case kTypedArrayPrototypeByteLength:\n-    case kTypedArrayPrototypeByteOffset:\n-    case kTypedArrayPrototypeEntries:\n-    case kTypedArrayPrototypeEvery:\n-    case kTypedArrayPrototypeFind:\n-    case kTypedArrayPrototypeFindIndex:\n-    case kTypedArrayPrototypeForEach:\n-    case kTypedArrayPrototypeKeys:\n-    case kTypedArrayPrototypeLength:\n-    case kTypedArrayPrototypeReduce:\n-    case kTypedArrayPrototypeReduceRight:\n-    case kTypedArrayPrototypeSet:\n-    case kTypedArrayPrototypeSlice:\n-    case kTypedArrayPrototypeSome:\n-    case kTypedArrayPrototypeSubArray:\n-    case kTypedArrayPrototypeToStringTag:\n-    case kTypedArrayPrototypeValues:\n-    case kTypeof:\n-    case kWasmStackGuard:\n-    case kWeakMapGet:\n-    case kWeakMapHas:\n-    case kWeakMapLookupHashIndex:\n-    case kWeakMapPrototypeDelete:\n-    case kWeakMapPrototypeSet:\n-    case kWeakSetHas:\n-    case kWeakSetPrototypeAdd:\n-    case kWeakSetPrototypeDelete:\n-#endif  // !DEBUG\n-      return true;\n-    default:\n-      return false;\n+Handle<Code> Builtins::GenerateOffHeapTrampolineFor(Isolate* isolate,\n+                                                    Address off_heap_entry) {\n+  DCHECK(isolate->serializer_enabled());\n+  DCHECK_NOT_NULL(isolate->embedded_blob());\n+  DCHECK_NE(0, isolate->embedded_blob_size());\n+\n+  constexpr size_t buffer_size = 256;  // Enough to fit the single jmp.\n+  byte buffer[buffer_size];            // NOLINT(runtime/arrays)\n+\n+  // Generate replacement code that simply tail-calls the off-heap code.\n+  MacroAssembler masm(isolate, buffer, buffer_size, CodeObjectRequired::kYes);\n+  DCHECK(!masm.has_frame());\n+  {\n+    FrameScope scope(&masm, StackFrame::NONE);\n+    masm.JumpToInstructionStream(off_heap_entry);\n   }\n-  UNREACHABLE();\n-#endif  // V8_EMBEDDED_BUILTINS\n-}\n \n-// static\n-bool Builtins::IsTooShortForOffHeapTrampoline(int index) {\n-  switch (index) {\n-    case kLoadIC_StringLength:\n-    case kLoadIC_StringWrapperLength:\n-      return true;\n-    default:\n-      return false;\n-  }\n+  CodeDesc desc;\n+  masm.GetCode(isolate, &desc);\n+\n+  return isolate->factory()->NewCode(desc, Code::BUILTIN, masm.CodeObject());\n }\n+#endif  // V8_EMBEDDED_BUILTINS\n \n // static\n Builtins::Kind Builtins::KindOf(int index) {"
        },
        {
            "sha": "7745420366e1e48e728ccc57d81868fa27738d40",
            "filename": "deps/v8/src/builtins/builtins.h",
            "status": "modified",
            "additions": 14,
            "deletions": 16,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -72,7 +72,7 @@ class Builtins {\n   Handle<Code> NewFunctionContext(ScopeType scope_type);\n   Handle<Code> JSConstructStubGeneric();\n \n-  // Used by BuiltinDeserializer.\n+  // Used by BuiltinDeserializer and CreateOffHeapTrampolines in isolate.cc.\n   void set_builtin(int index, HeapObject* builtin);\n \n   Code* builtin(int index) {\n@@ -111,10 +111,10 @@ class Builtins {\n \n   // True, iff the given code object is a builtin. Note that this does not\n   // necessarily mean that its kind is Code::BUILTIN.\n-  static bool IsBuiltin(Code* code);\n+  static bool IsBuiltin(const Code* code);\n \n-  // True, iff the given code object is a builtin with off-heap code.\n-  static bool IsOffHeapBuiltin(Code* code);\n+  // True, iff the given code object is a builtin with off-heap embedded code.\n+  static bool IsEmbeddedBuiltin(const Code* code);\n \n   // Returns true iff the given builtin can be lazy-loaded from the snapshot.\n   // This is true in general for most builtins with the exception of a few\n@@ -125,17 +125,6 @@ class Builtins {\n   // TODO(jgruber,v8:6666): Remove once all builtins have been migrated.\n   static bool IsIsolateIndependent(int index);\n \n-  // This is the condition we currently use to determine whether a builtin is\n-  // copied off-heap when --stress-off-heap-code is passed. Such builtins do not\n-  // need to be isolate-independent, e.g. they can contain external references\n-  // that point to one specific isolate. A further restrictions is that there\n-  // must be enough space for the trampoline.\n-  static bool IsOffHeapSafe(int index);\n-\n-  // The off-heap trampoline is short but requires a certain minimal instruction\n-  // size. This function states whether a given builtin is too short.\n-  static bool IsTooShortForOffHeapTrampoline(int index);\n-\n   bool is_initialized() const { return initialized_; }\n \n   // Used by SetupIsolateDelegate and Deserializer.\n@@ -144,7 +133,7 @@ class Builtins {\n     initialized_ = true;\n   }\n \n-  MUST_USE_RESULT static MaybeHandle<Object> InvokeApiFunction(\n+  V8_WARN_UNUSED_RESULT static MaybeHandle<Object> InvokeApiFunction(\n       Isolate* isolate, bool is_construct, Handle<HeapObject> function,\n       Handle<Object> receiver, int argc, Handle<Object> args[],\n       Handle<HeapObject> new_target);\n@@ -160,6 +149,14 @@ class Builtins {\n  private:\n   Builtins();\n \n+#ifdef V8_EMBEDDED_BUILTINS\n+  // Creates a trampoline code object that jumps to the given off-heap entry.\n+  // The result should not be used directly, but only from the related Factory\n+  // function.\n+  static Handle<Code> GenerateOffHeapTrampolineFor(Isolate* isolate,\n+                                                   Address off_heap_entry);\n+#endif\n+\n   static void Generate_CallFunction(MacroAssembler* masm,\n                                     ConvertReceiverMode mode);\n \n@@ -198,6 +195,7 @@ class Builtins {\n   Object* builtins_[builtin_count];\n   bool initialized_;\n \n+  friend class Factory;  // For GenerateOffHeapTrampolineFor.\n   friend class Isolate;\n   friend class SetupIsolateDelegate;\n "
        },
        {
            "sha": "c044a348da206d83cf017f138aa31e764cfcf95c",
            "filename": "deps/v8/src/builtins/constants-table-builder.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -32,6 +32,8 @@ uint32_t BuiltinsConstantsTableBuilder::AddObject(Handle<Object> object) {\n   // Not yet finalized.\n   DCHECK_EQ(isolate_->heap()->empty_fixed_array(),\n             isolate_->heap()->builtins_constants_table());\n+\n+  DCHECK(isolate_->serializer_enabled());\n #endif\n \n   uint32_t* maybe_key = map_.Find(object);\n@@ -49,6 +51,7 @@ void BuiltinsConstantsTableBuilder::Finalize() {\n \n   DCHECK_EQ(isolate_->heap()->empty_fixed_array(),\n             isolate_->heap()->builtins_constants_table());\n+  DCHECK(isolate_->serializer_enabled());\n \n   DCHECK_LT(0, map_.size());\n   Handle<FixedArray> table ="
        },
        {
            "sha": "aefad8c3bb8d382a37e119ffafc59cf53cab93f2",
            "filename": "deps/v8/src/builtins/constants-table-builder.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fconstants-table-builder.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -24,8 +24,8 @@ class BuiltinsConstantsTableBuilder final {\n  public:\n   explicit BuiltinsConstantsTableBuilder(Isolate* isolate);\n \n-  // Returns the index within the builtins constants list for the given object,\n-  // possibly adding the object to the cache. Objects are deduplicated.\n+  // Returns the index within the builtins constants table for the given\n+  // object, possibly adding the object to the table. Objects are deduplicated.\n   uint32_t AddObject(Handle<Object> object);\n \n   // Should be called after all affected code (e.g. builtins and bytecode"
        },
        {
            "sha": "eae9ff559467a1f82f6f412905fd28b1a82a8a0d",
            "filename": "deps/v8/src/builtins/growable-fixed-array-gen.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgrowable-fixed-array-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgrowable-fixed-array-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fgrowable-fixed-array-gen.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -90,8 +90,8 @@ TNode<FixedArray> GrowableFixedArray::ResizeFixedArray(\n \n   CodeStubAssembler::ExtractFixedArrayFlags flags;\n   flags |= CodeStubAssembler::ExtractFixedArrayFlag::kFixedArrays;\n-  TNode<FixedArray> to_array = CAST(ExtractFixedArray(\n-      from_array, nullptr, element_count, new_capacity, flags));\n+  TNode<FixedArray> to_array = ExtractFixedArray(\n+      from_array, nullptr, element_count, new_capacity, flags);\n \n   return to_array;\n }"
        },
        {
            "sha": "2afcebab80c5c8159985eadb1d92b317112ff506",
            "filename": "deps/v8/src/builtins/ia32/builtins-ia32.cc",
            "status": "modified",
            "additions": 202,
            "deletions": 114,
            "changes": 316,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4",
            "patch": "@@ -217,7 +217,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     // -----------------------------------\n \n     __ mov(ebx, FieldOperand(edi, JSFunction::kSharedFunctionInfoOffset));\n-    __ test(FieldOperand(ebx, SharedFunctionInfo::kCompilerHintsOffset),\n+    __ test(FieldOperand(ebx, SharedFunctionInfo::kFlagsOffset),\n             Immediate(SharedFunctionInfo::IsDerivedConstructorBit::kMask));\n     __ j(not_zero, &not_create_implicit_receiver);\n \n@@ -338,7 +338,7 @@ void Generate_JSConstructStubGeneric(MacroAssembler* masm,\n     __ bind(&other_result);\n     __ mov(ebx, Operand(ebp, ConstructFrameConstants::kConstructorOffset));\n     __ mov(ebx, FieldOperand(ebx, JSFunction::kSharedFunctionInfoOffset));\n-    __ test(FieldOperand(ebx, SharedFunctionInfo::kCompilerHintsOffset),\n+    __ test(FieldOperand(ebx, SharedFunctionInfo::kFlagsOffset),\n             Immediate(SharedFunctionInfo::IsClassConstructorBit::kMask));\n \n     if (restrict_constructor_return) {\n@@ -382,9 +382,6 @@ void Builtins::Generate_JSConstructStubGenericUnrestrictedReturn(\n     MacroAssembler* masm) {\n   return Generate_JSConstructStubGeneric(masm, false);\n }\n-void Builtins::Generate_JSConstructStubApi(MacroAssembler* masm) {\n-  Generate_JSBuiltinsConstructStubHelper(masm);\n-}\n void Builtins::Generate_JSBuiltinsConstructStub(MacroAssembler* masm) {\n   Generate_JSBuiltinsConstructStubHelper(masm);\n }\n@@ -497,6 +494,19 @@ void Builtins::Generate_JSConstructEntryTrampoline(MacroAssembler* masm) {\n   Generate_JSEntryTrampolineHelper(masm, true);\n }\n \n+static void GetSharedFunctionInfoBytecode(MacroAssembler* masm,\n+                                          Register sfi_data,\n+                                          Register scratch1) {\n+  Label done;\n+\n+  __ CmpObjectType(sfi_data, INTERPRETER_DATA_TYPE, scratch1);\n+  __ j(not_equal, &done, Label::kNear);\n+  __ mov(sfi_data,\n+         FieldOperand(sfi_data, InterpreterData::kBytecodeArrayOffset));\n+\n+  __ bind(&done);\n+}\n+\n // static\n void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n@@ -571,6 +581,9 @@ void Builtins::Generate_ResumeGeneratorTrampoline(MacroAssembler* masm) {\n   if (FLAG_debug_code) {\n     __ mov(ecx, FieldOperand(edi, JSFunction::kSharedFunctionInfoOffset));\n     __ mov(ecx, FieldOperand(ecx, SharedFunctionInfo::kFunctionDataOffset));\n+    __ Push(eax);\n+    GetSharedFunctionInfoBytecode(masm, ecx, eax);\n+    __ Pop(eax);\n     __ CmpObjectType(ecx, BYTECODE_ARRAY_TYPE, ecx);\n     __ Assert(equal, AbortReason::kMissingBytecodeArray);\n   }\n@@ -673,7 +686,7 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n   // -----------------------------------\n   DCHECK(!AreAliased(feedback_vector, eax, edx, edi, scratch));\n \n-  Label optimized_code_slot_is_cell, fallthrough;\n+  Label optimized_code_slot_is_weak_ref, fallthrough;\n \n   Register closure = edi;\n   Register optimized_code_entry = scratch;\n@@ -682,9 +695,9 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n          FieldOperand(feedback_vector, FeedbackVector::kOptimizedCodeOffset));\n \n   // Check if the code entry is a Smi. If yes, we interpret it as an\n-  // optimisation marker. Otherwise, interpret is as a weak cell to a code\n+  // optimisation marker. Otherwise, interpret it as a weak reference to a code\n   // object.\n-  __ JumpIfNotSmi(optimized_code_entry, &optimized_code_slot_is_cell);\n+  __ JumpIfNotSmi(optimized_code_entry, &optimized_code_slot_is_weak_ref);\n \n   {\n     // Optimized code slot is an optimization marker.\n@@ -719,12 +732,11 @@ static void MaybeTailCallOptimizedCodeSlot(MacroAssembler* masm,\n   }\n \n   {\n-    // Optimized code slot is a WeakCell.\n-    __ bind(&optimized_code_slot_is_cell);\n+    // Optimized code slot is a weak reference.\n+    __ bind(&optimized_code_slot_is_weak_ref);\n+\n+    __ LoadWeakValue(optimized_code_entry, &fallthrough);\n \n-    __ mov(optimized_code_entry,\n-           FieldOperand(optimized_code_entry, WeakCell::kValueOffset));\n-    __ JumpIfSmi(optimized_code_entry, &fallthrough);\n     __ push(eax);\n     __ push(edx);\n \n@@ -858,10 +870,14 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n \n   // Get the bytecode array from the function object (or from the DebugInfo if\n   // it is present) and load it into kInterpreterBytecodeArrayRegister.\n-  Label maybe_load_debug_bytecode_array, bytecode_array_loaded;\n+  Label maybe_load_debug_bytecode_array, bytecode_array_loaded,\n+      apply_instrumentation;\n   __ mov(eax, FieldOperand(edi, JSFunction::kSharedFunctionInfoOffset));\n   __ mov(kInterpreterBytecodeArrayRegister,\n          FieldOperand(eax, SharedFunctionInfo::kFunctionDataOffset));\n+  __ Push(eax);\n+  GetSharedFunctionInfoBytecode(masm, kInterpreterBytecodeArrayRegister, eax);\n+  __ Pop(eax);\n   __ JumpIfNotSmi(FieldOperand(eax, SharedFunctionInfo::kDebugInfoOffset),\n                   &maybe_load_debug_bytecode_array);\n   __ bind(&bytecode_array_loaded);\n@@ -978,15 +994,29 @@ void Builtins::Generate_InterpreterEntryTrampoline(MacroAssembler* masm) {\n   // kInterpreterBytecodeArrayRegister is already loaded with\n   // SharedFunctionInfo::kFunctionDataOffset.\n   __ bind(&maybe_load_debug_bytecode_array);\n-  __ push(ebx);  // feedback_vector == ebx, so save it.\n-  __ mov(ecx, FieldOperand(eax, SharedFunctionInfo::kDebugInfoOffset));\n-  __ mov(ebx, FieldOperand(ecx, DebugInfo::kFlagsOffset));\n-  __ SmiUntag(ebx);\n-  __ test(ebx, Immediate(DebugInfo::kHasBreakInfo));\n+  __ mov(eax, FieldOperand(eax, SharedFunctionInfo::kDebugInfoOffset));\n+  __ mov(ecx, FieldOperand(eax, DebugInfo::kDebugBytecodeArrayOffset));\n+  __ JumpIfRoot(ecx, Heap::kUndefinedValueRootIndex, &bytecode_array_loaded);\n+\n+  __ mov(kInterpreterBytecodeArrayRegister, ecx);\n+  __ mov(ecx, FieldOperand(eax, DebugInfo::kFlagsOffset));\n+  __ SmiUntag(ecx);\n+  __ and_(ecx, Immediate(DebugInfo::kDebugExecutionMode));\n+  STATIC_ASSERT(static_cast<int>(DebugInfo::kDebugExecutionMode) ==\n+                static_cast<int>(DebugInfo::kSideEffects));\n+  ExternalReference debug_execution_mode =\n+      ExternalReference::debug_execution_mode_address(masm->isolate());\n+  __ cmp(ecx, Operand::StaticVariable(debug_execution_mode));\n+  __ j(equal, &bytecode_array_loaded);\n+\n+  __ pop(ecx);  // get JSFunction from stack\n+  __ push(ecx);\n+  __ push(ebx);  // preserve feedback_vector and bytecode array register\n+  __ push(kInterpreterBytecodeArrayRegister);\n+  __ push(ecx);  // pass function as argument\n+  __ CallRuntime(Runtime::kDebugApplyInstrumentation);\n+  __ pop(kInterpreterBytecodeArrayRegister);\n   __ pop(ebx);\n-  __ j(zero, &bytecode_array_loaded);\n-  __ mov(kInterpreterBytecodeArrayRegister,\n-         FieldOperand(ecx, DebugInfo::kDebugBytecodeArrayOffset));\n   __ jmp(&bytecode_array_loaded);\n }\n \n@@ -1013,6 +1043,7 @@ static void Generate_InterpreterPushArgs(MacroAssembler* masm,\n void Builtins::Generate_InterpreterPushArgsThenCallImpl(\n     MacroAssembler* masm, ConvertReceiverMode receiver_mode,\n     InterpreterPushArgsMode mode) {\n+  DCHECK(mode != InterpreterPushArgsMode::kArrayFunction);\n   // ----------- S t a t e -------------\n   //  -- eax : the number of arguments (not including the receiver)\n   //  -- ebx : the address of the first argument to be pushed. Subsequent\n@@ -1055,11 +1086,7 @@ void Builtins::Generate_InterpreterPushArgsThenCallImpl(\n   // Call the target.\n   __ Push(edx);  // Re-push return address.\n \n-  if (mode == InterpreterPushArgsMode::kJSFunction) {\n-    __ Jump(\n-        masm->isolate()->builtins()->CallFunction(ConvertReceiverMode::kAny),\n-        RelocInfo::CODE_TARGET);\n-  } else if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n+  if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n     __ Jump(BUILTIN_CODE(masm->isolate(), CallWithSpread),\n             RelocInfo::CODE_TARGET);\n   } else {\n@@ -1203,15 +1230,12 @@ void Builtins::Generate_InterpreterPushArgsThenConstructImpl(\n     __ AssertUndefinedOrAllocationSite(ebx);\n   }\n \n-  if (mode == InterpreterPushArgsMode::kJSFunction) {\n-    // Tail call to the function-specific construct stub (still in the caller\n+  if (mode == InterpreterPushArgsMode::kArrayFunction) {\n+    // Tail call to the array construct stub (still in the caller\n     // context at this point).\n     __ AssertFunction(edi);\n-\n-    __ mov(ecx, FieldOperand(edi, JSFunction::kSharedFunctionInfoOffset));\n-    __ mov(ecx, FieldOperand(ecx, SharedFunctionInfo::kConstructStubOffset));\n-    __ lea(ecx, FieldOperand(ecx, Code::kHeaderSize));\n-    __ jmp(ecx);\n+    ArrayConstructorStub array_constructor_stub(masm->isolate());\n+    __ Jump(array_constructor_stub.GetCode(), RelocInfo::CODE_TARGET);\n   } else if (mode == InterpreterPushArgsMode::kWithFinalSpread) {\n     // Call the constructor with unmodified eax, edi, edx values.\n     __ Jump(BUILTIN_CODE(masm->isolate(), ConstructWithSpread),\n@@ -1238,10 +1262,28 @@ void Builtins::Generate_InterpreterPushArgsThenConstructImpl(\n static void Generate_InterpreterEnterBytecode(MacroAssembler* masm) {\n   // Set the return address to the correct point in the interpreter entry\n   // trampoline.\n+  Label builtin_trampoline, trampoline_loaded;\n   Smi* interpreter_entry_return_pc_offset(\n       masm->isolate()->heap()->interpreter_entry_return_pc_offset());\n   DCHECK_NE(interpreter_entry_return_pc_offset, Smi::kZero);\n+\n+  // If the SFI function_data is an InterpreterData, get the trampoline stored\n+  // in it, otherwise get the trampoline from the builtins list.\n+  __ mov(ebx, Operand(ebp, StandardFrameConstants::kFunctionOffset));\n+  __ mov(ebx, FieldOperand(ebx, JSFunction::kSharedFunctionInfoOffset));\n+  __ mov(ebx, FieldOperand(ebx, SharedFunctionInfo::kFunctionDataOffset));\n+  __ Push(eax);\n+  __ CmpObjectType(ebx, INTERPRETER_DATA_TYPE, eax);\n+  __ j(not_equal, &builtin_trampoline, Label::kNear);\n+\n+  __ mov(ebx, FieldOperand(ebx, InterpreterData::kInterpreterTrampolineOffset));\n+  __ jmp(&trampoline_loaded, Label::kNear);\n+\n+  __ bind(&builtin_trampoline);\n   __ Move(ebx, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n+\n+  __ bind(&trampoline_loaded);\n+  __ Pop(eax);\n   __ add(ebx, Immediate(interpreter_entry_return_pc_offset->value() +\n                         Code::kHeaderSize - kHeapObjectTag));\n   __ push(ebx);\n@@ -1313,49 +1355,87 @@ void Builtins::Generate_InterpreterEnterBytecodeDispatch(MacroAssembler* masm) {\n   Generate_InterpreterEnterBytecode(masm);\n }\n \n-void Builtins::Generate_CheckOptimizationMarker(MacroAssembler* masm) {\n-  // ----------- S t a t e -------------\n-  //  -- rax : argument count (preserved for callee)\n-  //  -- rdx : new target (preserved for callee)\n-  //  -- rdi : target function (preserved for callee)\n-  // -----------------------------------\n-  Register closure = edi;\n-\n-  // Get the feedback vector.\n-  Register feedback_vector = ebx;\n-  __ mov(feedback_vector,\n-         FieldOperand(closure, JSFunction::kFeedbackCellOffset));\n-  __ mov(feedback_vector, FieldOperand(feedback_vector, Cell::kValueOffset));\n-\n-  // The feedback vector must be defined.\n-  if (FLAG_debug_code) {\n-    __ CompareRoot(feedback_vector, Heap::kUndefinedValueRootIndex);\n-    __ Assert(not_equal, AbortReason::kExpectedFeedbackVector);\n-  }\n-\n-  // Is there an optimization marker or optimized code in the feedback vector?\n-  MaybeTailCallOptimizedCodeSlot(masm, feedback_vector, ecx);\n-\n-  // Otherwise, tail call the SFI code.\n-  static_assert(kJavaScriptCallCodeStartRegister == ecx, \"ABI mismatch\");\n-  __ mov(ecx, FieldOperand(edi, JSFunction::kSharedFunctionInfoOffset));\n-  __ mov(ecx, FieldOperand(ecx, SharedFunctionInfo::kCodeOffset));\n-  __ lea(ecx, FieldOperand(ecx, Code::kHeaderSize));\n-  __ jmp(ecx);\n-}\n-\n void Builtins::Generate_CompileLazyDeoptimizedCode(MacroAssembler* masm) {\n-  // Set the code slot inside the JSFunction to the trampoline to the\n-  // interpreter entry.\n-  __ mov(ecx, FieldOperand(edi, JSFunction::kSharedFunctionInfoOffset));\n-  __ mov(ecx, FieldOperand(ecx, SharedFunctionInfo::kCodeOffset));\n+  // Set the code slot inside the JSFunction to CompileLazy.\n+  __ Move(ecx, BUILTIN_CODE(masm->isolate(), CompileLazy));\n   __ mov(FieldOperand(edi, JSFunction::kCodeOffset), ecx);\n   __ RecordWriteField(edi, JSFunction::kCodeOffset, ecx, ebx, kDontSaveFPRegs,\n                       OMIT_REMEMBERED_SET, OMIT_SMI_CHECK);\n   // Jump to compile lazy.\n   Generate_CompileLazy(masm);\n }\n \n+static void GetSharedFunctionInfoCode(MacroAssembler* masm, Register sfi_data,\n+                                      Register scratch1) {\n+  // Figure out the SFI's code object.\n+  Label done;\n+  Label check_is_bytecode_array;\n+  Label check_is_code;\n+  Label check_is_fixed_array;\n+  Label check_is_pre_parsed_scope_data;\n+  Label check_is_function_template_info;\n+  Label check_is_interpreter_data;\n+\n+  Register data_type = scratch1;\n+\n+  // IsSmi: Is builtin\n+  __ JumpIfNotSmi(sfi_data, &check_is_bytecode_array);\n+  __ mov(scratch1,\n+         Immediate(ExternalReference::builtins_address(masm->isolate())));\n+  // Avoid untagging the Smi unnecessarily.\n+  STATIC_ASSERT(times_2 == times_pointer_size - kSmiTagSize);\n+  __ mov(sfi_data, Operand(scratch1, sfi_data, times_2, 0));\n+  __ jmp(&done);\n+\n+  // Get map for subsequent checks.\n+  __ bind(&check_is_bytecode_array);\n+  __ mov(data_type, FieldOperand(sfi_data, HeapObject::kMapOffset));\n+  __ mov(data_type, FieldOperand(data_type, Map::kInstanceTypeOffset));\n+\n+  // IsBytecodeArray: Interpret bytecode\n+  __ cmpw(data_type, Immediate(BYTECODE_ARRAY_TYPE));\n+  __ j(not_equal, &check_is_code);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InterpreterEntryTrampoline));\n+  __ jmp(&done);\n+\n+  // IsCode: Run code\n+  __ bind(&check_is_code);\n+  __ cmpw(data_type, Immediate(CODE_TYPE));\n+  __ j(equal, &done);\n+\n+  // IsFixedArray: Instantiate using AsmWasmData,\n+  __ bind(&check_is_fixed_array);\n+  __ cmpw(data_type, Immediate(FIXED_ARRAY_TYPE));\n+  __ j(not_equal, &check_is_pre_parsed_scope_data);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), InstantiateAsmJs));\n+  __ jmp(&done);\n+\n+  // IsPreParsedScopeData: Compile lazy\n+  __ bind(&check_is_pre_parsed_scope_data);\n+  __ cmpw(data_type, Immediate(TUPLE2_TYPE));\n+  __ j(not_equal, &check_is_function_template_info);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), CompileLazy));\n+  __ jmp(&done);\n+\n+  // IsFunctionTemplateInfo: API call\n+  __ bind(&check_is_function_template_info);\n+  __ cmpw(data_type, Immediate(FUNCTION_TEMPLATE_INFO_TYPE));\n+  __ j(not_equal, &check_is_interpreter_data);\n+  __ Move(sfi_data, BUILTIN_CODE(masm->isolate(), HandleApiCall));\n+  __ jmp(&done);\n+\n+  // IsInterpreterData: Interpret bytecode\n+  __ bind(&check_is_interpreter_data);\n+  if (FLAG_debug_code) {\n+    __ cmpw(data_type, Immediate(INTERPRETER_DATA_TYPE));\n+    __ Check(equal, AbortReason::kInvalidSharedFunctionInfoData);\n+  }\n+  __ mov(sfi_data,\n+         FieldOperand(sfi_data, InterpreterData::kInterpreterTrampolineOffset));\n+\n+  __ bind(&done);\n+}\n+\n void Builtins::Generate_CompileLazy(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- eax : argument count (preserved for callee)\n@@ -1378,12 +1458,13 @@ void Builtins::Generate_CompileLazy(MacroAssembler* masm) {\n   // Is there an optimization marker or optimized code in the feedback vector?\n   MaybeTailCallOptimizedCodeSlot(masm, feedback_vector, ecx);\n \n-  // We found no optimized code.\n+  // We found no optimized code. Infer the code object needed for the SFI.\n   Register entry = ecx;\n   __ mov(entry, FieldOperand(closure, JSFunction::kSharedFunctionInfoOffset));\n+  __ mov(entry, FieldOperand(entry, SharedFunctionInfo::kFunctionDataOffset));\n+  GetSharedFunctionInfoCode(masm, entry, ebx);\n \n-  // If SFI points to anything other than CompileLazy, install that.\n-  __ mov(entry, FieldOperand(entry, SharedFunctionInfo::kCodeOffset));\n+  // If code entry points to anything other than CompileLazy, install that.\n   __ Move(ebx, masm->CodeObject());\n   __ cmp(entry, ebx);\n   __ j(equal, &gotta_call_runtime);\n@@ -1451,26 +1532,13 @@ void Builtins::Generate_DeserializeLazy(MacroAssembler* masm) {\n \n   {\n     // If we've reached this spot, the target builtin has been deserialized and\n-    // we simply need to copy it over. First to the shared function info.\n+    // we simply need to copy it over to the target function.\n \n     Register target_builtin = scratch1;\n-    Register shared = scratch0;\n \n-    __ mov(shared, FieldOperand(target, JSFunction::kSharedFunctionInfoOffset));\n-\n-    __ mov(FieldOperand(shared, SharedFunctionInfo::kCodeOffset),\n-           target_builtin);\n+    __ mov(FieldOperand(target, JSFunction::kCodeOffset), target_builtin);\n     __ push(eax);  // Write barrier clobbers these below.\n     __ push(target_builtin);\n-    __ RecordWriteField(shared, SharedFunctionInfo::kCodeOffset, target_builtin,\n-                        eax, kDontSaveFPRegs, OMIT_REMEMBERED_SET,\n-                        OMIT_SMI_CHECK);\n-    __ pop(target_builtin);  // eax is popped later, shared is now available.\n-\n-    // And second to the target function.\n-\n-    __ mov(FieldOperand(target, JSFunction::kCodeOffset), target_builtin);\n-    __ push(target_builtin);  // Write barrier clobbers these below.\n     __ RecordWriteField(target, JSFunction::kCodeOffset, target_builtin, eax,\n                         kDontSaveFPRegs, OMIT_REMEMBERED_SET, OMIT_SMI_CHECK);\n     __ pop(target_builtin);\n@@ -1845,9 +1913,6 @@ void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n   // -----------------------------------\n   Label generic_array_code;\n \n-  // Get the InternalArray function.\n-  __ LoadGlobalFunction(Context::INTERNAL_ARRAY_FUNCTION_INDEX, edi);\n-\n   if (FLAG_debug_code) {\n     // Initial map for the builtin InternalArray function should be a map.\n     __ mov(ebx, FieldOperand(edi, JSFunction::kPrototypeOrInitialMapOffset));\n@@ -1863,22 +1928,20 @@ void Builtins::Generate_InternalArrayConstructor(MacroAssembler* masm) {\n   // Run the native code for the InternalArray function called as a normal\n   // function.\n   // tail call a stub\n+  __ mov(ebx, masm->isolate()->factory()->undefined_value());\n   InternalArrayConstructorStub stub(masm->isolate());\n   __ TailCallStub(&stub);\n }\n \n void Builtins::Generate_ArrayConstructor(MacroAssembler* masm) {\n   // ----------- S t a t e -------------\n   //  -- eax : argc\n+  //  -- edi    : array function\n   //  -- esp[0] : return address\n   //  -- esp[4] : last argument\n   // -----------------------------------\n   Label generic_array_code;\n \n-  // Get the Array function.\n-  __ LoadGlobalFunction(Context::ARRAY_FUNCTION_INDEX, edi);\n-  __ mov(edx, edi);\n-\n   if (FLAG_debug_code) {\n     // Initial map for the builtin Array function should be a map.\n     __ mov(ebx, FieldOperand(edi, JSFunction::kPrototypeOrInitialMapOffset));\n@@ -1889,9 +1952,17 @@ void Builtins::Generate_ArrayConstructor(MacroAssembler* masm) {\n     __ Assert(equal, AbortReason::kUnexpectedInitialMapForArrayFunction);\n   }\n \n-  // Run the native code for the Array function called as a normal function.\n-  // tail call a stub\n+  // ebx is the AllocationSite - here undefined.\n   __ mov(ebx, masm->isolate()->factory()->undefined_value());\n+  // If edx (new target) is undefined, then this is the 'Call' case, so move\n+  // edi (the constructor) to rdx.\n+  Label call;\n+  __ cmp(edx, ebx);\n+  __ j(not_equal, &call);\n+  __ mov(edx, edi);\n+\n+  // Run the native code for the Array function called as a normal function.\n+  __ bind(&call);\n   ArrayConstructorStub stub(masm->isolate());\n   __ TailCallStub(&stub);\n }\n@@ -2115,7 +2186,7 @@ void Builtins::Generate_CallFunction(MacroAssembler* masm,\n   // Check that the function is not a \"classConstructor\".\n   Label class_constructor;\n   __ mov(edx, FieldOperand(edi, JSFunction::kSharedFunctionInfoOffset));\n-  __ test(FieldOperand(edx, SharedFunctionInfo::kCompilerHintsOffset),\n+  __ test(FieldOperand(edx, SharedFunctionInfo::kFlagsOffset),\n           Immediate(SharedFunctionInfo::IsClassConstructorBit::kMask));\n   __ j(not_zero, &class_constructor);\n \n@@ -2125,7 +2196,7 @@ void Builtins::Generate_CallFunction(MacroAssembler* masm,\n   __ mov(esi, FieldOperand(edi, JSFunction::kContextOffset));\n   // We need to convert the receiver for non-native sloppy mode functions.\n   Label done_convert;\n-  __ test(FieldOperand(edx, SharedFunctionInfo::kCompilerHintsOffset),\n+  __ test(FieldOperand(edx, SharedFunctionInfo::kFlagsOffset),\n           Immediate(SharedFunctionInfo::IsNativeBit::kMask |\n                     SharedFunctionInfo::IsStrictBit::kMask));\n   __ j(not_zero, &done_convert);\n@@ -2368,18 +2439,27 @@ void Builtins::Generate_ConstructFunction(MacroAssembler* masm) {\n   //  -- edx : the new target (checked to be a constructor)\n   //  -- edi : the constructor to call (checked to be a JSFunction)\n   // -----------------------------------\n+  __ AssertConstructor(edi);\n   __ AssertFunction(edi);\n \n   // Calling convention for function specific ConstructStubs require\n   // ebx to contain either an AllocationSite or undefined.\n   __ LoadRoot(ebx, Heap::kUndefinedValueRootIndex);\n \n-  // Tail call to the function-specific construct stub (still in the caller\n-  // context at this point).\n+  Label call_generic_stub;\n+\n+  // Jump to JSBuiltinsConstructStub or JSConstructStubGeneric.\n   __ mov(ecx, FieldOperand(edi, JSFunction::kSharedFunctionInfoOffset));\n-  __ mov(ecx, FieldOperand(ecx, SharedFunctionInfo::kConstructStubOffset));\n-  __ lea(ecx, FieldOperand(ecx, Code::kHeaderSize));\n-  __ jmp(ecx);\n+  __ test(FieldOperand(ecx, SharedFunctionInfo::kFlagsOffset),\n+          Immediate(SharedFunctionInfo::ConstructAsBuiltinBit::kMask));\n+  __ j(zero, &call_generic_stub, Label::kNear);\n+\n+  __ Jump(BUILTIN_CODE(masm->isolate(), JSBuiltinsConstructStub),\n+          RelocInfo::CODE_TARGET);\n+\n+  __ bind(&call_generic_stub);\n+  __ Jump(masm->isolate()->builtins()->JSConstructStubGeneric(),\n+          RelocInfo::CODE_TARGET);\n }\n \n // static\n@@ -2389,6 +2469,7 @@ void Builtins::Generate_ConstructBoundFunction(MacroAssembler* masm) {\n   //  -- edx : the new target (checked to be a constructor)\n   //  -- edi : the constructor to call (checked to be a JSBoundFunction)\n   // -----------------------------------\n+  __ AssertConstructor(edi);\n   __ AssertBoundFunction(edi);\n \n   // Push the [[BoundArguments]] onto the stack.\n@@ -2421,16 +2502,17 @@ void Builtins::Generate_Construct(MacroAssembler* masm) {\n   Label non_constructor, non_proxy;\n   __ JumpIfSmi(edi, &non_constructor, Label::kNear);\n \n-  // Dispatch based on instance type.\n-  __ CmpObjectType(edi, JS_FUNCTION_TYPE, ecx);\n-  __ j(equal, BUILTIN_CODE(masm->isolate(), ConstructFunction),\n-       RelocInfo::CODE_TARGET);\n-\n   // Check if target has a [[Construct]] internal method.\n+  __ mov(ecx, FieldOperand(edi, HeapObject::kMapOffset));\n   __ test_b(FieldOperand(ecx, Map::kBitFieldOffset),\n             Immediate(Map::IsConstructorBit::kMask));\n   __ j(zero, &non_constructor, Label::kNear);\n \n+  // Dispatch based on instance type.\n+  __ CmpInstanceType(ecx, JS_FUNCTION_TYPE);\n+  __ j(equal, BUILTIN_CODE(masm->isolate(), ConstructFunction),\n+       RelocInfo::CODE_TARGET);\n+\n   // Only dispatch to bound functions after checking whether they are\n   // constructors.\n   __ CmpInstanceType(ecx, JS_BOUND_FUNCTION_TYPE);\n@@ -2680,10 +2762,12 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n   {\n     FrameScope scope(masm, StackFrame::INTERNAL);\n \n+    auto wasm_instance_reg = esi;  // TODO(titzer): put in a common place.\n+\n     // Save all parameter registers (see wasm-linkage.cc). They might be\n     // overwritten in the runtime call below. We don't have any callee-saved\n     // registers in wasm, so no need to store anything else.\n-    constexpr Register gp_regs[]{eax, ebx, ecx, edx, esi};\n+    constexpr Register gp_regs[]{eax, ebx, ecx, edx};\n     constexpr XMMRegister xmm_regs[]{xmm1, xmm2, xmm3, xmm4, xmm5, xmm6};\n \n     for (auto reg : gp_regs) {\n@@ -2694,12 +2778,16 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n       __ movdqu(Operand(esp, 16 * i), xmm_regs[i]);\n     }\n \n-    // Initialize rsi register with kZero, CEntryStub will use it to set the\n-    // current context on the isolate.\n+    // Pass the WASM instance as an explicit argument to WasmCompileLazy.\n+    __ Push(wasm_instance_reg);\n+    // Initialize the JavaScript context with 0. CEntryStub will use it to\n+    // set the current context on the isolate.\n     __ Move(esi, Smi::kZero);\n     __ CallRuntime(Runtime::kWasmCompileLazy);\n-    // Store returned instruction start in edi.\n-    __ lea(edi, FieldOperand(eax, Code::kHeaderSize));\n+    // The entrypoint address is the first return value.\n+    __ mov(edi, kReturnRegister0);\n+    // The WASM instance is the second return value.\n+    __ mov(wasm_instance_reg, kReturnRegister1);\n \n     // Restore registers.\n     for (int i = arraysize(xmm_regs) - 1; i >= 0; --i) {\n@@ -2710,7 +2798,7 @@ void Builtins::Generate_WasmCompileLazy(MacroAssembler* masm) {\n       __ Pop(gp_regs[i]);\n     }\n   }\n-  // Now jump to the instructions of the returned code object.\n+  // Finally, jump to the entrypoint.\n   __ jmp(edi);\n }\n "
        },
        {
            "sha": "34faac09692bff5e4e8c5e94c988c1cf49484272",
            "filename": "deps/v8/src/builtins/mips/builtins-mips.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "7756872b14111ecfc4201069c97f295feb561872",
            "filename": "deps/v8/src/builtins/mips64/builtins-mips64.cc",
            "status": "modified",
            "additions": 190,
            "deletions": 123,
            "changes": 313,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "2989d69a4bbf327702b2a2f0acb33c8dd491d23a",
            "filename": "deps/v8/src/builtins/ppc/builtins-ppc.cc",
            "status": "modified",
            "additions": 194,
            "deletions": 128,
            "changes": 322,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "bf7229ac691f3bc83d412c652aa97078a11d052d",
            "filename": "deps/v8/src/builtins/s390/builtins-s390.cc",
            "status": "modified",
            "additions": 192,
            "deletions": 118,
            "changes": 310,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "45040844c36ed4fdd012baf1c7a4172fbf20ec7c",
            "filename": "deps/v8/src/builtins/setup-builtins-internal.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 17,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fsetup-builtins-internal.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "ad64b02af9baf2b0624be1d4aa40a316bd071bef",
            "filename": "deps/v8/src/builtins/x64/builtins-x64.cc",
            "status": "modified",
            "additions": 200,
            "deletions": 113,
            "changes": 313,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "1876773e7a9ee1d3e5ce5d4b9272c3c0817d093c",
            "filename": "deps/v8/src/cancelable-task.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcancelable-task.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcancelable-task.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcancelable-task.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "7e198d58089d371a463ce40fe5c88089d304c001",
            "filename": "deps/v8/src/char-predicates-inl.h",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fchar-predicates-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fchar-predicates-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fchar-predicates-inl.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "439cb54dca6b6d1f7ba5b816bf51d7ecacb9fd39",
            "filename": "deps/v8/src/code-events.h",
            "status": "modified",
            "additions": 24,
            "deletions": 32,
            "changes": 56,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-events.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-events.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-events.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "556efe7d0af8efa21ca8a5774922937b48ae1aaf",
            "filename": "deps/v8/src/code-stub-assembler.cc",
            "status": "modified",
            "additions": 747,
            "deletions": 566,
            "changes": 1313,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "6c027f4a92e81b28578b5aee2fec792f3d2065b4",
            "filename": "deps/v8/src/code-stub-assembler.h",
            "status": "modified",
            "additions": 435,
            "deletions": 171,
            "changes": 606,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stub-assembler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "1503703a6e57af5425bc3c18605e19d3fc17f9b9",
            "filename": "deps/v8/src/code-stubs.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 3,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-stubs.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-stubs.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stubs.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "96d2ad51cf05e842ed9cbbd6f856b05c600e318d",
            "filename": "deps/v8/src/code-stubs.h",
            "status": "modified",
            "additions": 18,
            "deletions": 23,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-stubs.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcode-stubs.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcode-stubs.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "ba9a071c33ffcf6a877ced29d62963e19d64b519",
            "filename": "deps/v8/src/compilation-cache.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompilation-cache.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "8be814025a0e3e306c27fdb63234597e50faa60f",
            "filename": "deps/v8/src/compilation-dependencies.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompilation-dependencies.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompilation-dependencies.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompilation-dependencies.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "cb66f86532262a0e463b0f1caaca1fa88587dc9a",
            "filename": "deps/v8/src/compilation-statistics.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompilation-statistics.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompilation-statistics.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompilation-statistics.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "56620268ceb52bffdcf81ef7515b73b0f5fc9295",
            "filename": "deps/v8/src/compiler-dispatcher/compiler-dispatcher.cc",
            "status": "modified",
            "additions": 22,
            "deletions": 24,
            "changes": 46,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "d7b2dc802ff66755a1088d7c80af922269473bd3",
            "filename": "deps/v8/src/compiler-dispatcher/compiler-dispatcher.h",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Fcompiler-dispatcher.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "dd7527dfbf1b55d7d3ab69fe42517cb7274b36cd",
            "filename": "deps/v8/src/compiler-dispatcher/optimizing-compile-dispatcher.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 15,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "deb7af99a452ed5689563d5a3ef8d98f854172eb",
            "filename": "deps/v8/src/compiler-dispatcher/optimizing-compile-dispatcher.h",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Foptimizing-compile-dispatcher.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "3e90ccfa409e13de122d6a924aa41df2c245e347",
            "filename": "deps/v8/src/compiler-dispatcher/unoptimized-compile-job.cc",
            "status": "modified",
            "additions": 16,
            "deletions": 20,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "8352e4e7950a18d5788b3984f07ee2e2cd6cc2e5",
            "filename": "deps/v8/src/compiler-dispatcher/unoptimized-compile-job.h",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler-dispatcher%2Funoptimized-compile-job.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "1b3a154f52e558ad6b4d773695c2604c8bd92b29",
            "filename": "deps/v8/src/compiler.cc",
            "status": "modified",
            "additions": 396,
            "deletions": 315,
            "changes": 711,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "1477b4f3f1bf4559a844e9feadf32933e9d6ea2d",
            "filename": "deps/v8/src/compiler.h",
            "status": "modified",
            "additions": 131,
            "deletions": 62,
            "changes": 193,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "e7c4b7542f05995f5f4ade4c14a8274b4de835c9",
            "filename": "deps/v8/src/compiler/OWNERS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2FOWNERS",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2FOWNERS",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2FOWNERS?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "bbef35570c51b192ba25f2df27bf9b71d7145b34",
            "filename": "deps/v8/src/compiler/access-builder.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 26,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "44298c2188ea06ee041ad93dea11227acebf5909",
            "filename": "deps/v8/src/compiler/access-builder.h",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-builder.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "808b8af0d1a0bbe61f76a090fb242f385352b92d",
            "filename": "deps/v8/src/compiler/access-info.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Faccess-info.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "86fea3309002a23f1392de646b0e15dd7ec28ec5",
            "filename": "deps/v8/src/compiler/allocation-builder.h",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fallocation-builder.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "b5f258ab45b91b0abc6ee5f2e6a83c2bd7a3f712",
            "filename": "deps/v8/src/compiler/arm/code-generator-arm.cc",
            "status": "modified",
            "additions": 85,
            "deletions": 20,
            "changes": 105,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Fcode-generator-arm.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "b2f6fd6e7196e9df0728de109dd5c12d3e2b148c",
            "filename": "deps/v8/src/compiler/arm/instruction-selector-arm.cc",
            "status": "modified",
            "additions": 32,
            "deletions": 129,
            "changes": 161,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm%2Finstruction-selector-arm.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "968c6133fbfd69a104f9de7d3e67cef833e5529e",
            "filename": "deps/v8/src/compiler/arm64/code-generator-arm64.cc",
            "status": "modified",
            "additions": 38,
            "deletions": 11,
            "changes": 49,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Fcode-generator-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "5eb09dfe05ae2bbc86982bc23237b5ac393459df",
            "filename": "deps/v8/src/compiler/arm64/instruction-codes-arm64.h",
            "status": "modified",
            "additions": 21,
            "deletions": 1,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-codes-arm64.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "289fe47e09a12c8d23e5311d6b30521bc56f1e8b",
            "filename": "deps/v8/src/compiler/arm64/instruction-scheduler-arm64.cc",
            "status": "modified",
            "additions": 23,
            "deletions": 3,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-scheduler-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "08538cc4e2b169798b28cc86de96bab75418ddc7",
            "filename": "deps/v8/src/compiler/arm64/instruction-selector-arm64.cc",
            "status": "modified",
            "additions": 94,
            "deletions": 119,
            "changes": 213,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Farm64%2Finstruction-selector-arm64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "ebec8161baac6dbcbdbd323bc49def36775285f6",
            "filename": "deps/v8/src/compiler/basic-block-instrumentor.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "620f38d535c17b65b04444adab50c5cf2e96ef8c",
            "filename": "deps/v8/src/compiler/basic-block-instrumentor.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbasic-block-instrumentor.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "76c3978f60ce1121a947e27cc6a5f376cf8abc5d",
            "filename": "deps/v8/src/compiler/bytecode-graph-builder.cc",
            "status": "modified",
            "additions": 51,
            "deletions": 7,
            "changes": 58,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "9025d477d57fe3d3ed1c39152dd4dfb69db14bb4",
            "filename": "deps/v8/src/compiler/bytecode-graph-builder.h",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fbytecode-graph-builder.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "01e8d54707c9141f21091eef682de7ab4deacbc0",
            "filename": "deps/v8/src/compiler/code-assembler.cc",
            "status": "modified",
            "additions": 75,
            "deletions": 20,
            "changes": 95,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "c91345e73fc5bf9724a95514ae0b57fe5cfb6400",
            "filename": "deps/v8/src/compiler/code-assembler.h",
            "status": "modified",
            "additions": 25,
            "deletions": 8,
            "changes": 33,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-assembler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "f52347cd98ccdd7dcdbe52947f8bc642d2f18560",
            "filename": "deps/v8/src/compiler/code-generator.cc",
            "status": "modified",
            "additions": 61,
            "deletions": 43,
            "changes": 104,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "e33aed0d9be1bd4fb2b56f753c139349d91c84e5",
            "filename": "deps/v8/src/compiler/code-generator.h",
            "status": "modified",
            "additions": 25,
            "deletions": 22,
            "changes": 47,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcode-generator.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "388cc66c161a7e0a7be3721f37f6e97071e16a88",
            "filename": "deps/v8/src/compiler/common-operator-reducer.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator-reducer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "7488e363054a760949de08da75b78f9ada662570",
            "filename": "deps/v8/src/compiler/common-operator.cc",
            "status": "modified",
            "additions": 37,
            "deletions": 7,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "9bb941a8367517b3e17cf5fda954b1684482ffe4",
            "filename": "deps/v8/src/compiler/common-operator.h",
            "status": "modified",
            "additions": 55,
            "deletions": 22,
            "changes": 77,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcommon-operator.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "7177a6069da26c70d2b5c5d850a1573088e80218",
            "filename": "deps/v8/src/compiler/control-flow-optimizer.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcontrol-flow-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fcontrol-flow-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fcontrol-flow-optimizer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "52cbefb15cf092702de41f88dccf85a98ccc9f1d",
            "filename": "deps/v8/src/compiler/effect-control-linearizer.cc",
            "status": "modified",
            "additions": 216,
            "deletions": 175,
            "changes": 391,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "4bab19ebcbd3c514520b8da147d567d8ad4f854d",
            "filename": "deps/v8/src/compiler/effect-control-linearizer.h",
            "status": "modified",
            "additions": 9,
            "deletions": 6,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Feffect-control-linearizer.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "81da548ca26a8e22a185934ec9d9695e46f383bc",
            "filename": "deps/v8/src/compiler/escape-analysis-reducer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fescape-analysis-reducer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "15ca8367b08796f17db1ed352a02f79c329d5fe7",
            "filename": "deps/v8/src/compiler/frame-states.cc",
            "status": "modified",
            "additions": 34,
            "deletions": 17,
            "changes": 51,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "b12758ac3bb278b6120272edfbdf8f207c8106cd",
            "filename": "deps/v8/src/compiler/frame-states.h",
            "status": "modified",
            "additions": 12,
            "deletions": 8,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fframe-states.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "37d6c94a7247c48a0e77e168854e247ba77f1a13",
            "filename": "deps/v8/src/compiler/graph-assembler.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "bc793df1a6a5b3478b1439837283742aa4666054",
            "filename": "deps/v8/src/compiler/graph-assembler.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-assembler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "73e7f615dbec1e9d581cc9ff81337ce4594ad9f9",
            "filename": "deps/v8/src/compiler/graph-visualizer.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "7fa2f89867433cc6a7b5fec5a9bfbbac7cccaac3",
            "filename": "deps/v8/src/compiler/graph-visualizer.h",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fgraph-visualizer.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "d1b59a5416fd6ab0e2bec053a140d04bde991290",
            "filename": "deps/v8/src/compiler/ia32/code-generator-ia32.cc",
            "status": "modified",
            "additions": 185,
            "deletions": 5,
            "changes": 190,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Fcode-generator-ia32.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "e5b1e85082afe397a526ee007ca8590198d742f7",
            "filename": "deps/v8/src/compiler/ia32/instruction-codes-ia32.h",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-codes-ia32.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "0d592afbef99683a22352afd6ba635e5f87bc1c1",
            "filename": "deps/v8/src/compiler/ia32/instruction-scheduler-ia32.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-scheduler-ia32.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "f49935d8e085883787e3ca2049a75d230feef3e8",
            "filename": "deps/v8/src/compiler/ia32/instruction-selector-ia32.cc",
            "status": "modified",
            "additions": 119,
            "deletions": 111,
            "changes": 230,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fia32%2Finstruction-selector-ia32.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "d5820faa5efb5d0d058ec9a9fc27c1ba7e17ec0c",
            "filename": "deps/v8/src/compiler/instruction-codes.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-codes.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-codes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-codes.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "9219e9a520c14c9fcfc1a6f2ce3fcb2c73d9f5c0",
            "filename": "deps/v8/src/compiler/instruction-scheduler.cc",
            "status": "modified",
            "additions": 28,
            "deletions": 26,
            "changes": 54,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "87d41d30d6e00904b3d47ec996e30eaf0e1b9e02",
            "filename": "deps/v8/src/compiler/instruction-scheduler.h",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-scheduler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "824b6a53763ac9e6d7aeee74996cba98f2652e6b",
            "filename": "deps/v8/src/compiler/instruction-selector-impl.h",
            "status": "modified",
            "additions": 62,
            "deletions": 223,
            "changes": 285,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector-impl.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "6fce9ea4707b88c9b426d4da4e5c6788211b05c7",
            "filename": "deps/v8/src/compiler/instruction-selector.cc",
            "status": "modified",
            "additions": 274,
            "deletions": 166,
            "changes": 440,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "fc597b5843cdae9df8e2d44bfc7291e64bc1b1f0",
            "filename": "deps/v8/src/compiler/instruction-selector.h",
            "status": "modified",
            "additions": 234,
            "deletions": 24,
            "changes": 258,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction-selector.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "68f0ae2a9c0441767b9e0b4c4911b5ba74fd566f",
            "filename": "deps/v8/src/compiler/instruction.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "803f3e0c1dec3d393d401c30a8e74fdd197ba037",
            "filename": "deps/v8/src/compiler/instruction.h",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Finstruction.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "824871587677a4c840c5f562eb938201024bd210",
            "filename": "deps/v8/src/compiler/int64-lowering.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fint64-lowering.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "c3483092d23fb4de6f91faa63ad4fcbd51e408bc",
            "filename": "deps/v8/src/compiler/js-builtin-reducer.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1357,
            "changes": 1357,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "eff40060bb1cd8eaa824837132c0d357e594d93b",
            "filename": "deps/v8/src/compiler/js-builtin-reducer.h",
            "status": "modified",
            "additions": 0,
            "deletions": 35,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-builtin-reducer.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "451ec80a8d4f87a97eb6e2439603e4281a371046",
            "filename": "deps/v8/src/compiler/js-call-reducer.cc",
            "status": "modified",
            "additions": 1451,
            "deletions": 116,
            "changes": 1567,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "36a5ac2e7a5da7d02dde0fc2f4bb68169018db17",
            "filename": "deps/v8/src/compiler/js-call-reducer.h",
            "status": "modified",
            "additions": 41,
            "deletions": 0,
            "changes": 41,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "9f833b60eb4194e085fe1b1953ed62fc5a7b7900",
            "filename": "deps/v8/src/compiler/js-context-specialization.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-context-specialization.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "1db4965f667eb7f46c16f0c76b1493cb0f3003eb",
            "filename": "deps/v8/src/compiler/js-create-lowering.cc",
            "status": "modified",
            "additions": 117,
            "deletions": 18,
            "changes": 135,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "af245f3f631c5accf502c54b767ef1a03f029f53",
            "filename": "deps/v8/src/compiler/js-create-lowering.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-create-lowering.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "99c905dae3a43191865230f1391a7ec800cd3f36",
            "filename": "deps/v8/src/compiler/js-generic-lowering.cc",
            "status": "modified",
            "additions": 28,
            "deletions": 1,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-generic-lowering.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "c2c09600828c8587acca2776b4973a28881296e7",
            "filename": "deps/v8/src/compiler/js-inlining-heuristic.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "af004011e3f1deda2b50b091712e2456cfe7e89d",
            "filename": "deps/v8/src/compiler/js-inlining-heuristic.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining-heuristic.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "139fe9afb8224ccb1545bfebb2ec8cf90d27c755",
            "filename": "deps/v8/src/compiler/js-inlining.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 13,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "5fca638daf510894e74140520f2e7bcc3e54acb6",
            "filename": "deps/v8/src/compiler/js-inlining.h",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-inlining.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "60e47e025ffb225313b85e10eb11aa7f2bf14bd3",
            "filename": "deps/v8/src/compiler/js-native-context-specialization.cc",
            "status": "modified",
            "additions": 99,
            "deletions": 23,
            "changes": 122,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "5f357a29246db02a9377efd0b63c29c82feb9914",
            "filename": "deps/v8/src/compiler/js-native-context-specialization.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-native-context-specialization.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "515951706319ed713eccf2d8833b3b160cc506c3",
            "filename": "deps/v8/src/compiler/js-operator.cc",
            "status": "modified",
            "additions": 100,
            "deletions": 2,
            "changes": 102,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "98e67a087ccbeea3e8605e027ad8d63ac5c447d4",
            "filename": "deps/v8/src/compiler/js-operator.h",
            "status": "modified",
            "additions": 70,
            "deletions": 5,
            "changes": 75,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-operator.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "d97e1dcbc75c8d68e123b522b746c095fee212bb",
            "filename": "deps/v8/src/compiler/js-type-hint-lowering.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-type-hint-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-type-hint-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-type-hint-lowering.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "98e18bc5908345103c16b6d572e410eb035b2f91",
            "filename": "deps/v8/src/compiler/js-typed-lowering.cc",
            "status": "modified",
            "additions": 29,
            "deletions": 54,
            "changes": 83,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-typed-lowering.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "d92e48848e2bde4a4709294836a55743dbf5e0cb",
            "filename": "deps/v8/src/compiler/linkage.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "d07e86d5b5eb1562c522919e207e951e44c32744",
            "filename": "deps/v8/src/compiler/linkage.h",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Flinkage.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "0dff4e0f5d20b2741d1a6c0bc481eec7825ffdf3",
            "filename": "deps/v8/src/compiler/load-elimination.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "f853c8f953bbca94877ecb8da5e8040e1d1c6add",
            "filename": "deps/v8/src/compiler/load-elimination.h",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fload-elimination.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "c1938ca30452e10b575a12946a3239b55d5c984a",
            "filename": "deps/v8/src/compiler/loop-variable-optimizer.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Floop-variable-optimizer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "4418a2813fcc2a5fcb91af9e7c3ce28bca3eb3c0",
            "filename": "deps/v8/src/compiler/machine-graph-verifier.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-graph-verifier.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "f26176fd80e264930ff3bdd13c0b41b461ad12c6",
            "filename": "deps/v8/src/compiler/machine-operator.cc",
            "status": "modified",
            "additions": 195,
            "deletions": 19,
            "changes": 214,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "e3a4a6c234e5d3660c0ce7d8115393d6baf0b82b",
            "filename": "deps/v8/src/compiler/machine-operator.h",
            "status": "modified",
            "additions": 35,
            "deletions": 14,
            "changes": 49,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmachine-operator.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "3cc64ac73dd57f677337bf22be0d9eb40e45cb59",
            "filename": "deps/v8/src/compiler/memory-optimizer.cc",
            "status": "modified",
            "additions": 9,
            "deletions": 6,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "28fdb4cc985da46ff181a5b520d9de1231fa20e5",
            "filename": "deps/v8/src/compiler/memory-optimizer.h",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmemory-optimizer.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "aad88fb763550d03a0d9846422f5d9d76781f4d3",
            "filename": "deps/v8/src/compiler/mips/code-generator-mips.cc",
            "status": "modified",
            "additions": 180,
            "deletions": 256,
            "changes": 436,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Fcode-generator-mips.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "f8ca119b83a0aeb897de62c40ec4c297e91e64d3",
            "filename": "deps/v8/src/compiler/mips/instruction-selector-mips.cc",
            "status": "modified",
            "additions": 23,
            "deletions": 73,
            "changes": 96,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips%2Finstruction-selector-mips.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "3d4c0163dbe6c392c3ab16ca34e0fba92deea49a",
            "filename": "deps/v8/src/compiler/mips64/code-generator-mips64.cc",
            "status": "modified",
            "additions": 191,
            "deletions": 244,
            "changes": 435,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Fcode-generator-mips64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "fab7be26258a97b86bfaaf07562fae26285bff7a",
            "filename": "deps/v8/src/compiler/mips64/instruction-selector-mips64.cc",
            "status": "modified",
            "additions": 26,
            "deletions": 76,
            "changes": 102,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fmips64%2Finstruction-selector-mips64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "c31f9691f23287db85b56e51d9fbbd68c0c7acff",
            "filename": "deps/v8/src/compiler/node-matchers.h",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-matchers.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-matchers.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-matchers.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "d8b23fb36243d179c5437ec7e5e8a4f28387779e",
            "filename": "deps/v8/src/compiler/node-properties.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode-properties.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "ded45a24f4dd96eb398c88052051a3582679cc40",
            "filename": "deps/v8/src/compiler/node.h",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fnode.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "29a0462767f4f67662bfe97348e3857545e5afd7",
            "filename": "deps/v8/src/compiler/opcodes.h",
            "status": "modified",
            "additions": 24,
            "deletions": 7,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fopcodes.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "539683b41d1e0211b4bfdbc7f7d16bbe669e8a02",
            "filename": "deps/v8/src/compiler/operation-typer.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperation-typer.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "df2a3e1dafe1a1e7ccd9a50eb7c1550ab0ec28dd",
            "filename": "deps/v8/src/compiler/operator-properties.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "b2211b3b0715cf2a585a8081d186b3331562c696",
            "filename": "deps/v8/src/compiler/osr.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fosr.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fosr.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fosr.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "673b29e7ec5c5dd94730523ec01944e6f41459f1",
            "filename": "deps/v8/src/compiler/osr.h",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fosr.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fosr.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fosr.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "af8fa501400b94fe06892af9efb29749ca8b8c4c",
            "filename": "deps/v8/src/compiler/pipeline-statistics.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline-statistics.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline-statistics.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline-statistics.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "56467f496a323b2981f3dd6a3edd921c1604fde9",
            "filename": "deps/v8/src/compiler/pipeline-statistics.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline-statistics.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline-statistics.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline-statistics.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "795f2c19c38ceb883623b1c7e9ae438884ec172c",
            "filename": "deps/v8/src/compiler/pipeline.cc",
            "status": "modified",
            "additions": 134,
            "deletions": 149,
            "changes": 283,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "33fb965c833e39fd7b2c5d5a792b6bcc456aa83d",
            "filename": "deps/v8/src/compiler/pipeline.h",
            "status": "modified",
            "additions": 15,
            "deletions": 17,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fpipeline.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "2a230f103ca4588635f8e1b0b01a30d04d35dcb6",
            "filename": "deps/v8/src/compiler/ppc/code-generator-ppc.cc",
            "status": "modified",
            "additions": 22,
            "deletions": 31,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Fcode-generator-ppc.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "b96c4d573264c50020180480a7f67f95354df518",
            "filename": "deps/v8/src/compiler/ppc/instruction-selector-ppc.cc",
            "status": "modified",
            "additions": 24,
            "deletions": 49,
            "changes": 73,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fppc%2Finstruction-selector-ppc.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "284da9350ae4814aecf9f3d8c3b10bbacfae9390",
            "filename": "deps/v8/src/compiler/property-access-builder.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 20,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fproperty-access-builder.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "a2b2269456a564ef89762650b1eb6492230b2863",
            "filename": "deps/v8/src/compiler/raw-machine-assembler.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "251a13416e61ca4a2af7edf1a92012b86127265c",
            "filename": "deps/v8/src/compiler/raw-machine-assembler.h",
            "status": "modified",
            "additions": 34,
            "deletions": 10,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fraw-machine-assembler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "25f42efdcd62ca83a9b657cbbb91243a3c7456bc",
            "filename": "deps/v8/src/compiler/redundancy-elimination.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fredundancy-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fredundancy-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fredundancy-elimination.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "8c150d975ad49d06a1deb01b77eaf5489983761b",
            "filename": "deps/v8/src/compiler/register-allocator-verifier.cc",
            "status": "modified",
            "additions": 13,
            "deletions": 5,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator-verifier.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator-verifier.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator-verifier.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "140b3a3ef52496783d55060db3ed9d04f61ab155",
            "filename": "deps/v8/src/compiler/register-allocator-verifier.h",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator-verifier.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator-verifier.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator-verifier.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "a75317914ae5a4cced1ee5ce8335256a9bbcdff0",
            "filename": "deps/v8/src/compiler/register-allocator.cc",
            "status": "modified",
            "additions": 25,
            "deletions": 12,
            "changes": 37,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "b5d73a5bba5490e1178e96bef834973773b3cee3",
            "filename": "deps/v8/src/compiler/register-allocator.h",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fregister-allocator.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "34b532a6c6ceb78748e47a668eb51bb7f0d84fe7",
            "filename": "deps/v8/src/compiler/representation-change.cc",
            "status": "modified",
            "additions": 25,
            "deletions": 5,
            "changes": 30,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "ed6c0a596e9e256c1c19e3d296ba1546d85ee880",
            "filename": "deps/v8/src/compiler/representation-change.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Frepresentation-change.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "9d7c3d8a403cae341f6efb4ac3b65d8c57c794ec",
            "filename": "deps/v8/src/compiler/s390/code-generator-s390.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 24,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Fcode-generator-s390.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "2c658880c92c777a09c2cc8b8bb61c7f781522b7",
            "filename": "deps/v8/src/compiler/s390/instruction-selector-s390.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 116,
            "changes": 149,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fs390%2Finstruction-selector-s390.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "41fad5da6393a64affbf1ad8cf1488c17a1e4b43",
            "filename": "deps/v8/src/compiler/schedule.cc",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "74e51c53411fe3295dd70496490b290b4fef038d",
            "filename": "deps/v8/src/compiler/schedule.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fschedule.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "3316b92c0ba5ad1edc7332f87eb47d1a6b873652",
            "filename": "deps/v8/src/compiler/simd-scalar-lowering.cc",
            "status": "modified",
            "additions": 42,
            "deletions": 5,
            "changes": 47,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimd-scalar-lowering.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "8a10ea71e274eecc2094a73adb2014ad8bce6590",
            "filename": "deps/v8/src/compiler/simplified-lowering.cc",
            "status": "modified",
            "additions": 104,
            "deletions": 46,
            "changes": 150,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-lowering.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "5a09dc34ae3111f7c8c553e35bfb2e78efefd139",
            "filename": "deps/v8/src/compiler/simplified-operator.cc",
            "status": "modified",
            "additions": 26,
            "deletions": 43,
            "changes": 69,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "300bdc85989c8e27794a5bcc0d4d3628aa7dc253",
            "filename": "deps/v8/src/compiler/simplified-operator.h",
            "status": "modified",
            "additions": 74,
            "deletions": 33,
            "changes": 107,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fsimplified-operator.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "4679573f87229db96caae1a9862d38db30aeb988",
            "filename": "deps/v8/src/compiler/store-store-elimination.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fstore-store-elimination.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fstore-store-elimination.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fstore-store-elimination.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "093d9d041e0ac32c1456c3b6b72dc02fb00e18da",
            "filename": "deps/v8/src/compiler/type-cache.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-cache.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-cache.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftype-cache.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "8cb2c666e6020ea63c0ec99fea3acf965ed02fa7",
            "filename": "deps/v8/src/compiler/typed-optimization.cc",
            "status": "modified",
            "additions": 136,
            "deletions": 12,
            "changes": 148,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "e906ab37eb01e6e03dc06e1c4071e820a34d1422",
            "filename": "deps/v8/src/compiler/typed-optimization.h",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyped-optimization.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "8d0265fc48f56214c8c4eaf715adb930e06091c2",
            "filename": "deps/v8/src/compiler/typer.cc",
            "status": "modified",
            "additions": 43,
            "deletions": 28,
            "changes": 71,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftyper.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "87a450f071343986b6b6eab003c21c418dc4e6e3",
            "filename": "deps/v8/src/compiler/types.cc",
            "status": "modified",
            "additions": 24,
            "deletions": 10,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "32ce987cea3b7fe06b737d7a9b1a030c92a7aa5c",
            "filename": "deps/v8/src/compiler/types.h",
            "status": "modified",
            "additions": 22,
            "deletions": 30,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Ftypes.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "54a0e47dd91b284188c6dcb5422a736b7486c47a",
            "filename": "deps/v8/src/compiler/verifier.cc",
            "status": "modified",
            "additions": 55,
            "deletions": 28,
            "changes": 83,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fverifier.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "61c5c152ba9fce7f44e374545d1c7081e2dd8659",
            "filename": "deps/v8/src/compiler/wasm-compiler.cc",
            "status": "modified",
            "additions": 491,
            "deletions": 701,
            "changes": 1192,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "7ca36b56c0fb7670364d4a6021d5424021128073",
            "filename": "deps/v8/src/compiler/wasm-compiler.h",
            "status": "modified",
            "additions": 86,
            "deletions": 118,
            "changes": 204,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-compiler.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "caf38c8d8c9ceefccf8d2b5435d76c2bd55db6b0",
            "filename": "deps/v8/src/compiler/wasm-linkage.cc",
            "status": "modified",
            "additions": 22,
            "deletions": 20,
            "changes": 42,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-linkage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-linkage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fwasm-linkage.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "43d6cbefb65ce1a3c034dd84c10c625dac710f5f",
            "filename": "deps/v8/src/compiler/x64/code-generator-x64.cc",
            "status": "modified",
            "additions": 187,
            "deletions": 101,
            "changes": 288,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Fcode-generator-x64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "88474b249458f14ab9040018e8af9391fb9dfda7",
            "filename": "deps/v8/src/compiler/x64/instruction-codes-x64.h",
            "status": "modified",
            "additions": 260,
            "deletions": 224,
            "changes": 484,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-codes-x64.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-codes-x64.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-codes-x64.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "c3c0d3a2a5bb3108a07883cf5338817f95423f34",
            "filename": "deps/v8/src/compiler/x64/instruction-scheduler-x64.cc",
            "status": "modified",
            "additions": 40,
            "deletions": 0,
            "changes": 40,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-scheduler-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-scheduler-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-scheduler-x64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "db7584ccf93d8a1bc2ae88b6e80d329443dd674c",
            "filename": "deps/v8/src/compiler/x64/instruction-selector-x64.cc",
            "status": "modified",
            "additions": 221,
            "deletions": 74,
            "changes": 295,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fx64%2Finstruction-selector-x64.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "3ff737e5f4ee86c1788c3b4e2a767d6d936b84a5",
            "filename": "deps/v8/src/contexts-inl.h",
            "status": "modified",
            "additions": 9,
            "deletions": 18,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcontexts-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcontexts-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcontexts-inl.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "6fc6f2d1c32ca585b506389b17ea02479a33882e",
            "filename": "deps/v8/src/contexts.h",
            "status": "modified",
            "additions": 8,
            "deletions": 86,
            "changes": 94,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcontexts.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcontexts.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcontexts.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "8aa4abccda1cec15f0e3055b72c30c5c610060f3",
            "filename": "deps/v8/src/conversions.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fconversions.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fconversions.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fconversions.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "3c674b0ae01539cacdbb62350819976bc2ba463f",
            "filename": "deps/v8/src/counters.h",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcounters.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fcounters.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcounters.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "cb7334af7825f552a03852a0e95bf17cfed67bd8",
            "filename": "deps/v8/src/d8-console.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8-console.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8-console.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8-console.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "1172bf8536b5ddb570f01f8b31fc4ab6b85e0cdf",
            "filename": "deps/v8/src/d8-posix.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8-posix.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8-posix.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8-posix.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "4dee20f44001a9080d216ed5ec15a57eb24ebcdf",
            "filename": "deps/v8/src/d8-windows.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8-windows.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8-windows.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8-windows.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "2f6d833b40a6c399a802a918b064b31bbdc72854",
            "filename": "deps/v8/src/d8.cc",
            "status": "modified",
            "additions": 64,
            "deletions": 65,
            "changes": 129,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "731b080880d619a533c39c63acf091337f77c3ef",
            "filename": "deps/v8/src/d8.h",
            "status": "modified",
            "additions": 15,
            "deletions": 3,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fd8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "1c9bd9e35ca9df94ff3473eac29c06377a284339",
            "filename": "deps/v8/src/d8.isolate",
            "status": "removed",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fsrc%2Fd8.isolate",
            "raw_url": "https://github.com/nodejs/node/raw/faf449ca0490f5371dc6cbbc94a87eb697b00fcc/deps%2Fv8%2Fsrc%2Fd8.isolate",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fd8.isolate?ref=faf449ca0490f5371dc6cbbc94a87eb697b00fcc"
        },
        {
            "sha": "c317810dbbcf844cfc234a0278b44c0d66c7c680",
            "filename": "deps/v8/src/date.cc",
            "status": "modified",
            "additions": 71,
            "deletions": 1,
            "changes": 72,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fdate.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fdate.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdate.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "d25b6080a1c2aee82aa4feb7f08741252d5db7fb",
            "filename": "deps/v8/src/date.h",
            "status": "modified",
            "additions": 10,
            "deletions": 55,
            "changes": 65,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fdate.h",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fdate.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdate.h?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "f27e22cfbbb0da84d8f1843b17d1f230e2c8b957",
            "filename": "deps/v8/src/debug/debug-coverage.cc",
            "status": "modified",
            "additions": 50,
            "deletions": 12,
            "changes": 62,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-coverage.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-coverage.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-coverage.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        },
        {
            "sha": "be456678299f6a81712ac1035920f0aa4a2136fe",
            "filename": "deps/v8/src/debug/debug-evaluate.cc",
            "status": "modified",
            "additions": 195,
            "deletions": 81,
            "changes": 276,
            "blob_url": "https://github.com/nodejs/node/blob/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc",
            "raw_url": "https://github.com/nodejs/node/raw/352a525eb984b8fa2d6f0f6fd68395e6a080bba4/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fdebug%2Fdebug-evaluate.cc?ref=352a525eb984b8fa2d6f0f6fd68395e6a080bba4"
        }
    ],
    "stats": {
        "total": 132017,
        "additions": 91049,
        "deletions": 40968
    }
}