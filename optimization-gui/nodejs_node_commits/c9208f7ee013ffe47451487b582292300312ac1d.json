{
    "author": "Trott",
    "message": "test: remove potential race condition in https renegotiation test\n\nIn test/pummel/test-https-ci-reneg-attack.js, there is a boolean that is\ncausing a race condition on some operating systems. It is unnecessary.\nRemove it.\n\nPR-URL: https://github.com/nodejs/node/pull/25601\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "c9208f7ee013ffe47451487b582292300312ac1d",
    "files": [
        {
            "sha": "50e16192e1b1ca7826bf799ed065d9130b77f5d0",
            "filename": "test/pummel/test-https-ci-reneg-attack.js",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/c9208f7ee013ffe47451487b582292300312ac1d/test%2Fpummel%2Ftest-https-ci-reneg-attack.js",
            "raw_url": "https://github.com/nodejs/node/raw/c9208f7ee013ffe47451487b582292300312ac1d/test%2Fpummel%2Ftest-https-ci-reneg-attack.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-https-ci-reneg-attack.js?ref=c9208f7ee013ffe47451487b582292300312ac1d",
            "patch": "@@ -52,15 +52,12 @@ function test(next) {\n     key: fixtures.readSync('test_key.pem')\n   };\n \n-  let seenError = false;\n-\n   const server = https.createServer(options, function(req, res) {\n     const conn = req.connection;\n     conn.on('error', function(err) {\n       console.error(`Caught exception: ${err}`);\n       assert(/TLS session renegotiation attack/.test(err));\n       conn.destroy();\n-      seenError = true;\n     });\n     res.end('ok');\n   });\n@@ -78,7 +75,6 @@ function test(next) {\n     let renegs = 0;\n \n     child.stderr.on('data', function(data) {\n-      if (seenError) return;\n       handshakes += ((String(data)).match(/verify return:1/g) || []).length;\n       if (handshakes === 2) spam();\n       renegs += ((String(data)).match(/RENEGOTIATING/g) || []).length;"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 0,
        "deletions": 4
    }
}