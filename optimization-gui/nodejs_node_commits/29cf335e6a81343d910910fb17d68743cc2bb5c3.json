{
    "author": "yhwang",
    "message": "build: skip cctest on Windows shared lib build\n\ncctest depends on some internal APIs which don't declare\n`__declspec(dllexport)` and causes build failure when building\nnode as shared lib on Windows. Since we already have good test\ncoverage in static lib, we decide to skip the cctest in shared\nlib build on Windows.\n\nSigned-off-by: Yihong Wang <yh.wang@ibm.com>\n\nPR-URL: https://github.com/nodejs/node/pull/21228\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "29cf335e6a81343d910910fb17d68743cc2bb5c3",
    "files": [
        {
            "sha": "fb1c674e8e8c1ada05297bdf37467164729d8dec",
            "filename": "node.gyp",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/29cf335e6a81343d910910fb17d68743cc2bb5c3/node.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/29cf335e6a81343d910910fb17d68743cc2bb5c3/node.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/node.gyp?ref=29cf335e6a81343d910910fb17d68743cc2bb5c3",
            "patch": "@@ -1002,6 +1002,10 @@\n         ['OS==\"solaris\"', {\n           'ldflags': [ '-I<(SHARED_INTERMEDIATE_DIR)' ]\n         }],\n+        # Skip cctest while building shared lib node for Windows\n+        [ 'OS==\"win\" and node_shared==\"true\"', {\n+          'type': 'none',\n+        }],\n       ],\n     }\n   ], # end targets"
        },
        {
            "sha": "0c7bd0f48b2d9505a61ae51f9fad8d03e8dd94dd",
            "filename": "vcbuild.bat",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/29cf335e6a81343d910910fb17d68743cc2bb5c3/vcbuild.bat",
            "raw_url": "https://github.com/nodejs/node/raw/29cf335e6a81343d910910fb17d68743cc2bb5c3/vcbuild.bat",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/vcbuild.bat?ref=29cf335e6a81343d910910fb17d68743cc2bb5c3",
            "patch": "@@ -529,6 +529,7 @@ if \"%test_args%\"==\"\" goto test-v8\n if \"%config%\"==\"Debug\" set test_args=--mode=debug %test_args%\n if \"%config%\"==\"Release\" set test_args=--mode=release %test_args%\n if defined no_cctest echo Skipping cctest because no-cctest was specified && goto run-test-py\n+if not exist %config%\\cctest.exe goto run-test-py\n echo running 'cctest %cctest_args%'\n \"%config%\\cctest\" %cctest_args%\n :run-test-py"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 5,
        "deletions": 0
    }
}