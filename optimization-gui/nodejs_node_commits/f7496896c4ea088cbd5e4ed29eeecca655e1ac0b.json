{
    "author": "BridgeAR",
    "message": "tools: add eslintrc rule for `assert.rejects`\n\nThis makes sure `assert.rejects` is always called with a second\nargument. Besides that it is also changes a eslint error message\nto suggest objects instead of a regular expression.\n\nPR-URL: https://github.com/nodejs/node/pull/19885\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "f7496896c4ea088cbd5e4ed29eeecca655e1ac0b",
    "files": [
        {
            "sha": "53d0b39d0aea446c7b02e4fcd501acc90d4e4916",
            "filename": ".eslintrc.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/f7496896c4ea088cbd5e4ed29eeecca655e1ac0b/.eslintrc.js",
            "raw_url": "https://github.com/nodejs/node/raw/f7496896c4ea088cbd5e4ed29eeecca655e1ac0b/.eslintrc.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/.eslintrc.js?ref=f7496896c4ea088cbd5e4ed29eeecca655e1ac0b",
            "patch": "@@ -155,9 +155,13 @@ module.exports = {\n         selector: \"CallExpression[callee.object.name='assert'][callee.property.name='doesNotThrow']\",\n         message: \"Please replace `assert.doesNotThrow()` and add a comment next to the code instead.\"\n       },\n+      {\n+        selector: `CallExpression[callee.object.name='assert'][callee.property.name='rejects'][arguments.length<2]`,\n+        message: 'assert.rejects() must be invoked with at least two arguments.',\n+      },\n       {\n         selector: `CallExpression[callee.object.name='assert'][callee.property.name='throws'][arguments.1.type='Literal']:not([arguments.1.regex])`,\n-        message: 'use a regular expression for second argument of assert.throws()',\n+        message: 'Use an object as second argument of assert.throws()',\n       },\n       {\n         selector: `CallExpression[callee.object.name='assert'][callee.property.name='throws'][arguments.length<2]`,"
        },
        {
            "sha": "80cada0b8c9eccde5f9dd33d1332fe69f9ab69bc",
            "filename": "lib/.eslintrc.yaml",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/f7496896c4ea088cbd5e4ed29eeecca655e1ac0b/lib%2F.eslintrc.yaml",
            "raw_url": "https://github.com/nodejs/node/raw/f7496896c4ea088cbd5e4ed29eeecca655e1ac0b/lib%2F.eslintrc.yaml",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F.eslintrc.yaml?ref=f7496896c4ea088cbd5e4ed29eeecca655e1ac0b",
            "patch": "@@ -4,8 +4,10 @@ rules:\n     - error\n     - selector: \"CallExpression[callee.object.name='assert'][callee.property.name='doesNotThrow']\"\n       message: \"Please replace `assert.doesNotThrow()` and add a comment next to the code instead.\"\n+    - selector: \"CallExpression[callee.object.name='assert'][callee.property.name='rejects'][arguments.length<2]\"\n+      message: \"assert.rejects() must be invoked with at least two arguments.\"\n     - selector: \"CallExpression[callee.object.name='assert'][callee.property.name='throws'][arguments.1.type='Literal']:not([arguments.1.regex])\"\n-      message: \"use a regular expression for second argument of assert.throws()\"\n+      message: \"Use an object as second argument of assert.throws()\"\n     - selector: \"CallExpression[callee.object.name='assert'][callee.property.name='throws'][arguments.length<2]\"\n       message: \"assert.throws() must be invoked with at least two arguments.\"\n     - selector: \"CallExpression[callee.name='setTimeout'][arguments.length<2]\""
        },
        {
            "sha": "00a4fe7c722d7a13057b18335e0bcc782f933506",
            "filename": "test/parallel/test-assert-async.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f7496896c4ea088cbd5e4ed29eeecca655e1ac0b/test%2Fparallel%2Ftest-assert-async.js",
            "raw_url": "https://github.com/nodejs/node/raw/f7496896c4ea088cbd5e4ed29eeecca655e1ac0b/test%2Fparallel%2Ftest-assert-async.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert-async.js?ref=f7496896c4ea088cbd5e4ed29eeecca655e1ac0b",
            "patch": "@@ -50,7 +50,7 @@ const promises = [];\n \n   promises.push(assert.rejects(() => {\n     throw THROWN_ERROR;\n-  }).catch(common.mustCall((err) => {\n+  }, {}).catch(common.mustCall((err) => {\n     assert.strictEqual(err, THROWN_ERROR);\n   })));\n }"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 9,
        "deletions": 3
    }
}