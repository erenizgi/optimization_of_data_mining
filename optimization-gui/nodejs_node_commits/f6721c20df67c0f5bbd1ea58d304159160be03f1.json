{
    "author": "mcollina",
    "message": "stream: writable.end should return this.\n\nPR-URL: https://github.com/nodejs/node/pull/18780\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>",
    "sha": "f6721c20df67c0f5bbd1ea58d304159160be03f1",
    "files": [
        {
            "sha": "c72873c466fdb35c80143c1bc4855c986059a417",
            "filename": "doc/api/stream.md",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/f6721c20df67c0f5bbd1ea58d304159160be03f1/doc%2Fapi%2Fstream.md",
            "raw_url": "https://github.com/nodejs/node/raw/f6721c20df67c0f5bbd1ea58d304159160be03f1/doc%2Fapi%2Fstream.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fstream.md?ref=f6721c20df67c0f5bbd1ea58d304159160be03f1",
            "patch": "@@ -355,6 +355,9 @@ See also: [`writable.uncork()`][].\n <!-- YAML\n added: v0.9.4\n changes:\n+  - version: REPLACEME\n+    pr-url: https://github.com/nodejs/node/pull/18780\n+    description: This method now returns a reference to `writable`.\n   - version: v8.0.0\n     pr-url: https://github.com/nodejs/node/pull/11608\n     description: The `chunk` argument can now be a `Uint8Array` instance.\n@@ -366,6 +369,7 @@ changes:\n   other than `null`.\n * `encoding` {string} The encoding, if `chunk` is a string\n * `callback` {Function} Optional callback for when the stream is finished\n+* Returns: {this}\n \n Calling the `writable.end()` method signals that no more data will be written\n to the [Writable][]. The optional `chunk` and `encoding` arguments allow one"
        },
        {
            "sha": "2b7658813599e5ed2fd1b941f54d391d43b10231",
            "filename": "lib/_stream_writable.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/f6721c20df67c0f5bbd1ea58d304159160be03f1/lib%2F_stream_writable.js",
            "raw_url": "https://github.com/nodejs/node/raw/f6721c20df67c0f5bbd1ea58d304159160be03f1/lib%2F_stream_writable.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_stream_writable.js?ref=f6721c20df67c0f5bbd1ea58d304159160be03f1",
            "patch": "@@ -570,6 +570,8 @@ Writable.prototype.end = function(chunk, encoding, cb) {\n   // ignore unnecessary end() calls.\n   if (!state.ending)\n     endWritable(this, state, cb);\n+\n+  return this;\n };\n \n Object.defineProperty(Writable.prototype, 'writableLength', {"
        },
        {
            "sha": "ae2121f456eb4bcd335dced2d75df843a5bdc670",
            "filename": "test/parallel/test-stream-writableState-ending.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/f6721c20df67c0f5bbd1ea58d304159160be03f1/test%2Fparallel%2Ftest-stream-writableState-ending.js",
            "raw_url": "https://github.com/nodejs/node/raw/f6721c20df67c0f5bbd1ea58d304159160be03f1/test%2Fparallel%2Ftest-stream-writableState-ending.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stream-writableState-ending.js?ref=f6721c20df67c0f5bbd1ea58d304159160be03f1",
            "patch": "@@ -24,11 +24,14 @@ writable.on('finish', () => {\n   testStates(true, true, true);\n });\n \n-writable.end('testing function end()', () => {\n+const result = writable.end('testing function end()', () => {\n   // ending, finished, ended = true.\n   testStates(true, true, true);\n });\n \n+// end returns the writable instance\n+assert.strictEqual(result, writable);\n+\n // ending, ended = true.\n // finished = false.\n testStates(true, false, true);"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 10,
        "deletions": 1
    }
}