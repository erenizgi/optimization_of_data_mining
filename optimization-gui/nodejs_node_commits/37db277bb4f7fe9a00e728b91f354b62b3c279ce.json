{
    "author": "lpinca",
    "message": "test: refactor test-net-dns-error\n\n- Use `common.mustCall()` and `common.mustNotCall()`.\n- Use ternary operator.\n\nPR-URL: https://github.com/nodejs/node/pull/19640\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "37db277bb4f7fe9a00e728b91f354b62b3c279ce",
    "files": [
        {
            "sha": "0d943bf6cd54a071d9c43089dbd3a58be134861d",
            "filename": "test/parallel/test-net-dns-error.js",
            "status": "modified",
            "additions": 5,
            "deletions": 12,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/37db277bb4f7fe9a00e728b91f354b62b3c279ce/test%2Fparallel%2Ftest-net-dns-error.js",
            "raw_url": "https://github.com/nodejs/node/raw/37db277bb4f7fe9a00e728b91f354b62b3c279ce/test%2Fparallel%2Ftest-net-dns-error.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-net-dns-error.js?ref=37db277bb4f7fe9a00e728b91f354b62b3c279ce",
            "patch": "@@ -21,27 +21,20 @@\n \n 'use strict';\n const common = require('../common');\n-const assert = require('assert');\n \n+const assert = require('assert');\n const net = require('net');\n \n const host = '*'.repeat(256);\n+const errCode = common.isOpenBSD ? 'EAI_FAIL' : 'ENOTFOUND';\n \n-let errCode = 'ENOTFOUND';\n-if (common.isOpenBSD)\n-  errCode = 'EAI_FAIL';\n-\n-function do_not_call() {\n-  throw new Error('This function should not have been called.');\n-}\n-\n-const socket = net.connect(42, host, do_not_call);\n+const socket = net.connect(42, host, common.mustNotCall());\n socket.on('error', common.mustCall(function(err) {\n   assert.strictEqual(err.code, errCode);\n }));\n-socket.on('lookup', function(err, ip, type) {\n+socket.on('lookup', common.mustCall(function(err, ip, type) {\n   assert(err instanceof Error);\n   assert.strictEqual(err.code, errCode);\n   assert.strictEqual(ip, undefined);\n   assert.strictEqual(type, undefined);\n-});\n+}));"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 5,
        "deletions": 12
    }
}