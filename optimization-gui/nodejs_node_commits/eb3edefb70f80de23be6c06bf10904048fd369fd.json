{
    "author": "BridgeAR",
    "message": "errors: add comments about falsy error types\n\nSome error types are not properly set. This adds comments which\nones are probably falty and to what they should be set instead.\n\nPR-URL: https://github.com/nodejs/node/pull/18857\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>",
    "sha": "eb3edefb70f80de23be6c06bf10904048fd369fd",
    "files": [
        {
            "sha": "a170c349aeea890fbd68f71db5e87c1ea0f7f193",
            "filename": "lib/internal/errors.js",
            "status": "modified",
            "additions": 30,
            "deletions": 1,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/eb3edefb70f80de23be6c06bf10904048fd369fd/lib%2Finternal%2Ferrors.js",
            "raw_url": "https://github.com/nodejs/node/raw/eb3edefb70f80de23be6c06bf10904048fd369fd/lib%2Finternal%2Ferrors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ferrors.js?ref=eb3edefb70f80de23be6c06bf10904048fd369fd",
            "patch": "@@ -622,6 +622,8 @@ E('ERR_CRYPTO_HASH_FINALIZED', 'Digest already called', Error);\n E('ERR_CRYPTO_HASH_UPDATE_FAILED', 'Hash update failed', Error);\n E('ERR_CRYPTO_INVALID_DIGEST', 'Invalid digest: %s', TypeError);\n E('ERR_CRYPTO_INVALID_STATE', 'Invalid state for operation %s', Error);\n+\n+// Switch to TypeError. The current implementation does not seem right.\n E('ERR_CRYPTO_SIGN_KEY_REQUIRED', 'No key provided to sign', Error);\n E('ERR_CRYPTO_TIMING_SAFE_EQUAL_LENGTH',\n   'Input buffers must have the same length', RangeError);\n@@ -643,7 +645,7 @@ E('ERR_ENCODING_NOT_SUPPORTED', 'The \"%s\" encoding is not supported',\n E('ERR_FALSY_VALUE_REJECTION', 'Promise was rejected with falsy value', Error);\n E('ERR_FS_INVALID_SYMLINK_TYPE',\n   'Symlink type must be one of \"dir\", \"file\", or \"junction\". Received \"%s\"',\n-  Error);\n+  Error); // Switch to TypeError. The current implementation does not seem right\n E('ERR_HTTP2_ALTSVC_INVALID_ORIGIN',\n   'HTTP/2 ALTSVC frames require a valid origin', TypeError);\n E('ERR_HTTP2_ALTSVC_LENGTH',\n@@ -659,10 +661,14 @@ E('ERR_HTTP2_GOAWAY_SESSION',\n E('ERR_HTTP2_HEADERS_AFTER_RESPOND',\n   'Cannot specify additional headers after response initiated', Error);\n E('ERR_HTTP2_HEADERS_SENT', 'Response has already been initiated.', Error);\n+\n+// This should probably be a `TypeError`.\n E('ERR_HTTP2_HEADER_SINGLE_VALUE',\n   'Header field \"%s\" must have only a single value', Error);\n E('ERR_HTTP2_INFO_STATUS_NOT_ALLOWED',\n   'Informational status codes cannot be used', RangeError);\n+\n+// This should probably be a `TypeError`.\n E('ERR_HTTP2_INVALID_CONNECTION_HEADERS',\n   'HTTP/1 Connection specific headers are forbidden: \"%s\"', Error);\n E('ERR_HTTP2_INVALID_HEADER_VALUE',\n@@ -671,6 +677,8 @@ E('ERR_HTTP2_INVALID_INFO_STATUS',\n   'Invalid informational status code: %s', RangeError);\n E('ERR_HTTP2_INVALID_PACKED_SETTINGS_LENGTH',\n   'Packed settings length must be a multiple of six', RangeError);\n+\n+// This should probably be a `TypeError`.\n E('ERR_HTTP2_INVALID_PSEUDOHEADER',\n   '\"%s\" is an invalid pseudoheader or is used incorrectly', Error);\n E('ERR_HTTP2_INVALID_SESSION', 'The session has been destroyed', Error);\n@@ -689,6 +697,8 @@ E('ERR_HTTP2_PAYLOAD_FORBIDDEN',\n   'Responses with %s status must not have a payload', Error);\n E('ERR_HTTP2_PING_CANCEL', 'HTTP2 ping cancelled', Error);\n E('ERR_HTTP2_PING_LENGTH', 'HTTP2 ping payload must be 8 bytes', RangeError);\n+\n+// This should probably be a `TypeError`.\n E('ERR_HTTP2_PSEUDOHEADER_NOT_ALLOWED',\n   'Cannot set HTTP/2 pseudo-headers', Error);\n E('ERR_HTTP2_PUSH_DISABLED', 'HTTP/2 client has disabled push streams', Error);\n@@ -736,8 +746,12 @@ E('ERR_INVALID_BUFFER_SIZE',\n   'Buffer size must be a multiple of %s', RangeError);\n E('ERR_INVALID_CALLBACK', 'Callback must be a function', TypeError);\n E('ERR_INVALID_CHAR', invalidChar, TypeError); //Check falsy \"Error\" entries.\n+\n+// This should probably be a `TypeError`.\n E('ERR_INVALID_CURSOR_POS',\n   'Cannot set cursor row without setting its column', Error);\n+\n+// This should probably be a `TypeError`.\n E('ERR_INVALID_DOMAIN_NAME', 'Unable to determine the domain name', Error);\n E('ERR_INVALID_FD',\n   '\"fd\" must be a positive integer: %s', RangeError);\n@@ -747,6 +761,7 @@ E('ERR_INVALID_FILE_URL_HOST',\n E('ERR_INVALID_FILE_URL_PATH', 'File URL path %s', TypeError);\n E('ERR_INVALID_HANDLE_TYPE', 'This handle type cannot be sent', TypeError);\n E('ERR_INVALID_HTTP_TOKEN', '%s must be a valid HTTP token [\"%s\"]', TypeError);\n+// The `Error` should probably be a `TypeError`.\n E('ERR_INVALID_IP_ADDRESS', 'Invalid IP address: %s', TypeError, Error);\n E('ERR_INVALID_OPT_VALUE', (name, value) =>\n   `The value \"${String(value)}\" is invalid for option \"${name}\"`,\n@@ -756,7 +771,11 @@ E('ERR_INVALID_OPT_VALUE_ENCODING',\n   'The value \"%s\" is invalid for option \"encoding\"', TypeError);\n E('ERR_INVALID_PERFORMANCE_MARK',\n   'The \"%s\" performance mark has not been set', Error);\n+\n+// This should probably be a `TypeError`.\n E('ERR_INVALID_PROTOCOL', 'Protocol \"%s\" not supported. Expected \"%s\"', Error);\n+\n+// This should probably be a `TypeError`.\n E('ERR_INVALID_REPL_EVAL_CONFIG',\n   'Cannot specify both \"breakEvalOnSigint\" and \"eval\" for REPL', Error);\n E('ERR_INVALID_SYNC_FORK_INPUT',\n@@ -829,13 +848,17 @@ E('ERR_TLS_DH_PARAM_SIZE', 'DH parameter size %s is less than 2048', Error);\n E('ERR_TLS_HANDSHAKE_TIMEOUT', 'TLS handshake timeout', Error);\n E('ERR_TLS_RENEGOTIATION_DISABLED',\n   'TLS session renegotiation disabled for this socket', Error);\n+\n+// This should probably be a `TypeError`.\n E('ERR_TLS_REQUIRED_SERVER_NAME',\n   '\"servername\" is required parameter for Server.addContext', Error);\n E('ERR_TLS_SESSION_ATTACK', 'TLS session renegotiation attack detected', Error);\n E('ERR_TLS_SNI_FROM_SERVER',\n   'Cannot issue SNI from a TLS server-side socket', Error);\n E('ERR_TRANSFORM_ALREADY_TRANSFORMING',\n   'Calling transform done when still transforming', Error);\n+\n+// This should probably be a `RangeError`.\n E('ERR_TRANSFORM_WITH_LENGTH_0',\n   'Calling transform done when writableState.length != 0', Error);\n E('ERR_UNCAUGHT_EXCEPTION_CAPTURE_ALREADY_SET',\n@@ -850,14 +873,20 @@ E('ERR_UNHANDLED_ERROR',\n     return `${msg} (${err})`;\n   }, Error);\n E('ERR_UNKNOWN_ENCODING', 'Unknown encoding: %s', TypeError);\n+\n+// This should probably be a `TypeError`.\n E('ERR_UNKNOWN_FILE_EXTENSION', 'Unknown file extension: %s', Error);\n E('ERR_UNKNOWN_MODULE_FORMAT', 'Unknown module format: %s', RangeError);\n E('ERR_UNKNOWN_SIGNAL', 'Unknown signal: %s', TypeError);\n E('ERR_UNKNOWN_STDIN_TYPE', 'Unknown stdin file type', Error);\n+\n+// This should probably be a `TypeError`.\n E('ERR_UNKNOWN_STREAM_TYPE', 'Unknown stream file type', Error);\n E('ERR_V8BREAKITERATOR',\n   'Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl',\n   Error);\n+\n+// This should probably be a `TypeError`.\n E('ERR_VALID_PERFORMANCE_ENTRY_TYPE',\n   'At least one valid performance entry type is required', Error);\n E('ERR_VM_MODULE_ALREADY_LINKED', 'Module has already been linked', Error);"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 30,
        "deletions": 1
    }
}