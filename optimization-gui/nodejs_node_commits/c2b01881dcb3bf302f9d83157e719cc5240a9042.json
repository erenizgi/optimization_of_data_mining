{
    "author": "joyeecheung",
    "message": "lib: restructure cjs and esm loaders\n\nCreate `lib/internal/modules` and restructure the module loaders\nto make the purpose of those files clearer.\n\nAlso make it clear in the code that the object exported by\n`lib/internal/modules/cjs/loader.js` is `CJSModule` instead of the\nambiguous `Module`.\n\nBefore:\n\n```\nlib\n├── ...\n├── internal\n│       ├── loaders\n│       │     ├── CreateDynamicModule.js\n│       │     ├── DefaultResolve.js\n│       │     ├── Loader.js\n│       │     ├── ModuleJob.js\n│       │     ├── ModuleMap.js\n│       │     └── Translators.js\n│       └── module.js\n└── module.js\n```\n\nAfter:\n\n```\nlib\n├── ...\n├── internal\n│       ├── ...\n│       └── modules\n│              ├── cjs\n│              │     ├── helpers.js\n│              │     └── loader.js\n│              └── esm\n│                    ├── CreateDynamicModule.js\n│                    ├── DefaultResolve.js\n│                    ├── Loader.js\n│                    ├── ModuleJob.js\n│                    ├── ModuleMap.js\n│                    └── Translators.js\n└── module.js # deleted in this commit to work with git file mode\n```\n\nPR-URL: https://github.com/nodejs/node/pull/19177\nRefs: https://github.com/nodejs/node/pull/19112\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>",
    "sha": "c2b01881dcb3bf302f9d83157e719cc5240a9042",
    "files": [
        {
            "sha": "f7384b278488705990412ccf6cc0042c75d48bf2",
            "filename": "lib/internal/bootstrap/loaders.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fbootstrap%2Floaders.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fbootstrap%2Floaders.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Floaders.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -1,6 +1,7 @@\n // This file creates the internal module & binding loaders used by built-in\n // modules. In contrast, user land modules are loaded using\n-// lib/module.js (CommonJS Modules) or lib/internal/loader/* (ES Modules).\n+// lib/internal/modules/cjs/loader.js (CommonJS Modules) or\n+// lib/internal/modules/esm/* (ES Modules).\n //\n // This file is compiled and run by node.cc before bootstrap/node.js\n // was called, therefore the loaders are bootstraped before we start to"
        },
        {
            "sha": "7d7ca03d36f7ac4da4b63665346e6461e2827ddf",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 29,
            "deletions": 21,
            "changes": 50,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -112,7 +112,7 @@\n       process.emitWarning(\n         'The ESM module loader is experimental.',\n         'ExperimentalWarning', undefined);\n-      NativeModule.require('internal/process/modules').setup();\n+      NativeModule.require('internal/process/esm_loader').setup();\n     }\n \n     {\n@@ -194,22 +194,24 @@\n         preloadModules();\n         perf.markMilestone(NODE_PERFORMANCE_MILESTONE_PRELOAD_MODULE_LOAD_END);\n \n-        const internalModule = NativeModule.require('internal/module');\n-        internalModule.addBuiltinLibsToObject(global);\n+        const {\n+          addBuiltinLibsToObject\n+        } = NativeModule.require('internal/modules/cjs/helpers');\n+        addBuiltinLibsToObject(global);\n         evalScript('[eval]');\n       } else if (process.argv[1] && process.argv[1] !== '-') {\n         perf.markMilestone(NODE_PERFORMANCE_MILESTONE_MODULE_LOAD_START);\n         // make process.argv[1] into a full path\n         const path = NativeModule.require('path');\n         process.argv[1] = path.resolve(process.argv[1]);\n \n-        const Module = NativeModule.require('module');\n+        const CJSModule = NativeModule.require('internal/modules/cjs/loader');\n \n         // check if user passed `-c` or `--check` arguments to Node.\n         if (process._syntax_check_only != null) {\n           const fs = NativeModule.require('fs');\n           // read the source\n-          const filename = Module._resolveFilename(process.argv[1]);\n+          const filename = CJSModule._resolveFilename(process.argv[1]);\n           const source = fs.readFileSync(filename, 'utf-8');\n           checkScriptSyntax(source, filename);\n           process.exit(0);\n@@ -220,7 +222,7 @@\n         preloadModules();\n         perf.markMilestone(\n           NODE_PERFORMANCE_MILESTONE_PRELOAD_MODULE_LOAD_END);\n-        Module.runMain();\n+        CJSModule.runMain();\n       } else {\n         perf.markMilestone(NODE_PERFORMANCE_MILESTONE_MODULE_LOAD_START);\n         perf.markMilestone(NODE_PERFORMANCE_MILESTONE_MODULE_LOAD_END);\n@@ -345,15 +347,15 @@\n \n   function setupGlobalConsole() {\n     const originalConsole = global.console;\n-    const Module = NativeModule.require('module');\n+    const CJSModule = NativeModule.require('internal/modules/cjs/loader');\n     // Setup Node.js global.console\n     const wrappedConsole = NativeModule.require('console');\n     Object.defineProperty(global, 'console', {\n       configurable: true,\n       enumerable: false,\n       value: wrappedConsole\n     });\n-    setupInspector(originalConsole, wrappedConsole, Module);\n+    setupInspector(originalConsole, wrappedConsole, CJSModule);\n   }\n \n   function setupGlobalURL() {\n@@ -374,19 +376,20 @@\n     });\n   }\n \n-  function setupInspector(originalConsole, wrappedConsole, Module) {\n+  function setupInspector(originalConsole, wrappedConsole, CJSModule) {\n     if (!process.config.variables.v8_enable_inspector) {\n       return;\n     }\n     const { addCommandLineAPI, consoleCall } = process.binding('inspector');\n     // Setup inspector command line API\n-    const { makeRequireFunction } = NativeModule.require('internal/module');\n+    const { makeRequireFunction } =\n+      NativeModule.require('internal/modules/cjs/helpers');\n     const path = NativeModule.require('path');\n     const cwd = tryGetCwd(path);\n \n-    const consoleAPIModule = new Module('<inspector console>');\n+    const consoleAPIModule = new CJSModule('<inspector console>');\n     consoleAPIModule.paths =\n-        Module._nodeModulePaths(cwd).concat(Module.globalPaths);\n+        CJSModule._nodeModulePaths(cwd).concat(CJSModule.globalPaths);\n     addCommandLineAPI('require', makeRequireFunction(consoleAPIModule));\n     const config = {};\n     for (const key of Object.keys(wrappedConsole)) {\n@@ -515,13 +518,13 @@\n   }\n \n   function evalScript(name) {\n-    const Module = NativeModule.require('module');\n+    const CJSModule = NativeModule.require('internal/modules/cjs/loader');\n     const path = NativeModule.require('path');\n     const cwd = tryGetCwd(path);\n \n-    const module = new Module(name);\n+    const module = new CJSModule(name);\n     module.filename = path.join(cwd, name);\n-    module.paths = Module._nodeModulePaths(cwd);\n+    module.paths = CJSModule._nodeModulePaths(cwd);\n     const body = wrapForBreakOnFirstLine(process._eval);\n     const script = `global.__filename = ${JSON.stringify(name)};\\n` +\n                    'global.exports = exports;\\n' +\n@@ -540,21 +543,26 @@\n   // Load preload modules\n   function preloadModules() {\n     if (process._preload_modules) {\n-      NativeModule.require('module')._preloadModules(process._preload_modules);\n+      const {\n+        _preloadModules\n+      } = NativeModule.require('internal/modules/cjs/loader');\n+      _preloadModules(process._preload_modules);\n     }\n   }\n \n   function checkScriptSyntax(source, filename) {\n-    const Module = NativeModule.require('module');\n+    const CJSModule = NativeModule.require('internal/modules/cjs/loader');\n     const vm = NativeModule.require('vm');\n-    const internalModule = NativeModule.require('internal/module');\n+    const {\n+      stripShebang, stripBOM\n+    } = NativeModule.require('internal/modules/cjs/helpers');\n \n     // remove Shebang\n-    source = internalModule.stripShebang(source);\n+    source = stripShebang(source);\n     // remove BOM\n-    source = internalModule.stripBOM(source);\n+    source = stripBOM(source);\n     // wrap it\n-    source = Module.wrap(source);\n+    source = CJSModule.wrap(source);\n     // compile the script, this will throw if it fails\n     new vm.Script(source, { displayErrors: true, filename });\n   }"
        },
        {
            "sha": "61565cc59325645aa8491c988e668f8de165c60d",
            "filename": "lib/internal/modules/cjs/helpers.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fcjs%2Fhelpers.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fcjs%2Fhelpers.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fcjs%2Fhelpers.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "previous_filename": "lib/internal/module.js"
        },
        {
            "sha": "a1722666619d007550d7f77b33e16eedb0fe87d1",
            "filename": "lib/internal/modules/cjs/loader.js",
            "status": "renamed",
            "additions": 16,
            "deletions": 11,
            "changes": 27,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fcjs%2Floader.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -35,7 +35,12 @@ const {\n   internalModuleStat\n } = process.binding('fs');\n const { safeGetenv } = process.binding('util');\n-const internalModule = require('internal/module');\n+const {\n+  makeRequireFunction,\n+  requireDepth,\n+  stripBOM,\n+  stripShebang\n+} = require('internal/modules/cjs/helpers');\n const preserveSymlinks = !!process.binding('config').preserveSymlinks;\n const experimentalModules = !!process.binding('config').experimentalModules;\n \n@@ -48,9 +53,9 @@ const {\n module.exports = Module;\n \n // these are below module.exports for the circular reference\n-const internalESModule = require('internal/process/modules');\n-const ModuleJob = require('internal/loader/ModuleJob');\n-const createDynamicModule = require('internal/loader/CreateDynamicModule');\n+const asyncESM = require('internal/process/esm_loader');\n+const ModuleJob = require('internal/modules/esm/ModuleJob');\n+const createDynamicModule = require('internal/modules/esm/CreateDynamicModule');\n const {\n   CHAR_UPPERCASE_A,\n   CHAR_LOWERCASE_A,\n@@ -477,7 +482,7 @@ Module._load = function(request, parent, isMain) {\n   }\n \n   if (experimentalModules && isMain) {\n-    internalESModule.loaderPromise.then((loader) => {\n+    asyncESM.loaderPromise.then((loader) => {\n       return loader.import(getURLFromFilePath(request).pathname);\n     })\n     .catch((e) => {\n@@ -583,7 +588,7 @@ Module.prototype.load = function(filename) {\n   this.loaded = true;\n \n   if (experimentalModules) {\n-    const ESMLoader = internalESModule.ESMLoader;\n+    const ESMLoader = asyncESM.ESMLoader;\n     const url = getURLFromFilePath(filename);\n     const urlString = `${url}`;\n     const exports = this.exports;\n@@ -631,7 +636,7 @@ var resolvedArgv;\n // Returns exception, if any.\n Module.prototype._compile = function(content, filename) {\n \n-  content = internalModule.stripShebang(content);\n+  content = stripShebang(content);\n \n   // create wrapper function\n   var wrapper = Module.wrap(content);\n@@ -660,8 +665,8 @@ Module.prototype._compile = function(content, filename) {\n     }\n   }\n   var dirname = path.dirname(filename);\n-  var require = internalModule.makeRequireFunction(this);\n-  var depth = internalModule.requireDepth;\n+  var require = makeRequireFunction(this);\n+  var depth = requireDepth;\n   if (depth === 0) stat.cache = new Map();\n   var result;\n   if (inspectorWrapper) {\n@@ -679,15 +684,15 @@ Module.prototype._compile = function(content, filename) {\n // Native extension for .js\n Module._extensions['.js'] = function(module, filename) {\n   var content = fs.readFileSync(filename, 'utf8');\n-  module._compile(internalModule.stripBOM(content), filename);\n+  module._compile(stripBOM(content), filename);\n };\n \n \n // Native extension for .json\n Module._extensions['.json'] = function(module, filename) {\n   var content = fs.readFileSync(filename, 'utf8');\n   try {\n-    module.exports = JSON.parse(internalModule.stripBOM(content));\n+    module.exports = JSON.parse(stripBOM(content));\n   } catch (err) {\n     err.message = filename + ': ' + err.message;\n     throw err;",
            "previous_filename": "lib/module.js"
        },
        {
            "sha": "7e9777af51ee2b04ae476df81ceed3c1bc8fcde8",
            "filename": "lib/internal/modules/esm/CreateDynamicModule.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FCreateDynamicModule.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FCreateDynamicModule.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2FCreateDynamicModule.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "previous_filename": "lib/internal/loader/CreateDynamicModule.js"
        },
        {
            "sha": "00461e7df1f684f1901b55cb5ed5622e63b6dbe4",
            "filename": "lib/internal/modules/esm/DefaultResolve.js",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FDefaultResolve.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FDefaultResolve.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2FDefaultResolve.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -1,7 +1,7 @@\n 'use strict';\n \n const { URL } = require('url');\n-const CJSmodule = require('module');\n+const CJSmodule = require('internal/modules/cjs/loader');\n const internalFS = require('internal/fs');\n const { NativeModule, internalBinding } = require('internal/bootstrap/loaders');\n const { extname } = require('path');",
            "previous_filename": "lib/internal/loader/DefaultResolve.js"
        },
        {
            "sha": "84c23cc10ac2fc56ddc5911f00f327474df13879",
            "filename": "lib/internal/modules/esm/Loader.js",
            "status": "renamed",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FLoader.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FLoader.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2FLoader.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -6,11 +6,11 @@ const {\n   ERR_MISSING_DYNAMIC_INTSTANTIATE_HOOK,\n   ERR_UNKNOWN_MODULE_FORMAT\n } = require('internal/errors').codes;\n-const ModuleMap = require('internal/loader/ModuleMap');\n-const ModuleJob = require('internal/loader/ModuleJob');\n-const defaultResolve = require('internal/loader/DefaultResolve');\n-const createDynamicModule = require('internal/loader/CreateDynamicModule');\n-const translators = require('internal/loader/Translators');\n+const ModuleMap = require('internal/modules/esm/ModuleMap');\n+const ModuleJob = require('internal/modules/esm/ModuleJob');\n+const defaultResolve = require('internal/modules/esm/DefaultResolve');\n+const createDynamicModule = require('internal/modules/esm/CreateDynamicModule');\n+const translators = require('internal/modules/esm/Translators');\n \n const FunctionBind = Function.call.bind(Function.prototype.bind);\n ",
            "previous_filename": "lib/internal/loader/Loader.js"
        },
        {
            "sha": "d948252829ddbf8ebe8699577963334be3d96362",
            "filename": "lib/internal/modules/esm/ModuleJob.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FModuleJob.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FModuleJob.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2FModuleJob.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "previous_filename": "lib/internal/loader/ModuleJob.js"
        },
        {
            "sha": "e9a8d22d7bf31103ddadd5db0d74f6cbbcb676eb",
            "filename": "lib/internal/modules/esm/ModuleMap.js",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FModuleMap.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FModuleMap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2FModuleMap.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -1,6 +1,6 @@\n 'use strict';\n \n-const ModuleJob = require('internal/loader/ModuleJob');\n+const ModuleJob = require('internal/modules/esm/ModuleJob');\n const { SafeMap } = require('internal/safe_globals');\n const debug = require('util').debuglog('esm');\n const { ERR_INVALID_ARG_TYPE } = require('internal/errors').codes;",
            "previous_filename": "lib/internal/loader/ModuleMap.js"
        },
        {
            "sha": "2928115be515e0d0283997c21ea510372933aaa5",
            "filename": "lib/internal/modules/esm/Translators.js",
            "status": "renamed",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FTranslators.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fmodules%2Fesm%2FTranslators.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2FTranslators.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -2,10 +2,13 @@\n \n const { NativeModule, internalBinding } = require('internal/bootstrap/loaders');\n const { ModuleWrap } = internalBinding('module_wrap');\n-const internalCJSModule = require('internal/module');\n-const CJSModule = require('module');\n+const {\n+  stripShebang,\n+  stripBOM\n+} = require('internal/modules/cjs/helpers');\n+const CJSModule = require('internal/modules/cjs/loader');\n const internalURLModule = require('internal/url');\n-const createDynamicModule = require('internal/loader/CreateDynamicModule');\n+const createDynamicModule = require('internal/modules/esm/CreateDynamicModule');\n const fs = require('fs');\n const { _makeLong } = require('path');\n const { SafeMap } = require('internal/safe_globals');\n@@ -24,7 +27,7 @@ translators.set('esm', async (url) => {\n   const source = `${await readFileAsync(new URL(url))}`;\n   debug(`Translating StandardModule ${url}`);\n   return {\n-    module: new ModuleWrap(internalCJSModule.stripShebang(source), url),\n+    module: new ModuleWrap(stripShebang(source), url),\n     reflect: undefined\n   };\n });\n@@ -82,7 +85,7 @@ translators.set('json', async (url) => {\n     const pathname = internalURLModule.getPathFromURL(new URL(url));\n     const content = readFileSync(pathname, 'utf8');\n     try {\n-      const exports = JsonParse(internalCJSModule.stripBOM(content));\n+      const exports = JsonParse(stripBOM(content));\n       reflect.exports.default.set(exports);\n     } catch (err) {\n       err.message = pathname + ': ' + err.message;",
            "previous_filename": "lib/internal/loader/Translators.js"
        },
        {
            "sha": "e45c0faa1852148915ff2604b62e5274648f05c7",
            "filename": "lib/internal/process/esm_loader.js",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fprocess%2Fesm_loader.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Finternal%2Fprocess%2Fesm_loader.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprocess%2Fesm_loader.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -7,7 +7,7 @@ const {\n } = internalBinding('module_wrap');\n \n const { getURLFromFilePath } = require('internal/url');\n-const Loader = require('internal/loader/Loader');\n+const Loader = require('internal/modules/esm/Loader');\n const path = require('path');\n const { URL } = require('url');\n ",
            "previous_filename": "lib/internal/process/modules.js"
        },
        {
            "sha": "06703da131c301f779d2d58351ab255a81b0569e",
            "filename": "lib/repl.js",
            "status": "modified",
            "additions": 14,
            "deletions": 9,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Frepl.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/lib%2Frepl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Frepl.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -42,7 +42,11 @@\n \n 'use strict';\n \n-const internalModule = require('internal/module');\n+const {\n+  builtinLibs,\n+  makeRequireFunction,\n+  addBuiltinLibsToObject\n+} = require('internal/modules/cjs/helpers');\n const { processTopLevelAwait } = require('internal/repl/await');\n const internalUtil = require('internal/util');\n const { isTypedArray } = require('internal/util/types');\n@@ -55,7 +59,7 @@ const path = require('path');\n const fs = require('fs');\n const { Interface } = require('readline');\n const { Console } = require('console');\n-const Module = require('module');\n+const CJSModule = require('internal/modules/cjs/loader');\n const domain = require('domain');\n const debug = util.debuglog('repl');\n const {\n@@ -96,7 +100,7 @@ try {\n }\n \n // Hack for repl require to work properly with node_modules folders\n-module.paths = Module._nodeModulePaths(module.filename);\n+module.paths = CJSModule._nodeModulePaths(module.filename);\n \n // If obj.hasOwnProperty has been overridden, then calling\n // obj.hasOwnProperty(prop) will break.\n@@ -112,7 +116,7 @@ writer.options = Object.assign({},\n                                util.inspect.defaultOptions,\n                                { showProxy: true, depth: 2 });\n \n-exports._builtinLibs = internalModule.builtinLibs;\n+exports._builtinLibs = builtinLibs;\n \n function REPLServer(prompt,\n                     stream,\n@@ -789,14 +793,15 @@ REPLServer.prototype.createContext = function() {\n     }\n   }\n \n-  var module = new Module('<repl>');\n-  module.paths = Module._resolveLookupPaths('<repl>', parentModule, true) || [];\n+  var module = new CJSModule('<repl>');\n+  module.paths =\n+    CJSModule._resolveLookupPaths('<repl>', parentModule, true) || [];\n \n-  var require = internalModule.makeRequireFunction(module);\n+  var require = makeRequireFunction(module);\n   context.module = module;\n   context.require = require;\n \n-  internalModule.addBuiltinLibsToObject(context);\n+  addBuiltinLibsToObject(context);\n \n   return context;\n };\n@@ -1005,7 +1010,7 @@ function complete(line, callback) {\n     } else if (/^\\.\\.?\\//.test(completeOn)) {\n       paths = [process.cwd()];\n     } else {\n-      paths = module.paths.concat(Module.globalPaths);\n+      paths = module.paths.concat(CJSModule.globalPaths);\n     }\n \n     for (i = 0; i < paths.length; i++) {"
        },
        {
            "sha": "91d57631d6d55ee5f4da13f721231e38a33b0713",
            "filename": "node.gyp",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/node.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/node.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/node.gyp?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -104,17 +104,18 @@\n       'lib/internal/http.js',\n       'lib/internal/inspector_async_hook.js',\n       'lib/internal/linkedlist.js',\n-      'lib/internal/loader/Loader.js',\n-      'lib/internal/loader/CreateDynamicModule.js',\n-      'lib/internal/loader/DefaultResolve.js',\n-      'lib/internal/loader/ModuleJob.js',\n-      'lib/internal/loader/ModuleMap.js',\n-      'lib/internal/loader/Translators.js',\n+      'lib/internal/modules/cjs/helpers.js',\n+      'lib/internal/modules/cjs/loader.js',\n+      'lib/internal/modules/esm/Loader.js',\n+      'lib/internal/modules/esm/CreateDynamicModule.js',\n+      'lib/internal/modules/esm/DefaultResolve.js',\n+      'lib/internal/modules/esm/ModuleJob.js',\n+      'lib/internal/modules/esm/ModuleMap.js',\n+      'lib/internal/modules/esm/Translators.js',\n       'lib/internal/safe_globals.js',\n       'lib/internal/net.js',\n-      'lib/internal/module.js',\n       'lib/internal/os.js',\n-      'lib/internal/process/modules.js',\n+      'lib/internal/process/esm_loader.js',\n       'lib/internal/process/next_tick.js',\n       'lib/internal/process/promises.js',\n       'lib/internal/process/stdio.js',"
        },
        {
            "sha": "e9faa6d9f122f4485521b60e332ae181c68253b0",
            "filename": "test/es-module/test-esm-loader-modulemap.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fes-module%2Ftest-esm-loader-modulemap.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fes-module%2Ftest-esm-loader-modulemap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fes-module%2Ftest-esm-loader-modulemap.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -7,10 +7,10 @@\n const common = require('../common');\n \n const { URL } = require('url');\n-const Loader = require('internal/loader/Loader');\n-const ModuleMap = require('internal/loader/ModuleMap');\n-const ModuleJob = require('internal/loader/ModuleJob');\n-const createDynamicModule = require('internal/loader/CreateDynamicModule');\n+const Loader = require('internal/modules/esm/Loader');\n+const ModuleMap = require('internal/modules/esm/ModuleMap');\n+const ModuleJob = require('internal/modules/esm/ModuleJob');\n+const createDynamicModule = require('internal/modules/esm/CreateDynamicModule');\n \n const stubModuleUrl = new URL('file://tmp/test');\n const stubModule = createDynamicModule(['default'], stubModuleUrl);"
        },
        {
            "sha": "0f4591a4e3fd959b8c94527f9b19917906bb1ae7",
            "filename": "test/es-module/test-esm-loader-search.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fes-module%2Ftest-esm-loader-search.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fes-module%2Ftest-esm-loader-search.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fes-module%2Ftest-esm-loader-search.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -5,7 +5,7 @@\n \n const common = require('../common');\n \n-const { search } = require('internal/loader/DefaultResolve');\n+const { search } = require('internal/modules/esm/DefaultResolve');\n \n common.expectsError(\n   () => search('target', undefined),"
        },
        {
            "sha": "02b451465bb76ce0755530f7f92e42bc6c228069",
            "filename": "test/fixtures/module-require-depth/one.js",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Ffixtures%2Fmodule-require-depth%2Fone.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Ffixtures%2Fmodule-require-depth%2Fone.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fmodule-require-depth%2Fone.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -1,9 +1,11 @@\n // Flags: --expose_internals\n 'use strict';\n const assert = require('assert');\n-const internalModule = require('internal/module');\n+const {\n+  requireDepth\n+} = require('internal/modules/cjs/helpers');\n \n-exports.requireDepth = internalModule.requireDepth;\n-assert.strictEqual(internalModule.requireDepth, 1);\n+exports.requireDepth = requireDepth;\n+assert.strictEqual(requireDepth, 1);\n assert.deepStrictEqual(require('./two'), { requireDepth: 2 });\n-assert.strictEqual(internalModule.requireDepth, 1);\n+assert.strictEqual(requireDepth, 1);"
        },
        {
            "sha": "5c94c4c89aa9eff52f12a705ead67697964cbf52",
            "filename": "test/fixtures/module-require-depth/two.js",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Ffixtures%2Fmodule-require-depth%2Ftwo.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Ffixtures%2Fmodule-require-depth%2Ftwo.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fmodule-require-depth%2Ftwo.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -1,9 +1,11 @@\n // Flags: --expose_internals\n 'use strict';\n const assert = require('assert');\n-const internalModule = require('internal/module');\n+const {\n+  requireDepth\n+} = require('internal/modules/cjs/helpers');\n \n-exports.requireDepth = internalModule.requireDepth;\n-assert.strictEqual(internalModule.requireDepth, 2);\n+exports.requireDepth = requireDepth;\n+assert.strictEqual(requireDepth, 2);\n assert.deepStrictEqual(require('./one'), { requireDepth: 1 });\n-assert.strictEqual(internalModule.requireDepth, 2);\n+assert.strictEqual(requireDepth, 2);"
        },
        {
            "sha": "b50e1678f49fb733c9cb8ca48ac6abd8ca750690",
            "filename": "test/message/core_line_numbers.out",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fcore_line_numbers.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fcore_line_numbers.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fcore_line_numbers.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -6,10 +6,10 @@ RangeError: Invalid input\n     at error (punycode.js:42:*)\n     at Object.decode (punycode.js:*:*)\n     at Object.<anonymous> (*test*message*core_line_numbers.js:*:*)\n-    at Module._compile (module.js:*:*)\n-    at Object.Module._extensions..js (module.js:*:*)\n-    at Module.load (module.js:*:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*:*)\n-    at Function.Module.runMain (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*:*)\n+    at Module.load (internal/modules/cjs/loader.js:*:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)"
        },
        {
            "sha": "e7bcb050654513af2dd5b74096c6924e6e2d0201",
            "filename": "test/message/error_exit.out",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Ferror_exit.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Ferror_exit.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Ferror_exit.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -5,11 +5,11 @@ assert.js:*\n \n AssertionError [ERR_ASSERTION]: 1 strictEqual 2\n     at Object.<anonymous> (*test*message*error_exit.js:*:*)\n-    at Module._compile (module.js:*:*)\n-    at Object.Module._extensions..js (module.js:*:*)\n-    at Module.load (module.js:*:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*:*)\n-    at Function.Module.runMain (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*:*)\n+    at Module.load (internal/modules/cjs/loader.js:*:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)"
        },
        {
            "sha": "4564fe06d582acb80da0b807a696af20453fc324",
            "filename": "test/message/esm_display_syntax_error.out",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fesm_display_syntax_error.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fesm_display_syntax_error.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fesm_display_syntax_error.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -3,4 +3,4 @@ file:///*/test/message/esm_display_syntax_error.mjs:3\n await async () => 0;\n ^^^^^\n SyntaxError: Unexpected reserved word\n-    at translators.set (internal/loader/Translators.js:*:*)\n+    at translators.set (internal/modules/esm/Translators.js:*:*)"
        },
        {
            "sha": "02050d361e101dc56e507c89a388264d963db9f4",
            "filename": "test/message/esm_display_syntax_error_import.out",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fesm_display_syntax_error_import.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fesm_display_syntax_error_import.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fesm_display_syntax_error_import.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -3,4 +3,4 @@ file:///*/test/message/esm_display_syntax_error_import.mjs:6\n   notfound\n   ^^^^^^^^\n SyntaxError: The requested module '../fixtures/es-module-loaders/module-named-exports' does not provide an export named 'notfound'\n-    at ModuleJob._instantiate (internal/loader/ModuleJob.js:*:*)\n+    at ModuleJob._instantiate (internal/modules/esm/ModuleJob.js:*:*)"
        },
        {
            "sha": "ae0bf331de53ee2d62eba398abcad0d8b240208f",
            "filename": "test/message/esm_display_syntax_error_import_module.out",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fesm_display_syntax_error_import_module.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fesm_display_syntax_error_import_module.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fesm_display_syntax_error_import_module.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -3,4 +3,4 @@ file:///*/test/fixtures/es-module-loaders/syntax-error-import.mjs:1\n import { foo, notfound } from './module-named-exports';\n               ^^^^^^^^\n SyntaxError: The requested module './module-named-exports' does not provide an export named 'notfound'\n-    at ModuleJob._instantiate (internal/loader/ModuleJob.js:*:*)\n+    at ModuleJob._instantiate (internal/modules/esm/ModuleJob.js:*:*)"
        },
        {
            "sha": "fc0581c225f4852e9827e8055f6141965f0df909",
            "filename": "test/message/esm_display_syntax_error_module.out",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fesm_display_syntax_error_module.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fesm_display_syntax_error_module.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fesm_display_syntax_error_module.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -3,4 +3,4 @@ file:///*/test/fixtures/es-module-loaders/syntax-error.mjs:2\n await async () => 0;\n ^^^^^\n SyntaxError: Unexpected reserved word\n-    at translators.set (internal/loader/Translators.js:*:*)\n+    at translators.set (internal/modules/esm/Translators.js:*:*)"
        },
        {
            "sha": "d01dfe547cbd73b2ef223ca8049d705ebb78c606",
            "filename": "test/message/eval_messages.out",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Feval_messages.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Feval_messages.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Feval_messages.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -7,7 +7,7 @@ SyntaxError: Strict mode code may not include a with statement\n     at createScript (vm.js:*:*)\n     at Object.runInThisContext (vm.js:*:*)\n     at Object.<anonymous> ([eval]-wrapper:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at evalScript (internal/bootstrap/node.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)\n@@ -22,7 +22,7 @@ Error: hello\n     at Script.runInThisContext (vm.js:*:*)\n     at Object.runInThisContext (vm.js:*:*)\n     at Object.<anonymous> ([eval]-wrapper:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at evalScript (internal/bootstrap/node.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)\n@@ -36,7 +36,7 @@ Error: hello\n     at Script.runInThisContext (vm.js:*:*)\n     at Object.runInThisContext (vm.js:*:*)\n     at Object.<anonymous> ([eval]-wrapper:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at evalScript (internal/bootstrap/node.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)\n@@ -50,7 +50,7 @@ ReferenceError: y is not defined\n     at Script.runInThisContext (vm.js:*:*)\n     at Object.runInThisContext (vm.js:*:*)\n     at Object.<anonymous> ([eval]-wrapper:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at evalScript (internal/bootstrap/node.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)"
        },
        {
            "sha": "f6b74e9991306bd180ec7a3fe1ee8583cc886e27",
            "filename": "test/message/events_unhandled_error_common_trace.out",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fevents_unhandled_error_common_trace.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fevents_unhandled_error_common_trace.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fevents_unhandled_error_common_trace.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -6,17 +6,17 @@ Error: foo:bar\n     at bar (*events_unhandled_error_common_trace.js:*:*)\n     at foo (*events_unhandled_error_common_trace.js:*:*)\n     at Object.<anonymous> (*events_unhandled_error_common_trace.js:*:*)\n-    at Module._compile (module.js:*:*)\n-    at Object.Module._extensions..js (module.js:*:*)\n-    at Module.load (module.js:*:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*:*)\n-    at Function.Module.runMain (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*:*)\n+    at Module.load (internal/modules/cjs/loader.js:*:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n Emitted 'error' event at:\n     at quux (*events_unhandled_error_common_trace.js:*:*)\n     at Object.<anonymous> (*events_unhandled_error_common_trace.js:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     [... lines matching original stack trace ...]\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)"
        },
        {
            "sha": "e00580ce93cf4508167926da7747589c05ae1243",
            "filename": "test/message/events_unhandled_error_nexttick.out",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fevents_unhandled_error_nexttick.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fevents_unhandled_error_nexttick.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fevents_unhandled_error_nexttick.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -4,17 +4,17 @@ events.js:*\n \n Error\n     at Object.<anonymous> (*events_unhandled_error_nexttick.js:*:*)\n-    at Module._compile (module.js:*:*)\n-    at Object.Module._extensions..js (module.js:*:*)\n-    at Module.load (module.js:*:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*:*)\n-    at Function.Module.runMain (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*:*)\n+    at Module.load (internal/modules/cjs/loader.js:*:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)\n Emitted 'error' event at:\n     at process.nextTick (*events_unhandled_error_nexttick.js:*:*)\n     at process._tickCallback (internal/process/next_tick.js:*:*)\n-    at Function.Module.runMain (module.js:*:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)"
        },
        {
            "sha": "55841cdbc345d779118ca27330ec057f1ee39c2a",
            "filename": "test/message/events_unhandled_error_sameline.out",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fevents_unhandled_error_sameline.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fevents_unhandled_error_sameline.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fevents_unhandled_error_sameline.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -4,16 +4,16 @@ events.js:*\n \n Error\n     at Object.<anonymous> (*events_unhandled_error_sameline.js:*:*)\n-    at Module._compile (module.js:*:*)\n-    at Object.Module._extensions..js (module.js:*:*)\n-    at Module.load (module.js:*:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*:*)\n-    at Function.Module.runMain (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*:*)\n+    at Module.load (internal/modules/cjs/loader.js:*:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)\n Emitted 'error' event at:\n     at Object.<anonymous> (*events_unhandled_error_sameline.js:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     [... lines matching original stack trace ...]\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)"
        },
        {
            "sha": "2a4dfe8fb266307cfc00ee9abb6e41b214620f62",
            "filename": "test/message/if-error-has-good-stack.out",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fif-error-has-good-stack.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fif-error-has-good-stack.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fif-error-has-good-stack.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -11,9 +11,9 @@ AssertionError [ERR_ASSERTION]: ifError got unwanted exception: test error\n     at b (*if-error-has-good-stack.js:*:*)\n     at a (*if-error-has-good-stack.js:*:*)\n     at Object.<anonymous> (*if-error-has-good-stack.js:*:*)\n-    at Module._compile (module.js:*:*)\n-    at Object.Module._extensions..js (module.js:*:*)\n-    at Module.load (module.js:*:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*:*)\n-    at Function.Module.runMain (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*:*)\n+    at Module.load (internal/modules/cjs/loader.js:*:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*:*)"
        },
        {
            "sha": "16e41f6343baecaa7c6edfa59ef2ff7ad2d2039a",
            "filename": "test/message/nexttick_throw.out",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fnexttick_throw.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fnexttick_throw.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fnexttick_throw.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -5,6 +5,6 @@\n ReferenceError: undefined_reference_error_maker is not defined\n     at *test*message*nexttick_throw.js:*:*\n     at process._tickCallback (internal/process/next_tick.js:*:*)\n-    at Function.Module.runMain (module.js:*:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*:*)\n     at startup (internal/bootstrap/node.js:*:*)\n     at bootstrapNodeJSCore (internal/bootstrap/node.js:*:*)"
        },
        {
            "sha": "d4498b452aa6ba50fa74183f49bea163c3e6d349",
            "filename": "test/message/stdin_messages.out",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fstdin_messages.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fstdin_messages.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fstdin_messages.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -7,7 +7,7 @@ SyntaxError: Strict mode code may not include a with statement\n     at createScript (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> ([stdin]-wrapper:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at evalScript (internal/bootstrap/node.js:*:*)\n     at Socket.<anonymous> (internal/bootstrap/node.js:*:*)\n     at Socket.emit (events.js:*:*)\n@@ -24,7 +24,7 @@ Error: hello\n     at Script.runInThisContext (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> ([stdin]-wrapper:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at evalScript (internal/bootstrap/node.js:*:*)\n     at Socket.<anonymous> (internal/bootstrap/node.js:*:*)\n     at Socket.emit (events.js:*:*)\n@@ -39,7 +39,7 @@ Error: hello\n     at Script.runInThisContext (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> ([stdin]-wrapper:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at evalScript (internal/bootstrap/node.js:*:*)\n     at Socket.<anonymous> (internal/bootstrap/node.js:*:*)\n     at Socket.emit (events.js:*:*)\n@@ -55,7 +55,7 @@ ReferenceError: y is not defined\n     at Script.runInThisContext (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> ([stdin]-wrapper:*:*)\n-    at Module._compile (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*:*)\n     at evalScript (internal/bootstrap/node.js:*:*)\n     at Socket.<anonymous> (internal/bootstrap/node.js:*:*)\n     at Socket.emit (events.js:*:*)"
        },
        {
            "sha": "6b5fedfa993701d035e4d2d2b69246383c5367e9",
            "filename": "test/message/undefined_reference_in_new_context.out",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fundefined_reference_in_new_context.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fundefined_reference_in_new_context.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fundefined_reference_in_new_context.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -9,8 +9,8 @@ ReferenceError: foo is not defined\n     at Script.runInNewContext (vm.js:*)\n     at Object.runInNewContext (vm.js:*)\n     at Object.<anonymous> (*test*message*undefined_reference_in_new_context.js:*)\n-    at Module._compile (module.js:*)\n-    at *..js (module.js:*)\n-    at Module.load (module.js:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*)\n+    at *..js (internal/modules/cjs/loader.js:*)\n+    at Module.load (internal/modules/cjs/loader.js:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*:*)"
        },
        {
            "sha": "bc95b2a7b092f5699bac40518b9068cd539a0891",
            "filename": "test/message/vm_display_runtime_error.out",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fvm_display_runtime_error.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fvm_display_runtime_error.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fvm_display_runtime_error.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -8,12 +8,12 @@ Error: boo!\n     at Script.runInThisContext (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> (*test*message*vm_display_runtime_error.js:*)\n-    at Module._compile (module.js:*)\n-    at Object.Module._extensions..js (module.js:*)\n-    at Module.load (module.js:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*)\n-    at Function.Module.runMain (module.js:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*)\n+    at Module.load (internal/modules/cjs/loader.js:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*)\n test.vm:1\n throw new Error(\"spooky!\")\n ^\n@@ -23,9 +23,9 @@ Error: spooky!\n     at Script.runInThisContext (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> (*test*message*vm_display_runtime_error.js:*)\n-    at Module._compile (module.js:*)\n-    at Object.Module._extensions..js (module.js:*)\n-    at Module.load (module.js:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*)\n-    at Function.Module.runMain (module.js:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*)\n+    at Module.load (internal/modules/cjs/loader.js:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*)"
        },
        {
            "sha": "f0692723e81257646603b72ec7e6959abcfe394e",
            "filename": "test/message/vm_display_syntax_error.out",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fvm_display_syntax_error.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fvm_display_syntax_error.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fvm_display_syntax_error.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -7,12 +7,12 @@ SyntaxError: Unexpected number\n     at createScript (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> (*test*message*vm_display_syntax_error.js:*)\n-    at Module._compile (module.js:*)\n-    at Object.Module._extensions..js (module.js:*)\n-    at Module.load (module.js:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*)\n-    at Function.Module.runMain (module.js:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*)\n+    at Module.load (internal/modules/cjs/loader.js:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*)\n test.vm:1\n var 5;\n     ^\n@@ -21,9 +21,9 @@ SyntaxError: Unexpected number\n     at createScript (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> (*test*message*vm_display_syntax_error.js:*)\n-    at Module._compile (module.js:*)\n-    at Object.Module._extensions..js (module.js:*)\n-    at Module.load (module.js:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*)\n-    at Function.Module.runMain (module.js:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*)\n+    at Module.load (internal/modules/cjs/loader.js:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*)"
        },
        {
            "sha": "532cfbf4dd8125f800d7d20202e744d49d39350f",
            "filename": "test/message/vm_dont_display_runtime_error.out",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fvm_dont_display_runtime_error.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fvm_dont_display_runtime_error.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fvm_dont_display_runtime_error.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -9,9 +9,9 @@ Error: boo!\n     at Script.runInThisContext (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> (*test*message*vm_dont_display_runtime_error.js:*)\n-    at Module._compile (module.js:*)\n-    at Object.Module._extensions..js (module.js:*)\n-    at Module.load (module.js:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*)\n-    at Function.Module.runMain (module.js:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*)\n+    at Module.load (internal/modules/cjs/loader.js:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*)"
        },
        {
            "sha": "f27cb1a0859d8c47940032153c91c8bf76132633",
            "filename": "test/message/vm_dont_display_syntax_error.out",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fvm_dont_display_syntax_error.out",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fmessage%2Fvm_dont_display_syntax_error.out",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fmessage%2Fvm_dont_display_syntax_error.out?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -9,9 +9,9 @@ SyntaxError: Unexpected number\n     at createScript (vm.js:*)\n     at Object.runInThisContext (vm.js:*)\n     at Object.<anonymous> (*test*message*vm_dont_display_syntax_error.js:*)\n-    at Module._compile (module.js:*)\n-    at Object.Module._extensions..js (module.js:*)\n-    at Module.load (module.js:*)\n-    at tryModuleLoad (module.js:*:*)\n-    at Function.Module._load (module.js:*)\n-    at Function.Module.runMain (module.js:*)\n+    at Module._compile (internal/modules/cjs/loader.js:*)\n+    at Object.Module._extensions..js (internal/modules/cjs/loader.js:*)\n+    at Module.load (internal/modules/cjs/loader.js:*)\n+    at tryModuleLoad (internal/modules/cjs/loader.js:*:*)\n+    at Function.Module._load (internal/modules/cjs/loader.js:*)\n+    at Function.Module.runMain (internal/modules/cjs/loader.js:*)"
        },
        {
            "sha": "330f04cfd9680077f104508b715af729a65bf099",
            "filename": "test/parallel/test-internal-module-map-asserts.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fparallel%2Ftest-internal-module-map-asserts.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fparallel%2Ftest-internal-module-map-asserts.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-module-map-asserts.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -3,7 +3,7 @@\n \n const common = require('../common');\n const assert = require('assert');\n-const ModuleMap = require('internal/loader/ModuleMap');\n+const ModuleMap = require('internal/modules/esm/ModuleMap');\n \n // ModuleMap.get, ModuleMap.has and ModuleMap.set should only accept string\n // values as url argument."
        },
        {
            "sha": "6c23848a96923135d6b294f8588b5f8f644ee4c9",
            "filename": "test/parallel/test-internal-modules-strip-shebang.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fparallel%2Ftest-internal-modules-strip-shebang.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fparallel%2Ftest-internal-modules-strip-shebang.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-modules-strip-shebang.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -3,7 +3,7 @@\n require('../common');\n \n const assert = require('assert');\n-const stripShebang = require('internal/module').stripShebang;\n+const stripShebang = require('internal/modules/cjs/helpers').stripShebang;\n \n [\n   ['', ''],"
        },
        {
            "sha": "0a3fc2826c71f4b70ce5bc6ed653c5eda8ff40d8",
            "filename": "test/parallel/test-module-require-depth.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fparallel%2Ftest-module-require-depth.js",
            "raw_url": "https://github.com/nodejs/node/raw/c2b01881dcb3bf302f9d83157e719cc5240a9042/test%2Fparallel%2Ftest-module-require-depth.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-module-require-depth.js?ref=c2b01881dcb3bf302f9d83157e719cc5240a9042",
            "patch": "@@ -3,12 +3,14 @@\n require('../common');\n const fixtures = require('../common/fixtures');\n const assert = require('assert');\n-const internalModule = require('internal/module');\n+const {\n+  requireDepth\n+} = require('internal/modules/cjs/helpers');\n \n // Module one loads two too so the expected depth for two is, well, two.\n-assert.strictEqual(internalModule.requireDepth, 0);\n+assert.strictEqual(requireDepth, 0);\n const one = require(fixtures.path('module-require-depth', 'one'));\n const two = require(fixtures.path('module-require-depth', 'two'));\n assert.deepStrictEqual(one, { requireDepth: 1 });\n assert.deepStrictEqual(two, { requireDepth: 2 });\n-assert.strictEqual(internalModule.requireDepth, 0);\n+assert.strictEqual(requireDepth, 0);"
        }
    ],
    "stats": {
        "total": 377,
        "additions": 203,
        "deletions": 174
    }
}