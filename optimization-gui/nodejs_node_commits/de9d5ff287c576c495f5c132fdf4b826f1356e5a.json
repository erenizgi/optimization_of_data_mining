{
    "author": "addaleax",
    "message": "worker: use correct ctor for error serialization\n\nWhen serializing errors, use the error constructor that is\nclosest to the object itself in the prototype chain.\n\nThe previous practice of walking downwards meant that\n`Error` would usually be the first constructor that is used,\neven when a more specific one would be available/appropriate,\nbecause it is the base class of the other common error types.\n\nPR-URL: https://github.com/nodejs/node/pull/25951\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "de9d5ff287c576c495f5c132fdf4b826f1356e5a",
    "files": [
        {
            "sha": "7b4b416b80c67071ec27bd7a94f6b63d797e58d6",
            "filename": "lib/internal/error-serdes.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/de9d5ff287c576c495f5c132fdf4b826f1356e5a/lib%2Finternal%2Ferror-serdes.js",
            "raw_url": "https://github.com/nodejs/node/raw/de9d5ff287c576c495f5c132fdf4b826f1356e5a/lib%2Finternal%2Ferror-serdes.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ferror-serdes.js?ref=de9d5ff287c576c495f5c132fdf4b826f1356e5a",
            "patch": "@@ -86,7 +86,7 @@ function serializeError(error) {\n     if (typeof error === 'object' &&\n         ObjectPrototypeToString(error) === '[object Error]') {\n       const constructors = GetConstructors(error);\n-      for (var i = constructors.length - 1; i >= 0; i--) {\n+      for (var i = 0; i < constructors.length; i++) {\n         const name = GetName(constructors[i]);\n         if (errorConstructorNames.has(name)) {\n           try { error.stack; } catch {}"
        },
        {
            "sha": "ca42c1748085001ab498ec65d6f7f554551105ab",
            "filename": "test/parallel/test-worker-syntax-error-file.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/de9d5ff287c576c495f5c132fdf4b826f1356e5a/test%2Fparallel%2Ftest-worker-syntax-error-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/de9d5ff287c576c495f5c132fdf4b826f1356e5a/test%2Fparallel%2Ftest-worker-syntax-error-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-worker-syntax-error-file.js?ref=de9d5ff287c576c495f5c132fdf4b826f1356e5a",
            "patch": "@@ -10,6 +10,7 @@ if (!process.env.HAS_STARTED_WORKER) {\n   const w = new Worker(fixtures.path('syntax', 'bad_syntax.js'));\n   w.on('message', common.mustNotCall());\n   w.on('error', common.mustCall((err) => {\n+    assert.strictEqual(err.constructor, SyntaxError);\n     assert(/SyntaxError/.test(err));\n   }));\n } else {"
        },
        {
            "sha": "5c91eb2d251204782edc3ccc0b324bbe368e4040",
            "filename": "test/parallel/test-worker-syntax-error.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/de9d5ff287c576c495f5c132fdf4b826f1356e5a/test%2Fparallel%2Ftest-worker-syntax-error.js",
            "raw_url": "https://github.com/nodejs/node/raw/de9d5ff287c576c495f5c132fdf4b826f1356e5a/test%2Fparallel%2Ftest-worker-syntax-error.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-worker-syntax-error.js?ref=de9d5ff287c576c495f5c132fdf4b826f1356e5a",
            "patch": "@@ -9,6 +9,7 @@ if (!process.env.HAS_STARTED_WORKER) {\n   const w = new Worker('abc)', { eval: true });\n   w.on('message', common.mustNotCall());\n   w.on('error', common.mustCall((err) => {\n+    assert.strictEqual(err.constructor, SyntaxError);\n     assert(/SyntaxError/.test(err));\n   }));\n } else {"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}