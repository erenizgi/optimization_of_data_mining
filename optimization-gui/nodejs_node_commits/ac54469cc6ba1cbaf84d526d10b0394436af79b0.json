{
    "author": "addaleax",
    "message": "src: deprecate V8 date conversion helpers\n\nThese helpers provide no benefit over the existing V8 API,\nand at least one of them fetches the current `Isolate` through\n`Isolate::GetCurrent()` (which should be avoided).\n\nPR-URL: https://github.com/nodejs/node/pull/23179\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "ac54469cc6ba1cbaf84d526d10b0394436af79b0",
    "files": [
        {
            "sha": "7373e84048d6e105282d2eaef3ad879ecf55327d",
            "filename": "src/node.h",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/ac54469cc6ba1cbaf84d526d10b0394436af79b0/src%2Fnode.h",
            "raw_url": "https://github.com/nodejs/node/raw/ac54469cc6ba1cbaf84d526d10b0394436af79b0/src%2Fnode.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.h?ref=ac54469cc6ba1cbaf84d526d10b0394436af79b0",
            "patch": "@@ -289,9 +289,16 @@ NODE_EXTERN void RunAtExit(Environment* env);\n NODE_EXTERN struct uv_loop_s* GetCurrentEventLoop(v8::Isolate* isolate);\n \n /* Converts a unixtime to V8 Date */\n-#define NODE_UNIXTIME_V8(t) v8::Date::New(v8::Isolate::GetCurrent(),          \\\n-    1000 * static_cast<double>(t))\n-#define NODE_V8_UNIXTIME(v) (static_cast<double>((v)->NumberValue())/1000.0);\n+NODE_DEPRECATED(\"Use v8::Date::New() directly\",\n+                inline v8::Local<v8::Value> NODE_UNIXTIME_V8(double time) {\n+  return v8::Date::New(v8::Isolate::GetCurrent(), 1000 * time);\n+})\n+#define NODE_UNIXTIME_V8 node::NODE_UNIXTIME_V8\n+NODE_DEPRECATED(\"Use v8::Date::ValueOf() directly\",\n+                inline double NODE_V8_UNIXTIME(v8::Local<v8::Date> date) {\n+  return date->ValueOf() / 1000;\n+})\n+#define NODE_V8_UNIXTIME node::NODE_V8_UNIXTIME\n \n #define NODE_DEFINE_CONSTANT(target, constant)                                \\\n   do {                                                                        \\"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 10,
        "deletions": 3
    }
}