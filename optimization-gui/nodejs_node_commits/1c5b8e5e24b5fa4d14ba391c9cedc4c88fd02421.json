{
    "author": "shigeki",
    "message": "deps: fix gyp/gypi for openssl-1.1.1\n\nSome of defines and cppflags in the build config of OpenSSL-1.1.1 were\nmoved to new attributes. Gyp and gypi file generations are needed to be\nfixed to include them.\n\nPR-URL: https://github.com/nodejs/node/pull/25381\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Shigeki Ohtsu <ohtsu@ohtsu.org>",
    "sha": "1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421",
    "files": [
        {
            "sha": "00bcaf5b9c482a993ea0b2ced33465ad79adc30b",
            "filename": "deps/openssl/config/generate_gypi.pl",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421/deps%2Fopenssl%2Fconfig%2Fgenerate_gypi.pl",
            "raw_url": "https://github.com/nodejs/node/raw/1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421/deps%2Fopenssl%2Fconfig%2Fgenerate_gypi.pl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fopenssl%2Fconfig%2Fgenerate_gypi.pl?ref=1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421",
            "patch": "@@ -115,6 +115,9 @@\n   system(\"$cmd\") == 0 or die \"Error in system($cmd)\";\n }\n \n+$target{'lib_cppflags'} =~ s/-D//g;\n+my @lib_cppflags = split(/ /, $target{'lib_cppflags'});\n+\n # Create openssl.gypi\n my $template =\n     Text::Template->new(TYPE => 'FILE',\n@@ -131,6 +134,7 @@\n         target => \\%target,\n         asm => \\$asm,\n         arch => \\$arch,\n+        lib_cppflags => \\@lib_cppflags,\n         is_win => \\$is_win,\n     });\n \n@@ -152,6 +156,7 @@\n         config => \\%config,\n         target => \\%target,\n         arch => \\$arch,\n+        lib_cppflags => \\@lib_cppflags,\n         is_win => \\$is_win,\n     });\n "
        },
        {
            "sha": "58c907e3aa3986de54e83c17163ccc7a1d85c5f7",
            "filename": "deps/openssl/config/openssl-cl.gypi.tmpl",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421/deps%2Fopenssl%2Fconfig%2Fopenssl-cl.gypi.tmpl",
            "raw_url": "https://github.com/nodejs/node/raw/1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421/deps%2Fopenssl%2Fconfig%2Fopenssl-cl.gypi.tmpl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fopenssl%2Fconfig%2Fopenssl-cl.gypi.tmpl?ref=1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421",
            "patch": "@@ -2,10 +2,26 @@\n   'variables': {\n     'openssl_defines_%%-$arch-%%': [\n %%- foreach $define (@{$config{defines}}) {\n+      $OUT .= \"      '$define',\\n\";\n+    }\n+    foreach $define (@lib_cppflags) {\n+      $OUT .= \"      '$define',\\n\";\n+    }\n+    foreach $define (@{$target{defines}}) {\n+      $OUT .= \"      '$define',\\n\";\n+    }\n+    foreach $define (@{$config{lib_defines}}) {\n   $OUT .= \"      '$define',\\n\";\n } -%%    ],\n     'openssl_cflags_%%-$arch-%%': [\n+%%- foreach $cflag (@{$config{cflags}}) {\n+      $OUT .= \"      '$cflag',\\n\";\n+    }\n+    foreach $cflag (@{$config{CFLAGS}}) {\n+      $OUT .= \"      '$cflag',\\n\";\n+    } -%%\n       '%%-$target{cflags}-%%',\n+      '%%-$target{CFLAGS}-%%',\n     ],\n     'openssl_ex_libs_%%-$arch-%%': [\n       '%%-$target{ex_libs}-%%',"
        },
        {
            "sha": "4426879b5b9226c141cf3babf131a800fed8e792",
            "filename": "deps/openssl/config/openssl.gypi.tmpl",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421/deps%2Fopenssl%2Fconfig%2Fopenssl.gypi.tmpl",
            "raw_url": "https://github.com/nodejs/node/raw/1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421/deps%2Fopenssl%2Fconfig%2Fopenssl.gypi.tmpl",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fopenssl%2Fconfig%2Fopenssl.gypi.tmpl?ref=1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421",
            "patch": "@@ -13,10 +13,26 @@ foreach $src (@libcrypto_srcs) {\n } -%%    ],\n     'openssl_defines_%%-$arch-%%': [\n %%- foreach $define (@{$config{defines}}) {\n+      $OUT .= \"      '$define',\\n\";\n+    }\n+    foreach $define (@lib_cppflags) {\n+      $OUT .= \"      '$define',\\n\";\n+    }\n+    foreach $define (@{$target{defines}}) {\n+      $OUT .= \"      '$define',\\n\";\n+    }\n+    foreach $define (@{$config{lib_defines}}) {\n   $OUT .= \"      '$define',\\n\";\n } -%%    ],\n     'openssl_cflags_%%-$arch-%%': [\n+%%- foreach $cflag (@{$config{cflags}}) {\n+      $OUT .= \"      '$cflag',\\n\";\n+    }\n+    foreach $cflag (@{$config{CFLAGS}}) {\n+      $OUT .= \"      '$cflag',\\n\";\n+    } -%%\n       '%%-$target{cflags}-%%',\n+      '%%-$target{CFLAGS}-%%',\n     ],\n     'openssl_ex_libs_%%-$arch-%%': [\n       '%%-$target{ex_libs}-%%',"
        },
        {
            "sha": "75002e87c2690faa9e6b92c1818e289bd0bd93c3",
            "filename": "deps/openssl/openssl_common.gypi",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421/deps%2Fopenssl%2Fopenssl_common.gypi",
            "raw_url": "https://github.com/nodejs/node/raw/1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421/deps%2Fopenssl%2Fopenssl_common.gypi",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fopenssl%2Fopenssl_common.gypi?ref=1c5b8e5e24b5fa4d14ba391c9cedc4c88fd02421",
            "patch": "@@ -5,6 +5,8 @@\n     'openssl/crypto/',\n     'openssl/crypto/include/',\n     'openssl/crypto/modes/',\n+    'openssl/crypto/ec/curve448',\n+    'openssl/crypto/ec/curve448/arch_32',\n     'config/',\n   ],\n   # build options specific to OS"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 39,
        "deletions": 0
    }
}