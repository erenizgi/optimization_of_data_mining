{
    "author": "addaleax",
    "message": "net: simplify net.Socket#end()\n\n`writable` is already set by the streams side, and\nthere is a handler waiting for the writable side to finish\nwhich already takes care of the other cleanup code that\nwas previously there; both of these things can therefore be removed.\n\nPR-URL: https://github.com/nodejs/node/pull/18708\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>",
    "sha": "590eacecaabe282eb602d49ba0b25d1a266a7609",
    "files": [
        {
            "sha": "ed2ea2dc27739bf453ff15aa9a0c0b51f1ebb812",
            "filename": "lib/net.js",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/590eacecaabe282eb602d49ba0b25d1a266a7609/lib%2Fnet.js",
            "raw_url": "https://github.com/nodejs/node/raw/590eacecaabe282eb602d49ba0b25d1a266a7609/lib%2Fnet.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fnet.js?ref=590eacecaabe282eb602d49ba0b25d1a266a7609",
            "patch": "@@ -525,18 +525,10 @@ Socket.prototype._read = function(n) {\n };\n \n \n-Socket.prototype.end = function(data, encoding) {\n-  stream.Duplex.prototype.end.call(this, data, encoding);\n-  this.writable = false;\n+Socket.prototype.end = function(data, encoding, callback) {\n+  stream.Duplex.prototype.end.call(this, data, encoding, callback);\n   DTRACE_NET_STREAM_END(this);\n   LTTNG_NET_STREAM_END(this);\n-\n-  // just in case we're waiting for an EOF.\n-  if (this.readable && !this._readableState.endEmitted)\n-    this.read(0);\n-  else\n-    maybeDestroy(this);\n-\n   return this;\n };\n "
        }
    ],
    "stats": {
        "total": 12,
        "additions": 2,
        "deletions": 10
    }
}