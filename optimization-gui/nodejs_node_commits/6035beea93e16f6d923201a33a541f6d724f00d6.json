{
    "author": "jasnell",
    "message": "crypto: runtime deprecate DEFAULT_ENCODING\n\nRuntime deprecate the crypto.DEFAULT_ENCODING property.\n\nThis is specifically in preparation for eventual ESM support\nRefs: https://github.com/nodejs/node/pull/18131\n\nPR-URL: https://github.com/nodejs/node/pull/18333\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Tobias Nießen <tniessen@tnie.de>",
    "sha": "6035beea93e16f6d923201a33a541f6d724f00d6",
    "files": [
        {
            "sha": "5e2af21dab19a5dcef3f72f56715bf27a567c827",
            "filename": "doc/api/crypto.md",
            "status": "modified",
            "additions": 10,
            "deletions": 6,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/6035beea93e16f6d923201a33a541f6d724f00d6/doc%2Fapi%2Fcrypto.md",
            "raw_url": "https://github.com/nodejs/node/raw/6035beea93e16f6d923201a33a541f6d724f00d6/doc%2Fapi%2Fcrypto.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fcrypto.md?ref=6035beea93e16f6d923201a33a541f6d724f00d6",
            "patch": "@@ -1222,6 +1222,7 @@ related operations. The specific constants currently defined are described in\n ### crypto.DEFAULT_ENCODING\n <!-- YAML\n added: v0.9.3\n+deprecated: REPLACEME\n -->\n \n The default encoding to use for functions that can take either strings\n@@ -1231,8 +1232,9 @@ default to [`Buffer`][] objects.\n The `crypto.DEFAULT_ENCODING` mechanism is provided for backwards compatibility\n with legacy programs that expect `'latin1'` to be the default encoding.\n \n-New applications should expect the default to be `'buffer'`. This property may\n-become deprecated in a future Node.js release.\n+New applications should expect the default to be `'buffer'`.\n+\n+This property is deprecated.\n \n ### crypto.fips\n <!-- YAML\n@@ -1643,8 +1645,9 @@ crypto.pbkdf2('secret', 'salt', 100000, 64, 'sha512', (err, derivedKey) => {\n });\n ```\n \n-The `crypto.DEFAULT_ENCODING` may be used to change the way the `derivedKey`\n-is passed to the callback:\n+The `crypto.DEFAULT_ENCODING` property can be used to change the way the\n+`derivedKey` is passed to the callback. This property, however, has been\n+deprecated and use should be avoided.\n \n ```js\n const crypto = require('crypto');\n@@ -1705,8 +1708,9 @@ const key = crypto.pbkdf2Sync('secret', 'salt', 100000, 64, 'sha512');\n console.log(key.toString('hex'));  // '3745e48...08d59ae'\n ```\n \n-The `crypto.DEFAULT_ENCODING` may be used to change the way the `derivedKey`\n-is returned:\n+The `crypto.DEFAULT_ENCODING` property may be used to change the way the\n+`derivedKey` is returned.  This property, however, has been deprecated and use\n+should be avoided.\n \n ```js\n const crypto = require('crypto');"
        },
        {
            "sha": "87199e4a306da108ad60c800c26d80846f512c2e",
            "filename": "doc/api/deprecations.md",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/6035beea93e16f6d923201a33a541f6d724f00d6/doc%2Fapi%2Fdeprecations.md",
            "raw_url": "https://github.com/nodejs/node/raw/6035beea93e16f6d923201a33a541f6d724f00d6/doc%2Fapi%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fdeprecations.md?ref=6035beea93e16f6d923201a33a541f6d724f00d6",
            "patch": "@@ -824,6 +824,13 @@ a future version at which point only authentication tag lengths of 128, 120,\n is not included in this list will be considered invalid in compliance with\n [NIST SP 800-38D][].\n \n+<a id=\"DEP00XX\"></a>\n+### DEP00XX: crypto.DEFAULT_ENCODING\n+\n+Type: Runtime\n+\n+The [`crypto.DEFAULT_ENCODING`][] property is deprecated.\n+\n [`--pending-deprecation`]: cli.html#cli_pending_deprecation\n [`Buffer.allocUnsafeSlow(size)`]: buffer.html#buffer_class_method_buffer_allocunsafeslow_size\n [`Buffer.from(array)`]: buffer.html#buffer_class_method_buffer_from_array\n@@ -838,6 +845,7 @@ is not included in this list will be considered invalid in compliance with\n [`console.error()`]: console.html#console_console_error_data_args\n [`console.log()`]: console.html#console_console_log_data_args\n [`crypto.createCredentials()`]: crypto.html#crypto_crypto_createcredentials_details\n+[`crypto.DEFAULT_ENCODING`]: crypto.html#crypto_crypto_default_encoding\n [`crypto.pbkdf2()`]: crypto.html#crypto_crypto_pbkdf2_password_salt_iterations_keylen_digest_callback\n [`decipher.setAuthTag()`]: crypto.html#crypto_decipher_setauthtag_buffer\n [`domain`]: domain.html"
        },
        {
            "sha": "5983f1db4f54d21e10a55efdfb3b680c02a00206",
            "filename": "lib/crypto.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/6035beea93e16f6d923201a33a541f6d724f00d6/lib%2Fcrypto.js",
            "raw_url": "https://github.com/nodejs/node/raw/6035beea93e16f6d923201a33a541f6d724f00d6/lib%2Fcrypto.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fcrypto.js?ref=6035beea93e16f6d923201a33a541f6d724f00d6",
            "patch": "@@ -205,8 +205,10 @@ Object.defineProperties(exports, {\n   DEFAULT_ENCODING: {\n     enumerable: true,\n     configurable: true,\n-    get: getDefaultEncoding,\n-    set: setDefaultEncoding\n+    get: deprecate(getDefaultEncoding,\n+                   'crypto.DEFAULT_ENCODING is deprecated.', 'DEP00XX'),\n+    set: deprecate(setDefaultEncoding,\n+                   'crypto.DEFAULT_ENCODING is deprecated.', 'DEP00XX')\n   },\n   constants: {\n     configurable: false,"
        },
        {
            "sha": "c016b3500dec817c74b61c309ada6300140779f7",
            "filename": "test/parallel/test-crypto-authenticated.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6035beea93e16f6d923201a33a541f6d724f00d6/test%2Fparallel%2Ftest-crypto-authenticated.js",
            "raw_url": "https://github.com/nodejs/node/raw/6035beea93e16f6d923201a33a541f6d724f00d6/test%2Fparallel%2Ftest-crypto-authenticated.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-crypto-authenticated.js?ref=6035beea93e16f6d923201a33a541f6d724f00d6",
            "patch": "@@ -342,6 +342,8 @@ const expectedDeprecationWarnings = [0, 1, 2, 6, 9, 10, 11, 17]\n   .map((i) => `Permitting authentication tag lengths of ${i} bytes is ` +\n             'deprecated. Valid GCM tag lengths are 4, 8, 12, 13, 14, 15, 16.');\n \n+expectedDeprecationWarnings.push('crypto.DEFAULT_ENCODING is deprecated.');\n+\n common.expectWarning({\n   Warning: expectedWarnings,\n   DeprecationWarning: expectedDeprecationWarnings"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 24,
        "deletions": 8
    }
}