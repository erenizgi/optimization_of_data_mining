{
    "author": "BridgeAR",
    "message": "bootstrap: make Buffer and process non-enumerable\n\nThis makes sure these two properties are non-enumerable. This aligns\nthem with all other globals that are not enumerable by spec.\n\nRefs: https://github.com/nodejs/node/issues/20565\n\nPR-URL: https://github.com/nodejs/node/pull/24874\nRefs: https://github.com/nodejs/node/issues/20565\nReviewed-By: Guy Bedford <guybedford@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Anto Aravinth <anto.aravinth.cse@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "c992639fbdc61fa78dc407ac09f633b102c55925",
    "files": [
        {
            "sha": "31ab0f986c3fc535b80b6d15a4cc26275bc215c8",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 12,
            "deletions": 2,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/c992639fbdc61fa78dc407ac09f633b102c55925/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/c992639fbdc61fa78dc407ac09f633b102c55925/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=c992639fbdc61fa78dc407ac09f633b102c55925",
            "patch": "@@ -408,7 +408,12 @@ function setupGlobalVariables() {\n     enumerable: false,\n     configurable: true\n   });\n-  global.process = process;\n+  Object.defineProperty(global, 'process', {\n+    value: process,\n+    enumerable: false,\n+    writable: true,\n+    configurable: true\n+  });\n   const util = NativeModule.require('util');\n \n   function makeGetter(name) {\n@@ -445,7 +450,12 @@ function setupGlobalVariables() {\n   // and exposes it on `internal/buffer`.\n   NativeModule.require('internal/buffer');\n \n-  global.Buffer = NativeModule.require('buffer').Buffer;\n+  Object.defineProperty(global, 'Buffer', {\n+    value: NativeModule.require('buffer').Buffer,\n+    enumerable: false,\n+    writable: true,\n+    configurable: true\n+  });\n   process.domain = null;\n   process._exiting = false;\n }"
        },
        {
            "sha": "cd0696c6773b51b89f70f1b42c76f580ae829750",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c992639fbdc61fa78dc407ac09f633b102c55925/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/c992639fbdc61fa78dc407ac09f633b102c55925/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=c992639fbdc61fa78dc407ac09f633b102c55925",
            "patch": "@@ -217,12 +217,10 @@ function platformTimeout(ms) {\n }\n \n let knownGlobals = [\n-  Buffer,\n   clearImmediate,\n   clearInterval,\n   clearTimeout,\n   global,\n-  process,\n   setImmediate,\n   setInterval,\n   setTimeout"
        },
        {
            "sha": "e8112531fc7f2cf8021e5faee42dc4bbdcd8e363",
            "filename": "test/parallel/test-global.js",
            "status": "modified",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/c992639fbdc61fa78dc407ac09f633b102c55925/test%2Fparallel%2Ftest-global.js",
            "raw_url": "https://github.com/nodejs/node/raw/c992639fbdc61fa78dc407ac09f633b102c55925/test%2Fparallel%2Ftest-global.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-global.js?ref=c992639fbdc61fa78dc407ac09f633b102c55925",
            "patch": "@@ -27,6 +27,41 @@ const common = require('../common');\n const fixtures = require('../common/fixtures');\n \n const assert = require('assert');\n+const { builtinModules } = require('module');\n+\n+// Load all modules to actually cover most code parts.\n+builtinModules.forEach((moduleName) => {\n+  if (!moduleName.includes('/')) {\n+    try {\n+      // This could throw for e.g., crypto if the binary is not compiled\n+      // accordingly.\n+      require(moduleName);\n+    } catch {}\n+  }\n+});\n+\n+{\n+  const expected = [\n+    'global',\n+    'clearImmediate',\n+    'clearInterval',\n+    'clearTimeout',\n+    'setImmediate',\n+    'setInterval',\n+    'setTimeout'\n+  ];\n+  if (global.DTRACE_HTTP_SERVER_RESPONSE) {\n+    expected.unshift(\n+      'DTRACE_HTTP_SERVER_RESPONSE',\n+      'DTRACE_HTTP_SERVER_REQUEST',\n+      'DTRACE_HTTP_CLIENT_RESPONSE',\n+      'DTRACE_HTTP_CLIENT_REQUEST',\n+      'DTRACE_NET_STREAM_END',\n+      'DTRACE_NET_SERVER_CONNECTION'\n+    );\n+  }\n+  assert.deepStrictEqual(new Set(Object.keys(global)), new Set(expected));\n+}\n \n common.allowGlobals('bar', 'foo');\n "
        }
    ],
    "stats": {
        "total": 51,
        "additions": 47,
        "deletions": 4
    }
}