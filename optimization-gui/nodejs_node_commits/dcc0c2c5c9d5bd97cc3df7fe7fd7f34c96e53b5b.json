{
    "author": "antsmartian",
    "message": "lib: move process.binding('js_stream') to internalBinding\n\nPR-URL: https://github.com/nodejs/node/pull/22239\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: John-David Dalton <john.david.dalton@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
    "files": [
        {
            "sha": "d6ed79254d64099ba53965f189c4f6e5b99e7cd7",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -378,7 +378,8 @@\n         'util',\n         'async_wrap',\n         'url',\n-        'spawn_sync']);\n+        'spawn_sync',\n+        'js_stream']);\n     process.binding = function binding(name) {\n       return internalBindingWhitelist.has(name) ?\n         internalBinding(name) :"
        },
        {
            "sha": "3c75bd9163fccf493f8be2ca2485e0d6939983d7",
            "filename": "lib/internal/wrap_js_stream.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/lib%2Finternal%2Fwrap_js_stream.js",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/lib%2Finternal%2Fwrap_js_stream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fwrap_js_stream.js?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -3,8 +3,8 @@\n const assert = require('assert');\n const util = require('util');\n const { Socket } = require('net');\n-const { JSStream } = process.binding('js_stream');\n const { internalBinding } = require('internal/bootstrap/loaders');\n+const { JSStream } = internalBinding('js_stream');\n const uv = internalBinding('uv');\n const debug = util.debuglog('stream_wrap');\n const { owner_symbol } = require('internal/async_hooks').symbols;"
        },
        {
            "sha": "c7e169b4652615c289339a9d8355f0f7467349da",
            "filename": "src/js_stream.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/src%2Fjs_stream.cc",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/src%2Fjs_stream.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fjs_stream.cc?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -216,4 +216,4 @@ void JSStream::Initialize(Local<Object> target,\n \n }  // namespace node\n \n-NODE_BUILTIN_MODULE_CONTEXT_AWARE(js_stream, node::JSStream::Initialize)\n+NODE_MODULE_CONTEXT_AWARE_INTERNAL(js_stream, node::JSStream::Initialize)"
        },
        {
            "sha": "c001fbdb136726ebaa4395d742491afddbf76a4e",
            "filename": "test/parallel/test-js-stream-call-properties.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-js-stream-call-properties.js",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-js-stream-call-properties.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-js-stream-call-properties.js?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -1,8 +1,11 @@\n+// Flags: --expose-internals\n+\n 'use strict';\n \n require('../common');\n const util = require('util');\n-const JSStream = process.binding('js_stream').JSStream;\n+const { internalBinding } = require('internal/test/binding');\n+const { JSStream } = internalBinding('js_stream');\n \n // Testing if will abort when properties are printed.\n util.inspect(new JSStream());"
        },
        {
            "sha": "56715799f88506b5f0ac1d3990d5903f4c31ee87",
            "filename": "test/parallel/test-process-binding-internalbinding-whitelist.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-process-binding-internalbinding-whitelist.js",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-process-binding-internalbinding-whitelist.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-binding-internalbinding-whitelist.js?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -14,3 +14,4 @@ assert(process.binding('signal_wrap'));\n assert(process.binding('contextify'));\n assert(process.binding('url'));\n assert(process.binding('spawn_sync'));\n+assert(process.binding('js_stream'));"
        },
        {
            "sha": "467849cf7a8012b9ca11be2d1100401b711749b8",
            "filename": "test/parallel/test-util-inspect.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-util-inspect.js",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-util-inspect.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util-inspect.js?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -20,11 +20,12 @@\n // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n+// Flags: --expose-internals\n 'use strict';\n const common = require('../common');\n const assert = require('assert');\n const { internalBinding } = require('internal/test/binding');\n-const JSStream = process.binding('js_stream').JSStream;\n+const { JSStream } = internalBinding('js_stream');\n const util = require('util');\n const vm = require('vm');\n const { previewEntries } = internalBinding('util');"
        },
        {
            "sha": "64434e574a2de3a3a3e9df739b9be0dc30c04cfe",
            "filename": "test/parallel/test-util-types.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-util-types.js",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-util-types.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util-types.js?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -1,11 +1,12 @@\n-// Flags: --experimental-vm-modules\n+// Flags: --experimental-vm-modules --expose-internals\n 'use strict';\n require('../common');\n const fixtures = require('../common/fixtures');\n const assert = require('assert');\n const { types, inspect } = require('util');\n const vm = require('vm');\n-const { JSStream } = process.binding('js_stream');\n+const { internalBinding } = require('internal/test/binding');\n+const { JSStream } = internalBinding('js_stream');\n \n const external = (new JSStream())._externalStream;\n const wasmBuffer = fixtures.readSync('test.wasm');"
        },
        {
            "sha": "94f10dbfe9fb0912c9969ac9f7acf29e69aac19a",
            "filename": "test/parallel/test-v8-serdes.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-v8-serdes.js",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fparallel%2Ftest-v8-serdes.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-v8-serdes.js?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -1,5 +1,8 @@\n+// Flags: --expose-gc --expose-internals\n+\n 'use strict';\n \n+const { internalBinding } = require('internal/test/binding');\n const common = require('../common');\n const assert = require('assert');\n const v8 = require('v8');\n@@ -20,7 +23,7 @@ const objects = [\n   circular\n ];\n \n-const hostObject = new (process.binding('js_stream').JSStream)();\n+const hostObject = new (internalBinding('js_stream').JSStream)();\n \n const serializerTypeError =\n   /^TypeError: Class constructor Serializer cannot be invoked without 'new'$/;"
        },
        {
            "sha": "148e4da3006e97b8c76679c6dc6d56eff01c4ae4",
            "filename": "test/sequential/test-async-wrap-getasyncid.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "raw_url": "https://github.com/nodejs/node/raw/dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-async-wrap-getasyncid.js?ref=dcc0c2c5c9d5bd97cc3df7fe7fd7f34c96e53b5b",
            "patch": "@@ -94,7 +94,7 @@ function testInitialized(req, ctor_name) {\n \n \n {\n-  const JSStream = process.binding('js_stream').JSStream;\n+  const JSStream = internalBinding('js_stream').JSStream;\n   testInitialized(new JSStream(), 'JSStream');\n }\n "
        }
    ],
    "stats": {
        "total": 28,
        "additions": 19,
        "deletions": 9
    }
}