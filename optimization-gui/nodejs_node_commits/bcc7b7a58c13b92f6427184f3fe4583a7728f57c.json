{
    "author": "joyeecheung",
    "message": "fs: handle result of access binding directly in fs.existsSync\n\nInstead of throwing errors in fs.accessSync and then catching it,\nhandle the result from the binding directly in fs.existsSync.\n\nNote that the argument validation errors still needs to be caught\nuntil we properly deprecate the don't-thrown-on-invalid-arguments\nbehavior.\n\nPR-URL: https://github.com/nodejs/node/pull/24015\nFixes: https://github.com/nodejs/node/issues/24008\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "bcc7b7a58c13b92f6427184f3fe4583a7728f57c",
    "files": [
        {
            "sha": "dba9049faec1118a243e0589a02bab7cee798826",
            "filename": "lib/fs.js",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bcc7b7a58c13b92f6427184f3fe4583a7728f57c/lib%2Ffs.js",
            "raw_url": "https://github.com/nodejs/node/raw/bcc7b7a58c13b92f6427184f3fe4583a7728f57c/lib%2Ffs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ffs.js?ref=bcc7b7a58c13b92f6427184f3fe4583a7728f57c",
            "patch": "@@ -228,11 +228,14 @@ Object.defineProperty(exists, internalUtil.promisify.custom, {\n // TODO(joyeecheung): deprecate the never-throw-on-invalid-arguments behavior\n function existsSync(path) {\n   try {\n-    fs.accessSync(path, F_OK);\n-    return true;\n+    path = toPathIfFileURL(path);\n+    validatePath(path);\n   } catch (e) {\n     return false;\n   }\n+  const ctx = { path };\n+  binding.access(pathModule.toNamespacedPath(path), F_OK, undefined, ctx);\n+  return ctx.errno === undefined;\n }\n \n function readFileAfterOpen(err, fd) {"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 5,
        "deletions": 2
    }
}