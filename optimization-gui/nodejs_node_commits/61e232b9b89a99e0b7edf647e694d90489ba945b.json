{
    "author": "ah-yu",
    "message": "fs: complete error message for validate function\n\nPR-URL: https://github.com/nodejs/node/pull/19909\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "61e232b9b89a99e0b7edf647e694d90489ba945b",
    "files": [
        {
            "sha": "b431cb910c250646ee6f79c0d2f4a3f01ded32cb",
            "filename": "lib/internal/fs.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/61e232b9b89a99e0b7edf647e694d90489ba945b/lib%2Finternal%2Ffs.js",
            "raw_url": "https://github.com/nodejs/node/raw/61e232b9b89a99e0b7edf647e694d90489ba945b/lib%2Finternal%2Ffs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ffs.js?ref=61e232b9b89a99e0b7edf647e694d90489ba945b",
            "patch": "@@ -350,11 +350,13 @@ function validateLen(len) {\n   let err;\n \n   if (!isInt32(len)) {\n-    if (typeof value !== 'number') {\n+    if (typeof len !== 'number') {\n       err = new ERR_INVALID_ARG_TYPE('len', 'number', len);\n-    } else {\n-      // TODO(BridgeAR): Improve this error message.\n+    } else if (!Number.isInteger(len)) {\n       err = new ERR_OUT_OF_RANGE('len', 'an integer', len);\n+    } else {\n+      // 2 ** 31 === 2147483648\n+      err = new ERR_OUT_OF_RANGE('len', '> -2147483649 && < 2147483648', len);\n     }\n   }\n "
        },
        {
            "sha": "2f8839583202d061700274d0557181b24186a89e",
            "filename": "test/parallel/test-fs-truncate.js",
            "status": "modified",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/nodejs/node/blob/61e232b9b89a99e0b7edf647e694d90489ba945b/test%2Fparallel%2Ftest-fs-truncate.js",
            "raw_url": "https://github.com/nodejs/node/raw/61e232b9b89a99e0b7edf647e694d90489ba945b/test%2Fparallel%2Ftest-fs-truncate.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-truncate.js?ref=61e232b9b89a99e0b7edf647e694d90489ba945b",
            "patch": "@@ -190,6 +190,31 @@ function testFtruncate(cb) {\n     );\n   });\n \n+  [-1.5, 1.5].forEach((input) => {\n+    assert.throws(\n+      () => fs.ftruncate(fd, input),\n+      {\n+        code: 'ERR_OUT_OF_RANGE',\n+        name: 'RangeError [ERR_OUT_OF_RANGE]',\n+        message: 'The value of \"len\" is out of range. It must be ' +\n+                  `an integer. Received ${input}`\n+      }\n+    );\n+  });\n+\n+  // 2 ** 31 = 2147483648\n+  [2147483648, -2147483649].forEach((input) => {\n+    assert.throws(\n+      () => fs.ftruncate(fd, input),\n+      {\n+        code: 'ERR_OUT_OF_RANGE',\n+        name: 'RangeError [ERR_OUT_OF_RANGE]',\n+        message: 'The value of \"len\" is out of range. It must be ' +\n+                  `> -2147483649 && < 2147483648. Received ${input}`\n+      }\n+    );\n+  });\n+\n   fs.ftruncate(fd, undefined, common.mustCall(function(err) {\n     assert.ifError(err);\n     assert(fs.readFileSync(file5).equals(Buffer.from('')));"
        }
    ],
    "stats": {
        "total": 33,
        "additions": 30,
        "deletions": 3
    }
}