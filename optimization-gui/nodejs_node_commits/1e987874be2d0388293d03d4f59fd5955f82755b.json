{
    "author": "MylesBorins",
    "message": "deps: patch V8 to 6.6.346.31\n\nPR-URL: https://github.com/nodejs/node/pull/20603\nRefs: https://github.com/v8/v8/compare/6.6.346.27...6.6.346.31\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>",
    "sha": "1e987874be2d0388293d03d4f59fd5955f82755b",
    "files": [
        {
            "sha": "dac19fa6213c5c2b4f283818add4cb014d799832",
            "filename": "deps/v8/include/v8-version.h",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Finclude%2Fv8-version.h",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Finclude%2Fv8-version.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8-version.h?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -11,7 +11,7 @@\n #define V8_MAJOR_VERSION 6\n #define V8_MINOR_VERSION 6\n #define V8_BUILD_NUMBER 346\n-#define V8_PATCH_LEVEL 27\n+#define V8_PATCH_LEVEL 31\n \n // Use 1 for candidates and 0 otherwise.\n // (Boolean macro values are not supported by all preprocessors.)"
        },
        {
            "sha": "329fee575fd44e4cd67249542cf34c493ef98dc0",
            "filename": "deps/v8/src/builtins/arm/builtins-arm.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm%2Fbuiltins-arm.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -859,9 +859,13 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   Label process_bytecode, extra_wide;\n   STATIC_ASSERT(0 == static_cast<int>(interpreter::Bytecode::kWide));\n   STATIC_ASSERT(1 == static_cast<int>(interpreter::Bytecode::kExtraWide));\n-  __ cmp(bytecode, Operand(0x1));\n+  STATIC_ASSERT(2 == static_cast<int>(interpreter::Bytecode::kDebugBreakWide));\n+  STATIC_ASSERT(3 ==\n+                static_cast<int>(interpreter::Bytecode::kDebugBreakExtraWide));\n+  __ cmp(bytecode, Operand(0x3));\n   __ b(hi, &process_bytecode);\n-  __ b(eq, &extra_wide);\n+  __ tst(bytecode, Operand(0x1));\n+  __ b(ne, &extra_wide);\n \n   // Load the next bytecode and update table to the wide scaled table.\n   __ add(bytecode_offset, bytecode_offset, Operand(1));"
        },
        {
            "sha": "f06969ec6bf22dfa69325a22a310f1c5b6b291c2",
            "filename": "deps/v8/src/builtins/arm64/builtins-arm64.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Farm64%2Fbuiltins-arm64.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -952,9 +952,13 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   Label process_bytecode, extra_wide;\n   STATIC_ASSERT(0 == static_cast<int>(interpreter::Bytecode::kWide));\n   STATIC_ASSERT(1 == static_cast<int>(interpreter::Bytecode::kExtraWide));\n-  __ Cmp(bytecode, Operand(0x1));\n+  STATIC_ASSERT(2 == static_cast<int>(interpreter::Bytecode::kDebugBreakWide));\n+  STATIC_ASSERT(3 ==\n+                static_cast<int>(interpreter::Bytecode::kDebugBreakExtraWide));\n+  __ Cmp(bytecode, Operand(0x3));\n   __ B(hi, &process_bytecode);\n-  __ B(eq, &extra_wide);\n+  __ Tst(bytecode, Operand(0x1));\n+  __ B(ne, &extra_wide);\n \n   // Load the next bytecode and update table to the wide scaled table.\n   __ Add(bytecode_offset, bytecode_offset, Operand(1));"
        },
        {
            "sha": "032d0ef1001a2728e11f14a4539be3d62a8d88eb",
            "filename": "deps/v8/src/builtins/builtins-promise-gen.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fbuiltins-promise-gen.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -999,7 +999,7 @@ TF_BUILTIN(PromiseResolveThenableJob, PromiseBuiltinsAssembler) {\n       // We need to reject the {thenable}.\n       Node* const result = CallJS(\n           CodeFactory::Call(isolate(), ConvertReceiverMode::kNullOrUndefined),\n-          native_context, UndefinedConstant(), var_exception.value());\n+          native_context, reject, UndefinedConstant(), var_exception.value());\n       Return(result);\n     }\n   }"
        },
        {
            "sha": "5bc083f531207ddb199cc3a89aebe80e9cf3e1b6",
            "filename": "deps/v8/src/builtins/ia32/builtins-ia32.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fia32%2Fbuiltins-ia32.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -783,9 +783,13 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   Label process_bytecode, extra_wide;\n   STATIC_ASSERT(0 == static_cast<int>(interpreter::Bytecode::kWide));\n   STATIC_ASSERT(1 == static_cast<int>(interpreter::Bytecode::kExtraWide));\n-  __ cmpb(bytecode, Immediate(0x1));\n+  STATIC_ASSERT(2 == static_cast<int>(interpreter::Bytecode::kDebugBreakWide));\n+  STATIC_ASSERT(3 ==\n+                static_cast<int>(interpreter::Bytecode::kDebugBreakExtraWide));\n+  __ cmpb(bytecode, Immediate(0x3));\n   __ j(above, &process_bytecode, Label::kNear);\n-  __ j(equal, &extra_wide, Label::kNear);\n+  __ test(bytecode, Immediate(0x1));\n+  __ j(not_equal, &extra_wide, Label::kNear);\n \n   // Load the next bytecode and update table to the wide scaled table.\n   __ inc(bytecode_offset);"
        },
        {
            "sha": "0d42834612757cd6b1e52eb195b3acdb45e1e8d1",
            "filename": "deps/v8/src/builtins/mips/builtins-mips.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips%2Fbuiltins-mips.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -840,8 +840,12 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   Label process_bytecode, extra_wide;\n   STATIC_ASSERT(0 == static_cast<int>(interpreter::Bytecode::kWide));\n   STATIC_ASSERT(1 == static_cast<int>(interpreter::Bytecode::kExtraWide));\n-  __ Branch(&process_bytecode, hi, bytecode, Operand(1));\n-  __ Branch(&extra_wide, eq, bytecode, Operand(1));\n+  STATIC_ASSERT(2 == static_cast<int>(interpreter::Bytecode::kDebugBreakWide));\n+  STATIC_ASSERT(3 ==\n+                static_cast<int>(interpreter::Bytecode::kDebugBreakExtraWide));\n+  __ Branch(&process_bytecode, hi, bytecode, Operand(3));\n+  __ And(scratch2, bytecode, Operand(1));\n+  __ Branch(&extra_wide, ne, scratch2, Operand(zero_reg));\n \n   // Load the next bytecode and update table to the wide scaled table.\n   __ Addu(bytecode_offset, bytecode_offset, Operand(1));"
        },
        {
            "sha": "15fdfc3d7d0e0cd46e1420917fc68d70ce649e05",
            "filename": "deps/v8/src/builtins/mips64/builtins-mips64.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fmips64%2Fbuiltins-mips64.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -837,8 +837,12 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   Label process_bytecode, extra_wide;\n   STATIC_ASSERT(0 == static_cast<int>(interpreter::Bytecode::kWide));\n   STATIC_ASSERT(1 == static_cast<int>(interpreter::Bytecode::kExtraWide));\n-  __ Branch(&process_bytecode, hi, bytecode, Operand(1));\n-  __ Branch(&extra_wide, eq, bytecode, Operand(1));\n+  STATIC_ASSERT(2 == static_cast<int>(interpreter::Bytecode::kDebugBreakWide));\n+  STATIC_ASSERT(3 ==\n+                static_cast<int>(interpreter::Bytecode::kDebugBreakExtraWide));\n+  __ Branch(&process_bytecode, hi, bytecode, Operand(3));\n+  __ And(scratch2, bytecode, Operand(1));\n+  __ Branch(&extra_wide, ne, scratch2, Operand(zero_reg));\n \n   // Load the next bytecode and update table to the wide scaled table.\n   __ Daddu(bytecode_offset, bytecode_offset, Operand(1));"
        },
        {
            "sha": "9206920d457f08fe2c0c9a5a1a593fbcd50c7548",
            "filename": "deps/v8/src/builtins/ppc/builtins-ppc.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fppc%2Fbuiltins-ppc.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -859,9 +859,13 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   Label process_bytecode, extra_wide;\n   STATIC_ASSERT(0 == static_cast<int>(interpreter::Bytecode::kWide));\n   STATIC_ASSERT(1 == static_cast<int>(interpreter::Bytecode::kExtraWide));\n-  __ cmpi(bytecode, Operand(0x1));\n+  STATIC_ASSERT(2 == static_cast<int>(interpreter::Bytecode::kDebugBreakWide));\n+  STATIC_ASSERT(3 ==\n+                static_cast<int>(interpreter::Bytecode::kDebugBreakExtraWide));\n+  __ cmpi(bytecode, Operand(0x3));\n   __ bgt(&process_bytecode);\n-  __ beq(&extra_wide);\n+  __ andi(r0, bytecode, Operand(0x1));\n+  __ bne(&extra_wide, cr0);\n \n   // Load the next bytecode and update table to the wide scaled table.\n   __ addi(bytecode_offset, bytecode_offset, Operand(1));"
        },
        {
            "sha": "86239e0052b6bce47426de81b3d6a2b12e31bcbb",
            "filename": "deps/v8/src/builtins/s390/builtins-s390.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fs390%2Fbuiltins-s390.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -861,9 +861,13 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   Label process_bytecode, extra_wide;\n   STATIC_ASSERT(0 == static_cast<int>(interpreter::Bytecode::kWide));\n   STATIC_ASSERT(1 == static_cast<int>(interpreter::Bytecode::kExtraWide));\n-  __ CmpP(bytecode, Operand(0x1));\n+  STATIC_ASSERT(2 == static_cast<int>(interpreter::Bytecode::kDebugBreakWide));\n+  STATIC_ASSERT(3 ==\n+                static_cast<int>(interpreter::Bytecode::kDebugBreakExtraWide));\n+  __ CmpP(bytecode, Operand(0x3));\n   __ bgt(&process_bytecode);\n-  __ beq(&extra_wide);\n+  __ tmll(bytecode, Operand(0x1));\n+  __ bne(&extra_wide);\n \n   // Load the next bytecode and update table to the wide scaled table.\n   __ AddP(bytecode_offset, bytecode_offset, Operand(1));"
        },
        {
            "sha": "ae7e0c151ea964878a90acf781816c3af303dbc0",
            "filename": "deps/v8/src/builtins/x64/builtins-x64.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbuiltins%2Fx64%2Fbuiltins-x64.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -848,9 +848,13 @@ static void AdvanceBytecodeOffsetOrReturn(MacroAssembler* masm,\n   Label process_bytecode, extra_wide;\n   STATIC_ASSERT(0 == static_cast<int>(interpreter::Bytecode::kWide));\n   STATIC_ASSERT(1 == static_cast<int>(interpreter::Bytecode::kExtraWide));\n-  __ cmpb(bytecode, Immediate(0x1));\n+  STATIC_ASSERT(2 == static_cast<int>(interpreter::Bytecode::kDebugBreakWide));\n+  STATIC_ASSERT(3 ==\n+                static_cast<int>(interpreter::Bytecode::kDebugBreakExtraWide));\n+  __ cmpb(bytecode, Immediate(0x3));\n   __ j(above, &process_bytecode, Label::kNear);\n-  __ j(equal, &extra_wide, Label::kNear);\n+  __ testb(bytecode, Immediate(0x1));\n+  __ j(not_equal, &extra_wide, Label::kNear);\n \n   // Load the next bytecode and update table to the wide scaled table.\n   __ incl(bytecode_offset);"
        },
        {
            "sha": "417191c6802114b2ab8d150f94796a945c81aaff",
            "filename": "deps/v8/src/compiler/js-call-reducer.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Fjs-call-reducer.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -5135,6 +5135,7 @@ Reduction JSCallReducer::ReducePromisePrototypeThen(Node* node) {\n   Node* context = NodeProperties::GetContextInput(node);\n   Node* effect = NodeProperties::GetEffectInput(node);\n   Node* control = NodeProperties::GetControlInput(node);\n+  Node* frame_state = NodeProperties::GetFrameStateInput(node);\n \n   // Check that promises aren't being observed through (debug) hooks.\n   if (!isolate()->IsPromiseHookProtectorIntact()) return NoChange();\n@@ -5193,9 +5194,9 @@ Reduction JSCallReducer::ReducePromisePrototypeThen(Node* node) {\n       graph()->NewNode(javascript()->CreatePromise(), context, effect);\n \n   // Chain {result} onto {receiver}.\n-  result = effect = graph()->NewNode(javascript()->PerformPromiseThen(),\n-                                     receiver, on_fulfilled, on_rejected,\n-                                     result, context, effect, control);\n+  result = effect = graph()->NewNode(\n+      javascript()->PerformPromiseThen(), receiver, on_fulfilled, on_rejected,\n+      result, context, frame_state, effect, control);\n   ReplaceWithValue(node, result, effect, control);\n   return Replace(result);\n }"
        },
        {
            "sha": "673d643da0067bd9162567f92eb12a3e09bf77fb",
            "filename": "deps/v8/src/compiler/operator-properties.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fcompiler%2Foperator-properties.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -118,6 +118,7 @@ bool OperatorProperties::HasFrameStateInput(const Operator* op) {\n     case IrOpcode::kJSPromiseResolve:\n     case IrOpcode::kJSRejectPromise:\n     case IrOpcode::kJSResolvePromise:\n+    case IrOpcode::kJSPerformPromiseThen:\n       return true;\n \n     default:"
        },
        {
            "sha": "be31f27c76e9498e467d672249f9aa1478d6aaca",
            "filename": "deps/v8/src/interpreter/bytecodes.h",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Finterpreter%2Fbytecodes.h",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Fsrc%2Finterpreter%2Fbytecodes.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Finterpreter%2Fbytecodes.h?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -28,6 +28,23 @@ namespace interpreter {\n   V(Wide, AccumulatorUse::kNone)                                               \\\n   V(ExtraWide, AccumulatorUse::kNone)                                          \\\n                                                                                \\\n+  /* Debug Breakpoints - one for each possible size of unscaled bytecodes */   \\\n+  /* and one for each operand widening prefix bytecode                    */   \\\n+  V(DebugBreakWide, AccumulatorUse::kReadWrite)                                \\\n+  V(DebugBreakExtraWide, AccumulatorUse::kReadWrite)                           \\\n+  V(DebugBreak0, AccumulatorUse::kReadWrite)                                   \\\n+  V(DebugBreak1, AccumulatorUse::kReadWrite, OperandType::kReg)                \\\n+  V(DebugBreak2, AccumulatorUse::kReadWrite, OperandType::kReg,                \\\n+    OperandType::kReg)                                                         \\\n+  V(DebugBreak3, AccumulatorUse::kReadWrite, OperandType::kReg,                \\\n+    OperandType::kReg, OperandType::kReg)                                      \\\n+  V(DebugBreak4, AccumulatorUse::kReadWrite, OperandType::kReg,                \\\n+    OperandType::kReg, OperandType::kReg, OperandType::kReg)                   \\\n+  V(DebugBreak5, AccumulatorUse::kReadWrite, OperandType::kRuntimeId,          \\\n+    OperandType::kReg, OperandType::kReg)                                      \\\n+  V(DebugBreak6, AccumulatorUse::kReadWrite, OperandType::kRuntimeId,          \\\n+    OperandType::kReg, OperandType::kReg, OperandType::kReg)                   \\\n+                                                                               \\\n   /* Loading the accumulator */                                                \\\n   V(LdaZero, AccumulatorUse::kWrite)                                           \\\n   V(LdaSmi, AccumulatorUse::kWrite, OperandType::kImm)                         \\\n@@ -325,23 +342,6 @@ namespace interpreter {\n   /* Debugger */                                                               \\\n   V(Debugger, AccumulatorUse::kNone)                                           \\\n                                                                                \\\n-  /* Debug Breakpoints - one for each possible size of unscaled bytecodes */   \\\n-  /* and one for each operand widening prefix bytecode                    */   \\\n-  V(DebugBreak0, AccumulatorUse::kReadWrite)                                   \\\n-  V(DebugBreak1, AccumulatorUse::kReadWrite, OperandType::kReg)                \\\n-  V(DebugBreak2, AccumulatorUse::kReadWrite, OperandType::kReg,                \\\n-    OperandType::kReg)                                                         \\\n-  V(DebugBreak3, AccumulatorUse::kReadWrite, OperandType::kReg,                \\\n-    OperandType::kReg, OperandType::kReg)                                      \\\n-  V(DebugBreak4, AccumulatorUse::kReadWrite, OperandType::kReg,                \\\n-    OperandType::kReg, OperandType::kReg, OperandType::kReg)                   \\\n-  V(DebugBreak5, AccumulatorUse::kReadWrite, OperandType::kRuntimeId,          \\\n-    OperandType::kReg, OperandType::kReg)                                      \\\n-  V(DebugBreak6, AccumulatorUse::kReadWrite, OperandType::kRuntimeId,          \\\n-    OperandType::kReg, OperandType::kReg, OperandType::kReg)                   \\\n-  V(DebugBreakWide, AccumulatorUse::kReadWrite)                                \\\n-  V(DebugBreakExtraWide, AccumulatorUse::kReadWrite)                           \\\n-                                                                               \\\n   /* Block Coverage */                                                         \\\n   V(IncBlockCounter, AccumulatorUse::kNone, OperandType::kIdx)                 \\\n                                                                                \\"
        },
        {
            "sha": "5d4c260752a02f3517eb2145836d57b3971f485e",
            "filename": "deps/v8/test/cctest/test-api.cc",
            "status": "modified",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fcctest%2Ftest-api.cc?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -17641,6 +17641,35 @@ TEST(PromiseRejectCallback) {\n   CHECK_EQ(7, promise_reject_msg_column_number);\n }\n \n+void PromiseRejectCallbackConstructError(\n+    v8::PromiseRejectMessage reject_message) {\n+  v8::Local<v8::Context> context = CcTest::isolate()->GetCurrentContext();\n+  CHECK_EQ(v8::Promise::PromiseState::kRejected,\n+           reject_message.GetPromise()->State());\n+  USE(v8::Script::Compile(context, v8_str(\"new Error('test')\"))\n+          .ToLocalChecked()\n+          ->Run(context));\n+}\n+\n+TEST(PromiseRejectCallbackConstructError) {\n+  i::FLAG_allow_natives_syntax = true;\n+  LocalContext env;\n+  v8::Isolate* isolate = env->GetIsolate();\n+  v8::HandleScope scope(isolate);\n+\n+  isolate->SetPromiseRejectCallback(PromiseRejectCallbackConstructError);\n+\n+  ResetPromiseStates();\n+  CompileRun(\n+      \"function f(p) {\"\n+      \"    p.catch(() => {});\"\n+      \"}\"\n+      \"f(Promise.reject());\"\n+      \"f(Promise.reject());\"\n+      \"%OptimizeFunctionOnNextCall(f);\"\n+      \"let p = Promise.reject();\"\n+      \"f(p);\");\n+}\n \n void AnalyzeStackOfEvalWithSourceURL(\n     const v8::FunctionCallbackInfo<v8::Value>& args) {"
        },
        {
            "sha": "c2df20c94a411a1faabdb054c408589ef44742fb",
            "filename": "deps/v8/test/debugger/regress/regress-crbug-835973.js",
            "status": "added",
            "additions": 289,
            "deletions": 0,
            "changes": 289,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Ftest%2Fdebugger%2Fregress%2Fregress-crbug-835973.js",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Ftest%2Fdebugger%2Fregress%2Fregress-crbug-835973.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fdebugger%2Fregress%2Fregress-crbug-835973.js?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -0,0 +1,289 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+// Test that stepping works correctly with bytecode scaling prefix.\n+class MyClass { f(p) { this.x += p; } };\n+\n+let obj = new MyClass();\n+\n+function foo() {\n+  obj.f(0);\n+  obj.f(1);\n+  obj.f(2);\n+  obj.f(3);\n+  obj.f(4);\n+  obj.f(5);\n+  obj.f(6);\n+  obj.f(7);\n+  obj.f(8);\n+  obj.f(9);\n+  obj.f(10);\n+  obj.f(11);\n+  obj.f(12);\n+  obj.f(13);\n+  obj.f(14);\n+  obj.f(15);\n+  obj.f(16);\n+  obj.f(17);\n+  obj.f(18);\n+  obj.f(19);\n+  obj.f(20);\n+  obj.f(21);\n+  obj.f(22);\n+  obj.f(23);\n+  obj.f(24);\n+  obj.f(25);\n+  obj.f(26);\n+  obj.f(27);\n+  obj.f(28);\n+  obj.f(29);\n+  obj.f(30);\n+  obj.f(31);\n+  obj.f(32);\n+  obj.f(33);\n+  obj.f(34);\n+  obj.f(35);\n+  obj.f(36);\n+  obj.f(37);\n+  obj.f(38);\n+  obj.f(39);\n+  obj.f(40);\n+  obj.f(41);\n+  obj.f(42);\n+  obj.f(43);\n+  obj.f(44);\n+  obj.f(45);\n+  obj.f(46);\n+  obj.f(47);\n+  obj.f(48);\n+  obj.f(49);\n+  obj.f(50);\n+  obj.f(51);\n+  obj.f(52);\n+  obj.f(53);\n+  obj.f(54);\n+  obj.f(55);\n+  obj.f(56);\n+  obj.f(57);\n+  obj.f(58);\n+  obj.f(59);\n+  obj.f(60);\n+  obj.f(61);\n+  obj.f(62);\n+  obj.f(63);\n+  obj.f(64);\n+  obj.f(65);\n+  obj.f(66);\n+  obj.f(67);\n+  obj.f(68);\n+  obj.f(69);\n+  obj.f(70);\n+  obj.f(71);\n+  obj.f(72);\n+  obj.f(73);\n+  obj.f(74);\n+  obj.f(75);\n+  obj.f(76);\n+  obj.f(77);\n+  obj.f(78);\n+  obj.f(79);\n+  obj.f(80);\n+  obj.f(81);\n+  obj.f(82);\n+  obj.f(83);\n+  obj.f(84);\n+  obj.f(85);\n+  obj.f(86);\n+  obj.f(87);\n+  obj.f(88);\n+  obj.f(89);\n+  obj.f(90);\n+  obj.f(91);\n+  obj.f(92);\n+  obj.f(93);\n+  obj.f(94);\n+  obj.f(95);\n+  obj.f(96);\n+  obj.f(97);\n+  obj.f(98);\n+  obj.f(99);\n+  obj.f(100);\n+  obj.f(101);\n+  obj.f(102);\n+  obj.f(103);\n+  obj.f(104);\n+  obj.f(105);\n+  obj.f(106);\n+  obj.f(107);\n+  obj.f(108);\n+  obj.f(109);\n+  obj.f(110);\n+  obj.f(111);\n+  obj.f(112);\n+  obj.f(113);\n+  obj.f(114);\n+  obj.f(115);\n+  obj.f(116);\n+  obj.f(117);\n+  obj.f(118);\n+  obj.f(119);\n+  obj.f(120);\n+  obj.f(121);\n+  obj.f(122);\n+  obj.f(123);\n+  obj.f(124);\n+  obj.f(125);\n+  obj.f(126);\n+  obj.f(127);\n+  obj.f(128);\n+  obj.f(129);\n+  obj.f(130);\n+  obj.f(131);\n+  obj.f(132);\n+  obj.f(133);\n+  obj.f(134);\n+  obj.f(135);\n+  obj.f(136);\n+  obj.f(137);\n+  obj.f(138);\n+  obj.f(139);\n+  obj.f(140);\n+  obj.f(141);\n+  obj.f(142);\n+  obj.f(143);\n+  obj.f(144);\n+  obj.f(145);\n+  obj.f(146);\n+  obj.f(147);\n+  obj.f(148);\n+  obj.f(149);\n+  obj.f(150);\n+  obj.f(151);\n+  obj.f(152);\n+  obj.f(153);\n+  obj.f(154);\n+  obj.f(155);\n+  obj.f(156);\n+  obj.f(157);\n+  obj.f(158);\n+  obj.f(159);\n+  obj.f(160);\n+  obj.f(161);\n+  obj.f(162);\n+  obj.f(163);\n+  obj.f(164);\n+  obj.f(165);\n+  obj.f(166);\n+  obj.f(167);\n+  obj.f(168);\n+  obj.f(169);\n+  obj.f(170);\n+  obj.f(171);\n+  obj.f(172);\n+  obj.f(173);\n+  obj.f(174);\n+  obj.f(175);\n+  obj.f(176);\n+  obj.f(177);\n+  obj.f(178);\n+  obj.f(179);\n+  obj.f(180);\n+  obj.f(181);\n+  obj.f(182);\n+  obj.f(183);\n+  obj.f(184);\n+  obj.f(185);\n+  obj.f(186);\n+  obj.f(187);\n+  obj.f(188);\n+  obj.f(189);\n+  obj.f(190);\n+  obj.f(191);\n+  obj.f(192);\n+  obj.f(193);\n+  obj.f(194);\n+  obj.f(195);\n+  obj.f(196);\n+  obj.f(197);\n+  obj.f(198);\n+  obj.f(199);\n+  obj.f(200);\n+  obj.f(201);\n+  obj.f(202);\n+  obj.f(203);\n+  obj.f(204);\n+  obj.f(205);\n+  obj.f(206);\n+  obj.f(207);\n+  obj.f(208);\n+  obj.f(209);\n+  obj.f(210);\n+  obj.f(211);\n+  obj.f(212);\n+  obj.f(213);\n+  obj.f(214);\n+  obj.f(215);\n+  obj.f(216);\n+  obj.f(217);\n+  obj.f(218);\n+  obj.f(219);\n+  obj.f(220);\n+  obj.f(221);\n+  obj.f(222);\n+  obj.f(223);\n+  obj.f(224);\n+  obj.f(225);\n+  obj.f(226);\n+  obj.f(227);\n+  obj.f(228);\n+  obj.f(229);\n+  obj.f(230);\n+  obj.f(231);\n+  obj.f(232);\n+  obj.f(233);\n+  obj.f(234);\n+  obj.f(235);\n+  obj.f(236);\n+  obj.f(237);\n+  obj.f(238);\n+  obj.f(239);\n+  obj.f(240);\n+  obj.f(241);\n+  obj.f(242);\n+  obj.f(243);\n+  obj.f(244);\n+  obj.f(245);\n+  obj.f(246);\n+  obj.f(247);\n+  obj.f(248);\n+  obj.f(249);\n+  obj.f(250);\n+  obj.f(251);\n+  obj.f(252);\n+  obj.f(253);\n+  obj.f(254);\n+  obj.f(255);\n+  debugger;\n+  obj.f(256);\n+  obj.f(257);\n+  obj.f(258);\n+  obj.f(259);\n+}\n+\n+let break_count = 0;\n+\n+function listener(event, exec_state, event_data, data) {\n+  if (event != debug.Debug.DebugEvent.Break) return;\n+  try {\n+    exec_state.prepareStep(debug.Debug.StepAction.StepNext);\n+    break_count++;\n+  } catch {\n+    %AbortJS(\"unexpected exception\");\n+  }\n+}\n+\n+debug.Debug.setListener(listener);\n+foo();\n+debug.Debug.setListener(null);\n+assertEquals(7, break_count);"
        },
        {
            "sha": "ee2c3bdacad1d13952586481aefabfc5a44c569a",
            "filename": "deps/v8/test/mjsunit/regress/regress-crbug-830565.js",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Ftest%2Fmjsunit%2Fregress%2Fregress-crbug-830565.js",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Ftest%2Fmjsunit%2Fregress%2Fregress-crbug-830565.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fmjsunit%2Fregress%2Fregress-crbug-830565.js?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2018 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+// Flags: --allow-natives-syntax\n+\n+testAsync(assert => {\n+  assert.plan(1);\n+  const error = new TypeError('Throwing');\n+  Promise.resolve({ then(resolve, reject) {\n+    throw error;\n+  }}).then(v => {\n+    assert.unreachable();\n+  }, e => {\n+    assert.equals(error, e);\n+  });\n+});"
        },
        {
            "sha": "7c2a301dc34c93e922adf52cb2919eced5a385eb",
            "filename": "deps/v8/test/webkit/fast/js/Promise-resolve-with-then-exception-expected.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Ftest%2Fwebkit%2Ffast%2Fjs%2FPromise-resolve-with-then-exception-expected.txt",
            "raw_url": "https://github.com/nodejs/node/raw/1e987874be2d0388293d03d4f59fd5955f82755b/deps%2Fv8%2Ftest%2Fwebkit%2Ffast%2Fjs%2FPromise-resolve-with-then-exception-expected.txt",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fwebkit%2Ffast%2Fjs%2FPromise-resolve-with-then-exception-expected.txt?ref=1e987874be2d0388293d03d4f59fd5955f82755b",
            "patch": "@@ -3,6 +3,8 @@ Test whether Promise treats thenable correctly.\n On success, you will see a series of \"PASS\" messages, followed by \"TEST COMPLETE\".\n \n The promise is already rejected now.\n+PASS rejected\n+PASS result is \"hello\"\n PASS successfullyParsed is true\n \n TEST COMPLETE"
        }
    ],
    "stats": {
        "total": 447,
        "additions": 409,
        "deletions": 38
    }
}