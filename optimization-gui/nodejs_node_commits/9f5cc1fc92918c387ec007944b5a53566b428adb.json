{
    "author": "jasnell",
    "message": "src: move process.binding('performance') to internalBinding\n\nPR-URL: https://github.com/nodejs/node/pull/22029\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Jon Moss <me@jonathanmoss.me>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>",
    "sha": "9f5cc1fc92918c387ec007944b5a53566b428adb",
    "files": [
        {
            "sha": "d46b0308c644240f2ad09a52b80263e80fef4b55",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9f5cc1fc92918c387ec007944b5a53566b428adb/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/9f5cc1fc92918c387ec007944b5a53566b428adb/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=9f5cc1fc92918c387ec007944b5a53566b428adb",
            "patch": "@@ -84,7 +84,7 @@\n       workerThreadSetup.setupStdio();\n     }\n \n-    const perf = process.binding('performance');\n+    const perf = internalBinding('performance');\n     const {\n       NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE,\n     } = perf.constants;"
        },
        {
            "sha": "8c19be8ac0b4042367f16f07d4c8d57772c4a8f1",
            "filename": "lib/internal/test/binding.js",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/9f5cc1fc92918c387ec007944b5a53566b428adb/lib%2Finternal%2Ftest%2Fbinding.js",
            "raw_url": "https://github.com/nodejs/node/raw/9f5cc1fc92918c387ec007944b5a53566b428adb/lib%2Finternal%2Ftest%2Fbinding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ftest%2Fbinding.js?ref=9f5cc1fc92918c387ec007944b5a53566b428adb",
            "patch": "@@ -5,10 +5,5 @@ process.emitWarning(\n   'tracked by any versioning system or deprecation process.',\n   'internal/test/binding');\n \n-// These exports should be scoped as specifically as possible\n-// to avoid exposing APIs because even with that warning and\n-// this file being internal people will still try to abuse it.\n const { internalBinding } = require('internal/bootstrap/loaders');\n-module.exports = {\n-  ModuleWrap: internalBinding('module_wrap').ModuleWrap,\n-};\n+module.exports = { internalBinding };"
        },
        {
            "sha": "2e850db8716a0db6e9cdac91f820cf883f3289ff",
            "filename": "lib/perf_hooks.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9f5cc1fc92918c387ec007944b5a53566b428adb/lib%2Fperf_hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/9f5cc1fc92918c387ec007944b5a53566b428adb/lib%2Fperf_hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fperf_hooks.js?ref=9f5cc1fc92918c387ec007944b5a53566b428adb",
            "patch": "@@ -1,5 +1,6 @@\n 'use strict';\n \n+const { internalBinding } = require('internal/bootstrap/loaders');\n const {\n   PerformanceEntry,\n   mark: _mark,\n@@ -12,7 +13,7 @@ const {\n   timeOriginTimestamp,\n   timerify,\n   constants\n-} = process.binding('performance');\n+} = internalBinding('performance');\n \n const {\n   NODE_PERFORMANCE_ENTRY_TYPE_NODE,"
        },
        {
            "sha": "5a50223ed593c20f3bb534dc7900f14b43f2f965",
            "filename": "src/node_perf.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9f5cc1fc92918c387ec007944b5a53566b428adb/src%2Fnode_perf.cc",
            "raw_url": "https://github.com/nodejs/node/raw/9f5cc1fc92918c387ec007944b5a53566b428adb/src%2Fnode_perf.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_perf.cc?ref=9f5cc1fc92918c387ec007944b5a53566b428adb",
            "patch": "@@ -454,4 +454,4 @@ void Initialize(Local<Object> target,\n }  // namespace performance\n }  // namespace node\n \n-NODE_BUILTIN_MODULE_CONTEXT_AWARE(performance, node::performance::Initialize)\n+NODE_MODULE_CONTEXT_AWARE_INTERNAL(performance, node::performance::Initialize)"
        },
        {
            "sha": "a1461e34b0dcb1fd0d5190fad86a315e9b5b7366",
            "filename": "test/parallel/test-internal-module-wrap.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/9f5cc1fc92918c387ec007944b5a53566b428adb/test%2Fparallel%2Ftest-internal-module-wrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/9f5cc1fc92918c387ec007944b5a53566b428adb/test%2Fparallel%2Ftest-internal-module-wrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-module-wrap.js?ref=9f5cc1fc92918c387ec007944b5a53566b428adb",
            "patch": "@@ -5,7 +5,8 @@\n require('../common');\n const assert = require('assert');\n \n-const { ModuleWrap } = require('internal/test/binding');\n+const { internalBinding } = require('internal/test/binding');\n+const { ModuleWrap } = internalBinding('module_wrap');\n const { getPromiseDetails, isPromise } = process.binding('util');\n const setTimeoutAsync = require('util').promisify(setTimeout);\n "
        },
        {
            "sha": "d071cddbcf0b518bbfc95488ae9997e49af7241d",
            "filename": "test/parallel/test-performance-gc.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/9f5cc1fc92918c387ec007944b5a53566b428adb/test%2Fparallel%2Ftest-performance-gc.js",
            "raw_url": "https://github.com/nodejs/node/raw/9f5cc1fc92918c387ec007944b5a53566b428adb/test%2Fparallel%2Ftest-performance-gc.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-performance-gc.js?ref=9f5cc1fc92918c387ec007944b5a53566b428adb",
            "patch": "@@ -4,15 +4,16 @@\n const common = require('../common');\n const assert = require('assert');\n const {\n-  PerformanceObserver\n+  PerformanceObserver,\n+  constants\n } = require('perf_hooks');\n \n const {\n   NODE_PERFORMANCE_GC_MAJOR,\n   NODE_PERFORMANCE_GC_MINOR,\n   NODE_PERFORMANCE_GC_INCREMENTAL,\n   NODE_PERFORMANCE_GC_WEAKCB\n-} = process.binding('performance').constants;\n+} = constants;\n \n const kinds = [\n   NODE_PERFORMANCE_GC_MAJOR,"
        },
        {
            "sha": "06c1281666bfd5dad76cf684d295953a2ec89cd7",
            "filename": "test/parallel/test-performanceobserver.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/9f5cc1fc92918c387ec007944b5a53566b428adb/test%2Fparallel%2Ftest-performanceobserver.js",
            "raw_url": "https://github.com/nodejs/node/raw/9f5cc1fc92918c387ec007944b5a53566b428adb/test%2Fparallel%2Ftest-performanceobserver.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-performanceobserver.js?ref=9f5cc1fc92918c387ec007944b5a53566b428adb",
            "patch": "@@ -1,11 +1,13 @@\n+// Flags: --expose-internals\n 'use strict';\n \n const common = require('../common');\n const Countdown = require('../common/countdown');\n const assert = require('assert');\n+const { internalBinding } = require('internal/test/binding');\n const {\n   observerCounts: counts\n-} = process.binding('performance');\n+} = internalBinding('performance');\n const {\n   performance,\n   PerformanceObserver,"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 13,
        "deletions": 13
    }
}