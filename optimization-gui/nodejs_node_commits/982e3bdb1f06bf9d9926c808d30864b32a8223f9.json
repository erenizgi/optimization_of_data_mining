{
    "author": "devsnek",
    "message": "process: add more version properties to release\n\nPR-URL: https://github.com/nodejs/node/pull/19438\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>",
    "sha": "982e3bdb1f06bf9d9926c808d30864b32a8223f9",
    "files": [
        {
            "sha": "631a1458f9762455f815955ff56e28dccc92e008",
            "filename": "doc/api/process.md",
            "status": "modified",
            "additions": 21,
            "deletions": 1,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/982e3bdb1f06bf9d9926c808d30864b32a8223f9/doc%2Fapi%2Fprocess.md",
            "raw_url": "https://github.com/nodejs/node/raw/982e3bdb1f06bf9d9926c808d30864b32a8223f9/doc%2Fapi%2Fprocess.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fprocess.md?ref=982e3bdb1f06bf9d9926c808d30864b32a8223f9",
            "patch": "@@ -1503,6 +1503,21 @@ tarball.\n   - `'Argon'` for the 4.x LTS line beginning with 4.2.0.\n   - `'Boron'` for the 6.x LTS line beginning with 6.9.0.\n   - `'Carbon'` for the 8.x LTS line beginning with 8.9.1.\n+* `majorVersion` {number} The major version of Node.js.\n+* `minorVersion` {number} The minor version of Node.js.\n+* `patchVersion` {number} The patch version of Node.js.\n+* `prereleaseTag` {string} The SemVer pre-release tag for Node.js.\n+* `computedVersion` {number} A number representing the current version, created\n+  using the following method:\n+  `(majorVersion << 16) + (minorVersion << 8) + patchVersion`\n+* `compareVersion` {function} Perform a SemVer comparison to the release\n+  version.\n+    * `major`\n+    * `minor`\n+    * `patch`\n+    * Returns: {number} `-1` if the given version is lower than the release version,\n+      `0` if the given version matches the process version, and `1` if the given\n+      version is greater than the release version.\n \n <!-- eslint-skip -->\n ```js\n@@ -1511,7 +1526,12 @@ tarball.\n   lts: 'Argon',\n   sourceUrl: 'https://nodejs.org/download/release/v4.4.5/node-v4.4.5.tar.gz',\n   headersUrl: 'https://nodejs.org/download/release/v4.4.5/node-v4.4.5-headers.tar.gz',\n-  libUrl: 'https://nodejs.org/download/release/v4.4.5/win-x64/node.lib'\n+  libUrl: 'https://nodejs.org/download/release/v4.4.5/win-x64/node.lib',\n+  majorVersion: 4,\n+  minorVersion: 4,\n+  patchVersion: 5,\n+  prereleaseTag: '',\n+  computedVersion: 263173,\n }\n ```\n "
        },
        {
            "sha": "4b5498a07da9cfa8024a8762de73df467349f65f",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/982e3bdb1f06bf9d9926c808d30864b32a8223f9/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/982e3bdb1f06bf9d9926c808d30864b32a8223f9/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=982e3bdb1f06bf9d9926c808d30864b32a8223f9",
            "patch": "@@ -38,6 +38,7 @@\n     _process.setupConfig(NativeModule._source);\n     _process.setupSignalHandlers();\n     _process.setupUncaughtExceptionCapture(exceptionHandlerState);\n+    _process.setupCompareVersion();\n     NativeModule.require('internal/process/warning').setup();\n     NativeModule.require('internal/process/next_tick').setup();\n     NativeModule.require('internal/process/stdio').setup();"
        },
        {
            "sha": "573ffc1600ff74552723f21f07588991427c2258",
            "filename": "lib/internal/process.js",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/982e3bdb1f06bf9d9926c808d30864b32a8223f9/lib%2Finternal%2Fprocess.js",
            "raw_url": "https://github.com/nodejs/node/raw/982e3bdb1f06bf9d9926c808d30864b32a8223f9/lib%2Finternal%2Fprocess.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fprocess.js?ref=982e3bdb1f06bf9d9926c808d30864b32a8223f9",
            "patch": "@@ -269,6 +269,16 @@ function setupUncaughtExceptionCapture(exceptionHandlerState) {\n   };\n }\n \n+function setupCompareVersion() {\n+  const { computedVersion } = process.release;\n+  process.release.compareVersion = (major, minor, patch) => {\n+    const comp = (major << 16) + (minor << 8) + patch;\n+    if (comp === computedVersion)\n+      return 0;\n+    return comp > computedVersion ? 1 : -1;\n+  };\n+}\n+\n module.exports = {\n   setup_performance,\n   setup_cpuUsage,\n@@ -279,5 +289,6 @@ module.exports = {\n   setupSignalHandlers,\n   setupChannel,\n   setupRawDebug,\n-  setupUncaughtExceptionCapture\n+  setupUncaughtExceptionCapture,\n+  setupCompareVersion,\n };"
        },
        {
            "sha": "1e1dab2a6d8f4ea3392623884a41094ed0232259",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/982e3bdb1f06bf9d9926c808d30864b32a8223f9/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/982e3bdb1f06bf9d9926c808d30864b32a8223f9/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=982e3bdb1f06bf9d9926c808d30864b32a8223f9",
            "patch": "@@ -3020,6 +3020,23 @@ void SetupProcessObject(Environment* env,\n   READONLY_PROPERTY(release, \"name\",\n                     OneByteString(env->isolate(), NODE_RELEASE));\n \n+  READONLY_PROPERTY(release, \"majorVersion\",\n+      Integer::New(env->isolate(), NODE_MAJOR_VERSION));\n+  READONLY_PROPERTY(release, \"minorVersion\",\n+      Integer::New(env->isolate(), NODE_MINOR_VERSION));\n+  READONLY_PROPERTY(release, \"patchVersion\",\n+      Integer::New(env->isolate(), NODE_PATCH_VERSION));\n+\n+  READONLY_PROPERTY(release, \"prereleaseTag\",\n+      OneByteString(env->isolate(), NODE_TAG));\n+\n+  READONLY_PROPERTY(release,\n+                    \"computedVersion\",\n+                    Integer::New(env->isolate(),\n+                        (NODE_MAJOR_VERSION << 16) +\n+                        (NODE_MINOR_VERSION << 8) +\n+                        NODE_PATCH_VERSION));\n+\n #if NODE_VERSION_IS_LTS\n   READONLY_PROPERTY(release, \"lts\",\n                     OneByteString(env->isolate(), NODE_VERSION_LTS_CODENAME));"
        },
        {
            "sha": "6356b1a7250f7dfb7a21dc4deda57bd2f9e25461",
            "filename": "test/parallel/test-process-release.js",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/982e3bdb1f06bf9d9926c808d30864b32a8223f9/test%2Fparallel%2Ftest-process-release.js",
            "raw_url": "https://github.com/nodejs/node/raw/982e3bdb1f06bf9d9926c808d30864b32a8223f9/test%2Fparallel%2Ftest-process-release.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-release.js?ref=982e3bdb1f06bf9d9926c808d30864b32a8223f9",
            "patch": "@@ -18,3 +18,18 @@ if (versionParts[0] === '4' && versionParts[1] >= 2) {\n } else {\n   assert.strictEqual(process.release.lts, undefined);\n }\n+\n+const {\n+  majorVersion: major,\n+  minorVersion: minor,\n+  patchVersion: patch,\n+  computedVersion,\n+  compareVersion,\n+} = process.release;\n+\n+assert.strictEqual(\n+  (major << 16) + (minor << 8) + patch, computedVersion);\n+\n+assert.strictEqual(0, compareVersion(major, minor, patch));\n+assert.strictEqual(1, compareVersion(major, minor, patch + 1));\n+assert.strictEqual(-1, compareVersion(major - 1, minor, patch));"
        }
    ],
    "stats": {
        "total": 68,
        "additions": 66,
        "deletions": 2
    }
}