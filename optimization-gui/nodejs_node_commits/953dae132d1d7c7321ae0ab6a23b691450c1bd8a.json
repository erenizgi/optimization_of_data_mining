{
    "author": "Trott",
    "message": "test: remove pummel/test-exec\n\nRemove redundant test/pummel/test-exec.js.\n\nRefs: https://github.com/nodejs/node/pull/25686#pullrequestreview-196243499\n\nPR-URL: https://github.com/nodejs/node/pull/25722\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Beth Griggs <Bethany.Griggs@uk.ibm.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "953dae132d1d7c7321ae0ab6a23b691450c1bd8a",
    "files": [
        {
            "sha": "fb042bc9d2c743856ef657d58624f559c4387507",
            "filename": "test/pummel/test-exec.js",
            "status": "removed",
            "additions": 0,
            "deletions": 133,
            "changes": 133,
            "blob_url": "https://github.com/nodejs/node/blob/43c2a13c9334dad4b1f911dfcb455e8f8a9e4611/test%2Fpummel%2Ftest-exec.js",
            "raw_url": "https://github.com/nodejs/node/raw/43c2a13c9334dad4b1f911dfcb455e8f8a9e4611/test%2Fpummel%2Ftest-exec.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-exec.js?ref=43c2a13c9334dad4b1f911dfcb455e8f8a9e4611",
            "patch": "@@ -1,133 +0,0 @@\n-// Copyright Joyent, Inc. and other Node contributors.\n-//\n-// Permission is hereby granted, free of charge, to any person obtaining a\n-// copy of this software and associated documentation files (the\n-// \"Software\"), to deal in the Software without restriction, including\n-// without limitation the rights to use, copy, modify, merge, publish,\n-// distribute, sublicense, and/or sell copies of the Software, and to permit\n-// persons to whom the Software is furnished to do so, subject to the\n-// following conditions:\n-//\n-// The above copyright notice and this permission notice shall be included\n-// in all copies or substantial portions of the Software.\n-//\n-// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n-// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-// USE OR OTHER DEALINGS IN THE SOFTWARE.\n-\n-'use strict';\n-const common = require('../common');\n-const assert = require('assert');\n-const exec = require('child_process').exec;\n-\n-let SLEEP3_COMMAND;\n-if (!common.isWindows) {\n-  // Unix.\n-  SLEEP3_COMMAND = 'sleep 3';\n-} else {\n-  // Windows: `choice` is a command built into cmd.exe. Use another cmd process\n-  // to create a process tree, so we can catch bugs related to it.\n-  SLEEP3_COMMAND = 'cmd /c choice /t 3 /c X /d X';\n-}\n-\n-\n-let success_count = 0;\n-let error_count = 0;\n-\n-\n-exec(\n-  `\"${process.execPath}\" -p -e process.versions`,\n-  function(err, stdout, stderr) {\n-    if (err) {\n-      error_count++;\n-      console.log(`error!: ${err.code}`);\n-      console.log(`stdout: ${JSON.stringify(stdout)}`);\n-      console.log(`stderr: ${JSON.stringify(stderr)}`);\n-      assert.strictEqual(err.killed, false);\n-    } else {\n-      success_count++;\n-      console.dir(stdout);\n-    }\n-  }\n-);\n-\n-\n-exec('thisisnotavalidcommand', function(err, stdout, stderr) {\n-  if (err) {\n-    error_count++;\n-    assert.strictEqual(stdout, '');\n-    assert.strictEqual(typeof err.code, 'number');\n-    assert.notStrictEqual(err.code, 0);\n-    assert.strictEqual(err.killed, false);\n-    assert.strictEqual(err.signal, null);\n-    console.log(`error code: ${err.code}`);\n-    console.log(`stdout: ${JSON.stringify(stdout)}`);\n-    console.log(`stderr: ${JSON.stringify(stderr)}`);\n-  } else {\n-    success_count++;\n-    console.dir(stdout);\n-    assert.strictEqual(typeof stdout, 'string');\n-    assert.notStrictEqual(stdout, '');\n-  }\n-});\n-\n-\n-const sleeperStart = new Date();\n-exec(SLEEP3_COMMAND, { timeout: 50 }, function(err, stdout, stderr) {\n-  const diff = (new Date()) - sleeperStart;\n-  console.log(`'sleep 3' with timeout 50 took ${diff} ms`);\n-  assert.ok(diff < 500);\n-  assert.ok(err);\n-  assert.ok(err.killed);\n-  assert.strictEqual(err.signal, 'SIGTERM');\n-  assert.strictEqual(stdout, '');\n-  assert.strictEqual(stderr, '');\n-});\n-\n-\n-const startSleep3 = new Date();\n-const killMeTwice = exec(SLEEP3_COMMAND, { timeout: 1000 },\n-                         killMeTwiceCallback);\n-\n-process.nextTick(function() {\n-  console.log(`kill pid ${killMeTwice.pid}`);\n-  // Make sure there is no race condition in starting the process\n-  // the PID SHOULD exist directly following the exec() call.\n-  assert.strictEqual(typeof killMeTwice._handle.pid, 'number');\n-  // Kill the process\n-  killMeTwice.kill();\n-});\n-\n-function killMeTwiceCallback(err, stdout, stderr) {\n-  const diff = (new Date()) - startSleep3;\n-  // We should have already killed this process. Assert that the timeout still\n-  // works and that we are getting the proper callback parameters.\n-  assert.ok(err);\n-  assert.ok(err.killed);\n-  assert.strictEqual(err.signal, 'SIGTERM');\n-  assert.strictEqual(stdout, '');\n-  assert.strictEqual(stderr, '');\n-\n-  // the timeout should still be in effect\n-  console.log(`'sleep 3' was already killed. Took ${diff} ms`);\n-  assert.ok(diff < 1500);\n-}\n-\n-\n-exec('python -c \"print 200000*\\'C\\'\"', { maxBuffer: 1000 },\n-     function(err, stdout, stderr) {\n-       assert.ok(err);\n-       assert.ok(/maxBuffer/.test(err.message));\n-       assert.strictEqual(stdout, 'C'.repeat(1000));\n-       assert.strictEqual(stderr, '');\n-     });\n-\n-\n-process.on('exit', function() {\n-  assert.strictEqual(success_count, 1);\n-  assert.strictEqual(error_count, 1);\n-});"
        }
    ],
    "stats": {
        "total": 133,
        "additions": 0,
        "deletions": 133
    }
}