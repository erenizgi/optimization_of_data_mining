{
    "author": "Trott",
    "message": "doc: add \"Edit on GitHub\" link\n\nProof of concept for an \"Edit on GitHub\" link, inspired by the\nServerless docs.\n\nOne issue is that the link is to the version of the docs on the master\nbranch even if the person was reading a different version of the doc. I\ndon't consider that a big problem, although we can always remove the\nlink if it turns out to be a big problem. I don't think there is a good\nsolution. PRs need to be opened against the master branch generally.\nHaving a bunch of PRs against staging branches is probably not what we\nwant. If there's an update to one version of the doc, there will usually\nbe an update to other versions.\n\nPR-URL: https://github.com/nodejs/node/pull/21703\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>\nReviewed-By: Yuta Hiroto <hello@hiroppy.me>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Roman Reiss <me@silverwind.io>",
    "sha": "61cd101e128238ba52b333e99fc5b0e948e13de5",
    "files": [
        {
            "sha": "f59f377004809738cdafd5cc7ba672e353455af2",
            "filename": "doc/api_assets/style.css",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/61cd101e128238ba52b333e99fc5b0e948e13de5/doc%2Fapi_assets%2Fstyle.css",
            "raw_url": "https://github.com/nodejs/node/raw/61cd101e128238ba52b333e99fc5b0e948e13de5/doc%2Fapi_assets%2Fstyle.css",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi_assets%2Fstyle.css?ref=61cd101e128238ba52b333e99fc5b0e948e13de5",
            "patch": "@@ -504,6 +504,11 @@ th > *:last-child, td > *:last-child {\n   visibility: hidden;\n }\n \n+.github_icon {\n+  vertical-align: middle;\n+  margin: -2px 3px 0 0;\n+}\n+\n @media only screen and (max-width: 1024px) {\n   #content {\n     overflow: visible;"
        },
        {
            "sha": "fdcf0d5821b56fdb349f75e4ee19c471543c0cf2",
            "filename": "doc/template.html",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/61cd101e128238ba52b333e99fc5b0e948e13de5/doc%2Ftemplate.html",
            "raw_url": "https://github.com/nodejs/node/raw/61cd101e128238ba52b333e99fc5b0e948e13de5/doc%2Ftemplate.html",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Ftemplate.html?ref=61cd101e128238ba52b333e99fc5b0e948e13de5",
            "patch": "@@ -35,6 +35,7 @@ <h1>Node.js __VERSION__ Documentation</h1>\n               <a href=\"__FILENAME__.json\">View as JSON</a>\n             </li>\n             __ALTDOCS__\n+            __EDIT_ON_GITHUB__\n           </ul>\n         </div>\n         <hr>"
        },
        {
            "sha": "d185538ab683b68d92849dbf936b8790a617798b",
            "filename": "tools/doc/allhtml.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/61cd101e128238ba52b333e99fc5b0e948e13de5/tools%2Fdoc%2Fallhtml.js",
            "raw_url": "https://github.com/nodejs/node/raw/61cd101e128238ba52b333e99fc5b0e948e13de5/tools%2Fdoc%2Fallhtml.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fallhtml.js?ref=61cd101e128238ba52b333e99fc5b0e948e13de5",
            "patch": "@@ -52,7 +52,8 @@ let all = toc.replace(/index\\.html/g, 'all.html')\n   .replace('<a href=\"all.html\" name=\"toc\">', '<a href=\"index.html\" name=\"toc\">')\n   .replace('index.json', 'all.json')\n   .replace('api-section-index', 'api-section-all')\n-  .replace('data-id=\"index\"', 'data-id=\"all\"');\n+  .replace('data-id=\"index\"', 'data-id=\"all\"')\n+  .replace(/<li class=\"edit_on_github\">.*?<\\/li>/, '');\n \n // Clean up the title.\n all = all.replace(/<title>.*?\\| /, '<title>');"
        },
        {
            "sha": "0f3293dadd51d1a574145bd7591f67cb25e22771",
            "filename": "tools/doc/html.js",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/61cd101e128238ba52b333e99fc5b0e948e13de5/tools%2Fdoc%2Fhtml.js",
            "raw_url": "https://github.com/nodejs/node/raw/61cd101e128238ba52b333e99fc5b0e948e13de5/tools%2Fdoc%2Fhtml.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fhtml.js?ref=61cd101e128238ba52b333e99fc5b0e948e13de5",
            "patch": "@@ -96,6 +96,8 @@ function toHTML({ input, filename, nodeVersion, analytics }, cb) {\n     HTML = HTML.replace('__ALTDOCS__', '');\n   }\n \n+  HTML = HTML.replace('__EDIT_ON_GITHUB__', editOnGitHub(filename));\n+\n   // Content insertion has to be the last thing we do with the lexed tokens,\n   // because it's destructive.\n   HTML = HTML.replace('__CONTENT__', marked.parser(lexed));\n@@ -377,3 +379,9 @@ function altDocs(filename, docCreated) {\n     </li>\n   ` : '';\n }\n+\n+// eslint-disable-next-line max-len\n+const githubLogo = '<span class=\"github_icon\"><svg height=\"16\" width=\"16\" viewBox=\"0 0 16.1 16.1\" fill=\"currentColor\"><path d=\"M8 0a8 8 0 0 0-2.5 15.6c.4 0 .5-.2.5-.4v-1.5c-2 .4-2.5-.5-2.7-1 0-.1-.5-.9-.8-1-.3-.2-.7-.6 0-.6.6 0 1 .6 1.2.8.7 1.2 1.9 1 2.4.7 0-.5.2-.9.5-1-1.8-.3-3.7-1-3.7-4 0-.9.3-1.6.8-2.2 0-.2-.3-1 .1-2 0 0 .7-.3 2.2.7a7.4 7.4 0 0 1 4 0c1.5-1 2.2-.8 2.2-.8.5 1.1.2 2 .1 2.1.5.6.8 1.3.8 2.2 0 3-1.9 3.7-3.6 4 .3.2.5.7.5 1.4v2.2c0 .2.1.5.5.4A8 8 0 0 0 16 8a8 8 0 0 0-8-8z\"/></svg></span>';\n+function editOnGitHub(filename) {\n+  return `<li class=\"edit_on_github\"><a href=\"https://github.com/nodejs/node/edit/master/doc/api/${filename}.md\">${githubLogo}Edit on GitHub</a></li>`;\n+}"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 16,
        "deletions": 1
    }
}