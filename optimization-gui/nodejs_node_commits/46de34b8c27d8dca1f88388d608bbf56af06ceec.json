{
    "author": "rubys",
    "message": "tools: build API TOC using raw headers\n\nMarkdown interprets the syntax for optional arguments as a form\nof a link, so instead of trying to build up the contents using\nthe node value, use grab the raw original markup instead.\n\nFixes regression noted in\nhttps://github.com/nodejs/node/pull/21490#issuecomment-406785023\n\nPR-URL: https://github.com/nodejs/node/pull/21922\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>\nReviewed-By: Rich Trott <rtrott@gmail.com>",
    "sha": "46de34b8c27d8dca1f88388d608bbf56af06ceec",
    "files": [
        {
            "sha": "fa7cb7b81bcdeccdb4efe040179fd4bda56a9b00",
            "filename": "tools/doc/html.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/46de34b8c27d8dca1f88388d608bbf56af06ceec/tools%2Fdoc%2Fhtml.js",
            "raw_url": "https://github.com/nodejs/node/raw/46de34b8c27d8dca1f88388d608bbf56af06ceec/tools%2Fdoc%2Fhtml.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fhtml.js?ref=46de34b8c27d8dca1f88388d608bbf56af06ceec",
            "patch": "@@ -340,8 +340,10 @@ function buildToc({ filename }) {\n \n       depth = node.depth;\n       const realFilename = path.basename(realFilenames[0], '.md');\n-      const headingText = node.children.map((child) => child.value)\n-        .join().trim();\n+      const headingText = node.children.map((child) =>\n+        file.contents.slice(child.position.start.offset,\n+                            child.position.end.offset)\n+      ).join('').trim();\n       const id = getId(`${realFilename}_${headingText}`, idCounters);\n \n       const hasStability = node.stability !== undefined;"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}