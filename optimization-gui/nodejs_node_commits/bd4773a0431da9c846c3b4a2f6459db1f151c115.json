{
    "author": "Trott",
    "message": "module: use undefined if no main\n\nIf the package.json file does not have a \"main\" entry, return undefined\nrather than an empty string. This is to make more consistent behavior.\nFor example, when package.json is a directory, \"main\" is undefined\nrather than an empty string.\n\nPR-URL: https://github.com/nodejs/node/pull/18593\nReviewed-By: Bradley Farias <bradley.meck@gmail.com>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Vladimir de Turckheim <vlad2t@hotmail.com>\nReviewed-By: Yuta Hiroto <hello@about-hiroppy.com>\nReviewed-By: Benedikt Meurer <benedikt.meurer@gmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>",
    "sha": "bd4773a0431da9c846c3b4a2f6459db1f151c115",
    "files": [
        {
            "sha": "ccb9c65cfaf63c4665286261830eb1725c3025a3",
            "filename": "src/node_file.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bd4773a0431da9c846c3b4a2f6459db1f151c115/src%2Fnode_file.cc",
            "raw_url": "https://github.com/nodejs/node/raw/bd4773a0431da9c846c3b4a2f6459db1f151c115/src%2Fnode_file.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_file.cc?ref=bd4773a0431da9c846c3b4a2f6459db1f151c115",
            "patch": "@@ -652,9 +652,8 @@ void Close(const FunctionCallbackInfo<Value>& args) {\n \n \n // Used to speed up module loading.  Returns the contents of the file as\n-// a string or undefined when the file cannot be opened.  Returns an empty\n-// string when the file does not contain the substring '\"main\"' because that\n-// is the property we care about.\n+// a string or undefined when the file cannot be opened or \"main\" is not found\n+// in the file.\n static void InternalModuleReadJSON(const FunctionCallbackInfo<Value>& args) {\n   Environment* env = Environment::GetCurrent(args);\n   uv_loop_t* loop = env->event_loop();\n@@ -708,7 +707,7 @@ static void InternalModuleReadJSON(const FunctionCallbackInfo<Value>& args) {\n \n   const size_t size = offset - start;\n   if (size == 0 || size == SearchString(&chars[start], size, \"\\\"main\\\"\")) {\n-    args.GetReturnValue().SetEmptyString();\n+    return;\n   } else {\n     Local<String> chars_string =\n         String::NewFromUtf8(env->isolate(),"
        },
        {
            "sha": "a3ebaf9e7266d24c63aa84baca6d79b24aadad01",
            "filename": "test/parallel/test-module-binding.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bd4773a0431da9c846c3b4a2f6459db1f151c115/test%2Fparallel%2Ftest-module-binding.js",
            "raw_url": "https://github.com/nodejs/node/raw/bd4773a0431da9c846c3b4a2f6459db1f151c115/test%2Fparallel%2Ftest-module-binding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-module-binding.js?ref=bd4773a0431da9c846c3b4a2f6459db1f151c115",
            "patch": "@@ -6,8 +6,9 @@ const { readFileSync } = require('fs');\n const { strictEqual } = require('assert');\n \n strictEqual(internalModuleReadJSON('nosuchfile'), undefined);\n-strictEqual(internalModuleReadJSON(fixtures.path('empty.txt')), '');\n-strictEqual(internalModuleReadJSON(fixtures.path('empty-with-bom.txt')), '');\n+strictEqual(internalModuleReadJSON(fixtures.path('empty.txt')), undefined);\n+strictEqual(internalModuleReadJSON(fixtures.path('empty-with-bom.txt')),\n+            undefined);\n {\n   const filename = fixtures.path('require-bin/package.json');\n   strictEqual(internalModuleReadJSON(filename), readFileSync(filename, 'utf8'));"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 6,
        "deletions": 6
    }
}