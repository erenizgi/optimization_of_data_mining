{
    "author": "trivikr",
    "message": "test: http2 client setNextStreamID errors\n\nPR-URL: https://github.com/nodejs/node/pull/18848\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "20dae8540b4a6306d53ebd8fca88a9940c8e9c00",
    "files": [
        {
            "sha": "0c982061b857e1f46c014d3fdf67759c52eed7c4",
            "filename": "test/parallel/test-http2-client-setNextStreamID-errors.js",
            "status": "added",
            "additions": 59,
            "deletions": 0,
            "changes": 59,
            "blob_url": "https://github.com/nodejs/node/blob/20dae8540b4a6306d53ebd8fca88a9940c8e9c00/test%2Fparallel%2Ftest-http2-client-setNextStreamID-errors.js",
            "raw_url": "https://github.com/nodejs/node/raw/20dae8540b4a6306d53ebd8fca88a9940c8e9c00/test%2Fparallel%2Ftest-http2-client-setNextStreamID-errors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http2-client-setNextStreamID-errors.js?ref=20dae8540b4a6306d53ebd8fca88a9940c8e9c00",
            "patch": "@@ -0,0 +1,59 @@\n+'use strict';\n+\n+const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n+\n+const http2 = require('http2');\n+\n+const server = http2.createServer();\n+server.on('stream', (stream) => {\n+  stream.respond();\n+  stream.end('ok');\n+});\n+\n+const types = {\n+  boolean: true,\n+  function: () => {},\n+  number: 1,\n+  object: {},\n+  array: [],\n+  null: null,\n+  symbol: Symbol('test')\n+};\n+\n+server.listen(0, common.mustCall(() => {\n+  const client = http2.connect(`http://localhost:${server.address().port}`);\n+\n+  client.on('connect', () => {\n+    const outOfRangeNum = 2 ** 31;\n+    common.expectsError(\n+      () => client.setNextStreamID(outOfRangeNum),\n+      {\n+        type: RangeError,\n+        code: 'ERR_OUT_OF_RANGE',\n+        message: 'The value of \"id\" is out of range.' +\n+           ' It must be > 0 and <= 2147483647. Received ' + outOfRangeNum\n+      }\n+    );\n+\n+    // should throw if something other than number is passed to setNextStreamID\n+    Object.entries(types).forEach(([type, value]) => {\n+      if (type === 'number') {\n+        return;\n+      }\n+\n+      common.expectsError(\n+        () => client.setNextStreamID(value),\n+        {\n+          type: TypeError,\n+          code: 'ERR_INVALID_ARG_TYPE',\n+          message: 'The \"id\" argument must be of type number'\n+        }\n+      );\n+    });\n+\n+    server.close();\n+    client.close();\n+  });\n+}));"
        }
    ],
    "stats": {
        "total": 59,
        "additions": 59,
        "deletions": 0
    }
}