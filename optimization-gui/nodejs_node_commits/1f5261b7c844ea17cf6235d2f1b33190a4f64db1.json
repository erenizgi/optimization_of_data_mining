{
    "author": "tniessen",
    "message": "tools: fix doc tool behavior for version arrays\n\nEven though the doc tool supports version arrays in theory, it fails to\nsort them properly causing the tool to crash.\n\nPR-URL: https://github.com/nodejs/node/pull/22766\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "1f5261b7c844ea17cf6235d2f1b33190a4f64db1",
    "files": [
        {
            "sha": "86daae6cfc6d560da62e13908e5de9c5e01dd630",
            "filename": "tools/doc/common.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1f5261b7c844ea17cf6235d2f1b33190a4f64db1/tools%2Fdoc%2Fcommon.js",
            "raw_url": "https://github.com/nodejs/node/raw/1f5261b7c844ea17cf6235d2f1b33190a4f64db1/tools%2Fdoc%2Fcommon.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fcommon.js?ref=1f5261b7c844ea17cf6235d2f1b33190a4f64db1",
            "patch": "@@ -43,4 +43,4 @@ function extractAndParseYAML(text) {\n   return meta;\n }\n \n-module.exports = { isYAMLBlock, extractAndParseYAML };\n+module.exports = { arrify, isYAMLBlock, extractAndParseYAML };"
        },
        {
            "sha": "c0a94b6534b17154ae5c9ae3f5121988a5dd59f1",
            "filename": "tools/doc/html.js",
            "status": "modified",
            "additions": 11,
            "deletions": 3,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/1f5261b7c844ea17cf6235d2f1b33190a4f64db1/tools%2Fdoc%2Fhtml.js",
            "raw_url": "https://github.com/nodejs/node/raw/1f5261b7c844ea17cf6235d2f1b33190a4f64db1/tools%2Fdoc%2Fhtml.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fhtml.js?ref=1f5261b7c844ea17cf6235d2f1b33190a4f64db1",
            "patch": "@@ -308,7 +308,9 @@ function parseYAML(text) {\n         .use(htmlStringify)\n         .processSync(change.description).toString();\n \n-      result += `<tr><td>${change.version}</td>\\n` +\n+      const version = common.arrify(change.version).join(', ');\n+\n+      result += `<tr><td>${version}</td>\\n` +\n                   `<td>${description}</td></tr>\\n`;\n     });\n \n@@ -326,10 +328,16 @@ function parseYAML(text) {\n   return result;\n }\n \n+function minVersion(a) {\n+  return common.arrify(a).reduce((min, e) => {\n+    return !min || versionSort(min, e) < 0 ? e : min;\n+  });\n+}\n+\n const numberRe = /^\\d*/;\n function versionSort(a, b) {\n-  a = a.trim();\n-  b = b.trim();\n+  a = minVersion(a).trim();\n+  b = minVersion(b).trim();\n   let i = 0; // Common prefix length.\n   while (i < a.length && i < b.length && a[i] === b[i]) i++;\n   a = a.substr(i);"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 12,
        "deletions": 4
    }
}