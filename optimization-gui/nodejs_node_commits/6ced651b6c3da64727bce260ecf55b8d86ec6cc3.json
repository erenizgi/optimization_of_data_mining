{
    "author": "danbev",
    "message": "build: add crypto check to markdown lint target\n\nCurrently, if configured --without-ssl the following error will be\nrepored by remark-cli:\n\nRunning Markdown linter on misc docs...\ninternal/util.js:100\n    throw new ERR_NO_CRYPTO();\n    ^\n\nError [ERR_NO_CRYPTO]: Node.js is not compiled with OpenSSL crypto support\n    at assertCrypto (internal/util.js:100:11)\n    at crypto.js:31:1\n    at NativeModule.compile (internal/bootstrap/loaders.js:235:7)\n    at Function.NativeModule.require\n      (internal/bootstrap/loaders.js:155:18)\n    at Function.Module._load (internal/modules/cjs/loader.js:530:25)\n    at Module.require (internal/modules/cjs/loader.js:650:17)\n    at require (internal/modules/cjs/helpers.js:20:18)\n    at Object.<anonymous>\n      (/node/tools/remark-cli/node_modules/math-random/node.js:1:76)\n    at Module._compile (internal/modules/cjs/loader.js:702:30)\n    at Object.Module._extensions..js\n      (internal/modules/cjs/loader.js:713:10)\nmake[1]: *** [tools/.miscmdlintstamp] Error 1\nmake: *** [lint] Error 2\n\nThis commit adds a check for crypto to avoid this error when node has\nbeen configured without crypto support. The alternative was to try to\nfix this in randomatic but that lead to another dependency failing\n(uuid) and felt like this might be simpler.\n\nPR-URL: https://github.com/nodejs/node/pull/21326\nReviewed-By: Ujjwal Sharma <usharma1998@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "6ced651b6c3da64727bce260ecf55b8d86ec6cc3",
    "files": [
        {
            "sha": "f6b20baf231350caf8a47070f6efcfcdf32870cf",
            "filename": "Makefile",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/6ced651b6c3da64727bce260ecf55b8d86ec6cc3/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/6ced651b6c3da64727bce260ecf55b8d86ec6cc3/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=6ced651b6c3da64727bce260ecf55b8d86ec6cc3",
            "patch": "@@ -1046,11 +1046,17 @@ ifneq (\"\",\"$(wildcard tools/remark-cli/node_modules/)\")\n \n LINT_MD_DOC_FILES = $(shell ls doc/*.md doc/**/*.md)\n run-lint-doc-md = tools/remark-cli/cli.js -q -f $(LINT_MD_DOC_FILES)\n+node_use_openssl = $(shell $(call available-node,\"-p\" \\\n+\t\t   \"process.versions.openssl != undefined\"))\n # Lint all changed markdown files under doc/\n tools/.docmdlintstamp: $(LINT_MD_DOC_FILES)\n+ifeq ($(node_use_openssl),true)\n \t@echo \"Running Markdown linter on docs...\"\n \t@$(call available-node,$(run-lint-doc-md))\n \t@touch $@\n+else\n+\t@echo \"Skipping Markdown linter on docs (no crypto)\"\n+endif\n \n LINT_MD_TARGETS = src lib benchmark tools/doc tools/icu\n LINT_MD_ROOT_DOCS := $(wildcard *.md)\n@@ -1059,9 +1065,13 @@ LINT_MD_MISC_FILES := $(shell find $(LINT_MD_TARGETS) -type f \\\n run-lint-misc-md = tools/remark-cli/cli.js -q -f $(LINT_MD_MISC_FILES)\n # Lint other changed markdown files maintained by us\n tools/.miscmdlintstamp: $(LINT_MD_MISC_FILES)\n+ifeq ($(node_use_openssl),true)\n \t@echo \"Running Markdown linter on misc docs...\"\n \t@$(call available-node,$(run-lint-misc-md))\n \t@touch $@\n+else\n+\t@echo \"Skipping Markdown linter on misc docs (no crypto)\"\n+endif\n \n tools/.mdlintstamp: tools/.miscmdlintstamp tools/.docmdlintstamp\n "
        }
    ],
    "stats": {
        "total": 10,
        "additions": 10,
        "deletions": 0
    }
}