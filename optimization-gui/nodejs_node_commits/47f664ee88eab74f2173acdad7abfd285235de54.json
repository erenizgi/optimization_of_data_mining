{
    "author": "bnoordhuis",
    "message": "n-api: wrap control flow macro in do/while\n\nMake CHECK_ENV() safe to use in the following context:\n\n    if (condition)\n      CHECK_ENV(env);\n    else\n      something_else();\n\nPR-URL: https://github.com/nodejs/node/pull/18532\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ali Ijaz Sheikh <ofrobots@google.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>",
    "sha": "47f664ee88eab74f2173acdad7abfd285235de54",
    "files": [
        {
            "sha": "611f6c8085e384c9f5dc19acacc74e59a6a46f37",
            "filename": "src/node_api.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/47f664ee88eab74f2173acdad7abfd285235de54/src%2Fnode_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/47f664ee88eab74f2173acdad7abfd285235de54/src%2Fnode_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_api.cc?ref=47f664ee88eab74f2173acdad7abfd285235de54",
            "patch": "@@ -70,10 +70,12 @@ struct napi_env__ {\n     }                                                                   \\\n   } while (0)\n \n-#define CHECK_ENV(env)        \\\n-  if ((env) == nullptr) {     \\\n-    return napi_invalid_arg;  \\\n-  }\n+#define CHECK_ENV(env)          \\\n+  do {                          \\\n+    if ((env) == nullptr) {     \\\n+      return napi_invalid_arg;  \\\n+    }                           \\\n+  } while (0)\n \n #define CHECK_ARG(env, arg) \\\n   RETURN_STATUS_IF_FALSE((env), ((arg) != nullptr), napi_invalid_arg)"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 6,
        "deletions": 4
    }
}