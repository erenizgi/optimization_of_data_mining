{
    "author": "Trott",
    "message": "test: improve known_issues/test-vm-timeout-escape-queuemicrotask\n\nImprove known_issues/test-vm-timeout-escape-queuemicrotask to mitigate\nCI failures on ubuntu1604-arm64. Failures are due to a race condition.\nUse `common.platformTimeout()` to help, adjust timeout to make sure\n`queueMicrotasks()` has a chance to run, and improve error message.\n\nPR-URL: https://github.com/nodejs/node/pull/25503\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ben Coe <bencoe@gmail.com>",
    "sha": "27f6d04dcf092c23d00d19eacf13e5c751ea9c5f",
    "files": [
        {
            "sha": "df0531bae1d9edc585ae03ccf3e0bff0564fa783",
            "filename": "test/known_issues/test-vm-timeout-escape-queuemicrotask.js",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/27f6d04dcf092c23d00d19eacf13e5c751ea9c5f/test%2Fknown_issues%2Ftest-vm-timeout-escape-queuemicrotask.js",
            "raw_url": "https://github.com/nodejs/node/raw/27f6d04dcf092c23d00d19eacf13e5c751ea9c5f/test%2Fknown_issues%2Ftest-vm-timeout-escape-queuemicrotask.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fknown_issues%2Ftest-vm-timeout-escape-queuemicrotask.js?ref=27f6d04dcf092c23d00d19eacf13e5c751ea9c5f",
            "patch": "@@ -12,14 +12,17 @@ const NS_PER_MS = 1000000n;\n \n const hrtime = process.hrtime.bigint;\n \n+const loopDuration = common.platformTimeout(100n);\n+const timeout = common.platformTimeout(10);\n+\n function loop() {\n   const start = hrtime();\n   while (1) {\n     const current = hrtime();\n     const span = (current - start) / NS_PER_MS;\n-    if (span >= 100n) {\n+    if (span >= loopDuration) {\n       throw new Error(\n-        `escaped timeout at ${span} milliseconds!`);\n+        `escaped ${timeout}ms timeout at ${span}ms`);\n     }\n   }\n }\n@@ -32,9 +35,9 @@ assert.throws(() => {\n       queueMicrotask,\n       loop\n     },\n-    { timeout: common.platformTimeout(5) }\n+    { timeout }\n   );\n }, {\n   code: 'ERR_SCRIPT_EXECUTION_TIMEOUT',\n-  message: 'Script execution timed out after 5ms'\n+  message: `Script execution timed out after ${timeout}ms`\n });"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 7,
        "deletions": 4
    }
}