{
    "author": "addaleax",
    "message": "src: add missing `NODE_WANT_INTERNALS` guards\n\nWe generally add these to all headers that are considered\ninternal to Node.\n\nThese arenâ€™t distributed as part of the headers tarball,\nso I think this does not have to be semver-major\n(and we have been changing the APIs in these headers\nfreely anyway).\n\nPR-URL: https://github.com/nodejs/node/pull/22514\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "09fce8562a3a898e02666e89aa94a2f88fbb766f",
    "files": [
        {
            "sha": "931b2753646b8c59c83f4b971f4ce316082b7c2e",
            "filename": "src/aliased_buffer.h",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Faliased_buffer.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Faliased_buffer.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Faliased_buffer.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,7 +1,8 @@\n-\n #ifndef SRC_ALIASED_BUFFER_H_\n #define SRC_ALIASED_BUFFER_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include \"v8.h\"\n #include \"util-inl.h\"\n \n@@ -235,4 +236,6 @@ class AliasedBuffer {\n };\n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_ALIASED_BUFFER_H_"
        },
        {
            "sha": "d9e2232dcc4d7bbc5bb671d1a51f617854f43506",
            "filename": "src/inspector_agent.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Finspector_agent.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Finspector_agent.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_agent.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_INSPECTOR_AGENT_H_\n #define SRC_INSPECTOR_AGENT_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include <memory>\n \n #include <stddef.h>\n@@ -120,4 +122,6 @@ class Agent {\n }  // namespace inspector\n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_INSPECTOR_AGENT_H_"
        },
        {
            "sha": "21df54e03126e965ca5b2a5cafef37b397f3f200",
            "filename": "src/inspector_io.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Finspector_io.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Finspector_io.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_io.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_INSPECTOR_IO_H_\n #define SRC_INSPECTOR_IO_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include \"inspector_socket_server.h\"\n #include \"node_mutex.h\"\n #include \"uv.h\"\n@@ -90,4 +92,6 @@ class InspectorIo {\n }  // namespace inspector\n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_INSPECTOR_IO_H_"
        },
        {
            "sha": "eca88ad45fe379d592728fe8dee540974c8b1317",
            "filename": "src/inspector_socket.h",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Finspector_socket.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Finspector_socket.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_socket.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_INSPECTOR_SOCKET_H_\n #define SRC_INSPECTOR_SOCKET_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include \"util-inl.h\"\n #include \"uv.h\"\n \n@@ -52,5 +54,6 @@ class InspectorSocket {\n }  // namespace inspector\n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n \n #endif  // SRC_INSPECTOR_SOCKET_H_"
        },
        {
            "sha": "5c61b4e5ee3ddcef011d1a20108754b14cb121fc",
            "filename": "src/inspector_socket_server.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Finspector_socket_server.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Finspector_socket_server.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_socket_server.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_INSPECTOR_SOCKET_SERVER_H_\n #define SRC_INSPECTOR_SOCKET_SERVER_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include \"inspector_agent.h\"\n #include \"inspector_socket.h\"\n #include \"uv.h\"\n@@ -98,4 +100,6 @@ class InspectorSocketServer {\n }  // namespace inspector\n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_INSPECTOR_SOCKET_SERVER_H_"
        },
        {
            "sha": "61ab81523cea5972287cfb2b08b9c23b57c8ffb4",
            "filename": "src/node_context_data.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_context_data.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_context_data.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_context_data.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_NODE_CONTEXT_DATA_H_\n #define SRC_NODE_CONTEXT_DATA_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n namespace node {\n \n // Pick an index that's hopefully out of the way when we're embedded inside\n@@ -37,4 +39,6 @@ enum ContextEmbedderIndex {\n \n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_NODE_CONTEXT_DATA_H_"
        },
        {
            "sha": "8af1d1d4fc32865dce67fb18029deed1a910161a",
            "filename": "src/node_contextify.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_contextify.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_contextify.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_contextify.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_NODE_CONTEXTIFY_H_\n #define SRC_NODE_CONTEXTIFY_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include \"node_internals.h\"\n #include \"node_context_data.h\"\n \n@@ -107,4 +109,6 @@ class ContextifyContext {\n }  // namespace contextify\n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_NODE_CONTEXTIFY_H_"
        },
        {
            "sha": "de62a0d9ff66b7f567f54c5e7c11b5b331bba6a6",
            "filename": "src/node_mutex.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_mutex.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_mutex.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_mutex.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_NODE_MUTEX_H_\n #define SRC_NODE_MUTEX_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include \"util.h\"\n #include \"uv.h\"\n \n@@ -184,4 +186,6 @@ MutexBase<Traits>::ScopedUnlock::~ScopedUnlock() {\n \n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_NODE_MUTEX_H_"
        },
        {
            "sha": "3c7e51361e6eae5f42843a7f3d0de7c31f573412",
            "filename": "src/node_perf_common.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_perf_common.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_perf_common.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_perf_common.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_NODE_PERF_COMMON_H_\n #define SRC_NODE_PERF_COMMON_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include \"node.h\"\n #include \"v8.h\"\n \n@@ -87,4 +89,6 @@ class performance_state {\n }  // namespace performance\n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_NODE_PERF_COMMON_H_"
        },
        {
            "sha": "7297df7142242bee7851da99ed293561b9b6ba59",
            "filename": "src/node_platform.h",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_platform.h",
            "raw_url": "https://github.com/nodejs/node/raw/09fce8562a3a898e02666e89aa94a2f88fbb766f/src%2Fnode_platform.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_platform.h?ref=09fce8562a3a898e02666e89aa94a2f88fbb766f",
            "patch": "@@ -1,6 +1,8 @@\n #ifndef SRC_NODE_PLATFORM_H_\n #define SRC_NODE_PLATFORM_H_\n \n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #include <queue>\n #include <unordered_map>\n #include <vector>\n@@ -158,4 +160,6 @@ class NodePlatform : public MultiIsolatePlatform {\n \n }  // namespace node\n \n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n #endif  // SRC_NODE_PLATFORM_H_"
        }
    ],
    "stats": {
        "total": 40,
        "additions": 39,
        "deletions": 1
    }
}