{
    "author": "cjihrig",
    "message": "http: add maxHeaderSize property\n\nThis commit exposes the value of --max-http-header-size\nas a property of the http module.\n\nPR-URL: https://github.com/nodejs/node/pull/24860\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: Shelley Vohr <codebytere@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "9ac108d834539122625c85bb0a88f51a62b22d36",
    "files": [
        {
            "sha": "4e56f4ad00a391ea0d329db8ed354a3f7c5fa461",
            "filename": "doc/api/http.md",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9ac108d834539122625c85bb0a88f51a62b22d36/doc%2Fapi%2Fhttp.md",
            "raw_url": "https://github.com/nodejs/node/raw/9ac108d834539122625c85bb0a88f51a62b22d36/doc%2Fapi%2Fhttp.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fhttp.md?ref=9ac108d834539122625c85bb0a88f51a62b22d36",
            "patch": "@@ -1912,6 +1912,16 @@ added: v0.5.9\n Global instance of `Agent` which is used as the default for all HTTP client\n requests.\n \n+## http.maxHeaderSize\n+<!-- YAML\n+added: REPLACEME\n+-->\n+\n+* {number}\n+\n+Read-only property specifying the maximum allowed size of HTTP headers in bytes.\n+Defaults to 8KB. Configurable using the [`--max-http-header-size`][] CLI option.\n+\n ## http.request(options[, callback])\n ## http.request(url[, options][, callback])\n <!-- YAML\n@@ -2097,6 +2107,7 @@ will be emitted in the following order:\n Note that setting the `timeout` option or using the `setTimeout()` function will\n not abort the request or do anything besides add a `'timeout'` event.\n \n+[`--max-http-header-size`]: cli.html#cli_max_http_header_size_size\n [`'checkContinue'`]: #http_event_checkcontinue\n [`'request'`]: #http_event_request\n [`'response'`]: #http_event_response"
        },
        {
            "sha": "e3707ffa62b25da04d480ff8be9183b35d84d247",
            "filename": "lib/http.js",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/9ac108d834539122625c85bb0a88f51a62b22d36/lib%2Fhttp.js",
            "raw_url": "https://github.com/nodejs/node/raw/9ac108d834539122625c85bb0a88f51a62b22d36/lib%2Fhttp.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fhttp.js?ref=9ac108d834539122625c85bb0a88f51a62b22d36",
            "patch": "@@ -32,6 +32,7 @@ const {\n   Server,\n   ServerResponse\n } = require('_http_server');\n+let maxHeaderSize;\n \n function createServer(opts, requestListener) {\n   return new Server(opts, requestListener);\n@@ -62,3 +63,16 @@ module.exports = {\n   get,\n   request\n };\n+\n+Object.defineProperty(module.exports, 'maxHeaderSize', {\n+  configurable: true,\n+  enumerable: true,\n+  get() {\n+    if (maxHeaderSize === undefined) {\n+      const { getOptionValue } = require('internal/options');\n+      maxHeaderSize = getOptionValue('--max-http-header-size');\n+    }\n+\n+    return maxHeaderSize;\n+  }\n+});"
        },
        {
            "sha": "07fbe902963525a3ef678c291f4e00c300ee87ef",
            "filename": "test/parallel/test-http-max-header-size.js",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9ac108d834539122625c85bb0a88f51a62b22d36/test%2Fparallel%2Ftest-http-max-header-size.js",
            "raw_url": "https://github.com/nodejs/node/raw/9ac108d834539122625c85bb0a88f51a62b22d36/test%2Fparallel%2Ftest-http-max-header-size.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-max-header-size.js?ref=9ac108d834539122625c85bb0a88f51a62b22d36",
            "patch": "@@ -0,0 +1,11 @@\n+'use strict';\n+\n+require('../common');\n+const assert = require('assert');\n+const { spawnSync } = require('child_process');\n+const http = require('http');\n+\n+assert.strictEqual(http.maxHeaderSize, 8 * 1024);\n+const child = spawnSync(process.execPath, ['--max-http-header-size=10', '-p',\n+                                           'http.maxHeaderSize']);\n+assert.strictEqual(+child.stdout.toString().trim(), 10);"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 36,
        "deletions": 0
    }
}