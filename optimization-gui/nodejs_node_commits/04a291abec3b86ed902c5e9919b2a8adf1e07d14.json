{
    "author": "joyeecheung",
    "message": "console: bind methods from the prototype chain in Console\n\nIn 62232361 we made the console.Console function construct an object\nwith methods from Console.prototype bound to the instance, instead of\nwith methods found on the prototype chain to be bound on the instances,\nthus breaking users overriding these methods when subclassing Console\nbecause they are not expecting this function to construct a\nnamespace whose methods are not looked up from the prototype\nchain.\n\nThis patch restores the previous behavior since it does not affect\nthe characteristics of the global console anyway. So after this patch,\nthe Console function still constructs normal objects with function\nproperties looked up from the prototype chain but bound to the\ninstances always.\n\nPR-URL: https://github.com/nodejs/node/pull/24047\nReviewed-By: John-David Dalton <john.david.dalton@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "04a291abec3b86ed902c5e9919b2a8adf1e07d14",
    "files": [
        {
            "sha": "39e55c202c4f4b5453cf5542d5f9b88007697ef5",
            "filename": "lib/console.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/04a291abec3b86ed902c5e9919b2a8adf1e07d14/lib%2Fconsole.js",
            "raw_url": "https://github.com/nodejs/node/raw/04a291abec3b86ed902c5e9919b2a8adf1e07d14/lib%2Fconsole.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fconsole.js?ref=04a291abec3b86ed902c5e9919b2a8adf1e07d14",
            "patch": "@@ -129,7 +129,10 @@ function Console(options /* or: stdout, stderr, ignoreErrors = true */) {\n   var keys = Object.keys(Console.prototype);\n   for (var v = 0; v < keys.length; v++) {\n     var k = keys[v];\n-    this[k] = Console.prototype[k].bind(this);\n+    // We have to bind the methods grabbed from the instance instead of from\n+    // the prototype so that users extending the Console can override them\n+    // from the prototype chain of the subclass.\n+    this[k] = this[k].bind(this);\n   }\n }\n "
        },
        {
            "sha": "e6e1e0db24d23ca60656d06a8340ec7c4910584e",
            "filename": "test/parallel/test-console-instance.js",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/04a291abec3b86ed902c5e9919b2a8adf1e07d14/test%2Fparallel%2Ftest-console-instance.js",
            "raw_url": "https://github.com/nodejs/node/raw/04a291abec3b86ed902c5e9919b2a8adf1e07d14/test%2Fparallel%2Ftest-console-instance.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-console-instance.js?ref=04a291abec3b86ed902c5e9919b2a8adf1e07d14",
            "patch": "@@ -105,10 +105,16 @@ out.write = err.write = (d) => {};\n {\n   class MyConsole extends Console {\n     hello() {}\n+    // See if the methods on Console.prototype are overridable.\n+    log() { return 'overridden'; }\n   }\n   const myConsole = new MyConsole(process.stdout);\n   assert.strictEqual(typeof myConsole.hello, 'function');\n   assert.ok(myConsole instanceof Console);\n+  assert.strictEqual(myConsole.log(), 'overridden');\n+\n+  const log = myConsole.log;\n+  assert.strictEqual(log(), 'overridden');\n }\n \n // Instance that does not ignore the stream errors."
        }
    ],
    "stats": {
        "total": 11,
        "additions": 10,
        "deletions": 1
    }
}