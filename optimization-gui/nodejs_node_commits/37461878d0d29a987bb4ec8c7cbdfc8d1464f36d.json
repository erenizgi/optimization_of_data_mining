{
    "author": "JacksonTian",
    "message": "fs: use _final() for fs.WriteStream\n\nuse _final() method instead of once 'finish' event.\n\nPR-URL: https://github.com/nodejs/node/pull/20562\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "37461878d0d29a987bb4ec8c7cbdfc8d1464f36d",
    "files": [
        {
            "sha": "8a5ee87fbaa3f8a2c92462c98504c70f42c4c22e",
            "filename": "lib/fs.js",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/37461878d0d29a987bb4ec8c7cbdfc8d1464f36d/lib%2Ffs.js",
            "raw_url": "https://github.com/nodejs/node/raw/37461878d0d29a987bb4ec8c7cbdfc8d1464f36d/lib%2Ffs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ffs.js?ref=37461878d0d29a987bb4ec8c7cbdfc8d1464f36d",
            "patch": "@@ -2214,17 +2214,17 @@ function WriteStream(path, options) {\n \n   if (typeof this.fd !== 'number')\n     this.open();\n-\n-  // dispose on finish.\n-  this.once('finish', function() {\n-    if (this.autoClose) {\n-      this.destroy();\n-    }\n-  });\n }\n \n fs.FileWriteStream = fs.WriteStream; // support the legacy name\n \n+WriteStream.prototype._final = function(callback) {\n+  if (this.autoClose) {\n+    this.destroy();\n+  }\n+\n+  callback();\n+};\n \n WriteStream.prototype.open = function() {\n   fs.open(this.path, this.flags, this.mode, (er, fd) => {"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 7,
        "deletions": 7
    }
}