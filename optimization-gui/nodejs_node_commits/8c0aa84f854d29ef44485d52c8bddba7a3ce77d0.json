{
    "author": "Trott",
    "message": "test: split out http2 from test-stream-pipeline\n\nSplitting out the http2 portion of the test has a few benfits:\n\n* We don't skip the rest of the tests if `node` is compiled without\n  crypto.\n* We can find out if the http2 portion of the test is responsible for\n  the timeouts reported in issue 24456.\n\nRefs: https://github.com/nodejs/node/issues/24456\n\nPR-URL: https://github.com/nodejs/node/pull/24631\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "8c0aa84f854d29ef44485d52c8bddba7a3ce77d0",
    "files": [
        {
            "sha": "cfc4e36e9a565fea3a7ead70184ea3bf967b29dd",
            "filename": "test/parallel/parallel.status",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/8c0aa84f854d29ef44485d52c8bddba7a3ce77d0/test%2Fparallel%2Fparallel.status",
            "raw_url": "https://github.com/nodejs/node/raw/8c0aa84f854d29ef44485d52c8bddba7a3ce77d0/test%2Fparallel%2Fparallel.status",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Fparallel.status?ref=8c0aa84f854d29ef44485d52c8bddba7a3ce77d0",
            "patch": "@@ -12,6 +12,8 @@ test-net-connect-options-port: PASS,FLAKY\n test-http2-pipe: PASS,FLAKY\n test-worker-syntax-error: PASS,FLAKY\n test-worker-syntax-error-file: PASS,FLAKY\n+# https://github.com/nodejs/node/issues/24456\n+test-stream-pipeline-http2: PASS,FLAKY\n \n [$system==linux]\n "
        },
        {
            "sha": "d7ff08888afb8a8be1f1b861b65741ee99dbbc92",
            "filename": "test/parallel/test-stream-pipeline-http2.js",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/8c0aa84f854d29ef44485d52c8bddba7a3ce77d0/test%2Fparallel%2Ftest-stream-pipeline-http2.js",
            "raw_url": "https://github.com/nodejs/node/raw/8c0aa84f854d29ef44485d52c8bddba7a3ce77d0/test%2Fparallel%2Ftest-stream-pipeline-http2.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stream-pipeline-http2.js?ref=8c0aa84f854d29ef44485d52c8bddba7a3ce77d0",
            "patch": "@@ -0,0 +1,36 @@\n+'use strict';\n+\n+const common = require('../common');\n+if (!common.hasCrypto)\n+  common.skip('missing crypto');\n+const { Readable, pipeline } = require('stream');\n+const http2 = require('http2');\n+\n+{\n+  const server = http2.createServer((req, res) => {\n+    pipeline(req, res, common.mustCall());\n+  });\n+\n+  server.listen(0, () => {\n+    const url = `http://localhost:${server.address().port}`;\n+    const client = http2.connect(url);\n+    const req = client.request({ ':method': 'POST' });\n+\n+    const rs = new Readable({\n+      read() {\n+        rs.push('hello');\n+      }\n+    });\n+\n+    pipeline(rs, req, common.mustCall((err) => {\n+      server.close();\n+      client.close();\n+    }));\n+\n+    let cnt = 10;\n+    req.on('data', (data) => {\n+      cnt--;\n+      if (cnt === 0) rs.destroy();\n+    });\n+  });\n+}"
        },
        {
            "sha": "34928794cdc3967abf7f8b83fc7937ec7c336899",
            "filename": "test/parallel/test-stream-pipeline.js",
            "status": "modified",
            "additions": 0,
            "deletions": 32,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/8c0aa84f854d29ef44485d52c8bddba7a3ce77d0/test%2Fparallel%2Ftest-stream-pipeline.js",
            "raw_url": "https://github.com/nodejs/node/raw/8c0aa84f854d29ef44485d52c8bddba7a3ce77d0/test%2Fparallel%2Ftest-stream-pipeline.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stream-pipeline.js?ref=8c0aa84f854d29ef44485d52c8bddba7a3ce77d0",
            "patch": "@@ -1,12 +1,9 @@\n 'use strict';\n \n const common = require('../common');\n-if (!common.hasCrypto)\n-  common.skip('missing crypto');\n const { Stream, Writable, Readable, Transform, pipeline } = require('stream');\n const assert = require('assert');\n const http = require('http');\n-const http2 = require('http2');\n const { promisify } = require('util');\n \n {\n@@ -275,35 +272,6 @@ const { promisify } = require('util');\n   });\n }\n \n-{\n-  const server = http2.createServer((req, res) => {\n-    pipeline(req, res, common.mustCall());\n-  });\n-\n-  server.listen(0, () => {\n-    const url = `http://localhost:${server.address().port}`;\n-    const client = http2.connect(url);\n-    const req = client.request({ ':method': 'POST' });\n-\n-    const rs = new Readable({\n-      read() {\n-        rs.push('hello');\n-      }\n-    });\n-\n-    pipeline(rs, req, common.mustCall((err) => {\n-      server.close();\n-      client.close();\n-    }));\n-\n-    let cnt = 10;\n-    req.on('data', (data) => {\n-      cnt--;\n-      if (cnt === 0) rs.destroy();\n-    });\n-  });\n-}\n-\n {\n   const makeTransform = () => {\n     const tr = new Transform({"
        }
    ],
    "stats": {
        "total": 70,
        "additions": 38,
        "deletions": 32
    }
}