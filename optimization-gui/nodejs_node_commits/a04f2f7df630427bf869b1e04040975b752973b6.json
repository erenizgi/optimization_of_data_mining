{
    "author": "BridgeAR",
    "message": "util: escape symbol and non-enumerable keys\n\nThese keys require escaping as they might also contain line breaks\nand other special characters.\n\nPR-URL: https://github.com/nodejs/node/pull/22300\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>",
    "sha": "a04f2f7df630427bf869b1e04040975b752973b6",
    "files": [
        {
            "sha": "e9b3fa663caf665adaf15bb476bfe6e58c5484de",
            "filename": "lib/util.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/a04f2f7df630427bf869b1e04040975b752973b6/lib%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/a04f2f7df630427bf869b1e04040975b752973b6/lib%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Futil.js?ref=a04f2f7df630427bf869b1e04040975b752973b6",
            "patch": "@@ -1256,9 +1256,10 @@ function formatProperty(ctx, value, recurseTimes, key, array) {\n     return str;\n   }\n   if (typeof key === 'symbol') {\n-    name = `[${ctx.stylize(key.toString(), 'symbol')}]`;\n+    const tmp = key.toString().replace(strEscapeSequencesReplacer, escapeFn);\n+    name = `[${ctx.stylize(tmp, 'symbol')}]`;\n   } else if (desc.enumerable === false) {\n-    name = `[${key}]`;\n+    name = `[${key.replace(strEscapeSequencesReplacer, escapeFn)}]`;\n   } else if (keyStrRegExp.test(key)) {\n     name = ctx.stylize(key, 'name');\n   } else {"
        },
        {
            "sha": "6501187528b849277e05ee2a12896934024be1de",
            "filename": "test/parallel/test-util-inspect.js",
            "status": "modified",
            "additions": 15,
            "deletions": 5,
            "changes": 20,
            "blob_url": "https://github.com/nodejs/node/blob/a04f2f7df630427bf869b1e04040975b752973b6/test%2Fparallel%2Ftest-util-inspect.js",
            "raw_url": "https://github.com/nodejs/node/raw/a04f2f7df630427bf869b1e04040975b752973b6/test%2Fparallel%2Ftest-util-inspect.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-util-inspect.js?ref=a04f2f7df630427bf869b1e04040975b752973b6",
            "patch": "@@ -838,22 +838,22 @@ if (typeof Symbol !== 'undefined') {\n   const options = { showHidden: true };\n   let subject = {};\n \n-  subject[Symbol('symbol')] = 42;\n+  subject[Symbol('sym\\nbol')] = 42;\n \n-  assert.strictEqual(util.inspect(subject), '{ [Symbol(symbol)]: 42 }');\n+  assert.strictEqual(util.inspect(subject), '{ [Symbol(sym\\\\nbol)]: 42 }');\n   assert.strictEqual(\n     util.inspect(subject, options),\n-    '{ [Symbol(symbol)]: 42 }'\n+    '{ [Symbol(sym\\\\nbol)]: 42 }'\n   );\n \n   Object.defineProperty(\n     subject,\n     Symbol(),\n     { enumerable: false, value: 'non-enum' });\n-  assert.strictEqual(util.inspect(subject), '{ [Symbol(symbol)]: 42 }');\n+  assert.strictEqual(util.inspect(subject), '{ [Symbol(sym\\\\nbol)]: 42 }');\n   assert.strictEqual(\n     util.inspect(subject, options),\n-    \"{ [Symbol(symbol)]: 42, [Symbol()]: 'non-enum' }\"\n+    \"{ [Symbol(sym\\\\nbol)]: 42, [Symbol()]: 'non-enum' }\"\n   );\n \n   subject = [1, 2, 3];\n@@ -1637,3 +1637,13 @@ assert.strictEqual(inspect(Object(-1n)), '[BigInt: -1n]');\n assert.strictEqual(inspect(Object(13n)), '[BigInt: 13n]');\n assert.strictEqual(inspect(new BigInt64Array([0n])), 'BigInt64Array [ 0n ]');\n assert.strictEqual(inspect(new BigUint64Array([0n])), 'BigUint64Array [ 0n ]');\n+\n+// Verify non-enumerable keys get escaped.\n+{\n+  const obj = {};\n+  Object.defineProperty(obj, 'Non\\nenumerable\\tkey', { value: true });\n+  assert.strictEqual(\n+    util.inspect(obj, { showHidden: true }),\n+    '{ [Non\\\\nenumerable\\\\tkey]: true }'\n+  );\n+}"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 18,
        "deletions": 7
    }
}