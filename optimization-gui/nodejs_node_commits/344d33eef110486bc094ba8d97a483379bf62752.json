{
    "author": "danbev",
    "message": "src: fix v8 compiler warnings in src\n\nThis commit changes the code to use the maybe version.\n\nPR-URL: https://github.com/nodejs/node/pull/24246\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "344d33eef110486bc094ba8d97a483379bf62752",
    "files": [
        {
            "sha": "e5d0319fa1737347f7694f97cd70d511c15b6d23",
            "filename": "src/cares_wrap.cc",
            "status": "modified",
            "additions": 30,
            "deletions": 19,
            "changes": 49,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fcares_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fcares_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fcares_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -1851,7 +1851,7 @@ void AfterGetAddrInfo(uv_getaddrinfo_t* req, int status, struct addrinfo* res) {\n           continue;\n \n         Local<String> s = OneByteString(env->isolate(), ip);\n-        results->Set(n, s);\n+        results->Set(env->context(), n, s).FromJust();\n         n++;\n       }\n     };\n@@ -2053,10 +2053,12 @@ void GetServers(const FunctionCallbackInfo<Value>& args) {\n     CHECK_EQ(err, 0);\n \n     Local<Array> ret = Array::New(env->isolate(), 2);\n-    ret->Set(0, OneByteString(env->isolate(), ip));\n-    ret->Set(1, Integer::New(env->isolate(), cur->udp_port));\n+    ret->Set(env->context(), 0, OneByteString(env->isolate(), ip)).FromJust();\n+    ret->Set(env->context(),\n+             1,\n+             Integer::New(env->isolate(), cur->udp_port)).FromJust();\n \n-    server_array->Set(i, ret);\n+    server_array->Set(env->context(), i, ret).FromJust();\n   }\n \n   ares_free_data(servers);\n@@ -2179,40 +2181,49 @@ void Initialize(Local<Object> target,\n \n   env->SetMethod(target, \"strerror\", StrError);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"AF_INET\"),\n-              Integer::New(env->isolate(), AF_INET));\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"AF_INET6\"),\n-              Integer::New(env->isolate(), AF_INET6));\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"AF_UNSPEC\"),\n-              Integer::New(env->isolate(), AF_UNSPEC));\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"AI_ADDRCONFIG\"),\n-              Integer::New(env->isolate(), AI_ADDRCONFIG));\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"AI_V4MAPPED\"),\n-              Integer::New(env->isolate(), AI_V4MAPPED));\n+  target->Set(env->context(), FIXED_ONE_BYTE_STRING(env->isolate(), \"AF_INET\"),\n+              Integer::New(env->isolate(), AF_INET)).FromJust();\n+  target->Set(env->context(), FIXED_ONE_BYTE_STRING(env->isolate(), \"AF_INET6\"),\n+              Integer::New(env->isolate(), AF_INET6)).FromJust();\n+  target->Set(env->context(), FIXED_ONE_BYTE_STRING(env->isolate(),\n+                                                    \"AF_UNSPEC\"),\n+              Integer::New(env->isolate(), AF_UNSPEC)).FromJust();\n+  target->Set(env->context(), FIXED_ONE_BYTE_STRING(env->isolate(),\n+                                                    \"AI_ADDRCONFIG\"),\n+              Integer::New(env->isolate(), AI_ADDRCONFIG)).FromJust();\n+  target->Set(env->context(), FIXED_ONE_BYTE_STRING(env->isolate(),\n+                                                    \"AI_V4MAPPED\"),\n+              Integer::New(env->isolate(), AI_V4MAPPED)).FromJust();\n \n   Local<FunctionTemplate> aiw =\n       BaseObject::MakeLazilyInitializedJSTemplate(env);\n   aiw->Inherit(AsyncWrap::GetConstructorTemplate(env));\n   Local<String> addrInfoWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"GetAddrInfoReqWrap\");\n   aiw->SetClassName(addrInfoWrapString);\n-  target->Set(addrInfoWrapString, aiw->GetFunction(context).ToLocalChecked());\n+  target->Set(env->context(),\n+              addrInfoWrapString,\n+              aiw->GetFunction(context).ToLocalChecked()).FromJust();\n \n   Local<FunctionTemplate> niw =\n       BaseObject::MakeLazilyInitializedJSTemplate(env);\n   niw->Inherit(AsyncWrap::GetConstructorTemplate(env));\n   Local<String> nameInfoWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"GetNameInfoReqWrap\");\n   niw->SetClassName(nameInfoWrapString);\n-  target->Set(nameInfoWrapString, niw->GetFunction(context).ToLocalChecked());\n+  target->Set(env->context(),\n+              nameInfoWrapString,\n+              niw->GetFunction(context).ToLocalChecked()).FromJust();\n \n   Local<FunctionTemplate> qrw =\n       BaseObject::MakeLazilyInitializedJSTemplate(env);\n   qrw->Inherit(AsyncWrap::GetConstructorTemplate(env));\n   Local<String> queryWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"QueryReqWrap\");\n   qrw->SetClassName(queryWrapString);\n-  target->Set(queryWrapString, qrw->GetFunction(context).ToLocalChecked());\n+  target->Set(env->context(),\n+              queryWrapString,\n+              qrw->GetFunction(context).ToLocalChecked()).FromJust();\n \n   Local<FunctionTemplate> channel_wrap =\n       env->NewFunctionTemplate(ChannelWrap::New);\n@@ -2239,8 +2250,8 @@ void Initialize(Local<Object> target,\n   Local<String> channelWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"ChannelWrap\");\n   channel_wrap->SetClassName(channelWrapString);\n-  target->Set(channelWrapString,\n-              channel_wrap->GetFunction(context).ToLocalChecked());\n+  target->Set(env->context(), channelWrapString,\n+              channel_wrap->GetFunction(context).ToLocalChecked()).FromJust();\n }\n \n }  // anonymous namespace"
        },
        {
            "sha": "4fdfcafaa142b698e9e90e4cbde5baf769d0e3b2",
            "filename": "src/env.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fenv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fenv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -755,7 +755,9 @@ void CollectExceptionInfo(Environment* env,\n                           const char* message,\n                           const char* path,\n                           const char* dest) {\n-  obj->Set(env->errno_string(), v8::Integer::New(env->isolate(), errorno));\n+  obj->Set(env->context(),\n+           env->errno_string(),\n+           v8::Integer::New(env->isolate(), errorno)).FromJust();\n \n   obj->Set(env->context(), env->code_string(),\n            OneByteString(env->isolate(), err_string)).FromJust();"
        },
        {
            "sha": "7bbee45467ff35bdbbc1a7211d21669a78251f7a",
            "filename": "src/exceptions.cc",
            "status": "modified",
            "additions": 15,
            "deletions": 9,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fexceptions.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fexceptions.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fexceptions.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -51,15 +51,19 @@ Local<Value> ErrnoException(Isolate* isolate,\n   e = Exception::Error(cons);\n \n   Local<Object> obj = e.As<Object>();\n-  obj->Set(env->errno_string(), Integer::New(isolate, errorno));\n-  obj->Set(env->code_string(), estring);\n+  obj->Set(env->context(),\n+           env->errno_string(),\n+           Integer::New(isolate, errorno)).FromJust();\n+  obj->Set(env->context(), env->code_string(), estring).FromJust();\n \n   if (path_string.IsEmpty() == false) {\n-    obj->Set(env->path_string(), path_string);\n+    obj->Set(env->context(), env->path_string(), path_string).FromJust();\n   }\n \n   if (syscall != nullptr) {\n-    obj->Set(env->syscall_string(), OneByteString(isolate, syscall));\n+    obj->Set(env->context(),\n+             env->syscall_string(),\n+             OneByteString(isolate, syscall)).FromJust();\n   }\n \n   return e;\n@@ -132,13 +136,15 @@ Local<Value> UVException(Isolate* isolate,\n     Exception::Error(js_msg)->ToObject(isolate->GetCurrentContext())\n       .ToLocalChecked();\n \n-  e->Set(env->errno_string(), Integer::New(isolate, errorno));\n-  e->Set(env->code_string(), js_code);\n-  e->Set(env->syscall_string(), js_syscall);\n+  e->Set(env->context(),\n+         env->errno_string(),\n+         Integer::New(isolate, errorno)).FromJust();\n+  e->Set(env->context(), env->code_string(), js_code).FromJust();\n+  e->Set(env->context(), env->syscall_string(), js_syscall).FromJust();\n   if (!js_path.IsEmpty())\n-    e->Set(env->path_string(), js_path);\n+    e->Set(env->context(), env->path_string(), js_path).FromJust();\n   if (!js_dest.IsEmpty())\n-    e->Set(env->dest_string(), js_dest);\n+    e->Set(env->context(), env->dest_string(), js_dest).FromJust();\n \n   return e;\n }"
        },
        {
            "sha": "057445776a5255a5ae7138b8e995fdadaa2f638d",
            "filename": "src/fs_event_wrap.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Ffs_event_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Ffs_event_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ffs_event_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -119,7 +119,9 @@ void FSEventWrap::Initialize(Local<Object> target,\n       Local<FunctionTemplate>(),\n       static_cast<PropertyAttribute>(ReadOnly | DontDelete | v8::DontEnum));\n \n-  target->Set(fsevent_string, t->GetFunction(context).ToLocalChecked());\n+  target->Set(env->context(),\n+              fsevent_string,\n+              t->GetFunction(context).ToLocalChecked()).FromJust();\n }\n \n "
        },
        {
            "sha": "2d07b11b636ef9d663b2102e851c5ffb3c8f7a74",
            "filename": "src/js_stream.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fjs_stream.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fjs_stream.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fjs_stream.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -118,7 +118,7 @@ int JSStream::DoWrite(WriteWrap* w,\n   Local<Object> buf;\n   for (size_t i = 0; i < count; i++) {\n     buf = Buffer::Copy(env(), bufs[i].base, bufs[i].len).ToLocalChecked();\n-    bufs_arr->Set(i, buf);\n+    bufs_arr->Set(env()->context(), i, buf).FromJust();\n   }\n \n   Local<Value> argv[] = {\n@@ -210,7 +210,9 @@ void JSStream::Initialize(Local<Object> target,\n   env->SetProtoMethod(t, \"emitEOF\", EmitEOF);\n \n   StreamBase::AddMethods<JSStream>(env, t);\n-  target->Set(jsStreamString, t->GetFunction(context).ToLocalChecked());\n+  target->Set(env->context(),\n+              jsStreamString,\n+              t->GetFunction(context).ToLocalChecked()).FromJust();\n }\n \n }  // namespace node"
        },
        {
            "sha": "5443b2e07dc85655ffce55f3a5bf4ed3ded95bfb",
            "filename": "src/module_wrap.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fmodule_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fmodule_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fmodule_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -837,8 +837,8 @@ void ModuleWrap::Initialize(Local<Object> target,\n   env->SetProtoMethodNoSideEffect(tpl, \"getStaticDependencySpecifiers\",\n                                   GetStaticDependencySpecifiers);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(isolate, \"ModuleWrap\"),\n-              tpl->GetFunction(context).ToLocalChecked());\n+  target->Set(env->context(), FIXED_ONE_BYTE_STRING(isolate, \"ModuleWrap\"),\n+              tpl->GetFunction(context).ToLocalChecked()).FromJust();\n   env->SetMethod(target, \"resolve\", Resolve);\n   env->SetMethod(target,\n                  \"setImportModuleDynamicallyCallback\","
        },
        {
            "sha": "bfc50983911f2d69bb9dbf3c19527687d2a7ecf5",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 45,
            "deletions": 20,
            "changes": 65,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -690,7 +690,8 @@ MaybeLocal<Value> MakeCallback(Isolate* isolate,\n                                int argc,\n                                Local<Value> argv[],\n                                async_context asyncContext) {\n-  Local<Value> callback_v = recv->Get(symbol);\n+  Local<Value> callback_v = recv->Get(isolate->GetCurrentContext(),\n+                                      symbol).ToLocalChecked();\n   if (callback_v.IsEmpty()) return Local<Value>();\n   if (!callback_v->IsFunction()) return Local<Value>();\n   Local<Function> callback = callback_v.As<Function>();\n@@ -1264,7 +1265,7 @@ static void GetLinkedBinding(const FunctionCallbackInfo<Value>& args) {\n   Local<Object> exports = Object::New(env->isolate());\n   Local<String> exports_prop = String::NewFromUtf8(env->isolate(), \"exports\",\n       NewStringType::kNormal).ToLocalChecked();\n-  module->Set(exports_prop, exports);\n+  module->Set(env->context(), exports_prop, exports).FromJust();\n \n   if (mod->nm_context_register_func != nullptr) {\n     mod->nm_context_register_func(exports,\n@@ -1277,7 +1278,8 @@ static void GetLinkedBinding(const FunctionCallbackInfo<Value>& args) {\n     return env->ThrowError(\"Linked module has no declared entry point.\");\n   }\n \n-  auto effective_exports = module->Get(exports_prop);\n+  auto effective_exports = module->Get(env->context(),\n+                                       exports_prop).ToLocalChecked();\n \n   args.GetReturnValue().Set(effective_exports);\n }\n@@ -1292,21 +1294,35 @@ static Local<Object> GetFeatures(Environment* env) {\n   Local<Value> debug = False(env->isolate());\n #endif  // defined(DEBUG) && DEBUG\n \n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"debug\"), debug);\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"uv\"), True(env->isolate()));\n+  obj->Set(env->context(),\n+           FIXED_ONE_BYTE_STRING(env->isolate(), \"debug\"),\n+           debug).FromJust();\n+  obj->Set(env->context(),\n+           FIXED_ONE_BYTE_STRING(env->isolate(), \"uv\"),\n+           True(env->isolate())).FromJust();\n   // TODO(bnoordhuis) ping libuv\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"ipv6\"), True(env->isolate()));\n+  obj->Set(env->context(),\n+           FIXED_ONE_BYTE_STRING(env->isolate(), \"ipv6\"),\n+           True(env->isolate())).FromJust();\n \n #ifdef HAVE_OPENSSL\n   Local<Boolean> have_openssl = True(env->isolate());\n #else\n   Local<Boolean> have_openssl = False(env->isolate());\n #endif\n \n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_alpn\"), have_openssl);\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_sni\"), have_openssl);\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_ocsp\"), have_openssl);\n-  obj->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"tls\"), have_openssl);\n+  obj->Set(env->context(),\n+           FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_alpn\"),\n+           have_openssl).FromJust();\n+  obj->Set(env->context(),\n+           FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_sni\"),\n+           have_openssl).FromJust();\n+  obj->Set(env->context(),\n+           FIXED_ONE_BYTE_STRING(env->isolate(), \"tls_ocsp\"),\n+           have_openssl).FromJust();\n+  obj->Set(env->context(),\n+           FIXED_ONE_BYTE_STRING(env->isolate(), \"tls\"),\n+           have_openssl).FromJust();\n \n   return scope.Escape(obj);\n }\n@@ -1468,7 +1484,9 @@ void SetupProcessObject(Environment* env,\n                             NewStringType::kNormal).ToLocalChecked())\n         .FromJust();\n   }\n-  process->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"argv\"), arguments);\n+  process->Set(env->context(),\n+               FIXED_ONE_BYTE_STRING(env->isolate(), \"argv\"),\n+               arguments).FromJust();\n \n   // process.execArgv\n   Local<Array> exec_arguments = Array::New(env->isolate(), exec_args.size());\n@@ -1478,8 +1496,9 @@ void SetupProcessObject(Environment* env,\n                             NewStringType::kNormal).ToLocalChecked())\n         .FromJust();\n   }\n-  process->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"execArgv\"),\n-               exec_arguments);\n+  process->Set(env->context(),\n+               FIXED_ONE_BYTE_STRING(env->isolate(), \"execArgv\"),\n+               exec_arguments).FromJust();\n \n   // create process.env\n   Local<ObjectTemplate> process_env_template =\n@@ -1494,7 +1513,9 @@ void SetupProcessObject(Environment* env,\n \n   Local<Object> process_env =\n       process_env_template->NewInstance(env->context()).ToLocalChecked();\n-  process->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"env\"), process_env);\n+  process->Set(env->context(),\n+               FIXED_ONE_BYTE_STRING(env->isolate(), \"env\"),\n+               process_env).FromJust();\n \n   READONLY_PROPERTY(process, \"pid\",\n                     Integer::New(env->isolate(), uv_os_getpid()));\n@@ -1539,7 +1560,7 @@ void SetupProcessObject(Environment* env,\n                                                  preload_modules[i].c_str(),\n                                                  NewStringType::kNormal)\n                                  .ToLocalChecked();\n-      array->Set(i, module);\n+      array->Set(env->context(), i, module).FromJust();\n     }\n     READONLY_PROPERTY(process,\n                       \"_preload_modules\",\n@@ -1629,8 +1650,9 @@ void SetupProcessObject(Environment* env,\n     exec_path_value = String::NewFromUtf8(env->isolate(), args[0].c_str(),\n         NewStringType::kInternalized).ToLocalChecked();\n   }\n-  process->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"execPath\"),\n-               exec_path_value);\n+  process->Set(env->context(),\n+               FIXED_ONE_BYTE_STRING(env->isolate(), \"execPath\"),\n+               exec_path_value).FromJust();\n   delete[] exec_path;\n \n   auto debug_port_string = FIXED_ONE_BYTE_STRING(env->isolate(), \"debugPort\");\n@@ -1783,7 +1805,9 @@ void LoadEnvironment(Environment* env) {\n \n   // Expose the global object as a property on itself\n   // (Allows you to set stuff on `global` from anywhere in JavaScript.)\n-  global->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"global\"), global);\n+  global->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"global\"),\n+              global).FromJust();\n \n   // Create binding loaders\n   Local<Function> get_binding_fn =\n@@ -2344,8 +2368,9 @@ int EmitExit(Environment* env) {\n   HandleScope handle_scope(env->isolate());\n   Context::Scope context_scope(env->context());\n   Local<Object> process_object = env->process_object();\n-  process_object->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"_exiting\"),\n-                      True(env->isolate()));\n+  process_object->Set(env->context(),\n+                      FIXED_ONE_BYTE_STRING(env->isolate(), \"_exiting\"),\n+                      True(env->isolate())).FromJust();\n \n   Local<String> exit_code = env->exit_code_string();\n   int code = process_object->Get(env->context(), exit_code).ToLocalChecked()"
        },
        {
            "sha": "3b028b52aa75cc4199529e9ebd1efaa1aeb0c184",
            "filename": "src/node_constants.cc",
            "status": "modified",
            "additions": 27,
            "deletions": 9,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_constants.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_constants.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_constants.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -1347,15 +1347,33 @@ void DefineConstants(v8::Isolate* isolate, Local<Object> target) {\n   // Define libuv constants.\n   NODE_DEFINE_CONSTANT(os_constants, UV_UDP_REUSEADDR);\n \n-  os_constants->Set(OneByteString(isolate, \"dlopen\"), dlopen_constants);\n-  os_constants->Set(OneByteString(isolate, \"errno\"), err_constants);\n-  os_constants->Set(OneByteString(isolate, \"signals\"), sig_constants);\n-  os_constants->Set(OneByteString(isolate, \"priority\"), priority_constants);\n-  target->Set(OneByteString(isolate, \"os\"), os_constants);\n-  target->Set(OneByteString(isolate, \"fs\"), fs_constants);\n-  target->Set(OneByteString(isolate, \"crypto\"), crypto_constants);\n-  target->Set(OneByteString(isolate, \"zlib\"), zlib_constants);\n-  target->Set(OneByteString(isolate, \"trace\"), trace_constants);\n+  os_constants->Set(env->context(),\n+                    OneByteString(isolate, \"dlopen\"),\n+                    dlopen_constants).FromJust();\n+  os_constants->Set(env->context(),\n+                    OneByteString(isolate, \"errno\"),\n+                    err_constants).FromJust();\n+  os_constants->Set(env->context(),\n+                    OneByteString(isolate, \"signals\"),\n+                    sig_constants).FromJust();\n+  os_constants->Set(env->context(),\n+                    OneByteString(isolate, \"priority\"),\n+                    priority_constants).FromJust();\n+  target->Set(env->context(),\n+              OneByteString(isolate, \"os\"),\n+              os_constants).FromJust();\n+  target->Set(env->context(),\n+              OneByteString(isolate, \"fs\"),\n+              fs_constants).FromJust();\n+  target->Set(env->context(),\n+              OneByteString(isolate, \"crypto\"),\n+              crypto_constants).FromJust();\n+  target->Set(env->context(),\n+              OneByteString(isolate, \"zlib\"),\n+              zlib_constants).FromJust();\n+  target->Set(env->context(),\n+              OneByteString(isolate, \"trace\"),\n+              trace_constants).FromJust();\n }\n \n }  // namespace node"
        },
        {
            "sha": "37afead80896d077c8a7955ca1cb8bab28fb4539",
            "filename": "src/node_contextify.cc",
            "status": "modified",
            "additions": 10,
            "deletions": 6,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_contextify.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_contextify.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_contextify.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -392,7 +392,7 @@ void ContextifyContext::PropertySetterCallback(\n     args.GetReturnValue().Set(false);\n   }\n \n-  ctx->sandbox()->Set(property, value);\n+  ctx->sandbox()->Set(ctx->context(), property, value).FromJust();\n }\n \n // static\n@@ -606,8 +606,8 @@ void ContextifyScript::Init(Environment* env, Local<Object> target) {\n   env->SetProtoMethod(script_tmpl, \"runInContext\", RunInContext);\n   env->SetProtoMethod(script_tmpl, \"runInThisContext\", RunInThisContext);\n \n-  target->Set(class_name,\n-              script_tmpl->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(), class_name,\n+      script_tmpl->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   env->set_script_context_constructor_template(script_tmpl);\n }\n \n@@ -728,8 +728,9 @@ void ContextifyScript::New(const FunctionCallbackInfo<Value>& args) {\n \n   if (compile_options == ScriptCompiler::kConsumeCodeCache) {\n     args.This()->Set(\n+        env->context(),\n         env->cached_data_rejected_string(),\n-        Boolean::New(isolate, source.GetCachedData()->rejected));\n+        Boolean::New(isolate, source.GetCachedData()->rejected)).FromJust();\n   } else if (produce_cached_data) {\n     const ScriptCompiler::CachedData* cached_data =\n       ScriptCompiler::CreateCodeCache(v8_script.ToLocalChecked());\n@@ -739,11 +740,14 @@ void ContextifyScript::New(const FunctionCallbackInfo<Value>& args) {\n           env,\n           reinterpret_cast<const char*>(cached_data->data),\n           cached_data->length);\n-      args.This()->Set(env->cached_data_string(), buf.ToLocalChecked());\n+      args.This()->Set(env->context(),\n+                       env->cached_data_string(),\n+                       buf.ToLocalChecked()).FromJust();\n     }\n     args.This()->Set(\n+        env->context(),\n         env->cached_data_produced_string(),\n-        Boolean::New(isolate, cached_data_produced));\n+        Boolean::New(isolate, cached_data_produced)).FromJust();\n   }\n   TRACE_EVENT_NESTABLE_ASYNC_END0(\n       TRACING_CATEGORY_NODE2(vm, script),"
        },
        {
            "sha": "d5e0c4f244d5b33e58c046fee862632d6ee189fe",
            "filename": "src/node_crypto.cc",
            "status": "modified",
            "additions": 40,
            "deletions": 23,
            "changes": 63,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_crypto.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_crypto.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -379,8 +379,8 @@ void SecureContext::Initialize(Environment* env, Local<Object> target) {\n       Local<FunctionTemplate>(),\n       static_cast<PropertyAttribute>(ReadOnly | DontDelete));\n \n-  target->Set(secureContextString,\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(), secureContextString,\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   env->set_secure_context_constructor_template(t);\n }\n \n@@ -1276,18 +1276,24 @@ int SecureContext::TicketKeyCallback(SSL* ssl,\n   Local<Array> arr = ret.As<Array>();\n \n   int r =\n-      arr->Get(kTicketKeyReturnIndex)->Int32Value(env->context()).FromJust();\n+      arr->Get(env->context(),\n+               kTicketKeyReturnIndex).ToLocalChecked()\n+               ->Int32Value(env->context()).FromJust();\n   if (r < 0)\n     return r;\n \n-  Local<Value> hmac = arr->Get(kTicketKeyHMACIndex);\n-  Local<Value> aes = arr->Get(kTicketKeyAESIndex);\n+  Local<Value> hmac = arr->Get(env->context(),\n+                               kTicketKeyHMACIndex).ToLocalChecked();\n+  Local<Value> aes = arr->Get(env->context(),\n+                              kTicketKeyAESIndex).ToLocalChecked();\n   if (Buffer::Length(aes) != kTicketPartSize)\n     return -1;\n \n   if (enc) {\n-    Local<Value> name_val = arr->Get(kTicketKeyNameIndex);\n-    Local<Value> iv_val = arr->Get(kTicketKeyIVIndex);\n+    Local<Value> name_val = arr->Get(env->context(),\n+                                     kTicketKeyNameIndex).ToLocalChecked();\n+    Local<Value> iv_val = arr->Get(env->context(),\n+                                   kTicketKeyIVIndex).ToLocalChecked();\n \n     if (Buffer::Length(name_val) != kTicketPartSize ||\n         Buffer::Length(iv_val) != kTicketPartSize) {\n@@ -1667,7 +1673,7 @@ static Local<Object> X509ToObject(Environment* env, X509* cert) {\n     unsigned char* pubserialized =\n         reinterpret_cast<unsigned char*>(Buffer::Data(pubbuff));\n     i2d_RSA_PUBKEY(rsa.get(), &pubserialized);\n-    info->Set(env->pubkey_string(), pubbuff);\n+    info->Set(env->context(), env->pubkey_string(), pubbuff).FromJust();\n   }\n \n   pkey.reset();\n@@ -2422,7 +2428,8 @@ void SSLWrap<Base>::CertCbDone(const FunctionCallbackInfo<Value>& args) {\n   CHECK(w->is_waiting_cert_cb() && w->cert_cb_running_);\n \n   Local<Object> object = w->object();\n-  Local<Value> ctx = object->Get(env->sni_context_string());\n+  Local<Value> ctx = object->Get(env->context(),\n+                                 env->sni_context_string()).ToLocalChecked();\n   Local<FunctionTemplate> cons = env->secure_context_constructor_template();\n \n   // Not an object, probably undefined or null\n@@ -2586,8 +2593,9 @@ void CipherBase::Initialize(Environment* env, Local<Object> target) {\n   env->SetProtoMethod(t, \"setAuthTag\", SetAuthTag);\n   env->SetProtoMethod(t, \"setAAD\", SetAAD);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"CipherBase\"),\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"CipherBase\"),\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n \n@@ -3191,8 +3199,9 @@ void Hmac::Initialize(Environment* env, v8::Local<Object> target) {\n   env->SetProtoMethod(t, \"update\", HmacUpdate);\n   env->SetProtoMethod(t, \"digest\", HmacDigest);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Hmac\"),\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"Hmac\"),\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n \n@@ -3311,8 +3320,9 @@ void Hash::Initialize(Environment* env, v8::Local<Object> target) {\n   env->SetProtoMethod(t, \"update\", HashUpdate);\n   env->SetProtoMethod(t, \"digest\", HashDigest);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Hash\"),\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"Hash\"),\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n \n@@ -3506,8 +3516,9 @@ void Sign::Initialize(Environment* env, v8::Local<Object> target) {\n   env->SetProtoMethod(t, \"update\", SignUpdate);\n   env->SetProtoMethod(t, \"sign\", SignFinal);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Sign\"),\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"Sign\"),\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n \n@@ -3737,8 +3748,9 @@ void Verify::Initialize(Environment* env, v8::Local<Object> target) {\n   env->SetProtoMethod(t, \"update\", VerifyUpdate);\n   env->SetProtoMethod(t, \"verify\", VerifyFinal);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"Verify\"),\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"Verify\"),\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n \n@@ -3974,7 +3986,9 @@ void DiffieHellman::Initialize(Environment* env, Local<Object> target) {\n         Local<FunctionTemplate>(),\n         attributes);\n \n-    target->Set(name, t->GetFunction(env->context()).ToLocalChecked());\n+    target->Set(env->context(),\n+                name,\n+                t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   };\n \n   make(FIXED_ONE_BYTE_STRING(env->isolate(), \"DiffieHellman\"), New);\n@@ -4301,8 +4315,9 @@ void ECDH::Initialize(Environment* env, Local<Object> target) {\n   env->SetProtoMethod(t, \"setPublicKey\", SetPublicKey);\n   env->SetProtoMethod(t, \"setPrivateKey\", SetPrivateKey);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"ECDH\"),\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"ECDH\"),\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n \n@@ -5309,7 +5324,9 @@ static void array_push_back(const TypeName* md,\n                             const char* to,\n                             void* arg) {\n   CipherPushContext* ctx = static_cast<CipherPushContext*>(arg);\n-  ctx->arr->Set(ctx->arr->Length(), OneByteString(ctx->env()->isolate(), from));\n+  ctx->arr->Set(ctx->env()->context(),\n+                ctx->arr->Length(),\n+                OneByteString(ctx->env()->isolate(), from)).FromJust();\n }\n \n "
        },
        {
            "sha": "cd3986cef56a97aa29ec2d0eb466fa9352450246",
            "filename": "src/node_dtrace.cc",
            "status": "modified",
            "additions": 12,
            "deletions": 6,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_dtrace.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_dtrace.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_dtrace.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -65,7 +65,8 @@ using v8::Value;\n         \"expected object for \" #obj \" to contain string member \" #member); \\\n   }                                                                        \\\n   node::Utf8Value _##member(env->isolate(),                                \\\n-      obj->Get(OneByteString(env->isolate(), #member)));                   \\\n+      obj->Get(env->context(),                                             \\\n+               OneByteString(env->isolate(), #member)).ToLocalChecked());  \\\n   if ((*(const char **)valp = *_##member) == nullptr)                      \\\n     *(const char **)valp = \"<unknown>\";\n \n@@ -75,7 +76,8 @@ using v8::Value;\n         env,                                                                   \\\n         \"expected object for \" #obj \" to contain integer member \" #member);    \\\n   }                                                                            \\\n-  *valp = obj->Get(OneByteString(env->isolate(), #member))                     \\\n+  *valp = obj->Get(env->context(),                                             \\\n+                   OneByteString(env->isolate(), #member)).ToLocalChecked()    \\\n               ->Int32Value(env->context())                                     \\\n               .FromJust();\n \n@@ -84,7 +86,8 @@ using v8::Value;\n     return node::THROW_ERR_INVALID_ARG_TYPE(env,                           \\\n         \"expected object for \" #obj \" to contain object member \" #member); \\\n   }                                                                        \\\n-  *valp = Local<Object>::Cast(obj->Get(OneByteString(env->isolate(), #member)));\n+  *valp = Local<Object>::Cast(obj->Get(env->context(),                     \\\n+      OneByteString(env->isolate(), #member)).ToLocalChecked());\n \n #define SLURP_CONNECTION(arg, conn)                                        \\\n   if (!(arg)->IsObject()) {                                                \\\n@@ -94,7 +97,9 @@ using v8::Value;\n   node_dtrace_connection_t conn;                                           \\\n   Local<Object> _##conn = Local<Object>::Cast(arg);                        \\\n   Local<Value> _handle =                                                   \\\n-      (_##conn)->Get(FIXED_ONE_BYTE_STRING(env->isolate(), \"_handle\"));    \\\n+      (_##conn)->Get(env->context(),                                       \\\n+                     FIXED_ONE_BYTE_STRING(env->isolate(), \"_handle\"))     \\\n+                     .ToLocalChecked();                                    \\\n   if (_handle->IsObject()) {                                               \\\n     SLURP_INT(_handle.As<Object>(), fd, &conn.fd);                         \\\n   } else {                                                                 \\\n@@ -173,7 +178,8 @@ void DTRACE_HTTP_SERVER_REQUEST(const FunctionCallbackInfo<Value>& args) {\n         \"expected object for request to contain string member headers\");\n   }\n \n-  Local<Value> strfwdfor = headers->Get(env->x_forwarded_string());\n+  Local<Value> strfwdfor = headers->Get(\n+      env->context(), env->x_forwarded_string()).ToLocalChecked();\n   node::Utf8Value fwdfor(env->isolate(), strfwdfor);\n \n   if (!strfwdfor->IsString() || (req.forwardedFor = *fwdfor) == nullptr)\n@@ -279,7 +285,7 @@ void InitDTrace(Environment* env, Local<Object> target) {\n     Local<Value> val = env->NewFunctionTemplate(tab[i].func)\n                            ->GetFunction(env->context())\n                            .ToLocalChecked();\n-    target->Set(key, val);\n+    target->Set(env->context(), key, val).FromJust();\n   }\n \n #ifdef HAVE_ETW"
        },
        {
            "sha": "d78608bf7bf24c7c034546de7bb39fab025fb5ae",
            "filename": "src/node_errors.cc",
            "status": "modified",
            "additions": 11,
            "deletions": 6,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_errors.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_errors.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_errors.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -198,7 +198,8 @@ void ReportException(Environment* env,\n   } else {\n     Local<Object> err_obj = er->ToObject(env->context()).ToLocalChecked();\n \n-    trace_value = err_obj->Get(env->stack_string());\n+    trace_value = err_obj->Get(env->context(),\n+                               env->stack_string()).ToLocalChecked();\n     arrow =\n         err_obj->GetPrivate(env->context(), env->arrow_message_private_symbol())\n             .ToLocalChecked();\n@@ -223,8 +224,10 @@ void ReportException(Environment* env,\n \n     if (er->IsObject()) {\n       Local<Object> err_obj = er.As<Object>();\n-      message = err_obj->Get(env->message_string());\n-      name = err_obj->Get(FIXED_ONE_BYTE_STRING(env->isolate(), \"name\"));\n+      message = err_obj->Get(env->context(),\n+                             env->message_string()).ToLocalChecked();\n+      name = err_obj->Get(env->context(),\n+          FIXED_ONE_BYTE_STRING(env->isolate(), \"name\")).ToLocalChecked();\n     }\n \n     if (message.IsEmpty() || message->IsUndefined() || name.IsEmpty() ||\n@@ -269,7 +272,8 @@ void DecorateErrorStack(Environment* env, const TryCatch& try_catch) {\n   if (IsExceptionDecorated(env, err_obj)) return;\n \n   AppendExceptionLine(env, exception, try_catch.Message(), CONTEXTIFY_ERROR);\n-  Local<Value> stack = err_obj->Get(env->stack_string());\n+  Local<Value> stack = err_obj->Get(env->context(),\n+                                    env->stack_string()).ToLocalChecked();\n   MaybeLocal<Value> maybe_value =\n       err_obj->GetPrivate(env->context(), env->arrow_message_private_symbol());\n \n@@ -288,7 +292,7 @@ void DecorateErrorStack(Environment* env, const TryCatch& try_catch) {\n                      arrow.As<String>(),\n                      FIXED_ONE_BYTE_STRING(env->isolate(), \"\\n\")),\n       stack.As<String>());\n-  err_obj->Set(env->stack_string(), decorated_stack);\n+  err_obj->Set(env->context(), env->stack_string(), decorated_stack).FromJust();\n   err_obj->SetPrivate(\n       env->context(), env->decorated_private_symbol(), True(env->isolate()));\n }\n@@ -361,7 +365,8 @@ void FatalException(Isolate* isolate,\n   Local<Object> process_object = env->process_object();\n   Local<String> fatal_exception_string = env->fatal_exception_string();\n   Local<Value> fatal_exception_function =\n-      process_object->Get(fatal_exception_string);\n+      process_object->Get(env->context(),\n+                          fatal_exception_string).ToLocalChecked();\n \n   if (!fatal_exception_function->IsFunction()) {\n     // Failed before the process._fatalException function was added!"
        },
        {
            "sha": "fdb0406f60a9819826498d0a616bfb62c9fd43dc",
            "filename": "src/node_file.cc",
            "status": "modified",
            "additions": 14,
            "deletions": 5,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_file.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_file.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_file.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -640,8 +640,14 @@ void AfterScanDirWithTypes(uv_fs_t* req) {\n   }\n \n   Local<Array> result = Array::New(isolate, 2);\n-  result->Set(0, Array::New(isolate, name_v.data(), name_v.size()));\n-  result->Set(1, Array::New(isolate, type_v.data(), type_v.size()));\n+  result->Set(env->context(),\n+              0,\n+              Array::New(isolate, name_v.data(),\n+              name_v.size())).FromJust();\n+  result->Set(env->context(),\n+              1,\n+              Array::New(isolate, type_v.data(),\n+              type_v.size())).FromJust();\n   req_wrap->Resolve(result);\n }\n \n@@ -1482,8 +1488,11 @@ static void ReadDir(const FunctionCallbackInfo<Value>& args) {\n     Local<Array> names = Array::New(isolate, name_v.data(), name_v.size());\n     if (with_types) {\n       Local<Array> result = Array::New(isolate, 2);\n-      result->Set(0, names);\n-      result->Set(1, Array::New(isolate, type_v.data(), type_v.size()));\n+      result->Set(env->context(), 0, names).FromJust();\n+      result->Set(env->context(),\n+                  1,\n+                  Array::New(isolate, type_v.data(),\n+                             type_v.size())).FromJust();\n       args.GetReturnValue().Set(result);\n     } else {\n       args.GetReturnValue().Set(names);\n@@ -1667,7 +1676,7 @@ static void WriteBuffers(const FunctionCallbackInfo<Value>& args) {\n   MaybeStackBuffer<uv_buf_t> iovs(chunks->Length());\n \n   for (uint32_t i = 0; i < iovs.length(); i++) {\n-    Local<Value> chunk = chunks->Get(i);\n+    Local<Value> chunk = chunks->Get(env->context(), i).ToLocalChecked();\n     CHECK(Buffer::HasInstance(chunk));\n     iovs[i] = uv_buf_init(Buffer::Data(chunk), Buffer::Length(chunk));\n   }"
        },
        {
            "sha": "8ae58d5134e15d2932754008dd0076deb20d58e3",
            "filename": "src/node_http2.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_http2.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_http2.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http2.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -3057,8 +3057,10 @@ void Initialize(Local<Object> target,\n \n #define V(name)                                                         \\\n   NODE_DEFINE_CONSTANT(constants, name);                                \\\n-  name_for_error_code->Set(static_cast<int>(name),                      \\\n-                           FIXED_ONE_BYTE_STRING(isolate, #name));\n+  name_for_error_code->Set(env->context(),                              \\\n+                           static_cast<int>(name),                      \\\n+                           FIXED_ONE_BYTE_STRING(isolate,               \\\n+                                                 #name)).FromJust();\n   NODE_NGHTTP2_ERROR_CODES(V)\n #undef V\n "
        },
        {
            "sha": "c9e057711d9253f5e26f90c2d6a88c460619c697",
            "filename": "src/node_http_parser.cc",
            "status": "modified",
            "additions": 28,
            "deletions": 16,
            "changes": 44,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_http_parser.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_http_parser.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_http_parser.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -265,7 +265,8 @@ class Parser : public AsyncWrap, public StreamListener {\n \n     Local<Value> argv[A_MAX];\n     Local<Object> obj = object();\n-    Local<Value> cb = obj->Get(kOnHeadersComplete);\n+    Local<Value> cb = obj->Get(env()->context(),\n+                               kOnHeadersComplete).ToLocalChecked();\n \n     if (!cb->IsFunction())\n       return 0;\n@@ -338,7 +339,7 @@ class Parser : public AsyncWrap, public StreamListener {\n     EscapableHandleScope scope(env()->isolate());\n \n     Local<Object> obj = object();\n-    Local<Value> cb = obj->Get(kOnBody);\n+    Local<Value> cb = obj->Get(env()->context(), kOnBody).ToLocalChecked();\n \n     if (!cb->IsFunction())\n       return 0;\n@@ -381,7 +382,8 @@ class Parser : public AsyncWrap, public StreamListener {\n       Flush();  // Flush trailing HTTP headers.\n \n     Local<Object> obj = object();\n-    Local<Value> cb = obj->Get(kOnMessageComplete);\n+    Local<Value> cb = obj->Get(env()->context(),\n+                               kOnMessageComplete).ToLocalChecked();\n \n     if (!cb->IsFunction())\n       return 0;\n@@ -705,17 +707,23 @@ class Parser : public AsyncWrap, public StreamListener {\n       Local<Value> e = Exception::Error(env()->parse_error_string());\n       Local<Object> obj = e->ToObject(env()->isolate()->GetCurrentContext())\n         .ToLocalChecked();\n-      obj->Set(env()->bytes_parsed_string(), nread_obj);\n+      obj->Set(env()->context(),\n+               env()->bytes_parsed_string(),\n+               nread_obj).FromJust();\n #ifdef NODE_EXPERIMENTAL_HTTP\n-      obj->Set(env()->code_string(),\n-               OneByteString(env()->isolate(), llhttp_errno_name(err)));\n-      obj->Set(env()->reason_string(),\n-               OneByteString(env()->isolate(), parser_.reason));\n+      obj->Set(env()->context(),\n+               env()->code_string(),\n+               OneByteString(env()->isolate(),\n+                             llhttp_errno_name(err))).FromJust();\n+      obj->Set(env()->context(),\n+               env()->reason_string(),\n+               OneByteString(env()->isolate(), parser_.reason)).FromJust();\n #else  /* !NODE_EXPERIMENTAL_HTTP */\n-      obj->Set(env()->code_string(),\n-               OneByteString(env()->isolate(), http_errno_name(err)));\n+      obj->Set(env()->context(),\n+               env()->code_string(),\n+               OneByteString(env()->isolate(),\n+                             http_errno_name(err))).FromJust();\n #endif  /* NODE_EXPERIMENTAL_HTTP */\n-\n       return scope.Escape(e);\n     }\n \n@@ -750,7 +758,7 @@ class Parser : public AsyncWrap, public StreamListener {\n     HandleScope scope(env()->isolate());\n \n     Local<Object> obj = object();\n-    Local<Value> cb = obj->Get(kOnHeaders);\n+    Local<Value> cb = obj->Get(env()->context(), kOnHeaders).ToLocalChecked();\n \n     if (!cb->IsFunction())\n       return;\n@@ -902,10 +910,13 @@ void Initialize(Local<Object> target,\n \n   Local<Array> methods = Array::New(env->isolate());\n #define V(num, name, string)                                                  \\\n-    methods->Set(num, FIXED_ONE_BYTE_STRING(env->isolate(), #string));\n+    methods->Set(env->context(),                                              \\\n+        num, FIXED_ONE_BYTE_STRING(env->isolate(), #string)).FromJust();\n   HTTP_METHOD_MAP(V)\n #undef V\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"methods\"), methods);\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"methods\"),\n+              methods).FromJust();\n \n   t->Inherit(AsyncWrap::GetConstructorTemplate(env));\n   env->SetProtoMethod(t, \"close\", Parser::Close);\n@@ -919,8 +930,9 @@ void Initialize(Local<Object> target,\n   env->SetProtoMethod(t, \"unconsume\", Parser::Unconsume);\n   env->SetProtoMethod(t, \"getCurrentBuffer\", Parser::GetCurrentBuffer);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"HTTPParser\"),\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"HTTPParser\"),\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n }  // anonymous namespace"
        },
        {
            "sha": "7d058fcc9a2036656c232718d98eca39b65a7fd3",
            "filename": "src/node_os.cc",
            "status": "modified",
            "additions": 33,
            "deletions": 18,
            "changes": 51,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_os.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_os.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_os.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -267,10 +267,11 @@ static void GetInterfaceAddresses(const FunctionCallbackInfo<Value>& args) {\n         v8::NewStringType::kNormal).ToLocalChecked();\n \n     if (ret->Has(env->context(), name).FromJust()) {\n-      ifarr = Local<Array>::Cast(ret->Get(name));\n+      ifarr = Local<Array>::Cast(ret->Get(env->context(),\n+                                          name).ToLocalChecked());\n     } else {\n       ifarr = Array::New(env->isolate());\n-      ret->Set(name, ifarr);\n+      ret->Set(env->context(), name, ifarr).FromJust();\n     }\n \n     snprintf(mac,\n@@ -297,22 +298,29 @@ static void GetInterfaceAddresses(const FunctionCallbackInfo<Value>& args) {\n     }\n \n     o = Object::New(env->isolate());\n-    o->Set(env->address_string(), OneByteString(env->isolate(), ip));\n-    o->Set(env->netmask_string(), OneByteString(env->isolate(), netmask));\n-    o->Set(env->family_string(), family);\n-    o->Set(env->mac_string(), FIXED_ONE_BYTE_STRING(env->isolate(), mac));\n+    o->Set(env->context(),\n+           env->address_string(),\n+           OneByteString(env->isolate(), ip)).FromJust();\n+    o->Set(env->context(),\n+           env->netmask_string(),\n+           OneByteString(env->isolate(), netmask)).FromJust();\n+    o->Set(env->context(),\n+           env->family_string(), family).FromJust();\n+    o->Set(env->context(),\n+           env->mac_string(),\n+           FIXED_ONE_BYTE_STRING(env->isolate(), mac)).FromJust();\n \n     if (interfaces[i].address.address4.sin_family == AF_INET6) {\n       uint32_t scopeid = interfaces[i].address.address6.sin6_scope_id;\n-      o->Set(env->scopeid_string(),\n-             Integer::NewFromUnsigned(env->isolate(), scopeid));\n+      o->Set(env->context(), env->scopeid_string(),\n+             Integer::NewFromUnsigned(env->isolate(), scopeid)).FromJust();\n     }\n \n     const bool internal = interfaces[i].is_internal;\n-    o->Set(env->internal_string(),\n-           internal ? True(env->isolate()) : False(env->isolate()));\n+    o->Set(env->context(), env->internal_string(),\n+           internal ? True(env->isolate()) : False(env->isolate())).FromJust();\n \n-    ifarr->Set(ifarr->Length(), o);\n+    ifarr->Set(env->context(), ifarr->Length(), o).FromJust();\n   }\n \n   uv_free_interface_addresses(interfaces, count);\n@@ -397,11 +405,17 @@ static void GetUserInfo(const FunctionCallbackInfo<Value>& args) {\n \n   Local<Object> entry = Object::New(env->isolate());\n \n-  entry->Set(env->uid_string(), uid);\n-  entry->Set(env->gid_string(), gid);\n-  entry->Set(env->username_string(), username.ToLocalChecked());\n-  entry->Set(env->homedir_string(), homedir.ToLocalChecked());\n-  entry->Set(env->shell_string(), shell.ToLocalChecked());\n+  entry->Set(env->context(), env->uid_string(), uid).FromJust();\n+  entry->Set(env->context(), env->gid_string(), gid).FromJust();\n+  entry->Set(env->context(),\n+             env->username_string(),\n+             username.ToLocalChecked()).FromJust();\n+  entry->Set(env->context(),\n+             env->homedir_string(),\n+             homedir.ToLocalChecked()).FromJust();\n+  entry->Set(env->context(),\n+             env->shell_string(),\n+             shell.ToLocalChecked()).FromJust();\n \n   args.GetReturnValue().Set(entry);\n }\n@@ -464,8 +478,9 @@ void Initialize(Local<Object> target,\n   env->SetMethod(target, \"getUserInfo\", GetUserInfo);\n   env->SetMethod(target, \"setPriority\", SetPriority);\n   env->SetMethod(target, \"getPriority\", GetPriority);\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"isBigEndian\"),\n-              Boolean::New(env->isolate(), IsBigEndian()));\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"isBigEndian\"),\n+              Boolean::New(env->isolate(), IsBigEndian())).FromJust();\n }\n \n }  // namespace os"
        },
        {
            "sha": "6c12dcc02b2cd0e89d774a32c1ae03096cc4a8a8",
            "filename": "src/node_process.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 3,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_process.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_process.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_process.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -488,15 +488,18 @@ void GetGroups(const FunctionCallbackInfo<Value>& args) {\n   gid_t egid = getegid();\n \n   for (int i = 0; i < ngroups; i++) {\n-    groups_list->Set(i, Integer::New(env->isolate(), groups[i]));\n+    groups_list->Set(env->context(),\n+                     i, Integer::New(env->isolate(), groups[i])).FromJust();\n     if (groups[i] == egid)\n       seen_egid = true;\n   }\n \n   delete[] groups;\n \n   if (seen_egid == false)\n-    groups_list->Set(ngroups, Integer::New(env->isolate(), egid));\n+    groups_list->Set(env->context(),\n+                     ngroups,\n+                     Integer::New(env->isolate(), egid)).FromJust();\n \n   args.GetReturnValue().Set(groups_list);\n }\n@@ -513,7 +516,9 @@ void SetGroups(const FunctionCallbackInfo<Value>& args) {\n   gid_t* groups = new gid_t[size];\n \n   for (size_t i = 0; i < size; i++) {\n-    gid_t gid = gid_by_name(env->isolate(), groups_list->Get(i));\n+    gid_t gid = gid_by_name(env->isolate(),\n+                            groups_list->Get(env->context(),\n+                                             i).ToLocalChecked());\n \n     if (gid == gid_not_found) {\n       delete[] groups;"
        },
        {
            "sha": "7cf06393bb7484d61491182bbcf39db87ccf7c25",
            "filename": "src/node_stat_watcher.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_stat_watcher.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_stat_watcher.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_stat_watcher.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -54,8 +54,8 @@ void StatWatcher::Initialize(Environment* env, Local<Object> target) {\n \n   env->SetProtoMethod(t, \"start\", StatWatcher::Start);\n \n-  target->Set(statWatcherString,\n-              t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(), statWatcherString,\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n "
        },
        {
            "sha": "44cf31ff2e02d5ed855d61a70965d3bf0e73e232",
            "filename": "src/node_trace_events.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_trace_events.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_trace_events.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_trace_events.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -110,8 +110,10 @@ void Initialize(Local<Object> target,\n   env->SetProtoMethod(category_set, \"enable\", NodeCategorySet::Enable);\n   env->SetProtoMethod(category_set, \"disable\", NodeCategorySet::Disable);\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"CategorySet\"),\n-              category_set->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"CategorySet\"),\n+              category_set->GetFunction(env->context()).ToLocalChecked())\n+              .FromJust();\n \n   Local<String> isTraceCategoryEnabled =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"isTraceCategoryEnabled\");"
        },
        {
            "sha": "62af7a1115784eeecdddd3c610f6d9355b52ff02",
            "filename": "src/node_util.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_util.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_util.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_util.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -57,6 +57,7 @@ static void GetOwnNonIndexProperties(\n }\n \n static void GetPromiseDetails(const FunctionCallbackInfo<Value>& args) {\n+  Environment* env = Environment::GetCurrent(args);\n   // Return undefined if it's not a Promise.\n   if (!args[0]->IsPromise())\n     return;\n@@ -67,23 +68,24 @@ static void GetPromiseDetails(const FunctionCallbackInfo<Value>& args) {\n   Local<Array> ret = Array::New(isolate, 2);\n \n   int state = promise->State();\n-  ret->Set(0, Integer::New(isolate, state));\n+  ret->Set(env->context(), 0, Integer::New(isolate, state)).FromJust();\n   if (state != Promise::PromiseState::kPending)\n-    ret->Set(1, promise->Result());\n+    ret->Set(env->context(), 1, promise->Result()).FromJust();\n \n   args.GetReturnValue().Set(ret);\n }\n \n static void GetProxyDetails(const FunctionCallbackInfo<Value>& args) {\n+  Environment* env = Environment::GetCurrent(args);\n   // Return undefined if it's not a proxy.\n   if (!args[0]->IsProxy())\n     return;\n \n   Local<Proxy> proxy = args[0].As<Proxy>();\n \n   Local<Array> ret = Array::New(args.GetIsolate(), 2);\n-  ret->Set(0, proxy->GetTarget());\n-  ret->Set(1, proxy->GetHandler());\n+  ret->Set(env->context(), 0, proxy->GetTarget()).FromJust();\n+  ret->Set(env->context(), 1, proxy->GetHandler()).FromJust();\n \n   args.GetReturnValue().Set(ret);\n }"
        },
        {
            "sha": "ab453134fabfc035fb210935f7e96d24389aef98",
            "filename": "src/node_v8.cc",
            "status": "modified",
            "additions": 21,
            "deletions": 13,
            "changes": 34,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_v8.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_v8.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_v8.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -134,23 +134,27 @@ void Initialize(Local<Object> target,\n   const size_t heap_statistics_buffer_byte_length =\n       sizeof(*env->heap_statistics_buffer()) * kHeapStatisticsPropertiesCount;\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(),\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(),\n                                     \"heapStatisticsArrayBuffer\"),\n               ArrayBuffer::New(env->isolate(),\n                                env->heap_statistics_buffer(),\n-                               heap_statistics_buffer_byte_length));\n+                               heap_statistics_buffer_byte_length)).FromJust();\n \n #define V(i, _, name)                                                         \\\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), #name),                   \\\n-              Uint32::NewFromUnsigned(env->isolate(), i));\n+  target->Set(env->context(),                                                 \\\n+              FIXED_ONE_BYTE_STRING(env->isolate(), #name),                   \\\n+              Uint32::NewFromUnsigned(env->isolate(), i)).FromJust();\n \n   HEAP_STATISTICS_PROPERTIES(V)\n #undef V\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(),\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(),\n                                     \"kHeapSpaceStatisticsPropertiesCount\"),\n               Uint32::NewFromUnsigned(env->isolate(),\n-                                      kHeapSpaceStatisticsPropertiesCount));\n+                                      kHeapSpaceStatisticsPropertiesCount))\n+              .FromJust();\n \n   size_t number_of_heap_spaces = env->isolate()->NumberOfHeapSpaces();\n \n@@ -165,10 +169,11 @@ void Initialize(Local<Object> target,\n                                                         s.space_name(),\n                                                         NewStringType::kNormal)\n                                         .ToLocalChecked();\n-    heap_spaces->Set(i, heap_space_name);\n+    heap_spaces->Set(env->context(), i, heap_space_name).FromJust();\n   }\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"kHeapSpaces\"),\n-              heap_spaces);\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"kHeapSpaces\"),\n+              heap_spaces).FromJust();\n \n   env->SetMethod(target,\n                  \"updateHeapSpaceStatisticsArrayBuffer\",\n@@ -182,15 +187,18 @@ void Initialize(Local<Object> target,\n       kHeapSpaceStatisticsPropertiesCount *\n       number_of_heap_spaces;\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(),\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(),\n                                     \"heapSpaceStatisticsArrayBuffer\"),\n               ArrayBuffer::New(env->isolate(),\n                                env->heap_space_statistics_buffer(),\n-                               heap_space_statistics_buffer_byte_length));\n+                               heap_space_statistics_buffer_byte_length))\n+              .FromJust();\n \n #define V(i, _, name)                                                         \\\n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), #name),                   \\\n-              Uint32::NewFromUnsigned(env->isolate(), i));\n+  target->Set(env->context(),                                                 \\\n+              FIXED_ONE_BYTE_STRING(env->isolate(), #name),                   \\\n+              Uint32::NewFromUnsigned(env->isolate(), i)).FromJust();\n \n   HEAP_SPACE_STATISTICS_PROPERTIES(V)\n #undef V"
        },
        {
            "sha": "e99ac59c01e06d33501c5930ea776076fac03619",
            "filename": "src/node_worker.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_worker.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_worker.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_worker.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -490,7 +490,9 @@ void InitWorker(Local<Object> target,\n     Local<String> workerString =\n         FIXED_ONE_BYTE_STRING(env->isolate(), \"Worker\");\n     w->SetClassName(workerString);\n-    target->Set(workerString, w->GetFunction(env->context()).ToLocalChecked());\n+    target->Set(env->context(),\n+                workerString,\n+                w->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   }\n \n   env->SetMethod(target, \"getEnvMessagePort\", GetEnvMessagePort);"
        },
        {
            "sha": "6b050fcb40289ab97b980b1218c51e783d61ff02",
            "filename": "src/node_zlib.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_zlib.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fnode_zlib.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_zlib.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -896,10 +896,13 @@ void Initialize(Local<Object> target,\n \n   Local<String> zlibString = FIXED_ONE_BYTE_STRING(env->isolate(), \"Zlib\");\n   z->SetClassName(zlibString);\n-  target->Set(zlibString, z->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              zlibString,\n+              z->GetFunction(env->context()).ToLocalChecked()).FromJust();\n \n-  target->Set(FIXED_ONE_BYTE_STRING(env->isolate(), \"ZLIB_VERSION\"),\n-              FIXED_ONE_BYTE_STRING(env->isolate(), ZLIB_VERSION));\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), \"ZLIB_VERSION\"),\n+              FIXED_ONE_BYTE_STRING(env->isolate(), ZLIB_VERSION)).FromJust();\n }\n \n }  // anonymous namespace"
        },
        {
            "sha": "50e80b45a42f5e462daad2e1cf6063aaab88f5c4",
            "filename": "src/pipe_wrap.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fpipe_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fpipe_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fpipe_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -90,7 +90,9 @@ void PipeWrap::Initialize(Local<Object> target,\n \n   env->SetProtoMethod(t, \"fchmod\", Fchmod);\n \n-  target->Set(pipeString, t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              pipeString,\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   env->set_pipe_constructor_template(t);\n \n   // Create FunctionTemplate for PipeConnectWrap.\n@@ -99,7 +101,9 @@ void PipeWrap::Initialize(Local<Object> target,\n   Local<String> wrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"PipeConnectWrap\");\n   cwt->SetClassName(wrapString);\n-  target->Set(wrapString, cwt->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              wrapString,\n+              cwt->GetFunction(env->context()).ToLocalChecked()).FromJust();\n \n   // Define constants\n   Local<Object> constants = Object::New(env->isolate());"
        },
        {
            "sha": "79d661c83fc023a8079475c07502cf996bbe5b40",
            "filename": "src/process_wrap.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fprocess_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fprocess_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fprocess_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -62,8 +62,9 @@ class ProcessWrap : public HandleWrap {\n     env->SetProtoMethod(constructor, \"spawn\", Spawn);\n     env->SetProtoMethod(constructor, \"kill\", Kill);\n \n-    target->Set(processString,\n-                constructor->GetFunction(context).ToLocalChecked());\n+    target->Set(env->context(),\n+                processString,\n+                constructor->GetFunction(context).ToLocalChecked()).FromJust();\n   }\n \n   SET_NO_MEMORY_INFO()"
        },
        {
            "sha": "613ee0926f5db1139ce49f32e7bcfd8b6730b02d",
            "filename": "src/signal_wrap.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fsignal_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fsignal_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fsignal_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -55,8 +55,9 @@ class SignalWrap : public HandleWrap {\n     env->SetProtoMethod(constructor, \"start\", Start);\n     env->SetProtoMethod(constructor, \"stop\", Stop);\n \n-    target->Set(signalString,\n-                constructor->GetFunction(env->context()).ToLocalChecked());\n+    target->Set(env->context(), signalString,\n+                constructor->GetFunction(env->context()).ToLocalChecked())\n+                .FromJust();\n   }\n \n   SET_NO_MEMORY_INFO()"
        },
        {
            "sha": "1d6ec17b802f3b3a56702c05aaa33ca2b881462d",
            "filename": "src/stream_base-inl.h",
            "status": "modified",
            "additions": 10,
            "deletions": 4,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fstream_base-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fstream_base-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstream_base-inl.h?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -179,7 +179,9 @@ inline int StreamBase::Shutdown(v8::Local<v8::Object> req_wrap_obj) {\n \n   const char* msg = Error();\n   if (msg != nullptr) {\n-    req_wrap_obj->Set(env->error_string(), OneByteString(env->isolate(), msg));\n+    req_wrap_obj->Set(\n+        env->context(),\n+        env->error_string(), OneByteString(env->isolate(), msg)).FromJust();\n     ClearError();\n   }\n \n@@ -228,7 +230,9 @@ inline StreamWriteResult StreamBase::Write(\n \n   const char* msg = Error();\n   if (msg != nullptr) {\n-    req_wrap_obj->Set(env->error_string(), OneByteString(env->isolate(), msg));\n+    req_wrap_obj->Set(env->context(),\n+                      env->error_string(),\n+                      OneByteString(env->isolate(), msg)).FromJust();\n     ClearError();\n   }\n \n@@ -434,8 +438,10 @@ inline void StreamReq::Done(int status, const char* error_str) {\n   AsyncWrap* async_wrap = GetAsyncWrap();\n   Environment* env = async_wrap->env();\n   if (error_str != nullptr) {\n-    async_wrap->object()->Set(env->error_string(),\n-                              OneByteString(env->isolate(), error_str));\n+    async_wrap->object()->Set(env->context(),\n+                              env->error_string(),\n+                              OneByteString(env->isolate(), error_str))\n+                              .FromJust();\n   }\n \n   OnDone(status);"
        },
        {
            "sha": "26efa46ba02f830cf7539be3660b3cd6f305d6de",
            "filename": "src/stream_base.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fstream_base.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fstream_base.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstream_base.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -83,7 +83,7 @@ int StreamBase::Writev(const FunctionCallbackInfo<Value>& args) {\n   if (!all_buffers) {\n     // Determine storage size first\n     for (size_t i = 0; i < count; i++) {\n-      Local<Value> chunk = chunks->Get(i * 2);\n+      Local<Value> chunk = chunks->Get(env->context(), i * 2).ToLocalChecked();\n \n       if (Buffer::HasInstance(chunk))\n         continue;\n@@ -92,7 +92,7 @@ int StreamBase::Writev(const FunctionCallbackInfo<Value>& args) {\n       // String chunk\n       Local<String> string = chunk->ToString(env->context()).ToLocalChecked();\n       enum encoding encoding = ParseEncoding(env->isolate(),\n-                                             chunks->Get(i * 2 + 1));\n+          chunks->Get(env->context(), i * 2 + 1).ToLocalChecked());\n       size_t chunk_size;\n       if (encoding == UTF8 && string->Length() > 65535 &&\n           !StringBytes::Size(env->isolate(), string, encoding).To(&chunk_size))\n@@ -107,7 +107,7 @@ int StreamBase::Writev(const FunctionCallbackInfo<Value>& args) {\n       return UV_ENOBUFS;\n   } else {\n     for (size_t i = 0; i < count; i++) {\n-      Local<Value> chunk = chunks->Get(i);\n+      Local<Value> chunk = chunks->Get(env->context(), i).ToLocalChecked();\n       bufs[i].base = Buffer::Data(chunk);\n       bufs[i].len = Buffer::Length(chunk);\n     }\n@@ -120,7 +120,7 @@ int StreamBase::Writev(const FunctionCallbackInfo<Value>& args) {\n   offset = 0;\n   if (!all_buffers) {\n     for (size_t i = 0; i < count; i++) {\n-      Local<Value> chunk = chunks->Get(i * 2);\n+      Local<Value> chunk = chunks->Get(env->context(), i * 2).ToLocalChecked();\n \n       // Write buffer\n       if (Buffer::HasInstance(chunk)) {\n@@ -136,7 +136,7 @@ int StreamBase::Writev(const FunctionCallbackInfo<Value>& args) {\n \n       Local<String> string = chunk->ToString(env->context()).ToLocalChecked();\n       enum encoding encoding = ParseEncoding(env->isolate(),\n-                                             chunks->Get(i * 2 + 1));\n+          chunks->Get(env->context(), i * 2 + 1).ToLocalChecked());\n       str_size = StringBytes::Write(env->isolate(),\n                                     str_storage,\n                                     str_size,\n@@ -270,7 +270,9 @@ int StreamBase::WriteString(const FunctionCallbackInfo<Value>& args) {\n     send_handle = reinterpret_cast<uv_stream_t*>(wrap->GetHandle());\n     // Reference LibuvStreamWrap instance to prevent it from being garbage\n     // collected before `AfterWrite` is called.\n-    req_wrap_obj->Set(env->handle_string(), send_handle_obj);\n+    req_wrap_obj->Set(env->context(),\n+                      env->handle_string(),\n+                      send_handle_obj).FromJust();\n   }\n \n   StreamWriteResult res = Write(&buf, 1, send_handle, req_wrap_obj);"
        },
        {
            "sha": "c7d5e2f23ff90087ffe4b5e27c216f582dc557de",
            "filename": "src/stream_wrap.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fstream_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fstream_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fstream_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -67,7 +67,9 @@ void LibuvStreamWrap::Initialize(Local<Object> target,\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"ShutdownWrap\");\n   sw->SetClassName(wrapString);\n   sw->Inherit(AsyncWrap::GetConstructorTemplate(env));\n-  target->Set(wrapString, sw->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              wrapString,\n+              sw->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   env->set_shutdown_wrap_template(sw->InstanceTemplate());\n \n   Local<FunctionTemplate> ww =\n@@ -77,8 +79,9 @@ void LibuvStreamWrap::Initialize(Local<Object> target,\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"WriteWrap\");\n   ww->SetClassName(writeWrapString);\n   ww->Inherit(AsyncWrap::GetConstructorTemplate(env));\n-  target->Set(writeWrapString,\n-              ww->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              writeWrapString,\n+              ww->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   env->set_write_wrap_template(ww->InstanceTemplate());\n \n   NODE_DEFINE_CONSTANT(target, kReadBytesOrError);"
        },
        {
            "sha": "e1316b42cd206b1aca4ca6749d1426658f939589",
            "filename": "src/tcp_wrap.cc",
            "status": "modified",
            "additions": 27,
            "deletions": 9,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Ftcp_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Ftcp_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftcp_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -107,7 +107,9 @@ void TCPWrap::Initialize(Local<Object> target,\n   env->SetProtoMethod(t, \"setSimultaneousAccepts\", SetSimultaneousAccepts);\n #endif\n \n-  target->Set(tcpString, t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              tcpString,\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   env->set_tcp_constructor_template(t);\n \n   // Create FunctionTemplate for TCPConnectWrap.\n@@ -117,7 +119,9 @@ void TCPWrap::Initialize(Local<Object> target,\n   Local<String> wrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"TCPConnectWrap\");\n   cwt->SetClassName(wrapString);\n-  target->Set(wrapString, cwt->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              wrapString,\n+              cwt->GetFunction(env->context()).ToLocalChecked()).FromJust();\n \n   // Define constants\n   Local<Object> constants = Object::New(env->isolate());\n@@ -349,22 +353,36 @@ Local<Object> AddressToJS(Environment* env,\n     a6 = reinterpret_cast<const sockaddr_in6*>(addr);\n     uv_inet_ntop(AF_INET6, &a6->sin6_addr, ip, sizeof ip);\n     port = ntohs(a6->sin6_port);\n-    info->Set(env->address_string(), OneByteString(env->isolate(), ip));\n-    info->Set(env->family_string(), env->ipv6_string());\n-    info->Set(env->port_string(), Integer::New(env->isolate(), port));\n+    info->Set(env->context(),\n+              env->address_string(),\n+              OneByteString(env->isolate(), ip)).FromJust();\n+    info->Set(env->context(),\n+              env->family_string(),\n+              env->ipv6_string()).FromJust();\n+    info->Set(env->context(),\n+              env->port_string(),\n+              Integer::New(env->isolate(), port)).FromJust();\n     break;\n \n   case AF_INET:\n     a4 = reinterpret_cast<const sockaddr_in*>(addr);\n     uv_inet_ntop(AF_INET, &a4->sin_addr, ip, sizeof ip);\n     port = ntohs(a4->sin_port);\n-    info->Set(env->address_string(), OneByteString(env->isolate(), ip));\n-    info->Set(env->family_string(), env->ipv4_string());\n-    info->Set(env->port_string(), Integer::New(env->isolate(), port));\n+    info->Set(env->context(),\n+              env->address_string(),\n+              OneByteString(env->isolate(), ip)).FromJust();\n+    info->Set(env->context(),\n+              env->family_string(),\n+              env->ipv4_string()).FromJust();\n+    info->Set(env->context(),\n+              env->port_string(),\n+              Integer::New(env->isolate(), port)).FromJust();\n     break;\n \n   default:\n-    info->Set(env->address_string(), String::Empty(env->isolate()));\n+    info->Set(env->context(),\n+              env->address_string(),\n+              String::Empty(env->isolate())).FromJust();\n   }\n \n   return scope.Escape(info);"
        },
        {
            "sha": "52d4e7381318bc2cd07ad290774577fa4847bfe3",
            "filename": "src/tls_wrap.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Ftls_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Ftls_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftls_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -909,7 +909,9 @@ void TLSWrap::Initialize(Local<Object> target,\n   env->set_tls_wrap_constructor_function(\n       t->GetFunction(env->context()).ToLocalChecked());\n \n-  target->Set(tlsWrapString, t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              tlsWrapString,\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n }  // namespace node"
        },
        {
            "sha": "2523f57b2d4aab34b73eb07700e7cdf8151accaa",
            "filename": "src/tty_wrap.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Ftty_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Ftty_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Ftty_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -59,7 +59,9 @@ void TTYWrap::Initialize(Local<Object> target,\n   env->SetMethodNoSideEffect(target, \"isTTY\", IsTTY);\n   env->SetMethodNoSideEffect(target, \"guessHandleType\", GuessHandleType);\n \n-  target->Set(ttyString, t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              ttyString,\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   env->set_tty_constructor_template(t);\n }\n \n@@ -112,8 +114,8 @@ void TTYWrap::GetWindowSize(const FunctionCallbackInfo<Value>& args) {\n \n   if (err == 0) {\n     Local<v8::Array> a = args[0].As<Array>();\n-    a->Set(0, Integer::New(env->isolate(), width));\n-    a->Set(1, Integer::New(env->isolate(), height));\n+    a->Set(env->context(), 0, Integer::New(env->isolate(), width)).FromJust();\n+    a->Set(env->context(), 1, Integer::New(env->isolate(), height)).FromJust();\n   }\n \n   args.GetReturnValue().Set(err);"
        },
        {
            "sha": "4c7072f2a2b9810458e563dbafa6a5d974449e39",
            "filename": "src/udp_wrap.cc",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fudp_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fudp_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fudp_wrap.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -133,7 +133,9 @@ void UDPWrap::Initialize(Local<Object> target,\n \n   t->Inherit(HandleWrap::GetConstructorTemplate(env));\n \n-  target->Set(udpString, t->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              udpString,\n+              t->GetFunction(env->context()).ToLocalChecked()).FromJust();\n   env->set_udp_constructor_function(\n       t->GetFunction(env->context()).ToLocalChecked());\n \n@@ -144,8 +146,9 @@ void UDPWrap::Initialize(Local<Object> target,\n   Local<String> sendWrapString =\n       FIXED_ONE_BYTE_STRING(env->isolate(), \"SendWrap\");\n   swt->SetClassName(sendWrapString);\n-  target->Set(sendWrapString,\n-              swt->GetFunction(env->context()).ToLocalChecked());\n+  target->Set(env->context(),\n+              sendWrapString,\n+              swt->GetFunction(env->context()).ToLocalChecked()).FromJust();\n }\n \n \n@@ -373,7 +376,7 @@ void UDPWrap::DoSend(const FunctionCallbackInfo<Value>& args, int family) {\n \n   // construct uv_buf_t array\n   for (size_t i = 0; i < count; i++) {\n-    Local<Value> chunk = chunks->Get(i);\n+    Local<Value> chunk = chunks->Get(env->context(), i).ToLocalChecked();\n \n     size_t length = Buffer::Length(chunk);\n "
        },
        {
            "sha": "5628719c7846532be8d5bd6139b82c9ce410b2e3",
            "filename": "src/uv.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/344d33eef110486bc094ba8d97a483379bf62752/src%2Fuv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/344d33eef110486bc094ba8d97a483379bf62752/src%2Fuv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fuv.cc?ref=344d33eef110486bc094ba8d97a483379bf62752",
            "patch": "@@ -63,10 +63,11 @@ void Initialize(Local<Object> target,\n                 Local<Context> context) {\n   Environment* env = Environment::GetCurrent(context);\n   Isolate* isolate = env->isolate();\n-  target->Set(FIXED_ONE_BYTE_STRING(isolate, \"errname\"),\n+  target->Set(env->context(),\n+              FIXED_ONE_BYTE_STRING(isolate, \"errname\"),\n               env->NewFunctionTemplate(ErrName)\n                   ->GetFunction(env->context())\n-                  .ToLocalChecked());\n+                  .ToLocalChecked()).FromJust();\n \n #define V(name, _) NODE_DEFINE_CONSTANT(target, UV_##name);\n   UV_ERRNO_MAP(V)\n@@ -76,8 +77,8 @@ void Initialize(Local<Object> target,\n \n #define V(name, msg) do {                                                     \\\n   Local<Array> arr = Array::New(isolate, 2);                                  \\\n-  arr->Set(0, OneByteString(isolate, #name));                                 \\\n-  arr->Set(1, OneByteString(isolate, msg));                                   \\\n+  arr->Set(env->context(), 0, OneByteString(isolate, #name)).FromJust();      \\\n+  arr->Set(env->context(), 1, OneByteString(isolate, msg)).FromJust();        \\\n   err_map->Set(context,                                                       \\\n                Integer::New(isolate, UV_##name),                              \\\n                arr).ToLocalChecked();                                         \\"
        }
    ],
    "stats": {
        "total": 627,
        "additions": 414,
        "deletions": 213
    }
}