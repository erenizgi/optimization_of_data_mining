{
    "author": "IlarionHalushka",
    "message": "test: improve internet/test-dns\n\n* change 'for' loop to 'for of' loop\n* remove unused parameters passed to functions\n* remove unnecessary 'assert.ok'\n\nPR-URL: https://github.com/nodejs/node/pull/24927\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "a0bdeb553068d844dbe6005f0080620f1d0a673f",
    "files": [
        {
            "sha": "3d331fd196a722835f272415b2e46d4e2ee97aab",
            "filename": "test/internet/test-dns.js",
            "status": "modified",
            "additions": 13,
            "deletions": 30,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/a0bdeb553068d844dbe6005f0080620f1d0a673f/test%2Finternet%2Ftest-dns.js",
            "raw_url": "https://github.com/nodejs/node/raw/a0bdeb553068d844dbe6005f0080620f1d0a673f/test%2Finternet%2Ftest-dns.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Finternet%2Ftest-dns.js?ref=a0bdeb553068d844dbe6005f0080620f1d0a673f",
            "patch": "@@ -83,9 +83,7 @@ TEST(async function test_resolve4_ttl(done) {\n   function validateResult(result) {\n     assert.ok(result.length > 0);\n \n-    for (let i = 0; i < result.length; i++) {\n-      const item = result[i];\n-      assert.ok(item);\n+    for (const item of result) {\n       assert.strictEqual(typeof item, 'object');\n       assert.strictEqual(typeof item.ttl, 'number');\n       assert.strictEqual(typeof item.address, 'string');\n@@ -113,9 +111,7 @@ TEST(async function test_resolve6_ttl(done) {\n   function validateResult(result) {\n     assert.ok(result.length > 0);\n \n-    for (let i = 0; i < result.length; i++) {\n-      const item = result[i];\n-      assert.ok(item);\n+    for (const item of result) {\n       assert.strictEqual(typeof item, 'object');\n       assert.strictEqual(typeof item.ttl, 'number');\n       assert.strictEqual(typeof item.address, 'string');\n@@ -143,9 +139,7 @@ TEST(async function test_resolveMx(done) {\n   function validateResult(result) {\n     assert.ok(result.length > 0);\n \n-    for (let i = 0; i < result.length; i++) {\n-      const item = result[i];\n-      assert.ok(item);\n+    for (const item of result) {\n       assert.strictEqual(typeof item, 'object');\n       assert.ok(item.exchange);\n       assert.strictEqual(typeof item.exchange, 'string');\n@@ -185,9 +179,7 @@ TEST(async function test_resolveNs(done) {\n   function validateResult(result) {\n     assert.ok(result.length > 0);\n \n-    for (let i = 0; i < result.length; i++) {\n-      const item = result[i];\n-\n+    for (const item of result) {\n       assert.ok(item);\n       assert.strictEqual(typeof item, 'string');\n     }\n@@ -225,14 +217,10 @@ TEST(async function test_resolveSrv(done) {\n   function validateResult(result) {\n     assert.ok(result.length > 0);\n \n-    for (let i = 0; i < result.length; i++) {\n-      const item = result[i];\n-      assert.ok(item);\n+    for (const item of result) {\n       assert.strictEqual(typeof item, 'object');\n-\n       assert.ok(item.name);\n       assert.strictEqual(typeof item.name, 'string');\n-\n       assert.strictEqual(typeof item.port, 'number');\n       assert.strictEqual(typeof item.priority, 'number');\n       assert.strictEqual(typeof item.weight, 'number');\n@@ -271,8 +259,7 @@ TEST(async function test_resolvePtr(done) {\n   function validateResult(result) {\n     assert.ok(result.length > 0);\n \n-    for (let i = 0; i < result.length; i++) {\n-      const item = result[i];\n+    for (const item of result) {\n       assert.ok(item);\n       assert.strictEqual(typeof item, 'string');\n     }\n@@ -310,9 +297,7 @@ TEST(async function test_resolveNaptr(done) {\n   function validateResult(result) {\n     assert.ok(result.length > 0);\n \n-    for (let i = 0; i < result.length; i++) {\n-      const item = result[i];\n-      assert.ok(item);\n+    for (const item of result) {\n       assert.strictEqual(typeof item, 'object');\n       assert.strictEqual(typeof item.flags, 'string');\n       assert.strictEqual(typeof item.service, 'string');\n@@ -353,7 +338,6 @@ TEST(function test_resolveNaptr_failure(done) {\n \n TEST(async function test_resolveSoa(done) {\n   function validateResult(result) {\n-    assert.ok(result);\n     assert.strictEqual(typeof result, 'object');\n     assert.strictEqual(typeof result.nsname, 'string');\n     assert.ok(result.nsname.length > 0);\n@@ -403,10 +387,9 @@ TEST(async function test_resolveCname(done) {\n   function validateResult(result) {\n     assert.ok(result.length > 0);\n \n-    for (let i = 0; i < result.length; i++) {\n-      const name = result[i];\n-      assert.ok(name);\n-      assert.strictEqual(typeof name, 'string');\n+    for (const item of result) {\n+      assert.ok(item);\n+      assert.strictEqual(typeof item, 'string');\n     }\n   }\n \n@@ -480,7 +463,7 @@ TEST(function test_lookup_failure(done) {\n     .then(common.mustNotCall())\n     .catch(common.expectsError({ errno: dns.NOTFOUND }));\n \n-  const req = dns.lookup(addresses.INVALID_HOST, 4, (err, ip, family) => {\n+  const req = dns.lookup(addresses.INVALID_HOST, 4, (err) => {\n     assert.ok(err instanceof Error);\n     assert.strictEqual(err.errno, dns.NOTFOUND);\n     assert.strictEqual(err.errno, 'ENOTFOUND');\n@@ -548,7 +531,7 @@ TEST(function test_lookup_ip_promise(done) {\n TEST(async function test_lookup_null_all(done) {\n   assert.deepStrictEqual(await dnsPromises.lookup(null, { all: true }), []);\n \n-  const req = dns.lookup(null, { all: true }, function(err, ips, family) {\n+  const req = dns.lookup(null, { all: true }, (err, ips) => {\n     assert.ifError(err);\n     assert.ok(Array.isArray(ips));\n     assert.strictEqual(ips.length, 0);\n@@ -594,7 +577,7 @@ TEST(function test_lookupservice_invalid(done) {\n     .then(common.mustNotCall())\n     .catch(common.expectsError({ code: 'ENOTFOUND' }));\n \n-  const req = dns.lookupService('1.2.3.4', 80, function(err, host, service) {\n+  const req = dns.lookupService('1.2.3.4', 80, (err) => {\n     assert(err instanceof Error);\n     assert.strictEqual(err.code, 'ENOTFOUND');\n     assert.ok(/1\\.2\\.3\\.4/.test(err.message));"
        }
    ],
    "stats": {
        "total": 43,
        "additions": 13,
        "deletions": 30
    }
}