{
    "author": "cjihrig",
    "message": "fs: refactor promises version of lchown and lchmod\n\nCheck for platform support first to save a level of indentation.\n\nPR-URL: https://github.com/nodejs/node/pull/20551\nReviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Refael Ackermann <refack@gmail.com>",
    "sha": "edc858b97e8f21f9120d918fe22890baa4d145fe",
    "files": [
        {
            "sha": "59b46c986cebb0db91454c2af34a3adca2e304d3",
            "filename": "lib/internal/fs/promises.js",
            "status": "modified",
            "additions": 10,
            "deletions": 12,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/edc858b97e8f21f9120d918fe22890baa4d145fe/lib%2Finternal%2Ffs%2Fpromises.js",
            "raw_url": "https://github.com/nodejs/node/raw/edc858b97e8f21f9120d918fe22890baa4d145fe/lib%2Finternal%2Ffs%2Fpromises.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ffs%2Fpromises.js?ref=edc858b97e8f21f9120d918fe22890baa4d145fe",
            "patch": "@@ -378,21 +378,19 @@ async function chmod(path, mode) {\n }\n \n async function lchmod(path, mode) {\n-  if (O_SYMLINK !== undefined) {\n-    const fd = await open(path,\n-                          O_WRONLY | O_SYMLINK);\n-    return fchmod(fd, mode).finally(fd.close.bind(fd));\n-  }\n-  throw new ERR_METHOD_NOT_IMPLEMENTED();\n+  if (O_SYMLINK === undefined)\n+    throw new ERR_METHOD_NOT_IMPLEMENTED();\n+\n+  const fd = await open(path, O_WRONLY | O_SYMLINK);\n+  return fchmod(fd, mode).finally(fd.close.bind(fd));\n }\n \n async function lchown(path, uid, gid) {\n-  if (O_SYMLINK !== undefined) {\n-    const fd = await open(path,\n-                          O_WRONLY | O_SYMLINK);\n-    return fchown(fd, uid, gid).finally(fd.close.bind(fd));\n-  }\n-  throw new ERR_METHOD_NOT_IMPLEMENTED();\n+  if (O_SYMLINK === undefined)\n+    throw new ERR_METHOD_NOT_IMPLEMENTED();\n+\n+  const fd = await open(path, O_WRONLY | O_SYMLINK);\n+  return fchown(fd, uid, gid).finally(fd.close.bind(fd));\n }\n \n async function fchown(handle, uid, gid) {"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 10,
        "deletions": 12
    }
}