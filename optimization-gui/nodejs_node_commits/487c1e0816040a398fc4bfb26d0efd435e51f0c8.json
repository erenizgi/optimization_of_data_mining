{
    "author": "targos",
    "message": "deps: backport StackFrame::GetFrame with isolate\n\nThis overload was added in V8 6.9 and the one without isolate was\nremoved in V8 7.0.\n\nRefs: https://github.com/v8/v8/commit/8a011b57d8b26e9cfe1c20a2ef26adb14be6ecc2\n\nPR-URL: https://github.com/nodejs/node/pull/22531\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "487c1e0816040a398fc4bfb26d0efd435e51f0c8",
    "files": [
        {
            "sha": "64c70c83975bee9a888d8f245b476348a99bd7fd",
            "filename": "common.gypi",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/487c1e0816040a398fc4bfb26d0efd435e51f0c8/common.gypi",
            "raw_url": "https://github.com/nodejs/node/raw/487c1e0816040a398fc4bfb26d0efd435e51f0c8/common.gypi",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/common.gypi?ref=487c1e0816040a398fc4bfb26d0efd435e51f0c8",
            "patch": "@@ -29,7 +29,7 @@\n \n     # Reset this number to 0 on major V8 upgrades.\n     # Increment by one for each non-official patch applied to deps/v8.\n-    'v8_embedder_string': '-node.19',\n+    'v8_embedder_string': '-node.20',\n \n     # Enable disassembler for `--print-code` v8 options\n     'v8_enable_disassembler': 1,"
        },
        {
            "sha": "0f1f74e6a120a46b70d91414f0a7d8300b7f3e4e",
            "filename": "deps/v8/include/v8.h",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/487c1e0816040a398fc4bfb26d0efd435e51f0c8/deps%2Fv8%2Finclude%2Fv8.h",
            "raw_url": "https://github.com/nodejs/node/raw/487c1e0816040a398fc4bfb26d0efd435e51f0c8/deps%2Fv8%2Finclude%2Fv8.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Finclude%2Fv8.h?ref=487c1e0816040a398fc4bfb26d0efd435e51f0c8",
            "patch": "@@ -1828,7 +1828,9 @@ class V8_EXPORT StackTrace {\n   /**\n    * Returns a StackFrame at a particular index.\n    */\n-  Local<StackFrame> GetFrame(uint32_t index) const;\n+  V8_DEPRECATE_SOON(\"Use Isolate version\",\n+                    Local<StackFrame> GetFrame(uint32_t index) const);\n+  Local<StackFrame> GetFrame(Isolate* isolate, uint32_t index) const;\n \n   /**\n    * Returns the number of StackFrames."
        },
        {
            "sha": "3fec027b01d54668fdf4da6a7214c7767bcd4466",
            "filename": "deps/v8/src/api.cc",
            "status": "modified",
            "additions": 8,
            "deletions": 3,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/487c1e0816040a398fc4bfb26d0efd435e51f0c8/deps%2Fv8%2Fsrc%2Fapi.cc",
            "raw_url": "https://github.com/nodejs/node/raw/487c1e0816040a398fc4bfb26d0efd435e51f0c8/deps%2Fv8%2Fsrc%2Fapi.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fapi.cc?ref=487c1e0816040a398fc4bfb26d0efd435e51f0c8",
            "patch": "@@ -3023,15 +3023,20 @@ void Message::PrintCurrentStackTrace(Isolate* isolate, FILE* out) {\n \n // --- S t a c k T r a c e ---\n \n-Local<StackFrame> StackTrace::GetFrame(uint32_t index) const {\n-  i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n+Local<StackFrame> StackTrace::GetFrame(Isolate* v8_isolate,\n+                                       uint32_t index) const {\n+  i::Isolate* isolate = reinterpret_cast<i::Isolate*>(v8_isolate);\n   ENTER_V8_NO_SCRIPT_NO_EXCEPTION(isolate);\n-  EscapableHandleScope scope(reinterpret_cast<Isolate*>(isolate));\n+  EscapableHandleScope scope(v8_isolate);\n   auto obj = handle(Utils::OpenHandle(this)->get(index), isolate);\n   auto info = i::Handle<i::StackFrameInfo>::cast(obj);\n   return scope.Escape(Utils::StackFrameToLocal(info));\n }\n \n+Local<StackFrame> StackTrace::GetFrame(uint32_t index) const {\n+  i::Isolate* isolate = Utils::OpenHandle(this)->GetIsolate();\n+  return GetFrame(reinterpret_cast<Isolate*>(isolate), index);\n+}\n \n int StackTrace::GetFrameCount() const {\n   return Utils::OpenHandle(this)->length();"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 12,
        "deletions": 5
    }
}