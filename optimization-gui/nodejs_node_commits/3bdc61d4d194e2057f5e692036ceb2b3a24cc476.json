{
    "author": "kfarnung",
    "message": "tools,doc: apilinks should handle root scenarios\n\n* Prevent crash when setting root properties\n* Allow return outside of function\n\nPR-URL: https://github.com/nodejs/node/pull/22721\nReviewed-By: Sam Ruby <rubys@intertwingly.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "3bdc61d4d194e2057f5e692036ceb2b3a24cc476",
    "files": [
        {
            "sha": "6cf9fee945ac24d62b2b8716d2857ca4f3563a55",
            "filename": "test/fixtures/apilinks/root.js",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/3bdc61d4d194e2057f5e692036ceb2b3a24cc476/test%2Ffixtures%2Fapilinks%2Froot.js",
            "raw_url": "https://github.com/nodejs/node/raw/3bdc61d4d194e2057f5e692036ceb2b3a24cc476/test%2Ffixtures%2Fapilinks%2Froot.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fapilinks%2Froot.js?ref=3bdc61d4d194e2057f5e692036ceb2b3a24cc476",
            "patch": "@@ -0,0 +1,10 @@\n+'use strict';\n+\n+// Set root member\n+let foo = true;\n+foo = false;\n+\n+// Return outside of function\n+if (!foo) {\n+  return;\n+}"
        },
        {
            "sha": "2c63c0851048d8f7bff41ecf0f8cee05f52fd120",
            "filename": "test/fixtures/apilinks/root.json",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/3bdc61d4d194e2057f5e692036ceb2b3a24cc476/test%2Ffixtures%2Fapilinks%2Froot.json",
            "raw_url": "https://github.com/nodejs/node/raw/3bdc61d4d194e2057f5e692036ceb2b3a24cc476/test%2Ffixtures%2Fapilinks%2Froot.json",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Fapilinks%2Froot.json?ref=3bdc61d4d194e2057f5e692036ceb2b3a24cc476",
            "patch": "@@ -0,0 +1,2 @@\n+{\n+}"
        },
        {
            "sha": "d7ec5684b79705931217e7ed95609eefa24e11d0",
            "filename": "tools/doc/apilinks.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/3bdc61d4d194e2057f5e692036ceb2b3a24cc476/tools%2Fdoc%2Fapilinks.js",
            "raw_url": "https://github.com/nodejs/node/raw/3bdc61d4d194e2057f5e692036ceb2b3a24cc476/tools%2Fdoc%2Fapilinks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fapilinks.js?ref=3bdc61d4d194e2057f5e692036ceb2b3a24cc476",
            "patch": "@@ -52,7 +52,9 @@ process.argv.slice(2).forEach((file) => {\n \n   // Parse source.\n   const source = fs.readFileSync(file, 'utf8');\n-  const ast = acorn.parse(source, { ecmaVersion: 10, locations: true });\n+  const ast = acorn.parse(\n+    source,\n+    { allowReturnOutsideFunction: true, ecmaVersion: 10, locations: true });\n   const program = ast.body;\n \n   // Build link\n@@ -68,8 +70,8 @@ process.argv.slice(2).forEach((file) => {\n       if (expr.type !== 'AssignmentExpression') return;\n \n       let lhs = expr.left;\n-      if (expr.left.object.type === 'MemberExpression') lhs = lhs.object;\n       if (lhs.type !== 'MemberExpression') return;\n+      if (lhs.object.type === 'MemberExpression') lhs = lhs.object;\n       if (lhs.object.name === 'exports') {\n         const name = lhs.property.name;\n         if (expr.right.type === 'FunctionExpression') {"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 16,
        "deletions": 2
    }
}