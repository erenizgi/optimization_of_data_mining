{
    "author": "bnoordhuis",
    "message": "src: fix abort when taking a heap snapshot\n\nRemove an erroneous CHECK that asserted the persistent object's internal\nfield pointer still pointed to a valid object.  If ClearWrap() has been\ncalled, the field pointer equals nullptr and that is expected behavior.\n\nPR-URL: https://github.com/nodejs/node/pull/18898\nFixes: https://github.com/nodejs/node/issues/18256\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Matheus Marchini <matheus@sthima.com>",
    "sha": "ffab6cd5057bce6dbbcbe06b0eaa0f905aa43115",
    "files": [
        {
            "sha": "08bb73f7468707a1f459e3d625687494a1d40f81",
            "filename": "src/async_wrap.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/ffab6cd5057bce6dbbcbe06b0eaa0f905aa43115/src%2Fasync_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/ffab6cd5057bce6dbbcbe06b0eaa0f905aa43115/src%2Fasync_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fasync_wrap.cc?ref=ffab6cd5057bce6dbbcbe06b0eaa0f905aa43115",
            "patch": "@@ -124,7 +124,7 @@ RetainedObjectInfo* WrapperInfo(uint16_t class_id, Local<Value> wrapper) {\n   CHECK_GT(object->InternalFieldCount(), 0);\n \n   AsyncWrap* wrap = Unwrap<AsyncWrap>(object);\n-  CHECK_NE(nullptr, wrap);\n+  if (wrap == nullptr) return nullptr;  // ClearWrap() already called.\n \n   return new RetainedAsyncInfo(class_id, wrap);\n }"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}