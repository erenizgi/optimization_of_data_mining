{
    "author": "Trott",
    "message": "test: move tmpdir to submodule of common\n\nMove tmpdir functionality to its own module (common/tmpdir).\n\nPR-URL: https://github.com/nodejs/node/pull/17856\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Gibson Fahnestock <gibfahn@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>",
    "sha": "bf6ce47259ebfe9f6349c223cc1735726aee062d",
    "files": [
        {
            "sha": "1e5a4583669c0fbe26efdd4e55edd90dab48f919",
            "filename": "benchmark/http/http_server_for_chunky_client.js",
            "status": "modified",
            "additions": 3,
            "deletions": 10,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/benchmark%2Fhttp%2Fhttp_server_for_chunky_client.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/benchmark%2Fhttp%2Fhttp_server_for_chunky_client.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fhttp%2Fhttp_server_for_chunky_client.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -2,22 +2,15 @@\n \n const assert = require('assert');\n const http = require('http');\n-const fs = require('fs');\n const { fork } = require('child_process');\n const common = require('../common.js');\n-const { PIPE, tmpDir } = require('../../test/common');\n+const { PIPE } = require('../../test/common');\n+const tmpdir = require('../../test/common/tmpdir');\n process.env.PIPE_NAME = PIPE;\n \n-try {\n-  fs.accessSync(tmpDir, fs.F_OK);\n-} catch (e) {\n-  fs.mkdirSync(tmpDir);\n-}\n+tmpdir.refresh();\n \n var server;\n-try {\n-  fs.unlinkSync(process.env.PIPE_NAME);\n-} catch (e) { /* ignore */ }\n \n server = http.createServer(function(req, res) {\n   const headers = {"
        },
        {
            "sha": "25f0ece70169e7daaa0c537ab24569fc0d5e9dd3",
            "filename": "benchmark/module/module-loader.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/benchmark%2Fmodule%2Fmodule-loader.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/benchmark%2Fmodule%2Fmodule-loader.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/benchmark%2Fmodule%2Fmodule-loader.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -3,8 +3,8 @@ const fs = require('fs');\n const path = require('path');\n const common = require('../common.js');\n \n-const { refreshTmpDir, tmpDir } = require('../../test/common');\n-const benchmarkDirectory = path.join(tmpDir, 'nodejs-benchmark-module');\n+const tmpdir = require('../../test/common/tmpdir');\n+const benchmarkDirectory = path.join(tmpdir.path, 'nodejs-benchmark-module');\n \n const bench = common.createBenchmark(main, {\n   thousands: [50],\n@@ -15,7 +15,7 @@ const bench = common.createBenchmark(main, {\n function main({ thousands, fullPath, useCache }) {\n   const n = thousands * 1e3;\n \n-  refreshTmpDir();\n+  tmpdir.refresh();\n   try { fs.mkdirSync(benchmarkDirectory); } catch (e) {}\n \n   for (var i = 0; i <= n; i++) {\n@@ -35,7 +35,7 @@ function main({ thousands, fullPath, useCache }) {\n   else\n     measureDir(n, useCache === 'true');\n \n-  refreshTmpDir();\n+  tmpdir.refresh();\n }\n \n function measureFull(n, useCache) {"
        },
        {
            "sha": "ee09230676b5e87d229604d4086e3f492aa95590",
            "filename": "test/addons/load-long-path/test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Faddons%2Fload-long-path%2Ftest.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Faddons%2Fload-long-path%2Ftest.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fload-long-path%2Ftest.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -7,12 +7,13 @@ const fs = require('fs');\n const path = require('path');\n const assert = require('assert');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../../common/tmpdir');\n+tmpdir.refresh();\n \n // make a path that is more than 260 chars long.\n // Any given folder cannot have a name longer than 260 characters,\n // so create 10 nested folders each with 30 character long names.\n-let addonDestinationDir = path.resolve(common.tmpDir);\n+let addonDestinationDir = path.resolve(tmpdir.path);\n \n for (let i = 0; i < 10; i++) {\n   addonDestinationDir = path.join(addonDestinationDir, 'x'.repeat(30));"
        },
        {
            "sha": "53306399cb520ba6cc0202e31242388b9c585042",
            "filename": "test/addons/symlinked-module/test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Faddons%2Fsymlinked-module%2Ftest.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Faddons%2Fsymlinked-module%2Ftest.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons%2Fsymlinked-module%2Ftest.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -12,10 +12,11 @@ const assert = require('assert');\n // This test should pass in Node.js v4 and v5. This test will pass in Node.js\n // with https://github.com/nodejs/node/pull/5950 reverted.\n \n-common.refreshTmpDir();\n+const tmpdir = require('../../common/tmpdir');\n+tmpdir.refresh();\n \n const addonPath = path.join(__dirname, 'build', common.buildType);\n-const addonLink = path.join(common.tmpDir, 'addon');\n+const addonLink = path.join(tmpdir.path, 'addon');\n \n try {\n   fs.symlinkSync(addonPath, addonLink);"
        },
        {
            "sha": "03d2902c835d485e4e6b276f1194869e073bf409",
            "filename": "test/async-hooks/test-graph.pipeconnect.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fasync-hooks%2Ftest-graph.pipeconnect.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fasync-hooks%2Ftest-graph.pipeconnect.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-graph.pipeconnect.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -6,7 +6,8 @@ const verifyGraph = require('./verify-graph');\n \n const net = require('net');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const hooks = initHooks();\n hooks.enable();"
        },
        {
            "sha": "df4b8110e67ec4a490b1591d67f904d8ceb6b3f7",
            "filename": "test/async-hooks/test-pipeconnectwrap.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fasync-hooks%2Ftest-pipeconnectwrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fasync-hooks%2Ftest-pipeconnectwrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-pipeconnectwrap.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,7 +8,8 @@ const { checkInvocations } = require('./hook-checks');\n \n const net = require('net');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const hooks = initHooks();\n hooks.enable();"
        },
        {
            "sha": "73779fd5372d88d64a1c6802226b2a449e64457e",
            "filename": "test/common/README.md",
            "status": "modified",
            "additions": 14,
            "deletions": 10,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fcommon%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fcommon%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2FREADME.md?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -12,6 +12,7 @@ This directory contains modules used to test the Node.js implementation.\n * [Fixtures module](#fixtures-module)\n * [HTTP2 module](#http2-module)\n * [Internet module](#internet-module)\n+* [tmpdir module](#tmpdir-module)\n * [WPT module](#wpt-module)\n \n ## Benchmark Module\n@@ -332,11 +333,6 @@ A port number for tests to use if one is needed.\n \n Logs '1..0 # Skipped: ' + `msg`\n \n-### refreshTmpDir()\n-* return [&lt;String>]\n-\n-Deletes the testing 'tmp' directory and recreates it.\n-\n ### restoreStderr()\n \n Restore the original `process.stderr.write`. Used to restore `stderr` to its\n@@ -379,11 +375,6 @@ Platform normalizes the `pwd` command.\n \n Synchronous version of `spawnPwd`.\n \n-### tmpDir\n-* [&lt;String>]\n-\n-The realpath of the 'tmp' directory.\n-\n ## Countdown Module\n \n The `Countdown` module provides a simple countdown mechanism for tests that\n@@ -665,6 +656,19 @@ via `NODE_TEST_*` environment variables. For example, to configure\n `internet.addresses.INET_HOST`, set the environment\n variable `NODE_TEST_INET_HOST` to a specified host.\n \n+## tmpdir Module\n+\n+The `tmpdir` module supports the use of a temporary directory for testing.\n+\n+### path\n+* [&lt;String>]\n+\n+The realpath of the testing temporary directory.\n+\n+### refresh()\n+\n+Deletes and recreates the testing temporary directory.\n+\n ## WPT Module\n \n The wpt.js module is a port of parts of"
        },
        {
            "sha": "e8546db3a2f4eaa183c5c74a66735dcc3437b20e",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 2,
            "deletions": 64,
            "changes": 66,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -31,16 +31,10 @@ const stream = require('stream');\n const util = require('util');\n const Timer = process.binding('timer_wrap').Timer;\n const { fixturesDir } = require('./fixtures');\n-\n-const testRoot = process.env.NODE_TEST_DIR ?\n-  fs.realpathSync(process.env.NODE_TEST_DIR) : path.resolve(__dirname, '..');\n+const tmpdir = require('./tmpdir');\n \n const noop = () => {};\n \n-// Using a `.` prefixed name, which is the convention for \"hidden\" on POSIX,\n-// gets tools to ignore it by default or by simple rules, especially eslint.\n-let tmpDirName = '.tmp';\n-\n Object.defineProperty(exports, 'PORT', {\n   get: () => {\n     if (+process.env.TEST_PARALLEL) {\n@@ -120,62 +114,6 @@ if (process.env.NODE_TEST_WITH_ASYNC_HOOKS) {\n   }).enable();\n }\n \n-function rimrafSync(p) {\n-  let st;\n-  try {\n-    st = fs.lstatSync(p);\n-  } catch (e) {\n-    if (e.code === 'ENOENT')\n-      return;\n-  }\n-\n-  try {\n-    if (st && st.isDirectory())\n-      rmdirSync(p, null);\n-    else\n-      fs.unlinkSync(p);\n-  } catch (e) {\n-    if (e.code === 'ENOENT')\n-      return;\n-    if (e.code === 'EPERM')\n-      return rmdirSync(p, e);\n-    if (e.code !== 'EISDIR')\n-      throw e;\n-    rmdirSync(p, e);\n-  }\n-}\n-\n-function rmdirSync(p, originalEr) {\n-  try {\n-    fs.rmdirSync(p);\n-  } catch (e) {\n-    if (e.code === 'ENOTDIR')\n-      throw originalEr;\n-    if (e.code === 'ENOTEMPTY' || e.code === 'EEXIST' || e.code === 'EPERM') {\n-      const enc = exports.isLinux ? 'buffer' : 'utf8';\n-      fs.readdirSync(p, enc).forEach((f) => {\n-        if (f instanceof Buffer) {\n-          const buf = Buffer.concat([Buffer.from(p), Buffer.from(path.sep), f]);\n-          rimrafSync(buf);\n-        } else {\n-          rimrafSync(path.join(p, f));\n-        }\n-      });\n-      fs.rmdirSync(p);\n-    }\n-  }\n-}\n-\n-exports.refreshTmpDir = function() {\n-  rimrafSync(exports.tmpDir);\n-  fs.mkdirSync(exports.tmpDir);\n-};\n-\n-if (process.env.TEST_THREAD_ID) {\n-  tmpDirName += `.${process.env.TEST_THREAD_ID}`;\n-}\n-exports.tmpDir = path.join(testRoot, tmpDirName);\n-\n let opensslCli = null;\n let inFreeBSDJail = null;\n let localhostIPv4 = null;\n@@ -269,7 +207,7 @@ Object.defineProperty(exports, 'hasFipsCrypto', {\n });\n \n {\n-  const localRelative = path.relative(process.cwd(), `${exports.tmpDir}/`);\n+  const localRelative = path.relative(process.cwd(), `${tmpdir.path}/`);\n   const pipePrefix = exports.isWindows ? '\\\\\\\\.\\\\pipe\\\\' : localRelative;\n   const pipeName = `node-test.${process.pid}.sock`;\n   exports.PIPE = path.join(pipePrefix, pipeName);"
        },
        {
            "sha": "ed731b3e7a1ffb29c54dc1e01442ed31115b8c02",
            "filename": "test/common/tmpdir.js",
            "status": "added",
            "additions": 67,
            "deletions": 0,
            "changes": 67,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fcommon%2Ftmpdir.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fcommon%2Ftmpdir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Ftmpdir.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -0,0 +1,67 @@\n+/* eslint-disable required-modules */\n+'use strict';\n+\n+const fs = require('fs');\n+const path = require('path');\n+\n+function rimrafSync(p) {\n+  let st;\n+  try {\n+    st = fs.lstatSync(p);\n+  } catch (e) {\n+    if (e.code === 'ENOENT')\n+      return;\n+  }\n+\n+  try {\n+    if (st && st.isDirectory())\n+      rmdirSync(p, null);\n+    else\n+      fs.unlinkSync(p);\n+  } catch (e) {\n+    if (e.code === 'ENOENT')\n+      return;\n+    if (e.code === 'EPERM')\n+      return rmdirSync(p, e);\n+    if (e.code !== 'EISDIR')\n+      throw e;\n+    rmdirSync(p, e);\n+  }\n+}\n+\n+function rmdirSync(p, originalEr) {\n+  try {\n+    fs.rmdirSync(p);\n+  } catch (e) {\n+    if (e.code === 'ENOTDIR')\n+      throw originalEr;\n+    if (e.code === 'ENOTEMPTY' || e.code === 'EEXIST' || e.code === 'EPERM') {\n+      const enc = process.platform === 'linux' ? 'buffer' : 'utf8';\n+      fs.readdirSync(p, enc).forEach((f) => {\n+        if (f instanceof Buffer) {\n+          const buf = Buffer.concat([Buffer.from(p), Buffer.from(path.sep), f]);\n+          rimrafSync(buf);\n+        } else {\n+          rimrafSync(path.join(p, f));\n+        }\n+      });\n+      fs.rmdirSync(p);\n+    }\n+  }\n+}\n+\n+const testRoot = process.env.NODE_TEST_DIR ?\n+  fs.realpathSync(process.env.NODE_TEST_DIR) : path.resolve(__dirname, '..');\n+\n+// Using a `.` prefixed name, which is the convention for \"hidden\" on POSIX,\n+// gets tools to ignore it by default or by simple rules, especially eslint.\n+let tmpdirName = '.tmp';\n+if (process.env.TEST_THREAD_ID) {\n+  tmpdirName += `.${process.env.TEST_THREAD_ID}`;\n+}\n+exports.path = path.join(testRoot, tmpdirName);\n+\n+exports.refresh = () => {\n+  rimrafSync(exports.path);\n+  fs.mkdirSync(exports.path);\n+};"
        },
        {
            "sha": "e8473c36473bd26f5ba7aa86d78e1be175ddc9b7",
            "filename": "test/es-module/test-esm-preserve-symlinks.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fes-module%2Ftest-esm-preserve-symlinks.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fes-module%2Ftest-esm-preserve-symlinks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fes-module%2Ftest-esm-preserve-symlinks.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -7,8 +7,9 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n-const tmpDir = common.tmpDir;\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+const tmpDir = tmpdir.path;\n \n const entry = path.join(tmpDir, 'entry.js');\n const real = path.join(tmpDir, 'real.js');"
        },
        {
            "sha": "074230ac06c4b5a677df3b8cafff9037b4b22756",
            "filename": "test/es-module/test-esm-symlink.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fes-module%2Ftest-esm-symlink.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fes-module%2Ftest-esm-symlink.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fes-module%2Ftest-esm-symlink.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -6,8 +6,9 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n-const tmpDir = common.tmpDir;\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+const tmpDir = tmpdir.path;\n \n const entry = path.join(tmpDir, 'entry.mjs');\n const real = path.join(tmpDir, 'index.mjs');"
        },
        {
            "sha": "0f75896134f7e30747da8f770a4e0f14f759f3cd",
            "filename": "test/known_issues/test-cwd-enoent-file.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fknown_issues%2Ftest-cwd-enoent-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fknown_issues%2Ftest-cwd-enoent-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fknown_issues%2Ftest-cwd-enoent-file.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -17,8 +17,9 @@ const fs = require('fs');\n if (process.argv[2] === 'child') {\n   // Do nothing.\n } else {\n-  common.refreshTmpDir();\n-  const dir = fs.mkdtempSync(`${common.tmpDir}/`);\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n+  const dir = fs.mkdtempSync(`${tmpdir.path}/`);\n   process.chdir(dir);\n   fs.rmdirSync(dir);\n   assert.throws(process.cwd,"
        },
        {
            "sha": "3a51e8725eec60ab196c43e8b94b8deaf4468156",
            "filename": "test/known_issues/test-module-deleted-extensions.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fknown_issues%2Ftest-module-deleted-extensions.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fknown_issues%2Ftest-module-deleted-extensions.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fknown_issues%2Ftest-module-deleted-extensions.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,14 +4,15 @@ const common = require('../common');\n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n-const file = path.join(common.tmpDir, 'test-extensions.foo.bar');\n+const tmpdir = require('../common/tmpdir');\n+const file = path.join(tmpdir.path, 'test-extensions.foo.bar');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n fs.writeFileSync(file, '', 'utf8');\n require.extensions['.foo.bar'] = (module, path) => {};\n delete require.extensions['.foo.bar'];\n require.extensions['.bar'] = common.mustCall((module, path) => {\n   assert.strictEqual(module.id, file);\n   assert.strictEqual(path, file);\n });\n-require(path.join(common.tmpDir, 'test-extensions'));\n+require(path.join(tmpdir.path, 'test-extensions'));"
        },
        {
            "sha": "ad01b4e5803ce51386ebd7583be5f77a2b0a2177",
            "filename": "test/parallel/test-benchmark-fs.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-benchmark-fs.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-benchmark-fs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-benchmark-fs.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,9 +1,10 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n const runBenchmark = require('../common/benchmark');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n runBenchmark('fs', [\n   'n=1',\n@@ -16,4 +17,4 @@ runBenchmark('fs', [\n   'statSyncType=fstatSync',\n   'encodingType=buf',\n   'filesize=1024'\n-], { NODE_TMPDIR: common.tmpDir, NODEJS_BENCHMARK_ZERO_ALLOWED: 1 });\n+], { NODE_TMPDIR: tmpdir.path, NODEJS_BENCHMARK_ZERO_ALLOWED: 1 });"
        },
        {
            "sha": "42855cd663e826da19b9ac5ae6d7e040f9aee688",
            "filename": "test/parallel/test-child-process-fork-exec-path.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-child-process-fork-exec-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-child-process-fork-exec-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-child-process-fork-exec-path.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -24,17 +24,18 @@ const common = require('../common');\n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n+const tmpdir = require('../common/tmpdir');\n const msg = { test: 'this' };\n const nodePath = process.execPath;\n-const copyPath = path.join(common.tmpDir, 'node-copy.exe');\n+const copyPath = path.join(tmpdir.path, 'node-copy.exe');\n \n if (process.env.FORK) {\n   assert(process.send);\n   assert.strictEqual(process.argv[0], copyPath);\n   process.send(msg);\n   process.exit();\n } else {\n-  common.refreshTmpDir();\n+  tmpdir.refresh();\n   try {\n     fs.unlinkSync(copyPath);\n   } catch (e) {"
        },
        {
            "sha": "e4ae2d1aea28f2b7d50db4f68ffe480d248a9e12",
            "filename": "test/parallel/test-cli-node-options-disallowed.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cli-node-options-disallowed.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cli-node-options-disallowed.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cli-node-options-disallowed.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,8 +8,9 @@ if (process.config.variables.node_without_node_options)\n const assert = require('assert');\n const exec = require('child_process').execFile;\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n disallow('--version');\n disallow('-v');"
        },
        {
            "sha": "29358134c22c990f32eaada93cb9b27af61c6b8d",
            "filename": "test/parallel/test-cli-node-options.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cli-node-options.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cli-node-options.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cli-node-options.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,8 +8,9 @@ if (process.config.variables.node_without_node_options)\n const assert = require('assert');\n const exec = require('child_process').execFile;\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n expect(`-r ${require.resolve('../fixtures/printA.js')}`, 'A\\nB\\n');\n expect('--no-deprecation', 'B\\n');"
        },
        {
            "sha": "485276befaf39babc6bd320b11a76d7a0e110ee4",
            "filename": "test/parallel/test-cluster-cwd.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cluster-cwd.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cluster-cwd.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-cwd.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -2,19 +2,20 @@\n const common = require('../common');\n const assert = require('assert');\n const cluster = require('cluster');\n+const tmpdir = require('../common/tmpdir');\n \n if (cluster.isMaster) {\n-  common.refreshTmpDir();\n+  tmpdir.refresh();\n \n   assert.strictEqual(cluster.settings.cwd, undefined);\n   cluster.fork().on('message', common.mustCall((msg) => {\n     assert.strictEqual(msg, process.cwd());\n   }));\n \n-  cluster.setupMaster({ cwd: common.tmpDir });\n-  assert.strictEqual(cluster.settings.cwd, common.tmpDir);\n+  cluster.setupMaster({ cwd: tmpdir.path });\n+  assert.strictEqual(cluster.settings.cwd, tmpdir.path);\n   cluster.fork().on('message', common.mustCall((msg) => {\n-    assert.strictEqual(msg, common.tmpDir);\n+    assert.strictEqual(msg, tmpdir.path);\n   }));\n } else {\n   process.send(process.cwd());"
        },
        {
            "sha": "c6a2a8ac25e2515bcb73e45a6f75b8a6fa5355eb",
            "filename": "test/parallel/test-cluster-eaccess.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cluster-eaccess.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cluster-eaccess.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-eaccess.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -33,7 +33,8 @@ const net = require('net');\n \n if (cluster.isMaster && process.argv.length !== 3) {\n   // cluster.isMaster\n-  common.refreshTmpDir();\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n   const PIPE_NAME = common.PIPE;\n   const worker = cluster.fork({ PIPE_NAME });\n "
        },
        {
            "sha": "9e58fb297b28fe03e0b1a4b6bed278e351fbb439",
            "filename": "test/parallel/test-cluster-http-pipe.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cluster-http-pipe.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cluster-http-pipe.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-http-pipe.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -32,7 +32,8 @@ const cluster = require('cluster');\n const http = require('http');\n \n if (cluster.isMaster) {\n-  common.refreshTmpDir();\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n   const worker = cluster.fork();\n   worker.on('message', common.mustCall((msg) => {\n     assert.strictEqual(msg, 'DONE');"
        },
        {
            "sha": "ce9ead9e2eb9587923ee47891a0365dbb489ab67",
            "filename": "test/parallel/test-cluster-net-listen-relative-path.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -6,6 +6,8 @@ const net = require('net');\n const path = require('path');\n const fs = require('fs');\n \n+const tmpdir = require('../common/tmpdir');\n+\n if (common.isWindows)\n   common.skip('On Windows named pipes live in their own ' +\n               'filesystem and don\\'t have a ~100 byte limit');\n@@ -20,8 +22,8 @@ assert.strictEqual(path.resolve(socketDir, socketName).length > 100, true,\n \n if (cluster.isMaster) {\n   // ensure that the worker exits peacefully\n-  common.refreshTmpDir();\n-  process.chdir(common.tmpDir);\n+  tmpdir.refresh();\n+  process.chdir(tmpdir.path);\n   fs.mkdirSync(socketDir);\n   cluster.fork().on('exit', common.mustCall(function(statusCode) {\n     assert.strictEqual(statusCode, 0);"
        },
        {
            "sha": "7619d91191617b33814364d1f040be14491500e3",
            "filename": "test/parallel/test-crypto-sign-verify.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-crypto-sign-verify.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-crypto-sign-verify.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-crypto-sign-verify.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -297,11 +297,12 @@ common.expectsError(\n       padding: crypto.constants.RSA_PKCS1_PSS_PADDING\n     });\n \n-  common.refreshTmpDir();\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n \n-  const sigfile = path.join(common.tmpDir, 's5.sig');\n+  const sigfile = path.join(tmpdir.path, 's5.sig');\n   fs.writeFileSync(sigfile, s5);\n-  const msgfile = path.join(common.tmpDir, 's5.msg');\n+  const msgfile = path.join(tmpdir.path, 's5.msg');\n   fs.writeFileSync(msgfile, msg);\n \n   const cmd ="
        },
        {
            "sha": "b83ff6ff883a05bf8979c382d9adee525e7932c3",
            "filename": "test/parallel/test-cwd-enoent-preload.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cwd-enoent-preload.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cwd-enoent-preload.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cwd-enoent-preload.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,10 +8,11 @@ const assert = require('assert');\n const fs = require('fs');\n const spawn = require('child_process').spawn;\n const fixtures = require('../common/fixtures');\n+const tmpdir = require('../common/tmpdir');\n \n-const dirname = `${common.tmpDir}/cwd-does-not-exist-${process.pid}`;\n+const dirname = `${tmpdir.path}/cwd-does-not-exist-${process.pid}`;\n const abspathFile = fixtures.path('a.js');\n-common.refreshTmpDir();\n+tmpdir.refresh();\n fs.mkdirSync(dirname);\n process.chdir(dirname);\n fs.rmdirSync(dirname);"
        },
        {
            "sha": "d42679d8688e0638e37dfc9de89b9c379e59532e",
            "filename": "test/parallel/test-cwd-enoent-repl.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cwd-enoent-repl.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cwd-enoent-repl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cwd-enoent-repl.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,8 +8,10 @@ const assert = require('assert');\n const fs = require('fs');\n const spawn = require('child_process').spawn;\n \n-const dirname = `${common.tmpDir}/cwd-does-not-exist-${process.pid}`;\n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+\n+const dirname = `${tmpdir.path}/cwd-does-not-exist-${process.pid}`;\n+tmpdir.refresh();\n fs.mkdirSync(dirname);\n process.chdir(dirname);\n fs.rmdirSync(dirname);"
        },
        {
            "sha": "e5d93f46ce60c0f761419b4f448aa2e01e5f6ec3",
            "filename": "test/parallel/test-cwd-enoent.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cwd-enoent.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-cwd-enoent.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cwd-enoent.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,8 +8,10 @@ const assert = require('assert');\n const fs = require('fs');\n const spawn = require('child_process').spawn;\n \n-const dirname = `${common.tmpDir}/cwd-does-not-exist-${process.pid}`;\n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+\n+const dirname = `${tmpdir.path}/cwd-does-not-exist-${process.pid}`;\n+tmpdir.refresh();\n fs.mkdirSync(dirname);\n process.chdir(dirname);\n fs.rmdirSync(dirname);"
        },
        {
            "sha": "4860417dd29bc5b49aca2e75b948a758ca335779",
            "filename": "test/parallel/test-file-write-stream.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-file-write-stream.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-file-write-stream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-file-write-stream.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,8 +25,9 @@ const assert = require('assert');\n \n const path = require('path');\n const fs = require('fs');\n-const fn = path.join(common.tmpDir, 'write.txt');\n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+const fn = path.join(tmpdir.path, 'write.txt');\n+tmpdir.refresh();\n const file = fs.createWriteStream(fn, {\n   highWaterMark: 10\n });"
        },
        {
            "sha": "2db06640e18dbafbcc64b56835b6d2c8f32c9311",
            "filename": "test/parallel/test-file-write-stream2.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-file-write-stream2.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-file-write-stream2.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-file-write-stream2.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,14 +20,16 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n \n const path = require('path');\n const fs = require('fs');\n \n+const tmpdir = require('../common/tmpdir');\n \n-const filepath = path.join(common.tmpDir, 'write.txt');\n+\n+const filepath = path.join(tmpdir.path, 'write.txt');\n \n const EXPECTED = '012345678910';\n \n@@ -58,7 +60,7 @@ function removeTestFile() {\n }\n \n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // drain at 0, return false at 10.\n const file = fs.createWriteStream(filepath, {"
        },
        {
            "sha": "6bb64e6092bfc624e610826346024bf3e5c7c024",
            "filename": "test/parallel/test-file-write-stream3.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-file-write-stream3.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-file-write-stream3.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-file-write-stream3.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,8 +25,10 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n+const tmpdir = require('../common/tmpdir');\n \n-const filepath = path.join(common.tmpDir, 'write_pos.txt');\n+\n+const filepath = path.join(tmpdir.path, 'write_pos.txt');\n \n \n const cb_expected = 'write open close write open close write open close ';\n@@ -51,7 +53,7 @@ process.on('exit', function() {\n });\n \n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n \n function run_test_1() {"
        },
        {
            "sha": "94031c2cbc1a9162324defdab31d934323bc43af",
            "filename": "test/parallel/test-fs-access.js",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-access.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-access.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-access.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -7,18 +7,20 @@ const common = require('../common');\n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n+\n const uv = process.binding('uv');\n \n-const doesNotExist = path.join(common.tmpDir, '__this_should_not_exist');\n-const readOnlyFile = path.join(common.tmpDir, 'read_only_file');\n-const readWriteFile = path.join(common.tmpDir, 'read_write_file');\n+const tmpdir = require('../common/tmpdir');\n+const doesNotExist = path.join(tmpdir.path, '__this_should_not_exist');\n+const readOnlyFile = path.join(tmpdir.path, 'read_only_file');\n+const readWriteFile = path.join(tmpdir.path, 'read_write_file');\n \n function createFileWithPerms(file, mode) {\n   fs.writeFileSync(file, '');\n   fs.chmodSync(file, mode);\n }\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n createFileWithPerms(readOnlyFile, 0o444);\n createFileWithPerms(readWriteFile, 0o666);\n "
        },
        {
            "sha": "b836d81bd5985c798053c470007948f1e97dd7f3",
            "filename": "test/parallel/test-fs-append-file-sync.js",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-append-file-sync.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-append-file-sync.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-append-file-sync.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -36,10 +36,11 @@ const data = '南越国是前203年至前111年存在于岭南地区的一个国\n              '历经五代君主。南越国是岭南地区的第一个有记载的政权国家，采用封建制和郡县制并存的制度，' +\n              '它的建立保证了秦末乱世岭南地区社会秩序的稳定，有效的改善了岭南地区落后的政治、##济现状。\\n';\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // test that empty file will be created and have content added\n-const filename = join(common.tmpDir, 'append-sync.txt');\n+const filename = join(tmpdir.path, 'append-sync.txt');\n \n fs.appendFileSync(filename, data);\n \n@@ -48,7 +49,7 @@ const fileData = fs.readFileSync(filename);\n assert.strictEqual(Buffer.byteLength(data), fileData.length);\n \n // test that appends data to a non empty file\n-const filename2 = join(common.tmpDir, 'append-sync2.txt');\n+const filename2 = join(tmpdir.path, 'append-sync2.txt');\n fs.writeFileSync(filename2, currentFileData);\n \n fs.appendFileSync(filename2, data);\n@@ -59,7 +60,7 @@ assert.strictEqual(Buffer.byteLength(data) + currentFileData.length,\n                    fileData2.length);\n \n // test that appendFileSync accepts buffers\n-const filename3 = join(common.tmpDir, 'append-sync3.txt');\n+const filename3 = join(tmpdir.path, 'append-sync3.txt');\n fs.writeFileSync(filename3, currentFileData);\n \n const buf = Buffer.from(data, 'utf8');\n@@ -70,7 +71,7 @@ const fileData3 = fs.readFileSync(filename3);\n assert.strictEqual(buf.length + currentFileData.length, fileData3.length);\n \n // test that appendFile accepts numbers.\n-const filename4 = join(common.tmpDir, 'append-sync4.txt');\n+const filename4 = join(tmpdir.path, 'append-sync4.txt');\n fs.writeFileSync(filename4, currentFileData, { mode: m });\n \n fs.appendFileSync(filename4, num, { mode: m });\n@@ -87,7 +88,7 @@ assert.strictEqual(Buffer.byteLength(String(num)) + currentFileData.length,\n                    fileData4.length);\n \n // test that appendFile accepts file descriptors\n-const filename5 = join(common.tmpDir, 'append-sync5.txt');\n+const filename5 = join(tmpdir.path, 'append-sync5.txt');\n fs.writeFileSync(filename5, currentFileData);\n \n const filename5fd = fs.openSync(filename5, 'a+', 0o600);"
        },
        {
            "sha": "8e9a0619b0a4fbd18c046ee0e551b3dd472153f5",
            "filename": "test/parallel/test-fs-append-file.js",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-append-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-append-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-append-file.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,7 +25,9 @@ const assert = require('assert');\n const fs = require('fs');\n const join = require('path').join;\n \n-const filename = join(common.tmpDir, 'append.txt');\n+const tmpdir = require('../common/tmpdir');\n+\n+const filename = join(tmpdir.path, 'append.txt');\n \n const currentFileData = 'ABCD';\n \n@@ -40,7 +42,7 @@ const s = '南越国是前203年至前111年存在于岭南地区的一个国家\n \n let ncallbacks = 0;\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // test that empty file will be created and have content added\n fs.appendFile(filename, s, function(e) {\n@@ -56,7 +58,7 @@ fs.appendFile(filename, s, function(e) {\n });\n \n // test that appends data to a non empty file\n-const filename2 = join(common.tmpDir, 'append2.txt');\n+const filename2 = join(tmpdir.path, 'append2.txt');\n fs.writeFileSync(filename2, currentFileData);\n \n fs.appendFile(filename2, s, function(e) {\n@@ -73,7 +75,7 @@ fs.appendFile(filename2, s, function(e) {\n });\n \n // test that appendFile accepts buffers\n-const filename3 = join(common.tmpDir, 'append3.txt');\n+const filename3 = join(tmpdir.path, 'append3.txt');\n fs.writeFileSync(filename3, currentFileData);\n \n const buf = Buffer.from(s, 'utf8');\n@@ -91,7 +93,7 @@ fs.appendFile(filename3, buf, function(e) {\n });\n \n // test that appendFile accepts numbers.\n-const filename4 = join(common.tmpDir, 'append4.txt');\n+const filename4 = join(tmpdir.path, 'append4.txt');\n fs.writeFileSync(filename4, currentFileData);\n \n const m = 0o600;\n@@ -115,7 +117,7 @@ fs.appendFile(filename4, n, { mode: m }, function(e) {\n });\n \n // test that appendFile accepts file descriptors\n-const filename5 = join(common.tmpDir, 'append5.txt');\n+const filename5 = join(tmpdir.path, 'append5.txt');\n fs.writeFileSync(filename5, currentFileData);\n \n fs.open(filename5, 'a+', function(e, fd) {\n@@ -146,7 +148,7 @@ fs.open(filename5, 'a+', function(e, fd) {\n \n // test that a missing callback emits a warning, even if the last argument is a\n // function.\n-const filename6 = join(common.tmpDir, 'append6.txt');\n+const filename6 = join(tmpdir.path, 'append6.txt');\n const warn = 'Calling an asynchronous function without callback is deprecated.';\n common.expectWarning('DeprecationWarning', warn);\n fs.appendFile(filename6, console.log);"
        },
        {
            "sha": "bb10c164dad0270404fec7593289d5e02526b66b",
            "filename": "test/parallel/test-fs-buffer.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-buffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-buffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-buffer.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -6,16 +6,17 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n assert.doesNotThrow(() => {\n-  fs.access(Buffer.from(common.tmpDir), common.mustCall((err) => {\n+  fs.access(Buffer.from(tmpdir.path), common.mustCall((err) => {\n     assert.ifError(err);\n   }));\n });\n \n assert.doesNotThrow(() => {\n-  const buf = Buffer.from(path.join(common.tmpDir, 'a.txt'));\n+  const buf = Buffer.from(path.join(tmpdir.path, 'a.txt'));\n   fs.open(buf, 'w+', common.mustCall((err, fd) => {\n     assert.ifError(err);\n     assert(fd);"
        },
        {
            "sha": "d5257d214bdb8125f90400f08f81ea16ba962583",
            "filename": "test/parallel/test-fs-buffertype-writesync.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-buffertype-writesync.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-buffertype-writesync.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-buffertype-writesync.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,5 +1,5 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n \n // This test ensures that writeSync does support inputs which\n // are then correctly converted into string buffers.\n@@ -8,10 +8,12 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-const filePath = path.join(common.tmpDir, 'test_buffer_type');\n+const tmpdir = require('../common/tmpdir');\n+\n+const filePath = path.join(tmpdir.path, 'test_buffer_type');\n const v = [true, false, 0, 1, Infinity, () => {}, {}, [], undefined, null];\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n v.forEach((value) => {\n   const fd = fs.openSync(filePath, 'w');"
        },
        {
            "sha": "7c1b14ff24c91ef7eeb0cb0b8453c729cccb5577",
            "filename": "test/parallel/test-fs-chmod.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-chmod.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-chmod.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-chmod.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -71,10 +71,11 @@ if (common.isWindows) {\n   mode_sync = 0o644;\n }\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const file1 = path.join(common.tmpDir, 'a.js');\n-const file2 = path.join(common.tmpDir, 'a1.js');\n+const file1 = path.join(tmpdir.path, 'a.js');\n+const file2 = path.join(tmpdir.path, 'a1.js');\n \n // Create file1.\n fs.closeSync(fs.openSync(file1, 'w'));\n@@ -130,7 +131,7 @@ fs.open(file2, 'w', common.mustCall((err, fd) => {\n \n // lchmod\n if (fs.lchmod) {\n-  const link = path.join(common.tmpDir, 'symbolic-link');\n+  const link = path.join(tmpdir.path, 'symbolic-link');\n \n   fs.symlinkSync(file2, link);\n "
        },
        {
            "sha": "a335065bf43cb782210f63d4fa164f4e74997c1f",
            "filename": "test/parallel/test-fs-copyfile.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-copyfile.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-copyfile.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-copyfile.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,11 +1,12 @@\n 'use strict';\n const common = require('../common');\n const fixtures = require('../common/fixtures');\n+const tmpdir = require('../common/tmpdir');\n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n const src = fixtures.path('a.js');\n-const dest = path.join(common.tmpDir, 'copyfile.out');\n+const dest = path.join(tmpdir.path, 'copyfile.out');\n const { COPYFILE_EXCL, UV_FS_COPYFILE_EXCL } = fs.constants;\n \n function verify(src, dest) {\n@@ -19,7 +20,7 @@ function verify(src, dest) {\n   assert.strictEqual(srcStat.size, destStat.size);\n }\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // Verify that flags are defined.\n assert.strictEqual(typeof COPYFILE_EXCL, 'number');"
        },
        {
            "sha": "1f575881e3743d0eafc80a45d0093c6179f61a41",
            "filename": "test/parallel/test-fs-fsync.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-fsync.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-fsync.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-fsync.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -23,15 +23,16 @@\n const common = require('../common');\n const assert = require('assert');\n const fixtures = require('../common/fixtures');\n+const tmpdir = require('../common/tmpdir');\n \n const fs = require('fs');\n const path = require('path');\n \n const fileFixture = fixtures.path('a.js');\n-const fileTemp = path.join(common.tmpDir, 'a.js');\n+const fileTemp = path.join(tmpdir.path, 'a.js');\n \n // Copy fixtures to temp.\n-common.refreshTmpDir();\n+tmpdir.refresh();\n fs.copyFileSync(fileFixture, fileTemp);\n \n fs.open(fileTemp, 'a', 0o777, common.mustCall(function(err, fd) {"
        },
        {
            "sha": "d007f4e985b2d571f16affb0b76116de25dcdf2c",
            "filename": "test/parallel/test-fs-link.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-link.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-link.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-link.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,11 +4,12 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // test creating and reading hard link\n-const srcPath = path.join(common.tmpDir, 'hardlink-target.txt');\n-const dstPath = path.join(common.tmpDir, 'link1.js');\n+const srcPath = path.join(tmpdir.path, 'hardlink-target.txt');\n+const dstPath = path.join(tmpdir.path, 'link1.js');\n fs.writeFileSync(srcPath, 'hello world');\n \n function callback(err) {"
        },
        {
            "sha": "74f63868b81054223472bdc56fd7cae0661562d6",
            "filename": "test/parallel/test-fs-long-path.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-long-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-long-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-long-path.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -28,12 +28,14 @@ const fs = require('fs');\n const path = require('path');\n const assert = require('assert');\n \n+const tmpdir = require('../common/tmpdir');\n+\n // make a path that will be at least 260 chars long.\n-const fileNameLen = Math.max(260 - common.tmpDir.length - 1, 1);\n-const fileName = path.join(common.tmpDir, 'x'.repeat(fileNameLen));\n+const fileNameLen = Math.max(260 - tmpdir.path.length - 1, 1);\n+const fileName = path.join(tmpdir.path, 'x'.repeat(fileNameLen));\n const fullPath = path.resolve(fileName);\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n console.log({\n   filenameLength: fileName.length,"
        },
        {
            "sha": "ca948ede18275921e883cb8a392be18d7acef780",
            "filename": "test/parallel/test-fs-make-callback.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-make-callback.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-make-callback.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-make-callback.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -7,12 +7,13 @@ const callbackThrowValues = [null, true, false, 0, 1, 'foo', /foo/, [], {}];\n const { sep } = require('path');\n const warn = 'Calling an asynchronous function without callback is deprecated.';\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n function testMakeCallback(cb) {\n   return function() {\n     // fs.mkdtemp() calls makeCallback() on its third argument\n-    fs.mkdtemp(`${common.tmpDir}${sep}`, {}, cb);\n+    fs.mkdtemp(`${tmpdir.path}${sep}`, {}, cb);\n   };\n }\n "
        },
        {
            "sha": "865a5dba951555519bb66005671b285e2823fff5",
            "filename": "test/parallel/test-fs-mkdir-rmdir.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-mkdir-rmdir.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-mkdir-rmdir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-mkdir-rmdir.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,9 +4,10 @@ const common = require('../common');\n const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n-const d = path.join(common.tmpDir, 'dir');\n+const tmpdir = require('../common/tmpdir');\n+const d = path.join(tmpdir.path, 'dir');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // Make sure the directory does not exist\n assert(!common.fileExists(d));"
        },
        {
            "sha": "937c73aca4a4c20e71c91bee0b672f2522b0ad22",
            "filename": "test/parallel/test-fs-mkdir.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-mkdir.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-mkdir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-mkdir.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -24,10 +24,11 @@ const common = require('../common');\n const assert = require('assert');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n {\n-  const pathname = `${common.tmpDir}/test1`;\n+  const pathname = `${tmpdir.path}/test1`;\n \n   fs.mkdir(pathname, common.mustCall(function(err) {\n     assert.strictEqual(err, null);\n@@ -36,7 +37,7 @@ common.refreshTmpDir();\n }\n \n {\n-  const pathname = `${common.tmpDir}/test2`;\n+  const pathname = `${tmpdir.path}/test2`;\n \n   fs.mkdir(pathname, 0o777, common.mustCall(function(err) {\n     assert.strictEqual(err, null);\n@@ -45,7 +46,7 @@ common.refreshTmpDir();\n }\n \n {\n-  const pathname = `${common.tmpDir}/test3`;\n+  const pathname = `${tmpdir.path}/test3`;\n \n   fs.mkdirSync(pathname);\n "
        },
        {
            "sha": "b27ab864173dd2b201312981733fafc4b5db8ef1",
            "filename": "test/parallel/test-fs-mkdtemp.js",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-mkdtemp.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-mkdtemp.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-mkdtemp.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -5,14 +5,15 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const tmpFolder = fs.mkdtempSync(path.join(common.tmpDir, 'foo.'));\n+const tmpFolder = fs.mkdtempSync(path.join(tmpdir.path, 'foo.'));\n \n assert.strictEqual(path.basename(tmpFolder).length, 'foo.XXXXXX'.length);\n assert(common.fileExists(tmpFolder));\n \n-const utf8 = fs.mkdtempSync(path.join(common.tmpDir, '\\u0222abc.'));\n+const utf8 = fs.mkdtempSync(path.join(tmpdir.path, '\\u0222abc.'));\n assert.strictEqual(Buffer.byteLength(path.basename(utf8)),\n                    Buffer.byteLength('\\u0222abc.XXXXXX'));\n assert(common.fileExists(utf8));\n@@ -23,13 +24,13 @@ function handler(err, folder) {\n   assert.strictEqual(this, undefined);\n }\n \n-fs.mkdtemp(path.join(common.tmpDir, 'bar.'), common.mustCall(handler));\n+fs.mkdtemp(path.join(tmpdir.path, 'bar.'), common.mustCall(handler));\n \n // Same test as above, but making sure that passing an options object doesn't\n // affect the way the callback function is handled.\n-fs.mkdtemp(path.join(common.tmpDir, 'bar.'), {}, common.mustCall(handler));\n+fs.mkdtemp(path.join(tmpdir.path, 'bar.'), {}, common.mustCall(handler));\n \n // Making sure that not passing a callback doesn't crash, as a default function\n // is passed internally.\n-assert.doesNotThrow(() => fs.mkdtemp(path.join(common.tmpDir, 'bar-')));\n-assert.doesNotThrow(() => fs.mkdtemp(path.join(common.tmpDir, 'bar-'), {}));\n+assert.doesNotThrow(() => fs.mkdtemp(path.join(tmpdir.path, 'bar-')));\n+assert.doesNotThrow(() => fs.mkdtemp(path.join(tmpdir.path, 'bar-'), {}));"
        },
        {
            "sha": "61ed3f6c285dd0e70899d248e3bd730526b54abe",
            "filename": "test/parallel/test-fs-non-number-arguments-throw.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-non-number-arguments-throw.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-non-number-arguments-throw.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-non-number-arguments-throw.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,9 +4,10 @@ const common = require('../common');\n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n-const tempFile = path.join(common.tmpDir, 'fs-non-number-arguments-throw');\n+const tmpdir = require('../common/tmpdir');\n+const tempFile = path.join(tmpdir.path, 'fs-non-number-arguments-throw');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n fs.writeFileSync(tempFile, 'abc\\ndef');\n \n // a sanity check when using numbers instead of strings"
        },
        {
            "sha": "acf5c739a930c31f9920aa66766707729fc40375",
            "filename": "test/parallel/test-fs-open-flags.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-open-flags.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-open-flags.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-open-flags.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -84,8 +84,9 @@ common.expectsError(\n );\n \n if (common.isLinux || common.isOSX) {\n-  common.refreshTmpDir();\n-  const file = path.join(common.tmpDir, 'a.js');\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n+  const file = path.join(tmpdir.path, 'a.js');\n   fs.copyFileSync(fixtures.path('a.js'), file);\n   fs.open(file, O_DSYNC, common.mustCall(assert.ifError));\n }"
        },
        {
            "sha": "0e5ab6997e3342078a5388c7804bc510b2653b0a",
            "filename": "test/parallel/test-fs-open-numeric-flags.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-open-numeric-flags.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-open-numeric-flags.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-open-numeric-flags.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,14 +1,15 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n \n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // O_WRONLY without O_CREAT shall fail with ENOENT\n-const pathNE = path.join(common.tmpDir, 'file-should-not-exist');\n+const pathNE = path.join(tmpdir.path, 'file-should-not-exist');\n assert.throws(\n   () => fs.openSync(pathNE, fs.constants.O_WRONLY),\n   (e) => e.code === 'ENOENT'"
        },
        {
            "sha": "ca5079b07dab3ff33699e74b5c0437bee7810fe8",
            "filename": "test/parallel/test-fs-options-immutable.js",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-options-immutable.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-options-immutable.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-options-immutable.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -14,7 +14,8 @@ const path = require('path');\n \n const errHandler = (e) => assert.ifError(e);\n const options = Object.freeze({});\n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n {\n   assert.doesNotThrow(() =>\n@@ -31,8 +32,8 @@ common.refreshTmpDir();\n }\n \n if (common.canCreateSymLink()) {\n-  const sourceFile = path.resolve(common.tmpDir, 'test-readlink');\n-  const linkFile = path.resolve(common.tmpDir, 'test-readlink-link');\n+  const sourceFile = path.resolve(tmpdir.path, 'test-readlink');\n+  const linkFile = path.resolve(tmpdir.path, 'test-readlink-link');\n \n   fs.writeFileSync(sourceFile, '');\n   fs.symlinkSync(sourceFile, linkFile);\n@@ -44,15 +45,15 @@ if (common.canCreateSymLink()) {\n }\n \n {\n-  const fileName = path.resolve(common.tmpDir, 'writeFile');\n+  const fileName = path.resolve(tmpdir.path, 'writeFile');\n   assert.doesNotThrow(() => fs.writeFileSync(fileName, 'ABCD', options));\n   assert.doesNotThrow(() =>\n     fs.writeFile(fileName, 'ABCD', options, common.mustCall(errHandler))\n   );\n }\n \n {\n-  const fileName = path.resolve(common.tmpDir, 'appendFile');\n+  const fileName = path.resolve(tmpdir.path, 'appendFile');\n   assert.doesNotThrow(() => fs.appendFileSync(fileName, 'ABCD', options));\n   assert.doesNotThrow(() =>\n     fs.appendFile(fileName, 'ABCD', options, common.mustCall(errHandler))\n@@ -82,15 +83,15 @@ if (common.canCreateSymLink()) {\n }\n \n {\n-  const tempFileName = path.resolve(common.tmpDir, 'mkdtemp-');\n+  const tempFileName = path.resolve(tmpdir.path, 'mkdtemp-');\n   assert.doesNotThrow(() => fs.mkdtempSync(tempFileName, options));\n   assert.doesNotThrow(() =>\n     fs.mkdtemp(tempFileName, options, common.mustCall(errHandler))\n   );\n }\n \n {\n-  const fileName = path.resolve(common.tmpDir, 'streams');\n+  const fileName = path.resolve(tmpdir.path, 'streams');\n   assert.doesNotThrow(() => {\n     fs.WriteStream(fileName, options).once('open', common.mustCall(() => {\n       assert.doesNotThrow(() => fs.ReadStream(fileName, options));"
        },
        {
            "sha": "13cf5e0e0f45f33f4b81a5f6c5ab2158be871377",
            "filename": "test/parallel/test-fs-promisified.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-promisified.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-promisified.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-promisified.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,9 +20,10 @@ const exists = promisify(fs.exists);\n   }));\n }\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n {\n-  const filename = path.join(common.tmpDir, 'write-promise.txt');\n+  const filename = path.join(tmpdir.path, 'write-promise.txt');\n   const fd = fs.openSync(filename, 'w');\n   write(fd, Buffer.from('foobar')).then(common.mustCall((obj) => {\n     assert.strictEqual(typeof obj.bytesWritten, 'number');"
        },
        {
            "sha": "7d4b264002b9f376325a48dcc88d50419af6e29a",
            "filename": "test/parallel/test-fs-read-stream-fd.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-read-stream-fd.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-read-stream-fd.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-read-stream-fd.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,15 +20,16 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n const fs = require('fs');\n const assert = require('assert');\n const path = require('path');\n-const file = path.join(common.tmpDir, '/read_stream_fd_test.txt');\n+const tmpdir = require('../common/tmpdir');\n+const file = path.join(tmpdir.path, '/read_stream_fd_test.txt');\n const input = 'hello world';\n \n let output = '';\n-common.refreshTmpDir();\n+tmpdir.refresh();\n fs.writeFileSync(file, input);\n \n const fd = fs.openSync(file, 'r');"
        },
        {
            "sha": "b17dc8d7292664bb72f8a20ebfb5084678e985fd",
            "filename": "test/parallel/test-fs-readdir-ucs2.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readdir-ucs2.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readdir-ucs2.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-readdir-ucs2.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,9 +8,10 @@ const path = require('path');\n const fs = require('fs');\n const assert = require('assert');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n const filename = '\\uD83D\\uDC04';\n-const root = Buffer.from(`${common.tmpDir}${path.sep}`);\n+const root = Buffer.from(`${tmpdir.path}${path.sep}`);\n const filebuff = Buffer.from(filename, 'ucs2');\n const fullpath = Buffer.concat([root, filebuff]);\n \n@@ -22,7 +23,7 @@ try {\n   throw e;\n }\n \n-fs.readdir(common.tmpDir, 'ucs2', common.mustCall((err, list) => {\n+fs.readdir(tmpdir.path, 'ucs2', common.mustCall((err, list) => {\n   assert.ifError(err);\n   assert.strictEqual(1, list.length);\n   const fn = list[0];"
        },
        {
            "sha": "a24def6f12db9e890c218244a56181cf454cbfe2",
            "filename": "test/parallel/test-fs-readdir.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readdir.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readdir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-readdir.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,11 +4,13 @@ const common = require('../common');\n const assert = require('assert');\n const fs = require('fs');\n \n-const readdirDir = common.tmpDir;\n+const tmpdir = require('../common/tmpdir');\n+\n+const readdirDir = tmpdir.path;\n const files = ['empty', 'files', 'for', 'just', 'testing'];\n \n // Make sure tmp directory is clean\n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // Create the necessary files\n files.forEach(function(currentFile) {"
        },
        {
            "sha": "740a3876a2d76c48967e0d8271f99ed4d31a2189",
            "filename": "test/parallel/test-fs-readfile-pipe-large.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readfile-pipe-large.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readfile-pipe-large.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-readfile-pipe-large.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -18,9 +18,11 @@ if (process.argv[2] === 'child') {\n   return;\n }\n \n-const filename = path.join(common.tmpDir, '/readfile_pipe_large_test.txt');\n+const tmpdir = require('../common/tmpdir');\n+\n+const filename = path.join(tmpdir.path, '/readfile_pipe_large_test.txt');\n const dataExpected = 'a'.repeat(999999);\n-common.refreshTmpDir();\n+tmpdir.refresh();\n fs.writeFileSync(filename, dataExpected);\n \n const exec = require('child_process').exec;"
        },
        {
            "sha": "1ed6fefb5ccfc792b3003bdfb4daec7d7e2a2843",
            "filename": "test/parallel/test-fs-readfile-unlink.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readfile-unlink.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readfile-unlink.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-readfile-unlink.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,18 +20,20 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n \n // Test that unlink succeeds immediately after readFile completes.\n \n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-const fileName = path.resolve(common.tmpDir, 'test.bin');\n+const tmpdir = require('../common/tmpdir');\n+\n+const fileName = path.resolve(tmpdir.path, 'test.bin');\n const buf = Buffer.alloc(512 * 1024, 42);\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n fs.writeFileSync(fileName, buf);\n "
        },
        {
            "sha": "18a06b1ba117db512118bcbd7a146e01fee83d32",
            "filename": "test/parallel/test-fs-readfilesync-pipe-large.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readfilesync-pipe-large.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-readfilesync-pipe-large.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-readfilesync-pipe-large.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -15,9 +15,11 @@ if (process.argv[2] === 'child') {\n   return;\n }\n \n-const filename = path.join(common.tmpDir, '/readfilesync_pipe_large_test.txt');\n+const tmpdir = require('../common/tmpdir');\n+\n+const filename = path.join(tmpdir.path, '/readfilesync_pipe_large_test.txt');\n const dataExpected = 'a'.repeat(999999);\n-common.refreshTmpDir();\n+tmpdir.refresh();\n fs.writeFileSync(filename, dataExpected);\n \n const exec = require('child_process').exec;"
        },
        {
            "sha": "6cfd79cecfb69428a22a0e239cc29225489e4c94",
            "filename": "test/parallel/test-fs-realpath.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-realpath.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-realpath.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-realpath.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -22,6 +22,7 @@\n 'use strict';\n const common = require('../common');\n const fixtures = require('../common/fixtures');\n+const tmpdir = require('../common/tmpdir');\n \n const assert = require('assert');\n const fs = require('fs');\n@@ -31,9 +32,9 @@ let async_completed = 0;\n let async_expected = 0;\n const unlink = [];\n let skipSymlinks = false;\n-const tmpDir = common.tmpDir;\n+const tmpDir = tmpdir.path;\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n let root = '/';\n let assertEqualPath = assert.strictEqual;\n@@ -391,7 +392,8 @@ function test_up_multiple(realpath, realpathSync, cb) {\n     common.printSkipMessage('symlink test (no privs)');\n     return cb();\n   }\n-  common.refreshTmpDir();\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n   fs.mkdirSync(tmp('a'), 0o755);\n   fs.mkdirSync(tmp('a/b'), 0o755);\n   fs.symlinkSync('..', tmp('a/d'), 'dir');"
        },
        {
            "sha": "5d8c3dfec90aab833e1611e6e6a16aef95119cf7",
            "filename": "test/parallel/test-fs-sir-writes-alot.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-sir-writes-alot.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-sir-writes-alot.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-sir-writes-alot.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,14 +20,16 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n const fs = require('fs');\n const assert = require('assert');\n const join = require('path').join;\n \n-const filename = join(common.tmpDir, 'out.txt');\n+const tmpdir = require('../common/tmpdir');\n \n-common.refreshTmpDir();\n+const filename = join(tmpdir.path, 'out.txt');\n+\n+tmpdir.refresh();\n \n const fd = fs.openSync(filename, 'w');\n "
        },
        {
            "sha": "8c0037b24312ff8a76a3f8c43393ff92cb7e885e",
            "filename": "test/parallel/test-fs-stream-double-close.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-stream-double-close.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-stream-double-close.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-stream-double-close.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -23,15 +23,16 @@\n const common = require('../common');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n test1(fs.createReadStream(__filename));\n test2(fs.createReadStream(__filename));\n test3(fs.createReadStream(__filename));\n \n-test1(fs.createWriteStream(`${common.tmpDir}/dummy1`));\n-test2(fs.createWriteStream(`${common.tmpDir}/dummy2`));\n-test3(fs.createWriteStream(`${common.tmpDir}/dummy3`));\n+test1(fs.createWriteStream(`${tmpdir.path}/dummy1`));\n+test2(fs.createWriteStream(`${tmpdir.path}/dummy2`));\n+test3(fs.createWriteStream(`${tmpdir.path}/dummy3`));\n \n function test1(stream) {\n   stream.destroy();"
        },
        {
            "sha": "308ab04048847142b78a8ac6a7196821ef17afbd",
            "filename": "test/parallel/test-fs-symlink-dir-junction-relative.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-symlink-dir-junction-relative.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-symlink-dir-junction-relative.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-symlink-dir-junction-relative.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -28,12 +28,14 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-const linkPath1 = path.join(common.tmpDir, 'junction1');\n-const linkPath2 = path.join(common.tmpDir, 'junction2');\n+const tmpdir = require('../common/tmpdir');\n+\n+const linkPath1 = path.join(tmpdir.path, 'junction1');\n+const linkPath2 = path.join(tmpdir.path, 'junction2');\n const linkTarget = fixtures.fixturesDir;\n const linkData = fixtures.fixturesDir;\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // Test fs.symlink()\n fs.symlink(linkData, linkPath1, 'junction', common.mustCall(function(err) {"
        },
        {
            "sha": "cd9459bf44afe10b73a0bf8f1827552a365d5d38",
            "filename": "test/parallel/test-fs-symlink-dir-junction.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-symlink-dir-junction.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-symlink-dir-junction.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-symlink-dir-junction.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -26,11 +26,13 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n+const tmpdir = require('../common/tmpdir');\n+\n // test creating and reading symbolic link\n const linkData = fixtures.path('cycles/');\n-const linkPath = path.join(common.tmpDir, 'cycles_link');\n+const linkPath = path.join(tmpdir.path, 'cycles_link');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n fs.symlink(linkData, linkPath, 'junction', common.mustCall(function(err) {\n   assert.ifError(err);"
        },
        {
            "sha": "19903fff58c761c1058b9e493837e3a3b7c552b1",
            "filename": "test/parallel/test-fs-symlink.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-symlink.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-symlink.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-symlink.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -32,11 +32,12 @@ const fs = require('fs');\n let linkTime;\n let fileTime;\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // test creating and reading symbolic link\n const linkData = fixtures.path('/cycles/root.js');\n-const linkPath = path.join(common.tmpDir, 'symlink1.js');\n+const linkPath = path.join(tmpdir.path, 'symlink1.js');\n \n fs.symlink(linkData, linkPath, common.mustCall(function(err) {\n   assert.ifError(err);"
        },
        {
            "sha": "a014277a6ba2598de7b45971c1c5a88664d46848",
            "filename": "test/parallel/test-fs-syncwritestream.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-syncwritestream.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-syncwritestream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-syncwritestream.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -21,9 +21,10 @@ if (process.argv[2] === 'child') {\n   return;\n }\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const filename = path.join(common.tmpDir, 'stdout');\n+const filename = path.join(tmpdir.path, 'stdout');\n const stdoutFd = fs.openSync(filename, 'w');\n \n const proc = spawn(process.execPath, [__filename, 'child'], {"
        },
        {
            "sha": "87663c63616ffaf4dfa5aef2f8540f37489c5f09",
            "filename": "test/parallel/test-fs-truncate-GH-6233.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-truncate-GH-6233.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-truncate-GH-6233.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-truncate-GH-6233.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -24,9 +24,11 @@ const common = require('../common');\n const assert = require('assert');\n const fs = require('fs');\n \n-const filename = `${common.tmpDir}/truncate-file.txt`;\n+const tmpdir = require('../common/tmpdir');\n \n-common.refreshTmpDir();\n+const filename = `${tmpdir.path}/truncate-file.txt`;\n+\n+tmpdir.refresh();\n \n // Synchronous test.\n {"
        },
        {
            "sha": "ee6f66f720a038fe716ed8518f834e9aa1effd3c",
            "filename": "test/parallel/test-fs-truncate-fd.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-truncate-fd.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-truncate-fd.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-truncate-fd.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -3,8 +3,9 @@ const common = require('../common');\n const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n-const tmp = common.tmpDir;\n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+const tmp = tmpdir.path;\n+tmpdir.refresh();\n const filename = path.resolve(tmp, 'truncate-file.txt');\n \n fs.writeFileSync(filename, 'hello world', 'utf8');"
        },
        {
            "sha": "66250cf4386b343ef36e19fe3e4165c9f800dc3e",
            "filename": "test/parallel/test-fs-truncate-sync.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-truncate-sync.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-truncate-sync.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-truncate-sync.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,11 +1,12 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n-const tmp = common.tmpDir;\n+const tmpdir = require('../common/tmpdir');\n+const tmp = tmpdir.path;\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n const filename = path.resolve(tmp, 'truncate-sync-file.txt');\n "
        },
        {
            "sha": "28a9852d82a9c5695a975cd195314252c82ba503",
            "filename": "test/parallel/test-fs-truncate.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-truncate.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-truncate.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-truncate.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -24,11 +24,12 @@ const common = require('../common');\n const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n-const tmp = common.tmpDir;\n+const tmpdir = require('../common/tmpdir');\n+const tmp = tmpdir.path;\n const filename = path.resolve(tmp, 'truncate-file.txt');\n const data = Buffer.alloc(1024 * 16, 'x');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n let stat;\n "
        },
        {
            "sha": "db8201d7cb944980df323e151739466ccf7a94f5",
            "filename": "test/parallel/test-fs-utimes.js",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-utimes.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-utimes.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-utimes.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,7 +25,8 @@ const assert = require('assert');\n const util = require('util');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n let tests_ok = 0;\n let tests_run = 0;\n@@ -73,8 +74,8 @@ function testIt(atime, mtime, callback) {\n   // test synchronized code paths, these functions throw on failure\n   //\n   function syncTests() {\n-    fs.utimesSync(common.tmpDir, atime, mtime);\n-    expect_ok('utimesSync', common.tmpDir, undefined, atime, mtime);\n+    fs.utimesSync(tmpdir.path, atime, mtime);\n+    expect_ok('utimesSync', tmpdir.path, undefined, atime, mtime);\n     tests_run++;\n \n     // some systems don't have futimes\n@@ -110,17 +111,17 @@ function testIt(atime, mtime, callback) {\n   //\n   // test async code paths\n   //\n-  fs.utimes(common.tmpDir, atime, mtime, common.mustCall(function(err) {\n-    expect_ok('utimes', common.tmpDir, err, atime, mtime);\n+  fs.utimes(tmpdir.path, atime, mtime, common.mustCall(function(err) {\n+    expect_ok('utimes', tmpdir.path, err, atime, mtime);\n \n     fs.utimes('foobarbaz', atime, mtime, common.mustCall(function(err) {\n       expect_errno('utimes', 'foobarbaz', err, 'ENOENT');\n \n       // don't close this fd\n       if (common.isWindows) {\n-        fd = fs.openSync(common.tmpDir, 'r+');\n+        fd = fs.openSync(tmpdir.path, 'r+');\n       } else {\n-        fd = fs.openSync(common.tmpDir, 'r');\n+        fd = fs.openSync(tmpdir.path, 'r');\n       }\n \n       fs.futimes(fd, atime, mtime, common.mustCall(function(err) {\n@@ -145,7 +146,7 @@ function testIt(atime, mtime, callback) {\n   tests_run++;\n }\n \n-const stats = fs.statSync(common.tmpDir);\n+const stats = fs.statSync(tmpdir.path);\n \n // run tests\n const runTest = common.mustCall(testIt, 1);\n@@ -174,7 +175,7 @@ process.on('exit', function() {\n \n \n // Ref: https://github.com/nodejs/node/issues/13255\n-const path = `${common.tmpDir}/test-utimes-precision`;\n+const path = `${tmpdir.path}/test-utimes-precision`;\n fs.writeFileSync(path, '');\n \n // test Y2K38 for all platforms [except 'arm', and 'SunOS']"
        },
        {
            "sha": "1cea62550983606e96d5884ccda90c196367dafa",
            "filename": "test/parallel/test-fs-watch-encoding.js",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-watch-encoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-watch-encoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-watch-encoding.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -22,10 +22,11 @@ if (common.isAIX)\n const fs = require('fs');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const fn = '新建文夹件.txt';\n-const a = path.join(common.tmpDir, fn);\n+const a = path.join(tmpdir.path, fn);\n \n const watchers = new Set();\n \n@@ -42,7 +43,7 @@ function unregisterWatcher(watcher) {\n }\n \n const watcher1 = fs.watch(\n-  common.tmpDir,\n+  tmpdir.path,\n   { encoding: 'hex' },\n   (event, filename) => {\n     if (['e696b0e5bbbae69687e5a4b9e4bbb62e747874', null].includes(filename))\n@@ -52,7 +53,7 @@ const watcher1 = fs.watch(\n registerWatcher(watcher1);\n \n const watcher2 = fs.watch(\n-  common.tmpDir,\n+  tmpdir.path,\n   (event, filename) => {\n     if ([fn, null].includes(filename))\n       done(watcher2);\n@@ -61,7 +62,7 @@ const watcher2 = fs.watch(\n registerWatcher(watcher2);\n \n const watcher3 = fs.watch(\n-  common.tmpDir,\n+  tmpdir.path,\n   { encoding: 'buffer' },\n   (event, filename) => {\n     if (filename instanceof Buffer && filename.toString('utf8') === fn)"
        },
        {
            "sha": "82d87aa2ecbb932c2ea8f9f6120c7ed8ee2a060c",
            "filename": "test/parallel/test-fs-watch-recursive.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-watch-recursive.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-watch-recursive.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-watch-recursive.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -9,10 +9,12 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-const testDir = common.tmpDir;\n+const tmpdir = require('../common/tmpdir');\n+\n+const testDir = tmpdir.path;\n const filenameOne = 'watch.txt';\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n const testsubdir = fs.mkdtempSync(testDir + path.sep);\n const relativePathOne = path.join(path.basename(testsubdir), filenameOne);"
        },
        {
            "sha": "7affe370c7ed034fea8da474f94ad6bb0d3bb092",
            "filename": "test/parallel/test-fs-watch.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-watch.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-watch.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-watch.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -14,7 +14,7 @@ class WatchTestCase {\n     this.field = field;\n     this.shouldSkip = !shouldInclude;\n   }\n-  get dirPath() { return join(common.tmpDir, this.dirName); }\n+  get dirPath() { return join(tmpdir.path, this.dirName); }\n   get filePath() { return join(this.dirPath, this.fileName); }\n }\n \n@@ -35,7 +35,8 @@ const cases = [\n   )\n ];\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n for (const testCase of cases) {\n   if (testCase.shouldSkip) continue;"
        },
        {
            "sha": "3c24ae84ac036bbd25a0303499c18a1b7a68aa75",
            "filename": "test/parallel/test-fs-watchfile.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-watchfile.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-watchfile.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-watchfile.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -5,6 +5,8 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n+const tmpdir = require('../common/tmpdir');\n+\n // Basic usage tests.\n common.expectsError(\n   () => {\n@@ -28,7 +30,7 @@ common.expectsError(function() {\n   fs.watchFile(new Object(), common.mustNotCall());\n }, { code: 'ERR_INVALID_ARG_TYPE', type: TypeError });\n \n-const enoentFile = path.join(common.tmpDir, 'non-existent-file');\n+const enoentFile = path.join(tmpdir.path, 'non-existent-file');\n const expectedStatObject = new fs.Stats(\n   0,                                        // dev\n   0,                                        // mode\n@@ -46,7 +48,7 @@ const expectedStatObject = new fs.Stats(\n   Date.UTC(1970, 0, 1, 0, 0, 0)             // birthtime\n );\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // If the file initially didn't exist, and gets created at a later point of\n // time, the callback should be invoked again with proper values in stat object\n@@ -80,7 +82,7 @@ watcher.start();  // should not crash\n // Watch events should callback with a filename on supported systems.\n // Omitting AIX. It works but not reliably.\n if (common.isLinux || common.isOSX || common.isWindows) {\n-  const dir = path.join(common.tmpDir, 'watch');\n+  const dir = path.join(tmpdir.path, 'watch');\n \n   fs.mkdir(dir, common.mustCall(function(err) {\n     if (err) assert.fail(err);"
        },
        {
            "sha": "6e6154642a583d61994fa7da00bc0f594f298ad1",
            "filename": "test/parallel/test-fs-write-buffer.js",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-buffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-buffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-buffer.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -26,11 +26,12 @@ const path = require('path');\n const fs = require('fs');\n const expected = Buffer.from('hello');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // fs.write with all parameters provided:\n {\n-  const filename = path.join(common.tmpDir, 'write1.txt');\n+  const filename = path.join(tmpdir.path, 'write1.txt');\n   fs.open(filename, 'w', 0o644, common.mustCall((err, fd) => {\n     assert.ifError(err);\n \n@@ -50,7 +51,7 @@ common.refreshTmpDir();\n \n // fs.write with a buffer, without the length parameter:\n {\n-  const filename = path.join(common.tmpDir, 'write2.txt');\n+  const filename = path.join(tmpdir.path, 'write2.txt');\n   fs.open(filename, 'w', 0o644, common.mustCall((err, fd) => {\n     assert.ifError(err);\n \n@@ -70,7 +71,7 @@ common.refreshTmpDir();\n \n // fs.write with a buffer, without the offset and length parameters:\n {\n-  const filename = path.join(common.tmpDir, 'write3.txt');\n+  const filename = path.join(tmpdir.path, 'write3.txt');\n   fs.open(filename, 'w', 0o644, common.mustCall(function(err, fd) {\n     assert.ifError(err);\n \n@@ -90,7 +91,7 @@ common.refreshTmpDir();\n \n // fs.write with the offset passed as undefined followed by the callback:\n {\n-  const filename = path.join(common.tmpDir, 'write4.txt');\n+  const filename = path.join(tmpdir.path, 'write4.txt');\n   fs.open(filename, 'w', 0o644, common.mustCall(function(err, fd) {\n     assert.ifError(err);\n \n@@ -110,7 +111,7 @@ common.refreshTmpDir();\n \n // fs.write with offset and length passed as undefined followed by the callback:\n {\n-  const filename = path.join(common.tmpDir, 'write5.txt');\n+  const filename = path.join(tmpdir.path, 'write5.txt');\n   fs.open(filename, 'w', 0o644, common.mustCall((err, fd) => {\n     assert.ifError(err);\n \n@@ -130,7 +131,7 @@ common.refreshTmpDir();\n \n // fs.write with a Uint8Array, without the offset and length parameters:\n {\n-  const filename = path.join(common.tmpDir, 'write6.txt');\n+  const filename = path.join(tmpdir.path, 'write6.txt');\n   fs.open(filename, 'w', 0o644, common.mustCall((err, fd) => {\n     assert.ifError(err);\n "
        },
        {
            "sha": "82fb7ad69a443bbbb666fdf6a53aecc5e919a802",
            "filename": "test/parallel/test-fs-write-file-buffer.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file-buffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file-buffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-file-buffer.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,7 +20,7 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n const join = require('path').join;\n const util = require('util');\n const fs = require('fs');\n@@ -46,9 +46,10 @@ let data = [\n \n data = data.join('\\n');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const buf = Buffer.from(data, 'base64');\n-fs.writeFileSync(join(common.tmpDir, 'test.jpg'), buf);\n+fs.writeFileSync(join(tmpdir.path, 'test.jpg'), buf);\n \n util.log('Done!');"
        },
        {
            "sha": "a4c8ff5bf73a03a8d14a59557dc0b6282ba64f4c",
            "filename": "test/parallel/test-fs-write-file-invalid-path.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file-invalid-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file-invalid-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-file-invalid-path.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,7 +8,8 @@ const path = require('path');\n if (!common.isWindows)\n   common.skip('This test is for Windows only.');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const DATA_VALUE = 'hello';\n \n@@ -17,7 +18,7 @@ const DATA_VALUE = 'hello';\n const RESERVED_CHARACTERS = '<>\"|?*';\n \n [...RESERVED_CHARACTERS].forEach((ch) => {\n-  const pathname = path.join(common.tmpDir, `somefile_${ch}`);\n+  const pathname = path.join(tmpdir.path, `somefile_${ch}`);\n   assert.throws(\n     () => {\n       fs.writeFileSync(pathname, DATA_VALUE);\n@@ -28,7 +29,7 @@ const RESERVED_CHARACTERS = '<>\"|?*';\n \n // Test for ':' (NTFS data streams).\n // Refs: https://msdn.microsoft.com/en-us/library/windows/desktop/bb540537.aspx\n-const pathname = path.join(common.tmpDir, 'foo:bar');\n+const pathname = path.join(tmpdir.path, 'foo:bar');\n fs.writeFileSync(pathname, DATA_VALUE);\n \n let content = '';"
        },
        {
            "sha": "9a19b9f6e9343954ce5aa768504023957c0682c8",
            "filename": "test/parallel/test-fs-write-file-sync.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file-sync.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file-sync.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-file-sync.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -46,10 +46,11 @@ if (common.isWindows) {\n   mode = 0o755;\n }\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // Test writeFileSync\n-const file1 = path.join(common.tmpDir, 'testWriteFileSync.txt');\n+const file1 = path.join(tmpdir.path, 'testWriteFileSync.txt');\n \n fs.writeFileSync(file1, '123', { mode });\n \n@@ -59,7 +60,7 @@ assert.strictEqual(content, '123');\n assert.strictEqual(fs.statSync(file1).mode & 0o777, mode);\n \n // Test appendFileSync\n-const file2 = path.join(common.tmpDir, 'testAppendFileSync.txt');\n+const file2 = path.join(tmpdir.path, 'testAppendFileSync.txt');\n \n fs.appendFileSync(file2, 'abc', { mode });\n \n@@ -69,7 +70,7 @@ assert.strictEqual(content, 'abc');\n assert.strictEqual(fs.statSync(file2).mode & mode, mode);\n \n // Test writeFileSync with file descriptor\n-const file3 = path.join(common.tmpDir, 'testWriteFileSyncFd.txt');\n+const file3 = path.join(tmpdir.path, 'testWriteFileSyncFd.txt');\n \n const fd = fs.openSync(file3, 'w+', mode);\n fs.writeFileSync(fd, '123');"
        },
        {
            "sha": "592bdb05814e06f045b8b9ba425f8defde722248",
            "filename": "test/parallel/test-fs-write-file-uint8array.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file-uint8array.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file-uint8array.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-file-uint8array.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,9 +4,10 @@ const assert = require('assert');\n const fs = require('fs');\n const join = require('path').join;\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const filename = join(common.tmpDir, 'test.txt');\n+const filename = join(tmpdir.path, 'test.txt');\n \n const s = '南越国是前203年至前111年存在于岭南地区的一个国家，国都位于番禺，疆域包括今天中国的广东、' +\n           '广西两省区的大部份地区，福建省、湖南、贵州、云南的一小部份地区和越南的北部。' +"
        },
        {
            "sha": "b137e55547201e77abcf5306f048817ae3f5bc0a",
            "filename": "test/parallel/test-fs-write-file.js",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-file.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,9 +25,10 @@ const assert = require('assert');\n const fs = require('fs');\n const join = require('path').join;\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const filename = join(common.tmpDir, 'test.txt');\n+const filename = join(tmpdir.path, 'test.txt');\n \n const n = 220;\n const s = '南越国是前203年至前111年存在于岭南地区的一个国家，国都位于番禺，疆域包括今天中国的广东、' +\n@@ -48,7 +49,7 @@ fs.writeFile(filename, s, common.mustCall(function(e) {\n }));\n \n // test that writeFile accepts buffers\n-const filename2 = join(common.tmpDir, 'test2.txt');\n+const filename2 = join(tmpdir.path, 'test2.txt');\n const buf = Buffer.from(s, 'utf8');\n \n fs.writeFile(filename2, buf, common.mustCall(function(e) {\n@@ -62,7 +63,7 @@ fs.writeFile(filename2, buf, common.mustCall(function(e) {\n }));\n \n // test that writeFile accepts numbers.\n-const filename3 = join(common.tmpDir, 'test3.txt');\n+const filename3 = join(tmpdir.path, 'test3.txt');\n \n const m = 0o600;\n fs.writeFile(filename3, n, { mode: m }, common.mustCall(function(e) {\n@@ -82,7 +83,7 @@ fs.writeFile(filename3, n, { mode: m }, common.mustCall(function(e) {\n }));\n \n // test that writeFile accepts file descriptors\n-const filename4 = join(common.tmpDir, 'test4.txt');\n+const filename4 = join(tmpdir.path, 'test4.txt');\n \n fs.open(filename4, 'w+', common.mustCall(function(e, fd) {\n   assert.ifError(e);"
        },
        {
            "sha": "e39f4d615ab7e030a991eb741f985c76d44b0aed",
            "filename": "test/parallel/test-fs-write-stream-autoclose-option.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-autoclose-option.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-autoclose-option.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream-autoclose-option.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,8 +4,10 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-const file = path.join(common.tmpDir, 'write-autoclose-opt1.txt');\n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+\n+const file = path.join(tmpdir.path, 'write-autoclose-opt1.txt');\n+tmpdir.refresh();\n let stream = fs.createWriteStream(file, { flags: 'w+', autoClose: false });\n stream.write('Test1');\n stream.end();"
        },
        {
            "sha": "8f79e59427e50d08914965f026e832e143bdba91",
            "filename": "test/parallel/test-fs-write-stream-change-open.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-change-open.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-change-open.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream-change-open.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,14 +20,16 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-const file = path.join(common.tmpDir, 'write.txt');\n+const tmpdir = require('../common/tmpdir');\n \n-common.refreshTmpDir();\n+const file = path.join(tmpdir.path, 'write.txt');\n+\n+tmpdir.refresh();\n \n const stream = fs.WriteStream(file);\n const _fs_close = fs.close;"
        },
        {
            "sha": "b07c799efdb2d45cb7fba52ad495debf3da7aedc",
            "filename": "test/parallel/test-fs-write-stream-close-without-callback.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-close-without-callback.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-close-without-callback.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream-close-without-callback.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,12 +1,13 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n const fs = require('fs');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const s = fs.createWriteStream(path.join(common.tmpDir, 'nocallback'));\n+const s = fs.createWriteStream(path.join(tmpdir.path, 'nocallback'));\n \n s.end('hello world');\n s.close();"
        },
        {
            "sha": "28e53061f74c3b4ecc19e5d80ee7f2ce0f5baf63",
            "filename": "test/parallel/test-fs-write-stream-double-close.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-double-close.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-double-close.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream-double-close.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -5,17 +5,18 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n {\n-  const s = fs.createWriteStream(path.join(common.tmpDir, 'rw'));\n+  const s = fs.createWriteStream(path.join(tmpdir.path, 'rw'));\n \n   s.close(common.mustCall());\n   s.close(common.mustCall());\n }\n \n {\n-  const s = fs.createWriteStream(path.join(common.tmpDir, 'rw2'));\n+  const s = fs.createWriteStream(path.join(tmpdir.path, 'rw2'));\n \n   let emits = 0;\n   s.on('close', () => {\n@@ -36,7 +37,7 @@ common.refreshTmpDir();\n }\n \n {\n-  const s = fs.createWriteStream(path.join(common.tmpDir, 'rw'), {\n+  const s = fs.createWriteStream(path.join(tmpdir.path, 'rw'), {\n     autoClose: false\n   });\n "
        },
        {
            "sha": "5803d99fd7b33dae4ca068c8665ec02d5fb1890f",
            "filename": "test/parallel/test-fs-write-stream-encoding.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-encoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-encoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream-encoding.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,17 +1,18 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n const fixtures = require('../common/fixtures');\n const fs = require('fs');\n const path = require('path');\n const stream = require('stream');\n+const tmpdir = require('../common/tmpdir');\n const firstEncoding = 'base64';\n const secondEncoding = 'latin1';\n \n const examplePath = fixtures.path('x.txt');\n-const dummyPath = path.join(common.tmpDir, 'x.txt');\n+const dummyPath = path.join(tmpdir.path, 'x.txt');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n const exampleReadStream = fs.createReadStream(examplePath, {\n   encoding: firstEncoding"
        },
        {
            "sha": "36e7cb5504cab0977e2370082ee11fda3ec66707",
            "filename": "test/parallel/test-fs-write-stream-end.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-end.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-end.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream-end.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,17 +25,18 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n {\n-  const file = path.join(common.tmpDir, 'write-end-test0.txt');\n+  const file = path.join(tmpdir.path, 'write-end-test0.txt');\n   const stream = fs.createWriteStream(file);\n   stream.end();\n   stream.on('close', common.mustCall());\n }\n \n {\n-  const file = path.join(common.tmpDir, 'write-end-test1.txt');\n+  const file = path.join(tmpdir.path, 'write-end-test1.txt');\n   const stream = fs.createWriteStream(file);\n   stream.end('a\\n', 'utf8');\n   stream.on('close', common.mustCall(function() {"
        },
        {
            "sha": "36bf9dbcfb068e094b549082c5b72e086fa1a229",
            "filename": "test/parallel/test-fs-write-stream-err.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-err.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-err.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream-err.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -24,9 +24,10 @@ const common = require('../common');\n const assert = require('assert');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const stream = fs.createWriteStream(`${common.tmpDir}/out`, {\n+const stream = fs.createWriteStream(`${tmpdir.path}/out`, {\n   highWaterMark: 10\n });\n const err = new Error('BAM');"
        },
        {
            "sha": "73312afa6b64238e29843ac7347c9c5a7523deee",
            "filename": "test/parallel/test-fs-write-stream-throw-type-error.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-throw-type-error.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream-throw-type-error.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream-throw-type-error.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,9 +4,11 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-const example = path.join(common.tmpDir, 'dummy');\n+const tmpdir = require('../common/tmpdir');\n \n-common.refreshTmpDir();\n+const example = path.join(tmpdir.path, 'dummy');\n+\n+tmpdir.refresh();\n \n assert.doesNotThrow(() => {\n   fs.createWriteStream(example, undefined);"
        },
        {
            "sha": "e93f65e604c20bd409f4a0d7725dee9eb27a543c",
            "filename": "test/parallel/test-fs-write-stream.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-stream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-stream.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,9 +25,11 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-const file = path.join(common.tmpDir, 'write.txt');\n+const tmpdir = require('../common/tmpdir');\n \n-common.refreshTmpDir();\n+const file = path.join(tmpdir.path, 'write.txt');\n+\n+tmpdir.refresh();\n \n {\n   const stream = fs.WriteStream(file);"
        },
        {
            "sha": "4581c319277a78f8fbf11294110e4dd715618a2c",
            "filename": "test/parallel/test-fs-write-string-coerce.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-string-coerce.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-string-coerce.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-string-coerce.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,9 +4,10 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const fn = path.join(common.tmpDir, 'write-string-coerce.txt');\n+const fn = path.join(tmpdir.path, 'write-string-coerce.txt');\n const data = true;\n const expected = String(data);\n "
        },
        {
            "sha": "4ca7a1dd570eb0896d3cedab0a7cc5cf7c4e9b7d",
            "filename": "test/parallel/test-fs-write-sync.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-sync.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write-sync.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-sync.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,13 +20,14 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n-const filename = path.join(common.tmpDir, 'write.txt');\n+const tmpdir = require('../common/tmpdir');\n+const filename = path.join(tmpdir.path, 'write.txt');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // fs.writeSync with all parameters provided:\n {"
        },
        {
            "sha": "a3c8814bc392ceada678bbf85fdfbe3700c0e4ec",
            "filename": "test/parallel/test-fs-write.js",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-fs-write.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,17 +25,19 @@ const common = require('../common');\n const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n-const fn = path.join(common.tmpDir, 'write.txt');\n-const fn2 = path.join(common.tmpDir, 'write2.txt');\n-const fn3 = path.join(common.tmpDir, 'write3.txt');\n+const tmpdir = require('../common/tmpdir');\n+\n+tmpdir.refresh();\n+\n+const fn = path.join(tmpdir.path, 'write.txt');\n+const fn2 = path.join(tmpdir.path, 'write2.txt');\n+const fn3 = path.join(tmpdir.path, 'write3.txt');\n const expected = 'ümlaut.';\n const constants = fs.constants;\n \n /* eslint-disable no-undef */\n common.allowGlobals(externalizeString, isOneByteString, x);\n \n-common.refreshTmpDir();\n-\n {\n   const expected = 'ümlaut eins';  // Must be a unique string.\n   externalizeString(expected);\n@@ -75,6 +77,7 @@ common.refreshTmpDir();\n   fs.closeSync(fd);\n   assert.strictEqual(expected, fs.readFileSync(fn, 'utf8'));\n }\n+/* eslint-enable no-undef */\n \n fs.open(fn, 'w', 0o644, common.mustCall(function(err, fd) {\n   assert.ifError(err);"
        },
        {
            "sha": "31dc255ba558db113a64ccdcb654671999fc5074",
            "filename": "test/parallel/test-http-agent-getname.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-agent-getname.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-agent-getname.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-agent-getname.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,10 +1,12 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n const http = require('http');\n const path = require('path');\n \n+const tmpdir = require('../common/tmpdir');\n+\n const agent = new http.Agent();\n \n // default to localhost\n@@ -33,7 +35,7 @@ assert.strictEqual(\n );\n \n // unix socket\n-const socketPath = path.join(common.tmpDir, 'foo', 'bar');\n+const socketPath = path.join(tmpdir.path, 'foo', 'bar');\n assert.strictEqual(\n   agent.getName({\n     socketPath"
        },
        {
            "sha": "f999f055fc0a91fdec974c83922cd5948c2075e1",
            "filename": "test/parallel/test-http-chunk-problem.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-chunk-problem.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-chunk-problem.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-chunk-problem.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -37,7 +37,9 @@ if (process.argv[2] === 'shasum') {\n const http = require('http');\n const cp = require('child_process');\n \n-const filename = require('path').join(common.tmpDir, 'big');\n+const tmpdir = require('../common/tmpdir');\n+\n+const filename = require('path').join(tmpdir.path, 'big');\n let server;\n \n function executeRequest(cb) {\n@@ -59,7 +61,7 @@ function executeRequest(cb) {\n }\n \n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n const ddcmd = common.ddCommand(filename, 10240);\n "
        },
        {
            "sha": "745ed4ceeee8870ad727b8a7b0adce5a078b3e46",
            "filename": "test/parallel/test-http-client-abort-keep-alive-queued-unix-socket.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-client-abort-keep-alive-queued-unix-socket.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-client-abort-keep-alive-queued-unix-socket.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-client-abort-keep-alive-queued-unix-socket.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -16,7 +16,8 @@ class Agent extends http.Agent {\n const server = http.createServer((req, res) => res.end());\n \n const socketPath = common.PIPE;\n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n server.listen(socketPath, common.mustCall(() => {\n   const agent = new Agent({"
        },
        {
            "sha": "bf666b7935a3a64d0a0a3e7bc47e717f5d165282",
            "filename": "test/parallel/test-http-client-abort-unix-socket.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-client-abort-unix-socket.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-client-abort-unix-socket.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-client-abort-unix-socket.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -12,7 +12,8 @@ class Agent extends http.Agent {\n   }\n }\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n server.listen(common.PIPE, common.mustCall(() => {\n   const req = http.get({"
        },
        {
            "sha": "9dcdbe4a49d83ab2b02ef1d13acae39a317ac9d3",
            "filename": "test/parallel/test-http-client-pipe-end.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-client-pipe-end.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-client-pipe-end.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-client-pipe-end.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -34,7 +34,8 @@ const server = http.createServer(function(req, res) {\n   });\n });\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n server.listen(common.PIPE, function() {\n   const req = http.request({"
        },
        {
            "sha": "0a32e929141e4527900bd43eae6b7ea487045db7",
            "filename": "test/parallel/test-http-client-response-domain.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-client-response-domain.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-client-response-domain.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-client-response-domain.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -27,7 +27,8 @@ const domain = require('domain');\n \n let d;\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // first fire up a simple HTTP server\n const server = http.createServer(function(req, res) {"
        },
        {
            "sha": "b8b11e7e77c29a2ec84b2a64417064a6b548b9fb",
            "filename": "test/parallel/test-http-get-pipeline-problem.js",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-get-pipeline-problem.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-get-pipeline-problem.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-get-pipeline-problem.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -32,7 +32,8 @@ const Countdown = require('../common/countdown');\n \n http.globalAgent.maxSockets = 1;\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const image = fixtures.readSync('/person.jpg');\n \n@@ -68,7 +69,7 @@ server.listen(0, function() {\n \n       http.get(opts, function(res) {\n         console.error(`recv ${x}`);\n-        const s = fs.createWriteStream(`${common.tmpDir}/${x}.jpg`);\n+        const s = fs.createWriteStream(`${tmpdir.path}/${x}.jpg`);\n         res.pipe(s);\n \n         s.on('finish', function() {\n@@ -85,13 +86,13 @@ server.listen(0, function() {\n \n function checkFiles() {\n   // Should see 1.jpg, 2.jpg, ..., 100.jpg in tmpDir\n-  const files = fs.readdirSync(common.tmpDir);\n+  const files = fs.readdirSync(tmpdir.path);\n   assert(total <= files.length);\n \n   for (let i = 0; i < total; i++) {\n     const fn = `${i}.jpg`;\n     assert.ok(files.includes(fn), `couldn't find '${fn}'`);\n-    const stat = fs.statSync(`${common.tmpDir}/${fn}`);\n+    const stat = fs.statSync(`${tmpdir.path}/${fn}`);\n     assert.strictEqual(\n       image.length, stat.size,\n       `size doesn't match on '${fn}'. Got ${stat.size} bytes`);"
        },
        {
            "sha": "dfb44ff3b25d99c739de04579058f797308e9258",
            "filename": "test/parallel/test-http-pipe-fs.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-pipe-fs.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-pipe-fs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-pipe-fs.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -29,9 +29,10 @@ const NUMBER_OF_STREAMS = 2;\n \n const countdown = new Countdown(NUMBER_OF_STREAMS, () => server.close());\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const file = path.join(common.tmpDir, 'http-pipe-fs-test.txt');\n+const file = path.join(tmpdir.path, 'http-pipe-fs-test.txt');\n \n const server = http.createServer(common.mustCall(function(req, res) {\n   const stream = fs.createWriteStream(file);"
        },
        {
            "sha": "11b3d9b39264a4e362392a240e476de7d6d3881a",
            "filename": "test/parallel/test-http-unix-socket-keep-alive.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-unix-socket-keep-alive.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-unix-socket-keep-alive.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-unix-socket-keep-alive.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -5,7 +5,8 @@ const http = require('http');\n \n const server = http.createServer((req, res) => res.end());\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n server.listen(common.PIPE, common.mustCall(() =>\n   asyncLoop(makeKeepAliveRequest, 10, common.mustCall(() =>"
        },
        {
            "sha": "cfed45a43c2e83843459ee034f3753ded985438b",
            "filename": "test/parallel/test-http-unix-socket.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-unix-socket.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http-unix-socket.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-unix-socket.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -34,7 +34,8 @@ const server = http.createServer(function(req, res) {\n   res.end();\n });\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n server.listen(common.PIPE, common.mustCall(function() {\n "
        },
        {
            "sha": "53e54cdf913b0e5c30215d0604ab18ef06df68d6",
            "filename": "test/parallel/test-http2-compat-serverrequest-pipe.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http2-compat-serverrequest-pipe.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http2-compat-serverrequest-pipe.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http2-compat-serverrequest-pipe.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -11,9 +11,10 @@ const path = require('path');\n \n // piping should work as expected with createWriteStream\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n const loc = fixtures.path('url-tests.js');\n-const fn = path.join(common.tmpDir, 'http2-url-tests.js');\n+const fn = path.join(tmpdir.path, 'http2-url-tests.js');\n \n const server = http2.createServer();\n "
        },
        {
            "sha": "2a759f9848721b6656e928622c61e2e81c0344e9",
            "filename": "test/parallel/test-http2-pipe.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http2-pipe.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-http2-pipe.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http2-pipe.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -11,9 +11,10 @@ const path = require('path');\n \n // piping should work as expected with createWriteStream\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n const loc = fixtures.path('url-tests.js');\n-const fn = path.join(common.tmpDir, 'http2-url-tests.js');\n+const fn = path.join(tmpdir.path, 'http2-url-tests.js');\n \n const server = http2.createServer();\n "
        },
        {
            "sha": "48207a7a22f52a5f122a1aa5797453a296efb732",
            "filename": "test/parallel/test-https-unix-socket-self-signed.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-https-unix-socket-self-signed.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-https-unix-socket-self-signed.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-https-unix-socket-self-signed.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,7 +4,8 @@ const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const fixtures = require('../common/fixtures');\n const https = require('https');"
        },
        {
            "sha": "c474d21cb43826a2c1b6776387855e943a237870",
            "filename": "test/parallel/test-internal-fs-syncwritestream.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-internal-fs-syncwritestream.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-internal-fs-syncwritestream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-internal-fs-syncwritestream.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -7,9 +7,10 @@ const fs = require('fs');\n const path = require('path');\n const SyncWriteStream = require('internal/fs').SyncWriteStream;\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const filename = path.join(common.tmpDir, 'sync-write-stream.txt');\n+const filename = path.join(tmpdir.path, 'sync-write-stream.txt');\n \n // Verify constructing the instance with default options.\n {"
        },
        {
            "sha": "e8d80640df0b1740585e523cc05267fd1d5f7c9c",
            "filename": "test/parallel/test-module-circular-symlinks.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-module-circular-symlinks.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-module-circular-symlinks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-module-circular-symlinks.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -29,8 +29,9 @@ const fs = require('fs');\n //         └── node_modules\n //         └── moduleA -> {tmpDir}/node_modules/moduleA\n \n-common.refreshTmpDir();\n-const tmpDir = common.tmpDir;\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+const tmpDir = tmpdir.path;\n \n const node_modules = path.join(tmpDir, 'node_modules');\n const moduleA = path.join(node_modules, 'moduleA');"
        },
        {
            "sha": "e3c36cb21c202e413e4681faa441dd3d4515af99",
            "filename": "test/parallel/test-module-loading-globalpaths.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-module-loading-globalpaths.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-module-loading-globalpaths.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-module-loading-globalpaths.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -10,10 +10,11 @@ const pkgName = 'foo';\n if (process.argv[2] === 'child') {\n   console.log(require(pkgName).string);\n } else {\n-  common.refreshTmpDir();\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n \n   // Copy node binary into a test $PREFIX directory.\n-  const prefixPath = path.join(common.tmpDir, 'install');\n+  const prefixPath = path.join(tmpdir.path, 'install');\n   fs.mkdirSync(prefixPath);\n   let testExecPath;\n   if (common.isWindows) {\n@@ -43,7 +44,7 @@ if (process.argv[2] === 'child') {\n   delete env['NODE_PATH'];\n \n   // Test empty global path.\n-  const noPkgHomeDir = path.join(common.tmpDir, 'home-no-pkg');\n+  const noPkgHomeDir = path.join(tmpdir.path, 'home-no-pkg');\n   fs.mkdirSync(noPkgHomeDir);\n   env['HOME'] = env['USERPROFILE'] = noPkgHomeDir;\n   assert.throws("
        },
        {
            "sha": "f93dea720f9a12299ef6f7949087b93861af2564",
            "filename": "test/parallel/test-module-symlinked-peer-modules.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-module-symlinked-peer-modules.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-module-symlinked-peer-modules.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-module-symlinked-peer-modules.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -13,9 +13,10 @@ const fs = require('fs');\n const path = require('path');\n const assert = require('assert');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const tmpDir = common.tmpDir;\n+const tmpDir = tmpdir.path;\n \n // Creates the following structure\n // {tmpDir}"
        },
        {
            "sha": "76a5e30755b15c65d7a2c4623ed266f09f9f4805",
            "filename": "test/parallel/test-net-connect-options-fd.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-connect-options-fd.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-connect-options-fd.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-net-connect-options-fd.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,7 +8,8 @@ const net = require('net');\n const path = require('path');\n const { Pipe, constants: PipeConstants } = process.binding('pipe_wrap');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n function testClients(getSocketOpt, getConnectOpt, getConnectCb) {\n   const cloneOptions = (index) =>"
        },
        {
            "sha": "9a2737c371bbf5c926d3bf3838ec557c9ef12867",
            "filename": "test/parallel/test-net-connect-options-path.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-connect-options-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-connect-options-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-net-connect-options-path.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -5,7 +5,8 @@ const net = require('net');\n // This file tests the option handling of net.connect,\n // net.createConnect, and new Socket().connect\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const CLIENT_VARIANTS = 12;\n "
        },
        {
            "sha": "9fc59db4e2ff2fd54c710aa6303233e659f10af9",
            "filename": "test/parallel/test-net-pingpong.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-pingpong.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-pingpong.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-net-pingpong.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -128,7 +128,8 @@ function pingPongTest(port, host) {\n }\n \n /* All are run at once, so run on different ports */\n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n pingPongTest(common.PIPE);\n pingPongTest(0);\n pingPongTest(0, 'localhost');"
        },
        {
            "sha": "8db452669991f0aa65fa36ff999b5e4b9cbb1dd5",
            "filename": "test/parallel/test-net-pipe-connect-errors.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-pipe-connect-errors.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-pipe-connect-errors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-net-pipe-connect-errors.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -36,12 +36,13 @@ if (common.isWindows) {\n   // file instead\n   emptyTxt = fixtures.path('empty.txt');\n } else {\n-  common.refreshTmpDir();\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n   // Keep the file name very short so that we don't exceed the 108 char limit\n   // on CI for a POSIX socket. Even though this isn't actually a socket file,\n   // the error will be different from the one we are expecting if we exceed the\n   // limit.\n-  emptyTxt = `${common.tmpDir}0.txt`;\n+  emptyTxt = `${tmpdir.path}0.txt`;\n \n   function cleanup() {\n     try {"
        },
        {
            "sha": "5bf8451302fae93416cc9ec610aef4922475fe0e",
            "filename": "test/parallel/test-net-server-listen-handle.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-server-listen-handle.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-server-listen-handle.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-net-server-listen-handle.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,7 +8,8 @@ const { getSystemErrorName } = require('util');\n const { TCP, constants: TCPConstants } = process.binding('tcp_wrap');\n const { Pipe, constants: PipeConstants } = process.binding('pipe_wrap');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n function closeServer() {\n   return common.mustCall(function() {"
        },
        {
            "sha": "b16b7c7ba81236a7a813c742dcd203b87aa7adf9",
            "filename": "test/parallel/test-net-server-listen-path.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-server-listen-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-net-server-listen-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-net-server-listen-path.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -3,7 +3,8 @@\n const common = require('../common');\n const net = require('net');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n function closeServer() {\n   return common.mustCall(function() {"
        },
        {
            "sha": "dc9f60b799e0f6539522b684becef5e3ddf28c85",
            "filename": "test/parallel/test-npm-install.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-npm-install.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-npm-install.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-npm-install.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -9,10 +9,11 @@ const assert = require('assert');\n const fs = require('fs');\n const fixtures = require('../common/fixtures');\n \n-common.refreshTmpDir();\n-const npmSandbox = path.join(common.tmpDir, 'npm-sandbox');\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+const npmSandbox = path.join(tmpdir.path, 'npm-sandbox');\n fs.mkdirSync(npmSandbox);\n-const installDir = path.join(common.tmpDir, 'install-dir');\n+const installDir = path.join(tmpdir.path, 'install-dir');\n fs.mkdirSync(installDir);\n \n const npmPath = path.join("
        },
        {
            "sha": "3550434932e934d014186ca8dea7f8d92ddb9dd5",
            "filename": "test/parallel/test-pipe-address.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-address.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-address.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-pipe-address.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,7 +4,8 @@ const assert = require('assert');\n const net = require('net');\n const server = net.createServer(common.mustNotCall());\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n server.listen(common.PIPE, common.mustCall(function() {\n   assert.strictEqual(server.address(), common.PIPE);"
        },
        {
            "sha": "cfe289c30caa9d365db129c94bba709beb24716b",
            "filename": "test/parallel/test-pipe-file-to-http.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-file-to-http.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-file-to-http.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-pipe-file-to-http.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -27,9 +27,10 @@ const http = require('http');\n const path = require('path');\n const cp = require('child_process');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const filename = path.join(common.tmpDir || '/tmp', 'big');\n+const filename = path.join(tmpdir.path || '/tmp', 'big');\n let count = 0;\n \n const server = http.createServer(function(req, res) {"
        },
        {
            "sha": "c7d9a0a626559eb2123531634a2aa5b43fc547b9",
            "filename": "test/parallel/test-pipe-stream.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-stream.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-stream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-pipe-stream.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -3,7 +3,8 @@ const common = require('../common');\n const assert = require('assert');\n const net = require('net');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n function test(clazz, cb) {\n   let have_ping = false;"
        },
        {
            "sha": "1e0245b5444f6266f6c6a8117715315425829972",
            "filename": "test/parallel/test-pipe-unref.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-unref.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-unref.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-pipe-unref.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,7 +4,8 @@ const net = require('net');\n \n // This test should end immediately after `unref` is called\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const s = net.Server();\n s.listen(common.PIPE);"
        },
        {
            "sha": "5e5b42e6a78d883749b477b97b1f0acc29fcc7d1",
            "filename": "test/parallel/test-pipe-writev.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-writev.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-pipe-writev.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-pipe-writev.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -7,7 +7,8 @@ if (common.isWindows)\n const assert = require('assert');\n const net = require('net');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const server = net.createServer((connection) => {\n   connection.on('error', (err) => {"
        },
        {
            "sha": "c0a245ffd3483b105df8fd4ea4ce40c20749ad43",
            "filename": "test/parallel/test-process-chdir.js",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-process-chdir.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-process-chdir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-chdir.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,10 +1,12 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n+const tmpdir = require('../common/tmpdir');\n+\n process.chdir('..');\n assert.notStrictEqual(process.cwd(), __dirname);\n process.chdir(__dirname);\n@@ -18,18 +20,18 @@ if (process.versions.icu) {\n   // ICU is unavailable, use characters that can't be decomposed\n   dirName = 'weird \\ud83d\\udc04 characters \\ud83d\\udc05';\n }\n-const dir = path.resolve(common.tmpDir, dirName);\n+const dir = path.resolve(tmpdir.path, dirName);\n \n // Make sure that the tmp directory is clean\n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n fs.mkdirSync(dir);\n process.chdir(dir);\n assert.strictEqual(process.cwd().normalize(), dir.normalize());\n \n process.chdir('..');\n assert.strictEqual(process.cwd().normalize(),\n-                   path.resolve(common.tmpDir).normalize());\n+                   path.resolve(tmpdir.path).normalize());\n \n const errMessage = /^TypeError: Bad argument\\.$/;\n assert.throws(function() { process.chdir({}); },"
        },
        {
            "sha": "68aef90b3034497a70ad7d39316b439415441494",
            "filename": "test/parallel/test-process-execpath.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-process-execpath.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-process-execpath.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-execpath.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -14,9 +14,10 @@ if (process.argv[2] === 'child') {\n   // The console.log() output is part of the test here.\n   console.log(process.execPath);\n } else {\n-  common.refreshTmpDir();\n+  const tmpdir = require('../common/tmpdir');\n+  tmpdir.refresh();\n \n-  const symlinkedNode = path.join(common.tmpDir, 'symlinked-node');\n+  const symlinkedNode = path.join(tmpdir.path, 'symlinked-node');\n   fs.symlinkSync(process.execPath, symlinkedNode);\n \n   const proc = child_process.spawnSync(symlinkedNode, [__filename, 'child']);"
        },
        {
            "sha": "5031152a48baf092abce995da9ac46ded0e0bedb",
            "filename": "test/parallel/test-process-redirect-warnings-env.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-process-redirect-warnings-env.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-process-redirect-warnings-env.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-redirect-warnings-env.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -12,10 +12,11 @@ const fork = require('child_process').fork;\n const path = require('path');\n const assert = require('assert');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const warnmod = require.resolve(fixtures.path('warnings.js'));\n-const warnpath = path.join(common.tmpDir, 'warnings.txt');\n+const warnpath = path.join(tmpdir.path, 'warnings.txt');\n \n fork(warnmod, { env: Object.assign({}, process.env,\n                                    { NODE_REDIRECT_WARNINGS: warnpath }) })"
        },
        {
            "sha": "b4f55fa8345409e17eae7d3fe699830380f8c1bd",
            "filename": "test/parallel/test-process-redirect-warnings.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-process-redirect-warnings.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-process-redirect-warnings.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-redirect-warnings.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -12,10 +12,11 @@ const fork = require('child_process').fork;\n const path = require('path');\n const assert = require('assert');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const warnmod = fixtures.path('warnings.js');\n-const warnpath = path.join(common.tmpDir, 'warnings.txt');\n+const warnpath = path.join(tmpdir.path, 'warnings.txt');\n \n fork(warnmod, { execArgv: [`--redirect-warnings=${warnpath}`] })\n   .on('exit', common.mustCall(() => {"
        },
        {
            "sha": "dbf77ad785cac9692ad2029da5ba29edc36c7f07",
            "filename": "test/parallel/test-regress-GH-3739.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-regress-GH-3739.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-regress-GH-3739.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-regress-GH-3739.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -5,10 +5,12 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-let dir = path.resolve(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+\n+let dir = path.resolve(tmpdir.path);\n \n // Make sure that the tmp directory is clean\n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n // Make a long path.\n for (let i = 0; i < 50; i++) {"
        },
        {
            "sha": "b125fa551dc858555efcf4f2c36bdd72177cb354",
            "filename": "test/parallel/test-repl-history-perm.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-repl-history-perm.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-repl-history-perm.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-history-perm.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -31,8 +31,9 @@ stream._write = function(c, e, cb) {\n };\n stream.readable = stream.writable = true;\n \n-common.refreshTmpDir();\n-const replHistoryPath = path.join(common.tmpDir, '.node_repl_history');\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+const replHistoryPath = path.join(tmpdir.path, '.node_repl_history');\n \n const checkResults = common.mustCall(function(err, r) {\n   assert.ifError(err);"
        },
        {
            "sha": "396203d949f4ba7771a59d98f52cdd6a312996da",
            "filename": "test/parallel/test-repl-persistent-history.js",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-repl-persistent-history.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-repl-persistent-history.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-persistent-history.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -11,11 +11,12 @@ const fs = require('fs');\n const path = require('path');\n const os = require('os');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // Mock os.homedir()\n os.homedir = function() {\n-  return common.tmpDir;\n+  return tmpdir.path;\n };\n \n // Create an input stream specialized for testing an array of actions\n@@ -55,16 +56,16 @@ const CLEAR = { ctrl: true, name: 'u' };\n \n // File paths\n const historyFixturePath = fixtures.path('.node_repl_history');\n-const historyPath = path.join(common.tmpDir, '.fixture_copy_repl_history');\n-const historyPathFail = path.join(common.tmpDir, '.node_repl\\u0000_history');\n+const historyPath = path.join(tmpdir.path, '.fixture_copy_repl_history');\n+const historyPathFail = path.join(tmpdir.path, '.node_repl\\u0000_history');\n const oldHistoryPathObj = fixtures.path('old-repl-history-file-obj.json');\n const oldHistoryPathFaulty = fixtures.path('old-repl-history-file-faulty.json');\n const oldHistoryPath = fixtures.path('old-repl-history-file.json');\n const enoentHistoryPath = fixtures.path('enoent-repl-history-file.json');\n const emptyHistoryPath = fixtures.path('.empty-repl-history-file');\n-const defaultHistoryPath = path.join(common.tmpDir, '.node_repl_history');\n+const defaultHistoryPath = path.join(tmpdir.path, '.node_repl_history');\n const emptyHiddenHistoryPath = fixtures.path('.empty-hidden-repl-history-file');\n-const devNullHistoryPath = path.join(common.tmpDir,\n+const devNullHistoryPath = path.join(tmpdir.path,\n                                      '.dev-null-repl-history-file');\n // Common message bits\n const prompt = '> ';"
        },
        {
            "sha": "3778ffac3ec379dd45047b34067f0b2d08c84621",
            "filename": "test/parallel/test-repl-save-load.js",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-repl-save-load.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-repl-save-load.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-save-load.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,7 +25,8 @@ const assert = require('assert');\n const join = require('path').join;\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const repl = require('repl');\n \n@@ -39,7 +40,7 @@ const testFile = [\n   'var top = function() {',\n   'var inner = {one:1};'\n ];\n-const saveFileName = join(common.tmpDir, 'test.save.js');\n+const saveFileName = join(tmpdir.path, 'test.save.js');\n \n // input some data\n putIn.run(testFile);\n@@ -91,7 +92,7 @@ testMe.complete('inner.o', function(error, data) {\n // clear the REPL\n putIn.run(['.clear']);\n \n-let loadFile = join(common.tmpDir, 'file.does.not.exist');\n+let loadFile = join(tmpdir.path, 'file.does.not.exist');\n \n // should not break\n putIn.write = function(data) {\n@@ -103,7 +104,7 @@ putIn.write = function(data) {\n putIn.run([`.load ${loadFile}`]);\n \n // throw error on loading directory\n-loadFile = common.tmpDir;\n+loadFile = tmpdir.path;\n putIn.write = function(data) {\n   assert.strictEqual(data, `Failed to load:${loadFile} is not a valid file\\n`);\n   putIn.write = () => {};\n@@ -115,7 +116,7 @@ putIn.run(['.clear']);\n \n // NUL (\\0) is disallowed in filenames in UNIX-like operating systems and\n // Windows so we can use that to test failed saves\n-const invalidFileName = join(common.tmpDir, '\\0\\0\\0\\0\\0');\n+const invalidFileName = join(tmpdir.path, '\\0\\0\\0\\0\\0');\n \n // should not break\n putIn.write = function(data) {"
        },
        {
            "sha": "548a0b5425df39e3f421f5362bc1848c17f0c011",
            "filename": "test/parallel/test-require-long-path.js",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-require-long-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-require-long-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-require-long-path.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -6,15 +6,17 @@ if (!common.isWindows)\n const fs = require('fs');\n const path = require('path');\n \n+const tmpdir = require('../common/tmpdir');\n+\n // make a path that is more than 260 chars long.\n-const dirNameLen = Math.max(260 - common.tmpDir.length, 1);\n-const dirName = path.join(common.tmpDir, 'x'.repeat(dirNameLen));\n+const dirNameLen = Math.max(260 - tmpdir.path.length, 1);\n+const dirName = path.join(tmpdir.path, 'x'.repeat(dirNameLen));\n const fullDirPath = path.resolve(dirName);\n \n const indexFile = path.join(fullDirPath, 'index.js');\n const otherFile = path.join(fullDirPath, 'other.js');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n fs.mkdirSync(fullDirPath);\n fs.writeFileSync(indexFile, 'require(\"./other\");');\n@@ -23,4 +25,4 @@ fs.writeFileSync(otherFile, '');\n require(indexFile);\n require(otherFile);\n \n-common.refreshTmpDir();\n+tmpdir.refresh();"
        },
        {
            "sha": "d245c21dd1fdb49714a581c0ac69521018f9d54a",
            "filename": "test/parallel/test-require-symlink.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-require-symlink.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-require-symlink.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-require-symlink.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -14,12 +14,13 @@ const process = require('process');\n // Setup: Copy fixtures to tmp directory.\n \n const fixtures = require('../common/fixtures');\n+const tmpdir = require('../common/tmpdir');\n const dirName = 'module-require-symlink';\n const fixtureSource = fixtures.path(dirName);\n-const tmpDirTarget = path.join(common.tmpDir, dirName);\n+const tmpDirTarget = path.join(tmpdir.path, dirName);\n \n // Copy fixtureSource to linkTarget recursively.\n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n function copyDir(source, target) {\n   fs.mkdirSync(target);\n@@ -40,7 +41,7 @@ copyDir(fixtureSource, tmpDirTarget);\n // Move to tmp dir and do everything with relative paths there so that the test\n // doesn't incorrectly fail due to a symlink somewhere else in the absolute\n // path.\n-process.chdir(common.tmpDir);\n+process.chdir(tmpdir.path);\n \n const linkDir = path.join(dirName,\n                           'node_modules',"
        },
        {
            "sha": "530ff3bb56c3d070633a5634b9cb1db50bafa673",
            "filename": "test/parallel/test-require-unicode.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-require-unicode.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-require-unicode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-require-unicode.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,13 +1,14 @@\n 'use strict';\n \n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const dirname = path.join(common.tmpDir, '\\u4e2d\\u6587\\u76ee\\u5f55');\n+const dirname = path.join(tmpdir.path, '\\u4e2d\\u6587\\u76ee\\u5f55');\n fs.mkdirSync(dirname);\n fs.writeFileSync(path.join(dirname, 'file.js'), 'module.exports = 42;');\n fs.writeFileSync(path.join(dirname, 'package.json'),"
        },
        {
            "sha": "eda8e068fe37fe8135cb33a7511689bd69374e9b",
            "filename": "test/parallel/test-stdin-from-file.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-stdin-from-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-stdin-from-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stdin-from-file.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,13 +1,14 @@\n 'use strict';\n const common = require('../common');\n const fixtures = require('../common/fixtures');\n+const tmpdir = require('../common/tmpdir');\n const assert = require('assert');\n const { join } = require('path');\n const childProcess = require('child_process');\n const fs = require('fs');\n \n const stdoutScript = fixtures.path('echo-close-check.js');\n-const tmpFile = join(common.tmpDir, 'stdin.txt');\n+const tmpFile = join(tmpdir.path, 'stdin.txt');\n \n const cmd = `\"${process.argv[0]}\" \"${stdoutScript}\" < \"${tmpFile}\"`;\n \n@@ -24,7 +25,7 @@ const string = 'abc\\nümlaut.\\nsomething else\\n' +\n                '有效的改善了岭南地区落后的政治、##济现状。\\n';\n \n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n console.log(`${cmd}\\n\\n`);\n "
        },
        {
            "sha": "a02531ca41fbdbd930a4c48426a20e6d0de295eb",
            "filename": "test/parallel/test-stdout-to-file.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-stdout-to-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-stdout-to-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stdout-to-file.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -5,12 +5,13 @@ const path = require('path');\n const childProcess = require('child_process');\n const fs = require('fs');\n const fixtures = require('../common/fixtures');\n+const tmpdir = require('../common/tmpdir');\n \n const scriptString = fixtures.path('print-chars.js');\n const scriptBuffer = fixtures.path('print-chars-from-buffer.js');\n-const tmpFile = path.join(common.tmpDir, 'stdout.txt');\n+const tmpFile = path.join(tmpdir.path, 'stdout.txt');\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n function test(size, useBuffer, cb) {\n   const cmd = `\"${process.argv[0]}\" \"${"
        },
        {
            "sha": "88e78b7a2b2e59c42860ab3a81d0cce19d0f8f3f",
            "filename": "test/parallel/test-tls-connect-pipe.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-tls-connect-pipe.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-tls-connect-pipe.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-connect-pipe.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -33,7 +33,8 @@ const options = {\n   cert: fixtures.readKey('agent1-cert.pem')\n };\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const server = tls.Server(options, common.mustCall(function(socket) {\n   server.close();"
        },
        {
            "sha": "263501ae0330ac9c1f8635c4e945ea7f1655a46c",
            "filename": "test/parallel/test-tls-net-connect-prefer-path.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-tls-net-connect-prefer-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-tls-net-connect-prefer-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-net-connect-prefer-path.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,7 +8,8 @@ const fixtures = require('../common/fixtures');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const tls = require('tls');\n const net = require('net');"
        },
        {
            "sha": "b400e35d412392e5ac620c3d47306da3cf6d11d3",
            "filename": "test/parallel/test-tls-wrap-econnreset-pipe.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-tls-wrap-econnreset-pipe.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-tls-wrap-econnreset-pipe.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-wrap-econnreset-pipe.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,7 +8,8 @@ const assert = require('assert');\n const tls = require('tls');\n const net = require('net');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const server = net.createServer((c) => {\n   c.end();"
        },
        {
            "sha": "07c532365972205b4d6884d6a6245dd5981a4484",
            "filename": "test/parallel/test-trace-events-all.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-all.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-all.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-all.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,8 +8,9 @@ const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n const proc = cp.spawn(process.execPath,\n                       [ '--trace-events-enabled', '-e', CODE ]);"
        },
        {
            "sha": "b15d83b07a5799af12376b6c97a435c50b7b8b1a",
            "filename": "test/parallel/test-trace-events-async-hooks.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-async-hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-async-hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-async-hooks.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,8 +8,9 @@ const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n const proc = cp.spawn(process.execPath,\n                       [ '--trace-events-enabled',"
        },
        {
            "sha": "fc4e7f99f87c1b19f87a14373117517c2ed9fd91",
            "filename": "test/parallel/test-trace-events-binding.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-binding.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-binding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-binding.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,8 +20,9 @@ const CODE = `\n `;\n const FILE_NAME = 'node_trace.1.log';\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n const proc = cp.spawn(process.execPath,\n                       [ '--trace-events-enabled',"
        },
        {
            "sha": "aa0662b74935689cc8b94dc041836977999e0c81",
            "filename": "test/parallel/test-trace-events-category-used.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-category-used.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-category-used.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-category-used.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -7,8 +7,9 @@ const CODE = `console.log(\n   process.binding(\"trace_events\").categoryGroupEnabled(\"custom\")\n );`;\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n const procEnabled = cp.spawn(\n   process.execPath,"
        },
        {
            "sha": "7a87fc5cbd3a8d161e625fe72f933e512926b6c0",
            "filename": "test/parallel/test-trace-events-none.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-none.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-none.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-none.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -7,8 +7,9 @@ const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n const proc_no_categories = cp.spawn(\n   process.execPath,"
        },
        {
            "sha": "9f164ee62797205f527b1a57a28ea44219ea58b0",
            "filename": "test/parallel/test-trace-events-process-exit.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-process-exit.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-process-exit.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-process-exit.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -4,10 +4,12 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+const tmpdir = require('../common/tmpdir');\n+\n const FILE_NAME = 'node_trace.1.log';\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n const proc = cp.spawn(process.execPath,\n                       [ '--trace-events-enabled',"
        },
        {
            "sha": "49c34b8f17bbb24e71acee448ca59b5349ad9e2e",
            "filename": "test/parallel/test-trace-events-v8.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-v8.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-trace-events-v8.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-v8.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,8 +8,9 @@ const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';\n \n-common.refreshTmpDir();\n-process.chdir(common.tmpDir);\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n+process.chdir(tmpdir.path);\n \n const proc = cp.spawn(process.execPath,\n                       [ '--trace-events-enabled',"
        },
        {
            "sha": "99c3f1757e05d8116e35e36545b7b1b1b9830c10",
            "filename": "test/parallel/test-zlib-from-gzip.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-zlib-from-gzip.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fparallel%2Ftest-zlib-from-gzip.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-zlib-from-gzip.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -29,15 +29,16 @@ const zlib = require('zlib');\n const path = require('path');\n const fixtures = require('../common/fixtures');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n const gunzip = zlib.createGunzip();\n \n const fs = require('fs');\n \n const fixture = fixtures.path('person.jpg.gz');\n const unzippedFixture = fixtures.path('person.jpg');\n-const outputFile = path.resolve(common.tmpDir, 'person.jpg');\n+const outputFile = path.resolve(tmpdir.path, 'person.jpg');\n const expect = fs.readFileSync(unzippedFixture);\n const inp = fs.createReadStream(fixture);\n const out = fs.createWriteStream(outputFile);"
        },
        {
            "sha": "786e325ce3333db28702dad042535616ddb07844",
            "filename": "test/pummel/test-fs-largefile.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-fs-largefile.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-fs-largefile.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-fs-largefile.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -20,15 +20,16 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n 'use strict';\n-const common = require('../common');\n+require('../common');\n \n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const filepath = path.join(common.tmpDir, 'large.txt');\n+const filepath = path.join(tmpdir.path, 'large.txt');\n const fd = fs.openSync(filepath, 'w+');\n const offset = 5 * 1024 * 1024 * 1024; // 5GB\n const message = 'Large File';"
        },
        {
            "sha": "7b7065cffbfe64b84b4f5d912284b82bc490b7c1",
            "filename": "test/pummel/test-fs-watch-file-slow.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-fs-watch-file-slow.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-fs-watch-file-slow.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-fs-watch-file-slow.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,7 +25,9 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-const FILENAME = path.join(common.tmpDir, 'watch-me');\n+const tmpdir = require('../common/tmpdir');\n+\n+const FILENAME = path.join(tmpdir.path, 'watch-me');\n const TIMEOUT = 1300;\n \n let nevents = 0;"
        },
        {
            "sha": "c893c9dfa6e268f05c6b325c649e2f9842d73fab",
            "filename": "test/pummel/test-fs-watch-file.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-fs-watch-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-fs-watch-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-fs-watch-file.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,12 +25,14 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n+const tmpdir = require('../common/tmpdir');\n+\n let watchSeenOne = 0;\n let watchSeenTwo = 0;\n let watchSeenThree = 0;\n let watchSeenFour = 0;\n \n-const testDir = common.tmpDir;\n+const testDir = tmpdir.path;\n \n const filenameOne = 'watch.txt';\n const filepathOne = path.join(testDir, filenameOne);"
        },
        {
            "sha": "2b10f9b24da74656a536e0c6618275f09e858869",
            "filename": "test/pummel/test-fs-watch-non-recursive.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-fs-watch-non-recursive.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-fs-watch-non-recursive.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-fs-watch-non-recursive.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -24,7 +24,9 @@ const common = require('../common');\n const path = require('path');\n const fs = require('fs');\n \n-const testDir = common.tmpDir;\n+const tmpdir = require('tmpdir');\n+\n+const testDir = tmpdir.path;\n const testsubdir = path.join(testDir, 'testsubdir');\n const filepath = path.join(testsubdir, 'watch.txt');\n "
        },
        {
            "sha": "a62df944863062f52999c0a849b2ff86e50dd311",
            "filename": "test/pummel/test-regress-GH-814.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-regress-GH-814.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-regress-GH-814.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-regress-GH-814.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -22,9 +22,11 @@\n 'use strict';\n // Flags: --expose_gc\n \n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n \n+const tmpdir = require('../common/tmpdir');\n+\n function newBuffer(size, value) {\n   const buffer = Buffer.allocUnsafe(size);\n   while (size--) {\n@@ -36,7 +38,7 @@ function newBuffer(size, value) {\n }\n \n const fs = require('fs');\n-const testFileName = require('path').join(common.tmpDir, 'GH-814_testFile.txt');\n+const testFileName = require('path').join(tmpdir.path, 'GH-814_testFile.txt');\n const testFileFD = fs.openSync(testFileName, 'w');\n console.log(testFileName);\n "
        },
        {
            "sha": "a183e082f86aa6bce655b91d6251c4f97fcd4c57",
            "filename": "test/pummel/test-regress-GH-814_2.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-regress-GH-814_2.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-regress-GH-814_2.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-regress-GH-814_2.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -22,11 +22,12 @@\n 'use strict';\n // Flags: --expose_gc\n \n-const common = require('../common');\n+require('../common');\n const assert = require('assert');\n \n const fs = require('fs');\n-const testFileName = require('path').join(common.tmpDir, 'GH-814_test.txt');\n+const tmpdir = require('../common/tmpdir');\n+const testFileName = require('path').join(tmpdir.path, 'GH-814_test.txt');\n const testFD = fs.openSync(testFileName, 'w');\n console.error(`${testFileName}\\n`);\n "
        },
        {
            "sha": "49c38102fc5c5c68403982e43a5709707d26aa08",
            "filename": "test/pummel/test-tls-session-timeout.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-tls-session-timeout.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fpummel%2Ftest-tls-session-timeout.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-tls-session-timeout.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -28,6 +28,8 @@ if (!common.opensslCli)\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n \n+const tmpdir = require('../common/tmpdir');\n+\n doTest();\n \n // This test consists of three TLS requests --\n@@ -65,7 +67,7 @@ function doTest() {\n \n   const sessionFileName = (function() {\n     const ticketFileName = 'tls-session-ticket.txt';\n-    const tmpPath = join(common.tmpDir, ticketFileName);\n+    const tmpPath = join(tmpdir.path, ticketFileName);\n     fs.writeFileSync(tmpPath, fixtures.readSync(ticketFileName));\n     return tmpPath;\n   }());"
        },
        {
            "sha": "86a4065fb2b48677bc4321f416d894cb7b16f8b2",
            "filename": "test/sequential/test-async-wrap-getasyncid.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-async-wrap-getasyncid.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -6,6 +6,7 @@ const fs = require('fs');\n const net = require('net');\n const providers = Object.assign({}, process.binding('async_wrap').Providers);\n const fixtures = require('../common/fixtures');\n+const tmpdir = require('../common/tmpdir');\n const { getSystemErrorName } = require('util');\n \n // Make sure that all Providers are tested.\n@@ -139,7 +140,7 @@ if (common.hasCrypto) { // eslint-disable-line crypto-check\n }\n \n {\n-  common.refreshTmpDir();\n+  tmpdir.refresh();\n \n   const server = net.createServer(common.mustCall((socket) => {\n     server.close();"
        },
        {
            "sha": "88cf7347efbfdf1c7ddcf59923021cc797b38736",
            "filename": "test/sequential/test-fs-readfile-tostring-fail.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-fs-readfile-tostring-fail.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-fs-readfile-tostring-fail.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-fs-readfile-tostring-fail.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -13,9 +13,10 @@ const kStringMaxLength = process.binding('buffer').kStringMaxLength;\n if (common.isAIX && (Number(cp.execSync('ulimit -f')) * 512) < kStringMaxLength)\n   common.skip('intensive toString tests due to file size confinements');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const file = path.join(common.tmpDir, 'toobig.txt');\n+const file = path.join(tmpdir.path, 'toobig.txt');\n const stream = fs.createWriteStream(file, {\n   flags: 'a'\n });"
        },
        {
            "sha": "31708ee6144c7d7a112c2a090726a099d8223bec",
            "filename": "test/sequential/test-fs-watch.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-fs-watch.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-fs-watch.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-fs-watch.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -26,14 +26,16 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n+const tmpdir = require('../common/tmpdir');\n+\n const expectFilePath = common.isWindows ||\n                        common.isLinux ||\n                        common.isOSX ||\n                        common.isAIX;\n \n-const testDir = common.tmpDir;\n+const testDir = tmpdir.path;\n \n-common.refreshTmpDir();\n+tmpdir.refresh();\n \n {\n   const filepath = path.join(testDir, 'watch.txt');"
        },
        {
            "sha": "910e7a0fc497bd72af77699b86cec02603ff2804",
            "filename": "test/sequential/test-http2-timeout-large-write-file.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-http2-timeout-large-write-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-http2-timeout-large-write-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-http2-timeout-large-write-file.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -8,7 +8,8 @@ const fs = require('fs');\n const http2 = require('http2');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n // This test assesses whether long-running writes can complete\n // or timeout because the session or stream are not aware that the\n@@ -29,7 +30,7 @@ let offsetTimeout = common.platformTimeout(100);\n let didReceiveData = false;\n \n const content = Buffer.alloc(writeSize, 0x44);\n-const filepath = path.join(common.tmpDir, 'http2-large-write.tmp');\n+const filepath = path.join(tmpdir.path, 'http2-large-write.tmp');\n fs.writeFileSync(filepath, content, 'binary');\n const fd = fs.openSync(filepath, 'r');\n "
        },
        {
            "sha": "6fa789f19865d64691da242fb457fbc4f3f6df88",
            "filename": "test/sequential/test-module-loading.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-module-loading.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-module-loading.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-module-loading.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -242,7 +242,8 @@ try {\n \n   assert.deepStrictEqual(children, {\n     'common/index.js': {\n-      'common/fixtures.js': {}\n+      'common/fixtures.js': {},\n+      'common/tmpdir.js': {}\n     },\n     'fixtures/not-main-module.js': {},\n     'fixtures/a.js': {"
        },
        {
            "sha": "8936537323581e5ec1c1ba47a75d556e3aed288a",
            "filename": "test/sequential/test-regress-GH-4027.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-regress-GH-4027.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Fsequential%2Ftest-regress-GH-4027.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-regress-GH-4027.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -25,9 +25,10 @@ const assert = require('assert');\n const path = require('path');\n const fs = require('fs');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const filename = path.join(common.tmpDir, 'watched');\n+const filename = path.join(tmpdir.path, 'watched');\n fs.writeFileSync(filename, 'quis custodiet ipsos custodes');\n \n fs.watchFile(filename, { interval: 50 }, common.mustCall(function(curr, prev) {"
        },
        {
            "sha": "33944655258bef872663a288e1f9d73cb853331d",
            "filename": "test/tick-processor/tick-processor-base.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Ftick-processor%2Ftick-processor-base.js",
            "raw_url": "https://github.com/nodejs/node/raw/bf6ce47259ebfe9f6349c223cc1735726aee062d/test%2Ftick-processor%2Ftick-processor-base.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ftick-processor%2Ftick-processor-base.js?ref=bf6ce47259ebfe9f6349c223cc1735726aee062d",
            "patch": "@@ -1,12 +1,13 @@\n 'use strict';\n-const common = require('../common');\n+require('../common');\n const fs = require('fs');\n const cp = require('child_process');\n const path = require('path');\n \n-common.refreshTmpDir();\n+const tmpdir = require('../common/tmpdir');\n+tmpdir.refresh();\n \n-const LOG_FILE = path.join(common.tmpDir, 'tick-processor.log');\n+const LOG_FILE = path.join(tmpdir.path, 'tick-processor.log');\n const RETRY_TIMEOUT = 150;\n \n function runTest(test) {"
        }
    ],
    "stats": {
        "total": 1097,
        "additions": 643,
        "deletions": 454
    }
}