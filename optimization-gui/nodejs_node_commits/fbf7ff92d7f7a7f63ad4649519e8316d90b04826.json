{
    "author": "ofrobots",
    "message": "doc: add inspector usage example\n\nAdd a simple example showing how to use the inspector API to access\nthe CPU profiler.\n\nPR-URL: https://github.com/nodejs/node/pull/19172\nReviewed-By: Eugene Ostroukhov <eostroukhov@google.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Khaidi Chu <i@2333.moe>",
    "sha": "fbf7ff92d7f7a7f63ad4649519e8316d90b04826",
    "files": [
        {
            "sha": "c801510b7563f21be639ec0fff6d7cb097f18037",
            "filename": "doc/api/inspector.md",
            "status": "modified",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/nodejs/node/blob/fbf7ff92d7f7a7f63ad4649519e8316d90b04826/doc%2Fapi%2Finspector.md",
            "raw_url": "https://github.com/nodejs/node/raw/fbf7ff92d7f7a7f63ad4649519e8316d90b04826/doc%2Fapi%2Finspector.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Finspector.md?ref=fbf7ff92d7f7a7f63ad4649519e8316d90b04826",
            "patch": "@@ -136,8 +136,34 @@ with an error. [`session.connect()`] will need to be called to be able to send\n messages again. Reconnected session will lose all inspector state, such as\n enabled agents or configured breakpoints.\n \n+## Example usage\n+\n+### CPU Profiler\n+\n+Apart from the debugger, various V8 Profilers are available through the DevTools\n+protocol. Here's a simple example showing how to use the [CPU profiler][]:\n+\n+```js\n+const inspector = require('inspector');\n+\n+const session = new inspector.Session();\n+session.connect();\n+\n+session.post('Profiler.enable', () => {\n+  session.post('Profiler.start', () => {\n+    // invoke business logic under measurement here...\n+\n+    // some time later...\n+    session.post('Profiler.stop', ({ profile }) => {\n+      // write profile to disk, upload, etc.\n+    });\n+  });\n+});\n+```\n+\n \n [`session.connect()`]: #inspector_session_connect\n [`Debugger.paused`]: https://chromedevtools.github.io/devtools-protocol/v8/Debugger/#event-paused\n [`EventEmitter`]: events.html#events_class_eventemitter\n [Chrome DevTools Protocol Viewer]: https://chromedevtools.github.io/devtools-protocol/v8/\n+[CPU Profiler]: https://chromedevtools.github.io/devtools-protocol/v8/Profiler"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 26,
        "deletions": 0
    }
}