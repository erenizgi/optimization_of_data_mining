{
    "author": "Trott",
    "message": "test: refactor test-http-client-timeout-option-with-agent\n\n* Switch from Date.now() to process.hrtime.bigint().\n* Move start time recording to before the request is created, not after.\n\nFixes: https://github.com/nodejs/node/issues/25746\n\nPR-URL: https://github.com/nodejs/node/pull/25752\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "b8977045f209c0de2d4d0333d098acd1823ded63",
    "files": [
        {
            "sha": "11a2db419c352905d6c20c7ee391b43e681514e9",
            "filename": "test/parallel/test-http-client-timeout-option-with-agent.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/b8977045f209c0de2d4d0333d098acd1823ded63/test%2Fparallel%2Ftest-http-client-timeout-option-with-agent.js",
            "raw_url": "https://github.com/nodejs/node/raw/b8977045f209c0de2d4d0333d098acd1823ded63/test%2Fparallel%2Ftest-http-client-timeout-option-with-agent.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-http-client-timeout-option-with-agent.js?ref=b8977045f209c0de2d4d0333d098acd1823ded63",
            "patch": "@@ -30,8 +30,8 @@ server.listen(0, options.host, () => {\n \n function doRequest() {\n   options.port = server.address().port;\n+  const start = process.hrtime.bigint();\n   const req = http.request(options);\n-  const start = Date.now();\n   req.on('error', () => {\n     // This space is intentionally left blank.\n   });\n@@ -40,11 +40,11 @@ function doRequest() {\n   let timeout_events = 0;\n   req.on('timeout', common.mustCall(() => {\n     timeout_events += 1;\n-    const duration = Date.now() - start;\n+    const duration = process.hrtime.bigint() - start;\n     // The timeout event cannot be precisely timed. It will delay\n     // some number of milliseconds.\n     assert.ok(\n-      duration >= HTTP_CLIENT_TIMEOUT,\n+      duration >= BigInt(HTTP_CLIENT_TIMEOUT * 1e6),\n       `duration ${duration}ms less than timeout ${HTTP_CLIENT_TIMEOUT}ms`\n     );\n   }));"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}