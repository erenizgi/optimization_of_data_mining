{
    "author": "addaleax",
    "message": "stream: re-use existing `once()` implementation\n\nPR-URL: https://github.com/nodejs/node/pull/24991\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Anto Aravinth <anto.aravinth.cse@gmail.com>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>",
    "sha": "c9a7088bd80dc190dfc140167998bd004911eef5",
    "files": [
        {
            "sha": "1753996a4f85debd765bd58986174c04ddb0388a",
            "filename": "lib/internal/streams/end-of-stream.js",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/c9a7088bd80dc190dfc140167998bd004911eef5/lib%2Finternal%2Fstreams%2Fend-of-stream.js",
            "raw_url": "https://github.com/nodejs/node/raw/c9a7088bd80dc190dfc140167998bd004911eef5/lib%2Finternal%2Fstreams%2Fend-of-stream.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fstreams%2Fend-of-stream.js?ref=c9a7088bd80dc190dfc140167998bd004911eef5",
            "patch": "@@ -7,20 +7,12 @@ const {\n   ERR_INVALID_ARG_TYPE,\n   ERR_STREAM_PREMATURE_CLOSE\n } = require('internal/errors').codes;\n+const { once } = require('internal/util');\n \n function isRequest(stream) {\n   return stream.setHeader && typeof stream.abort === 'function';\n }\n \n-function once(callback) {\n-  let called = false;\n-  return function(err) {\n-    if (called) return;\n-    called = true;\n-    callback.call(this, err);\n-  };\n-}\n-\n function eos(stream, opts, callback) {\n   if (arguments.length === 2) {\n     callback = opts;"
        },
        {
            "sha": "7af06351c91406fb86fcdee31582eac714cbe011",
            "filename": "lib/internal/util.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/c9a7088bd80dc190dfc140167998bd004911eef5/lib%2Finternal%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/c9a7088bd80dc190dfc140167998bd004911eef5/lib%2Finternal%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil.js?ref=c9a7088bd80dc190dfc140167998bd004911eef5",
            "patch": "@@ -375,7 +375,7 @@ function once(callback) {\n   return function(...args) {\n     if (called) return;\n     called = true;\n-    callback(...args);\n+    callback.apply(this, args);\n   };\n }\n "
        }
    ],
    "stats": {
        "total": 12,
        "additions": 2,
        "deletions": 10
    }
}