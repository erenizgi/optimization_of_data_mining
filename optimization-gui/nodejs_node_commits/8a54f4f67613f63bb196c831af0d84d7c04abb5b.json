{
    "author": "jakobkummerow",
    "message": "deps: cherry-pick 0bcb1d6f from upstream V8\n\nOriginal commit message:\n\n    Introduce --disallow-code-generation-from-strings\n\n    Exposing the existing Context::AllowCodeGenerationFromStrings(false) API\n    to the command line.\n\n    Bug: v8:7134\n    Change-Id: I062ccff0b03c5bcf6878c41c455c0ded37a1d743\n    Reviewed-on: https://chromium-review.googlesource.com/809631\n    Reviewed-by: Michael Starzinger <mstarzinger@chromium.org>\n    Commit-Queue: Jakob Kummerow <jkummerow@chromium.org>\n    Cr-Commit-Position: refs/heads/master@{#49911}\n\nPR-URL: https://github.com/nodejs/node/pull/18212\nRefs: https://github.com/v8/v8/commit/0bcb1d6f2de9b278b1de7de1b5333e7f47fdce8e\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Gus Caplan <me@gus.host>",
    "sha": "8a54f4f67613f63bb196c831af0d84d7c04abb5b",
    "files": [
        {
            "sha": "b2fa7874c2689792fba24f5cc259fa97219b36ca",
            "filename": "common.gypi",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/8a54f4f67613f63bb196c831af0d84d7c04abb5b/common.gypi",
            "raw_url": "https://github.com/nodejs/node/raw/8a54f4f67613f63bb196c831af0d84d7c04abb5b/common.gypi",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/common.gypi?ref=8a54f4f67613f63bb196c831af0d84d7c04abb5b",
            "patch": "@@ -27,7 +27,7 @@\n \n     # Reset this number to 0 on major V8 upgrades.\n     # Increment by one for each non-official patch applied to deps/v8.\n-    'v8_embedder_string': '-node.4',\n+    'v8_embedder_string': '-node.5',\n \n     # Enable disassembler for `--print-code` v8 options\n     'v8_enable_disassembler': 1,"
        },
        {
            "sha": "695200172d7b5f1bea58d282d89bc1b513e833a2",
            "filename": "deps/v8/src/bootstrapper.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/8a54f4f67613f63bb196c831af0d84d7c04abb5b/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "raw_url": "https://github.com/nodejs/node/raw/8a54f4f67613f63bb196c831af0d84d7c04abb5b/deps%2Fv8%2Fsrc%2Fbootstrapper.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fbootstrapper.cc?ref=8a54f4f67613f63bb196c831af0d84d7c04abb5b",
            "patch": "@@ -5475,6 +5475,11 @@ Genesis::Genesis(\n     if (!InstallDebuggerNatives()) return;\n   }\n \n+  if (FLAG_disallow_code_generation_from_strings) {\n+    native_context()->set_allow_code_gen_from_strings(\n+        isolate->heap()->false_value());\n+  }\n+\n   ConfigureUtilsObject(context_type);\n \n   // Check that the script context table is empty except for the 'this' binding."
        },
        {
            "sha": "92635703bb17a23e06508dc93373f8783298db35",
            "filename": "deps/v8/src/flag-definitions.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/8a54f4f67613f63bb196c831af0d84d7c04abb5b/deps%2Fv8%2Fsrc%2Fflag-definitions.h",
            "raw_url": "https://github.com/nodejs/node/raw/8a54f4f67613f63bb196c831af0d84d7c04abb5b/deps%2Fv8%2Fsrc%2Fflag-definitions.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Fsrc%2Fflag-definitions.h?ref=8a54f4f67613f63bb196c831af0d84d7c04abb5b",
            "patch": "@@ -768,6 +768,8 @@ DEFINE_BOOL(builtins_in_stack_traces, false,\n             \"show built-in functions in stack traces\")\n DEFINE_BOOL(enable_experimental_builtins, true,\n             \"enable new csa-based experimental builtins\")\n+DEFINE_BOOL(disallow_code_generation_from_strings, false,\n+            \"disallow eval and friends\")\n \n // builtins.cc\n DEFINE_BOOL(allow_unsafe_function_constructor, false,"
        },
        {
            "sha": "30d1b967d5f128c9769b00dc5a1b0e03b8491bf3",
            "filename": "deps/v8/test/mjsunit/disallow-codegen-from-strings.js",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/8a54f4f67613f63bb196c831af0d84d7c04abb5b/deps%2Fv8%2Ftest%2Fmjsunit%2Fdisallow-codegen-from-strings.js",
            "raw_url": "https://github.com/nodejs/node/raw/8a54f4f67613f63bb196c831af0d84d7c04abb5b/deps%2Fv8%2Ftest%2Fmjsunit%2Fdisallow-codegen-from-strings.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/deps%2Fv8%2Ftest%2Fmjsunit%2Fdisallow-codegen-from-strings.js?ref=8a54f4f67613f63bb196c831af0d84d7c04abb5b",
            "patch": "@@ -0,0 +1,9 @@\n+// Copyright 2017 the V8 project authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style license that can be\n+// found in the LICENSE file.\n+\n+// Flags: --disallow-code-generation-from-strings\n+\n+assertThrows(\"1 + 1\", EvalError);\n+assertThrows(() => eval(\"1 + 1\"), EvalError);\n+assertThrows(() => Function(\"x\", \"return x + 1\"), EvalError);"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 17,
        "deletions": 1
    }
}