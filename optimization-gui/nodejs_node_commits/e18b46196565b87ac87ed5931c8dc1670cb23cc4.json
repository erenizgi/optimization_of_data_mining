{
    "author": "Trott",
    "message": "test: fix test/pummel/test-fs-watch-file.js\n\ntest-fs-watch-file.js fails for two reasons. First, there are cases\nwhere it is checking the error message for an error whose message has\nchanged since the test was written. Change these instances to check for\nan error code instead.\n\nSecond, there is an instance where it tries to remove a listener but\nfails because `common.mustNotCall()` returns a differnet instance of a\nfunction on each call. Store the function in a variable name so it can\nbe removed as a listener on a file.\n\nPR-URL: https://github.com/nodejs/node/pull/25384\nReviewed-By: Daijiro Wachi <daijiro.wachi@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "e18b46196565b87ac87ed5931c8dc1670cb23cc4",
    "files": [
        {
            "sha": "70e793938ac2d3af5dec2fb479f0f4094bbcc5be",
            "filename": "test/pummel/test-fs-watch-file.js",
            "status": "modified",
            "additions": 7,
            "deletions": 14,
            "changes": 21,
            "blob_url": "https://github.com/nodejs/node/blob/e18b46196565b87ac87ed5931c8dc1670cb23cc4/test%2Fpummel%2Ftest-fs-watch-file.js",
            "raw_url": "https://github.com/nodejs/node/raw/e18b46196565b87ac87ed5931c8dc1670cb23cc4/test%2Fpummel%2Ftest-fs-watch-file.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-fs-watch-file.js?ref=e18b46196565b87ac87ed5931c8dc1670cb23cc4",
            "patch": "@@ -60,12 +60,8 @@ process.on('exit', function() {\n fs.writeFileSync(filepathOne, 'hello');\n \n assert.throws(\n-  function() {\n-    fs.watchFile(filepathOne);\n-  },\n-  function(e) {\n-    return e.message === '\"watchFile()\" requires a listener function';\n-  }\n+  () => { fs.watchFile(filepathOne); },\n+  { code: 'ERR_INVALID_ARG_TYPE' }\n );\n \n // Does not throw.\n@@ -84,12 +80,8 @@ process.chdir(testDir);\n fs.writeFileSync(filepathTwoAbs, 'howdy');\n \n assert.throws(\n-  function() {\n-    fs.watchFile(filepathTwo);\n-  },\n-  function(e) {\n-    return e.message === '\"watchFile()\" requires a listener function';\n-  }\n+  () => { fs.watchFile(filepathTwo); },\n+  { code: 'ERR_INVALID_ARG_TYPE' }\n );\n \n { // Does not throw.\n@@ -114,9 +106,10 @@ setTimeout(function() {\n     fs.unwatchFile(filenameThree, b);\n     ++watchSeenThree;\n   }\n-  fs.watchFile(filenameThree, common.mustNotCall());\n+  const uncalledListener = common.mustNotCall();\n+  fs.watchFile(filenameThree, uncalledListener);\n   fs.watchFile(filenameThree, b);\n-  fs.unwatchFile(filenameThree, common.mustNotCall());\n+  fs.unwatchFile(filenameThree, uncalledListener);\n }\n \n setTimeout(function() {"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 7,
        "deletions": 14
    }
}