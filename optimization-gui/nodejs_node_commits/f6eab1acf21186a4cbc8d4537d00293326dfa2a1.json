{
    "author": "jasnell",
    "message": "perf_hooks: avoid memory leak on gc observer\n\nFixes: https://github.com/nodejs/node/issues/22229\n\nPR-URL: https://github.com/nodejs/node/pull/22241\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Yang Guo <yangguo@chromium.org>\nReviewed-By: George Adams <george.adams@uk.ibm.com>",
    "sha": "f6eab1acf21186a4cbc8d4537d00293326dfa2a1",
    "files": [
        {
            "sha": "9c995d3b8de60326fe3e28da61c7bd53df640837",
            "filename": "src/node_perf.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/f6eab1acf21186a4cbc8d4537d00293326dfa2a1/src%2Fnode_perf.cc",
            "raw_url": "https://github.com/nodejs/node/raw/f6eab1acf21186a4cbc8d4537d00293326dfa2a1/src%2Fnode_perf.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_perf.cc?ref=f6eab1acf21186a4cbc8d4537d00293326dfa2a1",
            "patch": "@@ -272,6 +272,9 @@ void MarkGarbageCollectionEnd(Isolate* isolate,\n                               v8::GCCallbackFlags flags,\n                               void* data) {\n   Environment* env = static_cast<Environment*>(data);\n+  // If no one is listening to gc performance entries, do not create them.\n+  if (!env->performance_state()->observers[NODE_PERFORMANCE_ENTRY_TYPE_GC])\n+    return;\n   GCPerformanceEntry* entry =\n       new GCPerformanceEntry(env,\n                              static_cast<PerformanceGCKind>(type),"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 3,
        "deletions": 0
    }
}