{
    "author": "digitalinfinity",
    "message": "doc: add guide for updating N-API API surface\n\nThis adds a new guide that outlines the principles and guidelines\nfor contributing a new API to the N-API surface. These guidelines\nwere formulated based on discussions in the API working group.\n\nPR-URL: https://github.com/nodejs/node/pull/21877\nRefs: https://github.com/nodejs/abi-stable-node/issues/301\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>",
    "sha": "e83126a8833ace98d13c2be507e40f8b1340952c",
    "files": [
        {
            "sha": "08133eda2a63bf12d8beb7181f227dbc1e0867f7",
            "filename": "doc/guides/adding-new-napi-api.md",
            "status": "added",
            "additions": 50,
            "deletions": 0,
            "changes": 50,
            "blob_url": "https://github.com/nodejs/node/blob/e83126a8833ace98d13c2be507e40f8b1340952c/doc%2Fguides%2Fadding-new-napi-api.md",
            "raw_url": "https://github.com/nodejs/node/raw/e83126a8833ace98d13c2be507e40f8b1340952c/doc%2Fguides%2Fadding-new-napi-api.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fguides%2Fadding-new-napi-api.md?ref=e83126a8833ace98d13c2be507e40f8b1340952c",
            "patch": "@@ -0,0 +1,50 @@\n+# Contributing a new API to N-API\n+\n+N-API is Node.js's next generation ABI-stable API for native modules.\n+While improving the API surface is encouraged and welcomed, the following are\n+a set of principles and guidelines to keep in mind while adding a new\n+N-API API.\n+\n+* A new API **must** adhere to N-API API shape and spirit.\n+    * **Must** be a C API.\n+    * **Must** not throw exceptions.\n+    * **Must** return `napi_status`.\n+    * **Should** consume `napi_env`.\n+    * **Must** operate only on primitive data types, pointers to primitive\n+      datatypes or opaque handles.\n+    * **Must** be a necessary API and not a nice to have. Convenience APIs\n+      belong in node-addon-api.\n+    * **Must** not change the signature of an existing N-API API or break\n+      ABI compatibility with other versions of Node.js.\n+* New API **should** be agnostic towards the underlying JavaScript VM.\n+* New API PRs **must** have a corresponding documentation update.\n+* New API PRs **must** be tagged as **n-api**.\n+* There **must** be at least one test case showing how to use the API.\n+* There **should** be at least one test case per interesting use of the API.\n+* There **should** be a sample provided that operates in a realistic way\n+  (operating how a real addon would be written).\n+* A new API **should** be discussed at the N-API working group meeting.\n+* A new API addition **must** be signed off by at least two members of\n+  the N-API WG.\n+* A new API addition **should** be simultaneously implemented in at least\n+  one other VM implementation of Node.js.\n+* A new API **must** be considered experimental for at least one minor\n+  version release of Node.js before it can be considered for promotion out\n+  of experimental.\n+    * Experimental APIs **must** be documented as such.\n+    * Experimental APIs **must** require an explicit compile-time flag\n+      (`#define`) to be set to opt-in.\n+    * Experimental APIs **must** be considered for backport.\n+    * Experimental status exit criteria **must** involve at least the\n+      following:\n+        * A new PR **must** be opened in `nodejs/node` to remove experimental\n+          status. This PR **must** be tagged as **n-api** and **semver-minor**.\n+        * Exiting an API from experimental **must** be signed off by the\n+          working group.\n+        * If a backport is merited, an API **must** have a down-level\n+          implementation.\n+        * The API **should** be used by a published real-world module. Use of\n+          the API by a real-world published module will contribute favorably\n+          to the decision to take an API out of experimental status.\n+        * The API **must** be implemented in a Node.js implementation with an\n+          alternate VM."
        }
    ],
    "stats": {
        "total": 50,
        "additions": 50,
        "deletions": 0
    }
}