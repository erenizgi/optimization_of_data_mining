{
    "author": "Trott",
    "message": "tools,doc: fix version picker bug in html.js\n\nThe processing of strings like `8.x` into a major version number and a\nminor version number results in minor versions that are `NaN`. In that\nsituation, since the picker will link to the latest docs in the\nmajor version, include the version in the version picker.\n\nFixes: https://github.com/nodejs/node/issues/23979\nPR-URL: https://github.com/nodejs/node/pull/24638\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Franziska Hinkelmann <franziska.hinkelmann@gmail.com>",
    "sha": "6f64cda1ee578d121e328756ac7401f0ee8e1d62",
    "files": [
        {
            "sha": "703a7dcd21acb0698d40e521efb47bffcac309e3",
            "filename": "test/doctool/test-doctool-html.js",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/6f64cda1ee578d121e328756ac7401f0ee8e1d62/test%2Fdoctool%2Ftest-doctool-html.js",
            "raw_url": "https://github.com/nodejs/node/raw/6f64cda1ee578d121e328756ac7401f0ee8e1d62/test%2Fdoctool%2Ftest-doctool-html.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fdoctool%2Ftest-doctool-html.js?ref=6f64cda1ee578d121e328756ac7401f0ee8e1d62",
            "patch": "@@ -95,6 +95,10 @@ const testData = [\n     html: '<ol><li>fish</li><li>fish</li></ol>' +\n       '<ul><li>Red fish</li><li>Blue fish</li></ul>',\n   },\n+  {\n+    file: fixtures.path('altdocs.md'),\n+    html: '<li><a href=\"https://nodejs.org/docs/latest-v8.x/api/foo.html\">8.x',\n+  },\n ];\n \n const spaces = /\\s/g;\n@@ -117,7 +121,8 @@ testData.forEach(({ file, html }) => {\n         const actual = output.replace(spaces, '');\n         // Assert that the input stripped of all whitespace contains the\n         // expected markup.\n-        assert(actual.includes(expected));\n+        assert(actual.includes(expected),\n+               `ACTUAL: ${actual}\\nEXPECTED: ${expected}`);\n       })\n     );\n   }));"
        },
        {
            "sha": "f5320533ad699c92cf513276b1f64c92a384d82b",
            "filename": "test/fixtures/altdocs.md",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/6f64cda1ee578d121e328756ac7401f0ee8e1d62/test%2Ffixtures%2Faltdocs.md",
            "raw_url": "https://github.com/nodejs/node/raw/6f64cda1ee578d121e328756ac7401f0ee8e1d62/test%2Ffixtures%2Faltdocs.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Ffixtures%2Faltdocs.md?ref=6f64cda1ee578d121e328756ac7401f0ee8e1d62",
            "patch": "@@ -0,0 +1,2 @@\n+# ALTDOCS\n+<!--introduced_in=v8.4.0-->"
        },
        {
            "sha": "ce53bceaa24a15e2b23814cf66499b0b8ba6f8eb",
            "filename": "tools/doc/html.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/6f64cda1ee578d121e328756ac7401f0ee8e1d62/tools%2Fdoc%2Fhtml.js",
            "raw_url": "https://github.com/nodejs/node/raw/6f64cda1ee578d121e328756ac7401f0ee8e1d62/tools%2Fdoc%2Fhtml.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fhtml.js?ref=6f64cda1ee578d121e328756ac7401f0ee8e1d62",
            "patch": "@@ -427,6 +427,7 @@ function altDocs(filename, docCreated) {\n     const [versionMajor, versionMinor] = version.num.split('.').map(Number);\n     if (docCreatedMajor > versionMajor) return false;\n     if (docCreatedMajor < versionMajor) return true;\n+    if (Number.isNaN(versionMinor)) return true;\n     return docCreatedMinor <= versionMinor;\n   }\n "
        }
    ],
    "stats": {
        "total": 10,
        "additions": 9,
        "deletions": 1
    }
}