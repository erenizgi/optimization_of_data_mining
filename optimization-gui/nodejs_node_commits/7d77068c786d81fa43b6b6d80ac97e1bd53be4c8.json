{
    "author": "addaleax",
    "message": "src: move DeleteFnPtr into util.h\n\nThis is more generally useful than just in a crypto context.\n\nPR-URL: https://github.com/nodejs/node/pull/20885\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Michaël Zasso <targos@protonmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tobias Nießen <tniessen@tnie.de>",
    "sha": "7d77068c786d81fa43b6b6d80ac97e1bd53be4c8",
    "files": [
        {
            "sha": "06b76b42ff5cdf89d8a413a212eac1033e3cfcf6",
            "filename": "src/node_crypto.h",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/7d77068c786d81fa43b6b6d80ac97e1bd53be4c8/src%2Fnode_crypto.h",
            "raw_url": "https://github.com/nodejs/node/raw/7d77068c786d81fa43b6b6d80ac97e1bd53be4c8/src%2Fnode_crypto.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.h?ref=7d77068c786d81fa43b6b6d80ac97e1bd53be4c8",
            "patch": "@@ -75,15 +75,6 @@ struct MarkPopErrorOnReturn {\n   ~MarkPopErrorOnReturn() { ERR_pop_to_mark(); }\n };\n \n-template <typename T, void (*function)(T*)>\n-struct FunctionDeleter {\n-  void operator()(T* pointer) const { function(pointer); }\n-  typedef std::unique_ptr<T, FunctionDeleter> Pointer;\n-};\n-\n-template <typename T, void (*function)(T*)>\n-using DeleteFnPtr = typename FunctionDeleter<T, function>::Pointer;\n-\n // Define smart pointers for the most commonly used OpenSSL types:\n using X509Pointer = DeleteFnPtr<X509, X509_free>;\n using BIOPointer = DeleteFnPtr<BIO, BIO_free_all>;"
        },
        {
            "sha": "26654f15a1a6269cc35ccb2a9a3c47a1bc525d6c",
            "filename": "src/util.h",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/7d77068c786d81fa43b6b6d80ac97e1bd53be4c8/src%2Futil.h",
            "raw_url": "https://github.com/nodejs/node/raw/7d77068c786d81fa43b6b6d80ac97e1bd53be4c8/src%2Futil.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Futil.h?ref=7d77068c786d81fa43b6b6d80ac97e1bd53be4c8",
            "patch": "@@ -456,6 +456,15 @@ struct is_callable<T, typename std::enable_if<\n     std::is_same<decltype(void(&T::operator())), void>::value\n     >::type> : std::true_type { };\n \n+template <typename T, void (*function)(T*)>\n+struct FunctionDeleter {\n+  void operator()(T* pointer) const { function(pointer); }\n+  typedef std::unique_ptr<T, FunctionDeleter> Pointer;\n+};\n+\n+template <typename T, void (*function)(T*)>\n+using DeleteFnPtr = typename FunctionDeleter<T, function>::Pointer;\n+\n }  // namespace node\n \n #endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 9,
        "deletions": 9
    }
}