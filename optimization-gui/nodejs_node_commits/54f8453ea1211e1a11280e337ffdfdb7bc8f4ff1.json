{
    "author": "cjihrig",
    "message": "dns: simplify dns.promises warning logic\n\ndns.promises is lazy loaded. Instead of using a seaparate\nBoolean flag to track whether or not it has been loaded, just\ninspect the state of the lazy loaded module itself.\n\nPR-URL: https://github.com/nodejs/node/pull/24788\nReviewed-By: Anto Aravinth <anto.aravinth.cse@gmail.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Masashi Hirano <shisama07@gmail.com>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>",
    "sha": "54f8453ea1211e1a11280e337ffdfdb7bc8f4ff1",
    "files": [
        {
            "sha": "f68409f2ee67433a1a1d1b2a056266247f976875",
            "filename": "lib/dns.js",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/54f8453ea1211e1a11280e337ffdfdb7bc8f4ff1/lib%2Fdns.js",
            "raw_url": "https://github.com/nodejs/node/raw/54f8453ea1211e1a11280e337ffdfdb7bc8f4ff1/lib%2Fdns.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fdns.js?ref=54f8453ea1211e1a11280e337ffdfdb7bc8f4ff1",
            "patch": "@@ -50,8 +50,7 @@ const {\n \n const dnsException = errors.dnsException;\n \n-let promisesWarn = true;\n-let promises; // Lazy loaded\n+let promises = null; // Lazy loaded\n \n function onlookup(err, addresses) {\n   if (err) {\n@@ -269,7 +268,7 @@ function defaultResolverSetServers(servers) {\n   setDefaultResolver(resolver);\n   bindDefaultResolver(module.exports, Resolver.prototype);\n \n-  if (promises !== undefined)\n+  if (promises !== null)\n     bindDefaultResolver(promises, promises.Resolver.prototype);\n }\n \n@@ -318,10 +317,9 @@ Object.defineProperties(module.exports, {\n     configurable: true,\n     enumerable: false,\n     get() {\n-      if (promisesWarn) {\n+      if (promises === null) {\n         promises = require('internal/dns/promises');\n         promises.setServers = defaultResolverSetServers;\n-        promisesWarn = false;\n         process.emitWarning('The dns.promises API is experimental',\n                             'ExperimentalWarning');\n       }"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 3,
        "deletions": 5
    }
}