{
    "author": "sam-github",
    "message": "test: use common.mustCall(), and log the events\n\nPR-URL: https://github.com/nodejs/node/pull/25508\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "b52a8f3507a6df179d0cf2144c88173607926241",
    "files": [
        {
            "sha": "ad0fcf325d69a3c6d23fd6023b36916581a739cf",
            "filename": "test/parallel/test-tls-set-encoding.js",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/b52a8f3507a6df179d0cf2144c88173607926241/test%2Fparallel%2Ftest-tls-set-encoding.js",
            "raw_url": "https://github.com/nodejs/node/raw/b52a8f3507a6df179d0cf2144c88173607926241/test%2Fparallel%2Ftest-tls-set-encoding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-set-encoding.js?ref=b52a8f3507a6df179d0cf2144c88173607926241",
            "patch": "@@ -40,6 +40,7 @@ const messageUtf8 = 'xâˆšab c';\n const messageAscii = 'xb\\b\\u001aab c';\n \n const server = tls.Server(options, common.mustCall(function(socket) {\n+  console.log('server: on secureConnection', socket.getProtocol());\n   socket.end(messageUtf8);\n }));\n \n@@ -55,12 +56,18 @@ server.listen(0, function() {\n   client.setEncoding('ascii');\n \n   client.on('data', function(d) {\n+    console.log('client: on data', d);\n     assert.ok(typeof d === 'string');\n     buffer += d;\n   });\n \n+  client.on('secureConnect', common.mustCall(() => {\n+    console.log('client: on secureConnect');\n+  }));\n+\n+  client.on('close', common.mustCall(function() {\n+    console.log('client: on close');\n \n-  client.on('close', function() {\n     // readyState is deprecated but we want to make\n     // sure this isn't triggering an assert in lib/net.js\n     // See https://github.com/nodejs/node-v0.x-archive/issues/1069.\n@@ -75,5 +82,5 @@ server.listen(0, function() {\n     assert.strictEqual(messageAscii, buffer);\n \n     server.close();\n-  });\n+  }));\n });"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 9,
        "deletions": 2
    }
}