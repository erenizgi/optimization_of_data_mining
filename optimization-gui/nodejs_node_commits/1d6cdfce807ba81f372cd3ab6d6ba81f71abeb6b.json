{
    "author": "BridgeAR",
    "message": "doc: improve assert documentation\n\nThis adds a example to `assert.throws` to document checking against\nerror instances. It also makes it clearer what some arguments can\nreceive as input.\n\nPR-URL: https://github.com/nodejs/node/pull/19885\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "1d6cdfce807ba81f372cd3ab6d6ba81f71abeb6b",
    "files": [
        {
            "sha": "6d96359d0056975d90469aa485654d079ab9bc59",
            "filename": "doc/api/assert.md",
            "status": "modified",
            "additions": 32,
            "deletions": 11,
            "changes": 43,
            "blob_url": "https://github.com/nodejs/node/blob/1d6cdfce807ba81f372cd3ab6d6ba81f71abeb6b/doc%2Fapi%2Fassert.md",
            "raw_url": "https://github.com/nodejs/node/raw/1d6cdfce807ba81f372cd3ab6d6ba81f71abeb6b/doc%2Fapi%2Fassert.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/doc%2Fapi%2Fassert.md?ref=1d6cdfce807ba81f372cd3ab6d6ba81f71abeb6b",
            "patch": "@@ -395,6 +395,9 @@ is little benefit by catching a rejection and then rejecting it again. Instead,\n consider adding a comment next to the specific code path that should not reject\n and keep error messages as expressive as possible.\n \n+If specified, `error` can be a [`Class`][], [`RegExp`][] or a validation\n+function. See [`assert.throws()`][] for more details.\n+\n Besides the async nature to await the completion behaves identically to\n [`assert.doesNotThrow()`][].\n \n@@ -431,8 +434,7 @@ changes:\n * `error` {RegExp|Function}\n * `message` {any}\n \n-Asserts that the function `block` does not throw an error. See\n-[`assert.throws()`][] for more details.\n+Asserts that the function `block` does not throw an error.\n \n Please note: Using `assert.doesNotThrow()` is actually not useful because there\n is no benefit by catching an error and then rethrowing it. Instead, consider\n@@ -447,6 +449,9 @@ parameter, then an `AssertionError` is thrown. If the error is of a different\n type, or if the `error` parameter is undefined, the error is propagated back\n to the caller.\n \n+If specified, `error` can be a [`Class`][], [`RegExp`][] or a validation\n+function. See [`assert.throws()`][] for more details.\n+\n The following, for instance, will throw the [`TypeError`][] because there is no\n matching error type in the assertion:\n \n@@ -483,7 +488,7 @@ assert.doesNotThrow(\n   () => {\n     throw new TypeError('Wrong value');\n   },\n-  TypeError,\n+  /Wrong value/,\n   'Whoops'\n );\n // Throws: AssertionError: Got unwanted exception (TypeError). Whoops\n@@ -916,7 +921,7 @@ assert(0);\n added: REPLACEME\n -->\n * `block` {Function|Promise}\n-* `error` {RegExp|Function|Object}\n+* `error` {RegExp|Function|Object|Error}\n * `message` {any}\n \n Awaits the `block` promise or, if `block` is a function, immediately calls the\n@@ -930,8 +935,10 @@ checking the error handler.\n Besides the async nature to await the completion behaves identically to\n [`assert.throws()`][].\n \n-If specified, `error` can be a constructor, [`RegExp`][], a validation\n-function, or an object where each property will be tested for.\n+If specified, `error` can be a [`Class`][], [`RegExp`][], a validation function,\n+an object where each property will be tested for, or an instance of error where\n+each property will be tested for including the non-enumerable `message` and\n+`name` properties.\n \n If specified, `message` will be the message provided by the `AssertionError` if\n the block fails to reject.\n@@ -1011,13 +1018,15 @@ changes:\n     description: The `error` parameter can now be an arrow function.\n -->\n * `block` {Function}\n-* `error` {RegExp|Function|Object}\n+* `error` {RegExp|Function|Object|Error}\n * `message` {any}\n \n Expects the function `block` to throw an error.\n \n-If specified, `error` can be a constructor, [`RegExp`][], a validation\n-function, or an object where each property will be tested for.\n+If specified, `error` can be a [`Class`][], [`RegExp`][], a validation function,\n+an object where each property will be tested for, or an instance of error where\n+each property will be tested for including the non-enumerable `message` and\n+`name` properties.\n \n If specified, `message` will be the message provided by the `AssertionError` if\n the block fails to throw.\n@@ -1066,10 +1075,11 @@ assert.throws(\n Custom error object / error instance:\n \n ```js\n+const err = new TypeError('Wrong value');\n+err.code = 404;\n+\n assert.throws(\n   () => {\n-    const err = new TypeError('Wrong value');\n-    err.code = 404;\n     throw err;\n   },\n   {\n@@ -1078,6 +1088,16 @@ assert.throws(\n     // Note that only properties on the error object will be tested!\n   }\n );\n+\n+// Fails due to the different `message` and `name` properties:\n+assert.throws(\n+  () => {\n+    const otherErr = new Error('Not found');\n+    otherErr.code = 404;\n+    throw otherErr;\n+  },\n+  err // This tests for `message`, `name` and `code`.\n+);\n ```\n \n Note that `error` cannot be a string. If a string is provided as the second\n@@ -1118,6 +1138,7 @@ assert.throws(throwingFirst, /Second$/);\n Due to the confusing notation, it is recommended not to use a string as the\n second argument. This might lead to difficult-to-spot errors.\n \n+[`Class`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes\n [`Error.captureStackTrace`]: errors.html#errors_error_capturestacktrace_targetobject_constructoropt\n [`Error`]: errors.html#errors_class_error\n [`Map`]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"
        }
    ],
    "stats": {
        "total": 43,
        "additions": 32,
        "deletions": 11
    }
}