{
    "author": "maclover7",
    "message": "src: make Environment::is_stopping_worker inline\n\nFixes a TODO comment.\n\nPR-URL: https://github.com/nodejs/node/pull/21720\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5",
    "files": [
        {
            "sha": "b47af181115d4de95a372ef11d8b8f294d2e7112",
            "filename": "src/env-inl.h",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5/src%2Fenv-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5/src%2Fenv-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv-inl.h?ref=fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5",
            "patch": "@@ -33,6 +33,7 @@\n #include \"node_perf_common.h\"\n #include \"node_context_data.h\"\n #include \"tracing/agent.h\"\n+#include \"node_worker.h\"\n \n #include <stddef.h>\n #include <stdint.h>\n@@ -623,6 +624,11 @@ inline void Environment::remove_sub_worker_context(worker::Worker* context) {\n   sub_worker_contexts_.erase(context);\n }\n \n+inline bool Environment::is_stopping_worker() const {\n+  CHECK(!is_main_thread());\n+  return worker_context_->is_stopped();\n+}\n+\n inline performance::performance_state* Environment::performance_state() {\n   return performance_state_.get();\n }"
        },
        {
            "sha": "4d7008df36d41bd3cf0329b7fa2f93418f2ec9a7",
            "filename": "src/env.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5/src%2Fenv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5/src%2Fenv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.cc?ref=fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5",
            "patch": "@@ -734,9 +734,4 @@ void Environment::stop_sub_worker_contexts() {\n   }\n }\n \n-bool Environment::is_stopping_worker() const {\n-  CHECK(!is_main_thread());\n-  return worker_context_->is_stopped();\n-}\n-\n }  // namespace node"
        },
        {
            "sha": "f6725e8e53d6b91697e2b041e688aa2ff7dc8358",
            "filename": "src/env.h",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5/src%2Fenv.h",
            "raw_url": "https://github.com/nodejs/node/raw/fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5/src%2Fenv.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.h?ref=fcfd3e1bac0c3c62360829aeac4c63a62a2f02f5",
            "patch": "@@ -723,9 +723,6 @@ class Environment {\n   inline bool can_call_into_js() const;\n   inline void set_can_call_into_js(bool can_call_into_js);\n \n-  // TODO(addaleax): This should be inline.\n-  bool is_stopping_worker() const;\n-\n   inline bool is_main_thread() const;\n   inline uint64_t thread_id() const;\n   inline void set_thread_id(uint64_t id);\n@@ -734,6 +731,7 @@ class Environment {\n   inline void add_sub_worker_context(worker::Worker* context);\n   inline void remove_sub_worker_context(worker::Worker* context);\n   void stop_sub_worker_contexts();\n+  inline bool is_stopping_worker() const;\n \n   inline void ThrowError(const char* errmsg);\n   inline void ThrowTypeError(const char* errmsg);"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 7,
        "deletions": 8
    }
}