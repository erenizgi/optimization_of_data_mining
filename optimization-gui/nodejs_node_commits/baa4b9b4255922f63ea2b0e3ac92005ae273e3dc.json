{
    "author": "BridgeAR",
    "message": "test: refactor `common.expectWarning()`\n\nThe current API is somewhat confusing at times and simpler usage is\npossible. This overloads the arguments further to accept objects\nwith deprecation codes as property keys. It also adds documentation\nfor the different possible styles.\n\nBesides that it is now going to validate for the code being present\nin case of deprecations but not for other cases. The former validation\nwas not consistent as it only validated some cases and accepted\nundefined instead of `common.noWarnCode`. This check is removed due to\nthe lack of consistency. `common.noWarnCode` is completely removed\ndue to just being sugar for `undefined`.\n\nThis also verifies that the warning order is identical to the order\nin which they are triggered.\n\nPR-URL: https://github.com/nodejs/node/pull/25251\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
    "files": [
        {
            "sha": "0542c38bbcb4195a1fa30a397b6c374bb77c21e2",
            "filename": "test/common/README.md",
            "status": "modified",
            "additions": 43,
            "deletions": 9,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fcommon%2FREADME.md",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fcommon%2FREADME.md",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2FREADME.md?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -109,14 +109,51 @@ Indicates if there is more than 1gb of total memory.\n   returned function has not been called exactly `exact` number of times when the\n   test is complete, then the test will fail.\n \n-### expectWarning(name, expected, code)\n-* `name` [&lt;string>]\n-* `expected` [&lt;string>] | [&lt;Array>]\n+### expectWarning(name[, expected[, code]])\n+* `name` [&lt;string>] | [&lt;Object>]\n+* `expected` [&lt;string>] | [&lt;Array>] | [&lt;Object>]\n * `code` [&lt;string>]\n \n-Tests whether `name`, `expected`, and `code` are part of a raised warning. If\n-an expected warning does not have a code then `common.noWarnCode` can be used\n-to indicate this.\n+Tests whether `name`, `expected`, and `code` are part of a raised warning.\n+\n+The code is required in case the name is set to `'DeprecationWarning'`.\n+\n+Examples:\n+\n+```js\n+const { expectWarning } = require('../common');\n+\n+expectWarning('Warning', 'Foobar is really bad');\n+\n+expectWarning('DeprecationWarning', 'Foobar is deprecated', 'DEP0XXX');\n+\n+expectWarning('DeprecationWarning', [\n+  'Foobar is deprecated', 'DEP0XXX'\n+]);\n+\n+expectWarning('DeprecationWarning', [\n+  ['Foobar is deprecated', 'DEP0XXX'],\n+  ['Baz is also deprecated', 'DEP0XX2']\n+]);\n+\n+expectWarning('DeprecationWarning', {\n+  DEP0XXX: 'Foobar is deprecated',\n+  DEP0XX2: 'Baz is also deprecated'\n+});\n+\n+expectWarning({\n+  DeprecationWarning: {\n+    DEP0XXX: 'Foobar is deprecated',\n+    DEP0XX1: 'Baz is also deprecated'\n+  },\n+  Warning: [\n+    ['Multiple array entries are fine', 'SpecialWarningCode'],\n+    ['No code is also fine']\n+  ],\n+  SingleEntry: ['This will also work', 'WarningCode'],\n+  SingleString: 'Single string entries without code will also work'\n+});\n+```\n \n ### getArrayBufferViews(buf)\n * `buf` [&lt;Buffer>]\n@@ -262,9 +299,6 @@ Returns `true` if the exit code `exitCode` and/or signal name `signal` represent\n the exit code and/or signal name of a node process that aborted, `false`\n otherwise.\n \n-### noWarnCode\n-See `common.expectWarning()` for usage.\n-\n ### opensslCli\n * [&lt;boolean>]\n "
        },
        {
            "sha": "ea59009ba565b2986ac1b3c34cc3bd5570a4acfd",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 27,
            "deletions": 39,
            "changes": 66,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -497,54 +497,43 @@ function isAlive(pid) {\n   }\n }\n \n-function _expectWarning(name, expected) {\n-  const map = new Map(expected);\n+function _expectWarning(name, expected, code) {\n+  if (typeof expected === 'string') {\n+    expected = [[expected, code]];\n+  } else if (!Array.isArray(expected)) {\n+    expected = Object.entries(expected).map(([a, b]) => [b, a]);\n+  } else if (!(Array.isArray(expected[0]))) {\n+    expected = [[expected[0], expected[1]]];\n+  }\n+  // Deprecation codes are mandatory, everything else is not.\n+  if (name === 'DeprecationWarning') {\n+    expected.forEach(([_, code]) => assert(code, expected));\n+  }\n   return mustCall((warning) => {\n+    const [ message, code ] = expected.shift();\n     assert.strictEqual(warning.name, name);\n-    assert.ok(map.has(warning.message),\n-              `unexpected error message: \"${warning.message}\"`);\n-    const code = map.get(warning.message);\n+    assert.strictEqual(warning.message, message);\n     assert.strictEqual(warning.code, code);\n-    // Remove a warning message after it is seen so that we guarantee that we\n-    // get each message only once.\n-    map.delete(expected);\n   }, expected.length);\n }\n \n-function expectWarningByName(name, expected, code) {\n-  if (typeof expected === 'string') {\n-    expected = [[expected, code]];\n-  }\n-  process.on('warning', _expectWarning(name, expected));\n-}\n+let catchWarning;\n \n-function expectWarningByMap(warningMap) {\n-  const catchWarning = {};\n-  Object.keys(warningMap).forEach((name) => {\n-    let expected = warningMap[name];\n-    if (!Array.isArray(expected)) {\n-      throw new Error('warningMap entries must be arrays consisting of two ' +\n-      'entries: [message, warningCode]');\n-    }\n-    if (!(Array.isArray(expected[0]))) {\n-      if (expected.length === 0) {\n-        return;\n-      }\n-      expected = [[expected[0], expected[1]]];\n-    }\n-    catchWarning[name] = _expectWarning(name, expected);\n-  });\n-  process.on('warning', (warning) => catchWarning[warning.name](warning));\n-}\n-\n-// Accepts a warning name and description or array of descriptions or a map\n-// of warning names to description(s)\n-// ensures a warning is generated for each name/description pair\n+// Accepts a warning name and description or array of descriptions or a map of\n+// warning names to description(s) ensures a warning is generated for each\n+// name/description pair.\n+// The expected messages have to be unique per `expectWarning()` call.\n function expectWarning(nameOrMap, expected, code) {\n+  if (catchWarning === undefined) {\n+    catchWarning = {};\n+    process.on('warning', (warning) => catchWarning[warning.name](warning));\n+  }\n   if (typeof nameOrMap === 'string') {\n-    expectWarningByName(nameOrMap, expected, code);\n+    catchWarning[nameOrMap] = _expectWarning(nameOrMap, expected, code);\n   } else {\n-    expectWarningByMap(nameOrMap);\n+    Object.keys(nameOrMap).forEach((name) => {\n+      catchWarning[name] = _expectWarning(name, nameOrMap[name]);\n+    });\n   }\n }\n \n@@ -758,7 +747,6 @@ module.exports = {\n   mustCallAtLeast,\n   mustNotCall,\n   nodeProcessAborted,\n-  noWarnCode: undefined,\n   PIPE,\n   platformTimeout,\n   printSkipMessage,"
        },
        {
            "sha": "de9119f37e2f3dc4a540fb2e328696d0395ae782",
            "filename": "test/common/index.mjs",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fcommon%2Findex.mjs",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fcommon%2Findex.mjs",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.mjs?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -37,7 +37,6 @@ const {\n   nodeProcessAborted,\n   busyLoop,\n   isAlive,\n-  noWarnCode,\n   expectWarning,\n   expectsError,\n   skipIfInspectorDisabled,\n@@ -84,7 +83,6 @@ export {\n   nodeProcessAborted,\n   busyLoop,\n   isAlive,\n-  noWarnCode,\n   expectWarning,\n   expectsError,\n   skipIfInspectorDisabled,"
        },
        {
            "sha": "16dd1bb0c7dac11388f5e0a1a5c29c1600c9e132",
            "filename": "test/parallel/test-atomics-notify.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-atomics-notify.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-atomics-notify.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-atomics-notify.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -1,6 +1,6 @@\n 'use strict';\n \n-const { expectWarning, noWarnCode } = require('../common');\n+const { expectWarning } = require('../common');\n \n const assert = require('assert');\n const { runInNewContext } = require('vm');\n@@ -14,6 +14,6 @@ assert.strictEqual(runInNewContext('typeof Atomics.notify'), 'function');\n expectWarning(\n   'Atomics',\n   'Atomics.wake will be removed in a future version, ' +\n-  'use Atomics.notify instead.', noWarnCode);\n+  'use Atomics.notify instead.');\n \n Atomics.wake(new Int32Array(new SharedArrayBuffer(4)), 0, 0);"
        },
        {
            "sha": "e94b6020652463661ea19b84c08db92e6d34a1f0",
            "filename": "test/parallel/test-console.js",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-console.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-console.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-console.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -42,14 +42,14 @@ if (common.isMainThread) {\n common.expectWarning(\n   'Warning',\n   [\n-    ['Count for \\'noLabel\\' does not exist', common.noWarnCode],\n-    ['No such label \\'noLabel\\' for console.timeLog()', common.noWarnCode],\n-    ['No such label \\'noLabel\\' for console.timeEnd()', common.noWarnCode],\n-    ['Count for \\'default\\' does not exist', common.noWarnCode],\n-    ['No such label \\'default\\' for console.timeLog()', common.noWarnCode],\n-    ['No such label \\'default\\' for console.timeEnd()', common.noWarnCode],\n-    ['Label \\'default\\' already exists for console.time()', common.noWarnCode],\n-    ['Label \\'test\\' already exists for console.time()', common.noWarnCode]\n+    ['Count for \\'noLabel\\' does not exist'],\n+    ['No such label \\'noLabel\\' for console.timeLog()'],\n+    ['No such label \\'noLabel\\' for console.timeEnd()'],\n+    ['Count for \\'default\\' does not exist'],\n+    ['No such label \\'default\\' for console.timeLog()'],\n+    ['No such label \\'default\\' for console.timeEnd()'],\n+    ['Label \\'default\\' already exists for console.time()'],\n+    ['Label \\'test\\' already exists for console.time()']\n   ]\n );\n "
        },
        {
            "sha": "414404511f9064355f51749d23cc7309d39ab4ab",
            "filename": "test/parallel/test-crypto-authenticated.js",
            "status": "modified",
            "additions": 19,
            "deletions": 19,
            "changes": 38,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-crypto-authenticated.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-crypto-authenticated.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-crypto-authenticated.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -50,25 +50,25 @@ const ciphers = crypto.getCiphers();\n \n const expectedWarnings = common.hasFipsCrypto ?\n   [] : [\n-    ['Use Cipheriv for counter mode of aes-192-gcm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-192-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-192-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-128-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-128-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-128-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode],\n-    ['Use Cipheriv for counter mode of aes-256-ccm', common.noWarnCode]\n+    ['Use Cipheriv for counter mode of aes-192-gcm'],\n+    ['Use Cipheriv for counter mode of aes-192-ccm'],\n+    ['Use Cipheriv for counter mode of aes-192-ccm'],\n+    ['Use Cipheriv for counter mode of aes-128-ccm'],\n+    ['Use Cipheriv for counter mode of aes-128-ccm'],\n+    ['Use Cipheriv for counter mode of aes-128-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm'],\n+    ['Use Cipheriv for counter mode of aes-256-ccm']\n   ];\n \n const expectedDeprecationWarnings = ["
        },
        {
            "sha": "dfa01e2422c23b2b417164ccd0da7d1ef52ac098",
            "filename": "test/parallel/test-crypto-cipher-decipher.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-crypto-cipher-decipher.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-crypto-cipher-decipher.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-crypto-cipher-decipher.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -12,7 +12,7 @@ const assert = require('assert');\n \n common.expectWarning({\n   Warning: [\n-    ['Use Cipheriv for counter mode of aes-256-gcm', common.noWarnCode]\n+    ['Use Cipheriv for counter mode of aes-256-gcm']\n   ],\n   DeprecationWarning: [\n     ['crypto.createCipher is deprecated.', 'DEP0106']"
        },
        {
            "sha": "951e7e17a98b825d0dd5167c0a02579269446897",
            "filename": "test/parallel/test-dns-lookup.js",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-dns-lookup.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-dns-lookup.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-dns-lookup.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -21,21 +21,19 @@ cares.getaddrinfo = () => internalBinding('uv').UV_ENOENT;\n   common.expectsError(() => dnsPromises.lookup(1, {}), err);\n }\n \n+// This also verifies different expectWarning notations.\n common.expectWarning({\n   // For 'internal/test/binding' module.\n   'internal/test/binding': [\n     'These APIs are for internal testing only. Do not use them.'\n   ],\n   // For dns.promises.\n-  'ExperimentalWarning': [\n-    'The dns.promises API is experimental'\n-  ],\n+  'ExperimentalWarning': 'The dns.promises API is experimental',\n   // For calling `dns.lookup` with falsy `hostname`.\n-  'DeprecationWarning': [\n-    'The provided hostname \"false\" is not a valid ' +\n-    'hostname, and is supported in the dns module solely for compatibility.',\n-    'DEP0118',\n-  ],\n+  'DeprecationWarning': {\n+    DEP0118: 'The provided hostname \"false\" is not a valid ' +\n+      'hostname, and is supported in the dns module solely for compatibility.'\n+  }\n });\n \n common.expectsError(() => {"
        },
        {
            "sha": "30f42a60f044b3fd623ea924b12314bfaf3a0bd1",
            "filename": "test/parallel/test-fs-filehandle.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-fs-filehandle.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-fs-filehandle.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-filehandle.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -21,12 +21,10 @@ let fdnum;\n \n common.expectWarning({\n   'internal/test/binding': [\n-    'These APIs are for internal testing only. Do not use them.',\n-    common.noWarnCode\n+    'These APIs are for internal testing only. Do not use them.'\n   ],\n   'Warning': [\n-    `Closing file descriptor ${fdnum} on garbage collection`,\n-    common.noWarnCode\n+    `Closing file descriptor ${fdnum} on garbage collection`\n   ]\n });\n "
        },
        {
            "sha": "a7f4b80716c917b48589c5201cc316bac7659f0e",
            "filename": "test/parallel/test-https-strict.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-https-strict.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-https-strict.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-https-strict.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -32,8 +32,7 @@ common.expectWarning(\n   'Warning',\n   'Setting the NODE_TLS_REJECT_UNAUTHORIZED environment variable to \\'0\\' ' +\n   'makes TLS connections and HTTPS requests insecure by disabling ' +\n-  'certificate verification.',\n-  common.noWarnCode\n+  'certificate verification.'\n );\n \n const assert = require('assert');"
        },
        {
            "sha": "ee7e731935dc9d3541edc72071e424814ad06855",
            "filename": "test/parallel/test-process-emit-warning-from-native.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-process-emit-warning-from-native.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-process-emit-warning-from-native.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-emit-warning-from-native.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -16,7 +16,7 @@ const key = '0123456789';\n       ['crypto.createCipher is deprecated.', 'DEP0106']\n     ],\n     Warning: [\n-      ['Use Cipheriv for counter mode of aes-256-gcm', common.noWarnCode]\n+      ['Use Cipheriv for counter mode of aes-256-gcm']\n     ]\n   });\n "
        },
        {
            "sha": "b3cf5719cb9ab015a6be05200c3e519931b7b1d0",
            "filename": "test/parallel/test-promises-unhandled-proxy-rejections.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-promises-unhandled-proxy-rejections.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-promises-unhandled-proxy-rejections.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-promises-unhandled-proxy-rejections.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -12,7 +12,7 @@ const expectedPromiseWarning = ['Unhandled promise rejection. ' +\n   'This error originated either by throwing ' +\n   'inside of an async function without a catch ' +\n   'block, or by rejecting a promise which was ' +\n-  'not handled with .catch(). (rejection id: 1)', common.noWarnCode];\n+  'not handled with .catch(). (rejection id: 1)'];\n \n function throwErr() {\n   throw new Error('Error from proxy');"
        },
        {
            "sha": "d777a13e62e984588aa6b3a7afba71572e1e1513",
            "filename": "test/parallel/test-promises-unhandled-symbol-rejections.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-promises-unhandled-symbol-rejections.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-promises-unhandled-symbol-rejections.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-promises-unhandled-symbol-rejections.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -3,7 +3,7 @@ const common = require('../common');\n \n common.disableCrashOnUnhandledRejection();\n \n-const expectedValueWarning = ['Symbol()', common.noWarnCode];\n+const expectedValueWarning = ['Symbol()'];\n const expectedDeprecationWarning = ['Unhandled promise rejections are ' +\n                                    'deprecated. In the future, promise ' +\n                                    'rejections that are not handled will ' +\n@@ -13,13 +13,13 @@ const expectedPromiseWarning = ['Unhandled promise rejection. ' +\n   'This error originated either by throwing ' +\n   'inside of an async function without a catch ' +\n   'block, or by rejecting a promise which was ' +\n-  'not handled with .catch(). (rejection id: 1)', common.noWarnCode];\n+  'not handled with .catch(). (rejection id: 1)'];\n \n common.expectWarning({\n   DeprecationWarning: expectedDeprecationWarning,\n   UnhandledPromiseRejectionWarning: [\n-    expectedPromiseWarning,\n-    expectedValueWarning\n+    expectedValueWarning,\n+    expectedPromiseWarning\n   ],\n });\n "
        },
        {
            "sha": "868686335077a5fff318aed3ddf492480e4e468d",
            "filename": "test/parallel/test-tls-dhe.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-tls-dhe.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-tls-dhe.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-tls-dhe.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -41,8 +41,7 @@ const ciphers = 'DHE-RSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256';\n \n // Test will emit a warning because the DH parameter size is < 2048 bits\n common.expectWarning('SecurityWarning',\n-                     'DH parameter is less than 2048 bits',\n-                     common.noWarnCode);\n+                     'DH parameter is less than 2048 bits');\n \n function loadDHParam(n) {\n   const params = [`dh${n}.pem`];"
        },
        {
            "sha": "346f943b9c36c5762e382aae5132aa6717ecc860",
            "filename": "test/parallel/test-trace-events-api.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-trace-events-api.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-trace-events-api.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-api.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -99,8 +99,7 @@ if (isChild) {\n     common.expectWarning(\n       'Warning',\n       'Possible trace_events memory leak detected. There are more than ' +\n-      '10 enabled Tracing objects.',\n-      common.noWarnCode);\n+      '10 enabled Tracing objects.');\n     for (let n = 0; n < 10; n++) {\n       const tracing = createTracing({ categories: [ `a${n}` ] });\n       tracing.enable();"
        },
        {
            "sha": "36b0db78d826873c4b57c642e8ddee45aa381f57",
            "filename": "test/parallel/test-warn-sigprof.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-warn-sigprof.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-warn-sigprof.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-warn-sigprof.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -13,7 +13,6 @@ if (common.isWindows)\n common.skipIfWorker(); // Worker inspector never has a server running\n \n common.expectWarning('Warning',\n-                     'process.on(SIGPROF) is reserved while debugging',\n-                     common.noWarnCode);\n+                     'process.on(SIGPROF) is reserved while debugging');\n \n process.on('SIGPROF', () => {});"
        },
        {
            "sha": "638591023fb3b1af9497d15153fabc44a8dd86b2",
            "filename": "test/parallel/test-worker-message-port-transfer-target.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-worker-message-port-transfer-target.js",
            "raw_url": "https://github.com/nodejs/node/raw/baa4b9b4255922f63ea2b0e3ac92005ae273e3dc/test%2Fparallel%2Ftest-worker-message-port-transfer-target.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-worker-message-port-transfer-target.js?ref=baa4b9b4255922f63ea2b0e3ac92005ae273e3dc",
            "patch": "@@ -10,8 +10,7 @@ const arrayBuf = new ArrayBuffer(10);\n \n common.expectWarning('Warning',\n                      'The target port was posted to itself, and the ' +\n-                     'communication channel was lost',\n-                     common.noWarnCode);\n+                     'communication channel was lost');\n port2.onmessage = common.mustNotCall();\n port2.postMessage(null, [port1, arrayBuf]);\n "
        }
    ],
    "stats": {
        "total": 227,
        "additions": 119,
        "deletions": 108
    }
}