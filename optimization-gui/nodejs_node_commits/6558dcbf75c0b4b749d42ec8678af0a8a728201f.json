{
    "author": "unknown",
    "message": "test: add test for fs.promises.lchmod\n\nTo increase test coverage for fs.promises by adding a test for\nlchmod.\n\nPR-URL: https://github.com/nodejs/node/pull/20584\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>",
    "sha": "6558dcbf75c0b4b749d42ec8678af0a8a728201f",
    "files": [
        {
            "sha": "d2e82243458ffeaf23c1255476c3d4819ae9a78c",
            "filename": "test/parallel/test-fs-promises.js",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/6558dcbf75c0b4b749d42ec8678af0a8a728201f/test%2Fparallel%2Ftest-fs-promises.js",
            "raw_url": "https://github.com/nodejs/node/raw/6558dcbf75c0b4b749d42ec8678af0a8a728201f/test%2Fparallel%2Ftest-fs-promises.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-promises.js?ref=6558dcbf75c0b4b749d42ec8678af0a8a728201f",
            "patch": "@@ -12,6 +12,7 @@ const {\n   chmod,\n   copyFile,\n   link,\n+  lchmod,\n   lstat,\n   mkdir,\n   mkdtemp,\n@@ -129,14 +130,21 @@ function verifyStatObject(stat) {\n     if (common.canCreateSymLink()) {\n       const newLink = path.resolve(tmpDir, 'baz3.js');\n       await symlink(newPath, newLink);\n-\n       stats = await lstat(newLink);\n       verifyStatObject(stats);\n \n       assert.strictEqual(newPath.toLowerCase(),\n                          (await realpath(newLink)).toLowerCase());\n       assert.strictEqual(newPath.toLowerCase(),\n                          (await readlink(newLink)).toLowerCase());\n+      if (common.isOSX) {\n+        // lchmod is only available on macOS\n+        const newMode = 0o666;\n+        await lchmod(newLink, newMode);\n+        stats = await lstat(newLink);\n+        assert.strictEqual(stats.mode & 0o777, newMode);\n+      }\n+\n \n       await unlink(newLink);\n     }"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 9,
        "deletions": 1
    }
}