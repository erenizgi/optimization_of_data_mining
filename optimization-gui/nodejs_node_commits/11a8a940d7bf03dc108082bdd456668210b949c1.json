{
    "author": "cjihrig",
    "message": "report: simplify OnFatalError() handling\n\nPR-URL: https://github.com/nodejs/node/pull/26191\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "11a8a940d7bf03dc108082bdd456668210b949c1",
    "files": [
        {
            "sha": "a17012b5b373fedb2faeada49af144821210f6c6",
            "filename": "src/node_errors.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 8,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/11a8a940d7bf03dc108082bdd456668210b949c1/src%2Fnode_errors.cc",
            "raw_url": "https://github.com/nodejs/node/raw/11a8a940d7bf03dc108082bdd456668210b949c1/src%2Fnode_errors.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_errors.cc?ref=11a8a940d7bf03dc108082bdd456668210b949c1",
            "patch": "@@ -316,15 +316,9 @@ void OnFatalError(const char* location, const char* message) {\n   Isolate* isolate = Isolate::GetCurrent();\n   HandleScope handle_scope(isolate);\n   Environment* env = Environment::GetCurrent(isolate);\n-  if (env != nullptr) {\n-    std::shared_ptr<PerIsolateOptions> options = env->isolate_data()->options();\n-    if (options->report_on_fatalerror) {\n-      report::TriggerNodeReport(\n-          isolate, env, message, __func__, \"\", Local<String>());\n-    }\n-  } else {\n+  if (env == nullptr || env->isolate_data()->options()->report_on_fatalerror) {\n     report::TriggerNodeReport(\n-        isolate, nullptr, message, __func__, \"\", Local<String>());\n+        isolate, env, message, __func__, \"\", Local<String>());\n   }\n #endif  // NODE_REPORT\n   fflush(stderr);"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 2,
        "deletions": 8
    }
}