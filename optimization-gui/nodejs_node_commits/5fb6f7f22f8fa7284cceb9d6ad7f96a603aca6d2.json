{
    "author": "kfarnung",
    "message": "n-api,test: add int64 bounds tests\n\nAdded some simple tests to verify that the int64 API is correctly\nhandling numbers greater than 32-bits. This is a basic test, but\nverifies that an implementer hasn't truncated back to 32-bits.\n\nRefs: https://github.com/nodejs/node-chakracore/pull/496\n\nPR-URL: https://github.com/nodejs/node/pull/19309\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Gabriel Schulhof <gabriel.schulhof@intel.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "5fb6f7f22f8fa7284cceb9d6ad7f96a603aca6d2",
    "files": [
        {
            "sha": "11cf6f6b7478a60acff764e0380ce9224981b9df",
            "filename": "test/addons-napi/test_number/test.js",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/5fb6f7f22f8fa7284cceb9d6ad7f96a603aca6d2/test%2Faddons-napi%2Ftest_number%2Ftest.js",
            "raw_url": "https://github.com/nodejs/node/raw/5fb6f7f22f8fa7284cceb9d6ad7f96a603aca6d2/test%2Faddons-napi%2Ftest_number%2Ftest.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons-napi%2Ftest_number%2Ftest.js?ref=5fb6f7f22f8fa7284cceb9d6ad7f96a603aca6d2",
            "patch": "@@ -45,3 +45,10 @@ assert.strictEqual(1, test_number.TestInt32Truncation(4294967297));\n assert.strictEqual(0, test_number.TestInt32Truncation(4294967296));\n assert.strictEqual(-1, test_number.TestInt32Truncation(4294967295));\n assert.strictEqual(3, test_number.TestInt32Truncation(4294967296 * 5 + 3));\n+\n+// validate that the boundaries of safe integer can be passed through\n+// successfully\n+assert.strictEqual(Number.MAX_SAFE_INTEGER,\n+                   test_number.TestInt64Truncation(Number.MAX_SAFE_INTEGER));\n+assert.strictEqual(Number.MIN_SAFE_INTEGER,\n+                   test_number.TestInt64Truncation(Number.MIN_SAFE_INTEGER));"
        },
        {
            "sha": "a1a70950083324fd88ca9a123da767a859194f2e",
            "filename": "test/addons-napi/test_number/test_number.c",
            "status": "modified",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/5fb6f7f22f8fa7284cceb9d6ad7f96a603aca6d2/test%2Faddons-napi%2Ftest_number%2Ftest_number.c",
            "raw_url": "https://github.com/nodejs/node/raw/5fb6f7f22f8fa7284cceb9d6ad7f96a603aca6d2/test%2Faddons-napi%2Ftest_number%2Ftest_number.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons-napi%2Ftest_number%2Ftest_number.c?ref=5fb6f7f22f8fa7284cceb9d6ad7f96a603aca6d2",
            "patch": "@@ -45,10 +45,33 @@ napi_value TestInt32Truncation(napi_env env, napi_callback_info info) {\n   return output;\n }\n \n+napi_value TestInt64Truncation(napi_env env, napi_callback_info info) {\n+  size_t argc = 1;\n+  napi_value args[1];\n+  NAPI_CALL(env, napi_get_cb_info(env, info, &argc, args, NULL, NULL));\n+\n+  NAPI_ASSERT(env, argc >= 1, \"Wrong number of arguments\");\n+\n+  napi_valuetype valuetype0;\n+  NAPI_CALL(env, napi_typeof(env, args[0], &valuetype0));\n+\n+  NAPI_ASSERT(env, valuetype0 == napi_number,\n+      \"Wrong type of arguments. Expects a number as first argument.\");\n+\n+  int64_t input;\n+  NAPI_CALL(env, napi_get_value_int64(env, args[0], &input));\n+\n+  napi_value output;\n+  NAPI_CALL(env, napi_create_int64(env, input, &output));\n+\n+  return output;\n+}\n+\n napi_value Init(napi_env env, napi_value exports) {\n   napi_property_descriptor descriptors[] = {\n     DECLARE_NAPI_PROPERTY(\"Test\", Test),\n     DECLARE_NAPI_PROPERTY(\"TestInt32Truncation\", TestInt32Truncation),\n+    DECLARE_NAPI_PROPERTY(\"TestInt64Truncation\", TestInt64Truncation),\n   };\n \n   NAPI_CALL(env, napi_define_properties("
        }
    ],
    "stats": {
        "total": 30,
        "additions": 30,
        "deletions": 0
    }
}