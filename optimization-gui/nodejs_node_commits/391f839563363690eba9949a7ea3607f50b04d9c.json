{
    "author": "Trott",
    "message": "test: refactor pummel/test-net-pingpong\n\n* Use port 0 instead of `common.PORT`.\n* Use `//` for comments, capitalize comments, and add punctuation.\n\nPR-URL: https://github.com/nodejs/node/pull/25485\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "391f839563363690eba9949a7ea3607f50b04d9c",
    "files": [
        {
            "sha": "b9507d519d8e6da57d6dac2b0b78f345d1badcf3",
            "filename": "test/pummel/test-net-pingpong.js",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/nodejs/node/blob/391f839563363690eba9949a7ea3607f50b04d9c/test%2Fpummel%2Ftest-net-pingpong.js",
            "raw_url": "https://github.com/nodejs/node/raw/391f839563363690eba9949a7ea3607f50b04d9c/test%2Fpummel%2Ftest-net-pingpong.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fpummel%2Ftest-net-pingpong.js?ref=391f839563363690eba9949a7ea3607f50b04d9c",
            "patch": "@@ -26,7 +26,7 @@ const net = require('net');\n \n let tests_run = 0;\n \n-function pingPongTest(port, host, on_complete) {\n+function pingPongTest(host, on_complete) {\n   const N = 1000;\n   let count = 0;\n   let sent_final_ping = false;\n@@ -69,8 +69,8 @@ function pingPongTest(port, host, on_complete) {\n     });\n   });\n \n-  server.listen(port, host, function() {\n-    const client = net.createConnection(port, host);\n+  server.listen(0, host, function() {\n+    const client = net.createConnection(server.address().port, host);\n \n     client.setEncoding('utf8');\n \n@@ -110,12 +110,12 @@ function pingPongTest(port, host, on_complete) {\n   });\n }\n \n-/* All are run at once, so run on different ports */\n-pingPongTest(common.PORT, 'localhost');\n-pingPongTest(common.PORT + 1, null);\n+// All are run at once and will run on different ports.\n+pingPongTest('localhost');\n+pingPongTest(null);\n \n-// This IPv6 isn't working on Solaris\n-if (!common.isSunOS) pingPongTest(common.PORT + 2, '::1');\n+// This IPv6 isn't working on Solaris.\n+if (!common.isSunOS) pingPongTest('::1');\n \n process.on('exit', function() {\n   assert.strictEqual(tests_run, common.isSunOS ? 2 : 3);"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 8,
        "deletions": 8
    }
}