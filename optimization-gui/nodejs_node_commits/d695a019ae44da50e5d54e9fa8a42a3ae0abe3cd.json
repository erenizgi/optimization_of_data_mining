{
    "author": "ZYSzys",
    "message": "module: use validateString in modules/esm\n\nPR-URL: https://github.com/nodejs/node/pull/24868\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "d695a019ae44da50e5d54e9fa8a42a3ae0abe3cd",
    "files": [
        {
            "sha": "820b593446ca7946095068edec8631801f8c6eba",
            "filename": "lib/internal/modules/esm/loader.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/d695a019ae44da50e5d54e9fa8a42a3ae0abe3cd/lib%2Finternal%2Fmodules%2Fesm%2Floader.js",
            "raw_url": "https://github.com/nodejs/node/raw/d695a019ae44da50e5d54e9fa8a42a3ae0abe3cd/lib%2Finternal%2Fmodules%2Fesm%2Floader.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2Floader.js?ref=d695a019ae44da50e5d54e9fa8a42a3ae0abe3cd",
            "patch": "@@ -1,14 +1,14 @@\n 'use strict';\n \n const {\n-  ERR_INVALID_ARG_TYPE,\n   ERR_INVALID_RETURN_PROPERTY,\n   ERR_INVALID_RETURN_PROPERTY_VALUE,\n   ERR_INVALID_RETURN_VALUE,\n   ERR_MISSING_DYNAMIC_INSTANTIATE_HOOK,\n   ERR_UNKNOWN_MODULE_FORMAT\n } = require('internal/errors').codes;\n const { URL } = require('url');\n+const { validateString } = require('internal/validators');\n const ModuleMap = require('internal/modules/esm/module_map');\n const ModuleJob = require('internal/modules/esm/module_job');\n const defaultResolve = require('internal/modules/esm/default_resolve');\n@@ -52,8 +52,8 @@ class Loader {\n \n   async resolve(specifier, parentURL) {\n     const isMain = parentURL === undefined;\n-    if (!isMain && typeof parentURL !== 'string')\n-      throw new ERR_INVALID_ARG_TYPE('parentURL', 'string', parentURL);\n+    if (!isMain)\n+      validateString(parentURL, 'parentURL');\n \n     const resolved = await this._resolve(specifier, parentURL, defaultResolve);\n "
        },
        {
            "sha": "a9d0c23c0e5ee98d993d813ee239c803b804f707",
            "filename": "lib/internal/modules/esm/module_map.js",
            "status": "modified",
            "additions": 4,
            "deletions": 9,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/d695a019ae44da50e5d54e9fa8a42a3ae0abe3cd/lib%2Finternal%2Fmodules%2Fesm%2Fmodule_map.js",
            "raw_url": "https://github.com/nodejs/node/raw/d695a019ae44da50e5d54e9fa8a42a3ae0abe3cd/lib%2Finternal%2Fmodules%2Fesm%2Fmodule_map.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fmodules%2Fesm%2Fmodule_map.js?ref=d695a019ae44da50e5d54e9fa8a42a3ae0abe3cd",
            "patch": "@@ -4,29 +4,24 @@ const ModuleJob = require('internal/modules/esm/module_job');\n const { SafeMap } = require('internal/safe_globals');\n const debug = require('util').debuglog('esm');\n const { ERR_INVALID_ARG_TYPE } = require('internal/errors').codes;\n+const { validateString } = require('internal/validators');\n \n // Tracks the state of the loader-level module cache\n class ModuleMap extends SafeMap {\n   get(url) {\n-    if (typeof url !== 'string') {\n-      throw new ERR_INVALID_ARG_TYPE('url', 'string', url);\n-    }\n+    validateString(url, 'url');\n     return super.get(url);\n   }\n   set(url, job) {\n-    if (typeof url !== 'string') {\n-      throw new ERR_INVALID_ARG_TYPE('url', 'string', url);\n-    }\n+    validateString(url, 'url');\n     if (job instanceof ModuleJob !== true) {\n       throw new ERR_INVALID_ARG_TYPE('job', 'ModuleJob', job);\n     }\n     debug(`Storing ${url} in ModuleMap`);\n     return super.set(url, job);\n   }\n   has(url) {\n-    if (typeof url !== 'string') {\n-      throw new ERR_INVALID_ARG_TYPE('url', 'string', url);\n-    }\n+    validateString(url, 'url');\n     return super.has(url);\n   }\n }"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 7,
        "deletions": 12
    }
}