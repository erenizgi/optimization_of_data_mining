{
    "author": "cjihrig",
    "message": "tls: prevent multiple connection errors\n\nonConnectEnd(), which is called by TLSSocket, has a guard to\nprevent being called multiple times, but it does not prevent the\nOpenSSL error handler from being called, leading to multiple\nerror events. This commit adds that piece of missing logic.\n\nPR-URL: https://github.com/nodejs/node/pull/23636\nFixes: https://github.com/nodejs/node/issues/23631\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Wyatt Preul <wpreul@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "b94ce575f57fa883b93ce8948730577a9bde8603",
    "files": [
        {
            "sha": "b28e3b62b74dafe0e33ea90fc479075f48d8cf28",
            "filename": "lib/_tls_wrap.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/b94ce575f57fa883b93ce8948730577a9bde8603/lib%2F_tls_wrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/b94ce575f57fa883b93ce8948730577a9bde8603/lib%2F_tls_wrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_tls_wrap.js?ref=b94ce575f57fa883b93ce8948730577a9bde8603",
            "patch": "@@ -248,9 +248,11 @@ function onocspresponse(resp) {\n function onerror(err) {\n   const owner = this[owner_symbol];\n \n-  if (owner._writableState.errorEmitted)\n+  if (owner._hadError)\n     return;\n \n+  owner._hadError = true;\n+\n   // Destroy socket if error happened before handshake's finish\n   if (!owner._secureEstablished) {\n     // When handshake fails control is not yet released,\n@@ -265,8 +267,6 @@ function onerror(err) {\n     // Throw error\n     owner._emitTLSError(err);\n   }\n-\n-  owner._writableState.errorEmitted = true;\n }\n \n function initRead(tls, wrapped) {"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}