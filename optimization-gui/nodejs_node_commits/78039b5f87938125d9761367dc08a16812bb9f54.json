{
    "author": "rubys",
    "message": "tools: validate apidoc links\n\nPR-URL: https://github.com/nodejs/node/pull/21889\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Vse Mozhet Byt <vsemozhetbyt@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Rich Trott <rtrott@gmail.com>",
    "sha": "78039b5f87938125d9761367dc08a16812bb9f54",
    "files": [
        {
            "sha": "3de538e42404a5b7692944252acd8b71af911d2e",
            "filename": "tools/doc/allhtml.js",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/78039b5f87938125d9761367dc08a16812bb9f54/tools%2Fdoc%2Fallhtml.js",
            "raw_url": "https://github.com/nodejs/node/raw/78039b5f87938125d9761367dc08a16812bb9f54/tools%2Fdoc%2Fallhtml.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Fdoc%2Fallhtml.js?ref=78039b5f87938125d9761367dc08a16812bb9f54",
            "patch": "@@ -73,3 +73,16 @@ all = all.slice(0, apiStart.index + apiStart[0].length) +\n \n // Write results.\n fs.writeFileSync(source + '/all.html', all, 'utf8');\n+\n+// Validate all hrefs have a target.\n+const ids = new Set();\n+const idRe = / id=\"(\\w+)\"/g;\n+let match;\n+while (match = idRe.exec(all)) {\n+  ids.add(match[1]);\n+}\n+\n+const hrefRe = / href=\"#(\\w+)\"/g;\n+while (match = hrefRe.exec(all)) {\n+  if (!ids.has(match[1])) throw new Error(`link not found: ${match[1]}`);\n+}"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 13,
        "deletions": 0
    }
}