{
    "author": "Trott",
    "message": "test: fix flaky test-debug-prompt\n\nBe sure to send `.exit` only once to avoid spurious EPIPE and possibly\nother errors.\n\nFixes: https://github.com/nodejs/node/issues/21724\n\nPR-URL: https://github.com/nodejs/node/pull/21826\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Jon Moss <me@jonathanmoss.me>",
    "sha": "df97126173918ad589c5ceb234204f66d0c5afac",
    "files": [
        {
            "sha": "e32f464690053670e530563372dd943c718b4040",
            "filename": "test/sequential/test-debug-prompt.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/df97126173918ad589c5ceb234204f66d0c5afac/test%2Fsequential%2Ftest-debug-prompt.js",
            "raw_url": "https://github.com/nodejs/node/raw/df97126173918ad589c5ceb234204f66d0c5afac/test%2Fsequential%2Ftest-debug-prompt.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-debug-prompt.js?ref=df97126173918ad589c5ceb234204f66d0c5afac",
            "patch": "@@ -7,9 +7,12 @@ const spawn = require('child_process').spawn;\n const proc = spawn(process.execPath, ['inspect', 'foo']);\n proc.stdout.setEncoding('utf8');\n \n+let needToSendExit = true;\n let output = '';\n proc.stdout.on('data', (data) => {\n   output += data;\n-  if (output.includes('debug> '))\n+  if (output.includes('debug> ') && needToSendExit) {\n     proc.stdin.write('.exit\\n');\n+    needToSendExit = false;\n+  }\n });"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}