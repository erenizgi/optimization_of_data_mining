{
    "author": "unknown",
    "message": "n-api: test uint32 truncation\n\nRe: https://github.com/nodejs/abi-stable-node/issues/55#issuecomment-403382424\nPR-URL: https://github.com/nodejs/node/pull/21722\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>",
    "sha": "acf0606f72825d6be975d449096352d3652cfced",
    "files": [
        {
            "sha": "34f48aee578ac64e876018e9a791711dddaa8dac",
            "filename": "test/addons-napi/test_number/test.js",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/nodejs/node/blob/acf0606f72825d6be975d449096352d3652cfced/test%2Faddons-napi%2Ftest_number%2Ftest.js",
            "raw_url": "https://github.com/nodejs/node/raw/acf0606f72825d6be975d449096352d3652cfced/test%2Faddons-napi%2Ftest_number%2Ftest.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons-napi%2Ftest_number%2Ftest.js?ref=acf0606f72825d6be975d449096352d3652cfced",
            "patch": "@@ -35,6 +35,20 @@ testNumber(Number.POSITIVE_INFINITY);\n testNumber(Number.NEGATIVE_INFINITY);\n testNumber(Number.NaN);\n \n+function testUint32(input, expected = input) {\n+  assert.strictEqual(expected, test_number.TestUint32Truncation(input));\n+}\n+\n+// Test zero\n+testUint32(0.0, 0);\n+testUint32(-0.0, 0);\n+\n+// Test overflow scenarios\n+testUint32(4294967295);\n+testUint32(4294967296, 0);\n+testUint32(4294967297, 1);\n+testUint32(17 * 4294967296 + 1, 1);\n+\n // validate documented behavior when value is retrieved as 32-bit integer with\n // `napi_get_value_int32`\n function testInt32(input, expected = input) {"
        },
        {
            "sha": "63290bf6d64d7e284263c76de22c5882adcba431",
            "filename": "test/addons-napi/test_number/test_number.c",
            "status": "modified",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/nodejs/node/blob/acf0606f72825d6be975d449096352d3652cfced/test%2Faddons-napi%2Ftest_number%2Ftest_number.c",
            "raw_url": "https://github.com/nodejs/node/raw/acf0606f72825d6be975d449096352d3652cfced/test%2Faddons-napi%2Ftest_number%2Ftest_number.c",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Faddons-napi%2Ftest_number%2Ftest_number.c?ref=acf0606f72825d6be975d449096352d3652cfced",
            "patch": "@@ -23,6 +23,28 @@ static napi_value Test(napi_env env, napi_callback_info info) {\n   return output;\n }\n \n+static napi_value TestUint32Truncation(napi_env env, napi_callback_info info) {\n+  size_t argc = 1;\n+  napi_value args[1];\n+  NAPI_CALL(env, napi_get_cb_info(env, info, &argc, args, NULL, NULL));\n+\n+  NAPI_ASSERT(env, argc >= 1, \"Wrong number of arguments\");\n+\n+  napi_valuetype valuetype0;\n+  NAPI_CALL(env, napi_typeof(env, args[0], &valuetype0));\n+\n+  NAPI_ASSERT(env, valuetype0 == napi_number,\n+      \"Wrong type of arguments. Expects a number as first argument.\");\n+\n+  uint32_t input;\n+  NAPI_CALL(env, napi_get_value_uint32(env, args[0], &input));\n+\n+  napi_value output;\n+  NAPI_CALL(env, napi_create_uint32(env, input, &output));\n+\n+  return output;\n+}\n+\n static napi_value TestInt32Truncation(napi_env env, napi_callback_info info) {\n   size_t argc = 1;\n   napi_value args[1];\n@@ -71,6 +93,7 @@ static napi_value Init(napi_env env, napi_value exports) {\n   napi_property_descriptor descriptors[] = {\n     DECLARE_NAPI_PROPERTY(\"Test\", Test),\n     DECLARE_NAPI_PROPERTY(\"TestInt32Truncation\", TestInt32Truncation),\n+    DECLARE_NAPI_PROPERTY(\"TestUint32Truncation\", TestUint32Truncation),\n     DECLARE_NAPI_PROPERTY(\"TestInt64Truncation\", TestInt64Truncation),\n   };\n "
        }
    ],
    "stats": {
        "total": 37,
        "additions": 37,
        "deletions": 0
    }
}