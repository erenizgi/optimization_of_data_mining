{
    "author": "addaleax",
    "message": "src: define zlib constants in node_zlib.cc\n\nThis is in order to avoid having two separate definitions\nfor `node_zlib_mode`.\n\nPR-URL: https://github.com/nodejs/node/pull/23019\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>",
    "sha": "ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7",
    "files": [
        {
            "sha": "753b8f8fe166022426bb288166f0cc82e5b16a9b",
            "filename": "src/node_constants.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 63,
            "changes": 63,
            "blob_url": "https://github.com/nodejs/node/blob/ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7/src%2Fnode_constants.cc",
            "raw_url": "https://github.com/nodejs/node/raw/ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7/src%2Fnode_constants.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_constants.cc?ref=ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7",
            "patch": "@@ -1241,69 +1241,6 @@ void DefineCryptoConstants(Local<Object> target) {\n   NODE_DEFINE_CONSTANT(target, INT_MAX);\n }\n \n-void DefineZlibConstants(Local<Object> target) {\n-  NODE_DEFINE_CONSTANT(target, Z_NO_FLUSH);\n-  NODE_DEFINE_CONSTANT(target, Z_PARTIAL_FLUSH);\n-  NODE_DEFINE_CONSTANT(target, Z_SYNC_FLUSH);\n-  NODE_DEFINE_CONSTANT(target, Z_FULL_FLUSH);\n-  NODE_DEFINE_CONSTANT(target, Z_FINISH);\n-  NODE_DEFINE_CONSTANT(target, Z_BLOCK);\n-\n-  // return/error codes\n-  NODE_DEFINE_CONSTANT(target, Z_OK);\n-  NODE_DEFINE_CONSTANT(target, Z_STREAM_END);\n-  NODE_DEFINE_CONSTANT(target, Z_NEED_DICT);\n-  NODE_DEFINE_CONSTANT(target, Z_ERRNO);\n-  NODE_DEFINE_CONSTANT(target, Z_STREAM_ERROR);\n-  NODE_DEFINE_CONSTANT(target, Z_DATA_ERROR);\n-  NODE_DEFINE_CONSTANT(target, Z_MEM_ERROR);\n-  NODE_DEFINE_CONSTANT(target, Z_BUF_ERROR);\n-  NODE_DEFINE_CONSTANT(target, Z_VERSION_ERROR);\n-\n-  NODE_DEFINE_CONSTANT(target, Z_NO_COMPRESSION);\n-  NODE_DEFINE_CONSTANT(target, Z_BEST_SPEED);\n-  NODE_DEFINE_CONSTANT(target, Z_BEST_COMPRESSION);\n-  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_COMPRESSION);\n-  NODE_DEFINE_CONSTANT(target, Z_FILTERED);\n-  NODE_DEFINE_CONSTANT(target, Z_HUFFMAN_ONLY);\n-  NODE_DEFINE_CONSTANT(target, Z_RLE);\n-  NODE_DEFINE_CONSTANT(target, Z_FIXED);\n-  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_STRATEGY);\n-  NODE_DEFINE_CONSTANT(target, ZLIB_VERNUM);\n-\n-  enum node_zlib_mode {\n-    NONE,\n-    DEFLATE,\n-    INFLATE,\n-    GZIP,\n-    GUNZIP,\n-    DEFLATERAW,\n-    INFLATERAW,\n-    UNZIP\n-  };\n-\n-  NODE_DEFINE_CONSTANT(target, DEFLATE);\n-  NODE_DEFINE_CONSTANT(target, INFLATE);\n-  NODE_DEFINE_CONSTANT(target, GZIP);\n-  NODE_DEFINE_CONSTANT(target, GUNZIP);\n-  NODE_DEFINE_CONSTANT(target, DEFLATERAW);\n-  NODE_DEFINE_CONSTANT(target, INFLATERAW);\n-  NODE_DEFINE_CONSTANT(target, UNZIP);\n-\n-  NODE_DEFINE_CONSTANT(target, Z_MIN_WINDOWBITS);\n-  NODE_DEFINE_CONSTANT(target, Z_MAX_WINDOWBITS);\n-  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_WINDOWBITS);\n-  NODE_DEFINE_CONSTANT(target, Z_MIN_CHUNK);\n-  NODE_DEFINE_CONSTANT(target, Z_MAX_CHUNK);\n-  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_CHUNK);\n-  NODE_DEFINE_CONSTANT(target, Z_MIN_MEMLEVEL);\n-  NODE_DEFINE_CONSTANT(target, Z_MAX_MEMLEVEL);\n-  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_MEMLEVEL);\n-  NODE_DEFINE_CONSTANT(target, Z_MIN_LEVEL);\n-  NODE_DEFINE_CONSTANT(target, Z_MAX_LEVEL);\n-  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_LEVEL);\n-}\n-\n void DefineDLOpenConstants(Local<Object> target) {\n #ifdef RTLD_LAZY\n   NODE_DEFINE_CONSTANT(target, RTLD_LAZY);"
        },
        {
            "sha": "0c0b2e317620cef0b128686eca2a329528fe49eb",
            "filename": "src/node_internals.h",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7/src%2Fnode_internals.h",
            "raw_url": "https://github.com/nodejs/node/raw/ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7/src%2Fnode_internals.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_internals.h?ref=ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7",
            "patch": "@@ -936,6 +936,8 @@ void GetEGid(const v8::FunctionCallbackInfo<v8::Value>& args);\n void GetGroups(const v8::FunctionCallbackInfo<v8::Value>& args);\n #endif  // __POSIX__ && !defined(__ANDROID__) && !defined(__CloudABI__)\n \n+void DefineZlibConstants(v8::Local<v8::Object> target);\n+\n }  // namespace node\n \n void napi_module_register_by_symbol(v8::Local<v8::Object> exports,"
        },
        {
            "sha": "d0cc54c9436582f9a0758da7c325f8f57e75b4b3",
            "filename": "src/node_zlib.cc",
            "status": "modified",
            "additions": 53,
            "deletions": 0,
            "changes": 53,
            "blob_url": "https://github.com/nodejs/node/blob/ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7/src%2Fnode_zlib.cc",
            "raw_url": "https://github.com/nodejs/node/raw/ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7/src%2Fnode_zlib.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_zlib.cc?ref=ead5c4c054863cbc82bd2c2a8ddb31860f9e51f7",
            "patch": "@@ -773,6 +773,59 @@ void Initialize(Local<Object> target,\n }\n \n }  // anonymous namespace\n+\n+void DefineZlibConstants(Local<Object> target) {\n+  NODE_DEFINE_CONSTANT(target, Z_NO_FLUSH);\n+  NODE_DEFINE_CONSTANT(target, Z_PARTIAL_FLUSH);\n+  NODE_DEFINE_CONSTANT(target, Z_SYNC_FLUSH);\n+  NODE_DEFINE_CONSTANT(target, Z_FULL_FLUSH);\n+  NODE_DEFINE_CONSTANT(target, Z_FINISH);\n+  NODE_DEFINE_CONSTANT(target, Z_BLOCK);\n+\n+  // return/error codes\n+  NODE_DEFINE_CONSTANT(target, Z_OK);\n+  NODE_DEFINE_CONSTANT(target, Z_STREAM_END);\n+  NODE_DEFINE_CONSTANT(target, Z_NEED_DICT);\n+  NODE_DEFINE_CONSTANT(target, Z_ERRNO);\n+  NODE_DEFINE_CONSTANT(target, Z_STREAM_ERROR);\n+  NODE_DEFINE_CONSTANT(target, Z_DATA_ERROR);\n+  NODE_DEFINE_CONSTANT(target, Z_MEM_ERROR);\n+  NODE_DEFINE_CONSTANT(target, Z_BUF_ERROR);\n+  NODE_DEFINE_CONSTANT(target, Z_VERSION_ERROR);\n+\n+  NODE_DEFINE_CONSTANT(target, Z_NO_COMPRESSION);\n+  NODE_DEFINE_CONSTANT(target, Z_BEST_SPEED);\n+  NODE_DEFINE_CONSTANT(target, Z_BEST_COMPRESSION);\n+  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_COMPRESSION);\n+  NODE_DEFINE_CONSTANT(target, Z_FILTERED);\n+  NODE_DEFINE_CONSTANT(target, Z_HUFFMAN_ONLY);\n+  NODE_DEFINE_CONSTANT(target, Z_RLE);\n+  NODE_DEFINE_CONSTANT(target, Z_FIXED);\n+  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_STRATEGY);\n+  NODE_DEFINE_CONSTANT(target, ZLIB_VERNUM);\n+\n+  NODE_DEFINE_CONSTANT(target, DEFLATE);\n+  NODE_DEFINE_CONSTANT(target, INFLATE);\n+  NODE_DEFINE_CONSTANT(target, GZIP);\n+  NODE_DEFINE_CONSTANT(target, GUNZIP);\n+  NODE_DEFINE_CONSTANT(target, DEFLATERAW);\n+  NODE_DEFINE_CONSTANT(target, INFLATERAW);\n+  NODE_DEFINE_CONSTANT(target, UNZIP);\n+\n+  NODE_DEFINE_CONSTANT(target, Z_MIN_WINDOWBITS);\n+  NODE_DEFINE_CONSTANT(target, Z_MAX_WINDOWBITS);\n+  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_WINDOWBITS);\n+  NODE_DEFINE_CONSTANT(target, Z_MIN_CHUNK);\n+  NODE_DEFINE_CONSTANT(target, Z_MAX_CHUNK);\n+  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_CHUNK);\n+  NODE_DEFINE_CONSTANT(target, Z_MIN_MEMLEVEL);\n+  NODE_DEFINE_CONSTANT(target, Z_MAX_MEMLEVEL);\n+  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_MEMLEVEL);\n+  NODE_DEFINE_CONSTANT(target, Z_MIN_LEVEL);\n+  NODE_DEFINE_CONSTANT(target, Z_MAX_LEVEL);\n+  NODE_DEFINE_CONSTANT(target, Z_DEFAULT_LEVEL);\n+}\n+\n }  // namespace node\n \n NODE_BUILTIN_MODULE_CONTEXT_AWARE(zlib, node::Initialize)"
        }
    ],
    "stats": {
        "total": 118,
        "additions": 55,
        "deletions": 63
    }
}