{
    "author": "mcollina",
    "message": "stream: always defer readable in EOF when sync\n\nFix a regression introduced by\nhttps://github.com/nodejs/node/pull/18515 that broke\nthe dicer module tests.\n\nSee: https://github.com/nodejs/node/pull/18515\n\nPR-URL: https://github.com/nodejs/node/pull/18615\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>",
    "sha": "87b9bceacb6877e62148ea0f96f89a03f9b76a47",
    "files": [
        {
            "sha": "46afe5f33dee91b1f1ea971f5c302ecacf2ab37e",
            "filename": "lib/_stream_readable.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/87b9bceacb6877e62148ea0f96f89a03f9b76a47/lib%2F_stream_readable.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b9bceacb6877e62148ea0f96f89a03f9b76a47/lib%2F_stream_readable.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2F_stream_readable.js?ref=87b9bceacb6877e62148ea0f96f89a03f9b76a47",
            "patch": "@@ -488,9 +488,9 @@ function onEofChunk(stream, state) {\n   }\n   state.ended = true;\n \n-  if (state.sync && state.length) {\n-    // if we are sync and have data in the buffer, wait until next tick\n-    // to emit the data. otherwise we risk emitting data in the flow()\n+  if (state.sync) {\n+    // if we are sync, wait until next tick to emit the data.\n+    // Otherwise we risk emitting data in the flow()\n     // the readable code triggers during a read() call\n     emitReadable(stream);\n   } else {"
        },
        {
            "sha": "17c84c7310e0534a6934dc2c94ab63beb34dfaa1",
            "filename": "test/parallel/test-stream-readable-object-multi-push-async.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/87b9bceacb6877e62148ea0f96f89a03f9b76a47/test%2Fparallel%2Ftest-stream-readable-object-multi-push-async.js",
            "raw_url": "https://github.com/nodejs/node/raw/87b9bceacb6877e62148ea0f96f89a03f9b76a47/test%2Fparallel%2Ftest-stream-readable-object-multi-push-async.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stream-readable-object-multi-push-async.js?ref=87b9bceacb6877e62148ea0f96f89a03f9b76a47",
            "patch": "@@ -160,7 +160,7 @@ const BATCH = 10;\n   });\n \n   readable.on('end', common.mustCall(() => {\n-    assert.strictEqual(nextTickPassed, false);\n+    assert.strictEqual(nextTickPassed, true);\n   }));\n }\n "
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}