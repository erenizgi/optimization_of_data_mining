{
    "author": "christian-bromann",
    "message": "test: add test coverage for fs.truncate\n\nAdd test to check:\n- for `null` as len parameter\n- if error is propagated into callback if file doesn't exist\n- if an error is actually thrown if len is not a number\n\nPR-URL: https://github.com/nodejs/node/pull/23620\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Denys Otrishko <shishugi@gmail.com>",
    "sha": "74f854e769fbb595b007b25d7bd79e7fbdf043b8",
    "files": [
        {
            "sha": "d1d743eb57f0fd453d1e5365d19a13e058c539ba",
            "filename": "test/parallel/test-fs-truncate.js",
            "status": "modified",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/nodejs/node/blob/74f854e769fbb595b007b25d7bd79e7fbdf043b8/test%2Fparallel%2Ftest-fs-truncate.js",
            "raw_url": "https://github.com/nodejs/node/raw/74f854e769fbb595b007b25d7bd79e7fbdf043b8/test%2Fparallel%2Ftest-fs-truncate.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-truncate.js?ref=74f854e769fbb595b007b25d7bd79e7fbdf043b8",
            "patch": "@@ -239,6 +239,41 @@ function testFtruncate(cb) {\n   }));\n }\n \n+{\n+  const file7 = path.resolve(tmp, 'truncate-file-7.txt');\n+  fs.writeFileSync(file7, 'Hi');\n+  fs.truncate(file7, undefined, common.mustCall(function(err) {\n+    assert.ifError(err);\n+    assert(fs.readFileSync(file7).equals(Buffer.from('')));\n+  }));\n+}\n+\n+{\n+  const file8 = path.resolve(tmp, 'non-existent-truncate-file.txt');\n+  const validateError = (err) => {\n+    assert.strictEqual(file8, err.path);\n+    assert.strictEqual(\n+      err.message,\n+      `ENOENT: no such file or directory, open '${file8}'`);\n+    assert.strictEqual(err.code, 'ENOENT');\n+    assert.strictEqual(err.syscall, 'open');\n+    return true;\n+  };\n+  fs.truncate(file8, 0, common.mustCall(validateError));\n+}\n+\n+['', false, null, {}, []].forEach((input) => {\n+  assert.throws(\n+    () => fs.truncate('/foo/bar', input),\n+    {\n+      code: 'ERR_INVALID_ARG_TYPE',\n+      name: 'TypeError [ERR_INVALID_ARG_TYPE]',\n+      message: 'The \"len\" argument must be of type number. ' +\n+               `Received type ${typeof input}`\n+    }\n+  );\n+});\n+\n ['', false, null, undefined, {}, []].forEach((input) => {\n   ['ftruncate', 'ftruncateSync'].forEach((fnName) => {\n     assert.throws("
        }
    ],
    "stats": {
        "total": 35,
        "additions": 35,
        "deletions": 0
    }
}