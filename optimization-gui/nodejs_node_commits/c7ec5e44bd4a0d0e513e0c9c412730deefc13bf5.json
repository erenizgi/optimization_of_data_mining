{
    "author": "unknown",
    "message": "inspector, test: verify reported console message\n\nMany Inspector protocol clients rely on the top frame reported for the\nconsole messages. This test makes sure correct location is reported.\n\nPR-URL: https://github.com/nodejs/node/pull/25455\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "c7ec5e44bd4a0d0e513e0c9c412730deefc13bf5",
    "files": [
        {
            "sha": "56fd6a3890999fdd24c9e60afff7d92ed0aba364",
            "filename": "test/parallel/test-inspector-console-top-frame.js",
            "status": "added",
            "additions": 31,
            "deletions": 0,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/c7ec5e44bd4a0d0e513e0c9c412730deefc13bf5/test%2Fparallel%2Ftest-inspector-console-top-frame.js",
            "raw_url": "https://github.com/nodejs/node/raw/c7ec5e44bd4a0d0e513e0c9c412730deefc13bf5/test%2Fparallel%2Ftest-inspector-console-top-frame.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-inspector-console-top-frame.js?ref=c7ec5e44bd4a0d0e513e0c9c412730deefc13bf5",
            "patch": "@@ -0,0 +1,31 @@\n+'use strict';\n+\n+// Verify that the line containing console.log is reported as a top stack frame\n+// of the consoleAPICalled notification.\n+// Changing this will break many Inspector protocol clients, including\n+// debuggers that use that value for navigating from console messages to code.\n+\n+const common = require('../common');\n+common.skipIfInspectorDisabled();\n+\n+const assert = require('assert');\n+const { Session } = require('inspector');\n+const { basename } = require('path');\n+\n+function logMessage() {\n+  console.log('Log a message');\n+}\n+\n+const session = new Session();\n+let topFrame;\n+session.once('Runtime.consoleAPICalled', (notification) => {\n+  topFrame = (notification.params.stackTrace.callFrames[0]);\n+});\n+session.connect();\n+session.post('Runtime.enable');\n+\n+logMessage();  // Triggers Inspector notification\n+\n+session.disconnect();\n+assert.strictEqual(basename(topFrame.url), basename(__filename));\n+assert.strictEqual(topFrame.lineNumber, 15);"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 31,
        "deletions": 0
    }
}