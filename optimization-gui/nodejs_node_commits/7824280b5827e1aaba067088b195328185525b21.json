{
    "author": "joyeecheung",
    "message": "src: declare process-related C++ methods in node_process.h\n\nInstead of in node_internals.h. Also move process property\naccessors that are not reused into node_process_object.cc\nand make them static.\n\nPR-URL: https://github.com/nodejs/node/pull/25397\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>",
    "sha": "7824280b5827e1aaba067088b195328185525b21",
    "files": [
        {
            "sha": "0db34a873efa28b7e7ecb6d5e8755fd3c0f46e2b",
            "filename": "node.gyp",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/node.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/node.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/node.gyp?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -449,6 +449,7 @@\n         'src/node_perf_common.h',\n         'src/node_persistent.h',\n         'src/node_platform.h',\n+        'src/node_process.h',\n         'src/node_revert.h',\n         'src/node_root_certs.h',\n         'src/node_stat_watcher.h',"
        },
        {
            "sha": "d2d5d5bf35d8e6b46813221be3dca2a468e291a5",
            "filename": "src/env.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fenv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fenv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fenv.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -7,6 +7,7 @@\n #include \"node_native_module.h\"\n #include \"node_options-inl.h\"\n #include \"node_platform.h\"\n+#include \"node_process.h\"\n #include \"node_worker.h\"\n #include \"tracing/agent.h\"\n #include \"tracing/traced_value.h\""
        },
        {
            "sha": "d9a252bbe88140e9a851adedfa566823f0bd9730",
            "filename": "src/inspector_agent.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Finspector_agent.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Finspector_agent.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Finspector_agent.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -9,6 +9,7 @@\n #include \"node/inspector/protocol/Protocol.h\"\n #include \"node_errors.h\"\n #include \"node_internals.h\"\n+#include \"node_process.h\"\n #include \"node_url.h\"\n #include \"v8-inspector.h\"\n #include \"v8-platform.h\""
        },
        {
            "sha": "b82da9c9b544e0717c41ccde429b01594e1d243e",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -30,6 +30,7 @@\n #include \"node_options-inl.h\"\n #include \"node_perf.h\"\n #include \"node_platform.h\"\n+#include \"node_process.h\"\n #include \"node_revert.h\"\n #include \"node_version.h\"\n #include \"tracing/traced_value.h\"\n@@ -582,9 +583,9 @@ void Exit(const FunctionCallbackInfo<Value>& args) {\n }\n \n static Maybe<bool> ProcessEmitWarningGeneric(Environment* env,\n-                                             const char* warning,\n-                                             const char* type = nullptr,\n-                                             const char* code = nullptr) {\n+                                      const char* warning,\n+                                      const char* type = nullptr,\n+                                      const char* code = nullptr) {\n   HandleScope handle_scope(env->isolate());\n   Context::Scope context_scope(env->context());\n \n@@ -742,12 +743,10 @@ void RunBootstrapping(Environment* env) {\n \n   // Setting global properties for the bootstrappers to use:\n   // - global\n-  // - process._rawDebug\n   // Expose the global object as a property on itself\n   // (Allows you to set stuff on `global` from anywhere in JavaScript.)\n   global->Set(context, FIXED_ONE_BYTE_STRING(env->isolate(), \"global\"), global)\n       .FromJust();\n-  env->SetMethod(process, \"_rawDebug\", RawDebug);\n \n   // Create binding loaders\n   std::vector<Local<String>> loaders_params = {"
        },
        {
            "sha": "296b15de5bee38ddbcc9de4cf77898ca273b7b7b",
            "filename": "src/node_crypto.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_crypto.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_crypto.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_crypto.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -19,16 +19,17 @@\n // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n+#include \"node_crypto.h\"\n #include \"node.h\"\n #include \"node_buffer.h\"\n-#include \"node_errors.h\"\n #include \"node_constants.h\"\n-#include \"node_crypto.h\"\n #include \"node_crypto_bio.h\"\n-#include \"node_crypto_groups.h\"\n #include \"node_crypto_clienthello-inl.h\"\n-#include \"node_mutex.h\"\n+#include \"node_crypto_groups.h\"\n+#include \"node_errors.h\"\n #include \"node_internals.h\"\n+#include \"node_mutex.h\"\n+#include \"node_process.h\"\n #include \"tls_wrap.h\"  // TLSWrap\n \n #include \"async_wrap-inl.h\""
        },
        {
            "sha": "d1ebb064e2417eb9bb69e2b39b8ff902e06d9966",
            "filename": "src/node_env_var.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_env_var.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_env_var.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_env_var.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -1,5 +1,6 @@\n-#include \"node_internals.h\"\n #include \"node_errors.h\"\n+#include \"node_internals.h\"\n+#include \"node_process.h\"\n \n #ifdef __APPLE__\n #include <crt_externs.h>"
        },
        {
            "sha": "8757f6bf0d892151af7a298ad22f08b604385aab",
            "filename": "src/node_file.cc",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_file.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_file.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_file.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -19,11 +19,13 @@\n // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n+#include \"node_file.h\"\n #include \"aliased_buffer.h\"\n #include \"node_buffer.h\"\n #include \"node_internals.h\"\n+#include \"node_process.h\"\n #include \"node_stat_watcher.h\"\n-#include \"node_file.h\"\n+\n #include \"tracing/trace_event.h\"\n \n #include \"req_wrap-inl.h\""
        },
        {
            "sha": "0b0c97f8c8778586ca57b99a2e3c3a0f6e978d7a",
            "filename": "src/node_internals.h",
            "status": "modified",
            "additions": 0,
            "deletions": 31,
            "changes": 31,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_internals.h",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_internals.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_internals.h?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -123,10 +123,6 @@ void RegisterSignalHandler(int signal,\n                            bool reset_handler = false);\n #endif\n \n-v8::Local<v8::Object> CreateEnvVarProxy(v8::Local<v8::Context> context,\n-                                        v8::Isolate* isolate,\n-                                        v8::Local<v8::Value> data);\n-\n std::string GetHumanReadableProcessName();\n void GetHumanReadableProcessName(char (*name)[1024]);\n \n@@ -180,16 +176,6 @@ namespace task_queue {\n void PromiseRejectCallback(v8::PromiseRejectMessage message);\n }  // namespace task_queue\n \n-v8::Maybe<bool> ProcessEmitWarning(Environment* env, const char* fmt, ...);\n-v8::Maybe<bool> ProcessEmitDeprecationWarning(Environment* env,\n-                                              const char* warning,\n-                                              const char* deprecation_code);\n-\n-v8::Local<v8::Object> CreateProcessObject(\n-    Environment* env,\n-    const std::vector<std::string>& args,\n-    const std::vector<std::string>& exec_args);\n-\n enum Endianness {\n   kLittleEndian,  // _Not_ LITTLE_ENDIAN, clashes with endian.h.\n   kBigEndian\n@@ -697,23 +683,6 @@ static inline const char* errno_string(int errorno) {\n \n // Functions defined in node.cc that are exposed via the bootstrapper object\n \n-void RawDebug(const v8::FunctionCallbackInfo<v8::Value>& args);\n-\n-void DebugPortGetter(v8::Local<v8::Name> property,\n-                     const v8::PropertyCallbackInfo<v8::Value>& info);\n-void DebugPortSetter(v8::Local<v8::Name> property,\n-                     v8::Local<v8::Value> value,\n-                     const v8::PropertyCallbackInfo<void>& info);\n-\n-void GetParentProcessId(v8::Local<v8::Name> property,\n-                        const v8::PropertyCallbackInfo<v8::Value>& info);\n-\n-void ProcessTitleGetter(v8::Local<v8::Name> property,\n-                        const v8::PropertyCallbackInfo<v8::Value>& info);\n-void ProcessTitleSetter(v8::Local<v8::Name> property,\n-                        v8::Local<v8::Value> value,\n-                        const v8::PropertyCallbackInfo<void>& info);\n-\n #if defined(__POSIX__) && !defined(__ANDROID__) && !defined(__CloudABI__)\n #define NODE_IMPLEMENTS_POSIX_CREDENTIALS 1\n #endif  // __POSIX__ && !defined(__ANDROID__) && !defined(__CloudABI__)"
        },
        {
            "sha": "a538839bcc6fcbc088c8977515631e48475bbc8d",
            "filename": "src/node_messaging.cc",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_messaging.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_messaging.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_messaging.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -1,12 +1,13 @@\n-#include \"debug_utils.h\"\n #include \"node_messaging.h\"\n-#include \"node_internals.h\"\n+#include \"async_wrap-inl.h\"\n+#include \"async_wrap.h\"\n+#include \"debug_utils.h\"\n #include \"node_buffer.h\"\n #include \"node_errors.h\"\n-#include \"util.h\"\n+#include \"node_internals.h\"\n+#include \"node_process.h\"\n #include \"util-inl.h\"\n-#include \"async_wrap.h\"\n-#include \"async_wrap-inl.h\"\n+#include \"util.h\"\n \n using v8::Array;\n using v8::ArrayBuffer;"
        },
        {
            "sha": "35667ca1b9de407abc4f5aafbff15c4a3e5fcb48",
            "filename": "src/node_process.h",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_process.h",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_process.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_process.h?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -0,0 +1,32 @@\n+#ifndef SRC_NODE_PROCESS_H_\n+#define SRC_NODE_PROCESS_H_\n+\n+#if defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+\n+#include \"v8.h\"\n+\n+namespace node {\n+\n+v8::Local<v8::Object> CreateEnvVarProxy(v8::Local<v8::Context> context,\n+                                        v8::Isolate* isolate,\n+                                        v8::Local<v8::Value> data);\n+\n+// Most of the time, it's best to use `console.error` to write\n+// to the process.stderr stream.  However, in some cases, such as\n+// when debugging the stream.Writable class or the process.nextTick\n+// function, it is useful to bypass JavaScript entirely.\n+void RawDebug(const v8::FunctionCallbackInfo<v8::Value>& args);\n+\n+v8::Maybe<bool> ProcessEmitWarning(Environment* env, const char* fmt, ...);\n+v8::Maybe<bool> ProcessEmitDeprecationWarning(Environment* env,\n+                                              const char* warning,\n+                                              const char* deprecation_code);\n+\n+v8::Local<v8::Object> CreateProcessObject(\n+    Environment* env,\n+    const std::vector<std::string>& args,\n+    const std::vector<std::string>& exec_args);\n+\n+}  // namespace node\n+#endif  // defined(NODE_WANT_INTERNALS) && NODE_WANT_INTERNALS\n+#endif  // SRC_NODE_PROCESS_H_"
        },
        {
            "sha": "c9abe19b7e0b689113b7fbb0d1def472e23dafa9",
            "filename": "src/node_process_methods.cc",
            "status": "modified",
            "additions": 5,
            "deletions": 47,
            "changes": 52,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_process_methods.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_process_methods.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_process_methods.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -1,9 +1,10 @@\n-#include \"node.h\"\n-#include \"node_internals.h\"\n-#include \"node_errors.h\"\n-#include \"base_object.h\"\n #include \"base_object-inl.h\"\n+#include \"base_object.h\"\n #include \"env-inl.h\"\n+#include \"node.h\"\n+#include \"node_errors.h\"\n+#include \"node_internals.h\"\n+#include \"node_process.h\"\n #include \"util-inl.h\"\n #include \"uv.h\"\n #include \"v8.h\"\n@@ -44,7 +45,6 @@ using v8::Local;\n using v8::Name;\n using v8::NewStringType;\n using v8::Object;\n-using v8::PropertyCallbackInfo;\n using v8::String;\n using v8::Uint32;\n using v8::Uint32Array;\n@@ -197,10 +197,6 @@ static void MemoryUsage(const FunctionCallbackInfo<Value>& args) {\n   fields[3] = v8_heap_stats.external_memory();\n }\n \n-// Most of the time, it's best to use `console.error` to write\n-// to the process.stderr stream.  However, in some cases, such as\n-// when debugging the stream.Writable class or the process.nextTick\n-// function, it is useful to bypass JavaScript entirely.\n void RawDebug(const FunctionCallbackInfo<Value>& args) {\n   CHECK(args.Length() == 1 && args[0]->IsString() &&\n         \"must be called with a single string\");\n@@ -246,28 +242,6 @@ static void Uptime(const FunctionCallbackInfo<Value>& args) {\n   args.GetReturnValue().Set(uptime / 1000);\n }\n \n-void ProcessTitleGetter(Local<Name> property,\n-                        const PropertyCallbackInfo<Value>& info) {\n-  char buffer[512];\n-  uv_get_process_title(buffer, sizeof(buffer));\n-  info.GetReturnValue().Set(String::NewFromUtf8(info.GetIsolate(), buffer,\n-      NewStringType::kNormal).ToLocalChecked());\n-}\n-\n-void ProcessTitleSetter(Local<Name> property,\n-                        Local<Value> value,\n-                        const PropertyCallbackInfo<void>& info) {\n-  node::Utf8Value title(info.GetIsolate(), value);\n-  TRACE_EVENT_METADATA1(\"__metadata\", \"process_name\", \"name\",\n-                        TRACE_STR_COPY(*title));\n-  uv_set_process_title(*title);\n-}\n-\n-void GetParentProcessId(Local<Name> property,\n-                        const PropertyCallbackInfo<Value>& info) {\n-  info.GetReturnValue().Set(uv_os_getppid());\n-}\n-\n static void GetActiveRequests(const FunctionCallbackInfo<Value>& args) {\n   Environment* env = Environment::GetCurrent(args);\n \n@@ -297,22 +271,6 @@ void GetActiveHandles(const FunctionCallbackInfo<Value>& args) {\n       Array::New(env->isolate(), handle_v.data(), handle_v.size()));\n }\n \n-void DebugPortGetter(Local<Name> property,\n-                     const PropertyCallbackInfo<Value>& info) {\n-  Environment* env = Environment::GetCurrent(info);\n-  int port = env->inspector_host_port()->port();\n-  info.GetReturnValue().Set(port);\n-}\n-\n-\n-void DebugPortSetter(Local<Name> property,\n-                     Local<Value> value,\n-                     const PropertyCallbackInfo<void>& info) {\n-  Environment* env = Environment::GetCurrent(info);\n-  int32_t port = value->Int32Value(env->context()).FromMaybe(0);\n-  env->inspector_host_port()->set_port(static_cast<int>(port));\n-}\n-\n #ifdef __POSIX__\n static void DebugProcess(const FunctionCallbackInfo<Value>& args) {\n   Environment* env = Environment::GetCurrent(args);"
        },
        {
            "sha": "980b5002b69b0b465f816acd8caf0b12496a2e77",
            "filename": "src/node_process_object.cc",
            "status": "modified",
            "additions": 53,
            "deletions": 2,
            "changes": 55,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_process_object.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fnode_process_object.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_process_object.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -4,6 +4,7 @@\n #include \"node_internals.h\"\n #include \"node_options-inl.h\"\n #include \"node_metadata.h\"\n+#include \"node_process.h\"\n #include \"node_revert.h\"\n #include \"util-inl.h\"\n \n@@ -18,13 +19,53 @@ using v8::Integer;\n using v8::Isolate;\n using v8::Just;\n using v8::Local;\n+using v8::Name;\n using v8::NewStringType;\n using v8::None;\n using v8::Object;\n+using v8::PropertyCallbackInfo;\n using v8::SideEffectType;\n using v8::String;\n using v8::Value;\n \n+static void ProcessTitleGetter(Local<Name> property,\n+                               const PropertyCallbackInfo<Value>& info) {\n+  char buffer[512];\n+  uv_get_process_title(buffer, sizeof(buffer));\n+  info.GetReturnValue().Set(\n+      String::NewFromUtf8(info.GetIsolate(), buffer, NewStringType::kNormal)\n+          .ToLocalChecked());\n+}\n+\n+static void ProcessTitleSetter(Local<Name> property,\n+                               Local<Value> value,\n+                               const PropertyCallbackInfo<void>& info) {\n+  node::Utf8Value title(info.GetIsolate(), value);\n+  TRACE_EVENT_METADATA1(\n+      \"__metadata\", \"process_name\", \"name\", TRACE_STR_COPY(*title));\n+  uv_set_process_title(*title);\n+}\n+\n+static void DebugPortGetter(Local<Name> property,\n+                            const PropertyCallbackInfo<Value>& info) {\n+  Environment* env = Environment::GetCurrent(info);\n+  int port = env->inspector_host_port()->port();\n+  info.GetReturnValue().Set(port);\n+}\n+\n+static void DebugPortSetter(Local<Name> property,\n+                            Local<Value> value,\n+                            const PropertyCallbackInfo<void>& info) {\n+  Environment* env = Environment::GetCurrent(info);\n+  int32_t port = value->Int32Value(env->context()).FromMaybe(0);\n+  env->inspector_host_port()->set_port(static_cast<int>(port));\n+}\n+\n+static void GetParentProcessId(Local<Name> property,\n+                               const PropertyCallbackInfo<Value>& info) {\n+  info.GetReturnValue().Set(uv_os_getppid());\n+}\n+\n Local<Object> CreateProcessObject(Environment* env,\n                                   const std::vector<std::string>& args,\n                                   const std::vector<std::string>& exec_args) {\n@@ -39,6 +80,7 @@ Local<Object> CreateProcessObject(Environment* env,\n                               ->NewInstance(context)\n                               .ToLocalChecked();\n \n+  // process.title\n   auto title_string = FIXED_ONE_BYTE_STRING(env->isolate(), \"title\");\n   CHECK(process->SetAccessor(\n       env->context(),\n@@ -103,7 +145,7 @@ Local<Object> CreateProcessObject(Environment* env,\n                ToV8Value(env->context(), exec_args)\n                    .ToLocalChecked()).FromJust();\n \n-  // create process.env\n+  // process.env\n   process\n       ->Set(env->context(),\n             FIXED_ONE_BYTE_STRING(env->isolate(), \"env\"),\n@@ -117,6 +159,9 @@ Local<Object> CreateProcessObject(Environment* env,\n                              FIXED_ONE_BYTE_STRING(env->isolate(), \"ppid\"),\n                              GetParentProcessId).FromJust());\n \n+  // TODO(joyeecheung): the following process properties that are set using\n+  // parsed CLI flags should be migrated to `internal/options` in JS land.\n+\n   // -e, --eval\n   // TODO(addaleax): Remove this.\n   if (env->options()->has_eval_string) {\n@@ -193,13 +238,13 @@ Local<Object> CreateProcessObject(Environment* env,\n     READONLY_PROPERTY(process, \"traceDeprecation\", True(env->isolate()));\n   }\n \n-  // TODO(refack): move the following 4 to `node_config`\n   // --inspect-brk\n   if (env->options()->debug_options().wait_for_connect()) {\n     READONLY_DONT_ENUM_PROPERTY(process,\n                                 \"_breakFirstLine\", True(env->isolate()));\n   }\n \n+  // --inspect-brk-node\n   if (env->options()->debug_options().break_node_first_line) {\n     READONLY_DONT_ENUM_PROPERTY(process,\n                                 \"_breakNodeFirstLine\", True(env->isolate()));\n@@ -227,6 +272,7 @@ Local<Object> CreateProcessObject(Environment* env,\n   SECURITY_REVERSIONS(V)\n #undef V\n \n+  // process.execPath\n   {\n     size_t exec_path_len = 2 * PATH_MAX;\n     std::vector<char> exec_path(exec_path_len);\n@@ -245,13 +291,18 @@ Local<Object> CreateProcessObject(Environment* env,\n                  exec_path_value).FromJust();\n   }\n \n+  // process.debugPort\n   auto debug_port_string = FIXED_ONE_BYTE_STRING(env->isolate(), \"debugPort\");\n   CHECK(process->SetAccessor(env->context(),\n                              debug_port_string,\n                              DebugPortGetter,\n                              env->is_main_thread() ? DebugPortSetter : nullptr,\n                              env->as_external()).FromJust());\n \n+  // process._rawDebug: may be overwritten later in JS land, but should be\n+  // availbale from the begining for debugging purposes\n+  env->SetMethod(process, \"_rawDebug\", RawDebug);\n+\n   return scope.Escape(process);\n }\n "
        },
        {
            "sha": "ca08342ec63bb1b4cd658caf06d60340e4501059",
            "filename": "src/signal_wrap.cc",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fsignal_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fsignal_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fsignal_wrap.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -22,6 +22,7 @@\n #include \"async_wrap-inl.h\"\n #include \"env-inl.h\"\n #include \"handle_wrap.h\"\n+#include \"node_process.h\"\n #include \"util-inl.h\"\n #include \"v8.h\"\n "
        },
        {
            "sha": "5422b0d2403d397b75db2692d0d251c8f23b82bc",
            "filename": "src/uv.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/7824280b5827e1aaba067088b195328185525b21/src%2Fuv.cc",
            "raw_url": "https://github.com/nodejs/node/raw/7824280b5827e1aaba067088b195328185525b21/src%2Fuv.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fuv.cc?ref=7824280b5827e1aaba067088b195328185525b21",
            "patch": "@@ -20,9 +20,10 @@\n // USE OR OTHER DEALINGS IN THE SOFTWARE.\n \n #include \"uv.h\"\n+#include \"env-inl.h\"\n #include \"node.h\"\n #include \"node_internals.h\"\n-#include \"env-inl.h\"\n+#include \"node_process.h\"\n \n namespace node {\n "
        }
    ],
    "stats": {
        "total": 213,
        "additions": 116,
        "deletions": 97
    }
}