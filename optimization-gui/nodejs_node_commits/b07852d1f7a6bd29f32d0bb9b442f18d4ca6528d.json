{
    "author": "ChALkeR",
    "message": "buffer: use FastBuffer when fill is set to 0\n\nA large number of libraries seem to use Buffer.alloc(size, 0)\ninstead of just Buffer.alloc(size).\n\nWe don't need to follow the \"create unsafe buffer and fill it\" path\n(i.e. actually allocate and perform fill) in that situation, that is\nbetter handled by Uint8Array constructor.\n\nBuffer.alloc(size) and Buffer.alloc(size, 0) are equivalent, so\nuse the same code path.\n\nNot performing the zero-fill manually and having the underlying memory\nallocator do it for us can improve speed and reduce the memory usage\nfor situations where Buffer.alloc(size, 0) is used.\n\nPR-URL: https://github.com/nodejs/node/pull/21989\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>",
    "sha": "b07852d1f7a6bd29f32d0bb9b442f18d4ca6528d",
    "files": [
        {
            "sha": "7902fc6fde5dcc55d2b92a85897236b4f1c73a1a",
            "filename": "lib/buffer.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/b07852d1f7a6bd29f32d0bb9b442f18d4ca6528d/lib%2Fbuffer.js",
            "raw_url": "https://github.com/nodejs/node/raw/b07852d1f7a6bd29f32d0bb9b442f18d4ca6528d/lib%2Fbuffer.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fbuffer.js?ref=b07852d1f7a6bd29f32d0bb9b442f18d4ca6528d",
            "patch": "@@ -276,7 +276,7 @@ function assertSize(size) {\n  */\n Buffer.alloc = function alloc(size, fill, encoding) {\n   assertSize(size);\n-  if (fill !== undefined && size > 0) {\n+  if (fill !== undefined && fill !== 0 && size > 0) {\n     return _fill(createUnsafeBuffer(size), fill, encoding);\n   }\n   return new FastBuffer(size);"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}