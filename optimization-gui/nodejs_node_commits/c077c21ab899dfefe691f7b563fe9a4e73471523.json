{
    "author": "legendecas",
    "message": "test,worker: posting undefined/null message to message port\n\nRelated: https://github.com/nodejs/node/issues/26122\n\nPR-URL: https://github.com/nodejs/node/pull/26123\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Denys Otrishko <shishugi@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "c077c21ab899dfefe691f7b563fe9a4e73471523",
    "files": [
        {
            "sha": "3ed10755cece283e36d17c8d2b5df29a6aeaae81",
            "filename": "test/parallel/test-worker-onmessage.js",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/nodejs/node/blob/c077c21ab899dfefe691f7b563fe9a4e73471523/test%2Fparallel%2Ftest-worker-onmessage.js",
            "raw_url": "https://github.com/nodejs/node/raw/c077c21ab899dfefe691f7b563fe9a4e73471523/test%2Fparallel%2Ftest-worker-onmessage.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-worker-onmessage.js?ref=c077c21ab899dfefe691f7b563fe9a4e73471523",
            "patch": "@@ -7,13 +7,20 @@ const { Worker, parentPort } = require('worker_threads');\n if (!process.env.HAS_STARTED_WORKER) {\n   process.env.HAS_STARTED_WORKER = 1;\n   const w = new Worker(__filename);\n+  const expectation = [ 4, undefined, null ];\n+  const actual = [];\n   w.on('message', common.mustCall((message) => {\n-    assert.strictEqual(message, 4);\n-    w.terminate();\n-  }));\n+    actual.push(message);\n+    if (actual.length === expectation.length) {\n+      assert.deepStrictEqual(expectation, actual);\n+      w.terminate();\n+    }\n+  }, expectation.length));\n   w.postMessage(2);\n } else {\n   parentPort.onmessage = common.mustCall((message) => {\n     parentPort.postMessage(message.data * 2);\n+    parentPort.postMessage(undefined);\n+    parentPort.postMessage(null);\n   });\n }"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 10,
        "deletions": 3
    }
}