{
    "author": "BridgeAR",
    "message": "assert: move AssertionError into own file\n\nThis moves the `assert` parts from `internal/errors` into an own\nfile. `internal/errors` got bigger and bigger and it was difficult\nto keep a good overview of what was going on. While doing so it\nalso removes the `internalAssert` function and just lazy loads\n`assert`.\n\nPR-URL: https://github.com/nodejs/node/pull/20486\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "b304096a14f4b266738faeaded8ea31215528ea0",
    "files": [
        {
            "sha": "27e71c2751ed749d099c69fa5fd7715112423113",
            "filename": "lib/assert.js",
            "status": "modified",
            "additions": 6,
            "deletions": 9,
            "changes": 15,
            "blob_url": "https://github.com/nodejs/node/blob/b304096a14f4b266738faeaded8ea31215528ea0/lib%2Fassert.js",
            "raw_url": "https://github.com/nodejs/node/raw/b304096a14f4b266738faeaded8ea31215528ea0/lib%2Fassert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fassert.js?ref=b304096a14f4b266738faeaded8ea31215528ea0",
            "patch": "@@ -25,15 +25,12 @@ const {\n   isDeepEqual,\n   isDeepStrictEqual\n } = require('internal/util/comparisons');\n-const {\n-  AssertionError,\n-  errorCache,\n-  codes: {\n-    ERR_AMBIGUOUS_ARGUMENT,\n-    ERR_INVALID_ARG_TYPE,\n-    ERR_INVALID_RETURN_VALUE\n-  }\n-} = require('internal/errors');\n+const { codes: {\n+  ERR_AMBIGUOUS_ARGUMENT,\n+  ERR_INVALID_ARG_TYPE,\n+  ERR_INVALID_RETURN_VALUE\n+} } = require('internal/errors');\n+const { AssertionError, errorCache } = require('internal/assert');\n const { openSync, closeSync, readSync } = require('fs');\n const { inspect, types: { isPromise, isRegExp } } = require('util');\n const { EOL } = require('os');"
        },
        {
            "sha": "990065a9378f141ea95e1867ca33c42fb21d6af4",
            "filename": "lib/internal/assert.js",
            "status": "added",
            "additions": 275,
            "deletions": 0,
            "changes": 275,
            "blob_url": "https://github.com/nodejs/node/blob/b304096a14f4b266738faeaded8ea31215528ea0/lib%2Finternal%2Fassert.js",
            "raw_url": "https://github.com/nodejs/node/raw/b304096a14f4b266738faeaded8ea31215528ea0/lib%2Finternal%2Fassert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fassert.js?ref=b304096a14f4b266738faeaded8ea31215528ea0",
            "patch": "@@ -0,0 +1,275 @@\n+'use strict';\n+\n+const { inspect } = require('util');\n+const { codes: {\n+  ERR_INVALID_ARG_TYPE\n+} } = require('internal/errors');\n+\n+let blue = '';\n+let green = '';\n+let red = '';\n+let white = '';\n+\n+const READABLE_OPERATOR = {\n+  deepStrictEqual: 'Input A expected to strictly deep-equal input B',\n+  notDeepStrictEqual: 'Input A expected to strictly not deep-equal input B',\n+  strictEqual: 'Input A expected to strictly equal input B',\n+  notStrictEqual: 'Input A expected to strictly not equal input B'\n+};\n+\n+function copyError(source) {\n+  const keys = Object.keys(source);\n+  const target = Object.create(Object.getPrototypeOf(source));\n+  for (const key of keys) {\n+    target[key] = source[key];\n+  }\n+  Object.defineProperty(target, 'message', { value: source.message });\n+  return target;\n+}\n+\n+function inspectValue(val) {\n+  // The util.inspect default values could be changed. This makes sure the\n+  // error messages contain the necessary information nevertheless.\n+  return inspect(\n+    val,\n+    {\n+      compact: false,\n+      customInspect: false,\n+      depth: 1000,\n+      maxArrayLength: Infinity,\n+      // Assert compares only enumerable properties (with a few exceptions).\n+      showHidden: false,\n+      // Having a long line as error is better than wrapping the line for\n+      // comparison.\n+      breakLength: Infinity,\n+      // Assert does not detect proxies currently.\n+      showProxy: false\n+    }\n+  ).split('\\n');\n+}\n+\n+function createErrDiff(actual, expected, operator) {\n+  var other = '';\n+  var res = '';\n+  var lastPos = 0;\n+  var end = '';\n+  var skipped = false;\n+  const actualLines = inspectValue(actual);\n+  const expectedLines = inspectValue(expected);\n+  const msg = READABLE_OPERATOR[operator] +\n+        `:\\n${green}+ expected${white} ${red}- actual${white}`;\n+  const skippedMsg = ` ${blue}...${white} Lines skipped`;\n+\n+  // Remove all ending lines that match (this optimizes the output for\n+  // readability by reducing the number of total changed lines).\n+  var a = actualLines[actualLines.length - 1];\n+  var b = expectedLines[expectedLines.length - 1];\n+  var i = 0;\n+  while (a === b) {\n+    if (i++ < 2) {\n+      end = `\\n  ${a}${end}`;\n+    } else {\n+      other = a;\n+    }\n+    actualLines.pop();\n+    expectedLines.pop();\n+    if (actualLines.length === 0 || expectedLines.length === 0)\n+      break;\n+    a = actualLines[actualLines.length - 1];\n+    b = expectedLines[expectedLines.length - 1];\n+  }\n+  if (i > 3) {\n+    end = `\\n${blue}...${white}${end}`;\n+    skipped = true;\n+  }\n+  if (other !== '') {\n+    end = `\\n  ${other}${end}`;\n+    other = '';\n+  }\n+\n+  const maxLines = Math.max(actualLines.length, expectedLines.length);\n+  var printedLines = 0;\n+  var identical = 0;\n+  for (i = 0; i < maxLines; i++) {\n+    // Only extra expected lines exist\n+    const cur = i - lastPos;\n+    if (actualLines.length < i + 1) {\n+      if (cur > 1 && i > 2) {\n+        if (cur > 4) {\n+          res += `\\n${blue}...${white}`;\n+          skipped = true;\n+        } else if (cur > 3) {\n+          res += `\\n  ${expectedLines[i - 2]}`;\n+          printedLines++;\n+        }\n+        res += `\\n  ${expectedLines[i - 1]}`;\n+        printedLines++;\n+      }\n+      lastPos = i;\n+      other += `\\n${green}+${white} ${expectedLines[i]}`;\n+      printedLines++;\n+    // Only extra actual lines exist\n+    } else if (expectedLines.length < i + 1) {\n+      if (cur > 1 && i > 2) {\n+        if (cur > 4) {\n+          res += `\\n${blue}...${white}`;\n+          skipped = true;\n+        } else if (cur > 3) {\n+          res += `\\n  ${actualLines[i - 2]}`;\n+          printedLines++;\n+        }\n+        res += `\\n  ${actualLines[i - 1]}`;\n+        printedLines++;\n+      }\n+      lastPos = i;\n+      res += `\\n${red}-${white} ${actualLines[i]}`;\n+      printedLines++;\n+    // Lines diverge\n+    } else if (actualLines[i] !== expectedLines[i]) {\n+      if (cur > 1 && i > 2) {\n+        if (cur > 4) {\n+          res += `\\n${blue}...${white}`;\n+          skipped = true;\n+        } else if (cur > 3) {\n+          res += `\\n  ${actualLines[i - 2]}`;\n+          printedLines++;\n+        }\n+        res += `\\n  ${actualLines[i - 1]}`;\n+        printedLines++;\n+      }\n+      lastPos = i;\n+      res += `\\n${red}-${white} ${actualLines[i]}`;\n+      other += `\\n${green}+${white} ${expectedLines[i]}`;\n+      printedLines += 2;\n+    // Lines are identical\n+    } else {\n+      res += other;\n+      other = '';\n+      if (cur === 1 || i === 0) {\n+        res += `\\n  ${actualLines[i]}`;\n+        printedLines++;\n+      }\n+      identical++;\n+    }\n+    // Inspected object to big (Show ~20 rows max)\n+    if (printedLines > 20 && i < maxLines - 2) {\n+      return `${msg}${skippedMsg}\\n${res}\\n${blue}...${white}${other}\\n` +\n+        `${blue}...${white}`;\n+    }\n+  }\n+\n+  // Strict equal with identical objects that are not identical by reference.\n+  if (identical === maxLines) {\n+    // E.g., assert.deepStrictEqual(Symbol(), Symbol())\n+    const base = operator === 'strictEqual' ?\n+      'Input objects identical but not reference equal:' :\n+      'Input objects not identical:';\n+\n+    // We have to get the result again. The lines were all removed before.\n+    const actualLines = inspectValue(actual);\n+\n+    // Only remove lines in case it makes sense to collapse those.\n+    // TODO: Accept env to always show the full error.\n+    if (actualLines.length > 30) {\n+      actualLines[26] = `${blue}...${white}`;\n+      while (actualLines.length > 27) {\n+        actualLines.pop();\n+      }\n+    }\n+\n+    return `${base}\\n\\n${actualLines.join('\\n')}\\n`;\n+  }\n+  return `${msg}${skipped ? skippedMsg : ''}\\n${res}${other}${end}`;\n+}\n+\n+class AssertionError extends Error {\n+  constructor(options) {\n+    if (typeof options !== 'object' || options === null) {\n+      throw new ERR_INVALID_ARG_TYPE('options', 'Object', options);\n+    }\n+    var {\n+      actual,\n+      expected,\n+      message,\n+      operator,\n+      stackStartFn\n+    } = options;\n+\n+    if (message != null) {\n+      super(message);\n+    } else {\n+      if (process.stdout.isTTY) {\n+        // Reset on each call to make sure we handle dynamically set environment\n+        // variables correct.\n+        if (process.stdout.getColorDepth() !== 1) {\n+          blue = '\\u001b[34m';\n+          green = '\\u001b[32m';\n+          white = '\\u001b[39m';\n+          red = '\\u001b[31m';\n+        } else {\n+          blue = '';\n+          green = '';\n+          white = '';\n+          red = '';\n+        }\n+      }\n+      // Prevent the error stack from being visible by duplicating the error\n+      // in a very close way to the original in case both sides are actually\n+      // instances of Error.\n+      if (typeof actual === 'object' && actual !== null &&\n+          typeof expected === 'object' && expected !== null &&\n+          'stack' in actual && actual instanceof Error &&\n+          'stack' in expected && expected instanceof Error) {\n+        actual = copyError(actual);\n+        expected = copyError(expected);\n+      }\n+\n+      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n+        super(createErrDiff(actual, expected, operator));\n+      } else if (operator === 'notDeepStrictEqual' ||\n+        operator === 'notStrictEqual') {\n+        // In case the objects are equal but the operator requires unequal, show\n+        // the first object and say A equals B\n+        const res = inspectValue(actual);\n+        const base = `Identical input passed to ${operator}:`;\n+\n+        // Only remove lines in case it makes sense to collapse those.\n+        // TODO: Accept env to always show the full error.\n+        if (res.length > 30) {\n+          res[26] = `${blue}...${white}`;\n+          while (res.length > 27) {\n+            res.pop();\n+          }\n+        }\n+\n+        // Only print a single input.\n+        if (res.length === 1) {\n+          super(`${base} ${res[0]}`);\n+        } else {\n+          super(`${base}\\n\\n${res.join('\\n')}\\n`);\n+        }\n+      } else {\n+        let res = inspect(actual);\n+        let other = inspect(expected);\n+        if (res.length > 128)\n+          res = `${res.slice(0, 125)}...`;\n+        if (other.length > 128)\n+          other = `${other.slice(0, 125)}...`;\n+        super(`${res} ${operator} ${other}`);\n+      }\n+    }\n+\n+    this.generatedMessage = !message;\n+    this.name = 'AssertionError [ERR_ASSERTION]';\n+    this.code = 'ERR_ASSERTION';\n+    this.actual = actual;\n+    this.expected = expected;\n+    this.operator = operator;\n+    Error.captureStackTrace(this, stackStartFn);\n+  }\n+}\n+\n+module.exports = {\n+  AssertionError,\n+  errorCache: new Map()\n+};"
        },
        {
            "sha": "6af266eaee0994278c2c78dbb9d2e54531e45e18",
            "filename": "lib/internal/errors.js",
            "status": "modified",
            "additions": 18,
            "deletions": 296,
            "changes": 314,
            "blob_url": "https://github.com/nodejs/node/blob/b304096a14f4b266738faeaded8ea31215528ea0/lib%2Finternal%2Ferrors.js",
            "raw_url": "https://github.com/nodejs/node/raw/b304096a14f4b266738faeaded8ea31215528ea0/lib%2Finternal%2Ferrors.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Ferrors.js?ref=b304096a14f4b266738faeaded8ea31215528ea0",
            "patch": "@@ -15,18 +15,6 @@ const kInfo = Symbol('info');\n const messages = new Map();\n const codes = {};\n \n-let blue = '';\n-let green = '';\n-let red = '';\n-let white = '';\n-\n-const READABLE_OPERATOR = {\n-  deepStrictEqual: 'Input A expected to strictly deep-equal input B',\n-  notDeepStrictEqual: 'Input A expected to strictly not deep-equal input B',\n-  strictEqual: 'Input A expected to strictly equal input B',\n-  notStrictEqual: 'Input A expected to strictly not equal input B'\n-};\n-\n const {\n   errmap,\n   UV_EAI_NODATA,\n@@ -36,46 +24,22 @@ const { kMaxLength } = process.binding('buffer');\n const { defineProperty } = Object;\n \n // Lazily loaded\n-var util;\n-var buffer;\n+let util;\n+let assert;\n \n-var internalUtil = null;\n+let internalUtil = null;\n function lazyInternalUtil() {\n   if (!internalUtil) {\n     internalUtil = require('internal/util');\n   }\n   return internalUtil;\n }\n \n-function copyError(source) {\n-  const keys = Object.keys(source);\n-  const target = Object.create(Object.getPrototypeOf(source));\n-  for (const key of keys) {\n-    target[key] = source[key];\n-  }\n-  Object.defineProperty(target, 'message', { value: source.message });\n-  return target;\n-}\n-\n-function inspectValue(val) {\n-  // The util.inspect default values could be changed. This makes sure the\n-  // error messages contain the necessary information nevertheless.\n-  return util.inspect(\n-    val,\n-    {\n-      compact: false,\n-      customInspect: false,\n-      depth: 1000,\n-      maxArrayLength: Infinity,\n-      // Assert compares only enumerable properties (with a few exceptions).\n-      showHidden: false,\n-      // Having a long line as error is better than wrapping the line for\n-      // comparison.\n-      breakLength: Infinity,\n-      // Assert does not detect proxies currently.\n-      showProxy: false\n-    }\n-  ).split('\\n');\n+let buffer;\n+function lazyBuffer() {\n+  if (buffer === undefined)\n+    buffer = require('buffer').Buffer;\n+  return buffer;\n }\n \n // A specialized Error that includes an additional info property with\n@@ -240,254 +204,14 @@ function E(sym, val, def, ...otherClasses) {\n   codes[sym] = def;\n }\n \n-function lazyBuffer() {\n-  if (buffer === undefined)\n-    buffer = require('buffer').Buffer;\n-  return buffer;\n-}\n-\n-function createErrDiff(actual, expected, operator) {\n-  var other = '';\n-  var res = '';\n-  var lastPos = 0;\n-  var end = '';\n-  var skipped = false;\n-  if (util === undefined) util = require('util');\n-  const actualLines = inspectValue(actual);\n-  const expectedLines = inspectValue(expected);\n-  const msg = READABLE_OPERATOR[operator] +\n-        `:\\n${green}+ expected${white} ${red}- actual${white}`;\n-  const skippedMsg = ` ${blue}...${white} Lines skipped`;\n-\n-  // Remove all ending lines that match (this optimizes the output for\n-  // readability by reducing the number of total changed lines).\n-  var a = actualLines[actualLines.length - 1];\n-  var b = expectedLines[expectedLines.length - 1];\n-  var i = 0;\n-  while (a === b) {\n-    if (i++ < 2) {\n-      end = `\\n  ${a}${end}`;\n-    } else {\n-      other = a;\n-    }\n-    actualLines.pop();\n-    expectedLines.pop();\n-    if (actualLines.length === 0 || expectedLines.length === 0)\n-      break;\n-    a = actualLines[actualLines.length - 1];\n-    b = expectedLines[expectedLines.length - 1];\n-  }\n-  if (i > 3) {\n-    end = `\\n${blue}...${white}${end}`;\n-    skipped = true;\n-  }\n-  if (other !== '') {\n-    end = `\\n  ${other}${end}`;\n-    other = '';\n-  }\n-\n-  const maxLines = Math.max(actualLines.length, expectedLines.length);\n-  var printedLines = 0;\n-  var identical = 0;\n-  for (i = 0; i < maxLines; i++) {\n-    // Only extra expected lines exist\n-    const cur = i - lastPos;\n-    if (actualLines.length < i + 1) {\n-      if (cur > 1 && i > 2) {\n-        if (cur > 4) {\n-          res += `\\n${blue}...${white}`;\n-          skipped = true;\n-        } else if (cur > 3) {\n-          res += `\\n  ${expectedLines[i - 2]}`;\n-          printedLines++;\n-        }\n-        res += `\\n  ${expectedLines[i - 1]}`;\n-        printedLines++;\n-      }\n-      lastPos = i;\n-      other += `\\n${green}+${white} ${expectedLines[i]}`;\n-      printedLines++;\n-    // Only extra actual lines exist\n-    } else if (expectedLines.length < i + 1) {\n-      if (cur > 1 && i > 2) {\n-        if (cur > 4) {\n-          res += `\\n${blue}...${white}`;\n-          skipped = true;\n-        } else if (cur > 3) {\n-          res += `\\n  ${actualLines[i - 2]}`;\n-          printedLines++;\n-        }\n-        res += `\\n  ${actualLines[i - 1]}`;\n-        printedLines++;\n-      }\n-      lastPos = i;\n-      res += `\\n${red}-${white} ${actualLines[i]}`;\n-      printedLines++;\n-    // Lines diverge\n-    } else if (actualLines[i] !== expectedLines[i]) {\n-      if (cur > 1 && i > 2) {\n-        if (cur > 4) {\n-          res += `\\n${blue}...${white}`;\n-          skipped = true;\n-        } else if (cur > 3) {\n-          res += `\\n  ${actualLines[i - 2]}`;\n-          printedLines++;\n-        }\n-        res += `\\n  ${actualLines[i - 1]}`;\n-        printedLines++;\n-      }\n-      lastPos = i;\n-      res += `\\n${red}-${white} ${actualLines[i]}`;\n-      other += `\\n${green}+${white} ${expectedLines[i]}`;\n-      printedLines += 2;\n-    // Lines are identical\n-    } else {\n-      res += other;\n-      other = '';\n-      if (cur === 1 || i === 0) {\n-        res += `\\n  ${actualLines[i]}`;\n-        printedLines++;\n-      }\n-      identical++;\n-    }\n-    // Inspected object to big (Show ~20 rows max)\n-    if (printedLines > 20 && i < maxLines - 2) {\n-      return `${msg}${skippedMsg}\\n${res}\\n${blue}...${white}${other}\\n` +\n-        `${blue}...${white}`;\n-    }\n-  }\n-\n-  // Strict equal with identical objects that are not identical by reference.\n-  if (identical === maxLines) {\n-    // E.g., assert.deepStrictEqual(Symbol(), Symbol())\n-    const base = operator === 'strictEqual' ?\n-      'Input objects identical but not reference equal:' :\n-      'Input objects not identical:';\n-\n-    // We have to get the result again. The lines were all removed before.\n-    const actualLines = inspectValue(actual);\n-\n-    // Only remove lines in case it makes sense to collapse those.\n-    // TODO: Accept env to always show the full error.\n-    if (actualLines.length > 30) {\n-      actualLines[26] = `${blue}...${white}`;\n-      while (actualLines.length > 27) {\n-        actualLines.pop();\n-      }\n-    }\n-\n-    return `${base}\\n\\n${actualLines.join('\\n')}\\n`;\n-  }\n-  return `${msg}${skipped ? skippedMsg : ''}\\n${res}${other}${end}`;\n-}\n-\n-class AssertionError extends Error {\n-  constructor(options) {\n-    if (typeof options !== 'object' || options === null) {\n-      throw new codes.ERR_INVALID_ARG_TYPE('options', 'Object', options);\n-    }\n-    var {\n-      actual,\n-      expected,\n-      message,\n-      operator,\n-      stackStartFn\n-    } = options;\n-\n-    if (message != null) {\n-      super(message);\n-    } else {\n-      if (process.stdout.isTTY) {\n-        // Reset on each call to make sure we handle dynamically set environment\n-        // variables correct.\n-        if (process.stdout.getColorDepth() !== 1) {\n-          blue = '\\u001b[34m';\n-          green = '\\u001b[32m';\n-          white = '\\u001b[39m';\n-          red = '\\u001b[31m';\n-        } else {\n-          blue = '';\n-          green = '';\n-          white = '';\n-          red = '';\n-        }\n-      }\n-      if (util === undefined) util = require('util');\n-      // Prevent the error stack from being visible by duplicating the error\n-      // in a very close way to the original in case both sides are actually\n-      // instances of Error.\n-      if (typeof actual === 'object' && actual !== null &&\n-          typeof expected === 'object' && expected !== null &&\n-          'stack' in actual && actual instanceof Error &&\n-          'stack' in expected && expected instanceof Error) {\n-        actual = copyError(actual);\n-        expected = copyError(expected);\n-      }\n-\n-      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n-        super(createErrDiff(actual, expected, operator));\n-      } else if (operator === 'notDeepStrictEqual' ||\n-        operator === 'notStrictEqual') {\n-        // In case the objects are equal but the operator requires unequal, show\n-        // the first object and say A equals B\n-        const res = inspectValue(actual);\n-        const base = `Identical input passed to ${operator}:`;\n-\n-        // Only remove lines in case it makes sense to collapse those.\n-        // TODO: Accept env to always show the full error.\n-        if (res.length > 30) {\n-          res[26] = `${blue}...${white}`;\n-          while (res.length > 27) {\n-            res.pop();\n-          }\n-        }\n-\n-        // Only print a single input.\n-        if (res.length === 1) {\n-          super(`${base} ${res[0]}`);\n-        } else {\n-          super(`${base}\\n\\n${res.join('\\n')}\\n`);\n-        }\n-      } else {\n-        let res = util.inspect(actual);\n-        let other = util.inspect(expected);\n-        if (res.length > 128)\n-          res = `${res.slice(0, 125)}...`;\n-        if (other.length > 128)\n-          other = `${other.slice(0, 125)}...`;\n-        super(`${res} ${operator} ${other}`);\n-      }\n-    }\n-\n-    this.generatedMessage = !message;\n-    this.name = 'AssertionError [ERR_ASSERTION]';\n-    this.code = 'ERR_ASSERTION';\n-    this.actual = actual;\n-    this.expected = expected;\n-    this.operator = operator;\n-    Error.captureStackTrace(this, stackStartFn);\n-  }\n-}\n-\n-// This is defined here instead of using the assert module to avoid a\n-// circular dependency. The effect is largely the same.\n-function internalAssert(condition, message) {\n-  if (!condition) {\n-    throw new AssertionError({\n-      message,\n-      actual: false,\n-      expected: true,\n-      operator: '=='\n-    });\n-  }\n-}\n-\n function getMessage(key, args) {\n   const msg = messages.get(key);\n+\n   if (util === undefined) util = require('util');\n+  if (assert === undefined) assert = require('assert');\n \n   if (typeof msg === 'function') {\n-    internalAssert(\n+    assert(\n       msg.length <= args.length, // Default options do not count.\n       `Code: ${key}; The provided arguments length (${args.length}) does not ` +\n         `match the required ones (${msg.length}).`\n@@ -496,7 +220,7 @@ function getMessage(key, args) {\n   }\n \n   const expectedLength = (msg.match(/%[dfijoOs]/g) || []).length;\n-  internalAssert(\n+  assert(\n     expectedLength === args.length,\n     `Code: ${key}; The provided arguments length (${args.length}) does not ` +\n       `match the required ones (${expectedLength}).`\n@@ -690,11 +414,9 @@ module.exports = {\n   uvException,\n   isStackOverflowError,\n   getMessage,\n-  AssertionError,\n   SystemError,\n   codes,\n-  E, // This is exported only to facilitate testing.\n-  errorCache: new Map() // This is in here only to facilitate testing.\n+  E // This is exported only to facilitate testing.\n };\n \n // To declare an error message, use the E(sym, val, def) function above. The sym\n@@ -1038,7 +760,7 @@ E('ERR_VM_MODULE_STATUS', 'Module status %s', Error);\n E('ERR_ZLIB_INITIALIZATION_FAILED', 'Initialization failed', Error);\n \n function invalidArgType(name, expected, actual) {\n-  internalAssert(typeof name === 'string', 'name must be a string');\n+  assert(typeof name === 'string', \"'name' must be a string\");\n \n   // determiner: 'must be' or 'must not be'\n   let determiner;\n@@ -1064,7 +786,7 @@ function invalidArgType(name, expected, actual) {\n }\n \n function missingArgs(...args) {\n-  internalAssert(args.length > 0, 'At least one arg needs to be specified');\n+  assert(args.length > 0, 'At least one arg needs to be specified');\n   let msg = 'The ';\n   const len = args.length;\n   args = args.map((a) => `\"${a}\"`);\n@@ -1084,11 +806,11 @@ function missingArgs(...args) {\n }\n \n function oneOf(expected, thing) {\n-  internalAssert(typeof thing === 'string', '`thing` has to be of type string');\n+  assert(typeof thing === 'string', '`thing` has to be of type string');\n   if (Array.isArray(expected)) {\n     const len = expected.length;\n-    internalAssert(len > 0,\n-                   'At least one expected value needs to be specified');\n+    assert(len > 0,\n+           'At least one expected value needs to be specified');\n     expected = expected.map((i) => String(i));\n     if (len > 2) {\n       return `one of ${thing} ${expected.slice(0, len - 1).join(', ')}, or ` +"
        },
        {
            "sha": "54f22a33da6886e547e754ec703c054b12869a78",
            "filename": "node.gyp",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/b304096a14f4b266738faeaded8ea31215528ea0/node.gyp",
            "raw_url": "https://github.com/nodejs/node/raw/b304096a14f4b266738faeaded8ea31215528ea0/node.gyp",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/node.gyp?ref=b304096a14f4b266738faeaded8ea31215528ea0",
            "patch": "@@ -79,6 +79,7 @@\n       'lib/v8.js',\n       'lib/vm.js',\n       'lib/zlib.js',\n+      'lib/internal/assert.js',\n       'lib/internal/async_hooks.js',\n       'lib/internal/buffer.js',\n       'lib/internal/cli_table.js',"
        },
        {
            "sha": "cab6fb33e1887af34bf1c8066fe6e31bc15fc742",
            "filename": "test/parallel/test-assert.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/b304096a14f4b266738faeaded8ea31215528ea0/test%2Fparallel%2Ftest-assert.js",
            "raw_url": "https://github.com/nodejs/node/raw/b304096a14f4b266738faeaded8ea31215528ea0/test%2Fparallel%2Ftest-assert.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-assert.js?ref=b304096a14f4b266738faeaded8ea31215528ea0",
            "patch": "@@ -29,7 +29,7 @@ const common = require('../common');\n const assert = require('assert');\n const { EOL } = require('os');\n const EventEmitter = require('events');\n-const { errorCache } = require('internal/errors');\n+const { errorCache } = require('internal/assert');\n const { writeFileSync, unlinkSync } = require('fs');\n const { inspect } = require('util');\n const a = assert;"
        }
    ],
    "stats": {
        "total": 607,
        "additions": 301,
        "deletions": 306
    }
}