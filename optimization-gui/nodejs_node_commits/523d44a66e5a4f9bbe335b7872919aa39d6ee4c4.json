{
    "author": "daynin",
    "message": "fs: replace duplicate conditions by function\n\nPR-URL: https://github.com/nodejs/node/pull/18717\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Yuta Hiroto <hello@about-hiroppy.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "523d44a66e5a4f9bbe335b7872919aa39d6ee4c4",
    "files": [
        {
            "sha": "afbc412058ba2747af46495b7928f5906a9d15fd",
            "filename": "lib/fs.js",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/nodejs/node/blob/523d44a66e5a4f9bbe335b7872919aa39d6ee4c4/lib%2Ffs.js",
            "raw_url": "https://github.com/nodejs/node/raw/523d44a66e5a4f9bbe335b7872919aa39d6ee4c4/lib%2Ffs.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Ffs.js?ref=523d44a66e5a4f9bbe335b7872919aa39d6ee4c4",
            "patch": "@@ -145,6 +145,12 @@ function isFd(path) {\n \n fs.Stats = Stats;\n \n+function isFileType(fileType) {\n+  // Use stats array directly to avoid creating an fs.Stats instance just for\n+  // our internal use.\n+  return (statValues[1/*mode*/] & S_IFMT) === fileType;\n+}\n+\n // Don't allow mode to accidentally be overwritten.\n Object.defineProperties(fs, {\n   F_OK: { enumerable: true, value: constants.F_OK || 0 },\n@@ -317,10 +323,8 @@ function readFileAfterStat(err) {\n   if (err)\n     return context.close(err);\n \n-  // Use stats array directly to avoid creating an fs.Stats instance just for\n-  // our internal use.\n   var size;\n-  if ((statValues[1/*mode*/] & S_IFMT) === S_IFREG)\n+  if (isFileType(S_IFREG))\n     size = context.size = statValues[8];\n   else\n     size = context.size = 0;\n@@ -432,10 +436,8 @@ fs.readFileSync = function(path, options) {\n   var fd = isUserFd ? path : fs.openSync(path, options.flag || 'r', 0o666);\n \n   tryStatSync(fd, isUserFd);\n-  // Use stats array directly to avoid creating an fs.Stats instance just for\n-  // our internal use.\n   var size;\n-  if ((statValues[1/*mode*/] & S_IFMT) === S_IFREG)\n+  if (isFileType(S_IFREG))\n     size = statValues[8];\n   else\n     size = 0;\n@@ -1604,8 +1606,7 @@ fs.realpathSync = function realpathSync(p, options) {\n \n     // continue if not a symlink, break if a pipe/socket\n     if (knownHard[base] || (cache && cache.get(base) === base)) {\n-      if ((statValues[1/*mode*/] & S_IFMT) === S_IFIFO ||\n-          (statValues[1/*mode*/] & S_IFMT) === S_IFSOCK) {\n+      if (isFileType(S_IFIFO) || isFileType(S_IFSOCK)) {\n         break;\n       }\n       continue;\n@@ -1624,7 +1625,7 @@ fs.realpathSync = function realpathSync(p, options) {\n       binding.lstat(baseLong, undefined, ctx);\n       handleErrorFromBinding(ctx);\n \n-      if ((statValues[1/*mode*/] & S_IFMT) !== S_IFLNK) {\n+      if (!isFileType(S_IFLNK)) {\n         knownHard[base] = true;\n         if (cache) cache.set(base, base);\n         continue;\n@@ -1750,8 +1751,7 @@ fs.realpath = function realpath(p, options, callback) {\n \n     // continue if not a symlink, break if a pipe/socket\n     if (knownHard[base]) {\n-      if ((statValues[1/*mode*/] & S_IFMT) === S_IFIFO ||\n-          (statValues[1/*mode*/] & S_IFMT) === S_IFSOCK) {\n+      if (isFileType(S_IFIFO) || isFileType(S_IFSOCK)) {\n         return callback(null, encodeRealpathResult(p, options));\n       }\n       return process.nextTick(LOOP);\n@@ -1767,7 +1767,7 @@ fs.realpath = function realpath(p, options, callback) {\n     // our internal use.\n \n     // if not a symlink, skip to the next path part\n-    if ((statValues[1/*mode*/] & S_IFMT) !== S_IFLNK) {\n+    if (!isFileType(S_IFLNK)) {\n       knownHard[base] = true;\n       return process.nextTick(LOOP);\n     }"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 12,
        "deletions": 12
    }
}