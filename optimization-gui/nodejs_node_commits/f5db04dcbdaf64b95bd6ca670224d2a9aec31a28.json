{
    "author": "targos",
    "message": "workers: add test for messagePort.onmessage\n\nPR-URL: https://github.com/nodejs/node/pull/21510\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Yuta Hiroto <hello@hiroppy.me>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: Weijia Wang <starkwang@126.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "f5db04dcbdaf64b95bd6ca670224d2a9aec31a28",
    "files": [
        {
            "sha": "895536c15038be4700031feeace004fab9d577ff",
            "filename": "test/parallel/test-worker-onmessage.js",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/nodejs/node/blob/f5db04dcbdaf64b95bd6ca670224d2a9aec31a28/test%2Fparallel%2Ftest-worker-onmessage.js",
            "raw_url": "https://github.com/nodejs/node/raw/f5db04dcbdaf64b95bd6ca670224d2a9aec31a28/test%2Fparallel%2Ftest-worker-onmessage.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-worker-onmessage.js?ref=f5db04dcbdaf64b95bd6ca670224d2a9aec31a28",
            "patch": "@@ -0,0 +1,18 @@\n+// Flags: --experimental-worker\n+'use strict';\n+const common = require('../common');\n+const assert = require('assert');\n+const { Worker, isMainThread, parentPort } = require('worker_threads');\n+\n+if (isMainThread) {\n+  const w = new Worker(__filename);\n+  w.on('message', common.mustCall((message) => {\n+    assert.strictEqual(message, 4);\n+    w.terminate();\n+  }));\n+  w.postMessage(2);\n+} else {\n+  parentPort.onmessage = common.mustCall((message) => {\n+    parentPort.postMessage(message * 2);\n+  });\n+}"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 18,
        "deletions": 0
    }
}