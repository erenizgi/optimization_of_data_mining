{
    "author": "addaleax",
    "message": "build: remove requirement to re-run ./configure\n\nInstead of requiring `./configure` to be run again after\nthe file changed, first try to re-run the configure script\nwith the arguments with which it was originally run.\n\nUsually, those arguments will either contain no flags,\nor all flags that were passed are still supported.\n\nPR-URL: https://github.com/nodejs/node/pull/21371\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Ujjwal Sharma <usharma1998@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>",
    "sha": "074e7f88aff0244dd9aee412e885194ce3f5a953",
    "files": [
        {
            "sha": "e12e4eab6a17008ea4f403f1a551f6b251b5eb47",
            "filename": ".gitignore",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/074e7f88aff0244dd9aee412e885194ce3f5a953/.gitignore",
            "raw_url": "https://github.com/nodejs/node/raw/074e7f88aff0244dd9aee412e885194ce3f5a953/.gitignore",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/.gitignore?ref=074e7f88aff0244dd9aee412e885194ce3f5a953",
            "patch": "@@ -69,6 +69,7 @@ ipch/\n \n /config.mk\n /config.gypi\n+/config.status\n /config_fips.gypi\n *-nodegyp*\n /gyp-mac-tool"
        },
        {
            "sha": "38bb84067480003c410c7b720c23f94715e80580",
            "filename": "Makefile",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/074e7f88aff0244dd9aee412e885194ce3f5a953/Makefile",
            "raw_url": "https://github.com/nodejs/node/raw/074e7f88aff0244dd9aee412e885194ce3f5a953/Makefile",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/Makefile?ref=074e7f88aff0244dd9aee412e885194ce3f5a953",
            "patch": "@@ -114,7 +114,12 @@ out/Makefile: common.gypi deps/uv/uv.gyp deps/http_parser/http_parser.gyp \\\n \t$(PYTHON) tools/gyp_node.py -f make\n \n config.gypi: configure\n-\t$(error Missing or stale $@, please run ./$<)\n+\t@if [ -x config.status ]; then \\\n+\t\t./config.status; \\\n+\telse \\\n+\t\techo Missing or stale $@, please run ./$<; \\\n+\t\texit 1; \\\n+\tfi\n \n .PHONY: install\n install: all ## Installs node into $PREFIX (default=/usr/local)."
        },
        {
            "sha": "3a9ab42414569e75245aff6871c45efb6fec2ab1",
            "filename": "configure",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/074e7f88aff0244dd9aee412e885194ce3f5a953/configure",
            "raw_url": "https://github.com/nodejs/node/raw/074e7f88aff0244dd9aee412e885194ce3f5a953/configure",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/configure?ref=074e7f88aff0244dd9aee412e885194ce3f5a953",
            "patch": "@@ -28,6 +28,7 @@ if sys.version_info[0] != 2 or sys.version_info[1] not in (6, 7):\n import errno\n import optparse\n import os\n+import pipes\n import pprint\n import re\n import shlex\n@@ -38,6 +39,8 @@ import string\n # If not run from node/, cd to node/.\n os.chdir(os.path.dirname(__file__) or '.')\n \n+original_argv = sys.argv[1:]\n+\n # gcc and g++ as defaults matches what GYP's Makefile generator does,\n # except on OS X.\n CC = os.environ.get('CC', 'cc' if sys.platform == 'darwin' else 'gcc')\n@@ -1530,6 +1533,10 @@ pprint.pprint(output, indent=2)\n write('config.gypi', do_not_edit +\n       pprint.pformat(output, indent=2) + '\\n')\n \n+write('config.status', '#!/bin/sh\\nset -x\\nexec ./configure ' +\n+      ' '.join([pipes.quote(arg) for arg in original_argv]) + '\\n')\n+os.chmod('config.status', 0775)\n+\n config = {\n   'BUILDTYPE': 'Debug' if options.debug else 'Release',\n   'PYTHON': sys.executable,"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 14,
        "deletions": 1
    }
}