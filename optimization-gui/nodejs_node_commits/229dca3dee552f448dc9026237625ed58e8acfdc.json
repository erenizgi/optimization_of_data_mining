{
    "author": "addaleax",
    "message": "test,tools: enable running tests under workers\n\nEnable running tests inside workers by passing `--worker`\nto `tools/test.py`. A number of tests are marked as skipped,\nor have been slightly altered to fit the different environment.\n\nPR-URL: https://github.com/nodejs/node/pull/20876\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: Benjamin Gruenbaum <benjamingr@gmail.com>\nReviewed-By: Shingo Inoue <leko.noor@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: John-David Dalton <john.david.dalton@gmail.com>\nReviewed-By: Gus Caplan <me@gus.host>",
    "sha": "229dca3dee552f448dc9026237625ed58e8acfdc",
    "files": [
        {
            "sha": "14969d8e753b6812eb278379a7085eeaeca0fce4",
            "filename": "test/async-hooks/init-hooks.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Finit-hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Finit-hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Finit-hooks.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,7 +1,7 @@\n 'use strict';\n // Flags: --expose-gc\n \n-require('../common');\n+const common = require('../common');\n const assert = require('assert');\n const async_hooks = require('async_hooks');\n const util = require('util');\n@@ -162,6 +162,10 @@ class ActivityCollector {\n         const stub = { uid, type: 'Unknown', handleIsObject: true };\n         this._activities.set(uid, stub);\n         return stub;\n+      } else if (!common.isMainThread) {\n+        // Worker threads start main script execution inside of an AsyncWrap\n+        // callback, so we don't yield errors for these.\n+        return null;\n       } else {\n         const err = new Error(`Found a handle whose ${hook}` +\n                               ' hook was invoked but not its init hook');"
        },
        {
            "sha": "ed7270d191e9031c5a47946b8f2689233ce38c3d",
            "filename": "test/async-hooks/test-crypto-pbkdf2.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-crypto-pbkdf2.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-crypto-pbkdf2.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-crypto-pbkdf2.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,8 @@\n const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n \n const assert = require('assert');\n const tick = require('./tick');"
        },
        {
            "sha": "67f5221a5e0b30976708dac4b9cba89e1a721c2d",
            "filename": "test/async-hooks/test-crypto-randomBytes.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-crypto-randomBytes.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-crypto-randomBytes.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-crypto-randomBytes.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,8 @@\n const common = require('../common');\n if (!common.hasCrypto)\n   common.skip('missing crypto');\n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n \n const assert = require('assert');\n const tick = require('./tick');"
        },
        {
            "sha": "6a9ceaeefb8c0a5ea99b273b757647a8db9cd528",
            "filename": "test/async-hooks/test-emit-before-after.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-emit-before-after.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-emit-before-after.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-emit-before-after.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -7,6 +7,9 @@ const spawnSync = require('child_process').spawnSync;\n const async_hooks = require('internal/async_hooks');\n const initHooks = require('./init-hooks');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n switch (process.argv[2]) {\n   case 'test_invalid_async_id':\n     async_hooks.emitBefore(-2, 1);"
        },
        {
            "sha": "df093da608c29c6aee857b656d60010b2f69b7a6",
            "filename": "test/async-hooks/test-enable-disable.js",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-enable-disable.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-enable-disable.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-enable-disable.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -88,6 +88,10 @@ const assert = require('assert');\n const tick = require('./tick');\n const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n+\n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different timing');\n+\n // Include \"Unknown\"s because hook2 will not be able to identify\n // the type of the first Immediate  since it will miss its `init` invocation.\n const types = [ 'Immediate', 'Unknown' ];"
        },
        {
            "sha": "56ada05b760eb6ccbd05a0024b687f1b164c0972",
            "filename": "test/async-hooks/test-fseventwrap.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-fseventwrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-fseventwrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-fseventwrap.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,12 +1,15 @@\n 'use strict';\n-require('../common');\n+const common = require('../common');\n \n const assert = require('assert');\n const initHooks = require('./init-hooks');\n const tick = require('./tick');\n const { checkInvocations } = require('./hook-checks');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n const hooks = initHooks();\n \n hooks.enable();"
        },
        {
            "sha": "064cd80a48279e5a50e88ec7f7a347dcc62e560b",
            "filename": "test/async-hooks/test-fsreqwrap-readFile.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-fsreqwrap-readFile.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-fsreqwrap-readFile.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-fsreqwrap-readFile.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -7,6 +7,9 @@ const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n const hooks = initHooks();\n \n hooks.enable();"
        },
        {
            "sha": "298c4931cce74e65a0aa13cf99cfbcafd53f2a44",
            "filename": "test/async-hooks/test-getaddrinforeqwrap.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-getaddrinforeqwrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-getaddrinforeqwrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-getaddrinforeqwrap.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -7,6 +7,9 @@ const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n const dns = require('dns');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n const hooks = initHooks();\n \n hooks.enable();"
        },
        {
            "sha": "a32814e5b5df4a3dfd740524e31fc7a3ee8199b2",
            "filename": "test/async-hooks/test-getnameinforeqwrap.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-getnameinforeqwrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-getnameinforeqwrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-getnameinforeqwrap.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -7,6 +7,9 @@ const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n const dns = require('dns');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n const hooks = initHooks();\n \n hooks.enable();"
        },
        {
            "sha": "4c5b857fc2e08f8eb2eddf9742cf101673dea2d0",
            "filename": "test/async-hooks/test-graph.signal.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-graph.signal.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-graph.signal.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-graph.signal.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,9 +1,10 @@\n 'use strict';\n \n const common = require('../common');\n-if (common.isWindows) {\n+if (common.isWindows)\n   common.skip('no signals on Windows');\n-}\n+if (!common.isMainThread)\n+  common.skip('No signal handling available in Workers');\n \n const initHooks = require('./init-hooks');\n const verifyGraph = require('./verify-graph');"
        },
        {
            "sha": "70114d1e1140f84fdf15efe78f81a42ef7897b70",
            "filename": "test/async-hooks/test-no-assert-when-disabled.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-no-assert-when-disabled.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-no-assert-when-disabled.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-no-assert-when-disabled.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,6 +1,9 @@\n 'use strict';\n // Flags: --no-force-async-hooks-checks --expose-internals\n-require('../common');\n+const common = require('../common');\n+\n+if (!common.isMainThread)\n+  common.skip('Workers don\\'t inherit per-env state like the check flag');\n \n const async_hooks = require('internal/async_hooks');\n "
        },
        {
            "sha": "f2b5bf985225b98b19e552eaab95627d09aa31a8",
            "filename": "test/async-hooks/test-pipewrap.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-pipewrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-pipewrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-pipewrap.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -10,6 +10,9 @@ const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n const spawn = require('child_process').spawn;\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n const hooks = initHooks();\n \n hooks.enable();"
        },
        {
            "sha": "873fd272cf2d2967bbf90ca362ecbd6c27f316a9",
            "filename": "test/async-hooks/test-promise.chain-promise-before-init-hooks.js",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-promise.chain-promise-before-init-hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-promise.chain-promise-before-init-hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-promise.chain-promise-before-init-hooks.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,10 @@ const common = require('../common');\n const assert = require('assert');\n const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n+\n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n common.crashOnUnhandledRejection();\n \n const p = new Promise(common.mustCall(function executor(resolve, reject) {"
        },
        {
            "sha": "d3070b7cbd594dbe5b5d087e61c1dbb479de818d",
            "filename": "test/async-hooks/test-promise.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-promise.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-promise.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-promise.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -6,6 +6,9 @@ const assert = require('assert');\n const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n common.crashOnUnhandledRejection();\n \n const hooks = initHooks();"
        },
        {
            "sha": "c94d763450ab24bbdadf2997feba182cbf859cbd",
            "filename": "test/async-hooks/test-signalwrap.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-signalwrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-signalwrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-signalwrap.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,8 @@ const common = require('../common');\n \n if (common.isWindows)\n   common.skip('no signals in Windows');\n+if (!common.isMainThread)\n+  common.skip('No signal handling available in Workers');\n \n const assert = require('assert');\n const initHooks = require('./init-hooks');"
        },
        {
            "sha": "8085ebf51b3b1de53602868902669fa7ed85c148",
            "filename": "test/async-hooks/test-statwatcher.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-statwatcher.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fasync-hooks%2Ftest-statwatcher.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fasync-hooks%2Ftest-statwatcher.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,12 +1,15 @@\n 'use strict';\n \n-require('../common');\n+const common = require('../common');\n const commonPath = require.resolve('../common');\n const assert = require('assert');\n const initHooks = require('./init-hooks');\n const { checkInvocations } = require('./hook-checks');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n const hooks = initHooks();\n hooks.enable();\n "
        },
        {
            "sha": "f9cf6ec663efe4a83993177b3d0b8f0daf9d40ec",
            "filename": "test/common/index.js",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fcommon%2Findex.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fcommon%2Findex.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fcommon%2Findex.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -46,6 +46,14 @@ Object.defineProperty(exports, 'PORT', {\n   enumerable: true\n });\n \n+exports.isMainThread = (() => {\n+  try {\n+    return require('worker').isMainThread;\n+  } catch {\n+    // Worker module not enabled â†’ only a single main thread exists.\n+    return true;\n+  }\n+})();\n \n exports.isWindows = process.platform === 'win32';\n exports.isWOW64 = exports.isWindows &&\n@@ -746,6 +754,10 @@ exports.skipIfInspectorDisabled = function skipIfInspectorDisabled() {\n   if (process.config.variables.v8_enable_inspector === 0) {\n     exports.skip('V8 inspector is disabled');\n   }\n+  if (!exports.isMainThread) {\n+    // TODO(addaleax): Fix me.\n+    exports.skip('V8 inspector is not available in Workers');\n+  }\n };\n \n exports.skipIf32Bits = function skipIf32Bits() {"
        },
        {
            "sha": "8db33bd7a5ce375689669b8ad43f0fe2e06c4a4e",
            "filename": "test/known_issues/test-stdin-is-always-net.socket.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fknown_issues%2Ftest-stdin-is-always-net.socket.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fknown_issues%2Ftest-stdin-is-always-net.socket.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fknown_issues%2Ftest-stdin-is-always-net.socket.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -19,5 +19,5 @@ const proc = spawn(\n // To double-check this test, set stdio to 'pipe' and uncomment the line below.\n // proc.stderr.pipe(process.stderr);\n proc.on('exit', common.mustCall(function(exitCode) {\n-  process.exitCode = exitCode;\n+  assert.strictEqual(exitCode, 0);\n }));"
        },
        {
            "sha": "ace9bca6799a1370c61e74cc90b6bcec8c249a6a",
            "filename": "test/parallel/test-async-hooks-disable-during-promise.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-disable-during-promise.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-disable-during-promise.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-hooks-disable-during-promise.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,9 @@ const common = require('../common');\n const async_hooks = require('async_hooks');\n common.crashOnUnhandledRejection();\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different AsyncWraps');\n+\n const hook = async_hooks.createHook({\n   init: common.mustCall(2),\n   before: common.mustCall(1),"
        },
        {
            "sha": "84c5043aad3335075fc1e3faec654d5028c47909",
            "filename": "test/parallel/test-async-hooks-disable-gc-tracking.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-disable-gc-tracking.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-disable-gc-tracking.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-hooks-disable-gc-tracking.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -8,7 +8,7 @@ const common = require('../common');\n const async_hooks = require('async_hooks');\n \n const hook = async_hooks.createHook({\n-  destroy: common.mustCall(1) // only 1 immediate is destroyed\n+  destroy: common.mustCallAtLeast(1) // only 1 immediate is destroyed\n }).enable();\n \n new async_hooks.AsyncResource('foobar', { requireManualDestroy: true });"
        },
        {
            "sha": "29d25de9805de6f0bca3a834da058c1e52de0c20",
            "filename": "test/parallel/test-async-hooks-enable-during-promise.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-enable-during-promise.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-enable-during-promise.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-hooks-enable-during-promise.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -7,8 +7,8 @@ common.crashOnUnhandledRejection();\n Promise.resolve(1).then(common.mustCall(() => {\n   async_hooks.createHook({\n     init: common.mustCall(),\n-    before: common.mustCall(),\n-    after: common.mustCall(2)\n+    before: common.mustCallAtLeast(),\n+    after: common.mustCallAtLeast(2)\n   }).enable();\n \n   process.nextTick(common.mustCall());"
        },
        {
            "sha": "689dc399f9d2f2fd3335bd03b082060ad9f77946",
            "filename": "test/parallel/test-async-hooks-prevent-double-destroy.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-prevent-double-destroy.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-prevent-double-destroy.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-hooks-prevent-double-destroy.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -8,7 +8,7 @@ const common = require('../common');\n const async_hooks = require('async_hooks');\n \n const hook = async_hooks.createHook({\n-  destroy: common.mustCall(2) // 1 immediate + manual destroy\n+  destroy: common.mustCallAtLeast(2) // 1 immediate + manual destroy\n }).enable();\n \n {"
        },
        {
            "sha": "507a8a4ada2c7ed71ae63e2d81dd2b5ef4b9b731",
            "filename": "test/parallel/test-async-hooks-promise-triggerid.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-promise-triggerid.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-promise-triggerid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-hooks-promise-triggerid.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,9 @@ const common = require('../common');\n const assert = require('assert');\n const async_hooks = require('async_hooks');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n common.crashOnUnhandledRejection();\n \n const promiseAsyncIds = [];"
        },
        {
            "sha": "be1509c7fc23f6866842fa8e576d6beef6b2b602",
            "filename": "test/parallel/test-async-hooks-promise.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-promise.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-promise.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-hooks-promise.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,9 @@ const common = require('../common');\n const assert = require('assert');\n const async_hooks = require('async_hooks');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n const initCalls = [];\n const resolveCalls = [];\n "
        },
        {
            "sha": "cc5fcf48eb50b36f44f5377803755b0f856f1c1b",
            "filename": "test/parallel/test-async-hooks-top-level-clearimmediate.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-top-level-clearimmediate.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-hooks-top-level-clearimmediate.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-hooks-top-level-clearimmediate.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -6,6 +6,9 @@ const common = require('../common');\n const assert = require('assert');\n const async_hooks = require('async_hooks');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different async IDs');\n+\n let seenId, seenResource;\n \n async_hooks.createHook({"
        },
        {
            "sha": "5df8f13c008e19abe07b761bb596f60a2213a413",
            "filename": "test/parallel/test-async-wrap-promise-after-enabled.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-wrap-promise-after-enabled.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-async-wrap-promise-after-enabled.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-async-wrap-promise-after-enabled.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,9 @@\n const common = require('../common');\n const assert = require('assert');\n \n+if (!common.isMainThread)\n+  common.skip('Worker bootstrapping works differently -> different timing');\n+\n const async_hooks = require('async_hooks');\n \n const seenEvents = [];"
        },
        {
            "sha": "c3146564764295207d3ab19749cd48e8dc8dd147",
            "filename": "test/parallel/test-child-process-custom-fds.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-child-process-custom-fds.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-child-process-custom-fds.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-child-process-custom-fds.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,9 @@ const assert = require('assert');\n const internalCp = require('internal/child_process');\n const oldSpawnSync = internalCp.spawnSync;\n \n+if (!common.isMainThread)\n+  common.skip('stdio is not associated with file descriptors in Workers');\n+\n // Verify that customFds is used if stdio is not provided.\n {\n   const msg = 'child_process: options.customFds option is deprecated. ' +"
        },
        {
            "sha": "553a3277532b04780a6701599ff6043c422825ba",
            "filename": "test/parallel/test-child-process-http-socket-leak.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-child-process-http-socket-leak.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-child-process-http-socket-leak.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-child-process-http-socket-leak.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -6,7 +6,6 @@ const common = require('../common');\n const assert = require('assert');\n const { fork } = require('child_process');\n const http = require('http');\n-const { kTimeout } = require('internal/timers');\n \n if (process.argv[2] === 'child') {\n   process.once('message', (req, socket) => {\n@@ -19,6 +18,8 @@ if (process.argv[2] === 'child') {\n   return;\n }\n \n+const { kTimeout } = require('internal/timers');\n+\n let child;\n let socket;\n "
        },
        {
            "sha": "26e4c297672ef69516321822c5c1af66b6639305",
            "filename": "test/parallel/test-child-process-validate-stdio.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-child-process-validate-stdio.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-child-process-validate-stdio.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-child-process-validate-stdio.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -30,7 +30,8 @@ common.expectsError(() => _validateStdio(stdio2, true),\n                     { code: 'ERR_IPC_SYNC_FORK', type: Error }\n );\n \n-{\n+\n+if (common.isMainThread) {\n   const stdio3 = [process.stdin, process.stdout, process.stderr];\n   const result = _validateStdio(stdio3, false);\n   assert.deepStrictEqual(result, {\n@@ -42,4 +43,7 @@ common.expectsError(() => _validateStdio(stdio2, true),\n     ipc: undefined,\n     ipcFd: undefined\n   });\n+} else {\n+  common.printSkipMessage(\n+    'stdio is not associated with file descriptors in Workers');\n }"
        },
        {
            "sha": "7a2c7a82aa797f2c95995003b191a7a9089d6171",
            "filename": "test/parallel/test-cli-eval.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cli-eval.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cli-eval.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cli-eval.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -34,6 +34,9 @@ const path = require('path');\n const fixtures = require('../common/fixtures');\n const nodejs = `\"${process.execPath}\"`;\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n if (process.argv.length > 2) {\n   console.log(process.argv.slice(2).join(' '));\n   process.exit(0);"
        },
        {
            "sha": "0351f83c52b50b02d15f284afa9412a265c48ce4",
            "filename": "test/parallel/test-cli-node-options-disallowed.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cli-node-options-disallowed.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cli-node-options-disallowed.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cli-node-options-disallowed.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -2,6 +2,8 @@\n const common = require('../common');\n if (process.config.variables.node_without_node_options)\n   common.skip('missing NODE_OPTIONS support');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n // Test options specified by env variable.\n "
        },
        {
            "sha": "d851f225fcbc35efa153ee0d3927f6d4d67aab5e",
            "filename": "test/parallel/test-cli-node-options.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cli-node-options.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cli-node-options.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cli-node-options.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -2,6 +2,8 @@\n const common = require('../common');\n if (process.config.variables.node_without_node_options)\n   common.skip('missing NODE_OPTIONS support');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n // Test options specified by env variable.\n "
        },
        {
            "sha": "7e61cf83da78827de3228f316364d437dd43922c",
            "filename": "test/parallel/test-cluster-net-listen-relative-path.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cluster-net-listen-relative-path.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -11,6 +11,8 @@ const tmpdir = require('../common/tmpdir');\n if (common.isWindows)\n   common.skip('On Windows named pipes live in their own ' +\n               'filesystem and don\\'t have a ~100 byte limit');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n // Choose a socket name such that the absolute path would exceed 100 bytes.\n const socketDir = './unix-socket-dir';"
        },
        {
            "sha": "9e2e28b04e714ad53c6d23cbf6920425c3423ddb",
            "filename": "test/parallel/test-console.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-console.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-console.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-console.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -27,9 +27,10 @@ const util = require('util');\n assert.ok(process.stdout.writable);\n assert.ok(process.stderr.writable);\n // Support legacy API\n-assert.strictEqual(typeof process.stdout.fd, 'number');\n-assert.strictEqual(typeof process.stderr.fd, 'number');\n-\n+if (common.isMainThread) {\n+  assert.strictEqual(typeof process.stdout.fd, 'number');\n+  assert.strictEqual(typeof process.stderr.fd, 'number');\n+}\n process.once('warning', common.mustCall((warning) => {\n   assert(/no such label/.test(warning.message));\n }));"
        },
        {
            "sha": "2077d9c1478335eeaefa27200b8fb8b497390977",
            "filename": "test/parallel/test-cwd-enoent-preload.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cwd-enoent-preload.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cwd-enoent-preload.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cwd-enoent-preload.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,8 @@ const common = require('../common');\n // Fails with EINVAL on SmartOS, EBUSY on Windows, EBUSY on AIX.\n if (common.isSunOS || common.isWindows || common.isAIX)\n   common.skip('cannot rmdir current working directory');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n const assert = require('assert');\n const fs = require('fs');"
        },
        {
            "sha": "5ea8abc7e42b523e2d615e11f3804d1036ab2ab3",
            "filename": "test/parallel/test-cwd-enoent-repl.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cwd-enoent-repl.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cwd-enoent-repl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cwd-enoent-repl.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,8 @@ const common = require('../common');\n // Fails with EINVAL on SmartOS, EBUSY on Windows, EBUSY on AIX.\n if (common.isSunOS || common.isWindows || common.isAIX)\n   common.skip('cannot rmdir current working directory');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n const assert = require('assert');\n const fs = require('fs');"
        },
        {
            "sha": "8beb1e3fbe0a058ef89953c5bf2989d3a45c75f3",
            "filename": "test/parallel/test-cwd-enoent.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cwd-enoent.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-cwd-enoent.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-cwd-enoent.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,8 @@ const common = require('../common');\n // Fails with EINVAL on SmartOS, EBUSY on Windows, EBUSY on AIX.\n if (common.isSunOS || common.isWindows || common.isAIX)\n   common.skip('cannot rmdir current working directory');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n const assert = require('assert');\n const fs = require('fs');"
        },
        {
            "sha": "bb7ec5582401a6fd8e66ea8de8a290cb824f0936",
            "filename": "test/parallel/test-debug-args.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-debug-args.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-debug-args.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-debug-args.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,7 +1,10 @@\n 'use strict';\n // Flags: --debug-code\n \n-require('../common');\n+const common = require('../common');\n const assert = require('assert');\n \n+if (!common.isMainThread)\n+  common.skip('execArgv does not affect Workers');\n+\n assert(process.execArgv.includes('--debug-code'));"
        },
        {
            "sha": "599616f5224eb7ad7d35d02b31851755b47f7ab3",
            "filename": "test/parallel/test-fs-realpath.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-fs-realpath.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-fs-realpath.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-realpath.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -24,6 +24,9 @@ const common = require('../common');\n const fixtures = require('../common/fixtures');\n const tmpdir = require('../common/tmpdir');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const assert = require('assert');\n const fs = require('fs');\n const path = require('path');"
        },
        {
            "sha": "2964ac368b5de422a4c21929d0960110876ab25a",
            "filename": "test/parallel/test-fs-write-file-sync.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-fs-write-file-sync.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-fs-write-file-sync.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-fs-write-file-sync.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -28,6 +28,9 @@ let openCount = 0;\n let mode;\n let content;\n \n+if (!common.isMainThread)\n+  common.skip('process.umask is not available in Workers');\n+\n // Need to hijack fs.open/close to make sure that things\n // get closed once they're opened.\n fs._openSync = fs.openSync;"
        },
        {
            "sha": "8e50ecd314dc1721b0f5f1c48e8bb57b19ef2523",
            "filename": "test/parallel/test-module-cjs-helpers.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-module-cjs-helpers.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-module-cjs-helpers.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-module-cjs-helpers.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,11 +1,11 @@\n 'use strict';\n-// Flags: --expose-internals\n+// Flags: --expose-internals --experimental-worker\n \n require('../common');\n const assert = require('assert');\n const { builtinLibs } = require('internal/modules/cjs/helpers');\n \n const hasInspector = process.config.variables.v8_enable_inspector === 1;\n \n-const expectedLibs = hasInspector ? 33 : 32;\n+const expectedLibs = hasInspector ? 34 : 33;\n assert.strictEqual(builtinLibs.length, expectedLibs);"
        },
        {
            "sha": "5941c0b96bc60267fdbe8517b382952543a82f0f",
            "filename": "test/parallel/test-preload.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-preload.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-preload.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-preload.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,8 @@ const fixtures = require('../common/fixtures');\n // Refs: https://github.com/nodejs/node/pull/2253\n if (common.isSunOS)\n   common.skip('unreliable on SunOS');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n const assert = require('assert');\n const childProcess = require('child_process');"
        },
        {
            "sha": "0475d7940ce16a38a37d139f83660df768e3040d",
            "filename": "test/parallel/test-process-chdir-errormessage.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-chdir-errormessage.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-chdir-errormessage.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-chdir-errormessage.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,8 +1,10 @@\n 'use strict';\n \n-const { expectsError } = require('../common');\n+const common = require('../common');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n-expectsError(\n+common.expectsError(\n   () => {\n     process.chdir('does-not-exist');\n   },"
        },
        {
            "sha": "e66d366fb7874fad02be665e9577cf72023bf049",
            "filename": "test/parallel/test-process-chdir.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-chdir.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-chdir.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-chdir.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,9 @@ const assert = require('assert');\n const fs = require('fs');\n const path = require('path');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const tmpdir = require('../common/tmpdir');\n \n process.chdir('..');"
        },
        {
            "sha": "5639163bf31c13e849fa61dc7d6c75903e6cb17a",
            "filename": "test/parallel/test-process-euid-egid.js",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-euid-egid.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-euid-egid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-euid-egid.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,9 +3,11 @@\n const common = require('../common');\n const assert = require('assert');\n \n-if (common.isWindows) {\n-  assert.strictEqual(process.geteuid, undefined);\n-  assert.strictEqual(process.getegid, undefined);\n+if (common.isWindows || !common.isMainThread) {\n+  if (common.isMainThread) {\n+    assert.strictEqual(process.geteuid, undefined);\n+    assert.strictEqual(process.getegid, undefined);\n+  }\n   assert.strictEqual(process.seteuid, undefined);\n   assert.strictEqual(process.setegid, undefined);\n   return;"
        },
        {
            "sha": "d74e320fe63082459e92d9b86ccc26fd8ef43345",
            "filename": "test/parallel/test-process-exit-handler.js",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-exit-handler.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-exit-handler.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-exit-handler.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,11 +1,14 @@\n 'use strict';\n-require('../common');\n+const common = require('../common');\n+\n+if (!common.isMainThread)\n+  common.skip('execArgv does not affect Workers');\n \n // This test ensures that no asynchronous operations are performed in the 'exit'\n // handler.\n // https://github.com/nodejs/node/issues/12322\n \n process.on('exit', () => {\n-  setTimeout(process.abort, 0); // Should not run.\n+  setTimeout(() => process.abort(), 0); // Should not run.\n   for (const start = Date.now(); Date.now() - start < 10;);\n });"
        },
        {
            "sha": "f22273e01c9db8de70fce39b5ec46dfffda7d05a",
            "filename": "test/parallel/test-process-fatal-exception-tick.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-fatal-exception-tick.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-fatal-exception-tick.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-fatal-exception-tick.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,9 @@\n const common = require('../common');\n const assert = require('assert');\n \n+if (!common.isMainThread)\n+  common.skip('Error handling timing is different in Workers');\n+\n // If a process encounters an uncaughtException, it should schedule\n // processing of nextTicks on the next Immediates cycle but not\n // before all Immediates are handled"
        },
        {
            "sha": "456cba7f4dc0278f5f41e5b19bfc3a9182b7ea2b",
            "filename": "test/parallel/test-process-uid-gid.js",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-uid-gid.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-uid-gid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-uid-gid.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -24,11 +24,13 @@ const common = require('../common');\n \n const assert = require('assert');\n \n-if (common.isWindows) {\n-  // uid/gid functions are POSIX only\n-  assert.strictEqual(process.getuid, undefined);\n+if (common.isWindows || !common.isMainThread) {\n+  // uid/gid functions are POSIX only, setters are main-thread only.\n+  if (common.isMainThread) {\n+    assert.strictEqual(process.getuid, undefined);\n+    assert.strictEqual(process.getgid, undefined);\n+  }\n   assert.strictEqual(process.setuid, undefined);\n-  assert.strictEqual(process.getgid, undefined);\n   assert.strictEqual(process.setgid, undefined);\n   return;\n }"
        },
        {
            "sha": "26ea5b1d9d21de5c8e416f3b6af5f32f424553b6",
            "filename": "test/parallel/test-process-umask-mask.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-umask-mask.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-umask-mask.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-umask-mask.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -6,6 +6,9 @@\n const common = require('../common');\n const assert = require('assert');\n \n+if (!common.isMainThread)\n+  common.skip('process.umask is not available in Workers');\n+\n let mask;\n \n if (common.isWindows) {"
        },
        {
            "sha": "b1e0c08bcbd35280bde70ab06d74958fad8b3d48",
            "filename": "test/parallel/test-process-umask.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-umask.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-process-umask.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-umask.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -22,6 +22,8 @@\n 'use strict';\n const common = require('../common');\n const assert = require('assert');\n+if (!common.isMainThread)\n+  common.skip('process.umask is not available in Workers');\n \n // Note in Windows one can only set the \"user\" bits.\n let mask;"
        },
        {
            "sha": "ecab4ba698911baeda7c5d5a7a3f90603703af8d",
            "filename": "test/parallel/test-repl-require.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-repl-require.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-repl-require.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-require.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,9 @@ const fixtures = require('../common/fixtures');\n const assert = require('assert');\n const net = require('net');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n process.chdir(fixtures.fixturesDir);\n const repl = require('repl');\n "
        },
        {
            "sha": "28e4d44b235cde128ef720fa3201485a88297d99",
            "filename": "test/parallel/test-repl-sigint-nested-eval.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-repl-sigint-nested-eval.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-repl-sigint-nested-eval.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-sigint-nested-eval.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,8 @@ if (common.isWindows) {\n   // No way to send CTRL_C_EVENT to processes from JS right now.\n   common.skip('platform not supported');\n }\n+if (!common.isMainThread)\n+  common.skip('No signal handling available in Workers');\n \n const assert = require('assert');\n const spawn = require('child_process').spawn;"
        },
        {
            "sha": "8ad0b2f5c2c8535fad1ce2d53d533f9bb827e532",
            "filename": "test/parallel/test-repl-sigint.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-repl-sigint.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-repl-sigint.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-sigint.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,8 @@ if (common.isWindows) {\n   // No way to send CTRL_C_EVENT to processes from JS right now.\n   common.skip('platform not supported');\n }\n+if (!common.isMainThread)\n+  common.skip('No signal handling available in Workers');\n \n const assert = require('assert');\n const spawn = require('child_process').spawn;"
        },
        {
            "sha": "57c1615e6ffe2b2e22c78c386035cc9e83f36b67",
            "filename": "test/parallel/test-repl-tab-complete.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-repl-tab-complete.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-repl-tab-complete.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-repl-tab-complete.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -26,6 +26,9 @@ const assert = require('assert');\n const fixtures = require('../common/fixtures');\n const hasInspector = process.config.variables.v8_enable_inspector === 1;\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n // We have to change the directory to ../fixtures before requiring repl\n // in order to make the tests for completion of node_modules work properly\n // since repl modifies module.paths."
        },
        {
            "sha": "7aad3ee0a7e7e9828329654afb5b9363747887bc",
            "filename": "test/parallel/test-require-symlink.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-require-symlink.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-require-symlink.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-require-symlink.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,8 @@ const common = require('../common');\n \n if (!common.canCreateSymLink())\n   common.skip('insufficient privileges');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n const assert = require('assert');\n const { spawn } = require('child_process');"
        },
        {
            "sha": "e5f6858f786ba30e4be6ac0a7d4d44d67da8e9d9",
            "filename": "test/parallel/test-setproctitle.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-setproctitle.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-setproctitle.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-setproctitle.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,8 @@ const common = require('../common');\n // FIXME add sunos support\n if (common.isSunOS)\n   common.skip(`Unsupported platform [${process.platform}]`);\n+if (!common.isMainThread)\n+  common.skip('Setting the process title from Workers is not supported');\n \n const assert = require('assert');\n const exec = require('child_process').exec;"
        },
        {
            "sha": "7b72ed6dcb92d5273e67c3c04eec7f6510739632",
            "filename": "test/parallel/test-signal-args.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-signal-args.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-signal-args.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-signal-args.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,9 +3,10 @@\n const common = require('../common');\n const assert = require('assert');\n \n-if (common.isWindows) {\n+if (common.isWindows)\n   common.skip('Sending signals with process.kill is not supported on Windows');\n-}\n+if (!common.isMainThread)\n+  common.skip('No signal handling available in Workers');\n \n process.once('SIGINT', common.mustCall((signal) => {\n   assert.strictEqual(signal, 'SIGINT');"
        },
        {
            "sha": "05ec4e7f73faf5d179e245208a36fd08cebe2da4",
            "filename": "test/parallel/test-signal-handler.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-signal-handler.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-signal-handler.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-signal-handler.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -25,6 +25,8 @@ const common = require('../common');\n \n if (common.isWindows)\n   common.skip('SIGUSR1 and SIGHUP signals are not supported');\n+if (!common.isMainThread)\n+  common.skip('Signal handling in Workers is not supported');\n \n console.log(`process.pid: ${process.pid}`);\n "
        },
        {
            "sha": "d32c5f0ba9c2e7927d8057ba7a224ddb9722917c",
            "filename": "test/parallel/test-stdio-pipe-access.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-stdio-pipe-access.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-stdio-pipe-access.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stdio-pipe-access.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,5 +1,7 @@\n 'use strict';\n-require('../common');\n+const common = require('../common');\n+if (!common.isMainThread)\n+  common.skip('Workers donâ€™t have process-like stdio');\n \n // Test if Node handles acessing process.stdin if it is a redirected\n // pipe without deadlocking"
        },
        {
            "sha": "60f16b5cb2f6dfd1043288ca36dd3151ef364ed6",
            "filename": "test/parallel/test-stdio-pipe-redirect.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-stdio-pipe-redirect.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-stdio-pipe-redirect.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stdio-pipe-redirect.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1,5 +1,7 @@\n 'use strict';\n-require('../common');\n+const common = require('../common');\n+if (!common.isMainThread)\n+  common.skip('Workers donâ€™t have process-like stdio');\n \n // Test if Node handles redirecting one child process stdout to another\n // process stdin without crashing."
        },
        {
            "sha": "00efce9bcbc8d32f7f755de53bc9277a66027b28",
            "filename": "test/parallel/test-timers-immediate-unref-nested-once.js",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-timers-immediate-unref-nested-once.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-timers-immediate-unref-nested-once.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-timers-immediate-unref-nested-once.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -0,0 +1,9 @@\n+'use strict';\n+\n+const common = require('../common');\n+\n+// This immediate should not execute as it was unrefed\n+// and nothing else is keeping the event loop alive\n+setImmediate(() => {\n+  setImmediate(common.mustNotCall()).unref();\n+});"
        },
        {
            "sha": "369894fcdebbaeb5d06a0e9b221aba52c5787120",
            "filename": "test/parallel/test-timers-immediate-unref-simple.js",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-timers-immediate-unref-simple.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-timers-immediate-unref-simple.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-timers-immediate-unref-simple.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -2,6 +2,11 @@\n \n const common = require('../common');\n \n+if (!common.isMainThread) {\n+  // Note that test-timers-immediate-unref-nested-once works instead.\n+  common.skip('Worker bootstrapping works differently -> different timing');\n+}\n+\n // This immediate should not execute as it was unrefed\n // and nothing else is keeping the event loop alive\n setImmediate(common.mustNotCall()).unref();"
        },
        {
            "sha": "585d4acd18e6d8f24fb186e6c9e12b7f70bc759c",
            "filename": "test/parallel/test-trace-events-all.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-all.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-all.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-all.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,9 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';"
        },
        {
            "sha": "5dd4c623c022bba8f62cc97c17fb58e1454fc0ef",
            "filename": "test/parallel/test-trace-events-api.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-api.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-api.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-api.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,8 @@ const common = require('../common');\n \n if (!common.hasTracing)\n   common.skip('missing trace events');\n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n \n const assert = require('assert');\n const cp = require('child_process');"
        },
        {
            "sha": "9dd71eda4c6d7345dd1a3a7da54e7f2d5b0ef80d",
            "filename": "test/parallel/test-trace-events-async-hooks.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-async-hooks.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-async-hooks.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-async-hooks.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,9 @@ const cp = require('child_process');\n const fs = require('fs');\n const util = require('util');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';"
        },
        {
            "sha": "f50c1321840980ff458b73e2f0e8c5bbaffbb2f7",
            "filename": "test/parallel/test-trace-events-binding.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-binding.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-binding.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-binding.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,9 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const CODE = `\n   process.binding(\"trace_events\").emit(\n     'b'.charCodeAt(0), 'custom',"
        },
        {
            "sha": "c0f8a49c855b923e4ccff4cc3754a8ea9fedf069",
            "filename": "test/parallel/test-trace-events-bootstrap.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-bootstrap.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-bootstrap.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-bootstrap.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -6,6 +6,9 @@ const path = require('path');\n const fs = require('fs');\n const tmpdir = require('../common/tmpdir');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const names = [\n   'environment',\n   'nodeStart',"
        },
        {
            "sha": "d5aff4e1361ce69108fecffd2cecb7c0696ddbf2",
            "filename": "test/parallel/test-trace-events-category-used.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-category-used.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-category-used.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-category-used.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -3,6 +3,9 @@ const common = require('../common');\n const assert = require('assert');\n const cp = require('child_process');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const CODE = `console.log(\n   process.binding(\"trace_events\").categoryGroupEnabled(\"custom\")\n );`;"
        },
        {
            "sha": "c8098a43979bb4a3453750725ffd8506464a2460",
            "filename": "test/parallel/test-trace-events-file-pattern.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-file-pattern.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-file-pattern.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-file-pattern.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -5,6 +5,9 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n tmpdir.refresh();\n process.chdir(tmpdir.path);\n "
        },
        {
            "sha": "491679c9c03f226f649507f87999130e47581ddd",
            "filename": "test/parallel/test-trace-events-fs-sync.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-fs-sync.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-fs-sync.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-fs-sync.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,9 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const tests = new Array();\n const traceFile = 'node_trace.1.log';\n "
        },
        {
            "sha": "440aa00a9c216c98af112de9dbcc85a755a9e534",
            "filename": "test/parallel/test-trace-events-metadata.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-metadata.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-metadata.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-metadata.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,9 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';"
        },
        {
            "sha": "e6beea3b9753551c1e518c15b0c78b39fd08f567",
            "filename": "test/parallel/test-trace-events-none.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-none.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-none.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-none.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,9 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';"
        },
        {
            "sha": "8ca5a41eac230e7695b2750c4499c06a7e9c58cb",
            "filename": "test/parallel/test-trace-events-perf.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-perf.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-perf.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-perf.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -6,6 +6,9 @@ const path = require('path');\n const fs = require('fs');\n const tmpdir = require('../common/tmpdir');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n if (process.argv[2] === 'child') {\n   const { performance } = require('perf_hooks');\n "
        },
        {
            "sha": "aeb9fc19c2982d157a50ef0bfe23910586f8247b",
            "filename": "test/parallel/test-trace-events-process-exit.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-process-exit.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-process-exit.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-process-exit.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,9 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const tmpdir = require('../common/tmpdir');\n \n const FILE_NAME = 'node_trace.1.log';"
        },
        {
            "sha": "325789e96865a846a4bed0a036b9e0ee0906bce5",
            "filename": "test/parallel/test-trace-events-v8.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-v8.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-v8.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-v8.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,9 @@ const assert = require('assert');\n const cp = require('child_process');\n const fs = require('fs');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const CODE =\n   'setTimeout(() => { for (var i = 0; i < 100000; i++) { \"test\" + i } }, 1)';\n const FILE_NAME = 'node_trace.1.log';"
        },
        {
            "sha": "45724e3e4c88dc56a401acc06ac762e5ba7384a8",
            "filename": "test/parallel/test-trace-events-vm.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-vm.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fparallel%2Ftest-trace-events-vm.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-trace-events-vm.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -6,6 +6,9 @@ const path = require('path');\n const fs = require('fs');\n const tmpdir = require('../common/tmpdir');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const names = [\n   'ContextifyScript::New',\n   'RunInThisContext',"
        },
        {
            "sha": "c16624a79e6c833850ea740389824d167a3f87ac",
            "filename": "test/sequential/test-async-wrap-getasyncid.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-async-wrap-getasyncid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-async-wrap-getasyncid.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -39,6 +39,8 @@ common.crashOnUnhandledRejection();\n     delete providers.STREAMPIPE;\n     delete providers.MESSAGEPORT;\n     delete providers.WORKER;\n+    if (!common.isMainThread)\n+      delete providers.INSPECTORJSBINDING;\n \n     const objKeys = Object.keys(providers);\n     if (objKeys.length > 0)\n@@ -281,7 +283,8 @@ if (common.hasCrypto) { // eslint-disable-line node-core/crypto-check\n   testInitialized(req, 'SendWrap');\n }\n \n-if (process.config.variables.v8_enable_inspector !== 0) {\n+if (process.config.variables.v8_enable_inspector !== 0 &&\n+    common.isMainThread) {\n   const binding = process.binding('inspector');\n   const handle = new binding.Connection(() => {});\n   testInitialized(handle, 'Connection');"
        },
        {
            "sha": "07deb1db0fe377c8cb2da2095373151f0adc7911",
            "filename": "test/sequential/test-buffer-creation-regression.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-buffer-creation-regression.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-buffer-creation-regression.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-buffer-creation-regression.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -30,7 +30,6 @@ try {\n } catch (e) {\n   if (e instanceof RangeError && acceptableOOMErrors.includes(e.message))\n     common.skip(`Unable to allocate ${size} bytes for ArrayBuffer`);\n-\n   throw e;\n }\n "
        },
        {
            "sha": "1326e62bc10da48ac7f9a7bd86efc1a990e648cf",
            "filename": "test/sequential/test-fs-watch.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-fs-watch.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-fs-watch.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-fs-watch.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -28,6 +28,9 @@ const path = require('path');\n \n const tmpdir = require('../common/tmpdir');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n const expectFilePath = common.isWindows ||\n                        common.isLinux ||\n                        common.isOSX ||"
        },
        {
            "sha": "1b1b09ee833191636dd5da399e2353bdd8f70d30",
            "filename": "test/sequential/test-init.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-init.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-init.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-init.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -25,6 +25,9 @@ const assert = require('assert');\n const child = require('child_process');\n const fixtures = require('../common/fixtures');\n \n+if (!common.isMainThread)\n+  common.skip('process.chdir is not available in Workers');\n+\n if (process.env.TEST_INIT) {\n   return process.stdout.write('Loaded successfully!');\n }"
        },
        {
            "sha": "46cb922402f3605b9263ac5778bcd833d6d6ba01",
            "filename": "test/sequential/test-inspector-overwrite-config.js",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-inspector-overwrite-config.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-inspector-overwrite-config.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-inspector-overwrite-config.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -13,6 +13,10 @@\n \n const common = require('../common');\n const assert = require('assert');\n+\n+if (!common.isMainThread)\n+  common.skip('--require does not work with Workers');\n+\n const inspector = require('inspector');\n const msg = 'Test inspector logging';\n let asserted = false;"
        },
        {
            "sha": "fdadb0be14ae5d1a6ce41a4052553211d891c9f6",
            "filename": "test/sequential/test-performance.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-performance.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/test%2Fsequential%2Ftest-performance.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fsequential%2Ftest-performance.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -4,6 +4,9 @@ const common = require('../common');\n const assert = require('assert');\n const { performance } = require('perf_hooks');\n \n+if (!common.isMainThread)\n+  common.skip('bootstrapping workers works differently');\n+\n assert(performance);\n assert(performance.nodeTiming);\n assert.strictEqual(typeof performance.timeOrigin, 'number');"
        },
        {
            "sha": "a9dd773ecf304f378aafc7f74b25e0e8b72d2eed",
            "filename": "tools/run-worker.js",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/tools%2Frun-worker.js",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/tools%2Frun-worker.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Frun-worker.js?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -0,0 +1,11 @@\n+'use strict';\n+if (typeof require === 'undefined') {\n+  console.log('1..0 # Skipped: Not being run as CommonJS');\n+  process.exit(0);\n+}\n+\n+const path = require('path');\n+const { Worker } = require('worker');\n+\n+new Worker(path.resolve(process.cwd(), process.argv[2]))\n+  .on('exit', (code) => process.exitCode = code);"
        },
        {
            "sha": "27a27224389e415c8de0e2a13550e4a7753d06df",
            "filename": "tools/test.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/nodejs/node/blob/229dca3dee552f448dc9026237625ed58e8acfdc/tools%2Ftest.py",
            "raw_url": "https://github.com/nodejs/node/raw/229dca3dee552f448dc9026237625ed58e8acfdc/tools%2Ftest.py",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/tools%2Ftest.py?ref=229dca3dee552f448dc9026237625ed58e8acfdc",
            "patch": "@@ -1375,6 +1375,8 @@ def BuildOptions():\n       help=\"Expect test cases to fail\", default=False, action=\"store_true\")\n   result.add_option(\"--valgrind\", help=\"Run tests through valgrind\",\n       default=False, action=\"store_true\")\n+  result.add_option(\"--worker\", help=\"Run parallel tests inside a worker context\",\n+      default=False, action=\"store_true\")\n   result.add_option(\"--check-deopts\", help=\"Check tests for permanent deoptimizations\",\n       default=False, action=\"store_true\")\n   result.add_option(\"--cat\", help=\"Print the source of the tests\",\n@@ -1617,6 +1619,11 @@ def Main():\n     options.node_args.append(\"--always-opt\")\n     options.progress = \"deopts\"\n \n+  if options.worker:\n+    run_worker = join(workspace, \"tools\", \"run-worker.js\")\n+    options.node_args.append('--experimental-worker')\n+    options.node_args.append(run_worker)\n+\n   shell = abspath(options.shell)\n   buildspace = dirname(shell)\n "
        }
    ],
    "stats": {
        "total": 309,
        "additions": 273,
        "deletions": 36
    }
}