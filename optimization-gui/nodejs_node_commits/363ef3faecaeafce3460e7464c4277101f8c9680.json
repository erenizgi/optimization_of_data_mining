{
    "author": "addaleax",
    "message": "src: remove main_isolate\n\nPR-URL: https://github.com/nodejs/node/pull/25823\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>",
    "sha": "363ef3faecaeafce3460e7464c4277101f8c9680",
    "files": [
        {
            "sha": "e1350ef4f1e7a636cbd19c0e17d3e8f850252fa8",
            "filename": "src/node.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/nodejs/node/blob/363ef3faecaeafce3460e7464c4277101f8c9680/src%2Fnode.cc",
            "raw_url": "https://github.com/nodejs/node/raw/363ef3faecaeafce3460e7464c4277101f8c9680/src%2Fnode.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode.cc?ref=363ef3faecaeafce3460e7464c4277101f8c9680",
            "patch": "@@ -134,11 +134,6 @@ using v8::V8;\n using v8::Value;\n \n namespace per_process {\n-// TODO(joyeecheung): these are no longer necessary. Remove them.\n-// See: https://github.com/nodejs/node/pull/25302#discussion_r244924196\n-// Isolate on the main thread\n-static Mutex main_isolate_mutex;\n-static Isolate* main_isolate;\n \n // node_revert.h\n // Bit flag used to track security reverts.\n@@ -851,12 +846,6 @@ inline int Start(uv_loop_t* event_loop,\n     UNREACHABLE();\n   }\n \n-  {\n-    Mutex::ScopedLock scoped_lock(per_process::main_isolate_mutex);\n-    CHECK_NULL(per_process::main_isolate);\n-    per_process::main_isolate = isolate;\n-  }\n-\n   int exit_code;\n   {\n     Locker locker(isolate);\n@@ -877,12 +866,6 @@ inline int Start(uv_loop_t* event_loop,\n         Start(isolate, isolate_data.get(), args, exec_args);\n   }\n \n-  {\n-    Mutex::ScopedLock scoped_lock(per_process::main_isolate_mutex);\n-    CHECK_EQ(per_process::main_isolate, isolate);\n-    per_process::main_isolate = nullptr;\n-  }\n-\n   isolate->Dispose();\n   per_process::v8_platform.Platform()->UnregisterIsolate(isolate);\n "
        }
    ],
    "stats": {
        "total": 17,
        "additions": 0,
        "deletions": 17
    }
}