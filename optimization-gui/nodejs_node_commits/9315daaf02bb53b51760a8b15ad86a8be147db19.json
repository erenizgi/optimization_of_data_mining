{
    "author": "tniessen",
    "message": "crypto: fix key handle extraction\n\nPR-URL: https://github.com/nodejs/node/pull/25562\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "9315daaf02bb53b51760a8b15ad86a8be147db19",
    "files": [
        {
            "sha": "ecd747d947516f28d01dbf26764e27beec1389fd",
            "filename": "lib/internal/crypto/keys.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/9315daaf02bb53b51760a8b15ad86a8be147db19/lib%2Finternal%2Fcrypto%2Fkeys.js",
            "raw_url": "https://github.com/nodejs/node/raw/9315daaf02bb53b51760a8b15ad86a8be147db19/lib%2Finternal%2Fcrypto%2Fkeys.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fcrypto%2Fkeys.js?ref=9315daaf02bb53b51760a8b15ad86a8be147db19",
            "patch": "@@ -215,7 +215,7 @@ function parsePrivateKeyEncoding(enc, keyType, objName) {\n \n function getKeyObjectHandle(key, isPublic, allowKeyObject) {\n   if (!allowKeyObject) {\n-    return new ERR_INVALID_ARG_TYPE(\n+    throw new ERR_INVALID_ARG_TYPE(\n       'key',\n       ['string', 'Buffer', 'TypedArray', 'DataView'],\n       key"
        },
        {
            "sha": "d4ec93fbbfdd663c1eb5f56928ce2ad57f44a686",
            "filename": "test/parallel/test-crypto-key-objects.js",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/nodejs/node/blob/9315daaf02bb53b51760a8b15ad86a8be147db19/test%2Fparallel%2Ftest-crypto-key-objects.js",
            "raw_url": "https://github.com/nodejs/node/raw/9315daaf02bb53b51760a8b15ad86a8be147db19/test%2Fparallel%2Ftest-crypto-key-objects.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-crypto-key-objects.js?ref=9315daaf02bb53b51760a8b15ad86a8be147db19",
            "patch": "@@ -58,6 +58,17 @@ const privatePem = fixtures.readSync('test_rsa_privkey.pem', 'ascii');\n   assert(plaintext.equals(deciphered));\n }\n \n+{\n+  // Passing an existing key object should throw.\n+  const publicKey = createPublicKey(publicPem);\n+  common.expectsError(() => createPublicKey(publicKey), {\n+    type: TypeError,\n+    code: 'ERR_INVALID_ARG_TYPE',\n+    message: 'The \"key\" argument must be one of type string, Buffer, ' +\n+             'TypedArray, or DataView. Received type object'\n+  });\n+}\n+\n {\n   const publicKey = createPublicKey(publicPem);\n   assert.strictEqual(publicKey.type, 'public');"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 12,
        "deletions": 1
    }
}