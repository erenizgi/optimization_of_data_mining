{
    "author": "joyeecheung",
    "message": "lib: move process prototype manipulation into setupProcessObject\n\nSince no operation is requiring process to be an EventEmitter before\nsetupProcessObject is called, it's safe to set up the prototype chain\nin setupProcessObject and make the main code path more readable.\n\nPR-URL: https://github.com/nodejs/node/pull/24089\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "56ce6f191dda2ee8539657e3746603bb84958a21",
    "files": [
        {
            "sha": "d95f1aa2939a767b9bc3baff17098ed8f089ccb3",
            "filename": "lib/internal/bootstrap/node.js",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/nodejs/node/blob/56ce6f191dda2ee8539657e3746603bb84958a21/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "raw_url": "https://github.com/nodejs/node/raw/56ce6f191dda2ee8539657e3746603bb84958a21/lib%2Finternal%2Fbootstrap%2Fnode.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Fbootstrap%2Fnode.js?ref=56ce6f191dda2ee8539657e3746603bb84958a21",
            "patch": "@@ -30,13 +30,6 @@\n   const isMainThread = internalBinding('worker').threadId === 0;\n \n   function startup() {\n-    const EventEmitter = NativeModule.require('events');\n-\n-    const origProcProto = Object.getPrototypeOf(process);\n-    Object.setPrototypeOf(origProcProto, EventEmitter.prototype);\n-\n-    EventEmitter.call(process);\n-\n     setupTraceCategoryState();\n \n     setupProcessObject();\n@@ -378,6 +371,11 @@\n   }\n \n   function setupProcessObject() {\n+    const EventEmitter = NativeModule.require('events');\n+    const origProcProto = Object.getPrototypeOf(process);\n+    Object.setPrototypeOf(origProcProto, EventEmitter.prototype);\n+    EventEmitter.call(process);\n+\n     _setupProcessObject(pushValueToArray);\n \n     function pushValueToArray() {"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 5,
        "deletions": 7
    }
}