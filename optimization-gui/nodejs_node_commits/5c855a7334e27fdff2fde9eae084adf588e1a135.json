{
    "author": "danbev",
    "message": "src: make req_wrap a unique_ptr in AfterConnect\n\nPR-URL: https://github.com/nodejs/node/pull/23115\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: MichaÃ«l Zasso <targos@protonmail.com>\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Joyee Cheung <joyeec9h3@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "5c855a7334e27fdff2fde9eae084adf588e1a135",
    "files": [
        {
            "sha": "db239f9becdb533c495905e5a4a4b717debc299d",
            "filename": "src/connection_wrap.cc",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/5c855a7334e27fdff2fde9eae084adf588e1a135/src%2Fconnection_wrap.cc",
            "raw_url": "https://github.com/nodejs/node/raw/5c855a7334e27fdff2fde9eae084adf588e1a135/src%2Fconnection_wrap.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fconnection_wrap.cc?ref=5c855a7334e27fdff2fde9eae084adf588e1a135",
            "patch": "@@ -77,7 +77,8 @@ void ConnectionWrap<WrapType, UVType>::OnConnection(uv_stream_t* handle,\n template <typename WrapType, typename UVType>\n void ConnectionWrap<WrapType, UVType>::AfterConnect(uv_connect_t* req,\n                                                     int status) {\n-  ConnectWrap* req_wrap = static_cast<ConnectWrap*>(req->data);\n+  std::unique_ptr<ConnectWrap> req_wrap\n+    (static_cast<ConnectWrap*>(req->data));\n   CHECK_NOT_NULL(req_wrap);\n   WrapType* wrap = static_cast<WrapType*>(req->handle->data);\n   CHECK_EQ(req_wrap->env(), wrap->env());\n@@ -108,8 +109,6 @@ void ConnectionWrap<WrapType, UVType>::AfterConnect(uv_connect_t* req,\n   };\n \n   req_wrap->MakeCallback(env->oncomplete_string(), arraysize(argv), argv);\n-\n-  delete req_wrap;\n }\n \n template ConnectionWrap<PipeWrap, uv_pipe_t>::ConnectionWrap("
        }
    ],
    "stats": {
        "total": 5,
        "additions": 2,
        "deletions": 3
    }
}