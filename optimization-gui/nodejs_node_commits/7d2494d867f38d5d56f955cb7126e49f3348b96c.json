{
    "author": "lrdcasimir",
    "message": "test: increase coverage of internal/stream/end-of-stream\n\nThis change adds test cases to call the function returned by\nend-of-stream and asserts that callbacks are not called when\nthe stream is ended, or prematurely closed.\n\nPR-URL: https://github.com/nodejs/node/pull/23751\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "7d2494d867f38d5d56f955cb7126e49f3348b96c",
    "files": [
        {
            "sha": "fe87f246327a3aa8daf4116a498ef0b57da21d29",
            "filename": "test/parallel/test-stream-finished.js",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/nodejs/node/blob/7d2494d867f38d5d56f955cb7126e49f3348b96c/test%2Fparallel%2Ftest-stream-finished.js",
            "raw_url": "https://github.com/nodejs/node/raw/7d2494d867f38d5d56f955cb7126e49f3348b96c/test%2Fparallel%2Ftest-stream-finished.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-stream-finished.js?ref=7d2494d867f38d5d56f955cb7126e49f3348b96c",
            "patch": "@@ -153,3 +153,25 @@ const { promisify } = require('util');\n   rs.push(null);\n   rs.resume();\n }\n+\n+// Test that calling returned function removes listeners\n+{\n+  const ws = new Writable({\n+    write(data, env, cb) {\n+      cb();\n+    }\n+  });\n+  const removeListener = finished(ws, common.mustNotCall());\n+  removeListener();\n+  ws.end();\n+}\n+\n+{\n+  const rs = new Readable();\n+  const removeListeners = finished(rs, common.mustNotCall());\n+  removeListeners();\n+\n+  rs.emit('close');\n+  rs.push(null);\n+  rs.resume();\n+}"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 22,
        "deletions": 0
    }
}