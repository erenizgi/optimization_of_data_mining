{
    "author": "addaleax",
    "message": "src: remove `MarkIndependent()` calls\n\nThe method has been deprecated in upstream V8, with messaging\nindicating that it is the default for handles to be independent\nnow anyway.\n\nPR-URL: https://github.com/nodejs/node/pull/20108\nRefs: https://github.com/v8/v8/commit/71ad48fb8f214e80518ba0419796e4c571351255\nReviewed-By: Anatoli Papirovski <apapirovski@mac.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>",
    "sha": "1f3fbd43b7e73e16cb383bda36663517bf20540b",
    "files": [
        {
            "sha": "5ff211f473b86beb27d73fc86225a635ed826375",
            "filename": "src/base_object-inl.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fbase_object-inl.h",
            "raw_url": "https://github.com/nodejs/node/raw/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fbase_object-inl.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fbase_object-inl.h?ref=1f3fbd43b7e73e16cb383bda36663517bf20540b",
            "patch": "@@ -70,7 +70,6 @@ inline void BaseObject::MakeWeak(Type* ptr) {\n   v8::Local<v8::Object> handle = object();\n   CHECK_GT(handle->InternalFieldCount(), 0);\n   Wrap(handle, ptr);\n-  persistent_handle_.MarkIndependent();\n   persistent_handle_.SetWeak<Type>(ptr, WeakCallback<Type>,\n                                    v8::WeakCallbackType::kParameter);\n }"
        },
        {
            "sha": "ea7ddba77dc2e2752abaf9ab5beacbaa30cdc21e",
            "filename": "src/node_api.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/nodejs/node/blob/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fnode_api.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fnode_api.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_api.cc?ref=1f3fbd43b7e73e16cb383bda36663517bf20540b",
            "patch": "@@ -387,7 +387,6 @@ class Reference : private Finalizer {\n     if (initial_refcount == 0) {\n       _persistent.SetWeak(\n           this, FinalizeCallback, v8::WeakCallbackType::kParameter);\n-      _persistent.MarkIndependent();\n     }\n   }\n \n@@ -431,7 +430,6 @@ class Reference : private Finalizer {\n     if (--_refcount == 0) {\n       _persistent.SetWeak(\n           this, FinalizeCallback, v8::WeakCallbackType::kParameter);\n-      _persistent.MarkIndependent();\n     }\n \n     return _refcount;"
        },
        {
            "sha": "38b473b8cedb555b25c35f11b6f359881f749057",
            "filename": "src/node_buffer.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fnode_buffer.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fnode_buffer.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_buffer.cc?ref=1f3fbd43b7e73e16cb383bda36663517bf20540b",
            "patch": "@@ -144,7 +144,6 @@ CallbackInfo::CallbackInfo(Isolate* isolate,\n \n   persistent_.SetWeak(this, WeakCallback, v8::WeakCallbackType::kParameter);\n   persistent_.SetWrapperClassId(BUFFER_ID);\n-  persistent_.MarkIndependent();\n   isolate->AdjustAmountOfExternalAllocatedMemory(sizeof(*this));\n }\n "
        },
        {
            "sha": "68251004d57a99fe31b68c1e802e673bd3ef8da4",
            "filename": "src/node_contextify.cc",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fnode_contextify.cc",
            "raw_url": "https://github.com/nodejs/node/raw/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fnode_contextify.cc",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_contextify.cc?ref=1f3fbd43b7e73e16cb383bda36663517bf20540b",
            "patch": "@@ -104,7 +104,6 @@ ContextifyContext::ContextifyContext(\n   if (context_.IsEmpty())\n     return;\n   context_.SetWeak(this, WeakCallback, v8::WeakCallbackType::kParameter);\n-  context_.MarkIndependent();\n }\n \n "
        },
        {
            "sha": "b8ed2f99135a65649bd5262f9afe157683679800",
            "filename": "src/node_object_wrap.h",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/nodejs/node/blob/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fnode_object_wrap.h",
            "raw_url": "https://github.com/nodejs/node/raw/1f3fbd43b7e73e16cb383bda36663517bf20540b/src%2Fnode_object_wrap.h",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/src%2Fnode_object_wrap.h?ref=1f3fbd43b7e73e16cb383bda36663517bf20540b",
            "patch": "@@ -83,7 +83,6 @@ class ObjectWrap {\n \n   inline void MakeWeak(void) {\n     persistent().SetWeak(this, WeakCallback, v8::WeakCallbackType::kParameter);\n-    persistent().MarkIndependent();\n   }\n \n   /* Ref() marks the object as being attached to an event loop."
        }
    ],
    "stats": {
        "total": 6,
        "additions": 0,
        "deletions": 6
    }
}