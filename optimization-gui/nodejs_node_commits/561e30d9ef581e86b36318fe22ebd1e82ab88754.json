{
    "author": "sam-github",
    "message": "test: use smaller keys for a faster keygen test\n\nOn my machine, this brings test execution time down from about 2\nseconds to 0.2 seconds.\n\nPR-URL: https://github.com/nodejs/node/pull/23430\nReviewed-By: Refael Ackermann <refack@gmail.com>\nReviewed-By: Sakthipriyan Vairamani <thechargingvolcano@gmail.com>\nReviewed-By: Tobias Nie√üen <tniessen@tnie.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>",
    "sha": "561e30d9ef581e86b36318fe22ebd1e82ab88754",
    "files": [
        {
            "sha": "896deaf90b1bdafcc7d5c22e72e65cd4ac59b0f1",
            "filename": "test/parallel/test-crypto-keygen.js",
            "status": "modified",
            "additions": 18,
            "deletions": 18,
            "changes": 36,
            "blob_url": "https://github.com/nodejs/node/blob/561e30d9ef581e86b36318fe22ebd1e82ab88754/test%2Fparallel%2Ftest-crypto-keygen.js",
            "raw_url": "https://github.com/nodejs/node/raw/561e30d9ef581e86b36318fe22ebd1e82ab88754/test%2Fparallel%2Ftest-crypto-keygen.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-crypto-keygen.js?ref=561e30d9ef581e86b36318fe22ebd1e82ab88754",
            "patch": "@@ -87,7 +87,7 @@ function convertDERToPEM(label, der) {\n   // with a relatively small key.\n   const ret = generateKeyPairSync('rsa', {\n     publicExponent: 0x10001,\n-    modulusLength: 1024,\n+    modulusLength: 512,\n     publicKeyEncoding: {\n       type: 'pkcs1',\n       format: 'pem'\n@@ -103,10 +103,10 @@ function convertDERToPEM(label, der) {\n \n   assert.strictEqual(typeof publicKey, 'string');\n   assert(pkcs1PubExp.test(publicKey));\n-  assertApproximateSize(publicKey, 272);\n+  assertApproximateSize(publicKey, 162);\n   assert.strictEqual(typeof privateKey, 'string');\n   assert(pkcs8Exp.test(privateKey));\n-  assertApproximateSize(privateKey, 912);\n+  assertApproximateSize(privateKey, 512);\n \n   testEncryptDecrypt(publicKey, privateKey);\n   testSignVerify(publicKey, privateKey);\n@@ -116,7 +116,7 @@ function convertDERToPEM(label, der) {\n   // Test async RSA key generation.\n   generateKeyPair('rsa', {\n     publicExponent: 0x10001,\n-    modulusLength: 4096,\n+    modulusLength: 512,\n     publicKeyEncoding: {\n       type: 'pkcs1',\n       format: 'der'\n@@ -132,11 +132,11 @@ function convertDERToPEM(label, der) {\n     // will still need to convert it to PEM for testing.\n     assert(Buffer.isBuffer(publicKeyDER));\n     const publicKey = convertDERToPEM('RSA PUBLIC KEY', publicKeyDER);\n-    assertApproximateSize(publicKey, 720);\n+    assertApproximateSize(publicKey, 180);\n \n     assert.strictEqual(typeof privateKey, 'string');\n     assert(pkcs1PrivExp.test(privateKey));\n-    assertApproximateSize(privateKey, 3272);\n+    assertApproximateSize(privateKey, 512);\n \n     testEncryptDecrypt(publicKey, privateKey);\n     testSignVerify(publicKey, privateKey);\n@@ -145,7 +145,7 @@ function convertDERToPEM(label, der) {\n   // Now do the same with an encrypted private key.\n   generateKeyPair('rsa', {\n     publicExponent: 0x10001,\n-    modulusLength: 4096,\n+    modulusLength: 512,\n     publicKeyEncoding: {\n       type: 'pkcs1',\n       format: 'der'\n@@ -163,7 +163,7 @@ function convertDERToPEM(label, der) {\n     // will still need to convert it to PEM for testing.\n     assert(Buffer.isBuffer(publicKeyDER));\n     const publicKey = convertDERToPEM('RSA PUBLIC KEY', publicKeyDER);\n-    assertApproximateSize(publicKey, 720);\n+    assertApproximateSize(publicKey, 180);\n \n     assert.strictEqual(typeof privateKey, 'string');\n     assert(pkcs1EncExp('AES-256-CBC').test(privateKey));\n@@ -182,7 +182,7 @@ function convertDERToPEM(label, der) {\n {\n   // Test async DSA key generation.\n   generateKeyPair('dsa', {\n-    modulusLength: 2048,\n+    modulusLength: 256,\n     divisorLength: 256,\n     publicKeyEncoding: {\n       type: 'spki',\n@@ -203,8 +203,8 @@ function convertDERToPEM(label, der) {\n     assert(Buffer.isBuffer(privateKeyDER));\n     const privateKey = convertDERToPEM('ENCRYPTED PRIVATE KEY', privateKeyDER);\n \n-    assertApproximateSize(publicKey, 1194);\n-    assertApproximateSize(privateKey, 1054);\n+    assertApproximateSize(publicKey, 440);\n+    assertApproximateSize(privateKey, 512);\n \n     // Since the private key is encrypted, signing shouldn't work anymore.\n     assert.throws(() => {\n@@ -279,7 +279,7 @@ function convertDERToPEM(label, der) {\n   // Test async elliptic curve key generation, e.g. for ECDSA, with an encrypted\n   // private key.\n   generateKeyPair('ec', {\n-    namedCurve: 'P-256',\n+    namedCurve: 'P-192',\n     paramEncoding: 'named',\n     publicKeyEncoding: {\n       type: 'spki',\n@@ -315,7 +315,7 @@ function convertDERToPEM(label, der) {\n   // Test the util.promisified API with async RSA key generation.\n   promisify(generateKeyPair)('rsa', {\n     publicExponent: 0x10001,\n-    modulusLength: 3072,\n+    modulusLength: 512,\n     publicKeyEncoding: {\n       type: 'pkcs1',\n       format: 'pem'\n@@ -328,15 +328,15 @@ function convertDERToPEM(label, der) {\n     const { publicKey, privateKey } = keys;\n     assert.strictEqual(typeof publicKey, 'string');\n     assert(pkcs1PubExp.test(publicKey));\n-    assertApproximateSize(publicKey, 600);\n+    assertApproximateSize(publicKey, 180);\n \n     assert.strictEqual(typeof privateKey, 'string');\n     assert(pkcs1PrivExp.test(privateKey));\n-    assertApproximateSize(privateKey, 2455);\n+    assertApproximateSize(privateKey, 512);\n \n     testEncryptDecrypt(publicKey, privateKey);\n     testSignVerify(publicKey, privateKey);\n-  })).catch(common.mustNotCall());\n+  }));\n }\n \n {\n@@ -545,7 +545,7 @@ function convertDERToPEM(label, der) {\n   // Test invalid callbacks.\n   for (const cb of [undefined, null, 0, {}]) {\n     common.expectsError(() => generateKeyPair('rsa', {\n-      modulusLength: 4096,\n+      modulusLength: 512,\n       publicKeyEncoding: { type: 'pkcs1', format: 'pem' },\n       privateKeyEncoding: { type: 'pkcs1', format: 'pem' }\n     }, cb), {\n@@ -627,7 +627,7 @@ function convertDERToPEM(label, der) {\n \n   // It should recognize both NIST and standard curve names.\n   generateKeyPair('ec', {\n-    namedCurve: 'P-256',\n+    namedCurve: 'P-192',\n     publicKeyEncoding: { type: 'spki', format: 'pem' },\n     privateKeyEncoding: { type: 'pkcs8', format: 'pem' }\n   }, common.mustCall((err, publicKey, privateKey) => {"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 18,
        "deletions": 18
    }
}