{
    "author": "BridgeAR",
    "message": "querystring: lazy loaded\n\nPR-URL: https://github.com/nodejs/node/pull/20567\nReviewed-By: Gus Caplan <me@gus.host>\nReviewed-By: Matteo Collina <matteo.collina@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Jeremiah Senkpiel <fishrock123@rocketmail.com>",
    "sha": "d0bb9b12051fa3540387a4c23d1f004b9d9a5a01",
    "files": [
        {
            "sha": "ffd8f10edaeee898a8d7b5b1cf4b43500c51d2cb",
            "filename": "lib/internal/url.js",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/d0bb9b12051fa3540387a4c23d1f004b9d9a5a01/lib%2Finternal%2Furl.js",
            "raw_url": "https://github.com/nodejs/node/raw/d0bb9b12051fa3540387a4c23d1f004b9d9a5a01/lib%2Finternal%2Furl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Furl.js?ref=d0bb9b12051fa3540387a4c23d1f004b9d9a5a01",
            "patch": "@@ -27,7 +27,9 @@ const {\n   CHAR_LOWERCASE_A,\n   CHAR_LOWERCASE_Z,\n } = require('internal/constants');\n-const querystring = require('querystring');\n+\n+// Lazy loaded for startup performance.\n+let querystring;\n \n const { platform } = process;\n const isWindows = platform === 'win32';\n@@ -771,8 +773,10 @@ function parseParams(qs) {\n       } else if (encodeCheck > 0) {\n         // eslint-disable-next-line no-extra-boolean-cast\n         if (!!isHexTable[code]) {\n-          if (++encodeCheck === 3)\n+          if (++encodeCheck === 3) {\n+            querystring = require('querystring');\n             encoded = true;\n+          }\n         } else {\n           encodeCheck = 0;\n         }"
        },
        {
            "sha": "c517ba7ab3dae0af0a7336a761a1697c7a1bb49b",
            "filename": "lib/url.js",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/d0bb9b12051fa3540387a4c23d1f004b9d9a5a01/lib%2Furl.js",
            "raw_url": "https://github.com/nodejs/node/raw/d0bb9b12051fa3540387a4c23d1f004b9d9a5a01/lib%2Furl.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Furl.js?ref=d0bb9b12051fa3540387a4c23d1f004b9d9a5a01",
            "patch": "@@ -94,7 +94,6 @@ const slashedProtocol = {\n   'file': true,\n   'file:': true\n };\n-const querystring = require('querystring');\n const {\n   CHAR_SPACE,\n   CHAR_TAB,\n@@ -133,6 +132,9 @@ const {\n   CHAR_AT,\n } = require('internal/constants');\n \n+// Lazy loaded for startup performance.\n+let querystring;\n+\n function urlParse(url, parseQueryString, slashesDenoteHost) {\n   if (url instanceof Url) return url;\n \n@@ -233,6 +235,7 @@ Url.prototype.parse = function parse(url, parseQueryString, slashesDenoteHost) {\n       if (simplePath[2]) {\n         this.search = simplePath[2];\n         if (parseQueryString) {\n+          if (querystring === undefined) querystring = require('querystring');\n           this.query = querystring.parse(this.search.slice(1));\n         } else {\n           this.query = this.search.slice(1);\n@@ -422,6 +425,7 @@ Url.prototype.parse = function parse(url, parseQueryString, slashesDenoteHost) {\n       this.query = rest.slice(questionIdx + 1, hashIdx);\n     }\n     if (parseQueryString) {\n+      if (querystring === undefined) querystring = require('querystring');\n       this.query = querystring.parse(this.query);\n     }\n   } else if (parseQueryString) {\n@@ -584,8 +588,10 @@ Url.prototype.format = function format() {\n     }\n   }\n \n-  if (this.query !== null && typeof this.query === 'object')\n+  if (this.query !== null && typeof this.query === 'object') {\n+    if (querystring === undefined) querystring = require('querystring');\n     query = querystring.stringify(this.query);\n+  }\n \n   var search = this.search || (query && ('?' + query)) || '';\n "
        }
    ],
    "stats": {
        "total": 18,
        "additions": 14,
        "deletions": 4
    }
}