{
    "author": "cjihrig",
    "message": "net: validate fds passed to Socket constructor\n\nThis commit validates the file descriptor passed to the TTY\nwrap's guessHandleType() function. Prior to this commit, a bad\nfile descriptor would trigger an abort in the binding layer.\n\nPR-URL: https://github.com/nodejs/node/pull/21429\nReviewed-By: Anna Henningsen <anna@addaleax.net>\nReviewed-By: Ben Noordhuis <info@bnoordhuis.nl>\nReviewed-By: Minwoo Jung <minwoo@nodesource.com>\nReviewed-By: Richard Lau <riclau@uk.ibm.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Santiago Gimeno <santiago.gimeno@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>",
    "sha": "d9e95d8982ee5b409b36f09c77feccbb1040095c",
    "files": [
        {
            "sha": "2f341f53a1b41f15216a4beb3f73ffe86634bc47",
            "filename": "lib/net.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/nodejs/node/blob/d9e95d8982ee5b409b36f09c77feccbb1040095c/lib%2Fnet.js",
            "raw_url": "https://github.com/nodejs/node/raw/d9e95d8982ee5b409b36f09c77feccbb1040095c/lib%2Fnet.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Fnet.js?ref=d9e95d8982ee5b409b36f09c77feccbb1040095c",
            "patch": "@@ -75,7 +75,7 @@ const {\n   ERR_SOCKET_BAD_PORT,\n   ERR_SOCKET_CLOSED\n } = errors.codes;\n-\n+const { validateInt32 } = require('internal/validators');\n const kLastWriteQueueSize = Symbol('lastWriteQueueSize');\n \n // Lazy loaded to improve startup performance.\n@@ -93,6 +93,7 @@ const {\n function noop() {}\n \n function createHandle(fd, is_server) {\n+  validateInt32(fd, 'fd', 0);\n   const type = TTYWrap.guessHandleType(fd);\n   if (type === 'PIPE') {\n     return new Pipe("
        },
        {
            "sha": "ec2e99deb8488002e0833009de1691558359ca4a",
            "filename": "test/parallel/test-net-socket-constructor.js",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/nodejs/node/blob/d9e95d8982ee5b409b36f09c77feccbb1040095c/test%2Fparallel%2Ftest-net-socket-constructor.js",
            "raw_url": "https://github.com/nodejs/node/raw/d9e95d8982ee5b409b36f09c77feccbb1040095c/test%2Fparallel%2Ftest-net-socket-constructor.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-net-socket-constructor.js?ref=d9e95d8982ee5b409b36f09c77feccbb1040095c",
            "patch": "@@ -4,6 +4,14 @@ const common = require('../common');\n const assert = require('assert');\n const net = require('net');\n \n+common.expectsError(() => {\n+  new net.Socket({ fd: -1 });\n+}, { code: 'ERR_OUT_OF_RANGE' });\n+\n+common.expectsError(() => {\n+  new net.Socket({ fd: 'foo' });\n+}, { code: 'ERR_INVALID_ARG_TYPE' });\n+\n function test(sock, readable, writable) {\n   let socket;\n   if (sock instanceof net.Socket) {"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 10,
        "deletions": 1
    }
}