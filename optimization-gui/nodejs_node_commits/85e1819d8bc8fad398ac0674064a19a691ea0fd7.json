{
    "author": "addaleax",
    "message": "lib: fix coverage reporting\n\nTaking the source code of a function and running it in another\ncontext does not play well with coverage instrumentation.\nFor now, do the simple thing and just write the source code as\na string literal.\n\nFixes: https://github.com/nodejs/node/issues/19912\nRefs: https://github.com/nodejs/node/pull/19524\n\nPR-URL: https://github.com/nodejs/node/pull/20035\nReviewed-By: Tiancheng \"Timothy\" Gu <timothygu99@gmail.com>\nReviewed-By: Trivikram Kamat <trivikr.dev@gmail.com>\nReviewed-By: James M Snell <jasnell@gmail.com>\nReviewed-By: Luigi Pinca <luigipinca@gmail.com>\nReviewed-By: Colin Ihrig <cjihrig@gmail.com>\nReviewed-By: Ruben Bridgewater <ruben@bridgewater.de>",
    "sha": "85e1819d8bc8fad398ac0674064a19a691ea0fd7",
    "files": [
        {
            "sha": "953b1ce0f577e5bbe6726c8275549c04bc7a29d2",
            "filename": "lib/internal/util.js",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/nodejs/node/blob/85e1819d8bc8fad398ac0674064a19a691ea0fd7/lib%2Finternal%2Futil.js",
            "raw_url": "https://github.com/nodejs/node/raw/85e1819d8bc8fad398ac0674064a19a691ea0fd7/lib%2Finternal%2Futil.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/lib%2Finternal%2Futil.js?ref=85e1819d8bc8fad398ac0674064a19a691ea0fd7",
            "patch": "@@ -390,17 +390,16 @@ function isInsideNodeModules() {\n     // Use `runInNewContext()` to get something tamper-proof and\n     // side-effect-free. Since this is currently only used for a deprecated API,\n     // the perf implications should be okay.\n-    getStructuredStack = runInNewContext('(' + function() {\n+    getStructuredStack = runInNewContext(`(function() {\n       Error.prepareStackTrace = function(err, trace) {\n         err.stack = trace;\n       };\n       Error.stackTraceLimit = Infinity;\n \n       return function structuredStack() {\n-        // eslint-disable-next-line no-restricted-syntax\n         return new Error().stack;\n       };\n-    } + ')()', {}, { filename: 'structured-stack' });\n+    })()`, {}, { filename: 'structured-stack' });\n   }\n \n   const stack = getStructuredStack();"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 2,
        "deletions": 3
    }
}