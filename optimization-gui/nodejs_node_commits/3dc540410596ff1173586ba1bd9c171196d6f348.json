{
    "author": "dsinecos",
    "message": "test: resolve process.setegid error on Ubuntu\n\nWhen the tests are run as root in Ubuntu, process.setegid is called with\n'nobody' as an argument. This throws an error in Ubuntu. This is because\nin Ubuntu the equivalent of 'nobody' group is named as 'nogroup'.\n\nThis commit sets egid to 'nobody' first and if it throws a `group id\ndoes not exist` error, it attempts to set egid to 'nogroup'. If it still\ncauses an error, the error is thrown.\n\nPR-URL: https://github.com/nodejs/node/pull/19757\nRefs: https://github.com/nodejs/node/issues/19594\nReviewed-By: Rich Trott <rtrott@gmail.com>\nReviewed-By: Daniel Bevenius <daniel.bevenius@gmail.com>\nReviewed-By: Gireesh Punathil <gpunathi@in.ibm.com>\nReviewed-By: James M Snell <jasnell@gmail.com>",
    "sha": "3dc540410596ff1173586ba1bd9c171196d6f348",
    "files": [
        {
            "sha": "adae58abebdfb73c529253c7b57bfd59f1c2a828",
            "filename": "test/parallel/test-process-geteuid-getegid.js",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/nodejs/node/blob/3dc540410596ff1173586ba1bd9c171196d6f348/test%2Fparallel%2Ftest-process-geteuid-getegid.js",
            "raw_url": "https://github.com/nodejs/node/raw/3dc540410596ff1173586ba1bd9c171196d6f348/test%2Fparallel%2Ftest-process-geteuid-getegid.js",
            "contents_url": "https://api.github.com/repos/nodejs/node/contents/test%2Fparallel%2Ftest-process-geteuid-getegid.js?ref=3dc540410596ff1173586ba1bd9c171196d6f348",
            "patch": "@@ -38,7 +38,15 @@ if (process.getuid() !== 0) {\n \n // If we are running as super user...\n const oldgid = process.getegid();\n-process.setegid('nobody');\n+try {\n+  process.setegid('nobody');\n+} catch (err) {\n+  if (err.message !== 'setegid group id does not exist') {\n+    throw err;\n+  } else {\n+    process.setegid('nogroup');\n+  }\n+}\n const newgid = process.getegid();\n assert.notStrictEqual(newgid, oldgid);\n "
        }
    ],
    "stats": {
        "total": 10,
        "additions": 9,
        "deletions": 1
    }
}