{
    "author": "aaugustin",
    "message": "Moved calls to addCleanup before assertions in admin_scripts tests, so that cleanup occurs even when tests fails.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17281 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ae0ce4373ff63fac22f4673928f2cf4378cb54e0",
    "files": [
        {
            "sha": "062e1a2c757d32cc4061f82b27c6b508dc84d1e1",
            "filename": "tests/regressiontests/admin_scripts/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/ae0ce4373ff63fac22f4673928f2cf4378cb54e0/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ae0ce4373ff63fac22f4673928f2cf4378cb54e0/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py?ref=ae0ce4373ff63fac22f4673928f2cf4378cb54e0",
            "patch": "@@ -1377,9 +1377,9 @@ def test_simple_project(self):\n         testproject_dir = os.path.join(test_dir, 'testproject')\n \n         out, err = self.run_django_admin(args)\n+        self.addCleanup(shutil.rmtree, testproject_dir)\n         self.assertNoOutput(err)\n         self.assertTrue(os.path.isdir(testproject_dir))\n-        self.addCleanup(shutil.rmtree, testproject_dir)\n \n         # running again..\n         out, err = self.run_django_admin(args)\n@@ -1392,10 +1392,10 @@ def test_simple_project_different_directory(self):\n         testproject_dir = os.path.join(test_dir, 'othertestproject')\n \n         out, err = self.run_django_admin(args)\n+        self.addCleanup(shutil.rmtree, testproject_dir)\n         self.assertNoOutput(err)\n         self.assertTrue(os.path.isdir(os.path.join(testproject_dir, 'testproject')))\n         self.assertTrue(os.path.exists(os.path.join(testproject_dir, 'testproject', 'manage.py')))\n-        self.addCleanup(shutil.rmtree, testproject_dir)\n \n         # running again..\n         out, err = self.run_django_admin(args)\n@@ -1409,9 +1409,9 @@ def test_custom_project_template(self):\n         testproject_dir = os.path.join(test_dir, 'customtestproject')\n \n         out, err = self.run_django_admin(args)\n+        self.addCleanup(shutil.rmtree, testproject_dir)\n         self.assertNoOutput(err)\n         self.assertTrue(os.path.isdir(testproject_dir))\n-        self.addCleanup(shutil.rmtree, testproject_dir)\n         self.assertTrue(os.path.exists(os.path.join(testproject_dir, 'additional_dir')))\n \n     def test_custom_project_template_from_tarball_by_path(self):\n@@ -1421,9 +1421,9 @@ def test_custom_project_template_from_tarball_by_path(self):\n         testproject_dir = os.path.join(test_dir, 'tarballtestproject')\n \n         out, err = self.run_django_admin(args)\n+        self.addCleanup(shutil.rmtree, testproject_dir)\n         self.assertNoOutput(err)\n         self.assertTrue(os.path.isdir(testproject_dir))\n-        self.addCleanup(shutil.rmtree, testproject_dir)\n         self.assertTrue(os.path.exists(os.path.join(testproject_dir, 'run.py')))\n \n     def test_custom_project_template_from_tarball_by_url(self):\n@@ -1435,7 +1435,7 @@ def test_custom_project_template_from_tarball_by_url(self):\n         testproject_dir = os.path.join(test_dir, 'urltestproject')\n \n         out, err = self.run_django_admin(args)\n+        self.addCleanup(shutil.rmtree, testproject_dir)\n         self.assertNoOutput(err)\n         self.assertTrue(os.path.isdir(testproject_dir))\n-        self.addCleanup(shutil.rmtree, testproject_dir)\n         self.assertTrue(os.path.exists(os.path.join(testproject_dir, 'run.py')))"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 5,
        "deletions": 5
    }
}