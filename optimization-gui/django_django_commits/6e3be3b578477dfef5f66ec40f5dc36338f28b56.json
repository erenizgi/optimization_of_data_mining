{
    "author": "alex",
    "message": "Converted Japanese localflavor doctests to unittests.  We have always been at war with doctests.  Thanks to Idan Gazit.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14946 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "6e3be3b578477dfef5f66ec40f5dc36338f28b56",
    "files": [
        {
            "sha": "1f8362a0920dd0faa3bf500dea8d60b4b8ce515f",
            "filename": "tests/regressiontests/forms/localflavor/jp.py",
            "status": "modified",
            "additions": 23,
            "deletions": 56,
            "changes": 79,
            "blob_url": "https://github.com/django/django/blob/6e3be3b578477dfef5f66ec40f5dc36338f28b56/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fjp.py",
            "raw_url": "https://github.com/django/django/raw/6e3be3b578477dfef5f66ec40f5dc36338f28b56/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fjp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fjp.py?ref=6e3be3b578477dfef5f66ec40f5dc36338f28b56",
            "patch": "@@ -1,60 +1,13 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ JP form fields.\n+from django.contrib.localflavor.jp.forms import (JPPostalCodeField,\n+    JPPrefectureSelect)\n \n-tests = r\"\"\"\n-# JPPostalCodeField ###############################################################\n+from utils import LocalFlavorTestCase\n \n-A form field that validates its input is a Japanese postcode.\n \n-Accepts 7 digits(with/out hyphen).\n->>> from django.contrib.localflavor.jp.forms import JPPostalCodeField\n->>> f = JPPostalCodeField()\n->>> f.clean('251-0032')\n-u'2510032'\n->>> f.clean('2510032')\n-u'2510032'\n->>> f.clean('2510-032')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format XXXXXXX or XXX-XXXX.']\n->>> f.clean('251a0032')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format XXXXXXX or XXX-XXXX.']\n->>> f.clean('a51-0032')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format XXXXXXX or XXX-XXXX.']\n->>> f.clean('25100321')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format XXXXXXX or XXX-XXXX.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n-\n->>> f = JPPostalCodeField(required=False)\n->>> f.clean('251-0032')\n-u'2510032'\n->>> f.clean('2510032')\n-u'2510032'\n->>> f.clean('2510-032')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format XXXXXXX or XXX-XXXX.']\n->>> f.clean('')\n-u''\n->>> f.clean(None)\n-u''\n-\n-# JPPrefectureSelect ###############################################################\n-\n-A Select widget that uses a list of Japanese prefectures as its choices.\n->>> from django.contrib.localflavor.jp.forms import JPPrefectureSelect\n->>> w = JPPrefectureSelect()\n->>> print w.render('prefecture', 'kanagawa')\n-<select name=\"prefecture\">\n+class JPLocalFlavorTests(LocalFlavorTestCase):\n+    def test_JPPrefectureSelect(self):\n+        f = JPPrefectureSelect()\n+        out = u'''<select name=\"prefecture\">\n <option value=\"hokkaido\">Hokkaido</option>\n <option value=\"aomori\">Aomori</option>\n <option value=\"iwate\">Iwate</option>\n@@ -102,5 +55,19 @@\n <option value=\"miyazaki\">Miyazaki</option>\n <option value=\"kagoshima\">Kagoshima</option>\n <option value=\"okinawa\">Okinawa</option>\n-</select>\n-\"\"\"\n+</select>'''\n+        self.assertEqual(f.render('prefecture', 'kanagawa'), out)\n+\n+    def test_JPPostalCodeField(self):\n+        error_format = [u'Enter a postal code in the format XXXXXXX or XXX-XXXX.']\n+        valid = {\n+                '251-0032': '2510032',\n+                '2510032': '2510032',\n+        }\n+        invalid = {\n+                '2510-032': error_format,\n+                '251a0032': error_format,\n+                'a51-0032': error_format,\n+                '25100321': error_format,\n+        }\n+        self.assertFieldOutput(JPPostalCodeField, valid, invalid)"
        },
        {
            "sha": "d0e754de21e583b9b5132f494dec93a3c5c2fc63",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/6e3be3b578477dfef5f66ec40f5dc36338f28b56/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/6e3be3b578477dfef5f66ec40f5dc36338f28b56/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=6e3be3b578477dfef5f66ec40f5dc36338f28b56",
            "patch": "@@ -1,6 +1,5 @@\n # -*- coding: utf-8 -*-\n from localflavor.cz import tests as localflavor_cz_tests\n-from localflavor.jp import tests as localflavor_jp_tests\n from localflavor.kw import tests as localflavor_kw_tests\n from localflavor.nl import tests as localflavor_nl_tests\n from localflavor.pl import tests as localflavor_pl_tests\n@@ -31,12 +30,12 @@\n from localflavor.il import ILLocalFlavorTests\n from localflavor.is_ import ISLocalFlavorTests\n from localflavor.it import ITLocalFlavorTests\n+from localflavor.jp import JPLocalFlavorTests\n from localflavor.tr import TRLocalFlavorTests\n \n \n __test__ = {\n     'localflavor_cz_tests': localflavor_cz_tests,\n-    'localflavor_jp_tests': localflavor_jp_tests,\n     'localflavor_kw_tests': localflavor_kw_tests,\n     'localflavor_nl_tests': localflavor_nl_tests,\n     'localflavor_pl_tests': localflavor_pl_tests,"
        },
        {
            "sha": "c1e0e37df97d7b1be4f00340c9943ef6c35de875",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/6e3be3b578477dfef5f66ec40f5dc36338f28b56/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/6e3be3b578477dfef5f66ec40f5dc36338f28b56/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=6e3be3b578477dfef5f66ec40f5dc36338f28b56",
            "patch": "@@ -31,5 +31,6 @@\n     ILLocalFlavorTests,\n     ISLocalFlavorTests,\n     ITLocalFlavorTests,\n+    JPLocalFlavorTests,\n     TRLocalFlavorTests,\n )"
        }
    ],
    "stats": {
        "total": 83,
        "additions": 25,
        "deletions": 58
    }
}