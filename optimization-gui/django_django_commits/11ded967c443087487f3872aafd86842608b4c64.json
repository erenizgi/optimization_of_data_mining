{
    "author": "ptone",
    "message": "Fixed #19498 -- refactored auth documentation\n\nThe auth doc was a single page which had grown unwieldy.\nThis refactor split and grouped the content into sub-topics.\nAdditional corrections and cleanups were made along the way.",
    "sha": "11ded967c443087487f3872aafd86842608b4c64",
    "files": [
        {
            "sha": "220645947d1624faf28dc283cd57a267f8af92d5",
            "filename": "docs/howto/deployment/wsgi/apache-auth.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fapache-auth.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fapache-auth.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fapache-auth.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -4,7 +4,7 @@ Authenticating against Django's user database from Apache\n \n Since keeping multiple authentication databases in sync is a common problem when\n dealing with Apache, you can configure Apache to authenticate against Django's\n-:doc:`authentication system </topics/auth>` directly. This requires Apache\n+:doc:`authentication system </topics/auth/index>` directly. This requires Apache\n version >= 2.2 and mod_wsgi >= 2.0. For example, you could:\n \n * Serve static/media files directly from Apache only to authenticated users."
        },
        {
            "sha": "971c2ff47977bcb1eea63d0a3cf3794b278e64ce",
            "filename": "docs/index.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Findex.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -246,7 +246,7 @@ Common Web application tools\n Django offers multiple tools commonly needed in the development of Web\n applications:\n \n-* :doc:`Authentication <topics/auth>`\n+* :doc:`Authentication <topics/auth/index>`\n * :doc:`Caching <topics/cache>`\n * :doc:`Logging <topics/logging>`\n * :doc:`Sending emails <topics/email>`"
        },
        {
            "sha": "2b1a279d89999f0a6cde35f279ddd7284c7f5971",
            "filename": "docs/internals/git.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Finternals%2Fgit.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Finternals%2Fgit.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fgit.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -134,7 +134,7 @@ part of Django itself, and so are no longer separately maintained:\n   of Django since the 0.95 release.\n \n * ``multi-auth``: A refactoring of :doc:`Django's bundled\n-  authentication framework </topics/auth>` which added support for\n+  authentication framework </topics/auth/index>` which added support for\n   :ref:`authentication backends <authentication-backends>`. This has\n   been part of Django since the 0.95 release.\n "
        },
        {
            "sha": "70e6006575374ebb9a7b8a68d8107a692fd8af8b",
            "filename": "docs/misc/api-stability.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fmisc%2Fapi-stability.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fmisc%2Fapi-stability.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fmisc%2Fapi-stability.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -38,7 +38,7 @@ In general, everything covered in the documentation -- with the exception of\n anything in the :doc:`internals area </internals/index>` is considered stable as\n of 1.0. This includes these APIs:\n \n-- :doc:`Authorization </topics/auth>`\n+- :doc:`Authorization </topics/auth/index>`\n \n - :doc:`Caching </topics/cache>`.\n "
        },
        {
            "sha": "55a536e819ee56dbfeb575044382b47406fde462",
            "filename": "docs/ref/authbackends.txt",
            "status": "removed",
            "additions": 0,
            "deletions": 33,
            "changes": 33,
            "blob_url": "https://github.com/django/django/blob/db278c3bf9177043c42a9ed8b529a5c117938460/docs%2Fref%2Fauthbackends.txt",
            "raw_url": "https://github.com/django/django/raw/db278c3bf9177043c42a9ed8b529a5c117938460/docs%2Fref%2Fauthbackends.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fauthbackends.txt?ref=db278c3bf9177043c42a9ed8b529a5c117938460",
            "patch": "@@ -1,33 +0,0 @@\n-=======================\n-Authentication backends\n-=======================\n-\n-.. module:: django.contrib.auth.backends\n-   :synopsis: Django's built-in authentication backend classes.\n-\n-This document details the authentication backends that come with Django. For\n-information on how to use them and how to write your own authentication\n-backends, see the :ref:`Other authentication sources section\n-<authentication-backends>` of the :doc:`User authentication guide\n-</topics/auth>`.\n-\n-\n-Available authentication backends\n-=================================\n-\n-The following backends are available in :mod:`django.contrib.auth.backends`:\n-\n-.. class:: ModelBackend\n-\n-    This is the default authentication backend used by Django.  It\n-    authenticates using usernames and passwords stored in the\n-    :class:`~django.contrib.auth.models.User` model.\n-\n-\n-.. class:: RemoteUserBackend\n-\n-    Use this backend to take advantage of external-to-Django-handled\n-    authentication.  It authenticates using usernames passed in\n-    :attr:`request.META['REMOTE_USER'] <django.http.HttpRequest.META>`.  See\n-    the :doc:`Authenticating against REMOTE_USER </howto/auth-remote-user>`\n-    documentation."
        },
        {
            "sha": "41f218b0a44da96d2aa4b94f286c7629aa695065",
            "filename": "docs/ref/contrib/auth.txt",
            "status": "modified",
            "additions": 427,
            "deletions": 1,
            "changes": 428,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fcontrib%2Fauth.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fcontrib%2Fauth.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fauth.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -1,4 +1,430 @@\n ``django.contrib.auth``\n =======================\n \n-See :doc:`/topics/auth`.\n+This document provides API reference material for the components of Django's\n+authentication system. For more details on the usage of these components or\n+how to customize authentication and authorization see the :doc:`authentication\n+topic guide </topics/auth/index>`.\n+\n+.. currentmodule:: django.contrib.auth\n+\n+User\n+====\n+\n+Fields\n+------\n+\n+.. class:: models.User\n+\n+    :class:`~django.contrib.auth.models.User` objects have the following\n+    fields:\n+\n+    .. attribute:: username\n+\n+        Required. 30 characters or fewer. Usernames may contain alphanumeric,\n+        ``_``, ``@``, ``+``, ``.`` and ``-`` characters.\n+\n+    .. attribute:: first_name\n+\n+        Optional. 30 characters or fewer.\n+\n+    .. attribute:: last_name\n+\n+        Optional. 30 characters or fewer.\n+\n+    .. attribute:: email\n+\n+        Optional. Email address.\n+\n+    .. attribute:: password\n+\n+        Required. A hash of, and metadata about, the password. (Django doesn't\n+        store the raw password.) Raw passwords can be arbitrarily long and can\n+        contain any character. See the :doc:`password documentation\n+        </topics/auth/passwords>`.\n+\n+    .. attribute:: groups\n+\n+        Many-to-many relationship to :class:`~django.contrib.auth.models.Group`\n+\n+    .. attribute:: user_permissions\n+\n+         Many-to-many relationship to :class:`~django.contrib.auth.models.Permission`\n+\n+    .. attribute:: is_staff\n+\n+        Boolean. Designates whether this user can access the admin site.\n+\n+    .. attribute:: is_active\n+\n+        Boolean. Designates whether this user account should be considered\n+        active. We recommend that you set this flag to ``False`` instead of\n+        deleting accounts; that way, if your applications have any foreign keys\n+        to users, the foreign keys won't break.\n+\n+        This doesn't necessarily control whether or not the user can log in.\n+        Authentication backends aren't required to check for the ``is_active``\n+        flag, and the default backends do not. If you want to reject a login\n+        based on ``is_active`` being ``False``, it's up to you to check that in\n+        your own login view or a custom authentication backend. However, the\n+        :class:`~django.contrib.auth.forms.AuthenticationForm` used by the\n+        :func:`~django.contrib.auth.views.login` view (which is the default)\n+        *does* perform this check, as do the permission-checking methods such\n+        as :meth:`~django.contrib.auth.models.User.has_perm` and the\n+        authentication in the Django admin. All of those functions/methods will\n+        return ``False`` for inactive users.\n+\n+    .. attribute:: is_superuser\n+\n+        Boolean. Designates that this user has all permissions without\n+        explicitly assigning them.\n+\n+    .. attribute:: last_login\n+\n+        A datetime of the user's last login. Is set to the current date/time by\n+        default.\n+\n+    .. attribute:: date_joined\n+\n+        A datetime designating when the account was created. Is set to the\n+        current date/time by default when the account is created.\n+\n+Methods\n+-------\n+\n+.. class:: models.User\n+\n+    .. method:: get_username()\n+\n+        Returns the username for the user. Since the User model can be swapped\n+        out, you should use  this method instead of referencing the username\n+        attribute directly.\n+\n+    .. method:: is_anonymous()\n+\n+        Always returns ``False``. This is a way of differentiating\n+        :class:`~django.contrib.auth.models.User` and\n+        :class:`~django.contrib.auth.models.AnonymousUser` objects.\n+        Generally, you should prefer using\n+        :meth:`~django.contrib.auth.models.User.is_authenticated()` to this\n+        method.\n+\n+    .. method:: is_authenticated()\n+\n+        Always returns ``True``. This is a way to tell if the user has been\n+        authenticated. This does not imply any permissions, and doesn't check\n+        if the user is active - it only indicates that the user has provided a\n+        valid username and password.\n+\n+    .. method:: get_full_name()\n+\n+        Returns the :attr:`~django.contrib.auth.models.User.first_name` plus\n+        the :attr:`~django.contrib.auth.models.User.last_name`, with a space in\n+        between.\n+\n+    .. method:: set_password(raw_password)\n+\n+        Sets the user's password to the given raw string, taking care of the\n+        password hashing. Doesn't save the\n+        :class:`~django.contrib.auth.models.User` object.\n+\n+    .. method:: check_password(raw_password)\n+\n+        Returns ``True`` if the given raw string is the correct password for\n+        the user. (This takes care of the password hashing in making the\n+        comparison.)\n+\n+    .. method:: set_unusable_password()\n+\n+        Marks the user as having no password set.  This isn't the same as\n+        having a blank string for a password.\n+        :meth:`~django.contrib.auth.models.User.check_password()` for this user\n+        will never return ``True``. Doesn't save the\n+        :class:`~django.contrib.auth.models.User` object.\n+\n+        You may need this if authentication for your application takes place\n+        against an existing external source such as an LDAP directory.\n+\n+    .. method:: has_usable_password()\n+\n+        Returns ``False`` if\n+        :meth:`~django.contrib.auth.models.User.set_unusable_password()` has\n+        been called for this user.\n+\n+    .. method:: get_group_permissions(obj=None)\n+\n+        Returns a set of permission strings that the user has, through his/her\n+        groups.\n+\n+        If ``obj`` is passed in, only returns the group permissions for\n+        this specific object.\n+\n+    .. method:: get_all_permissions(obj=None)\n+\n+        Returns a set of permission strings that the user has, both through\n+        group and user permissions.\n+\n+        If ``obj`` is passed in, only returns the permissions for this\n+        specific object.\n+\n+    .. method:: has_perm(perm, obj=None)\n+\n+        Returns ``True`` if the user has the specified permission, where perm\n+        is in the format ``\"<app label>.<permission codename>\"``. (see\n+        documentation on :ref:`permissions <topic-authorization>`). If the user is\n+        inactive, this method will always return ``False``.\n+\n+        If ``obj`` is passed in, this method won't check for a permission for\n+        the model, but for this specific object.\n+\n+    .. method:: has_perms(perm_list, obj=None)\n+\n+        Returns ``True`` if the user has each of the specified permissions,\n+        where each perm is in the format\n+        ``\"<app label>.<permission codename>\"``. If the user is inactive,\n+        this method will always return ``False``.\n+\n+        If ``obj`` is passed in, this method won't check for permissions for\n+        the model, but for the specific object.\n+\n+    .. method:: has_module_perms(package_name)\n+\n+        Returns ``True`` if the user has any permissions in the given package\n+        (the Django app label). If the user is inactive, this method will\n+        always return ``False``.\n+\n+    .. method:: email_user(subject, message, from_email=None)\n+\n+        Sends an email to the user. If ``from_email`` is ``None``, Django uses\n+        the :setting:`DEFAULT_FROM_EMAIL`.\n+\n+    .. method:: get_profile()\n+\n+        .. deprecated:: 1.5\n+            With the introduction of :ref:`custom User models <auth-custom-user>`,\n+            the use of :setting:`AUTH_PROFILE_MODULE` to define a single profile\n+            model is no longer supported. See the\n+            :doc:`Django 1.5 release notes</releases/1.5>` for more information.\n+\n+        Returns a site-specific profile for this user. Raises\n+        ``django.contrib.auth.models.SiteProfileNotAvailable`` if the\n+        current site doesn't allow profiles, or\n+        :exc:`django.core.exceptions.ObjectDoesNotExist` if the user does not\n+        have a profile.\n+\n+Manager methods\n+---------------\n+\n+.. class:: models.UserManager\n+\n+    The :class:`~django.contrib.auth.models.User` model has a custom manager\n+    that has the following helper methods:\n+\n+    .. method:: create_user(username, email=None, password=None)\n+\n+        .. versionchanged:: 1.4\n+           The ``email`` parameter was made optional. The username\n+           parameter is now checked for emptiness and raises a\n+           :exc:`~exceptions.ValueError` in case of a negative result.\n+\n+        Creates, saves and returns a :class:`~django.contrib.auth.models.User`.\n+\n+        The :attr:`~django.contrib.auth.models.User.username` and\n+        :attr:`~django.contrib.auth.models.User.password` are set as given. The\n+        domain portion of :attr:`~django.contrib.auth.models.User.email` is\n+        automatically converted to lowercase, and the returned\n+        :class:`~django.contrib.auth.models.User` object will have\n+        :attr:`~django.contrib.auth.models.User.is_active` set to ``True``.\n+\n+        If no password is provided,\n+        :meth:`~django.contrib.auth.models.User.set_unusable_password()` will\n+        be called.\n+\n+        See :ref:`Creating users <topics-auth-creating-users>` for example usage.\n+\n+    .. method:: make_random_password(length=10, allowed_chars='abcdefghjkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ23456789')\n+\n+        Returns a random password with the given length and given string of\n+        allowed characters. (Note that the default value of ``allowed_chars``\n+        doesn't contain letters that can cause user confusion, including:\n+\n+        * ``i``, ``l``, ``I``, and ``1`` (lowercase letter i, lowercase\n+          letter L, uppercase letter i, and the number one)\n+        * ``o``, ``O``, and ``0`` (uppercase letter o, lowercase letter o,\n+          and zero)\n+\n+\n+Anonymous users\n+===============\n+\n+.. class:: models.AnonymousUser\n+\n+    :class:`django.contrib.auth.models.AnonymousUser` is a class that\n+    implements the :class:`django.contrib.auth.models.User` interface, with\n+    these differences:\n+\n+    * :ref:`id <automatic-primary-key-fields>` is always ``None``.\n+    * :attr:`~django.contrib.auth.models.User.is_staff` and\n+      :attr:`~django.contrib.auth.models.User.is_superuser` are always\n+      ``False``.\n+    * :attr:`~django.contrib.auth.models.User.is_active` is always ``False``.\n+    * :attr:`~django.contrib.auth.models.User.groups` and\n+      :attr:`~django.contrib.auth.models.User.user_permissions` are always\n+      empty.\n+    * :meth:`~django.contrib.auth.models.User.is_anonymous()` returns ``True``\n+      instead of ``False``.\n+    * :meth:`~django.contrib.auth.models.User.is_authenticated()` returns\n+      ``False`` instead of ``True``.\n+    * :meth:`~django.contrib.auth.models.User.set_password()`,\n+      :meth:`~django.contrib.auth.models.User.check_password()`,\n+      :meth:`~django.db.models.Model.save` and\n+      :meth:`~django.db.models.Model.delete()` raise\n+      :exc:`~exceptions.NotImplementedError`.\n+\n+In practice, you probably won't need to use\n+:class:`~django.contrib.auth.models.AnonymousUser` objects on your own, but\n+they're used by Web requests, as explained in the next section.\n+\n+Permission\n+==========\n+\n+.. class:: models.Permission\n+\n+Fields\n+------\n+\n+:class:`~django.contrib.auth.models.Permission` objects have the following\n+fields:\n+\n+.. attribute:: name\n+\n+    Required. 50 characters or fewer. Example: ``'Can vote'``.\n+\n+.. attribute:: content_type\n+\n+    Required. A reference to the ``django_content_type`` database table, which\n+    contains a record for each installed Django model.\n+\n+.. attribute:: codename\n+\n+    Required. 100 characters or fewer. Example: ``'can_vote'``.\n+\n+Methods\n+-------\n+\n+:class:`~django.contrib.auth.models.Permission` objects have the standard\n+data-access methods like any other :doc:`Django model </ref/models/instances>`.\n+\n+Group\n+=====\n+\n+.. class:: models.Group\n+\n+Fields\n+------\n+\n+:class:`~django.contrib.auth.models.Group` objects have the following fields:\n+\n+.. attribute:: name\n+\n+    Required. 80 characters or fewer. Any characters are permitted. Example:\n+    ``'Awesome Users'``.\n+\n+.. attribute:: permissions\n+\n+    Many-to-many field to :class:`~django.contrib.auth.models.Permission`::\n+\n+        group.permissions = [permission_list]\n+        group.permissions.add(permission, permission, ...)\n+        group.permissions.remove(permission, permission, ...)\n+        group.permissions.clear()\n+\n+.. _topics-auth-signals:\n+\n+Login and logout signals\n+========================\n+\n+.. module:: django.contrib.auth.signals\n+\n+The auth framework uses two :doc:`signals </topics/signals>` that can be used\n+for notification when a user logs in or out.\n+\n+.. function:: django.contrib.auth.signals.user_logged_in\n+\n+    Sent when a user logs in successfully.\n+\n+    Arguments sent with this signal:\n+\n+    ``sender``\n+        The class of the user that just logged in.\n+\n+    ``request``\n+        The current :class:`~django.http.HttpRequest` instance.\n+\n+    ``user``\n+        The user instance that just logged in.\n+\n+.. function:: django.contrib.auth.signals.user_logged_out\n+\n+    Sent when the logout method is called.\n+\n+    ``sender``\n+        As above: the class of the user that just logged out or ``None``\n+        if the user was not authenticated.\n+\n+    ``request``\n+        The current :class:`~django.http.HttpRequest` instance.\n+\n+    ``user``\n+        The user instance that just logged out or ``None`` if the\n+        user was not authenticated.\n+\n+.. function:: django.contrib.auth.signals.user_login_failed\n+\n+.. versionadded:: 1.5\n+\n+    Sent when the user failed to login successfully\n+\n+    ``sender``\n+        The name of the module used for authentication.\n+\n+    ``credentials``\n+        A dictionary of keyword arguments containing the user credentials that were\n+        passed to :func:`~django.contrib.auth.authenticate()` or your own custom\n+        authentication backend. Credentials matching a set of 'sensitive' patterns,\n+        (including password) will not be sent in the clear as part of the signal.\n+\n+.. _authentication-backends-reference:\n+\n+Authentication backends\n+=======================\n+\n+.. module:: django.contrib.auth.backends\n+   :synopsis: Django's built-in authentication backend classes.\n+\n+This section details the authentication backends that come with Django. For\n+information on how to use them and how to write your own authentication\n+backends, see the :ref:`Other authentication sources section\n+<authentication-backends>` of the :doc:`User authentication guide\n+</topics/auth/index>`.\n+\n+\n+Available authentication backends\n+---------------------------------\n+\n+The following backends are available in :mod:`django.contrib.auth.backends`:\n+\n+.. class:: ModelBackend\n+\n+    This is the default authentication backend used by Django.  It\n+    authenticates using usernames and passwords stored in the\n+    :class:`~django.contrib.auth.models.User` model.\n+\n+\n+.. class:: RemoteUserBackend\n+\n+    Use this backend to take advantage of external-to-Django-handled\n+    authentication.  It authenticates using usernames passed in\n+    :attr:`request.META['REMOTE_USER'] <django.http.HttpRequest.META>`.  See\n+    the :doc:`Authenticating against REMOTE_USER </howto/auth-remote-user>`\n+    documentation."
        },
        {
            "sha": "3bf5288ee4f67a95d42394bedd09a1e36582a917",
            "filename": "docs/ref/contrib/index.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fcontrib%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fcontrib%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Findex.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -56,7 +56,7 @@ auth\n \n Django's authentication framework.\n \n-See :doc:`/topics/auth`.\n+See :doc:`/topics/auth/index`.\n \n comments\n ========"
        },
        {
            "sha": "205f349e8b21db9e753a872ecb0568d25c167f59",
            "filename": "docs/ref/django-admin.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fdjango-admin.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fdjango-admin.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdjango-admin.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -1145,7 +1145,7 @@ changepassword\n .. django-admin:: changepassword\n \n This command is only available if Django's :doc:`authentication system\n-</topics/auth>` (``django.contrib.auth``) is installed.\n+</topics/auth/index>` (``django.contrib.auth``) is installed.\n \n Allows changing a user's password. It prompts you to enter twice the password of\n the user given as parameter. If they both match, the new password will be\n@@ -1167,7 +1167,7 @@ createsuperuser\n .. django-admin:: createsuperuser\n \n This command is only available if Django's :doc:`authentication system\n-</topics/auth>` (``django.contrib.auth``) is installed.\n+</topics/auth/index>` (``django.contrib.auth``) is installed.\n \n Creates a superuser account (a user who has all permissions). This is\n useful if you need to create an initial superuser account but did not"
        },
        {
            "sha": "fc874a97ebb47ba674b4193edcaf2be9b1cebf06",
            "filename": "docs/ref/index.txt",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Findex.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -5,7 +5,6 @@ API Reference\n .. toctree::\n    :maxdepth: 1\n \n-   authbackends\n    class-based-views/index\n    clickjacking\n    contrib/index"
        },
        {
            "sha": "41cff346ff528dabf4b7b750b9e24623a93f51c8",
            "filename": "docs/ref/middleware.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fmiddleware.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fmiddleware.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmiddleware.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -179,8 +179,8 @@ Authentication middleware\n .. class:: AuthenticationMiddleware\n \n Adds the ``user`` attribute, representing the currently-logged-in user, to\n-every incoming ``HttpRequest`` object. See :doc:`Authentication in Web requests\n-</topics/auth>`.\n+every incoming ``HttpRequest`` object. See :ref:`Authentication in Web requests\n+<auth-web-requests>`.\n \n CSRF protection middleware\n --------------------------"
        },
        {
            "sha": "2775c974d040abff8dc03a4e494b46b71b146244",
            "filename": "docs/ref/request-response.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Frequest-response.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Frequest-response.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Frequest-response.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -181,7 +181,7 @@ All attributes should be considered read-only, unless stated otherwise below.\n \n     ``user`` is only available if your Django installation has the\n     ``AuthenticationMiddleware`` activated. For more, see\n-    :doc:`/topics/auth`.\n+    :doc:`/topics/auth/index`.\n \n .. attribute:: HttpRequest.session\n "
        },
        {
            "sha": "5815062266ee85717bf307043a86eaabb398e30e",
            "filename": "docs/ref/settings.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fsettings.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fsettings.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsettings.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -107,8 +107,8 @@ AUTHENTICATION_BACKENDS\n Default: ``('django.contrib.auth.backends.ModelBackend',)``\n \n A tuple of authentication backend classes (as strings) to use when attempting to\n-authenticate a user. See the :doc:`authentication backends documentation\n-</ref/authbackends>` for details.\n+authenticate a user. See the :ref:`authentication backends documentation\n+<authentication-backends>` for details.\n \n .. setting:: AUTH_USER_MODEL\n \n@@ -2256,7 +2256,7 @@ AUTH_PROFILE_MODULE\n Default: Not defined\n \n The site-specific user profile model used by this site. See\n-:ref:`auth-profiles`.\n+:ref:`User profiles <auth-profiles>`.\n \n .. setting:: IGNORABLE_404_ENDS\n "
        },
        {
            "sha": "0671d80b7c621df28c974e17c104d405ac0d5197",
            "filename": "docs/ref/signals.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fsignals.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Fref%2Fsignals.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsignals.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -12,7 +12,7 @@ A list of all the signals that Django sends.\n     The :doc:`comment framework </ref/contrib/comments/index>` sends a :doc:`set\n     of comment-related signals </ref/contrib/comments/signals>`.\n \n-    The :doc:`authentication framework </topics/auth>` sends :ref:`signals when\n+    The :doc:`authentication framework </topics/auth/index>` sends :ref:`signals when\n     a user is logged in / out <topics-auth-signals>`.\n \n Model signals"
        },
        {
            "sha": "3549767379b6c0b3d49d5fef9db618c349c3e619",
            "filename": "docs/releases/1.2-beta-1.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Freleases%2F1.2-beta-1.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Freleases%2F1.2-beta-1.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.2-beta-1.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -91,7 +91,7 @@ added in Django 1.2 alpha but not documented with the alpha release.\n \n The default authentication backends shipped with Django do not\n currently make use of this, but third-party authentication backends\n-are free to do so. See the :doc:`authentication docs </topics/auth>`\n+are free to do so. See the :doc:`authentication docs </topics/auth/index>`\n for more information.\n \n \n@@ -104,7 +104,7 @@ class will check the backend for permissions, just as the normal\n ``User`` does. This is intended to help centralize permission\n handling; apps can always delegate the question of whether something\n is allowed or not to the authorization/authentication system. See the\n-:doc:`authentication docs </topics/auth>` for more details.\n+:doc:`authentication docs </topics/auth/index>` for more details.\n \n \n ``select_related()`` improvements"
        },
        {
            "sha": "68cec9158770d009d90148f4bb693b5901c8b37e",
            "filename": "docs/releases/1.2.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Freleases%2F1.2.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Freleases%2F1.2.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.2.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -165,7 +165,7 @@ A foundation for specifying permissions at the per-object level has been added.\n Although there is no implementation of this in core, a custom authentication\n backend can provide this implementation and it will be used by\n :class:`django.contrib.auth.models.User`. See the :doc:`authentication docs\n-</topics/auth>` for more information.\n+</topics/auth/index>` for more information.\n \n Permissions for anonymous users\n -------------------------------\n@@ -175,7 +175,7 @@ If you provide a custom auth backend with ``supports_anonymous_user`` set to\n User already did.  This is useful for centralizing permission handling - apps\n can always delegate the question of whether something is allowed or not to\n the authorization/authentication backend. See the :doc:`authentication\n-docs </topics/auth>` for more details.\n+docs </topics/auth/index>` for more details.\n \n Relaxed requirements for usernames\n ----------------------------------"
        },
        {
            "sha": "2729c7f2bab5128732d59e7d9881ea4692c1c620",
            "filename": "docs/releases/1.3-beta-1.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Freleases%2F1.3-beta-1.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Freleases%2F1.3-beta-1.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.3-beta-1.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -61,7 +61,7 @@ Permissions for inactive users\n If you provide a custom auth backend with ``supports_inactive_user`` set to\n ``True``, an inactive user model will check the backend for permissions.\n This is useful for further centralizing the permission handling. See the\n-:doc:`authentication docs </topics/auth>` for more details.\n+:doc:`authentication docs </topics/auth/index>` for more details.\n \n Backwards-incompatible changes in 1.3 alpha 2\n ============================================="
        },
        {
            "sha": "d6ef11d1131fef2dff4ad0e4b5d34d3e1d680a83",
            "filename": "docs/releases/1.3.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Freleases%2F1.3.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Freleases%2F1.3.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.3.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -254,7 +254,7 @@ Permissions for inactive users\n If you provide a custom auth backend with ``supports_inactive_user``\n set to ``True``, an inactive ``User`` instance will check the backend\n for permissions.  This is useful for further centralizing the\n-permission handling. See the :doc:`authentication docs </topics/auth>`\n+permission handling. See the :doc:`authentication docs </topics/auth/index>`\n for more details.\n \n GeoDjango"
        },
        {
            "sha": "e7a0ff114edf62719f3ba294cdd8148c7ff89f7c",
            "filename": "docs/topics/auth.txt",
            "status": "removed",
            "additions": 0,
            "deletions": 2696,
            "changes": 2696,
            "blob_url": "https://github.com/django/django/blob/db278c3bf9177043c42a9ed8b529a5c117938460/docs%2Ftopics%2Fauth.txt",
            "raw_url": "https://github.com/django/django/raw/db278c3bf9177043c42a9ed8b529a5c117938460/docs%2Ftopics%2Fauth.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth.txt?ref=db278c3bf9177043c42a9ed8b529a5c117938460"
        },
        {
            "sha": "5f48e82e2bc012fe5a95b93f262ebf81c73bcf73",
            "filename": "docs/topics/auth/customizing.txt",
            "status": "added",
            "additions": 1074,
            "deletions": 0,
            "changes": 1074,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fauth%2Fcustomizing.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fauth%2Fcustomizing.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth%2Fcustomizing.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -0,0 +1,1074 @@\n+====================================\n+Customizing authentication in Django\n+====================================\n+\n+The authentication that comes with Django is good enough for most common cases,\n+but you may have needs not met by the out-of-the-box defaults. To customize\n+authentication to your projects needs involves understanding what points of the\n+provided system are extendible or replaceable. This document provides details\n+about how the auth system can be customized.\n+\n+:ref:`Authentication backends <authentication-backends>` provide an extensible\n+system for when a username and password stored with the User model need\n+to be authenticated against a different service than Django's default.\n+\n+You can give your models :ref:`custom permissions <custom-permissions>` that can be\n+checked through Django's authorization system.\n+\n+You can :ref:`extend <extending-user>` the default User model, or :ref:`substitute\n+<auth-custom-user>` a completely customized model.\n+\n+.. _authentication-backends:\n+\n+Other authentication sources\n+============================\n+\n+There may be times you have the need to hook into another authentication source\n+-- that is, another source of usernames and passwords or authentication\n+methods.\n+\n+For example, your company may already have an LDAP setup that stores a username\n+and password for every employee. It'd be a hassle for both the network\n+administrator and the users themselves if users had separate accounts in LDAP\n+and the Django-based applications.\n+\n+So, to handle situations like this, the Django authentication system lets you\n+plug in other authentication sources. You can override Django's default\n+database-based scheme, or you can use the default system in tandem with other\n+systems.\n+\n+See the `authentication backend reference\n+<authentication-backends-reference>` for information on the authentication\n+backends included with Django.\n+\n+Specifying authentication backends\n+----------------------------------\n+\n+Behind the scenes, Django maintains a list of \"authentication backends\" that it\n+checks for authentication. When somebody calls\n+:func:`django.contrib.auth.authenticate()` -- as described in :ref:`How to log\n+a user in <how-to-log-a-user-in>` above -- Django tries authenticating across\n+all of its authentication backends. If the first authentication method fails,\n+Django tries the second one, and so on, until all backends have been attempted.\n+\n+The list of authentication backends to use is specified in the\n+:setting:`AUTHENTICATION_BACKENDS` setting. This should be a tuple of Python\n+path names that point to Python classes that know how to authenticate. These\n+classes can be anywhere on your Python path.\n+\n+By default, :setting:`AUTHENTICATION_BACKENDS` is set to::\n+\n+    ('django.contrib.auth.backends.ModelBackend',)\n+\n+That's the basic authentication backend that checks the Django users database\n+and queries the built-in permissions. It does not provide protection against\n+brute force attacks via any rate limiting mechanism. You may either implement\n+your own rate limiting mechanism in a custom auth backend, or use the\n+mechanisms provided by most Web servers.\n+\n+The order of :setting:`AUTHENTICATION_BACKENDS` matters, so if the same\n+username and password is valid in multiple backends, Django will stop\n+processing at the first positive match.\n+\n+.. note::\n+\n+    Once a user has authenticated, Django stores which backend was used to\n+    authenticate the user in the user's session, and re-uses the same backend\n+    for the duration of that session whenever access to the currently\n+    authenticated user is needed. This effectively means that authentication\n+    sources are cached on a per-session basis, so if you change\n+    :setting:`AUTHENTICATION_BACKENDS`, you'll need to clear out session data if\n+    you need to force users to re-authenticate using different methods. A simple\n+    way to do that is simply to execute ``Session.objects.all().delete()``.\n+\n+.. versionadded:: 1.6\n+\n+If a backend raises a :class:`~django.core.exceptions.PermissionDenied`\n+exception, authentication will immediately fail. Django won't check the\n+backends that follow.\n+\n+Writing an authentication backend\n+---------------------------------\n+\n+An authentication backend is a class that implements two required methods:\n+``get_user(user_id)`` and ``authenticate(**credentials)``, as well as a set of\n+optional permission related :ref:`authorization methods <authorization_methods>`.\n+\n+The ``get_user`` method takes a ``user_id`` -- which could be a username,\n+database ID or whatever -- and returns a ``User`` object.\n+\n+The ``authenticate`` method takes credentials as keyword arguments. Most of\n+the time, it'll just look like this::\n+\n+    class MyBackend(object):\n+        def authenticate(self, username=None, password=None):\n+            # Check the username/password and return a User.\n+\n+But it could also authenticate a token, like so::\n+\n+    class MyBackend(object):\n+        def authenticate(self, token=None):\n+            # Check the token and return a User.\n+\n+Either way, ``authenticate`` should check the credentials it gets, and it\n+should return a ``User`` object that matches those credentials, if the\n+credentials are valid. If they're not valid, it should return ``None``.\n+\n+The Django admin system is tightly coupled to the Django ``User`` object\n+described at the beginning of this document. For now, the best way to deal with\n+this is to create a Django ``User`` object for each user that exists for your\n+backend (e.g., in your LDAP directory, your external SQL database, etc.) You\n+can either write a script to do this in advance, or your ``authenticate``\n+method can do it the first time a user logs in.\n+\n+Here's an example backend that authenticates against a username and password\n+variable defined in your ``settings.py`` file and creates a Django ``User``\n+object the first time a user authenticates::\n+\n+    from django.conf import settings\n+    from django.contrib.auth.models import User, check_password\n+\n+    class SettingsBackend(object):\n+        \"\"\"\n+        Authenticate against the settings ADMIN_LOGIN and ADMIN_PASSWORD.\n+\n+        Use the login name, and a hash of the password. For example:\n+\n+        ADMIN_LOGIN = 'admin'\n+        ADMIN_PASSWORD = 'sha1$4e987$afbcf42e21bd417fb71db8c66b321e9fc33051de'\n+        \"\"\"\n+\n+        def authenticate(self, username=None, password=None):\n+            login_valid = (settings.ADMIN_LOGIN == username)\n+            pwd_valid = check_password(password, settings.ADMIN_PASSWORD)\n+            if login_valid and pwd_valid:\n+                try:\n+                    user = User.objects.get(username=username)\n+                except User.DoesNotExist:\n+                    # Create a new user. Note that we can set password\n+                    # to anything, because it won't be checked; the password\n+                    # from settings.py will.\n+                    user = User(username=username, password='get from settings.py')\n+                    user.is_staff = True\n+                    user.is_superuser = True\n+                    user.save()\n+                return user\n+            return None\n+\n+        def get_user(self, user_id):\n+            try:\n+                return User.objects.get(pk=user_id)\n+            except User.DoesNotExist:\n+                return None\n+\n+.. _authorization_methods:\n+\n+Handling authorization in custom backends\n+-----------------------------------------\n+\n+Custom auth backends can provide their own permissions.\n+\n+The user model will delegate permission lookup functions\n+(:meth:`~django.contrib.auth.models.User.get_group_permissions()`,\n+:meth:`~django.contrib.auth.models.User.get_all_permissions()`,\n+:meth:`~django.contrib.auth.models.User.has_perm()`, and\n+:meth:`~django.contrib.auth.models.User.has_module_perms()`) to any\n+authentication backend that implements these functions.\n+\n+The permissions given to the user will be the superset of all permissions\n+returned by all backends. That is, Django grants a permission to a user that\n+any one backend grants.\n+\n+The simple backend above could implement permissions for the magic admin\n+fairly simply::\n+\n+    class SettingsBackend(object):\n+\n+        # ...\n+\n+        def has_perm(self, user_obj, perm, obj=None):\n+            if user_obj.username == settings.ADMIN_LOGIN:\n+                return True\n+            else:\n+                return False\n+\n+This gives full permissions to the user granted access in the above example.\n+Notice that in addition to the same arguments given to the associated\n+:class:`django.contrib.auth.models.User` functions, the backend auth functions\n+all take the user object, which may be an anonymous user, as an argument.\n+\n+A full authorization implementation can be found in the ``ModelBackend`` class\n+in `django/contrib/auth/backends.py`_, which is the default backend and queries\n+the ``auth_permission`` table most of the time. If you wish to provide\n+custom behavior for only part of the backend API, you can take advantage of\n+Python inheritance and subclass ``ModelBackend`` instead of implementing the\n+complete API in a custom backend.\n+\n+.. _django/contrib/auth/backends.py: https://github.com/django/django/blob/master/django/contrib/auth/backends.py\n+\n+.. _anonymous_auth:\n+\n+Authorization for anonymous users\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+An anonymous user is one that is not authenticated i.e. they have provided no\n+valid authentication details. However, that does not necessarily mean they are\n+not authorized to do anything. At the most basic level, most Web sites\n+authorize anonymous users to browse most of the site, and many allow anonymous\n+posting of comments etc.\n+\n+Django's permission framework does not have a place to store permissions for\n+anonymous users. However, the user object passed to an authentication backend\n+may be an :class:`django.contrib.auth.models.AnonymousUser` object, allowing\n+the backend to specify custom authorization behavior for anonymous users. This\n+is especially useful for the authors of re-usable apps, who can delegate all\n+questions of authorization to the auth backend, rather than needing settings,\n+for example, to control anonymous access.\n+\n+.. _inactive_auth:\n+\n+Authorization for inactive users\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+An inactive user is a one that is authenticated but has its attribute\n+``is_active`` set to ``False``. However this does not mean they are not\n+authorized to do anything. For example they are allowed to activate their\n+account.\n+\n+The support for anonymous users in the permission system allows for a scenario\n+where anonymous users have permissions to do something while inactive\n+authenticated users do not.\n+\n+Do not forget to test for the ``is_active`` attribute of the user in your own\n+backend permission methods.\n+\n+\n+Handling object permissions\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Django's permission framework has a foundation for object permissions, though\n+there is no implementation for it in the core. That means that checking for\n+object permissions will always return ``False`` or an empty list (depending on\n+the check performed). An authentication backend will receive the keyword\n+parameters ``obj`` and ``user_obj`` for each object related authorization\n+method and can return the object level permission as appropriate.\n+\n+.. _custom-permissions:\n+\n+Custom permissions\n+==================\n+\n+To create custom permissions for a given model object, use the ``permissions``\n+:ref:`model Meta attribute <meta-options>`.\n+\n+This example Task model creates three custom permissions, i.e., actions users\n+can or cannot do with Task instances, specific to your application::\n+\n+    class Task(models.Model):\n+        ...\n+        class Meta:\n+            permissions = (\n+                (\"view_task\", \"Can see available tasks\"),\n+                (\"change_task_status\", \"Can change the status of tasks\"),\n+                (\"close_task\", \"Can remove a task by setting its status as closed\"),\n+            )\n+\n+The only thing this does is create those extra permissions when you run\n+:djadmin:`manage.py syncdb <syncdb>`. Your code is in charge of checking the\n+value of these permissions when an user is trying to access the functionality\n+provided by the application (viewing tasks, changing the status of tasks,\n+closing tasks.) Continuing the above example, the following checks if a user may\n+view tasks::\n+\n+    user.has_perm('app.view_task')\n+\n+.. _extending-user:\n+\n+Extending the existing User model\n+=================================\n+\n+There are two ways to extend the default\n+:class:`~django.contrib.auth.models.User` model without substituting your own\n+model. If the changes you need are purely behavioral, and don't require any\n+change to what is stored in the database, you can create a :ref:`proxy model\n+<proxy-models>` based on :class:`~django.contrib.auth.models.User`. This\n+allows for any of the features offered by proxy models including default\n+ordering, custom managers, or custom model methods.\n+\n+If you wish to store information related to ``User``, you can use a :ref:`one-to-one\n+relationship <ref-onetoone>` to a model containing the fields for\n+additional information. This one-to-one model is often called a profile model,\n+as it might store non-auth related information about a site user. For example\n+you might create an Employee model::\n+\n+    from django.contrib.auth.models import User\n+\n+    class Employee(models.Model):\n+        user = models.OneToOneField(User)\n+        department = models.CharField(max_length=100)\n+\n+Assuming an existing Employee Fred Smith who has both a User and Employee\n+model, you can access the related information using Django's standard related\n+model conventions::\n+\n+    >>> u = User.objects.get(username='fsmith')\n+    >>> freds_department = u.employee.department\n+\n+To add a profile model's fields to the user page in the admin, define an\n+:class:`~django.contrib.admin.InlineModelAdmin` (for this example, we'll use a\n+:class:`~django.contrib.admin.StackedInline`) in your app's ``admin.py`` and\n+add it to a ``UserAdmin`` class which is registered with the\n+:class:`~django.contrib.auth.models.User` class::\n+\n+    from django.contrib import admin\n+    from django.contrib.auth.admin import UserAdmin\n+    from django.contrib.auth.models import User\n+\n+    from my_user_profile_app.models import Employee\n+\n+    # Define an inline admin descriptor for Employee model\n+    # which acts a bit like a singleton\n+    class EmployeeInline(admin.StackedInline):\n+        model = Employee\n+        can_delete = False\n+        verbose_name_plural = 'employee'\n+\n+    # Define a new User admin\n+    class UserAdmin(UserAdmin):\n+        inlines = (EmployeeInline, )\n+\n+    # Re-register UserAdmin\n+    admin.site.unregister(User)\n+    admin.site.register(User, UserAdmin)\n+\n+These profile models are not special in any way - they are just Django models that\n+happen to have a one-to-one link with a User model. As such, they do not get\n+auto created when a user is created, but\n+a :attr:`django.db.models.signals.post_save` could be used to create or update\n+related models as appropriate.\n+\n+Note that using related models results in additional queries or joins to\n+retrieve the related data, and depending on your needs substituting the User\n+model and adding the related fields may be your better option.  However\n+existing links to the default User model within your project's apps may justify\n+the extra database load.\n+\n+.. _auth-profiles:\n+\n+.. deprecated:: 1.5\n+    With the introduction of :ref:`custom User models <auth-custom-user>`,\n+    the use of :setting:`AUTH_PROFILE_MODULE` to define a single profile\n+    model is no longer supported. See the\n+    :doc:`Django 1.5 release notes</releases/1.5>` for more information.\n+\n+Prior to 1.5, a single profile model could be specified site-wide with the\n+setting :setting:`AUTH_PROFILE_MODULE` with a string consisting of the\n+following items, separated by a dot:\n+\n+1. The name of the application (case sensitive) in which the user\n+   profile model is defined (in other words, the\n+   name which was passed to :djadmin:`manage.py startapp <startapp>` to create\n+   the application).\n+\n+2. The name of the model (not case sensitive) class.\n+\n+For example, if the profile model was a class named ``UserProfile`` and was\n+defined inside an application named ``accounts``, the appropriate setting would\n+be::\n+\n+    AUTH_PROFILE_MODULE = 'accounts.UserProfile'\n+\n+When a user profile model has been defined and specified in this manner, each\n+:class:`~django.contrib.auth.models.User` object will have a method --\n+:class:`~django.contrib.auth.models.User.get_profile()` -- which returns the\n+instance of the user profile model associated with that\n+:class:`~django.contrib.auth.models.User`.\n+\n+The method :class:`~django.contrib.auth.models.User.get_profile()`\n+does not create a profile if one does not exist.\n+\n+.. _auth-custom-user:\n+\n+Substituting a custom User model\n+================================\n+\n+.. versionadded:: 1.5\n+\n+Some kinds of projects may have authentication requirements for which Django's\n+built-in :class:`~django.contrib.auth.models.User` model is not always\n+appropriate. For instance, on some sites it makes more sense to use an email\n+address as your identification token instead of a username.\n+\n+Django allows you to override the default User model by providing a value for\n+the :setting:`AUTH_USER_MODEL` setting that references a custom model::\n+\n+     AUTH_USER_MODEL = 'myapp.MyUser'\n+\n+This dotted pair describes the name of the Django app, and the name of the Django\n+model that you wish to use as your User model.\n+\n+.. admonition:: Warning\n+\n+   Changing :setting:`AUTH_USER_MODEL` has a big effect on your database\n+   structure. It changes the tables that are available, and it will affect the\n+   construction of foreign keys and many-to-many relationships. If you intend\n+   to set :setting:`AUTH_USER_MODEL`, you should set it before running\n+   ``manage.py syncdb`` for the first time.\n+\n+   If you have an existing project and you want to migrate to using a custom\n+   User model, you may need to look into using a migration tool like South_\n+   to ease the transition.\n+\n+.. _South: http://south.aeracode.org\n+\n+Referencing the User model\n+--------------------------\n+\n+.. currentmodule:: django.contrib.auth\n+\n+If you reference :class:`~django.contrib.auth.models.User` directly (for\n+example, by referring to it in a foreign key), your code will not work in\n+projects where the :setting:`AUTH_USER_MODEL` setting has been changed to a\n+different User model.\n+\n+.. function:: get_user_model()\n+\n+    Instead of referring to :class:`~django.contrib.auth.models.User` directly,\n+    you should reference the user model using\n+    ``django.contrib.auth.get_user_model()``. This method will return the\n+    currently active User model -- the custom User model if one is specified, or\n+    :class:`~django.contrib.auth.models.User` otherwise.\n+\n+    When you define a foreign key or many-to-many relations to the User model,\n+    you should specify the custom model using the :setting:`AUTH_USER_MODEL`\n+    setting. For example::\n+\n+\n+        from django.conf import settings\n+        from django.db import models\n+\n+        class Article(models.Model)\n+            author = models.ForeignKey(settings.AUTH_USER_MODEL)\n+\n+Specifying a custom User model\n+------------------------------\n+\n+.. admonition:: Model design considerations\n+\n+    Think carefully before handling information not directly related to\n+    authentication in your custom User Model.\n+\n+    It may be better to store app-specific user information in a model\n+    that has a relation with the User model. That allows each app to specify\n+    its own user data requirements without risking conflicts with other\n+    apps. On the other hand, queries to retrieve this related information\n+    will involve a database join, which may have an effect on performance.\n+\n+Django expects your custom User model to meet some minimum requirements.\n+\n+1. Your model must have a single unique field that can be used for\n+   identification purposes. This can be a username, an email address,\n+   or any other unique attribute.\n+\n+2. Your model must provide a way to address the user in a \"short\" and\n+   \"long\" form. The most common interpretation of this would be to use\n+   the user's given name as the \"short\" identifier, and the user's full\n+   name as the \"long\" identifier. However, there are no constraints on\n+   what these two methods return - if you want, they can return exactly\n+   the same value.\n+\n+The easiest way to construct a compliant custom User model is to inherit from\n+:class:`~django.contrib.auth.models.AbstractBaseUser`.\n+:class:`~django.contrib.auth.models.AbstractBaseUser` provides the core\n+implementation of a `User` model, including hashed passwords and tokenized\n+password resets. You must then provide some key implementation details:\n+\n+.. currentmodule:: django.contrib.auth\n+\n+.. class:: models.CustomUser\n+\n+    .. attribute:: USERNAME_FIELD\n+\n+        A string describing the name of the field on the User model that is\n+        used as the unique identifier. This will usually be a username of\n+        some kind, but it can also be an email address, or any other unique\n+        identifier. In the following example, the field `identifier` is used\n+        as the identifying field::\n+\n+            class MyUser(AbstractBaseUser):\n+                identifier = models.CharField(max_length=40, unique=True, db_index=True)\n+                ...\n+                USERNAME_FIELD = 'identifier'\n+\n+    .. attribute:: REQUIRED_FIELDS\n+\n+        A list of the field names that *must* be provided when creating\n+        a user. For example, here is the partial definition for a User model\n+        that defines two required fields - a date of birth and height::\n+\n+            class MyUser(AbstractBaseUser):\n+                ...\n+                date_of_birth = models.DateField()\n+                height = models.FloatField()\n+                ...\n+                REQUIRED_FIELDS = ['date_of_birth', 'height']\n+\n+        .. note::\n+\n+            ``REQUIRED_FIELDS`` must contain all required fields on your User\n+            model, but should *not* contain the ``USERNAME_FIELD``.\n+\n+    .. attribute:: is_active\n+\n+        A boolean attribute that indicates whether the user is considered\n+        \"active\".  This attribute is provided as an attribute on\n+        ``AbstractBaseUser`` defaulting to ``True``. How you choose to\n+        implement it will depend on the details of your chosen auth backends.\n+        See the documentation of the :attr:`attribute on the builtin user model\n+        <django.contrib.auth.models.User.is_active>` for details.\n+\n+    .. method:: get_full_name()\n+\n+        A longer formal identifier for the user. A common interpretation\n+        would be the full name name of the user, but it can be any string that\n+        identifies the user.\n+\n+    .. method:: get_short_name()\n+\n+        A short, informal identifier for the user. A common interpretation\n+        would be the first name of the user, but it can be any string that\n+        identifies the user in an informal way. It may also return the same\n+        value as :meth:`django.contrib.auth.models.User.get_full_name()`.\n+\n+The following methods are available on any subclass of\n+:class:`~django.contrib.auth.models.AbstractBaseUser`:\n+\n+.. class:: models.AbstractBaseUser\n+\n+    .. method:: get_username()\n+\n+        Returns the value of the field nominated by ``USERNAME_FIELD``.\n+\n+    .. method:: models.AbstractBaseUser.is_anonymous()\n+\n+        Always returns ``False``. This is a way of differentiating\n+        from  :class:`~django.contrib.auth.models.AnonymousUser` objects.\n+        Generally, you should prefer using\n+        :meth:`~django.contrib.auth.models.AbstractBaseUser.is_authenticated()` to this\n+        method.\n+\n+    .. method:: models.AbstractBaseUser.is_authenticated()\n+\n+        Always returns ``True``. This is a way to tell if the user has been\n+        authenticated. This does not imply any permissions, and doesn't check\n+        if the user is active - it only indicates that the user has provided a\n+        valid username and password.\n+\n+    .. method:: models.AbstractBaseUser.set_password(raw_password)\n+\n+        Sets the user's password to the given raw string, taking care of the\n+        password hashing. Doesn't save the\n+        :class:`~django.contrib.auth.models.AbstractBaseUser` object.\n+\n+    .. method:: models.AbstractBaseUser.check_password(raw_password)\n+\n+        Returns ``True`` if the given raw string is the correct password for\n+        the user. (This takes care of the password hashing in making the\n+        comparison.)\n+\n+    .. method:: models.AbstractBaseUser.set_unusable_password()\n+\n+        Marks the user as having no password set.  This isn't the same as\n+        having a blank string for a password.\n+        :meth:`~django.contrib.auth.models.AbstractBaseUser.check_password()` for this user\n+        will never return ``True``. Doesn't save the\n+        :class:`~django.contrib.auth.models.AbstractBaseUser` object.\n+\n+        You may need this if authentication for your application takes place\n+        against an existing external source such as an LDAP directory.\n+\n+    .. method:: models.AbstractBaseUser.has_usable_password()\n+\n+        Returns ``False`` if\n+        :meth:`~django.contrib.auth.models.AbstractBaseUser.set_unusable_password()` has\n+        been called for this user.\n+\n+You should also define a custom manager for your User model. If your User\n+model defines `username` and `email` fields the same as Django's default User,\n+you can just install Django's\n+:class:`~django.contrib.auth.models.UserManager`; however, if your User model\n+defines different fields, you will need to define a custom manager that\n+extends :class:`~django.contrib.auth.models.BaseUserManager` providing two\n+additional methods:\n+\n+.. class:: models.CustomUserManager\n+\n+    .. method:: models.CustomUserManager.create_user(*username_field*, password=None, \\**other_fields)\n+\n+        The prototype of `create_user()` should accept the username field,\n+        plus all required fields as arguments. For example, if your user model\n+        uses `email` as the username field, and has `date_of_birth` as a required\n+        fields, then create_user should be defined as::\n+\n+            def create_user(self, email, date_of_birth, password=None):\n+                # create user here\n+\n+    .. method:: models.CustomUserManager.create_superuser(*username_field*, password, \\**other_fields)\n+\n+        The prototype of `create_superuser()` should accept the username field,\n+        plus all required fields as arguments. For example, if your user model\n+        uses `email` as the username field, and has `date_of_birth` as a required\n+        fields, then create_superuser should be defined as::\n+\n+            def create_superuser(self, email, date_of_birth, password):\n+                # create superuser here\n+\n+        Unlike `create_user()`, `create_superuser()` *must* require the caller\n+        to provider a password.\n+\n+:class:`~django.contrib.auth.models.BaseUserManager` provides the following\n+utility methods:\n+\n+.. class:: models.BaseUserManager\n+\n+    .. method:: models.BaseUserManager.normalize_email(email)\n+\n+        A classmethod that normalizes email addresses by lowercasing\n+        the domain portion of the email address.\n+\n+    .. method:: models.BaseUserManager.get_by_natural_key(username)\n+\n+        Retrieves a user instance using the contents of the field\n+        nominated by ``USERNAME_FIELD``.\n+\n+    .. method:: models.BaseUserManager.make_random_password(length=10, allowed_chars='abcdefghjkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ23456789')\n+\n+        Returns a random password with the given length and given string of\n+        allowed characters. (Note that the default value of ``allowed_chars``\n+        doesn't contain letters that can cause user confusion, including:\n+\n+        * ``i``, ``l``, ``I``, and ``1`` (lowercase letter i, lowercase\n+          letter L, uppercase letter i, and the number one)\n+        * ``o``, ``O``, and ``0`` (uppercase letter o, lowercase letter o,\n+          and zero)\n+\n+Extending Django's default User\n+-------------------------------\n+\n+If you're entirely happy with Django's :class:`~django.contrib.auth.models.User`\n+model and you just want to add some additional profile information, you can\n+simply subclass ``django.contrib.auth.models.AbstractUser`` and add your\n+custom profile fields. This class provides the full implementation of the\n+default :class:`~django.contrib.auth.models.User` as an :ref:`abstract model\n+<abstract-base-classes>`.\n+\n+Custom users and the built-in auth forms\n+----------------------------------------\n+\n+As you may expect, built-in Django's :ref:`forms <built-in-auth-forms>` and\n+:ref:`views <built-in-auth-views>` make certain assumptions about the user\n+model that they are working with.\n+\n+If your user model doesn't follow the same assumptions, it may be necessary to define\n+a replacement form, and pass that form in as part of the configuration of the\n+auth views.\n+\n+* :class:`~django.contrib.auth.forms.UserCreationForm`\n+\n+  Depends on the :class:`~django.contrib.auth.models.User` model.\n+  Must be re-written for any custom user model.\n+\n+* :class:`~django.contrib.auth.forms.UserChangeForm`\n+\n+  Depends on the :class:`~django.contrib.auth.models.User` model.\n+  Must be re-written for any custom user model.\n+\n+* :class:`~django.contrib.auth.forms.AuthenticationForm`\n+\n+  Works with any subclass of :class:`~django.contrib.auth.models.AbstractBaseUser`,\n+  and will adapt to use the field defined in `USERNAME_FIELD`.\n+\n+* :class:`~django.contrib.auth.forms.PasswordResetForm`\n+\n+  Assumes that the user model has an integer primary key, has a field named\n+  `email` that can be used to identify the user, and a boolean field\n+  named `is_active` to prevent password resets for inactive users.\n+\n+* :class:`~django.contrib.auth.forms.SetPasswordForm`\n+\n+  Works with any subclass of :class:`~django.contrib.auth.models.AbstractBaseUser`\n+\n+* :class:`~django.contrib.auth.forms.PasswordChangeForm`\n+\n+  Works with any subclass of :class:`~django.contrib.auth.models.AbstractBaseUser`\n+\n+* :class:`~django.contrib.auth.forms.AdminPasswordChangeForm`\n+\n+  Works with any subclass of :class:`~django.contrib.auth.models.AbstractBaseUser`\n+\n+\n+Custom users and django.contrib.admin\n+-------------------------------------\n+\n+If you want your custom User model to also work with Admin, your User model must\n+define some additional attributes and methods. These methods allow the admin to\n+control access of the User to admin content:\n+\n+.. class:: models.CustomUser\n+\n+.. attribute:: is_staff\n+\n+    Returns True if the user is allowed to have access to the admin site.\n+\n+.. attribute:: is_active\n+\n+    Returns True if the user account is currently active.\n+\n+.. method:: has_perm(perm, obj=None):\n+\n+    Returns True if the user has the named permission. If `obj` is\n+    provided, the permission needs to be checked against a specific object\n+    instance.\n+\n+.. method:: has_module_perms(app_label):\n+\n+    Returns True if the user has permission to access models in\n+    the given app.\n+\n+You will also need to register your custom User model with the admin. If\n+your custom User model extends ``django.contrib.auth.models.AbstractUser``,\n+you can use Django's existing ``django.contrib.auth.admin.UserAdmin``\n+class. However, if your User model extends\n+:class:`~django.contrib.auth.models.AbstractBaseUser`, you'll need to define\n+a custom ModelAdmin class. It may be possible to subclass the default\n+``django.contrib.auth.admin.UserAdmin``; however, you'll need to\n+override any of the definitions that refer to fields on\n+``django.contrib.auth.models.AbstractUser`` that aren't on your\n+custom User class.\n+\n+Custom users and permissions\n+----------------------------\n+\n+To make it easy to include Django's permission framework into your own User\n+class, Django provides :class:`~django.contrib.auth.models.PermissionsMixin`.\n+This is an abstract model you can include in the class hierarchy for your User\n+model, giving you all the methods and database fields necessary to support\n+Django's permission model.\n+\n+:class:`~django.contrib.auth.models.PermissionsMixin` provides the following\n+methods and attributes:\n+\n+.. class:: models.PermissionsMixin\n+\n+    .. attribute:: models.PermissionsMixin.is_superuser\n+\n+        Boolean. Designates that this user has all permissions without\n+        explicitly assigning them.\n+\n+    .. method:: models.PermissionsMixin.get_group_permissions(obj=None)\n+\n+        Returns a set of permission strings that the user has, through his/her\n+        groups.\n+\n+        If ``obj`` is passed in, only returns the group permissions for\n+        this specific object.\n+\n+    .. method:: models.PermissionsMixin.get_all_permissions(obj=None)\n+\n+        Returns a set of permission strings that the user has, both through\n+        group and user permissions.\n+\n+        If ``obj`` is passed in, only returns the permissions for this\n+        specific object.\n+\n+    .. method:: models.PermissionsMixin.has_perm(perm, obj=None)\n+\n+        Returns ``True`` if the user has the specified permission, where perm is\n+        in the format ``\"<app label>.<permission codename>\"`` (see\n+        :ref:`permissions <topic-authorization>`). If the user is inactive, this method will\n+        always return ``False``.\n+\n+        If ``obj`` is passed in, this method won't check for a permission for\n+        the model, but for this specific object.\n+\n+    .. method:: models.PermissionsMixin.has_perms(perm_list, obj=None)\n+\n+        Returns ``True`` if the user has each of the specified permissions,\n+        where each perm is in the format\n+        ``\"<app label>.<permission codename>\"``. If the user is inactive,\n+        this method will always return ``False``.\n+\n+        If ``obj`` is passed in, this method won't check for permissions for\n+        the model, but for the specific object.\n+\n+    .. method:: models.PermissionsMixin.has_module_perms(package_name)\n+\n+        Returns ``True`` if the user has any permissions in the given package\n+        (the Django app label). If the user is inactive, this method will\n+        always return ``False``.\n+\n+.. admonition:: ModelBackend\n+\n+    If you don't include the\n+    :class:`~django.contrib.auth.models.PermissionsMixin`, you must ensure you\n+    don't invoke the permissions methods on ``ModelBackend``. ``ModelBackend``\n+    assumes that certain fields are available on your user model. If your User\n+    model doesn't provide  those fields, you will receive database errors when\n+    you check permissions.\n+\n+Custom users and Proxy models\n+-----------------------------\n+\n+One limitation of custom User models is that installing a custom User model\n+will break any proxy model extending :class:`~django.contrib.auth.models.User`.\n+Proxy models must be based on a concrete base class; by defining a custom User\n+model, you remove the ability of Django to reliably identify the base class.\n+\n+If your project uses proxy models, you must either modify the proxy to extend\n+the User model that is currently in use in your project, or merge your proxy's\n+behavior into your User subclass.\n+\n+Custom users and signals\n+------------------------\n+\n+Another limitation of custom User models is that you can't use\n+:func:`django.contrib.auth.get_user_model()` as the sender or target of a signal\n+handler. Instead, you must register the handler with the resulting User model.\n+See :doc:`/topics/signals` for more information on registering an sending\n+signals.\n+\n+Custom users and testing/fixtures\n+---------------------------------\n+\n+If you are writing an application that interacts with the User model, you must\n+take some precautions to ensure that your test suite will run regardless of\n+the User model that is being used by a project. Any test that instantiates an\n+instance of User will fail if the User model has been swapped out. This\n+includes any attempt to create an instance of User with a fixture.\n+\n+To ensure that your test suite will pass in any project configuration,\n+``django.contrib.auth.tests.utils`` defines a ``@skipIfCustomUser`` decorator.\n+This decorator will cause a test case to be skipped if any User model other\n+than the default Django user is in use. This decorator can be applied to a\n+single test, or to an entire test class.\n+\n+Depending on your application, tests may also be needed to be added to ensure\n+that the application works with *any* user model, not just the default User\n+model. To assist with this, Django provides two substitute user models that\n+can be used in test suites:\n+\n+* ``django.contrib.auth.tests.custom_user.CustomUser``, a custom user\n+  model that uses an ``email`` field as the username, and has a basic\n+  admin-compliant permissions setup\n+\n+* ``django.contrib.auth.tests.custom_user.ExtensionUser``, a custom\n+  user model that extends ``django.contrib.auth.models.AbstractUser``,\n+  adding a ``date_of_birth`` field.\n+\n+You can then use the ``@override_settings`` decorator to make that test run\n+with the custom User model. For example, here is a skeleton for a test that\n+would test three possible User models -- the default, plus the two User\n+models provided by ``auth`` app::\n+\n+    from django.contrib.auth.tests.utils import skipIfCustomUser\n+    from django.test import TestCase\n+    from django.test.utils import override_settings\n+\n+\n+    class ApplicationTestCase(TestCase):\n+        @skipIfCustomUser\n+        def test_normal_user(self):\n+            \"Run tests for the normal user model\"\n+            self.assertSomething()\n+\n+        @override_settings(AUTH_USER_MODEL='auth.CustomUser')\n+        def test_custom_user(self):\n+            \"Run tests for a custom user model with email-based authentication\"\n+            self.assertSomething()\n+\n+        @override_settings(AUTH_USER_MODEL='auth.ExtensionUser')\n+        def test_extension_user(self):\n+            \"Run tests for a simple extension of the built-in User.\"\n+            self.assertSomething()\n+\n+\n+A full example\n+--------------\n+\n+Here is an example of an admin-compliant custom user app. This user model uses\n+an email address as the username, and has a required date of birth; it\n+provides no permission checking, beyond a simple `admin` flag on the user\n+account. This model would be compatible with all the built-in auth forms and\n+views, except for the User creation forms.\n+\n+This code would all live in a ``models.py`` file for a custom\n+authentication app::\n+\n+    from django.db import models\n+    from django.contrib.auth.models import (\n+        BaseUserManager, AbstractBaseUser\n+    )\n+\n+\n+    class MyUserManager(BaseUserManager):\n+        def create_user(self, email, date_of_birth, password=None):\n+            \"\"\"\n+            Creates and saves a User with the given email, date of\n+            birth and password.\n+            \"\"\"\n+            if not email:\n+                raise ValueError('Users must have an email address')\n+\n+            user = self.model(\n+                email=MyUserManager.normalize_email(email),\n+                date_of_birth=date_of_birth,\n+            )\n+\n+            user.set_password(password)\n+            user.save(using=self._db)\n+            return user\n+\n+        def create_superuser(self, email, date_of_birth, password):\n+            \"\"\"\n+            Creates and saves a superuser with the given email, date of\n+            birth and password.\n+            \"\"\"\n+            user = self.create_user(email,\n+                password=password,\n+                date_of_birth=date_of_birth\n+            )\n+            user.is_admin = True\n+            user.save(using=self._db)\n+            return user\n+\n+\n+    class MyUser(AbstractBaseUser):\n+        email = models.EmailField(\n+            verbose_name='email address',\n+            max_length=255,\n+            unique=True,\n+            db_index=True,\n+        )\n+        date_of_birth = models.DateField()\n+        is_active = models.BooleanField(default=True)\n+        is_admin = models.BooleanField(default=False)\n+\n+        objects = MyUserManager()\n+\n+        USERNAME_FIELD = 'email'\n+        REQUIRED_FIELDS = ['date_of_birth']\n+\n+        def get_full_name(self):\n+            # The user is identified by their email address\n+            return self.email\n+\n+        def get_short_name(self):\n+            # The user is identified by their email address\n+            return self.email\n+\n+        def __unicode__(self):\n+            return self.email\n+\n+        def has_perm(self, perm, obj=None):\n+            \"Does the user have a specific permission?\"\n+            # Simplest possible answer: Yes, always\n+            return True\n+\n+        def has_module_perms(self, app_label):\n+            \"Does the user have permissions to view the app `app_label`?\"\n+            # Simplest possible answer: Yes, always\n+            return True\n+\n+        @property\n+        def is_staff(self):\n+            \"Is the user a member of staff?\"\n+            # Simplest possible answer: All admins are staff\n+            return self.is_admin\n+\n+Then, to register this custom User model with Django's admin, the following\n+code would be required in the app's ``admin.py`` file::\n+\n+    from django import forms\n+    from django.contrib import admin\n+    from django.contrib.auth.models import Group\n+    from django.contrib.auth.admin import UserAdmin\n+    from django.contrib.auth.forms import ReadOnlyPasswordHashField\n+\n+    from customauth.models import MyUser\n+\n+\n+    class UserCreationForm(forms.ModelForm):\n+        \"\"\"A form for creating new users. Includes all the required\n+        fields, plus a repeated password.\"\"\"\n+        password1 = forms.CharField(label='Password', widget=forms.PasswordInput)\n+        password2 = forms.CharField(label='Password confirmation', widget=forms.PasswordInput)\n+\n+        class Meta:\n+            model = MyUser\n+            fields = ('email', 'date_of_birth')\n+\n+        def clean_password2(self):\n+            # Check that the two password entries match\n+            password1 = self.cleaned_data.get(\"password1\")\n+            password2 = self.cleaned_data.get(\"password2\")\n+            if password1 and password2 and password1 != password2:\n+                raise forms.ValidationError(\"Passwords don't match\")\n+            return password2\n+\n+        def save(self, commit=True):\n+            # Save the provided password in hashed format\n+            user = super(UserCreationForm, self).save(commit=False)\n+            user.set_password(self.cleaned_data[\"password1\"])\n+            if commit:\n+                user.save()\n+            return user\n+\n+\n+    class UserChangeForm(forms.ModelForm):\n+        \"\"\"A form for updating users. Includes all the fields on\n+        the user, but replaces the password field with admin's\n+        password hash display field.\n+        \"\"\"\n+        password = ReadOnlyPasswordHashField()\n+\n+        class Meta:\n+            model = MyUser\n+\n+        def clean_password(self):\n+            # Regardless of what the user provides, return the initial value.\n+            # This is done here, rather than on the field, because the\n+            # field does not have access to the initial value\n+            return self.initial[\"password\"]\n+\n+\n+    class MyUserAdmin(UserAdmin):\n+        # The forms to add and change user instances\n+        form = UserChangeForm\n+        add_form = UserCreationForm\n+\n+        # The fields to be used in displaying the User model.\n+        # These override the definitions on the base UserAdmin\n+        # that reference specific fields on auth.User.\n+        list_display = ('email', 'date_of_birth', 'is_admin')\n+        list_filter = ('is_admin',)\n+        fieldsets = (\n+            (None, {'fields': ('email', 'password')}),\n+            ('Personal info', {'fields': ('date_of_birth',)}),\n+            ('Permissions', {'fields': ('is_admin',)}),\n+            ('Important dates', {'fields': ('last_login',)}),\n+        )\n+        add_fieldsets = (\n+            (None, {\n+                'classes': ('wide',),\n+                'fields': ('email', 'date_of_birth', 'password1', 'password2')}\n+            ),\n+        )\n+        search_fields = ('email',)\n+        ordering = ('email',)\n+        filter_horizontal = ()\n+\n+    # Now register the new UserAdmin...\n+    admin.site.register(MyUser, MyUserAdmin)\n+    # ... and, since we're not using Django's builtin permissions,\n+    # unregister the Group model from admin.\n+    admin.site.unregister(Group)"
        },
        {
            "sha": "c4736135b0c06974bc7e4648cc57e70ce46e5ef0",
            "filename": "docs/topics/auth/default.txt",
            "status": "added",
            "additions": 1077,
            "deletions": 0,
            "changes": 1077,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fauth%2Fdefault.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fauth%2Fdefault.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth%2Fdefault.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -0,0 +1,1077 @@\n+======================================\n+Using the Django authentication system\n+======================================\n+\n+.. currentmodule:: django.contrib.auth\n+\n+This document explains the usage of Django's authentication system in its\n+default configuration. This configuration has evolved to serve the most common\n+project needs, handling a reasonably wide range of tasks, and has a careful\n+implementation of passwords and permissions, and can handle many projects as\n+is.  For projects where authentication needs differ from the default, Django\n+supports extensive :doc:`extension and customization\n+</topics/auth/customizing>` of authentication.\n+\n+Django authentication provides both authentication and authorization, together\n+and is generally referred to as the authentication system, as these features\n+somewhat coupled.\n+\n+.. _user-objects:\n+\n+User objects\n+============\n+\n+:class:`~django.contrib.auth.models.User` objects are the core of the\n+authentication system. They typically represent the people interacting with\n+your site and are used to enable things like restricting access, registering\n+user profiles, associating content with creators etc. Only one class of user\n+exists in Django's authentication framework, i.e., 'superusers' or admin\n+'staff' users are is just a user objects with special attributes set, not\n+different classes of user objects.\n+\n+The primary attributes of the default user are:\n+\n+* username\n+* password\n+* email\n+* first name\n+* last name\n+\n+See the :class:`full API documentation <django.contrib.auth.models.User>` for\n+full reference, the documentation that follows is more task oriented.\n+\n+.. _topics-auth-creating-users:\n+\n+Creating users\n+--------------\n+\n+The most direct way to create users is to use the included\n+:meth:`~django.contrib.auth.models.UserManager.create_user` helper function::\n+\n+    >>> from django.contrib.auth.models import User\n+    >>> user = User.objects.create_user('john', 'lennon@thebeatles.com', 'johnpassword')\n+\n+    # At this point, user is a User object that has already been saved\n+    # to the database. You can continue to change its attributes\n+    # if you want to change other fields.\n+    >>> user.last_name = 'Lennon'\n+    >>> user.save()\n+\n+If you have the Django admin installed, you can also :ref:`create users\n+interactively <auth-admin>`.\n+\n+.. _topics-auth-creating-superusers:\n+\n+Creating superusers\n+-------------------\n+\n+:djadmin:`manage.py syncdb <syncdb>` prompts you to create a superuser the\n+first time you run it with ``'django.contrib.auth'`` in your\n+:setting:`INSTALLED_APPS`. If you need to create a superuser at a later date,\n+you can use a command line utility::\n+\n+    manage.py createsuperuser --username=joe --email=joe@example.com\n+\n+You will be prompted for a password. After you enter one, the user will be\n+created immediately. If you leave off the :djadminopt:`--username` or the\n+:djadminopt:`--email` options, it will prompt you for those values.\n+\n+Changing passwords\n+------------------\n+\n+Django does not store raw (clear text) passwords on the user model, but only\n+a hash (see :doc:`documentation of how passwords are managed\n+</topics/auth/passwords>` for full details). Because of this, do not attempt to\n+manipulate the password attribute of the user directly. This is why a a helper\n+function is used when creating a user.\n+\n+To change a user's password, you have several options:\n+\n+:djadmin:`manage.py changepassword *username* <changepassword>` offers a method\n+of changing a User's password from the command line. It prompts you to\n+change the password of a given user which you must enter twice. If\n+they both match, the new password will be changed immediately. If you\n+do not supply a user, the command will attempt to change the password\n+whose username matches the current system user.\n+\n+You can also change a password programmatically, using\n+:meth:`~django.contrib.auth.models.User.set_password()`:\n+\n+.. code-block:: python\n+\n+    >>> from django.contrib.auth.models import User\n+    >>> u = User.objects.get(username__exact='john')\n+    >>> u.set_password('new password')\n+    >>> u.save()\n+\n+If you have the Django admin installed, you can also change user's passwords\n+on the :ref:`authentication system's admin pages <auth-admin>`.\n+\n+Django also provides :ref:`views <built-in-auth-views>` and :ref:`forms\n+<built-in-auth-forms>` that may be used to allow users to change their own\n+passwords.\n+\n+Authenticating Users\n+--------------------\n+\n+.. function:: authenticate(\\**credentials)\n+\n+    To authenticate a given username and password, use\n+    :func:`~django.contrib.auth.authenticate()`. It takes credentials in the\n+    form of keyword arguments, for the default configuration this is\n+    ``username`` and ``password``, and it returns\n+    a :class:`~django.contrib.auth.models.User` object if the password is valid\n+    for the given username. If the password is invalid,\n+    :func:`~django.contrib.auth.authenticate()` returns ``None``. Example::\n+\n+        from django.contrib.auth import authenticate\n+        user = authenticate(username='john', password='secret')\n+        if user is not None:\n+            # the password verified for the user\n+            if user.is_active:\n+                print(\"User is valid, active and authenticated\")\n+            else:\n+                print(\"The password is valid, but the account has been disabled!\")\n+        else:\n+            # the authentication system was unable to verify the username and password\n+            print(\"The username and password were incorrect.\")\n+\n+.. _topic-authorization:\n+\n+Permissions and Authorization\n+=============================\n+\n+Django comes with a simple permissions system. It provides a way to assign\n+permissions to specific users and groups of users.\n+\n+It's used by the Django admin site, but you're welcome to use it in your own\n+code.\n+\n+The Django admin site uses permissions as follows:\n+\n+* Access to view the \"add\" form and add an object is limited to users with\n+  the \"add\" permission for that type of object.\n+* Access to view the change list, view the \"change\" form and change an\n+  object is limited to users with the \"change\" permission for that type of\n+  object.\n+* Access to delete an object is limited to users with the \"delete\"\n+  permission for that type of object.\n+\n+Permissions can be set not only per type of object, but also per specific\n+object instance. By using the\n+:meth:`~django.contrib.admin.ModelAdmin.has_add_permission`,\n+:meth:`~django.contrib.admin.ModelAdmin.has_change_permission` and\n+:meth:`~django.contrib.admin.ModelAdmin.has_delete_permission` methods provided\n+by the :class:`~django.contrib.admin.ModelAdmin` class, it is possible to\n+customize permissions for different object instances of the same type.\n+\n+:class:`~django.contrib.auth.models.User` objects have two many-to-many\n+fields: ``groups`` and ``user_permissions``.\n+:class:`~django.contrib.auth.models.User` objects can access their related\n+objects in the same way as any other :doc:`Django model\n+</topics/db/models>`:\n+\n+.. code-block:: python\n+\n+    myuser.groups = [group_list]\n+    myuser.groups.add(group, group, ...)\n+    myuser.groups.remove(group, group, ...)\n+    myuser.groups.clear()\n+    myuser.user_permissions = [permission_list]\n+    myuser.user_permissions.add(permission, permission, ...)\n+    myuser.user_permissions.remove(permission, permission, ...)\n+    myuser.user_permissions.clear()\n+\n+Default permissions\n+-------------------\n+\n+When ``django.contrib.auth`` is listed in your :setting:`INSTALLED_APPS`\n+setting, it will ensure that three default permissions -- add, change and\n+delete -- are created for each Django model defined in one of your installed\n+applications.\n+\n+These permissions will be created when you run :djadmin:`manage.py syncdb\n+<syncdb>`; the first time you run ``syncdb`` after adding\n+``django.contrib.auth`` to :setting:`INSTALLED_APPS`, the default permissions\n+will be created for all previously-installed models, as well as for any new\n+models being installed at that time. Afterward, it will create default\n+permissions for new models each time you run :djadmin:`manage.py syncdb\n+<syncdb>`.\n+\n+Assuming you have an application with an\n+:attr:`~django.db.models.Options.app_label` ``foo`` and a model named ``Bar``,\n+to test for basic permissions you should use:\n+\n+* add: ``user.has_perm('foo.add_bar')``\n+* change: ``user.has_perm('foo.change_bar')``\n+* delete: ``user.has_perm('foo.delete_bar')``\n+\n+The :class:`~django.contrib.auth.models.Permission` model is rarely accessed\n+directly.\n+\n+Groups\n+------\n+\n+:class:`django.contrib.auth.models.Group` models are a generic way of\n+categorizing users so you can apply permissions, or some other label, to those\n+users. A user can belong to any number of groups.\n+\n+A user in a group automatically has the permissions granted to that group. For\n+example, if the group ``Site editors`` has the permission\n+``can_edit_home_page``, any user in that group will have that permission.\n+\n+Beyond permissions, groups are a convenient way to categorize users to give\n+them some label, or extended functionality. For example, you could create a\n+group ``'Special users'``, and you could write code that could, say, give them\n+access to a members-only portion of your site, or send them members-only email\n+messages.\n+\n+Programmatically creating permissions\n+-------------------------------------\n+\n+While :ref:`custom permissions <custom-permissions>` can be defined within\n+a model's ``Meta`` class, you can also create permissions directly. For\n+example, you can create the ``can_publish`` permission for a ``BlogPost`` model\n+in ``myapp``::\n+\n+    from django.contrib.auth.models import Group, Permission\n+    from django.contrib.contenttypes.models import ContentType\n+\n+    content_type = ContentType.objects.get(app_label='myapp', model='BlogPost')\n+    permission = Permission.objects.create(codename='can_publish',\n+                                           name='Can Publish Posts',\n+                                           content_type=content_type)\n+\n+The permission can then be assigned to a\n+:class:`~django.contrib.auth.models.User` via its ``user_permissions``\n+attribute or to a :class:`~django.contrib.auth.models.Group` via its\n+``permissions`` attribute.\n+\n+.. _auth-web-requests:\n+\n+Authentication in Web requests\n+==============================\n+\n+Django uses :doc:`sessions </topics/http/sessions>` and middleware to hook the\n+authentication system into :class:`request objects <django.http.HttpRequest>`.\n+\n+These provide a :attr:`request.user <django.http.HttpRequest.user>`  attribute\n+on every request which represents the current user. If the current user has not\n+logged in, this attribute will be set to an instance\n+of :class:`~django.contrib.auth.models.AnonymousUser`, otherwise it will be an\n+instance of :class:`~django.contrib.auth.models.User`.\n+\n+You can tell them apart with\n+:meth:`~django.contrib.auth.models.User.is_authenticated()`, like so::\n+\n+    if request.user.is_authenticated():\n+        # Do something for authenticated users.\n+    else:\n+        # Do something for anonymous users.\n+\n+.. _how-to-log-a-user-in:\n+\n+How to log a user in\n+--------------------\n+\n+If you have an authenticated user you want to attach to the current session\n+- this is done with a :func:`~django.contrib.auth.login` function.\n+\n+.. function:: login()\n+\n+    To log a user in, from a view, use :func:`~django.contrib.auth.login()`. It\n+    takes an :class:`~django.http.HttpRequest` object and a\n+    :class:`~django.contrib.auth.models.User` object.\n+    :func:`~django.contrib.auth.login()` saves the user's ID in the session,\n+    using Django's session framework.\n+\n+    Note that any data set during the anonymous session is retained in the\n+    session after a user logs in.\n+\n+    This example shows how you might use both\n+    :func:`~django.contrib.auth.authenticate()` and\n+    :func:`~django.contrib.auth.login()`::\n+\n+        from django.contrib.auth import authenticate, login\n+\n+        def my_view(request):\n+            username = request.POST['username']\n+            password = request.POST['password']\n+            user = authenticate(username=username, password=password)\n+            if user is not None:\n+                if user.is_active:\n+                    login(request, user)\n+                    # Redirect to a success page.\n+                else:\n+                    # Return a 'disabled account' error message\n+            else:\n+                # Return an 'invalid login' error message.\n+\n+.. admonition:: Calling ``authenticate()`` first\n+\n+    When you're manually logging a user in, you *must* call\n+    :func:`~django.contrib.auth.authenticate()` before you call\n+    :func:`~django.contrib.auth.login()`.\n+    :func:`~django.contrib.auth.authenticate()`\n+    sets an attribute on the :class:`~django.contrib.auth.models.User` noting\n+    which authentication backend successfully authenticated that user (see the\n+    :ref:`backends documentation <authentication-backends>` for details), and\n+    this information is needed later during the login process. An error will be\n+    raise if you try to login a user object retrieved from the database\n+    directly.\n+\n+How to log a user out\n+---------------------\n+\n+.. function:: logout()\n+\n+    To log out a user who has been logged in via\n+    :func:`django.contrib.auth.login()`, use\n+    :func:`django.contrib.auth.logout()` within your view. It takes an\n+    :class:`~django.http.HttpRequest` object and has no return value.\n+    Example::\n+\n+        from django.contrib.auth import logout\n+\n+        def logout_view(request):\n+            logout(request)\n+            # Redirect to a success page.\n+\n+    Note that :func:`~django.contrib.auth.logout()` doesn't throw any errors if\n+    the user wasn't logged in.\n+\n+    When you call :func:`~django.contrib.auth.logout()`, the session data for\n+    the current request is completely cleaned out. All existing data is\n+    removed. This is to prevent another person from using the same Web browser\n+    to log in and have access to the previous user's session data. If you want\n+    to put anything into the session that will be available to the user\n+    immediately after logging out, do that *after* calling\n+    :func:`django.contrib.auth.logout()`.\n+\n+Limiting access to logged-in users\n+----------------------------------\n+\n+The raw way\n+~~~~~~~~~~~\n+\n+The simple, raw way to limit access to pages is to check\n+:meth:`request.user.is_authenticated()\n+<django.contrib.auth.models.User.is_authenticated()>` and either redirect to a\n+login page::\n+\n+    from django.shortcuts import redirect\n+\n+    def my_view(request):\n+        if not request.user.is_authenticated():\n+            return redirect('/login/?next=%s' % request.path)\n+        # ...\n+\n+...or display an error message::\n+\n+    from django.shortcuts import render\n+\n+    def my_view(request):\n+        if not request.user.is_authenticated():\n+            return render('myapp/login_error.html')\n+        # ...\n+\n+.. currentmodule:: django.contrib.auth.decorators\n+\n+The login_required decorator\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+.. function:: login_required([redirect_field_name=REDIRECT_FIELD_NAME, login_url=None])\n+\n+    As a shortcut, you can use the convenient\n+    :func:`~django.contrib.auth.decorators.login_required` decorator::\n+\n+        from django.contrib.auth.decorators import login_required\n+\n+        @login_required\n+        def my_view(request):\n+            ...\n+\n+    :func:`~django.contrib.auth.decorators.login_required` does the following:\n+\n+    * If the user isn't logged in, redirect to\n+      :setting:`settings.LOGIN_URL <LOGIN_URL>`, passing the current absolute\n+      path in the query string. Example: ``/accounts/login/?next=/polls/3/``.\n+\n+    * If the user is logged in, execute the view normally. The view code is\n+      free to assume the user is logged in.\n+\n+    By default, the path that the user should be redirected to upon\n+    successful authentication is stored in a query string parameter called\n+    ``\"next\"``. If you would prefer to use a different name for this parameter,\n+    :func:`~django.contrib.auth.decorators.login_required` takes an\n+    optional ``redirect_field_name`` parameter::\n+\n+        from django.contrib.auth.decorators import login_required\n+\n+        @login_required(redirect_field_name='my_redirect_field')\n+        def my_view(request):\n+            ...\n+\n+    Note that if you provide a value to ``redirect_field_name``, you will most\n+    likely need to customize your login template as well, since the template\n+    context variable which stores the redirect path will use the value of\n+    ``redirect_field_name`` as its key rather than ``\"next\"`` (the default).\n+\n+    :func:`~django.contrib.auth.decorators.login_required` also takes an\n+    optional ``login_url`` parameter. Example::\n+\n+        from django.contrib.auth.decorators import login_required\n+\n+        @login_required(login_url='/accounts/login/')\n+        def my_view(request):\n+            ...\n+\n+    Note that if you don't specify the ``login_url`` parameter, you'll need to\n+    ensure that the :setting:`settings.LOGIN_URL <LOGIN_URL>` and your login\n+    view are properly associated. For example, using the defaults, add the\n+    following line to your URLconf::\n+\n+        (r'^accounts/login/$', 'django.contrib.auth.views.login'),\n+\n+    .. versionchanged:: 1.5\n+\n+    The :setting:`settings.LOGIN_URL <LOGIN_URL>` also accepts\n+    view function names and :ref:`named URL patterns <naming-url-patterns>`.\n+    This allows you to freely remap your login view within your URLconf\n+    without having to update the setting.\n+\n+.. note::\n+\n+    The login_required decorator does NOT check the is_active flag on a user.\n+\n+Limiting access to logged-in users that pass a test\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+To limit access based on certain permissions or some other test, you'd do\n+essentially the same thing as described in the previous section.\n+\n+The simple way is to run your test on :attr:`request.user\n+<django.http.HttpRequest.user>` in the view directly. For example, this view\n+checks to make sure the user has an email in the desired domain::\n+\n+    def my_view(request):\n+        if not '@example.com' in request.user.email:\n+            return HttpResponse(\"You can't vote in this poll.\")\n+        # ...\n+\n+.. function:: user_passes_test(func, [login_url=None])\n+\n+    As a shortcut, you can use the convenient ``user_passes_test`` decorator::\n+\n+        from django.contrib.auth.decorators import user_passes_test\n+\n+        def email_check(user):\n+            return '@example.com' in request.user.email\n+\n+        @user_passes_test(email_check)\n+        def my_view(request):\n+            ...\n+\n+    :func:`~django.contrib.auth.decorators.user_passes_test` takes a required\n+    argument: a callable that takes a\n+    :class:`~django.contrib.auth.models.User` object and returns ``True`` if\n+    the user is allowed to view the page. Note that\n+    :func:`~django.contrib.auth.decorators.user_passes_test` does not\n+    automatically check that the :class:`~django.contrib.auth.models.User` is\n+    not anonymous.\n+\n+    :func:`~django.contrib.auth.decorators.user_passes_test()` takes an\n+    optional ``login_url`` argument, which lets you specify the URL for your\n+    login page (:setting:`settings.LOGIN_URL <LOGIN_URL>` by default).\n+\n+    For example::\n+\n+        @user_passes_test(email_check, login_url='/login/')\n+        def my_view(request):\n+            ...\n+\n+The permission_required decorator\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+.. function:: permission_required([login_url=None, raise_exception=False])\n+\n+    It's a relatively common task to check whether a user has a particular\n+    permission. For that reason, Django provides a shortcut for that case: the\n+    :func:`~django.contrib.auth.decorators.permission_required()` decorator.::\n+\n+        from django.contrib.auth.decorators import permission_required\n+\n+        @permission_required('polls.can_vote')\n+        def my_view(request):\n+            ...\n+\n+    As for the :meth:`~django.contrib.auth.models.User.has_perm` method,\n+    permission names take the form ``\"<app label>.<permission codename>\"``\n+    (i.e. ``polls.can_vote`` for a permission on a model in the ``polls``\n+    application).\n+\n+    Note that :func:`~django.contrib.auth.decorators.permission_required()`\n+    also takes an optional ``login_url`` parameter. Example::\n+\n+        from django.contrib.auth.decorators import permission_required\n+\n+        @permission_required('polls.can_vote', login_url='/loginpage/')\n+        def my_view(request):\n+            ...\n+\n+    As in the :func:`~django.contrib.auth.decorators.login_required` decorator,\n+    ``login_url`` defaults to :setting:`settings.LOGIN_URL <LOGIN_URL>`.\n+\n+    .. versionchanged:: 1.4\n+\n+    Added ``raise_exception`` parameter. If given, the decorator will raise\n+    :exc:`~django.core.exceptions.PermissionDenied`, prompting\n+    :ref:`the 403 (HTTP Forbidden) view<http_forbidden_view>` instead of\n+    redirecting to the login page.\n+\n+Applying permissions to generic views\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+To apply a permission to a :doc:`class-based generic view\n+</ref/class-based-views/index>`, decorate the :meth:`View.dispatch\n+<django.views.generic.base.View.dispatch>` method on the class. See\n+:ref:`decorating-class-based-views` for details.\n+\n+\n+.. _built-in-auth-views:\n+\n+Authentication Views\n+--------------------\n+\n+.. module:: django.contrib.auth.views\n+\n+Django provides several views that you can use for handling login, logout, and\n+password management. These make use of the :ref:`stock auth forms\n+<built-in-auth-forms>` but you can pass in your own forms as well.\n+\n+Django provides no default template for the authentication views - however the\n+template context is documented for each view below.\n+\n+.. versionadded:: 1.4\n+\n+The built-in views all return\n+a :class:`~django.template.response.TemplateResponse` instance, which allows\n+you to easily customize the response data before rendering.  For more details,\n+see the :doc:`TemplateResponse documentation </ref/template-response>`.\n+\n+Most built-in authentication views provide a URL name for easier reference. See\n+:doc:`the URL documentation </topics/http/urls>` for details on using named URL\n+patterns.\n+\n+\n+.. function:: login(request, [template_name, redirect_field_name, authentication_form])\n+\n+    **URL name:** ``login``\n+\n+    See :doc:`the URL documentation </topics/http/urls>` for details on using\n+    named URL patterns.\n+\n+    Here's what ``django.contrib.auth.views.login`` does:\n+\n+    * If called via ``GET``, it displays a login form that POSTs to the\n+      same URL. More on this in a bit.\n+\n+    * If called via ``POST`` with user submitted credentials, it tries to log\n+      the user in. If login is successful, the view redirects to the URL\n+      specified in ``next``. If ``next`` isn't provided, it redirects to\n+      :setting:`settings.LOGIN_REDIRECT_URL <LOGIN_REDIRECT_URL>` (which\n+      defaults to ``/accounts/profile/``). If login isn't successful, it\n+      redisplays the login form.\n+\n+    It's your responsibility to provide the html for the login template\n+    , called ``registration/login.html`` by default. This template gets passed\n+    four template context variables:\n+\n+    * ``form``: A :class:`~django.forms.Form` object representing the\n+      :class:`~django.contrib.auth.forms.AuthenticationForm`.\n+\n+    * ``next``: The URL to redirect to after successful login. This may\n+      contain a query string, too.\n+\n+    * ``site``: The current :class:`~django.contrib.sites.models.Site`,\n+      according to the :setting:`SITE_ID` setting. If you don't have the\n+      site framework installed, this will be set to an instance of\n+      :class:`~django.contrib.sites.models.RequestSite`, which derives the\n+      site name and domain from the current\n+      :class:`~django.http.HttpRequest`.\n+\n+    * ``site_name``: An alias for ``site.name``. If you don't have the site\n+      framework installed, this will be set to the value of\n+      :attr:`request.META['SERVER_NAME'] <django.http.HttpRequest.META>`.\n+      For more on sites, see :doc:`/ref/contrib/sites`.\n+\n+    If you'd prefer not to call the template :file:`registration/login.html`,\n+    you can pass the ``template_name`` parameter via the extra arguments to\n+    the view in your URLconf. For example, this URLconf line would use\n+    :file:`myapp/login.html` instead::\n+\n+        (r'^accounts/login/$', 'django.contrib.auth.views.login', {'template_name': 'myapp/login.html'}),\n+\n+    You can also specify the name of the ``GET`` field which contains the URL\n+    to redirect to after login by passing ``redirect_field_name`` to the view.\n+    By default, the field is called ``next``.\n+\n+    Here's a sample :file:`registration/login.html` template you can use as a\n+    starting point. It assumes you have a :file:`base.html` template that\n+    defines a ``content`` block:\n+\n+    .. code-block:: html+django\n+\n+        {% extends \"base.html\" %}\n+\n+        {% block content %}\n+\n+        {% if form.errors %}\n+        <p>Your username and password didn't match. Please try again.</p>\n+        {% endif %}\n+\n+        <form method=\"post\" action=\"{% url 'django.contrib.auth.views.login' %}\">\n+        {% csrf_token %}\n+        <table>\n+        <tr>\n+            <td>{{ form.username.label_tag }}</td>\n+            <td>{{ form.username }}</td>\n+        </tr>\n+        <tr>\n+            <td>{{ form.password.label_tag }}</td>\n+            <td>{{ form.password }}</td>\n+        </tr>\n+        </table>\n+\n+        <input type=\"submit\" value=\"login\" />\n+        <input type=\"hidden\" name=\"next\" value=\"{{ next }}\" />\n+        </form>\n+\n+        {% endblock %}\n+\n+    If you have customized authentication (see\n+    :doc:`Customizing Authentication </topics/auth/customizing>`) you can pass a custom authentication form\n+    to the login view via the ``authentication_form`` parameter. This form must\n+    accept a ``request`` keyword argument in its ``__init__`` method, and\n+    provide a ``get_user`` method which returns the authenticated user object\n+    (this method is only ever called after successful form validation).\n+\n+    .. _forms documentation: ../forms/\n+    .. _site framework docs: ../sites/\n+\n+\n+.. function:: logout(request, [next_page, template_name, redirect_field_name])\n+\n+    Logs a user out.\n+\n+    **URL name:** ``logout``\n+\n+    **Optional arguments:**\n+\n+    * ``next_page``: The URL to redirect to after logout.\n+\n+    * ``template_name``: The full name of a template to display after\n+      logging the user out. Defaults to\n+      :file:`registration/logged_out.html` if no argument is supplied.\n+\n+    * ``redirect_field_name``: The name of a ``GET`` field containing the\n+      URL to redirect to after log out. Overrides ``next_page`` if the given\n+      ``GET`` parameter is passed.\n+\n+    **Template context:**\n+\n+    * ``title``: The string \"Logged out\", localized.\n+\n+    * ``site``: The current :class:`~django.contrib.sites.models.Site`,\n+      according to the :setting:`SITE_ID` setting. If you don't have the\n+      site framework installed, this will be set to an instance of\n+      :class:`~django.contrib.sites.models.RequestSite`, which derives the\n+      site name and domain from the current\n+      :class:`~django.http.HttpRequest`.\n+\n+    * ``site_name``: An alias for ``site.name``. If you don't have the site\n+      framework installed, this will be set to the value of\n+      :attr:`request.META['SERVER_NAME'] <django.http.HttpRequest.META>`.\n+      For more on sites, see :doc:`/ref/contrib/sites`.\n+\n+.. function:: logout_then_login(request[, login_url])\n+\n+    Logs a user out, then redirects to the login page.\n+\n+    **URL name:** No default URL provided\n+\n+    **Optional arguments:**\n+\n+    * ``login_url``: The URL of the login page to redirect to.\n+      Defaults to :setting:`settings.LOGIN_URL <LOGIN_URL>` if not supplied.\n+\n+.. function:: password_change(request[, template_name, post_change_redirect, password_change_form])\n+\n+    Allows a user to change their password.\n+\n+    **URL name:** ``password_change``\n+\n+    **Optional arguments:**\n+\n+    * ``template_name``: The full name of a template to use for\n+      displaying the password change form. Defaults to\n+      :file:`registration/password_change_form.html` if not supplied.\n+\n+    * ``post_change_redirect``: The URL to redirect to after a successful\n+      password change.\n+\n+    * ``password_change_form``: A custom \"change password\" form which must\n+      accept a ``user`` keyword argument. The form is responsible for\n+      actually changing the user's password. Defaults to\n+      :class:`~django.contrib.auth.forms.PasswordChangeForm`.\n+\n+    **Template context:**\n+\n+    * ``form``: The password change form (see ``password_change_form`` above).\n+\n+.. function:: password_change_done(request[, template_name])\n+\n+    The page shown after a user has changed their password.\n+\n+    **URL name:** ``password_change_done``\n+\n+    **Optional arguments:**\n+\n+    * ``template_name``: The full name of a template to use.\n+      Defaults to :file:`registration/password_change_done.html` if not\n+      supplied.\n+\n+.. function:: password_reset(request[, is_admin_site, template_name, email_template_name, password_reset_form, token_generator, post_reset_redirect, from_email])\n+\n+    Allows a user to reset their password by generating a one-time use link\n+    that can be used to reset the password, and sending that link to the\n+    user's registered email address.\n+\n+    .. versionchanged:: 1.4\n+        Users flagged with an unusable password (see\n+        :meth:`~django.contrib.auth.models.User.set_unusable_password()`\n+        will not be able to request a password reset to prevent misuse\n+        when using an external authentication source like LDAP.\n+\n+    **URL name:** ``password_reset``\n+\n+    **Optional arguments:**\n+\n+    * ``template_name``: The full name of a template to use for\n+      displaying the password reset form. Defaults to\n+      :file:`registration/password_reset_form.html` if not supplied.\n+\n+    * ``email_template_name``: The full name of a template to use for\n+      generating the email with the reset password link. Defaults to\n+      :file:`registration/password_reset_email.html` if not supplied.\n+\n+    * ``subject_template_name``: The full name of a template to use for\n+      the subject of the email with the reset password link. Defaults\n+      to :file:`registration/password_reset_subject.txt` if not supplied.\n+\n+      .. versionadded:: 1.4\n+\n+    * ``password_reset_form``: Form that will be used to get the email of\n+      the user to reset the password for. Defaults to\n+      :class:`~django.contrib.auth.forms.PasswordResetForm`.\n+\n+    * ``token_generator``: Instance of the class to check the one time link.\n+      This will default to ``default_token_generator``, it's an instance of\n+      ``django.contrib.auth.tokens.PasswordResetTokenGenerator``.\n+\n+    * ``post_reset_redirect``: The URL to redirect to after a successful\n+      password reset request.\n+\n+    * ``from_email``: A valid email address. By default Django uses\n+      the :setting:`DEFAULT_FROM_EMAIL`.\n+\n+    **Template context:**\n+\n+    * ``form``: The form (see ``password_reset_form`` above) for resetting\n+      the user's password.\n+\n+    **Email template context:**\n+\n+    * ``email``: An alias for ``user.email``\n+\n+    * ``user``: The current :class:`~django.contrib.auth.models.User`,\n+      according to the ``email`` form field. Only active users are able to\n+      reset their passwords (``User.is_active is True``).\n+\n+    * ``site_name``: An alias for ``site.name``. If you don't have the site\n+      framework installed, this will be set to the value of\n+      :attr:`request.META['SERVER_NAME'] <django.http.HttpRequest.META>`.\n+      For more on sites, see :doc:`/ref/contrib/sites`.\n+\n+    * ``domain``: An alias for ``site.domain``. If you don't have the site\n+      framework installed, this will be set to the value of\n+      ``request.get_host()``.\n+\n+    * ``protocol``: http or https\n+\n+    * ``uid``: The user's id encoded in base 36.\n+\n+    * ``token``: Token to check that the reset link is valid.\n+\n+    Sample ``registration/password_reset_email.html`` (email body template):\n+\n+    .. code-block:: html+django\n+\n+        Someone asked for password reset for email {{ email }}. Follow the link below:\n+        {{ protocol}}://{{ domain }}{% url 'password_reset_confirm' uidb36=uid token=token %}\n+\n+    The same template context is used for subject template. Subject must be\n+    single line plain text string.\n+\n+\n+.. function:: password_reset_done(request[, template_name])\n+\n+    The page shown after a user has been emailed a link to reset their\n+    password. This view is called by default if the :func:`password_reset` view\n+    doesn't have an explicit ``post_reset_redirect`` URL set.\n+\n+    **URL name:** ``password_reset_done``\n+\n+    **Optional arguments:**\n+\n+    * ``template_name``: The full name of a template to use.\n+      Defaults to :file:`registration/password_reset_done.html` if not\n+      supplied.\n+\n+.. function:: password_reset_confirm(request[, uidb36, token, template_name, token_generator, set_password_form, post_reset_redirect])\n+\n+    Presents a form for entering a new password.\n+\n+    **URL name:** ``password_reset_confirm``\n+\n+    **Optional arguments:**\n+\n+    * ``uidb36``: The user's id encoded in base 36. Defaults to ``None``.\n+\n+    * ``token``: Token to check that the password is valid. Defaults to\n+      ``None``.\n+\n+    * ``template_name``: The full name of a template to display the confirm\n+      password view. Default value is :file:`registration/password_reset_confirm.html`.\n+\n+    * ``token_generator``: Instance of the class to check the password. This\n+      will default to ``default_token_generator``, it's an instance of\n+      ``django.contrib.auth.tokens.PasswordResetTokenGenerator``.\n+\n+    * ``set_password_form``: Form that will be used to set the password.\n+      Defaults to :class:`~django.contrib.auth.forms.SetPasswordForm`\n+\n+    * ``post_reset_redirect``: URL to redirect after the password reset\n+      done. Defaults to ``None``.\n+\n+    **Template context:**\n+\n+    * ``form``: The form (see ``set_password_form`` above) for setting the\n+      new user's password.\n+\n+    * ``validlink``: Boolean, True if the link (combination of uidb36 and\n+      token) is valid or unused yet.\n+\n+.. function:: password_reset_complete(request[,template_name])\n+\n+   Presents a view which informs the user that the password has been\n+   successfully changed.\n+\n+   **URL name:** ``password_reset_complete``\n+\n+   **Optional arguments:**\n+\n+   * ``template_name``: The full name of a template to display the view.\n+     Defaults to :file:`registration/password_reset_complete.html`.\n+\n+Helper functions\n+----------------\n+\n+.. currentmodule:: django.contrib.auth.views\n+\n+.. function:: redirect_to_login(next[, login_url, redirect_field_name])\n+\n+    Redirects to the login page, and then back to another URL after a\n+    successful login.\n+\n+    **Required arguments:**\n+\n+    * ``next``: The URL to redirect to after a successful login.\n+\n+    **Optional arguments:**\n+\n+    * ``login_url``: The URL of the login page to redirect to.\n+      Defaults to :setting:`settings.LOGIN_URL <LOGIN_URL>` if not supplied.\n+\n+    * ``redirect_field_name``: The name of a ``GET`` field containing the\n+      URL to redirect to after log out. Overrides ``next`` if the given\n+      ``GET`` parameter is passed.\n+\n+\n+.. _built-in-auth-forms:\n+\n+Built-in forms\n+--------------\n+\n+.. module:: django.contrib.auth.forms\n+\n+If you don't want to use the built-in views, but want the convenience of not\n+having to write forms for this functionality, the authentication system\n+provides several built-in forms located in :mod:`django.contrib.auth.forms`:\n+\n+.. class:: AdminPasswordChangeForm\n+\n+    A form used in the admin interface to change a user's password.\n+\n+.. class:: AuthenticationForm\n+\n+    A form for logging a user in.\n+\n+.. class:: PasswordChangeForm\n+\n+    A form for allowing a user to change their password.\n+\n+.. class:: PasswordResetForm\n+\n+    A form for generating and emailing a one-time use link to reset a\n+    user's password.\n+\n+.. class:: SetPasswordForm\n+\n+    A form that lets a user change his/her password without entering the old\n+    password.\n+\n+.. class:: UserChangeForm\n+\n+    A form used in the admin interface to change a user's information and\n+    permissions.\n+\n+.. class:: UserCreationForm\n+\n+    A form for creating a new user.\n+\n+.. currentmodule:: django.contrib.auth\n+\n+\n+Authentication data in templates\n+--------------------------------\n+\n+The currently logged-in user and his/her permissions are made available in the\n+:doc:`template context </ref/templates/api>` when you use\n+:class:`~django.template.RequestContext`.\n+\n+.. admonition:: Technicality\n+\n+   Technically, these variables are only made available in the template context\n+   if you use :class:`~django.template.RequestContext` *and* your\n+   :setting:`TEMPLATE_CONTEXT_PROCESSORS` setting contains\n+   ``\"django.contrib.auth.context_processors.auth\"``, which is default. For\n+   more, see the :ref:`RequestContext docs <subclassing-context-requestcontext>`.\n+\n+Users\n+~~~~~\n+\n+When rendering a template :class:`~django.template.RequestContext`, the\n+currently logged-in user, either a  :class:`~django.contrib.auth.models.User`\n+instance or an :class:`~django.contrib.auth.models.AnonymousUser` instance, is\n+stored in the template variable ``{{ user }}``:\n+\n+.. code-block:: html+django\n+\n+    {% if user.is_authenticated %}\n+        <p>Welcome, {{ user.username }}. Thanks for logging in.</p>\n+    {% else %}\n+        <p>Welcome, new user. Please log in.</p>\n+    {% endif %}\n+\n+This template context variable is not available if a ``RequestContext`` is not\n+being used.\n+\n+Permissions\n+~~~~~~~~~~~\n+\n+The currently logged-in user's permissions are stored in the template variable\n+``{{ perms }}``. This is an instance of\n+``django.contrib.auth.context_processors.PermWrapper``, which is a\n+template-friendly proxy of permissions.\n+\n+In the ``{{ perms }}`` object, single-attribute lookup is a proxy to\n+:meth:`User.has_module_perms <django.contrib.auth.models.User.has_module_perms>`.\n+This example would display ``True`` if the logged-in user had any permissions\n+in the ``foo`` app::\n+\n+    {{ perms.foo }}\n+\n+Two-level-attribute lookup is a proxy to\n+:meth:`User.has_perm <django.contrib.auth.models.User.has_perm>`. This example\n+would display ``True`` if the logged-in user had the permission\n+``foo.can_vote``::\n+\n+    {{ perms.foo.can_vote }}\n+\n+Thus, you can check permissions in template ``{% if %}`` statements:\n+\n+.. code-block:: html+django\n+\n+    {% if perms.foo %}\n+        <p>You have permission to do something in the foo app.</p>\n+        {% if perms.foo.can_vote %}\n+            <p>You can vote!</p>\n+        {% endif %}\n+        {% if perms.foo.can_drive %}\n+            <p>You can drive!</p>\n+        {% endif %}\n+    {% else %}\n+        <p>You don't have permission to do anything in the foo app.</p>\n+    {% endif %}\n+\n+.. versionadded:: 1.5\n+    Permission lookup by \"if in\".\n+\n+It is possible to also look permissions up by ``{% if in %}`` statements.\n+For example:\n+\n+.. code-block:: html+django\n+\n+    {% if 'foo' in perms %}\n+        {% if 'foo.can_vote' in perms %}\n+            <p>In lookup works, too.</p>\n+        {% endif %}\n+    {% endif %}\n+\n+.. _auth-admin:\n+\n+Managing users in the admin\n+===========================\n+\n+When you have both ``django.contrib.admin`` and ``django.contrib.auth``\n+installed, the admin provides a convenient way to view and manage users,\n+groups, and permissions. Users can be created and deleted like any Django\n+model. Groups can be created, and permissions can be assigned to users or\n+groups. A log of user edits to models made within the admin is also stored and\n+displayed.\n+\n+Creating Users\n+--------------\n+\n+You should see a link to \"Users\" in the \"Auth\"\n+section of the main admin index page. The \"Add user\" admin page is different\n+than standard admin pages in that it requires you to choose a username and\n+password before allowing you to edit the rest of the user's fields.\n+\n+Also note: if you want a user account to be able to create users using the\n+Django admin site, you'll need to give them permission to add users *and*\n+change users (i.e., the \"Add user\" and \"Change user\" permissions). If an\n+account has permission to add users but not to change them, that account won't\n+be able to add users. Why? Because if you have permission to add users, you\n+have the power to create superusers, which can then, in turn, change other\n+users. So Django requires add *and* change permissions as a slight security\n+measure.\n+\n+Changing Passwords\n+------------------\n+\n+User passwords are not displayed in the admin (nor stored in the database), but\n+the :doc:`password storage details </topics/auth/passwords>` are displayed.\n+Included in the display of this information is a link to\n+a password change form that allows admins to change user passwords."
        },
        {
            "sha": "ddb2d2f99226735b71d13754a6022865162b5517",
            "filename": "docs/topics/auth/index.txt",
            "status": "added",
            "additions": 81,
            "deletions": 0,
            "changes": 81,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fauth%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fauth%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth%2Findex.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -0,0 +1,81 @@\n+=============================\n+User authentication in Django\n+=============================\n+\n+.. toctree::\n+   :hidden:\n+\n+   default\n+   passwords\n+   customizing\n+\n+.. module:: django.contrib.auth\n+   :synopsis: Django's authentication framework.\n+\n+Django comes with an user authentication system. It handles user accounts,\n+groups, permissions and cookie-based user sessions. This section of the\n+documentation explains how the default implementation works out of the box, as\n+well as how to :doc:`extend and customize </topics/auth/customizing>` it to\n+suit your project's needs.\n+\n+Overview\n+========\n+\n+The Django authentication system handles both authentication and authorization.\n+Briefly, authentication verifies a user is who they claim to be, and\n+authorization determines what an authenticated user is allowed to do. Here the\n+term authentication is used to refer to both tasks.\n+\n+The auth system consists of:\n+\n+* Users\n+* Permissions: Binary (yes/no) flags designating whether a user may perform\n+  a certain task.\n+* Groups: A generic way of applying labels and permissions to more than one\n+  user.\n+* A configurable password hashing system\n+* Forms and view tools for logging in users, or restricting content\n+* A pluggable backend system\n+\n+Installation\n+============\n+\n+Authentication support is bundled as a Django contrib module in\n+``django.contrib.auth``. By default, the required configuration is already\n+included in the :file:`settings.py` generated by :djadmin:`django-admin.py\n+startproject <startproject>`, these consist of two items listed in your\n+:setting:`INSTALLED_APPS` setting:\n+\n+1. ``'django.contrib.auth'`` contains the core of the authentication framework,\n+   and its default models.\n+2. ``'django.contrib.contenttypes'`` is the Django :doc:`content type system\n+   </ref/contrib/contenttypes>`, which allows permissions to be associated with\n+   models you create.\n+\n+and two items in your :setting:`MIDDLEWARE_CLASSES` setting:\n+\n+1. :class:`~django.contrib.sessions.middleware.SessionMiddleware` manages\n+   :doc:`sessions </topics/http/sessions>` across requests.\n+2. :class:`~django.contrib.auth.middleware.AuthenticationMiddleware` associates\n+   users with requests using sessions.\n+\n+With these settings in place, running the command ``manage.py syncdb`` creates\n+the necessary database tables for auth related models, creates permissions for\n+any models defined in your installed apps, and prompts you to create\n+a superuser account the first time you run it.\n+\n+Usage\n+=====\n+\n+:doc:`Using Django's default implementation <default>`\n+\n+* :ref:`Working with User objects <user-objects>`\n+* :ref:`Permissions and authorization <topic-authorization>`\n+* :ref:`Authentication in web requests <auth-web-requests>`\n+* :ref:`Managing users in the admin <auth-admin>`\n+\n+:doc:`API reference for the default implementation </ref/contrib/auth>`\n+\n+:doc:`Customizing Users and authentication <customizing>`\n+\n+:doc:`Password management in Django <passwords>`"
        },
        {
            "sha": "e6345aab2ea0ad0b7b793a4d3aea9e5b538595e8",
            "filename": "docs/topics/auth/passwords.txt",
            "status": "added",
            "additions": 212,
            "deletions": 0,
            "changes": 212,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fauth%2Fpasswords.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fauth%2Fpasswords.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth%2Fpasswords.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -0,0 +1,212 @@\n+=============================\n+Password management in Django\n+=============================\n+\n+Password management is something that should generally not be reinvented\n+unnecessarily, and Django endeavors to provide a secure and flexible set of\n+tools for managing user passwords. This document describes how Django stores\n+passwords, how the storage hashing can be configured, and some utilities to\n+work with hashed passwords.\n+\n+.. _auth_password_storage:\n+\n+How Django stores passwords\n+===========================\n+\n+.. versionadded:: 1.4\n+   Django 1.4 introduces a new flexible password storage system and uses\n+   PBKDF2 by default. Previous versions of Django used SHA1, and other\n+   algorithms couldn't be chosen.\n+\n+The :attr:`~django.contrib.auth.models.User.password` attribute of a\n+:class:`~django.contrib.auth.models.User` object is a string in this format::\n+\n+    algorithm$hash\n+\n+That's a storage algorithm, and hash, separated by the dollar-sign\n+character. The algorithm is one of a number of one way hashing or password\n+storage algorithms Django can use; see below. The hash is the result of the one-\n+way function.\n+\n+By default, Django uses the PBKDF2_ algorithm with a SHA256 hash, a\n+password stretching mechanism recommended by NIST_. This should be\n+sufficient for most users: it's quite secure, requiring massive\n+amounts of computing time to break.\n+\n+However, depending on your requirements, you may choose a different\n+algorithm, or even use a custom algorithm to match your specific\n+security situation. Again, most users shouldn't need to do this -- if\n+you're not sure, you probably don't.  If you do, please read on:\n+\n+Django chooses the an algorithm by consulting the :setting:`PASSWORD_HASHERS`\n+setting. This is a list of hashing algorithm classes that this Django\n+installation supports. The first entry in this list (that is,\n+``settings.PASSWORD_HASHERS[0]``) will be used to store passwords, and all the\n+other entries are valid hashers that can be used to check existing passwords.\n+This means that if you want to use a different algorithm, you'll need to modify\n+:setting:`PASSWORD_HASHERS` to list your preferred algorithm first in the list.\n+\n+The default for :setting:`PASSWORD_HASHERS` is::\n+\n+    PASSWORD_HASHERS = (\n+        'django.contrib.auth.hashers.PBKDF2PasswordHasher',\n+        'django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher',\n+        'django.contrib.auth.hashers.BCryptPasswordHasher',\n+        'django.contrib.auth.hashers.SHA1PasswordHasher',\n+        'django.contrib.auth.hashers.MD5PasswordHasher',\n+        'django.contrib.auth.hashers.CryptPasswordHasher',\n+    )\n+\n+This means that Django will use PBKDF2_ to store all passwords, but will support\n+checking passwords stored with PBKDF2SHA1, bcrypt_, SHA1_, etc. The next few\n+sections describe a couple of common ways advanced users may want to modify this\n+setting.\n+\n+.. _bcrypt_usage:\n+\n+Using bcrypt with Django\n+------------------------\n+\n+Bcrypt_ is a popular password storage algorithm that's specifically designed\n+for long-term password storage. It's not the default used by Django since it\n+requires the use of third-party libraries, but since many people may want to\n+use it Django supports bcrypt with minimal effort.\n+\n+To use Bcrypt as your default storage algorithm, do the following:\n+\n+1. Install the `py-bcrypt`_ library (probably by running ``sudo pip install\n+   py-bcrypt``, or downloading the library and installing it with ``python\n+   setup.py install``).\n+\n+2. Modify :setting:`PASSWORD_HASHERS` to list ``BCryptPasswordHasher``\n+   first. That is, in your settings file, you'd put::\n+\n+        PASSWORD_HASHERS = (\n+            'django.contrib.auth.hashers.BCryptPasswordHasher',\n+            'django.contrib.auth.hashers.PBKDF2PasswordHasher',\n+            'django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher',\n+            'django.contrib.auth.hashers.SHA1PasswordHasher',\n+            'django.contrib.auth.hashers.MD5PasswordHasher',\n+            'django.contrib.auth.hashers.CryptPasswordHasher',\n+        )\n+\n+   (You need to keep the other entries in this list, or else Django won't\n+   be able to upgrade passwords; see below).\n+\n+That's it -- now your Django install will use Bcrypt as the default storage\n+algorithm.\n+\n+.. admonition:: Other bcrypt implementations\n+\n+   There are several other implementations that allow bcrypt to be\n+   used with Django. Django's bcrypt support is NOT directly\n+   compatible with these. To upgrade, you will need to modify the\n+   hashes in your database to be in the form `bcrypt$(raw bcrypt\n+   output)`. For example:\n+   `bcrypt$$2a$12$NT0I31Sa7ihGEWpka9ASYrEFkhuTNeBQ2xfZskIiiJeyFXhRgS.Sy`.\n+\n+Increasing the work factor\n+--------------------------\n+\n+The PBKDF2 and bcrypt algorithms use a number of iterations or rounds of\n+hashing. This deliberately slows down attackers, making attacks against hashed\n+passwords harder. However, as computing power increases, the number of\n+iterations needs to be increased. We've chosen a reasonable default (and will\n+increase it with each release of Django), but you may wish to tune it up or\n+down, depending on your security needs and available processing power. To do so,\n+you'll subclass the appropriate algorithm and override the ``iterations``\n+parameters. For example, to increase the number of iterations used by the\n+default PBKDF2 algorithm:\n+\n+1. Create a subclass of ``django.contrib.auth.hashers.PBKDF2PasswordHasher``::\n+\n+        from django.contrib.auth.hashers import PBKDF2PasswordHasher\n+\n+        class MyPBKDF2PasswordHasher(PBKDF2PasswordHasher):\n+            \"\"\"\n+            A subclass of PBKDF2PasswordHasher that uses 100 times more iterations.\n+            \"\"\"\n+            iterations = PBKDF2PasswordHasher.iterations * 100\n+\n+   Save this somewhere in your project. For example, you might put this in\n+   a file like ``myproject/hashers.py``.\n+\n+2. Add your new hasher as the first entry in :setting:`PASSWORD_HASHERS`::\n+\n+        PASSWORD_HASHERS = (\n+            'myproject.hashers.MyPBKDF2PasswordHasher',\n+            'django.contrib.auth.hashers.PBKDF2PasswordHasher',\n+            'django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher',\n+            'django.contrib.auth.hashers.BCryptPasswordHasher',\n+            'django.contrib.auth.hashers.SHA1PasswordHasher',\n+            'django.contrib.auth.hashers.MD5PasswordHasher',\n+            'django.contrib.auth.hashers.CryptPasswordHasher',\n+        )\n+\n+\n+That's it -- now your Django install will use more iterations when it\n+stores passwords using PBKDF2.\n+\n+Password upgrading\n+------------------\n+\n+When users log in, if their passwords are stored with anything other than\n+the preferred algorithm, Django will automatically upgrade the algorithm\n+to the preferred one. This means that old installs of Django will get\n+automatically more secure as users log in, and it also means that you\n+can switch to new (and better) storage algorithms as they get invented.\n+\n+However, Django can only upgrade passwords that use algorithms mentioned in\n+:setting:`PASSWORD_HASHERS`, so as you upgrade to new systems you should make\n+sure never to *remove* entries from this list. If you do, users using un-\n+mentioned algorithms won't be able to upgrade.\n+\n+.. _sha1: http://en.wikipedia.org/wiki/SHA1\n+.. _pbkdf2: http://en.wikipedia.org/wiki/PBKDF2\n+.. _nist: http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf\n+.. _bcrypt: http://en.wikipedia.org/wiki/Bcrypt\n+.. _py-bcrypt: http://pypi.python.org/pypi/py-bcrypt/\n+\n+\n+Manually managing a user's password\n+===================================\n+\n+.. module:: django.contrib.auth.hashers\n+\n+.. versionadded:: 1.4\n+    The :mod:`django.contrib.auth.hashers` module provides a set of functions\n+    to create and validate hashed password. You can use them independently\n+    from the ``User`` model.\n+\n+.. function:: check_password(password, encoded)\n+\n+    .. versionadded:: 1.4\n+\n+    If you'd like to manually authenticate a user by comparing a plain-text\n+    password to the hashed password in the database, use the convenience\n+    function :func:`django.contrib.auth.hashers.check_password`. It takes two\n+    arguments: the plain-text password to check, and the full value of a\n+    user's ``password`` field in the database to check against, and returns\n+    ``True`` if they match, ``False`` otherwise.\n+\n+.. function:: make_password(password[, salt, hashers])\n+\n+    .. versionadded:: 1.4\n+\n+    Creates a hashed password in the format used by this application. It takes\n+    one mandatory argument: the password in plain-text. Optionally, you can\n+    provide a salt and a hashing algorithm to use, if you don't want to use the\n+    defaults (first entry of ``PASSWORD_HASHERS`` setting).\n+    Currently supported algorithms are: ``'pbkdf2_sha256'``, ``'pbkdf2_sha1'``,\n+    ``'bcrypt'`` (see :ref:`bcrypt_usage`), ``'sha1'``, ``'md5'``,\n+    ``'unsalted_md5'`` (only for backward compatibility) and ``'crypt'``\n+    if you have the ``crypt`` library installed. If the password argument is\n+    ``None``, an unusable password is returned (a one that will be never\n+    accepted by :func:`django.contrib.auth.hashers.check_password`).\n+\n+.. function:: is_password_usable(encoded_password)\n+\n+   .. versionadded:: 1.4\n+\n+   Checks if the given string is a hashed password that has a chance\n+   of being verified against :func:`django.contrib.auth.hashers.check_password`."
        },
        {
            "sha": "c4db0d77a73f9900aee81285ee7fb29b7d09c0e3",
            "filename": "docs/topics/db/models.txt",
            "status": "modified",
            "additions": 26,
            "deletions": 32,
            "changes": 58,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fdb%2Fmodels.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Fdb%2Fmodels.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Fmodels.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -1063,52 +1063,46 @@ Proxy models are declared like normal models. You tell Django that it's a\n proxy model by setting the :attr:`~django.db.models.Options.proxy` attribute of\n the ``Meta`` class to ``True``.\n \n-For example, suppose you want to add a method to the standard\n-:class:`~django.contrib.auth.models.User` model that will be used in your\n-templates. You can do it like this::\n+For example, suppose you want to add a method to the ``Person`` model described\n+above. You can do it like this::\n \n-    from django.contrib.auth.models import User\n-\n-    class MyUser(User):\n+    class MyPerson(Person):\n         class Meta:\n             proxy = True\n \n         def do_something(self):\n             ...\n \n-The ``MyUser`` class operates on the same database table as its parent\n-:class:`~django.contrib.auth.models.User` class. In particular, any new\n-instances of :class:`~django.contrib.auth.models.User` will also be accessible\n-through ``MyUser``, and vice-versa::\n+The ``MyPerson`` class operates on the same database table as its parent\n+``Person`` class. In particular, any new instances of ``Person`` will also be\n+accessible through ``MyPerson``, and vice-versa::\n \n-    >>> u = User.objects.create(username=\"foobar\")\n-    >>> MyUser.objects.get(username=\"foobar\")\n-    <MyUser: foobar>\n+    >>> p = Person.objects.create(first_name=\"foobar\")\n+    >>> MyPerson.objects.get(first_name=\"foobar\")\n+    <MyPerson: foobar>\n \n-You could also use a proxy model to define a different default ordering on a\n-model. The standard :class:`~django.contrib.auth.models.User` model has no\n-ordering defined on it (intentionally; sorting is expensive and we don't want\n-to do it all the time when we fetch users). You might want to regularly order\n-by the ``username`` attribute when you use the proxy. This is easy::\n+You could also use a proxy model to define a different default ordering on\n+a model. You might not always want to order the ``Person`` model, but regularly\n+order by the ``last_name`` attribute when you use the proxy. This is easy::\n \n-    class OrderedUser(User):\n+    class OrderedPerson(Person):\n         class Meta:\n-            ordering = [\"username\"]\n+            ordering = [\"last_name\"]\n             proxy = True\n \n-Now normal :class:`~django.contrib.auth.models.User` queries will be unordered\n-and ``OrderedUser`` queries will be ordered by ``username``.\n+Now normal ``Person`` queries will be unordered\n+and ``OrderedPerson`` queries will be ordered by ``last_name``.\n \n QuerySets still return the model that was requested\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n \n-There is no way to have Django return, say, a ``MyUser`` object whenever you\n-query for :class:`~django.contrib.auth.models.User` objects. A queryset for\n-``User`` objects will return those types of objects. The whole point of proxy\n-objects is that code relying on the original ``User`` will use those and your\n-own code can use the extensions you included (that no other code is relying on\n-anyway). It is not a way to replace the ``User`` (or any other) model\n-everywhere with something of your own creation.\n+There is no way to have Django return, say, a ``MyPerson`` object whenever you\n+query for ``Person`` objects. A queryset for ``Person`` objects will return\n+those types of objects. The whole point of proxy objects is that code relying\n+on the original ``Person`` will use those and your own code can use the\n+extensions you included (that no other code is relying on anyway). It is not\n+a way to replace the ``Person`` (or any other) model everywhere with something\n+of your own creation.\n \n Base class restrictions\n ~~~~~~~~~~~~~~~~~~~~~~~\n@@ -1131,12 +1125,12 @@ it will become the default, although any managers defined on the parent\n classes will still be available.\n \n Continuing our example from above, you could change the default manager used\n-when you query the ``User`` model like this::\n+when you query the ``Person`` model like this::\n \n     class NewManager(models.Manager):\n         ...\n \n-    class MyUser(User):\n+    class MyPerson(Person):\n         objects = NewManager()\n \n         class Meta:\n@@ -1154,7 +1148,7 @@ containing the new managers and inherit that after the primary base class::\n         class Meta:\n             abstract = True\n \n-    class MyUser(User, ExtraManagers):\n+    class MyPerson(Person, ExtraManagers):\n         class Meta:\n             proxy = True\n "
        },
        {
            "sha": "a69318f05ca5d4c2b576359a377276d7720d4407",
            "filename": "docs/topics/index.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Findex.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -14,7 +14,7 @@ Introductions to all the key parts of Django you'll need to know:\n    class-based-views/index\n    files\n    testing/index\n-   auth\n+   auth/index\n    cache\n    conditional-view-processing\n    signing"
        },
        {
            "sha": "0627bd40d7fd3a5aed0c6583a23a7eda9c9c8101",
            "filename": "docs/topics/testing/overview.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Ftesting%2Foverview.txt",
            "raw_url": "https://github.com/django/django/raw/11ded967c443087487f3872aafd86842608b4c64/docs%2Ftopics%2Ftesting%2Foverview.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Ftesting%2Foverview.txt?ref=11ded967c443087487f3872aafd86842608b4c64",
            "patch": "@@ -651,7 +651,7 @@ Use the ``django.test.client.Client`` class to make requests.\n \n     .. method:: Client.login(**credentials)\n \n-        If your site uses Django's :doc:`authentication system</topics/auth>`\n+        If your site uses Django's :doc:`authentication system</topics/auth/index>`\n         and you deal with logging in users, you can use the test client's\n         ``login()`` method to simulate the effect of a user logging into the\n         site.\n@@ -695,7 +695,7 @@ Use the ``django.test.client.Client`` class to make requests.\n \n     .. method:: Client.logout()\n \n-        If your site uses Django's :doc:`authentication system</topics/auth>`,\n+        If your site uses Django's :doc:`authentication system</topics/auth/index>`,\n         the ``logout()`` method can be used to simulate the effect of a user\n         logging out of your site.\n "
        }
    ],
    "stats": {
        "total": 5706,
        "additions": 2920,
        "deletions": 2786
    }
}