{
    "author": "aaugustin",
    "message": "Fixed #19280 -- Raised an explicit exception for the old {% url %} syntax.",
    "sha": "d26691958443a4b968fecba5510c37768153fafa",
    "files": [
        {
            "sha": "1f4627e32a2dabde3ff3c7b806814b161038908b",
            "filename": "django/template/defaulttags.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/d26691958443a4b968fecba5510c37768153fafa/django%2Ftemplate%2Fdefaulttags.py",
            "raw_url": "https://github.com/django/django/raw/d26691958443a4b968fecba5510c37768153fafa/django%2Ftemplate%2Fdefaulttags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaulttags.py?ref=d26691958443a4b968fecba5510c37768153fafa",
            "patch": "@@ -398,6 +398,10 @@ def render(self, context):\n \n         view_name = self.view_name.resolve(context)\n \n+        if not view_name:\n+            raise TemplateSyntaxError(\"'url' takes requires a non-empty first\"\n+                \" argument. The syntax changed in Django 1.5, see the docs.\")\n+\n         # Try to look up the URL twice: once given the view name, and again\n         # relative to what we guess is the \"main\" app. If they both fail,\n         # re-raise the NoReverseMatch unless we're using the"
        },
        {
            "sha": "c525162862e407f8520437262acb40a9e0e584bc",
            "filename": "docs/ref/templates/builtins.txt",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/d26691958443a4b968fecba5510c37768153fafa/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "raw_url": "https://github.com/django/django/raw/d26691958443a4b968fecba5510c37768153fafa/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Ftemplates%2Fbuiltins.txt?ref=d26691958443a4b968fecba5510c37768153fafa",
            "patch": "@@ -1035,6 +1035,16 @@ This will follow the normal :ref:`namespaced URL resolution strategy\n <topics-http-reversing-url-namespaces>`, including using any hints provided\n by the context as to the current application.\n \n+.. warning::\n+\n+    Don't forget to put quotes around the function path or pattern name!\n+\n+    .. versionchanged:: 1.5\n+        The first paramater used not to be quoted, which was inconsistent with\n+        other template tags. Since Django 1.5, it is evaluated according to\n+        the usual rules: it can be a quoted string or a variable that will be\n+        looked up in the context.\n+\n .. templatetag:: verbatim\n \n verbatim"
        },
        {
            "sha": "6d55ebbc17cbb5a2eaaa59bafd49d1e95a4d3d99",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/d26691958443a4b968fecba5510c37768153fafa/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d26691958443a4b968fecba5510c37768153fafa/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=d26691958443a4b968fecba5510c37768153fafa",
            "patch": "@@ -19,7 +19,8 @@\n     from urlparse import urljoin\n \n from django import template\n-from django.template import base as template_base, RequestContext, Template, Context\n+from django.template import (base as template_base, Context, RequestContext,\n+    Template, TemplateSyntaxError)\n from django.core import urlresolvers\n from django.template import loader\n from django.template.loaders import app_directories, filesystem, cached\n@@ -364,6 +365,14 @@ def test_url_reverse_no_settings_module(self):\n         with self.assertRaises(urlresolvers.NoReverseMatch):\n             t.render(c)\n \n+    def test_url_explicit_exception_for_old_syntax(self):\n+        # Regression test for #19280\n+        t = Template('{% url path.to.view %}')      # not quoted = old syntax\n+        c = Context()\n+        with self.assertRaisesRegexp(TemplateSyntaxError,\n+                \"The syntax changed in Django 1.5, see the docs.\"):\n+            t.render(c)\n+\n     @override_settings(DEBUG=True, TEMPLATE_DEBUG=True)\n     def test_no_wrapped_exception(self):\n         \"\"\""
        }
    ],
    "stats": {
        "total": 25,
        "additions": 24,
        "deletions": 1
    }
}