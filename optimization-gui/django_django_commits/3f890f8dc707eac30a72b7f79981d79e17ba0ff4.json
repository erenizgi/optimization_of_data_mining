{
    "author": "SmileyChris",
    "message": "Update doc example for overriding change_form.html\n\nSlightly reworded another related paragraph for clarity, too.",
    "sha": "3f890f8dc707eac30a72b7f79981d79e17ba0ff4",
    "files": [
        {
            "sha": "ec63cb2dccd6e8c434d930e10fef71fc902ef9d4",
            "filename": "docs/ref/contrib/admin/index.txt",
            "status": "modified",
            "additions": 16,
            "deletions": 15,
            "changes": 31,
            "blob_url": "https://github.com/django/django/blob/3f890f8dc707eac30a72b7f79981d79e17ba0ff4/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/3f890f8dc707eac30a72b7f79981d79e17ba0ff4/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt?ref=3f890f8dc707eac30a72b7f79981d79e17ba0ff4",
            "patch": "@@ -1790,31 +1790,32 @@ Because of the modular design of the admin templates, it is usually neither\n necessary nor advisable to replace an entire template. It is almost always\n better to override only the section of the template which you need to change.\n \n-To continue the example above, we want to add a new link next to the ``History``\n-tool for the ``Page`` model. After looking at ``change_form.html`` we determine\n-that we only need to override the ``object-tools`` block. Therefore here is our\n-new ``change_form.html`` :\n+To continue the example above, we want to add a new link next to the\n+``History`` tool for the ``Page`` model. After looking at ``change_form.html``\n+we determine that we only need to override the ``object-tools-items`` block.\n+Therefore here is our new ``change_form.html`` :\n \n .. code-block:: html+django\n \n     {% extends \"admin/change_form.html\" %}\n-    {% load i18n %}\n-    {% block object-tools %}\n-    {% if change %}{% if not is_popup %}\n-      <ul class=\"object-tools\">\n-        <li><a href=\"history/\" class=\"historylink\">{% trans \"History\" %}</a></li>\n-        <li><a href=\"mylink/\" class=\"historylink\">My Link</a></li>\n+    {% load i18n admin_urls %}\n+    {% block object-tools-items %}\n+        <li>\n+            <a href=\"{% url opts|admin_urlname:'history' original.pk|admin_urlquote %}\" class=\"historylink\">{% trans \"History\" %}</a>\n+        </li>\n+        <li>\n+            <a href=\"mylink/\" class=\"historylink\">My Link</a>\n+        </li>\n         {% if has_absolute_url %}\n-            <li><a href=\"../../../r/{{ content_type_id }}/{{ object_id }}/\" class=\"viewsitelink\">\n-                {% trans \"View on site\" %}</a>\n+            <li>\n+                <a href=\"{% url 'admin:view_on_site' content_type_id original.pk %}\" class=\"viewsitelink\">{% trans \"View on site\" %}</a>\n             </li>\n         {% endif%}\n-      </ul>\n-    {% endif %}{% endif %}\n     {% endblock %}\n \n And that's it! If we placed this file in the ``templates/admin/my_app``\n-directory, our link would appear on every model's change form.\n+directory, our link would appear on the change form for all models within\n+my_app.\n \n Templates which may be overridden per app or model\n --------------------------------------------------"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 16,
        "deletions": 15
    }
}