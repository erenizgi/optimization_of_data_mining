{
    "author": "claudep",
    "message": "Used ST_AsText for testing PostGIS raw query\n\nAsText will not be supported in further versions of PostGIS (>=2).",
    "sha": "65793d714ca6b03d2cd0fcfeec54652396f7ab48",
    "files": [
        {
            "sha": "cd3cec3074bdda1501f7427eb675eaa4c779df1e",
            "filename": "django/contrib/gis/tests/geoapp/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/65793d714ca6b03d2cd0fcfeec54652396f7ab48/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/65793d714ca6b03d2cd0fcfeec54652396f7ab48/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftests.py?ref=65793d714ca6b03d2cd0fcfeec54652396f7ab48",
            "patch": "@@ -191,7 +191,8 @@ def test_raw_sql_query(self):\n         cities1 = City.objects.all()\n         # Only PostGIS would support a 'select *' query because of its recognized\n         # HEXEWKB format for geometry fields\n-        cities2 = City.objects.raw('select id, name, asText(point) from geoapp_city')\n+        as_text = 'ST_AsText' if postgis else 'asText'\n+        cities2 = City.objects.raw('select id, name, %s(point) from geoapp_city' % as_text)\n         self.assertEqual(len(cities1), len(list(cities2)))\n         self.assertTrue(isinstance(cities2[0].point, Point))\n "
        },
        {
            "sha": "ec265342b307ba9f6c2c304ad91aa4285f4c1935",
            "filename": "docs/ref/contrib/gis/tutorial.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/65793d714ca6b03d2cd0fcfeec54652396f7ab48/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt",
            "raw_url": "https://github.com/django/django/raw/65793d714ca6b03d2cd0fcfeec54652396f7ab48/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt?ref=65793d714ca6b03d2cd0fcfeec54652396f7ab48",
            "patch": "@@ -674,8 +674,8 @@ __ http://spatialreference.org/ref/epsg/32140/\n .. admonition:: Raw queries\n \n     When using :doc:`raw queries </topics/db/sql>`, you should generally wrap\n-    your geometry fields with the ``asText()`` SQL function so as the field\n-    value will be recognized by GEOS::\n+    your geometry fields with the ``asText()`` SQL function (or ``ST_AsText``\n+    for PostGIS) so as the field value will be recognized by GEOS::\n \n         City.objects.raw('SELECT id, name, asText(point) from myapp_city')\n "
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}