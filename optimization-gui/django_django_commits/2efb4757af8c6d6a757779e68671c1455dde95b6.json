{
    "author": "freakboy3742",
    "message": "Fixed #14752 -- Corrected date parsing in WeekArchiveView when using %W as a week format. Thanks to msundstr for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14684 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "2efb4757af8c6d6a757779e68671c1455dde95b6",
    "files": [
        {
            "sha": "8c952495936a1f4087efdc42c732cb7b586d0394",
            "filename": "django/views/generic/dates.py",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/2efb4757af8c6d6a757779e68671c1455dde95b6/django%2Fviews%2Fgeneric%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/2efb4757af8c6d6a757779e68671c1455dde95b6/django%2Fviews%2Fgeneric%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fdates.py?ref=2efb4757af8c6d6a757779e68671c1455dde95b6",
            "patch": "@@ -348,9 +348,14 @@ def get_dated_items(self):\n         week = self.get_week()\n \n         date_field = self.get_date_field()\n+        week_format = self.get_week_format()\n+        week_start = {\n+            '%W': '1',\n+            '%U': '0',\n+        }[week_format]\n         date = _date_from_string(year, self.get_year_format(),\n-                                 '0', '%w',\n-                                 week, self.get_week_format())\n+                                 week_start, '%w',\n+                                 week, week_format)\n \n         # Construct a date-range lookup.\n         first_day = date"
        },
        {
            "sha": "c583d0ba608cfb444dc9f2f2d5d917bc82b9387e",
            "filename": "tests/regressiontests/generic_views/dates.py",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/2efb4757af8c6d6a757779e68671c1455dde95b6/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/2efb4757af8c6d6a757779e68671c1455dde95b6/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py?ref=2efb4757af8c6d6a757779e68671c1455dde95b6",
            "patch": "@@ -232,6 +232,16 @@ def test_week_view_invalid_pattern(self):\n         res = self.client.get('/dates/books/2007/week/no_week/')\n         self.assertEqual(res.status_code, 404)\n \n+    def test_week_start_Monday(self):\n+        # Regression for #14752\n+        res = self.client.get('/dates/books/2008/week/39/')\n+        self.assertEqual(res.status_code, 200)\n+        self.assertEqual(res.context['week'], datetime.date(2008, 9, 28))\n+\n+        res = self.client.get('/dates/books/2008/week/39/monday/')\n+        self.assertEqual(res.status_code, 200)\n+        self.assertEqual(res.context['week'], datetime.date(2008, 9, 29))\n+\n class DayArchiveViewTests(TestCase):\n     fixtures = ['generic-views-test-data.json']\n     urls = 'regressiontests.generic_views.urls'\n@@ -349,4 +359,3 @@ def test_date_detail_allow_future(self):\n \n     def test_invalid_url(self):\n         self.assertRaises(AttributeError, self.client.get, \"/dates/books/2008/oct/01/nopk/\")\n-"
        },
        {
            "sha": "843cabad151251709cc368619fcc5ed100989f8d",
            "filename": "tests/regressiontests/generic_views/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/2efb4757af8c6d6a757779e68671c1455dde95b6/tests%2Fregressiontests%2Fgeneric_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/2efb4757af8c6d6a757779e68671c1455dde95b6/tests%2Fregressiontests%2Fgeneric_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Ftests.py?ref=2efb4757af8c6d6a757779e68671c1455dde95b6",
            "patch": "@@ -2,4 +2,4 @@\n from regressiontests.generic_views.dates import ArchiveIndexViewTests, YearArchiveViewTests, MonthArchiveViewTests, WeekArchiveViewTests, DayArchiveViewTests, DateDetailViewTests\n from regressiontests.generic_views.detail import DetailViewTest\n from regressiontests.generic_views.edit import CreateViewTests, UpdateViewTests, DeleteViewTests\n-from regressiontests.generic_views.list import ListViewTests\n\\ No newline at end of file\n+from regressiontests.generic_views.list import ListViewTests"
        },
        {
            "sha": "61f038733104553535b962316770deb75cc9d490",
            "filename": "tests/regressiontests/generic_views/urls.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/2efb4757af8c6d6a757779e68671c1455dde95b6/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/2efb4757af8c6d6a757779e68671c1455dde95b6/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Furls.py?ref=2efb4757af8c6d6a757779e68671c1455dde95b6",
            "patch": "@@ -149,6 +149,8 @@\n         views.BookWeekArchive.as_view(allow_future=True)),\n     (r'^dates/books/(?P<year>\\d{4})/week/no_week/$',\n         views.BookWeekArchive.as_view()),\n+    (r'^dates/books/(?P<year>\\d{4})/week/(?P<week>\\d{1,2})/monday/$',\n+        views.BookWeekArchive.as_view(week_format='%W')),\n \n     # DayArchiveView\n     (r'^dates/books/(?P<year>\\d{4})/(?P<month>[a-z]{3})/(?P<day>\\d{1,2})/$',"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 20,
        "deletions": 4
    }
}