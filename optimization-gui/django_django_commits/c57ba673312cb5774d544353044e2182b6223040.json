{
    "author": "SmileyChris",
    "message": "Fixed #14502 again -- saner verbatim closing token\n\nPreviously, the closing token for the verbatim tag was specified as the\nfirst argument of the opening token. As pointed out by Jannis, this is\na rather major departure from the core tag standard.\n\nThe new method reflects how you can give a specific closing name to\n{% block %} tags.",
    "sha": "c57ba673312cb5774d544353044e2182b6223040",
    "files": [
        {
            "sha": "89bc90971f1972e4f2bc25de9614a04a0ccc371b",
            "filename": "django/template/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 7,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/c57ba673312cb5774d544353044e2182b6223040/django%2Ftemplate%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c57ba673312cb5774d544353044e2182b6223040/django%2Ftemplate%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fbase.py?ref=c57ba673312cb5774d544353044e2182b6223040",
            "patch": "@@ -216,13 +216,8 @@ def create_token(self, token_string, in_tag):\n             if token_string.startswith(VARIABLE_TAG_START):\n                 token = Token(TOKEN_VAR, token_string[2:-2].strip())\n             elif token_string.startswith(BLOCK_TAG_START):\n-                if block_content.startswith('verbatim'):\n-                    bits = block_content.split(' ', 1)\n-                    if bits[0] == 'verbatim':\n-                        if len(bits) > 1:\n-                            self.verbatim = bits[1]\n-                        else:\n-                            self.verbatim = 'endverbatim'\n+                if block_content[:9] in ('verbatim', 'verbatim '):\n+                    self.verbatim = 'end%s' % block_content\n                 token = Token(TOKEN_BLOCK, block_content)\n             elif token_string.startswith(COMMENT_TAG_START):\n                 content = ''"
        },
        {
            "sha": "83b72e120be1f2dab2f2aa3151566a6ed7acc508",
            "filename": "django/template/defaulttags.py",
            "status": "modified",
            "additions": 5,
            "deletions": 9,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/c57ba673312cb5774d544353044e2182b6223040/django%2Ftemplate%2Fdefaulttags.py",
            "raw_url": "https://github.com/django/django/raw/c57ba673312cb5774d544353044e2182b6223040/django%2Ftemplate%2Fdefaulttags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaulttags.py?ref=c57ba673312cb5774d544353044e2182b6223040",
            "patch": "@@ -1291,18 +1291,14 @@ def verbatim(parser, token):\n             {% don't process this %}\n         {% endverbatim %}\n \n-    You can also specify an alternate closing tag::\n+    You can also designate a specific closing tag block (allowing the\n+    unrendered use of ``{% endverbatim %}``)::\n \n-        {% verbatim -- %}\n+        {% verbatim myblock %}\n             ...\n-        {% -- %}\n+        {% endverbatim myblock %}\n     \"\"\"\n-    bits = token.contents.split(' ', 1)\n-    if len(bits) > 1:\n-        closing_tag = bits[1]\n-    else:\n-        closing_tag = 'endverbatim'\n-    nodelist = parser.parse((closing_tag,))\n+    nodelist = parser.parse(('endverbatim',))\n     parser.delete_first_token()\n     return VerbatimNode(nodelist.render(Context()))\n "
        },
        {
            "sha": "cf228d72f688a13636b2d96ae0a2db0de10a277d",
            "filename": "docs/ref/templates/builtins.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c57ba673312cb5774d544353044e2182b6223040/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "raw_url": "https://github.com/django/django/raw/c57ba673312cb5774d544353044e2182b6223040/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Ftemplates%2Fbuiltins.txt?ref=c57ba673312cb5774d544353044e2182b6223040",
            "patch": "@@ -1047,12 +1047,12 @@ Django's syntax. For example::\n         {{if dying}}Still alive.{{/if}}\n     {% endverbatim %}\n \n-You can also specify an alternate closing tag::\n+You can also designate a specific closing tag, allowing the use of\n+``{% endverbatim %}`` as part of the unrendered contents::\n \n-    {% verbatim finished %}\n-        The verbatim tag looks like this:\n-        {% verbatim %}{% endverbatim %}\n-    {% finished %}\n+    {% verbatim myblock %}\n+        Avoid template rendering via the {% verbatim %}{% endverbatim %} block.\n+    {% endverbatim myblock %}\n \n .. templatetag:: widthratio\n "
        },
        {
            "sha": "35d01221ab6994447f770e314cac6897d9f63ef1",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c57ba673312cb5774d544353044e2182b6223040/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c57ba673312cb5774d544353044e2182b6223040/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=c57ba673312cb5774d544353044e2182b6223040",
            "patch": "@@ -1623,7 +1623,7 @@ def get_template_tests(self):\n             'verbatim-tag03': (\"{% verbatim %}It's the {% verbatim %} tag{% endverbatim %}\", {}, \"It's the {% verbatim %} tag\"),\n             'verbatim-tag04': ('{% verbatim %}{% verbatim %}{% endverbatim %}{% endverbatim %}', {}, template.TemplateSyntaxError),\n             'verbatim-tag05': ('{% verbatim %}{% endverbatim %}{% verbatim %}{% endverbatim %}', {}, ''),\n-            'verbatim-tag06': (\"{% verbatim -- %}Don't {% endverbatim %} just yet{% -- %}\", {}, \"Don't {% endverbatim %} just yet\"),\n+            'verbatim-tag06': (\"{% verbatim special %}Don't {% endverbatim %} just yet{% endverbatim special %}\", {}, \"Don't {% endverbatim %} just yet\"),\n         }\n         return tests\n "
        }
    ],
    "stats": {
        "total": 35,
        "additions": 13,
        "deletions": 22
    }
}