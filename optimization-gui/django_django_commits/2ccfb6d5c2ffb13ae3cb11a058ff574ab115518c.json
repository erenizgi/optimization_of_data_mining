{
    "author": "jezdez",
    "message": "Fixed #16101 -- Added parameters to SingleObjectMixin to override the name of the URL keyword arguments used for pk and slug. Thanks, Andrew Ingram and Julien Phalip.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16569 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c",
    "files": [
        {
            "sha": "ab215733b5353af475dbf8d2af1c43b76e546d5b",
            "filename": "django/views/generic/detail.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/django%2Fviews%2Fgeneric%2Fdetail.py",
            "raw_url": "https://github.com/django/django/raw/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/django%2Fviews%2Fgeneric%2Fdetail.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fdetail.py?ref=2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c",
            "patch": "@@ -13,6 +13,8 @@ class SingleObjectMixin(object):\n     queryset = None\n     slug_field = 'slug'\n     context_object_name = None\n+    slug_url_kwarg = 'slug'\n+    pk_url_kwarg = 'pk'\n \n     def get_object(self, queryset=None):\n         \"\"\"\n@@ -27,8 +29,8 @@ def get_object(self, queryset=None):\n             queryset = self.get_queryset()\n \n         # Next, try looking up by primary key.\n-        pk = self.kwargs.get('pk', None)\n-        slug = self.kwargs.get('slug', None)\n+        pk = self.kwargs.get(self.pk_url_kwarg, None)\n+        slug = self.kwargs.get(self.slug_url_kwarg, None)\n         if pk is not None:\n             queryset = queryset.filter(pk=pk)\n "
        },
        {
            "sha": "2676c2cefca6a570d2125b4ce6a0590e47e3cbe3",
            "filename": "docs/ref/class-based-views.txt",
            "status": "modified",
            "additions": 19,
            "deletions": 4,
            "changes": 23,
            "blob_url": "https://github.com/django/django/blob/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/docs%2Fref%2Fclass-based-views.txt",
            "raw_url": "https://github.com/django/django/raw/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/docs%2Fref%2Fclass-based-views.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views.txt?ref=2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c",
            "patch": "@@ -136,6 +136,20 @@ SingleObjectMixin\n         The name of the field on the model that contains the slug. By default,\n         ``slug_field`` is ``'slug'``.\n \n+    .. attribute:: slug_url_kwarg\n+\n+        .. versionadded:: 1.4\n+\n+        The name of the URLConf keyword argument that contains the slug. By\n+        default, ``slug_url_kwarg`` is ``'slug'``.\n+\n+    .. attribute:: pk_url_kwarg\n+\n+        .. versionadded:: 1.4\n+\n+        The name of the URLConf keyword argument that contains the primary key.\n+        By default, ``pk_url_kwarg`` is ``'pk'``.\n+\n     .. attribute:: context_object_name\n \n         Designates the name of the variable to use in the context.\n@@ -146,10 +160,11 @@ SingleObjectMixin\n         ``queryset`` is provided, that queryset will be used as the\n         source of objects; otherwise,\n         :meth:`~SingleObjectMixin.get_queryset` will be used.\n-        :meth:`~SingleObjectMixin.get_object` looks for a ``pk``\n-        argument in the arguments to the view; if ``pk`` is found,\n-        this method performs a primary-key based lookup using that\n-        value. If no ``pk`` argument is found, it looks for a ``slug``\n+        ``get_object()`` looks for a\n+        :attr:`SingleObjectMixin.pk_url_kwarg` argument in the arguments\n+        to the view; if this argument is found, this method performs a\n+        primary-key based lookup using that value. If this argument is not\n+        found, it looks for a :attr:`SingleObjectMixin.slug_url_kwarg`\n         argument, and performs a slug lookup using the\n         :attr:`SingleObjectMixin.slug_field`.\n "
        },
        {
            "sha": "2723b42195408c1753b753245bb786f818ef3394",
            "filename": "docs/releases/1.4.txt",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/docs%2Freleases%2F1.4.txt",
            "raw_url": "https://github.com/django/django/raw/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/docs%2Freleases%2F1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.4.txt?ref=2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c",
            "patch": "@@ -153,6 +153,16 @@ number of characters. Truncated strings end with a translatable ellipsis\n sequence (\"...\"). See the :tfilter:`truncatechars docs <truncatechars>` for\n more details.\n \n+Customizable ``SingleObjectMixin`` URLConf kwargs\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Two new attributes,\n+:attr:`pk_url_kwarg<django.views.generic.detail.SingleObjectMixin.pk_url_kwarg>` and\n+:attr:`slug_url_kwarg<django.views.generic.detail.SingleObjectMixin.slug_url_kwarg>`,\n+have been added to :class:`django.views.generic.detail.SingleObjectMixin` to\n+enable the customization of URLConf keyword arguments used for single\n+object generic views.\n+\n CSRF improvements\n ~~~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "c1cc2fbddb31b3275aa66fedd305a40d9fde8611",
            "filename": "tests/regressiontests/generic_views/detail.py",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/tests%2Fregressiontests%2Fgeneric_views%2Fdetail.py",
            "raw_url": "https://github.com/django/django/raw/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/tests%2Fregressiontests%2Fgeneric_views%2Fdetail.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fdetail.py?ref=2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c",
            "patch": "@@ -21,13 +21,27 @@ def test_detail_by_pk(self):\n         self.assertEqual(res.context['author'], Author.objects.get(pk=1))\n         self.assertTemplateUsed(res, 'generic_views/author_detail.html')\n \n+    def test_detail_by_custom_pk(self):\n+        res = self.client.get('/detail/author/bycustompk/1/')\n+        self.assertEqual(res.status_code, 200)\n+        self.assertEqual(res.context['object'], Author.objects.get(pk=1))\n+        self.assertEqual(res.context['author'], Author.objects.get(pk=1))\n+        self.assertTemplateUsed(res, 'generic_views/author_detail.html')\n+\n     def test_detail_by_slug(self):\n         res = self.client.get('/detail/author/byslug/scott-rosenberg/')\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(res.context['object'], Author.objects.get(slug='scott-rosenberg'))\n         self.assertEqual(res.context['author'], Author.objects.get(slug='scott-rosenberg'))\n         self.assertTemplateUsed(res, 'generic_views/author_detail.html')\n \n+    def test_detail_by_custom_slug(self):\n+        res = self.client.get('/detail/author/bycustomslug/scott-rosenberg/')\n+        self.assertEqual(res.status_code, 200)\n+        self.assertEqual(res.context['object'], Author.objects.get(slug='scott-rosenberg'))\n+        self.assertEqual(res.context['author'], Author.objects.get(slug='scott-rosenberg'))\n+        self.assertTemplateUsed(res, 'generic_views/author_detail.html')\n+\n     def test_verbose_name(self):\n         res = self.client.get('/detail/artist/1/')\n         self.assertEqual(res.status_code, 200)"
        },
        {
            "sha": "0f844e0243d2c253ae48b86b9d926924390037da",
            "filename": "tests/regressiontests/generic_views/urls.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Furls.py?ref=2ccfb6d5c2ffb13ae3cb11a058ff574ab115518c",
            "patch": "@@ -30,8 +30,12 @@\n     url(r'^detail/author/(?P<pk>\\d+)/$',\n         views.AuthorDetail.as_view(),\n         name=\"author_detail\"),\n+    (r'^detail/author/bycustompk/(?P<foo>\\d+)/$',\n+        views.AuthorDetail.as_view(pk_url_kwarg='foo')),\n     (r'^detail/author/byslug/(?P<slug>[\\w-]+)/$',\n         views.AuthorDetail.as_view()),\n+    (r'^detail/author/bycustomslug/(?P<foo>[\\w-]+)/$',\n+        views.AuthorDetail.as_view(slug_url_kwarg='foo')),\n     (r'^detail/author/(?P<pk>\\d+)/template_name_suffix/$',\n         views.AuthorDetail.as_view(template_name_suffix='_view')),\n     (r'^detail/author/(?P<pk>\\d+)/template_name/$',"
        }
    ],
    "stats": {
        "total": 57,
        "additions": 51,
        "deletions": 6
    }
}