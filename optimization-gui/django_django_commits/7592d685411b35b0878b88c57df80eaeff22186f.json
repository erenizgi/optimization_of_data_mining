{
    "author": "jbronn",
    "message": "Now possible to run the GeoDjango test suite with a minimal settings file.  Refs #10420, #14439.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14653 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "7592d685411b35b0878b88c57df80eaeff22186f",
    "files": [
        {
            "sha": "beac8137a29c89a1ab139449ff6c2ce87a06b91e",
            "filename": "django/contrib/gis/tests/__init__.py",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/7592d685411b35b0878b88c57df80eaeff22186f/django%2Fcontrib%2Fgis%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/7592d685411b35b0878b88c57df80eaeff22186f/django%2Fcontrib%2Fgis%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2F__init__.py?ref=7592d685411b35b0878b88c57df80eaeff22186f",
            "patch": "@@ -30,8 +30,9 @@ def setup_test_environment(self, **kwargs):\n \n         # Getting and storing the original values of INSTALLED_APPS and\n         # the ROOT_URLCONF.\n-        self.old_installed = settings.INSTALLED_APPS\n-        self.old_root_urlconf = settings.ROOT_URLCONF\n+        self.old_installed = getattr(settings, 'INSTALLED_APPS', None)\n+        self.old_root_urlconf = getattr(settings, 'ROOT_URLCONF', None)\n+        self.old_site_id = getattr(settings, 'SITE_ID', None)\n \n         # Tests that require use of a spatial database (e.g., creation of models)\n         self.geo_apps = ['geoapp', 'relatedapp']\n@@ -62,11 +63,13 @@ def setup_test_environment(self, **kwargs):\n \n         # Setting the URLs.\n         settings.ROOT_URLCONF = 'django.contrib.gis.tests.urls'\n+        settings.SITE_ID = 1\n \n     def teardown_test_environment(self, **kwargs):\n         super(GeoDjangoTestSuiteRunner, self).teardown_test_environment(**kwargs)\n         settings.INSTALLED_APPS = self.old_installed\n         settings.ROOT_URLCONF = self.old_root_urlconf\n+        settings.SITE_ID = self.old_site_id\n \n     def build_suite(self, test_labels, extra_tests=None, **kwargs):\n         \"\"\""
        }
    ],
    "stats": {
        "total": 7,
        "additions": 5,
        "deletions": 2
    }
}