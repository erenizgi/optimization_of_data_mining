{
    "author": "aaugustin",
    "message": "Fixed #18728 -- Made colon optional in tzinfo\n\nMade two-digit hours and minutes mandatory in tzinfo (the code used\nto crash if a one-digit representation was provided).\n\nAdded standalone tests for django.utils.dateparse.",
    "sha": "2f59e94a4150c84c8b4e387fd82f0509eadc4f4b",
    "files": [
        {
            "sha": "b4bd559a66ed21cc04be66349c8995b95e86b20a",
            "filename": "django/utils/dateparse.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/2f59e94a4150c84c8b4e387fd82f0509eadc4f4b/django%2Futils%2Fdateparse.py",
            "raw_url": "https://github.com/django/django/raw/2f59e94a4150c84c8b4e387fd82f0509eadc4f4b/django%2Futils%2Fdateparse.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fdateparse.py?ref=2f59e94a4150c84c8b4e387fd82f0509eadc4f4b",
            "patch": "@@ -15,16 +15,16 @@\n     r'(?P<year>\\d{4})-(?P<month>\\d{1,2})-(?P<day>\\d{1,2})$'\n )\n \n-datetime_re = re.compile(\n-    r'(?P<year>\\d{4})-(?P<month>\\d{1,2})-(?P<day>\\d{1,2})'\n-    r'[T ](?P<hour>\\d{1,2}):(?P<minute>\\d{1,2})'\n+time_re = re.compile(\n+    r'(?P<hour>\\d{1,2}):(?P<minute>\\d{1,2})'\n     r'(?::(?P<second>\\d{1,2})(?:\\.(?P<microsecond>\\d{1,6})\\d{0,6})?)?'\n-    r'(?P<tzinfo>Z|[+-]\\d{1,2}:\\d{1,2})?$'\n )\n \n-time_re = re.compile(\n-    r'(?P<hour>\\d{1,2}):(?P<minute>\\d{1,2})'\n+datetime_re = re.compile(\n+    r'(?P<year>\\d{4})-(?P<month>\\d{1,2})-(?P<day>\\d{1,2})'\n+    r'[T ](?P<hour>\\d{1,2}):(?P<minute>\\d{1,2})'\n     r'(?::(?P<second>\\d{1,2})(?:\\.(?P<microsecond>\\d{1,6})\\d{0,6})?)?'\n+    r'(?P<tzinfo>Z|[+-]\\d{2}:?\\d{2})?$'\n )\n \n def parse_date(value):\n@@ -73,7 +73,7 @@ def parse_datetime(value):\n         if tzinfo == 'Z':\n             tzinfo = utc\n         elif tzinfo is not None:\n-            offset = 60 * int(tzinfo[1:3]) + int(tzinfo[4:6])\n+            offset = 60 * int(tzinfo[1:3]) + int(tzinfo[-2:])\n             if tzinfo[0] == '-':\n                 offset = -offset\n             tzinfo = FixedOffset(offset)"
        },
        {
            "sha": "1a6ca646b8425560b0b34b47d17b69329500a1f8",
            "filename": "tests/regressiontests/utils/dateparse.py",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/django/django/blob/2f59e94a4150c84c8b4e387fd82f0509eadc4f4b/tests%2Fregressiontests%2Futils%2Fdateparse.py",
            "raw_url": "https://github.com/django/django/raw/2f59e94a4150c84c8b4e387fd82f0509eadc4f4b/tests%2Fregressiontests%2Futils%2Fdateparse.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fdateparse.py?ref=2f59e94a4150c84c8b4e387fd82f0509eadc4f4b",
            "patch": "@@ -0,0 +1,44 @@\n+from __future__ import unicode_literals\n+\n+from datetime import date, time, datetime\n+\n+from django.utils.dateparse import parse_date, parse_time, parse_datetime\n+from django.utils import unittest\n+from django.utils.tzinfo import FixedOffset\n+\n+\n+class DateParseTests(unittest.TestCase):\n+\n+    def test_parse_date(self):\n+        # Valid inputs\n+        self.assertEqual(parse_date('2012-04-23'), date(2012, 4, 23))\n+        self.assertEqual(parse_date('2012-4-9'), date(2012, 4, 9))\n+        # Invalid inputs\n+        self.assertEqual(parse_date('20120423'), None)\n+        self.assertRaises(ValueError, parse_date, '2012-04-56')\n+\n+    def test_parse_time(self):\n+        # Valid inputs\n+        self.assertEqual(parse_time('09:15:00'), time(9, 15))\n+        self.assertEqual(parse_time('10:10'), time(10, 10))\n+        self.assertEqual(parse_time('10:20:30.400'), time(10, 20, 30, 400000))\n+        self.assertEqual(parse_time('4:8:16'), time(4, 8, 16))\n+        # Invalid inputs\n+        self.assertEqual(parse_time('091500'), None)\n+        self.assertRaises(ValueError, parse_time, '09:15:90')\n+\n+    def test_parse_datetime(self):\n+        # Valid inputs\n+        self.assertEqual(parse_datetime('2012-04-23T09:15:00'),\n+            datetime(2012, 4, 23, 9, 15))\n+        self.assertEqual(parse_datetime('2012-4-9 4:8:16'),\n+            datetime(2012, 4, 9, 4, 8, 16))\n+        self.assertEqual(parse_datetime('2012-04-23T09:15:00Z'),\n+            datetime(2012, 4, 23, 9, 15, 0, 0, FixedOffset(0)))\n+        self.assertEqual(parse_datetime('2012-4-9 4:8:16-0320'),\n+            datetime(2012, 4, 9, 4, 8, 16, 0, FixedOffset(-200)))\n+        self.assertEqual(parse_datetime('2012-04-23T10:20:30.400+02:30'),\n+            datetime(2012, 4, 23, 10, 20, 30, 400000, FixedOffset(150)))\n+        # Invalid inputs\n+        self.assertEqual(parse_datetime('20120423091500'), None)\n+        self.assertRaises(ValueError, parse_datetime, '2012-04-56T09:15:90')"
        },
        {
            "sha": "09547a0c95625f1827a9f51ace292f07a1a3989a",
            "filename": "tests/regressiontests/utils/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/2f59e94a4150c84c8b4e387fd82f0509eadc4f4b/tests%2Fregressiontests%2Futils%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/2f59e94a4150c84c8b4e387fd82f0509eadc4f4b/tests%2Fregressiontests%2Futils%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Ftests.py?ref=2f59e94a4150c84c8b4e387fd82f0509eadc4f4b",
            "patch": "@@ -26,3 +26,4 @@\n from .crypto import TestUtilsCryptoPBKDF2\n from .archive import TestZip, TestTar, TestGzipTar, TestBzip2Tar\n from .regex_helper import NormalizeTests\n+from .dateparse import DateParseTests"
        }
    ],
    "stats": {
        "total": 59,
        "additions": 52,
        "deletions": 7
    }
}