{
    "author": "claudep",
    "message": "Cleaned up WSGIRequestHandler get_environ to be Python 3 compatible\n\nheaders.type/typeheader attributes are gone in Python 3. Thanks\nVinay Sajip for the inspiration of his Python 3 branch.",
    "sha": "91727c76cda3f8bf286ee69652bc3625f150f6e7",
    "files": [
        {
            "sha": "be2962d660f6a82f42af9e3c59622233e0d9248f",
            "filename": "django/core/servers/basehttp.py",
            "status": "modified",
            "additions": 12,
            "deletions": 14,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/91727c76cda3f8bf286ee69652bc3625f150f6e7/django%2Fcore%2Fservers%2Fbasehttp.py",
            "raw_url": "https://github.com/django/django/raw/91727c76cda3f8bf286ee69652bc3625f150f6e7/django%2Fcore%2Fservers%2Fbasehttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fservers%2Fbasehttp.py?ref=91727c76cda3f8bf286ee69652bc3625f150f6e7",
            "patch": "@@ -146,25 +146,23 @@ def get_environ(self):\n         env['PATH_INFO'] = urllib.unquote(path)\n         env['QUERY_STRING'] = query\n         env['REMOTE_ADDR'] = self.client_address[0]\n+        env['CONTENT_TYPE'] = self.headers.get('content-type', 'text/plain')\n \n-        if self.headers.typeheader is None:\n-            env['CONTENT_TYPE'] = self.headers.type\n-        else:\n-            env['CONTENT_TYPE'] = self.headers.typeheader\n-\n-        length = self.headers.getheader('content-length')\n+        length = self.headers.get('content-length')\n         if length:\n             env['CONTENT_LENGTH'] = length\n \n-        for h in self.headers.headers:\n-            k,v = h.split(':',1)\n-            k=k.replace('-','_').upper(); v=v.strip()\n-            if k in env:\n-                continue                    # skip content length, type,etc.\n-            if 'HTTP_'+k in env:\n-                env['HTTP_'+k] += ','+v     # comma-separate multiple headers\n+        for key, value in self.headers.items():\n+            key = key.replace('-','_').upper()\n+            value = value.strip()\n+            if key in env:\n+                # Skip content length, type, etc.\n+                continue\n+            if 'HTTP_' + key in env:\n+                # Comma-separate multiple headers\n+                env['HTTP_' + key] += ',' + value\n             else:\n-                env['HTTP_'+k] = v\n+                env['HTTP_' + key] = value\n         return env\n \n     def log_message(self, format, *args):"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 12,
        "deletions": 14
    }
}