{
    "author": "duilio",
    "message": "Comment._get_userinfo is thread safe now",
    "sha": "6524ef501d99e959dc8d1f1c5b852f8f2849ddc7",
    "files": [
        {
            "sha": "475b3c8deac7b9e75f218b3c74cd3bef5400e205",
            "filename": "django/contrib/comments/models.py",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/6524ef501d99e959dc8d1f1c5b852f8f2849ddc7/django%2Fcontrib%2Fcomments%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/6524ef501d99e959dc8d1f1c5b852f8f2849ddc7/django%2Fcontrib%2Fcomments%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcomments%2Fmodels.py?ref=6524ef501d99e959dc8d1f1c5b852f8f2849ddc7",
            "patch": "@@ -92,23 +92,24 @@ def _get_userinfo(self):\n         This dict will have ``name``, ``email``, and ``url`` fields.\n         \"\"\"\n         if not hasattr(self, \"_userinfo\"):\n-            self._userinfo = {\n+            userinfo = {\n                 \"name\"  : self.user_name,\n                 \"email\" : self.user_email,\n                 \"url\"   : self.user_url\n             }\n             if self.user_id:\n                 u = self.user\n                 if u.email:\n-                    self._userinfo[\"email\"] = u.email\n+                    userinfo[\"email\"] = u.email\n \n                 # If the user has a full name, use that for the user name.\n                 # However, a given user_name overrides the raw user.username,\n                 # so only use that if this comment has no associated name.\n                 if u.get_full_name():\n-                    self._userinfo[\"name\"] = self.user.get_full_name()\n+                    userinfo[\"name\"] = self.user.get_full_name()\n                 elif not self.user_name:\n-                    self._userinfo[\"name\"] = u.username\n+                    userinfo[\"name\"] = u.username\n+            self._userinfo = userinfo\n         return self._userinfo\n     userinfo = property(_get_userinfo, doc=_get_userinfo.__doc__)\n "
        }
    ],
    "stats": {
        "total": 9,
        "additions": 5,
        "deletions": 4
    }
}