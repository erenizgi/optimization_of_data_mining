{
    "author": "ramiro",
    "message": "Fixed a couple of tests migrated to unit tests in r14279 so they actually and correctly exercise the functionality under test.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14981 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "a360240c56a47752f65146777c0f1d9055a86bc8",
    "files": [
        {
            "sha": "c5fa18e9d612bb71f99989b86ba2e3a65600a18c",
            "filename": "tests/regressiontests/queries/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/a360240c56a47752f65146777c0f1d9055a86bc8/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/a360240c56a47752f65146777c0f1d9055a86bc8/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fqueries%2Ftests.py?ref=a360240c56a47752f65146777c0f1d9055a86bc8",
            "patch": "@@ -27,6 +27,12 @@ def assertRaisesMessage(self, exc, msg, func, *args, **kwargs):\n         except Exception, e:\n             self.assertEqual(msg, str(e))\n             self.assertTrue(isinstance(e, exc), \"Expected %s, got %s\" % (exc, type(e)))\n+        else:\n+            if hasattr(exc, '__name__'):\n+                excName = exc.__name__\n+            else:\n+                excName = str(exc)\n+            raise AssertionError, \"%s not raised\" % excName\n \n \n class Queries1Tests(BaseQuerysetTest):\n@@ -1528,12 +1534,12 @@ def test_infinite_loop(self):\n         self.assertRaisesMessage(\n             FieldError,\n             'Infinite loop caused by ordering.',\n-            LoopX.objects.all\n+            lambda: list(LoopX.objects.all()) # Force queryset evaluation with list()\n         )\n         self.assertRaisesMessage(\n             FieldError,\n             'Infinite loop caused by ordering.',\n-            LoopZ.objects.all\n+            lambda: list(LoopZ.objects.all()) # Force queryset evaluation with list()\n         )\n \n         # Note that this doesn't cause an infinite loop, since the default"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 8,
        "deletions": 2
    }
}