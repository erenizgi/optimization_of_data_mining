{
    "author": "jezdez",
    "message": "Fixed #14312 -- Raising an ``IncorrectLookupParameters`` if the page number given to an admin change list exceeds the number of the last page. Thanks, mk.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14889 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "d8165ce1566771960cf33e414c1a6e643fd46dea",
    "files": [
        {
            "sha": "606388c8179173968d6bac85d9762da1589b2a23",
            "filename": "django/contrib/admin/views/main.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/d8165ce1566771960cf33e414c1a6e643fd46dea/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py",
            "raw_url": "https://github.com/django/django/raw/d8165ce1566771960cf33e414c1a6e643fd46dea/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py?ref=d8165ce1566771960cf33e414c1a6e643fd46dea",
            "patch": "@@ -117,7 +117,7 @@ def get_results(self, request):\n             try:\n                 result_list = paginator.page(self.page_num+1).object_list\n             except InvalidPage:\n-                result_list = ()\n+                raise IncorrectLookupParameters\n \n         self.result_count = result_count\n         self.full_result_count = full_result_count"
        },
        {
            "sha": "96b36f8355a40d0f4e7906b9336a494eb527ef5c",
            "filename": "tests/regressiontests/admin_changelist/tests.py",
            "status": "modified",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/django/django/blob/d8165ce1566771960cf33e414c1a6e643fd46dea/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d8165ce1566771960cf33e414c1a6e643fd46dea/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py?ref=d8165ce1566771960cf33e414c1a6e643fd46dea",
            "patch": "@@ -1,4 +1,5 @@\n from django.contrib import admin\n+from django.contrib.admin.options import IncorrectLookupParameters\n from django.contrib.admin.views.main import ChangeList\n from django.template import Context, Template\n from django.test import TransactionTestCase\n@@ -71,6 +72,28 @@ def test_result_list_editable_html(self):\n         self.assertFalse('<td>%s</td>' % editable_name_field == -1,\n             'Failed to find \"name\" list_editable field in: %s' % table_output)\n \n+    def test_result_list_editable(self):\n+        \"\"\"\n+        Regression test for #14312: list_editable with pagination\n+        \"\"\"\n+\n+        new_parent = Parent.objects.create(name='parent')\n+        for i in range(200):\n+            new_child = Child.objects.create(name='name %s' % i, parent=new_parent)\n+        request = MockRequest()\n+        request.GET['p'] = -1 # Anything outside range\n+        m = ChildAdmin(Child, admin.site)\n+\n+        # Test with list_editable fields\n+        m.list_display = ['id', 'name', 'parent']\n+        m.list_display_links = ['id']\n+        m.list_editable = ['name']\n+        self.assertRaises(IncorrectLookupParameters, lambda: \\\n+            ChangeList(request, Child, m.list_display, m.list_display_links,\n+                    m.list_filter, m.date_hierarchy, m.search_fields,\n+                    m.list_select_related, m.list_per_page, m.list_editable, m))\n+\n+\n class ChildAdmin(admin.ModelAdmin):\n     list_display = ['name', 'parent']\n     def queryset(self, request):"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 24,
        "deletions": 1
    }
}