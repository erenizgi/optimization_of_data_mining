{
    "author": "aaugustin",
    "message": "Removed the deprecated reset and sqlreset management commands.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17842 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "d38690796cd5c046c0b141174737b7615c143bb1",
    "files": [
        {
            "sha": "8f328988340cbfc5d0003376c92d0b3add05bcab",
            "filename": "django/core/management/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/d38690796cd5c046c0b141174737b7615c143bb1/django%2Fcore%2Fmanagement%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/d38690796cd5c046c0b141174737b7615c143bb1/django%2Fcore%2Fmanagement%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2F__init__.py?ref=d38690796cd5c046c0b141174737b7615c143bb1",
            "patch": "@@ -310,9 +310,8 @@ def autocomplete(self):\n                 from django.core.servers.fastcgi import FASTCGI_OPTIONS\n                 options += [(k, 1) for k in FASTCGI_OPTIONS]\n             # special case: add the names of installed apps to options\n-            elif cwords[0] in ('dumpdata', 'reset', 'sql', 'sqlall',\n-                               'sqlclear', 'sqlcustom', 'sqlindexes',\n-                               'sqlreset', 'sqlsequencereset', 'test'):\n+            elif cwords[0] in ('dumpdata', 'sql', 'sqlall', 'sqlclear',\n+                    'sqlcustom', 'sqlindexes', 'sqlsequencereset', 'test'):\n                 try:\n                     from django.conf import settings\n                     # Get the last part of the dotted path as the app name."
        },
        {
            "sha": "e45edb70d8016dba4eb5eddcd0a83184edce798b",
            "filename": "django/core/management/commands/reset.py",
            "status": "removed",
            "additions": 0,
            "deletions": 62,
            "changes": 62,
            "blob_url": "https://github.com/django/django/blob/dec21a1d4b37238d1f036e83bcd0a3e7eddc33c2/django%2Fcore%2Fmanagement%2Fcommands%2Freset.py",
            "raw_url": "https://github.com/django/django/raw/dec21a1d4b37238d1f036e83bcd0a3e7eddc33c2/django%2Fcore%2Fmanagement%2Fcommands%2Freset.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Freset.py?ref=dec21a1d4b37238d1f036e83bcd0a3e7eddc33c2",
            "patch": "@@ -1,62 +0,0 @@\n-from optparse import make_option\n-\n-from django.core.management.base import AppCommand, CommandError\n-from django.core.management.color import no_style\n-from django.core.management.sql import sql_reset\n-from django.db import connections, transaction, DEFAULT_DB_ALIAS\n-\n-class Command(AppCommand):\n-    option_list = AppCommand.option_list + (\n-        make_option('--noinput', action='store_false', dest='interactive', default=True,\n-            help='Tells Django to NOT prompt the user for input of any kind.'),\n-        make_option('--database', action='store', dest='database',\n-            default=DEFAULT_DB_ALIAS, help='Nominates a database to reset. '\n-                'Defaults to the \"default\" database.'),\n-    )\n-    help = \"Executes ``sqlreset`` for the given app(s) in the current database.\"\n-    args = '[appname ...]'\n-\n-    output_transaction = True\n-\n-    def handle_app(self, app, **options):\n-        # This command breaks a lot and should be deprecated\n-        import warnings\n-        warnings.warn(\n-            'This command has been deprecated. The command ``flush`` can be used to delete everything. You can also use ALTER TABLE or DROP TABLE statements manually.',\n-            DeprecationWarning\n-        )\n-        using = options.get('database')\n-        connection = connections[using]\n-\n-        app_name = app.__name__.split('.')[-2]\n-        self.style = no_style()\n-\n-        sql_list = sql_reset(app, self.style, connection)\n-\n-        if options.get('interactive'):\n-            confirm = raw_input(\"\"\"\n-You have requested a database reset.\n-This will IRREVERSIBLY DESTROY any data for\n-the \"%s\" application in the database \"%s\".\n-Are you sure you want to do this?\n-\n-Type 'yes' to continue, or 'no' to cancel: \"\"\" % (app_name, connection.settings_dict['NAME']))\n-        else:\n-            confirm = 'yes'\n-\n-        if confirm == 'yes':\n-            try:\n-                cursor = connection.cursor()\n-                for sql in sql_list:\n-                    cursor.execute(sql)\n-            except Exception, e:\n-                transaction.rollback_unless_managed()\n-                raise CommandError(\"\"\"Error: %s couldn't be reset. Possible reasons:\n-  * The database isn't running or isn't configured correctly.\n-  * At least one of the database tables doesn't exist.\n-  * The SQL was invalid.\n-Hint: Look at the output of 'django-admin.py sqlreset %s'. That's the SQL this command wasn't able to run.\n-The full error: %s\"\"\" % (app_name, app_name, e))\n-            transaction.commit_unless_managed()\n-        else:\n-            print \"Reset cancelled.\""
        },
        {
            "sha": "976b8488863ed008f396301a360cbbc9b4731198",
            "filename": "django/core/management/commands/sqlreset.py",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/dec21a1d4b37238d1f036e83bcd0a3e7eddc33c2/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlreset.py",
            "raw_url": "https://github.com/django/django/raw/dec21a1d4b37238d1f036e83bcd0a3e7eddc33c2/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlreset.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlreset.py?ref=dec21a1d4b37238d1f036e83bcd0a3e7eddc33c2",
            "patch": "@@ -1,20 +0,0 @@\n-from optparse import make_option\n-\n-from django.core.management.base import AppCommand\n-from django.core.management.sql import sql_reset\n-from django.db import connections, DEFAULT_DB_ALIAS\n-\n-class Command(AppCommand):\n-    help = \"Prints the DROP TABLE SQL, then the CREATE TABLE SQL, for the given app name(s).\"\n-\n-    option_list = AppCommand.option_list + (\n-        make_option('--database', action='store', dest='database',\n-            default=DEFAULT_DB_ALIAS, help='Nominates a database to print the '\n-                'SQL for.  Defaults to the \"default\" database.'),\n-\n-    )\n-\n-    output_transaction = True\n-\n-    def handle_app(self, app, **options):\n-        return u'\\n'.join(sql_reset(app, self.style, connections[options.get('database')])).encode('utf-8')"
        },
        {
            "sha": "454a3427aac3d1ed8f5f53de7e60e2c596c7656f",
            "filename": "django/core/management/sql.py",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/d38690796cd5c046c0b141174737b7615c143bb1/django%2Fcore%2Fmanagement%2Fsql.py",
            "raw_url": "https://github.com/django/django/raw/d38690796cd5c046c0b141174737b7615c143bb1/django%2Fcore%2Fmanagement%2Fsql.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fsql.py?ref=d38690796cd5c046c0b141174737b7615c143bb1",
            "patch": "@@ -96,16 +96,6 @@ def sql_delete(app, style, connection):\n \n     return output[::-1] # Reverse it, to deal with table dependencies.\n \n-def sql_reset(app, style, connection):\n-    \"Returns a list of the DROP TABLE SQL, then the CREATE TABLE SQL, for the given module.\"\n-    # This command breaks a lot and should be deprecated\n-    import warnings\n-    warnings.warn(\n-        'This command has been deprecated. The command ``sqlflush`` can be used to delete everything. You can also use ALTER TABLE or DROP TABLE statements manually.',\n-        DeprecationWarning\n-    )\n-    return sql_delete(app, style, connection) + sql_all(app, style, connection)\n-\n def sql_flush(style, connection, only_django=False):\n     \"\"\"\n     Returns a list of the SQL statements used to flush the database."
        },
        {
            "sha": "557935f2660c942ecbe229836d7485b0c701eedd",
            "filename": "docs/howto/initial-data.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/d38690796cd5c046c0b141174737b7615c143bb1/docs%2Fhowto%2Finitial-data.txt",
            "raw_url": "https://github.com/django/django/raw/d38690796cd5c046c0b141174737b7615c143bb1/docs%2Fhowto%2Finitial-data.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Finitial-data.txt?ref=d38690796cd5c046c0b141174737b7615c143bb1",
            "patch": "@@ -124,10 +124,9 @@ Each SQL file, if given, is expected to contain valid SQL statements\n which will insert the desired data (e.g., properly-formatted\n ``INSERT`` statements separated by semicolons).\n \n-The SQL files are read by the :djadmin:`sqlcustom`, :djadmin:`sqlreset`,\n-:djadmin:`sqlall` and :djadmin:`reset` commands in :doc:`manage.py\n-</ref/django-admin>`. Refer to the :doc:`manage.py documentation\n-</ref/django-admin>` for more information.\n+The SQL files are read by the :djadmin:`sqlcustom` and :djadmin:`sqlall`\n+commands in :doc:`manage.py </ref/django-admin>`. Refer to the :doc:`manage.py\n+documentation </ref/django-admin>` for more information.\n \n Note that if you have multiple SQL data files, there's no guarantee of\n the order in which they're executed. The only thing you can assume is"
        },
        {
            "sha": "d336da0f7be718d42c223b565f924a9644b2cded",
            "filename": "docs/man/django-admin.1",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/d38690796cd5c046c0b141174737b7615c143bb1/docs%2Fman%2Fdjango-admin.1",
            "raw_url": "https://github.com/django/django/raw/d38690796cd5c046c0b141174737b7615c143bb1/docs%2Fman%2Fdjango-admin.1",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fman%2Fdjango-admin.1?ref=d38690796cd5c046c0b141174737b7615c143bb1",
            "patch": "@@ -65,11 +65,6 @@ Runs over the entire source tree of the current directory and pulls out all\n strings marked for translation. It creates (or updates) a message file in the\n conf/locale (in the django tree) or locale (for project and application) directory.\n .TP\n-.BI \"reset [\" \"appname ...\" \"]\"\n-Executes\n-.B sqlreset\n-for the given app(s) in the current database.\n-.TP\n .BI \"runfcgi [\" \"KEY=val\" \"] [\" \"KEY=val\" \"] \" \"...\"\n Runs this project as a FastCGI application. Requires flup. Use\n .B runfcgi help\n@@ -107,10 +102,6 @@ Prints the CREATE INDEX SQL statements for the given model module name(s).\n .BI \"sqlinitialdata [\" \"appname ...\" \"]\"\n Prints the initial INSERT SQL statements for the given app name(s).\n .TP\n-.BI \"sqlreset [\" \"appname ...\" \"]\"\n-Prints the DROP TABLE SQL, then the CREATE TABLE SQL, for the given app\n-name(s).\n-.TP\n .BI \"sqlsequencereset [\" \"appname ...\" \"]\"\n Prints the SQL statements for resetting PostgreSQL sequences for the\n given app name(s)."
        },
        {
            "sha": "845db155000ba22ae1da9b6f2a4a542c26ecb10d",
            "filename": "docs/ref/django-admin.txt",
            "status": "modified",
            "additions": 0,
            "deletions": 35,
            "changes": 35,
            "blob_url": "https://github.com/django/django/blob/d38690796cd5c046c0b141174737b7615c143bb1/docs%2Fref%2Fdjango-admin.txt",
            "raw_url": "https://github.com/django/django/raw/d38690796cd5c046c0b141174737b7615c143bb1/docs%2Fref%2Fdjango-admin.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdjango-admin.txt?ref=d38690796cd5c046c0b141174737b7615c143bb1",
            "patch": "@@ -484,25 +484,6 @@ Use the ``--no-location`` option to not write '``#: filename:line``'\n comment lines in language files. Note that using this option makes it harder\n for technically skilled translators to understand each message's context.\n \n-reset <appname appname ...>\n----------------------------\n-\n-.. deprecated:: 1.3\n-    This command has been deprecated. The ``flush`` can be used to delete\n-    everything. You can also use ALTER TABLE or DROP TABLE statements manually.\n-\n-.. django-admin:: reset\n-\n-Executes the equivalent of ``sqlreset`` for the given app name(s).\n-\n-The :djadminopt:`--noinput` option may be provided to suppress all user\n-prompts.\n-\n-.. versionadded:: 1.2\n-\n-The :djadminopt:`--database` option can be used to specify the alias\n-of the database to reset.\n-\n runfcgi [options]\n -----------------\n \n@@ -874,22 +855,6 @@ Prints the CREATE INDEX SQL statements for the given app name(s).\n The :djadminopt:`--database` option can be used to specify the database for\n which to print the SQL.\n \n-sqlreset <appname appname ...>\n-------------------------------\n-\n-.. deprecated:: 1.3\n-    This command has been deprecated. The ``sqlflush`` can be used to delete\n-    everything. You can also use ALTER TABLE or DROP TABLE statements manually.\n-\n-.. django-admin:: sqlreset\n-\n-Prints the DROP TABLE SQL, then the CREATE TABLE SQL, for the given app name(s).\n-\n-.. versionadded:: 1.2\n-\n-The :djadminopt:`--database` option can be used to specify the database for\n-which to print the SQL.\n-\n sqlsequencereset <appname appname ...>\n --------------------------------------\n "
        },
        {
            "sha": "e4b3bb58f34782b51554294d7b582d72556641e1",
            "filename": "tests/regressiontests/bash_completion/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/d38690796cd5c046c0b141174737b7615c143bb1/tests%2Fregressiontests%2Fbash_completion%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d38690796cd5c046c0b141174737b7615c143bb1/tests%2Fregressiontests%2Fbash_completion%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbash_completion%2Ftests.py?ref=d38690796cd5c046c0b141174737b7615c143bb1",
            "patch": "@@ -66,7 +66,7 @@ def test_subcommands(self):\n         \"Subcommands can be autocompleted\"\n         self._user_input('django-admin.py sql')\n         output = self._run_autocomplete()\n-        self.assertEqual(output, ['sql sqlall sqlclear sqlcustom sqlflush sqlindexes sqlinitialdata sqlreset sqlsequencereset'])\n+        self.assertEqual(output, ['sql sqlall sqlclear sqlcustom sqlflush sqlindexes sqlinitialdata sqlsequencereset'])\n \n     def test_help(self):\n         \"No errors, just an empty list if there are no autocomplete options\""
        }
    ],
    "stats": {
        "total": 150,
        "additions": 6,
        "deletions": 144
    }
}