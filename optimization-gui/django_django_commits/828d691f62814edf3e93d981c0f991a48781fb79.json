{
    "author": "andrewgodwin",
    "message": "Merge branch 'master' into schema-alteration",
    "sha": "828d691f62814edf3e93d981c0f991a48781fb79",
    "files": [
        {
            "sha": "e4efee433998a32bb3838dc93d7e7f2d9b3aa116",
            "filename": "django/contrib/auth/tests/models.py",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1,8 +1,9 @@\n from django.conf import settings\n+from django.contrib.auth.models import (Group, User, SiteProfileNotAvailable,\n+    UserManager)\n from django.test import TestCase\n from django.test.utils import override_settings\n-from django.contrib.auth.models import (Group, User,\n-    SiteProfileNotAvailable, UserManager)\n+from django.utils import six\n \n \n @override_settings(USE_TZ=False, AUTH_PROFILE_MODULE='')\n@@ -13,19 +14,19 @@ def test_site_profile_not_available(self):\n \n         # calling get_profile without AUTH_PROFILE_MODULE set\n         del settings.AUTH_PROFILE_MODULE\n-        with self.assertRaisesRegexp(SiteProfileNotAvailable,\n+        with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n                 \"You need to set AUTH_PROFILE_MODULE in your project\"):\n             user.get_profile()\n \n         # Bad syntax in AUTH_PROFILE_MODULE:\n         settings.AUTH_PROFILE_MODULE = 'foobar'\n-        with self.assertRaisesRegexp(SiteProfileNotAvailable,\n+        with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n                 \"app_label and model_name should be separated by a dot\"):\n             user.get_profile()\n \n         # module that doesn't exist\n         settings.AUTH_PROFILE_MODULE = 'foo.bar'\n-        with self.assertRaisesRegexp(SiteProfileNotAvailable,\n+        with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n                 \"Unable to load the profile model\"):\n             user.get_profile()\n "
        },
        {
            "sha": "083b61c49eda8fe9051712cccc5ab18c01f5f565",
            "filename": "django/contrib/localflavor/hr/forms.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcontrib%2Flocalflavor%2Fhr%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcontrib%2Flocalflavor%2Fhr%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fhr%2Fforms.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -4,6 +4,7 @@\n \"\"\"\n from __future__ import absolute_import, unicode_literals\n \n+import datetime\n import re\n \n from django.contrib.localflavor.hr.hr_choices import (\n@@ -91,17 +92,16 @@ def clean(self, value):\n         dd = int(matches.group('dd'))\n         mm = int(matches.group('mm'))\n         yyy = int(matches.group('yyy'))\n-        import datetime\n         try:\n-            datetime.date(yyy,mm,dd)\n-        except:\n+            datetime.date(yyy, mm, dd)\n+        except ValueError:\n             raise ValidationError(self.error_messages['date'])\n \n         # Validate checksum.\n         k = matches.group('k')\n         checksum = 0\n-        for i,j in zip(range(7,1,-1),range(6)):\n-            checksum+=i*(int(value[j])+int(value[13-i]))\n+        for i, j in zip(range(7, 1, -1), range(6)):\n+            checksum += i * (int(value[j]) + int(value[13 - i]))\n         m = 11 - checksum % 11\n         if m == 10:\n             raise ValidationError(self.error_messages['invalid'])"
        },
        {
            "sha": "f6de1534c906cf634a3da52af4d24a1040ee22f5",
            "filename": "django/contrib/localflavor/ro/forms.py",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcontrib%2Flocalflavor%2Fro%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcontrib%2Flocalflavor%2Fro%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fro%2Fforms.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -4,6 +4,8 @@\n \"\"\"\n from __future__ import absolute_import, unicode_literals\n \n+import datetime\n+\n from django.contrib.localflavor.ro.ro_counties import COUNTIES_CHOICES\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError, Field, RegexField, Select\n@@ -69,10 +71,9 @@ def clean(self, value):\n         if value in EMPTY_VALUES:\n             return ''\n         # check birthdate digits\n-        import datetime\n         try:\n-            datetime.date(int(value[1:3]),int(value[3:5]),int(value[5:7]))\n-        except:\n+            datetime.date(int(value[1:3]), int(value[3:5]), int(value[5:7]))\n+        except ValueError:\n             raise ValidationError(self.error_messages['invalid'])\n         # checksum\n         key = '279146358279'\n@@ -118,7 +119,7 @@ def clean(self, value):\n         # search for county name\n         normalized_CC = []\n         for entry in COUNTIES_CHOICES:\n-            normalized_CC.append((entry[0],entry[1].upper()))\n+            normalized_CC.append((entry[0], entry[1].upper()))\n         for entry in normalized_CC:\n             if entry[1] == value:\n                 return entry[0]\n@@ -153,8 +154,8 @@ def clean(self, value):\n         value = super(ROIBANField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = value.replace('-','')\n-        value = value.replace(' ','')\n+        value = value.replace('-', '')\n+        value = value.replace(' ', '')\n         value = value.upper()\n         if value[0:2] != 'RO':\n             raise ValidationError(self.error_messages['invalid'])\n@@ -185,10 +186,10 @@ def clean(self, value):\n         value = super(ROPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = value.replace('-','')\n-        value = value.replace('(','')\n-        value = value.replace(')','')\n-        value = value.replace(' ','')\n+        value = value.replace('-', '')\n+        value = value.replace('(', '')\n+        value = value.replace(')', '')\n+        value = value.replace(' ', '')\n         if len(value) != 10:\n             raise ValidationError(self.error_messages['invalid'])\n         return value\n@@ -202,4 +203,3 @@ class ROPostalCodeField(RegexField):\n     def __init__(self, max_length=6, min_length=6, *args, **kwargs):\n         super(ROPostalCodeField, self).__init__(r'^[0-9][0-8][0-9]{4}$',\n                 max_length, min_length, *args, **kwargs)\n-"
        },
        {
            "sha": "9bb47c8344c139b88b662e54532167f420c4a3cc",
            "filename": "django/core/cache/backends/memcached.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -141,7 +141,7 @@ def __init__(self, server, params):\n         )\n         try:\n             import memcache\n-        except:\n+        except ImportError:\n             raise InvalidCacheBackendError(\n                 \"Memcached cache backend requires either the 'memcache' or 'cmemcache' library\"\n                 )"
        },
        {
            "sha": "ea0cb5d9ad442f60f5b286bebad8dcdcf5fb1a0e",
            "filename": "django/core/mail/backends/console.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcore%2Fmail%2Fbackends%2Fconsole.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fcore%2Fmail%2Fbackends%2Fconsole.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fbackends%2Fconsole.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -21,7 +21,7 @@ def send_messages(self, email_messages):\n                 stream_created = self.open()\n                 for message in email_messages:\n                     self.stream.write('%s\\n' % message.message().as_string())\n-                    self.stream.write('-'*79)\n+                    self.stream.write('-' * 79)\n                     self.stream.write('\\n')\n                     self.stream.flush()  # flush after each message\n                 if stream_created:"
        },
        {
            "sha": "090f635df38b3101685efc106ca3e0ed2e6102cd",
            "filename": "django/db/backends/creation.py",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fdb%2Fbackends%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fdb%2Fbackends%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fcreation.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1,8 +1,10 @@\n+import hashlib\n import sys\n import time\n \n from django.conf import settings\n from django.db.utils import load_backend\n+from django.utils.encoding import force_bytes\n from django.utils.six.moves import input\n \n # The prefix to put on the default database name when creating\n@@ -29,7 +31,10 @@ def _digest(cls, *args):\n         Generates a 32-bit digest of a set of arguments that can be used to\n         shorten identifying names.\n         \"\"\"\n-        return '%x' % (abs(hash(args)) % 4294967296)    # 2**32\n+        h = hashlib.md5()\n+        for arg in args:\n+            h.update(force_bytes(arg))\n+        return h.hexdigest()[:8]\n \n     def sql_create_model(self, model, style, known_models=set()):\n         \"\"\""
        },
        {
            "sha": "341fc13e81e2bd8628b3e45713520595efedc8c8",
            "filename": "django/db/backends/sqlite3/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -419,7 +419,4 @@ def _sqlite_format_dtdelta(dt, conn, days, secs, usecs):\n     return str(dt)\n \n def _sqlite_regexp(re_pattern, re_string):\n-    try:\n-        return bool(re.search(re_pattern, re_string))\n-    except:\n-        return False\n+    return bool(re.search(re_pattern, re_string))"
        },
        {
            "sha": "caf2330bd1171e7c776f98f8f41801f9c5527c90",
            "filename": "django/db/models/sql/compiler.py",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -4,7 +4,8 @@\n from django.db import transaction\n from django.db.backends.util import truncate_name\n from django.db.models.query_utils import select_related_descend\n-from django.db.models.sql.constants import *\n+from django.db.models.sql.constants import (SINGLE, MULTI, ORDER_DIR,\n+    LOOKUP_SEP, GET_ITERATOR_CHUNK_SIZE)\n from django.db.models.sql.datastructures import EmptyResultSet\n from django.db.models.sql.expressions import SQLEvaluator\n from django.db.models.sql.query import get_order_dir, Query\n@@ -811,7 +812,7 @@ def execute_sql(self, result_type=MULTI):\n                 raise EmptyResultSet\n         except EmptyResultSet:\n             if result_type == MULTI:\n-                return empty_iter()\n+                return iter([])\n             else:\n                 return\n \n@@ -1088,13 +1089,6 @@ def results_iter(self):\n                 yield date\n \n \n-def empty_iter():\n-    \"\"\"\n-    Returns an iterator containing no results.\n-    \"\"\"\n-    yield next(iter([]))\n-\n-\n def order_modified_iter(cursor, trim, sentinel):\n     \"\"\"\n     Yields blocks of rows from a cursor. We use this iterator in the special"
        },
        {
            "sha": "f259a2c7d57d2d0f44977fb585f23593235dbfbd",
            "filename": "django/db/models/sql/query.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fquery.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -17,9 +17,9 @@\n from django.db.models import signals\n from django.db.models.expressions import ExpressionNode\n from django.db.models.fields import FieldDoesNotExist\n-from django.db.models.query_utils import InvalidQuery\n from django.db.models.sql import aggregates as base_aggregates_module\n-from django.db.models.sql.constants import *\n+from django.db.models.sql.constants import (QUERY_TERMS, LOOKUP_SEP, ORDER_DIR,\n+    SINGLE, ORDER_PATTERN, JoinInfo)\n from django.db.models.sql.datastructures import EmptyResultSet, Empty, MultiJoin\n from django.db.models.sql.expressions import SQLEvaluator\n from django.db.models.sql.where import (WhereNode, Constraint, EverythingNode,\n@@ -28,6 +28,7 @@\n \n __all__ = ['Query', 'RawQuery']\n \n+\n class RawQuery(object):\n     \"\"\"\n     A single raw SQL query"
        },
        {
            "sha": "42d25fac6d871a83521edd15bb222ede92b3a161",
            "filename": "django/forms/formsets.py",
            "status": "modified",
            "additions": 18,
            "deletions": 18,
            "changes": 36,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fforms%2Fformsets.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fforms%2Fformsets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fformsets.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -71,7 +71,8 @@ def __bool__(self):\n         return True\n     __nonzero__ = __bool__ # Python 2\n \n-    def _management_form(self):\n+    @property\n+    def management_form(self):\n         \"\"\"Returns the ManagementForm instance for this FormSet.\"\"\"\n         if self.is_bound:\n             form = ManagementForm(self.data, auto_id=self.auto_id, prefix=self.prefix)\n@@ -84,7 +85,6 @@ def _management_form(self):\n                 MAX_NUM_FORM_COUNT: self.max_num\n             })\n         return form\n-    management_form = property(_management_form)\n \n     def total_form_count(self):\n         \"\"\"Returns the total number of forms in this FormSet.\"\"\"\n@@ -140,17 +140,18 @@ def _construct_form(self, i, **kwargs):\n         self.add_fields(form, i)\n         return form\n \n-    def _get_initial_forms(self):\n+    @property\n+    def initial_forms(self):\n         \"\"\"Return a list of all the initial forms in this formset.\"\"\"\n         return self.forms[:self.initial_form_count()]\n-    initial_forms = property(_get_initial_forms)\n \n-    def _get_extra_forms(self):\n+    @property\n+    def extra_forms(self):\n         \"\"\"Return a list of all the extra forms in this formset.\"\"\"\n         return self.forms[self.initial_form_count():]\n-    extra_forms = property(_get_extra_forms)\n \n-    def _get_empty_form(self, **kwargs):\n+    @property\n+    def empty_form(self, **kwargs):\n         defaults = {\n             'auto_id': self.auto_id,\n             'prefix': self.add_prefix('__prefix__'),\n@@ -160,19 +161,19 @@ def _get_empty_form(self, **kwargs):\n         form = self.form(**defaults)\n         self.add_fields(form, None)\n         return form\n-    empty_form = property(_get_empty_form)\n \n     # Maybe this should just go away?\n-    def _get_cleaned_data(self):\n+    @property\n+    def cleaned_data(self):\n         \"\"\"\n         Returns a list of form.cleaned_data dicts for every form in self.forms.\n         \"\"\"\n         if not self.is_valid():\n             raise AttributeError(\"'%s' object has no attribute 'cleaned_data'\" % self.__class__.__name__)\n         return [form.cleaned_data for form in self.forms]\n-    cleaned_data = property(_get_cleaned_data)\n \n-    def _get_deleted_forms(self):\n+    @property\n+    def deleted_forms(self):\n         \"\"\"\n         Returns a list of forms that have been marked for deletion. Raises an\n         AttributeError if deletion is not allowed.\n@@ -191,9 +192,9 @@ def _get_deleted_forms(self):\n                 if self._should_delete_form(form):\n                     self._deleted_form_indexes.append(i)\n         return [self.forms[i] for i in self._deleted_form_indexes]\n-    deleted_forms = property(_get_deleted_forms)\n \n-    def _get_ordered_forms(self):\n+    @property\n+    def ordered_forms(self):\n         \"\"\"\n         Returns a list of form in the order specified by the incoming data.\n         Raises an AttributeError if ordering is not allowed.\n@@ -228,7 +229,6 @@ def compare_ordering_key(k):\n         # Return a list of form.cleaned_data dicts in the order specified by\n         # the form data.\n         return [self.forms[i[0]] for i in self._ordering]\n-    ordered_forms = property(_get_ordered_forms)\n \n     @classmethod\n     def get_default_prefix(cls):\n@@ -244,14 +244,14 @@ def non_form_errors(self):\n             return self._non_form_errors\n         return self.error_class()\n \n-    def _get_errors(self):\n+    @property\n+    def errors(self):\n         \"\"\"\n         Returns a list of form.errors for every form in self.forms.\n         \"\"\"\n         if self._errors is None:\n             self.full_clean()\n         return self._errors\n-    errors = property(_get_errors)\n \n     def _should_delete_form(self, form):\n         \"\"\"\n@@ -332,14 +332,14 @@ def is_multipart(self):\n         \"\"\"\n         return self.forms and self.forms[0].is_multipart()\n \n-    def _get_media(self):\n+    @property\n+    def media(self):\n         # All the forms on a FormSet are the same, so you only need to\n         # interrogate the first form for media.\n         if self.forms:\n             return self.forms[0].media\n         else:\n             return Media()\n-    media = property(_get_media)\n \n     def as_table(self):\n         \"Returns this formset rendered as HTML <tr>s -- excluding the <table></table>.\""
        },
        {
            "sha": "7651efccd07923f39d32e00985c180e767faac65",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -507,11 +507,7 @@ def __init__(self, attrs=None, check_test=None):\n \n     def render(self, name, value, attrs=None):\n         final_attrs = self.build_attrs(attrs, type='checkbox', name=name)\n-        try:\n-            result = self.check_test(value)\n-        except: # Silently catch exceptions\n-            result = False\n-        if result:\n+        if self.check_test(value):\n             final_attrs['checked'] = 'checked'\n         if not (value is True or value is False or value is None or value == ''):\n             # Only add the 'value' attribute if a value is non-empty.\n@@ -525,7 +521,7 @@ def value_from_datadict(self, data, files, name):\n             return False\n         value = data.get(name)\n         # Translate true and false strings to boolean values.\n-        values =  {'true': True, 'false': False}\n+        values = {'true': True, 'false': False}\n         if isinstance(value, six.string_types):\n             value = values.get(value.lower(), value)\n         return value"
        },
        {
            "sha": "40aefd6e9de3d0ff5a6d473b6de77b456c02741b",
            "filename": "django/http/multipartparser.py",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fhttp%2Fmultipartparser.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Fhttp%2Fmultipartparser.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2Fmultipartparser.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -68,11 +68,10 @@ def __init__(self, META, input_data, upload_handlers, encoding=None):\n         if not boundary or not cgi.valid_boundary(boundary):\n             raise MultiPartParserError('Invalid boundary in multipart: %s' % boundary)\n \n-\n         # Content-Length should contain the length of the body we are about\n         # to receive.\n         try:\n-            content_length = int(META.get('HTTP_CONTENT_LENGTH', META.get('CONTENT_LENGTH',0)))\n+            content_length = int(META.get('HTTP_CONTENT_LENGTH', META.get('CONTENT_LENGTH', 0)))\n         except (ValueError, TypeError):\n             content_length = 0\n \n@@ -178,7 +177,7 @@ def parse(self):\n \n                     content_type = meta_data.get('content-type', ('',))[0].strip()\n                     try:\n-                        charset = meta_data.get('content-type', (0,{}))[1].get('charset', None)\n+                        charset = meta_data.get('content-type', (0, {}))[1].get('charset', None)\n                     except:\n                         charset = None\n "
        },
        {
            "sha": "3c681db329535c925dc1fe7a758b9dcaa2c92fae",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -358,7 +358,7 @@ def assertRaisesMessage(self, expected_exception, expected_message,\n             args: Extra args.\n             kwargs: Extra kwargs.\n         \"\"\"\n-        return self.assertRaisesRegexp(expected_exception,\n+        return six.assertRaisesRegex(self, expected_exception,\n                 re.escape(expected_message), callable_obj, *args, **kwargs)\n \n     def assertFieldOutput(self, fieldclass, valid, invalid, field_args=None,"
        },
        {
            "sha": "9e3823128fa99d4ad80f7fa1b0a6da6ac4f031af",
            "filename": "django/utils/six.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/django%2Futils%2Fsix.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/django%2Futils%2Fsix.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fsix.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -370,13 +370,20 @@ def with_metaclass(meta, base=object):\n \n if PY3:\n     _iterlists = \"lists\"\n+    _assertRaisesRegex = \"assertRaisesRegex\"\n else:\n     _iterlists = \"iterlists\"\n+    _assertRaisesRegex = \"assertRaisesRegexp\"\n+\n \n def iterlists(d):\n     \"\"\"Return an iterator over the values of a MultiValueDict.\"\"\"\n     return getattr(d, _iterlists)()\n \n \n+def assertRaisesRegex(self, *args, **kwargs):\n+    return getattr(self, _assertRaisesRegex)(*args, **kwargs)\n+\n+\n add_move(MovedModule(\"_dummy_thread\", \"dummy_thread\"))\n add_move(MovedModule(\"_thread\", \"thread\"))"
        },
        {
            "sha": "2430bc3a2d1e0c02e6c80e9b17f3b0db5a38941c",
            "filename": "docs/intro/tutorial03.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fintro%2Ftutorial03.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fintro%2Ftutorial03.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial03.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -517,7 +517,7 @@ URLconf by removing the leading \"polls/\" from each line, and removing the\n lines registering the admin site. Your ``polls/urls.py`` file should now look like\n this::\n \n-    from django.conf.urls import patterns, include, url\n+    from django.conf.urls import patterns, url\n \n     urlpatterns = patterns('polls.views',\n         url(r'^$', 'index'),"
        },
        {
            "sha": "5dc3726ad19b8f82c16b1410ba3755aee765d39c",
            "filename": "docs/ref/contrib/gis/install.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -80,7 +80,7 @@ geospatial libraries:\n Program                   Description                           Required                          Supported Versions\n ========================  ====================================  ================================  ==========================\n :ref:`GEOS <ref-geos>`    Geometry Engine Open Source           Yes                               3.3, 3.2, 3.1, 3.0\n-`PROJ.4`_                 Cartographic Projections library      Yes (PostgreSQL and SQLite only)  4.7, 4.6, 4.5, 4.4\n+`PROJ.4`_                 Cartographic Projections library      Yes (PostgreSQL and SQLite only)  4.8, 4.7, 4.6, 4.5, 4.4\n :ref:`GDAL <ref-gdal>`    Geospatial Data Abstraction Library   No (but, required for SQLite)     1.9, 1.8, 1.7, 1.6, 1.5\n :ref:`GeoIP <ref-geoip>`  IP-based geolocation library          No                                1.4\n `PostGIS`__               Spatial extensions for PostgreSQL     Yes (PostgreSQL only)             1.5, 1.4, 1.3\n@@ -140,16 +140,16 @@ internal geometry representation used by GeoDjango (it's behind the \"lazy\"\n geometries).  Specifically, the C API library is called (e.g., ``libgeos_c.so``)\n directly from Python using ctypes.\n \n-First, download GEOS 3.3.0 from the refractions Web site and untar the source\n+First, download GEOS 3.3.5 from the refractions Web site and untar the source\n archive::\n \n-    $ wget http://download.osgeo.org/geos/geos-3.3.0.tar.bz2\n-    $ tar xjf geos-3.3.0.tar.bz2\n+    $ wget http://download.osgeo.org/geos/geos-3.3.5.tar.bz2\n+    $ tar xjf geos-3.3.5.tar.bz2\n \n Next, change into the directory where GEOS was unpacked, run the configure\n script, compile, and install::\n \n-    $ cd geos-3.3.0\n+    $ cd geos-3.3.5\n     $ ./configure\n     $ make\n     $ sudo make install\n@@ -203,15 +203,15 @@ reference systems.\n \n First, download the PROJ.4 source code and datum shifting files [#]_::\n \n-    $ wget http://download.osgeo.org/proj/proj-4.7.0.tar.gz\n-    $ wget http://download.osgeo.org/proj/proj-datumgrid-1.5.zip\n+    $ wget http://download.osgeo.org/proj/proj-4.8.0.tar.gz\n+    $ wget http://download.osgeo.org/proj/proj-datumgrid-1.5.tar.gz\n \n Next, untar the source code archive, and extract the datum shifting files in the\n ``nad`` subdirectory.  This must be done *prior* to configuration::\n \n-    $ tar xzf proj-4.7.0.tar.gz\n-    $ cd proj-4.7.0/nad\n-    $ unzip ../../proj-datumgrid-1.5.zip\n+    $ tar xzf proj-4.8.0.tar.gz\n+    $ cd proj-4.8.0/nad\n+    $ tar xzf ../../proj-datumgrid-1.5.tar.gz\n     $ cd ..\n \n Finally, configure, make and install PROJ.4::\n@@ -239,9 +239,9 @@ installed prior to building PostGIS.\n \n First download the source archive, and extract::\n \n-    $ wget http://postgis.refractions.net/download/postgis-1.5.2.tar.gz\n-    $ tar xzf postgis-1.5.2.tar.gz\n-    $ cd postgis-1.5.2\n+    $ wget http://postgis.refractions.net/download/postgis-1.5.5.tar.gz\n+    $ tar xzf postgis-1.5.5.tar.gz\n+    $ cd postgis-1.5.5\n \n Next, configure, make and install PostGIS::\n "
        },
        {
            "sha": "1af32da875b71de5b1cf13b3da09471037fb43d0",
            "filename": "docs/ref/forms/validation.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fforms%2Fvalidation.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fforms%2Fvalidation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Fvalidation.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -70,9 +70,8 @@ overridden:\n   formfield-specific piece of validation and, possibly,\n   cleaning/normalizing the data.\n \n-  Just like the general field ``clean()`` method, above, this method\n-  should return the cleaned data, regardless of whether it changed\n-  anything or not.\n+  This method should return the cleaned value obtained from cleaned_data,\n+  regardless of whether it changed anything or not.\n \n * The Form subclass's ``clean()`` method. This method can perform\n   any validation that requires access to multiple fields from the form at"
        },
        {
            "sha": "eab314a4cdde78d56bdd2f94fc1a233a642e4922",
            "filename": "docs/ref/forms/widgets.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fforms%2Fwidgets.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fforms%2Fwidgets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Fwidgets.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -310,6 +310,10 @@ commonly used groups of widgets:\n         A callable that takes the value of the CheckBoxInput and returns\n         ``True`` if the checkbox should be checked for that value.\n \n+        .. versionchanged:: 1.5\n+            Exceptions from ``check_test`` used to be silenced by its caller,\n+            this is no longer the case, they will propagate upwards.\n+\n ``Select``\n ~~~~~~~~~~\n "
        },
        {
            "sha": "c5ae8398eadf34fe0659b6f1099cb744d1cb4183",
            "filename": "docs/ref/models/options.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fmodels%2Foptions.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fmodels%2Foptions.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Foptions.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -83,9 +83,10 @@ Django quotes column and table names behind the scenes.\n \n .. attribute:: Options.get_latest_by\n \n-    The name of a :class:`DateField` or :class:`DateTimeField` in the model.\n-    This specifies the default field to use in your model :class:`Manager`'s\n-    :class:`~QuerySet.latest` method.\n+    The name of an orderable field in the model, typically a :class:`DateField`,\n+    :class:`DateTimeField`, or :class:`IntegerField`. This specifies the default\n+    field to use in your model :class:`Manager`'s :class:`~QuerySet.latest`\n+    method.\n \n     Example::\n "
        },
        {
            "sha": "4f5f8858b53c426e2a91c989a32ff70d09639e1e",
            "filename": "docs/ref/models/querysets.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fmodels%2Fquerysets.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Fref%2Fmodels%2Fquerysets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Fquerysets.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -2064,7 +2064,7 @@ Note this is only available in MySQL and requires direct manipulation of the\n database to add the full-text index. By default Django uses BOOLEAN MODE for\n full text searches. See the `MySQL documentation`_ for additional details.\n \n-.. _MySQL documentation: http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html>\n+.. _MySQL documentation: http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html\n \n \n .. fieldlookup:: regex\n@@ -2236,4 +2236,3 @@ Variance\n         extension.\n \n .. _SQLite documentation: http://www.sqlite.org/contrib\n-"
        },
        {
            "sha": "c507f1bed6f57fbfecf78090126ef26cc6180f06",
            "filename": "docs/releases/1.3.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Freleases%2F1.3.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Freleases%2F1.3.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.3.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -587,7 +587,7 @@ gettext domain):\n   ones listed later.\n \n * The ``locale`` subdirectory of the directory containing the settings, that\n-  usually coincides with and is know as the *project directory* is being\n+  usually coincides with and is known as the *project directory* is being\n   deprecated in this release as a source of translations. (the precedence of\n   these translations is intermediate between applications and :setting:`LOCALE_PATHS`\n   translations). See the `corresponding deprecated features section`_"
        },
        {
            "sha": "f87fa2920fb3fd27a55619a3355762281cd948fd",
            "filename": "docs/topics/db/queries.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Ftopics%2Fdb%2Fqueries.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Ftopics%2Fdb%2Fqueries.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Fqueries.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -235,14 +235,14 @@ refinements together. For example::\n     ... ).exclude(\n     ...     pub_date__gte=datetime.now()\n     ... ).filter(\n-    ...     pub_date__gte=datetime(2005, 1, 1)\n+    ...     pub_date__gte=datetime(2005, 1, 30)\n     ... )\n \n This takes the initial :class:`~django.db.models.query.QuerySet` of all entries\n in the database, adds a filter, then an exclusion, then another filter. The\n final result is a :class:`~django.db.models.query.QuerySet` containing all\n entries with a headline that starts with \"What\", that were published between\n-January 1, 2005, and the current day.\n+January 30, 2005, and the current day.\n \n .. _filtered-querysets-are-unique:\n "
        },
        {
            "sha": "d816db804681dbed4b988591bf05ef346542c3a2",
            "filename": "docs/topics/python3.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 5,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Ftopics%2Fpython3.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Ftopics%2Fpython3.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fpython3.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -25,10 +25,11 @@ free to chose another strategy for your own code, especially if you don't need\n to stay compatible with Python 2. But authors of pluggable applications are\n encouraged to use the same porting strategy as Django itself.\n \n-Writing compatible code is much easier if you target Python ≥ 2.6. You will\n-most likely take advantage of the compatibility functions introduced in Django\n-1.5, like :mod:`django.utils.six`, so your application will also require\n-Django ≥ 1.5.\n+Writing compatible code is much easier if you target Python ≥ 2.6. Django 1.5\n+introduces compatibility tools such as :mod:`django.utils.six`. For\n+convenience, forwards-compatible aliases were introduced in Django 1.4.2. If\n+your application takes advantage of these tools, it will require Django ≥\n+1.4.2.\n \n Obviously, writing compatible source code adds some overhead, and that can\n cause frustration. Django's developers have found that attempting to write\n@@ -102,6 +103,8 @@ Old name            New name\n For backwards compatibility, the old names still work on Python 2. Under\n Python 3, ``smart_str`` is an alias for ``smart_text``.\n \n+For forwards compatibility, the new names work as of Django 1.4.2.\n+\n .. note::\n \n     :mod:`django.utils.encoding` was deeply refactored in Django 1.5 to\n@@ -126,6 +129,8 @@ For backwards compatibility, the old names still work on Python 2. Under\n Python 3, ``EscapeString`` and ``SafeString`` are aliases for ``EscapeText``\n and ``SafeText`` respectively.\n \n+For forwards compatibility, the new names work as of Django 1.4.2.\n+\n :meth:`__str__` and :meth:`__unicode__` methods\n -----------------------------------------------\n \n@@ -166,6 +171,8 @@ On Python 3, the decorator is a no-op. On Python 2, it defines appropriate\n \n This technique is the best match for Django's porting philosophy.\n \n+For forwards compatibility, this decorator is available as of Django 1.4.2.\n+\n Finally, note that :meth:`__repr__` must return a :class:`str` on all versions\n of Python.\n \n@@ -317,7 +324,8 @@ Writing compatible code with six\n six_ is the canonical compatibility library for supporting Python 2 and 3 in\n a single codebase. Read its documentation!\n \n-:mod:`six` is bundled with Django: you can import it as :mod:`django.utils.six`.\n+:mod`six` is bundled with Django as of version 1.4.2. You can import it as\n+:mod`django.utils.six`.\n \n Here are the most common changes required to write compatible code.\n "
        },
        {
            "sha": "0a3c6bff0243918c9976239c98d86b507b991262",
            "filename": "docs/topics/security.txt",
            "status": "modified",
            "additions": 26,
            "deletions": 6,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Ftopics%2Fsecurity.txt",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/docs%2Ftopics%2Fsecurity.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fsecurity.txt?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -76,9 +76,17 @@ POST to your Web site and have another logged in user unwittingly submit that\n form. The malicious user would have to know the nonce, which is user specific\n (using a cookie).\n \n+When deployed with :ref:`HTTPS <security-recommendation-ssl>`, \n+``CsrfViewMiddleware`` will check that the HTTP referer header is set to a \n+URL on the same origin (including subdomain and port). Because HTTPS\n+provides additional security, it is imperative to ensure connections use HTTPS\n+where it is available by forwarding insecure connection requests and using\n+HSTS for supported browsers.\n+\n Be very careful with marking views with the ``csrf_exempt`` decorator unless\n it is absolutely necessary.\n \n+\n SQL injection protection\n ========================\n \n@@ -112,6 +120,8 @@ The middleware is strongly recommended for any site that does not need to have\n its pages wrapped in a frame by third party sites, or only needs to allow that\n for a small section of the site.\n \n+.. _security-recommendation-ssl:\n+\n SSL/HTTPS\n =========\n \n@@ -147,7 +157,15 @@ server, there are some additional steps you may need:\n   any POST data being accepted over HTTP (which will be fine if you are\n   redirecting all HTTP traffic to HTTPS).\n \n-.. _additional-security-topics:\n+* Use HTTP Strict Transport Security (HSTS)\n+\n+  HSTS is an HTTP header that informs a browser that all future connections\n+  to a particular site should always use HTTPS. Combined with redirecting\n+  requests over HTTP to HTTPS, this will ensure that connections always enjoy\n+  the added security of SSL provided one successful connection has occurred.\n+  HSTS is usually configured on the web server.\n+\n+.. _host-headers-virtual-hosting:\n \n Host headers and virtual hosting\n ================================\n@@ -158,15 +176,17 @@ Site Scripting attacks, they can be used for Cross-Site Request\n Forgery and cache poisoning attacks in some circumstances. We\n recommend you ensure your Web server is configured such that:\n \n-    * It always validates incoming HTTP ``Host`` headers against the expected\n-      host name.\n-    * Disallows requests with no ``Host`` header.\n-    * Is *not* configured with a catch-all virtual host that forwards requests\n-      to a Django application.\n+* It always validates incoming HTTP ``Host`` headers against the expected\n+  host name.\n+* Disallows requests with no ``Host`` header.\n+* Is *not* configured with a catch-all virtual host that forwards requests\n+  to a Django application.\n \n Additionally, as of 1.3.1, Django requires you to explicitly enable support for\n the ``X-Forwarded-Host`` header if your configuration requires it.\n \n+.. _additional-security-topics:\n+\n Additional security topics\n ==========================\n "
        },
        {
            "sha": "6ec9ca03afd171d035f36ddaa3ed723709e03225",
            "filename": "tests/modeltests/basic/tests.py",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fbasic%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fbasic%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fbasic%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -5,7 +5,7 @@\n from django.core.exceptions import ObjectDoesNotExist\n from django.db.models.fields import Field, FieldDoesNotExist\n from django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature\n-from django.utils.six import PY3\n+from django.utils import six\n from django.utils.translation import ugettext_lazy\n \n from .models import Article\n@@ -82,7 +82,7 @@ def test_lookup(self):\n \n         # Django raises an Article.DoesNotExist exception for get() if the\n         # parameters don't match any object.\n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ObjectDoesNotExist,\n             \"Article matching query does not exist. Lookup parameters were \"\n             \"{'id__exact': 2000}\",\n@@ -91,22 +91,22 @@ def test_lookup(self):\n         )\n         # To avoid dict-ordering related errors check only one lookup\n         # in single assert.\n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ObjectDoesNotExist,\n             \".*'pub_date__year': 2005.*\",\n             Article.objects.get,\n             pub_date__year=2005,\n             pub_date__month=8,\n         )\n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ObjectDoesNotExist,\n             \".*'pub_date__month': 8.*\",\n             Article.objects.get,\n             pub_date__year=2005,\n             pub_date__month=8,\n         )\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ObjectDoesNotExist,\n             \"Article matching query does not exist. Lookup parameters were \"\n             \"{'pub_date__week_day': 6}\",\n@@ -168,7 +168,7 @@ def test_object_creation(self):\n         self.assertEqual(a4.headline, 'Fourth article')\n \n         # Don't use invalid keyword arguments.\n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             TypeError,\n             \"'foo' is an invalid keyword argument for this function\",\n             Article,\n@@ -259,29 +259,29 @@ def test_object_creation(self):\n              \"datetime.datetime(2005, 7, 28, 0, 0)\"])\n \n         # dates() requires valid arguments.\n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             TypeError,\n             \"dates\\(\\) takes at least 3 arguments \\(1 given\\)\",\n             Article.objects.dates,\n         )\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             FieldDoesNotExist,\n             \"Article has no field named 'invalid_field'\",\n             Article.objects.dates,\n             \"invalid_field\",\n             \"year\",\n         )\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             AssertionError,\n             \"'kind' must be one of 'year', 'month' or 'day'.\",\n             Article.objects.dates,\n             \"pub_date\",\n             \"bad_kind\",\n         )\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             AssertionError,\n             \"'order' must be either 'ASC' or 'DESC'.\",\n             Article.objects.dates,\n@@ -323,7 +323,7 @@ def test_object_creation(self):\n              \"<Article: Third article>\"])\n \n         # Slicing works with longs (Python 2 only -- Python 3 doesn't have longs).\n-        if not PY3:\n+        if not six.PY3:\n             self.assertEqual(Article.objects.all()[long(0)], a)\n             self.assertQuerysetEqual(Article.objects.all()[long(1):long(3)],\n                 [\"<Article: Second article>\", \"<Article: Third article>\"])\n@@ -369,14 +369,14 @@ def test_object_creation(self):\n              \"<Article: Updated article 8>\"])\n \n         # Also, once you have sliced you can't filter, re-order or combine\n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             AssertionError,\n             \"Cannot filter a query once a slice has been taken.\",\n             Article.objects.all()[0:5].filter,\n             id=a.id,\n         )\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             AssertionError,\n             \"Cannot reorder a query once a slice has been taken.\",\n             Article.objects.all()[0:5].order_by,\n@@ -411,7 +411,7 @@ def test_object_creation(self):\n \n         # An Article instance doesn't have access to the \"objects\" attribute.\n         # That's only available on the class.\n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             AttributeError,\n             \"Manager isn't accessible via Article instances\",\n             getattr,"
        },
        {
            "sha": "4c0c4409d89721bbd96fbed68dbfdc06810d8357",
            "filename": "tests/modeltests/empty/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fempty%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fempty%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fempty%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1,10 +1,10 @@\n from __future__ import absolute_import\n \n-from django.conf import settings\n from django.core.exceptions import ImproperlyConfigured\n from django.db.models.loading import get_app\n from django.test import TestCase\n from django.test.utils import override_settings\n+from django.utils import six\n \n from .models import Empty\n \n@@ -14,12 +14,13 @@ def test_empty(self):\n         m = Empty()\n         self.assertEqual(m.id, None)\n         m.save()\n-        m2 = Empty.objects.create()\n+        Empty.objects.create()\n         self.assertEqual(len(Empty.objects.all()), 2)\n         self.assertTrue(m.id is not None)\n         existing = Empty(m.id)\n         existing.save()\n \n+\n class NoModelTests(TestCase):\n     \"\"\"\n     Test for #7198 to ensure that the proper error message is raised\n@@ -32,6 +33,6 @@ class NoModelTests(TestCase):\n     \"\"\"\n     @override_settings(INSTALLED_APPS=(\"modeltests.empty.no_models\",))\n     def test_no_models(self):\n-        with self.assertRaisesRegexp(ImproperlyConfigured,\n+        with six.assertRaisesRegex(self, ImproperlyConfigured,\n                     'App with label no_models is missing a models.py module.'):\n             get_app('no_models')"
        },
        {
            "sha": "f9b0ac8a46b7999d1cd9cd9284ea8d093a62e29a",
            "filename": "tests/modeltests/fixtures/tests.py",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Ffixtures%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Ffixtures%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ffixtures%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -4,7 +4,7 @@\n from django.core import management\n from django.db import connection, IntegrityError\n from django.test import TestCase, TransactionTestCase, skipUnlessDBFeature\n-from django.utils.six import StringIO\n+from django.utils import six\n \n from .models import Article, Book, Spy, Tag, Visa\n \n@@ -21,16 +21,17 @@ def testClassFixtures(self):\n             '<Article: Poker has no place on ESPN>',\n         ])\n \n+\n class FixtureLoadingTests(TestCase):\n \n     def _dumpdata_assert(self, args, output, format='json', natural_keys=False,\n                          use_base_manager=False, exclude_list=[]):\n-        new_io = StringIO()\n-        management.call_command('dumpdata', *args, **{'format':format,\n-                                                      'stdout':new_io,\n-                                                      'stderr':new_io,\n-                                                      'use_natural_keys':natural_keys,\n-                                                      'use_base_manager':use_base_manager,\n+        new_io = six.StringIO()\n+        management.call_command('dumpdata', *args, **{'format': format,\n+                                                      'stdout': new_io,\n+                                                      'stderr': new_io,\n+                                                      'use_natural_keys': natural_keys,\n+                                                      'use_base_manager': use_base_manager,\n                                                       'exclude': exclude_list})\n         command_output = new_io.getvalue().strip()\n         self.assertEqual(command_output, output)\n@@ -42,8 +43,6 @@ def test_initial_data(self):\n         ])\n \n     def test_loading_and_dumping(self):\n-        new_io = StringIO()\n-\n         Site.objects.all().delete()\n         # Load fixture 1. Single JSON file, with two objects.\n         management.call_command('loaddata', 'fixture1.json', verbosity=0, commit=False)\n@@ -184,12 +183,12 @@ def test_dumpdata_with_excludes(self):\n             exclude_list=['fixtures.Article', 'fixtures.Book', 'sites'])\n \n         # Excluding a bogus app should throw an error\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"Unknown app in excludes: foo_app\"):\n             self._dumpdata_assert(['fixtures', 'sites'], '', exclude_list=['foo_app'])\n \n         # Excluding a bogus model should throw an error\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"Unknown model in excludes: fixtures.FooModel\"):\n             self._dumpdata_assert(['fixtures', 'sites'], '', exclude_list=['fixtures.FooModel'])\n \n@@ -199,7 +198,7 @@ def test_dumpdata_with_filtering_manager(self):\n         self.assertQuerysetEqual(Spy.objects.all(),\n                                  ['<Spy: Paul>'])\n         # Use the default manager\n-        self._dumpdata_assert(['fixtures.Spy'],'[{\"pk\": %d, \"model\": \"fixtures.spy\", \"fields\": {\"cover_blown\": false}}]' % spy1.pk)\n+        self._dumpdata_assert(['fixtures.Spy'], '[{\"pk\": %d, \"model\": \"fixtures.spy\", \"fields\": {\"cover_blown\": false}}]' % spy1.pk)\n         # Dump using Django's base manager. Should return all objects,\n         # even those normally filtered by the manager\n         self._dumpdata_assert(['fixtures.Spy'], '[{\"pk\": %d, \"model\": \"fixtures.spy\", \"fields\": {\"cover_blown\": true}}, {\"pk\": %d, \"model\": \"fixtures.spy\", \"fields\": {\"cover_blown\": false}}]' % (spy2.pk, spy1.pk), use_base_manager=True)\n@@ -227,7 +226,7 @@ def test_compressed_loading(self):\n \n     def test_ambiguous_compressed_fixture(self):\n         # The name \"fixture5\" is ambigous, so loading it will raise an error\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"Multiple fixtures named 'fixture5'\"):\n             management.call_command('loaddata', 'fixture5', verbosity=0, commit=False)\n \n@@ -251,7 +250,7 @@ def test_loaddata_error_message(self):\n         # is closed at the end of each test.\n         if connection.vendor == 'mysql':\n             connection.cursor().execute(\"SET sql_mode = 'TRADITIONAL'\")\n-        with self.assertRaisesRegexp(IntegrityError,\n+        with six.assertRaisesRegex(self, IntegrityError,\n                 \"Could not load fixtures.Article\\(pk=1\\): .*$\"):\n             management.call_command('loaddata', 'invalid.json', verbosity=0, commit=False)\n \n@@ -290,10 +289,11 @@ def test_output_formats(self):\n         self._dumpdata_assert(['fixtures'], \"\"\"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n <django-objects version=\"1.0\"><object pk=\"1\" model=\"fixtures.category\"><field type=\"CharField\" name=\"title\">News Stories</field><field type=\"TextField\" name=\"description\">Latest news stories</field></object><object pk=\"2\" model=\"fixtures.article\"><field type=\"CharField\" name=\"headline\">Poker has no place on ESPN</field><field type=\"DateTimeField\" name=\"pub_date\">2006-06-16T12:00:00</field></object><object pk=\"3\" model=\"fixtures.article\"><field type=\"CharField\" name=\"headline\">Time to reform copyright</field><field type=\"DateTimeField\" name=\"pub_date\">2006-06-16T13:00:00</field></object><object pk=\"1\" model=\"fixtures.tag\"><field type=\"CharField\" name=\"name\">copyright</field><field to=\"contenttypes.contenttype\" name=\"tagged_type\" rel=\"ManyToOneRel\"><natural>fixtures</natural><natural>article</natural></field><field type=\"PositiveIntegerField\" name=\"tagged_id\">3</field></object><object pk=\"2\" model=\"fixtures.tag\"><field type=\"CharField\" name=\"name\">law</field><field to=\"contenttypes.contenttype\" name=\"tagged_type\" rel=\"ManyToOneRel\"><natural>fixtures</natural><natural>article</natural></field><field type=\"PositiveIntegerField\" name=\"tagged_id\">3</field></object><object pk=\"1\" model=\"fixtures.person\"><field type=\"CharField\" name=\"name\">Django Reinhardt</field></object><object pk=\"2\" model=\"fixtures.person\"><field type=\"CharField\" name=\"name\">Stephane Grappelli</field></object><object pk=\"3\" model=\"fixtures.person\"><field type=\"CharField\" name=\"name\">Prince</field></object><object pk=\"10\" model=\"fixtures.book\"><field type=\"CharField\" name=\"name\">Achieving self-awareness of Python programs</field><field to=\"fixtures.person\" name=\"authors\" rel=\"ManyToManyRel\"></field></object></django-objects>\"\"\", format='xml', natural_keys=True)\n \n+\n class FixtureTransactionTests(TransactionTestCase):\n     def _dumpdata_assert(self, args, output, format='json'):\n-        new_io = StringIO()\n-        management.call_command('dumpdata', *args, **{'format':format, 'stdout':new_io})\n+        new_io = six.StringIO()\n+        management.call_command('dumpdata', *args, **{'format': format, 'stdout': new_io})\n         command_output = new_io.getvalue().strip()\n         self.assertEqual(command_output, output)\n \n@@ -308,7 +308,7 @@ def test_format_discovery(self):\n \n         # Try to load fixture 2 using format discovery; this will fail\n         # because there are two fixture2's in the fixtures directory\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"Multiple fixtures named 'fixture2'\"):\n             management.call_command('loaddata', 'fixture2', verbosity=0)\n "
        },
        {
            "sha": "7d30379b94d4c620d1c23706ecb56b2fa9d01771",
            "filename": "tests/modeltests/many_to_many/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fmany_to_many%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fmany_to_many%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fmany_to_many%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1,6 +1,7 @@\n from __future__ import absolute_import\n \n from django.test import TestCase\n+from django.utils import six\n \n from .models import Article, Publication\n \n@@ -52,7 +53,7 @@ def test_add(self):\n             ])\n \n         # Adding an object of the wrong type raises TypeError\n-        with self.assertRaisesRegexp(TypeError, \"'Publication' instance expected, got <Article.*\"):\n+        with six.assertRaisesRegex(self, TypeError, \"'Publication' instance expected, got <Article.*\"):\n             a6.publications.add(a5)\n         # Add a Publication directly via publications.add by using keyword arguments.\n         p4 = a6.publications.create(title='Highlights for Adults')"
        },
        {
            "sha": "4fb19dbc695eee5ab2215852b43496e3ae13cc99",
            "filename": "tests/modeltests/many_to_one/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fmany_to_one%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fmany_to_one%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fmany_to_one%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -70,7 +70,7 @@ def test_add(self):\n         self.assertQuerysetEqual(self.r2.article_set.all(), [\"<Article: Paul's story>\"])\n \n         # Adding an object of the wrong type raises TypeError.\n-        with self.assertRaisesRegexp(TypeError, \"'Article' instance expected, got <Reporter.*\"):\n+        with six.assertRaisesRegex(self, TypeError, \"'Article' instance expected, got <Reporter.*\"):\n             self.r.article_set.add(self.r2)\n         self.assertQuerysetEqual(self.r.article_set.all(),\n             ["
        },
        {
            "sha": "e404c8b06583c9541240fac9c0c372af200c4421",
            "filename": "tests/modeltests/raw_query/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fraw_query%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fraw_query%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fraw_query%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -2,7 +2,7 @@\n \n from datetime import date\n \n-from django.db.models.sql.query import InvalidQuery\n+from django.db.models.query_utils import InvalidQuery\n from django.test import TestCase\n \n from .models import Author, Book, Coffee, Reviewer, FriendlyAuthor"
        },
        {
            "sha": "9ca0f968d1afd586a0d2591dd4ad7b04c1df6870",
            "filename": "tests/modeltests/update_only_fields/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fupdate_only_fields%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fupdate_only_fields%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fupdate_only_fields%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1,7 +1,8 @@\n from __future__ import absolute_import\n \n-from django.test import TestCase\n from django.db.models.signals import pre_save, post_save\n+from django.test import TestCase\n+\n from .models import Person, Employee, ProxyEmployee, Profile, Account\n \n "
        },
        {
            "sha": "63c033a750802e61f20cc540d2a9c2f4f2f82e81",
            "filename": "tests/modeltests/validation/test_error_messages.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fvalidation%2Ftest_error_messages.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fmodeltests%2Fvalidation%2Ftest_error_messages.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fvalidation%2Ftest_error_messages.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -3,6 +3,7 @@\n \n from django.core.exceptions import ValidationError\n from django.db import models\n+from django.utils import six\n from django.utils.unittest import TestCase\n \n \n@@ -18,7 +19,7 @@ def test_autofield_field_raises_error_message(self):\n         self._test_validation_messages(f, 'fõo',\n             [\"'fõo' value must be an integer.\"])\n         # primary_key must be True. Refs #12467.\n-        with self.assertRaisesRegexp(AssertionError,\n+        with six.assertRaisesRegex(self, AssertionError,\n                 \"AutoFields must have primary_key=True.\"):\n             models.AutoField(primary_key=False)\n "
        },
        {
            "sha": "6a36f62cea1df3bf8f321657c1cbd5563552b025",
            "filename": "tests/regressiontests/admin_filters/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fadmin_filters%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fadmin_filters%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_filters%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -9,7 +9,7 @@\n from django.contrib.auth.models import User\n from django.core.exceptions import ImproperlyConfigured\n from django.test import TestCase, RequestFactory\n-from django.test.utils import override_settings\n+from django.test.utils import override_settings, six\n from django.utils.encoding import force_text\n \n from .models import Book, Department, Employee\n@@ -18,6 +18,7 @@\n def select_by(dictlist, key, value):\n     return [x for x in dictlist if x[key] == value][0]\n \n+\n class DecadeListFilter(SimpleListFilter):\n \n     def lookups(self, request, model_admin):\n@@ -520,7 +521,7 @@ def test_listfilter_without_title(self):\n         \"\"\"\n         modeladmin = DecadeFilterBookAdminWithoutTitle(Book, site)\n         request = self.request_factory.get('/', {})\n-        self.assertRaisesRegexp(ImproperlyConfigured,\n+        six.assertRaisesRegex(self, ImproperlyConfigured,\n             \"The list filter 'DecadeListFilterWithoutTitle' does not specify a 'title'.\",\n             self.get_changelist, request, Book, modeladmin)\n \n@@ -530,7 +531,7 @@ def test_simplelistfilter_without_parameter(self):\n         \"\"\"\n         modeladmin = DecadeFilterBookAdminWithoutParameter(Book, site)\n         request = self.request_factory.get('/', {})\n-        self.assertRaisesRegexp(ImproperlyConfigured,\n+        six.assertRaisesRegex(self, ImproperlyConfigured,\n             \"The list filter 'DecadeListFilterWithoutParameter' does not specify a 'parameter_name'.\",\n             self.get_changelist, request, Book, modeladmin)\n "
        },
        {
            "sha": "bc0f68456397d7af28d596eac0cd4a3be9dd1024",
            "filename": "tests/regressiontests/admin_scripts/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1576,7 +1576,6 @@ def test_custom_project_destination_missing(self):\n         self.assertOutput(err, \"Destination directory '%s' does not exist, please create it first.\" % testproject_dir)\n         self.assertFalse(os.path.exists(testproject_dir))\n \n-\n     def test_custom_project_template_with_non_ascii_templates(self):\n         \"Ticket 18091: Make sure the startproject management command is able to render templates with non-ASCII content\"\n         template_path = os.path.join(test_dir, 'admin_scripts', 'custom_templates', 'project_template')\n@@ -1588,5 +1587,6 @@ def test_custom_project_template_with_non_ascii_templates(self):\n         self.assertNoOutput(err)\n         self.assertTrue(os.path.isdir(testproject_dir))\n         path = os.path.join(testproject_dir, 'ticket-18091-non-ascii-template.txt')\n-        self.assertEqual(codecs.open(path, 'r', 'utf-8').read(),\n-                         'Some non-ASCII text for testing ticket #18091:\\nüäö €\\n')\n+        with codecs.open(path, 'r', 'utf-8') as f:\n+            self.assertEqual(f.read(),\n+                'Some non-ASCII text for testing ticket #18091:\\nüäö €\\n')"
        },
        {
            "sha": "e53b02032e4b53b6cc1a7dad06bea87e16fceba9",
            "filename": "tests/regressiontests/backends/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbackends%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -655,7 +655,7 @@ def runner2(other_thread_connection):\n \n class BackendLoadingTests(TestCase):\n     def test_old_style_backends_raise_useful_exception(self):\n-        self.assertRaisesRegexp(ImproperlyConfigured,\n+        six.assertRaisesRegex(self, ImproperlyConfigured,\n             \"Try using django.db.backends.sqlite3 instead\",\n             load_backend, 'sqlite3')\n "
        },
        {
            "sha": "de27bc947615e9aaeec430dea63a5e998e82106d",
            "filename": "tests/regressiontests/cache/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcache%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -15,7 +15,7 @@\n \n from django.conf import settings\n from django.core import management\n-from django.core.cache import get_cache, DEFAULT_CACHE_ALIAS\n+from django.core.cache import get_cache\n from django.core.cache.backends.base import (CacheKeyWarning,\n     InvalidCacheBackendError)\n from django.db import router\n@@ -25,8 +25,7 @@\n from django.template import Template\n from django.template.response import TemplateResponse\n from django.test import TestCase, TransactionTestCase, RequestFactory\n-from django.test.utils import (get_warnings_state, restore_warnings_state,\n-    override_settings)\n+from django.test.utils import override_settings, six\n from django.utils import timezone, translation, unittest\n from django.utils.cache import (patch_vary_headers, get_cache_key,\n     learn_cache_key, patch_cache_control, patch_response_headers)\n@@ -821,7 +820,7 @@ def test_old_initialization(self):\n         self.perform_cull_test(50, 18)\n \n     def test_second_call_doesnt_crash(self):\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"Cache table 'test cache table' could not be created\"):\n             management.call_command(\n                'createcachetable',"
        },
        {
            "sha": "281041e651f6d04abcb1a3abe0338f47f21b8d01",
            "filename": "tests/regressiontests/file_storage/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_storage%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -73,7 +73,7 @@ def test_get_nonexisting_storage_module(self):\n         get_storage_class raises an error if the requested module don't exist.\n         \"\"\"\n         # Error message may or may not be the fully qualified path.\n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             ('Error importing storage module django.core.files.non_existing_'\n                 'storage: \"No module named .*non_existing_storage\"'),"
        },
        {
            "sha": "2a1ec7db217d9864b7b511384df76368fde645f5",
            "filename": "tests/regressiontests/file_uploads/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -100,7 +100,7 @@ def test_unicode_file_name(self):\n \n         try:\n             os.unlink(file1.name)\n-        except:\n+        except OSError:\n             pass\n \n         self.assertEqual(response.status_code, 200)\n@@ -384,15 +384,13 @@ def test_not_a_directory(self):\n         \"\"\"The correct IOError is raised when the upload directory name exists but isn't a directory\"\"\"\n         # Create a file with the upload directory name\n         open(UPLOAD_TO, 'wb').close()\n-        try:\n+        with self.assertRaises(IOError) as exc_info:\n             self.obj.testfile.save('foo.txt', SimpleUploadedFile('foo.txt', b'x'))\n-        except IOError as err:\n-            # The test needs to be done on a specific string as IOError\n-            # is raised even without the patch (just not early enough)\n-            self.assertEqual(err.args[0],\n-                              \"%s exists and is not a directory.\" % UPLOAD_TO)\n-        except:\n-            self.fail(\"IOError not raised\")\n+        # The test needs to be done on a specific string as IOError\n+        # is raised even without the patch (just not early enough)\n+        self.assertEqual(exc_info.exception.args[0],\n+                          \"%s exists and is not a directory.\" % UPLOAD_TO)\n+\n \n class MultiParserTests(unittest.TestCase):\n "
        },
        {
            "sha": "d675372c7a99934ff1176042a7471ce7a6504116",
            "filename": "tests/regressiontests/fixtures_regress/tests.py",
            "status": "modified",
            "additions": 20,
            "deletions": 24,
            "changes": 44,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -13,25 +13,23 @@\n from django.test import (TestCase, TransactionTestCase, skipIfDBFeature,\n     skipUnlessDBFeature)\n from django.test.utils import override_settings\n+from django.utils import six\n from django.utils.six import PY3, StringIO\n \n from .models import (Animal, Stuff, Absolute, Parent, Child, Article, Widget,\n     Store, Person, Book, NKChild, RefToNKChild, Circle1, Circle2, Circle3,\n     ExternalDependency, Thingy)\n \n \n-pre_save_checks = []\n-def animal_pre_save_check(signal, sender, instance, **kwargs):\n-    \"A signal that is used to check the type of data loaded from fixtures\"\n-    pre_save_checks.append(\n-        (\n-            'Count = %s (%s)' % (instance.count, type(instance.count)),\n-            'Weight = %s (%s)' % (instance.weight, type(instance.weight)),\n+class TestFixtures(TestCase):\n+    def animal_pre_save_check(self, signal, sender, instance, **kwargs):\n+        self.pre_save_checks.append(\n+            (\n+                'Count = %s (%s)' % (instance.count, type(instance.count)),\n+                'Weight = %s (%s)' % (instance.weight, type(instance.weight)),\n+            )\n         )\n-    )\n-\n \n-class TestFixtures(TestCase):\n     def test_duplicate_pk(self):\n         \"\"\"\n         This is a regression test for ticket #3790.\n@@ -110,13 +108,12 @@ def test_absolute_path(self):\n         )\n         self.assertEqual(Absolute.load_count, 1)\n \n-\n     def test_unknown_format(self):\n         \"\"\"\n         Test for ticket #4371 -- Loading data of an unknown format should fail\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"Problem installing fixture 'bad_fixture1': \"\n                 \"unkn is not a known serialization format.\"):\n             management.call_command(\n@@ -131,7 +128,7 @@ def test_unimportable_serializer(self):\n         \"\"\"\n         Test that failing serializer import raises the proper error\n         \"\"\"\n-        with self.assertRaisesRegexp(ImportError,\n+        with six.assertRaisesRegex(self, ImportError,\n                 \"No module named unexistent.path\"):\n             management.call_command(\n                 'loaddata',\n@@ -146,7 +143,7 @@ def test_invalid_data(self):\n         using explicit filename.\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"No fixture data found for 'bad_fixture2'. \\(File format may be invalid.\\)\"):\n             management.call_command(\n                 'loaddata',\n@@ -161,7 +158,7 @@ def test_invalid_data_no_ext(self):\n         without file extension.\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"No fixture data found for 'bad_fixture2'. \\(File format may be invalid.\\)\"):\n             management.call_command(\n                 'loaddata',\n@@ -175,7 +172,7 @@ def test_empty(self):\n         Test for ticket #4371 -- Loading a fixture file with no data returns an error.\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"No fixture data found for 'empty'. \\(File format may be invalid.\\)\"):\n             management.call_command(\n                 'loaddata',\n@@ -188,7 +185,7 @@ def test_error_message(self):\n         \"\"\"\n         (Regression for #9011 - error message is correct)\n         \"\"\"\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"^No fixture data found for 'bad_fixture2'. \\(File format may be invalid.\\)$\"):\n             management.call_command(\n                 'loaddata',\n@@ -245,9 +242,8 @@ def test_field_value_coerce(self):\n         Test for tickets #8298, #9942 - Field values should be coerced into the\n         correct type by the deserializer, not as part of the database write.\n         \"\"\"\n-        global pre_save_checks\n-        pre_save_checks = []\n-        signals.pre_save.connect(animal_pre_save_check)\n+        self.pre_save_checks = []\n+        signals.pre_save.connect(self.animal_pre_save_check)\n         try:\n             management.call_command(\n                 'loaddata',\n@@ -256,14 +252,14 @@ def test_field_value_coerce(self):\n                 commit=False,\n             )\n             self.assertEqual(\n-                pre_save_checks,\n+                self.pre_save_checks,\n                 [\n                     (\"Count = 42 (<%s 'int'>)\" % ('class' if PY3 else 'type'),\n                      \"Weight = 1.2 (<%s 'float'>)\" % ('class' if PY3 else 'type'))\n                 ]\n             )\n         finally:\n-            signals.pre_save.disconnect(animal_pre_save_check)\n+            signals.pre_save.disconnect(self.animal_pre_save_check)\n \n     def test_dumpdata_uses_default_manager(self):\n         \"\"\"\n@@ -353,7 +349,7 @@ def test_loaddata_raises_error_when_fixture_has_invalid_foreign_key(self):\n         \"\"\"\n         Regression for #3615 - Ensure data with nonexistent child key references raises error\n         \"\"\"\n-        with self.assertRaisesRegexp(IntegrityError,\n+        with six.assertRaisesRegex(self, IntegrityError,\n                 \"Problem installing fixture\"):\n             management.call_command(\n                 'loaddata',\n@@ -385,7 +381,7 @@ def test_loaddata_no_fixture_specified(self):\n         \"\"\"\n         Regression for #7043 - Error is quickly reported when no fixtures is provided in the command line.\n         \"\"\"\n-        with self.assertRaisesRegexp(management.CommandError,\n+        with six.assertRaisesRegex(self, management.CommandError,\n                 \"No database fixture specified. Please provide the path of \"\n                 \"at least one fixture in the command line.\"):\n             management.call_command("
        },
        {
            "sha": "197ce1abd92e6dd9e784f3af43dd43c07938ba6f",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -475,7 +475,7 @@ def test_regexfield_4(self):\n     def test_regexfield_5(self):\n         f = RegexField('^\\d+$', min_length=5, max_length=10)\n         self.assertRaisesMessage(ValidationError, \"'Ensure this value has at least 5 characters (it has 3).'\", f.clean, '123')\n-        self.assertRaisesRegexp(ValidationError, \"'Ensure this value has at least 5 characters \\(it has 3\\)\\.', u?'Enter a valid value\\.'\", f.clean, 'abc')\n+        six.assertRaisesRegex(self, ValidationError, \"'Ensure this value has at least 5 characters \\(it has 3\\)\\.', u?'Enter a valid value\\.'\", f.clean, 'abc')\n         self.assertEqual('12345', f.clean('12345'))\n         self.assertEqual('1234567890', f.clean('1234567890'))\n         self.assertRaisesMessage(ValidationError, \"'Ensure this value has at most 10 characters (it has 11).'\", f.clean, '12345678901')\n@@ -1036,7 +1036,7 @@ def test_splitdatetimefield_1(self):\n         self.assertRaisesMessage(ValidationError, \"'This field is required.'\", f.clean, None)\n         self.assertRaisesMessage(ValidationError, \"'This field is required.'\", f.clean, '')\n         self.assertRaisesMessage(ValidationError, \"'Enter a list of values.'\", f.clean, 'hello')\n-        self.assertRaisesRegexp(ValidationError, \"'Enter a valid date\\.', u?'Enter a valid time\\.'\", f.clean, ['hello', 'there'])\n+        six.assertRaisesRegex(self, ValidationError, \"'Enter a valid date\\.', u?'Enter a valid time\\.'\", f.clean, ['hello', 'there'])\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid time.'\", f.clean, ['2006-01-10', 'there'])\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid date.'\", f.clean, ['hello', '07:30'])\n \n@@ -1049,7 +1049,7 @@ def test_splitdatetimefield_2(self):\n         self.assertEqual(None, f.clean(['']))\n         self.assertEqual(None, f.clean(['', '']))\n         self.assertRaisesMessage(ValidationError, \"'Enter a list of values.'\", f.clean, 'hello')\n-        self.assertRaisesRegexp(ValidationError, \"'Enter a valid date\\.', u?'Enter a valid time\\.'\", f.clean, ['hello', 'there'])\n+        six.assertRaisesRegex(self, ValidationError, \"'Enter a valid date\\.', u?'Enter a valid time\\.'\", f.clean, ['hello', 'there'])\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid time.'\", f.clean, ['2006-01-10', 'there'])\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid date.'\", f.clean, ['hello', '07:30'])\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid time.'\", f.clean, ['2006-01-10', ''])"
        },
        {
            "sha": "544ca41642991fad9e25f6f905b93b1b21f84147",
            "filename": "tests/regressiontests/forms/tests/widgets.py",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -216,13 +216,9 @@ def test_checkboxinput(self):\n         self.assertHTMLEqual(w.render('greeting', 'hello there'), '<input checked=\"checked\" type=\"checkbox\" name=\"greeting\" value=\"hello there\" />')\n         self.assertHTMLEqual(w.render('greeting', 'hello & goodbye'), '<input checked=\"checked\" type=\"checkbox\" name=\"greeting\" value=\"hello &amp; goodbye\" />')\n \n-        # A subtlety: If the 'check_test' argument cannot handle a value and raises any\n-        # exception during its __call__, then the exception will be swallowed and the box\n-        # will not be checked. In this example, the 'check_test' assumes the value has a\n-        # startswith() method, which fails for the values True, False and None.\n-        self.assertHTMLEqual(w.render('greeting', True), '<input type=\"checkbox\" name=\"greeting\" />')\n-        self.assertHTMLEqual(w.render('greeting', False), '<input type=\"checkbox\" name=\"greeting\" />')\n-        self.assertHTMLEqual(w.render('greeting', None), '<input type=\"checkbox\" name=\"greeting\" />')\n+        # Ticket #17888: calling check_test shouldn't swallow exceptions\n+        with self.assertRaises(AttributeError):\n+            w.render('greeting', True)\n \n         # The CheckboxInput widget will return False if the key is not found in the data\n         # dictionary (because HTML form submission doesn't send any result for unchecked"
        },
        {
            "sha": "34863b64930f3eedf16d0c584bb4e6b4b9c1d776",
            "filename": "tests/regressiontests/handlers/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fhandlers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fhandlers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhandlers%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -17,10 +17,8 @@ def test_lock_safety(self):\n         # Try running the handler, it will fail in load_middleware\n         handler = WSGIHandler()\n         self.assertEqual(handler.initLock.locked(), False)\n-        try:\n+        with self.assertRaises(Exception):\n             handler(None, None)\n-        except:\n-            pass\n         self.assertEqual(handler.initLock.locked(), False)\n         # Reset settings\n         settings.MIDDLEWARE_CLASSES = old_middleware_classes"
        },
        {
            "sha": "c6ab77941bd116c4db3abdf0d05efbe6753acf9b",
            "filename": "tests/regressiontests/i18n/commands/compilation.py",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -3,11 +3,12 @@\n from django.core.management import call_command, CommandError\n from django.test import TestCase\n from django.test.utils import override_settings\n-from django.utils import translation\n+from django.utils import translation, six\n from django.utils.six import StringIO\n \n test_dir = os.path.abspath(os.path.dirname(__file__))\n \n+\n class MessageCompilationTests(TestCase):\n \n     def setUp(self):\n@@ -19,12 +20,12 @@ def tearDown(self):\n \n class PoFileTests(MessageCompilationTests):\n \n-    LOCALE='es_AR'\n-    MO_FILE='locale/%s/LC_MESSAGES/django.mo' % LOCALE\n+    LOCALE = 'es_AR'\n+    MO_FILE = 'locale/%s/LC_MESSAGES/django.mo' % LOCALE\n \n     def test_bom_rejection(self):\n         os.chdir(test_dir)\n-        with self.assertRaisesRegexp(CommandError,\n+        with six.assertRaisesRegex(self, CommandError,\n                 \"file has a BOM \\(Byte Order Mark\\)\"):\n             call_command('compilemessages', locale=self.LOCALE, stderr=StringIO())\n         self.assertFalse(os.path.exists(self.MO_FILE))"
        },
        {
            "sha": "e979fb43375f1a74d08184f7beec92d359d21bf3",
            "filename": "tests/regressiontests/inline_formsets/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Finline_formsets%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Finline_formsets%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Finline_formsets%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -123,7 +123,7 @@ def test_exception_on_unspecified_foreign_key(self):\n         Child has two ForeignKeys to Parent, so if we don't specify which one\n         to use for the inline formset, we should get an exception.\n         \"\"\"\n-        self.assertRaisesRegexp(Exception,\n+        six.assertRaisesRegex(self, Exception,\n             \"<class 'regressiontests.inline_formsets.models.Child'> has more than 1 ForeignKey to <class 'regressiontests.inline_formsets.models.Parent'>\",\n             inlineformset_factory, Parent, Child\n         )\n@@ -143,7 +143,7 @@ def test_non_foreign_key_field(self):\n         If the field specified in fk_name is not a ForeignKey, we should get an\n         exception.\n         \"\"\"\n-        self.assertRaisesRegexp(Exception,\n+        six.assertRaisesRegex(self, Exception,\n             \"<class 'regressiontests.inline_formsets.models.Child'> has no field named 'test'\",\n             inlineformset_factory, Parent, Child, fk_name='test'\n         )"
        },
        {
            "sha": "476efc12ba76102ff6b995c0df565a52cc38d6a0",
            "filename": "tests/regressiontests/localflavor/tr/tests.py",
            "status": "modified",
            "additions": 17,
            "deletions": 15,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Flocalflavor%2Ftr%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Flocalflavor%2Ftr%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Ftr%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -2,29 +2,31 @@\n \n from django.contrib.localflavor.tr import forms as trforms\n from django.core.exceptions import ValidationError\n+from django.utils import six\n from django.utils.unittest import TestCase\n \n+\n class TRLocalFlavorTests(TestCase):\n     def test_TRPostalCodeField(self):\n         f = trforms.TRPostalCodeField()\n         self.assertEqual(f.clean(\"06531\"), \"06531\")\n         self.assertEqual(f.clean(\"12345\"), \"12345\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             \"Enter a postal code in the format XXXXX.\",\n             f.clean, \"a1234\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             \"Enter a postal code in the format XXXXX.\",\n             f.clean, \"1234\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             \"Enter a postal code in the format XXXXX.\",\n             f.clean, \"82123\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             \"Enter a postal code in the format XXXXX.\",\n             f.clean, \"00123\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             \"Enter a postal code in the format XXXXX.\",\n             f.clean, \"123456\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             \"Enter a postal code in the format XXXXX.\",\n             f.clean, \"12 34\")\n         self.assertRaises(ValidationError, f.clean, None)\n@@ -40,34 +42,34 @@ def test_TRPhoneNumberField(self):\n         self.assertEqual(f.clean(\"+90 312 455 4567\"), \"3124554567\")\n         self.assertEqual(f.clean(\"+90 312 455 45 67\"), \"3124554567\")\n         self.assertEqual(f.clean(\"+90 (312) 4554567\"), \"3124554567\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Phone numbers must be in 0XXX XXX XXXX format.',\n             f.clean, \"1234 233 1234\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Phone numbers must be in 0XXX XXX XXXX format.',\n             f.clean, \"0312 233 12345\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Phone numbers must be in 0XXX XXX XXXX format.',\n             f.clean, \"0312 233 123\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Phone numbers must be in 0XXX XXX XXXX format.',\n             f.clean, \"0312 233 xxxx\")\n \n     def test_TRIdentificationNumberField(self):\n         f = trforms.TRIdentificationNumberField()\n         self.assertEqual(f.clean(\"10000000146\"), \"10000000146\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Enter a valid Turkish Identification number.',\n             f.clean, \"10000000136\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Enter a valid Turkish Identification number.',\n             f.clean, \"10000000147\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Turkish Identification number must be 11 digits.',\n             f.clean, \"123456789\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Enter a valid Turkish Identification number.',\n             f.clean, \"1000000014x\")\n-        self.assertRaisesRegexp(ValidationError,\n+        six.assertRaisesRegex(self, ValidationError,\n             'Enter a valid Turkish Identification number.',\n             f.clean, \"x0000000146\")"
        },
        {
            "sha": "92628c18250c1d0fdb0b48664aeef4946d0efeab",
            "filename": "tests/regressiontests/m2m_regress/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fm2m_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fm2m_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fm2m_regress%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -2,6 +2,7 @@\n \n from django.core.exceptions import FieldError\n from django.test import TestCase\n+from django.utils import six\n \n from .models import (SelfRefer, Tag, TagCollection, Entry, SelfReferChild,\n     SelfReferChildSibling, Worksheet)\n@@ -35,7 +36,7 @@ def test_internal_related_name_not_in_error_msg(self):\n         # The secret internal related names for self-referential many-to-many\n         # fields shouldn't appear in the list when an error is made.\n \n-        self.assertRaisesRegexp(FieldError,\n+        six.assertRaisesRegex(self, FieldError,\n             \"Choices are: id, name, references, related, selfreferchild, selfreferchildsibling$\",\n             lambda: SelfRefer.objects.filter(porcupine='fred')\n         )\n@@ -70,7 +71,7 @@ def test_add_m2m_with_base_class(self):\n         t2 = Tag.objects.create(name='t2')\n \n         c1 = TagCollection.objects.create(name='c1')\n-        c1.tags = [t1,t2]\n+        c1.tags = [t1, t2]\n         c1 = TagCollection.objects.get(name='c1')\n \n         self.assertQuerysetEqual(c1.tags.all(), [\"<Tag: t1>\", \"<Tag: t2>\"])"
        },
        {
            "sha": "d980d7437c1cf837930deb5053bd8eb06abd2ddb",
            "filename": "tests/regressiontests/many_to_one_regress/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fmany_to_one_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fmany_to_one_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmany_to_one_regress%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -2,8 +2,9 @@\n \n from django.db import models\n from django.test import TestCase\n+from django.utils import six\n \n-from .models import First, Second, Third, Parent, Child, Category, Record, Relation\n+from .models import First, Third, Parent, Child, Category, Record, Relation\n \n \n class ManyToOneRegressionTests(TestCase):\n@@ -59,7 +60,7 @@ def test_fk_assignment_and_related_object_cache(self):\n         self.assertRaises(ValueError, Child.objects.create, name='xyzzy', parent=None)\n \n         # Trying to assign to unbound attribute raises AttributeError\n-        self.assertRaisesRegexp(AttributeError, \"must be accessed via instance\",\n+        six.assertRaisesRegex(self, AttributeError, \"must be accessed via instance\",\n             Child.parent.__set__, None, p)\n \n         # Creation using keyword argument should cache the related object."
        },
        {
            "sha": "b0a181218b2c4ae80f8492e7e544ba1b59897366",
            "filename": "tests/regressiontests/modeladmin/tests.py",
            "status": "modified",
            "additions": 64,
            "deletions": 64,
            "changes": 128,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -16,7 +16,7 @@\n from django.forms.widgets import Select\n from django.test import TestCase\n from django.test.utils import str_prefix\n-from django.utils import unittest\n+from django.utils import unittest, six\n \n from .models import Band, Concert, ValidationTestModel, ValidationTestInlineModel\n \n@@ -506,7 +506,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n             site = AdminSite()\n \n-            self.assertRaisesRegexp(\n+            six.assertRaisesRegex(self,\n                 ImproperlyConfigured,\n                 \"'ValidationTestModelAdmin.raw_id_fields' must be a list or tuple.\",\n                 site.register,\n@@ -524,7 +524,7 @@ def test_raw_id_fields_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             raw_id_fields = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.raw_id_fields' must be a list or tuple.\",\n             validate,\n@@ -535,7 +535,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             raw_id_fields = ('non_existent_field',)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.raw_id_fields' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n@@ -546,7 +546,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             raw_id_fields = ('name',)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.raw_id_fields\\[0\\]', 'name' must be either a ForeignKey or ManyToManyField.\",\n             validate,\n@@ -564,7 +564,7 @@ def test_fieldsets_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             fieldsets = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.fieldsets' must be a list or tuple.\",\n             validate,\n@@ -575,7 +575,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             fieldsets = ({},)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.fieldsets\\[0\\]' must be a list or tuple.\",\n             validate,\n@@ -586,7 +586,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             fieldsets = ((),)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.fieldsets\\[0\\]' does not have exactly two elements.\",\n             validate,\n@@ -597,7 +597,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             fieldsets = ((\"General\", ()),)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.fieldsets\\[0\\]\\[1\\]' must be a dictionary.\",\n             validate,\n@@ -608,7 +608,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             fieldsets = ((\"General\", {}),)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'fields' key is required in ValidationTestModelAdmin.fieldsets\\[0\\]\\[1\\] field options dict.\",\n             validate,\n@@ -619,7 +619,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             fieldsets = ((\"General\", {\"fields\": (\"non_existent_field\",)}),)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.fieldsets\\[0\\]\\[1\\]\\['fields'\\]' refers to field 'non_existent_field' that is missing from the form.\",\n             validate,\n@@ -636,7 +636,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n             fieldsets = ((\"General\", {\"fields\": (\"name\",)}),)\n             fields = [\"name\",]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"Both fieldsets and fields are specified in ValidationTestModelAdmin.\",\n             validate,\n@@ -647,7 +647,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             fieldsets = [(None, {'fields': ['name', 'name']})]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"There are duplicate field\\(s\\) in ValidationTestModelAdmin.fieldsets\",\n             validate,\n@@ -658,7 +658,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             fields = [\"name\", \"name\"]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"There are duplicate field\\(s\\) in ValidationTestModelAdmin.fields\",\n             validate,\n@@ -674,7 +674,7 @@ class FakeForm(object):\n         class ValidationTestModelAdmin(ModelAdmin):\n             form = FakeForm\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"ValidationTestModelAdmin.form does not inherit from BaseModelForm.\",\n             validate,\n@@ -692,7 +692,7 @@ class BandAdmin(ModelAdmin):\n                 }),\n             )\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'BandAdmin.fieldsets\\[0\\]\\[1\\]\\['fields'\\]' refers to field 'non_existent_field' that is missing from the form.\",\n             validate,\n@@ -722,7 +722,7 @@ class BandAdmin(ModelAdmin):\n                 }),\n             )\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'BandAdmin.fieldsets\\[0]\\[1\\]\\['fields'\\]' refers to field 'non_existent_field' that is missing from the form.\",\n             validate,\n@@ -752,7 +752,7 @@ def test_filter_vertical_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             filter_vertical = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.filter_vertical' must be a list or tuple.\",\n             validate,\n@@ -763,7 +763,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             filter_vertical = (\"non_existent_field\",)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.filter_vertical' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n@@ -774,7 +774,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             filter_vertical = (\"name\",)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.filter_vertical\\[0\\]' must be a ManyToManyField.\",\n             validate,\n@@ -792,7 +792,7 @@ def test_filter_horizontal_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             filter_horizontal = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.filter_horizontal' must be a list or tuple.\",\n             validate,\n@@ -803,7 +803,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             filter_horizontal = (\"non_existent_field\",)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.filter_horizontal' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n@@ -814,7 +814,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             filter_horizontal = (\"name\",)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.filter_horizontal\\[0\\]' must be a ManyToManyField.\",\n             validate,\n@@ -832,7 +832,7 @@ def test_radio_fields_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             radio_fields = ()\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.radio_fields' must be a dictionary.\",\n             validate,\n@@ -843,7 +843,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             radio_fields = {\"non_existent_field\": None}\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.radio_fields' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n@@ -854,7 +854,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             radio_fields = {\"name\": None}\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.radio_fields\\['name'\\]' is neither an instance of ForeignKey nor does have choices set.\",\n             validate,\n@@ -865,7 +865,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             radio_fields = {\"state\": None}\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.radio_fields\\['state'\\]' is neither admin.HORIZONTAL nor admin.VERTICAL.\",\n             validate,\n@@ -883,7 +883,7 @@ def test_prepopulated_fields_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             prepopulated_fields = ()\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.prepopulated_fields' must be a dictionary.\",\n             validate,\n@@ -894,7 +894,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             prepopulated_fields = {\"non_existent_field\": None}\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.prepopulated_fields' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n@@ -905,7 +905,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             prepopulated_fields = {\"slug\": (\"non_existent_field\",)}\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.prepopulated_fields\\['slug'\\]\\[0\\]' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n@@ -916,7 +916,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             prepopulated_fields = {\"users\": (\"name\",)}\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.prepopulated_fields\\['users'\\]' is either a DateTimeField, ForeignKey or ManyToManyField. This isn't allowed.\",\n             validate,\n@@ -934,7 +934,7 @@ def test_list_display_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_display = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_display' must be a list or tuple.\",\n             validate,\n@@ -945,7 +945,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_display = ('non_existent_field',)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             str_prefix(\"ValidationTestModelAdmin.list_display\\[0\\], %(_)s'non_existent_field' is not a callable or an attribute of 'ValidationTestModelAdmin' or found in the model 'ValidationTestModel'.\"),\n             validate,\n@@ -956,7 +956,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_display = ('users',)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_display\\[0\\]', 'users' is a ManyToManyField which is not supported.\",\n             validate,\n@@ -979,7 +979,7 @@ def test_list_display_links_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_display_links = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_display_links' must be a list or tuple.\",\n             validate,\n@@ -990,7 +990,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_display_links = ('non_existent_field',)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_display_links\\[0\\]' refers to 'non_existent_field' which is not defined in 'list_display'.\",\n             validate,\n@@ -1001,7 +1001,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_display_links = ('name',)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_display_links\\[0\\]' refers to 'name' which is not defined in 'list_display'.\",\n             validate,\n@@ -1025,7 +1025,7 @@ def test_list_filter_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_filter = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_filter' must be a list or tuple.\",\n             validate,\n@@ -1036,7 +1036,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_filter = ('non_existent_field',)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_filter\\[0\\]' refers to 'non_existent_field' which does not refer to a Field.\",\n             validate,\n@@ -1050,7 +1050,7 @@ class RandomClass(object):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_filter = (RandomClass,)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_filter\\[0\\]' is 'RandomClass' which is not a descendant of ListFilter.\",\n             validate,\n@@ -1061,7 +1061,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_filter = (('is_active', RandomClass),)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_filter\\[0\\]\\[1\\]' is 'RandomClass' which is not of type FieldListFilter.\",\n             validate,\n@@ -1080,7 +1080,7 @@ def get_query_set(self, cl, qs):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_filter = (('is_active', AwesomeFilter),)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_filter\\[0\\]\\[1\\]' is 'AwesomeFilter' which is not of type FieldListFilter.\",\n             validate,\n@@ -1091,7 +1091,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_filter = (BooleanFieldListFilter,)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_filter\\[0\\]' is 'BooleanFieldListFilter' which is of type FieldListFilter but is not associated with a field name.\",\n             validate,\n@@ -1111,7 +1111,7 @@ def test_list_per_page_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_per_page = 'hello'\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_per_page' should be a integer.\",\n             validate,\n@@ -1129,7 +1129,7 @@ def test_max_show_all_allowed_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_max_show_all = 'hello'\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_max_show_all' should be an integer.\",\n             validate,\n@@ -1147,7 +1147,7 @@ def test_search_fields_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             search_fields = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.search_fields' must be a list or tuple.\",\n             validate,\n@@ -1160,7 +1160,7 @@ def test_date_hierarchy_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             date_hierarchy = 'non_existent_field'\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.date_hierarchy' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n@@ -1171,7 +1171,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             date_hierarchy = 'name'\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.date_hierarchy is neither an instance of DateField nor DateTimeField.\",\n             validate,\n@@ -1189,7 +1189,7 @@ def test_ordering_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             ordering = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.ordering' must be a list or tuple.\",\n             validate,\n@@ -1200,7 +1200,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             ordering = ('non_existent_field',)\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.ordering\\[0\\]' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n@@ -1211,7 +1211,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n         class ValidationTestModelAdmin(ModelAdmin):\n             ordering = ('?', 'name')\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.ordering' has the random ordering marker '\\?', but contains other fields as well. Please either remove '\\?' or the other fields.\",\n             validate,\n@@ -1239,7 +1239,7 @@ def test_list_select_related_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             list_select_related = 1\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.list_select_related' should be a boolean.\",\n             validate,\n@@ -1257,7 +1257,7 @@ def test_save_as_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             save_as = 1\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.save_as' should be a boolean.\",\n             validate,\n@@ -1275,7 +1275,7 @@ def test_save_on_top_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             save_on_top = 1\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.save_on_top' should be a boolean.\",\n             validate,\n@@ -1293,7 +1293,7 @@ def test_inlines_validation(self):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = 10\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.inlines' must be a list or tuple.\",\n             validate,\n@@ -1307,7 +1307,7 @@ class ValidationTestInline(object):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.inlines\\[0\\]' does not inherit from BaseModelAdmin.\",\n             validate,\n@@ -1321,7 +1321,7 @@ class ValidationTestInline(TabularInline):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'model' is a required attribute of 'ValidationTestModelAdmin.inlines\\[0\\]'.\",\n             validate,\n@@ -1338,7 +1338,7 @@ class ValidationTestInline(TabularInline):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestModelAdmin.inlines\\[0\\].model' does not inherit from models.Model.\",\n             validate,\n@@ -1363,7 +1363,7 @@ class ValidationTestInline(TabularInline):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestInline.fields' must be a list or tuple.\",\n             validate,\n@@ -1378,7 +1378,7 @@ class ValidationTestInline(TabularInline):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestInline.fields' refers to field 'non_existent_field' that is missing from the form.\",\n             validate,\n@@ -1395,7 +1395,7 @@ class ValidationTestInline(TabularInline):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestInline.fk_name' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestInlineModel'.\",\n             validate,\n@@ -1421,7 +1421,7 @@ class ValidationTestInline(TabularInline):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestInline.extra' should be a integer.\",\n             validate,\n@@ -1447,7 +1447,7 @@ class ValidationTestInline(TabularInline):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestInline.max_num' should be an integer or None \\(default\\).\",\n             validate,\n@@ -1476,7 +1476,7 @@ class ValidationTestInline(TabularInline):\n         class ValidationTestModelAdmin(ModelAdmin):\n             inlines = [ValidationTestInline]\n \n-        self.assertRaisesRegexp(\n+        six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             \"'ValidationTestInline.formset' does not inherit from BaseModelFormSet.\",\n             validate,"
        },
        {
            "sha": "71ac107486c9b85ca3a550a243161c3f5eff5c0e",
            "filename": "tests/regressiontests/queries/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fqueries%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1677,10 +1677,7 @@ def test_evaluated_queryset_as_argument(self):\n         list(n_list)\n         # Use the note queryset in a query, and evalute\n         # that query in a way that involves cloning.\n-        try:\n-            self.assertEqual(ExtraInfo.objects.filter(note__in=n_list)[0].info, 'good')\n-        except:\n-            self.fail('Query should be clonable')\n+        self.assertEqual(ExtraInfo.objects.filter(note__in=n_list)[0].info, 'good')\n \n \n class EmptyQuerySetTests(TestCase):"
        },
        {
            "sha": "aaf8bcffcf5853c897cd361f03c675ca8961caa2",
            "filename": "tests/regressiontests/settings_tests/tests.py",
            "status": "modified",
            "additions": 12,
            "deletions": 10,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fsettings_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fsettings_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fsettings_tests%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -71,16 +71,18 @@ class SettingGetter(object):\n     def __init__(self):\n         self.test = getattr(settings, 'TEST', 'undefined')\n \n-testvalue = None\n \n-def signal_callback(sender, setting, value, **kwargs):\n-    if setting == 'TEST':\n-        global testvalue\n-        testvalue = value\n+class SettingsTests(TestCase):\n+    def setUp(self):\n+        self.testvalue = None\n+        signals.setting_changed.connect(self.signal_callback)\n \n-signals.setting_changed.connect(signal_callback)\n+    def tearDown(self):\n+        signals.setting_changed.disconnect(self.signal_callback)\n \n-class SettingsTests(TestCase):\n+    def signal_callback(self, sender, setting, value, **kwargs):\n+        if setting == 'TEST':\n+            self.testvalue = value\n \n     def test_override(self):\n         settings.TEST = 'test'\n@@ -128,12 +130,12 @@ def test_class_decorator(self):\n     def test_signal_callback_context_manager(self):\n         self.assertRaises(AttributeError, getattr, settings, 'TEST')\n         with self.settings(TEST='override'):\n-            self.assertEqual(testvalue, 'override')\n-        self.assertEqual(testvalue, None)\n+            self.assertEqual(self.testvalue, 'override')\n+        self.assertEqual(self.testvalue, None)\n \n     @override_settings(TEST='override')\n     def test_signal_callback_decorator(self):\n-        self.assertEqual(testvalue, 'override')\n+        self.assertEqual(self.testvalue, 'override')\n \n     #\n     # Regression tests for #10130: deleting settings."
        },
        {
            "sha": "8fb3ad5a48e8cedd5fdbdd4d0760b488760c4ecc",
            "filename": "tests/regressiontests/signals_regress/tests.py",
            "status": "modified",
            "additions": 34,
            "deletions": 36,
            "changes": 70,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fsignals_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fsignals_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fsignals_regress%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -6,61 +6,59 @@\n from .models import Author, Book\n \n \n-signal_output = []\n-\n-def pre_save_test(signal, sender, instance, **kwargs):\n-    signal_output.append('pre_save signal, %s' % instance)\n-    if kwargs.get('raw'):\n-        signal_output.append('Is raw')\n-\n-def post_save_test(signal, sender, instance, **kwargs):\n-    signal_output.append('post_save signal, %s' % instance)\n-    if 'created' in kwargs:\n-        if kwargs['created']:\n-            signal_output.append('Is created')\n-        else:\n-            signal_output.append('Is updated')\n-    if kwargs.get('raw'):\n-        signal_output.append('Is raw')\n-\n-def pre_delete_test(signal, sender, instance, **kwargs):\n-    signal_output.append('pre_save signal, %s' % instance)\n-    signal_output.append('instance.id is not None: %s' % (instance.id != None))\n-\n-def post_delete_test(signal, sender, instance, **kwargs):\n-    signal_output.append('post_delete signal, %s' % instance)\n-    signal_output.append('instance.id is not None: %s' % (instance.id != None))\n-\n class SignalsRegressTests(TestCase):\n     \"\"\"\n     Testing signals before/after saving and deleting.\n     \"\"\"\n \n     def get_signal_output(self, fn, *args, **kwargs):\n         # Flush any existing signal output\n-        global signal_output\n-        signal_output = []\n+        self.signal_output = []\n         fn(*args, **kwargs)\n-        return signal_output\n+        return self.signal_output\n+\n+    def pre_save_test(self, signal, sender, instance, **kwargs):\n+        self.signal_output.append('pre_save signal, %s' % instance)\n+        if kwargs.get('raw'):\n+            self.signal_output.append('Is raw')\n+\n+    def post_save_test(self, signal, sender, instance, **kwargs):\n+        self.signal_output.append('post_save signal, %s' % instance)\n+        if 'created' in kwargs:\n+            if kwargs['created']:\n+                self.signal_output.append('Is created')\n+            else:\n+                self.signal_output.append('Is updated')\n+        if kwargs.get('raw'):\n+            self.signal_output.append('Is raw')\n+\n+    def pre_delete_test(self, signal, sender, instance, **kwargs):\n+        self.signal_output.append('pre_save signal, %s' % instance)\n+        self.signal_output.append('instance.id is not None: %s' % (instance.id != None))\n+\n+    def post_delete_test(self, signal, sender, instance, **kwargs):\n+        self.signal_output.append('post_delete signal, %s' % instance)\n+        self.signal_output.append('instance.id is not None: %s' % (instance.id != None))\n \n     def setUp(self):\n+        self.signal_output = []\n         # Save up the number of connected signals so that we can check at the end\n         # that all the signals we register get properly unregistered (#9989)\n         self.pre_signals = (len(models.signals.pre_save.receivers),\n                        len(models.signals.post_save.receivers),\n                        len(models.signals.pre_delete.receivers),\n                        len(models.signals.post_delete.receivers))\n \n-        models.signals.pre_save.connect(pre_save_test)\n-        models.signals.post_save.connect(post_save_test)\n-        models.signals.pre_delete.connect(pre_delete_test)\n-        models.signals.post_delete.connect(post_delete_test)\n+        models.signals.pre_save.connect(self.pre_save_test)\n+        models.signals.post_save.connect(self.post_save_test)\n+        models.signals.pre_delete.connect(self.pre_delete_test)\n+        models.signals.post_delete.connect(self.post_delete_test)\n \n     def tearDown(self):\n-        models.signals.post_delete.disconnect(post_delete_test)\n-        models.signals.pre_delete.disconnect(pre_delete_test)\n-        models.signals.post_save.disconnect(post_save_test)\n-        models.signals.pre_save.disconnect(pre_save_test)\n+        models.signals.post_delete.disconnect(self.post_delete_test)\n+        models.signals.pre_delete.disconnect(self.pre_delete_test)\n+        models.signals.post_save.disconnect(self.post_save_test)\n+        models.signals.pre_save.disconnect(self.pre_save_test)\n \n         # Check that all our signals got disconnected properly.\n         post_signals = (len(models.signals.pre_save.receivers),"
        },
        {
            "sha": "7ecbccc448a7e9fa94cbb09da5d7c6e1b9b7a9a0",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -617,7 +617,7 @@ def setUp(self):\n         settings.DEBUG = False\n \n     def test_disabled_serving(self):\n-        self.assertRaisesRegexp(ImproperlyConfigured, 'The staticfiles view '\n+        six.assertRaisesRegex(self, ImproperlyConfigured, 'The staticfiles view '\n             'can only be used in debug mode ', self._response, 'test.txt')\n \n "
        },
        {
            "sha": "4aea08237de23e0c37b07ded3d2bec25d26cc6d3",
            "filename": "tests/regressiontests/templates/custom.py",
            "status": "modified",
            "additions": 26,
            "deletions": 25,
            "changes": 51,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ftemplates%2Fcustom.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ftemplates%2Fcustom.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Fcustom.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1,6 +1,7 @@\n from __future__ import absolute_import, unicode_literals\n \n from django import template\n+from django.utils import six\n from django.utils.unittest import TestCase\n \n from .templatetags import custom\n@@ -51,7 +52,7 @@ def test_simple_tags(self):\n         t = template.Template('{% load custom %}{% simple_one_default one=99 two=\"hello\" %}')\n         self.assertEqual(t.render(c), 'simple_one_default - Expected result: 99, hello')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'simple_one_default' received unexpected keyword argument 'three'\",\n             template.Template, '{% load custom %}{% simple_one_default 99 two=\"hello\" three=\"foo\" %}')\n \n@@ -70,22 +71,22 @@ def test_simple_tags(self):\n         t = template.Template('{% load custom %}{% simple_only_unlimited_args 37 42 56 89 %}')\n         self.assertEqual(t.render(c), 'simple_only_unlimited_args - Expected result: 37, 42, 56, 89')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'simple_two_params' received too many positional arguments\",\n             template.Template, '{% load custom %}{% simple_two_params 37 42 56 %}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'simple_one_default' received too many positional arguments\",\n             template.Template, '{% load custom %}{% simple_one_default 37 42 56 %}')\n \n         t = template.Template('{% load custom %}{% simple_unlimited_args_kwargs 37 40|add:2 56 eggs=\"scrambled\" four=1|add:3 %}')\n         self.assertEqual(t.render(c), 'simple_unlimited_args_kwargs - Expected result: 37, 42, 56 / eggs=scrambled, four=4')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'simple_unlimited_args_kwargs' received some positional argument\\(s\\) after some keyword argument\\(s\\)\",\n             template.Template, '{% load custom %}{% simple_unlimited_args_kwargs 37 40|add:2 eggs=\"scrambled\" 56 four=1|add:3 %}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'simple_unlimited_args_kwargs' received multiple values for keyword argument 'eggs'\",\n             template.Template, '{% load custom %}{% simple_unlimited_args_kwargs 37 eggs=\"scrambled\" eggs=\"scrambled\" %}')\n \n@@ -101,7 +102,7 @@ def test_simple_tag_registration(self):\n \n     def test_simple_tag_missing_context(self):\n         # The 'context' parameter must be present when takes_context is True\n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'simple_tag_without_context_parameter' is decorated with takes_context=True so it must have a first argument of 'context'\",\n             template.Template, '{% load custom %}{% simple_tag_without_context_parameter 123 %}')\n \n@@ -135,7 +136,7 @@ def test_inclusion_tags(self):\n         t = template.Template('{% load custom %}{% inclusion_one_default one=99 two=\"hello\" %}')\n         self.assertEqual(t.render(c), 'inclusion_one_default - Expected result: 99, hello\\n')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'inclusion_one_default' received unexpected keyword argument 'three'\",\n             template.Template, '{% load custom %}{% inclusion_one_default 99 two=\"hello\" three=\"foo\" %}')\n \n@@ -154,36 +155,36 @@ def test_inclusion_tags(self):\n         t = template.Template('{% load custom %}{% inclusion_only_unlimited_args 37 42 56 89 %}')\n         self.assertEqual(t.render(c), 'inclusion_only_unlimited_args - Expected result: 37, 42, 56, 89\\n')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'inclusion_two_params' received too many positional arguments\",\n             template.Template, '{% load custom %}{% inclusion_two_params 37 42 56 %}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'inclusion_one_default' received too many positional arguments\",\n             template.Template, '{% load custom %}{% inclusion_one_default 37 42 56 %}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'inclusion_one_default' did not receive value\\(s\\) for the argument\\(s\\): 'one'\",\n             template.Template, '{% load custom %}{% inclusion_one_default %}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'inclusion_unlimited_args' did not receive value\\(s\\) for the argument\\(s\\): 'one'\",\n             template.Template, '{% load custom %}{% inclusion_unlimited_args %}')\n \n         t = template.Template('{% load custom %}{% inclusion_unlimited_args_kwargs 37 40|add:2 56 eggs=\"scrambled\" four=1|add:3 %}')\n         self.assertEqual(t.render(c), 'inclusion_unlimited_args_kwargs - Expected result: 37, 42, 56 / eggs=scrambled, four=4\\n')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'inclusion_unlimited_args_kwargs' received some positional argument\\(s\\) after some keyword argument\\(s\\)\",\n             template.Template, '{% load custom %}{% inclusion_unlimited_args_kwargs 37 40|add:2 eggs=\"scrambled\" 56 four=1|add:3 %}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'inclusion_unlimited_args_kwargs' received multiple values for keyword argument 'eggs'\",\n             template.Template, '{% load custom %}{% inclusion_unlimited_args_kwargs 37 eggs=\"scrambled\" eggs=\"scrambled\" %}')\n \n     def test_include_tag_missing_context(self):\n         # The 'context' parameter must be present when takes_context is True\n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'inclusion_tag_without_context_parameter' is decorated with takes_context=True so it must have a first argument of 'context'\",\n             template.Template, '{% load custom %}{% inclusion_tag_without_context_parameter 123 %}')\n \n@@ -296,7 +297,7 @@ def test_assignment_tags(self):\n         t = template.Template('{% load custom %}{% assignment_one_default one=99 two=\"hello\" as var %}The result is: {{ var }}')\n         self.assertEqual(t.render(c), 'The result is: assignment_one_default - Expected result: 99, hello')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_one_default' received unexpected keyword argument 'three'\",\n             template.Template, '{% load custom %}{% assignment_one_default 99 two=\"hello\" three=\"foo\" as var %}')\n \n@@ -315,42 +316,42 @@ def test_assignment_tags(self):\n         t = template.Template('{% load custom %}{% assignment_only_unlimited_args 37 42 56 89 as var %}The result is: {{ var }}')\n         self.assertEqual(t.render(c), 'The result is: assignment_only_unlimited_args - Expected result: 37, 42, 56, 89')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_one_param' tag takes at least 2 arguments and the second last argument must be 'as'\",\n             template.Template, '{% load custom %}{% assignment_one_param 37 %}The result is: {{ var }}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_one_param' tag takes at least 2 arguments and the second last argument must be 'as'\",\n             template.Template, '{% load custom %}{% assignment_one_param 37 as %}The result is: {{ var }}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_one_param' tag takes at least 2 arguments and the second last argument must be 'as'\",\n             template.Template, '{% load custom %}{% assignment_one_param 37 ass var %}The result is: {{ var }}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_two_params' received too many positional arguments\",\n             template.Template, '{% load custom %}{% assignment_two_params 37 42 56 as var %}The result is: {{ var }}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_one_default' received too many positional arguments\",\n             template.Template, '{% load custom %}{% assignment_one_default 37 42 56 as var %}The result is: {{ var }}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_one_default' did not receive value\\(s\\) for the argument\\(s\\): 'one'\",\n             template.Template, '{% load custom %}{% assignment_one_default as var %}The result is: {{ var }}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_unlimited_args' did not receive value\\(s\\) for the argument\\(s\\): 'one'\",\n             template.Template, '{% load custom %}{% assignment_unlimited_args as var %}The result is: {{ var }}')\n \n         t = template.Template('{% load custom %}{% assignment_unlimited_args_kwargs 37 40|add:2 56 eggs=\"scrambled\" four=1|add:3 as var %}The result is: {{ var }}')\n         self.assertEqual(t.render(c), 'The result is: assignment_unlimited_args_kwargs - Expected result: 37, 42, 56 / eggs=scrambled, four=4')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_unlimited_args_kwargs' received some positional argument\\(s\\) after some keyword argument\\(s\\)\",\n             template.Template, '{% load custom %}{% assignment_unlimited_args_kwargs 37 40|add:2 eggs=\"scrambled\" 56 four=1|add:3 as var %}The result is: {{ var }}')\n \n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_unlimited_args_kwargs' received multiple values for keyword argument 'eggs'\",\n             template.Template, '{% load custom %}{% assignment_unlimited_args_kwargs 37 eggs=\"scrambled\" eggs=\"scrambled\" as var %}The result is: {{ var }}')\n \n@@ -371,6 +372,6 @@ def test_assignment_tag_registration(self):\n \n     def test_assignment_tag_missing_context(self):\n         # The 'context' parameter must be present when takes_context is True\n-        self.assertRaisesRegexp(template.TemplateSyntaxError,\n+        six.assertRaisesRegex(self, template.TemplateSyntaxError,\n             \"'assignment_tag_without_context_parameter' is decorated with takes_context=True so it must have a first argument of 'context'\",\n             template.Template, '{% load custom %}{% assignment_tag_without_context_parameter 123 as var %}')"
        },
        {
            "sha": "7fbb0841f9a27c775d591efeaf135a3fe727c2c0",
            "filename": "tests/regressiontests/templates/loaders.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ftemplates%2Floaders.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ftemplates%2Floaders.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Floaders.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -17,7 +17,7 @@\n from django.template import TemplateDoesNotExist, Context\n from django.template.loaders.eggs import Loader as EggLoader\n from django.template import loader\n-from django.utils import unittest\n+from django.utils import unittest, six\n from django.utils.six import StringIO\n \n \n@@ -30,7 +30,7 @@ def __init__(self, module):\n     def _has(self, path):\n         return path in self.module._resources\n \n-    def _isdir(self,path):\n+    def _isdir(self, path):\n         return False\n \n     def get_resource_stream(self, manager, resource_name):\n@@ -61,8 +61,8 @@ def setUp(self):\n \n         self.empty_egg = create_egg(\"egg_empty\", {})\n         self.egg_1 = create_egg(\"egg_1\", {\n-            os.path.normcase('templates/y.html') : StringIO(\"y\"),\n-            os.path.normcase('templates/x.txt') : StringIO(\"x\"),\n+            os.path.normcase('templates/y.html'): StringIO(\"y\"),\n+            os.path.normcase('templates/x.txt'): StringIO(\"x\"),\n         })\n         self._old_installed_apps = settings.INSTALLED_APPS\n         settings.INSTALLED_APPS = []\n@@ -144,12 +144,12 @@ def test_existing_context_kept_clean(self):\n         self.assertEqual(context['obj'], 'before')\n \n     def test_empty_list(self):\n-        self.assertRaisesRegexp(TemplateDoesNotExist,\n+        six.assertRaisesRegex(self, TemplateDoesNotExist,\n                                 'No template names provided$',\n                                 loader.render_to_string, [])\n \n \n     def test_select_templates_from_empty_list(self):\n-        self.assertRaisesRegexp(TemplateDoesNotExist,\n+        six.assertRaisesRegex(self, TemplateDoesNotExist,\n                                 'No template names provided$',\n                                 loader.select_template, [])"
        },
        {
            "sha": "468af77f4403f887e9068ad491cb10f7db8bc5f7",
            "filename": "tests/regressiontests/test_utils/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_utils%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -137,15 +137,15 @@ def test_not_used(self):\n             pass\n \n     def test_error_message(self):\n-        with self.assertRaisesRegexp(AssertionError, r'^template_used/base\\.html'):\n+        with six.assertRaisesRegex(self, AssertionError, r'^template_used/base\\.html'):\n             with self.assertTemplateUsed('template_used/base.html'):\n                 pass\n \n-        with self.assertRaisesRegexp(AssertionError, r'^template_used/base\\.html'):\n+        with six.assertRaisesRegex(self, AssertionError, r'^template_used/base\\.html'):\n             with self.assertTemplateUsed(template_name='template_used/base.html'):\n                 pass\n \n-        with self.assertRaisesRegexp(AssertionError, r'^template_used/base\\.html.*template_used/alternative\\.html$'):\n+        with six.assertRaisesRegex(self, AssertionError, r'^template_used/base\\.html.*template_used/alternative\\.html$'):\n             with self.assertTemplateUsed('template_used/base.html'):\n                 render_to_string('template_used/alternative.html')\n "
        },
        {
            "sha": "472e2aafd9caa885a43134135931bdd4778e5d1b",
            "filename": "tests/regressiontests/transactions_regress/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 15,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ftransactions_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Ftransactions_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftransactions_regress%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -1,7 +1,6 @@\n from __future__ import absolute_import\n \n-from django.core.exceptions import ImproperlyConfigured\n-from django.db import connection, connections, transaction, DEFAULT_DB_ALIAS\n+from django.db import connection, connections, transaction, DEFAULT_DB_ALIAS, DatabaseError\n from django.db.transaction import commit_on_success, commit_manually, TransactionManagementError\n from django.test import TransactionTestCase, skipUnlessDBFeature\n from django.test.utils import override_settings\n@@ -151,21 +150,14 @@ def create_system_user():\n         # Create a user\n         create_system_user()\n \n-        try:\n-            # The second call to create_system_user should fail for violating a unique constraint\n-            # (it's trying to re-create the same user)\n+        with self.assertRaises(DatabaseError):\n+            # The second call to create_system_user should fail for violating\n+            # a unique constraint (it's trying to re-create the same user)\n             create_system_user()\n-        except:\n-            pass\n-        else:\n-            raise ImproperlyConfigured('Unique constraint not enforced on django.contrib.auth.models.User')\n \n-        try:\n-            # Try to read the database. If the last transaction was indeed closed,\n-            # this should cause no problems\n-            _ = User.objects.all()[0]\n-        except:\n-            self.fail(\"A transaction consisting of a failed operation was not closed.\")\n+        # Try to read the database. If the last transaction was indeed closed,\n+        # this should cause no problems\n+        User.objects.all()[0]\n \n     @override_settings(DEBUG=True)\n     def test_failing_query_transaction_closed_debug(self):"
        },
        {
            "sha": "0ea5ffe3802abcd9f43bdf4b1df0f234e1656fb0",
            "filename": "tests/regressiontests/urlpatterns_reverse/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -4,17 +4,17 @@\n from __future__ import absolute_import, unicode_literals\n \n from django.conf import settings\n+from django.contrib.auth.models import User\n from django.core.exceptions import ImproperlyConfigured, ViewDoesNotExist\n from django.core.urlresolvers import (reverse, resolve, get_callable,\n     get_resolver, NoReverseMatch, Resolver404, ResolverMatch, RegexURLResolver,\n     RegexURLPattern)\n from django.http import HttpResponseRedirect, HttpResponsePermanentRedirect\n from django.shortcuts import redirect\n from django.test import TestCase\n-from django.utils import unittest\n-from django.contrib.auth.models import User\n+from django.utils import unittest, six\n \n-from . import urlconf_outer, urlconf_inner, middleware, views\n+from . import urlconf_outer, middleware, views\n \n \n resolve_test_data = (\n@@ -535,7 +535,7 @@ class ViewLoadingTests(TestCase):\n     def test_view_loading(self):\n         # A missing view (identified by an AttributeError) should raise\n         # ViewDoesNotExist, ...\n-        self.assertRaisesRegexp(ViewDoesNotExist, \".*View does not exist in.*\",\n+        six.assertRaisesRegex(self, ViewDoesNotExist, \".*View does not exist in.*\",\n             get_callable,\n             'regressiontests.urlpatterns_reverse.views.i_should_not_exist')\n         # ... but if the AttributeError is caused by something else don't"
        },
        {
            "sha": "5cf2934ab067331a23ff61d0634e23680be5c3ac",
            "filename": "tests/regressiontests/utils/crypto.py",
            "status": "modified",
            "additions": 0,
            "deletions": 18,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Futils%2Fcrypto.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Futils%2Fcrypto.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fcrypto.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -144,21 +144,3 @@ def test_regression_vectors(self):\n             result = pbkdf2(**vector['args'])\n             self.assertEqual(binascii.hexlify(result).decode('ascii'),\n                              vector['result'])\n-\n-    def test_performance_scalability(self):\n-        \"\"\"\n-        Theory: If you run with 100 iterations, it should take 100\n-        times as long as running with 1 iteration.\n-        \"\"\"\n-        # These values are chosen as a reasonable tradeoff between time\n-        # to run the test suite and false positives caused by imprecise\n-        # measurement.\n-        n1, n2 = 200000, 800000\n-        elapsed = lambda f: timeit.Timer(f,\n-                    'from django.utils.crypto import pbkdf2').timeit(number=1)\n-        t1 = elapsed('pbkdf2(\"password\", \"salt\", iterations=%d)' % n1)\n-        t2 = elapsed('pbkdf2(\"password\", \"salt\", iterations=%d)' % n2)\n-        measured_scale_exponent = math.log(t2 / t1, n2 / n1)\n-        # This should be less than 1. We allow up to 1.2 so that tests don't\n-        # fail nondeterministically too often.\n-        self.assertLess(measured_scale_exponent, 1.2)"
        },
        {
            "sha": "6c1483d2cd356df773e69d03886f76ff68554e7c",
            "filename": "tests/regressiontests/wsgi/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fwsgi%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/828d691f62814edf3e93d981c0f991a48781fb79/tests%2Fregressiontests%2Fwsgi%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fwsgi%2Ftests.py?ref=828d691f62814edf3e93d981c0f991a48781fb79",
            "patch": "@@ -6,8 +6,7 @@\n from django.test import TestCase\n from django.test.client import RequestFactory\n from django.test.utils import override_settings\n-from django.utils import six\n-from django.utils import unittest\n+from django.utils import six, unittest\n \n \n class WSGITest(TestCase):\n@@ -84,7 +83,7 @@ def mock_get_wsgi_app():\n \n     @override_settings(WSGI_APPLICATION=\"regressiontests.wsgi.noexist.app\")\n     def test_bad_module(self):\n-        with self.assertRaisesRegexp(\n+        with six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             r\"^WSGI application 'regressiontests.wsgi.noexist.app' could not be loaded; could not import module 'regressiontests.wsgi.noexist':\"):\n \n@@ -93,7 +92,7 @@ def test_bad_module(self):\n \n     @override_settings(WSGI_APPLICATION=\"regressiontests.wsgi.wsgi.noexist\")\n     def test_bad_name(self):\n-        with self.assertRaisesRegexp(\n+        with six.assertRaisesRegex(self,\n             ImproperlyConfigured,\n             r\"^WSGI application 'regressiontests.wsgi.wsgi.noexist' could not be loaded; can't find 'noexist' in module 'regressiontests.wsgi.wsgi':\"):\n "
        }
    ],
    "stats": {
        "total": 829,
        "additions": 414,
        "deletions": 415
    }
}