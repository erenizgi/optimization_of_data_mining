{
    "author": "carljm",
    "message": "Fixed #18518 -- Add warning re mod_wsgi and wsgi.py environ handling.",
    "sha": "751a7d0c32746dc6774f1b561db523b25365148a",
    "files": [
        {
            "sha": "f768265b23bb3b838fd2e21a9414dbd4fb187325",
            "filename": "django/conf/project_template/project_name/wsgi.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/751a7d0c32746dc6774f1b561db523b25365148a/django%2Fconf%2Fproject_template%2Fproject_name%2Fwsgi.py",
            "raw_url": "https://github.com/django/django/raw/751a7d0c32746dc6774f1b561db523b25365148a/django%2Fconf%2Fproject_template%2Fproject_name%2Fwsgi.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Fproject_template%2Fproject_name%2Fwsgi.py?ref=751a7d0c32746dc6774f1b561db523b25365148a",
            "patch": "@@ -15,6 +15,10 @@\n \"\"\"\n import os\n \n+# We defer to a DJANGO_SETTINGS_MODULE already in the environment. This breaks\n+# if running multiple sites in the same mod_wsgi process. To fix this, use\n+# mod_wsgi daemon mode with each site in its own daemon process, or use\n+# os.environ[\"DJANGO_SETTINGS_MODULE\"] = \"{{ project_name }}.settings\"\n os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"{{ project_name }}.settings\")\n \n # This application object is used by any WSGI server configured to use this"
        },
        {
            "sha": "01399aa5a6a3e301b3bf8d662f6778afad89cf4b",
            "filename": "docs/howto/deployment/wsgi/modwsgi.txt",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/751a7d0c32746dc6774f1b561db523b25365148a/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fmodwsgi.txt",
            "raw_url": "https://github.com/django/django/raw/751a7d0c32746dc6774f1b561db523b25365148a/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fmodwsgi.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fmodwsgi.txt?ref=751a7d0c32746dc6774f1b561db523b25365148a",
            "patch": "@@ -56,6 +56,15 @@ for you; otherwise, you'll need to create it. See the :doc:`WSGI overview\n documentation</howto/deployment/wsgi/index>` for the default contents you\n should put in this file, and what else you can add to it.\n \n+.. warning::\n+\n+   If multiple Django sites are run in a single mod_wsgi process, all of them\n+   will use the settings of whichever one happens to run first. This can be\n+   solved with a minor edit to ``wsgi.py`` (see comment in the file for\n+   details), or by :ref:`using mod_wsgi daemon mode<daemon-mode>` and ensuring\n+   that each site runs in its own daemon process.\n+\n+\n Using a virtualenv\n ==================\n \n@@ -71,6 +80,8 @@ Make sure you give the correct path to your virtualenv, and replace\n \n .. _virtualenv: http://www.virtualenv.org\n \n+.. _daemon-mode:\n+\n Using mod_wsgi daemon mode\n ==========================\n "
        }
    ],
    "stats": {
        "total": 15,
        "additions": 15,
        "deletions": 0
    }
}