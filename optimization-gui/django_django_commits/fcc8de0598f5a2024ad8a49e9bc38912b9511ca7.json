{
    "author": "aaugustin",
    "message": "[py3] Ported django.core.servers.",
    "sha": "fcc8de0598f5a2024ad8a49e9bc38912b9511ca7",
    "files": [
        {
            "sha": "ce1558a92443aab03959984c4a0a04341edbe5d8",
            "filename": "django/core/servers/basehttp.py",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/fcc8de0598f5a2024ad8a49e9bc38912b9511ca7/django%2Fcore%2Fservers%2Fbasehttp.py",
            "raw_url": "https://github.com/django/django/raw/fcc8de0598f5a2024ad8a49e9bc38912b9511ca7/django%2Fcore%2Fservers%2Fbasehttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fservers%2Fbasehttp.py?ref=fcc8de0598f5a2024ad8a49e9bc38912b9511ca7",
            "patch": "@@ -7,6 +7,8 @@\n been reviewed for security issues. DON'T USE IT FOR PRODUCTION USE!\n \"\"\"\n \n+from __future__ import unicode_literals\n+\n import os\n import socket\n import sys\n@@ -71,12 +73,12 @@ class WSGIServerException(Exception):\n \n \n class ServerHandler(simple_server.ServerHandler, object):\n-    error_status = \"500 INTERNAL SERVER ERROR\"\n+    error_status = str(\"500 INTERNAL SERVER ERROR\")\n \n     def write(self, data):\n-        \"\"\"'write()' callable as specified by PEP 333\"\"\"\n+        \"\"\"'write()' callable as specified by PEP 3333\"\"\"\n \n-        assert isinstance(data, str), \"write() argument must be string\"\n+        assert isinstance(data, bytes), \"write() argument must be bytestring\"\n \n         if not self.status:\n             raise AssertionError(\"write() before start_response()\")"
        },
        {
            "sha": "c8dc77e42e24923d389af41b95276b694bb2fa06",
            "filename": "tests/regressiontests/builtin_server/tests.py",
            "status": "modified",
            "additions": 14,
            "deletions": 10,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/fcc8de0598f5a2024ad8a49e9bc38912b9511ca7/tests%2Fregressiontests%2Fbuiltin_server%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/fcc8de0598f5a2024ad8a49e9bc38912b9511ca7/tests%2Fregressiontests%2Fbuiltin_server%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbuiltin_server%2Ftests.py?ref=fcc8de0598f5a2024ad8a49e9bc38912b9511ca7",
            "patch": "@@ -1,5 +1,8 @@\n+from __future__ import unicode_literals\n+\n+from io import BytesIO\n+\n from django.core.servers.basehttp import ServerHandler\n-from django.utils.six import StringIO\n from django.utils.unittest import TestCase\n \n #\n@@ -23,12 +26,12 @@ def sendfile(self):\n         return True\n \n def wsgi_app(environ, start_response):\n-    start_response('200 OK', [('Content-Type', 'text/plain')])\n-    return ['Hello World!']\n+    start_response(str('200 OK'), [(str('Content-Type'), str('text/plain'))])\n+    return [b'Hello World!']\n \n def wsgi_app_file_wrapper(environ, start_response):\n-    start_response('200 OK', [('Content-Type', 'text/plain')])\n-    return environ['wsgi.file_wrapper'](StringIO('foo'))\n+    start_response(str('200 OK'), [(str('Content-Type'), str('text/plain'))])\n+    return environ['wsgi.file_wrapper'](BytesIO(b'foo'))\n \n class WSGIFileWrapperTests(TestCase):\n     \"\"\"\n@@ -37,15 +40,16 @@ class WSGIFileWrapperTests(TestCase):\n \n     def test_file_wrapper_uses_sendfile(self):\n         env = {'SERVER_PROTOCOL': 'HTTP/1.0'}\n-        err = StringIO()\n-        handler = FileWrapperHandler(None, StringIO(), err, env)\n+        handler = FileWrapperHandler(None, BytesIO(), BytesIO(), env)\n         handler.run(wsgi_app_file_wrapper)\n         self.assertTrue(handler._used_sendfile)\n+        self.assertEqual(handler.stdout.getvalue(), b'')\n+        self.assertEqual(handler.stderr.getvalue(), b'')\n \n     def test_file_wrapper_no_sendfile(self):\n         env = {'SERVER_PROTOCOL': 'HTTP/1.0'}\n-        err = StringIO()\n-        handler = FileWrapperHandler(None, StringIO(), err, env)\n+        handler = FileWrapperHandler(None, BytesIO(), BytesIO(), env)\n         handler.run(wsgi_app)\n         self.assertFalse(handler._used_sendfile)\n-        self.assertEqual(handler.stdout.getvalue().splitlines()[-1],'Hello World!')\n+        self.assertEqual(handler.stdout.getvalue().splitlines()[-1], b'Hello World!')\n+        self.assertEqual(handler.stderr.getvalue(), b'')"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 19,
        "deletions": 13
    }
}