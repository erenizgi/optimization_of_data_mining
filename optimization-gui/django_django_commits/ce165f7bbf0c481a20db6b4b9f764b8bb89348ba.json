{
    "author": "jezdez",
    "message": "Fixed #16099 -- Enabled threading for the runserver management command and added a --nothreading option to disable it if needed. This should help Google Chrome users because it opens more than one connection speculatively.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16427 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ce165f7bbf0c481a20db6b4b9f764b8bb89348ba",
    "files": [
        {
            "sha": "2e7ad1cd0555b7ba6420edc9c748e1fa7c248111",
            "filename": "django/core/management/commands/runserver.py",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/ce165f7bbf0c481a20db6b4b9f764b8bb89348ba/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py",
            "raw_url": "https://github.com/django/django/raw/ce165f7bbf0c481a20db6b4b9f764b8bb89348ba/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py?ref=ce165f7bbf0c481a20db6b4b9f764b8bb89348ba",
            "patch": "@@ -17,10 +17,13 @@\n ):)?(?P<port>\\d+)$\"\"\", re.X)\n DEFAULT_PORT = \"8000\"\n \n+\n class BaseRunserverCommand(BaseCommand):\n     option_list = BaseCommand.option_list + (\n         make_option('--ipv6', '-6', action='store_true', dest='use_ipv6', default=False,\n             help='Tells Django to use a IPv6 address.'),\n+        make_option('--nothreading', action='store_false', dest='use_threading', default=True,\n+            help='Use threading for web server.'),\n         make_option('--noreload', action='store_false', dest='use_reloader', default=True,\n             help='Tells Django to NOT use the auto-reloader.'),\n     )\n@@ -81,6 +84,7 @@ def inner_run(self, *args, **options):\n         from django.conf import settings\n         from django.utils import translation\n \n+        threading = options.get('use_threading', False)\n         shutdown_message = options.get('shutdown_message', '')\n         quit_command = (sys.platform == 'win32') and 'CTRL-BREAK' or 'CONTROL-C'\n \n@@ -104,7 +108,8 @@ def inner_run(self, *args, **options):\n \n         try:\n             handler = self.get_handler(*args, **options)\n-            run(self.addr, int(self.port), handler, ipv6=self.use_ipv6)\n+            run(self.addr, int(self.port), handler,\n+                ipv6=self.use_ipv6, threading=threading)\n         except WSGIServerException, e:\n             # Use helpful error messages instead of ugly tracebacks.\n             ERRORS = {"
        },
        {
            "sha": "c4c45111fbefc405ebbd5facc930046e945b9fbc",
            "filename": "django/core/servers/basehttp.py",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/ce165f7bbf0c481a20db6b4b9f764b8bb89348ba/django%2Fcore%2Fservers%2Fbasehttp.py",
            "raw_url": "https://github.com/django/django/raw/ce165f7bbf0c481a20db6b4b9f764b8bb89348ba/django%2Fcore%2Fservers%2Fbasehttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fservers%2Fbasehttp.py?ref=ce165f7bbf0c481a20db6b4b9f764b8bb89348ba",
            "patch": "@@ -12,6 +12,7 @@\n import sys\n import traceback\n import urllib\n+from SocketServer import ThreadingMixIn\n from wsgiref import simple_server\n from wsgiref.util import FileWrapper   # for backwards compatibility\n \n@@ -205,8 +206,12 @@ def _should_handle(self, path):\n         return path.startswith(self.base_url[2]) and not self.base_url[1]\n \n \n-def run(addr, port, wsgi_handler, ipv6=False):\n+def run(addr, port, wsgi_handler, ipv6=False, threading=False):\n     server_address = (addr, port)\n-    httpd = WSGIServer(server_address, WSGIRequestHandler, ipv6=ipv6)\n+    if threading:\n+        httpd_cls = type('WSGIServer', (ThreadingMixIn, WSGIServer), {})\n+    else:\n+        httpd_cls = WSGIServer\n+    httpd = httpd_cls(server_address, WSGIRequestHandler, ipv6=ipv6)\n     httpd.set_app(wsgi_handler)\n     httpd.serve_forever()"
        },
        {
            "sha": "62e45ae50e9d3aa553e189826ea191f35e537f6b",
            "filename": "docs/man/django-admin.1",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/ce165f7bbf0c481a20db6b4b9f764b8bb89348ba/docs%2Fman%2Fdjango-admin.1",
            "raw_url": "https://github.com/django/django/raw/ce165f7bbf0c481a20db6b4b9f764b8bb89348ba/docs%2Fman%2Fdjango-admin.1",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fman%2Fdjango-admin.1?ref=ce165f7bbf0c481a20db6b4b9f764b8bb89348ba",
            "patch": "@@ -75,7 +75,7 @@ Runs this project as a FastCGI application. Requires flup. Use\n .B runfcgi help\n for help on the KEY=val pairs.\n .TP\n-.BI \"runserver [\" \"\\-\\-noreload\" \"] [\" \"\\-\\-nostatic\" \"] [\" \"\\-\\-insecure\" \"] [\" \"\\-\\-ipv6\" \"] [\" \"\\-\\-adminmedia=ADMIN_MEDIA_PATH\" \"] [\" \"port|ipaddr:port\" \"]\"\n+.BI \"runserver [\" \"\\-\\-noreload\" \"] [\" \"\\-\\-nothreading\" \"] [\" \"\\-\\-nostatic\" \"] [\" \"\\-\\-insecure\" \"] [\" \"\\-\\-ipv6\" \"] [\" \"\\-\\-adminmedia=ADMIN_MEDIA_PATH\" \"] [\" \"port|ipaddr:port\" \"]\"\n Starts a lightweight Web server for development.\n .TP\n .BI \"shell [\" \"\\-\\-plain\" \"]\"\n@@ -167,6 +167,9 @@ Disable the development server's auto\\-reloader.\n .I \\-\\-nostatic\n Disable automatic serving of static files from STATIC_URL.\n .TP\n+.I \\-\\-nothreading\n+Disable the development server's threading.\n+.TP\n .I \\-\\-insecure\n Enables serving of static files even if DEBUG is False.\n .TP"
        },
        {
            "sha": "0b116f8c2350125e000415209669bc35a194e1a5",
            "filename": "docs/ref/django-admin.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/ce165f7bbf0c481a20db6b4b9f764b8bb89348ba/docs%2Fref%2Fdjango-admin.txt",
            "raw_url": "https://github.com/django/django/raw/ce165f7bbf0c481a20db6b4b9f764b8bb89348ba/docs%2Fref%2Fdjango-admin.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdjango-admin.txt?ref=ce165f7bbf0c481a20db6b4b9f764b8bb89348ba",
            "patch": "@@ -688,6 +688,13 @@ Example usage::\n \n     django-admin.py runserver --noreload\n \n+.. django-admin-option:: --nothreading\n+\n+.. versionadded:: 1.4\n+\n+Use the ``--nothreading`` option to disable the use of threading in the\n+development server.\n+\n .. django-admin-option:: --ipv6, -6\n \n .. versionadded:: 1.3"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 24,
        "deletions": 4
    }
}