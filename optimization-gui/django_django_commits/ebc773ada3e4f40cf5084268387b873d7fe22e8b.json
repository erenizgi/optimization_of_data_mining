{
    "author": "claudep",
    "message": "Replaced many smart_bytes by force_bytes\n\nIn all those occurrences, we didn't care about preserving the\nlazy status of the strings, but we really wanted to obtain a\nreal bytestring.",
    "sha": "ebc773ada3e4f40cf5084268387b873d7fe22e8b",
    "files": [
        {
            "sha": "889f692ac36694d6435218adaeb1882075ae6698",
            "filename": "django/contrib/admin/util.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fadmin%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fadmin%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Futil.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -12,7 +12,7 @@\n from django.utils.html import format_html\n from django.utils.text import capfirst\n from django.utils import timezone\n-from django.utils.encoding import force_text, smart_text, smart_bytes\n+from django.utils.encoding import force_str, force_text, smart_text\n from django.utils import six\n from django.utils.translation import ungettext\n from django.core.urlresolvers import reverse\n@@ -277,7 +277,7 @@ def label_for_field(name, model, model_admin=None, return_attr=False):\n             label = force_text(model._meta.verbose_name)\n             attr = six.text_type\n         elif name == \"__str__\":\n-            label = smart_bytes(model._meta.verbose_name)\n+            label = force_str(model._meta.verbose_name)\n             attr = bytes\n         else:\n             if callable(name):"
        },
        {
            "sha": "74ef095b4bcba8e511fe07fb7977ca124fcbdbf5",
            "filename": "django/contrib/admin/views/main.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -6,7 +6,7 @@\n from django.db import models\n from django.db.models.fields import FieldDoesNotExist\n from django.utils.datastructures import SortedDict\n-from django.utils.encoding import force_text, smart_bytes\n+from django.utils.encoding import force_str, force_text\n from django.utils.translation import ugettext, ugettext_lazy\n from django.utils.http import urlencode\n \n@@ -94,7 +94,7 @@ def get_filters(self, request):\n                 # 'key' will be used as a keyword argument later, so Python\n                 # requires it to be a string.\n                 del lookup_params[key]\n-                lookup_params[smart_bytes(key)] = value\n+                lookup_params[force_str(key)] = value\n \n             if not self.model_admin.lookup_allowed(key, value):\n                 raise SuspiciousOperation(\"Filtering by %s not allowed\" % key)"
        },
        {
            "sha": "9be0093dfccc0cfec7a108ee393819192cd1bc0c",
            "filename": "django/contrib/admindocs/utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fadmindocs%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fadmindocs%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Futils.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -6,7 +6,7 @@\n \n from django.utils.safestring import mark_safe\n from django.core.urlresolvers import reverse\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n try:\n     import docutils.core\n     import docutils.nodes\n@@ -66,7 +66,7 @@ def parse_rst(text, default_reference_context, thing_being_parsed=None):\n         \"link_base\" : reverse('django-admindocs-docroot').rstrip('/')\n     }\n     if thing_being_parsed:\n-        thing_being_parsed = smart_bytes(\"<%s>\" % thing_being_parsed)\n+        thing_being_parsed = force_bytes(\"<%s>\" % thing_being_parsed)\n     parts = docutils.core.publish_parts(text, source_path=thing_being_parsed,\n                 destination_path=None, writer_name='html',\n                 settings_overrides=overrides)"
        },
        {
            "sha": "bd0c6778c9274763f0c8ecfd23bb3822d3545c10",
            "filename": "django/contrib/auth/hashers.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fauth%2Fhashers.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fauth%2Fhashers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fhashers.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -8,7 +8,7 @@\n from django.test.signals import setting_changed\n from django.utils import importlib\n from django.utils.datastructures import SortedDict\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n from django.core.exceptions import ImproperlyConfigured\n from django.utils.crypto import (\n     pbkdf2, constant_time_compare, get_random_string)\n@@ -299,7 +299,7 @@ class SHA1PasswordHasher(BasePasswordHasher):\n     def encode(self, password, salt):\n         assert password\n         assert salt and '$' not in salt\n-        hash = hashlib.sha1(smart_bytes(salt + password)).hexdigest()\n+        hash = hashlib.sha1(force_bytes(salt + password)).hexdigest()\n         return \"%s$%s$%s\" % (self.algorithm, salt, hash)\n \n     def verify(self, password, encoded):\n@@ -327,7 +327,7 @@ class MD5PasswordHasher(BasePasswordHasher):\n     def encode(self, password, salt):\n         assert password\n         assert salt and '$' not in salt\n-        hash = hashlib.md5(smart_bytes(salt + password)).hexdigest()\n+        hash = hashlib.md5(force_bytes(salt + password)).hexdigest()\n         return \"%s$%s$%s\" % (self.algorithm, salt, hash)\n \n     def verify(self, password, encoded):\n@@ -361,7 +361,7 @@ def salt(self):\n         return ''\n \n     def encode(self, password, salt):\n-        return hashlib.md5(smart_bytes(password)).hexdigest()\n+        return hashlib.md5(force_bytes(password)).hexdigest()\n \n     def verify(self, password, encoded):\n         encoded_2 = self.encode(password, '')"
        },
        {
            "sha": "36e48f7d209b11b3ca06f68656b61ef3f90d7e7c",
            "filename": "django/contrib/gis/sitemaps/views.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -8,7 +8,6 @@\n from django.contrib.gis.db.models.fields import GeometryField\n from django.db import connections, DEFAULT_DB_ALIAS\n from django.db.models import get_model\n-from django.utils.encoding import smart_bytes\n from django.utils import six\n from django.utils.translation import ugettext as _\n \n@@ -61,7 +60,7 @@ def sitemap(request, sitemaps, section=None):\n             raise Http404(_(\"Page %s empty\") % page)\n         except PageNotAnInteger:\n             raise Http404(_(\"No page '%s'\") % page)\n-    xml = smart_bytes(loader.render_to_string('gis/sitemaps/geo_sitemap.xml', {'urlset': urls}))\n+    xml = loader.render_to_string('gis/sitemaps/geo_sitemap.xml', {'urlset': urls})\n     return HttpResponse(xml, content_type='application/xml')\n \n def kml(request, label, model, field_name=None, compress=False, using=DEFAULT_DB_ALIAS):"
        },
        {
            "sha": "18b7475ca7fc35f6bf98b6573c48d6aadc2c34ea",
            "filename": "django/contrib/markup/templatetags/markup.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -13,7 +13,7 @@\n \n from django import template\n from django.conf import settings\n-from django.utils.encoding import smart_bytes, force_text\n+from django.utils.encoding import force_bytes, force_text\n from django.utils.safestring import mark_safe\n \n register = template.Library()\n@@ -27,7 +27,7 @@ def textile(value):\n             raise template.TemplateSyntaxError(\"Error in 'textile' filter: The Python textile library isn't installed.\")\n         return force_text(value)\n     else:\n-        return mark_safe(force_text(textile.textile(smart_bytes(value), encoding='utf-8', output='utf-8')))\n+        return mark_safe(force_text(textile.textile(force_bytes(value), encoding='utf-8', output='utf-8')))\n \n @register.filter(is_safe=True)\n def markdown(value, arg=''):\n@@ -80,5 +80,5 @@ def restructuredtext(value):\n         return force_text(value)\n     else:\n         docutils_settings = getattr(settings, \"RESTRUCTUREDTEXT_FILTER_SETTINGS\", {})\n-        parts = publish_parts(source=smart_bytes(value), writer_name=\"html4css1\", settings_overrides=docutils_settings)\n+        parts = publish_parts(source=force_bytes(value), writer_name=\"html4css1\", settings_overrides=docutils_settings)\n         return mark_safe(force_text(parts[\"fragment\"]))"
        },
        {
            "sha": "c8393f23c616e1dabd6225e06207a4710a16f824",
            "filename": "django/contrib/sessions/backends/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fsessions%2Fbackends%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fsessions%2Fbackends%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsessions%2Fbackends%2Fbase.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -14,7 +14,7 @@\n from django.utils.crypto import get_random_string\n from django.utils.crypto import salted_hmac\n from django.utils import timezone\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n \n class CreateError(Exception):\n     \"\"\"\n@@ -84,7 +84,7 @@ def encode(self, session_dict):\n         return base64.b64encode(hash.encode() + b\":\" + pickled).decode('ascii')\n \n     def decode(self, session_data):\n-        encoded_data = base64.b64decode(smart_bytes(session_data))\n+        encoded_data = base64.b64decode(force_bytes(session_data))\n         try:\n             # could produce ValueError if there is no ':'\n             hash, pickled = encoded_data.split(b':', 1)"
        },
        {
            "sha": "9691b7849d41f038021dfe8c996f9ffdf08c8921",
            "filename": "django/contrib/staticfiles/storage.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fstorage.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -16,7 +16,7 @@\n from django.core.files.base import ContentFile\n from django.core.files.storage import FileSystemStorage, get_storage_class\n from django.utils.datastructures import SortedDict\n-from django.utils.encoding import force_text, smart_bytes\n+from django.utils.encoding import force_bytes, force_text\n from django.utils.functional import LazyObject\n from django.utils.importlib import import_module\n \n@@ -118,7 +118,7 @@ def hashed_name(self, name, content=None):\n         return urlunsplit(unparsed_name)\n \n     def cache_key(self, name):\n-        return 'staticfiles:%s' % hashlib.md5(smart_bytes(name)).hexdigest()\n+        return 'staticfiles:%s' % hashlib.md5(force_bytes(name)).hexdigest()\n \n     def url(self, name, force=False):\n         \"\"\"\n@@ -254,7 +254,7 @@ def post_process(self, paths, dry_run=False, **options):\n                     if hashed_file_exists:\n                         self.delete(hashed_name)\n                     # then save the processed result\n-                    content_file = ContentFile(smart_bytes(content))\n+                    content_file = ContentFile(force_bytes(content))\n                     saved_name = self._save(hashed_name, content_file)\n                     hashed_name = force_text(saved_name.replace('\\\\', '/'))\n                     processed = True"
        },
        {
            "sha": "348b03f7337a139268f28aff1c3dcfe1af222536",
            "filename": "django/core/cache/backends/db.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Fcache%2Fbackends%2Fdb.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Fcache%2Fbackends%2Fdb.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcache%2Fbackends%2Fdb.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -12,7 +12,7 @@\n from django.core.cache.backends.base import BaseCache\n from django.db import connections, router, transaction, DatabaseError\n from django.utils import timezone\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n \n \n class Options(object):\n@@ -73,7 +73,7 @@ def get(self, key, default=None, version=None):\n             transaction.commit_unless_managed(using=db)\n             return default\n         value = connections[db].ops.process_clob(row[1])\n-        return pickle.loads(base64.b64decode(smart_bytes(value)))\n+        return pickle.loads(base64.b64decode(force_bytes(value)))\n \n     def set(self, key, value, timeout=None, version=None):\n         key = self.make_key(key, version=version)"
        },
        {
            "sha": "96194d458fda9ca33a0418f4d36ee03eb611a663",
            "filename": "django/core/cache/backends/filebased.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Fcache%2Fbackends%2Ffilebased.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Fcache%2Fbackends%2Ffilebased.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcache%2Fbackends%2Ffilebased.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -10,7 +10,7 @@\n     import pickle\n \n from django.core.cache.backends.base import BaseCache\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n \n class FileBasedCache(BaseCache):\n     def __init__(self, dir, params):\n@@ -137,7 +137,7 @@ def _key_to_file(self, key):\n         Thus, a cache key of \"foo\" gets turnned into a file named\n         ``{cache-dir}ac/bd/18db4cc2f85cedef654fccc4a4d8``.\n         \"\"\"\n-        path = hashlib.md5(smart_bytes(key)).hexdigest()\n+        path = hashlib.md5(force_bytes(key)).hexdigest()\n         path = os.path.join(path[:2], path[2:4], path[4:])\n         return os.path.join(self._dir, path)\n "
        },
        {
            "sha": "4f40606c5331ad73b191ed252e0ade95afc79148",
            "filename": "django/core/files/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Ffiles%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Ffiles%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fbase.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -3,7 +3,7 @@\n import os\n from io import BytesIO, UnsupportedOperation\n \n-from django.utils.encoding import smart_bytes, smart_text\n+from django.utils.encoding import smart_text\n from django.core.files.utils import FileProxyMixin\n from django.utils.encoding import python_2_unicode_compatible\n "
        },
        {
            "sha": "ed65f2922c34cf74baaafb69ffb4da2241928867",
            "filename": "django/core/serializers/json.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Fserializers%2Fjson.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Fserializers%2Fjson.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fjson.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -12,7 +12,6 @@\n from django.core.serializers.base import DeserializationError\n from django.core.serializers.python import Serializer as PythonSerializer\n from django.core.serializers.python import Deserializer as PythonDeserializer\n-from django.utils.encoding import smart_bytes\n from django.utils import six\n from django.utils.timezone import is_aware\n "
        },
        {
            "sha": "4c11626badb7f490cb9d8a737ac2468b0d20c205",
            "filename": "django/core/serializers/pyyaml.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fpyyaml.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -12,7 +12,6 @@\n from django.core.serializers.base import DeserializationError\n from django.core.serializers.python import Serializer as PythonSerializer\n from django.core.serializers.python import Deserializer as PythonDeserializer\n-from django.utils.encoding import smart_bytes\n from django.utils import six\n \n "
        },
        {
            "sha": "6bf2e815a73cea735dbf8c8125ebfe824b18728e",
            "filename": "django/db/backends/oracle/base.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fbase.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -51,7 +51,7 @@ def _setup_environment(environ):\n from django.db.backends.oracle.client import DatabaseClient\n from django.db.backends.oracle.creation import DatabaseCreation\n from django.db.backends.oracle.introspection import DatabaseIntrospection\n-from django.utils.encoding import smart_bytes, force_text\n+from django.utils.encoding import force_bytes, force_text\n from django.utils import six\n from django.utils import timezone\n \n@@ -64,7 +64,7 @@ def _setup_environment(environ):\n if int(Database.version.split('.', 1)[0]) >= 5 and not hasattr(Database, 'UNICODE'):\n     convert_unicode = force_text\n else:\n-    convert_unicode = smart_bytes\n+    convert_unicode = force_bytes\n \n \n class DatabaseFeatures(BaseDatabaseFeatures):\n@@ -602,9 +602,9 @@ def __init__(self, param, cursor, strings_only=False):\n         elif param is False:\n             param = \"0\"\n         if hasattr(param, 'bind_parameter'):\n-            self.smart_bytes = param.bind_parameter(cursor)\n+            self.force_bytes = param.bind_parameter(cursor)\n         else:\n-            self.smart_bytes = convert_unicode(param, cursor.charset,\n+            self.force_bytes = convert_unicode(param, cursor.charset,\n                                              strings_only)\n         if hasattr(param, 'input_size'):\n             # If parameter has `input_size` attribute, use that.\n@@ -683,7 +683,7 @@ def _guess_input_sizes(self, params_list):\n         self.setinputsizes(*sizes)\n \n     def _param_generator(self, params):\n-        return [p.smart_bytes for p in params]\n+        return [p.force_bytes for p in params]\n \n     def execute(self, query, params=None):\n         if params is None:"
        },
        {
            "sha": "75d4d07a66507304615f95340a7242f3f045de49",
            "filename": "django/db/backends/util.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fdb%2Fbackends%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fdb%2Fbackends%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Futil.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -6,7 +6,7 @@\n from time import time\n \n from django.conf import settings\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n from django.utils.log import getLogger\n from django.utils.timezone import utc\n \n@@ -138,7 +138,7 @@ def truncate_name(name, length=None, hash_len=4):\n     if length is None or len(name) <= length:\n         return name\n \n-    hsh = hashlib.md5(smart_bytes(name)).hexdigest()[:hash_len]\n+    hsh = hashlib.md5(force_bytes(name)).hexdigest()[:hash_len]\n     return '%s%s' % (name[:length-hash_len], hsh)\n \n def format_number(value, max_digits, decimal_places):"
        },
        {
            "sha": "b458fe6c2ed114744af1d98f52e988da4b48f876",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -85,7 +85,7 @@ def _BaseCookie__set(self, key, real_value, coded_value):\n from django.http.multipartparser import MultiPartParser\n from django.http.utils import *\n from django.utils.datastructures import MultiValueDict, ImmutableList\n-from django.utils.encoding import smart_bytes, smart_str, iri_to_uri, force_text\n+from django.utils.encoding import force_bytes, force_text, smart_str, iri_to_uri\n from django.utils.http import cookie_date\n from django.utils import six\n from django.utils import timezone\n@@ -489,13 +489,13 @@ def urlencode(self, safe=None):\n         \"\"\"\n         output = []\n         if safe:\n-            safe = smart_bytes(safe, self.encoding)\n+            safe = force_bytes(safe, self.encoding)\n             encode = lambda k, v: '%s=%s' % ((quote(k, safe), quote(v, safe)))\n         else:\n             encode = lambda k, v: urlencode({k: v})\n         for k, list_ in self.lists():\n-            k = smart_bytes(k, self.encoding)\n-            output.extend([encode(k, smart_bytes(v, self.encoding))\n+            k = force_bytes(k, self.encoding)\n+            output.extend([encode(k, force_bytes(v, self.encoding))\n                            for v in list_])\n         return '&'.join(output)\n \n@@ -680,7 +680,7 @@ def make_bytes(value):\n                 # force conversion to bytes in case chunk is a subclass\n                 return bytes(value)\n             return b''.join(make_bytes(e) for e in self._container)\n-        return b''.join(smart_bytes(e, self._charset) for e in self._container)\n+        return b''.join(force_bytes(e, self._charset) for e in self._container)\n \n     @content.setter\n     def content(self, value):"
        },
        {
            "sha": "36db4807c790c3ef4892de61e7612fd19ea6e852",
            "filename": "django/templatetags/cache.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Ftemplatetags%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Ftemplatetags%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fcache.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -4,7 +4,7 @@\n from django.template import Library, Node, TemplateSyntaxError, Variable, VariableDoesNotExist\n from django.template import resolve_variable\n from django.core.cache import cache\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n from django.utils.http import urlquote\n \n register = Library()\n@@ -26,8 +26,8 @@ def render(self, context):\n         except (ValueError, TypeError):\n             raise TemplateSyntaxError('\"cache\" tag got a non-integer timeout value: %r' % expire_time)\n         # Build a key for this fragment and all vary-on's.\n-        key = smart_bytes(':'.join([urlquote(resolve_variable(var, context)) for var in self.vary_on]))\n-        args = hashlib.md5(key)\n+        key = ':'.join([urlquote(resolve_variable(var, context)) for var in self.vary_on])\n+        args = hashlib.md5(force_bytes(key))\n         cache_key = 'template.cache.%s.%s' % (self.fragment_name, args.hexdigest())\n         value = cache.get(cache_key)\n         if value is None:"
        },
        {
            "sha": "8fd765ec9aa9e0c2bca68292744e400e70b8d9c4",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -21,7 +21,7 @@\n from django.template import TemplateDoesNotExist\n from django.test import signals\n from django.utils.functional import curry\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n from django.utils.http import urlencode\n from django.utils.importlib import import_module\n from django.utils.itercompat import is_iterable\n@@ -110,7 +110,7 @@ def encode_multipart(boundary, data):\n     as an application/octet-stream; otherwise, str(value) will be sent.\n     \"\"\"\n     lines = []\n-    to_bytes = lambda s: smart_bytes(s, settings.DEFAULT_CHARSET)\n+    to_bytes = lambda s: force_bytes(s, settings.DEFAULT_CHARSET)\n \n     # Not by any means perfect, but good enough for our purposes.\n     is_file = lambda thing: hasattr(thing, \"read\") and callable(thing.read)\n@@ -147,7 +147,7 @@ def encode_multipart(boundary, data):\n     return b'\\r\\n'.join(lines)\n \n def encode_file(boundary, key, file):\n-    to_bytes = lambda s: smart_bytes(s, settings.DEFAULT_CHARSET)\n+    to_bytes = lambda s: force_bytes(s, settings.DEFAULT_CHARSET)\n     content_type = mimetypes.guess_type(file.name)[0]\n     if content_type is None:\n         content_type = 'application/octet-stream'\n@@ -222,7 +222,7 @@ def _encode_data(self, data, content_type, ):\n                 charset = match.group(1)\n             else:\n                 charset = settings.DEFAULT_CHARSET\n-            return smart_bytes(data, encoding=charset)\n+            return force_bytes(data, encoding=charset)\n \n     def _get_path(self, parsed):\n         # If there are parameters, add them\n@@ -293,7 +293,7 @@ def delete(self, path, data='', content_type='application/octet-stream',\n     def generic(self, method, path,\n                 data='', content_type='application/octet-stream', **extra):\n         parsed = urlparse(path)\n-        data = smart_bytes(data, settings.DEFAULT_CHARSET)\n+        data = force_bytes(data, settings.DEFAULT_CHARSET)\n         r = {\n             'PATH_INFO':      self._get_path(parsed),\n             'QUERY_STRING':   parsed[4],"
        },
        {
            "sha": "f12c431d3a511ac7119cbe52f9df9809a849ec90",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -41,7 +41,7 @@\n     override_settings)\n from django.test.utils import ContextList\n from django.utils import unittest as ut2\n-from django.utils.encoding import smart_bytes, force_text\n+from django.utils.encoding import force_text\n from django.utils import six\n from django.utils.unittest.util import safe_repr\n from django.views.static import serve"
        },
        {
            "sha": "91c47969888fb00d42bfb24de9b5779c2c82ddac",
            "filename": "django/utils/cache.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Futils%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Futils%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcache.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -24,7 +24,7 @@\n \n from django.conf import settings\n from django.core.cache import get_cache\n-from django.utils.encoding import iri_to_uri, force_text, smart_bytes\n+from django.utils.encoding import iri_to_uri, force_bytes, force_text\n from django.utils.http import http_date\n from django.utils.timezone import get_current_timezone_name\n from django.utils.translation import get_language\n@@ -181,14 +181,14 @@ def _generate_cache_key(request, method, headerlist, key_prefix):\n         value = request.META.get(header, None)\n         if value is not None:\n             ctx.update(value)\n-    path = hashlib.md5(smart_bytes(iri_to_uri(request.get_full_path())))\n+    path = hashlib.md5(force_bytes(iri_to_uri(request.get_full_path())))\n     cache_key = 'views.decorators.cache.cache_page.%s.%s.%s.%s' % (\n         key_prefix, method, path.hexdigest(), ctx.hexdigest())\n     return _i18n_cache_key_suffix(request, cache_key)\n \n def _generate_cache_header_key(key_prefix, request):\n     \"\"\"Returns a cache key for the header cache.\"\"\"\n-    path = hashlib.md5(smart_bytes(iri_to_uri(request.get_full_path())))\n+    path = hashlib.md5(force_bytes(iri_to_uri(request.get_full_path())))\n     cache_key = 'views.decorators.cache.cache_header.%s.%s' % (\n         key_prefix, path.hexdigest())\n     return _i18n_cache_key_suffix(request, cache_key)"
        },
        {
            "sha": "57bc60dc4f823ddd12b93d539891f9c305649a83",
            "filename": "django/utils/crypto.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Futils%2Fcrypto.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Futils%2Fcrypto.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcrypto.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -23,7 +23,7 @@\n     using_sysrandom = False\n \n from django.conf import settings\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n from django.utils import six\n from django.utils.six.moves import xrange\n \n@@ -51,7 +51,7 @@ def salted_hmac(key_salt, value, secret=None):\n     # line is redundant and could be replaced by key = key_salt + secret, since\n     # the hmac module does the same thing for keys longer than the block size.\n     # However, we need to ensure that we *always* do this.\n-    return hmac.new(key, msg=smart_bytes(value), digestmod=hashlib.sha1)\n+    return hmac.new(key, msg=force_bytes(value), digestmod=hashlib.sha1)\n \n \n def get_random_string(length=12,\n@@ -147,8 +147,8 @@ def pbkdf2(password, salt, iterations, dklen=0, digest=None):\n     assert iterations > 0\n     if not digest:\n         digest = hashlib.sha256\n-    password = smart_bytes(password)\n-    salt = smart_bytes(salt)\n+    password = force_bytes(password)\n+    salt = force_bytes(salt)\n     hlen = digest().digest_size\n     if not dklen:\n         dklen = hlen"
        },
        {
            "sha": "998cf4f3f774151f3642904d0c04783ebe40fbfa",
            "filename": "django/utils/encoding.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Futils%2Fencoding.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Futils%2Fencoding.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fencoding.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -174,7 +174,7 @@ def force_bytes(s, encoding='utf-8', strings_only=False, errors='strict'):\n                 # An Exception subclass containing non-ASCII data that doesn't\n                 # know how to print itself properly. We shouldn't raise a\n                 # further exception.\n-                return ' '.join([smart_bytes(arg, encoding, strings_only,\n+                return ' '.join([force_bytes(arg, encoding, strings_only,\n                         errors) for arg in s])\n             return six.text_type(s).encode(encoding, errors)\n     else:\n@@ -225,7 +225,7 @@ def iri_to_uri(iri):\n     # converted.\n     if iri is None:\n         return iri\n-    return quote(smart_bytes(iri), safe=b\"/#%[]=:;$&()+,!?*@'~\")\n+    return quote(force_bytes(iri), safe=b\"/#%[]=:;$&()+,!?*@'~\")\n \n def filepath_to_uri(path):\n     \"\"\"Convert an file system path to a URI portion that is suitable for\n@@ -244,7 +244,7 @@ def filepath_to_uri(path):\n         return path\n     # I know about `os.sep` and `os.altsep` but I want to leave\n     # some flexibility for hardcoding separators.\n-    return quote(smart_bytes(path.replace(\"\\\\\", \"/\")), safe=b\"/~!*()'\")\n+    return quote(force_bytes(path.replace(\"\\\\\", \"/\")), safe=b\"/~!*()'\")\n \n # The encoding of the default system locale but falls back to the\n # given fallback encoding if the encoding is unsupported by python or could"
        },
        {
            "sha": "2b669cc8ecc33064aec5619db8ac4d54156023b1",
            "filename": "django/utils/html.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Futils%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Futils%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhtml.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -11,7 +11,7 @@\n     from urlparse import urlsplit, urlunsplit\n \n from django.utils.safestring import SafeData, mark_safe\n-from django.utils.encoding import smart_bytes, force_text\n+from django.utils.encoding import force_bytes, force_text\n from django.utils.functional import allow_lazy\n from django.utils import six\n from django.utils.text import normalize_newlines\n@@ -164,7 +164,7 @@ def smart_urlquote(url):\n     # contains a % not followed by two hexadecimal digits. See #9655.\n     if '%' not in url or unquoted_percents_re.search(url):\n         # See http://bugs.python.org/issue2637\n-        url = quote(smart_bytes(url), safe=b'!*\\'();:@&=+$,/?#[]~')\n+        url = quote(force_bytes(url), safe=b'!*\\'();:@&=+$,/?#[]~')\n \n     return force_text(url)\n "
        },
        {
            "sha": "ed99d8dfe643aaf45cba239a5bb2212ee16f486e",
            "filename": "django/views/debug.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fviews%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/django%2Fviews%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdebug.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -14,7 +14,7 @@\n from django.template.defaultfilters import force_escape, pprint\n from django.utils.html import escape\n from django.utils.importlib import import_module\n-from django.utils.encoding import smart_text, smart_bytes\n+from django.utils.encoding import force_bytes, smart_text\n from django.utils import six\n \n HIDDEN_SETTINGS = re.compile('API|TOKEN|KEY|SECRET|PASS|PROFANITIES_LIST|SIGNATURE')\n@@ -440,7 +440,7 @@ def technical_404_response(request, exception):\n         'root_urlconf': settings.ROOT_URLCONF,\n         'request_path': request.path_info[1:], # Trim leading slash\n         'urlpatterns': tried,\n-        'reason': smart_bytes(exception, errors='replace'),\n+        'reason': force_bytes(exception, errors='replace'),\n         'request': request,\n         'settings': get_safe_settings(),\n     })"
        },
        {
            "sha": "b01abc1936ba2b6d78595ade3150c41312db7344",
            "filename": "docs/ref/models/instances.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/docs%2Fref%2Fmodels%2Finstances.txt",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/docs%2Fref%2Fmodels%2Finstances.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Finstances.txt?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -459,9 +459,9 @@ using ``__str__()`` like this::\n         last_name = models.CharField(max_length=50)\n \n         def __str__(self):\n-            # Note use of django.utils.encoding.smart_bytes() here because\n+            # Note use of django.utils.encoding.force_bytes() here because\n             # first_name and last_name will be unicode strings.\n-            return smart_bytes('%s %s' % (self.first_name, self.last_name))\n+            return force_bytes('%s %s' % (self.first_name, self.last_name))\n \n ``get_absolute_url``\n --------------------"
        },
        {
            "sha": "4729a2b6f19e9833a1690c0771383ee9d3a5b590",
            "filename": "docs/ref/settings.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/docs%2Fref%2Fsettings.txt",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/docs%2Fref%2Fsettings.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsettings.txt?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -183,7 +183,7 @@ compose a prefix, version and key into a final cache key. The default\n implementation is equivalent to the function::\n \n     def make_key(key, key_prefix, version):\n-        return ':'.join([key_prefix, str(version), smart_bytes(key)])\n+        return ':'.join([key_prefix, str(version), key])\n \n You may use any key function you want, as long as it has the same\n argument signature."
        },
        {
            "sha": "5728d8559a8cae649a92376dc0db272f83d9fb65",
            "filename": "docs/releases/1.5.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/docs%2Freleases%2F1.5.txt",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/docs%2Freleases%2F1.5.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.5.txt?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -227,7 +227,7 @@ If you have written a :ref:`custom password hasher <auth_password_storage>`,\n your ``encode()``, ``verify()`` or ``safe_summary()`` methods should accept\n Unicode parameters (``password``, ``salt`` or ``encoded``). If any of the\n hashing methods need byte strings, you can use the\n-:func:`~django.utils.encoding.smart_bytes` utility to encode the strings.\n+:func:`~django.utils.encoding.force_bytes` utility to encode the strings.\n \n Validation of previous_page_number and next_page_number\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "sha": "f13238e3427dd683c01efaf15d07c8a7fa7787cb",
            "filename": "docs/topics/cache.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/docs%2Ftopics%2Fcache.txt",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/docs%2Ftopics%2Fcache.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fcache.txt?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -864,7 +864,7 @@ key version to provide a final cache key. By default, the three parts\n are joined using colons to produce a final string::\n \n     def make_key(key, key_prefix, version):\n-        return ':'.join([key_prefix, str(version), smart_bytes(key)])\n+        return ':'.join([key_prefix, str(version), key])\n \n If you want to combine the parts in different ways, or apply other\n processing to the final key (e.g., taking a hash digest of the key"
        },
        {
            "sha": "d04740ce951b7fe1b6895c1ba7575aa31d3f924a",
            "filename": "tests/regressiontests/admin_util/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/tests%2Fregressiontests%2Fadmin_util%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/tests%2Fregressiontests%2Fadmin_util%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_util%2Ftests.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -171,7 +171,7 @@ def test_label_for_field(self):\n         )\n         self.assertEqual(\n             label_for_field(\"__str__\", Article),\n-            b\"article\"\n+            str(\"article\")\n         )\n \n         self.assertRaises("
        },
        {
            "sha": "cf7d4855fb3bf1ec457f9bb31c46ac2b1c8d77b5",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -30,7 +30,7 @@\n from django.test import TestCase\n from django.utils import formats, translation, unittest\n from django.utils.cache import get_max_age\n-from django.utils.encoding import iri_to_uri, smart_bytes\n+from django.utils.encoding import iri_to_uri, force_bytes\n from django.utils.html import escape\n from django.utils.http import urlencode\n from django.utils import six\n@@ -84,7 +84,7 @@ def assertContentBefore(self, response, text1, text2, failing_msg=None):\n         content.\n         \"\"\"\n         self.assertEqual(response.status_code, 200)\n-        self.assertTrue(response.content.index(smart_bytes(text1)) < response.content.index(smart_bytes(text2)),\n+        self.assertTrue(response.content.index(force_bytes(text1)) < response.content.index(force_bytes(text2)),\n             failing_msg\n         )\n \n@@ -1378,9 +1378,9 @@ def test_recentactions_without_content_type(self):\n         logentry.content_type = None\n         logentry.save()\n \n-        counted_presence_before = response.content.count(smart_bytes(should_contain))\n+        counted_presence_before = response.content.count(force_bytes(should_contain))\n         response = self.client.get('/test_admin/admin/')\n-        counted_presence_after = response.content.count(smart_bytes(should_contain))\n+        counted_presence_after = response.content.count(force_bytes(should_contain))\n         self.assertEqual(counted_presence_before - 1,\n                           counted_presence_after)\n "
        },
        {
            "sha": "a545ed649e53b65bb785d004a2eb7e017a9a6901",
            "filename": "tests/regressiontests/file_uploads/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -12,7 +12,7 @@\n from django.core.files.uploadedfile import SimpleUploadedFile\n from django.http.multipartparser import MultiPartParser\n from django.test import TestCase, client\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n from django.utils.six import StringIO\n from django.utils import unittest\n \n@@ -54,7 +54,7 @@ def test_large_upload(self):\n                 post_data[key + '_hash'] = hashlib.sha1(post_data[key].read()).hexdigest()\n                 post_data[key].seek(0)\n             except AttributeError:\n-                post_data[key + '_hash'] = hashlib.sha1(smart_bytes(post_data[key])).hexdigest()\n+                post_data[key + '_hash'] = hashlib.sha1(force_bytes(post_data[key])).hexdigest()\n \n         response = self.client.post('/file_uploads/verify/', post_data)\n \n@@ -68,7 +68,7 @@ def test_base64_upload(self):\n             'Content-Type: application/octet-stream',\n             'Content-Transfer-Encoding: base64',\n             '',\n-            base64.b64encode(smart_bytes(test_string)).decode('ascii'),\n+            base64.b64encode(force_bytes(test_string)).decode('ascii'),\n             '--' + client.BOUNDARY + '--',\n             '',\n         ]).encode('utf-8')"
        },
        {
            "sha": "fcf32ceceaeb4028e0be88d9533a8e0b2d6c644e",
            "filename": "tests/regressiontests/file_uploads/views.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ebc773ada3e4f40cf5084268387b873d7fe22e8b/tests%2Fregressiontests%2Ffile_uploads%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/ebc773ada3e4f40cf5084268387b873d7fe22e8b/tests%2Fregressiontests%2Ffile_uploads%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_uploads%2Fviews.py?ref=ebc773ada3e4f40cf5084268387b873d7fe22e8b",
            "patch": "@@ -7,7 +7,7 @@\n from django.core.files.uploadedfile import UploadedFile\n from django.http import HttpResponse, HttpResponseServerError\n from django.utils import six\n-from django.utils.encoding import smart_bytes\n+from django.utils.encoding import force_bytes\n \n from .models import FileModel, UPLOAD_TO\n from .tests import UNICODE_FILENAME\n@@ -46,7 +46,7 @@ def file_upload_view_verify(request):\n         if isinstance(value, UploadedFile):\n             new_hash = hashlib.sha1(value.read()).hexdigest()\n         else:\n-            new_hash = hashlib.sha1(smart_bytes(value)).hexdigest()\n+            new_hash = hashlib.sha1(force_bytes(value)).hexdigest()\n         if new_hash != submitted_hash:\n             return HttpResponseServerError()\n "
        }
    ],
    "stats": {
        "total": 151,
        "additions": 74,
        "deletions": 77
    }
}