{
    "author": "claudep",
    "message": "Fixed #18561 -- Made HttpResponse.tell() support non-ascii chars",
    "sha": "23f94f0741100233862922a8e77a3ac9dc1833e9",
    "files": [
        {
            "sha": "4b8f70fb4b67e3e61e3b509a30221ce63bcf9695",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/23f94f0741100233862922a8e77a3ac9dc1833e9/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/23f94f0741100233862922a8e77a3ac9dc1833e9/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=23f94f0741100233862922a8e77a3ac9dc1833e9",
            "patch": "@@ -683,7 +683,7 @@ def flush(self):\n     def tell(self):\n         if self._base_content_is_iter:\n             raise Exception(\"This %s instance cannot tell its position\" % self.__class__)\n-        return sum([len(str(chunk)) for chunk in self._container])\n+        return sum([len(chunk) for chunk in self])\n \n class HttpResponseRedirect(HttpResponse):\n     status_code = 302"
        },
        {
            "sha": "9b599db6d0e8b051bd620c8bc6196f36c26d7f6c",
            "filename": "tests/regressiontests/httpwrappers/tests.py",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/23f94f0741100233862922a8e77a3ac9dc1833e9/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/23f94f0741100233862922a8e77a3ac9dc1833e9/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py?ref=23f94f0741100233862922a8e77a3ac9dc1833e9",
            "patch": "@@ -1,3 +1,4 @@\n+# -*- encoding: utf-8 -*-\n from __future__ import unicode_literals\n \n import copy\n@@ -298,6 +299,17 @@ def test_iter_content(self):\n         self.assertRaises(UnicodeEncodeError,\n                           getattr, r, 'content')\n \n+    def test_file_interface(self):\n+        r = HttpResponse()\n+        r.write(b\"hello\")\n+        self.assertEqual(r.tell(), 5)\n+        r.write(\"привет\")\n+        self.assertEqual(r.tell(), 17)\n+\n+        r = HttpResponse(['abc'])\n+        self.assertRaises(Exception, r.write, 'def')\n+\n+\n class CookieTests(unittest.TestCase):\n     def test_encode(self):\n         \"\"\""
        }
    ],
    "stats": {
        "total": 14,
        "additions": 13,
        "deletions": 1
    }
}