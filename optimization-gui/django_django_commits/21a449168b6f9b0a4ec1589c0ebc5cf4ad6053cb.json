{
    "author": "unknown",
    "message": "Fixed #16645: fixed a broken test to work in Oracle.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16919 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "21a449168b6f9b0a4ec1589c0ebc5cf4ad6053cb",
    "files": [
        {
            "sha": "0ad3e062647b862fb23e7850d23fd7d218a1a657",
            "filename": "tests/modeltests/model_forms/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/21a449168b6f9b0a4ec1589c0ebc5cf4ad6053cb/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/21a449168b6f9b0a4ec1589c0ebc5cf4ad6053cb/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py?ref=21a449168b6f9b0a4ec1589c0ebc5cf4ad6053cb",
            "patch": "@@ -8,6 +8,7 @@\n from django.test import TestCase\n from django.core.files.uploadedfile import SimpleUploadedFile\n from django.core.validators import ValidationError\n+from django.db import connection\n from django.forms.models import model_to_dict\n from django.utils.unittest import skipUnless\n \n@@ -1313,11 +1314,17 @@ def test_image_field(self):\n         instance.delete()\n \n         # Test the non-required ImageField\n+        # Note: In Oracle, we expect a null ImageField to return u'' instead of\n+        # None.\n+        if connection.features.interprets_empty_strings_as_nulls:\n+            expected_null_imagefield_repr = u''\n+        else:\n+            expected_null_imagefield_repr = None\n \n         f = OptionalImageFileForm(data={'description': u'Test'})\n         self.assertEqual(f.is_valid(), True)\n         instance = f.save()\n-        self.assertEqual(instance.image.name, None)\n+        self.assertEqual(instance.image.name, expected_null_imagefield_repr)\n         self.assertEqual(instance.width, None)\n         self.assertEqual(instance.height, None)\n "
        }
    ],
    "stats": {
        "total": 9,
        "additions": 8,
        "deletions": 1
    }
}