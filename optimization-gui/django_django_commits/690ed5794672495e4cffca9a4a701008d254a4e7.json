{
    "author": "timgraham",
    "message": "Fixed #18476 - Added use of {% url %} tag to tutorial.\n\nThanks Claude Paroz for the patch.",
    "sha": "690ed5794672495e4cffca9a4a701008d254a4e7",
    "files": [
        {
            "sha": "d15b2f43ae0fbe6d05db8a1e52bbe5626ca37b54",
            "filename": "docs/intro/tutorial03.txt",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/690ed5794672495e4cffca9a4a701008d254a4e7/docs%2Fintro%2Ftutorial03.txt",
            "raw_url": "https://github.com/django/django/raw/690ed5794672495e4cffca9a4a701008d254a4e7/docs%2Fintro%2Ftutorial03.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial03.txt?ref=690ed5794672495e4cffca9a4a701008d254a4e7",
            "patch": "@@ -533,5 +533,22 @@ under \"/content/polls/\", or any other path root, and the app will still work.\n \n All the poll app cares about is its relative path, not its absolute path.\n \n+Removing hardcoded URLs in templates\n+------------------------------------\n+\n+Remember, when we wrote the link to a poll in our template, the link was\n+partially hardcoded like this:\n+\n+.. code-block:: html+django\n+\n+    <li><a href=\"/polls/{{ poll.id }}/\">{{ poll.question }}</a></li>\n+\n+To use the decoupled URLs we've just introduced, replace the hardcoded link\n+with the :ttag:`url` template tag:\n+\n+.. code-block:: html+django\n+\n+    <li><a href=\"{% url 'polls.views.detail' poll.id %}\">{{ poll.question }}</a></li>\n+\n When you're comfortable with writing views, read :doc:`part 4 of this tutorial\n </intro/tutorial04>` to learn about simple form processing and generic views."
        },
        {
            "sha": "31680ea5e576b79a6f51843bbd5b3ae10141eead",
            "filename": "docs/intro/tutorial04.txt",
            "status": "modified",
            "additions": 16,
            "deletions": 7,
            "changes": 23,
            "blob_url": "https://github.com/django/django/blob/690ed5794672495e4cffca9a4a701008d254a4e7/docs%2Fintro%2Ftutorial04.txt",
            "raw_url": "https://github.com/django/django/raw/690ed5794672495e4cffca9a4a701008d254a4e7/docs%2Fintro%2Ftutorial04.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial04.txt?ref=690ed5794672495e4cffca9a4a701008d254a4e7",
            "patch": "@@ -18,7 +18,7 @@ tutorial, so that the template contains an HTML ``<form>`` element:\n \n     {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}\n \n-    <form action=\"/polls/{{ poll.id }}/vote/\" method=\"post\">\n+    <form action=\"{% url 'polls.views.vote' poll.id %}\" method=\"post\">\n     {% csrf_token %}\n     {% for choice in poll.choice_set.all %}\n         <input type=\"radio\" name=\"choice\" id=\"choice{{ forloop.counter }}\" value=\"{{ choice.id }}\" />\n@@ -35,7 +35,7 @@ A quick rundown:\n   selects one of the radio buttons and submits the form, it'll send the\n   POST data ``choice=3``. This is HTML Forms 101.\n \n-* We set the form's ``action`` to ``/polls/{{ poll.id }}/vote/``, and we\n+* We set the form's ``action`` to ``{% url 'polls.views.vote' poll.id %}``, and we\n   set ``method=\"post\"``. Using ``method=\"post\"`` (as opposed to\n   ``method=\"get\"``) is very important, because the act of submitting this\n   form will alter data server-side. Whenever you create a form that alters\n@@ -172,7 +172,7 @@ Now, create a ``results.html`` template:\n     {% endfor %}\n     </ul>\n \n-    <a href=\"/polls/{{ poll.id }}/\">Vote again?</a>\n+    <a href=\"{% url 'polls.views.detail' poll.id %}\">Vote again?</a>\n \n Now, go to ``/polls/1/`` in your browser and vote in the poll. You should see a\n results page that gets updated each time you vote. If you submit the form\n@@ -238,11 +238,13 @@ Change it like so::\n             ListView.as_view(\n                 queryset=Poll.objects.order_by('-pub_date')[:5],\n                 context_object_name='latest_poll_list',\n-                template_name='polls/index.html')),\n+                template_name='polls/index.html'),\n+            name='poll_index'),\n         url(r'^(?P<pk>\\d+)/$',\n             DetailView.as_view(\n                 model=Poll,\n-                template_name='polls/detail.html')),\n+                template_name='polls/detail.html'),\n+            name='poll_detail'),\n         url(r'^(?P<pk>\\d+)/results/$',\n             DetailView.as_view(\n                 model=Poll,\n@@ -265,8 +267,8 @@ two views abstract the concepts of \"display a list of objects\" and\n   ``\"pk\"``, so we've changed ``poll_id`` to ``pk`` for the generic\n   views.\n \n-* We've added a name, ``poll_results``, to the results view so\n-  that we have a way to refer to its URL later on (see the\n+* We've added the ``name`` argument to the views (e.g. ``name='poll_results'``)\n+  so that we have a way to refer to their URL later on (see the\n   documentation about :ref:`naming URL patterns\n   <naming-url-patterns>` for information). We're also using the\n   :func:`~django.conf.urls.url` function from\n@@ -317,6 +319,13 @@ function anymore -- generic views can be (and are) used multiple times\n \n     return HttpResponseRedirect(reverse('poll_results', args=(p.id,)))\n \n+The same rule apply for the :ttag:`url` template tag. For example in the\n+``results.html`` template:\n+\n+.. code-block:: html+django\n+\n+    <a href=\"{% url 'poll_detail' poll.id %}\">Vote again?</a>\n+\n Run the server, and use your new polling app based on generic views.\n \n For full details on generic views, see the :doc:`generic views documentation"
        }
    ],
    "stats": {
        "total": 40,
        "additions": 33,
        "deletions": 7
    }
}