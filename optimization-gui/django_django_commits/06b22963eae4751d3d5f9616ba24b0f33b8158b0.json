{
    "author": "freakboy3742",
    "message": "Fixed #15272 -- Altered generic views to use the guaranteed untranslated object_name, rather than the possibly translated verbose_name(_plural) for default context objects. Thanks to szczav for the report and patch.\n\nThis is BACKWARDS INCOMPATIBLE for anyone relying on the default context object names for class-based Detail and List views. To migrate, either update your templates to use the new default names, or add a context_object_name argument to your generic views.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15531 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "06b22963eae4751d3d5f9616ba24b0f33b8158b0",
    "files": [
        {
            "sha": "dafdbe87b36d9c3930ef8e6c12e35477273573f2",
            "filename": "django/views/generic/detail.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/06b22963eae4751d3d5f9616ba24b0f33b8158b0/django%2Fviews%2Fgeneric%2Fdetail.py",
            "raw_url": "https://github.com/django/django/raw/06b22963eae4751d3d5f9616ba24b0f33b8158b0/django%2Fviews%2Fgeneric%2Fdetail.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fdetail.py?ref=06b22963eae4751d3d5f9616ba24b0f33b8158b0",
            "patch": "@@ -80,8 +80,7 @@ def get_context_object_name(self, obj):\n         if self.context_object_name:\n             return self.context_object_name\n         elif hasattr(obj, '_meta'):\n-            return smart_str(re.sub('[^a-zA-Z0-9]+', '_',\n-                    obj._meta.verbose_name.lower()))\n+            return smart_str(obj._meta.object_name.lower())\n         else:\n             return None\n "
        },
        {
            "sha": "213b89b64dfdd8c50daed6c4619e5e764204c49f",
            "filename": "django/views/generic/list.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/06b22963eae4751d3d5f9616ba24b0f33b8158b0/django%2Fviews%2Fgeneric%2Flist.py",
            "raw_url": "https://github.com/django/django/raw/06b22963eae4751d3d5f9616ba24b0f33b8158b0/django%2Fviews%2Fgeneric%2Flist.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Flist.py?ref=06b22963eae4751d3d5f9616ba24b0f33b8158b0",
            "patch": "@@ -76,8 +76,7 @@ def get_context_object_name(self, object_list):\n         if self.context_object_name:\n             return self.context_object_name\n         elif hasattr(object_list, 'model'):\n-            return smart_str(re.sub('[^a-zA-Z0-9]+', '_',\n-                    object_list.model._meta.verbose_name_plural.lower()))\n+            return smart_str('%s_list' % object_list.model._meta.object_name.lower())\n         else:\n             return None\n "
        },
        {
            "sha": "09ad0d3cecd2505865e9ac21c094e67c446fb6be",
            "filename": "docs/ref/class-based-views.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/06b22963eae4751d3d5f9616ba24b0f33b8158b0/docs%2Fref%2Fclass-based-views.txt",
            "raw_url": "https://github.com/django/django/raw/06b22963eae4751d3d5f9616ba24b0f33b8158b0/docs%2Fref%2Fclass-based-views.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views.txt?ref=06b22963eae4751d3d5f9616ba24b0f33b8158b0",
            "patch": "@@ -162,14 +162,14 @@ SingleObjectMixin\n         it constructs a :class:`QuerySet` by calling the `all()` method on the\n         :attr:`~SingleObjectMixin.model` attribute's default manager.\n \n-    .. method:: get_context_object_name(object_list)\n+    .. method:: get_context_object_name(obj)\n \n         Return the context variable name that will be used to contain the\n-        list of data that this view is manipulating. If ``object_list`` is a\n-        :class:`QuerySet` of Django objects and\n+        data that this view is manipulating. If\n         :attr:`~SingleObjectMixin.context_object_name` is not set, the context\n-        name will be constructed from the verbose plural name of the model that\n-        the queryset is composed from.\n+        name will be constructed from the ``object_name`` of the model that\n+        the queryset is composed from. For example, the model ``Article``\n+        would have context object named ``'article'``.\n \n     .. method:: get_context_data(**kwargs)\n \n@@ -333,10 +333,14 @@ MultipleObjectMixin\n \n     .. method:: get_context_object_name(object_list)\n \n-        Return the context variable name that will be used to contain the list\n-        of data that this view is manipulating. If object_list is a queryset of\n-        Django objects, the context name will be verbose plural name of the\n-        model that the queryset is composed from.\n+        Return the context variable name that will be used to contain\n+        the list of data that this view is manipulating. If\n+        ``object_list`` is a queryset of Django objects and\n+        :attr:`~MultipleObjectMixin.context_object_name` is not set,\n+        the context name will be the ``object_name`` of the model that\n+        the queryset is composed from, with postfix ``'_list'``\n+        appended. For example, the model ``Article`` would have a\n+        context object named ``article_list``.\n \n     .. method:: get_context_data(**kwargs)\n "
        },
        {
            "sha": "fa62f5de1f584f276fc0fe8b68eee2a75bae2e92",
            "filename": "docs/topics/generic-views-migration.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/06b22963eae4751d3d5f9616ba24b0f33b8158b0/docs%2Ftopics%2Fgeneric-views-migration.txt",
            "raw_url": "https://github.com/django/django/raw/06b22963eae4751d3d5f9616ba24b0f33b8158b0/docs%2Ftopics%2Fgeneric-views-migration.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fgeneric-views-migration.txt?ref=06b22963eae4751d3d5f9616ba24b0f33b8158b0",
            "patch": "@@ -72,7 +72,8 @@ The ``_list`` suffix on list views\n In a function-based :class:`ListView`, the ``template_object_name``\n was appended with the suffix ``'_list'`` to yield the final context\n variable name. In a class-based ``ListView``, the\n-``context_object_name`` is used verbatim.\n+``context_object_name`` is used verbatim. The ``'_list'`` suffix\n+is only applied when generating a default context object name.\n \n The context data for ``object_list`` views\n ------------------------------------------"
        },
        {
            "sha": "d5345befd0a7b0f888ffe7d36373d6f7b19d1260",
            "filename": "tests/regressiontests/generic_views/dates.py",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/06b22963eae4751d3d5f9616ba24b0f33b8158b0/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/06b22963eae4751d3d5f9616ba24b0f33b8158b0/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py?ref=06b22963eae4751d3d5f9616ba24b0f33b8158b0",
            "patch": "@@ -92,7 +92,7 @@ def test_year_view_make_object_list(self):\n         res = self.client.get('/dates/books/2006/make_object_list/')\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(list(res.context['date_list']), [datetime.datetime(2006, 5, 1)])\n-        self.assertEqual(list(res.context['books']), list(Book.objects.filter(pubdate__year=2006)))\n+        self.assertEqual(list(res.context['book_list']), list(Book.objects.filter(pubdate__year=2006)))\n         self.assertEqual(list(res.context['object_list']), list(Book.objects.filter(pubdate__year=2006)))\n         self.assertTemplateUsed(res, 'generic_views/book_archive_year.html')\n \n@@ -102,7 +102,7 @@ def test_year_view_empty(self):\n         res = self.client.get('/dates/books/1999/allow_empty/')\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(list(res.context['date_list']), [])\n-        self.assertEqual(list(res.context['books']), [])\n+        self.assertEqual(list(res.context['book_list']), [])\n \n     def test_year_view_allow_future(self):\n         # Create a new book in the future\n@@ -113,7 +113,7 @@ def test_year_view_allow_future(self):\n \n         res = self.client.get('/dates/books/%s/allow_empty/' % year)\n         self.assertEqual(res.status_code, 200)\n-        self.assertEqual(list(res.context['books']), [])\n+        self.assertEqual(list(res.context['book_list']), [])\n \n         res = self.client.get('/dates/books/%s/allow_future/' % year)\n         self.assertEqual(res.status_code, 200)\n@@ -132,7 +132,7 @@ def test_month_view(self):\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/book_archive_month.html')\n         self.assertEqual(list(res.context['date_list']), [datetime.datetime(2008, 10, 1)])\n-        self.assertEqual(list(res.context['books']),\n+        self.assertEqual(list(res.context['book_list']),\n                          list(Book.objects.filter(pubdate=datetime.date(2008, 10, 1))))\n         self.assertEqual(res.context['month'], datetime.date(2008, 10, 1))\n \n@@ -149,7 +149,7 @@ def test_month_view_allow_empty(self):\n         res = self.client.get('/dates/books/2000/jan/allow_empty/')\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(list(res.context['date_list']), [])\n-        self.assertEqual(list(res.context['books']), [])\n+        self.assertEqual(list(res.context['book_list']), [])\n         self.assertEqual(res.context['month'], datetime.date(2000, 1, 1))\n \n         # Since it's allow empty, next/prev are allowed to be empty months (#7164)\n@@ -175,7 +175,7 @@ def test_month_view_allow_future(self):\n         res = self.client.get('/dates/books/%s/allow_future/' % urlbit)\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(res.context['date_list'][0].date(), b.pubdate)\n-        self.assertEqual(list(res.context['books']), [b])\n+        self.assertEqual(list(res.context['book_list']), [b])\n         self.assertEqual(res.context['month'], future)\n \n         # Since it's allow_future but not allow_empty, next/prev are not\n@@ -229,7 +229,7 @@ def test_week_view(self):\n         res = self.client.get('/dates/books/2008/week/39/')\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/book_archive_week.html')\n-        self.assertEqual(res.context['books'][0], Book.objects.get(pubdate=datetime.date(2008, 10, 1)))\n+        self.assertEqual(res.context['book_list'][0], Book.objects.get(pubdate=datetime.date(2008, 10, 1)))\n         self.assertEqual(res.context['week'], datetime.date(2008, 9, 28))\n \n     def test_week_view_allow_empty(self):\n@@ -238,7 +238,7 @@ def test_week_view_allow_empty(self):\n \n         res = self.client.get('/dates/books/2008/week/12/allow_empty/')\n         self.assertEqual(res.status_code, 200)\n-        self.assertEqual(list(res.context['books']), [])\n+        self.assertEqual(list(res.context['book_list']), [])\n \n     def test_week_view_allow_future(self):\n         future = datetime.date(datetime.date.today().year + 1, 1, 1)\n@@ -249,7 +249,7 @@ def test_week_view_allow_future(self):\n \n         res = self.client.get('/dates/books/%s/week/1/allow_future/' % future.year)\n         self.assertEqual(res.status_code, 200)\n-        self.assertEqual(list(res.context['books']), [b])\n+        self.assertEqual(list(res.context['book_list']), [b])\n \n     def test_week_view_invalid_pattern(self):\n         res = self.client.get('/dates/books/2007/week/no_week/')\n@@ -273,7 +273,7 @@ def test_day_view(self):\n         res = self.client.get('/dates/books/2008/oct/01/')\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/book_archive_day.html')\n-        self.assertEqual(list(res.context['books']),\n+        self.assertEqual(list(res.context['book_list']),\n                          list(Book.objects.filter(pubdate=datetime.date(2008, 10, 1))))\n         self.assertEqual(res.context['day'], datetime.date(2008, 10, 1))\n \n@@ -289,7 +289,7 @@ def test_day_view_allow_empty(self):\n         # allow_empty = True, empty month\n         res = self.client.get('/dates/books/2000/jan/1/allow_empty/')\n         self.assertEqual(res.status_code, 200)\n-        self.assertEqual(list(res.context['books']), [])\n+        self.assertEqual(list(res.context['book_list']), [])\n         self.assertEqual(res.context['day'], datetime.date(2000, 1, 1))\n \n         # Since it's allow empty, next/prev are allowed to be empty months (#7164)\n@@ -314,7 +314,7 @@ def test_day_view_allow_future(self):\n         # allow_future = True, valid future month\n         res = self.client.get('/dates/books/%s/allow_future/' % urlbit)\n         self.assertEqual(res.status_code, 200)\n-        self.assertEqual(list(res.context['books']), [b])\n+        self.assertEqual(list(res.context['book_list']), [b])\n         self.assertEqual(res.context['day'], future)\n \n         # allow_future but not allow_empty, next/prev amust be valid"
        },
        {
            "sha": "e8f2050fe2e1949e17aacb5dbd0974c666a605a5",
            "filename": "tests/regressiontests/generic_views/detail.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/06b22963eae4751d3d5f9616ba24b0f33b8158b0/tests%2Fregressiontests%2Fgeneric_views%2Fdetail.py",
            "raw_url": "https://github.com/django/django/raw/06b22963eae4751d3d5f9616ba24b0f33b8158b0/tests%2Fregressiontests%2Fgeneric_views%2Fdetail.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fdetail.py?ref=06b22963eae4751d3d5f9616ba24b0f33b8158b0",
            "patch": "@@ -32,7 +32,7 @@ def test_verbose_name(self):\n         res = self.client.get('/detail/artist/1/')\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(res.context['object'], Artist.objects.get(pk=1))\n-        self.assertEqual(res.context['professional_artist'], Artist.objects.get(pk=1))\n+        self.assertEqual(res.context['artist'], Artist.objects.get(pk=1))\n         self.assertTemplateUsed(res, 'generic_views/artist_detail.html')\n \n     def test_template_name(self):"
        },
        {
            "sha": "b784f4d659f7d2d390827a0dbab3a6cde5fcced5",
            "filename": "tests/regressiontests/generic_views/list.py",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/django/django/blob/06b22963eae4751d3d5f9616ba24b0f33b8158b0/tests%2Fregressiontests%2Fgeneric_views%2Flist.py",
            "raw_url": "https://github.com/django/django/raw/06b22963eae4751d3d5f9616ba24b0f33b8158b0/tests%2Fregressiontests%2Fgeneric_views%2Flist.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Flist.py?ref=06b22963eae4751d3d5f9616ba24b0f33b8158b0",
            "patch": "@@ -19,7 +19,7 @@ def test_queryset(self):\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/author_list.html')\n         self.assertEqual(list(res.context['object_list']), list(Author.objects.all()))\n-        self.assertIs(res.context['authors'], res.context['object_list'])\n+        self.assertIs(res.context['author_list'], res.context['object_list'])\n         self.assertIsNone(res.context['paginator'])\n         self.assertIsNone(res.context['page_obj'])\n         self.assertFalse(res.context['is_paginated'])\n@@ -30,20 +30,20 @@ def test_paginated_queryset(self):\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/author_list.html')\n         self.assertEqual(len(res.context['object_list']), 30)\n-        self.assertIs(res.context['authors'], res.context['object_list'])\n+        self.assertIs(res.context['author_list'], res.context['object_list'])\n         self.assertTrue(res.context['is_paginated'])\n         self.assertEqual(res.context['page_obj'].number, 1)\n         self.assertEqual(res.context['paginator'].num_pages, 4)\n-        self.assertEqual(res.context['authors'][0].name, 'Author 00')\n-        self.assertEqual(list(res.context['authors'])[-1].name, 'Author 29')\n+        self.assertEqual(res.context['author_list'][0].name, 'Author 00')\n+        self.assertEqual(list(res.context['author_list'])[-1].name, 'Author 29')\n \n     def test_paginated_queryset_shortdata(self):\n         # Test that short datasets ALSO result in a paginated view.\n         res = self.client.get('/list/authors/paginated/')\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/author_list.html')\n         self.assertEqual(list(res.context['object_list']), list(Author.objects.all()))\n-        self.assertIs(res.context['authors'], res.context['object_list'])\n+        self.assertIs(res.context['author_list'], res.context['object_list'])\n         self.assertEqual(res.context['page_obj'].number, 1)\n         self.assertEqual(res.context['paginator'].num_pages, 1)\n         self.assertTrue(res.context['is_paginated'])\n@@ -54,17 +54,17 @@ def test_paginated_get_page_by_query_string(self):\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/author_list.html')\n         self.assertEqual(len(res.context['object_list']), 30)\n-        self.assertIs(res.context['authors'], res.context['object_list'])\n-        self.assertEqual(res.context['authors'][0].name, 'Author 30')\n+        self.assertIs(res.context['author_list'], res.context['object_list'])\n+        self.assertEqual(res.context['author_list'][0].name, 'Author 30')\n         self.assertEqual(res.context['page_obj'].number, 2)\n \n     def test_paginated_get_last_page_by_query_string(self):\n         self._make_authors(100)\n         res = self.client.get('/list/authors/paginated/', {'page': 'last'})\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(len(res.context['object_list']), 10)\n-        self.assertIs(res.context['authors'], res.context['object_list'])\n-        self.assertEqual(res.context['authors'][0].name, 'Author 90')\n+        self.assertIs(res.context['author_list'], res.context['object_list'])\n+        self.assertEqual(res.context['author_list'][0].name, 'Author 90')\n         self.assertEqual(res.context['page_obj'].number, 4)\n \n     def test_paginated_get_page_by_urlvar(self):\n@@ -73,8 +73,8 @@ def test_paginated_get_page_by_urlvar(self):\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/author_list.html')\n         self.assertEqual(len(res.context['object_list']), 30)\n-        self.assertIs(res.context['authors'], res.context['object_list'])\n-        self.assertEqual(res.context['authors'][0].name, 'Author 60')\n+        self.assertIs(res.context['author_list'], res.context['object_list'])\n+        self.assertEqual(res.context['author_list'][0].name, 'Author 60')\n         self.assertEqual(res.context['page_obj'].number, 3)\n \n     def test_paginated_page_out_of_range(self):\n@@ -112,7 +112,7 @@ def test_verbose_name(self):\n         self.assertEqual(res.status_code, 200)\n         self.assertTemplateUsed(res, 'generic_views/list.html')\n         self.assertEqual(list(res.context['object_list']), list(Artist.objects.all()))\n-        self.assertIs(res.context['professional_artists'], res.context['object_list'])\n+        self.assertIs(res.context['artist_list'], res.context['object_list'])\n         self.assertIsNone(res.context['paginator'])\n         self.assertIsNone(res.context['page_obj'])\n         self.assertFalse(res.context['is_paginated'])\n@@ -128,14 +128,14 @@ def test_template_name(self):\n         res = self.client.get('/list/authors/template_name/')\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(list(res.context['object_list']), list(Author.objects.all()))\n-        self.assertIs(res.context['authors'], res.context['object_list'])\n+        self.assertIs(res.context['author_list'], res.context['object_list'])\n         self.assertTemplateUsed(res, 'generic_views/list.html')\n \n     def test_template_name_suffix(self):\n         res = self.client.get('/list/authors/template_name_suffix/')\n         self.assertEqual(res.status_code, 200)\n         self.assertEqual(list(res.context['object_list']), list(Author.objects.all()))\n-        self.assertIs(res.context['authors'], res.context['object_list'])\n+        self.assertIs(res.context['author_list'], res.context['object_list'])\n         self.assertTemplateUsed(res, 'generic_views/author_objects.html')\n \n     def test_context_object_name(self):"
        }
    ],
    "stats": {
        "total": 85,
        "additions": 44,
        "deletions": 41
    }
}