{
    "author": "jphalip",
    "message": "Made some `contrib.messages` tests use `override_settings` for clarity. Thanks to Claude Paroz for the patch. Refs #16507, #16574.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17032 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "c1a014bba4f25e7d9c6c1a46737bcd5d490a13f7",
    "files": [
        {
            "sha": "30aa6b53a65c8d749a30c3ab8af7a8867d35fd4c",
            "filename": "django/contrib/messages/tests/cookie.py",
            "status": "modified",
            "additions": 4,
            "deletions": 10,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/c1a014bba4f25e7d9c6c1a46737bcd5d490a13f7/django%2Fcontrib%2Fmessages%2Ftests%2Fcookie.py",
            "raw_url": "https://github.com/django/django/raw/c1a014bba4f25e7d9c6c1a46737bcd5d490a13f7/django%2Fcontrib%2Fmessages%2Ftests%2Fcookie.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmessages%2Ftests%2Fcookie.py?ref=c1a014bba4f25e7d9c6c1a46737bcd5d490a13f7",
            "patch": "@@ -3,8 +3,8 @@\n from django.contrib.messages.storage.cookie import (CookieStorage,\n     MessageEncoder, MessageDecoder)\n from django.contrib.messages.storage.base import Message\n+from django.test.utils import override_settings\n from django.utils import simplejson as json\n-from django.conf import settings\n \n \n def set_cookie_data(storage, messages, invalid=False, encode_empty=False):\n@@ -41,15 +41,6 @@ def stored_cookie_messages_count(storage, response):\n class CookieTest(BaseTest):\n     storage_class = CookieStorage\n \n-    def setUp(self):\n-        super(CookieTest, self).setUp()\n-        self.old_SESSION_COOKIE_DOMAIN = settings.SESSION_COOKIE_DOMAIN\n-        settings.SESSION_COOKIE_DOMAIN = '.lawrence.com'\n-\n-    def tearDown(self):\n-        super(CookieTest, self).tearDown()\n-        settings.SESSION_COOKIE_DOMAIN = self.old_SESSION_COOKIE_DOMAIN\n-\n     def stored_messages_count(self, storage, response):\n         return stored_cookie_messages_count(storage, response)\n \n@@ -139,3 +130,6 @@ def test_json_encoder_decoder(self):\n         value = encoder.encode(messages)\n         decoded_messages = json.loads(value, cls=MessageDecoder)\n         self.assertEqual(messages, decoded_messages)\n+\n+CookieTest = override_settings(\n+        SESSION_COOKIE_DOMAIN='.lawrence.com')(CookieTest)"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 4,
        "deletions": 10
    }
}