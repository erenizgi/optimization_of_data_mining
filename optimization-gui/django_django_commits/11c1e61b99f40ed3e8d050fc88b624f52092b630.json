{
    "author": "alex",
    "message": "Fixed #16925 -- Make sure a signal is disconnected if the test fails. Thanks to aaugustin for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16905 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "11c1e61b99f40ed3e8d050fc88b624f52092b630",
    "files": [
        {
            "sha": "b8e691490a28c3c9c7f58638cfe70d64f53f8c6b",
            "filename": "tests/regressiontests/fixtures_regress/tests.py",
            "status": "modified",
            "additions": 15,
            "deletions": 13,
            "changes": 28,
            "blob_url": "https://github.com/django/django/blob/11c1e61b99f40ed3e8d050fc88b624f52092b630/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/11c1e61b99f40ed3e8d050fc88b624f52092b630/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py?ref=11c1e61b99f40ed3e8d050fc88b624f52092b630",
            "patch": "@@ -277,19 +277,21 @@ def test_field_value_coerce(self):\n         global pre_save_checks\n         pre_save_checks = []\n         signals.pre_save.connect(animal_pre_save_check)\n-        management.call_command(\n-            'loaddata',\n-            'animal.xml',\n-            verbosity=0,\n-            commit=False,\n-        )\n-        self.assertEqual(\n-            pre_save_checks,\n-            [\n-                (\"Count = 42 (<type 'int'>)\", \"Weight = 1.2 (<type 'float'>)\")\n-            ]\n-        )\n-        signals.pre_save.disconnect(animal_pre_save_check)\n+        try:\n+            management.call_command(\n+                'loaddata',\n+                'animal.xml',\n+                verbosity=0,\n+                commit=False,\n+            )\n+            self.assertEqual(\n+                pre_save_checks,\n+                [\n+                    (\"Count = 42 (<type 'int'>)\", \"Weight = 1.2 (<type 'float'>)\")\n+                ]\n+            )\n+        finally:\n+            signals.pre_save.disconnect(animal_pre_save_check)\n \n     def test_dumpdata_uses_default_manager(self):\n         \"\"\""
        }
    ],
    "stats": {
        "total": 28,
        "additions": 15,
        "deletions": 13
    }
}