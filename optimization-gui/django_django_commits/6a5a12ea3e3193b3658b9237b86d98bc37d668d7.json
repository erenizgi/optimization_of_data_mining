{
    "author": "unknown",
    "message": "Fixed #17888 -- no longer silence exceptions inside of check_test. Thanks to brutasse for the patch.",
    "sha": "6a5a12ea3e3193b3658b9237b86d98bc37d668d7",
    "files": [
        {
            "sha": "7651efccd07923f39d32e00985c180e767faac65",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/6a5a12ea3e3193b3658b9237b86d98bc37d668d7/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/6a5a12ea3e3193b3658b9237b86d98bc37d668d7/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=6a5a12ea3e3193b3658b9237b86d98bc37d668d7",
            "patch": "@@ -507,11 +507,7 @@ def __init__(self, attrs=None, check_test=None):\n \n     def render(self, name, value, attrs=None):\n         final_attrs = self.build_attrs(attrs, type='checkbox', name=name)\n-        try:\n-            result = self.check_test(value)\n-        except: # Silently catch exceptions\n-            result = False\n-        if result:\n+        if self.check_test(value):\n             final_attrs['checked'] = 'checked'\n         if not (value is True or value is False or value is None or value == ''):\n             # Only add the 'value' attribute if a value is non-empty.\n@@ -525,7 +521,7 @@ def value_from_datadict(self, data, files, name):\n             return False\n         value = data.get(name)\n         # Translate true and false strings to boolean values.\n-        values =  {'true': True, 'false': False}\n+        values = {'true': True, 'false': False}\n         if isinstance(value, six.string_types):\n             value = values.get(value.lower(), value)\n         return value"
        },
        {
            "sha": "eab314a4cdde78d56bdd2f94fc1a233a642e4922",
            "filename": "docs/ref/forms/widgets.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/6a5a12ea3e3193b3658b9237b86d98bc37d668d7/docs%2Fref%2Fforms%2Fwidgets.txt",
            "raw_url": "https://github.com/django/django/raw/6a5a12ea3e3193b3658b9237b86d98bc37d668d7/docs%2Fref%2Fforms%2Fwidgets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Fwidgets.txt?ref=6a5a12ea3e3193b3658b9237b86d98bc37d668d7",
            "patch": "@@ -310,6 +310,10 @@ commonly used groups of widgets:\n         A callable that takes the value of the CheckBoxInput and returns\n         ``True`` if the checkbox should be checked for that value.\n \n+        .. versionchanged:: 1.5\n+            Exceptions from ``check_test`` used to be silenced by its caller,\n+            this is no longer the case, they will propagate upwards.\n+\n ``Select``\n ~~~~~~~~~~\n "
        },
        {
            "sha": "544ca41642991fad9e25f6f905b93b1b21f84147",
            "filename": "tests/regressiontests/forms/tests/widgets.py",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/6a5a12ea3e3193b3658b9237b86d98bc37d668d7/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/6a5a12ea3e3193b3658b9237b86d98bc37d668d7/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py?ref=6a5a12ea3e3193b3658b9237b86d98bc37d668d7",
            "patch": "@@ -216,13 +216,9 @@ def test_checkboxinput(self):\n         self.assertHTMLEqual(w.render('greeting', 'hello there'), '<input checked=\"checked\" type=\"checkbox\" name=\"greeting\" value=\"hello there\" />')\n         self.assertHTMLEqual(w.render('greeting', 'hello & goodbye'), '<input checked=\"checked\" type=\"checkbox\" name=\"greeting\" value=\"hello &amp; goodbye\" />')\n \n-        # A subtlety: If the 'check_test' argument cannot handle a value and raises any\n-        # exception during its __call__, then the exception will be swallowed and the box\n-        # will not be checked. In this example, the 'check_test' assumes the value has a\n-        # startswith() method, which fails for the values True, False and None.\n-        self.assertHTMLEqual(w.render('greeting', True), '<input type=\"checkbox\" name=\"greeting\" />')\n-        self.assertHTMLEqual(w.render('greeting', False), '<input type=\"checkbox\" name=\"greeting\" />')\n-        self.assertHTMLEqual(w.render('greeting', None), '<input type=\"checkbox\" name=\"greeting\" />')\n+        # Ticket #17888: calling check_test shouldn't swallow exceptions\n+        with self.assertRaises(AttributeError):\n+            w.render('greeting', True)\n \n         # The CheckboxInput widget will return False if the key is not found in the data\n         # dictionary (because HTML form submission doesn't send any result for unchecked"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 9,
        "deletions": 13
    }
}