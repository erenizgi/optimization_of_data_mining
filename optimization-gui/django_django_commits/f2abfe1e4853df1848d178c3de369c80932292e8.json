{
    "author": "mgrouchy",
    "message": "Adds interpreter option to shell command as per ticket #18639\n\nSpecify python interpreter interface ipython or bpython with the -i,\n--interface options\nargument.\n ex// python manage.py shell -i bpython\n ex// python manage.py shell --interface bpython\n\nLike all other options, defaults to default python interpreter when your\nselected choice isn't available.\n\nupdated documentation where appropriate",
    "sha": "f2abfe1e4853df1848d178c3de369c80932292e8",
    "files": [
        {
            "sha": "4e7d1dbbf47f42189791526bf332d06907dedb43",
            "filename": "django/core/management/commands/shell.py",
            "status": "modified",
            "additions": 15,
            "deletions": 5,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/f2abfe1e4853df1848d178c3de369c80932292e8/django%2Fcore%2Fmanagement%2Fcommands%2Fshell.py",
            "raw_url": "https://github.com/django/django/raw/f2abfe1e4853df1848d178c3de369c80932292e8/django%2Fcore%2Fmanagement%2Fcommands%2Fshell.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fshell.py?ref=f2abfe1e4853df1848d178c3de369c80932292e8",
            "patch": "@@ -2,13 +2,19 @@\n from django.core.management.base import NoArgsCommand\n from optparse import make_option\n \n+\n class Command(NoArgsCommand):\n+    shells = ['ipython', 'bpython']\n+\n     option_list = NoArgsCommand.option_list + (\n         make_option('--plain', action='store_true', dest='plain',\n             help='Tells Django to use plain Python, not IPython or bpython.'),\n+        make_option('-i', '--interface', action='store', type='choice', choices=shells,\n+                    dest='interface',\n+            help='Specify an interactive interpreter interface. Available options: \"ipython\" and \"bpython\"'),\n+\n     )\n     help = \"Runs a Python interactive interpreter. Tries to use IPython or bpython, if one of them is available.\"\n-    shells = ['ipython', 'bpython']\n     requires_model_validation = False\n \n     def ipython(self):\n@@ -31,8 +37,10 @@ def bpython(self):\n         import bpython\n         bpython.embed()\n \n-    def run_shell(self):\n-        for shell in self.shells:\n+    def run_shell(self, shell=None):\n+        available_shells = [shell] if shell else self.shells\n+\n+        for shell in available_shells:\n             try:\n                 return getattr(self, shell)()\n             except ImportError:\n@@ -46,19 +54,21 @@ def handle_noargs(self, **options):\n         get_models()\n \n         use_plain = options.get('plain', False)\n+        interface = options.get('interface', None)\n \n         try:\n             if use_plain:\n                 # Don't bother loading IPython, because the user wants plain Python.\n                 raise ImportError\n-            self.run_shell()\n+\n+            self.run_shell(shell=interface)\n         except ImportError:\n             import code\n             # Set up a dictionary to serve as the environment for the shell, so\n             # that tab completion works on objects that are imported at runtime.\n             # See ticket 5082.\n             imported_objects = {}\n-            try: # Try activating rlcompleter, because it's handy.\n+            try:  # Try activating rlcompleter, because it's handy.\n                 import readline\n             except ImportError:\n                 pass"
        },
        {
            "sha": "c4295c68d597f481e34649cc4c73691bb5b84c9c",
            "filename": "docs/ref/django-admin.txt",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/f2abfe1e4853df1848d178c3de369c80932292e8/docs%2Fref%2Fdjango-admin.txt",
            "raw_url": "https://github.com/django/django/raw/f2abfe1e4853df1848d178c3de369c80932292e8/docs%2Fref%2Fdjango-admin.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdjango-admin.txt?ref=f2abfe1e4853df1848d178c3de369c80932292e8",
            "patch": "@@ -743,6 +743,24 @@ use the ``--plain`` option, like so::\n \n     django-admin.py shell --plain\n \n+.. versionchanged:: 1.5\n+\n+If you would like to specify either IPython or bpython as your interpreter if\n+you have both installed you can specify an alternative interpreter interface\n+with the ``-i`` or ``--interface`` options like so::\n+\n+IPython::\n+\n+    django-admin.py shell -i ipython\n+    django-admin.py shell --interface ipython\n+\n+\n+bpython::\n+\n+    django-admin.py shell -i bpython\n+    django-admin.py shell --interface bpython\n+\n+\n .. _IPython: http://ipython.scipy.org/\n .. _bpython: http://bpython-interpreter.org/\n "
        }
    ],
    "stats": {
        "total": 38,
        "additions": 33,
        "deletions": 5
    }
}