{
    "author": "alex",
    "message": "Converted Australian localfavor doctests into unittests.  We have always been at war with doctests.  Thanks to Idan Gazit for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14931 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "c9b79c59bb102c85d6b968a126abec6ae966e814",
    "files": [
        {
            "sha": "4bd8a76a487fcd2abe504ba737aed4649f3d4631",
            "filename": "tests/regressiontests/forms/localflavor/au.py",
            "status": "modified",
            "additions": 39,
            "deletions": 123,
            "changes": 162,
            "blob_url": "https://github.com/django/django/blob/c9b79c59bb102c85d6b968a126abec6ae966e814/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fau.py",
            "raw_url": "https://github.com/django/django/raw/c9b79c59bb102c85d6b968a126abec6ae966e814/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fau.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fau.py?ref=c9b79c59bb102c85d6b968a126abec6ae966e814",
            "patch": "@@ -1,127 +1,13 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ AU form fields.\n+from django.contrib.localflavor.au.forms import (AUPostCodeField,\n+        AUPhoneNumberField, AUStateSelect)\n \n-tests = r\"\"\"\n-## AUPostCodeField ##########################################################\n+from utils import LocalFlavorTestCase\n \n-A field that accepts a four digit Australian post code.\n \n->>> from django.contrib.localflavor.au.forms import AUPostCodeField\n->>> f = AUPostCodeField()\n->>> f.clean('1234')\n-u'1234'\n->>> f.clean('2000')\n-u'2000'\n->>> f.clean('abcd')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a 4 digit post code.']\n->>> f.clean('20001')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a 4 digit post code.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n-\n->>> f = AUPostCodeField(required=False)\n->>> f.clean('1234')\n-u'1234'\n->>> f.clean('2000')\n-u'2000'\n->>> f.clean('abcd')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a 4 digit post code.']\n->>> f.clean('20001')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a 4 digit post code.']\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n-\n-## AUPhoneNumberField ########################################################\n-\n-A field that accepts a 10 digit Australian phone number.\n-Allows spaces and parentheses around area code.\n-\n->>> from django.contrib.localflavor.au.forms import AUPhoneNumberField\n->>> f = AUPhoneNumberField()\n->>> f.clean('1234567890')\n-u'1234567890'\n->>> f.clean('0213456789')\n-u'0213456789'\n->>> f.clean('02 13 45 67 89')\n-u'0213456789'\n->>> f.clean('(02) 1345 6789')\n-u'0213456789'\n->>> f.clean('(02) 1345-6789')\n-u'0213456789'\n->>> f.clean('(02)1345-6789')\n-u'0213456789'\n->>> f.clean('0408 123 456')\n-u'0408123456'\n->>> f.clean('123')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must contain 10 digits.']\n->>> f.clean('1800DJANGO')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must contain 10 digits.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n-\n->>> f = AUPhoneNumberField(required=False)\n->>> f.clean('1234567890')\n-u'1234567890'\n->>> f.clean('0213456789')\n-u'0213456789'\n->>> f.clean('02 13 45 67 89')\n-u'0213456789'\n->>> f.clean('(02) 1345 6789')\n-u'0213456789'\n->>> f.clean('(02) 1345-6789')\n-u'0213456789'\n->>> f.clean('(02)1345-6789')\n-u'0213456789'\n->>> f.clean('0408 123 456')\n-u'0408123456'\n->>> f.clean('123')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must contain 10 digits.']\n->>> f.clean('1800DJANGO')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must contain 10 digits.']\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n-\n-## AUStateSelect #############################################################\n-\n-AUStateSelect is a Select widget that uses a list of Australian\n-states/territories as its choices.\n-\n->>> from django.contrib.localflavor.au.forms import AUStateSelect\n->>> f = AUStateSelect()\n->>> print f.render('state', 'NSW')\n-<select name=\"state\">\n+class AULocalFlavorTests(LocalFlavorTestCase):\n+    def test_AUStateSelect(self):\n+        f = AUStateSelect()\n+        out = u'''<select name=\"state\">\n <option value=\"ACT\">Australian Capital Territory</option>\n <option value=\"NSW\" selected=\"selected\">New South Wales</option>\n <option value=\"NT\">Northern Territory</option>\n@@ -130,5 +16,35 @@\n <option value=\"TAS\">Tasmania</option>\n <option value=\"VIC\">Victoria</option>\n <option value=\"WA\">Western Australia</option>\n-</select>\n-\"\"\"\n+</select>'''\n+        self.assertEqual(f.render('state', 'NSW'), out)\n+\n+    def test_AUPostCodeField(self):\n+        error_format = [u'Enter a 4 digit post code.']\n+        valid = {\n+            '1234': '1234',\n+            '2000': '2000',\n+        }\n+        invalid = {\n+            'abcd': error_format,\n+            '20001': error_format,\n+        }\n+        self.assertFieldOutput(AUPostCodeField, valid, invalid)\n+\n+    def test_AUPhoneNumberField(self):\n+        error_format = [u'Phone numbers must contain 10 digits.']\n+        valid = {\n+            '1234567890': '1234567890',\n+            '0213456789': '0213456789',\n+            '02 13 45 67 89': '0213456789',\n+            '(02) 1345 6789': '0213456789',\n+            '(02) 1345-6789': '0213456789',\n+            '(02)1345-6789': '0213456789',\n+            '0408 123 456': '0408123456',\n+        }\n+        invalid = {\n+            '123': error_format,\n+            '1800DJANGO': error_format,\n+        }\n+        self.assertFieldOutput(AUPhoneNumberField, valid, invalid)\n+"
        },
        {
            "sha": "c3dd07523f29e4d20be461b5835a633c9a4e3ad6",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/c9b79c59bb102c85d6b968a126abec6ae966e814/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/c9b79c59bb102c85d6b968a126abec6ae966e814/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=c9b79c59bb102c85d6b968a126abec6ae966e814",
            "patch": "@@ -1,5 +1,4 @@\n # -*- coding: utf-8 -*-\n-from localflavor.au import tests as localflavor_au_tests\n from localflavor.br import tests as localflavor_br_tests\n from localflavor.ca import tests as localflavor_ca_tests\n from localflavor.ch import tests as localflavor_ch_tests\n@@ -29,13 +28,13 @@\n from localflavor.ar import ARLocalFlavorTests\n from localflavor.at import ATLocalFlavorTests\n from localflavor.de import DELocalFlavorTests\n+from localflavor.au import AULocalFlavorTests\n from localflavor.be import BELocalFlavorTests\n from localflavor.il import ILLocalFlavorTests\n from localflavor.tr import TRLocalFlavorTests\n \n \n __test__ = {\n-    'localflavor_au_tests': localflavor_au_tests,\n     'localflavor_br_tests': localflavor_br_tests,\n     'localflavor_ca_tests': localflavor_ca_tests,\n     'localflavor_ch_tests': localflavor_ch_tests,"
        },
        {
            "sha": "f7ce1ef1f4c45490489541d273730a93554cd64e",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/c9b79c59bb102c85d6b968a126abec6ae966e814/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/c9b79c59bb102c85d6b968a126abec6ae966e814/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=c9b79c59bb102c85d6b968a126abec6ae966e814",
            "patch": "@@ -15,6 +15,7 @@\n     __test__,\n     ARLocalFlavorTests,\n     ATLocalFlavorTests,\n+    AULocalFlavorTests,\n     BELocalFlavorTests,\n     DELocalFlavorTests,\n     ILLocalFlavorTests,"
        }
    ],
    "stats": {
        "total": 166,
        "additions": 41,
        "deletions": 125
    }
}