{
    "author": "claudep",
    "message": "[py3] Various minor syntax fixes in the test suite",
    "sha": "66021033381f154ddf8a9ecf93fcbb41a7abda17",
    "files": [
        {
            "sha": "daf220960575732ff37d912ec50bbaa31eb0aeb6",
            "filename": "tests/modeltests/files/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fmodeltests%2Ffiles%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fmodeltests%2Ffiles%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ffiles%2Ftests.py?ref=66021033381f154ddf8a9ecf93fcbb41a7abda17",
            "patch": "@@ -135,6 +135,6 @@ def test_context_manager(self):\n     def test_file_mode(self):\n         # Should not set mode to None if it is not present.\n         # See #14681, stdlib gzip module crashes if mode is set to None\n-        file = SimpleUploadedFile(\"mode_test.txt\", \"content\")\n+        file = SimpleUploadedFile(\"mode_test.txt\", b\"content\")\n         self.assertFalse(hasattr(file, 'mode'))\n         g = gzip.GzipFile(fileobj=file)"
        },
        {
            "sha": "7dc36aa479b1b674588f9ce90d8aeedb7773cc9a",
            "filename": "tests/regressiontests/decorators/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fdecorators%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fdecorators%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdecorators%2Ftests.py?ref=66021033381f154ddf8a9ecf93fcbb41a7abda17",
            "patch": "@@ -220,7 +220,7 @@ def method(self):\n         self.assertEqual(getattr(Test.method, 'myattr2', False), True)\n \n         self.assertEqual(Test.method.__doc__, 'A method')\n-        self.assertEqual(Test.method.__func__.__name__, 'method')\n+        self.assertEqual(Test.method.__name__, 'method')\n \n \n class XFrameOptionsDecoratorsTests(TestCase):"
        },
        {
            "sha": "89d754c58e24cfb4753f4d56e10b239b9ee2b7e3",
            "filename": "tests/regressiontests/fixtures_regress/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py?ref=66021033381f154ddf8a9ecf93fcbb41a7abda17",
            "patch": "@@ -13,7 +13,7 @@\n from django.test import (TestCase, TransactionTestCase, skipIfDBFeature,\n     skipUnlessDBFeature)\n from django.test.utils import override_settings\n-from django.utils.six import StringIO\n+from django.utils.six import PY3, StringIO\n \n from .models import (Animal, Stuff, Absolute, Parent, Child, Article, Widget,\n     Store, Person, Book, NKChild, RefToNKChild, Circle1, Circle2, Circle3,\n@@ -244,7 +244,8 @@ def test_field_value_coerce(self):\n             self.assertEqual(\n                 pre_save_checks,\n                 [\n-                    (\"Count = 42 (<type 'int'>)\", \"Weight = 1.2 (<type 'float'>)\")\n+                    (\"Count = 42 (<%s 'int'>)\" % ('class' if PY3 else 'type'),\n+                     \"Weight = 1.2 (<%s 'float'>)\" % ('class' if PY3 else 'type'))\n                 ]\n             )\n         finally:"
        },
        {
            "sha": "c351509ceeb793d36b02e2a5b9b7b055c91db680",
            "filename": "tests/regressiontests/forms/tests/models.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fforms%2Ftests%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fforms%2Ftests%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fmodels.py?ref=66021033381f154ddf8a9ecf93fcbb41a7abda17",
            "patch": "@@ -178,7 +178,7 @@ class A(models.Model):\n         class Meta:\n             model=A\n \n-        self.assertRaises(ValueError, ModelFormMetaclass, b'Form', (ModelForm,), {'Meta': Meta})\n+        self.assertRaises(ValueError, ModelFormMetaclass, str('Form'), (ModelForm,), {'Meta': Meta})\n \n         class B(models.Model):\n             pass\n@@ -196,4 +196,4 @@ class B(models.Model):\n         class Meta:\n             model=A\n \n-        self.assertTrue(issubclass(ModelFormMetaclass(b'Form', (ModelForm,), {'Meta': Meta}), ModelForm))\n+        self.assertTrue(issubclass(ModelFormMetaclass(str('Form'), (ModelForm,), {'Meta': Meta}), ModelForm))"
        },
        {
            "sha": "5296f6941afb26e8ddbe2dba74404af1eff48496",
            "filename": "tests/regressiontests/generic_views/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py?ref=66021033381f154ddf8a9ecf93fcbb41a7abda17",
            "patch": "@@ -69,7 +69,7 @@ class ViewTest(unittest.TestCase):\n \n     def _assert_simple(self, response):\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'This is a simple view')\n+        self.assertEqual(response.content, b'This is a simple view')\n \n     def test_no_init_kwargs(self):\n         \"\"\""
        },
        {
            "sha": "808582a6a5b1dcd74cd6ce7120f8aa155d7eb9f2",
            "filename": "tests/regressiontests/generic_views/dates.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py?ref=66021033381f154ddf8a9ecf93fcbb41a7abda17",
            "patch": "@@ -480,7 +480,7 @@ def test_day_view_paginated(self):\n \n     def test_next_prev_context(self):\n         res = self.client.get('/dates/books/2008/oct/01/')\n-        self.assertEqual(res.content, \"Archive for Oct. 1, 2008. Previous day is May 1, 2006\")\n+        self.assertEqual(res.content, b\"Archive for Oct. 1, 2008. Previous day is May 1, 2006\")\n \n     def test_custom_month_format(self):\n         res = self.client.get('/dates/books/2008/10/01/')"
        },
        {
            "sha": "ad0ce4197eabe4561d11f3398db663d16d73741e",
            "filename": "tests/regressiontests/httpwrappers/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py?ref=66021033381f154ddf8a9ecf93fcbb41a7abda17",
            "patch": "@@ -260,29 +260,29 @@ def test_dict_behavior(self):\n     def test_non_string_content(self):\n         #Bug 16494: HttpResponse should behave consistently with non-strings\n         r = HttpResponse(12345)\n-        self.assertEqual(r.content, '12345')\n+        self.assertEqual(r.content, b'12345')\n \n         #test content via property\n         r = HttpResponse()\n         r.content = 12345\n-        self.assertEqual(r.content, '12345')\n+        self.assertEqual(r.content, b'12345')\n \n     def test_iter_content(self):\n         r = HttpResponse(['abc', 'def', 'ghi'])\n-        self.assertEqual(r.content, 'abcdefghi')\n+        self.assertEqual(r.content, b'abcdefghi')\n \n         #test iter content via property\n         r = HttpResponse()\n         r.content = ['idan', 'alex', 'jacob']\n-        self.assertEqual(r.content, 'idanalexjacob')\n+        self.assertEqual(r.content, b'idanalexjacob')\n \n         r = HttpResponse()\n         r.content = [1, 2, 3]\n-        self.assertEqual(r.content, '123')\n+        self.assertEqual(r.content, b'123')\n \n         #test retrieval explicitly using iter and odd inputs\n         r = HttpResponse()\n-        r.content = ['1', '2', 3, unichr(1950)]\n+        r.content = ['1', '2', 3, '\\u079e']\n         result = []\n         my_iter = r.__iter__()\n         while True:\n@@ -297,8 +297,8 @@ def test_iter_content(self):\n         #with Content-Encoding header\n         r = HttpResponse([1,1,2,4,8])\n         r['Content-Encoding'] = 'winning'\n-        self.assertEqual(r.content, '11248')\n-        r.content = [unichr(1950),]\n+        self.assertEqual(r.content, b'11248')\n+        r.content = ['\\u079e',]\n         self.assertRaises(UnicodeEncodeError,\n                           getattr, r, 'content')\n "
        },
        {
            "sha": "62bd82f4a7e64828f9fd28e560773e19d8b80f14",
            "filename": "tests/regressiontests/views/tests/shortcuts.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py",
            "raw_url": "https://github.com/django/django/raw/66021033381f154ddf8a9ecf93fcbb41a7abda17/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py?ref=66021033381f154ddf8a9ecf93fcbb41a7abda17",
            "patch": "@@ -12,44 +12,44 @@ class ShortcutTests(TestCase):\n     def test_render_to_response(self):\n         response = self.client.get('/shortcuts/render_to_response/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'FOO.BAR..\\n')\n+        self.assertEqual(response.content, b'FOO.BAR..\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n \n     def test_render_to_response_with_request_context(self):\n         response = self.client.get('/shortcuts/render_to_response/request_context/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'FOO.BAR../path/to/static/media/\\n')\n+        self.assertEqual(response.content, b'FOO.BAR../path/to/static/media/\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n \n     def test_render_to_response_with_mimetype(self):\n         response = self.client.get('/shortcuts/render_to_response/mimetype/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'FOO.BAR..\\n')\n+        self.assertEqual(response.content, b'FOO.BAR..\\n')\n         self.assertEqual(response['Content-Type'], 'application/x-rendertest')\n \n     def test_render(self):\n         response = self.client.get('/shortcuts/render/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'FOO.BAR../path/to/static/media/\\n')\n+        self.assertEqual(response.content, b'FOO.BAR../path/to/static/media/\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n         self.assertEqual(response.context.current_app, None)\n \n     def test_render_with_base_context(self):\n         response = self.client.get('/shortcuts/render/base_context/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'FOO.BAR..\\n')\n+        self.assertEqual(response.content, b'FOO.BAR..\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n \n     def test_render_with_content_type(self):\n         response = self.client.get('/shortcuts/render/content_type/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'FOO.BAR../path/to/static/media/\\n')\n+        self.assertEqual(response.content, b'FOO.BAR../path/to/static/media/\\n')\n         self.assertEqual(response['Content-Type'], 'application/x-rendertest')\n \n     def test_render_with_status(self):\n         response = self.client.get('/shortcuts/render/status/')\n         self.assertEqual(response.status_code, 403)\n-        self.assertEqual(response.content, 'FOO.BAR../path/to/static/media/\\n')\n+        self.assertEqual(response.content, b'FOO.BAR../path/to/static/media/\\n')\n \n     def test_render_with_current_app(self):\n         response = self.client.get('/shortcuts/render/current_app/')"
        }
    ],
    "stats": {
        "total": 47,
        "additions": 24,
        "deletions": 23
    }
}