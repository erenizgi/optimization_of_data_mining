{
    "author": "jphalip",
    "message": "Fixed #17148 -- Fixed the signature of `WizardView.get_context_data()` to play nicer with mixin inheritance. Thanks, Bradley Ayers and Stephan Jaekel.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17231 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "3e790ae63266bee48ad659ddedc792219ee33a0e",
    "files": [
        {
            "sha": "7b15fb5059fc5a52295ea778b4d439b2f033ba66",
            "filename": "django/contrib/formtools/tests/wizard/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/3e790ae63266bee48ad659ddedc792219ee33a0e/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/3e790ae63266bee48ad659ddedc792219ee33a0e/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2F__init__.py?ref=3e790ae63266bee48ad659ddedc792219ee33a0e",
            "patch": "@@ -14,4 +14,5 @@\n     SessionWizardTests,\n     CookieWizardTests,\n     WizardTestKwargs,\n+    WizardTestGenericViewInterface,\n )"
        },
        {
            "sha": "3eb77cb6482d911ad0221409fdabc62abc3b4337",
            "filename": "django/contrib/formtools/tests/wizard/wizardtests/tests.py",
            "status": "modified",
            "additions": 51,
            "deletions": 0,
            "changes": 51,
            "blob_url": "https://github.com/django/django/blob/3e790ae63266bee48ad659ddedc792219ee33a0e/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3e790ae63266bee48ad659ddedc792219ee33a0e/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py?ref=3e790ae63266bee48ad659ddedc792219ee33a0e",
            "patch": "@@ -1,9 +1,12 @@\n from __future__ import with_statement\n import os\n \n+from django import forms\n from django.test import TestCase\n+from django.test.client import RequestFactory\n from django.conf import settings\n from django.contrib.auth.models import User\n+from django.contrib.formtools.wizard.views import CookieWizardView\n \n \n class WizardTests(object):\n@@ -280,3 +283,51 @@ def test_template(self):\n                 TEMPLATE_DIRS=list(settings.TEMPLATE_DIRS) + [templates]):\n             response = self.client.get(self.wizard_url)\n             self.assertTemplateUsed(response, 'other_wizard_form.html')\n+\n+\n+class WizardTestGenericViewInterface(TestCase):\n+    def test_get_context_data_inheritance(self):\n+        class TestWizard(CookieWizardView):\n+            \"\"\"\n+            A subclass that implements ``get_context_data`` using the standard\n+            protocol for generic views (accept only **kwargs).\n+\n+            See ticket #17148.\n+            \"\"\"\n+            def get_context_data(self, **kwargs):\n+                context = super(TestWizard, self).get_context_data(**kwargs)\n+                context['test_key'] = 'test_value'\n+                return context\n+\n+        factory = RequestFactory()\n+        view = TestWizard.as_view([forms.Form])\n+\n+        response = view(factory.get('/'))\n+        self.assertEquals(response.context_data['test_key'], 'test_value')\n+\n+    def test_get_context_data_with_mixin(self):\n+        class AnotherMixin(object):\n+            def get_context_data(self, **kwargs):\n+                context = super(AnotherMixin, self).get_context_data(**kwargs)\n+                context['another_key'] = 'another_value'\n+                return context\n+\n+        class TestWizard(AnotherMixin, CookieWizardView):\n+            \"\"\"\n+            A subclass that implements ``get_context_data`` using the standard\n+            protocol for generic views (accept only **kwargs).\n+\n+            See ticket #17148.\n+            \"\"\"\n+            def get_context_data(self, **kwargs):\n+                context = super(TestWizard, self).get_context_data(**kwargs)\n+                context['test_key'] = 'test_value'\n+                return context\n+\n+        factory = RequestFactory()\n+\n+        view = TestWizard.as_view([forms.Form])\n+\n+        response = view(factory.get('/'))\n+        self.assertEquals(response.context_data['test_key'], 'test_value')\n+        self.assertEquals(response.context_data['another_key'], 'another_value')"
        },
        {
            "sha": "0e1486c0faf3a103c287c178c5840f6715b48dd6",
            "filename": "django/contrib/formtools/wizard/views.py",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/3e790ae63266bee48ad659ddedc792219ee33a0e/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/3e790ae63266bee48ad659ddedc792219ee33a0e/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py?ref=3e790ae63266bee48ad659ddedc792219ee33a0e",
            "patch": "@@ -497,7 +497,7 @@ def get_step_index(self, step=None):\n             step = self.steps.current\n         return self.get_form_list().keyOrder.index(step)\n \n-    def get_context_data(self, form, *args, **kwargs):\n+    def get_context_data(self, form, **kwargs):\n         \"\"\"\n         Returns the template context for a step. You can overwrite this method\n         to add more data for all or some steps. This method returns a\n@@ -514,12 +514,12 @@ def get_context_data(self, form, *args, **kwargs):\n \n             class MyWizard(FormWizard):\n                 def get_context_data(self, form, **kwargs):\n-                    context = super(MyWizard, self).get_context_data(form, **kwargs)\n+                    context = super(MyWizard, self).get_context_data(form=form, **kwargs)\n                     if self.steps.current == 'my_step_name':\n                         context.update({'another_var': True})\n                     return context\n         \"\"\"\n-        context = super(WizardView, self).get_context_data(*args, **kwargs)\n+        context = super(WizardView, self).get_context_data(**kwargs)\n         context.update(self.storage.extra_data)\n         context['wizard'] = {\n             'form': form,\n@@ -535,7 +535,7 @@ def render(self, form=None, **kwargs):\n         Returns a ``HttpResponse`` containing all needed context data.\n         \"\"\"\n         form = form or self.get_form()\n-        context = self.get_context_data(form, **kwargs)\n+        context = self.get_context_data(form=form, **kwargs)\n         return self.render_to_response(context)\n \n     def done(self, form_list, **kwargs):\n@@ -683,4 +683,3 @@ class NamedUrlCookieWizardView(NamedUrlWizardView):\n     A NamedUrlFormWizard with pre-configured CookieStorageBackend.\n     \"\"\"\n     storage_name = 'django.contrib.formtools.wizard.storage.cookie.CookieStorage'\n-"
        },
        {
            "sha": "4c071c155f36377c72d8967f753713484ac80149",
            "filename": "docs/ref/contrib/formtools/form-wizard.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3e790ae63266bee48ad659ddedc792219ee33a0e/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "raw_url": "https://github.com/django/django/raw/3e790ae63266bee48ad659ddedc792219ee33a0e/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt?ref=3e790ae63266bee48ad659ddedc792219ee33a0e",
            "patch": "@@ -309,7 +309,7 @@ Advanced ``WizardView`` methods\n     Example to add extra variables for a specific step::\n \n         def get_context_data(self, form, **kwargs):\n-            context = super(MyWizard, self).get_context_data(form, **kwargs)\n+            context = super(MyWizard, self).get_context_data(form=form, **kwargs)\n             if self.steps.current == 'my_step_name':\n                 context.update({'another_var': True})\n             return context\n@@ -436,7 +436,7 @@ Advanced ``WizardView`` methods\n \n         def render(self, form=None, **kwargs):\n             form = form or self.get_form()\n-            context = self.get_context_data(form, **kwargs)\n+            context = self.get_context_data(form=form, **kwargs)\n             return self.render_to_response(context)\n \n Providing initial data for the forms"
        }
    ],
    "stats": {
        "total": 65,
        "additions": 58,
        "deletions": 7
    }
}