{
    "author": "jezdez",
    "message": "Updated humanize tests to use the FixedOffset timezone from the utils and removed a bit code smell while I'm here.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16232 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "9ad005ec1c50e254dd61bbb1760c524aa01a79e2",
    "files": [
        {
            "sha": "bc1bf26636d590c9e2ca94059b53e7a02d2b9729",
            "filename": "tests/regressiontests/humanize/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 30,
            "changes": 38,
            "blob_url": "https://github.com/django/django/blob/9ad005ec1c50e254dd61bbb1760c524aa01a79e2/tests%2Fregressiontests%2Fhumanize%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9ad005ec1c50e254dd61bbb1760c524aa01a79e2/tests%2Fregressiontests%2Fhumanize%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhumanize%2Ftests.py?ref=9ad005ec1c50e254dd61bbb1760c524aa01a79e2",
            "patch": "@@ -1,46 +1,25 @@\n from __future__ import with_statement\n-from datetime import timedelta, date, datetime, tzinfo, timedelta\n+from datetime import timedelta, date, datetime, tzinfo\n \n-from django.conf import settings\n-from django.template import Template, Context, add_to_builtins\n+from django.template import Template, Context, add_to_builtins, defaultfilters\n from django.test import TestCase\n-from django.utils import translation\n-from django.utils.dateformat import DateFormat\n+from django.utils import translation, tzinfo\n from django.utils.translation import ugettext as _\n from django.utils.html import escape\n-from django.conf import settings\n \n add_to_builtins('django.contrib.humanize.templatetags.humanize')\n \n \n-class FixedOffset(tzinfo):\n-    \"\"\"Fixed offset in hours east from UTC.\"\"\"\n-\n-    def __init__(self, offset, name):\n-        self.__offset = timedelta(hours=offset)\n-        self.__name = name\n-\n-    def utcoffset(self, dt):\n-        return self.__offset\n-\n-    def tzname(self, dt):\n-        return self.__name\n-\n-    def dst(self, dt):\n-        return timedelta(0)\n-\n-\n class HumanizeTests(TestCase):\n \n     def humanize_tester(self, test_list, result_list, method):\n         # Using max below ensures we go through both lists\n         # However, if the lists are not equal length, this raises an exception\n-        for index in xrange(max(len(test_list), len(result_list))):\n-            test_content = test_list[index]\n+        for test_content, result in zip(test_list, result_list):\n             t = Template('{{ test_content|%s }}' % method)\n             rendered = t.render(Context(locals())).strip()\n-            self.assertEqual(rendered, escape(result_list[index]),\n-                             msg=\"%s test failed, produced %s, should've produced %s\" % (method, rendered, result_list[index]))\n+            self.assertEqual(rendered, escape(result),\n+                             msg=\"%s test failed, produced '%s', should've produced '%s'\" % (method, rendered, result))\n \n     def test_ordinal(self):\n         test_list = ('1','2','3','4','11','12',\n@@ -98,7 +77,6 @@ def test_apnumber(self):\n         self.humanize_tester(test_list, result_list, 'apnumber')\n \n     def test_naturalday(self):\n-        from django.template import defaultfilters\n         today = date.today()\n         yesterday = today - timedelta(days=1)\n         tomorrow = today + timedelta(days=1)\n@@ -140,8 +118,8 @@ def test_naturalday_tz(self):\n         from django.contrib.humanize.templatetags.humanize import naturalday\n \n         today = date.today()\n-        tz_one = FixedOffset(-12, 'TzOne')\n-        tz_two = FixedOffset(12, 'TzTwo')\n+        tz_one = tzinfo.FixedOffset(timedelta(hours=-12))\n+        tz_two = tzinfo.FixedOffset(timedelta(hours=12))\n \n         # Can be today or yesterday\n         date_one = datetime(today.year, today.month, today.day, tzinfo=tz_one)"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 8,
        "deletions": 30
    }
}