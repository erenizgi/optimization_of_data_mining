{
    "author": "freakboy3742",
    "message": "Fixed #14797 -- Corrected the handling of get_form_class() when a custom queryset has been defined, but a model hasn't. Thanks to Gabriel Grant for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14809 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "adfd7f81729b3bd7eaff8b86546c34b2207138b3",
    "files": [
        {
            "sha": "f7270433c2b89081d5bba0338853581248a7d791",
            "filename": "django/views/generic/edit.py",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/adfd7f81729b3bd7eaff8b86546c34b2207138b3/django%2Fviews%2Fgeneric%2Fedit.py",
            "raw_url": "https://github.com/django/django/raw/adfd7f81729b3bd7eaff8b86546c34b2207138b3/django%2Fviews%2Fgeneric%2Fedit.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fedit.py?ref=adfd7f81729b3bd7eaff8b86546c34b2207138b3",
            "patch": "@@ -72,10 +72,7 @@ def get_form_class(self):\n         if self.form_class:\n             return self.form_class\n         else:\n-            if self.model is None:\n-                model = self.queryset.model\n-            else:\n-                model = self.model\n+            model = self.get_queryset().model\n             return model_forms.modelform_factory(model)\n \n     def get_form(self, form_class):"
        },
        {
            "sha": "c7c422b24417c298b6ba9551c210401196033713",
            "filename": "tests/regressiontests/generic_views/edit.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/adfd7f81729b3bd7eaff8b86546c34b2207138b3/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py",
            "raw_url": "https://github.com/django/django/raw/adfd7f81729b3bd7eaff8b86546c34b2207138b3/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py?ref=adfd7f81729b3bd7eaff8b86546c34b2207138b3",
            "patch": "@@ -7,6 +7,10 @@\n from regressiontests.generic_views.models import Artist, Author\n from regressiontests.generic_views import views\n \n+class ModelFormMixinTests(TestCase):\n+    def test_get_form(self):\n+        form_class = views.AuthorGetQuerySetFormView().get_form_class()\n+        self.assertEqual(form_class.Meta.model, Author)\n \n class CreateViewTests(TestCase):\n     urls = 'regressiontests.generic_views.urls'"
        },
        {
            "sha": "a4010aa7c92fb862de23e6ff2b660dbc829d67ad",
            "filename": "tests/regressiontests/generic_views/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/adfd7f81729b3bd7eaff8b86546c34b2207138b3/tests%2Fregressiontests%2Fgeneric_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/adfd7f81729b3bd7eaff8b86546c34b2207138b3/tests%2Fregressiontests%2Fgeneric_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Ftests.py?ref=adfd7f81729b3bd7eaff8b86546c34b2207138b3",
            "patch": "@@ -1,5 +1,5 @@\n from regressiontests.generic_views.base import ViewTest, TemplateViewTest, RedirectViewTest\n from regressiontests.generic_views.dates import ArchiveIndexViewTests, YearArchiveViewTests, MonthArchiveViewTests, WeekArchiveViewTests, DayArchiveViewTests, DateDetailViewTests\n from regressiontests.generic_views.detail import DetailViewTest\n-from regressiontests.generic_views.edit import CreateViewTests, UpdateViewTests, DeleteViewTests\n+from regressiontests.generic_views.edit import ModelFormMixinTests, CreateViewTests, UpdateViewTests, DeleteViewTests\n from regressiontests.generic_views.list import ListViewTests"
        },
        {
            "sha": "62cced6aabb4802e785c7e9e8bc89009df3f9928",
            "filename": "tests/regressiontests/generic_views/views.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/adfd7f81729b3bd7eaff8b86546c34b2207138b3/tests%2Fregressiontests%2Fgeneric_views%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/adfd7f81729b3bd7eaff8b86546c34b2207138b3/tests%2Fregressiontests%2Fgeneric_views%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fviews.py?ref=adfd7f81729b3bd7eaff8b86546c34b2207138b3",
            "patch": "@@ -143,3 +143,7 @@ class BookTodayArchive(BookConfig, generic.TodayArchiveView):\n \n class BookDetail(BookConfig, generic.DateDetailView):\n     pass\n+\n+class AuthorGetQuerySetFormView(generic.edit.ModelFormMixin):\n+    def get_queryset(self):\n+        return Author.objects.all()"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 10,
        "deletions": 5
    }
}