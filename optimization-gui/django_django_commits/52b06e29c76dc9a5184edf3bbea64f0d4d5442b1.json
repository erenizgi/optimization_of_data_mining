{
    "author": "aaugustin",
    "message": "Prevented the generic views from automatically creating a HEAD method when there is no GET. Reverts r16105, refs #17449.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17545 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "52b06e29c76dc9a5184edf3bbea64f0d4d5442b1",
    "files": [
        {
            "sha": "6dfbc7a9da042c1fa1b80c5f71f3ee81b91d0d4c",
            "filename": "django/views/generic/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/52b06e29c76dc9a5184edf3bbea64f0d4d5442b1/django%2Fviews%2Fgeneric%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/52b06e29c76dc9a5184edf3bbea64f0d4d5442b1/django%2Fviews%2Fgeneric%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fbase.py?ref=52b06e29c76dc9a5184edf3bbea64f0d4d5442b1",
            "patch": "@@ -43,6 +43,8 @@ def as_view(cls, **initkwargs):\n \n         def view(request, *args, **kwargs):\n             self = cls(**initkwargs)\n+            if hasattr(self, 'get') and not hasattr(self, 'head'):\n+                self.head = self.get\n             return self.dispatch(request, *args, **kwargs)\n \n         # take name and docstring from class\n@@ -76,9 +78,6 @@ def http_method_not_allowed(self, request, *args, **kwargs):\n         )\n         return http.HttpResponseNotAllowed(allowed_methods)\n \n-    def head(self, *args, **kwargs):\n-        return self.get(*args, **kwargs)\n-\n \n class TemplateResponseMixin(object):\n     \"\"\""
        },
        {
            "sha": "e7aeaf9cde65a3b6fa10488b56e3d4ba3b1e563b",
            "filename": "tests/regressiontests/generic_views/base.py",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/52b06e29c76dc9a5184edf3bbea64f0d4d5442b1/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/52b06e29c76dc9a5184edf3bbea64f0d4d5442b1/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py?ref=52b06e29c76dc9a5184edf3bbea64f0d4d5442b1",
            "patch": "@@ -19,9 +19,15 @@ class SimplePostView(SimpleView):\n     post = SimpleView.get\n \n \n+class PostOnlyView(View):\n+    def post(self, request):\n+        return HttpResponse('This view only accepts POST')\n+\n+\n class CustomizableView(SimpleView):\n     parameter = {}\n \n+\n def decorator(view):\n     view.is_decorated = True\n     return view\n@@ -102,12 +108,19 @@ def test_get_only(self):\n \n     def test_get_and_head(self):\n         \"\"\"\n-        Test a view which supplies a GET method also responds correctly to HEAD\n+        Test a view which supplies a GET method also responds correctly to HEAD.\n         \"\"\"\n         self._assert_simple(SimpleView.as_view()(self.rf.get('/')))\n         response = SimpleView.as_view()(self.rf.head('/'))\n         self.assertEqual(response.status_code, 200)\n \n+    def test_head_no_get(self):\n+        \"\"\"\n+        Test a view which supplies no GET method responds to HEAD with HTTP 405.\n+        \"\"\"\n+        response = PostOnlyView.as_view()(self.rf.head('/'))\n+        self.assertEqual(response.status_code, 405)\n+\n     def test_get_and_post(self):\n         \"\"\"\n         Test a view which only allows both GET and POST."
        }
    ],
    "stats": {
        "total": 20,
        "additions": 16,
        "deletions": 4
    }
}