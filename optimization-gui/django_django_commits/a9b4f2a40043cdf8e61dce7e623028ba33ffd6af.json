{
    "author": "carljm",
    "message": "Tweaked r15303 to avoid O(N) lookup of field name. Thanks to Alex's eagle eyes.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15324 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "a9b4f2a40043cdf8e61dce7e623028ba33ffd6af",
    "files": [
        {
            "sha": "178464c74ddd92dc699fcc151f836a58b50d3aa3",
            "filename": "django/db/models/sql/query.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/a9b4f2a40043cdf8e61dce7e623028ba33ffd6af/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/a9b4f2a40043cdf8e61dce7e623028ba33ffd6af/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fquery.py?ref=a9b4f2a40043cdf8e61dce7e623028ba33ffd6af",
            "patch": "@@ -1367,7 +1367,8 @@ def setup_joins(self, names, opts, alias, dupe_multis, allow_many=True,\n                         # In case of a recursive FK, use the to_field for\n                         # reverse lookups as well\n                         if orig_field.model is local_field.model:\n-                            target = opts.get_field(field.rel.field_name)\n+                            target = opts.get_field_by_name(\n+                                field.rel.field_name)[0]\n                         else:\n                             target = opts.pk\n                         orig_opts._join_cache[name] = (table, from_col, to_col,"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}