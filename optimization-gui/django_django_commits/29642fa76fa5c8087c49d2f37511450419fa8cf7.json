{
    "author": "freakboy3742",
    "message": "Refactored views regression tests to isolate generic views from the root URL space.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16000 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "29642fa76fa5c8087c49d2f37511450419fa8cf7",
    "files": [
        {
            "sha": "c608cc1c7fda33dc449fd895838b889b3d0069de",
            "filename": "tests/regressiontests/views/generic_urls.py",
            "status": "added",
            "additions": 117,
            "deletions": 0,
            "changes": 117,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Fgeneric_urls.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Fgeneric_urls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Fgeneric_urls.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -0,0 +1,117 @@\n+# -*- coding:utf-8 -*-\n+from django.conf.urls.defaults import patterns, url\n+\n+from models import *\n+\n+import views\n+\n+\n+date_based_info_dict = {\n+    'queryset': Article.objects.all(),\n+    'date_field': 'date_created',\n+    'month_format': '%m',\n+}\n+\n+object_list_dict = {\n+    'queryset': Article.objects.all(),\n+    'paginate_by': 2,\n+}\n+\n+object_list_no_paginate_by = {\n+    'queryset': Article.objects.all(),\n+}\n+\n+numeric_days_info_dict = dict(date_based_info_dict, day_format='%d')\n+\n+date_based_datefield_info_dict = dict(date_based_info_dict, queryset=DateArticle.objects.all())\n+\n+urlpatterns = patterns('',\n+    (r'^accounts/login/$', 'django.contrib.auth.views.login', {'template_name': 'login.html'}),\n+    (r'^accounts/logout/$', 'django.contrib.auth.views.logout'),\n+\n+    # Special URLs for particular regression cases.\n+    url(u'^中文/$', 'regressiontests.views.views.redirect'),\n+    url(u'^中文/target/$', 'regressiontests.views.views.index_page'),\n+)\n+\n+# Date-based generic views.\n+urlpatterns += patterns('django.views.generic.date_based',\n+    (r'^date_based/object_detail/(?P<year>\\d{4})/(?P<month>\\d{1,2})/(?P<day>\\d{1,2})/(?P<slug>[-\\w]+)/$',\n+        'object_detail',\n+        dict(slug_field='slug', **date_based_info_dict)),\n+    (r'^date_based/object_detail/(?P<year>\\d{4})/(?P<month>\\d{1,2})/(?P<day>\\d{1,2})/(?P<slug>[-\\w]+)/allow_future/$',\n+        'object_detail',\n+        dict(allow_future=True, slug_field='slug', **date_based_info_dict)),\n+    (r'^date_based/archive_day/(?P<year>\\d{4})/(?P<month>\\d{1,2})/(?P<day>\\d{1,2})/$',\n+        'archive_day',\n+        numeric_days_info_dict),\n+    (r'^date_based/archive_month/(?P<year>\\d{4})/(?P<month>\\d{1,2})/$',\n+        'archive_month',\n+        date_based_info_dict),\n+    (r'^date_based/datefield/archive_month/(?P<year>\\d{4})/(?P<month>\\d{1,2})/$',\n+        'archive_month',\n+        date_based_datefield_info_dict),\n+)\n+\n+# crud generic views.\n+urlpatterns += patterns('django.views.generic.create_update',\n+    (r'^create_update/member/create/article/$', 'create_object',\n+        dict(login_required=True, model=Article)),\n+    (r'^create_update/create/article/$', 'create_object',\n+        dict(post_save_redirect='/create_update/view/article/%(slug)s/',\n+             model=Article)),\n+    (r'^create_update/update/article/(?P<slug>[-\\w]+)/$', 'update_object',\n+        dict(post_save_redirect='/create_update/view/article/%(slug)s/',\n+             slug_field='slug', model=Article)),\n+    (r'^create_update/create_custom/article/$', views.custom_create),\n+    (r'^create_update/delete/article/(?P<slug>[-\\w]+)/$', 'delete_object',\n+        dict(post_delete_redirect='/create_update/', slug_field='slug',\n+             model=Article)),\n+\n+    # No post_save_redirect and no get_absolute_url on model.\n+    (r'^create_update/no_redirect/create/article/$', 'create_object',\n+        dict(model=Article)),\n+    (r'^create_update/no_redirect/update/article/(?P<slug>[-\\w]+)/$',\n+        'update_object', dict(slug_field='slug', model=Article)),\n+\n+    # get_absolute_url on model, but no passed post_save_redirect.\n+    (r'^create_update/no_url/create/article/$', 'create_object',\n+        dict(model=UrlArticle)),\n+    (r'^create_update/no_url/update/article/(?P<slug>[-\\w]+)/$',\n+        'update_object', dict(slug_field='slug', model=UrlArticle)),\n+)\n+\n+urlpatterns += patterns('django.views.generic.list_detail',\n+    (r'^object_list/page(?P<page>[\\w]*)/$', 'object_list', object_list_dict),\n+    (r'^object_list_no_paginate_by/page(?P<page>[0-9]+)/$', 'object_list',\n+     object_list_no_paginate_by),\n+)\n+\n+# rediriects, both temporary and permanent, with non-ASCII targets\n+urlpatterns += patterns('django.views.generic.simple',\n+    ('^nonascii_redirect/$', 'redirect_to',\n+        {'url': u'/中文/target/', 'permanent': False}),\n+    ('^permanent_nonascii_redirect/$', 'redirect_to',\n+        {'url': u'/中文/target/', 'permanent': True}),\n+)\n+\n+urlpatterns += patterns('regressiontests.views.views',\n+    (r'^shortcuts/render_to_response/$', 'render_to_response_view'),\n+    (r'^shortcuts/render_to_response/request_context/$', 'render_to_response_view_with_request_context'),\n+    (r'^shortcuts/render_to_response/mimetype/$', 'render_to_response_view_with_mimetype'),\n+    (r'^shortcuts/render/$', 'render_view'),\n+    (r'^shortcuts/render/base_context/$', 'render_view_with_base_context'),\n+    (r'^shortcuts/render/content_type/$', 'render_view_with_content_type'),\n+    (r'^shortcuts/render/status/$', 'render_view_with_status'),\n+    (r'^shortcuts/render/current_app/$', 'render_view_with_current_app'),\n+    (r'^shortcuts/render/current_app_conflict/$', 'render_view_with_current_app_conflict'),\n+)\n+\n+# simple generic views.\n+urlpatterns += patterns('django.views.generic.simple',\n+    (r'^simple/redirect_to/$', 'redirect_to', dict(url='/simple/target/')),\n+    (r'^simple/redirect_to_temp/$', 'redirect_to', dict(url='/simple/target/', permanent=False)),\n+    (r'^simple/redirect_to_none/$', 'redirect_to', dict(url=None)),\n+    (r'^simple/redirect_to_arg/(?P<id>\\d+)/$', 'redirect_to', dict(url='/simple/target_arg/%(id)s/')),\n+    (r'^simple/redirect_to_query/$', 'redirect_to', dict(url='/simple/target/', query_string=True)),\n+)"
        },
        {
            "sha": "9aba3039ac8ad2992983c82a8849106feaeda443",
            "filename": "tests/regressiontests/views/tests/debug.py",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -1,6 +1,5 @@\n import inspect\n import sys\n-import warnings\n \n from django.conf import settings\n from django.core.files.uploadedfile import SimpleUploadedFile\n@@ -14,16 +13,6 @@\n \n class DebugViewTests(TestCase):\n     def setUp(self):\n-        self.save_warnings_state()\n-        warnings.filterwarnings('ignore', category=DeprecationWarning,\n-                                module='django.views.generic.simple')\n-        warnings.filterwarnings('ignore', category=DeprecationWarning,\n-                                module='django.views.generic.create_update')\n-        warnings.filterwarnings('ignore', category=DeprecationWarning,\n-                                module='django.views.generic.date_based')\n-        warnings.filterwarnings('ignore', category=DeprecationWarning,\n-                                module='django.views.generic.list_detail')\n-\n         self.old_debug = settings.DEBUG\n         settings.DEBUG = True\n         self.old_template_debug = settings.TEMPLATE_DEBUG\n@@ -32,7 +21,6 @@ def setUp(self):\n     def tearDown(self):\n         settings.DEBUG = self.old_debug\n         settings.TEMPLATE_DEBUG = self.old_template_debug\n-        self.restore_warnings_state()\n \n     def test_files(self):\n         response = self.client.get('/views/raises/')"
        },
        {
            "sha": "902ba667dab4e0ef432c28417001149d9ff7a92e",
            "filename": "tests/regressiontests/views/tests/generic/create_update.py",
            "status": "modified",
            "additions": 24,
            "deletions": 21,
            "changes": 45,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fcreate_update.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fcreate_update.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fcreate_update.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -6,8 +6,8 @@\n from regressiontests.views.models import Article, UrlArticle\n \n class CreateObjectTest(TestCase):\n-\n     fixtures = ['testdata.json']\n+    urls = 'regressiontests.views.generic_urls'\n \n     def setUp(self):\n         self.save_warnings_state()\n@@ -23,7 +23,7 @@ def test_login_required_view(self):\n         login_required view gets redirected to the login page and that\n         an authenticated user is let through.\n         \"\"\"\n-        view_url = '/views/create_update/member/create/article/'\n+        view_url = '/create_update/member/create/article/'\n         response = self.client.get(view_url)\n         self.assertRedirects(response, '/accounts/login/?next=%s' % view_url)\n         # Now login and try again.\n@@ -37,7 +37,7 @@ def test_create_article_display_page(self):\n         \"\"\"\n         Ensures the generic view returned the page and contains a form.\n         \"\"\"\n-        view_url = '/views/create_update/create/article/'\n+        view_url = '/create_update/create/article/'\n         response = self.client.get(view_url)\n         self.assertEqual(response.status_code, 200)\n         self.assertTemplateUsed(response, 'views/article_form.html')\n@@ -48,7 +48,7 @@ def test_create_article_with_errors(self):\n         \"\"\"\n         POSTs a form that contains validation errors.\n         \"\"\"\n-        view_url = '/views/create_update/create/article/'\n+        view_url = '/create_update/create/article/'\n         num_articles = Article.objects.count()\n         response = self.client.post(view_url, {\n             'title': 'My First Article',\n@@ -63,20 +63,20 @@ def test_create_custom_save_article(self):\n         Creates a new article using a custom form class with a save method\n         that alters the slug entered.\n         \"\"\"\n-        view_url = '/views/create_update/create_custom/article/'\n+        view_url = '/create_update/create_custom/article/'\n         response = self.client.post(view_url, {\n             'title': 'Test Article',\n             'slug': 'this-should-get-replaced',\n             'author': 1,\n             'date_created': datetime.datetime(2007, 6, 25),\n         })\n         self.assertRedirects(response,\n-            '/views/create_update/view/article/some-other-slug/',\n+            '/create_update/view/article/some-other-slug/',\n             target_status_code=404)\n \n class UpdateDeleteObjectTest(TestCase):\n-\n     fixtures = ['testdata.json']\n+    urls = 'regressiontests.views.generic_urls'\n \n     def setUp(self):\n         self.save_warnings_state()\n@@ -90,7 +90,7 @@ def test_update_object_form_display(self):\n         \"\"\"\n         Verifies that the form was created properly and with initial values.\n         \"\"\"\n-        response = self.client.get('/views/create_update/update/article/old_article/')\n+        response = self.client.get('/create_update/update/article/old_article/')\n         self.assertTemplateUsed(response, 'views/article_form.html')\n         self.assertEqual(unicode(response.context['form']['title']),\n             u'<input id=\"id_title\" type=\"text\" name=\"title\" value=\"Old Article\" maxlength=\"100\" />')\n@@ -99,7 +99,7 @@ def test_update_object(self):\n         \"\"\"\n         Verifies the updating of an Article.\n         \"\"\"\n-        response = self.client.post('/views/create_update/update/article/old_article/', {\n+        response = self.client.post('/create_update/update/article/old_article/', {\n             'title': 'Another Article',\n             'slug': 'another-article-slug',\n             'author': 1,\n@@ -112,14 +112,14 @@ def test_delete_object_confirm(self):\n         \"\"\"\n         Verifies the confirm deletion page is displayed using a GET.\n         \"\"\"\n-        response = self.client.get('/views/create_update/delete/article/old_article/')\n+        response = self.client.get('/create_update/delete/article/old_article/')\n         self.assertTemplateUsed(response, 'views/article_confirm_delete.html')\n \n     def test_delete_object(self):\n         \"\"\"\n         Verifies the object actually gets deleted on a POST.\n         \"\"\"\n-        view_url = '/views/create_update/delete/article/old_article/'\n+        view_url = '/create_update/delete/article/old_article/'\n         response = self.client.post(view_url)\n         try:\n             Article.objects.get(slug='old_article')\n@@ -137,14 +137,15 @@ class PostSaveRedirectTests(TestCase):\n \n     fixtures = ['testdata.json']\n     article_model = Article\n+    urls = 'regressiontests.views.generic_urls'\n \n-    create_url = '/views/create_update/create/article/'\n-    update_url = '/views/create_update/update/article/old_article/'\n-    delete_url = '/views/create_update/delete/article/old_article/'\n+    create_url = '/create_update/create/article/'\n+    update_url = '/create_update/update/article/old_article/'\n+    delete_url = '/create_update/delete/article/old_article/'\n \n-    create_redirect = '/views/create_update/view/article/my-first-article/'\n-    update_redirect = '/views/create_update/view/article/another-article-slug/'\n-    delete_redirect = '/views/create_update/'\n+    create_redirect = '/create_update/view/article/my-first-article/'\n+    update_redirect = '/create_update/view/article/another-article-slug/'\n+    delete_redirect = '/create_update/'\n \n     def setUp(self):\n         self.save_warnings_state()\n@@ -194,9 +195,10 @@ class NoPostSaveNoAbsoluteUrl(PostSaveRedirectTests):\n     method exists on the Model that the view raises an ImproperlyConfigured\n     error.\n     \"\"\"\n+    urls = 'regressiontests.views.generic_urls'\n \n-    create_url = '/views/create_update/no_redirect/create/article/'\n-    update_url = '/views/create_update/no_redirect/update/article/old_article/'\n+    create_url = '/create_update/no_redirect/create/article/'\n+    update_url = '/create_update/no_redirect/update/article/old_article/'\n \n     def setUp(self):\n         self.save_warnings_state()\n@@ -226,12 +228,13 @@ class AbsoluteUrlNoPostSave(PostSaveRedirectTests):\n     Tests that the views redirect to the Model's get_absolute_url when no\n     post_save_redirect is passed.\n     \"\"\"\n+    urls = 'regressiontests.views.generic_urls'\n \n     # Article model with get_absolute_url method.\n     article_model = UrlArticle\n \n-    create_url = '/views/create_update/no_url/create/article/'\n-    update_url = '/views/create_update/no_url/update/article/old_article/'\n+    create_url = '/create_update/no_url/create/article/'\n+    update_url = '/create_update/no_url/update/article/old_article/'\n \n     create_redirect = '/urlarticles/my-first-article/'\n     update_redirect = '/urlarticles/another-article-slug/'"
        },
        {
            "sha": "96555e5a9f566f311854ef1c03798a3462caeb69",
            "filename": "tests/regressiontests/views/tests/generic/date_based.py",
            "status": "modified",
            "additions": 22,
            "deletions": 16,
            "changes": 38,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fdate_based.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fdate_based.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fdate_based.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -8,6 +8,8 @@\n \n class ObjectDetailTest(TestCase):\n     fixtures = ['testdata.json']\n+    urls = 'regressiontests.views.generic_urls'\n+\n     def setUp(self):\n         self.save_warnings_state()\n         warnings.filterwarnings('ignore', category=DeprecationWarning,\n@@ -22,29 +24,31 @@ def tearDown(self):\n \n     def test_finds_past(self):\n         \"date_based.object_detail can view a page in the past\"\n-        response = self.client.get('/views/date_based/object_detail/2001/01/01/old_article/')\n+        response = self.client.get('/date_based/object_detail/2001/01/01/old_article/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['object'].title, \"Old Article\")\n \n     def test_object_detail_finds_today(self):\n         \"date_based.object_detail can view a page from today\"\n         today_url = datetime.now().strftime('%Y/%m/%d')\n-        response = self.client.get('/views/date_based/object_detail/%s/current_article/' % today_url)\n+        response = self.client.get('/date_based/object_detail/%s/current_article/' % today_url)\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['object'].title, \"Current Article\")\n \n     def test_object_detail_ignores_future(self):\n         \"date_based.object_detail can view a page from the future, but only if allowed.\"\n-        response = self.client.get('/views/date_based/object_detail/3000/01/01/future_article/')\n+        response = self.client.get('/date_based/object_detail/3000/01/01/future_article/')\n         self.assertEqual(response.status_code, 404)\n \n     def test_object_detail_allowed_future_if_enabled(self):\n         \"date_based.object_detail can view a page from the future if explicitly allowed.\"\n-        response = self.client.get('/views/date_based/object_detail/3000/01/01/future_article/allow_future/')\n+        response = self.client.get('/date_based/object_detail/3000/01/01/future_article/allow_future/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['object'].title, \"Future Article\")\n \n class MonthArchiveTest(TestCase):\n+    urls = 'regressiontests.views.generic_urls'\n+\n     def setUp(self):\n         self.save_warnings_state()\n         warnings.filterwarnings('ignore', category=DeprecationWarning,\n@@ -66,52 +70,52 @@ def test_archive_month_includes_only_month(self):\n \n         article.date_created = first_second_of_feb\n         article.save()\n-        response = self.client.get('/views/date_based/archive_month/2004/02/')\n+        response = self.client.get('/date_based/archive_month/2004/02/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['next_month'], date(2004, 3, 1))\n         self.assertEqual(response.context['previous_month'], date(2004, 1, 1))\n \n         article.date_created = first_second_of_feb-two_seconds\n         article.save()\n-        response = self.client.get('/views/date_based/archive_month/2004/02/')\n+        response = self.client.get('/date_based/archive_month/2004/02/')\n         self.assertEqual(response.status_code, 404)\n \n         article.date_created = first_second_of_mar-two_seconds\n         article.save()\n-        response = self.client.get('/views/date_based/archive_month/2004/02/')\n+        response = self.client.get('/date_based/archive_month/2004/02/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['next_month'], date(2004, 3, 1))\n         self.assertEqual(response.context['previous_month'], date(2004, 1, 1))\n \n         article.date_created = first_second_of_mar\n         article.save()\n-        response = self.client.get('/views/date_based/archive_month/2004/02/')\n+        response = self.client.get('/date_based/archive_month/2004/02/')\n         self.assertEqual(response.status_code, 404)\n \n         article2 = DateArticle(title=\"example\", author=author)\n \n         article2.date_created = first_second_of_feb.date()\n         article2.save()\n-        response = self.client.get('/views/date_based/datefield/archive_month/2004/02/')\n+        response = self.client.get('/date_based/datefield/archive_month/2004/02/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['next_month'], date(2004, 3, 1))\n         self.assertEqual(response.context['previous_month'], date(2004, 1, 1))\n \n         article2.date_created = (first_second_of_feb-two_seconds).date()\n         article2.save()\n-        response = self.client.get('/views/date_based/datefield/archive_month/2004/02/')\n+        response = self.client.get('/date_based/datefield/archive_month/2004/02/')\n         self.assertEqual(response.status_code, 404)\n \n         article2.date_created = (first_second_of_mar-two_seconds).date()\n         article2.save()\n-        response = self.client.get('/views/date_based/datefield/archive_month/2004/02/')\n+        response = self.client.get('/date_based/datefield/archive_month/2004/02/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['next_month'], date(2004, 3, 1))\n         self.assertEqual(response.context['previous_month'], date(2004, 1, 1))\n \n         article2.date_created = first_second_of_mar.date()\n         article2.save()\n-        response = self.client.get('/views/date_based/datefield/archive_month/2004/02/')\n+        response = self.client.get('/date_based/datefield/archive_month/2004/02/')\n         self.assertEqual(response.status_code, 404)\n \n         now = datetime.now()\n@@ -122,7 +126,7 @@ def test_archive_month_includes_only_month(self):\n             prev_month = prev_month.replace(month=prev_month.month-1)\n         article2.date_created = now\n         article2.save()\n-        response = self.client.get('/views/date_based/datefield/archive_month/%s/' % now.strftime('%Y/%m'))\n+        response = self.client.get('/date_based/datefield/archive_month/%s/' % now.strftime('%Y/%m'))\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['next_month'], None)\n         self.assertEqual(response.context['previous_month'], prev_month)\n@@ -134,16 +138,18 @@ def test_archive_month_date_list(self):\n         date2 = datetime(2010, 1, 2, 0, 0, 0)\n         Article.objects.create(title='example1', author=author, date_created=date1)\n         Article.objects.create(title='example2', author=author, date_created=date2)\n-        response = self.client.get('/views/date_based/archive_month/2010/1/')\n+        response = self.client.get('/date_based/archive_month/2010/1/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(len(response.context['date_list']), 2)\n         self.assertEqual(response.context['date_list'][0], date1)\n         # Checks that the same date is not included more than once in the list\n         Article.objects.create(title='example2', author=author, date_created=date2)\n-        response = self.client.get('/views/date_based/archive_month/2010/1/')\n+        response = self.client.get('/date_based/archive_month/2010/1/')\n         self.assertEqual(len(response.context['date_list']), 2)\n \n class DayArchiveTests(TestCase):\n+    urls = 'regressiontests.views.generic_urls'\n+\n     def setUp(self):\n         self.save_warnings_state()\n         warnings.filterwarnings('ignore', category=DeprecationWarning,\n@@ -160,6 +166,6 @@ def test_year_month_day_format(self):\n         \"\"\"\n         author = Author.objects.create(name=\"John Smith\")\n         article = Article.objects.create(title=\"example\", author=author, date_created=datetime(2004, 1, 21, 0, 0, 1))\n-        response = self.client.get('/views/date_based/archive_day/2004/1/21/')\n+        response = self.client.get('/date_based/archive_day/2004/1/21/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['object_list'][0], article)"
        },
        {
            "sha": "3fa871a84da09587f872e49fef0b84f56c010116",
            "filename": "tests/regressiontests/views/tests/generic/object_list.py",
            "status": "modified",
            "additions": 11,
            "deletions": 9,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fobject_list.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fobject_list.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fobject_list.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -5,10 +5,12 @@\n \n class ObjectListTest(TestCase):\n     fixtures = ['testdata.json']\n+    urls = 'regressiontests.views.generic_urls'\n+\n     def setUp(self):\n         self.save_warnings_state()\n         warnings.filterwarnings('ignore', category=DeprecationWarning,\n-                                module='django.views.generic.object_list')\n+                                module='django.views.generic.list_detail')\n \n     def tearDown(self):\n         self.restore_warnings_state()\n@@ -26,20 +28,20 @@ def check_pagination(self, url, expected_status_code, object_count=None):\n \n     def test_finds_pages(self):\n         # Check page count doesn't start at 0.\n-        self.check_pagination('/views/object_list/page0/', 404)\n+        self.check_pagination('/object_list/page0/', 404)\n \n         # Check basic pages.\n-        self.check_pagination('/views/object_list/page/', 200, 2)\n-        self.check_pagination('/views/object_list/page1/', 200, 2)\n-        self.check_pagination('/views/object_list/page2/', 200, 1)\n-        self.check_pagination('/views/object_list/page3/', 404)\n+        self.check_pagination('/object_list/page/', 200, 2)\n+        self.check_pagination('/object_list/page1/', 200, 2)\n+        self.check_pagination('/object_list/page2/', 200, 1)\n+        self.check_pagination('/object_list/page3/', 404)\n \n         # Check the special \"last\" page.\n-        self.check_pagination('/views/object_list/pagelast/', 200, 1)\n-        self.check_pagination('/views/object_list/pagenotlast/', 404)\n+        self.check_pagination('/object_list/pagelast/', 200, 1)\n+        self.check_pagination('/object_list/pagenotlast/', 404)\n \n     def test_no_paginate_by(self):\n         # Ensure that the view isn't paginated by default.\n-        url = '/views/object_list_no_paginate_by/page1/'\n+        url = '/object_list_no_paginate_by/page1/'\n         response = self.check_pagination(url, 200)\n         self.assertEqual(response.context['is_paginated'], False)"
        },
        {
            "sha": "6bf6f508323dbc93f4505f0626f1081b6fbf3315",
            "filename": "tests/regressiontests/views/tests/generic/simple.py",
            "status": "modified",
            "additions": 13,
            "deletions": 11,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fsimple.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fsimple.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fsimple.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -4,6 +4,8 @@\n from django.test import TestCase\n \n class RedirectToTest(TestCase):\n+    urls = 'regressiontests.views.generic_urls'\n+\n     def setUp(self):\n         self.save_warnings_state()\n         warnings.filterwarnings('ignore', category=DeprecationWarning,\n@@ -14,34 +16,34 @@ def tearDown(self):\n \n     def test_redirect_to_returns_permanent_redirect(self):\n         \"simple.redirect_to returns a permanent redirect (301) by default\"\n-        response = self.client.get('/views/simple/redirect_to/')\n+        response = self.client.get('/simple/redirect_to/')\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual('http://testserver/views/simple/target/', response['Location'])\n+        self.assertEqual('http://testserver/simple/target/', response['Location'])\n \n     def test_redirect_to_can_return_a_temporary_redirect(self):\n         \"simple.redirect_to returns a temporary redirect (302) when explicitely asked to\"\n-        response = self.client.get('/views/simple/redirect_to_temp/')\n+        response = self.client.get('/simple/redirect_to_temp/')\n         self.assertEqual(response.status_code, 302)\n-        self.assertEqual('http://testserver/views/simple/target/', response['Location'])\n+        self.assertEqual('http://testserver/simple/target/', response['Location'])\n \n     def test_redirect_to_on_empty_url_returns_gone(self):\n         \"simple.redirect_to returns resource gone (410) when given a None url\"\n-        response = self.client.get('/views/simple/redirect_to_none/')\n+        response = self.client.get('/simple/redirect_to_none/')\n         self.assertEqual(response.status_code, 410)\n \n     def test_redirect_to_allows_formatted_url_string(self):\n         \"simple.redirect_to uses string interpolation on target url for keyword args\"\n-        response = self.client.get('/views/simple/redirect_to_arg/42/')\n+        response = self.client.get('/simple/redirect_to_arg/42/')\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual('http://testserver/views/simple/target_arg/42/', response['Location'])\n+        self.assertEqual('http://testserver/simple/target_arg/42/', response['Location'])\n \n     def test_redirect_to_allows_query_string_to_be_passed(self):\n         \"simple.redirect_to configured with query_string=True passes on any query string\"\n         # the default is to not forward the query string\n-        response = self.client.get('/views/simple/redirect_to/?param1=foo&param2=bar')\n+        response = self.client.get('/simple/redirect_to/?param1=foo&param2=bar')\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual('http://testserver/views/simple/target/', response['Location'])\n+        self.assertEqual('http://testserver/simple/target/', response['Location'])\n         # views configured with query_string=True however passes the query string along\n-        response = self.client.get('/views/simple/redirect_to_query/?param1=foo&param2=bar')\n+        response = self.client.get('/simple/redirect_to_query/?param1=foo&param2=bar')\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual('http://testserver/views/simple/target/?param1=foo&param2=bar', response['Location'])\n+        self.assertEqual('http://testserver/simple/target/?param1=foo&param2=bar', response['Location'])"
        },
        {
            "sha": "24bf6bbae4a48788aa628711e6e7784805674e4e",
            "filename": "tests/regressiontests/views/tests/shortcuts.py",
            "status": "modified",
            "additions": 11,
            "deletions": 9,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -4,6 +4,8 @@\n from django.test import TestCase\n \n class ShortcutTests(TestCase):\n+    urls = 'regressiontests.views.generic_urls'\n+\n     def setUp(self):\n         self.save_warnings_state()\n         warnings.filterwarnings('ignore', category=DeprecationWarning,\n@@ -25,51 +27,51 @@ def tearDown(self):\n         settings.TEMPLATE_CONTEXT_PROCESSORS = self.old_TEMPLATE_CONTEXT_PROCESSORS\n \n     def test_render_to_response(self):\n-        response = self.client.get('/views/shortcuts/render_to_response/')\n+        response = self.client.get('/shortcuts/render_to_response/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.content, 'FOO.BAR..\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n \n     def test_render_to_response_with_request_context(self):\n-        response = self.client.get('/views/shortcuts/render_to_response/request_context/')\n+        response = self.client.get('/shortcuts/render_to_response/request_context/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.content, 'FOO.BAR../path/to/static/media/\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n \n     def test_render_to_response_with_mimetype(self):\n-        response = self.client.get('/views/shortcuts/render_to_response/mimetype/')\n+        response = self.client.get('/shortcuts/render_to_response/mimetype/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.content, 'FOO.BAR..\\n')\n         self.assertEqual(response['Content-Type'], 'application/x-rendertest')\n \n     def test_render(self):\n-        response = self.client.get('/views/shortcuts/render/')\n+        response = self.client.get('/shortcuts/render/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.content, 'FOO.BAR../path/to/static/media/\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n         self.assertEqual(response.context.current_app, None)\n \n     def test_render_with_base_context(self):\n-        response = self.client.get('/views/shortcuts/render/base_context/')\n+        response = self.client.get('/shortcuts/render/base_context/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.content, 'FOO.BAR..\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n \n     def test_render_with_content_type(self):\n-        response = self.client.get('/views/shortcuts/render/content_type/')\n+        response = self.client.get('/shortcuts/render/content_type/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.content, 'FOO.BAR../path/to/static/media/\\n')\n         self.assertEqual(response['Content-Type'], 'application/x-rendertest')\n \n     def test_render_with_status(self):\n-        response = self.client.get('/views/shortcuts/render/status/')\n+        response = self.client.get('/shortcuts/render/status/')\n         self.assertEqual(response.status_code, 403)\n         self.assertEqual(response.content, 'FOO.BAR../path/to/static/media/\\n')\n \n     def test_render_with_current_app(self):\n-        response = self.client.get('/views/shortcuts/render/current_app/')\n+        response = self.client.get('/shortcuts/render/current_app/')\n         self.assertEqual(response.context.current_app, \"foobar_app\")\n \n     def test_render_with_current_app_conflict(self):\n-        self.assertRaises(ValueError, self.client.get, '/views/shortcuts/render/current_app_conflict/')\n+        self.assertRaises(ValueError, self.client.get, '/shortcuts/render/current_app_conflict/')\n "
        },
        {
            "sha": "7855704bedbd09af67fff72f436d50d521b0d433",
            "filename": "tests/regressiontests/views/tests/specials.py",
            "status": "modified",
            "additions": 16,
            "deletions": 4,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fspecials.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Ftests%2Fspecials.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fspecials.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -1,11 +1,23 @@\n # coding: utf-8\n+import warnings \n+\n from django.test import TestCase\n \n+\n class URLHandling(TestCase):\n     \"\"\"\n     Tests for URL handling in views and responses.\n     \"\"\"\n-    redirect_target = \"/views/%E4%B8%AD%E6%96%87/target/\"\n+    urls = 'regressiontests.views.generic_urls'\n+    redirect_target = \"/%E4%B8%AD%E6%96%87/target/\"\n+\n+    def setUp(self):\n+        self.save_warnings_state()\n+        warnings.filterwarnings('ignore', category=DeprecationWarning,\n+                                module='django.views.generic.simple')\n+\n+    def tearDown(self):\n+        self.restore_warnings_state()\n \n     def test_combining_redirect(self):\n         \"\"\"\n@@ -15,21 +27,21 @@ def test_combining_redirect(self):\n         characters so this test ensures the creation of the full path with a\n         base non-ASCII part is handled correctly.\n         \"\"\"\n-        response = self.client.get(u'/views/中文/')\n+        response = self.client.get(u'/中文/')\n         self.assertRedirects(response, self.redirect_target)\n \n     def test_nonascii_redirect(self):\n         \"\"\"\n         Tests that a non-ASCII argument to HttpRedirect is handled properly.\n         \"\"\"\n-        response = self.client.get('/views/nonascii_redirect/')\n+        response = self.client.get('/nonascii_redirect/')\n         self.assertRedirects(response, self.redirect_target)\n \n     def test_permanent_nonascii_redirect(self):\n         \"\"\"\n         Tests that a non-ASCII argument to HttpPermanentRedirect is handled\n         properly.\n         \"\"\"\n-        response = self.client.get('/views/permanent_nonascii_redirect/')\n+        response = self.client.get('/permanent_nonascii_redirect/')\n         self.assertRedirects(response, self.redirect_target, status_code=301)\n "
        },
        {
            "sha": "32f03b444e5407c069adec15216582fa1de54b0d",
            "filename": "tests/regressiontests/views/urls.py",
            "status": "modified",
            "additions": 4,
            "deletions": 110,
            "changes": 114,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Furls.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -3,7 +3,6 @@\n \n from django.conf.urls.defaults import *\n \n-from models import *\n import views\n \n \n@@ -31,25 +30,6 @@\n     'packages': ('regressiontests.views.app3', 'regressiontests.views.app4'),\n }\n \n-date_based_info_dict = {\n-    'queryset': Article.objects.all(),\n-    'date_field': 'date_created',\n-    'month_format': '%m',\n-}\n-\n-object_list_dict = {\n-    'queryset': Article.objects.all(),\n-    'paginate_by': 2,\n-}\n-\n-object_list_no_paginate_by = {\n-    'queryset': Article.objects.all(),\n-}\n-\n-numeric_days_info_dict = dict(date_based_info_dict, day_format='%d')\n-\n-date_based_datefield_info_dict = dict(date_based_info_dict, queryset=DateArticle.objects.all())\n-\n urlpatterns = patterns('',\n     (r'^$', views.index_page),\n \n@@ -58,6 +38,10 @@\n     (r'^non_existing_url/', 'django.views.defaults.page_not_found'),\n     (r'^server_error/', 'django.views.defaults.server_error'),\n \n+    # a view that raises an exception for the debug view\n+    (r'^raises/$', views.raises),\n+    (r'^raises404/$', views.raises404),\n+\n     # i18n views\n     (r'^i18n/', include('django.conf.urls.i18n')),\n     (r'^jsi18n/$', 'django.views.i18n.javascript_catalog', js_info_dict),\n@@ -67,100 +51,10 @@\n \n     # Static views\n     (r'^site_media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': media_dir}),\n-\n-    # Special URLs for particular regression cases.\n-    url(u'^中文/$', 'regressiontests.views.views.redirect'),\n-    url(u'^中文/target/$', 'regressiontests.views.views.index_page'),\n-)\n-\n-# Date-based generic views.\n-urlpatterns += patterns('django.views.generic.date_based',\n-    (r'^date_based/object_detail/(?P<year>\\d{4})/(?P<month>\\d{1,2})/(?P<day>\\d{1,2})/(?P<slug>[-\\w]+)/$',\n-        'object_detail',\n-        dict(slug_field='slug', **date_based_info_dict)),\n-    (r'^date_based/object_detail/(?P<year>\\d{4})/(?P<month>\\d{1,2})/(?P<day>\\d{1,2})/(?P<slug>[-\\w]+)/allow_future/$',\n-        'object_detail',\n-        dict(allow_future=True, slug_field='slug', **date_based_info_dict)),\n-    (r'^date_based/archive_day/(?P<year>\\d{4})/(?P<month>\\d{1,2})/(?P<day>\\d{1,2})/$',\n-        'archive_day',\n-        numeric_days_info_dict),\n-    (r'^date_based/archive_month/(?P<year>\\d{4})/(?P<month>\\d{1,2})/$',\n-        'archive_month',\n-        date_based_info_dict),\n-    (r'^date_based/datefield/archive_month/(?P<year>\\d{4})/(?P<month>\\d{1,2})/$',\n-        'archive_month',\n-        date_based_datefield_info_dict),\n-)\n-\n-# crud generic views.\n-urlpatterns += patterns('django.views.generic.create_update',\n-    (r'^create_update/member/create/article/$', 'create_object',\n-        dict(login_required=True, model=Article)),\n-    (r'^create_update/create/article/$', 'create_object',\n-        dict(post_save_redirect='/views/create_update/view/article/%(slug)s/',\n-             model=Article)),\n-    (r'^create_update/update/article/(?P<slug>[-\\w]+)/$', 'update_object',\n-        dict(post_save_redirect='/views/create_update/view/article/%(slug)s/',\n-             slug_field='slug', model=Article)),\n-    (r'^create_update/create_custom/article/$', views.custom_create),\n-    (r'^create_update/delete/article/(?P<slug>[-\\w]+)/$', 'delete_object',\n-        dict(post_delete_redirect='/views/create_update/', slug_field='slug',\n-             model=Article)),\n-\n-    # No post_save_redirect and no get_absolute_url on model.\n-    (r'^create_update/no_redirect/create/article/$', 'create_object',\n-        dict(model=Article)),\n-    (r'^create_update/no_redirect/update/article/(?P<slug>[-\\w]+)/$',\n-        'update_object', dict(slug_field='slug', model=Article)),\n-\n-    # get_absolute_url on model, but no passed post_save_redirect.\n-    (r'^create_update/no_url/create/article/$', 'create_object',\n-        dict(model=UrlArticle)),\n-    (r'^create_update/no_url/update/article/(?P<slug>[-\\w]+)/$',\n-        'update_object', dict(slug_field='slug', model=UrlArticle)),\n-)\n-\n-urlpatterns += patterns('django.views.generic.list_detail',\n-    (r'^object_list/page(?P<page>[\\w]*)/$', 'object_list', object_list_dict),\n-    (r'^object_list_no_paginate_by/page(?P<page>[0-9]+)/$', 'object_list',\n-     object_list_no_paginate_by),\n-)\n-\n-# a view that raises an exception for the debug view\n-urlpatterns += patterns('',\n-    (r'^raises/$', views.raises),\n-    (r'^raises404/$', views.raises404),\n-)\n-\n-# rediriects, both temporary and permanent, with non-ASCII targets\n-urlpatterns += patterns('django.views.generic.simple',\n-    ('^nonascii_redirect/$', 'redirect_to',\n-        {'url': u'/views/中文/target/', 'permanent': False}),\n-    ('^permanent_nonascii_redirect/$', 'redirect_to',\n-        {'url': u'/views/中文/target/', 'permanent': True}),\n )\n \n urlpatterns += patterns('regressiontests.views.views',\n     url(r'view_exception/(?P<n>\\d+)/$', 'view_exception', name='view_exception'),\n     url(r'template_exception/(?P<n>\\d+)/$', 'template_exception', name='template_exception'),\n     url(r'^raises_template_does_not_exist/$', 'raises_template_does_not_exist', name='raises_template_does_not_exist'),\n-\n-    (r'^shortcuts/render_to_response/$', 'render_to_response_view'),\n-    (r'^shortcuts/render_to_response/request_context/$', 'render_to_response_view_with_request_context'),\n-    (r'^shortcuts/render_to_response/mimetype/$', 'render_to_response_view_with_mimetype'),\n-    (r'^shortcuts/render/$', 'render_view'),\n-    (r'^shortcuts/render/base_context/$', 'render_view_with_base_context'),\n-    (r'^shortcuts/render/content_type/$', 'render_view_with_content_type'),\n-    (r'^shortcuts/render/status/$', 'render_view_with_status'),\n-    (r'^shortcuts/render/current_app/$', 'render_view_with_current_app'),\n-    (r'^shortcuts/render/current_app_conflict/$', 'render_view_with_current_app_conflict'),\n-)\n-\n-# simple generic views.\n-urlpatterns += patterns('django.views.generic.simple',\n-    (r'^simple/redirect_to/$', 'redirect_to', dict(url='/views/simple/target/')),\n-    (r'^simple/redirect_to_temp/$', 'redirect_to', dict(url='/views/simple/target/', permanent=False)),\n-    (r'^simple/redirect_to_none/$', 'redirect_to', dict(url=None)),\n-    (r'^simple/redirect_to_arg/(?P<id>\\d+)/$', 'redirect_to', dict(url='/views/simple/target_arg/%(id)s/')),\n-    (r'^simple/redirect_to_query/$', 'redirect_to', dict(url='/views/simple/target/', query_string=True)),\n )"
        },
        {
            "sha": "11d289f2bbd70500c79d4d6d3de4f8a9599ac246",
            "filename": "tests/regressiontests/views/views.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/29642fa76fa5c8087c49d2f37511450419fa8cf7/tests%2Fregressiontests%2Fviews%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Fviews.py?ref=29642fa76fa5c8087c49d2f37511450419fa8cf7",
            "patch": "@@ -32,7 +32,7 @@ def save(self, *args, **kwargs):\n \n     from django.views.generic.create_update import create_object\n     return create_object(request,\n-        post_save_redirect='/views/create_update/view/article/%(slug)s/',\n+        post_save_redirect='/create_update/view/article/%(slug)s/',\n         form_class=SlugChangingArticleForm)\n \n def raises(request):"
        }
    ],
    "stats": {
        "total": 412,
        "additions": 219,
        "deletions": 193
    }
}