{
    "author": "ramiro",
    "message": "Fixed #9589 -- Made development web server more robust in the presence of a wider variety of code errors.\n\nThanks goes to contributor with Trac user 'berto' for the patch.",
    "sha": "c2a6b2a43fb8f32cff078c823054e2e65f325464",
    "files": [
        {
            "sha": "0f793cc5f41a311d20ec7e9996e243149be7d3fb",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/c2a6b2a43fb8f32cff078c823054e2e65f325464/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/c2a6b2a43fb8f32cff078c823054e2e65f325464/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=c2a6b2a43fb8f32cff078c823054e2e65f325464",
            "patch": "@@ -91,6 +91,7 @@ answer newbie questions, and generally made Django that much better:\n     James Bennett\n     Danilo Bargen\n     Shai Berger <shai@platonix.com>\n+    berto\n     Julian Bez\n     Arvis Bickovskis <viestards.lists@gmail.com>\n     Natalia Bidart <nataliabidart@gmail.com>"
        },
        {
            "sha": "f600f0611c058fd0f3630a8bdcfe1482367a8371",
            "filename": "django/utils/autoreload.py",
            "status": "modified",
            "additions": 32,
            "deletions": 3,
            "changes": 35,
            "blob_url": "https://github.com/django/django/blob/c2a6b2a43fb8f32cff078c823054e2e65f325464/django%2Futils%2Fautoreload.py",
            "raw_url": "https://github.com/django/django/raw/c2a6b2a43fb8f32cff078c823054e2e65f325464/django%2Futils%2Fautoreload.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fautoreload.py?ref=c2a6b2a43fb8f32cff078c823054e2e65f325464",
            "patch": "@@ -28,7 +28,7 @@\n # OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n # OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n \n-import os, sys, time, signal\n+import os, sys, time, signal, traceback\n \n try:\n     from django.utils.six.moves import _thread as thread\n@@ -52,10 +52,12 @@\n _mtimes = {}\n _win = (sys.platform == \"win32\")\n \n+_error_files = []\n+\n def code_changed():\n     global _mtimes, _win\n     filenames = [getattr(m, \"__file__\", None) for m in sys.modules.values()]\n-    for filename in filter(None, filenames):\n+    for filename in filter(None, filenames) + _error_files:\n         if filename.endswith(\".pyc\") or filename.endswith(\".pyo\"):\n             filename = filename[:-1]\n         if filename.endswith(\"$py.class\"):\n@@ -71,9 +73,34 @@ def code_changed():\n             continue\n         if mtime != _mtimes[filename]:\n             _mtimes = {}\n+            try:\n+                del _error_files[_error_files.index(filename)]\n+            except ValueError:\n+                pass\n             return True\n     return False\n \n+def check_errors(fn):\n+    def wrapper(*args, **kwargs):\n+        try:\n+            fn(*args, **kwargs)\n+        except (ImportError, IndentationError, NameError, SyntaxError,\n+                TypeError, AttributeError):\n+            et, ev, tb = sys.exc_info()\n+\n+            if getattr(ev, 'filename', None) is None:\n+                # get the filename from the last item in the stack\n+                filename = traceback.extract_tb(tb)[-1][0]\n+            else:\n+                filename = ev.filename\n+\n+            if filename not in _error_files:\n+                _error_files.append(filename)\n+\n+            raise\n+\n+    return wrapper\n+\n def ensure_echo_on():\n     if termios:\n         fd = sys.stdin\n@@ -142,5 +169,7 @@ def main(main_func, args=None, kwargs=None):\n         reloader = jython_reloader\n     else:\n         reloader = python_reloader\n-    reloader(main_func, args, kwargs)\n+\n+    wrapped_main_func = check_errors(main_func)\n+    reloader(wrapped_main_func, args, kwargs)\n "
        }
    ],
    "stats": {
        "total": 36,
        "additions": 33,
        "deletions": 3
    }
}