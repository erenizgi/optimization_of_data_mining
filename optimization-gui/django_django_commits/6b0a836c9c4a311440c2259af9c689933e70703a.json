{
    "author": "claudep",
    "message": "Fixed assertXMLEqual when first node was a comment",
    "sha": "6b0a836c9c4a311440c2259af9c689933e70703a",
    "files": [
        {
            "sha": "f10d3882277ba61341f5425f2429d4e89e3108f0",
            "filename": "django/test/utils.py",
            "status": "modified",
            "additions": 11,
            "deletions": 5,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/6b0a836c9c4a311440c2259af9c689933e70703a/django%2Ftest%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/6b0a836c9c4a311440c2259af9c689933e70703a/django%2Ftest%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Futils.py?ref=6b0a836c9c4a311440c2259af9c689933e70703a",
            "patch": "@@ -227,9 +227,10 @@ def disable(self):\n \n \n def compare_xml(want, got):\n-    \"\"\"Tries to do a 'xml-comparision' of want and got.  Plain string\n-    comparision doesn't always work because, for example, attribute\n-    ordering should not be important.\n+    \"\"\"Tries to do a 'xml-comparison' of want and got.  Plain string\n+    comparison doesn't always work because, for example, attribute\n+    ordering should not be important. Comment nodes are not considered in the\n+    comparison.\n \n     Based on http://codespeak.net/svn/lxml/trunk/src/lxml/doctestcompare.py\n     \"\"\"\n@@ -267,6 +268,11 @@ def check_element(want_element, got_element):\n                 return False\n         return True\n \n+    def first_node(document):\n+        for node in document.childNodes:\n+            if node.nodeType != Node.COMMENT_NODE:\n+                return node\n+\n     want, got = strip_quotes(want, got)\n     want = want.replace('\\\\n','\\n')\n     got = got.replace('\\\\n','\\n')\n@@ -279,8 +285,8 @@ def check_element(want_element, got_element):\n         got = wrapper % got\n \n     # Parse the want and got strings, and compare the parsings.\n-    want_root = parseString(want).firstChild\n-    got_root = parseString(got).firstChild\n+    want_root = first_node(parseString(want))\n+    got_root = first_node(parseString(got))\n \n     return check_element(want_root, got_root)\n "
        },
        {
            "sha": "95913b5aab9b3c0a22d7b50f710e810008a12932",
            "filename": "tests/regressiontests/test_utils/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/6b0a836c9c4a311440c2259af9c689933e70703a/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/6b0a836c9c4a311440c2259af9c689933e70703a/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_utils%2Ftests.py?ref=6b0a836c9c4a311440c2259af9c689933e70703a",
            "patch": "@@ -484,6 +484,11 @@ def test_parsing_errors(self):\n         with self.assertRaises(AssertionError):\n             self.assertXMLNotEqual(xml_unvalid, xml2)\n \n+    def test_comment_root(self):\n+        xml1 = \"<?xml version='1.0'?><!-- comment1 --><elem attr1='a' attr2='b' />\"\n+        xml2 = \"<?xml version='1.0'?><!-- comment2 --><elem attr2='b' attr1='a' />\"\n+        self.assertXMLEqual(xml1, xml2)\n+\n \n class SkippingExtraTests(TestCase):\n     fixtures = ['should_not_be_loaded.json']"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 16,
        "deletions": 5
    }
}