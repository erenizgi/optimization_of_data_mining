{
    "author": "akaariai",
    "message": "[py3] Fixed Oracle specific failures",
    "sha": "4db38cbfe1087a51cd5d3d4fed9c7fcb952424d7",
    "files": [
        {
            "sha": "7d4f2b445a031c9567201f5ae0a2980ec28ee9c4",
            "filename": "django/db/backends/oracle/base.py",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/4db38cbfe1087a51cd5d3d4fed9c7fcb952424d7/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/4db38cbfe1087a51cd5d3d4fed9c7fcb952424d7/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fbase.py?ref=4db38cbfe1087a51cd5d3d4fed9c7fcb952424d7",
            "patch": "@@ -221,7 +221,10 @@ def field_cast_sql(self, db_type):\n     def last_executed_query(self, cursor, sql, params):\n         # http://cx-oracle.sourceforge.net/html/cursor.html#Cursor.statement\n         # The DB API definition does not define this attribute.\n-        return cursor.statement.decode(\"utf-8\")\n+        if six.PY3:\n+            return cursor.statement\n+        else:\n+            return cursor.statement.decode(\"utf-8\")\n \n     def last_insert_id(self, cursor, table_name, pk_name):\n         sq_name = self._get_sequence_name(table_name)\n@@ -594,6 +597,12 @@ def __init__(self, param, cursor, strings_only=False):\n                 param = timezone.make_aware(param, default_timezone)\n             param = param.astimezone(timezone.utc).replace(tzinfo=None)\n \n+        # Oracle doesn't recognize True and False correctly in Python 3.\n+        # The conversion done below works both in 2 and 3.\n+        if param is True:\n+            param = \"1\"\n+        elif param is False:\n+            param = \"0\"\n         if hasattr(param, 'bind_parameter'):\n             self.smart_bytes = param.bind_parameter(cursor)\n         else:"
        },
        {
            "sha": "24030cdffc3de76f9156bf27fb233029d523cef1",
            "filename": "django/db/backends/oracle/compiler.py",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/4db38cbfe1087a51cd5d3d4fed9c7fcb952424d7/django%2Fdb%2Fbackends%2Foracle%2Fcompiler.py",
            "raw_url": "https://github.com/django/django/raw/4db38cbfe1087a51cd5d3d4fed9c7fcb952424d7/django%2Fdb%2Fbackends%2Foracle%2Fcompiler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fcompiler.py?ref=4db38cbfe1087a51cd5d3d4fed9c7fcb952424d7",
            "patch": "@@ -1,4 +1,9 @@\n from django.db.models.sql import compiler\n+# The izip_longest was renamed to zip_longest in py3\n+try:\n+    from itertools import zip_longest\n+except ImportError:\n+    from itertools import izip_longest as zip_longest\n \n \n class SQLCompiler(compiler.SQLCompiler):\n@@ -13,7 +18,7 @@ def resolve_columns(self, row, fields=()):\n         index_start = rn_offset + len(self.query.extra_select)\n         values = [self.query.convert_values(v, None, connection=self.connection)\n                   for v in row[rn_offset:index_start]]\n-        for value, field in map(None, row[index_start:], fields):\n+        for value, field in zip_longest(row[index_start:], fields):\n             values.append(self.query.convert_values(value, field, connection=self.connection))\n         return tuple(values)\n "
        }
    ],
    "stats": {
        "total": 18,
        "additions": 16,
        "deletions": 2
    }
}