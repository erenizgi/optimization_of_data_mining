{
    "author": "clelland",
    "message": "Add assertInHTML method to TestCase",
    "sha": "dc704516c240011a9aeda17f631ade35c65cda58",
    "files": [
        {
            "sha": "9e92bf5bb566f64467619e711557c825ec89fc6f",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/dc704516c240011a9aeda17f631ade35c65cda58/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/dc704516c240011a9aeda17f631ade35c65cda58/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=dc704516c240011a9aeda17f631ade35c65cda58",
            "patch": "@@ -393,6 +393,20 @@ def assertHTMLNotEqual(self, html1, html2, msg=None):\n                 safe_repr(dom1, True), safe_repr(dom2, True))\n             self.fail(self._formatMessage(msg, standardMsg))\n \n+    def assertInHTML(self, needle, haystack, count = None, msg_prefix=''):\n+        needle = assert_and_parse_html(self, needle, None,\n+            'First argument is not valid HTML:')\n+        haystack = assert_and_parse_html(self, haystack, None,\n+            'Second argument is not valid HTML:')\n+        real_count = haystack.count(needle)\n+        if count is not None:\n+            self.assertEqual(real_count, count,\n+                msg_prefix + \"Found %d instances of '%s' in response\"\n+                \" (expected %d)\" % (real_count, needle, count))\n+        else:\n+            self.assertTrue(real_count != 0,\n+                msg_prefix + \"Couldn't find '%s' in response\" % needle)\n+\n     def assertXMLEqual(self, xml1, xml2, msg=None):\n         \"\"\"\n         Asserts that two XML snippets are semantically the same."
        }
    ],
    "stats": {
        "total": 14,
        "additions": 14,
        "deletions": 0
    }
}