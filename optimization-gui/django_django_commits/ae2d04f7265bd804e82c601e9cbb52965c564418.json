{
    "author": "claudep",
    "message": "Add test for collapsible fieldset functionality in admin",
    "sha": "ae2d04f7265bd804e82c601e9cbb52965c564418",
    "files": [
        {
            "sha": "d4348968e09b6bc81f13a93bff20c1240f6964d4",
            "filename": "tests/regressiontests/admin_views/admin.py",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/ae2d04f7265bd804e82c601e9cbb52965c564418/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py",
            "raw_url": "https://github.com/django/django/raw/ae2d04f7265bd804e82c601e9cbb52965c564418/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py?ref=ae2d04f7265bd804e82c601e9cbb52965c564418",
            "patch": "@@ -71,6 +71,16 @@ class ChapterXtra1Admin(admin.ModelAdmin):\n class ArticleAdmin(admin.ModelAdmin):\n     list_display = ('content', 'date', callable_year, 'model_year', 'modeladmin_year')\n     list_filter = ('date', 'section')\n+    fieldsets=(\n+        ('Some fields', {\n+            'classes': ('collapse',),\n+            'fields': ('title', 'content')\n+        }),\n+        ('Some other fields', {\n+            'classes': ('wide',),\n+            'fields': ('date', 'section')\n+        })\n+    )\n \n     def changelist_view(self, request):\n         \"Test that extra_context works\""
        },
        {
            "sha": "667f3bc1836055a83d378cf41682409b8084a38c",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 20,
            "deletions": 4,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/ae2d04f7265bd804e82c601e9cbb52965c564418/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ae2d04f7265bd804e82c601e9cbb52965c564418/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=ae2d04f7265bd804e82c601e9cbb52965c564418",
            "patch": "@@ -3195,12 +3195,12 @@ def test_prepopulated_maxlength_localized(self):\n \n \n @override_settings(PASSWORD_HASHERS=('django.contrib.auth.hashers.SHA1PasswordHasher',))\n-class SeleniumPrePopulatedFirefoxTests(AdminSeleniumWebDriverTestCase):\n+class SeleniumAdminViewsFirefoxTests(AdminSeleniumWebDriverTestCase):\n     webdriver_class = 'selenium.webdriver.firefox.webdriver.WebDriver'\n     urls = \"regressiontests.admin_views.urls\"\n     fixtures = ['admin-views-users.xml']\n \n-    def test_basic(self):\n+    def test_prepopulated_fields(self):\n         \"\"\"\n         Ensure that the JavaScript-automated prepopulated fields work with the\n         main form and with stacked and tabular inlines.\n@@ -3310,12 +3310,28 @@ def test_basic(self):\n             slug2='option-one-tabular-inline-ignored-characters',\n         )\n \n+    def test_collapsible_fieldset(self):\n+        \"\"\"\n+        Test that the 'collapse' class in fieldsets definition allows to\n+        show/hide the appropriate field section.\n+        \"\"\"\n+        self.admin_login(username='super', password='secret', login_url='/test_admin/admin/')\n+        self.selenium.get('%s%s' % (self.live_server_url,\n+            '/test_admin/admin/admin_views/article/add/'))\n+        self.assertFalse(self.selenium.find_element_by_id('id_title').is_displayed())\n+        self.selenium.find_elements_by_link_text('Show')[0].click()\n+        self.assertTrue(self.selenium.find_element_by_id('id_title').is_displayed())\n+        self.assertEqual(\n+            self.selenium.find_element_by_id('fieldsetcollapser0').text,\n+            \"Hide\"\n+        )\n+\n \n-class SeleniumPrePopulatedChromeTests(SeleniumPrePopulatedFirefoxTests):\n+class SeleniumAdminViewsChromeTests(SeleniumAdminViewsFirefoxTests):\n     webdriver_class = 'selenium.webdriver.chrome.webdriver.WebDriver'\n \n \n-class SeleniumPrePopulatedIETests(SeleniumPrePopulatedFirefoxTests):\n+class SeleniumAdminViewsIETests(SeleniumAdminViewsFirefoxTests):\n     webdriver_class = 'selenium.webdriver.ie.webdriver.WebDriver'\n \n "
        }
    ],
    "stats": {
        "total": 34,
        "additions": 30,
        "deletions": 4
    }
}