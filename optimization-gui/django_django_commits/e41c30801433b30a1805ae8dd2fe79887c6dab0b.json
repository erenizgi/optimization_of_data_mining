{
    "author": "andrewgodwin",
    "message": "Merge pull request #283 from mjtamlyn/ipv6-address-validation\n\nFixed #18779 -- URLValidator can't validate url with ipv6.",
    "sha": "e41c30801433b30a1805ae8dd2fe79887c6dab0b",
    "files": [
        {
            "sha": "934f7d1d77b17eff9d90861193b3221ad1d3f6e7",
            "filename": "django/core/validators.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/e41c30801433b30a1805ae8dd2fe79887c6dab0b/django%2Fcore%2Fvalidators.py",
            "raw_url": "https://github.com/django/django/raw/e41c30801433b30a1805ae8dd2fe79887c6dab0b/django%2Fcore%2Fvalidators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fvalidators.py?ref=e41c30801433b30a1805ae8dd2fe79887c6dab0b",
            "patch": "@@ -44,7 +44,8 @@ class URLValidator(RegexValidator):\n         r'^(?:http|ftp)s?://' # http:// or https://\n         r'(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+(?:[A-Z]{2,6}\\.?|[A-Z0-9-]{2,}\\.?)|' #domain...\n         r'localhost|' #localhost...\n-        r'\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})' # ...or ip\n+        r'\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|' # ...or ipv4\n+        r'\\[?[A-F0-9]*:[A-F0-9:]+\\]?)' # ...or ipv6\n         r'(?::\\d+)?' # optional port\n         r'(?:/?|[/?]\\S+)$', re.IGNORECASE)\n "
        },
        {
            "sha": "6efdb9682fcbdadcdbabe6aebb3c3bc400093ce3",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/e41c30801433b30a1805ae8dd2fe79887c6dab0b/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/e41c30801433b30a1805ae8dd2fe79887c6dab0b/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=e41c30801433b30a1805ae8dd2fe79887c6dab0b",
            "patch": "@@ -668,6 +668,18 @@ def test_urlfield_9(self):\n             # Valid IDN\n             self.assertEqual(url, f.clean(url))\n \n+    def test_urlfield_10(self):\n+        \"\"\"Test URLField correctly validates IPv6 (#18779).\"\"\"\n+        f = URLField()\n+        urls = (\n+            'http://::/',\n+            'http://6:21b4:92/',\n+            'http://[12:34:3a53]/',\n+            'http://[a34:9238::]:8080/',\n+        )\n+        for url in urls:\n+            self.assertEqual(url, f.clean(url))\n+\n     def test_urlfield_not_string(self):\n         f = URLField(required=False)\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid URL.'\", f.clean, 23)"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 14,
        "deletions": 1
    }
}