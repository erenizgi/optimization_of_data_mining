{
    "author": "claudep",
    "message": "Converted more test assertions to assert[Not]Contains.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17910 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "0e0102389787444f3981aea19867a9dad6a4999b",
    "files": [
        {
            "sha": "ea550f955db2030a3c80b1f474dfaa2ffd353d93",
            "filename": "django/contrib/auth/tests/views.py",
            "status": "modified",
            "additions": 6,
            "deletions": 16,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/0e0102389787444f3981aea19867a9dad6a4999b/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/0e0102389787444f3981aea19867a9dad6a4999b/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py?ref=0e0102389787444f3981aea19867a9dad6a4999b",
            "patch": "@@ -114,8 +114,7 @@ def test_confirm_valid(self):\n         url, path = self._test_confirm_start()\n         response = self.client.get(path)\n         # redirect to a 'complete' page:\n-        self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\"Please enter your new password\" in response.content)\n+        self.assertContains(response, \"Please enter your new password\")\n \n     def test_confirm_invalid(self):\n         url, path = self._test_confirm_start()\n@@ -124,20 +123,17 @@ def test_confirm_invalid(self):\n         path = path[:-5] + (\"0\" * 4) + path[-1]\n \n         response = self.client.get(path)\n-        self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\"The password reset link was invalid\" in response.content)\n+        self.assertContains(response, \"The password reset link was invalid\")\n \n     def test_confirm_invalid_user(self):\n         # Ensure that we get a 200 response for a non-existant user, not a 404\n         response = self.client.get('/reset/123456-1-1/')\n-        self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\"The password reset link was invalid\" in response.content)\n+        self.assertContains(response, \"The password reset link was invalid\")\n \n     def test_confirm_overflow_user(self):\n         # Ensure that we get a 200 response for a base36 user id that overflows int\n         response = self.client.get('/reset/zzzzzzzzzzzzz-1-1/')\n-        self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\"The password reset link was invalid\" in response.content)\n+        self.assertContains(response, \"The password reset link was invalid\")\n \n     def test_confirm_invalid_post(self):\n         # Same as test_confirm_invalid, but trying\n@@ -165,14 +161,12 @@ def test_confirm_complete(self):\n \n         # Check we can't use the link again\n         response = self.client.get(path)\n-        self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\"The password reset link was invalid\" in response.content)\n+        self.assertContains(response, \"The password reset link was invalid\")\n \n     def test_confirm_different_passwords(self):\n         url, path = self._test_confirm_start()\n         response = self.client.post(path, {'new_password1': 'anewpassword',\n                                            'new_password2': 'x'})\n-        self.assertEqual(response.status_code, 200)\n         self.assertContainsEscaped(response, SetPasswordForm.error_messages['password_mismatch'])\n \n \n@@ -183,7 +177,6 @@ def fail_login(self, password='password'):\n             'username': 'testclient',\n             'password': password,\n         })\n-        self.assertEqual(response.status_code, 200)\n         self.assertContainsEscaped(response, AuthenticationForm.error_messages['invalid_login'])\n \n     def logout(self):\n@@ -196,7 +189,6 @@ def test_password_change_fails_with_invalid_old_password(self):\n             'new_password1': 'password1',\n             'new_password2': 'password1',\n         })\n-        self.assertEqual(response.status_code, 200)\n         self.assertContainsEscaped(response, PasswordChangeForm.error_messages['password_incorrect'])\n \n     def test_password_change_fails_with_mismatched_passwords(self):\n@@ -206,7 +198,6 @@ def test_password_change_fails_with_mismatched_passwords(self):\n             'new_password1': 'password1',\n             'new_password2': 'donuts',\n         })\n-        self.assertEqual(response.status_code, 200)\n         self.assertContainsEscaped(response, SetPasswordForm.error_messages['password_mismatch'])\n \n     def test_password_change_succeeds(self):\n@@ -363,8 +354,7 @@ def test_logout_default(self):\n         \"Logout without next_page option renders the default template\"\n         self.login()\n         response = self.client.get('/logout/')\n-        self.assertEqual(200, response.status_code)\n-        self.assertTrue('Logged out' in response.content)\n+        self.assertContains(response, 'Logged out')\n         self.confirm_logged_out()\n \n     def test_14377(self):"
        },
        {
            "sha": "02666cef5265c248edb48a0d5b939fbd93c674fe",
            "filename": "tests/modeltests/test_client/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fmodeltests%2Ftest_client%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fmodeltests%2Ftest_client%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ftest_client%2Fmodels.py?ref=0e0102389787444f3981aea19867a9dad6a4999b",
            "patch": "@@ -75,7 +75,7 @@ def test_post(self):\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['data'], '37')\n         self.assertEqual(response.templates[0].name, 'POST Template')\n-        self.assertTrue('Data received' in response.content)\n+        self.assertContains(response, 'Data received')\n \n     def test_response_headers(self):\n         \"Check the value of HTTP headers returned in a response\""
        },
        {
            "sha": "55a26390288355e9c045a9595b72eeecaf45b2a0",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 27,
            "deletions": 36,
            "changes": 63,
            "blob_url": "https://github.com/django/django/blob/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=0e0102389787444f3981aea19867a9dad6a4999b",
            "patch": "@@ -92,9 +92,8 @@ def testBasicAddGet(self):\n     def testAddWithGETArgs(self):\n         response = self.client.get('/test_admin/%s/admin_views/section/add/' % self.urlbit, {'name': 'My Section'})\n         self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\n-            'value=\"My Section\"' in response.content,\n-            \"Couldn't find an input with the right value in the response.\"\n+        self.assertContains(response, 'value=\"My Section\"',\n+            msg_prefix=\"Couldn't find an input with the right value in the response\"\n         )\n \n     def testBasicEditGet(self):\n@@ -393,13 +392,11 @@ def testLimitedFilter(self):\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/thing/' % self.urlbit)\n         self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\n-            '<div id=\"changelist-filter\">' in response.content,\n-            \"Expected filter not found in changelist view.\"\n+        self.assertContains(response, '<div id=\"changelist-filter\">',\n+            msg_prefix=\"Expected filter not found in changelist view\"\n         )\n-        self.assertFalse(\n-            '<a href=\"?color__id__exact=3\">Blue</a>' in response.content,\n-            \"Changelist filter not correctly limited by limit_choices_to.\"\n+        self.assertNotContains(response, '<a href=\"?color__id__exact=3\">Blue</a>',\n+            msg_prefix=\"Changelist filter not correctly limited by limit_choices_to\"\n         )\n \n     def testRelationSpanningFilters(self):\n@@ -459,16 +456,16 @@ def testIsNullLookups(self):\n         \"\"\"Ensure is_null is handled correctly.\"\"\"\n         Article.objects.create(title=\"I Could Go Anywhere\", content=\"Versatile\", date=datetime.datetime.now())\n         response = self.client.get('/test_admin/%s/admin_views/article/' % self.urlbit)\n-        self.assertTrue('4 articles' in response.content, '\"4 articles\" missing from response')\n+        self.assertContains(response, '4 articles')\n         response = self.client.get('/test_admin/%s/admin_views/article/' % self.urlbit, {'section__isnull': 'false'})\n-        self.assertTrue('3 articles' in response.content, '\"3 articles\" missing from response')\n+        self.assertContains(response, '3 articles')\n         response = self.client.get('/test_admin/%s/admin_views/article/' % self.urlbit, {'section__isnull': 'true'})\n-        self.assertTrue('1 article' in response.content, '\"1 article\" missing from response')\n+        self.assertContains(response, '1 article')\n \n     def testLogoutAndPasswordChangeURLs(self):\n         response = self.client.get('/test_admin/%s/admin_views/article/' % self.urlbit)\n-        self.assertFalse('<a href=\"/test_admin/%s/logout/\">' % self.urlbit not in response.content)\n-        self.assertFalse('<a href=\"/test_admin/%s/password_change/\">' % self.urlbit not in response.content)\n+        self.assertContains(response, '<a href=\"/test_admin/%s/logout/\">' % self.urlbit)\n+        self.assertContains(response, '<a href=\"/test_admin/%s/password_change/\">' % self.urlbit)\n \n     def testNamedGroupFieldChoicesChangeList(self):\n         \"\"\"\n@@ -491,10 +488,7 @@ def testNamedGroupFieldChoicesFilter(self):\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/fabric/' % self.urlbit)\n         self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\n-            '<div id=\"changelist-filter\">' in response.content,\n-            \"Expected filter not found in changelist view.\"\n-        )\n+        self.assertContains(response, '<div id=\"changelist-filter\">')\n         self.assertTrue(\n             '<a href=\"?surface__exact=x\">Horizontal</a>' in response.content and\n             '<a href=\"?surface__exact=y\">Vertical</a>' in response.content,\n@@ -507,7 +501,7 @@ def testChangeListNullBooleanDisplay(self):\n         # against the 'admin2' custom admin (which doesn't have the\n         # Post model).\n         response = self.client.get(\"/test_admin/admin/admin_views/post/\")\n-        self.assertTrue('icon-unknown.gif' in response.content)\n+        self.assertContains(response, 'icon-unknown.gif')\n \n     def testI18NLanguageNonEnglishDefault(self):\n         \"\"\"\n@@ -759,7 +753,7 @@ def testCustomAdminSitePasswordChangeDoneTemplate(self):\n     def testCustomAdminSiteView(self):\n         self.client.login(username='super', password='secret')\n         response = self.client.get('/test_admin/%s/my_view/' % self.urlbit)\n-        self.assertTrue(response.content == \"Django is a magical pony!\", response.content)\n+        self.assertEqual(response.content, \"Django is a magical pony!\")\n \n def get_perm(Model, perm):\n     \"\"\"Return the permission object, for the Model\"\"\"\n@@ -1657,9 +1651,9 @@ def test_changelist_input_html(self):\n         # CSRF field = 1\n         # field to track 'select all' across paginated views = 1\n         # 6 + 3 + 4 + 1 + 2 + 1 + 1 = 18 inputs\n-        self.assertEqual(response.content.count(\"<input\"), 18)\n+        self.assertContains(response, \"<input\", count=18)\n         # 1 select per object = 3 selects\n-        self.assertEqual(response.content.count(\"<select\"), 4)\n+        self.assertContains(response, \"<select\", count=4)\n \n     def test_post_messages(self):\n         # Ticket 12707: Saving inline editable should not show admin\n@@ -2187,7 +2181,8 @@ def test_non_localized_pk(self):\n         }\n         response = self.client.post('/test_admin/admin/admin_views/subscriber/', action_data)\n         self.assertTemplateUsed(response, 'admin/delete_selected_confirmation.html')\n-        self.assertTrue('value=\"9999\"' in response.content and 'value=\"2\"' in response.content) # Instead of 9,999\n+        self.assertContains(response, 'value=\"9999\"') # Instead of 9,999\n+        self.assertContains(response, 'value=\"2\"')\n         settings.USE_THOUSAND_SEPARATOR = self.old_USE_THOUSAND_SEPARATOR\n         settings.USE_L10N = self.old_USE_L10N\n \n@@ -2266,27 +2261,23 @@ def test_model_without_action(self):\n         \"Tests a ModelAdmin without any action\"\n         response = self.client.get('/test_admin/admin/admin_views/oldsubscriber/')\n         self.assertEqual(response.context[\"action_form\"], None)\n-        self.assertTrue(\n-            '<input type=\"checkbox\" class=\"action-select\"' not in response.content,\n-            \"Found an unexpected action toggle checkboxbox in response\"\n-        )\n-        self.assertTrue('action-checkbox-column' not in response.content,\n-            \"Found unexpected action-checkbox-column class in response\")\n+        self.assertNotContains(response, '<input type=\"checkbox\" class=\"action-select\"',\n+            msg_prefix=\"Found an unexpected action toggle checkboxbox in response\")\n+        self.assertNotContains(response, '<input type=\"checkbox\" class=\"action-select\"')\n \n     def test_model_without_action_still_has_jquery(self):\n         \"Tests that a ModelAdmin without any actions still gets jQuery included in page\"\n         response = self.client.get('/test_admin/admin/admin_views/oldsubscriber/')\n         self.assertEqual(response.context[\"action_form\"], None)\n-        self.assertTrue('jquery.min.js' in response.content,\n-            \"jQuery missing from admin pages for model with no admin actions\"\n+        self.assertContains(response, 'jquery.min.js',\n+            msg_prefix=\"jQuery missing from admin pages for model with no admin actions\"\n         )\n \n     def test_action_column_class(self):\n         \"Tests that the checkbox column class is present in the response\"\n         response = self.client.get('/test_admin/admin/admin_views/subscriber/')\n         self.assertNotEqual(response.context[\"action_form\"], None)\n-        self.assertTrue('action-checkbox-column' in response.content,\n-            \"Expected an action-checkbox-column in response\")\n+        self.assertContains(response, 'action-checkbox-column')\n \n     def test_multiple_actions_form(self):\n         \"\"\"\n@@ -3061,7 +3052,7 @@ def test_readonly_get(self):\n         self.assertNotContains(response, 'name=\"posted\"')\n         # 3 fields + 2 submit buttons + 4 inline management form fields, + 2\n         # hidden fields for inlines + 1 field for the inline + 2 empty form\n-        self.assertEqual(response.content.count(\"<input\"), 14)\n+        self.assertContains(response, \"<input\", count=14)\n         self.assertContains(response, formats.localize(datetime.date.today()))\n         self.assertContains(response,\n             \"<label>Awesomeness level:</label>\")\n@@ -3376,8 +3367,8 @@ def tearDown(self):\n     )\n     def testLangNamePresent(self):\n         response = self.client.get('/test_admin/%s/admin_views/' % self.urlbit)\n-        self.assertFalse(' lang=\"\"' in response.content)\n-        self.assertFalse(' xml:lang=\"\"' in response.content)\n+        self.assertNotContains(response, ' lang=\"\"')\n+        self.assertNotContains(response, ' xml:lang=\"\"')\n \n \n class DateHierarchyTests(TestCase):"
        },
        {
            "sha": "dd53256b05e71313f017ff28dc67329c23223e8c",
            "filename": "tests/regressiontests/admin_widgets/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py?ref=0e0102389787444f3981aea19867a9dad6a4999b",
            "patch": "@@ -131,8 +131,8 @@ def testFilterChoicesByRequestUser(self):\n         \"\"\"\n         self.client.login(username=\"super\", password=\"secret\")\n         response = self.client.get(\"/widget_admin/admin_widgets/cartire/add/\")\n-        self.assertTrue(\"BMW M3\" not in response.content)\n-        self.assertTrue(\"Volkswagon Passat\" in response.content)\n+        self.assertNotContains(response, \"BMW M3\")\n+        self.assertContains(response, \"Volkswagon Passat\")\n \n \n class AdminForeignKeyWidgetChangeList(DjangoTestCase):\n@@ -147,7 +147,7 @@ def tearDown(self):\n \n     def test_changelist_foreignkey(self):\n         response = self.client.get('%s/admin_widgets/car/' % self.admin_root)\n-        self.assertTrue('%s/auth/user/add/' % self.admin_root in response.content)\n+        self.assertContains(response, '%s/auth/user/add/' % self.admin_root)\n \n \n class AdminForeignKeyRawIdWidget(DjangoTestCase):"
        },
        {
            "sha": "45aa140745845ea4cb64baa1882256e588057bb9",
            "filename": "tests/regressiontests/comment_tests/tests/moderation_view_tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmoderation_view_tests.py",
            "raw_url": "https://github.com/django/django/raw/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmoderation_view_tests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmoderation_view_tests.py?ref=0e0102389787444f3981aea19867a9dad6a4999b",
            "patch": "@@ -184,22 +184,19 @@ def testActionsNonModerator(self):\n         comments = self.createSomeComments()\n         self.client.login(username=\"normaluser\", password=\"normaluser\")\n         response = self.client.get(\"/admin/comments/comment/\")\n-        self.assertEqual(\"approve_comments\" in response.content, False)\n+        self.assertNotContains(response, \"approve_comments\")\n \n     def testActionsModerator(self):\n         comments = self.createSomeComments()\n         makeModerator(\"normaluser\")\n         self.client.login(username=\"normaluser\", password=\"normaluser\")\n         response = self.client.get(\"/admin/comments/comment/\")\n-        self.assertEqual(\"approve_comments\" in response.content, True)\n+        self.assertContains(response, \"approve_comments\")\n \n     def testActionsDisabledDelete(self):\n         \"Tests a CommentAdmin where 'delete_selected' has been disabled.\"\n         comments = self.createSomeComments()\n         self.client.login(username=\"normaluser\", password=\"normaluser\")\n         response = self.client.get('/admin2/comments/comment/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertTrue(\n-            '<option value=\"delete_selected\">' not in response.content,\n-            \"Found an unexpected delete_selected in response\"\n-        )\n+        self.assertNotContains(response, '<option value=\"delete_selected\">')"
        },
        {
            "sha": "c8358d334f6e48d1e14657d6e79a9d23434eb45f",
            "filename": "tests/regressiontests/views/tests/debug.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/0e0102389787444f3981aea19867a9dad6a4999b/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py?ref=0e0102389787444f3981aea19867a9dad6a4999b",
            "patch": "@@ -40,8 +40,8 @@ def test_files(self):\n             'file_data.txt': SimpleUploadedFile('file_data.txt', 'haha'),\n         }\n         response = self.client.post('/raises/', data)\n-        self.assertTrue('file_data.txt' in response.content)\n-        self.assertFalse('haha' in response.content)\n+        self.assertContains(response, 'file_data.txt', status_code=500)\n+        self.assertNotContains(response, 'haha', status_code=500)\n \n     def test_403(self):\n         # Ensure no 403.html template exists to test the default case."
        }
    ],
    "stats": {
        "total": 106,
        "additions": 42,
        "deletions": 64
    }
}