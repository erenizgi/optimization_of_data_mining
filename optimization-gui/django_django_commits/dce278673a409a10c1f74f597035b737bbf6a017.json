{
    "author": "andrewgodwin",
    "message": "Fixed #9459: forms.HiddenInput and DateTime field loses microseconds. Thanks to mt.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16347 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "dce278673a409a10c1f74f597035b737bbf6a017",
    "files": [
        {
            "sha": "ab31c15da3f496ebea21c6231abdd80d8a59defc",
            "filename": "django/conf/global_settings.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/dce278673a409a10c1f74f597035b737bbf6a017/django%2Fconf%2Fglobal_settings.py",
            "raw_url": "https://github.com/django/django/raw/dce278673a409a10c1f74f597035b737bbf6a017/django%2Fconf%2Fglobal_settings.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Fglobal_settings.py?ref=dce278673a409a10c1f74f597035b737bbf6a017",
            "patch": "@@ -366,12 +366,15 @@\n # * Note that these format strings are different from the ones to display dates\n DATETIME_INPUT_FORMATS = (\n     '%Y-%m-%d %H:%M:%S',     # '2006-10-25 14:30:59'\n+    '%Y-%m-%d %H:%M:%S.%f',  # '2006-10-25 14:30:59.000200'\n     '%Y-%m-%d %H:%M',        # '2006-10-25 14:30'\n     '%Y-%m-%d',              # '2006-10-25'\n     '%m/%d/%Y %H:%M:%S',     # '10/25/2006 14:30:59'\n+    '%m/%d/%Y %H:%M:%S.%f',  # '10/25/2006 14:30:59.000200'\n     '%m/%d/%Y %H:%M',        # '10/25/2006 14:30'\n     '%m/%d/%Y',              # '10/25/2006'\n     '%m/%d/%y %H:%M:%S',     # '10/25/06 14:30:59'\n+    '%m/%d/%y %H:%M:%S.%f',  # '10/25/06 14:30:59.000200'\n     '%m/%d/%y %H:%M',        # '10/25/06 14:30'\n     '%m/%d/%y',              # '10/25/06'\n )"
        },
        {
            "sha": "dd23b12e5cf7969c15eca0828ae0dee274ef9889",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/dce278673a409a10c1f74f597035b737bbf6a017/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/dce278673a409a10c1f74f597035b737bbf6a017/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=dce278673a409a10c1f74f597035b737bbf6a017",
            "patch": "@@ -338,7 +338,15 @@ def to_python(self, value):\n                 try:\n                     return self.strptime(value, format)\n                 except ValueError:\n-                    continue\n+                    if format.endswith('.%f'):\n+                        if not value.count('.')==1:\n+                            continue\n+                        try:\n+                            datetime_str, usecs_str = value.rsplit('.', 1)\n+                            usecs = int(usecs_str)\n+                            return datetime.datetime(*time.strptime(datetime_str, format[:-3])[:6]+(usecs,))\n+                        except ValueError:\n+                            continue\n         raise ValidationError(self.error_messages['invalid'])\n \n     def strptime(self, value, format):\n@@ -417,7 +425,7 @@ def to_python(self, value):\n         return super(DateTimeField, self).to_python(value)\n \n     def strptime(self, value, format):\n-        return datetime.datetime(*time.strptime(value, format)[:6])\n+        return datetime.datetime.strptime(value, format)\n \n class RegexField(CharField):\n     def __init__(self, regex, max_length=None, min_length=None, error_message=None, *args, **kwargs):"
        },
        {
            "sha": "ad8d1d92d9d26d5fb8d5df7fda7b13eb70b16ee2",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/dce278673a409a10c1f74f597035b737bbf6a017/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/dce278673a409a10c1f74f597035b737bbf6a017/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=dce278673a409a10c1f74f597035b737bbf6a017",
            "patch": "@@ -379,14 +379,17 @@ def test_datetimefield_1(self):\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean(datetime.datetime(2006, 10, 25, 14, 30)))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 59), f.clean(datetime.datetime(2006, 10, 25, 14, 30, 59)))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 59, 200), f.clean(datetime.datetime(2006, 10, 25, 14, 30, 59, 200)))\n+        self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 45, 200), f.clean('2006-10-25 14:30:45.000200'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 45), f.clean('2006-10-25 14:30:45'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('2006-10-25 14:30:00'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('2006-10-25 14:30'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 0, 0), f.clean('2006-10-25'))\n+        self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 45, 200), f.clean('10/25/2006 14:30:45.000200'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 45), f.clean('10/25/2006 14:30:45'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('10/25/2006 14:30:00'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('10/25/2006 14:30'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 0, 0), f.clean('10/25/2006'))\n+        self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 45, 200), f.clean('10/25/06 14:30:45.000200'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 45), f.clean('10/25/06 14:30:45'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('10/25/06 14:30:00'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('10/25/06 14:30'))"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 16,
        "deletions": 2
    }
}