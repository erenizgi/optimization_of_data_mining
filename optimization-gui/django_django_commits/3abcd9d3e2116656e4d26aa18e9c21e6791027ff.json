{
    "author": "unknown",
    "message": "Fixed #14767 -- Reflowed paragraphs and cleaned up some markup/links in the topics/db/optimizations docs. Thanks to adamv for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14690 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "3abcd9d3e2116656e4d26aa18e9c21e6791027ff",
    "files": [
        {
            "sha": "fda26f1744c317dab2cf45ae5be688db537f99f7",
            "filename": "docs/topics/db/optimization.txt",
            "status": "modified",
            "additions": 25,
            "deletions": 16,
            "changes": 41,
            "blob_url": "https://github.com/django/django/blob/3abcd9d3e2116656e4d26aa18e9c21e6791027ff/docs%2Ftopics%2Fdb%2Foptimization.txt",
            "raw_url": "https://github.com/django/django/raw/3abcd9d3e2116656e4d26aa18e9c21e6791027ff/docs%2Ftopics%2Fdb%2Foptimization.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Foptimization.txt?ref=3abcd9d3e2116656e4d26aa18e9c21e6791027ff",
            "patch": "@@ -13,7 +13,7 @@ Profile first\n As general programming practice, this goes without saying. Find out :ref:`what\n queries you are doing and what they are costing you\n <faq-see-raw-sql-queries>`. You may also want to use an external project like\n-'django-debug-toolbar', or a tool that monitors your database directly.\n+django-debug-toolbar_, or a tool that monitors your database directly.\n \n Remember that you may be optimizing for speed or memory or both, depending on\n your requirements. Sometimes optimizing for one will be detrimental to the\n@@ -29,14 +29,16 @@ readability of your code. **All** of the suggestions below come with the caveat\n that in your circumstances the general principle might not apply, or might even\n be reversed.\n \n+.. _django-debug-toolbar: http://robhudson.github.com/django-debug-toolbar/\n+\n Use standard DB optimization techniques\n =======================================\n \n ...including:\n \n * Indexes. This is a number one priority, *after* you have determined from\n-  profiling what indexes should be added. Use :attr:`django.db.models.Field.db_index` to add\n-  these from Django.\n+  profiling what indexes should be added. Use\n+  :attr:`django.db.models.Field.db_index` to add these from Django.\n \n * Appropriate use of field types.\n \n@@ -69,7 +71,7 @@ Understand cached attributes\n As well as caching of the whole ``QuerySet``, there is caching of the result of\n attributes on ORM objects. In general, attributes that are not callable will be\n cached. For example, assuming the :ref:`example Weblog models\n-<queryset-model-example>`:\n+<queryset-model-example>`::\n \n   >>> entry = Entry.objects.get(id=1)\n   >>> entry.blog   # Blog object is retrieved at this point\n@@ -156,22 +158,29 @@ Don't retrieve things you don't need\n Use ``QuerySet.values()`` and ``values_list()``\n -----------------------------------------------\n \n-When you just want a dict/list of values, and don't need ORM model objects, make\n-appropriate usage of :meth:`~django.db.models.QuerySet.values()`.\n+When you just want a ``dict`` or ``list`` of values, and don't need ORM model\n+objects, make appropriate usage of :meth:`~django.db.models.QuerySet.values()`.\n These can be useful for replacing model objects in template code - as long as\n-the dicts you supply have the same attributes as those used in the template, you\n-are fine.\n+the dicts you supply have the same attributes as those used in the template,\n+you are fine.\n \n Use ``QuerySet.defer()`` and ``only()``\n ---------------------------------------\n \n Use :meth:`~django.db.models.QuerySet.defer()` and\n :meth:`~django.db.models.QuerySet.only()` if there are database columns you\n know that you won't need (or won't need in most cases) to avoid loading\n-them. Note that if you *do* use them, the ORM will have to go and get them in a\n-separate query, making this a pessimization if you use it inappropriately.\n-\n-Also, be aware that there is some (small extra) overhead incurred inside Django when constructing a model with deferred fields. Don't be too aggressive in deferring fields without profiling as the database has to read most of the non-text, non-VARCHAR data from the disk for a single row in the results, even if it ends up only using a few columns. The `defer()` and `only()` methods are most useful when you can avoid loading a lot of text data or for fields that might take a lot of processing to convert back to Python. As always, profile first, then optimize.\n+them. Note that if you *do* use them, the ORM will have to go and get them in\n+a separate query, making this a pessimization if you use it inappropriately.\n+\n+Also, be aware that there is some (small extra) overhead incurred inside\n+Django when constructing a model with deferred fields. Don't be too aggressive\n+in deferring fields without profiling as the database has to read most of the\n+non-text, non-VARCHAR data from the disk for a single row in the results, even\n+if it ends up only using a few columns. The ``defer()`` and ``only()`` methods\n+are most useful when you can avoid loading a lot of text data or for fields\n+that might take a lot of processing to convert back to Python. As always,\n+profile first, then optimize.\n \n Use QuerySet.count()\n --------------------\n@@ -240,10 +249,10 @@ individual, use a bulk SQL UPDATE statement, via :ref:`QuerySet.update()\n <topics-db-queries-update>`. Similarly, do :ref:`bulk deletes\n <topics-db-queries-delete>` where possible.\n \n-Note, however, that these bulk update methods cannot call the ``save()`` or ``delete()``\n-methods of individual instances, which means that any custom behaviour you have\n-added for these methods will not be executed, including anything driven from the\n-normal database object :doc:`signals </ref/signals>`.\n+Note, however, that these bulk update methods cannot call the ``save()`` or\n+``delete()`` methods of individual instances, which means that any custom\n+behaviour you have added for these methods will not be executed, including\n+anything driven from the normal database object :doc:`signals </ref/signals>`.\n \n Use foreign key values directly\n -------------------------------"
        }
    ],
    "stats": {
        "total": 41,
        "additions": 25,
        "deletions": 16
    }
}