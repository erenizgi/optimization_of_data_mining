{
    "author": "aaugustin",
    "message": "[py3] Fixed filesystem encoding handling\n\nin the app directories template loader.",
    "sha": "fa4cb348170134fce7e99eedf497ee8f5e0fe165",
    "files": [
        {
            "sha": "887f8a0b729e333930b283db3075f87bcc1b3478",
            "filename": "django/template/loaders/app_directories.py",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/fa4cb348170134fce7e99eedf497ee8f5e0fe165/django%2Ftemplate%2Floaders%2Fapp_directories.py",
            "raw_url": "https://github.com/django/django/raw/fa4cb348170134fce7e99eedf497ee8f5e0fe165/django%2Ftemplate%2Floaders%2Fapp_directories.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Floaders%2Fapp_directories.py?ref=fa4cb348170134fce7e99eedf497ee8f5e0fe165",
            "patch": "@@ -12,9 +12,11 @@\n from django.template.loader import BaseLoader\n from django.utils._os import safe_join\n from django.utils.importlib import import_module\n+from django.utils import six\n \n # At compile time, cache the directories to search.\n-fs_encoding = sys.getfilesystemencoding() or sys.getdefaultencoding()\n+if not six.PY3:\n+    fs_encoding = sys.getfilesystemencoding() or sys.getdefaultencoding()\n app_template_dirs = []\n for app in settings.INSTALLED_APPS:\n     try:\n@@ -23,7 +25,9 @@\n         raise ImproperlyConfigured('ImportError %s: %s' % (app, e.args[0]))\n     template_dir = os.path.join(os.path.dirname(mod.__file__), 'templates')\n     if os.path.isdir(template_dir):\n-        app_template_dirs.append(template_dir.decode(fs_encoding))\n+        if not six.PY3:\n+            template_dir = template_dir.decode(fs_encoding)\n+        app_template_dirs.append(template_dir)\n \n # It won't change, so convert it to a tuple to save memory.\n app_template_dirs = tuple(app_template_dirs)"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    }
}