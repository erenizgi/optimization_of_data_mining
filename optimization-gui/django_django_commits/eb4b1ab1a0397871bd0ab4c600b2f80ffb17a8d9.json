{
    "author": "alex",
    "message": "Converted Finnish localflavor doctests to unittests.  We have always been at war with doctests.  Thanks to Idan Gazit.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14938 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9",
    "files": [
        {
            "sha": "161eb1743bf35ff04fdff5cf7e8da7bd1baf326a",
            "filename": "tests/regressiontests/forms/localflavor/fi.py",
            "status": "modified",
            "additions": 34,
            "deletions": 95,
            "changes": 129,
            "blob_url": "https://github.com/django/django/blob/eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Ffi.py",
            "raw_url": "https://github.com/django/django/raw/eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Ffi.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Ffi.py?ref=eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9",
            "patch": "@@ -1,58 +1,13 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ FI form fields.\n+from django.contrib.localflavor.fi.forms import (FIZipCodeField,\n+    FISocialSecurityNumber, FIMunicipalitySelect)\n \n-tests = r\"\"\"\n-# FIZipCodeField #############################################################\n+from utils import LocalFlavorTestCase\n \n-FIZipCodeField validates that the data is a valid FI zipcode.\n->>> from django.contrib.localflavor.fi.forms import FIZipCodeField\n->>> f = FIZipCodeField()\n->>> f.clean('20540')\n-u'20540'\n->>> f.clean('20101')\n-u'20101'\n->>> f.clean('20s40')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXXX.']\n->>> f.clean('205401')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXXX.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n \n->>> f = FIZipCodeField(required=False)\n->>> f.clean('20540')\n-u'20540'\n->>> f.clean('20101')\n-u'20101'\n->>> f.clean('20s40')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXXX.']\n->>> f.clean('205401')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXXX.']\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n-\n-# FIMunicipalitySelect ###############################################################\n-\n-A Select widget that uses a list of Finnish municipalities as its choices.\n->>> from django.contrib.localflavor.fi.forms import FIMunicipalitySelect\n->>> w = FIMunicipalitySelect()\n->>> unicode(w.render('municipalities', 'turku'))\n-u'<select name=\"municipalities\">\n+class FILocalFlavorTests(LocalFlavorTestCase):\n+    def test_FIMunicipalitySelect(self):\n+        f = FIMunicipalitySelect()\n+        out = u'''<select name=\"municipalities\">\n <option value=\"akaa\">Akaa</option>\n <option value=\"alajarvi\">Alaj\\xe4rvi</option>\n <option value=\"alavieska\">Alavieska</option>\n@@ -395,49 +350,33 @@\n <option value=\"ypaja\">Yp\\xe4j\\xe4</option>\n <option value=\"ahtari\">\\xc4ht\\xe4ri</option>\n <option value=\"aanekoski\">\\xc4\\xe4nekoski</option>\n-</select>'\n-\n+</select>'''\n+        self.assertEquals(f.render('municipalities', 'turku'), out)\n \n-# FISocialSecurityNumber ##############################################################\n+    def test_FIZipCodeField(self):\n+        error_format = [u'Enter a zip code in the format XXXXX.']\n+        valid = {\n+            '20540': '20540',\n+            '20101': '20101',\n+        }\n+        invalid = {\n+            '20s40': error_format,\n+            '205401': error_format\n+        }\n+        self.assertFieldOutput(FIZipCodeField, valid, invalid)\n \n->>> from django.contrib.localflavor.fi.forms import FISocialSecurityNumber\n->>> f = FISocialSecurityNumber()\n->>> f.clean('010101-0101')\n-u'010101-0101'\n->>> f.clean('010101+0101')\n-u'010101+0101'\n->>> f.clean('010101A0101')\n-u'010101A0101'\n->>> f.clean('101010-0102')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid Finnish social security number.']\n->>> f.clean('10a010-0101')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid Finnish social security number.']\n->>> f.clean('101010-0\\xe401')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid Finnish social security number.']\n->>> f.clean('101010b0101')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid Finnish social security number.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n+    def test_FISocialSecurityNumber(self):\n+        error_invalid = [u'Enter a valid Finnish social security number.']\n+        valid = {\n+            '010101-0101': '010101-0101',\n+            '010101+0101': '010101+0101',\n+            '010101A0101': '010101A0101',\n+        }\n+        invalid = {\n+            '101010-0102': error_invalid,\n+            '10a010-0101': error_invalid,\n+            '101010-0\\xe401': error_invalid,\n+            '101010b0101': error_invalid,\n+        }\n+        self.assertFieldOutput(FISocialSecurityNumber, valid, invalid)\n \n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f = FISocialSecurityNumber(required=False)\n->>> f.clean('010101-0101')\n-u'010101-0101'\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n-\"\"\""
        },
        {
            "sha": "11b4b5c15defd96085f81cf512b9b86622eb2bd1",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9",
            "patch": "@@ -1,6 +1,5 @@\n # -*- coding: utf-8 -*-\n from localflavor.cz import tests as localflavor_cz_tests\n-from localflavor.fi import tests as localflavor_fi_tests\n from localflavor.fr import tests as localflavor_fr_tests\n from localflavor.generic import tests as localflavor_generic_tests\n from localflavor.id import tests as localflavor_id_tests\n@@ -30,13 +29,13 @@\n from localflavor.cl import CLLocalFlavorTests\n from localflavor.de import DELocalFlavorTests\n from localflavor.es import ESLocalFlavorTests\n+from localflavor.fi import FILocalFlavorTests\n from localflavor.il import ILLocalFlavorTests\n from localflavor.tr import TRLocalFlavorTests\n \n \n __test__ = {\n     'localflavor_cz_tests': localflavor_cz_tests,\n-    'localflavor_fi_tests': localflavor_fi_tests,\n     'localflavor_fr_tests': localflavor_fr_tests,\n     'localflavor_generic_tests': localflavor_generic_tests,\n     'localflavor_id_tests': localflavor_id_tests,"
        },
        {
            "sha": "ea3ea78ef61f549009362ee924d1ed0108c5b4fa",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=eb4b1ab1a0397871bd0ab4c600b2f80ffb17a8d9",
            "patch": "@@ -23,6 +23,7 @@\n     CLLocalFlavorTests,\n     DELocalFlavorTests,\n     ESLocalFlavorTests,\n+    FILocalFlavorTests,\n     ILLocalFlavorTests,\n     TRLocalFlavorTests,\n )"
        }
    ],
    "stats": {
        "total": 133,
        "additions": 36,
        "deletions": 97
    }
}