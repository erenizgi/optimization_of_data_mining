{
    "author": "viciu",
    "message": "Fixed #19609: admin Inlines doesn't display help_text for readonly fields\n\nRefactoring: field was renamed to field_name, since flatten_fieldsets returns field name, not field.\n\nOriginal patch from Marc Aymerich Gubern",
    "sha": "67dd54dc841a93a67eac87dc13ed047d72f920dc",
    "files": [
        {
            "sha": "9089f7db90b56fbfe9e1ad7a3e59309b7624fec8",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/67dd54dc841a93a67eac87dc13ed047d72f920dc/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/67dd54dc841a93a67eac87dc13ed047d72f920dc/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=67dd54dc841a93a67eac87dc13ed047d72f920dc",
            "patch": "@@ -590,6 +590,8 @@ answer newbie questions, and generally made Django that much better:\n     ye7cakf02@sneakemail.com\n     ymasuda@ethercube.com\n     Jesse Young <adunar@gmail.com>\n+    Marc Aymerich Gubern\n+    Wiktor Ko≈Çodziej <wiktor@pykonik.org>\n     Mykola Zamkovoi <nickzam@gmail.com>\n     zegor\n     Gasper Zejn <zejn@kiberpipa.org>"
        },
        {
            "sha": "adc23025872ad55c29392ffce8cff674e2a683cb",
            "filename": "django/contrib/admin/helpers.py",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/67dd54dc841a93a67eac87dc13ed047d72f920dc/django%2Fcontrib%2Fadmin%2Fhelpers.py",
            "raw_url": "https://github.com/django/django/raw/67dd54dc841a93a67eac87dc13ed047d72f920dc/django%2Fcontrib%2Fadmin%2Fhelpers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fhelpers.py?ref=67dd54dc841a93a67eac87dc13ed047d72f920dc",
            "patch": "@@ -224,19 +224,20 @@ def __iter__(self):\n \n     def fields(self):\n         fk = getattr(self.formset, \"fk\", None)\n-        for i, field in enumerate(flatten_fieldsets(self.fieldsets)):\n-            if fk and fk.name == field:\n+        for i, field_name in enumerate(flatten_fieldsets(self.fieldsets)):\n+            if fk and fk.name == field_name:\n                 continue\n-            if field in self.readonly_fields:\n+            if field_name in self.readonly_fields:\n                 yield {\n-                    'label': label_for_field(field, self.opts.model, self.opts),\n+                    'label': label_for_field(field_name, self.opts.model, self.opts),\n                     'widget': {\n                         'is_hidden': False\n                     },\n-                    'required': False\n+                    'required': False,\n+                    'help_text': help_text_for_field(field_name, self.opts.model),\n                 }\n             else:\n-                yield self.formset.form.base_fields[field]\n+                yield self.formset.form.base_fields[field_name]\n \n     def _media(self):\n         media = self.opts.media + self.formset.media"
        },
        {
            "sha": "44671d0ac40d45000412cc7df448b4b536228528",
            "filename": "tests/regressiontests/admin_inlines/admin.py",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/67dd54dc841a93a67eac87dc13ed047d72f920dc/tests%2Fregressiontests%2Fadmin_inlines%2Fadmin.py",
            "raw_url": "https://github.com/django/django/raw/67dd54dc841a93a67eac87dc13ed047d72f920dc/tests%2Fregressiontests%2Fadmin_inlines%2Fadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_inlines%2Fadmin.py?ref=67dd54dc841a93a67eac87dc13ed047d72f920dc",
            "patch": "@@ -28,6 +28,11 @@ class Media:\n         js = ('my_awesome_admin_scripts.js',)\n \n \n+class ReadOnlyInlineInline(admin.TabularInline):\n+    model = ReadOnlyInline\n+    readonly_fields = ['name']\n+\n+\n class InnerInline2(admin.StackedInline):\n     model = Inner2\n \n@@ -142,7 +147,7 @@ class SightingInline(admin.TabularInline):\n site.register(Fashionista, inlines=[InlineWeakness])\n site.register(Holder4, Holder4Admin)\n site.register(Author, AuthorAdmin)\n-site.register(CapoFamiglia, inlines=[ConsigliereInline, SottoCapoInline])\n+site.register(CapoFamiglia, inlines=[ConsigliereInline, SottoCapoInline, ReadOnlyInlineInline])\n site.register(ProfileCollection, inlines=[ProfileInline])\n site.register(ParentModelWithCustomPk, inlines=[ChildModel1Inline, ChildModel2Inline])\n site.register(ExtraTerrestrial, inlines=[SightingInline])"
        },
        {
            "sha": "31f5ecc46c6249bd69a56b0a6c83dcf7d02889bd",
            "filename": "tests/regressiontests/admin_inlines/models.py",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/67dd54dc841a93a67eac87dc13ed047d72f920dc/tests%2Fregressiontests%2Fadmin_inlines%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/67dd54dc841a93a67eac87dc13ed047d72f920dc/tests%2Fregressiontests%2Fadmin_inlines%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_inlines%2Fmodels.py?ref=67dd54dc841a93a67eac87dc13ed047d72f920dc",
            "patch": "@@ -130,22 +130,27 @@ class Novel(models.Model):\n class Chapter(models.Model):\n     novel = models.ForeignKey(Novel)\n \n-\n # Models for #16838\n \n class CapoFamiglia(models.Model):\n     name = models.CharField(max_length=100)\n \n \n class Consigliere(models.Model):\n-    name = models.CharField(max_length=100)\n+    name = models.CharField(max_length=100, help_text='Help text for Consigliere')\n     capo_famiglia = models.ForeignKey(CapoFamiglia, related_name='+')\n \n \n class SottoCapo(models.Model):\n     name = models.CharField(max_length=100)\n     capo_famiglia = models.ForeignKey(CapoFamiglia, related_name='+')\n \n+\n+class ReadOnlyInline(models.Model):\n+    name = models.CharField(max_length=100, help_text='Help text for ReadOnlyInline')\n+    capo_famiglia = models.ForeignKey(CapoFamiglia)\n+\n+\n # Models for #18433\n \n class ParentModelWithCustomPk(models.Model):"
        },
        {
            "sha": "7d00ea40deee9265c51e8f85681684c05d2fa428",
            "filename": "tests/regressiontests/admin_inlines/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/67dd54dc841a93a67eac87dc13ed047d72f920dc/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/67dd54dc841a93a67eac87dc13ed047d72f920dc/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py?ref=67dd54dc841a93a67eac87dc13ed047d72f920dc",
            "patch": "@@ -122,6 +122,10 @@ def test_help_text(self):\n         response = self.client.get('/admin/admin_inlines/holder4/add/')\n         self.assertContains(response, '<p class=\"help\">Awesome stacked help text is awesome.</p>', 4)\n         self.assertContains(response, '<img src=\"/static/admin/img/icon-unknown.gif\" class=\"help help-tooltip\" width=\"10\" height=\"10\" alt=\"(Awesome tabular help text is awesome.)\" title=\"Awesome tabular help text is awesome.\" />', 1)\n+        # ReadOnly fields\n+        response = self.client.get('/admin/admin_inlines/capofamiglia/add/')\n+        self.assertContains(response, '<img src=\"/static/admin/img/icon-unknown.gif\" class=\"help help-tooltip\" width=\"10\" height=\"10\" alt=\"(Help text for ReadOnlyInline)\" title=\"Help text for ReadOnlyInline\" />', 1)\n+\n \n     def test_non_related_name_inline(self):\n         \"\"\""
        }
    ],
    "stats": {
        "total": 35,
        "additions": 26,
        "deletions": 9
    }
}