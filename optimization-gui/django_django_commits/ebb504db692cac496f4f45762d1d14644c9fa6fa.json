{
    "author": "claudep",
    "message": "Moved has_changed logic from widget to form field\n\nRefs #16612. Thanks Aymeric Augustin for the suggestion.",
    "sha": "ebb504db692cac496f4f45762d1d14644c9fa6fa",
    "files": [
        {
            "sha": "a3887740d8f68cde1ef9e49b8ea6a5918776a91b",
            "filename": "django/contrib/admin/widgets.py",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fcontrib%2Fadmin%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fcontrib%2Fadmin%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fwidgets.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -213,17 +213,6 @@ def value_from_datadict(self, data, files, name):\n         if value:\n             return value.split(',')\n \n-    def _has_changed(self, initial, data):\n-        if initial is None:\n-            initial = []\n-        if data is None:\n-            data = []\n-        if len(initial) != len(data):\n-            return True\n-        for pk1, pk2 in zip(initial, data):\n-            if force_text(pk1) != force_text(pk2):\n-                return True\n-        return False\n \n class RelatedFieldWidgetWrapper(forms.Widget):\n     \"\"\"\n@@ -279,9 +268,6 @@ def build_attrs(self, extra_attrs=None, **kwargs):\n     def value_from_datadict(self, data, files, name):\n         return self.widget.value_from_datadict(data, files, name)\n \n-    def _has_changed(self, initial, data):\n-        return self.widget._has_changed(initial, data)\n-\n     def id_for_label(self, id_):\n         return self.widget.id_for_label(id_)\n "
        },
        {
            "sha": "a06933660f2d23c1479f204c3612d286067f2f57",
            "filename": "django/contrib/gis/admin/widgets.py",
            "status": "modified",
            "additions": 1,
            "deletions": 23,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -7,7 +7,7 @@\n from django.utils import translation\n \n from django.contrib.gis.gdal import OGRException\n-from django.contrib.gis.geos import GEOSGeometry, GEOSException, fromstr\n+from django.contrib.gis.geos import GEOSGeometry, GEOSException\n \n # Creating a template context that contains Django settings\n # values needed by admin map templates.\n@@ -117,25 +117,3 @@ def ol_projection(srid):\n                     raise TypeError\n                 map_options[js_name] = value\n         return map_options\n-\n-    def _has_changed(self, initial, data):\n-        \"\"\" Compare geographic value of data with its initial value. \"\"\"\n-\n-        # Ensure we are dealing with a geographic object\n-        if isinstance(initial, six.string_types):\n-            try:\n-                initial = GEOSGeometry(initial)\n-            except (GEOSException, ValueError):\n-                initial = None\n-\n-        # Only do a geographic comparison if both values are available\n-        if initial and data:\n-            data = fromstr(data)\n-            data.transform(initial.srid)\n-            # If the initial value was not added by the browser, the geometry\n-            # provided may be slightly different, the first time it is saved.\n-            # The comparison is done with a very low tolerance.\n-            return not initial.equals_exact(data, tolerance=0.000001)\n-        else:\n-            # Check for change of state of existence\n-            return bool(initial) != bool(data)"
        },
        {
            "sha": "ab2e37f1e14806efe74417e3fd20b255af768b19",
            "filename": "django/contrib/gis/forms/fields.py",
            "status": "modified",
            "additions": 25,
            "deletions": 1,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fcontrib%2Fgis%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fcontrib%2Fgis%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fforms%2Ffields.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -1,11 +1,13 @@\n from __future__ import unicode_literals\n \n from django import forms\n+from django.utils import six\n from django.utils.translation import ugettext_lazy as _\n \n # While this couples the geographic forms to the GEOS library,\n # it decouples from database (by not importing SpatialBackend).\n-from django.contrib.gis.geos import GEOSException, GEOSGeometry\n+from django.contrib.gis.geos import GEOSException, GEOSGeometry, fromstr\n+\n \n class GeometryField(forms.Field):\n     \"\"\"\n@@ -73,3 +75,25 @@ def clean(self, value):\n                     raise forms.ValidationError(self.error_messages['transform_error'])\n \n         return geom\n+\n+    def _has_changed(self, initial, data):\n+        \"\"\" Compare geographic value of data with its initial value. \"\"\"\n+\n+        # Ensure we are dealing with a geographic object\n+        if isinstance(initial, six.string_types):\n+            try:\n+                initial = GEOSGeometry(initial)\n+            except (GEOSException, ValueError):\n+                initial = None\n+\n+        # Only do a geographic comparison if both values are available\n+        if initial and data:\n+            data = fromstr(data)\n+            data.transform(initial.srid)\n+            # If the initial value was not added by the browser, the geometry\n+            # provided may be slightly different, the first time it is saved.\n+            # The comparison is done with a very low tolerance.\n+            return not initial.equals_exact(data, tolerance=0.000001)\n+        else:\n+            # Check for change of state of existence\n+            return bool(initial) != bool(data)"
        },
        {
            "sha": "669914bdea67a628ff177f350d271e27abc41acd",
            "filename": "django/contrib/gis/tests/geoadmin/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fcontrib%2Fgis%2Ftests%2Fgeoadmin%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fcontrib%2Fgis%2Ftests%2Fgeoadmin%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Fgeoadmin%2Ftests.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -38,7 +38,7 @@ def test_olwidget_has_changed(self):\n         \"\"\" Check that changes are accurately noticed by OpenLayersWidget. \"\"\"\n         geoadmin = admin.site._registry[City]\n         form = geoadmin.get_changelist_form(None)()\n-        has_changed = form.fields['point'].widget._has_changed\n+        has_changed = form.fields['point']._has_changed\n \n         initial = Point(13.4197458572965953, 52.5194108501149799, srid=4326)\n         data_same = \"SRID=3857;POINT(1493879.2754093995 6894592.019687599)\""
        },
        {
            "sha": "e939a8f6659dd0c454b88c3d7aa7aa3b5ae4f6a3",
            "filename": "django/forms/extras/widgets.py",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Fextras%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Fextras%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fextras%2Fwidgets.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -135,11 +135,3 @@ def create_select(self, name, field, value, val, choices):\n         s = Select(choices=choices)\n         select_html = s.render(field % name, val, local_attrs)\n         return select_html\n-\n-    def _has_changed(self, initial, data):\n-        try:\n-            input_format = get_format('DATE_INPUT_FORMATS')[0]\n-            data = datetime_safe.datetime.strptime(data, input_format).date()\n-        except (TypeError, ValueError):\n-            pass\n-        return super(SelectDateWidget, self)._has_changed(initial, data)"
        },
        {
            "sha": "1e9cbcb4d9edd51f6c83facb7a432ca5ae889091",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 77,
            "deletions": 0,
            "changes": 77,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -175,6 +175,25 @@ def widget_attrs(self, widget):\n         \"\"\"\n         return {}\n \n+    def _has_changed(self, initial, data):\n+        \"\"\"\n+        Return True if data differs from initial.\n+        \"\"\"\n+        # For purposes of seeing whether something has changed, None is\n+        # the same as an empty string, if the data or inital value we get\n+        # is None, replace it w/ ''.\n+        if data is None:\n+            data_value = ''\n+        else:\n+            data_value = data\n+        if initial is None:\n+            initial_value = ''\n+        else:\n+            initial_value = initial\n+        if force_text(initial_value) != force_text(data_value):\n+            return True\n+        return False\n+\n     def __deepcopy__(self, memo):\n         result = copy.copy(self)\n         memo[id(self)] = result\n@@ -348,6 +367,13 @@ def to_python(self, value):\n     def strptime(self, value, format):\n         raise NotImplementedError('Subclasses must define this method.')\n \n+    def _has_changed(self, initial, data):\n+        try:\n+            data = self.to_python(data)\n+        except ValidationError:\n+            return True\n+        return self.to_python(initial) != data\n+\n class DateField(BaseTemporalField):\n     widget = DateInput\n     input_formats = formats.get_format_lazy('DATE_INPUT_FORMATS')\n@@ -371,6 +397,7 @@ def to_python(self, value):\n     def strptime(self, value, format):\n         return datetime.datetime.strptime(value, format).date()\n \n+\n class TimeField(BaseTemporalField):\n     widget = TimeInput\n     input_formats = formats.get_format_lazy('TIME_INPUT_FORMATS')\n@@ -529,6 +556,12 @@ def bound_data(self, data, initial):\n             return initial\n         return data\n \n+    def _has_changed(self, initial, data):\n+        if data is None:\n+            return False\n+        return True\n+\n+\n class ImageField(FileField):\n     default_error_messages = {\n         'invalid_image': _(\"Upload a valid image. The file you uploaded was either not an image or a corrupted image.\"),\n@@ -618,6 +651,7 @@ def split_url(url):\n             value = urlunsplit(url_fields)\n         return value\n \n+\n class BooleanField(Field):\n     widget = CheckboxInput\n \n@@ -636,6 +670,15 @@ def to_python(self, value):\n             raise ValidationError(self.error_messages['required'])\n         return value\n \n+    def _has_changed(self, initial, data):\n+        # Sometimes data or initial could be None or '' which should be the\n+        # same thing as False.\n+        if initial == 'False':\n+            # show_hidden_initial may have transformed False to 'False'\n+            initial = False\n+        return bool(initial) != bool(data)\n+\n+\n class NullBooleanField(BooleanField):\n     \"\"\"\n     A field whose valid values are None, True and False. Invalid values are\n@@ -660,6 +703,15 @@ def to_python(self, value):\n     def validate(self, value):\n         pass\n \n+    def _has_changed(self, initial, data):\n+        # None (unknown) and False (No) are not the same\n+        if initial is not None:\n+            initial = bool(initial)\n+        if data is not None:\n+            data = bool(data)\n+        return initial != data\n+\n+\n class ChoiceField(Field):\n     widget = Select\n     default_error_messages = {\n@@ -739,6 +791,7 @@ def to_python(self, value):\n     def validate(self, value):\n         pass\n \n+\n class MultipleChoiceField(ChoiceField):\n     hidden_widget = MultipleHiddenInput\n     widget = SelectMultiple\n@@ -765,6 +818,18 @@ def validate(self, value):\n             if not self.valid_value(val):\n                 raise ValidationError(self.error_messages['invalid_choice'] % {'value': val})\n \n+    def _has_changed(self, initial, data):\n+        if initial is None:\n+            initial = []\n+        if data is None:\n+            data = []\n+        if len(initial) != len(data):\n+            return True\n+        initial_set = set([force_text(value) for value in initial])\n+        data_set = set([force_text(value) for value in data])\n+        return data_set != initial_set\n+\n+\n class TypedMultipleChoiceField(MultipleChoiceField):\n     def __init__(self, *args, **kwargs):\n         self.coerce = kwargs.pop('coerce', lambda val: val)\n@@ -899,6 +964,18 @@ def compress(self, data_list):\n         \"\"\"\n         raise NotImplementedError('Subclasses must implement this method.')\n \n+    def _has_changed(self, initial, data):\n+        if initial is None:\n+            initial = ['' for x in range(0, len(data))]\n+        else:\n+            if not isinstance(initial, list):\n+                initial = self.widget.decompress(initial)\n+        for field, initial, data in zip(self.fields, initial, data):\n+            if field._has_changed(initial, data):\n+                return True\n+        return False\n+\n+\n class FilePathField(ChoiceField):\n     def __init__(self, path, match=None, recursive=False, allow_files=True,\n                  allow_folders=False, required=True, widget=None, label=None,"
        },
        {
            "sha": "f53239129614840d62b3dfd63d698251d8181087",
            "filename": "django/forms/forms.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fforms.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -341,7 +341,13 @@ def _get_changed_data(self):\n                     hidden_widget = field.hidden_widget()\n                     initial_value = hidden_widget.value_from_datadict(\n                         self.data, self.files, initial_prefixed_name)\n-                if field.widget._has_changed(initial_value, data_value):\n+                if hasattr(field.widget, '_has_changed'):\n+                    warnings.warn(\"The _has_changed method on widgets is deprecated,\"\n+                        \" define it at field level instead.\",\n+                        PendingDeprecationWarning, stacklevel=2)\n+                    if field.widget._has_changed(initial_value, data_value):\n+                        self._changed_data.append(name)\n+                elif field._has_changed(initial_value, data_value):\n                     self._changed_data.append(name)\n         return self._changed_data\n     changed_data = property(_get_changed_data)"
        },
        {
            "sha": "837da74814973cd86000534e540f9a2f868cd160",
            "filename": "django/forms/models.py",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fmodels.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -858,15 +858,12 @@ def inlineformset_factory(parent_model, model, form=ModelForm,\n \n # Fields #####################################################################\n \n-class InlineForeignKeyHiddenInput(HiddenInput):\n-    def _has_changed(self, initial, data):\n-        return False\n-\n class InlineForeignKeyField(Field):\n     \"\"\"\n     A basic integer field that deals with validating the given value to a\n     given parent instance in an inline.\n     \"\"\"\n+    widget = HiddenInput\n     default_error_messages = {\n         'invalid_choice': _('The inline foreign key did not match the parent instance primary key.'),\n     }\n@@ -881,7 +878,6 @@ def __init__(self, parent_instance, *args, **kwargs):\n             else:\n                 kwargs[\"initial\"] = self.parent_instance.pk\n         kwargs[\"required\"] = False\n-        kwargs[\"widget\"] = InlineForeignKeyHiddenInput\n         super(InlineForeignKeyField, self).__init__(*args, **kwargs)\n \n     def clean(self, value):\n@@ -899,6 +895,9 @@ def clean(self, value):\n             raise ValidationError(self.error_messages['invalid_choice'])\n         return self.parent_instance\n \n+    def _has_changed(self, initial, data):\n+        return False\n+\n class ModelChoiceIterator(object):\n     def __init__(self, field):\n         self.field = field"
        },
        {
            "sha": "303844d44b16cbee888039b9fd307cb9e77f9662",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 0,
            "deletions": 92,
            "changes": 92,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -208,25 +208,6 @@ def value_from_datadict(self, data, files, name):\n         \"\"\"\n         return data.get(name, None)\n \n-    def _has_changed(self, initial, data):\n-        \"\"\"\n-        Return True if data differs from initial.\n-        \"\"\"\n-        # For purposes of seeing whether something has changed, None is\n-        # the same as an empty string, if the data or inital value we get\n-        # is None, replace it w/ ''.\n-        if data is None:\n-            data_value = ''\n-        else:\n-            data_value = data\n-        if initial is None:\n-            initial_value = ''\n-        else:\n-            initial_value = initial\n-        if force_text(initial_value) != force_text(data_value):\n-            return True\n-        return False\n-\n     def id_for_label(self, id_):\n         \"\"\"\n         Returns the HTML ID attribute of this Widget for use by a <label>,\n@@ -325,10 +306,6 @@ def value_from_datadict(self, data, files, name):\n         \"File widgets take data from FILES, not POST\"\n         return files.get(name, None)\n \n-    def _has_changed(self, initial, data):\n-        if data is None:\n-            return False\n-        return True\n \n FILE_INPUT_CONTRADICTION = object()\n \n@@ -426,17 +403,6 @@ def _format_value(self, value):\n             return value.strftime(self.format)\n         return value\n \n-    def _has_changed(self, initial, data):\n-        # If our field has show_hidden_initial=True, initial will be a string\n-        # formatted by HiddenInput using formats.localize_input, which is not\n-        # necessarily the format used for this widget. Attempt to convert it.\n-        try:\n-            input_format = formats.get_format('DATE_INPUT_FORMATS')[0]\n-            initial = datetime.datetime.strptime(initial, input_format).date()\n-        except (TypeError, ValueError):\n-            pass\n-        return super(DateInput, self)._has_changed(self._format_value(initial), data)\n-\n \n class DateTimeInput(TextInput):\n     def __init__(self, attrs=None, format=None):\n@@ -456,17 +422,6 @@ def _format_value(self, value):\n             return value.strftime(self.format)\n         return value\n \n-    def _has_changed(self, initial, data):\n-        # If our field has show_hidden_initial=True, initial will be a string\n-        # formatted by HiddenInput using formats.localize_input, which is not\n-        # necessarily the format used for this widget. Attempt to convert it.\n-        try:\n-            input_format = formats.get_format('DATETIME_INPUT_FORMATS')[0]\n-            initial = datetime.datetime.strptime(initial, input_format)\n-        except (TypeError, ValueError):\n-            pass\n-        return super(DateTimeInput, self)._has_changed(self._format_value(initial), data)\n-\n \n class TimeInput(TextInput):\n     def __init__(self, attrs=None, format=None):\n@@ -485,17 +440,6 @@ def _format_value(self, value):\n             return value.strftime(self.format)\n         return value\n \n-    def _has_changed(self, initial, data):\n-        # If our field has show_hidden_initial=True, initial will be a string\n-        # formatted by HiddenInput using formats.localize_input, which is not\n-        # necessarily the format used for this  widget. Attempt to convert it.\n-        try:\n-            input_format = formats.get_format('TIME_INPUT_FORMATS')[0]\n-            initial = datetime.datetime.strptime(initial, input_format).time()\n-        except (TypeError, ValueError):\n-            pass\n-        return super(TimeInput, self)._has_changed(self._format_value(initial), data)\n-\n \n # Defined at module level so that CheckboxInput is picklable (#17976)\n def boolean_check(v):\n@@ -530,13 +474,6 @@ def value_from_datadict(self, data, files, name):\n             value = values.get(value.lower(), value)\n         return bool(value)\n \n-    def _has_changed(self, initial, data):\n-        # Sometimes data or initial could be None or '' which should be the\n-        # same thing as False.\n-        if initial == 'False':\n-            # show_hidden_initial may have transformed False to 'False'\n-            initial = False\n-        return bool(initial) != bool(data)\n \n class Select(Widget):\n     allow_multiple_selected = False\n@@ -612,14 +549,6 @@ def value_from_datadict(self, data, files, name):\n                 'False': False,\n                 False: False}.get(value, None)\n \n-    def _has_changed(self, initial, data):\n-        # For a NullBooleanSelect, None (unknown) and False (No)\n-        # are not the same\n-        if initial is not None:\n-            initial = bool(initial)\n-        if data is not None:\n-            data = bool(data)\n-        return initial != data\n \n class SelectMultiple(Select):\n     allow_multiple_selected = True\n@@ -639,16 +568,6 @@ def value_from_datadict(self, data, files, name):\n             return data.getlist(name)\n         return data.get(name, None)\n \n-    def _has_changed(self, initial, data):\n-        if initial is None:\n-            initial = []\n-        if data is None:\n-            data = []\n-        if len(initial) != len(data):\n-            return True\n-        initial_set = set([force_text(value) for value in initial])\n-        data_set = set([force_text(value) for value in data])\n-        return data_set != initial_set\n \n @python_2_unicode_compatible\n class RadioInput(SubWidget):\n@@ -844,17 +763,6 @@ def id_for_label(self, id_):\n     def value_from_datadict(self, data, files, name):\n         return [widget.value_from_datadict(data, files, name + '_%s' % i) for i, widget in enumerate(self.widgets)]\n \n-    def _has_changed(self, initial, data):\n-        if initial is None:\n-            initial = ['' for x in range(0, len(data))]\n-        else:\n-            if not isinstance(initial, list):\n-                initial = self.decompress(initial)\n-        for widget, initial, data in zip(self.widgets, initial, data):\n-            if widget._has_changed(initial, data):\n-                return True\n-        return False\n-\n     def format_output(self, rendered_widgets):\n         \"\"\"\n         Given a list of rendered widgets (as strings), returns a Unicode string"
        },
        {
            "sha": "29ecad3e9fe7867c4ae27683ed13167374158ac8",
            "filename": "docs/releases/1.6.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/docs%2Freleases%2F1.6.txt",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/docs%2Freleases%2F1.6.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.6.txt?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -67,3 +67,9 @@ If you're relying on this feature, you should add\n ``'django.middleware.common.BrokenLinkEmailsMiddleware'`` to your\n :setting:`MIDDLEWARE_CLASSES` setting and remove ``SEND_BROKEN_LINK_EMAILS``\n from your settings.\n+\n+``_has_changed`` method on widgets\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+If you defined your own form widgets and defined the ``_has_changed`` method\n+on a widget, you should now define this method on the form field itself."
        },
        {
            "sha": "452387078ddc033bf0bfc83e19811aac00bdf97e",
            "filename": "tests/regressiontests/admin_widgets/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -425,13 +425,6 @@ def test_render(self):\n             '<input type=\"text\" name=\"test\" value=\"%(m1pk)s\" class=\"vManyToManyRawIdAdminField\" /><a href=\"/widget_admin/admin_widgets/member/\" class=\"related-lookup\" id=\"lookup_id_test\" onclick=\"return showRelatedObjectLookupPopup(this);\"> <img src=\"%(ADMIN_STATIC_PREFIX)simg/selector-search.gif\" width=\"16\" height=\"16\" alt=\"Lookup\" /></a>' % dict(admin_static_prefix(), m1pk=m1.pk)\n         )\n \n-        self.assertEqual(w._has_changed(None, None), False)\n-        self.assertEqual(w._has_changed([], None), False)\n-        self.assertEqual(w._has_changed(None, ['1']), True)\n-        self.assertEqual(w._has_changed([1, 2], ['1', '2']), False)\n-        self.assertEqual(w._has_changed([1, 2], ['1']), True)\n-        self.assertEqual(w._has_changed([1, 2], ['1', '3']), True)\n-\n     def test_m2m_related_model_not_in_admin(self):\n         # M2M relationship with model not registered with admin site. Raw ID\n         # widget should have no magnifying glass link. See #16542"
        },
        {
            "sha": "762b774a934ac87723316e17b1bc9e8789f87086",
            "filename": "tests/regressiontests/forms/tests/extra.py",
            "status": "modified",
            "additions": 19,
            "deletions": 2,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -428,6 +428,23 @@ def compress(self, data_list):\n         # If insufficient data is provided, None is substituted\n         self.assertFormErrors(['This field is required.'], f.clean, ['some text',['JP']])\n \n+        # test with no initial data\n+        self.assertTrue(f._has_changed(None, ['some text', ['J','P'], ['2007-04-25','6:24:00']]))\n+\n+        # test when the data is the same as initial\n+        self.assertFalse(f._has_changed('some text,JP,2007-04-25 06:24:00',\n+            ['some text', ['J','P'], ['2007-04-25','6:24:00']]))\n+\n+        # test when the first widget's data has changed\n+        self.assertTrue(f._has_changed('some text,JP,2007-04-25 06:24:00',\n+            ['other text', ['J','P'], ['2007-04-25','6:24:00']]))\n+\n+        # test when the last widget's data has changed. this ensures that it is not\n+        # short circuiting while testing the widgets.\n+        self.assertTrue(f._has_changed('some text,JP,2007-04-25 06:24:00',\n+            ['some text', ['J','P'], ['2009-04-25','11:44:00']]))\n+\n+\n         class ComplexFieldForm(Form):\n             field1 = ComplexField(widget=w)\n \n@@ -725,8 +742,8 @@ def test_l10n(self):\n \n     def test_l10n_date_changed(self):\n         \"\"\"\n-        Ensure that SelectDateWidget._has_changed() works correctly with a\n-        localized date format.\n+        Ensure that DateField._has_changed() with SelectDateWidget works\n+        correctly with a localized date format.\n         Refs #17165.\n         \"\"\"\n         # With Field.show_hidden_initial=False -----------------------"
        },
        {
            "sha": "7deb345a33fdad171d70c7a0594559fefdabc184",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 90,
            "deletions": 0,
            "changes": 90,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -35,6 +35,7 @@\n from django.core.files.uploadedfile import SimpleUploadedFile\n from django.forms import *\n from django.test import SimpleTestCase\n+from django.utils import formats\n from django.utils import six\n from django.utils._os import upath\n \n@@ -362,6 +363,13 @@ def test_datefield_5(self):\n         f = DateField()\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid date.'\", f.clean, 'a\\x00b')\n \n+    def test_datefield_changed(self):\n+        format = '%d/%m/%Y'\n+        f = DateField(input_formats=[format])\n+        d = datetime.date(2007, 9, 17)\n+        self.assertFalse(f._has_changed(d, '17/09/2007'))\n+        self.assertFalse(f._has_changed(d.strftime(format), '17/09/2007'))\n+\n     # TimeField ###################################################################\n \n     def test_timefield_1(self):\n@@ -388,6 +396,18 @@ def test_timefield_3(self):\n         self.assertEqual(datetime.time(14, 25, 59), f.clean(' 14:25:59 '))\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid time.'\", f.clean, '   ')\n \n+    def test_timefield_changed(self):\n+        t1 = datetime.time(12, 51, 34, 482548)\n+        t2 = datetime.time(12, 51)\n+        format = '%H:%M'\n+        f = TimeField(input_formats=[format])\n+        self.assertTrue(f._has_changed(t1, '12:51'))\n+        self.assertFalse(f._has_changed(t2, '12:51'))\n+\n+        format = '%I:%M %p'\n+        f = TimeField(input_formats=[format])\n+        self.assertFalse(f._has_changed(t2.strftime(format), '12:51 PM'))\n+\n     # DateTimeField ###############################################################\n \n     def test_datetimefield_1(self):\n@@ -446,6 +466,15 @@ def test_datetimefield_4(self):\n     def test_datetimefield_5(self):\n         f = DateTimeField(input_formats=['%Y.%m.%d %H:%M:%S.%f'])\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 45, 200), f.clean('2006.10.25 14:30:45.0002'))\n+\n+    def test_datetimefield_changed(self):\n+        format = '%Y %m %d %I:%M %p'\n+        f = DateTimeField(input_formats=[format])\n+        d = datetime.datetime(2006, 9, 17, 14, 30, 0)\n+        self.assertFalse(f._has_changed(d, '2006 09 17 2:30 PM'))\n+        # Initial value may be a string from a hidden input\n+        self.assertFalse(f._has_changed(d.strftime(format), '2006 09 17 2:30 PM'))\n+\n     # RegexField ##################################################################\n \n     def test_regexfield_1(self):\n@@ -566,6 +595,29 @@ def test_filefield_3(self):\n         self.assertEqual(SimpleUploadedFile,\n                          type(f.clean(SimpleUploadedFile('name', b''))))\n \n+    def test_filefield_changed(self):\n+        '''\n+        Test for the behavior of _has_changed for FileField. The value of data will\n+        more than likely come from request.FILES. The value of initial data will\n+        likely be a filename stored in the database. Since its value is of no use to\n+        a FileField it is ignored.\n+        '''\n+        f = FileField()\n+\n+        # No file was uploaded and no initial data.\n+        self.assertFalse(f._has_changed('', None))\n+\n+        # A file was uploaded and no initial data.\n+        self.assertTrue(f._has_changed('', {'filename': 'resume.txt', 'content': 'My resume'}))\n+\n+        # A file was not uploaded, but there is initial data\n+        self.assertFalse(f._has_changed('resume.txt', None))\n+\n+        # A file was uploaded and there is initial data (file identity is not dealt\n+        # with here)\n+        self.assertTrue(f._has_changed('resume.txt', {'filename': 'resume.txt', 'content': 'My resume'}))\n+\n+\n     # URLField ##################################################################\n \n     def test_urlfield_1(self):\n@@ -709,6 +761,18 @@ def test_booleanfield_2(self):\n     def test_boolean_picklable(self):\n         self.assertIsInstance(pickle.loads(pickle.dumps(BooleanField())), BooleanField)\n \n+    def test_booleanfield_changed(self):\n+        f = BooleanField()\n+        self.assertFalse(f._has_changed(None, None))\n+        self.assertFalse(f._has_changed(None, ''))\n+        self.assertFalse(f._has_changed('', None))\n+        self.assertFalse(f._has_changed('', ''))\n+        self.assertTrue(f._has_changed(False, 'on'))\n+        self.assertFalse(f._has_changed(True, 'on'))\n+        self.assertTrue(f._has_changed(True, ''))\n+        # Initial value may have mutated to a string due to show_hidden_initial (#19537)\n+        self.assertTrue(f._has_changed('False', 'on'))\n+\n     # ChoiceField #################################################################\n \n     def test_choicefield_1(self):\n@@ -825,6 +889,16 @@ class MySQLNullBooleanForm(Form):\n         self.assertEqual(False, f.cleaned_data['nullbool1'])\n         self.assertEqual(None, f.cleaned_data['nullbool2'])\n \n+    def test_nullbooleanfield_changed(self):\n+        f = NullBooleanField()\n+        self.assertTrue(f._has_changed(False, None))\n+        self.assertTrue(f._has_changed(None, False))\n+        self.assertFalse(f._has_changed(None, None))\n+        self.assertFalse(f._has_changed(False, False))\n+        self.assertTrue(f._has_changed(True, False))\n+        self.assertTrue(f._has_changed(True, None))\n+        self.assertTrue(f._has_changed(True, False))\n+\n     # MultipleChoiceField #########################################################\n \n     def test_multiplechoicefield_1(self):\n@@ -866,6 +940,16 @@ def test_multiplechoicefield_3(self):\n         self.assertRaisesMessage(ValidationError, \"'Select a valid choice. 6 is not one of the available choices.'\", f.clean, ['6'])\n         self.assertRaisesMessage(ValidationError, \"'Select a valid choice. 6 is not one of the available choices.'\", f.clean, ['1','6'])\n \n+    def test_multiplechoicefield_changed(self):\n+        f = MultipleChoiceField(choices=[('1', 'One'), ('2', 'Two'), ('3', 'Three')])\n+        self.assertFalse(f._has_changed(None, None))\n+        self.assertFalse(f._has_changed([], None))\n+        self.assertTrue(f._has_changed(None, ['1']))\n+        self.assertFalse(f._has_changed([1, 2], ['1', '2']))\n+        self.assertFalse(f._has_changed([2, 1], ['1', '2']))\n+        self.assertTrue(f._has_changed([1, 2], ['1']))\n+        self.assertTrue(f._has_changed([1, 2], ['1', '3']))\n+\n     # TypedMultipleChoiceField ############################################################\n     # TypedMultipleChoiceField is just like MultipleChoiceField, except that coerced types\n     # will be returned:\n@@ -1048,3 +1132,9 @@ def test_splitdatetimefield_2(self):\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid time.'\", f.clean, ['2006-01-10', ''])\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid time.'\", f.clean, ['2006-01-10'])\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid date.'\", f.clean, ['', '07:30'])\n+\n+    def test_splitdatetimefield_changed(self):\n+        f = SplitDateTimeField(input_date_formats=['%d/%m/%Y'])\n+        self.assertTrue(f._has_changed(datetime.datetime(2008, 5, 6, 12, 40, 00), ['2008-05-06', '12:40:00']))\n+        self.assertFalse(f._has_changed(datetime.datetime(2008, 5, 6, 12, 40, 00), ['06/05/2008', '12:40']))\n+        self.assertTrue(f._has_changed(datetime.datetime(2008, 5, 6, 12, 40, 00), ['06/05/2008', '12:41']))"
        },
        {
            "sha": "6aa56ec8b0e1c7dd897b97ce4520afa909a2b523",
            "filename": "tests/regressiontests/forms/tests/widgets.py",
            "status": "modified",
            "additions": 0,
            "deletions": 97,
            "changes": 97,
            "blob_url": "https://github.com/django/django/blob/ebb504db692cac496f4f45762d1d14644c9fa6fa/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/ebb504db692cac496f4f45762d1d14644c9fa6fa/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py?ref=ebb504db692cac496f4f45762d1d14644c9fa6fa",
            "patch": "@@ -148,25 +148,6 @@ def test_fileinput(self):\n \n         self.assertHTMLEqual(w.render('email', 'ŠĐĆŽćžšđ', attrs={'class': 'fun'}), '<input type=\"file\" class=\"fun\" name=\"email\" />')\n \n-        # Test for the behavior of _has_changed for FileInput. The value of data will\n-        # more than likely come from request.FILES. The value of initial data will\n-        # likely be a filename stored in the database. Since its value is of no use to\n-        # a FileInput it is ignored.\n-        w = FileInput()\n-\n-        # No file was uploaded and no initial data.\n-        self.assertFalse(w._has_changed('', None))\n-\n-        # A file was uploaded and no initial data.\n-        self.assertTrue(w._has_changed('', {'filename': 'resume.txt', 'content': 'My resume'}))\n-\n-        # A file was not uploaded, but there is initial data\n-        self.assertFalse(w._has_changed('resume.txt', None))\n-\n-        # A file was uploaded and there is initial data (file identity is not dealt\n-        # with here)\n-        self.assertTrue(w._has_changed('resume.txt', {'filename': 'resume.txt', 'content': 'My resume'}))\n-\n     def test_textarea(self):\n         w = Textarea()\n         self.assertHTMLEqual(w.render('msg', ''), '<textarea rows=\"10\" cols=\"40\" name=\"msg\"></textarea>')\n@@ -233,16 +214,6 @@ def test_checkboxinput(self):\n         self.assertIsInstance(value, bool)\n         self.assertTrue(value)\n \n-        self.assertFalse(w._has_changed(None, None))\n-        self.assertFalse(w._has_changed(None, ''))\n-        self.assertFalse(w._has_changed('', None))\n-        self.assertFalse(w._has_changed('', ''))\n-        self.assertTrue(w._has_changed(False, 'on'))\n-        self.assertFalse(w._has_changed(True, 'on'))\n-        self.assertTrue(w._has_changed(True, ''))\n-        # Initial value may have mutated to a string due to show_hidden_initial (#19537)\n-        self.assertTrue(w._has_changed('False', 'on'))\n-\n     def test_select(self):\n         w = Select()\n         self.assertHTMLEqual(w.render('beatle', 'J', choices=(('J', 'John'), ('P', 'Paul'), ('G', 'George'), ('R', 'Ringo'))), \"\"\"<select name=\"beatle\">\n@@ -415,13 +386,6 @@ def test_nullbooleanselect(self):\n <option value=\"2\">Yes</option>\n <option value=\"3\" selected=\"selected\">No</option>\n </select>\"\"\")\n-        self.assertTrue(w._has_changed(False, None))\n-        self.assertTrue(w._has_changed(None, False))\n-        self.assertFalse(w._has_changed(None, None))\n-        self.assertFalse(w._has_changed(False, False))\n-        self.assertTrue(w._has_changed(True, False))\n-        self.assertTrue(w._has_changed(True, None))\n-        self.assertTrue(w._has_changed(True, False))\n \n     def test_selectmultiple(self):\n         w = SelectMultiple()\n@@ -535,14 +499,6 @@ def get_choices():\n         # Unicode choices are correctly rendered as HTML\n         self.assertHTMLEqual(w.render('nums', ['ŠĐĆŽćžšđ'], choices=[('ŠĐĆŽćžšđ', 'ŠĐabcĆŽćžšđ'), ('ćžšđ', 'abcćžšđ')]), '<select multiple=\"multiple\" name=\"nums\">\\n<option value=\"1\">1</option>\\n<option value=\"2\">2</option>\\n<option value=\"3\">3</option>\\n<option value=\"\\u0160\\u0110\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111\" selected=\"selected\">\\u0160\\u0110abc\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111</option>\\n<option value=\"\\u0107\\u017e\\u0161\\u0111\">abc\\u0107\\u017e\\u0161\\u0111</option>\\n</select>')\n \n-        # Test the usage of _has_changed\n-        self.assertFalse(w._has_changed(None, None))\n-        self.assertFalse(w._has_changed([], None))\n-        self.assertTrue(w._has_changed(None, ['1']))\n-        self.assertFalse(w._has_changed([1, 2], ['1', '2']))\n-        self.assertTrue(w._has_changed([1, 2], ['1']))\n-        self.assertTrue(w._has_changed([1, 2], ['1', '3']))\n-\n         # Choices can be nested one level in order to create HTML optgroups:\n         w.choices = (('outer1', 'Outer 1'), ('Group \"1\"', (('inner1', 'Inner 1'), ('inner2', 'Inner 2'))))\n         self.assertHTMLEqual(w.render('nestchoice', None), \"\"\"<select multiple=\"multiple\" name=\"nestchoice\">\n@@ -844,15 +800,6 @@ def get_choices():\n <li><label><input type=\"checkbox\" name=\"escape\" value=\"good\" /> you &gt; me</label></li>\n </ul>\"\"\")\n \n-        # Test the usage of _has_changed\n-        self.assertFalse(w._has_changed(None, None))\n-        self.assertFalse(w._has_changed([], None))\n-        self.assertTrue(w._has_changed(None, ['1']))\n-        self.assertFalse(w._has_changed([1, 2], ['1', '2']))\n-        self.assertTrue(w._has_changed([1, 2], ['1']))\n-        self.assertTrue(w._has_changed([1, 2], ['1', '3']))\n-        self.assertFalse(w._has_changed([2, 1], ['1', '2']))\n-\n         # Unicode choices are correctly rendered as HTML\n         self.assertHTMLEqual(w.render('nums', ['ŠĐĆŽćžšđ'], choices=[('ŠĐĆŽćžšđ', 'ŠĐabcĆŽćžšđ'), ('ćžšđ', 'abcćžšđ')]), '<ul>\\n<li><label><input type=\"checkbox\" name=\"nums\" value=\"1\" /> 1</label></li>\\n<li><label><input type=\"checkbox\" name=\"nums\" value=\"2\" /> 2</label></li>\\n<li><label><input type=\"checkbox\" name=\"nums\" value=\"3\" /> 3</label></li>\\n<li><label><input checked=\"checked\" type=\"checkbox\" name=\"nums\" value=\"\\u0160\\u0110\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111\" /> \\u0160\\u0110abc\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111</label></li>\\n<li><label><input type=\"checkbox\" name=\"nums\" value=\"\\u0107\\u017e\\u0161\\u0111\" /> abc\\u0107\\u017e\\u0161\\u0111</label></li>\\n</ul>')\n \n@@ -886,21 +833,6 @@ def format_output(self, rendered_widgets):\n         w = MyMultiWidget(widgets=(TextInput(attrs={'class': 'big'}), TextInput(attrs={'class': 'small'})), attrs={'id': 'bar'})\n         self.assertHTMLEqual(w.render('name', ['john', 'lennon']), '<input id=\"bar_0\" type=\"text\" class=\"big\" value=\"john\" name=\"name_0\" /><br /><input id=\"bar_1\" type=\"text\" class=\"small\" value=\"lennon\" name=\"name_1\" />')\n \n-        w = MyMultiWidget(widgets=(TextInput(), TextInput()))\n-\n-        # test with no initial data\n-        self.assertTrue(w._has_changed(None, ['john', 'lennon']))\n-\n-        # test when the data is the same as initial\n-        self.assertFalse(w._has_changed('john__lennon', ['john', 'lennon']))\n-\n-        # test when the first widget's data has changed\n-        self.assertTrue(w._has_changed('john__lennon', ['alfred', 'lennon']))\n-\n-        # test when the last widget's data has changed. this ensures that it is not\n-        # short circuiting while testing the widgets.\n-        self.assertTrue(w._has_changed('john__lennon', ['john', 'denver']))\n-\n     def test_splitdatetime(self):\n         w = SplitDateTimeWidget()\n         self.assertHTMLEqual(w.render('date', ''), '<input type=\"text\" name=\"date_0\" /><input type=\"text\" name=\"date_1\" />')\n@@ -916,10 +848,6 @@ def test_splitdatetime(self):\n         w = SplitDateTimeWidget(date_format='%d/%m/%Y', time_format='%H:%M')\n         self.assertHTMLEqual(w.render('date', datetime.datetime(2006, 1, 10, 7, 30)), '<input type=\"text\" name=\"date_0\" value=\"10/01/2006\" /><input type=\"text\" name=\"date_1\" value=\"07:30\" />')\n \n-        self.assertTrue(w._has_changed(datetime.datetime(2008, 5, 6, 12, 40, 00), ['2008-05-06', '12:40:00']))\n-        self.assertFalse(w._has_changed(datetime.datetime(2008, 5, 6, 12, 40, 00), ['06/05/2008', '12:40']))\n-        self.assertTrue(w._has_changed(datetime.datetime(2008, 5, 6, 12, 40, 00), ['06/05/2008', '12:41']))\n-\n     def test_datetimeinput(self):\n         w = DateTimeInput()\n         self.assertHTMLEqual(w.render('date', None), '<input type=\"text\" name=\"date\" />')\n@@ -934,13 +862,6 @@ def test_datetimeinput(self):\n         # Use 'format' to change the way a value is displayed.\n         w = DateTimeInput(format='%d/%m/%Y %H:%M', attrs={'type': 'datetime'})\n         self.assertHTMLEqual(w.render('date', d), '<input type=\"datetime\" name=\"date\" value=\"17/09/2007 12:51\" />')\n-        self.assertFalse(w._has_changed(d, '17/09/2007 12:51'))\n-\n-        # Make sure a custom format works with _has_changed. The hidden input will use\n-        data = datetime.datetime(2010, 3, 6, 12, 0, 0)\n-        custom_format = '%d.%m.%Y %H:%M'\n-        w = DateTimeInput(format=custom_format)\n-        self.assertFalse(w._has_changed(formats.localize_input(data), data.strftime(custom_format)))\n \n     def test_dateinput(self):\n         w = DateInput()\n@@ -957,13 +878,6 @@ def test_dateinput(self):\n         # Use 'format' to change the way a value is displayed.\n         w = DateInput(format='%d/%m/%Y', attrs={'type': 'date'})\n         self.assertHTMLEqual(w.render('date', d), '<input type=\"date\" name=\"date\" value=\"17/09/2007\" />')\n-        self.assertFalse(w._has_changed(d, '17/09/2007'))\n-\n-        # Make sure a custom format works with _has_changed. The hidden input will use\n-        data = datetime.date(2010, 3, 6)\n-        custom_format = '%d.%m.%Y'\n-        w = DateInput(format=custom_format)\n-        self.assertFalse(w._has_changed(formats.localize_input(data), data.strftime(custom_format)))\n \n     def test_timeinput(self):\n         w = TimeInput()\n@@ -982,13 +896,6 @@ def test_timeinput(self):\n         # Use 'format' to change the way a value is displayed.\n         w = TimeInput(format='%H:%M', attrs={'type': 'time'})\n         self.assertHTMLEqual(w.render('time', t), '<input type=\"time\" name=\"time\" value=\"12:51\" />')\n-        self.assertFalse(w._has_changed(t, '12:51'))\n-\n-        # Make sure a custom format works with _has_changed. The hidden input will use\n-        data = datetime.time(13, 0)\n-        custom_format = '%I:%M %p'\n-        w = TimeInput(format=custom_format)\n-        self.assertFalse(w._has_changed(formats.localize_input(data), data.strftime(custom_format)))\n \n     def test_splithiddendatetime(self):\n         from django.forms.widgets import SplitHiddenDateTimeWidget\n@@ -1016,10 +923,6 @@ def tearDown(self):\n         deactivate()\n         super(FormsI18NWidgetsTestCase, self).tearDown()\n \n-    def test_splitdatetime(self):\n-        w = SplitDateTimeWidget(date_format='%d/%m/%Y', time_format='%H:%M')\n-        self.assertTrue(w._has_changed(datetime.datetime(2008, 5, 6, 12, 40, 00), ['06.05.2008', '12:41']))\n-\n     def test_datetimeinput(self):\n         w = DateTimeInput()\n         d = datetime.datetime(2007, 9, 17, 12, 51, 34, 482548)"
        }
    ],
    "stats": {
        "total": 481,
        "additions": 230,
        "deletions": 251
    }
}