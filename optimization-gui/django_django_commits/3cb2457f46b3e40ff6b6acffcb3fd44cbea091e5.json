{
    "author": "aaugustin",
    "message": "[py3] Replaced basestring by six.string_types.",
    "sha": "3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
    "files": [
        {
            "sha": "77454b3fb915ffa815f7d3803c804d90aeda4ae7",
            "filename": "django/conf/__init__.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fconf%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fconf%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2F__init__.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -15,6 +15,7 @@\n from django.core.exceptions import ImproperlyConfigured\n from django.utils.functional import LazyObject, empty\n from django.utils import importlib\n+from django.utils import six\n \n ENVIRONMENT_VARIABLE = \"DJANGO_SETTINGS_MODULE\"\n \n@@ -73,7 +74,7 @@ def __setattr__(self, name, value):\n         elif name == \"ADMIN_MEDIA_PREFIX\":\n             warnings.warn(\"The ADMIN_MEDIA_PREFIX setting has been removed; \"\n                           \"use STATIC_URL instead.\", DeprecationWarning)\n-        elif name == \"ALLOWED_INCLUDE_ROOTS\" and isinstance(value, basestring):\n+        elif name == \"ALLOWED_INCLUDE_ROOTS\" and isinstance(value, six.string_types):\n             raise ValueError(\"The ALLOWED_INCLUDE_ROOTS setting must be set \"\n                 \"to a tuple, not a string.\")\n         object.__setattr__(self, name, value)\n@@ -102,7 +103,7 @@ def __init__(self, settings_module):\n             if setting == setting.upper():\n                 setting_value = getattr(mod, setting)\n                 if setting in tuple_settings and \\\n-                        isinstance(setting_value, basestring):\n+                        isinstance(setting_value, six.string_types):\n                     warnings.warn(\"The %s setting must be a tuple. Please fix your \"\n                                   \"settings, as auto-correction is now deprecated.\" % setting,\n                         PendingDeprecationWarning)"
        },
        {
            "sha": "04fb1dff59023c2212c56c8b4c54f71e8490ee77",
            "filename": "django/conf/urls/__init__.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fconf%2Furls%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fconf%2Furls%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Furls%2F__init__.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -2,6 +2,7 @@\n     RegexURLResolver, LocaleRegexURLResolver)\n from django.core.exceptions import ImproperlyConfigured\n from django.utils.importlib import import_module\n+from django.utils import six\n \n \n __all__ = ['handler403', 'handler404', 'handler500', 'include', 'patterns', 'url']\n@@ -20,7 +21,7 @@ def include(arg, namespace=None, app_name=None):\n         # No namespace hint - use manually provided namespace\n         urlconf_module = arg\n \n-    if isinstance(urlconf_module, basestring):\n+    if isinstance(urlconf_module, six.string_types):\n         urlconf_module = import_module(urlconf_module)\n     patterns = getattr(urlconf_module, 'urlpatterns', urlconf_module)\n \n@@ -52,7 +53,7 @@ def url(regex, view, kwargs=None, name=None, prefix=''):\n         urlconf_module, app_name, namespace = view\n         return RegexURLResolver(regex, urlconf_module, kwargs, app_name=app_name, namespace=namespace)\n     else:\n-        if isinstance(view, basestring):\n+        if isinstance(view, six.string_types):\n             if not view:\n                 raise ImproperlyConfigured('Empty URL pattern view name not permitted (for pattern %r)' % regex)\n             if prefix:"
        },
        {
            "sha": "11b14dcb51b19b75fd5fdadc1fc819806ab9c057",
            "filename": "django/contrib/admin/helpers.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fadmin%2Fhelpers.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fadmin%2Fhelpers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fhelpers.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -12,6 +12,7 @@\n from django.utils.encoding import force_unicode, smart_unicode\n from django.utils.html import conditional_escape, format_html\n from django.utils.safestring import mark_safe\n+from django.utils import six\n from django.utils.translation import ugettext_lazy as _\n from django.conf import settings\n \n@@ -49,7 +50,7 @@ def first_field(self):\n         try:\n             fieldset_name, fieldset_options = self.fieldsets[0]\n             field_name = fieldset_options['fields'][0]\n-            if not isinstance(field_name, basestring):\n+            if not isinstance(field_name, six.string_types):\n                 field_name = field_name[0]\n             return self.form[field_name]\n         except (KeyError, IndexError):"
        },
        {
            "sha": "a529bacd1895c85e508d9c459e25aedb4566a157",
            "filename": "django/contrib/admin/util.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fadmin%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fadmin%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Futil.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -52,7 +52,7 @@ def quote(s):\n     quoting is slightly different so that it doesn't get automatically\n     unquoted by the Web browser.\n     \"\"\"\n-    if not isinstance(s, basestring):\n+    if not isinstance(s, six.string_types):\n         return s\n     res = list(s)\n     for i in range(len(res)):"
        },
        {
            "sha": "8763cded07865c33ab8773ad2ce61cb2ea95c0b5",
            "filename": "django/contrib/formtools/utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fformtools%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fformtools%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Futils.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -2,6 +2,7 @@\n import pickle\n \n from django.utils.crypto import salted_hmac\n+from django.utils import six\n \n \n def form_hmac(form):\n@@ -16,7 +17,7 @@ def form_hmac(form):\n             value = bf.data or ''\n         else:\n             value = bf.field.clean(bf.data) or ''\n-        if isinstance(value, basestring):\n+        if isinstance(value, six.string_types):\n             value = value.strip()\n         data.append((bf.name, value))\n "
        },
        {
            "sha": "47570d3f9daedf741dd74838a959c4cb8d86893b",
            "filename": "django/contrib/gis/admin/widgets.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -1,6 +1,7 @@\n from django.forms.widgets import Textarea\n from django.template import loader, Context\n from django.templatetags.static import static\n+from django.utils import six\n from django.utils import translation\n \n from django.contrib.gis.gdal import OGRException\n@@ -25,7 +26,7 @@ def render(self, name, value, attrs=None):\n \n         # If a string reaches here (via a validation error on another\n         # field) then just reconstruct the Geometry.\n-        if isinstance(value, basestring):\n+        if isinstance(value, six.string_types):\n             try:\n                 value = GEOSGeometry(value)\n             except (GEOSException, ValueError):\n@@ -109,7 +110,7 @@ def _has_changed(self, initial, data):\n         \"\"\" Compare geographic value of data with its initial value. \"\"\"\n \n         # Ensure we are dealing with a geographic object\n-        if isinstance(initial, basestring):\n+        if isinstance(initial, six.string_types):\n             try:\n                 initial = GEOSGeometry(initial)\n             except (GEOSException, ValueError):"
        },
        {
            "sha": "4e33942f7aba1bc48c0adcab1f4ce4e91f136a4f",
            "filename": "django/contrib/gis/db/backends/oracle/operations.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Foracle%2Foperations.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Foracle%2Foperations.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Foracle%2Foperations.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -121,7 +121,7 @@ class OracleOperations(DatabaseOperations, BaseSpatialOperations):\n         'exact' : SDOOperation('SDO_EQUAL'),\n         'overlaps' : SDOOperation('SDO_OVERLAPS'),\n         'same_as' : SDOOperation('SDO_EQUAL'),\n-        'relate' : (SDORelate, basestring), # Oracle uses a different syntax, e.g., 'mask=inside+touch'\n+        'relate' : (SDORelate, six.string_types), # Oracle uses a different syntax, e.g., 'mask=inside+touch'\n         'touches' : SDOOperation('SDO_TOUCH'),\n         'within' : SDOOperation('SDO_INSIDE'),\n         }"
        },
        {
            "sha": "a6340ce22b231323601f890b4d54663aa09582d5",
            "filename": "django/contrib/gis/db/backends/postgis/operations.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fpostgis%2Foperations.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fpostgis%2Foperations.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fpostgis%2Foperations.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -162,7 +162,7 @@ def __init__(self, connection):\n             'overlaps' : PostGISFunction(prefix, 'Overlaps'),\n             'contains' : PostGISFunction(prefix, 'Contains'),\n             'intersects' : PostGISFunction(prefix, 'Intersects'),\n-            'relate' : (PostGISRelate, basestring),\n+            'relate' : (PostGISRelate, six.string_types),\n             }\n \n         # Valid distance types and substitutions"
        },
        {
            "sha": "4f12ade1147f2abe3805cd5c9741951856075bc7",
            "filename": "django/contrib/gis/db/backends/spatialite/introspection.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fspatialite%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fspatialite%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fspatialite%2Fintrospection.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -1,5 +1,6 @@\n from django.contrib.gis.gdal import OGRGeomType\n from django.db.backends.sqlite3.introspection import DatabaseIntrospection, FlexibleFieldLookupDict\n+from django.utils import six\n \n class GeoFlexibleFieldLookupDict(FlexibleFieldLookupDict):\n     \"\"\"\n@@ -43,7 +44,7 @@ def get_geometry_type(self, table_name, geo_col):\n             field_params = {}\n             if srid != 4326:\n                 field_params['srid'] = srid\n-            if isinstance(dim, basestring) and 'Z' in dim:\n+            if isinstance(dim, six.string_types) and 'Z' in dim:\n                 field_params['dim'] = 3\n         finally:\n             cursor.close()"
        },
        {
            "sha": "1d7c4fab52ebca81aed8e3ddf8a1b84ae9d70f5c",
            "filename": "django/contrib/gis/db/backends/spatialite/operations.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fspatialite%2Foperations.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fspatialite%2Foperations.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fspatialite%2Foperations.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -90,7 +90,7 @@ class SpatiaLiteOperations(DatabaseOperations, BaseSpatialOperations):\n         'overlaps' : SpatiaLiteFunction('Overlaps'),\n         'contains' : SpatiaLiteFunction('Contains'),\n         'intersects' : SpatiaLiteFunction('Intersects'),\n-        'relate' : (SpatiaLiteRelate, basestring),\n+        'relate' : (SpatiaLiteRelate, six.string_types),\n         # Returns true if B's bounding box completely contains A's bounding box.\n         'contained' : SpatiaLiteFunction('MbrWithin'),\n         # Returns true if A's bounding box completely contains B's bounding box."
        },
        {
            "sha": "b899934a017d365e14bc172120e349d344ab674f",
            "filename": "django/contrib/gis/db/backends/util.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Futil.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -3,13 +3,15 @@\n backends.\n \"\"\"\n \n+from django.utils import six\n+\n def gqn(val):\n     \"\"\"\n     The geographic quote name function; used for quoting tables and\n     geometries (they use single rather than the double quotes of the\n     backend quotename function).\n     \"\"\"\n-    if isinstance(val, basestring):\n+    if isinstance(val, six.string_types):\n         if isinstance(val, unicode): val = val.encode('ascii')\n         return \"'%s'\" % val\n     else:"
        },
        {
            "sha": "17630d0899c4bf9f37cb31b5c3c26449c7e00fe1",
            "filename": "django/contrib/gis/db/models/fields.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Ffields.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -4,6 +4,7 @@\n from django.contrib.gis import forms\n from django.contrib.gis.db.models.proxy import GeometryProxy\n from django.contrib.gis.geometry.backend import Geometry, GeometryException\n+from django.utils import six\n \n # Local cache of the spatial_ref_sys table, which holds SRID data for each\n # spatial database alias. This cache exists so that the database isn't queried\n@@ -159,7 +160,7 @@ def get_prep_value(self, value):\n         # from the given string input.\n         if isinstance(geom, Geometry):\n             pass\n-        elif isinstance(geom, basestring) or hasattr(geom, '__geo_interface__'):\n+        elif isinstance(geom, six.string_types) or hasattr(geom, '__geo_interface__'):\n             try:\n                 geom = Geometry(geom)\n             except GeometryException:"
        },
        {
            "sha": "413610fc5cdbd4d0ced11b1b2be120880a046125",
            "filename": "django/contrib/gis/db/models/proxy.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fproxy.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fproxy.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fproxy.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -5,6 +5,7 @@\n \n Thanks to Robert Coup for providing this functionality (see #4322).\n \"\"\"\n+from django.utils import six\n \n class GeometryProxy(object):\n     def __init__(self, klass, field):\n@@ -53,7 +54,7 @@ def __set__(self, obj, value):\n         if isinstance(value, self._klass) and (str(value.geom_type).upper() == gtype or gtype == 'GEOMETRY'):\n             # Assigning the SRID to the geometry.\n             if value.srid is None: value.srid = self._field.srid\n-        elif value is None or isinstance(value, (basestring, buffer)):\n+        elif value is None or isinstance(value, six.string_types + (buffer,)):\n             # Set with None, WKT, HEX, or WKB\n             pass\n         else:"
        },
        {
            "sha": "dd2983aeccea5742dd544860294cbda12b3815e2",
            "filename": "django/contrib/gis/db/models/query.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fquery.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -8,6 +8,8 @@\n from django.contrib.gis.measure import Area, Distance\n from django.utils import six\n \n+from django.utils import six\n+\n class GeoQuerySet(QuerySet):\n     \"The Geographic QuerySet.\"\n \n@@ -534,7 +536,7 @@ def _spatial_attribute(self, att, settings, field_name=None, model_att=None):\n             geo_field = settings['geo_field']\n \n         # The attribute to attach to the model.\n-        if not isinstance(model_att, basestring): model_att = att\n+        if not isinstance(model_att, six.string_types): model_att = att\n \n         # Special handling for any argument that is a geometry.\n         for name in settings['geom_args']:"
        },
        {
            "sha": "1797ed332048dd058f174e3f429ae49bc19ea4a2",
            "filename": "django/contrib/gis/gdal/datasource.py",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fdatasource.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fdatasource.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2Fdatasource.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -45,6 +45,8 @@\n # Getting the ctypes prototypes for the DataSource.\n from django.contrib.gis.gdal.prototypes import ds as capi\n \n+from django.utils import six\n+\n # For more information, see the OGR C API source code:\n #  http://www.gdal.org/ogr/ogr__api_8h.html\n #\n@@ -65,7 +67,7 @@ def __init__(self, ds_input, ds_driver=False, write=False):\n         if not capi.get_driver_count():\n             capi.register_all()\n \n-        if isinstance(ds_input, basestring):\n+        if isinstance(ds_input, six.string_types):\n             # The data source driver is a void pointer.\n             ds_driver = Driver.ptr_type()\n             try:\n@@ -84,7 +86,7 @@ def __init__(self, ds_input, ds_driver=False, write=False):\n             self.ptr = ds\n             self.driver = Driver(ds_driver)\n         else:\n-            # Raise an exception if the returned pointer is NULL \n+            # Raise an exception if the returned pointer is NULL\n             raise OGRException('Invalid data source file \"%s\"' % ds_input)\n \n     def __del__(self):\n@@ -98,7 +100,7 @@ def __iter__(self):\n \n     def __getitem__(self, index):\n         \"Allows use of the index [] operator to get a layer at the index.\"\n-        if isinstance(index, basestring):\n+        if isinstance(index, six.string_types):\n             l = capi.get_layer_by_name(self.ptr, index)\n             if not l: raise OGRIndexError('invalid OGR Layer name given: \"%s\"' % index)\n         elif isinstance(index, int):\n@@ -108,7 +110,7 @@ def __getitem__(self, index):\n         else:\n             raise TypeError('Invalid index type: %s' % type(index))\n         return Layer(l, self)\n-        \n+\n     def __len__(self):\n         \"Returns the number of layers within the data source.\"\n         return self.layer_count"
        },
        {
            "sha": "de4dc61c63bf9dd26d7c7572f10fd38b30d67ce8",
            "filename": "django/contrib/gis/gdal/driver.py",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fdriver.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fdriver.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2Fdriver.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -1,9 +1,11 @@\n-# prerequisites imports \n+# prerequisites imports\n from ctypes import c_void_p\n from django.contrib.gis.gdal.base import GDALBase\n from django.contrib.gis.gdal.error import OGRException\n from django.contrib.gis.gdal.prototypes import ds as capi\n \n+from django.utils import six\n+\n # For more information, see the OGR C API source code:\n #  http://www.gdal.org/ogr/ogr__api_8h.html\n #\n@@ -18,11 +20,11 @@ class Driver(GDALBase):\n               'tiger' : 'TIGER',\n               'tiger/line' : 'TIGER',\n               }\n-                \n+\n     def __init__(self, dr_input):\n         \"Initializes an OGR driver on either a string or integer input.\"\n \n-        if isinstance(dr_input, basestring):\n+        if isinstance(dr_input, six.string_types):\n             # If a string name of the driver was passed in\n             self._register()\n \n@@ -57,7 +59,7 @@ def _register(self):\n         # Only register all if the driver count is 0 (or else all drivers\n         # will be registered over and over again)\n         if not self.driver_count: capi.register_all()\n-                    \n+\n     # Driver properties\n     @property\n     def driver_count(self):"
        },
        {
            "sha": "52eadfa06ff07f4eac2eea196aeba083ee404940",
            "filename": "django/contrib/gis/gdal/feature.py",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Ffeature.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Ffeature.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2Ffeature.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -7,6 +7,8 @@\n # ctypes function prototypes\n from django.contrib.gis.gdal.prototypes import ds as capi, geom as geom_api\n \n+from django.utils import six\n+\n # For more information, see the OGR C API source code:\n #  http://www.gdal.org/ogr/ogr__api_8h.html\n #\n@@ -30,17 +32,17 @@ def __getitem__(self, index):\n         \"\"\"\n         Gets the Field object at the specified index, which may be either\n         an integer or the Field's string label.  Note that the Field object\n-        is not the field's _value_ -- use the `get` method instead to \n+        is not the field's _value_ -- use the `get` method instead to\n         retrieve the value (e.g. an integer) instead of a Field instance.\n         \"\"\"\n-        if isinstance(index, basestring):\n+        if isinstance(index, six.string_types):\n             i = self.index(index)\n         else:\n             if index < 0 or index > self.num_fields:\n                 raise OGRIndexError('index out of range')\n             i = index\n         return Field(self.ptr, i)\n-    \n+\n     def __iter__(self):\n         \"Iterates over each field in the Feature.\"\n         for i in xrange(self.num_fields):\n@@ -49,7 +51,7 @@ def __iter__(self):\n     def __len__(self):\n         \"Returns the count of fields in this feature.\"\n         return self.num_fields\n-        \n+\n     def __str__(self):\n         \"The string name of the feature.\"\n         return 'Feature FID %d in Layer<%s>' % (self.fid, self.layer_name)\n@@ -63,7 +65,7 @@ def __eq__(self, other):\n     def fid(self):\n         \"Returns the feature identifier.\"\n         return capi.get_fid(self.ptr)\n-        \n+\n     @property\n     def layer_name(self):\n         \"Returns the name of the layer for the feature.\"\n@@ -77,7 +79,7 @@ def num_fields(self):\n     @property\n     def fields(self):\n         \"Returns a list of fields in the Feature.\"\n-        return [capi.get_field_name(capi.get_field_defn(self._fdefn, i)) \n+        return [capi.get_field_name(capi.get_field_defn(self._fdefn, i))\n                 for i in xrange(self.num_fields)]\n \n     @property\n@@ -91,7 +93,7 @@ def geom(self):\n     def geom_type(self):\n         \"Returns the OGR Geometry Type for this Feture.\"\n         return OGRGeomType(capi.get_fd_geom_type(self._fdefn))\n-    \n+\n     #### Feature Methods ####\n     def get(self, field):\n         \"\"\""
        },
        {
            "sha": "f38aeba838f67dcd5222b52d8e5c51f65cf6513f",
            "filename": "django/contrib/gis/gdal/geometries.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fgeometries.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fgeometries.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2Fgeometries.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -71,7 +71,7 @@ class OGRGeometry(GDALBase):\n     def __init__(self, geom_input, srs=None):\n         \"Initializes Geometry on either WKT or an OGR pointer as input.\"\n \n-        str_instance = isinstance(geom_input, basestring)\n+        str_instance = isinstance(geom_input, six.string_types)\n \n         # If HEX, unpack input to to a binary buffer.\n         if str_instance and hex_regex.match(geom_input):\n@@ -283,7 +283,7 @@ def _set_srs(self, srs):\n         # (decremented) when this geometry's destructor is called.\n         if isinstance(srs, SpatialReference):\n             srs_ptr = srs.ptr\n-        elif isinstance(srs, six.integer_types + (basestring,)):\n+        elif isinstance(srs, six.integer_types + six.string_types):\n             sr = SpatialReference(srs)\n             srs_ptr = sr.ptr\n         else:\n@@ -412,7 +412,7 @@ def transform(self, coord_trans, clone=False):\n             capi.geom_transform(self.ptr, coord_trans.ptr)\n         elif isinstance(coord_trans, SpatialReference):\n             capi.geom_transform_to(self.ptr, coord_trans.ptr)\n-        elif isinstance(coord_trans, six.integer_types + (basestring,)):\n+        elif isinstance(coord_trans, six.integer_types + six.string_types):\n             sr = SpatialReference(coord_trans)\n             capi.geom_transform_to(self.ptr, sr.ptr)\n         else:\n@@ -687,7 +687,7 @@ def add(self, geom):\n                 for g in geom: capi.add_geom(self.ptr, g.ptr)\n             else:\n                 capi.add_geom(self.ptr, geom.ptr)\n-        elif isinstance(geom, basestring):\n+        elif isinstance(geom, six.string_types):\n             tmp = OGRGeometry(geom)\n             capi.add_geom(self.ptr, tmp.ptr)\n         else:"
        },
        {
            "sha": "fe4b89adeb8187b895d5e1f8ce1c95b7b0f5d436",
            "filename": "django/contrib/gis/gdal/geomtype.py",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fgeomtype.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fgeomtype.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2Fgeomtype.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -1,5 +1,7 @@\n from django.contrib.gis.gdal.error import OGRException\n \n+from django.utils import six\n+\n #### OGRGeomType ####\n class OGRGeomType(object):\n     \"Encapulates OGR Geometry Types.\"\n@@ -32,7 +34,7 @@ def __init__(self, type_input):\n         \"Figures out the correct OGR Type based upon the input.\"\n         if isinstance(type_input, OGRGeomType):\n             num = type_input.num\n-        elif isinstance(type_input, basestring):\n+        elif isinstance(type_input, six.string_types):\n             type_input = type_input.lower()\n             if type_input == 'geometry': type_input='unknown'\n             num = self._str_types.get(type_input, None)\n@@ -44,7 +46,7 @@ def __init__(self, type_input):\n             num = type_input\n         else:\n             raise TypeError('Invalid OGR input type given.')\n-        \n+\n         # Setting the OGR geometry type number.\n         self.num = num\n \n@@ -59,7 +61,7 @@ def __eq__(self, other):\n         \"\"\"\n         if isinstance(other, OGRGeomType):\n             return self.num == other.num\n-        elif isinstance(other, basestring):\n+        elif isinstance(other, six.string_types):\n             return self.name.lower() == other.lower()\n         elif isinstance(other, int):\n             return self.num == other"
        },
        {
            "sha": "6003ce75ad1b013db19809c9d8f3f034f59b4f1b",
            "filename": "django/contrib/gis/gdal/srs.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fsrs.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgdal%2Fsrs.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2Fsrs.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -54,7 +54,7 @@ def __init__(self, srs_input=''):\n         buf = c_char_p('')\n         srs_type = 'user'\n \n-        if isinstance(srs_input, basestring):\n+        if isinstance(srs_input, six.string_types):\n             # Encoding to ASCII if unicode passed in.\n             if isinstance(srs_input, unicode):\n                 srs_input = srs_input.encode('ascii')\n@@ -135,7 +135,7 @@ def attr_value(self, target, index=0):\n         The attribute value for the given target node (e.g. 'PROJCS'). The index\n         keyword specifies an index of the child node to return.\n         \"\"\"\n-        if not isinstance(target, basestring) or not isinstance(index, int):\n+        if not isinstance(target, six.string_types) or not isinstance(index, int):\n             raise TypeError\n         return capi.get_attr_value(self.ptr, target, index)\n "
        },
        {
            "sha": "944240c811c5351dbafcb985fb1543d56684fea7",
            "filename": "django/contrib/gis/geoip/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeoip%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeoip%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeoip%2Fbase.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -10,6 +10,8 @@\n     GeoIP_country_code_by_addr, GeoIP_country_code_by_name,\n     GeoIP_country_name_by_addr, GeoIP_country_name_by_name)\n \n+from django.utils import six\n+\n # Regular expressions for recognizing the GeoIP free database editions.\n free_regex = re.compile(r'^GEO-\\d{3}FREE')\n lite_regex = re.compile(r'^GEO-\\d{3}LITE')\n@@ -86,7 +88,7 @@ def __init__(self, path=None, cache=0, country=None, city=None):\n         if not path:\n             path = GEOIP_SETTINGS.get('GEOIP_PATH', None)\n             if not path: raise GeoIPException('GeoIP path must be provided via parameter or the GEOIP_PATH setting.')\n-        if not isinstance(path, basestring):\n+        if not isinstance(path, six.string_types):\n             raise TypeError('Invalid path type: %s' % type(path).__name__)\n \n         if os.path.isdir(path):\n@@ -129,7 +131,7 @@ def __del__(self):\n     def _check_query(self, query, country=False, city=False, city_or_country=False):\n         \"Helper routine for checking the query and database availability.\"\n         # Making sure a string was passed in for the query.\n-        if not isinstance(query, basestring):\n+        if not isinstance(query, six.string_types):\n             raise TypeError('GeoIP query must be a string, not type %s' % type(query).__name__)\n \n         # GeoIP only takes ASCII-encoded strings."
        },
        {
            "sha": "e53230d9ad98a7442417f64b8dadb69cf7050bdc",
            "filename": "django/contrib/gis/geoip/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeoip%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeoip%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeoip%2Ftests.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -6,6 +6,8 @@\n from django.contrib.gis.geoip import GeoIP, GeoIPException\n from django.utils import unittest\n \n+from django.utils import six\n+\n # Note: Requires use of both the GeoIP country and city datasets.\n # The GEOIP_DATA path should be the only setting set (the directory\n # should contain links or the actual database files 'GeoIP.dat' and\n@@ -35,7 +37,7 @@ def test01_init(self):\n         bad_params = (23, 'foo', 15.23)\n         for bad in bad_params:\n             self.assertRaises(GeoIPException, GeoIP, cache=bad)\n-            if isinstance(bad, basestring):\n+            if isinstance(bad, six.string_types):\n                 e = GeoIPException\n             else:\n                 e = TypeError"
        },
        {
            "sha": "fbd7d5a3e939f310e7ed64586b35bb692e5b7e62",
            "filename": "django/contrib/gis/geos/factory.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Ffactory.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Ffactory.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ffactory.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -1,12 +1,14 @@\n from django.contrib.gis.geos.geometry import GEOSGeometry, wkt_regex, hex_regex\n \n+from django.utils import six\n+\n def fromfile(file_h):\n     \"\"\"\n     Given a string file name, returns a GEOSGeometry. The file may contain WKB,\n     WKT, or HEX.\n     \"\"\"\n     # If given a file name, get a real handle.\n-    if isinstance(file_h, basestring): \n+    if isinstance(file_h, six.string_types):\n         with open(file_h, 'rb') as file_h:\n             buf = file_h.read()\n     else:"
        },
        {
            "sha": "703b11bc021ab23d4b355d749e47fabffd9b86d6",
            "filename": "django/contrib/gis/geos/geometry.py",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Fgeometry.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Fgeometry.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Fgeometry.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -27,6 +27,8 @@\n # For recognizing geometry input.\n from django.contrib.gis.geometry.regex import hex_regex, wkt_regex, json_regex\n \n+from django.utils import six\n+\n class GEOSGeometry(GEOSBase, ListMixin):\n     \"A class that, generally, encapsulates a GEOS geometry.\"\n \n@@ -52,7 +54,7 @@ def __init__(self, geo_input, srid=None):\n         The `srid` keyword is used to specify the Source Reference Identifier\n         (SRID) number for this Geometry.  If not set, the SRID will be None.\n         \"\"\"\n-        if isinstance(geo_input, basestring):\n+        if isinstance(geo_input, six.string_types):\n             if isinstance(geo_input, unicode):\n                 # Encoding to ASCII, WKT or HEXEWKB doesn't need any more.\n                 geo_input = geo_input.encode('ascii')\n@@ -153,7 +155,7 @@ def __eq__(self, other):\n         Equivalence testing, a Geometry may be compared with another Geometry\n         or a WKT representation.\n         \"\"\"\n-        if isinstance(other, basestring):\n+        if isinstance(other, six.string_types):\n             return self.wkt == other\n         elif isinstance(other, GEOSGeometry):\n             return self.equals_exact(other)\n@@ -333,7 +335,7 @@ def relate_pattern(self, other, pattern):\n         Returns true if the elements in the DE-9IM intersection matrix for the\n         two Geometries match the elements in pattern.\n         \"\"\"\n-        if not isinstance(pattern, basestring) or len(pattern) > 9:\n+        if not isinstance(pattern, six.string_types) or len(pattern) > 9:\n             raise GEOSException('invalid intersection matrix pattern')\n         return capi.geos_relatepattern(self.ptr, other.ptr, pattern)\n "
        },
        {
            "sha": "053b9948a289a683d7da9db2a8052b0f70063cab",
            "filename": "django/contrib/gis/geos/prototypes/io.py",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Fprototypes%2Fio.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Fprototypes%2Fio.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Fprototypes%2Fio.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -6,6 +6,8 @@\n from django.contrib.gis.geos.prototypes.geom import c_uchar_p, geos_char_p\n from django.contrib.gis.geos.prototypes.threadsafe import GEOSFunc\n \n+from django.utils import six\n+\n ### The WKB/WKT Reader/Writer structures and pointers ###\n class WKTReader_st(Structure): pass\n class WKTWriter_st(Structure): pass\n@@ -118,7 +120,7 @@ class _WKTReader(IOBase):\n     ptr_type = WKT_READ_PTR\n \n     def read(self, wkt):\n-        if not isinstance(wkt, basestring): raise TypeError\n+        if not isinstance(wkt, six.string_types): raise TypeError\n         return wkt_reader_read(self.ptr, wkt)\n \n class _WKBReader(IOBase):\n@@ -131,7 +133,7 @@ def read(self, wkb):\n         if isinstance(wkb, buffer):\n             wkb_s = str(wkb)\n             return wkb_reader_read(self.ptr, wkb_s, len(wkb_s))\n-        elif isinstance(wkb, basestring):\n+        elif isinstance(wkb, six.string_types):\n             return wkb_reader_read_hex(self.ptr, wkb, len(wkb))\n         else:\n             raise TypeError\n@@ -195,7 +197,7 @@ def _set_include_srid(self, include):\n # `ThreadLocalIO` object holds instances of the WKT and WKB reader/writer\n # objects that are local to the thread.  The `GEOSGeometry` internals\n # access these instances by calling the module-level functions, defined\n-# below. \n+# below.\n class ThreadLocalIO(threading.local):\n     wkt_r = None\n     wkt_w = None"
        },
        {
            "sha": "b1d00d5241869b30ebc6a86ea2e9dea05bc0c850",
            "filename": "django/contrib/gis/geos/tests/test_geos.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -8,6 +8,7 @@\n from django.contrib.gis.geos.libgeos import GEOS_PREPARE\n from django.contrib.gis.geometry.test_data import TestDataMixin\n \n+from django.utils import six\n from django.utils import unittest\n \n \n@@ -1004,15 +1005,15 @@ def test_valid_reason(self):\n \n         g = GEOSGeometry(\"POINT(0 0)\")\n         self.assertTrue(g.valid)\n-        self.assertTrue(isinstance(g.valid_reason, basestring))\n+        self.assertTrue(isinstance(g.valid_reason, six.string_types))\n         self.assertEqual(g.valid_reason, \"Valid Geometry\")\n \n         print(\"\\nBEGIN - expecting GEOS_NOTICE; safe to ignore.\\n\")\n \n         g = GEOSGeometry(\"LINESTRING(0 0, 0 0)\")\n \n         self.assertTrue(not g.valid)\n-        self.assertTrue(isinstance(g.valid_reason, basestring))\n+        self.assertTrue(isinstance(g.valid_reason, six.string_types))\n         self.assertTrue(g.valid_reason.startswith(\"Too few points in geometry component\"))\n \n         print(\"\\nEND - expecting GEOS_NOTICE; safe to ignore.\\n\")"
        },
        {
            "sha": "b39d705f03b98dce723d62b8423b903f3c7ffa98",
            "filename": "django/contrib/gis/geos/tests/test_io.py",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_io.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_io.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_io.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -1,6 +1,7 @@\n import binascii\n import unittest\n from django.contrib.gis.geos import GEOSGeometry, WKTReader, WKTWriter, WKBReader, WKBWriter, geos_version_info\n+from django.utils import six\n \n class GEOSIOTest(unittest.TestCase):\n \n@@ -17,7 +18,7 @@ def test01_wktreader(self):\n         for geom in (g1, g2):\n             self.assertEqual(ref, geom)\n \n-        # Should only accept basestring objects.\n+        # Should only accept six.string_types objects.\n         self.assertRaises(TypeError, wkt_r.read, 1)\n         self.assertRaises(TypeError, wkt_r.read, buffer('foo'))\n \n@@ -48,7 +49,7 @@ def test03_wkbreader(self):\n         bad_input = (1, 5.23, None, False)\n         for bad_wkb in bad_input:\n             self.assertRaises(TypeError, wkb_r.read, bad_wkb)\n-        \n+\n     def test04_wkbwriter(self):\n         wkb_w = WKBWriter()\n \n@@ -67,7 +68,7 @@ def test04_wkbwriter(self):\n         for bad_byteorder in (-1, 2, 523, 'foo', None):\n             # Equivalent of `wkb_w.byteorder = bad_byteorder`\n             self.assertRaises(ValueError, wkb_w._set_byteorder, bad_byteorder)\n-            \n+\n         # Setting the byteorder to 0 (for Big Endian)\n         wkb_w.byteorder = 0\n         self.assertEqual(hex2, wkb_w.write_hex(g))\n@@ -79,7 +80,7 @@ def test04_wkbwriter(self):\n         # Now, trying out the 3D and SRID flags.\n         g = GEOSGeometry('POINT (5 23 17)')\n         g.srid = 4326\n-        \n+\n         hex3d = '0101000080000000000000144000000000000037400000000000003140'\n         wkb3d = buffer(binascii.a2b_hex(hex3d))\n         hex3d_srid = '01010000A0E6100000000000000000144000000000000037400000000000003140'"
        },
        {
            "sha": "28603ac422744a0a82cb887dd46e60fbcaf0bb32",
            "filename": "django/contrib/gis/maps/google/overlays.py",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fmaps%2Fgoogle%2Foverlays.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fmaps%2Fgoogle%2Foverlays.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fmaps%2Fgoogle%2Foverlays.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -1,6 +1,7 @@\n from django.contrib.gis.geos import fromstr, Point, LineString, LinearRing, Polygon\n from django.utils.functional import total_ordering\n from django.utils.safestring import mark_safe\n+from django.utils import six\n \n \n class GEvent(object):\n@@ -98,7 +99,7 @@ def __init__(self, poly,\n           fill_opacity:\n             The opacity of the polygon fill.  Defaults to 0.4.\n         \"\"\"\n-        if isinstance(poly, basestring): poly = fromstr(poly)\n+        if isinstance(poly, six.string_types): poly = fromstr(poly)\n         if isinstance(poly, (tuple, list)): poly = Polygon(poly)\n         if not isinstance(poly, Polygon):\n             raise TypeError('GPolygon may only initialize on GEOS Polygons.')\n@@ -148,7 +149,7 @@ def __init__(self, geom, color='#0000ff', weight=2, opacity=1):\n             The opacity of the polyline, between 0 and 1.  Defaults to 1.\n         \"\"\"\n         # If a GEOS geometry isn't passed in, try to contsruct one.\n-        if isinstance(geom, basestring): geom = fromstr(geom)\n+        if isinstance(geom, six.string_types): geom = fromstr(geom)\n         if isinstance(geom, (tuple, list)): geom = Polygon(geom)\n         # Generating the lat/lng coordinate pairs.\n         if isinstance(geom, (LineString, LinearRing)):\n@@ -239,9 +240,9 @@ def __eq__(self, other):\n \n     def __lt__(self, other):\n         return self.varname < other.varname\n-    \n+\n     def __hash__(self):\n-        # XOR with hash of GIcon type so that hash('varname') won't \n+        # XOR with hash of GIcon type so that hash('varname') won't\n         # equal hash(GIcon('varname')).\n         return hash(self.__class__) ^ hash(self.varname)\n \n@@ -278,7 +279,7 @@ def __init__(self, geom, title=None, draggable=False, icon=None):\n            Draggable option for GMarker, disabled by default.\n         \"\"\"\n         # If a GEOS geometry isn't passed in, try to construct one.\n-        if isinstance(geom, basestring): geom = fromstr(geom)\n+        if isinstance(geom, six.string_types): geom = fromstr(geom)\n         if isinstance(geom, (tuple, list)): geom = Point(geom)\n         if isinstance(geom, Point):\n             self.latlng = self.latlng_from_coords(geom.coords)"
        },
        {
            "sha": "ba7817e51c7bf866d298d74e4db0b65c53919ae9",
            "filename": "django/contrib/gis/measure.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fmeasure.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Fmeasure.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fmeasure.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -58,7 +58,7 @@ class MeasureBase(object):\n     def __init__(self, default_unit=None, **kwargs):\n         value, self._default_unit = self.default_units(kwargs)\n         setattr(self, self.STANDARD_UNIT, value)\n-        if default_unit and isinstance(default_unit, basestring):\n+        if default_unit and isinstance(default_unit, six.string_types):\n             self._default_unit = default_unit\n \n     def _get_standard(self):"
        },
        {
            "sha": "770bbe63dba6cbe6f0713b5937a7ca76c67bd7bc",
            "filename": "django/contrib/gis/utils/layermapping.py",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Futils%2Flayermapping.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Futils%2Flayermapping.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Futils%2Flayermapping.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -17,6 +17,7 @@\n     OFTDate, OFTDateTime, OFTInteger, OFTReal, OFTString, OFTTime)\n from django.db import models, transaction\n from django.contrib.localflavor.us.models import USStateField\n+from django.utils import six\n \n # LayerMapping exceptions.\n class LayerMapError(Exception): pass\n@@ -74,7 +75,7 @@ def __init__(self, model, data, mapping, layer=0,\n         argument usage.\n         \"\"\"\n         # Getting the DataSource and the associated Layer.\n-        if isinstance(data, basestring):\n+        if isinstance(data, six.string_types):\n             self.ds = DataSource(data)\n         else:\n             self.ds = data\n@@ -249,7 +250,7 @@ def check_srs(self, source_srs):\n             sr = source_srs\n         elif isinstance(source_srs, self.spatial_backend.spatial_ref_sys()):\n             sr = source_srs.srs\n-        elif isinstance(source_srs, (int, basestring)):\n+        elif isinstance(source_srs, (int, six.string_types)):\n             sr = SpatialReference(source_srs)\n         else:\n             # Otherwise just pulling the SpatialReference from the layer\n@@ -266,7 +267,7 @@ def check_unique(self, unique):\n             # List of fields to determine uniqueness with\n             for attr in unique:\n                 if not attr in self.mapping: raise ValueError\n-        elif isinstance(unique, basestring):\n+        elif isinstance(unique, six.string_types):\n             # Only a single field passed in.\n             if unique not in self.mapping: raise ValueError\n         else:\n@@ -312,7 +313,7 @@ def unique_kwargs(self, kwargs):\n         will construct and return the uniqueness keyword arguments -- a subset\n         of the feature kwargs.\n         \"\"\"\n-        if isinstance(self.unique, basestring):\n+        if isinstance(self.unique, six.string_types):\n             return {self.unique : kwargs[self.unique]}\n         else:\n             return dict((fld, kwargs[fld]) for fld in self.unique)"
        },
        {
            "sha": "f87bb24c7fe6824c8852099ef87e45c3dc1a34c6",
            "filename": "django/contrib/gis/utils/ogrinspect.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Futils%2Fogrinspect.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Futils%2Fogrinspect.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Futils%2Fogrinspect.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -9,6 +9,7 @@\n # Requires GDAL to use.\n from django.contrib.gis.gdal import DataSource\n from django.contrib.gis.gdal.field import OFTDate, OFTDateTime, OFTInteger, OFTReal, OFTString, OFTTime\n+from django.utils import six\n \n def mapping(data_source, geom_name='geom', layer_key=0, multi_geom=False):\n     \"\"\"\n@@ -24,7 +25,7 @@ def mapping(data_source, geom_name='geom', layer_key=0, multi_geom=False):\n \n      `multi_geom` => Boolean (default: False) - specify as multigeometry.\n     \"\"\"\n-    if isinstance(data_source, basestring):\n+    if isinstance(data_source, six.string_types):\n         # Instantiating the DataSource from the string.\n         data_source = DataSource(data_source)\n     elif isinstance(data_source, DataSource):"
        },
        {
            "sha": "d60eed31bd98353dc88d493258621920969dd063",
            "filename": "django/contrib/gis/utils/wkt.py",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Futils%2Fwkt.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcontrib%2Fgis%2Futils%2Fwkt.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Futils%2Fwkt.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -2,9 +2,11 @@\n  Utilities for manipulating Geometry WKT.\n \"\"\"\n \n+from django.utils import six\n+\n def precision_wkt(geom, prec):\n     \"\"\"\n-    Returns WKT text of the geometry according to the given precision (an \n+    Returns WKT text of the geometry according to the given precision (an\n     integer or a string).  If the precision is an integer, then the decimal\n     places of coordinates WKT will be truncated to that number:\n \n@@ -14,12 +16,12 @@ def precision_wkt(geom, prec):\n      >>> precision(geom, 1)\n      'POINT (5.0 23.0)'\n \n-    If the precision is a string, it must be valid Python format string \n+    If the precision is a string, it must be valid Python format string\n     (e.g., '%20.7f') -- thus, you should know what you're doing.\n     \"\"\"\n     if isinstance(prec, int):\n         num_fmt = '%%.%df' % prec\n-    elif isinstance(prec, basestring):\n+    elif isinstance(prec, six.string_types):\n         num_fmt = prec\n     else:\n         raise TypeError"
        },
        {
            "sha": "e7724f1b918fac8fa91a7371ddf4d68be87618fe",
            "filename": "django/core/cache/backends/memcached.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -5,10 +5,12 @@\n \n from django.core.cache.backends.base import BaseCache, InvalidCacheBackendError\n \n+from django.utils import six\n+\n class BaseMemcachedCache(BaseCache):\n     def __init__(self, server, params, library, value_not_found_exception):\n         super(BaseMemcachedCache, self).__init__(params)\n-        if isinstance(server, basestring):\n+        if isinstance(server, six.string_types):\n             self._servers = server.split(';')\n         else:\n             self._servers = server"
        },
        {
            "sha": "4a74c34f1f10f6f561b3321ad3d85dda10336779",
            "filename": "django/core/mail/backends/filebased.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fmail%2Fbackends%2Ffilebased.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fmail%2Fbackends%2Ffilebased.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fbackends%2Ffilebased.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -6,6 +6,7 @@\n from django.conf import settings\n from django.core.exceptions import ImproperlyConfigured\n from django.core.mail.backends.console import EmailBackend as ConsoleEmailBackend\n+from django.utils import six\n \n class EmailBackend(ConsoleEmailBackend):\n     def __init__(self, *args, **kwargs):\n@@ -15,7 +16,7 @@ def __init__(self, *args, **kwargs):\n         else:\n             self.file_path = getattr(settings, 'EMAIL_FILE_PATH',None)\n         # Make sure self.file_path is a string.\n-        if not isinstance(self.file_path, basestring):\n+        if not isinstance(self.file_path, six.string_types):\n             raise ImproperlyConfigured('Path for saving emails is invalid: %r' % self.file_path)\n         self.file_path = os.path.abspath(self.file_path)\n         # Make sure that self.file_path is an directory if it exists."
        },
        {
            "sha": "629ad464f9117958b01718144d313e12ac45c5ae",
            "filename": "django/core/mail/message.py",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fmail%2Fmessage.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fmail%2Fmessage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fmessage.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -16,6 +16,7 @@\n from django.conf import settings\n from django.core.mail.utils import DNS_NAME\n from django.utils.encoding import smart_str, force_unicode\n+from django.utils import six\n \n \n # Don't BASE64-encode UTF-8 messages so that we avoid unwanted attention from\n@@ -96,7 +97,7 @@ def forbid_multi_line_headers(name, val, encoding):\n \n \n def sanitize_address(addr, encoding):\n-    if isinstance(addr, basestring):\n+    if isinstance(addr, six.string_types):\n         addr = parseaddr(force_unicode(addr))\n     nm, addr = addr\n     nm = str(Header(nm, encoding))\n@@ -180,17 +181,17 @@ def __init__(self, subject='', body='', from_email=None, to=None, bcc=None,\n         necessary encoding conversions.\n         \"\"\"\n         if to:\n-            assert not isinstance(to, basestring), '\"to\" argument must be a list or tuple'\n+            assert not isinstance(to, six.string_types), '\"to\" argument must be a list or tuple'\n             self.to = list(to)\n         else:\n             self.to = []\n         if cc:\n-            assert not isinstance(cc, basestring), '\"cc\" argument must be a list or tuple'\n+            assert not isinstance(cc, six.string_types), '\"cc\" argument must be a list or tuple'\n             self.cc = list(cc)\n         else:\n             self.cc = []\n         if bcc:\n-            assert not isinstance(bcc, basestring), '\"bcc\" argument must be a list or tuple'\n+            assert not isinstance(bcc, six.string_types), '\"bcc\" argument must be a list or tuple'\n             self.bcc = list(bcc)\n         else:\n             self.bcc = []"
        },
        {
            "sha": "51eeae4e916afe9d20cd0ebf9b7017668ea07bd1",
            "filename": "django/core/management/validation.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fvalidation.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -3,6 +3,7 @@\n from django.core.management.color import color_style\n from django.utils.encoding import smart_str\n from django.utils.itercompat import is_iterable\n+from django.utils import six\n \n class ModelErrorCollection:\n     def __init__(self, outfile=sys.stdout):\n@@ -93,7 +94,7 @@ def get_validation_errors(outfile, app=None):\n             if isinstance(f, models.FilePathField) and not (f.allow_files or f.allow_folders):\n                 e.add(opts, '\"%s\": FilePathFields must have either allow_files or allow_folders set to True.' % f.name)\n             if f.choices:\n-                if isinstance(f.choices, basestring) or not is_iterable(f.choices):\n+                if isinstance(f.choices, six.string_types) or not is_iterable(f.choices):\n                     e.add(opts, '\"%s\": \"choices\" should be iterable (e.g., a tuple or list).' % f.name)\n                 else:\n                     for c in f.choices:\n@@ -168,7 +169,7 @@ def get_validation_errors(outfile, app=None):\n             if f.unique:\n                 e.add(opts, \"ManyToManyFields cannot be unique.  Remove the unique argument on '%s'.\" % f.name)\n \n-            if f.rel.through is not None and not isinstance(f.rel.through, basestring):\n+            if f.rel.through is not None and not isinstance(f.rel.through, six.string_types):\n                 from_model, to_model = cls, f.rel.to\n                 if from_model == to_model and f.rel.symmetrical and not f.rel.through._meta.auto_created:\n                     e.add(opts, \"Many-to-many fields with intermediate tables cannot be symmetrical.\")\n@@ -239,7 +240,7 @@ def get_validation_errors(outfile, app=None):\n                             \"to %s and %s\" % (f.name, f.rel.through._meta.object_name,\n                                 f.rel.to._meta.object_name, cls._meta.object_name)\n                         )\n-            elif isinstance(f.rel.through, basestring):\n+            elif isinstance(f.rel.through, six.string_types):\n                 e.add(opts, \"'%s' specifies an m2m relation through model %s, \"\n                     \"which has not been installed\" % (f.name, f.rel.through)\n                 )"
        },
        {
            "sha": "19886f7d53c334b933c11059dd59ed6ef067f8de",
            "filename": "django/core/serializers/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fserializers%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fserializers%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fbase.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -6,6 +6,7 @@\n \n from django.db import models\n from django.utils.encoding import smart_unicode\n+from django.utils import six\n \n class SerializerDoesNotExist(KeyError):\n     \"\"\"The requested serializer was not found.\"\"\"\n@@ -123,7 +124,7 @@ def __init__(self, stream_or_string, **options):\n         Init this serializer given a stream or a string\n         \"\"\"\n         self.options = options\n-        if isinstance(stream_or_string, basestring):\n+        if isinstance(stream_or_string, six.string_types):\n             self.stream = BytesIO(stream_or_string)\n         else:\n             self.stream = stream_or_string"
        },
        {
            "sha": "8b56d0e7b89862b499d1482b527af682f2692e56",
            "filename": "django/core/serializers/json.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fserializers%2Fjson.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fserializers%2Fjson.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fjson.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -13,6 +13,7 @@\n from django.core.serializers.python import Serializer as PythonSerializer\n from django.core.serializers.python import Deserializer as PythonDeserializer\n from django.utils.encoding import smart_str\n+from django.utils import six\n from django.utils.timezone import is_aware\n \n class Serializer(PythonSerializer):\n@@ -63,7 +64,7 @@ def Deserializer(stream_or_string, **options):\n     if isinstance(stream_or_string, bytes):\n         stream_or_string = stream_or_string.decode('utf-8')\n     try:\n-        if isinstance(stream_or_string, basestring):\n+        if isinstance(stream_or_string, six.string_types):\n             objects = json.loads(stream_or_string)\n         else:\n             objects = json.load(stream_or_string)"
        },
        {
            "sha": "ac0e6cf82d1d689248d763695f9a451116de72f6",
            "filename": "django/core/serializers/pyyaml.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fpyyaml.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -13,6 +13,7 @@\n from django.core.serializers.python import Serializer as PythonSerializer\n from django.core.serializers.python import Deserializer as PythonDeserializer\n from django.utils.encoding import smart_str\n+from django.utils import six\n \n \n class DjangoSafeDumper(yaml.SafeDumper):\n@@ -53,7 +54,7 @@ def Deserializer(stream_or_string, **options):\n     \"\"\"\n     if isinstance(stream_or_string, bytes):\n         stream_or_string = stream_or_string.decode('utf-8')\n-    if isinstance(stream_or_string, basestring):\n+    if isinstance(stream_or_string, six.string_types):\n         stream = StringIO(stream_or_string)\n     else:\n         stream = stream_or_string"
        },
        {
            "sha": "e88975f8494a2a80b39873a37fa1e7499c47a722",
            "filename": "django/core/urlresolvers.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Furlresolvers.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Furlresolvers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Furlresolvers.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -19,6 +19,7 @@\n from django.utils.importlib import import_module\n from django.utils.module_loading import module_has_submodule\n from django.utils.regex_helper import normalize\n+from django.utils import six\n from django.utils.translation import get_language\n \n \n@@ -159,7 +160,7 @@ def regex(self):\n         \"\"\"\n         language_code = get_language()\n         if language_code not in self._regex_dict:\n-            if isinstance(self._regex, basestring):\n+            if isinstance(self._regex, six.string_types):\n                 regex = self._regex\n             else:\n                 regex = force_unicode(self._regex)\n@@ -228,7 +229,7 @@ def __init__(self, regex, urlconf_name, default_kwargs=None, app_name=None, name\n         LocaleRegexProvider.__init__(self, regex)\n         # urlconf_name is a string representing the module containing URLconfs.\n         self.urlconf_name = urlconf_name\n-        if not isinstance(urlconf_name, basestring):\n+        if not isinstance(urlconf_name, six.string_types):\n             self._urlconf_module = self.urlconf_name\n         self.callback = None\n         self.default_kwargs = default_kwargs or {}\n@@ -434,7 +435,7 @@ def reverse(viewname, urlconf=None, args=None, kwargs=None, prefix=None, current\n     if prefix is None:\n         prefix = get_script_prefix()\n \n-    if not isinstance(viewname, basestring):\n+    if not isinstance(viewname, six.string_types):\n         view = viewname\n     else:\n         parts = viewname.split(':')"
        },
        {
            "sha": "47c1cbf1cdd1fe3d89173e521daefc93cc138dcc",
            "filename": "django/core/validators.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fvalidators.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fcore%2Fvalidators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fvalidators.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -7,6 +7,7 @@\n from django.utils.translation import ugettext_lazy as _\n from django.utils.encoding import smart_unicode\n from django.utils.ipv6 import is_valid_ipv6_address\n+from django.utils import six\n \n # These values, if given to validate(), will trigger the self.required check.\n EMPTY_VALUES = (None, '', [], (), {})\n@@ -25,7 +26,7 @@ def __init__(self, regex=None, message=None, code=None):\n             self.code = code\n \n         # Compile the regex if it was not passed pre-compiled.\n-        if isinstance(self.regex, basestring):\n+        if isinstance(self.regex, six.string_types):\n             self.regex = re.compile(self.regex)\n \n     def __call__(self, value):"
        },
        {
            "sha": "9ac41a5741e13facbcdb321e36c5eedc4fd2dacf",
            "filename": "django/db/backends/oracle/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fbase.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -10,6 +10,7 @@\n import sys\n import warnings\n \n+from django.utils import six\n \n def _setup_environment(environ):\n     import platform\n@@ -361,7 +362,7 @@ def value_to_db_time(self, value):\n         if value is None:\n             return None\n \n-        if isinstance(value, basestring):\n+        if isinstance(value, six.string_types):\n             return datetime.datetime.strptime(value, '%H:%M:%S')\n \n         # Oracle doesn't support tz-aware times\n@@ -596,7 +597,7 @@ def __init__(self, param, cursor, strings_only=False):\n         if hasattr(param, 'input_size'):\n             # If parameter has `input_size` attribute, use that.\n             self.input_size = param.input_size\n-        elif isinstance(param, basestring) and len(param) > 4000:\n+        elif isinstance(param, six.string_types) and len(param) > 4000:\n             # Mark any string param greater than 4000 characters as a CLOB.\n             self.input_size = Database.CLOB\n         else:\n@@ -824,7 +825,7 @@ def to_unicode(s):\n     Convert strings to Unicode objects (and return all other data types\n     unchanged).\n     \"\"\"\n-    if isinstance(s, basestring):\n+    if isinstance(s, six.string_types):\n         return force_unicode(s)\n     return s\n "
        },
        {
            "sha": "9606b1b843669c950ebe0ecbce8a3a1d16ca8d92",
            "filename": "django/db/models/fields/__init__.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2F__init__.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -21,6 +21,7 @@\n from django.utils.translation import ugettext_lazy as _\n from django.utils.encoding import smart_unicode, force_unicode\n from django.utils.ipv6 import clean_ipv6_address\n+from django.utils import six\n \n class NOT_PROVIDED:\n     pass\n@@ -625,7 +626,7 @@ def get_internal_type(self):\n         return \"CharField\"\n \n     def to_python(self, value):\n-        if isinstance(value, basestring) or value is None:\n+        if isinstance(value, six.string_types) or value is None:\n             return value\n         return smart_unicode(value)\n \n@@ -864,7 +865,7 @@ def to_python(self, value):\n             raise exceptions.ValidationError(msg)\n \n     def _format(self, value):\n-        if isinstance(value, basestring) or value is None:\n+        if isinstance(value, six.string_types) or value is None:\n             return value\n         else:\n             return self.format_number(value)\n@@ -1185,7 +1186,7 @@ def get_internal_type(self):\n         return \"TextField\"\n \n     def get_prep_value(self, value):\n-        if isinstance(value, basestring) or value is None:\n+        if isinstance(value, six.string_types) or value is None:\n             return value\n         return smart_unicode(value)\n "
        },
        {
            "sha": "d3f1327315d94ce25433f5cd8b1f954cfbf67fb6",
            "filename": "django/db/models/fields/files.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -9,6 +9,7 @@\n from django.core.files.images import ImageFile\n from django.db.models import signals\n from django.utils.encoding import force_unicode, smart_str\n+from django.utils import six\n from django.utils.translation import ugettext_lazy as _\n \n class FieldFile(File):\n@@ -176,7 +177,7 @@ def __get__(self, instance=None, owner=None):\n         # subclasses might also want to subclass the attribute class]. This\n         # object understands how to convert a path to a file, and also how to\n         # handle None.\n-        if isinstance(file, basestring) or file is None:\n+        if isinstance(file, six.string_types) or file is None:\n             attr = self.field.attr_class(instance, self.field, file)\n             instance.__dict__[self.field.name] = attr\n "
        },
        {
            "sha": "2a2502b54ffe65a58fd0058d0e84d7bb495d6b18",
            "filename": "django/db/models/fields/related.py",
            "status": "modified",
            "additions": 11,
            "deletions": 10,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fmodels%2Ffields%2Frelated.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fmodels%2Ffields%2Frelated.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2Frelated.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -10,6 +10,7 @@\n from django.db.models.query_utils import QueryWrapper\n from django.db.models.deletion import CASCADE\n from django.utils.encoding import smart_unicode\n+from django.utils import six\n from django.utils.translation import ugettext_lazy as _, string_concat\n from django.utils.functional import curry, cached_property\n from django.core import exceptions\n@@ -104,7 +105,7 @@ def contribute_to_class(self, cls, name):\n                 }\n \n         other = self.rel.to\n-        if isinstance(other, basestring) or other._meta.pk is None:\n+        if isinstance(other, six.string_types) or other._meta.pk is None:\n             def resolve_related_class(field, model, cls):\n                 field.rel.to = model\n                 field.do_related_class(model, cls)\n@@ -865,7 +866,7 @@ def __init__(self, to, field_name, related_name=None, limit_choices_to=None,\n         try:\n             to._meta\n         except AttributeError: # to._meta doesn't exist, so it must be RECURSIVE_RELATIONSHIP_CONSTANT\n-            assert isinstance(to, basestring), \"'to' must be either a model, a model name or the string %r\" % RECURSIVE_RELATIONSHIP_CONSTANT\n+            assert isinstance(to, six.string_types), \"'to' must be either a model, a model name or the string %r\" % RECURSIVE_RELATIONSHIP_CONSTANT\n         self.to, self.field_name = to, field_name\n         self.related_name = related_name\n         if limit_choices_to is None:\n@@ -933,7 +934,7 @@ def __init__(self, to, to_field=None, rel_class=ManyToOneRel, **kwargs):\n         try:\n             to_name = to._meta.object_name.lower()\n         except AttributeError: # to._meta doesn't exist, so it must be RECURSIVE_RELATIONSHIP_CONSTANT\n-            assert isinstance(to, basestring), \"%s(%r) is invalid. First parameter to ForeignKey must be either a model, a model name, or the string %r\" % (self.__class__.__name__, to, RECURSIVE_RELATIONSHIP_CONSTANT)\n+            assert isinstance(to, six.string_types), \"%s(%r) is invalid. First parameter to ForeignKey must be either a model, a model name, or the string %r\" % (self.__class__.__name__, to, RECURSIVE_RELATIONSHIP_CONSTANT)\n         else:\n             assert not to._meta.abstract, \"%s cannot define a relation with abstract class %s\" % (self.__class__.__name__, to._meta.object_name)\n             # For backwards compatibility purposes, we need to *try* and set\n@@ -1004,7 +1005,7 @@ def value_to_string(self, obj):\n     def contribute_to_class(self, cls, name):\n         super(ForeignKey, self).contribute_to_class(cls, name)\n         setattr(cls, self.name, ReverseSingleRelatedObjectDescriptor(self))\n-        if isinstance(self.rel.to, basestring):\n+        if isinstance(self.rel.to, six.string_types):\n             target = self.rel.to\n         else:\n             target = self.rel.to._meta.db_table\n@@ -1022,7 +1023,7 @@ def contribute_to_related_class(self, cls, related):\n \n     def formfield(self, **kwargs):\n         db = kwargs.pop('using', None)\n-        if isinstance(self.rel.to, basestring):\n+        if isinstance(self.rel.to, six.string_types):\n             raise ValueError(\"Cannot create form field for %r yet, because \"\n                              \"its related model %r has not been loaded yet\" %\n                              (self.name, self.rel.to))\n@@ -1079,13 +1080,13 @@ def save_form_data(self, instance, data):\n def create_many_to_many_intermediary_model(field, klass):\n     from django.db import models\n     managed = True\n-    if isinstance(field.rel.to, basestring) and field.rel.to != RECURSIVE_RELATIONSHIP_CONSTANT:\n+    if isinstance(field.rel.to, six.string_types) and field.rel.to != RECURSIVE_RELATIONSHIP_CONSTANT:\n         to_model = field.rel.to\n         to = to_model.split('.')[-1]\n         def set_managed(field, model, cls):\n             field.rel.through._meta.managed = model._meta.managed or cls._meta.managed\n         add_lazy_relation(klass, field, to_model, set_managed)\n-    elif isinstance(field.rel.to, basestring):\n+    elif isinstance(field.rel.to, six.string_types):\n         to = klass._meta.object_name\n         to_model = klass\n         managed = klass._meta.managed\n@@ -1124,7 +1125,7 @@ def __init__(self, to, **kwargs):\n         try:\n             assert not to._meta.abstract, \"%s cannot define a relation with abstract class %s\" % (self.__class__.__name__, to._meta.object_name)\n         except AttributeError: # to._meta doesn't exist, so it must be RECURSIVE_RELATIONSHIP_CONSTANT\n-            assert isinstance(to, basestring), \"%s(%r) is invalid. First parameter to ManyToManyField must be either a model, a model name, or the string %r\" % (self.__class__.__name__, to, RECURSIVE_RELATIONSHIP_CONSTANT)\n+            assert isinstance(to, six.string_types), \"%s(%r) is invalid. First parameter to ManyToManyField must be either a model, a model name, or the string %r\" % (self.__class__.__name__, to, RECURSIVE_RELATIONSHIP_CONSTANT)\n             # Python 2.6 and earlier require dictionary keys to be of str type,\n             # not unicode and class names must be ASCII (in Python 2.x), so we\n             # forcibly coerce it here (breaks early if there's a problem).\n@@ -1232,12 +1233,12 @@ def contribute_to_class(self, cls, name):\n \n         # Populate some necessary rel arguments so that cross-app relations\n         # work correctly.\n-        if isinstance(self.rel.through, basestring):\n+        if isinstance(self.rel.through, six.string_types):\n             def resolve_through_model(field, model, cls):\n                 field.rel.through = model\n             add_lazy_relation(cls, self, self.rel.through, resolve_through_model)\n \n-        if isinstance(self.rel.to, basestring):\n+        if isinstance(self.rel.to, six.string_types):\n             target = self.rel.to\n         else:\n             target = self.rel.to._meta.db_table"
        },
        {
            "sha": "7308a15c6bd12e7c4324fd13de3f214d72ec6780",
            "filename": "django/db/models/options.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fmodels%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Fmodels%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Foptions.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -10,6 +10,7 @@\n from django.utils.translation import activate, deactivate_all, get_language, string_concat\n from django.utils.encoding import force_unicode, smart_str\n from django.utils.datastructures import SortedDict\n+from django.utils import six\n \n # Calculate the verbose_name by converting from InitialCaps to \"lowercase with spaces\".\n get_verbose_name = lambda class_name: re.sub('(((?<=[a-z])[A-Z])|([A-Z](?![A-Z]|$)))', ' \\\\1', class_name).lower().strip()\n@@ -400,7 +401,7 @@ def _fill_related_objects_cache(self):\n         proxy_cache = cache.copy()\n         for klass in get_models(include_auto_created=True, only_installed=False):\n             for f in klass._meta.local_fields:\n-                if f.rel and not isinstance(f.rel.to, basestring):\n+                if f.rel and not isinstance(f.rel.to, six.string_types):\n                     if self == f.rel.to._meta:\n                         cache[RelatedObject(f.rel.to, klass, f)] = None\n                         proxy_cache[RelatedObject(f.rel.to, klass, f)] = None\n@@ -442,7 +443,7 @@ def _fill_related_many_to_many_cache(self):\n                     cache[obj] = model\n         for klass in get_models(only_installed=False):\n             for f in klass._meta.local_many_to_many:\n-                if f.rel and not isinstance(f.rel.to, basestring) and self == f.rel.to._meta:\n+                if f.rel and not isinstance(f.rel.to, six.string_types) and self == f.rel.to._meta:\n                     cache[RelatedObject(f.rel.to, klass, f)] = None\n         if app_cache_ready():\n             self._related_many_to_many_cache = cache"
        },
        {
            "sha": "0ce09bab70ed8f1c03fc302a732dba6a15c2904f",
            "filename": "django/db/utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fdb%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Futils.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -4,6 +4,7 @@\n from django.conf import settings\n from django.core.exceptions import ImproperlyConfigured\n from django.utils.importlib import import_module\n+from django.utils import six\n \n \n DEFAULT_DB_ALIAS = 'default'\n@@ -108,7 +109,7 @@ class ConnectionRouter(object):\n     def __init__(self, routers):\n         self.routers = []\n         for r in routers:\n-            if isinstance(r, basestring):\n+            if isinstance(r, six.string_types):\n                 try:\n                     module_name, klass_name = r.rsplit('.', 1)\n                     module = import_module(module_name)"
        },
        {
            "sha": "4e11a4ee062b922f1a1a13396ba023406ac28101",
            "filename": "django/forms/extras/widgets.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fforms%2Fextras%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fforms%2Fextras%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fextras%2Fwidgets.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -11,6 +11,7 @@\n from django.utils.dates import MONTHS\n from django.utils.safestring import mark_safe\n from django.utils.formats import get_format\n+from django.utils import six\n from django.conf import settings\n \n __all__ = ('SelectDateWidget',)\n@@ -64,7 +65,7 @@ def render(self, name, value, attrs=None):\n             year_val, month_val, day_val = value.year, value.month, value.day\n         except AttributeError:\n             year_val = month_val = day_val = None\n-            if isinstance(value, basestring):\n+            if isinstance(value, six.string_types):\n                 if settings.USE_L10N:\n                     try:\n                         input_format = get_format('DATE_INPUT_FORMATS')[0]"
        },
        {
            "sha": "4c4209dddd1cdd19c8f4fd213cf9e1254b6195b3",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -22,6 +22,7 @@\n from django.utils import formats\n from django.utils.encoding import smart_unicode, force_unicode\n from django.utils.ipv6 import clean_ipv6_address\n+from django.utils import six\n from django.utils.translation import ugettext_lazy as _\n \n # Provide this import for backwards compatibility.\n@@ -445,7 +446,7 @@ def _get_regex(self):\n         return self._regex\n \n     def _set_regex(self, regex):\n-        if isinstance(regex, basestring):\n+        if isinstance(regex, six.string_types):\n             regex = re.compile(regex, re.UNICODE)\n         self._regex = regex\n         if hasattr(self, '_regex_validator') and self._regex_validator in self.validators:\n@@ -633,7 +634,7 @@ def to_python(self, value):\n         # will submit for False. Also check for '0', since this is what\n         # RadioSelect will provide. Because bool(\"True\") == bool('1') == True,\n         # we don't need to handle that explicitly.\n-        if isinstance(value, basestring) and value.lower() in ('false', '0'):\n+        if isinstance(value, six.string_types) and value.lower() in ('false', '0'):\n             value = False\n         else:\n             value = bool(value)"
        },
        {
            "sha": "f2446efcdf9a4cd49c6d671842c66b578bbb2697",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -16,6 +16,7 @@\n from django.utils.translation import ugettext, ugettext_lazy\n from django.utils.encoding import StrAndUnicode, force_unicode\n from django.utils.safestring import mark_safe\n+from django.utils import six\n from django.utils import datetime_safe, formats\n from django.utils import six\n \n@@ -522,7 +523,7 @@ def value_from_datadict(self, data, files, name):\n         value = data.get(name)\n         # Translate true and false strings to boolean values.\n         values =  {'true': True, 'false': False}\n-        if isinstance(value, basestring):\n+        if isinstance(value, six.string_types):\n             value = values.get(value.lower(), value)\n         return value\n "
        },
        {
            "sha": "cbf6de2d400b58d0554eda5184023a5c86e0e2db",
            "filename": "django/template/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplate%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplate%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fbase.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -18,6 +18,7 @@\n from django.utils.formats import localize\n from django.utils.html import escape\n from django.utils.module_loading import module_has_submodule\n+from django.utils import six\n from django.utils.timezone import template_localtime\n \n \n@@ -1188,7 +1189,7 @@ def render(self, context):\n                         from django.template.loader import get_template, select_template\n                         if isinstance(file_name, Template):\n                             t = file_name\n-                        elif not isinstance(file_name, basestring) and is_iterable(file_name):\n+                        elif not isinstance(file_name, six.string_types) and is_iterable(file_name):\n                             t = select_template(file_name)\n                         else:\n                             t = get_template(file_name)"
        },
        {
            "sha": "cfffb4014e481ce3836355e166b74688ebed4273",
            "filename": "django/template/loader.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplate%2Floader.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplate%2Floader.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Floader.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -29,6 +29,7 @@\n from django.template.base import Origin, Template, Context, TemplateDoesNotExist, add_to_builtins\n from django.utils.importlib import import_module\n from django.conf import settings\n+from django.utils import six\n \n template_source_loaders = None\n \n@@ -89,7 +90,7 @@ def find_template_loader(loader):\n         loader, args = loader[0], loader[1:]\n     else:\n         args = []\n-    if isinstance(loader, basestring):\n+    if isinstance(loader, six.string_types):\n         module, attr = loader.rsplit('.', 1)\n         try:\n             mod = import_module(module)"
        },
        {
            "sha": "800e060c746534025db4c693580a9757864e0354",
            "filename": "django/template/response.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplate%2Fresponse.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplate%2Fresponse.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fresponse.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -1,5 +1,6 @@\n from django.http import HttpResponse\n from django.template import loader, Context, RequestContext\n+from django.utils import six\n \n \n class ContentNotRenderedError(Exception):\n@@ -53,7 +54,7 @@ def resolve_template(self, template):\n         \"Accepts a template object, path-to-template or list of paths\"\n         if isinstance(template, (list, tuple)):\n             return loader.select_template(template)\n-        elif isinstance(template, basestring):\n+        elif isinstance(template, six.string_types):\n             return loader.get_template(template)\n         else:\n             return template"
        },
        {
            "sha": "509ab6707de200c50dc0c364b8bcd1abd4eb0ffb",
            "filename": "django/templatetags/i18n.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplatetags%2Fi18n.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplatetags%2Fi18n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fi18n.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -5,6 +5,7 @@\n     TokenParser, Library, TOKEN_TEXT, TOKEN_VAR)\n from django.template.base import _render_value_in_context\n from django.template.defaulttags import token_kwargs\n+from django.utils import six\n from django.utils import translation\n \n \n@@ -76,7 +77,7 @@ def __init__(self, filter_expression, noop, asvar=None,\n         self.asvar = asvar\n         self.message_context = message_context\n         self.filter_expression = filter_expression\n-        if isinstance(self.filter_expression.var, basestring):\n+        if isinstance(self.filter_expression.var, six.string_types):\n             self.filter_expression.var = Variable(\"'%s'\" %\n                                                   self.filter_expression.var)\n "
        },
        {
            "sha": "96210f189d5a5254026a45263065764a2aa5b398",
            "filename": "django/templatetags/tz.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplatetags%2Ftz.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftemplatetags%2Ftz.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Ftz.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -7,6 +7,7 @@\n \n from django.template import Node\n from django.template import TemplateSyntaxError, Library\n+from django.utils import six\n from django.utils import timezone\n \n register = Library()\n@@ -64,7 +65,7 @@ def do_timezone(value, arg):\n     # Obtain a tzinfo instance\n     if isinstance(arg, tzinfo):\n         tz = arg\n-    elif isinstance(arg, basestring) and pytz is not None:\n+    elif isinstance(arg, six.string_types) and pytz is not None:\n         try:\n             tz = pytz.timezone(arg)\n         except pytz.UnknownTimeZoneError:"
        },
        {
            "sha": "0388714094712cec41d92bb77b8ce3cc8d70d69f",
            "filename": "django/test/_doctest.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftest%2F_doctest.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftest%2F_doctest.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2F_doctest.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -480,7 +480,7 @@ def __init__(self, examples, globs, name, filename, lineno, docstring):\n         Create a new DocTest containing the given examples.  The\n         DocTest's globals are initialized with a copy of `globs`.\n         \"\"\"\n-        assert not isinstance(examples, basestring), \\\n+        assert not isinstance(examples, six.string_types), \\\n                \"DocTest no longer accepts str; use DocTestParser instead\"\n         self.examples = examples\n         self.docstring = docstring\n@@ -906,13 +906,13 @@ def _find(self, tests, obj, name, module, source_lines, globs, seen):\n         # Look for tests in a module's __test__ dictionary.\n         if inspect.ismodule(obj) and self._recurse:\n             for valname, val in getattr(obj, '__test__', {}).items():\n-                if not isinstance(valname, basestring):\n+                if not isinstance(valname, six.string_types):\n                     raise ValueError(\"DocTestFinder.find: __test__ keys \"\n                                      \"must be strings: %r\" %\n                                      (type(valname),))\n                 if not (inspect.isfunction(val) or inspect.isclass(val) or\n                         inspect.ismethod(val) or inspect.ismodule(val) or\n-                        isinstance(val, basestring)):\n+                        isinstance(val, six.string_types)):\n                     raise ValueError(\"DocTestFinder.find: __test__ values \"\n                                      \"must be strings, functions, methods, \"\n                                      \"classes, or modules: %r\" %\n@@ -945,15 +945,15 @@ def _get_test(self, obj, name, module, globs, source_lines):\n         \"\"\"\n         # Extract the object's docstring.  If it doesn't have one,\n         # then return None (no test for this object).\n-        if isinstance(obj, basestring):\n+        if isinstance(obj, six.string_types):\n             docstring = obj\n         else:\n             try:\n                 if obj.__doc__ is None:\n                     docstring = ''\n                 else:\n                     docstring = obj.__doc__\n-                    if not isinstance(docstring, basestring):\n+                    if not isinstance(docstring, six.string_types):\n                         docstring = str(docstring)\n             except (TypeError, AttributeError):\n                 docstring = ''"
        },
        {
            "sha": "7b6cdaa2a4c6612301e9b62ca99b55ec3d994464",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -116,7 +116,7 @@ def encode_multipart(boundary, data):\n     for (key, value) in data.items():\n         if is_file(value):\n             lines.extend(encode_file(boundary, key, value))\n-        elif not isinstance(value, basestring) and is_iterable(value):\n+        elif not isinstance(value, six.string_types) and is_iterable(value):\n             for item in value:\n                 if is_file(item):\n                     lines.extend(encode_file(boundary, key, item))"
        },
        {
            "sha": "a44eb72322e70968b53925465a087480c435668c",
            "filename": "django/test/html.py",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftest%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftest%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fhtml.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -8,6 +8,7 @@\n from HTMLParser import HTMLParseError\n from django.utils.encoding import force_unicode\n from django.utils.html_parser import HTMLParser\n+from django.utils import six\n \n \n WHITESPACE = re.compile('\\s+')\n@@ -24,19 +25,19 @@ def __init__(self, name, attributes):\n         self.children = []\n \n     def append(self, element):\n-        if isinstance(element, basestring):\n+        if isinstance(element, six.string_types):\n             element = force_unicode(element)\n             element = normalize_whitespace(element)\n             if self.children:\n-                if isinstance(self.children[-1], basestring):\n+                if isinstance(self.children[-1], six.string_types):\n                     self.children[-1] += element\n                     self.children[-1] = normalize_whitespace(self.children[-1])\n                     return\n         elif self.children:\n             # removing last children if it is only whitespace\n             # this can result in incorrect dom representations since\n             # whitespace between inline tags like <span> is significant\n-            if isinstance(self.children[-1], basestring):\n+            if isinstance(self.children[-1], six.string_types):\n                 if self.children[-1].isspace():\n                     self.children.pop()\n         if element:\n@@ -45,7 +46,7 @@ def append(self, element):\n     def finalize(self):\n         def rstrip_last_element(children):\n             if children:\n-                if isinstance(children[-1], basestring):\n+                if isinstance(children[-1], six.string_types):\n                     children[-1] = children[-1].rstrip()\n                     if not children[-1]:\n                         children.pop()\n@@ -54,7 +55,7 @@ def rstrip_last_element(children):\n \n         rstrip_last_element(self.children)\n         for i, child in enumerate(self.children):\n-            if isinstance(child, basestring):\n+            if isinstance(child, six.string_types):\n                 self.children[i] = child.strip()\n             elif hasattr(child, 'finalize'):\n                 child.finalize()\n@@ -87,15 +88,15 @@ def __ne__(self, element):\n         return not self.__eq__(element)\n \n     def _count(self, element, count=True):\n-        if not isinstance(element, basestring):\n+        if not isinstance(element, six.string_types):\n             if self == element:\n                 return 1\n         i = 0\n         for child in self.children:\n             # child is text content and element is also text content, then\n             # make a simple \"text\" in \"text\"\n-            if isinstance(child, basestring):\n-                if isinstance(element, basestring):\n+            if isinstance(child, six.string_types):\n+                if isinstance(element, six.string_types):\n                     if count:\n                         i += child.count(element)\n                     elif element in child:\n@@ -219,6 +220,6 @@ def parse_html(html):\n     document.finalize()\n     # Removing ROOT element if it's not necessary\n     if len(document.children) == 1:\n-        if not isinstance(document.children[0], basestring):\n+        if not isinstance(document.children[0], six.string_types):\n             document = document.children[0]\n     return document"
        },
        {
            "sha": "4b121bdfb0e4ac0b3edb4b422d6486345c150197",
            "filename": "django/test/utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftest%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Ftest%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Futils.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -6,6 +6,7 @@\n from django.template.loaders import cached\n from django.utils.translation import deactivate\n from django.utils.functional import wraps\n+from django.utils import six\n \n \n __all__ = (\n@@ -35,7 +36,7 @@ class ContextList(list):\n     in a list of context objects.\n     \"\"\"\n     def __getitem__(self, key):\n-        if isinstance(key, basestring):\n+        if isinstance(key, six.string_types):\n             for subcontext in self:\n                 if key in subcontext:\n                     return subcontext[key]"
        },
        {
            "sha": "6b5d73290f62a29d7d026c920f0913f53a3709b4",
            "filename": "django/utils/archive.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Farchive.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Farchive.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Farchive.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -27,6 +27,8 @@\n import tarfile\n import zipfile\n \n+from django.utils import six\n+\n \n class ArchiveException(Exception):\n     \"\"\"\n@@ -58,7 +60,7 @@ def __init__(self, file):\n     @staticmethod\n     def _archive_cls(file):\n         cls = None\n-        if isinstance(file, basestring):\n+        if isinstance(file, six.string_types):\n             filename = file\n         else:\n             try:"
        },
        {
            "sha": "6bbdccc58c5b671b1f15c4cbae73a78b2a295f2a",
            "filename": "django/utils/checksums.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fchecksums.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fchecksums.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fchecksums.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -4,6 +4,8 @@\n \n __all__ = ['luhn',]\n \n+from django.utils import six\n+\n LUHN_ODD_LOOKUP = (0, 2, 4, 6, 8, 1, 3, 5, 7, 9) # sum_of_digits(index * 2)\n \n def luhn(candidate):\n@@ -12,7 +14,7 @@ def luhn(candidate):\n     algorithm (used in validation of, for example, credit cards).\n     Both numeric and string candidates are accepted.\n     \"\"\"\n-    if not isinstance(candidate, basestring):\n+    if not isinstance(candidate, six.string_types):\n         candidate = str(candidate)\n     try:\n         evens = sum([int(c) for c in candidate[-1::-2]])"
        },
        {
            "sha": "b4d6d66b3c4420335d6e15b285a40dc74a3d5fc0",
            "filename": "django/utils/dictconfig.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fdictconfig.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fdictconfig.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fdictconfig.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -23,6 +23,8 @@\n import sys\n import types\n \n+from django.utils import six\n+\n IDENTIFIER = re.compile('^[a-z_][a-z0-9_]*$', re.I)\n \n def valid_ident(s):\n@@ -231,7 +233,7 @@ def convert(self, value):\n                  isinstance(value, tuple):\n             value = ConvertingTuple(value)\n             value.configurator = self\n-        elif isinstance(value, basestring): # str for py3k\n+        elif isinstance(value, six.string_types): # str for py3k\n             m = self.CONVERT_PATTERN.match(value)\n             if m:\n                 d = m.groupdict()"
        },
        {
            "sha": "716d46ceff7c0f3ec92ad33c6a80e0668c9239c6",
            "filename": "django/utils/encoding.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fencoding.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fencoding.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fencoding.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -64,7 +64,7 @@ def force_unicode(s, encoding='utf-8', strings_only=False, errors='strict'):\n     if strings_only and is_protected_type(s):\n         return s\n     try:\n-        if not isinstance(s, basestring,):\n+        if not isinstance(s, six.string_types,):\n             if hasattr(s, '__unicode__'):\n                 s = unicode(s)\n             else:\n@@ -109,7 +109,7 @@ def smart_str(s, encoding='utf-8', strings_only=False, errors='strict'):\n         return s\n     if isinstance(s, Promise):\n         return unicode(s).encode(encoding, errors)\n-    elif not isinstance(s, basestring):\n+    elif not isinstance(s, six.string_types):\n         try:\n             return str(s)\n         except UnicodeEncodeError:"
        },
        {
            "sha": "eae40970da007ecb3323390fdea160a745748154",
            "filename": "django/utils/formats.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fformats.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fformats.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fformats.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -178,7 +178,7 @@ def sanitize_separators(value):\n     \"\"\"\n     if settings.USE_L10N:\n         decimal_separator = get_format('DECIMAL_SEPARATOR')\n-        if isinstance(value, basestring):\n+        if isinstance(value, six.string_types):\n             parts = []\n             if decimal_separator in value:\n                 value, decimals = value.split(decimal_separator, 1)"
        },
        {
            "sha": "8953a21e955ff76eb1db6868f8228f4b37c9f130",
            "filename": "django/utils/regex_helper.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fregex_helper.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Fregex_helper.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fregex_helper.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -7,6 +7,8 @@\n \"\"\"\n from __future__ import unicode_literals\n \n+from django.utils import six\n+\n # Mapping of an escape character to a representative of that class. So, e.g.,\n # \"\\w\" is replaced by \"x\" in a reverse URL. A value of None means to ignore\n # this sequence. Any missing key is mapped to itself.\n@@ -302,7 +304,7 @@ def flatten_result(source):\n     result_args = [[]]\n     pos = last = 0\n     for pos, elt in enumerate(source):\n-        if isinstance(elt, basestring):\n+        if isinstance(elt, six.string_types):\n             continue\n         piece = ''.join(source[last:pos])\n         if isinstance(elt, Group):"
        },
        {
            "sha": "68c214d26f1ea11942a6513c452d67c2ac98e14d",
            "filename": "django/utils/timezone.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Ftimezone.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Futils%2Ftimezone.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftimezone.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -13,6 +13,7 @@\n     pytz = None\n \n from django.conf import settings\n+from django.utils import six\n \n __all__ = [\n     'utc', 'get_default_timezone', 'get_current_timezone',\n@@ -107,7 +108,7 @@ def get_default_timezone():\n     \"\"\"\n     global _localtime\n     if _localtime is None:\n-        if isinstance(settings.TIME_ZONE, basestring) and pytz is not None:\n+        if isinstance(settings.TIME_ZONE, six.string_types) and pytz is not None:\n             _localtime = pytz.timezone(settings.TIME_ZONE)\n         else:\n             _localtime = LocalTimezone()\n@@ -160,7 +161,7 @@ def activate(timezone):\n     \"\"\"\n     if isinstance(timezone, tzinfo):\n         _active.value = timezone\n-    elif isinstance(timezone, basestring) and pytz is not None:\n+    elif isinstance(timezone, six.string_types) and pytz is not None:\n         _active.value = pytz.timezone(timezone)\n     else:\n         raise ValueError(\"Invalid timezone: %r\" % timezone)"
        },
        {
            "sha": "65226b5ca7e7898bb57fbc59fae18b788af4a92c",
            "filename": "django/views/debug.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fviews%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fviews%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdebug.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -15,6 +15,7 @@\n from django.utils.html import escape\n from django.utils.importlib import import_module\n from django.utils.encoding import smart_unicode, smart_str\n+from django.utils import six\n \n HIDDEN_SETTINGS = re.compile('API|TOKEN|KEY|SECRET|PASS|PROFANITIES_LIST|SIGNATURE')\n \n@@ -214,7 +215,7 @@ def __init__(self, request, exc_type, exc_value, tb, is_email=False):\n         self.loader_debug_info = None\n \n         # Handle deprecated string exceptions\n-        if isinstance(self.exc_type, basestring):\n+        if isinstance(self.exc_type, six.string_types):\n             self.exc_value = Exception('Deprecated String Exception: %r' % self.exc_type)\n             self.exc_type = type(self.exc_value)\n "
        },
        {
            "sha": "b0f64f49024ed7af3b36b7585c06ebac3392a63e",
            "filename": "django/views/i18n.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fviews%2Fi18n.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/django%2Fviews%2Fi18n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fi18n.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -8,6 +8,7 @@\n from django.utils.text import javascript_quote\n from django.utils.encoding import smart_unicode\n from django.utils.formats import get_format_modules, get_format\n+from django.utils import six\n \n def set_language(request):\n     \"\"\"\n@@ -52,7 +53,7 @@ def get_formats():\n             result[attr] = get_format(attr)\n     src = []\n     for k, v in result.items():\n-        if isinstance(v, (basestring, int)):\n+        if isinstance(v, (six.string_types, int)):\n             src.append(\"formats['%s'] = '%s';\\n\" % (javascript_quote(k), javascript_quote(smart_unicode(v))))\n         elif isinstance(v, (tuple, list)):\n             v = [javascript_quote(smart_unicode(value)) for value in v]\n@@ -184,7 +185,7 @@ def javascript_catalog(request, domain='djangojs', packages=None):\n                 activate(request.GET['language'])\n     if packages is None:\n         packages = ['django.conf']\n-    if isinstance(packages, basestring):\n+    if isinstance(packages, six.string_types):\n         packages = packages.split('+')\n     packages = [p for p in packages if p == 'django.conf' or p in settings.INSTALLED_APPS]\n     default_locale = to_locale(settings.LANGUAGE_CODE)\n@@ -258,7 +259,7 @@ def javascript_catalog(request, domain='djangojs', packages=None):\n     for k, v in t.items():\n         if k == '':\n             continue\n-        if isinstance(k, basestring):\n+        if isinstance(k, six.string_types):\n             csrc.append(\"catalog['%s'] = '%s';\\n\" % (javascript_quote(k), javascript_quote(v)))\n         elif isinstance(k, tuple):\n             if k[0] not in pdict:"
        },
        {
            "sha": "553b031de3657a2a096c37a1d2dd8e325fd17ec3",
            "filename": "tests/modeltests/field_subclassing/fields.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -4,6 +4,7 @@\n \n from django.db import models\n from django.utils.encoding import force_unicode\n+from django.utils import six\n \n \n class Small(object):\n@@ -66,7 +67,7 @@ def to_python(self, value):\n         if not value:\n             return None\n \n-        if isinstance(value, basestring):\n+        if isinstance(value, six.string_types):\n             value = json.loads(value)\n         return value\n "
        },
        {
            "sha": "73a3aa3e7aaf258c2938d031cae4e84ff20826b7",
            "filename": "tests/modeltests/serializers/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fmodeltests%2Fserializers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fmodeltests%2Fserializers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fserializers%2Ftests.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -10,6 +10,7 @@\n from django.core import serializers\n from django.db import transaction, connection\n from django.test import TestCase, TransactionTestCase, Approximate\n+from django.utils import six\n from django.utils import unittest\n \n from .models import (Category, Author, Article, AuthorProfile, Actor, Movie,\n@@ -461,7 +462,7 @@ def _get_field_values(serial_str, field_name):\n                     # yaml.safe_load will return non-string objects for some\n                     # of the fields we are interested in, this ensures that\n                     # everything comes back as a string\n-                    if isinstance(field_value, basestring):\n+                    if isinstance(field_value, six.string_types):\n                         ret_list.append(field_value)\n                     else:\n                         ret_list.append(str(field_value))"
        },
        {
            "sha": "feb2ade4580afd63a7e1ad0da5d738250f6aa45d",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -35,10 +35,11 @@\n from django.core.files.uploadedfile import SimpleUploadedFile\n from django.forms import *\n from django.test import SimpleTestCase\n+from django.utils import six\n \n \n def fix_os_paths(x):\n-    if isinstance(x, basestring):\n+    if isinstance(x, six.string_types):\n         return x.replace('\\\\', '/')\n     elif isinstance(x, tuple):\n         return tuple(fix_os_paths(list(x)))"
        },
        {
            "sha": "e00ef72d598b14a3c8f93a25bd7fc74aa7c7c5df",
            "filename": "tests/regressiontests/i18n/commands/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fregressiontests%2Fi18n%2Fcommands%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fregressiontests%2Fi18n%2Fcommands%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Ftests.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -2,13 +2,15 @@\n import re\n from subprocess import Popen, PIPE\n \n+from django.utils import six\n+\n can_run_extraction_tests = False\n can_run_compilation_tests = False\n \n def find_command(cmd, path=None, pathext=None):\n     if path is None:\n         path = os.environ.get('PATH', []).split(os.pathsep)\n-    if isinstance(path, basestring):\n+    if isinstance(path, six.string_types):\n         path = [path]\n     # check if there are funny path extensions for executables, e.g. Windows\n     if pathext is None:"
        },
        {
            "sha": "e05729cf7f74bf1cf2304c73ee6e93288ec9e487",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=3cb2457f46b3e40ff6b6acffcb3fd44cbea091e5",
            "patch": "@@ -20,6 +20,7 @@\n from django.utils.encoding import smart_unicode\n from django.utils.functional import empty\n from django.utils._os import rmtree_errorhandler\n+from django.utils import six\n \n from django.contrib.staticfiles import finders, storage\n \n@@ -83,7 +84,7 @@ def assertFileNotFound(self, filepath):\n         self.assertRaises(IOError, self._get_file, filepath)\n \n     def render_template(self, template, **kwargs):\n-        if isinstance(template, basestring):\n+        if isinstance(template, six.string_types):\n             template = loader.get_template_from_string(template)\n         return template.render(Context(kwargs)).strip()\n "
        }
    ],
    "stats": {
        "total": 380,
        "additions": 230,
        "deletions": 150
    }
}