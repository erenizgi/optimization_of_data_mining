{
    "author": "alex",
    "message": "Converted Dutch localflavor doctests to unittests.  We have always been at war with doctests.  Thanks to Idan Gazit.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14948 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "187a11e1f14ed655c98ad94699ccfb314f6690ea",
    "files": [
        {
            "sha": "8ef0ae981faf560864033de5919b29f60875c467",
            "filename": "tests/regressiontests/forms/localflavor/nl.py",
            "status": "modified",
            "additions": 62,
            "deletions": 72,
            "changes": 134,
            "blob_url": "https://github.com/django/django/blob/187a11e1f14ed655c98ad94699ccfb314f6690ea/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fnl.py",
            "raw_url": "https://github.com/django/django/raw/187a11e1f14ed655c98ad94699ccfb314f6690ea/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fnl.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fnl.py?ref=187a11e1f14ed655c98ad94699ccfb314f6690ea",
            "patch": "@@ -1,72 +1,62 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ NL form fields.\n-\n-tests = r\"\"\"\n-# NLPhoneNumberField ########################################################\n-\n->>> from django.contrib.localflavor.nl.forms import NLPhoneNumberField\n->>> f = NLPhoneNumberField(required=False)\n->>> f.clean('')\n-u''\n->>> f.clean('012-3456789')\n-'012-3456789'\n->>> f.clean('0123456789')\n-'0123456789'\n->>> f.clean('+31-12-3456789')\n-'+31-12-3456789'\n->>> f.clean('(0123) 456789')\n-'(0123) 456789'\n->>> f.clean('foo')\n-Traceback (most recent call last):\n-    ...\n-ValidationError: [u'Enter a valid phone number']\n-\n-# NLZipCodeField ############################################################\n-\n->>> from django.contrib.localflavor.nl.forms import NLZipCodeField\n->>> f = NLZipCodeField(required=False)\n->>> f.clean('')\n-u''\n->>> f.clean('1234ab')\n-u'1234 AB'\n->>> f.clean('1234 ab')\n-u'1234 AB'\n->>> f.clean('1234 AB')\n-u'1234 AB'\n->>> f.clean('0123AB')\n-Traceback (most recent call last):\n-    ...\n-ValidationError: [u'Enter a valid postal code']\n->>> f.clean('foo')\n-Traceback (most recent call last):\n-    ...\n-ValidationError: [u'Enter a valid postal code']\n-\n-# NLSoFiNumberField #########################################################\n-\n->>> from django.contrib.localflavor.nl.forms import NLSoFiNumberField\n->>> f = NLSoFiNumberField(required=False)\n->>> f.clean('')\n-u''\n->>> f.clean('123456782')\n-'123456782'\n->>> f.clean('000000000')\n-Traceback (most recent call last):\n-    ...\n-ValidationError: [u'Enter a valid SoFi number']\n->>> f.clean('123456789')\n-Traceback (most recent call last):\n-    ...\n-ValidationError: [u'Enter a valid SoFi number']\n->>> f.clean('foo')\n-Traceback (most recent call last):\n-    ...\n-ValidationError: [u'Enter a valid SoFi number']\n-\n-# NLProvinceSelect ##########################################################\n-\n->>> from django.contrib.localflavor.nl.forms import NLProvinceSelect\n->>> s = NLProvinceSelect()\n->>> s.render('provinces', 'OV')\n-u'<select name=\"provinces\">\\n<option value=\"DR\">Drenthe</option>\\n<option value=\"FL\">Flevoland</option>\\n<option value=\"FR\">Friesland</option>\\n<option value=\"GL\">Gelderland</option>\\n<option value=\"GR\">Groningen</option>\\n<option value=\"LB\">Limburg</option>\\n<option value=\"NB\">Noord-Brabant</option>\\n<option value=\"NH\">Noord-Holland</option>\\n<option value=\"OV\" selected=\"selected\">Overijssel</option>\\n<option value=\"UT\">Utrecht</option>\\n<option value=\"ZE\">Zeeland</option>\\n<option value=\"ZH\">Zuid-Holland</option>\\n</select>'\n-\"\"\"\n+from django.contrib.localflavor.nl.forms import (NLPhoneNumberField,\n+    NLZipCodeField, NLSoFiNumberField, NLProvinceSelect)\n+\n+from utils import LocalFlavorTestCase\n+\n+\n+class NLLocalFlavorTests(LocalFlavorTestCase):\n+    def test_NLProvinceSelect(self):\n+        f = NLProvinceSelect()\n+        out = u'''<select name=\"provinces\">\n+<option value=\"DR\">Drenthe</option>\n+<option value=\"FL\">Flevoland</option>\n+<option value=\"FR\">Friesland</option>\n+<option value=\"GL\">Gelderland</option>\n+<option value=\"GR\">Groningen</option>\n+<option value=\"LB\">Limburg</option>\n+<option value=\"NB\">Noord-Brabant</option>\n+<option value=\"NH\">Noord-Holland</option>\n+<option value=\"OV\" selected=\"selected\">Overijssel</option>\n+<option value=\"UT\">Utrecht</option>\n+<option value=\"ZE\">Zeeland</option>\n+<option value=\"ZH\">Zuid-Holland</option>\n+</select>'''\n+        self.assertEqual(f.render('provinces', 'OV'), out)\n+\n+    def test_NLPhoneNumberField(self):\n+        error_invalid = [u'Enter a valid phone number']\n+        valid = {\n+                '012-3456789': '012-3456789',\n+                '0123456789': '0123456789',\n+                '+31-12-3456789': '+31-12-3456789',\n+                '(0123) 456789': '(0123) 456789',\n+        }\n+        invalid = {\n+                'foo': error_invalid,\n+        }\n+        self.assertFieldOutput(NLPhoneNumberField, valid, invalid)\n+\n+    def test_NLZipCodeField(self):\n+        error_invalid = [u'Enter a valid postal code']\n+        valid = {\n+            '1234ab': '1234 AB',\n+            '1234 ab': '1234 AB',\n+            '1234 AB': '1234 AB',\n+        }\n+        invalid = {\n+            '0123AB': error_invalid,\n+            'foo': error_invalid,\n+        }\n+        self.assertFieldOutput(NLZipCodeField, valid, invalid)\n+\n+    def test_NLSoFiNumberField(self):\n+        error_invalid = [u'Enter a valid SoFi number']\n+        valid = {\n+            '123456782': '123456782',\n+        }\n+        invalid = {\n+            '000000000': error_invalid,\n+            '123456789': error_invalid,\n+            'foo': error_invalid,\n+        }\n+        self.assertFieldOutput(NLSoFiNumberField, valid, invalid)"
        },
        {
            "sha": "ef4136ec600e0ac554390a248581b3d667b7fa70",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/187a11e1f14ed655c98ad94699ccfb314f6690ea/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/187a11e1f14ed655c98ad94699ccfb314f6690ea/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=187a11e1f14ed655c98ad94699ccfb314f6690ea",
            "patch": "@@ -1,6 +1,5 @@\n # -*- coding: utf-8 -*-\n from localflavor.cz import tests as localflavor_cz_tests\n-from localflavor.nl import tests as localflavor_nl_tests\n from localflavor.pl import tests as localflavor_pl_tests\n from localflavor.pt import tests as localflavor_pt_tests\n from localflavor.ro import tests as localflavor_ro_tests\n@@ -31,12 +30,12 @@\n from localflavor.it import ITLocalFlavorTests\n from localflavor.jp import JPLocalFlavorTests\n from localflavor.kw import KWLocalFlavorTests\n+from localflavor.nl import NLLocalFlavorTests\n from localflavor.tr import TRLocalFlavorTests\n \n \n __test__ = {\n     'localflavor_cz_tests': localflavor_cz_tests,\n-    'localflavor_nl_tests': localflavor_nl_tests,\n     'localflavor_pl_tests': localflavor_pl_tests,\n     'localflavor_pt_tests': localflavor_pt_tests,\n     'localflavor_ro_tests': localflavor_ro_tests,"
        },
        {
            "sha": "00633ad21c7edd41e277c236efa3f08b72fa7492",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/187a11e1f14ed655c98ad94699ccfb314f6690ea/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/187a11e1f14ed655c98ad94699ccfb314f6690ea/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=187a11e1f14ed655c98ad94699ccfb314f6690ea",
            "patch": "@@ -33,5 +33,6 @@\n     ITLocalFlavorTests,\n     JPLocalFlavorTests,\n     KWLocalFlavorTests,\n+    NLLocalFlavorTests,\n     TRLocalFlavorTests,\n )"
        }
    ],
    "stats": {
        "total": 138,
        "additions": 64,
        "deletions": 74
    }
}