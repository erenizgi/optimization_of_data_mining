{
    "author": "claudep",
    "message": "Fixed #19724 -- Output error when settings are improperly configured\n\n...during retrieval of available management commands.\nThanks Peter Davis for the report and Julien Phalip for the review.",
    "sha": "40ca99097f34b2180b2afe6d0056cade4c732618",
    "files": [
        {
            "sha": "c68ffea43c50bca0c473f9a3de136467a61b533a",
            "filename": "django/core/management/__init__.py",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/40ca99097f34b2180b2afe6d0056cade4c732618/django%2Fcore%2Fmanagement%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/40ca99097f34b2180b2afe6d0056cade4c732618/django%2Fcore%2Fmanagement%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2F__init__.py?ref=40ca99097f34b2180b2afe6d0056cade4c732618",
            "patch": "@@ -107,10 +107,13 @@ def get_commands():\n         from django.conf import settings\n         try:\n             apps = settings.INSTALLED_APPS\n-        except ImproperlyConfigured:\n+        except ImproperlyConfigured as e:\n             # Still useful for commands that do not require functional settings,\n             # like startproject or help\n             apps = []\n+            sys.stderr.write(color_style().ERROR(\n+                \"Project settings contain errors: %s\\n\"\n+                \"As a result, only the core Django commands are available.\\n\" % e))\n \n         # Find and load the management module for each installed app.\n         for app_name in apps:"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}