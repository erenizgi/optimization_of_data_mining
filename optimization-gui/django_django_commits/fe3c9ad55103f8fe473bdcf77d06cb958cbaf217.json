{
    "author": "freakboy3742",
    "message": "Fixed #14355 -- Ensure that help_text is displayed for readonly fields in the admin. Thanks to jester for the report, and to alexbmeng, subsume, wamberg and Julien Phalip for ther work on the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15582 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "fe3c9ad55103f8fe473bdcf77d06cb958cbaf217",
    "files": [
        {
            "sha": "3c1bef3f9e5ee246946484e83e9d1aaf9ab368dc",
            "filename": "django/contrib/admin/helpers.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/django%2Fcontrib%2Fadmin%2Fhelpers.py",
            "raw_url": "https://github.com/django/django/raw/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/django%2Fcontrib%2Fadmin%2Fhelpers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fhelpers.py?ref=fe3c9ad55103f8fe473bdcf77d06cb958cbaf217",
            "patch": "@@ -1,7 +1,7 @@\n from django import forms\n from django.conf import settings\n from django.contrib.admin.util import flatten_fieldsets, lookup_field\n-from django.contrib.admin.util import display_for_field, label_for_field\n+from django.contrib.admin.util import display_for_field, label_for_field, help_text_for_field\n from django.contrib.contenttypes.models import ContentType\n from django.core.exceptions import ObjectDoesNotExist\n from django.db.models.fields.related import ManyToManyRel\n@@ -144,6 +144,7 @@ def __init__(self, form, field, is_first, model_admin=None):\n             'name': class_name,\n             'label': label,\n             'field': field,\n+            'help_text': help_text_for_field(class_name, form._meta.model)\n         }\n         self.form = form\n         self.model_admin = model_admin"
        },
        {
            "sha": "6363aeeee4fa09e5f72e90082817c855060def1b",
            "filename": "django/contrib/admin/templates/admin/includes/fieldset.html",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html",
            "raw_url": "https://github.com/django/django/raw/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html?ref=fe3c9ad55103f8fe473bdcf77d06cb958cbaf217",
            "patch": "@@ -19,8 +19,8 @@\n                             {{ field.field }}\n                         {% endif %}\n                     {% endif %}\n-                    {% if field.field.field.help_text %}\n-                        <p class=\"help\">{{ field.field.field.help_text|safe }}</p>\n+                    {% if field.field.help_text %}\n+                        <p class=\"help\">{{ field.field.help_text|safe }}</p>\n                     {% endif %}\n                 </div>\n             {% endfor %}"
        },
        {
            "sha": "d3f17d67d4608939ec49066baa930344bbc0bdf6",
            "filename": "django/contrib/admin/util.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/django%2Fcontrib%2Fadmin%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/django%2Fcontrib%2Fadmin%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Futil.py?ref=fe3c9ad55103f8fe473bdcf77d06cb958cbaf217",
            "patch": "@@ -266,6 +266,13 @@ def label_for_field(name, model, model_admin=None, return_attr=False):\n     else:\n         return label\n \n+def help_text_for_field(name, model):\n+    try:\n+        help_text = model._meta.get_field_by_name(name)[0].help_text\n+    except models.FieldDoesNotExist:\n+        help_text = \"\"\n+    return smart_unicode(help_text)\n+\n \n def display_for_field(value, field):\n     from django.contrib.admin.templatetags.admin_list import _boolean_icon"
        },
        {
            "sha": "58a545a64ae7870220c4cb1082bd707924e5c76a",
            "filename": "tests/regressiontests/admin_views/models.py",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py?ref=fe3c9ad55103f8fe473bdcf77d06cb958cbaf217",
            "patch": "@@ -523,9 +523,12 @@ class LinkInline(admin.TabularInline):\n \n \n class Post(models.Model):\n-    title = models.CharField(max_length=100)\n-    content = models.TextField()\n-    posted = models.DateField(default=datetime.date.today)\n+    title = models.CharField(max_length=100, help_text=\"Some help text for the title (with unicode ŠĐĆŽćžšđ)\")\n+    content = models.TextField(help_text=\"Some help text for the content (with unicode ŠĐĆŽćžšđ)\")\n+    posted = models.DateField(\n+            default=datetime.date.today,\n+            help_text=\"Some help text for the date (with unicode ŠĐĆŽćžšđ)\"\n+    )\n     public = models.NullBooleanField()\n \n     def awesomeness_level(self):"
        },
        {
            "sha": "f77c64bd2125abde3db591d0d01fcc900f8c7a6b",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/fe3c9ad55103f8fe473bdcf77d06cb958cbaf217/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=fe3c9ad55103f8fe473bdcf77d06cb958cbaf217",
            "patch": "@@ -2453,6 +2453,10 @@ def test_readonly_get(self):\n         self.assertContains(response, '<div class=\"form-row posted\">')\n         self.assertContains(response, '<div class=\"form-row value\">')\n         self.assertContains(response, '<div class=\"form-row \">')\n+        self.assertContains(response, '<p class=\"help\">', 3)\n+        self.assertContains(response, '<p class=\"help\">Some help text for the title (with unicode ŠĐĆŽćžšđ)</p>')\n+        self.assertContains(response, '<p class=\"help\">Some help text for the content (with unicode ŠĐĆŽćžšđ)</p>')\n+        self.assertContains(response, '<p class=\"help\">Some help text for the date (with unicode ŠĐĆŽćžšđ)</p>')\n \n         p = Post.objects.create(title=\"I worked on readonly_fields\", content=\"Its good stuff\")\n         response = self.client.get('/test_admin/admin/admin_views/post/%d/' % p.pk)"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 21,
        "deletions": 6
    }
}