{
    "author": "ramiro",
    "message": "Fixed #16593 -- Refactored proxy_model_inheritance fixture setup to minimize the chances of leaving a modified INSTALLED_APPS setting for tests ran after it if setUp fails. Thanks Jim Dalton for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16593 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "e9a909e30ab63cc4faa28e4d9296f522bbe3bb06",
    "files": [
        {
            "sha": "eb8e47b7261664fe203fc23dd69f12c96d8462f0",
            "filename": "tests/modeltests/proxy_model_inheritance/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/e9a909e30ab63cc4faa28e4d9296f522bbe3bb06/tests%2Fmodeltests%2Fproxy_model_inheritance%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e9a909e30ab63cc4faa28e4d9296f522bbe3bb06/tests%2Fmodeltests%2Fproxy_model_inheritance%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fproxy_model_inheritance%2Ftests.py?ref=e9a909e30ab63cc4faa28e4d9296f522bbe3bb06",
            "patch": "@@ -13,24 +13,25 @@\n from django.core.management import call_command\n from django.db.models.loading import load_app\n from django.test import TransactionTestCase\n+from django.test.utils import override_settings\n \n+# @override_settings(INSTALLED_APPS=('app1', 'app2'))\n class ProxyModelInheritanceTests(TransactionTestCase):\n \n     def setUp(self):\n         self.old_sys_path = sys.path[:]\n         sys.path.append(os.path.dirname(os.path.abspath(__file__)))\n-        self.old_installed_apps = settings.INSTALLED_APPS\n-        settings.INSTALLED_APPS = ('app1', 'app2')\n         map(load_app, settings.INSTALLED_APPS)\n-        call_command('syncdb', verbosity=0)\n-        global ProxyModel, NiceModel\n-        from app1.models import ProxyModel\n-        from app2.models import NiceModel\n \n     def tearDown(self):\n-        settings.INSTALLED_APPS = self.old_installed_apps\n         sys.path = self.old_sys_path\n \n     def test_table_exists(self):\n+        call_command('syncdb', verbosity=0)\n+        global ProxyModel, NiceModel\n+        from app1.models import ProxyModel\n+        from app2.models import NiceModel\n         self.assertEqual(NiceModel.objects.all().count(), 0)\n         self.assertEqual(ProxyModel.objects.all().count(), 0)\n+\n+ProxyModelInheritanceTests = override_settings(INSTALLED_APPS=('app1', 'app2'))(ProxyModelInheritanceTests)"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 8,
        "deletions": 7
    }
}