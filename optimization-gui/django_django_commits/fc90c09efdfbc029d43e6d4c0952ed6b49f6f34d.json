{
    "author": "adrianholovaty",
    "message": "Made BoundFields iterable, so that you can iterate over individual radio buttons of a RadioSelect in a template\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17173 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d",
    "files": [
        {
            "sha": "7818aac13a080e93c4678ac997c9e485e6a3d8de",
            "filename": "django/forms/forms.py",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d/django%2Fforms%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d/django%2Fforms%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fforms.py?ref=fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d",
            "patch": "@@ -410,6 +410,16 @@ def __unicode__(self):\n             return self.as_widget() + self.as_hidden(only_initial=True)\n         return self.as_widget()\n \n+    def __iter__(self):\n+        \"\"\"\n+        Yields rendered strings that comprise all widgets in this BoundField.\n+\n+        This really is only useful for RadioSelect widgets, so that you can\n+        iterate over individual radio buttons in a template.\n+        \"\"\"\n+        for subwidget in self.field.widget.subwidgets(self.html_name, self.value()):\n+            yield self.as_widget(subwidget)\n+\n     def _errors(self):\n         \"\"\"\n         Returns an ErrorList for this field. Returns an empty ErrorList"
        },
        {
            "sha": "9c04750fdb262429ddfd311d66a44f46654a0d3b",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d",
            "patch": "@@ -156,6 +156,15 @@ def __deepcopy__(self, memo):\n         memo[id(self)] = obj\n         return obj\n \n+    def subwidgets(self, name, value, attrs=None, choices=()):\n+        \"\"\"\n+        Yields all \"subwidgets\" of this widget. Used only by RadioSelect to\n+        allow template access to individual <input type=\"radio\"> buttons.\n+\n+        Arguments are the same as for render().\n+        \"\"\"\n+        yield self\n+\n     def render(self, name, value, attrs=None):\n         \"\"\"\n         Returns this Widget rendered as HTML, as a Unicode string.\n@@ -628,6 +637,12 @@ def __init__(self, name, value, attrs, choice, index):\n         self.index = index\n \n     def __unicode__(self):\n+        return self.render()\n+\n+    def render(self, name=None, value=None, attrs=None, choices=()):\n+        name = name or self.name\n+        value = value or self.value\n+        attrs = attrs or self.attrs\n         if 'id' in self.attrs:\n             label_for = ' for=\"%s_%s\"' % (self.attrs['id'], self.index)\n         else:\n@@ -681,6 +696,10 @@ def __init__(self, *args, **kwargs):\n             self.renderer = renderer\n         super(RadioSelect, self).__init__(*args, **kwargs)\n \n+    def subwidgets(self, name, value, attrs=None, choices=()):\n+        for widget in self.get_renderer(name, value, attrs, choices):\n+            yield widget\n+\n     def get_renderer(self, name, value, attrs=None, choices=()):\n         \"\"\"Returns an instance of the renderer.\"\"\"\n         if value is None: value = ''"
        },
        {
            "sha": "b657be4c534926bcb48f37f1d8eb14ed3a136fe0",
            "filename": "docs/ref/forms/widgets.txt",
            "status": "modified",
            "additions": 36,
            "deletions": 1,
            "changes": 37,
            "blob_url": "https://github.com/django/django/blob/fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d/docs%2Fref%2Fforms%2Fwidgets.txt",
            "raw_url": "https://github.com/django/django/raw/fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d/docs%2Fref%2Fforms%2Fwidgets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Fwidgets.txt?ref=fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d",
            "patch": "@@ -345,7 +345,8 @@ commonly used groups of widgets:\n \n .. class:: RadioSelect\n \n-    Similar to :class:`Select`, but rendered as a list of radio buttons:\n+    Similar to :class:`Select`, but rendered as a list of radio buttons within\n+    ``<li>`` tags:\n \n     .. code-block:: html\n \n@@ -354,6 +355,40 @@ commonly used groups of widgets:\n           ...\n         </ul>\n \n+    .. versionadded:: 1.4\n+\n+    For more granular control over the generated markup, you can loop over the\n+    radio buttons in the template. Assuming a form ``myform`` with a field\n+    ``beatles`` that uses a ``RadioSelect`` as its widget:\n+\n+    .. code-block:: html+django\n+\n+        {% for radio in myform.beatles %}\n+        <div class=\"myradio\">\n+            {{ radio }}\n+        </div>\n+        {% endfor %}\n+\n+    This would generate the following HTML:\n+\n+    .. code-block:: html\n+\n+        <div class=\"myradio\">\n+            <label><input type=\"radio\" name=\"beatles\" value=\"john\" /> John</label>\n+        </div>\n+        <div class=\"myradio\">\n+            <label><input type=\"radio\" name=\"beatles\" value=\"paul\" /> Paul</label>\n+        </div>\n+        <div class=\"myradio\">\n+            <label><input type=\"radio\" name=\"beatles\" value=\"george\" /> George</label>\n+        </div>\n+        <div class=\"myradio\">\n+            <label><input type=\"radio\" name=\"beatles\" value=\"ringo\" /> Ringo</label>\n+        </div>\n+\n+    If you decide not to loop over the radio buttons, they'll be output in a\n+    ``<ul>`` with ``<li>`` tags, as above.\n+\n ``CheckboxSelectMultiple``\n ~~~~~~~~~~~~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "3cedb04b941fd191d2bcd49ce1d8f05554ffcd16",
            "filename": "tests/regressiontests/forms/tests/forms.py",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py?ref=fc90c09efdfbc029d43e6d4c0952ed6b49f6f34d",
            "patch": "@@ -434,6 +434,28 @@ class FrameworkForm(Form):\n <li><label for=\"id_language_1\"><input type=\"radio\" id=\"id_language_1\" value=\"J\" name=\"language\" /> Java</label></li>\n </ul></p>\"\"\")\n \n+    def test_form_with_iterable_boundfield(self):\n+        class BeatleForm(Form):\n+            name = ChoiceField(choices=[('john', 'John'), ('paul', 'Paul'), ('george', 'George'), ('ringo', 'Ringo')], widget=RadioSelect)\n+\n+        f = BeatleForm(auto_id=False)\n+        self.assertEqual('\\n'.join(list(f['name'])), \"\"\"<label><input type=\"radio\" name=\"name\" value=\"john\" /> John</label>\n+<label><input type=\"radio\" name=\"name\" value=\"paul\" /> Paul</label>\n+<label><input type=\"radio\" name=\"name\" value=\"george\" /> George</label>\n+<label><input type=\"radio\" name=\"name\" value=\"ringo\" /> Ringo</label>\"\"\")\n+        self.assertEqual('\\n'.join(['<div>%s</div>' % bf for bf in f['name']]), \"\"\"<div><label><input type=\"radio\" name=\"name\" value=\"john\" /> John</label></div>\n+<div><label><input type=\"radio\" name=\"name\" value=\"paul\" /> Paul</label></div>\n+<div><label><input type=\"radio\" name=\"name\" value=\"george\" /> George</label></div>\n+<div><label><input type=\"radio\" name=\"name\" value=\"ringo\" /> Ringo</label></div>\"\"\")\n+\n+    def test_form_with_noniterable_boundfield(self):\n+        # You can iterate over any BoundField, not just those with widget=RadioSelect.\n+        class BeatleForm(Form):\n+            name = CharField()\n+\n+        f = BeatleForm(auto_id=False)\n+        self.assertEqual('\\n'.join(list(f['name'])), u'<input type=\"text\" name=\"name\" />')\n+\n     def test_forms_wit_hmultiple_choice(self):\n         # MultipleChoiceField is a special case, as its data is required to be a list:\n         class SongForm(Form):"
        }
    ],
    "stats": {
        "total": 88,
        "additions": 87,
        "deletions": 1
    }
}