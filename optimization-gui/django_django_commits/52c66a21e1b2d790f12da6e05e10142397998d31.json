{
    "author": "aaugustin",
    "message": "Used the decorator syntax consistently to register template filters.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17052 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "52c66a21e1b2d790f12da6e05e10142397998d31",
    "files": [
        {
            "sha": "7b83d9237e35c51e8b706598b9c91ab545babb7d",
            "filename": "django/contrib/humanize/templatetags/humanize.py",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/52c66a21e1b2d790f12da6e05e10142397998d31/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "raw_url": "https://github.com/django/django/raw/52c66a21e1b2d790f12da6e05e10142397998d31/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py?ref=52c66a21e1b2d790f12da6e05e10142397998d31",
            "patch": "@@ -9,10 +9,9 @@\n from django.utils.translation import pgettext, ungettext, ugettext as _\n from django.utils.tzinfo import LocalTimezone\n \n-\n register = template.Library()\n \n-\n+@register.filter\n def ordinal(value):\n     \"\"\"\n     Converts an integer to its ordinal as a string. 1 is '1st', 2 is '2nd',\n@@ -27,8 +26,8 @@ def ordinal(value):\n         return u\"%d%s\" % (value, suffixes[0])\n     return u\"%d%s\" % (value, suffixes[value % 10])\n ordinal.is_safe = True\n-register.filter(ordinal)\n \n+@register.filter\n def intcomma(value, use_l10n=True):\n     \"\"\"\n     Converts an integer to a string containing commas every three digits.\n@@ -49,7 +48,6 @@ def intcomma(value, use_l10n=True):\n     else:\n         return intcomma(new, use_l10n)\n intcomma.is_safe = True\n-register.filter(intcomma)\n \n # A tuple of standard large number to their converters\n intword_converters = (\n@@ -99,6 +97,7 @@ def intcomma(value, use_l10n=True):\n     )),\n )\n \n+@register.filter\n def intword(value):\n     \"\"\"\n     Converts a large integer to a friendly text representation. Works best\n@@ -131,8 +130,8 @@ def _check_for_i18n(value, float_formatted, string_formatted):\n             return _check_for_i18n(new_value, *converters(new_value))\n     return value\n intword.is_safe = False\n-register.filter(intword)\n \n+@register.filter\n def apnumber(value):\n     \"\"\"\n     For numbers 1-9, returns the number spelled out. Otherwise, returns the\n@@ -146,7 +145,6 @@ def apnumber(value):\n         return value\n     return (_('one'), _('two'), _('three'), _('four'), _('five'), _('six'), _('seven'), _('eight'), _('nine'))[value-1]\n apnumber.is_safe = True\n-register.filter(apnumber)\n \n @register.filter\n def naturalday(value, arg=None):"
        },
        {
            "sha": "74b5b9efcce06d90aaea01e96e4bd9b2af055469",
            "filename": "django/contrib/markup/templatetags/markup.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/52c66a21e1b2d790f12da6e05e10142397998d31/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py",
            "raw_url": "https://github.com/django/django/raw/52c66a21e1b2d790f12da6e05e10142397998d31/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py?ref=52c66a21e1b2d790f12da6e05e10142397998d31",
            "patch": "@@ -18,6 +18,7 @@\n \n register = template.Library()\n \n+@register.filter\n def textile(value):\n     try:\n         import textile\n@@ -29,6 +30,7 @@ def textile(value):\n         return mark_safe(force_unicode(textile.textile(smart_str(value), encoding='utf-8', output='utf-8')))\n textile.is_safe = True\n \n+@register.filter\n def markdown(value, arg=''):\n     \"\"\"\n     Runs Markdown over a given value, optionally using various\n@@ -73,6 +75,7 @@ def markdown(value, arg=''):\n             return mark_safe(force_unicode(markdown.markdown(smart_str(value))))\n markdown.is_safe = True\n \n+@register.filter\n def restructuredtext(value):\n     try:\n         from docutils.core import publish_parts\n@@ -86,6 +89,3 @@ def restructuredtext(value):\n         return mark_safe(force_unicode(parts[\"fragment\"]))\n restructuredtext.is_safe = True\n \n-register.filter(textile)\n-register.filter(markdown)\n-register.filter(restructuredtext)"
        },
        {
            "sha": "d94830cc39e5ac1e2ce8bb5a8b6fd21480de66c8",
            "filename": "django/template/defaultfilters.py",
            "status": "modified",
            "additions": 49,
            "deletions": 51,
            "changes": 100,
            "blob_url": "https://github.com/django/django/blob/52c66a21e1b2d790f12da6e05e10142397998d31/django%2Ftemplate%2Fdefaultfilters.py",
            "raw_url": "https://github.com/django/django/raw/52c66a21e1b2d790f12da6e05e10142397998d31/django%2Ftemplate%2Fdefaultfilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaultfilters.py?ref=52c66a21e1b2d790f12da6e05e10142397998d31",
            "patch": "@@ -53,6 +53,7 @@ def _dec(*args, **kwargs):\n # STRINGS         #\n ###################\n \n+@register.filter\n @stringfilter\n def addslashes(value):\n     \"\"\"\n@@ -63,6 +64,7 @@ def addslashes(value):\n     return value.replace('\\\\', '\\\\\\\\').replace('\"', '\\\\\"').replace(\"'\", \"\\\\'\")\n addslashes.is_safe = True\n \n+@register.filter\n @stringfilter\n def capfirst(value):\n     \"\"\"Capitalizes the first character of the value.\"\"\"\n@@ -94,6 +96,7 @@ def fix_ampersands_filter(value):\n nan = (1e200 * 1e200) // (1e200 * 1e200)\n special_floats = [str(pos_inf), str(neg_inf), str(nan)]\n \n+@register.filter\n def floatformat(text, arg=-1):\n     \"\"\"\n     Displays a float to a specified number of decimal places.\n@@ -171,12 +174,14 @@ def floatformat(text, arg=-1):\n         return input_val\n floatformat.is_safe = True\n \n+@register.filter\n @stringfilter\n def iriencode(value):\n     \"\"\"Escapes an IRI value for use in a URL.\"\"\"\n     return force_unicode(iri_to_uri(value))\n iriencode.is_safe = True\n \n+@register.filter\n @stringfilter\n def linenumbers(value, autoescape=None):\n     \"\"\"Displays text with line numbers.\"\"\"\n@@ -194,12 +199,14 @@ def linenumbers(value, autoescape=None):\n linenumbers.is_safe = True\n linenumbers.needs_autoescape = True\n \n+@register.filter\n @stringfilter\n def lower(value):\n     \"\"\"Converts a string into all lowercase.\"\"\"\n     return value.lower()\n lower.is_safe = True\n \n+@register.filter\n @stringfilter\n def make_list(value):\n     \"\"\"\n@@ -211,6 +218,7 @@ def make_list(value):\n     return list(value)\n make_list.is_safe = False\n \n+@register.filter\n @stringfilter\n def slugify(value):\n     \"\"\"\n@@ -222,6 +230,7 @@ def slugify(value):\n     return mark_safe(re.sub('[-\\s]+', '-', value))\n slugify.is_safe = True\n \n+@register.filter\n def stringformat(value, arg):\n     \"\"\"\n     Formats the variable according to the arg, a string formatting specifier.\n@@ -238,13 +247,15 @@ def stringformat(value, arg):\n         return u\"\"\n stringformat.is_safe = True\n \n+@register.filter\n @stringfilter\n def title(value):\n     \"\"\"Converts a string into titlecase.\"\"\"\n     t = re.sub(\"([a-z])'([A-Z])\", lambda m: m.group(0).lower(), value.title())\n     return re.sub(\"\\d([A-Z])\", lambda m: m.group(0).lower(), t)\n title.is_safe = True\n \n+@register.filter\n @stringfilter\n def truncatechars(value, arg):\n     \"\"\"\n@@ -259,6 +270,7 @@ def truncatechars(value, arg):\n     return Truncator(value).chars(length)\n truncatechars.is_safe = True\n \n+@register.filter\n @stringfilter\n def truncatewords(value, arg):\n     \"\"\"\n@@ -275,6 +287,7 @@ def truncatewords(value, arg):\n     return Truncator(value).words(length, truncate=' ...')\n truncatewords.is_safe = True\n \n+@register.filter\n @stringfilter\n def truncatewords_html(value, arg):\n     \"\"\"\n@@ -291,12 +304,14 @@ def truncatewords_html(value, arg):\n     return Truncator(value).words(length, html=True, truncate=' ...')\n truncatewords_html.is_safe = True\n \n+@register.filter\n @stringfilter\n def upper(value):\n     \"\"\"Converts a string into all uppercase.\"\"\"\n     return value.upper()\n upper.is_safe = False\n \n+@register.filter\n @stringfilter\n def urlencode(value, safe=None):\n     \"\"\"\n@@ -321,6 +336,7 @@ def urlize(value, autoescape=None):\n urlize.is_safe = True\n urlize.needs_autoescape = True\n \n+@register.filter\n @stringfilter\n def urlizetrunc(value, limit, autoescape=None):\n     \"\"\"\n@@ -334,12 +350,14 @@ def urlizetrunc(value, limit, autoescape=None):\n urlizetrunc.is_safe = True\n urlizetrunc.needs_autoescape = True\n \n+@register.filter\n @stringfilter\n def wordcount(value):\n     \"\"\"Returns the number of words.\"\"\"\n     return len(value.split())\n wordcount.is_safe = False\n \n+@register.filter\n @stringfilter\n def wordwrap(value, arg):\n     \"\"\"\n@@ -350,6 +368,7 @@ def wordwrap(value, arg):\n     return wrap(value, int(arg))\n wordwrap.is_safe = True\n \n+@register.filter\n @stringfilter\n def ljust(value, arg):\n     \"\"\"\n@@ -360,6 +379,7 @@ def ljust(value, arg):\n     return value.ljust(int(arg))\n ljust.is_safe = True\n \n+@register.filter\n @stringfilter\n def rjust(value, arg):\n     \"\"\"\n@@ -370,12 +390,14 @@ def rjust(value, arg):\n     return value.rjust(int(arg))\n rjust.is_safe = True\n \n+@register.filter\n @stringfilter\n def center(value, arg):\n     \"\"\"Centers the value in a field of a given width.\"\"\"\n     return value.center(int(arg))\n center.is_safe = True\n \n+@register.filter\n @stringfilter\n def cut(value, arg):\n     \"\"\"\n@@ -400,6 +422,7 @@ def escape_filter(value):\n     return mark_for_escaping(value)\n escape_filter.is_safe = True\n \n+@register.filter\n @stringfilter\n def force_escape(value):\n     \"\"\"\n@@ -423,6 +446,7 @@ def linebreaks_filter(value, autoescape=None):\n linebreaks_filter.is_safe = True\n linebreaks_filter.needs_autoescape = True\n \n+@register.filter\n @stringfilter\n def linebreaksbr(value, autoescape=None):\n     \"\"\"\n@@ -437,6 +461,7 @@ def linebreaksbr(value, autoescape=None):\n linebreaksbr.is_safe = True\n linebreaksbr.needs_autoescape = True\n \n+@register.filter\n @stringfilter\n def safe(value):\n     \"\"\"\n@@ -445,6 +470,7 @@ def safe(value):\n     return mark_safe(value)\n safe.is_safe = True\n \n+@register.filter\n def safeseq(value):\n     \"\"\"\n     A \"safe\" filter for sequences. Marks each element in the sequence,\n@@ -454,6 +480,7 @@ def safeseq(value):\n     return [mark_safe(force_unicode(obj)) for obj in value]\n safeseq.is_safe = True\n \n+@register.filter\n @stringfilter\n def removetags(value, tags):\n     \"\"\"Removes a space separated list of [X]HTML tags from the output.\"\"\"\n@@ -466,6 +493,7 @@ def removetags(value, tags):\n     return value\n removetags.is_safe = True\n \n+@register.filter\n @stringfilter\n def striptags(value):\n     \"\"\"Strips all [X]HTML tags.\"\"\"\n@@ -476,6 +504,7 @@ def striptags(value):\n # LISTS           #\n ###################\n \n+@register.filter\n def dictsort(value, arg):\n     \"\"\"\n     Takes a list of dicts, returns that list sorted by the property given in\n@@ -484,6 +513,7 @@ def dictsort(value, arg):\n     return sorted(value, key=Variable(arg).resolve)\n dictsort.is_safe = False\n \n+@register.filter\n def dictsortreversed(value, arg):\n     \"\"\"\n     Takes a list of dicts, returns that list sorted in reverse order by the\n@@ -492,6 +522,7 @@ def dictsortreversed(value, arg):\n     return sorted(value, key=Variable(arg).resolve, reverse=True)\n dictsortreversed.is_safe = False\n \n+@register.filter\n def first(value):\n     \"\"\"Returns the first item in a list.\"\"\"\n     try:\n@@ -500,6 +531,7 @@ def first(value):\n         return u''\n first.is_safe = False\n \n+@register.filter\n def join(value, arg, autoescape=None):\n     \"\"\"\n     Joins a list with a string, like Python's ``str.join(list)``.\n@@ -515,6 +547,7 @@ def join(value, arg, autoescape=None):\n join.is_safe = True\n join.needs_autoescape = True\n \n+@register.filter\n def last(value):\n     \"Returns the last item in a list\"\n     try:\n@@ -523,6 +556,7 @@ def last(value):\n         return u''\n last.is_safe = True\n \n+@register.filter\n def length(value):\n     \"\"\"Returns the length of the value - useful for lists.\"\"\"\n     try:\n@@ -531,6 +565,7 @@ def length(value):\n         return ''\n length.is_safe = True\n \n+@register.filter\n def length_is(value, arg):\n     \"\"\"Returns a boolean of whether the value's length is the argument.\"\"\"\n     try:\n@@ -539,11 +574,13 @@ def length_is(value, arg):\n         return ''\n length_is.is_safe = False\n \n+@register.filter\n def random(value):\n     \"\"\"Returns a random item from the list.\"\"\"\n     return random_module.choice(value)\n random.is_safe = True\n \n+@register.filter(\"slice\")\n def slice_(value, arg):\n     \"\"\"\n     Returns a slice of the list.\n@@ -565,6 +602,7 @@ def slice_(value, arg):\n         return value # Fail silently.\n slice_.is_safe = True\n \n+@register.filter\n def unordered_list(value, autoescape=None):\n     \"\"\"\n     Recursively takes a self-nested list and returns an HTML unordered list --\n@@ -657,6 +695,7 @@ def _helper(list_, tabs=1):\n # INTEGERS        #\n ###################\n \n+@register.filter\n def add(value, arg):\n     \"\"\"Adds the arg to the value.\"\"\"\n     try:\n@@ -668,6 +707,7 @@ def add(value, arg):\n             return ''\n add.is_safe = False\n \n+@register.filter\n def get_digit(value, arg):\n     \"\"\"\n     Given a whole number, returns the requested digit of it, where 1 is the\n@@ -692,6 +732,7 @@ def get_digit(value, arg):\n # DATES           #\n ###################\n \n+@register.filter\n def date(value, arg=None):\n     \"\"\"Formats a date according to the given format.\"\"\"\n     if not value:\n@@ -707,6 +748,7 @@ def date(value, arg=None):\n             return ''\n date.is_safe = False\n \n+@register.filter\n def time(value, arg=None):\n     \"\"\"Formats a time according to the given format.\"\"\"\n     if value in (None, u''):\n@@ -750,23 +792,27 @@ def timeuntil_filter(value, arg=None):\n # LOGIC           #\n ###################\n \n+@register.filter\n def default(value, arg):\n     \"\"\"If value is unavailable, use given default.\"\"\"\n     return value or arg\n default.is_safe = False\n \n+@register.filter\n def default_if_none(value, arg):\n     \"\"\"If value is None, use given default.\"\"\"\n     if value is None:\n         return arg\n     return value\n default_if_none.is_safe = False\n \n+@register.filter\n def divisibleby(value, arg):\n     \"\"\"Returns True if the value is devisible by the argument.\"\"\"\n     return int(value) % int(arg) == 0\n divisibleby.is_safe = False\n \n+@register.filter\n def yesno(value, arg=None):\n     \"\"\"\n     Given a string mapping values for true, false and (optionally) None,\n@@ -803,6 +849,7 @@ def yesno(value, arg=None):\n # MISC            #\n ###################\n \n+@register.filter\n def filesizeformat(bytes):\n     \"\"\"\n     Formats the value like a 'human-readable' file size (i.e. 13 KB, 4.1 MB,\n@@ -828,6 +875,7 @@ def filesizeformat(bytes):\n     return ugettext(\"%s PB\") % filesize_number_format(bytes / (1024 * 1024 * 1024 * 1024 * 1024))\n filesizeformat.is_safe = True\n \n+@register.filter\n def pluralize(value, arg=u's'):\n     \"\"\"\n     Returns a plural suffix if the value is not 1. By default, 's' is used as\n@@ -878,61 +926,11 @@ def phone2numeric_filter(value):\n     return phone2numeric(value)\n phone2numeric_filter.is_safe = True\n \n+@register.filter\n def pprint(value):\n     \"\"\"A wrapper around pprint.pprint -- for debugging, really.\"\"\"\n     try:\n         return pformat(value)\n     except Exception, e:\n         return u\"Error in formatting: %s\" % force_unicode(e, errors=\"replace\")\n pprint.is_safe = True\n-\n-# Syntax: register.filter(name of filter, callback)\n-register.filter(add)\n-register.filter(addslashes)\n-register.filter(capfirst)\n-register.filter(center)\n-register.filter(cut)\n-register.filter(date)\n-register.filter(default)\n-register.filter(default_if_none)\n-register.filter(dictsort)\n-register.filter(dictsortreversed)\n-register.filter(divisibleby)\n-register.filter(filesizeformat)\n-register.filter(first)\n-register.filter(floatformat)\n-register.filter(force_escape)\n-register.filter(get_digit)\n-register.filter(iriencode)\n-register.filter(join)\n-register.filter(last)\n-register.filter(length)\n-register.filter(length_is)\n-register.filter(linebreaksbr)\n-register.filter(linenumbers)\n-register.filter(ljust)\n-register.filter(lower)\n-register.filter(make_list)\n-register.filter(pluralize)\n-register.filter(pprint)\n-register.filter(removetags)\n-register.filter(random)\n-register.filter(rjust)\n-register.filter(safe)\n-register.filter(safeseq)\n-register.filter('slice', slice_)\n-register.filter(slugify)\n-register.filter(stringformat)\n-register.filter(striptags)\n-register.filter(time)\n-register.filter(title)\n-register.filter(truncatechars)\n-register.filter(truncatewords)\n-register.filter(truncatewords_html)\n-register.filter(unordered_list)\n-register.filter(upper)\n-register.filter(urlencode)\n-register.filter(urlizetrunc)\n-register.filter(wordcount)\n-register.filter(wordwrap)\n-register.filter(yesno)"
        },
        {
            "sha": "32651d2cb8ebcd6be540c58eef7bd954d49c13ca",
            "filename": "django/templatetags/l10n.py",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/52c66a21e1b2d790f12da6e05e10142397998d31/django%2Ftemplatetags%2Fl10n.py",
            "raw_url": "https://github.com/django/django/raw/52c66a21e1b2d790f12da6e05e10142397998d31/django%2Ftemplatetags%2Fl10n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fl10n.py?ref=52c66a21e1b2d790f12da6e05e10142397998d31",
            "patch": "@@ -3,9 +3,9 @@\n from django.utils import formats\n from django.utils.encoding import force_unicode\n \n-\n register = Library()\n \n+@register.filter\n def localize(value):\n     \"\"\"\n     Forces a value to be rendered as a localized value,\n@@ -14,6 +14,7 @@ def localize(value):\n     return force_unicode(formats.localize(value, use_l10n=True))\n localize.is_safe = False\n \n+@register.filter\n def unlocalize(value):\n     \"\"\"\n     Forces a value to be rendered as a non-localized value,\n@@ -61,6 +62,3 @@ def localize_tag(parser, token):\n     nodelist = parser.parse(('endlocalize',))\n     parser.delete_first_token()\n     return LocalizeNode(nodelist, use_l10n)\n-\n-register.filter(localize)\n-register.filter(unlocalize)"
        }
    ],
    "stats": {
        "total": 122,
        "additions": 58,
        "deletions": 64
    }
}