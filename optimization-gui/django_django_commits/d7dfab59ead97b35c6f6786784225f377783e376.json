{
    "author": "claudep",
    "message": "Replaced cStringIO.StringIO by io.BytesIO.\n\nAlso replaced StringIO.StringIO by BytesIO in some other appropriate\nplaces. StringIO is not available in Python 3.",
    "sha": "d7dfab59ead97b35c6f6786784225f377783e376",
    "files": [
        {
            "sha": "4a04d15ad9bf59e31d09746d2f74acef5c086c66",
            "filename": "django/contrib/gis/geos/tests/test_geos.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -203,12 +203,12 @@ def test01i_json(self):\n \n     def test01k_fromfile(self):\n         \"Testing the fromfile() factory.\"\n-        from StringIO import StringIO\n+        from io import BytesIO\n         ref_pnt = GEOSGeometry('POINT(5 23)')\n \n-        wkt_f = StringIO()\n+        wkt_f = BytesIO()\n         wkt_f.write(ref_pnt.wkt)\n-        wkb_f = StringIO()\n+        wkb_f = BytesIO()\n         wkb_f.write(str(ref_pnt.wkb))\n \n         # Other tests use `fromfile()` on string filenames so those"
        },
        {
            "sha": "16b0fdff9e4136daca5511a7697742c9c8d525b6",
            "filename": "django/contrib/gis/shortcuts.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcontrib%2Fgis%2Fshortcuts.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcontrib%2Fgis%2Fshortcuts.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fshortcuts.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -1,16 +1,13 @@\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n import zipfile\n+from io import BytesIO\n \n from django.conf import settings\n from django.http import HttpResponse\n from django.template import loader\n \n def compress_kml(kml):\n     \"Returns compressed KMZ from the given KML string.\"\n-    kmz = StringIO()\n+    kmz = BytesIO()\n     zf = zipfile.ZipFile(kmz, 'a', zipfile.ZIP_DEFLATED)\n     zf.writestr('doc.kml', kml.encode(settings.DEFAULT_CHARSET))\n     zf.close()"
        },
        {
            "sha": "a5c8f41ba4fc44f9db62d23c144e5a3cc227c721",
            "filename": "django/contrib/gis/tests/geoapp/test_sitemaps.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_sitemaps.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_sitemaps.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_sitemaps.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -1,9 +1,6 @@\n from __future__ import absolute_import\n \n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n from xml.dom import minidom\n import zipfile\n \n@@ -66,7 +63,7 @@ def test_geositemap_kml(self):\n                     kml_doc = minidom.parseString(self.client.get(kml_url).content)\n                 elif kml_type == 'kmz':\n                     # Have to decompress KMZ before parsing.\n-                    buf = StringIO(self.client.get(kml_url).content)\n+                    buf = BytesIO(self.client.get(kml_url).content)\n                     zf = zipfile.ZipFile(buf)\n                     self.assertEqual(1, len(zf.filelist))\n                     self.assertEqual('doc.kml', zf.filelist[0].filename)"
        },
        {
            "sha": "d9b0fabb33e87edaab1e58f5fbdb792a9e74f2e1",
            "filename": "django/core/files/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Ffiles%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Ffiles%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fbase.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -1,8 +1,5 @@\n import os\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO, StringIO\n \n from django.utils.encoding import smart_str, smart_unicode\n from django.core.files.utils import FileProxyMixin\n@@ -89,7 +86,7 @@ def __iter__(self):\n         # Iterate over this file-like object by newlines\n         buffer_ = None\n         for chunk in self.chunks():\n-            chunk_buffer = StringIO(chunk)\n+            chunk_buffer = BytesIO(chunk)\n \n             for line in chunk_buffer:\n                 if buffer_:"
        },
        {
            "sha": "b58349e27b360057f84086376e31a7b32b3065ae",
            "filename": "django/core/files/uploadedfile.py",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Ffiles%2Fuploadedfile.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Ffiles%2Fuploadedfile.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fuploadedfile.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -3,10 +3,7 @@\n \"\"\"\n \n import os\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n from django.conf import settings\n from django.core.files.base import File\n@@ -110,8 +107,8 @@ class SimpleUploadedFile(InMemoryUploadedFile):\n     A simple representation of a file, which just has content, size, and a name.\n     \"\"\"\n     def __init__(self, name, content, content_type='text/plain'):\n-        content = content or ''\n-        super(SimpleUploadedFile, self).__init__(StringIO(content), None, name,\n+        content = content or b''\n+        super(SimpleUploadedFile, self).__init__(BytesIO(content), None, name,\n                                                  content_type, len(content), None)\n \n     def from_dict(cls, file_dict):"
        },
        {
            "sha": "88f78904bb4a2de84e23d2020aa54eb7753db152",
            "filename": "django/core/files/uploadhandler.py",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Ffiles%2Fuploadhandler.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Ffiles%2Fuploadhandler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fuploadhandler.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -2,10 +2,7 @@\n Base file upload handler classes, and the built-in concrete subclasses\n \"\"\"\n \n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n from django.conf import settings\n from django.core.exceptions import ImproperlyConfigured\n@@ -161,12 +158,12 @@ def handle_raw_input(self, input_data, META, content_length, boundary, encoding=\n     def new_file(self, *args, **kwargs):\n         super(MemoryFileUploadHandler, self).new_file(*args, **kwargs)\n         if self.activated:\n-            self.file = StringIO()\n+            self.file = BytesIO()\n             raise StopFutureHandlers()\n \n     def receive_data_chunk(self, raw_data, start):\n         \"\"\"\n-        Add the data to the StringIO file.\n+        Add the data to the BytesIO file.\n         \"\"\"\n         if self.activated:\n             self.file.write(raw_data)"
        },
        {
            "sha": "0639ef19da5f544141292a718921bcf7eb33cf11",
            "filename": "django/core/handlers/wsgi.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fhandlers%2Fwsgi.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -1,9 +1,6 @@\n import sys\n+from io import BytesIO\n from threading import Lock\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n \n from django import http\n from django.core import signals\n@@ -116,7 +113,7 @@ def readline(self, size=None):\n             if not chunk:\n                 break\n             self.buffer += chunk\n-        sio = StringIO(self.buffer)\n+        sio = BytesIO(self.buffer)\n         if size:\n             line = sio.readline(size)\n         else:"
        },
        {
            "sha": "2618c7f17da672f49f9d8409efab227cd9fed2a1",
            "filename": "django/core/mail/message.py",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fmail%2Fmessage.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fmail%2Fmessage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fmessage.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -9,15 +9,12 @@\n from email.mime.base import MIMEBase\n from email.header import Header\n from email.utils import formatdate, getaddresses, formataddr, parseaddr\n+from io import BytesIO\n \n from django.conf import settings\n from django.core.mail.utils import DNS_NAME\n from django.utils.encoding import smart_str, force_unicode\n \n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n \n # Don't BASE64-encode UTF-8 messages so that we avoid unwanted attention from\n # some spam filters.\n@@ -132,7 +129,7 @@ def as_string(self, unixfrom=False):\n         This overrides the default as_string() implementation to not mangle\n         lines that begin with 'From '. See bug #13433 for details.\n         \"\"\"\n-        fp = StringIO()\n+        fp = BytesIO()\n         g = Generator(fp, mangle_from_ = False)\n         g.flatten(self, unixfrom=unixfrom)\n         return fp.getvalue()\n@@ -156,7 +153,7 @@ def as_string(self, unixfrom=False):\n         This overrides the default as_string() implementation to not mangle\n         lines that begin with 'From '. See bug #13433 for details.\n         \"\"\"\n-        fp = StringIO()\n+        fp = BytesIO()\n         g = Generator(fp, mangle_from_ = False)\n         g.flatten(self, unixfrom=unixfrom)\n         return fp.getvalue()"
        },
        {
            "sha": "121a5c6ab743eb0307f0d037f47487b279169245",
            "filename": "django/core/management/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fmanagement%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fmanagement%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fbase.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -6,6 +6,7 @@\n import os\n import sys\n \n+from io import BytesIO\n from optparse import make_option, OptionParser\n import traceback\n \n@@ -258,11 +259,7 @@ def validate(self, app=None, display_num_errors=False):\n \n         \"\"\"\n         from django.core.management.validation import get_validation_errors\n-        try:\n-            from cStringIO import StringIO\n-        except ImportError:\n-            from StringIO import StringIO\n-        s = StringIO()\n+        s = BytesIO()\n         num_errors = get_validation_errors(s, app)\n         if num_errors:\n             s.seek(0)"
        },
        {
            "sha": "2e6a0656b1a07bb05a22d8ceca59424ae690cfc6",
            "filename": "django/core/serializers/base.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fserializers%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fserializers%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fbase.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -2,7 +2,7 @@\n Module for abstract serializer/unserializer base classes.\n \"\"\"\n \n-from StringIO import StringIO\n+from io import BytesIO\n \n from django.db import models\n from django.utils.encoding import smart_unicode\n@@ -34,7 +34,7 @@ def serialize(self, queryset, **options):\n         \"\"\"\n         self.options = options\n \n-        self.stream = options.pop(\"stream\", StringIO())\n+        self.stream = options.pop(\"stream\", BytesIO())\n         self.selected_fields = options.pop(\"fields\", None)\n         self.use_natural_keys = options.pop(\"use_natural_keys\", False)\n \n@@ -121,7 +121,7 @@ def __init__(self, stream_or_string, **options):\n         \"\"\"\n         self.options = options\n         if isinstance(stream_or_string, basestring):\n-            self.stream = StringIO(stream_or_string)\n+            self.stream = BytesIO(stream_or_string)\n         else:\n             self.stream = stream_or_string\n         # hack to make sure that the models have all been loaded before"
        },
        {
            "sha": "4da8581f68adf5ce5a834669d87f114977586cf8",
            "filename": "django/core/serializers/json.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fserializers%2Fjson.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fserializers%2Fjson.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fjson.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -8,7 +8,7 @@\n import datetime\n import decimal\n import json\n-from StringIO import StringIO\n+from io import BytesIO\n \n from django.core.serializers.base import DeserializationError\n from django.core.serializers.python import Serializer as PythonSerializer\n@@ -37,7 +37,7 @@ def Deserializer(stream_or_string, **options):\n     Deserialize a stream or string of JSON data.\n     \"\"\"\n     if isinstance(stream_or_string, basestring):\n-        stream = StringIO(stream_or_string)\n+        stream = BytesIO(stream_or_string)\n     else:\n         stream = stream_or_string\n     try:"
        },
        {
            "sha": "5effda5b46fc13c2694986bfb67a78ab741e6afd",
            "filename": "django/core/serializers/pyyaml.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fpyyaml.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -4,9 +4,9 @@\n Requires PyYaml (http://pyyaml.org/), but that's checked for in __init__.\n \"\"\"\n \n-from StringIO import StringIO\n import decimal\n import yaml\n+from io import BytesIO\n \n from django.db import models\n from django.core.serializers.base import DeserializationError\n@@ -49,7 +49,7 @@ def Deserializer(stream_or_string, **options):\n     Deserialize a stream or string of YAML data.\n     \"\"\"\n     if isinstance(stream_or_string, basestring):\n-        stream = StringIO(stream_or_string)\n+        stream = BytesIO(stream_or_string)\n     else:\n         stream = stream_or_string\n     try:"
        },
        {
            "sha": "61137f55c18a68abccbd484a3cbcc7a73378b481",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -10,10 +10,7 @@\n import re\n import urlparse\n from decimal import Decimal, DecimalException\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n from django.core import validators\n from django.core.exceptions import ValidationError\n@@ -554,9 +551,9 @@ def to_python(self, data):\n             file = data.temporary_file_path()\n         else:\n             if hasattr(data, 'read'):\n-                file = StringIO(data.read())\n+                file = BytesIO(data.read())\n             else:\n-                file = StringIO(data['content'])\n+                file = BytesIO(data['content'])\n \n         try:\n             # load() is the only method that can spot a truncated JPEG,"
        },
        {
            "sha": "2815f5fbd5026672eb23f36959294840c19234b5",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -7,13 +7,10 @@\n import time\n import warnings\n \n+from io import BytesIO\n from pprint import pformat\n from urllib import urlencode, quote\n from urlparse import urljoin, parse_qsl\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n \n import Cookie\n # Some versions of Python 2.7 and later won't need this encoding bug fix:\n@@ -292,7 +289,7 @@ def body(self):\n                 self._body = self.read()\n             except IOError as e:\n                 raise UnreadablePostError, e, sys.exc_traceback\n-            self._stream = StringIO(self._body)\n+            self._stream = BytesIO(self._body)\n         return self._body\n \n     @property\n@@ -317,7 +314,7 @@ def _load_post_and_files(self):\n         if self.META.get('CONTENT_TYPE', '').startswith('multipart'):\n             if hasattr(self, '_body'):\n                 # Use already read data\n-                data = StringIO(self._body)\n+                data = BytesIO(self._body)\n             else:\n                 data = self\n             try:\n@@ -340,7 +337,7 @@ def _load_post_and_files(self):\n     ## Expects self._stream to be set to an appropriate source of bytes by\n     ## a corresponding request subclass (e.g. WSGIRequest).\n     ## Also when request data has already been read by request.POST or\n-    ## request.body, self._stream points to a StringIO instance\n+    ## request.body, self._stream points to a BytesIO instance\n     ## containing that data.\n \n     def read(self, *args, **kwargs):"
        },
        {
            "sha": "c1764e239409baf446aa20c3acfe6e3029663111",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -4,11 +4,8 @@\n import re\n import mimetypes\n from copy import copy\n+from io import BytesIO\n from urlparse import urlparse, urlsplit\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n \n from django.conf import settings\n from django.contrib.auth import authenticate, login\n@@ -35,13 +32,13 @@\n \n class FakePayload(object):\n     \"\"\"\n-    A wrapper around StringIO that restricts what can be read since data from\n+    A wrapper around BytesIO that restricts what can be read since data from\n     the network can't be seeked and cannot be read outside of its content\n     length. This makes sure that views can't do anything under the test client\n     that wouldn't work in Real Life.\n     \"\"\"\n     def __init__(self, content):\n-        self.__content = StringIO(content)\n+        self.__content = BytesIO(content)\n         self.__len = len(content)\n \n     def read(self, num_bytes=None):\n@@ -175,7 +172,7 @@ class RequestFactory(object):\n     def __init__(self, **defaults):\n         self.defaults = defaults\n         self.cookies = SimpleCookie()\n-        self.errors = StringIO()\n+        self.errors = BytesIO()\n \n     def _base_environ(self, **request):\n         \"\"\""
        },
        {
            "sha": "7cd15674d6bf810360bfd5cb05858722fe244701",
            "filename": "django/utils/feedgenerator.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Futils%2Ffeedgenerator.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Futils%2Ffeedgenerator.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ffeedgenerator.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -174,8 +174,8 @@ def writeString(self, encoding):\n         \"\"\"\n         Returns the feed in the given encoding as a string.\n         \"\"\"\n-        from StringIO import StringIO\n-        s = StringIO()\n+        from io import BytesIO\n+        s = BytesIO()\n         self.write(s, encoding)\n         return s.getvalue()\n "
        },
        {
            "sha": "2ac101fcb8695631ab98b56ad8c5080f274ee508",
            "filename": "django/utils/text.py",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Futils%2Ftext.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Futils%2Ftext.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftext.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -3,11 +3,7 @@\n import warnings\n from gzip import GzipFile\n from htmlentitydefs import name2codepoint\n-\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n from django.utils.encoding import force_unicode\n from django.utils.functional import allow_lazy, SimpleLazyObject\n@@ -277,7 +273,7 @@ def phone2numeric(phone):\n # From http://www.xhaus.com/alan/python/httpcomp.html#gzip\n # Used with permission.\n def compress_string(s):\n-    zbuf = StringIO()\n+    zbuf = BytesIO()\n     zfile = GzipFile(mode='wb', compresslevel=6, fileobj=zbuf)\n     zfile.write(s)\n     zfile.close()"
        },
        {
            "sha": "135a8cf6d5b919e7e070836aca5b0befc8370d1a",
            "filename": "django/utils/translation/trans_real.py",
            "status": "modified",
            "additions": 15,
            "deletions": 19,
            "changes": 34,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/django%2Futils%2Ftranslation%2Ftrans_real.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/django%2Futils%2Ftranslation%2Ftrans_real.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftranslation%2Ftrans_real.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -5,13 +5,9 @@\n import re\n import sys\n import gettext as gettext_module\n+from io import BytesIO\n from threading import local\n \n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n-\n from django.utils.importlib import import_module\n from django.utils.safestring import mark_safe, SafeData\n \n@@ -442,7 +438,7 @@ def templatize(src, origin=None):\n     \"\"\"\n     from django.template import (Lexer, TOKEN_TEXT, TOKEN_VAR, TOKEN_BLOCK,\n             TOKEN_COMMENT, TRANSLATOR_COMMENT_MARK)\n-    out = StringIO()\n+    out = BytesIO()\n     message_context = None\n     intrans = False\n     inplural = False\n@@ -453,16 +449,16 @@ def templatize(src, origin=None):\n     for t in Lexer(src, origin).tokenize():\n         if incomment:\n             if t.token_type == TOKEN_BLOCK and t.contents == 'endcomment':\n-                content = ''.join(comment)\n+                content = b''.join(comment)\n                 translators_comment_start = None\n                 for lineno, line in enumerate(content.splitlines(True)):\n                     if line.lstrip().startswith(TRANSLATOR_COMMENT_MARK):\n                         translators_comment_start = lineno\n                 for lineno, line in enumerate(content.splitlines(True)):\n                     if translators_comment_start is not None and lineno >= translators_comment_start:\n-                        out.write(' # %s' % line)\n+                        out.write(b' # %s' % line)\n                     else:\n-                        out.write(' #\\n')\n+                        out.write(b' #\\n')\n                 incomment = False\n                 comment = []\n             else:\n@@ -474,18 +470,18 @@ def templatize(src, origin=None):\n                 if endbmatch:\n                     if inplural:\n                         if message_context:\n-                            out.write(' npgettext(%r, %r, %r,count) ' % (message_context, ''.join(singular), ''.join(plural)))\n+                            out.write(b' npgettext(%r, %r, %r,count) ' % (message_context, ''.join(singular), ''.join(plural)))\n                         else:\n-                            out.write(' ngettext(%r, %r, count) ' % (''.join(singular), ''.join(plural)))\n+                            out.write(b' ngettext(%r, %r, count) ' % (''.join(singular), ''.join(plural)))\n                         for part in singular:\n                             out.write(blankout(part, 'S'))\n                         for part in plural:\n                             out.write(blankout(part, 'P'))\n                     else:\n                         if message_context:\n-                            out.write(' pgettext(%r, %r) ' % (message_context, ''.join(singular)))\n+                            out.write(b' pgettext(%r, %r) ' % (message_context, ''.join(singular)))\n                         else:\n-                            out.write(' gettext(%r) ' % ''.join(singular))\n+                            out.write(b' gettext(%r) ' % ''.join(singular))\n                         for part in singular:\n                             out.write(blankout(part, 'S'))\n                     message_context = None\n@@ -531,10 +527,10 @@ def templatize(src, origin=None):\n                             message_context = message_context.strip('\"')\n                         elif message_context[0] == \"'\":\n                             message_context = message_context.strip(\"'\")\n-                        out.write(' pgettext(%r, %r) ' % (message_context, g))\n+                        out.write(b' pgettext(%r, %r) ' % (message_context, g))\n                         message_context = None\n                     else:\n-                        out.write(' gettext(%r) ' % g)\n+                        out.write(b' gettext(%r) ' % g)\n                 elif bmatch:\n                     for fmatch in constant_re.findall(t.contents):\n                         out.write(' _(%s) ' % fmatch)\n@@ -552,7 +548,7 @@ def templatize(src, origin=None):\n                     plural = []\n                 elif cmatches:\n                     for cmatch in cmatches:\n-                        out.write(' _(%s) ' % cmatch)\n+                        out.write(b' _(%s) ' % cmatch)\n                 elif t.contents == 'comment':\n                     incomment = True\n                 else:\n@@ -561,14 +557,14 @@ def templatize(src, origin=None):\n                 parts = t.contents.split('|')\n                 cmatch = constant_re.match(parts[0])\n                 if cmatch:\n-                    out.write(' _(%s) ' % cmatch.group(1))\n+                    out.write(b' _(%s) ' % cmatch.group(1))\n                 for p in parts[1:]:\n                     if p.find(':_(') >= 0:\n-                        out.write(' %s ' % p.split(':',1)[1])\n+                        out.write(b' %s ' % p.split(':',1)[1])\n                     else:\n                         out.write(blankout(p, 'F'))\n             elif t.token_type == TOKEN_COMMENT:\n-                out.write(' # %s' % t.contents)\n+                out.write(b' # %s' % t.contents)\n             else:\n                 out.write(blankout(t.contents, 'X'))\n     return out.getvalue()"
        },
        {
            "sha": "55f80bb4cc2ba0bc070d48c13e2d4b7d37882963",
            "filename": "docs/howto/outputting-pdf.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 10,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/docs%2Fhowto%2Foutputting-pdf.txt",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/docs%2Fhowto%2Foutputting-pdf.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Foutputting-pdf.txt?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -104,15 +104,11 @@ Complex PDFs\n ============\n \n If you're creating a complex PDF document with ReportLab, consider using the\n-:mod:`cStringIO` library as a temporary holding place for your PDF file. This\n+:mod:`io` library as a temporary holding place for your PDF file. This\n library provides a file-like object interface that is particularly efficient.\n-Here's the above \"Hello World\" example rewritten to use :mod:`cStringIO`::\n+Here's the above \"Hello World\" example rewritten to use :mod:`io`::\n \n-    # Fall back to StringIO in environments where cStringIO is not available\n-    try:\n-        from cStringIO import StringIO\n-    except ImportError:\n-        from StringIO import StringIO\n+    from io import BytesIO\n     from reportlab.pdfgen import canvas\n     from django.http import HttpResponse\n \n@@ -121,9 +117,9 @@ Here's the above \"Hello World\" example rewritten to use :mod:`cStringIO`::\n         response = HttpResponse(mimetype='application/pdf')\n         response['Content-Disposition'] = 'attachment; filename=somefilename.pdf'\n \n-        buffer = StringIO()\n+        buffer = BytesIO()\n \n-        # Create the PDF object, using the StringIO object as its \"file.\"\n+        # Create the PDF object, using the BytesIO object as its \"file.\"\n         p = canvas.Canvas(buffer)\n \n         # Draw things on the PDF. Here's where the PDF generation happens.\n@@ -134,7 +130,7 @@ Here's the above \"Hello World\" example rewritten to use :mod:`cStringIO`::\n         p.showPage()\n         p.save()\n \n-        # Get the value of the StringIO buffer and write it to the response.\n+        # Get the value of the BytesIO buffer and write it to the response.\n         pdf = buffer.getvalue()\n         buffer.close()\n         response.write(pdf)"
        },
        {
            "sha": "9d7adb045c3b2e0fccf06fa01d8c671eb5765df0",
            "filename": "tests/modeltests/invalid_models/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fmodeltests%2Finvalid_models%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fmodeltests%2Finvalid_models%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Finvalid_models%2Ftests.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -1,6 +1,6 @@\n import copy\n import sys\n-from cStringIO import StringIO\n+from io import BytesIO\n \n from django.core.management.validation import get_validation_errors\n from django.db.models.loading import cache, load_app\n@@ -16,7 +16,7 @@ def setUp(self):\n         # coloring attached (makes matching the results easier). We restore\n         # sys.stderr afterwards.\n         self.old_stdout = sys.stdout\n-        self.stdout = StringIO()\n+        self.stdout = BytesIO()\n         sys.stdout = self.stdout\n \n         # This test adds dummy applications to the app cache. These"
        },
        {
            "sha": "fdaae5b85254f55419554fe68be3602dbb22a3f9",
            "filename": "tests/modeltests/model_forms/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -1372,19 +1372,6 @@ def test_image_field(self):\n         self.assertEqual(instance.image.name, 'foo/test4.png')\n         instance.delete()\n \n-        # Test image field when cStringIO is not available\n-        from django.forms import fields\n-        from StringIO import StringIO\n-        old_StringIO = fields.StringIO\n-        fields.StringIO = StringIO\n-        try:\n-            f = ImageFileForm(\n-                data={'description': u'An image'},\n-                files={'image': SimpleUploadedFile('test.png', image_data)})\n-            self.assertEqual(f.is_valid(), True)\n-        finally:\n-            fields.StringIO = old_StringIO\n-\n     def test_media_on_modelform(self):\n         # Similar to a regular Form class you can define custom media to be used on\n         # the ModelForm."
        },
        {
            "sha": "ce64c5de237bdb79304e686a2a5dcb9ee4247afc",
            "filename": "tests/regressiontests/file_storage/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_storage%2Ftests.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -7,10 +7,7 @@\n import tempfile\n import time\n from datetime import datetime, timedelta\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n try:\n     import threading\n@@ -483,7 +480,7 @@ def test_not_closing_of_files(self):\n         \"\"\"\n         Open files passed into get_image_dimensions() should stay opened.\n         \"\"\"\n-        empty_io = StringIO()\n+        empty_io = BytesIO()\n         try:\n             get_image_dimensions(empty_io)\n         finally:\n@@ -557,10 +554,10 @@ class NoNameFileTestCase(unittest.TestCase):\n     urllib.urlopen()\n     \"\"\"\n     def test_noname_file_default_name(self):\n-        self.assertEqual(File(StringIO('A file with no name')).name, None)\n+        self.assertEqual(File(BytesIO(b'A file with no name')).name, None)\n \n     def test_noname_file_get_size(self):\n-        self.assertEqual(File(StringIO('A file with no name')).size, 19)\n+        self.assertEqual(File(BytesIO(b'A file with no name')).size, 19)\n \n class FileLikeObjectTestCase(LiveServerBase):\n     \"\"\""
        },
        {
            "sha": "5c6f758b665a040b61e00c16da309122b03dec99",
            "filename": "tests/regressiontests/fixtures_regress/tests.py",
            "status": "modified",
            "additions": 13,
            "deletions": 16,
            "changes": 29,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -4,10 +4,7 @@\n \n import os\n import re\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n from django.core import management\n from django.core.management.base import CommandError\n@@ -119,7 +116,7 @@ def test_unknown_format(self):\n         Test for ticket #4371 -- Loading data of an unknown format should fail\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        stderr = StringIO()\n+        stderr = BytesIO()\n         management.call_command(\n             'loaddata',\n             'bad_fixture1.unkn',\n@@ -138,7 +135,7 @@ def test_invalid_data(self):\n         using explicit filename.\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        stderr = StringIO()\n+        stderr = BytesIO()\n         management.call_command(\n             'loaddata',\n             'bad_fixture2.xml',\n@@ -157,7 +154,7 @@ def test_invalid_data_no_ext(self):\n         without file extension.\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        stderr = StringIO()\n+        stderr = BytesIO()\n         management.call_command(\n             'loaddata',\n             'bad_fixture2',\n@@ -175,7 +172,7 @@ def test_empty(self):\n         Test for ticket #4371 -- Loading a fixture file with no data returns an error.\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        stderr = StringIO()\n+        stderr = BytesIO()\n         management.call_command(\n             'loaddata',\n             'empty',\n@@ -194,7 +191,7 @@ def test_abort_loaddata_on_error(self):\n         loading is aborted.\n         Validate that error conditions are caught correctly\n         \"\"\"\n-        stderr = StringIO()\n+        stderr = BytesIO()\n         management.call_command(\n             'loaddata',\n             'empty',\n@@ -211,7 +208,7 @@ def test_error_message(self):\n         \"\"\"\n         (Regression for #9011 - error message is correct)\n         \"\"\"\n-        stderr = StringIO()\n+        stderr = BytesIO()\n         management.call_command(\n             'loaddata',\n             'bad_fixture2',\n@@ -317,7 +314,7 @@ def test_dumpdata_uses_default_manager(self):\n         )\n         animal.save()\n \n-        stdout = StringIO()\n+        stdout = BytesIO()\n         management.call_command(\n             'dumpdata',\n             'fixtures_regress.animal',\n@@ -346,7 +343,7 @@ def test_proxy_model_included(self):\n         \"\"\"\n         Regression for #11428 - Proxy models aren't included when you dumpdata\n         \"\"\"\n-        stdout = StringIO()\n+        stdout = BytesIO()\n         # Create an instance of the concrete class\n         widget = Widget.objects.create(name='grommet')\n         management.call_command(\n@@ -379,7 +376,7 @@ def test_loaddata_raises_error_when_fixture_has_invalid_foreign_key(self):\n         \"\"\"\n         Regression for #3615 - Ensure data with nonexistent child key references raises error\n         \"\"\"\n-        stderr = StringIO()\n+        stderr = BytesIO()\n         management.call_command(\n             'loaddata',\n             'forward_ref_bad_data.json',\n@@ -414,7 +411,7 @@ def test_loaddata_no_fixture_specified(self):\n         \"\"\"\n         Regression for #7043 - Error is quickly reported when no fixtures is provided in the command line.\n         \"\"\"\n-        stderr = StringIO()\n+        stderr = BytesIO()\n         management.call_command(\n             'loaddata',\n             verbosity=0,\n@@ -426,7 +423,7 @@ def test_loaddata_no_fixture_specified(self):\n         )\n \n     def test_loaddata_not_existant_fixture_file(self):\n-        stdout_output = StringIO()\n+        stdout_output = BytesIO()\n         management.call_command(\n             'loaddata',\n             'this_fixture_doesnt_exist',\n@@ -511,7 +508,7 @@ def test_nk_on_serialize(self):\n             commit=False\n             )\n \n-        stdout = StringIO()\n+        stdout = BytesIO()\n         management.call_command(\n             'dumpdata',\n             'fixtures_regress.book',"
        },
        {
            "sha": "039e463d0b82a70cc69dbd8a2d1d183dcee36071",
            "filename": "tests/regressiontests/i18n/commands/compilation.py",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -1,8 +1,5 @@\n import os\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n from django.core.management import CommandError\n from django.core.management.commands.compilemessages import compile_messages\n@@ -31,7 +28,7 @@ def test_bom_rejection(self):\n         # We don't use the django.core.management infrastructure (call_command()\n         # et al) because CommandError's cause exit(1) there. We test the\n         # underlying compile_messages function instead\n-        out = StringIO()\n+        out = BytesIO()\n         self.assertRaises(CommandError, compile_messages, out, locale=self.LOCALE)\n         self.assertFalse(os.path.exists(self.MO_FILE))\n \n@@ -51,7 +48,7 @@ def test_percent_symbol_in_po_file(self):\n         # We don't use the django.core.management infrastructure (call_command()\n         # et al) because CommandError's cause exit(1) there. We test the\n         # underlying compile_messages function instead\n-        out = StringIO()\n+        out = BytesIO()\n         compile_messages(out, locale=self.LOCALE)\n         self.assertTrue(os.path.exists(self.MO_FILE))\n \n@@ -70,7 +67,7 @@ def test_percent_symbol_escaping(self):\n         # We don't use the django.core.management infrastructure (call_command()\n         # et al) because CommandError's cause exit(1) there. We test the\n         # underlying compile_messages function instead\n-        out = StringIO()\n+        out = BytesIO()\n         compile_messages(out, locale=self.LOCALE)\n         with translation.override(self.LOCALE):\n             t = Template('{% load i18n %}{% trans \"Looks like a str fmt spec %% o but shouldn\\'t be interpreted as such\" %}')"
        },
        {
            "sha": "73a13654e75fe233e7412f533a2b9a85423c33ed",
            "filename": "tests/regressiontests/m2m_through_regress/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Fm2m_through_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Fm2m_through_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fm2m_through_regress%2Ftests.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -1,9 +1,6 @@\n from __future__ import absolute_import\n \n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n from django.core import management\n from django.contrib.auth.models import User\n@@ -73,11 +70,11 @@ def test_serialization(self):\n \n         pks = {\"p_pk\": p.pk, \"g_pk\": g.pk, \"m_pk\": m.pk}\n \n-        out = StringIO()\n+        out = BytesIO()\n         management.call_command(\"dumpdata\", \"m2m_through_regress\", format=\"json\", stdout=out)\n         self.assertEqual(out.getvalue().strip(), \"\"\"[{\"pk\": %(m_pk)s, \"model\": \"m2m_through_regress.membership\", \"fields\": {\"person\": %(p_pk)s, \"price\": 100, \"group\": %(g_pk)s}}, {\"pk\": %(p_pk)s, \"model\": \"m2m_through_regress.person\", \"fields\": {\"name\": \"Bob\"}}, {\"pk\": %(g_pk)s, \"model\": \"m2m_through_regress.group\", \"fields\": {\"name\": \"Roll\"}}]\"\"\" % pks)\n \n-        out = StringIO()\n+        out = BytesIO()\n         management.call_command(\"dumpdata\", \"m2m_through_regress\", format=\"xml\",\n             indent=2, stdout=out)\n         self.assertEqual(out.getvalue().strip(), \"\"\"\n@@ -145,6 +142,6 @@ class ThroughLoadDataTestCase(TestCase):\n \n     def test_sequence_creation(self):\n         \"Check that sequences on an m2m_through are created for the through model, not a phantom auto-generated m2m table. Refs #11107\"\n-        out = StringIO()\n+        out = BytesIO()\n         management.call_command(\"dumpdata\", \"m2m_through_regress\", format=\"json\", stdout=out)\n         self.assertEqual(out.getvalue().strip(), \"\"\"[{\"pk\": 1, \"model\": \"m2m_through_regress.usermembership\", \"fields\": {\"price\": 100, \"group\": 1, \"user\": 1}}, {\"pk\": 1, \"model\": \"m2m_through_regress.person\", \"fields\": {\"name\": \"Guido\"}}, {\"pk\": 1, \"model\": \"m2m_through_regress.group\", \"fields\": {\"name\": \"Python Core Group\"}}]\"\"\")"
        },
        {
            "sha": "0c0c59f136c62d1c7a3c32597493d9e6ad4ce4b7",
            "filename": "tests/regressiontests/serializers_regress/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Fserializers_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d7dfab59ead97b35c6f6786784225f377783e376/tests%2Fregressiontests%2Fserializers_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fserializers_regress%2Ftests.py?ref=d7dfab59ead97b35c6f6786784225f377783e376",
            "patch": "@@ -10,10 +10,7 @@\n \n import datetime\n import decimal\n-try:\n-    from cStringIO import StringIO\n-except ImportError:\n-    from StringIO import StringIO\n+from io import BytesIO\n \n try:\n     import yaml\n@@ -504,7 +501,7 @@ def streamTest(format, self):\n     obj.save_base(raw=True)\n \n     # Serialize the test database to a stream\n-    stream = StringIO()\n+    stream = BytesIO()\n     serializers.serialize(format, [obj], indent=2, stream=stream)\n \n     # Serialize normally for a comparison"
        }
    ],
    "stats": {
        "total": 261,
        "additions": 94,
        "deletions": 167
    }
}