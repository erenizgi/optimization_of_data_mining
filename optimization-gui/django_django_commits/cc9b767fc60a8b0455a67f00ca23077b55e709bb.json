{
    "author": "claudep",
    "message": "Fixed #18902 -- Made force_bytes properly handle exception input\n\nThanks Aymeric Augustin for the report and the initial patch.",
    "sha": "cc9b767fc60a8b0455a67f00ca23077b55e709bb",
    "files": [
        {
            "sha": "3b284f3ed0c903fce6f13164f5f3cfe618a52866",
            "filename": "django/utils/encoding.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/cc9b767fc60a8b0455a67f00ca23077b55e709bb/django%2Futils%2Fencoding.py",
            "raw_url": "https://github.com/django/django/raw/cc9b767fc60a8b0455a67f00ca23077b55e709bb/django%2Futils%2Fencoding.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fencoding.py?ref=cc9b767fc60a8b0455a67f00ca23077b55e709bb",
            "patch": "@@ -174,7 +174,7 @@ def force_bytes(s, encoding='utf-8', strings_only=False, errors='strict'):\n                 # An Exception subclass containing non-ASCII data that doesn't\n                 # know how to print itself properly. We shouldn't raise a\n                 # further exception.\n-                return ' '.join([force_bytes(arg, encoding, strings_only,\n+                return b' '.join([force_bytes(arg, encoding, strings_only,\n                         errors) for arg in s])\n             return six.text_type(s).encode(encoding, errors)\n     else:"
        },
        {
            "sha": "d1918455181443edeef7b804ba789cd7d229dbbf",
            "filename": "tests/regressiontests/utils/encoding.py",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/cc9b767fc60a8b0455a67f00ca23077b55e709bb/tests%2Fregressiontests%2Futils%2Fencoding.py",
            "raw_url": "https://github.com/django/django/raw/cc9b767fc60a8b0455a67f00ca23077b55e709bb/tests%2Fregressiontests%2Futils%2Fencoding.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fencoding.py?ref=cc9b767fc60a8b0455a67f00ca23077b55e709bb",
            "patch": "@@ -0,0 +1,17 @@\n+# -*- encoding: utf-8 -*-\n+from __future__ import unicode_literals\n+\n+from django.utils import unittest\n+from django.utils.encoding import force_bytes\n+\n+\n+class TestEncodingUtils(unittest.TestCase):\n+    def test_force_bytes_exception(self):\n+        \"\"\"\n+        Test that force_bytes knows how to convert to bytes an exception\n+        containing non-ASCII characters in its args.\n+        \"\"\"\n+        error_msg = \"This is an exception, voil√†\"\n+        exc = ValueError(error_msg)\n+        result = force_bytes(exc)\n+        self.assertEqual(result, error_msg.encode('utf-8'))"
        },
        {
            "sha": "f4fa75b177fd9fb2612aba9df871d61c04e26fd7",
            "filename": "tests/regressiontests/utils/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/cc9b767fc60a8b0455a67f00ca23077b55e709bb/tests%2Fregressiontests%2Futils%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/cc9b767fc60a8b0455a67f00ca23077b55e709bb/tests%2Fregressiontests%2Futils%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Ftests.py?ref=cc9b767fc60a8b0455a67f00ca23077b55e709bb",
            "patch": "@@ -13,6 +13,7 @@\n from .dateparse import DateParseTests\n from .datetime_safe import DatetimeTests\n from .decorators import DecoratorFromMiddlewareTests\n+from .encoding import TestEncodingUtils\n from .feedgenerator import FeedgeneratorTest\n from .functional import FunctionalTestCase\n from .html import TestUtilsHtml"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 19,
        "deletions": 1
    }
}