{
    "author": "alex",
    "message": "Converted Swiss localflavor doctests to unittests.  Thanks to Idan Gazit for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14935 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03",
    "files": [
        {
            "sha": "c67bfcfdf81331faddadaa54dad477bbd6f96023",
            "filename": "tests/regressiontests/forms/localflavor/ch.py",
            "status": "modified",
            "additions": 71,
            "deletions": 54,
            "changes": 125,
            "blob_url": "https://github.com/django/django/blob/7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fch.py",
            "raw_url": "https://github.com/django/django/raw/7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fch.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fch.py?ref=7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03",
            "patch": "@@ -1,58 +1,75 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ CH form fields.\n+from django.contrib.localflavor.ch.forms import (CHZipCodeField,\n+    CHPhoneNumberField, CHIdentityCardNumberField, CHStateSelect)\n \n-tests = r\"\"\"\n-# CHZipCodeField ############################################################\n+from utils import LocalFlavorTestCase\n \n->>> from django.contrib.localflavor.ch.forms import CHZipCodeField\n->>> f = CHZipCodeField()\n->>> f.clean('800x')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXX.']\n->>> f.clean('80 00')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXX.']\n->>> f.clean('8000')\n-u'8000'\n \n-# CHPhoneNumberField ########################################################\n+class CHLocalFlavorTests(LocalFlavorTestCase):\n+    def test_CHStateSelect(self):\n+        f = CHStateSelect()\n+        out = u'''<select name=\"state\">\n+<option value=\"AG\" selected=\"selected\">Aargau</option>\n+<option value=\"AI\">Appenzell Innerrhoden</option>\n+<option value=\"AR\">Appenzell Ausserrhoden</option>\n+<option value=\"BS\">Basel-Stadt</option>\n+<option value=\"BL\">Basel-Land</option>\n+<option value=\"BE\">Berne</option>\n+<option value=\"FR\">Fribourg</option>\n+<option value=\"GE\">Geneva</option>\n+<option value=\"GL\">Glarus</option>\n+<option value=\"GR\">Graubuenden</option>\n+<option value=\"JU\">Jura</option>\n+<option value=\"LU\">Lucerne</option>\n+<option value=\"NE\">Neuchatel</option>\n+<option value=\"NW\">Nidwalden</option>\n+<option value=\"OW\">Obwalden</option>\n+<option value=\"SH\">Schaffhausen</option>\n+<option value=\"SZ\">Schwyz</option>\n+<option value=\"SO\">Solothurn</option>\n+<option value=\"SG\">St. Gallen</option>\n+<option value=\"TG\">Thurgau</option>\n+<option value=\"TI\">Ticino</option>\n+<option value=\"UR\">Uri</option>\n+<option value=\"VS\">Valais</option>\n+<option value=\"VD\">Vaud</option>\n+<option value=\"ZG\">Zug</option>\n+<option value=\"ZH\">Zurich</option>\n+</select>'''\n+        self.assertEqual(f.render('state', 'AG'), out)\n+    \n+    def test_CHZipCodeField(self):\n+        error_format = [u'Enter a zip code in the format XXXX.']\n+        valid = {\n+            '1234': '1234',\n+            '0000': '0000',\n+        }\n+        invalid = {\n+            '800x': error_format,\n+            '80 00': error_format,\n+        }\n+        self.assertFieldOutput(CHZipCodeField, valid, invalid)\n+    \n+    def test_CHPhoneNumberField(self):\n+        error_format = [u'Phone numbers must be in 0XX XXX XX XX format.']\n+        valid = {\n+            '012 345 67 89': '012 345 67 89',\n+            '0123456789': '012 345 67 89',\n+        }\n+        invalid = {\n+            '01234567890': error_format,\n+            '1234567890': error_format,\n+        }\n+        self.assertFieldOutput(CHPhoneNumberField, valid, invalid)\n+    \n+    def test_CHIdentityCardNumberField(self):\n+        error_format = [u'Enter a valid Swiss identity or passport card number in X1234567<0 or 1234567890 format.']\n+        valid = {\n+            'C1234567<0': 'C1234567<0',\n+            '2123456700': '2123456700',\n+        }\n+        invalid = {\n+            'C1234567<1': error_format,\n+            '2123456701': error_format,\n+        }\n+        self.assertFieldOutput(CHIdentityCardNumberField, valid, invalid)\n \n->>> from django.contrib.localflavor.ch.forms import CHPhoneNumberField\n->>> f = CHPhoneNumberField()\n->>> f.clean('01234567890')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must be in 0XX XXX XX XX format.']\n->>> f.clean('1234567890')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must be in 0XX XXX XX XX format.']\n->>> f.clean('0123456789')\n-u'012 345 67 89'\n-\n-# CHIdentityCardNumberField #################################################\n-\n->>> from django.contrib.localflavor.ch.forms import CHIdentityCardNumberField\n->>> f = CHIdentityCardNumberField()\n->>> f.clean('C1234567<0')\n-u'C1234567<0'\n->>> f.clean('C1234567<1')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid Swiss identity or passport card number in X1234567<0 or 1234567890 format.']\n->>> f.clean('2123456700')\n-u'2123456700'\n->>> f.clean('2123456701')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid Swiss identity or passport card number in X1234567<0 or 1234567890 format.']\n-\n-# CHStateSelect #############################################################\n-\n->>> from django.contrib.localflavor.ch.forms import CHStateSelect\n->>> w = CHStateSelect()\n->>> w.render('state', 'AG')\n-u'<select name=\"state\">\\n<option value=\"AG\" selected=\"selected\">Aargau</option>\\n<option value=\"AI\">Appenzell Innerrhoden</option>\\n<option value=\"AR\">Appenzell Ausserrhoden</option>\\n<option value=\"BS\">Basel-Stadt</option>\\n<option value=\"BL\">Basel-Land</option>\\n<option value=\"BE\">Berne</option>\\n<option value=\"FR\">Fribourg</option>\\n<option value=\"GE\">Geneva</option>\\n<option value=\"GL\">Glarus</option>\\n<option value=\"GR\">Graubuenden</option>\\n<option value=\"JU\">Jura</option>\\n<option value=\"LU\">Lucerne</option>\\n<option value=\"NE\">Neuchatel</option>\\n<option value=\"NW\">Nidwalden</option>\\n<option value=\"OW\">Obwalden</option>\\n<option value=\"SH\">Schaffhausen</option>\\n<option value=\"SZ\">Schwyz</option>\\n<option value=\"SO\">Solothurn</option>\\n<option value=\"SG\">St. Gallen</option>\\n<option value=\"TG\">Thurgau</option>\\n<option value=\"TI\">Ticino</option>\\n<option value=\"UR\">Uri</option>\\n<option value=\"VS\">Valais</option>\\n<option value=\"VD\">Vaud</option>\\n<option value=\"ZG\">Zug</option>\\n<option value=\"ZH\">Zurich</option>\\n</select>'\n-\"\"\""
        },
        {
            "sha": "7818025ae2808bc73458a35a114c9eba8b71e06a",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03",
            "patch": "@@ -1,5 +1,4 @@\n # -*- coding: utf-8 -*-\n-from localflavor.ch import tests as localflavor_ch_tests\n from localflavor.cl import tests as localflavor_cl_tests\n from localflavor.cz import tests as localflavor_cz_tests\n from localflavor.es import tests as localflavor_es_tests\n@@ -30,12 +29,12 @@\n from localflavor.be import BELocalFlavorTests\n from localflavor.br import BRLocalFlavorTests\n from localflavor.ca import CALocalFlavorTests\n+from localflavor.ch import CHLocalFlavorTests\n from localflavor.il import ILLocalFlavorTests\n from localflavor.tr import TRLocalFlavorTests\n \n \n __test__ = {\n-    'localflavor_ch_tests': localflavor_ch_tests,\n     'localflavor_cl_tests': localflavor_cl_tests,\n     'localflavor_cz_tests': localflavor_cz_tests,\n     'localflavor_es_tests': localflavor_es_tests,"
        },
        {
            "sha": "c5fc92c85b2d2676748b2edb4b4a2efcf7a8708c",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=7fdfec7a3c145f2bd54a12f891810a8b5cfe8d03",
            "patch": "@@ -19,6 +19,7 @@\n     BELocalFlavorTests,\n     BRLocalFlavorTests,\n     CALocalFlavorTests,\n+    CHLocalFlavorTests,\n     DELocalFlavorTests,\n     ILLocalFlavorTests,\n     TRLocalFlavorTests,"
        }
    ],
    "stats": {
        "total": 129,
        "additions": 73,
        "deletions": 56
    }
}