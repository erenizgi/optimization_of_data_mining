{
    "author": "claudep",
    "message": "Used skipUnless decorator to skip tests in geos tests.",
    "sha": "5ef599c7b32a238bfda6f56cd149bacb61b85c77",
    "files": [
        {
            "sha": "f435cdaff199e53cd29fc66cd49ce442184180e6",
            "filename": "django/contrib/gis/geos/tests/test_geos.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/5ef599c7b32a238bfda6f56cd149bacb61b85c77/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "raw_url": "https://github.com/django/django/raw/5ef599c7b32a238bfda6f56cd149bacb61b85c77/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py?ref=5ef599c7b32a238bfda6f56cd149bacb61b85c77",
            "patch": "@@ -1,6 +1,5 @@\n import ctypes\n import random\n-import unittest\n \n from django.contrib.gis.geos import (GEOSException, GEOSIndexError, GEOSGeometry,\n     GeometryCollection, Point, MultiPoint, Polygon, MultiPolygon, LinearRing,\n@@ -9,6 +8,8 @@\n from django.contrib.gis.geos.libgeos import GEOS_PREPARE\n from django.contrib.gis.geometry.test_data import TestDataMixin\n \n+from django.utils import unittest\n+\n \n class GEOSTest(unittest.TestCase, TestDataMixin):\n \n@@ -195,9 +196,9 @@ def test_ewkt(self):\n                 self.assertEqual(srid, poly.shell.srid)\n                 self.assertEqual(srid, fromstr(poly.ewkt).srid) # Checking export\n \n+    @unittest.skipUnless(gdal.HAS_GDAL and gdal.GEOJSON, \"gdal >= 1.5 is required\")\n     def test_json(self):\n         \"Testing GeoJSON input/output (via GDAL).\"\n-        if not gdal or not gdal.GEOJSON: return\n         for g in self.geometries.json_geoms:\n             geom = GEOSGeometry(g.wkt)\n             if not hasattr(g, 'not_equal'):\n@@ -813,9 +814,9 @@ def test_collections_of_collections(self):\n         # And, they should be equal.\n         self.assertEqual(gc1, gc2)\n \n+    @unittest.skipUnless(gdal.HAS_GDAL, \"gdal is required\")\n     def test_gdal(self):\n         \"Testing `ogr` and `srs` properties.\"\n-        if not gdal.HAS_GDAL: return\n         g1 = fromstr('POINT(5 23)')\n         self.assertEqual(True, isinstance(g1.ogr, gdal.OGRGeometry))\n         self.assertEqual(g1.srs, None)\n@@ -835,9 +836,9 @@ def test_copy(self):\n         self.assertNotEqual(poly._ptr, cpy1._ptr)\n         self.assertNotEqual(poly._ptr, cpy2._ptr)\n \n+    @unittest.skipUnless(gdal.HAS_GDAL, \"gdal is required\")\n     def test_transform(self):\n         \"Testing `transform` method.\"\n-        if not gdal.HAS_GDAL: return\n         orig = GEOSGeometry('POINT (-104.609 38.255)', 4326)\n         trans = GEOSGeometry('POINT (992385.4472045 481455.4944650)', 2774)\n \n@@ -963,9 +964,9 @@ def get_geoms(lst, srid=None):\n                 self.assertEqual(geom, tmpg)\n                 if not no_srid: self.assertEqual(geom.srid, tmpg.srid)\n \n+    @unittest.skipUnless(GEOS_PREPARE, \"geos >= 3.1.0 is required\")\n     def test_prepared(self):\n         \"Testing PreparedGeometry support.\"\n-        if not GEOS_PREPARE: return\n         # Creating a simple multipolygon and getting a prepared version.\n         mpoly = GEOSGeometry('MULTIPOLYGON(((0 0,0 5,5 5,5 0,0 0)),((5 5,5 10,10 10,10 5,5 5)))')\n         prep = mpoly.prepared\n@@ -990,10 +991,9 @@ def test_line_merge(self):\n         for geom, merged in zip(ref_geoms, ref_merged):\n             self.assertEqual(merged, geom.merged)\n \n+    @unittest.skipUnless(GEOS_PREPARE, \"geos >= 3.1.0 is required\")\n     def test_valid_reason(self):\n         \"Testing IsValidReason support\"\n-        # Skipping tests if GEOS < v3.1.\n-        if not GEOS_PREPARE: return\n \n         g = GEOSGeometry(\"POINT(0 0)\")\n         self.assertTrue(g.valid)"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 7,
        "deletions": 7
    }
}