{
    "author": "freakboy3742",
    "message": "Fixed #14803 -- Corrected an inconsistency in redirection handling between old-style generic views and class-based views. Thanks to gg for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14808 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "324658ef265fb9a4c5cc695a4b0f560575048604",
    "files": [
        {
            "sha": "efdf0ce97c439b50b190be28c0645e9a4eabda5e",
            "filename": "django/views/generic/edit.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/324658ef265fb9a4c5cc695a4b0f560575048604/django%2Fviews%2Fgeneric%2Fedit.py",
            "raw_url": "https://github.com/django/django/raw/324658ef265fb9a4c5cc695a4b0f560575048604/django%2Fviews%2Fgeneric%2Fedit.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fedit.py?ref=324658ef265fb9a4c5cc695a4b0f560575048604",
            "patch": "@@ -97,7 +97,7 @@ def get_form(self, form_class):\n \n     def get_success_url(self):\n         if self.success_url:\n-            url = self.success_url\n+            url = self.success_url % self.object.__dict__\n         else:\n             try:\n                 url = self.object.get_absolute_url()"
        },
        {
            "sha": "28ce0244831ba68da1c4bbca9a043beedceafd2b",
            "filename": "docs/ref/class-based-views.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/324658ef265fb9a4c5cc695a4b0f560575048604/docs%2Fref%2Fclass-based-views.txt",
            "raw_url": "https://github.com/django/django/raw/324658ef265fb9a4c5cc695a4b0f560575048604/docs%2Fref%2Fclass-based-views.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views.txt?ref=324658ef265fb9a4c5cc695a4b0f560575048604",
            "patch": "@@ -481,6 +481,11 @@ ModelFormMixin\n \n         The URL to redirect to when the form is successfully processed.\n \n+        ``success_url`` may contain dictionary string formatting, which\n+        will be interpolated against the object's field attributes. For\n+        example, you could use ``success_url=\"/polls/%(slug)s/\"`` to\n+        redirect to a URL composed out of the ``slug`` field on a model.\n+\n     .. method:: get_form_class()\n \n         Retrieve the form class to instantiate. If"
        },
        {
            "sha": "bf3a5f2b62a292066ea13e5ca6a6c2111d049cd5",
            "filename": "docs/topics/generic-views-migration.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/324658ef265fb9a4c5cc695a4b0f560575048604/docs%2Ftopics%2Fgeneric-views-migration.txt",
            "raw_url": "https://github.com/django/django/raw/324658ef265fb9a4c5cc695a4b0f560575048604/docs%2Ftopics%2Fgeneric-views-migration.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fgeneric-views-migration.txt?ref=324658ef265fb9a4c5cc695a4b0f560575048604",
            "patch": "@@ -113,6 +113,13 @@ For example::\n             })\n             return context\n \n+``post_save_redirect`` argument to create and update views\n+----------------------------------------------------------\n+\n+The ``post_save_redirect`` argument to the create and update views\n+has been renamed ``success_url`` on the\n+:class:`~django.views.generic.edit.ModelFormMixin`.\n+\n ``mimetype``\n ------------\n "
        },
        {
            "sha": "7991ef0d04eb4bcd4d350387e2bf8ecc0e2a58d4",
            "filename": "tests/regressiontests/generic_views/edit.py",
            "status": "modified",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/324658ef265fb9a4c5cc695a4b0f560575048604/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py",
            "raw_url": "https://github.com/django/django/raw/324658ef265fb9a4c5cc695a4b0f560575048604/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py?ref=324658ef265fb9a4c5cc695a4b0f560575048604",
            "patch": "@@ -47,6 +47,14 @@ def test_create_with_redirect(self):\n         self.assertRedirects(res, 'http://testserver/edit/authors/create/')\n         self.assertQuerysetEqual(Author.objects.all(), ['<Author: Randall Munroe>'])\n \n+    def test_create_with_interpolated_redirect(self):\n+        res = self.client.post('/edit/authors/create/interpolate_redirect/',\n+                            {'name': 'Randall Munroe', 'slug': 'randall-munroe'})\n+        self.assertQuerysetEqual(Author.objects.all(), ['<Author: Randall Munroe>'])\n+        self.assertEqual(res.status_code, 302)\n+        pk = Author.objects.all()[0].pk\n+        self.assertRedirects(res, 'http://testserver/edit/author/%d/update/' % pk)\n+\n     def test_create_with_special_properties(self):\n         res = self.client.get('/edit/authors/create/special/')\n         self.assertEqual(res.status_code, 200)\n@@ -145,6 +153,18 @@ def test_update_with_redirect(self):\n         self.assertRedirects(res, 'http://testserver/edit/authors/create/')\n         self.assertQuerysetEqual(Author.objects.all(), ['<Author: Randall Munroe (author of xkcd)>'])\n \n+    def test_update_with_interpolated_redirect(self):\n+        a = Author.objects.create(\n+            name='Randall Munroe',\n+            slug='randall-munroe',\n+        )\n+        res = self.client.post('/edit/author/%d/update/interpolate_redirect/' % a.pk,\n+                        {'name': 'Randall Munroe (author of xkcd)', 'slug': 'randall-munroe'})\n+        self.assertQuerysetEqual(Author.objects.all(), ['<Author: Randall Munroe (author of xkcd)>'])\n+        self.assertEqual(res.status_code, 302)\n+        pk = Author.objects.all()[0].pk\n+        self.assertRedirects(res, 'http://testserver/edit/author/%d/update/' % pk)\n+\n     def test_update_with_special_properties(self):\n         a = Author.objects.create(\n             name='Randall Munroe',"
        },
        {
            "sha": "0643b400ff6861152af13b02e1b09123f0fd1dbc",
            "filename": "tests/regressiontests/generic_views/urls.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/324658ef265fb9a4c5cc695a4b0f560575048604/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/324658ef265fb9a4c5cc695a4b0f560575048604/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Furls.py?ref=324658ef265fb9a4c5cc695a4b0f560575048604",
            "patch": "@@ -51,6 +51,8 @@\n         views.NaiveAuthorCreate.as_view()),\n     (r'^edit/authors/create/redirect/$',\n         views.NaiveAuthorCreate.as_view(success_url='/edit/authors/create/')),\n+    (r'^edit/authors/create/interpolate_redirect/$',\n+        views.NaiveAuthorCreate.as_view(success_url='/edit/author/%(id)d/update/')),\n     (r'^edit/authors/create/restricted/$',\n         views.AuthorCreateRestricted.as_view()),\n     (r'^edit/authors/create/$',\n@@ -62,6 +64,8 @@\n         views.NaiveAuthorUpdate.as_view()),\n     (r'^edit/author/(?P<pk>\\d+)/update/redirect/$',\n         views.NaiveAuthorUpdate.as_view(success_url='/edit/authors/create/')),\n+    (r'^edit/author/(?P<pk>\\d+)/update/interpolate_redirect/$',\n+        views.NaiveAuthorUpdate.as_view(success_url='/edit/author/%(id)d/update/')),\n     (r'^edit/author/(?P<pk>\\d+)/update/$',\n         views.AuthorUpdate.as_view()),\n     (r'^edit/author/(?P<pk>\\d+)/update/special/$',\n@@ -185,4 +189,4 @@\n \n     # Useful for testing redirects\n     (r'^accounts/login/$',  'django.contrib.auth.views.login')\n-)\n\\ No newline at end of file\n+)"
        }
    ],
    "stats": {
        "total": 40,
        "additions": 38,
        "deletions": 2
    }
}