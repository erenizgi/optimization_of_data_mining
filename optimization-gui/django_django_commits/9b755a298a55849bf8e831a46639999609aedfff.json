{
    "author": "aaugustin",
    "message": "Fixed #19291 -- Completed deprecation of ADMIN_MEDIA_PREFIX.",
    "sha": "9b755a298a55849bf8e831a46639999609aedfff",
    "files": [
        {
            "sha": "b00c8d5046c6cda2fe6f6c7fcf29718c96c86e90",
            "filename": "django/conf/__init__.py",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9b755a298a55849bf8e831a46639999609aedfff/django%2Fconf%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9b755a298a55849bf8e831a46639999609aedfff/django%2Fconf%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2F__init__.py?ref=9b755a298a55849bf8e831a46639999609aedfff",
            "patch": "@@ -110,9 +110,6 @@ class BaseSettings(object):\n     def __setattr__(self, name, value):\n         if name in (\"MEDIA_URL\", \"STATIC_URL\") and value and not value.endswith('/'):\n             raise ImproperlyConfigured(\"If set, %s must end with a slash\" % name)\n-        elif name == \"ADMIN_MEDIA_PREFIX\":\n-            warnings.warn(\"The ADMIN_MEDIA_PREFIX setting has been removed; \"\n-                          \"use STATIC_URL instead.\", DeprecationWarning)\n         elif name == \"ALLOWED_INCLUDE_ROOTS\" and isinstance(value, six.string_types):\n             raise ValueError(\"The ALLOWED_INCLUDE_ROOTS setting must be set \"\n                 \"to a tuple, not a string.\")"
        },
        {
            "sha": "b08d13c18fbd64a1e25eae7f7a1410c529f2012a",
            "filename": "django/contrib/admin/templatetags/adminmedia.py",
            "status": "removed",
            "additions": 0,
            "deletions": 15,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/778b8bdcf4fb2c7ddbf22ddbe8665001387b21ae/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadminmedia.py",
            "raw_url": "https://github.com/django/django/raw/778b8bdcf4fb2c7ddbf22ddbe8665001387b21ae/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadminmedia.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadminmedia.py?ref=778b8bdcf4fb2c7ddbf22ddbe8665001387b21ae",
            "patch": "@@ -1,15 +0,0 @@\n-import warnings\n-from django.template import Library\n-from django.templatetags.static import PrefixNode\n-\n-register = Library()\n-\n-@register.simple_tag\n-def admin_media_prefix():\n-    \"\"\"\n-    Returns the string contained in the setting ADMIN_MEDIA_PREFIX.\n-    \"\"\"\n-    warnings.warn(\n-        \"The admin_media_prefix template tag is deprecated. \"\n-        \"Use the static template tag instead.\", DeprecationWarning)\n-    return PrefixNode.handle_simple(\"ADMIN_MEDIA_PREFIX\")"
        },
        {
            "sha": "414da30ff84e0151d18648fe8bac9045e0f2ae1a",
            "filename": "docs/internals/deprecation.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9b755a298a55849bf8e831a46639999609aedfff/docs%2Finternals%2Fdeprecation.txt",
            "raw_url": "https://github.com/django/django/raw/9b755a298a55849bf8e831a46639999609aedfff/docs%2Finternals%2Fdeprecation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fdeprecation.txt?ref=9b755a298a55849bf8e831a46639999609aedfff",
            "patch": "@@ -140,6 +140,11 @@ these changes.\n   removed.  In its place use\n   :class:`~django.contrib.staticfiles.handlers.StaticFilesHandler`.\n \n+* The template tags library ``adminmedia`` and the template tag ``{%\n+  admin_media_prefix %}`` will be removed in favor of the generic static files\n+  handling. (This is faster than the usual deprecation path; see the\n+  :doc:`Django 1.4 release notes</releases/1.4>`.)\n+\n * The :ttag:`url` and :ttag:`ssi` template tags will be\n   modified so that the first argument to each tag is a template variable, not\n   an implied string. In 1.4, this behavior is provided by a version of the tag\n@@ -232,10 +237,6 @@ these changes.\n   :setting:`LOGGING` setting should include this filter explicitly if\n   it is desired.\n \n-* The template tag\n-  :func:`django.contrib.admin.templatetags.adminmedia.admin_media_prefix`\n-  will be removed in favor of the generic static files handling.\n-\n * The builtin truncation functions :func:`django.utils.text.truncate_words`\n   and :func:`django.utils.text.truncate_html_words` will be removed in\n   favor of the ``django.utils.text.Truncator`` class."
        },
        {
            "sha": "9b222bf586e04e80dc5b07266e214d96beaf558a",
            "filename": "docs/ref/settings.txt",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/9b755a298a55849bf8e831a46639999609aedfff/docs%2Fref%2Fsettings.txt",
            "raw_url": "https://github.com/django/django/raw/9b755a298a55849bf8e831a46639999609aedfff/docs%2Fref%2Fsettings.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsettings.txt?ref=9b755a298a55849bf8e831a46639999609aedfff",
            "patch": "@@ -2210,16 +2210,6 @@ The default value for the X-Frame-Options header used by\n Deprecated settings\n ===================\n \n-.. setting:: ADMIN_MEDIA_PREFIX\n-\n-ADMIN_MEDIA_PREFIX\n-------------------\n-\n-.. deprecated:: 1.4\n-   This setting has been obsoleted by the ``django.contrib.staticfiles`` app\n-   integration. See the :doc:`Django 1.4 release notes</releases/1.4>` for\n-   more information.\n-\n .. setting:: AUTH_PROFILE_MODULE\n \n AUTH_PROFILE_MODULE"
        },
        {
            "sha": "cffc0f23af74f2ee1066e349fcf21b7f2ac436ba",
            "filename": "docs/releases/1.5.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9b755a298a55849bf8e831a46639999609aedfff/docs%2Freleases%2F1.5.txt",
            "raw_url": "https://github.com/django/django/raw/9b755a298a55849bf8e831a46639999609aedfff/docs%2Freleases%2F1.5.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.5.txt?ref=9b755a298a55849bf8e831a46639999609aedfff",
            "patch": "@@ -574,6 +574,11 @@ Miscellaneous\n   HTML validation against pre-HTML5 Strict DTDs, you should add a div around it\n   in your pages.\n \n+* The template tags library ``adminmedia``, which only contained the\n+  deprecated template tag ``{% admin_media_prefix %}``, was removed.\n+  Attempting to load it with ``{% load adminmedia %}`` will fail. If your\n+  templates still contain that line you must remove it.\n+\n Features deprecated in 1.5\n ==========================\n "
        }
    ],
    "stats": {
        "total": 42,
        "additions": 10,
        "deletions": 32
    }
}