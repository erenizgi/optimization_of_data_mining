{
    "author": "aaugustin",
    "message": "Fixed #19392 -- Improved error for old-style url tags with dashes.\n\nThanks dloewenherz for the report.",
    "sha": "49519328b4988bf89c11d50191cdee8e9bec3aaa",
    "files": [
        {
            "sha": "aca2f41f2db63aabfda4dba3f5052ad9d99be675",
            "filename": "django/template/defaulttags.py",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/49519328b4988bf89c11d50191cdee8e9bec3aaa/django%2Ftemplate%2Fdefaulttags.py",
            "raw_url": "https://github.com/django/django/raw/49519328b4988bf89c11d50191cdee8e9bec3aaa/django%2Ftemplate%2Fdefaulttags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaulttags.py?ref=49519328b4988bf89c11d50191cdee8e9bec3aaa",
            "patch": "@@ -1262,7 +1262,12 @@ def url(parser, token):\n     if len(bits) < 2:\n         raise TemplateSyntaxError(\"'%s' takes at least one argument\"\n                                   \" (path to a view)\" % bits[0])\n-    viewname = parser.compile_filter(bits[1])\n+    try:\n+        viewname = parser.compile_filter(bits[1])\n+    except TemplateSyntaxError as exc:\n+        exc.args = (exc.args[0] + \". \"\n+                \"The syntax of 'url' changed in Django 1.5, see the docs.\"),\n+        raise\n     args = []\n     kwargs = {}\n     asvar = None"
        },
        {
            "sha": "d21434a12e636a8576b0ca34623651cdc07d0367",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/49519328b4988bf89c11d50191cdee8e9bec3aaa/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/49519328b4988bf89c11d50191cdee8e9bec3aaa/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=49519328b4988bf89c11d50191cdee8e9bec3aaa",
            "patch": "@@ -366,14 +366,20 @@ def test_url_reverse_no_settings_module(self):\n         with self.assertRaises(urlresolvers.NoReverseMatch):\n             t.render(c)\n \n-    def test_url_explicit_exception_for_old_syntax(self):\n+    def test_url_explicit_exception_for_old_syntax_at_run_time(self):\n         # Regression test for #19280\n         t = Template('{% url path.to.view %}')      # not quoted = old syntax\n         c = Context()\n         with self.assertRaisesRegexp(urlresolvers.NoReverseMatch,\n                 \"The syntax changed in Django 1.5, see the docs.\"):\n             t.render(c)\n \n+    def test_url_explicit_exception_for_old_syntax_at_compile_time(self):\n+        # Regression test for #19392\n+        with self.assertRaisesRegexp(template.TemplateSyntaxError,\n+                \"The syntax of 'url' changed in Django 1.5, see the docs.\"):\n+            t = Template('{% url my-view %}')      # not a variable = old syntax\n+\n     @override_settings(DEBUG=True, TEMPLATE_DEBUG=True)\n     def test_no_wrapped_exception(self):\n         \"\"\""
        }
    ],
    "stats": {
        "total": 15,
        "additions": 13,
        "deletions": 2
    }
}