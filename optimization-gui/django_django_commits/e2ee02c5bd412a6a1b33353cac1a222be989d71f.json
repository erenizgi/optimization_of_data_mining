{
    "author": "ikks",
    "message": "Fixed #19951 -- Admin: Invalid model PK values shouldn't cause 500 status.\n\nAvoid ValueError in admin when passing a string as PK for an inherited\nmodel with an integer PK field.\n\nThanks ikks for the patch. See also #11191.",
    "sha": "e2ee02c5bd412a6a1b33353cac1a222be989d71f",
    "files": [
        {
            "sha": "567f7cf99078b4a271827aa09fc78ff9b5ac5604",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e2ee02c5bd412a6a1b33353cac1a222be989d71f/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/e2ee02c5bd412a6a1b33353cac1a222be989d71f/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=e2ee02c5bd412a6a1b33353cac1a222be989d71f",
            "patch": "@@ -501,7 +501,7 @@ def get_object(self, request, object_id):\n         try:\n             object_id = model._meta.pk.to_python(object_id)\n             return queryset.get(pk=object_id)\n-        except (model.DoesNotExist, ValidationError):\n+        except (model.DoesNotExist, ValidationError, ValueError):\n             return None\n \n     def get_changelist_form(self, request, **kwargs):"
        },
        {
            "sha": "ff2eb957457dc2dbcdc6a4ff8ccbcdeac5278d7b",
            "filename": "tests/admin_views/tests.py",
            "status": "modified",
            "additions": 12,
            "deletions": 3,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/e2ee02c5bd412a6a1b33353cac1a222be989d71f/tests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e2ee02c5bd412a6a1b33353cac1a222be989d71f/tests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fadmin_views%2Ftests.py?ref=e2ee02c5bd412a6a1b33353cac1a222be989d71f",
            "patch": "@@ -124,13 +124,22 @@ def testBasicEditGet(self):\n \n     def testBasicEditGetStringPK(self):\n         \"\"\"\n-        A smoke test to ensure GET on the change_view works (returns an HTTP\n-        404 error, see #11191) when passing a string as the PK argument for a\n-        model with an integer PK field.\n+        Ensure GET on the change_view works (returns an HTTP 404 error, see\n+        #11191) when passing a string as the PK argument for a model with an\n+        integer PK field.\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/section/abc/' % self.urlbit)\n         self.assertEqual(response.status_code, 404)\n \n+    def testBasicInheritanceGetStringPK(self):\n+        \"\"\"\n+        Ensure GET on the change_view works on inherited models (returns an\n+        HTTP 404 error, see #19951) when passing a string as the PK argument\n+        for a model with an integer PK field.\n+        \"\"\"\n+        response = self.client.get('/test_admin/%s/admin_views/supervillain/abc/' % self.urlbit)\n+        self.assertEqual(response.status_code, 404)\n+\n     def testBasicAddPost(self):\n         \"\"\"\n         A smoke test to ensure POST on add_view works."
        }
    ],
    "stats": {
        "total": 17,
        "additions": 13,
        "deletions": 4
    }
}