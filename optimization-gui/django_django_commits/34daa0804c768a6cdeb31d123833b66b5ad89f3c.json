{
    "author": "jezdez",
    "message": "Fixed #14144 -- Made sure custom validators are called in ModelMultipleChoiceFields. Thanks, matiasb.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14886 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "34daa0804c768a6cdeb31d123833b66b5ad89f3c",
    "files": [
        {
            "sha": "de52b6a7e0f53aa55aa630049d03e42e8402eb64",
            "filename": "django/forms/models.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/34daa0804c768a6cdeb31d123833b66b5ad89f3c/django%2Fforms%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/34daa0804c768a6cdeb31d123833b66b5ad89f3c/django%2Fforms%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fmodels.py?ref=34daa0804c768a6cdeb31d123833b66b5ad89f3c",
            "patch": "@@ -1045,6 +1045,9 @@ def clean(self, value):\n         for val in value:\n             if force_unicode(val) not in pks:\n                 raise ValidationError(self.error_messages['invalid_choice'] % val)\n+        # Since this overrides the inherited ModelChoiceField.clean\n+        # we run custom validators here\n+        self.run_validators(value)\n         return qs\n \n     def prepare_value(self, value):"
        },
        {
            "sha": "2e2afd6c05e3126f6ffbf006185e06aa92616afa",
            "filename": "tests/regressiontests/model_forms_regress/tests.py",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/34daa0804c768a6cdeb31d123833b66b5ad89f3c/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/34daa0804c768a6cdeb31d123833b66b5ad89f3c/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py?ref=34daa0804c768a6cdeb31d123833b66b5ad89f3c",
            "patch": "@@ -24,6 +24,22 @@ def test_model_multiple_choice_number_of_queries(self):\n         f = forms.ModelMultipleChoiceField(queryset=Person.objects.all())\n         self.assertNumQueries(1, f.clean, [1, 3, 5, 7, 9])\n \n+    def test_model_multiple_choice_run_validators(self):\n+        \"\"\"\n+        Test that ModelMultipleChoiceField run given validators (#14144).\n+        \"\"\"\n+        for i in range(30):\n+            Person.objects.create(name=\"Person %s\" % i)\n+\n+        self._validator_run = False\n+        def my_validator(value):\n+            self._validator_run = True\n+\n+        f = forms.ModelMultipleChoiceField(queryset=Person.objects.all(),\n+                                           validators=[my_validator])\n+        f.clean([1,2])\n+        self.assertTrue(self._validator_run)\n+\n class TripleForm(forms.ModelForm):\n     class Meta:\n         model = Triple"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 19,
        "deletions": 0
    }
}