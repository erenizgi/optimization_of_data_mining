{
    "author": "timgraham",
    "message": "Fixed #19756 - Corrected a ManyToMany example and added some links and markup.",
    "sha": "43efefae692729925c0f75c55e93bd1f33f42bfd",
    "files": [
        {
            "sha": "2076427768c6cd41848349364fb7e5fc7e5c3e60",
            "filename": "docs/topics/db/examples/many_to_many.txt",
            "status": "modified",
            "additions": 27,
            "deletions": 20,
            "changes": 47,
            "blob_url": "https://github.com/django/django/blob/43efefae692729925c0f75c55e93bd1f33f42bfd/docs%2Ftopics%2Fdb%2Fexamples%2Fmany_to_many.txt",
            "raw_url": "https://github.com/django/django/raw/43efefae692729925c0f75c55e93bd1f33f42bfd/docs%2Ftopics%2Fdb%2Fexamples%2Fmany_to_many.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Fexamples%2Fmany_to_many.txt?ref=43efefae692729925c0f75c55e93bd1f33f42bfd",
            "patch": "@@ -35,7 +35,7 @@ objects, and a ``Publication`` has multiple ``Article`` objects:\n What follows are examples of operations that can be performed using the Python\n API facilities.\n \n-Create a couple of Publications::\n+Create a couple of ``Publications``::\n \n     >>> p1 = Publication(title='The Python Journal')\n     >>> p1.save()\n@@ -44,11 +44,11 @@ Create a couple of Publications::\n     >>> p3 = Publication(title='Science Weekly')\n     >>> p3.save()\n \n-Create an Article::\n+Create an ``Article``::\n \n     >>> a1 = Article(headline='Django lets you build Web apps easily')\n \n-You can't associate it with a Publication until it's been saved::\n+You can't associate it with a ``Publication`` until it's been saved::\n \n     >>> a1.publications.add(p1)\n     Traceback (most recent call last):\n@@ -60,11 +60,11 @@ Save it!\n \n     >>> a1.save()\n \n-Associate the Article with a Publication::\n+Associate the ``Article`` with a ``Publication``::\n \n     >>> a1.publications.add(p1)\n \n-Create another Article, and set it to appear in both Publications::\n+Create another ``Article``, and set it to appear in both ``Publications``::\n \n     >>> a2 = Article(headline='NASA uses Python')\n     >>> a2.save()\n@@ -75,25 +75,26 @@ Adding a second time is OK::\n \n     >>> a2.publications.add(p3)\n \n-Adding an object of the wrong type raises TypeError::\n+Adding an object of the wrong type raises :exc:`~exceptions.TypeError`::\n \n     >>> a2.publications.add(a1)\n     Traceback (most recent call last):\n     ...\n     TypeError: 'Publication' instance expected\n \n-Add a Publication directly via publications.add by using keyword arguments::\n+Create and add a ``Publication`` to an ``Article`` in one step using\n+:meth:`~django.db.models.fields.related.RelatedManager.create`::\n \n     >>> new_publication = a2.publications.create(title='Highlights for Children')\n \n-Article objects have access to their related Publication objects::\n+``Article`` objects have access to their related ``Publication`` objects::\n \n     >>> a1.publications.all()\n     [<Publication: The Python Journal>]\n     >>> a2.publications.all()\n     [<Publication: Highlights for Children>, <Publication: Science News>, <Publication: Science Weekly>, <Publication: The Python Journal>]\n \n-Publication objects have access to their related Article objects::\n+``Publication`` objects have access to their related ``Article`` objects::\n \n     >>> p2.article_set.all()\n     [<Article: NASA uses Python>]\n@@ -102,7 +103,8 @@ Publication objects have access to their related Article objects::\n     >>> Publication.objects.get(id=4).article_set.all()\n     [<Article: NASA uses Python>]\n \n-Many-to-many relationships can be queried using :ref:`lookups across relationships <lookups-that-span-relationships>`::\n+Many-to-many relationships can be queried using :ref:`lookups across\n+relationships <lookups-that-span-relationships>`::\n \n     >>> Article.objects.filter(publications__id__exact=1)\n     [<Article: Django lets you build Web apps easily>, <Article: NASA uses Python>]\n@@ -119,7 +121,8 @@ Many-to-many relationships can be queried using :ref:`lookups across relationshi\n     >>> Article.objects.filter(publications__title__startswith=\"Science\").distinct()\n     [<Article: NASA uses Python>]\n \n-The count() function respects distinct() as well::\n+The :meth:`~django.db.models.query.QuerySet.count` function respects\n+:meth:`~django.db.models.query.QuerySet.distinct` as well::\n \n     >>> Article.objects.filter(publications__title__startswith=\"Science\").count()\n     2\n@@ -133,7 +136,7 @@ The count() function respects distinct() as well::\n     [<Article: Django lets you build Web apps easily>, <Article: NASA uses Python>]\n \n Reverse m2m queries are supported (i.e., starting at the table that doesn't have\n-a ManyToManyField)::\n+a :class:`~django.db.models.ManyToManyField`)::\n \n     >>> Publication.objects.filter(id__exact=1)\n     [<Publication: The Python Journal>]\n@@ -163,7 +166,7 @@ involved is a little complex)::\n     >>> Article.objects.exclude(publications=p2)\n     [<Article: Django lets you build Web apps easily>]\n \n-If we delete a Publication, its Articles won't be able to access it::\n+If we delete a ``Publication``, its ``Articles`` won't be able to access it::\n \n     >>> p1.delete()\n     >>> Publication.objects.all()\n@@ -172,7 +175,7 @@ If we delete a Publication, its Articles won't be able to access it::\n     >>> a1.publications.all()\n     []\n \n-If we delete an Article, its Publications won't be able to access it::\n+If we delete an ``Article``, its ``Publications`` won't be able to access it::\n \n     >>> a2.delete()\n     >>> Article.objects.all()\n@@ -199,7 +202,7 @@ Adding via the other end using keywords::\n     >>> a5.publications.all()\n     [<Publication: Science News>]\n \n-Removing publication from an article::\n+Removing ``Publication`` from an ``Article``::\n \n     >>> a4.publications.remove(p2)\n     >>> p2.article_set.all()\n@@ -242,15 +245,16 @@ And you can clear from the other end::\n     >>> p2.article_set.all()\n     [<Article: Oxygen-free diet works wonders>]\n \n-Recreate the article and Publication we have deleted::\n+Recreate the ``Article`` and ``Publication`` we have deleted::\n \n     >>> p1 = Publication(title='The Python Journal')\n     >>> p1.save()\n     >>> a2 = Article(headline='NASA uses Python')\n     >>> a2.save()\n     >>> a2.publications.add(p1, p2, p3)\n \n-Bulk delete some Publications - references to deleted publications should go::\n+Bulk delete some ``Publications`` - references to deleted publications should\n+go::\n \n     >>> Publication.objects.filter(title__startswith='Science').delete()\n     >>> Publication.objects.all()\n@@ -267,15 +271,18 @@ Bulk delete some articles - references to deleted objects should go::\n     [<Article: Django lets you build Web apps easily>]\n     >>> q.delete()\n \n-After the delete, the QuerySet cache needs to be cleared, and the referenced\n-objects should be gone::\n+After the :meth:`~django.db.models.query.QuerySet.delete`, the\n+:class:`~django.db.models.query.QuerySet` cache needs to be cleared, and the\n+referenced objects should be gone::\n \n     >>> print(q)\n     []\n     >>> p1.article_set.all()\n     [<Article: NASA uses Python>]\n \n-An alternate to calling clear() is to assign the empty set::\n+An alternate to calling\n+:meth:`~django.db.models.fields.related.RelatedManager.clear` is to assign the\n+empty set::\n \n     >>> p1.article_set = []\n     >>> p1.article_set.all()"
        }
    ],
    "stats": {
        "total": 47,
        "additions": 27,
        "deletions": 20
    }
}