{
    "author": "aaugustin",
    "message": "Updated bundled version of six.",
    "sha": "e11ccc76d325b6bbbf101f510a91299f507f0745",
    "files": [
        {
            "sha": "9633640b806945e6f05e7122b65c4f688a3fc5c9",
            "filename": "django/utils/six.py",
            "status": "modified",
            "additions": 34,
            "deletions": 25,
            "changes": 59,
            "blob_url": "https://github.com/django/django/blob/e11ccc76d325b6bbbf101f510a91299f507f0745/django%2Futils%2Fsix.py",
            "raw_url": "https://github.com/django/django/raw/e11ccc76d325b6bbbf101f510a91299f507f0745/django%2Futils%2Fsix.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fsix.py?ref=e11ccc76d325b6bbbf101f510a91299f507f0745",
            "patch": "@@ -1,6 +1,6 @@\n \"\"\"Utilities for writing code that runs on Python 2 and 3\"\"\"\n \n-# Copyright (c) 2010-2012 Benjamin Peterson\n+# Copyright (c) 2010-2013 Benjamin Peterson\n #\n # Permission is hereby granted, free of charge, to any person obtaining a copy of\n # this software and associated documentation files (the \"Software\"), to deal in\n@@ -209,22 +209,28 @@ def remove_move(name):\n     _meth_func = \"__func__\"\n     _meth_self = \"__self__\"\n \n+    _func_closure = \"__closure__\"\n     _func_code = \"__code__\"\n     _func_defaults = \"__defaults__\"\n+    _func_globals = \"__globals__\"\n \n     _iterkeys = \"keys\"\n     _itervalues = \"values\"\n     _iteritems = \"items\"\n+    _iterlists = \"lists\"\n else:\n     _meth_func = \"im_func\"\n     _meth_self = \"im_self\"\n \n+    _func_closure = \"func_closure\"\n     _func_code = \"func_code\"\n     _func_defaults = \"func_defaults\"\n+    _func_globals = \"func_globals\"\n \n     _iterkeys = \"iterkeys\"\n     _itervalues = \"itervalues\"\n     _iteritems = \"iteritems\"\n+    _iterlists = \"iterlists\"\n \n \n try:\n@@ -235,14 +241,18 @@ def advance_iterator(it):\n next = advance_iterator\n \n \n+try:\n+    callable = callable\n+except NameError:\n+    def callable(obj):\n+        return any(\"__call__\" in klass.__dict__ for klass in type(obj).__mro__)\n+\n+\n if PY3:\n     def get_unbound_function(unbound):\n         return unbound\n \n     Iterator = object\n-\n-    def callable(obj):\n-        return any(\"__call__\" in klass.__dict__ for klass in type(obj).__mro__)\n else:\n     def get_unbound_function(unbound):\n         return unbound.im_func\n@@ -259,21 +269,27 @@ def next(self):\n \n get_method_function = operator.attrgetter(_meth_func)\n get_method_self = operator.attrgetter(_meth_self)\n+get_function_closure = operator.attrgetter(_func_closure)\n get_function_code = operator.attrgetter(_func_code)\n get_function_defaults = operator.attrgetter(_func_defaults)\n+get_function_globals = operator.attrgetter(_func_globals)\n \n \n-def iterkeys(d):\n+def iterkeys(d, **kw):\n     \"\"\"Return an iterator over the keys of a dictionary.\"\"\"\n-    return iter(getattr(d, _iterkeys)())\n+    return iter(getattr(d, _iterkeys)(**kw))\n \n-def itervalues(d):\n+def itervalues(d, **kw):\n     \"\"\"Return an iterator over the values of a dictionary.\"\"\"\n-    return iter(getattr(d, _itervalues)())\n+    return iter(getattr(d, _itervalues)(**kw))\n \n-def iteritems(d):\n+def iteritems(d, **kw):\n     \"\"\"Return an iterator over the (key, value) pairs of a dictionary.\"\"\"\n-    return iter(getattr(d, _iteritems)())\n+    return iter(getattr(d, _iteritems)(**kw))\n+\n+def iterlists(d, **kw):\n+    \"\"\"Return an iterator over the (key, [values]) pairs of a dictionary.\"\"\"\n+    return iter(getattr(d, _iterlists)(**kw))\n \n \n if PY3:\n@@ -317,17 +333,17 @@ def reraise(tp, value, tb=None):\n     del builtins\n \n else:\n-    def exec_(code, globs=None, locs=None):\n+    def exec_(_code_, _globs_=None, _locs_=None):\n         \"\"\"Execute code in a namespace.\"\"\"\n-        if globs is None:\n+        if _globs_ is None:\n             frame = sys._getframe(1)\n-            globs = frame.f_globals\n-            if locs is None:\n-                locs = frame.f_locals\n+            _globs_ = frame.f_globals\n+            if _locs_ is None:\n+                _locs_ = frame.f_locals\n             del frame\n-        elif locs is None:\n-            locs = globs\n-        exec(\"\"\"exec code in globs, locs\"\"\")\n+        elif _locs_ is None:\n+            _locs_ = _globs_\n+        exec(\"\"\"exec _code_ in _globs_, _locs_\"\"\")\n \n \n     exec_(\"\"\"def reraise(tp, value, tb=None):\n@@ -391,24 +407,17 @@ def with_metaclass(meta, base=object):\n ### Additional customizations for Django ###\n \n if PY3:\n-    _iterlists = \"lists\"\n     _assertRaisesRegex = \"assertRaisesRegex\"\n     _assertRegex = \"assertRegex\"\n     memoryview = memoryview\n else:\n-    _iterlists = \"iterlists\"\n     _assertRaisesRegex = \"assertRaisesRegexp\"\n     _assertRegex = \"assertRegexpMatches\"\n     # memoryview and buffer are not stricly equivalent, but should be fine for\n     # django core usage (mainly BinaryField)\n     memoryview = buffer\n \n \n-def iterlists(d):\n-    \"\"\"Return an iterator over the values of a MultiValueDict.\"\"\"\n-    return getattr(d, _iterlists)()\n-\n-\n def assertRaisesRegex(self, *args, **kwargs):\n     return getattr(self, _assertRaisesRegex)(*args, **kwargs)\n "
        },
        {
            "sha": "ce5a34b2d07bf5f008c46a360c451903adf0329f",
            "filename": "docs/topics/python3.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/e11ccc76d325b6bbbf101f510a91299f507f0745/docs%2Ftopics%2Fpython3.txt",
            "raw_url": "https://github.com/django/django/raw/e11ccc76d325b6bbbf101f510a91299f507f0745/docs%2Ftopics%2Fpython3.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fpython3.txt?ref=e11ccc76d325b6bbbf101f510a91299f507f0745",
            "patch": "@@ -391,12 +391,7 @@ function.\n Customizations of six\n ---------------------\n \n-The version of six bundled with Django includes one extra function:\n-\n-.. function:: iterlists(MultiValueDict)\n-\n-    Returns an iterator over the lists of values of a ``MultiValueDict``. This\n-    replaces ``iterlists()`` on Python 2 and ``lists()`` on Python 3.\n+The version of six bundled with Django includes a few extras.\n \n .. function:: assertRaisesRegex(testcase, *args, **kwargs)\n "
        }
    ],
    "stats": {
        "total": 66,
        "additions": 35,
        "deletions": 31
    }
}