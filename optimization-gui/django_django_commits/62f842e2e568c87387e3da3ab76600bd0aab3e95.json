{
    "author": "unknown",
    "message": "Fixed #19581 -- ensure unique html ids with CheckboxSelectMultiple widgets\n\nID check is now done the same way as MultipleHiddenInput.",
    "sha": "62f842e2e568c87387e3da3ab76600bd0aab3e95",
    "files": [
        {
            "sha": "d6ea56f0c8d5d162d96fe34d24b58cf2b90d40fd",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/62f842e2e568c87387e3da3ab76600bd0aab3e95/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/62f842e2e568c87387e3da3ab76600bd0aab3e95/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=62f842e2e568c87387e3da3ab76600bd0aab3e95",
            "patch": "@@ -754,17 +754,17 @@ def id_for_label(self, id_):\n class CheckboxSelectMultiple(SelectMultiple):\n     def render(self, name, value, attrs=None, choices=()):\n         if value is None: value = []\n-        has_id = attrs and 'id' in attrs\n         final_attrs = self.build_attrs(attrs, name=name)\n+        id_ = final_attrs.get('id', None)\n         output = ['<ul>']\n         # Normalize to strings\n         str_values = set([force_text(v) for v in value])\n         for i, (option_value, option_label) in enumerate(chain(self.choices, choices)):\n             # If an ID attribute was given, add a numeric index as a suffix,\n             # so that the checkboxes don't all have the same ID attribute.\n-            if has_id:\n-                final_attrs = dict(final_attrs, id='%s_%s' % (attrs['id'], i))\n-                label_for = format_html(' for=\"{0}\"', final_attrs['id'])\n+            if id_:\n+                final_attrs = dict(final_attrs, id='%s_%s' % (id_, i))\n+                label_for = format_html(' for=\"{0}_{1}\"', id_, i)\n             else:\n                 label_for = ''\n "
        },
        {
            "sha": "7a2961358afe2b63773bca831222920c17a817f1",
            "filename": "tests/regressiontests/forms/tests/widgets.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/62f842e2e568c87387e3da3ab76600bd0aab3e95/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/62f842e2e568c87387e3da3ab76600bd0aab3e95/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py?ref=62f842e2e568c87387e3da3ab76600bd0aab3e95",
            "patch": "@@ -861,6 +861,13 @@ def get_choices():\n <li><label for=\"abc_0\"><input checked=\"checked\" type=\"checkbox\" name=\"letters\" value=\"a\" id=\"abc_0\" /> A</label></li>\n <li><label for=\"abc_1\"><input type=\"checkbox\" name=\"letters\" value=\"b\" id=\"abc_1\" /> B</label></li>\n <li><label for=\"abc_2\"><input checked=\"checked\" type=\"checkbox\" name=\"letters\" value=\"c\" id=\"abc_2\" /> C</label></li>\n+</ul>\"\"\")\n+\n+        # Each input gets a separate ID when the ID is passed to the constructor\n+        self.assertHTMLEqual(CheckboxSelectMultiple(attrs={'id': 'abc'}).render('letters', list('ac'), choices=zip(list('abc'), list('ABC'))), \"\"\"<ul>\n+<li><label for=\"abc_0\"><input checked=\"checked\" type=\"checkbox\" name=\"letters\" value=\"a\" id=\"abc_0\" /> A</label></li>\n+<li><label for=\"abc_1\"><input type=\"checkbox\" name=\"letters\" value=\"b\" id=\"abc_1\" /> B</label></li>\n+<li><label for=\"abc_2\"><input checked=\"checked\" type=\"checkbox\" name=\"letters\" value=\"c\" id=\"abc_2\" /> C</label></li>\n </ul>\"\"\")\n \n     def test_multi(self):"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 11,
        "deletions": 4
    }
}