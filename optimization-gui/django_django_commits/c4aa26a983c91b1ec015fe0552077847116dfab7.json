{
    "author": "malcolmt",
    "message": "Internal refactoring; moving LOOKUP_SEP up one level.\n\nIn an ideal world, nothing except django.db.models.query should have to\nimport stuff from django.models.sql.*. A few things were needing to get\nhold of sql.constants.LOOKUP_SEP, so this commit moves it up to\ndjango.db.models.constants.LOOKUP_SEP.\n\nThere are still a couple of places (admin) poking into sql.* to get\nQUERY_TERMS, which is unfortunate, but a slightly different issue and\nharder to adjust.",
    "sha": "c4aa26a983c91b1ec015fe0552077847116dfab7",
    "files": [
        {
            "sha": "f4205f2ce7b4526de50638269576318ad1bc390a",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -14,9 +14,10 @@\n from django.core.paginator import Paginator\n from django.core.urlresolvers import reverse\n from django.db import models, transaction, router\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.related import RelatedObject\n from django.db.models.fields import BLANK_CHOICE_DASH, FieldDoesNotExist\n-from django.db.models.sql.constants import LOOKUP_SEP, QUERY_TERMS\n+from django.db.models.sql.constants import QUERY_TERMS\n from django.http import Http404, HttpResponse, HttpResponseRedirect\n from django.shortcuts import get_object_or_404\n from django.template.response import SimpleTemplateResponse, TemplateResponse"
        },
        {
            "sha": "f95fe53de188aff6dea5861cfff4142bf2e7f05e",
            "filename": "django/contrib/admin/util.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fcontrib%2Fadmin%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fcontrib%2Fadmin%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Futil.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -4,7 +4,7 @@\n import decimal\n \n from django.db import models\n-from django.db.models.sql.constants import LOOKUP_SEP\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.deletion import Collector\n from django.db.models.related import RelatedObject\n from django.forms.forms import pretty_name"
        },
        {
            "sha": "ec078aebedfb702b797b3198f976a42470106223",
            "filename": "django/contrib/gis/db/models/sql/where.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fwhere.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fwhere.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fwhere.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -1,5 +1,5 @@\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.fields import FieldDoesNotExist\n-from django.db.models.sql.constants import LOOKUP_SEP\n from django.db.models.sql.expressions import SQLEvaluator\n from django.db.models.sql.where import Constraint, WhereNode\n from django.contrib.gis.db.models.fields import GeometryField"
        },
        {
            "sha": "629497eb3d68501fe3cca06335917c7420143d95",
            "filename": "django/db/models/constants.py",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fconstants.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fconstants.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fconstants.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -0,0 +1,7 @@\n+\"\"\"\n+Constants used across the ORM in general.\n+\"\"\"\n+\n+# Separator used to split filter strings apart.\n+LOOKUP_SEP = '__'\n+"
        },
        {
            "sha": "8bf08b7a9370a21c709cbe2f27ac6a324f4e8b16",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -8,6 +8,7 @@\n \n from django.core import exceptions\n from django.db import connections, router, transaction, IntegrityError\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.fields import AutoField\n from django.db.models.query_utils import (Q, select_related_descend,\n     deferred_class_factory, InvalidQuery)\n@@ -1613,8 +1614,6 @@ def prefetch_related_objects(result_cache, related_lookups):\n     Populates prefetched objects caches for a list of results\n     from a QuerySet\n     \"\"\"\n-    from django.db.models.sql.constants import LOOKUP_SEP\n-\n     if len(result_cache) == 0:\n         return # nothing to do\n "
        },
        {
            "sha": "28d240485819eda2731d471f069ad3cd5a6fb8be",
            "filename": "django/db/models/sql/compiler.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -3,9 +3,10 @@\n from django.core.exceptions import FieldError\n from django.db import transaction\n from django.db.backends.util import truncate_name\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.query_utils import select_related_descend\n from django.db.models.sql.constants import (SINGLE, MULTI, ORDER_DIR,\n-    LOOKUP_SEP, GET_ITERATOR_CHUNK_SIZE)\n+        GET_ITERATOR_CHUNK_SIZE)\n from django.db.models.sql.datastructures import EmptyResultSet\n from django.db.models.sql.expressions import SQLEvaluator\n from django.db.models.sql.query import get_order_dir, Query"
        },
        {
            "sha": "f750310624078a9a0836bfca13f381e5ceb770c3",
            "filename": "django/db/models/sql/constants.py",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fconstants.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fconstants.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fconstants.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -1,7 +1,13 @@\n+\"\"\"\n+Constants specific to the SQL storage portion of the ORM.\n+\"\"\"\n+\n from collections import namedtuple\n import re\n \n-# Valid query types (a set is used for speedy lookups).\n+# Valid query types (a set is used for speedy lookups). These are (currently)\n+# considered SQL-specific; other storage systems may choose to use different\n+# lookup types.\n QUERY_TERMS = set([\n     'exact', 'iexact', 'contains', 'icontains', 'gt', 'gte', 'lt', 'lte', 'in',\n     'startswith', 'istartswith', 'endswith', 'iendswith', 'range', 'year',\n@@ -12,9 +18,6 @@\n # Larger values are slightly faster at the expense of more storage space.\n GET_ITERATOR_CHUNK_SIZE = 100\n \n-# Separator used to split filter strings apart.\n-LOOKUP_SEP = '__'\n-\n # Constants to make looking up tuple values clearer.\n # Join lists (indexes into the tuples that are values in the alias_map\n # dictionary in the Query class)."
        },
        {
            "sha": "ac8fea6da3e9ac08ea88f9acd63d19b2342974ce",
            "filename": "django/db/models/sql/expressions.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fexpressions.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fexpressions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fexpressions.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -1,6 +1,6 @@\n from django.core.exceptions import FieldError\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.fields import FieldDoesNotExist\n-from django.db.models.sql.constants import LOOKUP_SEP\n \n class SQLEvaluator(object):\n     def __init__(self, expression, query, allow_joins=True):"
        },
        {
            "sha": "77f24fcf24a261fcc76a5d948541f6d91c22a32b",
            "filename": "django/db/models/sql/query.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fquery.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -15,11 +15,12 @@\n from django.utils import six\n from django.db import connections, DEFAULT_DB_ALIAS\n from django.db.models import signals\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.expressions import ExpressionNode\n from django.db.models.fields import FieldDoesNotExist\n from django.db.models.sql import aggregates as base_aggregates_module\n-from django.db.models.sql.constants import (QUERY_TERMS, LOOKUP_SEP, ORDER_DIR,\n-    SINGLE, ORDER_PATTERN, JoinInfo)\n+from django.db.models.sql.constants import (QUERY_TERMS, ORDER_DIR, SINGLE,\n+        ORDER_PATTERN, JoinInfo)\n from django.db.models.sql.datastructures import EmptyResultSet, Empty, MultiJoin\n from django.db.models.sql.expressions import SQLEvaluator\n from django.db.models.sql.where import (WhereNode, Constraint, EverythingNode,"
        },
        {
            "sha": "c6995c6abbfd1a0d5eb0b7f8d98079d5f7f62e07",
            "filename": "django/db/models/sql/subqueries.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py",
            "raw_url": "https://github.com/django/django/raw/c4aa26a983c91b1ec015fe0552077847116dfab7/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py?ref=c4aa26a983c91b1ec015fe0552077847116dfab7",
            "patch": "@@ -3,6 +3,7 @@\n \"\"\"\n \n from django.core.exceptions import FieldError\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.fields import DateField, FieldDoesNotExist\n from django.db.models.sql.constants import *\n from django.db.models.sql.datastructures import Date"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 26,
        "deletions": 13
    }
}