{
    "author": "ramiro",
    "message": "Made dictsort and dictsort reversed template filters fail silently\nwhen passed list of things that aren't dictionaries.\n\nThanks Harris Lapiroff for the report and Daniel Barreto for the patch.\n\nFixes #15652.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17374 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "c5dcba4159e00ed7fc43b605946be489602ab369",
    "files": [
        {
            "sha": "f93e7995358df6f4230c695209ffb4d144aea404",
            "filename": "django/template/defaultfilters.py",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5dcba4159e00ed7fc43b605946be489602ab369/django%2Ftemplate%2Fdefaultfilters.py",
            "raw_url": "https://github.com/django/django/raw/c5dcba4159e00ed7fc43b605946be489602ab369/django%2Ftemplate%2Fdefaultfilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaultfilters.py?ref=c5dcba4159e00ed7fc43b605946be489602ab369",
            "patch": "@@ -7,7 +7,7 @@\n from functools import wraps\n from pprint import pformat\n \n-from django.template.base import Variable, Library\n+from django.template.base import Variable, Library, VariableDoesNotExist\n from django.conf import settings\n from django.utils import formats\n from django.utils.dateformat import format, time_format\n@@ -490,15 +490,21 @@ def dictsort(value, arg):\n     Takes a list of dicts, returns that list sorted by the property given in\n     the argument.\n     \"\"\"\n-    return sorted(value, key=Variable(arg).resolve)\n+    try:\n+        return sorted(value, key=Variable(arg).resolve)\n+    except (TypeError, VariableDoesNotExist):\n+        return u''\n \n @register.filter(is_safe=False)\n def dictsortreversed(value, arg):\n     \"\"\"\n     Takes a list of dicts, returns that list sorted in reverse order by the\n     property given in the argument.\n     \"\"\"\n-    return sorted(value, key=Variable(arg).resolve, reverse=True)\n+    try:\n+        return sorted(value, key=Variable(arg).resolve, reverse=True)\n+    except (TypeError, VariableDoesNotExist):\n+        return u''\n \n @register.filter(is_safe=False)\n def first(value):"
        },
        {
            "sha": "94e8c43430d966635661e12f63d88bfa4a406257",
            "filename": "tests/regressiontests/defaultfilters/tests.py",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/c5dcba4159e00ed7fc43b605946be489602ab369/tests%2Fregressiontests%2Fdefaultfilters%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c5dcba4159e00ed7fc43b605946be489602ab369/tests%2Fregressiontests%2Fdefaultfilters%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdefaultfilters%2Ftests.py?ref=c5dcba4159e00ed7fc43b605946be489602ab369",
            "patch": "@@ -368,6 +368,13 @@ def test_dictsort(self):\n              [('age', 23), ('name', 'Barbara-Ann')],\n              [('age', 63), ('name', 'Ra Ra Rasputin')]])\n \n+        # If it gets passed a list of something else different from\n+        # dictionaries it should fail silently\n+        self.assertEqual(dictsort([1, 2, 3], 'age'), '')\n+        self.assertEqual(dictsort('Hello!', 'age'), '')\n+        self.assertEqual(dictsort({'a': 1}, 'age'), '')\n+        self.assertEqual(dictsort(1, 'age'), '')\n+\n     def test_dictsortreversed(self):\n         sorted_dicts = dictsortreversed([{'age': 23, 'name': 'Barbara-Ann'},\n                                          {'age': 63, 'name': 'Ra Ra Rasputin'},\n@@ -379,6 +386,13 @@ def test_dictsortreversed(self):\n              [('age', 23), ('name', 'Barbara-Ann')],\n              [('age', 18), ('name', 'Jonny B Goode')]])\n \n+        # If it gets passed a list of something else different from\n+        # dictionaries it should fail silently\n+        self.assertEqual(dictsortreversed([1, 2, 3], 'age'), '')\n+        self.assertEqual(dictsortreversed('Hello!', 'age'), '')\n+        self.assertEqual(dictsortreversed({'a': 1}, 'age'), '')\n+        self.assertEqual(dictsortreversed(1, 'age'), '')\n+\n     def test_first(self):\n         self.assertEqual(first([0,1,2]), 0)\n         self.assertEqual(first(u''), u'')"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 23,
        "deletions": 3
    }
}